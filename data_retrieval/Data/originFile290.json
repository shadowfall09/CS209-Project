{"items":[{"tags":["java","spring-boot","tomcat","intellij-idea","logback"],"comments":[{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1542125576,"post_id":53285083,"comment_id":93452184,"body_markdown":"**(Access is denied)** Program Files is a protected directory and cannot be accessed without administrator permissions.","body":"<b>(Access is denied)</b> Program Files is a protected directory and cannot be accessed without administrator permissions."}],"answers":[{"tags":[],"owner":{"account_id":8888831,"reputation":2120,"user_id":6636213,"display_name":"MohammadReza  Alagheband"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1550033207,"creation_date":1542125856,"answer_id":53285201,"question_id":53285083,"body_markdown":"Two reasons you might facing in this condition: \r\n\r\n1. See if you have permission to read *spring.log* file or not this is\r\nthe most obvious reason of `java.io.FileNotFoundException`: (Access is\r\ndenied) exception and I didn&#39;t had sufficient permission so I\r\nimmediately provided **read, write and execute** permission to the log\r\nfile and tried again.\r\n \r\n2. See if some other process is using that file This could be another\r\npossible reason of `java.io.FileNotFoundException`: (Access is\r\ndenied).\r\n\r\n","title":"FileNotFoundException (Logback) while starting app","body":"<p>Two reasons you might facing in this condition: </p>\n\n<ol>\n<li><p>See if you have permission to read <em>spring.log</em> file or not this is\nthe most obvious reason of <code>java.io.FileNotFoundException</code>: (Access is\ndenied) exception and I didn't had sufficient permission so I\nimmediately provided <strong>read, write and execute</strong> permission to the log\nfile and tried again.</p></li>\n<li><p>See if some other process is using that file This could be another\npossible reason of <code>java.io.FileNotFoundException</code>: (Access is\ndenied).</p></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":12553303,"reputation":141,"user_id":9134028,"display_name":"poomcyber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690212804,"creation_date":1690212804,"answer_id":76756002,"question_id":53285083,"body_markdown":"In my case, I have the save error message like you,\r\n`....call failed. java.io.FileNotFoundException`\r\n\r\nThe point is the user who runs the application does not have permission to write log file, look at your `.service` file to find who runs the application. \r\n   However, if you want to pass this problem **easily** just change permission of &quot;logs&quot; folder to 777 \r\n\r\n     &lt;file&gt;${catalina.base}/logs/${springAppName}.log&lt;/file&gt;\r\nby using this linux command.\r\n\r\n&gt; chmod 777 logs\r\n\r\nDoing this solve my problem.","title":"FileNotFoundException (Logback) while starting app","body":"<p>In my case, I have the save error message like you,\n<code>....call failed. java.io.FileNotFoundException</code></p>\n<p>The point is the user who runs the application does not have permission to write log file, look at your <code>.service</code> file to find who runs the application.\nHowever, if you want to pass this problem <strong>easily</strong> just change permission of &quot;logs&quot; folder to 777</p>\n<pre><code> &lt;file&gt;${catalina.base}/logs/${springAppName}.log&lt;/file&gt;\n</code></pre>\n<p>by using this linux command.</p>\n<blockquote>\n<p>chmod 777 logs</p>\n</blockquote>\n<p>Doing this solve my problem.</p>\n"}],"owner":{"account_id":6430643,"reputation":1854,"user_id":4983983,"accept_rate":60,"display_name":"tryingHard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10378,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1690212804,"creation_date":1542125470,"question_id":53285083,"body_markdown":"When running `SpringBoot 2.0.3` app on tomcat `8.5.0` i get following error:\r\n\r\n&gt; ERROR in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - \r\n&gt; openFile(C:\\Program Files\\Apache Software Foundation\\Tomcat\r\n&gt; 9.0\\temp/spring.log,true) call failed.  java.io.FileNotFoundException: C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\temp\\spring.log\r\n&gt; (Access is denied)\r\n\r\n`logback-spring.xml` from this module is as follow:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;configuration&gt;\r\n    \r\n        &lt;springProperty scope=&quot;context&quot; name=&quot;springAppName&quot; source=&quot;spring.application.name&quot;/&gt;\r\n        &lt;include resource=&quot;org/springframework/boot/logging/logback/base.xml&quot;/&gt;\r\n        &lt;include resource=&quot;logback-json.xml&quot;/&gt;\r\n        &lt;property name=&quot;LOG_PATTERN&quot;\r\n                  value=&quot;%date{yyyy-MM-dd HH:mm:ss.SSS}|${springAppName}|[%X{X-B3-TraceId:-},%X{X-B3-SpanId:-},%X{X-Span-Export:-}]|%thread|%.-1level|%logger{10}|%msg%n&quot;/&gt;\r\n    \r\n        &lt;appender name=&quot;CONSOLE&quot; class=&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;appender name=&quot;ROLLING&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n            &lt;file&gt;${catalina.base}/logs/${springAppName}.log&lt;/file&gt;\r\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n                &lt;fileNamePattern&gt;${catalina.base}/logs/${springAppName}-%d{yyyy-MM-dd}.%i.log.zip&lt;/fileNamePattern&gt;\r\n                &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\r\n            &lt;/rollingPolicy&gt;\r\n            &lt;encoder&gt;\r\n                &lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;logger name=&quot;pl.X&quot; level=&quot;debug&quot;/&gt;\r\n    \r\n        &lt;logger name=&quot;jdbc.sqltiming&quot; level=&quot;info&quot;/&gt;\r\n    \r\n        &lt;appender name=&quot;ASYNC_REQUEST_RESPONSE_JSON_LOG&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;\r\n            &lt;appender-ref ref=&quot;REQUEST_RESPONSE_JSON_LOG&quot;/&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;appender name=&quot;ASYNC_ROLLING&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;\r\n            &lt;appender-ref ref=&quot;ROLLING&quot;/&gt;\r\n        &lt;/appender&gt;\r\n        &lt;appender name=&quot;ASYNC_SERVER_JSON_LOG&quot; class=&quot;ch.qos.logback.classic.AsyncAppender&quot;&gt;\r\n            &lt;appender-ref ref=&quot;SERVER_JSON_LOG&quot;/&gt;\r\n        &lt;/appender&gt;\r\n        &lt;logger name=&quot;somePakaes.trace.XLoggingFilter&quot; additivity=&quot;false&quot; level=&quot;DEBUG&quot;&gt;\r\n            &lt;appender-ref ref=&quot;ASYNC_REQUEST_RESPONSE_JSON_LOG&quot;/&gt;\r\n        &lt;/logger&gt;\r\n        &lt;root level=&quot;WARN&quot;&gt;\r\n            &lt;appender-ref ref=&quot;ASYNC_ROLLING&quot;/&gt;\r\n            &lt;appender-ref ref=&quot;ASYNC_SERVER_JSON_LOG&quot;/&gt;\r\n            &lt;appender-ref ref=&quot;CONSOLE&quot;/&gt;\r\n        &lt;/root&gt;\r\n\r\n&lt;/configuration&gt;\r\n\r\n\r\nAnd here is `logback-json.xml` that above files refers to:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;included&gt;\r\n        &lt;springProperty scope=&quot;context&quot; name=&quot;springAppName&quot; source=&quot;spring.application.name&quot;/&gt;\r\n    \r\n        &lt;appender name=&quot;SERVER_JSON_LOG&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n            &lt;file&gt;${catalina.base}/logs/${springAppName}.json&lt;/file&gt;\r\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n                &lt;fileNamePattern&gt;${catalina.base}/logs/${springAppName}-%d{yyyy-MM-dd}.%i.json.zip&lt;/fileNamePattern&gt;\r\n                &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\r\n                &lt;maxHistory&gt;2&lt;/maxHistory&gt;\r\n            &lt;/rollingPolicy&gt;\r\n            &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n                &lt;providers&gt;\r\n                    &lt;pattern&gt;\r\n                        &lt;pattern&gt;\r\n                            {\r\n                            &quot;date&quot;:&quot;%date&quot;,\r\n                            &quot;severity&quot;: &quot;%level&quot;,\r\n                            &quot;service&quot;: &quot;${springAppName}&quot;,\r\n                            &quot;trace&quot;: &quot;%X{X-B3-TraceId:-}&quot;,\r\n                            &quot;span&quot;: &quot;%X{X-B3-SpanId:-}&quot;,\r\n                            &quot;parent&quot;: &quot;%X{X-B3-ParentSpanId:-}&quot;,\r\n                            &quot;exportable&quot;: &quot;%X{X-Span-Export:-}&quot;,\r\n                            &quot;pid&quot;: &quot;${PID:-}&quot;,\r\n                            &quot;thread&quot;: &quot;%thread&quot;,\r\n                            &quot;class&quot;: &quot;%logger{26}&quot;,\r\n                            &quot;message&quot;: &quot;%message&quot;,\r\n                            &quot;ex&quot;: &quot;%ex&quot;\r\n                            }\r\n                        &lt;/pattern&gt;\r\n                    &lt;/pattern&gt;\r\n                &lt;/providers&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    \r\n        &lt;logger name=&quot;org.springframework.cloud.sleuth.instrument.web.TraceFilter&quot; level=&quot;error&quot;/&gt;\r\n        &lt;logger name=&quot;org.springframework.cloud.sleuth.instrument.web.TraceHandlerInterceptor&quot; level=&quot;error&quot;/&gt;\r\n    \r\n    \r\n        &lt;appender name=&quot;REQUEST_RESPONSE_JSON_LOG&quot; class=&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;\r\n            &lt;file&gt;${catalina.base}/logs/${springAppName}_request_response.json&lt;/file&gt;\r\n            &lt;rollingPolicy class=&quot;ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy&quot;&gt;\r\n                &lt;fileNamePattern&gt;${catalina.base}/logs/${springAppName}_request_response-%d{yyyy-MM-dd}.%i.json.zip&lt;/fileNamePattern&gt;\r\n                &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\r\n                &lt;maxHistory&gt;2&lt;/maxHistory&gt;\r\n            &lt;/rollingPolicy&gt;\r\n    \r\n            &lt;encoder class=&quot;net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder&quot;&gt;\r\n                &lt;providers&gt;\r\n                    &lt;pattern&gt;\r\n                        &lt;pattern&gt;\r\n                            {\r\n                            &quot;date&quot;:&quot;%date&quot;,\r\n                            &quot;service&quot;: &quot;${springAppName}&quot;,\r\n                            &quot;severity&quot;: &quot;%level&quot;,\r\n                            &quot;trace&quot;: &quot;%X{X-B3-TraceId:-}&quot;,\r\n                            &quot;span&quot;: &quot;%X{X-B3-SpanId:-}&quot;,\r\n                            &quot;parent&quot;: &quot;%X{X-B3-ParentSpanId:-}&quot;,\r\n                            &quot;pid&quot;: &quot;${PID:-}&quot;,\r\n                            &quot;thread&quot;: &quot;%thread&quot;,\r\n                            &quot;message&quot;: &quot;%message&quot;\r\n                            }\r\n                        &lt;/pattern&gt;\r\n                    &lt;/pattern&gt;\r\n                &lt;/providers&gt;\r\n            &lt;/encoder&gt;\r\n        &lt;/appender&gt;\r\n    &lt;/included&gt;\r\n\r\nBut the problem disappears when running InteliJ as an `admin`.","title":"FileNotFoundException (Logback) while starting app","body":"<p>When running <code>SpringBoot 2.0.3</code> app on tomcat <code>8.5.0</code> i get following error:</p>\n\n<blockquote>\n  <p>ERROR in ch.qos.logback.core.rolling.RollingFileAppender[FILE] - \n  openFile(C:\\Program Files\\Apache Software Foundation\\Tomcat\n  9.0\\temp/spring.log,true) call failed.  java.io.FileNotFoundException: C:\\Program Files\\Apache Software Foundation\\Tomcat 9.0\\temp\\spring.log\n  (Access is denied)</p>\n</blockquote>\n\n<p><code>logback-spring.xml</code> from this module is as follow:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;configuration&gt;\n\n    &lt;springProperty scope=\"context\" name=\"springAppName\" source=\"spring.application.name\"/&gt;\n    &lt;include resource=\"org/springframework/boot/logging/logback/base.xml\"/&gt;\n    &lt;include resource=\"logback-json.xml\"/&gt;\n    &lt;property name=\"LOG_PATTERN\"\n              value=\"%date{yyyy-MM-dd HH:mm:ss.SSS}|${springAppName}|[%X{X-B3-TraceId:-},%X{X-B3-SpanId:-},%X{X-Span-Export:-}]|%thread|%.-1level|%logger{10}|%msg%n\"/&gt;\n\n    &lt;appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\"&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"ROLLING\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;file&gt;${catalina.base}/logs/${springAppName}.log&lt;/file&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt;\n            &lt;fileNamePattern&gt;${catalina.base}/logs/${springAppName}-%d{yyyy-MM-dd}.%i.log.zip&lt;/fileNamePattern&gt;\n            &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder&gt;\n            &lt;pattern&gt;${LOG_PATTERN}&lt;/pattern&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=\"pl.X\" level=\"debug\"/&gt;\n\n    &lt;logger name=\"jdbc.sqltiming\" level=\"info\"/&gt;\n\n    &lt;appender name=\"ASYNC_REQUEST_RESPONSE_JSON_LOG\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;appender-ref ref=\"REQUEST_RESPONSE_JSON_LOG\"/&gt;\n    &lt;/appender&gt;\n\n    &lt;appender name=\"ASYNC_ROLLING\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;appender-ref ref=\"ROLLING\"/&gt;\n    &lt;/appender&gt;\n    &lt;appender name=\"ASYNC_SERVER_JSON_LOG\" class=\"ch.qos.logback.classic.AsyncAppender\"&gt;\n        &lt;appender-ref ref=\"SERVER_JSON_LOG\"/&gt;\n    &lt;/appender&gt;\n    &lt;logger name=\"somePakaes.trace.XLoggingFilter\" additivity=\"false\" level=\"DEBUG\"&gt;\n        &lt;appender-ref ref=\"ASYNC_REQUEST_RESPONSE_JSON_LOG\"/&gt;\n    &lt;/logger&gt;\n    &lt;root level=\"WARN\"&gt;\n        &lt;appender-ref ref=\"ASYNC_ROLLING\"/&gt;\n        &lt;appender-ref ref=\"ASYNC_SERVER_JSON_LOG\"/&gt;\n        &lt;appender-ref ref=\"CONSOLE\"/&gt;\n    &lt;/root&gt;\n</code></pre>\n\n<p></p>\n\n<p>And here is <code>logback-json.xml</code> that above files refers to:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;included&gt;\n    &lt;springProperty scope=\"context\" name=\"springAppName\" source=\"spring.application.name\"/&gt;\n\n    &lt;appender name=\"SERVER_JSON_LOG\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;file&gt;${catalina.base}/logs/${springAppName}.json&lt;/file&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt;\n            &lt;fileNamePattern&gt;${catalina.base}/logs/${springAppName}-%d{yyyy-MM-dd}.%i.json.zip&lt;/fileNamePattern&gt;\n            &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\n            &lt;maxHistory&gt;2&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n        &lt;encoder class=\"net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder\"&gt;\n            &lt;providers&gt;\n                &lt;pattern&gt;\n                    &lt;pattern&gt;\n                        {\n                        \"date\":\"%date\",\n                        \"severity\": \"%level\",\n                        \"service\": \"${springAppName}\",\n                        \"trace\": \"%X{X-B3-TraceId:-}\",\n                        \"span\": \"%X{X-B3-SpanId:-}\",\n                        \"parent\": \"%X{X-B3-ParentSpanId:-}\",\n                        \"exportable\": \"%X{X-Span-Export:-}\",\n                        \"pid\": \"${PID:-}\",\n                        \"thread\": \"%thread\",\n                        \"class\": \"%logger{26}\",\n                        \"message\": \"%message\",\n                        \"ex\": \"%ex\"\n                        }\n                    &lt;/pattern&gt;\n                &lt;/pattern&gt;\n            &lt;/providers&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n\n    &lt;logger name=\"org.springframework.cloud.sleuth.instrument.web.TraceFilter\" level=\"error\"/&gt;\n    &lt;logger name=\"org.springframework.cloud.sleuth.instrument.web.TraceHandlerInterceptor\" level=\"error\"/&gt;\n\n\n    &lt;appender name=\"REQUEST_RESPONSE_JSON_LOG\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\"&gt;\n        &lt;file&gt;${catalina.base}/logs/${springAppName}_request_response.json&lt;/file&gt;\n        &lt;rollingPolicy class=\"ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy\"&gt;\n            &lt;fileNamePattern&gt;${catalina.base}/logs/${springAppName}_request_response-%d{yyyy-MM-dd}.%i.json.zip&lt;/fileNamePattern&gt;\n            &lt;maxFileSize&gt;200MB&lt;/maxFileSize&gt;\n            &lt;maxHistory&gt;2&lt;/maxHistory&gt;\n        &lt;/rollingPolicy&gt;\n\n        &lt;encoder class=\"net.logstash.logback.encoder.LoggingEventCompositeJsonEncoder\"&gt;\n            &lt;providers&gt;\n                &lt;pattern&gt;\n                    &lt;pattern&gt;\n                        {\n                        \"date\":\"%date\",\n                        \"service\": \"${springAppName}\",\n                        \"severity\": \"%level\",\n                        \"trace\": \"%X{X-B3-TraceId:-}\",\n                        \"span\": \"%X{X-B3-SpanId:-}\",\n                        \"parent\": \"%X{X-B3-ParentSpanId:-}\",\n                        \"pid\": \"${PID:-}\",\n                        \"thread\": \"%thread\",\n                        \"message\": \"%message\"\n                        }\n                    &lt;/pattern&gt;\n                &lt;/pattern&gt;\n            &lt;/providers&gt;\n        &lt;/encoder&gt;\n    &lt;/appender&gt;\n&lt;/included&gt;\n</code></pre>\n\n<p>But the problem disappears when running InteliJ as an <code>admin</code>.</p>\n"},{"tags":["java","avro","apache-beam-io","gcs"],"owner":{"account_id":21539897,"reputation":3,"user_id":15877818,"display_name":"jeks"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":72,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690212764,"creation_date":1690210827,"question_id":76755709,"body_markdown":"I am trying to write generic records to a GCS bucket as avro, On writing I can observe two things\r\n\r\n- The File type in GCS is application/octet-stream instead of avro\r\n- Some of the data are missing i.e are null, especially the nested fields\r\n\r\nHere is the code sample, (this is in a  DoFn)\r\n\r\n\r\n    String DatetimeSuffix = new SimpleDateFormat(&quot;yyyyMMddHHmmssSSS&quot;).format(new Date());\r\n    \r\n    String fileSuffix = String.join(&quot;_&quot;,&quot;realtime_data&quot;, DatetimeSuffix);\r\n    \r\n    \r\n    dirGCSBucket = String.join(&quot;/&quot;,bucketURI,&quot;year=&quot;+year, &quot;month=&quot;+month, &quot;day=&quot;+day, &quot;hour=&quot;+hour);\r\n    \r\n    \r\n    Storage storage = StorageOptions.newBuilder().setProjectId(projectID).build().getService();\r\n    BlobId blobId = BlobId.of(gcsBucket, dirGCSBucket + &quot;/&quot; +  fileSuffix + &quot;.avro&quot;);\r\n    BlobInfo blobInfo = BlobInfo.newBuilder(blobId).build();\r\n    \r\n    Blob blob = storage.create(blobInfo);\r\n    \r\n    DataFileWriter&lt;GenericRecord&gt; dataFileWriter = new DataFileWriter&lt;&gt;(new GenericDatumWriter&lt;&gt;(genericRecord.getSchema()));\r\n    \r\n    try {\r\n        dataFileWriter.create(genericRecord.getSchema(), Channels.newOutputStream(blob.writer()));\r\n        dataFileWriter.append(genericRecord);\r\n        dataFileWriter.close();\r\n    } catch (IOException e) {\r\n        LOG.warn(String.format(&quot;Failed writing for: %s in file: %s&quot;, key.toString(), fileName));\r\n        LOG.error(&quot;input Error&quot;, e)\r\n    }`\r\n\r\n\r\n**Does someone know why I am having these issues and/or is there a better way to do this?**\r\n\r\nThe major expectation for me is to make sure I don&#39;t have data loss, when I write to a GCS bucket","title":"Writing Generic Record as Avro Files to GCS Bucket in Java","body":"<p>I am trying to write generic records to a GCS bucket as avro, On writing I can observe two things</p>\n<ul>\n<li>The File type in GCS is application/octet-stream instead of avro</li>\n<li>Some of the data are missing i.e are null, especially the nested fields</li>\n</ul>\n<p>Here is the code sample, (this is in a  DoFn)</p>\n<pre><code>String DatetimeSuffix = new SimpleDateFormat(&quot;yyyyMMddHHmmssSSS&quot;).format(new Date());\n\nString fileSuffix = String.join(&quot;_&quot;,&quot;realtime_data&quot;, DatetimeSuffix);\n\n\ndirGCSBucket = String.join(&quot;/&quot;,bucketURI,&quot;year=&quot;+year, &quot;month=&quot;+month, &quot;day=&quot;+day, &quot;hour=&quot;+hour);\n\n\nStorage storage = StorageOptions.newBuilder().setProjectId(projectID).build().getService();\nBlobId blobId = BlobId.of(gcsBucket, dirGCSBucket + &quot;/&quot; +  fileSuffix + &quot;.avro&quot;);\nBlobInfo blobInfo = BlobInfo.newBuilder(blobId).build();\n\nBlob blob = storage.create(blobInfo);\n\nDataFileWriter&lt;GenericRecord&gt; dataFileWriter = new DataFileWriter&lt;&gt;(new GenericDatumWriter&lt;&gt;(genericRecord.getSchema()));\n\ntry {\n    dataFileWriter.create(genericRecord.getSchema(), Channels.newOutputStream(blob.writer()));\n    dataFileWriter.append(genericRecord);\n    dataFileWriter.close();\n} catch (IOException e) {\n    LOG.warn(String.format(&quot;Failed writing for: %s in file: %s&quot;, key.toString(), fileName));\n    LOG.error(&quot;input Error&quot;, e)\n}`\n</code></pre>\n<p><strong>Does someone know why I am having these issues and/or is there a better way to do this?</strong></p>\n<p>The major expectation for me is to make sure I don't have data loss, when I write to a GCS bucket</p>\n"},{"tags":["java","jdbc","snowflake-cloud-data-platform","flyway","redgate"],"comments":[{"owner":{"account_id":10586318,"reputation":4177,"user_id":7798548,"display_name":"Sergiu"},"score":1,"creation_date":1690212698,"post_id":76755390,"comment_id":135318549,"body_markdown":"Are you using a Java version above 16? Then have a look at [this article](https://community.snowflake.com/s/article/JDBC-Driver-Compatibility-Issue-With-JDK-16-and-Later).","body":"Are you using a Java version above 16? Then have a look at <a href=\"https://community.snowflake.com/s/article/JDBC-Driver-Compatibility-Issue-With-JDK-16-and-Later\" rel=\"nofollow noreferrer\">this article</a>."}],"owner":{"account_id":11949917,"reputation":1,"user_id":8743861,"display_name":"Vasanth Kumar"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":99,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690212582,"creation_date":1690208420,"question_id":76755390,"body_markdown":"`ERROR: Unable to determine the original schema for the connection`\r\n----------------------------------------------------------\r\n\r\n    SQL State  : XX000\r\n    Error Code : 200001\r\n    Message    : JDBC driver internal error: exception creating result java.lang.ExceptionInInitializerError at net.snowflake.client.jdbc.internal.apache.arrow.memory.UnsafeAllocationManager.&lt;clinit&gt;(UnsafeAllocationManager.java:27).\r\n    \r\n    Caused by: net.snowflake.client.jdbc.SnowflakeSQLException: JDBC driver internal error: exception creating result java.lang.ExceptionInInitializerError at net.snowflake.client.jdbc.internal.apache.arrow.memory.UnsafeAllocationManager.&lt;clinit&gt;(UnsafeAllocationManager.java:27).\r\n\r\n\r\n\r\nI am getting the above error, it is successfully connecting to database and then I&#39;m getting this error. I have set the schema in URL, checked for drivers and jars, and set the default schema as well in config file. I have replaced the jar with latest snowflake-jdbc jar , even then i am facing the same issue. \r\n\r\nI want to connect to snowflake and migrate some tables.\r\n\r\nCan anyone please help me on this.\r\n","title":"Trying to connect snowflake using flyway-migration","body":"<h2><code>ERROR: Unable to determine the original schema for the connection</code></h2>\n<pre><code>SQL State  : XX000\nError Code : 200001\nMessage    : JDBC driver internal error: exception creating result java.lang.ExceptionInInitializerError at net.snowflake.client.jdbc.internal.apache.arrow.memory.UnsafeAllocationManager.&lt;clinit&gt;(UnsafeAllocationManager.java:27).\n\nCaused by: net.snowflake.client.jdbc.SnowflakeSQLException: JDBC driver internal error: exception creating result java.lang.ExceptionInInitializerError at net.snowflake.client.jdbc.internal.apache.arrow.memory.UnsafeAllocationManager.&lt;clinit&gt;(UnsafeAllocationManager.java:27).\n</code></pre>\n<p>I am getting the above error, it is successfully connecting to database and then I'm getting this error. I have set the schema in URL, checked for drivers and jars, and set the default schema as well in config file. I have replaced the jar with latest snowflake-jdbc jar , even then i am facing the same issue.</p>\n<p>I want to connect to snowflake and migrate some tables.</p>\n<p>Can anyone please help me on this.</p>\n"},{"tags":["java","json","csv"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1690200346,"post_id":76754157,"comment_id":135315710,"body_markdown":"Just create a _class_ to contain the _csv_ data, and then generate the _json_ output.","body":"Just create a <i>class</i> to contain the <i>csv</i> data, and then generate the <i>json</i> output."}],"answers":[{"tags":[],"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690201248,"creation_date":1690201248,"answer_id":76754473,"question_id":76754157,"body_markdown":"All you need is a way to parse the CSV to a Java object. You can do this manually, or by using an existing library.\r\n\r\nFor example, you can use Jackson with the CSV data format like this:\r\n\r\n    class MyRecord {\r\n    \r\n        @JsonProperty(&quot;user_id&quot;)\r\n        private int userId;\r\n        \r\n        private String nickname;\r\n        \r\n        private LocalDate joinDate;\r\n    \r\n        @JsonProperty(&quot;product_id&quot;)\r\n        private String productId;\r\n\r\n        // getters and setters\r\n\r\n        // a meaningful toString method\r\n\r\n    }\r\n\r\n    public class Main {\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            String csv = &quot;user_id,nickname,joinDate,product_id,price\\n&quot; +\r\n                    &quot;1,kmh,2023-07-24,P131,3000\\n&quot; +\r\n                    &quot;1,kmh,2023-07-24,P132,4000\\n&quot; +\r\n                    &quot;1,kmh,2023-07-24,P133,7000\\n&quot; +\r\n                    &quot;1,kmh,2023-07-24,P134,9000\\n&quot; +\r\n                    &quot;2,john,2023-07-24,P135,2500\\n&quot; +\r\n                    &quot;2,john,2023-07-24,P136,6000\\n&quot; +\r\n                    &quot;3,alice,2023-07-25,P137,4500\\n&quot; +\r\n                    &quot;3,alice,2023-07-25,P138,8000&quot;;\r\n    \r\n            CsvSchema schema = CsvSchema.emptySchema().withHeader(); // uses CSV header to read the schema\r\n            ObjectMapper mapper = new CsvMapper().registerModule(new JavaTimeModule()); // to deserialise Java 8 LocalDate\r\n            MappingIterator&lt;MyRecord&gt; resultIterator = mapper.readerFor(MyRecord.class).with(schema).readValues(csv);\r\n            while (resultIterator.hasNext()) {\r\n                System.out.println(resultIterator.next());\r\n            }\r\n            resultIterator.close();\r\n        }\r\n    } \r\n\r\nWhich prints:\r\n\r\n    MyRecord[userId=1, nickname=&#39;kmh&#39;, joinDate=2023-07-24, productId=&#39;P131&#39;, price=3000]\r\n    MyRecord[userId=1, nickname=&#39;kmh&#39;, joinDate=2023-07-24, productId=&#39;P132&#39;, price=4000]\r\n    MyRecord[userId=1, nickname=&#39;kmh&#39;, joinDate=2023-07-24, productId=&#39;P133&#39;, price=7000]\r\n    MyRecord[userId=1, nickname=&#39;kmh&#39;, joinDate=2023-07-24, productId=&#39;P134&#39;, price=9000]\r\n    MyRecord[userId=2, nickname=&#39;john&#39;, joinDate=2023-07-24, productId=&#39;P135&#39;, price=2500]\r\n    MyRecord[userId=2, nickname=&#39;john&#39;, joinDate=2023-07-24, productId=&#39;P136&#39;, price=6000]\r\n    MyRecord[userId=3, nickname=&#39;alice&#39;, joinDate=2023-07-25, productId=&#39;P137&#39;, price=4500]\r\n    MyRecord[userId=3, nickname=&#39;alice&#39;, joinDate=2023-07-25, productId=&#39;P138&#39;, price=8000]\r\n","title":"How to change an unnormalized csv file to a complex json or java object","body":"<p>All you need is a way to parse the CSV to a Java object. You can do this manually, or by using an existing library.</p>\n<p>For example, you can use Jackson with the CSV data format like this:</p>\n<pre><code>class MyRecord {\n\n    @JsonProperty(&quot;user_id&quot;)\n    private int userId;\n    \n    private String nickname;\n    \n    private LocalDate joinDate;\n\n    @JsonProperty(&quot;product_id&quot;)\n    private String productId;\n\n    // getters and setters\n\n    // a meaningful toString method\n\n}\n\npublic class Main {\n\n    public static void main(String[] args) throws IOException {\n        String csv = &quot;user_id,nickname,joinDate,product_id,price\\n&quot; +\n                &quot;1,kmh,2023-07-24,P131,3000\\n&quot; +\n                &quot;1,kmh,2023-07-24,P132,4000\\n&quot; +\n                &quot;1,kmh,2023-07-24,P133,7000\\n&quot; +\n                &quot;1,kmh,2023-07-24,P134,9000\\n&quot; +\n                &quot;2,john,2023-07-24,P135,2500\\n&quot; +\n                &quot;2,john,2023-07-24,P136,6000\\n&quot; +\n                &quot;3,alice,2023-07-25,P137,4500\\n&quot; +\n                &quot;3,alice,2023-07-25,P138,8000&quot;;\n\n        CsvSchema schema = CsvSchema.emptySchema().withHeader(); // uses CSV header to read the schema\n        ObjectMapper mapper = new CsvMapper().registerModule(new JavaTimeModule()); // to deserialise Java 8 LocalDate\n        MappingIterator&lt;MyRecord&gt; resultIterator = mapper.readerFor(MyRecord.class).with(schema).readValues(csv);\n        while (resultIterator.hasNext()) {\n            System.out.println(resultIterator.next());\n        }\n        resultIterator.close();\n    }\n} \n</code></pre>\n<p>Which prints:</p>\n<pre><code>MyRecord[userId=1, nickname='kmh', joinDate=2023-07-24, productId='P131', price=3000]\nMyRecord[userId=1, nickname='kmh', joinDate=2023-07-24, productId='P132', price=4000]\nMyRecord[userId=1, nickname='kmh', joinDate=2023-07-24, productId='P133', price=7000]\nMyRecord[userId=1, nickname='kmh', joinDate=2023-07-24, productId='P134', price=9000]\nMyRecord[userId=2, nickname='john', joinDate=2023-07-24, productId='P135', price=2500]\nMyRecord[userId=2, nickname='john', joinDate=2023-07-24, productId='P136', price=6000]\nMyRecord[userId=3, nickname='alice', joinDate=2023-07-25, productId='P137', price=4500]\nMyRecord[userId=3, nickname='alice', joinDate=2023-07-25, productId='P138', price=8000]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690211602,"creation_date":1690211602,"answer_id":76755840,"question_id":76754157,"body_markdown":"For your case, you can deserialize the csv into JsonNode directly without creating POJO class.  And then use JSON library _Josson_ to transform the JSON by function `group()`.\r\n\r\n    String csv = &quot;user_id,nickname,joinDate,product_id,price\\n&quot; +\r\n            &quot;1,kmh,2023-07-24,P131,3000\\n&quot; +\r\n            &quot;1,kmh,2023-07-24,P132,4000\\n&quot; +\r\n            &quot;1,kmh,2023-07-24,P133,7000\\n&quot; +\r\n            &quot;1,kmh,2023-07-24,P134,9000\\n&quot; +\r\n            &quot;2,john,2023-07-24,P135,2500\\n&quot; +\r\n            &quot;2,john,2023-07-24,P136,6000\\n&quot; +\r\n            &quot;3,alice,2023-07-25,P137,4500\\n&quot; +\r\n            &quot;3,alice,2023-07-25,P138,8000&quot;;\r\n    ArrayNode arrayNode = Josson.createArrayNode();\r\n    CsvSchema schema = CsvSchema.emptySchema().withHeader();\r\n    try (MappingIterator&lt;JsonNode&gt; it = new CsvMapper().readerFor(JsonNode.class).with(schema).readValues(csv)) {\r\n        arrayNode.addAll(it.readAll());\r\n    }\r\n    Josson josson = Josson.create(arrayNode);\r\n    JsonNode grouped = josson.getNode(\r\n            &quot;group(map(user_id, nickname, joinDate), map(product_id, price))&quot; +\r\n            &quot;.map(**:key, orders:elements)&quot;);\r\n    System.out.println(grouped.toPrettyString());\r\n\r\n__Function `group()`__  \r\n1. Group by &quot;key&quot; of {user_id, nickname, joinDate}\r\n2. With &quot;elements&quot; of {product_id, price}\r\n\r\n__Functoin `map()`__  \r\n1. Extract values inside object &quot;key&quot;\r\n2. Add field &quot;orders&quot; copy from &quot;elements&quot;\r\n\r\n__Output__\r\n\r\n    [ {\r\n      &quot;user_id&quot; : &quot;1&quot;,\r\n      &quot;nickname&quot; : &quot;kmh&quot;,\r\n      &quot;joinDate&quot; : &quot;2023-07-24&quot;,\r\n      &quot;orders&quot; : [ {\r\n        &quot;product_id&quot; : &quot;P131&quot;,\r\n        &quot;price&quot; : &quot;3000&quot;\r\n      }, {\r\n        &quot;product_id&quot; : &quot;P132&quot;,\r\n        &quot;price&quot; : &quot;4000&quot;\r\n      }, {\r\n        &quot;product_id&quot; : &quot;P133&quot;,\r\n        &quot;price&quot; : &quot;7000&quot;\r\n      }, {\r\n        &quot;product_id&quot; : &quot;P134&quot;,\r\n        &quot;price&quot; : &quot;9000&quot;\r\n      } ]\r\n    }, {\r\n      &quot;user_id&quot; : &quot;2&quot;,\r\n      &quot;nickname&quot; : &quot;john&quot;,\r\n      &quot;joinDate&quot; : &quot;2023-07-24&quot;,\r\n      &quot;orders&quot; : [ {\r\n        &quot;product_id&quot; : &quot;P135&quot;,\r\n        &quot;price&quot; : &quot;2500&quot;\r\n      }, {\r\n        &quot;product_id&quot; : &quot;P136&quot;,\r\n        &quot;price&quot; : &quot;6000&quot;\r\n      } ]\r\n    }, {\r\n      &quot;user_id&quot; : &quot;3&quot;,\r\n      &quot;nickname&quot; : &quot;alice&quot;,\r\n      &quot;joinDate&quot; : &quot;2023-07-25&quot;,\r\n      &quot;orders&quot; : [ {\r\n        &quot;product_id&quot; : &quot;P137&quot;,\r\n        &quot;price&quot; : &quot;4500&quot;\r\n      }, {\r\n        &quot;product_id&quot; : &quot;P138&quot;,\r\n        &quot;price&quot; : &quot;8000&quot;\r\n      } ]\r\n    } ]\r\n","title":"How to change an unnormalized csv file to a complex json or java object","body":"<p>For your case, you can deserialize the csv into JsonNode directly without creating POJO class.  And then use JSON library <em>Josson</em> to transform the JSON by function <code>group()</code>.</p>\n<pre><code>String csv = &quot;user_id,nickname,joinDate,product_id,price\\n&quot; +\n        &quot;1,kmh,2023-07-24,P131,3000\\n&quot; +\n        &quot;1,kmh,2023-07-24,P132,4000\\n&quot; +\n        &quot;1,kmh,2023-07-24,P133,7000\\n&quot; +\n        &quot;1,kmh,2023-07-24,P134,9000\\n&quot; +\n        &quot;2,john,2023-07-24,P135,2500\\n&quot; +\n        &quot;2,john,2023-07-24,P136,6000\\n&quot; +\n        &quot;3,alice,2023-07-25,P137,4500\\n&quot; +\n        &quot;3,alice,2023-07-25,P138,8000&quot;;\nArrayNode arrayNode = Josson.createArrayNode();\nCsvSchema schema = CsvSchema.emptySchema().withHeader();\ntry (MappingIterator&lt;JsonNode&gt; it = new CsvMapper().readerFor(JsonNode.class).with(schema).readValues(csv)) {\n    arrayNode.addAll(it.readAll());\n}\nJosson josson = Josson.create(arrayNode);\nJsonNode grouped = josson.getNode(\n        &quot;group(map(user_id, nickname, joinDate), map(product_id, price))&quot; +\n        &quot;.map(**:key, orders:elements)&quot;);\nSystem.out.println(grouped.toPrettyString());\n</code></pre>\n<p><strong>Function <code>group()</code></strong></p>\n<ol>\n<li>Group by &quot;key&quot; of {user_id, nickname, joinDate}</li>\n<li>With &quot;elements&quot; of {product_id, price}</li>\n</ol>\n<p><strong>Functoin <code>map()</code></strong></p>\n<ol>\n<li>Extract values inside object &quot;key&quot;</li>\n<li>Add field &quot;orders&quot; copy from &quot;elements&quot;</li>\n</ol>\n<p><strong>Output</strong></p>\n<pre><code>[ {\n  &quot;user_id&quot; : &quot;1&quot;,\n  &quot;nickname&quot; : &quot;kmh&quot;,\n  &quot;joinDate&quot; : &quot;2023-07-24&quot;,\n  &quot;orders&quot; : [ {\n    &quot;product_id&quot; : &quot;P131&quot;,\n    &quot;price&quot; : &quot;3000&quot;\n  }, {\n    &quot;product_id&quot; : &quot;P132&quot;,\n    &quot;price&quot; : &quot;4000&quot;\n  }, {\n    &quot;product_id&quot; : &quot;P133&quot;,\n    &quot;price&quot; : &quot;7000&quot;\n  }, {\n    &quot;product_id&quot; : &quot;P134&quot;,\n    &quot;price&quot; : &quot;9000&quot;\n  } ]\n}, {\n  &quot;user_id&quot; : &quot;2&quot;,\n  &quot;nickname&quot; : &quot;john&quot;,\n  &quot;joinDate&quot; : &quot;2023-07-24&quot;,\n  &quot;orders&quot; : [ {\n    &quot;product_id&quot; : &quot;P135&quot;,\n    &quot;price&quot; : &quot;2500&quot;\n  }, {\n    &quot;product_id&quot; : &quot;P136&quot;,\n    &quot;price&quot; : &quot;6000&quot;\n  } ]\n}, {\n  &quot;user_id&quot; : &quot;3&quot;,\n  &quot;nickname&quot; : &quot;alice&quot;,\n  &quot;joinDate&quot; : &quot;2023-07-25&quot;,\n  &quot;orders&quot; : [ {\n    &quot;product_id&quot; : &quot;P137&quot;,\n    &quot;price&quot; : &quot;4500&quot;\n  }, {\n    &quot;product_id&quot; : &quot;P138&quot;,\n    &quot;price&quot; : &quot;8000&quot;\n  } ]\n} ]\n</code></pre>\n"}],"owner":{"account_id":25682807,"reputation":3,"user_id":19445348,"display_name":"KBB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76755840,"answer_count":2,"score":0,"last_activity_date":1690211602,"creation_date":1690199115,"question_id":76754157,"body_markdown":"I have the following unnormalized csv file\r\n\r\n```csv\r\nuser_id,nickname,joinDate,product_id,price\r\n1,kmh,2023-07-24,P131,3000\r\n1,kmh,2023-07-24,P132,4000\r\n1,kmh,2023-07-24,P133,7000\r\n1,kmh,2023-07-24,P134,9000\r\n2,john,2023-07-24,P135,2500\r\n2,john,2023-07-24,P136,6000\r\n3,alice,2023-07-25,P137,4500\r\n3,alice,2023-07-25,P138,8000\r\n\r\n```\r\n\r\nI&#39;m going to change this to the following json format (or java object).\r\n\r\n```javascript\r\n[\r\n    {\r\n        &quot;user_id&quot;: 1,\r\n        &quot;nickname&quot;: &quot;kmh&quot;,\r\n        &quot;joinDate&quot;: &quot;2023-07-24&quot;,\r\n        &quot;orders&quot;: [\r\n            {\r\n                &quot;product_id&quot;: &quot;P131&quot;,\r\n                &quot;price&quot;: 3000\r\n            },\r\n            {\r\n                &quot;product_id&quot;: &quot;P132&quot;,\r\n                &quot;price&quot;: 4000\r\n            },\r\n            {\r\n                &quot;product_id&quot;: &quot;P133&quot;,\r\n                &quot;price&quot;: 7000\r\n            },\r\n            {\r\n                &quot;product_id&quot;: &quot;P134&quot;,\r\n                &quot;price&quot;: 9000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        &quot;user_id&quot;: 2,\r\n        &quot;nickname&quot;: &quot;john&quot;,\r\n        &quot;joinDate&quot;: &quot;2023-07-24&quot;,\r\n        &quot;orders&quot;: [\r\n            {\r\n                &quot;product_id&quot;: &quot;P135&quot;,\r\n                &quot;price&quot;: 2500\r\n            },\r\n            {\r\n                &quot;product_id&quot;: &quot;P136&quot;,\r\n                &quot;price&quot;: 6000\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        &quot;user_id&quot;: 3,\r\n        &quot;nickname&quot;: &quot;alice&quot;,\r\n        &quot;joinDate&quot;: &quot;2023-07-25&quot;,\r\n        &quot;orders&quot;: [\r\n            {\r\n                &quot;product_id&quot;: &quot;P137&quot;,\r\n                &quot;price&quot;: 4500\r\n            },\r\n            {\r\n                &quot;product_id&quot;: &quot;P138&quot;,\r\n                &quot;price&quot;: 8000\r\n            }\r\n        ]\r\n    }\r\n]\r\n\r\n```\r\n\r\n\r\nI&#39;ve been searching for quite a long time and haven&#39;t found a library or tool that enables this .\r\n\r\nI have so many different types of csv that I need tools or libraries to change all of these. Are there any libraries or tools that make this possible?","title":"How to change an unnormalized csv file to a complex json or java object","body":"<p>I have the following unnormalized csv file</p>\n<pre><code>user_id,nickname,joinDate,product_id,price\n1,kmh,2023-07-24,P131,3000\n1,kmh,2023-07-24,P132,4000\n1,kmh,2023-07-24,P133,7000\n1,kmh,2023-07-24,P134,9000\n2,john,2023-07-24,P135,2500\n2,john,2023-07-24,P136,6000\n3,alice,2023-07-25,P137,4500\n3,alice,2023-07-25,P138,8000\n\n</code></pre>\n<p>I'm going to change this to the following json format (or java object).</p>\n<pre class=\"lang-js prettyprint-override\"><code>[\n    {\n        &quot;user_id&quot;: 1,\n        &quot;nickname&quot;: &quot;kmh&quot;,\n        &quot;joinDate&quot;: &quot;2023-07-24&quot;,\n        &quot;orders&quot;: [\n            {\n                &quot;product_id&quot;: &quot;P131&quot;,\n                &quot;price&quot;: 3000\n            },\n            {\n                &quot;product_id&quot;: &quot;P132&quot;,\n                &quot;price&quot;: 4000\n            },\n            {\n                &quot;product_id&quot;: &quot;P133&quot;,\n                &quot;price&quot;: 7000\n            },\n            {\n                &quot;product_id&quot;: &quot;P134&quot;,\n                &quot;price&quot;: 9000\n            }\n        ]\n    },\n    {\n        &quot;user_id&quot;: 2,\n        &quot;nickname&quot;: &quot;john&quot;,\n        &quot;joinDate&quot;: &quot;2023-07-24&quot;,\n        &quot;orders&quot;: [\n            {\n                &quot;product_id&quot;: &quot;P135&quot;,\n                &quot;price&quot;: 2500\n            },\n            {\n                &quot;product_id&quot;: &quot;P136&quot;,\n                &quot;price&quot;: 6000\n            }\n        ]\n    },\n    {\n        &quot;user_id&quot;: 3,\n        &quot;nickname&quot;: &quot;alice&quot;,\n        &quot;joinDate&quot;: &quot;2023-07-25&quot;,\n        &quot;orders&quot;: [\n            {\n                &quot;product_id&quot;: &quot;P137&quot;,\n                &quot;price&quot;: 4500\n            },\n            {\n                &quot;product_id&quot;: &quot;P138&quot;,\n                &quot;price&quot;: 8000\n            }\n        ]\n    }\n]\n\n</code></pre>\n<p>I've been searching for quite a long time and haven't found a library or tool that enables this .</p>\n<p>I have so many different types of csv that I need tools or libraries to change all of these. Are there any libraries or tools that make this possible?</p>\n"},{"tags":["java","algorithm","math","logarithm"],"comments":[{"owner":{"account_id":3014764,"reputation":7449,"user_id":2557263,"display_name":"Alejandro"},"score":0,"creation_date":1527695674,"post_id":50608681,"comment_id":88227602,"body_markdown":"Possible duplicate of [Calculate logarithm by hand](https://stackoverflow.com/questions/50335506/calculate-logarithm-by-hand)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/50335506/calculate-logarithm-by-hand\">Calculate logarithm by hand</a>"},{"owner":{"account_id":433754,"reputation":38773,"user_id":995714,"accept_rate":56,"display_name":"phuclv"},"score":0,"creation_date":1527698629,"post_id":50608681,"comment_id":88229207,"body_markdown":"Possible duplicate of [Where to find algorithms for standard math functions?](https://stackoverflow.com/questions/2169641/where-to-find-algorithms-for-standard-math-functions)","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/2169641/where-to-find-algorithms-for-standard-math-functions\">Where to find algorithms for standard math functions?</a>"}],"answers":[{"tags":[],"owner":{"account_id":411142,"reputation":34084,"user_id":783412,"accept_rate":100,"display_name":"hd1"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1527695694,"creation_date":1527695694,"answer_id":50608972,"question_id":50608681,"body_markdown":"The definition of Math.log from [openjdk](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java) is:\r\n\r\n    public static double log(double a) {\r\n        return StrictMath.log(a); // default impl. delegates to StrictMath\r\n    }\r\n\r\nThis lead me to look at the source for [StrictMath](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/StrictMath.java), where log is declared as:\r\n\r\n    public static native double log(double a);\r\n\r\nThe native keyword [indicates JNI](https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for). In other words, it&#39;s off to a libc source to find what we&#39;re looking for. Since I use NetBSD, I&#39;ll post its definition of log:\r\n\r\n    /* __ieee754_log(x)\r\n     * Return the logrithm of x\r\n     *\r\n     * Method :\r\n     *   1. Argument Reduction: find k and f such that\r\n     *\t\t\tx = 2^k * (1+f),\r\n     *\t   where  sqrt(2)/2 &lt; 1+f &lt; sqrt(2) .\r\n     *\r\n     *   2. Approximation of log(1+f).\r\n     *\tLet s = f/(2+f) ; based on log(1+f) = log(1+s) - log(1-s)\r\n     *\t\t = 2s + 2/3 s**3 + 2/5 s**5 + .....,\r\n     *\t     \t = 2s + s*R\r\n     *      We use a special Reme algorithm on [0,0.1716] to generate\r\n     * \ta polynomial of degree 14 to approximate R The maximum error\r\n     *\tof this polynomial approximation is bounded by 2**-58.45. In\r\n     *\tother words,\r\n     *\t\t        2      4      6      8      10      12      14\r\n     *\t    R(z) ~ Lg1*s +Lg2*s +Lg3*s +Lg4*s +Lg5*s  +Lg6*s  +Lg7*s\r\n     *  \t(the values of Lg1 to Lg7 are listed in the program)\r\n     *\tand\r\n     *\t    |      2          14          |     -58.45\r\n     *\t    | Lg1*s +...+Lg7*s    -  R(z) | &lt;= 2\r\n     *\t    |                             |\r\n     *\tNote that 2s = f - s*f = f - hfsq + s*hfsq, where hfsq = f*f/2.\r\n     *\tIn order to guarantee error in log below 1ulp, we compute log\r\n     *\tby\r\n     *\t\tlog(1+f) = f - s*(f - R)\t(if f is not too large)\r\n     *\t\tlog(1+f) = f - (hfsq - s*(hfsq+R)).\t(better accuracy)\r\n     *\r\n     *\t3. Finally,  log(x) = k*ln2 + log(1+f).\r\n     *\t\t\t    = k*ln2_hi+(f-(hfsq-(s*(hfsq+R)+k*ln2_lo)))\r\n     *\t   Here ln2 is split into two floating point number:\r\n     *\t\t\tln2_hi + ln2_lo,\r\n     *\t   where n*ln2_hi is always exact for |n| &lt; 2000.\r\n     *\r\n     * Special cases:\r\n     *\tlog(x) is NaN with signal if x &lt; 0 (including -INF) ;\r\n     *\tlog(+INF) is +INF; log(0) is -INF with signal;\r\n     *\tlog(NaN) is that NaN with no signal.\r\n     *\r\n     * Accuracy:\r\n     *\taccording to an error analysis, the error is always less than\r\n     *\t1 ulp (unit in the last place).\r\n     *\r\n     * Constants:\r\n     * The hexadecimal values are the intended ones for the following\r\n     * constants. The decimal values may be used, provided that the\r\n     * compiler will convert from decimal to binary accurately enough\r\n     * to produce the hexadecimal values shown.\r\n     */\r\n    \r\n    #include &quot;math.h&quot;\r\n    #include &quot;math_private.h&quot;\r\n    \r\n    static const double\r\n    ln2_hi  =  6.93147180369123816490e-01,\t/* 3fe62e42 fee00000 */\r\n    ln2_lo  =  1.90821492927058770002e-10,\t/* 3dea39ef 35793c76 */\r\n    two54   =  1.80143985094819840000e+16,  /* 43500000 00000000 */\r\n    Lg1 = 6.666666666666735130e-01,  /* 3FE55555 55555593 */\r\n    Lg2 = 3.999999999940941908e-01,  /* 3FD99999 9997FA04 */\r\n    Lg3 = 2.857142874366239149e-01,  /* 3FD24924 94229359 */\r\n    Lg4 = 2.222219843214978396e-01,  /* 3FCC71C5 1D8E78AF */\r\n    Lg5 = 1.818357216161805012e-01,  /* 3FC74664 96CB03DE */\r\n    Lg6 = 1.531383769920937332e-01,  /* 3FC39A09 D078C69F */\r\n    Lg7 = 1.479819860511658591e-01;  /* 3FC2F112 DF3E5244 */\r\n    \r\n    static const double zero   =  0.0;\r\n    \r\n    double\r\n    __ieee754_log(double x)\r\n    {\r\n    \tdouble hfsq,f,s,z,R,w,t1,t2,dk;\r\n    \tint32_t k,hx,i,j;\r\n    \tu_int32_t lx;\r\n    \r\n    \tEXTRACT_WORDS(hx,lx,x);\r\n    \r\n    \tk=0;\r\n    \tif (hx &lt; 0x00100000) {\t\t\t/* x &lt; 2**-1022  */\r\n    \t    if (((hx&amp;0x7fffffff)|lx)==0)\r\n    \t\treturn -two54/zero;\t\t/* log(+-0)=-inf */\r\n    \t    if (hx&lt;0) return (x-x)/zero;\t/* log(-#) = NaN */\r\n    \t    k -= 54; x *= two54; /* subnormal number, scale up x */\r\n    \t    GET_HIGH_WORD(hx,x);\r\n    \t}\r\n    \tif (hx &gt;= 0x7ff00000) return x+x;\r\n    \tk += (hx&gt;&gt;20)-1023;\r\n    \thx &amp;= 0x000fffff;\r\n    \ti = (hx+0x95f64)&amp;0x100000;\r\n    \tSET_HIGH_WORD(x,hx|(i^0x3ff00000));\t/* normalize x or x/2 */\r\n    \tk += (i&gt;&gt;20);\r\n    \tf = x-1.0;\r\n    \tif((0x000fffff&amp;(2+hx))&lt;3) {\t/* |f| &lt; 2**-20 */\r\n    \t    if(f==zero) { if(k==0) return zero;  else {dk=(double)k;\r\n    \t\t\t\t   return dk*ln2_hi+dk*ln2_lo;}\r\n    \t    }\r\n    \t    R = f*f*(0.5-0.33333333333333333*f);\r\n    \t    if(k==0) return f-R; else {dk=(double)k;\r\n    \t    \t     return dk*ln2_hi-((R-dk*ln2_lo)-f);}\r\n    \t}\r\n     \ts = f/(2.0+f);\r\n    \tdk = (double)k;\r\n    \tz = s*s;\r\n    \ti = hx-0x6147a;\r\n    \tw = z*z;\r\n    \tj = 0x6b851-hx;\r\n    \tt1= w*(Lg2+w*(Lg4+w*Lg6));\r\n    \tt2= z*(Lg1+w*(Lg3+w*(Lg5+w*Lg7)));\r\n    \ti |= j;\r\n    \tR = t2+t1;\r\n    \tif(i&gt;0) {\r\n    \t    hfsq=0.5*f*f;\r\n    \t    if(k==0) return f-(hfsq-s*(hfsq+R)); else\r\n    \t\t     return dk*ln2_hi-((hfsq-(s*(hfsq+R)+dk*ln2_lo))-f);\r\n    \t} else {\r\n    \t    if(k==0) return f-s*(f-R); else\r\n    \t\t     return dk*ln2_hi-((s*(f-R)-dk*ln2_lo)-f);\r\n    \t}\r\n    }\r\n\r\nIf you need more help, leave a comment and I&#39;ll elaborate.","title":"Algorithm behind Math.log - Java","body":"<p>The definition of Math.log from <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java\" rel=\"noreferrer\">openjdk</a> is:</p>\n\n<pre><code>public static double log(double a) {\n    return StrictMath.log(a); // default impl. delegates to StrictMath\n}\n</code></pre>\n\n<p>This lead me to look at the source for <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/StrictMath.java\" rel=\"noreferrer\">StrictMath</a>, where log is declared as:</p>\n\n<pre><code>public static native double log(double a);\n</code></pre>\n\n<p>The native keyword <a href=\"https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for\">indicates JNI</a>. In other words, it's off to a libc source to find what we're looking for. Since I use NetBSD, I'll post its definition of log:</p>\n\n<pre><code>/* __ieee754_log(x)\n * Return the logrithm of x\n *\n * Method :\n *   1. Argument Reduction: find k and f such that\n *          x = 2^k * (1+f),\n *     where  sqrt(2)/2 &lt; 1+f &lt; sqrt(2) .\n *\n *   2. Approximation of log(1+f).\n *  Let s = f/(2+f) ; based on log(1+f) = log(1+s) - log(1-s)\n *       = 2s + 2/3 s**3 + 2/5 s**5 + .....,\n *           = 2s + s*R\n *      We use a special Reme algorithm on [0,0.1716] to generate\n *  a polynomial of degree 14 to approximate R The maximum error\n *  of this polynomial approximation is bounded by 2**-58.45. In\n *  other words,\n *              2      4      6      8      10      12      14\n *      R(z) ~ Lg1*s +Lg2*s +Lg3*s +Lg4*s +Lg5*s  +Lg6*s  +Lg7*s\n *      (the values of Lg1 to Lg7 are listed in the program)\n *  and\n *      |      2          14          |     -58.45\n *      | Lg1*s +...+Lg7*s    -  R(z) | &lt;= 2\n *      |                             |\n *  Note that 2s = f - s*f = f - hfsq + s*hfsq, where hfsq = f*f/2.\n *  In order to guarantee error in log below 1ulp, we compute log\n *  by\n *      log(1+f) = f - s*(f - R)    (if f is not too large)\n *      log(1+f) = f - (hfsq - s*(hfsq+R)). (better accuracy)\n *\n *  3. Finally,  log(x) = k*ln2 + log(1+f).\n *              = k*ln2_hi+(f-(hfsq-(s*(hfsq+R)+k*ln2_lo)))\n *     Here ln2 is split into two floating point number:\n *          ln2_hi + ln2_lo,\n *     where n*ln2_hi is always exact for |n| &lt; 2000.\n *\n * Special cases:\n *  log(x) is NaN with signal if x &lt; 0 (including -INF) ;\n *  log(+INF) is +INF; log(0) is -INF with signal;\n *  log(NaN) is that NaN with no signal.\n *\n * Accuracy:\n *  according to an error analysis, the error is always less than\n *  1 ulp (unit in the last place).\n *\n * Constants:\n * The hexadecimal values are the intended ones for the following\n * constants. The decimal values may be used, provided that the\n * compiler will convert from decimal to binary accurately enough\n * to produce the hexadecimal values shown.\n */\n\n#include \"math.h\"\n#include \"math_private.h\"\n\nstatic const double\nln2_hi  =  6.93147180369123816490e-01,  /* 3fe62e42 fee00000 */\nln2_lo  =  1.90821492927058770002e-10,  /* 3dea39ef 35793c76 */\ntwo54   =  1.80143985094819840000e+16,  /* 43500000 00000000 */\nLg1 = 6.666666666666735130e-01,  /* 3FE55555 55555593 */\nLg2 = 3.999999999940941908e-01,  /* 3FD99999 9997FA04 */\nLg3 = 2.857142874366239149e-01,  /* 3FD24924 94229359 */\nLg4 = 2.222219843214978396e-01,  /* 3FCC71C5 1D8E78AF */\nLg5 = 1.818357216161805012e-01,  /* 3FC74664 96CB03DE */\nLg6 = 1.531383769920937332e-01,  /* 3FC39A09 D078C69F */\nLg7 = 1.479819860511658591e-01;  /* 3FC2F112 DF3E5244 */\n\nstatic const double zero   =  0.0;\n\ndouble\n__ieee754_log(double x)\n{\n    double hfsq,f,s,z,R,w,t1,t2,dk;\n    int32_t k,hx,i,j;\n    u_int32_t lx;\n\n    EXTRACT_WORDS(hx,lx,x);\n\n    k=0;\n    if (hx &lt; 0x00100000) {          /* x &lt; 2**-1022  */\n        if (((hx&amp;0x7fffffff)|lx)==0)\n        return -two54/zero;     /* log(+-0)=-inf */\n        if (hx&lt;0) return (x-x)/zero;    /* log(-#) = NaN */\n        k -= 54; x *= two54; /* subnormal number, scale up x */\n        GET_HIGH_WORD(hx,x);\n    }\n    if (hx &gt;= 0x7ff00000) return x+x;\n    k += (hx&gt;&gt;20)-1023;\n    hx &amp;= 0x000fffff;\n    i = (hx+0x95f64)&amp;0x100000;\n    SET_HIGH_WORD(x,hx|(i^0x3ff00000)); /* normalize x or x/2 */\n    k += (i&gt;&gt;20);\n    f = x-1.0;\n    if((0x000fffff&amp;(2+hx))&lt;3) { /* |f| &lt; 2**-20 */\n        if(f==zero) { if(k==0) return zero;  else {dk=(double)k;\n                   return dk*ln2_hi+dk*ln2_lo;}\n        }\n        R = f*f*(0.5-0.33333333333333333*f);\n        if(k==0) return f-R; else {dk=(double)k;\n                 return dk*ln2_hi-((R-dk*ln2_lo)-f);}\n    }\n    s = f/(2.0+f);\n    dk = (double)k;\n    z = s*s;\n    i = hx-0x6147a;\n    w = z*z;\n    j = 0x6b851-hx;\n    t1= w*(Lg2+w*(Lg4+w*Lg6));\n    t2= z*(Lg1+w*(Lg3+w*(Lg5+w*Lg7)));\n    i |= j;\n    R = t2+t1;\n    if(i&gt;0) {\n        hfsq=0.5*f*f;\n        if(k==0) return f-(hfsq-s*(hfsq+R)); else\n             return dk*ln2_hi-((hfsq-(s*(hfsq+R)+dk*ln2_lo))-f);\n    } else {\n        if(k==0) return f-s*(f-R); else\n             return dk*ln2_hi-((s*(f-R)-dk*ln2_lo)-f);\n    }\n}\n</code></pre>\n\n<p>If you need more help, leave a comment and I'll elaborate.</p>\n"},{"tags":[],"owner":{"account_id":4647011,"reputation":41835,"user_id":3764965,"accept_rate":94,"display_name":"Nikolas Charalambidis"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1690211494,"creation_date":1527696532,"answer_id":50609205,"question_id":50608681,"body_markdown":"When in doubt, look at the [source code][1] (working with Java 8).\r\n\r\n    public static double log(double a) {\r\n        return StrictMath.log(a); // default impl. delegates to StrictMath\r\n    }\r\n\r\nYou see it calls a static method from [StrictMath.java][2].\r\n\r\n    static native double log(double a);\r\n\r\nWhat `native` keyword means you can read [here][3]. Basically, it says the method is implemented in another language aside from Java. I have found the folder [`jdk/src/share/native/java/lang/fdlibm/src/`][4] on GitHub with the math functions. The algorithm is implemented in [`e_log.c`][5]. What kind of sorcery happens inside, I don&#39;t know.\r\n\r\n\r\n  [1]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java\r\n  [2]: http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/StrictMath.java\r\n  [3]: https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for%C2%A8\r\n  [4]: https://github.com/openjdk-mirror/jdk/tree/jdk8u/jdk8u/master/src/share/native/java/lang/fdlibm/src\r\n  [5]: https://github.com/openjdk-mirror/jdk/blob/jdk8u/jdk8u/master/src/share/native/java/lang/fdlibm/src/e_log.c","title":"Algorithm behind Math.log - Java","body":"<p>When in doubt, look at the <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/Math.java\" rel=\"nofollow noreferrer\">source code</a> (working with Java 8).</p>\n<pre><code>public static double log(double a) {\n    return StrictMath.log(a); // default impl. delegates to StrictMath\n}\n</code></pre>\n<p>You see it calls a static method from <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/lang/StrictMath.java\" rel=\"nofollow noreferrer\">StrictMath.java</a>.</p>\n<pre><code>static native double log(double a);\n</code></pre>\n<p>What <code>native</code> keyword means you can read <a href=\"https://stackoverflow.com/questions/6101311/what-is-the-native-keyword-in-java-for%C2%A8\">here</a>. Basically, it says the method is implemented in another language aside from Java. I have found the folder <a href=\"https://github.com/openjdk-mirror/jdk/tree/jdk8u/jdk8u/master/src/share/native/java/lang/fdlibm/src\" rel=\"nofollow noreferrer\"><code>jdk/src/share/native/java/lang/fdlibm/src/</code></a> on GitHub with the math functions. The algorithm is implemented in <a href=\"https://github.com/openjdk-mirror/jdk/blob/jdk8u/jdk8u/master/src/share/native/java/lang/fdlibm/src/e_log.c\" rel=\"nofollow noreferrer\"><code>e_log.c</code></a>. What kind of sorcery happens inside, I don't know.</p>\n"},{"tags":[],"owner":{"account_id":24801,"reputation":15286,"user_id":63293,"accept_rate":50,"display_name":"Peter Walser"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576664319,"creation_date":1576664319,"answer_id":59389820,"question_id":50608681,"body_markdown":"The log function (and many other functions such as sin(x)) can be approximated with a **series**:\r\nhttps://en.wikipedia.org/wiki/Natural_logarithm#Series\r\n\r\nIf you need a good enough approximation (but not full precision), you can stop after the first few iterations of the series. That&#39;s how trigonometric functions were approached in early game/demoscene programming.\r\n\r\n**Look-up tables** are a good approach as well, the key here is to find the appropriate **distribution** of the lookup values (linear may not be ideal in this case).","title":"Algorithm behind Math.log - Java","body":"<p>The log function (and many other functions such as sin(x)) can be approximated with a <strong>series</strong>:\n<a href=\"https://en.wikipedia.org/wiki/Natural_logarithm#Series\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Natural_logarithm#Series</a></p>\n\n<p>If you need a good enough approximation (but not full precision), you can stop after the first few iterations of the series. That's how trigonometric functions were approached in early game/demoscene programming.</p>\n\n<p><strong>Look-up tables</strong> are a good approach as well, the key here is to find the appropriate <strong>distribution</strong> of the lookup values (linear may not be ideal in this case).</p>\n"}],"owner":{"account_id":9226566,"reputation":117,"user_id":6854192,"display_name":"tzuxi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2656,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":50609205,"answer_count":3,"score":5,"last_activity_date":1690211494,"creation_date":1527694733,"question_id":50608681,"body_markdown":"Lately I used the `Math.log()` to code some program and now I ask myself how does the method `log()` work. How does the computer calculate the logarithm?\r\nThanks for solution.\r\n\r\n\r\n\r\n","title":"Algorithm behind Math.log - Java","body":"<p>Lately I used the <code>Math.log()</code> to code some program and now I ask myself how does the method <code>log()</code> work. How does the computer calculate the logarithm?\nThanks for solution.</p>\n"},{"tags":["java","datasource","micronaut-data"],"comments":[{"owner":{"account_id":5870080,"reputation":425,"user_id":4622647,"accept_rate":75,"display_name":"AmitB10"},"score":0,"creation_date":1614956299,"post_id":66472191,"comment_id":117551381,"body_markdown":"Not sure about this exception, but there is already a way provided by Micronaut to create a scheduled task. Please have a look at the example below: https://guides.micronaut.io/micronaut-scheduled/guide/index.html","body":"Not sure about this exception, but there is already a way provided by Micronaut to create a scheduled task. Please have a look at the example below: <a href=\"https://guides.micronaut.io/micronaut-scheduled/guide/index.html\" rel=\"nofollow noreferrer\">guides.micronaut.io/micronaut-scheduled/guide/index.html</a>"},{"owner":{"account_id":6776918,"reputation":31,"user_id":5218433,"display_name":"Christian Spiewok"},"score":0,"creation_date":1615049672,"post_id":66472191,"comment_id":117574032,"body_markdown":"@AmitB10 Thanks, for your answer. Yes, I knew about the scheduling options of micronaut and I did read the example already, to which you pointed to. But my needs are far more than the micronaut scheduler can offer: Persistant jobs, rescheduling, starting, stopping, and so on. Probably I go with quartz anyway.","body":"@AmitB10 Thanks, for your answer. Yes, I knew about the scheduling options of micronaut and I did read the example already, to which you pointed to. But my needs are far more than the micronaut scheduler can offer: Persistant jobs, rescheduling, starting, stopping, and so on. Probably I go with quartz anyway."},{"owner":{"account_id":23403,"reputation":623,"user_id":58628,"accept_rate":67,"display_name":"brunch"},"score":0,"creation_date":1628545555,"post_id":66472191,"comment_id":121445308,"body_markdown":"@ChristianSpiewok, did you ever find a solution to this issue?  I am having the same type of issue using another library that runs a background job reading from a database using the EntityManager.","body":"@ChristianSpiewok, did you ever find a solution to this issue?  I am having the same type of issue using another library that runs a background job reading from a database using the EntityManager."},{"owner":{"account_id":376356,"reputation":13776,"user_id":727768,"accept_rate":91,"display_name":"X.Y."},"score":0,"creation_date":1650416270,"post_id":66472191,"comment_id":127108736,"body_markdown":"I run into a same issue with using JobRunnr library, and the exception is also at `connection.getMetaData()`","body":"I run into a same issue with using JobRunnr library, and the exception is also at <code>connection.getMetaData()</code>"}],"answers":[{"tags":[],"owner":{"account_id":376356,"reputation":13776,"user_id":727768,"accept_rate":91,"display_name":"X.Y."},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1650420444,"creation_date":1650420444,"answer_id":71933329,"question_id":66472191,"body_markdown":"So the problem is that Micronaut Data wraps the `DataSource` into a `TransactionAwareDataSource`, as you mentioned. Your library `db-scheduler` or mine `JobRunr` picks it up, and operates without the required annotations. The solution is to unwrap it before giving it to the `db-scheduler` or `JobRunr`:\r\n\r\nKotlin:\r\n\r\n```kotlin\r\nval unwrappedDataSource = (dataSource as DelegatingDataSource).targetDataSource\r\n```\r\n\r\nJava:\r\n\r\n```java\r\nDataSource unwrappedDataSource = ((DelegatingDataSource) dataSource).targetDataSource\r\n```\r\n\r\n","title":"Micronaut, db-scheduler: No current transaction present. Consider declaring @Transactional on the surrounding method","body":"<p>So the problem is that Micronaut Data wraps the <code>DataSource</code> into a <code>TransactionAwareDataSource</code>, as you mentioned. Your library <code>db-scheduler</code> or mine <code>JobRunr</code> picks it up, and operates without the required annotations. The solution is to unwrap it before giving it to the <code>db-scheduler</code> or <code>JobRunr</code>:</p>\n<p>Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val unwrappedDataSource = (dataSource as DelegatingDataSource).targetDataSource\n</code></pre>\n<p>Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DataSource unwrappedDataSource = ((DelegatingDataSource) dataSource).targetDataSource\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2039052,"reputation":16000,"user_id":1820695,"display_name":"andr"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690211445,"creation_date":1689014071,"answer_id":76656422,"question_id":66472191,"body_markdown":"This worked better for me than the existing answer. See below for explanation. The example is in Kotlin but it naturally translates to Java.\r\n\r\n**Note:** The example is for Micronaut v3.\r\n\r\n```kotlin\r\n@Factory\r\ninternal class DbSchedulerFactory(\r\n    private val dataSource: DataSource,\r\n) {\r\n\r\n    private val log = LoggerFactory.getLogger(this::class.java)\r\n\r\n    @Singleton\r\n    fun scheduler(): Scheduler {\r\n        return Scheduler.create(configureDataSource(dataSource), tasks)\r\n            .threads(10)\r\n            // ...\r\n            .build()\r\n    }\r\n\r\n    private fun configureDataSource(dataSource: DataSource): DataSource {\r\n        // Is transaction-aware DataSource proxy active? (Note: class is private so we match by name)\r\n        return if (dataSource::class.qualifiedName == &quot;io.micronaut.transaction.jdbc.TransactionAwareDataSource.DataSourceProxy&quot;) {\r\n            log.info(&quot;Adding support for out-of-transaction connection fetching since the data source is a TransactionAwareDataSource&quot;)\r\n            object : DelegatingDataSource(dataSource) {\r\n                override fun getConnection() =\r\n                    if (TransactionSynchronizationManager.isSynchronizationActive()) dataSource.connection\r\n                    else DelegatingDataSource.unwrapDataSource(dataSource).connection\r\n            }\r\n        } else {\r\n            dataSource\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n## Explanation\r\n\r\nAfter (too) many hours of debugging and searching, I found [this issue](https://github.com/micronaut-projects/micronaut-data/issues/1293) basically stating that: if a) you use Micronaut&#39;s default transaction handling and b) you have a code that will fetch and interact with a `Connection` from a transaction-aware `DataSource`, then you will get the `NoTransactionException` exception unless the interaction with the connection happens within transaction scope (either with `@Transactional` or [programmatic transactions](https://micronaut-projects.github.io/micronaut-data/snapshot/guide/#programmaticTransactions)).\r\n\r\nX.Y.&#39;s solution gets rid of the exception by getting connections straight from the _underlying_ data source (bypassing transaction-aware `DataSource` proxy), which typically will be a connection pool like Hikari. However, in doing so, it doesn&#39;t support db-scheduler participating in Micronaut&#39;s transaction scope.\r\n\r\nThis was a deal breaker for me, since I wanted `scheduler.schedule`, `scheduler.reschedule`, `scheduler.cancel` (and all the other advanced features like custom tasks with `CompletionHandler`s) participate in `@Transaction` scope. At the same time I didn&#39;t want plain db-scheduler code to be concerned with transaction scopes.\r\n\r\nSlapping `@Transactional` or programmatic transactions everywhere isn&#39;t a viable solution as you don&#39;t always control the code interacting with `Connection`s (and this is what db-scheduler does when: building the `Scheduler`, starting it, and during it&#39;s operation).\r\n\r\nPossibly, I could switch to Spring-based transaction handling (described in the Tip at the end of [this section](https://micronaut-projects.github.io/micronaut-data/snapshot/guide/#transactions)) but this would pull a lot of other stuff I didn&#39;t want.\r\n\r\nInstead, I wrote the above: a wrapper around the transaction-aware `DataSource` proxy (yes, wrapper for a wrapper) that:\r\n\r\n1. Returns the connection bound to current transaction scope, if there is one.\r\n2. Returns a connection from the underlying data source, if there isn&#39;t a transaction scope.","title":"Micronaut, db-scheduler: No current transaction present. Consider declaring @Transactional on the surrounding method","body":"<p>This worked better for me than the existing answer. See below for explanation. The example is in Kotlin but it naturally translates to Java.</p>\n<p><strong>Note:</strong> The example is for Micronaut v3.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Factory\ninternal class DbSchedulerFactory(\n    private val dataSource: DataSource,\n) {\n\n    private val log = LoggerFactory.getLogger(this::class.java)\n\n    @Singleton\n    fun scheduler(): Scheduler {\n        return Scheduler.create(configureDataSource(dataSource), tasks)\n            .threads(10)\n            // ...\n            .build()\n    }\n\n    private fun configureDataSource(dataSource: DataSource): DataSource {\n        // Is transaction-aware DataSource proxy active? (Note: class is private so we match by name)\n        return if (dataSource::class.qualifiedName == &quot;io.micronaut.transaction.jdbc.TransactionAwareDataSource.DataSourceProxy&quot;) {\n            log.info(&quot;Adding support for out-of-transaction connection fetching since the data source is a TransactionAwareDataSource&quot;)\n            object : DelegatingDataSource(dataSource) {\n                override fun getConnection() =\n                    if (TransactionSynchronizationManager.isSynchronizationActive()) dataSource.connection\n                    else DelegatingDataSource.unwrapDataSource(dataSource).connection\n            }\n        } else {\n            dataSource\n        }\n    }\n}\n</code></pre>\n<h2>Explanation</h2>\n<p>After (too) many hours of debugging and searching, I found <a href=\"https://github.com/micronaut-projects/micronaut-data/issues/1293\" rel=\"nofollow noreferrer\">this issue</a> basically stating that: if a) you use Micronaut's default transaction handling and b) you have a code that will fetch and interact with a <code>Connection</code> from a transaction-aware <code>DataSource</code>, then you will get the <code>NoTransactionException</code> exception unless the interaction with the connection happens within transaction scope (either with <code>@Transactional</code> or <a href=\"https://micronaut-projects.github.io/micronaut-data/snapshot/guide/#programmaticTransactions\" rel=\"nofollow noreferrer\">programmatic transactions</a>).</p>\n<p>X.Y.'s solution gets rid of the exception by getting connections straight from the <em>underlying</em> data source (bypassing transaction-aware <code>DataSource</code> proxy), which typically will be a connection pool like Hikari. However, in doing so, it doesn't support db-scheduler participating in Micronaut's transaction scope.</p>\n<p>This was a deal breaker for me, since I wanted <code>scheduler.schedule</code>, <code>scheduler.reschedule</code>, <code>scheduler.cancel</code> (and all the other advanced features like custom tasks with <code>CompletionHandler</code>s) participate in <code>@Transaction</code> scope. At the same time I didn't want plain db-scheduler code to be concerned with transaction scopes.</p>\n<p>Slapping <code>@Transactional</code> or programmatic transactions everywhere isn't a viable solution as you don't always control the code interacting with <code>Connection</code>s (and this is what db-scheduler does when: building the <code>Scheduler</code>, starting it, and during it's operation).</p>\n<p>Possibly, I could switch to Spring-based transaction handling (described in the Tip at the end of <a href=\"https://micronaut-projects.github.io/micronaut-data/snapshot/guide/#transactions\" rel=\"nofollow noreferrer\">this section</a>) but this would pull a lot of other stuff I didn't want.</p>\n<p>Instead, I wrote the above: a wrapper around the transaction-aware <code>DataSource</code> proxy (yes, wrapper for a wrapper) that:</p>\n<ol>\n<li>Returns the connection bound to current transaction scope, if there is one.</li>\n<li>Returns a connection from the underlying data source, if there isn't a transaction scope.</li>\n</ol>\n"}],"owner":{"account_id":6776918,"reputation":31,"user_id":5218433,"display_name":"Christian Spiewok"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1036,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1690211445,"creation_date":1614850226,"question_id":66472191,"body_markdown":"I&#39;m trying to use db-scheduler with Micronaut. Therefore, I created a @Singleton service where I inject the actual DataSource which is of type TransactionAwareDataSource. I then call a certain method to setup the scheduler which is something like:\r\n\r\n```\r\n  @Transactional\r\n  public void createJob() {\r\n\r\n    RecurringTask&lt;Void&gt; hourlyTask = Tasks.recurring(&quot;my-hourly-task&quot;, FixedDelay.ofHours(1))\r\n        .execute((inst, ctx) -&gt; {\r\n          System.out.println(&quot;Executed!&quot;);\r\n        });\r\n\r\n    final Scheduler scheduler = Scheduler\r\n        .create(dataSource)\r\n        .startTasks(hourlyTask)\r\n        .threads(5)\r\n        .build();\r\n\r\n    scheduler.start();\r\n  }\r\n\r\n```\r\n\r\nwhich, at &quot;create&quot; throws this exception:\r\n\r\n```\r\nio.micronaut.transaction.exceptions.NoTransactionException: No current transaction present. Consider declaring @Transactional on the surrounding method\r\n\tat io.micronaut.transaction.jdbc.TransactionalConnectionInterceptor.intercept(TransactionalConnectionInterceptor.java:65)\r\n\tat io.micronaut.aop.chain.MethodInterceptorChain.proceed(MethodInterceptorChain.java:96)\r\n\tat io.micronaut.transaction.jdbc.TransactionalConnection$Intercepted.getMetaData(Unknown Source)\r\n\tat com.github.kagkarlsson.scheduler.jdbc.AutodetectJdbcCustomization.&lt;init&gt;(AutodetectJdbcCustomization.java:40)\r\n\tat com.github.kagkarlsson.scheduler.SchedulerBuilder.lambda$build$0(SchedulerBuilder.java:190)\r\n\tat java.base/java.util.Optional.orElseGet(Optional.java:369)\r\n```\r\n\r\nEverywhere else in my app everything is working like it should, means, I can read and write to the DB via the repositories and @Transactional is working as well.\r\n\r\nI&#39;m not 100% sure where the problem is, but I guess it does have to do with placing the annotation. Which - in this case - is nothing I can really change. On the other hand, if I create the datasource manually, effectively bypassing micronaut, it&#39;s working.\r\n\r\nBTW: the exception comes up within db-scheduler where the first call to the DB is made (c.getMetaData().getDatabaseProductName()).\r\n\r\nMicronaut-Version: 2.3.4, Micronaut-Data: 2.2.4, everything setup properly.\r\n\r\nDo you guys have any ideas how to solve this problem? Or is it even a bug?\r\n\r\nThanks!","title":"Micronaut, db-scheduler: No current transaction present. Consider declaring @Transactional on the surrounding method","body":"<p>I'm trying to use db-scheduler with Micronaut. Therefore, I created a @Singleton service where I inject the actual DataSource which is of type TransactionAwareDataSource. I then call a certain method to setup the scheduler which is something like:</p>\n<pre><code>  @Transactional\n  public void createJob() {\n\n    RecurringTask&lt;Void&gt; hourlyTask = Tasks.recurring(&quot;my-hourly-task&quot;, FixedDelay.ofHours(1))\n        .execute((inst, ctx) -&gt; {\n          System.out.println(&quot;Executed!&quot;);\n        });\n\n    final Scheduler scheduler = Scheduler\n        .create(dataSource)\n        .startTasks(hourlyTask)\n        .threads(5)\n        .build();\n\n    scheduler.start();\n  }\n\n</code></pre>\n<p>which, at &quot;create&quot; throws this exception:</p>\n<pre><code>io.micronaut.transaction.exceptions.NoTransactionException: No current transaction present. Consider declaring @Transactional on the surrounding method\n    at io.micronaut.transaction.jdbc.TransactionalConnectionInterceptor.intercept(TransactionalConnectionInterceptor.java:65)\n    at io.micronaut.aop.chain.MethodInterceptorChain.proceed(MethodInterceptorChain.java:96)\n    at io.micronaut.transaction.jdbc.TransactionalConnection$Intercepted.getMetaData(Unknown Source)\n    at com.github.kagkarlsson.scheduler.jdbc.AutodetectJdbcCustomization.&lt;init&gt;(AutodetectJdbcCustomization.java:40)\n    at com.github.kagkarlsson.scheduler.SchedulerBuilder.lambda$build$0(SchedulerBuilder.java:190)\n    at java.base/java.util.Optional.orElseGet(Optional.java:369)\n</code></pre>\n<p>Everywhere else in my app everything is working like it should, means, I can read and write to the DB via the repositories and @Transactional is working as well.</p>\n<p>I'm not 100% sure where the problem is, but I guess it does have to do with placing the annotation. Which - in this case - is nothing I can really change. On the other hand, if I create the datasource manually, effectively bypassing micronaut, it's working.</p>\n<p>BTW: the exception comes up within db-scheduler where the first call to the DB is made (c.getMetaData().getDatabaseProductName()).</p>\n<p>Micronaut-Version: 2.3.4, Micronaut-Data: 2.2.4, everything setup properly.</p>\n<p>Do you guys have any ideas how to solve this problem? Or is it even a bug?</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1654171448,"post_id":72465369,"comment_id":128030550,"body_markdown":"Incompatible swagger version.","body":"Incompatible swagger version."},{"owner":{"account_id":21083132,"reputation":3230,"user_id":15496965,"display_name":"Henning"},"score":0,"creation_date":1654359524,"post_id":72465369,"comment_id":128074496,"body_markdown":"Does this answer your question? [Springboot 2.6.0 / Spring fox 3 - Failed to start bean &#39;documentationPluginsBootstrapper&#39;](https://stackoverflow.com/questions/70036953/springboot-2-6-0-spring-fox-3-failed-to-start-bean-documentationpluginsboot)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/70036953/springboot-2-6-0-spring-fox-3-failed-to-start-bean-documentationpluginsboot\">Springboot 2.6.0 / Spring fox 3 - Failed to start bean &#39;documentationPluginsBootstrapper&#39;</a>"}],"answers":[{"tags":[],"owner":{"account_id":11084227,"reputation":29,"user_id":8138521,"display_name":"Arya C Achari"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1658176281,"creation_date":1658176205,"answer_id":73028263,"question_id":72465369,"body_markdown":"If you are using the spring-boot version 2.7.x, springfox, and the actuator use this dependency (I don&#39;t know will it work for your case, at the time I&#39;m doing this, version of spring-boot 2.7.1)\r\n\r\n1. In pom.xml    \r\n\r\n        &lt;!-- API documentation. Refer the link http://springfox.github.io/springfox/docs/2.7.0/#introduction --&gt;\r\n        &lt;dependency&gt;\r\n        \t&lt;groupId&gt;io.springfox&lt;/groupId&gt;\r\n        \t&lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\r\n        \t&lt;version&gt;2.7.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n2. Then in the SwaggerConfig configuration class    \r\n\r\n        /* .pathMapping(&quot;/&quot;) can resolve the conflict between actuator and springfox */\r\n        @Bean\r\n        public Docket api() {\r\n            return new Docket(DocumentationType.SWAGGER_2)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.any())\r\n                .paths(PathSelectors.any())\r\n                .build()\r\n                .pathMapping(&quot;/&quot;);\r\n        }\r\n\r\n3. Then \r\n\r\nif you&#39;re using the application.properties\r\n\r\n    spring.mvc.pathmatch.matching-strategy= ANT_PATH_MATCHER\r\n\r\nif you&#39;re using the application.yml\r\n\r\n        spring:\r\n          #Use this to befriend spring-boot-starter-actuator &amp; springfox-boot-starter\r\n           mvc:\r\n             pathmatch:\r\n               matching-strategy: ANT_PATH_MATCHER\r\n\r\n\r\n  [1]: http://springfox.github.io/springfox/docs/2.7.0/#introduction","title":"Upgraded Spring Boot to 2.7.0- Failed to start bean &#39;documentationPluginsBootstrapper","body":"<p>If you are using the spring-boot version 2.7.x, springfox, and the actuator use this dependency (I don't know will it work for your case, at the time I'm doing this, version of spring-boot 2.7.1)</p>\n<ol>\n<li><p>In pom.xml</p>\n<pre><code> &lt;!-- API documentation. Refer the link http://springfox.github.io/springfox/docs/2.7.0/#introduction --&gt;\n &lt;dependency&gt;\n     &lt;groupId&gt;io.springfox&lt;/groupId&gt;\n     &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;\n     &lt;version&gt;2.7.0&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n</li>\n<li><p>Then in the SwaggerConfig configuration class</p>\n<pre><code> /* .pathMapping(&quot;/&quot;) can resolve the conflict between actuator and springfox */\n @Bean\n public Docket api() {\n     return new Docket(DocumentationType.SWAGGER_2)\n         .select()\n         .apis(RequestHandlerSelectors.any())\n         .paths(PathSelectors.any())\n         .build()\n         .pathMapping(&quot;/&quot;);\n }\n</code></pre>\n</li>\n<li><p>Then</p>\n</li>\n</ol>\n<p>if you're using the application.properties</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy= ANT_PATH_MATCHER\n</code></pre>\n<p>if you're using the application.yml</p>\n<pre><code>    spring:\n      #Use this to befriend spring-boot-starter-actuator &amp; springfox-boot-starter\n       mvc:\n         pathmatch:\n           matching-strategy: ANT_PATH_MATCHER\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24781193,"reputation":71,"user_id":18664620,"display_name":"meher"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1659955901,"creation_date":1659955901,"answer_id":73276718,"question_id":72465369,"body_markdown":"In the application.properties\r\n\r\n    spring.mvc.pathmatch.matching-strategy= ANT_PATH_MATCHER","title":"Upgraded Spring Boot to 2.7.0- Failed to start bean &#39;documentationPluginsBootstrapper","body":"<p>In the application.properties</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy= ANT_PATH_MATCHER\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24083109,"reputation":194,"user_id":18057525,"display_name":"Octavia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669814301,"creation_date":1669803296,"answer_id":74626044,"question_id":72465369,"body_markdown":"Add this bean to your swagger configuration \r\n```\r\n@Bean\r\n    public WebMvcRequestHandlerProvider webMvcRequestHandlerProvider(Optional&lt;ServletContext&gt; servletContext, HandlerMethodResolver methodResolver, List&lt;RequestMappingInfoHandlerMapping&gt; handlerMappings) {\r\n        handlerMappings = handlerMappings.stream().filter(rh -&gt; rh.getClass().getName().contains(&quot;RequestMapping&quot;)).toList();\r\n        return new WebMvcRequestHandlerProvider(servletContext, methodResolver, handlerMappings);\r\n    }\r\n```\r\nand make sure you used **DocumentationType.OAS_30** in your config\r\n\r\nalso, add this in your proerties file: \r\n```\r\nspring.mvc.pathmatch.matching-strategy= ANT_PATH_MATCHER\r\n```\r\nthis worked for me, BUT now I can access only the endpoints directly, and not the swagger page\r\n","title":"Upgraded Spring Boot to 2.7.0- Failed to start bean &#39;documentationPluginsBootstrapper","body":"<p>Add this bean to your swagger configuration</p>\n<pre><code>@Bean\n    public WebMvcRequestHandlerProvider webMvcRequestHandlerProvider(Optional&lt;ServletContext&gt; servletContext, HandlerMethodResolver methodResolver, List&lt;RequestMappingInfoHandlerMapping&gt; handlerMappings) {\n        handlerMappings = handlerMappings.stream().filter(rh -&gt; rh.getClass().getName().contains(&quot;RequestMapping&quot;)).toList();\n        return new WebMvcRequestHandlerProvider(servletContext, methodResolver, handlerMappings);\n    }\n</code></pre>\n<p>and make sure you used <strong>DocumentationType.OAS_30</strong> in your config</p>\n<p>also, add this in your proerties file:</p>\n<pre><code>spring.mvc.pathmatch.matching-strategy= ANT_PATH_MATCHER\n</code></pre>\n<p>this worked for me, BUT now I can access only the endpoints directly, and not the swagger page</p>\n"},{"tags":[],"owner":{"account_id":29081463,"reputation":1,"user_id":22277386,"display_name":"Fullstack Hamster"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690211396,"creation_date":1690211396,"answer_id":76755803,"question_id":72465369,"body_markdown":"After several hours of search:\r\n \r\n`java -version` \r\n\r\nis also important. I have **JDK 11**.smth, so I had to downgrade **Spring** to **2.5.3** - even 2.6.0 gave the same issue. Now it works with both Swagger 2 and OAS3. \r\n\r\n17-th java is ok with suggestions above.","title":"Upgraded Spring Boot to 2.7.0- Failed to start bean &#39;documentationPluginsBootstrapper","body":"<p>After several hours of search:</p>\n<p><code>java -version</code></p>\n<p>is also important. I have <strong>JDK 11</strong>.smth, so I had to downgrade <strong>Spring</strong> to <strong>2.5.3</strong> - even 2.6.0 gave the same issue. Now it works with both Swagger 2 and OAS3.</p>\n<p>17-th java is ok with suggestions above.</p>\n"}],"owner":{"account_id":25448373,"reputation":81,"user_id":19250219,"display_name":"Dibya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21092,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"answer_count":4,"score":8,"last_activity_date":1690211396,"creation_date":1654101607,"question_id":72465369,"body_markdown":"Upgrading Springboot version- 2.7.0 ext { springBootVersion = &#39;2.7.0&#39; wsdl2javaVersion=&#39;0.10&#39; cxfVersion=&#39;3.4.3&#39; }\r\n\r\nCloud Version: ext { set(&#39;springCloudVersion&#39;, &#39;2021.0.3&#39;) }\r\n\r\nSpringfox: //swagger compile &quot;io.springfox:springfox-swagger2:2.9.2&quot; compile &quot;io.springfox:springfox-swagger-ui:2.9.2&quot;\r\n\r\nGetting Error: org.springframework.context.ApplicationContextException: Failed to start bean &#39;documentationPluginsBootstrapper&#39;; nested exception is java.lang.NullPointerExceptionclass\r\n\r\nAny lead is really appreciate to fix this issue.","title":"Upgraded Spring Boot to 2.7.0- Failed to start bean &#39;documentationPluginsBootstrapper","body":"<p>Upgrading Springboot version- 2.7.0 ext { springBootVersion = '2.7.0' wsdl2javaVersion='0.10' cxfVersion='3.4.3' }</p>\n<p>Cloud Version: ext { set('springCloudVersion', '2021.0.3') }</p>\n<p>Springfox: //swagger compile &quot;io.springfox:springfox-swagger2:2.9.2&quot; compile &quot;io.springfox:springfox-swagger-ui:2.9.2&quot;</p>\n<p>Getting Error: org.springframework.context.ApplicationContextException: Failed to start bean 'documentationPluginsBootstrapper'; nested exception is java.lang.NullPointerExceptionclass</p>\n<p>Any lead is really appreciate to fix this issue.</p>\n"},{"tags":["java","email","jboss","smtp","email-client"],"answers":[{"tags":[],"owner":{"account_id":1078493,"reputation":8375,"user_id":1076171,"display_name":"The Nail"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1327535258,"creation_date":1327535258,"answer_id":9012143,"question_id":9012114,"body_markdown":"Use the JavaMail API to create an e-mail client:\r\n\r\nhttp://www.oracle.com/technetwork/java/javamail/index.html\r\n\r\nIf you don&#39;t have an SMTP server, you could install Postfix:\r\n\r\nhttp://www.postfix.org/\r\n\r\n","title":"Email to be sent from the application","body":"<p>Use the JavaMail API to create an e-mail client:</p>\n\n<p><a href=\"http://www.oracle.com/technetwork/java/javamail/index.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javamail/index.html</a></p>\n\n<p>If you don't have an SMTP server, you could install Postfix:</p>\n\n<p><a href=\"http://www.postfix.org/\" rel=\"nofollow\">http://www.postfix.org/</a></p>\n"},{"tags":[],"owner":{"account_id":1167224,"reputation":2444,"user_id":1145216,"accept_rate":78,"display_name":"user1145216"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690182819,"creation_date":1327539631,"answer_id":9012708,"question_id":9012114,"body_markdown":"1.) As already stated, the Javamail API is the way to go: \r\nhttp://www.oracle.com/technetwork/java/javamail/index.html\r\n\r\n2.) I further would recommend a wrapper around the Java Mail API that really simplifies constructing your emails (The Mail API is very hard to work with constructing HTML/Text Emails). I would highly recommend this:\r\nhttp://commons.apache.org/email/\r\n\r\n3.) As Mail Transfer Agent I would not recommend a Java one but rather use a dedicated SMTP Server, like the mentioned postfix. With Javamail the SMTP Server can be any arbitrary server, hosted on your own.\r\n\r\nOr use services like google mail and you simply connect to them via the java mail API. There are no good Java SMTP Servers available and postifx has plenty of options (also in regard to security) but in my opinion, it is best to use existing infrastructure.\r\n\r\nWith Java Mail you can use your current email provider (or the company email server you might most likely have already). Your admins only have to create a new email address and account and then you can send mails over this account with java mail api. \r\n\r\n\r\n\r\n","title":"Email to be sent from the application","body":"<p>1.) As already stated, the Javamail API is the way to go:\n<a href=\"http://www.oracle.com/technetwork/java/javamail/index.html\" rel=\"nofollow noreferrer\">http://www.oracle.com/technetwork/java/javamail/index.html</a></p>\n<p>2.) I further would recommend a wrapper around the Java Mail API that really simplifies constructing your emails (The Mail API is very hard to work with constructing HTML/Text Emails). I would highly recommend this:\n<a href=\"http://commons.apache.org/email/\" rel=\"nofollow noreferrer\">http://commons.apache.org/email/</a></p>\n<p>3.) As Mail Transfer Agent I would not recommend a Java one but rather use a dedicated SMTP Server, like the mentioned postfix. With Javamail the SMTP Server can be any arbitrary server, hosted on your own.</p>\n<p>Or use services like google mail and you simply connect to them via the java mail API. There are no good Java SMTP Servers available and postifx has plenty of options (also in regard to security) but in my opinion, it is best to use existing infrastructure.</p>\n<p>With Java Mail you can use your current email provider (or the company email server you might most likely have already). Your admins only have to create a new email address and account and then you can send mails over this account with java mail api.</p>\n"}],"owner":{"account_id":1073176,"reputation":3217,"user_id":1071967,"accept_rate":61,"display_name":"Geek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":9012708,"answer_count":2,"score":0,"last_activity_date":1690211337,"creation_date":1327535037,"question_id":9012114,"body_markdown":"I have a scenario wherein When there is any match(can be considered to a trigger), an email notification has to be sent from the application to the customer. Basically &#39;from&#39; id would be the same and &#39;to&#39; changes. \r\n\r\nWhat are the various email sending options available? I&#39;m working in Java/JBOSS server. Should I host an SMTP server? Or a cron job which runs and in turn sends emails... either way I need to find out a method to send email. I&#39;m new to this tech. Any inputs appreciated. Thanks.","title":"Email to be sent from the application","body":"<p>I have a scenario wherein When there is any match(can be considered to a trigger), an email notification has to be sent from the application to the customer. Basically 'from' id would be the same and 'to' changes.</p>\n<p>What are the various email sending options available? I'm working in Java/JBOSS server. Should I host an SMTP server? Or a cron job which runs and in turn sends emails... either way I need to find out a method to send email. I'm new to this tech. Any inputs appreciated. Thanks.</p>\n"},{"tags":["java","postgresql","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":11241181,"reputation":143,"user_id":9670502,"display_name":"Ihor Horovyi"},"score":0,"creation_date":1690210475,"post_id":76755611,"comment_id":135318003,"body_markdown":"The javax.validation constraints are mainly used to validate data at runtime when you perform operations in your Spring Boot application. For example, when you use a validator or during the data binding process in Spring, these constraints will be checked to ensure data integrity.\n\nTo enable DDL generation and display database constraints in the schema, you can set the following property in the application.properties file: `spring.jpa.properties.hibernate.hbm2ddl.auto=validate`","body":"The javax.validation constraints are mainly used to validate data at runtime when you perform operations in your Spring Boot application. For example, when you use a validator or during the data binding process in Spring, these constraints will be checked to ensure data integrity.  To enable DDL generation and display database constraints in the schema, you can set the following property in the application.properties file: <code>spring.jpa.properties.hibernate.hbm2ddl.auto=validate</code>"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690210775,"post_id":76755611,"comment_id":135318104,"body_markdown":"Because by default they don&#39;t have an impact (afaik). You need to set the `hibernate.validator.apply_to_ddl` to `true`. In this case `spring.jpa.properties.hibernate.validator.apply_to_ddl=true` to your `application.properties` should enable it. That being said it might only work for some common available annotations and not all. Next to that remove the `javax.validation-api` and `hibernate-validator` dependency and use `spring-boot-starter-validation` instead, to get compatible versions.","body":"Because by default they don&#39;t have an impact (afaik). You need to set the <code>hibernate.validator.apply_to_ddl</code> to <code>true</code>. In this case <code>spring.jpa.properties.hibernate.validator.apply_to_ddl=true</code> to your <code>application.properties</code> should enable it. That being said it might only work for some common available annotations and not all. Next to that remove the <code>javax.validation-api</code> and <code>hibernate-validator</code> dependency and use <code>spring-boot-starter-validation</code> instead, to get compatible versions."}],"answers":[{"tags":[],"owner":{"account_id":5157043,"reputation":1369,"user_id":4130003,"display_name":"johnnyutts"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690211247,"creation_date":1690211247,"answer_id":76755787,"question_id":76755611,"body_markdown":"To add the constraints you could always define them in the @Column annotation\r\n\r\n    @Column(length = 10, nullable = false)\r\n    public String text;","title":"Why are javax.validation.constraints specified on Java Entity field not being mapped to database schema by Hibernate?","body":"<p>To add the constraints you could always define them in the @Column annotation</p>\n<pre><code>@Column(length = 10, nullable = false)\npublic String text;\n</code></pre>\n"}],"owner":{"account_id":292835,"reputation":6407,"user_id":595833,"accept_rate":94,"display_name":"bobbyrne01"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690211247,"creation_date":1690210080,"question_id":76755611,"body_markdown":"When the SpringBoot application starts, I&#39;d like Hibernate to automatically create the database schema, which works fine. \r\n\r\nBut I&#39;m not seeing `javax.validation.constraints` have any effect on generated schema.\r\n\r\nI have the following Gradle build file:\r\n\r\n```\r\nplugins {\r\n    id(&quot;java&quot;)\r\n    id(&quot;war&quot;)\r\n    id(&quot;org.springframework.boot&quot;) version &quot;2.7.11&quot;\r\n}\r\n\r\ngroup = &quot;org.example&quot;\r\nversion = &quot;1.0-SNAPSHOT&quot;\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\ndependencies {\r\n    implementation (&quot;org.springframework.boot:spring-boot-starter-data-jpa:2.7.11&quot;)\r\n\r\n    implementation(&quot;org.postgresql:postgresql:42.6.0&quot;)\r\n\r\n    implementation(&quot;javax.xml.bind:jaxb-api:2.3.0&quot;)\r\n\r\n    implementation(&quot;javax.validation:validation-api:2.0.1.Final&quot;)\r\n\r\n    implementation(&quot;org.hibernate.validator:hibernate-validator:6.0.1.Final&quot;)\r\n}\r\n```\r\n\r\nand the following Java Entity class:\r\n\r\n```java\r\nimport javax.persistence.*;\r\nimport javax.validation.constraints.NotNull;\r\nimport javax.validation.constraints.Size;\r\n\r\n@Entity\r\npublic class Person {\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\r\n    @Column(name = &quot;id&quot;, nullable = false)\r\n    private Long id;\r\n\r\n    public Long getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(Long id) {\r\n        this.id = id;\r\n    }\r\n\r\n    @Size(max = 10)\r\n    @NotNull\r\n    public String text;\r\n}\r\n```\r\n\r\nWhy is it that when I connect to my database I don&#39;t see any constraints specified for the `text` field inside `Person`?\r\n\r\nShouldn&#39;t there be another &#39;not null&#39; constraint and also a `length` constraint on the `text` column?\r\n\r\n[![List of database constraints][1]][1]\r\n\r\n`application.properties`:\r\n\r\n```\r\nspring.datasource.url=jdbc:postgresql://localhost:5432/postgres\r\nspring.datasource.driver-class-name=org.postgresql.Driver\r\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL95Dialect\r\n\r\nspring.jpa.hibernate.ddl-auto=create\r\n\r\nspring.datasource.username=postgres\r\nspring.datasource.password=password\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/y1I29.png","title":"Why are javax.validation.constraints specified on Java Entity field not being mapped to database schema by Hibernate?","body":"<p>When the SpringBoot application starts, I'd like Hibernate to automatically create the database schema, which works fine.</p>\n<p>But I'm not seeing <code>javax.validation.constraints</code> have any effect on generated schema.</p>\n<p>I have the following Gradle build file:</p>\n<pre><code>plugins {\n    id(&quot;java&quot;)\n    id(&quot;war&quot;)\n    id(&quot;org.springframework.boot&quot;) version &quot;2.7.11&quot;\n}\n\ngroup = &quot;org.example&quot;\nversion = &quot;1.0-SNAPSHOT&quot;\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation (&quot;org.springframework.boot:spring-boot-starter-data-jpa:2.7.11&quot;)\n\n    implementation(&quot;org.postgresql:postgresql:42.6.0&quot;)\n\n    implementation(&quot;javax.xml.bind:jaxb-api:2.3.0&quot;)\n\n    implementation(&quot;javax.validation:validation-api:2.0.1.Final&quot;)\n\n    implementation(&quot;org.hibernate.validator:hibernate-validator:6.0.1.Final&quot;)\n}\n</code></pre>\n<p>and the following Java Entity class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javax.persistence.*;\nimport javax.validation.constraints.NotNull;\nimport javax.validation.constraints.Size;\n\n@Entity\npublic class Person {\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    @Size(max = 10)\n    @NotNull\n    public String text;\n}\n</code></pre>\n<p>Why is it that when I connect to my database I don't see any constraints specified for the <code>text</code> field inside <code>Person</code>?</p>\n<p>Shouldn't there be another 'not null' constraint and also a <code>length</code> constraint on the <code>text</code> column?</p>\n<p><a href=\"https://i.stack.imgur.com/y1I29.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y1I29.png\" alt=\"List of database constraints\" /></a></p>\n<p><code>application.properties</code>:</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://localhost:5432/postgres\nspring.datasource.driver-class-name=org.postgresql.Driver\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQL95Dialect\n\nspring.jpa.hibernate.ddl-auto=create\n\nspring.datasource.username=postgres\nspring.datasource.password=password\n</code></pre>\n"},{"tags":["java","spring","spring-boot","microservices","netflix-eureka"],"answers":[{"tags":[],"owner":{"account_id":14759161,"reputation":31,"user_id":10659018,"display_name":"user10659018"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690210856,"creation_date":1690209138,"answer_id":76755483,"question_id":76749340,"body_markdown":"I found that I made a stupid mistake. In my eureka client application properties file I added a space after application name value, especially that parameter spring.application.name. So instead of that &quot;spring.application.name=accounts&quot; I wrote &quot;spring.application.name=accounts &quot;. \r\nWhen I looked my eureka client log and saw a message like:\r\n\r\n    DiscoveryClient_ACCOUNTS/DESKTOP-PB1AV09.mshome.net:accounts :8071: registering service...\r\n\r\n \r\nI paid attention and I noticed that there is a space between application name and port. So in my eureka client application properties file, when I removed the space from my application name value, now I got in my eureka log:\r\n\r\n    DiscoveryClient_ACCOUNTS/DESKTOP-PB1AV09.mshome.net:accounts:8071: registering service...\r\n\r\nIt&#39;s work fine after that. Blame on me, and sorry for that. ","title":"eureka client not registering with eureka server in spring boot 3","body":"<p>I found that I made a stupid mistake. In my eureka client application properties file I added a space after application name value, especially that parameter spring.application.name. So instead of that &quot;spring.application.name=accounts&quot; I wrote &quot;spring.application.name=accounts &quot;.\nWhen I looked my eureka client log and saw a message like:</p>\n<pre><code>DiscoveryClient_ACCOUNTS/DESKTOP-PB1AV09.mshome.net:accounts :8071: registering service...\n</code></pre>\n<p>I paid attention and I noticed that there is a space between application name and port. So in my eureka client application properties file, when I removed the space from my application name value, now I got in my eureka log:</p>\n<pre><code>DiscoveryClient_ACCOUNTS/DESKTOP-PB1AV09.mshome.net:accounts:8071: registering service...\n</code></pre>\n<p>It's work fine after that. Blame on me, and sorry for that.</p>\n"}],"owner":{"account_id":14759161,"reputation":31,"user_id":10659018,"display_name":"user10659018"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":712,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690210856,"creation_date":1690130704,"question_id":76749340,"body_markdown":"I used spring boot 3.0.1 with spring cloud 2022.0.0 to implement eureka server and eureka client. Both running successfully but my eureka cient not registered with eureka server. I got error like :\r\n\r\n    com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server Caused by: org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Root name (&#39;timestamp&#39;) does not match expected (&#39;instance&#39;) for type `com.netflix.appinfo.InstanceInfo`\r\n\r\nHere below my eureka server pom.xml dependencies\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n    https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.1&lt;/version&gt; \r\n\t\t&lt;relativePath/&gt; \r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.eazybytes&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;eurekaserver&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;packaging&gt;jar&lt;/packaging&gt; \r\n\t&lt;name&gt;eurekaserver&lt;/name&gt;\r\n\t&lt;description&gt;Service discovery for Bank microservices&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2022.0.0&lt;/spring-cloud.version&gt; \r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t&lt;/dependencies&gt;\r\n\t&lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;image&gt;\r\n\t\t\t\t\t\t&lt;name&gt;eazybytes/${project.artifactId}&lt;/name&gt;\r\n\t\t\t\t\t&lt;/image&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n    &lt;/project&gt;\r\n\r\nHere below my eureka application.properties code\r\n\r\n    server.port=8761\r\n    spring.application.name=eurekaserver\r\n    eureka.instance.hostname=localhost\r\n    eureka.client.registerWithEureka=false\r\n    eureka.client.fetchRegistry=false\r\n    eureka.client.serviceUrl.defaultZone=http://${eureka.instance.hostname}:${server.port}/eureka/\r\n\r\nHere below my eureka main class\r\n\r\n    package com.eazybytes.eurekaserver;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\r\n\r\n    @SpringBootApplication\r\n    @EnableEurekaServer\r\n    public class EurekaserverApplication {\r\n\t    public static void main(String[] args) {\r\n\t\t    SpringApplication.run(EurekaserverApplication.class, args);\r\n\t    }\r\n    }\r\n\r\nHere below my client pom.xml dependencies\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \r\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \r\n    https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.1&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; \r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.eaztbytes&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;accounts&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t\r\n\t&lt;name&gt;accounts&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2022.0.0&lt;/spring-cloud.version&gt; \r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt; \r\n\t\t&lt;dependency&gt;\r\n\t        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t    &lt;/dependency&gt;\r\n\t\r\n\t    &lt;dependency&gt;\r\n\t        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n\t        &lt;scope&gt;runtime&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\r\n\t&lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n        &lt;scope&gt;provided&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n        &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n    \r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\t    &lt;dependency&gt;\r\n\t        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\r\n\t        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\r\n\t        &lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\r\n\t    &lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t    &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n\t\t    &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\r\n\t\t    &lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n    &lt;dependencyManagement&gt;\r\n\t\t&lt;dependencies&gt;\r\n\t\t\t&lt;dependency&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;${spring-cloud.version}&lt;/version&gt;\r\n\t\t\t\t&lt;type&gt;pom&lt;/type&gt;\r\n\t\t\t\t&lt;scope&gt;import&lt;/scope&gt;\r\n\t\t\t&lt;/dependency&gt;\r\n\t\t&lt;/dependencies&gt;\r\n\t&lt;/dependencyManagement&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t&lt;plugin&gt;\r\n  \t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t  &lt;configuration&gt;\r\n\t\t\t    &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\r\n\t\t\t  &lt;/configuration&gt;\r\n\t\t&lt;/plugin&gt;\r\n\t\t\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t &lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n    &lt;/project&gt;\r\nHere below my eureka client application.properties code\r\n\r\n    spring.datasource.url=jdbc:h2:mem:testdb;\r\n    spring.datasource.driverClassName=org.h2.Driver\r\n    spring.datasource.username=sa\r\n    spring.datasource.password=sa\r\n    spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\n    spring.h2.console.enabled=true\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.show-sql=true\r\n    server.port=8071\r\n\r\n    spring.application.name=accounts \r\n    spring.profiles.active=prod\r\n    spring.config.import=optional:configserver:http://localhost:8072\r\n\r\n    management.endpoints.web.exposure.include=*\r\n\r\n    eureka.instance.hostname=localhost\r\n    eureka.instance.preferIpAddress=true\r\n    eureka.client.registerWithEureka=true\r\n    eureka.client.fetchRegistry=true\r\n    eureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka/\r\n    info.app.name=Accounts-Microservice\r\n    info.app.description=Eazy-Bank-Accounts-Application\r\n    info.app.version=1.0.0\r\n    management.info.env.enabled = true\r\n    endpoints.shutdown.enabled=true\r\n    management.endpoint.shutdown.enabled=true\r\nLastly my eureka main class\r\n\r\n    package com.eaztbytes.accounts;\r\n\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.autoconfigure.domain.EntityScan;\r\n    import org.springframework.cloud.client.discovery.EnableDiscoveryClient;\r\n    import org.springframework.cloud.context.config.annotation.RefreshScope;\r\n    import org.springframework.context.annotation.ComponentScan;\r\n    import org.springframework.context.annotation.ComponentScans;\r\n    import org.springframework.data.jpa.repository.config.EnableJpaRepositories;\r\n\r\n    @ComponentScan(basePackages = &quot;com.eaztbytes.accounts&quot;)\r\n    @SpringBootApplication\r\n    @EnableDiscoveryClient\r\n    @RefreshScope\r\n    @EntityScan(&quot;com.eaztbytes.accounts.*&quot;)\r\n    @EnableJpaRepositories(&quot;com.eaztbytes.accounts.repository&quot;)\r\n    public class AccountsApplication {\r\n\t    public static void main(String[] args) {\r\n\t\t    SpringApplication.run(AccountsApplication.class, args);\r\n\t    }\r\n    }\r\nI spent maybe 3 days without success. I really need help. Thank&#39;s in advance.\r\n","title":"eureka client not registering with eureka server in spring boot 3","body":"<p>I used spring boot 3.0.1 with spring cloud 2022.0.0 to implement eureka server and eureka client. Both running successfully but my eureka cient not registered with eureka server. I got error like :</p>\n<pre><code>com.netflix.discovery.shared.transport.TransportException: Cannot execute request on any known server Caused by: org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: Root name ('timestamp') does not match expected ('instance') for type `com.netflix.appinfo.InstanceInfo`\n</code></pre>\n<p>Here below my eureka server pom.xml dependencies</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \nhttps://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt; \n    &lt;relativePath/&gt; \n&lt;/parent&gt;\n&lt;groupId&gt;com.eazybytes&lt;/groupId&gt;\n&lt;artifactId&gt;eurekaserver&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;packaging&gt;jar&lt;/packaging&gt; \n&lt;name&gt;eurekaserver&lt;/name&gt;\n&lt;description&gt;Service discovery for Bank microservices&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2022.0.0&lt;/spring-cloud.version&gt; \n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    \n&lt;/dependencies&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;image&gt;\n                    &lt;name&gt;eazybytes/${project.artifactId}&lt;/name&gt;\n                &lt;/image&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Here below my eureka application.properties code</p>\n<pre><code>server.port=8761\nspring.application.name=eurekaserver\neureka.instance.hostname=localhost\neureka.client.registerWithEureka=false\neureka.client.fetchRegistry=false\neureka.client.serviceUrl.defaultZone=http://${eureka.instance.hostname}:${server.port}/eureka/\n</code></pre>\n<p>Here below my eureka main class</p>\n<pre><code>package com.eazybytes.eurekaserver;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\n\n@SpringBootApplication\n@EnableEurekaServer\npublic class EurekaserverApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaserverApplication.class, args);\n    }\n}\n</code></pre>\n<p>Here below my client pom.xml dependencies</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; \nxmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 \nhttps://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;relativePath/&gt; \n&lt;/parent&gt;\n&lt;groupId&gt;com.eaztbytes&lt;/groupId&gt;\n&lt;artifactId&gt;accounts&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n&lt;name&gt;accounts&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2022.0.0&lt;/spring-cloud.version&gt; \n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt; \n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-thymeleaf&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n    &lt;artifactId&gt;h2&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n&lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.xml.bind&lt;/groupId&gt;\n        &lt;artifactId&gt;jaxb-api&lt;/artifactId&gt;\n        &lt;version&gt;2.4.0-b180830.0359&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n&lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n            &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n            &lt;type&gt;pom&lt;/type&gt;\n            &lt;scope&gt;import&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/dependencyManagement&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;configuration&gt;\n            &lt;forceJavacCompilerUse&gt;true&lt;/forceJavacCompilerUse&gt;\n          &lt;/configuration&gt;\n    &lt;/plugin&gt;\n    \n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                 &lt;excludes&gt;\n                    &lt;exclude&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                    &lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        \n    &lt;/plugins&gt;\n&lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Here below my eureka client application.properties code</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:testdb;\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=sa\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.h2.console.enabled=true\nspring.jpa.hibernate.ddl-auto=update\nspring.jpa.show-sql=true\nserver.port=8071\n\nspring.application.name=accounts \nspring.profiles.active=prod\nspring.config.import=optional:configserver:http://localhost:8072\n\nmanagement.endpoints.web.exposure.include=*\n\neureka.instance.hostname=localhost\neureka.instance.preferIpAddress=true\neureka.client.registerWithEureka=true\neureka.client.fetchRegistry=true\neureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka/\ninfo.app.name=Accounts-Microservice\ninfo.app.description=Eazy-Bank-Accounts-Application\ninfo.app.version=1.0.0\nmanagement.info.env.enabled = true\nendpoints.shutdown.enabled=true\nmanagement.endpoint.shutdown.enabled=true\n</code></pre>\n<p>Lastly my eureka main class</p>\n<pre><code>package com.eaztbytes.accounts;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.autoconfigure.domain.EntityScan;\nimport org.springframework.cloud.client.discovery.EnableDiscoveryClient;\nimport org.springframework.cloud.context.config.annotation.RefreshScope;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.ComponentScans;\nimport org.springframework.data.jpa.repository.config.EnableJpaRepositories;\n\n@ComponentScan(basePackages = &quot;com.eaztbytes.accounts&quot;)\n@SpringBootApplication\n@EnableDiscoveryClient\n@RefreshScope\n@EntityScan(&quot;com.eaztbytes.accounts.*&quot;)\n@EnableJpaRepositories(&quot;com.eaztbytes.accounts.repository&quot;)\npublic class AccountsApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(AccountsApplication.class, args);\n    }\n}\n</code></pre>\n<p>I spent maybe 3 days without success. I really need help. Thank's in advance.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689618225,"creation_date":1689618225,"answer_id":76707161,"question_id":76705454,"body_markdown":"&gt; _&quot;... I want it to be more specific and make them choose either a Y or a N and any other value will tell them that they need to answer with a Y or a N.&quot;_\r\n\r\nUse a _[Boolean](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Boolean.html)_ value to determine whether the loop should be exited or not.  \r\nAnd, set it&#39;s value from within the loop.\r\n\r\nUse the _Boolean_ object, also, as opposed to a _boolean_ primitive.  \r\nThis way, you can use a _null_ value for invalid entries.\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    Boolean exit = null;\r\n    do {\r\n        System.out.print(&quot;Do you want to play again ([Y] / n)?&quot;);\r\n        userInput = inputScanner.nextLine();\r\n        System.out.println(userInput);\r\n        if (userInput.equalsIgnoreCase(&quot;y&quot;) || userInput.equalsIgnoreCase(&quot;yes&quot;)) {\r\n            exit = false;\r\n        } else if (userInput.equalsIgnoreCase(&quot;n&quot;) || userInput.equalsIgnoreCase(&quot;no&quot;)) {\r\n            exit = true;\r\n        } else {\r\n            exit = null;\r\n            System.out.println(&quot;Invalid entry, try again.&quot;);\r\n        }\r\n    } while (exit == null || !exit);\r\n    //     System.out.println(&quot;Thanks for playing!&quot;);\r\n}\r\n```\r\n\r\nHere is an example input and output.\r\n\r\n```none\r\nDo you want to play again ([Y] / n)?abc\r\nabc\r\nInvalid entry, try again.\r\nDo you want to play again ([Y] / n)?y\r\ny\r\nDo you want to play again ([Y] / n)?n\r\nn\r\n```","title":"If player answers Y, game gets played again but if no or anything else it ends or provides an error message","body":"<blockquote>\n<p><em>&quot;... I want it to be more specific and make them choose either a Y or a N and any other value will tell them that they need to answer with a Y or a N.&quot;</em></p>\n</blockquote>\n<p>Use a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/Boolean.html\" rel=\"nofollow noreferrer\">Boolean</a></em> value to determine whether the loop should be exited or not.<br />\nAnd, set it's value from within the loop.</p>\n<p>Use the <em>Boolean</em> object, also, as opposed to a <em>boolean</em> primitive.<br />\nThis way, you can use a <em>null</em> value for invalid entries.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Boolean exit = null;\n    do {\n        System.out.print(&quot;Do you want to play again ([Y] / n)?&quot;);\n        userInput = inputScanner.nextLine();\n        System.out.println(userInput);\n        if (userInput.equalsIgnoreCase(&quot;y&quot;) || userInput.equalsIgnoreCase(&quot;yes&quot;)) {\n            exit = false;\n        } else if (userInput.equalsIgnoreCase(&quot;n&quot;) || userInput.equalsIgnoreCase(&quot;no&quot;)) {\n            exit = true;\n        } else {\n            exit = null;\n            System.out.println(&quot;Invalid entry, try again.&quot;);\n        }\n    } while (exit == null || !exit);\n    //     System.out.println(&quot;Thanks for playing!&quot;);\n}\n</code></pre>\n<p>Here is an example input and output.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Do you want to play again ([Y] / n)?abc\nabc\nInvalid entry, try again.\nDo you want to play again ([Y] / n)?y\ny\nDo you want to play again ([Y] / n)?n\nn\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27834272,"reputation":688,"user_id":21252090,"display_name":"Grinding For Reputation"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689701965,"creation_date":1689619413,"answer_id":76707291,"question_id":76705454,"body_markdown":"I put the code in a method, you can use this code in the main method -&gt;\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class Play {  \r\n\tstatic Scanner inputScanner = new Scanner(System.in);\r\n\tstatic String userInput = &quot;&quot;;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\t\trequestPlayAgain();\r\n\t}\r\n\tpublic static void requestPlayAgain() {\r\n\t\tboolean incorrectInput; // boolean containing if the input isn&#39;t &quot;yes&quot; or &quot;no&quot; / &quot;y&quot; or &quot;n&quot;\r\n\t\tString lowerCaseUserInput;\r\n\t\tdo {\r\n\t\t\tSystem.out.print(&quot;Do you want to play again ([Y] / [N])?&quot;);\r\n\t\t\tuserInput = inputScanner.nextLine();\r\n\t\t\tlowerCaseUserInput = userInput.toLowerCase(); // converts userInput into lower case\r\n\t\t\tincorrectInput = !(\r\n\t\t\t\t\tlowerCaseUserInput.equals(&quot;y&quot;)\r\n\t\t\t\t\t|| lowerCaseUserInput.equals(&quot;n&quot;) \r\n\t\t\t\t\t|| lowerCaseUserInput.equals(&quot;yes&quot;)\r\n\t\t\t\t\t|| lowerCaseUserInput.equals(&quot;no&quot;)\r\n\t\t\t\t\t); //checks whether the value is equal to &quot;yes&quot; or &quot;no&quot; / &quot;y&quot; or &quot;n&quot;\r\n\t\t\t\r\n\t\t\tif(incorrectInput) {\r\n\t\t\t\tSystem.err.println(&quot;Incorrect reply &#39;&quot;+userInput+&quot;&#39;, use [Y] / [N] or [Yes] / [No]&quot;); //Sends an error message requesting the user to use &quot;yes&quot; or &quot;no&quot;/&quot;y&quot; or &quot;n&quot;\r\n\t\t\t}\r\n\t\t} while (incorrectInput);\r\n\t\tswitch(lowerCaseUserInput) { //checks what the value is\r\n\t\tcase &quot;y&quot;, &quot;yes&quot;: /*   code/method to restart the game   */ break;\r\n\t\tcase &quot;n&quot;, &quot;no&quot;: System.out.println(&quot;Thank you for playing!&quot;); System.exit(0); break; //System.exit(0) exits the program with exit code 0\r\n\t\t}\r\n\t}\r\n}\r\n``` \r\nThe switch statement can also be swapped by a if statement like so -&gt;\r\n```\r\n    if(lowerCaseUserInput.equals(&quot;y&quot;) || lowerCaseUserInput.equals(&quot;yes&quot;)) {\r\n\t\t\t/*   code/method to restart the game   */\r\n\t}\r\n\telse if(lowerCaseUserInput.equals(&quot;n&quot;) || lowerCaseUserInput.equals(&quot;no&quot;)) {\r\n\t\tSystem.out.println(&quot;Thank you for playing!&quot;); System.exit(0);\r\n    }\r\n```\r\nA quick summary of what this code does :-\r\n\r\n 1. converts `userInput` into smaller case for flexibility which allows input like &quot;yEs&quot;. You could use `userInput.equalsIgnoreCase()` too.\r\n 2. checks whether userInput is equal to &quot;yes&quot; or &quot;no&quot; / &quot;y&quot; or &quot;n&quot;\r\n 3. if `userInput` is not &quot;yes&quot;..., sends an error message requesting the user to use &quot;yes&quot;...\r\n 4. if `userInput` is &quot;yes&quot;..., checks if it is &quot;yes&quot; or &quot;no&quot;\r\n 5. if it is yes it continues the game, else it says &quot;Thank you for playing&quot; and exits the game\r\n\r\nif done correctly you can end up with your output looking like this -&gt;\r\n```\r\nDo you want to play again ([Y] / [N])?a\r\nIncorrect reply &#39;a&#39;, use [Y] / [N] or [Yes] / [No]\r\nDo you want to play again ([Y] / [N])?b\r\nIncorrect reply &#39;b&#39;, use [Y] / [N] or [Yes] / [No]\r\nDo you want to play again ([Y] / [N])?n\r\nThank you for playing!\r\n```\r\nA small mistake I noticed while checking the code was naming the class, which I believe was a typo, but preferably class names have each word&#39;s first letter capitalized according to [Code Conventions](https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html)","title":"If player answers Y, game gets played again but if no or anything else it ends or provides an error message","body":"<p>I put the code in a method, you can use this code in the main method -&gt;</p>\n<pre><code>import java.util.Scanner;\n\npublic class Play {  \n    static Scanner inputScanner = new Scanner(System.in);\n    static String userInput = &quot;&quot;;\n    \n    public static void main(String[] args) {\n        requestPlayAgain();\n    }\n    public static void requestPlayAgain() {\n        boolean incorrectInput; // boolean containing if the input isn't &quot;yes&quot; or &quot;no&quot; / &quot;y&quot; or &quot;n&quot;\n        String lowerCaseUserInput;\n        do {\n            System.out.print(&quot;Do you want to play again ([Y] / [N])?&quot;);\n            userInput = inputScanner.nextLine();\n            lowerCaseUserInput = userInput.toLowerCase(); // converts userInput into lower case\n            incorrectInput = !(\n                    lowerCaseUserInput.equals(&quot;y&quot;)\n                    || lowerCaseUserInput.equals(&quot;n&quot;) \n                    || lowerCaseUserInput.equals(&quot;yes&quot;)\n                    || lowerCaseUserInput.equals(&quot;no&quot;)\n                    ); //checks whether the value is equal to &quot;yes&quot; or &quot;no&quot; / &quot;y&quot; or &quot;n&quot;\n            \n            if(incorrectInput) {\n                System.err.println(&quot;Incorrect reply '&quot;+userInput+&quot;', use [Y] / [N] or [Yes] / [No]&quot;); //Sends an error message requesting the user to use &quot;yes&quot; or &quot;no&quot;/&quot;y&quot; or &quot;n&quot;\n            }\n        } while (incorrectInput);\n        switch(lowerCaseUserInput) { //checks what the value is\n        case &quot;y&quot;, &quot;yes&quot;: /*   code/method to restart the game   */ break;\n        case &quot;n&quot;, &quot;no&quot;: System.out.println(&quot;Thank you for playing!&quot;); System.exit(0); break; //System.exit(0) exits the program with exit code 0\n        }\n    }\n}\n</code></pre>\n<p>The switch statement can also be swapped by a if statement like so -&gt;</p>\n<pre><code>    if(lowerCaseUserInput.equals(&quot;y&quot;) || lowerCaseUserInput.equals(&quot;yes&quot;)) {\n            /*   code/method to restart the game   */\n    }\n    else if(lowerCaseUserInput.equals(&quot;n&quot;) || lowerCaseUserInput.equals(&quot;no&quot;)) {\n        System.out.println(&quot;Thank you for playing!&quot;); System.exit(0);\n    }\n</code></pre>\n<p>A quick summary of what this code does :-</p>\n<ol>\n<li>converts <code>userInput</code> into smaller case for flexibility which allows input like &quot;yEs&quot;. You could use <code>userInput.equalsIgnoreCase()</code> too.</li>\n<li>checks whether userInput is equal to &quot;yes&quot; or &quot;no&quot; / &quot;y&quot; or &quot;n&quot;</li>\n<li>if <code>userInput</code> is not &quot;yes&quot;..., sends an error message requesting the user to use &quot;yes&quot;...</li>\n<li>if <code>userInput</code> is &quot;yes&quot;..., checks if it is &quot;yes&quot; or &quot;no&quot;</li>\n<li>if it is yes it continues the game, else it says &quot;Thank you for playing&quot; and exits the game</li>\n</ol>\n<p>if done correctly you can end up with your output looking like this -&gt;</p>\n<pre><code>Do you want to play again ([Y] / [N])?a\nIncorrect reply 'a', use [Y] / [N] or [Yes] / [No]\nDo you want to play again ([Y] / [N])?b\nIncorrect reply 'b', use [Y] / [N] or [Yes] / [No]\nDo you want to play again ([Y] / [N])?n\nThank you for playing!\n</code></pre>\n<p>A small mistake I noticed while checking the code was naming the class, which I believe was a typo, but preferably class names have each word's first letter capitalized according to <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">Code Conventions</a></p>\n"}],"owner":{"account_id":20015266,"reputation":1,"user_id":14671431,"display_name":"Nicole"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":105,"favorite_count":0,"down_vote_count":6,"up_vote_count":0,"answer_count":2,"score":-6,"last_activity_date":1690210289,"creation_date":1689603898,"question_id":76705454,"body_markdown":"I created a blackjack game that works perfectly except for the part where the user is asked if they want to play again. At this point, if anything except No is typed in that section, gameplay continues. So even if someone put a number in there, the game will start again. If they put in No or N, the game exits and tells them thank you for playing. I want it to be more specific and make them choose either a Y or a N and any other value will tell them that they need to answer with a Y or a N.\r\n\r\n```\r\npublic class play {\r\n\tScanner inputScanner = new Scanner(System.in);\r\n\tString userInput = &quot;&quot;;\r\n\t\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\r\n    do {\r\n\t\t\tSystem.out.print(&quot;Do you want to play again ([Y] / [N])?&quot;);\r\n\t\t\tuserInput = inputScanner.nextLine();\r\n\t\t\tSystem.out.println(userInput);\r\n\t} while (userInput.equals(&quot;Y&quot;) || userInput.equals(&quot;&quot;));\r\n       //     System.out.println(&quot;Thanks for playing!&quot;);\r\n    }\r\n}\r\n}\r\n```","title":"If player answers Y, game gets played again but if no or anything else it ends or provides an error message","body":"<p>I created a blackjack game that works perfectly except for the part where the user is asked if they want to play again. At this point, if anything except No is typed in that section, gameplay continues. So even if someone put a number in there, the game will start again. If they put in No or N, the game exits and tells them thank you for playing. I want it to be more specific and make them choose either a Y or a N and any other value will tell them that they need to answer with a Y or a N.</p>\n<pre><code>public class play {\n    Scanner inputScanner = new Scanner(System.in);\n    String userInput = &quot;&quot;;\n    \n    public static void main(String[] args) {\n\n    \n    do {\n            System.out.print(&quot;Do you want to play again ([Y] / [N])?&quot;);\n            userInput = inputScanner.nextLine();\n            System.out.println(userInput);\n    } while (userInput.equals(&quot;Y&quot;) || userInput.equals(&quot;&quot;));\n       //     System.out.println(&quot;Thanks for playing!&quot;);\n    }\n}\n}\n</code></pre>\n"},{"tags":["java","spring","autowired"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1690201993,"post_id":76754323,"comment_id":135316085,"body_markdown":"Do you have a log4j.xml or log4j.properties in your project ?","body":"Do you have a log4j.xml or log4j.properties in your project ?"},{"owner":{"account_id":2201020,"reputation":81,"user_id":1945415,"accept_rate":0,"display_name":"Jayanta Pramanik"},"score":0,"creation_date":1690296822,"post_id":76754323,"comment_id":135331933,"body_markdown":"No. Log4j not configured.","body":"No. Log4j not configured."},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1690304969,"post_id":76754323,"comment_id":135333733,"body_markdown":"Then configure Log4j and set debug level for AutowiredAnnotationBeanPostProcessor to NONE.","body":"Then configure Log4j and set debug level for AutowiredAnnotationBeanPostProcessor to NONE."},{"owner":{"account_id":2201020,"reputation":81,"user_id":1945415,"accept_rate":0,"display_name":"Jayanta Pramanik"},"score":0,"creation_date":1690474950,"post_id":76754323,"comment_id":135362349,"body_markdown":"I can configure Log4j but could not set debug level to NONE. Please help me. How to do that.","body":"I can configure Log4j but could not set debug level to NONE. Please help me. How to do that."},{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":0,"creation_date":1690529789,"post_id":76754323,"comment_id":135369421,"body_markdown":"Show what you have done.","body":"Show what you have done."}],"owner":{"account_id":2201020,"reputation":81,"user_id":1945415,"accept_rate":0,"display_name":"Jayanta Pramanik"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690209712,"creation_date":1690200256,"question_id":76754323,"body_markdown":"I have one Spring application (Spring version 3.1, Java version jdk1.7) is running which is configured with Apache Camel 2.14.2 version as well. The main function of this application to read/write files from various folder paths and Routes are defined in Camel route XML. And this application has many RESTful webservice deployed and receives such RESTful webservice calls from other client applications and from outside also. \r\n\r\nThe problem is last few weeks it is showing following lines repeatedly and thereby generated a huge log at end of the day. \r\n\r\nHow can I stop this repeated printing?\r\n\r\n    \r\n    08:15:36,401 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-120) JSR-330 &#39;javax.inject.Inject&#39; annotation found and supported for autowiring\r\n    08:15:36,401 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-146) JSR-330 &#39;javax.inject.Inject&#39; annotation found and supported for autowiring\r\n    08:15:36,416 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-89) JSR-330 &#39;javax.inject.Inject&#39; annotation found and supported for autowiring\r\n    08:15:36,416 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-9) JSR-330 &#39;javax.inject.Inject&#39; annotation found and supported for autowiring","title":"How to stop repeated printing &quot;JSR-330 &#39;javax.inject.Inject&#39; annotation found and supported for autowiring&quot;?","body":"<p>I have one Spring application (Spring version 3.1, Java version jdk1.7) is running which is configured with Apache Camel 2.14.2 version as well. The main function of this application to read/write files from various folder paths and Routes are defined in Camel route XML. And this application has many RESTful webservice deployed and receives such RESTful webservice calls from other client applications and from outside also.</p>\n<p>The problem is last few weeks it is showing following lines repeatedly and thereby generated a huge log at end of the day.</p>\n<p>How can I stop this repeated printing?</p>\n<pre><code>08:15:36,401 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-120) JSR-330 'javax.inject.Inject' annotation found and supported for autowiring\n08:15:36,401 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-146) JSR-330 'javax.inject.Inject' annotation found and supported for autowiring\n08:15:36,416 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-89) JSR-330 'javax.inject.Inject' annotation found and supported for autowiring\n08:15:36,416 INFO  [org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor] (http--10.9.101.131-9443-9) JSR-330 'javax.inject.Inject' annotation found and supported for autowiring\n</code></pre>\n"},{"tags":["java","android","kotlin"],"comments":[{"owner":{"account_id":6979173,"reputation":942,"user_id":6576302,"display_name":"C.F.G"},"score":0,"creation_date":1690209808,"post_id":76755545,"comment_id":135317862,"body_markdown":"https://stackoverflow.com/q/69522191/6576302","body":"<a href=\"https://stackoverflow.com/q/69522191/6576302\">stackoverflow.com/q/69522191/6576302</a>"},{"owner":{"account_id":6391459,"reputation":23,"user_id":4957450,"display_name":"Paridel Makouala"},"score":0,"creation_date":1690218484,"post_id":76755545,"comment_id":135319704,"body_markdown":"That doesn&#39;t answer my question.\nI&#39;ve correctly implemented everything notified on the link. However, on a phone with two sims, the action of calling in the application blocks both sims.","body":"That doesn&#39;t answer my question. I&#39;ve correctly implemented everything notified on the link. However, on a phone with two sims, the action of calling in the application blocks both sims."},{"owner":{"account_id":39846,"reputation":991133,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1690222091,"post_id":76755545,"comment_id":135320287,"body_markdown":"That is likely an issue with the specific device model. How many dual-SIM devices have you tested?","body":"That is likely an issue with the specific device model. How many dual-SIM devices have you tested?"},{"owner":{"account_id":6391459,"reputation":23,"user_id":4957450,"display_name":"Paridel Makouala"},"score":0,"creation_date":1691857185,"post_id":76755545,"comment_id":135549478,"body_markdown":"I tested it on 4 smartphones, two running Android 12 and the others Android 13.\nOn versions 12 and earlier, I didn&#39;t notice this problem. On the other hand, on Android 13 (Redmi Note 12 Pro and Redmi Note 11) I do have the problem.","body":"I tested it on 4 smartphones, two running Android 12 and the others Android 13. On versions 12 and earlier, I didn&#39;t notice this problem. On the other hand, on Android 13 (Redmi Note 12 Pro and Redmi Note 11) I do have the problem."}],"owner":{"account_id":6391459,"reputation":23,"user_id":4957450,"display_name":"Paridel Makouala"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690209551,"creation_date":1690209551,"question_id":76755545,"body_markdown":"When I make a call using Intent.ACTION_CALL on Android 13, the phone blocks both sims.\r\n\r\nObserved only on Android and not the rest of the versions.\r\n\r\nDo you have any idea how to deal with this situation?","title":"Intent.ACTION_CALL on Android 13, the phone blocks both sims","body":"<p>When I make a call using Intent.ACTION_CALL on Android 13, the phone blocks both sims.</p>\n<p>Observed only on Android and not the rest of the versions.</p>\n<p>Do you have any idea how to deal with this situation?</p>\n"},{"tags":["java","postgresql"],"comments":[{"owner":{"account_id":9609,"reputation":92294,"user_id":17833,"display_name":"Anya Shenanigans"},"score":1,"creation_date":1690208991,"post_id":76755261,"comment_id":135317689,"body_markdown":"I had a similar issue, and `TRUE::boolean` ended up being the working solution in this case. I think the issue is one of it being a keyword and the parser having changed?","body":"I had a similar issue, and <code>TRUE::boolean</code> ended up being the working solution in this case. I think the issue is one of it being a keyword and the parser having changed?"},{"owner":{"account_id":29081017,"reputation":3,"user_id":22277042,"display_name":"Fremya"},"score":0,"creation_date":1690211421,"post_id":76755261,"comment_id":135318250,"body_markdown":"@AnyaShenanigans TRUE::boolean helps. Thank you","body":"@AnyaShenanigans TRUE::boolean helps. Thank you"}],"answers":[{"tags":[],"owner":{"account_id":6169361,"reputation":20329,"user_id":4808122,"accept_rate":89,"display_name":"Marmite Bomber"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690209502,"creation_date":1690209085,"answer_id":76755470,"question_id":76755261,"body_markdown":"Yes, based on this [fiddle][1] it seems to be connected with the PostgreSQL 15 upgrade.\r\n\r\nIn 14 [works][2].\r\n\r\nAnyway  e.g. `group by true::boolean` help, or better **remove it** at all as it plays no role!\r\n\r\n\r\n  [1]: https://dbfiddle.uk/Uu1XdII5\r\n  [2]: https://dbfiddle.uk/qZcRuBd0","title":"postgresql provide PSQLException: ERROR: non-integer constant in GROUP BY when I GROUP BY TRUE","body":"<p>Yes, based on this <a href=\"https://dbfiddle.uk/Uu1XdII5\" rel=\"nofollow noreferrer\">fiddle</a> it seems to be connected with the PostgreSQL 15 upgrade.</p>\n<p>In 14 <a href=\"https://dbfiddle.uk/qZcRuBd0\" rel=\"nofollow noreferrer\">works</a>.</p>\n<p>Anyway  e.g. <code>group by true::boolean</code> help, or better <strong>remove it</strong> at all as it plays no role!</p>\n"}],"owner":{"account_id":29081017,"reputation":3,"user_id":22277042,"display_name":"Fremya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":152,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76755470,"answer_count":1,"score":0,"last_activity_date":1690209502,"creation_date":1690207395,"question_id":76755261,"body_markdown":"After we bumped our Postgresql version to 15 it starts throwing an error that `PSQLException: ERROR: non-integer constant in GROUP BY` when my SQL query looks like this:\r\n\r\n    SELECT ... FROM ...\r\n    GROUP BY TRUE, column\r\n    ORDER BY TRUE, column\r\n\r\nIs it not allowed anymore to use TRUE in group by/order by? Where can I find info about this?\r\n\r\nI expect it to works as on previou verions.","title":"postgresql provide PSQLException: ERROR: non-integer constant in GROUP BY when I GROUP BY TRUE","body":"<p>After we bumped our Postgresql version to 15 it starts throwing an error that <code>PSQLException: ERROR: non-integer constant in GROUP BY</code> when my SQL query looks like this:</p>\n<pre><code>SELECT ... FROM ...\nGROUP BY TRUE, column\nORDER BY TRUE, column\n</code></pre>\n<p>Is it not allowed anymore to use TRUE in group by/order by? Where can I find info about this?</p>\n<p>I expect it to works as on previou verions.</p>\n"},{"tags":["java","wicket"],"comments":[{"owner":{"account_id":889764,"reputation":4441,"user_id":928276,"accept_rate":75,"display_name":"soorapadman"},"score":0,"creation_date":1500555242,"post_id":45175149,"comment_id":77396691,"body_markdown":"`(new Label(&quot;classnamelab&quot;, getClassNames(classesList).setEscapeModelStrings(false);` Also will work","body":"<code>(new Label(&quot;classnamelab&quot;, getClassNames(classesList).setEscapeModelStrings(false);</code> Also will work"}],"answers":[{"tags":[],"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1500405841,"creation_date":1500405841,"answer_id":45175413,"question_id":45175149,"body_markdown":"You should use `org.apache.wicket.markup.html.basic.MultiLineLabel` for this.","title":"Having trouble writing multi-line text into table cell","body":"<p>You should use <code>org.apache.wicket.markup.html.basic.MultiLineLabel</code> for this.</p>\n"},{"tags":[],"owner":{"account_id":1468052,"reputation":53,"user_id":1380364,"accept_rate":15,"display_name":"JoeAB"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1501253777,"creation_date":1501253777,"answer_id":45376614,"question_id":45175149,"body_markdown":"The `MultiLineLabel` worked. I had to change the style as the data was inside a `&lt;p&gt;...&lt;/p&gt;`.","title":"Having trouble writing multi-line text into table cell","body":"<p>The <code>MultiLineLabel</code> worked. I had to change the style as the data was inside a <code>&lt;p&gt;...&lt;/p&gt;</code>.</p>\n"}],"owner":{"account_id":1468052,"reputation":53,"user_id":1380364,"accept_rate":15,"display_name":"JoeAB"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":311,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1690209438,"creation_date":1500404795,"question_id":45175149,"body_markdown":"I am using Java Wicket to create a table. I want to write a cell made of multiple lines; each line within the cell represents a data item.\r\n\r\n    List&lt;EntityClassModel&gt; classesList = classService.getClassesByNotificationId(nitem.getModelObject().getId());\r\n    nitem.add(new Label(&quot;classnamelab&quot;, getClassNames(classesList)));\r\n\r\n However, when I concatenate the lines, inside `getClassNames`, using `classNames.append(&quot;&lt;br&gt;&quot;);` the page displays `Latin 101&lt;br&gt;Latin 103`. From Chrome I Save As the page and opened it in Notepad++. It showed `&lt;td class=&quot;laclasses&quot;&gt;Latin 101&amp;lt;br&amp;gt;Latin 103&lt;/td&gt;`.\r\n\r\nI also tried the code `classNames.append(&quot;&amp;lt;br&amp;gt;&quot;);`. It was displayed in the cell as `Latin 101&amp;lt;br&amp;gt;Latin 103`, which is worse.\r\n\r\nUsing the saved files, I copied a row and changed the text to `&lt;td class=&quot;laclasses&quot;&gt;Angle 101&lt;br&gt;Bracket 103&lt;/td&gt;`. That showed the data `Angle 101` and `Bracket 103` on two lines within the cell, which is what I want. Developer Tools showed the coding on five lines.\r\n\r\n    &lt;td class=&quot;laclasses&quot;&gt;\r\n       &quot;Angle 101&quot;\r\n       &lt;br&gt;\r\n       &quot;Bracket 103&quot;\r\n    &lt;/td&gt;\r\n\r\nThe style sheet includes the block\r\n\r\n    td.laclasses\r\n    {\r\n    \twidth: 140px;\r\n    \tpadding-right: 1em;\r\n    \ttext-align: left;\r\n    \twhite-space: pre;\r\n    }\r\n\r\nIs there a simple way for Wicket to encode the multiple string so that they show as multiple lines within a cell?","title":"Having trouble writing multi-line text into table cell","body":"<p>I am using Java Wicket to create a table. I want to write a cell made of multiple lines; each line within the cell represents a data item.</p>\n<pre><code>List&lt;EntityClassModel&gt; classesList = classService.getClassesByNotificationId(nitem.getModelObject().getId());\nnitem.add(new Label(&quot;classnamelab&quot;, getClassNames(classesList)));\n</code></pre>\n<p>However, when I concatenate the lines, inside <code>getClassNames</code>, using <code>classNames.append(&quot;&lt;br&gt;&quot;);</code> the page displays <code>Latin 101&lt;br&gt;Latin 103</code>. From Chrome I Save As the page and opened it in Notepad++. It showed <code>&lt;td class=&quot;laclasses&quot;&gt;Latin 101&amp;lt;br&amp;gt;Latin 103&lt;/td&gt;</code>.</p>\n<p>I also tried the code <code>classNames.append(&quot;&amp;lt;br&amp;gt;&quot;);</code>. It was displayed in the cell as <code>Latin 101&amp;lt;br&amp;gt;Latin 103</code>, which is worse.</p>\n<p>Using the saved files, I copied a row and changed the text to <code>&lt;td class=&quot;laclasses&quot;&gt;Angle 101&lt;br&gt;Bracket 103&lt;/td&gt;</code>. That showed the data <code>Angle 101</code> and <code>Bracket 103</code> on two lines within the cell, which is what I want. Developer Tools showed the coding on five lines.</p>\n<pre><code>&lt;td class=&quot;laclasses&quot;&gt;\n   &quot;Angle 101&quot;\n   &lt;br&gt;\n   &quot;Bracket 103&quot;\n&lt;/td&gt;\n</code></pre>\n<p>The style sheet includes the block</p>\n<pre><code>td.laclasses\n{\n    width: 140px;\n    padding-right: 1em;\n    text-align: left;\n    white-space: pre;\n}\n</code></pre>\n<p>Is there a simple way for Wicket to encode the multiple string so that they show as multiple lines within a cell?</p>\n"},{"tags":["java","apache-camel","netty","spring-camel"],"comments":[{"owner":{"account_id":2269593,"reputation":43907,"user_id":1997376,"accept_rate":100,"display_name":"Nicolas Filotto"},"score":0,"creation_date":1690888532,"post_id":76755511,"comment_id":135412998,"body_markdown":"I cannot reproduce with `camel-netty-http-starter` and `camel-http-starter` in my classpath. Please note that the right syntax is `netty-http:protocol://host:port/path` so it should rather be `netty-http:http://0.0.0.0:8080/proxy`","body":"I cannot reproduce with <code>camel-netty-http-starter</code> and <code>camel-http-starter</code> in my classpath. Please note that the right syntax is <code>netty-http:protocol:&#47;&#47;host:port&#47;path</code> so it should rather be <code>netty-http:http:&#47;&#47;0.0.0.0:8080&#47;proxy</code>"}],"owner":{"account_id":29081114,"reputation":1,"user_id":22277120,"display_name":"Martin Švajdlenka"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690209372,"creation_date":1690209372,"question_id":76755511,"body_markdown":"I try to create simple Apache Camel route for netty-http:proxy consumer using camel-spring-boot-starter.\r\n\r\nHere is Route definition:\r\n\r\n```\r\nimport org.apache.camel.builder.RouteBuilder;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.stereotype.Component;\r\n\r\n@Component\r\npublic class MyCamelRouter extends RouteBuilder {\r\n\r\n    @Autowired\r\n    MyBean myBean;\r\n\r\n    @Override\r\n    public void configure() throws Exception {\r\n        from(&quot;timer:hello?period={{myPeriod}}&quot;).routeId(&quot;hello&quot;)\r\n                .bean(myBean, &quot;saySomething&quot;)\r\n                .to(&quot;stream:out&quot;);\r\n        from(&quot;netty-http:proxy://0.0.0.0:8080/proxy&quot;).routeId(&quot;ksed&quot;)\r\n                .to(&quot;https://www.sme.sk&quot;);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThe 1st timer route is working well. The 2nd if not commented out causes application not starting:\r\n\r\n```\r\n2023-07-24T16:22:38.078+02:00 ERROR 32604 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[netty-http:proxy://0.0.0.0:8080/proxy] -&gt;... because of No endpoint could be found for: netty-http://proxy://0.0.0.0:8080/proxy, please check your classpath contains the needed Camel component jar.\r\n\tat org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:82) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:816) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:685) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2396) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~[camel-api-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2062) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~[camel-api-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2081) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:313) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119) ~[camel-spring-4.0.0-20230724.063354-177.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151) ~[camel-spring-4.0.0-20230724.063354-177.jar:4.0.0-SNAPSHOT]\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat sample.camel.MyCamelApplication.main(MyCamelApplication.java:33) ~[classes/:na]\r\nCaused by: org.apache.camel.NoSuchEndpointException: No endpoint could be found for: netty-http://proxy://0.0.0.0:8080/proxy, please check your classpath contains the needed Camel component jar.\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:862) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:758) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:60) ~[camel-support-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:96) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\tat org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:76) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\r\n\t... 25 common frames omitted\r\n```\r\n\r\nUri in exception is modified to netty-http://proxy://0.0.0.0:8080/proxy.\r\n\r\nHere is my pom (extract):\r\n\r\n```\r\n    &lt;properties&gt;\r\n        &lt;spring-boot-version&gt;3.1.2&lt;/spring-boot-version&gt;\r\n        &lt;camel.version&gt;3.21.0&lt;/camel.version&gt;\r\n    &lt;/properties&gt;\r\n\r\n    &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;!-- Spring Boot BOM --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\r\n                &lt;version&gt;${spring-boot-version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- Camel BOM --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;camel-spring-boot-bom&lt;/artifactId&gt;\r\n                &lt;version&gt;${camel.version}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n                &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/dependencyManagement&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\r\n        &lt;!-- Spring Boot --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- Camel --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-stream-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-netty-http&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-netty&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-netty-http-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-http&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n            &lt;!-- use the same version as your Camel core version --&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- include camel developer console --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-console-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- include JMX that allows additional information in camel developer console --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-management-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Camel CLI --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-cli-connector-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- test --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\r\n            &lt;artifactId&gt;camel-test-spring-junit5&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;version&gt;${camel.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\nNote: if I use camel-maven-plugin (same version 3.21.0) - given uri &quot;netty-http:proxy://0.0.0.0:8080/proxy&quot; works fine. Unfortunately I cannot use that plugin due to customer requirements.\r\n\r\nAny idea what can be wrong?\r\n\r\nTried on Camel version 3.21.0 &amp; 4.0.0-RC1. Also netty-http:http://0.0.0.0:8080 produces the same error.","title":"Apache Camel netty-http route creation fails","body":"<p>I try to create simple Apache Camel route for netty-http:proxy consumer using camel-spring-boot-starter.</p>\n<p>Here is Route definition:</p>\n<pre><code>import org.apache.camel.builder.RouteBuilder;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Component;\n\n@Component\npublic class MyCamelRouter extends RouteBuilder {\n\n    @Autowired\n    MyBean myBean;\n\n    @Override\n    public void configure() throws Exception {\n        from(&quot;timer:hello?period={{myPeriod}}&quot;).routeId(&quot;hello&quot;)\n                .bean(myBean, &quot;saySomething&quot;)\n                .to(&quot;stream:out&quot;);\n        from(&quot;netty-http:proxy://0.0.0.0:8080/proxy&quot;).routeId(&quot;ksed&quot;)\n                .to(&quot;https://www.sme.sk&quot;);\n    }\n\n}\n</code></pre>\n<p>The 1st timer route is working well. The 2nd if not commented out causes application not starting:</p>\n<pre><code>2023-07-24T16:22:38.078+02:00 ERROR 32604 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.apache.camel.FailedToCreateRouteException: Failed to create route route1: Route(route1)[From[netty-http:proxy://0.0.0.0:8080/proxy] -&gt;... because of No endpoint could be found for: netty-http://proxy://0.0.0.0:8080/proxy, please check your classpath contains the needed Camel component jar.\n    at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:82) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.DefaultModelReifierFactory.createRoute(DefaultModelReifierFactory.java:49) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:816) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.DefaultCamelContext.startRouteDefinitions(DefaultCamelContext.java:685) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.engine.AbstractCamelContext.doInit(AbstractCamelContext.java:2396) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.support.service.BaseService.init(BaseService.java:83) ~[camel-api-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.engine.AbstractCamelContext.init(AbstractCamelContext.java:2062) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.support.service.BaseService.start(BaseService.java:111) ~[camel-api-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.engine.AbstractCamelContext.start(AbstractCamelContext.java:2081) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.DefaultCamelContext.start(DefaultCamelContext.java:313) ~[camel-core-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.spring.SpringCamelContext.start(SpringCamelContext.java:119) ~[camel-spring-4.0.0-20230724.063354-177.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.spring.SpringCamelContext.onApplicationEvent(SpringCamelContext.java:151) ~[camel-spring-4.0.0-20230724.063354-177.jar:4.0.0-SNAPSHOT]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:437) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:370) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:961) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:611) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at sample.camel.MyCamelApplication.main(MyCamelApplication.java:33) ~[classes/:na]\nCaused by: org.apache.camel.NoSuchEndpointException: No endpoint could be found for: netty-http://proxy://0.0.0.0:8080/proxy, please check your classpath contains the needed Camel component jar.\n    at org.apache.camel.impl.engine.AbstractCamelContext.doGetEndpoint(AbstractCamelContext.java:862) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.impl.engine.AbstractCamelContext.getEndpoint(AbstractCamelContext.java:758) ~[camel-base-engine-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.support.CamelContextHelper.getMandatoryEndpoint(CamelContextHelper.java:60) ~[camel-support-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.reifier.AbstractReifier.resolveEndpoint(AbstractReifier.java:195) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.reifier.RouteReifier.doCreateRoute(RouteReifier.java:96) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    at org.apache.camel.reifier.RouteReifier.createRoute(RouteReifier.java:76) ~[camel-core-reifier-4.0.0-20230724.063354-184.jar:4.0.0-SNAPSHOT]\n    ... 25 common frames omitted\n</code></pre>\n<p>Uri in exception is modified to netty-http://proxy://0.0.0.0:8080/proxy.</p>\n<p>Here is my pom (extract):</p>\n<pre><code>    &lt;properties&gt;\n        &lt;spring-boot-version&gt;3.1.2&lt;/spring-boot-version&gt;\n        &lt;camel.version&gt;3.21.0&lt;/camel.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;!-- Spring Boot BOM --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;${spring-boot-version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;!-- Camel BOM --&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n                &lt;artifactId&gt;camel-spring-boot-bom&lt;/artifactId&gt;\n                &lt;version&gt;${camel.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- Spring Boot --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Camel --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-stream-starter&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-netty-http&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-netty&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-netty-http-starter&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-http&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n            &lt;!-- use the same version as your Camel core version --&gt;\n        &lt;/dependency&gt;\n        &lt;!-- include camel developer console --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-console-starter&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- include JMX that allows additional information in camel developer console --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-management-starter&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Camel CLI --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel.springboot&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-cli-connector-starter&lt;/artifactId&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- test --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.camel&lt;/groupId&gt;\n            &lt;artifactId&gt;camel-test-spring-junit5&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;version&gt;${camel.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>Note: if I use camel-maven-plugin (same version 3.21.0) - given uri &quot;netty-http:proxy://0.0.0.0:8080/proxy&quot; works fine. Unfortunately I cannot use that plugin due to customer requirements.</p>\n<p>Any idea what can be wrong?</p>\n<p>Tried on Camel version 3.21.0 &amp; 4.0.0-RC1. Also netty-http:<a href=\"http://0.0.0.0:8080\" rel=\"nofollow noreferrer\">http://0.0.0.0:8080</a> produces the same error.</p>\n"},{"tags":["java","random","secure-random"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689942397,"post_id":76737956,"comment_id":135288055,"body_markdown":"Base64 encoding largely uses letters","body":"Base64 encoding largely uses letters"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1689942913,"post_id":76737956,"comment_id":135288167,"body_markdown":"You will get digits for each element of that array with `(0xFF &amp; random[i]) % 10)`","body":"You will get digits for each element of that array with <code>(0xFF &amp; random[i]) % 10)</code>"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1689944562,"post_id":76737956,"comment_id":135288524,"body_markdown":"There&#39;s no point synchronizing on `secureRandom` as no other thread can possibly have a reference to it.","body":"There&#39;s no point synchronizing on <code>secureRandom</code> as no other thread can possibly have a reference to it."},{"owner":{"account_id":13176117,"reputation":33,"user_id":9517022,"display_name":"newPHPDev"},"score":0,"creation_date":1689944703,"post_id":76737956,"comment_id":135288551,"body_markdown":"@tgdavies ok thanks. but how would i come up with a solution for a randm 12 digit number.","body":"@tgdavies ok thanks. but how would i come up with a solution for a randm 12 digit number."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1689944798,"post_id":76737956,"comment_id":135288569,"body_markdown":"@g00se has already explained that.","body":"@g00se has already explained that."},{"owner":{"account_id":13176117,"reputation":33,"user_id":9517022,"display_name":"newPHPDev"},"score":0,"creation_date":1689945214,"post_id":76737956,"comment_id":135288650,"body_markdown":"ok, trying to figure out a solution based on that. a bit confused. @g00se on how to accomplish.","body":"ok, trying to figure out a solution based on that. a bit confused. @g00se on how to accomplish."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689946493,"post_id":76737956,"comment_id":135288919,"body_markdown":"What are you confused about?","body":"What are you confused about?"},{"owner":{"account_id":15638210,"reputation":4538,"user_id":11282404,"display_name":"jpmarinier"},"score":0,"creation_date":1689947368,"post_id":76737956,"comment_id":135289101,"body_markdown":"You could ask `nextBytes` for just 5 random bytes. This is 5*8=40 bits. So the result can then be converted into a single integer number between 0 and 2^40. And 2^40 is just 10% above 10^12. You can probably afford to use plain rejection for those numbers that have the misfortune to lie above 10^12.","body":"You could ask <code>nextBytes</code> for just 5 random bytes. This is 5*8=40 bits. So the result can then be converted into a single integer number between 0 and 2^40. And 2^40 is just 10% above 10^12. You can probably afford to use plain rejection for those numbers that have the misfortune to lie above 10^12."},{"owner":{"account_id":85671,"reputation":40847,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1689948056,"post_id":76737956,"comment_id":135289256,"body_markdown":"The easy solution is simply `num = secureRandom.nextLong() % 1000000000000L;`","body":"The easy solution is simply <code>num = secureRandom.nextLong() % 1000000000000L;</code>"},{"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1689954006,"post_id":76737956,"comment_id":135290481,"body_markdown":"Wouldn&#39;t using `%10` introduce a modulo bias in the resulting values?  As I understand it, this is highly undesirable, especially if used for encryption.","body":"Wouldn&#39;t using <code>%10</code> introduce a modulo bias in the resulting values?  As I understand it, this is highly undesirable, especially if used for encryption."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689955166,"post_id":76737956,"comment_id":135290707,"body_markdown":"It *could* do. I&#39;m not sure of the mathematics of it","body":"It <i>could</i> do. I&#39;m not sure of the mathematics of it"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689956844,"post_id":76737956,"comment_id":135291004,"body_markdown":"I certainly wouldn&#39;t advance my comment as a solution. It was really just a reaction to *the existing array&#39;s presence*","body":"I certainly wouldn&#39;t advance my comment as a solution. It was really just a reaction to <i>the existing array&#39;s presence</i>"},{"owner":{"account_id":543600,"reputation":1014,"user_id":2125723,"accept_rate":80,"display_name":"ryanwebjackson"},"score":0,"creation_date":1690157026,"post_id":76737956,"comment_id":135309871,"body_markdown":"Does this answer your question? [How do I generate random integers within a specific range in Java?](https://stackoverflow.com/questions/363681/how-do-i-generate-random-integers-within-a-specific-range-in-java)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/363681/how-do-i-generate-random-integers-within-a-specific-range-in-java\">How do I generate random integers within a specific range in Java?</a>"}],"answers":[{"tags":[],"owner":{"account_id":1689973,"reputation":37280,"user_id":1552534,"display_name":"WJS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690209356,"creation_date":1689950118,"answer_id":76738926,"question_id":76737956,"body_markdown":"&gt;I am trying to create a **random number** using SecureRandom. It must be digits only (0123456789) and be 12 characters long.\r\n\r\nYou could doit like this.  Just specify the origin and bound to match your digit count requirements.\r\n```\r\nSecureRandom secureRandom = new SecureRandom();\r\nlong random =  secureRandom.nextLong(100_000_000_000L,1_000_000_000_000L);\r\nSystem.out.println(random);\r\n```\r\nprints something like\r\n```\r\n426491911225\r\n```\r\nIf it must be in a byte array of individual digits, you can do the following:\r\n```\r\nbyte[] bytes = new byte[12];\r\nint loc = bytes.length - 1; // insert in reverse in array\r\n\r\nwhile(random &gt; 0) {\r\n    bytes[loc--] = (byte)(random%10);\r\n    random/=10;\r\n}\r\nSystem.out.println(Arrays.toString(bytes));\r\n```\r\nprints\r\n```\r\n[4, 2, 6, 4, 9, 1, 9, 1, 1, 2, 2, 5]\r\n","title":"How to properly use SecureRandom 12 digit number?","body":"<blockquote>\n<p>I am trying to create a <strong>random number</strong> using SecureRandom. It must be digits only (0123456789) and be 12 characters long.</p>\n</blockquote>\n<p>You could doit like this.  Just specify the origin and bound to match your digit count requirements.</p>\n<pre><code>SecureRandom secureRandom = new SecureRandom();\nlong random =  secureRandom.nextLong(100_000_000_000L,1_000_000_000_000L);\nSystem.out.println(random);\n</code></pre>\n<p>prints something like</p>\n<pre><code>426491911225\n</code></pre>\n<p>If it must be in a byte array of individual digits, you can do the following:</p>\n<pre><code>byte[] bytes = new byte[12];\nint loc = bytes.length - 1; // insert in reverse in array\n\nwhile(random &gt; 0) {\n    bytes[loc--] = (byte)(random%10);\n    random/=10;\n}\nSystem.out.println(Arrays.toString(bytes));\n</code></pre>\n<p>prints</p>\n<pre><code>[4, 2, 6, 4, 9, 1, 9, 1, 1, 2, 2, 5]\n</code></pre>\n"}],"owner":{"account_id":13176117,"reputation":33,"user_id":9517022,"display_name":"newPHPDev"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690209356,"creation_date":1689942042,"question_id":76737956,"body_markdown":"I am trying to create a random number use SecureRandom. It must be digits only (0123456789) and be 12 characters long. Any help would be greatly appreciated.\r\n\r\n\t\tSecureRandom secureRandom = new SecureRandom();\r\n\t\tsynchronized (secureRandom) {\r\n\t\t\tfinal byte[] random = new byte[12];\r\n\t\t\tsecureRandom.nextBytes(random);\r\n\t\t\treturn Base64.encodeBase64URLSafeString(random);\r\n\t\t}\r\n\r\n\r\nI am getting the following:\r\n\r\n    IHmv_qsWMZ0teI_-","title":"How to properly use SecureRandom 12 digit number?","body":"<p>I am trying to create a random number use SecureRandom. It must be digits only (0123456789) and be 12 characters long. Any help would be greatly appreciated.</p>\n<pre><code>    SecureRandom secureRandom = new SecureRandom();\n    synchronized (secureRandom) {\n        final byte[] random = new byte[12];\n        secureRandom.nextBytes(random);\n        return Base64.encodeBase64URLSafeString(random);\n    }\n</code></pre>\n<p>I am getting the following:</p>\n<pre><code>IHmv_qsWMZ0teI_-\n</code></pre>\n"},{"tags":["java","xml","jackson","jaxb"],"owner":{"account_id":20824173,"reputation":35,"user_id":15295041,"display_name":"Federico"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690209136,"creation_date":1690209136,"question_id":76755481,"body_markdown":"I have generated a set of java classes from a xsd schema through xjc.\r\n\r\nA tag of the schema is\r\n\r\n    &lt;xs:complexType name=&quot;SupplementaryDataEnvelope1&quot;&gt;\r\n        &lt;xs:sequence&gt;\r\n            &lt;xs:any namespace=&quot;##any&quot; processContents=&quot;skip&quot;/&gt;\r\n        &lt;/xs:sequence&gt;\r\n    &lt;/xs:complexType&gt;\r\n\r\nand xjc accordingly generates this property\r\n\r\n    @XmlAnyElement\r\n    protected Element any;\r\n\r\ninside the SupplementaryDataEnvelope1 class\r\n\r\nThis part of the xml allows the inclusion of supplementary data that can be used by communities of users to add information to a message.\r\nJust for test purpose I have included a small xml fragment that I have manually mapped to a pojo outside the xsd schema.\r\n\r\nWhen I marshal the message using jaxb everything works fine.\r\n\r\n    Marshaller marshaller = context.createMarshaller();\r\n    marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\r\n    StringWriter writer = new StringWriter();\r\n    marshaller.marshal(document, writer);\r\n    System.out.println(writer.toString());\r\n\r\nThis is the output\r\n\r\n       &lt;SplmtryData&gt;\r\n            &lt;Envlp&gt;\r\n                &lt;Context&gt;\r\n                    &lt;SessionId&gt;12345&lt;/SessionId&gt;\r\n                    &lt;Language&gt;IT&lt;/Language&gt;\r\n                &lt;/Context&gt;\r\n            &lt;/Envlp&gt;\r\n        &lt;/SplmtryData&gt;\r\n\r\n\r\n\r\nThen I try to do the same using Jackson\r\n\r\n    XmlMapper mapper = XmlMapper.xmlBuilder().defaultUseWrapper(false).build();\r\n    StringWriter writer = new StringWriter();\r\n    mapper.enable(SerializationFeature.INDENT_OUTPUT);\r\n    mapper.setSerializationInclusion(Include.NON_NULL);\r\n    mapper.registerModule(new JakartaXmlBindAnnotationModule());\r\n    mapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true );\r\n    mapper.writeValue(writer, document);\r\n    System.out.println(writer.toString());\r\n\r\nEverything is correctly serialized, but the org.w3c.dom.Element property.\r\n\r\n        &lt;SplmtryData&gt;\r\n            &lt;Envlp&gt;\r\n    &lt;any&gt;&amp;lt;Context&gt;&amp;lt;SessionId&gt;12345&amp;lt;/SessionId&gt;&amp;lt;Language&gt;IT&amp;lt;/Language&gt;&amp;#xd;\r\n                    &amp;lt;/Context&gt;&lt;/any&gt;\r\n            &lt;/Envlp&gt;\r\n        &lt;/SplmtryData&gt;\r\n\r\nThe first error is the erronoeous serialization of the &quot;any&quot; tag; secondly all &quot;&lt;&quot; characters are printed as &quot;&amp;lt;&quot; (less than).\r\n\r\nI have tried to annotate the property with com.fasterxml.jackson.annotation.JsonRawValue.\r\n\r\nIn this case Jackson correctly doesn&#39;t print the &lt;any&gt; tag, but instead of serializing the xml content, prints out the fully-qualified name of the correnspondent jaxb class:\r\n\r\n   &lt;SplmtryData&gt;\r\n       &lt;Envlp&gt;com.fsajeva.rtp.iso.v10.pain013.SupplementaryDataEnvelope@427b5fb1&lt;/Envlp&gt;\r\n   &lt;/SplmtryData&gt;\r\n\r\nAm I missing any configuration?\r\n\r\nP.S. I&#39;m trying both Jaxb and Jackson serialization just for performance test purpose since the application should manage high volumes\r\n","title":"Jackson xml org.w3c.dom.Element property serialization","body":"<p>I have generated a set of java classes from a xsd schema through xjc.</p>\n<p>A tag of the schema is</p>\n<pre><code>&lt;xs:complexType name=&quot;SupplementaryDataEnvelope1&quot;&gt;\n    &lt;xs:sequence&gt;\n        &lt;xs:any namespace=&quot;##any&quot; processContents=&quot;skip&quot;/&gt;\n    &lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n</code></pre>\n<p>and xjc accordingly generates this property</p>\n<pre><code>@XmlAnyElement\nprotected Element any;\n</code></pre>\n<p>inside the SupplementaryDataEnvelope1 class</p>\n<p>This part of the xml allows the inclusion of supplementary data that can be used by communities of users to add information to a message.\nJust for test purpose I have included a small xml fragment that I have manually mapped to a pojo outside the xsd schema.</p>\n<p>When I marshal the message using jaxb everything works fine.</p>\n<pre><code>Marshaller marshaller = context.createMarshaller();\nmarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);\nStringWriter writer = new StringWriter();\nmarshaller.marshal(document, writer);\nSystem.out.println(writer.toString());\n</code></pre>\n<p>This is the output</p>\n<pre><code>   &lt;SplmtryData&gt;\n        &lt;Envlp&gt;\n            &lt;Context&gt;\n                &lt;SessionId&gt;12345&lt;/SessionId&gt;\n                &lt;Language&gt;IT&lt;/Language&gt;\n            &lt;/Context&gt;\n        &lt;/Envlp&gt;\n    &lt;/SplmtryData&gt;\n</code></pre>\n<p>Then I try to do the same using Jackson</p>\n<pre><code>XmlMapper mapper = XmlMapper.xmlBuilder().defaultUseWrapper(false).build();\nStringWriter writer = new StringWriter();\nmapper.enable(SerializationFeature.INDENT_OUTPUT);\nmapper.setSerializationInclusion(Include.NON_NULL);\nmapper.registerModule(new JakartaXmlBindAnnotationModule());\nmapper.configure(ToXmlGenerator.Feature.WRITE_XML_DECLARATION, true );\nmapper.writeValue(writer, document);\nSystem.out.println(writer.toString());\n</code></pre>\n<p>Everything is correctly serialized, but the org.w3c.dom.Element property.</p>\n<pre><code>    &lt;SplmtryData&gt;\n        &lt;Envlp&gt;\n&lt;any&gt;&amp;lt;Context&gt;&amp;lt;SessionId&gt;12345&amp;lt;/SessionId&gt;&amp;lt;Language&gt;IT&amp;lt;/Language&gt;&amp;#xd;\n                &amp;lt;/Context&gt;&lt;/any&gt;\n        &lt;/Envlp&gt;\n    &lt;/SplmtryData&gt;\n</code></pre>\n<p>The first error is the erronoeous serialization of the &quot;any&quot; tag; secondly all &quot;&lt;&quot; characters are printed as &quot;&lt;&quot; (less than).</p>\n<p>I have tried to annotate the property with com.fasterxml.jackson.annotation.JsonRawValue.</p>\n<p>In this case Jackson correctly doesn't print the  tag, but instead of serializing the xml content, prints out the fully-qualified name of the correnspondent jaxb class:</p>\n   \n       com.fsajeva.rtp.iso.v10.pain013.SupplementaryDataEnvelope@427b5fb1\n   \n<p>Am I missing any configuration?</p>\n<p>P.S. I'm trying both Jaxb and Jackson serialization just for performance test purpose since the application should manage high volumes</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1675947560,"post_id":75393572,"comment_id":133039648,"body_markdown":"Why would you ned to wrap it in a `ResponseEntity`? It should work by just returning that (unless you are extending the default implementation you cannot change the return type of the method).","body":"Why would you ned to wrap it in a <code>ResponseEntity</code>? It should work by just returning that (unless you are extending the default implementation you cannot change the return type of the method)."}],"answers":[{"tags":[],"owner":{"account_id":7394006,"reputation":5031,"user_id":5626568,"display_name":"ℛɑƒ&#230;Ŀᴿᴹᴿ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1683321725,"creation_date":1675948405,"answer_id":75399110,"question_id":75393572,"body_markdown":"There&#39;re many ways!\r\n\r\n----------\r\n\r\nUsing `@ResponseBody`:\r\n\r\n    @ResponseBody\r\n    @ExceptionHandler(EntityNotFoundException.class)\r\n    protected ProblemDetail handleEntityNotFoundException(EntityNotFoundException ex, \r\n                                                          HttpServletRequest request) {\r\n        ProblemDetail problemDetail = forStatusAndDetail(NOT_FOUND, ex.getMessage());\r\n        problemDetail.setTitle(&quot;entity.not.found&quot;);\r\n        return problemDetail;\r\n    }\r\n\r\n----------\r\n\r\nWith Spring `ResponseEntity` `static` mode:\r\n\r\n    @ExceptionHandler(EntityNotFoundException.class)\r\n    protected ResponseEntity&lt;ProblemDetail&gt; handleEntityNotFoundException(\r\n            EntityNotFoundException ex, \r\n            HttpServletRequest request) {\r\n        ProblemDetail problemDetail = forStatusAndDetail(NOT_FOUND, ex.getMessage());\r\n        problemDetail.setTitle(&quot;entity.not.found&quot;);\r\n        return ResponseEntity.ok(problemDetail);\r\n    }\r\n\r\nOthers status supported:\r\n\r\n    accepted()\r\n    badRequest()\r\n    noContent()\r\n    notFound()\r\n    unprocessableEntity()\r\n\r\n\r\n----------\r\n\r\nExample with custom `body` and `header`:\r\n\r\n    @GetMapping(&quot;/customHeader&quot;)\r\n    ResponseEntity&lt;String&gt; customHeader() {\r\n        return ResponseEntity.ok()\r\n            .header(&quot;Custom-Header&quot;, &quot;app-custom-header&quot;)\r\n            .body(&quot;Application custom body content&quot;);\r\n    }\r\n\r\n----------\r\n\r\nOr with traditional constructor and custom status:\r\n\r\n    return new ResponseEntity&lt;&gt;(body, HttpStatus.OK);\r\n\r\n----------\r\n\r\n### Reference:\r\n\r\n - https://www.baeldung.com/spring-response-entity\r\n - https://www.baeldung.com/spring-request-response-body\r\n - https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html\r\n","title":"Spring Framework ProblemDetail and ResponseEntity","body":"<p>There're many ways!</p>\n<hr />\n<p>Using <code>@ResponseBody</code>:</p>\n<pre><code>@ResponseBody\n@ExceptionHandler(EntityNotFoundException.class)\nprotected ProblemDetail handleEntityNotFoundException(EntityNotFoundException ex, \n                                                      HttpServletRequest request) {\n    ProblemDetail problemDetail = forStatusAndDetail(NOT_FOUND, ex.getMessage());\n    problemDetail.setTitle(&quot;entity.not.found&quot;);\n    return problemDetail;\n}\n</code></pre>\n<hr />\n<p>With Spring <code>ResponseEntity</code> <code>static</code> mode:</p>\n<pre><code>@ExceptionHandler(EntityNotFoundException.class)\nprotected ResponseEntity&lt;ProblemDetail&gt; handleEntityNotFoundException(\n        EntityNotFoundException ex, \n        HttpServletRequest request) {\n    ProblemDetail problemDetail = forStatusAndDetail(NOT_FOUND, ex.getMessage());\n    problemDetail.setTitle(&quot;entity.not.found&quot;);\n    return ResponseEntity.ok(problemDetail);\n}\n</code></pre>\n<p>Others status supported:</p>\n<pre><code>accepted()\nbadRequest()\nnoContent()\nnotFound()\nunprocessableEntity()\n</code></pre>\n<hr />\n<p>Example with custom <code>body</code> and <code>header</code>:</p>\n<pre><code>@GetMapping(&quot;/customHeader&quot;)\nResponseEntity&lt;String&gt; customHeader() {\n    return ResponseEntity.ok()\n        .header(&quot;Custom-Header&quot;, &quot;app-custom-header&quot;)\n        .body(&quot;Application custom body content&quot;);\n}\n</code></pre>\n<hr />\n<p>Or with traditional constructor and custom status:</p>\n<pre><code>return new ResponseEntity&lt;&gt;(body, HttpStatus.OK);\n</code></pre>\n<hr />\n<h3>Reference:</h3>\n<ul>\n<li><a href=\"https://www.baeldung.com/spring-response-entity\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-response-entity</a></li>\n<li><a href=\"https://www.baeldung.com/spring-request-response-body\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-request-response-body</a></li>\n<li><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html</a></li>\n</ul>\n"}],"owner":{"account_id":1103468,"reputation":5324,"user_id":1095362,"accept_rate":43,"display_name":"robert trudel"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":388,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":75399110,"answer_count":1,"score":1,"last_activity_date":1690208764,"creation_date":1675909135,"question_id":75393572,"body_markdown":"In spring 6, ProblemDetail is available \r\n\r\n    @ExceptionHandler(EntityNotFoundException.class)\r\n    protected ProblemDetail handleEntityNotFoundException(EntityNotFoundException ex, HttpServletRequest request) {\r\n    \r\n        ProblemDetail problemDetail = ProblemDetail.forStatusAndDetail(HttpStatus.NOT_FOUND, ex.getMessage());\r\n        problemDetail.setTitle(&quot;entity.not.found&quot;);\r\n        return problemDetail;\r\n    }\r\n\r\n\r\n\r\nInstead of returning directly a problemDetail, is there any utility to retun a \r\n\r\n    ResponseEntity&lt;ProblemDetail&gt;\r\n","title":"Spring Framework ProblemDetail and ResponseEntity","body":"<p>In spring 6, ProblemDetail is available</p>\n<pre><code>@ExceptionHandler(EntityNotFoundException.class)\nprotected ProblemDetail handleEntityNotFoundException(EntityNotFoundException ex, HttpServletRequest request) {\n\n    ProblemDetail problemDetail = ProblemDetail.forStatusAndDetail(HttpStatus.NOT_FOUND, ex.getMessage());\n    problemDetail.setTitle(&quot;entity.not.found&quot;);\n    return problemDetail;\n}\n</code></pre>\n<p>Instead of returning directly a problemDetail, is there any utility to retun a</p>\n<pre><code>ResponseEntity&lt;ProblemDetail&gt;\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1546607100,"post_id":54039484,"comment_id":94914046,"body_markdown":"I suspect these values can only be injected after the object was instanciated (which means after the constructor was executed).","body":"I suspect these values can only be injected after the object was instanciated (which means after the constructor was executed)."},{"owner":{"account_id":15057805,"reputation":157,"user_id":10867569,"display_name":"user10867569"},"score":0,"creation_date":1546607141,"post_id":54039484,"comment_id":94914069,"body_markdown":"So I need to load using Properties inside constructor as normal java?","body":"So I need to load using Properties inside constructor as normal java?"},{"owner":{"account_id":9196352,"reputation":1644,"user_id":6834956,"accept_rate":70,"display_name":"Withtaker"},"score":0,"creation_date":1546607181,"post_id":54039484,"comment_id":94914086,"body_markdown":"please provide your applications file as well.","body":"please provide your applications file as well."},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":2,"creation_date":1546607199,"post_id":54039484,"comment_id":94914095,"body_markdown":"I would recommend to not call ``login`` inside the constructor.","body":"I would recommend to not call <code>login</code> inside the constructor."},{"owner":{"account_id":15057805,"reputation":157,"user_id":10867569,"display_name":"user10867569"},"score":0,"creation_date":1546607219,"post_id":54039484,"comment_id":94914109,"body_markdown":"It&#39;s just `soapGWEndpoint=something`. It&#39;s basic and it&#39;s correct","body":"It&#39;s just <code>soapGWEndpoint=something</code>. It&#39;s basic and it&#39;s correct"},{"owner":{"account_id":12992146,"reputation":979,"user_id":9391041,"display_name":"cvdr"},"score":6,"creation_date":1546607248,"post_id":54039484,"comment_id":94914120,"body_markdown":"The constructor is called before properties injection; \nMaybe change the constructor to a method and use @PostConstruct resolve your problem","body":"The constructor is called before properties injection;  Maybe change the constructor to a method and use @PostConstruct resolve your problem"},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":2,"creation_date":1546607375,"post_id":54039484,"comment_id":94914188,"body_markdown":"Possible duplicate of [Spring Boot @Value Properties](https://stackoverflow.com/questions/39047333/spring-boot-value-properties)?","body":"Possible duplicate of <a href=\"https://stackoverflow.com/questions/39047333/spring-boot-value-properties\">Spring Boot @Value Properties</a>?"}],"answers":[{"tags":[],"owner":{"account_id":15014682,"reputation":901,"user_id":10838033,"display_name":"gbandres"},"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1546608310,"creation_date":1546608310,"answer_id":54039809,"question_id":54039484,"body_markdown":"Spring won&#39;t inject the preoperties&#39; values until the object is fully instantiated (The first thing that Spring will do is call your constructor, since its the default way to create a new object). You should call login() in a @PostConstruct method so Spring calls it automatically after initializing the object:\r\n\r\n    @Service\r\n    public class Customer {\r\n    \r\n        /** The soap GW endpoint. */\r\n        @Value(&quot;${soapGWEndpoint}&quot;)\r\n        private String soapGWEndpoint;\r\n    \r\n        /** The soap GW app name. */\r\n        @Value(&quot;${soapGWApplName}&quot;)\r\n        private String soapGWAppName;\r\n    \r\n        /** The soap GW user. */\r\n        @Value(&quot;${generic.user}&quot;)\r\n        private String soapGWUser;\r\n    \r\n        /** The soap GW password. */\r\n        @Value(&quot;${generic.user.password}&quot;)\r\n        private String soapGWPassword;\r\n    \r\n        public Customer () {\r\n        }\r\n\r\n        @PostConstruct\r\n        public void init() {\r\n          login(soapGWEndpoint, soapGWAppName, soapGWUser, soapGWPassword);\r\n        }\r\n    }","title":"Value is null when loading constructor","body":"<p>Spring won't inject the preoperties' values until the object is fully instantiated (The first thing that Spring will do is call your constructor, since its the default way to create a new object). You should call login() in a @PostConstruct method so Spring calls it automatically after initializing the object:</p>\n\n<pre><code>@Service\npublic class Customer {\n\n    /** The soap GW endpoint. */\n    @Value(\"${soapGWEndpoint}\")\n    private String soapGWEndpoint;\n\n    /** The soap GW app name. */\n    @Value(\"${soapGWApplName}\")\n    private String soapGWAppName;\n\n    /** The soap GW user. */\n    @Value(\"${generic.user}\")\n    private String soapGWUser;\n\n    /** The soap GW password. */\n    @Value(\"${generic.user.password}\")\n    private String soapGWPassword;\n\n    public Customer () {\n    }\n\n    @PostConstruct\n    public void init() {\n      login(soapGWEndpoint, soapGWAppName, soapGWUser, soapGWPassword);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12223265,"reputation":8608,"user_id":8921755,"display_name":"Ivan"},"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1546611172,"creation_date":1546611172,"answer_id":54040623,"question_id":54039484,"body_markdown":"Another option is to use constructor injection like this\r\n\r\n    @Service\r\n    public class Customer {\r\n\r\n      private String soapGWEndpoint;\r\n      private String soapGWAppName;\r\n      private String soapGWUser;\r\n      private String soapGWPassword;\r\n\r\n      @Autowired\r\n      public Customer(@Value(&quot;${soapGWEndpoint}&quot;) String soapGWEndpoint,\r\n                    @Value(&quot;${soapGWApplName}&quot;) String soapGWAppName,\r\n                    @Value(&quot;${generic.user}&quot;) String soapGWUser,\r\n                    @Value(&quot;${generic.user.password}&quot;) String soapGWPassword) {\r\n        this.soapGWEndpoint = soapGWEndpoint;\r\n        this.soapGWAppName = soapGWAppName;\r\n        this.soapGWUser = soapGWUser;\r\n        this.soapGWPassword = soapGWPassword;\r\n        login(soapGWEndpoint, soapGWAppName, soapGWUser, soapGWPassword);\r\n      }\r\n    }","title":"Value is null when loading constructor","body":"<p>Another option is to use constructor injection like this</p>\n\n<pre><code>@Service\npublic class Customer {\n\n  private String soapGWEndpoint;\n  private String soapGWAppName;\n  private String soapGWUser;\n  private String soapGWPassword;\n\n  @Autowired\n  public Customer(@Value(\"${soapGWEndpoint}\") String soapGWEndpoint,\n                @Value(\"${soapGWApplName}\") String soapGWAppName,\n                @Value(\"${generic.user}\") String soapGWUser,\n                @Value(\"${generic.user.password}\") String soapGWPassword) {\n    this.soapGWEndpoint = soapGWEndpoint;\n    this.soapGWAppName = soapGWAppName;\n    this.soapGWUser = soapGWUser;\n    this.soapGWPassword = soapGWPassword;\n    login(soapGWEndpoint, soapGWAppName, soapGWUser, soapGWPassword);\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3260426,"reputation":11559,"user_id":2746110,"accept_rate":67,"display_name":"Arefe"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1592244546,"creation_date":1592244546,"answer_id":62394350,"question_id":54039484,"body_markdown":"You can use ```@PostConstruct``` after the object is initialised. Please, have a look into the sample code that I write earlier:\r\n\r\n\r\n    @Configuration\r\n    public class BrinkWebserviceConfig {\r\n        \r\n        private static final Logger LOG = LoggerFactory.getLogger(BrinkWebserviceConfig.class);\r\n        \r\n        private String accessToken;\r\n        private String locationToken;\r\n        private String domain;\r\n        \r\n        @Value(&quot;${brink.soap.settingsAPI}&quot;)\r\n        String BRINK_SETTINGS_API;\r\n        \r\n        @Value(&quot;${brink.soap.sales2API}&quot;)\r\n        String BRINK_SALES2_API;\r\n        \r\n        @Value(&quot;${brink.soap.orderingAPI}&quot;)\r\n        String BRINK_ORDERING_API;\r\n        \r\n        @Value(&quot;${brink.soap.settings2API}&quot;)\r\n        String BRINK_SETTINGS2_API;\r\n        \r\n        @PostConstruct\r\n        public void init() {\r\n            LOG.info(&quot;Loading the access and location tocken for using in the configuration and setting the clients URLs&quot;);\r\n            \r\n            loadCredentialsAndDomainURL();\r\n            loadClientsAPI();\r\n        }\r\n        \r\n        public ClientInterceptor brinkHeaderInterceptor(Logger LOG) {\r\n            \r\n            return new ClientInterceptorAdapter() {\r\n                @Override\r\n                public boolean handleRequest(MessageContext messageContext) throws WebServiceClientException {\r\n                    TransportContext context = TransportContextHolder.getTransportContext();\r\n                    HttpUrlConnection connection = (HttpUrlConnection) context.getConnection();\r\n                    try {\r\n                        connection.addRequestHeader(&quot;AccessToken&quot;, accessToken);\r\n                        connection.addRequestHeader(&quot;LocationToken&quot;, locationToken);\r\n                    } catch (IOException e) {\r\n                        LOG.error(&quot;header interceptor error&quot;, e);\r\n                        return false;\r\n                    }\r\n                    \r\n                    return true;\r\n                }\r\n            };\r\n        }\r\n        \r\n        private void loadCredentialsAndDomainURL() {\r\n            \r\n            String s = &quot;src/test/resources/brink.properties&quot;;\r\n            Resource r = new FileSystemResource(s);\r\n            \r\n            Properties props = new Properties();\r\n            \r\n            try {\r\n                props.load(r.getInputStream());\r\n    \r\n    //            accessToken = props.getProperty(&quot;token&quot;);\r\n    //            locationToken = props.getProperty(&quot;appId&quot;);\r\n                \r\n                accessToken = props.getProperty(&quot;password&quot;);\r\n                locationToken = props.getProperty(&quot;username&quot;);\r\n                domain = props.getProperty(&quot;domain1&quot;);\r\n                \r\n            } catch (IOException e) {\r\n                LOG.error(&quot;We have an error for reading the access and location tokens for Brink web-service config&quot;);\r\n            }\r\n        }\r\n        \r\n        private void loadClientsAPI() {\r\n            \r\n            BRINK_SETTINGS_API = domain + BRINK_SETTINGS_API;\r\n            BRINK_SALES2_API = domain + BRINK_SALES2_API;\r\n            BRINK_ORDERING_API = domain + BRINK_ORDERING_API;\r\n            BRINK_SETTINGS2_API = domain + BRINK_SETTINGS2_API;\r\n        }\r\n    }\r\n\r\nAt the time of calling ```loadCredentialsAndDomainURL()`` and ```loadClientsAPI()``` methods, the object is ready and can read the property values from the ```application.properties``` file. ","title":"Value is null when loading constructor","body":"<p>You can use <code>@PostConstruct</code> after the object is initialised. Please, have a look into the sample code that I write earlier:</p>\n\n<pre><code>@Configuration\npublic class BrinkWebserviceConfig {\n\n    private static final Logger LOG = LoggerFactory.getLogger(BrinkWebserviceConfig.class);\n\n    private String accessToken;\n    private String locationToken;\n    private String domain;\n\n    @Value(\"${brink.soap.settingsAPI}\")\n    String BRINK_SETTINGS_API;\n\n    @Value(\"${brink.soap.sales2API}\")\n    String BRINK_SALES2_API;\n\n    @Value(\"${brink.soap.orderingAPI}\")\n    String BRINK_ORDERING_API;\n\n    @Value(\"${brink.soap.settings2API}\")\n    String BRINK_SETTINGS2_API;\n\n    @PostConstruct\n    public void init() {\n        LOG.info(\"Loading the access and location tocken for using in the configuration and setting the clients URLs\");\n\n        loadCredentialsAndDomainURL();\n        loadClientsAPI();\n    }\n\n    public ClientInterceptor brinkHeaderInterceptor(Logger LOG) {\n\n        return new ClientInterceptorAdapter() {\n            @Override\n            public boolean handleRequest(MessageContext messageContext) throws WebServiceClientException {\n                TransportContext context = TransportContextHolder.getTransportContext();\n                HttpUrlConnection connection = (HttpUrlConnection) context.getConnection();\n                try {\n                    connection.addRequestHeader(\"AccessToken\", accessToken);\n                    connection.addRequestHeader(\"LocationToken\", locationToken);\n                } catch (IOException e) {\n                    LOG.error(\"header interceptor error\", e);\n                    return false;\n                }\n\n                return true;\n            }\n        };\n    }\n\n    private void loadCredentialsAndDomainURL() {\n\n        String s = \"src/test/resources/brink.properties\";\n        Resource r = new FileSystemResource(s);\n\n        Properties props = new Properties();\n\n        try {\n            props.load(r.getInputStream());\n\n//            accessToken = props.getProperty(\"token\");\n//            locationToken = props.getProperty(\"appId\");\n\n            accessToken = props.getProperty(\"password\");\n            locationToken = props.getProperty(\"username\");\n            domain = props.getProperty(\"domain1\");\n\n        } catch (IOException e) {\n            LOG.error(\"We have an error for reading the access and location tokens for Brink web-service config\");\n        }\n    }\n\n    private void loadClientsAPI() {\n\n        BRINK_SETTINGS_API = domain + BRINK_SETTINGS_API;\n        BRINK_SALES2_API = domain + BRINK_SALES2_API;\n        BRINK_ORDERING_API = domain + BRINK_ORDERING_API;\n        BRINK_SETTINGS2_API = domain + BRINK_SETTINGS2_API;\n    }\n}\n</code></pre>\n\n<p>At the time of calling <code>loadCredentialsAndDomainURL()`` and</code>loadClientsAPI()<code>methods, the object is ready and can read the property values from the</code>application.properties``` file. </p>\n"},{"tags":[],"owner":{"account_id":29081223,"reputation":1,"user_id":22277203,"display_name":"dj11"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690208764,"creation_date":1690208764,"answer_id":76755425,"question_id":54039484,"body_markdown":"the issue is as soon as the object is initialized it is throwing null pointer exception","title":"Value is null when loading constructor","body":"<p>the issue is as soon as the object is initialized it is throwing null pointer exception</p>\n"}],"owner":{"account_id":15057805,"reputation":157,"user_id":10867569,"display_name":"user10867569"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5796,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":4,"score":12,"last_activity_date":1690208764,"creation_date":1546606905,"question_id":54039484,"body_markdown":"Instead of using `Properties` inside the constructor I saw `@Value` annotation should do the trick.\r\n\r\nIt works in another implementation that I have but here it doesn&#39;t\r\n\r\nController:\r\n\r\n    @Autowired\r\n    private Customer customer;\r\n\r\nMy Class\r\n\r\n    @Service\r\n    public class Customer {\r\n  \r\n        /** The soap GW endpoint. */\r\n\t    @Value(&quot;${soapGWEndpoint}&quot;)\r\n\t    private String soapGWEndpoint;\r\n\t\r\n\t    /** The soap GW app name. */\r\n\t    @Value(&quot;${soapGWApplName}&quot;)\r\n\t    private String soapGWAppName;\r\n\t\r\n\t    /** The soap GW user. */\r\n\t    @Value(&quot;${generic.user}&quot;)\r\n\t    private String soapGWUser;\r\n\t\r\n\t    /** The soap GW password. */\r\n\t    @Value(&quot;${generic.user.password}&quot;)\r\n\t    private String soapGWPassword;\r\n           \r\n        public Customer () {\r\n            // All parameters are null:\r\n\t\t    login(soapGWEndpoint, soapGWAppName, soapGWUser, soapGWPassword);\r\n\t    }\r\n    }\r\n\r\nBut they are on the application.properties file.\r\n\r\nWhy in this occasion I cannot use @Value?\r\n\r\n         \r\n\r\n","title":"Value is null when loading constructor","body":"<p>Instead of using <code>Properties</code> inside the constructor I saw <code>@Value</code> annotation should do the trick.</p>\n\n<p>It works in another implementation that I have but here it doesn't</p>\n\n<p>Controller:</p>\n\n<pre><code>@Autowired\nprivate Customer customer;\n</code></pre>\n\n<p>My Class</p>\n\n<pre><code>@Service\npublic class Customer {\n\n    /** The soap GW endpoint. */\n    @Value(\"${soapGWEndpoint}\")\n    private String soapGWEndpoint;\n\n    /** The soap GW app name. */\n    @Value(\"${soapGWApplName}\")\n    private String soapGWAppName;\n\n    /** The soap GW user. */\n    @Value(\"${generic.user}\")\n    private String soapGWUser;\n\n    /** The soap GW password. */\n    @Value(\"${generic.user.password}\")\n    private String soapGWPassword;\n\n    public Customer () {\n        // All parameters are null:\n        login(soapGWEndpoint, soapGWAppName, soapGWUser, soapGWPassword);\n    }\n}\n</code></pre>\n\n<p>But they are on the application.properties file.</p>\n\n<p>Why in this occasion I cannot use @Value?</p>\n"},{"tags":["java","android","firebase","android-camerax"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1690264323,"post_id":76755423,"comment_id":135324985,"body_markdown":"So it&#39;s a problem related to the camera rather than Firebase, right?","body":"So it&#39;s a problem related to the camera rather than Firebase, right?"},{"owner":{"account_id":29079571,"reputation":1,"user_id":22275928,"display_name":"Werther Leiden"},"score":0,"creation_date":1690273307,"post_id":76755423,"comment_id":135326544,"body_markdown":"I think it could be both, because when using only the camera function, it works but with the face detection it does not anymore, the video gets corrupted or I get the error:8","body":"I think it could be both, because when using only the camera function, it works but with the face detection it does not anymore, the video gets corrupted or I get the error:8"},{"owner":{"account_id":103589,"reputation":10607,"user_id":277368,"accept_rate":79,"display_name":"Xi 张熹"},"score":0,"creation_date":1690307182,"post_id":76755423,"comment_id":135334175,"body_markdown":"I would recommend checking out the `LifecycelCameraController` API, it handles some of the recording logic for you so there is less chance for you to make a mistake. Also not sure how you plan to do the face detection but if you are using MLKit, there is `MLKitAnalyzer`.  I noticed there is a `recordingImageAnalysis` too but unused. Just FYI CameraX only supports one ImageAnalysis instance.","body":"I would recommend checking out the <code>LifecycelCameraController</code> API, it handles some of the recording logic for you so there is less chance for you to make a mistake. Also not sure how you plan to do the face detection but if you are using MLKit, there is <code>MLKitAnalyzer</code>.  I noticed there is a <code>recordingImageAnalysis</code> too but unused. Just FYI CameraX only supports one ImageAnalysis instance."}],"owner":{"account_id":29079571,"reputation":1,"user_id":22275928,"display_name":"Werther Leiden"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690208748,"creation_date":1690208748,"question_id":76755423,"body_markdown":"I have this class which opens the Camera with CameraX together with a face detection. When I start the camera, the face detetction is working and I can click on my button &quot;id:capture&quot;, which starts the recording. After clicking on it again, the recording stops and I get the error  ERROR_SERVER_DIED (Error:8), the video will not be saved on my device.\r\n\r\nThis is the part of my Code,  the problem is in\r\n\r\n```\r\npublic void captureVideo()\r\n```\r\n\r\nI added some logs, the video recording does start, but it does not safe the video. Is there a problem with using the preview for the face detection and the recording? Thank you for your help in advance!\r\n\r\n    public class FaceDetection extends AppCompatActivity {\r\n        private ImageAnalysis imageAnalysis1;\r\n        VideoCapture&lt;Recorder&gt; videoCapture = null;\r\n        private boolean isCameraInitialized = false; // Declare isCameraInitialized here\r\n        int cameraFacing = CameraSelector.LENS_FACING_FRONT;\r\n        ImageButton capture;\r\n        ProcessCameraProvider cameraProvider; // Declare cameraProvider here\r\n        PreviewView previewView;\r\n        private Preview preview;\r\n        private static final int REQUEST_VIDEO_CAPTURE = 1;\r\n        private ImageCapture imageCapture;\r\n        private ImageAnalysis imageAnalysis;\r\n        private DrawLayerAroundFace drawLayerAroundFace;\r\n        Recording recording = null;\r\n        private ImageAnalysis previewImageAnalysis;\r\n        private ImageAnalysis recordingImageAnalysis;\r\n    \r\n        private TextToSpeech textToSpeech;\r\n    private RelativeLayout rootview; \r\n    private TextView textView; \r\n    private boolean isRecording = false;\r\n    private BaseImage baseImageInstance;\r\n    \r\n    private MediaRecorder mediaRecorder;\r\n    private static final int REQUEST_PERMISSIONS_CODE = 1;\r\n    private Handler handler;\r\n    CameraSelector cameraSelector; \r\n    \r\n    private final ActivityResultLauncher&lt;String&gt; activityResultLauncher = registerForActivityResult(new ActivityResultContracts.RequestPermission(), result -&gt; {\r\n        if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\r\n             startCamera(cameraFacing);\r\n        }\r\n    });\r\n    \r\n    \r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_detection);\r\n    \r\n    \r\n    \r\n        // Initialize the DrawLayerAroundFace with the current activity and an empty bounding box\r\n        drawLayerAroundFace = new DrawLayerAroundFace(this);\r\n    \r\n        previewView = findViewById(R.id.pv);\r\n    \r\n        // Initialize the TextToSpeech instance\r\n        textToSpeech = new TextToSpeech(this, status -&gt; {\r\n            if (status == TextToSpeech.SUCCESS) {\r\n                // TextToSpeech initialisierung erfolgreich\r\n            } else {\r\n                // TextToSpeech could not be initillized\r\n            }\r\n        });\r\n        // Initialize the rootview using the correct ID\r\n        rootview = findViewById(R.id.conlay);\r\n    \r\n        // Initialize the textView using the correct ID\r\n        textView = findViewById(R.id.textView3);\r\n    \r\n    // Pass the Context reference to the BaseImage constructor // Initialize the imageAnalysis1 variable imageAnalysis1 = new ImageAnalysis.Builder() .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST) .setTargetResolution(new Size(900, 1200)) .build();    // Pass the Context reference to the BaseImage constructor\r\n        BaseImage baseImage = new BaseImage(this, textToSpeech, rootview, textView);\r\n    \r\n        // Set the BaseImage instance as the analyzer for the ImageAnalysis\r\n        imageAnalysis1.setAnalyzer(ContextCompat.getMainExecutor(this), baseImage);\r\n    \r\n    \r\n        renderImage();\r\n    \r\n    \r\n    \r\n        baseImageInstance = new BaseImage(this, textToSpeech, rootview, textView);\r\n    \r\n        ImageButton startCameraButton = findViewById(R.id.capture);\r\n        startCameraButton.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                // Check camera permission and start the camera\r\n                if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\r\n                    activityResultLauncher.launch(Manifest.permission.CAMERA);\r\n                } else {\r\n                    startCamera(cameraFacing);\r\n                }\r\n            }\r\n        });\r\n    \r\n        capture = findViewById(R.id.capture);\r\n        capture.setOnClickListener(view -&gt; {\r\n            // Check camera permission\r\n            if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\r\n                activityResultLauncher.launch(Manifest.permission.CAMERA);\r\n            }\r\n            // Check audio recording permission\r\n            else if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\r\n                activityResultLauncher.launch(Manifest.permission.RECORD_AUDIO);\r\n            }\r\n            // Check write storage permission for Android versions &lt;= P\r\n            else if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.P &amp;&amp; ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\r\n                activityResultLauncher.launch(Manifest.permission.WRITE_EXTERNAL_STORAGE);\r\n            }\r\n            // Start video capture\r\n            else {\r\n                captureVideo();\r\n            }\r\n        });\r\n    \r\n        // Check camera permission and start the camera\r\n    \r\n    \r\n        if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\r\n            activityResultLauncher.launch(Manifest.permission.CAMERA);\r\n        } else {\r\n            startCamera(cameraFacing);\r\n        }\r\n    \r\n    \r\n        handler = new Handler(Looper.getMainLooper());\r\n    }\r\n    \r\n    // Call this method when you want to start video recording\r\n    public void captureVideo() {\r\n        capture.setImageResource(R.drawable.round_stop_circle_24);\r\n        Recording recording1 = recording;\r\n        if (recording1 != null) {\r\n            // Stop ongoing recording\r\n            recording1.stop();\r\n            recording = null;\r\n            return;\r\n        }\r\n    \r\n        // Generate file name for the captured video\r\n        String name = new SimpleDateFormat(&quot;yyyy-MM-dd-HH-mm-ss-SSS&quot;, Locale.getDefault()).format(System.currentTimeMillis());\r\n    \r\n        // Prepare media store output options for video capture\r\n        ContentValues contentValues = new ContentValues();\r\n        contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, name);\r\n        contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;video/mp4&quot;);\r\n        contentValues.put(MediaStore.Video.Media.RELATIVE_PATH, &quot;Movies/CameraX-Video&quot;);\r\n        MediaStoreOutputOptions options = new MediaStoreOutputOptions.Builder(getContentResolver(), MediaStore.Video.Media.EXTERNAL_CONTENT_URI)\r\n                .setContentValues(contentValues).build();\r\n    \r\n        // Check audio recording permission\r\n        if (ActivityCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\r\n            return;\r\n        }\r\n    \r\n        // Start video recording\r\n        recording = videoCapture.getOutput().prepareRecording(FaceDetection.this, options).withAudioEnabled().start(ContextCompat.getMainExecutor(FaceDetection.this), videoRecordEvent -&gt; {\r\n            if (videoRecordEvent instanceof VideoRecordEvent.Start) {\r\n                capture.setEnabled(true);\r\n                // Video recording started\r\n                Log.d(&quot;VideoRecording&quot;, &quot;Video recording started&quot;);\r\n                Toast.makeText(this, &quot;Video recording started&quot;, Toast.LENGTH_SHORT).show();\r\n            } else if (videoRecordEvent instanceof VideoRecordEvent.Finalize) {\r\n                if (!((VideoRecordEvent.Finalize) videoRecordEvent).hasError()) {\r\n                    String msg = &quot;Video erfolgreich aufgezeichnet: &quot; + ((VideoRecordEvent.Finalize) videoRecordEvent).getOutputResults().getOutputUri();\r\n                    Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();\r\n                    // Video recording completed successfully\r\n                    Log.d(&quot;VideoRecording&quot;, &quot;Video recording completed successfully&quot;);\r\n                } else {\r\n                    int errorCode = ((VideoRecordEvent.Finalize) videoRecordEvent).getError();\r\n                    if (errorCode == 8) {\r\n                        // Fehlercode 8 entspricht dem &quot;ERROR_SERVER_DIED&quot;-Fehler\r\n                        // MediaRecorder zur&#252;cksetzen und neu initialisieren\r\n                        if (recording != null) {\r\n                            recording.close();\r\n                            recording = null;\r\n                        }\r\n                        // Beispiel: mediaRecorder.reset(); mediaRecorder.release(); initializeMediaRecorder();\r\n                        Log.e(&quot;VideoRecording&quot;, &quot;MediaRecorder ERROR_SERVER_DIED&quot;);\r\n                        Toast.makeText(this, &quot;Error: MediaRecorder ERROR_SERVER_DIED&quot;, Toast.LENGTH_SHORT).show();\r\n                    } else {\r\n                        if (recording != null) { // Check if &#39;recording&#39; is null before calling close()\r\n                            recording.close();\r\n                            recording = null;\r\n                        }\r\n                        String msg = &quot;Error: &quot; + errorCode;\r\n                        Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();\r\n                        // Other errors occurred during video recording\r\n                        Log.e(&quot;VideoRecording&quot;, &quot;Error during video recording: &quot; + errorCode);\r\n                    }\r\n                }\r\n                capture.setImageResource(R.drawable.round_fiber_manual_record_24);\r\n                // After stopping the recording, start the NotesActivity\r\n                Intent intent = new Intent(FaceDetection.this, NotesActivity.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    private void startCamera(int cameraFacing) {\r\n        ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture = ProcessCameraProvider.getInstance(this);\r\n    \r\n        cameraProviderFuture.addListener(() -&gt; {\r\n            try {\r\n                cameraProvider = cameraProviderFuture.get();\r\n    \r\n                // Set up preview\r\n                Preview preview = new Preview.Builder().build();\r\n                preview.setSurfaceProvider(previewView.getSurfaceProvider());\r\n    \r\n                // Set up video capture\r\n                Recorder recorder = new Recorder.Builder()\r\n                        .setQualitySelector(QualitySelector.from(Quality.HIGHEST))\r\n                        .build();\r\n                videoCapture = VideoCapture.withOutput(recorder);\r\n    \r\n                // Initialize the previewImageAnalysis\r\n                previewImageAnalysis = new ImageAnalysis.Builder()\r\n                        .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\r\n                        .setTargetResolution(new Size(900, 1200))\r\n                        .build();\r\n    \r\n                // Create an instance of BaseImage to perform face detection for preview\r\n                BaseImage baseImage = new BaseImage(this, textToSpeech, rootview, textView);\r\n    \r\n                // Set the BaseImage instance as the analyzer for the previewImageAnalysis\r\n                previewImageAnalysis.setAnalyzer(ContextCompat.getMainExecutor(this), baseImage);\r\n    \r\n                // Bind preview use cases to the camera lifecycle\r\n                cameraProvider.unbindAll();\r\n                cameraSelector = new CameraSelector.Builder().requireLensFacing(cameraFacing).build();\r\n                Camera camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview, previewImageAnalysis);\r\n    \r\n                // Camera for preview is now initialized\r\n                isCameraInitialized = true;\r\n            } catch (ExecutionException | InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }, ContextCompat.getMainExecutor(this));\r\n    }\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n    private void renderImage() {\r\n        ListenableFuture&lt;ProcessCameraProvider&gt; val = ProcessCameraProvider.getInstance(this);\r\n    \r\n        val.addListener(() -&gt; {\r\n            try {\r\n                ProcessCameraProvider processCameraProvider = val.get();\r\n                preview = new Preview.Builder().setTargetResolution(new Size(900, 1200)).build();\r\n    \r\n                CameraSelector cameraSelector = new CameraSelector.Builder().requireLensFacing(CameraSelector.LENS_FACING_FRONT).build();\r\n    \r\n                preview.setSurfaceProvider(previewView.getSurfaceProvider());\r\n    \r\n                ImageCapture imageCapture = new ImageCapture.Builder().setCaptureMode(ImageCapture.CAPTURE_MODE_MINIMIZE_LATENCY).build();\r\n                ImageAnalysis imageAnalysis1 = new ImageAnalysis.Builder().setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\r\n                        .setTargetResolution(new Size(900, 1200)).build();\r\n    \r\n                // Create an instance of BaseImage to perform face detection\r\n                BaseImage baseImage = new BaseImage(this, textToSpeech, rootview, textView);\r\n    \r\n                // Set the BaseImage instance as the analyzer for the ImageAnalysis\r\n                imageAnalysis1.setAnalyzer(ContextCompat.getMainExecutor(this), baseImage);\r\n    \r\n                // Bind all use cases to the camera lifecycle\r\n                processCameraProvider.unbindAll();\r\n                Camera camera = processCameraProvider.bindToLifecycle(this, cameraSelector, preview, imageCapture, imageAnalysis1);\r\n            } catch (ExecutionException | InterruptedException e) {\r\n                e.printStackTrace();\r\n            }\r\n        }, ContextCompat.getMainExecutor(this));\r\n    }\r\n    \r\n    \r\n    \r\n    }","title":"Java, Android, camerax programming. Error: MediaRecorder ERROR_SERVER_DIED (Error:8)","body":"<p>I have this class which opens the Camera with CameraX together with a face detection. When I start the camera, the face detetction is working and I can click on my button &quot;id:capture&quot;, which starts the recording. After clicking on it again, the recording stops and I get the error  ERROR_SERVER_DIED (Error:8), the video will not be saved on my device.</p>\n<p>This is the part of my Code,  the problem is in</p>\n<pre><code>public void captureVideo()\n</code></pre>\n<p>I added some logs, the video recording does start, but it does not safe the video. Is there a problem with using the preview for the face detection and the recording? Thank you for your help in advance!</p>\n<pre><code>public class FaceDetection extends AppCompatActivity {\n    private ImageAnalysis imageAnalysis1;\n    VideoCapture&lt;Recorder&gt; videoCapture = null;\n    private boolean isCameraInitialized = false; // Declare isCameraInitialized here\n    int cameraFacing = CameraSelector.LENS_FACING_FRONT;\n    ImageButton capture;\n    ProcessCameraProvider cameraProvider; // Declare cameraProvider here\n    PreviewView previewView;\n    private Preview preview;\n    private static final int REQUEST_VIDEO_CAPTURE = 1;\n    private ImageCapture imageCapture;\n    private ImageAnalysis imageAnalysis;\n    private DrawLayerAroundFace drawLayerAroundFace;\n    Recording recording = null;\n    private ImageAnalysis previewImageAnalysis;\n    private ImageAnalysis recordingImageAnalysis;\n\n    private TextToSpeech textToSpeech;\nprivate RelativeLayout rootview; \nprivate TextView textView; \nprivate boolean isRecording = false;\nprivate BaseImage baseImageInstance;\n\nprivate MediaRecorder mediaRecorder;\nprivate static final int REQUEST_PERMISSIONS_CODE = 1;\nprivate Handler handler;\nCameraSelector cameraSelector; \n\nprivate final ActivityResultLauncher&lt;String&gt; activityResultLauncher = registerForActivityResult(new ActivityResultContracts.RequestPermission(), result -&gt; {\n    if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) == PackageManager.PERMISSION_GRANTED) {\n         startCamera(cameraFacing);\n    }\n});\n\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_detection);\n\n\n\n    // Initialize the DrawLayerAroundFace with the current activity and an empty bounding box\n    drawLayerAroundFace = new DrawLayerAroundFace(this);\n\n    previewView = findViewById(R.id.pv);\n\n    // Initialize the TextToSpeech instance\n    textToSpeech = new TextToSpeech(this, status -&gt; {\n        if (status == TextToSpeech.SUCCESS) {\n            // TextToSpeech initialisierung erfolgreich\n        } else {\n            // TextToSpeech could not be initillized\n        }\n    });\n    // Initialize the rootview using the correct ID\n    rootview = findViewById(R.id.conlay);\n\n    // Initialize the textView using the correct ID\n    textView = findViewById(R.id.textView3);\n\n// Pass the Context reference to the BaseImage constructor // Initialize the imageAnalysis1 variable imageAnalysis1 = new ImageAnalysis.Builder() .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST) .setTargetResolution(new Size(900, 1200)) .build();    // Pass the Context reference to the BaseImage constructor\n    BaseImage baseImage = new BaseImage(this, textToSpeech, rootview, textView);\n\n    // Set the BaseImage instance as the analyzer for the ImageAnalysis\n    imageAnalysis1.setAnalyzer(ContextCompat.getMainExecutor(this), baseImage);\n\n\n    renderImage();\n\n\n\n    baseImageInstance = new BaseImage(this, textToSpeech, rootview, textView);\n\n    ImageButton startCameraButton = findViewById(R.id.capture);\n    startCameraButton.setOnClickListener(new View.OnClickListener() {\n        @Override\n        public void onClick(View v) {\n            // Check camera permission and start the camera\n            if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\n                activityResultLauncher.launch(Manifest.permission.CAMERA);\n            } else {\n                startCamera(cameraFacing);\n            }\n        }\n    });\n\n    capture = findViewById(R.id.capture);\n    capture.setOnClickListener(view -&gt; {\n        // Check camera permission\n        if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\n            activityResultLauncher.launch(Manifest.permission.CAMERA);\n        }\n        // Check audio recording permission\n        else if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\n            activityResultLauncher.launch(Manifest.permission.RECORD_AUDIO);\n        }\n        // Check write storage permission for Android versions &lt;= P\n        else if (Build.VERSION.SDK_INT &lt;= Build.VERSION_CODES.P &amp;&amp; ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED) {\n            activityResultLauncher.launch(Manifest.permission.WRITE_EXTERNAL_STORAGE);\n        }\n        // Start video capture\n        else {\n            captureVideo();\n        }\n    });\n\n    // Check camera permission and start the camera\n\n\n    if (ActivityCompat.checkSelfPermission(FaceDetection.this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) {\n        activityResultLauncher.launch(Manifest.permission.CAMERA);\n    } else {\n        startCamera(cameraFacing);\n    }\n\n\n    handler = new Handler(Looper.getMainLooper());\n}\n\n// Call this method when you want to start video recording\npublic void captureVideo() {\n    capture.setImageResource(R.drawable.round_stop_circle_24);\n    Recording recording1 = recording;\n    if (recording1 != null) {\n        // Stop ongoing recording\n        recording1.stop();\n        recording = null;\n        return;\n    }\n\n    // Generate file name for the captured video\n    String name = new SimpleDateFormat(&quot;yyyy-MM-dd-HH-mm-ss-SSS&quot;, Locale.getDefault()).format(System.currentTimeMillis());\n\n    // Prepare media store output options for video capture\n    ContentValues contentValues = new ContentValues();\n    contentValues.put(MediaStore.MediaColumns.DISPLAY_NAME, name);\n    contentValues.put(MediaStore.MediaColumns.MIME_TYPE, &quot;video/mp4&quot;);\n    contentValues.put(MediaStore.Video.Media.RELATIVE_PATH, &quot;Movies/CameraX-Video&quot;);\n    MediaStoreOutputOptions options = new MediaStoreOutputOptions.Builder(getContentResolver(), MediaStore.Video.Media.EXTERNAL_CONTENT_URI)\n            .setContentValues(contentValues).build();\n\n    // Check audio recording permission\n    if (ActivityCompat.checkSelfPermission(this, Manifest.permission.RECORD_AUDIO) != PackageManager.PERMISSION_GRANTED) {\n        return;\n    }\n\n    // Start video recording\n    recording = videoCapture.getOutput().prepareRecording(FaceDetection.this, options).withAudioEnabled().start(ContextCompat.getMainExecutor(FaceDetection.this), videoRecordEvent -&gt; {\n        if (videoRecordEvent instanceof VideoRecordEvent.Start) {\n            capture.setEnabled(true);\n            // Video recording started\n            Log.d(&quot;VideoRecording&quot;, &quot;Video recording started&quot;);\n            Toast.makeText(this, &quot;Video recording started&quot;, Toast.LENGTH_SHORT).show();\n        } else if (videoRecordEvent instanceof VideoRecordEvent.Finalize) {\n            if (!((VideoRecordEvent.Finalize) videoRecordEvent).hasError()) {\n                String msg = &quot;Video erfolgreich aufgezeichnet: &quot; + ((VideoRecordEvent.Finalize) videoRecordEvent).getOutputResults().getOutputUri();\n                Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();\n                // Video recording completed successfully\n                Log.d(&quot;VideoRecording&quot;, &quot;Video recording completed successfully&quot;);\n            } else {\n                int errorCode = ((VideoRecordEvent.Finalize) videoRecordEvent).getError();\n                if (errorCode == 8) {\n                    // Fehlercode 8 entspricht dem &quot;ERROR_SERVER_DIED&quot;-Fehler\n                    // MediaRecorder zurücksetzen und neu initialisieren\n                    if (recording != null) {\n                        recording.close();\n                        recording = null;\n                    }\n                    // Beispiel: mediaRecorder.reset(); mediaRecorder.release(); initializeMediaRecorder();\n                    Log.e(&quot;VideoRecording&quot;, &quot;MediaRecorder ERROR_SERVER_DIED&quot;);\n                    Toast.makeText(this, &quot;Error: MediaRecorder ERROR_SERVER_DIED&quot;, Toast.LENGTH_SHORT).show();\n                } else {\n                    if (recording != null) { // Check if 'recording' is null before calling close()\n                        recording.close();\n                        recording = null;\n                    }\n                    String msg = &quot;Error: &quot; + errorCode;\n                    Toast.makeText(this, msg, Toast.LENGTH_SHORT).show();\n                    // Other errors occurred during video recording\n                    Log.e(&quot;VideoRecording&quot;, &quot;Error during video recording: &quot; + errorCode);\n                }\n            }\n            capture.setImageResource(R.drawable.round_fiber_manual_record_24);\n            // After stopping the recording, start the NotesActivity\n            Intent intent = new Intent(FaceDetection.this, NotesActivity.class);\n            startActivity(intent);\n        }\n    });\n}\n\n\n\n\n\nprivate void startCamera(int cameraFacing) {\n    ListenableFuture&lt;ProcessCameraProvider&gt; cameraProviderFuture = ProcessCameraProvider.getInstance(this);\n\n    cameraProviderFuture.addListener(() -&gt; {\n        try {\n            cameraProvider = cameraProviderFuture.get();\n\n            // Set up preview\n            Preview preview = new Preview.Builder().build();\n            preview.setSurfaceProvider(previewView.getSurfaceProvider());\n\n            // Set up video capture\n            Recorder recorder = new Recorder.Builder()\n                    .setQualitySelector(QualitySelector.from(Quality.HIGHEST))\n                    .build();\n            videoCapture = VideoCapture.withOutput(recorder);\n\n            // Initialize the previewImageAnalysis\n            previewImageAnalysis = new ImageAnalysis.Builder()\n                    .setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\n                    .setTargetResolution(new Size(900, 1200))\n                    .build();\n\n            // Create an instance of BaseImage to perform face detection for preview\n            BaseImage baseImage = new BaseImage(this, textToSpeech, rootview, textView);\n\n            // Set the BaseImage instance as the analyzer for the previewImageAnalysis\n            previewImageAnalysis.setAnalyzer(ContextCompat.getMainExecutor(this), baseImage);\n\n            // Bind preview use cases to the camera lifecycle\n            cameraProvider.unbindAll();\n            cameraSelector = new CameraSelector.Builder().requireLensFacing(cameraFacing).build();\n            Camera camera = cameraProvider.bindToLifecycle(this, cameraSelector, preview, previewImageAnalysis);\n\n            // Camera for preview is now initialized\n            isCameraInitialized = true;\n        } catch (ExecutionException | InterruptedException e) {\n            e.printStackTrace();\n        }\n    }, ContextCompat.getMainExecutor(this));\n}\n\n\n\n\n\n\nprivate void renderImage() {\n    ListenableFuture&lt;ProcessCameraProvider&gt; val = ProcessCameraProvider.getInstance(this);\n\n    val.addListener(() -&gt; {\n        try {\n            ProcessCameraProvider processCameraProvider = val.get();\n            preview = new Preview.Builder().setTargetResolution(new Size(900, 1200)).build();\n\n            CameraSelector cameraSelector = new CameraSelector.Builder().requireLensFacing(CameraSelector.LENS_FACING_FRONT).build();\n\n            preview.setSurfaceProvider(previewView.getSurfaceProvider());\n\n            ImageCapture imageCapture = new ImageCapture.Builder().setCaptureMode(ImageCapture.CAPTURE_MODE_MINIMIZE_LATENCY).build();\n            ImageAnalysis imageAnalysis1 = new ImageAnalysis.Builder().setBackpressureStrategy(ImageAnalysis.STRATEGY_KEEP_ONLY_LATEST)\n                    .setTargetResolution(new Size(900, 1200)).build();\n\n            // Create an instance of BaseImage to perform face detection\n            BaseImage baseImage = new BaseImage(this, textToSpeech, rootview, textView);\n\n            // Set the BaseImage instance as the analyzer for the ImageAnalysis\n            imageAnalysis1.setAnalyzer(ContextCompat.getMainExecutor(this), baseImage);\n\n            // Bind all use cases to the camera lifecycle\n            processCameraProvider.unbindAll();\n            Camera camera = processCameraProvider.bindToLifecycle(this, cameraSelector, preview, imageCapture, imageAnalysis1);\n        } catch (ExecutionException | InterruptedException e) {\n            e.printStackTrace();\n        }\n    }, ContextCompat.getMainExecutor(this));\n}\n\n\n\n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa","spring-data"],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2917,"user_id":5151202,"display_name":"times29"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1673247975,"creation_date":1673247975,"answer_id":75054057,"question_id":75048705,"body_markdown":"Try annotating your method with `@Transactional`. Then then `Customer` won&#39;t get detached within the method.","title":"detached entity passed to persist - springboot","body":"<p>Try annotating your method with <code>@Transactional</code>. Then then <code>Customer</code> won't get detached within the method.</p>\n"},{"tags":[],"owner":{"account_id":29072593,"reputation":1,"user_id":22270528,"display_name":"Sandeep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690208398,"creation_date":1690208398,"answer_id":76755387,"question_id":75048705,"body_markdown":"This type of error arise when more then one entry found with same id (@id column value) . ","title":"detached entity passed to persist - springboot","body":"<p>This type of error arise when more then one entry found with same id (@id column value) .</p>\n"}],"owner":{"account_id":17042539,"reputation":113,"user_id":12330039,"display_name":"Jeebendu kumar Behera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":548,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":75054057,"answer_count":2,"score":2,"last_activity_date":1690208398,"creation_date":1673189387,"question_id":75048705,"body_markdown":"Sales Order save not working for existing Customer but working for new Customer\r\n\r\n```java\r\n@Entity\r\n@Table(name = &quot;sales_order&quot;)\r\n@EntityListeners(AuditingEntityListener.class)\r\npublic class SalesOrder extends Auditable&lt;String&gt;  implements Serializable {\r\n\t\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Id\r\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\t\r\n\t@OneToOne(fetch = FetchType.EAGER,cascade=CascadeType.ALL)\r\n\t@JoinColumn(name = &quot;customer_id&quot;, nullable = false)\r\n\tprivate Customer customer;\r\n\t\r\n\r\n@Entity\r\n@Table(name = &quot;customer&quot;)\r\n@EntityListeners(AuditingEntityListener.class)\r\npublic class Customer extends Auditable&lt;String&gt;  implements Serializable {\r\n\t\r\n\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Id\r\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\t\r\n\t@OneToOne(mappedBy=&quot;customer&quot;,cascade={CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\r\n    private SalesOrder salesOrder;\r\n\t\r\n```\r\n\r\n\r\n```java\r\nSalesOrder salesOrder = new SalesOrder();\r\n\t\t\tBranch branch = BranchContextHolder.getCurrentBranch();\r\n\t\t\tString nextSequense = null;\r\n\t\t\tif(salesOrderDto.getId()==null) {\r\n\t\t\t\tsalesOrder = new SalesOrder(salesOrderDto);\r\n\t\t\t\tsalesOrder.setBranch(branch);\r\n\t\t\t\tif(customerRepository.existsByPhone(salesOrderDto.getCustomer().getPhone())) {\r\n\t\t\t\t\tCustomer customer = customerRepository.findCustomerByPhone(salesOrderDto.getCustomer().getPhone());\r\n\t\t\t\t\tcustomer.setSalesOrder(salesOrder);\r\n\t\t\t\t\tsalesOrder.setCustomer(customer);\r\n\t\t\t\t}\r\n\t\t\t\tnextSequense = sequenceService.getNextSequense(branch.getId(),module.getId());\r\n\t\t\t\tsalesOrder.setUid(nextSequense);\r\n\t\t\t}\r\n\r\n//save sales order\r\nsalesOrder = salesOrderRepository.save(salesOrder);\r\n```\r\n\r\nOn save getting error:\r\n\r\n```\r\ndetached entity passed to persist: com.jee.cms.app.customer.model.Customer; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.jee.cms.app.customer.model.Customer\r\n```\r\n\r\nAnything I am missing?","title":"detached entity passed to persist - springboot","body":"<p>Sales Order save not working for existing Customer but working for new Customer</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;sales_order&quot;)\n@EntityListeners(AuditingEntityListener.class)\npublic class SalesOrder extends Auditable&lt;String&gt;  implements Serializable {\n    \n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    private Long id;\n    \n    @OneToOne(fetch = FetchType.EAGER,cascade=CascadeType.ALL)\n    @JoinColumn(name = &quot;customer_id&quot;, nullable = false)\n    private Customer customer;\n    \n\n@Entity\n@Table(name = &quot;customer&quot;)\n@EntityListeners(AuditingEntityListener.class)\npublic class Customer extends Auditable&lt;String&gt;  implements Serializable {\n    \n\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    private Long id;\n    \n    @OneToOne(mappedBy=&quot;customer&quot;,cascade={CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST,CascadeType.REFRESH})\n    private SalesOrder salesOrder;\n    \n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>SalesOrder salesOrder = new SalesOrder();\n            Branch branch = BranchContextHolder.getCurrentBranch();\n            String nextSequense = null;\n            if(salesOrderDto.getId()==null) {\n                salesOrder = new SalesOrder(salesOrderDto);\n                salesOrder.setBranch(branch);\n                if(customerRepository.existsByPhone(salesOrderDto.getCustomer().getPhone())) {\n                    Customer customer = customerRepository.findCustomerByPhone(salesOrderDto.getCustomer().getPhone());\n                    customer.setSalesOrder(salesOrder);\n                    salesOrder.setCustomer(customer);\n                }\n                nextSequense = sequenceService.getNextSequense(branch.getId(),module.getId());\n                salesOrder.setUid(nextSequense);\n            }\n\n//save sales order\nsalesOrder = salesOrderRepository.save(salesOrder);\n</code></pre>\n<p>On save getting error:</p>\n<pre><code>detached entity passed to persist: com.jee.cms.app.customer.model.Customer; nested exception is org.hibernate.PersistentObjectException: detached entity passed to persist: com.jee.cms.app.customer.model.Customer\n</code></pre>\n<p>Anything I am missing?</p>\n"},{"tags":["java","clock"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":2,"creation_date":1690207169,"post_id":76755184,"comment_id":135317310,"body_markdown":"I don&#39;t see a thread, I don&#39;t see a loop ... why exactly do you expect (parts of) your code to be executed more than once?","body":"I don&#39;t see a thread, I don&#39;t see a loop ... why exactly do you expect (parts of) your code to be executed more than once?"},{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1690207174,"post_id":76755184,"comment_id":135317312,"body_markdown":"I would recommend looking up a tutorial about loops. If you want some code to repeat more than once understanding the concept of loops is important and stackoverflow is not the right place to learn such basic knowledge.","body":"I would recommend looking up a tutorial about loops. If you want some code to repeat more than once understanding the concept of loops is important and stackoverflow is not the right place to learn such basic knowledge."},{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":0,"creation_date":1690207815,"post_id":76755184,"comment_id":135317446,"body_markdown":"The instructions don&#39;t say anything about making it loop.","body":"The instructions don&#39;t say anything about making it loop."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1690208924,"post_id":76755184,"comment_id":135317676,"body_markdown":"@001 no, they don&#39;t. They do command to: &quot;figure out the problem.&quot;","body":"@001 no, they don&#39;t. They do command to: &quot;figure out the problem.&quot;"},{"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1690215040,"post_id":76755184,"comment_id":135319039,"body_markdown":"You will find answers to your problem on StackOverflow. Please only post a question if there was nobody asking something similar before.","body":"You will find answers to your problem on StackOverflow. Please only post a question if there was nobody asking something similar before."},{"owner":{"account_id":28995898,"reputation":1,"user_id":22210588,"display_name":"Chen Liang"},"score":0,"creation_date":1690251204,"post_id":76755184,"comment_id":135323869,"body_markdown":"Sorry,I assume that I do not describe the question clearly.  Maybe the Main function is given and I CANNOT add any other statement to the component. So I wonder where to put the loop? If I put an infinite loop in the function tick(), the main function can never implenment the statement &quot;System.out.println(clock)&quot;","body":"Sorry,I assume that I do not describe the question clearly.  Maybe the Main function is given and I CANNOT add any other statement to the component. So I wonder where to put the loop? If I put an infinite loop in the function tick(), the main function can never implenment the statement &quot;System.out.println(clock)&quot;"}],"answers":[{"tags":[],"owner":{"account_id":25568801,"reputation":33,"user_id":19349516,"display_name":"Humke"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1690207522,"creation_date":1690207522,"answer_id":76755276,"question_id":76755184,"body_markdown":"It looks like you are missing some kind of loop in your main function. Maybe have a look at this source: https://www.geeksforgeeks.org/loops-in-java/\r\n\r\nBut make sure you don&#39;t build an infinite loop. You should add some kind of termination. Hope this helps!","title":"The programme I write is called Clock. I CANNOT run the clock constantly with the certain main function given(JAVA)","body":"<p>It looks like you are missing some kind of loop in your main function. Maybe have a look at this source: <a href=\"https://www.geeksforgeeks.org/loops-in-java/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/loops-in-java/</a></p>\n<p>But make sure you don't build an infinite loop. You should add some kind of termination. Hope this helps!</p>\n"}],"owner":{"account_id":28995898,"reputation":1,"user_id":22210588,"display_name":"Chen Liang"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690207890,"creation_date":1690206863,"question_id":76755184,"body_markdown":"The original question is below:\r\n\r\n&gt; You are required to complete the code of the Clock.\r\nPlease finish writing the code of the two classes, Display and Clock and then figure out the problem.\r\n&gt;\r\n&gt; Please include the following public functions in class of Clock:\r\n&gt; 1. public Clock(int hour,int minute,int second);  Initialize the time\r\n&gt; 2. public void tick(); Run the clock\r\n&gt; 3. public String toString(); Return a String in the form of &quot;hh:mm:ss&quot;\r\n&gt;\r\n&gt; Then write a class of Main which should be the same as the following Main function:\r\n&gt;\r\n&gt;```java\r\n&gt;public static void main(String[] args) {\r\n&gt;    java.util.Scanner in = new java.util.Scanner(System.in);\r\n&gt;\r\n&gt;    Clock clock = new Clock(in.nextInt(), in.nextInt(), in.nextInt());\r\n&gt;    clock.tick();\r\n&gt;\r\n&gt;    System.out.println(clock);\r\n&gt;\r\n&gt;    in.close();\r\n&gt;}\r\n&gt;```\r\n\r\nHere is my code:\r\n\r\n```java\r\npublic class Main \r\n{\r\n    public static void main(String[] args) \r\n    {\r\n        java.util.Scanner in = new java.util.Scanner(System.in);\r\n\r\n        Clock clock = new Clock(in.nextInt(), in.nextInt(), in.nextInt());\r\n        clock.tick();\r\n\r\n        System.out.println(clock);\r\n\r\n        in.close();\r\n    }\r\n}\r\n```\r\n\r\n```java    \r\nclass Display \r\n{\r\n    int value = 0; // value represent the time\r\n    int limit = 0; // limit represent the largest number in time\r\n    \r\n    public Display(int limit) \r\n    {\r\n        this.limit = limit;        \r\n    }\r\n    \r\n    public void increase() \r\n    {\r\n        value++;                   \r\n        if (value == limit) \r\n        {\r\n            value = 0;               \r\n        }\r\n    }\r\n    \r\n    public int getValue() \r\n    {\r\n        return value;\r\n    }\r\n}\r\n```\r\n\r\n```java    \r\nclass Clock  \r\n{\r\n    Display hour = new Display(24); // Assign the limit\r\n    Display minute = new Display(60);\r\n    Display second = new Display(60);\r\n    \r\n    public Clock(int x, int y, int z) { // Type in the original time\r\n       hour.value = x;\r\n       minute.value = y;\r\n       second.value = z;\r\n    }\r\n    \r\n    public void tick() { // Run the clock\r\n        second.increase();\r\n        if (second.value == 0) {\r\n            minute.increase();\r\n            if (minute.value == 0) {\r\n                hour.increase();\r\n            }\r\n        }\r\n    }\r\n    \r\n    public String toString() {\r\n        return String.format(\r\n            &quot;%02d:%02d:%02d\\n&quot;, \r\n            hour.getValue(), \r\n            minute.getValue(),      \r\n            second.getValue()\r\n        );\r\n    }\r\n}\r\n```\r\n\r\nWith the main function fixed, I find it impossible to run the clock constantly. The clock can just tick once and then stop. How to achieve the program.\r\n\r\nI expect that the clock can run constantly after initializing the time.","title":"The programme I write is called Clock. I CANNOT run the clock constantly with the certain main function given(JAVA)","body":"<p>The original question is below:</p>\n<blockquote>\n<p>You are required to complete the code of the Clock.\nPlease finish writing the code of the two classes, Display and Clock and then figure out the problem.</p>\n<p>Please include the following public functions in class of Clock:</p>\n<ol>\n<li>public Clock(int hour,int minute,int second);  Initialize the time</li>\n<li>public void tick(); Run the clock</li>\n<li>public String toString(); Return a String in the form of &quot;hh:mm:ss&quot;</li>\n</ol>\n<p>Then write a class of Main which should be the same as the following Main function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n   java.util.Scanner in = new java.util.Scanner(System.in);\n\n   Clock clock = new Clock(in.nextInt(), in.nextInt(), in.nextInt());\n   clock.tick();\n\n   System.out.println(clock);\n\n   in.close();\n}\n</code></pre>\n</blockquote>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main \n{\n    public static void main(String[] args) \n    {\n        java.util.Scanner in = new java.util.Scanner(System.in);\n\n        Clock clock = new Clock(in.nextInt(), in.nextInt(), in.nextInt());\n        clock.tick();\n\n        System.out.println(clock);\n\n        in.close();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Display \n{\n    int value = 0; // value represent the time\n    int limit = 0; // limit represent the largest number in time\n    \n    public Display(int limit) \n    {\n        this.limit = limit;        \n    }\n    \n    public void increase() \n    {\n        value++;                   \n        if (value == limit) \n        {\n            value = 0;               \n        }\n    }\n    \n    public int getValue() \n    {\n        return value;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Clock  \n{\n    Display hour = new Display(24); // Assign the limit\n    Display minute = new Display(60);\n    Display second = new Display(60);\n    \n    public Clock(int x, int y, int z) { // Type in the original time\n       hour.value = x;\n       minute.value = y;\n       second.value = z;\n    }\n    \n    public void tick() { // Run the clock\n        second.increase();\n        if (second.value == 0) {\n            minute.increase();\n            if (minute.value == 0) {\n                hour.increase();\n            }\n        }\n    }\n    \n    public String toString() {\n        return String.format(\n            &quot;%02d:%02d:%02d\\n&quot;, \n            hour.getValue(), \n            minute.getValue(),      \n            second.getValue()\n        );\n    }\n}\n</code></pre>\n<p>With the main function fixed, I find it impossible to run the clock constantly. The clock can just tick once and then stop. How to achieve the program.</p>\n<p>I expect that the clock can run constantly after initializing the time.</p>\n"},{"tags":["java","spring-boot","rest","ssl","https"],"comments":[{"owner":{"account_id":18999437,"reputation":2463,"user_id":13867124,"display_name":"AztecCodes"},"score":0,"creation_date":1690218904,"post_id":76755297,"comment_id":135319790,"body_markdown":"Please add way more information. Please edit your question and tell us something about your specific situation and problem. If you have code also post code snippets. [How To: Ask good questions](https://stackoverflow.com/help/how-to-ask)","body":"Please add way more information. Please edit your question and tell us something about your specific situation and problem. If you have code also post code snippets. <a href=\"https://stackoverflow.com/help/how-to-ask\">How To: Ask good questions</a>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690218910,"post_id":76755297,"comment_id":135319792,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."},{"owner":{"account_id":11732873,"reputation":734,"user_id":8587732,"display_name":"Vitaly Chura"},"score":0,"creation_date":1690219859,"post_id":76755297,"comment_id":135319931,"body_markdown":"What kind of scan you did exactly?","body":"What kind of scan you did exactly?"},{"owner":{"account_id":28303302,"reputation":23,"user_id":21641687,"display_name":"Jake Turner"},"score":0,"creation_date":1690260760,"post_id":76755297,"comment_id":135324615,"body_markdown":"DAST and SAST scan @VitalyChura","body":"DAST and SAST scan @VitalyChura"}],"owner":{"account_id":28303302,"reputation":23,"user_id":21641687,"display_name":"Jake Turner"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690207795,"creation_date":1690207704,"question_id":76755297,"body_markdown":"We have a JAVA Spring Boot application. On doing the scan we got this vulnerability\r\n\r\n&quot;Cookie Security: Cookie not Sent Over SSL ( 4720 )&quot;\r\n\r\nHow to fix this from the code level? How to enable the cookie encryption while returning the response in Java code? \r\n\r\nIs the decryption automatically is taken care?","title":"How to fix &quot;Cookie Security: Cookie not Sent Over SSL ( 4720 )&quot; in Java Spring Boot application?","body":"<p>We have a JAVA Spring Boot application. On doing the scan we got this vulnerability</p>\n<p>&quot;Cookie Security: Cookie not Sent Over SSL ( 4720 )&quot;</p>\n<p>How to fix this from the code level? How to enable the cookie encryption while returning the response in Java code?</p>\n<p>Is the decryption automatically is taken care?</p>\n"},{"tags":["java","lombok"],"answers":[{"tags":[],"owner":{"account_id":1223835,"reputation":75848,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"down_vote_count":0,"up_vote_count":119,"is_accepted":true,"score":119,"last_activity_date":1487723110,"creation_date":1487720115,"answer_id":42380017,"question_id":42379899,"body_markdown":"Per [the documentation for `@Builder`](https://projectlombok.org/features/Builder.html): Just define enough skeleton yourself. In particular, Lombok will generate a class `UserBuilder`, fields mirroring the `User` fields, and builder methods, and you can provide any or all of this yourself.\r\n\r\n    @Builder\r\n    public class User {\r\n        private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\r\n\r\n        private String username;\r\n\r\n        private String password;\r\n\r\n        public static class UserBuilder {\r\n            public UserBuilder password(String password) {\r\n                this.password = ENCODER.encode(password);\r\n                return this;\r\n            }\r\n        }\r\n    }","title":"Use custom setter in Lombok&#39;s builder","body":"<p>Per <a href=\"https://projectlombok.org/features/Builder.html\" rel=\"noreferrer\">the documentation for <code>@Builder</code></a>: Just define enough skeleton yourself. In particular, Lombok will generate a class <code>UserBuilder</code>, fields mirroring the <code>User</code> fields, and builder methods, and you can provide any or all of this yourself.</p>\n\n<pre><code>@Builder\npublic class User {\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\n\n    private String username;\n\n    private String password;\n\n    public static class UserBuilder {\n        public UserBuilder password(String password) {\n            this.password = ENCODER.encode(password);\n            return this;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6692704,"reputation":2426,"user_id":5161718,"display_name":"Bojan Petkovic"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1487724571,"creation_date":1487720861,"answer_id":42380149,"question_id":42379899,"body_markdown":"You are using setPassword rather than the builder&#39;s set method.\r\n\r\nHere is what worked for me:\r\n\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    \r\n    @Builder\r\n    @Data\r\n    public class User {\r\n        private String username;\r\n        private String password;\r\n    \r\n        public static class UserBuilder {\r\n            private String password;\r\n            public UserBuilder password(String password ) {\r\n                this.password =&quot;ENCRIYP &quot; +  password;\r\n                return this;\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            System.out.println(User.builder().username(&quot;This is my username&quot;).password(&quot;Password&quot;).build().toString());\r\n    \r\n        }\r\n    }\r\n\r\n\r\nThe result was: \r\n    `User(username=This is my username, password=ENCRIYP Password)`\r\n","title":"Use custom setter in Lombok&#39;s builder","body":"<p>You are using setPassword rather than the builder's set method.</p>\n\n<p>Here is what worked for me:</p>\n\n<pre><code>import lombok.Builder;\nimport lombok.Data;\n\n@Builder\n@Data\npublic class User {\n    private String username;\n    private String password;\n\n    public static class UserBuilder {\n        private String password;\n        public UserBuilder password(String password ) {\n            this.password =\"ENCRIYP \" +  password;\n            return this;\n        }\n    }\n\n    public static void main(String[] args) {\n        System.out.println(User.builder().username(\"This is my username\").password(\"Password\").build().toString());\n\n    }\n}\n</code></pre>\n\n<p>The result was: \n    <code>User(username=This is my username, password=ENCRIYP Password)</code></p>\n"},{"tags":[],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1690207502,"creation_date":1487772017,"answer_id":42393596,"question_id":42379899,"body_markdown":"I&#39;ve accepted **chrylis**&#39;s answer but for completeness, here&#39;s are some ways to minimize customization and duplication.\r\n\r\n**Custom setter and builder with static helper**\r\n\r\nA static helper can be used to share most of the *set password* functionality across the custom `User.UserBuilder::password` method and the custom `User::setPassword` method:\r\n\r\n\r\n    @Data\r\n    @Builder\r\n    public class User {\r\n        private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\r\n    \r\n        private String password = null;\r\n    \r\n        public void setPassword(String password) {\r\n            this.password = _encodePassword(password);\r\n        }\r\n        \r\n        public static class UserBuilder {\r\n            public UserBuilder password(String password) {\r\n                this.password = _encodePassword(password)\r\n                return this;\r\n            }\r\n        }\r\n\r\n        private static String _encodePassword(String password) {\r\n            Assert.notNull(password);\r\n            return ENCODER.encode(password);\r\n        }\r\n    }\r\n\r\n**Custom setter and constructor**\r\n\r\nA custom constructor can use `User::setPassword` which is invoked by the Lombok generated `User.UserBuilder::build()`:\r\n\r\n    @Data\r\n    @Builder\r\n    public class User {\r\n        private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\r\n    \r\n        private String password = null;\r\n    \r\n        User(String password) {\r\n            setPassword(password);\r\n        }\r\n\r\n        public void setPassword(String password) {\r\n            Assert.notNull(password);\r\n            this.password = ENCODER.encode(password);\r\n        }\r\n    }\r\n\r\n**Custom setter and constructor with static helper**\r\n\r\nOr, a little more elegantly, with a custom constructor and a static helper method:\r\n\r\n    @Data\r\n    @Builder\r\n    public class User {\r\n        private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\r\n    \r\n        private String password = null;\r\n    \r\n        User(String password) {\r\n            _encodePassword(password, this);\r\n        }\r\n\r\n        public void setPassword(String password) {\r\n            _encodePassword(password, this);\r\n        }\r\n\r\n        private static _encodePassword(String password, User user) {\r\n            Assert.notNull(password);\r\n            user.password = ENCODER.encode(password);\r\n        }\r\n    }\r\n","title":"Use custom setter in Lombok&#39;s builder","body":"<p>I've accepted <strong>chrylis</strong>'s answer but for completeness, here's are some ways to minimize customization and duplication.</p>\n<p><strong>Custom setter and builder with static helper</strong></p>\n<p>A static helper can be used to share most of the <em>set password</em> functionality across the custom <code>User.UserBuilder::password</code> method and the custom <code>User::setPassword</code> method:</p>\n<pre><code>@Data\n@Builder\npublic class User {\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\n\n    private String password = null;\n\n    public void setPassword(String password) {\n        this.password = _encodePassword(password);\n    }\n    \n    public static class UserBuilder {\n        public UserBuilder password(String password) {\n            this.password = _encodePassword(password)\n            return this;\n        }\n    }\n\n    private static String _encodePassword(String password) {\n        Assert.notNull(password);\n        return ENCODER.encode(password);\n    }\n}\n</code></pre>\n<p><strong>Custom setter and constructor</strong></p>\n<p>A custom constructor can use <code>User::setPassword</code> which is invoked by the Lombok generated <code>User.UserBuilder::build()</code>:</p>\n<pre><code>@Data\n@Builder\npublic class User {\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\n\n    private String password = null;\n\n    User(String password) {\n        setPassword(password);\n    }\n\n    public void setPassword(String password) {\n        Assert.notNull(password);\n        this.password = ENCODER.encode(password);\n    }\n}\n</code></pre>\n<p><strong>Custom setter and constructor with static helper</strong></p>\n<p>Or, a little more elegantly, with a custom constructor and a static helper method:</p>\n<pre><code>@Data\n@Builder\npublic class User {\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\n\n    private String password = null;\n\n    User(String password) {\n        _encodePassword(password, this);\n    }\n\n    public void setPassword(String password) {\n        _encodePassword(password, this);\n    }\n\n    private static _encodePassword(String password, User user) {\n        Assert.notNull(password);\n        user.password = ENCODER.encode(password);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2379900,"reputation":4402,"user_id":2194119,"accept_rate":76,"display_name":"Rad"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1593001424,"creation_date":1593001424,"answer_id":62554952,"question_id":42379899,"body_markdown":"Not really an answer to the question, but an edge case that made me to spend quite some time to find the issue.  \r\nIf you have `Builder` with custom setter on a field with `Builder.Default` value, the name of the field in the generated builder class is not the same as the original field. In fact you would have two fields instead of one: `password$value` and `password$set`.  \r\nNevertheless you can use them in the custom setter in this way:\r\n```\r\npublic UserBuilder password(String password) {\r\n  this.password$value = ENCODER.encode(password);\r\n  this.password$set = true;\r\n  return this;\r\n}\r\n```\r\nThe tricky part is that if you use the origianl field name, Intellij IDEA doesn&#39;t warn you about that (as if everything is fine, but of course it won&#39;t compile). Already submitted a bug report to the plugin.","title":"Use custom setter in Lombok&#39;s builder","body":"<p>Not really an answer to the question, but an edge case that made me to spend quite some time to find the issue.<br />\nIf you have <code>Builder</code> with custom setter on a field with <code>Builder.Default</code> value, the name of the field in the generated builder class is not the same as the original field. In fact you would have two fields instead of one: <code>password$value</code> and <code>password$set</code>.<br />\nNevertheless you can use them in the custom setter in this way:</p>\n<pre><code>public UserBuilder password(String password) {\n  this.password$value = ENCODER.encode(password);\n  this.password$set = true;\n  return this;\n}\n</code></pre>\n<p>The tricky part is that if you use the origianl field name, Intellij IDEA doesn't warn you about that (as if everything is fine, but of course it won't compile). Already submitted a bug report to the plugin.</p>\n"},{"tags":[],"owner":{"account_id":13368696,"reputation":75,"user_id":9647940,"display_name":"Marcus Chiu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1621454001,"creation_date":1621454001,"answer_id":67610002,"question_id":42379899,"body_markdown":"I have come across this situation at work. Below is what I&#39;ve come up with. The idea is to override Lombok&#39;s `protected User(User.UserBuilder b)` method\r\n\r\n```java\r\n@Data\r\n@Builder\r\npublic class User {\r\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\r\n\r\n    private String password;\r\n    private Integer otherField;\r\n\r\n    protected User(final User.UserBuilder&lt;?, ?&gt; b) {\r\n        setPassword(b.password);\r\n        otherField = b.otherField;\r\n    }\r\n\r\n    public void setPassword(String password) {\r\n        Assert.notNull(password);\r\n        this.password = ENCODER.encode(password);\r\n    }\r\n}\r\n```","title":"Use custom setter in Lombok&#39;s builder","body":"<p>I have come across this situation at work. Below is what I've come up with. The idea is to override Lombok's <code>protected User(User.UserBuilder b)</code> method</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Builder\npublic class User {\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\n\n    private String password;\n    private Integer otherField;\n\n    protected User(final User.UserBuilder&lt;?, ?&gt; b) {\n        setPassword(b.password);\n        otherField = b.otherField;\n    }\n\n    public void setPassword(String password) {\n        Assert.notNull(password);\n        this.password = ENCODER.encode(password);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10933061,"reputation":6811,"user_id":8035582,"accept_rate":100,"display_name":"burki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676449916,"creation_date":1676449916,"answer_id":75457157,"question_id":42379899,"body_markdown":"Just want to mention the alternative to **define the Builder on a custom constructor** instead of defining it on the class level. \r\n\r\n    @Data\r\n    public class User {\r\n        private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\r\n\r\n        private String password = null;\r\n        private Instant timestamp = Instant.now();\r\n\r\n        // The builder now calls this constructor when build() is called\r\n        @Builder\r\n        public User(String password) {\r\n            setPassword(password);\r\n        }\r\n\r\n        public void setPassword(String password) {\r\n            Assert.notNull(password);\r\n            this.password = ENCODER.encode(password);\r\n        }\r\n    }\r\n\r\nIt is quite similar to &quot;Custom setter and constructor&quot; of Jan Nielsen, but offers a bit more control. \r\n\r\n - Constructor and Builder are &quot;in sync&quot;, the Builder uses the same path to construct objects\r\n - You don&#39;t necessarily need to add all fields to the constructor\r\n - Omitted fields are not accessible in the Builder (field `timestamp` in the example)\r\n","title":"Use custom setter in Lombok&#39;s builder","body":"<p>Just want to mention the alternative to <strong>define the Builder on a custom constructor</strong> instead of defining it on the class level.</p>\n<pre><code>@Data\npublic class User {\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\n\n    private String password = null;\n    private Instant timestamp = Instant.now();\n\n    // The builder now calls this constructor when build() is called\n    @Builder\n    public User(String password) {\n        setPassword(password);\n    }\n\n    public void setPassword(String password) {\n        Assert.notNull(password);\n        this.password = ENCODER.encode(password);\n    }\n}\n</code></pre>\n<p>It is quite similar to &quot;Custom setter and constructor&quot; of Jan Nielsen, but offers a bit more control.</p>\n<ul>\n<li>Constructor and Builder are &quot;in sync&quot;, the Builder uses the same path to construct objects</li>\n<li>You don't necessarily need to add all fields to the constructor</li>\n<li>Omitted fields are not accessible in the Builder (field <code>timestamp</code> in the example)</li>\n</ul>\n"}],"owner":{"account_id":4068081,"reputation":10971,"user_id":3342253,"accept_rate":94,"display_name":"Jan Nielsen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68655,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":42380017,"answer_count":6,"score":74,"last_activity_date":1690207502,"creation_date":1487719391,"question_id":42379899,"body_markdown":"I have a custom setter in my Lombok-based POJO:\r\n\r\n    @Data\r\n    @Builder\r\n    public class User {\r\n        private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\r\n\r\n        private String password = null;\r\n\r\n        public void setPassword(String password) {\r\n            Assert.notNull(password);\r\n            this.password = ENCODER.encode(password);\r\n        }\r\n\r\nbut when I use the Lombok generated builder:\r\n\r\n    User user = User.builder()\r\n        .password(password)\r\n        .build();\r\n\r\nmy custom setter is not invoked, and so the password is not encoded. This makes me sad. \r\n\r\nMy custom setter is, of course, invoked when I use it directly:\r\n\r\n    public void changePassword(String password, User user) {\r\n        user.setPassword(password);\r\n    }\r\n\r\nWhat can I do to have Lombok&#39;s builder use my custom setter?","title":"Use custom setter in Lombok&#39;s builder","body":"<p>I have a custom setter in my Lombok-based POJO:</p>\n\n<pre><code>@Data\n@Builder\npublic class User {\n    private static final PasswordEncoder ENCODER = new BCryptPasswordEncoder();\n\n    private String password = null;\n\n    public void setPassword(String password) {\n        Assert.notNull(password);\n        this.password = ENCODER.encode(password);\n    }\n</code></pre>\n\n<p>but when I use the Lombok generated builder:</p>\n\n<pre><code>User user = User.builder()\n    .password(password)\n    .build();\n</code></pre>\n\n<p>my custom setter is not invoked, and so the password is not encoded. This makes me sad. </p>\n\n<p>My custom setter is, of course, invoked when I use it directly:</p>\n\n<pre><code>public void changePassword(String password, User user) {\n    user.setPassword(password);\n}\n</code></pre>\n\n<p>What can I do to have Lombok's builder use my custom setter?</p>\n"},{"tags":["java","html","validation","testing"],"comments":[{"owner":{"account_id":15903,"reputation":323433,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1362569370,"post_id":15244884,"comment_id":21498570,"body_markdown":"Did you have a look at [JTidy](http://jtidy.sourceforge.net/)?","body":"Did you have a look at <a href=\"http://jtidy.sourceforge.net/\" rel=\"nofollow noreferrer\">JTidy</a>?"},{"owner":{"account_id":228062,"reputation":137,"user_id":490134,"display_name":"olemartin"},"score":0,"creation_date":1362581243,"post_id":15244884,"comment_id":21505973,"body_markdown":"Yes, but it doesn&#39;t support html5","body":"Yes, but it doesn&#39;t support html5"}],"owner":{"account_id":228062,"reputation":137,"user_id":490134,"display_name":"olemartin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1690207269,"creation_date":1362566016,"question_id":15244884,"body_markdown":"I want to create a html5-validator that catches the obsolete tags and doesn&#39;t allow tags/attributes that are not currently mentioned in the working draft of html5.\r\n\r\nI have looked into validator.nu, but I am not able to get it to fail on unknown tags/attributes. I have also tried using xerces and schema-validation with a html5-schema, but this doesn&#39;t work as well as I want to.\r\n\r\nSo, my question is, have anyone created a piece of java-code that does html5-validation? Can I please have a look at it :-)","title":"html5 validation as an automatic test in Java","body":"<p>I want to create a html5-validator that catches the obsolete tags and doesn't allow tags/attributes that are not currently mentioned in the working draft of html5.</p>\n\n<p>I have looked into validator.nu, but I am not able to get it to fail on unknown tags/attributes. I have also tried using xerces and schema-validation with a html5-schema, but this doesn't work as well as I want to.</p>\n\n<p>So, my question is, have anyone created a piece of java-code that does html5-validation? Can I please have a look at it :-)</p>\n"},{"tags":["java","spring","scheduled-tasks"],"answers":[{"tags":[],"owner":{"account_id":2158882,"reputation":559,"user_id":1913504,"display_name":"Faiz Akram"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1532782049,"creation_date":1532782049,"answer_id":51571549,"question_id":51571519,"body_markdown":"You have to implement a cluster environment quartz scheduler. for example in GitHub with the database.\r\n\r\nClick here https://github.com/faizakram/Application\r\n","title":"Rows getting locked while updating the table using Task scheduler in Java","body":"<p>You have to implement a cluster environment quartz scheduler. for example in GitHub with the database.</p>\n\n<p>Click here <a href=\"https://github.com/faizakram/Application\" rel=\"nofollow noreferrer\">https://github.com/faizakram/Application</a></p>\n"}],"owner":{"account_id":3751239,"reputation":2505,"user_id":3118692,"accept_rate":53,"display_name":"Syed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690206820,"creation_date":1532781767,"question_id":51571519,"body_markdown":"I&#39;ve written a Task scheduler in Java where it calls the method for every one min. Now this application is deployed into SIT server which has 2 instances running on it. Now let me tell you the scenario which I have built.\r\n\r\n    &lt;task:scheduled-tasks scheduler=&quot;myScheduler&quot;&gt;\r\n        &lt;task:scheduled ref=&quot;myBean&quot; method=&quot;takeLunch&quot; fixed-delay=&quot;60000&quot; /&gt;\r\n    &lt;/task:scheduled-tasks&gt;\r\n \r\n    &lt;task:scheduler id=&quot;myScheduler&quot;/&gt;\r\n\r\nThe flow is \r\n\r\n1. Get the employees who are ready to take the lunch. This is the eligiblity condition.\r\n\r\n       SELECT EMP_ID FROM EMPLOYEES WHERE WORK_STATUS=&#39;COMPLETED&#39; \r\n\r\n   (Can there be a deadlock here because both instances try to fire the query at the same time?)\r\n\r\n\r\n2. I&#39;ve another table called &quot;LUNCH_STATUS&quot; where I will keep track of their lunch.\r\n\r\n       INSERT INTO LUNCH_STATUS(EMP_ID,STATUS) .....\r\n\r\n   Here all employee ids will be inserted with the status as empty.\r\n\r\n3. I will get the first employee from the LUNCH_STATUS whose status is empty and I will update in the same table as the status &quot;LUNCH IN PROGRESS&quot;\r\n\r\n4. While taking lunch, I&#39;ve some business logic, once the lunch is done, I will update the status as &quot;COMPLETED&quot;\r\n\r\n       UPDATE LUNCH_STATUS SET STATUS=&#39;COMPLETED&#39; WHERE EMP_ID  = ?\r\n\r\n5. Once this update is done, I should update the main table EMPLOYEES\r\n\r\n       UPDATE EMPLOYEES SET WORK_STATUS=&#39;WORK RESUMED&#39; WHERE EMP_ID=?\r\n\r\n   This is working fine when I run in my local machine, but not sometimes in  the SIT server. \r\n\r\nNow, the problem here is sometimes when multiple employees are eligible for taking their lunch, the application is not updating status as Lunch completed even though the process is done. Somewhere the record is getting locked. Any ideas what steps should I have considered?\r\n\r\nI&#39;m using the @Transactional annotation and the isolation property as SERIALIZABLE for all these DAO methods (INSERT, SELECT &amp; UPDATE).","title":"Rows getting locked while updating the table using Task scheduler in Java","body":"<p>I've written a Task scheduler in Java where it calls the method for every one min. Now this application is deployed into SIT server which has 2 instances running on it. Now let me tell you the scenario which I have built.</p>\n<pre><code>&lt;task:scheduled-tasks scheduler=&quot;myScheduler&quot;&gt;\n    &lt;task:scheduled ref=&quot;myBean&quot; method=&quot;takeLunch&quot; fixed-delay=&quot;60000&quot; /&gt;\n&lt;/task:scheduled-tasks&gt;\n\n&lt;task:scheduler id=&quot;myScheduler&quot;/&gt;\n</code></pre>\n<p>The flow is</p>\n<ol>\n<li><p>Get the employees who are ready to take the lunch. This is the eligiblity condition.</p>\n<pre><code>SELECT EMP_ID FROM EMPLOYEES WHERE WORK_STATUS='COMPLETED' \n</code></pre>\n<p>(Can there be a deadlock here because both instances try to fire the query at the same time?)</p>\n</li>\n<li><p>I've another table called &quot;LUNCH_STATUS&quot; where I will keep track of their lunch.</p>\n<pre><code>INSERT INTO LUNCH_STATUS(EMP_ID,STATUS) .....\n</code></pre>\n<p>Here all employee ids will be inserted with the status as empty.</p>\n</li>\n<li><p>I will get the first employee from the LUNCH_STATUS whose status is empty and I will update in the same table as the status &quot;LUNCH IN PROGRESS&quot;</p>\n</li>\n<li><p>While taking lunch, I've some business logic, once the lunch is done, I will update the status as &quot;COMPLETED&quot;</p>\n<pre><code>UPDATE LUNCH_STATUS SET STATUS='COMPLETED' WHERE EMP_ID  = ?\n</code></pre>\n</li>\n<li><p>Once this update is done, I should update the main table EMPLOYEES</p>\n<pre><code>UPDATE EMPLOYEES SET WORK_STATUS='WORK RESUMED' WHERE EMP_ID=?\n</code></pre>\n<p>This is working fine when I run in my local machine, but not sometimes in  the SIT server.</p>\n</li>\n</ol>\n<p>Now, the problem here is sometimes when multiple employees are eligible for taking their lunch, the application is not updating status as Lunch completed even though the process is done. Somewhere the record is getting locked. Any ideas what steps should I have considered?</p>\n<p>I'm using the @Transactional annotation and the isolation property as SERIALIZABLE for all these DAO methods (INSERT, SELECT &amp; UPDATE).</p>\n"},{"tags":["java","jackrabbit","jackrabbit-oak"],"answers":[{"tags":[],"owner":{"account_id":20956,"reputation":40587,"user_id":50543,"display_name":"Julian Reschke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1546949702,"creation_date":1546949702,"answer_id":54091618,"question_id":54089755,"body_markdown":"No, MemoryDocumentStore is only for testing; it doesn&#39;t persist the data at all.\r\n\r\nIf you want to use a DocumentStore, RDB and Mongo persistence are currently your only options.\r\n\r\nAre you sure that the SegmentStore is not what you need?","title":"How to implement document flavour in Oak storage?","body":"<p>No, MemoryDocumentStore is only for testing; it doesn't persist the data at all.</p>\n\n<p>If you want to use a DocumentStore, RDB and Mongo persistence are currently your only options.</p>\n\n<p>Are you sure that the SegmentStore is not what you need?</p>\n"}],"owner":{"account_id":6622954,"reputation":417,"user_id":5114012,"accept_rate":35,"display_name":"Gopi Lal"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54091618,"answer_count":1,"score":0,"last_activity_date":1690206700,"creation_date":1546943026,"question_id":54089755,"body_markdown":"I am new to jackrabbit Oak, I have been looking into documentations but not finding the right approach, I read Oak comes with two node storage flavors: **segment and document**. I understood that the segment flavor is for standalone application so I wanted to implement the document flavor implementation not MongoDB or RDS, **I wanna save my files in File System using MemoryDocumentStore**, I am assuming Using MemoryDocumentStore I will be able to save files in file system and retrieve, I am not sure if I am right ? \r\n\r\n&gt; What is the difference between segment and document implementation and how do I see the tree in Oak??\r\n\r\n","title":"How to implement document flavour in Oak storage?","body":"<p>I am new to jackrabbit Oak, I have been looking into documentations but not finding the right approach, I read Oak comes with two node storage flavors: <strong>segment and document</strong>. I understood that the segment flavor is for standalone application so I wanted to implement the document flavor implementation not MongoDB or RDS, <strong>I wanna save my files in File System using MemoryDocumentStore</strong>, I am assuming Using MemoryDocumentStore I will be able to save files in file system and retrieve, I am not sure if I am right ? </p>\n\n<blockquote>\n  <p>What is the difference between segment and document implementation and how do I see the tree in Oak??</p>\n</blockquote>\n"},{"tags":["java","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1690206561,"post_id":76755076,"comment_id":135317154,"body_markdown":"where do the entities come from? Are they already managed by the EntityManager? And (why) do you use two separate entity managers?","body":"where do the entities come from? Are they already managed by the EntityManager? And (why) do you use two separate entity managers?"},{"owner":{"account_id":21978200,"reputation":25,"user_id":16253680,"display_name":"Adrian"},"score":0,"creation_date":1690206817,"post_id":76755076,"comment_id":135317217,"body_markdown":"@cyberbrain They come from two findBy methods, entity manager in that case is just a service that redirect called method to repository","body":"@cyberbrain They come from two findBy methods, entity manager in that case is just a service that redirect called method to repository"},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1690221727,"post_id":76755076,"comment_id":135320235,"body_markdown":"Please post some actual code instead of psuedo code. Make sure that this code is in a single method that is annotated with `@Transactional`.","body":"Please post some actual code instead of psuedo code. Make sure that this code is in a single method that is annotated with <code>@Transactional</code>."}],"owner":{"account_id":21978200,"reputation":25,"user_id":16253680,"display_name":"Adrian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690205908,"creation_date":1690205908,"question_id":76755076,"body_markdown":"I have an method that operates on two separate entities that are not directly related, they are both related in @ManyToOne relation to same third entity.\r\n\r\nI save them both in same method, but only the second save is persisted to database. I found information that save() method usually is flushed to database at the exit of method which might be the issue, and using JPA saveAndFlush should fix it, but the result is same. The first save is ignored.\r\n```\r\nfirstEntity.setSomething(&quot;10&quot;);\r\nfirstEntity = firstEntityManager.save(firstEntity);\r\n//It&#39;s fine here, it prints 10\r\nSystem.out.println(firstEntity.getSomething());\r\nsecondEntity.setFlag(true);\r\nsecondEntity = secondEntityManager.save(secondEntity);\r\n//method end, first entity is not being updated in database\r\n```\r\n\r\nHow can I fix this issue?","title":"Spring boot saving separate entities in same method","body":"<p>I have an method that operates on two separate entities that are not directly related, they are both related in @ManyToOne relation to same third entity.</p>\n<p>I save them both in same method, but only the second save is persisted to database. I found information that save() method usually is flushed to database at the exit of method which might be the issue, and using JPA saveAndFlush should fix it, but the result is same. The first save is ignored.</p>\n<pre><code>firstEntity.setSomething(&quot;10&quot;);\nfirstEntity = firstEntityManager.save(firstEntity);\n//It's fine here, it prints 10\nSystem.out.println(firstEntity.getSomething());\nsecondEntity.setFlag(true);\nsecondEntity = secondEntityManager.save(secondEntity);\n//method end, first entity is not being updated in database\n</code></pre>\n<p>How can I fix this issue?</p>\n"},{"tags":["java","spring-webflux","reactive"],"comments":[{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690206431,"post_id":76755004,"comment_id":135317119,"body_markdown":"You need to print within the subscribe, otherwise the print happens before the set is called","body":"You need to print within the subscribe, otherwise the print happens before the set is called"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690206485,"post_id":76755004,"comment_id":135317133,"body_markdown":"Can you show me code implementation please?","body":"Can you show me code implementation please?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690206570,"post_id":76755004,"comment_id":135317157,"body_markdown":"Move the System.out.println up 4 lines, within the subscribe body","body":"Move the System.out.println up 4 lines, within the subscribe body"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690207885,"post_id":76755004,"comment_id":135317456,"body_markdown":"The solution works. But I need to have access to `BasicTokenResponseDto`  object instance later. How I can access this object into Java method body like the original code?","body":"The solution works. But I need to have access to <code>BasicTokenResponseDto</code>  object instance later. How I can access this object into Java method body like the original code?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690208045,"post_id":76755004,"comment_id":135317491,"body_markdown":"You didn&#39;t share your original code so I&#39;m not sure what you&#39;re referring to. Asynchronous code cannot be written the same as synchronous. Unwrapping a Mono/Flux get function creates synchronous code, and cannot be used &quot;chronologically before&quot; a setter","body":"You didn&#39;t share your original code so I&#39;m not sure what you&#39;re referring to. Asynchronous code cannot be written the same as synchronous. Unwrapping a Mono/Flux get function creates synchronous code, and cannot be used &quot;chronologically before&quot; a setter"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690208227,"post_id":76755004,"comment_id":135317532,"body_markdown":"Here it is: https://github.com/rcbandit111/gateway_reactive_feign_poc/blob/master/gateway/src/main/java/com/gateway/filters/global/AuthenticationFilter.java#L44","body":"Here it is: <a href=\"https://github.com/rcbandit111/gateway_reactive_feign_poc/blob/master/gateway/src/main/java/com/gateway/filters/global/AuthenticationFilter.java#L44\" rel=\"nofollow noreferrer\">github.com/rcbandit111/gateway_reactive_feign_poc/blob/maste&zwnj;&#8203;r/&hellip;</a>"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690208291,"post_id":76755004,"comment_id":135317548,"body_markdown":"I need to find a way `BasicTokenResponseDto token` to be used later on into the code to get a value.","body":"I need to find a way <code>BasicTokenResponseDto token</code> to be used later on into the code to get a value."},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690208299,"post_id":76755004,"comment_id":135317551,"body_markdown":"That link is the same code in the question, which doesn&#39;t work the way you want","body":"That link is the same code in the question, which doesn&#39;t work the way you want"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690208413,"post_id":76755004,"comment_id":135317565,"body_markdown":"Yes, is it possible to find some solution?","body":"Yes, is it possible to find some solution?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690208992,"post_id":76755004,"comment_id":135317690,"body_markdown":"See chaining request example https://www.baeldung.com/spring-cloud-custom-gateway-filters#3-chaining-requests-to-other-services","body":"See chaining request example <a href=\"https://www.baeldung.com/spring-cloud-custom-gateway-filters#3-chaining-requests-to-other-services\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690209097,"post_id":76755004,"comment_id":135317718,"body_markdown":"hm.. Can you show me how to implement this into my code, please?","body":"hm.. Can you show me how to implement this into my code, please?"},{"owner":{"account_id":2671330,"reputation":183376,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1690209168,"post_id":76755004,"comment_id":135317740,"body_markdown":"I don&#39;t know how to use the your clientService variable, so cannot help with that","body":"I don&#39;t know how to use the your clientService variable, so cannot help with that"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1690220060,"post_id":76755004,"comment_id":135319961,"body_markdown":"Please include the all related source code, it&#39;s impossible to answer looking just on part of it","body":"Please include the all related source code, it&#39;s impossible to answer looking just on part of it"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690233311,"post_id":76755004,"comment_id":135322112,"body_markdown":"https://github.com/rcbandit111/gateway_reactive_feign_poc/tree/master/gateway/src/main/java/com/gateway","body":"<a href=\"https://github.com/rcbandit111/gateway_reactive_feign_poc/tree/master/gateway/src/main/java/com/gateway\" rel=\"nofollow noreferrer\">github.com/rcbandit111/gateway_reactive_feign_poc/tree/maste&zwnj;&#8203;r/&hellip;</a>"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690233331,"post_id":76755004,"comment_id":135322117,"body_markdown":"This is the repository with code example","body":"This is the repository with code example"},{"owner":{"account_id":78088,"reputation":35600,"user_id":222467,"accept_rate":67,"display_name":"Igor Artamonov"},"score":0,"creation_date":1690246730,"post_id":76755004,"comment_id":135323504,"body_markdown":"@PeterPenzov that not how it works with SO actually, you need the code in the question. Otherwise how people will understand the question specifics years from now when you&#39;ll delete your external repo somehow? Also no one has a time to read the whole github repo, that&#39;s why people ask to include only a relevant part / a summary.","body":"@PeterPenzov that not how it works with SO actually, you need the code in the question. Otherwise how people will understand the question specifics years from now when you&#39;ll delete your external repo somehow? Also no one has a time to read the whole github repo, that&#39;s why people ask to include only a relevant part / a summary."},{"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"score":0,"creation_date":1690273777,"post_id":76755004,"comment_id":135326662,"body_markdown":"What are you going to do with obtained BasicTokenResponseDto? How should it be used for authentication?","body":"What are you going to do with obtained BasicTokenResponseDto? How should it be used for authentication?"},{"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"score":0,"creation_date":1690275936,"post_id":76755004,"comment_id":135327149,"body_markdown":"later on I will do a custom verification. So I need the Object payload.","body":"later on I will do a custom verification. So I need the Object payload."}],"owner":{"account_id":965625,"reputation":1524,"user_id":1103606,"accept_rate":51,"display_name":"Peter Penzov"},"comment_count":18,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690205446,"creation_date":1690205446,"question_id":76755004,"body_markdown":"I have the following code which I want to use to convert `Mono&lt;Object&gt;` to plain `Object`.\r\n\r\n    \r\n    Mono&lt;BasicTokenResponseDto&gt; response = responseMono.map(obj -&gt; {\r\n                BasicTokenResponseDto tokenResponse = new BasicTokenResponseDto();\r\n                tokenResponse.setApi_key(obj.getApi_key());\r\n                return tokenResponse;\r\n            });\r\n    \r\n    .....\r\n    \r\n    AtomicReference&lt;BasicTokenResponseDto&gt; plainJavaObject = new AtomicReference&lt;&gt;();\r\n        Mono&lt;BasicTokenResponseDto&gt; tokenMono = clientService.getJwt();\r\n        tokenMono.subscribe(transformedToken -&gt; {\r\n          plainJavaObject.set(transformedToken);\r\n        });\r\n        BasicTokenResponseDto token = plainJavaObject.get();\r\n    \r\n        System.out.println(&quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! &quot; + token.getApi_key());\r\n\r\nFull code: https://github.com/rcbandit111/gateway_reactive_feign_poc/blob/master/gateway/src/main/java/com/gateway/filters/global/AuthenticationFilter.java#L39\r\n\r\nBut the value is null. Do you know how to properly return the object value?\r\n\r\n","title":"Result from Mono&lt;Object&gt; is null","body":"<p>I have the following code which I want to use to convert <code>Mono&lt;Object&gt;</code> to plain <code>Object</code>.</p>\n<pre><code>Mono&lt;BasicTokenResponseDto&gt; response = responseMono.map(obj -&gt; {\n            BasicTokenResponseDto tokenResponse = new BasicTokenResponseDto();\n            tokenResponse.setApi_key(obj.getApi_key());\n            return tokenResponse;\n        });\n\n.....\n\nAtomicReference&lt;BasicTokenResponseDto&gt; plainJavaObject = new AtomicReference&lt;&gt;();\n    Mono&lt;BasicTokenResponseDto&gt; tokenMono = clientService.getJwt();\n    tokenMono.subscribe(transformedToken -&gt; {\n      plainJavaObject.set(transformedToken);\n    });\n    BasicTokenResponseDto token = plainJavaObject.get();\n\n    System.out.println(&quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! &quot; + token.getApi_key());\n</code></pre>\n<p>Full code: <a href=\"https://github.com/rcbandit111/gateway_reactive_feign_poc/blob/master/gateway/src/main/java/com/gateway/filters/global/AuthenticationFilter.java#L39\" rel=\"nofollow noreferrer\">https://github.com/rcbandit111/gateway_reactive_feign_poc/blob/master/gateway/src/main/java/com/gateway/filters/global/AuthenticationFilter.java#L39</a></p>\n<p>But the value is null. Do you know how to properly return the object value?</p>\n"},{"tags":["java","if-statement","java.util.scanner"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1690205458,"post_id":76754989,"comment_id":135316897,"body_markdown":"This has little to do with Scanner and all to do with, `if( Weekday ==&quot;Monday&quot;){`, how you&#39;re comparing Strings. You&#39;re using `==` which compares if the two String *references* are one and the same, which is not what you want. You want to use the `.equals(...)` or `.equalsIgnoreCase(...)` methods to check if the two Strings have the same char content in the same order. This is a fairly common new-to-Java error.","body":"This has little to do with Scanner and all to do with, <code>if( Weekday ==&quot;Monday&quot;){</code>, how you&#39;re comparing Strings. You&#39;re using <code>==</code> which compares if the two String <i>references</i> are one and the same, which is not what you want. You want to use the <code>.equals(...)</code> or <code>.equalsIgnoreCase(...)</code> methods to check if the two Strings have the same char content in the same order. This is a fairly common new-to-Java error."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":1,"creation_date":1690206419,"post_id":76754989,"comment_id":135317116,"body_markdown":"for simple comparisons (one to one) like this, a switch block might be easier. But, either way, == and === are JavaScript approaches. In Java, == compares the references of the Strings, not their values.","body":"for simple comparisons (one to one) like this, a switch block might be easier. But, either way, == and === are JavaScript approaches. In Java, == compares the references of the Strings, not their values."}],"owner":{"account_id":5462839,"reputation":1,"user_id":4344379,"display_name":"Goutham N"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1690205379,"answer_count":0,"score":0,"last_activity_date":1690205353,"creation_date":1690205353,"question_id":76754989,"body_markdown":"import java.util.Scanner;\r\n\r\n     public class decisionMaking {\r\n\r\n\tpublic static void main(String[] args) {\r\n\r\n\t\tScanner scanner = new Scanner(System.in);\r\n\t\tSystem.out.println(&quot;Please enter a weekday&quot;);\r\n\t\tString Weekday = scanner.nextLine();\r\n\t\t\r\n\t\tif( Weekday ==&quot;Monday&quot;){\r\n\t\tSystem.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\telse if( Weekday == &quot;Tuesday&quot;) {\r\n\t\t\tSystem.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\telse if (Weekday == &quot;Wednesday&quot;) {\r\n\t\t\tSystem.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\telse if( Weekday == &quot;Thursday&quot;) {\r\n\t\t\tSystem.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\telse if( Weekday == &quot;Friday&quot;) {\r\n\t\t\tSystem.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\telse if( Weekday == &quot;Satuarday&quot;) {\r\n\t\t\tSystem.out.println(&quot;Yay&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;Holiday&quot;);\r\n\t\t\t\r\n\t\t}\r\n\t\telse {\r\n\t\t\tSystem.out.println(&quot;Yay&quot; + &quot; &quot; + &quot;Sunday&quot; + &quot; &quot; + &quot;Holiday&quot;);\r\n\t\t}\r\n\r\n\t\tscanner.close();\r\n\t}\r\n\r\n\r\n}\r\n\r\neven though i gave different weekday names it is printing only &quot;Yay Sunday holiday&quot;\r\n\r\nI tried instead of scanner, declared variable value like  String Weekday = &quot; Monday&quot;\r\n\r\nThen it is working fine  and Showing like &quot; Uff its working day&quot;\r\n\r\nMay i know the reason sir\r\n\r\nMay i know way it is not working","title":"Scanner class with if else","body":"<p>import java.util.Scanner;</p>\n<pre><code> public class decisionMaking {\n\npublic static void main(String[] args) {\n\n    Scanner scanner = new Scanner(System.in);\n    System.out.println(&quot;Please enter a weekday&quot;);\n    String Weekday = scanner.nextLine();\n    \n    if( Weekday ==&quot;Monday&quot;){\n    System.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\n        \n    }\n    else if( Weekday == &quot;Tuesday&quot;) {\n        System.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\n        \n    }\n    else if (Weekday == &quot;Wednesday&quot;) {\n        System.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\n        \n    }\n    else if( Weekday == &quot;Thursday&quot;) {\n        System.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\n        \n    }\n    else if( Weekday == &quot;Friday&quot;) {\n        System.out.println(&quot;Uff&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;working day&quot;);\n        \n    }\n    else if( Weekday == &quot;Satuarday&quot;) {\n        System.out.println(&quot;Yay&quot; + &quot; &quot; + Weekday + &quot; &quot; + &quot;Holiday&quot;);\n        \n    }\n    else {\n        System.out.println(&quot;Yay&quot; + &quot; &quot; + &quot;Sunday&quot; + &quot; &quot; + &quot;Holiday&quot;);\n    }\n\n    scanner.close();\n}\n</code></pre>\n<p>}</p>\n<p>even though i gave different weekday names it is printing only &quot;Yay Sunday holiday&quot;</p>\n<p>I tried instead of scanner, declared variable value like  String Weekday = &quot; Monday&quot;</p>\n<p>Then it is working fine  and Showing like &quot; Uff its working day&quot;</p>\n<p>May i know the reason sir</p>\n<p>May i know way it is not working</p>\n"},{"tags":["java","spring","spring-boot","proxy","resttemplate"],"comments":[{"owner":{"account_id":10362317,"reputation":106,"user_id":7642429,"display_name":"Amin Nemati"},"score":0,"creation_date":1690363607,"post_id":76754846,"comment_id":135341771,"body_markdown":"What is the URL and what is the response message of 400 ?","body":"What is the URL and what is the response message of 400 ?"}],"owner":{"account_id":16584480,"reputation":121,"user_id":11984272,"display_name":"Rahul"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690205013,"creation_date":1690204223,"question_id":76754846,"body_markdown":"I am trying to access external https API via my spring boot application using RestTemplate. When I send first request then I get the correct response and after that whenever send request then I get 400 bad response error. \r\n\r\n**But when I restart my application then again only for the first request I get correct response after that 400 bad response error.**\r\n\r\n\r\n    public void getResponse(RequestBody, requestBody){\r\n    \r\n    Response response = null;\r\n    \r\n    Proxy proxy = new Proxy(Type.HTTP, new InetSocketAddress(PROXY_SERVER_HOST, PROXY_SERVER_PORT));\r\n    SimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();\r\n    requestFactory.setProxy(proxy);\r\n    \r\n    RestTemplate restTemplate = new RestTemplate(requestFactory);\r\n    restTemplate.getInterceptors().add(new BasicAuthorizationInterceptor(&quot;user&quot;, &quot;password&quot;));\r\n    response = restTemplate.postForObject(&quot;URL&quot;, requestBody, Response.class);\r\n    System.out.println(response.toString());\r\n    }\r\n\r\n\r\nHow can i resolve this issue ?\r\n","title":"How to resolve 400 error with Resttemplate in spring boot application?","body":"<p>I am trying to access external https API via my spring boot application using RestTemplate. When I send first request then I get the correct response and after that whenever send request then I get 400 bad response error.</p>\n<p><strong>But when I restart my application then again only for the first request I get correct response after that 400 bad response error.</strong></p>\n<pre><code>public void getResponse(RequestBody, requestBody){\n\nResponse response = null;\n\nProxy proxy = new Proxy(Type.HTTP, new InetSocketAddress(PROXY_SERVER_HOST, PROXY_SERVER_PORT));\nSimpleClientHttpRequestFactory requestFactory = new SimpleClientHttpRequestFactory();\nrequestFactory.setProxy(proxy);\n\nRestTemplate restTemplate = new RestTemplate(requestFactory);\nrestTemplate.getInterceptors().add(new BasicAuthorizationInterceptor(&quot;user&quot;, &quot;password&quot;));\nresponse = restTemplate.postForObject(&quot;URL&quot;, requestBody, Response.class);\nSystem.out.println(response.toString());\n}\n</code></pre>\n<p>How can i resolve this issue ?</p>\n"},{"tags":["java","algorithm","optimization","time-complexity"],"comments":[{"owner":{"account_id":8306545,"reputation":47696,"user_id":6243352,"display_name":"ggorlen"},"score":0,"creation_date":1629249626,"post_id":68825529,"comment_id":121635109,"body_markdown":"What&#39;s the specification for the code? [Find the largest difference between 2 elements](https://www.geeksforgeeks.org/maximum-difference-between-two-elements-in-an-array/)? Please edit the post to state it.","body":"What&#39;s the specification for the code? <a href=\"https://www.geeksforgeeks.org/maximum-difference-between-two-elements-in-an-array/\" rel=\"nofollow noreferrer\">Find the largest difference between 2 elements</a>? Please edit the post to state it."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1629301062,"post_id":68825529,"comment_id":121652031,"body_markdown":"Here&#39;s a O(n) approach I&#39;ve confirmed has the same result as your code.  Create a second array (`minThruArr`) the same size as the first, iterate over your array, and put the minimum value seen thus far into your new array.  This array is the min value up to that element.  Then, iterate through your initial array backwards, keeping track of the maximum value seen thus far (`maxThru`).  For each such index, subtract the min through that index from the max through that index (`maxThru - minThru[i]`).  Keep track of the maximum such value, and that is your result.","body":"Here&#39;s a O(n) approach I&#39;ve confirmed has the same result as your code.  Create a second array (<code>minThruArr</code>) the same size as the first, iterate over your array, and put the minimum value seen thus far into your new array.  This array is the min value up to that element.  Then, iterate through your initial array backwards, keeping track of the maximum value seen thus far (<code>maxThru</code>).  For each such index, subtract the min through that index from the max through that index (<code>maxThru - minThru[i]</code>).  Keep track of the maximum such value, and that is your result."},{"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":0,"creation_date":1629301122,"post_id":68825529,"comment_id":121652058,"body_markdown":"`public static int getResult(int[] array) { int[] minThruArr = new int[array.length]; int min = Integer.MAX_VALUE; for (int i = 0; i &lt; array.length; i++) { min = Math.min(min, array[i]); minThruArr[i] = min; } int result = Integer.MIN_VALUE; int maxThru = Integer.MIN_VALUE; for (int i = array.length - 1; i &gt;= 0; i--) { maxThru = Math.max(maxThru, array[i]); result = Math.max(result, maxThru - minThruArr[i]); } return result; }`","body":"<code>public static int getResult(int[] array) { int[] minThruArr = new int[array.length]; int min = Integer.MAX_VALUE; for (int i = 0; i &lt; array.length; i++) { min = Math.min(min, array[i]); minThruArr[i] = min; } int result = Integer.MIN_VALUE; int maxThru = Integer.MIN_VALUE; for (int i = array.length - 1; i &gt;= 0; i--) { maxThru = Math.max(maxThru, array[i]); result = Math.max(result, maxThru - minThruArr[i]); } return result; }</code>"}],"answers":[{"tags":[],"owner":{"account_id":22451909,"reputation":710,"user_id":16655095,"display_name":"Alex"},"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1629330162,"creation_date":1629250048,"answer_id":68825577,"question_id":68825529,"body_markdown":"&lt;del&gt;This can be done in O(n) time. Iterate through the array looking for the largest and smallest number.  At the end return the difference between them.\r\n&lt;/del&gt;\r\n\r\n----------\r\nAs you iterate, if the number is lower than the last low number, you remember the number and it&#39;s highest difference in some kind of stack or node data structure. At the end you return the highest number.","title":"How to do O(n) time for this function?","body":"<p><del>This can be done in O(n) time. Iterate through the array looking for the largest and smallest number.  At the end return the difference between them.\n</del></p>\n<hr />\n<p>As you iterate, if the number is lower than the last low number, you remember the number and it's highest difference in some kind of stack or node data structure. At the end you return the highest number.</p>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690204375,"creation_date":1690204375,"answer_id":76754869,"question_id":68825529,"body_markdown":"Here&#39;s a O(n) approach which has the same result as your code.  Create a second array (`minThruArr`) the same size as the first, iterate over your array, and put the minimum value seen thus far into your new array. This array is the min value up to that element. Then, iterate through your initial array backwards, keeping track of the maximum value seen thus far (`maxThru`). For each such index, subtract the min through that index from the max through that index (`maxThru - minThru[i]`). Keep track of the maximum such value, and that is your result.\r\n\r\n```lang-java\r\npublic static int getResult(int[] array) {\r\n    int[] minThruArr = new int[array.length];\r\n    int min = Integer.MAX_VALUE;\r\n    for (int i = 0; i &lt; array.length; i++) {\r\n        min = Math.min(min, array[i]);\r\n        minThruArr[i] = min;\r\n    }\r\n    int result = Integer.MIN_VALUE;\r\n    int maxThru = Integer.MIN_VALUE;\r\n    for (int i = array.length - 1; i &gt;= 0; i--) {\r\n        maxThru = Math.max(maxThru, array[i]);\r\n        result = Math.max(result, maxThru - minThruArr[i]);\r\n    }\r\n    return result;\r\n}\r\n```","title":"How to do O(n) time for this function?","body":"<p>Here's a O(n) approach which has the same result as your code.  Create a second array (<code>minThruArr</code>) the same size as the first, iterate over your array, and put the minimum value seen thus far into your new array. This array is the min value up to that element. Then, iterate through your initial array backwards, keeping track of the maximum value seen thus far (<code>maxThru</code>). For each such index, subtract the min through that index from the max through that index (<code>maxThru - minThru[i]</code>). Keep track of the maximum such value, and that is your result.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static int getResult(int[] array) {\n    int[] minThruArr = new int[array.length];\n    int min = Integer.MAX_VALUE;\n    for (int i = 0; i &lt; array.length; i++) {\n        min = Math.min(min, array[i]);\n        minThruArr[i] = min;\n    }\n    int result = Integer.MIN_VALUE;\n    int maxThru = Integer.MIN_VALUE;\n    for (int i = array.length - 1; i &gt;= 0; i--) {\n        maxThru = Math.max(maxThru, array[i]);\n        result = Math.max(result, maxThru - minThruArr[i]);\n    }\n    return result;\n}\n</code></pre>\n"}],"owner":{"account_id":8176800,"reputation":3,"user_id":6279152,"display_name":"Enes K&#246;rhan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":68825577,"answer_count":2,"score":-3,"last_activity_date":1690204375,"creation_date":1629249553,"question_id":68825529,"body_markdown":"I have a array. This array contains values of a stock. \r\n\r\nFor example;\r\n\r\n0. Index -&gt; First Day\r\n1. Index -&gt; 1. Day\r\n2. Index -&gt; 2. Day\r\n.\r\n.\r\n.\r\nn. Index -&gt; n. Day\r\n\r\nAnd This function should be calculate highest profit. Don&#39;t forget, It can be bought first and then sold. The day of purchase must be before the day of sale.\r\n\r\n\r\nI am trying find to best solution for this function. Can it be O(n) time. Now, this function&#39;s time complexity is O(n^2).\r\n\r\n        public static int getResult(int[] array) {\r\n        int result = Integer.MIN_VALUE;\r\n        for (int i = 0; i &lt; array.length; i++) {\r\n            for (int j = i; j &lt; array.length; j++) {\r\n                int diff = array[j] - array[i];\r\n                if (diff &gt; result) {\r\n                    result = diff;\r\n                }\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }","title":"How to do O(n) time for this function?","body":"<p>I have a array. This array contains values of a stock.</p>\n<p>For example;</p>\n<ol start=\"0\">\n<li>Index -&gt; First Day</li>\n<li>Index -&gt; 1. Day</li>\n<li>Index -&gt; 2. Day\n.\n.\n.\nn. Index -&gt; n. Day</li>\n</ol>\n<p>And This function should be calculate highest profit. Don't forget, It can be bought first and then sold. The day of purchase must be before the day of sale.</p>\n<p>I am trying find to best solution for this function. Can it be O(n) time. Now, this function's time complexity is O(n^2).</p>\n<pre><code>    public static int getResult(int[] array) {\n    int result = Integer.MIN_VALUE;\n    for (int i = 0; i &lt; array.length; i++) {\n        for (int j = i; j &lt; array.length; j++) {\n            int diff = array[j] - array[i];\n            if (diff &gt; result) {\n                result = diff;\n            }\n        }\n    }\n\n    return result;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","tomcat8"],"comments":[{"owner":{"account_id":11328771,"reputation":61,"user_id":8306878,"display_name":"Med Mahdi Maarouf"},"score":0,"creation_date":1690204739,"post_id":76754790,"comment_id":135316727,"body_markdown":"You need to add default main entry class constructor. ( MainApplication.java )","body":"You need to add default main entry class constructor. ( MainApplication.java )"},{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1690205177,"post_id":76754790,"comment_id":135316824,"body_markdown":"&lt;start-class&gt;com.baeldung.DemoApplication&lt;/start-class&gt; I added it but it did not work.","body":"&lt;start-class&gt;com.baeldung.DemoApplication&lt;/start-class&gt; I added it but it did not work."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1690209324,"post_id":76754790,"comment_id":135317771,"body_markdown":"Spring Boot 2.7 doesn&#39;t support JakartaEE and you included JakartaEE api version of the servlet api.","body":"Spring Boot 2.7 doesn&#39;t support JakartaEE and you included JakartaEE api version of the servlet api."},{"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"score":0,"creation_date":1690259285,"post_id":76754790,"comment_id":135324497,"body_markdown":"I added it. &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt; but it did not work.","body":"I added it. &lt;dependency&gt;             &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;             &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;             &lt;version&gt;6.0.0&lt;/version&gt;             &lt;scope&gt;provided&lt;/scope&gt;         &lt;/dependency&gt; but it did not work."}],"owner":{"account_id":3564480,"reputation":1938,"user_id":2976424,"display_name":"Kumaresan Perumal"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690203793,"creation_date":1690203793,"question_id":76754790,"body_markdown":"I am using java 1.8 and spring boot 2.7.14 and tomcat 8.5. i package as war. i deploy it in tomcat webapps. but I am getting below error. please help me with it.\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;2.7.14&lt;/version&gt;\r\n    \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;test2&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;name&gt;test2&lt;/name&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;1.8&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.13.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.13.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;6.0.0&lt;/version&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n                &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\r\n                &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\r\n            &lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;  \r\n\r\n   \r\n\r\n Application run failed\r\n    \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springApplication&#39;: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921) ~[spring-context-5.3.29.jar:5.3.29]\r\n            at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.29.jar:5.3.29]\r\n            at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.14.jar:2.7.14]\r\n            at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.14.jar:2.7.14]\r\n            at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.14.jar:2.7.14]\r\n            at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.14.jar:2.7.14]\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175) ~[spring-boot-2.7.14.jar:2.7.14]\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155) ~[spring-boot-2.7.14.jar:2.7.14]\r\n            at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97) ~[spring-boot-2.7.14.jar:2.7.14]\r\n            at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174) ~[spring-web-5.3.29.jar:5.3.29]\r\n            at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4925) ~[catalina.jar:8.5.91]\r\n            at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[catalina.jar:8.5.91]\r\n            at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:710) ~[catalina.jar:8.5.91]\r\n            at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:687) ~[catalina.jar:8.5.91]\r\n            at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661) ~[catalina.jar:8.5.91]\r\n            at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016) ~[catalina.jar:8.5.91]\r\n            at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903) ~[catalina.jar:8.5.91]\r\n            at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\r\n            at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\r\n            at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\r\n            at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\r\n            at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\r\n    Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n            at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:83) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            ... 30 common frames omitted\r\n    Caused by: java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n            at java.base/java.lang.Class.getConstructor0(Class.java:3349) ~[na:na]\r\n            at java.base/java.lang.Class.getDeclaredConstructor(Class.java:2553) ~[na:na]\r\n            at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:78) ~[spring-beans-5.3.29.jar:5.3.29]\r\n            ... 31 common frames omitted\r\n    \r\n    24-Jul-2023 18:29:10.425 SEVERE [localhost-startStop-1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start:\r\n            org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/test2-0.0.1-SNAPSHOT]]\r\n                    at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n                    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n                    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:710)\r\n                    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:687)\r\n                    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\r\n                    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016)\r\n                    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903)\r\n                    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n                    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n                    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n                    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n                    at java.base/java.lang.Thread.run(Thread.java:834)\r\n            Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springApplication&#39;: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n                    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n                    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n                    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n                    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n                    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n                    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)\r\n                    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n                    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n                    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\r\n                    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n                    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\r\n                    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n                    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n                    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n                    at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n                    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4925)\r\n                    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n                    ... 10 more\r\n            Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n                    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:83)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326)\r\n                    ... 30 more\r\n            Caused by: java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n                    at java.base/java.lang.Class.getConstructor0(Class.java:3349)\r\n                    at java.base/java.lang.Class.getDeclaredConstructor(Class.java:2553)\r\n                    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:78)\r\n                    ... 31 more\r\n    24-Jul-2023 18:29:10.427 SEVERE [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [C:\\Users\\kumarper\\Documents\\apache-tomcat-8.5.91-windows-x64\\apache-tomcat-8.5.91\\webapps\\test2-0.0.1-SNAPSHOT.war]\r\n            java.lang.IllegalStateException: Error starting child\r\n                    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:714)\r\n                    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:687)\r\n                    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\r\n                    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016)\r\n                    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903)\r\n                    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\r\n                    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\r\n                    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\r\n                    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\r\n                    at java.base/java.lang.Thread.run(Thread.java:834)\r\n            Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/test2-0.0.1-SNAPSHOT]]\r\n                    at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\r\n                    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\r\n                    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:710)\r\n                    ... 9 more\r\n            Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;springApplication&#39;: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\r\n                    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\r\n                    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\r\n                    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\r\n                    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\r\n                    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\r\n                    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)\r\n                    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\r\n                    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\r\n                    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\r\n                    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\n                    at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\r\n                    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\r\n                    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\r\n                    at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\r\n                    at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\r\n                    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4925)\r\n                    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n                    ... 10 more\r\n            Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n                    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:83)\r\n                    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326)\r\n                    ... 30 more\r\n            Caused by: java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\r\n                    at java.base/java.lang.Class.getConstructor0(Class.java:3349)\r\n                    at java.base/java.lang.Class.getDeclaredConstructor(Class.java:2553)\r\n                    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:78)\r\n                    ... 31 more","title":"Caused by: java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()","body":"<p>I am using java 1.8 and spring boot 2.7.14 and tomcat 8.5. i package as war. i deploy it in tomcat webapps. but I am getting below error. please help me with it.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.14&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;test2&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;test2&lt;/name&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;1.8&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.13.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.13.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n            &lt;version&gt;6.0.0&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;  \n</code></pre>\n<p>Application run failed</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springApplication': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921) ~[spring-context-5.3.29.jar:5.3.29]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583) ~[spring-context-5.3.29.jar:5.3.29]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.14.jar:2.7.14]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731) ~[spring-boot-2.7.14.jar:2.7.14]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.14.jar:2.7.14]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:307) ~[spring-boot-2.7.14.jar:2.7.14]\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175) ~[spring-boot-2.7.14.jar:2.7.14]\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155) ~[spring-boot-2.7.14.jar:2.7.14]\n        at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97) ~[spring-boot-2.7.14.jar:2.7.14]\n        at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174) ~[spring-web-5.3.29.jar:5.3.29]\n        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4925) ~[catalina.jar:8.5.91]\n        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183) ~[catalina.jar:8.5.91]\n        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:710) ~[catalina.jar:8.5.91]\n        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:687) ~[catalina.jar:8.5.91]\n        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661) ~[catalina.jar:8.5.91]\n        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016) ~[catalina.jar:8.5.91]\n        at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903) ~[catalina.jar:8.5.91]\n        at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515) ~[na:na]\n        at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128) ~[na:na]\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628) ~[na:na]\n        at java.base/java.lang.Thread.run(Thread.java:834) ~[na:na]\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:83) ~[spring-beans-5.3.29.jar:5.3.29]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326) ~[spring-beans-5.3.29.jar:5.3.29]\n        ... 30 common frames omitted\nCaused by: java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n        at java.base/java.lang.Class.getConstructor0(Class.java:3349) ~[na:na]\n        at java.base/java.lang.Class.getDeclaredConstructor(Class.java:2553) ~[na:na]\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:78) ~[spring-beans-5.3.29.jar:5.3.29]\n        ... 31 common frames omitted\n\n24-Jul-2023 18:29:10.425 SEVERE [localhost-startStop-1] org.apache.catalina.core.ContainerBase.addChildInternal ContainerBase.addChild: start:\n        org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/test2-0.0.1-SNAPSHOT]]\n                at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n                at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:710)\n                at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:687)\n                at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\n                at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016)\n                at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903)\n                at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n                at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n                at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n                at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n                at java.base/java.lang.Thread.run(Thread.java:834)\n        Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springApplication': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n                at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n                at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n                at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)\n                at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n                at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n                at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\n                at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n                at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n                at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n                at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4925)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n                ... 10 more\n        Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n                at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:83)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326)\n                ... 30 more\n        Caused by: java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n                at java.base/java.lang.Class.getConstructor0(Class.java:3349)\n                at java.base/java.lang.Class.getDeclaredConstructor(Class.java:2553)\n                at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:78)\n                ... 31 more\n24-Jul-2023 18:29:10.427 SEVERE [localhost-startStop-1] org.apache.catalina.startup.HostConfig.deployWAR Error deploying web application archive [C:\\Users\\kumarper\\Documents\\apache-tomcat-8.5.91-windows-x64\\apache-tomcat-8.5.91\\webapps\\test2-0.0.1-SNAPSHOT.war]\n        java.lang.IllegalStateException: Error starting child\n                at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:714)\n                at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:687)\n                at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:661)\n                at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1016)\n                at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1903)\n                at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:515)\n                at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)\n                at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n                at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n                at java.base/java.lang.Thread.run(Thread.java:834)\n        Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/test2-0.0.1-SNAPSHOT]]\n                at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:198)\n                at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:710)\n                ... 9 more\n        Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'springApplication': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1334)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:582)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n                at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n                at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n                at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n                at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n                at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n                at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:921)\n                at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n                at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n                at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:731)\n                at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n                at org.springframework.boot.SpringApplication.run(SpringApplication.java:307)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run(SpringBootServletInitializer.java:175)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext(SpringBootServletInitializer.java:155)\n                at org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup(SpringBootServletInitializer.java:97)\n                at org.springframework.web.SpringServletContainerInitializer.onStartup(SpringServletContainerInitializer.java:174)\n                at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:4925)\n                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n                ... 10 more\n        Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.SpringApplication]: No default constructor found; nested exception is java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n                at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:83)\n                at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1326)\n                ... 30 more\n        Caused by: java.lang.NoSuchMethodException: org.springframework.boot.SpringApplication.&lt;init&gt;()\n                at java.base/java.lang.Class.getConstructor0(Class.java:3349)\n                at java.base/java.lang.Class.getDeclaredConstructor(Class.java:2553)\n                at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:78)\n                ... 31 more\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":28145216,"reputation":1,"user_id":21507631,"display_name":"Lehlohonolo Sehako"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690203768,"creation_date":1690199222,"answer_id":76754172,"question_id":74403104,"body_markdown":"I had this issue and I managed to resolve it after close to 4 hours of fighting.\r\nIt seems like the issue was with the @Test annotation, I was not using the one provided by jupiter, but rather the one below.\r\n\r\n    import org.junit.Test;\r\n\r\nIt worked when I changed it to.\r\n\r\n    import org.junit.jupiter.api.Test;\r\n\r\nI hope this helps.","title":"Cannot invoke &quot;com.company.restapi.dal.AssignmentRepository.findAll()&quot; because &quot;this.assignmentRepository&quot; is null","body":"<p>I had this issue and I managed to resolve it after close to 4 hours of fighting.\nIt seems like the issue was with the @Test annotation, I was not using the one provided by jupiter, but rather the one below.</p>\n<pre><code>import org.junit.Test;\n</code></pre>\n<p>It worked when I changed it to.</p>\n<pre><code>import org.junit.jupiter.api.Test;\n</code></pre>\n<p>I hope this helps.</p>\n"}],"owner":{"account_id":14049866,"reputation":123,"user_id":10148986,"display_name":"Vercors"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":112,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690203768,"creation_date":1668172597,"question_id":74403104,"body_markdown":"I&#39;m trying to create an integration test for my ```AssignmentRepository```. However the AutoWiring is not working.\r\n\r\nCode (```AssignmentRepositoryTest```):\r\n```\r\n\r\n@ActiveProfiles(&quot;test&quot;)\r\n@ExtendWith(SpringExtension.class)\r\n@SpringBootTest(classes = RestapiApplication.class, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\r\n\r\npublic class AssignmentRepositoryTest extends ContainerEnvironment {\r\n    @Autowired\r\n    private AssignmentRepository assignmentRepository;\r\n\r\n    @Test\r\n    public void When_GetAssignments_Expect_EmptyList() {\r\n        List&lt;Assignment&gt; list = (List&lt;Assignment&gt;) assignmentRepository.findAll();\r\n        assertEquals(0, list.size());\r\n    }\r\n\r\n}\r\n```\r\n\r\nCode of ```AssignmentRepository```:\r\n```\r\n@Repository\r\npublic interface AssignmentRepository extends CrudRepository&lt;Assignment, Integer&gt; {\r\n    List&lt;Assignment&gt; findAllByUserId(@NotNull(message = &quot;No userId given&quot;) String userId);\r\n\r\n}\r\n```\r\n\r\nI get the following error: java.lang.NullPointerException: Cannot invoke &quot;com.company.restapi.dal.AssignmentRepository.findAll()&quot; because &quot;this.assignmentRepository&quot; is null\r\n\r\nI&#39;m using Java with Spring Boot, Spring Boot test &amp; Testcontainers.","title":"Cannot invoke &quot;com.company.restapi.dal.AssignmentRepository.findAll()&quot; because &quot;this.assignmentRepository&quot; is null","body":"<p>I'm trying to create an integration test for my <code>AssignmentRepository</code>. However the AutoWiring is not working.</p>\n<p>Code (<code>AssignmentRepositoryTest</code>):</p>\n<pre><code>\n@ActiveProfiles(&quot;test&quot;)\n@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = RestapiApplication.class, webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n\npublic class AssignmentRepositoryTest extends ContainerEnvironment {\n    @Autowired\n    private AssignmentRepository assignmentRepository;\n\n    @Test\n    public void When_GetAssignments_Expect_EmptyList() {\n        List&lt;Assignment&gt; list = (List&lt;Assignment&gt;) assignmentRepository.findAll();\n        assertEquals(0, list.size());\n    }\n\n}\n</code></pre>\n<p>Code of <code>AssignmentRepository</code>:</p>\n<pre><code>@Repository\npublic interface AssignmentRepository extends CrudRepository&lt;Assignment, Integer&gt; {\n    List&lt;Assignment&gt; findAllByUserId(@NotNull(message = &quot;No userId given&quot;) String userId);\n\n}\n</code></pre>\n<p>I get the following error: java.lang.NullPointerException: Cannot invoke &quot;com.company.restapi.dal.AssignmentRepository.findAll()&quot; because &quot;this.assignmentRepository&quot; is null</p>\n<p>I'm using Java with Spring Boot, Spring Boot test &amp; Testcontainers.</p>\n"},{"tags":["python","java","xml","parsing","talend"],"owner":{"account_id":10539791,"reputation":3,"user_id":7766314,"display_name":"aboude"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690203725,"creation_date":1690203725,"question_id":76754777,"body_markdown":"I am trying to get the data lineage of all the tables in our database automatically through a script. I found the .item files in talend which I guess are the xml files that describe the flow of a talend job.\r\n\r\nHow would I parse the file effectively so I get each data source (from a tOracleInput or tFileExcelInput) that went into inserting into an output table (tOracleOutput)?\r\n\r\nI&#39;ve tried reading the file and trying to wrap my head around a way to do it but I am blanking.","title":"How can I find the data lineage from a &quot;.item&quot; file in Talend Studio?","body":"<p>I am trying to get the data lineage of all the tables in our database automatically through a script. I found the .item files in talend which I guess are the xml files that describe the flow of a talend job.</p>\n<p>How would I parse the file effectively so I get each data source (from a tOracleInput or tFileExcelInput) that went into inserting into an output table (tOracleOutput)?</p>\n<p>I've tried reading the file and trying to wrap my head around a way to do it but I am blanking.</p>\n"},{"tags":["java","jackson","lombok","jackson-databind"],"comments":[{"owner":{"account_id":13402055,"reputation":2947,"user_id":9671280,"display_name":"Traycho Ivanov"},"score":0,"creation_date":1596835783,"post_id":63309223,"comment_id":111949039,"body_markdown":"Did you try adding @NoArgsConstructor ?\n\nIf it does not work check this one https://stackoverflow.com/questions/51464720/lombok-1-18-0-and-jackson-2-9-6-not-working-together","body":"Did you try adding @NoArgsConstructor ?  If it does not work check this one <a href=\"https://stackoverflow.com/questions/51464720/lombok-1-18-0-and-jackson-2-9-6-not-working-together\" title=\"lombok 1 18 0 and jackson 2 9 6 not working together\">stackoverflow.com/questions/51464720/&hellip;</a>"},{"owner":{"account_id":2323120,"reputation":10362,"user_id":2038257,"accept_rate":66,"display_name":"Marco Dinatsoli"},"score":0,"creation_date":1596836959,"post_id":63309223,"comment_id":111949356,"body_markdown":"@TraychoIvanov I don&#39;t want the no args constructor. My class is final and all its fields are final and must be declared in the initiation phase (constructor)","body":"@TraychoIvanov I don&#39;t want the no args constructor. My class is final and all its fields are final and must be declared in the initiation phase (constructor)"},{"owner":{"account_id":13402055,"reputation":2947,"user_id":9671280,"display_name":"Traycho Ivanov"},"score":0,"creation_date":1596837344,"post_id":63309223,"comment_id":111949457,"body_markdown":"In this case you need this approach  with `@JsonDeserialize` , here there is a good example https://stackoverflow.com/a/48801237/9671280","body":"In this case you need this approach  with <code>@JsonDeserialize</code> , here there is a good example <a href=\"https://stackoverflow.com/a/48801237/9671280\">stackoverflow.com/a/48801237/9671280</a>"},{"owner":{"account_id":2323120,"reputation":10362,"user_id":2038257,"accept_rate":66,"display_name":"Marco Dinatsoli"},"score":0,"creation_date":1596838047,"post_id":63309223,"comment_id":111949635,"body_markdown":"@TraychoIvanov the whole idea of mixin is to avoid adding Jackson annotation in your POJO so I&#39;d prefer to know why my mix is not working.","body":"@TraychoIvanov the whole idea of mixin is to avoid adding Jackson annotation in your POJO so I&#39;d prefer to know why my mix is not working."},{"owner":{"account_id":13402055,"reputation":2947,"user_id":9671280,"display_name":"Traycho Ivanov"},"score":0,"creation_date":1596838760,"post_id":63309223,"comment_id":111949838,"body_markdown":"@Marcoo this is pure lombok issue, believe me or not the once chance to solve it by testing the latest jackson versions otherwise you need to accept the compromise.","body":"@Marcoo this is pure lombok issue, believe me or not the once chance to solve it by testing the latest jackson versions otherwise you need to accept the compromise."},{"owner":{"account_id":2323120,"reputation":10362,"user_id":2038257,"accept_rate":66,"display_name":"Marco Dinatsoli"},"score":0,"creation_date":1596839247,"post_id":63309223,"comment_id":111949938,"body_markdown":"@TraychoIvanov I found the solution :) (no compromise on POJO being clean)","body":"@TraychoIvanov I found the solution :) (no compromise on POJO being clean)"},{"owner":{"account_id":13402055,"reputation":2947,"user_id":9671280,"display_name":"Traycho Ivanov"},"score":1,"creation_date":1596839454,"post_id":63309223,"comment_id":111949989,"body_markdown":"Does this answer your question? [Lombok 1.18.0 and Jackson 2.9.6 not working together](https://stackoverflow.com/questions/51464720/lombok-1-18-0-and-jackson-2-9-6-not-working-together)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/51464720/lombok-1-18-0-and-jackson-2-9-6-not-working-together\">Lombok 1.18.0 and Jackson 2.9.6 not working together</a>"}],"answers":[{"tags":[],"owner":{"account_id":2323120,"reputation":10362,"user_id":2038257,"accept_rate":66,"display_name":"Marco Dinatsoli"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1596839215,"creation_date":1596839215,"answer_id":63309883,"question_id":63309223,"body_markdown":"I found the answer.\r\n\r\nAdd lombok.config file with content:\r\n\r\n    lombok.anyConstructor.addConstructorProperties=true","title":"Jackson deserialization of a Lombok @Builder class using a mixin is not working","body":"<p>I found the answer.</p>\n<p>Add lombok.config file with content:</p>\n<pre><code>lombok.anyConstructor.addConstructorProperties=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1119690,"reputation":15788,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690203685,"creation_date":1628885623,"answer_id":68777929,"question_id":63309223,"body_markdown":"The issue here is that Jackson expects a no-argument constructor or some other configured way of creating the object.  However, because of the `@Builder` annotation on `A`, the no-argument constructor is not present, only the Lombok-generated all-argument constructor `A(int id, String name, String lastName)`.\r\n\r\nAs of Lombok v1.18.14, the [`@Jacksonized`](https://projectlombok.org/features/experimental/Jacksonized) annotation can be added to the class with the `@Builder` annotation, which automatically configures the builder to be used for Jackson deserialization.\r\n\r\n```lang-java\r\n@Jacksonized\r\n@Builder\r\n@Value\r\npublic class A {\r\n    int id;\r\n    String name;\r\n    @NonNull String lastName;\r\n}\r\n```\r\n\r\nThe Lombok [documentation](https://projectlombok.org/features/experimental/Jacksonized) for `@Jacksonized` describes this annotation in more detail:\r\n\r\n&gt; The `@Jacksonized` annotation is an add-on annotation for `@Builder` and `@SuperBuilder`. It automatically configures the generated builder class to be used by [Jackson](https://github.com/FasterXML/jackson)&#39;s deserialization. It only has an effect if present at a context where there is also a `@Builder` or a `@SuperBuilder`; a warning is emitted otherwise.\r\n&gt;\r\n&gt; [...]\r\n&gt;\r\n&gt; In particular, the annotation does the following:\r\n&gt;\r\n&gt; * Configure Jackson to use the builder for deserialization using `@JsonDeserialize(builder=_Foobar_._Foobar_Builder[Impl].class))` on the class (where _Foobar_ is the name of the annotated class, and `Impl` is added for `@SuperBuilder`). (An error is emitted if such an annotation already exists.)\r\n&gt; * Copy Jackson-related configuration annotations (like `@JsonIgnoreProperties`) from the class to the builder class. This is necessary so that Jackson recognizes them when using the builder.\r\n&gt; * Insert `@JsonPOJOBuilder(withPrefix=&quot;&quot;)` on the generated builder class to override Jackson&#39;s default prefix &quot;with&quot;. If you configured a different prefix in lombok using `setterPrefix`, this value is used. If you changed the name of the `build()` method using using `buildMethodName`, this is also made known to Jackson.\r\n&gt; * For `@SuperBuilder`, make the builder implementation class package-private.\r\n\r\n---\r\n\r\nNote: This issue has nothing to do with the usage of a mixin, which can be verified by moving Jackson configuration from the mixin to the class itself and observing that the issue is still present.","title":"Jackson deserialization of a Lombok @Builder class using a mixin is not working","body":"<p>The issue here is that Jackson expects a no-argument constructor or some other configured way of creating the object.  However, because of the <code>@Builder</code> annotation on <code>A</code>, the no-argument constructor is not present, only the Lombok-generated all-argument constructor <code>A(int id, String name, String lastName)</code>.</p>\n<p>As of Lombok v1.18.14, the <a href=\"https://projectlombok.org/features/experimental/Jacksonized\" rel=\"nofollow noreferrer\"><code>@Jacksonized</code></a> annotation can be added to the class with the <code>@Builder</code> annotation, which automatically configures the builder to be used for Jackson deserialization.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Jacksonized\n@Builder\n@Value\npublic class A {\n    int id;\n    String name;\n    @NonNull String lastName;\n}\n</code></pre>\n<p>The Lombok <a href=\"https://projectlombok.org/features/experimental/Jacksonized\" rel=\"nofollow noreferrer\">documentation</a> for <code>@Jacksonized</code> describes this annotation in more detail:</p>\n<blockquote>\n<p>The <code>@Jacksonized</code> annotation is an add-on annotation for <code>@Builder</code> and <code>@SuperBuilder</code>. It automatically configures the generated builder class to be used by <a href=\"https://github.com/FasterXML/jackson\" rel=\"nofollow noreferrer\">Jackson</a>'s deserialization. It only has an effect if present at a context where there is also a <code>@Builder</code> or a <code>@SuperBuilder</code>; a warning is emitted otherwise.</p>\n<p>[...]</p>\n<p>In particular, the annotation does the following:</p>\n<ul>\n<li>Configure Jackson to use the builder for deserialization using <code>@JsonDeserialize(builder=_Foobar_._Foobar_Builder[Impl].class))</code> on the class (where <em>Foobar</em> is the name of the annotated class, and <code>Impl</code> is added for <code>@SuperBuilder</code>). (An error is emitted if such an annotation already exists.)</li>\n<li>Copy Jackson-related configuration annotations (like <code>@JsonIgnoreProperties</code>) from the class to the builder class. This is necessary so that Jackson recognizes them when using the builder.</li>\n<li>Insert <code>@JsonPOJOBuilder(withPrefix=&quot;&quot;)</code> on the generated builder class to override Jackson's default prefix &quot;with&quot;. If you configured a different prefix in lombok using <code>setterPrefix</code>, this value is used. If you changed the name of the <code>build()</code> method using using <code>buildMethodName</code>, this is also made known to Jackson.</li>\n<li>For <code>@SuperBuilder</code>, make the builder implementation class package-private.</li>\n</ul>\n</blockquote>\n<hr />\n<p>Note: This issue has nothing to do with the usage of a mixin, which can be verified by moving Jackson configuration from the mixin to the class itself and observing that the issue is still present.</p>\n"}],"owner":{"account_id":2323120,"reputation":10362,"user_id":2038257,"accept_rate":66,"display_name":"Marco Dinatsoli"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2436,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1690203685,"creation_date":1596834878,"question_id":63309223,"body_markdown":"This is my class:\r\n\r\n    @Builder\r\n    @Value\r\n    public class A {\r\n        int id;\r\n        String name;\r\n        @NonNull String lastName;\r\n    }\r\n\r\nThe Lombok `@Builder` will add the all args constructor.\r\n\r\nI need to deserialise a string into a POJO object.\r\n\r\nI created the following Jackson mixin containing all three properties:\r\n\r\n    public abstract class AMixin {\r\n        public AMixin(@JsonProperty(&quot;name&quot;) String name,\r\n                      @JsonProperty(&quot;id&quot;) int id,\r\n                      @JsonProperty(&quot;lastName&quot;) String lastName) {\r\n        }\r\n    \r\n        @JsonProperty(&quot;name&quot;)\r\n        abstract String getName();\r\n    \r\n        @JsonProperty(&quot;id&quot;)\r\n        abstract int getId();\r\n    \r\n        @JsonProperty(&quot;lastName&quot;)\r\n        abstract String getLastName();\r\n    \r\n    }\r\n\r\nI deserialise like this:\r\n\r\n    public static void main(String[] args) throws Exception {\r\n    \r\n    \r\n            ObjectMapper mapper = new ObjectMapper();\r\n            mapper.addMixIn(A.class, AMixin.class);\r\n    \r\n            String ss = &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;some name\\&quot;,\\&quot;lastName\\&quot;:\\&quot;some name\\&quot;}\\n&quot;;\r\n            A c = mapper.readValue(ss, A.class);\r\n        }\r\n\r\nbut I get this error:\r\n\r\n```lang-none\r\nException in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `com.bla.test.A` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\r\n at [Source: (String)&quot;{&quot;id&quot;:1,&quot;name&quot;:&quot;some name&quot;,&quot;lastName&quot;:&quot;some name&quot;}\r\n&quot;; line: 1, column: 2]\r\n```\r\n","title":"Jackson deserialization of a Lombok @Builder class using a mixin is not working","body":"<p>This is my class:</p>\n<pre><code>@Builder\n@Value\npublic class A {\n    int id;\n    String name;\n    @NonNull String lastName;\n}\n</code></pre>\n<p>The Lombok <code>@Builder</code> will add the all args constructor.</p>\n<p>I need to deserialise a string into a POJO object.</p>\n<p>I created the following Jackson mixin containing all three properties:</p>\n<pre><code>public abstract class AMixin {\n    public AMixin(@JsonProperty(&quot;name&quot;) String name,\n                  @JsonProperty(&quot;id&quot;) int id,\n                  @JsonProperty(&quot;lastName&quot;) String lastName) {\n    }\n\n    @JsonProperty(&quot;name&quot;)\n    abstract String getName();\n\n    @JsonProperty(&quot;id&quot;)\n    abstract int getId();\n\n    @JsonProperty(&quot;lastName&quot;)\n    abstract String getLastName();\n\n}\n</code></pre>\n<p>I deserialise like this:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n\n\n        ObjectMapper mapper = new ObjectMapper();\n        mapper.addMixIn(A.class, AMixin.class);\n\n        String ss = &quot;{\\&quot;id\\&quot;:1,\\&quot;name\\&quot;:\\&quot;some name\\&quot;,\\&quot;lastName\\&quot;:\\&quot;some name\\&quot;}\\n&quot;;\n        A c = mapper.readValue(ss, A.class);\n    }\n</code></pre>\n<p>but I get this error:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;main&quot; com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `com.bla.test.A` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n at [Source: (String)&quot;{&quot;id&quot;:1,&quot;name&quot;:&quot;some name&quot;,&quot;lastName&quot;:&quot;some name&quot;}\n&quot;; line: 1, column: 2]\n</code></pre>\n"},{"tags":["java","database","clickhouse","clickhouse-client"],"comments":[{"owner":{"account_id":6502221,"reputation":1372,"user_id":5032541,"display_name":"Erwan Daniel"},"score":0,"creation_date":1691494840,"post_id":76754682,"comment_id":135496523,"body_markdown":"Can you add the result of the command &quot;SHOW CREATE TABLE *your_table*&quot; ?","body":"Can you add the result of the command &quot;SHOW CREATE TABLE <i>your_table</i>&quot; ?"}],"owner":{"account_id":19117595,"reputation":61,"user_id":13962184,"display_name":"Deus Asakura"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":165,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690202997,"creation_date":1690202997,"question_id":76754682,"body_markdown":"Here are method to send batches to ClickHouse. Batch size = 50, all data to send = 1000 objects.\r\n\r\nMy method\r\n```\r\n void executeBatch(final List&lt;V&gt; batch) throws ClickHouseException {\r\n        if (!batch.isEmpty()) {\r\n            try (ClickHouseClient client = ClickHouseClient.newInstance(ClickHouseProtocol.HTTP)) {\r\n                ClickHouseRequest.Mutation insertRequest = client.read(cluster).write().table(tableName)\r\n                    .format(ClickHouseFormat.RowBinary);\r\n                ClickHouseConfig config = insertRequest.getConfig();\r\n\r\n                try (final ClickHousePipedOutputStream stream = ClickHouseDataStreamFactory.getInstance()\r\n                    .createPipedOutputStream(config, (Runnable) null)) {\r\n                    insertRequest.data(stream.getInputStream())\r\n                        .execute()\r\n                        .thenAccept(response -&gt;\r\n                            LOGGER.info(&quot;Batch: {}, Written rows: {}&quot;, batch.size(),\r\n                                response.getSummary().getWrittenRows()));\r\n\r\n                    for (final V event : batch) {\r\n                        BinaryStreamUtils.writeString(stream, event.get(&quot;id&quot;).getAsString());\r\n                        BinaryStreamUtils.writeNonNull(stream);\r\n                        BinaryStreamUtils.writeString(stream, event.get(&quot;name&quot;).getAsString());\r\n                    }\r\n                }\r\n            } catch (final IOException e) {\r\n                throw ClickHouseException.of(e, cluster.getTemplate());\r\n            }\r\n        }\r\n    }\r\n```\r\n\r\nI see in logs\r\n&gt; Batch: 50, Written rows: 50\r\n\r\nWhile sending to ClickHouse it doesn&#39;t throw any exceptions.\r\n\r\nBut there are not all 20 log rows, every try its different and in the table are not all rows, just according to logs.\r\n\r\nIn the table `system.errors` are several rows:\r\n\r\n - Cannot parse input: expected &#39;\\r\\n&#39; at end of stream.   \r\n - Unexpected end of file while reading chunk header of HTTP chunked data   \r\n - Too many parts (300). Merges are processing significantly slower than inserts\r\n - Directory /var/lib/clickhouse/store/1ae/1ae1dd8f-736f-4a7d9f15608a194c56af/tmp_merge_202307_178_275_1/ already exists\r\n\r\nNo matter the time I wait the destination table doesn&#39;t have all 1000 rows.\r\n\r\nWhat I do wrong?","title":"ClickHouse java client doesn&#39;t send all batches","body":"<p>Here are method to send batches to ClickHouse. Batch size = 50, all data to send = 1000 objects.</p>\n<p>My method</p>\n<pre><code> void executeBatch(final List&lt;V&gt; batch) throws ClickHouseException {\n        if (!batch.isEmpty()) {\n            try (ClickHouseClient client = ClickHouseClient.newInstance(ClickHouseProtocol.HTTP)) {\n                ClickHouseRequest.Mutation insertRequest = client.read(cluster).write().table(tableName)\n                    .format(ClickHouseFormat.RowBinary);\n                ClickHouseConfig config = insertRequest.getConfig();\n\n                try (final ClickHousePipedOutputStream stream = ClickHouseDataStreamFactory.getInstance()\n                    .createPipedOutputStream(config, (Runnable) null)) {\n                    insertRequest.data(stream.getInputStream())\n                        .execute()\n                        .thenAccept(response -&gt;\n                            LOGGER.info(&quot;Batch: {}, Written rows: {}&quot;, batch.size(),\n                                response.getSummary().getWrittenRows()));\n\n                    for (final V event : batch) {\n                        BinaryStreamUtils.writeString(stream, event.get(&quot;id&quot;).getAsString());\n                        BinaryStreamUtils.writeNonNull(stream);\n                        BinaryStreamUtils.writeString(stream, event.get(&quot;name&quot;).getAsString());\n                    }\n                }\n            } catch (final IOException e) {\n                throw ClickHouseException.of(e, cluster.getTemplate());\n            }\n        }\n    }\n</code></pre>\n<p>I see in logs</p>\n<blockquote>\n<p>Batch: 50, Written rows: 50</p>\n</blockquote>\n<p>While sending to ClickHouse it doesn't throw any exceptions.</p>\n<p>But there are not all 20 log rows, every try its different and in the table are not all rows, just according to logs.</p>\n<p>In the table <code>system.errors</code> are several rows:</p>\n<ul>\n<li>Cannot parse input: expected '\\r\\n' at end of stream.</li>\n<li>Unexpected end of file while reading chunk header of HTTP chunked data</li>\n<li>Too many parts (300). Merges are processing significantly slower than inserts</li>\n<li>Directory /var/lib/clickhouse/store/1ae/1ae1dd8f-736f-4a7d9f15608a194c56af/tmp_merge_202307_178_275_1/ already exists</li>\n</ul>\n<p>No matter the time I wait the destination table doesn't have all 1000 rows.</p>\n<p>What I do wrong?</p>\n"},{"tags":["java","xml","soap","jaxb"],"owner":{"account_id":9256941,"reputation":1073,"user_id":6875688,"accept_rate":75,"display_name":"Hugo L.M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690202833,"creation_date":1690202833,"question_id":76754660,"body_markdown":"I am required to make a SOAP WS call. I autogenerated the classes using jaxws-maven-plugin, but the class it generated is very generic:\r\n\r\n```\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlType(name = &quot;&quot;, propOrder = {\r\n    &quot;docIn&quot;\r\n})\r\n@XmlRootElement(name = &quot;GrabaServicios&quot;)\r\npublic class GrabaServicios {\r\n\r\n    protected GrabaServicios.DocIn docIn;\r\n\r\n    public GrabaServicios.DocIn getDocIn() {\r\n        return docIn;\r\n    }\r\n\r\n    public void setDocIn(GrabaServicios.DocIn value) {\r\n        this.docIn = value;\r\n    }\r\n\r\n\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n    @XmlType(name = &quot;&quot;, propOrder = {\r\n        &quot;content&quot;\r\n    })\r\n    public static class DocIn {\r\n\r\n        @XmlMixed\r\n        @XmlAnyElement(lax = true)\r\n        protected List&lt;Object&gt; content;\r\n\r\n        public List&lt;Object&gt; getContent() {\r\n            if (content == null) {\r\n                content = new ArrayList&lt;&gt;();\r\n            }\r\n            return this.content;\r\n        }\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\nIn order to generate this docIn, I have implemented my own class:\r\n\r\n```\r\n    @XmlAccessorType(XmlAccessType.FIELD)\r\n@XmlRootElement(name = &quot;Servicios&quot;)\r\n@Data\r\npublic class Servicios {\r\n\r\n    @XmlElement(name = &quot;Envio&quot;)\r\n    private List&lt;Envio&gt; envioList;\r\n\r\n    @XmlAttribute(name = &quot;uidcliente&quot;)\r\n    private String uidCliente;\r\n\r\n}\r\n\r\n@XmlAccessorType(XmlAccessType.FIELD)\r\n@Data\r\npublic class Envio {\r\n\r\n    @XmlElement(name = &quot;Fecha&quot;)\r\n    private String fecha;\r\n\r\n    @XmlElement(name = &quot;Servicio&quot;)\r\n    private int servicio;\r\n\r\n    @XmlElement(name = &quot;Horario&quot;)\r\n    private int horario;\r\n\r\n    @XmlElement(name = &quot;Bultos&quot;)\r\n    private int bultos;\r\n\r\n    @XmlElement(name = &quot;Peso&quot;)\r\n    private int peso;\r\n\r\n    @XmlElement(name = &quot;Portes&quot;)\r\n    private String portes;\r\n\r\n    @XmlElement(name = &quot;Importes&quot;)\r\n    private Importes importes;\r\n\r\n    @XmlElement(name = &quot;Remite&quot;)\r\n    private Remite remite;\r\n\r\n    @XmlElement(name = &quot;Destinatario&quot;)\r\n    private Destinatario destinatario;\r\n\r\n    @XmlElement(name = &quot;DevuelveAdicionales&quot;)\r\n    private DevuelveAdicionales devuelveAdicionales;\r\n\r\n}\r\n```\r\n\r\nWhat would be the correct way to handle this in Java? I managed to make the call by creating the XML in a more manual way, which I do not like:\r\n\r\n```\r\nElement body = doc.createElement(&quot;soapenv:Body&quot;);\r\nenvelope.appendChild(body);\r\n\r\nElement grabaServicios = doc.createElement(&quot;asm:GrabaServicios&quot;);\r\nbody.appendChild(grabaServicios);\r\n\r\nElement docIn = doc.createElement(&quot;asm:docIn&quot;);\r\ngrabaServicios.appendChild(docIn);\r\n```\r\n\r\n\r\nHow can I use the auto-generated classes and my custom class to create the necessary XML and make the SOAP call? Any guidance or suggestions would be greatly appreciated. Thanks in advance.\r\n\r\n\r\n","title":"How to correctly handle SOAP WS call with autogenerated and custom classes in Java?","body":"<p>I am required to make a SOAP WS call. I autogenerated the classes using jaxws-maven-plugin, but the class it generated is very generic:</p>\n<pre><code>    @XmlAccessorType(XmlAccessType.FIELD)\n@XmlType(name = &quot;&quot;, propOrder = {\n    &quot;docIn&quot;\n})\n@XmlRootElement(name = &quot;GrabaServicios&quot;)\npublic class GrabaServicios {\n\n    protected GrabaServicios.DocIn docIn;\n\n    public GrabaServicios.DocIn getDocIn() {\n        return docIn;\n    }\n\n    public void setDocIn(GrabaServicios.DocIn value) {\n        this.docIn = value;\n    }\n\n\n    @XmlAccessorType(XmlAccessType.FIELD)\n    @XmlType(name = &quot;&quot;, propOrder = {\n        &quot;content&quot;\n    })\n    public static class DocIn {\n\n        @XmlMixed\n        @XmlAnyElement(lax = true)\n        protected List&lt;Object&gt; content;\n\n        public List&lt;Object&gt; getContent() {\n            if (content == null) {\n                content = new ArrayList&lt;&gt;();\n            }\n            return this.content;\n        }\n\n    }\n\n}\n</code></pre>\n<p>In order to generate this docIn, I have implemented my own class:</p>\n<pre><code>    @XmlAccessorType(XmlAccessType.FIELD)\n@XmlRootElement(name = &quot;Servicios&quot;)\n@Data\npublic class Servicios {\n\n    @XmlElement(name = &quot;Envio&quot;)\n    private List&lt;Envio&gt; envioList;\n\n    @XmlAttribute(name = &quot;uidcliente&quot;)\n    private String uidCliente;\n\n}\n\n@XmlAccessorType(XmlAccessType.FIELD)\n@Data\npublic class Envio {\n\n    @XmlElement(name = &quot;Fecha&quot;)\n    private String fecha;\n\n    @XmlElement(name = &quot;Servicio&quot;)\n    private int servicio;\n\n    @XmlElement(name = &quot;Horario&quot;)\n    private int horario;\n\n    @XmlElement(name = &quot;Bultos&quot;)\n    private int bultos;\n\n    @XmlElement(name = &quot;Peso&quot;)\n    private int peso;\n\n    @XmlElement(name = &quot;Portes&quot;)\n    private String portes;\n\n    @XmlElement(name = &quot;Importes&quot;)\n    private Importes importes;\n\n    @XmlElement(name = &quot;Remite&quot;)\n    private Remite remite;\n\n    @XmlElement(name = &quot;Destinatario&quot;)\n    private Destinatario destinatario;\n\n    @XmlElement(name = &quot;DevuelveAdicionales&quot;)\n    private DevuelveAdicionales devuelveAdicionales;\n\n}\n</code></pre>\n<p>What would be the correct way to handle this in Java? I managed to make the call by creating the XML in a more manual way, which I do not like:</p>\n<pre><code>Element body = doc.createElement(&quot;soapenv:Body&quot;);\nenvelope.appendChild(body);\n\nElement grabaServicios = doc.createElement(&quot;asm:GrabaServicios&quot;);\nbody.appendChild(grabaServicios);\n\nElement docIn = doc.createElement(&quot;asm:docIn&quot;);\ngrabaServicios.appendChild(docIn);\n</code></pre>\n<p>How can I use the auto-generated classes and my custom class to create the necessary XML and make the SOAP call? Any guidance or suggestions would be greatly appreciated. Thanks in advance.</p>\n"},{"tags":["java","sockets","ssl","sslserversocket"],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690202612,"creation_date":1690202612,"answer_id":76754624,"question_id":76753900,"body_markdown":"&gt; ;Here, since I am passing an object that is of type SSLSocket to a function that accepts Socket, I suspect that SSL connection is not getting cleaned up during shutdown. Only the underlying TCP layer is shutting down.\r\n\r\nThis doesn&#39;t make much sense - __both__ concepts (`SSLSocket` and non-SSLed sockets) are resources that require `close()`ing.\r\n\r\nThere are 2 options:\r\n\r\n* The code you are calling into __does not do it right__. Which generally means: Does not use try-with-resources. In which case that code is broken. SSL has nothing to do with it - failure to `close()` non-SSL sockets safely is just as much of an issue.\r\n* The code you are calling into does it right. In which case, the fact that it&#39;s an SSLSocket instance is irrelevant: It&#39;ll be cleaned up appropriately.\r\n\r\n&gt; Also, is there a way for me to verify via Java code or any other means if a SSL shutdown has happened for a given socket?\r\n\r\nCheck the code. Is it safe-closing? There aren&#39;t any runtime hooks I&#39;m aware of that you can add.\r\n\r\n## You have a style issue!\r\n\r\n&gt; ```java\r\n&gt; processData(Socket sock)\r\n&gt; {\r\n&gt;    read from socket\r\n&gt;    close socket\r\n&gt; }\r\n&gt; ```\r\n\r\nThis isn&#39;t normal. As in, it&#39;s not a bug directly nor is it invalid java code but this runs counter to how the community expects resource-using code to operate.\r\n\r\n_Normally_, whatever _makes_ the resource is also responsible for _closing_ the resource. It is abnormal for a thing that makes a resource _not_ to also close it, and it is similarly abnormal for a thing that is handed_ a resource (vs. creating it itself) to close it.\r\n\r\nThese rules are the obvious result of applying a bunch of axioms and obvious maxims:\r\n\r\n* Resources must be managed, as in, once created they _must_ be closed or that JVM starts &#39;leaking resources&#39; (not so much a memory leak, but more e.g. that you run out of file handles and therefore the JVM can&#39;t do much until it is shut down entirely). The garbage collector cannot be used as a fallback for resource management, because there is no guarantee the garbage collector is going to run in a timely fashion. It could (and this really happens) take _days_ for the GC to kick in.\r\n\r\n* Given that they must be managed, making multiple unrelated snippets of code jointly responsible for managing it does not work - shared responsibility, is no responsibility. Or, everybody tries to program safely and closes everything in sight which means one snippet makes the work of another impossible to closing a resource it needs &#39;out from under its feet&#39;. The solution is simple and obvious: Make sure only one snippet of code is universally agreed upon as being responsible for the resource. That code should ensure it is closed. Other code should ensure it __does not__ close it.\r\n\r\nThis then simplifies to: So.. which code is responsible?\r\n\r\nAnd that leads to: ... the one that made the resource, unless explicitly documented otherwise. This documentation is stated in terms of the passing of the responsibility. You can have a thing that makes a resource and fails to close it, as long as it documents that responsibility &#39;passes&#39; to the caller of it. You can have a thing that takes a resource from outside of itself and closes it, as long as it documents that it takes away the responsibility from the caller (and, hence, that the caller must not also close it and must cease interacting with the resource after passing it).\r\n\r\nRust applies this principle as a compiler checked concept with all objects (due to not having a garbage collector, pretty much all objects in rust are &#39;resources that must be closed&#39;) - so if you&#39;re familiar with that language, you do the same thing in java, only you limit it to objects-representing-system-resources and you don&#39;t get the rust compiler&#39;s enforcement of responsibility and all that entails (such as refusing to compile code that interacts with an object after handing it over to another along with the responsibility for that object).\r\n\r\nAn example of a method that &#39;passes responsibility&#39; is `new FileInputStream()` (which makes a resource but obviously doesn&#39;t also close it, as that would make the class useless), and `Files.newInputStream`. By convention, you should either use a constructor, or include `new` in the method&#39;s name. Older API is bad and breaks this rule (back then &#39;resource management is kinda hard&#39; was less well known), such as `Socket`&#39;s `.getInputStream()` which should have been called `.newInputStream()`. Because it makes a resource _and_ passes responsibility for it to the caller.\r\n\r\nYour method here is a case of the reverse: It _does not_ make a resource but nevertheless _does_ &#39;take it over&#39; and takes on the responsibility of closing it. As far as I&#39;m aware there is no convention for this, so you need to go out of your way to document it. Or, preferably, rewrite this method. It should do one of three things:\r\n\r\n* Not close the resource and leave the responsibility with the caller (or rather, the maker of that resource).\r\n* If it is a long-lived thing where you end up storing this resource in a field or passing it to a thread/runnable, the thing that takes a resource should itself become a resource, and implement `AutoClosable` to signal this. By convention, passing resources to AutoClosables inherently passes responsibility. See: `Scanner`, `BufferedInputStream`, and every other filter stream/reader/writer in the core java libraries. Then the caller gets to &#39;transfer&#39; the responsibility from &#39;close this socket&#39; to &#39;close this SocketProcessor&#39;, which is a common occurrence in java.\r\n* Should document _extremely carefully because you&#39;re off the common path here_ that this method adopts responsibility.\r\n\r\nGiven that it&#39;s so &#39;weird&#39; and given that it sounds in your question like you don&#39;t directly control this code, you should assume that it does the common thing and therefore __does not close the resource, intentionally_.\r\n\r\n## Safely closing resources\r\n\r\nThis is how you safely close resources:\r\n\r\n```\r\ntry (Resource r = makeAndTakeResponsibilityForTheResource()) {\r\n  // use r here\r\n}\r\n```\r\n\r\nThat&#39;s it. It&#39;s as simple as that: The compiler and runtime work together to ensure that no matter what happens, if code &#39;flows&#39; out of this block the resource is closed. Whether naturally (runs to the closing brace), by control flow (`return;`, `break;`, etcetera), or by exception. Here is an example with sockets:\r\n\r\n```\r\ntry (Socket s = serverSocket.accept()) {\r\n  // do stuff with s\r\n}\r\n// s as a variable doesn&#39;t even exist anymore here, which is nice\r\n```\r\n\r\nIn java code over 20 years old, this would have to look like the unwieldy:\r\n\r\n```\r\nSocket s = ...;\r\ntry {\r\n  // use s here\r\n} finally {\r\n  s.close();\r\n}\r\n```\r\n\r\nThe try-with construct desugars to the above - bad decompilers will likely turn the first snippet into the second one, in case you&#39;re desperate enough to decompile classes to figure out how they work and if they work as you expected them to.\r\n\r\nIf you use your resources as follows:\r\n\r\n* &quot;A resource&quot; is any object that is `instanceof AutoClosable`.\r\n* Resource makers are either constructors, or methods that include the name `new`, or create them using `try ( ... ) {}`. And you are aware invoking a method whose name includes `new` or constructor that returns a resource means _you_ are the &#39;resource maker&#39; - you inherit the responsibility.\r\n* Objects that require a resource statefully (cannot be fully done with it within the confines of a single method call) are turned into resources themselves (give em a `close()` method and stick `implements AutoClosable` on it). Presume passing a resource to a thing that makes a resource transfers responsibility (e.g. `new BufferedInputStream(someStream)` transfers).\r\n* Do _NOT_ close resources outside of these rules. Don&#39;t close resources you didn&#39;t make &#39;just in case&#39;, don&#39;t add `finalizer()` methods that close resources.\r\n\r\nIt can&#39;t go wrong. Hence, do it that way - it&#39;s convention, and that convention is good.\r\n\r\n## Checking it\r\n\r\nlinter tools (tools that check your source code as you develop - sometimes more fancifully called &#39;static code analysers&#39;) exist that check proper application of the above rules. Apply them to your codebase if you want to know.\r\n\r\nThere is, as far as I know, no real runtime equivalent. You _could_ of course write AOP or agents or other JVM plugins that keep track of the creation of resources and simply start some timers to eventually start saying: Hmmm, that resource has been open for a very very long time. Bug? - or if you want to get real fancy, figure out a way to runtime-confirm the above behaviour.\r\n\r\nThat is _very_ complicated (person-month+) and as far as I know, nobody is doing this. I guess folks trust the linters.","title":"How to verify if SSL shutdown happening for my socket in Java","body":"<blockquote>\n<p>;Here, since I am passing an object that is of type SSLSocket to a function that accepts Socket, I suspect that SSL connection is not getting cleaned up during shutdown. Only the underlying TCP layer is shutting down.</p>\n</blockquote>\n<p>This doesn't make much sense - <strong>both</strong> concepts (<code>SSLSocket</code> and non-SSLed sockets) are resources that require <code>close()</code>ing.</p>\n<p>There are 2 options:</p>\n<ul>\n<li>The code you are calling into <strong>does not do it right</strong>. Which generally means: Does not use try-with-resources. In which case that code is broken. SSL has nothing to do with it - failure to <code>close()</code> non-SSL sockets safely is just as much of an issue.</li>\n<li>The code you are calling into does it right. In which case, the fact that it's an SSLSocket instance is irrelevant: It'll be cleaned up appropriately.</li>\n</ul>\n<blockquote>\n<p>Also, is there a way for me to verify via Java code or any other means if a SSL shutdown has happened for a given socket?</p>\n</blockquote>\n<p>Check the code. Is it safe-closing? There aren't any runtime hooks I'm aware of that you can add.</p>\n<h2>You have a style issue!</h2>\n<blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>processData(Socket sock)\n{\n   read from socket\n   close socket\n}\n</code></pre>\n</blockquote>\n<p>This isn't normal. As in, it's not a bug directly nor is it invalid java code but this runs counter to how the community expects resource-using code to operate.</p>\n<p><em>Normally</em>, whatever <em>makes</em> the resource is also responsible for <em>closing</em> the resource. It is abnormal for a thing that makes a resource <em>not</em> to also close it, and it is similarly abnormal for a thing that is handed_ a resource (vs. creating it itself) to close it.</p>\n<p>These rules are the obvious result of applying a bunch of axioms and obvious maxims:</p>\n<ul>\n<li><p>Resources must be managed, as in, once created they <em>must</em> be closed or that JVM starts 'leaking resources' (not so much a memory leak, but more e.g. that you run out of file handles and therefore the JVM can't do much until it is shut down entirely). The garbage collector cannot be used as a fallback for resource management, because there is no guarantee the garbage collector is going to run in a timely fashion. It could (and this really happens) take <em>days</em> for the GC to kick in.</p>\n</li>\n<li><p>Given that they must be managed, making multiple unrelated snippets of code jointly responsible for managing it does not work - shared responsibility, is no responsibility. Or, everybody tries to program safely and closes everything in sight which means one snippet makes the work of another impossible to closing a resource it needs 'out from under its feet'. The solution is simple and obvious: Make sure only one snippet of code is universally agreed upon as being responsible for the resource. That code should ensure it is closed. Other code should ensure it <strong>does not</strong> close it.</p>\n</li>\n</ul>\n<p>This then simplifies to: So.. which code is responsible?</p>\n<p>And that leads to: ... the one that made the resource, unless explicitly documented otherwise. This documentation is stated in terms of the passing of the responsibility. You can have a thing that makes a resource and fails to close it, as long as it documents that responsibility 'passes' to the caller of it. You can have a thing that takes a resource from outside of itself and closes it, as long as it documents that it takes away the responsibility from the caller (and, hence, that the caller must not also close it and must cease interacting with the resource after passing it).</p>\n<p>Rust applies this principle as a compiler checked concept with all objects (due to not having a garbage collector, pretty much all objects in rust are 'resources that must be closed') - so if you're familiar with that language, you do the same thing in java, only you limit it to objects-representing-system-resources and you don't get the rust compiler's enforcement of responsibility and all that entails (such as refusing to compile code that interacts with an object after handing it over to another along with the responsibility for that object).</p>\n<p>An example of a method that 'passes responsibility' is <code>new FileInputStream()</code> (which makes a resource but obviously doesn't also close it, as that would make the class useless), and <code>Files.newInputStream</code>. By convention, you should either use a constructor, or include <code>new</code> in the method's name. Older API is bad and breaks this rule (back then 'resource management is kinda hard' was less well known), such as <code>Socket</code>'s <code>.getInputStream()</code> which should have been called <code>.newInputStream()</code>. Because it makes a resource <em>and</em> passes responsibility for it to the caller.</p>\n<p>Your method here is a case of the reverse: It <em>does not</em> make a resource but nevertheless <em>does</em> 'take it over' and takes on the responsibility of closing it. As far as I'm aware there is no convention for this, so you need to go out of your way to document it. Or, preferably, rewrite this method. It should do one of three things:</p>\n<ul>\n<li>Not close the resource and leave the responsibility with the caller (or rather, the maker of that resource).</li>\n<li>If it is a long-lived thing where you end up storing this resource in a field or passing it to a thread/runnable, the thing that takes a resource should itself become a resource, and implement <code>AutoClosable</code> to signal this. By convention, passing resources to AutoClosables inherently passes responsibility. See: <code>Scanner</code>, <code>BufferedInputStream</code>, and every other filter stream/reader/writer in the core java libraries. Then the caller gets to 'transfer' the responsibility from 'close this socket' to 'close this SocketProcessor', which is a common occurrence in java.</li>\n<li>Should document <em>extremely carefully because you're off the common path here</em> that this method adopts responsibility.</li>\n</ul>\n<p>Given that it's so 'weird' and given that it sounds in your question like you don't directly control this code, you should assume that it does the common thing and therefore _<em>does not close the resource, intentionally</em>.</p>\n<h2>Safely closing resources</h2>\n<p>This is how you safely close resources:</p>\n<pre><code>try (Resource r = makeAndTakeResponsibilityForTheResource()) {\n  // use r here\n}\n</code></pre>\n<p>That's it. It's as simple as that: The compiler and runtime work together to ensure that no matter what happens, if code 'flows' out of this block the resource is closed. Whether naturally (runs to the closing brace), by control flow (<code>return;</code>, <code>break;</code>, etcetera), or by exception. Here is an example with sockets:</p>\n<pre><code>try (Socket s = serverSocket.accept()) {\n  // do stuff with s\n}\n// s as a variable doesn't even exist anymore here, which is nice\n</code></pre>\n<p>In java code over 20 years old, this would have to look like the unwieldy:</p>\n<pre><code>Socket s = ...;\ntry {\n  // use s here\n} finally {\n  s.close();\n}\n</code></pre>\n<p>The try-with construct desugars to the above - bad decompilers will likely turn the first snippet into the second one, in case you're desperate enough to decompile classes to figure out how they work and if they work as you expected them to.</p>\n<p>If you use your resources as follows:</p>\n<ul>\n<li>&quot;A resource&quot; is any object that is <code>instanceof AutoClosable</code>.</li>\n<li>Resource makers are either constructors, or methods that include the name <code>new</code>, or create them using <code>try ( ... ) {}</code>. And you are aware invoking a method whose name includes <code>new</code> or constructor that returns a resource means <em>you</em> are the 'resource maker' - you inherit the responsibility.</li>\n<li>Objects that require a resource statefully (cannot be fully done with it within the confines of a single method call) are turned into resources themselves (give em a <code>close()</code> method and stick <code>implements AutoClosable</code> on it). Presume passing a resource to a thing that makes a resource transfers responsibility (e.g. <code>new BufferedInputStream(someStream)</code> transfers).</li>\n<li>Do <em>NOT</em> close resources outside of these rules. Don't close resources you didn't make 'just in case', don't add <code>finalizer()</code> methods that close resources.</li>\n</ul>\n<p>It can't go wrong. Hence, do it that way - it's convention, and that convention is good.</p>\n<h2>Checking it</h2>\n<p>linter tools (tools that check your source code as you develop - sometimes more fancifully called 'static code analysers') exist that check proper application of the above rules. Apply them to your codebase if you want to know.</p>\n<p>There is, as far as I know, no real runtime equivalent. You <em>could</em> of course write AOP or agents or other JVM plugins that keep track of the creation of resources and simply start some timers to eventually start saying: Hmmm, that resource has been open for a very very long time. Bug? - or if you want to get real fancy, figure out a way to runtime-confirm the above behaviour.</p>\n<p>That is <em>very</em> complicated (person-month+) and as far as I know, nobody is doing this. I guess folks trust the linters.</p>\n"}],"owner":{"account_id":1742047,"reputation":998,"user_id":1593170,"accept_rate":3,"display_name":"Omi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690202612,"creation_date":1690197194,"question_id":76753900,"body_markdown":"I have a Java code where I created a SSLSocket. My design looks like this:\r\n\r\n    Super class: Server.java. Member variable: socket of type Socket.\r\n    My derived class: TLSServer.java. Member variables - SSLSocket sslSock;\r\n                                                         SSLServerSocket sslSrvrSock;\r\n    \r\n    \r\n    sslSock = sslSrvrSock.accept();\r\n\r\nNow, we have a code like this:\r\n\r\n    processData(Socket sock)\r\n    {\r\n       read from socket\r\n       close socket\r\n    }\r\n    \r\n    Server server;\r\n    This is how we call processData - processData(server.sock);\r\n\r\n \r\n\r\nNow the object server of type Server itself could be either Server or TLSServer. If TLSServer, we still pass it as an object of type Socket and not SSLSocket.\r\n\r\nNow, when we finally close the socket, how do I ensure that SSL functionality is actually shut down for this socket? In C++ openssl lib, I can do: SSL_shutdown()\r\n\r\nHere, since I am passing an object that is of type SSLSocket to a function that accepts Socket, I suspect that SSL connection is not getting cleaned up during shutdown. Only the underlying TCP layer is shutting down.\r\n\r\nPls suggest. Also, is there a way for me to verify via Java code or any other means if a SSL shutdown has happened for a given socket?\r\n\r\nI have an app that is talking to this server which is not getting the close notify when the socket closes. Which makes me suspect that SSL shutdown is not happening.\r\n\r\nThanks, Om.","title":"How to verify if SSL shutdown happening for my socket in Java","body":"<p>I have a Java code where I created a SSLSocket. My design looks like this:</p>\n<pre><code>Super class: Server.java. Member variable: socket of type Socket.\nMy derived class: TLSServer.java. Member variables - SSLSocket sslSock;\n                                                     SSLServerSocket sslSrvrSock;\n\n\nsslSock = sslSrvrSock.accept();\n</code></pre>\n<p>Now, we have a code like this:</p>\n<pre><code>processData(Socket sock)\n{\n   read from socket\n   close socket\n}\n\nServer server;\nThis is how we call processData - processData(server.sock);\n</code></pre>\n<p>Now the object server of type Server itself could be either Server or TLSServer. If TLSServer, we still pass it as an object of type Socket and not SSLSocket.</p>\n<p>Now, when we finally close the socket, how do I ensure that SSL functionality is actually shut down for this socket? In C++ openssl lib, I can do: SSL_shutdown()</p>\n<p>Here, since I am passing an object that is of type SSLSocket to a function that accepts Socket, I suspect that SSL connection is not getting cleaned up during shutdown. Only the underlying TCP layer is shutting down.</p>\n<p>Pls suggest. Also, is there a way for me to verify via Java code or any other means if a SSL shutdown has happened for a given socket?</p>\n<p>I have an app that is talking to this server which is not getting the close notify when the socket closes. Which makes me suspect that SSL shutdown is not happening.</p>\n<p>Thanks, Om.</p>\n"},{"tags":["java","limesurvey"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684572726,"post_id":76294291,"comment_id":134539118,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":2583171,"reputation":846,"user_id":2239406,"display_name":"Denis Chenu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690202554,"creation_date":1690202554,"answer_id":76754612,"question_id":76294291,"body_markdown":"If your question code are RANK : {RANK_1.shown} sho the text of the 1st option.\r\n\r\nSee https://manual.limesurvey.org/Expression_Manager#Qcode_Variable_Naming","title":"LimeSurvey - Inserting first ranked answer in the text of the next question","body":"<p>If your question code are RANK : {RANK_1.shown} sho the text of the 1st option.</p>\n<p>See <a href=\"https://manual.limesurvey.org/Expression_Manager#Qcode_Variable_Naming\" rel=\"nofollow noreferrer\">https://manual.limesurvey.org/Expression_Manager#Qcode_Variable_Naming</a></p>\n"}],"owner":{"account_id":23602300,"reputation":1,"user_id":17638597,"display_name":"Juanita"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690202554,"creation_date":1684572453,"question_id":76294291,"body_markdown":"I have question being a ranked question of top 3,\r\n\r\nQ1. PLEASE LIST top 3 supermarkets.\r\n\r\nQ2. Why did you choose &lt;insert first rank&gt;?\r\n\r\n\r\nI know some coding in regards to the single question but have no idea for the ranked question, this is just a personal project.","title":"LimeSurvey - Inserting first ranked answer in the text of the next question","body":"<p>I have question being a ranked question of top 3,</p>\n<p>Q1. PLEASE LIST top 3 supermarkets.</p>\n<p>Q2. Why did you choose ?</p>\n<p>I know some coding in regards to the single question but have no idea for the ranked question, this is just a personal project.</p>\n"},{"tags":["java","docker","spring-kafka"],"owner":{"account_id":12135514,"reputation":423,"user_id":8861099,"display_name":"cUser"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690202393,"creation_date":1690202393,"question_id":76754592,"body_markdown":"Hellow I want to use for local development \r\n\r\naxual/platform-test-standalone image\r\n\r\nThe issue is that I want to have one that is compatible with java 17 and not just with 11. I was trying with multiple versions but I could not find any version to work.\r\n\r\nDocker image is like this\r\n\r\n      app:\r\n        image: axual/platform-test-standalone:5.7.0\r\n        hostname: standalone\r\n        ports:\r\n          - &quot;9000:9000&quot;\r\n        volumes:\r\n          - ./artifacts:/schemaJars\r\n        environment:\r\n          - SPRING_PROFILES_ACTIVE=app\r\n\r\nOf course because of mismatch from java app and the image I get this error \r\n\r\n&gt;Caused by: java.lang.UnsupportedClassVersionError: org/springframework/boot/SpringApplication has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0\r\n\r\nAre you aware if there is any axual verison for 17 ? ","title":"Is there axual/platform-test-standalone version supporting jdk 17","body":"<p>Hellow I want to use for local development</p>\n<p>axual/platform-test-standalone image</p>\n<p>The issue is that I want to have one that is compatible with java 17 and not just with 11. I was trying with multiple versions but I could not find any version to work.</p>\n<p>Docker image is like this</p>\n<pre><code>  app:\n    image: axual/platform-test-standalone:5.7.0\n    hostname: standalone\n    ports:\n      - &quot;9000:9000&quot;\n    volumes:\n      - ./artifacts:/schemaJars\n    environment:\n      - SPRING_PROFILES_ACTIVE=app\n</code></pre>\n<p>Of course because of mismatch from java app and the image I get this error</p>\n<blockquote>\n<p>Caused by: java.lang.UnsupportedClassVersionError: org/springframework/boot/SpringApplication has been compiled by a more recent version of the Java Runtime (class file version 61.0), this version of the Java Runtime only recognizes class file versions up to 55.0</p>\n</blockquote>\n<p>Are you aware if there is any axual verison for 17 ?</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","thymeleaf"],"answers":[{"tags":[],"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690202324,"creation_date":1690195771,"answer_id":76753743,"question_id":76753540,"body_markdown":"Your `Thymeleaf` templates should reside in the `src/main/resources/templates` folder to be found with the default settings. You can even put them in a subfolder like `src/main/resources/templates/categories`.\r\n\r\nIf it is not OK for your project you can change the default settings in the `application.properties` like this:\r\n```\r\nspring.thymeleaf.prefix=classpath:/whatever/\r\n```\r\nThe correct syntax for `th:src` in `iframe` will be:\r\n```\r\n&lt;iframe th:src=&quot;@{/categories/minecraft}&quot;/&gt;\r\n```\r\nwhere `/categories/minecraft` is the name of the endpoint in the controller class. This is the Java class annotated with `@Controller`. ","title":"How do I get thymeleaf to work in the .html files I use in my &lt;iframe&gt;?","body":"<p>Your <code>Thymeleaf</code> templates should reside in the <code>src/main/resources/templates</code> folder to be found with the default settings. You can even put them in a subfolder like <code>src/main/resources/templates/categories</code>.</p>\n<p>If it is not OK for your project you can change the default settings in the <code>application.properties</code> like this:</p>\n<pre><code>spring.thymeleaf.prefix=classpath:/whatever/\n</code></pre>\n<p>The correct syntax for <code>th:src</code> in <code>iframe</code> will be:</p>\n<pre><code>&lt;iframe th:src=&quot;@{/categories/minecraft}&quot;/&gt;\n</code></pre>\n<p>where <code>/categories/minecraft</code> is the name of the endpoint in the controller class. This is the Java class annotated with <code>@Controller</code>.</p>\n"}],"owner":{"account_id":29079601,"reputation":3,"user_id":22275955,"display_name":"Александр Потапов"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76753743,"answer_count":1,"score":0,"last_activity_date":1690202324,"creation_date":1690194220,"question_id":76753540,"body_markdown":"I use the thymeleaf templating engine in my html code. My problem is that th works in the index.html iframe, but it doesn&#39;t work in other files that are used in the iframe.\r\n\r\n**index.html:**\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;&lt;/title&gt;\r\n    &lt;link th:href=&quot;@{style_main.css}&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;\r\n    &lt;script th:src=&quot;@{jsc/welcomeRandom.js}&quot;&gt;&lt;/script&gt;\r\n    &lt;script th:src=&quot;@{jsc/searchSys.js}&quot;&gt;&lt;/script&gt;\r\n    &lt;script th:src=&quot;@{jsc/btnsLogic.js}&quot;&gt;&lt;/script&gt;\r\n    &lt;script th:src=&quot;@{jsc/iframeUpdater.js}&quot;&gt;&lt;/script&gt;\r\n    &lt;script th:src=&quot;@{js/code.jquery.com_jquery-3.7.0.min.js}&quot;&gt;&lt;/script&gt;\r\n&lt;/head&gt;\r\n&lt;body class=&quot;mainBody&quot;&gt;\r\n\r\n        &lt;div class=&quot;ssss&quot;&gt;\r\n            &lt;p&gt;ты че еблан?&lt;/p&gt;\r\n            &lt;img th:src=&quot;@{icons/sss.jpg}&quot; alt=&quot;eblan&quot;&gt;\r\n        &lt;/div&gt;\r\n\r\n        &lt;div class=&quot;welcome&quot; id=&quot;welcomeRandom&quot;&gt;\r\n        &lt;/div&gt;\r\n\r\n    &lt;div class=&quot;app&quot;&gt;\r\n\r\n        &lt;div class=&quot;sidebarFull&quot; id=&quot;sidebar&quot;&gt;\r\n            &lt;div class=&quot;logo&quot; onclick=&quot;changeIframe(&#39;categories/home.html&#39;)&quot;&gt;\r\n                &lt;img th:src=&quot;@{svg/logo.svg}&quot; alt=&quot;logo&quot;&gt;\r\n                &lt;p th:text=&quot;${test}&quot;&gt;&lt;/p&gt;\r\n            &lt;/div&gt;\r\n\r\n            &lt;div class=&quot;categories&quot;&gt;\r\n                &lt;a tabindex=&quot;0&quot; class=&quot;categoriesBtn&quot; onclick=&quot;changeIframe(&#39;categories/minecraft.html&#39;)&quot;&gt;&lt;img th:src=&quot;@{icons/minecraft.png}&quot; alt=&quot;icon&quot;&gt;Minecraft&lt;/a&gt;\r\n                &lt;a tabindex=&quot;0&quot; class=&quot;categoriesBtn&quot; onclick=&quot;changeIframe(&#39;categories/terraria.html&#39;)&quot;&gt;&lt;img th:src=&quot;@{icons/terraria.png}&quot; alt=&quot;icon&quot;&gt;Terraria&lt;/a&gt;\r\n                &lt;a tabindex=&quot;0&quot; class=&quot;categoriesBtn&quot; onclick=&quot;changeIframe(&#39;categories/other.html&#39;)&quot;&gt;&lt;img th:src=&quot;@{icons/other.png}&quot; alt=&quot;icon&quot;&gt;Прочее&lt;/a&gt;\r\n            &lt;/div&gt;\r\n\r\n            &lt;div class=&quot;addBtnDiv&quot;&gt;\r\n                &lt;a tabindex=&quot;0&quot; class=&quot;addBtn&quot; onclick=&quot;changeIframe(&#39;categories/submission_page.html&#39;)&quot;&gt;Добавить&lt;/a&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n\r\n        &lt;div class=&quot;articleFull&quot;&gt;\r\n            &lt;div class=&quot;articleTrue&quot;&gt;\r\n                &lt;div class=&quot;searchBarDiv&quot;&gt;\r\n                    &lt;label for=&quot;searchInput&quot;&gt;&lt;/label&gt;\r\n                    &lt;input class=&quot;searchBar&quot; id=&quot;searchInput&quot; placeholder=&quot;Поиск по названию&quot;&gt;\r\n                &lt;/div&gt;\r\n                &lt;div class=&quot;iframeContainer&quot;&gt;\r\n                    &lt;iframe th:src=&quot;@{categories/minecraft.html}&quot; class=&quot;iframeTrueContainer&quot; id=&quot;iframeTrueContainerId&quot;&gt;&lt;/iframe&gt;\r\n                &lt;/div&gt;\r\n            &lt;/div&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n**minecraft.html:**\r\n\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;minecraft&lt;/title&gt;\r\n    &lt;link href=&quot;../style_main.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;\r\n    &lt;script src=&quot;../jsc/gridItemChecker.js&quot;&gt;&lt;/script&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n    &lt;div class=&quot;homeDiv&quot;&gt;\r\n\r\n    &lt;/div&gt;\r\n    &lt;div class=&quot;gridContent&quot;&gt;\r\n        &lt;div class=&quot;gridItem&quot; th:each=&quot;file : ${files}&quot;&gt;\r\n            &lt;div&gt;&lt;img src=&quot;@{file.iconpath}&quot; alt=&quot;icon&quot;&gt;&lt;/div&gt;\r\n            &lt;div class=&quot;packNameDiv&quot;&gt;&lt;p class=&quot;packName&quot; th:text=&quot;${file.name}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\r\n            &lt;div&gt;&lt;p class=&quot;sizeName&quot;&gt;Размер&lt;/p&gt;&lt;p class=&quot;sizeFact&quot; th:text=&quot;${file.filesize}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\r\n            &lt;div&gt;&lt;p class=&quot;option1&quot;&gt;FML&lt;/p&gt;&lt;p class=&quot;option2&quot; th:text=&quot;${file.option1}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\r\n            &lt;div&gt;&lt;p class=&quot;option1&quot;&gt;Версия&lt;/p&gt;&lt;p class=&quot;option2&quot; th:text=&quot;${file.option2}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\r\n            &lt;a class=&quot;gridItemBtn&quot; href=&quot;#&quot; tabindex=&quot;0&quot;&gt;Скачать&lt;/a&gt;\r\n        &lt;/div&gt;\r\n    &lt;/div&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\n\r\n**file system:**\r\n\r\n[project file system][1]\r\n\r\nI want the thymeleaf tags to work in the other .html files that are used in my iframes, but instead they don&#39;t work and just stay in the html code of the page instead of replacing themselves with the required html code.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0BA6e.png\r\n\r\n**1 EDIT:**\r\n\r\n```\r\n&lt;div class=&quot;iframeContainer&quot;&gt;\r\n                    &lt;iframe th:src=&quot;/categories/minecraft&quot; class=&quot;iframeTrueContainer&quot; id=&quot;iframeTrueContainerId&quot;&gt;&lt;/iframe&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\n**MainController.java:**\r\n\r\n```\r\n@Controller\r\npublic class MainController {\r\n    UsersFilesController controller;\r\n\r\n    @Autowired\r\n    public MainController(UsersFilesController controller) {\r\n        this.controller = controller;\r\n    }\r\n\r\n    @GetMapping(&quot;/&quot;)\r\n    public String index(Model model){\r\n        List&lt;UsersFile&gt; files = controller.getAll();\r\n        model.addAttribute(&quot;files&quot;, files);\r\n        System.out.println(model.getAttribute(&quot;files&quot;));\r\n        return &quot;/main/index&quot;;\r\n    }\r\n\r\n    @GetMapping(&quot;/categories/minecraft&quot;)\r\n    public String minecraft(Model model){\r\n        return &quot;categories/minecraft&quot;;\r\n    }\r\n\r\n}\r\n```","title":"How do I get thymeleaf to work in the .html files I use in my &lt;iframe&gt;?","body":"<p>I use the thymeleaf templating engine in my html code. My problem is that th works in the index.html iframe, but it doesn't work in other files that are used in the iframe.</p>\n<p><strong>index.html:</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;link th:href=&quot;@{style_main.css}&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;\n    &lt;script th:src=&quot;@{jsc/welcomeRandom.js}&quot;&gt;&lt;/script&gt;\n    &lt;script th:src=&quot;@{jsc/searchSys.js}&quot;&gt;&lt;/script&gt;\n    &lt;script th:src=&quot;@{jsc/btnsLogic.js}&quot;&gt;&lt;/script&gt;\n    &lt;script th:src=&quot;@{jsc/iframeUpdater.js}&quot;&gt;&lt;/script&gt;\n    &lt;script th:src=&quot;@{js/code.jquery.com_jquery-3.7.0.min.js}&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body class=&quot;mainBody&quot;&gt;\n\n        &lt;div class=&quot;ssss&quot;&gt;\n            &lt;p&gt;ты че еблан?&lt;/p&gt;\n            &lt;img th:src=&quot;@{icons/sss.jpg}&quot; alt=&quot;eblan&quot;&gt;\n        &lt;/div&gt;\n\n        &lt;div class=&quot;welcome&quot; id=&quot;welcomeRandom&quot;&gt;\n        &lt;/div&gt;\n\n    &lt;div class=&quot;app&quot;&gt;\n\n        &lt;div class=&quot;sidebarFull&quot; id=&quot;sidebar&quot;&gt;\n            &lt;div class=&quot;logo&quot; onclick=&quot;changeIframe('categories/home.html')&quot;&gt;\n                &lt;img th:src=&quot;@{svg/logo.svg}&quot; alt=&quot;logo&quot;&gt;\n                &lt;p th:text=&quot;${test}&quot;&gt;&lt;/p&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;categories&quot;&gt;\n                &lt;a tabindex=&quot;0&quot; class=&quot;categoriesBtn&quot; onclick=&quot;changeIframe('categories/minecraft.html')&quot;&gt;&lt;img th:src=&quot;@{icons/minecraft.png}&quot; alt=&quot;icon&quot;&gt;Minecraft&lt;/a&gt;\n                &lt;a tabindex=&quot;0&quot; class=&quot;categoriesBtn&quot; onclick=&quot;changeIframe('categories/terraria.html')&quot;&gt;&lt;img th:src=&quot;@{icons/terraria.png}&quot; alt=&quot;icon&quot;&gt;Terraria&lt;/a&gt;\n                &lt;a tabindex=&quot;0&quot; class=&quot;categoriesBtn&quot; onclick=&quot;changeIframe('categories/other.html')&quot;&gt;&lt;img th:src=&quot;@{icons/other.png}&quot; alt=&quot;icon&quot;&gt;Прочее&lt;/a&gt;\n            &lt;/div&gt;\n\n            &lt;div class=&quot;addBtnDiv&quot;&gt;\n                &lt;a tabindex=&quot;0&quot; class=&quot;addBtn&quot; onclick=&quot;changeIframe('categories/submission_page.html')&quot;&gt;Добавить&lt;/a&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=&quot;articleFull&quot;&gt;\n            &lt;div class=&quot;articleTrue&quot;&gt;\n                &lt;div class=&quot;searchBarDiv&quot;&gt;\n                    &lt;label for=&quot;searchInput&quot;&gt;&lt;/label&gt;\n                    &lt;input class=&quot;searchBar&quot; id=&quot;searchInput&quot; placeholder=&quot;Поиск по названию&quot;&gt;\n                &lt;/div&gt;\n                &lt;div class=&quot;iframeContainer&quot;&gt;\n                    &lt;iframe th:src=&quot;@{categories/minecraft.html}&quot; class=&quot;iframeTrueContainer&quot; id=&quot;iframeTrueContainerId&quot;&gt;&lt;/iframe&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>minecraft.html:</strong></p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;minecraft&lt;/title&gt;\n    &lt;link href=&quot;../style_main.css&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot;&gt;\n    &lt;script src=&quot;../jsc/gridItemChecker.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=&quot;homeDiv&quot;&gt;\n\n    &lt;/div&gt;\n    &lt;div class=&quot;gridContent&quot;&gt;\n        &lt;div class=&quot;gridItem&quot; th:each=&quot;file : ${files}&quot;&gt;\n            &lt;div&gt;&lt;img src=&quot;@{file.iconpath}&quot; alt=&quot;icon&quot;&gt;&lt;/div&gt;\n            &lt;div class=&quot;packNameDiv&quot;&gt;&lt;p class=&quot;packName&quot; th:text=&quot;${file.name}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\n            &lt;div&gt;&lt;p class=&quot;sizeName&quot;&gt;Размер&lt;/p&gt;&lt;p class=&quot;sizeFact&quot; th:text=&quot;${file.filesize}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\n            &lt;div&gt;&lt;p class=&quot;option1&quot;&gt;FML&lt;/p&gt;&lt;p class=&quot;option2&quot; th:text=&quot;${file.option1}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\n            &lt;div&gt;&lt;p class=&quot;option1&quot;&gt;Версия&lt;/p&gt;&lt;p class=&quot;option2&quot; th:text=&quot;${file.option2}&quot;&gt;&lt;/p&gt;&lt;/div&gt;\n            &lt;a class=&quot;gridItemBtn&quot; href=&quot;#&quot; tabindex=&quot;0&quot;&gt;Скачать&lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong>file system:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/0BA6e.png\" rel=\"nofollow noreferrer\">project file system</a></p>\n<p>I want the thymeleaf tags to work in the other .html files that are used in my iframes, but instead they don't work and just stay in the html code of the page instead of replacing themselves with the required html code.</p>\n<p><strong>1 EDIT:</strong></p>\n<pre><code>&lt;div class=&quot;iframeContainer&quot;&gt;\n                    &lt;iframe th:src=&quot;/categories/minecraft&quot; class=&quot;iframeTrueContainer&quot; id=&quot;iframeTrueContainerId&quot;&gt;&lt;/iframe&gt;\n&lt;/div&gt;\n</code></pre>\n<p><strong>MainController.java:</strong></p>\n<pre><code>@Controller\npublic class MainController {\n    UsersFilesController controller;\n\n    @Autowired\n    public MainController(UsersFilesController controller) {\n        this.controller = controller;\n    }\n\n    @GetMapping(&quot;/&quot;)\n    public String index(Model model){\n        List&lt;UsersFile&gt; files = controller.getAll();\n        model.addAttribute(&quot;files&quot;, files);\n        System.out.println(model.getAttribute(&quot;files&quot;));\n        return &quot;/main/index&quot;;\n    }\n\n    @GetMapping(&quot;/categories/minecraft&quot;)\n    public String minecraft(Model model){\n        return &quot;categories/minecraft&quot;;\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android","youtube-data-api"],"owner":{"account_id":14996951,"reputation":390,"user_id":10825994,"display_name":"Viraj S"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":292,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690201766,"creation_date":1690198152,"question_id":76754021,"body_markdown":"We have a requirement to show live streaming in android app for specific users only.\r\nCurrently normal videos are playing fine but stream / live URL is not working.\r\nTried each video format in MIME Type but gives source error. \r\nandroidx.media3.exoplayer.source.UnrecognizedInputFormatException: None of the available extractors could read streams.\r\n\r\n```\r\nexoPlayer = new ExoPlayer.Builder(getApplicationContext())\r\n              .setMediaSourceFactory(new DefaultMediaSourceFactory(new DefaultHttpDataSource.Factory()).setLiveTargetOffsetMs(5000))\r\n              .setHandleAudioBecomingNoisy(true)\r\n              .setWakeMode(WAKE_MODE_LOCAL)\r\n              .setTrackSelector(new DefaultTrackSelector(this))\r\n              .setBandwidthMeter(new DefaultBandwidthMeter.Builder(this).build())\r\n              .setLivePlaybackSpeedControl(new DefaultLivePlaybackSpeedControl.Builder().setFallbackMaxPlaybackSpeed(1.04f).build())\r\n              .build();\r\n```\r\n\r\n\r\n\r\n```\r\nMediaItem mediaItem = new MediaItem.Builder()\r\n              .setUri(mediaUri)\r\n              .setMimeType(MimeTypes.VIDEO_MP4)\r\n              .setLiveConfiguration(new MediaItem.LiveConfiguration.Builder().setMaxPlaybackSpeed(1.02f).build())\r\n              .build();\r\n```\r\n \r\nIs there something missing?\r\n\r\nExpecting to smoothly run live streaming youtube url&#39;s.","title":"Youtube live url not working in media3 Exo Player - Android Java","body":"<p>We have a requirement to show live streaming in android app for specific users only.\nCurrently normal videos are playing fine but stream / live URL is not working.\nTried each video format in MIME Type but gives source error.\nandroidx.media3.exoplayer.source.UnrecognizedInputFormatException: None of the available extractors could read streams.</p>\n<pre><code>exoPlayer = new ExoPlayer.Builder(getApplicationContext())\n              .setMediaSourceFactory(new DefaultMediaSourceFactory(new DefaultHttpDataSource.Factory()).setLiveTargetOffsetMs(5000))\n              .setHandleAudioBecomingNoisy(true)\n              .setWakeMode(WAKE_MODE_LOCAL)\n              .setTrackSelector(new DefaultTrackSelector(this))\n              .setBandwidthMeter(new DefaultBandwidthMeter.Builder(this).build())\n              .setLivePlaybackSpeedControl(new DefaultLivePlaybackSpeedControl.Builder().setFallbackMaxPlaybackSpeed(1.04f).build())\n              .build();\n</code></pre>\n<pre><code>MediaItem mediaItem = new MediaItem.Builder()\n              .setUri(mediaUri)\n              .setMimeType(MimeTypes.VIDEO_MP4)\n              .setLiveConfiguration(new MediaItem.LiveConfiguration.Builder().setMaxPlaybackSpeed(1.02f).build())\n              .build();\n</code></pre>\n<p>Is there something missing?</p>\n<p>Expecting to smoothly run live streaming youtube url's.</p>\n"},{"tags":["java","maven","intellij-idea","dependencies","minecraft"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1423658377,"post_id":28454474,"comment_id":45236024,"body_markdown":"Simply cause the given version does not exist in the defined repository.","body":"Simply cause the given version does not exist in the defined repository."},{"owner":{"account_id":5214743,"reputation":4743,"user_id":4170073,"display_name":"aw-think"},"score":0,"creation_date":1423658482,"post_id":28454474,"comment_id":45236085,"body_markdown":"1.8-R0.1-SNAPSHOT only exists in the given repository","body":"1.8-R0.1-SNAPSHOT only exists in the given repository"},{"owner":{"account_id":477471,"reputation":4682,"user_id":888990,"accept_rate":68,"display_name":"crmepham"},"score":0,"creation_date":1423658633,"post_id":28454474,"comment_id":45236171,"body_markdown":"I changed the version to `1.8-R0.1-SNAPSHOT` and all three are still red","body":"I changed the version to <code>1.8-R0.1-SNAPSHOT</code> and all three are still red"},{"owner":{"account_id":52109,"reputation":16183,"user_id":155695,"accept_rate":86,"display_name":"Jimmy"},"score":0,"creation_date":1423790367,"post_id":28454474,"comment_id":45303024,"body_markdown":"The reason its still red is possibly because intelliJ hasn&#39;t re-imported the pom.xml, see my answer below","body":"The reason its still red is possibly because intelliJ hasn&#39;t re-imported the pom.xml, see my answer below"}],"answers":[{"tags":[],"owner":{"account_id":4094217,"reputation":3104,"user_id":3361467,"display_name":"Ray"},"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1423658451,"creation_date":1423658451,"answer_id":28454623,"question_id":28454474,"body_markdown":"The dependency doesn&#39;t exist in the repo. If you follow the [repository link][1], you see that the only version inside is **1.8-R0.1-SNAPSHOT**. So you must change that version inside your pom.\r\n\r\n\r\n  [1]: https://hub.spigotmc.org/nexus/content/groups/public/org/bukkit/bukkit/","title":"Maven dependency not found for org.bukkit:bukkit","body":"<p>The dependency doesn't exist in the repo. If you follow the <a href=\"https://hub.spigotmc.org/nexus/content/groups/public/org/bukkit/bukkit/\" rel=\"nofollow\">repository link</a>, you see that the only version inside is <strong>1.8-R0.1-SNAPSHOT</strong>. So you must change that version inside your pom.</p>\n"},{"tags":[],"owner":{"account_id":379763,"reputation":29886,"user_id":733345,"display_name":"Joe"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1423658835,"creation_date":1423658835,"answer_id":28454771,"question_id":28454474,"body_markdown":"[Bukkit as a Maven dependency](http://wiki.bukkit.org/Bukkit_as_a_Maven_Dependency) suggests a different repository:\r\n\r\n    &lt;repository&gt;\r\n      &lt;id&gt;bukkit-repo&lt;/id&gt;\r\n      &lt;url&gt;http://repo.bukkit.org/content/groups/public/&lt;/url&gt;\r\n    &lt;/repository&gt;\r\n\r\nOn inspection, it [includes 1.7.2-R0.3](https://repo.bukkit.org/content/groups/public/org/bukkit/bukkit/1.7.2-R0.3/).\r\n\r\n(It also works over SSL, as `https://repo.bukkit.org/content/groups/public/`, which you should prefer.)","title":"Maven dependency not found for org.bukkit:bukkit","body":"<p><a href=\"http://wiki.bukkit.org/Bukkit_as_a_Maven_Dependency\" rel=\"nofollow\">Bukkit as a Maven dependency</a> suggests a different repository:</p>\n\n<pre><code>&lt;repository&gt;\n  &lt;id&gt;bukkit-repo&lt;/id&gt;\n  &lt;url&gt;http://repo.bukkit.org/content/groups/public/&lt;/url&gt;\n&lt;/repository&gt;\n</code></pre>\n\n<p>On inspection, it <a href=\"https://repo.bukkit.org/content/groups/public/org/bukkit/bukkit/1.7.2-R0.3/\" rel=\"nofollow\">includes 1.7.2-R0.3</a>.</p>\n\n<p>(It also works over SSL, as <code>https://repo.bukkit.org/content/groups/public/</code>, which you should prefer.)</p>\n"},{"tags":[],"owner":{"account_id":52109,"reputation":16183,"user_id":155695,"accept_rate":86,"display_name":"Jimmy"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1423790334,"creation_date":1423790334,"answer_id":28491012,"question_id":28454474,"body_markdown":"The reason the text is red is because that dependency you&#39;ve specified can&#39;t be found in either maven central, or the additional repository you&#39;ve added.\r\n\r\nPaste the repo link into a browser, and you&#39;ll find that the dependency is actually `1.8-R0.1-SNAPSHOT` not `1.7.2-RO3` as the tutorial mentioned (maybe the tutorial is out of date, or that dependency has since been removed for some reason)\r\n\r\nChange the dep to \r\n\r\n\r\n    &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.bukkit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;bukkit&lt;/artifactId&gt;\r\n                &lt;version&gt;1.8-R0.1-SNAPSHOT&lt;/version&gt;\r\n                &lt;type&gt;jar&lt;/type&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\nIf you haven&#39;t already set auto-import on intelliJ, you&#39;ll get a popup in the top right hand corner asking if you want to re-import. IntelliJ then reads your pom.xml file, works out what dependencies you need and then downloads them.\r\n\r\nYou should see org.bukkit.bukkit under external dependencies in the left hand &quot;projects&quot; window, along with some other libraries it depends on, such as guava and commons lang.","title":"Maven dependency not found for org.bukkit:bukkit","body":"<p>The reason the text is red is because that dependency you've specified can't be found in either maven central, or the additional repository you've added.</p>\n\n<p>Paste the repo link into a browser, and you'll find that the dependency is actually <code>1.8-R0.1-SNAPSHOT</code> not <code>1.7.2-RO3</code> as the tutorial mentioned (maybe the tutorial is out of date, or that dependency has since been removed for some reason)</p>\n\n<p>Change the dep to </p>\n\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bukkit&lt;/groupId&gt;\n            &lt;artifactId&gt;bukkit&lt;/artifactId&gt;\n            &lt;version&gt;1.8-R0.1-SNAPSHOT&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n\n<p>If you haven't already set auto-import on intelliJ, you'll get a popup in the top right hand corner asking if you want to re-import. IntelliJ then reads your pom.xml file, works out what dependencies you need and then downloads them.</p>\n\n<p>You should see org.bukkit.bukkit under external dependencies in the left hand \"projects\" window, along with some other libraries it depends on, such as guava and commons lang.</p>\n"},{"tags":[],"owner":{"account_id":15914325,"reputation":71,"user_id":11534590,"display_name":"Micah Ludwick"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690201097,"creation_date":1690201097,"answer_id":76754450,"question_id":28454474,"body_markdown":"Posting as an answer for anyone who stumbles upon this as I could not find an answer that worked for me with 1.20.\r\n\r\nWhile trying to get the correct Maven dependency for `org.bukkit.plugin.java.JavaPlugin` I found [this page][1] on Spigot&#39;s site that pointed me to the correct dependency information that solved my issues.\r\n\r\n**pom.xml**\r\n\r\n    &lt;repositories&gt;\r\n\t    &lt;repository&gt;\r\n\t        &lt;id&gt;spigot-repo&lt;/id&gt;\r\n\t        &lt;url&gt;https://hub.spigotmc.org/nexus/content/repositories/snapshots/&lt;/url&gt;\r\n\t    &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n\t    &lt;dependency&gt;\r\n\t           &lt;groupId&gt;org.spigotmc&lt;/groupId&gt;\r\n\t           &lt;artifactId&gt;spigot-api&lt;/artifactId&gt;\r\n\t           &lt;version&gt;1.20.1-R0.1-SNAPSHOT&lt;/version&gt;\r\n\t           &lt;scope&gt;provided&lt;/scope&gt;\r\n\t    &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\r\n  [1]: https://www.spigotmc.org/wiki/spigot-maven/","title":"Maven dependency not found for org.bukkit:bukkit","body":"<p>Posting as an answer for anyone who stumbles upon this as I could not find an answer that worked for me with 1.20.</p>\n<p>While trying to get the correct Maven dependency for <code>org.bukkit.plugin.java.JavaPlugin</code> I found <a href=\"https://www.spigotmc.org/wiki/spigot-maven/\" rel=\"nofollow noreferrer\">this page</a> on Spigot's site that pointed me to the correct dependency information that solved my issues.</p>\n<p><strong>pom.xml</strong></p>\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;spigot-repo&lt;/id&gt;\n        &lt;url&gt;https://hub.spigotmc.org/nexus/content/repositories/snapshots/&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n           &lt;groupId&gt;org.spigotmc&lt;/groupId&gt;\n           &lt;artifactId&gt;spigot-api&lt;/artifactId&gt;\n           &lt;version&gt;1.20.1-R0.1-SNAPSHOT&lt;/version&gt;\n           &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":477471,"reputation":4682,"user_id":888990,"accept_rate":68,"display_name":"crmepham"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6304,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":28491012,"answer_count":4,"score":0,"last_activity_date":1690201097,"creation_date":1423658022,"question_id":28454474,"body_markdown":"The `groudID`, `artifactId` and `version` dependencies are not being found in Maven?\r\n\r\nI followed [this][1] tutorial to set up a Minecraft plugin which uses Maven.\r\n\r\nBut I get the error \r\n\r\n&gt; org.bukkit:bukkit:1.7.2-RO3 not found\r\n\r\nand the text font is red where everything else in the `pom` file is white.\r\n\r\nHere is the code in the pom file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;com.chrismepham&lt;/groupId&gt;\r\n        &lt;artifactId&gt;TestPlugin&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;1.7&lt;/source&gt;\r\n                        &lt;target&gt;1.7&lt;/target&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n        &lt;repositories&gt;\r\n            &lt;repository&gt;\r\n                &lt;id&gt;bukkit-repo&lt;/id&gt;\r\n                &lt;url&gt;https://hub.spigotmc.org/nexus/content/groups/public/&lt;/url&gt;\r\n            &lt;/repository&gt;\r\n        &lt;/repositories&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.bukkit&lt;/groupId&gt;\r\n                &lt;artifactId&gt;bukkit&lt;/artifactId&gt;\r\n                &lt;version&gt;1.7.2-R0.3&lt;/version&gt;\r\n                &lt;type&gt;jar&lt;/type&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\nWhy is the dependency not being found?\r\nEDIT:\r\n\r\nI changed the repository and dependency version as suggested but still have the error as shown in the picture:\r\n![red text][2]\r\n\r\n\r\n  [1]: http://wiki.bukkit.org/Plugin_Tutorial\r\n  [2]: http://i.stack.imgur.com/DPgG9.png","title":"Maven dependency not found for org.bukkit:bukkit","body":"<p>The <code>groudID</code>, <code>artifactId</code> and <code>version</code> dependencies are not being found in Maven?</p>\n\n<p>I followed <a href=\"http://wiki.bukkit.org/Plugin_Tutorial\" rel=\"nofollow noreferrer\">this</a> tutorial to set up a Minecraft plugin which uses Maven.</p>\n\n<p>But I get the error </p>\n\n<blockquote>\n  <p>org.bukkit:bukkit:1.7.2-RO3 not found</p>\n</blockquote>\n\n<p>and the text font is red where everything else in the <code>pom</code> file is white.</p>\n\n<p>Here is the code in the pom file:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;project xmlns=\"http://maven.apache.org/POM/4.0.0\"\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n         xsi:schemaLocation=\"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd\"&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.chrismepham&lt;/groupId&gt;\n    &lt;artifactId&gt;TestPlugin&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.7&lt;/source&gt;\n                    &lt;target&gt;1.7&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;bukkit-repo&lt;/id&gt;\n            &lt;url&gt;https://hub.spigotmc.org/nexus/content/groups/public/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.bukkit&lt;/groupId&gt;\n            &lt;artifactId&gt;bukkit&lt;/artifactId&gt;\n            &lt;version&gt;1.7.2-R0.3&lt;/version&gt;\n            &lt;type&gt;jar&lt;/type&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n\n<p>Why is the dependency not being found?\nEDIT:</p>\n\n<p>I changed the repository and dependency version as suggested but still have the error as shown in the picture:\n<img src=\"https://i.stack.imgur.com/DPgG9.png\" alt=\"red text\"></p>\n"},{"tags":["java","swagger","openapi"],"answers":[{"tags":[],"owner":{"account_id":16657935,"reputation":834,"user_id":13927534,"display_name":"Miss Skooter"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690200988,"creation_date":1685625769,"answer_id":76382361,"question_id":76357706,"body_markdown":"As far as I could find, there isn&#39;t any &quot;automatic&quot; way to do this. But I have found a rather straightforward method:\r\n\r\n#### Step 1: Retrieve the OpenAPI files and parse them into OpenAPI objects.\r\n\r\nYou can achieve this using Swagger `OpenAPIV3Parser`:\r\n\r\nLoop the below code for each `fileLocation` (OpenAPI YAML file) that you have.\r\n\r\n```\r\nOpenAPI parseOpenAPI(FileLocation fileLocation) throws MojoFailureException {\r\n    SwaggerParseResult swaggerParseResult = parser.readLocation(fileLocation.getUri().toString(), null, null);\r\n\r\n    if (null == swaggerParseResult || null == swaggerParseResult.getOpenAPI()) {\r\n        throw new MojoFailureException(&quot;Failed to parse the openAPI: &quot; + fileLocation);\r\n    }\r\n\r\n    return swaggerParseResult.getOpenAPI();\r\n}\r\n```\r\n\r\n#### Step 2: Merge the objects\r\n\r\nThis step is pretty much as you&#39;d expect, just adding anything I need from the other OpenAPI objects into my main OpenAPI object.\r\n\r\n```\r\nprivate OpenAPI aggregateOpenAPI(FileLocation mainopenAPI, List&lt;FileLocation&gt; openAPILocations) throws IOException, MojoFailureException {\r\n\r\n    OpenAPI projectOpenAPI = getOpenAPIFile(mainopenAPI);\r\n\r\n    if (projectOpenAPI.getComponents() == null) {\r\n        projectOpenAPI.setComponents(new Components());\r\n    }\r\n\r\n    for (FileLocation fileLocation: openAPILocations) {\r\n\r\n        OpenAPI openAPI = getOpenAPIFile(fileLocation);\r\n        openAPI.getPaths().forEach(projectOpenAPI.getPaths()::addPathItem);\r\n        Components components = openAPI.getComponents();\r\n        if (components != null) {\r\n            if (components.getParameters() != null) {\r\n                components.getParameters().forEach(projectOpenAPI.getComponents()::addParameters);\r\n            }\r\n            if (components.getSchemas() != null) {\r\n                components.getSchemas().forEach(projectOpenAPI.getComponents()::addSchemas);\r\n            }\r\n        }\r\n    }\r\n    return projectOpenAPI;\r\n}\r\n```\r\n\r\n#### Step 3: Parse and write to a file\r\n\r\nWhen I wrote this question, I was missing that Swagger actually provides the ability to parse an OpenAPI object directly into a YAML or JSON file.\r\n\r\n```\r\nString yamlOpenAPI = Yaml.pretty(projectOpenAPI);\r\n// or\r\nString jsonOpenAPI = Json.pretty(projectOpenAPI);\r\n\r\n// Write it into a file (make sure directory and file exist)\r\nFiles.write(Paths.get(&quot;path/to/file.yaml&quot;), yamlOpenAPI.getBytes());\r\n```\r\n\r\nEdit: \r\n\r\nNote that you may need to use `writeString` instead of `write` to support `UTF-8` characters like so:\r\n```\r\nFiles.writeString(Paths.get(&quot;path/to/file.yaml&quot;), yamlOpenAPI);\r\n```","title":"How can I aggregate paths from multiple completely unrelated OpenAPI files?","body":"<p>As far as I could find, there isn't any &quot;automatic&quot; way to do this. But I have found a rather straightforward method:</p>\n<h4>Step 1: Retrieve the OpenAPI files and parse them into OpenAPI objects.</h4>\n<p>You can achieve this using Swagger <code>OpenAPIV3Parser</code>:</p>\n<p>Loop the below code for each <code>fileLocation</code> (OpenAPI YAML file) that you have.</p>\n<pre><code>OpenAPI parseOpenAPI(FileLocation fileLocation) throws MojoFailureException {\n    SwaggerParseResult swaggerParseResult = parser.readLocation(fileLocation.getUri().toString(), null, null);\n\n    if (null == swaggerParseResult || null == swaggerParseResult.getOpenAPI()) {\n        throw new MojoFailureException(&quot;Failed to parse the openAPI: &quot; + fileLocation);\n    }\n\n    return swaggerParseResult.getOpenAPI();\n}\n</code></pre>\n<h4>Step 2: Merge the objects</h4>\n<p>This step is pretty much as you'd expect, just adding anything I need from the other OpenAPI objects into my main OpenAPI object.</p>\n<pre><code>private OpenAPI aggregateOpenAPI(FileLocation mainopenAPI, List&lt;FileLocation&gt; openAPILocations) throws IOException, MojoFailureException {\n\n    OpenAPI projectOpenAPI = getOpenAPIFile(mainopenAPI);\n\n    if (projectOpenAPI.getComponents() == null) {\n        projectOpenAPI.setComponents(new Components());\n    }\n\n    for (FileLocation fileLocation: openAPILocations) {\n\n        OpenAPI openAPI = getOpenAPIFile(fileLocation);\n        openAPI.getPaths().forEach(projectOpenAPI.getPaths()::addPathItem);\n        Components components = openAPI.getComponents();\n        if (components != null) {\n            if (components.getParameters() != null) {\n                components.getParameters().forEach(projectOpenAPI.getComponents()::addParameters);\n            }\n            if (components.getSchemas() != null) {\n                components.getSchemas().forEach(projectOpenAPI.getComponents()::addSchemas);\n            }\n        }\n    }\n    return projectOpenAPI;\n}\n</code></pre>\n<h4>Step 3: Parse and write to a file</h4>\n<p>When I wrote this question, I was missing that Swagger actually provides the ability to parse an OpenAPI object directly into a YAML or JSON file.</p>\n<pre><code>String yamlOpenAPI = Yaml.pretty(projectOpenAPI);\n// or\nString jsonOpenAPI = Json.pretty(projectOpenAPI);\n\n// Write it into a file (make sure directory and file exist)\nFiles.write(Paths.get(&quot;path/to/file.yaml&quot;), yamlOpenAPI.getBytes());\n</code></pre>\n<p>Edit:</p>\n<p>Note that you may need to use <code>writeString</code> instead of <code>write</code> to support <code>UTF-8</code> characters like so:</p>\n<pre><code>Files.writeString(Paths.get(&quot;path/to/file.yaml&quot;), yamlOpenAPI);\n</code></pre>\n"}],"owner":{"account_id":16657935,"reputation":834,"user_id":13927534,"display_name":"Miss Skooter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":290,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76382361,"answer_count":1,"score":1,"last_activity_date":1690200988,"creation_date":1685366063,"question_id":76357706,"body_markdown":"I am working on a [Maven](https://en.wikipedia.org/wiki/Apache_Maven) plugin to package some files that I need along with the JAR file. One of those files is an OpenAPI file named `component-descriptor.yaml`.\r\n\r\nAmong other things, the plugin needs to check the `component-descriptor.yaml` of the project&#39;s direct dependencies and &quot;aggregate&quot; the paths specified in those files into the current project&#39;s file. (I don&#39;t care about any of the other details like info, tags, etc.) These files are completely independent of each other and do not use `$ref` to refer to each other as described [in this question](https://stackoverflow.com/questions/54586137) - I cannot use `$ref` or similar mechanisms because the modules do not depend on each other.\r\n\r\nHow can I accomplish this goal?\r\n\r\nI was able to retrieve the `component-descriptor.yaml` of all direct dependencies and parse them (individually) using `io.swagger`. I know I could parse the files into Java objects and concatenate the list of paths into a single object, but how can I then turn that back into an OpenAPI file? I couldn&#39;t find any support in Swagger for doing so.","title":"How can I aggregate paths from multiple completely unrelated OpenAPI files?","body":"<p>I am working on a <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a> plugin to package some files that I need along with the JAR file. One of those files is an OpenAPI file named <code>component-descriptor.yaml</code>.</p>\n<p>Among other things, the plugin needs to check the <code>component-descriptor.yaml</code> of the project's direct dependencies and &quot;aggregate&quot; the paths specified in those files into the current project's file. (I don't care about any of the other details like info, tags, etc.) These files are completely independent of each other and do not use <code>$ref</code> to refer to each other as described <a href=\"https://stackoverflow.com/questions/54586137\">in this question</a> - I cannot use <code>$ref</code> or similar mechanisms because the modules do not depend on each other.</p>\n<p>How can I accomplish this goal?</p>\n<p>I was able to retrieve the <code>component-descriptor.yaml</code> of all direct dependencies and parse them (individually) using <code>io.swagger</code>. I know I could parse the files into Java objects and concatenate the list of paths into a single object, but how can I then turn that back into an OpenAPI file? I couldn't find any support in Swagger for doing so.</p>\n"},{"tags":["java","android","firebase","google-cloud-firestore"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1690200978,"post_id":49101373,"comment_id":135315853,"body_markdown":"Aside from my answer, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-map-an-array-of-objects-from-cloud-firestore-to-a-list-of-objects-122e579eae10) will also help future visitors.","body":"Aside from my answer, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-map-an-array-of-objects-from-cloud-firestore-to-a-list-of-objects-122e579eae10\" rel=\"nofollow noreferrer\">resource</a> will also help future visitors."}],"answers":[{"tags":[],"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1690200949,"creation_date":1520234048,"answer_id":49105190,"question_id":49101373,"body_markdown":"**Edit 13 Aug 2018:**\r\n\r\nAccording to the updated documentation regarding [array membership](https://firebase.google.com/docs/firestore/query-data/queries#array_membership), now it is possible to filter data based on array values using `whereArrayContains()` method. A simple example would be:\r\n\r\n    CollectionReference citiesRef = db.collection(&quot;cities&quot;);\r\n    citiesRef.whereArrayContains(&quot;regions&quot;, &quot;west_coast&quot;);\r\n\r\n&gt; This query returns every city document where the regions field is an array that contains west_coast. If the array has multiple instances of the value you query on, the document is included in the results only once.\r\n\r\n---\r\nAs per [official documentation regarding arrays](https://firebase.google.com/docs/firestore/solutions/arrays):\r\n\r\n&gt; Although Cloud Firestore can store arrays, **`it does not support`** querying array members or updating single array elements.\r\n\r\nIf you only want to get the entire `papers` array you need to iterate over a `Map` like this:\r\n\r\n    Map&lt;String, Object&gt; map = document.getData();\r\n    for (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\r\n        if (entry.getKey().equals(&quot;papers&quot;)) {\r\n            Log.d(&quot;TAG&quot;, entry.getValue().toString());\r\n        }\r\n    }\r\n\r\nBut note, even if `papers` object is stored in the database as an array, `entry.getValue()` returns an `ArrayList`, not an `array`.","title":"How to get an Array of Objects from Firestore","body":"<p><strong>Edit 13 Aug 2018:</strong></p>\n<p>According to the updated documentation regarding <a href=\"https://firebase.google.com/docs/firestore/query-data/queries#array_membership\" rel=\"nofollow noreferrer\">array membership</a>, now it is possible to filter data based on array values using <code>whereArrayContains()</code> method. A simple example would be:</p>\n<pre><code>CollectionReference citiesRef = db.collection(&quot;cities&quot;);\ncitiesRef.whereArrayContains(&quot;regions&quot;, &quot;west_coast&quot;);\n</code></pre>\n<blockquote>\n<p>This query returns every city document where the regions field is an array that contains west_coast. If the array has multiple instances of the value you query on, the document is included in the results only once.</p>\n</blockquote>\n<hr />\n<p>As per <a href=\"https://firebase.google.com/docs/firestore/solutions/arrays\" rel=\"nofollow noreferrer\">official documentation regarding arrays</a>:</p>\n<blockquote>\n<p>Although Cloud Firestore can store arrays, <strong><code>it does not support</code></strong> querying array members or updating single array elements.</p>\n</blockquote>\n<p>If you only want to get the entire <code>papers</code> array you need to iterate over a <code>Map</code> like this:</p>\n<pre><code>Map&lt;String, Object&gt; map = document.getData();\nfor (Map.Entry&lt;String, Object&gt; entry : map.entrySet()) {\n    if (entry.getKey().equals(&quot;papers&quot;)) {\n        Log.d(&quot;TAG&quot;, entry.getValue().toString());\n    }\n}\n</code></pre>\n<p>But note, even if <code>papers</code> object is stored in the database as an array, <code>entry.getValue()</code> returns an <code>ArrayList</code>, not an <code>array</code>.</p>\n"},{"tags":[],"owner":{"account_id":13135489,"reputation":109,"user_id":9861487,"display_name":"Basil Rawa"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1595740079,"creation_date":1595740079,"answer_id":63096313,"question_id":49101373,"body_markdown":"ArrayList&lt;Map&lt;String, Object&gt;&gt; arrayInTheDocument = (ArrayList&lt;Map&lt;String, Object&gt;&gt; ) documentSnapshot.getData().get(&quot;documentName.ArrayName&quot;);\r\n","title":"How to get an Array of Objects from Firestore","body":"<p>ArrayList&lt;Map&lt;String, Object&gt;&gt; arrayInTheDocument = (ArrayList&lt;Map&lt;String, Object&gt;&gt; ) documentSnapshot.getData().get(&quot;documentName.ArrayName&quot;);</p>\n"}],"owner":{"account_id":1258981,"reputation":14388,"user_id":1217820,"accept_rate":85,"display_name":"Snake"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13595,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":49105190,"answer_count":2,"score":9,"last_activity_date":1690200949,"creation_date":1520203991,"question_id":49101373,"body_markdown":"What would be the right way to query a field that is an array of maps.\r\n\r\nCurrently the structure is \r\n\r\n    Collection1\r\n         Document1\r\n             -papers:                &lt;---- This is an array  \r\n                  (0): \r\n                     -Name:abc\r\n                     -Id:123 \r\n                  (1): \r\n                     -Name:xyz\r\n                     -Id:456\r\n\r\n\r\nAnd this is my code\r\n\r\n    DocumentReference docRef = db.collection(&quot;Collection1&quot;).document(&quot;Document1&quot;);\r\n            docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\r\n                @Override\r\n                public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\r\n                    if (task.isSuccessful()) {\r\n                        DocumentSnapshot document = task.getResult();\r\n                        if (document != null &amp;&amp; document.exists()) {\r\n                           //?? how can I retrieve papers\r\n                    }\r\n                }\r\n            });\r\n\r\n\r\nBasically do I retrieve it and cast it as an ArrayList&lt;Map&lt;String,String&gt;&gt; and then loop through it to create my final ArrayList&lt;PaperModel&gt; ?\r\n\r\n\r\nOr how does it work ?\r\n \r\n","title":"How to get an Array of Objects from Firestore","body":"<p>What would be the right way to query a field that is an array of maps.</p>\n\n<p>Currently the structure is </p>\n\n<pre><code>Collection1\n     Document1\n         -papers:                &lt;---- This is an array  \n              (0): \n                 -Name:abc\n                 -Id:123 \n              (1): \n                 -Name:xyz\n                 -Id:456\n</code></pre>\n\n<p>And this is my code</p>\n\n<pre><code>DocumentReference docRef = db.collection(\"Collection1\").document(\"Document1\");\n        docRef.get().addOnCompleteListener(new OnCompleteListener&lt;DocumentSnapshot&gt;() {\n            @Override\n            public void onComplete(@NonNull Task&lt;DocumentSnapshot&gt; task) {\n                if (task.isSuccessful()) {\n                    DocumentSnapshot document = task.getResult();\n                    if (document != null &amp;&amp; document.exists()) {\n                       //?? how can I retrieve papers\n                }\n            }\n        });\n</code></pre>\n\n<p>Basically do I retrieve it and cast it as an ArrayList> and then loop through it to create my final ArrayList ?</p>\n\n<p>Or how does it work ?</p>\n"},{"tags":["java","sql","spring-boot","spring-data-jpa","snowflake-schema"],"comments":[{"owner":{"account_id":7113913,"reputation":2404,"user_id":5440883,"display_name":"Chris Maurer"},"score":0,"creation_date":1690205315,"post_id":76754412,"comment_id":135316863,"body_markdown":"Since you do not actually need to specify the column labels after the first query you might try dropping the as clauses in UNION s &#39;2&#39; through &#39;6&quot;.","body":"Since you do not actually need to specify the column labels after the first query you might try dropping the as clauses in UNION s &#39;2&#39; through &#39;6&quot;."}],"owner":{"account_id":10981964,"reputation":43,"user_id":8068792,"accept_rate":0,"display_name":"Prabhash Mishra"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690200903,"creation_date":1690200903,"question_id":76754412,"body_markdown":"I am executing snowflake query in springboot. I am getting Sql compilation error.\r\n\r\nJava String Query:\r\n\r\n    &quot;\tselect &#39;1&#39; as AgeGroup, &#39;0-17&#39; as ag_label from sysibm.sysdummy1 union &quot; +\r\n                &quot;\tselect &#39;2&#39; as AgeGroup, &#39;18-34&#39; as ag_label from sysibm.sysdummy1 union &quot; +\r\n                &quot;\tselect &#39;3&#39; as AgeGroup, &#39;35-44&#39; as ag_label from sysibm.sysdummy1 union &quot; +\r\n                &quot;\tselect &#39;4&#39; as AgeGroup, &#39;45-54&#39; as ag_label from sysibm.sysdummy1 union &quot; +\r\n                &quot;\tselect &#39;5&#39; as AgeGroup, &#39;55-64&#39; as ag_label from sysibm.sysdummy1 union &quot; +\r\n                &quot;\tselect &#39;6&#39; as AgeGroup, &#39;65+&#39; as ag_label from sysibm.sysdummy1 &quot;\r\nHere only &#39;65+&#39; as ag_label giving error &quot;**unexpected &#39;as&#39;. syntax error**&quot; \r\n\r\nQuery on Snowflake side executing as:\r\n\r\n    select 1 as AgeGroup, 0 - 17 as ag_label from sysibm.sysdummy1 union select 2 as AgeGroup, 18 - 34 as ag_label from sysibm.sysdummy1 union select 3 as AgeGroup, 35 - 44 as ag_label from sysibm.sysdummy1 union select 4 as AgeGroup, 45 - 54 as ag_label from sysibm.sysdummy1 union select 5 as AgeGroup, 55 - 64 as ag_label from sysibm.sysdummy1 union select 6 as AgeGroup, 65 + as ag_label from sysibm.sysdummy1\r\n\r\nI am new to snowflake. Can anyone please help me out how I can correct the syntax.\r\n\r\nRegards,\r\nPrabhash\r\n\r\n","title":"Snowflake Query Compilation issue","body":"<p>I am executing snowflake query in springboot. I am getting Sql compilation error.</p>\n<p>Java String Query:</p>\n<pre><code>&quot;   select '1' as AgeGroup, '0-17' as ag_label from sysibm.sysdummy1 union &quot; +\n            &quot;   select '2' as AgeGroup, '18-34' as ag_label from sysibm.sysdummy1 union &quot; +\n            &quot;   select '3' as AgeGroup, '35-44' as ag_label from sysibm.sysdummy1 union &quot; +\n            &quot;   select '4' as AgeGroup, '45-54' as ag_label from sysibm.sysdummy1 union &quot; +\n            &quot;   select '5' as AgeGroup, '55-64' as ag_label from sysibm.sysdummy1 union &quot; +\n            &quot;   select '6' as AgeGroup, '65+' as ag_label from sysibm.sysdummy1 &quot;\n</code></pre>\n<p>Here only '65+' as ag_label giving error &quot;<strong>unexpected 'as'. syntax error</strong>&quot;</p>\n<p>Query on Snowflake side executing as:</p>\n<pre><code>select 1 as AgeGroup, 0 - 17 as ag_label from sysibm.sysdummy1 union select 2 as AgeGroup, 18 - 34 as ag_label from sysibm.sysdummy1 union select 3 as AgeGroup, 35 - 44 as ag_label from sysibm.sysdummy1 union select 4 as AgeGroup, 45 - 54 as ag_label from sysibm.sysdummy1 union select 5 as AgeGroup, 55 - 64 as ag_label from sysibm.sysdummy1 union select 6 as AgeGroup, 65 + as ag_label from sysibm.sysdummy1\n</code></pre>\n<p>I am new to snowflake. Can anyone please help me out how I can correct the syntax.</p>\n<p>Regards,\nPrabhash</p>\n"},{"tags":["java","spring","junit","spring-test","entitymanager"],"owner":{"account_id":3039250,"reputation":528,"user_id":2576667,"accept_rate":50,"display_name":"bolski"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690200285,"creation_date":1689706610,"question_id":76715809,"body_markdown":"We have a Java EE application that runs within Apache Tomcat. It uses EJB 3.0 along with Spring framework. \r\n\r\nThe Entity Manager is injected within a DBL object as such:\r\n\r\n```\r\npublic abstract class DBL extends LogBL {\r\n\r\n    // &lt;editor-fold defaultstate=&quot;collasped&quot; desc=&quot;Properties&quot;&gt;\r\n    @Autowired(required = true)\r\n    @Qualifier(&quot;dataSource&quot;)\r\n    protected DataSource dataSource;\r\n\r\n    @PersistenceContext()\r\n    protected EntityManager em;\r\n\r\n    @Autowired(required = true)\r\n    @Qualifier(&quot;transactionTemplate&quot;)\r\n    protected TransactionTemplate transactionTemplate;\r\n\r\n```\r\n\r\nFrom there, our business layer objects will extend DBL so that they inherit the entity manager.\r\n\r\nThis all works within our Apache Tomcat system. However, we have an issue that I need to debug which I cannot tell if it&#39;s a data issue in the database, or a logic flaw in the code, so I want to run the business logic locally within Netbeans via jUnit so I can debug and trace the code interactively.\r\n\r\nWe have a section of code that does the following:\r\n\r\n```\r\n        Query q = em.createNativeQuery(&quot;SELECT DISTINCT r.src_system_name, &quot; + &quot;                r.src_pt_name, &quot;\r\n                + &quot;                r.src_flow_name, &quot; + &quot;                r.ivl_length_ddl_val, &quot;\r\n                + &quot;                r.ivl_precision_ddl_val, &quot; + &quot;                r.ivl_type_ddl_val &quot;\r\n                + &quot;    FROM raw_interval r &quot; + &quot;   WHERE r.processed_flag=&#39;N&#39; &quot;\r\n                + &quot;     AND r.mod_date &lt; systimestamp - &quot; + DAYS + &quot; &quot; + &quot;ORDER BY r.src_system_name &quot;);\r\n        List&lt;Object[]&gt; lo = q.getResultList();\r\n        StringBuffer sb = new StringBuffer();\r\n        String currentSrcId = &quot;&quot;;\r\n```\r\n\r\nThis all works fine.\r\n\r\nWe check to see if the **lo** object has any data returned, and if so, it will then go an execute an update statement to update the records. The code to do so is as follows:\r\n\r\n```\r\n            Query qU = em.createNativeQuery(&quot;UPDATE raw_interval r &quot; + &quot;   SET r.processed_flag = &#39;F&#39; &quot;\r\n                    + &quot; WHERE r.processed_flag=&#39;N&#39; &quot; + &quot;   AND r.mod_date &lt; systimestamp - &quot; + DAYS + &quot; &quot;);\r\n            qU.executeUpdate();\r\n```\r\n\r\nThis all works, as I stated, when running in Apache Tomcat.\r\n\r\nThe problem is, when I do it in a jUnit test case, the first select statement works, but as soon as it tries to do the update right after, it throws an error stating:\r\n\r\n&gt; e = (corebuslogic.common.exceptions.LoggedException) corebuslogic.common.exceptions.LoggedException: Cannot call methods requiring a transaction if the entity manager has not been joined to the current transaction.\r\n\r\nHere is the jUnit test case. Also, the spring-text.xml sets up JTA as the transaction manager which is fine for when it runs in our Tomcat instance. But here, the original developers apparently set up the transaction for the jUnit tests to still use JTA which I think is possibly the issue when trying to run this locally in Netbeans via a jUnit test case. I&#39;m still learning about Spring, etc but this is an application that was dropped in my lap after it went live. I was never a part of the development of the application.\r\n\r\n```\r\n@RunWith(SpringJUnit4ClassRunner.class)\r\n@ContextConfiguration(inheritLocations = true, locations = &quot;classpath:spring/spring-test.xml&quot;)\r\n@TransactionConfiguration(defaultRollback = true)\r\n@Transactional\r\npublic class ProcessRawBLTest {\r\n\r\n  @Autowired\r\n  @Qualifier(ProcessRawBL.BEAN_NAME)\r\n  private ProcessRawBL processRawBL;\r\n  @Autowired\r\n  @Qualifier(LookupBL.BEAN_NAME)\r\n  private LookupBL lookupBL;\r\n\r\n  @Test\r\n  @Transactional\r\n  public void testProcessRawMV90Actual() {\r\n    int sizeThreadPool = 1;\r\n    Config processRawThreadsConfig = lookupBL.findConfigByNamespace(CONFIG.ProcessRaw_Threads.value);\r\n    if (processRawThreadsConfig != null) {\r\n      sizeThreadPool = Integer.parseInt(processRawThreadsConfig.getConfigVal());\r\n    }\r\n\r\n    String[] srcArray = new String[] { &quot;MV90 Actual&quot; };\r\n    List&lt;String&gt; sources = new ArrayList&lt;&gt;();\r\n    for (String source : srcArray) {\r\n      sources.add(source);\r\n    }\r\n    StringBuffer result = new StringBuffer();\r\n    try {\r\n      processRawBL.processRaw(sources, sizeThreadPool, result);\r\n    } catch (Exception e) {\r\n      e.printStackTrace();\r\n    }\r\n  }\r\n```\r\n\r\nThe call into the processRawBL.processRaw() function will eventually access the injected EntityManager and as I stated, it works fine as long as we&#39;re just selecting data. \r\n\r\nBut once we need a transaction for updates, then it won&#39;t work and throws the exception.\r\n\r\nIt can read the database, but we just can&#39;t write to it when trying to run the code locally and not within the Apache Tomcat container.\r\n\r\nHopefully that gives enough information. I&#39;ve had some people at work say that mixing jUnit with the non Springboot Spring framework can get a little quirky, but I wasn&#39;t sure if that was true or not.\r\n","title":"EntityManager cannot perform updates within data layer object called from within a jUnit test","body":"<p>We have a Java EE application that runs within Apache Tomcat. It uses EJB 3.0 along with Spring framework.</p>\n<p>The Entity Manager is injected within a DBL object as such:</p>\n<pre><code>public abstract class DBL extends LogBL {\n\n    // &lt;editor-fold defaultstate=&quot;collasped&quot; desc=&quot;Properties&quot;&gt;\n    @Autowired(required = true)\n    @Qualifier(&quot;dataSource&quot;)\n    protected DataSource dataSource;\n\n    @PersistenceContext()\n    protected EntityManager em;\n\n    @Autowired(required = true)\n    @Qualifier(&quot;transactionTemplate&quot;)\n    protected TransactionTemplate transactionTemplate;\n\n</code></pre>\n<p>From there, our business layer objects will extend DBL so that they inherit the entity manager.</p>\n<p>This all works within our Apache Tomcat system. However, we have an issue that I need to debug which I cannot tell if it's a data issue in the database, or a logic flaw in the code, so I want to run the business logic locally within Netbeans via jUnit so I can debug and trace the code interactively.</p>\n<p>We have a section of code that does the following:</p>\n<pre><code>        Query q = em.createNativeQuery(&quot;SELECT DISTINCT r.src_system_name, &quot; + &quot;                r.src_pt_name, &quot;\n                + &quot;                r.src_flow_name, &quot; + &quot;                r.ivl_length_ddl_val, &quot;\n                + &quot;                r.ivl_precision_ddl_val, &quot; + &quot;                r.ivl_type_ddl_val &quot;\n                + &quot;    FROM raw_interval r &quot; + &quot;   WHERE r.processed_flag='N' &quot;\n                + &quot;     AND r.mod_date &lt; systimestamp - &quot; + DAYS + &quot; &quot; + &quot;ORDER BY r.src_system_name &quot;);\n        List&lt;Object[]&gt; lo = q.getResultList();\n        StringBuffer sb = new StringBuffer();\n        String currentSrcId = &quot;&quot;;\n</code></pre>\n<p>This all works fine.</p>\n<p>We check to see if the <strong>lo</strong> object has any data returned, and if so, it will then go an execute an update statement to update the records. The code to do so is as follows:</p>\n<pre><code>            Query qU = em.createNativeQuery(&quot;UPDATE raw_interval r &quot; + &quot;   SET r.processed_flag = 'F' &quot;\n                    + &quot; WHERE r.processed_flag='N' &quot; + &quot;   AND r.mod_date &lt; systimestamp - &quot; + DAYS + &quot; &quot;);\n            qU.executeUpdate();\n</code></pre>\n<p>This all works, as I stated, when running in Apache Tomcat.</p>\n<p>The problem is, when I do it in a jUnit test case, the first select statement works, but as soon as it tries to do the update right after, it throws an error stating:</p>\n<blockquote>\n<p>e = (corebuslogic.common.exceptions.LoggedException) corebuslogic.common.exceptions.LoggedException: Cannot call methods requiring a transaction if the entity manager has not been joined to the current transaction.</p>\n</blockquote>\n<p>Here is the jUnit test case. Also, the spring-text.xml sets up JTA as the transaction manager which is fine for when it runs in our Tomcat instance. But here, the original developers apparently set up the transaction for the jUnit tests to still use JTA which I think is possibly the issue when trying to run this locally in Netbeans via a jUnit test case. I'm still learning about Spring, etc but this is an application that was dropped in my lap after it went live. I was never a part of the development of the application.</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration(inheritLocations = true, locations = &quot;classpath:spring/spring-test.xml&quot;)\n@TransactionConfiguration(defaultRollback = true)\n@Transactional\npublic class ProcessRawBLTest {\n\n  @Autowired\n  @Qualifier(ProcessRawBL.BEAN_NAME)\n  private ProcessRawBL processRawBL;\n  @Autowired\n  @Qualifier(LookupBL.BEAN_NAME)\n  private LookupBL lookupBL;\n\n  @Test\n  @Transactional\n  public void testProcessRawMV90Actual() {\n    int sizeThreadPool = 1;\n    Config processRawThreadsConfig = lookupBL.findConfigByNamespace(CONFIG.ProcessRaw_Threads.value);\n    if (processRawThreadsConfig != null) {\n      sizeThreadPool = Integer.parseInt(processRawThreadsConfig.getConfigVal());\n    }\n\n    String[] srcArray = new String[] { &quot;MV90 Actual&quot; };\n    List&lt;String&gt; sources = new ArrayList&lt;&gt;();\n    for (String source : srcArray) {\n      sources.add(source);\n    }\n    StringBuffer result = new StringBuffer();\n    try {\n      processRawBL.processRaw(sources, sizeThreadPool, result);\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n</code></pre>\n<p>The call into the processRawBL.processRaw() function will eventually access the injected EntityManager and as I stated, it works fine as long as we're just selecting data.</p>\n<p>But once we need a transaction for updates, then it won't work and throws the exception.</p>\n<p>It can read the database, but we just can't write to it when trying to run the code locally and not within the Apache Tomcat container.</p>\n<p>Hopefully that gives enough information. I've had some people at work say that mixing jUnit with the non Springboot Spring framework can get a little quirky, but I wasn't sure if that was true or not.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1472493122,"post_id":39212145,"comment_id":65763246,"body_markdown":"The problem is that there is no such file. Your resource is now bundled in the jar file, so it isn&#39;t even represented as a file at all.","body":"The problem is that there is no such file. Your resource is now bundled in the jar file, so it isn&#39;t even represented as a file at all."}],"answers":[{"tags":[],"owner":{"account_id":4497436,"reputation":18081,"user_id":3656904,"accept_rate":67,"display_name":"talex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1472493226,"creation_date":1472493226,"answer_id":39212262,"question_id":39212145,"body_markdown":"`new File(&quot;resources/PdfTemplates/ostoPohja.pdf&quot;)` search `resources` folder in current folder then search `PdfTemplates` in it and `ostoPohja.pdf` in result of previouse search.\r\n\r\nYou shold have those folder structure next to your `jar` if you run double clicking on it.\r\n\r\nOther option is you can embed those files into your `jar` file (which you most probably already did) then you should load them like this `Thread.currentThread().getClassloader().loadResourceAsStream((&quot;resources/PdfTemplates/myyntiPohja.pdf&quot;)` and then utileze this stream instead of file.","title":"Reference to PDF-file after JavaFX program is built","body":"<p><code>new File(\"resources/PdfTemplates/ostoPohja.pdf\")</code> search <code>resources</code> folder in current folder then search <code>PdfTemplates</code> in it and <code>ostoPohja.pdf</code> in result of previouse search.</p>\n\n<p>You shold have those folder structure next to your <code>jar</code> if you run double clicking on it.</p>\n\n<p>Other option is you can embed those files into your <code>jar</code> file (which you most probably already did) then you should load them like this <code>Thread.currentThread().getClassloader().loadResourceAsStream((\"resources/PdfTemplates/myyntiPohja.pdf\")</code> and then utileze this stream instead of file.</p>\n"},{"tags":[],"owner":{"account_id":6602571,"reputation":46,"user_id":5100388,"display_name":"Donaven Snowden"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472493292,"creation_date":1472493292,"answer_id":39212288,"question_id":39212145,"body_markdown":"Is there any reason that you can&#39;t use the full directory of the pdfs? Example:\r\n\r\n&gt; C:/Users/*Your Username*/Path/to/template.pdf","title":"Reference to PDF-file after JavaFX program is built","body":"<p>Is there any reason that you can't use the full directory of the pdfs? Example:</p>\n\n<blockquote>\n  <p>C:/Users/<em>Your Username</em>/Path/to/template.pdf</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":7649983,"reputation":1584,"user_id":5799145,"accept_rate":57,"display_name":"CraigR8806"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1472493307,"creation_date":1472493307,"answer_id":39212291,"question_id":39212145,"body_markdown":"You  have to use |NAME_OF_YOUR_CLASS|.class.getClass().getResourceAsStream(&quot;PATH_TO_FILE_RELATIVE_TO_ROOT_OF_PROJECT&quot;.\r\n\r\nThe above returns an InputStream Object.  This can be used like so:\r\n\r\nBufferedReader br = new BufferedReader(new FileInputStream(*));\r\n\r\n","title":"Reference to PDF-file after JavaFX program is built","body":"<p>You  have to use |NAME_OF_YOUR_CLASS|.class.getClass().getResourceAsStream(\"PATH_TO_FILE_RELATIVE_TO_ROOT_OF_PROJECT\".</p>\n\n<p>The above returns an InputStream Object.  This can be used like so:</p>\n\n<p>BufferedReader br = new BufferedReader(new FileInputStream(*));</p>\n"},{"tags":[],"owner":{"account_id":13649968,"reputation":170,"user_id":9848124,"display_name":"Matthias Kuhn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690200277,"creation_date":1690200277,"answer_id":76754325,"question_id":39212145,"body_markdown":"I had a similar Problem with a PDF file that could not be shown after building a jpackage .exe.\r\n\r\nMy solution now is to copy the PDF into the jpackage-build folder using gradle:\r\n\r\n    tasks.jpackageImage.doLast {\r\n        copy {\r\n            from &quot;src/main/resources&quot;\r\n            include &quot;my-file.pdf&quot;\r\n            into &quot;build/jpackage/$project.name/src/main/resources&quot;\r\n        }\r\n    }\r\nAnd in the JAVA code I can open the PDF using:\r\n\r\n    File file = new File(&quot;src/main/resources/my-file.pdf&quot;);\r\n    hostServices.showDocument(file.getAbsolutePath());","title":"Reference to PDF-file after JavaFX program is built","body":"<p>I had a similar Problem with a PDF file that could not be shown after building a jpackage .exe.</p>\n<p>My solution now is to copy the PDF into the jpackage-build folder using gradle:</p>\n<pre><code>tasks.jpackageImage.doLast {\n    copy {\n        from &quot;src/main/resources&quot;\n        include &quot;my-file.pdf&quot;\n        into &quot;build/jpackage/$project.name/src/main/resources&quot;\n    }\n}\n</code></pre>\n<p>And in the JAVA code I can open the PDF using:</p>\n<pre><code>File file = new File(&quot;src/main/resources/my-file.pdf&quot;);\nhostServices.showDocument(file.getAbsolutePath());\n</code></pre>\n"}],"owner":{"account_id":8697351,"reputation":25,"user_id":6508341,"accept_rate":50,"display_name":"Hiltunea"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":39212262,"answer_count":4,"score":0,"last_activity_date":1690200277,"creation_date":1472492743,"question_id":39212145,"body_markdown":"I have a program that is working perfectly when I run it from the IDE.\r\nHowever, when I make an executable jar it cannot find two of the PDF files I have in a sub folder in source folder.\r\n\r\nHow should I reference to these files?\r\n\r\nMy project structure is: &lt;br&gt;\r\nresources (source folder) &lt;br&gt;\r\n- PdfTemplates (normal folder) &lt;br&gt;\r\n- - myyntiPohja.pdf &lt;br&gt;\r\n- - ostoPohja.pdf\r\n\r\nWhen I run the program from the IDE I get java.io.File with the following reference: &lt;br&gt;\r\nFile offerDocument = new File(&quot;resources/PdfTemplates/ostoPohja.pdf&quot;); &lt;br&gt;\r\nand &lt;br&gt;\r\nFile offerDocument = new File(&quot;resources/PdfTemplates/myyntiPohja.pdf&quot;); &lt;br&gt;\r\n&lt;br&gt;\r\nThis works fine until I compile the project either with Export -&gt; Runnable Jar file or with build.fxbuild -&gt; ant build.xml and run. &lt;br&gt;\r\n\r\nCould someone please tell me what is the problem?","title":"Reference to PDF-file after JavaFX program is built","body":"<p>I have a program that is working perfectly when I run it from the IDE.\nHowever, when I make an executable jar it cannot find two of the PDF files I have in a sub folder in source folder.</p>\n\n<p>How should I reference to these files?</p>\n\n<p>My project structure is: <br>\nresources (source folder) <br>\n- PdfTemplates (normal folder) <br>\n- - myyntiPohja.pdf <br>\n- - ostoPohja.pdf</p>\n\n<p>When I run the program from the IDE I get java.io.File with the following reference: <br>\nFile offerDocument = new File(\"resources/PdfTemplates/ostoPohja.pdf\"); <br>\nand <br>\nFile offerDocument = new File(\"resources/PdfTemplates/myyntiPohja.pdf\"); <br>\n<br>\nThis works fine until I compile the project either with Export -> Runnable Jar file or with build.fxbuild -> ant build.xml and run. <br></p>\n\n<p>Could someone please tell me what is the problem?</p>\n"},{"tags":["java","mongodb","mongodb-query","aggregation-framework","spring-data-mongodb"],"comments":[{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":0,"creation_date":1690127027,"post_id":76748983,"comment_id":135306796,"body_markdown":"&quot;_I have already created the appropriate indices_&quot; - what are they? I believe the best you can do here is a covered query, but we can&#39;t say whether or not that&#39;s what you&#39;ve achieved without more info. Ideally in addition to the index definitions themselves you would also be able to provide the `.explain(&quot;allPlansExecution&quot;)` output for this operation as well","body":"&quot;<i>I have already created the appropriate indices</i>&quot; - what are they? I believe the best you can do here is a covered query, but we can&#39;t say whether or not that&#39;s what you&#39;ve achieved without more info. Ideally in addition to the index definitions themselves you would also be able to provide the <code>.explain(&quot;allPlansExecution&quot;)</code> output for this operation as well"},{"owner":{"account_id":22509701,"reputation":1,"user_id":16704811,"display_name":"Tom Sisserman"},"score":0,"creation_date":1690199986,"post_id":76748983,"comment_id":135315631,"body_markdown":"Hi @user20042973 , thanks for the reply!\nI have added the indices to the question, but I can&#39;t add the explain since it&#39;s to big... is there anything particular there I should add to the question?","body":"Hi @user20042973 , thanks for the reply! I have added the indices to the question, but I can&#39;t add the explain since it&#39;s to big... is there anything particular there I should add to the question?"},{"owner":{"account_id":4565343,"reputation":12775,"user_id":3710490,"accept_rate":64,"display_name":"Valijon"},"score":0,"creation_date":1690205708,"post_id":76748983,"comment_id":135316954,"body_markdown":"There is no any magic solution. You may try [materialized-views](https://www.mongodb.com/docs/manual/core/materialized-views/). Store pre-calculated data for a predetermined time period range, eg: ( from 10:00 - 10:30 count:1589, ip:[XXX, YYY, ZZZ]; from 10:30 - 11:00, count:12590, ip:[YY1, YY2, ...]). And then adapt your query to this materialized view.","body":"There is no any magic solution. You may try <a href=\"https://www.mongodb.com/docs/manual/core/materialized-views/\" rel=\"nofollow noreferrer\">materialized-views</a>. Store pre-calculated data for a predetermined time period range, eg: ( from 10:00 - 10:30 count:1589, ip:[XXX, YYY, ZZZ]; from 10:30 - 11:00, count:12590, ip:[YY1, YY2, ...]). And then adapt your query to this materialized view."},{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":0,"creation_date":1690205864,"post_id":76748983,"comment_id":135316992,"body_markdown":"You could upload the explain as a gist or to something like pastebin. But regardless none of those indexes look correct to me. If I understand your field names and aggregation correctly, then try an index defined as `{ config_id: 1, timestamp: 1, &quot;user_data.country&quot;: 1, status: 1, &quot;user_data.ip&quot;: 1 }`","body":"You could upload the explain as a gist or to something like pastebin. But regardless none of those indexes look correct to me. If I understand your field names and aggregation correctly, then try an index defined as <code>{ config_id: 1, timestamp: 1, &quot;user_data.country&quot;: 1, status: 1, &quot;user_data.ip&quot;: 1 }</code>"},{"owner":{"account_id":22509701,"reputation":1,"user_id":16704811,"display_name":"Tom Sisserman"},"score":0,"creation_date":1690785370,"post_id":76748983,"comment_id":135395883,"body_markdown":"Hi, thanks for the reply, and sorry for the delay, I was sick. \n@Valijon I thought about this but this will make us store a lot of extra data and won&#39;t save much since there isn&#39;t a lot of duplications of the IP&#39;s (around 1m distinct IP&#39;s for 2m events).\n\nuser20042973 I have added this index as well and it is now 13sec xD, so it did helped a bit! thanks! any other ideas? \n\nI&#39;m currently thinking on how we could split this API so we could perform multiple commands in parallel and maybe save time that way. (currently trying to split based on countries)","body":"Hi, thanks for the reply, and sorry for the delay, I was sick.  @Valijon I thought about this but this will make us store a lot of extra data and won&#39;t save much since there isn&#39;t a lot of duplications of the IP&#39;s (around 1m distinct IP&#39;s for 2m events).  user20042973 I have added this index as well and it is now 13sec xD, so it did helped a bit! thanks! any other ideas?   I&#39;m currently thinking on how we could split this API so we could perform multiple commands in parallel and maybe save time that way. (currently trying to split based on countries)"}],"owner":{"account_id":22509701,"reputation":1,"user_id":16704811,"display_name":"Tom Sisserman"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690199962,"creation_date":1690125378,"question_id":76748983,"body_markdown":"Let&#39;s say I have &#39;events&#39; collection in MongoDB with millions of documents, and each document in that collection looks something like that:\r\n\r\n```\r\n{\r\n    id: &quot;fg3df23&quot;,\r\n    config_id: &quot;49gjd3s&quot;,\r\n    timestamp: 1649158819315,\r\n    .\r\n    .\r\n    .\r\n    status: &quot;active&quot;, \r\n    .\r\n    .\r\n    .\r\n    user_data: {\r\n        ip: &quot;&lt;some IP&gt;&quot;,\r\n        country: &quot;US&quot;\r\n        }\r\n    .\r\n    .\r\n    .\r\n}\r\n```\r\nI&#39;m trying to retrieve the breakdown of the events that in certain config id&#39;s list and their timestamp is between a certain range.\r\nThe breakdown I need is the status breakdown by country and the country distinct &#39;user_data.ip&#39; count. \r\nBasically, for each country I&#39;ll have the following response:\r\n\r\n```\r\npublic class CountriesResponse  {\r\n    private int countryTotalDistinctIps;\r\n    private Set&lt;CountryResponse&gt; data;\r\n\r\n    public static class CountryResponse {\r\n        private String country;\r\n        private int distinctIPCount;\r\n        private Map&lt;String, Integer&gt; statusBreakdown;\r\n    }\r\n}\r\n```\r\n\r\nI&#39;m using Spring data Mongo DB, and for solving the problem I&#39;m using aggregation that looks like that (&#39;configIdsList&#39;, &#39;start&#39;, and &#39;end&#39; are given parameters):\r\n\r\n```\r\n        MatchOperation matchOperation = match(Criteria.where(&quot;config_id&quot;).in(configIdsList)\r\n                .and(&quot;timestamp&quot;).gte(start).lte(end));\r\n        GroupOperation groupOperation = group(&quot;user_data.country&quot;, &quot;status&quot;)\r\n                .count().as(&quot;eventsCount&quot;).addToSet(&quot;user_data.ip&quot;).as(&quot;ipsSet&quot;);\r\n        ProjectionOperation countriesFields = project(&quot;eventsCount&quot;, &quot;ipsSet&quot;).\r\n        and(&quot;user_data.country&quot;).previousOperation().andInclude(&quot;country&quot;).\r\n                and(&quot;status&quot;).previousOperation().andInclude(&quot;status&quot;);\r\n```\r\n This returns a list of breakdown objects which looks like that: \r\n\r\n```\r\n    private Integer countEvents;\r\n    private String country;\r\n    private HashSet&lt;String&gt; ipsSet;\r\n    private String status;\r\n```\r\nI then go through the breakdown objects lists and create the above response from them.\r\n\r\nNote - Existing Indices: &#39;config_id_1_timestamp_-1&#39;, &#39;config_id_1_status_1_timestamp_-1&#39;, &#39;config_id_1_user_data.country_1_status_1_timestamp_-1&#39;, &#39;config_id_1_user_data.ip_1_timestamp_-1&#39; \r\n\r\nThe current solution works, but its very slow when there are a lot of events. (takes ~15sec for ~1.3m matching events).\r\n\r\n \r\n\r\n\r\n\r\n\r\nis there more efficient way of doing it? \r\n\r\n\r\n\r\nI have also tried different solution by trying to group by &quot;user_data.country&quot;, &quot;user_data.ip&quot;, and &quot;status&quot; but this makes out of memory issue in the &#39;$group&#39; stage (there could be millions of distinct IPs) unless I pass through &#39;allowDiskUsage:true&#39; which makes it a lot slower than the original aggregation query mentioned above.  ","title":"MongoDB Aggregations Java - Efficient distinct count","body":"<p>Let's say I have 'events' collection in MongoDB with millions of documents, and each document in that collection looks something like that:</p>\n<pre><code>{\n    id: &quot;fg3df23&quot;,\n    config_id: &quot;49gjd3s&quot;,\n    timestamp: 1649158819315,\n    .\n    .\n    .\n    status: &quot;active&quot;, \n    .\n    .\n    .\n    user_data: {\n        ip: &quot;&lt;some IP&gt;&quot;,\n        country: &quot;US&quot;\n        }\n    .\n    .\n    .\n}\n</code></pre>\n<p>I'm trying to retrieve the breakdown of the events that in certain config id's list and their timestamp is between a certain range.\nThe breakdown I need is the status breakdown by country and the country distinct 'user_data.ip' count.\nBasically, for each country I'll have the following response:</p>\n<pre><code>public class CountriesResponse  {\n    private int countryTotalDistinctIps;\n    private Set&lt;CountryResponse&gt; data;\n\n    public static class CountryResponse {\n        private String country;\n        private int distinctIPCount;\n        private Map&lt;String, Integer&gt; statusBreakdown;\n    }\n}\n</code></pre>\n<p>I'm using Spring data Mongo DB, and for solving the problem I'm using aggregation that looks like that ('configIdsList', 'start', and 'end' are given parameters):</p>\n<pre><code>        MatchOperation matchOperation = match(Criteria.where(&quot;config_id&quot;).in(configIdsList)\n                .and(&quot;timestamp&quot;).gte(start).lte(end));\n        GroupOperation groupOperation = group(&quot;user_data.country&quot;, &quot;status&quot;)\n                .count().as(&quot;eventsCount&quot;).addToSet(&quot;user_data.ip&quot;).as(&quot;ipsSet&quot;);\n        ProjectionOperation countriesFields = project(&quot;eventsCount&quot;, &quot;ipsSet&quot;).\n        and(&quot;user_data.country&quot;).previousOperation().andInclude(&quot;country&quot;).\n                and(&quot;status&quot;).previousOperation().andInclude(&quot;status&quot;);\n</code></pre>\n<p>This returns a list of breakdown objects which looks like that:</p>\n<pre><code>    private Integer countEvents;\n    private String country;\n    private HashSet&lt;String&gt; ipsSet;\n    private String status;\n</code></pre>\n<p>I then go through the breakdown objects lists and create the above response from them.</p>\n<p>Note - Existing Indices: 'config_id_1_timestamp_-1', 'config_id_1_status_1_timestamp_-1', 'config_id_1_user_data.country_1_status_1_timestamp_-1', 'config_id_1_user_data.ip_1_timestamp_-1'</p>\n<p>The current solution works, but its very slow when there are a lot of events. (takes ~15sec for ~1.3m matching events).</p>\n<p>is there more efficient way of doing it?</p>\n<p>I have also tried different solution by trying to group by &quot;user_data.country&quot;, &quot;user_data.ip&quot;, and &quot;status&quot; but this makes out of memory issue in the '$group' stage (there could be millions of distinct IPs) unless I pass through 'allowDiskUsage:true' which makes it a lot slower than the original aggregation query mentioned above.</p>\n"},{"tags":["java","gradle-plugin","openapi-generator"],"owner":{"account_id":16160199,"reputation":41,"user_id":14729270,"display_name":"randomlyalex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690199919,"creation_date":1690199919,"question_id":76754271,"body_markdown":"I have followed what I can find [here][1] and [here][2]. See below code.\r\n\r\nWhen I build, the output from this in ~/clients/java is source tree of files, *not a lib client* I was hoping to publish.  I can&#39;t see any other options within the plugin to specify otherwise.  \r\n\r\nWhat in my limited understanding of what i&#39;m doing am i missing?\r\n\r\nDo i need to generate from that ~/clients/java output? feels unnecessary. \r\n\r\n\r\n```\r\ntask generateJavaClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {\r\n    generatorName = &quot;java&quot;\r\n    inputSpec = &quot;$rootDir/infrastructure/modules/api-gateway/rest-api-definition.yaml&quot;\r\n    outputDir = &quot;$buildDir/clients/java&quot;\r\n    packageName = &quot;client_api&quot;\r\n    id = &quot;client&quot;\r\n    logToStderr = true\r\n    verbose = true\r\n    generateAliasAsModel = false\r\n    enablePostProcessFile = false\r\n    version = getClientVersion(buildkiteBranch, buildkiteBuildNumber, buildkitePipelineDefaultBranch, buildkiteTag)\r\n    configOptions = [\r\n            artifactVersion: getClientVersion(buildkiteBranch, buildkiteBuildNumber, buildkitePipelineDefaultBranch, buildkiteTag)\r\n    ]\r\n}\r\n```\r\n\r\n\r\n  [1]: https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-gradle-plugin\r\n  [2]: https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md","title":"Gradle plugin openapitools.generator generateJavaClient is outputting source not a library client","body":"<p>I have followed what I can find <a href=\"https://github.com/OpenAPITools/openapi-generator/tree/master/modules/openapi-generator-gradle-plugin\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md\" rel=\"nofollow noreferrer\">here</a>. See below code.</p>\n<p>When I build, the output from this in ~/clients/java is source tree of files, <em>not a lib client</em> I was hoping to publish.  I can't see any other options within the plugin to specify otherwise.</p>\n<p>What in my limited understanding of what i'm doing am i missing?</p>\n<p>Do i need to generate from that ~/clients/java output? feels unnecessary.</p>\n<pre><code>task generateJavaClient(type: org.openapitools.generator.gradle.plugin.tasks.GenerateTask) {\n    generatorName = &quot;java&quot;\n    inputSpec = &quot;$rootDir/infrastructure/modules/api-gateway/rest-api-definition.yaml&quot;\n    outputDir = &quot;$buildDir/clients/java&quot;\n    packageName = &quot;client_api&quot;\n    id = &quot;client&quot;\n    logToStderr = true\n    verbose = true\n    generateAliasAsModel = false\n    enablePostProcessFile = false\n    version = getClientVersion(buildkiteBranch, buildkiteBuildNumber, buildkitePipelineDefaultBranch, buildkiteTag)\n    configOptions = [\n            artifactVersion: getClientVersion(buildkiteBranch, buildkiteBuildNumber, buildkitePipelineDefaultBranch, buildkiteTag)\n    ]\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","testing","testng.xml"],"comments":[{"owner":{"account_id":471893,"reputation":8441,"user_id":879977,"display_name":"niharika_neo"},"score":0,"creation_date":1690259607,"post_id":76754243,"comment_id":135324525,"body_markdown":"Wrote long back - you can try this : https://niharikawhatsnext.wordpress.com/2015/03/11/running-maven-testng-tests-as-a-jar/","body":"Wrote long back - you can try this : <a href=\"https://niharikawhatsnext.wordpress.com/2015/03/11/running-maven-testng-tests-as-a-jar/\" rel=\"nofollow noreferrer\">niharikawhatsnext.wordpress.com/2015/03/11/&hellip;</a>"}],"owner":{"account_id":23632604,"reputation":1,"user_id":17664117,"display_name":"Yorye"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690199738,"creation_date":1690199738,"question_id":76754243,"body_markdown":"I&#39;m currently developing a portable software that runs Selenium and TestNG tests on a web page. I am using the maven-surefire-plugin and maven-assembly-plugin plugins in my Maven project. I would like to know how to configure my TestNG XML file containing the entire test suite to be located in src/test/resources, and how can I ensure that by simply executing the JAR file using &#39;java -jar&#39;, it automatically runs the entire test suite. I have already generated a JAR with all the necessary dependencies included.\r\n\r\nmy App.class:\r\n```public static void main(String[] args) {\r\nList&lt;String&gt; suiteFiles = new ArrayList&lt;String&gt;();\r\n\r\n\tString testXml = &quot;testng.xml&quot;;\r\n\r\n\tif (args.length == 0) {\r\n\t\t//suiteFiles.add(testXml.toString());\r\n\t\tsuiteFiles.add(testXml);\r\n\t} else {\r\n\t\tfor (int i = 0; i &lt; args.length; i++) {\r\n\t\t\tsuiteFiles.add(args[0]);\r\n\t\t}\r\n\t}\r\n\r\n// for (int i = 0; i &lt; args.length; i++) {\r\n//paramList.add(args[i]);\r\n//}\r\nTestNG test = new TestNG();\r\n\r\n// Para obtener los recursos del jar usamos la funci&#243;n getResourceAsStream();\r\n//this.getClass().getResourceAsStream(&quot;&quot;);\r\n// Es obligatorio que el primer argumento sea el fichero de configuraci&#243;n de TestNG .xml a ejecutar.\r\n//suiteFiles.add(args[0]);\r\ntest.setTestSuites(suiteFiles);\r\ntest.run();\r\n}\r\n```\r\n\r\nI expected the TestNG framework to run the test suites specified in the &#39;suiteFiles&#39; list. If no command-line arguments are provided, it should run the default &#39;testng.xml&#39; file. If command-line arguments are provided, it should run the specified testng.xml files. I have already included the necessary TestNG dependencies in the project, and the &#39;testng.xml&#39; files are located in the &#39;src/test/resources&#39; directory.\r\n","title":"Executing TestNG Test Suite with Selenium Tests from Portable Software (JAR) - How to Run Tests Using &#39;java -jar&#39; Command?","body":"<p>I'm currently developing a portable software that runs Selenium and TestNG tests on a web page. I am using the maven-surefire-plugin and maven-assembly-plugin plugins in my Maven project. I would like to know how to configure my TestNG XML file containing the entire test suite to be located in src/test/resources, and how can I ensure that by simply executing the JAR file using 'java -jar', it automatically runs the entire test suite. I have already generated a JAR with all the necessary dependencies included.</p>\n<p>my App.class:</p>\n<pre><code>List&lt;String&gt; suiteFiles = new ArrayList&lt;String&gt;();\n\n    String testXml = &quot;testng.xml&quot;;\n\n    if (args.length == 0) {\n        //suiteFiles.add(testXml.toString());\n        suiteFiles.add(testXml);\n    } else {\n        for (int i = 0; i &lt; args.length; i++) {\n            suiteFiles.add(args[0]);\n        }\n    }\n\n// for (int i = 0; i &lt; args.length; i++) {\n//paramList.add(args[i]);\n//}\nTestNG test = new TestNG();\n\n// Para obtener los recursos del jar usamos la función getResourceAsStream();\n//this.getClass().getResourceAsStream(&quot;&quot;);\n// Es obligatorio que el primer argumento sea el fichero de configuración de TestNG .xml a ejecutar.\n//suiteFiles.add(args[0]);\ntest.setTestSuites(suiteFiles);\ntest.run();\n}\n</code></pre>\n<p>I expected the TestNG framework to run the test suites specified in the 'suiteFiles' list. If no command-line arguments are provided, it should run the default 'testng.xml' file. If command-line arguments are provided, it should run the specified testng.xml files. I have already included the necessary TestNG dependencies in the project, and the 'testng.xml' files are located in the 'src/test/resources' directory.</p>\n"},{"tags":["java","spring","jwt","functional-interface","method-reference"],"comments":[{"owner":{"account_id":17080101,"reputation":93,"user_id":12358700,"display_name":"Jesse"},"score":0,"creation_date":1689594074,"post_id":76704019,"comment_id":135230763,"body_markdown":"I think this is `delegation`. The instance of `Claims` comes from `getAllClaimsFromToken()`. Therefore, the implementation of `Claims` also comes from `getAllClaimsFromToken()` which was called as `Jwts.parser().setSigningKey(&quot;javainuse&quot;).parseClaimsJws(token).getBody()`","body":"I think this is <code>delegation</code>. The instance of <code>Claims</code> comes from <code>getAllClaimsFromToken()</code>. Therefore, the implementation of <code>Claims</code> also comes from <code>getAllClaimsFromToken()</code> which was called as <code>Jwts.parser().setSigningKey(&quot;javainuse&quot;).parseClaimsJws(toke&zwnj;&#8203;n).getBody()</code>"},{"owner":{"account_id":2125067,"reputation":547,"user_id":1887464,"accept_rate":80,"display_name":"user1887464"},"score":0,"creation_date":1689594273,"post_id":76704019,"comment_id":135230820,"body_markdown":"need more explanation on this. Is there any example online ? What is it called in java terms ?","body":"need more explanation on this. Is there any example online ? What is it called in java terms ?"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1690199491,"post_id":76704019,"comment_id":135315517,"body_markdown":"Does this answer your question? [Difference between method reference Bound Receiver and Unbound Receiver](https://stackoverflow.com/questions/35914775/difference-between-method-reference-bound-receiver-and-unbound-receiver)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/35914775/difference-between-method-reference-bound-receiver-and-unbound-receiver\">Difference between method reference Bound Receiver and Unbound Receiver</a>"}],"answers":[{"tags":[],"owner":{"account_id":17080101,"reputation":93,"user_id":12358700,"display_name":"Jesse"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689594917,"creation_date":1689594917,"answer_id":76704206,"question_id":76704019,"body_markdown":"You&#39;re right that the `Claims::getSubject` syntax here is passing a method reference to the `Function` interface, rather than implementing the full lambda expression. \r\n\r\nThe key to how this works is that `Claims` is an interface that extends the `Claims` interface from the `io.jsonwebtoken` library. \r\n\r\nThat `io.jsonwebtoken.Claims` interface defines various getter methods like `getSubject()`, `getIssuer()` etc. without providing implementations.\r\n\r\nSo when we call:\r\n\r\n```java\r\nClaims::getSubject\r\n```\r\n\r\nWe are providing a reference to the `getSubject()` method on the `io.jsonwebtoken.Claims` interface. \r\n\r\nEven though the interface doesn&#39;t provide an implementation, at runtime the `claims` object will actually be an instance of some class that implements the `io.jsonwebtoken.Claims` interface and provides a concrete implementation of `getSubject()`.\r\n\r\nWhen `claimsResolver.apply(claims)` is called, it will invoke that underlying `getSubject()` method on the `claims` instance, which returns the subject value.\r\n\r\nSo in summary:\r\n\r\n- `Claims::getSubject` provides a reference to the interface method\r\n- The `claims` object provides an implementation of that interface \r\n- So `claimsResolver.apply(claims)` is able to call the implemented `getSubject()` method to return the value","title":"Interface method reference to a functional interface","body":"<p>You're right that the <code>Claims::getSubject</code> syntax here is passing a method reference to the <code>Function</code> interface, rather than implementing the full lambda expression.</p>\n<p>The key to how this works is that <code>Claims</code> is an interface that extends the <code>Claims</code> interface from the <code>io.jsonwebtoken</code> library.</p>\n<p>That <code>io.jsonwebtoken.Claims</code> interface defines various getter methods like <code>getSubject()</code>, <code>getIssuer()</code> etc. without providing implementations.</p>\n<p>So when we call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Claims::getSubject\n</code></pre>\n<p>We are providing a reference to the <code>getSubject()</code> method on the <code>io.jsonwebtoken.Claims</code> interface.</p>\n<p>Even though the interface doesn't provide an implementation, at runtime the <code>claims</code> object will actually be an instance of some class that implements the <code>io.jsonwebtoken.Claims</code> interface and provides a concrete implementation of <code>getSubject()</code>.</p>\n<p>When <code>claimsResolver.apply(claims)</code> is called, it will invoke that underlying <code>getSubject()</code> method on the <code>claims</code> instance, which returns the subject value.</p>\n<p>So in summary:</p>\n<ul>\n<li><code>Claims::getSubject</code> provides a reference to the interface method</li>\n<li>The <code>claims</code> object provides an implementation of that interface</li>\n<li>So <code>claimsResolver.apply(claims)</code> is able to call the implemented <code>getSubject()</code> method to return the value</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1689670924,"creation_date":1689670924,"answer_id":76711119,"question_id":76704019,"body_markdown":"`someInstance.getSubject()` bakes a cake and returns it to you.\r\n\r\n`Claims::getSubject` is a recipe for baking cakes.\r\n\r\nOne _does the thing_. The other doesn&#39;t do anything, it merely is a description of _how_ to do the thing - whatever you hand it to can do the thing, or not, or do it 10 times - or pass the recipe on to somebody else who is then faced with the same choice. They can do whatever they like:\r\n\r\n* Toss the recipe in the garbage (and no cakes ever exist).\r\n* Bake a cake.\r\n* Bake 10,000 cakes.\r\n* Start 100 threads and bake 100 cakes simultaneously.\r\n* Save the recipe for later and bake some cakes tomorrow.\r\n\r\nWhen I write down a recipe for making cake, one of the ingredients I&#39;m going to mention is that you will need fresh water.\r\n\r\nThat means, to bake a cake, I need fresh water. Or perhaps a tap (something that can make fresh water for me). However, to make a cake __recipe__ I do not need fresh water at all. I just need to tell _you_ (the one who will be following my recipe to bake that cake): &quot;You will need to obtain some fresh water. Not my problem how you do that!&quot;.\r\n\r\nIn other words, a cake recipe is a recipe that turns fresh water (and some other things) into a cake. It does not explain how to obtain fresh water, nor does a recipe for making cake come wrapped around a bottle of fresh water.\r\n\r\nIn the same vein, `Claims::getSubject` is a recipe that explains how to turn any instance of a class that implements `Claims` (i.e. a Claims instance) into a String. It does not come with an instance of Claims nor does it explain how to make an instance of Claims. It merely says: IF you have an instance of Claims, this recipe lets you turn that Claims into a String!\r\n\r\n`Claims::getSubject` specifically says: Take your claims, call it `c`. Run `c.getSubject()`. Voila, there&#39;s your string.\r\n\r\nHere, you pass that notion (a recipe for turning claims into strings) to the `getClaimFromToken` method, which apparently knows how to produce an instance of Claims.\r\n\r\nThat&#39;s analogous to me handing you a cake recipe today and you showing up with a cake tomorrow. That implies you managed to obtain some fresh water. I do not know how and I don&#39;t really need to care - I get to enjoy some cake!\r\n\r\nNB: Obviously `getClaimsFromToken` knows how to make an instance that implements `Claims` from a token, and will then apply your recipe (i.e., call `.getSubject()` on it). But that&#39;s just &#39;guessing&#39; - the point of APIs is that they promise they do X. You don&#39;t need to bother with knowing _how_ it does it, you just need to bother with knowing _what_ it does, and perhaps ascertaining that the library is fit for purpose and it does what its docs say it does.\r\n","title":"Interface method reference to a functional interface","body":"<p><code>someInstance.getSubject()</code> bakes a cake and returns it to you.</p>\n<p><code>Claims::getSubject</code> is a recipe for baking cakes.</p>\n<p>One <em>does the thing</em>. The other doesn't do anything, it merely is a description of <em>how</em> to do the thing - whatever you hand it to can do the thing, or not, or do it 10 times - or pass the recipe on to somebody else who is then faced with the same choice. They can do whatever they like:</p>\n<ul>\n<li>Toss the recipe in the garbage (and no cakes ever exist).</li>\n<li>Bake a cake.</li>\n<li>Bake 10,000 cakes.</li>\n<li>Start 100 threads and bake 100 cakes simultaneously.</li>\n<li>Save the recipe for later and bake some cakes tomorrow.</li>\n</ul>\n<p>When I write down a recipe for making cake, one of the ingredients I'm going to mention is that you will need fresh water.</p>\n<p>That means, to bake a cake, I need fresh water. Or perhaps a tap (something that can make fresh water for me). However, to make a cake <strong>recipe</strong> I do not need fresh water at all. I just need to tell <em>you</em> (the one who will be following my recipe to bake that cake): &quot;You will need to obtain some fresh water. Not my problem how you do that!&quot;.</p>\n<p>In other words, a cake recipe is a recipe that turns fresh water (and some other things) into a cake. It does not explain how to obtain fresh water, nor does a recipe for making cake come wrapped around a bottle of fresh water.</p>\n<p>In the same vein, <code>Claims::getSubject</code> is a recipe that explains how to turn any instance of a class that implements <code>Claims</code> (i.e. a Claims instance) into a String. It does not come with an instance of Claims nor does it explain how to make an instance of Claims. It merely says: IF you have an instance of Claims, this recipe lets you turn that Claims into a String!</p>\n<p><code>Claims::getSubject</code> specifically says: Take your claims, call it <code>c</code>. Run <code>c.getSubject()</code>. Voila, there's your string.</p>\n<p>Here, you pass that notion (a recipe for turning claims into strings) to the <code>getClaimFromToken</code> method, which apparently knows how to produce an instance of Claims.</p>\n<p>That's analogous to me handing you a cake recipe today and you showing up with a cake tomorrow. That implies you managed to obtain some fresh water. I do not know how and I don't really need to care - I get to enjoy some cake!</p>\n<p>NB: Obviously <code>getClaimsFromToken</code> knows how to make an instance that implements <code>Claims</code> from a token, and will then apply your recipe (i.e., call <code>.getSubject()</code> on it). But that's just 'guessing' - the point of APIs is that they promise they do X. You don't need to bother with knowing <em>how</em> it does it, you just need to bother with knowing <em>what</em> it does, and perhaps ascertaining that the library is fit for purpose and it does what its docs say it does.</p>\n"},{"tags":[],"owner":{"account_id":2125067,"reputation":547,"user_id":1887464,"accept_rate":80,"display_name":"user1887464"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1689745305,"creation_date":1689745305,"answer_id":76718279,"question_id":76704019,"body_markdown":"I found what it is called in java. It is called unbound non-static method references. Here is a link which explains every type method references and the scenario which I was asking to explain. [Unbound Non static method references][1]\r\n\r\n\r\n  [1]: https://www.infoworld.com/article/3453296/get-started-with-method-references-in-java.html#:~:text=An%20unbound%20non%2Dstatic%20method,example%20is%20String%3A%3AtoLowerCase%20.","title":"Interface method reference to a functional interface","body":"<p>I found what it is called in java. It is called unbound non-static method references. Here is a link which explains every type method references and the scenario which I was asking to explain. <a href=\"https://www.infoworld.com/article/3453296/get-started-with-method-references-in-java.html#:%7E:text=An%20unbound%20non%2Dstatic%20method,example%20is%20String%3A%3AtoLowerCase%20.\" rel=\"nofollow noreferrer\">Unbound Non static method references</a></p>\n"}],"owner":{"account_id":2125067,"reputation":547,"user_id":1887464,"accept_rate":80,"display_name":"user1887464"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1690199510,"creation_date":1689593405,"question_id":76704019,"body_markdown":"I am working with Java Spring framework and JWT - Java Web Tokens. I have below class \r\n\r\n```import java.util.ArrayList;\r\nimport java.util.function.Function;\r\n\r\nimport org.springframework.security.core.userdetails.User;\r\nimport org.springframework.security.core.userdetails.UserDetails;\r\n\r\nimport app.com.javainuse.config.JwtTokenUtil;\r\nimport io.jsonwebtoken.Claims;\r\nimport io.jsonwebtoken.Jwts;\r\n\r\n\r\npublic class Test {\r\n\tpublic static void main(String[] args) {\r\n\t\tUser u=new User(&quot;javainuse&quot;, &quot;$2a$10$slYQmyNdGzTn7ZLBXBChFOC9f6kFjAqPhccnP6DxlWXx2lPk1C3G6&quot;,new ArrayList&lt;&gt;());\r\n\t\tUserDetails ud=u;\r\n\t\t\r\n\t\tJwtTokenUtil jwtTokenUtil=new JwtTokenUtil();\r\n\t\t\r\n\t\tString token = jwtTokenUtil.generateToken(ud);\r\n\t\tTest t=new Test();\r\n\t\tSystem.out.println(t.getClaimFromToken(token, Claims::getSubject));\r\n\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n\t\tfinal Claims claims = getAllClaimsFromToken(token);\r\n\t\tSystem.out.println(claims.toString());\t\t\r\n\t\treturn claimsResolver.apply(claims);\r\n\t}\r\n\r\n\tprivate Claims getAllClaimsFromToken(String token) {\r\n\t\treturn Jwts.parser().setSigningKey(&quot;javainuse&quot;).parseClaimsJws(token).getBody();\r\n\t}\r\n}\r\n```\r\n\r\nI am not able to understand statement containing this Claims::getSubject in main method. It gets passed to a functional interface Named Function&lt;Claims,T&gt; claimresolver. How does a method reference getSubject without implementation able to return subject from claims object in getClaimFromToken method ? When we pass method reference to a Functional Interface we the method must have body wight ? but Claims is an interface and getSubject does not have a body then how does &quot;claimsResolver.apply(claims);&quot; is able to get subject value ?","title":"Interface method reference to a functional interface","body":"<p>I am working with Java Spring framework and JWT - Java Web Tokens. I have below class</p>\n<pre><code>import java.util.function.Function;\n\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\n\nimport app.com.javainuse.config.JwtTokenUtil;\nimport io.jsonwebtoken.Claims;\nimport io.jsonwebtoken.Jwts;\n\n\npublic class Test {\n    public static void main(String[] args) {\n        User u=new User(&quot;javainuse&quot;, &quot;$2a$10$slYQmyNdGzTn7ZLBXBChFOC9f6kFjAqPhccnP6DxlWXx2lPk1C3G6&quot;,new ArrayList&lt;&gt;());\n        UserDetails ud=u;\n        \n        JwtTokenUtil jwtTokenUtil=new JwtTokenUtil();\n        \n        String token = jwtTokenUtil.generateToken(ud);\n        Test t=new Test();\n        System.out.println(t.getClaimFromToken(token, Claims::getSubject));\n\n        \n    }\n    \n    public &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = getAllClaimsFromToken(token);\n        System.out.println(claims.toString());      \n        return claimsResolver.apply(claims);\n    }\n\n    private Claims getAllClaimsFromToken(String token) {\n        return Jwts.parser().setSigningKey(&quot;javainuse&quot;).parseClaimsJws(token).getBody();\n    }\n}\n</code></pre>\n<p>I am not able to understand statement containing this Claims::getSubject in main method. It gets passed to a functional interface Named Function&lt;Claims,T&gt; claimresolver. How does a method reference getSubject without implementation able to return subject from claims object in getClaimFromToken method ? When we pass method reference to a Functional Interface we the method must have body wight ? but Claims is an interface and getSubject does not have a body then how does &quot;claimsResolver.apply(claims);&quot; is able to get subject value ?</p>\n"},{"tags":["java","method-reference"],"comments":[{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":0,"creation_date":1689203925,"post_id":76674862,"comment_id":135181861,"body_markdown":"It&#39;s not getting called. The method declaration is being referenced on the `EatSomething` class. It only runs when explicitly invoked on an instance of `EatSomething` inside the `process` method. Also this is _horrible_ code, never write something like this =D","body":"It&#39;s not getting called. The method declaration is being referenced on the <code>EatSomething</code> class. It only runs when explicitly invoked on an instance of <code>EatSomething</code> inside the <code>process</code> method. Also this is <i>horrible</i> code, never write something like this =D"},{"owner":{"account_id":14331277,"reputation":71,"user_id":10351954,"display_name":"J. Doe"},"score":0,"creation_date":1689205228,"post_id":76674862,"comment_id":135181983,"body_markdown":"`MyCustomFunction func = String::toUpperCase;` here `MyCustomFunction` has a method lets say `String test(String abc); ` but `toUpperCase` is a non static method. Then why are we calling `toUpperCase` with its class name i.e. String.","body":"<code>MyCustomFunction func = String::toUpperCase;</code> here <code>MyCustomFunction</code> has a method lets say <code>String test(String abc); </code> but <code>toUpperCase</code> is a non static method. Then why are we calling <code>toUpperCase</code> with its class name i.e. String."},{"owner":{"account_id":384206,"reputation":50386,"user_id":740553,"accept_rate":46,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"score":1,"creation_date":1689209000,"post_id":76674862,"comment_id":135182287,"body_markdown":"Remember that terminology matters: we&#39;re not _calling_ anything. Calling a method/function means executing (&quot;running&quot;) that method/function. We&#39;re _referencing_ a method here, using the method reference operator, `::`. The docs for which have already been linked to in the answer you accepted.","body":"Remember that terminology matters: we&#39;re not <i>calling</i> anything. Calling a method/function means executing (&quot;running&quot;) that method/function. We&#39;re <i>referencing</i> a method here, using the method reference operator, <code>::</code>. The docs for which have already been linked to in the answer you accepted."},{"owner":{"account_id":14331277,"reputation":71,"user_id":10351954,"display_name":"J. Doe"},"score":0,"creation_date":1689225685,"post_id":76674862,"comment_id":135183742,"body_markdown":"Yes. Actually this whole confusion arise due to this code : `public String extractUsername(String token) {\n\t\t// TODO Auto-generated method stub\n\t\tFunction&lt;Claims,String&gt; func = (Claims c)-&gt;c.getSubject(); // or Claims::getSubject\n\t\treturn extractClaim(token,func);\n\t}` here a implemented method of Claims interface getSubject is called as if it is a static method.","body":"Yes. Actually this whole confusion arise due to this code : <code>public String extractUsername(String token) { \t\t&#47;&#47; TODO Auto-generated method stub \t\tFunction&lt;Claims,String&gt; func = (Claims c)-&gt;c.getSubject(); &#47;&#47; or Claims::getSubject \t\treturn extractClaim(token,func); \t}</code> here a implemented method of Claims interface getSubject is called as if it is a static method."},{"owner":{"account_id":14331277,"reputation":71,"user_id":10351954,"display_name":"J. Doe"},"score":0,"creation_date":1689225937,"post_id":76674862,"comment_id":135183773,"body_markdown":"So I treid to mimick that in my exercise session here. Understood now. If something is like `(Object o)-&gt;o.someMethod()` can be further shortened to `Object::someMethod` will remember that.","body":"So I treid to mimick that in my exercise session here. Understood now. If something is like <code>(Object o)-&gt;o.someMethod()</code> can be further shortened to <code>Object::someMethod</code> will remember that."}],"answers":[{"tags":[],"owner":{"account_id":11400015,"reputation":1904,"user_id":8357251,"display_name":"gdomo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1689205302,"creation_date":1689203674,"answer_id":76674979,"question_id":76674862,"body_markdown":"You can call `similarToEat` using object, you will just get not a `Function &lt;EatSomething,String&gt;` but functional interface with zero-arg method like `Callable`/`Runnable`/`Supplier` since an instance of `EatSomething` is already defined by that object.\r\n\r\n[Here][1] is Oracle documentation with types of method references:\r\n\r\n| Kind                                                                        | Syntax                               |\r\n|-----------------------------------------------------------------------------|--------------------------------------|\r\n| Reference to a static method                                                | ContainingClass::staticMethodName.   |\r\n| Reference to an instance method of a particular object                      | containingObject::instanceMethodName |\r\n| Reference to an instance method of an arbitrary object of a particular type | ContainingType::methodName           |\r\n\r\nLook at examples:\r\n\r\n        // denotes a method of any EatSomething instance that is not defined yet\r\n        Function&lt;EatSomething, String&gt; ff1 = EatSomething::similarToEat; // thus we get a function from EatSomething to String\r\n        // denotes a method of already specified EatSomething object\r\n        Supplier&lt;String&gt; ff2 = es::similarToEat; // here we get a function without any argument\r\n        Callable&lt;String&gt; ff3 = es::similarToEat; // it could be another FunctionalInterface with no-arg method\r\n        \r\n        ff1.apply(new EatSomething()); // we could provide any EatSomething object\r\n        ff2.get(); // will execute similarToEat exactly against the es object\r\n        ff3.call(); // will execute similarToEat exactly against the es object\r\n\r\nWhat if `EatSomething` have a static method?\r\n\r\n    class EatSomething {\r\n        public static String eatSomethingStaticMethod() {\r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n\r\nThen taking method reference with a class name would return no-arg functional interface:\r\n\r\n        Supplier&lt;String&gt; ff4 = EatSomething::eatSomethingStaticMethod;\r\n        Callable&lt;String&gt; ff5 = EatSomething::eatSomethingStaticMethod;\r\n\r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html","title":"java 8 method reference calling non static method in a static way","body":"<p>You can call <code>similarToEat</code> using object, you will just get not a <code>Function &lt;EatSomething,String&gt;</code> but functional interface with zero-arg method like <code>Callable</code>/<code>Runnable</code>/<code>Supplier</code> since an instance of <code>EatSomething</code> is already defined by that object.</p>\n<p><a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html\" rel=\"nofollow noreferrer\">Here</a> is Oracle documentation with types of method references:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Kind</th>\n<th>Syntax</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Reference to a static method</td>\n<td>ContainingClass::staticMethodName.</td>\n</tr>\n<tr>\n<td>Reference to an instance method of a particular object</td>\n<td>containingObject::instanceMethodName</td>\n</tr>\n<tr>\n<td>Reference to an instance method of an arbitrary object of a particular type</td>\n<td>ContainingType::methodName</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Look at examples:</p>\n<pre><code>    // denotes a method of any EatSomething instance that is not defined yet\n    Function&lt;EatSomething, String&gt; ff1 = EatSomething::similarToEat; // thus we get a function from EatSomething to String\n    // denotes a method of already specified EatSomething object\n    Supplier&lt;String&gt; ff2 = es::similarToEat; // here we get a function without any argument\n    Callable&lt;String&gt; ff3 = es::similarToEat; // it could be another FunctionalInterface with no-arg method\n    \n    ff1.apply(new EatSomething()); // we could provide any EatSomething object\n    ff2.get(); // will execute similarToEat exactly against the es object\n    ff3.call(); // will execute similarToEat exactly against the es object\n</code></pre>\n<p>What if <code>EatSomething</code> have a static method?</p>\n<pre><code>class EatSomething {\n    public static String eatSomethingStaticMethod() {\n        return &quot;&quot;;\n    }\n}\n</code></pre>\n<p>Then taking method reference with a class name would return no-arg functional interface:</p>\n<pre><code>    Supplier&lt;String&gt; ff4 = EatSomething::eatSomethingStaticMethod;\n    Callable&lt;String&gt; ff5 = EatSomething::eatSomethingStaticMethod;\n</code></pre>\n"}],"owner":{"account_id":14331277,"reputation":71,"user_id":10351954,"display_name":"J. Doe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1690199380,"accepted_answer_id":76674979,"answer_count":1,"score":1,"last_activity_date":1690199434,"creation_date":1689201487,"question_id":76674862,"body_markdown":"I am learning `method references` in `Java 8`. I learnt that we can define functional interface method with either lambda or `method reference`. \r\n`Method reference` is a way of telling &quot;*there exist a similar method with same signature of functional interface method, you can call it*&quot;. \r\nFurther if that similar looking method exists as a `static` method, we call it using its class name. Or if it exists as `non static` way, then we will call it with object.\r\n\r\nI am confused with below code.. `EatSomething` class has `non-static` `similarToEat` method, then why it is being called like a `static` method?\r\n\r\n    import java.util.function.*;\r\n    \r\n    public class Test {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tTest test = new Test();\r\n    \t\tEatSomething es = new EatSomething();\r\n    \t\t\r\n    \t\tFunction &lt;EatSomething,String&gt; ff1 = EatSomething::similarToEat; //here.. similarToEat is a non-static method, then why do I need to call it using class name?\r\n    \t\tFunction &lt;EatSomething,String&gt; ff2 = (EatSomething eat)-&gt;eat.similarToEat();\r\n    \t\tFunction &lt;EatSomething,String&gt; ff3 = es::eatOverloaded;\r\n    \t\t\r\n     \t \t\r\n    \t\tSystem.out.println(test.process(ff1));\r\n    \t\t\r\n    \t}\r\n    \r\n    \tprivate String process(Function&lt;EatSomething,String&gt; func) {\r\n    \t\tEatSomething es = new EatSomething();\r\n    \t\treturn func.apply(es);\r\n    \t}\r\n    }\r\n    \r\n    \r\n    class EatSomething{\r\n    \tpublic String similarToEat() {\r\n    \t\treturn &quot;eat lightning, and crap thunder &quot;;\r\n    \t}\r\n    \t\r\n    \tpublic String eatOverloaded(EatSomething es) {\r\n    \t\treturn es.similarToEat();\r\n    \t}\r\n    \r\n    }\r\n\r\nI am totally confused with this. Why should&#39;t I call `similarToEat` using object. Why do I have to use class name here? I can easily relate `ff2` and `ff3` objects in above code. Really confused with `ff1`.\r\n\r\nOne more piece of code..\r\n\r\n    interface MyCustomFunction{  \r\n        String test(String abc);  \r\n    }  \r\n    public class MethodReference {  \r\n         \r\n        public static void main(String[] args) {  \r\n            MethodReference mr = new MethodReference();\r\n            MyCustomFunction func = String::toUpperCase; //here again. Why are we calling toUpperCase with its class name when its a non-static method\r\n            System.out.println(mr.processs(func));\r\n        }  \r\n        public String processs(MyCustomFunction obj) {\r\n        \t\r\n        \treturn obj.test(&quot;abc&quot;);\r\n        }\r\n    }  ","title":"java 8 method reference calling non static method in a static way","body":"<p>I am learning <code>method references</code> in <code>Java 8</code>. I learnt that we can define functional interface method with either lambda or <code>method reference</code>.\n<code>Method reference</code> is a way of telling &quot;<em>there exist a similar method with same signature of functional interface method, you can call it</em>&quot;.\nFurther if that similar looking method exists as a <code>static</code> method, we call it using its class name. Or if it exists as <code>non static</code> way, then we will call it with object.</p>\n<p>I am confused with below code.. <code>EatSomething</code> class has <code>non-static</code> <code>similarToEat</code> method, then why it is being called like a <code>static</code> method?</p>\n<pre><code>import java.util.function.*;\n\npublic class Test {\n    public static void main(String[] args) {\n        Test test = new Test();\n        EatSomething es = new EatSomething();\n        \n        Function &lt;EatSomething,String&gt; ff1 = EatSomething::similarToEat; //here.. similarToEat is a non-static method, then why do I need to call it using class name?\n        Function &lt;EatSomething,String&gt; ff2 = (EatSomething eat)-&gt;eat.similarToEat();\n        Function &lt;EatSomething,String&gt; ff3 = es::eatOverloaded;\n        \n        \n        System.out.println(test.process(ff1));\n        \n    }\n\n    private String process(Function&lt;EatSomething,String&gt; func) {\n        EatSomething es = new EatSomething();\n        return func.apply(es);\n    }\n}\n\n\nclass EatSomething{\n    public String similarToEat() {\n        return &quot;eat lightning, and crap thunder &quot;;\n    }\n    \n    public String eatOverloaded(EatSomething es) {\n        return es.similarToEat();\n    }\n\n}\n</code></pre>\n<p>I am totally confused with this. Why should't I call <code>similarToEat</code> using object. Why do I have to use class name here? I can easily relate <code>ff2</code> and <code>ff3</code> objects in above code. Really confused with <code>ff1</code>.</p>\n<p>One more piece of code..</p>\n<pre><code>interface MyCustomFunction{  \n    String test(String abc);  \n}  \npublic class MethodReference {  \n     \n    public static void main(String[] args) {  \n        MethodReference mr = new MethodReference();\n        MyCustomFunction func = String::toUpperCase; //here again. Why are we calling toUpperCase with its class name when its a non-static method\n        System.out.println(mr.processs(func));\n    }  \n    public String processs(MyCustomFunction obj) {\n        \n        return obj.test(&quot;abc&quot;);\n    }\n}  \n</code></pre>\n"},{"tags":["java","method-reference"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1688614707,"post_id":76625317,"comment_id":135098030,"body_markdown":"It&#39;s equivalent to `(Sayable s) -&gt; s.say()`","body":"It&#39;s equivalent to <code>(Sayable s) -&gt; s.say()</code>"},{"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"score":0,"creation_date":1688614924,"post_id":76625317,"comment_id":135098039,"body_markdown":"yes! yes! Now I understood. Thank you so much!","body":"yes! yes! Now I understood. Thank you so much!"}],"owner":{"account_id":4176295,"reputation":1249,"user_id":3422726,"accept_rate":55,"display_name":"JPG"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1688614486,"answer_count":0,"score":0,"last_activity_date":1690199307,"creation_date":1688614199,"question_id":76625317,"body_markdown":"I was learning `method reference` topic in `java8`. I learnt that **method reference** provide reference to already existing method (with similar argument types). But I want to know, how is the below code RUNNING successfully even when method arguments are different.\r\n\r\n    import java.util.function.*;\r\n    \r\n    \r\n    interface Sayable{\r\n    \tString say();\r\n    }\r\n    \r\n    \r\n    public class Test {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tTest test = new Test();\r\n    \r\n    \t\tSystem.out.println(test.doThis(Sayable::say));\r\n    \r\n    \t}\r\n    \r\n    \tprivate &lt;T&gt; T doThis(Function&lt;Sayable,T&gt; func) {\r\n    \t\tSaySomething ra = new SaySomething();\r\n    \t\treturn func.apply(ra);\r\n    \t}\r\n    \r\n    }\r\n    \r\n    \r\n    class SaySomething implements Sayable{\r\n    \r\n    \t@Override\r\n    \tpublic String say() {\r\n    \t\treturn &quot;hi&quot;;\r\n    \t}\r\n    \r\n    }\r\n\r\nIf I am not wrong here `Sayable::say` will get to `Function&lt;Sayable,T&gt; func` argument of `doThis` method. But `say()` method has no argument yet how it gets referenced to `R apply(T)` method of `Function` interface. If `String say()` method is different than `R apply(T)` then how is `Sayable::say` not showing any error?","title":"how is method reference working even when signature of apply method does not match","body":"<p>I was learning <code>method reference</code> topic in <code>java8</code>. I learnt that <strong>method reference</strong> provide reference to already existing method (with similar argument types). But I want to know, how is the below code RUNNING successfully even when method arguments are different.</p>\n<pre><code>import java.util.function.*;\n\n\ninterface Sayable{\n    String say();\n}\n\n\npublic class Test {\n    public static void main(String[] args) {\n        Test test = new Test();\n\n        System.out.println(test.doThis(Sayable::say));\n\n    }\n\n    private &lt;T&gt; T doThis(Function&lt;Sayable,T&gt; func) {\n        SaySomething ra = new SaySomething();\n        return func.apply(ra);\n    }\n\n}\n\n\nclass SaySomething implements Sayable{\n\n    @Override\n    public String say() {\n        return &quot;hi&quot;;\n    }\n\n}\n</code></pre>\n<p>If I am not wrong here <code>Sayable::say</code> will get to <code>Function&lt;Sayable,T&gt; func</code> argument of <code>doThis</code> method. But <code>say()</code> method has no argument yet how it gets referenced to <code>R apply(T)</code> method of <code>Function</code> interface. If <code>String say()</code> method is different than <code>R apply(T)</code> then how is <code>Sayable::say</code> not showing any error?</p>\n"},{"tags":["java","android","uri","alarmmanager"],"answers":[{"tags":[],"owner":{"account_id":422812,"reputation":4228,"user_id":801803,"accept_rate":100,"display_name":"Srichand Yella"},"down_vote_count":1,"up_vote_count":45,"is_accepted":true,"score":44,"last_activity_date":1308550917,"creation_date":1308511614,"answer_id":6404624,"question_id":6404275,"body_markdown":"Store the URI as a string in the database and then load it later.\r\n\r\n    // This will get the uri in a string format\r\n    String s = mUri.toString();\r\n\r\nWhen you retrieve the string from the database, rebuild the URI like this:\r\n\r\n    // This will decode the string into a URI\r\n    Uri mUri = Uri.parse(s);\r\n\r\nHope that helps. Good luck!","title":"Android: Save android.net.Uri object to Database","body":"<p>Store the URI as a string in the database and then load it later.</p>\n\n<pre><code>// This will get the uri in a string format\nString s = mUri.toString();\n</code></pre>\n\n<p>When you retrieve the string from the database, rebuild the URI like this:</p>\n\n<pre><code>// This will decode the string into a URI\nUri mUri = Uri.parse(s);\n</code></pre>\n\n<p>Hope that helps. Good luck!</p>\n"}],"owner":{"account_id":137183,"reputation":4538,"user_id":341191,"accept_rate":78,"display_name":"Sammy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13576,"favorite_count":0,"down_vote_count":0,"up_vote_count":19,"accepted_answer_id":6404624,"answer_count":1,"score":19,"last_activity_date":1690198929,"creation_date":1308507654,"question_id":6404275,"body_markdown":"What i m trying to do is get the selected ringtone from the user, set an AlarmManager alarm to play that ringtone when the alarm goes Off. but I need to save the ringtone in the database so I can reset all the alarms after phone reboot.\r\n\r\n my question is what is the best way to save the ringtone Uri to the database to retrieve later?\r\n\r\nI tried the followings:\r\n\r\n1) save the ringtone title in the DB and then retrieve it and append it to a default ringtone path. but the issue, is that the ringtone might be loaded from a different location\r\n2) Storing the uri scheme, scheme spefici part and fragment and then call Uri.fromParts to create the Uri.\r\n3) create an inputStream, byte[] array from the Uri and saving it as a blob and then reading it back and cast the result to Uri\r\n\r\nnone of these works.\r\n\r\nYour help is much appreciated.\r\n","title":"Android: Save android.net.Uri object to Database","body":"<p>What i m trying to do is get the selected ringtone from the user, set an AlarmManager alarm to play that ringtone when the alarm goes Off. but I need to save the ringtone in the database so I can reset all the alarms after phone reboot.</p>\n\n<p>my question is what is the best way to save the ringtone Uri to the database to retrieve later?</p>\n\n<p>I tried the followings:</p>\n\n<p>1) save the ringtone title in the DB and then retrieve it and append it to a default ringtone path. but the issue, is that the ringtone might be loaded from a different location\n2) Storing the uri scheme, scheme spefici part and fragment and then call Uri.fromParts to create the Uri.\n3) create an inputStream, byte[] array from the Uri and saving it as a blob and then reading it back and cast the result to Uri</p>\n\n<p>none of these works.</p>\n\n<p>Your help is much appreciated.</p>\n"},{"tags":["java","hadoop"],"comments":[{"owner":{"account_id":4723232,"reputation":870,"user_id":4214037,"accept_rate":91,"display_name":"32cupo"},"score":3,"creation_date":1485429768,"post_id":37098428,"comment_id":70926383,"body_markdown":"Possible duplicate of [Hadoop &quot;Unable to load native-hadoop library for your platform&quot; warning](http://stackoverflow.com/questions/19943766/hadoop-unable-to-load-native-hadoop-library-for-your-platform-warning)","body":"Possible duplicate of <a href=\"http://stackoverflow.com/questions/19943766/hadoop-unable-to-load-native-hadoop-library-for-your-platform-warning\">Hadoop &quot;Unable to load native-hadoop library for your platform&quot; warning</a>"}],"answers":[{"tags":[],"owner":{"account_id":466002,"reputation":20226,"user_id":870483,"accept_rate":81,"display_name":"Nishu Tayal"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1462723245,"creation_date":1462723245,"answer_id":37101853,"question_id":37098428,"body_markdown":"Move your compiled native library files to $HADOOP_HOME/lib folder.\r\n\r\nThen set your environment variables by editing .bashrc file\r\n\r\n    export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib  \r\n    export HADOOP_OPTS=&quot;$HADOOP_OPTS -Djava.library.path=$HADOOP_HOME/lib&quot;\r\n\r\nMake sure your compiled native library files are in $HADOOP_HOME/lib folder.\r\n\r\nIt should fix the issue.\r\n","title":"Hadoop: Unable to load native-hadoop library for your platform","body":"<p>Move your compiled native library files to $HADOOP_HOME/lib folder.</p>\n\n<p>Then set your environment variables by editing .bashrc file</p>\n\n<pre><code>export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib  \nexport HADOOP_OPTS=\"$HADOOP_OPTS -Djava.library.path=$HADOOP_HOME/lib\"\n</code></pre>\n\n<p>Make sure your compiled native library files are in $HADOOP_HOME/lib folder.</p>\n\n<p>It should fix the issue.</p>\n"},{"tags":[],"owner":{"account_id":2930914,"reputation":1941,"user_id":4029265,"accept_rate":37,"display_name":"Ishan Kumar"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1462772023,"creation_date":1462772023,"answer_id":37108338,"question_id":37098428,"body_markdown":"Try to load the hadoop jars-&quot;hadoop-common.jar and hadoop-core.jar&quot; to your class path. You can simply do it in eclipse ans while creating a jar file those jars will be referenced automatically.","title":"Hadoop: Unable to load native-hadoop library for your platform","body":"<p>Try to load the hadoop jars-\"hadoop-common.jar and hadoop-core.jar\" to your class path. You can simply do it in eclipse ans while creating a jar file those jars will be referenced automatically.</p>\n"},{"tags":[],"owner":{"account_id":7408255,"reputation":7,"user_id":5636509,"display_name":"strom"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1483741303,"creation_date":1483736292,"answer_id":41514233,"question_id":37098428,"body_markdown":"edit the file `hadoop-env.sh` in `/usr/local/etc/hadoop`\r\n\r\nAdding Hadoop library into `LD_LIBRARY_PATH` :\r\n\r\n    export LD_LIBRARY_PATH=/usr/local/hadoop/lib/native/:$LD_LIBRARY_PATH\r\n\r\ntry it, works for me\r\n","title":"Hadoop: Unable to load native-hadoop library for your platform","body":"<p>edit the file <code>hadoop-env.sh</code> in <code>/usr/local/etc/hadoop</code></p>\n\n<p>Adding Hadoop library into <code>LD_LIBRARY_PATH</code> :</p>\n\n<pre><code>export LD_LIBRARY_PATH=/usr/local/hadoop/lib/native/:$LD_LIBRARY_PATH\n</code></pre>\n\n<p>try it, works for me</p>\n"},{"tags":[],"owner":{"account_id":11370022,"reputation":11,"user_id":8335821,"display_name":"Mike Onuorah"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1500530874,"creation_date":1500528521,"answer_id":45205881,"question_id":37098428,"body_markdown":"Add the commands lines below to `hadoop-env.sh`, it should suppress the errors encountered\r\n\r\n    export HADOOP_HOME_WARN_SUPPRESS=1\r\n    export HADOOP_ROOT_LOGGER=&quot;WARN,DRFA&quot;\r\n","title":"Hadoop: Unable to load native-hadoop library for your platform","body":"<p>Add the commands lines below to <code>hadoop-env.sh</code>, it should suppress the errors encountered</p>\n\n<pre><code>export HADOOP_HOME_WARN_SUPPRESS=1\nexport HADOOP_ROOT_LOGGER=\"WARN,DRFA\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29080188,"reputation":1,"user_id":22276415,"display_name":"user22276415"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690198860,"creation_date":1690198860,"answer_id":76754122,"question_id":37098428,"body_markdown":"I had this error. \r\n\r\nI solved it by updating the winutils.exe and hadoop.dll files to the later version.\r\n:) \r\n\r\nhttps://github.com/kontext-tech/winutils/tree/master/hadoop-3.3.1\r\n(where I was able to find different versions)","title":"Hadoop: Unable to load native-hadoop library for your platform","body":"<p>I had this error.</p>\n<p>I solved it by updating the winutils.exe and hadoop.dll files to the later version.\n:)</p>\n<p><a href=\"https://github.com/kontext-tech/winutils/tree/master/hadoop-3.3.1\" rel=\"nofollow noreferrer\">https://github.com/kontext-tech/winutils/tree/master/hadoop-3.3.1</a>\n(where I was able to find different versions)</p>\n"}],"owner":{"account_id":8401123,"reputation":71,"user_id":6306296,"display_name":"El Mehdi Belgasmi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29539,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":5,"score":7,"last_activity_date":1690198860,"creation_date":1462700709,"question_id":37098428,"body_markdown":"I&#39;ve installed Hadoop 2.7.2 single node on Ubuntu and I want to run the java wordcount program. The compilation and the creation of the jar file are done succesfully, but when I run the jar file on Hadoop I receive this message:\r\n\r\n    WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\r\n\r\nI set environment variables by editing .bashrc file:\r\n\r\n    export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib\r\n\r\nWhen I type hadoop checknative -a I get this:\r\n\r\n    hadoop: true /usr/local/hadoop/lib/native/libhadoop.so.1.0.0\r\n    zlib: true /lib/x86_64-linux-gnu/libz.so.1\r\n    snappy: false \r\n    lz4: true revision:99\r\n    bzip2: false\r\n    openssl: true /usr/lib/x86_64-linux-gnu/libcrypto.so\r\n\r\n    16/05/09 00:48:53 INFO util.ExitUtil: Exiting with status 1\r\n\r\n\r\nHadoop version: 2.7.2\r\n\r\nUbuntu version: 14.04\r\n\r\nCould anyone give some clues about the issue?","title":"Hadoop: Unable to load native-hadoop library for your platform","body":"<p>I've installed Hadoop 2.7.2 single node on Ubuntu and I want to run the java wordcount program. The compilation and the creation of the jar file are done succesfully, but when I run the jar file on Hadoop I receive this message:</p>\n\n<pre><code>WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n</code></pre>\n\n<p>I set environment variables by editing .bashrc file:</p>\n\n<pre><code>export HADOOP_COMMON_LIB_NATIVE_DIR=$HADOOP_HOME/lib\n</code></pre>\n\n<p>When I type hadoop checknative -a I get this:</p>\n\n<pre><code>hadoop: true /usr/local/hadoop/lib/native/libhadoop.so.1.0.0\nzlib: true /lib/x86_64-linux-gnu/libz.so.1\nsnappy: false \nlz4: true revision:99\nbzip2: false\nopenssl: true /usr/lib/x86_64-linux-gnu/libcrypto.so\n\n16/05/09 00:48:53 INFO util.ExitUtil: Exiting with status 1\n</code></pre>\n\n<p>Hadoop version: 2.7.2</p>\n\n<p>Ubuntu version: 14.04</p>\n\n<p>Could anyone give some clues about the issue?</p>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1690212802,"post_id":76754117,"comment_id":135318573,"body_markdown":"Password grant type is deprecated and should not be used.","body":"Password grant type is deprecated and should not be used."}],"owner":{"account_id":13887759,"reputation":1,"user_id":22176575,"display_name":"ifog"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690198843,"creation_date":1690198843,"question_id":76754117,"body_markdown":"So, i already have a custom basic authentication filter and custom user details service,\r\nI am using my custom filter to add extra login fileds when calling `loadUserByUsername(String input)` method from my custom user details service. Basic authorization with username/password grant type works fine:\r\n\r\n```\r\ncurl --location --request POST &#39;localhost:8080/api/v1/oauth/token&#39; \\\r\n--header &#39;Authorization: Basic some_hash (username/password)&#39; \\\r\n--form &#39;password=&quot;some_pass&quot;&#39; \\\r\n--form &#39;grant_type=&quot;password&quot;&#39; \\\r\n--form &#39;username=&quot;test@com.io&quot;&#39;\r\n```\r\n\r\nI just modifing my request in my custom filter:\r\n\r\n\r\n```\r\n                UsernamePasswordAuthenticationToken authRequest = this.authenticationConverter.convert(mutableRequest);\r\n                String separator = &quot;;&quot;;\r\n                String combinedUsername = request.getParameter(&quot;username&quot;) + separator + authRequest.getName();\r\n                mutableRequest.addParameter(&quot;username&quot;, combinedUsername);\r\n```\r\n\r\nBut when im authorizing by refresh token, there i dont have username (users login name) which i needed, only username which i&#39;m using as Authorization header.\r\n\r\n\r\n```\r\ncurl --location --request POST &#39;localhost:8080/api/v1/oauth/token&#39; \\\r\n--header &#39;Authorization: Basic some_hash (username/password)&#39; \\\r\n--form &#39;grant_type=&quot;refresh_token&quot;&#39; \\\r\n--form &#39;refresh_token=&quot;some_token&quot;&#39;\r\n```\r\nIn logs i see that request hit BasicAuthenticationFilter, but as Principal username is username from Authorization header:\r\n\r\n\r\n```\r\n2023-07-24 17:29:48.883 DEBUG 557979 --- [nio-8080-exec-2] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test-bucket, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]]\r\n\r\n```\r\n\r\nBut then called PreAuthenticatedAuthenticationProvider, and i see that principal was changed:\r\n\r\n\r\n```\r\n2023-07-24 17:29:49.211 DEBUG 557979 --- [nio-8080-exec-2] p.PreAuthenticatedAuthenticationProvider : PreAuthenticated authentication request: PreAuthenticatedAuthenticationToken [Principal=UsernamePasswordAuthenticationToken [Principal=test@com.io, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[read]]\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve tried to create custom pre authentication provider, but it&#39;s not calling.\r\nSo how can i get this PreAuthenticatedAuthenticationToken with principal which i need to combine name and load user details ?","title":"Java basic authentication with refresh token","body":"<p>So, i already have a custom basic authentication filter and custom user details service,\nI am using my custom filter to add extra login fileds when calling <code>loadUserByUsername(String input)</code> method from my custom user details service. Basic authorization with username/password grant type works fine:</p>\n<pre><code>curl --location --request POST 'localhost:8080/api/v1/oauth/token' \\\n--header 'Authorization: Basic some_hash (username/password)' \\\n--form 'password=&quot;some_pass&quot;' \\\n--form 'grant_type=&quot;password&quot;' \\\n--form 'username=&quot;test@com.io&quot;'\n</code></pre>\n<p>I just modifing my request in my custom filter:</p>\n<pre><code>                UsernamePasswordAuthenticationToken authRequest = this.authenticationConverter.convert(mutableRequest);\n                String separator = &quot;;&quot;;\n                String combinedUsername = request.getParameter(&quot;username&quot;) + separator + authRequest.getName();\n                mutableRequest.addParameter(&quot;username&quot;, combinedUsername);\n</code></pre>\n<p>But when im authorizing by refresh token, there i dont have username (users login name) which i needed, only username which i'm using as Authorization header.</p>\n<pre><code>curl --location --request POST 'localhost:8080/api/v1/oauth/token' \\\n--header 'Authorization: Basic some_hash (username/password)' \\\n--form 'grant_type=&quot;refresh_token&quot;' \\\n--form 'refresh_token=&quot;some_token&quot;'\n</code></pre>\n<p>In logs i see that request hit BasicAuthenticationFilter, but as Principal username is username from Authorization header:</p>\n<pre><code>2023-07-24 17:29:48.883 DEBUG 557979 --- [nio-8080-exec-2] o.s.s.w.a.www.BasicAuthenticationFilter  : Set SecurityContextHolder to UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=test-bucket, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[]], Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=0:0:0:0:0:0:0:1, SessionId=null], Granted Authorities=[]]\n\n</code></pre>\n<p>But then called PreAuthenticatedAuthenticationProvider, and i see that principal was changed:</p>\n<pre><code>2023-07-24 17:29:49.211 DEBUG 557979 --- [nio-8080-exec-2] p.PreAuthenticatedAuthenticationProvider : PreAuthenticated authentication request: PreAuthenticatedAuthenticationToken [Principal=UsernamePasswordAuthenticationToken [Principal=test@com.io, Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[read]]\n</code></pre>\n<p>I've tried to create custom pre authentication provider, but it's not calling.\nSo how can i get this PreAuthenticatedAuthenticationToken with principal which i need to combine name and load user details ?</p>\n"},{"tags":["java","spring-boot","azure","azureservicebus"],"answers":[{"tags":[],"owner":{"account_id":25323437,"reputation":5152,"user_id":19144428,"display_name":"Venkatesan"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690198176,"creation_date":1690198176,"answer_id":76754029,"question_id":76751964,"body_markdown":"&gt; Although I have successfully created the Subscriber, the custom filter has not been applied. My requirement is to create a new Subscriber and attach a correlation custom filter to it.\r\n\r\n**I tried in my environment and got the same results.**\r\n\r\nInitially, I tried with Java code to create a subscription with a correlation filter but, it created only a subscription and not creating a filter may we cannot do this in Java or it may be a bug.\r\n\r\nFor alternation, create the subscription first and you can use the below Java code to create the correlation filter.\r\n\r\n**Code:**\r\n \r\n\r\n    import com.azure.messaging.servicebus.administration.*;\r\n    import com.azure.messaging.servicebus.administration.models.CorrelationRuleFilter;\r\n    import com.azure.messaging.servicebus.administration.models.CreateRuleOptions;\r\n    \r\n  \r\n    public final class App {\r\n        public static void main(String[] args) {\r\n            final String connectionString = &quot;xxxxx&quot;;\r\n            ServiceBusAdministrationClient adminClient = new ServiceBusAdministrationClientBuilder().connectionString(connectionString).buildClient();\r\n            \r\n            CorrelationRuleFilter filter = new CorrelationRuleFilter();\r\n            filter.getProperties().put(&quot;eventType&quot;, &quot;order.created&quot;);\r\n            filter.getProperties().put(&quot;eventTypeVersion&quot;, 1);\r\n            filter.getProperties().put(&quot;label&quot;,&quot;important&quot;);\r\n    \r\n            adminClient.createRule(&quot;topic326&quot;,&quot;rule326&quot;,&quot;subscription326&quot;,new CreateRuleOptions(filter));\r\n        }\r\n    }\r\n\r\n**Output:**\r\n![enter image description here](https://i.imgur.com/ccXidLR.png)\r\n\r\n**Reference:**  \r\n\r\n[CorrelationFilter Class | Microsoft Learn](https://learn.microsoft.com/en-us/java/api/com.microsoft.azure.servicebus.rules.correlationfilter?view=azure-java-stable)\r\n","title":"Integrate Azure service-bus with springboot","body":"<blockquote>\n<p>Although I have successfully created the Subscriber, the custom filter has not been applied. My requirement is to create a new Subscriber and attach a correlation custom filter to it.</p>\n</blockquote>\n<p><strong>I tried in my environment and got the same results.</strong></p>\n<p>Initially, I tried with Java code to create a subscription with a correlation filter but, it created only a subscription and not creating a filter may we cannot do this in Java or it may be a bug.</p>\n<p>For alternation, create the subscription first and you can use the below Java code to create the correlation filter.</p>\n<p><strong>Code:</strong></p>\n<pre><code>import com.azure.messaging.servicebus.administration.*;\nimport com.azure.messaging.servicebus.administration.models.CorrelationRuleFilter;\nimport com.azure.messaging.servicebus.administration.models.CreateRuleOptions;\n\n\npublic final class App {\n    public static void main(String[] args) {\n        final String connectionString = &quot;xxxxx&quot;;\n        ServiceBusAdministrationClient adminClient = new ServiceBusAdministrationClientBuilder().connectionString(connectionString).buildClient();\n        \n        CorrelationRuleFilter filter = new CorrelationRuleFilter();\n        filter.getProperties().put(&quot;eventType&quot;, &quot;order.created&quot;);\n        filter.getProperties().put(&quot;eventTypeVersion&quot;, 1);\n        filter.getProperties().put(&quot;label&quot;,&quot;important&quot;);\n\n        adminClient.createRule(&quot;topic326&quot;,&quot;rule326&quot;,&quot;subscription326&quot;,new CreateRuleOptions(filter));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong>\n<img src=\"https://i.imgur.com/ccXidLR.png\" alt=\"enter image description here\" /></p>\n<p><strong>Reference:</strong></p>\n<p><a href=\"https://learn.microsoft.com/en-us/java/api/com.microsoft.azure.servicebus.rules.correlationfilter?view=azure-java-stable\" rel=\"nofollow noreferrer\">CorrelationFilter Class | Microsoft Learn</a></p>\n"}],"owner":{"account_id":20248633,"reputation":13,"user_id":14850400,"display_name":"Bhautik Sakhiya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690198176,"creation_date":1690180825,"question_id":76751964,"body_markdown":"I have used Spring Boot to create a new Subscriber for a topic and apply a custom filter to it. I establish a connection to create a subscriber using the connectionString.\r\n \r\nAlthough I have successfully created the Subscriber,but the custom filter has not been applied. My requirement is to create a new Subscriber and attach a correlation custom filter to it.\r\n\r\nAdditionally, I have used **v7.14.0** of service-bus.\r\nThe sample code is given below:\r\n\r\n````\r\nfinal String connectionString = &quot;&quot;;\r\n\r\n        // create connection\r\n        ServiceBusAdministrationClient adminClient = new ServiceBusAdministrationClientBuilder()\r\n                .connectionString(connectionString)\r\n                .buildClient();\r\n\r\n        // create filter\r\n        CreateRuleOptions ruleOptions = new CreateRuleOptions();\r\n        CorrelationRuleFilter correlationFilter = new CorrelationRuleFilter();\r\n        correlationFilter.getProperties().put(&quot;X number&quot;, &quot;12345&quot;);  // Here I set custom correlation filter.\r\n        ruleOptions.setFilter(correlationFilter);\r\n\r\n        //create subscription\r\n        CreateSubscriptionOptions subscriptionOptions = new CreateSubscriptionOptions()\r\n                .setAutoDeleteOnIdle(Duration.ofDays(7))\r\n                .setMaxDeliveryCount(10)\r\n                .setDefaultMessageTimeToLive(Duration.ofDays(2))\r\n                .setUserMetadata(&quot;some metadata&quot;);\r\n\r\n        adminClient.createSubscription(&quot;topic name&quot;, &quot;subscriber&quot;, &quot;Rule name&quot;, subscriptionOptions, ruleOptions);","title":"Integrate Azure service-bus with springboot","body":"<p>I have used Spring Boot to create a new Subscriber for a topic and apply a custom filter to it. I establish a connection to create a subscriber using the connectionString.</p>\n<p>Although I have successfully created the Subscriber,but the custom filter has not been applied. My requirement is to create a new Subscriber and attach a correlation custom filter to it.</p>\n<p>Additionally, I have used <strong>v7.14.0</strong> of service-bus.\nThe sample code is given below:</p>\n<pre><code>final String connectionString = &quot;&quot;;\n\n        // create connection\n        ServiceBusAdministrationClient adminClient = new ServiceBusAdministrationClientBuilder()\n                .connectionString(connectionString)\n                .buildClient();\n\n        // create filter\n        CreateRuleOptions ruleOptions = new CreateRuleOptions();\n        CorrelationRuleFilter correlationFilter = new CorrelationRuleFilter();\n        correlationFilter.getProperties().put(&quot;X number&quot;, &quot;12345&quot;);  // Here I set custom correlation filter.\n        ruleOptions.setFilter(correlationFilter);\n\n        //create subscription\n        CreateSubscriptionOptions subscriptionOptions = new CreateSubscriptionOptions()\n                .setAutoDeleteOnIdle(Duration.ofDays(7))\n                .setMaxDeliveryCount(10)\n                .setDefaultMessageTimeToLive(Duration.ofDays(2))\n                .setUserMetadata(&quot;some metadata&quot;);\n\n        adminClient.createSubscription(&quot;topic name&quot;, &quot;subscriber&quot;, &quot;Rule name&quot;, subscriptionOptions, ruleOptions);\n</code></pre>\n"},{"tags":["javascript","java","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690197961,"creation_date":1690197961,"answer_id":76754001,"question_id":76753869,"body_markdown":"What you are asking for is not supported and in my opinion the wrong approach. If you want to conditionally run tests depending on how tests are initiated, use tags: https://github.com/karatelabs/karate#tags\r\n\r\nThere is a way in which you can use the `karate.env` to select (or un-select) tests. Maybe that&#39;s all you need.","title":"can we read karate-config.js data in JAVA test Runner class?","body":"<p>What you are asking for is not supported and in my opinion the wrong approach. If you want to conditionally run tests depending on how tests are initiated, use tags: <a href=\"https://github.com/karatelabs/karate#tags\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate#tags</a></p>\n<p>There is a way in which you can use the <code>karate.env</code> to select (or un-select) tests. Maybe that's all you need.</p>\n"}],"owner":{"account_id":29079710,"reputation":11,"user_id":22276044,"display_name":"prem gupta"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1690197986,"creation_date":1690196919,"question_id":76753869,"body_markdown":"I have a requirement where in need to fetch karate-config.js data in my junit test runner to execute feature files based on conditional logic\r\n\r\nkarate-config.js file:-\r\n\r\n        config.ACH = &quot;Yes&quot; \r\n        config.VISA = &quot;No&quot;\r\n        config.MasterCard = &quot;No&quot;\r\n        config.PAYPAL = &quot;Yes&quot;\r\n\r\nI want to implement following logic in test runner java class:-\r\n\r\n    class default_TestRunner {\r\n    \r\n        @Karate.Test\r\n        Karate testPostResult() {\r\n            System.setProperty(&quot;karate.env&quot;, &quot;qa&quot;);\r\n    if(config.ACH == &quot;Yes&quot; &amp;&amp; config.PAYPAL == &quot;Yes&quot;) // How to read these config data and exec specific feature files \r\n            return Karate.run(&quot;src/test/java/features/ACHE2E.feature&quot;,&quot;src/test/java/features/PAYPALE2E.feature&quot;).tags(&quot;~@ignore&quot;);\r\n        \r\n        \r\n        }\r\n    \r\n    }\r\n","title":"can we read karate-config.js data in JAVA test Runner class?","body":"<p>I have a requirement where in need to fetch karate-config.js data in my junit test runner to execute feature files based on conditional logic</p>\n<p>karate-config.js file:-</p>\n<pre><code>    config.ACH = &quot;Yes&quot; \n    config.VISA = &quot;No&quot;\n    config.MasterCard = &quot;No&quot;\n    config.PAYPAL = &quot;Yes&quot;\n</code></pre>\n<p>I want to implement following logic in test runner java class:-</p>\n<pre><code>class default_TestRunner {\n\n    @Karate.Test\n    Karate testPostResult() {\n        System.setProperty(&quot;karate.env&quot;, &quot;qa&quot;);\nif(config.ACH == &quot;Yes&quot; &amp;&amp; config.PAYPAL == &quot;Yes&quot;) // How to read these config data and exec specific feature files \n        return Karate.run(&quot;src/test/java/features/ACHE2E.feature&quot;,&quot;src/test/java/features/PAYPALE2E.feature&quot;).tags(&quot;~@ignore&quot;);\n    \n    \n    }\n\n}\n</code></pre>\n"},{"tags":["java","generics","java-stream","collectors"],"answers":[{"tags":[],"owner":{"account_id":7291967,"reputation":57515,"user_id":5558072,"accept_rate":100,"display_name":"Youcef LAIDANI"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1689767213,"creation_date":1689766865,"answer_id":76720930,"question_id":76720829,"body_markdown":"The declaration of your method is not correct, instead of:\r\n\r\n    public static &lt;T, R extends Optional&lt;T&gt;&gt; Collector&lt;T, ?, R&gt; toOptional() {\r\n\r\nYou can just use:\r\n\r\n    public static &lt;T&gt; Collector&lt;T, ?, Optional&lt;T&gt;&gt; toOptional() {\r\n\r\nIn other words, the method need to return an `Optional` object of type `T` directly, instead of using a separate type parameter `R` that extends `Optional&lt;T&gt;`.","title":"Java collector to Optional&lt;T&gt;","body":"<p>The declaration of your method is not correct, instead of:</p>\n<pre><code>public static &lt;T, R extends Optional&lt;T&gt;&gt; Collector&lt;T, ?, R&gt; toOptional() {\n</code></pre>\n<p>You can just use:</p>\n<pre><code>public static &lt;T&gt; Collector&lt;T, ?, Optional&lt;T&gt;&gt; toOptional() {\n</code></pre>\n<p>In other words, the method need to return an <code>Optional</code> object of type <code>T</code> directly, instead of using a separate type parameter <code>R</code> that extends <code>Optional&lt;T&gt;</code>.</p>\n"},{"tags":[],"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690197837,"creation_date":1690197837,"answer_id":76753985,"question_id":76720829,"body_markdown":"[This answer] does already tell you how to declare the method correctly.\r\n\r\nHowever, note that you don’t need this special collector. You can simply use\r\n\r\n```java\r\nCollectors.reducing((first, second) -&gt; {\r\n    throw new CollectingException(&quot;More than one item found, &quot;\r\n        + &quot;first: &quot; + first + &quot;, second: &quot; + second);\r\n})\r\n```\r\n\r\nwhich does already your intended job. (see [`Collectors.reducing(…)`])\r\n\r\n - If the stream is empty, an empty `Optional` is returned\r\n - If the stream contains a single element, an `Optional` containing the element is returned  \r\n   Note that this approach doesn’t construct a `List` first but directly produces the `Optional`.\r\n - If there are more than one element, the reduction function will be evaluated, to reduce them to a single result, which will throw the intended exception here.  \r\n   Note that this approach doesn’t waste resources to collect all unintended elements into a `List` but stops when encountering the second element.\r\n\r\n---\r\n\r\nWhen you don’t want to combine this logic with other collectors, you don’t need a collector at all but can use [`reduce`] on the Stream directly:\r\n\r\n```java\r\nList&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\n```\r\n```java\r\nOptional&lt;Person&gt; john = people.stream()\r\n    .filter(person -&gt; &quot;John&quot;.equals(person.getName()))\r\n    .reduce((first, second) -&gt; {\r\n        throw new CollectingException(&quot;More than one item found, &quot;\r\n            + &quot;first: &quot; + first + &quot;, second: &quot; + second);\r\n    });\r\n```\r\ndoes the same as\r\n\r\n```java\r\nOptional&lt;Person&gt; john = people.stream()\r\n    .filter(person -&gt; &quot;John&quot;.equals(person.getName()))\r\n    .collect(Collectors.reducing((first, second) -&gt; {\r\n        throw new CollectingException(&quot;More than one item found, &quot;\r\n            + &quot;first: &quot; + first + &quot;, second: &quot; + second);\r\n    }));\r\n\r\n```\r\n\r\n[This answer]: https://stackoverflow.com/a/76720930/2711488\r\n[`Collectors.reducing(…)`]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#reducing(java.util.function.BinaryOperator)\r\n[`reduce`]: https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#reduce(java.util.function.BinaryOperator)","title":"Java collector to Optional&lt;T&gt;","body":"<p><a href=\"https://stackoverflow.com/a/76720930/2711488\">This answer</a> does already tell you how to declare the method correctly.</p>\n<p>However, note that you don’t need this special collector. You can simply use</p>\n<pre class=\"lang-java prettyprint-override\"><code>Collectors.reducing((first, second) -&gt; {\n    throw new CollectingException(&quot;More than one item found, &quot;\n        + &quot;first: &quot; + first + &quot;, second: &quot; + second);\n})\n</code></pre>\n<p>which does already your intended job. (see <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Collectors.html#reducing(java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>Collectors.reducing(…)</code></a>)</p>\n<ul>\n<li>If the stream is empty, an empty <code>Optional</code> is returned</li>\n<li>If the stream contains a single element, an <code>Optional</code> containing the element is returned<br />\nNote that this approach doesn’t construct a <code>List</code> first but directly produces the <code>Optional</code>.</li>\n<li>If there are more than one element, the reduction function will be evaluated, to reduce them to a single result, which will throw the intended exception here.<br />\nNote that this approach doesn’t waste resources to collect all unintended elements into a <code>List</code> but stops when encountering the second element.</li>\n</ul>\n<hr />\n<p>When you don’t want to combine this logic with other collectors, you don’t need a collector at all but can use <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/stream/Stream.html#reduce(java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>reduce</code></a> on the Stream directly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Person&gt; people = new ArrayList&lt;&gt;();\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;Person&gt; john = people.stream()\n    .filter(person -&gt; &quot;John&quot;.equals(person.getName()))\n    .reduce((first, second) -&gt; {\n        throw new CollectingException(&quot;More than one item found, &quot;\n            + &quot;first: &quot; + first + &quot;, second: &quot; + second);\n    });\n</code></pre>\n<p>does the same as</p>\n<pre class=\"lang-java prettyprint-override\"><code>Optional&lt;Person&gt; john = people.stream()\n    .filter(person -&gt; &quot;John&quot;.equals(person.getName()))\n    .collect(Collectors.reducing((first, second) -&gt; {\n        throw new CollectingException(&quot;More than one item found, &quot;\n            + &quot;first: &quot; + first + &quot;, second: &quot; + second);\n    }));\n\n</code></pre>\n"}],"owner":{"account_id":3220345,"reputation":5564,"user_id":2717958,"accept_rate":57,"display_name":"Michal Krasny"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":76720930,"answer_count":2,"score":3,"last_activity_date":1690197851,"creation_date":1689766194,"question_id":76720829,"body_markdown":"Using Java streams and generics I&#39;m trying to create a `Collector`, that would return me `Optional.empty`, if stream is empty, `Optional&lt;T&gt;` if stream has one item and throw exception if stream has more than one item.\r\n\r\n```\r\npublic static &lt;T, R extends Optional&lt;T&gt;&gt; Collector&lt;T, ?, R&gt; toOptional() {\r\n\treturn Collectors.collectingAndThen(\r\n\t\t\tCollectors.toList(),\r\n\t\t\tlist -&gt; {\r\n\t\t\t\tif (list.size() &gt; 1) {\r\n\t\t\t\t\tthrow new CollectingException(&quot;More than one item found in: &quot; + list);\r\n\t\t\t\t}\r\n\t\t\t\tif (list.size() == 1) {\r\n\t\t\t\t\treturn Optional.of(list.get(0));\r\n\t\t\t\t}\r\n\t\t\t\treturn Optional.empty();\r\n\t\t\t}\r\n\t);\r\n}\r\n\r\n```\r\n\r\nHowever I&#39;m getting an error I don&#39;t understand.\r\n\r\n```\r\nRequired type:\r\nCollector&lt;T,?,R&gt;\r\nProvided:\r\nCollector&lt;Object,Object,Object&gt;\r\nno instance(s) of type variable(s) T exist so that Optional&lt;T&gt; conforms to R inference variable RR has incompatible bounds: equality constraints: R lower bounds: Optional&lt;T1868063&gt;\r\n```\r\n\r\nThe desired usage would be\r\n\r\n```\r\nList&lt;Person&gt; people = new ArrayList&lt;&gt;();\r\nOptional&lt;Person&gt; john = people.stream().filter(person-&gt;&quot;John&quot;.equals(person.getName())).collect(toOptional());\r\n```\r\n\r\nCould anyone please explain me what&#39;s wrong?\r\n","title":"Java collector to Optional&lt;T&gt;","body":"<p>Using Java streams and generics I'm trying to create a <code>Collector</code>, that would return me <code>Optional.empty</code>, if stream is empty, <code>Optional&lt;T&gt;</code> if stream has one item and throw exception if stream has more than one item.</p>\n<pre><code>public static &lt;T, R extends Optional&lt;T&gt;&gt; Collector&lt;T, ?, R&gt; toOptional() {\n    return Collectors.collectingAndThen(\n            Collectors.toList(),\n            list -&gt; {\n                if (list.size() &gt; 1) {\n                    throw new CollectingException(&quot;More than one item found in: &quot; + list);\n                }\n                if (list.size() == 1) {\n                    return Optional.of(list.get(0));\n                }\n                return Optional.empty();\n            }\n    );\n}\n\n</code></pre>\n<p>However I'm getting an error I don't understand.</p>\n<pre><code>Required type:\nCollector&lt;T,?,R&gt;\nProvided:\nCollector&lt;Object,Object,Object&gt;\nno instance(s) of type variable(s) T exist so that Optional&lt;T&gt; conforms to R inference variable RR has incompatible bounds: equality constraints: R lower bounds: Optional&lt;T1868063&gt;\n</code></pre>\n<p>The desired usage would be</p>\n<pre><code>List&lt;Person&gt; people = new ArrayList&lt;&gt;();\nOptional&lt;Person&gt; john = people.stream().filter(person-&gt;&quot;John&quot;.equals(person.getName())).collect(toOptional());\n</code></pre>\n<p>Could anyone please explain me what's wrong?</p>\n"},{"tags":["java","parsing","compression","mime","mhtml"],"answers":[{"tags":[],"owner":{"account_id":138327,"reputation":2680,"user_id":343202,"accept_rate":100,"display_name":"Roki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1278953212,"creation_date":1278953212,"answer_id":3230381,"question_id":3230305,"body_markdown":"U can try http://www.chilkatsoft.com/mht-features.asp , it can pack/unpack and you can handle it after as normal files. The download link is: http://www.chilkatsoft.com/java.asp","title":"How to read or parse MHTML (.mht) files in java","body":"<p>U can try <a href=\"http://www.chilkatsoft.com/mht-features.asp\" rel=\"nofollow noreferrer\">http://www.chilkatsoft.com/mht-features.asp</a> , it can pack/unpack and you can handle it after as normal files. The download link is: <a href=\"http://www.chilkatsoft.com/java.asp\" rel=\"nofollow noreferrer\">http://www.chilkatsoft.com/java.asp</a></p>\n"},{"tags":[],"owner":{"account_id":81675,"reputation":4290,"user_id":230188,"accept_rate":80,"display_name":"Wajdy Essam"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1278964034,"creation_date":1278964034,"answer_id":3231731,"question_id":3230305,"body_markdown":"i was used http://jtidy.sourceforge.net to parse/read/index mht files (but as normal files, not compressed files)\r\n","title":"How to read or parse MHTML (.mht) files in java","body":"<p>i was used <a href=\"http://jtidy.sourceforge.net\" rel=\"nofollow noreferrer\">http://jtidy.sourceforge.net</a> to parse/read/index mht files (but as normal files, not compressed files)</p>\n"},{"tags":[],"owner":{"account_id":156522,"reputation":13969,"user_id":373861,"accept_rate":95,"display_name":"Favonius"},"down_vote_count":1,"up_vote_count":16,"is_accepted":true,"score":15,"last_activity_date":1279039889,"creation_date":1279039889,"answer_id":3239442,"question_id":3230305,"body_markdown":"Frankly, I wasn&#39;t expecting a solution in near future and was about to give up, but some how I stumbled on this page: \r\n\r\nhttp://en.wikipedia.org/wiki/MIME#Multipart_messages\r\n\r\nhttp://msdn.microsoft.com/en-us/library/ms527355%28EXCHG.10%29.aspx\r\n\r\nAlthough, not a very catchy in first look. But if you look carefully you will get clue. After reading this I fired up my IE and at random started saving pages as `*.mht` file. Let me go line by line... \r\n\r\nBut let me explain beforehand that my ultimate goal was to separate/extract out the `html` content and parse it... the solution is not complete in itself as it depends on the `character set` or `encoding` I choose while saving. But even though it will extract the individual files with minor hitches...\r\n\r\nI hope this will be useful for anyone who is trying to parse/decompress `*.mht/MHTML` files :)\r\n\r\n======= Explanation ========\r\n** Taken from a mht file **\r\n\r\n    From: &quot;Saved by Windows Internet Explorer 7&quot;\r\nIt is the software used for saving the file\r\n\r\n    Subject: Google\r\n    Date: Tue, 13 Jul 2010 21:23:03 +0530\r\n    MIME-Version: 1.0\r\nSubject, date and mime-version … much like the mail format\r\n\r\n      Content-Type: multipart/related;\r\n\ttype=&quot;text/html&quot;;\r\nThis is the part which tells us that it is a `multipart` document. A multipart document has one or more different sets of data combined in a single body, a `multipart` Content-Type field must appear in the entity&#39;s header. Here, we can also see the type as `&quot;text/html&quot;`.\r\n\r\n\tboundary=&quot;----=_NextPart_000_0007_01CB22D1.93BBD1A0&quot;\r\nOut of all this is the most important part. This is the unique delimiter which divides two different parts (html,images,css,script etc). **Once** you get hold of this, everything gets easy... Now, I just have to iterate through the document and finding out different sections and saving them as per their `Content-Transfer-Encoding` (base64, quoted-printable etc) ...\r\n    .\r\n    .\r\n    .\r\n\r\n**SAMPLE**\r\n\r\n     ------=_NextPart_000_0007_01CB22D1.93BBD1A0\r\n     Content-Type: text/html;\r\n     charset=&quot;utf-8&quot;\r\n     Content-Transfer-Encoding: quoted-printable\r\n     Content-Location: http://www.google.com/webhp?sourceid=navclient&amp;ie=UTF-8\r\n\r\n     &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; =\r\n    .\r\n    .\r\n    .\r\n\r\n** JAVA CODE **\r\n\r\nAn interface for defining constants.\r\n\r\n\tpublic interface IConstants \r\n\t{\r\n\t\tpublic String BOUNDARY = &quot;boundary&quot;;\r\n\t\tpublic String CHAR_SET = &quot;charset&quot;;\r\n\t\tpublic String CONTENT_TYPE = &quot;Content-Type&quot;;\r\n\t\tpublic String CONTENT_TRANSFER_ENCODING = &quot;Content-Transfer-Encoding&quot;;\r\n\t\tpublic String CONTENT_LOCATION = &quot;Content-Location&quot;;\r\n\t\t\r\n\t\tpublic String UTF8_BOM = &quot;=EF=BB=BF&quot;;\r\n\t\t\r\n\t\tpublic String UTF16_BOM1 = &quot;=FF=FE&quot;;\r\n\t\tpublic String UTF16_BOM2 = &quot;=FE=FF&quot;;\r\n\t}\r\n\r\nThe main parser class...\r\n\r\n\t/**\r\n\t * This program and the accompanying materials are made available under the terms of the Eclipse Public License v1.0\r\n\t * which accompanies this distribution, and is available at\r\n\t * http://www.eclipse.org/legal/epl-v10.html\r\n\t */\r\n\tpackage com.test.mht.core;\r\n\t\r\n\timport java.io.BufferedOutputStream;\r\n\timport java.io.BufferedReader;\r\n\timport java.io.BufferedWriter;\r\n\timport java.io.File;\r\n\timport java.io.FileOutputStream;\r\n\timport java.io.FileReader;\r\n\timport java.io.OutputStreamWriter;\r\n\timport java.util.regex.Matcher;\r\n\timport java.util.regex.Pattern;\r\n\t\r\n\timport sun.misc.BASE64Decoder;\r\n\t\r\n\t/**\r\n\t * File to parse and decompose *.mts file in its constituting parts.\r\n\t * @author Manish Shukla \r\n\t */\r\n\t\r\n\tpublic class MHTParser implements IConstants\r\n\t{\r\n\t\tprivate File mhtFile;\r\n\t\tprivate File outputFolder;\r\n\t\r\n\t\tpublic MHTParser(File mhtFile, File outputFolder) {\r\n\t\t\tthis.mhtFile = mhtFile;\r\n\t\t\tthis.outputFolder = outputFolder;\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * @throws Exception\r\n\t\t */\r\n\t\tpublic void decompress() throws Exception\r\n\t\t{\r\n\t\t\tBufferedReader reader = null;\r\n\t\r\n\t\t\tString type = &quot;&quot;;\r\n\t\t\tString encoding = &quot;&quot;;\r\n\t\t\tString location = &quot;&quot;;\r\n\t\t\tString filename = &quot;&quot;;\r\n\t\t\tString charset = &quot;utf-8&quot;;\r\n\t\t\tStringBuilder buffer = null;\r\n\t\r\n\t\t\ttry\r\n\t\t\t{\r\n\t\t\t\treader = new BufferedReader(new FileReader(mhtFile));\r\n\t\r\n\t\t\t\tfinal String boundary = getBoundary(reader);\r\n\t\t\t\tif(boundary == null)\r\n\t\t\t\t\tthrow new Exception(&quot;Failed to find document &#39;boundary&#39;... Aborting&quot;);\r\n\t\r\n\t\t\t\tString line = null;\r\n\t\t\t\tint i = 1;\r\n\t\t\t\twhile((line = reader.readLine()) != null)\r\n\t\t\t\t{\r\n\t\t\t\t\tString temp = line.trim();\r\n\t\t\t\t\tif(temp.contains(boundary)) \r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tif(buffer != null) {\r\n\t\t\t\t\t\t\twriteBufferContentToFile(buffer,encoding,filename,charset);\r\n\t\t\t\t\t\t\tbuffer = null;\r\n\t\t\t\t\t\t}\r\n\t\r\n\t\t\t\t\t\tbuffer = new StringBuilder();\r\n\t\t\t\t\t}else if(temp.startsWith(CONTENT_TYPE)) {\r\n\t\t\t\t\t\ttype = getType(temp);\r\n\t\t\t\t\t}else if(temp.startsWith(CHAR_SET)) {\r\n\t\t\t\t\t\tcharset = getCharSet(temp);\r\n\t\t\t\t\t}else if(temp.startsWith(CONTENT_TRANSFER_ENCODING)) {\r\n\t\t\t\t\t\tencoding = getEncoding(temp);\r\n\t\t\t\t\t}else if(temp.startsWith(CONTENT_LOCATION))\t{\r\n\t\t\t\t\t\tlocation = temp.substring(temp.indexOf(&quot;:&quot;)+1).trim();\r\n\t\t\t\t\t\ti++;\r\n\t\t\t\t\t\tfilename = getFileName(location,type);\r\n\t\t\t\t\t}else {\r\n\t\t\t\t\t\tif(buffer != null) {\r\n\t\t\t\t\t\t\tbuffer.append(line + &quot;\\n&quot;);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\r\n\t\t\t}finally \r\n\t\t\t{\r\n\t\t\t\tif(null != reader)\r\n\t\t\t\t\treader.close();\r\n\t\t\t}\r\n\t\r\n\t\t}\r\n\t\r\n\t\tprivate String getCharSet(String temp) \r\n\t\t{\r\n\t\t\tString t = temp.split(&quot;=&quot;)[1].trim();\r\n\t\t\treturn t.substring(1, t.length()-1);\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Save the file as per character set and encoding \r\n\t\t */\r\n\t\tprivate void writeBufferContentToFile(StringBuilder buffer,String encoding, String filename, String charset) \r\n\t\tthrows Exception\r\n\t\t{\r\n\t\r\n\t\t\tif(!outputFolder.exists())\r\n\t\t\t\toutputFolder.mkdirs();\r\n\t\r\n\t\t\tbyte[] content = null; \r\n\t\r\n\t\t\tboolean text = true;\r\n\t\r\n\t\t\tif(encoding.equalsIgnoreCase(&quot;base64&quot;)){\r\n\t\t\t\tcontent = getBase64EncodedString(buffer);\r\n\t\t\t\ttext = false;\r\n\t\t\t}else if(encoding.equalsIgnoreCase(&quot;quoted-printable&quot;)) {\r\n\t\t\t\tcontent = getQuotedPrintableString(buffer);\t\t\t\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t\tcontent = buffer.toString().getBytes();\r\n\t\r\n\t\t\tif(!text)\r\n\t\t\t{\r\n\t\t\t\tBufferedOutputStream bos = null;\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tbos = new BufferedOutputStream(new FileOutputStream(filename));\r\n\t\t\t\t\tbos.write(content);\r\n\t\t\t\t\tbos.flush();\r\n\t\t\t\t}finally {\r\n\t\t\t\t\tbos.close();\r\n\t\t\t\t}\r\n\t\t\t}else \r\n\t\t\t{\r\n\t\t\t\tBufferedWriter bw = null;\r\n\t\t\t\ttry\r\n\t\t\t\t{\r\n\t\t\t\t\tbw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(filename), charset));\r\n\t\t\t\t\tbw.write(new String(content));\r\n\t\t\t\t\tbw.flush();\r\n\t\t\t\t}finally {\r\n\t\t\t\t\tbw.close();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * When the save the *.mts file with &#39;utf-8&#39; encoding then it appends &#39;=EF=BB=BF&#39;&lt;/br&gt;\r\n\t\t * @see http://en.wikipedia.org/wiki/Byte_order_mark\r\n\t\t */\r\n\t\tprivate byte[] getQuotedPrintableString(StringBuilder buffer) \r\n\t\t{\r\n\t\t\t//Set&lt;String&gt; uniqueHex = new HashSet&lt;String&gt;();\r\n\t\t\t//final Pattern p = Pattern.compile(&quot;(=\\\\p{XDigit}{2})*&quot;);\r\n\t\r\n\t\t\tString temp = buffer.toString().replaceAll(UTF8_BOM, &quot;&quot;).replaceAll(&quot;=\\n&quot;, &quot;&quot;);\r\n\t\r\n\t\t\t//Matcher m = p.matcher(temp);\r\n\t\t\t//while(m.find()) {\r\n\t\t\t//\tuniqueHex.add(m.group());\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t\t//System.out.println(uniqueHex);\r\n\t\r\n\t\t\t//for (String hex : uniqueHex) {\r\n\t\t\t\t//temp = temp.replaceAll(hex, getASCIIValue(hex.substring(1)));\r\n\t\t\t//}\t\t\r\n\t\r\n\t\t\treturn temp.getBytes();\r\n\t\t}\r\n\t\r\n\t\t/*private String getASCIIValue(String hex) {\r\n\t\t\treturn &quot;&quot;+(char)Integer.parseInt(hex, 16);\r\n\t\t}*/\r\n\t\t/**\r\n\t\t * Although system dependent..it works well\r\n\t\t */\r\n\t\tprivate byte[] getBase64EncodedString(StringBuilder buffer) throws Exception {\r\n\t\t\treturn new BASE64Decoder().decodeBuffer(buffer.toString());\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Tries to get a qualified file name. If the name is not apparent it tries to guess it from the URL.\r\n\t\t * Otherwise it returns &#39;unknown.&lt;type&gt;&#39;\r\n\t\t */\r\n\t\tprivate String getFileName(String location, String type) \r\n\t\t{\r\n\t\t\tfinal Pattern p = Pattern.compile(&quot;(\\\\w|_|-)+\\\\.\\\\w+&quot;);\r\n\t\t\tString ext = &quot;&quot;;\r\n\t\t\tString name = &quot;&quot;;\r\n\t\t\tif(type.toLowerCase().endsWith(&quot;jpeg&quot;))\r\n\t\t\t\text = &quot;jpg&quot;;\r\n\t\t\telse\r\n\t\t\t\text = type.split(&quot;/&quot;)[1];\r\n\t\r\n\t\t\tif(location.endsWith(&quot;/&quot;)) {\r\n\t\t\t\tname = &quot;main&quot;;\r\n\t\t\t}else\r\n\t\t\t{\r\n\t\t\t\tname = location.substring(location.lastIndexOf(&quot;/&quot;) + 1);\r\n\t\r\n\t\t\t\tMatcher m = p.matcher(name);\r\n\t\t\t\tString fname = &quot;&quot;;\r\n\t\t\t\twhile(m.find()) {\r\n\t\t\t\t\tfname = m.group();\r\n\t\t\t\t}\r\n\t\r\n\t\t\t\tif(fname.trim().length() == 0)\r\n\t\t\t\t\tname = &quot;unknown&quot;;\r\n\t\t\t\telse\r\n\t\t\t\t\treturn getUniqueName(fname.substring(0,fname.indexOf(&quot;.&quot;)), fname.substring(fname.indexOf(&quot;.&quot;) + 1, fname.length()));\r\n\t\t\t}\r\n\t\t\treturn getUniqueName(name,ext);\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Returns a qualified unique output file path for the parsed path.&lt;/br&gt;\r\n\t\t * In case the file already exist it appends a numarical value a continues\r\n\t\t */\r\n\t\tprivate String getUniqueName(String name,String ext)\r\n\t\t{\r\n\t\t\tint i = 1;\r\n\t\t\tFile file = new File(outputFolder,name + &quot;.&quot; + ext);\r\n\t\t\tif(file.exists())\r\n\t\t\t{\r\n\t\t\t\twhile(true)\r\n\t\t\t\t{\r\n\t\t\t\t\tfile = new File(outputFolder, name + i + &quot;.&quot; + ext);\r\n\t\t\t\t\tif(!file.exists())\r\n\t\t\t\t\t\treturn file.getAbsolutePath();\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\treturn file.getAbsolutePath();\r\n\t\t}\r\n\t\r\n\t\tprivate String getType(String line) {\r\n\t\t\treturn splitUsingColonSpace(line);\r\n\t\t}\r\n\t\r\n\t\tprivate String getEncoding(String line){\r\n\t\t\treturn splitUsingColonSpace(line);\r\n\t\t}\r\n\t\r\n\t\tprivate String splitUsingColonSpace(String line) {\r\n\t\t\treturn line.split(&quot;:\\\\s*&quot;)[1].replaceAll(&quot;;&quot;, &quot;&quot;);\r\n\t\t}\r\n\t\r\n\t\t/**\r\n\t\t * Gives you the boundary string\r\n\t\t */\r\n\t\tprivate String getBoundary(BufferedReader reader) throws Exception \r\n\t\t{\r\n\t\t\tString line = null;\r\n\t\r\n\t\t\twhile((line = reader.readLine()) != null)\r\n\t\t\t{\r\n\t\t\t\tline = line.trim();\r\n\t\t\t\tif(line.startsWith(BOUNDARY)) {\r\n\t\t\t\t\treturn line.substring(line.indexOf(&quot;\\&quot;&quot;) + 1, line.lastIndexOf(&quot;\\&quot;&quot;));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\nRegards,\r\n","title":"How to read or parse MHTML (.mht) files in java","body":"<p>Frankly, I wasn't expecting a solution in near future and was about to give up, but some how I stumbled on this page: </p>\n\n<p><a href=\"http://en.wikipedia.org/wiki/MIME#Multipart_messages\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/MIME#Multipart_messages</a></p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/ms527355%28EXCHG.10%29.aspx\" rel=\"noreferrer\">http://msdn.microsoft.com/en-us/library/ms527355%28EXCHG.10%29.aspx</a></p>\n\n<p>Although, not a very catchy in first look. But if you look carefully you will get clue. After reading this I fired up my IE and at random started saving pages as <code>*.mht</code> file. Let me go line by line... </p>\n\n<p>But let me explain beforehand that my ultimate goal was to separate/extract out the <code>html</code> content and parse it... the solution is not complete in itself as it depends on the <code>character set</code> or <code>encoding</code> I choose while saving. But even though it will extract the individual files with minor hitches...</p>\n\n<p>I hope this will be useful for anyone who is trying to parse/decompress <code>*.mht/MHTML</code> files :)</p>\n\n<p>======= Explanation ========\n** Taken from a mht file **</p>\n\n<pre><code>From: \"Saved by Windows Internet Explorer 7\"\n</code></pre>\n\n<p>It is the software used for saving the file</p>\n\n<pre><code>Subject: Google\nDate: Tue, 13 Jul 2010 21:23:03 +0530\nMIME-Version: 1.0\n</code></pre>\n\n<p>Subject, date and mime-version … much like the mail format</p>\n\n<pre><code>  Content-Type: multipart/related;\ntype=\"text/html\";\n</code></pre>\n\n<p>This is the part which tells us that it is a <code>multipart</code> document. A multipart document has one or more different sets of data combined in a single body, a <code>multipart</code> Content-Type field must appear in the entity's header. Here, we can also see the type as <code>\"text/html\"</code>.</p>\n\n<pre><code>boundary=\"----=_NextPart_000_0007_01CB22D1.93BBD1A0\"\n</code></pre>\n\n<p>Out of all this is the most important part. This is the unique delimiter which divides two different parts (html,images,css,script etc). <strong>Once</strong> you get hold of this, everything gets easy... Now, I just have to iterate through the document and finding out different sections and saving them as per their <code>Content-Transfer-Encoding</code> (base64, quoted-printable etc) ...\n    .\n    .\n    .</p>\n\n<p><strong>SAMPLE</strong></p>\n\n<pre><code> ------=_NextPart_000_0007_01CB22D1.93BBD1A0\n Content-Type: text/html;\n charset=\"utf-8\"\n Content-Transfer-Encoding: quoted-printable\n Content-Location: http://www.google.com/webhp?sourceid=navclient&amp;ie=UTF-8\n\n &lt;!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" =\n.\n.\n.\n</code></pre>\n\n<p>** JAVA CODE **</p>\n\n<p>An interface for defining constants.</p>\n\n<pre><code>public interface IConstants \n{\n    public String BOUNDARY = \"boundary\";\n    public String CHAR_SET = \"charset\";\n    public String CONTENT_TYPE = \"Content-Type\";\n    public String CONTENT_TRANSFER_ENCODING = \"Content-Transfer-Encoding\";\n    public String CONTENT_LOCATION = \"Content-Location\";\n\n    public String UTF8_BOM = \"=EF=BB=BF\";\n\n    public String UTF16_BOM1 = \"=FF=FE\";\n    public String UTF16_BOM2 = \"=FE=FF\";\n}\n</code></pre>\n\n<p>The main parser class...</p>\n\n<pre><code>/**\n * This program and the accompanying materials are made available under the terms of the Eclipse Public License v1.0\n * which accompanies this distribution, and is available at\n * http://www.eclipse.org/legal/epl-v10.html\n */\npackage com.test.mht.core;\n\nimport java.io.BufferedOutputStream;\nimport java.io.BufferedReader;\nimport java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileOutputStream;\nimport java.io.FileReader;\nimport java.io.OutputStreamWriter;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\nimport sun.misc.BASE64Decoder;\n\n/**\n * File to parse and decompose *.mts file in its constituting parts.\n * @author Manish Shukla \n */\n\npublic class MHTParser implements IConstants\n{\n    private File mhtFile;\n    private File outputFolder;\n\n    public MHTParser(File mhtFile, File outputFolder) {\n        this.mhtFile = mhtFile;\n        this.outputFolder = outputFolder;\n    }\n\n    /**\n     * @throws Exception\n     */\n    public void decompress() throws Exception\n    {\n        BufferedReader reader = null;\n\n        String type = \"\";\n        String encoding = \"\";\n        String location = \"\";\n        String filename = \"\";\n        String charset = \"utf-8\";\n        StringBuilder buffer = null;\n\n        try\n        {\n            reader = new BufferedReader(new FileReader(mhtFile));\n\n            final String boundary = getBoundary(reader);\n            if(boundary == null)\n                throw new Exception(\"Failed to find document 'boundary'... Aborting\");\n\n            String line = null;\n            int i = 1;\n            while((line = reader.readLine()) != null)\n            {\n                String temp = line.trim();\n                if(temp.contains(boundary)) \n                {\n                    if(buffer != null) {\n                        writeBufferContentToFile(buffer,encoding,filename,charset);\n                        buffer = null;\n                    }\n\n                    buffer = new StringBuilder();\n                }else if(temp.startsWith(CONTENT_TYPE)) {\n                    type = getType(temp);\n                }else if(temp.startsWith(CHAR_SET)) {\n                    charset = getCharSet(temp);\n                }else if(temp.startsWith(CONTENT_TRANSFER_ENCODING)) {\n                    encoding = getEncoding(temp);\n                }else if(temp.startsWith(CONTENT_LOCATION)) {\n                    location = temp.substring(temp.indexOf(\":\")+1).trim();\n                    i++;\n                    filename = getFileName(location,type);\n                }else {\n                    if(buffer != null) {\n                        buffer.append(line + \"\\n\");\n                    }\n                }\n            }\n\n        }finally \n        {\n            if(null != reader)\n                reader.close();\n        }\n\n    }\n\n    private String getCharSet(String temp) \n    {\n        String t = temp.split(\"=\")[1].trim();\n        return t.substring(1, t.length()-1);\n    }\n\n    /**\n     * Save the file as per character set and encoding \n     */\n    private void writeBufferContentToFile(StringBuilder buffer,String encoding, String filename, String charset) \n    throws Exception\n    {\n\n        if(!outputFolder.exists())\n            outputFolder.mkdirs();\n\n        byte[] content = null; \n\n        boolean text = true;\n\n        if(encoding.equalsIgnoreCase(\"base64\")){\n            content = getBase64EncodedString(buffer);\n            text = false;\n        }else if(encoding.equalsIgnoreCase(\"quoted-printable\")) {\n            content = getQuotedPrintableString(buffer);         \n        }\n        else\n            content = buffer.toString().getBytes();\n\n        if(!text)\n        {\n            BufferedOutputStream bos = null;\n            try\n            {\n                bos = new BufferedOutputStream(new FileOutputStream(filename));\n                bos.write(content);\n                bos.flush();\n            }finally {\n                bos.close();\n            }\n        }else \n        {\n            BufferedWriter bw = null;\n            try\n            {\n                bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(filename), charset));\n                bw.write(new String(content));\n                bw.flush();\n            }finally {\n                bw.close();\n            }\n        }\n    }\n\n    /**\n     * When the save the *.mts file with 'utf-8' encoding then it appends '=EF=BB=BF'&lt;/br&gt;\n     * @see http://en.wikipedia.org/wiki/Byte_order_mark\n     */\n    private byte[] getQuotedPrintableString(StringBuilder buffer) \n    {\n        //Set&lt;String&gt; uniqueHex = new HashSet&lt;String&gt;();\n        //final Pattern p = Pattern.compile(\"(=\\\\p{XDigit}{2})*\");\n\n        String temp = buffer.toString().replaceAll(UTF8_BOM, \"\").replaceAll(\"=\\n\", \"\");\n\n        //Matcher m = p.matcher(temp);\n        //while(m.find()) {\n        //  uniqueHex.add(m.group());\n        //}\n\n        //System.out.println(uniqueHex);\n\n        //for (String hex : uniqueHex) {\n            //temp = temp.replaceAll(hex, getASCIIValue(hex.substring(1)));\n        //}     \n\n        return temp.getBytes();\n    }\n\n    /*private String getASCIIValue(String hex) {\n        return \"\"+(char)Integer.parseInt(hex, 16);\n    }*/\n    /**\n     * Although system dependent..it works well\n     */\n    private byte[] getBase64EncodedString(StringBuilder buffer) throws Exception {\n        return new BASE64Decoder().decodeBuffer(buffer.toString());\n    }\n\n    /**\n     * Tries to get a qualified file name. If the name is not apparent it tries to guess it from the URL.\n     * Otherwise it returns 'unknown.&lt;type&gt;'\n     */\n    private String getFileName(String location, String type) \n    {\n        final Pattern p = Pattern.compile(\"(\\\\w|_|-)+\\\\.\\\\w+\");\n        String ext = \"\";\n        String name = \"\";\n        if(type.toLowerCase().endsWith(\"jpeg\"))\n            ext = \"jpg\";\n        else\n            ext = type.split(\"/\")[1];\n\n        if(location.endsWith(\"/\")) {\n            name = \"main\";\n        }else\n        {\n            name = location.substring(location.lastIndexOf(\"/\") + 1);\n\n            Matcher m = p.matcher(name);\n            String fname = \"\";\n            while(m.find()) {\n                fname = m.group();\n            }\n\n            if(fname.trim().length() == 0)\n                name = \"unknown\";\n            else\n                return getUniqueName(fname.substring(0,fname.indexOf(\".\")), fname.substring(fname.indexOf(\".\") + 1, fname.length()));\n        }\n        return getUniqueName(name,ext);\n    }\n\n    /**\n     * Returns a qualified unique output file path for the parsed path.&lt;/br&gt;\n     * In case the file already exist it appends a numarical value a continues\n     */\n    private String getUniqueName(String name,String ext)\n    {\n        int i = 1;\n        File file = new File(outputFolder,name + \".\" + ext);\n        if(file.exists())\n        {\n            while(true)\n            {\n                file = new File(outputFolder, name + i + \".\" + ext);\n                if(!file.exists())\n                    return file.getAbsolutePath();\n                i++;\n            }\n        }\n\n        return file.getAbsolutePath();\n    }\n\n    private String getType(String line) {\n        return splitUsingColonSpace(line);\n    }\n\n    private String getEncoding(String line){\n        return splitUsingColonSpace(line);\n    }\n\n    private String splitUsingColonSpace(String line) {\n        return line.split(\":\\\\s*\")[1].replaceAll(\";\", \"\");\n    }\n\n    /**\n     * Gives you the boundary string\n     */\n    private String getBoundary(BufferedReader reader) throws Exception \n    {\n        String line = null;\n\n        while((line = reader.readLine()) != null)\n        {\n            line = line.trim();\n            if(line.startsWith(BOUNDARY)) {\n                return line.substring(line.indexOf(\"\\\"\") + 1, line.lastIndexOf(\"\\\"\"));\n            }\n        }\n\n        return null;\n    }\n}\n</code></pre>\n\n<p>Regards,</p>\n"},{"tags":[],"owner":{"account_id":2102941,"reputation":7351,"user_id":1870054,"accept_rate":72,"display_name":"wener"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1425372601,"creation_date":1425372601,"answer_id":28827502,"question_id":3230305,"body_markdown":"You don&#39;t have to do it on you own.\r\n\r\nWith dependency\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.apache.james&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;apache-mime4j&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.7.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nRoll you mht file\r\n\r\n    public static void main(String[] args)\r\n    {\r\n        MessageTree.main(new String[]{&quot;YOU MHT FILE PATH&quot;});\r\n    }\r\n\r\n\r\n`MessageTree` will \r\n\r\n    /**\r\n     * Displays a parsed Message in a window. The window will be divided into\r\n     * two panels. The left panel displays the Message tree. Clicking on a\r\n     * node in the tree shows information on that node in the right panel.\r\n     *\r\n     * Some of this code have been copied from the Java tutorial&#39;s JTree section.\r\n     */\r\n\r\nThen you can look into it.\r\n\r\n;-)","title":"How to read or parse MHTML (.mht) files in java","body":"<p>You don't have to do it on you own.</p>\n\n<p>With dependency</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.james&lt;/groupId&gt;\n    &lt;artifactId&gt;apache-mime4j&lt;/artifactId&gt;\n    &lt;version&gt;0.7.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Roll you mht file</p>\n\n<pre><code>public static void main(String[] args)\n{\n    MessageTree.main(new String[]{\"YOU MHT FILE PATH\"});\n}\n</code></pre>\n\n<p><code>MessageTree</code> will </p>\n\n<pre><code>/**\n * Displays a parsed Message in a window. The window will be divided into\n * two panels. The left panel displays the Message tree. Clicking on a\n * node in the tree shows information on that node in the right panel.\n *\n * Some of this code have been copied from the Java tutorial's JTree section.\n */\n</code></pre>\n\n<p>Then you can look into it.</p>\n\n<p>;-)</p>\n"},{"tags":[],"owner":{"account_id":4887498,"reputation":316,"user_id":3939518,"display_name":"David Turner"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1460448147,"creation_date":1460448147,"answer_id":36567112,"question_id":3230305,"body_markdown":"Late to the party, but expanding on [@wener](https://stackoverflow.com/users/1870054/wener)&#39;s answer for anyone else stumbling across this.\r\n\r\nThe [Apache Mime4J](https://james.apache.org/mime4j/) library seems to have the most readily accessible solution for [EML or MHTML](https://en.wikipedia.org/wiki/MHTML) processing, much easier than rolling-your-own!\r\n\r\nMy prototype &#39;`parseMhtToFile`&#39; function below rips html files and other artifacts out of a Cognos active report &#39;mht&#39; file, but could be tailored to other purposes.\r\n\r\nThis is written in Groovy and requires [Apache Mime4J &#39;core&#39; and &#39;dom&#39; jars](https://james.apache.org/mime4j/start/download.html) (currently 0.7.2).\r\n\r\n    import org.apache.james.mime4j.dom.Message\r\n    import org.apache.james.mime4j.dom.Multipart\r\n    import org.apache.james.mime4j.dom.field.ContentTypeField\r\n    import org.apache.james.mime4j.message.DefaultMessageBuilder\r\n    import org.apache.james.mime4j.stream.MimeConfig\r\n    \r\n    /**\r\n     * Use Mime4J MessageBuilder to parse an mhtml file (assumes multipart) into\r\n     * separate html files.\r\n     * Files will be written to outDir (or parent) as baseName + partIdx + ext.\r\n     */\r\n    void parseMhtToFile(File mhtFile, File outDir = null) {\r\n    \tif (!outDir) {outDir = mhtFile.parentFile }\r\n    \t// File baseName will be used in generating new filenames\r\n    \tdef mhtBaseName = mhtFile.name.replaceFirst(~/\\.[^\\.]+$/, &#39;&#39;)\r\n    \t\r\n    \t// -- Set up Mime parser, using Default Message Builder\r\n    \tMimeConfig parserConfig  = new MimeConfig();\r\n    \tparserConfig.setMaxHeaderLen(-1); // The default is a mere 10k\r\n    \tparserConfig.setMaxLineLen(-1); // The default is only 1000 characters.\r\n    \tparserConfig.setMaxHeaderCount(-1); // Disable the check for header count.\r\n    \tDefaultMessageBuilder builder = new DefaultMessageBuilder();\r\n    \tbuilder.setMimeEntityConfig(parserConfig);\r\n    \t\r\n    \t// -- Parse the MHT stream data into a Message object\r\n    \tprintln &quot;Parsing ${mhtFile}...&quot;;\r\n    \tInputStream mhtStream = mhtFile.newInputStream()\r\n    \tMessage message = builder.parseMessage(mhtStream);\r\n    \t\r\n    \t// -- Process the resulting body parts, writing to file\r\n    \tassert message.getBody() instanceof Multipart\r\n    \tMultipart multipart = (Multipart) message.getBody();\r\n    \tdef parts = multipart.getBodyParts();\r\n    \tparts.eachWithIndex { p, i -&gt;\r\n    \t\tContentTypeField cType = p.header.getField(&#39;content-type&#39;)\r\n    \t\tprintln &quot;${p.class.simpleName}\\t${i}\\t${cType.mimeType}&quot;\r\n    \t\t\r\n    \t\t// Assume mime sub-type is a &quot;good enough&quot; file-name extension \r\n    \t\t// e.g. text/html = html, image/png = png, application/json = json\r\n    \t\tString partFileName = &quot;${mhtBaseName}_${i}.${cType.subType}&quot;\r\n    \t\tFile partFile = new File(outDir, partFileName)\r\n    \t\t\r\n    \t\t// Write part body stream to file\r\n    \t\tprintln &quot;Writing ${partFile}...&quot;;\r\n    \t\tif (partFile.exists()) partFile.delete();\r\n    \t\tInputStream partStream = p.body.inputStream;\r\n    \t\tpartFile.append(partStream);\r\n    \t}\r\n    }\r\n\r\nUsage is simply:\r\n\r\n    File mhtFile = new File(&#39;&lt;path&gt;&#39;, &#39;Report-en-au.mht&#39;)\r\n    parseMhtToFile(mhtFile)\r\n    println &#39;Done.&#39;\r\n\r\nOutput is:\r\n\r\n    Parsing &lt;path&gt;\\Report-en-au.mht...\r\n    BodyPart\t0\ttext/html\r\n    Writing &lt;path&gt;\\Report-en-au_0.html...\r\n    BodyPart\t1\timage/png\r\n    Writing &lt;path&gt;\\Report-en-au_1.png...\r\n    Done.\r\n\r\nThoughts on other improvements:\r\n\r\n - For [&#39;text&#39; mime parts](https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/dom/TextBody.html), you can access a [`Reader`](https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/dom/TextBody.html#getReader()) instead of a `Stream` which might be more appropriate for text mining as the OP requested.\r\n\r\n - For generated filename extensions, I&#39;d use another library to lookup appropriate extension, not assume the mime sub-type is adequate.\r\n\r\n - Handle Single-body (non-Multipart) and Recursive Multipart mhtml files and other complexities. These may require a [MimeStreamParser](https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/parser/MimeStreamParser.html) with custom [Content Handler](https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/parser/AbstractContentHandler.html) implementation.","title":"How to read or parse MHTML (.mht) files in java","body":"<p>Late to the party, but expanding on <a href=\"https://stackoverflow.com/users/1870054/wener\">@wener</a>'s answer for anyone else stumbling across this.</p>\n\n<p>The <a href=\"https://james.apache.org/mime4j/\" rel=\"nofollow noreferrer\">Apache Mime4J</a> library seems to have the most readily accessible solution for <a href=\"https://en.wikipedia.org/wiki/MHTML\" rel=\"nofollow noreferrer\">EML or MHTML</a> processing, much easier than rolling-your-own!</p>\n\n<p>My prototype '<code>parseMhtToFile</code>' function below rips html files and other artifacts out of a Cognos active report 'mht' file, but could be tailored to other purposes.</p>\n\n<p>This is written in Groovy and requires <a href=\"https://james.apache.org/mime4j/start/download.html\" rel=\"nofollow noreferrer\">Apache Mime4J 'core' and 'dom' jars</a> (currently 0.7.2).</p>\n\n<pre><code>import org.apache.james.mime4j.dom.Message\nimport org.apache.james.mime4j.dom.Multipart\nimport org.apache.james.mime4j.dom.field.ContentTypeField\nimport org.apache.james.mime4j.message.DefaultMessageBuilder\nimport org.apache.james.mime4j.stream.MimeConfig\n\n/**\n * Use Mime4J MessageBuilder to parse an mhtml file (assumes multipart) into\n * separate html files.\n * Files will be written to outDir (or parent) as baseName + partIdx + ext.\n */\nvoid parseMhtToFile(File mhtFile, File outDir = null) {\n    if (!outDir) {outDir = mhtFile.parentFile }\n    // File baseName will be used in generating new filenames\n    def mhtBaseName = mhtFile.name.replaceFirst(~/\\.[^\\.]+$/, '')\n\n    // -- Set up Mime parser, using Default Message Builder\n    MimeConfig parserConfig  = new MimeConfig();\n    parserConfig.setMaxHeaderLen(-1); // The default is a mere 10k\n    parserConfig.setMaxLineLen(-1); // The default is only 1000 characters.\n    parserConfig.setMaxHeaderCount(-1); // Disable the check for header count.\n    DefaultMessageBuilder builder = new DefaultMessageBuilder();\n    builder.setMimeEntityConfig(parserConfig);\n\n    // -- Parse the MHT stream data into a Message object\n    println \"Parsing ${mhtFile}...\";\n    InputStream mhtStream = mhtFile.newInputStream()\n    Message message = builder.parseMessage(mhtStream);\n\n    // -- Process the resulting body parts, writing to file\n    assert message.getBody() instanceof Multipart\n    Multipart multipart = (Multipart) message.getBody();\n    def parts = multipart.getBodyParts();\n    parts.eachWithIndex { p, i -&gt;\n        ContentTypeField cType = p.header.getField('content-type')\n        println \"${p.class.simpleName}\\t${i}\\t${cType.mimeType}\"\n\n        // Assume mime sub-type is a \"good enough\" file-name extension \n        // e.g. text/html = html, image/png = png, application/json = json\n        String partFileName = \"${mhtBaseName}_${i}.${cType.subType}\"\n        File partFile = new File(outDir, partFileName)\n\n        // Write part body stream to file\n        println \"Writing ${partFile}...\";\n        if (partFile.exists()) partFile.delete();\n        InputStream partStream = p.body.inputStream;\n        partFile.append(partStream);\n    }\n}\n</code></pre>\n\n<p>Usage is simply:</p>\n\n<pre><code>File mhtFile = new File('&lt;path&gt;', 'Report-en-au.mht')\nparseMhtToFile(mhtFile)\nprintln 'Done.'\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>Parsing &lt;path&gt;\\Report-en-au.mht...\nBodyPart    0   text/html\nWriting &lt;path&gt;\\Report-en-au_0.html...\nBodyPart    1   image/png\nWriting &lt;path&gt;\\Report-en-au_1.png...\nDone.\n</code></pre>\n\n<p>Thoughts on other improvements:</p>\n\n<ul>\n<li><p>For <a href=\"https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/dom/TextBody.html\" rel=\"nofollow noreferrer\">'text' mime parts</a>, you can access a <a href=\"https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/dom/TextBody.html#getReader()\" rel=\"nofollow noreferrer\"><code>Reader</code></a> instead of a <code>Stream</code> which might be more appropriate for text mining as the OP requested.</p></li>\n<li><p>For generated filename extensions, I'd use another library to lookup appropriate extension, not assume the mime sub-type is adequate.</p></li>\n<li><p>Handle Single-body (non-Multipart) and Recursive Multipart mhtml files and other complexities. These may require a <a href=\"https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/parser/MimeStreamParser.html\" rel=\"nofollow noreferrer\">MimeStreamParser</a> with custom <a href=\"https://james.apache.org/mime4j/apidocs/org/apache/james/mime4j/parser/AbstractContentHandler.html\" rel=\"nofollow noreferrer\">Content Handler</a> implementation.</p></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":16998804,"reputation":41,"user_id":12296649,"display_name":"rakesh"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1572433189,"creation_date":1572431482,"answer_id":58623351,"question_id":3230305,"body_markdown":"A more compact code using Java Mail APIs \t\t\r\n\r\n    import java.io.File;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.net.URL;\r\n    import java.util.Properties;\r\n\t\t\r\n    import javax.mail.BodyPart;\r\n    import javax.mail.Session;\r\n    import javax.mail.internet.MimeMessage;\r\n    import javax.mail.internet.MimeMultipart;\r\n\t\t\r\n    import org.apache.commons.io.IOUtils;\r\n\t\t\r\n    public class MhtParser {\r\n\t\t\r\n        private File mhtFile;\r\n        private File outputFolder;\r\n\t\t\r\n        public MhtParser(File mhtFile, File outputFolder) {\r\n            this.mhtFile = mhtFile;\r\n            this.outputFolder = outputFolder;\r\n        }\r\n\t\t\r\n        public void decompress() throws Exception {\r\n            MimeMessage message = \r\n                new MimeMessage(\r\n                        Session.getDefaultInstance(new Properties(), null),\r\n                        new FileInputStream(mhtFile));\r\n\r\n            if (message.getContent() instanceof MimeMultipart) {\r\n                outputFolder.mkdir();\r\n                MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\r\n\r\n                for (int i = 0; i &lt; mimeMultipart.getCount(); i++) {\r\n                    BodyPart bodyPart = mimeMultipart.getBodyPart(i);\r\n                    String fileName = bodyPart.getFileName();\r\n\r\n                    if (fileName == null) {\r\n                        String[] locationHeader = bodyPart.getHeader(&quot;Content-Location&quot;);\r\n                        if (locationHeader != null &amp;&amp; locationHeader.length &gt; 0) {\r\n                            fileName = \r\n                                new File(new URL(locationHeader[0]).getFile()).getName();\r\n                        }\r\n                    }\r\n\r\n                    if (fileName != null) {\r\n                        FileOutputStream out = \r\n                            new FileOutputStream(new File(outputFolder, fileName));\r\n\r\n                        IOUtils.copy(bodyPart.getInputStream(), out);\r\n                        out.flush();\r\n                        out.close();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"How to read or parse MHTML (.mht) files in java","body":"<p>A more compact code using Java Mail APIs        </p>\n\n<pre><code>import java.io.File;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.net.URL;\nimport java.util.Properties;\n\nimport javax.mail.BodyPart;\nimport javax.mail.Session;\nimport javax.mail.internet.MimeMessage;\nimport javax.mail.internet.MimeMultipart;\n\nimport org.apache.commons.io.IOUtils;\n\npublic class MhtParser {\n\n    private File mhtFile;\n    private File outputFolder;\n\n    public MhtParser(File mhtFile, File outputFolder) {\n        this.mhtFile = mhtFile;\n        this.outputFolder = outputFolder;\n    }\n\n    public void decompress() throws Exception {\n        MimeMessage message = \n            new MimeMessage(\n                    Session.getDefaultInstance(new Properties(), null),\n                    new FileInputStream(mhtFile));\n\n        if (message.getContent() instanceof MimeMultipart) {\n            outputFolder.mkdir();\n            MimeMultipart mimeMultipart = (MimeMultipart) message.getContent();\n\n            for (int i = 0; i &lt; mimeMultipart.getCount(); i++) {\n                BodyPart bodyPart = mimeMultipart.getBodyPart(i);\n                String fileName = bodyPart.getFileName();\n\n                if (fileName == null) {\n                    String[] locationHeader = bodyPart.getHeader(\"Content-Location\");\n                    if (locationHeader != null &amp;&amp; locationHeader.length &gt; 0) {\n                        fileName = \n                            new File(new URL(locationHeader[0]).getFile()).getName();\n                    }\n                }\n\n                if (fileName != null) {\n                    FileOutputStream out = \n                        new FileOutputStream(new File(outputFolder, fileName));\n\n                    IOUtils.copy(bodyPart.getInputStream(), out);\n                    out.flush();\n                    out.close();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":156522,"reputation":13969,"user_id":373861,"accept_rate":95,"display_name":"Favonius"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26803,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":3239442,"answer_count":6,"score":13,"last_activity_date":1690197819,"creation_date":1278952503,"question_id":3230305,"body_markdown":"I need to mine the **content** of most of known document files like:\r\n\r\n1. pdf\r\n2. html\r\n3. doc/docx etc.\r\n\r\nFor most of these file formats I am planning to use:\r\n\r\nhttp://tika.apache.org/\r\n\r\nBut as of now `Tika` does not support MHTML (*.mht) files.. ( http://en.wikipedia.org/wiki/MHTML )\r\nThere are few examples in C# ( http://www.codeproject.com/KB/files/MhtBuilder.aspx ) but I found none in Java.\r\n\r\nI tried opening the *.mht file in 7Zip and it failed...Although the WinZip was able to decompress the file into images and text (CSS, HTML, Script) as text and binary files...\r\n\r\n\r\nAs per MSDN page ( http://msdn.microsoft.com/en-us/library/aa767785%28VS.85%29.aspx#compress_content ) and the `code project` page i mentioned earlier ... mht files use GZip compression .... \r\n\r\nAttempting to decompress in java results in following exceptions:\r\nWith `java.uti.zip.GZIPInputStream`\r\n\r\n    java.io.IOException: Not in GZIP format\r\n\tat java.util.zip.GZIPInputStream.readHeader(Unknown Source)\r\n\tat java.util.zip.GZIPInputStream.&lt;init&gt;(Unknown Source)\r\n\tat java.util.zip.GZIPInputStream.&lt;init&gt;(Unknown Source)\r\n\tat GZipTest.main(GZipTest.java:16)\r\n\r\n\r\nAnd with `java.util.zip.ZipFile`\r\n\r\n     java.util.zip.ZipException: error in opening zip file\r\n\tat java.util.zip.ZipFile.open(Native Method)\r\n\tat java.util.zip.ZipFile.&lt;init&gt;(Unknown Source)\r\n\tat java.util.zip.ZipFile.&lt;init&gt;(Unknown Source)\r\n\tat GZipTest.main(GZipTest.java:21)\r\n\r\n\r\n\r\nKindly suggest how to decompress it.... \r\n\r\nThanks....\r\n\r\n\r\n","title":"How to read or parse MHTML (.mht) files in java","body":"<p>I need to mine the <strong>content</strong> of most of known document files like:</p>\n\n<ol>\n<li>pdf</li>\n<li>html</li>\n<li>doc/docx etc.</li>\n</ol>\n\n<p>For most of these file formats I am planning to use:</p>\n\n<p><a href=\"http://tika.apache.org/\" rel=\"noreferrer\">http://tika.apache.org/</a></p>\n\n<p>But as of now <code>Tika</code> does not support MHTML (*.mht) files.. ( <a href=\"http://en.wikipedia.org/wiki/MHTML\" rel=\"noreferrer\">http://en.wikipedia.org/wiki/MHTML</a> )\nThere are few examples in C# ( <a href=\"http://www.codeproject.com/KB/files/MhtBuilder.aspx\" rel=\"noreferrer\">http://www.codeproject.com/KB/files/MhtBuilder.aspx</a> ) but I found none in Java.</p>\n\n<p>I tried opening the *.mht file in 7Zip and it failed...Although the WinZip was able to decompress the file into images and text (CSS, HTML, Script) as text and binary files...</p>\n\n<p>As per MSDN page ( <a href=\"http://msdn.microsoft.com/en-us/library/aa767785%28VS.85%29.aspx#compress_content\" rel=\"noreferrer\">http://msdn.microsoft.com/en-us/library/aa767785%28VS.85%29.aspx#compress_content</a> ) and the <code>code project</code> page i mentioned earlier ... mht files use GZip compression .... </p>\n\n<p>Attempting to decompress in java results in following exceptions:\nWith <code>java.uti.zip.GZIPInputStream</code></p>\n\n<pre><code>java.io.IOException: Not in GZIP format\nat java.util.zip.GZIPInputStream.readHeader(Unknown Source)\nat java.util.zip.GZIPInputStream.&lt;init&gt;(Unknown Source)\nat java.util.zip.GZIPInputStream.&lt;init&gt;(Unknown Source)\nat GZipTest.main(GZipTest.java:16)\n</code></pre>\n\n<p>And with <code>java.util.zip.ZipFile</code></p>\n\n<pre><code> java.util.zip.ZipException: error in opening zip file\nat java.util.zip.ZipFile.open(Native Method)\nat java.util.zip.ZipFile.&lt;init&gt;(Unknown Source)\nat java.util.zip.ZipFile.&lt;init&gt;(Unknown Source)\nat GZipTest.main(GZipTest.java:21)\n</code></pre>\n\n<p>Kindly suggest how to decompress it.... </p>\n\n<p>Thanks....</p>\n"},{"tags":["java","multithreading","time"],"comments":[{"owner":{"account_id":4678213,"reputation":2831,"user_id":3787777,"accept_rate":92,"display_name":"Coderino Javarino"},"score":0,"creation_date":1468404048,"post_id":38348375,"comment_id":64109756,"body_markdown":"unique id&#39;s of what? Threads?","body":"unique id&#39;s of what? Threads?"},{"owner":{"account_id":2813465,"reputation":2018,"user_id":2419197,"accept_rate":88,"display_name":"Anas EL KORCHI"},"score":0,"creation_date":1468404300,"post_id":38348375,"comment_id":64109918,"body_markdown":"highly possible, you may concate some thread identifier to your unique value","body":"highly possible, you may concate some thread identifier to your unique value"},{"owner":{"account_id":8494724,"reputation":116,"user_id":6369655,"display_name":"D Levant"},"score":1,"creation_date":1468404797,"post_id":38348375,"comment_id":64110268,"body_markdown":"If you&#39;re the one starting the threads, why not give them a unique ID upon initialization? You can also use Thread.currentThread().getId()","body":"If you&#39;re the one starting the threads, why not give them a unique ID upon initialization? You can also use Thread.currentThread().getId()"},{"owner":{"account_id":536567,"reputation":7838,"user_id":905488,"display_name":"Mick Mnemonic"},"score":1,"creation_date":1468404923,"post_id":38348375,"comment_id":64110359,"body_markdown":"If you want uniqueness, use a GUID instead of a time stamp.","body":"If you want uniqueness, use a GUID instead of a time stamp."}],"answers":[{"tags":[],"owner":{"account_id":7886651,"reputation":1376,"user_id":5958449,"display_name":"Yoav Gur"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690197760,"creation_date":1468404118,"answer_id":38348474,"question_id":38348375,"body_markdown":"Today&#39;s CPUs can process around 100,000,000,000 instructions per second, so the answer is definitely &quot;Yes, It is true that sometimes the result of `System.currentTimeMillis()` in different threads may be the same&quot;.","title":"Java multithreading. Same System.currentTimeMillis() values on different threads","body":"<p>Today's CPUs can process around 100,000,000,000 instructions per second, so the answer is definitely &quot;Yes, It is true that sometimes the result of <code>System.currentTimeMillis()</code> in different threads may be the same&quot;.</p>\n"},{"tags":[],"owner":{"account_id":8789034,"reputation":146,"user_id":6569711,"display_name":"Creart"},"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1468404141,"creation_date":1468404141,"answer_id":38348485,"question_id":38348375,"body_markdown":"The function `System.currentTimeMillis()` returns the current time in milliseconds. So if your threads run during the same millisecond, yes this function will return the same result. So you can generate UUIDs like that: `UUID.randomUUID()`","title":"Java multithreading. Same System.currentTimeMillis() values on different threads","body":"<p>The function <code>System.currentTimeMillis()</code> returns the current time in milliseconds. So if your threads run during the same millisecond, yes this function will return the same result. So you can generate UUIDs like that: <code>UUID.randomUUID()</code></p>\n"}],"owner":{"account_id":2392528,"reputation":2186,"user_id":2092109,"accept_rate":83,"display_name":"Benas"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3369,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1468405168,"accepted_answer_id":38348485,"answer_count":2,"score":3,"last_activity_date":1690197760,"creation_date":1468403821,"question_id":38348375,"body_markdown":"I want to use the result of `System.currentTimeMillis()` in the multithreaded appplication to generate unique IDs. This is my code:\r\n\r\n        class MyRunnableClass implements Runnable{\r\n\t\t\t@Override\r\n\t\t\tpublic void run() {\r\n                long thisValueShouldBeUnique = System.currentTimeMillis ();\r\n            }\r\n        }\r\n\r\nI start 10 threads which run MyRunnableClass object run() method.\r\nIs it true, that sometimes the result of `System.currentTimeMillis ()` in different threads may be the same?","title":"Java multithreading. Same System.currentTimeMillis() values on different threads","body":"<p>I want to use the result of <code>System.currentTimeMillis()</code> in the multithreaded appplication to generate unique IDs. This is my code:</p>\n\n<pre><code>    class MyRunnableClass implements Runnable{\n        @Override\n        public void run() {\n            long thisValueShouldBeUnique = System.currentTimeMillis ();\n        }\n    }\n</code></pre>\n\n<p>I start 10 threads which run MyRunnableClass object run() method.\nIs it true, that sometimes the result of <code>System.currentTimeMillis ()</code> in different threads may be the same?</p>\n"},{"tags":["java","spring","spring-boot","multithreading","scalability"],"comments":[{"owner":{"account_id":19535095,"reputation":2864,"user_id":14294053,"display_name":"Mar-Z"},"score":1,"creation_date":1690189363,"post_id":76752761,"comment_id":135313407,"body_markdown":"Do you have currently a single deployment on Kubernetes? You can first try to introduce multiple pods. For example up to 15 which is your number of tenants. This should help to mitigate the current bottleneck. And it would be with no code change.","body":"Do you have currently a single deployment on Kubernetes? You can first try to introduce multiple pods. For example up to 15 which is your number of tenants. This should help to mitigate the current bottleneck. And it would be with no code change."},{"owner":{"account_id":194308,"reputation":66720,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":0,"creation_date":1690191412,"post_id":76752761,"comment_id":135313883,"body_markdown":"&quot;Previously we thought that it is because of delay from our server. But later we understood that because of greater number of api calls from angular making delayed operation.&quot; It&#39;s still your server, even though we are not necessarily speaking about a large slowness, but lots of smaller slownesses that accumulate. Please edit your question and provide at least conceptual information about what requests are being sent, because the reorganizing of those will be necessary and we need to have some information in order to figure out improvements for you.","body":"&quot;Previously we thought that it is because of delay from our server. But later we understood that because of greater number of api calls from angular making delayed operation.&quot; It&#39;s still your server, even though we are not necessarily speaking about a large slowness, but lots of smaller slownesses that accumulate. Please edit your question and provide at least conceptual information about what requests are being sent, because the reorganizing of those will be necessary and we need to have some information in order to figure out improvements for you."},{"owner":{"account_id":11827466,"reputation":2337,"user_id":8655052,"accept_rate":100,"display_name":"Mr.DevEng"},"score":0,"creation_date":1690195668,"post_id":76752761,"comment_id":135314773,"body_markdown":"Thank you for your response. I tried to give little bit more idea about the structure off app in my update. I hope this will help to understand the concern. Please go through my update when you gets some time.","body":"Thank you for your response. I tried to give little bit more idea about the structure off app in my update. I hope this will help to understand the concern. Please go through my update when you gets some time."}],"answers":[{"tags":[],"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690190008,"creation_date":1690190008,"answer_id":76752976,"question_id":76752761,"body_markdown":"Issues like this normally takes weeks och even months to solve, even for a team that has lots of experience. \r\n\r\nIf your problem is the number of API-calls from the client, **start with investigating if the client can do those calls in parallel** and not in sequence.\r\n\r\nIf that is not possible, **investigate if you can make a new API endpoint that in its turn calls the other endpoints** (or rather the micro services directly) just like the client would. Then let the client call this one API endpoint. That would at least remove the network (Internet) roundtrip for each call to the API, and replace them all with a single betwork roundtrip from the client.\r\n\r\nYou can handtail this if the flow is more or less static, or you can use some technology like GraphQL if you see that a hand made solution gets too complex.\r\n\r\nNote that this may change caching behaviour,  there may come an unpredicted penalty down the road that you need to deal with later. All those API-calls that may have been cached in web or client caches does no longer happen, and are not cached next time they are called... (But for a login flow, this is less likely to happen I would say. )","title":"Implementing scalable microservices oriented web application using Spring MVC and Springboot in Java","body":"<p>Issues like this normally takes weeks och even months to solve, even for a team that has lots of experience.</p>\n<p>If your problem is the number of API-calls from the client, <strong>start with investigating if the client can do those calls in parallel</strong> and not in sequence.</p>\n<p>If that is not possible, <strong>investigate if you can make a new API endpoint that in its turn calls the other endpoints</strong> (or rather the micro services directly) just like the client would. Then let the client call this one API endpoint. That would at least remove the network (Internet) roundtrip for each call to the API, and replace them all with a single betwork roundtrip from the client.</p>\n<p>You can handtail this if the flow is more or less static, or you can use some technology like GraphQL if you see that a hand made solution gets too complex.</p>\n<p>Note that this may change caching behaviour,  there may come an unpredicted penalty down the road that you need to deal with later. All those API-calls that may have been cached in web or client caches does no longer happen, and are not cached next time they are called... (But for a login flow, this is less likely to happen I would say. )</p>\n"}],"owner":{"account_id":11827466,"reputation":2337,"user_id":8655052,"accept_rate":100,"display_name":"Mr.DevEng"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1690197432,"creation_date":1690188196,"question_id":76752761,"body_markdown":"I am migrating enterprise web application using spring MVC and spring boot which currently working in core .Net technology. In Java I am using microservices and postgresql in backend and using angular in front end. This application actually consist of 18 spring MVC project with almost 70-75 end points. And we have upto 15 tenants using this. \r\n\r\nNow we are using Kubernetes and Jenkins in our own On-premise server to deploy the development version. So We are facing issue that if multiple login making at same time, we facing lot of dely. Previously we thought that it is because of delay from our server. But later we understood that because of greater number of api calls from angular making delayed operation.\r\n\r\n**Confusion in Future Implementation Using Multithreading**\r\n\r\n Now we are thinking to implement the all backend spring boot microservices using multi-threading. So to implement scalable application Here my confusion is that, \r\n\r\n 1. Is multithreading will resolve my delaying operation issue ?\r\n\r\nIf it is not a good move , which alternative idea available for me? . I am new to designing scalable application. So totally confused here. Can anyone suggest any solution to my problem or suggest any good tutorial to resolve this please?\r\n  \r\nUpdate - Information of Current architecture\r\n\r\n 1. Running Pods - For testing purpose only we used Kubernetes for deployment. And 18 pods for each microservice project plus additionally 1 pod for running angular app.\r\n\r\n 2. APIs - from angular application, which will hit the backend microservices. At one time upto 18 tenant customers may access application. Ie, almost 200 surveying customers may parallelly access.\r\n\r\n3. Microservice dependency- When Angular calls each microservices , it will call another api internally for authentication/authorization purpose (security api). I don&#39;t know this is will make any problem to my system.\r\n\r\n4. Deployment On Kubernetes Cluster(AWS EKS/On_premise) - is yet to get permission from org. Since AWS EKS will make a additional cost. So I have to look for deployment without K8 Cluster is also one concern to me.\r\n\r\n5. Surveying page makes one complex page in application which have 4 to 5 tabs and each tab saving functionality need to do independently. Each save operation has its own working time. Since multiple tables are joining and save op takes a while to finish in each tab.\r\n\r\n ","title":"Implementing scalable microservices oriented web application using Spring MVC and Springboot in Java","body":"<p>I am migrating enterprise web application using spring MVC and spring boot which currently working in core .Net technology. In Java I am using microservices and postgresql in backend and using angular in front end. This application actually consist of 18 spring MVC project with almost 70-75 end points. And we have upto 15 tenants using this.</p>\n<p>Now we are using Kubernetes and Jenkins in our own On-premise server to deploy the development version. So We are facing issue that if multiple login making at same time, we facing lot of dely. Previously we thought that it is because of delay from our server. But later we understood that because of greater number of api calls from angular making delayed operation.</p>\n<p><strong>Confusion in Future Implementation Using Multithreading</strong></p>\n<p>Now we are thinking to implement the all backend spring boot microservices using multi-threading. So to implement scalable application Here my confusion is that,</p>\n<ol>\n<li>Is multithreading will resolve my delaying operation issue ?</li>\n</ol>\n<p>If it is not a good move , which alternative idea available for me? . I am new to designing scalable application. So totally confused here. Can anyone suggest any solution to my problem or suggest any good tutorial to resolve this please?</p>\n<p>Update - Information of Current architecture</p>\n<ol>\n<li><p>Running Pods - For testing purpose only we used Kubernetes for deployment. And 18 pods for each microservice project plus additionally 1 pod for running angular app.</p>\n</li>\n<li><p>APIs - from angular application, which will hit the backend microservices. At one time upto 18 tenant customers may access application. Ie, almost 200 surveying customers may parallelly access.</p>\n</li>\n<li><p>Microservice dependency- When Angular calls each microservices , it will call another api internally for authentication/authorization purpose (security api). I don't know this is will make any problem to my system.</p>\n</li>\n<li><p>Deployment On Kubernetes Cluster(AWS EKS/On_premise) - is yet to get permission from org. Since AWS EKS will make a additional cost. So I have to look for deployment without K8 Cluster is also one concern to me.</p>\n</li>\n<li><p>Surveying page makes one complex page in application which have 4 to 5 tabs and each tab saving functionality need to do independently. Each save operation has its own working time. Since multiple tables are joining and save op takes a while to finish in each tab.</p>\n</li>\n</ol>\n"},{"tags":["java","junit4"],"owner":{"account_id":21482511,"reputation":3,"user_id":15829656,"display_name":"jijesh vu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690197379,"creation_date":1690197379,"question_id":76753922,"body_markdown":"\r\nThe below code is not calling the inner class test method. \r\nsince @RunWith does not support mutilple class delcaration that is why i using the inner class.\r\nThe main idea is to create a dynamic test method using Parameterized.class. So each method is is taken a new test \r\n\r\n    @RunWith(ScenarioStepRunner.class)\r\n    public class TestGlobal extends Step_Common{\r\n    \t\r\n    \t@Before\r\n    \tpublic void setup() {\r\n    \t\t// some pre test code\r\n    \t}\r\n    \r\n    \t@Test\r\n    \tpublic void subRunner() {\r\n    \t\tJUnitCore.runClasses(ParameterizedRunner.class);\r\n    \t}\r\n    \r\n    \t@RunWith(Parameterized.class)\r\n    \tpublic static class ParameterizedRunner  extends Step_Common{\r\n    \r\n    \t\t@Parameter(0)\r\n    \t\tpublic String name;\r\n    \r\n    \t\t@Parameters(name = &quot;Tetsing {0}&quot;)\r\n    \t\tpublic static Iterable&lt;Object[]&gt; data() {\r\n    \t\t\treturn Arrays.asList(new Object[][] { { &quot;AA&quot; }, { &quot;BB&quot; } });\r\n    \t\t}\r\n    \r\n    \t\t@Test\r\n    \t\tpublic void test() throws Exception {\r\n    \t\t\tSystem.out.println(&quot;*********&quot; + this.name);\r\n    \t\t\t\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"junit4 inner class method is not calling","body":"<p>The below code is not calling the inner class test method.\nsince @RunWith does not support mutilple class delcaration that is why i using the inner class.\nThe main idea is to create a dynamic test method using Parameterized.class. So each method is is taken a new test</p>\n<pre><code>@RunWith(ScenarioStepRunner.class)\npublic class TestGlobal extends Step_Common{\n    \n    @Before\n    public void setup() {\n        // some pre test code\n    }\n\n    @Test\n    public void subRunner() {\n        JUnitCore.runClasses(ParameterizedRunner.class);\n    }\n\n    @RunWith(Parameterized.class)\n    public static class ParameterizedRunner  extends Step_Common{\n\n        @Parameter(0)\n        public String name;\n\n        @Parameters(name = &quot;Tetsing {0}&quot;)\n        public static Iterable&lt;Object[]&gt; data() {\n            return Arrays.asList(new Object[][] { { &quot;AA&quot; }, { &quot;BB&quot; } });\n        }\n\n        @Test\n        public void test() throws Exception {\n            System.out.println(&quot;*********&quot; + this.name);\n            \n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","gitlab-ci"],"owner":{"account_id":2708451,"reputation":674,"user_id":2337522,"display_name":"Sky"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690197102,"creation_date":1689954121,"question_id":76739400,"body_markdown":"I have a selfhosted GitLab instance running with various Java projects on it. The projects are built with Gradle. In order to cache dependencies, I&#39;ve configured Gradle to store its stuff inside the project directory and added GitLab caching for the `.gradle/caches` folder.\r\n\r\nIt looks like this:\r\n\r\n```yml\r\nvariables:\r\n  GRADLE_CACHE: &quot;my-project-cache&quot;\r\n  GRADLE_USER_HOME: &quot;$CI_PROJECT_DIR/.gradle&quot;\r\n\r\ncache:\r\n  key: $GRADLE_CACHE\r\n  paths:\r\n    - .gradle/caches/\r\n```\r\n\r\nThis works so far. The `.gradle` folder is not under version control, it&#39;s just created when GitLab executes the build job.\r\n\r\nNext I wanted to add GitLab code quality to the project. I don&#39;t have experience with it, as I&#39;ve been using SonarQube so far, so this is my first try.\r\n\r\nI&#39;ve read that the setup should be quite simple, basically it is adding:\r\n\r\n```yml\r\ninclude:\r\n  - template: Code-Quality.gitlab-ci.yml\r\n```\r\n\r\nThis will add a `code_quality` job and execute it within the test stage. And I can see results in the merge request widget of GitLab. However, what I see there is not what I expect. It shows multiple findings like this one:\r\n\r\n```\r\nMinor - TODO found\r\nin .gradle/caches/modules-2/files-2.1/org.apache/apache/16/8a90e31780e5cd0685ccaf25836c66e3b4e163b7/apache-16.pom:238\r\n```\r\n\r\nSo it looks like GitLab scans the `.gradle` folder, which it should not.\r\n\r\nMy Java project has its sources in default folders `src/main/java` and code for unit tests in `src/test/java`. I thought it might be good to set the source directory for the `code_quality` job to `src/main/java`, so that it scans just contents of this directory.\r\n\r\nGitLab docs says that a variable `SOURCE_CODE` can be set: https://docs.gitlab.com/ee/ci/testing/code_quality.html#available-cicd-variables\r\n\r\nI tried this, but it doesn&#39;t have any effect:\r\n\r\n```yml\r\ninclude:\r\n  - template: Code-Quality.gitlab-ci.yml\r\n\r\ncode_quality:\r\n  variables:\r\n    SOURCE_CODE: &quot;src/main/java&quot;\r\n```\r\n\r\n\r\nI took a look at GitLab&#39;s `Code-Quality.gitlab-ci.yml` file (see [here][1]) and saw they set `SOURCE_CODE` in the script block of their job:\r\n\r\n```\r\n  script:\r\n    - export SOURCE_CODE=$PWD\r\n```\r\n\r\nI&#39;m not sure, but maybe this overwrites the `SOURCE_CODE` variable, which I&#39;ve set in my `.gitlab-ci.yml`.\r\n\r\nSo I wonder what a correct setup would look like. Can you give me hints please?\r\n\r\n**Workaround:** I didn&#39;t find out how or if the `SOURCE_CODE` variable can be set correctly. I found a solution for my problem though: I moved Gradle home away from the project directory into `/cache/.gradle` and removed the GitLab cache. `/cache` is a volume, which gets mounted by default, so putting `.gradle` into it works well for me.\r\n\r\n\r\n  [1]: https://gitlab.com/gitlab-org/gitlab-foss/-/blob/master/lib/gitlab/ci/templates/Jobs/Code-Quality.gitlab-ci.yml","title":"GitLab CI with code quality showing unwanted findings","body":"<p>I have a selfhosted GitLab instance running with various Java projects on it. The projects are built with Gradle. In order to cache dependencies, I've configured Gradle to store its stuff inside the project directory and added GitLab caching for the <code>.gradle/caches</code> folder.</p>\n<p>It looks like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>variables:\n  GRADLE_CACHE: &quot;my-project-cache&quot;\n  GRADLE_USER_HOME: &quot;$CI_PROJECT_DIR/.gradle&quot;\n\ncache:\n  key: $GRADLE_CACHE\n  paths:\n    - .gradle/caches/\n</code></pre>\n<p>This works so far. The <code>.gradle</code> folder is not under version control, it's just created when GitLab executes the build job.</p>\n<p>Next I wanted to add GitLab code quality to the project. I don't have experience with it, as I've been using SonarQube so far, so this is my first try.</p>\n<p>I've read that the setup should be quite simple, basically it is adding:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>include:\n  - template: Code-Quality.gitlab-ci.yml\n</code></pre>\n<p>This will add a <code>code_quality</code> job and execute it within the test stage. And I can see results in the merge request widget of GitLab. However, what I see there is not what I expect. It shows multiple findings like this one:</p>\n<pre><code>Minor - TODO found\nin .gradle/caches/modules-2/files-2.1/org.apache/apache/16/8a90e31780e5cd0685ccaf25836c66e3b4e163b7/apache-16.pom:238\n</code></pre>\n<p>So it looks like GitLab scans the <code>.gradle</code> folder, which it should not.</p>\n<p>My Java project has its sources in default folders <code>src/main/java</code> and code for unit tests in <code>src/test/java</code>. I thought it might be good to set the source directory for the <code>code_quality</code> job to <code>src/main/java</code>, so that it scans just contents of this directory.</p>\n<p>GitLab docs says that a variable <code>SOURCE_CODE</code> can be set: <a href=\"https://docs.gitlab.com/ee/ci/testing/code_quality.html#available-cicd-variables\" rel=\"nofollow noreferrer\">https://docs.gitlab.com/ee/ci/testing/code_quality.html#available-cicd-variables</a></p>\n<p>I tried this, but it doesn't have any effect:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>include:\n  - template: Code-Quality.gitlab-ci.yml\n\ncode_quality:\n  variables:\n    SOURCE_CODE: &quot;src/main/java&quot;\n</code></pre>\n<p>I took a look at GitLab's <code>Code-Quality.gitlab-ci.yml</code> file (see <a href=\"https://gitlab.com/gitlab-org/gitlab-foss/-/blob/master/lib/gitlab/ci/templates/Jobs/Code-Quality.gitlab-ci.yml\" rel=\"nofollow noreferrer\">here</a>) and saw they set <code>SOURCE_CODE</code> in the script block of their job:</p>\n<pre><code>  script:\n    - export SOURCE_CODE=$PWD\n</code></pre>\n<p>I'm not sure, but maybe this overwrites the <code>SOURCE_CODE</code> variable, which I've set in my <code>.gitlab-ci.yml</code>.</p>\n<p>So I wonder what a correct setup would look like. Can you give me hints please?</p>\n<p><strong>Workaround:</strong> I didn't find out how or if the <code>SOURCE_CODE</code> variable can be set correctly. I found a solution for my problem though: I moved Gradle home away from the project directory into <code>/cache/.gradle</code> and removed the GitLab cache. <code>/cache</code> is a volume, which gets mounted by default, so putting <code>.gradle</code> into it works well for me.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":2,"creation_date":1473926519,"post_id":39505912,"comment_id":66328426,"body_markdown":".... and your problem with your attempt is...?","body":".... and your problem with your attempt is...?"},{"owner":{"account_id":3526709,"reputation":16307,"user_id":2947592,"accept_rate":71,"display_name":"wvdz"},"score":0,"creation_date":1473926541,"post_id":39505912,"comment_id":66328435,"body_markdown":"`String s = &quot;&quot;;\n    for (int i : listInt)\n        s += i;`","body":"<code>String s = &quot;&quot;;     for (int i : listInt)         s += i;</code>"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":4,"creation_date":1473926547,"post_id":39505912,"comment_id":66328436,"body_markdown":"Please show your code attempt so we can see what you&#39;re doing wrong. Otherwise this is nothing but a terribly lazy &quot;please do my work for me&quot; question for trivial work at that.","body":"Please show your code attempt so we can see what you&#39;re doing wrong. Otherwise this is nothing but a terribly lazy &quot;please do my work for me&quot; question for trivial work at that."},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1473926620,"post_id":39505912,"comment_id":66328474,"body_markdown":"@wvdz Creating N strings along the way is not something I&#39;d recommend.","body":"@wvdz Creating N strings along the way is not something I&#39;d recommend."},{"owner":{"account_id":3526709,"reputation":16307,"user_id":2947592,"accept_rate":71,"display_name":"wvdz"},"score":0,"creation_date":1473927153,"post_id":39505912,"comment_id":66328734,"body_markdown":"@RealSkeptic Here&#39;s an interesting read for you: https://blog.codinghorror.com/the-sad-tragedy-of-micro-optimization-theater/","body":"@RealSkeptic Here&#39;s an interesting read for you: <a href=\"https://blog.codinghorror.com/the-sad-tragedy-of-micro-optimization-theater/\" rel=\"nofollow noreferrer\">blog.codinghorror.com/&hellip;</a>"},{"owner":{"account_id":5150443,"reputation":34158,"user_id":4125191,"display_name":"RealSkeptic"},"score":0,"creation_date":1473927467,"post_id":39505912,"comment_id":66328883,"body_markdown":"@wvdz Read it. The point there is: don&#39;t use string concatenation in loops, but don&#39;t go crazy about it. And the example is not about loops at all. I would still not recommend it to anybody, and that it&#39;s bad advice to give a novice.","body":"@wvdz Read it. The point there is: don&#39;t use string concatenation in loops, but don&#39;t go crazy about it. And the example is not about loops at all. I would still not recommend it to anybody, and that it&#39;s bad advice to give a novice."},{"owner":{"account_id":9172673,"reputation":21,"user_id":6819545,"accept_rate":60,"display_name":"TedNugent"},"score":0,"creation_date":1473927980,"post_id":39505912,"comment_id":66329183,"body_markdown":"I tried the following BEFORE I ask a question. String str = &quot;&quot;; for(int i =0; i&lt;listInt.size();j++{\nstr = listIntget(i) + &quot;&quot;;\n}","body":"I tried the following BEFORE I ask a question. String str = &quot;&quot;; for(int i =0; i&lt;listInt.size();j++{ str = listIntget(i) + &quot;&quot;; }"},{"owner":{"account_id":9172673,"reputation":21,"user_id":6819545,"accept_rate":60,"display_name":"TedNugent"},"score":0,"creation_date":1473928544,"post_id":39505912,"comment_id":66329510,"body_markdown":"@Hovercraft Full Of Eels. And why do I have to prove to anybody that I tried or not? I have tried this with a lot of different ways that I cannot post here. And newbies dont get a lot of things as experienced developers do. So please be more polite and answer if you want without complaining. To just instruct me to write 3 rows of code (thats the complication of the problem) is far away from doing my work.","body":"@Hovercraft Full Of Eels. And why do I have to prove to anybody that I tried or not? I have tried this with a lot of different ways that I cannot post here. And newbies dont get a lot of things as experienced developers do. So please be more polite and answer if you want without complaining. To just instruct me to write 3 rows of code (thats the complication of the problem) is far away from doing my work."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1474096813,"post_id":39505912,"comment_id":66400917,"body_markdown":"This is not a help site but rather a question and answer site. Why does this matter and how does it pertain to your question? It means that the quality of the question is just as important if not more important than the answers, since low quality questions will likely benefit no one in the future. Without your showing what you&#39;ve done and without your asking a much more specific question, your question will remain low quality. That&#39;s why I am requesting that you strive to improve this question. I am hopeful that your future questions will be better.","body":"This is not a help site but rather a question and answer site. Why does this matter and how does it pertain to your question? It means that the quality of the question is just as important if not more important than the answers, since low quality questions will likely benefit no one in the future. Without your showing what you&#39;ve done and without your asking a much more specific question, your question will remain low quality. That&#39;s why I am requesting that you strive to improve this question. I am hopeful that your future questions will be better."}],"answers":[{"tags":[],"owner":{"account_id":6302434,"reputation":5409,"user_id":4896651,"accept_rate":75,"display_name":"Shadov"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1473932926,"creation_date":1473932926,"answer_id":39508000,"question_id":39505912,"body_markdown":"Try this, the simplest way:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-java  --&gt;\r\n\r\n    List&lt;Integer&gt; listInt = Arrays.asList(1,2,3);\r\n    String str = &quot;&quot;;\r\n    StringBuilder builder = new StringBuilder();\r\n    for(Integer item : listInt)\r\n      builder.append(item);\r\n    str = builder.toString();\r\n    System.out.println(str);\r\n\r\n&lt;!-- end snippet --&gt;","title":"Convert ArrayList of Integers to String Java","body":"<p>Try this, the simplest way:</p>\n\n\n\n<pre><code>List&lt;Integer&gt; listInt = Arrays.asList(1,2,3);\nString str = \"\";\nStringBuilder builder = new StringBuilder();\nfor(Integer item : listInt)\n  builder.append(item);\nstr = builder.toString();\nSystem.out.println(str);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":720092,"reputation":4354,"user_id":655625,"display_name":"Chris Amelinckx"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633399040,"creation_date":1633399040,"answer_id":69444090,"question_id":39505912,"body_markdown":"String numberString = listInt.stream().map(String::valueOf)\r\n    .collect(Collectors.joining(&quot;&quot;));\r\n\r\n//You can pass a delimiter if you want to the joining() function, like a comma. &quot;,&quot;","title":"Convert ArrayList of Integers to String Java","body":"<p>String numberString = listInt.stream().map(String::valueOf)\n.collect(Collectors.joining(&quot;&quot;));</p>\n<p>//You can pass a delimiter if you want to the joining() function, like a comma. &quot;,&quot;</p>\n"},{"tags":[],"owner":{"account_id":26562345,"reputation":1,"user_id":20189986,"display_name":"Rafiya Quazi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690197095,"creation_date":1690197095,"answer_id":76753889,"question_id":39505912,"body_markdown":"        //Declare list &amp; varaible\r\n        List&lt;Integer&gt; listInt= new ArrayList();\r\n        String str = &quot;&quot;;\r\n    \r\n        //add values into list\r\n        listInt.add(1);\r\n        listInt.add(2);\r\n        listInt.add(3);\r\n        //iterate list &amp; add to append value to str\r\n        for(Integer item:listInt){\r\n            str+=item;\r\n        }\r\n        //print final output\r\n        System.out.println(str);","title":"Convert ArrayList of Integers to String Java","body":"<pre><code>    //Declare list &amp; varaible\n    List&lt;Integer&gt; listInt= new ArrayList();\n    String str = &quot;&quot;;\n\n    //add values into list\n    listInt.add(1);\n    listInt.add(2);\n    listInt.add(3);\n    //iterate list &amp; add to append value to str\n    for(Integer item:listInt){\n        str+=item;\n    }\n    //print final output\n    System.out.println(str);\n</code></pre>\n"}],"owner":{"account_id":9172673,"reputation":21,"user_id":6819545,"accept_rate":60,"display_name":"TedNugent"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":586,"favorite_count":0,"down_vote_count":7,"up_vote_count":0,"answer_count":3,"score":-7,"last_activity_date":1690197095,"creation_date":1473926449,"question_id":39505912,"body_markdown":"I want to convert an ArrayList of Integers to a single string.\r\n\r\nFor example: \r\n\r\n    List&lt;Integers&gt; listInt= new ArrayList();\r\n    \r\n    String str = &quot;&quot;;\r\n    \r\n    listInt.add(1);\r\n    listInt.add(2);\r\n    listInt.add(3);\r\n    \r\n    // I want the output to be: str = &quot;123&quot;;\r\n\r\n","title":"Convert ArrayList of Integers to String Java","body":"<p>I want to convert an ArrayList of Integers to a single string.</p>\n\n<p>For example: </p>\n\n<pre><code>List&lt;Integers&gt; listInt= new ArrayList();\n\nString str = \"\";\n\nlistInt.add(1);\nlistInt.add(2);\nlistInt.add(3);\n\n// I want the output to be: str = \"123\";\n</code></pre>\n"},{"tags":["java","spring","inject"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1461585070,"post_id":36838257,"comment_id":61249371,"body_markdown":"Have you read [the reference guide](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestheader)? You don&#39;t need an aspect as it is supported out-of-the-box... Don&#39;t make things more complex then needed.","body":"Have you read <a href=\"http://docs.spring.io/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-ann-requestheader\" rel=\"nofollow noreferrer\">the reference guide</a>? You don&#39;t need an aspect as it is supported out-of-the-box... Don&#39;t make things more complex then needed."},{"owner":{"account_id":3023777,"reputation":213,"user_id":2564217,"accept_rate":90,"display_name":"Cony"},"score":0,"creation_date":1461590601,"post_id":36838257,"comment_id":61253487,"body_markdown":"I can&#39;t seem to understand how is it out-of-the-box? I need to put this piece of code on every method i have, i would like to avoid it.","body":"I can&#39;t seem to understand how is it out-of-the-box? I need to put this piece of code on every method i have, i would like to avoid it."},{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1461591048,"post_id":36838257,"comment_id":61253841,"body_markdown":"If it is JWT then I strongly suggest instead of setting an attribute integrate with the request properly and use the principal. That way you can do `getPrincipal` on the request or simply add the `Principal` to the method signature. If you use Spring Security for decoding the JWT you would get this support for free (well you need the configuration).","body":"If it is JWT then I strongly suggest instead of setting an attribute integrate with the request properly and use the principal. That way you can do <code>getPrincipal</code> on the request or simply add the <code>Principal</code> to the method signature. If you use Spring Security for decoding the JWT you would get this support for free (well you need the configuration)."}],"answers":[{"tags":[],"owner":{"account_id":2339925,"reputation":15581,"user_id":2051454,"accept_rate":60,"display_name":"Software Engineer"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1461663591,"creation_date":1461585201,"answer_id":36839794,"question_id":36838257,"body_markdown":"If you really want to know about attributes then you should check out spring&#39;s [@RequestParam][1] annotation. You&#39;d use it like this:\r\n\r\n    @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(@RequestParam(&quot;subject&quot;) String currentUser) throws ResourceNotFoundException { \r\n       this.getJobs(currentUser);\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html\r\n","title":"Inject request attribute from request to spring controller methods","body":"<p>If you really want to know about attributes then you should check out spring's <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/bind/annotation/RequestParam.html\" rel=\"nofollow\">@RequestParam</a> annotation. You'd use it like this:</p>\n\n<pre><code>@RequestMapping(value = \"\", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\npublic ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(@RequestParam(\"subject\") String currentUser) throws ResourceNotFoundException { \n   this.getJobs(currentUser);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1357198,"reputation":3278,"user_id":1295364,"accept_rate":71,"display_name":"carcaret"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1461671139,"creation_date":1461671139,"answer_id":36864024,"question_id":36838257,"body_markdown":"You could use a `Filter` to populate a `ThreadLocal&lt;String&gt;` variable that stores that attribute:\r\n\r\n    public class MyFilter implements Filter {\r\n\r\n      @Override\r\n      public void init(FilterConfig filterConfig) throws ServletException {}\r\n\r\n      @Override\r\n      public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\r\n        throws IOException, ServletException {\r\n        HttpServletRequest req = (HttpServletRequest) request;\r\n        ContextHolder.setSubject(request.getAttribute(&#39;subject&#39;));\r\n        chain.doFilter(request, response);\r\n      }\r\n\r\n      @Override\r\n      public void destroy() {\r\n        ContextHolder.removeSubject();\r\n      }\r\n    }\r\n\r\n    \r\n    public class ContextHolder {\r\n\r\n      private static final ThreadLocal&lt;String&gt; SUBJECT = new ThreadLocal&lt;String&gt;() {\r\n        @Override\r\n        protected String initialValue() {\r\n          return &quot;empty&quot;;\r\n        }\r\n      };\r\n\r\n      public static void setSubject(String subject) {\r\n        SUBJECT.set(subject);\r\n      }\r\n\r\n      public static String getSubject() {\r\n        return SUBJECT.get();\r\n      }\r\n\r\n      public static void removeSubject() {\r\n        SUBJECT.remove();\r\n      }\r\n    }\r\n\r\nThe filter will be configured to intercept all requests and populate the `SUBJECT` variable. By using a `ThreadLocal`, you make sure that each thread has it&#39;s own `subject` value. You can now get that value anywhere in your application by calling `ContextHolder.getSubject()`:\r\n\r\n      @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\r\n      public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(HttpServletRequest request) throws ResourceNotFoundException { \r\n        this.getJobs(ContextHolder.getSubject());\r\n      }\r\n\r\nYou will also have to register the `Filter` in the web.xml file:\r\n\r\n\t&lt;filter&gt;\r\n\t\t&lt;filter-name&gt;MyFilter&lt;/filter-name&gt;\r\n\t\t&lt;filter-class&gt;com.MyFilter&lt;/filter-class&gt;\r\n\t&lt;/filter&gt;\r\n\t&lt;filter-mapping&gt;\r\n\t\t&lt;filter-name&gt;MyFilter&lt;/filter-name&gt;\r\n\t\t&lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n\t&lt;/filter-mapping&gt;\r\n\r\nIn case you had multiple attributes, you could use a `ThreadLocal&lt;Map&lt;String, String&gt;&gt;` variable instead.","title":"Inject request attribute from request to spring controller methods","body":"<p>You could use a <code>Filter</code> to populate a <code>ThreadLocal&lt;String&gt;</code> variable that stores that attribute:</p>\n\n<pre><code>public class MyFilter implements Filter {\n\n  @Override\n  public void init(FilterConfig filterConfig) throws ServletException {}\n\n  @Override\n  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n    throws IOException, ServletException {\n    HttpServletRequest req = (HttpServletRequest) request;\n    ContextHolder.setSubject(request.getAttribute('subject'));\n    chain.doFilter(request, response);\n  }\n\n  @Override\n  public void destroy() {\n    ContextHolder.removeSubject();\n  }\n}\n\n\npublic class ContextHolder {\n\n  private static final ThreadLocal&lt;String&gt; SUBJECT = new ThreadLocal&lt;String&gt;() {\n    @Override\n    protected String initialValue() {\n      return \"empty\";\n    }\n  };\n\n  public static void setSubject(String subject) {\n    SUBJECT.set(subject);\n  }\n\n  public static String getSubject() {\n    return SUBJECT.get();\n  }\n\n  public static void removeSubject() {\n    SUBJECT.remove();\n  }\n}\n</code></pre>\n\n<p>The filter will be configured to intercept all requests and populate the <code>SUBJECT</code> variable. By using a <code>ThreadLocal</code>, you make sure that each thread has it's own <code>subject</code> value. You can now get that value anywhere in your application by calling <code>ContextHolder.getSubject()</code>:</p>\n\n<pre><code>  @RequestMapping(value = \"\", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\n  public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(HttpServletRequest request) throws ResourceNotFoundException { \n    this.getJobs(ContextHolder.getSubject());\n  }\n</code></pre>\n\n<p>You will also have to register the <code>Filter</code> in the web.xml file:</p>\n\n<pre><code>&lt;filter&gt;\n    &lt;filter-name&gt;MyFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;com.MyFilter&lt;/filter-class&gt;\n&lt;/filter&gt;\n&lt;filter-mapping&gt;\n    &lt;filter-name&gt;MyFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n&lt;/filter-mapping&gt;\n</code></pre>\n\n<p>In case you had multiple attributes, you could use a <code>ThreadLocal&lt;Map&lt;String, String&gt;&gt;</code> variable instead.</p>\n"},{"tags":[],"owner":{"account_id":4702394,"reputation":21,"user_id":3805618,"display_name":"user3805618"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1690196119,"creation_date":1498641874,"answer_id":44798551,"question_id":36838257,"body_markdown":"Simply just add `@RequestAttribute` in your rest **contorller**\r\n\r\n    @RestController\r\n    @RequestMapping(path=&quot;/yourpath&quot;)\r\n    \r\n    @RequestMapping(method = RequestMethod.GET)\r\n    \tpublic ResponseEntity getAll(\r\n    \t\t\t@RequestAttribute(value = &quot;yourAttribute&quot;) Object \r\n\r\nyourAttribute......\r\n","title":"Inject request attribute from request to spring controller methods","body":"<p>Simply just add <code>@RequestAttribute</code> in your rest <strong>contorller</strong></p>\n<pre><code>@RestController\n@RequestMapping(path=&quot;/yourpath&quot;)\n\n@RequestMapping(method = RequestMethod.GET)\n    public ResponseEntity getAll(\n            @RequestAttribute(value = &quot;yourAttribute&quot;) Object \n</code></pre>\n<p>yourAttribute......</p>\n"}],"owner":{"account_id":3023777,"reputation":213,"user_id":2564217,"accept_rate":90,"display_name":"Cony"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12406,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36864024,"answer_count":3,"score":2,"last_activity_date":1690196119,"creation_date":1461580897,"question_id":36838257,"body_markdown":"I have some spring @RestControllers methods that I would like to inject with a value that comes with every request as a request attribute(containing the user) something like:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/jobs&quot;)\r\n    public class JobsController {\r\n         // Option 1 get user from request attribute as prop somehow\r\n         private String userId = &quot;user1&quot;;\r\n\r\n        // Option 2 inject into method using aspect or something else\r\n        @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs() throws ResourceNotFoundException {\r\n           // currentUser is injected \r\n           this.getJobs(currentUser);\r\n    }\r\n\r\nI know I can do that:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/jobs&quot;)\r\n    public class JobsController {\r\n        \r\n        @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(HttpServletRequest request) throws ResourceNotFoundException { \r\n           String currentUser = null;\r\n           if (request.getAttribute(&quot;subject&quot;) != null) {\r\n               currentUser = request.getAttribute(&quot;subject&quot;).toString();\r\n           }\r\n           this.getJobs(currentUser);\r\n    }\r\nBut that would require me to add this code at every method in my program, which seems to me, to be a really bad practice.  \r\nIs there a way to achieve what I want?\r\n  \r\n  \r\nIf the answer do require aspect, a code example will be much appreciated since I only read about it, but never actually did something with aspect.\r\n\r\n**Update**  \r\nThe code i suggested can be simplified using this:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api/jobs&quot;)\r\n    public class JobsController {\r\n        \r\n        @RequestMapping(value = &quot;&quot;, method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\r\n        public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(@Value(&quot;#{request.getAttribute(&#39;subject&#39;)}&quot; String currentUser) throws ResourceNotFoundException { \r\n           this.getJobs(currentUser);\r\n    }\r\n\r\nBut still require me to add that parameter at every method.\r\nCan this parameter be injected to every method somehow?","title":"Inject request attribute from request to spring controller methods","body":"<p>I have some spring @RestControllers methods that I would like to inject with a value that comes with every request as a request attribute(containing the user) something like:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/jobs\")\npublic class JobsController {\n     // Option 1 get user from request attribute as prop somehow\n     private String userId = \"user1\";\n\n    // Option 2 inject into method using aspect or something else\n    @RequestMapping(value = \"\", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs() throws ResourceNotFoundException {\n       // currentUser is injected \n       this.getJobs(currentUser);\n}\n</code></pre>\n\n<p>I know I can do that:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/jobs\")\npublic class JobsController {\n\n    @RequestMapping(value = \"\", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(HttpServletRequest request) throws ResourceNotFoundException { \n       String currentUser = null;\n       if (request.getAttribute(\"subject\") != null) {\n           currentUser = request.getAttribute(\"subject\").toString();\n       }\n       this.getJobs(currentUser);\n}\n</code></pre>\n\n<p>But that would require me to add this code at every method in my program, which seems to me, to be a really bad practice.<br>\nIs there a way to achieve what I want?</p>\n\n<p>If the answer do require aspect, a code example will be much appreciated since I only read about it, but never actually did something with aspect.</p>\n\n<p><strong>Update</strong><br>\nThe code i suggested can be simplified using this:</p>\n\n<pre><code>@RestController\n@RequestMapping(\"/api/jobs\")\npublic class JobsController {\n\n    @RequestMapping(value = \"\", method = RequestMethod.GET, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;List&lt;Jobs&gt;&gt; getJobs(@Value(\"#{request.getAttribute('subject')}\" String currentUser) throws ResourceNotFoundException { \n       this.getJobs(currentUser);\n}\n</code></pre>\n\n<p>But still require me to add that parameter at every method.\nCan this parameter be injected to every method somehow?</p>\n"},{"tags":["java","spring-boot","curl"],"comments":[{"owner":{"account_id":2020478,"reputation":30439,"user_id":1806780,"accept_rate":0,"display_name":"Sami Kuhmonen"},"score":0,"creation_date":1690192608,"post_id":76753263,"comment_id":135314166,"body_markdown":"You can’t just split the command by spaces it it’s that exact command. It will split in the middle of the arguments. Have you tried manually splitting it correctly into parts?","body":"You can’t just split the command by spaces it it’s that exact command. It will split in the middle of the arguments. Have you tried manually splitting it correctly into parts?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1690192671,"post_id":76753263,"comment_id":135314180,"body_markdown":"Don&#39;t use split on the arguments to that command. It&#39;s asking for trouble. Go through the parameters carefully and form an array or `List` out of them. It&#39;s perfectly possible to do this in pure Java with the http client API","body":"Don&#39;t use split on the arguments to that command. It&#39;s asking for trouble. Go through the parameters carefully and form an array or <code>List</code> out of them. It&#39;s perfectly possible to do this in pure Java with the http client API"},{"owner":{"account_id":5613556,"reputation":2315,"user_id":4445625,"accept_rate":50,"display_name":"Marc Stroebel"},"score":0,"creation_date":1690192991,"post_id":76753263,"comment_id":135314227,"body_markdown":"try using a java http client like the builtin RestTemplate instead of external  cmdline tools...","body":"try using a java http client like the builtin RestTemplate instead of external  cmdline tools..."},{"owner":{"account_id":24356237,"reputation":349,"user_id":18291356,"display_name":"Serdar"},"score":0,"creation_date":1690193559,"post_id":76753263,"comment_id":135314341,"body_markdown":"@SamiKuhmonen TBH, I haven&#39;t checked as you said but if I won&#39;t use split it returns &quot;error=2, No such file or directory&quot; error.","body":"@SamiKuhmonen TBH, I haven&#39;t checked as you said but if I won&#39;t use split it returns &quot;error=2, No such file or directory&quot; error."},{"owner":{"account_id":24356237,"reputation":349,"user_id":18291356,"display_name":"Serdar"},"score":0,"creation_date":1690193626,"post_id":76753263,"comment_id":135314355,"body_markdown":"@g00se can you give some examples if it&#39;s possible with http client, please? I have tried with that too but I couldn&#39;t send successful delete request with request body","body":"@g00se can you give some examples if it&#39;s possible with http client, please? I have tried with that too but I couldn&#39;t send successful delete request with request body"},{"owner":{"account_id":24356237,"reputation":349,"user_id":18291356,"display_name":"Serdar"},"score":0,"creation_date":1690193651,"post_id":76753263,"comment_id":135314358,"body_markdown":"@MarcStroebel Could you give some examples, please?","body":"@MarcStroebel Could you give some examples, please?"},{"owner":{"account_id":5613556,"reputation":2315,"user_id":4445625,"accept_rate":50,"display_name":"Marc Stroebel"},"score":1,"creation_date":1690195908,"post_id":76753263,"comment_id":135314816,"body_markdown":"@Serdar https://www.baeldung.com/rest-template","body":"@Serdar <a href=\"https://www.baeldung.com/rest-template\" rel=\"nofollow noreferrer\">baeldung.com/rest-template</a>"},{"owner":{"account_id":2020478,"reputation":30439,"user_id":1806780,"accept_rate":0,"display_name":"Sami Kuhmonen"},"score":0,"creation_date":1690374781,"post_id":76753263,"comment_id":135344186,"body_markdown":"@Serdar As I said you have to set the arguments correctly. You need an array of arguments, manually separated. If you just do a split with space you get arguments like `Authorization:` and `Token` instead of `Authorization: Token...`","body":"@Serdar As I said you have to set the arguments correctly. You need an array of arguments, manually separated. If you just do a split with space you get arguments like <code>Authorization:</code> and <code>Token</code> instead of <code>Authorization: Token...</code>"}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690195681,"creation_date":1690195332,"answer_id":76753685,"question_id":76753263,"body_markdown":"I suppose, there may be two problems. The first one can be in curl, to check it you can try another tool like Postman. The second one can be in Spring, and it seems more complicated than the first one. Look at this [answer][1].\r\n\r\nIn my opinion, according to the [specification][2], a payload in the DELETE method has no defined semantics, therefore another implementation of the HTTP standard may reject the DELETE withing a payload. \r\n\r\n&gt; A payload within a DELETE request message has no defined semantics; sending a payload body on a DELETE request might cause some existing implementations to reject the request.\r\n\r\nIf possible, it would be better not to use a payload within this HTTP method.\r\n\r\n  [1]: https://stackoverflow.com/a/25383378/22270964\r\n  [2]: https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.5","title":"I can&#39;t send CURL DELETE request with body in JAVA","body":"<p>I suppose, there may be two problems. The first one can be in curl, to check it you can try another tool like Postman. The second one can be in Spring, and it seems more complicated than the first one. Look at this <a href=\"https://stackoverflow.com/a/25383378/22270964\">answer</a>.</p>\n<p>In my opinion, according to the <a href=\"https://datatracker.ietf.org/doc/html/rfc7231#section-4.3.5\" rel=\"nofollow noreferrer\">specification</a>, a payload in the DELETE method has no defined semantics, therefore another implementation of the HTTP standard may reject the DELETE withing a payload.</p>\n<blockquote>\n<p>A payload within a DELETE request message has no defined semantics; sending a payload body on a DELETE request might cause some existing implementations to reject the request.</p>\n</blockquote>\n<p>If possible, it would be better not to use a payload within this HTTP method.</p>\n"}],"owner":{"account_id":24356237,"reputation":349,"user_id":18291356,"display_name":"Serdar"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":227,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690195681,"creation_date":1690192147,"question_id":76753263,"body_markdown":"I am trying to send DELETE request with body. So, I decided to use CURL to complite this task.\r\n```sh\r\ncurl -X DELETE &quot;URL&quot; -H &quot;Authorization: Token XXX&quot; -H &quot;Content-Type: application/json&quot; -d &quot;ENTITY&quot;\r\n```\r\nWhen I send above command from terminal, I am able to receive below output\r\n\r\n```json\r\n{\r\n    &quot;data&quot;: null,\r\n    &quot;status_code&quot;: &quot;1000&quot;,\r\n    &quot;status_message&quot;: &quot;Success&quot;,\r\n    &quot;timestamp&quot;: &quot;2023-03-23T13:43:20.910098300Z&quot;\r\n}\r\n```\r\n\r\nWhen I try to do same process with Spring boot app, It always fails. It returns empty string to `test` variable. When I debug, I can see that `inputStream`, `process` or `processBuilder` are not null\r\n\r\n```java\r\nString command = &quot;curl -X DELETE ........ &quot;;\r\nProcessBuilder processBuilder = new ProcessBuilder(command.split(&quot; &quot;));\r\nProcess process = processBuilder.start();\r\nInputStream inputStream = process.getInputStream();\r\nString test = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\r\nstatusMessage = new JSONObject(test).get(&quot;status_message&quot;).toString();\r\n```\r\n\r\nI have checked followings and I couldn&#39;t handle the problem;\r\n1. https://stackoverflow.com/questions/53854400/how-to-run-a-curl-command-from-java\r\n2. https://stackoverflow.com/questions/70244602/java-executing-curl-command-not-working-on-some-commands\r\n3. https://stackoverflow.com/questions/2586975/how-to-use-curl-in-java\r\n4. https://stackoverflow.com/questions/50022092/curl-delete-on-java\r\n\r\nBTW, I am not obligated to use `cURL`, if you have any other solutions, please let me know.","title":"I can&#39;t send CURL DELETE request with body in JAVA","body":"<p>I am trying to send DELETE request with body. So, I decided to use CURL to complite this task.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>curl -X DELETE &quot;URL&quot; -H &quot;Authorization: Token XXX&quot; -H &quot;Content-Type: application/json&quot; -d &quot;ENTITY&quot;\n</code></pre>\n<p>When I send above command from terminal, I am able to receive below output</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;data&quot;: null,\n    &quot;status_code&quot;: &quot;1000&quot;,\n    &quot;status_message&quot;: &quot;Success&quot;,\n    &quot;timestamp&quot;: &quot;2023-03-23T13:43:20.910098300Z&quot;\n}\n</code></pre>\n<p>When I try to do same process with Spring boot app, It always fails. It returns empty string to <code>test</code> variable. When I debug, I can see that <code>inputStream</code>, <code>process</code> or <code>processBuilder</code> are not null</p>\n<pre class=\"lang-java prettyprint-override\"><code>String command = &quot;curl -X DELETE ........ &quot;;\nProcessBuilder processBuilder = new ProcessBuilder(command.split(&quot; &quot;));\nProcess process = processBuilder.start();\nInputStream inputStream = process.getInputStream();\nString test = IOUtils.toString(inputStream, StandardCharsets.UTF_8);\nstatusMessage = new JSONObject(test).get(&quot;status_message&quot;).toString();\n</code></pre>\n<p>I have checked followings and I couldn't handle the problem;</p>\n<ol>\n<li><a href=\"https://stackoverflow.com/questions/53854400/how-to-run-a-curl-command-from-java\">How to run a curl command from java?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/70244602/java-executing-curl-command-not-working-on-some-commands\">Java executing curl command not working on some commands</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2586975/how-to-use-curl-in-java\">How to use cURL in Java?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/50022092/curl-delete-on-java\">cURL DELETE on java</a></li>\n</ol>\n<p>BTW, I am not obligated to use <code>cURL</code>, if you have any other solutions, please let me know.</p>\n"},{"tags":["java","logging","log4j"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":1,"creation_date":1689886400,"post_id":76726838,"comment_id":135280793,"body_markdown":"Look into [log aggregation](https://www.startpage.com/do/dsearch?query=log+aggregation&amp;cat=web&amp;pl=opensearch&amp;language=english) What problems did you face when you just used a shared drive? Check also [ask].","body":"Look into <a href=\"https://www.startpage.com/do/dsearch?query=log+aggregation&amp;cat=web&amp;pl=opensearch&amp;language=english\" rel=\"nofollow noreferrer\">log aggregation</a> What problems did you face when you just used a shared drive? Check also <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"answers":[{"tags":[],"owner":{"account_id":29041755,"reputation":1,"user_id":22246477,"display_name":"Utkal Keshari Jena"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1690195012,"creation_date":1689830661,"answer_id":76726893,"question_id":76726838,"body_markdown":"You have to mount one directory for logs so that application generated logs will directly save on mount directory with server host name. Follow these steps:\r\n\r\n 1. Create a directory on a central server to store the logs. For example, you could create a directory called `/var/log/centralized-logs`.\r\nOn each server that is running your application, mount the central log directory. To do this, you can use the following command:\r\n\r\n    `mount -t nfs &lt;central-server-ip&gt;:/var/log/centralized-logs /var/log/centralized-logs`\r\n\r\n 2. In your application&#39;s `log4j2` configuration file, specify the path to the central log directory. For example, if the central log directory is mounted at `/var/log/centralized-logs`, you would add the following line to your log4j2 configuration file:\r\n    \r\n     `appender.file.File = /var/log/centralized-logs/&lt;server-hostname&gt;.log`\r\n\r\n 3. The `&lt;server-hostname&gt;` variable will be replaced with the hostname of the server that is running the application. This will ensure that the logs for each server are saved in a separate file in the central log directory.\r\n\r\n 4. Once you have made the necessary changes, restart your application. Once your application is restarted, the logs will be saved in the central log directory.\r\n\r\n 5. Now, you can access the logs for all of your servers from a single location. This will make it easier for developers and production support teams to troubleshoot problems.\r\n\r\nHere are some additional tips for managing logs:\r\n\r\n - Use a centralized logging system to collect logs from all of your servers. This will make it easier to search and analyze logs.\r\n - Configure your log files to rotate on a regular basis. This will prevent your log files from becoming too large and causing performance problems.\r\n - Use a log monitoring tool to track the activity of your servers. This will help you to identify potential problems before they cause outages.","title":"How to mount one directory between multiple systems to place logs on one location?","body":"<p>You have to mount one directory for logs so that application generated logs will directly save on mount directory with server host name. Follow these steps:</p>\n<ol>\n<li><p>Create a directory on a central server to store the logs. For example, you could create a directory called <code>/var/log/centralized-logs</code>.\nOn each server that is running your application, mount the central log directory. To do this, you can use the following command:</p>\n<p><code>mount -t nfs &lt;central-server-ip&gt;:/var/log/centralized-logs /var/log/centralized-logs</code></p>\n</li>\n<li><p>In your application's <code>log4j2</code> configuration file, specify the path to the central log directory. For example, if the central log directory is mounted at <code>/var/log/centralized-logs</code>, you would add the following line to your log4j2 configuration file:</p>\n<p><code>appender.file.File = /var/log/centralized-logs/&lt;server-hostname&gt;.log</code></p>\n</li>\n<li><p>The <code>&lt;server-hostname&gt;</code> variable will be replaced with the hostname of the server that is running the application. This will ensure that the logs for each server are saved in a separate file in the central log directory.</p>\n</li>\n<li><p>Once you have made the necessary changes, restart your application. Once your application is restarted, the logs will be saved in the central log directory.</p>\n</li>\n<li><p>Now, you can access the logs for all of your servers from a single location. This will make it easier for developers and production support teams to troubleshoot problems.</p>\n</li>\n</ol>\n<p>Here are some additional tips for managing logs:</p>\n<ul>\n<li>Use a centralized logging system to collect logs from all of your servers. This will make it easier to search and analyze logs.</li>\n<li>Configure your log files to rotate on a regular basis. This will prevent your log files from becoming too large and causing performance problems.</li>\n<li>Use a log monitoring tool to track the activity of your servers. This will help you to identify potential problems before they cause outages.</li>\n</ul>\n"}],"owner":{"account_id":15275998,"reputation":7,"user_id":11021711,"display_name":"Saurabh Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"answer_count":1,"score":-2,"last_activity_date":1690195012,"creation_date":1689829857,"question_id":76726838,"body_markdown":"My applications are running on 10 systems and all are generating logs through log4j2.. \r\nWant to mount one directory for logs so that application generated logs will directly save on mount directory with server host name . \r\n\r\nSo that developers and prod support team no need to visit on all servers.. for checking logs. \r\n\r\nMount directory, \r\n\r\nLog4j","title":"How to mount one directory between multiple systems to place logs on one location?","body":"<p>My applications are running on 10 systems and all are generating logs through log4j2..\nWant to mount one directory for logs so that application generated logs will directly save on mount directory with server host name .</p>\n<p>So that developers and prod support team no need to visit on all servers.. for checking logs.</p>\n<p>Mount directory,</p>\n<p>Log4j</p>\n"},{"tags":["java","android","gradle"],"answers":[{"tags":[],"owner":{"account_id":26267089,"reputation":49,"user_id":19937474,"display_name":"viswareddy"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690194208,"creation_date":1690194208,"answer_id":76753537,"question_id":76753458,"body_markdown":" Create separate comparator functions for each sorting criteria.\r\n\r\n   \r\n\r\n     private static final Comparator&lt;DataListItem&gt; DATE_COMPARATOR = (s1, s2) -&gt;\r\n        Long.compare(s1.getInifile().lastModified(), s2.getInifile().lastModified());\r\n    \r\n    private static final Comparator&lt;DataListItem&gt; NAME_COMPARATOR = (s1, s2) -&gt;\r\n        s1.getIniname().compareTo(s2.getIniname());\r\n    \r\n    private static final Comparator&lt;DataListItem&gt; SIZE_COMPARATOR = (s1, s2) -&gt;\r\n        Long.compare(s1.getInifile().length(), s2.getInifile().length());\r\n\r\n    switch (checkedRadioButtonId) {\r\n    case R.id.radioButtonDate:\r\n        Collections.sort(inilistdatalist, DATE_COMPARATOR);\r\n        Collections.sort(FilesHandler.rwiniArr, (s1, s2) -&gt;\r\n            Long.compare(s1.iniFile.lastModified(), s2.iniFile.lastModified()));\r\n        break;\r\n\r\n    case R.id.radioButtonName:\r\n        Collections.sort(inilistdatalist, NAME_COMPARATOR);\r\n        Collections.sort(FilesHandler.rwiniArr, (s1, s2) -&gt;\r\n            s1.iniFile.getName().compareTo(s2.iniFile.getName()));\r\n        break;\r\n\r\n    case R.id.radioButtonSize:\r\n        Collections.sort(inilistdatalist, SIZE_COMPARATOR);\r\n        Collections.sort(FilesHandler.rwiniArr, (s1, s2) -&gt;\r\n            Long.compare(s1.iniFile.length(), s2.iniFile.length()));\r\n        break;\r\n}\r\n\r\nhope this help you.","title":"Gradle error, error: constant expression required","body":"<p>Create separate comparator functions for each sorting criteria.</p>\n<pre><code> private static final Comparator&lt;DataListItem&gt; DATE_COMPARATOR = (s1, s2) -&gt;\n    Long.compare(s1.getInifile().lastModified(), s2.getInifile().lastModified());\n\nprivate static final Comparator&lt;DataListItem&gt; NAME_COMPARATOR = (s1, s2) -&gt;\n    s1.getIniname().compareTo(s2.getIniname());\n\nprivate static final Comparator&lt;DataListItem&gt; SIZE_COMPARATOR = (s1, s2) -&gt;\n    Long.compare(s1.getInifile().length(), s2.getInifile().length());\n\nswitch (checkedRadioButtonId) {\ncase R.id.radioButtonDate:\n    Collections.sort(inilistdatalist, DATE_COMPARATOR);\n    Collections.sort(FilesHandler.rwiniArr, (s1, s2) -&gt;\n        Long.compare(s1.iniFile.lastModified(), s2.iniFile.lastModified()));\n    break;\n\ncase R.id.radioButtonName:\n    Collections.sort(inilistdatalist, NAME_COMPARATOR);\n    Collections.sort(FilesHandler.rwiniArr, (s1, s2) -&gt;\n        s1.iniFile.getName().compareTo(s2.iniFile.getName()));\n    break;\n\ncase R.id.radioButtonSize:\n    Collections.sort(inilistdatalist, SIZE_COMPARATOR);\n    Collections.sort(FilesHandler.rwiniArr, (s1, s2) -&gt;\n        Long.compare(s1.iniFile.length(), s2.iniFile.length()));\n    break;\n</code></pre>\n<p>}</p>\n<p>hope this help you.</p>\n"}],"owner":{"account_id":28123620,"reputation":1,"user_id":21489439,"display_name":"E.A.M"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690194897,"creation_date":1690193572,"question_id":76753458,"body_markdown":"I built apk with version 8.0 gradle.Error reported in the following code\r\n\r\n```java\r\n\r\n\r\nswitch (checkedRadioButtonId) {\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase R.id.radioButtonDate:\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCollections.sort(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinilistdatalist,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(s1, s2) -&gt;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLong.compare(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts1.getInifile().lastModified(),\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts2.getInifile().lastModified()));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCollections.sort(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tFilesHandler.rwiniArr,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(s1, s2) -&gt;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLong.compare(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts1.iniFile.lastModified(),\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts2.iniFile.lastModified()));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase R.id.radioButtonName:\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCollections.sort(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinilistdatalist,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(s1, s2) -&gt; s1.getIniname().compareTo(s2.getIniname()));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCollections.sort(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tFilesHandler.rwiniArr,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(s1, s2) -&gt;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts1.iniFile\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.getName()\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.compareTo(s2.iniFile.getName()));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tcase R.id.radioButtonSize:\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCollections.sort(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tinilistdatalist,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(s1, s2) -&gt;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLong.compare(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts1.getInifile().length(),\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts2.getInifile().length()));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tCollections.sort(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tFilesHandler.rwiniArr,\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(s1, s2) -&gt;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tLong.compare(\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ts1.iniFile.length(), s2.iniFile.length()));\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n```\r\nError message:\r\n\r\n```\r\n\r\n\r\n/storage/emulated/0/AndroidIDEProjects/RWTranslater/app/src/main/java/com/eam/shuangx339/modtranslater/Activity/IniListActivity.java:264: error: constant expression required\r\n\r\n                                      case R.id.radioButtonDate:\r\n\r\n                                               ^\r\n\r\n/storage/emulated/0/AndroidIDEProjects/RWTranslater/app/src/main/java/com/eam/shuangx339/modtranslater/Activity/IniListActivity.java:278: error: constant expression required\r\n\r\n                                      case R.id.radioButtonName:\r\n\r\n                                               ^\r\n\r\n/storage/emulated/0/AndroidIDEProjects/RWTranslater/app/src/main/java/com/eam/shuangx339/modtranslater/Activity/IniListActivity.java:290: error: constant expression required\r\n\r\n                                      case R.id.radioButtonSize:\r\n\r\n                                               ^\r\n```\r\nLet me explain.`radioButtonSize,radioButtonName,radioButtonDate` are my \r\nradiobutton id.They will have unique int values in the R file.The error message says that the case is not followed by a constant expression.I don&#39;t understand.I wonder if this is a special effect of gradle 8.0.If so, what reasonable way should I code to respond to the event?\r\n\r\n\r\nI tried the gradle 7.x version and it seems OK.","title":"Gradle error, error: constant expression required","body":"<p>I built apk with version 8.0 gradle.Error reported in the following code</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n\nswitch (checkedRadioButtonId) {\n\n                                                        case R.id.radioButtonDate:\n\n                                                            Collections.sort(\n\n                                                                inilistdatalist,\n\n                                                                (s1, s2) -&gt;\n\n                                                            Long.compare(\n\n                                                                s1.getInifile().lastModified(),\n\n                                                                s2.getInifile().lastModified()));\n\n                                                            Collections.sort(\n\n                                                                FilesHandler.rwiniArr,\n\n                                                                (s1, s2) -&gt;\n\n                                                            Long.compare(\n\n                                                                s1.iniFile.lastModified(),\n\n                                                                s2.iniFile.lastModified()));\n\n                                                            break;\n\n                                                        case R.id.radioButtonName:\n\n                                                            Collections.sort(\n\n                                                                inilistdatalist,\n\n                                                                (s1, s2) -&gt; s1.getIniname().compareTo(s2.getIniname()));\n\n                                                            Collections.sort(\n\n                                                                FilesHandler.rwiniArr,\n\n                                                                (s1, s2) -&gt;\n\n                                                            s1.iniFile\n\n                                                                .getName()\n\n                                                                .compareTo(s2.iniFile.getName()));\n\n                                                            break;\n\n                                                        case R.id.radioButtonSize:\n\n                                                            Collections.sort(\n\n                                                                inilistdatalist,\n\n                                                                (s1, s2) -&gt;\n\n                                                            Long.compare(\n\n                                                                s1.getInifile().length(),\n\n                                                                s2.getInifile().length()));\n\n                                                            Collections.sort(\n\n                                                                FilesHandler.rwiniArr,\n\n                                                                (s1, s2) -&gt;\n\n                                                            Long.compare(\n\n                                                                s1.iniFile.length(), s2.iniFile.length()));\n\n                                                            break;\n\n                                                    }\n</code></pre>\n<p>Error message:</p>\n<pre><code>\n\n/storage/emulated/0/AndroidIDEProjects/RWTranslater/app/src/main/java/com/eam/shuangx339/modtranslater/Activity/IniListActivity.java:264: error: constant expression required\n\n                                      case R.id.radioButtonDate:\n\n                                               ^\n\n/storage/emulated/0/AndroidIDEProjects/RWTranslater/app/src/main/java/com/eam/shuangx339/modtranslater/Activity/IniListActivity.java:278: error: constant expression required\n\n                                      case R.id.radioButtonName:\n\n                                               ^\n\n/storage/emulated/0/AndroidIDEProjects/RWTranslater/app/src/main/java/com/eam/shuangx339/modtranslater/Activity/IniListActivity.java:290: error: constant expression required\n\n                                      case R.id.radioButtonSize:\n\n                                               ^\n</code></pre>\n<p>Let me explain.<code>radioButtonSize,radioButtonName,radioButtonDate</code> are my\nradiobutton id.They will have unique int values in the R file.The error message says that the case is not followed by a constant expression.I don't understand.I wonder if this is a special effect of gradle 8.0.If so, what reasonable way should I code to respond to the event?</p>\n<p>I tried the gradle 7.x version and it seems OK.</p>\n"},{"tags":["java","javapos"],"comments":[{"owner":{"account_id":543600,"reputation":1014,"user_id":2125723,"accept_rate":80,"display_name":"ryanwebjackson"},"score":0,"creation_date":1690158859,"post_id":76731477,"comment_id":135309991,"body_markdown":"What was the result?","body":"What was the result?"},{"owner":{"account_id":12359629,"reputation":4160,"user_id":9014308,"display_name":"kunif"},"score":0,"creation_date":1690435850,"post_id":76731477,"comment_id":135354084,"body_markdown":"Isn&#39;t it TM-T20III(twenty) instead of TM-T200III(two hundred)? [Thermal line Printer](https://download.epson-biz.com/modules/pos/index.php?page=genre&amp;pcat=3) And isn&#39;t there a sample program in the JavaPOS ADK? [EPSON JavaPOS ADK (for Windows OS)](https://download.epson-biz.com/modules/pos/index.php?page=single_soft&amp;cid=7256&amp;pcat=3&amp;pid=6146), [EPSON JavaPOS ADK (for Linux OS)](https://download.epson-biz.com/modules/pos/index.php?page=single_soft&amp;cid=7290&amp;pcat=3&amp;pid=6146)","body":"Isn&#39;t it TM-T20III(twenty) instead of TM-T200III(two hundred)? <a href=\"https://download.epson-biz.com/modules/pos/index.php?page=genre&amp;pcat=3\" rel=\"nofollow noreferrer\">Thermal line Printer</a> And isn&#39;t there a sample program in the JavaPOS ADK? <a href=\"https://download.epson-biz.com/modules/pos/index.php?page=single_soft&amp;cid=7256&amp;pcat=3&amp;pid=6146\" rel=\"nofollow noreferrer\">EPSON JavaPOS ADK (for Windows OS)</a>, <a href=\"https://download.epson-biz.com/modules/pos/index.php?page=single_soft&amp;cid=7290&amp;pcat=3&amp;pid=6146\" rel=\"nofollow noreferrer\">EPSON JavaPOS ADK (for Linux OS)</a>"}],"owner":{"account_id":19596385,"reputation":27,"user_id":14687335,"display_name":"Sub0Zero1990"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":88,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690194751,"creation_date":1689867174,"question_id":76731477,"body_markdown":"I&#39;m trying to use JavaPOS and making a little program that allows me to print something on the EPSON TM-T200III but i don&#39;t quite know how to do that, here&#39;s what I&#39;ve done so far:\r\n\r\n        try {\r\n    \t\tprinter.open(&quot;POSPrinter&quot;);\r\n\t\t\tprinter.claim(1000);\r\n\t\t\tprinter.setDeviceEnabled(true);\r\n\r\n            String textToPrint = &quot;test&quot;;\r\n\t\t\tprinter.printNormal(POSPrinterConst.PTR_S_RECEIPT, textToPrint);\r\n\r\n            printer.setDeviceEnabled(false);\r\n\t\t\tprinter.release();\r\n\t\t\tprinter.close();\r\n        } catch (JposException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\nand here&#39;s what i get\r\n\r\n    \r\n    jpos/res/jpos.properties file not found\r\n    jpos/res/jpos.properties file not found\r\n    jpos/res/jpos.properties file not found\r\n    jpos.JposException: Service does not exist in loaded JCL registry\r\n    \tat jpos.loader.simple.SimpleServiceManager.createConnection(SimpleServiceManager.java:179)\r\n    \tat jpos.loader.JposServiceLoader.findService(JposServiceLoader.java:154)\r\n    \tat jpos.BaseJposControl.open(BaseJposControl.java:493)\r\n    \tat it.smi.retail.pos.JavaPOSConfig.main(JavaPOSConfig.java:12)\r\n\r\n","title":"Using JavaPOS with an EPSON printer","body":"<p>I'm trying to use JavaPOS and making a little program that allows me to print something on the EPSON TM-T200III but i don't quite know how to do that, here's what I've done so far:</p>\n<pre><code>    try {\n        printer.open(&quot;POSPrinter&quot;);\n        printer.claim(1000);\n        printer.setDeviceEnabled(true);\n\n        String textToPrint = &quot;test&quot;;\n        printer.printNormal(POSPrinterConst.PTR_S_RECEIPT, textToPrint);\n\n        printer.setDeviceEnabled(false);\n        printer.release();\n        printer.close();\n    } catch (JposException e) {\n        e.printStackTrace();\n    }\n</code></pre>\n<p>and here's what i get</p>\n<pre><code>jpos/res/jpos.properties file not found\njpos/res/jpos.properties file not found\njpos/res/jpos.properties file not found\njpos.JposException: Service does not exist in loaded JCL registry\n    at jpos.loader.simple.SimpleServiceManager.createConnection(SimpleServiceManager.java:179)\n    at jpos.loader.JposServiceLoader.findService(JposServiceLoader.java:154)\n    at jpos.BaseJposControl.open(BaseJposControl.java:493)\n    at it.smi.retail.pos.JavaPOSConfig.main(JavaPOSConfig.java:12)\n</code></pre>\n"},{"tags":["java","spring","jdbc","pessimistic-locking"],"comments":[{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1621773702,"post_id":67659473,"comment_id":119591490,"body_markdown":"How do the methods obtain a connection?","body":"How do the methods obtain a connection?"},{"owner":{"account_id":9750349,"reputation":45,"user_id":7228807,"display_name":"ABC"},"score":0,"creation_date":1621774182,"post_id":67659473,"comment_id":119591626,"body_markdown":"javax.sql.DataSource object has been autowired in Repository class, and connection is obtained using javax.sql.DataSource.getConnection(). This is part of the JAR where DAO code resides","body":"javax.sql.DataSource object has been autowired in Repository class, and connection is obtained using javax.sql.DataSource.getConnection(). This is part of the JAR where DAO code resides"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1621774241,"post_id":67659473,"comment_id":119591635,"body_markdown":"In that case, provided that the JARs themselves do not create separate `DataSource`s, you should be good with `@Transactional`","body":"In that case, provided that the JARs themselves do not create separate <code>DataSource</code>s, you should be good with <code>@Transactional</code>"},{"owner":{"account_id":9750349,"reputation":45,"user_id":7228807,"display_name":"ABC"},"score":0,"creation_date":1621774664,"post_id":67659473,"comment_id":119591743,"body_markdown":"@crizzis `@Autowired javax.sql.DataSource` is part of jar itself, apologies in case my above comment didn&#39;t clearly specify that. Will still `@Transactional` work?","body":"@crizzis <code>@Autowired javax.sql.DataSource</code> is part of jar itself, apologies in case my above comment didn&#39;t clearly specify that. Will still <code>@Transactional</code> work?"},{"owner":{"account_id":1100252,"reputation":10087,"user_id":1092818,"display_name":"crizzis"},"score":0,"creation_date":1621774727,"post_id":67659473,"comment_id":119591766,"body_markdown":"Just to clarify: do you have multiple `DataSource` beans or just one?","body":"Just to clarify: do you have multiple <code>DataSource</code> beans or just one?"},{"owner":{"account_id":9750349,"reputation":45,"user_id":7228807,"display_name":"ABC"},"score":0,"creation_date":1621775329,"post_id":67659473,"comment_id":119591918,"body_markdown":"@crizzis This jar is being used from multiple microservices and hence each will have their own `DataSource` beans also same microservice might have multiple instances running and each instance will have their own bean:(","body":"@crizzis This jar is being used from multiple microservices and hence each will have their own <code>DataSource</code> beans also same microservice might have multiple instances running and each instance will have their own bean:("}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89768,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1690193842,"creation_date":1621775176,"answer_id":67660085,"question_id":67659473,"body_markdown":"You&#39;re making a mistake. Using the wrong tool for the job. Transaction levels and FOR UPDATE has the purpose of ensuring data integrity. Period. It it isn&#39;t designed for control flow and if you use it for this, it will bite you in the butt sooner rather than later.\r\n\r\nLet me try to explain what `SELECT FOR UPDATE` is for, so that, when later I tell you that it is most definitely not for what you&#39;re trying to do with it, it is easier to follow.\r\n\r\nImagine a bank. Simple enough. The bank has some ATMs out front and a website where you can see your transactions and transfer money to other accounts.\r\n\r\nImagine you (ABC) and I (Reinier) are trying to fleece the bank some. Here is our plan: We set it up so that you have €1000,- in your account and I have nothing.\r\n\r\nThen, you log into the website from your phone, and start a transfer, transferring €1000,- to my account. But, while you&#39;re doing that, right in the middle, you withdraw €10,- from the ATM.\r\n\r\nIf the bank messed up their transactions, it&#39;s possible you end up with €990,- in your account and I have €1000,- in my account, and we fleeced the bank. This is how that could happen (and if halfway through the example you think: I already know this stuff, I know what FOR UPDATE does! - I&#39;m not so sure you do, read it carefully)\r\n\r\n## ATM code\r\n\r\n```\r\nstartTransaction();\r\nint currentBalance = sql(&quot;SELECT balance FROM account WHERE user = ?&quot;, abc);\r\nif (currentBalance &lt; requestedWithdrawal) throw new InsufficientFundsEx();\r\nsql(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, currentBalance - requestedWithdrawal, abc);\r\ncommit();\r\nmoneyHopper.spitOut(requestedWithdrawal);\r\n```\r\n\r\n## Website code\r\n\r\n```\r\nstartTransaction();\r\nint balanceTo = sql(&quot;SELECT balance FROM account WHERE user = ?&quot;, reinier);\r\nint balanceFrom = sql(&quot;SELECT balance FROM account WHERE user = ?&quot;, abc);\r\nif (transfer &gt; balanceFrom) throw new InsufficientFundsEx();\r\nsql(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, balanceTo + transfer, reinier);\r\nsql(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, balanceFrom - transfer, abc);\r\ncommit();\r\ncontroller.notifyTransferSucceeded();\r\n```\r\n\r\n## How it can go wrong \r\n\r\nThe way it goes wrong is if the `balanceTo` and `balanceFrom` are &#39;locked in&#39;, _then_ the ATM withdrawal goes through, and _then_ the update SQL statements from the website transaction go through (this wipes out the ATM withdrawal, effectively - whatever the ATM spit out is free money), or if the ATM&#39;s balance check locks in, _then_ the transfer goes through, and then the ATM&#39;s update goes through (which gives the recipient, i.e. me their €1000,-, and ensures that the ATM code&#39;s update, setting your balance to 990, is the last thing that happens, giving us €990,- of free money.\r\n\r\n## So what&#39;s the fix? Hint: Not FOR UPDATE\r\n\r\nThe fix is to consider what a transaction __means__. The purpose of transactions is to turn operations into atomic notions. Either both your account is reduced by the transfer amount _and_ mine is raised by the same, _or_ nothing happens.\r\n\r\nIt&#39;s obvious enough with statements that change things (UPDATE and INSERT). It&#39;s a bit more wonky when we talk about reading data. Should those reads be considered part of the transaction?\r\n\r\nOne way to go is to say: No, unless you add `FOR UPDATE` at the end of it all, in which case, yes - i.e. lock those rows only if `FOR UPDATE` is applied until the transaction ends.\r\n\r\n__But that is not the only way to ensure data integrity__.\r\n\r\n## Optimistic locking to the rescue - or rather, to your doom\r\n\r\nA much more common way is called MVCC (MultiVersion Concurrency Control) and is __far__ faster. The idea behind MVCC (also called optimistic locking), is to just assume no clashes ever occur. Nothing is _ever_ locked. Instead, [A] all changes made within a transaction are completely invisible to things running in any other transaction until you commit, and [B] when you `COMMIT` a transaction, the database checks if everything you have done within the span of this transaction still &#39;holds up&#39; - for example, if you updated a row within this transaction that was also modified by another transaction that has committed already, you get an error _when you commit_, not when you ran the UPDATE statement.\r\n\r\nIn this framework, we can still talk about what SELECT even means. This, in java/JDBC, is called the __Transaction Isolation Level__ and is configurable on a DB connection. The best level, the level the bank should be using to avoid this issue, is called the `TransactionLevel.SERIALIZABLE`. Serializable effectively means __everything__ dirties everything else: If during a transaction you read some data, and when you commit, that same SELECT statement would have produced different results because some other transaction modified something, then the COMMIT just fails.\r\n\r\nThey fail with a so-called &#39;RetryException&#39;. This means literally what it says: Just start your transaction over, from the top. It makes sense if you think about that bank example: What WOULD have happened, had the bank done it right and set up serializable transaction isolation level, is that either the ATM machine&#39;s transaction or the transfer transaction would get the retryexception. Assuming the bank wrote their code right and they actually do what the exception tells you to (start over), then they would start over, and that __includes__ re-reading the balances out. No cheating of the bank can occur now.\r\n\r\n__Crucially, in the `SERIALIZABLE` model, locking NEVER occurs, and `FOR UPDATE` does not mean anything at all__.\r\n\r\nThus, usually, FOR UPDATE does literal stone cold nothing, a complete no-op, depending on how the db is setup.\r\n\r\n__`FOR UPDATE` does not mean &#39;lock other transactions that touch this row&#39;. No matter how much you want it to.__\r\n\r\nSome DB implementations, or even some combination of DB engine and connection configuration may be implemented in that fashion, but that is an extremely finicky setup, and your app should include documentation that strongly recommends the operator to never change the db settings, never switch db engines, never update the db engine, never update the JDBC driver, and never mess with the connection settings.\r\n\r\nThat&#39;s the kind of silly caveat you really, really don&#39;t want to put on your code.\r\n\r\nThe solution is to stop buttering your toast with that chainsaw. Even if you think you can manage to get some butter on that toast with it, it&#39;s just not what it was made for, like at all, and we&#39;re all just waiting until you lose a thumb here. Just stop doing it. Get a butterknife, _please_.\r\n\r\nIf you want to have one thread wait for another, don&#39;t use the database, use a lock object. If you want to have one process wait for another, don&#39;t use the database, don&#39;t use a lock object (you can&#39;t; processes don&#39;t share memory); use a file. the new java file IO has an option to make a file atomically (meaning, if the file already exists, throw an exception, otherwise make the file, and do so atomically, meaning if two processes both run this &#39;create atomically new file&#39; code, you have a guarantee that one succeeds and one throws).\r\n\r\nIf you want data integrity and that&#39;s the only reason you wanted pessimistic locking in the first place, stop thinking that way - it&#39;s the DBs job, not your job, to guarantee data integrity. MVCC/Optimistic locking DBs guarantee that the bank will __never__ get fleeced no matter how hard you try with the shenanigans at the top of this answer and nevertheless, pessimistic locking just isn&#39;t involved.\r\n\r\nJDBC itself sucks (intentionally, a bit too much to get into) for &#39;end use&#39; like what you are doing here. Get yourself an abstraction that makes it nice such as JDBI or JOOQ. These tools also have the only proper way to interact with databases, which is that __all DB code must be in a lambda__. That&#39;s because you don&#39;t want to manually handle those retry exceptions, you want your DB access framework to take care of it. This is what the bank code should really look like:\r\n\r\n```\r\ndbAccess.run(db -&gt; {\r\n    int balance = db.sql(&quot;SELECT balance FROM account WHERE user =?&quot;, abc);\r\n    if (balance &lt; requested) throw new InsufficientBalanceEx();\r\n    db.update(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, balance - requested, abc);\r\n    return requested;\r\n};\r\n```\r\n\r\nThis way, the &#39;framework&#39; (the code behind that `run` method) can catch the retryex and just rerun the lambda as often as it needs to. rerunning is tricky - if two threads on a server both cause the other to retry, which is not that hard to do, then you can get into an endless loop where they both restart and both again cause the other to retry, at infinitum. The solution is literally dicethrowing. When retrying, you should roll a random number and wait that many milliseconds, and for every further retry, the range on which you&#39;re rolling should increase. If this sounds dumb to you, know that you&#39;re currently using it: It&#39;s how Ethernet works, too (ethernet uses randomized backoff when collisions occur on the wire). Ethernet won, token ring lost. It&#39;s the exact same principle at work (token ring is pessimistic locking, ethernet is optimistic &#39;eh just try it and detect if it went wrong, then just redo it, with some randomized exponential backoff sprinkled in to ensure you don&#39;t get 2 systems in lock-step forever screwing up the other&#39;s attempt).\r\n\r\n","title":"&quot;Select for update&quot; and update with pessimistic locking","body":"<p>You're making a mistake. Using the wrong tool for the job. Transaction levels and FOR UPDATE has the purpose of ensuring data integrity. Period. It it isn't designed for control flow and if you use it for this, it will bite you in the butt sooner rather than later.</p>\n<p>Let me try to explain what <code>SELECT FOR UPDATE</code> is for, so that, when later I tell you that it is most definitely not for what you're trying to do with it, it is easier to follow.</p>\n<p>Imagine a bank. Simple enough. The bank has some ATMs out front and a website where you can see your transactions and transfer money to other accounts.</p>\n<p>Imagine you (ABC) and I (Reinier) are trying to fleece the bank some. Here is our plan: We set it up so that you have €1000,- in your account and I have nothing.</p>\n<p>Then, you log into the website from your phone, and start a transfer, transferring €1000,- to my account. But, while you're doing that, right in the middle, you withdraw €10,- from the ATM.</p>\n<p>If the bank messed up their transactions, it's possible you end up with €990,- in your account and I have €1000,- in my account, and we fleeced the bank. This is how that could happen (and if halfway through the example you think: I already know this stuff, I know what FOR UPDATE does! - I'm not so sure you do, read it carefully)</p>\n<h2>ATM code</h2>\n<pre><code>startTransaction();\nint currentBalance = sql(&quot;SELECT balance FROM account WHERE user = ?&quot;, abc);\nif (currentBalance &lt; requestedWithdrawal) throw new InsufficientFundsEx();\nsql(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, currentBalance - requestedWithdrawal, abc);\ncommit();\nmoneyHopper.spitOut(requestedWithdrawal);\n</code></pre>\n<h2>Website code</h2>\n<pre><code>startTransaction();\nint balanceTo = sql(&quot;SELECT balance FROM account WHERE user = ?&quot;, reinier);\nint balanceFrom = sql(&quot;SELECT balance FROM account WHERE user = ?&quot;, abc);\nif (transfer &gt; balanceFrom) throw new InsufficientFundsEx();\nsql(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, balanceTo + transfer, reinier);\nsql(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, balanceFrom - transfer, abc);\ncommit();\ncontroller.notifyTransferSucceeded();\n</code></pre>\n<h2>How it can go wrong</h2>\n<p>The way it goes wrong is if the <code>balanceTo</code> and <code>balanceFrom</code> are 'locked in', <em>then</em> the ATM withdrawal goes through, and <em>then</em> the update SQL statements from the website transaction go through (this wipes out the ATM withdrawal, effectively - whatever the ATM spit out is free money), or if the ATM's balance check locks in, <em>then</em> the transfer goes through, and then the ATM's update goes through (which gives the recipient, i.e. me their €1000,-, and ensures that the ATM code's update, setting your balance to 990, is the last thing that happens, giving us €990,- of free money.</p>\n<h2>So what's the fix? Hint: Not FOR UPDATE</h2>\n<p>The fix is to consider what a transaction <strong>means</strong>. The purpose of transactions is to turn operations into atomic notions. Either both your account is reduced by the transfer amount <em>and</em> mine is raised by the same, <em>or</em> nothing happens.</p>\n<p>It's obvious enough with statements that change things (UPDATE and INSERT). It's a bit more wonky when we talk about reading data. Should those reads be considered part of the transaction?</p>\n<p>One way to go is to say: No, unless you add <code>FOR UPDATE</code> at the end of it all, in which case, yes - i.e. lock those rows only if <code>FOR UPDATE</code> is applied until the transaction ends.</p>\n<p><strong>But that is not the only way to ensure data integrity</strong>.</p>\n<h2>Optimistic locking to the rescue - or rather, to your doom</h2>\n<p>A much more common way is called MVCC (MultiVersion Concurrency Control) and is <strong>far</strong> faster. The idea behind MVCC (also called optimistic locking), is to just assume no clashes ever occur. Nothing is <em>ever</em> locked. Instead, [A] all changes made within a transaction are completely invisible to things running in any other transaction until you commit, and [B] when you <code>COMMIT</code> a transaction, the database checks if everything you have done within the span of this transaction still 'holds up' - for example, if you updated a row within this transaction that was also modified by another transaction that has committed already, you get an error <em>when you commit</em>, not when you ran the UPDATE statement.</p>\n<p>In this framework, we can still talk about what SELECT even means. This, in java/JDBC, is called the <strong>Transaction Isolation Level</strong> and is configurable on a DB connection. The best level, the level the bank should be using to avoid this issue, is called the <code>TransactionLevel.SERIALIZABLE</code>. Serializable effectively means <strong>everything</strong> dirties everything else: If during a transaction you read some data, and when you commit, that same SELECT statement would have produced different results because some other transaction modified something, then the COMMIT just fails.</p>\n<p>They fail with a so-called 'RetryException'. This means literally what it says: Just start your transaction over, from the top. It makes sense if you think about that bank example: What WOULD have happened, had the bank done it right and set up serializable transaction isolation level, is that either the ATM machine's transaction or the transfer transaction would get the retryexception. Assuming the bank wrote their code right and they actually do what the exception tells you to (start over), then they would start over, and that <strong>includes</strong> re-reading the balances out. No cheating of the bank can occur now.</p>\n<p><strong>Crucially, in the <code>SERIALIZABLE</code> model, locking NEVER occurs, and <code>FOR UPDATE</code> does not mean anything at all</strong>.</p>\n<p>Thus, usually, FOR UPDATE does literal stone cold nothing, a complete no-op, depending on how the db is setup.</p>\n<p><strong><code>FOR UPDATE</code> does not mean 'lock other transactions that touch this row'. No matter how much you want it to.</strong></p>\n<p>Some DB implementations, or even some combination of DB engine and connection configuration may be implemented in that fashion, but that is an extremely finicky setup, and your app should include documentation that strongly recommends the operator to never change the db settings, never switch db engines, never update the db engine, never update the JDBC driver, and never mess with the connection settings.</p>\n<p>That's the kind of silly caveat you really, really don't want to put on your code.</p>\n<p>The solution is to stop buttering your toast with that chainsaw. Even if you think you can manage to get some butter on that toast with it, it's just not what it was made for, like at all, and we're all just waiting until you lose a thumb here. Just stop doing it. Get a butterknife, <em>please</em>.</p>\n<p>If you want to have one thread wait for another, don't use the database, use a lock object. If you want to have one process wait for another, don't use the database, don't use a lock object (you can't; processes don't share memory); use a file. the new java file IO has an option to make a file atomically (meaning, if the file already exists, throw an exception, otherwise make the file, and do so atomically, meaning if two processes both run this 'create atomically new file' code, you have a guarantee that one succeeds and one throws).</p>\n<p>If you want data integrity and that's the only reason you wanted pessimistic locking in the first place, stop thinking that way - it's the DBs job, not your job, to guarantee data integrity. MVCC/Optimistic locking DBs guarantee that the bank will <strong>never</strong> get fleeced no matter how hard you try with the shenanigans at the top of this answer and nevertheless, pessimistic locking just isn't involved.</p>\n<p>JDBC itself sucks (intentionally, a bit too much to get into) for 'end use' like what you are doing here. Get yourself an abstraction that makes it nice such as JDBI or JOOQ. These tools also have the only proper way to interact with databases, which is that <strong>all DB code must be in a lambda</strong>. That's because you don't want to manually handle those retry exceptions, you want your DB access framework to take care of it. This is what the bank code should really look like:</p>\n<pre><code>dbAccess.run(db -&gt; {\n    int balance = db.sql(&quot;SELECT balance FROM account WHERE user =?&quot;, abc);\n    if (balance &lt; requested) throw new InsufficientBalanceEx();\n    db.update(&quot;UPDATE account SET balance = ? WHERE user = ?&quot;, balance - requested, abc);\n    return requested;\n};\n</code></pre>\n<p>This way, the 'framework' (the code behind that <code>run</code> method) can catch the retryex and just rerun the lambda as often as it needs to. rerunning is tricky - if two threads on a server both cause the other to retry, which is not that hard to do, then you can get into an endless loop where they both restart and both again cause the other to retry, at infinitum. The solution is literally dicethrowing. When retrying, you should roll a random number and wait that many milliseconds, and for every further retry, the range on which you're rolling should increase. If this sounds dumb to you, know that you're currently using it: It's how Ethernet works, too (ethernet uses randomized backoff when collisions occur on the wire). Ethernet won, token ring lost. It's the exact same principle at work (token ring is pessimistic locking, ethernet is optimistic 'eh just try it and detect if it went wrong, then just redo it, with some randomized exponential backoff sprinkled in to ensure you don't get 2 systems in lock-step forever screwing up the other's attempt).</p>\n"}],"owner":{"account_id":9750349,"reputation":45,"user_id":7228807,"display_name":"ABC"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9485,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67660085,"answer_count":1,"score":1,"last_activity_date":1690193842,"creation_date":1621771005,"question_id":67659473,"body_markdown":"I&#39;m trying to implement pessimistic locking using select for update, as I want other threads to wait until the lock on the selected row is released.\r\nThe part that I have understood is after going through multiple threads [Spring JDBC select for update][1] and various similar threads is it is achievable in case select and update are happening within same method and hence they are part of same transaction.\r\n\r\nThe issue in my case is I have a JAR for DAO functionality where in a `selectforUpdate` method is available and a separate update method is available, both method has a finally block which contains\r\n\r\n    resultSet.close();\r\n    statement.close();\r\n    connection.close();\r\n\r\nNow I&#39;m struggling to find out is there a way in which I can use both the methods from outside of the JAR, maybe by annotating my method with `@Transactional` annotation and make it work in some way. So that lock is only released once update method has been executed.\r\n\r\n  [1]: https://stackoverflow.com/questions/56350833/spring-jdbc-select-for-update\r\n","title":"&quot;Select for update&quot; and update with pessimistic locking","body":"<p>I'm trying to implement pessimistic locking using select for update, as I want other threads to wait until the lock on the selected row is released.\nThe part that I have understood is after going through multiple threads <a href=\"https://stackoverflow.com/questions/56350833/spring-jdbc-select-for-update\">Spring JDBC select for update</a> and various similar threads is it is achievable in case select and update are happening within same method and hence they are part of same transaction.</p>\n<p>The issue in my case is I have a JAR for DAO functionality where in a <code>selectforUpdate</code> method is available and a separate update method is available, both method has a finally block which contains</p>\n<pre><code>resultSet.close();\nstatement.close();\nconnection.close();\n</code></pre>\n<p>Now I'm struggling to find out is there a way in which I can use both the methods from outside of the JAR, maybe by annotating my method with <code>@Transactional</code> annotation and make it work in some way. So that lock is only released once update method has been executed.</p>\n"},{"tags":["java","sorting","collections","comparable"],"comments":[{"owner":{"account_id":4534997,"reputation":3603,"user_id":3684449,"accept_rate":50,"display_name":"lance.dolan"},"score":0,"creation_date":1520362421,"post_id":4432774,"comment_id":85281106,"body_markdown":"If it&#39;s possible to use more explicit words in place of &quot;thing&quot; and &quot;way&quot;, then giving good answers will be easier. As it stands, I must respectfully admit I struggled to understand the exact question.","body":"If it&#39;s possible to use more explicit words in place of &quot;thing&quot; and &quot;way&quot;, then giving good answers will be easier. As it stands, I must respectfully admit I struggled to understand the exact question."}],"answers":[{"tags":[],"owner":{"account_id":242372,"reputation":23523,"user_id":513838,"accept_rate":100,"display_name":"jzd"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1292269295,"creation_date":1292269295,"answer_id":4432787,"question_id":4432774,"body_markdown":"You can only have one `compareTo()` method in your class.\r\n\r\nIf you want to sort the same class more than one way, create `Comparator` implementations.","title":"How do I make 2 comparable methods in only one class?","body":"<p>You can only have one <code>compareTo()</code> method in your class.</p>\n\n<p>If you want to sort the same class more than one way, create <code>Comparator</code> implementations.</p>\n"},{"tags":[],"owner":{"account_id":1885,"reputation":137382,"user_id":2598,"accept_rate":93,"display_name":"jjnguy"},"down_vote_count":0,"up_vote_count":67,"is_accepted":true,"score":67,"last_activity_date":1292269705,"creation_date":1292269339,"answer_id":4432795,"question_id":4432774,"body_markdown":"What you need to do is implement a custom [`Comparator`][1].  And then use:\r\n\r\n    Collections.sort(yourList, new CustomComparator&lt;YourClass&gt;());\r\n\r\nSpecifically, you could write: (This will create an Anonymous class that implements `Comparator`.)\r\n\r\n    Collections.sort(yourList, new Comparator&lt;YourClass&gt;(){\r\n        public int compare(YourClass one, YourClass two) {\r\n            // compare using whichever properties of ListType you need\r\n        }\r\n    });\r\n\r\nYou could build these into your class if you like:\r\n\r\n    class YourClass {\r\n    \r\n        static Comparator&lt;YourClass&gt; getAttribute1Comparator() {\r\n            return new Comparator&lt;YourClass&gt;() {\r\n                // compare using attribute 1\r\n            };\r\n        }\r\n    \r\n        static Comparator&lt;YourClass&gt; getAttribute2Comparator() {\r\n            return new Comparator&lt;YourClass&gt;() {\r\n                // compare using attribute 2\r\n            };\r\n        }\r\n    }\r\n\r\nIt could be used like so:\r\n\r\n    Collections.sort(yourList, YourClass.getAttribute2Comparator());\r\n\r\n[1]: http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html","title":"How do I make 2 comparable methods in only one class?","body":"<p>What you need to do is implement a custom <a href=\"http://download.oracle.com/javase/6/docs/api/java/util/Comparator.html\" rel=\"noreferrer\"><code>Comparator</code></a>.  And then use:</p>\n\n<pre><code>Collections.sort(yourList, new CustomComparator&lt;YourClass&gt;());\n</code></pre>\n\n<p>Specifically, you could write: (This will create an Anonymous class that implements <code>Comparator</code>.)</p>\n\n<pre><code>Collections.sort(yourList, new Comparator&lt;YourClass&gt;(){\n    public int compare(YourClass one, YourClass two) {\n        // compare using whichever properties of ListType you need\n    }\n});\n</code></pre>\n\n<p>You could build these into your class if you like:</p>\n\n<pre><code>class YourClass {\n\n    static Comparator&lt;YourClass&gt; getAttribute1Comparator() {\n        return new Comparator&lt;YourClass&gt;() {\n            // compare using attribute 1\n        };\n    }\n\n    static Comparator&lt;YourClass&gt; getAttribute2Comparator() {\n        return new Comparator&lt;YourClass&gt;() {\n            // compare using attribute 2\n        };\n    }\n}\n</code></pre>\n\n<p>It could be used like so:</p>\n\n<pre><code>Collections.sort(yourList, YourClass.getAttribute2Comparator());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49683,"reputation":9264,"user_id":148059,"display_name":"atk"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1690193525,"creation_date":1292269518,"answer_id":4432827,"question_id":4432774,"body_markdown":"If the two methods require the exact same footprint, you may be inappropriately overloading a single class with multiple uses, which would be resolved by fixing your class hierarchy - like instead of using &quot;shape&quot;, subclass it with &quot;oval&quot;, &quot;rectangle&quot;, etc.\r\n\r\nIf subclassing doesn&#39;t make sense, you need to create different comparison classes.  In Java, you often use a Comparator for comparisons.  Create several (or create a configurable comparator):  IsbnComparator, AuthorComparator, etc.\r\n\r\nOh, and the configurable option would be:\r\n\r\n&lt;pre&gt;\r\n BookComparator implements Comparator {\r\n   enum FIELD { AUTHOR, ISBN, ... };\r\n   setSortOrder(int rank, FIELD field){...}\r\n }\r\n&lt;/pre&gt;","title":"How do I make 2 comparable methods in only one class?","body":"<p>If the two methods require the exact same footprint, you may be inappropriately overloading a single class with multiple uses, which would be resolved by fixing your class hierarchy - like instead of using &quot;shape&quot;, subclass it with &quot;oval&quot;, &quot;rectangle&quot;, etc.</p>\n<p>If subclassing doesn't make sense, you need to create different comparison classes.  In Java, you often use a Comparator for comparisons.  Create several (or create a configurable comparator):  IsbnComparator, AuthorComparator, etc.</p>\n<p>Oh, and the configurable option would be:</p>\n<pre>\n BookComparator implements Comparator {\n   enum FIELD { AUTHOR, ISBN, ... };\n   setSortOrder(int rank, FIELD field){...}\n }\n</pre>\n"}],"owner":{"account_id":239936,"reputation":3048,"user_id":509865,"accept_rate":70,"display_name":"Gondim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30457,"favorite_count":0,"down_vote_count":2,"up_vote_count":31,"accepted_answer_id":4432795,"answer_count":3,"score":29,"last_activity_date":1690193525,"creation_date":1292269162,"question_id":4432774,"body_markdown":"I&#39;ve got one class, that I sort it already by one attribute.\r\nNow I need to make another thing, that I need to create another way to sort my data.\r\nHow can I make it, so I can choose between the two methods.\r\nThe only command I know is Collections.sort that will pick up the method compareTo from the class I want to compare its data.\r\n\r\nIs it even possible?","title":"How do I make 2 comparable methods in only one class?","body":"<p>I've got one class, that I sort it already by one attribute.\nNow I need to make another thing, that I need to create another way to sort my data.\nHow can I make it, so I can choose between the two methods.\nThe only command I know is Collections.sort that will pick up the method compareTo from the class I want to compare its data.</p>\n\n<p>Is it even possible?</p>\n"},{"tags":["java","spring-boot","performance","jmeter","performance-testing"],"answers":[{"tags":[],"owner":{"account_id":3460456,"reputation":162728,"user_id":2897748,"display_name":"Dmitri T"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1690193470,"creation_date":1690193470,"answer_id":76753448,"question_id":76753260,"body_markdown":" 1. You can use 4 [Throughput Controllers][1] and give the desired percentage of executions in them:\r\n\r\n    [![enter image description here][2]][2]\r\n 2. You can put the requests under different [Thread Groups][3] and set number of users and/or iterations according to your test scenario:\r\n\r\n    [![enter image description here][4]][4]\r\n 3. You can use [Weighted Switch Controller][5] and provide the desired &quot;weights&quot; for the API endpoints there:\r\n\r\n    [![enter image description here][6]][6]\r\n\r\n\r\n  [1]: https://jmeter.apache.org/usermanual/component_reference.html#Throughput_Controller\r\n  [2]: https://i.stack.imgur.com/b8QVS.png\r\n  [3]: https://jmeter.apache.org/usermanual/component_reference.html#Thread_Group\r\n  [4]: https://i.stack.imgur.com/ZbIJy.png\r\n  [5]: https://www.blazemeter.com/blog/weighted-switch-controller-jmeter\r\n  [6]: https://i.stack.imgur.com/BSUpr.png","title":"Percentage for different APIs in a thread group in jmeter","body":"<ol>\n<li><p>You can use 4 <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#Throughput_Controller\" rel=\"nofollow noreferrer\">Throughput Controllers</a> and give the desired percentage of executions in them:</p>\n<p><a href=\"https://i.stack.imgur.com/b8QVS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b8QVS.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>You can put the requests under different <a href=\"https://jmeter.apache.org/usermanual/component_reference.html#Thread_Group\" rel=\"nofollow noreferrer\">Thread Groups</a> and set number of users and/or iterations according to your test scenario:</p>\n<p><a href=\"https://i.stack.imgur.com/ZbIJy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZbIJy.png\" alt=\"enter image description here\" /></a></p>\n</li>\n<li><p>You can use <a href=\"https://www.blazemeter.com/blog/weighted-switch-controller-jmeter\" rel=\"nofollow noreferrer\">Weighted Switch Controller</a> and provide the desired &quot;weights&quot; for the API endpoints there:</p>\n<p><a href=\"https://i.stack.imgur.com/BSUpr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BSUpr.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n"}],"owner":{"account_id":24057171,"reputation":73,"user_id":18034851,"display_name":"GlidingSwords997"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76753448,"answer_count":1,"score":0,"last_activity_date":1690193470,"creation_date":1690192127,"question_id":76753260,"body_markdown":"I have a thread group in which there are 4 APIs. Now, I want to control the TPS of these APIs. For that, lets say these should be the TPS of these APIs:\r\n\r\n    API#1: 10\r\n    API#2: 20\r\n    API#3: 30\r\n    API#4: 40\r\n\r\nNow, for this total number of requests is 100. hence the percentage of these APIs are 10%, 20%, 30% and 40%. How, can I enable this in my jmeter test plan ?\r\n\r\n","title":"Percentage for different APIs in a thread group in jmeter","body":"<p>I have a thread group in which there are 4 APIs. Now, I want to control the TPS of these APIs. For that, lets say these should be the TPS of these APIs:</p>\n<pre><code>API#1: 10\nAPI#2: 20\nAPI#3: 30\nAPI#4: 40\n</code></pre>\n<p>Now, for this total number of requests is 100. hence the percentage of these APIs are 10%, 20%, 30% and 40%. How, can I enable this in my jmeter test plan ?</p>\n"},{"tags":["java","spring-boot","multipartform-data","webclient","multipartfile"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1690216763,"post_id":76753368,"comment_id":135319411,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":28790287,"reputation":1,"user_id":22049824,"display_name":"Mahdi Daoud"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690193149,"creation_date":1690192944,"question_id":76753368,"body_markdown":"# I&#39;m trying to Send a Multipart File using WebClient : \r\n\r\n        public Mono&lt;UploadReportDto&gt; uploadOffers(MultipartFile file) {\r\n                return this.offerWebClient.getOfferWebClient(WebClient.builder()).post()\r\n                                .uri(&quot;/upload&quot;)\r\n                                .contentType(MediaType.MULTIPART_FORM_DATA)\r\n                                .body(BodyInserters.fromMultipartData(&quot;file&quot;, file))\r\n                                .retrieve()\r\n                                .bodyToMono(UploadReportDto.class);\r\n        }\r\n\r\n\r\n\r\n\r\n\r\n# The Response I get : \r\n\r\n    {\r\n        &quot;timestamp&quot;: &quot;2023-07-24T09:32:12.441+00:00&quot;,\r\n        &quot;status&quot;: 500, \r\n        &quot;error&quot;: &quot;Internal Server Error&quot;,\r\n        &quot;trace&quot;: &quot;org.springframework.core.codec.CodecException: Type definition error: [simple type, class sun.nio.ch.ChannelInputStream]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class sun.nio.ch.ChannelInputStream and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile[\\&quot;inputStream\\&quot;])\r\n    }","title":"Sending CSV file via WebClient : No serializer found for class sun.nio.ch.ChannelInputStream and no properties discovered to create BeanSerializer","body":"<h1>I'm trying to Send a Multipart File using WebClient :</h1>\n<pre><code>    public Mono&lt;UploadReportDto&gt; uploadOffers(MultipartFile file) {\n            return this.offerWebClient.getOfferWebClient(WebClient.builder()).post()\n                            .uri(&quot;/upload&quot;)\n                            .contentType(MediaType.MULTIPART_FORM_DATA)\n                            .body(BodyInserters.fromMultipartData(&quot;file&quot;, file))\n                            .retrieve()\n                            .bodyToMono(UploadReportDto.class);\n    }\n</code></pre>\n<h1>The Response I get :</h1>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-07-24T09:32:12.441+00:00&quot;,\n    &quot;status&quot;: 500, \n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;trace&quot;: &quot;org.springframework.core.codec.CodecException: Type definition error: [simple type, class sun.nio.ch.ChannelInputStream]; nested exception is com.fasterxml.jackson.databind.exc.InvalidDefinitionException: No serializer found for class sun.nio.ch.ChannelInputStream and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationFeature.FAIL_ON_EMPTY_BEANS) (through reference chain: org.springframework.web.multipart.support.StandardMultipartHttpServletRequest$StandardMultipartFile[\\&quot;inputStream\\&quot;])\n}\n</code></pre>\n"},{"tags":["java","spring-boot","junit","microservices","junit5"],"comments":[{"owner":{"account_id":6579550,"reputation":524,"user_id":5084232,"display_name":"Tushar Wasson"},"score":0,"creation_date":1690188181,"post_id":76752718,"comment_id":135313140,"body_markdown":"Make sure your server is running on this port. Please reformat your code in the question. Check property file if you have some other port defined.","body":"Make sure your server is running on this port. Please reformat your code in the question. Check property file if you have some other port defined."}],"answers":[{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690193114,"creation_date":1690192572,"answer_id":76753320,"question_id":76752718,"body_markdown":"The test seems to be written well, but one thing, I suppose, is wrong. Try to delete `WebEnvironment.DEFINED_PORT` in the line `@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)` and rerun your test. By default, `WebEnvironment.MOCK` will be used.\r\n\r\nActually your tests should not be bounded to specific ports because when tests are being ran another application may be running on the same port and this can cause some problems in the future.\r\n\r\nLet me know if it doesn&#39;t work.","title":"org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://localhost:8080/v1/apc&quot;","body":"<p>The test seems to be written well, but one thing, I suppose, is wrong. Try to delete <code>WebEnvironment.DEFINED_PORT</code> in the line <code>@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)</code> and rerun your test. By default, <code>WebEnvironment.MOCK</code> will be used.</p>\n<p>Actually your tests should not be bounded to specific ports because when tests are being ran another application may be running on the same port and this can cause some problems in the future.</p>\n<p>Let me know if it doesn't work.</p>\n"}],"owner":{"account_id":27597790,"reputation":11,"user_id":21063641,"display_name":"Vinod"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1593,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1690193114,"creation_date":1690187817,"question_id":76752718,"body_markdown":"I have a controller Test class like following\r\n\r\n```Java\r\n@ExtendWith(SpringExtension.class)\r\n@ContextConfiguration(classes = {ApiController.class,TableService.class, CommonService.class},\r\n        loader = AnnotationConfigContextLoader.class)\r\n@TestPropertySource(locations = {&quot;classpath:properties/test/application-test.properties&quot;})\r\n@ActiveProfiles(profiles = &quot;test&quot;)\r\n@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)\r\npublic class ApiControllerTest {\r\n\r\n    @Autowired\r\n    private TestRestTemplate testRestTemplate;\r\n    \r\n   @Test\r\n    public void successTypeHttp200Ok() throws JsonParseException, JsonMappingException, IOException {\r\n    \tResponseEntity&lt;String&gt; response = testRestTemplate.\r\n    \t    \t  getForEntity(&quot;/v1/apc?name=test&quot;, String.class);            \r\n    }\r\n\r\n}\r\n```\r\nWhen I run the test I am getting the following exception \r\n```\r\norg.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://localhost:8080/v1/apc&quot;: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\r\n\tat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\r\n\tat org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:361)\r\n\tat org.springframework.boot.test.web.client.TestRestTemplate.getForEntity(TestRestTemplate.java:231)\r\n\tat com.esrx.services.pacRulesEngine.api.RulesApiControllerTest.emptyValueStateCodeBadRequestHttp400Error(RulesApiControllerTest.java:115)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\r\n\tat org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1249)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n\tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n\tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n\tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n\tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\nCaused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\r\n\tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)\r\n\tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)\r\n\tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\r\n\tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\r\n\tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\r\n\tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n\tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\r\n\tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n\tat org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87)\r\n\tat org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\r\n\tat org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\r\n\tat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)\r\n\t... 71 more\r\nCaused by: java.net.ConnectException: Connection refused: connect\r\n\tat java.net.DualStackPlainSocketImpl.connect0(Native Method)\r\n\tat java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\r\n\tat java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\r\n\tat java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\r\n\tat java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\r\n\tat java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\r\n\tat java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\r\n\tat java.net.Socket.connect(Socket.java:589)\r\n\tat org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)\r\n\tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n\t... 84 more\r\n```\r\nCan someone help me out what could be the issue?","title":"org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://localhost:8080/v1/apc&quot;","body":"<p>I have a controller Test class like following</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@ContextConfiguration(classes = {ApiController.class,TableService.class, CommonService.class},\n        loader = AnnotationConfigContextLoader.class)\n@TestPropertySource(locations = {&quot;classpath:properties/test/application-test.properties&quot;})\n@ActiveProfiles(profiles = &quot;test&quot;)\n@SpringBootTest(webEnvironment = WebEnvironment.DEFINED_PORT)\npublic class ApiControllerTest {\n\n    @Autowired\n    private TestRestTemplate testRestTemplate;\n    \n   @Test\n    public void successTypeHttp200Ok() throws JsonParseException, JsonMappingException, IOException {\n        ResponseEntity&lt;String&gt; response = testRestTemplate.\n                  getForEntity(&quot;/v1/apc?name=test&quot;, String.class);            \n    }\n\n}\n</code></pre>\n<p>When I run the test I am getting the following exception</p>\n<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on GET request for &quot;http://localhost:8080/v1/apc&quot;: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect; nested exception is org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:785)\n    at org.springframework.web.client.RestTemplate.execute(RestTemplate.java:711)\n    at org.springframework.web.client.RestTemplate.getForEntity(RestTemplate.java:361)\n    at org.springframework.boot.test.web.client.TestRestTemplate.getForEntity(TestRestTemplate.java:231)\n    at com.esrx.services.pacRulesEngine.api.RulesApiControllerTest.emptyValueStateCodeBadRequestHttp400Error(RulesApiControllerTest.java:115)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:688)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$6(TestMethodTestDescriptor.java:210)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:206)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:131)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:65)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.util.ArrayList.forEach(ArrayList.java:1249)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at java.util.ArrayList.forEach(ArrayList.java:1249)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:38)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$5(NodeTestTask.java:143)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$7(NodeTestTask.java:129)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:127)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:126)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:84)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:32)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:51)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.apache.http.conn.HttpHostConnectException: Connect to localhost:8080 [localhost/127.0.0.1, localhost/0:0:0:0:0:0:0:1] failed: Connection refused: connect\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:156)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:376)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:393)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:236)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:186)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:110)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.springframework.http.client.HttpComponentsClientHttpRequest.executeInternal(HttpComponentsClientHttpRequest.java:87)\n    at org.springframework.http.client.AbstractBufferingClientHttpRequest.executeInternal(AbstractBufferingClientHttpRequest.java:48)\n    at org.springframework.http.client.AbstractClientHttpRequest.execute(AbstractClientHttpRequest.java:66)\n    at org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:776)\n    ... 71 more\nCaused by: java.net.ConnectException: Connection refused: connect\n    at java.net.DualStackPlainSocketImpl.connect0(Native Method)\n    at java.net.DualStackPlainSocketImpl.socketConnect(DualStackPlainSocketImpl.java:79)\n    at java.net.AbstractPlainSocketImpl.doConnect(AbstractPlainSocketImpl.java:350)\n    at java.net.AbstractPlainSocketImpl.connectToAddress(AbstractPlainSocketImpl.java:206)\n    at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:188)\n    at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:172)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:392)\n    at java.net.Socket.connect(Socket.java:589)\n    at org.apache.http.conn.socket.PlainConnectionSocketFactory.connectSocket(PlainConnectionSocketFactory.java:75)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n    ... 84 more\n</code></pre>\n<p>Can someone help me out what could be the issue?</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690190378,"post_id":76752997,"comment_id":135313635,"body_markdown":"All your web requests go through your filter chain. It&#39;s normal behaviour.","body":"All your web requests go through your filter chain. It&#39;s normal behaviour."},{"owner":{"account_id":24029209,"reputation":13,"user_id":18010405,"display_name":"CodingPandaBear"},"score":0,"creation_date":1690190698,"post_id":76752997,"comment_id":135313724,"body_markdown":"@Jorn but how do I make sure that the 404 Error code is returned then? None of my other Controllers (JSON ones) behave that way, that an error cannot be caught by a try-catch block and a selected HTTP Status be returned.","body":"@Jorn but how do I make sure that the 404 Error code is returned then? None of my other Controllers (JSON ones) behave that way, that an error cannot be caught by a try-catch block and a selected HTTP Status be returned."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690191369,"post_id":76752997,"comment_id":135313874,"body_markdown":"Either catch the exception in your endpoint (controller) code and return it there, or register an ExceptionHandler to catch the exception and transform it to the response you want.","body":"Either catch the exception in your endpoint (controller) code and return it there, or register an ExceptionHandler to catch the exception and transform it to the response you want."},{"owner":{"account_id":24029209,"reputation":13,"user_id":18010405,"display_name":"CodingPandaBear"},"score":0,"creation_date":1690193273,"post_id":76752997,"comment_id":135314281,"body_markdown":"I am attempting to catch the exception in the end point.... that&#39;s what the entire question is about.... But having the ENTIRE end point code in a try-catch block does not catch it. This is the issue I have written the question for.","body":"I am attempting to catch the exception in the end point.... that&#39;s what the entire question is about.... But having the ENTIRE end point code in a try-catch block does not catch it. This is the issue I have written the question for."},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690196036,"post_id":76752997,"comment_id":135314843,"body_markdown":"You obviously have to catch the exception from where it&#39;s thrown. The stacktrace should tell you that, and I don&#39;t see any `de.myProject` code on top of it. So, it&#39;s not actually thrown from inside your endpoint.","body":"You obviously have to catch the exception from where it&#39;s thrown. The stacktrace should tell you that, and I don&#39;t see any <code>de.myProject</code> code on top of it. So, it&#39;s not actually thrown from inside your endpoint."},{"owner":{"account_id":24029209,"reputation":13,"user_id":18010405,"display_name":"CodingPandaBear"},"score":0,"creation_date":1690202650,"post_id":76752997,"comment_id":135316273,"body_markdown":"de.myProject is the entire Project, of 15k+ LOC.As written in the question, the Stack Trace points towards the security filter &quot;filterChain.doFilter(request, response);&quot;, not the controller.  The second code snippet is the exact method the Stack Trace points to, it is part of the de.myProject package, as is the first code snipped showing the controller being used.  The controller, which is trying to access the non-existing file, is in a try-catch block, so should not throw the error. It is the only part where the file is attempted to be opened.","body":"de.myProject is the entire Project, of 15k+ LOC.As written in the question, the Stack Trace points towards the security filter &quot;filterChain.doFilter(request, response);&quot;, not the controller.  The second code snippet is the exact method the Stack Trace points to, it is part of the de.myProject package, as is the first code snipped showing the controller being used.  The controller, which is trying to access the non-existing file, is in a try-catch block, so should not throw the error. It is the only part where the file is attempted to be opened."}],"answers":[{"tags":[],"owner":{"account_id":14376658,"reputation":383,"user_id":10384954,"display_name":"Wladimir Diskowski"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690192595,"creation_date":1690192595,"answer_id":76753327,"question_id":76752997,"body_markdown":"Try to add \r\n\r\n\r\n    ...        \r\n        default -&gt; {\r\n                throw new ResponseStatusException(HttpStatus.BAD_REQUEST);\r\n            }\r\n        }\r\n        if (!Files.exists(path)) {\r\n          throw new FileNotFoundException()\r\n        }\r\n        resource = new UrlResource(fileBasePath.toUri());\r\n     ...\r\n`","title":"Spring Boot: io.FileNotFound Exception when returning a file not cought by try - catch block","body":"<p>Try to add</p>\n<pre><code>...        \n    default -&gt; {\n            throw new ResponseStatusException(HttpStatus.BAD_REQUEST);\n        }\n    }\n    if (!Files.exists(path)) {\n      throw new FileNotFoundException()\n    }\n    resource = new UrlResource(fileBasePath.toUri());\n ...\n</code></pre>\n<p>`</p>\n"}],"owner":{"account_id":24029209,"reputation":13,"user_id":18010405,"display_name":"CodingPandaBear"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76753327,"answer_count":1,"score":0,"last_activity_date":1690192595,"creation_date":1690190165,"question_id":76752997,"body_markdown":"I want to return a Zip file from the server.\r\nFor files that are present it works as expected, the file gets returned ans all is fine.\r\nMy issue is for files that do not exist.\r\nHere I want to return an 404-Error, but currently a 500 is returned because the \r\n&quot;java.io.FileNotFoundException : URL [...] cannot be resolved in the file system for checking its content length&quot; Exepction is not cought in the controller.\r\n\r\nHere is my code for the controller:\r\n\r\n```\r\n@GetMapping(&quot;analysis/daily/{year}/{month}/{day}/{mode}&quot;)\r\npublic ResponseEntity&lt;Resource&gt; getDailyAnalysis(\r\n@PathVariable(&quot;year&quot;) int year, \r\n@PathVariable(&quot;month&quot;) int month,\r\n@PathVariable(&quot;day&quot;) int day, \r\n@PathVariable(&quot;mode&quot;) AnalysisSelection type) {\r\n    try {\r\n        Resource resource;\r\n        Path fileBasePath = Path.of(&quot;Analysis&quot;, &quot;ZIP&quot;, &quot;Daily&quot;,\r\n                String.valueOf(year),\r\n                String.valueOf(month),\r\n                String.valueOf(day));\r\n        switch (type) {\r\n            case ByItem -&gt; {\r\n                fileBasePath = fileBasePath.resolve(&quot;SingleItemAnalysis.zip&quot;);\r\n            }\r\n            case ByAuthor -&gt; {\r\n                fileBasePath = fileBasePath.resolve(&quot;Author.zip&quot;);\r\n            }\r\n            case ByType -&gt; {\r\n                fileBasePath = fileBasePath.resolve(&quot;Type.zip&quot;);\r\n            }\r\n            case ByIndustry -&gt; {\r\n                fileBasePath = fileBasePath.resolve(&quot;Industry.zip&quot;);\r\n            }\r\n            default -&gt; {\r\n                throw new ResponseStatusException(HttpStatus.BAD_REQUEST);\r\n            }\r\n        }\r\n        resource = new UrlResource(fileBasePath.toUri());\r\n        return ResponseEntity.ok().contentType(MediaType.parseMediaType(&quot;application/zip&quot;))\r\n                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + resource.getFilename() + &quot;\\&quot;&quot;)\r\n                .body(resource);\r\n    } catch (Exception e) {\r\n        //e.printStackTrace();\r\n        throw new ResponseStatusException(HttpStatus.NOT_FOUND);\r\n    }\r\n\r\n}\r\n```\r\n\r\nWeirdly, the stack trace points towards the Spring Security JWT-Token implementation:\r\nspecifically this line: &quot;filterChain.doFilter(request, response);&quot;\r\n\r\n```\r\n@Override\r\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n    String jwt = getJwtFromRequest(request);\r\n\r\n    if (StringUtils.hasText(jwt) &amp;&amp; jwtTokenProvider.validateToken(jwt)) {\r\n        String mail = jwtTokenProvider.getUserMailFromToken(jwt);\r\n        UserDetails userDetails = appUserDetailedService.loadUserByUsername(mail);\r\n        UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\r\n\r\n        authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n        SecurityContextHolder.getContext().setAuthentication(authentication);\r\n    }\r\n\r\n    filterChain.doFilter(request, response);\r\n}\r\n```\r\n\r\nHere is the entire Stack Trace:\r\n\r\n```\r\n\r\n\r\njava.io.FileNotFoundException: URL [file:/C:/Users/walter/Documents/digitales2go/backend/Analysis/ZIP/Daily/2023/7/18/Author.zip] cannot be resolved in the file system for checking its content length\r\n\r\n        at org.springframework.core.io.AbstractFileResolvingResource.contentLength(AbstractFileResolvingResource.java:240)                                                                             \r\n\r\n        at org.springframework.http.converter.ResourceHttpMessageConverter.getContentLength(ResourceHttpMessageConverter.java:121)\r\n\r\n        at org.springframework.http.converter.ResourceHttpMessageConverter.getContentLength(ResourceHttpMessageConverter.java:45)\r\n\r\n        at org.springframework.http.converter.AbstractHttpMessageConverter.addDefaultHeaders(AbstractHttpMessageConverter.java:260)\r\n\r\n        at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:211)\r\n\r\n        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:293)\r\n\r\n        at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:219)\r\n\r\n        at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)\r\n\r\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:135)\r\n\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\r\n\r\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\r\n\r\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\r\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\r\n\r\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\r\n\r\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\r\n\r\n        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\r\n\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\r\n\r\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\r\n\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\r\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\r\n\r\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\r\n\r\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\r\n\r\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\r\n\r\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n       at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at de.myProject.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:40)\r\n\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\r\n\r\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n\r\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\r\n\r\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\r\n\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\r\n\r\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\r\n\r\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\r\n\r\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\r\n\r\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\r\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\r\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\r\n\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\r\n\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\r\n\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\r\n\r\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\r\n\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\r\n\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\r\n\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\r\n\r\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\r\n\r\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\r\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\r\n\r\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\r\n\r\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\r\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\r\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\n\r\n```\r\n\r\nAny ideas on how  to make sure the proper HTTP error is returned?\r\n\r\nSee code above for details","title":"Spring Boot: io.FileNotFound Exception when returning a file not cought by try - catch block","body":"<p>I want to return a Zip file from the server.\nFor files that are present it works as expected, the file gets returned ans all is fine.\nMy issue is for files that do not exist.\nHere I want to return an 404-Error, but currently a 500 is returned because the\n&quot;java.io.FileNotFoundException : URL [...] cannot be resolved in the file system for checking its content length&quot; Exepction is not cought in the controller.</p>\n<p>Here is my code for the controller:</p>\n<pre><code>@GetMapping(&quot;analysis/daily/{year}/{month}/{day}/{mode}&quot;)\npublic ResponseEntity&lt;Resource&gt; getDailyAnalysis(\n@PathVariable(&quot;year&quot;) int year, \n@PathVariable(&quot;month&quot;) int month,\n@PathVariable(&quot;day&quot;) int day, \n@PathVariable(&quot;mode&quot;) AnalysisSelection type) {\n    try {\n        Resource resource;\n        Path fileBasePath = Path.of(&quot;Analysis&quot;, &quot;ZIP&quot;, &quot;Daily&quot;,\n                String.valueOf(year),\n                String.valueOf(month),\n                String.valueOf(day));\n        switch (type) {\n            case ByItem -&gt; {\n                fileBasePath = fileBasePath.resolve(&quot;SingleItemAnalysis.zip&quot;);\n            }\n            case ByAuthor -&gt; {\n                fileBasePath = fileBasePath.resolve(&quot;Author.zip&quot;);\n            }\n            case ByType -&gt; {\n                fileBasePath = fileBasePath.resolve(&quot;Type.zip&quot;);\n            }\n            case ByIndustry -&gt; {\n                fileBasePath = fileBasePath.resolve(&quot;Industry.zip&quot;);\n            }\n            default -&gt; {\n                throw new ResponseStatusException(HttpStatus.BAD_REQUEST);\n            }\n        }\n        resource = new UrlResource(fileBasePath.toUri());\n        return ResponseEntity.ok().contentType(MediaType.parseMediaType(&quot;application/zip&quot;))\n                .header(HttpHeaders.CONTENT_DISPOSITION, &quot;attachment; filename=\\&quot;&quot; + resource.getFilename() + &quot;\\&quot;&quot;)\n                .body(resource);\n    } catch (Exception e) {\n        //e.printStackTrace();\n        throw new ResponseStatusException(HttpStatus.NOT_FOUND);\n    }\n\n}\n</code></pre>\n<p>Weirdly, the stack trace points towards the Spring Security JWT-Token implementation:\nspecifically this line: &quot;filterChain.doFilter(request, response);&quot;</p>\n<pre><code>@Override\nprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n    String jwt = getJwtFromRequest(request);\n\n    if (StringUtils.hasText(jwt) &amp;&amp; jwtTokenProvider.validateToken(jwt)) {\n        String mail = jwtTokenProvider.getUserMailFromToken(jwt);\n        UserDetails userDetails = appUserDetailedService.loadUserByUsername(mail);\n        UsernamePasswordAuthenticationToken authentication = new UsernamePasswordAuthenticationToken(userDetails, null, userDetails.getAuthorities());\n\n        authentication.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n        SecurityContextHolder.getContext().setAuthentication(authentication);\n    }\n\n    filterChain.doFilter(request, response);\n}\n</code></pre>\n<p>Here is the entire Stack Trace:</p>\n<pre><code>\n\njava.io.FileNotFoundException: URL [file:/C:/Users/walter/Documents/digitales2go/backend/Analysis/ZIP/Daily/2023/7/18/Author.zip] cannot be resolved in the file system for checking its content length\n\n        at org.springframework.core.io.AbstractFileResolvingResource.contentLength(AbstractFileResolvingResource.java:240)                                                                             \n\n        at org.springframework.http.converter.ResourceHttpMessageConverter.getContentLength(ResourceHttpMessageConverter.java:121)\n\n        at org.springframework.http.converter.ResourceHttpMessageConverter.getContentLength(ResourceHttpMessageConverter.java:45)\n\n        at org.springframework.http.converter.AbstractHttpMessageConverter.addDefaultHeaders(AbstractHttpMessageConverter.java:260)\n\n        at org.springframework.http.converter.AbstractHttpMessageConverter.write(AbstractHttpMessageConverter.java:211)\n\n        at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodProcessor.writeWithMessageConverters(AbstractMessageConverterMethodProcessor.java:293)\n\n        at org.springframework.web.servlet.mvc.method.annotation.HttpEntityMethodProcessor.handleReturnValue(HttpEntityMethodProcessor.java:219)\n\n        at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)\n\n        at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:135)\n\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n\n        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n\n        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n\n        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1067)\n\n        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:963)\n\n        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n\n        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:655)\n\n        at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:764)\n\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:227)\n\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n\n        at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)\n\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:111)\n\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:327)\n\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:115)\n\n        at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:81)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:122)\n\n        at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:116)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:126)\n\n        at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:81)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:109)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:149)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n       at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at de.myProject.security.jwt.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:40)\n\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:103)\n\n        at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:89)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n\n        at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:110)\n\n        at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:80)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:55)\n\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n\n        at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:336)\n\n        at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:211)\n\n        at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:183)\n\n        at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:354)\n\n        at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267)\n\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n\n        at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n\n        at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:189)\n\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:162)\n\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197)\n\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)\n\n        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:541)\n\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:135)\n\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)\n\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:360)\n\n        at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:399)\n\n        at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n\n        at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:890)\n\n        at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743)\n\n        at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n\n        at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n\n        at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n\n        at java.base/java.lang.Thread.run(Thread.java:833)\n\n</code></pre>\n<p>Any ideas on how  to make sure the proper HTTP error is returned?</p>\n<p>See code above for details</p>\n"},{"tags":["java","spring","spring-boot","rest","resttemplate"],"comments":[{"owner":{"account_id":2712514,"reputation":10118,"user_id":2340612,"accept_rate":83,"display_name":"user2340612"},"score":0,"creation_date":1690199444,"post_id":76753322,"comment_id":135315504,"body_markdown":"have you tried inspecting what is sent in the request body? `jsonBody` is a `JSONObject`, so Spring will try to use an `HttpMessageConverter` to convert it to a `String`. Also, try to create your request with `new HttpEntity&lt;&gt;(jsonBody.toString(), headers);`","body":"have you tried inspecting what is sent in the request body? <code>jsonBody</code> is a <code>JSONObject</code>, so Spring will try to use an <code>HttpMessageConverter</code> to convert it to a <code>String</code>. Also, try to create your request with <code>new HttpEntity&lt;&gt;(jsonBody.toString(), headers);</code>"},{"owner":{"account_id":26909570,"reputation":23,"user_id":20485378,"display_name":"Splatted I0I"},"score":0,"creation_date":1690267177,"post_id":76753322,"comment_id":135325370,"body_markdown":"Thanks for the reply. When i output the request body it seems to be in JSON format:\n{&quot;data&quot;:[{&quot;size&quot;:&quot;45&quot;,&quot;color&quot;:&quot;Green&quot;,&quot;ext_article_nr&quot;:&quot;e001&quot;,&quot;intern_art_nr&quot;:&quot;i001&quot;,&quot;ean_numeric&quot;:420,&quot;article_name&quot;:&quot;Flip Flops&quot;,&quot;season&quot;:&quot;Summer&quot;,&quot;brand&quot;:&quot;Gucci&quot;,&quot;group&quot;:&quot;No Group&quot;,&quot;article_link&quot;:&quot;http://dummyimage.com/102x100.png/dddddd/000000&quot;}],&quot;total_count&quot;:8,&quot;count&quot;:1}","body":"Thanks for the reply. When i output the request body it seems to be in JSON format: {&quot;data&quot;:[{&quot;size&quot;:&quot;45&quot;,&quot;color&quot;:&quot;Green&quot;,&quot;ext_article_nr&quot;:&quot;e001&zwnj;&#8203;&quot;,&quot;intern_art_nr&quot;:&quot;i&zwnj;&#8203;001&quot;,&quot;ean_numeric&quot;:4&zwnj;&#8203;20,&quot;article_name&quot;:&quot;F&zwnj;&#8203;lip Flops&quot;,&quot;season&quot;:&quot;Summer&quot;,&quot;brand&quot;:&quot;Gucci&quot;,&quot;group&quot;:&quot;No Group&quot;,&quot;article_link&quot;:&quot;<a href=\"http://dummyimage.com/102x100.png/dddddd/000000\" rel=\"nofollow noreferrer\">dummyimage.com/102x100.png/dddddd/000&zwnj;&#8203;000</a>&quot;}],&quot;total_count&quot;&zwnj;&#8203;:8,&quot;count&quot;:1}"}],"owner":{"account_id":26909570,"reputation":23,"user_id":20485378,"display_name":"Splatted I0I"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690192580,"creation_date":1690192580,"question_id":76753322,"body_markdown":"Im trying to call a POST Endpoint that requires an **API-Key** using RestTemplate but i keep receiving a **403 Forbidden** HttpClientErrorException. GET with the same authorization headers works fine so I think the API-Key auth works. \r\nThe only time I get a 403 on the same endpoint using Postman is if I don&#39;t send a body but when I output the HttpEntities body it&#39;s not null. \r\nMy only guess is that I made a mistake with the **HttpEntity** and the **restTemplate.exchange** somehow doesn&#39;t send a body: \r\n\r\n    Heres the code: \r\n    \r\n        package at.acl.articledata.connector.smokeTest;\r\n    \r\n    \r\n    import at.acl.articledata.connector.pojos.request.Article;\r\n    import com.fasterxml.jackson.databind.util.JSONPObject;\r\n    import io.swagger.v3.core.util.Json;\r\n    import jakarta.annotation.PostConstruct;\r\n    import org.apache.coyote.Response;\r\n    import org.json.JSONArray;\r\n    import org.json.JSONObject;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.http.*;\r\n    import org.springframework.stereotype.Component;\r\n    import org.springframework.web.client.RestTemplate;\r\n    \r\n    \r\n    import java.math.BigDecimal;\r\n    import java.util.Collections;\r\n    \r\n    @Component\r\n    public class SmokeTest {\r\n    \r\n        @Autowired\r\n        RestTemplate restTemplate = new RestTemplate();\r\n    \r\n        @PostConstruct\r\n        private void floodDatabase(){\r\n            HttpHeaders headers = new HttpHeaders();\r\n            headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n            headers.add(&quot;X-API-KEY&quot;, &quot;myApiKey&quot;);\r\n    \r\n            JSONObject jsonArticle = new JSONObject();\r\n            jsonArticle.put(&quot;ext_article_nr&quot;, &quot;e001&quot;);\r\n            jsonArticle.put(&quot;ean_numeric&quot;, BigDecimal.valueOf(420));\r\n            jsonArticle.put(&quot;intern_art_nr&quot;, &quot;i001&quot;);\r\n            jsonArticle.put(&quot;article_name&quot;, &quot;Flip Flops&quot;);\r\n            jsonArticle.put(&quot;size&quot;, &quot;45&quot;);\r\n            jsonArticle.put(&quot;color&quot;, &quot;Green&quot;);\r\n            jsonArticle.put(&quot;group&quot;, &quot;No Group&quot;);\r\n            jsonArticle.put(&quot;brand&quot;, &quot;Gucci&quot;);\r\n            jsonArticle.put(&quot;season&quot;, &quot;Summer&quot;);\r\n            jsonArticle.put(&quot;article_link&quot;, &quot;http://dummyimage.com/102x100.png/dddddd/000000&quot;);\r\n    \r\n            JSONArray jsonArticleArray = new JSONArray();\r\n            jsonArticleArray.put(jsonArticle);\r\n    \r\n            JSONObject jsonBody = new JSONObject();\r\n            jsonBody.put(&quot;count&quot;, 1);\r\n            jsonBody.put(&quot;total_count&quot;, 8);\r\n            jsonBody.put(&quot;data&quot;, jsonArticleArray);\r\n    \r\n            HttpEntity&lt;JSONObject&gt; request = new HttpEntity&lt;&gt;(jsonBody, headers);\r\n    \r\n            ResponseEntity&lt;String&gt; response = restTemplate.exchange(&quot;correctServerIP&quot;, HttpMethod.POST, request, String.class);\r\n            System.out.println(&quot;Post Response: &quot; + response);\r\n        }\r\n    }\r\n\r\nAny help would be appreciated\r\n","title":"RestTemplate POST 403 response but HTTPEntity body is not null","body":"<p>Im trying to call a POST Endpoint that requires an <strong>API-Key</strong> using RestTemplate but i keep receiving a <strong>403 Forbidden</strong> HttpClientErrorException. GET with the same authorization headers works fine so I think the API-Key auth works.\nThe only time I get a 403 on the same endpoint using Postman is if I don't send a body but when I output the HttpEntities body it's not null.\nMy only guess is that I made a mistake with the <strong>HttpEntity</strong> and the <strong>restTemplate.exchange</strong> somehow doesn't send a body:</p>\n<pre><code>Heres the code: \n\n    package at.acl.articledata.connector.smokeTest;\n\n\nimport at.acl.articledata.connector.pojos.request.Article;\nimport com.fasterxml.jackson.databind.util.JSONPObject;\nimport io.swagger.v3.core.util.Json;\nimport jakarta.annotation.PostConstruct;\nimport org.apache.coyote.Response;\nimport org.json.JSONArray;\nimport org.json.JSONObject;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.http.*;\nimport org.springframework.stereotype.Component;\nimport org.springframework.web.client.RestTemplate;\n\n\nimport java.math.BigDecimal;\nimport java.util.Collections;\n\n@Component\npublic class SmokeTest {\n\n    @Autowired\n    RestTemplate restTemplate = new RestTemplate();\n\n    @PostConstruct\n    private void floodDatabase(){\n        HttpHeaders headers = new HttpHeaders();\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n        headers.add(&quot;X-API-KEY&quot;, &quot;myApiKey&quot;);\n\n        JSONObject jsonArticle = new JSONObject();\n        jsonArticle.put(&quot;ext_article_nr&quot;, &quot;e001&quot;);\n        jsonArticle.put(&quot;ean_numeric&quot;, BigDecimal.valueOf(420));\n        jsonArticle.put(&quot;intern_art_nr&quot;, &quot;i001&quot;);\n        jsonArticle.put(&quot;article_name&quot;, &quot;Flip Flops&quot;);\n        jsonArticle.put(&quot;size&quot;, &quot;45&quot;);\n        jsonArticle.put(&quot;color&quot;, &quot;Green&quot;);\n        jsonArticle.put(&quot;group&quot;, &quot;No Group&quot;);\n        jsonArticle.put(&quot;brand&quot;, &quot;Gucci&quot;);\n        jsonArticle.put(&quot;season&quot;, &quot;Summer&quot;);\n        jsonArticle.put(&quot;article_link&quot;, &quot;http://dummyimage.com/102x100.png/dddddd/000000&quot;);\n\n        JSONArray jsonArticleArray = new JSONArray();\n        jsonArticleArray.put(jsonArticle);\n\n        JSONObject jsonBody = new JSONObject();\n        jsonBody.put(&quot;count&quot;, 1);\n        jsonBody.put(&quot;total_count&quot;, 8);\n        jsonBody.put(&quot;data&quot;, jsonArticleArray);\n\n        HttpEntity&lt;JSONObject&gt; request = new HttpEntity&lt;&gt;(jsonBody, headers);\n\n        ResponseEntity&lt;String&gt; response = restTemplate.exchange(&quot;correctServerIP&quot;, HttpMethod.POST, request, String.class);\n        System.out.println(&quot;Post Response: &quot; + response);\n    }\n}\n</code></pre>\n<p>Any help would be appreciated</p>\n"},{"tags":["java","apache-flink","flink-streaming","djl"],"answers":[{"tags":[],"owner":{"account_id":21886042,"reputation":1703,"user_id":16173669,"display_name":"Martijn Visser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690192425,"creation_date":1690192425,"answer_id":76753295,"question_id":76732831,"body_markdown":"You have dependencies in here which don&#39;t make a lot of sense (like `flink-shaded-asm-9`, `flink-shaded-guava`, `flink-rpc-core` etc). On https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/configuration/overview/ is explained what you need to have in there. \r\n\r\nIn order to run a DataStream API application, I would only expect:\r\n\r\n```\r\n        &lt;!-- These dependencies are provided, because they should not be packaged into the JAR file. --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n            &lt;artifactId&gt;flink-streaming-java&lt;/artifactId&gt;\r\n            &lt;version&gt;${flink.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n            &lt;artifactId&gt;flink-clients&lt;/artifactId&gt;\r\n            &lt;version&gt;${flink.version}&lt;/version&gt;\r\n            &lt;scope&gt;provided&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nThese are also the dependencies if you use the quickstart example. ","title":"org.apache.flink.runtime.rpc.exceptions.RpcLoaderException: Could not load RpcSystem","body":"<p>You have dependencies in here which don't make a lot of sense (like <code>flink-shaded-asm-9</code>, <code>flink-shaded-guava</code>, <code>flink-rpc-core</code> etc). On <a href=\"https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/configuration/overview/\" rel=\"nofollow noreferrer\">https://nightlies.apache.org/flink/flink-docs-release-1.17/docs/dev/configuration/overview/</a> is explained what you need to have in there.</p>\n<p>In order to run a DataStream API application, I would only expect:</p>\n<pre><code>        &lt;!-- These dependencies are provided, because they should not be packaged into the JAR file. --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-streaming-java&lt;/artifactId&gt;\n            &lt;version&gt;${flink.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-clients&lt;/artifactId&gt;\n            &lt;version&gt;${flink.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>These are also the dependencies if you use the quickstart example.</p>\n"}],"owner":{"account_id":10631702,"reputation":347,"user_id":7829642,"display_name":"Taras Danylchenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":215,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690192425,"creation_date":1689878288,"question_id":76732831,"body_markdown":"Im trying to run this example [Sentence Encoder][1] with apach flink v. 1.17.0\r\n&lt;br&gt; But when i start app i get error &lt;br&gt;\r\n\r\n    Exception in thread &quot;main&quot; org.apache.flink.runtime.rpc.exceptions.RpcLoaderException: Could not load RpcSystem.\r\n    \tat org.apache.flink.runtime.rpc.RpcSystem.load(RpcSystem.java:106)\r\n    \tat org.apache.flink.runtime.minicluster.MiniCluster.lambda$new$0(MiniCluster.java:253)\r\n    \tat org.apache.flink.runtime.minicluster.MiniCluster.start(MiniCluster.java:339)\r\n    \tat org.apache.flink.client.program.PerJobMiniClusterFactory.submitJob(PerJobMiniClusterFactory.java:77)\r\n   \r\n\r\nDont understand why it cause, even if simple text server started by ncat(on WIN).&lt;br&gt;\r\nMy pom.xml is &lt;br&gt;\r\n\r\n\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;ai.djl&lt;/groupId&gt;\r\n                &lt;artifactId&gt;api&lt;/artifactId&gt;\r\n                &lt;version&gt;0.23.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-streaming-java&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-java&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-runtime&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-shaded-asm-9&lt;/artifactId&gt;\r\n                &lt;version&gt;9.5-17.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-metrics-core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-shaded-guava&lt;/artifactId&gt;\r\n                &lt;version&gt;30.1.1-jre-16.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-clients&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-rpc-core&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n                &lt;scope&gt;provided&lt;/scope&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-optimizer&lt;/artifactId&gt;\r\n                &lt;version&gt;1.17.1&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n                &lt;artifactId&gt;flink-shaded-netty&lt;/artifactId&gt;\r\n                &lt;version&gt;4.1.91.Final-17.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.esotericsoftware&lt;/groupId&gt;\r\n                &lt;artifactId&gt;kryo&lt;/artifactId&gt;\r\n                &lt;version&gt;5.5.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n                &lt;version&gt;2.0.7&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n                &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\r\n                &lt;version&gt;3.12.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n\r\nIt looks like something new as exception cause i dont found any theme like about this one.&lt;br&gt;\r\nIn debug mode it fails when tried to proceed **Iterator&lt;RpcSystemLoader&gt; iterator = ServiceLoader.load(RpcSystemLoader.class).iterator();** in RpcSystem class\r\n\r\n  [1]: https://github.com/deepjavalibrary/djl-demo/blob/master/apache-flink/sentence_embedding/src/main/java/com/example/SentenceEncoder.java","title":"org.apache.flink.runtime.rpc.exceptions.RpcLoaderException: Could not load RpcSystem","body":"<p>Im trying to run this example <a href=\"https://github.com/deepjavalibrary/djl-demo/blob/master/apache-flink/sentence_embedding/src/main/java/com/example/SentenceEncoder.java\" rel=\"nofollow noreferrer\">Sentence Encoder</a> with apach flink v. 1.17.0\n<br> But when i start app i get error <br></p>\n<pre><code>Exception in thread &quot;main&quot; org.apache.flink.runtime.rpc.exceptions.RpcLoaderException: Could not load RpcSystem.\n    at org.apache.flink.runtime.rpc.RpcSystem.load(RpcSystem.java:106)\n    at org.apache.flink.runtime.minicluster.MiniCluster.lambda$new$0(MiniCluster.java:253)\n    at org.apache.flink.runtime.minicluster.MiniCluster.start(MiniCluster.java:339)\n    at org.apache.flink.client.program.PerJobMiniClusterFactory.submitJob(PerJobMiniClusterFactory.java:77)\n</code></pre>\n<p>Dont understand why it cause, even if simple text server started by ncat(on WIN).<br>\nMy pom.xml is <br></p>\n<pre><code>    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ai.djl&lt;/groupId&gt;\n            &lt;artifactId&gt;api&lt;/artifactId&gt;\n            &lt;version&gt;0.23.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-streaming-java&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-core&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-java&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-runtime&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-shaded-asm-9&lt;/artifactId&gt;\n            &lt;version&gt;9.5-17.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-metrics-core&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-shaded-guava&lt;/artifactId&gt;\n            &lt;version&gt;30.1.1-jre-16.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-clients&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-rpc-core&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-optimizer&lt;/artifactId&gt;\n            &lt;version&gt;1.17.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n            &lt;artifactId&gt;flink-shaded-netty&lt;/artifactId&gt;\n            &lt;version&gt;4.1.91.Final-17.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.esotericsoftware&lt;/groupId&gt;\n            &lt;artifactId&gt;kryo&lt;/artifactId&gt;\n            &lt;version&gt;5.5.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>It looks like something new as exception cause i dont found any theme like about this one.<br>\nIn debug mode it fails when tried to proceed <strong>Iterator iterator = ServiceLoader.load(RpcSystemLoader.class).iterator();</strong> in RpcSystem class</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":6875395,"reputation":1037,"user_id":5284011,"display_name":"JohnXF"},"score":0,"creation_date":1689767804,"post_id":76720950,"comment_id":135259310,"body_markdown":"Are the tomcat and the working java application running on the same machine? If not, then is it a connectivity issue from the host to the DB server? Or perhaps it is a configuration issue. How are you getting the connection string, username, etc. into the java code? Via config, ENV or hard coded? Is there an issue with something there?","body":"Are the tomcat and the working java application running on the same machine? If not, then is it a connectivity issue from the host to the DB server? Or perhaps it is a configuration issue. How are you getting the connection string, username, etc. into the java code? Via config, ENV or hard coded? Is there an issue with something there?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1689769773,"post_id":76720950,"comment_id":135259785,"body_markdown":"*Debugging the JDBC code, the values are all correct (jdbc connection string, user, and password)* What&#39;s the value of the first of these?","body":"<i>Debugging the JDBC code, the values are all correct (jdbc connection string, user, and password)</i> What&#39;s the value of the first of these?"},{"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"score":0,"creation_date":1690197265,"post_id":76720950,"comment_id":135315078,"body_markdown":"Issue is resolved. Was just a subtle firewall configuration item.","body":"Issue is resolved. Was just a subtle firewall configuration item."}],"owner":{"account_id":6632648,"reputation":525,"user_id":5120843,"accept_rate":40,"display_name":"Morkus"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690192354,"creation_date":1689767016,"question_id":76720950,"body_markdown":"I have a SpringBoot app that&#39;s using Connection Pooling. Thanks to Tim for that suggestion.\r\n\r\nWhen I run this app inside Tomcat normally (that is, not in debug mode), it all works great. Deploys, etc.\r\n\r\nBut, if I try to run the app in debug mode (catalina.sh jpda start), it fails with:\r\n\r\n    23-Jul-2023 10:18:11.906 SEVERE [main] org.apache.tomcat.jdbc.pool.ConnectionPool.init Unable to create initial connections of pool.\r\n    com.filemaker.jdbc.FMSQLException: [FileMaker][FileMaker JDBC] Connection refused: Bad file descriptor\r\n    at com.filemaker.jdbc1.CommonJ1Connection.openConnection(Unknown Source)\r\n    at com.filemaker.jdbc.Driver.connect(Unknown Source)\r\n    at org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:346)\r\n    at org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:227)\r\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:775)\r\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:703)\r\n    at org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:502)\r\n    .\r\n    .\r\n    .\r\n    Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;webMvcMetricsFilter&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method &#39;webMvcMetricsFilter&#39; parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;simpleMeterRegistry&#39; defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is java.lang.RuntimeException: com.filemaker.jdbc.FMSQLException: [FileMaker][FileMaker JDBC] Connection refused: Bad file descriptor\r\n\r\nThen, if I go back into the web app and change the JDBC from FileMaker to MySQL or to SQL Server, debug works fine. No errors.\r\n\r\nCan I assume from these tests that there&#39;s something goofy going on with this Claris, Type III, JDBC driver?\r\n\r\nI&#39;m on the latest version of SpringBoot 2.x, Java 17. ","title":"JDBC in Tomcat - Why getting &quot;Connection Refused Bad File Descriptor&quot;?","body":"<p>I have a SpringBoot app that's using Connection Pooling. Thanks to Tim for that suggestion.</p>\n<p>When I run this app inside Tomcat normally (that is, not in debug mode), it all works great. Deploys, etc.</p>\n<p>But, if I try to run the app in debug mode (catalina.sh jpda start), it fails with:</p>\n<pre><code>23-Jul-2023 10:18:11.906 SEVERE [main] org.apache.tomcat.jdbc.pool.ConnectionPool.init Unable to create initial connections of pool.\ncom.filemaker.jdbc.FMSQLException: [FileMaker][FileMaker JDBC] Connection refused: Bad file descriptor\nat com.filemaker.jdbc1.CommonJ1Connection.openConnection(Unknown Source)\nat com.filemaker.jdbc.Driver.connect(Unknown Source)\nat org.apache.tomcat.jdbc.pool.PooledConnection.connectUsingDriver(PooledConnection.java:346)\nat org.apache.tomcat.jdbc.pool.PooledConnection.connect(PooledConnection.java:227)\nat org.apache.tomcat.jdbc.pool.ConnectionPool.createConnection(ConnectionPool.java:775)\nat org.apache.tomcat.jdbc.pool.ConnectionPool.borrowConnection(ConnectionPool.java:703)\nat org.apache.tomcat.jdbc.pool.ConnectionPool.init(ConnectionPool.java:502)\n.\n.\n.\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'webMvcMetricsFilter' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/web/servlet/WebMvcMetricsAutoConfiguration.class]: Unsatisfied dependency expressed through method 'webMvcMetricsFilter' parameter 0; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'simpleMeterRegistry' defined in class path resource [org/springframework/boot/actuate/autoconfigure/metrics/export/simple/SimpleMetricsExportAutoConfiguration.class]: Initialization of bean failed; nested exception is java.lang.RuntimeException: com.filemaker.jdbc.FMSQLException: [FileMaker][FileMaker JDBC] Connection refused: Bad file descriptor\n</code></pre>\n<p>Then, if I go back into the web app and change the JDBC from FileMaker to MySQL or to SQL Server, debug works fine. No errors.</p>\n<p>Can I assume from these tests that there's something goofy going on with this Claris, Type III, JDBC driver?</p>\n<p>I'm on the latest version of SpringBoot 2.x, Java 17.</p>\n"},{"tags":["java","video","avi"],"comments":[{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1689371033,"post_id":76690202,"comment_id":135209469,"body_markdown":"I&#39;m not familiar with it, but is it possible that it needs an additional dependency to provide support for the file format? Just an thought.","body":"I&#39;m not familiar with it, but is it possible that it needs an additional dependency to provide support for the file format? Just an thought."},{"owner":{"account_id":9518991,"reputation":31,"user_id":7074455,"display_name":"Anna"},"score":0,"creation_date":1689452682,"post_id":76690202,"comment_id":135216565,"body_markdown":"Thanks! I think you were on to something, I have added 2 more dependencies:\n`ch.randelshofer:org.monte.media:17.1` and `ch.randelshofer:org.monte.media.swing:17.1` \n\nSwing was used in the old recorder so why not. And I found `AVIWriter` in `org.monte.media` dependency.\n\nUnfortunately it didn&#39;t solve the problem, still same error. It must be some simple mistake, this should work.","body":"Thanks! I think you were on to something, I have added 2 more dependencies: <code>ch.randelshofer:org.monte.media:17.1</code> and <code>ch.randelshofer:org.monte.media.swing:17.1</code>   Swing was used in the old recorder so why not. And I found <code>AVIWriter</code> in <code>org.monte.media</code> dependency.  Unfortunately it didn&#39;t solve the problem, still same error. It must be some simple mistake, this should work."},{"owner":{"account_id":9518991,"reputation":31,"user_id":7074455,"display_name":"Anna"},"score":1,"creation_date":1689711015,"post_id":76690202,"comment_id":135251653,"body_markdown":"Ok so the biggest difference was made by adding `module-info.java` and thoroughly cleaning up IntelliJ. A working example of this is now shown [here](https://github.com/sikorka/screencorder/tree/master/com.github.sikorka.util.screen/src/main/java).","body":"Ok so the biggest difference was made by adding <code>module-info.java</code> and thoroughly cleaning up IntelliJ. A working example of this is now shown <a href=\"https://github.com/sikorka/screencorder/tree/master/com.github.sikorka.util.screen/src/main/java\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1689715432,"post_id":76690202,"comment_id":135252314,"body_markdown":"I&#39;m glad you got it working! You can add an answer to your own question with the solution. Self-answering is totally okay on SO and it will probably help others in the future.","body":"I&#39;m glad you got it working! You can add an answer to your own question with the solution. Self-answering is totally okay on SO and it will probably help others in the future."},{"owner":{"account_id":9518991,"reputation":31,"user_id":7074455,"display_name":"Anna"},"score":0,"creation_date":1689797810,"post_id":76690202,"comment_id":135266296,"body_markdown":"Thanks! Will do :)","body":"Thanks! Will do :)"}],"answers":[{"tags":[],"owner":{"account_id":9518991,"reputation":31,"user_id":7074455,"display_name":"Anna"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690191932,"creation_date":1689798181,"answer_id":76724942,"question_id":76690202,"body_markdown":"Adding `module-info.java` and thoroughly cleaning up IntelliJ as described [here](https://www.jetbrains.com/help/idea/directories-used-by-the-ide-to-store-settings-caches-plugins-and-logs.html#system-directory) got it working. A simple working example of this is shown [here](https://github.com/sikorka/screencorder). \r\n\r\nSummarising: \r\n\r\n0. you need Java &gt;= 17 on your machine \r\n\r\n1. maven module&#39;s `pom.xml` has 3 main MonteMedia dependencies: \r\n\r\n```\r\n&lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;org.monte.media.screenrecorder&lt;/artifactId&gt;\r\n            &lt;version&gt;17.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;org.monte.media&lt;/artifactId&gt;\r\n            &lt;version&gt;17.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;org.monte.media.swing&lt;/artifactId&gt;\r\n            &lt;version&gt;17.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.2&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hamcrest-all&lt;/artifactId&gt;\r\n            &lt;version&gt;1.3&lt;/version&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n```\r\n\r\n2. `src/main/java` needs a `module.info` with those dependencies and some additional ones required by them + an export to use the module in a test: \r\n\r\n```\r\nmodule com.your.path.util.screen { //&lt;= this is the maven module name too\r\n    requires java.desktop;\r\n    requires java.prefs;\r\n\r\n    requires org.monte.media;\r\n    requires org.monte.media.swing;\r\n    requires org.monte.media.screenrecorder;\r\n\r\n    exports com.your.path.util.screen;\r\n}\r\n```\r\n\r\n3. in package `com.your.path.util.screen` there is a class `Screencorder` that will record a movie with everything that&#39;s necessary to start a full screen recording in `start` and `stop` methods: \r\n\r\n```\r\npackage com.your.path.util.screen;\r\n\r\nimport org.monte.media.av.Format;\r\nimport org.monte.media.math.Rational;\r\nimport org.monte.media.screenrecorder.ScreenRecorder;\r\n\r\nimport java.awt.*;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.time.Duration;\r\n\r\nimport static org.monte.media.av.FormatKeys.*;\r\nimport static org.monte.media.av.codec.video.VideoFormatKeys.*;\r\n\r\npublic class Screencorder {\r\n    private ScreenRecorder screenRecorder;\r\n    public final String movieFolder;\r\n\r\n    public void start() throws IOException, AWTException {\r\n        GraphicsConfiguration gc = GraphicsEnvironment\r\n                .getLocalGraphicsEnvironment()\r\n                .getDefaultScreenDevice()\r\n                .getDefaultConfiguration();\r\n\r\n        Format fileFormat = new Format(MediaTypeKey, MediaType.FILE,\r\n                MimeTypeKey, MIME_AVI);\r\n        Format screenFormat = new Format(MediaTypeKey, MediaType.VIDEO,\r\n                EncodingKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE,\r\n                CompressorNameKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE,\r\n                DepthKey, 24,\r\n                FrameRateKey, Rational.valueOf(15),\r\n                QualityKey, 1.0f,\r\n                KeyFrameIntervalKey, (15 * 60));\r\n        Format mouseFormat = new Format(MediaTypeKey, MediaType.VIDEO,\r\n                EncodingKey, ScreenRecorder.ENCODING_BLACK_CURSOR,\r\n                FrameRateKey, Rational.valueOf(30));\r\n\r\n        screenRecorder = new ScreenRecorder(gc, null,\r\n                fileFormat, screenFormat, mouseFormat,\r\n                null, new File(movieFolder));\r\n\r\n        screenRecorder.start();\r\n    }\r\n\r\n    public void stop() throws IOException {\r\n        screenRecorder.stop();\r\n    }\r\n\r\n    public static void main(String[] args) throws IOException, AWTException, InterruptedException {\r\n        Screencorder recorder = new Screencorder();\r\n\r\n        recorder.start();\r\n        Thread.sleep(Duration.ofSeconds(7).toMillis());\r\n        recorder.stop();\r\n    }\r\n\r\n    public Screencorder() {\r\n        if (System.getProperty(&quot;os.name&quot;).toLowerCase().startsWith(&quot;windows&quot;)) {\r\n            movieFolder = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Videos&quot;;\r\n        } else {\r\n            movieFolder = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Movies&quot;;\r\n        }\r\n\r\n        File movieDir = new File(movieFolder);\r\n        if (!movieDir.exists()) {\r\n            movieDir.mkdirs();\r\n        }\r\n    }\r\n\r\n    public String getMovieFolder() {\r\n        return movieFolder;\r\n    }\r\n}\r\n```\r\n\r\n4. `src/test/java` needs a `module.info` as well - it will require the above module and test libraries + it will open itself for reflection to `junit`: \r\n\r\n```\r\nmodule com.your.path.util.screen.test {\r\n    requires com.your.path.util.screen;\r\n    requires org.junit.jupiter.api;\r\n    requires hamcrest.all;\r\n\r\n    opens com.your.path.util.screen.test to org.junit.platform.commons;\r\n}\r\n```\r\n\r\n5. the test package needs to be different than for main code, for example `com.your.path.util.screen.test`, the test class goes in here \r\n\r\n6. In case of problems with IntelliJ: after cleaning as described above, the module `com.your.path.util.screen` needs to have selected the MonteMedia dependencies in **Module Settings &gt; com.your.path.util.screen &gt; Dependencies &gt; chec 3 MonteMedia dependencies** (same as in `pom.xml`) \r\n\r\nNow you can run `main()` method in IntelliJ as well as the test. ","title":"How to record screen in Java, using newest MonteMedia ScreenRecorder?","body":"<p>Adding <code>module-info.java</code> and thoroughly cleaning up IntelliJ as described <a href=\"https://www.jetbrains.com/help/idea/directories-used-by-the-ide-to-store-settings-caches-plugins-and-logs.html#system-directory\" rel=\"nofollow noreferrer\">here</a> got it working. A simple working example of this is shown <a href=\"https://github.com/sikorka/screencorder\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Summarising:</p>\n<ol start=\"0\">\n<li><p>you need Java &gt;= 17 on your machine</p>\n</li>\n<li><p>maven module's <code>pom.xml</code> has 3 main MonteMedia dependencies:</p>\n</li>\n</ol>\n<pre><code>&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\n            &lt;artifactId&gt;org.monte.media.screenrecorder&lt;/artifactId&gt;\n            &lt;version&gt;17.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\n            &lt;artifactId&gt;org.monte.media&lt;/artifactId&gt;\n            &lt;version&gt;17.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\n            &lt;artifactId&gt;org.monte.media.swing&lt;/artifactId&gt;\n            &lt;version&gt;17.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;5.9.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hamcrest&lt;/groupId&gt;\n            &lt;artifactId&gt;hamcrest-all&lt;/artifactId&gt;\n            &lt;version&gt;1.3&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<ol start=\"2\">\n<li><code>src/main/java</code> needs a <code>module.info</code> with those dependencies and some additional ones required by them + an export to use the module in a test:</li>\n</ol>\n<pre><code>module com.your.path.util.screen { //&lt;= this is the maven module name too\n    requires java.desktop;\n    requires java.prefs;\n\n    requires org.monte.media;\n    requires org.monte.media.swing;\n    requires org.monte.media.screenrecorder;\n\n    exports com.your.path.util.screen;\n}\n</code></pre>\n<ol start=\"3\">\n<li>in package <code>com.your.path.util.screen</code> there is a class <code>Screencorder</code> that will record a movie with everything that's necessary to start a full screen recording in <code>start</code> and <code>stop</code> methods:</li>\n</ol>\n<pre><code>package com.your.path.util.screen;\n\nimport org.monte.media.av.Format;\nimport org.monte.media.math.Rational;\nimport org.monte.media.screenrecorder.ScreenRecorder;\n\nimport java.awt.*;\nimport java.io.File;\nimport java.io.IOException;\nimport java.time.Duration;\n\nimport static org.monte.media.av.FormatKeys.*;\nimport static org.monte.media.av.codec.video.VideoFormatKeys.*;\n\npublic class Screencorder {\n    private ScreenRecorder screenRecorder;\n    public final String movieFolder;\n\n    public void start() throws IOException, AWTException {\n        GraphicsConfiguration gc = GraphicsEnvironment\n                .getLocalGraphicsEnvironment()\n                .getDefaultScreenDevice()\n                .getDefaultConfiguration();\n\n        Format fileFormat = new Format(MediaTypeKey, MediaType.FILE,\n                MimeTypeKey, MIME_AVI);\n        Format screenFormat = new Format(MediaTypeKey, MediaType.VIDEO,\n                EncodingKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE,\n                CompressorNameKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE,\n                DepthKey, 24,\n                FrameRateKey, Rational.valueOf(15),\n                QualityKey, 1.0f,\n                KeyFrameIntervalKey, (15 * 60));\n        Format mouseFormat = new Format(MediaTypeKey, MediaType.VIDEO,\n                EncodingKey, ScreenRecorder.ENCODING_BLACK_CURSOR,\n                FrameRateKey, Rational.valueOf(30));\n\n        screenRecorder = new ScreenRecorder(gc, null,\n                fileFormat, screenFormat, mouseFormat,\n                null, new File(movieFolder));\n\n        screenRecorder.start();\n    }\n\n    public void stop() throws IOException {\n        screenRecorder.stop();\n    }\n\n    public static void main(String[] args) throws IOException, AWTException, InterruptedException {\n        Screencorder recorder = new Screencorder();\n\n        recorder.start();\n        Thread.sleep(Duration.ofSeconds(7).toMillis());\n        recorder.stop();\n    }\n\n    public Screencorder() {\n        if (System.getProperty(&quot;os.name&quot;).toLowerCase().startsWith(&quot;windows&quot;)) {\n            movieFolder = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Videos&quot;;\n        } else {\n            movieFolder = System.getProperty(&quot;user.home&quot;) + File.separator + &quot;Movies&quot;;\n        }\n\n        File movieDir = new File(movieFolder);\n        if (!movieDir.exists()) {\n            movieDir.mkdirs();\n        }\n    }\n\n    public String getMovieFolder() {\n        return movieFolder;\n    }\n}\n</code></pre>\n<ol start=\"4\">\n<li><code>src/test/java</code> needs a <code>module.info</code> as well - it will require the above module and test libraries + it will open itself for reflection to <code>junit</code>:</li>\n</ol>\n<pre><code>module com.your.path.util.screen.test {\n    requires com.your.path.util.screen;\n    requires org.junit.jupiter.api;\n    requires hamcrest.all;\n\n    opens com.your.path.util.screen.test to org.junit.platform.commons;\n}\n</code></pre>\n<ol start=\"5\">\n<li><p>the test package needs to be different than for main code, for example <code>com.your.path.util.screen.test</code>, the test class goes in here</p>\n</li>\n<li><p>In case of problems with IntelliJ: after cleaning as described above, the module <code>com.your.path.util.screen</code> needs to have selected the MonteMedia dependencies in <strong>Module Settings &gt; com.your.path.util.screen &gt; Dependencies &gt; chec 3 MonteMedia dependencies</strong> (same as in <code>pom.xml</code>)</p>\n</li>\n</ol>\n<p>Now you can run <code>main()</code> method in IntelliJ as well as the test.</p>\n"}],"owner":{"account_id":9518991,"reputation":31,"user_id":7074455,"display_name":"Anna"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":155,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1690191932,"creation_date":1689358153,"question_id":76690202,"body_markdown":"I am trying to record screen in Java, using newest MonteMedia ScreenRecorder:\r\n\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\r\n  &lt;artifactId&gt;org.monte.media&lt;/artifactId&gt;\r\n  &lt;version&gt;17.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nMy code is similar to many examples I could find of usage of the library - however older version as I found no examples for the new one - so packages are different:\r\n\r\n```\r\nimport org.monte.media.math.Rational;\r\nimport org.monte.media.screenrecorder.ScreenRecorder;\r\nimport org.monte.media.av.Format;\r\nimport org.monte.media.av.FormatKeys.MediaType;\r\nimport static org.monte.media.av.codec.video.VideoFormatKeys.*;\r\n\r\nimport java.awt.*;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\n\r\npublic class Screencorder {\r\n\r\n    private Screencorder() {}\r\n\r\n    public static ScreenRecorder startRecording(String fileName) throws IOException, AWTException {\r\n        GraphicsConfiguration gc = GraphicsEnvironment\r\n                .getLocalGraphicsEnvironment()\r\n                .getDefaultScreenDevice()\r\n                .getDefaultConfiguration();\r\n\r\n        Format fileFormat = new Format(MediaTypeKey, MediaType.FILE, MimeTypeKey, MIME_AVI);\r\n        Format screenFormat = new Format(MediaTypeKey, MediaType.VIDEO, EncodingKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE,\r\n                CompressorNameKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE, DepthKey, 24, FrameRateKey,\r\n                Rational.valueOf(15), QualityKey, 1.0f, KeyFrameIntervalKey, (15 * 60));\r\n        Format mouseFormat = new Format(MediaTypeKey, MediaType.VIDEO, EncodingKey, ScreenRecorder.ENCODING_BLACK_CURSOR, FrameRateKey, Rational.valueOf(30));\r\n\r\n        ScreenRecorder screenRecorder = new ScreenRecorder(gc, null,\r\n                fileFormat, screenFormat, mouseFormat,\r\n                null, new File(fileName));\r\n\r\n        screenRecorder.start();\r\n\r\n        return screenRecorder;\r\n    }\r\n\r\n    public static void stopRecording(ScreenRecorder screenRecorder) throws IOException {\r\n        screenRecorder.stop();\r\n    }\r\n}\r\n```\r\n\r\nRunning a test:\r\n\r\n```\r\nimport org.junit.jupiter.api.Test;\r\nimport org.monte.media.screenrecorder.ScreenRecorder;\r\nimport java.time.Duration;\r\nimport static org.awaitility.Awaitility.await;\r\n\r\nclass ScreenRecordingTest {\r\n\r\n    @Test\r\n    void recordingTest() throws Exception {\r\n        ScreenRecorder recorder = Screencorder.startRecording(&quot;/tmp/&quot;);\r\n\r\n        Thread.sleep(2000)\r\n\r\n        Screencorder.stopRecording(recorder);\r\n    }\r\n}\r\n```\r\n\r\ngives me:\r\n\r\n```\r\njava.io.IOException: Error no writer found for file format: Format{mimeType:video/avi,mediaType:FILE}.\r\n```\r\n\r\nI tried various JDKs - 17, 20 - without success.   \r\nTried changing directory to a file, same error.   \r\nTried a different MIME type - same error regardless.\r\n\r\nCan someone help how to run this, so it records an `.avi`? Or other movie-like format.\r\n\r\nI hope I am doing some obvious mistake.","title":"How to record screen in Java, using newest MonteMedia ScreenRecorder?","body":"<p>I am trying to record screen in Java, using newest MonteMedia ScreenRecorder:</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;ch.randelshofer&lt;/groupId&gt;\n  &lt;artifactId&gt;org.monte.media&lt;/artifactId&gt;\n  &lt;version&gt;17.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>My code is similar to many examples I could find of usage of the library - however older version as I found no examples for the new one - so packages are different:</p>\n<pre><code>import org.monte.media.math.Rational;\nimport org.monte.media.screenrecorder.ScreenRecorder;\nimport org.monte.media.av.Format;\nimport org.monte.media.av.FormatKeys.MediaType;\nimport static org.monte.media.av.codec.video.VideoFormatKeys.*;\n\nimport java.awt.*;\nimport java.io.File;\nimport java.io.IOException;\n\npublic class Screencorder {\n\n    private Screencorder() {}\n\n    public static ScreenRecorder startRecording(String fileName) throws IOException, AWTException {\n        GraphicsConfiguration gc = GraphicsEnvironment\n                .getLocalGraphicsEnvironment()\n                .getDefaultScreenDevice()\n                .getDefaultConfiguration();\n\n        Format fileFormat = new Format(MediaTypeKey, MediaType.FILE, MimeTypeKey, MIME_AVI);\n        Format screenFormat = new Format(MediaTypeKey, MediaType.VIDEO, EncodingKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE,\n                CompressorNameKey, ENCODING_AVI_TECHSMITH_SCREEN_CAPTURE, DepthKey, 24, FrameRateKey,\n                Rational.valueOf(15), QualityKey, 1.0f, KeyFrameIntervalKey, (15 * 60));\n        Format mouseFormat = new Format(MediaTypeKey, MediaType.VIDEO, EncodingKey, ScreenRecorder.ENCODING_BLACK_CURSOR, FrameRateKey, Rational.valueOf(30));\n\n        ScreenRecorder screenRecorder = new ScreenRecorder(gc, null,\n                fileFormat, screenFormat, mouseFormat,\n                null, new File(fileName));\n\n        screenRecorder.start();\n\n        return screenRecorder;\n    }\n\n    public static void stopRecording(ScreenRecorder screenRecorder) throws IOException {\n        screenRecorder.stop();\n    }\n}\n</code></pre>\n<p>Running a test:</p>\n<pre><code>import org.junit.jupiter.api.Test;\nimport org.monte.media.screenrecorder.ScreenRecorder;\nimport java.time.Duration;\nimport static org.awaitility.Awaitility.await;\n\nclass ScreenRecordingTest {\n\n    @Test\n    void recordingTest() throws Exception {\n        ScreenRecorder recorder = Screencorder.startRecording(&quot;/tmp/&quot;);\n\n        Thread.sleep(2000)\n\n        Screencorder.stopRecording(recorder);\n    }\n}\n</code></pre>\n<p>gives me:</p>\n<pre><code>java.io.IOException: Error no writer found for file format: Format{mimeType:video/avi,mediaType:FILE}.\n</code></pre>\n<p>I tried various JDKs - 17, 20 - without success.<br />\nTried changing directory to a file, same error.<br />\nTried a different MIME type - same error regardless.</p>\n<p>Can someone help how to run this, so it records an <code>.avi</code>? Or other movie-like format.</p>\n<p>I hope I am doing some obvious mistake.</p>\n"},{"tags":["java","gradle","migration","vaadin","vaadin-flow"],"comments":[{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1690193590,"post_id":76753214,"comment_id":135314348,"body_markdown":"I have a hard time to follow, what you are actually asking: you fixed two compile problems and you are not sure, if its a proper fix (close-worthy - SO wants you to create single-focus questions). Next you are pointing us to another question (so is this a duplicate? Close-worthy...).  And finally you state, that you get a &quot;Whitelabel Error Page&quot; - which shows a stacktrace (and most likely logs a stacktrace) - so why not add this error here and correlate it with some code snippets and remove all the unrelated things here.  And if this helps to answer your other question, then add it there.","body":"I have a hard time to follow, what you are actually asking: you fixed two compile problems and you are not sure, if its a proper fix (close-worthy - SO wants you to create single-focus questions). Next you are pointing us to another question (so is this a duplicate? Close-worthy...).  And finally you state, that you get a &quot;Whitelabel Error Page&quot; - which shows a stacktrace (and most likely logs a stacktrace) - so why not add this error here and correlate it with some code snippets and remove all the unrelated things here.  And if this helps to answer your other question, then add it there."},{"owner":{"account_id":15923357,"reputation":65,"user_id":11489678,"display_name":"Mohamed Aziz Tousli"},"score":0,"creation_date":1690194501,"post_id":76753214,"comment_id":135314532,"body_markdown":"Sorry if this was unclear. I tried my best to make it as clear as possible. Basically, when I tried migrating my project from V22 to V23.3, I got two compile errors. I fixed them, but I was still unable to build/run my application, so I am wondering if my fixes are correct or not. If they are correct, then what may be the issue of the build/run failure? If they are incorrect, what is the correct fix?","body":"Sorry if this was unclear. I tried my best to make it as clear as possible. Basically, when I tried migrating my project from V22 to V23.3, I got two compile errors. I fixed them, but I was still unable to build/run my application, so I am wondering if my fixes are correct or not. If they are correct, then what may be the issue of the build/run failure? If they are incorrect, what is the correct fix?"},{"owner":{"account_id":3837378,"reputation":35463,"user_id":3181392,"display_name":"cfrick"},"score":1,"creation_date":1690196668,"post_id":76753214,"comment_id":135314955,"body_markdown":"Please add the stacktrace from the whitelabel error you get and correlate it to the code.","body":"Please add the stacktrace from the whitelabel error you get and correlate it to the code."}],"owner":{"account_id":15923357,"reputation":65,"user_id":11489678,"display_name":"Mohamed Aziz Tousli"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690191861,"creation_date":1690191861,"question_id":76753214,"body_markdown":"I am trying to migrate my Kotlin-based project from Vaadin 22 to Vaadin 23.3.\r\n\r\nWhen I finished setting up versions for my build.gradle.kts, I received the two following errors:\r\n\r\n## First Error:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nI fixed this error by changing `ComponentEventListener&lt;GeneratedVaadinDialog.OpenedChangeEvent&lt;Dialog&gt;&gt;` to `ComponentEventListener&lt;Dialog.OpenedChangeEvent&lt;Dialog&gt;&gt;`.\r\n\r\n## Second Error:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI fixed this error by changing `open class GaliteVUITestBase: VUITestBase(), TestingLifecycleHook {` to either `open class GaliteVUITestBase: VUITestBase(), TestingLifecycleHook by TestingLifecycleHookVaadin14Default() {` or `open class GaliteVUITestBase: VUITestBase(), TestingLifecycleHook by TestingLifecycleHookVaadin23_1(TestingLifecycleHook.default) {`, since the first fix is for all Vaadin versions, and the second one for Vaadin 23.1 (or more (?)).\r\n\r\nTo be honest with you guys, the changes seemed logical to me, but I am still unable to get my project to work. (It was obviously working completely fine in Vaadin 22).\r\n\r\nIf I try to build my project using:\r\n\r\n    ./gradlew clean build --refresh-dependencies\r\n\r\nI get assertion errors in my unit tests ([Example][3]).\r\n\r\nAnd if I try to run my project in localhost using:\r\n\r\n    ./gradlew vaadinPrepareFrontend vaadinBuildFrontend run \r\n\r\nI get **Whitelabel Error Page** in my localhost.\r\n\r\nThis is my first Kotlin/Vaadin experience, and I have been stuck with this for more than two weeks now. I would appreciate any kind of help or track. Thank you.\r\n\r\n### Notes:\r\n\r\n - Operating System: Fedora 38 \r\n - IDE: IntelliJ IDEA \r\n - Project Builder: Gradle \r\n - Java Version: 11 \r\n - Vaadin Version: 23.3.0 \r\n - Unit Testing Tool: Karibu Testing \r\n - Karibu Version: 1.3.23 \r\n - Enhanced Dialog Version: 23.0.0\r\n\r\n  [1]: https://i.stack.imgur.com/eos7m.png\r\n  [2]: https://i.stack.imgur.com/3A4cG.png\r\n  [3]: https://stackoverflow.com/questions/76689430/no-visible-dialog-in-mockedui-while-karibu-unit-testing","title":"Migration failing from Vaadin 22 to Vaadin 23.3","body":"<p>I am trying to migrate my Kotlin-based project from Vaadin 22 to Vaadin 23.3.</p>\n<p>When I finished setting up versions for my build.gradle.kts, I received the two following errors:</p>\n<h2>First Error:</h2>\n<p><a href=\"https://i.stack.imgur.com/eos7m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eos7m.png\" alt=\"enter image description here\" /></a></p>\n<p>I fixed this error by changing <code>ComponentEventListener&lt;GeneratedVaadinDialog.OpenedChangeEvent&lt;Dialog&gt;&gt;</code> to <code>ComponentEventListener&lt;Dialog.OpenedChangeEvent&lt;Dialog&gt;&gt;</code>.</p>\n<h2>Second Error:</h2>\n<p><a href=\"https://i.stack.imgur.com/3A4cG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3A4cG.png\" alt=\"enter image description here\" /></a></p>\n<p>I fixed this error by changing <code>open class GaliteVUITestBase: VUITestBase(), TestingLifecycleHook {</code> to either <code>open class GaliteVUITestBase: VUITestBase(), TestingLifecycleHook by TestingLifecycleHookVaadin14Default() {</code> or <code>open class GaliteVUITestBase: VUITestBase(), TestingLifecycleHook by TestingLifecycleHookVaadin23_1(TestingLifecycleHook.default) {</code>, since the first fix is for all Vaadin versions, and the second one for Vaadin 23.1 (or more (?)).</p>\n<p>To be honest with you guys, the changes seemed logical to me, but I am still unable to get my project to work. (It was obviously working completely fine in Vaadin 22).</p>\n<p>If I try to build my project using:</p>\n<pre><code>./gradlew clean build --refresh-dependencies\n</code></pre>\n<p>I get assertion errors in my unit tests (<a href=\"https://stackoverflow.com/questions/76689430/no-visible-dialog-in-mockedui-while-karibu-unit-testing\">Example</a>).</p>\n<p>And if I try to run my project in localhost using:</p>\n<pre><code>./gradlew vaadinPrepareFrontend vaadinBuildFrontend run \n</code></pre>\n<p>I get <strong>Whitelabel Error Page</strong> in my localhost.</p>\n<p>This is my first Kotlin/Vaadin experience, and I have been stuck with this for more than two weeks now. I would appreciate any kind of help or track. Thank you.</p>\n<h3>Notes:</h3>\n<ul>\n<li>Operating System: Fedora 38</li>\n<li>IDE: IntelliJ IDEA</li>\n<li>Project Builder: Gradle</li>\n<li>Java Version: 11</li>\n<li>Vaadin Version: 23.3.0</li>\n<li>Unit Testing Tool: Karibu Testing</li>\n<li>Karibu Version: 1.3.23</li>\n<li>Enhanced Dialog Version: 23.0.0</li>\n</ul>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":136251,"reputation":87506,"user_id":339637,"accept_rate":55,"display_name":"Ken Chan"},"score":0,"creation_date":1690130810,"post_id":76748737,"comment_id":135307308,"body_markdown":"you want `transactionNumber` to be populated with the values that is the same as  `accountNumber` once it is assigned with `accountNumber` ?","body":"you want <code>transactionNumber</code> to be populated with the values that is the same as  <code>accountNumber</code> once it is assigned with <code>accountNumber</code> ?"},{"owner":{"account_id":26174937,"reputation":27,"user_id":19859254,"display_name":"Sai Chakra"},"score":0,"creation_date":1690173573,"post_id":76748737,"comment_id":135311028,"body_markdown":"Hi @Ken Chan if same is also no problem but Autogeneration of the  transactionNo is required for me and it should be stored in the Database.","body":"Hi @Ken Chan if same is also no problem but Autogeneration of the  transactionNo is required for me and it should be stored in the Database."}],"answers":[{"tags":[],"owner":{"account_id":8628424,"reputation":91,"user_id":6460906,"display_name":"Dmitrii Podlesnykh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690191569,"creation_date":1690191569,"answer_id":76753179,"question_id":76748737,"body_markdown":"MySQL the table structure cannot contain more than one auto_increment field. When you try to create a table with 2 autoincremented fields or alter the table in an attempt to create a second autoincrement, the query fails.\r\n\r\nOptions:\r\n--------\r\n\r\n 1. Create two tables with two different primary keys. Then you will be able to increment both column values. \r\n 2. Create a Database trigger ( [MySQL 8.0 Reference Manual: 25.3.1 Trigger Syntax and Examples][1] ):\r\n\r\n        CREATE TRIGGER &#39;INCREMENT_AccountNumber&#39; AFTER INSERT ON &#39;Accounts&#39; FOR EACH ROW BEGIN UPDATE class SET AccountNumber = AccountNumber+1 WHERE ID= ID; END\r\n\r\n\r\n 3. You can specify AUTO_INCREMENT on a secondary column in a multiple-column index for MyISAM(MyISAM is optimized for environments with heavy read operations, and few writes, or none at all). \r\n[MySQL 8.0 Reference Manual: 3.6.9 Using AUTO_INCREMENT - MyISAM Notes][2]\r\n\r\n \r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/refman/8.0/en/trigger-syntax.html\r\n  [2]: https://dev.mysql.com/doc/refman/8.0/en/example-auto-increment.html#:~:text=For%20MyISAM%20tables%2C%20you%20can,put%20data%20into%20ordered%20groups.","title":"How to Populate the Auto Incremented values for the Instannce variable which are not annotated with @Id in Springboot application","body":"<p>MySQL the table structure cannot contain more than one auto_increment field. When you try to create a table with 2 autoincremented fields or alter the table in an attempt to create a second autoincrement, the query fails.</p>\n<h2>Options:</h2>\n<ol>\n<li><p>Create two tables with two different primary keys. Then you will be able to increment both column values.</p>\n</li>\n<li><p>Create a Database trigger ( <a href=\"https://dev.mysql.com/doc/refman/8.0/en/trigger-syntax.html\" rel=\"nofollow noreferrer\">MySQL 8.0 Reference Manual: 25.3.1 Trigger Syntax and Examples</a> ):</p>\n<pre><code>CREATE TRIGGER 'INCREMENT_AccountNumber' AFTER INSERT ON 'Accounts' FOR EACH ROW BEGIN UPDATE class SET AccountNumber = AccountNumber+1 WHERE ID= ID; END\n</code></pre>\n</li>\n<li><p>You can specify AUTO_INCREMENT on a secondary column in a multiple-column index for MyISAM(MyISAM is optimized for environments with heavy read operations, and few writes, or none at all).\n<a href=\"https://dev.mysql.com/doc/refman/8.0/en/example-auto-increment.html#:%7E:text=For%20MyISAM%20tables%2C%20you%20can,put%20data%20into%20ordered%20groups.\" rel=\"nofollow noreferrer\">MySQL 8.0 Reference Manual: 3.6.9 Using AUTO_INCREMENT - MyISAM Notes</a></p>\n</li>\n</ol>\n"}],"owner":{"account_id":26174937,"reputation":27,"user_id":19859254,"display_name":"Sai Chakra"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690191569,"creation_date":1690122209,"question_id":76748737,"body_markdown":"Here I would like to generate the Auto populated values for the &quot;transactionNumber&quot; variable and store it in the Database but I have used @Id on another the variable that is &quot;accountNumber&quot;\r\n\r\nNote: I am using MYSQL Database\r\n\r\n`Accounts`\r\n\r\n````\r\n\r\n@Entity\r\n@SequenceGenerator(name = &quot;seq&quot;, initialValue = 1, allocationSize = 1)\r\npublic class Accounts {\r\n\t\r\n\t@Id\r\n\t@GeneratedValue(generator = &quot;seq&quot;)\r\n\tprivate Integer accountNumber;\r\n\t\r\n\t/*\r\n\t * @Retention(RetentionPolicy.RUNTIME)\r\n\t * \r\n\t * @Target(ElementType.FIELD) public @interface InjectSequenceValue { String\r\n\t * sequencename(); }\r\n\t */\r\n\t\r\n\t/* @InjectSequenceValue(sequencename = &quot;serialnum_sequence&quot;) */\r\n\t\r\n\t\r\n\tprivate int transactionNumber;\r\n\t\r\n\t@Column\r\n\tprivate String userId;\r\n\t\r\n\t@Column\r\n\tprivate int upiIdLimit;\r\n\t\r\n\t@Column\r\n\tprivate double accountBalance;\r\n\t\r\n\t@Column\r\n\tprivate String transactionLimitPerDay;\r\n\t\r\n\t\r\n\tpublic Integer getAccountNumber() {\r\n\t\treturn accountNumber;\r\n\t}\r\n\r\n\tpublic void setAccountNumber(Integer accountNumber) {\r\n\t\tthis.accountNumber = accountNumber;\r\n\t}\r\n\r\n\tpublic int getTransactionNumber() {\r\n\t\treturn transactionNumber;\r\n\t}\r\n\r\n\tpublic void setTransactionNumber(int transactionNumber) {\r\n\t\tthis.transactionNumber = transactionNumber;\r\n\t}\r\n\r\n\tpublic String  getUserId() {\r\n\t\treturn userId;\r\n\t}\r\n\r\n\tpublic void setUserId(String userId) {\r\n\t\tthis.userId = userId;\r\n\t}\r\n\r\n\tpublic int getUpiIdLimit() {\r\n\t\treturn upiIdLimit;\r\n\t}\r\n\r\n\tpublic void setUpiIdLimit(int upiIdLimit) {\r\n\t\tthis.upiIdLimit = upiIdLimit;\r\n\t}\r\n\r\n\tpublic double getAccountBalance() {\r\n\t\treturn accountBalance;\r\n\t}\r\n\r\n\tpublic void setAccountBalance(double accountBalance) {\r\n\t\tthis.accountBalance = accountBalance;\r\n\t}\r\n\r\n\tpublic String getTransactionLimitPerDay() {\r\n\t\treturn transactionLimitPerDay;\r\n\t}\r\n\r\n\tpublic void setTransactionLimitPerDay(String transactionLimitPerDay) {\r\n\t\tthis.transactionLimitPerDay = transactionLimitPerDay;\r\n\t}\r\n\t\r\n}\r\n````","title":"How to Populate the Auto Incremented values for the Instannce variable which are not annotated with @Id in Springboot application","body":"<p>Here I would like to generate the Auto populated values for the &quot;transactionNumber&quot; variable and store it in the Database but I have used @Id on another the variable that is &quot;accountNumber&quot;</p>\n<p>Note: I am using MYSQL Database</p>\n<p><code>Accounts</code></p>\n<pre><code>\n@Entity\n@SequenceGenerator(name = &quot;seq&quot;, initialValue = 1, allocationSize = 1)\npublic class Accounts {\n    \n    @Id\n    @GeneratedValue(generator = &quot;seq&quot;)\n    private Integer accountNumber;\n    \n    /*\n     * @Retention(RetentionPolicy.RUNTIME)\n     * \n     * @Target(ElementType.FIELD) public @interface InjectSequenceValue { String\n     * sequencename(); }\n     */\n    \n    /* @InjectSequenceValue(sequencename = &quot;serialnum_sequence&quot;) */\n    \n    \n    private int transactionNumber;\n    \n    @Column\n    private String userId;\n    \n    @Column\n    private int upiIdLimit;\n    \n    @Column\n    private double accountBalance;\n    \n    @Column\n    private String transactionLimitPerDay;\n    \n    \n    public Integer getAccountNumber() {\n        return accountNumber;\n    }\n\n    public void setAccountNumber(Integer accountNumber) {\n        this.accountNumber = accountNumber;\n    }\n\n    public int getTransactionNumber() {\n        return transactionNumber;\n    }\n\n    public void setTransactionNumber(int transactionNumber) {\n        this.transactionNumber = transactionNumber;\n    }\n\n    public String  getUserId() {\n        return userId;\n    }\n\n    public void setUserId(String userId) {\n        this.userId = userId;\n    }\n\n    public int getUpiIdLimit() {\n        return upiIdLimit;\n    }\n\n    public void setUpiIdLimit(int upiIdLimit) {\n        this.upiIdLimit = upiIdLimit;\n    }\n\n    public double getAccountBalance() {\n        return accountBalance;\n    }\n\n    public void setAccountBalance(double accountBalance) {\n        this.accountBalance = accountBalance;\n    }\n\n    public String getTransactionLimitPerDay() {\n        return transactionLimitPerDay;\n    }\n\n    public void setTransactionLimitPerDay(String transactionLimitPerDay) {\n        this.transactionLimitPerDay = transactionLimitPerDay;\n    }\n    \n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","ssl","selenium-chromedriver","ssl-certificate"],"answers":[{"tags":[],"owner":{"account_id":29079050,"reputation":1,"user_id":22275505,"display_name":"Товарищ тестировщик"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690191512,"creation_date":1690191512,"answer_id":76753174,"question_id":76753052,"body_markdown":"I solved the problem as follows:\r\n\r\nFor those who have admin rights on a PC, there is a working solution for auto-selecting a certificate:\r\n- for MAC enter  in terminal\r\ndefaults write com.google.Chrome AutoSelectCertificateForUrls -array-add -string &#39;&quot;pattern&quot;:&quot;your_url&quot;,&quot;filter&quot;:{&quot;ISSUER&quot;:{&quot;CN&quot;:&quot;certificate name&quot;}}}&#39;\r\n\r\n- ⁣In Windows, you need to add the following example to the registry\r\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Google\\Chrome\\AutoSelectCertificateForUrls\\1 =\r\n ⁣ ⁣ ⁣ ⁣ ⁣ ⁣ ⁣ ⁣&quot;{&quot;pattern&quot;:&quot;your_url&quot;,&quot;filter&quot;:{&quot;ISSUER&quot;:{&quot;CN&quot;:&quot;certificate name&quot;}}}&quot;*/","title":"Selenium testing JAVA - I can&#39;t configure certificate auto-selection for a specific URL when opening ChromeDriver on MAC","body":"<p>I solved the problem as follows:</p>\n<p>For those who have admin rights on a PC, there is a working solution for auto-selecting a certificate:</p>\n<ul>\n<li><p>for MAC enter  in terminal\ndefaults write com.google.Chrome AutoSelectCertificateForUrls -array-add -string '&quot;pattern&quot;:&quot;your_url&quot;,&quot;filter&quot;:{&quot;ISSUER&quot;:{&quot;CN&quot;:&quot;certificate name&quot;}}}'</p>\n</li>\n<li><p>⁣In Windows, you need to add the following example to the registry\nHKEY_LOCAL_MACHINE\\SOFTWARE\\Policies\\Google\\Chrome\\AutoSelectCertificateForUrls\\1 =\n⁣ ⁣ ⁣ ⁣ ⁣ ⁣ ⁣ ⁣&quot;{&quot;pattern&quot;:&quot;your_url&quot;,&quot;filter&quot;:{&quot;ISSUER&quot;:{&quot;CN&quot;:&quot;certificate name&quot;}}}&quot;*/</p>\n</li>\n</ul>\n"}],"owner":{"account_id":29079050,"reputation":1,"user_id":22275505,"display_name":"Товарищ тестировщик"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690191512,"creation_date":1690190568,"question_id":76753052,"body_markdown":"I am writing autotests using Maven+Selenium+JUnitxz.\r\nDuring UI testing, I can&#39;t configure certificate auto-selection so as not to click on the window manually.\r\n\r\nI have already tried ChromeOptions and ignoring the certificate, it is not working. \r\nI found a suggestion for creating a file /Library/Preferences/com.google.Chrome.plist, but when running ChromeDriver, this file disappeared.\r\nThe content of the file is as follows:\r\n\r\n```\r\n    &lt;plist version=&quot;1.0″&gt;\r\n     &lt;dict&gt;\r\n&#160;⁣&#160;⁣     &lt;key&gt;AutoSelectCertificateForUrls&lt;/key&gt;\r\n&#160;⁣&#160;⁣&#160;⁣     &lt;array&gt;\r\n&#160;⁣&#160;⁣&#160;⁣&#160;⁣&#160;⁣     &lt;string&gt;{&quot;pattern&quot;:&quot;your_url&quot;,&quot;filter&quot;:{&quot;ISSUER&quot;:{&quot;CN&quot;:&quot;certificate name&quot;}}}&lt;/string&gt;\r\n&#160;⁣&#160;⁣&#160;    ⁣&lt;/array&gt;\r\n    &lt;/dict&gt;\r\n    &lt;/plist&gt;\r\n```\r\n","title":"Selenium testing JAVA - I can&#39;t configure certificate auto-selection for a specific URL when opening ChromeDriver on MAC","body":"<p>I am writing autotests using Maven+Selenium+JUnitxz.\nDuring UI testing, I can't configure certificate auto-selection so as not to click on the window manually.</p>\n<p>I have already tried ChromeOptions and ignoring the certificate, it is not working.\nI found a suggestion for creating a file /Library/Preferences/com.google.Chrome.plist, but when running ChromeDriver, this file disappeared.\nThe content of the file is as follows:</p>\n<pre><code>    &lt;plist version=&quot;1.0″&gt;\n     &lt;dict&gt;\n ⁣ ⁣     &lt;key&gt;AutoSelectCertificateForUrls&lt;/key&gt;\n ⁣ ⁣ ⁣     &lt;array&gt;\n ⁣ ⁣ ⁣ ⁣ ⁣     &lt;string&gt;{&quot;pattern&quot;:&quot;your_url&quot;,&quot;filter&quot;:{&quot;ISSUER&quot;:{&quot;CN&quot;:&quot;certificate name&quot;}}}&lt;/string&gt;\n ⁣ ⁣     ⁣&lt;/array&gt;\n    &lt;/dict&gt;\n    &lt;/plist&gt;\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","jpa","lombok"],"comments":[{"owner":{"account_id":7635187,"reputation":1521,"user_id":5788945,"display_name":"greenPadawan"},"score":0,"creation_date":1647849633,"post_id":71554080,"comment_id":126465237,"body_markdown":"Do you see an error on startup? Did you check the logs to see if the create table statement is being executed or not?","body":"Do you see an error on startup? Did you check the logs to see if the create table statement is being executed or not?"},{"owner":{"account_id":14365021,"reputation":31,"user_id":10376323,"display_name":"Destructive Gamer"},"score":0,"creation_date":1647852408,"post_id":71554080,"comment_id":126466067,"body_markdown":"@greenPadawan The logs show no create table statement, that is why I know that the table is not being created, also there are no errors","body":"@greenPadawan The logs show no create table statement, that is why I know that the table is not being created, also there are no errors"}],"answers":[{"tags":[],"owner":{"account_id":4181234,"reputation":3257,"user_id":3426201,"display_name":"Assafs"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1647859113,"creation_date":1647859113,"answer_id":71556175,"question_id":71554080,"body_markdown":"You&#39;re missing the @table annotation which is required to build a table in your DB to host the entities. Also, it&#39;s good custom to annotate your columns as well, to make sure they&#39;re named correctly (although in your case, they would&#39;ve been correctly parsed). For example:\r\n    \r\n    package com.jpabasics.jpaBasics.enitity;\r\n\r\n    import lombok.AllArgsConstructor;\r\n    import lombok.Builder;\r\n    import lombok.Data;\r\n    import lombok.NoArgsConstructor;\r\n    \r\n    import javax.persistence.Entity;\r\n    import javax.persistence.Id;\r\n    \r\n    @Entity\r\n    @Table(name=&quot;STUDENTS&quot;)\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    public class Student {\r\n    \r\n         @Id\r\n         @GeneratedValue(strategy = GenerationType.AUTO)\r\n\t     @Column(name = &quot;STUDENT_ID&quot;)\r\n         private long studentId;\r\n\r\n         @Column(name = &quot;FIRST_NAME&quot;)\r\n         private String firstName;\r\n\r\n         @Column(name = &quot;LAST_NAME&quot;)\r\n         private String lastName;\r\n   \r\n         @Column(name = &quot;EMAIL_ID&quot;)\r\n         private String emailId;\r\n\r\n         @Column(name = &quot;GUARDIAN_NAME&quot;)\r\n         private String guardianName;\r\n \r\n         @Column(name = &quot;GUARDIAN_EMAIL&quot;)\r\n         private String guardianEmail;\r\n\r\n         @Column(name = &quot;GUARDIAN_MOBILE&quot;)\r\n         private String guardianMobile;\r\n    \r\n    }\r\n ","title":"Unable to create table in database using Spring Boot and JPA","body":"<p>You're missing the @table annotation which is required to build a table in your DB to host the entities. Also, it's good custom to annotate your columns as well, to make sure they're named correctly (although in your case, they would've been correctly parsed). For example:</p>\n<pre><code>package com.jpabasics.jpaBasics.enitity;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\n@Table(name=&quot;STUDENTS&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Student {\n\n     @Id\n     @GeneratedValue(strategy = GenerationType.AUTO)\n     @Column(name = &quot;STUDENT_ID&quot;)\n     private long studentId;\n\n     @Column(name = &quot;FIRST_NAME&quot;)\n     private String firstName;\n\n     @Column(name = &quot;LAST_NAME&quot;)\n     private String lastName;\n\n     @Column(name = &quot;EMAIL_ID&quot;)\n     private String emailId;\n\n     @Column(name = &quot;GUARDIAN_NAME&quot;)\n     private String guardianName;\n\n     @Column(name = &quot;GUARDIAN_EMAIL&quot;)\n     private String guardianEmail;\n\n     @Column(name = &quot;GUARDIAN_MOBILE&quot;)\n     private String guardianMobile;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9297779,"reputation":1,"user_id":6904216,"display_name":"ARPIT VERMA"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1690190676,"creation_date":1690186522,"answer_id":76752558,"question_id":71554080,"body_markdown":"I am using same code but still not able to create a table.\r\n\r\nPlease find below logs \r\n\r\n\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.1.1)\r\n\r\n    2023-07-24T13:43:17.936+05:30  INFO 9080 --- [           main] c.e.S.SpringJpaTestApplication           : Starting SpringJpaTestApplication using Java 17.0.7 with PID 9080 (C:\\Users\\arpit.verma\\Downloads\\SpringJPATest\\SpringJPATest\\target\\classes started by arpit.verma in C:\\Users\\arpit.verma\\Downloads\\SpringJPATest\\SpringJPATest)\r\n    2023-07-24T13:43:17.942+05:30  INFO 9080 --- [           main] c.e.S.SpringJpaTestApplication           : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n    2023-07-24T13:43:18.890+05:30  INFO 9080 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n    2023-07-24T13:43:18.928+05:30  INFO 9080 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\r\n    2023-07-24T13:43:19.819+05:30  INFO 9080 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n    2023-07-24T13:43:19.838+05:30  INFO 9080 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n    2023-07-24T13:43:19.839+05:30  INFO 9080 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.10]\r\n    2023-07-24T13:43:20.020+05:30  INFO 9080 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n    2023-07-24T13:43:20.026+05:30  INFO 9080 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1913 ms\r\n    2023-07-24T13:43:20.246+05:30  INFO 9080 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n    2023-07-24T13:43:20.814+05:30  INFO 9080 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c3719e5\r\n    2023-07-24T13:43:20.818+05:30  INFO 9080 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\r\n    2023-07-24T13:43:20.877+05:30  INFO 9080 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n    2023-07-24T13:43:20.987+05:30  INFO 9080 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.5.Final\r\n    2023-07-24T13:43:20.992+05:30  INFO 9080 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n    2023-07-24T13:43:21.124+05:30  INFO 9080 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\r\n    2023-07-24T13:43:21.341+05:30  INFO 9080 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-07-24T13:43:21.602+05:30  INFO 9080 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n    2023-07-24T13:43:21.685+05:30  WARN 9080 --- [           main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead\r\n    2023-07-24T13:43:21.810+05:30  INFO 9080 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n    2023-07-24T13:43:22.082+05:30  INFO 9080 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n    2023-07-24T13:43:22.090+05:30  INFO 9080 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n    2023-07-24T13:43:22.154+05:30  WARN 9080 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n    2023-07-24T13:43:22.650+05:30  INFO 9080 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path &#39;&#39;\r\n    2023-07-24T13:43:22.666+05:30  INFO 9080 --- [           main] c.e.S.SpringJpaTestApplication           : Started SpringJpaTestApplication in 5.202 seconds (process running for 6.165)","title":"Unable to create table in database using Spring Boot and JPA","body":"<p>I am using same code but still not able to create a table.</p>\n<p>Please find below logs</p>\n<p>.   ____          _            __ _ _\n/\\ / <em><em><em>'</em> __ _ <em>(</em>)</em> __  __ _ \\ \\ \\ <br />\n( ( )_</em>_ | '_ | '<em>| | '</em> / <em>` | \\ \\ \\ <br />\n\\/  __<em>)| |</em>)| | | | | || (</em>| |  ) ) ) )\n'  |<strong><em><em>| .__|</em>| |</em>|<em>| |</em>_<em>, | / / / /\n=========|</em>|==============|</strong><em>/=/</em>/<em>/</em>/\n:: Spring Boot ::                (v3.1.1)</p>\n<pre><code>2023-07-24T13:43:17.936+05:30  INFO 9080 --- [           main] c.e.S.SpringJpaTestApplication           : Starting SpringJpaTestApplication using Java 17.0.7 with PID 9080 (C:\\Users\\arpit.verma\\Downloads\\SpringJPATest\\SpringJPATest\\target\\classes started by arpit.verma in C:\\Users\\arpit.verma\\Downloads\\SpringJPATest\\SpringJPATest)\n2023-07-24T13:43:17.942+05:30  INFO 9080 --- [           main] c.e.S.SpringJpaTestApplication           : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-07-24T13:43:18.890+05:30  INFO 9080 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-07-24T13:43:18.928+05:30  INFO 9080 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 18 ms. Found 0 JPA repository interfaces.\n2023-07-24T13:43:19.819+05:30  INFO 9080 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-07-24T13:43:19.838+05:30  INFO 9080 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-07-24T13:43:19.839+05:30  INFO 9080 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.10]\n2023-07-24T13:43:20.020+05:30  INFO 9080 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-07-24T13:43:20.026+05:30  INFO 9080 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1913 ms\n2023-07-24T13:43:20.246+05:30  INFO 9080 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-07-24T13:43:20.814+05:30  INFO 9080 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@c3719e5\n2023-07-24T13:43:20.818+05:30  INFO 9080 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-07-24T13:43:20.877+05:30  INFO 9080 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-07-24T13:43:20.987+05:30  INFO 9080 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.5.Final\n2023-07-24T13:43:20.992+05:30  INFO 9080 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-07-24T13:43:21.124+05:30  INFO 9080 --- [           main] o.hibernate.annotations.common.Version   : HCANN000001: Hibernate Commons Annotations {5.1.2.Final}\n2023-07-24T13:43:21.341+05:30  INFO 9080 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-07-24T13:43:21.602+05:30  INFO 9080 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-07-24T13:43:21.685+05:30  WARN 9080 --- [           main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead\n2023-07-24T13:43:21.810+05:30  INFO 9080 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-07-24T13:43:22.082+05:30  INFO 9080 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-07-24T13:43:22.090+05:30  INFO 9080 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-07-24T13:43:22.154+05:30  WARN 9080 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-07-24T13:43:22.650+05:30  INFO 9080 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''\n2023-07-24T13:43:22.666+05:30  INFO 9080 --- [           main] c.e.S.SpringJpaTestApplication           : Started SpringJpaTestApplication in 5.202 seconds (process running for 6.165)\n</code></pre>\n"}],"owner":{"account_id":14365021,"reputation":31,"user_id":10376323,"display_name":"Destructive Gamer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1767,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71556175,"answer_count":2,"score":1,"last_activity_date":1690190676,"creation_date":1647847615,"question_id":71554080,"body_markdown":"When I am using my Spring Boot application along with JPA to create a table in my database named schooldb, the code runs fine but I am unable to automatically create a table and have to explicitly create it either using the CMD or any other terminal in an IDE.\r\n\r\nHere is my repository class\r\n```\r\npackage com.jpabasics.jpaBasics.enitity;\r\n\r\nimport lombok.AllArgsConstructor;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport javax.persistence.Entity;\r\nimport javax.persistence.Id;\r\n\r\n@Entity\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@Builder\r\npublic class Student {\r\n\r\n    @Id\r\n     private long studentId;\r\n     private String firstName;\r\n     private String lastName;\r\n     private String emailId;\r\n     private String guardianName;\r\n     private String guardianEmail;\r\n     private String guardianMobile;\r\n\r\n\r\n}\r\n\r\n```\r\n\r\nand here is my POM.xml file\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.6.4&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;com.jpabasics&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;jpaBasics&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;jpaBasics&lt;/name&gt;\r\n\t&lt;description&gt;Jpa basics&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;mysql&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n\t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;excludes&gt;\r\n\t\t\t\t\t\t&lt;exclude&gt;\r\n\t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n\t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n\t\t\t\t\t\t&lt;/exclude&gt;\r\n\t\t\t\t\t&lt;/excludes&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nAlso here is my application.properties file\r\n```\r\n# Database Config : mysql\r\nspring.datasource.url = jdbc:mysql://localhost:3306/schooldb\r\nspring.datasource.username = root\r\nspring.datasource.password = Lko@6388895330\r\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver\r\n\r\n# Hibernate Configuration\r\nspring.jpa.generate-ddl=true\r\nspring.jpa.hibernate.ddl.auto = update\r\nspring.jpa.show-sql = true\r\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL8Dialect\r\n\r\n```\r\nCould someone help me out with this please?","title":"Unable to create table in database using Spring Boot and JPA","body":"<p>When I am using my Spring Boot application along with JPA to create a table in my database named schooldb, the code runs fine but I am unable to automatically create a table and have to explicitly create it either using the CMD or any other terminal in an IDE.</p>\n<p>Here is my repository class</p>\n<pre><code>package com.jpabasics.jpaBasics.enitity;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport javax.persistence.Entity;\nimport javax.persistence.Id;\n\n@Entity\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@Builder\npublic class Student {\n\n    @Id\n     private long studentId;\n     private String firstName;\n     private String lastName;\n     private String emailId;\n     private String guardianName;\n     private String guardianEmail;\n     private String guardianMobile;\n\n\n}\n\n</code></pre>\n<p>and here is my POM.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.jpabasics&lt;/groupId&gt;\n    &lt;artifactId&gt;jpaBasics&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;jpaBasics&lt;/name&gt;\n    &lt;description&gt;Jpa basics&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Also here is my application.properties file</p>\n<pre><code># Database Config : mysql\nspring.datasource.url = jdbc:mysql://localhost:3306/schooldb\nspring.datasource.username = root\nspring.datasource.password = Lko@6388895330\nspring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver\n\n# Hibernate Configuration\nspring.jpa.generate-ddl=true\nspring.jpa.hibernate.ddl.auto = update\nspring.jpa.show-sql = true\nspring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL8Dialect\n\n</code></pre>\n<p>Could someone help me out with this please?</p>\n"},{"tags":["java","android","base64","base64url"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690190586,"post_id":76753041,"comment_id":135313686,"body_markdown":"Does the Java error tell you something about why it won&#39;t decode?","body":"Does the Java error tell you something about why it won&#39;t decode?"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690190650,"post_id":76753041,"comment_id":135313714,"body_markdown":"You could try *encoding* the same data using `java.util`. Where is it different?","body":"You could try <i>encoding</i> the same data using <code>java.util</code>. Where is it different?"},{"owner":{"account_id":14740025,"reputation":198,"user_id":10644885,"display_name":"Sarthak"},"score":0,"creation_date":1690190895,"post_id":76753041,"comment_id":135313768,"body_markdown":"Hey, I receive the data from the server. Consider it as a test case where the base64 decoding is expected to fail (due to + sign) but android.Util base64 is decoding this instead of throwing an error. I can&#39;t use java.util.base64.getUrlDecoder as I need to support minimum api version of 21","body":"Hey, I receive the data from the server. Consider it as a test case where the base64 decoding is expected to fail (due to + sign) but android.Util base64 is decoding this instead of throwing an error. I can&#39;t use java.util.base64.getUrlDecoder as I need to support minimum api version of 21"},{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1690201082,"post_id":76753041,"comment_id":135315876,"body_markdown":"@Sarthak, here is a relevant question and answer, _https://stackoverflow.com/q/32935783/17758716_.","body":"@Sarthak, here is a relevant question and answer, <i><a href=\"https://stackoverflow.com/q/32935783/17758716\">stackoverflow.com/q/32935783/17758716</a></i>."},{"owner":{"account_id":14740025,"reputation":198,"user_id":10644885,"display_name":"Sarthak"},"score":0,"creation_date":1690202257,"post_id":76753041,"comment_id":135316158,"body_markdown":"@Reilas Already tried that, does not work. Going by Android documentation, the flag URL_SAFE and DEFAULT are the only acceptable flags for decoder, rest all are for encoders. Now, The above is not able to catch linefeed","body":"@Reilas Already tried that, does not work. Going by Android documentation, the flag URL_SAFE and DEFAULT are the only acceptable flags for decoder, rest all are for encoders. Now, The above is not able to catch linefeed"}],"owner":{"account_id":14740025,"reputation":198,"user_id":10644885,"display_name":"Sarthak"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690190480,"creation_date":1690190480,"question_id":76753041,"body_markdown":"I am trying to develop an android application which is supposed to perform Base64 URL safe decoding but stuck at some point. When using android.Util.Base64.decode(string, Base64.URL_SAFE) vs java.util.Base64.getUrlDecoder.decode(string) the output is coming out to be different. Can someone help why this is happening\r\n\r\nString\r\n\r\n```\r\nPCFET0NUWVBFIEhUTUw+Cgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgogICAgPHRpdGxlPjNEUyAtIFNpbmdsZSBTZWxlY3Q8L3RpdGxlPgogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiLz4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSIvPgoKICAgIDxzdHlsZT4KICAgICAgICAvKiBHZW5lcmFsIFN0eWxpbmcqLwogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogJ09wZW4gU2FucycsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFwdDsKICAgICAgICB9CgogICAgICAgIG9sLCB1bCB7CiAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMDsKICAgICAgICB9CgoKICAgICAgICBzdW1tYXJ5Ojotd2Via2l0LWRldGFpbHMtbWFya2VyIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZQogICAgICAgIH0KCiAgICAgICAgc3VtbWFyeSB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBwYWRkaW5nOiA3cHggMTBweCA3cHggMTBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTNweDsKICAgICAgICB9CgogICAgICAgIGRpdi5yZWxhdGVkLWNvbnRhaW5lciB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDUwcHg7CiAgICAgICAgfQoKICAgICAgICBwLnN1bW1hcnktcCB7CiAgICAgICAgICAgIHBhZGRpbmc6IDdweCAxMHB4IDdweCAxMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjRmNGY0OwogICAgICAgICAgICBtYXJnaW4tdG9wOiAtMjJweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDsKICAgICAgICB9CgogICAgICAgIC5idXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3OTg3OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgICAgIGJvcmRlcjogMDsKICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgaGVpZ2h0OiAyLjVlbTsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIuNWVtOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgIH0KCiAgICAgICAgLmJ1dHRvbi5wcmltYXJ5IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VmODIwMDsKICAgICAgICB9CgogICAgICAgIC5idXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzM3MzczOwogICAgICAgIH0KCiAgICAgICAgLmJ1dHRvbjphY3RpdmUgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTk1OTU5OwogICAgICAgIH0KCiAgICAgICAgLmNhbnZhcyB7CiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgfQoKICAgICAgICAjY29udGVudCBoMiB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7CiAgICAgICAgfQoKICAgICAgICAuZm9ybS1jaGVjayB7CiAgICAgICAgICAgIHBhZGRpbmc6IDdweCAwIDdweCAwOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgIH0KCgogICAgICAgIC8qSW1hZ2VzKi8KICAgICAgICAubG9nby1iYW5rIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOiAxNTBweDsKICAgICAgICAgICAgaGVpZ2h0OiAzNXB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGF1dG8gMzNweDsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBTDBBQUFBMENBWUFBQURmYURrZ0FBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFYWlNVUkJWSGhlN1preFVpdzdERVgvMG9oWkFERUxJSDQ1T1RFNU1UazVPU3RnQjZ4aWZoMEtWOTJua2kyNzJ6MlBHZXRVcVdER2Jsa3RYNnZ0bnY5T1NiSVlLZnBrT1ZMMHlYS2s2SlBsU05Fbnk1R2lUNVlqUlo4c1I0bytXWTRVZmJJYzNhSy91Ymtac29lSGg5UFQwOVBwNCtQang4UGw4djcrL3RlOW5RTWRqL0dUZVJ3bWVyWEh4OGZUMTlmWGo2ZkxJMFYvWFp4RjlCaVYvMUpKMFY4WG0wUWZUUUpibXJlM3QyK2g2M1V2THk4L1BTNkxGUDExY1lqb0ZSWCszZDNkejdlWFJZcit1amhjOUZSOXZmWVNEN1lwK3V2aWNOSERubXQvQXluNjYrTHNvdStwOUp3SGVPTnpmMy8vMTdXM3Q3ZmYyeVhPQnRIYklMMnU4UHI2ZXZyejU4KzNuOUxHR00vUHowMS92YUxIaDhiTS8xdmZXdWw0czBYLytmbjUvVHJabnJtSWwrOXA3NFg3WXo3VUYvbGwvb29melIvOUltYkc1M0c0NkFtd1hFY3lXckFnVkRRdHd4Y2lycUY5bVJpYlFHdjRZN0Y1OUloK3B1QkJ4NXNwZWtTanZtdEd2d2ppMGdMaUdYTTBJdnFaOGRVNFhQUlUxbklkRmJVR2dvOFM2Rmt0RnUwenNwQzhLcUtUaGxsbUN4NTB2SkY4dDZENnF0L0k2Ri9EbnRWYXBrSnVpWDVtZkMwT0VUM0NZWVZiSWJUUVNvejRXQ0IySzhTNE5qRXNLZy90VTR4cjFTZVYzUzRJcjRLMFJIK0U0RUhIbXlGNjhxaytlWlBHSEpWWStjdG52dGQrWHFHaXI5ZXZGSXppeXl0aU5kSFBqQzlpaytoSERTR1Y0RDFzMVlnbVdSTkVZajNVSDBiQ1BPd0Vlb3V6SlhwZGhMTUVEenJlWHRIckZoTnJ4Y24zdW9neCsvU3pBclhGcWVENThrUS9PNzZJczRpZUcyMU5uQ2F4OWZncjJDUjVhSHZrazRPWTlyZlVSSCtVNEVISDJ5dDZ2VCtLUkJRbjdWcWw3WStLV2lTaVNtc0xtamNYcytPTE9Jdm9pNDBHMTBMOWVtaDdORzZya29QWGZxVGdRY2ZiSzNxRVZuejFIZ0JyKzNCYmNIcnVXODkxbnVobnh0ZkRJWHQ2RWtFZkF0TVZpZFhla0xRby9oQXZZclA3T2c5dGorS2xYZnRiYkxzS0hodE5lZy9xUDRvL1lvdXZXazZZdi9JZGk3Mkg2RWxlMnJDOThmVndpT2dWSG04cWZBVGJna3FDdUtrT2R1OVdNdzl0aitLTkVtamJQWnY1RkFQMVBaSnZqeTIrYWprWjNZcUNMcFFsUkE4SUlycWVhbTRyYUs5NWFIc1ViNVJBMjQ2eGtKbEEvVHg2b0dxaFk0M20yN0xGVnkwblcwU3Z2cFlSdlQzTTJNTVBnbTlWZFo0T0pJdnRFbTloUmcreVVieFJBbTA3QXVlZWlGdWZZcjBpNkVISEc4MjNaWXV2V2s2eTBnK2cxMXZSYXlJeEtqNkpxbFZPeEtiOVBiUTlpamRLb0czWFYzUXNRbTNiY21ieFVKOWI4cTJvcjk3NFZLaFlRZS8zaUQzOTN2aDYrQ2VWM3U1L1IxNkJRU1JTMFBZbzNzaGYxTTVFbGpZcVA0dHlMenJlYUw0dEd0L2V0eU4yTG52dWRZbTNOeFpieWJWU2dyYjErTllrWWg3YUh2bU1SQjIxMisxVzdWZmlFZFRmYUw0dGVxYnFXWlIyMjJhRk9GS2tiRzQ4Z2M2T0wrSncwU053RGRCN2U2TythNytjRnJ6RHJyY04wdmFqUlE5MlllOFY2a3hmVm5pdDN4WDQzcDZ2Ykg3MVhwbGJXOFFLbmk5UDlMUGppemhNOVBSaEJhcmdNVS9VZWhQMEo2bDZJL3pQZFZwaDFMeDRvbmFGZHUxdmlkb0xHaC8vMXlhdUJ4MHZpcjhIdXlpSmo1eVdHUG5yNWRpcm92UzEvWFRPYXI2dzJsWmtabndSbTBTLzFhalNIdlpRTW1yZTRVZmJ6eVY2MjIvTGhCVFV6eFpEUkJhN0xZeXN0VmUyZS90ZWEvbWNHVitMczRuZW13U0ZWZXhkWjYxVUFHNjRmT2VKUzY4NWwrakJicitpc1d1b2p5MVd5emU1OHZwYjYxbXczSnQ5a2x2aktSNGRaSldaOGRVNFRQVGxaam1rbEVkVUJJOUhSR1AzYkh3dXJ6RUx1a2hZQ0JhOS9weWk1MTVWQ01TK0JSMXZpN1dLREhsR05EYlBDSkx2ZFdzWndmMHl4MXFFaWkvbUNIVHIwblBJbnhtZlI3Zm9rMlFyS3Zyb2lYOE9VdlRKTUZwOWU3WnYraFFvMWY5ZmtxSlBodEh0VzdSZHNXZTF2VnVUR2FUb2sySHNZUjNoMjRyUFo5dVB6NytCRkgweUROVTZlbXRqalVOcDd3dU5vMG5SSjV2Z1BiMzM0NU5uUEFsK2krQWhSWi9zZ2owN29yWUxnTXJPNjhXZWcrNjVTZEVueTVHaVQ1WWpSWjhzUjRvK1dZNFVmYkljS2Zwa09WTDB5WEtrNkpQbFNORW55NUdpVHhiamRQb2ZRNEdISnBJRzlxOEFBQUFBU1VWT1JLNUNZSUk9KTsKICAgICAgICB9CgogICAgICAgIC5sb2dvLWVtdmNvewogICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDE0MHB4OwogICAgICAgICAgICBoZWlnaHQ6IDQ3cHg7CiAgICAgICAgICAgIGZsb2F0OnJpZ2h0OwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGF1dG8gMzNweDsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBTkFBQUFBMENBWUFBQUQ3Y2JiZ0FBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFBWWRFVllkRk52Wm5SM1lYSmxBSEJoYVc1MExtNWxkQ0EwTGpFdU52MU9DZWdBQUJlL1NVUkJWSGhlN1owSldGUkh0b0ROWkNZYmdnSUNpcmh2Z0xnTHJzalMzZERzV3pkN0wzVFREYzIrNzlxZ2dDS2lVY0VFWlZNUUJlTVM0a3Rpa2drdmJ5Wk8yRVFkNTAyU041bVorQ2JMWkROUll6YndUcDE3cTVwR2FBUUVOWHIvN3p2ZnBldlVyWHU3YnAwNnA1YmJUR0JoWVdGaFlXRmhZV0ZoWVdGaFlXSDUxVk5VZDJMcDl1cVR5dzRjT1dlS2sxaFlXTzVrKzlHemhuUDlFbXlzaEluNXE4TXpPa3hjNUYvcGJRci95b1FybzB4NGNtcXlrK1Q3aWVqenl2Q01yeXc4b3NvOGs3ZUhTdFRsVS9IcExDeVBKMkhaZTYzbkI4UVZtcm5LdnpWd0VGSDZtOFJZUkJReUdDUncxRTd2RTBObjZmYzJRVWx2TzBadDNvQ0xZMkY1UElncHJacTFQQ3p0K0JST1JBOXRKUFpnTEhjS01TSmRFa1lmSnptS0tUUFh5TGNDMGt0VzQrSlpXQjVkT0RINVlVWWN5WmQzR2doNG5VbU9raC9uK2NaOWFjU1JsUWRtbFphdkVtVTJvUkR1R3VpSW9IQ08yaWpQdTJYSWtkN1FSMTZMT1ovMlZEY3NCUW5xNUxLeVovR2xXRmdlSFJ6VTZ0ODZxVGJYb1ZEdGRqL0RRVVpnN3E3ODJpazZ2NElYdDIwT3pxNkJsMXFxdDhBL0xnOTVtaCtKMGMzeVZuMGNuUDM4MGczeXZOQzVQckh2VDNJUUV5T2lGZ1RFdDFzSWtsa2pZbmwwVUt2VnYxa3J5em5STjdhQjhFdEVtZkJrMzlwSk10UFZsUzNQNGF3NnNaV2tMWi90cmJySm5DK2lMTnlqUGxZVXZqZ05kRTdSVzBRR2p1SVBJVjBmNlpGM2FwdmxJSG1HUHBHRjVkZU9SMkp4azhiaklORkRzalE0NVk5NUI1b1c0U3pEWW12VmlSVld3aVJrUkl3aElvTnF4YW9KZ3V5OUppaUUrejI1ampFeW92bjgrS2V4bW9YbDE0bERsRnBnb0FteG1FRy9pWXNzRGF0SGpHanJnUlZtcnBIWHdSQ2h6Q1hCS1R1d2ltYU9sK29nNk1EYldRY212ZGQwL2p3YnpySDhPa2t1cTVzK3lWSHlNUk82aVNpWXFyYjBqMC9CNmxFengxTmxhOFNKb0wwWlRDcDRwNWF1d1NvYUUxZFpKZTN0MFBWV2lUSnljVExMQTZic2FJdURUV0NDKzNPYlJFaEMzRkc3b1AvbUoyeDFiemo3N2l5Y2pZVXd6VTFaUVR3UEdORjh2L2hkV0hYUHpQWlI3V2JDTlJFMTFVM3hCNXhNcyt0b3k1U1pudEVmZ0I2TmpXN1lCQ2VZWWRXUUNMTEtXdGZMY25ySFRDTHpwTGhvR3J1SWJPc05Xdm9OOHR3ZjNXS0xGMkwxUGVHbzJPeUJ5a05sb25KUjJRN0tMVGZWQjA5YWdNNGxmdHZyOUhXUjNrNmNkVFczNHRnTStxUjdZRU5rN202NDNucTRYbVR1THpIRjFmMDZNWUpuY29tRGRWREM0Zm0rY2Iwa2FtQ09TUER5QlU2L2pTS0dmOXVLTWt0RDFidm40dE1mWC94VFMyY1pPMHMxTTI1emZGUi9GVFkzUDRuVjk0d3dSajNSM0YzNUxWTytpSklWVlBUemJJdUQwdVpOY2hML0RIcExZZUwvNE9RaDRjWVdmRG5SQVpVM1JxTHZFQjZCaTZhWnVESE11bDhlcUJkdjFXV3NIalYyWVdxRE9kNHh0MGhkUTMyZ01KZUNyVkNndHhYbHVJSTNKcE00cUtGVzB5ZU9Fa1h4aTJ0TWVITDhiRVhvMmNiOENhczBiSXpJbW92R3BPOUIxQUY1R0dIdWo5eEhmK2xMTTNTVzlGb0pFc3N0MWdvZTMvQjdlVmpxUWFnTTZGMVFoVkRySTNPV1k5V1lJY2phdFJPdUFaTVNzNzFVNTFIU0U0eUd3VmFTY0JMMHhoenBiWmoyeHNrNjRjWVVmQW4zcStraDcxSDBOdzVpUUFNYWo0aGFJODdNdzFsR2hVMVFjcU0rWGxnbTRmSlVMUU9pS09xSnBhR3BsOGkxVFhpeVhzK0VIVFBwazBlQnRURHBWZWJldzJCTTI4TlJGZGhpRlkxdjJrNlZrYlAwSi9JZGljRVlPa3NwRkJsOGdjTHV0b1grQ1cxemZXTGJVSHFidVp2aUM3S21wMTMvTXp5anY3RVdKZzY3M1ZSMmR2NHVxdkFGdTJmdHhYWThWWUZRdkdWZm1RSDYyOElqeWk2djRyQVZ6dmJ3QTR1WlpxN3lUNkFTUUZDbE5XTFZtS0pVVno1bjdxYjhEcTZCeGxwVWNmVUpUUmhSMWU2NnFPUTFsMnVHenN3OVdBb1M2N0ZLSjR3Qk1UMzFzdEMwVzFuN2oyUm43RzhZdFdRL1g5ZlBhTUdBU0dPQ280RWowOWlSZ2Y4aUw2cTRxNEVQaHJOSzdVdDZlUlN1MG1XRGFIc2dRS0l1NThNRUR1ajBVTjdwYm9wYXJCb1JHeUp6MWs1MkVpUHZ3MXh6alRUcmoxaEY0NVpVVkVpdVF3eDJwcWZxODdYeW5HMnFYVFV6MUxXdEE1WVhKT3JhWjJLTER5NjBDVTRzTmVjclA0ZTZnWHZFQm5yRG5DOWJnYk1PU3NqbVBlc1crTWVWVCtOSDNwaU1PbXZhQU8yWjUwaUxneGpHeWowelBhUCt6eTQ4SXdOMXBzTUs2UjhZY1NVMTlpaDhvU3NRWnVBMnl0V2phaHpEd1VxWVZFd2FqWjAwYXgra25ia2tXMVRUNmZidG9YWU90VndXU04rSENWZCt2YXlwYWNpUWdJTU1pRFNNdFJFNTMrRGtNVVBiZ0V4Y1pKUlRkSDRIV1JORDMrTVN6alpzSEZBWWF4a1Fmd3NhRE5Uenl2QzBhdEo3MzJsQWdMbXJvb3A4UDlRd2Y0bmJmdEFacTRaRkxXcjhGaDdSYnpCbElJL2lKUGxlZS9GN1lXQ0M3V1JueG5qZ1BpRHlXQldlZmhBNk9wemxya0JlUzBGU0lUTFNYNkFjRUF0MzVRMmhldWVBemNQUnBRZE1WNHN5enFMcmFDM09NOTl2b1BUcHBya3BibGtIcFVnckt5dC9oNHQ2dUpqbG9WQ1JHMGJ4OFY5eDhyaVFobnA1TWsxdXpJczQvOUpsaWVYaFRvOXJWY2g0UUJUbFhyUU9ldW5GZ1VsRGJqeGxQQkN6V1hWdFJPNDRHNUNjeW43eEdBYzE5SS9KdzNlTXpsZmpyTU5pdFRqaktEbDNuay9zSHljN2hTOGpuN1ZET0lKLzlpNUxwckV4OTJBbFRPeFNVOVJ2c1BxdStLVHRER1c4SFhPTjJWN1J1N0dLeHBRcnY4aVV6V3k1NHNUa3A4TWlPbGFQQ0pmWXdnQmtPSCt4Q1U1U280NWlnUEdzQ3NtMlJOOFpqNEg3QkgzdjNpazgyVWQyNHN5UDdDUHpQcklKU3YzSXlEbmlNeU9PdEY4KzhQNkxoY21ucllYcXAzQ1JEdytPMFZ2ZUpUZTZOQ1JsRzA0ZU4rYjV4YjBQMTFvY0txWnEyajJ1RStNQktYbk5uVFllZUtpYkZKdHBENlVMYlErMFpqdzlFUExPOEpyRzFyclRxMWFFcFhPWVVJNDJxbHVMdkdYNk9QdVErR2VYK0U2bVF5VjZSOGRQNjhKVFRmVTJoUzRoOVQ2WUJ3S1docVRXTW5sRTRFRW8xR2x3c0dwSTFPcm1weFlHSkh4R3lwL0NpN2pobFZDa0NZV1E5eGNTSFpTOU9EQzVFY1plV0QybVNJb3FMYzFjSXErUjYwR2RHbk5sZjFzc1NCTEJSbVdjVFVOVDAvbG43Y0p6NXlEUFZvM0dXdGZKTXdaWkpFZzRyVzV1ZnJpTWFLWkgxR1VJVGVDTEJXYVZ1ZVBrY1FNMTlqb2JjU0MxdDVXbk1SeEd1TlRCLzVZVm83aWEzdldOZXFFaHgyTDlQZEQ5TVNBMHhIOWlTVWpxT2RMd1puZ3Evd3RuMXdrL2Z1L1RxTUYwd2VRSmxJZkdkL1FNcE40bTZWME5LR1ZYcmFVcFQ5YXJUMDhoaXlnMGh1d2NqcGRZTFVvWDBmZU83M09ESXE5Zlp6VGJKK1lWY3UwcFhPblBDVVdIeG0yY2djTGRkMG1vQ3BNUHlMQmZudUNnL2kxV0Q4bDhRYnoxRE04b2JIek11SEZsYUZxLzVZWUh6a1Q3Y0dSQWRCemNnNVBHbGZ6VFhwa3ZuT2ZlWVR3Y3FycWQxOXA4UmZnVXVoZDZUV2hsZU1ZUCtKUkIwVFlnTkdicW1XZ3Y3aGlXYkJKM1ROb1lldGUxQzIwRE1rVWhIR05BS0Z4SlZodVp1MGZSVSs2Z2QxQnNFZEVuNkdDNmg3SUFIajdrWHlSSS9DZFpIdEQyUUlPRmNJUVZvZW5iU1Q0SWY2MkNFdDJ3YWxDRXd1WW56VnprLzAvT21lWVcrWFhXL2xQR1dEMUJpY1lTaXdJU05lR1VLUy9pYmF3YWM1d1ZCVTZNOFREMU9OMHQ2alhZcUl6VncySkRaTjVpTkZiN25xbERtUEtYZjl3OGhrc3M5d3hqUUhUUE9LNEc5T3FIOFUvWGQvZzAzR2s0dExSeHI4RjRDUEtobmhvWkVCcVBlY2NNYVVCTUNNYzBncEdKaU5KekVpL0d4ZWhrY0EvRXNDbzhRMDdLUTQzL3UxVks5YUFENzJYQk1ZdU5uSmw0SG8wemVzTnk5enRpVlo4Qm9mSjFlU0JBcU53eENRYlNwQmVmNXhmN1JYcFZsYzdRRWRWTElmRStjSTZWSUw2ZmdRdlY2cWRtZVViVGVxZ0x4eWoxdUJuUVdtbE9QWE9kTU9UcEltNUhsMVNOYUQ4bFliVTRheC85blpBbmhobGNUdXcyVFQwK2NJZ0hRb1AyditPa01hZXgyOCtqdHNQOTYvNkdRN3dRbHpwNVNaS0VzNktHRlVaN0lFTm42YkE5MEVqbFhnMElRRDM3bTB6akNLY1dDdUpmd2NrYVZpbVZ2N1B3aUtMSGV5RFdnc1FYc0lwbXVBWUVMQWxPVG1MS1lYcmhkZExzUkt6cWg3cTJlZXBzYjFVdnVhYUZtL0lxaEpCWVRRTUdOTk5UaGNzS2g4bURjVE1nMUxicWlUSERobUdjUEdKTU9SRnpZYWFZZENKMm9rd1pWajE0VUE5S0d4Q3EwQWFjTkdZMFhnNWVlcVRMdHdzTTVSQ1M2bmJ1K2VNWFE3U01oME0xZEFkbzRuT1l1a2FHUTY5SnpmWWEyZ05wR3hEeW5qZjE3RVZCd3hWRHJuQVNMa1ludWtJNFFuRGVyaFZvbkhZYnhqYXdsc0pSYlFuQ0tobzBNTi9PTkI0Uk5aVWYrUWxPMWtBTUNCckZVQ0VjVUx6L3NQRkN2L2dmU0tOSEh1bHJmcnphQUtzMUxBcUl6eWRsd25qRFFaa1hqbFVhaE9ybXB5eUZpZlI5UWQ3NWZuSGpaa0JySXJMcGE0QXM4azhZdFFGNUpHMmZpOEowK2xtREJHYVdIY0dxQnc4dnBvQU80ZGJKY243QlNmZk15VXNSZ3BwMjExUElZR2dqT2R6bGRmV2x5NHJVdWs2djQ4UndhSGszL01QVzFyNllHRmJjb2JjSGwyOGxTQnAyQ0xkR21uMmZKaEg2WXhPY29vYTZnd1pyN3E2OEZxYmVTemZxOVpLYzVTWThHYm8zWm1IUUtpak9uajVCaTVGNElNQWxkbHM4czhXSDd1eW8yZDR4Q1ZoRjQ1ZGFhanFOcjJEV1dPeGhkM3Z5UDNYTldCbHhwYThRQXpKemlmeHNwT09TNFRMSEt3YlA4TklUSUtNMm9BWCtTWE1uT1pFRjMzREtQYW1vR0tzZVBGUDVzaGk0cVlYK0NmYzBCbXA1UDhXeTRVSkFXazJIYXpjWVIzVUhqNnJ0NUw5UjIrRzI0ZVdMY1hOcU90MWJ0WTBuK2JBSHRWR1pmUXFmVHJOT3V0bVdWUGg4di9naDk4VGR6MWs0VXgwR2hIakN3bDM1ZC9KZ1Y0YWx2K1lnVVQrendDL3VLbW1neTRKVHp1QzgvZEEyb0x0NUlJS3BhK1JGY3EwcHZJZ2Y0a29QYWhaR2w0Y3cyN0ZBb0xGWkJTUU91bUVVV0JHV2xrdnlnZ1JuN3k3RXFqRmxsbWNVSGdPaEVJNHIvUUxxQnF0R2hGZHljVFk4Q3hDWVNKbmxFM3QveDBDdC8xQlAxalhQTDhqWVlRZGZFTjFjeitFMzJ6U3pOY09oNlVLWTliSHVrUFRxZHBjenlDaDZ3ZVBVZFhyKzQzaDM4SUg2OThLZ04zN2kySVdnOWRYdHZNKzFqVWRaNFlrZWNoaWw1eUNLWjBwaXNBbEoyUU1ORDZadGtRY2FjdnNLWTBCTXBkNi9hZXlCaEczZTcyZmdJS0xISFpPZEpMZlhTTE82U2FNeGRKSjhxcTVzSG5RZjIwZzlFT0NzS3ZDQ2NKRXhUaEcxWHA1N0d0TGp0MWV0TUtLM3hUQkdhK29xSHpBbTArYlF5NjN6WjdoSDBmc1NRUXcyaVQ1YkVabzc2bGNVZ3JKMkxWd1drcklycHV6UWZKeEU0NU8yQTQzZG1Ic0NXU3ZOR3ZFT2Y1aWdnVDE1cEJ3VGJzU1BaVTJ2VE1mcSswUExsWVNaOVJlOE94c3ZCSDZNR25sWlk1ZFFkcWpEMmE2cFcyNVgxUGk4Mld5ZnlCc3dTUE5PM3U2SFQrbEgwL25rWnlFdm5IUDBZdEFXVk1hKzZnN1hINUF4OUJ4cTUxNUQ0Vm9iOGpTcGIzMmd0aU1oMmFzZjhwOCtla0d3RzQxM2JoUERxZWx3b1dJUGVyK2w3OEJzaWVHbzhqVUdCUHV1cHJzcFAyZTJ5NkI3U1MyT3hxcEJZVUk0cGlIZHI0VlVyQnFBclRqak9HbThtZ1pqSDk3am9GUVBHSU1RUm1OQTBBbWljUTR5VU9ZYXlKaCs1aVpzWGJBMExQVnRVaGV3aWgrU1UyYUhUOUhKOHREVWJISU9pQWxYOWlueW9DdXhldGpZaWpNM21mSGsxNkFNVTU2c1o1MHN0N0N5K1UxNmpBbHJWdVp1aW44ejlVSjdJWGgxbzkrbTNhRUE0MWtTRE4rdHIxN24rY2IwZXluenZ0Rk1DWjk4OWNPMGVVYzZmYlByT2p4aE92bGlUWWZiVCtoNDg0WHpuSjZLUDZEeFNodi9WbU4zMEhXUXVrNlA2NGZhblpGd3JsZTFjVzVXZHlEdjB1SCtNMHE3ZVBSQ1FDZEt6NFpKZ3FiekE3ZXhIN3NRc1A1SWw4OFh4SEJvNDJsMy9mTGtsU2lCVTNRK2N1dk1ROXZUZUZZVFppd09UTFVsR3l3Tm5hUTlpVHRyaDl6WnF4M0MyVW5HT1lRYlpCSkJtNWlkdFZPbmNLWDAyZ3VaS1VKamtDRkQwSkZNSW1nVFUzTEluVXlOUXgzTzhveSt4R3lQWXE1ckpVZ2MwdnNRMUsydHY3VVdKcjVGbmdXY085bFIzT3NZbGYrMlcxTGhrRDg3ZHVUY09UM3Y1Q0tuMWFLTXQ1RVJhN1lid1hHUklQNVZLQnRubmJBMEpITWplR1p5ZndZT1liMmJGRnZPb3ZHaU5jNHlnUExtMW9sTGcxT2Rsd1FsZlF0bGtqcEZudWlUd3ZxVDlHOXJQQlNjN3BaTTN0L0dNVzY4N0dYMjhsOWk4NnM3M1BJUHRYR3dPT1hYZHdYa243a1NHd3Q1UU01ZVZobmlVd2ZsekpVbzYvb3UzemVxMmhpdmc0d05wQWVOaTA0MVh4Rk9oRHdMQXhML1RGZUdSL1QzU21YZkJrRTBLTWFyNDNTanVJcVRkYUx0Z1pEaDNkYXpELzhLQkpWQi8xTHFhQ1QvMEhGTjd6Z1NEd1NnY0NxSTZRQkUxQlN1N0taUDVwN1pXRFVvby9GQUFQSkN2NW52RTRkL3Q2S3Y4ZFAxNENDK1dWcmYwdTkxaGFGWWhlcC9jVWp5N3lkcTdabURDTURBVWRRN3pVM3gxUXdQVmZsME4wVytyU1F6MzFhVW1UL2RMU29maGN2dlRIV1Jmd2ZyTWN3dWJPWTgrTHhhbkhGMnNBa0phMkdTa25uZmpOd3Z2VFdwMXlZdytSTTloN0Q4NWFGcGFpaC9ubDlzL2x5LzJHcmt0YjZiaExkMGtlODJqYS80MStxZ2xCbmcxWTYrMUdvSjBuam1EWE1vdjZXbDVibngyb3AwWDJpNkdENm51cDIvSHhuZVRXMnZVOXZCLzdTeE95QVFaNXV3NTloWkt5YUdENmRRS1BKN25EekJVcGl3aW93am9MTFdSV1R2eENxZGFIdWdpZlNST1pjcEE4TEFrVW80VlZCMVFoTTJqdFNBV2xHdnU4QXYvbldZS2JNV0pFYmhaSjJNMW9BQUZDYk5NdFI2aDRkOGJ4VGU3TUZaaGsxejg1V25sZ1NueEJvNVNlamVIaFlyKytxUi9IM25aL0kzSTFQNWltdDJrZ3g1WldXbnpoM1RndlF5SVRJTTNPbjFsVU84Q3puZXFZZjJnanJiMXlKMzdLWGYyRDF5L0p6TnJvckdNN3NQTkJXWFZSeHIzRlBSRkxTcnZMR3F2dm1OU1BwQ3Z4WmFPdFhQMVhmNnJhM3I4bnk5R28xdHRBMm51b1AzWFgyWFgvSHJWOVJHT0R2TkduRldBVk01OERwRE50M0lZTUZ4b1gvQ3YwaUZvUmorKytEMEVycG5HUXArUXRHWHhwd0lhaXlsVU11QWpKd2pyT0czSEdCTVlZRUczTnZ2WWtDQWE1UjZ0cG1MdkJHMnkrQWtuVXptU0pkQTJjWklVR2hDN2F4N2VkZ0dCS3dTWnpiQXVYQ1BjTy9JWS96QWoyZW0wVWZEV3JuYUNKVlpZZVlTK1Ruc3ppYlA2YzRHVGY2R01CSmQ4MU9iNEtSQ1FYSlp2K2VzQzlYMm80YmN1SzM3WUt3TEwrejFsY2VVcVcxTThKTGZBdi80S3k1eCtVRjNidDBwM3RkQXI3bVZsTmZMZHI5d2ZNZnpMemFkT1ZCOXB0KzAva05KMDlYa1owOWRqbDNYMkMyc3FPbmcvNHNZREJvUDBjZWFkdjdOMm5hM2JkVVhCQ2I0RkExQ29mQkpFNTdzQ2xRVWl2bC9JcHNpMTBoem1rZ0lBUlczTENTbDM0cTlMdEwzVkMzaXh4ZFpqNlVjUGZzSFRZZ0tLL2drM1R1MXlMcTJkZURMWmZlQ2R2bUMxRkpyZUg4SHE0WUYvTWcvT1IvRVJiWHRubjg3QVlDMW8rVmhxZFkrS1R1M29YRmRPWHBlV2hKV1Bzc2pxandrYjIvdXhnaTE5VWhlcjlBRzNrYUYzNXdJeU5oWk1JMHZwOHZXUjJWRCtZc0RrOHY1aVlWQ1ZDY0RmcmlUVUxMdmlDOXpQT3BiZHVEWXZ2cW1ON3hMOWg1VjBzcXg1TXlmWlU1VmJTNkswMWRpbHJkMEtvZjlvaFRoekYvVDlWdXVLR2NlN3ZSVk5GNE1lcWUyMC9VcU1Sb3QrUVdOY1Q2b2JYY1ZuZnViV3VlL05sa2p6ZlludmMxMDlCQWd6WkFqQ2tLZk5WdFBwcnRIWGN0K3Z2SGhmZ09SNWZHaDVYM2xsQ01YZk42SGhsN1Q3dm90R3RDLzA5Z05odUNtT1BnZVIxeU5CSTRITzV3MHg0WXVRUjQ2NTUxRDczSGVPZHpsMWF1OTdhYTZ6Mmg2VU5qMlFVTlh3T0c2YnErNzdpdUwzN3YzNldsdVNucGZHTXowWkpZM2JQSlBMMzNSd0NIOE5oTnowek52dHhkNHgraGMvR05oZVdBMFhCRElxOXA0eDlGNHBZY1lnMjV4dnVNelkwQjFuVjQzcTlxNHgyczYzRUpQWDFJc3dVVVBDNWZZd2hJd0VnalJuR08ydHMvM2pUdkdlQjBjdXFFUWJycDdaQ2JPenNMeThISzZPM0Z5UTVkL0VCcTNCSjI0SkQ1eXBNdnJGRElRUmpyZ3lEMTEvR0xvcVgzbmdndGNzd1RVeWtnaDVSaVQrdTdlK2xkMXp0c1BSVkRlSGlzREI5RTNZQ3d3cTJYdXJxQU5Sek5nUk1iRFZSVzhock96c0R3NjhHSUtFZ3lkNGY4Q3dRNWdKYlVoSXFjaElHUDNYVU0yQXV4OU1uU1d2TWw0bXY2aWg4cUVLVW9UWGtRR3pzN0M4dWdSc25tUDZ6UytndDR3Q1Y0RHllMFpYdEgvYXhXWWRIQ3RPRWZNalNuZ0ZOV2U1aFJWblVESEV4eGwwWXVjU1k0U2pyMWk4NzRaSHFvL0RXWThzTzVpekpGK0U1aGRsb292dzhMeTZGSjgrSlN4VFZCU2hSRkhxbmtuUlRzRWd4L2FnRlY0OENpd3JhUnZYeGd6em9IUFRCcnpDekFXSHNybTdUV25SelNPWW1INTFRT0xiVE85b2wrWTRpTFgvTnVTdnVQZ1FveHBDazkyMjlRMTRpV09JbzgxSEpiSEcrV095a251OFlXNUs4UFNMMDdoeXY0T0srR013WUNuWWJiWHdBdGw1dTZLTHl3RmlXMUxRMU5UMTh2U2gvVVRVQ3dzanhXd2NtMHJ5akxXNTRpTTlXMlJ3QkVKcEZXMjNQMi8yYkd3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0R3YVRKandIK1FkblNJbWprM3dBQUFBQUVsRlRrU3VRbUNDKTsKICAgICAgICB9CgogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keSBjbGFzcz0iIj4KPGRpdiBpZD0icGFnZS13cmFwcGVyIj4KICAgIDwhLS0gSGVhZGVyIFNlY3Rpb24gLS0+CiAgICA8aGVhZGVyIGlkPSJoZWFkZXIiIGNsYXNzPSJjYW52YXMiPgogICAgICAgIDxzcGFuIGNsYXNzPSJsb2dvLWVtdmNvIj48L3NwYW4+CiAgICAgICAgPHNwYW4gY2xhc3M9ImxvZ28tYmFuayI+PC9zcGFuPgogICAgPC9oZWFkZXI+CgogICAgPCEtLSBNYWluIENvbnRlbnQgU2VjdGlvbiAtLT4KICAgIDxzZWN0aW9uIGlkPSJjb250ZW50IiBjbGFzcz0iY2FudmFzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8aDI+UGF5bWVudCBTZWN1cml0eTwvaDI+CiAgICAgICAgICAgIDxwPkhpIFN0ZXZlLCB5b3VyIG9ubGluZSBwYXltZW50IGlzIGJlaW5nIHNlY3VyZWQgdXNpbmcgQ2FyZCBOZXR3b3JrLiBQbGVhc2Ugc2VsZWN0IHdoZXJlIHlvdSB3b3VsZCBsaWtlIHRvCiAgICAgICAgICAgICAgICByZWNlaXZlIHRoZSBjb2RlIGZyb20gWW91ckJhbms8L3A+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxmb3JtIGFjdGlvbj0iSFRUUFM6Ly9FTVYzRFMvY2hhbGxlbmdlIiBtZXRob2Q9ImdldCIgbmFtZT0iY2FyZGhvbGRlcklucHV0Ij4KICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIGNsYXNzPSJmb3JtLWNoZWNrIiBuYW1lPSJkZWxpdmVyeU1ldGhvZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9Ik1vYmlsZSAqKioqKioqKjMyMSIgY2hlY2tlZD4KICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICBNb2JpbGUgKioqKioqKiozMjE8YnI+CiAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBjbGFzcz0iZm9ybS1jaGVjayIgbmFtZT0iZGVsaXZlcnlNZXRob2QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSJFbWFpbCAqKioqKioqKioqQGcqKioqLmNvbSI+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgRW1haWwgKioqKioqKioqKkBnKioqKi5jb208YnI+PGJyPgogICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzdWJtaXRBdXRoZW50aWNhdGlvbkxhYmVsIiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidXR0b24iIHZhbHVlPSJORVhUIj4KICAgICAgICAgICAgPC9mb3JtPgogICAgICAgIDwvZGl2PgogICAgPC9zZWN0aW9uPgoKICAgIDwhLS0gSGVscCBTZWN0aW9uIC0tPgogICAgPHNlY3Rpb24gaWQ9ImhlbHAiIGNsYXNzPSJjb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InJvdyBkZXRhaWxlZCI+CiAgICAgICAgICAgIDxkZXRhaWxzPgogICAgICAgICAgICAgICAgPHN1bW1hcnk+TGVhcm4gbW9yZSBhYm91dCBhdXRoZW50aWNhdGlvbjwvc3VtbWFyeT4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJzdW1tYXJ5LXAiPkF1dGhlbnRpY2F0aW9uIGluZm9ybWF0aW9uIHdpbGwgYmUgZGlzcGxheWVkIGhlcmUuPC9wPgogICAgICAgICAgICA8L2RldGFpbHM+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRldGFpbHM+CiAgICAgICAgICAgICAgICA8c3VtbWFyeT5OZWVkIHNvbWUgaGVscD88L3N1bW1hcnk+CiAgICAgICAgICAgICAgICA8cCBjbGFzcz0ic3VtbWFyeS1wIj5IZWxwIGNvbnRlbnQgd2lsbCBiZSBkaXNwbGF5ZWQgaGVyZS48L3A+CiAgICAgICAgICAgIDwvZGV0YWlscz4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCjwvZGl2Pgo8L2JvZHk+CjwvaHRtbD4\r\n```\r\n\r\nExpected output is an error (as thrown by Java.Util) while android is successfully decoding it\r\n\r\nHere is the code snippet for android method\r\n\r\n```\r\ninternal fun base64UrlDecode(input: String): ByteArray {\r\n        try {\r\n            return Base64.decode(input, Base64.URL_SAFE)\r\n        } catch (_: Exception) {\r\n            throw InvalidInputException()\r\n        }\r\n    }\r\n```","title":"Base64 Url safe decoding gives different result for Android.Util.Base64 and java.util.base64","body":"<p>I am trying to develop an android application which is supposed to perform Base64 URL safe decoding but stuck at some point. When using android.Util.Base64.decode(string, Base64.URL_SAFE) vs java.util.Base64.getUrlDecoder.decode(string) the output is coming out to be different. Can someone help why this is happening</p>\n<p>String</p>\n<pre><code>PCFET0NUWVBFIEhUTUw+Cgo8aHRtbCBsYW5nPSJlbiI+CjxoZWFkPgogICAgPHRpdGxlPjNEUyAtIFNpbmdsZSBTZWxlY3Q8L3RpdGxlPgogICAgPG1ldGEgY2hhcnNldD0idXRmLTgiLz4KICAgIDxtZXRhIG5hbWU9InZpZXdwb3J0IiBjb250ZW50PSJ3aWR0aD1kZXZpY2Utd2lkdGgsIGluaXRpYWwtc2NhbGU9MSIvPgoKICAgIDxzdHlsZT4KICAgICAgICAvKiBHZW5lcmFsIFN0eWxpbmcqLwogICAgICAgIGJvZHkgewogICAgICAgICAgICBmb250LWZhbWlseTogJ09wZW4gU2FucycsIHNhbnMtc2VyaWY7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFwdDsKICAgICAgICB9CgogICAgICAgIG9sLCB1bCB7CiAgICAgICAgICAgIGxpc3Qtc3R5bGU6IG5vbmU7CiAgICAgICAgICAgIHBhZGRpbmctbGVmdDogMDsKICAgICAgICB9CgoKICAgICAgICBzdW1tYXJ5Ojotd2Via2l0LWRldGFpbHMtbWFya2VyIHsKICAgICAgICAgICAgZGlzcGxheTogbm9uZQogICAgICAgIH0KCiAgICAgICAgc3VtbWFyeSB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7CiAgICAgICAgICAgIGNvbG9yOiAjMzMzOwogICAgICAgICAgICBwYWRkaW5nOiA3cHggMTBweCA3cHggMTBweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTNweDsKICAgICAgICB9CgogICAgICAgIGRpdi5yZWxhdGVkLWNvbnRhaW5lciB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDUwcHg7CiAgICAgICAgfQoKICAgICAgICBwLnN1bW1hcnktcCB7CiAgICAgICAgICAgIHBhZGRpbmc6IDdweCAxMHB4IDdweCAxMHB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kOiAjZjRmNGY0OwogICAgICAgICAgICBtYXJnaW4tdG9wOiAtMjJweDsKICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMDsKICAgICAgICB9CgogICAgICAgIC5idXR0b24gewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3OTg3OwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgICAgIGJvcmRlcjogMDsKICAgICAgICAgICAgY29sb3I6ICNmZmZmZmY7CiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDsKICAgICAgICAgICAgaGVpZ2h0OiAyLjVlbTsKICAgICAgICAgICAgbGluZS1oZWlnaHQ6IDIuNWVtOwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7CiAgICAgICAgICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgICAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsKICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgIH0KCiAgICAgICAgLmJ1dHRvbi5wcmltYXJ5IHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2VmODIwMDsKICAgICAgICB9CgogICAgICAgIC5idXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNzM3MzczOwogICAgICAgIH0KCiAgICAgICAgLmJ1dHRvbjphY3RpdmUgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTk1OTU5OwogICAgICAgIH0KCiAgICAgICAgLmNhbnZhcyB7CiAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7CiAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlZWU7CiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgICAgICAgfQoKICAgICAgICAjY29udGVudCBoMiB7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDA7CiAgICAgICAgfQoKICAgICAgICAuZm9ybS1jaGVjayB7CiAgICAgICAgICAgIHBhZGRpbmc6IDdweCAwIDdweCAwOwogICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNXB4OwogICAgICAgIH0KCgogICAgICAgIC8qSW1hZ2VzKi8KICAgICAgICAubG9nby1iYW5rIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOwogICAgICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgICAgIHdpZHRoOiAxNTBweDsKICAgICAgICAgICAgaGVpZ2h0OiAzNXB4OwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGF1dG8gMzNweDsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBTDBBQUFBMENBWUFBQURmYURrZ0FBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFYWlNVUkJWSGhlN1preFVpdzdERVgvMG9oWkFERUxJSDQ1T1RFNU1UazVPU3RnQjZ4aWZoMEtWOTJua2kyNzJ6MlBHZXRVcVdER2Jsa3RYNnZ0bnY5T1NiSVlLZnBrT1ZMMHlYS2s2SlBsU05Fbnk1R2lUNVlqUlo4c1I0bytXWTRVZmJJYzNhSy91Ymtac29lSGg5UFQwOVBwNCtQang4UGw4djcrL3RlOW5RTWRqL0dUZVJ3bWVyWEh4OGZUMTlmWGo2ZkxJMFYvWFp4RjlCaVYvMUpKMFY4WG0wUWZUUUpibXJlM3QyK2g2M1V2THk4L1BTNkxGUDExY1lqb0ZSWCszZDNkejdlWFJZcit1amhjOUZSOXZmWVNEN1lwK3V2aWNOSERubXQvQXluNjYrTHNvdStwOUp3SGVPTnpmMy8vMTdXM3Q3ZmYyeVhPQnRIYklMMnU4UHI2ZXZyejU4KzNuOUxHR00vUHowMS92YUxIaDhiTS8xdmZXdWw0czBYLytmbjUvVHJabnJtSWwrOXA3NFg3WXo3VUYvbGwvb29melIvOUltYkc1M0c0NkFtd1hFY3lXckFnVkRRdHd4Y2lycUY5bVJpYlFHdjRZN0Y1OUloK3B1QkJ4NXNwZWtTanZtdEd2d2ppMGdMaUdYTTBJdnFaOGRVNFhQUlUxbklkRmJVR2dvOFM2Rmt0RnUwenNwQzhLcUtUaGxsbUN4NTB2SkY4dDZENnF0L0k2Ri9EbnRWYXBrSnVpWDVtZkMwT0VUM0NZWVZiSWJUUVNvejRXQ0IySzhTNE5qRXNLZy90VTR4cjFTZVYzUzRJcjRLMFJIK0U0RUhIbXlGNjhxaytlWlBHSEpWWStjdG52dGQrWHFHaXI5ZXZGSXppeXl0aU5kSFBqQzlpaytoSERTR1Y0RDFzMVlnbVdSTkVZajNVSDBiQ1BPd0Vlb3V6SlhwZGhMTUVEenJlWHRIckZoTnJ4Y24zdW9neCsvU3pBclhGcWVENThrUS9PNzZJczRpZUcyMU5uQ2F4OWZncjJDUjVhSHZrazRPWTlyZlVSSCtVNEVISDJ5dDZ2VCtLUkJRbjdWcWw3WStLV2lTaVNtc0xtamNYcytPTE9Jdm9pNDBHMTBMOWVtaDdORzZya29QWGZxVGdRY2ZiSzNxRVZuejFIZ0JyKzNCYmNIcnVXODkxbnVobnh0ZkRJWHQ2RWtFZkF0TVZpZFhla0xRby9oQXZZclA3T2c5dGorS2xYZnRiYkxzS0hodE5lZy9xUDRvL1lvdXZXazZZdi9JZGk3Mkg2RWxlMnJDOThmVndpT2dWSG04cWZBVGJna3FDdUtrT2R1OVdNdzl0aitLTkVtamJQWnY1RkFQMVBaSnZqeTIrYWprWjNZcUNMcFFsUkE4SUlycWVhbTRyYUs5NWFIc1ViNVJBMjQ2eGtKbEEvVHg2b0dxaFk0M20yN0xGVnkwblcwU3Z2cFlSdlQzTTJNTVBnbTlWZFo0T0pJdnRFbTloUmcreVVieFJBbTA3QXVlZWlGdWZZcjBpNkVISEc4MjNaWXV2V2s2eTBnK2cxMXZSYXlJeEtqNkpxbFZPeEtiOVBiUTlpamRLb0czWFYzUXNRbTNiY21ieFVKOWI4cTJvcjk3NFZLaFlRZS8zaUQzOTN2aDYrQ2VWM3U1L1IxNkJRU1JTMFBZbzNzaGYxTTVFbGpZcVA0dHlMenJlYUw0dEd0L2V0eU4yTG52dWRZbTNOeFpieWJWU2dyYjErTllrWWg3YUh2bU1SQjIxMisxVzdWZmlFZFRmYUw0dGVxYnFXWlIyMjJhRk9GS2tiRzQ4Z2M2T0wrSncwU053RGRCN2U2TythNytjRnJ6RHJyY04wdmFqUlE5MlllOFY2a3hmVm5pdDN4WDQzcDZ2Ykg3MVhwbGJXOFFLbmk5UDlMUGppemhNOVBSaEJhcmdNVS9VZWhQMEo2bDZJL3pQZFZwaDFMeDRvbmFGZHUxdmlkb0xHaC8vMXlhdUJ4MHZpcjhIdXlpSmo1eVdHUG5yNWRpcm92UzEvWFRPYXI2dzJsWmtabndSbTBTLzFhalNIdlpRTW1yZTRVZmJ6eVY2MjIvTGhCVFV6eFpEUkJhN0xZeXN0VmUyZS90ZWEvbWNHVitMczRuZW13U0ZWZXhkWjYxVUFHNjRmT2VKUzY4NWwrakJicitpc1d1b2p5MVd5emU1OHZwYjYxbXczSnQ5a2x2aktSNGRaSldaOGRVNFRQVGxaam1rbEVkVUJJOUhSR1AzYkh3dXJ6RUx1a2hZQ0JhOS9weWk1MTVWQ01TK0JSMXZpN1dLREhsR05EYlBDSkx2ZFdzWndmMHl4MXFFaWkvbUNIVHIwblBJbnhtZlI3Zm9rMlFyS3Zyb2lYOE9VdlRKTUZwOWU3WnYraFFvMWY5ZmtxSlBodEh0VzdSZHNXZTF2VnVUR2FUb2sySHNZUjNoMjRyUFo5dVB6NytCRkgweUROVTZlbXRqalVOcDd3dU5vMG5SSjV2Z1BiMzM0NU5uUEFsK2krQWhSWi9zZ2owN29yWUxnTXJPNjhXZWcrNjVTZEVueTVHaVQ1WWpSWjhzUjRvK1dZNFVmYkljS2Zwa09WTDB5WEtrNkpQbFNORW55NUdpVHhiamRQb2ZRNEdISnBJRzlxOEFBQUFBU1VWT1JLNUNZSUk9KTsKICAgICAgICB9CgogICAgICAgIC5sb2dvLWVtdmNvewogICAgICAgICAgICBkaXNwbGF5OmlubGluZS1ibG9jazsKICAgICAgICAgICAgd2lkdGg6IDE0MHB4OwogICAgICAgICAgICBoZWlnaHQ6IDQ3cHg7CiAgICAgICAgICAgIGZsb2F0OnJpZ2h0OwogICAgICAgICAgICBiYWNrZ3JvdW5kLXNpemU6IGF1dG8gMzNweDsKICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDsKICAgICAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKGRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBTkFBQUFBMENBWUFBQUQ3Y2JiZ0FBQUFBWE5TUjBJQXJzNGM2UUFBQUFSblFVMUJBQUN4and2OFlRVUFBQUFKY0VoWmN3QUFEc01BQUE3REFjZHZxR1FBQUFBWWRFVllkRk52Wm5SM1lYSmxBSEJoYVc1MExtNWxkQ0EwTGpFdU52MU9DZWdBQUJlL1NVUkJWSGhlN1owSldGUkh0b0ROWkNZYmdnSUNpcmh2Z0xnTHJzalMzZERzV3pkN0wzVFREYzIrNzlxZ2dDS2lVY0VFWlZNUUJlTVM0a3Rpa2drdmJ5Wk8yRVFkNTAyU041bVorQ2JMWkROUll6YndUcDE3cTVwR2FBUUVOWHIvN3p2ZnBldlVyWHU3YnAwNnA1YmJUR0JoWVdGaFlXRmhZV0ZoWVdGaFlXSDUxVk5VZDJMcDl1cVR5dzRjT1dlS2sxaFlXTzVrKzlHemhuUDlFbXlzaEluNXE4TXpPa3hjNUYvcGJRci95b1FybzB4NGNtcXlrK1Q3aWVqenl2Q01yeXc4b3NvOGs3ZUhTdFRsVS9IcExDeVBKMkhaZTYzbkI4UVZtcm5LdnpWd0VGSDZtOFJZUkJReUdDUncxRTd2RTBObjZmYzJRVWx2TzBadDNvQ0xZMkY1UElncHJacTFQQ3p0K0JST1JBOXRKUFpnTEhjS01TSmRFa1lmSnptS0tUUFh5TGNDMGt0VzQrSlpXQjVkT0RINVlVWWN5WmQzR2doNG5VbU9raC9uK2NaOWFjU1JsUWRtbFphdkVtVTJvUkR1R3VpSW9IQ08yaWpQdTJYSWtkN1FSMTZMT1ovMlZEY3NCUW5xNUxLeVovR2xXRmdlSFJ6VTZ0ODZxVGJYb1ZEdGRqL0RRVVpnN3E3ODJpazZ2NElYdDIwT3pxNkJsMXFxdDhBL0xnOTVtaCtKMGMzeVZuMGNuUDM4MGczeXZOQzVQckh2VDNJUUV5T2lGZ1RFdDFzSWtsa2pZbmwwVUt2VnYxa3J5em5STjdhQjhFdEVtZkJrMzlwSk10UFZsUzNQNGF3NnNaV2tMWi90cmJySm5DK2lMTnlqUGxZVXZqZ05kRTdSVzBRR2p1SVBJVjBmNlpGM2FwdmxJSG1HUHBHRjVkZU9SMkp4azhiaklORkRzalE0NVk5NUI1b1c0U3pEWW12VmlSVld3aVJrUkl3aElvTnF4YW9KZ3V5OUppaUUrejI1ampFeW92bjgrS2V4bW9YbDE0bERsRnBnb0FteG1FRy9pWXNzRGF0SGpHanJnUlZtcnBIWHdSQ2h6Q1hCS1R1d2ltYU9sK29nNk1EYldRY212ZGQwL2p3YnpySDhPa2t1cTVzK3lWSHlNUk82aVNpWXFyYjBqMC9CNmxFengxTmxhOFNKb0wwWlRDcDRwNWF1d1NvYUUxZFpKZTN0MFBWV2lUSnljVExMQTZic2FJdURUV0NDKzNPYlJFaEMzRkc3b1AvbUoyeDFiemo3N2l5Y2pZVXd6VTFaUVR3UEdORjh2L2hkV0hYUHpQWlI3V2JDTlJFMTFVM3hCNXhNcyt0b3k1U1pudEVmZ0I2TmpXN1lCQ2VZWWRXUUNMTEtXdGZMY25ySFRDTHpwTGhvR3J1SWJPc05Xdm9OOHR3ZjNXS0xGMkwxUGVHbzJPeUJ5a05sb25KUjJRN0tMVGZWQjA5YWdNNGxmdHZyOUhXUjNrNmNkVFczNHRnTStxUjdZRU5rN202NDNucTRYbVR1THpIRjFmMDZNWUpuY29tRGRWREM0Zm0rY2Iwa2FtQ09TUER5QlU2L2pTS0dmOXVLTWt0RDFidm40dE1mWC94VFMyY1pPMHMxTTI1emZGUi9GVFkzUDRuVjk0d3dSajNSM0YzNUxWTytpSklWVlBUemJJdUQwdVpOY2hML0RIcExZZUwvNE9RaDRjWVdmRG5SQVpVM1JxTHZFQjZCaTZhWnVESE11bDhlcUJkdjFXV3NIalYyWVdxRE9kNHh0MGhkUTMyZ01KZUNyVkNndHhYbHVJSTNKcE00cUtGVzB5ZU9Fa1h4aTJ0TWVITDhiRVhvMmNiOENhczBiSXpJbW92R3BPOUIxQUY1R0dIdWo5eEhmK2xMTTNTVzlGb0pFc3N0MWdvZTMvQjdlVmpxUWFnTTZGMVFoVkRySTNPV1k5V1lJY2phdFJPdUFaTVNzNzFVNTFIU0U0eUd3VmFTY0JMMHhoenBiWmoyeHNrNjRjWVVmQW4zcStraDcxSDBOdzVpUUFNYWo0aGFJODdNdzFsR2hVMVFjcU0rWGxnbTRmSlVMUU9pS09xSnBhR3BsOGkxVFhpeVhzK0VIVFBwazBlQnRURHBWZWJldzJCTTI4TlJGZGhpRlkxdjJrNlZrYlAwSi9JZGljRVlPa3NwRkJsOGdjTHV0b1grQ1cxemZXTGJVSHFidVp2aUM3S21wMTMvTXp5anY3RVdKZzY3M1ZSMmR2NHVxdkFGdTJmdHhYWThWWUZRdkdWZm1RSDYyOElqeWk2djRyQVZ6dmJ3QTR1WlpxN3lUNkFTUUZDbE5XTFZtS0pVVno1bjdxYjhEcTZCeGxwVWNmVUpUUmhSMWU2NnFPUTFsMnVHenN3OVdBb1M2N0ZLSjR3Qk1UMzFzdEMwVzFuN2oyUm43RzhZdFdRL1g5ZlBhTUdBU0dPQ280RWowOWlSZ2Y4aUw2cTRxNEVQaHJOSzdVdDZlUlN1MG1XRGFIc2dRS0l1NThNRUR1ajBVTjdwYm9wYXJCb1JHeUp6MWs1MkVpUHZ3MXh6alRUcmoxaEY0NVpVVkVpdVF3eDJwcWZxODdYeW5HMnFYVFV6MUxXdEE1WVhKT3JhWjJLTER5NjBDVTRzTmVjclA0ZTZnWHZFQm5yRG5DOWJnYk1PU3NqbVBlc1crTWVWVCtOSDNwaU1PbXZhQU8yWjUwaUxneGpHeWowelBhUCt6eTQ4SXdOMXBzTUs2UjhZY1NVMTlpaDhvU3NRWnVBMnl0V2phaHpEd1VxWVZFd2FqWjAwYXgra25ia2tXMVRUNmZidG9YWU90VndXU04rSENWZCt2YXlwYWNpUWdJTU1pRFNNdFJFNTMrRGtNVVBiZ0V4Y1pKUlRkSDRIV1JORDMrTVN6alpzSEZBWWF4a1Fmd3NhRE5Uenl2QzBhdEo3MzJsQWdMbXJvb3A4UDlRd2Y0bmJmdEFacTRaRkxXcjhGaDdSYnpCbElJL2lKUGxlZS9GN1lXQ0M3V1JueG5qZ1BpRHlXQldlZmhBNk9wemxya0JlUzBGU0lUTFNYNkFjRUF0MzVRMmhldWVBemNQUnBRZE1WNHN5enFMcmFDM09NOTl2b1BUcHBya3BibGtIcFVnckt5dC9oNHQ2dUpqbG9WQ1JHMGJ4OFY5eDhyaVFobnA1TWsxdXpJczQvOUpsaWVYaFRvOXJWY2g0UUJUbFhyUU9ldW5GZ1VsRGJqeGxQQkN6V1hWdFJPNDRHNUNjeW43eEdBYzE5SS9KdzNlTXpsZmpyTU5pdFRqaktEbDNuay9zSHljN2hTOGpuN1ZET0lKLzlpNUxwckV4OTJBbFRPeFNVOVJ2c1BxdStLVHRER1c4SFhPTjJWN1J1N0dLeHBRcnY4aVV6V3k1NHNUa3A4TWlPbGFQQ0pmWXdnQmtPSCt4Q1U1U280NWlnUEdzQ3NtMlJOOFpqNEg3QkgzdjNpazgyVWQyNHN5UDdDUHpQcklKU3YzSXlEbmlNeU9PdEY4KzhQNkxoY21ucllYcXAzQ1JEdytPMFZ2ZUpUZTZOQ1JsRzA0ZU4rYjV4YjBQMTFvY0txWnEyajJ1RStNQktYbk5uVFllZUtpYkZKdHBENlVMYlErMFpqdzlFUExPOEpyRzFyclRxMWFFcFhPWVVJNDJxbHVMdkdYNk9QdVErR2VYK0U2bVF5VjZSOGRQNjhKVFRmVTJoUzRoOVQ2WUJ3S1docVRXTW5sRTRFRW8xR2x3c0dwSTFPcm1weFlHSkh4R3lwL0NpN2pobFZDa0NZV1E5eGNTSFpTOU9EQzVFY1plV0QybVNJb3FMYzFjSXErUjYwR2RHbk5sZjFzc1NCTEJSbVdjVFVOVDAvbG43Y0p6NXlEUFZvM0dXdGZKTXdaWkpFZzRyVzV1ZnJpTWFLWkgxR1VJVGVDTEJXYVZ1ZVBrY1FNMTlqb2JjU0MxdDVXbk1SeEd1TlRCLzVZVm83aWEzdldOZXFFaHgyTDlQZEQ5TVNBMHhIOWlTVWpxT2RMd1puZ3Evd3RuMXdrL2Z1L1RxTUYwd2VRSmxJZkdkL1FNcE40bTZWME5LR1ZYcmFVcFQ5YXJUMDhoaXlnMGh1d2NqcGRZTFVvWDBmZU83M09ESXE5Zlp6VGJKK1lWY3UwcFhPblBDVVdIeG0yY2djTGRkMG1vQ3BNUHlMQmZudUNnL2kxV0Q4bDhRYnoxRE04b2JIek11SEZsYUZxLzVZWUh6a1Q3Y0dSQWRCemNnNVBHbGZ6VFhwa3ZuT2ZlWVR3Y3FycWQxOXA4UmZnVXVoZDZUV2hsZU1ZUCtKUkIwVFlnTkdicW1XZ3Y3aGlXYkJKM1ROb1lldGUxQzIwRE1rVWhIR05BS0Z4SlZodVp1MGZSVSs2Z2QxQnNFZEVuNkdDNmg3SUFIajdrWHlSSS9DZFpIdEQyUUlPRmNJUVZvZW5iU1Q0SWY2MkNFdDJ3YWxDRXd1WW56VnprLzAvT21lWVcrWFhXL2xQR1dEMUJpY1lTaXdJU05lR1VLUy9pYmF3YWM1d1ZCVTZNOFREMU9OMHQ2alhZcUl6VncySkRaTjVpTkZiN25xbERtUEtYZjl3OGhrc3M5d3hqUUhUUE9LNEc5T3FIOFUvWGQvZzAzR2s0dExSeHI4RjRDUEtobmhvWkVCcVBlY2NNYVVCTUNNYzBncEdKaU5KekVpL0d4ZWhrY0EvRXNDbzhRMDdLUTQzL3UxVks5YUFENzJYQk1ZdU5uSmw0SG8wemVzTnk5enRpVlo4Qm9mSjFlU0JBcU53eENRYlNwQmVmNXhmN1JYcFZsYzdRRWRWTElmRStjSTZWSUw2ZmdRdlY2cWRtZVViVGVxZ0x4eWoxdUJuUVdtbE9QWE9kTU9UcEltNUhsMVNOYUQ4bFliVTRheC85blpBbmhobGNUdXcyVFQwK2NJZ0hRb1AyditPa01hZXgyOCtqdHNQOTYvNkdRN3dRbHpwNVNaS0VzNktHRlVaN0lFTm42YkE5MEVqbFhnMElRRDM3bTB6akNLY1dDdUpmd2NrYVZpbVZ2N1B3aUtMSGV5RFdnc1FYc0lwbXVBWUVMQWxPVG1MS1lYcmhkZExzUkt6cWg3cTJlZXBzYjFVdnVhYUZtL0lxaEpCWVRRTUdOTk5UaGNzS2g4bURjVE1nMUxicWlUSERobUdjUEdKTU9SRnpZYWFZZENKMm9rd1pWajE0VUE5S0d4Q3EwQWFjTkdZMFhnNWVlcVRMdHdzTTVSQ1M2bmJ1K2VNWFE3U01oME0xZEFkbzRuT1l1a2FHUTY5SnpmWWEyZ05wR3hEeW5qZjE3RVZCd3hWRHJuQVNMa1ludWtJNFFuRGVyaFZvbkhZYnhqYXdsc0pSYlFuQ0tobzBNTi9PTkI0Uk5aVWYrUWxPMWtBTUNCckZVQ0VjVUx6L3NQRkN2L2dmU0tOSEh1bHJmcnphQUtzMUxBcUl6eWRsd25qRFFaa1hqbFVhaE9ybXB5eUZpZlI5UWQ3NWZuSGpaa0JySXJMcGE0QXM4azhZdFFGNUpHMmZpOEowK2xtREJHYVdIY0dxQnc4dnBvQU80ZGJKY243QlNmZk15VXNSZ3BwMjExUElZR2dqT2R6bGRmV2x5NHJVdWs2djQ4UndhSGszL01QVzFyNllHRmJjb2JjSGwyOGxTQnAyQ0xkR21uMmZKaEg2WXhPY29vYTZnd1pyN3E2OEZxYmVTemZxOVpLYzVTWThHYm8zWm1IUUtpak9uajVCaTVGNElNQWxkbHM4czhXSDd1eW8yZDR4Q1ZoRjQ1ZGFhanFOcjJEV1dPeGhkM3Z5UDNYTldCbHhwYThRQXpKemlmeHNwT09TNFRMSEt3YlA4TklUSUtNMm9BWCtTWE1uT1pFRjMzREtQYW1vR0tzZVBGUDVzaGk0cVlYK0NmYzBCbXA1UDhXeTRVSkFXazJIYXpjWVIzVUhqNnJ0NUw5UjIrRzI0ZVdMY1hOcU90MWJ0WTBuK2JBSHRWR1pmUXFmVHJOT3V0bVdWUGg4di9naDk4VGR6MWs0VXgwR2hIakN3bDM1ZC9KZ1Y0YWx2K1lnVVQrendDL3VLbW1neTRKVHp1QzgvZEEyb0x0NUlJS3BhK1JGY3EwcHZJZ2Y0a29QYWhaR2w0Y3cyN0ZBb0xGWkJTUU91bUVVV0JHV2xrdnlnZ1JuN3k3RXFqRmxsbWNVSGdPaEVJNHIvUUxxQnF0R2hGZHljVFk4Q3hDWVNKbmxFM3QveDBDdC8xQlAxalhQTDhqWVlRZGZFTjFjeitFMzJ6U3pOY09oNlVLWTliSHVrUFRxZHBjenlDaDZ3ZVBVZFhyKzQzaDM4SUg2OThLZ04zN2kySVdnOWRYdHZNKzFqVWRaNFlrZWNoaWw1eUNLWjBwaXNBbEoyUU1ORDZadGtRY2FjdnNLWTBCTXBkNi9hZXlCaEczZTcyZmdJS0xISFpPZEpMZlhTTE82U2FNeGRKSjhxcTVzSG5RZjIwZzlFT0NzS3ZDQ2NKRXhUaEcxWHA1N0d0TGp0MWV0TUtLM3hUQkdhK29xSHpBbTArYlF5NjN6WjdoSDBmc1NRUXcyaVQ1YkVabzc2bGNVZ3JKMkxWd1drcklycHV6UWZKeEU0NU8yQTQzZG1Ic0NXU3ZOR3ZFT2Y1aWdnVDE1cEJ3VGJzU1BaVTJ2VE1mcSswUExsWVNaOVJlOE94c3ZCSDZNR25sWlk1ZFFkcWpEMmE2cFcyNVgxUGk4Mld5ZnlCc3dTUE5PM3U2SFQrbEgwL25rWnlFdm5IUDBZdEFXVk1hKzZnN1hINUF4OUJ4cTUxNUQ0Vm9iOGpTcGIzMmd0aU1oMmFzZjhwOCtla0d3RzQxM2JoUERxZWx3b1dJUGVyK2w3OEJzaWVHbzhqVUdCUHV1cHJzcFAyZTJ5NkI3U1MyT3hxcEJZVUk0cGlIZHI0VlVyQnFBclRqak9HbThtZ1pqSDk3am9GUVBHSU1RUm1OQTBBbWljUTR5VU9ZYXlKaCs1aVpzWGJBMExQVnRVaGV3aWgrU1UyYUhUOUhKOHREVWJISU9pQWxYOWlueW9DdXhldGpZaWpNM21mSGsxNkFNVTU2c1o1MHN0N0N5K1UxNmpBbHJWdVp1aW44ejlVSjdJWGgxbzkrbTNhRUE0MWtTRE4rdHIxN24rY2IwZXluenZ0Rk1DWjk4OWNPMGVVYzZmYlByT2p4aE92bGlUWWZiVCtoNDg0WHpuSjZLUDZEeFNodi9WbU4zMEhXUXVrNlA2NGZhblpGd3JsZTFjVzVXZHlEdjB1SCtNMHE3ZVBSQ1FDZEt6NFpKZ3FiekE3ZXhIN3NRc1A1SWw4OFh4SEJvNDJsMy9mTGtsU2lCVTNRK2N1dk1ROXZUZUZZVFppd09UTFVsR3l3Tm5hUTlpVHRyaDl6WnF4M0MyVW5HT1lRYlpCSkJtNWlkdFZPbmNLWDAyZ3VaS1VKamtDRkQwSkZNSW1nVFUzTEluVXlOUXgzTzhveSt4R3lQWXE1ckpVZ2MwdnNRMUsydHY3VVdKcjVGbmdXY085bFIzT3NZbGYrMlcxTGhrRDg3ZHVUY09UM3Y1Q0tuMWFLTXQ1RVJhN1lid1hHUklQNVZLQnRubmJBMEpITWplR1p5ZndZT1liMmJGRnZPb3ZHaU5jNHlnUExtMW9sTGcxT2Rsd1FsZlF0bGtqcEZudWlUd3ZxVDlHOXJQQlNjN3BaTTN0L0dNVzY4N0dYMjhsOWk4NnM3M1BJUHRYR3dPT1hYZHdYa243a1NHd3Q1UU01ZVZobmlVd2ZsekpVbzYvb3UzemVxMmhpdmc0d05wQWVOaTA0MVh4Rk9oRHdMQXhML1RGZUdSL1QzU21YZkJrRTBLTWFyNDNTanVJcVRkYUx0Z1pEaDNkYXpELzhLQkpWQi8xTHFhQ1QvMEhGTjd6Z1NEd1NnY0NxSTZRQkUxQlN1N0taUDVwN1pXRFVvby9GQUFQSkN2NW52RTRkL3Q2S3Y4ZFAxNENDK1dWcmYwdTkxaGFGWWhlcC9jVWp5N3lkcTdabURDTURBVWRRN3pVM3gxUXdQVmZsME4wVytyU1F6MzFhVW1UL2RMU29maGN2dlRIV1Jmd2ZyTWN3dWJPWTgrTHhhbkhGMnNBa0phMkdTa25uZmpOd3Z2VFdwMXlZdytSTTloN0Q4NWFGcGFpaC9ubDlzL2x5LzJHcmt0YjZiaExkMGtlODJqYS80MStxZ2xCbmcxWTYrMUdvSjBuam1EWE1vdjZXbDVibngyb3AwWDJpNkdENm51cDIvSHhuZVRXMnZVOXZCLzdTeE95QVFaNXV3NTloWkt5YUdENmRRS1BKN25EekJVcGl3aW93am9MTFdSV1R2eENxZGFIdWdpZlNST1pjcEE4TEFrVW80VlZCMVFoTTJqdFNBV2xHdnU4QXYvbldZS2JNV0pFYmhaSjJNMW9BQUZDYk5NdFI2aDRkOGJ4VGU3TUZaaGsxejg1V25sZ1NueEJvNVNlamVIaFlyKytxUi9IM25aL0kzSTFQNWltdDJrZ3g1WldXbnpoM1RndlF5SVRJTTNPbjFsVU84Q3puZXFZZjJnanJiMXlKMzdLWGYyRDF5L0p6TnJvckdNN3NQTkJXWFZSeHIzRlBSRkxTcnZMR3F2dm1OU1BwQ3Z4WmFPdFhQMVhmNnJhM3I4bnk5R28xdHRBMm51b1AzWFgyWFgvSHJWOVJHT0R2TkduRldBVk01OERwRE50M0lZTUZ4b1gvQ3YwaUZvUmorKytEMEVycG5HUXArUXRHWHhwd0lhaXlsVU11QWpKd2pyT0czSEdCTVlZRUczTnZ2WWtDQWE1UjZ0cG1MdkJHMnkrQWtuVXptU0pkQTJjWklVR2hDN2F4N2VkZ0dCS3dTWnpiQXVYQ1BjTy9JWS96QWoyZW0wVWZEV3JuYUNKVlpZZVlTK1Ruc3ppYlA2YzRHVGY2R01CSmQ4MU9iNEtSQ1FYSlp2K2VzQzlYMm80YmN1SzM3WUt3TEwrejFsY2VVcVcxTThKTGZBdi80S3k1eCtVRjNidDBwM3RkQXI3bVZsTmZMZHI5d2ZNZnpMemFkT1ZCOXB0KzAva05KMDlYa1owOWRqbDNYMkMyc3FPbmcvNHNZREJvUDBjZWFkdjdOMm5hM2JkVVhCQ2I0RkExQ29mQkpFNTdzQ2xRVWl2bC9JcHNpMTBoem1rZ0lBUlczTENTbDM0cTlMdEwzVkMzaXh4ZFpqNlVjUGZzSFRZZ0tLL2drM1R1MXlMcTJkZURMWmZlQ2R2bUMxRkpyZUg4SHE0WUYvTWcvT1IvRVJiWHRubjg3QVlDMW8rVmhxZFkrS1R1M29YRmRPWHBlV2hKV1Bzc2pxandrYjIvdXhnaTE5VWhlcjlBRzNrYUYzNXdJeU5oWk1JMHZwOHZXUjJWRCtZc0RrOHY1aVlWQ1ZDY0RmcmlUVUxMdmlDOXpQT3BiZHVEWXZ2cW1ON3hMOWg1VjBzcXg1TXlmWlU1VmJTNkswMWRpbHJkMEtvZjlvaFRoekYvVDlWdXVLR2NlN3ZSVk5GNE1lcWUyMC9VcU1Sb3QrUVdOY1Q2b2JYY1ZuZnViV3VlL05sa2p6ZlludmMxMDlCQWd6WkFqQ2tLZk5WdFBwcnRIWGN0K3Z2SGhmZ09SNWZHaDVYM2xsQ01YZk42SGhsN1Q3dm90R3RDLzA5Z05odUNtT1BnZVIxeU5CSTRITzV3MHg0WXVRUjQ2NTUxRDczSGVPZHpsMWF1OTdhYTZ6Mmg2VU5qMlFVTlh3T0c2YnErNzdpdUwzN3YzNldsdVNucGZHTXowWkpZM2JQSlBMMzNSd0NIOE5oTnowek52dHhkNHgraGMvR05oZVdBMFhCRElxOXA0eDlGNHBZY1lnMjV4dnVNelkwQjFuVjQzcTlxNHgyczYzRUpQWDFJc3dVVVBDNWZZd2hJd0VnalJuR08ydHMvM2pUdkdlQjBjdXFFUWJycDdaQ2JPenNMeThISzZPM0Z5UTVkL0VCcTNCSjI0SkQ1eXBNdnJGRElRUmpyZ3lEMTEvR0xvcVgzbmdndGNzd1RVeWtnaDVSaVQrdTdlK2xkMXp0c1BSVkRlSGlzREI5RTNZQ3d3cTJYdXJxQU5Sek5nUk1iRFZSVzhock96c0R3NjhHSUtFZ3lkNGY4Q3dRNWdKYlVoSXFjaElHUDNYVU0yQXV4OU1uU1d2TWw0bXY2aWg4cUVLVW9UWGtRR3pzN0M4dWdSc25tUDZ6UytndDR3Q1Y0RHllMFpYdEgvYXhXWWRIQ3RPRWZNalNuZ0ZOV2U1aFJWblVESEV4eGwwWXVjU1k0U2pyMWk4NzRaSHFvL0RXWThzTzVpekpGK0U1aGRsb292dzhMeTZGSjgrSlN4VFZCU2hSRkhxbmtuUlRzRWd4L2FnRlY0OENpd3JhUnZYeGd6em9IUFRCcnpDekFXSHNybTdUV25SelNPWW1INTFRT0xiVE85b2wrWTRpTFgvTnVTdnVQZ1FveHBDazkyMjlRMTRpV09JbzgxSEpiSEcrV095a251OFlXNUs4UFNMMDdoeXY0T0srR013WUNuWWJiWHdBdGw1dTZLTHl3RmlXMUxRMU5UMTh2U2gvVVRVQ3dzanhXd2NtMHJ5akxXNTRpTTlXMlJ3QkVKcEZXMjNQMi8yYkd3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0R3YVRKandIK1FkblNJbWprM3dBQUFBQUVsRlRrU3VRbUNDKTsKICAgICAgICB9CgogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keSBjbGFzcz0iIj4KPGRpdiBpZD0icGFnZS13cmFwcGVyIj4KICAgIDwhLS0gSGVhZGVyIFNlY3Rpb24gLS0+CiAgICA8aGVhZGVyIGlkPSJoZWFkZXIiIGNsYXNzPSJjYW52YXMiPgogICAgICAgIDxzcGFuIGNsYXNzPSJsb2dvLWVtdmNvIj48L3NwYW4+CiAgICAgICAgPHNwYW4gY2xhc3M9ImxvZ28tYmFuayI+PC9zcGFuPgogICAgPC9oZWFkZXI+CgogICAgPCEtLSBNYWluIENvbnRlbnQgU2VjdGlvbiAtLT4KICAgIDxzZWN0aW9uIGlkPSJjb250ZW50IiBjbGFzcz0iY2FudmFzIj4KICAgICAgICA8ZGl2IGNsYXNzPSJyb3ciPgogICAgICAgICAgICA8aDI+UGF5bWVudCBTZWN1cml0eTwvaDI+CiAgICAgICAgICAgIDxwPkhpIFN0ZXZlLCB5b3VyIG9ubGluZSBwYXltZW50IGlzIGJlaW5nIHNlY3VyZWQgdXNpbmcgQ2FyZCBOZXR3b3JrLiBQbGVhc2Ugc2VsZWN0IHdoZXJlIHlvdSB3b3VsZCBsaWtlIHRvCiAgICAgICAgICAgICAgICByZWNlaXZlIHRoZSBjb2RlIGZyb20gWW91ckJhbms8L3A+CiAgICAgICAgPC9kaXY+CgogICAgICAgIDxkaXYgY2xhc3M9InJvdyI+CiAgICAgICAgICAgIDxmb3JtIGFjdGlvbj0iSFRUUFM6Ly9FTVYzRFMvY2hhbGxlbmdlIiBtZXRob2Q9ImdldCIgbmFtZT0iY2FyZGhvbGRlcklucHV0Ij4KICAgICAgICAgICAgICAgIDxsYWJlbD4KICAgICAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0icmFkaW8iIGNsYXNzPSJmb3JtLWNoZWNrIiBuYW1lPSJkZWxpdmVyeU1ldGhvZCIKICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9Ik1vYmlsZSAqKioqKioqKjMyMSIgY2hlY2tlZD4KICAgICAgICAgICAgICAgIDwvbGFiZWw+CiAgICAgICAgICAgICAgICBNb2JpbGUgKioqKioqKiozMjE8YnI+CiAgICAgICAgICAgICAgICA8bGFiZWw+CiAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InJhZGlvIiBjbGFzcz0iZm9ybS1jaGVjayIgbmFtZT0iZGVsaXZlcnlNZXRob2QiCiAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPSJFbWFpbCAqKioqKioqKioqQGcqKioqLmNvbSI+CiAgICAgICAgICAgICAgICA8L2xhYmVsPgogICAgICAgICAgICAgICAgRW1haWwgKioqKioqKioqKkBnKioqKi5jb208YnI+PGJyPgogICAgICAgICAgICAgICAgPGlucHV0IGlkPSJzdWJtaXRBdXRoZW50aWNhdGlvbkxhYmVsIiB0eXBlPSJzdWJtaXQiIGNsYXNzPSJidXR0b24iIHZhbHVlPSJORVhUIj4KICAgICAgICAgICAgPC9mb3JtPgogICAgICAgIDwvZGl2PgogICAgPC9zZWN0aW9uPgoKICAgIDwhLS0gSGVscCBTZWN0aW9uIC0tPgogICAgPHNlY3Rpb24gaWQ9ImhlbHAiIGNsYXNzPSJjb250YWluZXIiPgogICAgICAgIDxkaXYgY2xhc3M9InJvdyBkZXRhaWxlZCI+CiAgICAgICAgICAgIDxkZXRhaWxzPgogICAgICAgICAgICAgICAgPHN1bW1hcnk+TGVhcm4gbW9yZSBhYm91dCBhdXRoZW50aWNhdGlvbjwvc3VtbWFyeT4KICAgICAgICAgICAgICAgIDxwIGNsYXNzPSJzdW1tYXJ5LXAiPkF1dGhlbnRpY2F0aW9uIGluZm9ybWF0aW9uIHdpbGwgYmUgZGlzcGxheWVkIGhlcmUuPC9wPgogICAgICAgICAgICA8L2RldGFpbHM+CiAgICAgICAgPC9kaXY+CiAgICAgICAgPGRpdiBjbGFzcz0icm93Ij4KICAgICAgICAgICAgPGRldGFpbHM+CiAgICAgICAgICAgICAgICA8c3VtbWFyeT5OZWVkIHNvbWUgaGVscD88L3N1bW1hcnk+CiAgICAgICAgICAgICAgICA8cCBjbGFzcz0ic3VtbWFyeS1wIj5IZWxwIGNvbnRlbnQgd2lsbCBiZSBkaXNwbGF5ZWQgaGVyZS48L3A+CiAgICAgICAgICAgIDwvZGV0YWlscz4KICAgICAgICA8L2Rpdj4KICAgIDwvc2VjdGlvbj4KCjwvZGl2Pgo8L2JvZHk+CjwvaHRtbD4\n</code></pre>\n<p>Expected output is an error (as thrown by Java.Util) while android is successfully decoding it</p>\n<p>Here is the code snippet for android method</p>\n<pre><code>internal fun base64UrlDecode(input: String): ByteArray {\n        try {\n            return Base64.decode(input, Base64.URL_SAFE)\n        } catch (_: Exception) {\n            throw InvalidInputException()\n        }\n    }\n</code></pre>\n"},{"tags":["java","open-telemetry","javaagents"],"owner":{"account_id":120700,"reputation":367,"user_id":2479862,"accept_rate":50,"display_name":"yurybubnov"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690190396,"creation_date":1690185268,"question_id":76752400,"body_markdown":"Recently I added OTEL java agent to our application and right away noticed increased latencies, sometimes doubled from 20 ms to 40 ms. Health check went from &lt; 1 ms to ~10ms. GC pauses increased from 15ms to 130ms.\r\nAlso, now I see BLOCKED threads in a thread dump with wait on `io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap.\r\n` with o only one RUNNING thread\r\n```\r\n&quot;ForkJoinPool.common pool-worker-3&quot; #269 daemon prio=5 os_prio=0 cpu=1519375.00ms elapsed=36357.28s tid=0x00007fd9a8007cb0 nid=0x262 runnable  [0x00007fd88c5ca000]\r\n   java.lang.Thread.State: RUNNABLE\r\n        at java.lang.ref.ReferenceQueue.poll(java.base@17.0.7/ReferenceQueue.java:119)\r\n        - parking to wait for  &lt;0x0000000304753f40&gt; (a java.util.concurrent.ForkJoinPool)\r\n        - locked &lt;0x0000000303002610&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap.expungeStaleEntries(AbstractWeakConcurrentMap.java:235)\r\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.WeakConcurrentMap$WithInlinedExpunction.getIfPresent(WeakConcurrentMap.java:193)\r\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.WeakLockFreeCache.get(WeakLockFreeCache.java:26)\r\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.mapGet(VirtualFieldImplementationsGenerator.java:297)\r\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.realGet(VirtualFieldImplementationsGenerator.java)\r\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.get(VirtualFieldImplementationsGenerator.java:279)\r\n        at io.opentelemetry.javaagent.bootstrap.executors.TaskAdviceHelper.makePropagatedContextCurrent(TaskAdviceHelper.java:23)\r\n        at java.util.concurrent.CountedCompleter.exec(java.base@17.0.7/CountedCompleter.java:754)\r\n        at java.util.concurrent.ForkJoinTask.doExec(java.base@17.0.7/ForkJoinTask.java:373)\r\n        at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(java.base@17.0.7/ForkJoinPool.java:1182)\r\n        at java.util.concurrent.ForkJoinPool.scan(java.base@17.0.7/ForkJoinPool.java:1655)\r\n        at java.util.concurrent.ForkJoinPool.runWorker(java.base@17.0.7/ForkJoinPool.java:1622)\r\n        at java.util.concurrent.ForkJoinWorkerThread.run(java.base@17.0.7/ForkJoinWorkerThread.java:165)\r\n```\r\n\r\nOthers are blocked like\r\n```\r\n\r\n&quot;ForkJoinPool.common pool-worker-10&quot; #276 daemon prio=5 os_prio=0 cpu=1528899.78ms elapsed=36357.28s tid=0x00007fd8f00032a0 nid=0x269 waiting for monitor entry  [0x00007fd88afb7000]\r\n   java.lang.Thread.State: BLOCKED (on object monitor)\r\n        at java.lang.ref.ReferenceQueue.poll(java.base@17.0.7/ReferenceQueue.java:119)\r\n        - parking to wait for  &lt;0x0000000304753f40&gt; (a java.util.concurrent.ForkJoinPool)\r\n        - waiting to lock &lt;0x0000000303002610&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap.expungeStaleEntries(AbstractWeakConcurrentMap.java:235)\r\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.WeakConcurrentMap$WithInlinedExpunction.getIfPresent(WeakConcurrentMap.java:193)\r\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.WeakLockFreeCache.get(WeakLockFreeCache.java:26)\r\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.mapGet(VirtualFieldImplementationsGenerator.java:297)\r\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.realGet(VirtualFieldImplementationsGenerator.java)\r\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.get(VirtualFieldImplementationsGenerator.java:279)\r\n        at io.opentelemetry.javaagent.bootstrap.executors.ExecutorAdviceHelper.attachContextToTask(ExecutorAdviceHelper.java:51)\r\n        at java.util.concurrent.ForkJoinTask.fork(java.base@17.0.7/ForkJoinTask.java:649)\r\n        at java.util.stream.AbstractShortCircuitTask.compute(java.base@17.0.7/AbstractShortCircuitTask.java:133)\r\n        at java.util.concurrent.CountedCompleter.exec(java.base@17.0.7/CountedCompleter.java:754)\r\n        at java.util.concurrent.ForkJoinTask.doExec(java.base@17.0.7/ForkJoinTask.java:373)\r\n        at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(java.base@17.0.7/ForkJoinPool.java:1182)\r\n        at java.util.concurrent.ForkJoinPool.scan(java.base@17.0.7/ForkJoinPool.java:1655)\r\n        at java.util.concurrent.ForkJoinPool.runWorker(java.base@17.0.7/ForkJoinPool.java:1622)\r\n        at java.util.concurrent.ForkJoinWorkerThread.run(java.base@17.0.7/ForkJoinWorkerThread.java:165)\r\n```\r\nOr from another thread dump \r\n```\r\n&quot;ForkJoinPool.common pool-worker-5&quot; #271 daemon prio=5 os_prio=0 cpu=7780467.78ms elapsed=219941.20s tid=0x00007f889c0019d0 nid=0x271 waiting for monitor entry  [0x00007f882018c000]\r\n   java.lang.Thread.State: BLOCKED (on object monitor)\r\n\tat java.lang.ref.ReferenceQueue.poll(java.base@17.0.7/ReferenceQueue.java:119)\r\n\t- parking to wait for  &lt;0x0000000303003108&gt; (a java.util.concurrent.ForkJoinPool)\r\n\t- locked &lt;0x00000003030017b0&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap.expungeStaleEntries(AbstractWeakConcurrentMap.java:235)\r\n\tat io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.WeakConcurrentMap$WithInlinedExpunction.put(WeakConcurrentMap.java:205)\r\n\tat io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.WeakLockFreeCache.put(WeakLockFreeCache.java:31)\r\n\tat io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.mapPut(VirtualFieldImplementationsGenerator.java:304)\r\n\tat io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.real put(VirtualFieldImplementationsGenerator.java)\r\n```\r\n\r\nHas anyone have any idea what&#39;s going on? Is there a deadlock situation between FJP and OTEL agent?","title":"OTEL Java Agent high GC pauses, added latencies and blocked threads","body":"<p>Recently I added OTEL java agent to our application and right away noticed increased latencies, sometimes doubled from 20 ms to 40 ms. Health check went from &lt; 1 ms to ~10ms. GC pauses increased from 15ms to 130ms.\nAlso, now I see BLOCKED threads in a thread dump with wait on <code>io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap. </code> with o only one RUNNING thread</p>\n<pre><code>&quot;ForkJoinPool.common pool-worker-3&quot; #269 daemon prio=5 os_prio=0 cpu=1519375.00ms elapsed=36357.28s tid=0x00007fd9a8007cb0 nid=0x262 runnable  [0x00007fd88c5ca000]\n   java.lang.Thread.State: RUNNABLE\n        at java.lang.ref.ReferenceQueue.poll(java.base@17.0.7/ReferenceQueue.java:119)\n        - parking to wait for  &lt;0x0000000304753f40&gt; (a java.util.concurrent.ForkJoinPool)\n        - locked &lt;0x0000000303002610&gt; (a java.lang.ref.ReferenceQueue$Lock)\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap.expungeStaleEntries(AbstractWeakConcurrentMap.java:235)\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.WeakConcurrentMap$WithInlinedExpunction.getIfPresent(WeakConcurrentMap.java:193)\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.WeakLockFreeCache.get(WeakLockFreeCache.java:26)\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.mapGet(VirtualFieldImplementationsGenerator.java:297)\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.realGet(VirtualFieldImplementationsGenerator.java)\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.get(VirtualFieldImplementationsGenerator.java:279)\n        at io.opentelemetry.javaagent.bootstrap.executors.TaskAdviceHelper.makePropagatedContextCurrent(TaskAdviceHelper.java:23)\n        at java.util.concurrent.CountedCompleter.exec(java.base@17.0.7/CountedCompleter.java:754)\n        at java.util.concurrent.ForkJoinTask.doExec(java.base@17.0.7/ForkJoinTask.java:373)\n        at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(java.base@17.0.7/ForkJoinPool.java:1182)\n        at java.util.concurrent.ForkJoinPool.scan(java.base@17.0.7/ForkJoinPool.java:1655)\n        at java.util.concurrent.ForkJoinPool.runWorker(java.base@17.0.7/ForkJoinPool.java:1622)\n        at java.util.concurrent.ForkJoinWorkerThread.run(java.base@17.0.7/ForkJoinWorkerThread.java:165)\n</code></pre>\n<p>Others are blocked like</p>\n<pre><code>\n&quot;ForkJoinPool.common pool-worker-10&quot; #276 daemon prio=5 os_prio=0 cpu=1528899.78ms elapsed=36357.28s tid=0x00007fd8f00032a0 nid=0x269 waiting for monitor entry  [0x00007fd88afb7000]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n        at java.lang.ref.ReferenceQueue.poll(java.base@17.0.7/ReferenceQueue.java:119)\n        - parking to wait for  &lt;0x0000000304753f40&gt; (a java.util.concurrent.ForkJoinPool)\n        - waiting to lock &lt;0x0000000303002610&gt; (a java.lang.ref.ReferenceQueue$Lock)\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap.expungeStaleEntries(AbstractWeakConcurrentMap.java:235)\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.WeakConcurrentMap$WithInlinedExpunction.getIfPresent(WeakConcurrentMap.java:193)\n        at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.WeakLockFreeCache.get(WeakLockFreeCache.java:26)\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.mapGet(VirtualFieldImplementationsGenerator.java:297)\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.realGet(VirtualFieldImplementationsGenerator.java)\n        at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.get(VirtualFieldImplementationsGenerator.java:279)\n        at io.opentelemetry.javaagent.bootstrap.executors.ExecutorAdviceHelper.attachContextToTask(ExecutorAdviceHelper.java:51)\n        at java.util.concurrent.ForkJoinTask.fork(java.base@17.0.7/ForkJoinTask.java:649)\n        at java.util.stream.AbstractShortCircuitTask.compute(java.base@17.0.7/AbstractShortCircuitTask.java:133)\n        at java.util.concurrent.CountedCompleter.exec(java.base@17.0.7/CountedCompleter.java:754)\n        at java.util.concurrent.ForkJoinTask.doExec(java.base@17.0.7/ForkJoinTask.java:373)\n        at java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(java.base@17.0.7/ForkJoinPool.java:1182)\n        at java.util.concurrent.ForkJoinPool.scan(java.base@17.0.7/ForkJoinPool.java:1655)\n        at java.util.concurrent.ForkJoinPool.runWorker(java.base@17.0.7/ForkJoinPool.java:1622)\n        at java.util.concurrent.ForkJoinWorkerThread.run(java.base@17.0.7/ForkJoinWorkerThread.java:165)\n</code></pre>\n<p>Or from another thread dump</p>\n<pre><code>&quot;ForkJoinPool.common pool-worker-5&quot; #271 daemon prio=5 os_prio=0 cpu=7780467.78ms elapsed=219941.20s tid=0x00007f889c0019d0 nid=0x271 waiting for monitor entry  [0x00007f882018c000]\n   java.lang.Thread.State: BLOCKED (on object monitor)\n    at java.lang.ref.ReferenceQueue.poll(java.base@17.0.7/ReferenceQueue.java:119)\n    - parking to wait for  &lt;0x0000000303003108&gt; (a java.util.concurrent.ForkJoinPool)\n    - locked &lt;0x00000003030017b0&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.AbstractWeakConcurrentMap.expungeStaleEntries(AbstractWeakConcurrentMap.java:235)\n    at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.weaklockfree.WeakConcurrentMap$WithInlinedExpunction.put(WeakConcurrentMap.java:205)\n    at io.opentelemetry.javaagent.shaded.instrumentation.api.internal.cache.WeakLockFreeCache.put(WeakLockFreeCache.java:31)\n    at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.mapPut(VirtualFieldImplementationsGenerator.java:304)\n    at io.opentelemetry.javaagent.bootstrap.field.VirtualFieldImpl$java$util$concurrent$ForkJoinTask$io$opentelemetry$javaagent$bootstrap$executors$PropagatedContext.real put(VirtualFieldImplementationsGenerator.java)\n</code></pre>\n<p>Has anyone have any idea what's going on? Is there a deadlock situation between FJP and OTEL agent?</p>\n"},{"tags":["java","android","oop"],"answers":[{"tags":[],"owner":{"account_id":28075822,"reputation":59,"user_id":21447701,"display_name":"Buddhima Kaushalya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690190156,"creation_date":1690190156,"answer_id":76752996,"question_id":76460638,"body_markdown":"To fix the issue and ensure that the notes are added to the correct user&#39;s database in the &#39;AddFragment&#39;, you should pass the user ID directly from the &#39;Register&#39; activity to the &#39;AddFragment&#39; instead of using &#39;SharedPreferences&#39;. Here&#39;s how you can do it:\r\n\r\n    public class AddFragment extends Fragment {\r\n    // ... Your existing code ...\r\n\r\n    public static AddFragment newInstance(String userID) {\r\n        AddFragment fragment = new AddFragment();\r\n        Bundle args = new Bundle();\r\n        args.putString(&quot;uid&quot;, userID);\r\n        fragment.setArguments(args);\r\n        return fragment;\r\n    }\r\n\r\n    // ... Your existing code ...\r\n    }\r\nIn the Register activity, after saving the user to the database, pass the user ID to the AddFragment using the newInstance method:\r\npublic class RegisterActivity extends AppCompatActivity {\r\n    // ... Your existing code ...\r\n\r\n    public void writeNewUser() {\r\n        // ... Your existing code ...\r\n\r\n        sendData(userId); \r\n\r\n        // ... Your existing code ...\r\n\r\n        // After saving the user, navigate to AddFragment and pass the user ID as an argument\r\n        AddFragment addFragment = AddFragment.newInstance(userId);\r\n        getSupportFragmentManager().beginTransaction()\r\n                .replace(R.id.fragment_container, addFragment)\r\n                .commit();\r\n    }\r\n\r\n    // ... Your existing code ...\r\n    }\r\n\r\n\r\n","title":"I cannot insert data to the correct user&#39;s database","body":"<p>To fix the issue and ensure that the notes are added to the correct user's database in the 'AddFragment', you should pass the user ID directly from the 'Register' activity to the 'AddFragment' instead of using 'SharedPreferences'. Here's how you can do it:</p>\n<pre><code>public class AddFragment extends Fragment {\n// ... Your existing code ...\n\npublic static AddFragment newInstance(String userID) {\n    AddFragment fragment = new AddFragment();\n    Bundle args = new Bundle();\n    args.putString(&quot;uid&quot;, userID);\n    fragment.setArguments(args);\n    return fragment;\n}\n\n// ... Your existing code ...\n}\n</code></pre>\n<p>In the Register activity, after saving the user to the database, pass the user ID to the AddFragment using the newInstance method:\npublic class RegisterActivity extends AppCompatActivity {\n// ... Your existing code ...</p>\n<pre><code>public void writeNewUser() {\n    // ... Your existing code ...\n\n    sendData(userId); \n\n    // ... Your existing code ...\n\n    // After saving the user, navigate to AddFragment and pass the user ID as an argument\n    AddFragment addFragment = AddFragment.newInstance(userId);\n    getSupportFragmentManager().beginTransaction()\n            .replace(R.id.fragment_container, addFragment)\n            .commit();\n}\n\n// ... Your existing code ...\n}\n</code></pre>\n"}],"owner":{"display_name":"user18540930"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690190156,"creation_date":1686608006,"question_id":76460638,"body_markdown":"I have two activities called Register.java,Login.java and i have a fragment called AddFragment.java where users can share notes. In register i take user&#39;s informations and save them to the firebase real time database with a unique id then sends the id to addfragment for adding the note to user&#39;s database. But my problem is, it does not add to the correct users datafield, it adds to the current user. So, when i test the app and log in to the user before the last created user and add notes, it adds to the last user. I know i get the last users id but i cannot think anway to fix it.Below is my register activity and addFragment.\r\n\r\nRegister.java\r\n```\r\n    public void writeNewUser() {\r\n        // Set reference for database\r\n        firebaseDatabase = FirebaseDatabase.getInstance();\r\n        databaseReference = firebaseDatabase.getReference(&quot;users&quot;);\r\n\r\n        // Get the current user that uses the app\r\n        currentUser = mauth.getCurrentUser();\r\n\r\n        // Check if the current user is not null\r\n        if (currentUser != null) {\r\n            String getEmail = email.getText().toString();\r\n            String getPassword = password.getText().toString();\r\n            String getUsername = username.getText().toString();\r\n            String userId = currentUser.getUid();\r\n            User user = new User(getEmail, getPassword, getUsername);\r\n\r\n            sendData(userId); // Pass the user ID to sendData() method\r\n\r\n            // Use user ID as child instead of getEmail\r\n            databaseReference.child(userId).setValue(user)\r\n                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\r\n                        @Override\r\n                        public void onSuccess(Void aVoid) {\r\n                            // User added successfully\r\n                        }\r\n                    })\r\n                    .addOnFailureListener(new OnFailureListener() {\r\n                        @Override\r\n                        public void onFailure(@NonNull Exception e) {\r\n                            // An error occurred while adding the user\r\n                        }\r\n                    });\r\n        }\r\n    }\r\n\r\n    public void sendData(String userID) {\r\n        SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREFS, Context.MODE_PRIVATE);\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putString(&quot;uid&quot;, userID);\r\n        editor.apply();\r\n    }\r\n```\r\nAddfragment.java(I did not want to copy paste all of the code. So i am sharing just the related parts.)\r\n\r\n```\r\n        //Get the userID sent from register.activity\r\n        SharedPreferences sharedPreferences =getActivity().getSharedPreferences(SHARED_PREFS,Context.MODE_PRIVATE);\r\n        String uid = sharedPreferences.getString(&quot;uid&quot;,&quot;&quot;);\r\n        Toast.makeText(getActivity(), &quot;uid is:&quot;+uid, Toast.LENGTH_SHORT).show();\r\n\r\n        //Initialize the firebase database\r\n        firebaseDatabase = FirebaseDatabase.getInstance();\r\n        databaseReference = firebaseDatabase.getReference(&quot;users&quot;).child(uid);\r\n\r\n        private void insertUserinfo(){\r\n        String course = courseName.getText().toString();\r\n        String uni = uniName.getText().toString();\r\n        String page = pages.getText().toString();\r\n        String prices = price.getText().toString();\r\n\r\n        SelInfos selInfos = new SelInfos(course,uni,page,prices);\r\n        databaseReference.push().setValue(selInfos);\r\n        Toast.makeText(getActivity(),&quot;Data inserted successfully&quot;,Toast.LENGTH_SHORT).show();\r\n    }\r\n```\r\n\r\nI want to get the correct user id, pass it to addFragment so insert data to the correct users database.","title":"I cannot insert data to the correct user&#39;s database","body":"<p>I have two activities called Register.java,Login.java and i have a fragment called AddFragment.java where users can share notes. In register i take user's informations and save them to the firebase real time database with a unique id then sends the id to addfragment for adding the note to user's database. But my problem is, it does not add to the correct users datafield, it adds to the current user. So, when i test the app and log in to the user before the last created user and add notes, it adds to the last user. I know i get the last users id but i cannot think anway to fix it.Below is my register activity and addFragment.</p>\n<p>Register.java</p>\n<pre><code>    public void writeNewUser() {\n        // Set reference for database\n        firebaseDatabase = FirebaseDatabase.getInstance();\n        databaseReference = firebaseDatabase.getReference(&quot;users&quot;);\n\n        // Get the current user that uses the app\n        currentUser = mauth.getCurrentUser();\n\n        // Check if the current user is not null\n        if (currentUser != null) {\n            String getEmail = email.getText().toString();\n            String getPassword = password.getText().toString();\n            String getUsername = username.getText().toString();\n            String userId = currentUser.getUid();\n            User user = new User(getEmail, getPassword, getUsername);\n\n            sendData(userId); // Pass the user ID to sendData() method\n\n            // Use user ID as child instead of getEmail\n            databaseReference.child(userId).setValue(user)\n                    .addOnSuccessListener(new OnSuccessListener&lt;Void&gt;() {\n                        @Override\n                        public void onSuccess(Void aVoid) {\n                            // User added successfully\n                        }\n                    })\n                    .addOnFailureListener(new OnFailureListener() {\n                        @Override\n                        public void onFailure(@NonNull Exception e) {\n                            // An error occurred while adding the user\n                        }\n                    });\n        }\n    }\n\n    public void sendData(String userID) {\n        SharedPreferences sharedPreferences = getSharedPreferences(SHARED_PREFS, Context.MODE_PRIVATE);\n        SharedPreferences.Editor editor = sharedPreferences.edit();\n        editor.putString(&quot;uid&quot;, userID);\n        editor.apply();\n    }\n</code></pre>\n<p>Addfragment.java(I did not want to copy paste all of the code. So i am sharing just the related parts.)</p>\n<pre><code>        //Get the userID sent from register.activity\n        SharedPreferences sharedPreferences =getActivity().getSharedPreferences(SHARED_PREFS,Context.MODE_PRIVATE);\n        String uid = sharedPreferences.getString(&quot;uid&quot;,&quot;&quot;);\n        Toast.makeText(getActivity(), &quot;uid is:&quot;+uid, Toast.LENGTH_SHORT).show();\n\n        //Initialize the firebase database\n        firebaseDatabase = FirebaseDatabase.getInstance();\n        databaseReference = firebaseDatabase.getReference(&quot;users&quot;).child(uid);\n\n        private void insertUserinfo(){\n        String course = courseName.getText().toString();\n        String uni = uniName.getText().toString();\n        String page = pages.getText().toString();\n        String prices = price.getText().toString();\n\n        SelInfos selInfos = new SelInfos(course,uni,page,prices);\n        databaseReference.push().setValue(selInfos);\n        Toast.makeText(getActivity(),&quot;Data inserted successfully&quot;,Toast.LENGTH_SHORT).show();\n    }\n</code></pre>\n<p>I want to get the correct user id, pass it to addFragment so insert data to the correct users database.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","spring-webflux"],"comments":[{"owner":{"account_id":8218454,"reputation":762,"user_id":6183889,"display_name":"Tom Elias"},"score":0,"creation_date":1628524040,"post_id":68714762,"comment_id":121438053,"body_markdown":"the &quot;configure&quot; bean expects an autowired HttpSecurity bean as its parameter. you need to define an HttpSecurity bean, you can do it in the same class.","body":"the &quot;configure&quot; bean expects an autowired HttpSecurity bean as its parameter. you need to define an HttpSecurity bean, you can do it in the same class."},{"owner":{"account_id":11308336,"reputation":12935,"user_id":8292178,"accept_rate":57,"display_name":"mahan"},"score":0,"creation_date":1628525119,"post_id":68714762,"comment_id":121438451,"body_markdown":"@TomElias Could you please answer this question? I did not  get what you really mean.","body":"@TomElias Could you please answer this question? I did not  get what you really mean."},{"owner":{"account_id":2064278,"reputation":13128,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1628534962,"post_id":68714762,"comment_id":121442023,"body_markdown":"can you please provide a small reproducible example","body":"can you please provide a small reproducible example"}],"answers":[{"tags":[],"owner":{"account_id":3459128,"reputation":442,"user_id":2896809,"accept_rate":86,"display_name":"gcpdev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1628523530,"creation_date":1628523530,"answer_id":68714822,"question_id":68714762,"body_markdown":"You need to add both `@EnableWebFluxSecurity` and `@Configuration` according to [this answer][1].\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/58555230/2896809","title":"Error when using @EnableWebFluxSecurity in spring-boot","body":"<p>You need to add both <code>@EnableWebFluxSecurity</code> and <code>@Configuration</code> according to <a href=\"https://stackoverflow.com/a/58555230/2896809\">this answer</a>.</p>\n"},{"tags":[],"owner":{"account_id":8474168,"reputation":21,"user_id":6355903,"display_name":"Andreas Dedousis"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671114683,"creation_date":1663578596,"answer_id":73771058,"question_id":68714762,"body_markdown":"I had the same issue.Some of your dependencies are bringing **spring-boot-starter-web**. You need to find who using mvn dependency:tree and exclude it in your pom.xml.\r\n\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n     &lt;/exclusions&gt;\r\n\r\nAnd also add as seperate dependecy the \r\n\r\n      \r\n    &lt;dependency&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\nAlso another addition you should make is add : spring.main.web-application-type=reactive in application properties","title":"Error when using @EnableWebFluxSecurity in spring-boot","body":"<p>I had the same issue.Some of your dependencies are bringing <strong>spring-boot-starter-web</strong>. You need to find who using mvn dependency:tree and exclude it in your pom.xml.</p>\n<pre><code>&lt;exclusions&gt;\n    &lt;exclusion&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/exclusion&gt;\n &lt;/exclusions&gt;\n</code></pre>\n<p>And also add as seperate dependecy the</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also another addition you should make is add : spring.main.web-application-type=reactive in application properties</p>\n"},{"tags":[],"owner":{"account_id":4225724,"reputation":66,"user_id":3459299,"display_name":"Andr&#233; Jakobsson"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690190044,"creation_date":1690190044,"answer_id":76752981,"question_id":68714762,"body_markdown":"```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n```\r\n\r\nAdding above dependency solved it for me. Using Spring 6, Boot 3, Java 17.","title":"Error when using @EnableWebFluxSecurity in spring-boot","body":"<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>Adding above dependency solved it for me. Using Spring 6, Boot 3, Java 17.</p>\n"}],"owner":{"account_id":11308336,"reputation":12935,"user_id":8292178,"accept_rate":57,"display_name":"mahan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3423,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":3,"score":-1,"last_activity_date":1690190044,"creation_date":1628523253,"question_id":68714762,"body_markdown":"I am trying to setup a simple spring boot application. It can be started if I don&#39;t use `@EnableWebFluxSecurity` annotatoin. \r\n\r\n``` \r\n    @Configuration\r\n    @EnableWebFluxSecurity\r\n    open class ArticleWebSecurityConfig {\r\n\r\n        @Bean\r\n        open fun springSecurityFilterChain(http: ServerHttpSecurity): SecurityWebFilterChain = http\r\n            .csrf().disable()\r\n            .authorizeExchange()\r\n            .anyExchange()\r\n            .permitAll()\r\n            .and()\r\n            .build()\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\nThe following error occurrs when I start it:\r\n\r\n\r\n&gt; ConfigServletWebServerApplicationContext : Exception encountered\r\n&gt; during context initialization - cancelling refresh attempt:\r\n&gt; org.springframework.beans.factory.UnsatisfiedDependencyException:\r\n&gt; Error creating bean with name &#39;defaultSecurityFilterChain&#39; defined in\r\n&gt; class path resource\r\n&gt; [org/springframework/boot/autoconfigure/security/servlet/SpringBootWebSecurityConfiguration.class]:\r\n&gt; Unsatisfied dependency expressed through method\r\n&gt; &#39;defaultSecurityFilterChain&#39; parameter 0; nested exception is\r\n&gt; org.springframework.beans.factory.NoSuchBeanDefinitionException: No\r\n&gt; qualifying bean of type\r\n&gt; &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39;\r\n&gt; available: expected at least 1 bean which qualifies as autowire\r\n&gt; candidate. Dependency annotations: {}\r\n\r\n&gt; ### Description\r\n&gt; Parameter 0 of method defaultSecurityFilterChain in org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration required a bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; that could not be found.\r\n&gt;\r\n&gt;\r\n&gt; Action:\r\n&gt;\r\n&gt; Consider defining a bean of type &#39;org.springframework.security.config.annotation.web.builders.HttpSecurity&#39; in your configuration.\r\n&gt;\r\n&gt;\r\n&gt; Process finished with exit code 1\r\n\r\n\r\nI used the following `@Bean` but stil get the same errror.\r\n\r\n```\r\n    @Throws(Exception::class)\r\n    @Bean\r\n    open fun configure(http: HttpSecurity) {\r\n        http\r\n            .authorizeRequests()\r\n            .anyRequest()\r\n            .authenticated()\r\n            .and()\r\n            .httpBasic()\r\n    }\r\n\r\n```\r\n\r\nThese are my dependencies\r\n\r\n```\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n``` \r\n\r\n","title":"Error when using @EnableWebFluxSecurity in spring-boot","body":"<p>I am trying to setup a simple spring boot application. It can be started if I don't use <code>@EnableWebFluxSecurity</code> annotatoin.</p>\n<pre><code>    @Configuration\n    @EnableWebFluxSecurity\n    open class ArticleWebSecurityConfig {\n\n        @Bean\n        open fun springSecurityFilterChain(http: ServerHttpSecurity): SecurityWebFilterChain = http\n            .csrf().disable()\n            .authorizeExchange()\n            .anyExchange()\n            .permitAll()\n            .and()\n            .build()\n    }\n\n</code></pre>\n<p>The following error occurrs when I start it:</p>\n<blockquote>\n<p>ConfigServletWebServerApplicationContext : Exception encountered\nduring context initialization - cancelling refresh attempt:\norg.springframework.beans.factory.UnsatisfiedDependencyException:\nError creating bean with name 'defaultSecurityFilterChain' defined in\nclass path resource\n[org/springframework/boot/autoconfigure/security/servlet/SpringBootWebSecurityConfiguration.class]:\nUnsatisfied dependency expressed through method\n'defaultSecurityFilterChain' parameter 0; nested exception is\norg.springframework.beans.factory.NoSuchBeanDefinitionException: No\nqualifying bean of type\n'org.springframework.security.config.annotation.web.builders.HttpSecurity'\navailable: expected at least 1 bean which qualifies as autowire\ncandidate. Dependency annotations: {}</p>\n</blockquote>\n<blockquote>\n<h3>Description</h3>\n<p>Parameter 0 of method defaultSecurityFilterChain in org.springframework.boot.autoconfigure.security.servlet.SpringBootWebSecurityConfiguration required a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' that could not be found.</p>\n<p>Action:</p>\n<p>Consider defining a bean of type 'org.springframework.security.config.annotation.web.builders.HttpSecurity' in your configuration.</p>\n<p>Process finished with exit code 1</p>\n</blockquote>\n<p>I used the following <code>@Bean</code> but stil get the same errror.</p>\n<pre><code>    @Throws(Exception::class)\n    @Bean\n    open fun configure(http: HttpSecurity) {\n        http\n            .authorizeRequests()\n            .anyRequest()\n            .authenticated()\n            .and()\n            .httpBasic()\n    }\n\n</code></pre>\n<p>These are my dependencies</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-jetty&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n"},{"tags":["java","elasticsearch","lucene","elastic-stack"],"owner":{"account_id":14507516,"reputation":18,"user_id":10478904,"display_name":"lovedeep sangha"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690189979,"creation_date":1690189979,"question_id":76752971,"body_markdown":"    {\r\n        &quot;mappings&quot; : {\r\n          &quot;date_detection&quot; : false,\r\n          &quot;properties&quot; : {\r\n            &quot;@class&quot; : {\r\n              &quot;type&quot; : &quot;keyword&quot;\r\n            },\r\n            &quot;additionalProperties&quot; : {\r\n              &quot;properties&quot; : {\r\n                &quot;@class&quot; : {\r\n                  &quot;type&quot; : &quot;keyword&quot;\r\n                },\r\n                &quot;eventId&quot; : {\r\n                  &quot;type&quot; : &quot;text&quot;,\r\n                  &quot;fields&quot; : {\r\n                    &quot;keyword&quot; : {\r\n                      &quot;type&quot; : &quot;keyword&quot;,\r\n                      &quot;ignore_above&quot; : 256\r\n                    }\r\n                  }\r\n                },\r\n                &quot;linius:offset&quot; : {\r\n                  &quot;type&quot; : &quot;text&quot;,\r\n                  &quot;fields&quot; : {\r\n                    &quot;keyword&quot; : {\r\n                      &quot;type&quot; : &quot;keyword&quot;,\r\n                      &quot;ignore_above&quot; : 256\r\n                    }\r\n                  }\r\n                },\r\n                &quot;opta:eventId&quot; : {\r\n                  &quot;type&quot; : &quot;text&quot;,\r\n                  &quot;fields&quot; : {\r\n                    &quot;keyword&quot; : {\r\n                      &quot;type&quot; : &quot;keyword&quot;,\r\n                      &quot;ignore_above&quot; : 256\r\n                    }\r\n                  }\r\n                },\r\n                &quot;videoOffset&quot; : {\r\n                  &quot;type&quot; : &quot;text&quot;,\r\n                  &quot;fields&quot; : {\r\n                    &quot;keyword&quot; : {\r\n                      &quot;type&quot; : &quot;keyword&quot;,\r\n                      &quot;ignore_above&quot; : 256\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            &quot;assetCreated&quot; : {\r\n              &quot;type&quot; : &quot;long&quot;\r\n            },\r\n            &quot;assetEndDate&quot; : {\r\n              &quot;type&quot; : &quot;long&quot;\r\n            },\r\n            &quot;assetId&quot; : {\r\n              &quot;type&quot; : &quot;keyword&quot;\r\n            },\r\n            &quot;assetStartDate&quot; : {\r\n              &quot;type&quot; : &quot;long&quot;\r\n            },\r\n            &quot;created&quot; : {\r\n              &quot;type&quot; : &quot;long&quot;\r\n            },\r\n            &quot;endTime&quot; : {\r\n              &quot;type&quot; : &quot;long&quot;\r\n            },\r\n            &quot;id&quot; : {\r\n              &quot;type&quot; : &quot;text&quot;,\r\n              &quot;fields&quot; : {\r\n                &quot;keyword&quot; : {\r\n                  &quot;type&quot; : &quot;keyword&quot;,\r\n                  &quot;ignore_above&quot; : 256\r\n                }\r\n              }\r\n            },\r\n            &quot;payload&quot; : {\r\n              &quot;type&quot; : &quot;nested&quot;,\r\n              &quot;properties&quot; : {\r\n                &quot;@class&quot; : {\r\n                  &quot;type&quot; : &quot;keyword&quot;\r\n                },\r\n                &quot;additionalProperties&quot; : {\r\n                  &quot;properties&quot; : {\r\n                    &quot;@class&quot; : {\r\n                      &quot;type&quot; : &quot;keyword&quot;\r\n                    }\r\n                  }\r\n                },\r\n                &quot;category&quot; : {\r\n                  &quot;type&quot; : &quot;keyword&quot;\r\n                },\r\n                &quot;clipId&quot; : {\r\n                  &quot;type&quot; : &quot;keyword&quot;\r\n                },\r\n                &quot;confidence&quot; : {\r\n                  &quot;type&quot; : &quot;double&quot;\r\n                },\r\n                &quot;endTime&quot; : {\r\n                  &quot;type&quot; : &quot;long&quot;\r\n                },\r\n                &quot;indexerType&quot; : {\r\n                  &quot;type&quot; : &quot;keyword&quot;\r\n                },\r\n                &quot;integerValue&quot; : {\r\n                  &quot;type&quot; : &quot;long&quot;\r\n                },\r\n                &quot;payloadId&quot; : {\r\n                  &quot;type&quot; : &quot;keyword&quot;\r\n                },\r\n                &quot;payloadValueSuggest&quot; : {\r\n                  &quot;type&quot; : &quot;completion&quot;,\r\n                  &quot;analyzer&quot; : &quot;standard&quot;,\r\n                  &quot;preserve_separators&quot; : true,\r\n                  &quot;preserve_position_increments&quot; : true,\r\n                  &quot;max_input_length&quot; : 10000\r\n                },\r\n                &quot;startTime&quot; : {\r\n                  &quot;type&quot; : &quot;long&quot;\r\n                },\r\n                &quot;suggestCategory&quot; : {\r\n                  &quot;type&quot; : &quot;completion&quot;,\r\n                  &quot;analyzer&quot; : &quot;standard&quot;,\r\n                  &quot;preserve_separators&quot; : true,\r\n                  &quot;preserve_position_increments&quot; : true,\r\n                  &quot;max_input_length&quot; : 10000\r\n                },\r\n                &quot;suggestValueCategory&quot; : {\r\n                  &quot;type&quot; : &quot;completion&quot;,\r\n                  &quot;analyzer&quot; : &quot;standard&quot;,\r\n                  &quot;preserve_separators&quot; : true,\r\n                  &quot;preserve_position_increments&quot; : true,\r\n                  &quot;max_input_length&quot; : 10000,\r\n                  &quot;contexts&quot; : [\r\n                    {\r\n                      &quot;name&quot; : &quot;category-context&quot;,\r\n                      &quot;type&quot; : &quot;CATEGORY&quot;,\r\n                      &quot;path&quot; : &quot;payload.category&quot;\r\n                    }\r\n                  ]\r\n                },\r\n                &quot;value&quot; : {\r\n                  &quot;type&quot; : &quot;text&quot;,\r\n                  &quot;fields&quot; : {\r\n                    &quot;keyword&quot; : {\r\n                      &quot;type&quot; : &quot;keyword&quot;,\r\n                      &quot;ignore_above&quot; : 256\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            },\r\n            &quot;startTime&quot; : {\r\n              &quot;type&quot; : &quot;long&quot;\r\n            },\r\n            &quot;tenantId&quot; : {\r\n              &quot;type&quot; : &quot;keyword&quot;\r\n            },\r\n            &quot;updated&quot; : {\r\n              &quot;type&quot; : &quot;long&quot;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\nSO this is the mapping of indexes of various tenant, I want to remove the suggestValueCategory from payload for all the documents of various indexes , so it is data of multiple tenants means various indexes i cant singlualry go thorugh each document and do re-index , is there any way i can delete the field data from all the indexes ","title":"How to remove fields data and mapping from &quot;indexes&quot;, they are for mutiple tenants without re-indexing documents in Elasticsearch","body":"<pre><code>{\n    &quot;mappings&quot; : {\n      &quot;date_detection&quot; : false,\n      &quot;properties&quot; : {\n        &quot;@class&quot; : {\n          &quot;type&quot; : &quot;keyword&quot;\n        },\n        &quot;additionalProperties&quot; : {\n          &quot;properties&quot; : {\n            &quot;@class&quot; : {\n              &quot;type&quot; : &quot;keyword&quot;\n            },\n            &quot;eventId&quot; : {\n              &quot;type&quot; : &quot;text&quot;,\n              &quot;fields&quot; : {\n                &quot;keyword&quot; : {\n                  &quot;type&quot; : &quot;keyword&quot;,\n                  &quot;ignore_above&quot; : 256\n                }\n              }\n            },\n            &quot;linius:offset&quot; : {\n              &quot;type&quot; : &quot;text&quot;,\n              &quot;fields&quot; : {\n                &quot;keyword&quot; : {\n                  &quot;type&quot; : &quot;keyword&quot;,\n                  &quot;ignore_above&quot; : 256\n                }\n              }\n            },\n            &quot;opta:eventId&quot; : {\n              &quot;type&quot; : &quot;text&quot;,\n              &quot;fields&quot; : {\n                &quot;keyword&quot; : {\n                  &quot;type&quot; : &quot;keyword&quot;,\n                  &quot;ignore_above&quot; : 256\n                }\n              }\n            },\n            &quot;videoOffset&quot; : {\n              &quot;type&quot; : &quot;text&quot;,\n              &quot;fields&quot; : {\n                &quot;keyword&quot; : {\n                  &quot;type&quot; : &quot;keyword&quot;,\n                  &quot;ignore_above&quot; : 256\n                }\n              }\n            }\n          }\n        },\n        &quot;assetCreated&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        },\n        &quot;assetEndDate&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        },\n        &quot;assetId&quot; : {\n          &quot;type&quot; : &quot;keyword&quot;\n        },\n        &quot;assetStartDate&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        },\n        &quot;created&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        },\n        &quot;endTime&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        },\n        &quot;id&quot; : {\n          &quot;type&quot; : &quot;text&quot;,\n          &quot;fields&quot; : {\n            &quot;keyword&quot; : {\n              &quot;type&quot; : &quot;keyword&quot;,\n              &quot;ignore_above&quot; : 256\n            }\n          }\n        },\n        &quot;payload&quot; : {\n          &quot;type&quot; : &quot;nested&quot;,\n          &quot;properties&quot; : {\n            &quot;@class&quot; : {\n              &quot;type&quot; : &quot;keyword&quot;\n            },\n            &quot;additionalProperties&quot; : {\n              &quot;properties&quot; : {\n                &quot;@class&quot; : {\n                  &quot;type&quot; : &quot;keyword&quot;\n                }\n              }\n            },\n            &quot;category&quot; : {\n              &quot;type&quot; : &quot;keyword&quot;\n            },\n            &quot;clipId&quot; : {\n              &quot;type&quot; : &quot;keyword&quot;\n            },\n            &quot;confidence&quot; : {\n              &quot;type&quot; : &quot;double&quot;\n            },\n            &quot;endTime&quot; : {\n              &quot;type&quot; : &quot;long&quot;\n            },\n            &quot;indexerType&quot; : {\n              &quot;type&quot; : &quot;keyword&quot;\n            },\n            &quot;integerValue&quot; : {\n              &quot;type&quot; : &quot;long&quot;\n            },\n            &quot;payloadId&quot; : {\n              &quot;type&quot; : &quot;keyword&quot;\n            },\n            &quot;payloadValueSuggest&quot; : {\n              &quot;type&quot; : &quot;completion&quot;,\n              &quot;analyzer&quot; : &quot;standard&quot;,\n              &quot;preserve_separators&quot; : true,\n              &quot;preserve_position_increments&quot; : true,\n              &quot;max_input_length&quot; : 10000\n            },\n            &quot;startTime&quot; : {\n              &quot;type&quot; : &quot;long&quot;\n            },\n            &quot;suggestCategory&quot; : {\n              &quot;type&quot; : &quot;completion&quot;,\n              &quot;analyzer&quot; : &quot;standard&quot;,\n              &quot;preserve_separators&quot; : true,\n              &quot;preserve_position_increments&quot; : true,\n              &quot;max_input_length&quot; : 10000\n            },\n            &quot;suggestValueCategory&quot; : {\n              &quot;type&quot; : &quot;completion&quot;,\n              &quot;analyzer&quot; : &quot;standard&quot;,\n              &quot;preserve_separators&quot; : true,\n              &quot;preserve_position_increments&quot; : true,\n              &quot;max_input_length&quot; : 10000,\n              &quot;contexts&quot; : [\n                {\n                  &quot;name&quot; : &quot;category-context&quot;,\n                  &quot;type&quot; : &quot;CATEGORY&quot;,\n                  &quot;path&quot; : &quot;payload.category&quot;\n                }\n              ]\n            },\n            &quot;value&quot; : {\n              &quot;type&quot; : &quot;text&quot;,\n              &quot;fields&quot; : {\n                &quot;keyword&quot; : {\n                  &quot;type&quot; : &quot;keyword&quot;,\n                  &quot;ignore_above&quot; : 256\n                }\n              }\n            }\n          }\n        },\n        &quot;startTime&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        },\n        &quot;tenantId&quot; : {\n          &quot;type&quot; : &quot;keyword&quot;\n        },\n        &quot;updated&quot; : {\n          &quot;type&quot; : &quot;long&quot;\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>SO this is the mapping of indexes of various tenant, I want to remove the suggestValueCategory from payload for all the documents of various indexes , so it is data of multiple tenants means various indexes i cant singlualry go thorugh each document and do re-index , is there any way i can delete the field data from all the indexes</p>\n"},{"tags":["java","eclipse","rest-assured"],"comments":[{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1690188932,"post_id":76752642,"comment_id":135313316,"body_markdown":"I&#39;m not sure what those characters are, but I&#39;d start by using an URL decoder.","body":"I&#39;m not sure what those characters are, but I&#39;d start by using an URL decoder."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":1,"creation_date":1690190525,"post_id":76752642,"comment_id":135313670,"body_markdown":"`%E2%80%8B` is URL UTF-8 encoding for U+200B ZERO WIDTH SPACE - a very strange thing to have in a URL","body":"<code>%E2%80%8B</code> is URL UTF-8 encoding for U+200B ZERO WIDTH SPACE - a very strange thing to have in a URL"},{"owner":{"account_id":26855749,"reputation":9,"user_id":20440088,"display_name":"Random Boy"},"score":0,"creation_date":1690194760,"post_id":76752642,"comment_id":135314585,"body_markdown":"how to parse those while passing","body":"how to parse those while passing"},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":0,"creation_date":1690195557,"post_id":76752642,"comment_id":135314753,"body_markdown":"The string `&quot;/api​/policy​/aboutsaccospolicy​/create&quot;` mentioned in your question also contains zero-width spaces, even if they are not visible (since they are spaces with a width of 0 pixels). Does your code contain somewhere zero-width spaces (`&gt;​&lt;`)? Please also show your definition of your variable `api`.","body":"The string <code>&quot;&#47;api​&#47;policy​&#47;aboutsaccospolicy​&#47;create&quot;</code> mentioned in your question also contains zero-width spaces, even if they are not visible (since they are spaces with a width of 0 pixels). Does your code contain somewhere zero-width spaces (<code>&gt;​&lt;</code>)? Please also show your definition of your variable <code>api</code>."},{"owner":{"account_id":3159259,"reputation":109666,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1690203171,"post_id":76752642,"comment_id":135316390,"body_markdown":"Special characters like that must be encoded that way when they are used in a URL. You can convert them back using `java.net.URLDecoder.decode(string, StandardCharsets.UTF_8)`","body":"Special characters like that must be encoded that way when they are used in a URL. You can convert them back using <code>java.net.URLDecoder.decode(string, StandardCharsets.UTF_8)</code>"}],"owner":{"account_id":26855749,"reputation":9,"user_id":20440088,"display_name":"Random Boy"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690189641,"creation_date":1690187251,"question_id":76752642,"body_markdown":"Actually when I am able to pass the datas in Excel which are all URLs, when printing `&quot;/api​/policy​/aboutsaccospolicy​/create&quot;` it is printing correctly but when passing it in URL `&quot;/api/api%E2%80%8B/policy%E2%80%8B/aboutsaccospolicy%E2%80%8B/create&quot;`\r\n\r\nThe code is:\r\n\r\n```java\r\nres = given().spec(requestSpecification(message1)).log().all();\r\nresponse = res.when().get(api).then().log().all().extract().response();\r\n```\r\n","title":"How to remove &quot;%E2%80%8B/&quot; unwanted symbols while fetching URLs from Excel running through eclipse , actually while getting URL from Excel data","body":"<p>Actually when I am able to pass the datas in Excel which are all URLs, when printing <code>&quot;/api​/policy​/aboutsaccospolicy​/create&quot;</code> it is printing correctly but when passing it in URL <code>&quot;/api/api%E2%80%8B/policy%E2%80%8B/aboutsaccospolicy%E2%80%8B/create&quot;</code></p>\n<p>The code is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>res = given().spec(requestSpecification(message1)).log().all();\nresponse = res.when().get(api).then().log().all().extract().response();\n</code></pre>\n"},{"tags":["java","android","bluetooth","background-service"],"owner":{"account_id":23050496,"reputation":11,"user_id":17167408,"display_name":"CanSaL"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1690189627,"creation_date":1690189627,"question_id":76752927,"body_markdown":"I want to scan Bluetooth device on foreground. I created foreground service and added bluetooth scan code to foreground service. This service and bluetooth scan are working when phone screen is on  but when phone screen is off service is working , bluetooth scan is not working. I showed bluetooth scan code on below in while function blok.\r\n\r\nThis is my code : \r\n\r\n    \r\n\r\n    \r\n\r\n\r\n    public class foregroundService extends Service {\r\n\r\n    private static final int REQUEST_ENABLE_BLUETOOTH = 1;\r\n    private static final int REQUEST_LOCATION_PERMISSION = 2;\r\n    private BluetoothAdapter bluetoothAdapter;\r\n    private List&lt;String&gt; discoveredDevicesList = new ArrayList&lt;&gt;();\r\n    Map&lt;String, String&gt; users = new HashMap&lt;&gt;();\r\n    private BroadcastReceiver discoveryReceiver;\r\n\r\n\r\n\r\n    @Override\r\n    public void onCreate() {\r\n        bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\r\n\r\n        Toast.makeText(this, &quot;Service Created&quot;, Toast.LENGTH_LONG).show();\r\n        super.onCreate();\r\n    }\r\n\r\n    @Override\r\n    public int onStartCommand(Intent intent, int flags, int startId) {\r\n\r\n        new Thread(\r\n                new Runnable() {\r\n                    @Override\r\n                    public void run() {\r\n\r\n                        while (true) {\r\n                            Log.d(&quot;Tag&quot;, &quot;service is running&quot;);\r\n                            if (discoveryReceiver == null) { //THIS IS MY BLUETOOTH SCAN CODE\r\n                                discoveryReceiver = new BroadcastReceiver() {\r\n\r\n                                    public void onReceive(Context context, Intent intent) {\r\n\r\n\r\n                                        String action = intent.getAction();\r\n                                        if (BluetoothDevice.ACTION_FOUND.equals(action)) {\r\n\r\n                                            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\r\n                                            if (ActivityCompat.checkSelfPermission(context, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\r\n\r\n                                                ActivityCompat.requestPermissions((Activity) context,\r\n\r\n                                                        new String[]{android.Manifest.permission.BLUETOOTH_CONNECT,},\r\n                                                        REQUEST_ENABLE_BLUETOOTH);\r\n                                                ActivityCompat.requestPermissions((Activity) context,\r\n\r\n                                                        new String[]{Manifest.permission.BLUETOOTH_SCAN,},\r\n                                                        REQUEST_ENABLE_BLUETOOTH);\r\n\r\n                                                return;\r\n                                            }\r\n                                            if (device != null &amp;&amp; device.getName() != null) {\r\n                                                String deviceName = device.getName();\r\n\r\n                                                if (!discoveredDevicesList.contains(deviceName)) {\r\n                                                    System.out.println(&quot;Foreground bluetoothscan&quot; + device.getName());\r\n                                                    users.put(&quot;Name&quot;, device.getName());\r\n                                                    Toast.makeText(context, device.getName().toString(), Toast.LENGTH_SHORT).show();\r\n                                                    discoveredDevicesList.add(deviceName);\r\n\r\n                                                }\r\n                                            }\r\n                                        }\r\n                                    }\r\n                                };\r\n\r\n                                registerReceiver(discoveryReceiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));\r\n                            }\r\n\r\n                            bluetoothAdapter.startDiscovery();\r\n\r\n                            try {\r\n\r\n                                Thread.sleep(9000);\r\n\r\n\r\n                            } catch (InterruptedException e) {\r\n                                throw new RuntimeException(e);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n        ).start();\r\n        final String CHANNEL_ID=&quot;Foreground Service&quot;;\r\n        NotificationChannel channel =new NotificationChannel(CHANNEL_ID,CHANNEL_ID, NotificationManager.IMPORTANCE_LOW);\r\n        getSystemService(NotificationManager.class).createNotificationChannel(channel);\r\n\r\n        Notification.Builder notification=new Notification.Builder(this,CHANNEL_ID)\r\n                .setContentText(&quot;Foreground service is running&quot;).setContentTitle(&quot;This is titile&quot;);\r\n        startForeground(1001,notification.build());\r\n\r\n    return  super.onStartCommand(intent,flags,startId);\r\n    }\r\n\r\n\r\n    @Override\r\n    public void onDestroy() {\r\n        super.onDestroy();\r\n\r\n    }\r\n\r\n    @Nullable\r\n    @Override\r\n    public IBinder onBind(Intent intent) {\r\n        return null;\r\n    }\r\n    }","title":"Bluetooth scan is not working in foreground service JAVA for android","body":"<p>I want to scan Bluetooth device on foreground. I created foreground service and added bluetooth scan code to foreground service. This service and bluetooth scan are working when phone screen is on  but when phone screen is off service is working , bluetooth scan is not working. I showed bluetooth scan code on below in while function blok.</p>\n<p>This is my code :</p>\n<pre><code>public class foregroundService extends Service {\n\nprivate static final int REQUEST_ENABLE_BLUETOOTH = 1;\nprivate static final int REQUEST_LOCATION_PERMISSION = 2;\nprivate BluetoothAdapter bluetoothAdapter;\nprivate List&lt;String&gt; discoveredDevicesList = new ArrayList&lt;&gt;();\nMap&lt;String, String&gt; users = new HashMap&lt;&gt;();\nprivate BroadcastReceiver discoveryReceiver;\n\n\n\n@Override\npublic void onCreate() {\n    bluetoothAdapter = BluetoothAdapter.getDefaultAdapter();\n\n    Toast.makeText(this, &quot;Service Created&quot;, Toast.LENGTH_LONG).show();\n    super.onCreate();\n}\n\n@Override\npublic int onStartCommand(Intent intent, int flags, int startId) {\n\n    new Thread(\n            new Runnable() {\n                @Override\n                public void run() {\n\n                    while (true) {\n                        Log.d(&quot;Tag&quot;, &quot;service is running&quot;);\n                        if (discoveryReceiver == null) { //THIS IS MY BLUETOOTH SCAN CODE\n                            discoveryReceiver = new BroadcastReceiver() {\n\n                                public void onReceive(Context context, Intent intent) {\n\n\n                                    String action = intent.getAction();\n                                    if (BluetoothDevice.ACTION_FOUND.equals(action)) {\n\n                                        BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);\n                                        if (ActivityCompat.checkSelfPermission(context, android.Manifest.permission.BLUETOOTH_CONNECT) != PackageManager.PERMISSION_GRANTED) {\n\n                                            ActivityCompat.requestPermissions((Activity) context,\n\n                                                    new String[]{android.Manifest.permission.BLUETOOTH_CONNECT,},\n                                                    REQUEST_ENABLE_BLUETOOTH);\n                                            ActivityCompat.requestPermissions((Activity) context,\n\n                                                    new String[]{Manifest.permission.BLUETOOTH_SCAN,},\n                                                    REQUEST_ENABLE_BLUETOOTH);\n\n                                            return;\n                                        }\n                                        if (device != null &amp;&amp; device.getName() != null) {\n                                            String deviceName = device.getName();\n\n                                            if (!discoveredDevicesList.contains(deviceName)) {\n                                                System.out.println(&quot;Foreground bluetoothscan&quot; + device.getName());\n                                                users.put(&quot;Name&quot;, device.getName());\n                                                Toast.makeText(context, device.getName().toString(), Toast.LENGTH_SHORT).show();\n                                                discoveredDevicesList.add(deviceName);\n\n                                            }\n                                        }\n                                    }\n                                }\n                            };\n\n                            registerReceiver(discoveryReceiver, new IntentFilter(BluetoothDevice.ACTION_FOUND));\n                        }\n\n                        bluetoothAdapter.startDiscovery();\n\n                        try {\n\n                            Thread.sleep(9000);\n\n\n                        } catch (InterruptedException e) {\n                            throw new RuntimeException(e);\n                        }\n                    }\n                }\n            }\n\n    ).start();\n    final String CHANNEL_ID=&quot;Foreground Service&quot;;\n    NotificationChannel channel =new NotificationChannel(CHANNEL_ID,CHANNEL_ID, NotificationManager.IMPORTANCE_LOW);\n    getSystemService(NotificationManager.class).createNotificationChannel(channel);\n\n    Notification.Builder notification=new Notification.Builder(this,CHANNEL_ID)\n            .setContentText(&quot;Foreground service is running&quot;).setContentTitle(&quot;This is titile&quot;);\n    startForeground(1001,notification.build());\n\nreturn  super.onStartCommand(intent,flags,startId);\n}\n\n\n@Override\npublic void onDestroy() {\n    super.onDestroy();\n\n}\n\n@Nullable\n@Override\npublic IBinder onBind(Intent intent) {\n    return null;\n}\n}\n</code></pre>\n"},{"tags":["java","spring-boot","graalvm","spring-native"],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1690189456,"creation_date":1690188692,"answer_id":76752813,"question_id":76752710,"body_markdown":"This a known bug with / in the Graal 22.x native image builder; see https://github.com/oracle/graal/issues/5868.\r\n\r\nAt the time of writing, no fix is available.  However, you may be able to figure out a work-around based on the issue&#39;s correspondence.\r\n\r\nApparently the bug is related to the new `RunReachabilityHandlersConcurrently` option added in Graal version  22.  One possible work-around might be to use an older version of Graal.  Another is to figure out what is using the new option and change it ... as they have done with `googleapis/gax-java` according to https://github.com/googleapis/gax-java/pull/1815.\r\n","title":"Graal VM build error: java.lang.NullPointerException: Cannot invoke &quot;java.util.Set.iterator()&quot; because &quot;triggers&quot; is null","body":"<p>This a known bug with / in the Graal 22.x native image builder; see <a href=\"https://github.com/oracle/graal/issues/5868\" rel=\"nofollow noreferrer\">https://github.com/oracle/graal/issues/5868</a>.</p>\n<p>At the time of writing, no fix is available.  However, you may be able to figure out a work-around based on the issue's correspondence.</p>\n<p>Apparently the bug is related to the new <code>RunReachabilityHandlersConcurrently</code> option added in Graal version  22.  One possible work-around might be to use an older version of Graal.  Another is to figure out what is using the new option and change it ... as they have done with <code>googleapis/gax-java</code> according to <a href=\"https://github.com/googleapis/gax-java/pull/1815\" rel=\"nofollow noreferrer\">https://github.com/googleapis/gax-java/pull/1815</a>.</p>\n"}],"owner":{"account_id":6988093,"reputation":121,"user_id":5462346,"display_name":"Anurag Ambuj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":617,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76752813,"answer_count":1,"score":2,"last_activity_date":1690189456,"creation_date":1690187737,"question_id":76752710,"body_markdown":"Getting following error while running native graal build for my Spring boot project (migrating to Graal VM). I could not find any working answer to this problem anywhere. Requesting the community to help.\r\n    \r\n    java.lang.NullPointerException: Cannot invoke &quot;java.util.Set.iterator()&quot; because &quot;triggers&quot; is null\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.ReachabilityHandlerFeature.processReachable(ReachabilityHandlerFeature.java:173)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.ReachabilityHandlerFeature.duringAnalysis(ReachabilityHandlerFeature.java:128)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.lambda$runPointsToAnalysis$10(NativeImageGenerator.java:770)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.FeatureHandler.forEachFeature(FeatureHandler.java:86)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.lambda$runPointsToAnalysis$11(NativeImageGenerator.java:770)\r\n    \tat org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.AbstractAnalysisEngine.runAnalysis(AbstractAnalysisEngine.java:179)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.runPointsToAnalysis(NativeImageGenerator.java:767)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.doRun(NativeImageGenerator.java:582)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.run(NativeImageGenerator.java:539)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:408)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:612)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.start(NativeImageGeneratorRunner.java:134)\r\n    \tat org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:94)\r\n\r\n\r\nSpring Boot version: 3.1.1\r\nJDK: Graal VM, JDK 17\r\nPlatform: MacOS (M2, Aarch64)\r\n\r\n    &lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;extensions&gt;true&lt;/extensions&gt;\r\n    \t\t\t\t&lt;executions&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;build-native&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;compile-no-fork&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;package&lt;/phase&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t\t&lt;execution&gt;\r\n    \t\t\t\t\t\t&lt;id&gt;test-native&lt;/id&gt;\r\n    \t\t\t\t\t\t&lt;goals&gt;\r\n    \t\t\t\t\t\t\t&lt;goal&gt;test&lt;/goal&gt;\r\n    \t\t\t\t\t\t&lt;/goals&gt;\r\n    \t\t\t\t\t\t&lt;phase&gt;test&lt;/phase&gt;\r\n    \t\t\t\t\t&lt;/execution&gt;\r\n    \t\t\t\t&lt;/executions&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;fallback&gt;false&lt;/fallback&gt;\r\n    \t\t\t\t\t&lt;buildArgs&gt;\r\n    \t\t\t\t\t\t&lt;arg&gt;\r\n    \t\t\t\t\t\t\t--verbose\r\n    \t\t\t\t\t\t\t-Dspring.aot.enabled=true\r\n    \t\t\t\t\t\t\t-H:TraceClassInitialization=true\r\n    \t\t\t\t\t\t\t-H:+ReportExceptionStackTraces\r\n    \t\t\t\t\t\t\t-H:Name=trace-app\r\n    \t\t\t\t\t\t\t-H:DashboardDump=trace-app\r\n    \t\t\t\t\t\t\t-H:+DashboardAll\r\n    \t\t\t\t\t\t\t-H:Class=com.xxx.trace.TraceApplication\r\n    \t\t\t\t\t\t\t--initialize-at-build-time=org.slf4j.LoggerFactory,ch.qos.logback,org.slf4j.MDC,org.slf4j.impl.StaticLoggerBinder\r\n    \t\t\t\t\t\t\t--initialize-at-run-time=io.netty\r\n    \t\t\t\t\t\t\t-Dspring.graal.remove-unused-autoconfig=true\r\n    \t\t\t\t\t\t\t-Dspring.graal.remove-yaml-support=true\r\n    \t\t\t\t\t\t&lt;/arg&gt;\r\n    \t\t\t\t\t&lt;/buildArgs&gt;\r\n    \t\t\t\t\t&lt;agent&gt;\r\n    \t\t\t\t\t\t&lt;enabled&gt;true&lt;/enabled&gt;\r\n    \t\t\t\t\t\t&lt;defaultMode&gt;Standard&lt;/defaultMode&gt;\r\n    \t\t\t\t\t\t&lt;options&gt;\r\n    \t\t\t\t\t\t\t&lt;trackReflectionMetadata&gt;true&lt;/trackReflectionMetadata&gt;\r\n    \t\t\t\t\t\t&lt;/options&gt;\r\n    \t\t\t\t\t\t&lt;metadataCopy&gt;\r\n    \t\t\t\t\t\t\t&lt;disabledStages&gt;\r\n    \t\t\t\t\t\t\t\t&lt;stage&gt;test&lt;/stage&gt;\r\n    \t\t\t\t\t\t\t&lt;/disabledStages&gt;\r\n    \t\t\t\t\t\t\t&lt;merge&gt;true&lt;/merge&gt;\r\n    \t\t\t\t\t\t\t&lt;outputDirectory&gt;/tmp/test-output-dir&lt;/outputDirectory&gt;\r\n    \t\t\t\t\t\t&lt;/metadataCopy&gt;\r\n    \t\t\t\t\t&lt;/agent&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;","title":"Graal VM build error: java.lang.NullPointerException: Cannot invoke &quot;java.util.Set.iterator()&quot; because &quot;triggers&quot; is null","body":"<p>Getting following error while running native graal build for my Spring boot project (migrating to Graal VM). I could not find any working answer to this problem anywhere. Requesting the community to help.</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;java.util.Set.iterator()&quot; because &quot;triggers&quot; is null\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.ReachabilityHandlerFeature.processReachable(ReachabilityHandlerFeature.java:173)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.ReachabilityHandlerFeature.duringAnalysis(ReachabilityHandlerFeature.java:128)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.lambda$runPointsToAnalysis$10(NativeImageGenerator.java:770)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.FeatureHandler.forEachFeature(FeatureHandler.java:86)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.lambda$runPointsToAnalysis$11(NativeImageGenerator.java:770)\n    at org.graalvm.nativeimage.pointsto/com.oracle.graal.pointsto.AbstractAnalysisEngine.runAnalysis(AbstractAnalysisEngine.java:179)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.runPointsToAnalysis(NativeImageGenerator.java:767)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.doRun(NativeImageGenerator.java:582)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGenerator.run(NativeImageGenerator.java:539)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.buildImage(NativeImageGeneratorRunner.java:408)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.build(NativeImageGeneratorRunner.java:612)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.start(NativeImageGeneratorRunner.java:134)\n    at org.graalvm.nativeimage.builder/com.oracle.svm.hosted.NativeImageGeneratorRunner.main(NativeImageGeneratorRunner.java:94)\n</code></pre>\n<p>Spring Boot version: 3.1.1\nJDK: Graal VM, JDK 17\nPlatform: MacOS (M2, Aarch64)</p>\n<pre><code>&lt;plugin&gt;\n                &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n                &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n                &lt;extensions&gt;true&lt;/extensions&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;build-native&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;compile-no-fork&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                    &lt;/execution&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;test-native&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;test&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;test&lt;/phase&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;fallback&gt;false&lt;/fallback&gt;\n                    &lt;buildArgs&gt;\n                        &lt;arg&gt;\n                            --verbose\n                            -Dspring.aot.enabled=true\n                            -H:TraceClassInitialization=true\n                            -H:+ReportExceptionStackTraces\n                            -H:Name=trace-app\n                            -H:DashboardDump=trace-app\n                            -H:+DashboardAll\n                            -H:Class=com.xxx.trace.TraceApplication\n                            --initialize-at-build-time=org.slf4j.LoggerFactory,ch.qos.logback,org.slf4j.MDC,org.slf4j.impl.StaticLoggerBinder\n                            --initialize-at-run-time=io.netty\n                            -Dspring.graal.remove-unused-autoconfig=true\n                            -Dspring.graal.remove-yaml-support=true\n                        &lt;/arg&gt;\n                    &lt;/buildArgs&gt;\n                    &lt;agent&gt;\n                        &lt;enabled&gt;true&lt;/enabled&gt;\n                        &lt;defaultMode&gt;Standard&lt;/defaultMode&gt;\n                        &lt;options&gt;\n                            &lt;trackReflectionMetadata&gt;true&lt;/trackReflectionMetadata&gt;\n                        &lt;/options&gt;\n                        &lt;metadataCopy&gt;\n                            &lt;disabledStages&gt;\n                                &lt;stage&gt;test&lt;/stage&gt;\n                            &lt;/disabledStages&gt;\n                            &lt;merge&gt;true&lt;/merge&gt;\n                            &lt;outputDirectory&gt;/tmp/test-output-dir&lt;/outputDirectory&gt;\n                        &lt;/metadataCopy&gt;\n                    &lt;/agent&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","spring-mvc","garbage-collection","openshift-origin","g1gc"],"comments":[{"owner":{"account_id":146274,"reputation":3851,"user_id":356629,"accept_rate":100,"display_name":"kenny_k"},"score":0,"creation_date":1589203984,"post_id":61730183,"comment_id":109191630,"body_markdown":"Have you tried to take a heap dump and analyze early in the run, and then after a few days, and compare?","body":"Have you tried to take a heap dump and analyze early in the run, and then after a few days, and compare?"},{"owner":{"account_id":18551563,"reputation":61,"user_id":13517695,"display_name":"Tom Dearman"},"score":1,"creation_date":1589205564,"post_id":61730183,"comment_id":109192664,"body_markdown":"I have tried that and see nothing special, in particular the actual used heap is always much much lower than the committed heap.  I have a heap dump for the end of this run and it shows 1.3G total heap usage and yet the old generation has committed close to 6G (I will upload a link).  Hence the eden is starved.  I have uploaded a grafana metrics link to show memory usage similar to what gceasy shows.","body":"I have tried that and see nothing special, in particular the actual used heap is always much much lower than the committed heap.  I have a heap dump for the end of this run and it shows 1.3G total heap usage and yet the old generation has committed close to 6G (I will upload a link).  Hence the eden is starved.  I have uploaded a grafana metrics link to show memory usage similar to what gceasy shows."},{"owner":{"account_id":5321859,"reputation":381,"user_id":4245091,"display_name":"Hamdi"},"score":0,"creation_date":1606413468,"post_id":61730183,"comment_id":114962582,"body_markdown":"@TomDearman I got the same problem (commited ~ 2 * used), did you find what was the root cause ?\nWhen I have a small eden+survivor committed space, a big part of the cpu usage will be used by the gc and the whole application will be slowed down even if I have enough memory","body":"@TomDearman I got the same problem (commited ~ 2 * used), did you find what was the root cause ? When I have a small eden+survivor committed space, a big part of the cpu usage will be used by the gc and the whole application will be slowed down even if I have enough memory"}],"answers":[{"tags":[],"owner":{"account_id":1056871,"reputation":117729,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594263148,"creation_date":1594263148,"answer_id":62806653,"question_id":61730183,"body_markdown":"In general, it is normal that `committed` memory value is higher than `used`.  Committed starts with `-Xms` and can go up to `-Xmx`, but `committed` is _not_ `resident`. `Resident` here means _in RAM_, while `used = resident + swapped pages`. So `used` can fluctuate a lot, while `committed` not that much, at least, this is how I understand this.\r\n\r\nA GC starts with the value of `-Xms` as the initial committed memory and will slowly grow (up to `-Xmx` of course). And now that I have made this intro, I really don&#39;t think this makes any sense to your application. Let me explain.\r\n\r\nAs far as I can see from the logs that you provided, everything is pretty much expected (and normal). `G1` has a default value for `MaxGCPauseMillis = 200ms` which indicates how much your application is allowed to be stopped (in the happy path scenario). According to this value, `G1` makes proper decisions to re-size your regions. According to your logs, the `Eden` space of around `270MB` (on average) is collected in up to `0.2s`. Just a random example from your logs:\r\n\r\n\r\n    [Eden: 280.0M ....\r\n    Times: user=0.49 sys=0.00, real=0.18 secs\r\n    2020-05-04T02:43:01.742+0000: 315128.451: [GC pause (G1 Evacuation Pause) (young), 0.1740299 secs]\r\n\r\nSo this is exactly what you asked for, indirectly. To me, your application is perfectly fine, those `GC pause (G1 Evacuation Pause)` take as much as you have configured. And btw, call yourself lucky? but in that entire log file there is not a single `Full GC` that I can spot (apart from the one when you take the heap dump).\r\n\r\n \r\n\r\n\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/59362760/does-g1gc-release-back-memory-to-the-os-even-if-xms-xmx","title":"G1GC Old Gen committed heap keeps growing, used is constant - leads to Eden starvation","body":"<p>In general, it is normal that <code>committed</code> memory value is higher than <code>used</code>.  Committed starts with <code>-Xms</code> and can go up to <code>-Xmx</code>, but <code>committed</code> is <em>not</em> <code>resident</code>. <code>Resident</code> here means <em>in RAM</em>, while <code>used = resident + swapped pages</code>. So <code>used</code> can fluctuate a lot, while <code>committed</code> not that much, at least, this is how I understand this.</p>\n<p>A GC starts with the value of <code>-Xms</code> as the initial committed memory and will slowly grow (up to <code>-Xmx</code> of course). And now that I have made this intro, I really don't think this makes any sense to your application. Let me explain.</p>\n<p>As far as I can see from the logs that you provided, everything is pretty much expected (and normal). <code>G1</code> has a default value for <code>MaxGCPauseMillis = 200ms</code> which indicates how much your application is allowed to be stopped (in the happy path scenario). According to this value, <code>G1</code> makes proper decisions to re-size your regions. According to your logs, the <code>Eden</code> space of around <code>270MB</code> (on average) is collected in up to <code>0.2s</code>. Just a random example from your logs:</p>\n<pre><code>[Eden: 280.0M ....\nTimes: user=0.49 sys=0.00, real=0.18 secs\n2020-05-04T02:43:01.742+0000: 315128.451: [GC pause (G1 Evacuation Pause) (young), 0.1740299 secs]\n</code></pre>\n<p>So this is exactly what you asked for, indirectly. To me, your application is perfectly fine, those <code>GC pause (G1 Evacuation Pause)</code> take as much as you have configured. And btw, call yourself lucky? but in that entire log file there is not a single <code>Full GC</code> that I can spot (apart from the one when you take the heap dump).</p>\n"},{"tags":[],"owner":{"account_id":5894775,"reputation":123,"user_id":4640214,"display_name":"Guizhou Feng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651251177,"creation_date":1651248861,"answer_id":72060858,"question_id":61730183,"body_markdown":"From your GC log, below is how it looks from GCViewer\r\n\r\nThe GC Log show that Ref Proc is the bottle neck of High GC Time\r\nSo suggest try -XX:+ParallelRefProcEnabled to see if it can help\r\n\r\n&gt;       [Ref Proc: 151.3 ms]\r\n&gt;       [Ref Proc: 147.2 ms]\r\n&gt;       [Ref Proc: 146.6 ms]\r\n&gt;       [Ref Proc: 183.0 ms]\r\n&gt;       [Ref Proc: 156.4 ms]\r\n&gt;       [Ref Proc: 152.7 ms]\r\n&gt;       [Ref Proc: 143.7 ms]\r\n&gt;       [Ref Proc: 137.8 ms]\r\n&gt;       [Ref Proc: 194.8 ms]\r\n&gt;       [Ref Proc: 153.3 ms]\r\n&gt;       [Ref Proc: 153.6 ms]\r\n\r\n\r\nThere are some other several things could have a try to improve:\r\n1. Turn on -XX:PrintReferenceGC to get more detail time spend on Ref Proc\r\n2. Reduce -XX:InitiatingHeapOccupancyPercent(default is 45) gradually to see if Mixed GC could happen earlier and help on the behavior\r\n3. Increase -XX:G1NewSizePercent to avoid the Young Generation to reduce too small\r\n\r\nHope can help on it\r\n\r\n[![GC Viewer UI][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/qMEMP.png","title":"G1GC Old Gen committed heap keeps growing, used is constant - leads to Eden starvation","body":"<p>From your GC log, below is how it looks from GCViewer</p>\n<p>The GC Log show that Ref Proc is the bottle neck of High GC Time\nSo suggest try -XX:+ParallelRefProcEnabled to see if it can help</p>\n<blockquote>\n<pre><code>  [Ref Proc: 151.3 ms]\n  [Ref Proc: 147.2 ms]\n  [Ref Proc: 146.6 ms]\n  [Ref Proc: 183.0 ms]\n  [Ref Proc: 156.4 ms]\n  [Ref Proc: 152.7 ms]\n  [Ref Proc: 143.7 ms]\n  [Ref Proc: 137.8 ms]\n  [Ref Proc: 194.8 ms]\n  [Ref Proc: 153.3 ms]\n  [Ref Proc: 153.6 ms]\n</code></pre>\n</blockquote>\n<p>There are some other several things could have a try to improve:</p>\n<ol>\n<li>Turn on -XX:PrintReferenceGC to get more detail time spend on Ref Proc</li>\n<li>Reduce -XX:InitiatingHeapOccupancyPercent(default is 45) gradually to see if Mixed GC could happen earlier and help on the behavior</li>\n<li>Increase -XX:G1NewSizePercent to avoid the Young Generation to reduce too small</li>\n</ol>\n<p>Hope can help on it</p>\n<p><a href=\"https://i.stack.imgur.com/qMEMP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qMEMP.png\" alt=\"GC Viewer UI\" /></a></p>\n"}],"owner":{"account_id":18551563,"reputation":61,"user_id":13517695,"display_name":"Tom Dearman"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10210,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":2,"score":6,"last_activity_date":1690189225,"creation_date":1589201495,"question_id":61730183,"body_markdown":"The G1GC old generation committed heap goes up over time (about 5 to 6 days on production) but the old generation used heap does not.  The Eden and survivor heap is forced to decrease to the minimum (5% of the total heap) and so garbage collection because more and more frequent.  The application caches one big object graph right at the beginning and then has other time/use limited caching throughout its run lifetime.  It has a fairly high object creation rate but does not promote much of that to the old generation apart from the cached objects. \r\n\r\nI have run the GC log through gceasy.io and you can see the above behaviour of the memory:\r\n &lt;https://gceasy.io/my-gc-report.jsp?p=c2hhcmVkLzIwMjAvMDUvMTEvLS1nY2xvZy50YXIuZ3otLTExLTMwLTE5&amp;channel=WEB&gt;. \r\n\r\n\r\ngclog:\r\n&lt;https://drive.google.com/open?id=176X-Lku4D3DGCCdTiB0_z545N8n0tfKc&gt;\r\n\r\nGrafana memory metrics for this run &lt;https://snapshot.raintank.io/dashboard/snapshot/k6g3ljG7cQUEJM7jA4c5tBK1dsUnzabd&gt;\r\n\r\nHeap dump at end of run (load had been removed for about an hour, this is a 500M gz file): &lt;https://drive.google.com/open?id=14ghzIVnpelInSyQBhCwUwM5VkuOjX13-&gt;\r\n\r\nWe do not seem to have high humongous object creation. The server has 12G of RAM and the heap has 6G.\r\n\r\nThe jvm: \r\n```\r\nopenjdk version &quot;1.8.0_242&quot;\r\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_242-b08)\r\nOpenJDK 64-Bit Server VM (AdoptOpenJDK)(build 25.242-b08, mixed mode)\r\n```\r\n\r\nThe jvm flags: \r\n```\r\n-XX:CICompilerCount=4\r\n-XX:ConcGCThreads=2\r\n-XX:G1HeapRegionSize=2097152\r\n-XX:GCLogFileSize=104857600\r\n-XX:InitialHeapSize=6442450944\r\n-XX:InitialRAMPercentage=50.000000\r\n-XX:+ManagementServer\r\n-XX:MarkStackSize=4194304\r\n-XX:MaxHeapSize=6442450944\r\n-XX:MaxNewSize=3865051136\r\n-XX:MaxRAMPercentage=50.000000\r\n-XX:MinHeapDeltaBytes=2097152\r\n-XX:MinRAMPercentage=50.000000\r\n-XX:NumberOfGCLogFiles=10\r\n-XX:+PrintGC\r\n-XX:+PrintGCDateStamps\r\n-XX:+PrintGCDetails\r\n-XX:+PrintGCTimeStamps\r\n-XX:+UseCompressedClassPointers\r\n-XX:+UseCompressedOops\r\n-XX:+UseG1GC\r\n-XX:+UseGCLogFileRotation\r\n```\r\n\r\nWe run on openshift with CentOS: CentOS Linux release 7.7.1908 (Core)\r\n\r\nKernel: 3.10.0-1062.12.1.el7.x86_64","title":"G1GC Old Gen committed heap keeps growing, used is constant - leads to Eden starvation","body":"<p>The G1GC old generation committed heap goes up over time (about 5 to 6 days on production) but the old generation used heap does not.  The Eden and survivor heap is forced to decrease to the minimum (5% of the total heap) and so garbage collection because more and more frequent.  The application caches one big object graph right at the beginning and then has other time/use limited caching throughout its run lifetime.  It has a fairly high object creation rate but does not promote much of that to the old generation apart from the cached objects. </p>\n\n<p>I have run the GC log through gceasy.io and you can see the above behaviour of the memory:\n <a href=\"https://gceasy.io/my-gc-report.jsp?p=c2hhcmVkLzIwMjAvMDUvMTEvLS1nY2xvZy50YXIuZ3otLTExLTMwLTE5&amp;channel=WEB\" rel=\"nofollow noreferrer\">https://gceasy.io/my-gc-report.jsp?p=c2hhcmVkLzIwMjAvMDUvMTEvLS1nY2xvZy50YXIuZ3otLTExLTMwLTE5&amp;channel=WEB</a>. </p>\n\n<p>gclog:\n<a href=\"https://drive.google.com/open?id=176X-Lku4D3DGCCdTiB0_z545N8n0tfKc\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=176X-Lku4D3DGCCdTiB0_z545N8n0tfKc</a></p>\n\n<p>Grafana memory metrics for this run <a href=\"https://snapshot.raintank.io/dashboard/snapshot/k6g3ljG7cQUEJM7jA4c5tBK1dsUnzabd\" rel=\"nofollow noreferrer\">https://snapshot.raintank.io/dashboard/snapshot/k6g3ljG7cQUEJM7jA4c5tBK1dsUnzabd</a></p>\n\n<p>Heap dump at end of run (load had been removed for about an hour, this is a 500M gz file): <a href=\"https://drive.google.com/open?id=14ghzIVnpelInSyQBhCwUwM5VkuOjX13-\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=14ghzIVnpelInSyQBhCwUwM5VkuOjX13-</a></p>\n\n<p>We do not seem to have high humongous object creation. The server has 12G of RAM and the heap has 6G.</p>\n\n<p>The jvm: </p>\n\n<pre><code>openjdk version \"1.8.0_242\"\nOpenJDK Runtime Environment (AdoptOpenJDK)(build 1.8.0_242-b08)\nOpenJDK 64-Bit Server VM (AdoptOpenJDK)(build 25.242-b08, mixed mode)\n</code></pre>\n\n<p>The jvm flags: </p>\n\n<pre><code>-XX:CICompilerCount=4\n-XX:ConcGCThreads=2\n-XX:G1HeapRegionSize=2097152\n-XX:GCLogFileSize=104857600\n-XX:InitialHeapSize=6442450944\n-XX:InitialRAMPercentage=50.000000\n-XX:+ManagementServer\n-XX:MarkStackSize=4194304\n-XX:MaxHeapSize=6442450944\n-XX:MaxNewSize=3865051136\n-XX:MaxRAMPercentage=50.000000\n-XX:MinHeapDeltaBytes=2097152\n-XX:MinRAMPercentage=50.000000\n-XX:NumberOfGCLogFiles=10\n-XX:+PrintGC\n-XX:+PrintGCDateStamps\n-XX:+PrintGCDetails\n-XX:+PrintGCTimeStamps\n-XX:+UseCompressedClassPointers\n-XX:+UseCompressedOops\n-XX:+UseG1GC\n-XX:+UseGCLogFileRotation\n</code></pre>\n\n<p>We run on openshift with CentOS: CentOS Linux release 7.7.1908 (Core)</p>\n\n<p>Kernel: 3.10.0-1062.12.1.el7.x86_64</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1690188672,"creation_date":1690188672,"answer_id":76752811,"question_id":76752806,"body_markdown":"If all you want is to open a web page from your Java application, I suggest using `Desktop.getDesktop().browse(URI)`. If your application runs on different platforms, you could check if the functionality is available using `Desktop.isDesktopSupported()`.","title":"Can we redirect user from a swing project to a webpage available on internet?","body":"<p>If all you want is to open a web page from your Java application, I suggest using <code>Desktop.getDesktop().browse(URI)</code>. If your application runs on different platforms, you could check if the functionality is available using <code>Desktop.isDesktopSupported()</code>.</p>\n"},{"tags":[],"owner":{"account_id":5344470,"reputation":39,"user_id":6261601,"display_name":"Arivazhagan L"},"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1690188881,"creation_date":1690188881,"answer_id":76752831,"question_id":76752806,"body_markdown":"Yes, you can redirect a user from a Swing project to a webpage available on the internet. To achieve this, you can use the Desktop class in Java, which provides a way to interact with the user&#39;s default desktop browser. The Desktop.browse() method allows you to open a specified URL in the user&#39;s default web browser.\r\n\r\nHere&#39;s how you can do it in a Swing project:\r\n\r\n    import java.awt.*;\r\n    import java.awt.event.*;\r\n    import javax.swing.*;\r\n    \r\n    public class WebpageRedirectDemo {\r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n                createAndShowGUI();\r\n            });\r\n        }\r\n    \r\n        private static void createAndShowGUI() {\r\n            JFrame frame = new JFrame(&quot;Webpage Redirect&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n    \r\n            JButton redirectButton = new JButton(&quot;Redirect to Webpage&quot;);\r\n            redirectButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    openWebpage(&quot;https://www.example.com&quot;);\r\n                }\r\n            });\r\n    \r\n            frame.add(redirectButton, BorderLayout.CENTER);\r\n            frame.pack();\r\n            frame.setVisible(true);\r\n        }\r\n    \r\n        private static void openWebpage(String url) {\r\n            try {\r\n                Desktop.getDesktop().browse(new java.net.URI(url));\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        }\r\n    }\r\n\r\nIn this example, we create a simple Swing application with a button. When the button is clicked, the openWebpage() method is called with the URL of the webpage you want to redirect the user to. The openWebpage() method utilizes the Desktop.browse() method to open the specified URL in the default web browser.","title":"Can we redirect user from a swing project to a webpage available on internet?","body":"<p>Yes, you can redirect a user from a Swing project to a webpage available on the internet. To achieve this, you can use the Desktop class in Java, which provides a way to interact with the user's default desktop browser. The Desktop.browse() method allows you to open a specified URL in the user's default web browser.</p>\n<p>Here's how you can do it in a Swing project:</p>\n<pre><code>import java.awt.*;\nimport java.awt.event.*;\nimport javax.swing.*;\n\npublic class WebpageRedirectDemo {\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            createAndShowGUI();\n        });\n    }\n\n    private static void createAndShowGUI() {\n        JFrame frame = new JFrame(&quot;Webpage Redirect&quot;);\n        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n\n        JButton redirectButton = new JButton(&quot;Redirect to Webpage&quot;);\n        redirectButton.addActionListener(new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                openWebpage(&quot;https://www.example.com&quot;);\n            }\n        });\n\n        frame.add(redirectButton, BorderLayout.CENTER);\n        frame.pack();\n        frame.setVisible(true);\n    }\n\n    private static void openWebpage(String url) {\n        try {\n            Desktop.getDesktop().browse(new java.net.URI(url));\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n<p>In this example, we create a simple Swing application with a button. When the button is clicked, the openWebpage() method is called with the URL of the webpage you want to redirect the user to. The openWebpage() method utilizes the Desktop.browse() method to open the specified URL in the default web browser.</p>\n"}],"owner":{"account_id":28253565,"reputation":1,"user_id":21599382,"display_name":"beginner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1690188881,"creation_date":1690188604,"question_id":76752806,"body_markdown":"I was recently  developing a university project of mine for electricity department to do all the stuffs using swing. so while developing it i want to redirect the user to the real contact us  webpage available on the internet. so what code should i write so when the user press the button they should be really redirected into real- world working site of electricity department ??? thanks for help in advance \r\n\r\n\r\nI just happen to know basics of Servlet so I don&#39;t really know how to use it. So is there any real way through which i can redirect the user to their browser to open a specific webpage ??","title":"Can we redirect user from a swing project to a webpage available on internet?","body":"<p>I was recently  developing a university project of mine for electricity department to do all the stuffs using swing. so while developing it i want to redirect the user to the real contact us  webpage available on the internet. so what code should i write so when the user press the button they should be really redirected into real- world working site of electricity department ??? thanks for help in advance</p>\n<p>I just happen to know basics of Servlet so I don't really know how to use it. So is there any real way through which i can redirect the user to their browser to open a specific webpage ??</p>\n"},{"tags":["java","arrays","space-complexity"],"comments":[{"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"score":4,"creation_date":1690144887,"post_id":76750066,"comment_id":135308929,"body_markdown":"This is very hard to read because you did not use proper formatting. Look up markdown syntax and preview your posts in the SO question editor (where you wrote this question) to make a post that attract more readers.","body":"This is very hard to read because you did not use proper formatting. Look up markdown syntax and preview your posts in the SO question editor (where you wrote this question) to make a post that attract more readers."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1690145707,"post_id":76750066,"comment_id":135309019,"body_markdown":"For reference, the source of the problem seems to be https://leetcode.com/problems/concatenation-of-array/","body":"For reference, the source of the problem seems to be <a href=\"https://leetcode.com/problems/concatenation-of-array/\" rel=\"nofollow noreferrer\">leetcode.com/problems/concatenation-of-array</a>"},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1690146026,"post_id":76750066,"comment_id":135309056,"body_markdown":"From an aesthetics point of view, I don&#39;t like the first solution in which the value of the `for` loop index is changed within the block controlled by the loop. Consider `for (m = 0; m &lt; 2; m++) { for for(int i = 0; i &lt; n; i++) { arr[k] = nums[i];   k++; } }`  instead.","body":"From an aesthetics point of view, I don&#39;t like the first solution in which the value of the <code>for</code> loop index is changed within the block controlled by the loop. Consider <code>for (m = 0; m &lt; 2; m++) { for for(int i = 0; i &lt; n; i++) { arr[k] = nums[i];   k++; } }</code>  instead."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1690146673,"post_id":76750066,"comment_id":135309108,"body_markdown":"Off-topic: Can you think of a 3rd algorithm that will run in `for (int i = 0; i &lt; n; i++) {  }` ?  Hint: There will be exactly 2 statements in the `{ }` block.","body":"Off-topic: Can you think of a 3rd algorithm that will run in <code>for (int i = 0; i &lt; n; i++) {  }</code> ?  Hint: There will be exactly 2 statements in the <code>{ }</code> block."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":1,"creation_date":1690155269,"post_id":76750066,"comment_id":135309780,"body_markdown":"The space complexity seems to be the same in both cases. Where did you get those numbers from?","body":"The space complexity seems to be the same in both cases. Where did you get those numbers from?"}],"answers":[{"tags":[],"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1690188820,"creation_date":1690145530,"answer_id":76750289,"question_id":76750066,"body_markdown":"Is  44.42/44.72 MB the memory used by the JVM during execution? Or is it the size in disc for the application?\r\n\r\nIn any case, the JVM is not &quot;deterministic&quot; in that sense, ghe GIT compiler can even change the memory used **during** the execution.\r\n\r\nFor Java memory management, there are tons of interesting metrics. But the one you are looking at is probably not one of them. I would suggest the following things to learn if you want to get starting understanding this field:\r\n\r\n - What is Stack vs. Heap.\r\n - Java memory management, Eden, Survivor, Tenured and other spaces.\r\n - Garbage collecfion.\r\n\r\nWith your code examples, investigate how they scale if you make your array 1 kb vs 1 mb long.","title":"Does memory requirement of a code consist of a arithmetic computation is greater than that of code consist of low arithmetic computation in java?","body":"<p>Is  44.42/44.72 MB the memory used by the JVM during execution? Or is it the size in disc for the application?</p>\n<p>In any case, the JVM is not &quot;deterministic&quot; in that sense, ghe GIT compiler can even change the memory used <strong>during</strong> the execution.</p>\n<p>For Java memory management, there are tons of interesting metrics. But the one you are looking at is probably not one of them. I would suggest the following things to learn if you want to get starting understanding this field:</p>\n<ul>\n<li>What is Stack vs. Heap.</li>\n<li>Java memory management, Eden, Survivor, Tenured and other spaces.</li>\n<li>Garbage collecfion.</li>\n</ul>\n<p>With your code examples, investigate how they scale if you make your array 1 kb vs 1 mb long.</p>\n"}],"owner":{"account_id":23293939,"reputation":3,"user_id":17730773,"display_name":"Shantanu Patil"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"accepted_answer_id":76750289,"answer_count":1,"score":-4,"last_activity_date":1690188820,"creation_date":1690141817,"question_id":76750066,"body_markdown":"`here I am writing a solution for concatenation of two arrays using but I come up with two solutions. \r\nthe problems is given as below:\r\nGiven an integer array nums of length n, you want to create an array ans of length 2n where ans[i] == nums[i] and ans[i + n] == nums[i] for 0 &lt;= i &lt; n (0-indexed).\r\n\r\nSpecifically, ans is the concatenation of two nums arrays.\r\n\r\nReturn the array ans.\r\nExample:\r\n\r\nInput: nums = [1,2,1]\r\nOutput: [1,2,1,1,2,1]\r\nExplanation: The array ans is formed as follows:\r\n- ans = [nums[0],nums[1],nums[2],nums[0],nums[1],nums[2]]\r\n- ans = [1,2,1,1,2,1]\r\n\r\nNow,can anyone please explain me how can the space complexity of code (1) is better than that of the code (2)? Both solutions are made by me But I can&#39;t understand that how can be the time complexity of code (1) is better that of code (2). please explain this if you know how is code (1) better and taking less memory as compared to that of (2)?\r\n code (1) is taking memory of : 44.42 MB.\r\n code (2) is taking memory of : 44.72 MB.\r\ncode(1) :\r\n\r\n   ` class Solution {\r\n         public int[] getConcatenation(int[] nums) {\r\n\r\n     int n = nums.length;\r\n     int[] arr = new int[2*n];\r\n     int k = 0;\r\n     int count = 0;\r\n     for(int i = 0; i &lt; n; i++){\r\n         arr[k] = nums[i];\r\n         k++;\r\n         if(i == n-1){\r\n             i = -1;\r\n             count++;\r\n         }\r\n         if(count == 2){\r\n             break;\r\n         }\r\n     }\r\n     \r\n    return arr;\r\n   }\r\n    }\r\n    \r\n     code (2) :\r\n     class Solution {\r\n     public int[] getConcatenation(int[] nums) {\r\n\r\n     int n = nums.length;\r\n     int[] arr = new int[2*n];\r\n  \r\n     \r\n     for(int i = 0; i &lt; 2*n; i++){\r\n         arr[i] = nums[i % n];\r\n     }\r\n     \r\n   return arr;\r\n    }\r\n  }`\r\nAsk Question\r\n","title":"Does memory requirement of a code consist of a arithmetic computation is greater than that of code consist of low arithmetic computation in java?","body":"<p>`here I am writing a solution for concatenation of two arrays using but I come up with two solutions.\nthe problems is given as below:\nGiven an integer array nums of length n, you want to create an array ans of length 2n where ans[i] == nums[i] and ans[i + n] == nums[i] for 0 &lt;= i &lt; n (0-indexed).</p>\n<p>Specifically, ans is the concatenation of two nums arrays.</p>\n<p>Return the array ans.\nExample:</p>\n<p>Input: nums = [1,2,1]\nOutput: [1,2,1,1,2,1]\nExplanation: The array ans is formed as follows:</p>\n<ul>\n<li>ans = [nums[0],nums[1],nums[2],nums[0],nums[1],nums[2]]</li>\n<li>ans = [1,2,1,1,2,1]</li>\n</ul>\n<p>Now,can anyone please explain me how can the space complexity of code (1) is better than that of the code (2)? Both solutions are made by me But I can't understand that how can be the time complexity of code (1) is better that of code (2). please explain this if you know how is code (1) better and taking less memory as compared to that of (2)?\ncode (1) is taking memory of : 44.42 MB.\ncode (2) is taking memory of : 44.72 MB.\ncode(1) :</p>\n<p>` class Solution {\npublic int[] getConcatenation(int[] nums) {</p>\n<pre><code> int n = nums.length;\n int[] arr = new int[2*n];\n int k = 0;\n int count = 0;\n for(int i = 0; i &lt; n; i++){\n     arr[k] = nums[i];\n     k++;\n     if(i == n-1){\n         i = -1;\n         count++;\n     }\n     if(count == 2){\n         break;\n     }\n }\n \nreturn arr;\n</code></pre>\n<p>}\n}</p>\n<pre><code> code (2) :\n class Solution {\n public int[] getConcatenation(int[] nums) {\n\n int n = nums.length;\n int[] arr = new int[2*n];\n\n \n for(int i = 0; i &lt; 2*n; i++){\n     arr[i] = nums[i % n];\n }\n \n</code></pre>\n<p>return arr;\n}\n}`\nAsk Question</p>\n"},{"tags":["java","android","iframe","webview","youtube"],"owner":{"account_id":29079039,"reputation":11,"user_id":22275497,"display_name":"user22275497"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":98,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1690188615,"creation_date":1690188615,"question_id":76752807,"body_markdown":"I have successfully integrated the YouTube iframe API into my Android app, allowing users to watch embedded YouTube videos in the WebView. However, I want to know if there is any way to enable full-screen mode automatically without requiring the user to manually press the full-screen button within the YouTube player controls.\r\n\r\nis there any new developments or workarounds that would allow automatic full-screen mode ?","title":"YouTube Video Full-Screen Mode in Android WebView","body":"<p>I have successfully integrated the YouTube iframe API into my Android app, allowing users to watch embedded YouTube videos in the WebView. However, I want to know if there is any way to enable full-screen mode automatically without requiring the user to manually press the full-screen button within the YouTube player controls.</p>\n<p>is there any new developments or workarounds that would allow automatic full-screen mode ?</p>\n"},{"tags":["java","concurrency"],"comments":[{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":2,"creation_date":1690183188,"post_id":76752149,"comment_id":135312216,"body_markdown":"Does anything modify `nodeIdMap` concurrently? If no, then it&#39;s safe, if yes, then it&#39;s not safe. You may want to make an immutable copy (`Map.copyOf(..)`) so you can be sure.","body":"Does anything modify <code>nodeIdMap</code> concurrently? If no, then it&#39;s safe, if yes, then it&#39;s not safe. You may want to make an immutable copy (<code>Map.copyOf(..)</code>) so you can be sure."},{"owner":{"account_id":28974642,"reputation":3,"user_id":22194050,"display_name":"John Johnson"},"score":0,"creation_date":1690183343,"post_id":76752149,"comment_id":135312241,"body_markdown":"https://stackoverflow.com/users/466862/mark-rotteveel nothing modifies it ,but componentNodeId this is is used to search in db","body":"<a href=\"https://stackoverflow.com/users/466862/mark-rotteveel\">stackoverflow.com/users/466862/mark-rotteveel</a> nothing modifies it ,but componentNodeId this is is used to search in db"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1690184749,"post_id":76752149,"comment_id":135312505,"body_markdown":"Why not leave it as it is, with `ConcurrentHashMap()`? Then you don&#39;t have to think about it.","body":"Why not leave it as it is, with <code>ConcurrentHashMap()</code>? Then you don&#39;t have to think about it."},{"owner":{"account_id":28974642,"reputation":3,"user_id":22194050,"display_name":"John Johnson"},"score":0,"creation_date":1690184848,"post_id":76752149,"comment_id":135312519,"body_markdown":"https://stackoverflow.com/users/207421/user207421 ya solution just then would have to take care of nulls","body":"<a href=\"https://stackoverflow.com/users/207421/user207421\">stackoverflow.com/users/207421/user207421</a> ya solution just then would have to take care of nulls"},{"owner":{"account_id":28974642,"reputation":3,"user_id":22194050,"display_name":"John Johnson"},"score":0,"creation_date":1690185028,"post_id":76752149,"comment_id":135312552,"body_markdown":"well okay thanks a lot guys,then i&#39;ll leave it as it is since just reading","body":"well okay thanks a lot guys,then i&#39;ll leave it as it is since just reading"},{"owner":{"account_id":213468,"reputation":103489,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1690186858,"post_id":76752149,"comment_id":135312895,"body_markdown":"The proper way to notify people in comments is to use @username","body":"The proper way to notify people in comments is to use @username"},{"owner":{"account_id":28974642,"reputation":3,"user_id":22194050,"display_name":"John Johnson"},"score":0,"creation_date":1690984436,"post_id":76752149,"comment_id":135429186,"body_markdown":"@MarkRotteveel okay will keep in mind,Thanks.","body":"@MarkRotteveel okay will keep in mind,Thanks."}],"answers":[{"tags":[],"owner":{"account_id":3449131,"reputation":12148,"user_id":2889165,"accept_rate":73,"display_name":"Andreas Lundgren"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1690188541,"creation_date":1690186354,"answer_id":76752532,"question_id":76752149,"body_markdown":"It is safe to read from and variable from multiple threads of the content is constant (not modified).\r\n\r\nThe reason that non constant values needs special treatment is that the CPU cannot cache values from the memory. Worst case, values must be read from memory (~ x10-x100 times slower than reading from CPU register or cache) each time they are used since they may have been updated by another thread since last time the current thread accessed them. (JVM experts may have more input here, maybe some kind of dirty flag is used to optimize things. Point is that it at least brings some extra work.)\r\n\r\nTelling the JVM to synchronise (by using a concurrent hash map) is not only unnecessary in this case, but comes with a performance cost. ","title":"Is it safe to use just a HashMap in multiThreaded env to read from it?","body":"<p>It is safe to read from and variable from multiple threads of the content is constant (not modified).</p>\n<p>The reason that non constant values needs special treatment is that the CPU cannot cache values from the memory. Worst case, values must be read from memory (~ x10-x100 times slower than reading from CPU register or cache) each time they are used since they may have been updated by another thread since last time the current thread accessed them. (JVM experts may have more input here, maybe some kind of dirty flag is used to optimize things. Point is that it at least brings some extra work.)</p>\n<p>Telling the JVM to synchronise (by using a concurrent hash map) is not only unnecessary in this case, but comes with a performance cost.</p>\n"}],"owner":{"account_id":28974642,"reputation":3,"user_id":22194050,"display_name":"John Johnson"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1690188541,"creation_date":1690182814,"question_id":76752149,"body_markdown":"```\r\n          Map&lt;Long, List&lt;Long&gt;&gt; relevantModules = new ConcurrentHashMap&lt;&gt;();\r\n            Map&lt;Long, List&lt;Long&gt;&gt; notRelevantModules = new ConcurrentHashMap&lt;&gt;();\r\n            List&lt;Long&gt; componentIds = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n\r\n\r\n            Instant startTest = Instant.now();\r\n            List&lt;AssignmentApplicationBE&gt; wrapperList = componentPABean.findAssignmentApplications(acId, materialNodelist, substanceNodelist, threshold);\r\n\r\n\r\n            LOG.info(&quot;Getting NodeIds from assignments ...&quot;);\r\n            List&lt;Long&gt; nodeIds = getAssignmentsNodeIds(wrapperList);\r\n            LOG.info(&quot;NodeIds size is [&quot; + nodeIds.size() + &quot;]&quot;);\r\n            Map&lt;Long, Long&gt; nodeIdMap = nodePABean.findNodeIdsMapByNodeIds(nodeIds);\r\n            LOG.info(&quot;NodeIdMap is ready&quot;);\r\n\r\n\r\n            LOG.info(&quot;Start of ParseEachAssignmentApplication [&quot; + startTest.get(ChronoField.MILLI_OF_SECOND) + &quot;]&quot;);\r\n\r\n            ExecutorService executor = Executors.newFixedThreadPool(THREADS);\r\n\r\n            for (int i = 0; i &lt; wrapperList.size(); i += BATCH_SIZE) {\r\n                LOG.info(&quot;Batching number [&quot; + i + &quot;]&quot;);\r\n\r\n                List&lt;AssignmentApplicationBE&gt; batch = wrapperList.subList(i, Math.min(i + BATCH_SIZE, wrapperList.size()));\r\n\r\n                List&lt;CompletableFuture&lt;Void&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n                for (AssignmentApplicationBE each : batch) {\r\n                    CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt;\r\n                                    parseEachAssignmentApplication(each, componentIds, notRelevantModules, relevantModules,nodeIdMap),\r\n                            executor\r\n                    );\r\n                    futures.add(future);\r\n                }\r\n                CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).join();\r\n            }\r\n            executor.shutdown();\r\n\r\n```\r\n\r\n\r\nand \r\n\r\n```\r\nprivate void parseEachAssignmentApplication(AssignmentApplicationBE assignmentApplicationBE, List&lt;Long&gt; componentIds,\r\n                                                Map&lt;Long, List&lt;Long&gt;&gt; notRelevantModules, Map&lt;Long, List&lt;Long&gt;&gt; relevantModules, Map&lt;Long, Long&gt; nodeIdMap) {\r\n        Long nodeId = assignmentApplicationBE.getNodeId();\r\n        List&lt;OemAppcodeBE&gt; appcodes = assignmentApplicationBE.getOemAppcodes();\r\n        if (nodeId == null) {\r\n            return;\r\n        }\r\n        componentIds.add(nodeId);\r\n\r\n        long componentNodeId = nodeIdMap.get(nodeId);\r\n```\r\n\r\n\r\n        long componentNodeId = nodeIdMap.get(nodeId);\r\n is this safe action to do?\r\n\r\nI&#39;ve tried with unmodifable map and it worked so i guess it is safe to use if it is just reading ,but not sure ?\r\nI&#39;m just worried about this result because a ot of threads run concurrently.","title":"Is it safe to use just a HashMap in multiThreaded env to read from it?","body":"<pre><code>          Map&lt;Long, List&lt;Long&gt;&gt; relevantModules = new ConcurrentHashMap&lt;&gt;();\n            Map&lt;Long, List&lt;Long&gt;&gt; notRelevantModules = new ConcurrentHashMap&lt;&gt;();\n            List&lt;Long&gt; componentIds = Collections.synchronizedList(new ArrayList&lt;&gt;());\n\n\n            Instant startTest = Instant.now();\n            List&lt;AssignmentApplicationBE&gt; wrapperList = componentPABean.findAssignmentApplications(acId, materialNodelist, substanceNodelist, threshold);\n\n\n            LOG.info(&quot;Getting NodeIds from assignments ...&quot;);\n            List&lt;Long&gt; nodeIds = getAssignmentsNodeIds(wrapperList);\n            LOG.info(&quot;NodeIds size is [&quot; + nodeIds.size() + &quot;]&quot;);\n            Map&lt;Long, Long&gt; nodeIdMap = nodePABean.findNodeIdsMapByNodeIds(nodeIds);\n            LOG.info(&quot;NodeIdMap is ready&quot;);\n\n\n            LOG.info(&quot;Start of ParseEachAssignmentApplication [&quot; + startTest.get(ChronoField.MILLI_OF_SECOND) + &quot;]&quot;);\n\n            ExecutorService executor = Executors.newFixedThreadPool(THREADS);\n\n            for (int i = 0; i &lt; wrapperList.size(); i += BATCH_SIZE) {\n                LOG.info(&quot;Batching number [&quot; + i + &quot;]&quot;);\n\n                List&lt;AssignmentApplicationBE&gt; batch = wrapperList.subList(i, Math.min(i + BATCH_SIZE, wrapperList.size()));\n\n                List&lt;CompletableFuture&lt;Void&gt;&gt; futures = new ArrayList&lt;&gt;();\n                for (AssignmentApplicationBE each : batch) {\n                    CompletableFuture&lt;Void&gt; future = CompletableFuture.runAsync(() -&gt;\n                                    parseEachAssignmentApplication(each, componentIds, notRelevantModules, relevantModules,nodeIdMap),\n                            executor\n                    );\n                    futures.add(future);\n                }\n                CompletableFuture.allOf(futures.toArray(new CompletableFuture[0])).join();\n            }\n            executor.shutdown();\n\n</code></pre>\n<p>and</p>\n<pre><code>private void parseEachAssignmentApplication(AssignmentApplicationBE assignmentApplicationBE, List&lt;Long&gt; componentIds,\n                                                Map&lt;Long, List&lt;Long&gt;&gt; notRelevantModules, Map&lt;Long, List&lt;Long&gt;&gt; relevantModules, Map&lt;Long, Long&gt; nodeIdMap) {\n        Long nodeId = assignmentApplicationBE.getNodeId();\n        List&lt;OemAppcodeBE&gt; appcodes = assignmentApplicationBE.getOemAppcodes();\n        if (nodeId == null) {\n            return;\n        }\n        componentIds.add(nodeId);\n\n        long componentNodeId = nodeIdMap.get(nodeId);\n</code></pre>\n<pre><code>    long componentNodeId = nodeIdMap.get(nodeId);\n</code></pre>\n<p>is this safe action to do?</p>\n<p>I've tried with unmodifable map and it worked so i guess it is safe to use if it is just reading ,but not sure ?\nI'm just worried about this result because a ot of threads run concurrently.</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9702,"page":290,"page_size":100}
