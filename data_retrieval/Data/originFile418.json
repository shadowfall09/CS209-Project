{"items":[{"tags":["java","r","oracle","jdbc","odbc"],"owner":{"account_id":27305922,"reputation":37,"user_id":20821917,"display_name":"avishkar683"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684830535,"creation_date":1684830535,"question_id":76312699,"body_markdown":"I have created a table in the oracle database from a dataframe using the following code:\r\n\r\n```\r\ndrv_oracle &lt;- JDBC(oracle_driver, oracle_jdbc_jar)  #creating DBI driver\r\nconn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;)  #creating DBIConnection Object\r\n\r\ndbWriteTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL) #DECILE_ANALYSIS_FINAL is dataframe\r\n```\r\nUsing the above code, the table is created in the database.\r\n\r\nBut now I have refreshed the DECILE_ANALYSIS_FINAL dataframe with new data. I want to append this data into my created table. \r\n\r\nThis I try to do using following code:\r\n\r\n```\r\nconn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;) \r\ndbAppendTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL)\r\n```\r\n\r\nBut now I am getting following error:\r\n\r\n```\r\nError in dbSendQuery(conn, statement, ...) : \r\n  Unable to retrieve JDBC result set\r\n  JDBC ERROR: Missing IN or OUT parameter at index:: 1\r\n  Statement: INSERT INTO &quot;DECILE_ANALYSIS_BASE_TABLE&quot;\r\n  (&quot;FISCAL_YEAR&quot;, &quot;MONTH&quot;, &quot;GEO_LEVEL&quot;, &quot;GEO_CODE&quot;, &quot;PRODUCT_LEVEL&quot;, &quot;PRODUCT_CODE&quot;, &quot;CHANNEL_TYPE&quot;, &quot;DECILE&quot;, &quot;UOB&quot;, &quot;TULC&quot;, &quot;TTLC&quot;, &quot;TOTAL_SALES&quot;, &quot;PDO&quot;, &quot;UNIQUE_ID&quot;, &quot;AVG_PDO_DROP&quot;)\r\nVALUES\r\n  (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\r\n```\r\n\r\nPlease help me understand how I can resolve this issue.\r\n\r\nI tried the code mentioned above","title":"Unable to append to an Oracle table from R Server using dbAppendTable()","body":"<p>I have created a table in the oracle database from a dataframe using the following code:</p>\n<pre><code>drv_oracle &lt;- JDBC(oracle_driver, oracle_jdbc_jar)  #creating DBI driver\nconn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;)  #creating DBIConnection Object\n\ndbWriteTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL) #DECILE_ANALYSIS_FINAL is dataframe\n</code></pre>\n<p>Using the above code, the table is created in the database.</p>\n<p>But now I have refreshed the DECILE_ANALYSIS_FINAL dataframe with new data. I want to append this data into my created table.</p>\n<p>This I try to do using following code:</p>\n<pre><code>conn_oracle &lt;- dbConnect(drv_oracle, oracle_url,&quot;username&quot;,&quot;password&quot;) \ndbAppendTable(conn_oracle,&quot;DECILE_ANALYSIS_BASE_TABLE&quot;,DECILE_ANALYSIS_FINAL)\n</code></pre>\n<p>But now I am getting following error:</p>\n<pre><code>Error in dbSendQuery(conn, statement, ...) : \n  Unable to retrieve JDBC result set\n  JDBC ERROR: Missing IN or OUT parameter at index:: 1\n  Statement: INSERT INTO &quot;DECILE_ANALYSIS_BASE_TABLE&quot;\n  (&quot;FISCAL_YEAR&quot;, &quot;MONTH&quot;, &quot;GEO_LEVEL&quot;, &quot;GEO_CODE&quot;, &quot;PRODUCT_LEVEL&quot;, &quot;PRODUCT_CODE&quot;, &quot;CHANNEL_TYPE&quot;, &quot;DECILE&quot;, &quot;UOB&quot;, &quot;TULC&quot;, &quot;TTLC&quot;, &quot;TOTAL_SALES&quot;, &quot;PDO&quot;, &quot;UNIQUE_ID&quot;, &quot;AVG_PDO_DROP&quot;)\nVALUES\n  (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\n</code></pre>\n<p>Please help me understand how I can resolve this issue.</p>\n<p>I tried the code mentioned above</p>\n"},{"tags":["java","spring-boot","dependency-injection","integration-testing"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1684829322,"post_id":76312467,"comment_id":134570297,"body_markdown":"Does injecting/autowiring a `MockMvc` bean normally work (Can you inject a `MockMvc` instance in your test) or does that result in an exception as well? What happens when removing the `@ContextConfiguration`?","body":"Does injecting/autowiring a <code>MockMvc</code> bean normally work (Can you inject a <code>MockMvc</code> instance in your test) or does that result in an exception as well? What happens when removing the <code>@ContextConfiguration</code>?"}],"answers":[{"comments":[{"owner":{"account_id":28660254,"reputation":13,"user_id":21945315,"display_name":"abaudat"},"score":0,"creation_date":1684834997,"post_id":76312684,"comment_id":134571627,"body_markdown":"Indeed this was the issue, we were actually misusing `@AutoConfigureAfter` and `@AutoConfigureBefore` in our codebase, which led me to think it would work in nested classes. Thank you very much for the quick answer, Andy.","body":"Indeed this was the issue, we were actually misusing <code>@AutoConfigureAfter</code> and <code>@AutoConfigureBefore</code> in our codebase, which led me to think it would work in nested classes. Thank you very much for the quick answer, Andy."}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684830404,"creation_date":1684830404,"answer_id":76312684,"question_id":76312467,"body_markdown":"`@AutoConfigureAfter` only works on a top-level class that is listed in `spring.factories`. You haven&#39;t shown your `spring.factories` file, but assuming that it lists `MyAutoConfiguration`, that&#39;s the class on which `@AutoConfigureAfter` should be placed.","title":"@ConditionalOnBean not being triggered even though Bean exists in SpringBootTest","body":"<p><code>@AutoConfigureAfter</code> only works on a top-level class that is listed in <code>spring.factories</code>. You haven't shown your <code>spring.factories</code> file, but assuming that it lists <code>MyAutoConfiguration</code>, that's the class on which <code>@AutoConfigureAfter</code> should be placed.</p>\n"}],"owner":{"account_id":28660254,"reputation":13,"user_id":21945315,"display_name":"abaudat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76312684,"answer_count":1,"score":1,"last_activity_date":1684830404,"creation_date":1684828746,"question_id":76312467,"body_markdown":"I have the following AutoConfiguration class:\r\n\r\n```\r\n@Configuration\r\npublic class MyAutoConfiguration {\r\n  @AutoConfigureAfter(MockMvcAutoConfiguration.class)\r\n  class MyNestedAutoConfiguration {\r\n    @ConditionalOnBean(MockMvc.class)\r\n    @Bean\r\n    AugmentedMockMvc augmentedMockMvc(MockMvc mockMvc) {\r\n      return new AugmentedMockMvc(mockMvc);\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe class is properly registered in spring.factories, and it is imported as a maven dependency in my Spring Boot application. My Spring Boot application looks like the following:\r\n\r\n```\r\n@SpringBootApplication\r\npublic class MySpringBootApp {\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(MySpringBootApp.class, args);\r\n  }\r\n}\r\n```\r\n\r\nFinally, I have an integration test that is defined like this:\r\n\r\n```\r\n@SpringBootTest(classes = {MySpringBootApp.class})\r\n@AutoConfigureMockMvc\r\n@ContextConfiguration(initializers = {MyInitializer.class})\r\nclass MyTest {\r\n  @Autowired\r\n  private AugmentedMockMvc augmentedMockMvc;\r\n}\r\n```\r\n\r\n`MyInitializer` can be ignored, it doesn&#39;t do anything meaningful here, but it is needed and therefore I need to use both `@SpringBootTest` and `@ContextConfiguration`.\r\n\r\n**The issue is the following**: With this setup, the augmentedMockMvc Bean is not created because it does not match the `@ConditionalOnBean(MockMvc.class)` condition. \r\n\r\nI tried two things:\r\n- Adding `classes = {MockMvcAutoConfiguration.class}` to `@ContextConfiguration`. This works fine and fixes the issue, the augmentedMockMvc Bean is now properly registered\r\n- Removing the `@ConditionalOnBean(MockMvc.class)` annotation from the Bean creation. Weirdly enough, this also works! The MockMvc Bean is actually there, but it is not discovered by Spring when evaluating the `@ConditionalOnBean` annotation.\r\n\r\nI don&#39;t understand why the MockMvc Bean is not found by the `@ConditionalOnBean(MockMvc.class)` even though the Bean exists unless I specifically put the class in the `@ContextConfiguration`, I would think that having `@AutoConfigureMockMvc` on `MyTest` should be enough for the `MockMvcAutoConfiguration.class` class to be in the context","title":"@ConditionalOnBean not being triggered even though Bean exists in SpringBootTest","body":"<p>I have the following AutoConfiguration class:</p>\n<pre><code>@Configuration\npublic class MyAutoConfiguration {\n  @AutoConfigureAfter(MockMvcAutoConfiguration.class)\n  class MyNestedAutoConfiguration {\n    @ConditionalOnBean(MockMvc.class)\n    @Bean\n    AugmentedMockMvc augmentedMockMvc(MockMvc mockMvc) {\n      return new AugmentedMockMvc(mockMvc);\n    }\n  }\n}\n</code></pre>\n<p>The class is properly registered in spring.factories, and it is imported as a maven dependency in my Spring Boot application. My Spring Boot application looks like the following:</p>\n<pre><code>@SpringBootApplication\npublic class MySpringBootApp {\n  public static void main(String[] args) {\n    SpringApplication.run(MySpringBootApp.class, args);\n  }\n}\n</code></pre>\n<p>Finally, I have an integration test that is defined like this:</p>\n<pre><code>@SpringBootTest(classes = {MySpringBootApp.class})\n@AutoConfigureMockMvc\n@ContextConfiguration(initializers = {MyInitializer.class})\nclass MyTest {\n  @Autowired\n  private AugmentedMockMvc augmentedMockMvc;\n}\n</code></pre>\n<p><code>MyInitializer</code> can be ignored, it doesn't do anything meaningful here, but it is needed and therefore I need to use both <code>@SpringBootTest</code> and <code>@ContextConfiguration</code>.</p>\n<p><strong>The issue is the following</strong>: With this setup, the augmentedMockMvc Bean is not created because it does not match the <code>@ConditionalOnBean(MockMvc.class)</code> condition.</p>\n<p>I tried two things:</p>\n<ul>\n<li>Adding <code>classes = {MockMvcAutoConfiguration.class}</code> to <code>@ContextConfiguration</code>. This works fine and fixes the issue, the augmentedMockMvc Bean is now properly registered</li>\n<li>Removing the <code>@ConditionalOnBean(MockMvc.class)</code> annotation from the Bean creation. Weirdly enough, this also works! The MockMvc Bean is actually there, but it is not discovered by Spring when evaluating the <code>@ConditionalOnBean</code> annotation.</li>\n</ul>\n<p>I don't understand why the MockMvc Bean is not found by the <code>@ConditionalOnBean(MockMvc.class)</code> even though the Bean exists unless I specifically put the class in the <code>@ContextConfiguration</code>, I would think that having <code>@AutoConfigureMockMvc</code> on <code>MyTest</code> should be enough for the <code>MockMvcAutoConfiguration.class</code> class to be in the context</p>\n"},{"tags":["java","spring-boot","testing","spring-boot-actuator","dynamic-properties"],"answers":[{"comments":[{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634663038,"post_id":69623653,"comment_id":123084110,"body_markdown":"The first version works well. The second doesn&#39;t. This produces a java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0","body":"The first version works well. The second doesn&#39;t. This produces a java.lang.IndexOutOfBoundsException: Index 0 out of bounds for length 0"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634663424,"post_id":69623653,"comment_id":123084237,"body_markdown":"Thanks for the feedback. I will remove the second option ;)","body":"Thanks for the feedback. I will remove the second option ;)"}],"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634663434,"creation_date":1634600511,"answer_id":69623653,"question_id":69620134,"body_markdown":"Try the following:\r\n```java\r\n@ExtendWith(SpringExtension.class)\r\n@EnableConfigurationProperties(value = AdapterHealthCheckConfig.class)\r\n@TestPropertySource(&quot;classpath:application-test.properties&quot;)\r\nclass AppHealthCheckConfigTest {\r\n\r\n    @Autowired\r\n    private AdapterHealthCheckConfig config;\r\n\r\n    @Test\r\n    void healthCheckBeansAreInitialized() {\r\n//        config.init();\r\n        System.out.println(config.getApps().get(0));\r\n\r\n    }\r\n}\r\n```","title":"How to test multiple instance creation of a bean of one class filled with values from application.properties?","body":"<p>Try the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ExtendWith(SpringExtension.class)\n@EnableConfigurationProperties(value = AdapterHealthCheckConfig.class)\n@TestPropertySource(&quot;classpath:application-test.properties&quot;)\nclass AppHealthCheckConfigTest {\n\n    @Autowired\n    private AdapterHealthCheckConfig config;\n\n    @Test\n    void healthCheckBeansAreInitialized() {\n//        config.init();\n        System.out.println(config.getApps().get(0));\n\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":69623653,"answer_count":1,"score":0,"last_activity_date":1684830396,"creation_date":1634577839,"question_id":69620134,"body_markdown":"After creating multiple beans of a specific class using @PostConstruct according to [Multiple instances of a bean of one class filled with values from application.properties][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/69571749/multiple-instances-of-a-bean-of-one-class-filled-with-values-from-application-pr/69574978?noredirect=1#comment123021394_69574978\r\n\r\nI wonder how I could test the creation of those bean instances.\r\n\r\nI tried it this way:\r\n\r\n    @ActiveProfiles(&quot;test&quot;)\r\n    @RequiredArgsConstructor\r\n    @ExtendWith({SpringExtension.class, MockitoExtension.class})\r\n    @SpringBootTest(classes = {AppHealthCheckContributor.class, AppHealthCheckProperties.class})\r\n    @ConfigurationProperties(prefix = &quot;healthcheck&quot;)\r\n    @ContextConfiguration(classes = { AppHealthCheckConfig.class })\r\n    //@TestPropertySource(properties = &quot;healthcheck.app[0].name=testHealthIndicator, healthcheck.app[0].baseUrl=http://localhost, healthcheck.app[0].basePath=/test&quot;)\r\n    @TestPropertySource(locations = {&quot;/application-test.properties&quot;})\r\n    class AppHealthCheckConfigTest {\r\n    \r\n        @Autowired\r\n        private AdapterHealthCheckConfig config;\r\n    \r\n        @Test\r\n        void healthCheckBeansAreInitialized() {\r\n    //        config.init();\r\n            System.out.println(config.getApps().get(0));\r\n    \r\n        }\r\n    }\r\n\r\nbut this results in: `AppHealthCheckProperties(baseUrl=null, basePath=null, name=null)`\r\n","title":"How to test multiple instance creation of a bean of one class filled with values from application.properties?","body":"<p>After creating multiple beans of a specific class using @PostConstruct according to <a href=\"https://stackoverflow.com/questions/69571749/multiple-instances-of-a-bean-of-one-class-filled-with-values-from-application-pr/69574978?noredirect=1#comment123021394_69574978\">Multiple instances of a bean of one class filled with values from application.properties</a></p>\n<p>I wonder how I could test the creation of those bean instances.</p>\n<p>I tried it this way:</p>\n<pre><code>@ActiveProfiles(&quot;test&quot;)\n@RequiredArgsConstructor\n@ExtendWith({SpringExtension.class, MockitoExtension.class})\n@SpringBootTest(classes = {AppHealthCheckContributor.class, AppHealthCheckProperties.class})\n@ConfigurationProperties(prefix = &quot;healthcheck&quot;)\n@ContextConfiguration(classes = { AppHealthCheckConfig.class })\n//@TestPropertySource(properties = &quot;healthcheck.app[0].name=testHealthIndicator, healthcheck.app[0].baseUrl=http://localhost, healthcheck.app[0].basePath=/test&quot;)\n@TestPropertySource(locations = {&quot;/application-test.properties&quot;})\nclass AppHealthCheckConfigTest {\n\n    @Autowired\n    private AdapterHealthCheckConfig config;\n\n    @Test\n    void healthCheckBeansAreInitialized() {\n//        config.init();\n        System.out.println(config.getApps().get(0));\n\n    }\n}\n</code></pre>\n<p>but this results in: <code>AppHealthCheckProperties(baseUrl=null, basePath=null, name=null)</code></p>\n"},{"tags":["java","environment-variables","redhat","logback","splunk"],"comments":[{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1683794524,"post_id":76120674,"comment_id":134422077,"body_markdown":"VM options aren’t env variables. There’s a separate place for those in IntelliJ. Are you saying you can export it to Splunk from local?","body":"VM options aren’t env variables. There’s a separate place for those in IntelliJ. Are you saying you can export it to Splunk from local?"},{"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"score":0,"creation_date":1683798655,"post_id":76120674,"comment_id":134423039,"body_markdown":"in `logback.xml` both are checked (env variables at the end if I recall, JVM options before). Yes, when I put into configuration in IntelliJ into `VM options` `env` and `hostname` then it&#39;s exported to SPLUNK and I can see it there.","body":"in <code>logback.xml</code> both are checked (env variables at the end if I recall, JVM options before). Yes, when I put into configuration in IntelliJ into <code>VM options</code> <code>env</code> and <code>hostname</code> then it&#39;s exported to SPLUNK and I can see it there."}],"answers":[{"tags":[],"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684830208,"creation_date":1684830208,"answer_id":76312658,"question_id":76120674,"body_markdown":"    &lt;source&gt;${env}&lt;/source&gt;\r\n\r\nis perfectly fine, there was discrepancy between start scripts which I was using.\r\n\r\nTo conclude: \r\nIf you use `${variable}` and in start script you use `-Dvariable = something` then it works.","title":"Can&#39;t read one variable in logback.xml but can read another","body":"<pre><code>&lt;source&gt;${env}&lt;/source&gt;\n</code></pre>\n<p>is perfectly fine, there was discrepancy between start scripts which I was using.</p>\n<p>To conclude:\nIf you use <code>${variable}</code> and in start script you use <code>-Dvariable = something</code> then it works.</p>\n"}],"owner":{"account_id":6383695,"reputation":5206,"user_id":4952262,"accept_rate":71,"display_name":"Michu93"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":111,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76312658,"answer_count":1,"score":0,"last_activity_date":1684830208,"creation_date":1682600027,"question_id":76120674,"body_markdown":"I am trying to read env variable in `logback.xml` file.\r\nI can do:\r\n\r\n    &lt;variable name=&quot;JAVA&quot; value=&quot;${JAVA_HOME}&quot; /&gt;\r\n\r\nand the use it later:\r\n\r\n    &lt;source&gt;MY APP ${JAVA}&lt;/source&gt;\r\nand it works however when I created new variable by `setenv ENV TEST` (it&#39;s Red Hat) and I check if it&#39;s in environment variables by `printenv` then I can see it `ENV=TEST`. When I try to define it in `logback.xml` the same way as `JAVA_HOME` so: `&lt;variable name=&quot;ENVIRONMENT&quot; value=&quot;${ENV}&quot; /&gt;` and use here:\r\n    \r\n\r\n    &lt;source&gt;MY APP ${ENVIRONMENT}&lt;/source&gt;\r\n\r\nthen I can see in SPLUNK: `source = MY APP ENV_IS_UNDEFINED`\r\n\r\nOr is there another way to put `ENVIRONMENT` value somewhere and then read `ENVIRONMENT` in `logback.xml`?\r\n\r\nI found: https://stackoverflow.com/questions/41715211/if-condition-in-logback-print-log-messages-in-two-different-folders but my problem is different\r\n\r\n\r\n@Edit\r\n\r\nEven though I am starting process with:\r\n\r\n    $JAVA_HOME/bin/java \\\r\n        -Duser.timezone=GMT \\\r\n        -Denv=&quot;test&quot; \\\r\n        -Dhost=&quot;127.0.0.1&quot; \\\r\n        ...\r\n\r\nand trying to send it to SPLUNK by `&lt;source&gt;MY APP ${env}&lt;/source&gt;` I can see in SPLNUK UI `source = MY APP env_IS_UNDEFINED`\r\n\r\nWhen I run service locally with: [![VM options][1]][1] then it works locally\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cOJgn.png","title":"Can&#39;t read one variable in logback.xml but can read another","body":"<p>I am trying to read env variable in <code>logback.xml</code> file.\nI can do:</p>\n<pre><code>&lt;variable name=&quot;JAVA&quot; value=&quot;${JAVA_HOME}&quot; /&gt;\n</code></pre>\n<p>and the use it later:</p>\n<pre><code>&lt;source&gt;MY APP ${JAVA}&lt;/source&gt;\n</code></pre>\n<p>and it works however when I created new variable by <code>setenv ENV TEST</code> (it's Red Hat) and I check if it's in environment variables by <code>printenv</code> then I can see it <code>ENV=TEST</code>. When I try to define it in <code>logback.xml</code> the same way as <code>JAVA_HOME</code> so: <code>&lt;variable name=&quot;ENVIRONMENT&quot; value=&quot;${ENV}&quot; /&gt;</code> and use here:</p>\n<pre><code>&lt;source&gt;MY APP ${ENVIRONMENT}&lt;/source&gt;\n</code></pre>\n<p>then I can see in SPLUNK: <code>source = MY APP ENV_IS_UNDEFINED</code></p>\n<p>Or is there another way to put <code>ENVIRONMENT</code> value somewhere and then read <code>ENVIRONMENT</code> in <code>logback.xml</code>?</p>\n<p>I found: <a href=\"https://stackoverflow.com/questions/41715211/if-condition-in-logback-print-log-messages-in-two-different-folders\">if condition in logback - print log messages in two different folders</a> but my problem is different</p>\n<p>@Edit</p>\n<p>Even though I am starting process with:</p>\n<pre><code>$JAVA_HOME/bin/java \\\n    -Duser.timezone=GMT \\\n    -Denv=&quot;test&quot; \\\n    -Dhost=&quot;127.0.0.1&quot; \\\n    ...\n</code></pre>\n<p>and trying to send it to SPLUNK by <code>&lt;source&gt;MY APP ${env}&lt;/source&gt;</code> I can see in SPLNUK UI <code>source = MY APP env_IS_UNDEFINED</code></p>\n<p>When I run service locally with: <a href=\"https://i.stack.imgur.com/cOJgn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cOJgn.png\" alt=\"VM options\" /></a> then it works locally</p>\n"},{"tags":["java","priority-queue","hamming-numbers"],"comments":[{"owner":{"account_id":13949449,"reputation":757,"user_id":10073327,"display_name":"FailingCoder"},"score":0,"creation_date":1570146471,"post_id":58227806,"comment_id":102831173,"body_markdown":"Use the % sign. i.e. n % 2, n % 3, and n % 5","body":"Use the % sign. i.e. n % 2, n % 3, and n % 5"},{"owner":{"account_id":453089,"reputation":70352,"user_id":849891,"accept_rate":100,"display_name":"Will Ness"},"score":0,"creation_date":1684829993,"post_id":58227806,"comment_id":134570437,"body_markdown":"find the pointers at https://stackoverflow.com/questions/tagged/hamming-numbers.","body":"find the pointers at <a href=\"https://stackoverflow.com/questions/tagged/hamming-numbers\">stackoverflow.com/questions/tagged/hamming-numbers</a>."}],"answers":[{"tags":[],"owner":{"account_id":14543637,"reputation":370,"user_id":10504512,"display_name":"LockieR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570158879,"creation_date":1570158879,"answer_id":58229444,"question_id":58227806,"body_markdown":"Not sure why the use of PriorityQueue, but a pretty ugly brute force way to solve the question would be something like this.\r\n```\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.PriorityQueue;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class Driver {\r\n\r\n    public static void main(String[] args) {\r\n        Driver driver = new Driver();\r\n        System.out.println(driver.getRegularNumber(30)\r\n                .toString());\r\n    }\r\n\r\n    public PriorityQueue&lt;Integer&gt; getRegularNumber(int n) {\r\n        PriorityQueue&lt;Integer&gt; regularNumbers = new PriorityQueue&lt;&gt;();\r\n        int count = 0;\r\n        int current = 1;\r\n        List&lt;Integer&gt; pf;\r\n        List&lt;Integer&gt; apf = Arrays.asList(2, 3, 5);\r\n        while (count &lt; n) {\r\n            // Get the prime factors of the current number.\r\n            // If it is a subset of the allowed prime factors then add it to the Queue.\r\n            pf = primeFactors(current);\r\n            if (apf.containsAll(pf)) {\r\n                regularNumbers.add(current);\r\n                count++;\r\n            }\r\n            current++;\r\n        }\r\n        return regularNumbers;\r\n    }\r\n\r\n    public static List&lt;Integer&gt; primeFactors(int n) {\r\n        List&lt;Integer&gt; factors = new ArrayList&lt;&gt;();\r\n        for (int i = 2; i &lt; n; i++) {\r\n            while (n % i == 0) {\r\n                factors.add(i);\r\n                n = n / i;\r\n            }\r\n        }\r\n        if (n &gt; 2) {\r\n            factors.add(n);\r\n        }\r\n\r\n        factors = factors.stream()\r\n                .distinct()\r\n                .collect(Collectors.toList());\r\n        return factors;\r\n    }\r\n}   \r\n```\r\nThis produces ```[1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36, 40, 45, 48, 50, 54, 60, 64, 72, 75, 80]``` as output.","title":"Need help finding nth regular number","body":"<p>Not sure why the use of PriorityQueue, but a pretty ugly brute force way to solve the question would be something like this.</p>\n\n<pre><code>import java.util.Arrays;\nimport java.util.List;\nimport java.util.PriorityQueue;\nimport java.util.stream.Collectors;\n\npublic class Driver {\n\n    public static void main(String[] args) {\n        Driver driver = new Driver();\n        System.out.println(driver.getRegularNumber(30)\n                .toString());\n    }\n\n    public PriorityQueue&lt;Integer&gt; getRegularNumber(int n) {\n        PriorityQueue&lt;Integer&gt; regularNumbers = new PriorityQueue&lt;&gt;();\n        int count = 0;\n        int current = 1;\n        List&lt;Integer&gt; pf;\n        List&lt;Integer&gt; apf = Arrays.asList(2, 3, 5);\n        while (count &lt; n) {\n            // Get the prime factors of the current number.\n            // If it is a subset of the allowed prime factors then add it to the Queue.\n            pf = primeFactors(current);\n            if (apf.containsAll(pf)) {\n                regularNumbers.add(current);\n                count++;\n            }\n            current++;\n        }\n        return regularNumbers;\n    }\n\n    public static List&lt;Integer&gt; primeFactors(int n) {\n        List&lt;Integer&gt; factors = new ArrayList&lt;&gt;();\n        for (int i = 2; i &lt; n; i++) {\n            while (n % i == 0) {\n                factors.add(i);\n                n = n / i;\n            }\n        }\n        if (n &gt; 2) {\n            factors.add(n);\n        }\n\n        factors = factors.stream()\n                .distinct()\n                .collect(Collectors.toList());\n        return factors;\n    }\n}   \n</code></pre>\n\n<p>This produces <code>[1, 2, 3, 4, 5, 6, 8, 9, 10, 12, 15, 16, 18, 20, 24, 25, 27, 30, 32, 36, 40, 45, 48, 50, 54, 60, 64, 72, 75, 80]</code> as output.</p>\n"}],"owner":{"account_id":16821406,"reputation":19,"user_id":12161764,"display_name":"jahnpahl"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":242,"favorite_count":0,"down_vote_count":8,"up_vote_count":2,"answer_count":1,"score":-6,"last_activity_date":1684830092,"creation_date":1570142751,"question_id":58227806,"body_markdown":"Problem:\r\n\r\n&gt; &quot;Babylonians use regular numbers to keep time.\r\n&gt;\r\n&gt; A *&quot;regular number&quot;* in math is defined to be a number that is a factor of some power of 60 (60, 3600, etc). Equivalently we can say that a regular number is one whose ONLY prime divisors are 2, 3 and 5. The first 10 regular numbers are:\r\n&gt;\r\n&gt; 1, 2, 3, 4, 5, 6, 8, 9, 10, 12.\r\n&gt;\r\n&gt; Your task is to find the *n*-th regular number.&quot;\r\n\r\nMy professor asked us to specifically use priority queue to solve this problem, and the largest number we&#39;ll test is no more than *`n = 300`*. I&#39;m clueless.\r\n\r\nedit: I&#39;m obviously not asking for the complete code, I just need pointers to get me started.","title":"Need help finding nth regular number","body":"<p>Problem:</p>\n<blockquote>\n<p>&quot;Babylonians use regular numbers to keep time.</p>\n<p>A <em>&quot;regular number&quot;</em> in math is defined to be a number that is a factor of some power of 60 (60, 3600, etc). Equivalently we can say that a regular number is one whose ONLY prime divisors are 2, 3 and 5. The first 10 regular numbers are:</p>\n<p>1, 2, 3, 4, 5, 6, 8, 9, 10, 12.</p>\n<p>Your task is to find the <em>n</em>-th regular number.&quot;</p>\n</blockquote>\n<p>My professor asked us to specifically use priority queue to solve this problem, and the largest number we'll test is no more than <em><code>n = 300</code></em>. I'm clueless.</p>\n<p>edit: I'm obviously not asking for the complete code, I just need pointers to get me started.</p>\n"},{"tags":["java","spring","prometheus","spring-boot-actuator"],"answers":[{"comments":[{"owner":{"account_id":11433301,"reputation":380,"user_id":8381420,"display_name":"saba"},"score":0,"creation_date":1655202398,"post_id":63578224,"comment_id":128270812,"body_markdown":"mine is already 1.5.4 but keep getting this error. i updated to 1.6.1 it worked!","body":"mine is already 1.5.4 but keep getting this error. i updated to 1.6.1 it worked!"}],"tags":[],"owner":{"account_id":5881849,"reputation":158,"user_id":4630958,"display_name":"flo-ferox"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1598356183,"creation_date":1598356183,"answer_id":63578224,"question_id":63575808,"body_markdown":"I solved my problem by updating `micrometer-registry-prometheus` from 1.5.1 to 1.5.4\r\n\r\nWith this update the error message was more speakable:\r\n```\r\nPrometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named &#39;jvm_gc_pause_seconds&#39; containing tag keys [username, endpoint]. The meter you are attempting to register has keys [username, endpoint, service].\r\n```\r\n\r\nSo I found the problem. I added a common tag to all metrics. After removing the common tag, the error was solved.","title":"Error from promtheus in java (spring acuator)","body":"<p>I solved my problem by updating <code>micrometer-registry-prometheus</code> from 1.5.1 to 1.5.4</p>\n<p>With this update the error message was more speakable:</p>\n<pre><code>Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'jvm_gc_pause_seconds' containing tag keys [username, endpoint]. The meter you are attempting to register has keys [username, endpoint, service].\n</code></pre>\n<p>So I found the problem. I added a common tag to all metrics. After removing the common tag, the error was solved.</p>\n"}],"owner":{"account_id":5881849,"reputation":158,"user_id":4630958,"display_name":"flo-ferox"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2538,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":63578224,"answer_count":1,"score":6,"last_activity_date":1684829513,"creation_date":1598347363,"question_id":63575808,"body_markdown":"I enabled and configured Spring Actuator with Prometheus endpoint in my spring boot application. But I receive an error, that Prometheus requires that all meters with the same name have the same set of tag keys. But unfortunately Spring Actuator won&#39;t do that for `jvm_gc_pause_seconds`.\r\n\r\nI&#39;m using:\r\n```\r\n&lt;parent&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\r\n&lt;/parent&gt;\r\n```\r\nwith\r\n```\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n....\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.5.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.5.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nThis is my error message:\r\n```\r\njava.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named &#39;jvm_gc_pause_seconds&#39;  │\r\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.lambda$applyToCollector$17(PrometheusMeterRegistry.java:429)                                                                       │\r\n│     at java.base/java.util.concurrent.ConcurrentHashMap.compute(Unknown Source)                                                                                                            │\r\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.applyToCollector(PrometheusMeterRegistry.java:413)                                                                                 │\r\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.newTimer(PrometheusMeterRegistry.java:196)                                                                                         │\r\n│     at io.micrometer.core.instrument.MeterRegistry.lambda$timer$2(MeterRegistry.java:308)                                                                                                  │\r\n│     at io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:612)                                                                                                │\r\n│     at io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:566)                                                                                        │\r\n│     at io.micrometer.core.instrument.MeterRegistry.timer(MeterRegistry.java:306)                                                                                                           │\r\n│     at io.micrometer.core.instrument.Timer$Builder.register(Timer.java:539)                                                                                                                │\r\n│     at io.micrometer.core.instrument.binder.jvm.JvmGcMetrics.lambda$bindTo$1(JvmGcMetrics.java:151)                                                                                        │\r\n│     at java.management/sun.management.NotificationEmitterSupport.sendNotification(Unknown Source)                                                                                          │\r\n│     at jdk.management/com.sun.management.internal.GarbageCollectorExtImpl.createGCNotification(Unknown Source)\r\n```\r\n\r\nAny idea?!\r\nI don&#39;t have this error when I remove the Prometheus endpoint configuration (`micrometer-registry-prometheus` dependency).","title":"Error from promtheus in java (spring acuator)","body":"<p>I enabled and configured Spring Actuator with Prometheus endpoint in my spring boot application. But I receive an error, that Prometheus requires that all meters with the same name have the same set of tag keys. But unfortunately Spring Actuator won't do that for <code>jvm_gc_pause_seconds</code>.</p>\n<p>I'm using:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.3.1.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>with</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n....\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-core&lt;/artifactId&gt;\n    &lt;version&gt;1.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n    &lt;version&gt;1.5.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>This is my error message:</p>\n<pre><code>java.lang.IllegalArgumentException: Prometheus requires that all meters with the same name have the same set of tag keys. There is already an existing meter named 'jvm_gc_pause_seconds'  │\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.lambda$applyToCollector$17(PrometheusMeterRegistry.java:429)                                                                       │\n│     at java.base/java.util.concurrent.ConcurrentHashMap.compute(Unknown Source)                                                                                                            │\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.applyToCollector(PrometheusMeterRegistry.java:413)                                                                                 │\n│     at io.micrometer.prometheus.PrometheusMeterRegistry.newTimer(PrometheusMeterRegistry.java:196)                                                                                         │\n│     at io.micrometer.core.instrument.MeterRegistry.lambda$timer$2(MeterRegistry.java:308)                                                                                                  │\n│     at io.micrometer.core.instrument.MeterRegistry.getOrCreateMeter(MeterRegistry.java:612)                                                                                                │\n│     at io.micrometer.core.instrument.MeterRegistry.registerMeterIfNecessary(MeterRegistry.java:566)                                                                                        │\n│     at io.micrometer.core.instrument.MeterRegistry.timer(MeterRegistry.java:306)                                                                                                           │\n│     at io.micrometer.core.instrument.Timer$Builder.register(Timer.java:539)                                                                                                                │\n│     at io.micrometer.core.instrument.binder.jvm.JvmGcMetrics.lambda$bindTo$1(JvmGcMetrics.java:151)                                                                                        │\n│     at java.management/sun.management.NotificationEmitterSupport.sendNotification(Unknown Source)                                                                                          │\n│     at jdk.management/com.sun.management.internal.GarbageCollectorExtImpl.createGCNotification(Unknown Source)\n</code></pre>\n<p>Any idea?!\nI don't have this error when I remove the Prometheus endpoint configuration (<code>micrometer-registry-prometheus</code> dependency).</p>\n"},{"tags":["java","eclipse","selenium-webdriver","automation","selenium-firefoxdriver"],"answers":[{"tags":[],"owner":{"account_id":10299692,"reputation":5744,"user_id":7598774,"accept_rate":75,"display_name":"Shawn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684829508,"creation_date":1684829508,"answer_id":76312565,"question_id":76312266,"body_markdown":"Just get rid of the below line, you don&#39;t need to set property and provide the location of `driver.exe` if you are using Selenium `v4.6.0` or above.\r\n\r\n````\r\nSystem.setProperty(&quot;webdriver.gecko.driver&quot;,\r\n                           &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\r\n````\r\n\r\nReferences: [Introducing Selenium Manager](https://www.selenium.dev/blog/2022/introducing-selenium-manager/)","title":"Unable to launch Firefox browser using Selenium","body":"<p>Just get rid of the below line, you don't need to set property and provide the location of <code>driver.exe</code> if you are using Selenium <code>v4.6.0</code> or above.</p>\n<pre><code>System.setProperty(&quot;webdriver.gecko.driver&quot;,\n                           &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\n</code></pre>\n<p>References: <a href=\"https://www.selenium.dev/blog/2022/introducing-selenium-manager/\" rel=\"nofollow noreferrer\">Introducing Selenium Manager</a></p>\n"}],"owner":{"account_id":4312379,"reputation":1,"user_id":3523137,"display_name":"sandeeppandita"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":449,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684829508,"creation_date":1684827190,"question_id":76312266,"body_markdown":"Unable to launch Firefox browser using Selenium.\r\n\r\n\r\nBelow is the code that I executed:\r\n\r\n\r\n    public class BrowserTest {\r\n\t    public static void main(String[] args) {\r\n\t\t    System.setProperty(&quot;webdriver.gecko.driver&quot;,\r\n                               &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\r\n\t\t    WebDriver driver = new FirefoxDriver();\r\n\t    }\r\n    }\r\n\r\nError that I am getting:\r\n\r\n    Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: Expected browser binary location, but unable to find binary in default location, no &#39;moz:firefoxOptions.binary&#39; capability provided, and no binary flag set on the command line \r\n    Host info: host: &#39;XXXXXXXXX&#39;, ip: &#39;XXX.XXX.XXX.XXX&#39;\r\n    Build info: version: &#39;4.9.1&#39;, revision: &#39;eb2032df7f&#39;\r\n    System info: os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;1.8.0_172&#39;\r\n    Driver info: org.openqa.selenium.firefox.FirefoxDriver\r\n    Command: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {}}]}]\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:136)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:94)\r\n    \tat org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:68)\r\n    \tat org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\r\n    \tat org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\r\n    \tat org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:150)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:146)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:131)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:127)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:112)\r\n    \tat org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:102)\r\n    \tat BrowserTest.main(BrowserTest.java:12)\r\n\r\nMore details:\r\n\r\n - Firefox Version: 113\r\n - Gecko Driver Version: geckodriver-v0.33.0-win32 (https://github.com/mozilla/geckodriver/releases)\r\n - Eclipse Version: 2019-06 (4.12.0)|Build id: 20190614-1200\r\n","title":"Unable to launch Firefox browser using Selenium","body":"<p>Unable to launch Firefox browser using Selenium.</p>\n<p>Below is the code that I executed:</p>\n<pre><code>public class BrowserTest {\n    public static void main(String[] args) {\n        System.setProperty(&quot;webdriver.gecko.driver&quot;,\n                           &quot;D:\\\\Selenium\\\\BrowserJars\\\\geckodriver113.exe&quot;);\n        WebDriver driver = new FirefoxDriver();\n    }\n}\n</code></pre>\n<p>Error that I am getting:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: Expected browser binary location, but unable to find binary in default location, no 'moz:firefoxOptions.binary' capability provided, and no binary flag set on the command line \nHost info: host: 'XXXXXXXXX', ip: 'XXX.XXX.XXX.XXX'\nBuild info: version: '4.9.1', revision: 'eb2032df7f'\nSystem info: os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '1.8.0_172'\nDriver info: org.openqa.selenium.firefox.FirefoxDriver\nCommand: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: firefox, moz:debuggerAddress: true, moz:firefoxOptions: {}}]}]\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:136)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:94)\n    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:68)\n    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:150)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:146)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:131)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:127)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:112)\n    at org.openqa.selenium.firefox.FirefoxDriver.&lt;init&gt;(FirefoxDriver.java:102)\n    at BrowserTest.main(BrowserTest.java:12)\n</code></pre>\n<p>More details:</p>\n<ul>\n<li>Firefox Version: 113</li>\n<li>Gecko Driver Version: geckodriver-v0.33.0-win32 (<a href=\"https://github.com/mozilla/geckodriver/releases\" rel=\"nofollow noreferrer\">https://github.com/mozilla/geckodriver/releases</a>)</li>\n<li>Eclipse Version: 2019-06 (4.12.0)|Build id: 20190614-1200</li>\n</ul>\n"},{"tags":["java","spring","security","spring-boot-actuator"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1557401411,"post_id":56057707,"comment_id":98757295,"body_markdown":"Ordering of rules is important, your `.anyRequest().authenticated()` is before the more specific rule for the actuator. Hence the first one matches and renders your `actuator` maping useless. Switch the order and make sure the ` `.anyRequest().authenticated()` is the last one.","body":"Ordering of rules is important, your <code>.anyRequest().authenticated()</code> is before the more specific rule for the actuator. Hence the first one matches and renders your <code>actuator</code> maping useless. Switch the order and make sure the ` <code>.anyRequest().authenticated()</code> is the last one."},{"owner":{"account_id":3240077,"reputation":2811,"user_id":2733333,"accept_rate":89,"display_name":"Tomas Bisciak"},"score":0,"creation_date":1557401902,"post_id":56057707,"comment_id":98757611,"body_markdown":"God damnit it worked . I have no idea why since i had the admin and actuator endpoint at first totally at the top and the .anyRequest().authenticated() was set afterwards, Now i listened to you and put it into totally last place (that anyRequest().authenticated()) and it works. Please do post it as answer so i can accept it and you get rep :).","body":"God damnit it worked . I have no idea why since i had the admin and actuator endpoint at first totally at the top and the .anyRequest().authenticated() was set afterwards, Now i listened to you and put it into totally last place (that anyRequest().authenticated()) and it works. Please do post it as answer so i can accept it and you get rep :)."}],"answers":[{"comments":[{"owner":{"account_id":149002,"reputation":2739,"user_id":361172,"accept_rate":20,"display_name":"James Selvakumar"},"score":1,"creation_date":1674808581,"post_id":56073706,"comment_id":132796122,"body_markdown":"Hope this is well documented in Spring Security docs. Thank you Tomas for raising this and M.Deinum for answering.","body":"Hope this is well documented in Spring Security docs. Thank you Tomas for raising this and M.Deinum for answering."}],"tags":[],"owner":{"account_id":3240077,"reputation":2811,"user_id":2733333,"accept_rate":89,"display_name":"Tomas Bisciak"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1557477312,"creation_date":1557477312,"answer_id":56073706,"question_id":56057707,"body_markdown":"&gt; This question was answered in the comment, unfortunately commenter\r\n&gt; didnt post answer so i do it. All credit to  M. Deinum.\r\n\r\nCorrect solution is to move \r\n\r\n    .anyRequest().authenticated()\r\n\r\nInto last position of httpsecurity configuration. Ordering in this case matters.","title":"Spring security , Configuration hasAuthority check on endpoints not working","body":"<blockquote>\n  <p>This question was answered in the comment, unfortunately commenter\n  didnt post answer so i do it. All credit to  M. Deinum.</p>\n</blockquote>\n\n<p>Correct solution is to move </p>\n\n<pre><code>.anyRequest().authenticated()\n</code></pre>\n\n<p>Into last position of httpsecurity configuration. Ordering in this case matters.</p>\n"}],"owner":{"account_id":3240077,"reputation":2811,"user_id":2733333,"accept_rate":89,"display_name":"Tomas Bisciak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5321,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":56073706,"answer_count":1,"score":3,"last_activity_date":1684829125,"creation_date":1557398830,"question_id":56057707,"body_markdown":"I have spring actuator and administration endpoint for my web application.\r\n\r\nIn configure of my spring security I have following code :\r\n\r\n     .and()\r\n     .authorizeRequests()\r\n     .antMatchers(&quot;/actuator/**&quot;, &quot;/administration/**&quot;)\r\n     .hasAuthority(Authority.ADMIN.name())\r\nThis does not seem to work, **desired outcome is that only User with a  authority of admin**, can access these endpoints, right now, any authenticated user can do it. I did it with user that has authority of USER and not admin and it works.\r\n\r\nThis is too dangerous for me And i dont want to put password protection in place when this can be managed by Authorities.\r\n\r\n&gt; **So how can i make sure that only users with Authority of ADMIN can access the following endpoints ?**\r\n\r\nI have posted only this small snipped of code , tell me if anything else is required in order for you to be able to help :).\r\n\r\nAnd yes I have debugged this and authorities in my process are set correctly, admin has auth admin and it works for both basic auth and oauth2. Anyone knows what could be happening?\r\n\r\nOnly person that is not logged in at all cant access these endpoints at the moment, Here is my full security config :\r\n\r\n            // @formatter:off\r\n        httpSecurity\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        Utils.MAPPING_INDEX,\r\n                        Utils.MAPPING_ARTICLE,\r\n                        Utils.MAPPING_IMAGE,\r\n                        Utils.MAPPING_ERROR,\r\n                        Utils.MAPPING_VERIFY_MAIL,\r\n                        Utils.MAPPING_REGISTER,\r\n                        Utils.MAPPING_LOGIN,\r\n                        Utils.MAPPING_LOGIN_ERROR,\r\n                        Utils.MAPPING_LOGIN_VERIFIED,\r\n                        Utils.MAPPING_LOGIN_VERIFICATION_ERROR,\r\n                        Utils.MAPPING_RESET_PASSWORD,\r\n                        Utils.MAPPING_LOGIN_PASSWORD_RESET_SUCCESS,\r\n                        Utils.MAPPING_LOGIN_PASSWORD_RESET_LOCKED,\r\n                        Utils.MAPPING_RESET_PASSWORD_RESET_MAIL_SEND,\r\n                        Utils.MAPPING_LOGIN_PASSWORD_RESET_FAILURE,\r\n                        Utils.MAPPING_INDEX_LOGOUT_SUCCESS,\r\n                        Utils.MAPPING_REGISTER_SUCCESS,\r\n                        Utils.MAPPING_REGISTER,\r\n                        Utils.MAPPING_RESET_PASSWORD,\r\n                        Utils.MAPPING_RESET_PASSWORD_NEW_PASSWORD,\r\n                        Utils.MAPPING_AUTHOR,\r\n                        Utils.MAPPING_CONTACT,\r\n                        Utils.MAPPING_CONTACT_SUCCESS,\r\n                        Utils.MAPPING_CONTACT_FAILURE,\r\n                        Utils.MAPPING_REPORT_WORKAROUND,\r\n                        &quot;/test&quot;,\r\n                        &quot;/test1&quot;,\r\n                        &quot;/frag1&quot;,\r\n                        &quot;/frag2&quot;,\r\n                        &quot;/css/**&quot;,\r\n                        &quot;/js/**&quot;,\r\n                        &quot;/img/**&quot;,\r\n                        &quot;/fonts/**&quot;,\r\n                        &quot;/external/**&quot;,\r\n                        &quot;/favicon.ico&quot;,\r\n                        &quot;/favicon_32.ico&quot;,\r\n                        &quot;/favicon.svg&quot;\r\n                ).permitAll()\r\n                .anyRequest().authenticated()\r\n\r\n                .and()\r\n                .authorizeRequests()\r\n                .antMatchers(&quot;/actuator/**&quot;, &quot;/administration/**&quot;)\r\n                .hasAuthority(Authority.ADMIN.name())\r\n\r\n\r\n                .and()\r\n\r\n                .formLogin()\r\n                .loginPage(Utils.MAPPING_LOGIN)\r\n                .loginProcessingUrl(Utils.MAPPING_LOGIN)\r\n                .usernameParameter(&quot;email&quot;)\r\n                .passwordParameter(&quot;password&quot;)\r\n                .successHandler(basicAuthenticationSuccessHandlerImpl)\r\n                .failureUrl(Utils.MAPPING_LOGIN_ERROR)\r\n\r\n                .and()\r\n\r\n                .logout()\r\n                .logoutUrl(Utils.MAPPING_INDEX)\r\n                .logoutSuccessUrl(Utils.MAPPING_INDEX_LOGOUT_SUCCESS)\r\n                .invalidateHttpSession(true)\r\n\r\n                .and()\r\n\r\n                .oauth2Login()\r\n                .loginPage(Utils.MAPPING_LOGIN)\r\n                .successHandler(oauth2AuthenticationSuccessHandler);\r\n\r\n        // @formatter:on\r\n    }\r\n\r\n\r\n","title":"Spring security , Configuration hasAuthority check on endpoints not working","body":"<p>I have spring actuator and administration endpoint for my web application.</p>\n\n<p>In configure of my spring security I have following code :</p>\n\n<pre><code> .and()\n .authorizeRequests()\n .antMatchers(\"/actuator/**\", \"/administration/**\")\n .hasAuthority(Authority.ADMIN.name())\n</code></pre>\n\n<p>This does not seem to work, <strong>desired outcome is that only User with a  authority of admin</strong>, can access these endpoints, right now, any authenticated user can do it. I did it with user that has authority of USER and not admin and it works.</p>\n\n<p>This is too dangerous for me And i dont want to put password protection in place when this can be managed by Authorities.</p>\n\n<blockquote>\n  <p><strong>So how can i make sure that only users with Authority of ADMIN can access the following endpoints ?</strong></p>\n</blockquote>\n\n<p>I have posted only this small snipped of code , tell me if anything else is required in order for you to be able to help :).</p>\n\n<p>And yes I have debugged this and authorities in my process are set correctly, admin has auth admin and it works for both basic auth and oauth2. Anyone knows what could be happening?</p>\n\n<p>Only person that is not logged in at all cant access these endpoints at the moment, Here is my full security config :</p>\n\n<pre><code>        // @formatter:off\n    httpSecurity\n            .authorizeRequests()\n            .antMatchers(\n                    Utils.MAPPING_INDEX,\n                    Utils.MAPPING_ARTICLE,\n                    Utils.MAPPING_IMAGE,\n                    Utils.MAPPING_ERROR,\n                    Utils.MAPPING_VERIFY_MAIL,\n                    Utils.MAPPING_REGISTER,\n                    Utils.MAPPING_LOGIN,\n                    Utils.MAPPING_LOGIN_ERROR,\n                    Utils.MAPPING_LOGIN_VERIFIED,\n                    Utils.MAPPING_LOGIN_VERIFICATION_ERROR,\n                    Utils.MAPPING_RESET_PASSWORD,\n                    Utils.MAPPING_LOGIN_PASSWORD_RESET_SUCCESS,\n                    Utils.MAPPING_LOGIN_PASSWORD_RESET_LOCKED,\n                    Utils.MAPPING_RESET_PASSWORD_RESET_MAIL_SEND,\n                    Utils.MAPPING_LOGIN_PASSWORD_RESET_FAILURE,\n                    Utils.MAPPING_INDEX_LOGOUT_SUCCESS,\n                    Utils.MAPPING_REGISTER_SUCCESS,\n                    Utils.MAPPING_REGISTER,\n                    Utils.MAPPING_RESET_PASSWORD,\n                    Utils.MAPPING_RESET_PASSWORD_NEW_PASSWORD,\n                    Utils.MAPPING_AUTHOR,\n                    Utils.MAPPING_CONTACT,\n                    Utils.MAPPING_CONTACT_SUCCESS,\n                    Utils.MAPPING_CONTACT_FAILURE,\n                    Utils.MAPPING_REPORT_WORKAROUND,\n                    \"/test\",\n                    \"/test1\",\n                    \"/frag1\",\n                    \"/frag2\",\n                    \"/css/**\",\n                    \"/js/**\",\n                    \"/img/**\",\n                    \"/fonts/**\",\n                    \"/external/**\",\n                    \"/favicon.ico\",\n                    \"/favicon_32.ico\",\n                    \"/favicon.svg\"\n            ).permitAll()\n            .anyRequest().authenticated()\n\n            .and()\n            .authorizeRequests()\n            .antMatchers(\"/actuator/**\", \"/administration/**\")\n            .hasAuthority(Authority.ADMIN.name())\n\n\n            .and()\n\n            .formLogin()\n            .loginPage(Utils.MAPPING_LOGIN)\n            .loginProcessingUrl(Utils.MAPPING_LOGIN)\n            .usernameParameter(\"email\")\n            .passwordParameter(\"password\")\n            .successHandler(basicAuthenticationSuccessHandlerImpl)\n            .failureUrl(Utils.MAPPING_LOGIN_ERROR)\n\n            .and()\n\n            .logout()\n            .logoutUrl(Utils.MAPPING_INDEX)\n            .logoutSuccessUrl(Utils.MAPPING_INDEX_LOGOUT_SUCCESS)\n            .invalidateHttpSession(true)\n\n            .and()\n\n            .oauth2Login()\n            .loginPage(Utils.MAPPING_LOGIN)\n            .successHandler(oauth2AuthenticationSuccessHandler);\n\n    // @formatter:on\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3540948,"reputation":5877,"user_id":2958086,"display_name":"Compass"},"score":0,"creation_date":1529074943,"post_id":50877746,"comment_id":88758414,"body_markdown":"Sanity check: component scan on?","body":"Sanity check: component scan on?"},{"owner":{"account_id":1425986,"reputation":3033,"user_id":2306595,"display_name":"Innokenty"},"score":0,"creation_date":1529075559,"post_id":50877746,"comment_id":88758751,"body_markdown":"Yeah, checked it. See the answer by me below. I&#39;m actually just stupid.","body":"Yeah, checked it. See the answer by me below. I&#39;m actually just stupid."}],"answers":[{"tags":[],"owner":{"account_id":1425986,"reputation":3033,"user_id":2306595,"display_name":"Innokenty"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1529076412,"creation_date":1529075184,"answer_id":50878256,"question_id":50877746,"body_markdown":"After posting the question I found the answer almost immediately. It was a combination of typos in the config and the fact that it&#39;s actually **not exposed by default**. Despite [the official post saying][1]: \r\n\r\n&gt; To configure an endpoint, all that’s required really is to expose it as a @Bean\r\n\r\nThese are the proper ways to define the property:\r\n\r\n    management.endpoints.web.exposure.include=*\r\n    management.endpoints.web.exposure.include=&#39;health,info,metrics,hello&#39;\r\n\r\nOr as a YAML:\r\n\r\n    management:\r\n      endpoints:\r\n        web:\r\n          exposure:\r\n            include: &#39;health,info,metrics,hello&#39;\r\n\r\nHere is the official reference: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints\r\n\r\nInteresting, that you can&#39;t use underscores in endpoint names anymore. At least without additional changes.\r\n\r\n  [1]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#configuration","title":"Spring Boot 2.0 Not Registering Custom Actuator Endpoint Bean","body":"<p>After posting the question I found the answer almost immediately. It was a combination of typos in the config and the fact that it's actually <strong>not exposed by default</strong>. Despite <a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#configuration\" rel=\"noreferrer\">the official post saying</a>: </p>\n\n<blockquote>\n  <p>To configure an endpoint, all that’s required really is to expose it as a @Bean</p>\n</blockquote>\n\n<p>These are the proper ways to define the property:</p>\n\n<pre><code>management.endpoints.web.exposure.include=*\nmanagement.endpoints.web.exposure.include='health,info,metrics,hello'\n</code></pre>\n\n<p>Or as a YAML:</p>\n\n<pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: 'health,info,metrics,hello'\n</code></pre>\n\n<p>Here is the official reference: <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-exposing-endpoints</a></p>\n\n<p>Interesting, that you can't use underscores in endpoint names anymore. At least without additional changes.</p>\n"}],"owner":{"account_id":1425986,"reputation":3033,"user_id":2306595,"display_name":"Innokenty"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5439,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"closed_date":1529329032,"accepted_answer_id":50878256,"answer_count":1,"score":3,"last_activity_date":1684829048,"creation_date":1529073436,"question_id":50877746,"body_markdown":"I&#39;m trying to add a custom actuator endpoint in Spring Boot 2.0.2.RELEASE application.\r\nI&#39;m following [the official guidelines][1], [the official migration guide][2] and also [this post][3].\r\n\r\nI am able to configure everything via properties: hide/expose endpoints, change base path etc. Everything works, except my custom endpoint bean is not picked up by `WebMvcEndpointHandlerMapping`. It simply doesn&#39;t show up in these famous logging lines:\r\n\r\n    EndpointLinksResolver        : Exposing 2 endpoint(s) beneath base path &#39;/actuator&#39;\r\n    WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator/health],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\r\n    WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator/info],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\r\n    WebMvcEndpointHandlerMapping : Mapped &quot;{[/actuator],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}&quot; onto protected java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.String, org.springframework.boot.actuate.endpoint.web.Link&gt;&gt; org.springframework.boot.actuate.endpoint.web.servlet.WebMvcEndpointHandlerMapping.links(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\r\n\r\nThese three lines is all I get. I can access `/actuator/health` and `/actuator/info` without any trouble, but not my custom endpoint. I get 404 obviously.\r\n\r\nWhat I tried so far:\r\n\r\n - Checked that my endpoint class is registered in the context as a bean.\r\n - Exposed it explicitly via yaml configuration.\r\n - Exposed everything via `management.endpoints.web.exposure.include=*`\r\n - Removed all the management configuration completely, because it should be actually available by default.\r\n - Triple checked the endpoint id.\r\n - Renamed the endpoint id.\r\n\r\nAny ideas of what I can at least look into? All the questions I found so far end up in person not realizing they need `@Component` annotation too.\r\n\r\nAh, here is my class by the way:\r\n\r\n    @Component\r\n    @Endpoint(id = &quot;hello&quot;)\r\n    public class HelloEndpoint {\r\n\r\n        @ReadOperation\r\n        public String sayHello() {\r\n            return &quot;Hello!&quot;;\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\r\n  [2]: https://github.com/spring-projects/spring-boot/wiki/Migrating-a-custom-Actuator-endpoint-to-Spring-Boot-2\r\n  [3]: http://www.baeldung.com/spring-boot-actuators","title":"Spring Boot 2.0 Not Registering Custom Actuator Endpoint Bean","body":"<p>I'm trying to add a custom actuator endpoint in Spring Boot 2.0.2.RELEASE application.\nI'm following <a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\" rel=\"nofollow noreferrer\">the official guidelines</a>, <a href=\"https://github.com/spring-projects/spring-boot/wiki/Migrating-a-custom-Actuator-endpoint-to-Spring-Boot-2\" rel=\"nofollow noreferrer\">the official migration guide</a> and also <a href=\"http://www.baeldung.com/spring-boot-actuators\" rel=\"nofollow noreferrer\">this post</a>.</p>\n\n<p>I am able to configure everything via properties: hide/expose endpoints, change base path etc. Everything works, except my custom endpoint bean is not picked up by <code>WebMvcEndpointHandlerMapping</code>. It simply doesn't show up in these famous logging lines:</p>\n\n<pre><code>EndpointLinksResolver        : Exposing 2 endpoint(s) beneath base path '/actuator'\nWebMvcEndpointHandlerMapping : Mapped \"{[/actuator/health],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\nWebMvcEndpointHandlerMapping : Mapped \"{[/actuator/info],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}\" onto public java.lang.Object org.springframework.boot.actuate.endpoint.web.servlet.AbstractWebMvcEndpointHandlerMapping$OperationHandler.handle(javax.servlet.http.HttpServletRequest,java.util.Map&lt;java.lang.String, java.lang.String&gt;)\nWebMvcEndpointHandlerMapping : Mapped \"{[/actuator],methods=[GET],produces=[application/vnd.spring-boot.actuator.v2+json || application/json]}\" onto protected java.util.Map&lt;java.lang.String, java.util.Map&lt;java.lang.String, org.springframework.boot.actuate.endpoint.web.Link&gt;&gt; org.springframework.boot.actuate.endpoint.web.servlet.WebMvcEndpointHandlerMapping.links(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)\n</code></pre>\n\n<p>These three lines is all I get. I can access <code>/actuator/health</code> and <code>/actuator/info</code> without any trouble, but not my custom endpoint. I get 404 obviously.</p>\n\n<p>What I tried so far:</p>\n\n<ul>\n<li>Checked that my endpoint class is registered in the context as a bean.</li>\n<li>Exposed it explicitly via yaml configuration.</li>\n<li>Exposed everything via <code>management.endpoints.web.exposure.include=*</code></li>\n<li>Removed all the management configuration completely, because it should be actually available by default.</li>\n<li>Triple checked the endpoint id.</li>\n<li>Renamed the endpoint id.</li>\n</ul>\n\n<p>Any ideas of what I can at least look into? All the questions I found so far end up in person not realizing they need <code>@Component</code> annotation too.</p>\n\n<p>Ah, here is my class by the way:</p>\n\n<pre><code>@Component\n@Endpoint(id = \"hello\")\npublic class HelloEndpoint {\n\n    @ReadOperation\n    public String sayHello() {\n        return \"Hello!\";\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"answers":[{"comments":[{"owner":{"account_id":8866557,"reputation":331,"user_id":6621555,"display_name":"Gene Knight"},"score":0,"creation_date":1521559959,"post_id":49388154,"comment_id":85778019,"body_markdown":"Alas, adding &quot;/aname&quot;, &quot;?name=aname&quot; to the URL, or removing the @Selector reference entirely had no effect.","body":"Alas, adding &quot;/aname&quot;, &quot;?name=aname&quot; to the URL, or removing the @Selector reference entirely had no effect."},{"owner":{"account_id":4497262,"reputation":961,"user_id":3656774,"display_name":"Martin van Wingerden"},"score":1,"creation_date":1521562312,"post_id":49388154,"comment_id":85779706,"body_markdown":"I updated to answer your updated question with a reference to the documentation where it is stated that is should be a bean.","body":"I updated to answer your updated question with a reference to the documentation where it is stated that is should be a bean."}],"tags":[],"owner":{"account_id":4497262,"reputation":961,"user_id":3656774,"display_name":"Martin van Wingerden"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521561811,"creation_date":1521559498,"answer_id":49388154,"question_id":49387867,"body_markdown":"The initial partly problem was that the code did not add an endpoint with no &quot;selector&quot;\r\n\r\n[Source][1]\r\n\r\n    @Endpoint(id = &quot;loggers&quot;)\r\n    @Component\r\n    public class LoggersEndpoint {\r\n    \r\n        @ReadOperation\r\n        public Map&lt;String, Object&gt; loggers() { ... }\r\n    \r\n        @ReadOperation\r\n        public LoggerLevels loggerLevels(@Selector String name) { ... }\r\n    \r\n        @WriteOperation\r\n        public void configureLogLevel(@Selector String name, LogLevel configuredLevel) { ... }\r\n    \r\n    }\r\n\r\n&gt; This endpoint exposes three operations:\r\n&gt; \r\n&gt; GET on /application/loggers: the configuration of all loggers (as it\r\n&gt; has no &quot;selector&quot; parameter):\r\n&gt; \r\n&gt; GET on /application/loggers/{name}: the configuration of a named\r\n&gt; logger (using the name @Selector).\r\n&gt; \r\n&gt; ...\r\n\r\nThe edited question led to the conclusion [that it should be a bean][2] \r\n\r\n&gt; If you add a @Bean annotated with @Endpoint, any methods annotated\r\n&gt; with @ReadOperation, @WriteOperation, or @DeleteOperation are\r\n&gt; automatically exposed over JMX and, in a web application, over HTTP as\r\n&gt; well. Endpoints can be exposed over HTTP using Jersey, Spring MVC, or\r\n&gt; Spring WebFlux.\r\n\r\nOr see [comments in the announcement of the feature][3]\r\n\r\n\r\n  [1]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-custom\r\n  [3]: https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#comment-3481606304","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>The initial partly problem was that the code did not add an endpoint with no \"selector\"</p>\n\n<p><a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0\" rel=\"nofollow noreferrer\">Source</a></p>\n\n<pre><code>@Endpoint(id = \"loggers\")\n@Component\npublic class LoggersEndpoint {\n\n    @ReadOperation\n    public Map&lt;String, Object&gt; loggers() { ... }\n\n    @ReadOperation\n    public LoggerLevels loggerLevels(@Selector String name) { ... }\n\n    @WriteOperation\n    public void configureLogLevel(@Selector String name, LogLevel configuredLevel) { ... }\n\n}\n</code></pre>\n\n<blockquote>\n  <p>This endpoint exposes three operations:</p>\n  \n  <p>GET on /application/loggers: the configuration of all loggers (as it\n  has no \"selector\" parameter):</p>\n  \n  <p>GET on /application/loggers/{name}: the configuration of a named\n  logger (using the name @Selector).</p>\n  \n  <p>...</p>\n</blockquote>\n\n<p>The edited question led to the conclusion <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#production-ready-endpoints-custom\" rel=\"nofollow noreferrer\">that it should be a bean</a> </p>\n\n<blockquote>\n  <p>If you add a @Bean annotated with @Endpoint, any methods annotated\n  with @ReadOperation, @WriteOperation, or @DeleteOperation are\n  automatically exposed over JMX and, in a web application, over HTTP as\n  well. Endpoints can be exposed over HTTP using Jersey, Spring MVC, or\n  Spring WebFlux.</p>\n</blockquote>\n\n<p>Or see <a href=\"https://spring.io/blog/2017/08/22/introducing-actuator-endpoints-in-spring-boot-2-0#comment-3481606304\" rel=\"nofollow noreferrer\">comments in the announcement of the feature</a></p>\n"},{"tags":[],"owner":{"account_id":8866557,"reputation":331,"user_id":6621555,"display_name":"Gene Knight"},"comment_count":0,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1521560814,"creation_date":1521560814,"answer_id":49388589,"question_id":49387867,"body_markdown":"OK, solved:\r\n\r\n\t\t@Endpoint(id=&quot;mypoint&quot;)\r\n\t\t@Component\r\n\t\tpublic class myPointEndPoint {\r\n\t\t\t@ReadOperation\r\n\t\t\tpublic String mypoint(){\r\n\t\t\t\treturn &quot;Hello&quot; ;\r\n\t\t\t}\r\n\t\t}\r\n\r\nWhat was missing was the &quot;@Component&quot; annotation. But, where is this in the docs?","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>OK, solved:</p>\n\n<pre><code>    @Endpoint(id=\"mypoint\")\n    @Component\n    public class myPointEndPoint {\n        @ReadOperation\n        public String mypoint(){\n            return \"Hello\" ;\n        }\n    }\n</code></pre>\n\n<p>What was missing was the \"@Component\" annotation. But, where is this in the docs?</p>\n"},{"tags":[],"owner":{"account_id":305881,"reputation":5257,"user_id":616290,"accept_rate":57,"display_name":"Dmytro Boichenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1531294599,"creation_date":1531237544,"answer_id":51269469,"question_id":49387867,"body_markdown":"Maybe this will help somebody.\r\n\r\nLooks like `@ReadOperation` doesn&#39;t support return type `Void`. You should return at least an empty string on your `invoke` method. \r\n\r\nspring-boot 2.0.3.RELEASE\r\n\r\n\r\n    @Component\r\n    @Endpoint(id = &quot;heartbeat&quot;)\r\n    public class HeartbeatEndpoint {\r\n\r\n        @ReadOperation\r\n        public String invoke() {\r\n            return &quot;&quot;;\r\n        }\r\n    }\r\n","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>Maybe this will help somebody.</p>\n\n<p>Looks like <code>@ReadOperation</code> doesn't support return type <code>Void</code>. You should return at least an empty string on your <code>invoke</code> method. </p>\n\n<p>spring-boot 2.0.3.RELEASE</p>\n\n<pre><code>@Component\n@Endpoint(id = \"heartbeat\")\npublic class HeartbeatEndpoint {\n\n    @ReadOperation\n    public String invoke() {\n        return \"\";\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":8866557,"reputation":331,"user_id":6621555,"display_name":"Gene Knight"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10060,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":3,"score":5,"last_activity_date":1684828976,"creation_date":1521558729,"question_id":49387867,"body_markdown":"Spring Noob: OK. I start with a STS Spring Starter Project / Maven / Java 8 / Spring Boot 2.0, and select the Web and Actuator dependencies. It builds and runs fine, and reponds to http://localhost:8080/actuator/health. I add an &quot;Endpoint&quot; to the main application class, so that it looks like this.\r\n\r\n\tpackage com.thumbsup;\r\n\t\r\n\timport org.springframework.boot.SpringApplication;\r\n\timport org.springframework.boot.actuate.endpoint.annotation.Endpoint;\r\n\timport org.springframework.boot.actuate.endpoint.annotation.ReadOperation;\r\n\timport org.springframework.boot.actuate.endpoint.annotation.Selector;\r\n\timport org.springframework.boot.autoconfigure.SpringBootApplication;\r\n\t\r\n\t@SpringBootApplication\r\n\tpublic class YourStash11Application {\r\n\t\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tSpringApplication.run(YourStash11Application.class, args);\r\n\t\t}\r\n\t\t\r\n\t\t@Endpoint(id=&quot;mypoint&quot;)\r\n\t\tpublic class CustomPoint {\r\n\t\t\t@ReadOperation\r\n\t\t\tpublic String getHello(){\r\n\t\t\t\treturn &quot;Hello&quot; ;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t}\r\n\r\nI try to enable everything in application.properties:\r\n\r\n\tmanagement.endpoints.enabled-by-default=true\r\n\tmanagement.endpoint.conditions.enabled=true\r\n\tmanagement.endpoint.mypoint.enabled=true\r\n\tmanagement.endpoints.web.exposure.include=*\r\n\r\nBut when it builds, there&#39;s no reference to mapping /actuator/mypoint, and  \r\nhttp://localhost:8080/actuator/mypoint and  \r\nhttp://localhost:8080/application/mypoint  \r\nboth return 404 errors.\r\n\r\nWhat am I missing? Thanks!\r\n","title":"Spring Boot 2 Custom Actuator Endpoints","body":"<p>Spring Noob: OK. I start with a STS Spring Starter Project / Maven / Java 8 / Spring Boot 2.0, and select the Web and Actuator dependencies. It builds and runs fine, and reponds to <a href=\"http://localhost:8080/actuator/health\" rel=\"noreferrer\">http://localhost:8080/actuator/health</a>. I add an \"Endpoint\" to the main application class, so that it looks like this.</p>\n\n<pre><code>package com.thumbsup;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.actuate.endpoint.annotation.Endpoint;\nimport org.springframework.boot.actuate.endpoint.annotation.ReadOperation;\nimport org.springframework.boot.actuate.endpoint.annotation.Selector;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class YourStash11Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(YourStash11Application.class, args);\n    }\n\n    @Endpoint(id=\"mypoint\")\n    public class CustomPoint {\n        @ReadOperation\n        public String getHello(){\n            return \"Hello\" ;\n        }\n    }\n\n}\n</code></pre>\n\n<p>I try to enable everything in application.properties:</p>\n\n<pre><code>management.endpoints.enabled-by-default=true\nmanagement.endpoint.conditions.enabled=true\nmanagement.endpoint.mypoint.enabled=true\nmanagement.endpoints.web.exposure.include=*\n</code></pre>\n\n<p>But when it builds, there's no reference to mapping /actuator/mypoint, and<br>\n<a href=\"http://localhost:8080/actuator/mypoint\" rel=\"noreferrer\">http://localhost:8080/actuator/mypoint</a> and<br>\n<a href=\"http://localhost:8080/application/mypoint\" rel=\"noreferrer\">http://localhost:8080/application/mypoint</a><br>\nboth return 404 errors.</p>\n\n<p>What am I missing? Thanks!</p>\n"},{"tags":["java","spring","spring-boot-actuator"],"comments":[{"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":0,"creation_date":1520507859,"post_id":49169614,"comment_id":85348490,"body_markdown":"Auto configured health indicators check the database, jmx etc. https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html","body":"Auto configured health indicators check the database, jmx etc. <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html\" rel=\"nofollow noreferrer\">docs.spring.io/spring-boot/docs/current/reference/html/&hellip;</a>"},{"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"score":0,"creation_date":1520509062,"post_id":49169614,"comment_id":85349206,"body_markdown":"So you cannot know when the application context has been fully initialized?","body":"So you cannot know when the application context has been fully initialized?"},{"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":0,"creation_date":1520509860,"post_id":49169614,"comment_id":85349666,"body_markdown":"it is mainly for endpoints and databases. If you want to check for application context initialization, you can write the listener to check that.","body":"it is mainly for endpoints and databases. If you want to check for application context initialization, you can write the listener to check that."},{"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"score":0,"creation_date":1520601550,"post_id":49169614,"comment_id":85394043,"body_markdown":"ok, thanks! there is a &quot;status&quot; attribut on the top level, though. This must be application wide - and I am wondering what it tells us?\n\n{\n  &quot;status&quot; : &quot;UP&quot;,\n.....","body":"ok, thanks! there is a &quot;status&quot; attribut on the top level, though. This must be application wide - and I am wondering what it tells us?  {   &quot;status&quot; : &quot;UP&quot;, ....."}],"answers":[{"comments":[{"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"score":0,"creation_date":1520608855,"post_id":49195646,"comment_id":85398610,"body_markdown":"Thanks! Please allow to ask what the top-level &quot;status:UP&quot; is for? Is it an aggregated status of all resources maybe? I could not find any documentation on this. Well, I will actually test if that&#39;s the case.","body":"Thanks! Please allow to ask what the top-level &quot;status:UP&quot; is for? Is it an aggregated status of all resources maybe? I could not find any documentation on this. Well, I will actually test if that&#39;s the case."},{"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":1,"creation_date":1520608967,"post_id":49195646,"comment_id":85398671,"body_markdown":"Yes, it is the aggregated result.","body":"Yes, it is the aggregated result."},{"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"score":0,"creation_date":1520610078,"post_id":49195646,"comment_id":85399388,"body_markdown":"Thanks - very helpful! Still unsure how a Spring actuator can report things before the Spring application context is running. The application context should not be considered a resource itself probably. I was going to add a health indicator to my RestController, but since it is just a Spring bean, it can only be UP as long as the Spring application is running. Should one add a health check for a Spring bean after all?","body":"Thanks - very helpful! Still unsure how a Spring actuator can report things before the Spring application context is running. The application context should not be considered a resource itself probably. I was going to add a health indicator to my RestController, but since it is just a Spring bean, it can only be UP as long as the Spring application is running. Should one add a health check for a Spring bean after all?"},{"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"score":1,"creation_date":1520610265,"post_id":49195646,"comment_id":85399508,"body_markdown":"Yes, I thought about it. In that case, actuator should run separately. You can use the properties to configure the server. management.server.port: 8080\nmanagement.server.address: localhost","body":"Yes, I thought about it. In that case, actuator should run separately. You can use the properties to configure the server. management.server.port: 8080 management.server.address: localhost"}],"tags":[],"owner":{"account_id":8447748,"reputation":38031,"user_id":6337748,"accept_rate":38,"display_name":"notionquest"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1520604744,"creation_date":1520604744,"answer_id":49195646,"question_id":49169614,"body_markdown":"In order to test whether the application context is loaded, you can perform this custom implementation.\r\n\r\n`@EventListener` - The method annotated with EventListener is triggered when the context is initialized.\r\n\r\nIn the below code, I have incremented the counter on successful initialization. When you hit the actuator health endpoint, you will get the status as UP.\r\n\r\n**Sample implementation for context initialization health check:-**\r\n\r\n    @Component\r\n    public class ApplicationContextHealthIndicator implements HealthIndicator {\r\n    \r\n        private final Logger LOG = Logger.getLogger(getClass().getName());\r\n    \r\n        public static int counter;\r\n    \r\n        @EventListener\r\n        public void onApplicationEvent(ContextRefreshedEvent event) {\r\n            LOG.info(&quot;Increment counter :&quot; + counter);\r\n            counter++;\r\n        }\r\n    \r\n        @Override\r\n        public Health health() {\r\n            if (counter == 0) {\r\n                return Health.down().withDetail(&quot;Error Code&quot;, 500).build();\r\n            }\r\n            return Health.up().build();\r\n        }\r\n    }\r\n\r\n**Endpoint Spring boot version 5:-**\r\n\r\n&gt; http://localhost:8080/actuator/health\r\n\r\nSpring actuator can check the database, web service endpoints, email server etc. It can provide the status for all these resources which are part of the application.\r\n\r\n[Some default health indicators available][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#_auto_configured_healthindicators","title":"Spring Boot&#39;s health actuator - WHEN is it UP?","body":"<p>In order to test whether the application context is loaded, you can perform this custom implementation.</p>\n\n<p><code>@EventListener</code> - The method annotated with EventListener is triggered when the context is initialized.</p>\n\n<p>In the below code, I have incremented the counter on successful initialization. When you hit the actuator health endpoint, you will get the status as UP.</p>\n\n<p><strong>Sample implementation for context initialization health check:-</strong></p>\n\n<pre><code>@Component\npublic class ApplicationContextHealthIndicator implements HealthIndicator {\n\n    private final Logger LOG = Logger.getLogger(getClass().getName());\n\n    public static int counter;\n\n    @EventListener\n    public void onApplicationEvent(ContextRefreshedEvent event) {\n        LOG.info(\"Increment counter :\" + counter);\n        counter++;\n    }\n\n    @Override\n    public Health health() {\n        if (counter == 0) {\n            return Health.down().withDetail(\"Error Code\", 500).build();\n        }\n        return Health.up().build();\n    }\n}\n</code></pre>\n\n<p><strong>Endpoint Spring boot version 5:-</strong></p>\n\n<blockquote>\n  <p><a href=\"http://localhost:8080/actuator/health\" rel=\"nofollow noreferrer\">http://localhost:8080/actuator/health</a></p>\n</blockquote>\n\n<p>Spring actuator can check the database, web service endpoints, email server etc. It can provide the status for all these resources which are part of the application.</p>\n\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/production-ready-endpoints.html#_auto_configured_healthindicators\" rel=\"nofollow noreferrer\">Some default health indicators available</a></p>\n"}],"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6012,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1684828788,"creation_date":1520501314,"question_id":49169614,"body_markdown":"I cannot find any documentation on when Springs Health Actuator will return the UP status. Can you rely on all *`@Components`* being initialized? Will a *`@Controller`* be ready to serve requests?","title":"Spring Boot&#39;s health actuator - WHEN is it UP?","body":"<p>I cannot find any documentation on when Springs Health Actuator will return the UP status. Can you rely on all <em><code>@Components</code></em> being initialized? Will a <em><code>@Controller</code></em> be ready to serve requests?</p>\n"},{"tags":["java","mysql","spring-boot","docker","container-image"],"comments":[{"owner":{"account_id":2032415,"reputation":1277,"user_id":1815716,"accept_rate":38,"display_name":"prasad"},"score":0,"creation_date":1684822460,"post_id":76311639,"comment_id":134568856,"body_markdown":"can you please provide complete stacktrace looking some permissions issue","body":"can you please provide complete stacktrace looking some permissions issue"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1684825191,"post_id":76311639,"comment_id":134569365,"body_markdown":"Your jdbc url is for a docker service not for running locally. So it probably fails to connect to the database.","body":"Your jdbc url is for a docker service not for running locally. So it probably fails to connect to the database."}],"answers":[{"tags":[],"owner":{"account_id":28177079,"reputation":118,"user_id":21534708,"display_name":"Farfetch&#39;d"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684828752,"creation_date":1684828752,"answer_id":76312471,"question_id":76311639,"body_markdown":"like M. Deinum suggest it you problably got this error due of a wrong jdbc url inside your application.properties. To solve that add mysql in your container (by adding an image of mysql inside your Dockerfile) or create an another container with mysql (with this second solution you have to modify jdbc url)\r\n","title":"Getting spring boot build error when trying to create jar file using docker container configurations in application.properties","body":"<p>like M. Deinum suggest it you problably got this error due of a wrong jdbc url inside your application.properties. To solve that add mysql in your container (by adding an image of mysql inside your Dockerfile) or create an another container with mysql (with this second solution you have to modify jdbc url)</p>\n"}],"owner":{"account_id":28386002,"reputation":13,"user_id":21712461,"display_name":"Dhruv Singhal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":147,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76312471,"answer_count":1,"score":1,"last_activity_date":1684828752,"creation_date":1684821324,"question_id":76311639,"body_markdown":"Spring boot build failure when using docker configurations of mysql databases\r\n\r\n**Application.properties**\r\n\r\n    `spring.datasource.url=jdbc:mysql://mysqldb:3306/employeedb?useSSL=false\r\n     spring.datasource.username=sa\r\n     spring.datasource.password=1234\r\n     spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\r\n     spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\r\n     spring.jpa.hibernate.ddl-auto=update\r\n     spring.jpa.show-sql=true`\r\n\r\n**Dockerfile**\r\n\r\n\r\n    `FROM openjdk:8\r\n     ADD target/demo-0.0.1-SNAPSHOT.jar demo-0.0.1-SNAPSHOT.jar\r\n     EXPOSE 8080\r\n     ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;demo-0.0.1-SNAPSHOT.jar&quot;]`\r\n\r\n\r\nI am very new to docker and I am trying to dockerize my spring boot application which is using Mysql database, I have been following a tutorial, but when i am running mvn clean install to build the jar file, it is giving this error\r\n\r\n\r\n  **Error**\r\n    \r\n                 \r\n    ```Error starting ApplicationContext. To display the conditions \r\n     report re-run your application with &#39;debug&#39; enabled.\r\n     2023-05-22 16:33:55.304 ERROR 6245 --- [           main] \r\n     o.s.boot.SpringApplication               : Application run \r\n     failed\r\n\r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.26.jar:5.3.26]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.26.jar:5.3.26]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.26.jar:5.3.26]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.26.jar:5.3.26]\r\n","title":"Getting spring boot build error when trying to create jar file using docker container configurations in application.properties","body":"<p>Spring boot build failure when using docker configurations of mysql databases</p>\n<p><strong>Application.properties</strong></p>\n<pre><code>`spring.datasource.url=jdbc:mysql://mysqldb:3306/employeedb?useSSL=false\n spring.datasource.username=sa\n spring.datasource.password=1234\n spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL5InnoDBDialect\n spring.jpa.hibernate.ddl-auto=update\n spring.jpa.show-sql=true`\n</code></pre>\n<p><strong>Dockerfile</strong></p>\n<pre><code>`FROM openjdk:8\n ADD target/demo-0.0.1-SNAPSHOT.jar demo-0.0.1-SNAPSHOT.jar\n EXPOSE 8080\n ENTRYPOINT [&quot;java&quot;, &quot;-jar&quot;, &quot;demo-0.0.1-SNAPSHOT.jar&quot;]`\n</code></pre>\n<p>I am very new to docker and I am trying to dockerize my spring boot application which is using Mysql database, I have been following a tutorial, but when i am running mvn clean install to build the jar file, it is giving this error</p>\n<p><strong>Error</strong></p>\n<pre><code>```Error starting ApplicationContext. To display the conditions \n report re-run your application with 'debug' enabled.\n 2023-05-22 16:33:55.304 ERROR 6245 --- [           main] \n o.s.boot.SpringApplication               : Application run \n failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Invocation of init method failed; nested exception is javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build Hibernate SessionFactory; nested exception is org.hibernate.exception.JDBCConnectionException: Unable to open JDBC Connection for DDL execution\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1804) ~[spring-beans-5.3.26.jar:5.3.26]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:620) ~[spring-beans-5.3.26.jar:5.3.26]\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542) ~[spring-beans-5.3.26.jar:5.3.26]\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335) ~[spring-beans-5.3.26.jar:5.3.26]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":6089340,"reputation":138,"user_id":4752210,"display_name":"nakul shukla"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1609852005,"creation_date":1609852005,"answer_id":65579506,"question_id":65349051,"body_markdown":"I suppose you are talking about `/actuator/httptrace`.  Spring boot doesn&#39;t publish request and response payload by default. Also you need to provide implementation of &quot;InMemoryHttpTraceRepository&quot; bean to expose custom information for tracing. [This](https://developer.okta.com/blog/2019/07/17/monitoring-with-actuator) blog could be helpful.","title":"Adding response body to Spring Boot Actuator","body":"<p>I suppose you are talking about <code>/actuator/httptrace</code>.  Spring boot doesn't publish request and response payload by default. Also you need to provide implementation of &quot;InMemoryHttpTraceRepository&quot; bean to expose custom information for tracing. <a href=\"https://developer.okta.com/blog/2019/07/17/monitoring-with-actuator\" rel=\"nofollow noreferrer\">This</a> blog could be helpful.</p>\n"}],"owner":{"account_id":330015,"reputation":55,"user_id":6400480,"display_name":"Hesham Abboud"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1523,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":65579506,"answer_count":1,"score":0,"last_activity_date":1684828620,"creation_date":1608243150,"question_id":65349051,"body_markdown":"I&#39;d like to view the response body in Spring Boot Actuator. I have tried couple of tutorials I found but none is working. The most concrete answer I found was using WebRequestTraceFilter which is no longer supported in Spring Boot 2.X.\r\n\r\nAlternatively, if there&#39;s any tool like Laravel Telescope for Spring Boot would be great. I&#39;m already using Spring Boot Admin and it&#39;s great except for the response body part.","title":"Adding response body to Spring Boot Actuator","body":"<p>I'd like to view the response body in Spring Boot Actuator. I have tried couple of tutorials I found but none is working. The most concrete answer I found was using WebRequestTraceFilter which is no longer supported in Spring Boot 2.X.</p>\n<p>Alternatively, if there's any tool like Laravel Telescope for Spring Boot would be great. I'm already using Spring Boot Admin and it's great except for the response body part.</p>\n"},{"tags":["java","maven","quarkus","quarkus-panache"],"comments":[{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":0,"creation_date":1684820536,"post_id":76309856,"comment_id":134568569,"body_markdown":"vintage-store is still using quarkus 2.x branch as opposite as other projects using Quarkus 3. Mistery solved.","body":"vintage-store is still using quarkus 2.x branch as opposite as other projects using Quarkus 3. Mistery solved."},{"owner":{"account_id":2922228,"reputation":61034,"user_id":2504224,"display_name":"geoand"},"score":1,"creation_date":1684822210,"post_id":76309856,"comment_id":134568811,"body_markdown":"@LucaBassoRicci why not add that as an answer? That way future readers can know immediately what the fix is instead of reading through comments.","body":"@LucaBassoRicci why not add that as an answer? That way future readers can know immediately what the fix is instead of reading through comments."},{"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"score":1,"creation_date":1684827710,"post_id":76309856,"comment_id":134569925,"body_markdown":"@geoand you&#39;re right, done :)","body":"@geoand you&#39;re right, done :)"}],"answers":[{"tags":[],"owner":{"account_id":3052937,"reputation":17914,"user_id":2587166,"accept_rate":83,"display_name":"Luca Basso Ricci"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684827567,"creation_date":1684827567,"answer_id":76312312,"question_id":76309856,"body_markdown":"As @geoand pointed out of me I&#39;m moving my comment as answer for future readers.\r\n\r\n`vintage-store` is still using Quarkus 2.x branch as opposite as other projects are using Quarkus 3.","title":"java.lang.ClassNotFoundException: javax.inject.Provider - Quarkus","body":"<p>As @geoand pointed out of me I'm moving my comment as answer for future readers.</p>\n<p><code>vintage-store</code> is still using Quarkus 2.x branch as opposite as other projects are using Quarkus 3.</p>\n"}],"owner":{"account_id":10383987,"reputation":2344,"user_id":7657749,"display_name":"Jan D.M."},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":351,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76312312,"answer_count":1,"score":-2,"last_activity_date":1684828618,"creation_date":1684789065,"question_id":76309856,"body_markdown":"This is my Publisher object:\r\n```package org.agoncal.quarkus.panache.model;\r\n\r\nimport io.quarkus.hibernate.orm.panache.PanacheEntity;\r\n\r\nimport jakarta.persistence.Entity;\r\nimport java.time.Instant;\r\n\r\n@Entity\r\npublic class Publisher extends PanacheEntity {\r\n\r\n    // ======================================\r\n    // =             Attributes             =\r\n    // ======================================\r\n\r\n    public String name;\r\n\r\n    public Instant createdDate = Instant.now();\r\n\r\n    // ======================================\r\n    // =           Constructors             =\r\n    // ======================================\r\n\r\n    public Publisher(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public Publisher() {\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Publisher{&quot; +\r\n                &quot;name=&#39;&quot; + name + &#39;\\&#39;&#39; +\r\n                &quot;, createdDate=&quot; + createdDate +\r\n                &quot;, id=&quot; + id +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\nThis is my test:\r\n\r\n```package org.agoncal.quarkus.panache.repository;\r\n\r\nimport io.quarkus.test.TestTransaction;\r\nimport io.quarkus.test.junit.QuarkusTest;\r\nimport org.agoncal.quarkus.panache.model.Publisher;\r\nimport org.junit.jupiter.api.Test;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\r\n\r\n@QuarkusTest\r\npublic class PublisherRepositoryTest {\r\n    @Test\r\n    @TestTransaction\r\n    public void shouldCreateAndFindPublisher() {\r\n        Publisher publisher = new Publisher(&quot;name&quot;);\r\n\r\n        publisher.persist(publisher);\r\n        assertNotNull(publisher.id);\r\n\r\n        publisher = publisher.findById(publisher.id);\r\n        assertEquals(&quot;name&quot;, publisher.name);\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\nThis is the error when doing a `mvn clean install`:\r\n```\r\n-------------------------------------------------------------------------------\r\nTest set: org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\r\n-------------------------------------------------------------------------------\r\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.755 s &lt;&lt;&lt; FAILURE! - in org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\r\norg.agoncal.quarkus.panache.repository.PublisherRepositoryTest.shouldCreateAndFindPublisher  Time elapsed: 0.002 s  &lt;&lt;&lt; ERROR!\r\njava.lang.RuntimeException: java.lang.NoClassDefFoundError: javax/inject/Provider\r\nCaused by: java.lang.NoClassDefFoundError: javax/inject/Provider\r\nCaused by: java.lang.ClassNotFoundException: javax.inject.Provider\r\n```\r\n\r\nI think the error is quite weird, because I do not use javax in my code...\r\n","title":"java.lang.ClassNotFoundException: javax.inject.Provider - Quarkus","body":"<p>This is my Publisher object:</p>\n<pre><code>\nimport io.quarkus.hibernate.orm.panache.PanacheEntity;\n\nimport jakarta.persistence.Entity;\nimport java.time.Instant;\n\n@Entity\npublic class Publisher extends PanacheEntity {\n\n    // ======================================\n    // =             Attributes             =\n    // ======================================\n\n    public String name;\n\n    public Instant createdDate = Instant.now();\n\n    // ======================================\n    // =           Constructors             =\n    // ======================================\n\n    public Publisher(String name) {\n        this.name = name;\n    }\n\n    public Publisher() {\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Publisher{&quot; +\n                &quot;name='&quot; + name + '\\'' +\n                &quot;, createdDate=&quot; + createdDate +\n                &quot;, id=&quot; + id +\n                '}';\n    }\n}\n</code></pre>\n<p>This is my test:</p>\n<pre><code>\nimport io.quarkus.test.TestTransaction;\nimport io.quarkus.test.junit.QuarkusTest;\nimport org.agoncal.quarkus.panache.model.Publisher;\nimport org.junit.jupiter.api.Test;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\n\n@QuarkusTest\npublic class PublisherRepositoryTest {\n    @Test\n    @TestTransaction\n    public void shouldCreateAndFindPublisher() {\n        Publisher publisher = new Publisher(&quot;name&quot;);\n\n        publisher.persist(publisher);\n        assertNotNull(publisher.id);\n\n        publisher = publisher.findById(publisher.id);\n        assertEquals(&quot;name&quot;, publisher.name);\n\n    }\n\n}\n</code></pre>\n<p>This is the error when doing a <code>mvn clean install</code>:</p>\n<pre><code>-------------------------------------------------------------------------------\nTest set: org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\n-------------------------------------------------------------------------------\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 3.755 s &lt;&lt;&lt; FAILURE! - in org.agoncal.quarkus.panache.repository.PublisherRepositoryTest\norg.agoncal.quarkus.panache.repository.PublisherRepositoryTest.shouldCreateAndFindPublisher  Time elapsed: 0.002 s  &lt;&lt;&lt; ERROR!\njava.lang.RuntimeException: java.lang.NoClassDefFoundError: javax/inject/Provider\nCaused by: java.lang.NoClassDefFoundError: javax/inject/Provider\nCaused by: java.lang.ClassNotFoundException: javax.inject.Provider\n</code></pre>\n<p>I think the error is quite weird, because I do not use javax in my code...</p>\n"},{"tags":["java","spring-boot","prometheus","metrics","spring-boot-actuator"],"comments":[{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1612434635,"post_id":66025939,"comment_id":116768040,"body_markdown":"I have no idea what you&#39;re trying to ask here. subject talks about logs but I see no logs in this question whatsoever.","body":"I have no idea what you&#39;re trying to ask here. subject talks about logs but I see no logs in this question whatsoever."},{"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"score":0,"creation_date":1612446287,"post_id":66025939,"comment_id":116773274,"body_markdown":"Thanks for you comment. Spring Boot Actuator is recording the request within it&#39;s metrics.","body":"Thanks for you comment. Spring Boot Actuator is recording the request within it&#39;s metrics."},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1612449718,"post_id":66025939,"comment_id":116774989,"body_markdown":"yes, but that&#39;s not related to logging. So you&#39;re worried about naming in metrics? also, are you sure if [simpleclient_spring_boot](https://github.com/prometheus/client_java) is recording the metrics and not spring? and what does your options controller look like?","body":"yes, but that&#39;s not related to logging. So you&#39;re worried about naming in metrics? also, are you sure if <a href=\"https://github.com/prometheus/client_java\" rel=\"nofollow noreferrer\">simpleclient_spring_boot</a> is recording the metrics and not spring? and what does your options controller look like?"},{"owner":{"account_id":151394,"reputation":52351,"user_id":365237,"accept_rate":96,"display_name":"eis"},"score":0,"creation_date":1612449947,"post_id":66025939,"comment_id":116775097,"body_markdown":"if your OPTIONS requests go to unmapped metrics, are they even mapped to any controller...","body":"if your OPTIONS requests go to unmapped metrics, are they even mapped to any controller..."},{"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"score":0,"creation_date":1612533664,"post_id":66025939,"comment_id":116803903,"body_markdown":"The OPTIONS requests are not mapped by me. I&#39;m using the default Spring Mapping for this request.","body":"The OPTIONS requests are not mapped by me. I&#39;m using the default Spring Mapping for this request."}],"answers":[{"tags":[],"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612431719,"creation_date":1612431719,"answer_id":66043022,"question_id":66025939,"body_markdown":"Seems that updating Spring Boot to 1.5.22.RELEASE\r\n\r\nresults in an output for OPTIONS requests like this:\r\n```\r\n# HELP counter_status_200_unmapped counter_status_200_unmapped\r\n# TYPE counter_status_200_unmapped gauge\r\ncounter_status_200_unmapped 5.0\r\n```\r\n\r\nIt&#39;s not perfect but alle OPTIONS requests are collected into one metric and not each one in a seperate one.","title":"Spring Boot Actuator is recording OPTIONS requests with dynamic parameter of URL","body":"<p>Seems that updating Spring Boot to 1.5.22.RELEASE</p>\n<p>results in an output for OPTIONS requests like this:</p>\n<pre><code># HELP counter_status_200_unmapped counter_status_200_unmapped\n# TYPE counter_status_200_unmapped gauge\ncounter_status_200_unmapped 5.0\n</code></pre>\n<p>It's not perfect but alle OPTIONS requests are collected into one metric and not each one in a seperate one.</p>\n"}],"owner":{"account_id":20618965,"reputation":1,"user_id":15136395,"display_name":"Tobias Schnupp"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":379,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684828604,"creation_date":1612349357,"question_id":66025939,"body_markdown":"we are unsing Spring Boot 1.5.9 and we do provide metrics for Prometheus.\r\n\r\nWhen we do receive OPTIONS requests the path parameter is not replaced. For GET Requests the parameter is replaced. The controller looks like this:\r\n\r\n```\r\n@Slf4j\r\n@RequestMapping(method = { RequestMethod.GET }, path = &quot;/claims/{token}&quot;)\r\n@RestController\r\npublic class ClaimDetailController {\r\n\r\n    @GetMapping(value = &quot;&quot;, produces = MediaType.APPLICATION_JSON_UTF8_VALUE, params = &quot;token&quot;)\r\n    public ResponseEntity getDetail(@PathVariable(value = &quot;token&quot;) final String token) {\r\n      ...\r\n    }\r\n}\r\n\r\n```\r\n\r\nWhen calling actuator with endpoint &quot;/prometheus&quot; we get:\r\n```\r\n# HELP gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0\r\n# TYPE gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge\r\ngauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 5.0\r\n# HELP gauge_response_claims_token gauge_response_claims_token\r\n# TYPE gauge_response_claims_token gauge\r\ngauge_response_claims_token 1502.0\r\n```\r\n\r\nThe first one is from the OPTIONS request. The second one from the GET request.\r\n\r\nSo why is the token from the OPTIONS request not replaced? Can this be achived?\r\nIf not - is it possible to remove OPTIONS requests from the metrics?\r\n\r\nAnd this is the /metrics output:\r\n\r\n&gt;counter.status.200.claims.clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0\t2\r\n&gt;counter.status.200.cloudfoundryapplication\t4\r\n\r\nHere are some dependencies used by us:\r\n\r\n```\r\n&lt;parent&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.5.9.RELEASE&lt;/version&gt;\r\n&lt;/parent&gt;\r\n\t\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-cloud-cloudfoundry-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;micrometer-spring-legacy&lt;/artifactId&gt;\r\n\t&lt;version&gt;1.3.16&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;simpleclient_spring_boot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.3.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;simpleclient_servlet&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.3.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;io.prometheus&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;simpleclient_hotspot&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.3.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"Spring Boot Actuator is recording OPTIONS requests with dynamic parameter of URL","body":"<p>we are unsing Spring Boot 1.5.9 and we do provide metrics for Prometheus.</p>\n<p>When we do receive OPTIONS requests the path parameter is not replaced. For GET Requests the parameter is replaced. The controller looks like this:</p>\n<pre><code>@Slf4j\n@RequestMapping(method = { RequestMethod.GET }, path = &quot;/claims/{token}&quot;)\n@RestController\npublic class ClaimDetailController {\n\n    @GetMapping(value = &quot;&quot;, produces = MediaType.APPLICATION_JSON_UTF8_VALUE, params = &quot;token&quot;)\n    public ResponseEntity getDetail(@PathVariable(value = &quot;token&quot;) final String token) {\n      ...\n    }\n}\n\n</code></pre>\n<p>When calling actuator with endpoint &quot;/prometheus&quot; we get:</p>\n<pre><code># HELP gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0\n# TYPE gauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 gauge\ngauge_response_claims_clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0 5.0\n# HELP gauge_response_claims_token gauge_response_claims_token\n# TYPE gauge_response_claims_token gauge\ngauge_response_claims_token 1502.0\n</code></pre>\n<p>The first one is from the OPTIONS request. The second one from the GET request.</p>\n<p>So why is the token from the OPTIONS request not replaced? Can this be achived?\nIf not - is it possible to remove OPTIONS requests from the metrics?</p>\n<p>And this is the /metrics output:</p>\n<blockquote>\n<p>counter.status.200.claims.clgrRFhIRlNDV3pJTXhXRG40dWlPWURrVTJnMU1nPT0  2\ncounter.status.200.cloudfoundryapplication 4</p>\n</blockquote>\n<p>Here are some dependencies used by us:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.5.9.RELEASE&lt;/version&gt;\n&lt;/parent&gt;\n    \n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-cloudfoundry-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-hateoas&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n    &lt;artifactId&gt;micrometer-spring-legacy&lt;/artifactId&gt;\n    &lt;version&gt;1.3.16&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n    &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n    &lt;artifactId&gt;simpleclient_spring_boot&lt;/artifactId&gt;\n    &lt;version&gt;0.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n    &lt;artifactId&gt;simpleclient_servlet&lt;/artifactId&gt;\n    &lt;version&gt;0.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.prometheus&lt;/groupId&gt;\n    &lt;artifactId&gt;simpleclient_hotspot&lt;/artifactId&gt;\n    &lt;version&gt;0.3.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3480040,"reputation":180,"user_id":2912358,"accept_rate":62,"display_name":"I2obiN"},"score":0,"creation_date":1649671091,"post_id":67091134,"comment_id":126926673,"body_markdown":"did you ever get this to work? have been asked to make reloadable configs happen with Springboot and have tried everything seemingly","body":"did you ever get this to work? have been asked to make reloadable configs happen with Springboot and have tried everything seemingly"}],"owner":{"account_id":14797232,"reputation":105,"user_id":10686571,"display_name":"Kropius Dop"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":304,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684828546,"creation_date":1618400789,"question_id":67091134,"body_markdown":"i am trying to refresh a refresh scope bean using actuator.The class that needs to be refreshed:\r\n``` \r\n@ConfigurationProperties(prefix = &quot;push-sync&quot;)\r\n@RefreshScope\r\npublic class PushSyncProperties {\r\n\r\n    private boolean available = true;\r\n    private int maxSyncThreads = 5;\r\n    private int maxRequestsPerSecond = 5;\r\n    private int maxRetries = 10;\r\n    private long initialRetryDelay = 7 * 1000L;\r\n    private long maxRetryDelay = 8 * 60 * 60 * 1000L;\r\n    private int retryBackOffMultiplier = 3;\r\n    private long dbCheckInterval = 10 * 1000L;\r\n\r\n    @PostConstruct\r\n    public void refresh()\r\n    {\r\n        log.info(&quot;Application Refreshed!&quot;);\r\n        log.info(String.valueOf(maxSyncThreads));\r\n    } \r\n```\r\npart of the pom\r\n\r\n```\r\n &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;2.2.3.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n```\r\nand the main class \r\n\r\n```\r\n@EnableConfigurationProperties({PushSyncProperties.class})\r\n@EnableScheduling\r\n@PropertySource(&quot;file:${push.sync.config}&quot;)\r\n@SpringBootApplication\r\npublic class Application extends SpringBootServletInitializer {\r\n\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\r\n        String pushSyncConfigPath = SystemProperties.get(&quot;push.sync.config&quot;);\r\n        return application.sources(Application.class)\r\n                .properties(\r\n                        &quot;spring.config.location:classpath:/application.yml, &quot; + pushSyncConfigPath\r\n                );\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(Application.class, args);\r\n    }\r\n\r\n}\r\n ```\r\n\r\nhowever, whenever changing a property from that specific file that maps my property class, the postConstruct function is called, but the value is never updated. Any idea why?","title":"Refresh scope not updating properties but refreshing the bean itself","body":"<p>i am trying to refresh a refresh scope bean using actuator.The class that needs to be refreshed:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;push-sync&quot;)\n@RefreshScope\npublic class PushSyncProperties {\n\n    private boolean available = true;\n    private int maxSyncThreads = 5;\n    private int maxRequestsPerSecond = 5;\n    private int maxRetries = 10;\n    private long initialRetryDelay = 7 * 1000L;\n    private long maxRetryDelay = 8 * 60 * 60 * 1000L;\n    private int retryBackOffMultiplier = 3;\n    private long dbCheckInterval = 10 * 1000L;\n\n    @PostConstruct\n    public void refresh()\n    {\n        log.info(&quot;Application Refreshed!&quot;);\n        log.info(String.valueOf(maxSyncThreads));\n    } \n</code></pre>\n<p>part of the pom</p>\n<pre><code> &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter&lt;/artifactId&gt;\n            &lt;version&gt;2.2.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n</code></pre>\n<p>and the main class</p>\n<pre><code>@EnableConfigurationProperties({PushSyncProperties.class})\n@EnableScheduling\n@PropertySource(&quot;file:${push.sync.config}&quot;)\n@SpringBootApplication\npublic class Application extends SpringBootServletInitializer {\n\n    @Override\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {\n        String pushSyncConfigPath = SystemProperties.get(&quot;push.sync.config&quot;);\n        return application.sources(Application.class)\n                .properties(\n                        &quot;spring.config.location:classpath:/application.yml, &quot; + pushSyncConfigPath\n                );\n    }\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>however, whenever changing a property from that specific file that maps my property class, the postConstruct function is called, but the value is never updated. Any idea why?</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator","health-monitoring","health-check"],"comments":[{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1621259539,"post_id":67567665,"comment_id":119434339,"body_markdown":"We can&#39;t help without any knowledge on how &quot;Base Service Servlet&quot; disable the GET.","body":"We can&#39;t help without any knowledge on how &quot;Base Service Servlet&quot; disable the GET."},{"owner":{"account_id":1546187,"reputation":131,"user_id":1439695,"accept_rate":80,"display_name":"Brian Antao"},"score":0,"creation_date":1621330252,"post_id":67567665,"comment_id":119456619,"body_markdown":"Thanks, I have updated the description with these details.","body":"Thanks, I have updated the description with these details."},{"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"score":0,"creation_date":1621352114,"post_id":67567665,"comment_id":119467425,"body_markdown":"This is much better, and can you include more details for &quot;Base Service Servlet&quot;, how do you configure it with springboot, such that we can reproduce the problem.","body":"This is much better, and can you include more details for &quot;Base Service Servlet&quot;, how do you configure it with springboot, such that we can reproduce the problem."},{"owner":{"account_id":1546187,"reputation":131,"user_id":1439695,"accept_rate":80,"display_name":"Brian Antao"},"score":0,"creation_date":1621354833,"post_id":67567665,"comment_id":119468822,"body_markdown":"More details added to reproduce the problem","body":"More details added to reproduce the problem"}],"answers":[{"tags":[],"owner":{"account_id":10777133,"reputation":7282,"user_id":7928721,"display_name":"samabcde"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1621396652,"creation_date":1621396652,"answer_id":67596723,"question_id":67567665,"body_markdown":"We can register `DispatcherServlet` with health endpoint in mapping before the `ServiceServlet`.\r\n\r\n```java\r\n@SpringBootApplication\r\npublic class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer {\r\n    @Autowired\r\n    private DispatcherServlet dispatcherServlet;\r\n\r\n    @Override\r\n    public void onStartup(ServletContext container) throws ServletException {\r\n        ServletRegistration.Dynamic dispatcher =\r\n                container.addServlet(&quot;dispatcher&quot;, dispatcherServlet);\r\n        dispatcher.setLoadOnStartup(1);\r\n        dispatcher.addMapping(&quot;/manage&quot;, &quot;/manage/health&quot;);\r\n\r\n        ServletRegistration.Dynamic application = container\r\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet());\r\n        application.setLoadOnStartup(2);\r\n        application.addMapping(&quot;/*&quot;);\r\n    }\r\n}\r\n```","title":"SpringBoot Actuator getting overshadowed by BaseService Servlet on same Port","body":"<p>We can register <code>DispatcherServlet</code> with health endpoint in mapping before the <code>ServiceServlet</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootApplication\npublic class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer {\n    @Autowired\n    private DispatcherServlet dispatcherServlet;\n\n    @Override\n    public void onStartup(ServletContext container) throws ServletException {\n        ServletRegistration.Dynamic dispatcher =\n                container.addServlet(&quot;dispatcher&quot;, dispatcherServlet);\n        dispatcher.setLoadOnStartup(1);\n        dispatcher.addMapping(&quot;/manage&quot;, &quot;/manage/health&quot;);\n\n        ServletRegistration.Dynamic application = container\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet());\n        application.setLoadOnStartup(2);\n        application.addMapping(&quot;/*&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":1546187,"reputation":131,"user_id":1439695,"accept_rate":80,"display_name":"Brian Antao"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":372,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":67596723,"answer_count":1,"score":1,"last_activity_date":1684828496,"creation_date":1621246111,"question_id":67567665,"body_markdown":"We are Attempting to Migrate Our Existing Spring WebServices App to SpringBoot and ran into an issue for which we seek your advice.\r\n\r\nWe have a Base Service Servlet that disables the GET on the port that the App is deployed on for Security reasons this servlet returns 501 Unimplemented Response as follows:\r\n\r\n```java\r\n @Override\r\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\r\n        log.warn(&quot;GET request received!&quot;);\r\n        response.setStatus(HttpServletResponse.SC_NOT_IMPLEMENTED);\r\n    }\r\n```\r\n```java\r\npublic abstract class BaseServiceServlet extends HttpServlet {\r\n ...\r\n } \r\n  \r\n public class ServiceServlet extends BaseServiceServlet {\r\n ...\r\n } \r\n  \r\n  \r\n  public class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer { \r\n  @Override\r\n    public void onStartup(ServletContext container) throws ServletException {\r\n\t\t \r\n      ServletRegistration.Dynamic application = container\r\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet()); \r\n      application.setLoadOnStartup(2);\r\n      application.addMapping(&quot;/*&quot;);\r\n        \r\n    }\r\n }\r\n```\r\nPreviously we had an old-fashioned HealthCheck JSP that we implemented. With the move to SpringBoot we are now using the SpringBoot Actuator.\r\n\r\nBut we find that if we set the Actuator health monitor port to the same one as the App when we try to monitor the health we get the 501 Unimplemented response.\r\n\r\nConfig is as follows:\r\n\r\n```\r\n# Spring-Boot Embedded Tomcat Config\r\nserver.port=8080\r\nserver.connection-timeout=10s\r\nserver.ssl.enabled=false\r\n## Springboot based health monitor\r\nmanagement.endpoints.enabled-by-default=true\r\nmanagement.endpoint.health.enabled=true\r\nmanagement.endpoint.loggers.enabled=true\r\nmanagement.endpoints.web.cors.allowed-methods=GET\r\nmanagement.endpoint.beans.cache.time-to-live=20s\r\nmanagement.endpoints.web.base-path=/manage\r\nmanagement.server.port=8080\r\nmanagement.security.enabled=false \r\n```\r\n\r\nOne way we could get around this problem is if we changed the actuator health check port to something else that Works.\r\n\r\nQuestion:\r\n    How can we set the Actuator port to be the same as the App and make the actuator health check url which is something like http://localhost:8080/manage/health not return 501 Unimplemented from the Base Service Servlet ?","title":"SpringBoot Actuator getting overshadowed by BaseService Servlet on same Port","body":"<p>We are Attempting to Migrate Our Existing Spring WebServices App to SpringBoot and ran into an issue for which we seek your advice.</p>\n<p>We have a Base Service Servlet that disables the GET on the port that the App is deployed on for Security reasons this servlet returns 501 Unimplemented Response as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Override\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {\n        log.warn(&quot;GET request received!&quot;);\n        response.setStatus(HttpServletResponse.SC_NOT_IMPLEMENTED);\n    }\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public abstract class BaseServiceServlet extends HttpServlet {\n ...\n } \n  \n public class ServiceServlet extends BaseServiceServlet {\n ...\n } \n  \n  \n  public class ServletInitializer extends SpringBootServletInitializer implements ServletContextInitializer { \n  @Override\n    public void onStartup(ServletContext container) throws ServletException {\n         \n      ServletRegistration.Dynamic application = container\n                .addServlet(&quot;ServiceServlet&quot;, new ServiceServlet()); \n      application.setLoadOnStartup(2);\n      application.addMapping(&quot;/*&quot;);\n        \n    }\n }\n</code></pre>\n<p>Previously we had an old-fashioned HealthCheck JSP that we implemented. With the move to SpringBoot we are now using the SpringBoot Actuator.</p>\n<p>But we find that if we set the Actuator health monitor port to the same one as the App when we try to monitor the health we get the 501 Unimplemented response.</p>\n<p>Config is as follows:</p>\n<pre><code># Spring-Boot Embedded Tomcat Config\nserver.port=8080\nserver.connection-timeout=10s\nserver.ssl.enabled=false\n## Springboot based health monitor\nmanagement.endpoints.enabled-by-default=true\nmanagement.endpoint.health.enabled=true\nmanagement.endpoint.loggers.enabled=true\nmanagement.endpoints.web.cors.allowed-methods=GET\nmanagement.endpoint.beans.cache.time-to-live=20s\nmanagement.endpoints.web.base-path=/manage\nmanagement.server.port=8080\nmanagement.security.enabled=false \n</code></pre>\n<p>One way we could get around this problem is if we changed the actuator health check port to something else that Works.</p>\n<p>Question:\nHow can we set the Actuator port to be the same as the App and make the actuator health check url which is something like http://localhost:8080/manage/health not return 501 Unimplemented from the Base Service Servlet ?</p>\n"},{"tags":["java","spring-boot","spring-boot-actuator","dynamic-properties"],"comments":[{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634231346,"post_id":69571749,"comment_id":122975957,"body_markdown":"Is the logic in `doHealthCheck` method of `App1HealthCheckContributor` and `MyHealthCheckContributor` exactly the same so that you can have a single class covering both use cases?","body":"Is the logic in <code>doHealthCheck</code> method of <code>App1HealthCheckContributor</code> and <code>MyHealthCheckContributor</code> exactly the same so that you can have a single class covering both use cases?"},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634341064,"post_id":69571749,"comment_id":123006641,"body_markdown":"Yes, the logic is equal.","body":"Yes, the logic is equal."}],"answers":[{"comments":[{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":1,"creation_date":1634341281,"post_id":69574978,"comment_id":123006661,"body_markdown":"Works like a charm, Jo&#227;o. How could I test that the contributors are generated and registered in the Spring Boot context?","body":"Works like a charm, Jo&#227;o. How could I test that the contributors are generated and registered in the Spring Boot context?"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634422272,"post_id":69574978,"comment_id":123021394,"body_markdown":"You would need to add an `application-test.yml` configuration and use `test` profile in your `@SpringBootTest`.","body":"You would need to add an <code>application-test.yml</code> configuration and use <code>test</code> profile in your <code>@SpringBootTest</code>."},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634503032,"post_id":69574978,"comment_id":123036016,"body_markdown":"I already did but accessing the configuration always results in a NPE.","body":"I already did but accessing the configuration always results in a NPE."},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634511934,"post_id":69574978,"comment_id":123037753,"body_markdown":"Then I would suggest you create an additional question and include all your code and tests. Share the link in a comment. Thanks!","body":"Then I would suggest you create an additional question and include all your code and tests. Share the link in a comment. Thanks!"},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634578167,"post_id":69574978,"comment_id":123057426,"body_markdown":"I did so. You can find the link at the end of my original question. Furthermore I found this article about avoiding @PostConstruct:https://levelup.gitconnected.com/stop-using-postconstruct-in-your-java-applications-2a66fb202cb8 \nWhat do you think about?","body":"I did so. You can find the link at the end of my original question. Furthermore I found this article about avoiding @PostConstruct:<a href=\"https://levelup.gitconnected.com/stop-using-postconstruct-in-your-java-applications-2a66fb202cb8\" rel=\"nofollow noreferrer\">levelup.gitconnected.com/&hellip;</a>  What do you think about?"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634585194,"post_id":69574978,"comment_id":123059816,"body_markdown":"I get it and I agree if this is a regular Service or something similar. But this is a configuration class, you will never reuse it and most likely you will not test it directly. Nevertheless, you can always try the constructor approach.","body":"I get it and I agree if this is a regular Service or something similar. But this is a configuration class, you will never reuse it and most likely you will not test it directly. Nevertheless, you can always try the constructor approach."},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634831018,"post_id":69574978,"comment_id":123137998,"body_markdown":"Instantiating the health check indicators this way prevent me from setting @ConditionalOnEnabledHealthIndicator annotation, right? I think I a allowed to put exactly only ONE indicator but not @ConditionalOnEnabledHealthIndicator(aaa,bbb,ccc). Hence, I can&#39;t dis-/enable the indicator in application.properties using management.endpoint.aaa.enabled=true/false ...or is there a possibility to do?","body":"Instantiating the health check indicators this way prevent me from setting @ConditionalOnEnabledHealthIndicator annotation, right? I think I a allowed to put exactly only ONE indicator but not @ConditionalOnEnabledHealthIndicator(aaa,bbb,ccc). Hence, I can&#39;t dis-/enable the indicator in application.properties using management.endpoint.aaa.enabled=true/false ...or is there a possibility to do?"},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634833628,"post_id":69574978,"comment_id":123139204,"body_markdown":"Maybe using @ConditionalOnEnabledHealthIndicator(&quot;app&quot;) with management.endpoint.app.enabled=true/false but this is an all or nothing approach and I can&#39;t disable selectively.","body":"Maybe using @ConditionalOnEnabledHealthIndicator(&quot;app&quot;) with management.endpoint.app.enabled=true/false but this is an all or nothing approach and I can&#39;t disable selectively."},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634848898,"post_id":69574978,"comment_id":123144525,"body_markdown":"I would say it should work with the name you configure in your `application.yml`, but not sure to be honest. Never tried that.","body":"I would say it should work with the name you configure in your <code>application.yml</code>, but not sure to be honest. Never tried that."},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634885136,"post_id":69574978,"comment_id":123151152,"body_markdown":"But WHICH name? I defined it as an array. I tried it using @ConditionalOnEnabledHealthIndicator(aaa,bbb,ccc) but this din&#39;t work. Maybe you are able to find a solution!? ;-)","body":"But WHICH name? I defined it as an array. I tried it using @ConditionalOnEnabledHealthIndicator(aaa,bbb,ccc) but this din&#39;t work. Maybe you are able to find a solution!? ;-)"},{"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"score":0,"creation_date":1634893094,"post_id":69574978,"comment_id":123154094,"body_markdown":"`@ConditionalOnEnabledHealthIndicator` does not support multiple names. At least reading the documentation seems that way: &quot;value - The name of the health indicator.&quot;. Maybe you can use multiple `@ConditionalOnEnabledHealthIndicator` but I am not really sure that Spring supports that.","body":"<code>@ConditionalOnEnabledHealthIndicator</code> does not support multiple names. At least reading the documentation seems that way: &quot;value - The name of the health indicator.&quot;. Maybe you can use multiple <code>@ConditionalOnEnabledHealthIndicator</code> but I am not really sure that Spring supports that."},{"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"score":0,"creation_date":1634893564,"post_id":69574978,"comment_id":123154307,"body_markdown":"No, Spring complains about multiple usage of `@ConditionalOnEnabledHealthIndicator`. I tried already. Would be an improvement if Spring would support this. Seems as if this way of creating indicators was not considered or not wanted.","body":"No, Spring complains about multiple usage of <code>@ConditionalOnEnabledHealthIndicator</code>. I tried already. Would be an improvement if Spring would support this. Seems as if this way of creating indicators was not considered or not wanted."}],"tags":[],"owner":{"account_id":22354823,"reputation":16499,"user_id":16572295,"display_name":"Jo&#227;o Dias"},"comment_count":12,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1634232590,"creation_date":1634232590,"answer_id":69574978,"question_id":69571749,"body_markdown":"Assuming the code in `doHealthCheck` is exactly the same for all apps to be checked you could do the following.\r\n\r\nYou would start by creating a single health check class:\r\n```java\r\n@Slf4j\r\npublic class AppHealthCheckContributor extends AbstractHealthIndicator {\r\n\r\n    private final AppProperties appProperties;\r\n\r\n    public App1HealthCheckContributor(final AppProperties appProperties) {\r\n        this.appProperties = appProperties;\r\n    }\r\n\r\n    @Override\r\n    protected void doHealthCheck(Health.Builder builder) {...}\r\n}\r\n```\r\n\r\nAnd the properties model as follows:\r\n```java\r\n@Slf4j\r\n@Data\r\npublic class AppProperties {\r\n    private String baseUrl;\r\n    private String name;\r\n}\r\n```\r\n\r\nThis means that the configuration would be something like the following (in `application.yml`):\r\n```yml\r\nhealth-check:\r\n  apps:\r\n    - baseUrl: http://localhost:10000\r\n      name: app1\r\n    - baseUrl: http://localhost:10001\r\n      name: app2\r\n```\r\n\r\nFinally, you would need to create a bean for each app and register them in the application context:\r\n```java\r\n@Slf4j\r\n@Data\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;health-check&quot;)\r\npublic class AllAppPropertiesConfiguration {\r\n    private List&lt;AppProperties&gt; apps;\r\n\r\n    @Autowired\r\n    private GenericApplicationContext applicationContext;\r\n\r\n    @PostConstruct\r\n    fun init() {\r\n        for (AppProperties app : apps) {\r\n            applicationContext.registerBean(app.getName(), AppHealthCheckContributor.class, app);\r\n        }\r\n    }\r\n}\r\n```","title":"Multiple instances of a bean of one class filled with values from application.properties","body":"<p>Assuming the code in <code>doHealthCheck</code> is exactly the same for all apps to be checked you could do the following.</p>\n<p>You would start by creating a single health check class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\npublic class AppHealthCheckContributor extends AbstractHealthIndicator {\n\n    private final AppProperties appProperties;\n\n    public App1HealthCheckContributor(final AppProperties appProperties) {\n        this.appProperties = appProperties;\n    }\n\n    @Override\n    protected void doHealthCheck(Health.Builder builder) {...}\n}\n</code></pre>\n<p>And the properties model as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Data\npublic class AppProperties {\n    private String baseUrl;\n    private String name;\n}\n</code></pre>\n<p>This means that the configuration would be something like the following (in <code>application.yml</code>):</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>health-check:\n  apps:\n    - baseUrl: http://localhost:10000\n      name: app1\n    - baseUrl: http://localhost:10001\n      name: app2\n</code></pre>\n<p>Finally, you would need to create a bean for each app and register them in the application context:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Data\n@Configuration\n@ConfigurationProperties(prefix = &quot;health-check&quot;)\npublic class AllAppPropertiesConfiguration {\n    private List&lt;AppProperties&gt; apps;\n\n    @Autowired\n    private GenericApplicationContext applicationContext;\n\n    @PostConstruct\n    fun init() {\n        for (AppProperties app : apps) {\n            applicationContext.registerBean(app.getName(), AppHealthCheckContributor.class, app);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3274061,"reputation":2691,"user_id":2756760,"accept_rate":51,"display_name":"du-it"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":69574978,"answer_count":1,"score":3,"last_activity_date":1684828423,"creation_date":1634218724,"question_id":69571749,"body_markdown":"I intend to write some `HealtCheckContributors` for a Spring Boot application using *spring-boot-actuator*. Hence, I implemented two of them. they are intended for checking the health of different apps, of course, but have a nearly identical structure, except the configuration properties, ...\r\n\r\nSonarQube complains about that and I wonder if it is possible to have a single health check class but instantiated as many times as defined in `application.properties`. \r\nAn example: \r\n\r\n`application.properties`:\r\n```\r\n# actuator\r\napp1.management.baseUrl=http://localhost:10000\r\napp1.management.name=app1HealthCheckContributor\r\napp2.management.basUrl=http://localhost:10001\r\napp2.management.name=app2HealthCheckContributor\r\n```\r\n\r\n`HealthCheckContributor` for app1:\r\n```java\r\n@Slf4j\r\n@Component(&quot;xxx&quot;)\r\npublic class App1HealthCheckContributor extends AbstractHealthIndicator {\r\n\r\n    private final App1Properties app1Properties;\r\n\r\n    public App1HealthCheckContributor(final App1Properties app1Properties) {\r\n        this.app1Properties = app1Properties;\r\n    }\r\n\r\n    @Override\r\n    protected void doHealthCheck(Health.Builder builder) {...}\r\n}\r\n```\r\n\r\n...and this code for each `HealthCheckContributor` only distinct in its *appXProperties*. \r\n\r\nIsn&#39;t it possible to have some kind of base class like:\r\n```java\r\n@Slf4j\r\n@Component()\r\npublic class MyHealthCheckContributor extends AbstractHealthIndicator {\r\n\r\n    private final MyProperties myProperties;\r\n\r\n    public MyHealthCheckContributor(final MyProperties myProperties) {\r\n        this.myProperties = myProperties;\r\n    }\r\n\r\n    @Override\r\n    protected void doHealthCheck(Health.Builder builder) {...}\r\n}\r\n```\r\n\r\nand let Spring Boot take care of instantiating two `HealthCheckContributors` (in our case `App1HealthCheckContributor` and `App2HealthCheckContributor`)? \r\nThis would eliminate code duplication.\r\n\r\nAn example of the properties class file:\r\n```java\r\n@Slf4j\r\n@Data\r\n@ConfigurationProperties(prefix = &quot;app1.management&quot;)\r\npublic class App1Properties {\r\n    private String baseUrl;\r\n    private String ...;\r\n}\r\n```\r\n\r\nHow can I achieve this and how must an `application.properties` file looks like to achieve what I intend to do?\r\n\r\nThe final question: [How to test multiple instance creation of a bean of one class filled with values from application.properties?][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/69620134/how-to-test-multiple-instance-creation-of-a-bean-of-one-class-filled-with-values","title":"Multiple instances of a bean of one class filled with values from application.properties","body":"<p>I intend to write some <code>HealtCheckContributors</code> for a Spring Boot application using <em>spring-boot-actuator</em>. Hence, I implemented two of them. they are intended for checking the health of different apps, of course, but have a nearly identical structure, except the configuration properties, ...</p>\n<p>SonarQube complains about that and I wonder if it is possible to have a single health check class but instantiated as many times as defined in <code>application.properties</code>.\nAn example:</p>\n<p><code>application.properties</code>:</p>\n<pre><code># actuator\napp1.management.baseUrl=http://localhost:10000\napp1.management.name=app1HealthCheckContributor\napp2.management.basUrl=http://localhost:10001\napp2.management.name=app2HealthCheckContributor\n</code></pre>\n<p><code>HealthCheckContributor</code> for app1:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component(&quot;xxx&quot;)\npublic class App1HealthCheckContributor extends AbstractHealthIndicator {\n\n    private final App1Properties app1Properties;\n\n    public App1HealthCheckContributor(final App1Properties app1Properties) {\n        this.app1Properties = app1Properties;\n    }\n\n    @Override\n    protected void doHealthCheck(Health.Builder builder) {...}\n}\n</code></pre>\n<p>...and this code for each <code>HealthCheckContributor</code> only distinct in its <em>appXProperties</em>.</p>\n<p>Isn't it possible to have some kind of base class like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Component()\npublic class MyHealthCheckContributor extends AbstractHealthIndicator {\n\n    private final MyProperties myProperties;\n\n    public MyHealthCheckContributor(final MyProperties myProperties) {\n        this.myProperties = myProperties;\n    }\n\n    @Override\n    protected void doHealthCheck(Health.Builder builder) {...}\n}\n</code></pre>\n<p>and let Spring Boot take care of instantiating two <code>HealthCheckContributors</code> (in our case <code>App1HealthCheckContributor</code> and <code>App2HealthCheckContributor</code>)?\nThis would eliminate code duplication.</p>\n<p>An example of the properties class file:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\n@Data\n@ConfigurationProperties(prefix = &quot;app1.management&quot;)\npublic class App1Properties {\n    private String baseUrl;\n    private String ...;\n}\n</code></pre>\n<p>How can I achieve this and how must an <code>application.properties</code> file looks like to achieve what I intend to do?</p>\n<p>The final question: <a href=\"https://stackoverflow.com/questions/69620134/how-to-test-multiple-instance-creation-of-a-bean-of-one-class-filled-with-values\">How to test multiple instance creation of a bean of one class filled with values from application.properties?</a></p>\n"},{"tags":["java","spring","logging","filter","spring-boot-actuator"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1625655425,"post_id":68284273,"comment_id":120683076,"body_markdown":"I don&#39;t know the answer, but a log level of DEBUG will always be spammy.","body":"I don&#39;t know the answer, but a log level of DEBUG will always be spammy."}],"answers":[{"comments":[{"owner":{"account_id":2259461,"reputation":147,"user_id":1989887,"accept_rate":80,"display_name":"MonitorLizard"},"score":0,"creation_date":1626074370,"post_id":68309373,"comment_id":120785657,"body_markdown":"Thanks a lot for your extensive answer including sample code!!!\nThis seems to remove the log lines &quot;Before request&quot; and &quot;After request&quot;.\nHowever, a lot is logged when AbstractRequestLoggingFilter.doFilterInternal calls filterChain.doFilter. This part is still logged.","body":"Thanks a lot for your extensive answer including sample code!!! This seems to remove the log lines &quot;Before request&quot; and &quot;After request&quot;. However, a lot is logged when AbstractRequestLoggingFilter.doFilterInternal calls filterChain.doFilter. This part is still logged."},{"owner":{"account_id":2259461,"reputation":147,"user_id":1989887,"accept_rate":80,"display_name":"MonitorLizard"},"score":0,"creation_date":1626074737,"post_id":68309373,"comment_id":120785788,"body_markdown":"(6 lines in trace mode, 4 lines in debug mode).","body":"(6 lines in trace mode, 4 lines in debug mode)."},{"owner":{"account_id":11119792,"reputation":2581,"user_id":8163025,"display_name":"saver"},"score":0,"creation_date":1626296035,"post_id":68309373,"comment_id":120858238,"body_markdown":"My answer is like example, you can define your own filter which will be not extended from AbstractRequestLoggingFilter or you can override methods for correct logging, but the main idea of logging requests should be based on filters.","body":"My answer is like example, you can define your own filter which will be not extended from AbstractRequestLoggingFilter or you can override methods for correct logging, but the main idea of logging requests should be based on filters."}],"tags":[],"owner":{"account_id":11119792,"reputation":2581,"user_id":8163025,"display_name":"saver"},"comment_count":3,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1625784239,"creation_date":1625784239,"answer_id":68309373,"question_id":68284273,"body_markdown":"I recommend to use Spring Built-In request logging filter ```CommonsRequestLoggingFilter```. \r\n\r\nTo enable the logging filter, you need to set the property:\r\n```\r\nlogging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG\r\n```\r\nBut when you need specify custom rules for enabling logging, you can create custom implementation in following way:\r\n```\r\n@Component\r\npublic class RequestLoggingFilter extends AbstractRequestLoggingFilter {\r\n\r\n    private Set&lt;String&gt; excludedUrls = Set.of(&quot;/health&quot;);\r\n\r\n    @Override\r\n    protected boolean shouldLog(HttpServletRequest request) {\r\n        if(excludedUrls.contains(request.getRequestURI())) {\r\n            return false;\r\n        }\r\n        return logger.isDebugEnabled();\r\n    }\r\n\r\n    @Override\r\n    protected void beforeRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n\r\n    @Override\r\n    protected void afterRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n}\r\n```\r\nand to enable the filter add the following config property to ```application.properties```:\r\n```\r\nlogging.level.&lt;package_name&gt;.RequestLoggingFilter=DEBUG\r\n```","title":"How to exclude certain HTTP requests from being logged in Java Spring (e.g. /health Endpoint)","body":"<p>I recommend to use Spring Built-In request logging filter <code>CommonsRequestLoggingFilter</code>.</p>\n<p>To enable the logging filter, you need to set the property:</p>\n<pre><code>logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=DEBUG\n</code></pre>\n<p>But when you need specify custom rules for enabling logging, you can create custom implementation in following way:</p>\n<pre><code>@Component\npublic class RequestLoggingFilter extends AbstractRequestLoggingFilter {\n\n    private Set&lt;String&gt; excludedUrls = Set.of(&quot;/health&quot;);\n\n    @Override\n    protected boolean shouldLog(HttpServletRequest request) {\n        if(excludedUrls.contains(request.getRequestURI())) {\n            return false;\n        }\n        return logger.isDebugEnabled();\n    }\n\n    @Override\n    protected void beforeRequest(HttpServletRequest request, String message) {\n        logger.debug(message);\n    }\n\n    @Override\n    protected void afterRequest(HttpServletRequest request, String message) {\n        logger.debug(message);\n    }\n}\n</code></pre>\n<p>and to enable the filter add the following config property to <code>application.properties</code>:</p>\n<pre><code>logging.level.&lt;package_name&gt;.RequestLoggingFilter=DEBUG\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1681271575,"post_id":75956983,"comment_id":134027877,"body_markdown":"As it’s currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As it’s currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75956983/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":24037555,"reputation":1,"user_id":18017655,"display_name":"Couch Potato"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680858159,"creation_date":1680858159,"answer_id":75956983,"question_id":68284273,"body_markdown":"What if i get this error?\r\n\r\n&gt; 2023-04-07 11:57:05.227 INFO \r\n&gt; org.springframework.aop.framework.CglibAopProxy.doValidateClass():263\r\n&gt; - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.OncePerRequestFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)\r\n&gt; throws javax.servlet.ServletException,java.io.IOException] because it\r\n&gt; is marked as final: Consider using interface-based JDK proxies\r\n&gt; instead! 2023-04-07 11:57:05.228 INFO \r\n&gt; org.springframework.aop.framework.CglibAopProxy.doValidateClass():263\r\n&gt; - Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig)\r\n&gt; throws javax.servlet.ServletException] because it is marked as final:\r\n&gt; Consider using interface-based JDK proxies instead! 2023-04-07\r\n&gt; 11:57:05.343 ERROR org.apache.juli.logging.DirectJDKLog.log():175 -\r\n&gt; Exception starting filter [requestLoggingFilter]\r\n&gt; java.lang.NullPointerException: Cannot invoke\r\n&gt; &quot;org.apache.commons.logging.Log.isDebugEnabled()&quot; because\r\n&gt; &quot;this.logger&quot; is null\r\n\r\n    @Component\r\n    \r\n    public class RequestLoggingFilter extends AbstractRequestLoggingFilter {\r\n\r\n    @Override\r\n    protected boolean shouldLog(HttpServletRequest request) {\r\n        return !request.getServletPath().contains(&quot;actuator/health&quot;);\r\n    }\r\n\r\n    @Override\r\n    protected void beforeRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n\r\n    @Override\r\n    protected void afterRequest(HttpServletRequest request, String message) {\r\n        logger.debug(message);\r\n    }\r\n    }","title":"How to exclude certain HTTP requests from being logged in Java Spring (e.g. /health Endpoint)","body":"<p>What if i get this error?</p>\n<blockquote>\n<p>2023-04-07 11:57:05.227 INFO\norg.springframework.aop.framework.CglibAopProxy.doValidateClass():263</p>\n<ul>\n<li>Unable to proxy interface-implementing method [public final void org.springframework.web.filter.OncePerRequestFilter.doFilter(javax.servlet.ServletRequest,javax.servlet.ServletResponse,javax.servlet.FilterChain)\nthrows javax.servlet.ServletException,java.io.IOException] because it\nis marked as final: Consider using interface-based JDK proxies\ninstead! 2023-04-07 11:57:05.228 INFO\norg.springframework.aop.framework.CglibAopProxy.doValidateClass():263</li>\n<li>Unable to proxy interface-implementing method [public final void org.springframework.web.filter.GenericFilterBean.init(javax.servlet.FilterConfig)\nthrows javax.servlet.ServletException] because it is marked as final:\nConsider using interface-based JDK proxies instead! 2023-04-07\n11:57:05.343 ERROR org.apache.juli.logging.DirectJDKLog.log():175 -\nException starting filter [requestLoggingFilter]\njava.lang.NullPointerException: Cannot invoke\n&quot;org.apache.commons.logging.Log.isDebugEnabled()&quot; because\n&quot;this.logger&quot; is null</li>\n</ul>\n</blockquote>\n<pre><code>@Component\n\npublic class RequestLoggingFilter extends AbstractRequestLoggingFilter {\n\n@Override\nprotected boolean shouldLog(HttpServletRequest request) {\n    return !request.getServletPath().contains(&quot;actuator/health&quot;);\n}\n\n@Override\nprotected void beforeRequest(HttpServletRequest request, String message) {\n    logger.debug(message);\n}\n\n@Override\nprotected void afterRequest(HttpServletRequest request, String message) {\n    logger.debug(message);\n}\n}\n</code></pre>\n"}],"owner":{"account_id":2259461,"reputation":147,"user_id":1989887,"accept_rate":80,"display_name":"MonitorLizard"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4390,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1684828390,"creation_date":1625653612,"question_id":68284273,"body_markdown":"In my Spring boot application the following setting: \r\n\r\n    logging.org.springframework.web: DEBUG\r\n\r\ncauses all HTTP requests to be logged, which is cool!\r\n\r\nHowever, as the /health endpoint is continuously polled, this spams the logfile.\r\nHow can I disable request logging just for this endpoint?","title":"How to exclude certain HTTP requests from being logged in Java Spring (e.g. /health Endpoint)","body":"<p>In my Spring boot application the following setting:</p>\n<pre><code>logging.org.springframework.web: DEBUG\n</code></pre>\n<p>causes all HTTP requests to be logged, which is cool!</p>\n<p>However, as the /health endpoint is continuously polled, this spams the logfile.\nHow can I disable request logging just for this endpoint?</p>\n"},{"tags":["java","instance-variables"],"comments":[{"owner":{"account_id":4291034,"reputation":452,"user_id":8244977,"display_name":"BingLi224"},"score":2,"creation_date":1549255766,"post_id":54510263,"comment_id":95823866,"body_markdown":"`&lt;class name&gt;.&lt;instance variable&gt;` is static variable?","body":"<code>&lt;class name&gt;.&lt;instance variable&gt;</code> is static variable?"},{"owner":{"account_id":13737414,"reputation":613,"user_id":10147834,"display_name":"Sara"},"score":0,"creation_date":1549255799,"post_id":54510263,"comment_id":95823873,"body_markdown":"No. These are instance variables","body":"No. These are instance variables"},{"owner":{"account_id":7424117,"reputation":56335,"user_id":5647260,"accept_rate":82,"display_name":"Andrew Li"},"score":1,"creation_date":1549255831,"post_id":54510263,"comment_id":95823877,"body_markdown":"@Sara That makes no sense. Instance variables are associated *with instances*, not the class themselves","body":"@Sara That makes no sense. Instance variables are associated <i>with instances</i>, not the class themselves"},{"owner":{"account_id":13737414,"reputation":613,"user_id":10147834,"display_name":"Sara"},"score":0,"creation_date":1549255835,"post_id":54510263,"comment_id":95823879,"body_markdown":"@BingLi224 no. These are instance variables.","body":"@BingLi224 no. These are instance variables."},{"owner":{"account_id":10661768,"reputation":9328,"user_id":7849549,"accept_rate":44,"display_name":"Shubham Dixit"},"score":1,"creation_date":1549255917,"post_id":54510263,"comment_id":95823896,"body_markdown":"Its better if you post some code??","body":"Its better if you post some code??"},{"owner":{"account_id":89056,"reputation":8068,"user_id":2684196,"accept_rate":80,"display_name":"Willis Blackburn"},"score":0,"creation_date":1549256017,"post_id":54510263,"comment_id":95823917,"body_markdown":"Sure it&#39;s not `&lt;class name&gt;.this.&lt;instance variable&gt;`?","body":"Sure it&#39;s not <code>&lt;class name&gt;.this.&lt;instance variable&gt;</code>?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":0,"creation_date":1549256450,"post_id":54510263,"comment_id":95823999,"body_markdown":"*no. These are instance variables.* If you are so adamant, please show your code","body":"<i>no. These are instance variables.</i> If you are so adamant, please show your code"},{"owner":{"account_id":10661768,"reputation":9328,"user_id":7849549,"accept_rate":44,"display_name":"Shubham Dixit"},"score":0,"creation_date":1549256500,"post_id":54510263,"comment_id":95824012,"body_markdown":"your variable might be static.","body":"your variable might be static."}],"answers":[{"tags":[],"owner":{"account_id":11839556,"reputation":1520,"user_id":8663811,"display_name":"Rahul sharma"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1684828049,"creation_date":1549257890,"answer_id":54510522,"question_id":54510263,"body_markdown":"You have to make that variable or method static then you can use through class name.\r\n\r\n    public static int a=5;\r\n    /*declaring static variable*/\r\n\r\n \r\n\r\n      System.out.println(classname.a);\r\n      /*calling static variable*/\r\n\r\n","title":"Accessing object variables by class name instead of this","body":"<p>You have to make that variable or method static then you can use through class name.</p>\n<pre><code>public static int a=5;\n/*declaring static variable*/\n\n\n\n  System.out.println(classname.a);\n  /*calling static variable*/\n</code></pre>\n"}],"owner":{"account_id":13737414,"reputation":613,"user_id":10147834,"display_name":"Sara"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":528,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1684828049,"creation_date":1549255578,"question_id":54510263,"body_markdown":"Usually when there is getter/setter in a POJO class, the general convention I have seen until now was to use `return this.&lt;instance variable&gt;` / `this.&lt;instance variable&gt; = something`\n\nBut, the current project I am working on uses a strange convention of `return &lt;class name&gt;.&lt;instance variable&gt;`\n\nI understand that this works, but was wondering if this is the right approach at all? ","title":"Accessing object variables by class name instead of this","body":"<p>Usually when there is getter/setter in a POJO class, the general convention I have seen until now was to use <code>return this.&lt;instance variable&gt;</code> / <code>this.&lt;instance variable&gt; = something</code></p>\n\n<p>But, the current project I am working on uses a strange convention of <code>return &lt;class name&gt;.&lt;instance variable&gt;</code></p>\n\n<p>I understand that this works, but was wondering if this is the right approach at all? </p>\n"},{"tags":["java","iterator"],"comments":[{"owner":{"account_id":44379,"reputation":14328,"user_id":130224,"accept_rate":84,"display_name":"reprogrammer"},"score":2,"creation_date":1354558810,"post_id":13689288,"comment_id":18794862,"body_markdown":"Why not create a new iterator?","body":"Why not create a new iterator?"},{"owner":{"account_id":940870,"reputation":20212,"user_id":968969,"display_name":"Tony Hopkinson"},"score":1,"creation_date":1354558915,"post_id":13689288,"comment_id":18794902,"body_markdown":"well you&#39;ve missed something, if you need to do more than next and maybe previous, iterator is not the best choice. Why do you need to reset?","body":"well you&#39;ve missed something, if you need to do more than next and maybe previous, iterator is not the best choice. Why do you need to reset?"},{"owner":{"account_id":1512818,"reputation":1873,"user_id":1414499,"accept_rate":89,"display_name":"Krzysztof"},"score":0,"creation_date":1354561117,"post_id":13689288,"comment_id":18795717,"body_markdown":"I trying to understand the idea of dynamic list in java. A few weeks ago I have a problem with session variable on jsp oage. From EL and taglibs I can use a method of iterator but I cant redefine it (I still have poor knowledge about jsp but I still improving it :)) What do You mind when You wrote &quot;iterator is not the best choice&quot; ? Could You explain it to me? :)","body":"I trying to understand the idea of dynamic list in java. A few weeks ago I have a problem with session variable on jsp oage. From EL and taglibs I can use a method of iterator but I cant redefine it (I still have poor knowledge about jsp but I still improving it :)) What do You mind when You wrote &quot;iterator is not the best choice&quot; ? Could You explain it to me? :)"}],"answers":[{"comments":[{"owner":{"account_id":285969,"reputation":12256,"user_id":584947,"accept_rate":92,"display_name":"fIwJlxSzApHEZIl"},"score":3,"creation_date":1416001685,"post_id":13689311,"comment_id":42422974,"body_markdown":"awesome. it&#39;s not immediately obvious that this call doesn&#39;t just return the same reference to the iterator that you&#39;re already using. But I guess looking into the source would&#39;ve solved that answer as well. Here&#39;s a link for anyone curious as this is a habit I&#39;m trying to be better about: http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.listIterator%28%29","body":"awesome. it&#39;s not immediately obvious that this call doesn&#39;t just return the same reference to the iterator that you&#39;re already using. But I guess looking into the source would&#39;ve solved that answer as well. Here&#39;s a link for anyone curious as this is a habit I&#39;m trying to be better about: <a href=\"http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.listIterator%28%29\" rel=\"nofollow noreferrer\">grepcode.com/file/repository.grepcode.com/java/root/jdk/open&zwnj;&#8203;jdk/&hellip;</a>"}],"tags":[],"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"comment_count":1,"down_vote_count":0,"up_vote_count":65,"is_accepted":false,"score":65,"last_activity_date":1354558852,"creation_date":1354558852,"answer_id":13689311,"question_id":13689288,"body_markdown":"You can call `listIterator` method again to get an instance of iterator pointing at beginning of list:\r\n\r\n    iter = list.listIterator();","title":"java- reset list iterator to first element of the list","body":"<p>You can call <code>listIterator</code> method again to get an instance of iterator pointing at beginning of list:</p>\n\n<pre><code>iter = list.listIterator();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2349596,"reputation":196,"user_id":2058834,"display_name":"raceworm"},"score":7,"creation_date":1360531535,"post_id":13689355,"comment_id":20732203,"body_markdown":"when deleting and inserting mainly to front then LinkedList is faster.","body":"when deleting and inserting mainly to front then LinkedList is faster."},{"owner":{"account_id":2143607,"reputation":4606,"user_id":1901744,"accept_rate":74,"display_name":"Sohaib"},"score":4,"creation_date":1465804624,"post_id":13689355,"comment_id":63035633,"body_markdown":"Even removing items from the middle is faster in case of LinkedList. That is if you are iterating through and removing items with iterator.remove(). ArrayList would necessitate shifting of the remaining items.","body":"Even removing items from the middle is faster in case of LinkedList. That is if you are iterating through and removing items with iterator.remove(). ArrayList would necessitate shifting of the remaining items."},{"owner":{"account_id":1005212,"reputation":28568,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"score":0,"creation_date":1465828883,"post_id":13689355,"comment_id":63051355,"body_markdown":"@Sohaib, yes mainly it depends on the size of the list. Up to a specific number of elements System.arraycopy, which internal uses C - memcopy  , which is used to shift the array is faster. Advanced implementation switch the underlying implementation depoending on element size.","body":"@Sohaib, yes mainly it depends on the size of the list. Up to a specific number of elements System.arraycopy, which internal uses C - memcopy  , which is used to shift the array is faster. Advanced implementation switch the underlying implementation depoending on element size."}],"tags":[],"owner":{"account_id":1005212,"reputation":28568,"user_id":1019167,"accept_rate":92,"display_name":"AlexWien"},"comment_count":3,"down_vote_count":3,"up_vote_count":29,"is_accepted":true,"score":26,"last_activity_date":1384203283,"creation_date":1354559024,"answer_id":13689355,"question_id":13689288,"body_markdown":"Best would be not using `LinkedList` at all, usually it is slower in all disciplines, and less handy. (When mainly inserting/deleting to the front, especially for big arrays LinkedList is faster)\r\n\r\nUse `ArrayList`, and iterate with \r\n\r\n    int len = list.size();\r\n    for (int i = 0; i &lt; len; i++) {\r\n      Element ele = list.get(i);\r\n    }\r\n\r\nReset is trivial, just loop again.&lt;br&gt;\r\nIf you insist on using an iterator,  then you have to use a new iterator:\r\n\r\n    iter = list.listIterator();\r\n\r\n(I saw only once in my life an advantage of LinkedList: i could loop through whith a while loop and remove the first element)","title":"java- reset list iterator to first element of the list","body":"<p>Best would be not using <code>LinkedList</code> at all, usually it is slower in all disciplines, and less handy. (When mainly inserting/deleting to the front, especially for big arrays LinkedList is faster)</p>\n\n<p>Use <code>ArrayList</code>, and iterate with </p>\n\n<pre><code>int len = list.size();\nfor (int i = 0; i &lt; len; i++) {\n  Element ele = list.get(i);\n}\n</code></pre>\n\n<p>Reset is trivial, just loop again.<br>\nIf you insist on using an iterator,  then you have to use a new iterator:</p>\n\n<pre><code>iter = list.listIterator();\n</code></pre>\n\n<p>(I saw only once in my life an advantage of LinkedList: i could loop through whith a while loop and remove the first element)</p>\n"},{"comments":[{"owner":{"account_id":11434115,"reputation":2221,"user_id":8382028,"display_name":"ViaTech"},"score":0,"creation_date":1524680427,"post_id":27981306,"comment_id":87073963,"body_markdown":"Hmm @ryenus...I like your idea to iterate backwards from the last element using **hasPrevious()** and **previous()** after the &#39;forward&#39; iteration has occurred. That seems like a perfect solution if you need to use the same iterator instance (not sure why you&#39;d actually need need to use the same instance over and over though). I am curious if looping back to the start of the iteration is less expensive than creating a new iterator instance, but I guess that would also be somewhat dependent on the size of the list.","body":"Hmm @ryenus...I like your idea to iterate backwards from the last element using <b>hasPrevious()</b> and <b>previous()</b> after the &#39;forward&#39; iteration has occurred. That seems like a perfect solution if you need to use the same iterator instance (not sure why you&#39;d actually need need to use the same instance over and over though). I am curious if looping back to the start of the iteration is less expensive than creating a new iterator instance, but I guess that would also be somewhat dependent on the size of the list."}],"tags":[],"owner":{"account_id":256670,"reputation":16061,"user_id":537554,"display_name":"ryenus"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1421497976,"creation_date":1421402115,"answer_id":27981306,"question_id":13689288,"body_markdown":"If the order doesn&#39;t matter, we can re-iterate **backward** with the same iterator using the `hasPrevious()` and `previous()` methods:\r\n\r\n&lt;!-- language-all: java --&gt;\r\n\r\n    ListIterator&lt;T&gt; lit = myList.listIterator(); // create just one iterator\r\n\r\nInitially the iterator sits at the beginning, we do *forward* iteration:\r\n\r\n    while (lit.hasNext()) process(lit.next()); // begin -&gt; end\r\n\r\nThen the iterator sits at the end, we can do **backward** iteration:\r\n\r\n    while (lit.hasPrevious()) process2(lit.previous()); // end -&gt; begin\r\n\r\n\r\n","title":"java- reset list iterator to first element of the list","body":"<p>If the order doesn't matter, we can re-iterate <strong>backward</strong> with the same iterator using the <code>hasPrevious()</code> and <code>previous()</code> methods:</p>\n\n\n\n<pre class=\"lang-java prettyprint-override\"><code>ListIterator&lt;T&gt; lit = myList.listIterator(); // create just one iterator\n</code></pre>\n\n<p>Initially the iterator sits at the beginning, we do <em>forward</em> iteration:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>while (lit.hasNext()) process(lit.next()); // begin -&gt; end\n</code></pre>\n\n<p>Then the iterator sits at the end, we can do <strong>backward</strong> iteration:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>while (lit.hasPrevious()) process2(lit.previous()); // end -&gt; begin\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3209105,"reputation":1422,"user_id":2709454,"display_name":"xpusostomos"},"score":1,"creation_date":1641557758,"post_id":28777539,"comment_id":124840715,"body_markdown":"That sounds like a quirk you discovered rather than something guaranteed by the interface.","body":"That sounds like a quirk you discovered rather than something guaranteed by the interface."},{"owner":{"account_id":5535,"reputation":778,"user_id":8960,"accept_rate":78,"display_name":"Geoff Moller"},"score":0,"creation_date":1668717232,"post_id":28777539,"comment_id":131480658,"body_markdown":"&quot;Returns an iterable whose iterators cycle indefinitely over the elements of iterable&quot;\nhttps://guava.dev/releases/20.0-rc1/api/docs/com/google/common/collect/Iterables.html#cycle-java.lang.Iterable-","body":"&quot;Returns an iterable whose iterators cycle indefinitely over the elements of iterable&quot; <a href=\"https://guava.dev/releases/20.0-rc1/api/docs/com/google/common/collect/Iterables.html#cycle-java.lang.Iterable-\" rel=\"nofollow noreferrer\">guava.dev/releases/20.0-rc1/api/docs/com/google/common/colle&zwnj;&#8203;ct/&hellip;</a>"}],"tags":[],"owner":{"account_id":310422,"reputation":485,"user_id":623388,"accept_rate":75,"display_name":"tkane2000"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1425091586,"creation_date":1425091586,"answer_id":28777539,"question_id":13689288,"body_markdown":"This is an alternative solution, but one could argue it doesn&#39;t add enough value to make it worth it:\r\n\r\n    import com.google.common.collect.Iterables;\r\n    ...\r\n    Iterator&lt;String&gt; iter = Iterables.cycle(list).iterator();\r\n    if(iter.hasNext()) {\r\n        str = iter.next();\r\n    }\r\n\r\nCalling hasNext() will reset the iterator cursor to the beginning if it&#39;s a the end.\r\n","title":"java- reset list iterator to first element of the list","body":"<p>This is an alternative solution, but one could argue it doesn't add enough value to make it worth it:</p>\n\n<pre><code>import com.google.common.collect.Iterables;\n...\nIterator&lt;String&gt; iter = Iterables.cycle(list).iterator();\nif(iter.hasNext()) {\n    str = iter.next();\n}\n</code></pre>\n\n<p>Calling hasNext() will reset the iterator cursor to the beginning if it's a the end.</p>\n"},{"tags":[],"owner":{"account_id":1710481,"reputation":22873,"user_id":1568658,"accept_rate":82,"display_name":"Eric"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1546158215,"creation_date":1546158215,"answer_id":53976170,"question_id":13689288,"body_markdown":"Calling `iterator()` on a Collection impl, probably would get a new Iterator on each call.\r\n\r\nThus, you can simply call `iterator()` again to get a new one.\r\n\r\n---\r\nCode\r\n---\r\n\r\n**IteratorLearn.java**\r\n\r\n    \r\n    import org.testng.Assert;\r\n    import org.testng.annotations.Test;\r\n    \r\n    import java.util.Collection;\r\n    import java.util.HashSet;\r\n    import java.util.Iterator;\r\n    \r\n    /**\r\n     * Iterator learn.\r\n     *\r\n     * @author eric\r\n     * @date 12/30/18 4:03 PM\r\n     */\r\n    public class IteratorLearn {\r\n        @Test\r\n        public void test() {\r\n            Collection&lt;Integer&gt; c = new HashSet&lt;&gt;();\r\n            for (int i = 0; i &lt; 10; i++) {\r\n                c.add(i);\r\n            }\r\n    \r\n            Iterator it;\r\n    \r\n            // iterate,\r\n            it = c.iterator();\r\n            System.out.println(&quot;\\niterate:&quot;);\r\n            while (it.hasNext()) {\r\n                System.out.printf(&quot;\\t%d\\n&quot;, it.next());\r\n            }\r\n            Assert.assertFalse(it.hasNext());\r\n    \r\n            // consume,\r\n            it = c.iterator();\r\n            System.out.println(&quot;\\nconsume elements:&quot;);\r\n            it.forEachRemaining(ele -&gt; System.out.printf(&quot;\\t%d\\n&quot;, ele));\r\n            Assert.assertFalse(it.hasNext());\r\n        }\r\n    }\r\n\r\n\r\n**Output:**\r\n\r\n    iterate:\r\n        0\r\n        1\r\n        2\r\n        3\r\n        4\r\n        5\r\n        6\r\n        7\r\n        8\r\n        9\r\n\r\n    consume elements:\r\n        0\r\n        1\r\n        2\r\n        3\r\n        4\r\n        5\r\n        6\r\n        7\r\n        8\r\n        9\r\n","title":"java- reset list iterator to first element of the list","body":"<p>Calling <code>iterator()</code> on a Collection impl, probably would get a new Iterator on each call.</p>\n\n<p>Thus, you can simply call <code>iterator()</code> again to get a new one.</p>\n\n<hr>\n\n<h2>Code</h2>\n\n<p><strong>IteratorLearn.java</strong></p>\n\n<pre><code>import org.testng.Assert;\nimport org.testng.annotations.Test;\n\nimport java.util.Collection;\nimport java.util.HashSet;\nimport java.util.Iterator;\n\n/**\n * Iterator learn.\n *\n * @author eric\n * @date 12/30/18 4:03 PM\n */\npublic class IteratorLearn {\n    @Test\n    public void test() {\n        Collection&lt;Integer&gt; c = new HashSet&lt;&gt;();\n        for (int i = 0; i &lt; 10; i++) {\n            c.add(i);\n        }\n\n        Iterator it;\n\n        // iterate,\n        it = c.iterator();\n        System.out.println(\"\\niterate:\");\n        while (it.hasNext()) {\n            System.out.printf(\"\\t%d\\n\", it.next());\n        }\n        Assert.assertFalse(it.hasNext());\n\n        // consume,\n        it = c.iterator();\n        System.out.println(\"\\nconsume elements:\");\n        it.forEachRemaining(ele -&gt; System.out.printf(\"\\t%d\\n\", ele));\n        Assert.assertFalse(it.hasNext());\n    }\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>iterate:\n    0\n    1\n    2\n    3\n    4\n    5\n    6\n    7\n    8\n    9\n\nconsume elements:\n    0\n    1\n    2\n    3\n    4\n    5\n    6\n    7\n    8\n    9\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2485164,"reputation":2314,"user_id":2163727,"accept_rate":80,"display_name":"MasterHD"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1567446694,"creation_date":1562068988,"answer_id":56852039,"question_id":13689288,"body_markdown":"What you may actually want to use is an `Iterable` that can return a fresh `Iterator` multiple times by calling `iterator()`.\r\n\r\n    //A function that needs to iterate multiple times can be given one Iterable:\r\n    public void func(Iterable&lt;Type&gt; ible) {\r\n\t\tIterator&lt;Type&gt; it = ible.iterator(); //Gets an iterator\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tit.next();\r\n        }\r\n        it = ible.iterator(); //Gets a NEW iterator, also from the beginning\r\n\t\twhile (it.hasNext()) {\r\n\t\t\tit.next();\r\n        }\r\n    }\r\n\r\nYou must define what the `iterator()` method does just once beforehand:\r\n\r\n    void main() {\r\n        LinkedList&lt;String&gt; list; //This could be any type of object that has an iterator\r\n        //Define an Iterable that knows how to retrieve a fresh iterator\r\n\t\tIterable&lt;Type&gt; ible = new Iterable&lt;Type&gt;() {\r\n            @Override\r\n\t\t    public Iterator&lt;Type&gt; iterator() {\r\n\t\t        return list.listIterator(); //Define how to get a fresh iterator from any object\r\n\t\t    }\r\n\t\t};\r\n        //Now with a single instance of an Iterable,\r\n        func(ible); //you can iterate through it multiple times.\r\n    }","title":"java- reset list iterator to first element of the list","body":"<p>What you may actually want to use is an <code>Iterable</code> that can return a fresh <code>Iterator</code> multiple times by calling <code>iterator()</code>.</p>\n\n<pre><code>//A function that needs to iterate multiple times can be given one Iterable:\npublic void func(Iterable&lt;Type&gt; ible) {\n    Iterator&lt;Type&gt; it = ible.iterator(); //Gets an iterator\n    while (it.hasNext()) {\n        it.next();\n    }\n    it = ible.iterator(); //Gets a NEW iterator, also from the beginning\n    while (it.hasNext()) {\n        it.next();\n    }\n}\n</code></pre>\n\n<p>You must define what the <code>iterator()</code> method does just once beforehand:</p>\n\n<pre><code>void main() {\n    LinkedList&lt;String&gt; list; //This could be any type of object that has an iterator\n    //Define an Iterable that knows how to retrieve a fresh iterator\n    Iterable&lt;Type&gt; ible = new Iterable&lt;Type&gt;() {\n        @Override\n        public Iterator&lt;Type&gt; iterator() {\n            return list.listIterator(); //Define how to get a fresh iterator from any object\n        }\n    };\n    //Now with a single instance of an Iterable,\n    func(ible); //you can iterate through it multiple times.\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20225378,"reputation":13,"user_id":14833456,"display_name":"Henrique Krever"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1627344904,"creation_date":1627344904,"answer_id":68537581,"question_id":13689288,"body_markdown":"What you can do is, set the iterator to the first position mannualy with a while loop.\r\n\r\n    while(iter.hasPrevious())\r\n    {\r\n        iter.previous();\r\n    }\r\nwhen you get out of the loop you will have your iterator at the position 0\r\n\r\n###### sorry any grammar mistakes ######","title":"java- reset list iterator to first element of the list","body":"<p>What you can do is, set the iterator to the first position mannualy with a while loop.</p>\n<pre><code>while(iter.hasPrevious())\n{\n    iter.previous();\n}\n</code></pre>\n<p>when you get out of the loop you will have your iterator at the position 0</p>\n<h6 id=\"sorry-any-grammar-mistakes-ydm0\">sorry any grammar mistakes</h6>\n"},{"tags":[],"owner":{"account_id":27791953,"reputation":1,"user_id":21218222,"display_name":"Harendra Pratap Singh Sisodia"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676456110,"creation_date":1676456110,"answer_id":75458265,"question_id":13689288,"body_markdown":"Well some of the version of java does not have a reset method for the iterator, so we are required to use the multiple iterator for number of use cases, which ultimately increases the memory consumption.\r\n\r\nso it&#39;s simple way to use the same iterator again if needed by declaring a global function and pass the collection as argument.\r\n\r\nfor eg.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/459UL.jpg\r\n\r\n\r\nfor eg (Written program)\r\npackage com.javalearn;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Iterator;\r\n\r\npublic class Java_Learn {\r\n\r\n        public static void main(String[] args) {\r\n                ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\r\n                list.add(&quot;Hello&quot;);\r\n                list.add(&quot;World&quot;);\r\n                list.add(&quot;It&#39;s&quot;);\r\n                list.add(&quot;me.&quot;);\r\n\r\n                iter(list);\r\n\r\n                System.out.println(list.size());\r\n                System.out.println(list.indexOf(&quot;me.&quot;));\r\n                System.out.println(list.remove(3));\r\n\r\n                iter(list);\r\n        }\r\n        static void iter(ArrayList&lt;String&gt; arr){\r\n                Iterator itr = arr.iterator();\r\n                while(itr.hasNext()){\r\n                        System.out.println(itr.next());\r\n                }\r\n        }\r\n}\r\n","title":"java- reset list iterator to first element of the list","body":"<p>Well some of the version of java does not have a reset method for the iterator, so we are required to use the multiple iterator for number of use cases, which ultimately increases the memory consumption.</p>\n<p>so it's simple way to use the same iterator again if needed by declaring a global function and pass the collection as argument.</p>\n<p>for eg.\n<a href=\"https://i.stack.imgur.com/459UL.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>for eg (Written program)\npackage com.javalearn;</p>\n<p>import java.util.ArrayList;\nimport java.util.Iterator;</p>\n<p>public class Java_Learn {</p>\n<pre><code>    public static void main(String[] args) {\n            ArrayList&lt;String&gt; list = new ArrayList&lt;String&gt;();\n            list.add(&quot;Hello&quot;);\n            list.add(&quot;World&quot;);\n            list.add(&quot;It's&quot;);\n            list.add(&quot;me.&quot;);\n\n            iter(list);\n\n            System.out.println(list.size());\n            System.out.println(list.indexOf(&quot;me.&quot;));\n            System.out.println(list.remove(3));\n\n            iter(list);\n    }\n    static void iter(ArrayList&lt;String&gt; arr){\n            Iterator itr = arr.iterator();\n            while(itr.hasNext()){\n                    System.out.println(itr.next());\n            }\n    }\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":1512818,"reputation":1873,"user_id":1414499,"accept_rate":89,"display_name":"Krzysztof"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142343,"favorite_count":0,"down_vote_count":1,"up_vote_count":56,"accepted_answer_id":13689355,"answer_count":8,"score":55,"last_activity_date":1684827818,"creation_date":1354558741,"question_id":13689288,"body_markdown":"I need to know how to &quot;reset&quot; LinkedList iterator to its first element.\r\n\r\nFor example:\r\n\r\n    LinkedList&lt;String&gt; list;\r\n    Iterator iter=list.listIterator;\r\n    iter.next();\r\n    iter.next();\r\n\r\nOver and over again and after many moves of the iterator, I need to &quot;reset&quot; the position of the iterator.\r\n\r\nI want to ask how I can &quot;reset&quot; my iterator to the first element.\r\n\r\nI know that I can get list iterator of the first element in this way:\r\n\r\n    iter= list.listIterator(1);\r\n\r\nIs this the best solution? Or maybe I missed something in Oracle docs? \r\n\r\n \r\n\r\n","title":"java- reset list iterator to first element of the list","body":"<p>I need to know how to &quot;reset&quot; LinkedList iterator to its first element.</p>\n<p>For example:</p>\n<pre><code>LinkedList&lt;String&gt; list;\nIterator iter=list.listIterator;\niter.next();\niter.next();\n</code></pre>\n<p>Over and over again and after many moves of the iterator, I need to &quot;reset&quot; the position of the iterator.</p>\n<p>I want to ask how I can &quot;reset&quot; my iterator to the first element.</p>\n<p>I know that I can get list iterator of the first element in this way:</p>\n<pre><code>iter= list.listIterator(1);\n</code></pre>\n<p>Is this the best solution? Or maybe I missed something in Oracle docs?</p>\n"},{"tags":["java","profiler","yourkit"],"comments":[{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1684777398,"post_id":76307975,"comment_id":134563305,"body_markdown":"By the way: both methods you list are instance methods - `&quot;abca&quot;.lastIndexOf(&#39;a&#39;)` is 3. Perhaps base your checks on something like &quot;String.format()&quot; which is static.","body":"By the way: both methods you list are instance methods - <code>&quot;abca&quot;.lastIndexOf(&#39;a&#39;)</code> is 3. Perhaps base your checks on something like &quot;String.format()&quot; which is static."}],"owner":{"account_id":14429973,"reputation":2483,"user_id":10423604,"display_name":"Volodya Lombrozo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684827748,"creation_date":1684771061,"question_id":76307975,"body_markdown":"I&#39;m currently using YourKit Java Profiler to gather information about the total number of invoked methods during profiling. However, I&#39;m facing difficulty in distinguishing between static methods and instance methods.\r\n\r\nWhen I perform [CPU profiling (tracing)](https://www.yourkit.com/docs/java/help/tracing.jsp), I obtain a list of methods, but there seems to be no apparent way to identify whether a method is static or instance-based. For instance, here are two sample entries from the method list:\r\n\r\n- Instance `java.lang.String.charAt(int) String.java`\r\n- Static `java.lang.String.lastIndexOf(byte[], byte, int, String, int) String.java`\r\n\r\nBoth methods appear identical and lack any indication of their type (static or instance). I have extensively searched through the official documentation provided by YourKit, but have been unable to find any relevant information on this matter.\r\n\r\nIs it possible to differentiate between static and instance methods during profiling using YourKit? If so, what approach or feature should I utilize to achieve this? I would greatly appreciate any insights or guidance regarding this issue.","title":"How to differentiate between static and instance methods using YourKit Java Profiler?","body":"<p>I'm currently using YourKit Java Profiler to gather information about the total number of invoked methods during profiling. However, I'm facing difficulty in distinguishing between static methods and instance methods.</p>\n<p>When I perform <a href=\"https://www.yourkit.com/docs/java/help/tracing.jsp\" rel=\"nofollow noreferrer\">CPU profiling (tracing)</a>, I obtain a list of methods, but there seems to be no apparent way to identify whether a method is static or instance-based. For instance, here are two sample entries from the method list:</p>\n<ul>\n<li>Instance <code>java.lang.String.charAt(int) String.java</code></li>\n<li>Static <code>java.lang.String.lastIndexOf(byte[], byte, int, String, int) String.java</code></li>\n</ul>\n<p>Both methods appear identical and lack any indication of their type (static or instance). I have extensively searched through the official documentation provided by YourKit, but have been unable to find any relevant information on this matter.</p>\n<p>Is it possible to differentiate between static and instance methods during profiling using YourKit? If so, what approach or feature should I utilize to achieve this? I would greatly appreciate any insights or guidance regarding this issue.</p>\n"},{"tags":["java","android","json","instagram","instagram-api"],"answers":[{"comments":[{"owner":{"account_id":13467879,"reputation":360,"user_id":9717489,"display_name":"Yash Arora"},"score":0,"creation_date":1525008055,"post_id":50087005,"comment_id":87189754,"body_markdown":"And how to get user id from User Name ?","body":"And how to get user id from User Name ?"},{"owner":{"account_id":7096830,"reputation":3555,"user_id":5430055,"display_name":"Ishara Madhawa"},"score":0,"creation_date":1525008468,"post_id":50087005,"comment_id":87189901,"body_markdown":"Easily Get USER ID and User Details using this: \n\n`https://api.instagram.com/v1/users/search?q=[ USER NAME ]&amp;client_id=[ YOU APP Client ID ]` for an example :\n\n\n\n`https://api.instagram.com/v1/users/search?q=isharamadhawa&amp;client_id=[enter your id]`","body":"Easily Get USER ID and User Details using this:   <code>https:&#47;&#47;api.instagram.com&#47;v1&#47;users&#47;search?q=[ USER NAME ]&amp;client_id=[ YOU APP Client ID ]</code> for an example :    <code>https:&#47;&#47;api.instagram.com&#47;v1&#47;users&#47;search?q=isharamadhawa&amp;cl&zwnj;&#8203;ient_id=[enter your id]</code>"},{"owner":{"account_id":7096830,"reputation":3555,"user_id":5430055,"display_name":"Ishara Madhawa"},"score":0,"creation_date":1525011763,"post_id":50087005,"comment_id":87190943,"body_markdown":"Do you have a client_id?","body":"Do you have a client_id?"},{"owner":{"account_id":13467879,"reputation":360,"user_id":9717489,"display_name":"Yash Arora"},"score":0,"creation_date":1525011869,"post_id":50087005,"comment_id":87190976,"body_markdown":"Yes I have Client ID and Access Tocken","body":"Yes I have Client ID and Access Tocken"},{"owner":{"account_id":13467879,"reputation":360,"user_id":9717489,"display_name":"Yash Arora"},"score":0,"creation_date":1525011976,"post_id":50087005,"comment_id":87191007,"body_markdown":"&quot;error_message&quot;: &quot;The access_token provided is invalid.&quot;","body":"&quot;error_message&quot;: &quot;The access_token provided is invalid.&quot;"},{"owner":{"account_id":7096830,"reputation":3555,"user_id":5430055,"display_name":"Ishara Madhawa"},"score":0,"creation_date":1525012284,"post_id":50087005,"comment_id":87191120,"body_markdown":"Check [this](https://stackoverflow.com/questions/37609974/instagram-api-the-access-token-provided-is-invalid)","body":"Check <a href=\"https://stackoverflow.com/questions/37609974/instagram-api-the-access-token-provided-is-invalid\">this</a>"},{"owner":{"account_id":13467879,"reputation":360,"user_id":9717489,"display_name":"Yash Arora"},"score":0,"creation_date":1525012530,"post_id":50087005,"comment_id":87191202,"body_markdown":"I have added public content scope while getting token and its in Sandbox mode","body":"I have added public content scope while getting token and its in Sandbox mode"},{"owner":{"account_id":7096830,"reputation":3555,"user_id":5430055,"display_name":"Ishara Madhawa"},"score":1,"creation_date":1525012788,"post_id":50087005,"comment_id":87191280,"body_markdown":"You should post another Question regarding your specific issue. I think you have received an answer for what you have posted here.","body":"You should post another Question regarding your specific issue. I think you have received an answer for what you have posted here."},{"owner":{"account_id":14333478,"reputation":281,"user_id":10353652,"display_name":"Vikas chhabra"},"score":0,"creation_date":1629317908,"post_id":50087005,"comment_id":121658277,"body_markdown":"Blocked by cors","body":"Blocked by cors"},{"owner":{"account_id":393857,"reputation":5191,"user_id":755934,"accept_rate":73,"display_name":"Daniel Kats"},"score":1,"creation_date":1631304814,"post_id":50087005,"comment_id":122195402,"body_markdown":"@IsharaMadhawa This answer is no longer accurate since this API no longer provides `full_name` or `profile_picture` fields as per https://developers.facebook.com/docs/instagram-basic-display-api/reference/user. The link to the API in the answer is also dead.","body":"@IsharaMadhawa This answer is no longer accurate since this API no longer provides <code>full_name</code> or <code>profile_picture</code> fields as per <a href=\"https://developers.facebook.com/docs/instagram-basic-display-api/reference/user\" rel=\"nofollow noreferrer\">developers.facebook.com/docs/instagram-basic-display-api/&hellip;</a>. The link to the API in the answer is also dead."}],"tags":[],"owner":{"account_id":7096830,"reputation":3555,"user_id":5430055,"display_name":"Ishara Madhawa"},"comment_count":10,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1525007917,"creation_date":1525007917,"answer_id":50087005,"question_id":50086945,"body_markdown":"Using the [Instagram API users endpoint][1] (`https://api.instagram.com/v1/users/{user-id}/?access_token=ACCESS-TOKEN` ) you will receive a response like this one:\r\n\r\n    {\r\n        &quot;data&quot;: {\r\n            &quot;id&quot;: &quot;1574083&quot;,\r\n            &quot;username&quot;: &quot;snoopdogg&quot;,\r\n            &quot;full_name&quot;: &quot;Snoop Dogg&quot;,\r\n            &quot;profile_picture&quot;: &quot;http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg&quot;,\r\n            &quot;bio&quot;: &quot;This is my bio&quot;,\r\n            &quot;website&quot;: &quot;http://snoopdogg.com&quot;,\r\n            &quot;counts&quot;: {\r\n                &quot;media&quot;: 1320,\r\n                &quot;follows&quot;: 420,\r\n                &quot;followed_by&quot;: 3410\r\n            }\r\n    }\r\n\r\n\r\nUsing this you can get the profile picture.\r\n  [1]: https://instagram.com/developer/endpoints/users/#get_users\r\n","title":"How to get Instagram Profile Picture?","body":"<p>Using the <a href=\"https://instagram.com/developer/endpoints/users/#get_users\" rel=\"nofollow noreferrer\">Instagram API users endpoint</a> (<code>https://api.instagram.com/v1/users/{user-id}/?access_token=ACCESS-TOKEN</code> ) you will receive a response like this one:</p>\n\n<pre><code>{\n    \"data\": {\n        \"id\": \"1574083\",\n        \"username\": \"snoopdogg\",\n        \"full_name\": \"Snoop Dogg\",\n        \"profile_picture\": \"http://distillery.s3.amazonaws.com/profiles/profile_1574083_75sq_1295469061.jpg\",\n        \"bio\": \"This is my bio\",\n        \"website\": \"http://snoopdogg.com\",\n        \"counts\": {\n            \"media\": 1320,\n            \"follows\": 420,\n            \"followed_by\": 3410\n        }\n}\n</code></pre>\n\n<p>Using this you can get the profile picture.</p>\n"},{"comments":[{"owner":{"account_id":18036463,"reputation":466,"user_id":13109762,"display_name":"Shrijan Regmi"},"score":2,"creation_date":1621777184,"post_id":57329107,"comment_id":119592414,"body_markdown":"It is not giving me data if I am not logged into Instagram","body":"It is not giving me data if I am not logged into Instagram"},{"owner":{"account_id":10148917,"reputation":2458,"user_id":7496198,"display_name":"Chhaileng"},"score":0,"creation_date":1621780401,"post_id":57329107,"comment_id":119593347,"body_markdown":"@ShrijanRegmi sometimes you need to specify some headers like User-Agent. Eg. `curl -s -H &#39;User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 12_3_1 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 Instagram 105.0.0.11.118 (iPhone11,8; iOS 12_3_1; en_US; en-US; scale=2.00; 828x1792; 165586599)&#39; &#39;https://www.instagram.com/USERNAME/?__a=1&#39;`","body":"@ShrijanRegmi sometimes you need to specify some headers like User-Agent. Eg. <code>curl -s -H &#39;User-Agent: Mozilla&#47;5.0 (iPhone; CPU iPhone OS 12_3_1 like Mac OS X) AppleWebKit&#47;605.1.15 (KHTML, like Gecko) Mobile&#47;15E148 Instagram 105.0.0.11.118 (iPhone11,8; iOS 12_3_1; en_US; en-US; scale=2.00; 828x1792; 165586599)&#39; &#39;https:&#47;&#47;www.instagram.com&#47;USERNAME&#47;?__a=1&#39;</code>"},{"owner":{"account_id":393857,"reputation":5191,"user_id":755934,"accept_rate":73,"display_name":"Daniel Kats"},"score":1,"creation_date":1631304477,"post_id":57329107,"comment_id":122195309,"body_markdown":"Neither of these appear to work anymore as of Sep 10, 2021. Perhaps instructions are missing from the answer but more likely instagram has disallowed these APIs","body":"Neither of these appear to work anymore as of Sep 10, 2021. Perhaps instructions are missing from the answer but more likely instagram has disallowed these APIs"},{"owner":{"account_id":13155771,"reputation":192,"user_id":9502991,"display_name":"Krupali Shingala"},"score":0,"creation_date":1650887744,"post_id":57329107,"comment_id":127221964,"body_markdown":"https://www.instagram.com/USERNAME/?__a=1  This is not working in my app. This link returns as error HTML code,","body":"<a href=\"https://www.instagram.com/USERNAME/?__a=1\" rel=\"nofollow noreferrer\">instagram.com/USERNAME/?__a=1</a>  This is not working in my app. This link returns as error HTML code,"},{"owner":{"account_id":20130445,"reputation":61,"user_id":14762883,"display_name":"unknown989"},"score":3,"creation_date":1654463522,"post_id":57329107,"comment_id":128091608,"body_markdown":"as of recently instagram doesn&#39;t allow the use of the public API, I&#39;ve tried it for multiple times all it returns is a redirect to the actual profile","body":"as of recently instagram doesn&#39;t allow the use of the public API, I&#39;ve tried it for multiple times all it returns is a redirect to the actual profile"},{"owner":{"account_id":16282725,"reputation":2256,"user_id":11758183,"display_name":"Vikrant Bhat"},"score":1,"creation_date":1680712517,"post_id":57329107,"comment_id":133946019,"body_markdown":"use https://www.instagram.com/&lt;insta-username&gt;/?__a=1&amp;__d=1, it should work.","body":"use <a href=\"https://www.instagram.com/&lt;insta-username&gt;/?__a=1&amp;__d=1\" rel=\"nofollow noreferrer\">instagram.com/&lt;insta-username&gt;/?__a=1&amp;__d=1</a>, it should work."},{"owner":{"account_id":15830307,"reputation":1432,"user_id":11421839,"display_name":"Terry Windwalker"},"score":0,"creation_date":1686322795,"post_id":57329107,"comment_id":134787530,"body_markdown":"The currently latest noted answer https://www.instagram.com/USERNAME/?__a=1&amp;__d=1 does not work for me since it blocks my access via server. It seems to be a CORS limit blocking data access from other servers (including Postman).","body":"The currently latest noted answer <a href=\"https://www.instagram.com/USERNAME/?__a=1&amp;__d=1\" rel=\"nofollow noreferrer\">instagram.com/USERNAME/?__a=1&amp;__d=1</a> does not work for me since it blocks my access via server. It seems to be a CORS limit blocking data access from other servers (including Postman)."},{"owner":{"account_id":15830307,"reputation":1432,"user_id":11421839,"display_name":"Terry Windwalker"},"score":0,"creation_date":1686473665,"post_id":57329107,"comment_id":134800925,"body_markdown":"OK, perhaps not CORS but it requires a token. It says `{&quot;message&quot;:&quot;Please wait a few minutes before you try again.&quot;,&quot;require_login&quot;:true,&quot;status&quot;:&quot;fail&quot;}` so probably a valid Instagram access token is required.","body":"OK, perhaps not CORS but it requires a token. It says <code>{&quot;message&quot;:&quot;Please wait a few minutes before you try again.&quot;,&quot;require_login&quot;:true,&quot;status&quot;:&quot;fail&quot;}</code> so probably a valid Instagram access token is required."}],"tags":[],"owner":{"account_id":10148917,"reputation":2458,"user_id":7496198,"display_name":"Chhaileng"},"comment_count":8,"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1684808967,"creation_date":1564758300,"answer_id":57329107,"question_id":50086945,"body_markdown":"By May 2023, to get Instagram profile URL via API, use this:\r\n\r\n[https://www.instagram.com/USERNAME/?__a=1&amp;__d=1][1]\r\n\r\n\r\n  [1]: https://www.instagram.com/USERNAME/?__a=1&amp;__d=1","title":"How to get Instagram Profile Picture?","body":"<p>By May 2023, to get Instagram profile URL via API, use this:</p>\n<p><a href=\"https://www.instagram.com/USERNAME/?__a=1&amp;__d=1\" rel=\"noreferrer\">https://www.instagram.com/USERNAME/?__a=1&amp;__d=1</a></p>\n"},{"comments":[{"owner":{"account_id":931209,"reputation":1170,"user_id":961064,"accept_rate":75,"display_name":"Olav Kokovkin"},"score":2,"creation_date":1575936769,"post_id":57668576,"comment_id":104726016,"body_markdown":"Question was tagged with Java and Android, this is HTML and Javascript","body":"Question was tagged with Java and Android, this is HTML and Javascript"},{"owner":{"account_id":5945872,"reputation":648,"user_id":4675392,"accept_rate":36,"display_name":"Rohit Nair"},"score":4,"creation_date":1619521863,"post_id":57668576,"comment_id":118925287,"body_markdown":"This won&#39;t work because of CORS issue.","body":"This won&#39;t work because of CORS issue."},{"owner":{"account_id":18036463,"reputation":466,"user_id":13109762,"display_name":"Shrijan Regmi"},"score":2,"creation_date":1621777221,"post_id":57668576,"comment_id":119592432,"body_markdown":"It is not giving me data if I am not logged into Instagram","body":"It is not giving me data if I am not logged into Instagram"}],"tags":[],"owner":{"account_id":7302345,"reputation":165,"user_id":5564584,"display_name":"Rodrigo Vieira"},"comment_count":3,"down_vote_count":3,"up_vote_count":17,"is_accepted":false,"score":14,"last_activity_date":1566886802,"creation_date":1566886323,"answer_id":57668576,"question_id":50086945,"body_markdown":"To get profile photo, use the function bellow:\r\n   \r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    function getPhoto(a) {\r\n      \r\n      // validation for instagram usernames\r\n      var regex = new RegExp(/^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/);\r\n      var validation = regex.test(a);\r\n\r\n      if(validation) {\r\n      \r\n        $.get(&quot;https://www.instagram.com/&quot;+a+&quot;/?__a=1&quot;)\r\n        .done(function(data) { \r\n\r\n          // getting the url\r\n          var photoURL = data[&quot;graphql&quot;][&quot;user&quot;][&quot;profile_pic_url_hd&quot;];\r\n\r\n          // update img element\r\n          $(&quot;#photoReturn&quot;).attr(&quot;src&quot;,photoURL)\r\n         \r\n         })\r\n        .fail(function() { \r\n          // code for 404 error \r\n          alert(&#39;Username was not found!&#39;)\r\n        })\r\n      \r\n      } else {\r\n      \r\n        alert(&#39;The username is invalid!&#39;)\r\n      }\r\n\r\n    }\r\n\r\n        \r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js&quot;&gt;&lt;/script&gt;\r\n\r\n    &lt;img src=&quot;&quot; id=&quot;photoReturn&quot;&gt;\r\n\r\n    &lt;br&gt;&lt;br&gt;\r\n\r\n    &lt;input type=&quot;text&quot; id=&quot;usernameInput&quot;&gt;\r\n\r\n    &lt;button onclick=&quot;getPhoto($(&#39;#usernameInput&#39;).val().trim())&quot;&gt;Get profile photo&lt;/button&gt;\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to get Instagram Profile Picture?","body":"<p>To get profile photo, use the function bellow:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function getPhoto(a) {\r\n  \r\n  // validation for instagram usernames\r\n  var regex = new RegExp(/^(?!.*\\.\\.)(?!.*\\.$)[^\\W][\\w.]{0,29}$/);\r\n  var validation = regex.test(a);\r\n\r\n  if(validation) {\r\n  \r\n    $.get(\"https://www.instagram.com/\"+a+\"/?__a=1\")\r\n    .done(function(data) { \r\n\r\n      // getting the url\r\n      var photoURL = data[\"graphql\"][\"user\"][\"profile_pic_url_hd\"];\r\n\r\n      // update img element\r\n      $(\"#photoReturn\").attr(\"src\",photoURL)\r\n     \r\n     })\r\n    .fail(function() { \r\n      // code for 404 error \r\n      alert('Username was not found!')\r\n    })\r\n  \r\n  } else {\r\n  \r\n    alert('The username is invalid!')\r\n  }\r\n\r\n}\r\n\r\n    </code></pre>\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\r\n\r\n&lt;img src=\"\" id=\"photoReturn\"&gt;\r\n\r\n&lt;br&gt;&lt;br&gt;\r\n\r\n&lt;input type=\"text\" id=\"usernameInput\"&gt;\r\n\r\n&lt;button onclick=\"getPhoto($('#usernameInput').val().trim())\"&gt;Get profile photo&lt;/button&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":13467879,"reputation":360,"user_id":9717489,"display_name":"Yash Arora"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52558,"favorite_count":0,"down_vote_count":2,"up_vote_count":29,"closed_date":1587198951,"answer_count":3,"score":27,"last_activity_date":1684827391,"creation_date":1525007521,"question_id":50086945,"body_markdown":"How to extract Instagram Profile picture using instagram API in android ?\r\nOr any other Method To extract Insta Profile Picture?\r\n ","title":"How to get Instagram Profile Picture?","body":"<p>How to extract Instagram Profile picture using instagram API in android ?\nOr any other Method To extract Insta Profile Picture?</p>\n"},{"tags":["java","graph-databases"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1684825834,"post_id":76311950,"comment_id":134569504,"body_markdown":"How an object is written is totally depending on it&#39;s `toString` implementation in your code, so in your case on the implementation of whatever `Object` is returned from your `GremlinResultSet`. As we don&#39;t see any implementation of parsing here, I can&#39;t tell if it&#39;s from the parsing part or from the output part.","body":"How an object is written is totally depending on it&#39;s <code>toString</code> implementation in your code, so in your case on the implementation of whatever <code>Object</code> is returned from your <code>GremlinResultSet</code>. As we don&#39;t see any implementation of parsing here, I can&#39;t tell if it&#39;s from the parsing part or from the output part."}],"answers":[{"tags":[],"owner":{"account_id":25445016,"reputation":647,"user_id":19247339,"display_name":"CreateLink Galaxybase"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684826312,"creation_date":1684826312,"answer_id":76312171,"question_id":76311950,"body_markdown":"Properties of type double, when written to a file after parsing, will become scientific notation. \r\nThe problem of this scientific notation is that java will automatically convert the data that is too big or too small to scientific notation.It can be solved by BigDecimal class of java.\r\n```\r\nString str=new BigDecimal(num+&quot;&quot;).toString().\r\n```\r\n\r\nFor your case, it can be optimized as follows:\r\n\r\n```\r\n            while (result.hasNext()) {\r\n                Object[] values = result.next();\r\n                for (int i = 0; i &lt; values.length; i++) {\r\n                    Object value = values[i];\r\n                    if (value instanceof Double) {\r\n                        String str = new BigDecimal(Double.toString((Double)value)).toString();\r\n                        fw.write(str);\r\n                    } else {\r\n                        fw.write(value.toString());\r\n                    }\r\n                    if (i &lt; values.length - 1) {\r\n                        fw.write(&quot;,&quot;);\r\n                    }\r\n                }\r\n                fw.write(&quot;\\n&quot;);\r\n            }\r\n```\r\n\r\n","title":"Why do property values appear in scientific notation when parsing and writing results after executing queries on Galaxybase with Java?","body":"<p>Properties of type double, when written to a file after parsing, will become scientific notation.\nThe problem of this scientific notation is that java will automatically convert the data that is too big or too small to scientific notation.It can be solved by BigDecimal class of java.</p>\n<pre><code>String str=new BigDecimal(num+&quot;&quot;).toString().\n</code></pre>\n<p>For your case, it can be optimized as follows:</p>\n<pre><code>            while (result.hasNext()) {\n                Object[] values = result.next();\n                for (int i = 0; i &lt; values.length; i++) {\n                    Object value = values[i];\n                    if (value instanceof Double) {\n                        String str = new BigDecimal(Double.toString((Double)value)).toString();\n                        fw.write(str);\n                    } else {\n                        fw.write(value.toString());\n                    }\n                    if (i &lt; values.length - 1) {\n                        fw.write(&quot;,&quot;);\n                    }\n                }\n                fw.write(&quot;\\n&quot;);\n            }\n</code></pre>\n"}],"owner":{"account_id":25445016,"reputation":647,"user_id":19247339,"display_name":"CreateLink Galaxybase"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76312171,"answer_count":1,"score":0,"last_activity_date":1684826312,"creation_date":1684824368,"question_id":76311950,"body_markdown":"Why do property values appear in scientific notation when parsing and writing the results returned to the client after executing algorithm queries in Java on Galaxybase? \r\n\r\nHere is the code I wrote：\r\n\r\n```\r\npublic class Test {\r\n    public static void main(String[] args) throws IOException {\r\n        GalaxyBaseClient client = new GalaxyBaseClient(&quot;localhost&quot;, 8180);\r\n\r\n        String query = &quot;g.V().hasLabel(&#39;person&#39;).has(&#39;age&#39;, gt(20)).values(&#39;name&#39;, &#39;age&#39;)&quot;;\r\n        GremlinResultSet result = client.submit(query);\r\n\r\n        FileWriter fw = null;\r\n        try {\r\n            fw = new FileWriter(&quot;test.csv&quot;);\r\n\r\n            String[] columnNames = {&quot;name&quot;, &quot;age&quot;};\r\n            for (int i = 0; i &lt; columnNames.length; i++) {\r\n                fw.write(columnNames[i]);\r\n                if (i &lt; columnNames.length - 1) {\r\n                    fw.write(&quot;,&quot;);\r\n                }\r\n            }\r\n            fw.write(&quot;\\n&quot;);\r\n\r\n            while (result.hasNext()) {\r\n                Object[] values = result.next();\r\n                for (int i = 0; i &lt; values.length; i++) {\r\n                    Object value = values[i];\r\n                    fw.write(value.toString());\r\n                    if (i &lt; values.length - 1) {\r\n                        fw.write(&quot;,&quot;);\r\n                    }\r\n                }\r\n                fw.write(&quot;\\n&quot;);\r\n            }\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        } finally {\r\n            if (fw != null) {\r\n                fw.close();\r\n            }\r\n            result.close();\r\n            client.close();\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Why do property values appear in scientific notation when parsing and writing results after executing queries on Galaxybase with Java?","body":"<p>Why do property values appear in scientific notation when parsing and writing the results returned to the client after executing algorithm queries in Java on Galaxybase?</p>\n<p>Here is the code I wrote：</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws IOException {\n        GalaxyBaseClient client = new GalaxyBaseClient(&quot;localhost&quot;, 8180);\n\n        String query = &quot;g.V().hasLabel('person').has('age', gt(20)).values('name', 'age')&quot;;\n        GremlinResultSet result = client.submit(query);\n\n        FileWriter fw = null;\n        try {\n            fw = new FileWriter(&quot;test.csv&quot;);\n\n            String[] columnNames = {&quot;name&quot;, &quot;age&quot;};\n            for (int i = 0; i &lt; columnNames.length; i++) {\n                fw.write(columnNames[i]);\n                if (i &lt; columnNames.length - 1) {\n                    fw.write(&quot;,&quot;);\n                }\n            }\n            fw.write(&quot;\\n&quot;);\n\n            while (result.hasNext()) {\n                Object[] values = result.next();\n                for (int i = 0; i &lt; values.length; i++) {\n                    Object value = values[i];\n                    fw.write(value.toString());\n                    if (i &lt; values.length - 1) {\n                        fw.write(&quot;,&quot;);\n                    }\n                }\n                fw.write(&quot;\\n&quot;);\n            }\n\n        } catch (IOException e) {\n            e.printStackTrace();\n        } finally {\n            if (fw != null) {\n                fw.close();\n            }\n            result.close();\n            client.close();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","parallel-processing"],"answers":[{"tags":[],"owner":{"account_id":25155166,"reputation":864,"user_id":19000086,"display_name":"zaid khan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684826241,"creation_date":1684826241,"answer_id":76312165,"question_id":76309952,"body_markdown":"In Java, you can execute the three functions in parallel using threads or the Executor framework.  Here is an example of ExecutorService\r\n\r\n```\r\n // Create an ExecutorService with a fixed number of threads\r\n ExecutorService executorService = Executors.newFixedThreadPool(3);\r\n\r\n       // Create the tasks\r\n        Callable&lt;List&lt;Integer&gt;&gt; task1 = () -&gt; function1();\r\n        Callable&lt;List&lt;Integer&gt;&gt; task2 = () -&gt; function2();\r\n        Callable&lt;List&lt;Integer&gt;&gt; task3 = () -&gt; function3();\r\n\r\n        // Submit the tasks to the executor\r\n        Future&lt;List&lt;Integer&gt;&gt; result1 = executorService.submit(task1);\r\n        Future&lt;List&lt;Integer&gt;&gt; result2 = executorService.submit(task2);\r\n        Future&lt;List&lt;Integer&gt;&gt; result3 = executorService.submit(task3);\r\n\r\n\r\n           // Retrieve the results asynchronously\r\n        executorService.execute(() -&gt; {\r\n            try {\r\n                List&lt;Integer&gt; resultList1 = result1.get();\r\n                // Process the result of function1\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n        executorService.execute(() -&gt; {\r\n            try {\r\n                List&lt;Integer&gt; resultList2 = result2.get();\r\n                // Process the result of function2\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n        executorService.execute(() -&gt; {\r\n            try {\r\n                List&lt;Integer&gt; resultList3 = result3.get();\r\n                // Process the result of function3\r\n            } catch (Exception e) {\r\n                e.printStackTrace();\r\n            }\r\n        });\r\n\r\n        // Shutdown the executor when you&#39;re done\r\n        executorService.shutdown();\r\n}\r\n","title":"Running parallel processes in Android app","body":"<p>In Java, you can execute the three functions in parallel using threads or the Executor framework.  Here is an example of ExecutorService</p>\n<pre><code> // Create an ExecutorService with a fixed number of threads\n ExecutorService executorService = Executors.newFixedThreadPool(3);\n\n       // Create the tasks\n        Callable&lt;List&lt;Integer&gt;&gt; task1 = () -&gt; function1();\n        Callable&lt;List&lt;Integer&gt;&gt; task2 = () -&gt; function2();\n        Callable&lt;List&lt;Integer&gt;&gt; task3 = () -&gt; function3();\n\n        // Submit the tasks to the executor\n        Future&lt;List&lt;Integer&gt;&gt; result1 = executorService.submit(task1);\n        Future&lt;List&lt;Integer&gt;&gt; result2 = executorService.submit(task2);\n        Future&lt;List&lt;Integer&gt;&gt; result3 = executorService.submit(task3);\n\n\n           // Retrieve the results asynchronously\n        executorService.execute(() -&gt; {\n            try {\n                List&lt;Integer&gt; resultList1 = result1.get();\n                // Process the result of function1\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n\n        executorService.execute(() -&gt; {\n            try {\n                List&lt;Integer&gt; resultList2 = result2.get();\n                // Process the result of function2\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n\n        executorService.execute(() -&gt; {\n            try {\n                List&lt;Integer&gt; resultList3 = result3.get();\n                // Process the result of function3\n            } catch (Exception e) {\n                e.printStackTrace();\n            }\n        });\n\n        // Shutdown the executor when you're done\n        executorService.shutdown();\n}\n</code></pre>\n"}],"owner":{"account_id":11196358,"reputation":77,"user_id":8214882,"display_name":"Mike"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76312165,"answer_count":1,"score":0,"last_activity_date":1684826241,"creation_date":1684790021,"question_id":76309952,"body_markdown":"I&#39;m new to Android app programming.\r\n\r\nI&#39;m making a native Android app in Java. Inside an Activity, I have some ArrayLists and 3 different functions receiving 2 ArrayLists as parameters and returning an ArrayList based on the content of the 2 parameters. Each function makes different operations and receives different lists as input. Since these 3 functions are independent of each other and since if the 2 ArrayLists are big the execution of these functions can take a while, I would like to execute them in parallel so I don&#39;t wait for the first function to complete in order to launch the second function, etc. \r\n\r\nWhich is the best way to run these functions in parallel and receive their result back in my ViewModel in order to show it in the Activity?","title":"Running parallel processes in Android app","body":"<p>I'm new to Android app programming.</p>\n<p>I'm making a native Android app in Java. Inside an Activity, I have some ArrayLists and 3 different functions receiving 2 ArrayLists as parameters and returning an ArrayList based on the content of the 2 parameters. Each function makes different operations and receives different lists as input. Since these 3 functions are independent of each other and since if the 2 ArrayLists are big the execution of these functions can take a while, I would like to execute them in parallel so I don't wait for the first function to complete in order to launch the second function, etc.</p>\n<p>Which is the best way to run these functions in parallel and receive their result back in my ViewModel in order to show it in the Activity?</p>\n"},{"tags":["java","spring-boot","spring-data-jpa","oracle11g","spring-data-envers"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1684697144,"post_id":76301369,"comment_id":134551155,"body_markdown":"What exactly is this type: `Number(10)`.  I&#39;m not an expert in JPA but I don&#39;t see where this comes from.  I see `numeric(p,s)` in the SQL docs but nothing is `Number`.  Being more clear what this is would help here.","body":"What exactly is this type: <code>Number(10)</code>.  I&#39;m not an expert in JPA but I don&#39;t see where this comes from.  I see <code>numeric(p,s)</code> in the SQL docs but nothing is <code>Number</code>.  Being more clear what this is would help here."},{"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"score":0,"creation_date":1684734981,"post_id":76301369,"comment_id":134554405,"body_markdown":"rev is the column autogenerated in revinfo table from spring data envers, which of type Number(10)","body":"rev is the column autogenerated in revinfo table from spring data envers, which of type Number(10)"},{"owner":{"account_id":3418957,"reputation":1176,"user_id":4029174,"accept_rate":100,"display_name":"bananas"},"score":0,"creation_date":1684736685,"post_id":76301369,"comment_id":134554678,"body_markdown":"did you check in google what Number(10) data type represents in java? You might end up writing converter","body":"did you check in google what Number(10) data type represents in java? You might end up writing converter"},{"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"score":0,"creation_date":1684738789,"post_id":76301369,"comment_id":134555032,"body_markdown":"at oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(NumberCommonAccessor.java:4139)\n    at oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonAccessor.java:125)\nInteger value is being picked up from Oracle by getInt method, Im not sure which class to extend so that I write the rs.getLong() or rs.getBigInteger().","body":"at oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(Number&zwnj;&#8203;CommonAccessor.java:&zwnj;&#8203;4139)     at oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonA&zwnj;&#8203;ccessor.java:125) Integer value is being picked up from Oracle by getInt method, Im not sure which class to extend so that I write the rs.getLong() or rs.getBigInteger()."}],"answers":[{"comments":[{"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"score":0,"creation_date":1684753002,"post_id":76304950,"comment_id":134557926,"body_markdown":"Im not defining the audit class, is it auto generated using spring data envers which has the identifer (REV) which it is taking it as int when it should have been long.","body":"Im not defining the audit class, is it auto generated using spring data envers which has the identifer (REV) which it is taking it as int when it should have been long."},{"owner":{"account_id":779805,"reputation":4963,"user_id":836215,"display_name":"ibre5041"},"score":0,"creation_date":1684756339,"post_id":76304950,"comment_id":134558551,"body_markdown":"Hibernate should map Oracle NUMBERs to Java BigDecimal by default. Try to switch the query to `findRevisions(BigDecimal immigrationFileId)`","body":"Hibernate should map Oracle NUMBERs to Java BigDecimal by default. Try to switch the query to <code>findRevisions(BigDecimal immigrationFileId)</code>"},{"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"score":0,"creation_date":1684758625,"post_id":76304950,"comment_id":134559071,"body_markdown":"I just tried with BigDecimal and it failed with the same exception :(","body":"I just tried with BigDecimal and it failed with the same exception :("}],"tags":[],"owner":{"account_id":779805,"reputation":4963,"user_id":836215,"display_name":"ibre5041"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684749416,"creation_date":1684749108,"answer_id":76304950,"question_id":76301369,"body_markdown":"Do not use `int` or `long` for identifiers and numbers retrieved from database. Most likely you do not perform any mathematical operations with them anyway.\r\n\r\nOracle stores numbers in decimal format, the corresponding type in Java is `BigDecimal`.\r\n\r\nYour stack trace shows it:\r\n\r\n    at oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\r\n    at com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\r\n\r\nYou&#39;re calling `getInt()` on ResultSet, you should call `getBigDecimal()`","title":"Numeric Overflow exception when calling findRevisions() or even custom audit query - spring-data-jpa with oracle","body":"<p>Do not use <code>int</code> or <code>long</code> for identifiers and numbers retrieved from database. Most likely you do not perform any mathematical operations with them anyway.</p>\n<p>Oracle stores numbers in decimal format, the corresponding type in Java is <code>BigDecimal</code>.</p>\n<p>Your stack trace shows it:</p>\n<pre><code>at oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\nat com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\n</code></pre>\n<p>You're calling <code>getInt()</code> on ResultSet, you should call <code>getBigDecimal()</code></p>\n"},{"tags":[],"owner":{"account_id":5844056,"reputation":141,"user_id":4604665,"display_name":"tausif"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684823788,"creation_date":1684823788,"answer_id":76311886,"question_id":76301369,"body_markdown":"A revision number(`REV`) value should always be increasing and never overflows.\r\n\r\nThe default implementations provided by Envers use an `int` data type that has an upper bound of `Integer.MAX_VALUE`.\r\n\r\nSince you have already mentioned that your `REV` number has the value of `4686710314` and it exceeds this limit, that&#39;s why you are getting a Numeric Overflow exception.\r\n\r\nTo resolve this issue, you can modify the data type of the `REV` column in the `REVINFO` table to accommodate larger values. But this is not possible in your case as the `REVINFO` is auto-generated. \r\n\r\nSo you should consider using a custom revision entity mapping using a `long` data type.\r\n\r\nBelow is the implementation\r\n\r\n    @Entity\r\n    @Table(name = &quot;REV_INFO&quot;)\r\n    @RevisionEntity\r\n    public  class CustomRevisionEntity implements Serializable {\r\n    \r\n    \tprivate static final long serialVersionUID = 8530213963961662300L;\r\n    \r\n    \t@Id\r\n    \t@GeneratedValue\r\n    \t@RevisionNumber\r\n        @Column(name = &quot;REV&quot;)\r\n    \tprivate long id;\r\n    \r\n    \t@RevisionTimestamp\r\n        @Column(name = &quot;REVTSTMP&quot;)\r\n    \tprivate long timestamp;\r\n    \r\n    \tpublic long getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(long id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \t@Transient\r\n    \tpublic Date getRevisionDate() {\r\n    \t\treturn new Date( timestamp );\r\n    \t}\r\n    \r\n    \tpublic long getTimestamp() {\r\n    \t\treturn timestamp;\r\n    \t}\r\n    \r\n    \tpublic void setTimestamp(long timestamp) {\r\n    \t\tthis.timestamp = timestamp;\r\n    \t}\r\n    }\r\n\r\n\r\nAnd then `RevisionRepository&lt;ImmigrationFile, Long, Long&gt;`\r\n\r\nNote: Verify the autogenerated `REVINFO` table `REV` column datatype length in Oracle.\r\n\r\n\r\n","title":"Numeric Overflow exception when calling findRevisions() or even custom audit query - spring-data-jpa with oracle","body":"<p>A revision number(<code>REV</code>) value should always be increasing and never overflows.</p>\n<p>The default implementations provided by Envers use an <code>int</code> data type that has an upper bound of <code>Integer.MAX_VALUE</code>.</p>\n<p>Since you have already mentioned that your <code>REV</code> number has the value of <code>4686710314</code> and it exceeds this limit, that's why you are getting a Numeric Overflow exception.</p>\n<p>To resolve this issue, you can modify the data type of the <code>REV</code> column in the <code>REVINFO</code> table to accommodate larger values. But this is not possible in your case as the <code>REVINFO</code> is auto-generated.</p>\n<p>So you should consider using a custom revision entity mapping using a <code>long</code> data type.</p>\n<p>Below is the implementation</p>\n<pre><code>@Entity\n@Table(name = &quot;REV_INFO&quot;)\n@RevisionEntity\npublic  class CustomRevisionEntity implements Serializable {\n\n    private static final long serialVersionUID = 8530213963961662300L;\n\n    @Id\n    @GeneratedValue\n    @RevisionNumber\n    @Column(name = &quot;REV&quot;)\n    private long id;\n\n    @RevisionTimestamp\n    @Column(name = &quot;REVTSTMP&quot;)\n    private long timestamp;\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    @Transient\n    public Date getRevisionDate() {\n        return new Date( timestamp );\n    }\n\n    public long getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(long timestamp) {\n        this.timestamp = timestamp;\n    }\n}\n</code></pre>\n<p>And then <code>RevisionRepository&lt;ImmigrationFile, Long, Long&gt;</code></p>\n<p>Note: Verify the autogenerated <code>REVINFO</code> table <code>REV</code> column datatype length in Oracle.</p>\n"}],"owner":{"account_id":2712123,"reputation":813,"user_id":2340345,"accept_rate":50,"display_name":"user2340345"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684825162,"creation_date":1684693867,"question_id":76301369,"body_markdown":"I&#39;m struggling with exception since the past 4 days and being completely frustrated with it that I&#39;m asking this question, I have referred various answers already on StackoverOverflow but they dont seem to have the issue as mine, so please don&#39;t mark it as duplicate.\r\n\r\nhttps://stackoverflow.com/questions/58570032/hibernate-could-not-fetch-the-sequenceinformation-from-the-database\r\n\r\nI have spring data jpa 2.4.4 version and I&#39;m using spring data envers with spring boot on oracle database, I have ojdbc 7 as a dependency.\r\n\r\nAll my tables are audited using envers and generated automatically by confirguration, so Im facing Numeric overflow exception when Im trying to fetch records whose rev is Number(10), my rev table has 2 columns where rev is a Number(10) digits precision.\r\n\r\nREVINFO table is auto generated by spring data envers and i have not customised it in my code.\r\n\r\n    REVINFO table columns :\r\n    REV            NUMBER(10)\r\n    REVTIMESTAMP   TIMESTAMP\r\n\r\nMain Table - Immigration_file\r\n\r\n    @Entity\r\n    @Audited\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    public class ImmigrationFile extends BaseEntity implements ImmigrationFileAware&lt;ImmigrationFile&gt;,Serializable, Cloneable {\r\n    \r\n        @Id\r\n        @SequenceGenerator(name = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;,\r\n                sequenceName = &quot;SEQ_IMMIGRATION_FILE_ID&quot;,\r\n                allocationSize = 1)\r\n        @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;)\r\n        @Column(name = &quot;ID&quot;, unique = true, nullable = false)\r\n        private Long immigrationFileId;\r\n    \r\n    ...other columns\r\n    }\r\n\r\nAudit table - Immigration_file_hist, having all columns of main table along with REV and REVTYPE, so the error is being thrown when the value of REV is &quot;4686710314&quot;.\r\n\r\nI have tried both the approached of using RevisionRepository and custom Audit Query and I get the same exception with both of them\r\ncode to fetch the revisions of immigration_file_hist repository\r\n\r\n    @Repository\r\n    public interface ImmigrationFileDaoRepository extends RevisionRepository&lt;ImmigrationFile, Long, BigInteger&gt;, JpaRepository&lt;ImmigrationFile, Long&gt; {\r\n    \r\n            Page&lt;Revision&lt;BigInteger, ImmigrationFile&gt;&gt; revisions = immigrationFileDaoRepository.findRevisions(immigrationFile.getImmigrationFileId(), PageRequest.of(Integer.valueOf(startPageIndex), Integer.valueOf(endPageIndex), RevisionSort.desc()));\r\n\r\n\r\nI was using Long earlier and i have changed it to BigInteger and i still face the same issue.\r\n\r\nCustom Audit Query \r\n\r\n    public List&lt;ImmigrationFile&gt; findRevisions(Long immigrationFileId) {\r\n            AuditReader reader = AuditReaderFactory.get(entityManager);\r\n            List&lt;ImmigrationFile&gt; results = reader\r\n                    .createQuery()\r\n                    .forRevisionsOfEntity(ImmigrationFile.class, true, false)\r\n                    .add(AuditEntity.id().eq(immigrationFileId))\r\n                    .addOrder(AuditEntity.property(&quot;version&quot;).desc())\r\n                    .setMaxResults(maxResult)\r\n                    .getResultList();\r\n            return results;\r\n\r\n\r\nIm getting the below exception : \r\n\r\n   \r\n\r\n     Caused by: org.springframework.orm.jpa.JpaSystemException: could not execute query; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)\r\n    \tat org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\r\n    \tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:548)\r\n    \tat org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\r\n    \tat org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\r\n    \tat com.sun.proxy.$Proxy252.findRevisions(Unknown Source)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)\r\n    \t... 82 common frames omitted\r\n    Caused by: org.hibernate.exception.GenericJDBCException: could not execute query\r\n    \tat org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\r\n    \tat org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2853)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2832)\r\n    \tat org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2664)\r\n    \tat org.hibernate.loader.Loader.list(Loader.java:2659)\r\n    \tat org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\r\n    \tat org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\r\n    \tat org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\r\n    \tat org.hibernate.internal.SessionImpl.list(SessionImpl.java:1414)/\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1565)\r\n    \tat org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1533)\r\n    \tat org.hibernate.envers.query.internal.impl.AbstractAuditQuery.buildAndExecuteQuery(AbstractAuditQuery.java:106)\r\n    \tat org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.getQueryResults(RevisionsOfEntityQuery.java:173)\r\n    \tat org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.list(RevisionsOfEntityQuery.java:136)\r\n    \tat org.hibernate.envers.query.internal.impl.AbstractAuditQuery.getResultList(AbstractAuditQuery.java:112)\r\n    \tat org.springframework.data.envers.repository.support.EnversRevisionRepositoryImpl.findRevisions(EnversRevisionRepositoryImpl.java:155)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\r\n    \tat org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\r\n    \tat org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)\r\n    \tat org.springframework.data.repository.core.support.Reposito.ryComposition.invoke(RepositoryComposition.java:285)\r\n    \tat org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)\r\n    \tat org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:134)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\r\n    \t... 97 common frames omitted\r\n    Caused by: java.sql.SQLException: Numeric Overflow\r\n    \tat oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(NumberCommonAccessor.java:4139)\r\n    \tat oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonAccessor.java:125)\r\n    \tat oracle.jdbc.driver.GeneratedStatement.getInt(GeneratedStatement.java:199)\r\n    \tat oracle.jdbc.driver.GeneratedScrollableResultSet.getInt(GeneratedScrollableResultSet.java:246)\r\n    \tat oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\r\n    \tat com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\r\n    \tat org.hibernate.type.descriptor.sql.IntegerTypeDescriptor$2.doExtract(IntegerTypeDescriptor.java:62)\r\n    \tat org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\r\n    \tat org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:329)\r\n    \tat org.hibernate.type.ManyToOneType.hydrate(ManyToOneType.java:184)\r\n    \tat org.hibernate.type.ComponentType.hydrate(ComponentType.java:670)\r\n    \tat org.hibernate.loader.Loader.extractKeysFromResultSet(Loader.java:803)\r\n    \tat org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:727)\r\n    \tat org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1039)\r\n    \tat org.hibernate.loader.Loader.processResultSet(Loader.java:990)\r\n    \tat org.hibernate.loader.Loader.doQuery(Loader.java:959)\r\n    \tat org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\r\n    \tat org.hibernate.loader.Loader.doList(Loader.java:2850)\r\n    \t... 131 common frames omitted\r\n\r\n","title":"Numeric Overflow exception when calling findRevisions() or even custom audit query - spring-data-jpa with oracle","body":"<p>I'm struggling with exception since the past 4 days and being completely frustrated with it that I'm asking this question, I have referred various answers already on StackoverOverflow but they dont seem to have the issue as mine, so please don't mark it as duplicate.</p>\n<p><a href=\"https://stackoverflow.com/questions/58570032/hibernate-could-not-fetch-the-sequenceinformation-from-the-database\">Hibernate could not fetch the SequenceInformation from the database</a></p>\n<p>I have spring data jpa 2.4.4 version and I'm using spring data envers with spring boot on oracle database, I have ojdbc 7 as a dependency.</p>\n<p>All my tables are audited using envers and generated automatically by confirguration, so Im facing Numeric overflow exception when Im trying to fetch records whose rev is Number(10), my rev table has 2 columns where rev is a Number(10) digits precision.</p>\n<p>REVINFO table is auto generated by spring data envers and i have not customised it in my code.</p>\n<pre><code>REVINFO table columns :\nREV            NUMBER(10)\nREVTIMESTAMP   TIMESTAMP\n</code></pre>\n<p>Main Table - Immigration_file</p>\n<pre><code>@Entity\n@Audited\n@NoArgsConstructor\n@AllArgsConstructor\npublic class ImmigrationFile extends BaseEntity implements ImmigrationFileAware&lt;ImmigrationFile&gt;,Serializable, Cloneable {\n\n    @Id\n    @SequenceGenerator(name = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;,\n            sequenceName = &quot;SEQ_IMMIGRATION_FILE_ID&quot;,\n            allocationSize = 1)\n    @GeneratedValue(strategy = GenerationType.AUTO, generator = &quot;IMMIGRATION_FILE_ID_GENERATOR&quot;)\n    @Column(name = &quot;ID&quot;, unique = true, nullable = false)\n    private Long immigrationFileId;\n\n...other columns\n}\n</code></pre>\n<p>Audit table - Immigration_file_hist, having all columns of main table along with REV and REVTYPE, so the error is being thrown when the value of REV is &quot;4686710314&quot;.</p>\n<p>I have tried both the approached of using RevisionRepository and custom Audit Query and I get the same exception with both of them\ncode to fetch the revisions of immigration_file_hist repository</p>\n<pre><code>@Repository\npublic interface ImmigrationFileDaoRepository extends RevisionRepository&lt;ImmigrationFile, Long, BigInteger&gt;, JpaRepository&lt;ImmigrationFile, Long&gt; {\n\n        Page&lt;Revision&lt;BigInteger, ImmigrationFile&gt;&gt; revisions = immigrationFileDaoRepository.findRevisions(immigrationFile.getImmigrationFileId(), PageRequest.of(Integer.valueOf(startPageIndex), Integer.valueOf(endPageIndex), RevisionSort.desc()));\n</code></pre>\n<p>I was using Long earlier and i have changed it to BigInteger and i still face the same issue.</p>\n<p>Custom Audit Query</p>\n<pre><code>public List&lt;ImmigrationFile&gt; findRevisions(Long immigrationFileId) {\n        AuditReader reader = AuditReaderFactory.get(entityManager);\n        List&lt;ImmigrationFile&gt; results = reader\n                .createQuery()\n                .forRevisionsOfEntity(ImmigrationFile.class, true, false)\n                .add(AuditEntity.id().eq(immigrationFileId))\n                .addOrder(AuditEntity.property(&quot;version&quot;).desc())\n                .setMaxResults(maxResult)\n                .getResultList();\n        return results;\n</code></pre>\n<p>Im getting the below exception :</p>\n<pre><code> Caused by: org.springframework.orm.jpa.JpaSystemException: could not execute query; nested exception is org.hibernate.exception.GenericJDBCException: could not execute query\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:331)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:548)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:174)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\n    at com.sun.proxy.$Proxy252.findRevisions(Unknown Source)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:687)\n    ... 82 common frames omitted\nCaused by: org.hibernate.exception.GenericJDBCException: could not execute query\n    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:47)\n    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:113)\n    at org.hibernate.loader.Loader.doList(Loader.java:2853)\n    at org.hibernate.loader.Loader.doList(Loader.java:2832)\n    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2664)\n    at org.hibernate.loader.Loader.list(Loader.java:2659)\n    at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:506)\n    at org.hibernate.hql.internal.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:400)\n    at org.hibernate.engine.query.spi.HQLQueryPlan.performList(HQLQueryPlan.java:219)\n    at org.hibernate.internal.SessionImpl.list(SessionImpl.java:1414)/\n    at org.hibernate.query.internal.AbstractProducedQuery.doList(AbstractProducedQuery.java:1565)\n    at org.hibernate.query.internal.AbstractProducedQuery.list(AbstractProducedQuery.java:1533)\n    at org.hibernate.envers.query.internal.impl.AbstractAuditQuery.buildAndExecuteQuery(AbstractAuditQuery.java:106)\n    at org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.getQueryResults(RevisionsOfEntityQuery.java:173)\n    at org.hibernate.envers.query.internal.impl.RevisionsOfEntityQuery.list(RevisionsOfEntityQuery.java:136)\n    at org.hibernate.envers.query.internal.impl.AbstractAuditQuery.getResultList(AbstractAuditQuery.java:112)\n    at org.springframework.data.envers.repository.support.EnversRevisionRepositoryImpl.findRevisions(EnversRevisionRepositoryImpl.java:155)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:289)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:524)\n    at org.springframework.data.repository.core.support.Reposito.ryComposition.invoke(RepositoryComposition.java:285)\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:531)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:156)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:131)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:371)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:134)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 97 common frames omitted\nCaused by: java.sql.SQLException: Numeric Overflow\n    at oracle.jdbc.driver.NumberCommonAccessor.throwOverflow(NumberCommonAccessor.java:4139)\n    at oracle.jdbc.driver.NumberCommonAccessor.getInt(NumberCommonAccessor.java:125)\n    at oracle.jdbc.driver.GeneratedStatement.getInt(GeneratedStatement.java:199)\n    at oracle.jdbc.driver.GeneratedScrollableResultSet.getInt(GeneratedScrollableResultSet.java:246)\n    at oracle.jdbc.driver.GeneratedResultSet.getInt(GeneratedResultSet.java:556)\n    at com.ibm.ws.rsadapter.jdbc.WSJdbcResultSet.getInt(WSJdbcResultSet.java:1089)\n    at org.hibernate.type.descriptor.sql.IntegerTypeDescriptor$2.doExtract(IntegerTypeDescriptor.java:62)\n    at org.hibernate.type.descriptor.sql.BasicExtractor.extract(BasicExtractor.java:47)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:257)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:253)\n    at org.hibernate.type.AbstractStandardBasicType.nullSafeGet(AbstractStandardBasicType.java:243)\n    at org.hibernate.type.AbstractStandardBasicType.hydrate(AbstractStandardBasicType.java:329)\n    at org.hibernate.type.ManyToOneType.hydrate(ManyToOneType.java:184)\n    at org.hibernate.type.ComponentType.hydrate(ComponentType.java:670)\n    at org.hibernate.loader.Loader.extractKeysFromResultSet(Loader.java:803)\n    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:727)\n    at org.hibernate.loader.Loader.getRowsFromResultSet(Loader.java:1039)\n    at org.hibernate.loader.Loader.processResultSet(Loader.java:990)\n    at org.hibernate.loader.Loader.doQuery(Loader.java:959)\n    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:349)\n    at org.hibernate.loader.Loader.doList(Loader.java:2850)\n    ... 131 common frames omitted\n</code></pre>\n"},{"tags":["java","clipboard"],"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":0,"creation_date":1499908946,"post_id":45069475,"comment_id":77112948,"body_markdown":"You can discuss/buy premier or extended support from Oracle, and see if that includes fixing this bug. Jdk7 has been end-of-public-updates for more than 2 years. It&#39;s probably a better idea to migrate to jdk8. http://www.oracle.com/technetwork/java/eol-135779.html","body":"You can discuss/buy premier or extended support from Oracle, and see if that includes fixing this bug. Jdk7 has been end-of-public-updates for more than 2 years. It&#39;s probably a better idea to migrate to jdk8. <a href=\"http://www.oracle.com/technetwork/java/eol-135779.html\" rel=\"nofollow noreferrer\">oracle.com/technetwork/java/eol-135779.html</a>"}],"answers":[{"tags":[],"owner":{"account_id":3025392,"reputation":1695,"user_id":2565527,"accept_rate":100,"display_name":"hiropon"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684824951,"creation_date":1499906743,"answer_id":45069703,"question_id":45069475,"body_markdown":"My answer is probably useless, but I post.  \r\nAccording to Bugzilla tickets [JDK-7107490][1] and [JDK-7199196][2], these bugs are fixed from jdk8. So, it&#39;s better recommending to migrate to java 8.\r\n\r\nI&#39;m not so familiar with JDK&#39;s updating schedule, but I think JDK7 is no more maintained (EOL: [Java 7 Reaches End of Life][3]). If you created any patches for this bug, it would not be merged.\r\n\r\n\r\n  [1]: http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490\r\n  [2]: http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7199196\r\n  [3]: https://www.infoq.com/news/2015/05/Oracle-Ends-Java-7Public-Updates","title":"java.io.IOException: Owner failed to convert data","body":"<p>My answer is probably useless, but I post.<br />\nAccording to Bugzilla tickets <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490\" rel=\"nofollow noreferrer\">JDK-7107490</a> and <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7199196\" rel=\"nofollow noreferrer\">JDK-7199196</a>, these bugs are fixed from jdk8. So, it's better recommending to migrate to java 8.</p>\n<p>I'm not so familiar with JDK's updating schedule, but I think JDK7 is no more maintained (EOL: <a href=\"https://www.infoq.com/news/2015/05/Oracle-Ends-Java-7Public-Updates\" rel=\"nofollow noreferrer\">Java 7 Reaches End of Life</a>). If you created any patches for this bug, it would not be merged.</p>\n"}],"owner":{"account_id":2229924,"reputation":5666,"user_id":1967800,"accept_rate":78,"display_name":"Sharcoux"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":468,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":45069703,"answer_count":1,"score":1,"last_activity_date":1684824951,"creation_date":1499904840,"question_id":45069475,"body_markdown":"When copying an image from the clipboard into my application, I get :\r\n\r\n    java.io.IOException: Owner failed to convert data\r\n    \tat sun.awt.X11.XSelection.validateDataGetter(XSelection.java:444)\r\n    \tat sun.awt.X11.XSelection.getData(XSelection.java:305)\r\n    \tat sun.awt.X11.XClipboard.getClipboardData(XClipboard.java:120)\r\n    \tat sun.awt.datatransfer.SunClipboard.getData(SunClipboard.java:225)\r\n\r\nAccording to [this](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490), it appears that the issues is from jdk 1.7.0. Great. But what can I do for my users that are currently using Java 7 (except asking them to migrate to java 8 ?)\r\n\r\nOr maybe I didn&#39;t understand the issue ?","title":"java.io.IOException: Owner failed to convert data","body":"<p>When copying an image from the clipboard into my application, I get :</p>\n\n<pre><code>java.io.IOException: Owner failed to convert data\n    at sun.awt.X11.XSelection.validateDataGetter(XSelection.java:444)\n    at sun.awt.X11.XSelection.getData(XSelection.java:305)\n    at sun.awt.X11.XClipboard.getClipboardData(XClipboard.java:120)\n    at sun.awt.datatransfer.SunClipboard.getData(SunClipboard.java:225)\n</code></pre>\n\n<p>According to <a href=\"http://bugs.java.com/bugdatabase/view_bug.do?bug_id=7107490\" rel=\"nofollow noreferrer\">this</a>, it appears that the issues is from jdk 1.7.0. Great. But what can I do for my users that are currently using Java 7 (except asking them to migrate to java 8 ?)</p>\n\n<p>Or maybe I didn't understand the issue ?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":5856142,"reputation":4645,"user_id":4613320,"accept_rate":40,"display_name":"Maddy"},"score":0,"creation_date":1505303089,"post_id":46196632,"comment_id":79355637,"body_markdown":"try this : `databaseReference.child(user.getUid()).push(userInformations);`","body":"try this : <code>databaseReference.child(user.getUid()).push(userInformations&zwnj;&#8203;);</code>"}],"answers":[{"comments":[{"owner":{"account_id":11755026,"reputation":41,"user_id":8602995,"accept_rate":33,"display_name":"Ameni Kerkeni"},"score":0,"creation_date":1505303106,"post_id":46196667,"comment_id":79355643,"body_markdown":"Users node is not created yet! this code will create it if its not available?","body":"Users node is not created yet! this code will create it if its not available?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1505303549,"post_id":46196667,"comment_id":79355945,"body_markdown":"Does it work? Are now all the user objects hosted under `Users` node?","body":"Does it work? Are now all the user objects hosted under <code>Users</code> node?"}],"tags":[],"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1505303030,"creation_date":1505303030,"answer_id":46196667,"question_id":46196632,"body_markdown":"You need to use the following code:\r\n\r\n    databaseReference.child(&quot;Users&quot;).child(user.getUid()).setValue(userInformations);\r\n\r\nThis means that all those objects will be hosted within the `Users` node. Please the new `child(&quot;Users&quot;)` added. In the same way you need to use for the posts.","title":"Firebase add a new node","body":"<p>You need to use the following code:</p>\n\n<pre><code>databaseReference.child(\"Users\").child(user.getUid()).setValue(userInformations);\n</code></pre>\n\n<p>This means that all those objects will be hosted within the <code>Users</code> node. Please the new <code>child(\"Users\")</code> added. In the same way you need to use for the posts.</p>\n"},{"tags":[],"owner":{"account_id":18496791,"reputation":57,"user_id":13475031,"display_name":"azizkale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684824590,"creation_date":1684824590,"answer_id":76311972,"question_id":46196632,"body_markdown":"     {\r\n        assigned: true,\r\n        groupId: pir.groupId\r\n     }     \r\n\r\n the object above is added to the object in firebase db as update\r\n\r\n    const refff = admin.database().ref(`pirs/${pir.pirId}`);\r\n            return refff.update({\r\n                assigned: true,\r\n                groupId: pir.groupId\r\n            })\r\n                .then(() =&gt; {\r\n                    return { pir }\r\n                })\r\n                .catch((error) =&gt; {\r\n                    console.error(&quot;Error updating data:&quot;, error);\r\n                    return { errror: error }\r\n                });","title":"Firebase add a new node","body":"<pre><code> {\n    assigned: true,\n    groupId: pir.groupId\n }     \n</code></pre>\n<p>the object above is added to the object in firebase db as update</p>\n<pre><code>const refff = admin.database().ref(`pirs/${pir.pirId}`);\n        return refff.update({\n            assigned: true,\n            groupId: pir.groupId\n        })\n            .then(() =&gt; {\n                return { pir }\n            })\n            .catch((error) =&gt; {\n                console.error(&quot;Error updating data:&quot;, error);\n                return { errror: error }\n            });\n</code></pre>\n"}],"owner":{"account_id":11755026,"reputation":41,"user_id":8602995,"accept_rate":33,"display_name":"Ameni Kerkeni"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5959,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":46196667,"answer_count":2,"score":2,"last_activity_date":1684824590,"creation_date":1505302935,"question_id":46196632,"body_markdown":"![Capture of my database][1]\r\n\r\nHow to put these nodes inside a users node and make another one to store posts.\r\nMy database reference:\r\n\r\n    databaseReference.child(user.getUid()).setValue(userInformations);\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8vdlN.png","title":"Firebase add a new node","body":"<p><img src=\"https://i.stack.imgur.com/8vdlN.png\" alt=\"Capture of my database\"></p>\n\n<p>How to put these nodes inside a users node and make another one to store posts.\nMy database reference:</p>\n\n<pre><code>databaseReference.child(user.getUid()).setValue(userInformations);\n</code></pre>\n"},{"tags":["java","intellij-idea","web-applications","wildfly","remote-debugging"],"comments":[{"owner":{"account_id":4362282,"reputation":92954,"user_id":3558960,"accept_rate":60,"display_name":"Robby Cornelissen"},"score":0,"creation_date":1684824636,"post_id":76311932,"comment_id":134569264,"body_markdown":"https://www.jetbrains.com/help/idea/updating-applications-on-application-servers.html","body":"<a href=\"https://www.jetbrains.com/help/idea/updating-applications-on-application-servers.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"},{"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"score":0,"creation_date":1684825750,"post_id":76311932,"comment_id":134569483,"body_markdown":"@RobbyCornelissen: I choosen Update classes and resources but it is not working. Even restarting the server do not help, I have to clean install on parent porject","body":"@RobbyCornelissen: I choosen Update classes and resources but it is not working. Even restarting the server do not help, I have to clean install on parent porject"}],"owner":{"account_id":1873956,"reputation":2761,"user_id":1695592,"accept_rate":58,"display_name":"Ronald"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":108,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1684824235,"creation_date":1684824235,"question_id":76311932,"body_markdown":"I am using Intellij with wildfly/jboss server and I have webapp consists of parent project and submodules. I would like to be able to see code changes in my java code in one of the submodules without having to clean install and restart. For that I have configured Remote JVM Debug as you can see in the screenshot. When I start the debugger, it stops at break points and I can debug step by step which is fine. \r\n[![enter image description here][1]][1]\r\nProblem: When I change the code like I change string variable value from a to b, this change has no affect. I have first to clean install the whole parent project and restart wildfly. Is it possible to get changes reflected without having to clean install and restart wilfly server like it is in eclipse? In eclipse I got this problem, when I forget to tick project-&gt; automatically build but I dont know how to fix this in intellij\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/34iiO.png","title":"Code changes in intellij have no affect while debugging. I have to clean install first and restart wildfly server","body":"<p>I am using Intellij with wildfly/jboss server and I have webapp consists of parent project and submodules. I would like to be able to see code changes in my java code in one of the submodules without having to clean install and restart. For that I have configured Remote JVM Debug as you can see in the screenshot. When I start the debugger, it stops at break points and I can debug step by step which is fine.\n<a href=\"https://i.stack.imgur.com/34iiO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/34iiO.png\" alt=\"enter image description here\" /></a>\nProblem: When I change the code like I change string variable value from a to b, this change has no affect. I have first to clean install the whole parent project and restart wildfly. Is it possible to get changes reflected without having to clean install and restart wilfly server like it is in eclipse? In eclipse I got this problem, when I forget to tick project-&gt; automatically build but I dont know how to fix this in intellij</p>\n"},{"tags":["java","docker","selenium-webdriver","bitbucket-pipelines"],"owner":{"account_id":14093375,"reputation":3,"user_id":10180974,"display_name":"Pranjal Saxena"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":318,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684824077,"creation_date":1684822384,"question_id":76311726,"body_markdown":"I want to run selenium script (Java, Maven &amp; Selenium) in bitbucket pipeline. For this I want to use a image [selenium/standalone-chrome](https://hub.docker.com/r/selenium/standalone-chrome) from docker hub. But I dont know how to configure my bitbucket-pipelines.yml for this. Currently I am using below yml file in my project and I am getting below error on bitbucket pipeline - \r\n\r\n**Error**\r\n\r\nCould not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.\r\n\r\nBuild info: version: &#39;3.141.59&#39;, revision: &#39;e82be7d358&#39;, time: &#39;2018-11-14T08:17:03&#39;\r\n\r\nSystem info: host: &#39;2469e757-cd7e-46a6-815f-e4e651a95a17-5cdxg&#39;, ip: &#39;10.36.149.209&#39;, os.name: &#39;Linux&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;5.15.0-1035-aws&#39;, java.version: &#39;11.0.3&#39;\r\n\r\n**Bitbucket YAML file**\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    image: maven:3.6.0\r\n\r\n    pipelines:\r\n      default:\r\n        - parallel:\r\n            - step:\r\n                name: Build and Test\r\n                caches:\r\n                  - maven\r\n                script:\r\n                #  - mvn -B verify\r\n                  - ls -l /opt/atlassian/pipelines/agent/build/chromedriver_win32/\r\n                  - mvn test\r\n                after-script:\r\n                  # Collect checkstyle results, if any, and convert to Bitbucket Code Insights.\r\n                  - pipe: atlassian/checkstyle-report:0.3.0\r\n            - step:\r\n                name: Security Scan\r\n                script:\r\n                  # Run a security scan for sensitive data.\r\n                  # See more security tools at https://bitbucket.org/product/features/pipelines/integrations?&amp;category=security\r\n                  - pipe: atlassian/git-secrets-scan:0.5.1\r\n                    definitions:\r\n                      services:\r\n                        chrome:\r\n                          image: selenium/standalone-chrome\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LyUpK.png\r\n\r\n**Note**\r\n\r\nI am using selenium hub server(http://localhost:4444/wd/hub) to host the selenium/standalone-chrome container and its working fine when I am launching from my local. But giving above error when pipeline is running on bitbucket.","title":"How to configure the bitbucket pipeline YAML file to add the selenium chrome image (selenium/standalone-chrome)?","body":"<p>I want to run selenium script (Java, Maven &amp; Selenium) in bitbucket pipeline. For this I want to use a image <a href=\"https://hub.docker.com/r/selenium/standalone-chrome\" rel=\"nofollow noreferrer\">selenium/standalone-chrome</a> from docker hub. But I dont know how to configure my bitbucket-pipelines.yml for this. Currently I am using below yml file in my project and I am getting below error on bitbucket pipeline -</p>\n<p><strong>Error</strong></p>\n<p>Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure.</p>\n<p>Build info: version: '3.141.59', revision: 'e82be7d358', time: '2018-11-14T08:17:03'</p>\n<p>System info: host: '2469e757-cd7e-46a6-815f-e4e651a95a17-5cdxg', ip: '10.36.149.209', os.name: 'Linux', os.arch: 'amd64', os.version: '5.15.0-1035-aws', java.version: '11.0.3'</p>\n<p><strong>Bitbucket YAML file</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>image: maven:3.6.0\n\npipelines:\n  default:\n    - parallel:\n        - step:\n            name: Build and Test\n            caches:\n              - maven\n            script:\n            #  - mvn -B verify\n              - ls -l /opt/atlassian/pipelines/agent/build/chromedriver_win32/\n              - mvn test\n            after-script:\n              # Collect checkstyle results, if any, and convert to Bitbucket Code Insights.\n              - pipe: atlassian/checkstyle-report:0.3.0\n        - step:\n            name: Security Scan\n            script:\n              # Run a security scan for sensitive data.\n              # See more security tools at https://bitbucket.org/product/features/pipelines/integrations?&amp;category=security\n              - pipe: atlassian/git-secrets-scan:0.5.1\n                definitions:\n                  services:\n                    chrome:\n                      image: selenium/standalone-chrome</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p><strong>Note</strong></p>\n<p>I am using selenium hub server(http://localhost:4444/wd/hub) to host the selenium/standalone-chrome container and its working fine when I am launching from my local. But giving above error when pipeline is running on bitbucket.</p>\n"},{"tags":["java","spring","apache-httpclient-5.x"],"owner":{"account_id":28652283,"reputation":1,"user_id":21939038,"display_name":"ypn12"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684823220,"creation_date":1684742126,"question_id":76304061,"body_markdown":"I am currently migrating our project to the latest version of Spring. Since Spring 6 is using the new Apache HttpClient5, I am struggling to find any kind of replacement for the old removed methods from the `DefaultRedirectStrategy` class:\r\n\r\n`protected boolean isRedirectable(String method)`\r\n\r\n and \r\n\r\n`public HttpUriRequest getRedirect(final HttpRequest request, final HttpResponse response, final HttpContext context) throws ProtocolException `\r\n\r\n\r\n\r\nWith HttpClient4 these methods were used to make all request redirectable and reset streams if possible.\r\nI tried to search for any replacement or documentation about it, but unfortunately I could not find anything.\r\n\r\nI am happy for each answer :) ","title":"How to handle redirected request in Apache HttpClient5?","body":"<p>I am currently migrating our project to the latest version of Spring. Since Spring 6 is using the new Apache HttpClient5, I am struggling to find any kind of replacement for the old removed methods from the <code>DefaultRedirectStrategy</code> class:</p>\n<p><code>protected boolean isRedirectable(String method)</code></p>\n<p>and</p>\n<p><code>public HttpUriRequest getRedirect(final HttpRequest request, final HttpResponse response, final HttpContext context) throws ProtocolException </code></p>\n<p>With HttpClient4 these methods were used to make all request redirectable and reset streams if possible.\nI tried to search for any replacement or documentation about it, but unfortunately I could not find anything.</p>\n<p>I am happy for each answer :)</p>\n"},{"tags":["java","spring","testing","spring-security"],"answers":[{"tags":[],"owner":{"account_id":2258060,"reputation":3689,"user_id":1988798,"accept_rate":83,"display_name":"Gaurav"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633326475,"creation_date":1633326475,"answer_id":69431396,"question_id":69431307,"body_markdown":"Please take a look [here](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#test). Spring security comes with proper testing support. I have shared link for section dedicated to test support for Security.\r\n\r\nExample: \r\n\r\n    @Test\r\n    @WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\r\n    public void getMessageWithMockUserCustomUser() {\r\n        String message = messageService.getMessage();\r\n        ...\r\n    }\r\n\r\nThis is how you apply test annotations on a class.\r\n\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @ContextConfiguration\r\n    @WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\r\n    public class WithMockUserTests {\r\n    }","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>Please take a look <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#test\" rel=\"nofollow noreferrer\">here</a>. Spring security comes with proper testing support. I have shared link for section dedicated to test support for Security.</p>\n<p>Example:</p>\n<pre><code>@Test\n@WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\npublic void getMessageWithMockUserCustomUser() {\n    String message = messageService.getMessage();\n    ...\n}\n</code></pre>\n<p>This is how you apply test annotations on a class.</p>\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@ContextConfiguration\n@WithMockUser(username=&quot;admin&quot;,roles={&quot;USER&quot;,&quot;ADMIN&quot;})\npublic class WithMockUserTests {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15841746,"reputation":6011,"user_id":11430047,"display_name":"Eleftheria Stein-Kousathana"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633604258,"creation_date":1633604258,"answer_id":69479921,"question_id":69431307,"body_markdown":"In the security configuration you have specified that any endpoints that match `&quot;/user/**&quot;` must have the authority &quot;VT&quot;, &quot;Admin&quot;, &quot;User&quot; or &quot;Developer&quot;.\r\n```java\r\n.mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\r\n```\r\n\r\nHowever, in the test, the request is made with a user that has the authorities &quot;VT_SCOPE&quot;, &quot;ADMIN_SCOPE&quot;, &quot;USER_SCOPE&quot; and &quot;DEVELOPER_SCOPE&quot;.   \r\nNone of these authorities match the required authorities, which is why you see a 403 response.\r\n\r\nNote that you can more robustly test JWT authentication, using the built-in [`jwt()` RequestPostProcessor](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt). \r\n\r\n```java\r\nmvc\r\n    .perform(post(&quot;/user/forum/add&quot;)\r\n        .with(jwt().authorities(new SimpleGrantedAuthority(&quot;SCOPE_example&quot;))));\r\n```\r\n\r\nYou can find extensive details and examples in the Spring Security [reference documentation](https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt). ","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>In the security configuration you have specified that any endpoints that match <code>&quot;/user/**&quot;</code> must have the authority &quot;VT&quot;, &quot;Admin&quot;, &quot;User&quot; or &quot;Developer&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>.mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\n</code></pre>\n<p>However, in the test, the request is made with a user that has the authorities &quot;VT_SCOPE&quot;, &quot;ADMIN_SCOPE&quot;, &quot;USER_SCOPE&quot; and &quot;DEVELOPER_SCOPE&quot;.<br />\nNone of these authorities match the required authorities, which is why you see a 403 response.</p>\n<p>Note that you can more robustly test JWT authentication, using the built-in <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt\" rel=\"nofollow noreferrer\"><code>jwt()</code> RequestPostProcessor</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>mvc\n    .perform(post(&quot;/user/forum/add&quot;)\n        .with(jwt().authorities(new SimpleGrantedAuthority(&quot;SCOPE_example&quot;))));\n</code></pre>\n<p>You can find extensive details and examples in the Spring Security <a href=\"https://docs.spring.io/spring-security/site/docs/current/reference/html5/#testing-jwt\" rel=\"nofollow noreferrer\">reference documentation</a>.</p>\n"},{"tags":[],"owner":{"account_id":28659948,"reputation":1,"user_id":21945074,"display_name":"DavitAM"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684822282,"creation_date":1684822282,"answer_id":76311712,"question_id":69431307,"body_markdown":"For me I had to do \r\n\r\n    with(SecurityMockMvcRequestPostProcessors.jwt().authorities(new SimpleGrantedAuthority(&quot;ADMIN&quot;))))\r\n\r\nhope this helps you!","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>For me I had to do</p>\n<pre><code>with(SecurityMockMvcRequestPostProcessors.jwt().authorities(new SimpleGrantedAuthority(&quot;ADMIN&quot;))))\n</code></pre>\n<p>hope this helps you!</p>\n"}],"owner":{"account_id":16437243,"reputation":377,"user_id":11874530,"display_name":"Sugata Kar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":784,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1684822282,"creation_date":1633325775,"question_id":69431307,"body_markdown":"I am using JWT based authentication in my Spring project and I was trying to write JUnit Test cases for the secured end-points though I am not able to test it and getting\r\n\r\n**org.opentest4j.AssertionFailedError:\r\nExpected :201\r\nActual :403**\r\n\r\n\r\nMy Security Config file is :\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity(debug = true)\r\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\r\npublic class ScopeMapping extends WebSecurityConfigurerAdapter {\r\n    @Autowired\r\n    XsuaaServiceConfiguration xsuaaServiceConfiguration;\r\n    private static final String VT_SCOPE = &quot;VT&quot;;\r\n    private static final String DEVELOPER_SCOPE = &quot;Developer&quot;;\r\n    private static final String USER_SCOPE = &quot;User&quot;;\r\n    private static final String ADMIN_SCOPE = &quot;Admin&quot;;\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.csrf().disable();\r\n        http\r\n                .headers()\r\n                .contentSecurityPolicy(&quot;script-src &#39;self&#39; https://trustedscripts.example.com; object-src https://trustedplugins.example.com; report-uri /csp-report-endpoint/&quot;);\r\n        http\r\n                .sessionManagement()\r\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                .and()\r\n                .authorizeRequests()\r\n                .mvcMatchers(HttpMethod.GET,&quot;/health&quot;).permitAll()\r\n                .mvcMatchers(&quot;/v2/api-docs/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\r\n                .mvcMatchers(&quot;/v1/**&quot;).hasAuthority(VT_SCOPE)\r\n                .mvcMatchers(&quot;/v2/**&quot;).permitAll()\r\n                .mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\r\n                .mvcMatchers(&quot;/admin/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, DEVELOPER_SCOPE)\r\n                .mvcMatchers(&quot;/vt/**&quot;).hasAnyAuthority(VT_SCOPE, DEVELOPER_SCOPE)\r\n                .anyRequest().denyAll()\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt()\r\n                .jwtAuthenticationConverter(getJwtAuthenticationConverter());\r\n    }\r\n    Converter&lt;Jwt, AbstractAuthenticationToken&gt; getJwtAuthenticationConverter() {\r\n        TokenAuthenticationConverter converter = new TokenAuthenticationConverter(xsuaaServiceConfiguration);\r\n        converter.setLocalScopeAsAuthorities(true);\r\n        return converter;\r\n    }\r\n}\r\n```\r\n\r\n**Test-case**\r\n```\r\n@WithUserDetails(value=&quot;ram&quot;,userDetailsServiceBeanName = &quot;secureBean&quot;)\r\n    public void addForumTest() throws Exception {\r\n        //  ForumQuery forumQuery = new ForumQuery(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,&quot;1&quot;,currentTime,replies,forumLikes);\r\n        ForumQueryDto forumQueryDto = new ForumQueryDto(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,userDto,currentTime,repliesDto);\r\n        Mockito.when(forumService.insertQuery(Mockito.any(ForumQueryDto.class))).thenReturn(forumQueryDto);\r\n        MvcResult result = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/user/forum/add&quot;)\r\n                .contentType(&quot;application/json&quot;)\r\n//                .header(HttpHeaders.AUTHORIZATION,&lt;JWT-TOKEN&gt;)\r\n                .content(objectMapper.writeValueAsString(forumQueryDto)))\r\n                .andReturn();\r\n        MockHttpServletResponse response = result.getResponse();\r\n        assertEquals(HttpStatus.CREATED.value(), response.getStatus());\r\n    }\r\n```\r\n**Custom-Bean**\r\n```\r\n@Bean(&quot;secureBean&quot;)\r\n    public UserDetailsService userDetailsService() {\r\n        GrantedAuthority authority = new SimpleGrantedAuthority(&quot;VT_SCOPE&quot;);\r\n        GrantedAuthority authority1 = new SimpleGrantedAuthority(&quot;ADMIN_SCOPE&quot;);\r\n        GrantedAuthority authority2 = new SimpleGrantedAuthority(&quot;USER_SCOPE&quot;);\r\n        GrantedAuthority authority3 = new SimpleGrantedAuthority(&quot;DEVELOPER_SCOPE&quot;);\r\n        UserDetails userDetails = (UserDetails) new User(&quot;ram&quot;, &quot;ram123&quot;, Arrays.asList(authority\r\n                , authority1, authority2, authority3));\r\n        return new InMemoryUserDetailsManager(Arrays.asList(userDetails));\r\n    }\r\n```","title":"How to test secured end-points in Spring application using JUnit?","body":"<p>I am using JWT based authentication in my Spring project and I was trying to write JUnit Test cases for the secured end-points though I am not able to test it and getting</p>\n<p><strong>org.opentest4j.AssertionFailedError:\nExpected :201\nActual :403</strong></p>\n<p>My Security Config file is :</p>\n<pre><code>@Configuration\n@EnableWebSecurity(debug = true)\n@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)\npublic class ScopeMapping extends WebSecurityConfigurerAdapter {\n    @Autowired\n    XsuaaServiceConfiguration xsuaaServiceConfiguration;\n    private static final String VT_SCOPE = &quot;VT&quot;;\n    private static final String DEVELOPER_SCOPE = &quot;Developer&quot;;\n    private static final String USER_SCOPE = &quot;User&quot;;\n    private static final String ADMIN_SCOPE = &quot;Admin&quot;;\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.csrf().disable();\n        http\n                .headers()\n                .contentSecurityPolicy(&quot;script-src 'self' https://trustedscripts.example.com; object-src https://trustedplugins.example.com; report-uri /csp-report-endpoint/&quot;);\n        http\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .authorizeRequests()\n                .mvcMatchers(HttpMethod.GET,&quot;/health&quot;).permitAll()\n                .mvcMatchers(&quot;/v2/api-docs/**&quot;, &quot;/swagger-ui.html&quot;, &quot;/swagger-ui/**&quot;, &quot;/swagger-resources/**&quot;).permitAll()\n                .mvcMatchers(&quot;/v1/**&quot;).hasAuthority(VT_SCOPE)\n                .mvcMatchers(&quot;/v2/**&quot;).permitAll()\n                .mvcMatchers(&quot;/user/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, USER_SCOPE, DEVELOPER_SCOPE)\n                .mvcMatchers(&quot;/admin/**&quot;).hasAnyAuthority(VT_SCOPE, ADMIN_SCOPE, DEVELOPER_SCOPE)\n                .mvcMatchers(&quot;/vt/**&quot;).hasAnyAuthority(VT_SCOPE, DEVELOPER_SCOPE)\n                .anyRequest().denyAll()\n                .and()\n                .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(getJwtAuthenticationConverter());\n    }\n    Converter&lt;Jwt, AbstractAuthenticationToken&gt; getJwtAuthenticationConverter() {\n        TokenAuthenticationConverter converter = new TokenAuthenticationConverter(xsuaaServiceConfiguration);\n        converter.setLocalScopeAsAuthorities(true);\n        return converter;\n    }\n}\n</code></pre>\n<p><strong>Test-case</strong></p>\n<pre><code>@WithUserDetails(value=&quot;ram&quot;,userDetailsServiceBeanName = &quot;secureBean&quot;)\n    public void addForumTest() throws Exception {\n        //  ForumQuery forumQuery = new ForumQuery(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,&quot;1&quot;,currentTime,replies,forumLikes);\n        ForumQueryDto forumQueryDto = new ForumQueryDto(&quot;1&quot;,&quot;Query 1&quot;,&quot;Query 1 Desc&quot;,userDto,currentTime,repliesDto);\n        Mockito.when(forumService.insertQuery(Mockito.any(ForumQueryDto.class))).thenReturn(forumQueryDto);\n        MvcResult result = mockMvc.perform(MockMvcRequestBuilders.post(&quot;/user/forum/add&quot;)\n                .contentType(&quot;application/json&quot;)\n//                .header(HttpHeaders.AUTHORIZATION,&lt;JWT-TOKEN&gt;)\n                .content(objectMapper.writeValueAsString(forumQueryDto)))\n                .andReturn();\n        MockHttpServletResponse response = result.getResponse();\n        assertEquals(HttpStatus.CREATED.value(), response.getStatus());\n    }\n</code></pre>\n<p><strong>Custom-Bean</strong></p>\n<pre><code>@Bean(&quot;secureBean&quot;)\n    public UserDetailsService userDetailsService() {\n        GrantedAuthority authority = new SimpleGrantedAuthority(&quot;VT_SCOPE&quot;);\n        GrantedAuthority authority1 = new SimpleGrantedAuthority(&quot;ADMIN_SCOPE&quot;);\n        GrantedAuthority authority2 = new SimpleGrantedAuthority(&quot;USER_SCOPE&quot;);\n        GrantedAuthority authority3 = new SimpleGrantedAuthority(&quot;DEVELOPER_SCOPE&quot;);\n        UserDetails userDetails = (UserDetails) new User(&quot;ram&quot;, &quot;ram123&quot;, Arrays.asList(authority\n                , authority1, authority2, authority3));\n        return new InMemoryUserDetailsManager(Arrays.asList(userDetails));\n    }\n</code></pre>\n"},{"tags":["java","hibernate"],"comments":[{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1291427739,"post_id":4351443,"comment_id":4733837,"body_markdown":"Possible duplicate: http://stackoverflow.com/questions/821466/how-can-i-get-the-database-name-i-am-connected-to-through-hibernate","body":"Possible duplicate: <a href=\"http://stackoverflow.com/questions/821466/how-can-i-get-the-database-name-i-am-connected-to-through-hibernate\" title=\"how can i get the database name i am connected to through hibernate\">stackoverflow.com/questions/821466/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":238298,"reputation":13730,"user_id":507099,"display_name":"Costis Aivalis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1291427496,"creation_date":1291427496,"answer_id":4351499,"question_id":4351443,"body_markdown":"Since you have either a hibernate.properties or a hibernate.cfg.xml, you can allways read any information off these files.","title":"How to know underlying database name from hibernate provider","body":"<p>Since you have either a hibernate.properties or a hibernate.cfg.xml, you can allways read any information off these files.</p>\n"},{"comments":[{"owner":{"account_id":3087179,"reputation":424,"user_id":2614106,"accept_rate":86,"display_name":"DanielK"},"score":3,"creation_date":1474979507,"post_id":4351514,"comment_id":66746809,"body_markdown":"Be aware, that this method creates a abandoned connection without closing it.","body":"Be aware, that this method creates a abandoned connection without closing it."}],"tags":[],"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"comment_count":1,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1291427695,"creation_date":1291427695,"answer_id":4351514,"question_id":4351443,"body_markdown":"I think you can do it this way:\r\n\r\n    sessionFactory.getCurrentSession().connection().getMetaData().getURL()","title":"How to know underlying database name from hibernate provider","body":"<p>I think you can do it this way:</p>\n\n<pre><code>sessionFactory.getCurrentSession().connection().getMetaData().getURL()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":252201,"reputation":221,"user_id":530081,"display_name":"user530081"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1416998889,"creation_date":1291531424,"answer_id":4357715,"question_id":4351443,"body_markdown":"Thanks very much javamonkey79 and costis for responding to this question.\r\n\r\nYes - I can read the hibernate.properties/cfg.xml file - but I wanted to avoid the file reading workflow.\r\n\r\nIt appears that `Session::connection()` api is deprecated now, but it still works.\r\nWe also can retrieve the same info in another way as listed below.\r\n\r\nOPTION 1\r\n=========\r\n\r\n    Session session = sessionFactory.openSession();\r\n    String dbURL = session.connection().getMetaData().getURL().toString();\r\n    session.close();\r\n\r\nOPTION 2\r\n=========\r\n\r\n    Settings settings = ((SessionFactoryImpl) sessionFactory).getSettings();\r\n    if (settings != null) {\r\n        Connection connection = settings.getConnectionProvider().getConnection();\r\n        String dbURL  = connection.getMetaData().getURL();\r\n        connection.close();\r\n    }\r\n\r\nFor MySql, the return URL will be in form of:\r\n\r\n    jdbc:mysql://localhost:3306/edm?useUnicode=true","title":"How to know underlying database name from hibernate provider","body":"<p>Thanks very much javamonkey79 and costis for responding to this question.</p>\n\n<p>Yes - I can read the hibernate.properties/cfg.xml file - but I wanted to avoid the file reading workflow.</p>\n\n<p>It appears that <code>Session::connection()</code> api is deprecated now, but it still works.\nWe also can retrieve the same info in another way as listed below.</p>\n\n<h1>OPTION 1</h1>\n\n<pre><code>Session session = sessionFactory.openSession();\nString dbURL = session.connection().getMetaData().getURL().toString();\nsession.close();\n</code></pre>\n\n<h1>OPTION 2</h1>\n\n<pre><code>Settings settings = ((SessionFactoryImpl) sessionFactory).getSettings();\nif (settings != null) {\n    Connection connection = settings.getConnectionProvider().getConnection();\n    String dbURL  = connection.getMetaData().getURL();\n    connection.close();\n}\n</code></pre>\n\n<p>For MySql, the return URL will be in form of:</p>\n\n<pre><code>jdbc:mysql://localhost:3306/edm?useUnicode=true\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user321068"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1319532237,"creation_date":1319532237,"answer_id":7886773,"question_id":4351443,"body_markdown":"    sessionFactory.getDialect();\r\n\r\ngives you the `Dialect` and  \r\n\r\n    sessionFactory.getSettings().getConnectionProvider().getConnection().getMetaData().getURL();\r\n\r\nprovides you the connection url.\r\n\r\n**Note**: This only works with the `SessionFactoryImpl` class, not with the interface","title":"How to know underlying database name from hibernate provider","body":"<pre><code>sessionFactory.getDialect();\n</code></pre>\n\n<p>gives you the <code>Dialect</code> and  </p>\n\n<pre><code>sessionFactory.getSettings().getConnectionProvider().getConnection().getMetaData().getURL();\n</code></pre>\n\n<p>provides you the connection url.</p>\n\n<p><strong>Note</strong>: This only works with the <code>SessionFactoryImpl</code> class, not with the interface</p>\n"},{"comments":[{"owner":{"account_id":457730,"reputation":2903,"user_id":857209,"accept_rate":43,"display_name":"Glenn Lawrence"},"score":0,"creation_date":1428812481,"post_id":8937361,"comment_id":47319801,"body_markdown":"I was hoping this would be a way I could look at all Hibernate properties, but it  seems that it only works if the config is being read from the file hibernate.cfg.xml. I am using Spring to configure Hibernate so it doesn&#39;t work. Any idea how to access the SessionFactoryImpl that is created by Spring?","body":"I was hoping this would be a way I could look at all Hibernate properties, but it  seems that it only works if the config is being read from the file hibernate.cfg.xml. I am using Spring to configure Hibernate so it doesn&#39;t work. Any idea how to access the SessionFactoryImpl that is created by Spring?"},{"owner":{"account_id":457730,"reputation":2903,"user_id":857209,"accept_rate":43,"display_name":"Glenn Lawrence"},"score":1,"creation_date":1428814042,"post_id":8937361,"comment_id":47320086,"body_markdown":"I figured out that I could get the SessionFactory from Spring like this `(SessionFactoryImpl) appContext.getBean(&quot;sessionFactory&quot;);` where appContext is my ApplicationContext. Using this I can get lots of properties, but oddly not the *hibernate.connection.url* mentioned in this post.","body":"I figured out that I could get the SessionFactory from Spring like this <code>(SessionFactoryImpl) appContext.getBean(&quot;sessionFactory&quot;);</code> where appContext is my ApplicationContext. Using this I can get lots of properties, but oddly not the <i>hibernate.connection.url</i> mentioned in this post."}],"tags":[],"owner":{"account_id":1149482,"reputation":1382,"user_id":1131491,"accept_rate":64,"display_name":"louis xie"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1327039286,"creation_date":1327039286,"answer_id":8937361,"question_id":4351443,"body_markdown":"Or you can try:\r\n\r\n    SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\r\n    SessionFactoryImpl sessionFactoryImpl = (SessionFactoryImpl) sessionFactory;\r\n    Properties props = sessionFactoryImpl.getProperties();\r\n    String url = props.get(&quot;hibernate.connection.url&quot;).toString();\r\n    String[] urlArray = url.split(&quot;:&quot;);\r\n    String db_name = urlArray[urlArray.length - 1];","title":"How to know underlying database name from hibernate provider","body":"<p>Or you can try:</p>\n\n<pre><code>SessionFactory sessionFactory = new Configuration().configure().buildSessionFactory();\nSessionFactoryImpl sessionFactoryImpl = (SessionFactoryImpl) sessionFactory;\nProperties props = sessionFactoryImpl.getProperties();\nString url = props.get(\"hibernate.connection.url\").toString();\nString[] urlArray = url.split(\":\");\nString db_name = urlArray[urlArray.length - 1];\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1370392,"reputation":1080,"user_id":1305764,"accept_rate":100,"display_name":"Vito"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1383889855,"creation_date":1383889855,"answer_id":19852479,"question_id":4351443,"body_markdown":"and you can try this code: \r\n\r\n\r\n    String url = null;\r\n    try {\r\n    \turl = getSession().connection().getMetaData().getURL().toString();\r\n    } catch (HibernateException e) {\r\n    \te.printStackTrace();\r\n    } catch (SQLException e) {\r\n    \te.printStackTrace();\r\n    }\r\n    String[] urlArray = url.split(&quot;:&quot;);\r\n    String db_name = urlArray[1];\r\n\r\n\r\n\r\n;)","title":"How to know underlying database name from hibernate provider","body":"<p>and you can try this code: </p>\n\n<pre><code>String url = null;\ntry {\n    url = getSession().connection().getMetaData().getURL().toString();\n} catch (HibernateException e) {\n    e.printStackTrace();\n} catch (SQLException e) {\n    e.printStackTrace();\n}\nString[] urlArray = url.split(\":\");\nString db_name = urlArray[1];\n</code></pre>\n\n<p>;)</p>\n"},{"tags":[],"owner":{"account_id":2773242,"reputation":1056,"user_id":2387391,"accept_rate":57,"display_name":"Eagle_Eye"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1533722765,"creation_date":1533722765,"answer_id":51743968,"question_id":4351443,"body_markdown":"For Hibernate 5.2.0, to get the datasource..\r\n\r\n    SessionFactoryImplementor entityManagerFactory = (SessionFactoryImplementor) sessionFactory.openSession().getEntityManagerFactory();\r\n    DatasourceConnectionProviderImpl connectionProvider = (DatasourceConnectionProviderImpl) entityManagerFactory.getServiceRegistry().getService(ConnectionProvider.class);\r\n    BasicDataSource dataSource = (BasicDataSource) connectionProvider.getDataSource();\r\n    dataSource.getUrl();","title":"How to know underlying database name from hibernate provider","body":"<p>For Hibernate 5.2.0, to get the datasource..</p>\n\n<pre><code>SessionFactoryImplementor entityManagerFactory = (SessionFactoryImplementor) sessionFactory.openSession().getEntityManagerFactory();\nDatasourceConnectionProviderImpl connectionProvider = (DatasourceConnectionProviderImpl) entityManagerFactory.getServiceRegistry().getService(ConnectionProvider.class);\nBasicDataSource dataSource = (BasicDataSource) connectionProvider.getDataSource();\ndataSource.getUrl();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17142060,"reputation":31,"user_id":12405838,"display_name":"renuka28"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1592260372,"creation_date":1592260372,"answer_id":62398065,"question_id":4351443,"body_markdown":"Easiest way is to get the currently configured properties and then get your db URL using key &quot;hibernate.connection.url&quot;. The following code prints current session url\r\n\r\n    System.out.println(sessionFactory.getProperties().get(&quot;hibernate.connection.url&quot;))\r\n\r\non my system I get\r\n\r\n    jdbc:postgresql://localhost:15432/tempdb\r\n\r\n","title":"How to know underlying database name from hibernate provider","body":"<p>Easiest way is to get the currently configured properties and then get your db URL using key \"hibernate.connection.url\". The following code prints current session url</p>\n\n<pre><code>System.out.println(sessionFactory.getProperties().get(\"hibernate.connection.url\"))\n</code></pre>\n\n<p>on my system I get</p>\n\n<pre><code>jdbc:postgresql://localhost:15432/tempdb\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2589411,"reputation":435,"user_id":2244431,"display_name":"phray2002"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1616027146,"creation_date":1616027146,"answer_id":66683138,"question_id":4351443,"body_markdown":"You can inspect it in variable view in IntelliJ as below\r\n\r\n[![Screenshot][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/DRJ6t.png","title":"How to know underlying database name from hibernate provider","body":"<p>You can inspect it in variable view in IntelliJ as below</p>\n<p><a href=\"https://i.stack.imgur.com/DRJ6t.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DRJ6t.png\" alt=\"Screenshot\" /></a></p>\n"},{"comments":[{"owner":{"account_id":12361845,"reputation":1773,"user_id":9015744,"display_name":"Simon Pham"},"score":1,"creation_date":1626843376,"post_id":68462273,"comment_id":120997208,"body_markdown":"Please explain your lines of code so other users can understand its functionality. Thanks!","body":"Please explain your lines of code so other users can understand its functionality. Thanks!"}],"tags":[],"owner":{"account_id":13386693,"reputation":1,"user_id":9660343,"display_name":"Ricardo Dias"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626822176,"creation_date":1626822176,"answer_id":68462273,"question_id":4351443,"body_markdown":"this worked for me:\r\n```\r\nDataSource dataSource = (DataSource)entityManagerFactory.getProperties()\r\n.get(&quot;hibernate.connection.datasource&quot;);\r\n\r\nConnection connection = dataSource.getConnection();\r\nString databaseName = connection.getCatalog();\t\r\n```","title":"How to know underlying database name from hibernate provider","body":"<p>this worked for me:</p>\n<pre><code>DataSource dataSource = (DataSource)entityManagerFactory.getProperties()\n.get(&quot;hibernate.connection.datasource&quot;);\n\nConnection connection = dataSource.getConnection();\nString databaseName = connection.getCatalog();  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":285638,"reputation":10283,"user_id":584420,"accept_rate":60,"display_name":"James Jithin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684822009,"creation_date":1684822009,"answer_id":76311687,"question_id":4351443,"body_markdown":"With Hibernate5 and C3P0 managed connection pool, the following returned me the JDBC URL:\r\n\r\n        ((DriverManagerDataSource) \r\n                ((WrapperConnectionPoolDataSource) \r\n                ((ComboPooledDataSource) hibernateTemplate.getSessionFactory().getProperties()\r\n                        .get(&quot;hibernate.connection.datasource&quot;))\r\n                .getConnectionPoolDataSource())\r\n                .getNestedDataSource()).getJdbcUrl();","title":"How to know underlying database name from hibernate provider","body":"<p>With Hibernate5 and C3P0 managed connection pool, the following returned me the JDBC URL:</p>\n<pre><code>    ((DriverManagerDataSource) \n            ((WrapperConnectionPoolDataSource) \n            ((ComboPooledDataSource) hibernateTemplate.getSessionFactory().getProperties()\n                    .get(&quot;hibernate.connection.datasource&quot;))\n            .getConnectionPoolDataSource())\n            .getNestedDataSource()).getJdbcUrl();\n</code></pre>\n"}],"owner":{"account_id":252201,"reputation":221,"user_id":530081,"display_name":"user530081"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25435,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":11,"score":14,"last_activity_date":1684822009,"creation_date":1291426658,"question_id":4351443,"body_markdown":"I am using hibernate 3.x with Jboss.\r\nCurrently we support multiple databases.\r\n\r\nNow in runtime, how can I know the underlying database information ? at least name or database-dialect? (e.g. MySQL, Derby, Oracle, etc)?\r\n\r\nCan any one suggests any way to find this information?\r\nI thought hibernate SessionFactory class will provide such api - but it is not?\r\n\r\nThanks in advance, ","title":"How to know underlying database name from hibernate provider","body":"<p>I am using hibernate 3.x with Jboss.\nCurrently we support multiple databases.</p>\n\n<p>Now in runtime, how can I know the underlying database information ? at least name or database-dialect? (e.g. MySQL, Derby, Oracle, etc)?</p>\n\n<p>Can any one suggests any way to find this information?\nI thought hibernate SessionFactory class will provide such api - but it is not?</p>\n\n<p>Thanks in advance, </p>\n"},{"tags":["javascript","java","regex","regex-group","regex-lookarounds"],"comments":[{"owner":{"account_id":9727861,"reputation":2565,"user_id":7214091,"display_name":"Gast&#243;n Schabas"},"score":1,"creation_date":1683090187,"post_id":76160558,"comment_id":134311259,"body_markdown":"could you enumerate what is the input string, what is the expected behaviour and what is the expected output? also format the code","body":"could you enumerate what is the input string, what is the expected behaviour and what is the expected output? also format the code"},{"owner":{"account_id":28489718,"reputation":11,"user_id":21802533,"display_name":"javacoder"},"score":0,"creation_date":1683093721,"post_id":76160558,"comment_id":134311713,"body_markdown":"We need to assign payment for EB6764589 even if theres a space after 5. Currently above regex is only accepting space after EB and not b/w digits. I need to make regex accept space in b/w digits. @Gast&#243;nSchabas","body":"We need to assign payment for EB6764589 even if theres a space after 5. Currently above regex is only accepting space after EB and not b/w digits. I need to make regex accept space in b/w digits. @Gast&#243;nSchabas"},{"owner":{"account_id":6426510,"reputation":17091,"user_id":5527985,"display_name":"bobble bubble"},"score":0,"creation_date":1683103715,"post_id":76160558,"comment_id":134313742,"body_markdown":"You mention *Using `value.replaceAll(&quot;\\s&quot;,&quot;&quot;);` in code*. Does this work? I guess the syntax would be `value.replaceAll(new RegExp(&quot;\\\\s+&quot;,&quot;g&quot;), &#39;&#39;)` but `value.replace(/\\s+/g, &quot;&quot;)` is shorter and does the same. You can combine it with `match` and [capture](https://www.regular-expressions.info/brackets.html) 7 digits like this demo at tio.run: [`value.replace(/\\s+/g,&quot;&quot;).match(/EB(\\d{7})/)[1]`](https://tio.run/##y0osSyxOLsosKNEts/j/Pye1RKEsMac0VcFWQd3VScHM3MzEVMHCUp2LKzk/rzg/J1UvJz9dA6xEryi1ICcxOVVDP6ZYWz9dR0lJUy83sSQ5Q0Pf1UkjJqXavFZTXzPaMFbz/38A)","body":"You mention <i>Using <code>value.replaceAll(&quot;\\s&quot;,&quot;&quot;);</code> in code</i>. Does this work? I guess the syntax would be <code>value.replaceAll(new RegExp(&quot;\\\\s+&quot;,&quot;g&quot;), &#39;&#39;)</code> but <code>value.replace(&#47;\\s+&#47;g, &quot;&quot;)</code> is shorter and does the same. You can combine it with <code>match</code> and <a href=\"https://www.regular-expressions.info/brackets.html\" rel=\"nofollow noreferrer\">capture</a> 7 digits like this demo at tio.run: <a href=\"https://tio.run/##y0osSyxOLsosKNEts/j/Pye1RKEsMac0VcFWQd3VScHM3MzEVMHCUp2LKzk/rzg/J1UvJz9dA6xEryi1ICcxOVVDP6ZYWz9dR0lJUy83sSQ5Q0Pf1UkjJqXavFZTXzPaMFbz/38A\" rel=\"nofollow noreferrer\"><code>value.replace(&#47;\\s+&#47;g,&quot;&quot;).match(&#47;EB(\\d{7})&#47;)[1]</code></a>"}],"answers":[{"comments":[{"owner":{"account_id":28489718,"reputation":11,"user_id":21802533,"display_name":"javacoder"},"score":0,"creation_date":1683096371,"post_id":76160988,"comment_id":134312163,"body_markdown":"What about [0,9] before {7} and whats significance of {0,}.","body":"What about [0,9] before {7} and whats significance of {0,}."},{"owner":{"account_id":28489718,"reputation":11,"user_id":21802533,"display_name":"javacoder"},"score":0,"creation_date":1683096660,"post_id":76160988,"comment_id":134312211,"body_markdown":"Currently its accepting only one space, we need to make it accept multiple spaces as well. Earlier its was accepting multiple spaces after EB.","body":"Currently its accepting only one space, we need to make it accept multiple spaces as well. Earlier its was accepting multiple spaces after EB."},{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683096892,"post_id":76160988,"comment_id":134312266,"body_markdown":"Got you, you meant multiple spaces between words then use this one https://regex101.com/r/lZ2zAH/1","body":"Got you, you meant multiple spaces between words then use this one <a href=\"https://regex101.com/r/lZ2zAH/1\" rel=\"nofollow noreferrer\">regex101.com/r/lZ2zAH/1</a>"},{"owner":{"account_id":28489718,"reputation":11,"user_id":21802533,"display_name":"javacoder"},"score":0,"creation_date":1683097820,"post_id":76160988,"comment_id":134312450,"body_markdown":"Thanks Anton. I have one doubt why its not working with (.*)(EB)\\s*(\\d\\s*)[0-9]{7}, if i add [0,9]","body":"Thanks Anton. I have one doubt why its not working with (.*)(EB)\\s*(\\d\\s*)[0-9]{7}, if i add [0,9]"},{"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"score":0,"creation_date":1683098036,"post_id":76160988,"comment_id":134312502,"body_markdown":"Why do you need [0,9] at whole? This part (\\d\\s*){7} means you will have subsequence of any digit with or without whitespaces 7 times. Basically if you want to say any digit - you can use \\d.","body":"Why do you need [0,9] at whole? This part (\\d\\s*){7} means you will have subsequence of any digit with or without whitespaces 7 times. Basically if you want to say any digit - you can use \\d."}],"tags":[],"owner":{"account_id":10662643,"reputation":689,"user_id":7899567,"display_name":"Anton Tokmakov"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1683096913,"creation_date":1683095242,"answer_id":76160988,"question_id":76160558,"body_markdown":"You can try this regex, it should help to solve your problem:\r\n \r\n\r\n    (.*)(EB)\\s*(\\d\\s*){7}\r\n\r\nBy the way you can use regex101 to play with regex, it&#39;s very useful environment when you&#39;re working with regexps.","title":"Regex is not accepting space in between digits","body":"<p>You can try this regex, it should help to solve your problem:</p>\n<pre><code>(.*)(EB)\\s*(\\d\\s*){7}\n</code></pre>\n<p>By the way you can use regex101 to play with regex, it's very useful environment when you're working with regexps.</p>\n"},{"tags":[],"owner":{"account_id":7089168,"reputation":157141,"user_id":5424988,"display_name":"The fourth bird"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683100723,"creation_date":1683100723,"answer_id":76161625,"question_id":76160558,"body_markdown":"To match the example string you don&#39;t need the capture groups, you can match 7 times a digit preceded by optional whitespace chars (note that it can also match newlines).\r\n\r\nThen you can remove the whitespace chars from this match using replaceAll:\r\n\r\n    \\bEB(?:\\s*\\d){7}\\b\r\n\r\nIn Java\r\n\r\n    String regex = &quot;\\\\bEB(?:\\\\s*\\\\d){7}\\\\b&quot;;\r\n\r\n[Regex demo](https://regex101.com/r/ULfRL6/1)","title":"Regex is not accepting space in between digits","body":"<p>To match the example string you don't need the capture groups, you can match 7 times a digit preceded by optional whitespace chars (note that it can also match newlines).</p>\n<p>Then you can remove the whitespace chars from this match using replaceAll:</p>\n<pre><code>\\bEB(?:\\s*\\d){7}\\b\n</code></pre>\n<p>In Java</p>\n<pre><code>String regex = &quot;\\\\bEB(?:\\\\s*\\\\d){7}\\\\b&quot;;\n</code></pre>\n<p><a href=\"https://regex101.com/r/ULfRL6/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684821237,"creation_date":1684821237,"answer_id":76311633,"question_id":76160558,"body_markdown":"If the space will only ever appear after the 5th digit, then the following pattern will work.\r\n\r\n```none\r\nEB\\s(?:\\d{7}|\\d{5}\\s\\d\\d)\r\n```\r\n\r\nYou can use a literal space, also.\r\n\r\n```none\r\nEB (?:\\d{7}|\\d{5} \\d\\d)\r\n```","title":"Regex is not accepting space in between digits","body":"<p>If the space will only ever appear after the 5th digit, then the following pattern will work.</p>\n<pre class=\"lang-none prettyprint-override\"><code>EB\\s(?:\\d{7}|\\d{5}\\s\\d\\d)\n</code></pre>\n<p>You can use a literal space, also.</p>\n<pre class=\"lang-none prettyprint-override\"><code>EB (?:\\d{7}|\\d{5} \\d\\d)\n</code></pre>\n"}],"owner":{"account_id":28489718,"reputation":11,"user_id":21802533,"display_name":"javacoder"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1684821237,"creation_date":1683089943,"question_id":76160558,"body_markdown":"Using this regex: `(.*)(EB([\\s]{0,})[0-9]{7})` to remove white spaces and able to read 7 digits after `EB` but its not accepting space between digits.\r\n\r\nCurrently it&#39;s passing value with space after `EB` and not accepting space in b/w 7 digits.\r\n\r\nInput string: `EB 67645 89`\r\n\r\nUsing `value.replaceAll(&quot;\\s&quot;,&quot;&quot;);` in code.","title":"Regex is not accepting space in between digits","body":"<p>Using this regex: <code>(.*)(EB([\\s]{0,})[0-9]{7})</code> to remove white spaces and able to read 7 digits after <code>EB</code> but its not accepting space between digits.</p>\n<p>Currently it's passing value with space after <code>EB</code> and not accepting space in b/w 7 digits.</p>\n<p>Input string: <code>EB 67645 89</code></p>\n<p>Using <code>value.replaceAll(&quot;\\s&quot;,&quot;&quot;);</code> in code.</p>\n"},{"tags":["java","inner-classes"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1684772628,"post_id":76308110,"comment_id":134562332,"body_markdown":"Everything here that I can see is within the context of an enclosing class.  They all have access to each other&#39;s `private` fields and methods, that&#39;s just how it works.  There&#39;s no difference between accessing a private field from `ListPool` or from `MyLinkedList`.  It&#39;s all &quot;one class&quot; so you have access to all private members.","body":"Everything here that I can see is within the context of an enclosing class.  They all have access to each other&#39;s <code>private</code> fields and methods, that&#39;s just how it works.  There&#39;s no difference between accessing a private field from <code>ListPool</code> or from <code>MyLinkedList</code>.  It&#39;s all &quot;one class&quot; so you have access to all private members."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684773006,"post_id":76308110,"comment_id":134562411,"body_markdown":"Java Language Specification [6.6.1. Determining Accessibility](https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.6.1-100-D-D-A): &quot;*A member (...) of a class, ..., is accessible only if (i) the class, ... is accessible, and (ii) the member or constructor is declared to permit access: ..., the member or constructor is declared private. Access is permitted only when one of the following is true:  Access occurs from within the body of the top level class or interface that encloses the declaration of the member or constructor. ...*&quot; (one advantage/reason for nested classes)","body":"Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-6.html#jls-6.6.1-100-D-D-A\" rel=\"nofollow noreferrer\">6.6.1. Determining Accessibility</a>: &quot;<i>A member (...) of a class, ..., is accessible only if (i) the class, ... is accessible, and (ii) the member or constructor is declared to permit access: ..., the member or constructor is declared private. Access is permitted only when one of the following is true:  Access occurs from within the body of the top level class or interface that encloses the declaration of the member or constructor. ...</i>&quot; (one advantage/reason for nested classes)"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1684809863,"creation_date":1684809863,"answer_id":76310994,"question_id":76308110,"body_markdown":"If it&#39;s an inner or nested class, even the `private` members are accessible to the enclosing class.","title":"Accessing the private static members of nested static classes","body":"<p>If it's an inner or nested class, even the <code>private</code> members are accessible to the enclosing class.</p>\n"}],"owner":{"account_id":5324511,"reputation":89,"user_id":8441793,"display_name":"Sy Pham"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76310994,"answer_count":1,"score":0,"last_activity_date":1684821128,"creation_date":1684772056,"question_id":76308110,"body_markdown":"Consider the following code snippet:\r\n\r\n**File: ListPool.java**\r\n\r\n```\r\npackage smc;\r\n\r\nimport smc.ListPool.MyLinkedList;\r\n\r\npublic class ListPool {                          // (1) Top-level class\r\n\r\n\tpublic static class MyLinkedList {             // (2) Static member class\r\n\r\n\t\tprivate static String str = &quot;test&quot;;\t\t// (2&#39;)\r\n\r\n\t\tprivate interface ILink { }                  // (3) Static member interface\r\n\r\n\t\tpublic static class BiNode                   // (4) Static member class\r\n\t\timplements IBiLink {\r\n\r\n\t\t\tpublic static void printSimpleName() {     // (5) Static method\r\n\t\t\t\tSystem.out.println(BiNode.class.getSimpleName());\r\n\t\t\t}\r\n\r\n\t\t\tpublic void printName() {                  // (6) Instance method\r\n\t\t\t\tSystem.out.println(this.getClass().getName());\r\n\t\t\t}\r\n\t\t} // end BiNode\r\n\t} // end MyLinkedList\r\n\r\n\tinterface IBiLink\r\n\textends MyLinkedList.ILink {         // (7) Static member interface\r\n\t\t//  private static class Traversal { }           // (8) Compile-time error!\r\n\t\t//     Can only be public.\r\n\t\tclass BiTraversal { }                        // (9) Class is public and static\r\n\t} // end IBiLink\r\n\r\n\tpublic class SortedList {                      // (10) Non-static member class\r\n\t\tprivate static class SortCriteria {}         // (11) Static member class\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString test = MyLinkedList.str;\t\t\t\t// (12)\r\n\t}\r\n}\r\n```\r\n\r\nI&#39;m surprised that (7) and (12) are compiled without error as they are accessing the private field of a class. Is this something special that static nested classes bring to Java?","title":"Accessing the private static members of nested static classes","body":"<p>Consider the following code snippet:</p>\n<p><strong>File: ListPool.java</strong></p>\n<pre><code>package smc;\n\nimport smc.ListPool.MyLinkedList;\n\npublic class ListPool {                          // (1) Top-level class\n\n    public static class MyLinkedList {             // (2) Static member class\n\n        private static String str = &quot;test&quot;;     // (2')\n\n        private interface ILink { }                  // (3) Static member interface\n\n        public static class BiNode                   // (4) Static member class\n        implements IBiLink {\n\n            public static void printSimpleName() {     // (5) Static method\n                System.out.println(BiNode.class.getSimpleName());\n            }\n\n            public void printName() {                  // (6) Instance method\n                System.out.println(this.getClass().getName());\n            }\n        } // end BiNode\n    } // end MyLinkedList\n\n    interface IBiLink\n    extends MyLinkedList.ILink {         // (7) Static member interface\n        //  private static class Traversal { }           // (8) Compile-time error!\n        //     Can only be public.\n        class BiTraversal { }                        // (9) Class is public and static\n    } // end IBiLink\n\n    public class SortedList {                      // (10) Non-static member class\n        private static class SortCriteria {}         // (11) Static member class\n    }\n\n    public static void main(String[] args) {\n        String test = MyLinkedList.str;             // (12)\n    }\n}\n</code></pre>\n<p>I'm surprised that (7) and (12) are compiled without error as they are accessing the private field of a class. Is this something special that static nested classes bring to Java?</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"account_id":1056927,"reputation":1725,"user_id":1059421,"display_name":"Barny"},"score":0,"creation_date":1684832574,"post_id":76311609,"comment_id":134571012,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":28659846,"reputation":1,"user_id":21945004,"display_name":"Joseph"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684820939,"creation_date":1684820939,"question_id":76311609,"body_markdown":"I&#39;m not able to find a solution to visit menus and sub-menus while automating an website, I can visit them but the problem is the code is like 500-700 lines. I need a solution like using for loop for the problem.\r\n\r\nI expected the driver to visit the menus and it&#39;s sub menus but I was only able to visit a single menu and a single sub menu which is present in the first menu.","title":"How to visit multiple menus say a website has 5 menus, and also visit each of their sub menus by clicking them using selenium with java","body":"<p>I'm not able to find a solution to visit menus and sub-menus while automating an website, I can visit them but the problem is the code is like 500-700 lines. I need a solution like using for loop for the problem.</p>\n<p>I expected the driver to visit the menus and it's sub menus but I was only able to visit a single menu and a single sub menu which is present in the first menu.</p>\n"},{"tags":["java","reactjs","react-native","android-studio","react-redux"],"comments":[{"owner":{"account_id":19885594,"reputation":41,"user_id":14568623,"display_name":"Nassir Ghraizi"},"score":0,"creation_date":1610015331,"post_id":65610603,"comment_id":116001702,"body_markdown":"&gt; Task :app:bundleReleaseJsAndAssets FAILED","body":"&gt; Task :app:bundleReleaseJsAndAssets FAILED"}],"answers":[{"tags":[],"owner":{"account_id":4248189,"reputation":231,"user_id":3476181,"display_name":"Rashed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610016486,"creation_date":1610016486,"answer_id":65610938,"question_id":65610603,"body_markdown":"Delete All drawable dir\r\n\r\nrm -rf android/app/src/main/res/drawable-*\r\n\r\n&amp; also change the formate of Your Image\r\n\r\nThen Try to generate Again, Hope your Problem will solve.","title":"Error while trying to build an APK file for React Native project","body":"<p>Delete All drawable dir</p>\n<p>rm -rf android/app/src/main/res/drawable-*</p>\n<p>&amp; also change the formate of Your Image</p>\n<p>Then Try to generate Again, Hope your Problem will solve.</p>\n"},{"comments":[{"owner":{"account_id":19885594,"reputation":41,"user_id":14568623,"display_name":"Nassir Ghraizi"},"score":1,"creation_date":1657629520,"post_id":65610982,"comment_id":128851850,"body_markdown":"[link](http://example.com) @Sajib thanks","body":"<a href=\"http://example.com\" rel=\"nofollow noreferrer\">link</a> @Sajib thanks"}],"tags":[],"owner":{"account_id":20387901,"reputation":311,"user_id":14956443,"display_name":"Sajib saha"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1610016712,"creation_date":1610016712,"answer_id":65610982,"question_id":65610603,"body_markdown":"You Using splash screen in java file. and the splash screen image maybe.. &quot;.png&quot; file. so just change the file name &quot;.png&quot; to &quot;.jpg&quot;.....\r\n\r\nmain background in splash screen should be in .jpg...\r\n\r\n//this will help you to Removing error ","title":"Error while trying to build an APK file for React Native project","body":"<p>You Using splash screen in java file. and the splash screen image maybe.. &quot;.png&quot; file. so just change the file name &quot;.png&quot; to &quot;.jpg&quot;.....</p>\n<p>main background in splash screen should be in .jpg...</p>\n<p>//this will help you to Removing error</p>\n"},{"tags":[],"owner":{"account_id":20287355,"reputation":1667,"user_id":14879760,"display_name":"Muhammad Haidar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610020773,"creation_date":1610020773,"answer_id":65612009,"question_id":65610603,"body_markdown":"You are facing this error because some of your Icons or Images are not in the PNG extension. Make sure all of your Icons and Images are in PNG. ","title":"Error while trying to build an APK file for React Native project","body":"<p>You are facing this error because some of your Icons or Images are not in the PNG extension. Make sure all of your Icons and Images are in PNG.</p>\n"},{"tags":[],"owner":{"account_id":15966404,"reputation":7,"user_id":11521899,"display_name":"Muhammad Yasir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667904828,"creation_date":1667904828,"answer_id":74359513,"question_id":65610603,"body_markdown":"I have download some icons in .webp format and just change their extention to .png I thought it will work but it hasn&#39;t work, that why I were unable to release .apk. latter I convert all those images icons to .png and it works for me.\r\n","title":"Error while trying to build an APK file for React Native project","body":"<p>I have download some icons in .webp format and just change their extention to .png I thought it will work but it hasn't work, that why I were unable to release .apk. latter I convert all those images icons to .png and it works for me.</p>\n"},{"comments":[{"owner":{"account_id":146476,"reputation":1333,"user_id":356951,"accept_rate":79,"display_name":"sambha"},"score":0,"creation_date":1683592809,"post_id":74645813,"comment_id":134387201,"body_markdown":"My app was building fine for iOS (expo: eas build) but failed for Android. The Android error does not tell you much &amp; I spent quite a bit of time searching. This answer helped me. Thanks!","body":"My app was building fine for iOS (expo: eas build) but failed for Android. The Android error does not tell you much &amp; I spent quite a bit of time searching. This answer helped me. Thanks!"}],"tags":[],"owner":{"account_id":21865680,"reputation":39,"user_id":16155908,"display_name":"Kumail Baloch"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669915307,"creation_date":1669915307,"answer_id":74645813,"question_id":65610603,"body_markdown":"You have a folder named assets/images/ in your root project directory and a image file nour.png like assets/images/nour.png in it.\r\n\r\nFirst change this png file to jpg. you can use this https://png2jpg.com/ image convertor tool. Then after delete nour.png from assets/images and paste your downloaded nour.jpg file here.\r\nYou need to change the image extension png to jpg in your code somewhere too, means if you write nour.png somewhere in your code change it to nour.jpg.\r\nThen delete the build folder android/app/build. Now everything is done, run command\r\n\r\n    ./gradlew assemblerelease\r\nin android folder.","title":"Error while trying to build an APK file for React Native project","body":"<p>You have a folder named assets/images/ in your root project directory and a image file nour.png like assets/images/nour.png in it.</p>\n<p>First change this png file to jpg. you can use this <a href=\"https://png2jpg.com/\" rel=\"nofollow noreferrer\">https://png2jpg.com/</a> image convertor tool. Then after delete nour.png from assets/images and paste your downloaded nour.jpg file here.\nYou need to change the image extension png to jpg in your code somewhere too, means if you write nour.png somewhere in your code change it to nour.jpg.\nThen delete the build folder android/app/build. Now everything is done, run command</p>\n<pre><code>./gradlew assemblerelease\n</code></pre>\n<p>in android folder.</p>\n"}],"owner":{"account_id":19885594,"reputation":41,"user_id":14568623,"display_name":"Nassir Ghraizi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4442,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":5,"score":4,"last_activity_date":1684820804,"creation_date":1610015239,"question_id":65610603,"body_markdown":"&gt; ****Task** :app:mergeReleaseResources FAILED\r\n*FAILURE*: Build failed with an exception.\r\n* What went wrong:**\r\nExecution failed for task &#39;:app:mergeReleaseResources&#39;.\r\n&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\r\n   &gt; Android resource compilation failed\r\n   \\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: failed \r\nto read PNG signature: file does not start with PNG signature.\r\n\r\n     \\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: file failed to compile.","title":"Error while trying to build an APK file for React Native project","body":"<blockquote>\n<p>**<strong>Task</strong> :app:mergeReleaseResources FAILED\n<em>FAILURE</em>: Build failed with an exception.</p>\n</blockquote>\n<ul>\n<li>What went wrong:**\nExecution failed for task ':app:mergeReleaseResources'.</li>\n</ul>\n<blockquote>\n<p>A failure occurred while executing com.android.build.gradle.internal.tasks.Workers$ActionFacade\nAndroid resource compilation failed\n\\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: failed\nto read PNG signature: file does not start with PNG signature.</p>\n</blockquote>\n<pre><code> \\mobile\\flyfoot2\\android\\app\\build\\generated\\res\\react\\release\\drawable-mdpi\\assets_images_nour.png: AAPT: error: file failed to compile.\n</code></pre>\n"},{"tags":["java","android"],"answers":[{"comments":[{"owner":{"account_id":974068,"reputation":47448,"user_id":995926,"accept_rate":90,"display_name":"rekire"},"score":0,"creation_date":1664823553,"post_id":24532876,"comment_id":130554808,"body_markdown":"The link doesn&#39;t point to anything helpful today.","body":"The link doesn&#39;t point to anything helpful today."}],"tags":[],"owner":{"account_id":2188609,"reputation":3007,"user_id":1936366,"display_name":"Onur A."},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1684820323,"creation_date":1404308892,"answer_id":24532876,"question_id":24532672,"body_markdown":"Take a look at [`setRequestProperty()`](https://www.w3docs.com/snippets/java/adding-header-for-httpurlconnection.html) method\r\n","title":"Android how to add a header to this: new java.net.URL(&quot;http://example.com/&quot;).openStream()","body":"<p>Take a look at <a href=\"https://www.w3docs.com/snippets/java/adding-header-for-httpurlconnection.html\" rel=\"nofollow noreferrer\"><code>setRequestProperty()</code></a> method</p>\n"}],"owner":{"account_id":3039548,"reputation":14565,"user_id":2576903,"accept_rate":90,"display_name":"Kaloyan Roussev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3556,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"closed_date":1404313702,"accepted_answer_id":24532876,"answer_count":1,"score":1,"last_activity_date":1684820323,"creation_date":1404308362,"question_id":24532672,"body_markdown":"I need to send a header If-Modified-Since to this address and only download if the server returns 200 not 304. Is there a way I can add/modify the header in this code?\r\n\r\n    new java.net.URL(API.JSON_ZIP_OF_ALL_FILES).openStream()","title":"Android how to add a header to this: new java.net.URL(&quot;http://example.com/&quot;).openStream()","body":"<p>I need to send a header If-Modified-Since to this address and only download if the server returns 200 not 304. Is there a way I can add/modify the header in this code?</p>\n\n<pre><code>new java.net.URL(API.JSON_ZIP_OF_ALL_FILES).openStream()\n</code></pre>\n"},{"tags":["java","spring-boot","caching","guava","spring-cache"],"comments":[{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1684782524,"post_id":76309139,"comment_id":134564343,"body_markdown":"If the class exposes the cache, sure, why not? If it is private only, then no (unless you are allowing Reflection)","body":"If the class exposes the cache, sure, why not? If it is private only, then no (unless you are allowing Reflection)"}],"answers":[{"tags":[],"owner":{"account_id":131689,"reputation":451,"user_id":331864,"accept_rate":67,"display_name":"isomeme"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684818563,"creation_date":1684818563,"answer_id":76311430,"question_id":76309139,"body_markdown":"The phrasing of your question is a bit unclear, so if I&#39;m answering the wrong question, please try rephrasing it.\r\n\r\nA Guava cache is a Java object like any other Java object. Its visibility can be as narrow or as wide as you want it to be. I would recommend making access to it available through a method (or methods) on the class it&#39;s in, rather than directly, since that keeps the pieces of your implementation better encapsulated. But it&#39;s totally up to you.","title":"Guava Cache Access From Different Classes","body":"<p>The phrasing of your question is a bit unclear, so if I'm answering the wrong question, please try rephrasing it.</p>\n<p>A Guava cache is a Java object like any other Java object. Its visibility can be as narrow or as wide as you want it to be. I would recommend making access to it available through a method (or methods) on the class it's in, rather than directly, since that keeps the pieces of your implementation better encapsulated. But it's totally up to you.</p>\n"}],"owner":{"account_id":7817520,"reputation":141,"user_id":5911686,"display_name":"Jithesh Nair"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684818563,"creation_date":1684781593,"question_id":76309139,"body_markdown":"Is it possible to access the guava cache from any of the class within that project?\r\n\r\nSuppose if I create class cache ```bannelUrl``` within ```FetchBanner.java```, can the values from ```bannelUrl``` from any other class other than ```FetchBanner.java```?","title":"Guava Cache Access From Different Classes","body":"<p>Is it possible to access the guava cache from any of the class within that project?</p>\n<p>Suppose if I create class cache <code>bannelUrl</code> within <code>FetchBanner.java</code>, can the values from <code>bannelUrl</code> from any other class other than <code>FetchBanner.java</code>?</p>\n"},{"tags":["java","algorithm","memory","data-structures","hashmap"],"comments":[{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1684817538,"post_id":76311356,"comment_id":134568235,"body_markdown":"First, note [the `HashMap` documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html) states: &quot;_This implementation provides constant-time performance for the basic operations (get and put), **assuming the hash function disperses the elements properly among the buckets**_&quot;. And this is exactly why. The linked list you&#39;re seeing in the code is how `HashMap` handles two keys that hash to the same bucket. Figuring out which bucket to look at is still constant time, however. And you&#39;re _likely_ still not iterating the entire key set.","body":"First, note <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/HashMap.html\" rel=\"nofollow noreferrer\">the <code>HashMap</code> documentation</a> states: &quot;<i>This implementation provides constant-time performance for the basic operations (get and put), <b>assuming the hash function disperses the elements properly among the buckets</b></i>&quot;. And this is exactly why. The linked list you&#39;re seeing in the code is how <code>HashMap</code> handles two keys that hash to the same bucket. Figuring out which bucket to look at is still constant time, however. And you&#39;re <i>likely</i> still not iterating the entire key set."},{"owner":{"account_id":267086,"reputation":62435,"user_id":555045,"accept_rate":100,"display_name":"harold"},"score":0,"creation_date":1684817725,"post_id":76311356,"comment_id":134568255,"body_markdown":"This is [well known](https://stackoverflow.com/q/4553624/555045) but also note that eventually a [tree is used instead of a linked list](https://stackoverflow.com/q/31373648/555045) (this is also visible in the code you quoted, but it doesn&#39;t show the conditions under which the tree is created)","body":"This is <a href=\"https://stackoverflow.com/q/4553624/555045\">well known</a> but also note that eventually a <a href=\"https://stackoverflow.com/q/31373648/555045\">tree is used instead of a linked list</a> (this is also visible in the code you quoted, but it doesn&#39;t show the conditions under which the tree is created)"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1684817794,"post_id":76311356,"comment_id":134568260,"body_markdown":"So, yes, if somehow every key was hashed to the same bucket, then the performance degrades to O(n). Though if enough keys are hashed to the same bucket, then `HashMap` switches from a linked list to a balanced tree which, if I&#39;m not mistaken, keeps the performance to O(log(n)).","body":"So, yes, if somehow every key was hashed to the same bucket, then the performance degrades to O(n). Though if enough keys are hashed to the same bucket, then <code>HashMap</code> switches from a linked list to a balanced tree which, if I&#39;m not mistaken, keeps the performance to O(log(n))."}],"owner":{"account_id":26945933,"reputation":7,"user_id":20515929,"display_name":"Brendan B"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":78,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684817157,"creation_date":1684817157,"question_id":76311356,"body_markdown":"This is the documentation for HashMap.containsKey(). As you can see, it uses getNode(). I could be wrong, but it looks like the the hash map is still being iterated through, which would be linear time.\r\n\r\n```\r\n/**\r\n * Implements Map.get and related methods.\r\n *\r\n * @param key the key\r\n * @return the node, or null if none\r\n */\r\nfinal Node&lt;K,V&gt; getNode(Object key) {\r\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n, hash; K k;\r\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\r\n        (first = tab[(n - 1) &amp; (hash = hash(key))]) != null) {\r\n        if (first.hash == hash &amp;&amp; // always check first node\r\n            ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n            return first;\r\n        if ((e = first.next) != null) {\r\n            if (first instanceof TreeNode)\r\n                return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);\r\n            do {\r\n                if (e.hash == hash &amp;&amp;\r\n                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\r\n                    return e;\r\n            } while ((e = e.next) != null);\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\n/**\r\n * Returns {@code true} if this map contains a mapping for the\r\n * specified key.\r\n *\r\n * @param   key   The key whose presence in this map is to be tested\r\n * @return {@code true} if this map contains a mapping for the specified\r\n * key.\r\n */\r\npublic boolean containsKey(Object key) {\r\n    return getNode(key) != null;\r\n}\r\n```","title":"How is HashMap.containsKey() in Java able to run in constant time?","body":"<p>This is the documentation for HashMap.containsKey(). As you can see, it uses getNode(). I could be wrong, but it looks like the the hash map is still being iterated through, which would be linear time.</p>\n<pre><code>/**\n * Implements Map.get and related methods.\n *\n * @param key the key\n * @return the node, or null if none\n */\nfinal Node&lt;K,V&gt; getNode(Object key) {\n    Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; first, e; int n, hash; K k;\n    if ((tab = table) != null &amp;&amp; (n = tab.length) &gt; 0 &amp;&amp;\n        (first = tab[(n - 1) &amp; (hash = hash(key))]) != null) {\n        if (first.hash == hash &amp;&amp; // always check first node\n            ((k = first.key) == key || (key != null &amp;&amp; key.equals(k))))\n            return first;\n        if ((e = first.next) != null) {\n            if (first instanceof TreeNode)\n                return ((TreeNode&lt;K,V&gt;)first).getTreeNode(hash, key);\n            do {\n                if (e.hash == hash &amp;&amp;\n                    ((k = e.key) == key || (key != null &amp;&amp; key.equals(k))))\n                    return e;\n            } while ((e = e.next) != null);\n        }\n    }\n    return null;\n}\n\n/**\n * Returns {@code true} if this map contains a mapping for the\n * specified key.\n *\n * @param   key   The key whose presence in this map is to be tested\n * @return {@code true} if this map contains a mapping for the specified\n * key.\n */\npublic boolean containsKey(Object key) {\n    return getNode(key) != null;\n}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":2,"creation_date":1684683798,"post_id":76300685,"comment_id":134549474,"body_markdown":"Don&#39;t like to your code, include it in your question. Check the formatting help for how (basically, put three backticks (The &#39;`&#39; character) on a line, paste your code, another line with 3 backticks.","body":"Don&#39;t like to your code, include it in your question. Check the formatting help for how (basically, put three backticks (The &#39;`&#39; character) on a line, paste your code, another line with 3 backticks."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1684684199,"post_id":76300685,"comment_id":134549527,"body_markdown":"Yes, this isn&#39;t a &quot;please check the code in the link&quot; help site, and in fact isn&#39;t even a help site per se, but rather a question and answer site, where we hope to have high quality questions and answers that are helpful to all -- to the original poster as well as to future visitors who come to the site for solutions to similar problems. Mainly for this reason, it is best to have all code and all important resources readily visible in your question as text (for code, as code-formatted text). Please check out the [ask] and [tour] link for the details as well as the [help] link.","body":"Yes, this isn&#39;t a &quot;please check the code in the link&quot; help site, and in fact isn&#39;t even a help site per se, but rather a question and answer site, where we hope to have high quality questions and answers that are helpful to all -- to the original poster as well as to future visitors who come to the site for solutions to similar problems. Mainly for this reason, it is best to have all code and all important resources readily visible in your question as text (for code, as code-formatted text). Please check out the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and <a href=\"https://stackoverflow.com/tour\">tour</a> link for the details as well as the <a href=\"https://stackoverflow.com/help\">help center</a> link."},{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":3,"creation_date":1684686500,"post_id":76300685,"comment_id":134549810,"body_markdown":"split does not include the delimiter in the resulting array so there will never be a newline in it.","body":"split does not include the delimiter in the resulting array so there will never be a newline in it."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1684733075,"post_id":76300685,"comment_id":134554217,"body_markdown":"I think you should post a [mcve]. Are you saying that you are not getting your expected result?","body":"I think you should post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Are you saying that you are not getting your expected result?"},{"owner":{"account_id":28648346,"reputation":3,"user_id":21935848,"display_name":"Bayron Viamonte Almonte"},"score":0,"creation_date":1684740222,"post_id":76300685,"comment_id":134555274,"body_markdown":"Edited giving a minimal reproducible example. Yes, the result of the test is not the expected.","body":"Edited giving a minimal reproducible example. Yes, the result of the test is not the expected."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684816993,"creation_date":1684743610,"answer_id":76304258,"question_id":76300685,"body_markdown":"The `Scanner` class (Java 17 at least) uses the following regex to match a line separator:\r\n\r\n    \\r\\n|[\\n\\r\\u2028\\u2029\\u0085]\r\n\r\nAs you can see, this will match a CR, an LF or a CR followed by a LF&lt;sup&gt;1&lt;/sup&gt;. After matching,  line separator at the end of the line is then removed, as per the javadoc.  That means that `readLine()` will NEVER return a line that ends with an LF (i.e. `&#39;\\n&#39;`) or a CR (i.e. `&#39;\\r&#39;`).  \r\n\r\n\r\n&gt; Is there a way to read the text by lines without removing the delimiters?\r\n\r\nNot using `Scanner.nextLine()` or `BufferedReader.readLine()`.  If you really need to preserve the line separator, the simplest way is to use a `for` loop to read a characters from `BufferedReader`, recognize line separators, and assemble lines yourself.  You can then include the line separators in the line strings, or put them into a different variable.\r\n\r\nHOWEVER ... it is not obvious to me why you need to preserve the line separators if you are simply reading a CSV file.  If I was doing this, I would use `BufferedReader.readLine` to read each line, and then use a `Scanner` or `String.split` or something more sophisticated to deal with the commas and quotes.\r\n\r\nOr ... find and use a 3rd party CSV parser library and save the effort of implementing the code yourself.\r\n\r\n-----------------\r\n\r\n&lt;sup&gt;1 - ... and some other obscure codes that you&#39;ve probably never heard of.&lt;/sup&gt;\r\n","title":"Why my linebreak checker is not giving the expected result?","body":"<p>The <code>Scanner</code> class (Java 17 at least) uses the following regex to match a line separator:</p>\n<pre><code>\\r\\n|[\\n\\r\\u2028\\u2029\\u0085]\n</code></pre>\n<p>As you can see, this will match a CR, an LF or a CR followed by a LF<sup>1</sup>. After matching,  line separator at the end of the line is then removed, as per the javadoc.  That means that <code>readLine()</code> will NEVER return a line that ends with an LF (i.e. <code>'\\n'</code>) or a CR (i.e. <code>'\\r'</code>).</p>\n<blockquote>\n<p>Is there a way to read the text by lines without removing the delimiters?</p>\n</blockquote>\n<p>Not using <code>Scanner.nextLine()</code> or <code>BufferedReader.readLine()</code>.  If you really need to preserve the line separator, the simplest way is to use a <code>for</code> loop to read a characters from <code>BufferedReader</code>, recognize line separators, and assemble lines yourself.  You can then include the line separators in the line strings, or put them into a different variable.</p>\n<p>HOWEVER ... it is not obvious to me why you need to preserve the line separators if you are simply reading a CSV file.  If I was doing this, I would use <code>BufferedReader.readLine</code> to read each line, and then use a <code>Scanner</code> or <code>String.split</code> or something more sophisticated to deal with the commas and quotes.</p>\n<p>Or ... find and use a 3rd party CSV parser library and save the effort of implementing the code yourself.</p>\n<hr />\n<p><sup>1 - ... and some other obscure codes that you've probably never heard of.</sup></p>\n"}],"owner":{"account_id":28648346,"reputation":3,"user_id":21935848,"display_name":"Bayron Viamonte Almonte"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"accepted_answer_id":76304258,"answer_count":1,"score":-2,"last_activity_date":1684816993,"creation_date":1684683624,"question_id":76300685,"body_markdown":"I have created a project using Java to simulate a Library, I have a method named &quot;Arrumbadas&quot; that return those publishings which have never been lend separated by a linefeed and a test that only checks if each line of this result (&quot;Arrumbadas&quot; method) has a linefeed at the end.\r\n\r\nI have implemented &quot;Arrumbadas&quot; method as follow:\r\n\r\n   \r\n\r\n    (Omitted code)\r\n         result = new StringBuilder();\r\n          for(omitted code){\r\n           if(omitted code){\r\n             result.append(publishing).append(\\n)\r\n            }\r\n           }\r\n          return result.toString()\r\n\r\nI have implemented the test as follow:\r\n\r\n      \r\n      public static boolean hasLineFeed(String t){\r\n            Scanner text = new Scanner(t);\r\n            while(text.hasNextLine()){\r\n                String line = text.nextLine();\r\n                System.out.println(line);\r\n                if(!line.endsWith(&quot;\\n&quot;) &amp;&amp; !line.isEmpty()){\r\n                    return false;\r\n                }\r\n            }\r\n    \r\n            return true;\r\n        }\r\n\r\nGiven this certain text:\r\n\r\n    &quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\r\n    &quot;9780316769174&quot;,&quot;The Catcher in the Rye&quot;,&quot;J.R.R. Tolkien&quot;,&quot;3&quot;,&quot;0&quot;,&quot;Coming-of-age fiction&quot;\r\n    &quot;9780143124672&quot;,&quot;Moby-Dick&quot;,&quot;J.R.R. Tolkien&quot;,&quot;1&quot;,&quot;0&quot;,&quot;Adventure fiction&quot;\r\n\r\nThe output of the test is:\r\n\r\n    &quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\r\n    Has linefeed: false\r\n\r\nFigure out that .hasNextLine() doesnt include the delimiter, neither does .split() that I had used it before. Is there a way to read the text by lines without removing the delimiters?\r\n\r\n","title":"Why my linebreak checker is not giving the expected result?","body":"<p>I have created a project using Java to simulate a Library, I have a method named &quot;Arrumbadas&quot; that return those publishings which have never been lend separated by a linefeed and a test that only checks if each line of this result (&quot;Arrumbadas&quot; method) has a linefeed at the end.</p>\n<p>I have implemented &quot;Arrumbadas&quot; method as follow:</p>\n<pre><code>(Omitted code)\n     result = new StringBuilder();\n      for(omitted code){\n       if(omitted code){\n         result.append(publishing).append(\\n)\n        }\n       }\n      return result.toString()\n</code></pre>\n<p>I have implemented the test as follow:</p>\n<pre><code>  public static boolean hasLineFeed(String t){\n        Scanner text = new Scanner(t);\n        while(text.hasNextLine()){\n            String line = text.nextLine();\n            System.out.println(line);\n            if(!line.endsWith(&quot;\\n&quot;) &amp;&amp; !line.isEmpty()){\n                return false;\n            }\n        }\n\n        return true;\n    }\n</code></pre>\n<p>Given this certain text:</p>\n<pre><code>&quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\n&quot;9780316769174&quot;,&quot;The Catcher in the Rye&quot;,&quot;J.R.R. Tolkien&quot;,&quot;3&quot;,&quot;0&quot;,&quot;Coming-of-age fiction&quot;\n&quot;9780143124672&quot;,&quot;Moby-Dick&quot;,&quot;J.R.R. Tolkien&quot;,&quot;1&quot;,&quot;0&quot;,&quot;Adventure fiction&quot;\n</code></pre>\n<p>The output of the test is:</p>\n<pre><code>&quot;9780547928227&quot;,&quot;The Hobbit&quot;,&quot;J.R.R. Tolkien&quot;,&quot;2&quot;,&quot;0&quot;,&quot;High fantasy&quot;\nHas linefeed: false\n</code></pre>\n<p>Figure out that .hasNextLine() doesnt include the delimiter, neither does .split() that I had used it before. Is there a way to read the text by lines without removing the delimiters?</p>\n"},{"tags":["java","spring","eclipse","spring-boot","tomcat"],"answers":[{"comments":[{"owner":{"account_id":1518790,"reputation":958,"user_id":1419099,"accept_rate":64,"display_name":"Henrique C."},"score":1,"creation_date":1634769306,"post_id":69649564,"comment_id":123118100,"body_markdown":"Thx but the answear to this question is much more complex...\n\nYour link helped me in my search...i read this instead [ https://spring.io/blog/2014/03/07/deploying-spring-boot-applications ] and basically understood what i need to do , to deploy my project in other AS like another tomcat or JavaEE old deployment style like a war file. Wich is my goal.","body":"Thx but the answear to this question is much more complex...  Your link helped me in my search...i read this instead [ <a href=\"https://spring.io/blog/2014/03/07/deploying-spring-boot-applications\" rel=\"nofollow noreferrer\">spring.io/blog/2014/03/07/deploying-spring-boot-applications</a> ] and basically understood what i need to do , to deploy my project in other AS like another tomcat or JavaEE old deployment style like a war file. Wich is my goal."}],"tags":[],"owner":{"account_id":15663576,"reputation":2342,"user_id":11301941,"display_name":"George"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1634746315,"creation_date":1634746315,"answer_id":69649564,"question_id":69649041,"body_markdown":"You need to override the properties in the parent pom.xml .\r\n\r\n```\r\n&lt;properties&gt;\r\n......\r\n    &lt;tomcat.version&gt;10.0.11&lt;/tomcat.version&gt;\r\n......\r\n&lt;properties&gt;\r\n```\r\n\r\n[This link](https://www.springboottutorial.com/spring-boot-starter-parent) can be helpful in your case .\r\n\r\n","title":"Spring Tool Suite 4 how to change deployment server","body":"<p>You need to override the properties in the parent pom.xml .</p>\n<pre><code>&lt;properties&gt;\n......\n    &lt;tomcat.version&gt;10.0.11&lt;/tomcat.version&gt;\n......\n&lt;properties&gt;\n</code></pre>\n<p><a href=\"https://www.springboottutorial.com/spring-boot-starter-parent\" rel=\"nofollow noreferrer\">This link</a> can be helpful in your case .</p>\n"}],"owner":{"account_id":1518790,"reputation":958,"user_id":1419099,"accept_rate":64,"display_name":"Henrique C."},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":473,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684816272,"creation_date":1634744304,"question_id":69649041,"body_markdown":"How to change deployment server for project in spring tool suite 4 eclipse to another A.S. like another tomcat outside embembed tomcat?\r\n\r\nSo I have dowloaded Spring Tool Suite package pre installed in eclipse from [here][1] and followed a basic tutorial to start building a maven REST webservice app.\r\nEverything works very well, I have well builded project structure, connects to Postgres DB... etc.\r\n\r\nLater I noticed that this app runs on an internal tomcat server in this development &quot;pack&quot;, meaning there are no servers displayed.\r\n\r\n[![enter image description here][2]][2]\r\n\r\nI tried to add to eclipse the latest tomcat server ( 10 at the time ) but my project doesn&#180;t show up to add.\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n[![enter image description here][4]][4]\r\n\r\n[![Spring Tool Suite 4][5]][5]\r\n\r\n\r\n  [1]: https://spring.io/tools\r\n  [2]: https://i.stack.imgur.com/Nf72D.png\r\n  [3]: https://i.stack.imgur.com/Dh96E.png\r\n  [4]: https://i.stack.imgur.com/AJmxC.png\r\n  [5]: https://i.stack.imgur.com/53h6J.png","title":"Spring Tool Suite 4 how to change deployment server","body":"<p>How to change deployment server for project in spring tool suite 4 eclipse to another A.S. like another tomcat outside embembed tomcat?</p>\n<p>So I have dowloaded Spring Tool Suite package pre installed in eclipse from <a href=\"https://spring.io/tools\" rel=\"nofollow noreferrer\">here</a> and followed a basic tutorial to start building a maven REST webservice app.\nEverything works very well, I have well builded project structure, connects to Postgres DB... etc.</p>\n<p>Later I noticed that this app runs on an internal tomcat server in this development &quot;pack&quot;, meaning there are no servers displayed.</p>\n<p><a href=\"https://i.stack.imgur.com/Nf72D.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nf72D.png\" alt=\"enter image description here\" /></a></p>\n<p>I tried to add to eclipse the latest tomcat server ( 10 at the time ) but my project doesn´t show up to add.</p>\n<p><a href=\"https://i.stack.imgur.com/Dh96E.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Dh96E.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/AJmxC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AJmxC.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/53h6J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/53h6J.png\" alt=\"Spring Tool Suite 4\" /></a></p>\n"},{"tags":["java","pdf","pdfbox","preflight","pdfa"],"comments":[{"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"score":0,"creation_date":1684817627,"post_id":76308725,"comment_id":134568243,"body_markdown":"@KJ, I need to check pdf/a-2b compliance using pdfbox or any other java library. Is there any way to check that?","body":"@KJ, I need to check pdf/a-2b compliance using pdfbox or any other java library. Is there any way to check that?"},{"owner":{"account_id":255529,"reputation":17950,"user_id":535646,"accept_rate":40,"display_name":"Tilman Hausherr"},"score":0,"creation_date":1684827758,"post_id":76308725,"comment_id":134569932,"body_markdown":"Try VeraPDF, this is a EU funded checker","body":"Try VeraPDF, this is a EU funded checker"}],"answers":[{"tags":[],"owner":{"account_id":14313923,"reputation":8868,"user_id":10802527,"display_name":"K J"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684813691,"creation_date":1684813691,"answer_id":76311183,"question_id":76308725,"body_markdown":"The file is tolerated by some PDF applications, as many will fix such discrepancies but pdf box is detecting many oddities, I did not try to spend much time but the comments seemed potentially valid thus the file is potentially non conformant.\r\n```\r\nThe file Doc1-withHelvetica-pdfa1b.pdf is not a valid PDF/A-1b file, error(s) :\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 32264 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Length}:COSInt{8702};COSName{Subtype}:COSName{XML};COSName{Type}:COSName{Metadata};}; defined length=8702; actual length=8702, starting offset=23561\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 35134 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2574};COSName{N}:COSInt{3};COSName{Range}:COSArray{COSFloat{0.0};COSFloat{1.0};0;1065353216;0;1065353216;};}; defined length=2574; actual length=2574, starting offset=32559\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 1562 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{202};}; defined length=202; actual length=202, starting offset=1359\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 4486 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Alternate}:COSName{DeviceRGB};COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2612};COSName{N}:COSInt{3};}; defined length=2612; actual length=2612, starting offset=1873\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 4640 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{17};}; defined length=17; actual length=17, starting offset=4622\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 15067 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{10342};COSName{Length1}:COSInt{27968};}; defined length=10342; actual length=10342, starting offset=4724\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 16081 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{407};}; defined length=407; actual length=407, starting offset=15673\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 22792 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{6627};COSName{Length1}:COSInt{15080};}; defined length=6627; actual length=6627, starting offset=16164\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 23435 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{355};}; defined length=355; actual length=355, starting offset=23079\r\n1.2.2 : Body Syntax error, Expected &#39;EOL&#39; before the endstream keyword at offset 822 but found &#39;101&#39;\r\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{I}:COSInt{93};COSName{Length}:COSInt{85};COSName{S}:COSInt{39};}; defined length=85; actual length=85, starting offset=736\r\n```\r\n\r\nSo on the face of it I simply rebuilt the file using &quot;clean&quot; in MuPDF and reran for validation in PDF box.\r\n\r\n\r\n`C:\\Apps\\PDF\\inspectors\\Apache\\preflight-app-3.0.0-alpha3.jar Doc1-withHelvetica-pdfa1ba.pdf`  \r\n&gt; The file Doc1-withHelvetica-pdfa1ba.pdf is a valid PDF/A-1b file\r\n\r\nHOWEVER catch 22, now it fails others validations as it reports  \r\n&gt; The PDF structure was damaged but has been repaired. Depending on the extent of the damage, some data may theoretically have been lost (although typically this is unlikely).\r\n\r\nSo recycle by remove PDF/A compatibility and see what&#39;s wrong by regenerate as PDF/A and now the report is there is at least 1 bad font definition for Calibri (not surprising as it was previously a word document printout.) What is not obvious is there is a rogue Calibri space character at the end of the line that contains Helvetica Bold and on removal, then that reports other problems so another run through the Editors and finally with all the dross removed, both agree no more problems.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/UTHpe.png","title":"PDFBox Preflight parser is not able to detect PDF/A-1b file","body":"<p>The file is tolerated by some PDF applications, as many will fix such discrepancies but pdf box is detecting many oddities, I did not try to spend much time but the comments seemed potentially valid thus the file is potentially non conformant.</p>\n<pre><code>The file Doc1-withHelvetica-pdfa1b.pdf is not a valid PDF/A-1b file, error(s) :\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 32264 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Length}:COSInt{8702};COSName{Subtype}:COSName{XML};COSName{Type}:COSName{Metadata};}; defined length=8702; actual length=8702, starting offset=23561\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 35134 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2574};COSName{N}:COSInt{3};COSName{Range}:COSArray{COSFloat{0.0};COSFloat{1.0};0;1065353216;0;1065353216;};}; defined length=2574; actual length=2574, starting offset=32559\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 1562 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{202};}; defined length=202; actual length=202, starting offset=1359\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 4486 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Alternate}:COSName{DeviceRGB};COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{2612};COSName{N}:COSInt{3};}; defined length=2612; actual length=2612, starting offset=1873\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 4640 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{17};}; defined length=17; actual length=17, starting offset=4622\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 15067 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{10342};COSName{Length1}:COSInt{27968};}; defined length=10342; actual length=10342, starting offset=4724\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 16081 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{407};}; defined length=407; actual length=407, starting offset=15673\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 22792 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{6627};COSName{Length1}:COSInt{15080};}; defined length=6627; actual length=6627, starting offset=16164\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 23435 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{Length}:COSInt{355};}; defined length=355; actual length=355, starting offset=23079\n1.2.2 : Body Syntax error, Expected 'EOL' before the endstream keyword at offset 822 but found '101'\n1.2.5 : Body Syntax error, Stream length is invalid [dic=COSDictionary{COSName{Filter}:COSName{FlateDecode};COSName{I}:COSInt{93};COSName{Length}:COSInt{85};COSName{S}:COSInt{39};}; defined length=85; actual length=85, starting offset=736\n</code></pre>\n<p>So on the face of it I simply rebuilt the file using &quot;clean&quot; in MuPDF and reran for validation in PDF box.</p>\n<p><code>C:\\Apps\\PDF\\inspectors\\Apache\\preflight-app-3.0.0-alpha3.jar Doc1-withHelvetica-pdfa1ba.pdf</code></p>\n<blockquote>\n<p>The file Doc1-withHelvetica-pdfa1ba.pdf is a valid PDF/A-1b file</p>\n</blockquote>\n<p>HOWEVER catch 22, now it fails others validations as it reports</p>\n<blockquote>\n<p>The PDF structure was damaged but has been repaired. Depending on the extent of the damage, some data may theoretically have been lost (although typically this is unlikely).</p>\n</blockquote>\n<p>So recycle by remove PDF/A compatibility and see what's wrong by regenerate as PDF/A and now the report is there is at least 1 bad font definition for Calibri (not surprising as it was previously a word document printout.) What is not obvious is there is a rogue Calibri space character at the end of the line that contains Helvetica Bold and on removal, then that reports other problems so another run through the Editors and finally with all the dross removed, both agree no more problems.</p>\n<p><a href=\"https://i.stack.imgur.com/UTHpe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UTHpe.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":24771967,"reputation":33,"user_id":18655652,"display_name":"Tanmay Sharma"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":344,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684813691,"creation_date":1684777472,"question_id":76308725,"body_markdown":"I am using following code to detect whether a file is PDF/A-1b file or not?\r\n\r\n    public boolean isPDF_A1BFile(File file) throws IOException {\r\n            PreflightParser parser = new PreflightParser(file);\r\n            parser.parse(Format.PDF_A1B);\r\n            PreflightDocument preflightDocument = parser.getPreflightDocument();\r\n            preflightDocument.validate();\r\n    \r\n            ValidationResult validationResult = preflightDocument.getResult();\r\n            \r\n            return validationResult.isValid(); //Return false in every case\r\n        }\r\n\r\nBut it is always returning false irrespective of file is PDF/A-1b or not. I am using this [pdf/a-1b file][1]. I have validated using preflight tool in acrobat and it is saying that the file is PDF/A-1b compliance. Sharing the screenshot for the same[![enter image description here][2]][2]\r\nCan anyone please tell me whats wrong in my code or am I missing something?\r\n\r\nAlso, is there any way where I can check that the file is PDF/A-**2B** compliance or not?\r\n\r\n\r\n  [1]: https://drive.google.com/file/d/1kCd1vcRuqTKPR8DTRnunWr7CEZLyYmyN/view?usp=sharing\r\n  [2]: https://i.stack.imgur.com/AgWBl.png","title":"PDFBox Preflight parser is not able to detect PDF/A-1b file","body":"<p>I am using following code to detect whether a file is PDF/A-1b file or not?</p>\n<pre><code>public boolean isPDF_A1BFile(File file) throws IOException {\n        PreflightParser parser = new PreflightParser(file);\n        parser.parse(Format.PDF_A1B);\n        PreflightDocument preflightDocument = parser.getPreflightDocument();\n        preflightDocument.validate();\n\n        ValidationResult validationResult = preflightDocument.getResult();\n        \n        return validationResult.isValid(); //Return false in every case\n    }\n</code></pre>\n<p>But it is always returning false irrespective of file is PDF/A-1b or not. I am using this <a href=\"https://drive.google.com/file/d/1kCd1vcRuqTKPR8DTRnunWr7CEZLyYmyN/view?usp=sharing\" rel=\"nofollow noreferrer\">pdf/a-1b file</a>. I have validated using preflight tool in acrobat and it is saying that the file is PDF/A-1b compliance. Sharing the screenshot for the same<a href=\"https://i.stack.imgur.com/AgWBl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AgWBl.png\" alt=\"enter image description here\" /></a>\nCan anyone please tell me whats wrong in my code or am I missing something?</p>\n<p>Also, is there any way where I can check that the file is PDF/A-<strong>2B</strong> compliance or not?</p>\n"},{"tags":["java","spring","spring-data","spring-jdbc"],"answers":[{"tags":[],"owner":{"account_id":7988880,"reputation":1070,"user_id":9528658,"display_name":"Vladimir.V.Bvn"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1644565367,"creation_date":1644565367,"answer_id":71076622,"question_id":71076358,"body_markdown":"    long size = jdbcTemplate.queryForObject(query, Long.class);","title":"Spring jdbcTemplate retrieve numeric values from query","body":"<pre><code>long size = jdbcTemplate.queryForObject(query, Long.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2324765,"reputation":3704,"user_id":2039546,"display_name":"İsmail Y."},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644565635,"creation_date":1644565635,"answer_id":71076663,"question_id":71076358,"body_markdown":"If you look at the [`query`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-java.lang.Object:A-org.springframework.jdbc.core.RowMapper-) javadocs in `JdbcOperations` it states:\r\n\r\n&gt; **Deprecated.** as of 5.3, in favor of [query(String, RowMapper, Object...)](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-org.springframework.jdbc.core.RowMapper-java.lang.Object...-)\r\n\r\nSo you can use it like this:\r\n\r\n```java\r\nList&lt;Long&gt; sizeResults = jdbcTemplate.query(query, (rs, rowNum) -&gt;\r\n        rs.getLong(&quot;size&quot;), id, type);\r\nif (sizeResults.isEmpty()){\r\n    System.out.println(&quot;Result not found!&quot;);\r\n} else {\r\n    System.out.println(&quot;Result found!&quot;);\r\n}\r\n```\r\n\r\n***Note:** [`queryForObject`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#queryForObject-java.lang.String-org.springframework.jdbc.core.RowMapper-) throws `EmptyResultDataAccessException` for empty results. Often it is not desired behavior.*","title":"Spring jdbcTemplate retrieve numeric values from query","body":"<p>If you look at the <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-java.lang.Object:A-org.springframework.jdbc.core.RowMapper-\" rel=\"nofollow noreferrer\"><code>query</code></a> javadocs in <code>JdbcOperations</code> it states:</p>\n<blockquote>\n<p><strong>Deprecated.</strong> as of 5.3, in favor of <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#query-java.lang.String-org.springframework.jdbc.core.RowMapper-java.lang.Object...-\" rel=\"nofollow noreferrer\">query(String, RowMapper, Object...)</a></p>\n</blockquote>\n<p>So you can use it like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Long&gt; sizeResults = jdbcTemplate.query(query, (rs, rowNum) -&gt;\n        rs.getLong(&quot;size&quot;), id, type);\nif (sizeResults.isEmpty()){\n    System.out.println(&quot;Result not found!&quot;);\n} else {\n    System.out.println(&quot;Result found!&quot;);\n}\n</code></pre>\n<p><em><strong>Note:</strong> <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/JdbcOperations.html#queryForObject-java.lang.String-org.springframework.jdbc.core.RowMapper-\" rel=\"nofollow noreferrer\"><code>queryForObject</code></a> throws <code>EmptyResultDataAccessException</code> for empty results. Often it is not desired behavior.</em></p>\n"}],"owner":{"account_id":22757501,"reputation":35,"user_id":16916796,"display_name":"Giner28"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2753,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71076622,"answer_count":2,"score":1,"last_activity_date":1684812159,"creation_date":1644563706,"question_id":71076358,"body_markdown":"I have this query for my jdbcTemplate and I wanna get just the long value from the database, what should be fixed here? \r\n\r\n\r\n    String query = &quot;SELECT size from users where name = ? AND type = ?&quot;;\r\n    long size = jdbcTemplate.query(query, new Object[]{id, type}, (rs, rowNum) -&gt; \r\n    rs.getLong(&quot;size&quot;));\r\n\r\n","title":"Spring jdbcTemplate retrieve numeric values from query","body":"<p>I have this query for my jdbcTemplate and I wanna get just the long value from the database, what should be fixed here?</p>\n<pre><code>String query = &quot;SELECT size from users where name = ? AND type = ?&quot;;\nlong size = jdbcTemplate.query(query, new Object[]{id, type}, (rs, rowNum) -&gt; \nrs.getLong(&quot;size&quot;));\n</code></pre>\n"},{"tags":["java","inner-classes","anonymous-class"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684811862,"creation_date":1684811862,"answer_id":76311087,"question_id":76311067,"body_markdown":"You&#39;ll need an instance of `B`, to instantiate `C`\r\n\r\n```java\r\nA.B b = new A.B();\r\nA.C c = new A.C(b);\r\nassert c.foo() == 42;\r\n```\r\n\r\nOr, simplified.\r\n\r\n```java\r\nassert new A.C(new A.B()).foo() == 42;\r\n```\r\n\r\nIf a class contains no constructor, an empty constructor is inferred.","title":"Java inner/anon classes","body":"<p>You'll need an instance of <code>B</code>, to instantiate <code>C</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>A.B b = new A.B();\nA.C c = new A.C(b);\nassert c.foo() == 42;\n</code></pre>\n<p>Or, simplified.</p>\n<pre class=\"lang-java prettyprint-override\"><code>assert new A.C(new A.B()).foo() == 42;\n</code></pre>\n<p>If a class contains no constructor, an empty constructor is inferred.</p>\n"}],"owner":{"account_id":26235747,"reputation":47,"user_id":19910923,"display_name":"acidic231"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684811862,"creation_date":1684811508,"question_id":76311067,"body_markdown":"I&#39;m stuck on this question where we need to instantiate the C class through A\r\n```//The answer must have balanced parentheses\r\nclass A{\r\n  static class B{}\r\n  static class C{ B b;\r\n    C(B b){this.b=b;}\r\n    int foo(){return 42;}\r\n  }\r\n}\r\npublic class Exercise{\r\n\r\n  public static void main(String [] arg){\r\n    assert ([???].foo()==42);\r\n  }\r\n}     \r\n```\r\nObviously we need to instantiate the C class within the A class, however I tried doing\r\nsomething like ```A.C(new B b)``` and a few other variations, but I can&#39;t seem to figure it out, does anyone have any suggestions?\r\n","title":"Java inner/anon classes","body":"<p>I'm stuck on this question where we need to instantiate the C class through A</p>\n<pre><code>class A{\n  static class B{}\n  static class C{ B b;\n    C(B b){this.b=b;}\n    int foo(){return 42;}\n  }\n}\npublic class Exercise{\n\n  public static void main(String [] arg){\n    assert ([???].foo()==42);\n  }\n}     \n</code></pre>\n<p>Obviously we need to instantiate the C class within the A class, however I tried doing\nsomething like <code>A.C(new B b)</code> and a few other variations, but I can't seem to figure it out, does anyone have any suggestions?</p>\n"},{"tags":["java","spring-boot","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":0,"creation_date":1685334910,"post_id":76311064,"comment_id":134642047,"body_markdown":"The error says `BIGINT` is specified in a wrong place (e.g. `javaType`, `resultType`, etc.). If you still need help, you should improve your question. You should use text instead of images. And check &#39;preview&#39; before submit.  Including the entire `RoleMapper.xml` might help.","body":"The error says <code>BIGINT</code> is specified in a wrong place (e.g. <code>javaType</code>, <code>resultType</code>, etc.). If you still need help, you should improve your question. You should use text instead of images. And check &#39;preview&#39; before submit.  Including the entire <code>RoleMapper.xml</code> might help."}],"owner":{"account_id":28659103,"reputation":1,"user_id":21944391,"display_name":"zhouyanhuang"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684811472,"creation_date":1684811472,"question_id":76311064,"body_markdown":"```\r\n\r\n      mybatis always doesn&#39;t map to my xml file. The BIGINT error is not found, but the mybatis plug-in recognizes it and locates it. Have checked all corresponding class names are OK, looking forward to your answer.Have a nice day.\r\n```\r\n[enter image description here](https://i.stack.imgur.com/ytSux.png)\r\n This is the error reported\r\n     [enter image description here](https://i.stack.imgur.com/rw9dZ.png)\r\n     This is the compiled file directory\r\n      [enter image description here](https://i.stack.imgur.com/3dS3s.png)\r\n       Caused by: java.lang.ClassNotFoundException: Cannot find class: BIGINT\r\n","title":"Why is mybatis not mapping to my xml file in spring-boot java?","body":"<pre><code>\n      mybatis always doesn't map to my xml file. The BIGINT error is not found, but the mybatis plug-in recognizes it and locates it. Have checked all corresponding class names are OK, looking forward to your answer.Have a nice day.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ytSux.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThis is the error reported\n<a href=\"https://i.stack.imgur.com/rw9dZ.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nThis is the compiled file directory\n<a href=\"https://i.stack.imgur.com/3dS3s.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nCaused by: java.lang.ClassNotFoundException: Cannot find class: BIGINT</p>\n"},{"tags":["java","arrays"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":1,"creation_date":1684254026,"post_id":76265197,"comment_id":134490095,"body_markdown":"https://stackoverflow.com/questions/1200621/how-do-i-declare-and-initialize-an-array-in-java","body":"<a href=\"https://stackoverflow.com/questions/1200621/how-do-i-declare-and-initialize-an-array-in-java\" title=\"how do i declare and initialize an array in java\">stackoverflow.com/questions/1200621/&hellip;</a>"},{"owner":{"account_id":81822,"reputation":204250,"user_id":230513,"accept_rate":100,"display_name":"trashgod"},"score":0,"creation_date":1684254862,"post_id":76265197,"comment_id":134490272,"body_markdown":"If this is not a duplicate, please [edit] your question to include a [mre] that shows your revised approach.","body":"If this is not a duplicate, please <a href=\"https://stackoverflow.com/posts/76265197/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that shows your revised approach."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1684254980,"post_id":76265197,"comment_id":134490299,"body_markdown":"Your title says int array but your example uses a char array.  And what are all the dimensions for x,y,and z?","body":"Your title says int array but your example uses a char array.  And what are all the dimensions for x,y,and z?"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684255496,"post_id":76265197,"comment_id":134490427,"body_markdown":"`int x = size[2]; int y = size[0]; int z = size[1]; char[][][] map = new char[y][z][x];`","body":"<code>int x = size[2]; int y = size[0]; int z = size[1]; char[][][] map = new char[y][z][x];</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684369668,"post_id":76265197,"comment_id":134510145,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684806248,"creation_date":1684444303,"answer_id":76284528,"question_id":76265197,"body_markdown":"If I understand the question correctly, you&#39;re looking to initialize the array with a set of values.  \r\nAs opposed to initializing an array with a fixed length, and then adding the values one at a time.\r\n\r\nYour code is correct, just remove the `new` keyword.\r\n\r\n```java\r\nint[] size = { y, z, x };\r\n```","title":"How do i create a 3d array using a int array with a length of 3 to define the size of said 3d array?","body":"<p>If I understand the question correctly, you're looking to initialize the array with a set of values.<br />\nAs opposed to initializing an array with a fixed length, and then adding the values one at a time.</p>\n<p>Your code is correct, just remove the <code>new</code> keyword.</p>\n<pre class=\"lang-java prettyprint-override\"><code>int[] size = { y, z, x };\n</code></pre>\n"}],"owner":{"account_id":28613892,"reputation":19,"user_id":21908330,"display_name":"Oscar Lockard"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":5,"up_vote_count":2,"answer_count":1,"score":-3,"last_activity_date":1684811169,"creation_date":1684253843,"question_id":76265197,"body_markdown":"how do i do:\r\n`char[][][] map = new char[y][z][x];`\r\nbut define the size with:\r\n&gt; int[] size = new {y,z,x};\r\n\r\nI tried looking it up but i couldn&#39;t find anything helpful.\r\n","title":"How do i create a 3d array using a int array with a length of 3 to define the size of said 3d array?","body":"<p>how do i do:\n<code>char[][][] map = new char[y][z][x];</code>\nbut define the size with:</p>\n<blockquote>\n<p>int[] size = new {y,z,x};</p>\n</blockquote>\n<p>I tried looking it up but i couldn't find anything helpful.</p>\n"},{"tags":["java","android","alarmmanager","android-12"],"comments":[{"owner":{"account_id":7704866,"reputation":69,"user_id":5836108,"display_name":"Андрей Воробьев"},"score":0,"creation_date":1683810515,"post_id":72646917,"comment_id":134425689,"body_markdown":"It is so until you set Unrestricted battery mode in Android settings for your app. And this all is bad for user. Did you manage to do something?","body":"It is so until you set Unrestricted battery mode in Android settings for your app. And this all is bad for user. Did you manage to do something?"}],"answers":[{"tags":[],"owner":{"account_id":263656,"reputation":1,"user_id":549372,"accept_rate":100,"display_name":"Martin Zeitler"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1655407499,"creation_date":1655388114,"answer_id":72647174,"question_id":72646917,"body_markdown":"It will return `isGranted = true` when the permission is being requested the `AndroidManifest.xml`.\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\r\n\r\nAnd actually, the intent is `Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM`:\r\n\r\n    ActivityResultLauncher&lt;Intent&gt; startActivityForResult = registerForActivityResult(\r\n            new ActivityResultContracts.StartActivityForResult(), (ActivityResult result) -&gt; {\r\n                if (result.getResultCode() == RESULT_OK) {}\r\n            });\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.S_V2)\r\n    void hasPermission(@NonNull Context context) {\r\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S_V2) {\r\n\r\n            // it depends on the manifest permission, just alike the toggle does.\r\n            if (! alarmManager.canScheduleExactAlarms()) {\r\n\r\n            }\r\n\r\n            // one can only disable the permission, when the manifest requested it.\r\n            startActivityForResult.launch(new Intent(\r\n                    Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM,\r\n                    Uri.parse(&quot;package:&quot; + getPackageName())\r\n            ));\r\n        }\r\n    }\r\n\r\nListen for broadcast action [`AlarmManager.ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED`](https://developer.android.com/reference/android/app/AlarmManager#ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED).\r\n\r\nAnd there&#39;s also permission [`USE_EXACT_ALARM`](https://developer.android.com/reference/android/Manifest.permission#USE_EXACT_ALARM), when targeting API `33` onwards.\r\n\r\nSee behavioral changes: [exact alarm permission](https://developer.android.com/about/versions/12/behavior-changes-12#exact-alarm-permission).","title":"Can&#39;t toggle alarms and reminders permission","body":"<p>It will return <code>isGranted = true</code> when the permission is being requested the <code>AndroidManifest.xml</code>.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\n</code></pre>\n<p>And actually, the intent is <code>Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM</code>:</p>\n<pre><code>ActivityResultLauncher&lt;Intent&gt; startActivityForResult = registerForActivityResult(\n        new ActivityResultContracts.StartActivityForResult(), (ActivityResult result) -&gt; {\n            if (result.getResultCode() == RESULT_OK) {}\n        });\n\n@RequiresApi(api = Build.VERSION_CODES.S_V2)\nvoid hasPermission(@NonNull Context context) {\n    AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S_V2) {\n\n        // it depends on the manifest permission, just alike the toggle does.\n        if (! alarmManager.canScheduleExactAlarms()) {\n\n        }\n\n        // one can only disable the permission, when the manifest requested it.\n        startActivityForResult.launch(new Intent(\n                Settings.ACTION_REQUEST_SCHEDULE_EXACT_ALARM,\n                Uri.parse(&quot;package:&quot; + getPackageName())\n        ));\n    }\n}\n</code></pre>\n<p>Listen for broadcast action <a href=\"https://developer.android.com/reference/android/app/AlarmManager#ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED\" rel=\"nofollow noreferrer\"><code>AlarmManager.ACTION_SCHEDULE_EXACT_ALARM_PERMISSION_STATE_CHANGED</code></a>.</p>\n<p>And there's also permission <a href=\"https://developer.android.com/reference/android/Manifest.permission#USE_EXACT_ALARM\" rel=\"nofollow noreferrer\"><code>USE_EXACT_ALARM</code></a>, when targeting API <code>33</code> onwards.</p>\n<p>See behavioral changes: <a href=\"https://developer.android.com/about/versions/12/behavior-changes-12#exact-alarm-permission\" rel=\"nofollow noreferrer\">exact alarm permission</a>.</p>\n"}],"owner":{"account_id":17952829,"reputation":87,"user_id":13045597,"display_name":"Tomasz Stępnik"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":847,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684809685,"creation_date":1655387078,"question_id":72646917,"body_markdown":"I have app which set alarms. I use this code to ask user for permission:\r\n\r\n    Intent intent = new Intent(\r\n    &quot;android.settings.REQUEST_SCHEDULE_EXACT_ALARM&quot;,\r\n     Uri.parse(&quot;package:&quot;+ getPackageName())\r\n    );\r\n     someActivityResultLauncher.launch(intent);\r\n\r\nIn manifest I added permission:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\r\n\r\nWhen I click the button which launch the intent I can see:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/xb7Qh.png\r\n\r\nBut I can&#39;t toggle button with permission and I don&#39;t know why.","title":"Can&#39;t toggle alarms and reminders permission","body":"<p>I have app which set alarms. I use this code to ask user for permission:</p>\n<pre><code>Intent intent = new Intent(\n&quot;android.settings.REQUEST_SCHEDULE_EXACT_ALARM&quot;,\n Uri.parse(&quot;package:&quot;+ getPackageName())\n);\n someActivityResultLauncher.launch(intent);\n</code></pre>\n<p>In manifest I added permission:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SCHEDULE_EXACT_ALARM&quot;/&gt;\n</code></pre>\n<p>When I click the button which launch the intent I can see:</p>\n<p><a href=\"https://i.stack.imgur.com/xb7Qh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xb7Qh.png\" alt=\"enter image description here\" /></a></p>\n<p>But I can't toggle button with permission and I don't know why.</p>\n"},{"tags":["java","methods","return-value"],"answers":[{"tags":[],"owner":{"account_id":9664937,"reputation":69,"user_id":7171710,"display_name":"Abned"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684776385,"creation_date":1684776385,"answer_id":76308613,"question_id":76308524,"body_markdown":"You can&#39;t do a return like you do in java. You should change a return type of **play** to array if you want call this method to return two values.\r\n\r\nMy suggestion is to change **play** and call it from constructor.\r\n```\r\nimport java.util.Scanner;\r\n\r\npublic class UI {\r\n    Scanner input = new Scanner(System.in);\r\n    int Store, Week;\r\n    \r\n    public UI() {\r\n        play();\r\n    }\r\n\r\n    public void play() {\r\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\r\n        Store = input.nextInt();`\r\n\r\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\r\n        Week = input.nextInt();\r\n    }\r\n}\r\n```\r\n","title":"return the Scanner inputs by calling the methods and return it to the public class value","body":"<p>You can't do a return like you do in java. You should change a return type of <strong>play</strong> to array if you want call this method to return two values.</p>\n<p>My suggestion is to change <strong>play</strong> and call it from constructor.</p>\n<pre><code>import java.util.Scanner;\n\npublic class UI {\n    Scanner input = new Scanner(System.in);\n    int Store, Week;\n    \n    public UI() {\n        play();\n    }\n\n    public void play() {\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\n        Store = input.nextInt();`\n\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\n        Week = input.nextInt();\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684809123,"creation_date":1684809123,"answer_id":76310961,"question_id":76308524,"body_markdown":"The `play` method doesn&#39;t need to return a value.\r\n\r\nIf the values are fields, you can simply assign them from within the method.\r\n\r\n```java\r\npublic class UI {\r\n    Scanner input = new Scanner(System.in);\r\n    int store, week;\r\n\r\n    void play() {\r\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\r\n        store = input.nextInt();\r\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\r\n        week = input.nextInt();\r\n    }\r\n}\r\n```","title":"return the Scanner inputs by calling the methods and return it to the public class value","body":"<p>The <code>play</code> method doesn't need to return a value.</p>\n<p>If the values are fields, you can simply assign them from within the method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class UI {\n    Scanner input = new Scanner(System.in);\n    int store, week;\n\n    void play() {\n        System.out.print(&quot; Please enter the store #(1-6)&quot;);\n        store = input.nextInt();\n        System.out.print(&quot;please enter the operation (1-7)&quot;);\n        week = input.nextInt();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28596526,"reputation":11,"user_id":21894510,"display_name":"coding beginner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1684809123,"creation_date":1684775670,"question_id":76308524,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class UI {\r\nScanner input = new Scanner(System.in);\r\n\r\n    int Store ,Week = play();\r\n\r\n    public int play() {\r\n\r\n           System.out.print(&quot; Please enter the store #(1-6)&quot;);\r\n           Store = input.nextInt();`\r\n\r\n           System.out.print(&quot;please enter the operation (1-7)&quot;);\r\n           Week = input.nextInt();\r\n\r\nreturn Store,Week;\r\n}\r\n\r\n}\r\n```\r\n\r\nhow can I possibly return Store and Week value into ui class. So I can use these values for further coding.","title":"return the Scanner inputs by calling the methods and return it to the public class value","body":"<pre><code>import java.util.Scanner;\n\npublic class UI {\nScanner input = new Scanner(System.in);\n\n    int Store ,Week = play();\n\n    public int play() {\n\n           System.out.print(&quot; Please enter the store #(1-6)&quot;);\n           Store = input.nextInt();`\n\n           System.out.print(&quot;please enter the operation (1-7)&quot;);\n           Week = input.nextInt();\n\nreturn Store,Week;\n}\n\n}\n</code></pre>\n<p>how can I possibly return Store and Week value into ui class. So I can use these values for further coding.</p>\n"},{"tags":["java","regex","logstash","logstash-configuration","logstash-file"],"comments":[{"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"score":0,"creation_date":1684781193,"post_id":76308969,"comment_id":134564085,"body_markdown":"To clarify your question, what part of the provided text would you like extracted?  The `testt`, `**`, and `xls` values?","body":"To clarify your question, what part of the provided text would you like extracted?  The <code>testt</code>, <code>**</code>, and <code>xls</code> values?"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1684808590,"creation_date":1684782699,"answer_id":76309258,"question_id":76308969,"body_markdown":"To reiterate, you&#39;re saying that within the log-file there are sections which start and end with the example text you provided.\r\n\r\nTo capture these sections, you can use the following regular expression pattern.\r\n\r\n```regex\r\n(?s)(\\d{4}-\\d\\d-\\d\\d .+?rspDesc.+?$)\r\n```\r\n\r\n- Use the `s` flag to enable single-line mode, causing a `.` to additionally match new-line characters.  \r\n- The beginning of the pattern will match the time-stamp.  \r\n- Then, match all characters up to &quot;rspDesc&quot;.  \r\n- Finally, continue until the end of the line is reached.","title":"What is the best way to extract request and response data from a log file using Logstash and regex?","body":"<p>To reiterate, you're saying that within the log-file there are sections which start and end with the example text you provided.</p>\n<p>To capture these sections, you can use the following regular expression pattern.</p>\n<pre><code>(?s)(\\d{4}-\\d\\d-\\d\\d .+?rspDesc.+?$)\n</code></pre>\n<ul>\n<li>Use the <code>s</code> flag to enable single-line mode, causing a <code>.</code> to additionally match new-line characters.</li>\n<li>The beginning of the pattern will match the time-stamp.</li>\n<li>Then, match all characters up to &quot;rspDesc&quot;.</li>\n<li>Finally, continue until the end of the line is reached.</li>\n</ul>\n"}],"owner":{"account_id":18339487,"reputation":37,"user_id":13356110,"display_name":"Hamzeh Abu Ajamieh"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":102,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1684808590,"creation_date":1684779979,"question_id":76308969,"body_markdown":"I have application log file which contains the application requests and responses, the complete request and response looks like the below, I tried different patterns using RegEx but unfortunately without any luck, can some one suggest what should I change :\r\n\r\npattern =&gt; \r\n```\r\n&quot;\r\n(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$)\r\n&quot;\r\n```\r\n\r\n    2023-05-11 00:20:26,103 [http-apr-7777-exec-46] INFO com.welcome.ws.AccountWebServiceImpl. - Request given by the user\r\n    \r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\r\n    &lt;ns2:GetCustomerBalanceReq xmlns=&quot;url&quot; xmlns:ns2=&quot;url&quot;&gt;\r\n    \r\n    testt\r\n    **\r\n    xls\r\n    \r\n    ns2:ID/EID/5000000004/123456****1234&lt;/ns2:ID&gt;\r\n    &lt;/ns2:GetCustomerBalanceReq&gt;\r\n    \r\n    2023-05-11 00:20:26,144 [http-apr-7777-exec-46] INFO com.welcome.svc.AccountService. - rspCode is:1001 and rspDesc is:Account or Media does not Exist\r\n\r\nI was trying this regex but it wasn&#39;t matching anything \r\n\r\n    &quot;(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$) \r\n\r\n","title":"What is the best way to extract request and response data from a log file using Logstash and regex?","body":"<p>I have application log file which contains the application requests and responses, the complete request and response looks like the below, I tried different patterns using RegEx but unfortunately without any luck, can some one suggest what should I change :</p>\n<p>pattern =&gt;</p>\n<pre><code>&quot;\n(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$)\n&quot;\n</code></pre>\n<pre><code>2023-05-11 00:20:26,103 [http-apr-7777-exec-46] INFO com.welcome.ws.AccountWebServiceImpl. - Request given by the user\n\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt;\n&lt;ns2:GetCustomerBalanceReq xmlns=&quot;url&quot; xmlns:ns2=&quot;url&quot;&gt;\n\ntestt\n**\nxls\n\nns2:ID/EID/5000000004/123456****1234&lt;/ns2:ID&gt;\n&lt;/ns2:GetCustomerBalanceReq&gt;\n\n2023-05-11 00:20:26,144 [http-apr-7777-exec-46] INFO com.welcome.svc.AccountService. - rspCode is:1001 and rspDesc is:Account or Media does not Exist\n</code></pre>\n<p>I was trying this regex but it wasn't matching anything</p>\n<pre><code>&quot;(?m)\\b\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d{3}\\b.?\\bRequest given by the user\\b.?\\brspDesc is\\b(?!.\\n)..?(?=\\R|$) \n</code></pre>\n"},{"tags":["java","arrays","swing","graphics"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1684808235,"post_id":76310894,"comment_id":134567419,"body_markdown":"Check out: https://stackoverflow.com/a/54028681/131872 for an example to get you started. It uses a Swing Timer to animate multiple objects. You will be able to simplify the logic. Note that your Polygon object should be created relative to offset (0, 0). Then in the painting method you would use the g.translate(...) method to move the object to its new location. Maybe you would even want to paint the projectile to a BufferedImage, then you can simply paint the image at its new location each time the Timer fires. This will be more efficient.","body":"Check out: <a href=\"https://stackoverflow.com/a/54028681/131872\">stackoverflow.com/a/54028681/131872</a> for an example to get you started. It uses a Swing Timer to animate multiple objects. You will be able to simplify the logic. Note that your Polygon object should be created relative to offset (0, 0). Then in the painting method you would use the g.translate(...) method to move the object to its new location. Maybe you would even want to paint the projectile to a BufferedImage, then you can simply paint the image at its new location each time the Timer fires. This will be more efficient."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1684810981,"post_id":76310894,"comment_id":134567644,"body_markdown":"For [example](https://stackoverflow.com/questions/41785697/graphics-stuttering-in-java-space-invaders/41787291#41787291); [example](https://stackoverflow.com/questions/72411743/how-to-move-paint-graphics-along-slope/72412859#72412859); [example](https://stackoverflow.com/questions/35003520/program-not-painting-screen-properly/35004777#35004777);","body":"For <a href=\"https://stackoverflow.com/questions/41785697/graphics-stuttering-in-java-space-invaders/41787291#41787291\">example</a>; <a href=\"https://stackoverflow.com/questions/72411743/how-to-move-paint-graphics-along-slope/72412859#72412859\">example</a>; <a href=\"https://stackoverflow.com/questions/35003520/program-not-painting-screen-properly/35004777#35004777\">example</a>;"}],"owner":{"account_id":26134584,"reputation":21,"user_id":19824755,"display_name":"shge"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1684808563,"creation_date":1684807821,"question_id":76310894,"body_markdown":"I have a Java final, and I would like to make a bullet hell type game, but what I&#39;m stumped on is how to make the projectiles move. My first idea would be to constantly update the projectile; I just don&#39;t know how to do that. Any ideas?\r\n\r\n```\r\n//outer polygon\r\ng.setColor(Color.ORANGE);\r\nPolygon projectile = new Polygon();\r\nprojectile.addPoint(220,100);\r\nprojectile.addPoint(224,106);\r\nprojectile.addPoint(227,110);\r\nprojectile.addPoint(227,128);\r\nprojectile.addPoint(222,140);\r\nprojectile.addPoint(216,140);\r\nprojectile.addPoint(208,128);\r\nprojectile.addPoint(208,110);\r\nprojectile.addPoint(213,104);\r\nprojectile.addPoint(215,100);\r\ng.fillPolygon(projectile);\r\n\r\n//inner polygon, like a highlight\r\ng.setColor(Color.CYAN);\r\nPolygon innerColor = new Polygon();\r\nint scaleFactor = 80; \r\ndouble scale = scaleFactor / 100.0;\r\nfor (int i = 0; i &lt; projectile.npoints; i++) {\r\n    int smallX = (int) ((projectile.xpoints[i] - 220) * scale);\r\n    int smallY = (int) ((projectile.ypoints[i] - 120) * scale);\r\n    int x = 220 + smallX;\r\n    int y = 120 + smallY;\r\n    innerColor.addPoint(x, y);\r\n}\r\ng.fillPolygon(innerColor);\r\n```\r\n","title":"How would I make a projectile move using java.swing by constantly updating its points?","body":"<p>I have a Java final, and I would like to make a bullet hell type game, but what I'm stumped on is how to make the projectiles move. My first idea would be to constantly update the projectile; I just don't know how to do that. Any ideas?</p>\n<pre><code>//outer polygon\ng.setColor(Color.ORANGE);\nPolygon projectile = new Polygon();\nprojectile.addPoint(220,100);\nprojectile.addPoint(224,106);\nprojectile.addPoint(227,110);\nprojectile.addPoint(227,128);\nprojectile.addPoint(222,140);\nprojectile.addPoint(216,140);\nprojectile.addPoint(208,128);\nprojectile.addPoint(208,110);\nprojectile.addPoint(213,104);\nprojectile.addPoint(215,100);\ng.fillPolygon(projectile);\n\n//inner polygon, like a highlight\ng.setColor(Color.CYAN);\nPolygon innerColor = new Polygon();\nint scaleFactor = 80; \ndouble scale = scaleFactor / 100.0;\nfor (int i = 0; i &lt; projectile.npoints; i++) {\n    int smallX = (int) ((projectile.xpoints[i] - 220) * scale);\n    int smallY = (int) ((projectile.ypoints[i] - 120) * scale);\n    int x = 220 + smallX;\n    int y = 120 + smallY;\n    innerColor.addPoint(x, y);\n}\ng.fillPolygon(innerColor);\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1684803493,"post_id":76310692,"comment_id":134567055,"body_markdown":"`NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver` looks like a missing runtime dependency","body":"<code>NoClassDefFoundError: org&#47;springframework&#47;security&#47;oauth2&#47;server&#47;resource&#47;web&#47;Bear&zwnj;&#8203;erTokenResolver</code> looks like a missing runtime dependency"},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1684803626,"post_id":76310692,"comment_id":134567071,"body_markdown":"Also check out [this SO question](https://stackoverflow.com/a/75829647/18157), which I found by searching for the NoClassDefFoundError message text.","body":"Also check out <a href=\"https://stackoverflow.com/a/75829647/18157\">this SO question</a>, which I found by searching for the NoClassDefFoundError message text."}],"answers":[{"tags":[],"owner":{"account_id":26294109,"reputation":242,"user_id":19960660,"display_name":"Ivan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684808245,"creation_date":1684808245,"answer_id":76310923,"question_id":76310692,"body_markdown":"Clean and Build your application through your preferred build tool manager (ex. Gradle), then check back again, if the issue still persists it might miss a dependency in the pom.xml (if maven) or build.gradle (if gradle) file.","title":"NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver","body":"<p>Clean and Build your application through your preferred build tool manager (ex. Gradle), then check back again, if the issue still persists it might miss a dependency in the pom.xml (if maven) or build.gradle (if gradle) file.</p>\n"}],"owner":{"account_id":8100499,"reputation":485,"user_id":6103665,"accept_rate":40,"display_name":"Gerald Mathabela"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":298,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684808245,"creation_date":1684803331,"question_id":76310692,"body_markdown":"Authenticating Azure AD token to authorize some endpoints/controllers\r\n\r\nSecurity configuration\r\n\r\nCompilation Error\r\n```\r\nError creating bean with name &#39;springSecurityFilterChain&#39; defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method &#39;springSecurityFilterChain&#39; threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver\r\n```\r\n\r\n```\r\n@Configuration\r\n@EnableWebSecurity\r\n@EnableGlobalMethodSecurity(prePostEnabled = true)\r\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n    @Autowired\r\n    private JwtAuthenticationEntryPoint unauthorizedHandler;\r\n\r\n    @Autowired\r\n    private TokenFilter tokenFilter;\r\n\r\n    @Override\r\n    protected void configure(HttpSecurity http) throws Exception {\r\n        http.cors().and().csrf().disable()\r\n                .authorizeRequests()\r\n                .antMatchers(\r\n                        &quot;/api/authenticate/username&quot;)\r\n                .permitAll().anyRequest().authenticated().and()\r\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler)\r\n                .and()\r\n                .oauth2ResourceServer()\r\n                .jwt()\r\n                .jwtAuthenticationConverter(new AADJwtBearerTokenAuthenticationConverter());\r\n    }\r\n\r\n}\r\n```","title":"NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver","body":"<p>Authenticating Azure AD token to authorize some endpoints/controllers</p>\n<p>Security configuration</p>\n<p>Compilation Error</p>\n<pre><code>Error creating bean with name 'springSecurityFilterChain' defined in class path resource [org/springframework/security/config/annotation/web/configuration/WebSecurityConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [javax.servlet.Filter]: Factory method 'springSecurityFilterChain' threw exception; nested exception is java.lang.NoClassDefFoundError: org/springframework/security/oauth2/server/resource/web/BearerTokenResolver\n</code></pre>\n<pre><code>@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    private JwtAuthenticationEntryPoint unauthorizedHandler;\n\n    @Autowired\n    private TokenFilter tokenFilter;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http.cors().and().csrf().disable()\n                .authorizeRequests()\n                .antMatchers(\n                        &quot;/api/authenticate/username&quot;)\n                .permitAll().anyRequest().authenticated().and()\n                .exceptionHandling().authenticationEntryPoint(unauthorizedHandler)\n                .and()\n                .oauth2ResourceServer()\n                .jwt()\n                .jwtAuthenticationConverter(new AADJwtBearerTokenAuthenticationConverter());\n    }\n\n}\n</code></pre>\n"},{"tags":["java","android-studio","firebase-realtime-database","get","retrofit2"],"comments":[{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1684802546,"post_id":76310396,"comment_id":134566974,"body_markdown":"From the structure of your code it looks like `enqueue` queues a callback object, which will then be executed asynchronously. In other words, your code continues onward in your thread while the callback is run on another thread.  If you expect the return to wait for completion of the request you will need to synchronize.  That will depend on the implementation of `TokensService`.","body":"From the structure of your code it looks like <code>enqueue</code> queues a callback object, which will then be executed asynchronously. In other words, your code continues onward in your thread while the callback is run on another thread.  If you expect the return to wait for completion of the request you will need to synchronize.  That will depend on the implementation of <code>TokensService</code>."},{"owner":{"account_id":28600107,"reputation":1,"user_id":21897270,"display_name":"DFDev3"},"score":0,"creation_date":1684807699,"post_id":76310396,"comment_id":134567378,"body_markdown":"I just updated the question with TokensService interface. How should I modify it in order to make execute() a suitable option for the request?","body":"I just updated the question with TokensService interface. How should I modify it in order to make execute() a suitable option for the request?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684821295,"post_id":76310396,"comment_id":134568679,"body_markdown":"There is no way you can return the `listTokens` as a result of a method, even if you&#39;re using Retrofit. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this [resource](https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5).","body":"There is no way you can return the <code>listTokens</code> as a result of a method, even if you&#39;re using Retrofit. Firebase API is asynchronous. So please check the duplicate to see how can you solve this using a callback. You might also be interested in reading this <a href=\"https://medium.com/firebase-tips-tricks/how-to-read-data-from-firebase-realtime-database-using-get-269ef3e179c5\" rel=\"nofollow noreferrer\">resource</a>."}],"owner":{"account_id":28600107,"reputation":1,"user_id":21897270,"display_name":"DFDev3"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1684821317,"answer_count":0,"score":0,"last_activity_date":1684807827,"creation_date":1684797205,"question_id":76310396,"body_markdown":"I am currently trying to get tokens from a Realtime Database (Firebase) using Retrofit2 and Gson, in Android Studio. My API class and TokensService is correctly defined, and I&#39;m using the .enqueue() method in order to perform the GET command. \r\n\r\n\r\nTokensService\r\n```\r\npublic interface TokensService {\r\n\r\n    @GET(&quot;Tokens.json&quot;)\r\n    Call&lt;Object&gt; getAllTokens();\r\n\r\n    @POST(&quot;Tokens.json&quot;)\r\n    Call&lt;Object&gt; postToken(@Body Tokens miToken);\r\n\r\n}\r\n```\r\n\r\nHelperTokens\r\n\r\n```\r\npublic ArrayList&lt;Tokens&gt; getTokens() {\r\n        Arraylist&lt;Tokens&gt; listTokens=new ArrayList&lt;&gt;();\r\n        Retrofit myRetro = APIService.getInstancia();\r\n        TokensService myTokensService = myRetro.create(TokensService.class);\r\n\r\n            myTokensService.getAllTokens().enqueue(new Callback&lt;Object&gt;() {\r\n                @Override\r\n                public void onResponse(Call&lt;Object&gt; call, Response&lt;Object&gt; response) {\r\n\r\n                    //Here, I verified that the info is being received in the response.body()\r\n\r\n                    Map&lt;String,Map&gt; datos = (Map&lt;String, Map&gt;) response.body();\r\n\r\n                    for (Map.Entry&lt;String, Map&gt; item : datos.entrySet()){\r\n                        Log.d(&quot;Entered the for loop&quot;,&quot;iterations&quot;);\r\n                        Tokens eachToken = new Tokens();\r\n                        eachToken.setTheToken((String) item.getValue().get(&quot;theToken&quot;));\r\n                        eachToken.setfCreacion((String) item.getValue().get(&quot;fCreacion&quot;));\r\n                        eachToken.setLimited((double) item.getValue().get(&quot;isLimited&quot;));\r\n                        eachToken.setfVencimiento((String) item.getValue().get(&quot;fVencimiento&quot;));\r\n\r\n                        //Here, I assign each attribute to a new instance of &quot;Tokens&quot; and add it\r\n                        //to the Arraylist that will be returned from getTokens()\r\n\r\n                        listTokens.add(eachToken);\r\n                    }\r\n                    Log.d(&quot;Finishing onResponse, this is the Arraylist&quot;,listTokens.toString());\r\n                }\r\n                @Override\r\n                public void onFailure(Call&lt;Object&gt; call, Throwable t) {\r\n                    Log.d(&quot;Fallo&quot;,t.getMessage());\r\n\r\n                }\r\n            });\r\n\r\n        Log.d(&quot;Arraylist about to be returned&quot;,listTokens.toString());\r\n\r\n        return listTokens;\r\n\r\n    }\r\n```\r\n\r\n\r\nHowever, I&#39;m having trouble with getting this right. There is no error, but the execution order looks a bit weird. As soon as I call the method getTokens() on my java.class, it goes through each line, creates the Arraylist, gets the Retrofit instance (singleton), creates the TokensService class, and finally arrives at the getAllTokens().enqueue().\r\n\r\nBut it returns listTokens before entering the onResponse/onFailure. It returns an empty array, and just then goes into the onResponse and performs all it&#39;s tasks switfly. But there&#39;s nothing I can do with the empty Arraylist it returns. Is almost like onResponse executes with a delay\r\n\r\nCheck the Logs and compare them to the following Logcat, so you can get what I&#39;m talking about.\r\n\r\nANNOTATIONS:\r\n\r\nThe class for a singular instance is called Tokens, in plural. &quot;Token&quot; would be hard to work with, since is a word used in a lot of methods and commands, and etc. So keep it in mind.\r\n\r\nI just have one single Tokens up in the Realtime Database, so in the &quot;filled&quot; listTokens, you can only observe 1 Tokens being added. It&#39;s not because the for is only iterating once. I&#39;ve tested it, and iterates as many times as there are Tokens in the database.\r\n\r\nSince I first thought it may be a online-type issue, like a little delay in the connection, I tried to Thread.sleep() the program, so that the connection would have time more than enough to perform it&#39;s duties. But no matter how much time it sleeps, the return command keeps executing before the onResponse","title":"enqueue.onResponse() executing after return statemente in a GET request","body":"<p>I am currently trying to get tokens from a Realtime Database (Firebase) using Retrofit2 and Gson, in Android Studio. My API class and TokensService is correctly defined, and I'm using the .enqueue() method in order to perform the GET command.</p>\n<p>TokensService</p>\n<pre><code>public interface TokensService {\n\n    @GET(&quot;Tokens.json&quot;)\n    Call&lt;Object&gt; getAllTokens();\n\n    @POST(&quot;Tokens.json&quot;)\n    Call&lt;Object&gt; postToken(@Body Tokens miToken);\n\n}\n</code></pre>\n<p>HelperTokens</p>\n<pre><code>public ArrayList&lt;Tokens&gt; getTokens() {\n        Arraylist&lt;Tokens&gt; listTokens=new ArrayList&lt;&gt;();\n        Retrofit myRetro = APIService.getInstancia();\n        TokensService myTokensService = myRetro.create(TokensService.class);\n\n            myTokensService.getAllTokens().enqueue(new Callback&lt;Object&gt;() {\n                @Override\n                public void onResponse(Call&lt;Object&gt; call, Response&lt;Object&gt; response) {\n\n                    //Here, I verified that the info is being received in the response.body()\n\n                    Map&lt;String,Map&gt; datos = (Map&lt;String, Map&gt;) response.body();\n\n                    for (Map.Entry&lt;String, Map&gt; item : datos.entrySet()){\n                        Log.d(&quot;Entered the for loop&quot;,&quot;iterations&quot;);\n                        Tokens eachToken = new Tokens();\n                        eachToken.setTheToken((String) item.getValue().get(&quot;theToken&quot;));\n                        eachToken.setfCreacion((String) item.getValue().get(&quot;fCreacion&quot;));\n                        eachToken.setLimited((double) item.getValue().get(&quot;isLimited&quot;));\n                        eachToken.setfVencimiento((String) item.getValue().get(&quot;fVencimiento&quot;));\n\n                        //Here, I assign each attribute to a new instance of &quot;Tokens&quot; and add it\n                        //to the Arraylist that will be returned from getTokens()\n\n                        listTokens.add(eachToken);\n                    }\n                    Log.d(&quot;Finishing onResponse, this is the Arraylist&quot;,listTokens.toString());\n                }\n                @Override\n                public void onFailure(Call&lt;Object&gt; call, Throwable t) {\n                    Log.d(&quot;Fallo&quot;,t.getMessage());\n\n                }\n            });\n\n        Log.d(&quot;Arraylist about to be returned&quot;,listTokens.toString());\n\n        return listTokens;\n\n    }\n</code></pre>\n<p>However, I'm having trouble with getting this right. There is no error, but the execution order looks a bit weird. As soon as I call the method getTokens() on my java.class, it goes through each line, creates the Arraylist, gets the Retrofit instance (singleton), creates the TokensService class, and finally arrives at the getAllTokens().enqueue().</p>\n<p>But it returns listTokens before entering the onResponse/onFailure. It returns an empty array, and just then goes into the onResponse and performs all it's tasks switfly. But there's nothing I can do with the empty Arraylist it returns. Is almost like onResponse executes with a delay</p>\n<p>Check the Logs and compare them to the following Logcat, so you can get what I'm talking about.</p>\n<p>ANNOTATIONS:</p>\n<p>The class for a singular instance is called Tokens, in plural. &quot;Token&quot; would be hard to work with, since is a word used in a lot of methods and commands, and etc. So keep it in mind.</p>\n<p>I just have one single Tokens up in the Realtime Database, so in the &quot;filled&quot; listTokens, you can only observe 1 Tokens being added. It's not because the for is only iterating once. I've tested it, and iterates as many times as there are Tokens in the database.</p>\n<p>Since I first thought it may be a online-type issue, like a little delay in the connection, I tried to Thread.sleep() the program, so that the connection would have time more than enough to perform it's duties. But no matter how much time it sleeps, the return command keeps executing before the onResponse</p>\n"},{"tags":["java","react-native"],"owner":{"account_id":28658743,"reputation":1,"user_id":21944097,"display_name":"Diego Rosselot"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684805671,"creation_date":1684805671,"question_id":76310795,"body_markdown":"I&#180;m working on a react native app, and started recently to implement some native modules. I&#180;m trying to handle an ArrayList in java but I am having trouble understanding how react implements ReadableArrays. I don&#180;t really know much about java, I usually work with js.\r\n\r\nI have the following function in java:\r\n\r\n```\r\n@ReactMethod\r\n    private void serveCoffee(ReadableArray steps) {\r\n        ArrayList&lt;Object&gt; recipe = steps.toArrayList();\r\n        String listString = TextUtils.join(&quot;, &quot;, recipe);\r\n        Log.d(&quot;MachineDriverModule&quot;, listString);\r\n    }\r\n```\r\n\r\nI then use it in React defined like this:\r\n\r\n```\r\ntype step = {\r\n    canister: number,\r\n    water_volume: number,\r\n    powder_volume: number,\r\n    stirring_speed: number,\r\n    water_temperature: string,\r\n}\r\n\r\nserveCoffee(steps: Array&lt;step&gt;): void;\r\n```\r\n\r\nI have no problem with that code, but I have no idea how to get any value inside java. The function prints as expected (two identical steps inside the array): `{canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string}, {canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string} `\r\n\r\nNow, how would I get the value of canister or water_temperature of any of these?","title":"How do I handle a ReadableArray received in a React Native native module","body":"<p>I´m working on a react native app, and started recently to implement some native modules. I´m trying to handle an ArrayList in java but I am having trouble understanding how react implements ReadableArrays. I don´t really know much about java, I usually work with js.</p>\n<p>I have the following function in java:</p>\n<pre><code>@ReactMethod\n    private void serveCoffee(ReadableArray steps) {\n        ArrayList&lt;Object&gt; recipe = steps.toArrayList();\n        String listString = TextUtils.join(&quot;, &quot;, recipe);\n        Log.d(&quot;MachineDriverModule&quot;, listString);\n    }\n</code></pre>\n<p>I then use it in React defined like this:</p>\n<pre><code>type step = {\n    canister: number,\n    water_volume: number,\n    powder_volume: number,\n    stirring_speed: number,\n    water_temperature: string,\n}\n\nserveCoffee(steps: Array&lt;step&gt;): void;\n</code></pre>\n<p>I have no problem with that code, but I have no idea how to get any value inside java. The function prints as expected (two identical steps inside the array): <code>{canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string}, {canister: 1, water_volume: 1, powder_volume: 1, stirring_speed: 1, water_temperature: string} </code></p>\n<p>Now, how would I get the value of canister or water_temperature of any of these?</p>\n"},{"tags":["java","arrays","string","object","while-loop"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1678702082,"post_id":75720392,"comment_id":133578121,"body_markdown":"Have you tried anything yet? Using `substring` with a few length checks should to the trick. Nobody here will just do your homework for you if you don&#39;t show what you&#39;ve tried.","body":"Have you tried anything yet? Using <code>substring</code> with a few length checks should to the trick. Nobody here will just do your homework for you if you don&#39;t show what you&#39;ve tried."},{"owner":{"account_id":20508639,"reputation":9,"user_id":15050866,"display_name":"Vaibhav"},"score":1,"creation_date":1678706412,"post_id":75720392,"comment_id":133579403,"body_markdown":"I figured out a way :)","body":"I figured out a way :)"}],"answers":[{"tags":[],"owner":{"account_id":27635017,"reputation":43,"user_id":21093121,"display_name":"ARNR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678959303,"creation_date":1678959303,"answer_id":75754323,"question_id":75720392,"body_markdown":"A similar issue was resolved here [Generate all rotations of a number][1]\r\n\r\n\r\n  [1]: https://www.geeksforgeeks.org/generate-all-rotations-of-a-number/\r\n\r\n\r\n    public class Pattern28 {\r\n    \r\n    \r\n            // Function to return the count of digits of n\r\n            static int numberOfDigits(int n)\r\n            {\r\n                int cnt = 0;\r\n                while (n &gt; 0)\r\n                {\r\n                    cnt++;\r\n                    n /= 10;\r\n                }\r\n                return cnt;\r\n            }\r\n    \r\n            // Function to print the left shift numbers\r\n            static void cal(int num)\r\n            {\r\n                int digits = numberOfDigits(num);\r\n                int powTen = (int) Math.pow(10, digits - 1);\r\n    \r\n                for (int i = 0; i &lt; digits - 1; i++)\r\n                {\r\n                    int firstDigit = num / powTen;\r\n    \r\n                    // Formula to calculate left shift\r\n                    // from previous number\r\n                    int left = ((num * 10) + firstDigit) -\r\n                            (firstDigit * powTen * 10);\r\n    \r\n                    System.out.println(left + &quot; &quot;);\r\n    \r\n                    // Update the original number\r\n                    num = left;\r\n                }\r\n            }\r\n    \r\n            // Driver Code\r\n            public static void main(String[] args)\r\n            {\r\n                int num = 1445;\r\n                Scanner sc = new Scanner(System.in);\r\n                System.out.println(&quot;Please enter your number ?&quot;);\r\n                int n = sc.nextInt();\r\n                cal(n);\r\n            }\r\n        }","title":"In java how to print chars of a string from any particular index and after reaching end of string again start from index 0 if printed not equal length","body":"<p>A similar issue was resolved here <a href=\"https://www.geeksforgeeks.org/generate-all-rotations-of-a-number/\" rel=\"nofollow noreferrer\">Generate all rotations of a number</a></p>\n<pre><code>public class Pattern28 {\n\n\n        // Function to return the count of digits of n\n        static int numberOfDigits(int n)\n        {\n            int cnt = 0;\n            while (n &gt; 0)\n            {\n                cnt++;\n                n /= 10;\n            }\n            return cnt;\n        }\n\n        // Function to print the left shift numbers\n        static void cal(int num)\n        {\n            int digits = numberOfDigits(num);\n            int powTen = (int) Math.pow(10, digits - 1);\n\n            for (int i = 0; i &lt; digits - 1; i++)\n            {\n                int firstDigit = num / powTen;\n\n                // Formula to calculate left shift\n                // from previous number\n                int left = ((num * 10) + firstDigit) -\n                        (firstDigit * powTen * 10);\n\n                System.out.println(left + &quot; &quot;);\n\n                // Update the original number\n                num = left;\n            }\n        }\n\n        // Driver Code\n        public static void main(String[] args)\n        {\n            int num = 1445;\n            Scanner sc = new Scanner(System.in);\n            System.out.println(&quot;Please enter your number ?&quot;);\n            int n = sc.nextInt();\n            cal(n);\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684804746,"creation_date":1684648148,"answer_id":76298475,"question_id":75720392,"body_markdown":"Append the first character of the string to the end, and `substring` the string at index `1`.\r\n\r\n```java\r\nString rotate(String string) {\r\n    return string.substring(1) + string.substring(0, 1);\r\n}\r\n```\r\n\r\n```java\r\nString string = &quot;13579&quot;;\r\ndo {\r\n    System.out.println(string);\r\n    string = rotate(string);\r\n} while (!string.equals(&quot;13579&quot;));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n13579\r\n35791\r\n57913\r\n79135\r\n91357\r\n```\r\n\r\nIf you need all these values in a `String` array, you can use the following.\r\n\r\n```java\r\nString string = &quot;13579&quot;;\r\nString[] strings = new String[string.length()];\r\nfor (int index = 0; index &lt; strings.length; index++) {\r\n    strings[index] = string;\r\n    string = rotate(string);\r\n}\r\n```\r\n\r\nOutput of `strings`\r\n\r\n```none\r\n[13579, 35791, 57913, 79135, 91357]\r\n```","title":"In java how to print chars of a string from any particular index and after reaching end of string again start from index 0 if printed not equal length","body":"<p>Append the first character of the string to the end, and <code>substring</code> the string at index <code>1</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String rotate(String string) {\n    return string.substring(1) + string.substring(0, 1);\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;13579&quot;;\ndo {\n    System.out.println(string);\n    string = rotate(string);\n} while (!string.equals(&quot;13579&quot;));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>13579\n35791\n57913\n79135\n91357\n</code></pre>\n<p>If you need all these values in a <code>String</code> array, you can use the following.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String string = &quot;13579&quot;;\nString[] strings = new String[string.length()];\nfor (int index = 0; index &lt; strings.length; index++) {\n    strings[index] = string;\n    string = rotate(string);\n}\n</code></pre>\n<p>Output of <code>strings</code></p>\n<pre class=\"lang-none prettyprint-override\"><code>[13579, 35791, 57913, 79135, 91357]\n</code></pre>\n"}],"owner":{"account_id":20508639,"reputation":9,"user_id":15050866,"display_name":"Vaibhav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":74,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":2,"score":-4,"last_activity_date":1684804746,"creation_date":1678701872,"question_id":75720392,"body_markdown":"Basically I have a string of numbers and that string will be dynamic in nature both content wise and length wise ex. &quot;13579&quot;, &quot;12345789&quot; etc.\r\nIf the length of string is n then I want to create n strings from it.\r\nSuppose string is &quot;13579&quot; then I have to create 5 Strings from it starting from different index like below:\r\n```none\r\n13579\r\n35791\r\n57913\r\n79135\r\n91357\r\n```\r\nHow can I do this using a generic loop which works for all the string lengths?\r\n\r\nCan someone help?\r\n\r\nThank!!!\r\n\r\nEDIT:\r\n---\r\nHere is what I have tried\r\n\r\n    public class Pattern28 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tScanner sc= new Scanner(System.in);\r\n\t\tint n= sc.nextInt();\r\n\t\tint i=1;\r\n\t\tint odd=1;\r\n\t\tString sNum=&quot;&quot;;\r\n\t\twhile(i&lt;=n) {\r\n\t\t\tint j=1;\r\n\t\t\tif(i==1) {\r\n\t\t\twhile(j&lt;=n) {\r\n\t\t\t   System.out.print(odd);\r\n\t\t\t if(i==1 &amp;&amp; j&lt;=n) sNum=sNum.concat(Integer.toString(odd)); //to get first row numbers in string\r\n\t\t\t\todd+=2;\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t}\r\n\t\t//System.out.println(&quot;im &quot;+sNum);\r\n\t\tj=i-1;\r\n\t\tif(i!=1) {\r\n\t\t\t//\tint k=i-1;\r\n\t\t\twhile(j&lt;=n) {\r\n\t\t\t\tSystem.out.print(sNum.charAt(j));\r\n\t\t\t\tj++;\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println();\r\n\t\ti++;\r\n\t}\r\n\t}\r\n    }\r\n\r\nStuck at last while loop. Every time I do something there I end up with &quot;java.lang.StringIndexOutOfBoundsException&quot; as index either reaches string length+ or goes in negative.","title":"In java how to print chars of a string from any particular index and after reaching end of string again start from index 0 if printed not equal length","body":"<p>Basically I have a string of numbers and that string will be dynamic in nature both content wise and length wise ex. &quot;13579&quot;, &quot;12345789&quot; etc.\nIf the length of string is n then I want to create n strings from it.\nSuppose string is &quot;13579&quot; then I have to create 5 Strings from it starting from different index like below:</p>\n<pre class=\"lang-none prettyprint-override\"><code>13579\n35791\n57913\n79135\n91357\n</code></pre>\n<p>How can I do this using a generic loop which works for all the string lengths?</p>\n<p>Can someone help?</p>\n<p>Thank!!!</p>\n<h2>EDIT:</h2>\n<p>Here is what I have tried</p>\n<pre><code>public class Pattern28 {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    Scanner sc= new Scanner(System.in);\n    int n= sc.nextInt();\n    int i=1;\n    int odd=1;\n    String sNum=&quot;&quot;;\n    while(i&lt;=n) {\n        int j=1;\n        if(i==1) {\n        while(j&lt;=n) {\n           System.out.print(odd);\n         if(i==1 &amp;&amp; j&lt;=n) sNum=sNum.concat(Integer.toString(odd)); //to get first row numbers in string\n            odd+=2;\n            j++;\n        }\n    }\n    //System.out.println(&quot;im &quot;+sNum);\n    j=i-1;\n    if(i!=1) {\n        //  int k=i-1;\n        while(j&lt;=n) {\n            System.out.print(sNum.charAt(j));\n            j++;\n        }\n    }\n    System.out.println();\n    i++;\n}\n}\n}\n</code></pre>\n<p>Stuck at last while loop. Every time I do something there I end up with &quot;java.lang.StringIndexOutOfBoundsException&quot; as index either reaches string length+ or goes in negative.</p>\n"},{"tags":["java","arrays","parent-child"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":6,"creation_date":1684764167,"post_id":76306973,"comment_id":134560298,"body_markdown":"Because the array is declared as an `Animal[]`, in other words: according to the type of the variable, the type of the elements in the array is `Animal` and not some specific subtype of `Animal`. This doesn&#39;t have anything to do with arrays; it&#39;s exactly the same as with &#39;normal&#39; (non-array) variables.","body":"Because the array is declared as an <code>Animal[]</code>, in other words: according to the type of the variable, the type of the elements in the array is <code>Animal</code> and not some specific subtype of <code>Animal</code>. This doesn&#39;t have anything to do with arrays; it&#39;s exactly the same as with &#39;normal&#39; (non-array) variables."},{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":1,"creation_date":1684764438,"post_id":76306973,"comment_id":134560369,"body_markdown":"You can check the runtime type of the array contents (e.g. with the instanceof operator) and cast to the resulting type. But this is usually a bad idea.","body":"You can check the runtime type of the array contents (e.g. with the instanceof operator) and cast to the resulting type. But this is usually a bad idea."},{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":1,"creation_date":1684765297,"post_id":76306973,"comment_id":134560591,"body_markdown":"Because that&#39;s not how polymorphism works.","body":"Because that&#39;s not how polymorphism works."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1684765865,"post_id":76306973,"comment_id":134560765,"body_markdown":"An `Animal` is not a `Dog`. A list of animals can include any animal, not just dogs. Calling `setBreedOfDog` only makes sense for a dog. *(Tangential: `setBreed` is sufficient--you already know it&#39;s a `Dog`, and `setBreed` is a general-purpose method that might belong on `Animal`)*.","body":"An <code>Animal</code> is not a <code>Dog</code>. A list of animals can include any animal, not just dogs. Calling <code>setBreedOfDog</code> only makes sense for a dog. <i>(Tangential: <code>setBreed</code> is sufficient--you already know it&#39;s a <code>Dog</code>, and <code>setBreed</code> is a general-purpose method that might belong on <code>Animal</code>)</i>."},{"owner":{"account_id":14587108,"reputation":155,"user_id":10535520,"display_name":"Stone"},"score":2,"creation_date":1684765897,"post_id":76306973,"comment_id":134560774,"body_markdown":"You could abstract a method such as &quot;setBreed&quot; to Animal class, then you could call  Animal object&#39;s &quot;setBreed&quot; and actually invoke subclass&#39;s &quot;Dog&quot; method. This is polymorphism in Java.","body":"You could abstract a method such as &quot;setBreed&quot; to Animal class, then you could call  Animal object&#39;s &quot;setBreed&quot; and actually invoke subclass&#39;s &quot;Dog&quot; method. This is polymorphism in Java."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":2,"creation_date":1684766763,"post_id":76306973,"comment_id":134560975,"body_markdown":"Why are you putting an Animal in the dog instance? I assume a Dog is a subclass of Animal. Or are you not using inheritance?","body":"Why are you putting an Animal in the dog instance? I assume a Dog is a subclass of Animal. Or are you not using inheritance?"}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1684804534,"creation_date":1684804534,"answer_id":76310741,"question_id":76306973,"body_markdown":"You&#39;ll need to cast your array item to the representing class, `Dog`.\r\n\r\n```java\r\nAnimal[] c = new Animal[6];\r\nc[0] = new Dog();\r\n((Dog) c[0]).setBreedOfDog(&quot;Pug&quot;);\r\n```","title":"Can I create an array of a parent class that contains its subclasses and then apply subclass methods to the array?","body":"<p>You'll need to cast your array item to the representing class, <code>Dog</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Animal[] c = new Animal[6];\nc[0] = new Dog();\n((Dog) c[0]).setBreedOfDog(&quot;Pug&quot;);\n</code></pre>\n"}],"owner":{"account_id":28654856,"reputation":33,"user_id":21941130,"display_name":"Smile D"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":59,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":1,"score":0,"last_activity_date":1684804534,"creation_date":1684763954,"question_id":76306973,"body_markdown":"In java, can I create an array of a parent class that contains its subclasses. Then after that, can I apply the methods found in the subclass to the object in the array.\r\n\r\n\r\nFor example, \r\n\r\n    Animal[] c =new Animal[6]; \r\n    \r\n    c[0] = new Dog(new Animal()); \r\n     \r\n    c[0].setBreedOfDog(&quot;Pug&quot;)\r\n\r\nIn this, I create an parent array using Animal, and then put in the subclass Dog into it. But when I try to use a setter in the Dog class, I get an error. **Can&#39;t I do this with pointers?** Can anyone tell me why this is. Thank you.\r\n","title":"Can I create an array of a parent class that contains its subclasses and then apply subclass methods to the array?","body":"<p>In java, can I create an array of a parent class that contains its subclasses. Then after that, can I apply the methods found in the subclass to the object in the array.</p>\n<p>For example,</p>\n<pre><code>Animal[] c =new Animal[6]; \n\nc[0] = new Dog(new Animal()); \n \nc[0].setBreedOfDog(&quot;Pug&quot;)\n</code></pre>\n<p>In this, I create an parent array using Animal, and then put in the subclass Dog into it. But when I try to use a setter in the Dog class, I get an error. <strong>Can't I do this with pointers?</strong> Can anyone tell me why this is. Thank you.</p>\n"},{"tags":["java","android","android-studio","webview","android-webview"],"answers":[{"tags":[],"owner":{"account_id":7162415,"reputation":121,"user_id":5472740,"display_name":"Youssef Wagih"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684804458,"creation_date":1684804458,"answer_id":76310736,"question_id":76306575,"body_markdown":"Add the below code statement\r\n\r\n        webView?.getSettings().setDomStorageEnabled(true);\r\n\r\nAlso add **www.** in the beginning of URL\r\n    \r\n\r\n    webView.loadUrl(&quot;https://www.softcommerceltd.com/&quot;)\r\n\r\nfor reference:\r\nhttps://stackoverflow.com/questions/16207094/android-webview-not-loading-url","title":"google.com is working in my webview app but when i run the app my website link is not appearing","body":"<p>Add the below code statement</p>\n<pre><code>    webView?.getSettings().setDomStorageEnabled(true);\n</code></pre>\n<p>Also add <strong>www.</strong> in the beginning of URL</p>\n<pre><code>webView.loadUrl(&quot;https://www.softcommerceltd.com/&quot;)\n</code></pre>\n<p>for reference:\n<a href=\"https://stackoverflow.com/questions/16207094/android-webview-not-loading-url\">Android WebView not loading URL</a></p>\n"}],"owner":{"account_id":12870885,"reputation":21,"user_id":9309388,"display_name":"Asikur Rahman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":1,"last_activity_date":1684804458,"creation_date":1684761224,"question_id":76306575,"body_markdown":"when i replace webView.loadUrl(&quot;https://softcommerceltd.com/&quot;); to webView.loadUrl(&quot;https://google.com/&quot;); then the app works fine , i can brows google and do everything. but when i put my website url then when i run the app the app shows blank activity. my internet is fine. how i can solve that issue? is that fault of my website? that website working fine in my browser.\r\n\r\nMainactivity.java: \r\n```\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private WebView webView;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n\r\n        CustomWebViewClient client = new CustomWebViewClient(this);\r\n\r\n        webView = findViewById(R.id.webView);\r\n        webView.setWebViewClient(client);\r\n        webView.getSettings().setJavaScriptEnabled(true);\r\n        webView.loadUrl(&quot;https://softcommerceltd.com/&quot;);\r\n    }\r\n\r\n    @Override\r\n    public boolean onKeyDown(int keyCode, KeyEvent event){\r\n        if(keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; this.webView.canGoBack()){\r\n            this.webView.goBack();\r\n            return true;\r\n        }\r\n        return super.onKeyDown(keyCode, event);\r\n    }\r\n}\r\n\r\nclass CustomWebViewClient extends WebViewClient{\r\n    private Activity activity;\r\n    public CustomWebViewClient(Activity activity){\r\n        this.activity = activity;\r\n    }\r\n\r\n    @Override\r\n    public boolean shouldOverrideUrlLoading(WebView webView, String url){\r\n        return false;\r\n    }\r\n\r\n    @Override\r\n    public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request){\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nactivity_main.xml : \r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    android:layout_width=&quot;match_parent&quot;\r\n    android:layout_height=&quot;match_parent&quot;&gt;\r\n\r\n    &lt;WebView\r\n        android:id=&quot;@+id/webView&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;/&gt;\r\n\r\n\r\n&lt;/LinearLayout&gt;\r\n```\r\n\r\nAndroidManifest.xml:\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    package=&quot;com.tochy.webapp&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.Tochy&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```","title":"google.com is working in my webview app but when i run the app my website link is not appearing","body":"<p>when i replace webView.loadUrl(&quot;https://softcommerceltd.com/&quot;); to webView.loadUrl(&quot;https://google.com/&quot;); then the app works fine , i can brows google and do everything. but when i put my website url then when i run the app the app shows blank activity. my internet is fine. how i can solve that issue? is that fault of my website? that website working fine in my browser.</p>\n<p>Mainactivity.java:</p>\n<pre><code>\npublic class MainActivity extends AppCompatActivity {\n\n    private WebView webView;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        CustomWebViewClient client = new CustomWebViewClient(this);\n\n        webView = findViewById(R.id.webView);\n        webView.setWebViewClient(client);\n        webView.getSettings().setJavaScriptEnabled(true);\n        webView.loadUrl(&quot;https://softcommerceltd.com/&quot;);\n    }\n\n    @Override\n    public boolean onKeyDown(int keyCode, KeyEvent event){\n        if(keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; this.webView.canGoBack()){\n            this.webView.goBack();\n            return true;\n        }\n        return super.onKeyDown(keyCode, event);\n    }\n}\n\nclass CustomWebViewClient extends WebViewClient{\n    private Activity activity;\n    public CustomWebViewClient(Activity activity){\n        this.activity = activity;\n    }\n\n    @Override\n    public boolean shouldOverrideUrlLoading(WebView webView, String url){\n        return false;\n    }\n\n    @Override\n    public boolean shouldOverrideUrlLoading(WebView webView, WebResourceRequest request){\n        return false;\n    }\n}\n</code></pre>\n<p>activity_main.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;WebView\n        android:id=&quot;@+id/webView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;/&gt;\n\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>AndroidManifest.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.tochy.webapp&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Tochy&quot;&gt;\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n"},{"tags":["java","sockets","network-programming","nio","file-transfer"],"answers":[{"comments":[{"owner":{"account_id":405356,"reputation":31611,"user_id":774183,"accept_rate":78,"display_name":"carlspring"},"score":1,"creation_date":1316611185,"post_id":7500102,"comment_id":9080890,"body_markdown":"I agree, this would be a good test. Besides, wireless is never as good as it says on the box. That&#39;s why they have &quot;up to 108Mbps&quot;, instead of just &quot;108Mbps&quot;. If you were to try the same code using an actual cable, I&#39;m quite sure you would reach a very reasonable/realistic speed.","body":"I agree, this would be a good test. Besides, wireless is never as good as it says on the box. That&#39;s why they have &quot;up to 108Mbps&quot;, instead of just &quot;108Mbps&quot;. If you were to try the same code using an actual cable, I&#39;m quite sure you would reach a very reasonable/realistic speed."}],"tags":[],"owner":{"account_id":152622,"reputation":490044,"user_id":367273,"accept_rate":96,"display_name":"NPE"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1316609694,"creation_date":1316609694,"answer_id":7500102,"question_id":7500059,"body_markdown":"At 2.8MB/s, it is unlikely that the slowness has anything to do with your code. It is almost certainly due to the wireless network not being able to achieve the theoretical throughput (possibly due to environmental conditions).\r\n\r\nIt&#39;s easy to test whether this is the case: simply time a large `ftp` or `scp` file transfer between the same two computers and see what kind of throughput you&#39;re seeing.","title":"Making file transfer more efficient Java","body":"<p>At 2.8MB/s, it is unlikely that the slowness has anything to do with your code. It is almost certainly due to the wireless network not being able to achieve the theoretical throughput (possibly due to environmental conditions).</p>\n\n<p>It's easy to test whether this is the case: simply time a large <code>ftp</code> or <code>scp</code> file transfer between the same two computers and see what kind of throughput you're seeing.</p>\n"},{"comments":[{"owner":{"account_id":331959,"reputation":15742,"user_id":656963,"accept_rate":90,"display_name":"David"},"score":0,"creation_date":1316612027,"post_id":7500285,"comment_id":9081187,"body_markdown":"I tried increasing it to 128K, 1MB, 1.2Mb and the speed was lower. I gave up trying different buffer sizes after that.","body":"I tried increasing it to 128K, 1MB, 1.2Mb and the speed was lower. I gave up trying different buffer sizes after that."}],"tags":[],"owner":{"account_id":13245,"reputation":5748,"user_id":26483,"display_name":"Peter"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1316611563,"creation_date":1316610519,"answer_id":7500285,"question_id":7500059,"body_markdown":"Your timer is wrong ! you should start it after you accept the connection not when you start the host\r\n\r\nDid you try increasing your buffer size ?\r\n\r\n","title":"Making file transfer more efficient Java","body":"<p>Your timer is wrong ! you should start it after you accept the connection not when you start the host</p>\n\n<p>Did you try increasing your buffer size ?</p>\n"},{"comments":[{"owner":{"account_id":331959,"reputation":15742,"user_id":656963,"accept_rate":90,"display_name":"David"},"score":0,"creation_date":1316611800,"post_id":7500397,"comment_id":9081094,"body_markdown":"Locally, my results are:\nServer:\n\n`Wed Sep 21 15:26:37 CEST 2011: Accepted a connection\nException in thread &quot;main&quot; java.io.IOException: An existing connection was forcibly closed by the remote host\n\tat sun.nio.ch.SocketDispatcher.read0(Native Method)\n\tat sun.nio.ch.SocketDispatcher.read(Unknown Source)\n\tat sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source)\n\tat sun.nio.ch.IOUtil.read(Unknown Source)\n\tat sun.nio.ch.SocketChannelImpl.read(Unknown Source)\n\tat EchoServerMain.main(EchoServerMain.java:22)`","body":"Locally, my results are: Server:  <code>Wed Sep 21 15:26:37 CEST 2011: Accepted a connection Exception in thread &quot;main&quot; java.io.IOException: An existing connection was forcibly closed by the remote host \tat sun.nio.ch.SocketDispatcher.read0(Native Method) \tat sun.nio.ch.SocketDispatcher.read(Unknown Source) \tat sun.nio.ch.IOUtil.readIntoNativeBuffer(Unknown Source) \tat sun.nio.ch.IOUtil.read(Unknown Source) \tat sun.nio.ch.SocketChannelImpl.read(Unknown Source) \tat EchoServerMain.main(EchoServerMain.java:22)</code>"},{"owner":{"account_id":331959,"reputation":15742,"user_id":656963,"accept_rate":90,"display_name":"David"},"score":0,"creation_date":1316611830,"post_id":7500397,"comment_id":9081105,"body_markdown":"Client: \n   Wed Sep 21 15:26:37 CEST 2011 Sending for 10.0 seconds.\n   Wed Sep 21 15:26:47 CEST 2011 ... sent.\n   Wed Sep 21 15:26:48 CEST 2011 ... received 85393408\n   Send and received 7.5 MB/s`\nWindows 7, Core i5 2500K","body":"Client:     Wed Sep 21 15:26:37 CEST 2011 Sending for 10.0 seconds.    Wed Sep 21 15:26:47 CEST 2011 ... sent.    Wed Sep 21 15:26:48 CEST 2011 ... received 85393408    Send and received 7.5 MB/s` Windows 7, Core i5 2500K"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1316612127,"post_id":7500397,"comment_id":9081225,"body_markdown":"If you consider the total bandwidth over the network is double that, does that sound about right? I assume you are using the wireless, not loop back as I am getting 2 GB/s each way over loop back.","body":"If you consider the total bandwidth over the network is double that, does that sound about right? I assume you are using the wireless, not loop back as I am getting 2 GB/s each way over loop back."},{"owner":{"account_id":331959,"reputation":15742,"user_id":656963,"accept_rate":90,"display_name":"David"},"score":0,"creation_date":1316612489,"post_id":7500397,"comment_id":9081385,"body_markdown":"Thats loop back not over the network. It just disconnects and gives a bad reading. I don&#39;t know why. I&#39;m using Windows 7, it&#39;s almost a clean install.","body":"Thats loop back not over the network. It just disconnects and gives a bad reading. I don&#39;t know why. I&#39;m using Windows 7, it&#39;s almost a clean install."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1316612683,"post_id":7500397,"comment_id":9081458,"body_markdown":"The client wasn&#39;t gracefully closing the connection which could have triggered the error on the other end. I have added an `s.close()`","body":"The client wasn&#39;t gracefully closing the connection which could have triggered the error on the other end. I have added an <code>s.close()</code>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1316612762,"post_id":7500397,"comment_id":9081494,"body_markdown":"BTW: I have Ubuntu 11.0 Core i7 2600K @ 3.8 GHz.","body":"BTW: I have Ubuntu 11.0 Core i7 2600K @ 3.8 GHz."},{"owner":{"account_id":331959,"reputation":15742,"user_id":656963,"accept_rate":90,"display_name":"David"},"score":0,"creation_date":1316613010,"post_id":7500397,"comment_id":9081594,"body_markdown":"I have Core i5, JDk 6 and Windows 7. It now gives me:\n\nWed Sep 21 15:47:57 CEST 2011 Sending for 10.0 seconds.\nWed Sep 21 15:48:07 CEST 2011 ... sent.\nWed Sep 21 15:48:07 CEST 2011 ... received 484638720\nSend and received 46.2 MB/s\n\nWed Sep 21 15:47:57 CEST 2011: Accepted a connection\nWed Sep 21 15:48:07 CEST 2011: Transfer rate was 46.2 MB/s","body":"I have Core i5, JDk 6 and Windows 7. It now gives me:  Wed Sep 21 15:47:57 CEST 2011 Sending for 10.0 seconds. Wed Sep 21 15:48:07 CEST 2011 ... sent. Wed Sep 21 15:48:07 CEST 2011 ... received 484638720 Send and received 46.2 MB/s  Wed Sep 21 15:47:57 CEST 2011: Accepted a connection Wed Sep 21 15:48:07 CEST 2011: Transfer rate was 46.2 MB/s"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1316614237,"post_id":7500397,"comment_id":9082136,"body_markdown":"I imagine you are using a laptop. Even so, it should be much faster, AFAIK.","body":"I imagine you are using a laptop. Even so, it should be much faster, AFAIK."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1316646784,"post_id":7500397,"comment_id":9091745,"body_markdown":"There are problems with this code. You aren&#39;t taking account of the return value of write(). If writing falls behind reading, the buffer will fill, read() will return zero, and your loop will terminate prematurely. The correct idiom is `while ((len = in.read(buffer) &gt;= 0 || buffer.position() &gt; 0) ... `","body":"There are problems with this code. You aren&#39;t taking account of the return value of write(). If writing falls behind reading, the buffer will fill, read() will return zero, and your loop will terminate prematurely. The correct idiom is <code>while ((len = in.read(buffer) &gt;= 0 || buffer.position() &gt; 0) ... </code>"},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1316673721,"post_id":7500397,"comment_id":9095623,"body_markdown":"@EJP, I think I can see what your saying and I did need to check the result of write.  I fairly liberally clear the buffer because I&#39;m not interested in the contents, only the length of data.  This is not normal practice. I think I should re-write in case someone copies the code without realising this.","body":"@EJP, I think I can see what your saying and I did need to check the result of write.  I fairly liberally clear the buffer because I&#39;m not interested in the contents, only the length of data.  This is not normal practice. I think I should re-write in case someone copies the code without realising this."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1316695282,"post_id":7500397,"comment_id":9100999,"body_markdown":"Peter, the standard idiom is `while ((len = in.read(buffer)) &gt;= 0 || buffer.position() &gt; 0) { buffer.flip(); out.write(buffer); buffer.compact(); }` ... and you certainly shouldn&#39;t throw EOFException on a *write* error. T","body":"Peter, the standard idiom is <code>while ((len = in.read(buffer)) &gt;= 0 || buffer.position() &gt; 0) { buffer.flip(); out.write(buffer); buffer.compact(); }</code> ... and you certainly shouldn&#39;t throw EOFException on a <i>write</i> error. T"}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":11,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1319635332,"creation_date":1316611001,"answer_id":7500397,"question_id":7500059,"body_markdown":"I suggest you try the following code which prints\r\n\r\n    Wed Oct 26 14:21:03 BST 2011: Accepted a connection\r\n    Wed Oct 26 14:21:13 BST 2011: Transfer rate was 3212.5 MB/s\r\n\r\non the server and on the client prints\r\n\r\n    Wed Oct 26 14:21:03 BST 2011 Sending for 10.0 seconds.\r\n    Wed Oct 26 14:21:13 BST 2011 ... sent.\r\n    Wed Oct 26 14:21:13 BST 2011 ... received 33691287552\r\n    Send and received 3212.8 MB/s\r\n\r\nNote: the total amount transferred is double this as everything sent client to server is sent server to client.\r\n\r\n---\r\n\r\n    import java.io.IOException;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.ServerSocket;\r\n    import java.net.Socket;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.ServerSocketChannel;\r\n    import java.nio.channels.SocketChannel;\r\n    import java.util.Date;\r\n    \r\n    public class EchoServerMain {\r\n      public static void main(String... args) throws IOException {\r\n        int port = args.length &lt; 1 ? 55555 : Integer.parseInt(args[0]);\r\n        ServerSocketChannel ss = ServerSocketChannel.open();\r\n        ss.socket().bind(new InetSocketAddress(port));\r\n        while (!ss.socket().isClosed()) {\r\n          SocketChannel s = ss.accept();\r\n          System.out.println(new Date() + &quot;: Accepted a connection&quot;);\r\n          long start = System.nanoTime();\r\n          ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\r\n          int len;\r\n          long total = 0;\r\n          // Thank you @EJP, for a more elegant single loop.\r\n          while ((len = s.read(bytes)) &gt;= 0 || bytes.position() &gt; 0) { \r\n            bytes.flip(); \r\n            s.write(bytes); \r\n            bytes.compact(); \r\n            total += len;\r\n          }\r\n          long time = System.nanoTime() - start;\r\n          System.out.printf(new Date() + &quot;: Transfer rate was %.1f MB/s%n&quot;, total * 1e9 / 1024 / 1024 / time);\r\n        }\r\n        ss.close();\r\n      }\r\n    }\r\n\r\nand\r\n\r\n    import java.io.EOFException;\r\n    import java.io.IOException;\r\n    import java.net.InetSocketAddress;\r\n    import java.net.Socket;\r\n    import java.net.UnknownHostException;\r\n    import java.nio.ByteBuffer;\r\n    import java.nio.channels.SocketChannel;\r\n    import java.util.Date;\r\n    \r\n    public class EchoClientMain {\r\n      public static void main(String ... args) throws IOException {\r\n        String hostname = args.length &lt; 1 ? &quot;localhost&quot; : args[0];\r\n        int port = args.length &lt; 2 ? 55555 : Integer.parseInt(args[1]);\r\n        double seconds = args.length &lt; 3 ? 10 : Double.parseDouble(args[2]);\r\n    \r\n        SocketChannel s = SocketChannel.open(new InetSocketAddress(hostname, port));\r\n        s.configureBlocking(false);\r\n        ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\r\n    \r\n        System.out.printf(new Date()+ &quot; Sending for %.1f seconds.%n&quot;, seconds);\r\n        long start = System.nanoTime();\r\n        long dataSent = 0, dataReceived = 0;\r\n        // run for 10 seconds.\r\n        while(start + seconds*1e9 &gt; System.nanoTime()) {\r\n          bytes.clear();\r\n          int wlen = s.write(bytes);\r\n          if (wlen &lt; 0) throw new IOException();\r\n          dataSent += wlen;\r\n    \r\n          bytes.clear();\r\n          int rlen = s.read(bytes);\r\n          if (rlen &lt; 0) throw new EOFException();\r\n          dataReceived += rlen;\r\n        }\r\n        System.out.println(new Date()+ &quot; ... sent.&quot;);\r\n    \r\n        while(dataReceived &lt; dataSent) {\r\n          bytes.clear();\r\n          int rlen = s.read(bytes);\r\n          if (rlen &lt; 0) throw new EOFException();\r\n          dataReceived += rlen;\r\n        }\r\n        s.close();\r\n        long time = System.nanoTime() - start;\r\n        System.out.println(new Date()+ &quot; ... received &quot;+dataReceived);\r\n        System.out.printf(&quot;Send and received %.1f MB/s%n&quot;, dataReceived * 1e9/1024/1024/time);\r\n      }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"Making file transfer more efficient Java","body":"<p>I suggest you try the following code which prints</p>\n\n<pre><code>Wed Oct 26 14:21:03 BST 2011: Accepted a connection\nWed Oct 26 14:21:13 BST 2011: Transfer rate was 3212.5 MB/s\n</code></pre>\n\n<p>on the server and on the client prints</p>\n\n<pre><code>Wed Oct 26 14:21:03 BST 2011 Sending for 10.0 seconds.\nWed Oct 26 14:21:13 BST 2011 ... sent.\nWed Oct 26 14:21:13 BST 2011 ... received 33691287552\nSend and received 3212.8 MB/s\n</code></pre>\n\n<p>Note: the total amount transferred is double this as everything sent client to server is sent server to client.</p>\n\n<hr>\n\n<pre><code>import java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.net.ServerSocket;\nimport java.net.Socket;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.ServerSocketChannel;\nimport java.nio.channels.SocketChannel;\nimport java.util.Date;\n\npublic class EchoServerMain {\n  public static void main(String... args) throws IOException {\n    int port = args.length &lt; 1 ? 55555 : Integer.parseInt(args[0]);\n    ServerSocketChannel ss = ServerSocketChannel.open();\n    ss.socket().bind(new InetSocketAddress(port));\n    while (!ss.socket().isClosed()) {\n      SocketChannel s = ss.accept();\n      System.out.println(new Date() + \": Accepted a connection\");\n      long start = System.nanoTime();\n      ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\n      int len;\n      long total = 0;\n      // Thank you @EJP, for a more elegant single loop.\n      while ((len = s.read(bytes)) &gt;= 0 || bytes.position() &gt; 0) { \n        bytes.flip(); \n        s.write(bytes); \n        bytes.compact(); \n        total += len;\n      }\n      long time = System.nanoTime() - start;\n      System.out.printf(new Date() + \": Transfer rate was %.1f MB/s%n\", total * 1e9 / 1024 / 1024 / time);\n    }\n    ss.close();\n  }\n}\n</code></pre>\n\n<p>and</p>\n\n<pre><code>import java.io.EOFException;\nimport java.io.IOException;\nimport java.net.InetSocketAddress;\nimport java.net.Socket;\nimport java.net.UnknownHostException;\nimport java.nio.ByteBuffer;\nimport java.nio.channels.SocketChannel;\nimport java.util.Date;\n\npublic class EchoClientMain {\n  public static void main(String ... args) throws IOException {\n    String hostname = args.length &lt; 1 ? \"localhost\" : args[0];\n    int port = args.length &lt; 2 ? 55555 : Integer.parseInt(args[1]);\n    double seconds = args.length &lt; 3 ? 10 : Double.parseDouble(args[2]);\n\n    SocketChannel s = SocketChannel.open(new InetSocketAddress(hostname, port));\n    s.configureBlocking(false);\n    ByteBuffer bytes = ByteBuffer.allocateDirect(32*1024);\n\n    System.out.printf(new Date()+ \" Sending for %.1f seconds.%n\", seconds);\n    long start = System.nanoTime();\n    long dataSent = 0, dataReceived = 0;\n    // run for 10 seconds.\n    while(start + seconds*1e9 &gt; System.nanoTime()) {\n      bytes.clear();\n      int wlen = s.write(bytes);\n      if (wlen &lt; 0) throw new IOException();\n      dataSent += wlen;\n\n      bytes.clear();\n      int rlen = s.read(bytes);\n      if (rlen &lt; 0) throw new EOFException();\n      dataReceived += rlen;\n    }\n    System.out.println(new Date()+ \" ... sent.\");\n\n    while(dataReceived &lt; dataSent) {\n      bytes.clear();\n      int rlen = s.read(bytes);\n      if (rlen &lt; 0) throw new EOFException();\n      dataReceived += rlen;\n    }\n    s.close();\n    long time = System.nanoTime() - start;\n    System.out.println(new Date()+ \" ... received \"+dataReceived);\n    System.out.printf(\"Send and received %.1f MB/s%n\", dataReceived * 1e9/1024/1024/time);\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10448,"reputation":91694,"user_id":19746,"accept_rate":91,"display_name":"Piskvor left the building"},"score":0,"creation_date":1316612324,"post_id":7500696,"comment_id":9081305,"body_markdown":"(my answer, &quot;test same program over different links&quot; is complementary to @aix&#39;s answer: &quot;test different programs over same link&quot;)","body":"(my answer, &quot;test same program over different links&quot; is complementary to @aix&#39;s answer: &quot;test different programs over same link&quot;)"}],"tags":[],"owner":{"account_id":10448,"reputation":91694,"user_id":19746,"accept_rate":91,"display_name":"Piskvor left the building"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1316612250,"creation_date":1316612250,"answer_id":7500696,"question_id":7500059,"body_markdown":"Test the same program using a wired, Fast Ethernet (100Mbit/s) link between the computers (and then possibly using a 1Gbit link). That way, you&#39;ll see whether the transfer rate is actually limited by your program or by the link.","title":"Making file transfer more efficient Java","body":"<p>Test the same program using a wired, Fast Ethernet (100Mbit/s) link between the computers (and then possibly using a 1Gbit link). That way, you'll see whether the transfer rate is actually limited by your program or by the link.</p>\n"},{"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684803640,"creation_date":1316696753,"answer_id":7515203,"question_id":7500059,"body_markdown":"Just set a very large socket send buffer, and if possible set a very large socket receive buffer at the receiver. Code &#39;optimizations&#39; contribute basically nothing to these scenarios.\r\n\r\nSet a very large socket receive buffer at the receiver, 256K or more. Use a `BufferedOutputStream` around the `FileOutputStream` so that you are always writing to block boundaries. NB your test `if (bytesRead &gt; 0)` can never be false. The only way `InputStream.read()` can return zero is if you supply a zero length buffer or a zero length parameter, and you aren&#39;t. I would get rid of the `println()` calls inside the loops.","title":"Making file transfer more efficient Java","body":"<p>Just set a very large socket send buffer, and if possible set a very large socket receive buffer at the receiver. Code 'optimizations' contribute basically nothing to these scenarios.</p>\n<p>Set a very large socket receive buffer at the receiver, 256K or more. Use a <code>BufferedOutputStream</code> around the <code>FileOutputStream</code> so that you are always writing to block boundaries. NB your test <code>if (bytesRead &gt; 0)</code> can never be false. The only way <code>InputStream.read()</code> can return zero is if you supply a zero length buffer or a zero length parameter, and you aren't. I would get rid of the <code>println()</code> calls inside the loops.</p>\n"}],"owner":{"account_id":331959,"reputation":15742,"user_id":656963,"accept_rate":90,"display_name":"David"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11506,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":7500102,"answer_count":5,"score":6,"last_activity_date":1684803692,"creation_date":1316609514,"question_id":7500059,"body_markdown":"I have two wireless computers connected to an N wireless router. Each of these PCs are connected at between 108-150Mbps. \r\n\r\nTheoretically, I should be able to transfer at 13.5MB/s to 18.75MB/s, under the absolute best of conditions.\r\n\r\nThe first computer (that is sending), uses a very fast SSD, which is around 100MB/s if I remember correctly. CPU usage also stays below 20%.\r\n\r\nIt sent 1960273535 bytes (1.8GB) in 656367ms. That&#39;s 2.8MB/s (22 out of 108 Megabits).\r\nWhen I open up task manager, I see that only 25-27% of the network connection is being used.\r\n\r\nI am looking for any ideas, suggestions, or improvements that can make the transfer faster (over a network). I was thinking of buffering the file from the disk on a thread and sending the buffered data from another thread but I&#39;m not sure if it&#39;s a good idea.\r\nHere is the SSCCE:\r\n\r\nHost:\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n    \r\n    \r\n    public class Host {\r\n    \r\n    \r\n    \tpublic static void main(String[] args) throws IOException {\r\n    \t\t\r\n    \t\t\r\n    \t\tServerSocket servsock = new ServerSocket(15064);\r\n    \t\tSocket sock = servsock.accept();\r\n                long time = System.currentTimeMillis();\r\n\r\n    \t\tOutputStream out = sock.getOutputStream();\r\n    \t\tFileInputStream fileInputStream = new FileInputStream(&quot;C:\\\\complete.rar&quot;);\r\n    \r\n    \t\tbyte [] buffer = new byte[64*1024]; \r\n    \t\tint bytesRead = 0;\r\n    \t\tlong totalSent = 0;\r\n    \t\t\r\n    \t\twhile ( (bytesRead = fileInputStream.read(buffer)) != -1)\r\n    \t\t{\r\n    \t\t\tif (bytesRead &gt; 0)\r\n    \t\t\t{\t\r\n    \t\t\t\tout.write(buffer, 0, bytesRead);\r\n    \t\t\t\ttotalSent += bytesRead;\r\n    \t\t\t\tSystem.out.println(&quot;sent &quot; + totalSent);\r\n    \t\t\t}\t\r\n    \t\t}\r\n    \t\t\r\n    \t\tsock.close();\r\n    \t\t\r\n    \t\tSystem.out.println(&quot;Sent &quot; + totalSent + &quot; bytes in &quot;\r\n    \t\t\t\t+ (System.currentTimeMillis() - time) + &quot;ms.&quot;);\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\n\r\nClient:\r\n\r\n    import java.io.*;\r\n    import java.net.*;\r\n    \r\n    public class Client {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tSocket sock = new Socket(&quot;127.0.0.1&quot;, 15064);\r\n    \t\tInputStream in = sock.getInputStream();\r\n    \t\tFileOutputStream fileOutputStream = new FileOutputStream(&quot;output.rar&quot;);\r\n    \r\n    \t\tbyte [] buffer = new byte[64*1024]; \r\n    \t\tint bytesRead = 0;\r\n    \r\n    \t\twhile ( (bytesRead = in.read(buffer)) != -1)\r\n    \t\t\tfileOutputStream.write(buffer, 0, bytesRead);\r\n    \t\tsock.close();\r\n    \t\tfileOutputStream.close();\r\n    \t}\r\n    }\r\n\r\nEdit: I tried mapping a network drive and sending the file over that, and windows did even worse - 2.35MB/s. According to [this article][1] mapping a network drive is faster than FTP, and I also don&#39;t have the time to stay playing around and setting up the FTP server.\r\n\r\nEdit2: After changing the timer, turns out it was transferring at 3MB/s over WiFi. I hate the &quot;theoretical&quot; throughput. When I buy something, I want to know it&#39;s REAL performance.\r\nIt turns out the code is indeed limited by WiFi speeds. I am still open to suggestions though.\r\n\r\nEdit 3: After running the program on 100Mbps LAN, it managed to transfer the file at 11.8MB/s. That&#39;s pretty good considering that the maximum transfer rate is 12.5MB/s.\r\n\r\n\r\n  [1]: http://webcache.googleusercontent.com/search?q=cache:gWffoluxtm4J:www.seabreezecomputers.com/tips/filexfer.htm%20Fastest%20wireless%20Lan%20file%20transfer&amp;cd=1&amp;hl=en&amp;ct=clnk","title":"Making file transfer more efficient Java","body":"<p>I have two wireless computers connected to an N wireless router. Each of these PCs are connected at between 108-150Mbps.</p>\n<p>Theoretically, I should be able to transfer at 13.5MB/s to 18.75MB/s, under the absolute best of conditions.</p>\n<p>The first computer (that is sending), uses a very fast SSD, which is around 100MB/s if I remember correctly. CPU usage also stays below 20%.</p>\n<p>It sent 1960273535 bytes (1.8GB) in 656367ms. That's 2.8MB/s (22 out of 108 Megabits).\nWhen I open up task manager, I see that only 25-27% of the network connection is being used.</p>\n<p>I am looking for any ideas, suggestions, or improvements that can make the transfer faster (over a network). I was thinking of buffering the file from the disk on a thread and sending the buffered data from another thread but I'm not sure if it's a good idea.\nHere is the SSCCE:</p>\n<p>Host:</p>\n<pre><code>import java.io.*;\nimport java.net.*;\n\n\npublic class Host {\n\n\n    public static void main(String[] args) throws IOException {\n        \n        \n        ServerSocket servsock = new ServerSocket(15064);\n        Socket sock = servsock.accept();\n            long time = System.currentTimeMillis();\n\n        OutputStream out = sock.getOutputStream();\n        FileInputStream fileInputStream = new FileInputStream(&quot;C:\\\\complete.rar&quot;);\n\n        byte [] buffer = new byte[64*1024]; \n        int bytesRead = 0;\n        long totalSent = 0;\n        \n        while ( (bytesRead = fileInputStream.read(buffer)) != -1)\n        {\n            if (bytesRead &gt; 0)\n            {   \n                out.write(buffer, 0, bytesRead);\n                totalSent += bytesRead;\n                System.out.println(&quot;sent &quot; + totalSent);\n            }   \n        }\n        \n        sock.close();\n        \n        System.out.println(&quot;Sent &quot; + totalSent + &quot; bytes in &quot;\n                + (System.currentTimeMillis() - time) + &quot;ms.&quot;);\n        \n    }\n}\n</code></pre>\n<p>Client:</p>\n<pre><code>import java.io.*;\nimport java.net.*;\n\npublic class Client {\n\n    public static void main(String[] args) throws Exception {\n        Socket sock = new Socket(&quot;127.0.0.1&quot;, 15064);\n        InputStream in = sock.getInputStream();\n        FileOutputStream fileOutputStream = new FileOutputStream(&quot;output.rar&quot;);\n\n        byte [] buffer = new byte[64*1024]; \n        int bytesRead = 0;\n\n        while ( (bytesRead = in.read(buffer)) != -1)\n            fileOutputStream.write(buffer, 0, bytesRead);\n        sock.close();\n        fileOutputStream.close();\n    }\n}\n</code></pre>\n<p>Edit: I tried mapping a network drive and sending the file over that, and windows did even worse - 2.35MB/s. According to <a href=\"http://webcache.googleusercontent.com/search?q=cache:gWffoluxtm4J:www.seabreezecomputers.com/tips/filexfer.htm%20Fastest%20wireless%20Lan%20file%20transfer&amp;cd=1&amp;hl=en&amp;ct=clnk\" rel=\"nofollow noreferrer\">this article</a> mapping a network drive is faster than FTP, and I also don't have the time to stay playing around and setting up the FTP server.</p>\n<p>Edit2: After changing the timer, turns out it was transferring at 3MB/s over WiFi. I hate the &quot;theoretical&quot; throughput. When I buy something, I want to know it's REAL performance.\nIt turns out the code is indeed limited by WiFi speeds. I am still open to suggestions though.</p>\n<p>Edit 3: After running the program on 100Mbps LAN, it managed to transfer the file at 11.8MB/s. That's pretty good considering that the maximum transfer rate is 12.5MB/s.</p>\n"},{"tags":["java","html","string","listview","string-formatting"],"comments":[{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1486142503,"post_id":42029603,"comment_id":71233756,"body_markdown":"Apache commons has a function that escapes html aka converts characters to HTML entities. See function escapeHtml: https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html","body":"Apache commons has a function that escapes html aka converts characters to HTML entities. See function escapeHtml: <a href=\"https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html\" rel=\"nofollow noreferrer\">commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/&zwnj;&#8203;&hellip;</a>"},{"owner":{"account_id":4785346,"reputation":787,"user_id":3960650,"display_name":"DejaVuSansMono"},"score":0,"creation_date":1486142639,"post_id":42029603,"comment_id":71233843,"body_markdown":"You could run this through an HTML reader. Though it isn&#39;t a complete document. https://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/HTMLDocument.HTMLReader.html","body":"You could run this through an HTML reader. Though it isn&#39;t a complete document. <a href=\"https://docs.oracle.com/javase/7/docs/api/javax/swing/text/html/HTMLDocument.HTMLReader.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/javax/swing/text/html/&hellip;</a>"},{"owner":{"display_name":"user6073886"},"score":0,"creation_date":1486143213,"post_id":42029603,"comment_id":71234155,"body_markdown":"Btw. Are you talking about an android ListView? in that case this might help: http://stackoverflow.com/questions/6502759/how-to-strip-or-escape-html-tags-in-android","body":"Btw. Are you talking about an android ListView? in that case this might help: <a href=\"http://stackoverflow.com/questions/6502759/how-to-strip-or-escape-html-tags-in-android\" title=\"how to strip or escape html tags in android\">stackoverflow.com/questions/6502759/&hellip;</a>"},{"owner":{"account_id":10170785,"reputation":41,"user_id":7511152,"display_name":"Giovanni Scieri"},"score":0,"creation_date":1486143563,"post_id":42029603,"comment_id":71234342,"body_markdown":"@DejaVuSansMono Sorry but I don&#39;t know how to do it. Can you explain better how to use it please?","body":"@DejaVuSansMono Sorry but I don&#39;t know how to do it. Can you explain better how to use it please?"}],"answers":[{"tags":[],"owner":{"account_id":120028,"reputation":35744,"user_id":312172,"accept_rate":86,"display_name":"user unknown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1520669212,"creation_date":1520669212,"answer_id":49206797,"question_id":42029603,"body_markdown":"If you heal the html, it will be rendered fine by many Swing components, without assistance:\r\n\r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    \r\n    public class Se0124 extends JFrame\r\n    {\r\n        String myString = &quot;&lt;html&gt;&quot; +\r\n                       &quot;The accuracy of a potentiometer (pH meter) is&quot; +\r\n                       &quot;&amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;/SUP&gt; mol/L Cl&quot; +\r\n                       &quot;&lt;SUP&gt;-&lt;/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;/SUP&gt; mol/L Ca&lt;SUP&gt;2+&lt;/SUP&gt;.&quot; +\r\n                       &quot;What is the error in concentration to be expected when measuring&quot; +\r\n                       &quot;these ions with a chloride or a calcium ion selective electrode?&quot; +\r\n                       &quot;&lt;/html&gt;&quot;;\r\n    \r\n    \tpublic Se0124 ()\r\n    \t{\r\n    \t\tsuper (&quot;Se0124&quot;);\r\n    \t\tJPanel mainpanel = new JPanel ();\r\n    \t\tmainpanel.setLayout (new BorderLayout ());\r\n    \t\tthis.getContentPane ().add (mainpanel);\r\n    \r\n    \t\tJLabel jl = new JLabel (myString);\r\n    \t\tmainpanel.add (jl, BorderLayout.CENTER);\r\n    \t\tsetSize (400, 400);\r\n    \t\tsetLocation (100, 100);\r\n    \t\tsetDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);\r\n    \t\tsetVisible (true);\r\n    \t}\r\n    \r\n    \tpublic static void main (String args[])\r\n    \t{\r\n            SwingUtilities.invokeLater(new Runnable() {\r\n                @Override\r\n                public void run() {\r\n                    new Se0124 ();\r\n                }\r\n            });\r\n    \t}\r\n    }\r\n\r\nAs you can see, I have removed the trailing &lt;TABLE&gt;, which looks empty. Then I capsulated it in &lt;html&gt;&lt;/html&gt; tags. And I removed the backslashes from the slashes.\r\n\r\nThis can be done by regular expressions. Now SUP and SUB are rendered fine.\r\n\r\n","title":"Format html tag to a string java","body":"<p>If you heal the html, it will be rendered fine by many Swing components, without assistance:</p>\n\n<pre><code>import javax.swing.*;\nimport java.awt.*;\n\npublic class Se0124 extends JFrame\n{\n    String myString = \"&lt;html&gt;\" +\n                   \"The accuracy of a potentiometer (pH meter) is\" +\n                   \"&amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;/SUP&gt; mol/L Cl\" +\n                   \"&lt;SUP&gt;-&lt;/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;/SUP&gt; mol/L Ca&lt;SUP&gt;2+&lt;/SUP&gt;.\" +\n                   \"What is the error in concentration to be expected when measuring\" +\n                   \"these ions with a chloride or a calcium ion selective electrode?\" +\n                   \"&lt;/html&gt;\";\n\n    public Se0124 ()\n    {\n        super (\"Se0124\");\n        JPanel mainpanel = new JPanel ();\n        mainpanel.setLayout (new BorderLayout ());\n        this.getContentPane ().add (mainpanel);\n\n        JLabel jl = new JLabel (myString);\n        mainpanel.add (jl, BorderLayout.CENTER);\n        setSize (400, 400);\n        setLocation (100, 100);\n        setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);\n        setVisible (true);\n    }\n\n    public static void main (String args[])\n    {\n        SwingUtilities.invokeLater(new Runnable() {\n            @Override\n            public void run() {\n                new Se0124 ();\n            }\n        });\n    }\n}\n</code></pre>\n\n<p>As you can see, I have removed the trailing , which looks empty. Then I capsulated it in  tags. And I removed the backslashes from the slashes.</p>\n\n<p>This can be done by regular expressions. Now SUP and SUB are rendered fine.</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684803165,"creation_date":1684802274,"answer_id":76310638,"question_id":42029603,"body_markdown":"You can use the `String.replaceAll` method to replace all occurrences of a specified regular expression.\r\n\r\nExample\r\n\r\n```java\r\nmyString = myString.replaceAll(&quot;&lt;\\\\s*.+?&gt;&quot;, &quot;&quot;);\r\n```\r\n\r\nOutput (I&#39;ve added new lines, to provide readablity)\r\n```none\r\nThe accuracy of a potentiometer (pH meter) is\r\n&amp;#177;0.1 mV. A solution contains 1x10-4 mol/L Cl\r\n- and 1x10-3 mol/L Ca2+.\r\nWhat is the error in concentration to be expected when measuring\r\nthese ions with a chloride or a calcium ion selective electrode?\r\n     &amp;nbsp;\r\n```\r\n\r\nIn regard to the entity value, `&amp;#177;`, this is a trivial task.\r\n\r\nYou _could_ create a method to capture the value, and parse it to it&#39;s Unicode equivalent, although not all entities use the Unicode value, sometimes it&#39;s a literal, such as &quot;amp&quot;, or &quot;lt&quot;.\r\n\r\nMany people choose to use the Apache Commons Text library, to decode entities.\r\n\r\n[StringEscapeUtils (Apache Commons Text 1.10.0 API)](https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringEscapeUtils.html#unescapeHtml4-java.lang.String-)","title":"Format html tag to a string java","body":"<p>You can use the <code>String.replaceAll</code> method to replace all occurrences of a specified regular expression.</p>\n<p>Example</p>\n<pre class=\"lang-java prettyprint-override\"><code>myString = myString.replaceAll(&quot;&lt;\\\\s*.+?&gt;&quot;, &quot;&quot;);\n</code></pre>\n<p>Output (I've added new lines, to provide readablity)</p>\n<pre class=\"lang-none prettyprint-override\"><code>The accuracy of a potentiometer (pH meter) is\n&amp;#177;0.1 mV. A solution contains 1x10-4 mol/L Cl\n- and 1x10-3 mol/L Ca2+.\nWhat is the error in concentration to be expected when measuring\nthese ions with a chloride or a calcium ion selective electrode?\n     &amp;nbsp;\n</code></pre>\n<p>In regard to the entity value, <code>&amp;#177;</code>, this is a trivial task.</p>\n<p>You <em>could</em> create a method to capture the value, and parse it to it's Unicode equivalent, although not all entities use the Unicode value, sometimes it's a literal, such as &quot;amp&quot;, or &quot;lt&quot;.</p>\n<p>Many people choose to use the Apache Commons Text library, to decode entities.</p>\n<p><a href=\"https://commons.apache.org/proper/commons-text/apidocs/org/apache/commons/text/StringEscapeUtils.html#unescapeHtml4-java.lang.String-\" rel=\"nofollow noreferrer\">StringEscapeUtils (Apache Commons Text 1.10.0 API)</a></p>\n"}],"owner":{"account_id":10170785,"reputation":41,"user_id":7511152,"display_name":"Giovanni Scieri"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2328,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1684803165,"creation_date":1486142214,"question_id":42029603,"body_markdown":"I need help\r\nI have a string like this \r\n\r\n    String myString = &quot;The accuracy of a potentiometer (pH meter) is\r\n                       &amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;\\/SUP&gt; mol\\/L Cl\r\n                       &lt;SUP&gt;-&lt;\\/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;\\/SUP&gt; mol\\/L Ca&lt;SUP&gt;2+&lt;\\/SUP&gt;. \r\n                       What is the error in concentration to be expected when measuring\r\n                       these ions with a chloride or a calcium ion selective electrode? \r\n                       &lt;TABLE BORDER=0 ALIGN=CENTER&gt; &lt;TR&gt;&lt;TD&gt;    &lt;\\/TD&gt;&lt;TD&gt;&amp;nbsp;&lt;\\/TD&gt;&lt;TD&gt;\r\n                       &lt;\\/TD&gt;&lt;\\/TR&gt;&lt;\\/TABLE&gt;&quot;;\r\n\r\nI have to show this string in a listView but obviously when I print it there are these html tags. \r\n\r\nI already tried to get rid of the tags but if so I lost informations (like -4 as superscipt). \r\nI&#39;d like to know if it is possible to format the string in a proper way.\r\n\r\nThanks\r\n\r\n**UPDATE:**\r\n\r\nI have partially solved by using Html.fromHtml(String)\r\n\r\n    public String processString(String html) {\r\n        Spanned spanned;\r\n        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\r\n            spanned = Html.fromHtml(html, Html.FROM_HTML_MODE_LEGACY);\r\n        } else {\r\n            spanned = Html.fromHtml(html);\r\n        }\r\n        return spanned.toString();\r\n    }\r\nNow the problem is that the &lt;IMG&gt; tag is displayed like an obj icon\r\n[![image][1]][1] \r\nand i don&#39;t know how to visualize them.\r\n\r\nIs it possible?\r\n\r\n  [1]: https://i.stack.imgur.com/itvF1.png","title":"Format html tag to a string java","body":"<p>I need help\nI have a string like this </p>\n\n<pre><code>String myString = \"The accuracy of a potentiometer (pH meter) is\n                   &amp;#177;0.1 mV. A solution contains 1x10&lt;SUP&gt;-4&lt;\\/SUP&gt; mol\\/L Cl\n                   &lt;SUP&gt;-&lt;\\/SUP&gt; and 1x10&lt;SUP&gt;-3&lt;\\/SUP&gt; mol\\/L Ca&lt;SUP&gt;2+&lt;\\/SUP&gt;. \n                   What is the error in concentration to be expected when measuring\n                   these ions with a chloride or a calcium ion selective electrode? \n                   &lt;TABLE BORDER=0 ALIGN=CENTER&gt; &lt;TR&gt;&lt;TD&gt;    &lt;\\/TD&gt;&lt;TD&gt;&amp;nbsp;&lt;\\/TD&gt;&lt;TD&gt;\n                   &lt;\\/TD&gt;&lt;\\/TR&gt;&lt;\\/TABLE&gt;\";\n</code></pre>\n\n<p>I have to show this string in a listView but obviously when I print it there are these html tags. </p>\n\n<p>I already tried to get rid of the tags but if so I lost informations (like -4 as superscipt). \nI'd like to know if it is possible to format the string in a proper way.</p>\n\n<p>Thanks</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I have partially solved by using Html.fromHtml(String)</p>\n\n<pre><code>public String processString(String html) {\n    Spanned spanned;\n    if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {\n        spanned = Html.fromHtml(html, Html.FROM_HTML_MODE_LEGACY);\n    } else {\n        spanned = Html.fromHtml(html);\n    }\n    return spanned.toString();\n}\n</code></pre>\n\n<p>Now the problem is that the  tag is displayed like an obj icon\n<a href=\"https://i.stack.imgur.com/itvF1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/itvF1.png\" alt=\"image\"></a> \nand i don't know how to visualize them.</p>\n\n<p>Is it possible?</p>\n"},{"tags":["java","spring-webflux","spring-data-r2dbc","r2dbc-mysql"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1672533848,"post_id":74972672,"comment_id":132303997,"body_markdown":"Put a breakpoint where the cast is attempted and see if you can figure out what is happening by looking at values up the stack.","body":"Put a breakpoint where the cast is attempted and see if you can figure out what is happening by looking at values up the stack."},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1677736067,"post_id":74972672,"comment_id":133397623,"body_markdown":"Note that we prefer a technical style of writing here. We gently discourage greetings, hope-you-can-helps, thanks, advance thanks, notes of appreciation, regards, kind regards, signatures, please-can-you-helps, chatty material and abbreviated txtspk, pleading, how long you&#39;ve been stuck, voting advice, meta commentary, etc. Just explain your problem, and show what you&#39;ve tried, what you expected, and what actually happened.","body":"Note that we prefer a technical style of writing here. We gently discourage greetings, hope-you-can-helps, thanks, advance thanks, notes of appreciation, regards, kind regards, signatures, please-can-you-helps, chatty material and abbreviated txtspk, pleading, how long you&#39;ve been stuck, voting advice, meta commentary, etc. Just explain your problem, and show what you&#39;ve tried, what you expected, and what actually happened."}],"answers":[{"tags":[],"owner":{"account_id":480584,"reputation":8228,"user_id":893898,"accept_rate":42,"display_name":"Hantsy"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1684802787,"creation_date":1672639438,"answer_id":74979387,"question_id":74972672,"body_markdown":"If you are using https://github.com/mirromutth/r2dbc-mysql 0.8.x RELEASE and the latest Spring Boot 2.7 or Spring Boot 3.0.x, I think there is a compatibility issue between the R2dbc MySQL driver you are using and R2dbc SPI managed by Spring Boot.\r\n\r\nIn the latest Spring Boot 3.0, R2dbc SPI was updated to 1.0, which introduced several incompatible APIs since 0.8(r2dbc-mysql 0.8.x RELEASE is aligned with R2dbc SPI 0.8). **I have encountered similar exceptions when upgrading to R2dbc 0.9 and 1.0 but used driver version is incompatible**.\r\n\r\n* Try to use the latest [MariaDB R2dbc Driver](https://github.com/mariadb-corporation/mariadb-connector-r2dbc) to connect your MySQL\r\n* Consider other database, eg. PostgreSQL or switch to MariaDB directly.\r\n\r\n\r\n**Update(2023-5-23)**: In the latest Spring Boot 3.x, it includes [jasycn r2dbc mysql](https://github.com/jasync-sql/jasync-sql/tree/master/r2dbc-mysql) instead of the original [r2dbc mysql driver](https://github.com/mirromutth/r2dbc-mysql) which is not active and stick on the old R2dbc SPI 0.8.","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>If you are using <a href=\"https://github.com/mirromutth/r2dbc-mysql\" rel=\"nofollow noreferrer\">https://github.com/mirromutth/r2dbc-mysql</a> 0.8.x RELEASE and the latest Spring Boot 2.7 or Spring Boot 3.0.x, I think there is a compatibility issue between the R2dbc MySQL driver you are using and R2dbc SPI managed by Spring Boot.</p>\n<p>In the latest Spring Boot 3.0, R2dbc SPI was updated to 1.0, which introduced several incompatible APIs since 0.8(r2dbc-mysql 0.8.x RELEASE is aligned with R2dbc SPI 0.8). <strong>I have encountered similar exceptions when upgrading to R2dbc 0.9 and 1.0 but used driver version is incompatible</strong>.</p>\n<ul>\n<li>Try to use the latest <a href=\"https://github.com/mariadb-corporation/mariadb-connector-r2dbc\" rel=\"nofollow noreferrer\">MariaDB R2dbc Driver</a> to connect your MySQL</li>\n<li>Consider other database, eg. PostgreSQL or switch to MariaDB directly.</li>\n</ul>\n<p><strong>Update(2023-5-23)</strong>: In the latest Spring Boot 3.x, it includes <a href=\"https://github.com/jasync-sql/jasync-sql/tree/master/r2dbc-mysql\" rel=\"nofollow noreferrer\">jasycn r2dbc mysql</a> instead of the original <a href=\"https://github.com/mirromutth/r2dbc-mysql\" rel=\"nofollow noreferrer\">r2dbc mysql driver</a> which is not active and stick on the old R2dbc SPI 0.8.</p>\n"},{"comments":[{"owner":{"account_id":441795,"reputation":594,"user_id":832095,"display_name":"dae.eklen"},"score":0,"creation_date":1677856417,"post_id":75395646,"comment_id":133425307,"body_markdown":"this one still does not work for springboot 3 and kotlin: first has Long to Integer cast exception on delete query, second does not perform the delete right even though handles Integer properly","body":"this one still does not work for springboot 3 and kotlin: first has Long to Integer cast exception on delete query, second does not perform the delete right even though handles Integer properly"}],"tags":[],"owner":{"account_id":4285658,"reputation":1,"user_id":3503558,"display_name":"AlekseiG"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675929194,"creation_date":1675929194,"answer_id":75395646,"question_id":74972672,"body_markdown":"Helped for me change dependency from \r\n\r\n    implementation(&quot;org.postgresql:r2dbc-postgresql:1.0.0.RELEASE&quot;)\r\n\r\nto\r\n\r\n    \r\n    implementation(&quot;io.r2dbc:r2dbc-postgresql:0.8.13.RELEASE&quot;)\r\n\r\nfor springboot 2.7.6\r\n\r\nThanks to Hantsy.","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>Helped for me change dependency from</p>\n<pre><code>implementation(&quot;org.postgresql:r2dbc-postgresql:1.0.0.RELEASE&quot;)\n</code></pre>\n<p>to</p>\n<pre><code>implementation(&quot;io.r2dbc:r2dbc-postgresql:0.8.13.RELEASE&quot;)\n</code></pre>\n<p>for springboot 2.7.6</p>\n<p>Thanks to Hantsy.</p>\n"},{"tags":[],"owner":{"account_id":25264024,"reputation":11,"user_id":19094502,"display_name":"Anton Kotov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678987535,"creation_date":1678987535,"answer_id":75759656,"question_id":74972672,"body_markdown":"I had the same issue on delete operations with latest kotlin: 1.8.10, spring-boot: 3.0.4, r2dbc-spi: 1.0.0.RELEASE, r2dbc-postgresql: 1.0.1.RELEASE and jooq: 3.17.8.\r\n\r\nIt is interesting to note that the same code worked in coroutine style, when I converted jooq r2dbc publishers to suspend function with awaitSingle() method. But it failed in reactor mode.\r\n\r\nNevertheless the issue was resolved by updating jooq version to 3.18.0.","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>I had the same issue on delete operations with latest kotlin: 1.8.10, spring-boot: 3.0.4, r2dbc-spi: 1.0.0.RELEASE, r2dbc-postgresql: 1.0.1.RELEASE and jooq: 3.17.8.</p>\n<p>It is interesting to note that the same code worked in coroutine style, when I converted jooq r2dbc publishers to suspend function with awaitSingle() method. But it failed in reactor mode.</p>\n<p>Nevertheless the issue was resolved by updating jooq version to 3.18.0.</p>\n"},{"tags":[],"owner":{"account_id":26348420,"reputation":11,"user_id":20006426,"display_name":"jchrys"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1681245089,"creation_date":1681108447,"answer_id":75974790,"question_id":74972672,"body_markdown":"I assume you&#39;re using a recent version of Spring Boot and Spring Framework.\r\n\r\nThe issue&#39;s root cause is using r2dbc-spi:1.0.0, which requires `getRowsUpdated()` to return a Long, but you&#39;re using dev.miku:r2dbc-mysql:0.8.2, which returns an Integer.\r\n\r\nI suggest switching to [`io.asyncer:r2dbc-mysql:1.0.0`][1] which is official successor to `dev.miku:r2dbc-mysql`. for more information see the [Deprecation NEWS][2]\r\n\r\n\r\n  [1]: https://github.com/asyncer-io/r2dbc-mysql\r\n  [2]: https://github.com/mirromutth/r2dbc-mysql/issues/251","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>I assume you're using a recent version of Spring Boot and Spring Framework.</p>\n<p>The issue's root cause is using r2dbc-spi:1.0.0, which requires <code>getRowsUpdated()</code> to return a Long, but you're using dev.miku:r2dbc-mysql:0.8.2, which returns an Integer.</p>\n<p>I suggest switching to <a href=\"https://github.com/asyncer-io/r2dbc-mysql\" rel=\"nofollow noreferrer\"><code>io.asyncer:r2dbc-mysql:1.0.0</code></a> which is official successor to <code>dev.miku:r2dbc-mysql</code>. for more information see the <a href=\"https://github.com/mirromutth/r2dbc-mysql/issues/251\" rel=\"nofollow noreferrer\">Deprecation NEWS</a></p>\n"},{"tags":[],"owner":{"account_id":6146647,"reputation":121,"user_id":4792411,"display_name":"naav"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684235906,"creation_date":1684235906,"answer_id":76262411,"question_id":74972672,"body_markdown":"The compatibility now seems to be documented and can be found here https://github.com/asyncer-io/r2dbc-mysql#spring-framework-and-r2dbc-spi-compatibility","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>The compatibility now seems to be documented and can be found here <a href=\"https://github.com/asyncer-io/r2dbc-mysql#spring-framework-and-r2dbc-spi-compatibility\" rel=\"nofollow noreferrer\">https://github.com/asyncer-io/r2dbc-mysql#spring-framework-and-r2dbc-spi-compatibility</a></p>\n"}],"owner":{"account_id":4750876,"reputation":1347,"user_id":3840940,"accept_rate":87,"display_name":"Joseph Hwang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1910,"favorite_count":0,"down_vote_count":2,"up_vote_count":4,"accepted_answer_id":74979387,"answer_count":5,"score":2,"last_activity_date":1684802787,"creation_date":1672533484,"question_id":74972672,"body_markdown":"I use R2DBC MySQL driver in my Spring Webflux reactive web. And I try to execute table schema SQL script. But the script continuously cause errors. \r\n\r\nFirst, I make 3 model classes.\r\n\r\n**User.java**\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder \r\n    @Table(&quot;blog_user&quot;) \r\n    public class User {\r\n     \t \r\n     \t@Id\r\n     \t@Column(&quot;user_id&quot;)\r\n     \tprivate Long id;\r\n     \t\r\n     \t@Column\r\n     \tprivate String username;\r\n     \r\n     \t@Column\r\n     \t@JsonIgnore\r\n     \tprivate String password;\r\n     \t \r\n     \t@Column\r\n     \tprivate String fullname;\r\n     \t\r\n     \t@Column\r\n    \tprivate Integer role;\r\n    }\r\n\r\n**Post.java**\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder\r\n    @Table\r\n    public class Post {\r\n     \r\n     \t@Id\r\n     \t@Column(&quot;post_id&quot;)\r\n     \tprivate Long id;\r\n     \t\r\n     \t@Column\r\n     \tprivate String title;\r\n      \r\n     \t@Column\r\n    \tprivate String body;\r\n    \t\t\r\n     \t@Column(&quot;created_date&quot;)\r\n     \tprivate LocalDateTime createdDate;\r\n     \t\r\n     \t@Column(&quot;user_id&quot;)\r\n     \tprivate User user;\r\n     \t\r\n     \t@Column(&quot;posts&quot;)\r\n     \tprivate Collection&lt;Tag&gt; tags;\r\n    }\r\n\r\n\r\n**Tag.java**\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Builder\r\n    @Table\r\n    public class Tag {\r\n      \r\n     \t@Id\r\n     \t@Column(&quot;tag_id&quot;)\r\n     \tprivate Long id;\r\n     \t\r\n     \t@Column\r\n     \tprivate String body;\r\n     \t\r\n     \t@Column(&quot;created_date&quot;)\r\n     \tprivate LocalDateTime createdDate;\r\n     \t\r\n     \t@Column(&quot;post_id&quot;)\r\n     \tprivate Post post;\r\n     \t\t\r\n     \t@Column(&quot;user_id&quot;)\r\n     \tprivate User user;\r\n    }\r\n\r\n**schema.sql**\r\n\r\n    -- TABLE intialized.\r\n    DROP TABLE IF EXISTS tag;\r\n    DROP TABLE IF EXISTS post;\r\n    DROP TABLE IF EXISTS blog_user;\r\n    \r\n    \r\n    -- TABLE created.\r\n    CREATE TABLE IF NOT EXISTS blog_user (\r\n    \tuser_id BIGINT NOT NULL,\r\n    \tusername VARCHAR(30) NOT NULL,\r\n    \tpassword VARCHAR(255) NOT NULL,\r\n    \temail VARCHAR(255),\r\n    \tfullname VARCHAR(255),\r\n    \trole SMALLINT CHECK (role IN (0, 1)),\r\n    \r\n    \tPRIMARY KEY (user_id),\r\n    \tUNIQUE (username)\r\n    );\r\n    \r\n    CREATE TABLE IF NOT EXISTS post (\r\n    \tpost_id BIGINT NOT NULL,\r\n    \ttitle VARCHAR(30) NOT NULL,\r\n    \tbody TEXT,\r\n    \tcreated_date DATETIME(6) NOT NULL,\r\n    \tuser_id BIGINT NOT NULL,\r\n    \r\n    \tPRIMARY KEY (post_id),\r\n    \tFOREIGN KEY (user_id) REFERENCES blog_user (user_id)\r\n    );\r\n    \r\n    CREATE TABLE IF NOT EXISTS tag(\r\n    \ttag_id BIGINT NOT NULL,\r\n    \tbody VARCHAR(255),\r\n    \tcreated_date DATETIME(6) NOT NULL,\r\n    \tpost_id BIGINT NOT NULL,\r\n    \tuser_id BIGINT NOT NULL,\r\n    \r\n    \tPRIMARY KEY (tag_id),\r\n    \tFOREIGN KEY (post_id) REFERENCES post (post_id),\r\n    \tFOREIGN KEY (user_id) REFERENCES blog_user (user_id)\r\n    );\r\n\r\nBelow configuration method executes schema.sql.\r\n\r\n**reactive web initializer method** \r\n\r\n    @Bean\r\n    ConnectionFactoryInitializer initializer(ConnectionFactory connectionFactory) {\r\n    \r\n            ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\r\n            initializer.setConnectionFactory(connectionFactory);\r\n            \r\n            ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();\r\n            databasePopulator.addScripts(new ClassPathResource(schema.sql));\r\n            initializer.setDatabasePopulator(databasePopulator);\r\n    \r\n    \r\n            return initializer;\r\n    }\r\n\r\nHowever, initially executed schema.sql throws errors,\r\n\r\n    Error starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n    [2m2023-01-01T09:06:30.943+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.945+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.947+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.948+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.951+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.953+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.955+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that&#39;s unknown, trying to use system default timezone\r\n    [2m2023-01-01T09:06:30.974+09:00[0;39m [31mERROR[0;39m [35m10464[0;39m [2m---[0;39m [2m[  restartedMain][0;39m [36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed\r\n    \r\n    org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;initializer&#39; defined in class path resource [com/aaa/blog/wf/config/BlogWebFluxConfig.class]: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \tat org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \tat com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\r\n    Caused by: org.springframework.r2dbc.connection.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\r\n    \tat org.springframework.r2dbc.connection.init.ScriptUtils.lambda$runStatement$9(ScriptUtils.java:571) ~[spring-r2dbc-6.0.3.jar:6.0.3]\r\n    \tat reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onError(MonoStreamCollector.java:149) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:126) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:543) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:984) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.NextProcessor.tryEmitValue(NextProcessor.java:358) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.NextProcessor.onNext(NextProcessor.java:298) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat dev.miku.r2dbc.mysql.MySqlResult.lambda$null$3(MySqlResult.java:114) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat reactor.core.publisher.LambdaSubscriber.onNext(LambdaSubscriber.java:160) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowFlux.drainRegular(FluxWindowPredicate.java:670) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowFlux.drain(FluxWindowPredicate.java:748) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowFlux.onNext(FluxWindowPredicate.java:790) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxWindowPredicate$WindowPredicateMain.onNext(FluxWindowPredicate.java:241) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:193) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat dev.miku.r2dbc.mysql.util.DiscardOnCancelSubscriber.onNext(DiscardOnCancelSubscriber.java:70) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:128) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.EmitterProcessor.drain(EmitterProcessor.java:537) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.EmitterProcessor.tryEmitNext(EmitterProcessor.java:343) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.core.publisher.EmitterProcessor.onNext(EmitterProcessor.java:309) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat dev.miku.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:340) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat dev.miku.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:103) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \tat reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:292) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:401) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:411) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113) ~[reactor-netty-core-1.1.1.jar:1.1.1]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat dev.miku.r2dbc.mysql.client.MessageDuplexCodec.handleDecoded(MessageDuplexCodec.java:187) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat dev.miku.r2dbc.mysql.client.MessageDuplexCodec.channelRead(MessageDuplexCodec.java:95) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1236) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1285) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n    \tSuppressed: java.lang.Exception: #block terminated with an error\r\n    \t\tat reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \t\tat reactor.core.publisher.Mono.block(Mono.java:1710) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \t\tat org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.execute(ConnectionFactoryInitializer.java:112) ~[spring-r2dbc-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.afterPropertiesSet(ConnectionFactoryInitializer.java:97) ~[spring-r2dbc-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\r\n    \t\tat org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\r\n    \t\tat com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\r\n    \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n    \t\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n    \t\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n    \t\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n    \t\tat org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\r\n    Caused by: java.lang.ClassCastException: class java.lang.Integer cannot be cast to class java.lang.Long (java.lang.Integer and java.lang.Long are in module java.base of loader &#39;bootstrap&#39;)\r\n    \tat java.base/java.util.stream.Collectors.lambda$summingLong$23(Collectors.java:699) ~[na:na]\r\n    \tat reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:117) ~[reactor-core-3.5.1.jar:3.5.1]\r\n    \t... 67 common frames omitted\r\n\r\nI think my reactive R2DBC model classes contains some errors. ClassCastException. But I have no idea what element has wrong class type. The printed error message show no code line number. I changed the id type of model class(User, Post, Tag) into Integer type, but the same errors are thrown.\r\n","title":"java.lang.Integer cannot be cast to class java.lang.Long in R2DBC mysql model classes","body":"<p>I use R2DBC MySQL driver in my Spring Webflux reactive web. And I try to execute table schema SQL script. But the script continuously cause errors.</p>\n<p>First, I make 3 model classes.</p>\n<p><strong>User.java</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder \n@Table(&quot;blog_user&quot;) \npublic class User {\n     \n    @Id\n    @Column(&quot;user_id&quot;)\n    private Long id;\n    \n    @Column\n    private String username;\n \n    @Column\n    @JsonIgnore\n    private String password;\n     \n    @Column\n    private String fullname;\n    \n    @Column\n    private Integer role;\n}\n</code></pre>\n<p><strong>Post.java</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table\npublic class Post {\n \n    @Id\n    @Column(&quot;post_id&quot;)\n    private Long id;\n    \n    @Column\n    private String title;\n  \n    @Column\n    private String body;\n        \n    @Column(&quot;created_date&quot;)\n    private LocalDateTime createdDate;\n    \n    @Column(&quot;user_id&quot;)\n    private User user;\n    \n    @Column(&quot;posts&quot;)\n    private Collection&lt;Tag&gt; tags;\n}\n</code></pre>\n<p><strong>Tag.java</strong></p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Builder\n@Table\npublic class Tag {\n  \n    @Id\n    @Column(&quot;tag_id&quot;)\n    private Long id;\n    \n    @Column\n    private String body;\n    \n    @Column(&quot;created_date&quot;)\n    private LocalDateTime createdDate;\n    \n    @Column(&quot;post_id&quot;)\n    private Post post;\n        \n    @Column(&quot;user_id&quot;)\n    private User user;\n}\n</code></pre>\n<p><strong>schema.sql</strong></p>\n<pre><code>-- TABLE intialized.\nDROP TABLE IF EXISTS tag;\nDROP TABLE IF EXISTS post;\nDROP TABLE IF EXISTS blog_user;\n\n\n-- TABLE created.\nCREATE TABLE IF NOT EXISTS blog_user (\n    user_id BIGINT NOT NULL,\n    username VARCHAR(30) NOT NULL,\n    password VARCHAR(255) NOT NULL,\n    email VARCHAR(255),\n    fullname VARCHAR(255),\n    role SMALLINT CHECK (role IN (0, 1)),\n\n    PRIMARY KEY (user_id),\n    UNIQUE (username)\n);\n\nCREATE TABLE IF NOT EXISTS post (\n    post_id BIGINT NOT NULL,\n    title VARCHAR(30) NOT NULL,\n    body TEXT,\n    created_date DATETIME(6) NOT NULL,\n    user_id BIGINT NOT NULL,\n\n    PRIMARY KEY (post_id),\n    FOREIGN KEY (user_id) REFERENCES blog_user (user_id)\n);\n\nCREATE TABLE IF NOT EXISTS tag(\n    tag_id BIGINT NOT NULL,\n    body VARCHAR(255),\n    created_date DATETIME(6) NOT NULL,\n    post_id BIGINT NOT NULL,\n    user_id BIGINT NOT NULL,\n\n    PRIMARY KEY (tag_id),\n    FOREIGN KEY (post_id) REFERENCES post (post_id),\n    FOREIGN KEY (user_id) REFERENCES blog_user (user_id)\n);\n</code></pre>\n<p>Below configuration method executes schema.sql.</p>\n<p><strong>reactive web initializer method</strong></p>\n<pre><code>@Bean\nConnectionFactoryInitializer initializer(ConnectionFactory connectionFactory) {\n\n        ConnectionFactoryInitializer initializer = new ConnectionFactoryInitializer();\n        initializer.setConnectionFactory(connectionFactory);\n        \n        ResourceDatabasePopulator databasePopulator = new ResourceDatabasePopulator();\n        databasePopulator.addScripts(new ClassPathResource(schema.sql));\n        initializer.setDatabasePopulator(databasePopulator);\n\n\n        return initializer;\n}\n</code></pre>\n<p>However, initially executed schema.sql throws errors,</p>\n<pre><code>Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n[2m2023-01-01T09:06:30.943+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.945+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.947+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.948+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.951+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.953+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.955+09:00[0;39m [33m WARN[0;39m [35m10464[0;39m [2m---[0;39m [2m[actor-tcp-nio-3][0;39m [36mdev.miku.r2dbc.mysql.MySqlConnection    [0;39m [2m:[0;39m The server timezone is &lt;???ѹα? ǥ?ؽ&gt; that's unknown, trying to use system default timezone\n[2m2023-01-01T09:06:30.974+09:00[0;39m [31mERROR[0;39m [35m10464[0;39m [2m---[0;39m [2m[  restartedMain][0;39m [36mo.s.boot.SpringApplication              [0;39m [2m:[0;39m Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'initializer' defined in class path resource [com/aaa/blog/wf/config/BlogWebFluxConfig.class]: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1751) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\n    at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\n    at com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\nCaused by: org.springframework.r2dbc.connection.init.ScriptStatementFailedException: Failed to execute SQL script statement #1 of class path resource [sql/spring-boot-mysql-schema.sql]: DROP TABLE IF EXISTS tag\n    at org.springframework.r2dbc.connection.init.ScriptUtils.lambda$runStatement$9(ScriptUtils.java:571) ~[spring-r2dbc-6.0.3.jar:6.0.3]\n    at reactor.core.publisher.FluxOnErrorResume$ResumeSubscriber.onError(FluxOnErrorResume.java:94) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onError(MonoStreamCollector.java:149) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:126) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxFlatMap$FlatMapMain.tryEmit(FluxFlatMap.java:543) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxFlatMap$FlatMapInner.onNext(FluxFlatMap.java:984) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.Operators$MonoSubscriber.complete(Operators.java:1839) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.NextProcessor.tryEmitValue(NextProcessor.java:358) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.NextProcessor.onNext(NextProcessor.java:298) ~[reactor-core-3.5.1.jar:3.5.1]\n    at dev.miku.r2dbc.mysql.MySqlResult.lambda$null$3(MySqlResult.java:114) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at reactor.core.publisher.LambdaSubscriber.onNext(LambdaSubscriber.java:160) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowFlux.drainRegular(FluxWindowPredicate.java:670) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowFlux.drain(FluxWindowPredicate.java:748) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowFlux.onNext(FluxWindowPredicate.java:790) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxWindowPredicate$WindowPredicateMain.onNext(FluxWindowPredicate.java:241) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxHandleFuseable$HandleFuseableSubscriber.onNext(FluxHandleFuseable.java:193) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107) ~[reactor-core-3.5.1.jar:3.5.1]\n    at dev.miku.r2dbc.mysql.util.DiscardOnCancelSubscriber.onNext(DiscardOnCancelSubscriber.java:70) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.MonoFlatMapMany$FlatMapManyInner.onNext(MonoFlatMapMany.java:250) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:200) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxHandle$HandleSubscriber.onNext(FluxHandle.java:128) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.EmitterProcessor.drain(EmitterProcessor.java:537) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.EmitterProcessor.tryEmitNext(EmitterProcessor.java:343) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.InternalManySink.emitNext(InternalManySink.java:27) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.core.publisher.EmitterProcessor.onNext(EmitterProcessor.java:309) ~[reactor-core-3.5.1.jar:3.5.1]\n    at dev.miku.r2dbc.mysql.client.ReactorNettyClient$ResponseSink.next(ReactorNettyClient.java:340) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at dev.miku.r2dbc.mysql.client.ReactorNettyClient.lambda$new$0(ReactorNettyClient.java:103) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at reactor.core.publisher.FluxPeek$PeekSubscriber.onNext(FluxPeek.java:185) ~[reactor-core-3.5.1.jar:3.5.1]\n    at reactor.netty.channel.FluxReceive.drainReceiver(FluxReceive.java:292) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at reactor.netty.channel.FluxReceive.onInboundNext(FluxReceive.java:401) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at reactor.netty.channel.ChannelOperations.onInboundNext(ChannelOperations.java:411) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.java:113) ~[reactor-netty-core-1.1.1.jar:1.1.1]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at dev.miku.r2dbc.mysql.client.MessageDuplexCodec.handleDecoded(MessageDuplexCodec.java:187) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at dev.miku.r2dbc.mysql.client.MessageDuplexCodec.channelRead(MessageDuplexCodec.java:95) ~[r2dbc-mysql-0.8.2.RELEASE.jar:0.8.2.RELEASE]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:442) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.fireChannelRead(ByteToMessageDecoder.java:346) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:318) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.ssl.SslHandler.unwrap(SslHandler.java:1373) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.ssl.SslHandler.decodeJdkCompatible(SslHandler.java:1236) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.ssl.SslHandler.decode(SslHandler.java:1285) ~[netty-handler-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.decodeRemovalReentryProtection(ByteToMessageDecoder.java:529) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.callDecode(ByteToMessageDecoder.java:468) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.handler.codec.ByteToMessageDecoder.channelRead(ByteToMessageDecoder.java:290) ~[netty-codec-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.86.Final.jar:4.1.86.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n    Suppressed: java.lang.Exception: #block terminated with an error\n        at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:99) ~[reactor-core-3.5.1.jar:3.5.1]\n        at reactor.core.publisher.Mono.block(Mono.java:1710) ~[reactor-core-3.5.1.jar:3.5.1]\n        at org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.execute(ConnectionFactoryInitializer.java:112) ~[spring-r2dbc-6.0.3.jar:6.0.3]\n        at org.springframework.r2dbc.connection.init.ConnectionFactoryInitializer.afterPropertiesSet(ConnectionFactoryInitializer.java:97) ~[spring-r2dbc-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1797) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1747) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961) ~[spring-beans-6.0.3.jar:6.0.3]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:915) ~[spring-context-6.0.3.jar:6.0.3]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[spring-context-6.0.3.jar:6.0.3]\n        at org.springframework.boot.web.reactive.context.ReactiveWebServerApplicationContext.refresh(ReactiveWebServerApplicationContext.java:66) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:730) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:432) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1302) ~[spring-boot-3.0.1.jar:3.0.1]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1291) ~[spring-boot-3.0.1.jar:3.0.1]\n        at com.aaa.blog.wf.SpringBlogWebFluxMySqlApplication.main(SpringBlogWebFluxMySqlApplication.java:10) ~[classes/:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n        at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-3.0.1.jar:3.0.1]\nCaused by: java.lang.ClassCastException: class java.lang.Integer cannot be cast to class java.lang.Long (java.lang.Integer and java.lang.Long are in module java.base of loader 'bootstrap')\n    at java.base/java.util.stream.Collectors.lambda$summingLong$23(Collectors.java:699) ~[na:na]\n    at reactor.core.publisher.MonoStreamCollector$StreamCollectorSubscriber.onNext(MonoStreamCollector.java:117) ~[reactor-core-3.5.1.jar:3.5.1]\n    ... 67 common frames omitted\n</code></pre>\n<p>I think my reactive R2DBC model classes contains some errors. ClassCastException. But I have no idea what element has wrong class type. The printed error message show no code line number. I changed the id type of model class(User, Post, Tag) into Integer type, but the same errors are thrown.</p>\n"},{"tags":["java","mysql","jdbc"],"comments":[{"owner":{"account_id":1686851,"reputation":7640,"user_id":1549950,"accept_rate":69,"display_name":"Michael Lihs"},"score":1,"creation_date":1538768303,"post_id":52672230,"comment_id":92274350,"body_markdown":"Maybe you are missing a `:` in the jdbc string - try `jdbc:mysql://localhost:3306/java`","body":"Maybe you are missing a <code>:</code> in the jdbc string - try <code>jdbc:mysql:&#47;&#47;localhost:3306&#47;java</code>"},{"owner":{"display_name":"user10036786"},"score":0,"creation_date":1538768519,"post_id":52672230,"comment_id":92274452,"body_markdown":"OMG you&#39;re right! Thanks a lot man","body":"OMG you&#39;re right! Thanks a lot man"}],"answers":[{"tags":[],"owner":{"account_id":1754145,"reputation":43960,"user_id":1602555,"display_name":"Karol Dowbecki"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1538768800,"creation_date":1538768800,"answer_id":52672396,"question_id":52672230,"body_markdown":"Your JDBC URL should follow `jdbc:mysql://localhost/test` format as per [\r\n7.1 Connecting to MySQL Using the JDBC DriverManager Interface][1] docs.\r\n\r\nYou are missing a semicolon after `mysql` part, it should be\r\n\r\n    private static final String CONN_STRING = &quot;jdbc:mysql://localhost:3306/java&quot;;\r\n\r\n\r\n  [1]: https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-usagenotes-connect-drivermanager.html","title":"java.sql.SQLException: No suitable driver found for jdbc:mysql//127.0.0.1:3306/java Error - JDK 1.8, mysql-connector 8.0.12","body":"<p>Your JDBC URL should follow <code>jdbc:mysql://localhost/test</code> format as per <a href=\"https://dev.mysql.com/doc/connector-j/8.0/en/connector-j-usagenotes-connect-drivermanager.html\" rel=\"nofollow noreferrer\">\n7.1 Connecting to MySQL Using the JDBC DriverManager Interface</a> docs.</p>\n\n<p>You are missing a semicolon after <code>mysql</code> part, it should be</p>\n\n<pre><code>private static final String CONN_STRING = \"jdbc:mysql://localhost:3306/java\";\n</code></pre>\n"}],"owner":{"display_name":"user10036786"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1683817226,"accepted_answer_id":52672396,"answer_count":1,"score":0,"last_activity_date":1684802764,"creation_date":1538767975,"question_id":52672230,"body_markdown":"I tried searching for a solution but the questions on this website just weren&#39;t the answer I&#39;m looking for.\r\n\r\nI tried running:\r\n\r\n    private static final String USERNAME= &quot;root&quot;;\r\n    private static final String PASSWORD= &quot;root&quot;;\r\n    private static final String CONN_STRING= &quot;jdbc:mysql//localhost:3306/java&quot;;\r\n\r\n    conn Connection = null;\r\n    \r\n    try{\r\n        conn = DriverManager.getConnection(CONN_STRING, USERNAME, PASSWORD);\r\n        System.out.println(&quot;Connected&quot;);\r\n    } catch (SQLException e){\r\n        System.err.println(e);\r\n    }\r\n\r\nI&#39;ve got the 8.0.12 version of both server and connector.","title":"java.sql.SQLException: No suitable driver found for jdbc:mysql//127.0.0.1:3306/java Error - JDK 1.8, mysql-connector 8.0.12","body":"<p>I tried searching for a solution but the questions on this website just weren't the answer I'm looking for.</p>\n<p>I tried running:</p>\n<pre><code>private static final String USERNAME= &quot;root&quot;;\nprivate static final String PASSWORD= &quot;root&quot;;\nprivate static final String CONN_STRING= &quot;jdbc:mysql//localhost:3306/java&quot;;\n\nconn Connection = null;\n\ntry{\n    conn = DriverManager.getConnection(CONN_STRING, USERNAME, PASSWORD);\n    System.out.println(&quot;Connected&quot;);\n} catch (SQLException e){\n    System.err.println(e);\n}\n</code></pre>\n<p>I've got the 8.0.12 version of both server and connector.</p>\n"},{"tags":["java","list","linked-list"],"comments":[{"owner":{"account_id":5368387,"reputation":442,"user_id":4277582,"accept_rate":38,"display_name":"Ayoub Abid"},"score":0,"creation_date":1548573830,"post_id":54385888,"comment_id":95584224,"body_markdown":"It &#39;s not clear what you are trying to compare. What ist &quot;front&quot; ?","body":"It &#39;s not clear what you are trying to compare. What ist &quot;front&quot; ?"},{"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"score":0,"creation_date":1548575062,"post_id":54385888,"comment_id":95584425,"body_markdown":"&quot;front&quot; is a head name which lead my LinkedList, and I need to compare the int value in two LinkedList","body":"&quot;front&quot; is a head name which lead my LinkedList, and I need to compare the int value in two LinkedList"},{"owner":{"account_id":2045726,"reputation":1580,"user_id":1825844,"display_name":"gvmani"},"score":0,"creation_date":1548575388,"post_id":54385888,"comment_id":95584476,"body_markdown":"`while(prev.next.next != null &amp;&amp; current.next.next != null)` will throw exception if either of `prev.next` or `current.next` is null.","body":"<code>while(prev.next.next != null &amp;&amp; current.next.next != null)</code> will throw exception if either of <code>prev.next</code> or <code>current.next</code> is null."},{"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"score":0,"creation_date":1548575740,"post_id":54385888,"comment_id":95584547,"body_markdown":"Thanks for mentioning this, and I changed this. But the solution is still not working, I think there must be some problems in my solution.","body":"Thanks for mentioning this, and I changed this. But the solution is still not working, I think there must be some problems in my solution."},{"owner":{"account_id":4962253,"reputation":18492,"user_id":3992939,"accept_rate":73,"display_name":"c0der"},"score":0,"creation_date":1548576647,"post_id":54385888,"comment_id":95584735,"body_markdown":"The question is about &quot;lists of integers&quot;, not linked list, isn&#39;t it ?","body":"The question is about &quot;lists of integers&quot;, not linked list, isn&#39;t it ?"},{"owner":{"account_id":4062291,"reputation":2366,"user_id":3338483,"display_name":"Toris"},"score":0,"creation_date":1548576757,"post_id":54385888,"comment_id":95584765,"body_markdown":"It seems that next is a reference, so `front.next = other.front.next;` (at this point `temp` also be set `other.front.next`) and other lines seems to try to point same objects like that.","body":"It seems that next is a reference, so <code>front.next = other.front.next;</code> (at this point <code>temp</code> also be set <code>other.front.next</code>) and other lines seems to try to point same objects like that."},{"owner":{"account_id":2045726,"reputation":1580,"user_id":1825844,"display_name":"gvmani"},"score":0,"creation_date":1548577215,"post_id":54385888,"comment_id":95584831,"body_markdown":"instead of `temp = temp.next;\n                current.next.next =prev.next.next;\n                prev.next.next = temp;`  do `curr = prev.next; prev = temp;`","body":"instead of <code>temp = temp.next;                 current.next.next =prev.next.next;                 prev.next.next = temp;</code>  do <code>curr = prev.next; prev = temp;</code>"},{"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"score":0,"creation_date":1548577463,"post_id":54385888,"comment_id":95584875,"body_markdown":"ummm I tried to edit my code as you told, but it&#39;s still not working","body":"ummm I tried to edit my code as you told, but it&#39;s still not working"}],"answers":[{"tags":[],"owner":{"account_id":25155312,"reputation":19,"user_id":21552621,"display_name":"Elena"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684802572,"creation_date":1684802572,"answer_id":76310654,"question_id":54385888,"body_markdown":"If i understood correct, heres an idea:\r\n\r\n\r\nThere are a few issues in your code that need to be addressed:\r\n\r\n 1. Comparison of values: The condition if(front.data &gt; other.front.data) compares the values of the nodes in the first list with the values of the nodes in the second list. However, your task states that you need to ensure the first list has smaller values in corresponding positions. In other words, you should compare values at the same positions in both lists. To fix this, you need to modify the comparison logic.\r\n\r\n 2. Swapping nodes: In the code segment front = other.front; and other.front = prev;, you are swapping the entire nodes instead of just their values. This can lead to incorrect results and a broken linked list structure. Instead, you should swap the values of the nodes.\r\n\r\n 3. Loop conditions: The conditions prev.next.next != null and current.next.next != null in the while loop check for the next two nodes, which can cause issues if one of the lists is shorter than the other. You should change the conditions to prev.next != null and current.next != null to ensure the loop terminates correctly.\r\n\r\n 4. Incorrect node connections: In the inner loop, you are incorrectly reconnecting the nodes after swapping their values. The lines temp = temp.next;, current.next.next = prev.next.next;, and prev.next.next = temp; are unnecessary and can lead to incorrect connections.\r\n\r\n   Try to use this:\r\n\r\n    enter code here\r\n    public void takeSmallerFrom(LinkedIntList other) {\r\n    if (front != null &amp;&amp; other.front != null) {\r\n        ListNode prev = null;\r\n        ListNode current = other.front;\r\n\r\n        while (front != null &amp;&amp; current != null) {\r\n            if (front.data &gt; current.data) {\r\n                int temp = front.data;\r\n                front.data = current.data;\r\n                current.data = temp;\r\n            }\r\n\r\n            prev = front;\r\n            front = front.next;\r\n            current = current.next;\r\n        }\r\n\r\n        if (current != null) {\r\n            prev.next = current;\r\n        }\r\n    }\r\n}\r\n\r\nIn this code, we iterate through both lists simultaneously, comparing values and swapping them when necessary. After the loop, if the second list is longer, we append the remaining nodes of the second list to the end of the first list.\r\n\r\n\r\n","title":"Something about LinkedList","body":"<p>If i understood correct, heres an idea:</p>\n<p>There are a few issues in your code that need to be addressed:</p>\n<ol>\n<li><p>Comparison of values: The condition if(front.data &gt; other.front.data) compares the values of the nodes in the first list with the values of the nodes in the second list. However, your task states that you need to ensure the first list has smaller values in corresponding positions. In other words, you should compare values at the same positions in both lists. To fix this, you need to modify the comparison logic.</p>\n</li>\n<li><p>Swapping nodes: In the code segment front = other.front; and other.front = prev;, you are swapping the entire nodes instead of just their values. This can lead to incorrect results and a broken linked list structure. Instead, you should swap the values of the nodes.</p>\n</li>\n<li><p>Loop conditions: The conditions prev.next.next != null and current.next.next != null in the while loop check for the next two nodes, which can cause issues if one of the lists is shorter than the other. You should change the conditions to prev.next != null and current.next != null to ensure the loop terminates correctly.</p>\n</li>\n<li><p>Incorrect node connections: In the inner loop, you are incorrectly reconnecting the nodes after swapping their values. The lines temp = temp.next;, current.next.next = prev.next.next;, and prev.next.next = temp; are unnecessary and can lead to incorrect connections.</p>\n</li>\n</ol>\n<p>Try to use this:</p>\n<pre><code>enter code here\npublic void takeSmallerFrom(LinkedIntList other) {\nif (front != null &amp;&amp; other.front != null) {\n    ListNode prev = null;\n    ListNode current = other.front;\n\n    while (front != null &amp;&amp; current != null) {\n        if (front.data &gt; current.data) {\n            int temp = front.data;\n            front.data = current.data;\n            current.data = temp;\n        }\n\n        prev = front;\n        front = front.next;\n        current = current.next;\n    }\n\n    if (current != null) {\n        prev.next = current;\n    }\n}\n</code></pre>\n<p>}</p>\n<p>In this code, we iterate through both lists simultaneously, comparing values and swapping them when necessary. After the loop, if the second list is longer, we append the remaining nodes of the second list to the end of the first list.</p>\n"}],"owner":{"account_id":14235514,"reputation":21,"user_id":10283421,"display_name":"Zhong Zhiwei"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":195,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684802572,"creation_date":1548573181,"question_id":54385888,"body_markdown":"I am very new in Java and met some trouble when learning LinkedList.\n\nI am stuck at this problem: \nWrite a method takeSmallerFrom that compares two lists of integers, making sure that the first list has smaller values in corresponding positions. Either one of lists can be longer than another.\n\nAnd my attempting solution is below:\n\n    public void takeSmallerFrom(LinkedIntList other) {\n    if(front != null &amp;&amp; other.front != null) {\n        ListNode temp = front.next;\n        ListNode prev = front;\n        if(front.next != null &amp;&amp; other.front != null) {\n            if(front.data &gt; other.front.data) {\n                front.next = other.front.next;\n                other.front.next = temp;\n                front = other.front;\n                other.front = prev;\n            }\n            ListNode current = other.front;\n            while(prev.next.next != null &amp;&amp; current.next.next != null) {\n                if(prev.next.data &gt; current.next.data) {\n                    temp = prev.next;\n                    prev.next = current.next;\n                    current.next = temp;\n                    temp = temp.next;\n                    current.next.next =prev.next.next;\n                    prev.next.next = temp; \n                } \n                prev = prev.next;\n                current = current.next;\n            }\n        }\n    }\nThe result shows that my solution failed after the first ListNode, but I can&#39;t find the reason why the rest of them failed. I am really stuck at this, if anyone here can help me, thank you!\n\n## Sorry I didn&#39;t clarify: &quot;front&quot; means the head which leads my LinkedList\nThe whole solution is for a special LinkedList which only stores int, so I need to compare the each int value in these LinkedLists respectively","title":"Something about LinkedList","body":"<p>I am very new in Java and met some trouble when learning LinkedList.</p>\n<p>I am stuck at this problem:\nWrite a method takeSmallerFrom that compares two lists of integers, making sure that the first list has smaller values in corresponding positions. Either one of lists can be longer than another.</p>\n<p>And my attempting solution is below:</p>\n<pre><code>public void takeSmallerFrom(LinkedIntList other) {\nif(front != null &amp;&amp; other.front != null) {\n    ListNode temp = front.next;\n    ListNode prev = front;\n    if(front.next != null &amp;&amp; other.front != null) {\n        if(front.data &gt; other.front.data) {\n            front.next = other.front.next;\n            other.front.next = temp;\n            front = other.front;\n            other.front = prev;\n        }\n        ListNode current = other.front;\n        while(prev.next.next != null &amp;&amp; current.next.next != null) {\n            if(prev.next.data &gt; current.next.data) {\n                temp = prev.next;\n                prev.next = current.next;\n                current.next = temp;\n                temp = temp.next;\n                current.next.next =prev.next.next;\n                prev.next.next = temp; \n            } \n            prev = prev.next;\n            current = current.next;\n        }\n    }\n}\n</code></pre>\n<p>The result shows that my solution failed after the first ListNode, but I can't find the reason why the rest of them failed. I am really stuck at this, if anyone here can help me, thank you!</p>\n<h2>Sorry I didn't clarify: &quot;front&quot; means the head which leads my LinkedList</h2>\n<p>The whole solution is for a special LinkedList which only stores int, so I need to compare the each int value in these LinkedLists respectively</p>\n"},{"tags":["java","arrays","generics","kotlin","reification"],"answers":[{"tags":[],"owner":{"account_id":4633949,"reputation":8005,"user_id":3755692,"accept_rate":62,"display_name":"msrd0"},"comment_count":0,"down_vote_count":0,"up_vote_count":51,"is_accepted":true,"score":51,"last_activity_date":1668866485,"creation_date":1508647108,"answer_id":46870546,"question_id":46869353,"body_markdown":"Looking at the declaration of `emptyArray()` in the kotlin stdlib (jvm), we notice the `reified` type parameter:\r\n\r\n    public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\r\n\r\nThe `reified` type parameter means that you have access to the class of `T` at compile-time and can access it like `T::class`. You can read more about `reified` type parameters in the [Kotlin reference](https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters). Since `Array&lt;T&gt;` compiles to java `T[]`, we need to know the type at compile-time, hence the `reified` parameter. If you try writing an emptyArray() function without the `reified` keyword, you&#39;ll get a compiler error:\r\n\r\n    fun &lt;T&gt; emptyArray() : Array&lt;T&gt; = Array(0, { throw Exception() })\r\n\r\n&gt; Cannot use T as a reified type parameter. Use a class instead.\r\n\r\n&lt;hr/&gt;\r\n\r\nNow, let&#39;s take a look at the implementation of `emptyList()`:\r\n\r\n    public fun &lt;T&gt; emptyList(): List&lt;T&gt; = EmptyList\r\n\r\nThis implementation doesn&#39;t need the parameter `T` at all. It just returns the internal object `EmptyList`, which itself inherits from `List&lt;Nothing&gt;`. The kotlin type `Nothing` is the return-type of the `throw` keyword and is _a value that never exists_ ([reference](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing.html)). If a method returns `Nothing`, is is equivalent to throwing an exception at that place. So we can safely use `Nothing` here because everytime we would call `EmptyList.get()` the compiler knows that this will return an exception.\r\n\r\n&lt;hr/&gt;\r\n\r\n**Bonus question:**\r\n\r\nComing from Java and C++, I am used to `ArrayList` or `std::vector` to be far easier to use that arrays. I use kotlin now for a few month and I usually don&#39;t see a big difference between arrays and lists when writing source code. Both have tons of useful extension functions which behave in a similar way. However, the Kotlin compiler handles arrays and lists very different, as Java interoperability is very important for the Kotlin team. I usually prefer using lists, and that&#39;s what I&#39;d recommend in your case too.","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>Looking at the declaration of <code>emptyArray()</code> in the kotlin stdlib (jvm), we notice the <code>reified</code> type parameter:</p>\n<pre><code>public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\n</code></pre>\n<p>The <code>reified</code> type parameter means that you have access to the class of <code>T</code> at compile-time and can access it like <code>T::class</code>. You can read more about <code>reified</code> type parameters in the <a href=\"https://kotlinlang.org/docs/reference/inline-functions.html#reified-type-parameters\" rel=\"noreferrer\">Kotlin reference</a>. Since <code>Array&lt;T&gt;</code> compiles to java <code>T[]</code>, we need to know the type at compile-time, hence the <code>reified</code> parameter. If you try writing an emptyArray() function without the <code>reified</code> keyword, you'll get a compiler error:</p>\n<pre><code>fun &lt;T&gt; emptyArray() : Array&lt;T&gt; = Array(0, { throw Exception() })\n</code></pre>\n<blockquote>\n<p>Cannot use T as a reified type parameter. Use a class instead.</p>\n</blockquote>\n<hr/>\n<p>Now, let's take a look at the implementation of <code>emptyList()</code>:</p>\n<pre><code>public fun &lt;T&gt; emptyList(): List&lt;T&gt; = EmptyList\n</code></pre>\n<p>This implementation doesn't need the parameter <code>T</code> at all. It just returns the internal object <code>EmptyList</code>, which itself inherits from <code>List&lt;Nothing&gt;</code>. The kotlin type <code>Nothing</code> is the return-type of the <code>throw</code> keyword and is <em>a value that never exists</em> (<a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin/-nothing.html\" rel=\"noreferrer\">reference</a>). If a method returns <code>Nothing</code>, is is equivalent to throwing an exception at that place. So we can safely use <code>Nothing</code> here because everytime we would call <code>EmptyList.get()</code> the compiler knows that this will return an exception.</p>\n<hr/>\n<p><strong>Bonus question:</strong></p>\n<p>Coming from Java and C++, I am used to <code>ArrayList</code> or <code>std::vector</code> to be far easier to use that arrays. I use kotlin now for a few month and I usually don't see a big difference between arrays and lists when writing source code. Both have tons of useful extension functions which behave in a similar way. However, the Kotlin compiler handles arrays and lists very different, as Java interoperability is very important for the Kotlin team. I usually prefer using lists, and that's what I'd recommend in your case too.</p>\n"},{"tags":[],"owner":{"account_id":10988981,"reputation":77763,"user_id":8073652,"accept_rate":100,"display_name":"s1m0nw1"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1588343355,"creation_date":1508677156,"answer_id":46874354,"question_id":46869353,"body_markdown":"The problem is that the generic type of an `Array` must be known at *compile time*, which is indicated by the `reified` type parameter here, as seen in the declaration:\r\n\r\n    public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\r\n\r\nIt&#39;s only possible to create concrete arrays like `Array&lt;String&gt;` or `Array&lt;Int&gt;` but not of type `Array&lt;T&gt;`.\r\n\r\nIn this [answer][1], you can find several workarounds.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/41946516/8073652","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>The problem is that the generic type of an <code>Array</code> must be known at <em>compile time</em>, which is indicated by the <code>reified</code> type parameter here, as seen in the declaration:</p>\n\n<pre><code>public inline fun &lt;reified @PureReifiable T&gt; emptyArray(): Array&lt;T&gt;\n</code></pre>\n\n<p>It's only possible to create concrete arrays like <code>Array&lt;String&gt;</code> or <code>Array&lt;Int&gt;</code> but not of type <code>Array&lt;T&gt;</code>.</p>\n\n<p>In this <a href=\"https://stackoverflow.com/a/41946516/8073652\">answer</a>, you can find several workarounds.</p>\n"},{"tags":[],"owner":{"account_id":361497,"reputation":2155,"user_id":704132,"accept_rate":81,"display_name":"Riki137"},"comment_count":0,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1526114434,"creation_date":1526114434,"answer_id":50304366,"question_id":46869353,"body_markdown":"The workaround that worked best for me was:\r\n\r\n    @Suppress(&quot;UNCHECKED_CAST&quot;)\r\n    var pool: Array&lt;T?&gt; = arrayOfNulls&lt;Any?&gt;(initialCapacity) as Array&lt;T?&gt;\r\n\r\n","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>The workaround that worked best for me was:</p>\n\n<pre><code>@Suppress(\"UNCHECKED_CAST\")\nvar pool: Array&lt;T?&gt; = arrayOfNulls&lt;Any?&gt;(initialCapacity) as Array&lt;T?&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3482475,"reputation":27250,"user_id":2914140,"accept_rate":69,"display_name":"CoolMind"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1598975584,"creation_date":1585239318,"answer_id":60871541,"question_id":46869353,"body_markdown":"I got `Type parameter T cannot be called as function` when tried to return T.\r\n\r\n    private fun &lt;T&gt; getData(): T {\r\n        return T()\r\n    }\r\n\r\nSee https://stackoverflow.com/questions/26992039/what-is-the-proper-way-to-create-new-instance-of-generic-class-in-kotlin:\r\n\r\n    private fun &lt;T&gt; create(\r\n        method: (Int) -&gt; T,\r\n        value: Int\r\n    ): T {\r\n        return method(value) // Creates T(value).\r\n    }\r\n\r\n    // Usage:\r\n\r\n    create(::ClassName, 1)\r\n\r\nwhere `ClassName` extends `T`.\r\n\r\nAlso maybe this will help:\r\n\r\n    private inline fun &lt;reified T&gt; getData(): T {\r\n        return T::class.java.newInstance()\r\n    }\r\n\r\nBut in my case I had to return `T(parameter)`, not `T()`, so, didn&#39;t try. See also https://stackoverflow.com/questions/52446900/how-to-get-class-of-generic-type-parameter-in-kotlin.","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I got <code>Type parameter T cannot be called as function</code> when tried to return T.</p>\n<pre><code>private fun &lt;T&gt; getData(): T {\n    return T()\n}\n</code></pre>\n<p>See <a href=\"https://stackoverflow.com/questions/26992039/what-is-the-proper-way-to-create-new-instance-of-generic-class-in-kotlin\">What is the proper way to create new instance of generic class in kotlin?</a>:</p>\n<pre><code>private fun &lt;T&gt; create(\n    method: (Int) -&gt; T,\n    value: Int\n): T {\n    return method(value) // Creates T(value).\n}\n\n// Usage:\n\ncreate(::ClassName, 1)\n</code></pre>\n<p>where <code>ClassName</code> extends <code>T</code>.</p>\n<p>Also maybe this will help:</p>\n<pre><code>private inline fun &lt;reified T&gt; getData(): T {\n    return T::class.java.newInstance()\n}\n</code></pre>\n<p>But in my case I had to return <code>T(parameter)</code>, not <code>T()</code>, so, didn't try. See also <a href=\"https://stackoverflow.com/questions/52446900/how-to-get-class-of-generic-type-parameter-in-kotlin\">How to get class of generic type parameter in Kotlin</a>.</p>\n"},{"tags":[],"owner":{"account_id":10512827,"reputation":6163,"user_id":7747942,"display_name":"Sylhare"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1634842257,"creation_date":1634841922,"answer_id":69667249,"question_id":46869353,"body_markdown":"I had some trouble in the solution above. Here is what I came up with using [`typeOf`](https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/type-of.html) from [kotlin-reflect](https://kotlinlang.org/docs/reflection.html):\r\n\r\n```kotlin\r\n@Suppress(&quot;UNCHECKED_CAST&quot;)\r\nprivate inline fun &lt;reified T&gt; createArrayOfGeneric(): Array&lt;T&gt; {\r\n    return java.lang.reflect.Array.newInstance(typeOf&lt;T&gt;().javaType as Class&lt;*&gt;, 10) as Array&lt;T&gt;\r\n}\r\n```\r\n\r\nThe `newInstance` method takes the java type as class of the generic that you get from `typeOf`, and the second parameter is the length of the array. ","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I had some trouble in the solution above. Here is what I came up with using <a href=\"https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.reflect/type-of.html\" rel=\"nofollow noreferrer\"><code>typeOf</code></a> from <a href=\"https://kotlinlang.org/docs/reflection.html\" rel=\"nofollow noreferrer\">kotlin-reflect</a>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Suppress(&quot;UNCHECKED_CAST&quot;)\nprivate inline fun &lt;reified T&gt; createArrayOfGeneric(): Array&lt;T&gt; {\n    return java.lang.reflect.Array.newInstance(typeOf&lt;T&gt;().javaType as Class&lt;*&gt;, 10) as Array&lt;T&gt;\n}\n</code></pre>\n<p>The <code>newInstance</code> method takes the java type as class of the generic that you get from <code>typeOf</code>, and the second parameter is the length of the array.</p>\n"},{"tags":[],"owner":{"account_id":302395,"reputation":1357,"user_id":1146712,"display_name":"Sherwin Zadeh"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1684801613,"creation_date":1684801613,"answer_id":76310617,"question_id":46869353,"body_markdown":"I changed it from `Array&lt;T&gt;` to `ArrayList&lt;T&gt;` and it worked.","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I changed it from <code>Array&lt;T&gt;</code> to <code>ArrayList&lt;T&gt;</code> and it worked.</p>\n"}],"owner":{"account_id":5372553,"reputation":3631,"user_id":4280615,"accept_rate":73,"display_name":"Nate Vaughan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56027,"favorite_count":0,"down_vote_count":0,"up_vote_count":68,"accepted_answer_id":46870546,"answer_count":6,"score":68,"last_activity_date":1684801613,"creation_date":1508631619,"question_id":46869353,"body_markdown":"I have an interface that contains an array (or list) of T and some metadata.\r\n\r\n    interface DataWithMetadata&lt;T&gt; {\r\n        val someMetadata: Int\r\n        fun getData(): Array&lt;T&gt;\r\n    }\r\n\r\nIf I write the simplest implementation of the interface, I get a compile error on the `emptyArray()`: &quot;Cannot use T as a reified type parameter. Use a class instead.&quot;\r\n\r\n    class ArrayWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\r\n        private var myData: Array&lt;T&gt; = emptyArray()\r\n        \r\n        override fun getData(): Array&lt;T&gt; {\r\n            return myData\r\n        }\r\n        \r\n        fun addData(moreData: Array&lt;T&gt;) {\r\n            this.myData += moreData\r\n        }\r\n    }\r\n\r\nHowever, if I change both the interface and the implementation to a list, I have no compile-time issues:\r\n\r\n    interface DataWithMetadata&lt;T&gt; {\r\n        val someMetadata: Int\r\n        fun getData(): List&lt;T&gt;\r\n    }\r\n    \r\n    class ListWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\r\n        private var myData: List&lt;T&gt; = emptyList()\r\n    \r\n        override fun getData(): List&lt;T&gt; {\r\n            return myData\r\n        }\r\n    \r\n        fun addData(moreData: Array&lt;T&gt;) {\r\n            this.myData += moreData\r\n        }\r\n    }\r\n\r\nI suspect there is some interesting lesson in Kotlin generics inside my issue. Can anyone tell me what the compiler is doing under the hood and why Array&lt;T&gt; fails but List&lt;T&gt; does not? Is there an idiomatic way to make the Array&lt;T&gt; implementation compile in this context?\r\n\r\nBonus question: The only reason I reached for Array&lt;T&gt; over List&lt;T&gt; is that I often see Kotlin developers favor Arrays. Is this the case, and if so, why?","title":"Kotlin generics Array&lt;T&gt; results in &quot;Cannot use T as a reified type parameter. Use a class instead&quot; but List&lt;T&gt; does not","body":"<p>I have an interface that contains an array (or list) of T and some metadata.</p>\n\n<pre><code>interface DataWithMetadata&lt;T&gt; {\n    val someMetadata: Int\n    fun getData(): Array&lt;T&gt;\n}\n</code></pre>\n\n<p>If I write the simplest implementation of the interface, I get a compile error on the <code>emptyArray()</code>: \"Cannot use T as a reified type parameter. Use a class instead.\"</p>\n\n<pre><code>class ArrayWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\n    private var myData: Array&lt;T&gt; = emptyArray()\n\n    override fun getData(): Array&lt;T&gt; {\n        return myData\n    }\n\n    fun addData(moreData: Array&lt;T&gt;) {\n        this.myData += moreData\n    }\n}\n</code></pre>\n\n<p>However, if I change both the interface and the implementation to a list, I have no compile-time issues:</p>\n\n<pre><code>interface DataWithMetadata&lt;T&gt; {\n    val someMetadata: Int\n    fun getData(): List&lt;T&gt;\n}\n\nclass ListWithMetadata&lt;T&gt;(override val someMetadata: Int): DataWithMetadata&lt;T&gt; {\n    private var myData: List&lt;T&gt; = emptyList()\n\n    override fun getData(): List&lt;T&gt; {\n        return myData\n    }\n\n    fun addData(moreData: Array&lt;T&gt;) {\n        this.myData += moreData\n    }\n}\n</code></pre>\n\n<p>I suspect there is some interesting lesson in Kotlin generics inside my issue. Can anyone tell me what the compiler is doing under the hood and why Array fails but List does not? Is there an idiomatic way to make the Array implementation compile in this context?</p>\n\n<p>Bonus question: The only reason I reached for Array over List is that I often see Kotlin developers favor Arrays. Is this the case, and if so, why?</p>\n"},{"tags":["java","arrays","string","parsing","jtree"],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684801420,"creation_date":1684801420,"answer_id":76310606,"question_id":50209160,"body_markdown":"You can use a for-loop to iterate each collection, and add each value to a new list of values.\r\n\r\n```java\r\n@SafeVarargs\r\nList&lt;List&lt;String&gt;&gt; parse(Collection&lt;String&gt;... collections) {\r\n    List&lt;List&lt;String&gt;&gt; strings = new ArrayList&lt;&gt;();\r\n    for (Collection&lt;String&gt; collection : collections)\r\n        strings.add(new ArrayList&lt;&gt;(collection));\r\n    return strings;\r\n}\r\n```\r\n\r\nExample\r\n\r\n```java\r\nSet&lt;String&gt; hash1 = new HashSet&lt;&gt;(Set.of(&quot;abc&quot;, &quot;def&quot;));\r\nSet&lt;String&gt; hash2 = new HashSet&lt;&gt;(Set.of(&quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;));\r\nList&lt;String&gt; list1 = new ArrayList&lt;&gt;(List.of(&quot;pqr&quot;));\r\nSystem.out.println(parse(hash1, hash2, list1));\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[[abc, def], [ghi, jkl, mno], [pqr]]\r\n```","title":"JTree to String with hashs and arrays","body":"<p>You can use a for-loop to iterate each collection, and add each value to a new list of values.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SafeVarargs\nList&lt;List&lt;String&gt;&gt; parse(Collection&lt;String&gt;... collections) {\n    List&lt;List&lt;String&gt;&gt; strings = new ArrayList&lt;&gt;();\n    for (Collection&lt;String&gt; collection : collections)\n        strings.add(new ArrayList&lt;&gt;(collection));\n    return strings;\n}\n</code></pre>\n<p>Example</p>\n<pre class=\"lang-java prettyprint-override\"><code>Set&lt;String&gt; hash1 = new HashSet&lt;&gt;(Set.of(&quot;abc&quot;, &quot;def&quot;));\nSet&lt;String&gt; hash2 = new HashSet&lt;&gt;(Set.of(&quot;ghi&quot;, &quot;jkl&quot;, &quot;mno&quot;));\nList&lt;String&gt; list1 = new ArrayList&lt;&gt;(List.of(&quot;pqr&quot;));\nSystem.out.println(parse(hash1, hash2, list1));\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[[abc, def], [ghi, jkl, mno], [pqr]]\n</code></pre>\n"}],"owner":{"account_id":13375569,"reputation":51,"user_id":9652533,"display_name":"Luis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1684801420,"creation_date":1525678345,"question_id":50209160,"body_markdown":"I have a Jtree from a Hash&lt;String, Object&gt; where the object can be another hash or an array.\r\nNow i need to take this JTree and convert it to String but i cant difference an array from a hash, how can I difference it?\r\nExists something like a tag in DefaultTreeNode with i could difference the nodes when i insert them on the JTree?\r\n\r\nFor example: \r\n\r\nMy Jtree is\r\n\r\n    &gt;     Array\r\n    &gt;         Hash1\r\n    &gt;             String1\r\n    &gt;             String2\r\n    &gt;         Hash2\r\n    &gt;             String1\r\n    &gt;             String2\r\n    &gt;             String3\r\n    &gt;         Array1\r\n    &gt;              String1\r\n\r\nAnd the finally string must be \r\n\r\n&gt; [{String1, String2}, {String1, String2, String3}, [String1]]\r\n\r\nThank you.","title":"JTree to String with hashs and arrays","body":"<p>I have a Jtree from a Hash where the object can be another hash or an array.\nNow i need to take this JTree and convert it to String but i cant difference an array from a hash, how can I difference it?\nExists something like a tag in DefaultTreeNode with i could difference the nodes when i insert them on the JTree?</p>\n\n<p>For example: </p>\n\n<p>My Jtree is</p>\n\n<pre><code>&gt;     Array\n&gt;         Hash1\n&gt;             String1\n&gt;             String2\n&gt;         Hash2\n&gt;             String1\n&gt;             String2\n&gt;             String3\n&gt;         Array1\n&gt;              String1\n</code></pre>\n\n<p>And the finally string must be </p>\n\n<blockquote>\n  <p>[{String1, String2}, {String1, String2, String3}, [String1]]</p>\n</blockquote>\n\n<p>Thank you.</p>\n"},{"tags":["java","android","android-room"],"answers":[{"tags":[],"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684702047,"creation_date":1684702047,"answer_id":76301866,"question_id":76300620,"body_markdown":"Try `SELECT b.position,b.name,b.capacity,b.currentAmount, it.name AS ingredientName FROM ....`\r\n\r\n- where `....` is the rest of the query. i.e. the important part is aliasing the **name** column to be **ingredientName** using **`AS`**.\r\n\r\ni.e. you are supplying the value that can/will be associated with the ingredientName member variable. \r\n\r\nThis is assuming that you want the value of the **name** column from the ingredient_types table to be the **ingredientName**.","title":"Room&#39;s DAOimpl not generating correctly","body":"<p>Try <code>SELECT b.position,b.name,b.capacity,b.currentAmount, it.name AS ingredientName FROM ....</code></p>\n<ul>\n<li>where <code>....</code> is the rest of the query. i.e. the important part is aliasing the <strong>name</strong> column to be <strong>ingredientName</strong> using <strong><code>AS</code></strong>.</li>\n</ul>\n<p>i.e. you are supplying the value that can/will be associated with the ingredientName member variable.</p>\n<p>This is assuming that you want the value of the <strong>name</strong> column from the ingredient_types table to be the <strong>ingredientName</strong>.</p>\n"}],"owner":{"account_id":25676685,"reputation":91,"user_id":19440016,"display_name":"Dioswison"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":78,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":76301866,"answer_count":1,"score":0,"last_activity_date":1684798167,"creation_date":1684682568,"question_id":76300620,"body_markdown":"I am trying to use Room library to access a DB, but DAO implementation is not generating well.\r\nIn my DAO interface i have:\r\n```java\r\n @Query(&quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b &quot; +\r\n            &quot;INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position &quot; +\r\n            &quot;INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId&quot; +\r\n            &quot; WHERE position = :position&quot;)\r\n    Bottle getBottleWithIngredientFromPosition(int position);\r\n```\r\nAnd my bottle class is the following:\r\n```java\r\npublic class Bottle {\r\n    public int position;\r\n    public String name;\r\n    public int capacity;\r\n    public int currentAmount;\r\n    public String ingredientName;\r\n\r\n    //Constructor, getters and setters\r\n}\r\n```\r\nBut when i create a new Bottle object with the DAO it gets created with &quot;ingredientName&quot; as null. I checked the implementation Room generates and is the following:\r\n```java\r\n@Override\r\n  public Bottle getBottleWithIngredientFromPosition(final int position) {\r\n    final String _sql = &quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId WHERE position = ?&quot;;\r\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 1);\r\n    int _argIndex = 1;\r\n    _statement.bindLong(_argIndex, position);\r\n    __db.assertNotSuspendingTransaction();\r\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\r\n    try {\r\n      final int _cursorIndexOfPosition = 0;\r\n      final int _cursorIndexOfName = 1;\r\n      final int _cursorIndexOfCapacity = 2;\r\n      final int _cursorIndexOfCurrentAmount = 3;\r\n      final Bottle _result;\r\n      if(_cursor.moveToFirst()) {\r\n        final int _tmpPosition;\r\n        _tmpPosition = _cursor.getInt(_cursorIndexOfPosition);\r\n        final String _tmpName;\r\n        if (_cursor.isNull(_cursorIndexOfName)) {\r\n          _tmpName = null;\r\n        } else {\r\n          _tmpName = _cursor.getString(_cursorIndexOfName);\r\n        }\r\n        final int _tmpCapacity;\r\n        _tmpCapacity = _cursor.getInt(_cursorIndexOfCapacity);\r\n        final int _tmpCurrentAmount;\r\n        _tmpCurrentAmount = _cursor.getInt(_cursorIndexOfCurrentAmount);\r\n        _result = new Bottle(_tmpPosition,_tmpName,_tmpCapacity,_tmpCurrentAmount,null);\r\n      } else {\r\n        _result = null;\r\n      }\r\n      return _result;\r\n    } finally {\r\n      _cursor.close();\r\n      _statement.release();\r\n    }\r\n  }\r\n```\r\nAs we can see it calls the constructor with last parameter as null and never tries to get it from the DB. \r\nI downloaded SQLite DB and run the query manually and it works as espected","title":"Room&#39;s DAOimpl not generating correctly","body":"<p>I am trying to use Room library to access a DB, but DAO implementation is not generating well.\nIn my DAO interface i have:</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Query(&quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b &quot; +\n            &quot;INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position &quot; +\n            &quot;INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId&quot; +\n            &quot; WHERE position = :position&quot;)\n    Bottle getBottleWithIngredientFromPosition(int position);\n</code></pre>\n<p>And my bottle class is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Bottle {\n    public int position;\n    public String name;\n    public int capacity;\n    public int currentAmount;\n    public String ingredientName;\n\n    //Constructor, getters and setters\n}\n</code></pre>\n<p>But when i create a new Bottle object with the DAO it gets created with &quot;ingredientName&quot; as null. I checked the implementation Room generates and is the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n  public Bottle getBottleWithIngredientFromPosition(final int position) {\n    final String _sql = &quot;SELECT b.position,b.name,b.capacity,b.currentAmount, it.name FROM bottles AS b INNER JOIN bottle_ingredient AS bi ON bi.bottlePos=b.position INNER JOIN ingredient_types AS it ON it.id=bi.ingredientId WHERE position = ?&quot;;\n    final RoomSQLiteQuery _statement = RoomSQLiteQuery.acquire(_sql, 1);\n    int _argIndex = 1;\n    _statement.bindLong(_argIndex, position);\n    __db.assertNotSuspendingTransaction();\n    final Cursor _cursor = DBUtil.query(__db, _statement, false, null);\n    try {\n      final int _cursorIndexOfPosition = 0;\n      final int _cursorIndexOfName = 1;\n      final int _cursorIndexOfCapacity = 2;\n      final int _cursorIndexOfCurrentAmount = 3;\n      final Bottle _result;\n      if(_cursor.moveToFirst()) {\n        final int _tmpPosition;\n        _tmpPosition = _cursor.getInt(_cursorIndexOfPosition);\n        final String _tmpName;\n        if (_cursor.isNull(_cursorIndexOfName)) {\n          _tmpName = null;\n        } else {\n          _tmpName = _cursor.getString(_cursorIndexOfName);\n        }\n        final int _tmpCapacity;\n        _tmpCapacity = _cursor.getInt(_cursorIndexOfCapacity);\n        final int _tmpCurrentAmount;\n        _tmpCurrentAmount = _cursor.getInt(_cursorIndexOfCurrentAmount);\n        _result = new Bottle(_tmpPosition,_tmpName,_tmpCapacity,_tmpCurrentAmount,null);\n      } else {\n        _result = null;\n      }\n      return _result;\n    } finally {\n      _cursor.close();\n      _statement.release();\n    }\n  }\n</code></pre>\n<p>As we can see it calls the constructor with last parameter as null and never tries to get it from the DB.\nI downloaded SQLite DB and run the query manually and it works as espected</p>\n"},{"tags":["java","android","google-play-services","ocr","google-mlkit"],"answers":[{"tags":[],"owner":{"account_id":7176905,"reputation":67,"user_id":5482475,"display_name":"Pramod Nikule"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682315795,"creation_date":1682315795,"answer_id":76088922,"question_id":76041749,"body_markdown":"I tried after updating the Google Play services to latest (23.13.12) and it worked!\r\n\r\nI don&#39;t see any documentation of minimum version of Google Play Services required for MLKit.","title":"MLKit unable to detect text on Android-8","body":"<p>I tried after updating the Google Play services to latest (23.13.12) and it worked!</p>\n<p>I don't see any documentation of minimum version of Google Play Services required for MLKit.</p>\n"},{"tags":[],"owner":{"account_id":26359810,"reputation":39,"user_id":20016188,"display_name":"stunningdimension22"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684797555,"creation_date":1684797555,"answer_id":76310418,"question_id":76041749,"body_markdown":"Glad to see you got it working. If you had any logs of the issue to share, it would be helpful to figure out why.\r\n\r\nThx!","title":"MLKit unable to detect text on Android-8","body":"<p>Glad to see you got it working. If you had any logs of the issue to share, it would be helpful to figure out why.</p>\n<p>Thx!</p>\n"}],"owner":{"account_id":7176905,"reputation":67,"user_id":5482475,"display_name":"Pramod Nikule"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":87,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684797555,"creation_date":1681801969,"question_id":76041749,"body_markdown":"I am trying `com.google.android.gms:play-services-mlkit-text-recognition` library for OCR which is working absolutely fine on all Android versions except Android-8.\r\n\r\nThe library `play-services-mlkit-text-recognition` is able to recognise text on all Android versions but it fails to recognise text on Android-8 and returning empty array.\r\n\r\nI followed all the steps given in https://developers.google.com/ml-kit/vision/text-recognition/android.\r\n\r\nThe library I am using is `com.google.android.gms:play-services-mlkit-text-recognition:18.0.2` with Google Play Services (`com.google.android.gms`) version `22.50.14 (version code: 225014021)`.\r\n\r\nDoes anyone have any idea whats going wrong here?","title":"MLKit unable to detect text on Android-8","body":"<p>I am trying <code>com.google.android.gms:play-services-mlkit-text-recognition</code> library for OCR which is working absolutely fine on all Android versions except Android-8.</p>\n<p>The library <code>play-services-mlkit-text-recognition</code> is able to recognise text on all Android versions but it fails to recognise text on Android-8 and returning empty array.</p>\n<p>I followed all the steps given in <a href=\"https://developers.google.com/ml-kit/vision/text-recognition/android\" rel=\"nofollow noreferrer\">https://developers.google.com/ml-kit/vision/text-recognition/android</a>.</p>\n<p>The library I am using is <code>com.google.android.gms:play-services-mlkit-text-recognition:18.0.2</code> with Google Play Services (<code>com.google.android.gms</code>) version <code>22.50.14 (version code: 225014021)</code>.</p>\n<p>Does anyone have any idea whats going wrong here?</p>\n"},{"tags":["java","string","if-statement","constructor","hex"],"comments":[{"owner":{"account_id":339859,"reputation":13331,"user_id":669576,"accept_rate":85,"display_name":"001"},"score":1,"creation_date":1541177482,"post_id":53122661,"comment_id":93140128,"body_markdown":"The &quot;x&quot; would imply you are passing an hex string to `convertBToD`. Go through and check all the calls to `convertBToD` to see where you are passing a hex string. Hint: look at `convertHToB`.","body":"The &quot;x&quot; would imply you are passing an hex string to <code>convertBToD</code>. Go through and check all the calls to <code>convertBToD</code> to see where you are passing a hex string. Hint: look at <code>convertHToB</code>."},{"owner":{"account_id":14673222,"reputation":51,"user_id":10597152,"display_name":"Spirlia"},"score":0,"creation_date":1541177841,"post_id":53122661,"comment_id":93140352,"body_markdown":"I don&#39;t know how I didn&#39;t notice that the return statement was wrong until now, thank you so much.","body":"I don&#39;t know how I didn&#39;t notice that the return statement was wrong until now, thank you so much."}],"answers":[{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684797447,"creation_date":1684797447,"answer_id":76310410,"question_id":53122661,"body_markdown":"In Java, to convert a hexadecimal value to an integer you use the `Integer.parseInt` method, with a second argument of `16`, the radix.\r\n\r\nIt will not recognize a value starting with `0x` as a hexadecimal.\r\n\r\nFurthermore, you&#39;re calling `convertBToD` under the following conditional-block.  \r\nI believe you mean `convertHToD`.\r\n\r\n```java\r\nif (stringNumber.startsWith(&quot;0x&quot;)){\r\n    theNumberAsHexadecimal = stringNumber;\r\n    theNumberAsBinary = convertHToB(theNumberAsHexadecimal);\r\n    theNumberAsDecimal = convertBToD(theNumberAsBinary);\r\n}\r\n```\r\n\r\nExample\r\n\r\n```java\r\nint convertHToD(String hexadecimal) {\r\n    return Integer.parseInt(hexadecimal.substring(2), 16);\r\n}\r\n```","title":"If statement in my constructor is not functioning properly","body":"<p>In Java, to convert a hexadecimal value to an integer you use the <code>Integer.parseInt</code> method, with a second argument of <code>16</code>, the radix.</p>\n<p>It will not recognize a value starting with <code>0x</code> as a hexadecimal.</p>\n<p>Furthermore, you're calling <code>convertBToD</code> under the following conditional-block.<br />\nI believe you mean <code>convertHToD</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (stringNumber.startsWith(&quot;0x&quot;)){\n    theNumberAsHexadecimal = stringNumber;\n    theNumberAsBinary = convertHToB(theNumberAsHexadecimal);\n    theNumberAsDecimal = convertBToD(theNumberAsBinary);\n}\n</code></pre>\n<p>Example</p>\n<pre class=\"lang-java prettyprint-override\"><code>int convertHToD(String hexadecimal) {\n    return Integer.parseInt(hexadecimal.substring(2), 16);\n}\n</code></pre>\n"}],"owner":{"account_id":14673222,"reputation":51,"user_id":10597152,"display_name":"Spirlia"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1684797447,"creation_date":1541177012,"question_id":53122661,"body_markdown":"In my program, I have to put a decimal integer, a binary string, or a hexadecimal string into my class. It then converts the variable into the others.\r\n\r\nMy issue is that, since binary and hexadecimal are both strings, I have the constructor determine whether the argument is a binary or hexadecimal and proceed from there. However, based on my error, the program isn&#39;t figuring out a hexadecimal number is what it is.\r\n\r\n    import java.util.*;\r\n    class Tester{\r\n       public static void main(String[] args){\r\n          String hex1 = &quot;0x34&quot;;\r\n          BDHNumber test = new BDHNumber(hex1);\r\n      \r\n          System.out.println(test.getDec());\r\n          System.out.println(test.getBin());\r\n          System.out.println(test.getHex());\r\n       }\r\n    }\r\n    \r\n---\r\n\r\n    import java.util.*;\r\n    import java.lang.*;\r\n    \r\n    public class BDHNumber{\r\n       private int theNumberAsDecimal;\r\n       private String theNumberAsBinary;\r\n       private String theNumberAsHexadecimal;\r\n       private static String[] hexadecimalArray = {&quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, \r\n                                                   &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;A&quot;, &quot;B&quot;, \r\n                                                   &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;};\r\n       private static String[] binaryArray = {&quot;0000&quot;, &quot;0001&quot;, &quot;0010&quot;, &quot;0011&quot;, \r\n                                              &quot;0100&quot;, &quot;0101&quot;, &quot;0110&quot;, &quot;0111&quot;, \r\n                                              &quot;1000&quot;, &quot;1001&quot;, &quot;1010&quot;, &quot;1011&quot;,\r\n                                              &quot;1100&quot;, &quot;1101&quot;, &quot;1110&quot;, &quot;1111&quot;}; \r\n    \r\n    //Default empty constructor.\r\n    public BDHNumber(){\r\n    }\r\n    \r\n    //Decimal constructor.\r\n    public BDHNumber(int decimal){\r\n       theNumberAsDecimal = decimal;\r\n       theNumberAsBinary = convertDToB(decimal);\r\n       theNumberAsHexadecimal = convertBToH(theNumberAsBinary);\r\n    }\r\n    \r\n    //Constructs binary or hexadecimal.\r\n    public BDHNumber(String stringNumber){ \r\n       if (stringNumber.startsWith(&quot;0x&quot;)){\r\n           theNumberAsHexadecimal = stringNumber;\r\n           theNumberAsBinary = convertHToB(theNumberAsHexadecimal);\r\n           theNumberAsDecimal = convertBToD(theNumberAsBinary);\r\n       }\r\n       else{\r\n           theNumberAsBinary = stringNumber;\r\n           \r\n           //Pads the binary to be multiples of 4\r\n           while(theNumberAsBinary.length()%4 != 0){\r\n            theNumberAsBinary = &quot;0&quot; + theNumberAsBinary;\r\n           }\r\n         \r\n          theNumberAsDecimal = convertBToD(theNumberAsBinary);\r\n          theNumberAsHexadecimal = convertBToH(theNumberAsBinary);\r\n       }\r\n    }\r\n    \r\n    //Converts Binary to Decimal.\r\n    private static int convertBToD(String binary){\r\n       String binary1 = binary;\r\n       int decimal = 0;\r\n       int index = 0;\r\n       \r\n       //Pads the binary to be multiples of 4\r\n       while(binary1.length()%4 != 0){\r\n             binary1 = &quot;0&quot; + binary1;\r\n          }\r\n          \r\n       int length = binary1.length();\r\n         \r\n       for(int i = length; i &gt; 0; i--){\r\n          decimal = decimal + (int)(Integer.parseInt(binary1.substring(index,\r\n                                    index+1)) * Math.pow(2, (i-1)));\r\n          index++;\r\n       }\r\n       return decimal;\r\n    }\r\n    \r\n    //Converts Binary to Hexadecimal.\r\n    private static String convertBToH(String binary){\r\n       String binary1 = binary;\r\n       String hex = &quot;&quot;;\r\n       int index = 0;\r\n       int binaryAsDecimal = 0; \r\n       \r\n       //Pads the binary to be multiples of 4\r\n       while(binary1.length()%4 != 0){ \r\n             binary1 = &quot;0&quot; + binary1;\r\n          }\r\n       \r\n       int length = binary1.length();\r\n     \r\n       while(length != 0){\r\n          binaryAsDecimal = convertBToD(binary1.substring(length-4, length));\r\n          \r\n          for(int i = 0; i&lt;hexadecimalArray.length; i++){\r\n             if(i == binaryAsDecimal){\r\n                hex = hexadecimalArray[i] + hex;\r\n             }\r\n          }\r\n          length = length - 4;\r\n       }\r\n       return hex;\r\n    }\r\n    \r\n    //Converts Decimal to Binary\r\n    private static String convertDToB(int decimal){\r\n       int decimal1 = decimal;\r\n       int remainder;\r\n       String binary = &quot;&quot;;\r\n       \r\n       while (decimal != 0){\r\n          remainder = decimal % 2; \r\n    \r\n          if (remainder == 1){\r\n             binary = &quot;1&quot; + binary;\r\n          }\r\n          else if (remainder == 0){\r\n             binary = &quot;0&quot; + binary;\r\n          }\r\n          decimal = decimal / 2;\r\n       }\r\n       return binary;\r\n    }\r\n    \r\n    //Converts Hexadecimal to Binary.\r\n    private static String convertHToB(String hexadecimal){\r\n       String hex = hexadecimal;\r\n       String binary = &quot;&quot;;\r\n       int index = 0;\r\n       int length = hex.length();\r\n       \r\n       for(int i = hex.length(); i &gt; 0; i--){\r\n          if(hexadecimalArray[index] == hex.substring(length-1, length)){\r\n             binary = convertDToB(index) + binary;\r\n          }\r\n          index++;\r\n          length--;\r\n       }\r\n       return hex;\r\n    }\r\n     \r\n    //Getters.\r\n    public String getBin(){\r\n       return theNumberAsBinary;\r\n    }\r\n     \r\n    public String getHex(){\r\n       return theNumberAsHexadecimal;\r\n    }\r\n    \r\n    public int getDec(){\r\n       return theNumberAsDecimal;\r\n    }\r\n    } \r\n\r\nHere is the error:\r\n\r\n&gt; Exception in thread &quot;main&quot; java.lang.NumberFormatException: For input \r\n&gt; string: &quot;x&quot;\r\n&gt;  at \r\n&gt; java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)\r\n&gt; \r\n&gt; at java.lang.Integer.parseInt(Integer.java:580)\r\n&gt; \r\n&gt; at java.lang.Integer.parseInt(Integer.java:615)\r\n&gt; \r\n&gt; at BDHNumber.convertBToD(BDHNumber.java:63)\r\n\r\nThe error is in the convertBToD method, and specifically where it converts one bit of the binary number to an integer. For some reason my code is taking the hexadecimal number as a binary in the constructor, instead of following the if statement. It can&#39;t convert &quot;x&quot; into an integer, so it has an error. I just can&#39;t figure out why. Any extra eyes would be a great help.","title":"If statement in my constructor is not functioning properly","body":"<p>In my program, I have to put a decimal integer, a binary string, or a hexadecimal string into my class. It then converts the variable into the others.</p>\n\n<p>My issue is that, since binary and hexadecimal are both strings, I have the constructor determine whether the argument is a binary or hexadecimal and proceed from there. However, based on my error, the program isn't figuring out a hexadecimal number is what it is.</p>\n\n<pre><code>import java.util.*;\nclass Tester{\n   public static void main(String[] args){\n      String hex1 = \"0x34\";\n      BDHNumber test = new BDHNumber(hex1);\n\n      System.out.println(test.getDec());\n      System.out.println(test.getBin());\n      System.out.println(test.getHex());\n   }\n}\n</code></pre>\n\n<hr>\n\n<pre><code>import java.util.*;\nimport java.lang.*;\n\npublic class BDHNumber{\n   private int theNumberAsDecimal;\n   private String theNumberAsBinary;\n   private String theNumberAsHexadecimal;\n   private static String[] hexadecimalArray = {\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \n                                               \"6\", \"7\", \"8\", \"9\", \"A\", \"B\", \n                                               \"C\", \"D\", \"E\", \"F\"};\n   private static String[] binaryArray = {\"0000\", \"0001\", \"0010\", \"0011\", \n                                          \"0100\", \"0101\", \"0110\", \"0111\", \n                                          \"1000\", \"1001\", \"1010\", \"1011\",\n                                          \"1100\", \"1101\", \"1110\", \"1111\"}; \n\n//Default empty constructor.\npublic BDHNumber(){\n}\n\n//Decimal constructor.\npublic BDHNumber(int decimal){\n   theNumberAsDecimal = decimal;\n   theNumberAsBinary = convertDToB(decimal);\n   theNumberAsHexadecimal = convertBToH(theNumberAsBinary);\n}\n\n//Constructs binary or hexadecimal.\npublic BDHNumber(String stringNumber){ \n   if (stringNumber.startsWith(\"0x\")){\n       theNumberAsHexadecimal = stringNumber;\n       theNumberAsBinary = convertHToB(theNumberAsHexadecimal);\n       theNumberAsDecimal = convertBToD(theNumberAsBinary);\n   }\n   else{\n       theNumberAsBinary = stringNumber;\n\n       //Pads the binary to be multiples of 4\n       while(theNumberAsBinary.length()%4 != 0){\n        theNumberAsBinary = \"0\" + theNumberAsBinary;\n       }\n\n      theNumberAsDecimal = convertBToD(theNumberAsBinary);\n      theNumberAsHexadecimal = convertBToH(theNumberAsBinary);\n   }\n}\n\n//Converts Binary to Decimal.\nprivate static int convertBToD(String binary){\n   String binary1 = binary;\n   int decimal = 0;\n   int index = 0;\n\n   //Pads the binary to be multiples of 4\n   while(binary1.length()%4 != 0){\n         binary1 = \"0\" + binary1;\n      }\n\n   int length = binary1.length();\n\n   for(int i = length; i &gt; 0; i--){\n      decimal = decimal + (int)(Integer.parseInt(binary1.substring(index,\n                                index+1)) * Math.pow(2, (i-1)));\n      index++;\n   }\n   return decimal;\n}\n\n//Converts Binary to Hexadecimal.\nprivate static String convertBToH(String binary){\n   String binary1 = binary;\n   String hex = \"\";\n   int index = 0;\n   int binaryAsDecimal = 0; \n\n   //Pads the binary to be multiples of 4\n   while(binary1.length()%4 != 0){ \n         binary1 = \"0\" + binary1;\n      }\n\n   int length = binary1.length();\n\n   while(length != 0){\n      binaryAsDecimal = convertBToD(binary1.substring(length-4, length));\n\n      for(int i = 0; i&lt;hexadecimalArray.length; i++){\n         if(i == binaryAsDecimal){\n            hex = hexadecimalArray[i] + hex;\n         }\n      }\n      length = length - 4;\n   }\n   return hex;\n}\n\n//Converts Decimal to Binary\nprivate static String convertDToB(int decimal){\n   int decimal1 = decimal;\n   int remainder;\n   String binary = \"\";\n\n   while (decimal != 0){\n      remainder = decimal % 2; \n\n      if (remainder == 1){\n         binary = \"1\" + binary;\n      }\n      else if (remainder == 0){\n         binary = \"0\" + binary;\n      }\n      decimal = decimal / 2;\n   }\n   return binary;\n}\n\n//Converts Hexadecimal to Binary.\nprivate static String convertHToB(String hexadecimal){\n   String hex = hexadecimal;\n   String binary = \"\";\n   int index = 0;\n   int length = hex.length();\n\n   for(int i = hex.length(); i &gt; 0; i--){\n      if(hexadecimalArray[index] == hex.substring(length-1, length)){\n         binary = convertDToB(index) + binary;\n      }\n      index++;\n      length--;\n   }\n   return hex;\n}\n\n//Getters.\npublic String getBin(){\n   return theNumberAsBinary;\n}\n\npublic String getHex(){\n   return theNumberAsHexadecimal;\n}\n\npublic int getDec(){\n   return theNumberAsDecimal;\n}\n} \n</code></pre>\n\n<p>Here is the error:</p>\n\n<blockquote>\n  <p>Exception in thread \"main\" java.lang.NumberFormatException: For input \n  string: \"x\"\n   at \n  java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)</p>\n  \n  <p>at java.lang.Integer.parseInt(Integer.java:580)</p>\n  \n  <p>at java.lang.Integer.parseInt(Integer.java:615)</p>\n  \n  <p>at BDHNumber.convertBToD(BDHNumber.java:63)</p>\n</blockquote>\n\n<p>The error is in the convertBToD method, and specifically where it converts one bit of the binary number to an integer. For some reason my code is taking the hexadecimal number as a binary in the constructor, instead of following the if statement. It can't convert \"x\" into an integer, so it has an error. I just can't figure out why. Any extra eyes would be a great help.</p>\n"},{"tags":["java","spring-boot","spring-security","spring-boot-actuator"],"comments":[{"owner":{"account_id":10501332,"reputation":510,"user_id":7749384,"accept_rate":73,"display_name":"Araf"},"score":0,"creation_date":1506755543,"post_id":46490343,"comment_id":79955160,"body_markdown":"you must add authentication header along with curl command.","body":"you must add authentication header along with curl command."},{"owner":{"account_id":4329690,"reputation":11412,"user_id":3535537,"accept_rate":78,"display_name":"St&#233;phane GRILLON"},"score":0,"creation_date":1506930278,"post_id":46490343,"comment_id":79996547,"body_markdown":"With curl is OK, but my question is with a browser (chrome)","body":"With curl is OK, but my question is with a browser (chrome)"},{"owner":{"account_id":4646120,"reputation":1037,"user_id":3764361,"accept_rate":100,"display_name":"P_W999"},"score":0,"creation_date":1506931609,"post_id":46490343,"comment_id":79997177,"body_markdown":"Not sure, but I wouln&#39;t combine the &quot;basic:secret&quot; in the URL with the authentication header. Either use one of two, not both at the same time.","body":"Not sure, but I wouln&#39;t combine the &quot;basic:secret&quot; in the URL with the authentication header. Either use one of two, not both at the same time."}],"answers":[{"tags":[],"owner":{"account_id":246295,"reputation":11636,"user_id":520359,"accept_rate":87,"display_name":"Lachezar Balev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506752216,"creation_date":1506751901,"answer_id":46500091,"question_id":46490343,"body_markdown":"In an URL:\r\n\r\n    http://admin:secret@127.0.0.1:8088/metrics\r\n\r\nAs a header:\r\n\r\n    Authorization: Basic YWRtaW46c2VjcmV0","title":"error 401 - Spring boot actuator login/password in browser","body":"<p>In an URL:</p>\n\n<pre><code>http://admin:secret@127.0.0.1:8088/metrics\n</code></pre>\n\n<p>As a header:</p>\n\n<pre><code>Authorization: Basic YWRtaW46c2VjcmV0\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7125787,"reputation":771,"user_id":5448746,"display_name":"Ondřej Stašek"},"score":0,"creation_date":1567150685,"post_id":51917376,"comment_id":101885603,"body_markdown":"This is only for spring boot 1.x","body":"This is only for spring boot 1.x"}],"tags":[],"owner":{"account_id":14182890,"reputation":1,"user_id":10245853,"display_name":"pankaj kaalyan"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1534680675,"creation_date":1534679517,"answer_id":51917376,"question_id":46490343,"body_markdown":"Please update:\r\n\r\n    management.security.enabled=true\r\n\r\nto:\r\n\r\n    management.security.enabled=false","title":"error 401 - Spring boot actuator login/password in browser","body":"<p>Please update:</p>\n\n<pre><code>management.security.enabled=true\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>management.security.enabled=false\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2348323,"reputation":13158,"user_id":2057902,"accept_rate":80,"display_name":"Sireesh Yarlagadda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1548874869,"creation_date":1548874869,"answer_id":54447759,"question_id":46490343,"body_markdown":"Use the CustomAuthenticationEntryPoint with @Component Annotation\r\n\r\n\r\n\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class AdminEntryPointsSecurityConfig {\r\n    \t\r\n        @Bean\r\n        public PasswordEncoder encoder() {\r\n            return new BCryptPasswordEncoder();\r\n        }\r\n    \r\n        @Configuration\r\n        @Order(1)\r\n        public static class App1ConfigurationAdapter extends WebSecurityConfigurerAdapter {\r\n    \r\n        \t@Autowired\r\n            private CustomAuthenticationEntryPoint authenticationEntryPoint;\r\n        \t\r\n            @Override\r\n            protected void configure(HttpSecurity http) throws Exception {\r\n                http.antMatcher(&quot;/actuator/**&quot;)\r\n                    .authorizeRequests().anyRequest().hasRole(&quot;ADMIN&quot;)\r\n                    .and().httpBasic().authenticationEntryPoint(authenticationEntryPoint)    \r\n                    .and().exceptionHandling().accessDeniedPage(&quot;/403&quot;);\r\n            }\t\r\n            \r\n    \r\n            \r\n    \r\n        \t@Override\r\n            protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n                PasswordEncoder encoder = PasswordEncoderFactories.createDelegatingPasswordEncoder();        \r\n                auth.inMemoryAuthentication()\r\n                    .passwordEncoder(encoder)\r\n                    .withUser(&quot;act&quot;)\r\n                    .password(encoder.encode(&quot;act&quot;))            \r\n                    .roles(&quot;ADMIN&quot;);\r\n            }\r\n        }\r\n    \r\n    }\r\n\r\nThen do the Basic Authentication.\r\n\r\n\r\n\r\n    @Component\r\n    public class CustomAuthenticationEntryPoint extends BasicAuthenticationEntryPoint {\r\n    \r\n        @Override\r\n        public void commence(final HttpServletRequest request, final HttpServletResponse response, final AuthenticationException authException) throws IOException, ServletException {\r\n            response.addHeader(&quot;WWW-Authenticate&quot;, &quot;Basic realm=\\&quot;&quot; + getRealmName() + &quot;\\&quot;&quot;);\r\n            response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\r\n            final PrintWriter writer = response.getWriter();\r\n            writer.println(&quot;HTTP Status &quot; + HttpServletResponse.SC_UNAUTHORIZED + &quot; - &quot; + authException.getMessage());\r\n        }\r\n    \r\n        @Override\r\n        public void afterPropertiesSet() throws Exception {\r\n            setRealmName(&quot;ADMIN&quot;);\r\n            super.afterPropertiesSet();\r\n        }\r\n    \r\n    }\r\n","title":"error 401 - Spring boot actuator login/password in browser","body":"<p>Use the CustomAuthenticationEntryPoint with @Component Annotation</p>\n\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class AdminEntryPointsSecurityConfig {\n\n    @Bean\n    public PasswordEncoder encoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Configuration\n    @Order(1)\n    public static class App1ConfigurationAdapter extends WebSecurityConfigurerAdapter {\n\n        @Autowired\n        private CustomAuthenticationEntryPoint authenticationEntryPoint;\n\n        @Override\n        protected void configure(HttpSecurity http) throws Exception {\n            http.antMatcher(\"/actuator/**\")\n                .authorizeRequests().anyRequest().hasRole(\"ADMIN\")\n                .and().httpBasic().authenticationEntryPoint(authenticationEntryPoint)    \n                .and().exceptionHandling().accessDeniedPage(\"/403\");\n        }   \n\n\n\n\n        @Override\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n            PasswordEncoder encoder = PasswordEncoderFactories.createDelegatingPasswordEncoder();        \n            auth.inMemoryAuthentication()\n                .passwordEncoder(encoder)\n                .withUser(\"act\")\n                .password(encoder.encode(\"act\"))            \n                .roles(\"ADMIN\");\n        }\n    }\n\n}\n</code></pre>\n\n<p>Then do the Basic Authentication.</p>\n\n<pre><code>@Component\npublic class CustomAuthenticationEntryPoint extends BasicAuthenticationEntryPoint {\n\n    @Override\n    public void commence(final HttpServletRequest request, final HttpServletResponse response, final AuthenticationException authException) throws IOException, ServletException {\n        response.addHeader(\"WWW-Authenticate\", \"Basic realm=\\\"\" + getRealmName() + \"\\\"\");\n        response.setStatus(HttpServletResponse.SC_UNAUTHORIZED);\n        final PrintWriter writer = response.getWriter();\n        writer.println(\"HTTP Status \" + HttpServletResponse.SC_UNAUTHORIZED + \" - \" + authException.getMessage());\n    }\n\n    @Override\n    public void afterPropertiesSet() throws Exception {\n        setRealmName(\"ADMIN\");\n        super.afterPropertiesSet();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":4329690,"reputation":11412,"user_id":3535537,"accept_rate":78,"display_name":"St&#233;phane GRILLON"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7077,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":3,"score":2,"last_activity_date":1684796875,"creation_date":1506693316,"question_id":46490343,"body_markdown":"I use spring boot with actuator and I add security configuration:\r\n\r\n    management.port=8088\r\n    management.address=127.0.0.1\r\n    management.security.enabled=true\r\n    security.user.name=admin\r\n    security.user.password=secret\r\n    management.security.role=SUPERUSER\r\n\r\n`curl -u admin:secret http://127.0.0.1:8088/metrics` is OK but with Chrome (http://127.0.0.1:8088/metrics): `{&quot;timestamp&quot;:1506692938036,&quot;status&quot;:401,&quot;error&quot;:&quot;Unauthorized&quot;,&quot;message&quot;:&quot;Full authentication is required to access this resource.&quot;,&quot;path&quot;:&quot;/metrics&quot;}`\r\n\r\nHow to use login/password in url or headers?\r\n\r\n\r\n**EDIT 1**\r\n\r\nI try @Lachezar Balev solution (Authorization: Basic YWRtaW46c2VjcmV0 + admin:secret@ in url) but is KO\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/kIDLy.png","title":"error 401 - Spring boot actuator login/password in browser","body":"<p>I use spring boot with actuator and I add security configuration:</p>\n\n<pre><code>management.port=8088\nmanagement.address=127.0.0.1\nmanagement.security.enabled=true\nsecurity.user.name=admin\nsecurity.user.password=secret\nmanagement.security.role=SUPERUSER\n</code></pre>\n\n<p><code>curl -u admin:secret http://127.0.0.1:8088/metrics</code> is OK but with Chrome (<a href=\"http://127.0.0.1:8088/metrics\" rel=\"nofollow noreferrer\">http://127.0.0.1:8088/metrics</a>): <code>{\"timestamp\":1506692938036,\"status\":401,\"error\":\"Unauthorized\",\"message\":\"Full authentication is required to access this resource.\",\"path\":\"/metrics\"}</code></p>\n\n<p>How to use login/password in url or headers?</p>\n\n<p><strong>EDIT 1</strong></p>\n\n<p>I try @Lachezar Balev solution (Authorization: Basic YWRtaW46c2VjcmV0 + admin:secret@ in url) but is KO</p>\n\n<p><a href=\"https://i.stack.imgur.com/kIDLy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kIDLy.png\" alt=\"enter image description here\"></a></p>\n"},{"tags":["java","spring-boot","spring-boot-actuator","health-check"],"answers":[{"tags":[],"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1645097178,"creation_date":1645097178,"answer_id":71157256,"question_id":71156905,"body_markdown":"I found [here][1] that `HealthEndpoint` was what I was looking for.\r\n\r\n```java\r\n@RestController\r\npublic class AppStatusRestController {\r\n    private final HealthEndpoint healthEndpoint;\r\n\r\n    public AppStatusRestController(HealthEndpoint healthEndpoint) {\r\n        this.healthEndpoint = healthEndpoint;\r\n    }\r\n\r\n    @GetMapping(&quot;/status&quot;)\r\n    public String status() {\r\n        return &quot;status: &quot; + healthEndpoint.health().getStatus();\r\n    }\r\n\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/63510958/10950272","title":"How to get healthcheck status without calling actuator endpoint?","body":"<p>I found <a href=\"https://stackoverflow.com/a/63510958/10950272\">here</a> that <code>HealthEndpoint</code> was what I was looking for.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class AppStatusRestController {\n    private final HealthEndpoint healthEndpoint;\n\n    public AppStatusRestController(HealthEndpoint healthEndpoint) {\n        this.healthEndpoint = healthEndpoint;\n    }\n\n    @GetMapping(&quot;/status&quot;)\n    public String status() {\n        return &quot;status: &quot; + healthEndpoint.health().getStatus();\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":10413480,"reputation":3922,"user_id":10950272,"display_name":"makozaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2841,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":71157256,"answer_count":1,"score":1,"last_activity_date":1684796830,"creation_date":1645095710,"question_id":71156905,"body_markdown":"In a springboot application I want to produce `/version` endpoint which combines some of `/actuator/health` and `/actuator/info` data. \r\nFrom health endpoint I need overall status `UP`/`DOWN`.\r\n\r\nHow can I retrieve **application status** inside java code?\r\n\r\nBased on [this answer][1] I tried to retrieve all `HealthIndicator` beans:\r\n```java\r\n@RestController\r\npublic class AppStatusRestController {\r\n    private final List&lt;HealthIndicator&gt; healthIndicators;\r\n\r\n    public AppStatusRestController(List&lt;HealthIndicator&gt; healthIndicators) {\r\n        this.healthIndicators = healthIndicators;\r\n    }\r\n\r\n    @GetMapping(&quot;/status&quot;)\r\n    public String status() {\r\n        return &quot;status: &quot; + getStatus();\r\n    }\r\n    private String getStatus() {\r\n        return isUp() ? Status.UP.getCode() : Status.DOWN.getCode();\r\n\r\n    }\r\n\r\n    private boolean isUp() {\r\n        return this.healthIndicators.stream().allMatch(healthIndicator -&gt; healthIndicator.getHealth(false).getStatus() == Status.UP);\r\n    }\r\n\r\n}\r\n```\r\nbut it doesn&#39;t work for some components, e.g. RabbitMQ\r\n```json\r\n{\r\n  status: &quot;DOWN&quot;, // how can I get application status \r\n  components: {\r\n    db: {\r\n      status: &quot;UP&quot;,\r\n...\r\n    },\r\n    diskSpace: {\r\n      status: &quot;UP&quot;,\r\n...\r\n      }\r\n    },\r\n    ping: {\r\n      status: &quot;UP&quot;\r\n    },\r\n    rabbit: {\r\n      status: &quot;DOWN&quot;,\r\n      details: {\r\n        error: &quot;org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection refused: connect&quot;\r\n      }\r\n    },\r\n    myCustomHealthIndicator: {\r\n      status: &quot;UP&quot;,\r\n...\r\n    }\r\n  }\r\n}\r\n```\r\nNote that I don&#39;t need component status at all. I just want to retrieve overall status of my app.\r\n\r\n  [1]: https://stackoverflow.com/a/69365535/10950272","title":"How to get healthcheck status without calling actuator endpoint?","body":"<p>In a springboot application I want to produce <code>/version</code> endpoint which combines some of <code>/actuator/health</code> and <code>/actuator/info</code> data.\nFrom health endpoint I need overall status <code>UP</code>/<code>DOWN</code>.</p>\n<p>How can I retrieve <strong>application status</strong> inside java code?</p>\n<p>Based on <a href=\"https://stackoverflow.com/a/69365535/10950272\">this answer</a> I tried to retrieve all <code>HealthIndicator</code> beans:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class AppStatusRestController {\n    private final List&lt;HealthIndicator&gt; healthIndicators;\n\n    public AppStatusRestController(List&lt;HealthIndicator&gt; healthIndicators) {\n        this.healthIndicators = healthIndicators;\n    }\n\n    @GetMapping(&quot;/status&quot;)\n    public String status() {\n        return &quot;status: &quot; + getStatus();\n    }\n    private String getStatus() {\n        return isUp() ? Status.UP.getCode() : Status.DOWN.getCode();\n\n    }\n\n    private boolean isUp() {\n        return this.healthIndicators.stream().allMatch(healthIndicator -&gt; healthIndicator.getHealth(false).getStatus() == Status.UP);\n    }\n\n}\n</code></pre>\n<p>but it doesn't work for some components, e.g. RabbitMQ</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  status: &quot;DOWN&quot;, // how can I get application status \n  components: {\n    db: {\n      status: &quot;UP&quot;,\n...\n    },\n    diskSpace: {\n      status: &quot;UP&quot;,\n...\n      }\n    },\n    ping: {\n      status: &quot;UP&quot;\n    },\n    rabbit: {\n      status: &quot;DOWN&quot;,\n      details: {\n        error: &quot;org.springframework.amqp.AmqpConnectException: java.net.ConnectException: Connection refused: connect&quot;\n      }\n    },\n    myCustomHealthIndicator: {\n      status: &quot;UP&quot;,\n...\n    }\n  }\n}\n</code></pre>\n<p>Note that I don't need component status at all. I just want to retrieve overall status of my app.</p>\n"},{"tags":["java","gradle","javafx"],"comments":[{"owner":{"account_id":9261705,"reputation":388,"user_id":6878558,"accept_rate":75,"display_name":"Maximiliano Sosa"},"score":0,"creation_date":1684769315,"post_id":76302699,"comment_id":134561566,"body_markdown":"Linux fedora 6.2.15-200.fc37.x86_64","body":"Linux fedora 6.2.15-200.fc37.x86_64"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1684782793,"post_id":76302699,"comment_id":134564400,"body_markdown":"Is there a `.so` file in the location it is looking for one?","body":"Is there a <code>.so</code> file in the location it is looking for one?"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1684782804,"post_id":76302699,"comment_id":134564404,"body_markdown":"I don&#39;t know much gradle, so probably can&#39;t help much.   I don&#39;t even understand why it is looking for a `.so` file.  Gradle uses maven repositories and the javafx jars in maven central stored as os architecture classified artifacts are modules that include the native code, so there wouldn&#39;t seem a need for a gradle build to look for a JavaFX `.so` file, especially in a really weird location like that.","body":"I don&#39;t know much gradle, so probably can&#39;t help much.   I don&#39;t even understand why it is looking for a <code>.so</code> file.  Gradle uses maven repositories and the javafx jars in maven central stored as os architecture classified artifacts are modules that include the native code, so there wouldn&#39;t seem a need for a gradle build to look for a JavaFX <code>.so</code> file, especially in a really weird location like that."},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1684782844,"post_id":76302699,"comment_id":134564413,"body_markdown":"For help, you probably need to provide a [mcve].","body":"For help, you probably need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":9261705,"reputation":388,"user_id":6878558,"accept_rate":75,"display_name":"Maximiliano Sosa"},"score":0,"creation_date":1684794223,"post_id":76302699,"comment_id":134566168,"body_markdown":"The error can be a misconfigured vscode gradle extension?","body":"The error can be a misconfigured vscode gradle extension?"},{"owner":{"account_id":9261705,"reputation":388,"user_id":6878558,"accept_rate":75,"display_name":"Maximiliano Sosa"},"score":0,"creation_date":1684794469,"post_id":76302699,"comment_id":134566193,"body_markdown":"The only file inside that folder is javafx-graphics-20-linux.jar","body":"The only file inside that folder is javafx-graphics-20-linux.jar"},{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1684796995,"post_id":76302699,"comment_id":134566431,"body_markdown":"I don’t know about vscode, I don’t use it.  But you could run gradle from the command line to verify that it works independently of vscode.  My guess is that the `so` is inside the jar and that is confusing your particular runtime setup, though I could not tell you why nor how to fix it.  If you suspect the IDE config and are stuck, you could switch IDEs, e.g. to Idea community (run the new JavaFX project wizard in Idea to generate a new working debuggable JavaFX Gradle project then copy your code in, if you want to try that).","body":"I don’t know about vscode, I don’t use it.  But you could run gradle from the command line to verify that it works independently of vscode.  My guess is that the <code>so</code> is inside the jar and that is confusing your particular runtime setup, though I could not tell you why nor how to fix it.  If you suspect the IDE config and are stuck, you could switch IDEs, e.g. to Idea community (run the new JavaFX project wizard in Idea to generate a new working debuggable JavaFX Gradle project then copy your code in, if you want to try that)."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1684895700,"post_id":76302699,"comment_id":134583061,"body_markdown":"What happens if you run `./gradlew run --debug-jvm` (and connect a debugger) manually?","body":"What happens if you run <code>.&#47;gradlew run --debug-jvm</code> (and connect a debugger) manually?"},{"owner":{"account_id":9261705,"reputation":388,"user_id":6878558,"accept_rate":75,"display_name":"Maximiliano Sosa"},"score":0,"creation_date":1685115740,"post_id":76302699,"comment_id":134621312,"body_markdown":"That works... Anyway created another project in eclipse without gradle... So many errors with blank project, following oficial docs...","body":"That works... Anyway created another project in eclipse without gradle... So many errors with blank project, following oficial docs..."}],"owner":{"account_id":9261705,"reputation":388,"user_id":6878558,"accept_rate":75,"display_name":"Maximiliano Sosa"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684796181,"creation_date":1684721948,"question_id":76302699,"body_markdown":"I have a Lenovo with Intel. When run `JavaFX` with gradle works great. But when debug does not execute, get error at first. The error is:\r\n&gt;```none\r\n&gt;Exception has occurred: java.lang.UnsatisfiedLinkError\r\n&gt;&quot;java.lang.UnsatisfiedLinkError: Can&#39;t load library:\r\n&gt;/home/---/.gradle/caches/modules-2/files-2.1/org.openjfx/javafx-graphics/---/---/libprism_es2.so&quot;\r\n\r\nI am using gradle `plugin id &#39;org.openjfx.javafxplugin&#39;` version `&#39;0.0.14&#39;`, `javafx version 20`, and `openjdk 17.0.6`.\r\n\r\nMy OS is Linux fedora 6.2.15-200.fc37.x86_64","title":"Error debugging with Gradle and JavaFX (NOT M1 CHIP)","body":"<p>I have a Lenovo with Intel. When run <code>JavaFX</code> with gradle works great. But when debug does not execute, get error at first. The error is:</p>\n<blockquote>\n<pre class=\"lang-none prettyprint-override\"><code>Exception has occurred: java.lang.UnsatisfiedLinkError\n&quot;java.lang.UnsatisfiedLinkError: Can't load library:\n/home/---/.gradle/caches/modules-2/files-2.1/org.openjfx/javafx-graphics/---/---/libprism_es2.so&quot;\n</code></pre>\n</blockquote>\n<p>I am using gradle <code>plugin id 'org.openjfx.javafxplugin'</code> version <code>'0.0.14'</code>, <code>javafx version 20</code>, and <code>openjdk 17.0.6</code>.</p>\n<p>My OS is Linux fedora 6.2.15-200.fc37.x86_64</p>\n"},{"tags":["java","spring-boot","couchbase","testcontainers","couchbase-java-api"],"comments":[{"owner":{"account_id":12037792,"reputation":1783,"user_id":8805742,"display_name":"mahfuj asif"},"score":1,"creation_date":1684660232,"post_id":76299023,"comment_id":134546797,"body_markdown":"You might need to commit before fetching all rows. `ctx.commit();` please let me know if it works","body":"You might need to commit before fetching all rows. <code>ctx.commit();</code> please let me know if it works"},{"owner":{"account_id":24377961,"reputation":56,"user_id":18310003,"display_name":"RosarioB"},"score":0,"creation_date":1684682841,"post_id":76299023,"comment_id":134549351,"body_markdown":"thank you @mahfujasif, unfortunately there is no ctx.commit() , it seems taht the transactions is autommitted.  \nAnyway I have found that I can use ctx.insert  and I have used it but still I got the issue...","body":"thank you @mahfujasif, unfortunately there is no ctx.commit() , it seems taht the transactions is autommitted.   Anyway I have found that I can use ctx.insert  and I have used it but still I got the issue..."}],"answers":[{"tags":[],"owner":{"account_id":23477672,"reputation":45,"user_id":17530250,"display_name":"Pavol Varga"},"comment_count":0,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1684687745,"creation_date":1684687324,"answer_id":76300933,"question_id":76299023,"body_markdown":"You are missing @Transactional annotation in your service class,&lt;br&gt;\r\nand you are breaking single responsibility principle in your repository classes.&lt;br&gt;\r\nFor a data transformation, create mapper class (@Component) and use them in your service class.&lt;br&gt;\r\nAnd if really needed any extra configuration,&lt;br&gt;\r\nyou can do so injecting appropriate one by using a @Bean annotation in your &#39;@Configuration&#39; class(es).&lt;br&gt;\r\nAnd be aware, that &quot;@Transactional&quot; annotation at class level applies only to a public methods.&lt;br&gt;\r\nAnother issue is unnecessary implementation of &quot;GenericRepository&quot; of yours, you should extend JpaRepository.&lt;br&gt;\r\nAnd if really needed generic one, annotate it using @NoRepositoryBean.\r\n\r\nAccording to JDBC transactions be aware of differences between\r\nSpring Data save and saveAndFlush methods.\r\nhttps://www.baeldung.com/spring-data-jpa-save-saveandflush\r\n\r\nThere are many examples how to properly implement a project using Spring Rest and Spring Data.\r\nMaybe one of many:\r\nhttps://github.com/thevarga04/ucimsa","title":"Random errors when retrieving data after having inserted them","body":"<p>You are missing @Transactional annotation in your service class,<br>\nand you are breaking single responsibility principle in your repository classes.<br>\nFor a data transformation, create mapper class (@Component) and use them in your service class.<br>\nAnd if really needed any extra configuration,<br>\nyou can do so injecting appropriate one by using a @Bean annotation in your '@Configuration' class(es).<br>\nAnd be aware, that &quot;@Transactional&quot; annotation at class level applies only to a public methods.<br>\nAnother issue is unnecessary implementation of &quot;GenericRepository&quot; of yours, you should extend JpaRepository.<br>\nAnd if really needed generic one, annotate it using @NoRepositoryBean.</p>\n<p>According to JDBC transactions be aware of differences between\nSpring Data save and saveAndFlush methods.\n<a href=\"https://www.baeldung.com/spring-data-jpa-save-saveandflush\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-data-jpa-save-saveandflush</a></p>\n<p>There are many examples how to properly implement a project using Spring Rest and Spring Data.\nMaybe one of many:\n<a href=\"https://github.com/thevarga04/ucimsa\" rel=\"nofollow noreferrer\">https://github.com/thevarga04/ucimsa</a></p>\n"},{"tags":[],"owner":{"account_id":1029909,"reputation":364,"user_id":5228155,"display_name":"mn_test347"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1684795157,"creation_date":1684776459,"answer_id":76308622,"question_id":76299023,"body_markdown":"The query needs to use the query option QueryScanConsistency.REQUEST_PLUS.  The issue is that while a kv.get() would immediately/instantaneously find a document inserted with a kv.insert(), the query engine can only find documents that have been indexed - which is not instantaneous.  REQUEST_PLUS will cause the query to wait until all documents that needed to be indexed at the time the query request was issued are indexed, and then it will execute.  It works in debug because there is enough time for the documents to become indexed.\r\n\r\n&quot; List&lt;JsonObject&gt; jsonObjects = couchbaseTemplate.getCouchbaseClientFactory().getScope()\r\n                .query(String.format(&quot;SELECT * FROM %1$s &quot;, keySpace)).rowsAsObject();&quot;\r\n\r\nWhy not \r\n\r\nmyRepository.withScope(scope).withCollection(collection).findAll()\r\n\r\nYou don&#39;t have to write any code. (There are also @Scope and @Collection annotations). For the QueryScanConsistency, you could add the method signature (no body required) to the repository and use the WithConistency annotation. see  \r\n- https://docs.spring.io/spring-data/couchbase/docs/current/reference/html/#couchbase.collections \r\n- https://github.com/couchbaselabs/try-cb-spring\r\n- https://www.youtube.com/watch?v=MrplTeEFItk\r\n\r\n\r\nJust to be clear, &quot;couchbaseTemplate.getCouchbaseClientFactory().getCluster()&quot; is the only thing in your code that uses spring-data-couchbase.  After that everything bypasses spring data couchbase, it uses the Couchbase Java SDK.  Using @Transaction is not going to have any effect.\r\n\r\nSpring Data templates and repositories provide their own mapper.  It&#39;s not necessary to provide any.\r\n\r\nregarding https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/blob/basic_crud/crud.couchbase/src/main/java/com/rosariob/crud/couchbase/repository/CustomerRepository.java - please see the try-cb-spring or other sample application, or the spring-data-couchbase tests for defining and using repositories -  https://github.com/spring-projects/spring-data-couchbase/tree/main/src/test/java/org/springframework/data/couchbase/domain\r\n\r\n","title":"Random errors when retrieving data after having inserted them","body":"<p>The query needs to use the query option QueryScanConsistency.REQUEST_PLUS.  The issue is that while a kv.get() would immediately/instantaneously find a document inserted with a kv.insert(), the query engine can only find documents that have been indexed - which is not instantaneous.  REQUEST_PLUS will cause the query to wait until all documents that needed to be indexed at the time the query request was issued are indexed, and then it will execute.  It works in debug because there is enough time for the documents to become indexed.</p>\n<p>&quot; List jsonObjects = couchbaseTemplate.getCouchbaseClientFactory().getScope()\n.query(String.format(&quot;SELECT * FROM %1$s &quot;, keySpace)).rowsAsObject();&quot;</p>\n<p>Why not</p>\n<p>myRepository.withScope(scope).withCollection(collection).findAll()</p>\n<p>You don't have to write any code. (There are also @Scope and @Collection annotations). For the QueryScanConsistency, you could add the method signature (no body required) to the repository and use the WithConistency annotation. see</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-data/couchbase/docs/current/reference/html/#couchbase.collections\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-data/couchbase/docs/current/reference/html/#couchbase.collections</a></li>\n<li><a href=\"https://github.com/couchbaselabs/try-cb-spring\" rel=\"nofollow noreferrer\">https://github.com/couchbaselabs/try-cb-spring</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=MrplTeEFItk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=MrplTeEFItk</a></li>\n</ul>\n<p>Just to be clear, &quot;couchbaseTemplate.getCouchbaseClientFactory().getCluster()&quot; is the only thing in your code that uses spring-data-couchbase.  After that everything bypasses spring data couchbase, it uses the Couchbase Java SDK.  Using @Transaction is not going to have any effect.</p>\n<p>Spring Data templates and repositories provide their own mapper.  It's not necessary to provide any.</p>\n<p>regarding <a href=\"https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/blob/basic_crud/crud.couchbase/src/main/java/com/rosariob/crud/couchbase/repository/CustomerRepository.java\" rel=\"nofollow noreferrer\">https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/blob/basic_crud/crud.couchbase/src/main/java/com/rosariob/crud/couchbase/repository/CustomerRepository.java</a> - please see the try-cb-spring or other sample application, or the spring-data-couchbase tests for defining and using repositories -  <a href=\"https://github.com/spring-projects/spring-data-couchbase/tree/main/src/test/java/org/springframework/data/couchbase/domain\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-data-couchbase/tree/main/src/test/java/org/springframework/data/couchbase/domain</a></p>\n"}],"owner":{"account_id":24377961,"reputation":56,"user_id":18310003,"display_name":"RosarioB"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684795157,"creation_date":1684658906,"question_id":76299023,"body_markdown":"I have tried to build a set of CRUD REST APIs using Spring Boot. I have created the project via Spring Initializr with the dependency spring-boot-starter-data-couchbase.\r\n\r\nI have uploaded the project here [https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/tree/basic_crud][1] The test class is called CustomerRepositoryTest.\r\n\r\nI have implemented some Repository methods using the CouchbaseTemplate. For example:\r\n\r\n```\r\n@Override\r\n    public List&lt;Customer&gt; findAll() {\r\n        List&lt;JsonObject&gt; jsonObjects = couchbaseTemplate.getCouchbaseClientFactory().getScope()\r\n                .query(String.format(&quot;SELECT * FROM %1$s &quot;, keySpace)).rowsAsObject();\r\n        return jsonObjects.stream().map(this::mapJsonToCustomer).collect(Collectors.toList());\r\n     }\r\n```\r\nAnd i have also implemented a test for the above method (with Testcontainers) :\r\n\r\n```\r\n@Test\r\n    public void testFindAll() {\r\n        Customer alex = new Customer(&quot;customer1&quot;, &quot;Alex&quot;, &quot;Stone&quot;);\r\n        Customer jack = new Customer(&quot;customer2&quot;, &quot;Jack&quot;, &quot;Sparrow&quot;);\r\n        List&lt;Customer&gt; customerList = List.of(alex, jack);\r\n        Transactions transactions = couchbaseTemplate.getCouchbaseClientFactory().getCluster().transactions();\r\n        customerList.forEach(customer -&gt;\r\n                transactions.run(ctx -&gt; ctx.insert(collection, customer.getId(), customer)\r\n                )\r\n        );\r\n        List&lt;Customer&gt; customers = customerRepository.findAll();\r\n        Assertions.assertEquals(customerList, customers);\r\n    }\r\n```\r\nMy problem is that even if I perform an insert with 2 items in the database with collection.insert, when I try to recover the items with customerRepository.findAll some times the test fails because it finds just one item of the two. \r\n\r\nIf I run the test in debug it works. I thought there were some synchronization issue and I&#39;ve tried to synchronize the methods but I have not solved the problem.\r\n\r\nWhat am I doing wrong?\r\n\r\n\r\n  [1]: https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/tree/basic_crud","title":"Random errors when retrieving data after having inserted them","body":"<p>I have tried to build a set of CRUD REST APIs using Spring Boot. I have created the project via Spring Initializr with the dependency spring-boot-starter-data-couchbase.</p>\n<p>I have uploaded the project here <a href=\"https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/tree/basic_crud\" rel=\"nofollow noreferrer\">https://github.com/RosarioB/spring-boot-rest-api-couchbase-crud/tree/basic_crud</a> The test class is called CustomerRepositoryTest.</p>\n<p>I have implemented some Repository methods using the CouchbaseTemplate. For example:</p>\n<pre><code>@Override\n    public List&lt;Customer&gt; findAll() {\n        List&lt;JsonObject&gt; jsonObjects = couchbaseTemplate.getCouchbaseClientFactory().getScope()\n                .query(String.format(&quot;SELECT * FROM %1$s &quot;, keySpace)).rowsAsObject();\n        return jsonObjects.stream().map(this::mapJsonToCustomer).collect(Collectors.toList());\n     }\n</code></pre>\n<p>And i have also implemented a test for the above method (with Testcontainers) :</p>\n<pre><code>@Test\n    public void testFindAll() {\n        Customer alex = new Customer(&quot;customer1&quot;, &quot;Alex&quot;, &quot;Stone&quot;);\n        Customer jack = new Customer(&quot;customer2&quot;, &quot;Jack&quot;, &quot;Sparrow&quot;);\n        List&lt;Customer&gt; customerList = List.of(alex, jack);\n        Transactions transactions = couchbaseTemplate.getCouchbaseClientFactory().getCluster().transactions();\n        customerList.forEach(customer -&gt;\n                transactions.run(ctx -&gt; ctx.insert(collection, customer.getId(), customer)\n                )\n        );\n        List&lt;Customer&gt; customers = customerRepository.findAll();\n        Assertions.assertEquals(customerList, customers);\n    }\n</code></pre>\n<p>My problem is that even if I perform an insert with 2 items in the database with collection.insert, when I try to recover the items with customerRepository.findAll some times the test fails because it finds just one item of the two.</p>\n<p>If I run the test in debug it works. I thought there were some synchronization issue and I've tried to synchronize the methods but I have not solved the problem.</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","spring-boot","metrics","spring-boot-actuator","application.properties"],"answers":[{"comments":[{"owner":{"account_id":10531082,"reputation":451,"user_id":7760390,"display_name":"Rabin Mallilck"},"score":0,"creation_date":1648232949,"post_id":71621022,"comment_id":126581055,"body_markdown":"Is there a way to set minimum and maximum globally without including the meter name?","body":"Is there a way to set minimum and maximum globally without including the meter name?"},{"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"score":2,"creation_date":1648278376,"post_id":71621022,"comment_id":126588466,"body_markdown":"There’s no way to do that as it is highly unlikely that the same minimum or maximum will be appropriate for every metric.","body":"There’s no way to do that as it is highly unlikely that the same minimum or maximum will be appropriate for every metric."}],"tags":[],"owner":{"account_id":1473276,"reputation":111009,"user_id":1384297,"accept_rate":100,"display_name":"Andy Wilkinson"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1648229707,"creation_date":1648229707,"answer_id":71621022,"question_id":71620221,"body_markdown":"Those properties are for configuring per-meter maximums and you haven&#39;t include a meter name. For example, to configure a maximum of `10s` for meter names starting with `example.meter`, you would configure `management.metrics.distribution.maximum-expected-value.example.meter=10s`.\r\n\r\nThe reference documentation contains [a section](https://docs.spring.io/spring-boot/docs/2.5.x/reference/htmlsingle/#actuator.metrics.customizing.per-meter-properties) on per-meter properties.","title":"Spring boot management.metrics.distribution exception","body":"<p>Those properties are for configuring per-meter maximums and you haven't include a meter name. For example, to configure a maximum of <code>10s</code> for meter names starting with <code>example.meter</code>, you would configure <code>management.metrics.distribution.maximum-expected-value.example.meter=10s</code>.</p>\n<p>The reference documentation contains <a href=\"https://docs.spring.io/spring-boot/docs/2.5.x/reference/htmlsingle/#actuator.metrics.customizing.per-meter-properties\" rel=\"nofollow noreferrer\">a section</a> on per-meter properties.</p>\n"}],"owner":{"account_id":10531082,"reputation":451,"user_id":7760390,"display_name":"Rabin Mallilck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1091,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71621022,"answer_count":1,"score":0,"last_activity_date":1684795132,"creation_date":1648225718,"question_id":71620221,"body_markdown":"I&#39;m trying to set the values of these two properties in my spring boot `application.properties` file -\r\n```\r\nmanagement.metrics.distribution.maximum-expected-value=1\r\nmanagement.metrics.distribution.maximum-expected-value=10\r\n```\r\nor \r\n```\r\nmanagement.metrics.distribution.maximum-expected-value=1s\r\nmanagement.metrics.distribution.maximum-expected-value=10s\r\n```\r\n\r\nEvery-time I try to run my application with these two fields set, I get below exception - \r\n\r\n```APPLICATION FAILED TO START\\n***************************\\n\\nDescription:\\n\\nFailed to bind properties under &#39;management.metrics.distribution.maximum-expected-value&#39; to java.util.Map&lt;java.lang.String, java.lang.String&gt;:\\n\\n    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\\n\\nAction:\\n\\nUpdate your application&#39;s configuration\\n&quot;}```\r\n\r\nI&#39;m going through the doc, but they don&#39;t have shown any example how to set those values properly - https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1.0-RC1-Configuration-Changelog#:~:text=management.metrics.distribution,minimum%2Dexpected%2Dvalue\r\n\r\nCan anyone please tell me what I&#39;m doing wrong here?","title":"Spring boot management.metrics.distribution exception","body":"<p>I'm trying to set the values of these two properties in my spring boot <code>application.properties</code> file -</p>\n<pre><code>management.metrics.distribution.maximum-expected-value=1\nmanagement.metrics.distribution.maximum-expected-value=10\n</code></pre>\n<p>or</p>\n<pre><code>management.metrics.distribution.maximum-expected-value=1s\nmanagement.metrics.distribution.maximum-expected-value=10s\n</code></pre>\n<p>Every-time I try to run my application with these two fields set, I get below exception -</p>\n<p><code>APPLICATION FAILED TO START\\n***************************\\n\\nDescription:\\n\\nFailed to bind properties under 'management.metrics.distribution.maximum-expected-value' to java.util.Map&lt;java.lang.String, java.lang.String&gt;:\\n\\n    Reason: org.springframework.core.convert.ConverterNotFoundException: No converter found capable of converting from type [java.lang.String] to type [java.util.Map&lt;java.lang.String, java.lang.String&gt;]\\n\\nAction:\\n\\nUpdate your application's configuration\\n&quot;}</code></p>\n<p>I'm going through the doc, but they don't have shown any example how to set those values properly - <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1.0-RC1-Configuration-Changelog#:%7E:text=management.metrics.distribution,minimum%2Dexpected%2Dvalue\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.1.0-RC1-Configuration-Changelog#:~:text=management.metrics.distribution,minimum%2Dexpected%2Dvalue</a></p>\n<p>Can anyone please tell me what I'm doing wrong here?</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-actuator"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1662374536,"post_id":73607405,"comment_id":129983907,"body_markdown":"Dependencies won&#39;t set the value for that property. `-Dmanagement.endpoints.web.exposure.include=loggers,health,info,prometheus,metrics` isn&#39;t a command line attribute but a system property, which when placed in the wrong place (after the `-jar &lt;your jar&gt;`) doesn&#39;t do anything. `--management.endpoints.web.exposure.include=loggers,health,info,prometheus,metrics` is a command line argument.","body":"Dependencies won&#39;t set the value for that property. <code>-Dmanagement.endpoints.web.exposure.include=loggers,health,i&zwnj;&#8203;nfo,prometheus,metri&zwnj;&#8203;cs</code> isn&#39;t a command line attribute but a system property, which when placed in the wrong place (after the <code>-jar &lt;your jar&gt;</code>) doesn&#39;t do anything. <code>--management.endpoints.web.exposure.include=loggers,health,i&zwnj;&#8203;nfo,prometheus,metri&zwnj;&#8203;cs</code> is a command line argument."},{"owner":{"account_id":5863550,"reputation":90,"user_id":4618369,"display_name":"Nixivious"},"score":0,"creation_date":1662375415,"post_id":73607405,"comment_id":129984189,"body_markdown":"@deinum tried your approach but get an error on startup instead. \nUnrecognized option: —management.endpoints.web.exposure.include=loggers,health,info,prometheus,metrics\nError: Could not create the Java Virtual Machine.","body":"@deinum tried your approach but get an error on startup instead.  Unrecognized option: —management.endpoints.web.exposure.include=loggers,health,in&zwnj;&#8203;fo,prometheus,metric&zwnj;&#8203;s Error: Could not create the Java Virtual Machine."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1662376811,"post_id":73607405,"comment_id":129984664,"body_markdown":"I stated (i thought clearly) that when it is **after** the `-jar` in your commandline/script it is wrong. If it is before that (basically following the `java` command) it is in the correct position.","body":"I stated (i thought clearly) that when it is <b>after</b> the <code>-jar</code> in your commandline/script it is wrong. If it is before that (basically following the <code>java</code> command) it is in the correct position."},{"owner":{"account_id":5863550,"reputation":90,"user_id":4618369,"display_name":"Nixivious"},"score":0,"creation_date":1662377607,"post_id":73607405,"comment_id":129984966,"body_markdown":"Made sure that was the case (all options in front, jar at the end), but it still errored out.","body":"Made sure that was the case (all options in front, jar at the end), but it still errored out."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1662377944,"post_id":73607405,"comment_id":129985078,"body_markdown":"I must be unclear... When it is `-D` it needs to go **before** the `-jar`... When it is `--management.endpoints.web.exposure.include=loggers,health,info,prometheus,metrics` it needs to go **after** `-jar &lt;your-jar&gt;`...","body":"I must be unclear... When it is <code>-D</code> it needs to go <b>before</b> the <code>-jar</code>... When it is <code>--management.endpoints.web.exposure.include=loggers,health,i&zwnj;&#8203;nfo,prometheus,metri&zwnj;&#8203;cs</code> it needs to go <b>after</b> <code>-jar &lt;your-jar&gt;</code>..."},{"owner":{"account_id":5863550,"reputation":90,"user_id":4618369,"display_name":"Nixivious"},"score":0,"creation_date":1662383999,"post_id":73607405,"comment_id":129987386,"body_markdown":"@deinum, apologies mis read, but attempted putting the —management… **after** the -jar as well with no effect","body":"@deinum, apologies mis read, but attempted putting the —management… <b>after</b> the -jar as well with no effect"}],"answers":[{"comments":[{"owner":{"account_id":5863550,"reputation":90,"user_id":4618369,"display_name":"Nixivious"},"score":0,"creation_date":1662376141,"post_id":73608081,"comment_id":129984434,"body_markdown":"Hey @alexander-golovnya thanks for this, but everything you have mentioned has been attempted with no success. I am not at liberty to share the pom.xml due to org rules, but there are anyways way too many dependencies both private and public within that file for it to be worth pasting here. What other kind of details could I add to help here?","body":"Hey @alexander-golovnya thanks for this, but everything you have mentioned has been attempted with no success. I am not at liberty to share the pom.xml due to org rules, but there are anyways way too many dependencies both private and public within that file for it to be worth pasting here. What other kind of details could I add to help here?"},{"owner":{"account_id":13712379,"reputation":301,"user_id":9894387,"display_name":"Alexander Golovnya"},"score":0,"creation_date":1662376682,"post_id":73608081,"comment_id":129984614,"body_markdown":"Sure, it&#39;s understandable. Could you please then check than that you included the Prometheus dependency to your pom.xml and post the response from http://localhost:8080/actuator. Besides that, please include your full configs under the &#39;management&#39; prefix","body":"Sure, it&#39;s understandable. Could you please then check than that you included the Prometheus dependency to your pom.xml and post the response from <a href=\"http://localhost:8080/actuator\" rel=\"nofollow noreferrer\">localhost:8080/actuator</a>. Besides that, please include your full configs under the &#39;management&#39; prefix"},{"owner":{"account_id":5863550,"reputation":90,"user_id":4618369,"display_name":"Nixivious"},"score":0,"creation_date":1662378368,"post_id":73608081,"comment_id":129985224,"body_markdown":"Added to question if you don’t mind having a look!","body":"Added to question if you don’t mind having a look!"}],"tags":[],"owner":{"account_id":13712379,"reputation":301,"user_id":9894387,"display_name":"Alexander Golovnya"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662374461,"creation_date":1662374461,"answer_id":73608081,"question_id":73607405,"body_markdown":"Your question lacks some background, like your pom.xml or build.gradle files and full application.yml config. \r\n\r\nI will go through the basic steps, which you may have missed.\r\n\r\nFirstly, please make sure that you&#39;ve included the Prometheus dependency:\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n  &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n  &lt;scope&gt;runtime&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAlso, don&#39;t forget that some metrics require the AOP dependency (like custome timers, for example):\r\n```xml\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nTo enable the Prometheus metrics exposure, you should specify such configuration in your application.yml file (it seems like you did it correctly, but let&#39;s list it here for the full picture):\r\n```javascript\r\nmanagement:\r\n  endpoints:\r\n    web.exposure.include: health, info, prometheus\r\n```\r\n\r\nTo verify that the Prometheus endpoints were exposed, please use the GET request to this URL: `http://localhost:8080/actuator/prometheus`\r\n\r\nIf those steps don&#39;t help you resolve your issue, please add more details to your question.","title":"Spring Boot Actuators only exposing limited endpoints","body":"<p>Your question lacks some background, like your pom.xml or build.gradle files and full application.yml config.</p>\n<p>I will go through the basic steps, which you may have missed.</p>\n<p>Firstly, please make sure that you've included the Prometheus dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n  &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n  &lt;scope&gt;runtime&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Also, don't forget that some metrics require the AOP dependency (like custome timers, for example):</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-aop&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>To enable the Prometheus metrics exposure, you should specify such configuration in your application.yml file (it seems like you did it correctly, but let's list it here for the full picture):</p>\n<pre class=\"lang-js prettyprint-override\"><code>management:\n  endpoints:\n    web.exposure.include: health, info, prometheus\n</code></pre>\n<p>To verify that the Prometheus endpoints were exposed, please use the GET request to this URL: <code>http://localhost:8080/actuator/prometheus</code></p>\n<p>If those steps don't help you resolve your issue, please add more details to your question.</p>\n"}],"owner":{"account_id":5863550,"reputation":90,"user_id":4618369,"display_name":"Nixivious"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1230,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684795097,"creation_date":1662370953,"question_id":73607405,"body_markdown":"I am trying to expose additional actuator endpoints in my Spring Boot 2.3 service. Attempting to add endpoints such as the prometheus and metrics for monitoring. But for some reason, the exposed endpoints are locked to the default loggers,health,info. \r\n\r\nFor some background, within the org, there is a parent Spring dependency which automatically brings all of the Spring essentials, as well as some generic code useful within the org. I use this dependency in many of my other projects and was able to expose these additional actuator endpoints successfully. However, in this project with multiple artifacts, I am unable to edit the default exposed actuator endpoints. \r\n\r\nPrinting the `configurableEnvironment` post init always shows the exposure property as follows\r\n\r\n```\r\nmanagement.endpoints.web.exposure.include = loggers,health,info\r\n```\r\nThis is after trying to override this property to an expanded list (loggers,health,info,Prometheus,metrics) using below methods:\r\n\r\n - Enabling specific endpoint via `management.endpoint.metrics.enabled: true`\r\n - Specifying these values in application.yaml\r\n - Passing this as a Command line arguement `Dmanagement.endpoints.web.exposure.include=loggers,health,info,prometheus,metrics`\r\n - Using `mvn dependency:tree` To exclude any transitive actuator dependencies \r\n\r\nI don’t believe its due to the org’s parent pom, likely due to another dependency we are using. But due to the size of this project, it is quite hard to remove dependencies to test. Is there any way to track down where these properties are set. Or perhaps additional ways to force exposure of the additional endpoints I want?\r\n\r\n——\r\n\r\nActuator config\r\n\r\n```\r\nmanagement:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: metrics,prometheus,info,health,logging\r\n  endpoint:\r\n    env:\r\n      enabled: true\r\n    metrics:\r\n      enabled: true\r\n    info:\r\n      enabled: true\r\n    health:\r\n      enabled: true\r\n      show-details: always\r\n    beans:\r\n      enabled: true\r\n    caches:\r\n      enabled: true\r\n    threaddump:\r\n      enabled: true\r\n    prometheus:\r\n      enabled: true\r\n```\r\n\r\nActuator info \r\n```\r\n{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator&quot;,&quot;templated&quot;:false},&quot;health&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/health&quot;,&quot;templated&quot;:false},&quot;health-path&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/health/{*path}&quot;,&quot;templated&quot;:true},&quot;info&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/info&quot;,&quot;templated&quot;:false},&quot;loggers&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/loggers&quot;,&quot;templated&quot;:false},&quot;loggers-name&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/loggers/{name}&quot;,&quot;templated&quot;:true}}}\r\n\r\n```","title":"Spring Boot Actuators only exposing limited endpoints","body":"<p>I am trying to expose additional actuator endpoints in my Spring Boot 2.3 service. Attempting to add endpoints such as the prometheus and metrics for monitoring. But for some reason, the exposed endpoints are locked to the default loggers,health,info.</p>\n<p>For some background, within the org, there is a parent Spring dependency which automatically brings all of the Spring essentials, as well as some generic code useful within the org. I use this dependency in many of my other projects and was able to expose these additional actuator endpoints successfully. However, in this project with multiple artifacts, I am unable to edit the default exposed actuator endpoints.</p>\n<p>Printing the <code>configurableEnvironment</code> post init always shows the exposure property as follows</p>\n<pre><code>management.endpoints.web.exposure.include = loggers,health,info\n</code></pre>\n<p>This is after trying to override this property to an expanded list (loggers,health,info,Prometheus,metrics) using below methods:</p>\n<ul>\n<li>Enabling specific endpoint via <code>management.endpoint.metrics.enabled: true</code></li>\n<li>Specifying these values in application.yaml</li>\n<li>Passing this as a Command line arguement <code>Dmanagement.endpoints.web.exposure.include=loggers,health,info,prometheus,metrics</code></li>\n<li>Using <code>mvn dependency:tree</code> To exclude any transitive actuator dependencies</li>\n</ul>\n<p>I don’t believe its due to the org’s parent pom, likely due to another dependency we are using. But due to the size of this project, it is quite hard to remove dependencies to test. Is there any way to track down where these properties are set. Or perhaps additional ways to force exposure of the additional endpoints I want?</p>\n<p>——</p>\n<p>Actuator config</p>\n<pre><code>management:\n  endpoints:\n    web:\n      exposure:\n        include: metrics,prometheus,info,health,logging\n  endpoint:\n    env:\n      enabled: true\n    metrics:\n      enabled: true\n    info:\n      enabled: true\n    health:\n      enabled: true\n      show-details: always\n    beans:\n      enabled: true\n    caches:\n      enabled: true\n    threaddump:\n      enabled: true\n    prometheus:\n      enabled: true\n</code></pre>\n<p>Actuator info</p>\n<pre><code>{&quot;_links&quot;:{&quot;self&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator&quot;,&quot;templated&quot;:false},&quot;health&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/health&quot;,&quot;templated&quot;:false},&quot;health-path&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/health/{*path}&quot;,&quot;templated&quot;:true},&quot;info&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/info&quot;,&quot;templated&quot;:false},&quot;loggers&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/loggers&quot;,&quot;templated&quot;:false},&quot;loggers-name&quot;:{&quot;href&quot;:&quot;http://localhost:9050/actuator/loggers/{name}&quot;,&quot;templated&quot;:true}}}\n\n</code></pre>\n"},{"tags":["java","spring","prometheus","spring-boot-actuator"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1662729389,"post_id":73659704,"comment_id":130079760,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":13772759,"reputation":21,"user_id":9939786,"display_name":"Shubham Jindal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1684795072,"creation_date":1662714014,"question_id":73659704,"body_markdown":"Like I have an API /v1/api/location and **country** as params so I need metric based on params /v1/api/location?country=IN , /v1/api/location?country=US \r\n\r\nI need Metric based on country param","title":"How can I get Metric based on request Params in Actuator Spring Boot","body":"<p>Like I have an API /v1/api/location and <strong>country</strong> as params so I need metric based on params /v1/api/location?country=IN , /v1/api/location?country=US</p>\n<p>I need Metric based on country param</p>\n"},{"tags":["java","spring-boot","nullpointerexception","swagger","spring-boot-actuator"],"answers":[{"comments":[{"owner":{"account_id":9990575,"reputation":77,"user_id":7390017,"display_name":"Syed Noman Ahmed"},"score":0,"creation_date":1664852464,"post_id":73936762,"comment_id":130560086,"body_markdown":"Thanks for the response @simon-martinelli But as I explained in my question, the swagger works fine in my springboot app. Its the actuator that is causing the app to fail when its added to the app. If a remove the actuator, my project works fine. Please advise.","body":"Thanks for the response @simon-martinelli But as I explained in my question, the swagger works fine in my springboot app. Its the actuator that is causing the app to fail when its added to the app. If a remove the actuator, my project works fine. Please advise."},{"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"score":0,"creation_date":1664866394,"post_id":73936762,"comment_id":130562202,"body_markdown":"Yes that&#39;s because springfox is old and not supported. Last commit is 2 years ago. That&#39;s why you should use springdoc instead","body":"Yes that&#39;s because springfox is old and not supported. Last commit is 2 years ago. That&#39;s why you should use springdoc instead"}],"tags":[],"owner":{"account_id":1038596,"reputation":34548,"user_id":1045142,"accept_rate":67,"display_name":"Simon Martinelli"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1664806499,"creation_date":1664806499,"answer_id":73936762,"question_id":73930751,"body_markdown":"Swaggerfox is not compatible with the newer Spring Boot versions.\r\n\r\nTry Springdoc instead https://springdoc.org/:\r\n\r\n    &lt;dependency&gt;\r\n          &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n          &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n          &lt;version&gt;1.6.11&lt;/version&gt;\r\n     &lt;/dependency&gt;\r\n\r\nYou can access the Swagger UI: http://localhost:8080/swagger-ui/index.html","title":"Spring Boot Rest API failed to run if actuator dependency is added to pom.xml","body":"<p>Swaggerfox is not compatible with the newer Spring Boot versions.</p>\n<p>Try Springdoc instead <a href=\"https://springdoc.org/\" rel=\"nofollow noreferrer\">https://springdoc.org/</a>:</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n      &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n      &lt;version&gt;1.6.11&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>You can access the Swagger UI: http://localhost:8080/swagger-ui/index.html</p>\n"}],"owner":{"account_id":9990575,"reputation":77,"user_id":7390017,"display_name":"Syed Noman Ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":612,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73936762,"answer_count":1,"score":1,"last_activity_date":1684795063,"creation_date":1664766270,"question_id":73930751,"body_markdown":"I have a simple spring boot application with just one GET endpoint for testing purpose. The endpoint works fine as far as I don&#39;t add the actuator dependency to my project. However, as soon as I add the actuator dependency, it stops running and throws the following error which is surprisingly for swagger I believe.\r\n\r\nSo I am not understanding why this error is appearing if I have swagger already enabled and working.\r\n\r\n**Error:**\r\n```\r\n2022-10-02 22:48:26.558  WARN 14872 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean &#39;documentationPluginsBootstrapper&#39;; nested exception is java.lang.NullPointerException\r\n2022-10-02 22:48:26.739  INFO 14872 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2022-10-02 22:48:26.754  INFO 14872 --- [           main] ConditionEvaluationReportLoggingListener : \r\n\r\nError starting ApplicationContext. To display the conditions report re-run your application with &#39;debug&#39; enabled.\r\n2022-10-02 22:48:26.769 ERROR 14872 --- [           main] o.s.boot.SpringApplication               : Application run failed\r\n\r\norg.springframework.context.ApplicationContextException: Failed to start bean &#39;documentationPluginsBootstrapper&#39;; nested exception is java.lang.NullPointerException\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.23.jar:5.3.23]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.4.jar:2.7.4]\r\n\tat com.example.playground.PlaygroundApplication.main(PlaygroundApplication.java:10) ~[classes/:na]\r\nCaused by: java.lang.NullPointerException: null\r\n\tat springfox.documentation.spi.service.contexts.Orderings$8.compare(Orderings.java:112) ~[springfox-spi-2.9.2.jar:null]\r\n\tat springfox.documentation.spi.service.contexts.Orderings$8.compare(Orderings.java:109) ~[springfox-spi-2.9.2.jar:null]\r\n\tat com.google.common.collect.ComparatorOrdering.compare(ComparatorOrdering.java:37) ~[guava-20.0.jar:na]\r\n\tat java.base/java.util.TimSort.countRunAndMakeAscending(TimSort.java:355) ~[na:na]\r\n\tat java.base/java.util.TimSort.sort(TimSort.java:220) ~[na:na]\r\n\tat java.base/java.util.Arrays.sort(Arrays.java:1441) ~[na:na]\r\n\tat com.google.common.collect.Ordering.sortedCopy(Ordering.java:855) ~[guava-20.0.jar:na]\r\n\tat springfox.documentation.spring.web.plugins.WebMvcRequestHandlerProvider.requestHandlers(WebMvcRequestHandlerProvider.java:57) ~[springfox-spring-web-2.9.2.jar:null]\r\n\tat springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper$2.apply(DocumentationPluginsBootstrapper.java:138) ~[springfox-spring-web-2.9.2.jar:null]\r\n\tat springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper$2.apply(DocumentationPluginsBootstrapper.java:135) ~[springfox-spring-web-2.9.2.jar:null]\r\n\tat com.google.common.collect.Iterators$7.transform(Iterators.java:750) ~[guava-20.0.jar:na]\r\n\tat com.google.common.collect.TransformedIterator.next(TransformedIterator.java:47) ~[guava-20.0.jar:na]\r\n\tat com.google.common.collect.TransformedIterator.next(TransformedIterator.java:47) ~[guava-20.0.jar:na]\r\n\tat com.google.common.collect.MultitransformedIterator.hasNext(MultitransformedIterator.java:52) ~[guava-20.0.jar:na]\r\n\tat com.google.common.collect.MultitransformedIterator.hasNext(MultitransformedIterator.java:50) ~[guava-20.0.jar:na]\r\n\tat com.google.common.collect.ImmutableList.copyOf(ImmutableList.java:249) ~[guava-20.0.jar:na]\r\n\tat com.google.common.collect.ImmutableList.copyOf(ImmutableList.java:209) ~[guava-20.0.jar:na]\r\n\tat com.google.common.collect.FluentIterable.toList(FluentIterable.java:614) ~[guava-20.0.jar:na]\r\n\tat springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.defaultContextBuilder(DocumentationPluginsBootstrapper.java:111) ~[springfox-spring-web-2.9.2.jar:null]\r\n\tat springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.buildContext(DocumentationPluginsBootstrapper.java:96) ~[springfox-spring-web-2.9.2.jar:null]\r\n\tat springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.start(DocumentationPluginsBootstrapper.java:167) ~[springfox-spring-web-2.9.2.jar:null]\r\n\tat org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.23.jar:5.3.23]\r\n\t... 14 common frames omitted\r\n```\r\n\r\nHere is this sample project in the github that you can clone and run to replicate this error: https://github.com/syednoman84/playground/\r\n\r\nFew points about this sample project:\r\n\r\n 1. It is using actuator, lombok, swagger2, swagger-ui and\r\n    swagger-bean-validators\r\n 2. I have this\r\n    ```spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER``` in my ```application.properties```\r\n 3. I have a SwaggerConfig defined in SwaggerConfig.java\r\n 4. I have a DocketApiBean defined as DocketApiBean.java   \r\n\r\nJust to reiterate, as soon as I remove the actuator dependency from my pom.xml, everything works fine. However, if I add the actuator dependency and then run the app, it fails to start.\r\n\r\nThanks for the help in advance.\r\n \r\n","title":"Spring Boot Rest API failed to run if actuator dependency is added to pom.xml","body":"<p>I have a simple spring boot application with just one GET endpoint for testing purpose. The endpoint works fine as far as I don't add the actuator dependency to my project. However, as soon as I add the actuator dependency, it stops running and throws the following error which is surprisingly for swagger I believe.</p>\n<p>So I am not understanding why this error is appearing if I have swagger already enabled and working.</p>\n<p><strong>Error:</strong></p>\n<pre><code>2022-10-02 22:48:26.558  WARN 14872 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'documentationPluginsBootstrapper'; nested exception is java.lang.NullPointerException\n2022-10-02 22:48:26.739  INFO 14872 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2022-10-02 22:48:26.754  INFO 14872 --- [           main] ConditionEvaluationReportLoggingListener : \n\nError starting ApplicationContext. To display the conditions report re-run your application with 'debug' enabled.\n2022-10-02 22:48:26.769 ERROR 14872 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.context.ApplicationContextException: Failed to start bean 'documentationPluginsBootstrapper'; nested exception is java.lang.NullPointerException\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:181) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.DefaultLifecycleProcessor.access$200(DefaultLifecycleProcessor.java:54) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.DefaultLifecycleProcessor$LifecycleGroup.start(DefaultLifecycleProcessor.java:356) ~[spring-context-5.3.23.jar:5.3.23]\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]\n    at org.springframework.context.support.DefaultLifecycleProcessor.startBeans(DefaultLifecycleProcessor.java:155) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.DefaultLifecycleProcessor.onRefresh(DefaultLifecycleProcessor.java:123) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.finishRefresh(AbstractApplicationContext.java:935) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:586) ~[spring-context-5.3.23.jar:5.3.23]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-2.7.4.jar:2.7.4]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-2.7.4.jar:2.7.4]\n    at com.example.playground.PlaygroundApplication.main(PlaygroundApplication.java:10) ~[classes/:na]\nCaused by: java.lang.NullPointerException: null\n    at springfox.documentation.spi.service.contexts.Orderings$8.compare(Orderings.java:112) ~[springfox-spi-2.9.2.jar:null]\n    at springfox.documentation.spi.service.contexts.Orderings$8.compare(Orderings.java:109) ~[springfox-spi-2.9.2.jar:null]\n    at com.google.common.collect.ComparatorOrdering.compare(ComparatorOrdering.java:37) ~[guava-20.0.jar:na]\n    at java.base/java.util.TimSort.countRunAndMakeAscending(TimSort.java:355) ~[na:na]\n    at java.base/java.util.TimSort.sort(TimSort.java:220) ~[na:na]\n    at java.base/java.util.Arrays.sort(Arrays.java:1441) ~[na:na]\n    at com.google.common.collect.Ordering.sortedCopy(Ordering.java:855) ~[guava-20.0.jar:na]\n    at springfox.documentation.spring.web.plugins.WebMvcRequestHandlerProvider.requestHandlers(WebMvcRequestHandlerProvider.java:57) ~[springfox-spring-web-2.9.2.jar:null]\n    at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper$2.apply(DocumentationPluginsBootstrapper.java:138) ~[springfox-spring-web-2.9.2.jar:null]\n    at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper$2.apply(DocumentationPluginsBootstrapper.java:135) ~[springfox-spring-web-2.9.2.jar:null]\n    at com.google.common.collect.Iterators$7.transform(Iterators.java:750) ~[guava-20.0.jar:na]\n    at com.google.common.collect.TransformedIterator.next(TransformedIterator.java:47) ~[guava-20.0.jar:na]\n    at com.google.common.collect.TransformedIterator.next(TransformedIterator.java:47) ~[guava-20.0.jar:na]\n    at com.google.common.collect.MultitransformedIterator.hasNext(MultitransformedIterator.java:52) ~[guava-20.0.jar:na]\n    at com.google.common.collect.MultitransformedIterator.hasNext(MultitransformedIterator.java:50) ~[guava-20.0.jar:na]\n    at com.google.common.collect.ImmutableList.copyOf(ImmutableList.java:249) ~[guava-20.0.jar:na]\n    at com.google.common.collect.ImmutableList.copyOf(ImmutableList.java:209) ~[guava-20.0.jar:na]\n    at com.google.common.collect.FluentIterable.toList(FluentIterable.java:614) ~[guava-20.0.jar:na]\n    at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.defaultContextBuilder(DocumentationPluginsBootstrapper.java:111) ~[springfox-spring-web-2.9.2.jar:null]\n    at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.buildContext(DocumentationPluginsBootstrapper.java:96) ~[springfox-spring-web-2.9.2.jar:null]\n    at springfox.documentation.spring.web.plugins.DocumentationPluginsBootstrapper.start(DocumentationPluginsBootstrapper.java:167) ~[springfox-spring-web-2.9.2.jar:null]\n    at org.springframework.context.support.DefaultLifecycleProcessor.doStart(DefaultLifecycleProcessor.java:178) ~[spring-context-5.3.23.jar:5.3.23]\n    ... 14 common frames omitted\n</code></pre>\n<p>Here is this sample project in the github that you can clone and run to replicate this error: <a href=\"https://github.com/syednoman84/playground/\" rel=\"nofollow noreferrer\">https://github.com/syednoman84/playground/</a></p>\n<p>Few points about this sample project:</p>\n<ol>\n<li>It is using actuator, lombok, swagger2, swagger-ui and\nswagger-bean-validators</li>\n<li>I have this\n<code>spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER</code> in my <code>application.properties</code></li>\n<li>I have a SwaggerConfig defined in SwaggerConfig.java</li>\n<li>I have a DocketApiBean defined as DocketApiBean.java</li>\n</ol>\n<p>Just to reiterate, as soon as I remove the actuator dependency from my pom.xml, everything works fine. However, if I add the actuator dependency and then run the app, it fails to start.</p>\n<p>Thanks for the help in advance.</p>\n"},{"tags":["java","maven","maven-plugin","maven-antrun-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1684826212,"post_id":76310253,"comment_id":134569593,"body_markdown":"Please explain why the usage of a property in the id is necessary?","body":"Please explain why the usage of a property in the id is necessary?"}],"owner":{"account_id":28657706,"reputation":1,"user_id":21943355,"display_name":"mankubus01"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684794307,"creation_date":1684794307,"question_id":76310253,"body_markdown":"I need to initialize a parameter via antrun/gmaven in the parent project and use its value in the configuration of the plugin in the child module. For clarity, in the example the plugin id is configured, in the real case I need to configure the phase.Is it possible to do this &quot;directly&quot;? Full code of simple project is here - https://github.com/chemist22888/example.\r\n\r\nParent antrun plugin:\r\n```\r\n\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;validate&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;run&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;exportAntProperties&gt;true&lt;/exportAntProperties&gt;\r\n                            &lt;target&gt;\r\n                                &lt;property name=&quot;test.id&quot; value=&quot;testId&quot;/&gt;\r\n                                &lt;property name=&quot;test.phase&quot; value=&quot;generate-sources&quot;/&gt;\r\n\r\n                                &lt;echo message=&quot;parent phase ${test.id}&quot;/&gt;\r\n                            &lt;/target&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n```\r\nChild antrun plugin:\r\n```\r\n   &lt;plugin&gt;\r\n\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.8&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;${test.phase}&lt;/id&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;run&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;target&gt;\r\n                                &lt;echo message=&quot;child ${test.phase}&quot;/&gt;\r\n                            &lt;/target&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n```\r\n\r\nAfter execution the correct value of parameter is displayed at console, but id of plugin is ${test.phase} instead of generate-sources. Is there any possibility to fix this?\r\n\r\nAlso tried using gmaven plugin, but had the same issue","title":"Maven - Using initialized at antrun parameter at plugin configuration","body":"<p>I need to initialize a parameter via antrun/gmaven in the parent project and use its value in the configuration of the plugin in the child module. For clarity, in the example the plugin id is configured, in the real case I need to configure the phase.Is it possible to do this &quot;directly&quot;? Full code of simple project is here - <a href=\"https://github.com/chemist22888/example\" rel=\"nofollow noreferrer\">https://github.com/chemist22888/example</a>.</p>\n<p>Parent antrun plugin:</p>\n<pre><code>\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;validate&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;run&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;exportAntProperties&gt;true&lt;/exportAntProperties&gt;\n                            &lt;target&gt;\n                                &lt;property name=&quot;test.id&quot; value=&quot;testId&quot;/&gt;\n                                &lt;property name=&quot;test.phase&quot; value=&quot;generate-sources&quot;/&gt;\n\n                                &lt;echo message=&quot;parent phase ${test.id}&quot;/&gt;\n                            &lt;/target&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>Child antrun plugin:</p>\n<pre><code>   &lt;plugin&gt;\n\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-antrun-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;${test.phase}&lt;/id&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;run&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;target&gt;\n                                &lt;echo message=&quot;child ${test.phase}&quot;/&gt;\n                            &lt;/target&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>After execution the correct value of parameter is displayed at console, but id of plugin is ${test.phase} instead of generate-sources. Is there any possibility to fix this?</p>\n<p>Also tried using gmaven plugin, but had the same issue</p>\n"},{"tags":["java","string","sorting","bigdecimal"],"comments":[{"owner":{"account_id":2114766,"reputation":1130,"user_id":1879313,"accept_rate":57,"display_name":"Christopher Helck"},"score":0,"creation_date":1594393065,"post_id":62834745,"comment_id":111119772,"body_markdown":"What is the question? What is the problem? Do you want the array s to be an array of BigDecimals?","body":"What is the question? What is the problem? Do you want the array s to be an array of BigDecimals?"},{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":0,"creation_date":1594415062,"post_id":62834745,"comment_id":111129359,"body_markdown":"BigDecimal implements Comparable, so this handy static method should work: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#sort(java.lang.Object%5B%5D)","body":"BigDecimal implements Comparable, so this handy static method should work: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#sort(java.lang.Object%5B%5D)\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/11/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>"},{"owner":{"account_id":19046804,"reputation":11,"user_id":13905816,"display_name":"BALRAM SINGH RAJPUT"},"score":0,"creation_date":1594749795,"post_id":62834745,"comment_id":111233814,"body_markdown":"here is the link of the problem.      https://www.hackerrank.com/challenges/java-bigdecimal/problem","body":"here is the link of the problem.      <a href=\"https://www.hackerrank.com/challenges/java-bigdecimal/problem\" rel=\"nofollow noreferrer\">hackerrank.com/challenges/java-bigdecimal/problem</a>"}],"answers":[{"tags":[],"owner":{"account_id":7226774,"reputation":19717,"user_id":5515060,"accept_rate":100,"display_name":"Lino"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1594386566,"creation_date":1594386189,"answer_id":62834919,"question_id":62834745,"body_markdown":"You can change your inner loop body to this:\r\n\r\n    String si = s[i], sj = s[j];\r\n    if (new BigDecimal(si).compareTo(new BigDecimal(sj)) &lt; 0) {\r\n        s[i] = sj;\r\n        s[j] = si;\r\n    }\r\n\r\nYou don&#39;t need to store the result from converted big decimals back into the array, but use them only for comparison.\r\n\r\nFor the input:\r\n\r\n    9, -100, 50, 0, 56.6, 90, 0.12, .12, 02.34, 000.000\r\n\r\nI get back:\r\n\r\n    90, 56.6, 50, 9, 02.34, .12, 0.12, 0, 000.000, -100\r\n\r\n# [DEMO](https://ideone.com/x5jvZb)\r\n\r\nAnd if you don&#39;t work with massive big numbers, normal `double`s should suffice:\r\n\r\n    if(Double.parseDouble(si) &lt; Double.parseDouble(sj))","title":"Convert String value into BigDecimal and sort them in descending order and then print them","body":"<p>You can change your inner loop body to this:</p>\n<pre><code>String si = s[i], sj = s[j];\nif (new BigDecimal(si).compareTo(new BigDecimal(sj)) &lt; 0) {\n    s[i] = sj;\n    s[j] = si;\n}\n</code></pre>\n<p>You don't need to store the result from converted big decimals back into the array, but use them only for comparison.</p>\n<p>For the input:</p>\n<pre><code>9, -100, 50, 0, 56.6, 90, 0.12, .12, 02.34, 000.000\n</code></pre>\n<p>I get back:</p>\n<pre><code>90, 56.6, 50, 9, 02.34, .12, 0.12, 0, 000.000, -100\n</code></pre>\n<h1><a href=\"https://ideone.com/x5jvZb\" rel=\"nofollow noreferrer\">DEMO</a></h1>\n<p>And if you don't work with massive big numbers, normal <code>double</code>s should suffice:</p>\n<pre><code>if(Double.parseDouble(si) &lt; Double.parseDouble(sj))\n</code></pre>\n"},{"tags":[],"owner":{"account_id":238157,"reputation":37489,"user_id":506855,"accept_rate":47,"display_name":"Puce"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1594387551,"creation_date":1594387551,"answer_id":62835299,"question_id":62834745,"body_markdown":"Try something like this (untested):\r\n\r\n            List&lt;String&gt; sortedNumberStrings = Arrays.stream(numberStrings)\r\n                    .map(NumberString::new)\r\n                    .sorted(Comparator.reverseOrder())\r\n                    .map(NumberString::getStringValue)\r\n                    .collect(Collectors.toList());\r\n\r\n            System.out.println(sortedNumberStrings);\r\n\r\n   \r\n\r\n    private static class NumberString implements Comparable&lt;NumberString&gt; {\r\n    \r\n            private final String stringValue;\r\n            private final BigDecimal bigDecimalValue;\r\n    \r\n            NumberString(String stringValue) {\r\n    \r\n                this.stringValue = stringValue;\r\n                this.bigDecimalValue = new BigDecimal(stringValue);\r\n            }\r\n    \r\n            public String getStringValue() {\r\n                return stringValue;\r\n            }\r\n    \r\n            public BigDecimal getBigDecimalValue() {\r\n                return bigDecimalValue;\r\n            }\r\n    \r\n            private static final Comparator&lt;NumberString&gt; NATURAL_ORDER_COMPARATOR =\r\n                    Comparator.comparing(NumberString::getBigDecimalValue) // sort by value\r\n                            .thenComparing(NumberString::getStringValue); // sort lexically\r\n    \r\n            @Override\r\n            public int compareTo(NumberString other) {\r\n                return NATURAL_ORDER_COMPARATOR.compare(this, other);\r\n            }\r\n    \r\n            @Override\r\n            public int hashCode() {\r\n                return Objects.hash(stringValue, bigDecimalValue);\r\n            }\r\n    \r\n            @Override\r\n            public boolean equals(Object o) {\r\n                if (this == o) {\r\n                    return true;\r\n                }\r\n                if (!(o instanceof NumberString)) {\r\n                    return false;\r\n                }\r\n                NumberString that = (NumberString) o;\r\n                return Objects.equals(stringValue, that.stringValue) &amp;&amp;\r\n                        Objects.equals(bigDecimalValue, that.bigDecimalValue);\r\n            }\r\n    \r\n            @Override\r\n            public String toString() {\r\n                return stringValue;\r\n            }\r\n        }","title":"Convert String value into BigDecimal and sort them in descending order and then print them","body":"<p>Try something like this (untested):</p>\n<pre><code>        List&lt;String&gt; sortedNumberStrings = Arrays.stream(numberStrings)\n                .map(NumberString::new)\n                .sorted(Comparator.reverseOrder())\n                .map(NumberString::getStringValue)\n                .collect(Collectors.toList());\n\n        System.out.println(sortedNumberStrings);\n\n\n\nprivate static class NumberString implements Comparable&lt;NumberString&gt; {\n\n        private final String stringValue;\n        private final BigDecimal bigDecimalValue;\n\n        NumberString(String stringValue) {\n\n            this.stringValue = stringValue;\n            this.bigDecimalValue = new BigDecimal(stringValue);\n        }\n\n        public String getStringValue() {\n            return stringValue;\n        }\n\n        public BigDecimal getBigDecimalValue() {\n            return bigDecimalValue;\n        }\n\n        private static final Comparator&lt;NumberString&gt; NATURAL_ORDER_COMPARATOR =\n                Comparator.comparing(NumberString::getBigDecimalValue) // sort by value\n                        .thenComparing(NumberString::getStringValue); // sort lexically\n\n        @Override\n        public int compareTo(NumberString other) {\n            return NATURAL_ORDER_COMPARATOR.compare(this, other);\n        }\n\n        @Override\n        public int hashCode() {\n            return Objects.hash(stringValue, bigDecimalValue);\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            if (this == o) {\n                return true;\n            }\n            if (!(o instanceof NumberString)) {\n                return false;\n            }\n            NumberString that = (NumberString) o;\n            return Objects.equals(stringValue, that.stringValue) &amp;&amp;\n                    Objects.equals(bigDecimalValue, that.bigDecimalValue);\n        }\n\n        @Override\n        public String toString() {\n            return stringValue;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":442404,"reputation":4693,"user_id":833007,"accept_rate":61,"display_name":"AnujAroshA"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667519431,"creation_date":1667519431,"answer_id":74310725,"question_id":62834745,"body_markdown":"What the author may seek is following as the solution.\r\n\r\n    for (int i = 1; i &lt; n; i++) {\r\n        for (int j = 0; j &lt; n - 1; j++) {\r\n            if (new BigDecimal(s[j]).compareTo(new BigDecimal(s[j + 1])) &lt; 0) {\r\n                String temp = s[j];\r\n                s[j] = s[j + 1];\r\n                s[j + 1] = temp;\r\n            }\r\n        }\r\n    }\r\n\r\nWhat this change from the @Lino&#39;s answer is the order of `0.12` and `.12`\r\n\r\nThis gives following output and this should be the output according to the [problem link][1] that the author has shared.\r\n\r\n`90  56.6    50  02.34   0.12    .12     0   000.000 -100`\r\n\r\n\r\n  [1]: https://www.hackerrank.com/challenges/java-bigdecimal/problem","title":"Convert String value into BigDecimal and sort them in descending order and then print them","body":"<p>What the author may seek is following as the solution.</p>\n<pre><code>for (int i = 1; i &lt; n; i++) {\n    for (int j = 0; j &lt; n - 1; j++) {\n        if (new BigDecimal(s[j]).compareTo(new BigDecimal(s[j + 1])) &lt; 0) {\n            String temp = s[j];\n            s[j] = s[j + 1];\n            s[j + 1] = temp;\n        }\n    }\n}\n</code></pre>\n<p>What this change from the @Lino's answer is the order of <code>0.12</code> and <code>.12</code></p>\n<p>This gives following output and this should be the output according to the <a href=\"https://www.hackerrank.com/challenges/java-bigdecimal/problem\" rel=\"nofollow noreferrer\">problem link</a> that the author has shared.</p>\n<p><code>90  56.6    50  02.34   0.12    .12     0   000.000 -100</code></p>\n"},{"tags":[],"owner":{"account_id":28484031,"reputation":11,"user_id":21797603,"display_name":"hari862"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684558512,"creation_date":1684515787,"answer_id":76291138,"question_id":62834745,"body_markdown":"First thing to understand is that we need to maintain the input string data to printed in same format in output e.g. 0.12 and .12 are to be printed in same format as in the input. If we just do BigDecimal based comparison then input data format will be lost and .12 becomes 0.12. Hence to have this format, we could have the data stored in a Pair like format where one data is used to BigDecimal comparison while other data is used for keeping the original format.\r\n\r\nUsing Java 8, I came up with below solution:\r\n\r\n    public static void main(String []args){\r\n        //Input\r\n        Scanner sc= new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        String [][] s=new String[n][2];\r\n        for(int i=0;i&lt;n;i++){\r\n            s[i][0]=sc.next(); // to be used for BigDecimal comparison\r\n            s[i][1]=s[i][0];   // to be used for printing in original format\r\n        }\r\n        sc.close();\r\n\r\n        Arrays.stream(s)\r\n                .sorted((o1, o2) -&gt; new BigDecimal(o2[0]).compareTo(new BigDecimal(o1[0])))\r\n                .forEach(o -&gt; System.out.println(o[1]));","title":"Convert String value into BigDecimal and sort them in descending order and then print them","body":"<p>First thing to understand is that we need to maintain the input string data to printed in same format in output e.g. 0.12 and .12 are to be printed in same format as in the input. If we just do BigDecimal based comparison then input data format will be lost and .12 becomes 0.12. Hence to have this format, we could have the data stored in a Pair like format where one data is used to BigDecimal comparison while other data is used for keeping the original format.</p>\n<p>Using Java 8, I came up with below solution:</p>\n<pre><code>public static void main(String []args){\n    //Input\n    Scanner sc= new Scanner(System.in);\n    int n=sc.nextInt();\n    String [][] s=new String[n][2];\n    for(int i=0;i&lt;n;i++){\n        s[i][0]=sc.next(); // to be used for BigDecimal comparison\n        s[i][1]=s[i][0];   // to be used for printing in original format\n    }\n    sc.close();\n\n    Arrays.stream(s)\n            .sorted((o1, o2) -&gt; new BigDecimal(o2[0]).compareTo(new BigDecimal(o1[0])))\n            .forEach(o -&gt; System.out.println(o[1]));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684794210,"creation_date":1684741063,"answer_id":76303934,"question_id":62834745,"body_markdown":"To get an ascending list of values you can use a `List` and the `List.sort` method.\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    Scanner scanner = new Scanner(System.in);\r\n    String[] strings = scanner.nextLine().split(&quot; &quot;);\r\n    List&lt;BigDecimal&gt; values = new ArrayList&lt;&gt;();\r\n    for (String string : strings)\r\n        values.add(new BigDecimal(string));\r\n    values.sort(Comparator.reverseOrder());\r\n    System.out.println(values);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\n[-100, 0, 0.000, 0.12, 0.12, 2.34, 50, 56.6, 90]\r\n```","title":"Convert String value into BigDecimal and sort them in descending order and then print them","body":"<p>To get an ascending list of values you can use a <code>List</code> and the <code>List.sort</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Scanner scanner = new Scanner(System.in);\n    String[] strings = scanner.nextLine().split(&quot; &quot;);\n    List&lt;BigDecimal&gt; values = new ArrayList&lt;&gt;();\n    for (String string : strings)\n        values.add(new BigDecimal(string));\n    values.sort(Comparator.reverseOrder());\n    System.out.println(values);\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>[-100, 0, 0.000, 0.12, 0.12, 2.34, 50, 56.6, 90]\n</code></pre>\n"}],"owner":{"account_id":19046804,"reputation":11,"user_id":13905816,"display_name":"BALRAM SINGH RAJPUT"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":966,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":5,"score":0,"last_activity_date":1684794210,"creation_date":1594385556,"question_id":62834745,"body_markdown":"**here is my code but it is not taking a string as it is in BigDecimal variable** \r\n\r\n\r\n    import java.math.BigDecimal;\r\n    import java.util.Arrays;\r\n    import java.util.Scanner;\r\n    \r\n    public class BigDesimal {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\t// TODO Auto-generated method stub\r\n    \t\tScanner in = new Scanner(System.in);\r\n    \t\tint n = in.nextInt();\r\n    \t\tString[] s = new String[n];\r\n    \t\tfor(int i=0; i&lt;n; ++i) {\r\n    \t\t\ts[i] = in.next();\r\n    \t\t}\r\n    \t\tin.close();\r\n    \r\n    \t\tBigDecimal max, min;\r\n    \t\tfor(int i=0; i&lt;n-1; i++) {\r\n    \t\t\tfor(int j=i+1; j&lt;n; j++) {\r\n    \t\t\t\tmax = (new BigDecimal(s[i])).max(new BigDecimal(s[j]));\r\n                    min = (new BigDecimal(s[i])).min(new BigDecimal(s[j]));\r\n                    s[i] = max.toString();\r\n                    s[j] = min.toString();\r\n                     \r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\t \r\n    \r\n    \t\tSystem.out.println(Arrays.toString(s));\r\n    \r\n    \t}\r\n    \r\n    }\r\n \r\nI run this program for the following input: \r\n*9\r\n\r\n-100, \r\n50, \r\n0, \r\n56.6, \r\n90, \r\n0.12, \r\n.12, \r\n02.34, \r\n000.000*\r\n\r\nAnd the output is:\r\n*[90, 56.6, 50, 2.34, 0.12, 0.12, 0, 0, -100]*\r\n\r\n","title":"Convert String value into BigDecimal and sort them in descending order and then print them","body":"<p><strong>here is my code but it is not taking a string as it is in BigDecimal variable</strong></p>\n<pre><code>import java.math.BigDecimal;\nimport java.util.Arrays;\nimport java.util.Scanner;\n\npublic class BigDesimal {\n\n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        Scanner in = new Scanner(System.in);\n        int n = in.nextInt();\n        String[] s = new String[n];\n        for(int i=0; i&lt;n; ++i) {\n            s[i] = in.next();\n        }\n        in.close();\n\n        BigDecimal max, min;\n        for(int i=0; i&lt;n-1; i++) {\n            for(int j=i+1; j&lt;n; j++) {\n                max = (new BigDecimal(s[i])).max(new BigDecimal(s[j]));\n                min = (new BigDecimal(s[i])).min(new BigDecimal(s[j]));\n                s[i] = max.toString();\n                s[j] = min.toString();\n                 \n                \n            }\n        }\n         \n\n        System.out.println(Arrays.toString(s));\n\n    }\n\n}\n</code></pre>\n<p>I run this program for the following input:\n*9</p>\n<p>-100,\n50,\n0,\n56.6,\n90,\n0.12,\n.12,\n02.34,\n000.000*</p>\n<p>And the output is:\n<em>[90, 56.6, 50, 2.34, 0.12, 0.12, 0, 0, -100]</em></p>\n"},{"tags":["java","string","loops","java.util.scanner"],"comments":[{"owner":{"account_id":195331,"reputation":275428,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":2,"creation_date":1669238788,"post_id":74553168,"comment_id":131602128,"body_markdown":"Define _last given word_.","body":"Define <i>last given word</i>."},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":1,"creation_date":1669238960,"post_id":74553168,"comment_id":131602181,"body_markdown":"Well, your loop condition is &quot;cannot read another word&quot;, so the loop keeps looping until you end the input. As long as you type words, it will not stop. _When_ _do_ you _want_ your program to stop?","body":"Well, your loop condition is &quot;cannot read another word&quot;, so the loop keeps looping until you end the input. As long as you type words, it will not stop. <i>When</i> <i>do</i> you <i>want</i> your program to stop?"},{"owner":{"account_id":20809444,"reputation":11,"user_id":16546709,"display_name":"B612"},"score":0,"creation_date":1669239320,"post_id":74553168,"comment_id":131602270,"body_markdown":"I expect a single line containing words, and I want the program to stop after printing the last word on the line","body":"I expect a single line containing words, and I want the program to stop after printing the last word on the line"},{"owner":{"account_id":12863154,"reputation":402,"user_id":9304291,"display_name":"Marek Borecki"},"score":0,"creation_date":1669240063,"post_id":74553168,"comment_id":131602451,"body_markdown":"use .readLine()","body":"use .readLine()"},{"owner":{"account_id":23590494,"reputation":26,"user_id":17628350,"display_name":"Velho Kielen"},"score":1,"creation_date":1669241019,"post_id":74553168,"comment_id":131602670,"body_markdown":"Check here https://stackoverflow.com/questions/15183761/how-to-check-the-end-of-line-using-scanner","body":"Check here <a href=\"https://stackoverflow.com/questions/15183761/how-to-check-the-end-of-line-using-scanner\" title=\"how to check the end of line using scanner\">stackoverflow.com/questions/15183761/&hellip;</a>"},{"owner":{"account_id":39208,"reputation":251260,"user_id":112968,"accept_rate":68,"display_name":"knittl"},"score":0,"creation_date":1670165379,"post_id":74553168,"comment_id":131806752,"body_markdown":"Press `ctrl-d` after you entered the last word, it will close the input. Java cannot know if a second line will be entered if you don&#39;t close the input","body":"Press <code>ctrl-d</code> after you entered the last word, it will close the input. Java cannot know if a second line will be entered if you don&#39;t close the input"}],"answers":[{"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1669239452,"post_id":74553243,"comment_id":131602307,"body_markdown":"When would you close the input stream in this scenario?","body":"When would you close the input stream in this scenario?"},{"owner":{"account_id":12863154,"reputation":402,"user_id":9304291,"display_name":"Marek Borecki"},"score":1,"creation_date":1669239640,"post_id":74553243,"comment_id":131602359,"body_markdown":"There is no clean way to do that. Only way is make dirty if and for example close loop for some particular string","body":"There is no clean way to do that. Only way is make dirty if and for example close loop for some particular string"},{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1669239752,"post_id":74553243,"comment_id":131602381,"body_markdown":"What is a dirty if? How would it improve OP&#39;s code?","body":"What is a dirty if? How would it improve OP&#39;s code?"},{"owner":{"account_id":12863154,"reputation":402,"user_id":9304291,"display_name":"Marek Borecki"},"score":1,"creation_date":1669239931,"post_id":74553243,"comment_id":131602419,"body_markdown":"Keeping logic in ifs and comparing Strings is bad for OOP purpose.\n\nThis code can be exit from loop for example if user pass &quot;END&quot; string, or it could be just end loop, or 3 invokes s.next()","body":"Keeping logic in ifs and comparing Strings is bad for OOP purpose.  This code can be exit from loop for example if user pass &quot;END&quot; string, or it could be just end loop, or 3 invokes s.next()"},{"owner":{"account_id":12863154,"reputation":402,"user_id":9304291,"display_name":"Marek Borecki"},"score":1,"creation_date":1669240319,"post_id":74553243,"comment_id":131602505,"body_markdown":"@f1sh what is OP code?","body":"@f1sh what is OP code?"},{"owner":{"account_id":25534785,"reputation":532,"user_id":19322069,"display_name":"access violation"},"score":1,"creation_date":1669241722,"post_id":74553243,"comment_id":131602828,"body_markdown":"OP = Original Poster.  In this question, that&#39;s user B612.","body":"OP = Original Poster.  In this question, that&#39;s user B612."}],"tags":[],"owner":{"account_id":12863154,"reputation":402,"user_id":9304291,"display_name":"Marek Borecki"},"comment_count":6,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1669240090,"creation_date":1669239328,"answer_id":74553243,"question_id":74553168,"body_markdown":"You continuously reading the scanner.\r\nYou have to read by scanner out of loop. For example 3 times invoking s.next().\r\nOr create some loop end condition, for example text, &quot;END&quot;. \r\n\r\n\r\nIf you pass all words in one line use .readLine()","title":"How to use the hasNext() and next() methods","body":"<p>You continuously reading the scanner.\nYou have to read by scanner out of loop. For example 3 times invoking s.next().\nOr create some loop end condition, for example text, &quot;END&quot;.</p>\n<p>If you pass all words in one line use .readLine()</p>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684793934,"creation_date":1684743312,"answer_id":76304219,"question_id":74553168,"body_markdown":"A call to the `Scanner.hasNext` will block if it is waiting for user input.\r\n\r\nIt&#39;s useful for when you want a continuous input from the user.\r\n\r\nHere is how to accomplish your task.\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    Scanner s = new Scanner(System.in);\r\n    String[] strings = s.nextLine().split(&quot; +&quot;);\r\n    for (String string : strings)\r\n        System.out.println(string);\r\n}\r\n```\r\n\r\nOutput\r\n\r\n```none\r\nsun\r\nmoon\r\ncloud\r\n```\r\n\r\nThe names `hasNext` and `next` are somewhat convoluted in the Java context.\r\n\r\nAn iterator also uses this terminology, as a way to gather data from a source.\r\n\r\nThe difference here is that `Scanner` works dynamically, whereas, something like an iterator works in a static context, and already has the values.","title":"How to use the hasNext() and next() methods","body":"<p>A call to the <code>Scanner.hasNext</code> will block if it is waiting for user input.</p>\n<p>It's useful for when you want a continuous input from the user.</p>\n<p>Here is how to accomplish your task.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Scanner s = new Scanner(System.in);\n    String[] strings = s.nextLine().split(&quot; +&quot;);\n    for (String string : strings)\n        System.out.println(string);\n}\n</code></pre>\n<p>Output</p>\n<pre class=\"lang-none prettyprint-override\"><code>sun\nmoon\ncloud\n</code></pre>\n<p>The names <code>hasNext</code> and <code>next</code> are somewhat convoluted in the Java context.</p>\n<p>An iterator also uses this terminology, as a way to gather data from a source.</p>\n<p>The difference here is that <code>Scanner</code> works dynamically, whereas, something like an iterator works in a static context, and already has the values.</p>\n"}],"owner":{"account_id":20809444,"reputation":11,"user_id":16546709,"display_name":"B612"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":129,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1684793934,"creation_date":1669238757,"question_id":74553168,"body_markdown":"My goal is to read and print the words separately from standard input, without having to store them in an array or list.\r\n\r\nI want this:\r\n\r\ninput: sun moon cloud\r\n\r\noutput:\r\nsun moon cloud (each word in a different line)\r\n\r\nThe following program keep waiting after printing &quot;cloud&quot;. I don&#39;t know what the problem is\r\n\r\n`\r\n```\r\nimport java.util.Scanner;\r\n\r\nclass RandomWord{\r\n\tpublic static void main(String[] args){\r\n\t\tString palavra;\r\n\t\tScanner s = new Scanner(System.in);\r\n\t\twhile(s.hasNext()){\r\n\t\t\tpalavra = s.next();\r\n\t\t\tSystem.out.println(palavra);\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n`","title":"How to use the hasNext() and next() methods","body":"<p>My goal is to read and print the words separately from standard input, without having to store them in an array or list.</p>\n<p>I want this:</p>\n<p>input: sun moon cloud</p>\n<p>output:\nsun moon cloud (each word in a different line)</p>\n<p>The following program keep waiting after printing &quot;cloud&quot;. I don't know what the problem is</p>\n<p>`</p>\n<pre><code>import java.util.Scanner;\n\nclass RandomWord{\n    public static void main(String[] args){\n        String palavra;\n        Scanner s = new Scanner(System.in);\n        while(s.hasNext()){\n            palavra = s.next();\n            System.out.println(palavra);\n        }\n    }\n}\n</code></pre>\n<p>`</p>\n"},{"tags":["java","spring-boot","spring-security","keycloak","spring-boot-actuator"],"comments":[{"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1642517057,"post_id":70756991,"comment_id":125087919,"body_markdown":"Did you try debugging the `FilterChainProxy#doFilterInternal` to see which filter chain is being called? Also, I recommend adding `logging.level.org.springframework.security=TRACE` to your `application.properties` file and know exactly who is denying you access","body":"Did you try debugging the <code>FilterChainProxy#doFilterInternal</code> to see which filter chain is being called? Also, I recommend adding <code>logging.level.org.springframework.security=TRACE</code> to your <code>application.properties</code> file and know exactly who is denying you access"},{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1642517919,"post_id":70756991,"comment_id":125088298,"body_markdown":"@MarcusHertdaCoregio yes the KeycloakAuthenticationProcessingFilter is not passing with \n Authorization header not found,  see WWW-Authenticate header","body":"@MarcusHertdaCoregio yes the KeycloakAuthenticationProcessingFilter is not passing with   Authorization header not found,  see WWW-Authenticate header"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1642520379,"post_id":70756991,"comment_id":125089450,"body_markdown":"here you can read the answer i have provided how to exclude a path completly from spring security https://stackoverflow.com/questions/70717704/how-to-disable-security-just-for-actuator-health/70719136#70719136 you could try that out","body":"here you can read the answer i have provided how to exclude a path completly from spring security <a href=\"https://stackoverflow.com/questions/70717704/how-to-disable-security-just-for-actuator-health/70719136#70719136\" title=\"how to disable security just for actuator health\">stackoverflow.com/questions/70717704/&hellip;</a> you could try that out"},{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1642521759,"post_id":70756991,"comment_id":125090065,"body_markdown":"@Toerktumlare ths but is not working KeycloakAuthenticationProcessingFilter is called regardless of which filter chain is mapped to the request which is strange","body":"@Toerktumlare ths but is not working KeycloakAuthenticationProcessingFilter is called regardless of which filter chain is mapped to the request which is strange"},{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1642522701,"post_id":70756991,"comment_id":125090510,"body_markdown":"@MarcusHertdaCoregio even If I have two different filter chains the fist one does not have KeycloakAuthenticationProcessingFilter in chain but is caller regardless of that ... looks that it is registered in internal filter list that is applied via VirtualFilterChain ... any way to avoid this?","body":"@MarcusHertdaCoregio even If I have two different filter chains the fist one does not have KeycloakAuthenticationProcessingFilter in chain but is caller regardless of that ... looks that it is registered in internal filter list that is applied via VirtualFilterChain ... any way to avoid this?"}],"answers":[{"comments":[{"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"score":0,"creation_date":1642579216,"post_id":70759984,"comment_id":125104932,"body_markdown":"Marcus thnx for the info looks working, I understand that avoiding KeycloakWebSecurityConfigurerAdapter can be interesting aso to avoid the additional dependency to keycloak, but what do you loose with this, probably KeycloakWebSecurityConfigurerAdapter adds some additional stuff that is maybe good to have or not? We use OAuth2.","body":"Marcus thnx for the info looks working, I understand that avoiding KeycloakWebSecurityConfigurerAdapter can be interesting aso to avoid the additional dependency to keycloak, but what do you loose with this, probably KeycloakWebSecurityConfigurerAdapter adds some additional stuff that is maybe good to have or not? We use OAuth2."},{"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"score":0,"creation_date":1642590639,"post_id":70759984,"comment_id":125109408,"body_markdown":"If you are using nothing special from the adapter, you should lose nothing. It will behave the same, receive the Bearer token, extract it, and validate it using the JWKs returned from the `issuer-uri` that you configured.","body":"If you are using nothing special from the adapter, you should lose nothing. It will behave the same, receive the Bearer token, extract it, and validate it using the JWKs returned from the <code>issuer-uri</code> that you configured."}],"tags":[],"owner":{"account_id":7134819,"reputation":5068,"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1642527346,"creation_date":1642527346,"answer_id":70759984,"question_id":70756991,"body_markdown":"When you extend `KeycloakWebSecurityConfigurerAdapter`, the adapter register a Bean of type `KeycloakAuthenticationProcessingFilter`. This filter is registered in the Spring Security&#39;s `SecurityFilterChain`, and because it&#39;s a Bean, it is also automatically registered by Spring Boot in the original chain, therefore even if Spring Security doesn&#39;t apply it, it will be applied later on in original the filter chain.\r\n\r\nTry disabling this filter from being registered by Spring Boot, like so:\r\n```java\r\n@Bean\r\npublic FilterRegistrationBean registration(KeycloakAuthenticationProcessingFilter filter) {\r\n    FilterRegistrationBean registration = new FilterRegistrationBean(filter);\r\n    registration.setEnabled(false);\r\n    return registration;\r\n}\r\n```\r\n\r\nIn addition, if you are using OAuth 2, you may consider using `spring-security-oauth2-resource-server` and simplifying your Resource Server&#39;s configuration. Take a look at the [documentation][1]. This way you don&#39;t need to extend the custom adapter, just rely on the out-of-the-box configuration from Spring Security.\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html","title":"spring boot actuator endpoints with Keycloak security","body":"<p>When you extend <code>KeycloakWebSecurityConfigurerAdapter</code>, the adapter register a Bean of type <code>KeycloakAuthenticationProcessingFilter</code>. This filter is registered in the Spring Security's <code>SecurityFilterChain</code>, and because it's a Bean, it is also automatically registered by Spring Boot in the original chain, therefore even if Spring Security doesn't apply it, it will be applied later on in original the filter chain.</p>\n<p>Try disabling this filter from being registered by Spring Boot, like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic FilterRegistrationBean registration(KeycloakAuthenticationProcessingFilter filter) {\n    FilterRegistrationBean registration = new FilterRegistrationBean(filter);\n    registration.setEnabled(false);\n    return registration;\n}\n</code></pre>\n<p>In addition, if you are using OAuth 2, you may consider using <code>spring-security-oauth2-resource-server</code> and simplifying your Resource Server's configuration. Take a look at the <a href=\"https://docs.spring.io/spring-security/reference/servlet/oauth2/resource-server/jwt.html\" rel=\"nofollow noreferrer\">documentation</a>. This way you don't need to extend the custom adapter, just rely on the out-of-the-box configuration from Spring Security.</p>\n"}],"owner":{"account_id":153072,"reputation":4177,"user_id":368068,"accept_rate":51,"display_name":"simonC"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1421,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70759984,"answer_count":1,"score":0,"last_activity_date":1684792571,"creation_date":1642515192,"question_id":70756991,"body_markdown":"we have a spring boot project (2.3.0.RELEASE) with actuator endpoints and we are introducing keycloak to the project with KeycloakWebSecurityConfigurerAdapter how can I prevent actuator endpoints being secured by the keycloak filter chain.\r\n\r\nWe would like to have the &quot;/actuator/**&quot; endpoints secured by basic auth. \r\n\r\nCurrently we have a custom WebSecurityConfigurerAdapter with @Order(1) where we apply the basic auth to  &quot;/actuator/**&quot; and then we have with @Order(2) antotated the KeycloakWebSecurityConfigurerAdapter \r\n\r\nso 2 filter chains gets registered and when I call the actuator endpoints the second filter chain fails as unauthorised 401 \r\n\r\nis it possible to prevent handling the &quot;/actuator/**&quot; resorce path on the second filter chain? \r\n\r\nFirst actuator security configuration.\r\n\r\n    @Configuration\r\n    @Order(1)\r\n    public class ActuatorWebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        private final String username;\r\n        private final String password;\r\n        private final PasswordEncoder encoder;\r\n    \r\n        public ActuatorWebSecurityConfig(\r\n                @Value(&quot;${spring.security.user.name}&quot;) String username,\r\n                @Value(&quot;${spring.security.user.password}&quot;) String password,\r\n                Optional&lt;PasswordEncoder&gt; encoder) {\r\n            this.username = username;\r\n            this.password = password;\r\n            this.encoder = encoder.orElseGet(PasswordEncoderFactories::createDelegatingPasswordEncoder);\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.inMemoryAuthentication()\r\n                    .withUser(username)\r\n                    .password(encoder.encode(password))\r\n                    .roles(&quot;USER&quot;);\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .sessionManagement()\r\n                    .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                    .and()\r\n                    .antMatcher(&quot;/actuator/**&quot;)\r\n                    .authorizeRequests(authorize -&gt; authorize.anyRequest().authenticated())\r\n                    .httpBasic(Customizer.withDefaults());\r\n        }\r\n    }\r\n\r\n\r\nsecond keycloak securoty configuration\r\n\r\n    @Order(2)\r\n    @KeycloakConfiguration\r\n    public class SecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\r\n    \r\n        private final String swaggerUrl;\r\n        private final CorsFilter corsFilter;\r\n        private final CustomSecurityConfig customSecurityConfig;\r\n    \r\n        @Autowired\r\n        public SecurityConfig(\r\n                @Value(&quot;${springdoc.swagger-ui.url:#{null}}&quot;) String swaggerUrl,\r\n                CorsFilter corsFilter,\r\n                CustomSecurityConfig customSecurityConfig) {\r\n            this.swaggerUrl = swaggerUrl;\r\n            this.corsFilter = corsFilter;\r\n            this.customSecurityConfig = customSecurityConfig;\r\n        }\r\n    \r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\r\n            KeycloakAuthenticationProvider keycloakProvider = keycloakAuthenticationProvider();\r\n            keycloakProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\r\n            auth.authenticationProvider(keycloakProvider);\r\n        }\r\n    \r\n        @Bean\r\n        @Override\r\n        protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\r\n            return new NullAuthenticatedSessionStrategy();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            super.configure(http);\r\n            http.csrf().disable()\r\n                .requestMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/actuator/**&quot;)));\r\n                .headers().frameOptions().disable()\r\n            .and()\r\n               .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n            .and()\r\n            .authorizeRequests()\r\n               .antMatchers(&quot;/public/**&quot;, &quot;/resources/**&quot;, &quot;/resources/public/**&quot;).permitAll()\r\n               .antMatchers(OPTIONS, &quot;/**&quot;).permitAll();\r\n            .authorizeRequests()\r\n               .antMatchers(&quot;/**&quot;)\r\n               .authenticated();\r\n        }\r\n    }\r\n\r\nI have tried with on keycloak config\r\n\r\n    .antMatchers(&quot;/actuator/**&quot;).permitAll();\r\n\r\nand with \r\n\r\n    http.requestMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/actuator/**&quot;)));\r\n\r\nbut nothing works I receive unauthorised 401 for actuator\r\n\r\nthe registered filter chains : \r\n\r\n    2022-01-18 17:38:44,688 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern=&#39;/actuator/**&#39;], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25c6a9de, org.springframework.security.web.context.SecurityContextPersistenceFilter@56f3f9da, org.springframework.security.web.header.HeaderWriterFilter@33dcbdc2, org.springframework.security.web.csrf.CsrfFilter@522fdf0c, org.springframework.security.web.authentication.logout.LogoutFilter@365ad794, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@23df16cf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@227cba85, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b38dc7d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@142422a4, org.springframework.security.web.session.SessionManagementFilter@2f0b7b6d, org.springframework.security.web.access.ExceptionTranslationFilter@74bca236, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@30587737]\r\n    2022-01-18 17:38:44,691 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: NegatedRequestMatcher [requestMatcher=Ant [pattern=&#39;/actuator/**&#39;]], [com.betex.auth.filters.CorsFilter@20a9f5fb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@10e28d97, org.springframework.security.web.context.SecurityContextPersistenceFilter@c6b08a5, org.springframework.security.web.header.HeaderWriterFilter@5f05cd7e, org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter@2a54c92e, org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter@55b62db8, org.springframework.security.web.authentication.logout.LogoutFilter@274f51ad, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@54980154, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25874884, org.keycloak.adapters.springsecurity.filter.KeycloakSecurityContextRequestFilter@8cb7185, org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticatedActionsFilter@4dac40b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@37d43b9b, org.springframework.security.web.session.SessionManagementFilter@11e8e183, org.springframework.security.web.access.ExceptionTranslationFilter@56f1db5f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@78543f0d]","title":"spring boot actuator endpoints with Keycloak security","body":"<p>we have a spring boot project (2.3.0.RELEASE) with actuator endpoints and we are introducing keycloak to the project with KeycloakWebSecurityConfigurerAdapter how can I prevent actuator endpoints being secured by the keycloak filter chain.</p>\n<p>We would like to have the &quot;/actuator/**&quot; endpoints secured by basic auth.</p>\n<p>Currently we have a custom WebSecurityConfigurerAdapter with @Order(1) where we apply the basic auth to  &quot;/actuator/**&quot; and then we have with @Order(2) antotated the KeycloakWebSecurityConfigurerAdapter</p>\n<p>so 2 filter chains gets registered and when I call the actuator endpoints the second filter chain fails as unauthorised 401</p>\n<p>is it possible to prevent handling the &quot;/actuator/**&quot; resorce path on the second filter chain?</p>\n<p>First actuator security configuration.</p>\n<pre><code>@Configuration\n@Order(1)\npublic class ActuatorWebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private final String username;\n    private final String password;\n    private final PasswordEncoder encoder;\n\n    public ActuatorWebSecurityConfig(\n            @Value(&quot;${spring.security.user.name}&quot;) String username,\n            @Value(&quot;${spring.security.user.password}&quot;) String password,\n            Optional&lt;PasswordEncoder&gt; encoder) {\n        this.username = username;\n        this.password = password;\n        this.encoder = encoder.orElseGet(PasswordEncoderFactories::createDelegatingPasswordEncoder);\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.inMemoryAuthentication()\n                .withUser(username)\n                .password(encoder.encode(password))\n                .roles(&quot;USER&quot;);\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n                .antMatcher(&quot;/actuator/**&quot;)\n                .authorizeRequests(authorize -&gt; authorize.anyRequest().authenticated())\n                .httpBasic(Customizer.withDefaults());\n    }\n}\n</code></pre>\n<p>second keycloak securoty configuration</p>\n<pre><code>@Order(2)\n@KeycloakConfiguration\npublic class SecurityConfig extends KeycloakWebSecurityConfigurerAdapter {\n\n    private final String swaggerUrl;\n    private final CorsFilter corsFilter;\n    private final CustomSecurityConfig customSecurityConfig;\n\n    @Autowired\n    public SecurityConfig(\n            @Value(&quot;${springdoc.swagger-ui.url:#{null}}&quot;) String swaggerUrl,\n            CorsFilter corsFilter,\n            CustomSecurityConfig customSecurityConfig) {\n        this.swaggerUrl = swaggerUrl;\n        this.corsFilter = corsFilter;\n        this.customSecurityConfig = customSecurityConfig;\n    }\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth) throws Exception {\n        KeycloakAuthenticationProvider keycloakProvider = keycloakAuthenticationProvider();\n        keycloakProvider.setGrantedAuthoritiesMapper(new SimpleAuthorityMapper());\n        auth.authenticationProvider(keycloakProvider);\n    }\n\n    @Bean\n    @Override\n    protected SessionAuthenticationStrategy sessionAuthenticationStrategy() {\n        return new NullAuthenticatedSessionStrategy();\n    }\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        super.configure(http);\n        http.csrf().disable()\n            .requestMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/actuator/**&quot;)));\n            .headers().frameOptions().disable()\n        .and()\n           .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeRequests()\n           .antMatchers(&quot;/public/**&quot;, &quot;/resources/**&quot;, &quot;/resources/public/**&quot;).permitAll()\n           .antMatchers(OPTIONS, &quot;/**&quot;).permitAll();\n        .authorizeRequests()\n           .antMatchers(&quot;/**&quot;)\n           .authenticated();\n    }\n}\n</code></pre>\n<p>I have tried with on keycloak config</p>\n<pre><code>.antMatchers(&quot;/actuator/**&quot;).permitAll();\n</code></pre>\n<p>and with</p>\n<pre><code>http.requestMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/actuator/**&quot;)));\n</code></pre>\n<p>but nothing works I receive unauthorised 401 for actuator</p>\n<p>the registered filter chains :</p>\n<pre><code>2022-01-18 17:38:44,688 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: Ant [pattern='/actuator/**'], [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@25c6a9de, org.springframework.security.web.context.SecurityContextPersistenceFilter@56f3f9da, org.springframework.security.web.header.HeaderWriterFilter@33dcbdc2, org.springframework.security.web.csrf.CsrfFilter@522fdf0c, org.springframework.security.web.authentication.logout.LogoutFilter@365ad794, org.springframework.security.web.authentication.www.BasicAuthenticationFilter@23df16cf, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@227cba85, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@b38dc7d, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@142422a4, org.springframework.security.web.session.SessionManagementFilter@2f0b7b6d, org.springframework.security.web.access.ExceptionTranslationFilter@74bca236, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@30587737]\n2022-01-18 17:38:44,691 INFO org.springframework.security.web.DefaultSecurityFilterChain [main] Creating filter chain: NegatedRequestMatcher [requestMatcher=Ant [pattern='/actuator/**']], [com.betex.auth.filters.CorsFilter@20a9f5fb, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@10e28d97, org.springframework.security.web.context.SecurityContextPersistenceFilter@c6b08a5, org.springframework.security.web.header.HeaderWriterFilter@5f05cd7e, org.keycloak.adapters.springsecurity.filter.KeycloakPreAuthActionsFilter@2a54c92e, org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticationProcessingFilter@55b62db8, org.springframework.security.web.authentication.logout.LogoutFilter@274f51ad, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@54980154, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@25874884, org.keycloak.adapters.springsecurity.filter.KeycloakSecurityContextRequestFilter@8cb7185, org.keycloak.adapters.springsecurity.filter.KeycloakAuthenticatedActionsFilter@4dac40b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@37d43b9b, org.springframework.security.web.session.SessionManagementFilter@11e8e183, org.springframework.security.web.access.ExceptionTranslationFilter@56f1db5f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@78543f0d]\n</code></pre>\n"},{"tags":["java","spring-boot","maven","properties","spring-boot-actuator"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1643300308,"post_id":70880939,"comment_id":125308282,"body_markdown":"Which version of spring boot do you use? Have you generated the build information in your configuration ? The endpoint might not only be `/info` ? Check the spring boot docs...","body":"Which version of spring boot do you use? Have you generated the build information in your configuration ? The endpoint might not only be <code>&#47;info</code> ? Check the spring boot docs..."},{"owner":{"account_id":2923083,"reputation":746,"user_id":2504962,"display_name":"Rashin"},"score":0,"creation_date":1643311454,"post_id":70880939,"comment_id":125312767,"body_markdown":"Both ```s_app.properties``` and ```sDBpools.properties``` can be found in the .jar? Are they in the same folder? Are you sure the content of the ```info.app.jwt.secret``` property can be found in any of the property files?","body":"Both <code>s_app.properties</code> and <code>sDBpools.properties</code> can be found in the .jar? Are they in the same folder? Are you sure the content of the <code>info.app.jwt.secret</code> property can be found in any of the property files?"},{"owner":{"account_id":2923083,"reputation":746,"user_id":2504962,"display_name":"Rashin"},"score":0,"creation_date":1643311824,"post_id":70880939,"comment_id":125312892,"body_markdown":"Maybe try to set the files in a single annotation e.g.: ```@PropertySource(value = [&quot;classpath:s_app.properties&quot;, &quot;classpath:sDBpools.properties&quot;])```","body":"Maybe try to set the files in a single annotation e.g.: <code>@PropertySource(value = [&quot;classpath:s_app.properties&quot;, &quot;classpath:sDBpools.properties&quot;])</code>"},{"owner":{"account_id":7145989,"reputation":370,"user_id":5467926,"accept_rate":38,"display_name":"Erdel"},"score":0,"creation_date":1643316494,"post_id":70880939,"comment_id":125314427,"body_markdown":"Property are available when I call them from differenct class. Bu when I call it from JwtToken class it returns null. I thought, class hierarchy or component scanning causes this and acted accordingly, but nothing changed. That class does not see the property. @Rashin","body":"Property are available when I call them from differenct class. Bu when I call it from JwtToken class it returns null. I thought, class hierarchy or component scanning causes this and acted accordingly, but nothing changed. That class does not see the property. @Rashin"},{"owner":{"account_id":7145989,"reputation":370,"user_id":5467926,"accept_rate":38,"display_name":"Erdel"},"score":1,"creation_date":1643316581,"post_id":70880939,"comment_id":125314462,"body_markdown":"@khmarbaise I handled the actuator problem. It was because of  exposing the info endpoint rule has changed with new spring boot version.","body":"@khmarbaise I handled the actuator problem. It was because of  exposing the info endpoint rule has changed with new spring boot version."}],"answers":[{"tags":[],"owner":{"account_id":7145989,"reputation":370,"user_id":5467926,"accept_rate":38,"display_name":"Erdel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643371910,"creation_date":1643371910,"answer_id":70893586,"question_id":70880939,"body_markdown":"Problem solved with the approved answer at below question.\r\nI had manually instantiated JwtTokenUtil class instead of autowiring it in the caller class. Probably I was not reaching proxy object at all.\r\n\r\nhttps://stackoverflow.com/questions/68012444/unable-to-read-properties-using-value-in-springboot-application","title":"Contents of property source files are not recognized in some classes","body":"<p>Problem solved with the approved answer at below question.\nI had manually instantiated JwtTokenUtil class instead of autowiring it in the caller class. Probably I was not reaching proxy object at all.</p>\n<p><a href=\"https://stackoverflow.com/questions/68012444/unable-to-read-properties-using-value-in-springboot-application\">Unable to read properties using @Value in SpringBoot application</a></p>\n"}],"owner":{"account_id":7145989,"reputation":370,"user_id":5467926,"accept_rate":38,"display_name":"Erdel"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":70893586,"answer_count":1,"score":0,"last_activity_date":1684792549,"creation_date":1643296212,"question_id":70880939,"body_markdown":"@Value anotation does not get the property from properties file when called from a specific class. \r\n\r\nPropertiesConfig:\r\n\r\n    @Configuration\r\n    @PropertySource(value = &quot;classpath:s_app.properties&quot;)\r\n    @PropertySource(value = &quot;classpath:sDBpools.properties&quot;)\r\n    public class PropertiesConfig {\r\n    }\r\n\r\n\r\nWhen I call property from ProjectInfoServiceImpl class it returns but not works from JwtTokenUtil class.\r\n\r\n**secret** returns null here:\r\n\r\n    @Component\r\n    @Log4j2\r\n    public class JwtTokenUtil implements Serializable {\r\n    \r\n        private static final long serialVersionUID = -1L;\r\n    \r\n        private static final int EXPIRATION_MILLISECONDS = 60 * 60 * 1000;\r\n    \r\n        @Value(&quot;${info.app.jwt.secret}&quot;)\r\n        private String secret;\r\n    \r\n        public  String generateToken(User user){\r\n            Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n            claims.put(&quot;authorities&quot;, user.getAuthorities());\r\n    \r\n            return generateToken(user.getUsername(), claims);\r\n        }\r\n    \r\n        public  String generateToken(UserDetails userDetails){\r\n            Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\r\n            claims.put(&quot;authorities&quot;, userDetails.getAuthorities());\r\n    \r\n            return generateToken(userDetails.getUsername(), claims);\r\n        }\r\n    \r\n        public  String generateToken(String username, Map&lt;String, Object&gt; claims) {\r\n    \r\n            return Jwts.builder()\r\n                    .setSubject(username)\r\n                    .setClaims(claims)\r\n                    .setExpiration(new Date((System.currentTimeMillis() + EXPIRATION_MILLISECONDS)))\r\n                    .setIssuedAt(new Date())\r\n                    .signWith(SignatureAlgorithm.HS256, secret)\r\n                    .compact();\r\n        }\r\n    \r\n        public  boolean validateToken(String username, String token){\r\n            return (username.equals(getUsernameFromToken(token)) &amp;&amp; !isExpired(token));\r\n        }\r\n    \r\n        public  String getUsernameFromToken(String token) {\r\n            return getClaimFromToken(token, Claims::getSubject);\r\n        }\r\n    \r\n        public  Date getExpirationdateFromToken(String token){\r\n            return getClaimFromToken(token, Claims::getExpiration);\r\n        }\r\n    \r\n        public  boolean isExpired(String token){\r\n            return !(new Date().before(getExpirationdateFromToken(token)));\r\n        }\r\n    \r\n        public  &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\r\n            final Claims claims = getAllClaimsFromToken(token);\r\n            return claimsResolver.apply(claims);\r\n        }\r\n    \r\n        private  Claims getAllClaimsFromToken(String token) {\r\n            return Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\r\n        }\r\n    \r\n    }\r\n\r\n\r\nBut in here it returns as expected:\r\n\r\n    @Service\r\n    @Log4j2\r\n    public class ProjectInfoServiceImpl implements ProjectInfoService {\r\n    \r\n        @Value(&quot;${info.app.jwt.secret}&quot;)\r\n        private String secret;\r\n\r\n        @Value(&quot;${s.version}&quot;)\r\n        private String version;\r\n    \r\n        @Value(&quot;${s.deployment.profile}&quot;)\r\n        private String deploymentProfile;\r\n    \r\n        @Value(&quot;${s.deployment.environment}&quot;)\r\n        private String deploymentEnvironment;\r\n    \r\n        @Override\r\n        public ProjectInfoDTO getProjectInfo() {\r\n            ProjectInfoDTO projectInfoDTO = new ProjectInfoDTO();\r\n            projectInfoDTO.setVersion(version);\r\n            projectInfoDTO.setDeploymentProfile(deploymentProfile);\r\n            projectInfoDTO.setDeploymentEnvironment(deploymentEnvironment);\r\n            return projectInfoDTO;\r\n        }\r\n    }\r\n\r\n\r\nHere is folder structure:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/4IRJG.png\r\n\r\n\r\nBesides actuator does not get info from info.app.version property of s_properties file. /info endpoint returns no information since it cant find the property.\r\n\r\n","title":"Contents of property source files are not recognized in some classes","body":"<p>@Value anotation does not get the property from properties file when called from a specific class.</p>\n<p>PropertiesConfig:</p>\n<pre><code>@Configuration\n@PropertySource(value = &quot;classpath:s_app.properties&quot;)\n@PropertySource(value = &quot;classpath:sDBpools.properties&quot;)\npublic class PropertiesConfig {\n}\n</code></pre>\n<p>When I call property from ProjectInfoServiceImpl class it returns but not works from JwtTokenUtil class.</p>\n<p><strong>secret</strong> returns null here:</p>\n<pre><code>@Component\n@Log4j2\npublic class JwtTokenUtil implements Serializable {\n\n    private static final long serialVersionUID = -1L;\n\n    private static final int EXPIRATION_MILLISECONDS = 60 * 60 * 1000;\n\n    @Value(&quot;${info.app.jwt.secret}&quot;)\n    private String secret;\n\n    public  String generateToken(User user){\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;authorities&quot;, user.getAuthorities());\n\n        return generateToken(user.getUsername(), claims);\n    }\n\n    public  String generateToken(UserDetails userDetails){\n        Map&lt;String, Object&gt; claims = new HashMap&lt;&gt;();\n        claims.put(&quot;authorities&quot;, userDetails.getAuthorities());\n\n        return generateToken(userDetails.getUsername(), claims);\n    }\n\n    public  String generateToken(String username, Map&lt;String, Object&gt; claims) {\n\n        return Jwts.builder()\n                .setSubject(username)\n                .setClaims(claims)\n                .setExpiration(new Date((System.currentTimeMillis() + EXPIRATION_MILLISECONDS)))\n                .setIssuedAt(new Date())\n                .signWith(SignatureAlgorithm.HS256, secret)\n                .compact();\n    }\n\n    public  boolean validateToken(String username, String token){\n        return (username.equals(getUsernameFromToken(token)) &amp;&amp; !isExpired(token));\n    }\n\n    public  String getUsernameFromToken(String token) {\n        return getClaimFromToken(token, Claims::getSubject);\n    }\n\n    public  Date getExpirationdateFromToken(String token){\n        return getClaimFromToken(token, Claims::getExpiration);\n    }\n\n    public  boolean isExpired(String token){\n        return !(new Date().before(getExpirationdateFromToken(token)));\n    }\n\n    public  &lt;T&gt; T getClaimFromToken(String token, Function&lt;Claims, T&gt; claimsResolver) {\n        final Claims claims = getAllClaimsFromToken(token);\n        return claimsResolver.apply(claims);\n    }\n\n    private  Claims getAllClaimsFromToken(String token) {\n        return Jwts.parser().setSigningKey(secret).parseClaimsJws(token).getBody();\n    }\n\n}\n</code></pre>\n<p>But in here it returns as expected:</p>\n<pre><code>@Service\n@Log4j2\npublic class ProjectInfoServiceImpl implements ProjectInfoService {\n\n    @Value(&quot;${info.app.jwt.secret}&quot;)\n    private String secret;\n\n    @Value(&quot;${s.version}&quot;)\n    private String version;\n\n    @Value(&quot;${s.deployment.profile}&quot;)\n    private String deploymentProfile;\n\n    @Value(&quot;${s.deployment.environment}&quot;)\n    private String deploymentEnvironment;\n\n    @Override\n    public ProjectInfoDTO getProjectInfo() {\n        ProjectInfoDTO projectInfoDTO = new ProjectInfoDTO();\n        projectInfoDTO.setVersion(version);\n        projectInfoDTO.setDeploymentProfile(deploymentProfile);\n        projectInfoDTO.setDeploymentEnvironment(deploymentEnvironment);\n        return projectInfoDTO;\n    }\n}\n</code></pre>\n<p>Here is folder structure:</p>\n<p><a href=\"https://i.stack.imgur.com/4IRJG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4IRJG.png\" alt=\"enter image description here\" /></a></p>\n<p>Besides actuator does not get info from info.app.version property of s_properties file. /info endpoint returns no information since it cant find the property.</p>\n"},{"tags":["java","spring-boot","authentication","spring-boot-actuator"],"comments":[{"owner":{"account_id":12810239,"reputation":1,"user_id":9268732,"display_name":"asifbutt"},"score":0,"creation_date":1656289911,"post_id":72766007,"comment_id":128528151,"body_markdown":"A note on hitting the url&#39;s from the cluster using curl returns success:\nhealthUrl: &quot;http://localhost:1234/health&quot; metricsUrl: &quot;http://localhost:1234/prometheus&quot;\ncurl -u user_name http://localhost:1324/health succeeds from command line.","body":"A note on hitting the url&#39;s from the cluster using curl returns success: healthUrl: &quot;<a href=\"http://localhost:1234/health\" rel=\"nofollow noreferrer\">localhost:1234/health</a>&quot; metricsUrl: &quot;<a href=\"http://localhost:1234/prometheus\" rel=\"nofollow noreferrer\">localhost:1234/prometheus</a>&quot; curl -u user_name <a href=\"http://localhost:1324/health\" rel=\"nofollow noreferrer\">localhost:1324/health</a> succeeds from command line."},{"owner":{"account_id":12810239,"reputation":1,"user_id":9268732,"display_name":"asifbutt"},"score":0,"creation_date":1656291518,"post_id":72766007,"comment_id":128528327,"body_markdown":"The 401 error is actually intermittent, the other error I may get is error connection refused. After stoping the back-end application restarting the error is now different. The login is still successful, but the calls to the metric and health url&#39;s are now returning:\nGET http://localhost:1234/health net::ERR_CONNECTION_REFUSED.\nGET http://localhost:1234/prometheus net::ERR_CONNECTION_REFUSED\nThis is happening for both the pre-flight requests as well as the actual requests.","body":"The 401 error is actually intermittent, the other error I may get is error connection refused. After stoping the back-end application restarting the error is now different. The login is still successful, but the calls to the metric and health url&#39;s are now returning: GET <a href=\"http://localhost:1234/health\" rel=\"nofollow noreferrer\">localhost:1234/health</a> net::ERR_CONNECTION_REFUSED. GET <a href=\"http://localhost:1234/prometheus\" rel=\"nofollow noreferrer\">localhost:1234/prometheus</a> net::ERR_CONNECTION_REFUSED This is happening for both the pre-flight requests as well as the actual requests."}],"answers":[{"comments":[{"owner":{"account_id":12810239,"reputation":1,"user_id":9268732,"display_name":"asifbutt"},"score":0,"creation_date":1656291846,"post_id":72766111,"comment_id":128528368,"body_markdown":"I have updated the original post which includes full spring security class. However note, that 401 error is intermittent, some times it is the 401 error and others it is the connection refused error. Local development with angular and spring boot back-end there is no such issue. Errors only occurring after deployment on test cluster.\nAlso note that my back-end controller is marked with annotation:\n@CrossOrigin(origins = &quot;*&quot;)","body":"I have updated the original post which includes full spring security class. However note, that 401 error is intermittent, some times it is the 401 error and others it is the connection refused error. Local development with angular and spring boot back-end there is no such issue. Errors only occurring after deployment on test cluster. Also note that my back-end controller is marked with annotation: @CrossOrigin(origins = &quot;*&quot;)"}],"tags":[],"owner":{"account_id":24537002,"reputation":26,"user_id":18447954,"display_name":"Lucas C"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656291465,"creation_date":1656291465,"answer_id":72766111,"question_id":72766007,"body_markdown":"Please provide the entire class with the security configuration, including all annotations, so we can understand it better.","title":"Spring Boot Back-End with Angular Front-End getting status and metrics from prometheus and health endpoint but 401","body":"<p>Please provide the entire class with the security configuration, including all annotations, so we can understand it better.</p>\n"},{"comments":[{"owner":{"account_id":12810239,"reputation":1,"user_id":9268732,"display_name":"asifbutt"},"score":0,"creation_date":1656335280,"post_id":72767262,"comment_id":128539395,"body_markdown":"SSL is not being used. On the cluster. I am able to curl end points like so:\ncurl -u user_name http://localhost:1234/prometheus. It is only from the browser that I am having issue accessing these end-points.\nBecause of relative URL&#39;s, when I launch http://my_cluster_name:8085/ I am redirected to the login page http://my_cluster_name:8085/login. The login is successful and redirects me to my dashboard page where my angular components make calls to these end-points, this is when I am getting these intermittent errors.","body":"SSL is not being used. On the cluster. I am able to curl end points like so: curl -u user_name <a href=\"http://localhost:1234/prometheus\" rel=\"nofollow noreferrer\">localhost:1234/prometheus</a>. It is only from the browser that I am having issue accessing these end-points. Because of relative URL&#39;s, when I launch <a href=\"http://my_cluster_name:8085/\" rel=\"nofollow noreferrer\">my_cluster_name:8085</a> I am redirected to the login page <a href=\"http://my_cluster_name:8085/login\" rel=\"nofollow noreferrer\">my_cluster_name:8085/login</a>. The login is successful and redirects me to my dashboard page where my angular components make calls to these end-points, this is when I am getting these intermittent errors."}],"tags":[],"owner":{"account_id":3965515,"reputation":2640,"user_id":3271600,"accept_rate":27,"display_name":"GvSharma"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656307031,"creation_date":1656307031,"answer_id":72767262,"question_id":72766007,"body_markdown":"Below are couple of suggestions to dive deep into this\r\n\r\n 1. assuming your prometheus itself is being served over HTTPS, can you\r\n    post your tls config? I am suspecting there is some issue with that,\r\n    also can you recheck your spring-actuator config in prometheus file.\r\n 2. Can you check the metric, health, info path in prometheus file.","title":"Spring Boot Back-End with Angular Front-End getting status and metrics from prometheus and health endpoint but 401","body":"<p>Below are couple of suggestions to dive deep into this</p>\n<ol>\n<li>assuming your prometheus itself is being served over HTTPS, can you\npost your tls config? I am suspecting there is some issue with that,\nalso can you recheck your spring-actuator config in prometheus file.</li>\n<li>Can you check the metric, health, info path in prometheus file.</li>\n</ol>\n"}],"owner":{"account_id":12810239,"reputation":1,"user_id":9268732,"display_name":"asifbutt"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":370,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1684792505,"creation_date":1656289822,"question_id":72766007,"body_markdown":"Running in to an issue with 401 error when deployed on cluster. Note the issue not occurring during local development. Issue occurs only once deployed on testing cluster. Currently the project is in only development/testing phase.\r\n\r\nBack-End config(Spring properties file):\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    server.port=8085\r\n    management.health.defaults.enabled=false\r\n    management.endpoint.health.show-details=&quot;ALWAYS&quot;\r\n    management.server.port=${management.port:1234}\r\n    management.endpoints.enabled-by-default=true\r\n    management.endpoints.web.base-path=/\r\n    management.endpoints.web.exposure.include=health, prometheus\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAngular:\r\nlogin is successful(using relative url&#39;s to port 8085 once deployed on the cluster) but after login my dashboard page makes calls to acutator health and prometheus end-points:\r\n\r\nthese are the URLs:\r\nhealthUrl: &quot;http://localhost:1234/health&quot;\r\nmetricsUrl: &quot;http://localhost:1234/prometheus&quot;\r\n\r\nSpring Security:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class ActuatorWebSecurityConfig extends WebSecurityConfigurerAdapter {\r\n\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .csrf().disable()\r\n                    .cors().configurationSource(corsConfigurationSource())\r\n                    .and()\r\n                    .authorizeRequests()\r\n                    .requestMatchers(EndpointRequest.to(HealthEndpoint.class, InfoEndpoint.class)).permitAll()\r\n                    .antMatchers(&quot;/**&quot;).authenticated()\r\n                    .and().httpBasic()\r\n                    .and()\r\n                    .addFilterBefore(new ForwardedHeaderFilter(), UsernamePasswordAuthenticationFilter.class);\r\n        }\r\n\r\n        @Bean\r\n        CorsConfigurationSource corsConfigurationSource() {\r\n            CorsConfiguration configuration = new CorsConfiguration();\r\n            configuration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));\r\n            configuration.setAllowCredentials(true);\r\n            configuration.setAllowedMethods(Arrays.asList(&quot;GET&quot;,&quot;POST&quot;,&quot;OPTIONS&quot;));\r\n            configuration.setAllowedHeaders(Collections.singletonList(&quot;*&quot;));\r\n            UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n            return source;\r\n        }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"Spring Boot Back-End with Angular Front-End getting status and metrics from prometheus and health endpoint but 401","body":"<p>Running in to an issue with 401 error when deployed on cluster. Note the issue not occurring during local development. Issue occurs only once deployed on testing cluster. Currently the project is in only development/testing phase.</p>\n<p>Back-End config(Spring properties file):</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>server.port=8085\nmanagement.health.defaults.enabled=false\nmanagement.endpoint.health.show-details=\"ALWAYS\"\nmanagement.server.port=${management.port:1234}\nmanagement.endpoints.enabled-by-default=true\nmanagement.endpoints.web.base-path=/\nmanagement.endpoints.web.exposure.include=health, prometheus</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Angular:\nlogin is successful(using relative url's to port 8085 once deployed on the cluster) but after login my dashboard page makes calls to acutator health and prometheus end-points:</p>\n<p>these are the URLs:\nhealthUrl: &quot;http://localhost:1234/health&quot;\nmetricsUrl: &quot;http://localhost:1234/prometheus&quot;</p>\n<p>Spring Security:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class ActuatorWebSecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .csrf().disable()\n                .cors().configurationSource(corsConfigurationSource())\n                .and()\n                .authorizeRequests()\n                .requestMatchers(EndpointRequest.to(HealthEndpoint.class, InfoEndpoint.class)).permitAll()\n                .antMatchers(\"/**\").authenticated()\n                .and().httpBasic()\n                .and()\n                .addFilterBefore(new ForwardedHeaderFilter(), UsernamePasswordAuthenticationFilter.class);\n    }\n\n    @Bean\n    CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOrigins(Arrays.asList(\"*\"));\n        configuration.setAllowCredentials(true);\n        configuration.setAllowedMethods(Arrays.asList(\"GET\",\"POST\",\"OPTIONS\"));\n        configuration.setAllowedHeaders(Collections.singletonList(\"*\"));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(\"/**\", configuration);\n        return source;\n    }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","spring-boot","eclipse","spring-boot-actuator","spring-tool-suite"],"comments":[{"owner":{"account_id":2082386,"reputation":6063,"user_id":1854124,"display_name":"Martin Lippert"},"score":0,"creation_date":1666627019,"post_id":74142537,"comment_id":130976582,"body_markdown":"Are you able to reproduce this with a vanilla STS 4.16.0 installation and a fresh workspace? If so, please file an issue at https://github.com/spring-projects/sts4/issues and attach a few steps how to reproduce this. That would be awesome help to investigate this in depth.","body":"Are you able to reproduce this with a vanilla STS 4.16.0 installation and a fresh workspace? If so, please file an issue at <a href=\"https://github.com/spring-projects/sts4/issues\" rel=\"nofollow noreferrer\">github.com/spring-projects/sts4/issues</a> and attach a few steps how to reproduce this. That would be awesome help to investigate this in depth."}],"answers":[{"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1666280617,"post_id":74142604,"comment_id":130904448,"body_markdown":"...you can examine until &quot;black out&quot;, but better: upgrade &quot;spring ide&quot;: &quot;This project has reached its EOL and is not maintained anymore. See the announcement on the blog for details: https://spring.io/blog/2022/06/14/goodbye-spring-ide-welcome-spring-tools-4&quot;","body":"...you can examine until &quot;black out&quot;, but better: upgrade &quot;spring ide&quot;: &quot;This project has reached its EOL and is not maintained anymore. See the announcement on the blog for details: <a href=\"https://spring.io/blog/2022/06/14/goodbye-spring-ide-welcome-spring-tools-4\" rel=\"nofollow noreferrer\">spring.io/blog/2022/06/14/&hellip;</a>&quot;"}],"tags":[],"owner":{"account_id":11976502,"reputation":420,"user_id":14686302,"display_name":"kernel"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666280156,"creation_date":1666280156,"answer_id":74142604,"question_id":74142537,"body_markdown":"You can examine this issue, Same problem appears.\r\n\r\nhttps://github.com/spring-attic/spring-ide/issues/182","title":"Eclipse IDE error - Ready State Poller has encontered a problem","body":"<p>You can examine this issue, Same problem appears.</p>\n<p><a href=\"https://github.com/spring-attic/spring-ide/issues/182\" rel=\"nofollow noreferrer\">https://github.com/spring-attic/spring-ide/issues/182</a></p>\n"}],"owner":{"account_id":16506868,"reputation":1,"user_id":12232566,"display_name":"alicia_tux"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1417,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684792449,"creation_date":1666279842,"question_id":74142537,"body_markdown":"I&#39;m getting this error with every project with actuator dependency &quot;Ready State Poller has encontered a problem: An internal error occurred during: &quot;Ready state poller&quot;.\r\nATTR_PROCESS_ID&quot;\r\n\r\n[Ready State Poller has encontered a problem: An internal error occurred during: &quot;Ready state poller&quot;.\r\nATTR_PROCESS_ID][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zM4qr.png\r\n\r\nNo stacktrace, project starts normally, just the eclipse IDE error message. How can I prevent this to happen?\r\n\r\nMy pom file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\t&lt;groupId&gt;demo.bootcamp&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;pruebasClientes&lt;/artifactId&gt;\r\n\t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\t&lt;name&gt;pruebasClientes&lt;/name&gt;\r\n\t&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\r\n\t&lt;properties&gt;\r\n\t\t&lt;java.version&gt;11&lt;/java.version&gt;\r\n\t\t&lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\r\n\t&lt;/properties&gt;\r\n\t&lt;dependencies&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t&lt;/dependencies&gt;\r\n\r\n\t&lt;build&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\nThis is a demo project for a bootcamp class, it has only 3 or 4 classes, I think my problem is in the config or in the pom.\r\nThanks. ","title":"Eclipse IDE error - Ready State Poller has encontered a problem","body":"<p>I'm getting this error with every project with actuator dependency &quot;Ready State Poller has encontered a problem: An internal error occurred during: &quot;Ready state poller&quot;.\nATTR_PROCESS_ID&quot;</p>\n<p><a href=\"https://i.stack.imgur.com/zM4qr.png\" rel=\"nofollow noreferrer\">Ready State Poller has encontered a problem: An internal error occurred during: &quot;Ready state poller&quot;.\nATTR_PROCESS_ID</a></p>\n<p>No stacktrace, project starts normally, just the eclipse IDE error message. How can I prevent this to happen?</p>\n<p>My pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\nxsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;2.7.5&lt;/version&gt;\n    &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n&lt;/parent&gt;\n&lt;groupId&gt;demo.bootcamp&lt;/groupId&gt;\n&lt;artifactId&gt;pruebasClientes&lt;/artifactId&gt;\n&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n&lt;name&gt;pruebasClientes&lt;/name&gt;\n&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n&lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;spring-cloud.version&gt;2020.0.4&lt;/spring-cloud.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n        &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n\n<p>This is a demo project for a bootcamp class, it has only 3 or 4 classes, I think my problem is in the config or in the pom.\nThanks.</p>\n"},{"tags":["java","spring-boot","gradle","spring-boot-actuator"],"answers":[{"tags":[],"owner":{"account_id":12439293,"reputation":159,"user_id":9058307,"display_name":"abetobing"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1675876328,"creation_date":1675876328,"answer_id":75389349,"question_id":75388023,"body_markdown":"Have you tried to enable it via yaml/properties?\r\n\r\n```properties\r\nmanagement.defaults.metrics.export.enabled=true\r\n```\r\n\r\n```yaml\r\nmanagement:\r\n  defaults:\r\n    metrics:\r\n      export:\r\n        enabled: true\r\n```\r\n\r\nReference: \r\nhttps://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.metrics","title":"How I can add endpoint actuator/metrics to my Java project?","body":"<p>Have you tried to enable it via yaml/properties?</p>\n<pre><code>management.defaults.metrics.export.enabled=true\n</code></pre>\n<pre class=\"lang-yaml prettyprint-override\"><code>management:\n  defaults:\n    metrics:\n      export:\n        enabled: true\n</code></pre>\n<p>Reference:\n<a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.metrics\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-boot/docs/current/reference/html/actuator.html#actuator.metrics</a></p>\n"}],"owner":{"account_id":25042032,"reputation":21,"user_id":21092608,"display_name":"Настя"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684792220,"creation_date":1675870065,"question_id":75388023,"body_markdown":"I implemented the:       \r\n``` implementation(&quot;org.springframework.boot:spring-boot-starter-actuator:3.0.1&quot;) ```\r\n\r\ndependency, \r\nand added: \r\n``management:\r\n  endpoints:\r\n    web:\r\n      exposure:\r\n        include: &quot;*&quot; ``\r\n    \r\nto `application.yml`,\r\nwhen I send requests to `POSTMAN`:\r\n\r\nhttp://localhost:8080/actuator/... \r\n\r\nall required endpoints are available except metrics\r\n\r\nHow I can add this?\r\n\r\nI tried to add:\r\n```\r\n@Autowired\r\n    private MeterRegistry meterRegistry;\r\n    @Bean\r\n    public CacheMetricsRegistrar cacheMetricsRegistrar() {\r\n        return new CacheMetricsRegistrar(meterRegistry, Lists.newArrayList(new CaffeineCacheMeterBinderProvider()));\r\n    } \r\n```\r\nbut I got an error &gt; Process `&#39;command &#39;C:/Program Files/Java/jdk-17/bin/java.exe&#39;&#39;` finished with non-zero exit value 1\r\n","title":"How I can add endpoint actuator/metrics to my Java project?","body":"<p>I implemented the:<br />\n<code>implementation(&quot;org.springframework.boot:spring-boot-starter-actuator:3.0.1&quot;)</code></p>\n<p>dependency,\nand added:\n<code>management: endpoints: web: exposure: include: &quot;*&quot; </code></p>\n<p>to <code>application.yml</code>,\nwhen I send requests to <code>POSTMAN</code>:</p>\n<p>http://localhost:8080/actuator/...</p>\n<p>all required endpoints are available except metrics</p>\n<p>How I can add this?</p>\n<p>I tried to add:</p>\n<pre><code>@Autowired\n    private MeterRegistry meterRegistry;\n    @Bean\n    public CacheMetricsRegistrar cacheMetricsRegistrar() {\n        return new CacheMetricsRegistrar(meterRegistry, Lists.newArrayList(new CaffeineCacheMeterBinderProvider()));\n    } \n</code></pre>\n<p>but I got an error &gt; Process <code>'command 'C:/Program Files/Java/jdk-17/bin/java.exe''</code> finished with non-zero exit value 1</p>\n"},{"tags":["java","token","openid-connect","openid"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1537107182,"post_id":52354738,"comment_id":91654521,"body_markdown":"This is going to be framework-specific.","body":"This is going to be framework-specific."},{"owner":{"account_id":9928788,"reputation":67,"user_id":7349475,"display_name":"George Thomas"},"score":0,"creation_date":1537192727,"post_id":52354738,"comment_id":91683337,"body_markdown":"Assuming its a native Java implementation, what is the ideal solution?","body":"Assuming its a native Java implementation, what is the ideal solution?"}],"answers":[{"comments":[{"owner":{"account_id":9928788,"reputation":67,"user_id":7349475,"display_name":"George Thomas"},"score":0,"creation_date":1539424864,"post_id":52790527,"comment_id":92504103,"body_markdown":"Thank for the reply. However I have not understood this &quot;clients don&#39;t need to authenticate themselves to get a code&quot;. In what scenario this will occur? In my understanding a relying party contacting authorization end point will force the user to authenticate if no user session exists.","body":"Thank for the reply. However I have not understood this &quot;clients don&#39;t need to authenticate themselves to get a code&quot;. In what scenario this will occur? In my understanding a relying party contacting authorization end point will force the user to authenticate if no user session exists."},{"owner":{"account_id":2123179,"reputation":10932,"user_id":1886012,"display_name":"bowmore"},"score":0,"creation_date":1539429157,"post_id":52790527,"comment_id":92505084,"body_markdown":"The client (or relying party) is not the same as the user. The authorization endpoint authenticates the user, and accepts a client_id to identify the client, but not the client_secret.","body":"The client (or relying party) is not the same as the user. The authorization endpoint authenticates the user, and accepts a client_id to identify the client, but not the client_secret."}],"tags":[],"owner":{"account_id":2123179,"reputation":10932,"user_id":1886012,"display_name":"bowmore"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1539415314,"creation_date":1539415314,"answer_id":52790527,"question_id":52354738,"body_markdown":"Storing it in a `HashMap` is a solution that does not scale, as internal memory is not shared accross server nodes.\r\n\r\nYou&#39;ll have to store it in some form of persistent store\r\n\r\n - a SQL database\r\n - a NoSQL database\r\n - a key value database\r\n\r\nNote that you&#39;ll not only need to be able to determine the user, for which it was made, but also the client, as clients don&#39;t need to authenticate themselves to get a code. Also know that you&#39;ll need to be able to determine which scopes are covered by a given code, and to detect double usage of a code, and in case of double usage, to revoke associated access tokens.\r\n\r\nOn the other hand, you need to be able to easily forget the codes again. They&#39;re short term use, and it&#39;s no use keeping them around after their ttl.\r\n\r\nYou&#39;ll have similar requirements for storing the access tokens, refresh and id tokens you produce, so it&#39;ll make sense to build something which can also be used for those.","title":"How to detect the user in OpenID Connect provider token endpoint","body":"<p>Storing it in a <code>HashMap</code> is a solution that does not scale, as internal memory is not shared accross server nodes.</p>\n\n<p>You'll have to store it in some form of persistent store</p>\n\n<ul>\n<li>a SQL database</li>\n<li>a NoSQL database</li>\n<li>a key value database</li>\n</ul>\n\n<p>Note that you'll not only need to be able to determine the user, for which it was made, but also the client, as clients don't need to authenticate themselves to get a code. Also know that you'll need to be able to determine which scopes are covered by a given code, and to detect double usage of a code, and in case of double usage, to revoke associated access tokens.</p>\n\n<p>On the other hand, you need to be able to easily forget the codes again. They're short term use, and it's no use keeping them around after their ttl.</p>\n\n<p>You'll have similar requirements for storing the access tokens, refresh and id tokens you produce, so it'll make sense to build something which can also be used for those.</p>\n"}],"owner":{"account_id":9928788,"reputation":67,"user_id":7349475,"display_name":"George Thomas"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":52790527,"answer_count":1,"score":0,"last_activity_date":1684792140,"creation_date":1537105320,"question_id":52354738,"body_markdown":"I&#39;m talking about the authorization_code grant type. In the authorization end point of the OpenID Connect provider we gave an authorization code to the relying party and then they make a back channel request (no browser involved) to the token end point with this code.\r\nSo the question is, how do I distinguish this user at the token end point? I guess no session exists for this call since it&#39;s a back channel request.\r\nWhat methods can be used to identify the user? Could a stored HashMap in memory with key as authorization_code be the ideal solution?","title":"How to detect the user in OpenID Connect provider token endpoint","body":"<p>I'm talking about the authorization_code grant type. In the authorization end point of the OpenID Connect provider we gave an authorization code to the relying party and then they make a back channel request (no browser involved) to the token end point with this code.\nSo the question is, how do I distinguish this user at the token end point? I guess no session exists for this call since it's a back channel request.\nWhat methods can be used to identify the user? Could a stored HashMap in memory with key as authorization_code be the ideal solution?</p>\n"},{"tags":["java","performance","artificial-intelligence","minmax"],"comments":[{"owner":{"account_id":3023214,"reputation":20361,"user_id":2563754,"display_name":"Seelenvirtuose"},"score":0,"creation_date":1547642325,"post_id":54216946,"comment_id":95260077,"body_markdown":"Really. This question is so unclear. Who did the upvotes?","body":"Really. This question is so unclear. Who did the upvotes?"},{"owner":{"account_id":12695174,"reputation":45207,"user_id":9223839,"display_name":"Joakim Danielson"},"score":0,"creation_date":1547642708,"post_id":54216946,"comment_id":95260264,"body_markdown":"Describe your problem clearly (we shouldn&#39;t have to know any game rules), make sure all relevant code is included and learn how to indent your code.","body":"Describe your problem clearly (we shouldn&#39;t have to know any game rules), make sure all relevant code is included and learn how to indent your code."},{"owner":{"account_id":9042085,"reputation":8178,"user_id":6735980,"accept_rate":100,"display_name":"Dennis Soemers"},"score":0,"creation_date":1547658507,"post_id":54216946,"comment_id":95269840,"body_markdown":"A search depth of 6 is not nearly enough to completely solve the game of Connect 4 from the initial game state. With a search depth of 6, you will find many lines of play that still end in a non-terminal game state. You don&#39;t seem to have a heuristic function (you simply always return `0` when the maximum search depth is reached), so pretty much any move is as good as any other move (as long as the AI can still guarantee not to lose within 6 moves, which it likely can even when playing in the first column and playing more smartly after that).","body":"A search depth of 6 is not nearly enough to completely solve the game of Connect 4 from the initial game state. With a search depth of 6, you will find many lines of play that still end in a non-terminal game state. You don&#39;t seem to have a heuristic function (you simply always return <code>0</code> when the maximum search depth is reached), so pretty much any move is as good as any other move (as long as the AI can still guarantee not to lose within 6 moves, which it likely can even when playing in the first column and playing more smartly after that)."},{"owner":{"account_id":6136522,"reputation":76953,"user_id":4785185,"display_name":"Prune"},"score":0,"creation_date":1547677152,"post_id":54216946,"comment_id":95278451,"body_markdown":"Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  [Minimal, complete, verifiable example](http://stackoverflow.com/help/mcve) applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem.  \nWe should be able to paste your posted code into a text file and reproduce the problem you described.\nStackOverflow is not a coding, review, or tutorial resource.  &quot;Not working&quot; and &quot;find the mistakes&quot; are not problem specifications.","body":"Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation, as suggested when you created this account.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem.   We should be able to paste your posted code into a text file and reproduce the problem you described. StackOverflow is not a coding, review, or tutorial resource.  &quot;Not working&quot; and &quot;find the mistakes&quot; are not problem specifications."},{"owner":{"account_id":15135646,"reputation":19,"user_id":10922235,"display_name":"Naomi"},"score":0,"creation_date":1547731245,"post_id":54216946,"comment_id":95298171,"body_markdown":"@JoakimDanielson well, I&#39;m trying to find a way to find the &quot;best&quot; move for the AI, which means the AI will be able to block a win/ win  within a depth of 6 for now. Sadly It doesn&#39;t and I can&#39;t find the problem. Maybe with the recursion, as I said I&#39;m not sure. Thanks!","body":"@JoakimDanielson well, I&#39;m trying to find a way to find the &quot;best&quot; move for the AI, which means the AI will be able to block a win/ win  within a depth of 6 for now. Sadly It doesn&#39;t and I can&#39;t find the problem. Maybe with the recursion, as I said I&#39;m not sure. Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":59521,"reputation":18723,"user_id":178082,"accept_rate":87,"display_name":"Nick Larsen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1547778441,"creation_date":1547778441,"answer_id":54246977,"question_id":54216946,"body_markdown":"Connect 4 is a solved game (spoiler, player 1 wins when played perfectly).  You can read all about how the solution was accomplished in [A Knowledge-based Approach of Connect-Four](http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.38.2778&amp;rep=rep1&amp;type=pdf).  It&#39;s quite a fascinating read because they did it at a time when computation resources were significantly harder to come by.\r\n\r\nThe general idea is to build a huge database of known value positions, then min-max with alpha-beta pruning until you reach one of the positions in the database.  Building this database was difficult due to computational and storage resources at the time this happened but you could probably achieve something similar today with less effort.\r\n\r\nWhile this doesn&#39;t directly answer your question, hopefully the reference will be a good place to start your research because it includes analysis of a lot of common situations in connect 4 which you can use to help you improve your evaluation function.","title":"Connect 4 code with min max find unique problem","body":"<p>Connect 4 is a solved game (spoiler, player 1 wins when played perfectly).  You can read all about how the solution was accomplished in <a href=\"http://citeseerx.ist.psu.edu/viewdoc/download?doi=10.1.1.38.2778&amp;rep=rep1&amp;type=pdf\" rel=\"nofollow noreferrer\">A Knowledge-based Approach of Connect-Four</a>.  It's quite a fascinating read because they did it at a time when computation resources were significantly harder to come by.</p>\n\n<p>The general idea is to build a huge database of known value positions, then min-max with alpha-beta pruning until you reach one of the positions in the database.  Building this database was difficult due to computational and storage resources at the time this happened but you could probably achieve something similar today with less effort.</p>\n\n<p>While this doesn't directly answer your question, hopefully the reference will be a good place to start your research because it includes analysis of a lot of common situations in connect 4 which you can use to help you improve your evaluation function.</p>\n"}],"owner":{"account_id":15135646,"reputation":19,"user_id":10922235,"display_name":"Naomi"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":399,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":54246977,"answer_count":1,"score":0,"last_activity_date":1684791655,"creation_date":1547641124,"question_id":54216946,"body_markdown":"I&#39;m looking for a way to solve Connect 4.  I&#39;m trying now with min max with a depth of 6.  It&#39;s not working and it keeps resulting in the same column (the first one).\r\n\r\nI&#39;m pretty desperate so I&#39;ll be very happy if you could find the mistakes.\r\n\r\n    public int findBestMove() {\r\n\r\n    \t\tArrayList&lt;ArrayList&lt;Integer&gt;&gt; myMoves = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\r\n\r\n    \t\tfor (int i = 0; i &lt; mWidth; i++) {\r\n    \t\t\tif (isColumnAvailable(i)) {\r\n    \t\t\tArrayList&lt;Integer&gt; t = new ArrayList&lt;&gt;();\r\n    \t\t\tt.add(i);\r\n    \t\t\tt.add(MinMax(6, mBoard, false));\r\n    \t\t\tmyMoves.add(t);\r\n    \t\t\t\r\n    \t\t}\r\n    \t\t}\r\n\r\n    \t\tint maxMoveScore = -10000;\r\n    \t\tint bestMove = 0;\r\n    \t\t\r\n    \t\tfor (int i = 0; i &lt; myMoves.size(); i++) {\r\n    \t\t\tint score = myMoves.get(i).get(1);\r\n    \t\t\tif (score &gt; maxMoveScore) {\r\n    \t\t\t\tmaxMoveScore = tryit;\r\n    \t\t\t\tbestMove = myMoves.get(i).get(0);\r\n    \t\t\t\t\r\n    \t\t\t}\r\n    \t\t\r\n    \t\t}\r\n    \t\t\r\n    \t\treturn bestMove;\r\n    \t}\r\n\r\n    \tprivate int MinMax(int depth,int[][] board, boolean maximizingPlayer) {\r\n    \t\tif (depth &lt;= 0)\r\n    \t\t\treturn 0;\r\n\r\n    \t\tint winner =checkForWin() ;\r\n    \t\tif (winner == 2)\r\n    \t\t\treturn depth;\r\n    \t\tif (winner == 1)\r\n    \t\t\treturn -depth;\r\n    \t\tif (isBoardFull()) {\r\n    \t\t\treturn 0;\r\n    \t\t}\r\n\r\n    \t\tint bestValue;\r\n    \t\t\r\n    \t\tif (maximizingPlayer)\r\n    \t\t\tbestValue = -1;\r\n    \t\telse\r\n    \t\t\tbestValue = 1;\r\n    \t\tfor (int i = 0; i &lt; mWidth; i++) {\r\n    \t\t\tif (!isColumnAvailable(i))\r\n    \t\t\t\tcontinue;\r\n    \t\t\tint v = MinMax(depth - 1, board, !maximizingPlayer);\r\n    \t\t\tbestValue = maximizingPlayer ? Math.max(bestValue, v) : Math.min(bestValue, v);\r\n    \t\t\t\r\n    \t\t}\r\n\r\n    \t\treturn bestValue;\r\n\r\n    \t}\r\n\r\n2- is the number of the AI  \r\n1- is the human player  \r\n0- is empty\r\n","title":"Connect 4 code with min max find unique problem","body":"<p>I'm looking for a way to solve Connect 4.  I'm trying now with min max with a depth of 6.  It's not working and it keeps resulting in the same column (the first one).</p>\n<p>I'm pretty desperate so I'll be very happy if you could find the mistakes.</p>\n<pre><code>public int findBestMove() {\n\n        ArrayList&lt;ArrayList&lt;Integer&gt;&gt; myMoves = new ArrayList&lt;ArrayList&lt;Integer&gt;&gt;();\n\n        for (int i = 0; i &lt; mWidth; i++) {\n            if (isColumnAvailable(i)) {\n            ArrayList&lt;Integer&gt; t = new ArrayList&lt;&gt;();\n            t.add(i);\n            t.add(MinMax(6, mBoard, false));\n            myMoves.add(t);\n            \n        }\n        }\n\n        int maxMoveScore = -10000;\n        int bestMove = 0;\n        \n        for (int i = 0; i &lt; myMoves.size(); i++) {\n            int score = myMoves.get(i).get(1);\n            if (score &gt; maxMoveScore) {\n                maxMoveScore = tryit;\n                bestMove = myMoves.get(i).get(0);\n                \n            }\n        \n        }\n        \n        return bestMove;\n    }\n\n    private int MinMax(int depth,int[][] board, boolean maximizingPlayer) {\n        if (depth &lt;= 0)\n            return 0;\n\n        int winner =checkForWin() ;\n        if (winner == 2)\n            return depth;\n        if (winner == 1)\n            return -depth;\n        if (isBoardFull()) {\n            return 0;\n        }\n\n        int bestValue;\n        \n        if (maximizingPlayer)\n            bestValue = -1;\n        else\n            bestValue = 1;\n        for (int i = 0; i &lt; mWidth; i++) {\n            if (!isColumnAvailable(i))\n                continue;\n            int v = MinMax(depth - 1, board, !maximizingPlayer);\n            bestValue = maximizingPlayer ? Math.max(bestValue, v) : Math.min(bestValue, v);\n            \n        }\n\n        return bestValue;\n\n    }\n</code></pre>\n<p>2- is the number of the AI<br />\n1- is the human player<br />\n0- is empty</p>\n"},{"tags":["java","xml","tomcat","genexus"],"answers":[{"tags":[],"owner":{"account_id":5292736,"reputation":25,"user_id":4224786,"display_name":"Sebasti&#225;n Baioni"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1466537989,"creation_date":1466513424,"answer_id":37944957,"question_id":37925795,"body_markdown":"Check in your form the Uploadify property &quot;Size Limit&quot;.\r\n\r\nIn web.config check `maxRequestLength` in `&lt;system.web&gt;` and the `requestLimits maxAllowedContentLength` in `&lt;security&gt;`.\r\n\r\nExample:\r\n\r\n    &lt;system.web&gt;\r\n     &lt;httpRuntime requestValidationMode=&quot;2.0&quot; executionTimeout=&quot;600&quot; maxRequestLength=&quot;50000&quot;/&gt;\r\n    &lt;/system.web&gt;\r\n\r\n    &lt;system.webServer&gt;\r\n     &lt;security&gt;\r\n      &lt;requestFiltering&gt;\r\n       &lt;hiddenSegments&gt;\r\n        &lt;add segment=&quot;PrivateTempStorage&quot; /&gt;\r\n        &lt;add segment=&quot;private&quot; /&gt;\r\n       &lt;/hiddenSegments&gt;\r\n       &lt;requestLimits maxAllowedContentLength=&quot;50000000&quot;/&gt;\r\n      &lt;/requestFiltering&gt;\r\n     &lt;/security&gt;\r\n    &lt;/system.webServer&gt;","title":"Genexus Uploadify not working with large files","body":"<p>Check in your form the Uploadify property \"Size Limit\".</p>\n\n<p>In web.config check <code>maxRequestLength</code> in <code>&lt;system.web&gt;</code> and the <code>requestLimits maxAllowedContentLength</code> in <code>&lt;security&gt;</code>.</p>\n\n<p>Example:</p>\n\n<pre><code>&lt;system.web&gt;\n &lt;httpRuntime requestValidationMode=\"2.0\" executionTimeout=\"600\" maxRequestLength=\"50000\"/&gt;\n&lt;/system.web&gt;\n\n&lt;system.webServer&gt;\n &lt;security&gt;\n  &lt;requestFiltering&gt;\n   &lt;hiddenSegments&gt;\n    &lt;add segment=\"PrivateTempStorage\" /&gt;\n    &lt;add segment=\"private\" /&gt;\n   &lt;/hiddenSegments&gt;\n   &lt;requestLimits maxAllowedContentLength=\"50000000\"/&gt;\n  &lt;/requestFiltering&gt;\n &lt;/security&gt;\n&lt;/system.webServer&gt;\n</code></pre>\n"}],"owner":{"account_id":2855565,"reputation":7,"user_id":2451912,"display_name":"Cyberwarrior"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1441,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1684791155,"creation_date":1466434986,"question_id":37925795,"body_markdown":"I have a website made in Genexus with a transaction which includes a Uploadify control in it, running on a local Tomcat server, and it works fine with small files but when I try to upload a bigger one (&gt; 50 MB) it appears to upload the file but then returns to the transaction screen.\r\n\r\nI ran a test using Developer Tools included in Google Chrome, and I noticed that, when I try to upload large files, a &quot;500 - Internal Server Error&quot; occurs. Clicking on the corresponding line in the &quot;Network&quot; tab gives this:\r\n\r\n    HTTP Status 500 -\r\n\r\n    type Exception report\r\n\r\n    message\r\n\r\n    description The server encountered an internal error () that prevented it from fulfilling this request.\r\n\r\n    exception\r\n\r\n    javax.servlet.ServletException: java.lang.NoSuchMethodError: org.apache.commons.fileupload.DefaultFileItem.cleanup()V\r\n\tat com.genexus.webpanels.HttpContextWeb.cleanup(Unknown Source)\r\n\tat com.genexus.webpanels.GXWebObjectBase.doExecute(Unknown Source)\r\n\tat br.com.procempa.spm.cauge.texpedientessoliceventosalter.doExecute(texpedientessoliceventosalter.java:21)\r\n\tat com.genexus.webpanels.GXWebObjectStub.callExecute(Unknown Source)\r\n\tat com.genexus.webpanels.GXWebObjectStub.doPost(Unknown Source)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\tat org.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:420)\r\n\tat org.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java:170)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n\tat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\r\n\tat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:873)\r\n\tat org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\r\n\tat org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\r\n\tat org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\r\n\tat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\r\n\tat java.lang.Thread.run(Unknown Source)\r\n\r\n\tcom.genexus.webpanels.GXWebObjectStub.callExecute(Unknown Source)\r\n\tcom.genexus.webpanels.GXWebObjectStub.doPost(Unknown Source)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n\torg.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:420)\r\n\torg.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java:170)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n\tjavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\r\n    note The full stack trace of the root cause is available in the Apache Tomcat/5.5.28 logs.\r\n\r\n    Apache Tomcat/5.5.28\r\n\r\nSearching on some websites, I found suggestions to edit the application&#39;s web.xml adding the following tag inside the &amp;lt;servlet&amp;gt; tag in tomcat-directory/application-directory/WEB-INF/web.xml:\r\n\r\n    &lt;multipart-config&gt;\r\n        &lt;max-file-size&gt;1073741824&lt;/max-file-size&gt;\r\n\t\t&lt;max-request-size&gt;1073741824&lt;/max-request-size&gt;\r\n\t\t&lt;file-size-threshold&gt;0&lt;/file-size-threshold&gt;\r\n    &lt;/multipart-config&gt;\r\n\r\nAnd then edited tomcat-directory/conf/server.xml to make the Connector tag for port 8080 look like this:\r\n\r\n    &lt;Connector port=&quot;8080&quot; maxHttpHeaderSize=&quot;4096&quot; maxPostSize=&quot;1073741824&quot;\r\n               maxThreads=&quot;150&quot; minSpareThreads=&quot;25&quot; maxSpareThreads=&quot;75&quot;\r\n               enableLookups=&quot;false&quot; redirectPort=&quot;8443&quot; acceptCount=&quot;100&quot;\r\n               connectionTimeout=&quot;600000&quot; disableUploadTimeout=&quot;true&quot; /&gt;\r\n\r\nAnd then restarted Tomcat, but yet it gives me the same error. Am I missing anything else?\r\n\r\nThanks in advance!\r\n\r\n**EDIT:** Actually, my application is a Java one, and the control used is not a true &quot;Uploadify&quot;, it has class &quot;Image&quot; and is linked to a BLOB field in the database. Isn&#39;t it the case to change the field type in the transaction form?","title":"Genexus Uploadify not working with large files","body":"<p>I have a website made in Genexus with a transaction which includes a Uploadify control in it, running on a local Tomcat server, and it works fine with small files but when I try to upload a bigger one (> 50 MB) it appears to upload the file but then returns to the transaction screen.</p>\n\n<p>I ran a test using Developer Tools included in Google Chrome, and I noticed that, when I try to upload large files, a \"500 - Internal Server Error\" occurs. Clicking on the corresponding line in the \"Network\" tab gives this:</p>\n\n<pre><code>HTTP Status 500 -\n\ntype Exception report\n\nmessage\n\ndescription The server encountered an internal error () that prevented it from fulfilling this request.\n\nexception\n\njavax.servlet.ServletException: java.lang.NoSuchMethodError: org.apache.commons.fileupload.DefaultFileItem.cleanup()V\nat com.genexus.webpanels.HttpContextWeb.cleanup(Unknown Source)\nat com.genexus.webpanels.GXWebObjectBase.doExecute(Unknown Source)\nat br.com.procempa.spm.cauge.texpedientessoliceventosalter.doExecute(texpedientessoliceventosalter.java:21)\nat com.genexus.webpanels.GXWebObjectStub.callExecute(Unknown Source)\nat com.genexus.webpanels.GXWebObjectStub.doPost(Unknown Source)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:420)\nat org.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java:170)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\nat javax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)\nat org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:873)\nat org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)\nat org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)\nat org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)\nat org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)\nat java.lang.Thread.run(Unknown Source)\n\ncom.genexus.webpanels.GXWebObjectStub.callExecute(Unknown Source)\ncom.genexus.webpanels.GXWebObjectStub.doPost(Unknown Source)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\norg.apache.catalina.servlets.InvokerServlet.serveRequest(InvokerServlet.java:420)\norg.apache.catalina.servlets.InvokerServlet.doPost(InvokerServlet.java:170)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:647)\njavax.servlet.http.HttpServlet.service(HttpServlet.java:729)\nnote The full stack trace of the root cause is available in the Apache Tomcat/5.5.28 logs.\n\nApache Tomcat/5.5.28\n</code></pre>\n\n<p>Searching on some websites, I found suggestions to edit the application's web.xml adding the following tag inside the &lt;servlet&gt; tag in tomcat-directory/application-directory/WEB-INF/web.xml:</p>\n\n<pre><code>&lt;multipart-config&gt;\n    &lt;max-file-size&gt;1073741824&lt;/max-file-size&gt;\n    &lt;max-request-size&gt;1073741824&lt;/max-request-size&gt;\n    &lt;file-size-threshold&gt;0&lt;/file-size-threshold&gt;\n&lt;/multipart-config&gt;\n</code></pre>\n\n<p>And then edited tomcat-directory/conf/server.xml to make the Connector tag for port 8080 look like this:</p>\n\n<pre><code>&lt;Connector port=\"8080\" maxHttpHeaderSize=\"4096\" maxPostSize=\"1073741824\"\n           maxThreads=\"150\" minSpareThreads=\"25\" maxSpareThreads=\"75\"\n           enableLookups=\"false\" redirectPort=\"8443\" acceptCount=\"100\"\n           connectionTimeout=\"600000\" disableUploadTimeout=\"true\" /&gt;\n</code></pre>\n\n<p>And then restarted Tomcat, but yet it gives me the same error. Am I missing anything else?</p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>EDIT:</strong> Actually, my application is a Java one, and the control used is not a true \"Uploadify\", it has class \"Image\" and is linked to a BLOB field in the database. Isn't it the case to change the field type in the transaction form?</p>\n"},{"tags":["java","spring","spring-ws","wss4j"],"owner":{"account_id":2308123,"reputation":67,"user_id":2026932,"display_name":"WebScript"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684790913,"creation_date":1684790913,"question_id":76310018,"body_markdown":"I am struggling with an old project which was upgraded to `Spring 5.3.23` , `Spring WS 3.1.6` and `WSS4J 2.4.1` . It is running in `WildFly 26.1.2` with `SAAJ 1.5.3` builtin\r\n\r\nThe project contains some REST Spring Controllers and one SOAP server endpoint with Wss4jSecurityInterceptor. After upgrade the SOAP endpoint returns error\r\n\r\n    WRONG_DOCUMENT_ERR: A node is used in a different document than the one that created it.\r\n\r\nWhen I remove the security interceptor it returns the response without issue. Due to separate logging issues I cannot get to the stacktrace. Does anybody have any clue? I tried various versions mixed but it is always the same. Thanks","title":"Spring WS exception during security header generation","body":"<p>I am struggling with an old project which was upgraded to <code>Spring 5.3.23</code> , <code>Spring WS 3.1.6</code> and <code>WSS4J 2.4.1</code> . It is running in <code>WildFly 26.1.2</code> with <code>SAAJ 1.5.3</code> builtin</p>\n<p>The project contains some REST Spring Controllers and one SOAP server endpoint with Wss4jSecurityInterceptor. After upgrade the SOAP endpoint returns error</p>\n<pre><code>WRONG_DOCUMENT_ERR: A node is used in a different document than the one that created it.\n</code></pre>\n<p>When I remove the security interceptor it returns the response without issue. Due to separate logging issues I cannot get to the stacktrace. Does anybody have any clue? I tried various versions mixed but it is always the same. Thanks</p>\n"},{"tags":["java","varhandle"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1684791393,"post_id":76310008,"comment_id":134565886,"body_markdown":"I believe spec wise the cAS call can continue to fail as the `getOpaque()` call returns the &#39;wrong&#39; value for millions of loops, in theory. I would go with trying this operation just once, and if it fails, do the loop you pasted, but with `getVolatile` instead of `getOpaque`.","body":"I believe spec wise the cAS call can continue to fail as the <code>getOpaque()</code> call returns the &#39;wrong&#39; value for millions of loops, in theory. I would go with trying this operation just once, and if it fails, do the loop you pasted, but with <code>getVolatile</code> instead of <code>getOpaque</code>."},{"owner":{"account_id":9760,"reputation":85860,"user_id":18157,"accept_rate":100,"display_name":"Jim Garrison"},"score":0,"creation_date":1684801473,"post_id":76310008,"comment_id":134566867,"body_markdown":"This belongs on https://codereview.stackexchange.com/","body":"This belongs on <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1695906508,"post_id":76310008,"comment_id":136088287,"body_markdown":"Opaque mode is enough if you only care about the counter. If you want to establish *happens-before* relationships between incrementing the counter and things done between the increments, you need a stronger mode.","body":"Opaque mode is enough if you only care about the counter. If you want to establish <i>happens-before</i> relationships between incrementing the counter and things done between the increments, you need a stronger mode."}],"owner":{"account_id":43232,"reputation":13925,"user_id":126280,"accept_rate":60,"display_name":"Cheetah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1684790732,"creation_date":1684790732,"question_id":76310008,"body_markdown":"My code:\r\n\r\n    static final VarHandle COUNTER_VAR_HANDLE = //;\r\n    static final int MAX = 10;\r\n\r\n    int counter = -1;\r\n    \r\n    int getNext() {\r\n      var next = 0;\r\n      var prev = 0;\r\n    \r\n      do {\r\n        prev = (int) COUNTER_VAR_HANDLE.getOpaque(this);\r\n        next = (prev + 1) % MAX;\r\n      } while (!COUNTER_VAR_HANDLE.compareAndSet(this, prev, next));\r\n    \r\n      return next;\r\n    }\r\n\r\nTrying to understand VarHandles and their different uses. Given a recent architecture (e.g. x86), is this the correct implementation of a getNext() method?\r\n\r\nIf my reading serves me correctly there is no benefit to using `weakCompareAndSet` on a modern achitecture but I wasn&#39;t sure whether I needed `getVolatile()` instead of `getOpaque()` in this circumstance. Am I going to run into issues with multiple threads calling `getNext()`?","title":"Have I implemented an atomic circular counter correctly using VarHandles","body":"<p>My code:</p>\n<pre><code>static final VarHandle COUNTER_VAR_HANDLE = //;\nstatic final int MAX = 10;\n\nint counter = -1;\n\nint getNext() {\n  var next = 0;\n  var prev = 0;\n\n  do {\n    prev = (int) COUNTER_VAR_HANDLE.getOpaque(this);\n    next = (prev + 1) % MAX;\n  } while (!COUNTER_VAR_HANDLE.compareAndSet(this, prev, next));\n\n  return next;\n}\n</code></pre>\n<p>Trying to understand VarHandles and their different uses. Given a recent architecture (e.g. x86), is this the correct implementation of a getNext() method?</p>\n<p>If my reading serves me correctly there is no benefit to using <code>weakCompareAndSet</code> on a modern achitecture but I wasn't sure whether I needed <code>getVolatile()</code> instead of <code>getOpaque()</code> in this circumstance. Am I going to run into issues with multiple threads calling <code>getNext()</code>?</p>\n"},{"tags":["java","kotlin","gradle","nexus","maven-publish"],"owner":{"account_id":19581210,"reputation":23,"user_id":14330235,"display_name":"morohon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684790443,"creation_date":1684790443,"question_id":76309989,"body_markdown":"I&#39;m trying to publish an artifact to a corporate repository. I set up the maven-publish plugin as follows (I use build.gradle.kts):\r\n\r\n```kotlin\r\nplugins {\r\n\t`java-library`\r\n\t`maven-publish`\r\n}\r\n\r\nval nexusUsername: String by project\r\nval nexusPassword: String by project\r\nval nexusSnapshotRepositoryUrl: String by project\r\nval nexusRepositoryUrl: String by project\r\n\r\npublishing {\r\n\tpublications {\r\n\t\tregister(&quot;mavenJava&quot;, MavenPublication::class) {\r\n\t\t\tfrom(components[&quot;java&quot;])\r\n\t\t}\r\n\t}\r\n\trepositories {\r\n\t\tmaven {\r\n\t\t\tcredentials {\r\n\t\t\t\tusername = nexusUsername\r\n\t\t\t\tpassword = nexusPassword\r\n\t\t\t}\r\n\t\t\turl = uri(nexusRepositoryUrl)\r\n\t\t\tmavenContent {\r\n\t\t\t\treleasesOnly()\r\n\t\t\t}\r\n\t\t}\r\n\t\tmaven {\r\n\t\t\tcredentials {\r\n\t\t\t\tusername = nexusUsername\r\n\t\t\t\tpassword = nexusPassword\r\n\t\t\t}\r\n\t\t\turl = uri(nexusSnapshotRepositoryUrl)\r\n\t\t\tmavenContent {\r\n\t\t\t\tsnapshotsOnly()\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n```\r\n\r\ngradle.properties:\r\n```\r\nversion=0.0.1\r\nnexusRepositoryUrl=https://nexus.custom/repository/release/\r\nnexusSnapshotRepositoryUrl=https://nexus.custom/repository/snapshot/\r\nnexusUsername=\r\nnexusPassword=\r\n```\r\n\r\nFor some reason, when the publish task is called, mavenContent is ignored for me - the publication always tries to execute to the last maven repository, which is specified ignoring the version (i.e., the application version is 0.0.1, while the publication is carried out in the snapshot repository, if the repositories are swapped, the publication will be in the release repository).\r\nI&#39;m expecting a behavior in which when I run the publish task, I will have the correct repository determined based on the version, is this not how it should work?\r\n\r\nWhen I start the task, I get information in the log about an attempt to publish to the repository snapshots: \r\n`./gradlew publish`\r\n&gt; Execution failed for task &#39;:publishMavenJavaPublicationToMaven2Repository&#39;.\r\n&gt; Failed to publish publication &#39;mavenJava&#39; to repository &#39;maven2&#39;\r\n   &gt; Could not PUT &#39;https://nexus.custom/repository/snapshot/ru/example/0.0.1/some-example-app-0.0.1.jar&#39;. Received status code 400 from server: Bad Request","title":"Filter mavenContent not working in maven-publish","body":"<p>I'm trying to publish an artifact to a corporate repository. I set up the maven-publish plugin as follows (I use build.gradle.kts):</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    `java-library`\n    `maven-publish`\n}\n\nval nexusUsername: String by project\nval nexusPassword: String by project\nval nexusSnapshotRepositoryUrl: String by project\nval nexusRepositoryUrl: String by project\n\npublishing {\n    publications {\n        register(&quot;mavenJava&quot;, MavenPublication::class) {\n            from(components[&quot;java&quot;])\n        }\n    }\n    repositories {\n        maven {\n            credentials {\n                username = nexusUsername\n                password = nexusPassword\n            }\n            url = uri(nexusRepositoryUrl)\n            mavenContent {\n                releasesOnly()\n            }\n        }\n        maven {\n            credentials {\n                username = nexusUsername\n                password = nexusPassword\n            }\n            url = uri(nexusSnapshotRepositoryUrl)\n            mavenContent {\n                snapshotsOnly()\n            }\n        }\n    }\n}\n</code></pre>\n<p>gradle.properties:</p>\n<pre><code>version=0.0.1\nnexusRepositoryUrl=https://nexus.custom/repository/release/\nnexusSnapshotRepositoryUrl=https://nexus.custom/repository/snapshot/\nnexusUsername=\nnexusPassword=\n</code></pre>\n<p>For some reason, when the publish task is called, mavenContent is ignored for me - the publication always tries to execute to the last maven repository, which is specified ignoring the version (i.e., the application version is 0.0.1, while the publication is carried out in the snapshot repository, if the repositories are swapped, the publication will be in the release repository).\nI'm expecting a behavior in which when I run the publish task, I will have the correct repository determined based on the version, is this not how it should work?</p>\n<p>When I start the task, I get information in the log about an attempt to publish to the repository snapshots:\n<code>./gradlew publish</code></p>\n<blockquote>\n<p>Execution failed for task ':publishMavenJavaPublicationToMaven2Repository'.\nFailed to publish publication 'mavenJava' to repository 'maven2'\nCould not PUT 'https://nexus.custom/repository/snapshot/ru/example/0.0.1/some-example-app-0.0.1.jar'. Received status code 400 from server: Bad Request</p>\n</blockquote>\n"},{"tags":["java","mongodb","list","kotlin","bson"],"comments":[{"owner":{"account_id":184203,"reputation":3430,"user_id":420096,"accept_rate":71,"display_name":"Sombriks"},"score":0,"creation_date":1684418870,"post_id":76281550,"comment_id":134517137,"body_markdown":"i didn&#39;t found a direct solution so i was applying specific converters for my queries\nList&lt;Document&gt; results = dao.find(CollectionNames.PESSOA_JURIDICA, filter(search), ascending(sortBy), limit, offset);\n        return results.stream().map(d -&gt; converter.read(PessoaJuridicaDocument.class, d)).collect(Collectors.toList());\n\nsee org.springframework.data.mongodb.core.convert.MappingMongoConverter for details","body":"i didn&#39;t found a direct solution so i was applying specific converters for my queries List&lt;Document&gt; results = dao.find(CollectionNames.PESSOA_JURIDICA, filter(search), ascending(sortBy), limit, offset);         return results.stream().map(d -&gt; converter.read(PessoaJuridicaDocument.class, d)).collect(Collectors.toList());  see org.springframework.data.mongodb.core.convert.MappingMongoCo&zwnj;&#8203;nverter for details"},{"owner":{"account_id":16962007,"reputation":1665,"user_id":12268910,"display_name":"java12399900"},"score":0,"creation_date":1684762539,"post_id":76281550,"comment_id":134559921,"body_markdown":"What is the converter class here? Can you add an answer so that I can accept it, thanks","body":"What is the converter class here? Can you add an answer so that I can accept it, thanks"}],"answers":[{"tags":[],"owner":{"account_id":184203,"reputation":3430,"user_id":420096,"accept_rate":71,"display_name":"Sombriks"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684790335,"creation_date":1684790335,"answer_id":76309981,"question_id":76281550,"body_markdown":"The converter class can help you on that:\r\n\r\n    package simple.sample.mongo.dao;\r\n    \r\n    import com.mongodb.client.model.Filters;\r\n    import com.mongodb.client.model.Sorts;\r\n    import org.springframework.data.mongodb.core.convert.MappingMongoConverter;\r\n    import org.springframework.stereotype.Component;\r\n    import simple.sample.mongo.dao.base.BaseDAO;\r\n    import simple.sample.mongo.models.TodoDocument;\r\n\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n\r\n    @Component\r\n    public class TodoDAO {\r\n\r\n        private final MappingMongoConverter converter;\r\n        private final BaseDAO dao;\r\n\r\n        public TodoDAO(MappingMongoConverter converter, BaseDAO dao) {\r\n            this.converter = converter;\r\n            this.dao = dao;\r\n        }\r\n\r\n        // see for more converters https://github.com/spring-projects/spring-data-examples/tree/main/mongodb/example/src/main/java/example/springdata/mongodb/converters\r\n        public List&lt;TodoDocument&gt; find(String description) {\r\n            return dao.find(&quot;todos&quot;,\r\n                            Filters.regex(&quot;description&quot;, description),\r\n                            Sorts.ascending(&quot;description&quot;), 100, 0)\r\n                    .stream().map(doc -&gt; converter.read(TodoDocument.class, doc))\r\n                    .collect(Collectors.toList());\r\n        }\r\n\r\n    }\r\n\r\nWhere `TodoDocument` is a mongo collection mapped to java class.\r\n\r\nYou can either use `TodoRepository` to query the document store or get connection from `MongoTemplate` in order to get access to more flexible queries.\r\n\r\nThe more complete sourcecode can be found [in this link][1]\r\n\r\n\r\n  [1]: https://github.com/sombriks/simple-sample-mongo","title":"MongoDB Document - how to convert into model class?","body":"<p>The converter class can help you on that:</p>\n<pre><code>package simple.sample.mongo.dao;\n\nimport com.mongodb.client.model.Filters;\nimport com.mongodb.client.model.Sorts;\nimport org.springframework.data.mongodb.core.convert.MappingMongoConverter;\nimport org.springframework.stereotype.Component;\nimport simple.sample.mongo.dao.base.BaseDAO;\nimport simple.sample.mongo.models.TodoDocument;\n\nimport java.util.List;\nimport java.util.stream.Collectors;\n\n@Component\npublic class TodoDAO {\n\n    private final MappingMongoConverter converter;\n    private final BaseDAO dao;\n\n    public TodoDAO(MappingMongoConverter converter, BaseDAO dao) {\n        this.converter = converter;\n        this.dao = dao;\n    }\n\n    // see for more converters https://github.com/spring-projects/spring-data-examples/tree/main/mongodb/example/src/main/java/example/springdata/mongodb/converters\n    public List&lt;TodoDocument&gt; find(String description) {\n        return dao.find(&quot;todos&quot;,\n                        Filters.regex(&quot;description&quot;, description),\n                        Sorts.ascending(&quot;description&quot;), 100, 0)\n                .stream().map(doc -&gt; converter.read(TodoDocument.class, doc))\n                .collect(Collectors.toList());\n    }\n\n}\n</code></pre>\n<p>Where <code>TodoDocument</code> is a mongo collection mapped to java class.</p>\n<p>You can either use <code>TodoRepository</code> to query the document store or get connection from <code>MongoTemplate</code> in order to get access to more flexible queries.</p>\n<p>The more complete sourcecode can be found <a href=\"https://github.com/sombriks/simple-sample-mongo\" rel=\"nofollow noreferrer\">in this link</a></p>\n"}],"owner":{"account_id":16962007,"reputation":1665,"user_id":12268910,"display_name":"java12399900"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":365,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76309981,"answer_count":1,"score":1,"last_activity_date":1684790335,"creation_date":1684418362,"question_id":76281550,"body_markdown":"I have the following java code that I am using to paginated a response from mongodb, that works as expected:\r\n\r\n    List&lt;Document&gt; documents = collection.find()\r\n            .skip(offset)\r\n            .limit(limit)\r\n            .into(new ArrayList&lt;&gt;());\r\n\r\nInstead of a generic `org.bson.Document` what I want to return is a list of my specific `model` kotlin class Person.\r\n\r\n    @JsonInclude(JsonInclude.Include.NON_NULL)\r\n    class Person {\r\n    \r\n        @JsonProperty(&quot;id&quot;)\r\n        var id: Long? = null\r\n    \r\n        @JsonProperty(&quot;name&quot;)\r\n        var name: String? = null\r\n    \t\r\n    }\r\n\r\nWhen I try the following:\r\n\r\n        List&lt;Person&gt; documents = collection.find()\r\n                .skip(offset)\r\n                .limit(limit)\r\n                .into(new ArrayList&lt;Person&gt;());\r\n\r\nI get compile error:\r\n\r\n    Inferred type &#39;A&#39; for type parameter &#39;A&#39; is not within its bound; should implement &#39;java.util.Collection&lt;? super org.bson.Document&gt;&#39;\r\n\r\nHow can I resolve this?\r\n\r\nThe library used here is: `org.mongodb:bson:3.12.1`\r\n\r\n\r\n","title":"MongoDB Document - how to convert into model class?","body":"<p>I have the following java code that I am using to paginated a response from mongodb, that works as expected:</p>\n<pre><code>List&lt;Document&gt; documents = collection.find()\n        .skip(offset)\n        .limit(limit)\n        .into(new ArrayList&lt;&gt;());\n</code></pre>\n<p>Instead of a generic <code>org.bson.Document</code> what I want to return is a list of my specific <code>model</code> kotlin class Person.</p>\n<pre><code>@JsonInclude(JsonInclude.Include.NON_NULL)\nclass Person {\n\n    @JsonProperty(&quot;id&quot;)\n    var id: Long? = null\n\n    @JsonProperty(&quot;name&quot;)\n    var name: String? = null\n    \n}\n</code></pre>\n<p>When I try the following:</p>\n<pre><code>    List&lt;Person&gt; documents = collection.find()\n            .skip(offset)\n            .limit(limit)\n            .into(new ArrayList&lt;Person&gt;());\n</code></pre>\n<p>I get compile error:</p>\n<pre><code>Inferred type 'A' for type parameter 'A' is not within its bound; should implement 'java.util.Collection&lt;? super org.bson.Document&gt;'\n</code></pre>\n<p>How can I resolve this?</p>\n<p>The library used here is: <code>org.mongodb:bson:3.12.1</code></p>\n"},{"tags":["java","android-studio","android-support-library"],"owner":{"account_id":28657835,"reputation":1,"user_id":21943406,"display_name":"Narcisa Costache"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":84,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684790112,"creation_date":1684790112,"question_id":76309965,"body_markdown":"I am trying to create an android application that includes find places on map, for that i might need to have the support tools downloaded, but i cannot find the support tools through the SDK tools. I am using Android Studio Flamingo.\r\n\r\nI noticed when i tried to put this in the XML&quot;        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot;\r\n&quot;","title":"Missing support tools for Android Studio Flamingo: how can I include find places on map feature in my app?","body":"<p>I am trying to create an android application that includes find places on map, for that i might need to have the support tools downloaded, but i cannot find the support tools through the SDK tools. I am using Android Studio Flamingo.</p>\n<p>I noticed when i tried to put this in the XML&quot;        android:name=&quot;com.google.android.gms.maps.SupportMapFragment&quot;\n&quot;</p>\n"},{"tags":["java","android","firebase","firebase-storage"],"comments":[{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1684820834,"post_id":76309639,"comment_id":134568608,"body_markdown":"If you understand Kotlin, I think that this [resource](https://medium.com/firebase-tips-tricks/how-to-upload-an-image-to-cloud-storage-and-save-the-url-in-firestore-42711ca1df46) will help. Here is the corresponding [repo](https://github.com/alexmamo/CloudStorageJetpackCompose).","body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-upload-an-image-to-cloud-storage-and-save-the-url-in-firestore-42711ca1df46\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/CloudStorageJetpackCompose\" rel=\"nofollow noreferrer\">repo</a>."}],"answers":[{"tags":[],"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684788139,"creation_date":1684788139,"answer_id":76309762,"question_id":76309639,"body_markdown":"The error message is telling you that Firebase Storage can&#39;t find a file using the Reference you used to get a download URL.  That&#39;s because you are not using the correct Reference with `getDownloadUrl`.\r\n\r\nHere is what you&#39;re using to upload the file:\r\n\r\n```\r\nref.child(postId+&quot;-&quot;+fmNumber).putFile(result)\r\n```\r\n\r\nHere is what you&#39;re using to get the download URL:\r\n\r\n```\r\nref.getDownloadUrl()\r\n```\r\n\r\nThese are not using the same Reference.  You should probably build a new reference variable and use it in both places to ensure they are always the same.\r\n\r\n```\r\nStorageReference fileRef = ref.child(postId+&quot;-&quot;+fmNumber);\r\n\r\n// Then...\r\n\r\nfileRef.putFile(result)...\r\n\r\n// Then...\r\n\r\nfileRef.getDownloadUrl()...\r\n```\r\n","title":"StorageException has occurred. Object does not exist at location. Code: -13010 HttpResult: 404 in firestore","body":"<p>The error message is telling you that Firebase Storage can't find a file using the Reference you used to get a download URL.  That's because you are not using the correct Reference with <code>getDownloadUrl</code>.</p>\n<p>Here is what you're using to upload the file:</p>\n<pre><code>ref.child(postId+&quot;-&quot;+fmNumber).putFile(result)\n</code></pre>\n<p>Here is what you're using to get the download URL:</p>\n<pre><code>ref.getDownloadUrl()\n</code></pre>\n<p>These are not using the same Reference.  You should probably build a new reference variable and use it in both places to ensure they are always the same.</p>\n<pre><code>StorageReference fileRef = ref.child(postId+&quot;-&quot;+fmNumber);\n\n// Then...\n\nfileRef.putFile(result)...\n\n// Then...\n\nfileRef.getDownloadUrl()...\n</code></pre>\n"}],"owner":{"account_id":27935158,"reputation":90,"user_id":21332328,"display_name":"RmTomal"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76309762,"answer_count":1,"score":0,"last_activity_date":1684788153,"creation_date":1684786894,"question_id":76309639,"body_markdown":"I am trying to upload the image on firestore. The photo is uploading successfully but I can&#39;t download the image url. I don&#39;t understand where is the problem.\r\n\r\nMy code is:\r\n```\r\n  ActivityResultLauncher&lt;String&gt; imageSelect;\r\n        ref = FirebaseStorage.getInstance().getReference(&quot;photo&quot;);\r\n\r\n        //img pick\r\n        imageSelect = registerForActivityResult(new ActivityResultContracts.GetContent(), new ActivityResultCallback&lt;Uri&gt;() {\r\n            @Override\r\n            public void onActivityResult(Uri result) {\r\n                if (result != null){\r\n                    imgPicker.setImageURI(result);\r\n                    emptyImg = false;\r\n                    Random random = new Random();\r\n                    int post = random.nextInt(999999);\r\n                    String postId = String.valueOf(post);\r\n                    ref.child(postId+&quot;-&quot;+fmNumber).putFile(result)\r\n                            .addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\r\n                                @Override\r\n                                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\r\n                                    ref.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\r\n                                        @Override\r\n                                        public void onSuccess(Uri uri) {\r\n                                            image = uri.toString();\r\n                                            System.out.println(image);\r\n                                            Toast.makeText(FromActivity.this, &quot;Image Upload Successful&quot;, Toast.LENGTH_SHORT).show();\r\n                                            uploadComplete = true;\r\n                                        }\r\n                                    });\r\n                                }\r\n                            });\r\n                }else {\r\n                    Toast.makeText(FromActivity.this, &quot;You don&#39;t select any image&quot;, Toast.LENGTH_SHORT).show();\r\n                    imgPicker.setImageResource(R.drawable.profile);\r\n                    uploadComplete = false;\r\n                }\r\n\r\n            }\r\n        });\r\n```\r\n\r\nIt shows this error.\r\n```\r\n{  &quot;error&quot;: {    &quot;code&quot;: 404,    &quot;message&quot;: &quot;Not Found.&quot;  }}\r\njava.io.IOException: {  &quot;error&quot;: {    &quot;code&quot;: 404,    &quot;message&quot;: &quot;Not Found.&quot;  }}\r\nat com.google.firebase.storage.network.NetworkRequest.parseResponse(NetworkRequest.java:445)\r\nat com.google.firebase.storage.network.NetworkRequest.parseErrorResponse(NetworkRequest.java:462)\r\nat com.google.firebase.storage.network.NetworkRequest.processResponseStream(NetworkRequest.java:453)\r\nat com.google.firebase.storage.network.NetworkRequest.performRequest(NetworkRequest.java:272)\r\nat com.google.firebase.storage.network.NetworkRequest.performRequest(NetworkRequest.java:289)\r\nat com.google.firebase.storage.internal.ExponentialBackoffSender.sendWithExponentialBackoff(ExponentialBackoffSender.java:76)\r\nat com.google.firebase.storage.internal.ExponentialBackoffSender.sendWithExponentialBackoff(ExponentialBackoffSender.java:68)\r\nat com.google.firebase.storage.GetDownloadUrlTask.run(GetDownloadUrlTask.java:77)\r\n```","title":"StorageException has occurred. Object does not exist at location. Code: -13010 HttpResult: 404 in firestore","body":"<p>I am trying to upload the image on firestore. The photo is uploading successfully but I can't download the image url. I don't understand where is the problem.</p>\n<p>My code is:</p>\n<pre><code>  ActivityResultLauncher&lt;String&gt; imageSelect;\n        ref = FirebaseStorage.getInstance().getReference(&quot;photo&quot;);\n\n        //img pick\n        imageSelect = registerForActivityResult(new ActivityResultContracts.GetContent(), new ActivityResultCallback&lt;Uri&gt;() {\n            @Override\n            public void onActivityResult(Uri result) {\n                if (result != null){\n                    imgPicker.setImageURI(result);\n                    emptyImg = false;\n                    Random random = new Random();\n                    int post = random.nextInt(999999);\n                    String postId = String.valueOf(post);\n                    ref.child(postId+&quot;-&quot;+fmNumber).putFile(result)\n                            .addOnSuccessListener(new OnSuccessListener&lt;UploadTask.TaskSnapshot&gt;() {\n                                @Override\n                                public void onSuccess(UploadTask.TaskSnapshot taskSnapshot) {\n                                    ref.getDownloadUrl().addOnSuccessListener(new OnSuccessListener&lt;Uri&gt;() {\n                                        @Override\n                                        public void onSuccess(Uri uri) {\n                                            image = uri.toString();\n                                            System.out.println(image);\n                                            Toast.makeText(FromActivity.this, &quot;Image Upload Successful&quot;, Toast.LENGTH_SHORT).show();\n                                            uploadComplete = true;\n                                        }\n                                    });\n                                }\n                            });\n                }else {\n                    Toast.makeText(FromActivity.this, &quot;You don't select any image&quot;, Toast.LENGTH_SHORT).show();\n                    imgPicker.setImageResource(R.drawable.profile);\n                    uploadComplete = false;\n                }\n\n            }\n        });\n</code></pre>\n<p>It shows this error.</p>\n<pre><code>{  &quot;error&quot;: {    &quot;code&quot;: 404,    &quot;message&quot;: &quot;Not Found.&quot;  }}\njava.io.IOException: {  &quot;error&quot;: {    &quot;code&quot;: 404,    &quot;message&quot;: &quot;Not Found.&quot;  }}\nat com.google.firebase.storage.network.NetworkRequest.parseResponse(NetworkRequest.java:445)\nat com.google.firebase.storage.network.NetworkRequest.parseErrorResponse(NetworkRequest.java:462)\nat com.google.firebase.storage.network.NetworkRequest.processResponseStream(NetworkRequest.java:453)\nat com.google.firebase.storage.network.NetworkRequest.performRequest(NetworkRequest.java:272)\nat com.google.firebase.storage.network.NetworkRequest.performRequest(NetworkRequest.java:289)\nat com.google.firebase.storage.internal.ExponentialBackoffSender.sendWithExponentialBackoff(ExponentialBackoffSender.java:76)\nat com.google.firebase.storage.internal.ExponentialBackoffSender.sendWithExponentialBackoff(ExponentialBackoffSender.java:68)\nat com.google.firebase.storage.GetDownloadUrlTask.run(GetDownloadUrlTask.java:77)\n</code></pre>\n"},{"tags":["java","swing","jpanel"],"comments":[{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1684776873,"post_id":76307574,"comment_id":134563193,"body_markdown":"Not really sure what that code is attempting to do. I see no reason to pass layout managers as a parameter or to have panels extend one another. It is an overly complicated design. Also, you should not be using &quot;FlowLayout.LEFT&quot; as a parameter to the add(...) method. A FlowLayout does not support any constraints. I suggest you just create a panel and add 3 buttons to it. The components should be created in the class where you actually add the components to the panel., not in the super class.","body":"Not really sure what that code is attempting to do. I see no reason to pass layout managers as a parameter or to have panels extend one another. It is an overly complicated design. Also, you should not be using &quot;FlowLayout.LEFT&quot; as a parameter to the add(...) method. A FlowLayout does not support any constraints. I suggest you just create a panel and add 3 buttons to it. The components should be created in the class where you actually add the components to the panel., not in the super class."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1684846380,"post_id":76307574,"comment_id":134574330,"body_markdown":"__do not__ extend concrete containers/components - they are designed for usage - so configures them as needed","body":"<b>do not</b> extend concrete containers/components - they are designed for usage - so configures them as needed"}],"answers":[{"comments":[{"owner":{"account_id":19550590,"reputation":329,"user_id":14306309,"display_name":"adamDud"},"score":0,"creation_date":1684855312,"post_id":76309752,"comment_id":134576755,"body_markdown":"funny thing is that i actually did it like this initially but then intellij was like &quot;did you know you could do this with arrays.fill?&quot; and i was like &quot;okay :)&quot;","body":"funny thing is that i actually did it like this initially but then intellij was like &quot;did you know you could do this with arrays.fill?&quot; and i was like &quot;okay :)&quot;"}],"tags":[],"owner":{"account_id":1295413,"reputation":617,"user_id":1246600,"display_name":"Michael"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1684788075,"creation_date":1684788075,"answer_id":76309752,"question_id":76307574,"body_markdown":"The problem is `Arrays.fill(tab, new JButton());`.\r\n\r\nIt creates only **one** instance of JButton which is assigned to each position of the array.\r\n\r\nThis should fix it:\r\n\r\n    class MyButtonPanel extends JPanel{\r\n        JButton[] tab;\r\n        public MyButtonPanel(int numOfButtons, LayoutManager layout) {\r\n            this.tab = new JButton[numOfButtons];\r\n            for (int i = 0; i &lt; numOfButtons; i++) {\r\n                tab[i] = new JButton();\r\n            }\r\n            this.setLayout(layout);\r\n        }\r\n    }\r\n\r\n","title":"Custom JPanel with JButtons displays them one on top of another in JFrame","body":"<p>The problem is <code>Arrays.fill(tab, new JButton());</code>.</p>\n<p>It creates only <strong>one</strong> instance of JButton which is assigned to each position of the array.</p>\n<p>This should fix it:</p>\n<pre><code>class MyButtonPanel extends JPanel{\n    JButton[] tab;\n    public MyButtonPanel(int numOfButtons, LayoutManager layout) {\n        this.tab = new JButton[numOfButtons];\n        for (int i = 0; i &lt; numOfButtons; i++) {\n            tab[i] = new JButton();\n        }\n        this.setLayout(layout);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":19550590,"reputation":329,"user_id":14306309,"display_name":"adamDud"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76309752,"answer_count":1,"score":0,"last_activity_date":1684788075,"creation_date":1684768176,"question_id":76307574,"body_markdown":"Basically, when i run the following code, instead of a panel containing three buttons next to each other i get a tiny panel that (i&#39;m assuming) has all the buttons on top of each other. What&#39;s weird is that when i put all the code inside ```Main()``` it seems to work just fine, i can even add more buttons to ```myTopLeftPanel``` from main and they are displayed correctly, but when i split it into classes it starts acting weird. What&#39;s the cause of this? How can i fix it?\r\n```\r\nimport javax.swing.*;\r\nimport java.awt.*;\r\nimport java.awt.event.ActionEvent;\r\nimport java.awt.event.ActionListener;\r\nimport java.util.Arrays;\r\n\r\npublic class Main extends JFrame {\r\n    int height = 500;\r\n    int width = (int)Math.round(height*1.61803);\r\n    public static void main(String[] args) {\r\n        SwingUtilities.invokeLater(() -&gt; new Main());\r\n    }\r\n    public Main() {\r\n        this.setLayout(new BorderLayout());\r\n        MyTopLeftPanel myTopLeftPanel = new MyTopLeftPanel();\r\n        JPanel top = addPanel(new BorderLayout());\r\n        top.add(myTopLeftPanel, BorderLayout.WEST);\r\n        this.add(top, BorderLayout.NORTH);\r\n        setup();\r\n    }\r\n    void setup(){\r\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\r\n        this.setSize(width, height);\r\n        this.setVisible(true);\r\n    }\r\n    JPanel addPanel(LayoutManager layout){\r\n        JPanel temp = new JPanel();\r\n        temp.setLayout(layout);\r\n        return temp;\r\n    }\r\n}\r\n```\r\n```\r\nclass MyButtonPanel extends JPanel{\r\n    JButton[] tab;\r\n    public MyButtonPanel(int numOfButtons, LayoutManager layout) {\r\n        this.tab = new JButton[numOfButtons];\r\n        Arrays.fill(tab, new JButton());\r\n        this.setLayout(layout);\r\n    }\r\n}\r\n```\r\n```\r\nclass MyTopLeftPanel extends MyButtonPanel{\r\n    public MyTopLeftPanel(){\r\n        super(3, new FlowLayout());\r\n        tab[0].setBackground(Color.RED);\r\n        tab[0].setText(&quot;R&quot;);\r\n        tab[1].setBackground(Color.GREEN);\r\n        tab[1].setText(&quot;G&quot;);\r\n        tab[2].setBackground(Color.BLUE);\r\n        tab[2].setText(&quot;B&quot;);\r\n        this.setLayout(new FlowLayout());\r\n        this.add(tab[0], FlowLayout.LEFT);\r\n        this.add(tab[1], FlowLayout.LEFT);\r\n        this.add(tab[2], FlowLayout.LEFT);\r\n    }\r\n}\r\n```","title":"Custom JPanel with JButtons displays them one on top of another in JFrame","body":"<p>Basically, when i run the following code, instead of a panel containing three buttons next to each other i get a tiny panel that (i'm assuming) has all the buttons on top of each other. What's weird is that when i put all the code inside <code>Main()</code> it seems to work just fine, i can even add more buttons to <code>myTopLeftPanel</code> from main and they are displayed correctly, but when i split it into classes it starts acting weird. What's the cause of this? How can i fix it?</p>\n<pre><code>import javax.swing.*;\nimport java.awt.*;\nimport java.awt.event.ActionEvent;\nimport java.awt.event.ActionListener;\nimport java.util.Arrays;\n\npublic class Main extends JFrame {\n    int height = 500;\n    int width = (int)Math.round(height*1.61803);\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; new Main());\n    }\n    public Main() {\n        this.setLayout(new BorderLayout());\n        MyTopLeftPanel myTopLeftPanel = new MyTopLeftPanel();\n        JPanel top = addPanel(new BorderLayout());\n        top.add(myTopLeftPanel, BorderLayout.WEST);\n        this.add(top, BorderLayout.NORTH);\n        setup();\n    }\n    void setup(){\n        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);\n        this.setSize(width, height);\n        this.setVisible(true);\n    }\n    JPanel addPanel(LayoutManager layout){\n        JPanel temp = new JPanel();\n        temp.setLayout(layout);\n        return temp;\n    }\n}\n</code></pre>\n<pre><code>class MyButtonPanel extends JPanel{\n    JButton[] tab;\n    public MyButtonPanel(int numOfButtons, LayoutManager layout) {\n        this.tab = new JButton[numOfButtons];\n        Arrays.fill(tab, new JButton());\n        this.setLayout(layout);\n    }\n}\n</code></pre>\n<pre><code>class MyTopLeftPanel extends MyButtonPanel{\n    public MyTopLeftPanel(){\n        super(3, new FlowLayout());\n        tab[0].setBackground(Color.RED);\n        tab[0].setText(&quot;R&quot;);\n        tab[1].setBackground(Color.GREEN);\n        tab[1].setText(&quot;G&quot;);\n        tab[2].setBackground(Color.BLUE);\n        tab[2].setText(&quot;B&quot;);\n        this.setLayout(new FlowLayout());\n        this.add(tab[0], FlowLayout.LEFT);\n        this.add(tab[1], FlowLayout.LEFT);\n        this.add(tab[2], FlowLayout.LEFT);\n    }\n}\n</code></pre>\n"},{"tags":["java","gson"],"comments":[{"owner":{"account_id":93689,"reputation":415951,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"score":0,"creation_date":1684754989,"post_id":76305392,"comment_id":134558275,"body_markdown":"If you really wish the json could be provided like `&quot;list&quot;: []` instead of `&quot;List&quot;: null`, then rather than polute your application with null handling kung fu, you could just tweak the json string to replace all list fields that should not be null with empty lists via regex.","body":"If you really wish the json could be provided like <code>&quot;list&quot;: []</code> instead of <code>&quot;List&quot;: null</code>, then rather than polute your application with null handling kung fu, you could just tweak the json string to replace all list fields that should not be null with empty lists via regex."}],"answers":[{"comments":[{"owner":{"account_id":20973246,"reputation":91,"user_id":15409910,"display_name":"Bogdan Maceasa"},"score":0,"creation_date":1684754236,"post_id":76305573,"comment_id":134558145,"body_markdown":"You are correct, the issue remains though. I am receiving from a third-party system JSONs that have null elements, like I have described in the example :\n`list: null`\n\nI would like to have this default to a value, and not remain null - as the application is not 100% null-tollerant. \n\nThank you for the recommendation. The question now becomes, how to I register the TypeAdapter for this ?\nThis does not work : \n`new GsonBuilder().registerTypeAdapter(Collection.class,CollectionDeserializer.class).create()`","body":"You are correct, the issue remains though. I am receiving from a third-party system JSONs that have null elements, like I have described in the example : <code>list: null</code>  I would like to have this default to a value, and not remain null - as the application is not 100% null-tollerant.   Thank you for the recommendation. The question now becomes, how to I register the TypeAdapter for this ? This does not work :  <code>new GsonBuilder().registerTypeAdapter(Collection.class,Collectio&zwnj;&#8203;nDeserializer.class)&zwnj;&#8203;.create()</code>"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":0,"creation_date":1684763725,"post_id":76305573,"comment_id":134560188,"body_markdown":"@BogdanMaceasa you can register it with `new GsonBuilder().registerTypeAdapter(Collection.class, new CollectionDeserializer())`.","body":"@BogdanMaceasa you can register it with <code>new GsonBuilder().registerTypeAdapter(Collection.class, new CollectionDeserializer())</code>."}],"tags":[],"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684753962,"creation_date":1684753962,"answer_id":76305573,"question_id":76305392,"body_markdown":"Your JSON string is explicitly saying that this list is null, so I&#39;m not sure why you expected it to be empty in the first place. For an empty string, the JSON string should be `[]`.\r\n\r\nNevertheless, if you still want to convert null lists to empty lists in your custom deserializer, the answer is simple. Your custom deserializer is not working because it&#39;s testing the the json element being null or empty. It&#39;s neither of those: it&#39;s a value that represents a null element. Use [JsonElement.isJsonNull](https://www.javadoc.io/static/com.google.code.gson/gson/2.10.1/com.google.gson/com/google/gson/JsonElement.html#isJsonNull()): \r\n\r\n    class CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\r\n        public Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n            return json.isJsonNull() ? Collections.emptyList() : ...;\r\n        }\r\n    }","title":"How can I make Gson.fromJson() return an empty list instead of null for a field with a null value?","body":"<p>Your JSON string is explicitly saying that this list is null, so I'm not sure why you expected it to be empty in the first place. For an empty string, the JSON string should be <code>[]</code>.</p>\n<p>Nevertheless, if you still want to convert null lists to empty lists in your custom deserializer, the answer is simple. Your custom deserializer is not working because it's testing the the json element being null or empty. It's neither of those: it's a value that represents a null element. Use <a href=\"https://www.javadoc.io/static/com.google.code.gson/gson/2.10.1/com.google.gson/com/google/gson/JsonElement.html#isJsonNull()\" rel=\"nofollow noreferrer\">JsonElement.isJsonNull</a>:</p>\n<pre><code>class CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\n    public Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n        return json.isJsonNull() ? Collections.emptyList() : ...;\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20973246,"reputation":91,"user_id":15409910,"display_name":"Bogdan Maceasa"},"score":0,"creation_date":1684755505,"post_id":76305690,"comment_id":134558379,"body_markdown":"I have thought about this, and tested it as well. I know it works but honestly I have gone to some lengths to implement GSON in my project and it would mean replacing everything with modelMapper :) I&#39;d rather not do that unless forced to.","body":"I have thought about this, and tested it as well. I know it works but honestly I have gone to some lengths to implement GSON in my project and it would mean replacing everything with modelMapper :) I&#39;d rather not do that unless forced to."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1684785574,"post_id":76305690,"comment_id":134564903,"body_markdown":"This only works because you omitted `list`. If you&#39;re playing with the JSON, might as well make it `&quot;list&quot;: []`.","body":"This only works because you omitted <code>list</code>. If you&#39;re playing with the JSON, might as well make it <code>&quot;list&quot;: []</code>."}],"tags":[],"owner":{"account_id":2469660,"reputation":154,"user_id":2151879,"display_name":"Liran"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1684754882,"creation_date":1684754882,"answer_id":76305690,"question_id":76305392,"body_markdown":"It can be done with Jackson, and without explicitly set the field to null:\r\n\r\n```\r\nimport com.fasterxml.jackson.annotation.JsonProperty;\r\nimport com.fasterxml.jackson.core.JsonProcessingException;\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class TestApplication{\r\n    @Data\r\n    @NoArgsConstructor\r\n    public static class User{\r\n\r\n        private String userName;\r\n        @JsonProperty(&quot;eMailAddress&quot;)\r\n        private String email;\r\n        private final List&lt;Object&gt; list = new ArrayList&lt;&gt;();\r\n\r\n    }\r\n\r\n    public static void main(String[] args) throws JsonProcessingException {\r\n        String x = &quot;{\\n&quot; + &quot;\\&quot;userName\\&quot;: \\&quot;test\\&quot;&quot;\r\n                + &quot;,\\n&quot; + &quot;\\&quot;eMailAddress\\&quot;: \\&quot;dan@gmail.com\\&quot;&quot;\r\n                + &quot;}&quot;;\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        User from = mapper.readValue(x, User.class);\r\n\r\n        System.out.println(from);\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis prints:\r\n```\r\nTestApplication.User(userName=test, email=dan@gmail.com, list=[])\r\n```\r\n","title":"How can I make Gson.fromJson() return an empty list instead of null for a field with a null value?","body":"<p>It can be done with Jackson, and without explicitly set the field to null:</p>\n<pre><code>import com.fasterxml.jackson.annotation.JsonProperty;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\n\nimport java.util.ArrayList;\nimport java.util.List;\n\npublic class TestApplication{\n    @Data\n    @NoArgsConstructor\n    public static class User{\n\n        private String userName;\n        @JsonProperty(&quot;eMailAddress&quot;)\n        private String email;\n        private final List&lt;Object&gt; list = new ArrayList&lt;&gt;();\n\n    }\n\n    public static void main(String[] args) throws JsonProcessingException {\n        String x = &quot;{\\n&quot; + &quot;\\&quot;userName\\&quot;: \\&quot;test\\&quot;&quot;\n                + &quot;,\\n&quot; + &quot;\\&quot;eMailAddress\\&quot;: \\&quot;dan@gmail.com\\&quot;&quot;\n                + &quot;}&quot;;\n\n        ObjectMapper mapper = new ObjectMapper();\n        User from = mapper.readValue(x, User.class);\n\n        System.out.println(from);\n    }\n\n}\n</code></pre>\n<p>This prints:</p>\n<pre><code>TestApplication.User(userName=test, email=dan@gmail.com, list=[])\n</code></pre>\n"},{"comments":[{"owner":{"account_id":20973246,"reputation":91,"user_id":15409910,"display_name":"Bogdan Maceasa"},"score":0,"creation_date":1684756397,"post_id":76305844,"comment_id":134558562,"body_markdown":"this can&#39;t be reliably done. I have given an example using a field called &quot;list&quot; but in practice there are dozens of fields.","body":"this can&#39;t be reliably done. I have given an example using a field called &quot;list&quot; but in practice there are dozens of fields."}],"tags":[],"owner":{"account_id":2469660,"reputation":154,"user_id":2151879,"display_name":"Liran"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684756008,"creation_date":1684756008,"answer_id":76305844,"question_id":76305392,"body_markdown":"It can be done with Gson with explicitly set the field to empty list:\r\nReplace:\r\n```\r\n+ &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: null\\n&quot;\r\n```\r\nWith:\r\n```\r\n+ &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: []\\n&quot;\r\n```\r\n\r\nThis prints:\r\n```\r\nTestApplication.User(userName=test, email=null, list=[])\r\n```","title":"How can I make Gson.fromJson() return an empty list instead of null for a field with a null value?","body":"<p>It can be done with Gson with explicitly set the field to empty list:\nReplace:</p>\n<pre><code>+ &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: null\\n&quot;\n</code></pre>\n<p>With:</p>\n<pre><code>+ &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: []\\n&quot;\n</code></pre>\n<p>This prints:</p>\n<pre><code>TestApplication.User(userName=test, email=null, list=[])\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684762774,"creation_date":1684762774,"answer_id":76306795,"question_id":76305392,"body_markdown":"A null list is not the same as an empty list.\r\n\r\nYou can only use a custom adapter if you want all null arrays to become empty arrays. It&#39;s a lot of work. You need the following:\r\n\r\nNew variant of [ArrayTypeAdapter][1], [CollectionTypeAdapterFactory][2] and other setup classes.\r\n\r\nChange the following lines of ArrayTypeAdapter\r\n\r\n    if (in.peek() == JsonToken.NULL) {\r\n      in.nextNull();\r\n      return null;\r\n    }\r\n\r\nto\r\n\r\n    if (in.peek() == JsonToken.NULL) {\r\n      in.nextNull();\r\n      return Array.newInstance(componentType, 0);\r\n    }\r\n\r\nInstead of doing this, I recommend that you add an input validator `@NotNull` or programmatically change the `null` to `[]` for specific values after deserialisation \r\n\r\n  [1]: https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/bind/ArrayTypeAdapter.java.\r\n  [2]: https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/bind/CollectionTypeAdapterFactory.java\r\n","title":"How can I make Gson.fromJson() return an empty list instead of null for a field with a null value?","body":"<p>A null list is not the same as an empty list.</p>\n<p>You can only use a custom adapter if you want all null arrays to become empty arrays. It's a lot of work. You need the following:</p>\n<p>New variant of <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/bind/ArrayTypeAdapter.java.\" rel=\"nofollow noreferrer\">ArrayTypeAdapter</a>, <a href=\"https://github.com/google/gson/blob/master/gson/src/main/java/com/google/gson/internal/bind/CollectionTypeAdapterFactory.java\" rel=\"nofollow noreferrer\">CollectionTypeAdapterFactory</a> and other setup classes.</p>\n<p>Change the following lines of ArrayTypeAdapter</p>\n<pre><code>if (in.peek() == JsonToken.NULL) {\n  in.nextNull();\n  return null;\n}\n</code></pre>\n<p>to</p>\n<pre><code>if (in.peek() == JsonToken.NULL) {\n  in.nextNull();\n  return Array.newInstance(componentType, 0);\n}\n</code></pre>\n<p>Instead of doing this, I recommend that you add an input validator <code>@NotNull</code> or programmatically change the <code>null</code> to <code>[]</code> for specific values after deserialisation</p>\n"},{"comments":[{"owner":{"account_id":20973246,"reputation":91,"user_id":15409910,"display_name":"Bogdan Maceasa"},"score":0,"creation_date":1684820346,"post_id":76309479,"comment_id":134568536,"body_markdown":"I have found something similar which i was trying to modify to suit my case, but you implementation hit the nail on the head.","body":"I have found something similar which i was trying to modify to suit my case, but you implementation hit the nail on the head."}],"tags":[],"owner":{"account_id":5384013,"reputation":6035,"user_id":4288506,"accept_rate":77,"display_name":"Marcono1234"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684788056,"creation_date":1684785289,"answer_id":76309479,"question_id":76305392,"body_markdown":"This can be solved with a custom [`TypeAdapterFactory`](https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapterFactory.html):\r\n\r\n```java\r\nclass NullListToEmptyFactory implements TypeAdapterFactory {\r\n    public static final NullListToEmptyFactory INSTANCE = new NullListToEmptyFactory();\r\n\r\n    private NullListToEmptyFactory() {\r\n    }\r\n\r\n    @Override\r\n    public &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, TypeToken&lt;T&gt; type) {\r\n        Class&lt;?&gt; rawType = type.getRawType();\r\n\r\n        // Only handle List and ArrayList; let other factories handle different types\r\n        if (rawType != List.class &amp;&amp; rawType != ArrayList.class) {\r\n            return null;\r\n        }\r\n\r\n        // Delegate which handles deserialization of non-null values, and serialization\r\n        TypeAdapter&lt;T&gt; delegate = gson.getDelegateAdapter(this, type);\r\n        return new TypeAdapter&lt;T&gt;() {\r\n            @Override\r\n            public void write(JsonWriter out, T value) throws IOException {\r\n                delegate.write(out, value);\r\n            }\r\n\r\n            @Override\r\n            public T read(JsonReader in) throws IOException {\r\n                if (in.peek() == JsonToken.NULL) {\r\n                    in.nextNull();\r\n\r\n                    // Safe due to check at beginning of `create` method\r\n                    @SuppressWarnings(&quot;unchecked&quot;)\r\n                    T t = (T) new ArrayList&lt;&gt;();\r\n                    return t;\r\n                } else {\r\n                    return delegate.read(in);\r\n                }\r\n            }\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nYou can then register this factory on a `GsonBuilder` like this:\r\n```java\r\nGson gson = new GsonBuilder()\r\n    .registerTypeAdapterFactory(NullListToEmptyFactory.INSTANCE)\r\n    .create();\r\n```\r\n\r\nThe usage of `TypeAdapterFactory` has the following advantages:\r\n- It uses `TypeAdapter` which normally performs better than `JsonDeserializer` because it directly operates on the JSON stream and does not have to convert it to a `JsonElement` first\r\n- It allows delegating to the default adapter:\r\n  - There is no need to create a second `Gson` instance; deserialization will use your existing `Gson` instance and all of its configuration you made\r\n  - It supports custom element types, for example `List&lt;MyClass&gt;` because the delegate does all the type resolution work\r\n\r\n**Important:** With any solution you choose for this problem, none of them will handle the case where the field is missing in the JSON data. Gson does not support that very well at the moment, see [this feature request](https://github.com/google/gson/issues/1005). You currently have to explicitly initialize the field with a non-`null` `List` (and make sure your class has a no-args constructor; [more information](https://github.com/google/gson/blob/master/Troubleshooting.md#default-field-values-missing)), otherwise the field will be `null` if it is missing in the JSON data.\r\n","title":"How can I make Gson.fromJson() return an empty list instead of null for a field with a null value?","body":"<p>This can be solved with a custom <a href=\"https://javadoc.io/doc/com.google.code.gson/gson/latest/com.google.gson/com/google/gson/TypeAdapterFactory.html\" rel=\"nofollow noreferrer\"><code>TypeAdapterFactory</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class NullListToEmptyFactory implements TypeAdapterFactory {\n    public static final NullListToEmptyFactory INSTANCE = new NullListToEmptyFactory();\n\n    private NullListToEmptyFactory() {\n    }\n\n    @Override\n    public &lt;T&gt; TypeAdapter&lt;T&gt; create(Gson gson, TypeToken&lt;T&gt; type) {\n        Class&lt;?&gt; rawType = type.getRawType();\n\n        // Only handle List and ArrayList; let other factories handle different types\n        if (rawType != List.class &amp;&amp; rawType != ArrayList.class) {\n            return null;\n        }\n\n        // Delegate which handles deserialization of non-null values, and serialization\n        TypeAdapter&lt;T&gt; delegate = gson.getDelegateAdapter(this, type);\n        return new TypeAdapter&lt;T&gt;() {\n            @Override\n            public void write(JsonWriter out, T value) throws IOException {\n                delegate.write(out, value);\n            }\n\n            @Override\n            public T read(JsonReader in) throws IOException {\n                if (in.peek() == JsonToken.NULL) {\n                    in.nextNull();\n\n                    // Safe due to check at beginning of `create` method\n                    @SuppressWarnings(&quot;unchecked&quot;)\n                    T t = (T) new ArrayList&lt;&gt;();\n                    return t;\n                } else {\n                    return delegate.read(in);\n                }\n            }\n        };\n    }\n}\n</code></pre>\n<p>You can then register this factory on a <code>GsonBuilder</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Gson gson = new GsonBuilder()\n    .registerTypeAdapterFactory(NullListToEmptyFactory.INSTANCE)\n    .create();\n</code></pre>\n<p>The usage of <code>TypeAdapterFactory</code> has the following advantages:</p>\n<ul>\n<li>It uses <code>TypeAdapter</code> which normally performs better than <code>JsonDeserializer</code> because it directly operates on the JSON stream and does not have to convert it to a <code>JsonElement</code> first</li>\n<li>It allows delegating to the default adapter:\n<ul>\n<li>There is no need to create a second <code>Gson</code> instance; deserialization will use your existing <code>Gson</code> instance and all of its configuration you made</li>\n<li>It supports custom element types, for example <code>List&lt;MyClass&gt;</code> because the delegate does all the type resolution work</li>\n</ul>\n</li>\n</ul>\n<p><strong>Important:</strong> With any solution you choose for this problem, none of them will handle the case where the field is missing in the JSON data. Gson does not support that very well at the moment, see <a href=\"https://github.com/google/gson/issues/1005\" rel=\"nofollow noreferrer\">this feature request</a>. You currently have to explicitly initialize the field with a non-<code>null</code> <code>List</code> (and make sure your class has a no-args constructor; <a href=\"https://github.com/google/gson/blob/master/Troubleshooting.md#default-field-values-missing\" rel=\"nofollow noreferrer\">more information</a>), otherwise the field will be <code>null</code> if it is missing in the JSON data.</p>\n"}],"owner":{"account_id":20973246,"reputation":91,"user_id":15409910,"display_name":"Bogdan Maceasa"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":823,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76309479,"answer_count":5,"score":1,"last_activity_date":1684788056,"creation_date":1684752393,"question_id":76305392,"body_markdown":"I am using Gson to deserialize a bunch of objects, some of which are more complex and some &quot;lightweight&quot;.\r\n\r\nI am in a bit of a cunundrum over here, as I have been expecting another behaviour from GSON.fromJson() when reading a field with `null` value. More precisely, looking at this example\r\n\r\n```\r\npublic class TestApplication{\r\n\t@Data\r\n\t@NoArgsConstructor\r\n\tpublic class User{\r\n\r\n\t\tprivate String userName;\r\n\t\t@SerializedName(value = &quot;eMailAddress&quot;)\r\n\t\tprivate String email;\r\n\t\tprivate final List&lt;Object&gt; list = new ArrayList&lt;&gt;();\r\n\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString x = &quot;{\\n&quot; + &quot;\\&quot;userName\\&quot;: \\&quot;test\\&quot;&quot;\r\n\t\t\t+ &quot;,\\n&quot; + &quot;\\&quot;eMailAddress\\&quot;: \\&quot;dan@gmail.com\\&quot;&quot;\r\n\t\t\t+ &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: null\\n&quot;\r\n\t\t\t+ &quot;}&quot;;\r\n\r\n\t\tUser from = new Gson().fromJson(x, User.class);\r\n\t\tSystem.out.println(from);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nThis prints: \r\n\r\n```\r\nTestApplication.User(userName=test, email=dan@gmail.com, list=null)\r\n```\r\n\r\nI was expecting the output list to be empty (`list=[]`) and not null.\r\n\r\nCan I do anything to achieve the behaviour I need? My application uses lists of objects and it is not feasable to register a typeAdapter for each of them. \r\n\r\nHow would I go about writing a custom deserializer? This next example would be simple enough if it were to work:\r\n\r\n\r\n```\r\n\tclass CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\r\n\r\n\t\tpublic Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\r\n\r\n\t\t\treturn ObjectUtils.isEmpty(json) ? new ArrayList&lt;&gt;() : new Gson().fromJson(json, Collection.class);\r\n\t\t}\r\n\r\n\t}\r\n```\r\n\r\n\r\n\r\nWhat I have tried: \r\n- implementing a customer deserializer ( above ) with no success.\r\n- @JsonSetter(nulls= Nulls.SKIP) annotation with no effect on the Gson parsing.","title":"How can I make Gson.fromJson() return an empty list instead of null for a field with a null value?","body":"<p>I am using Gson to deserialize a bunch of objects, some of which are more complex and some &quot;lightweight&quot;.</p>\n<p>I am in a bit of a cunundrum over here, as I have been expecting another behaviour from GSON.fromJson() when reading a field with <code>null</code> value. More precisely, looking at this example</p>\n<pre><code>public class TestApplication{\n    @Data\n    @NoArgsConstructor\n    public class User{\n\n        private String userName;\n        @SerializedName(value = &quot;eMailAddress&quot;)\n        private String email;\n        private final List&lt;Object&gt; list = new ArrayList&lt;&gt;();\n\n    }\n\n    public static void main(String[] args) {\n        String x = &quot;{\\n&quot; + &quot;\\&quot;userName\\&quot;: \\&quot;test\\&quot;&quot;\n            + &quot;,\\n&quot; + &quot;\\&quot;eMailAddress\\&quot;: \\&quot;dan@gmail.com\\&quot;&quot;\n            + &quot;,\\n&quot; + &quot;\\&quot;list\\&quot;: null\\n&quot;\n            + &quot;}&quot;;\n\n        User from = new Gson().fromJson(x, User.class);\n        System.out.println(from);\n    }\n\n}\n</code></pre>\n<p>This prints:</p>\n<pre><code>TestApplication.User(userName=test, email=dan@gmail.com, list=null)\n</code></pre>\n<p>I was expecting the output list to be empty (<code>list=[]</code>) and not null.</p>\n<p>Can I do anything to achieve the behaviour I need? My application uses lists of objects and it is not feasable to register a typeAdapter for each of them.</p>\n<p>How would I go about writing a custom deserializer? This next example would be simple enough if it were to work:</p>\n<pre><code>    class CollectionDeserializer implements JsonDeserializer&lt;Collection&lt;?&gt;&gt; {\n\n        public Collection&lt;?&gt; deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n\n            return ObjectUtils.isEmpty(json) ? new ArrayList&lt;&gt;() : new Gson().fromJson(json, Collection.class);\n        }\n\n    }\n</code></pre>\n<p>What I have tried:</p>\n<ul>\n<li>implementing a customer deserializer ( above ) with no success.</li>\n<li>@JsonSetter(nulls= Nulls.SKIP) annotation with no effect on the Gson parsing.</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","kotlin"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1684787738,"creation_date":1684787738,"answer_id":76309721,"question_id":76309502,"body_markdown":"First,it&#39;s hard to figure out why you are using `RestTemplate` instead of `MockMvc` or `WebTestClient` (would need your complete test class for that). Is it an end-to-end test?\r\n\r\nIf writing an end-to-end test, you should be fetching the JWT from the authorization server: if you build it yourself, it will probably not pass validation (JWTs are signed with a private key on the authorization server and \r\nJWT decoder checks this signature using the public key). In that case, nothing in the Authorization will be mocked, the identity is just the one served by the authorization server.\r\n\r\nIf writing unit (`@WebMvcTest`) or integration (`@SpringBootTest`) tests, then you should be using `MockMvc` or `WebTestClient` instead of `RestTemplate`. In that case, use an annotation, `MockMvc` request post processor or `WebTestClient` mutator, building the right type of `Authentication`\r\n\r\nSecond, `@WithMockUser` is putting a `UsernamePasswordAuthenticationToken` instance in test security context, when you probably want a `JwtAuthenticationToken` (would need your complete security configuration to be sure). You should be using `@WithMockJwtAuth` from [those libs I created][1] to build `JwtAuthentication token` (test tooling provided by spring-security-test for JWTs is limited to MockMvc and WebTestClient). \r\n\r\nI suggest you take the time to read [this Baeldung article I wrote][2].\r\n\r\n\r\n  [1]: https://github.com/ch4mpy/spring-addons\r\n  [2]: https://www.baeldung.com/spring-oauth-testing-access-control","title":"Kotlin Spring Boot TestRestTemplate and OAuth2 Test","body":"<p>First,it's hard to figure out why you are using <code>RestTemplate</code> instead of <code>MockMvc</code> or <code>WebTestClient</code> (would need your complete test class for that). Is it an end-to-end test?</p>\n<p>If writing an end-to-end test, you should be fetching the JWT from the authorization server: if you build it yourself, it will probably not pass validation (JWTs are signed with a private key on the authorization server and\nJWT decoder checks this signature using the public key). In that case, nothing in the Authorization will be mocked, the identity is just the one served by the authorization server.</p>\n<p>If writing unit (<code>@WebMvcTest</code>) or integration (<code>@SpringBootTest</code>) tests, then you should be using <code>MockMvc</code> or <code>WebTestClient</code> instead of <code>RestTemplate</code>. In that case, use an annotation, <code>MockMvc</code> request post processor or <code>WebTestClient</code> mutator, building the right type of <code>Authentication</code></p>\n<p>Second, <code>@WithMockUser</code> is putting a <code>UsernamePasswordAuthenticationToken</code> instance in test security context, when you probably want a <code>JwtAuthenticationToken</code> (would need your complete security configuration to be sure). You should be using <code>@WithMockJwtAuth</code> from <a href=\"https://github.com/ch4mpy/spring-addons\" rel=\"nofollow noreferrer\">those libs I created</a> to build <code>JwtAuthentication token</code> (test tooling provided by spring-security-test for JWTs is limited to MockMvc and WebTestClient).</p>\n<p>I suggest you take the time to read <a href=\"https://www.baeldung.com/spring-oauth-testing-access-control\" rel=\"nofollow noreferrer\">this Baeldung article I wrote</a>.</p>\n"}],"owner":{"account_id":5311704,"reputation":301,"user_id":6253157,"display_name":"Chris"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76309721,"answer_count":1,"score":0,"last_activity_date":1684787738,"creation_date":1684785442,"question_id":76309502,"body_markdown":"I&#39;ve been trying to write a Kotling Spring Boot test utilizing `TestRestTemplate` to call an endpoint on my application that has a `PreAuthorize` annotation on it, but I am unable to propogate the `SecurityContext` with an authorized OAuth2 user. I keep getting the following exception:\r\n\r\n&gt; An Authentication object was not found in the SecurityContext\r\n\r\nI&#39;ve tried a couple different things. Below, I&#39;ll depict the original setup, and what I&#39;ve tried:\r\n\r\n**Controller**\r\n\r\n```\r\n@RestController\r\n@RequestMappting(/api/v1)\r\n@PreAuthorize(&quot;@authorizationService.canDoThat()&quot;) // Some logic to compare request to backend DB. Test does not hit this method\r\nclass SomeController() {\r\n   ...\r\n   ...\r\n\r\n   @PutMapping(/update)\r\n   fun update(@RequestBody request) {\r\n     // Some logic to update something (test doesn&#39;t hit this part)\r\n   }\r\n}\r\n```\r\n\r\n**Test**\r\n```\r\n@Test\r\nfun `update`() {\r\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\r\n\r\n   val headers = HttpHeaders()\r\n   val body = HttpEntity(\r\n      UpdateRequest(\r\n         // The request object\r\n      ), headers\r\n   )\r\n\r\n   val response = restTemplate.exchange(\r\n        url,\r\n        HttpMethod.PUT,\r\n        body,\r\n        typeReference&lt;SomeResponseType&gt;()\r\n    )\r\n}\r\n```\r\n\r\n**Test using WithMockUser**\r\n```\r\n@Test\r\n@WithMockUser(username = &quot;username&quot;, password = &quot;password&quot;, authorities = [&quot;SCOPE_write&quot;])\r\nfun `update`() {\r\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\r\n\r\n   val headers = HttpHeaders()\r\n   val body = HttpEntity(\r\n      UpdateRequest(\r\n         // The request object\r\n      ), headers\r\n   )\r\n\r\n   val response = restTemplate.exchange(\r\n        url,\r\n        HttpMethod.PUT,\r\n        body,\r\n        typeReference&lt;SomeResponseType&gt;()\r\n    )\r\n}\r\n```\r\n\r\n**Test manually setting context**\r\n```\r\n@Test\r\nfun `update`() {\r\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\r\n\r\n   val jwt = Jwt(\r\n         &quot;token-value&quot;,\r\n         Instant.now(),\r\n         Instant.now().plusSeconds(60),\r\n         mapOf(&quot;Authorization&quot; to &quot;Bearer token-value&quot;),\r\n         mapOf(&quot;someClaim&quot; to someClaimValue)\r\n   )\r\n   val authorities = setOf(GrantedAuthority { &quot;SCOPE_write&quot; })\r\n   val oauthAuthentication = JwtAuthenticationToken(jwt, authorities)\r\n\r\n   // Set security context\r\n   val context: SecurityContext = SecurityContextHolder.createEmptyContext()\r\n   context.authentication = oauthAuthentication\r\n   SecurityContextHolder.setContext(context)\r\n\r\n   val headers = HttpHeaders()\r\n   val body = HttpEntity(\r\n      UpdateRequest(\r\n         // The request object\r\n      ), headers\r\n   )\r\n\r\n   val response = restTemplate.exchange(\r\n        url,\r\n        HttpMethod.PUT,\r\n        body,\r\n        typeReference&lt;SomeResponseType&gt;()\r\n    )\r\n}\r\n```\r\n","title":"Kotlin Spring Boot TestRestTemplate and OAuth2 Test","body":"<p>I've been trying to write a Kotling Spring Boot test utilizing <code>TestRestTemplate</code> to call an endpoint on my application that has a <code>PreAuthorize</code> annotation on it, but I am unable to propogate the <code>SecurityContext</code> with an authorized OAuth2 user. I keep getting the following exception:</p>\n<blockquote>\n<p>An Authentication object was not found in the SecurityContext</p>\n</blockquote>\n<p>I've tried a couple different things. Below, I'll depict the original setup, and what I've tried:</p>\n<p><strong>Controller</strong></p>\n<pre><code>@RestController\n@RequestMappting(/api/v1)\n@PreAuthorize(&quot;@authorizationService.canDoThat()&quot;) // Some logic to compare request to backend DB. Test does not hit this method\nclass SomeController() {\n   ...\n   ...\n\n   @PutMapping(/update)\n   fun update(@RequestBody request) {\n     // Some logic to update something (test doesn't hit this part)\n   }\n}\n</code></pre>\n<p><strong>Test</strong></p>\n<pre><code>@Test\nfun `update`() {\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\n\n   val headers = HttpHeaders()\n   val body = HttpEntity(\n      UpdateRequest(\n         // The request object\n      ), headers\n   )\n\n   val response = restTemplate.exchange(\n        url,\n        HttpMethod.PUT,\n        body,\n        typeReference&lt;SomeResponseType&gt;()\n    )\n}\n</code></pre>\n<p><strong>Test using WithMockUser</strong></p>\n<pre><code>@Test\n@WithMockUser(username = &quot;username&quot;, password = &quot;password&quot;, authorities = [&quot;SCOPE_write&quot;])\nfun `update`() {\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\n\n   val headers = HttpHeaders()\n   val body = HttpEntity(\n      UpdateRequest(\n         // The request object\n      ), headers\n   )\n\n   val response = restTemplate.exchange(\n        url,\n        HttpMethod.PUT,\n        body,\n        typeReference&lt;SomeResponseType&gt;()\n    )\n}\n</code></pre>\n<p><strong>Test manually setting context</strong></p>\n<pre><code>@Test\nfun `update`() {\n   val url = &quot;http://localhost:${port}${basePath}/update&quot;\n\n   val jwt = Jwt(\n         &quot;token-value&quot;,\n         Instant.now(),\n         Instant.now().plusSeconds(60),\n         mapOf(&quot;Authorization&quot; to &quot;Bearer token-value&quot;),\n         mapOf(&quot;someClaim&quot; to someClaimValue)\n   )\n   val authorities = setOf(GrantedAuthority { &quot;SCOPE_write&quot; })\n   val oauthAuthentication = JwtAuthenticationToken(jwt, authorities)\n\n   // Set security context\n   val context: SecurityContext = SecurityContextHolder.createEmptyContext()\n   context.authentication = oauthAuthentication\n   SecurityContextHolder.setContext(context)\n\n   val headers = HttpHeaders()\n   val body = HttpEntity(\n      UpdateRequest(\n         // The request object\n      ), headers\n   )\n\n   val response = restTemplate.exchange(\n        url,\n        HttpMethod.PUT,\n        body,\n        typeReference&lt;SomeResponseType&gt;()\n    )\n}\n</code></pre>\n"},{"tags":["java","memory-model"],"comments":[{"owner":{"account_id":450779,"reputation":508,"user_id":846284,"accept_rate":100,"display_name":"treaz"},"score":0,"creation_date":1367054173,"post_id":11970428,"comment_id":23250338,"body_markdown":"I need a clarification on the example... If for both threads the assignment is before the read, there is at least one value changed before they reach the reading. How can both threads see 0?","body":"I need a clarification on the example... If for both threads the assignment is before the read, there is at least one value changed before they reach the reading. How can both threads see 0?"},{"owner":{"account_id":1425756,"reputation":485,"user_id":1349325,"display_name":"Tim"},"score":0,"creation_date":1558680951,"post_id":11970428,"comment_id":99187409,"body_markdown":"seriously, what does left number mean?","body":"seriously, what does left number mean?"}],"answers":[{"comments":[{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345108161,"post_id":11970581,"comment_id":15978299,"body_markdown":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again.","body":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again."},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345128881,"post_id":11970581,"comment_id":15988060,"body_markdown":"According to my understanding, I find that if a program is correctly synchronized then it still allows data race existed in program. So what is your opinion about this opinion?","body":"According to my understanding, I find that if a program is correctly synchronized then it still allows data race existed in program. So what is your opinion about this opinion?"},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345210239,"post_id":11970581,"comment_id":16015802,"body_markdown":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question.","body":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question."},{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":1,"creation_date":1345232075,"post_id":11970581,"comment_id":16025242,"body_markdown":"synchronized ensures all memory at the entry and exit of a the block occurs in a predictable order, even things you didn&#167;t access in the block. synchronized components allow different race conditions e.g. a Vector or Collections.syncrhonizedList accessed multiple times can have race condition between a read and a write to that collection.","body":"synchronized ensures all memory at the entry and exit of a the block occurs in a predictable order, even things you didn&#167;t access in the block. synchronized components allow different race conditions e.g. a Vector or Collections.syncrhonizedList accessed multiple times can have race condition between a read and a write to that collection."}],"tags":[],"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"comment_count":4,"down_vote_count":0,"up_vote_count":19,"is_accepted":true,"score":19,"last_activity_date":1575434767,"creation_date":1345038921,"answer_id":11970581,"question_id":11970428,"body_markdown":"Each thread can be on a different core with its own private registers which Java can use to hold values of variables, unless you force access to coherent shared memory.  This means that one thread can write to a value storing in a register, and this value is not visible to another thread for some time, like the duration of a loop or whole function. (milli-seconds is not uncommon)\r\n\r\nA more extreme example is that the reading thread&#39;s code is optimised with the assumption that since it never changes the value, it doesn&#39;t need to read it from memory.  In this case the optimised code never sees the change performed by another thread.\r\n\r\nIn both cases, the use of `volatile` ensures that reads and write occur in a consistent order and both threads see the same value.  This is sometimes described as always reading from main memory, though it doesn&#39;t have to be the case because the caches can talk to each other directly. (So the performance hit is much smaller than you might expect).\r\n\r\nOn normal CPUs, caches are &quot;coherent&quot; (can&#39;t hold stale / conflicting values) and transparent, not managed manually. Making data visible between threads just means doing an actual load or store instruction in asm to access memory (through the data caches), and optionally waiting for the store buffer to drain to give ordering wrt. other later operations.","title":"How to understand happens-before consistent","body":"<p>Each thread can be on a different core with its own private registers which Java can use to hold values of variables, unless you force access to coherent shared memory.  This means that one thread can write to a value storing in a register, and this value is not visible to another thread for some time, like the duration of a loop or whole function. (milli-seconds is not uncommon)</p>\n\n<p>A more extreme example is that the reading thread's code is optimised with the assumption that since it never changes the value, it doesn't need to read it from memory.  In this case the optimised code never sees the change performed by another thread.</p>\n\n<p>In both cases, the use of <code>volatile</code> ensures that reads and write occur in a consistent order and both threads see the same value.  This is sometimes described as always reading from main memory, though it doesn't have to be the case because the caches can talk to each other directly. (So the performance hit is much smaller than you might expect).</p>\n\n<p>On normal CPUs, caches are \"coherent\" (can't hold stale / conflicting values) and transparent, not managed manually. Making data visible between threads just means doing an actual load or store instruction in asm to access memory (through the data caches), and optionally waiting for the store buffer to drain to give ordering wrt. other later operations.</p>\n"},{"comments":[{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345108271,"post_id":11970749,"comment_id":15978350,"body_markdown":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again.","body":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again."},{"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"score":1,"creation_date":1345110611,"post_id":11970749,"comment_id":15979363,"body_markdown":"@newman:`r.v` means: `read of a variable v` and and `w.v` means: `write to variable v`.It is explained in the same paragraph: `We say that a read r of a variable v is allowed to observe a write w to v if, in the happens-before partial order of the execution trace`","body":"@newman:<code>r.v</code> means: <code>read of a variable v</code> and and <code>w.v</code> means: <code>write to variable v</code>.It is explained in the same paragraph: <code>We say that a read r of a variable v is allowed to observe a write w to v if, in the happens-before partial order of the execution trace</code>"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1345112748,"post_id":11970749,"comment_id":15980234,"body_markdown":"@newman You might be interested in [this discussion](http://cs.oswego.edu/pipermail/concurrency-interest/2012-August/009795.html) which shows how you can use that paragraph to prove a concurrent code correct (i.e. free of data race).","body":"@newman You might be interested in <a href=\"http://cs.oswego.edu/pipermail/concurrency-interest/2012-August/009795.html\" rel=\"nofollow noreferrer\">this discussion</a> which shows how you can use that paragraph to prove a concurrent code correct (i.e. free of data race)."},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345126446,"post_id":11970749,"comment_id":15986560,"body_markdown":"Thanks a lot for all your reply.\nI have understood what means w.v and r.v, but what means w.v = r.v, in other words, what does &quot;=&quot; mean? I think it does not mean &quot;equals&quot; because &quot;equals&quot; is &quot;==&quot;. So would you please explain one step more.","body":"Thanks a lot for all your reply. I have understood what means w.v and r.v, but what means w.v = r.v, in other words, what does &quot;=&quot; mean? I think it does not mean &quot;equals&quot; because &quot;equals&quot; is &quot;==&quot;. So would you please explain one step more."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1345129081,"post_id":11970749,"comment_id":15988174,"body_markdown":"@newman It means that the read and the write are about the same variable - it does not say anything about the value of the variable written / seen by w / r.","body":"@newman It means that the read and the write are about the same variable - it does not say anything about the value of the variable written / seen by w / r."},{"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"score":0,"creation_date":1345139118,"post_id":11970749,"comment_id":15992713,"body_markdown":"@newman:Please choose the answer that helped you most and mark it as accepted (if you think that you understood your problem)","body":"@newman:Please choose the answer that helped you most and mark it as accepted (if you think that you understood your problem)"},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345208258,"post_id":11970749,"comment_id":16014793,"body_markdown":"Thanks for your reminder. I have done it. You are welcome to join further discussion.","body":"Thanks for your reminder. I have done it. You are welcome to join further discussion."},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345210305,"post_id":11970749,"comment_id":16015827,"body_markdown":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question.","body":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question."}],"tags":[],"owner":{"account_id":162919,"reputation":53273,"user_id":384706,"accept_rate":64,"display_name":"Cratylus"},"comment_count":8,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1345041382,"creation_date":1345039518,"answer_id":11970749,"question_id":11970428,"body_markdown":"The Java Memory Model defines a *partial ordering* of all your actions of your program which is called *happens-before*.  \r\nTo guarantee that a thread `Y` is able to see the side-effects of action `X` (irrelevant if `X` occurred in different thread or not) a *happens-before* relationship is defined between `X` and `Y`.   \r\nIf such a relationship is not present the JVM may re-order the operations of the program.  \r\nNow, if a variable is shared and accessed by many threads, and written by (at least) one thread if the reads and writes are not ordered by the *happens before* relationship, then you have a data race.   \r\nIn a correct program there are no data races.  \r\nExample is 2 threads `A` and `B` synchronized on lock `X`.  \r\n`Thread A` acquires lock (now `Thread B` is blocked) and does the write operations and then releases lock `X`. Now `Thread B` acquires lock `X` and since all the actions of `Thread A` were done *before releasing* the lock `X`, they are *ordered before* the actions of `Thread B` which acquired the lock `X` *after* thread `A` (and also visible to `Thread B`).   \r\nNote that this occurs on actions synchronized *on the same lock*. There is *no* happens before relationship among threads synchronized *on different locks*","title":"How to understand happens-before consistent","body":"<p>The Java Memory Model defines a <em>partial ordering</em> of all your actions of your program which is called <em>happens-before</em>.<br>\nTo guarantee that a thread <code>Y</code> is able to see the side-effects of action <code>X</code> (irrelevant if <code>X</code> occurred in different thread or not) a <em>happens-before</em> relationship is defined between <code>X</code> and <code>Y</code>.<br>\nIf such a relationship is not present the JVM may re-order the operations of the program.<br>\nNow, if a variable is shared and accessed by many threads, and written by (at least) one thread if the reads and writes are not ordered by the <em>happens before</em> relationship, then you have a data race.<br>\nIn a correct program there are no data races.<br>\nExample is 2 threads <code>A</code> and <code>B</code> synchronized on lock <code>X</code>.<br>\n<code>Thread A</code> acquires lock (now <code>Thread B</code> is blocked) and does the write operations and then releases lock <code>X</code>. Now <code>Thread B</code> acquires lock <code>X</code> and since all the actions of <code>Thread A</code> were done <em>before releasing</em> the lock <code>X</code>, they are <em>ordered before</em> the actions of <code>Thread B</code> which acquired the lock <code>X</code> <em>after</em> thread <code>A</code> (and also visible to <code>Thread B</code>).<br>\nNote that this occurs on actions synchronized <em>on the same lock</em>. There is <em>no</em> happens before relationship among threads synchronized <em>on different locks</em></p>\n"},{"comments":[{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345108245,"post_id":11971262,"comment_id":15978337,"body_markdown":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again.","body":"Thanks a lot about your answer. May I consider that all my two understanding are correct? And still two questions: what does &quot;w.v = r.v&quot; mean? what does left number mean? Thanks again."},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345128910,"post_id":11971262,"comment_id":15988081,"body_markdown":"According to my understanding, I find that if a program is correctly synchronized then it still allows data race existed in program. So what is your opinion about this opinion?","body":"According to my understanding, I find that if a program is correctly synchronized then it still allows data race existed in program. So what is your opinion about this opinion?"},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1345129508,"post_id":11971262,"comment_id":15988443,"body_markdown":"@newman I am not sure =&gt; I prefer to keep it simple and avoid data races.","body":"@newman I am not sure =&gt; I prefer to keep it simple and avoid data races."},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345131616,"post_id":11971262,"comment_id":15989600,"body_markdown":"Thanks a lot. I will continue this topic tomorrow. See you next day.","body":"Thanks a lot. I will continue this topic tomorrow. See you next day."},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345207332,"post_id":11971262,"comment_id":16014357,"body_markdown":"There are two conclusions from JLS:\nC1:If a program has no data races, then all executions of the program will appear to be sequentially consistent.\nC2:If a program is correctly synchronized, then all executions of the program will appear to be sequentially consistent.\nIf another direction of C1 is true,then we get following conclusion:\nC3:If a program is correctly synchronized,then this problem has no data race.\nBut unfortunately,there is not such a direction in JLS, so I get the that conclusion:","body":"There are two conclusions from JLS: C1:If a program has no data races, then all executions of the program will appear to be sequentially consistent. C2:If a program is correctly synchronized, then all executions of the program will appear to be sequentially consistent. If another direction of C1 is true,then we get following conclusion: C3:If a program is correctly synchronized,then this problem has no data race. But unfortunately,there is not such a direction in JLS, so I get the that conclusion:"},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345207361,"post_id":11971262,"comment_id":16014369,"body_markdown":"if a program is correctly synchronized then it still allows data race existed in program.\nBut I think this is not enough, I want get same conclusion in other solid ways, or proof of false of this conclusion,even in informal way.\nFirst of all, I think a code sample that shows a sequential consistent execution of a multiple-threaded program in which it contains data race is helpful to understand and resolve this question. After serious consideration, I still can not find a proper sample. So would you please give me a code sample.","body":"if a program is correctly synchronized then it still allows data race existed in program. But I think this is not enough, I want get same conclusion in other solid ways, or proof of false of this conclusion,even in informal way. First of all, I think a code sample that shows a sequential consistent execution of a multiple-threaded program in which it contains data race is helpful to understand and resolve this question. After serious consideration, I still can not find a proper sample. So would you please give me a code sample."},{"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"score":0,"creation_date":1345207729,"post_id":11971262,"comment_id":16014535,"body_markdown":"To be honest that is becoming very theoretical and I m not the best person to answer those questions.","body":"To be honest that is becoming very theoretical and I m not the best person to answer those questions."},{"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"score":0,"creation_date":1345210273,"post_id":11971262,"comment_id":16015818,"body_markdown":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question.","body":"I have start a new question: Does a correctly synchronized program still allow data race?(Part I) to continue this discussion. You are welcome to join new question."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1606366747,"post_id":11971262,"comment_id":114944214,"body_markdown":"I feel a bit strange resurrecting this, but you say `...that a read that comes after a write in your program order...`, while `happens before consistency` has nothing to do with program order. It is the rule that says that a _read_ observes either the _write_ in `happens-before` or _any other read_ (racy). This rule defines the connection between `synchronizes-with` order, that builds the `happens-before order` among multiple threads.","body":"I feel a bit strange resurrecting this, but you say <code>...that a read that comes after a write in your program order...</code>, while <code>happens before consistency</code> has nothing to do with program order. It is the rule that says that a <i>read</i> observes either the <i>write</i> in <code>happens-before</code> or <i>any other read</i> (racy). This rule defines the connection between <code>synchronizes-with</code> order, that builds the <code>happens-before order</code> among multiple threads."}],"tags":[],"owner":{"account_id":440158,"reputation":323231,"user_id":829571,"accept_rate":94,"display_name":"assylias"},"comment_count":9,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1345041233,"creation_date":1345041233,"answer_id":11971262,"question_id":11970428,"body_markdown":"In substance that is correct. The main thing to take out of this is: unless you use some form of synchronization, there is no guarantee that a read that comes after a write in your program order sees the effect of that write, as the statements might have been reodered.\r\n\r\n&gt; does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?\r\n\r\nFrom a wall clock&#39;s perspective, obviously, a read can&#39;t see the effect of a write that has not happened yet.\r\n\r\nFrom a program order&#39;s perspective, because statements can be reordered if there isn&#39;t a proper synchronization (happens before relationship), a read that comes before a write in your program, could see the effect of that write during execution because it has been executed after the write by the JVM.","title":"How to understand happens-before consistent","body":"<p>In substance that is correct. The main thing to take out of this is: unless you use some form of synchronization, there is no guarantee that a read that comes after a write in your program order sees the effect of that write, as the statements might have been reodered.</p>\n\n<blockquote>\n  <p>does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?</p>\n</blockquote>\n\n<p>From a wall clock's perspective, obviously, a read can't see the effect of a write that has not happened yet.</p>\n\n<p>From a program order's perspective, because statements can be reordered if there isn't a proper synchronization (happens before relationship), a read that comes before a write in your program, could see the effect of that write during execution because it has been executed after the write by the JVM.</p>\n"},{"comments":[{"owner":{"account_id":956558,"reputation":30924,"user_id":981744,"display_name":"Erwin Bolwidt"},"score":2,"creation_date":1583964204,"post_id":59491099,"comment_id":107293730,"body_markdown":"On the topic of ordering, it&#39;s not just the compiler that changes ordering or perceived ordering (instructions may execute in order but their effect on memory may not be seen in the same order by other cores/cpus). CPUs&#39; pipelining architectures can and do also change the ordering of instructions that do not depend on each other&#39;s output.","body":"On the topic of ordering, it&#39;s not just the compiler that changes ordering or perceived ordering (instructions may execute in order but their effect on memory may not be seen in the same order by other cores/cpus). CPUs&#39; pipelining architectures can and do also change the ordering of instructions that do not depend on each other&#39;s output."},{"owner":{"account_id":8973238,"reputation":176,"user_id":6691017,"accept_rate":100,"display_name":"study_20160808"},"score":0,"creation_date":1643366054,"post_id":59491099,"comment_id":125325929,"body_markdown":"@yoAlex5 I understand your comment. But follow code why is not infinite loop. public class HB {\n    public static Boolean flag = true;\n    public static void main(String[] args) throws InterruptedException {\n        Thread t = new Thread(() -&gt; {\n            while (flag) {\n                System.out.println( &quot;do=====&gt;&quot;);\n            }\n            System.out.println(Thread.currentThread().getName() + &quot; &quot; + &quot;end&quot;);\n        }, &quot;server&quot;);\n        t.start();\n        \n        Thread.sleep(1000);\n        System.out.println(&quot;parent&quot;);\n        flag = false;\n    }\n}","body":"@yoAlex5 I understand your comment. But follow code why is not infinite loop. public class HB {     public static Boolean flag = true;     public static void main(String[] args) throws InterruptedException {         Thread t = new Thread(() -&gt; {             while (flag) {                 System.out.println( &quot;do=====&gt;&quot;);             }             System.out.println(Thread.currentThread().getName() + &quot; &quot; + &quot;end&quot;);         }, &quot;server&quot;);         t.start();                  Thread.sleep(1000);         System.out.println(&quot;parent&quot;);         flag = false;     } }"}],"tags":[],"owner":{"account_id":6115775,"reputation":30435,"user_id":4770877,"display_name":"yoAlex5"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1637677432,"creation_date":1577378519,"answer_id":59491099,"question_id":11970428,"body_markdown":"**happens-before**\r\n\r\nLet&#39;s take a look at definitions in **concurrency** theory:\r\n\r\n**Atomicity** - is a property of operation that can be executed completely as a single transaction and can not be executed partially. For example `Atomic operations`[&lt;sup&gt;\\[Example\\]&lt;/sup&gt;][1]\r\n\r\n**Visibility** - if one thread made changes they are visible for other threads. `volatile` before Java 5 with `happens-before`\r\n\r\n**Ordering** - compiler is able to change an ordering of operations/instructions of source code to make some optimisations. \r\n\r\nFor example `happens-before` which is a kind of `memory barrier` which helps to solve `Visibility` and `Ordering` issue. Good examples of happens-before are `volatile`[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][2], `synchronized` monitor[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][3]\r\n\r\n\r\nA good example of `atomicity` is `Compare and swap`(`CAS`) realization of `check then act`(`CTA`) pattern which should be atomic and allows to change a variable in multithreading envirompment. You can write your own implementation if `CTA`:\r\n\r\n - `volatile + synchronized` \r\n - `java.util.concurrent.atomic` with `sun.misc.Unsafe`(memory allocation, instantiating without constructor call...) from `Java 5` which uses `JNI` and CPU advantages.\r\n\r\n`CAS` algoritm has thee parameters(A(address), O(old value), N(new value)). \r\n```\r\nIf value by A(address) == O(old value) then put N(new value) into A(address), \r\nelse O(old value) = value from A(address) and repeat this actions again\r\n```\r\n\r\n\r\nHappens-before\r\n--------------\r\n\r\n[Official doc][4]\r\n&gt;Two actions can be **ordered** by a happens-before relationship. If one action happens-before another, then the first is **visible** to and **ordered** before the second.\r\n\r\n[![enter image description here][5]][5]\r\n\r\nvolatile[&lt;sup&gt;\\[About\\]&lt;/sup&gt;][2] as an example\r\n--------\r\n\r\n&gt;A **write** to a **volatile** field **happens-before** every subsequent **read** of that field.\r\n\r\n\r\nLet&#39;s take a look at the example:\r\n\r\n    // Definitions\r\n    int a = 1;\r\n    int b = 2;\r\n    volatile boolean myVolatile = false;\r\n\r\n    // Thread A. Program order\r\n    {\r\n        a = 5;\r\n        b = 6;\r\n        myVolatile = true; // &lt;-- write\r\n    }\r\n\r\n    //Thread B. Program order\r\n    {\r\n        //Thread.sleep(1000); //just to show that writing into `myVolatile`(Thread A) was executed before\r\n\r\n        System.out.println(myVolatile); // &lt;-- read\r\n        System.out.println(a);  //prints 5, not 1\r\n        System.out.println(b);  //prints 6, not 2\r\n    }\r\n\r\n**Visibility** - When `Thread A` **changes/writes** a **volatile** variable it also pushes all previous changes into **RAM - Main Memory** as a result all **not volatile** variable will be up to date and visible for another threads\r\n\r\n**Ordering**:\r\n\r\n - All operations **before writing into volatile variable in `Thread A`** will be called before. JVM is able to reorder them but guarantees that no one operation **before writing into volatile variable in `Thread A`** will be called after it.\r\n\r\n - All operations **after reading the volatile variable in `Thread B`** will be called after. JVM is able to reorder them but guarantees that no one operation **after reading a volatile variable in `Thread B`** will be called before it.\r\n\r\n\r\n[\\[Concurrency vs Parallelism\\]][6]\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/65382071/4770877\r\n  [2]: https://stackoverflow.com/a/59498520/4770877\r\n  [3]: https://stackoverflow.com/a/59500618/4770877\r\n  [4]: https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5\r\n  [5]: https://i.stack.imgur.com/ymS7O.png\r\n  [6]: https://stackoverflow.com/a/63744581/4770877","title":"How to understand happens-before consistent","body":"<p><strong>happens-before</strong></p>\n<p>Let's take a look at definitions in <strong>concurrency</strong> theory:</p>\n<p><strong>Atomicity</strong> - is a property of operation that can be executed completely as a single transaction and can not be executed partially. For example <code>Atomic operations</code><a href=\"https://stackoverflow.com/a/65382071/4770877\"><sup>[Example]</sup></a></p>\n<p><strong>Visibility</strong> - if one thread made changes they are visible for other threads. <code>volatile</code> before Java 5 with <code>happens-before</code></p>\n<p><strong>Ordering</strong> - compiler is able to change an ordering of operations/instructions of source code to make some optimisations.</p>\n<p>For example <code>happens-before</code> which is a kind of <code>memory barrier</code> which helps to solve <code>Visibility</code> and <code>Ordering</code> issue. Good examples of happens-before are <code>volatile</code><a href=\"https://stackoverflow.com/a/59498520/4770877\"><sup>[About]</sup></a>, <code>synchronized</code> monitor<a href=\"https://stackoverflow.com/a/59500618/4770877\"><sup>[About]</sup></a></p>\n<p>A good example of <code>atomicity</code> is <code>Compare and swap</code>(<code>CAS</code>) realization of <code>check then act</code>(<code>CTA</code>) pattern which should be atomic and allows to change a variable in multithreading envirompment. You can write your own implementation if <code>CTA</code>:</p>\n<ul>\n<li><code>volatile + synchronized</code></li>\n<li><code>java.util.concurrent.atomic</code> with <code>sun.misc.Unsafe</code>(memory allocation, instantiating without constructor call...) from <code>Java 5</code> which uses <code>JNI</code> and CPU advantages.</li>\n</ul>\n<p><code>CAS</code> algoritm has thee parameters(A(address), O(old value), N(new value)).</p>\n<pre><code>If value by A(address) == O(old value) then put N(new value) into A(address), \nelse O(old value) = value from A(address) and repeat this actions again\n</code></pre>\n<h2>Happens-before</h2>\n<p><a href=\"https://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5\" rel=\"noreferrer\">Official doc</a></p>\n<blockquote>\n<p>Two actions can be <strong>ordered</strong> by a happens-before relationship. If one action happens-before another, then the first is <strong>visible</strong> to and <strong>ordered</strong> before the second.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/ymS7O.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ymS7O.png\" alt=\"enter image description here\" /></a></p>\n<h2>volatile<a href=\"https://stackoverflow.com/a/59498520/4770877\"><sup>[About]</sup></a> as an example</h2>\n<blockquote>\n<p>A <strong>write</strong> to a <strong>volatile</strong> field <strong>happens-before</strong> every subsequent <strong>read</strong> of that field.</p>\n</blockquote>\n<p>Let's take a look at the example:</p>\n<pre><code>// Definitions\nint a = 1;\nint b = 2;\nvolatile boolean myVolatile = false;\n\n// Thread A. Program order\n{\n    a = 5;\n    b = 6;\n    myVolatile = true; // &lt;-- write\n}\n\n//Thread B. Program order\n{\n    //Thread.sleep(1000); //just to show that writing into `myVolatile`(Thread A) was executed before\n\n    System.out.println(myVolatile); // &lt;-- read\n    System.out.println(a);  //prints 5, not 1\n    System.out.println(b);  //prints 6, not 2\n}\n</code></pre>\n<p><strong>Visibility</strong> - When <code>Thread A</code> <strong>changes/writes</strong> a <strong>volatile</strong> variable it also pushes all previous changes into <strong>RAM - Main Memory</strong> as a result all <strong>not volatile</strong> variable will be up to date and visible for another threads</p>\n<p><strong>Ordering</strong>:</p>\n<ul>\n<li><p>All operations <strong>before writing into volatile variable in <code>Thread A</code></strong> will be called before. JVM is able to reorder them but guarantees that no one operation <strong>before writing into volatile variable in <code>Thread A</code></strong> will be called after it.</p>\n</li>\n<li><p>All operations <strong>after reading the volatile variable in <code>Thread B</code></strong> will be called after. JVM is able to reorder them but guarantees that no one operation <strong>after reading a volatile variable in <code>Thread B</code></strong> will be called before it.</p>\n</li>\n</ul>\n<p><a href=\"https://stackoverflow.com/a/63744581/4770877\">[Concurrency vs Parallelism]</a></p>\n"},{"tags":[],"owner":{"account_id":544312,"reputation":507,"user_id":913717,"accept_rate":80,"display_name":"Bruce Zu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618177955,"creation_date":1618175168,"answer_id":67050182,"question_id":11970428,"body_markdown":" Q1: is my understanding right?\r\n\r\n A: Yes\r\n\r\n Q2: what does &quot;w.v = r.v&quot; mean?\r\n\r\n A: The value of w.v is same as that of r.v\r\n\r\n Q3: What does left number mean?\r\n\r\n A: I think it is statement ID like shown in &quot;Table 17.4-A. Surprising results caused by statement reordering - original code&quot;. But you can ignore it because it does not apply to the conent of &quot;Another execution order that is happens-before consistent is: &quot; So the left number is shit completely. Do not stick to it.\r\n\r\n Q4: In my understanding, the reason of both r2 and r1 can see initial write of 0 is both A and B are not volatile field. So my fourth quesiton is: whether my understanding is right?\r\n\r\n A: That is one reason. re-order can also make it. &quot;A program must be correctly synchronized to avoid the kinds of counterintuitive behaviors that can be observed when code is reordered.&quot;\r\n\r\nQ5&amp;6: In second execution order ... So my fifth and sixth questions are: does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?\r\n\r\nA: Yes. no synchronization in code, each thread read can see either the write of the initial value or the write by the other thread. \r\n\r\ntime 1: Thread 2: A=2\r\n\r\ntime 2: Thread 1: B=1 // Without synchronization, B=1 of Thread 1 can be interleaved here\r\n\r\ntime 3: Thread 2: r1=B // r1 value is 1\r\n\r\ntime 4: Thread 1: r2=A // r2 value is 2\r\n\r\nNote &quot;An execution is happens-before consistent if its set of actions is happens-before consistent&quot;\r\n ","title":"How to understand happens-before consistent","body":"<p>Q1: is my understanding right?</p>\n<p>A: Yes</p>\n<p>Q2: what does &quot;w.v = r.v&quot; mean?</p>\n<p>A: The value of w.v is same as that of r.v</p>\n<p>Q3: What does left number mean?</p>\n<p>A: I think it is statement ID like shown in &quot;Table 17.4-A. Surprising results caused by statement reordering - original code&quot;. But you can ignore it because it does not apply to the conent of &quot;Another execution order that is happens-before consistent is: &quot; So the left number is shit completely. Do not stick to it.</p>\n<p>Q4: In my understanding, the reason of both r2 and r1 can see initial write of 0 is both A and B are not volatile field. So my fourth quesiton is: whether my understanding is right?</p>\n<p>A: That is one reason. re-order can also make it. &quot;A program must be correctly synchronized to avoid the kinds of counterintuitive behaviors that can be observed when code is reordered.&quot;</p>\n<p>Q5&amp;6: In second execution order ... So my fifth and sixth questions are: does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?</p>\n<p>A: Yes. no synchronization in code, each thread read can see either the write of the initial value or the write by the other thread.</p>\n<p>time 1: Thread 2: A=2</p>\n<p>time 2: Thread 1: B=1 // Without synchronization, B=1 of Thread 1 can be interleaved here</p>\n<p>time 3: Thread 2: r1=B // r1 value is 1</p>\n<p>time 4: Thread 1: r2=A // r2 value is 2</p>\n<p>Note &quot;An execution is happens-before consistent if its set of actions is happens-before consistent&quot;</p>\n"}],"owner":{"account_id":1525399,"reputation":499,"user_id":1423978,"accept_rate":67,"display_name":"newman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7979,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":11970581,"answer_count":5,"score":15,"last_activity_date":1684787354,"creation_date":1345038332,"question_id":11970428,"body_markdown":"In [chapter 17 of JLS][1], it introduce a concept: happens-before consistent.\r\n\r\n&gt;A set of actions A is happens-before consistent if for all reads r in A, where W(r) is the write action seen by r, it is not the case that either hb(r, W(r)) or that there exists a write w in A such that w.v = r.v and hb(W(r), w) and hb(w, r)&quot;\r\n\r\nIn my understanding, it equals to following words:\r\n..., it is the case that neither ... nor ...\r\n\r\nSo my first two questions are:\r\n\r\n- is my understanding right?\r\n- what does &quot;w.v = r.v&quot; mean?\r\n\r\nIt also gives an Example: 17.4.5-1\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n    Thread 1 Thread 2\r\n     \r\n    B = 1; A = 2; \r\n    \r\n    r2 = A; r1 = B; \r\n    \r\nIn first execution order:\r\n\r\n&lt;!-- language: lang-none --&gt;    \r\n\r\n    1: B = 1;\r\n    \r\n    3: A = 2;\r\n    \r\n    2: r2 = A;  // sees initial write of 0\r\n    \r\n    4: r1 = B;  // sees initial write of 0\r\n\r\nThe order itself has already told us that two threads are executed alternately, so my third question is: what does left number mean?\r\n\r\nIn my understanding, the reason of both r2 and r1 can see initial write of 0 is both A and B are not volatile field. So my fourth quesiton is: whether my understanding is right?\r\n\r\nIn second execution order:\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n    \r\n    1: r2 = A;  // sees write of A = 2\r\n    \r\n    3: r1 = B;  // sees write of B = 1\r\n    \r\n    2: B = 1;\r\n    \r\n    4: A = 2;\r\n\r\nAccording to definition of happens-before consistency, it is not difficult to understand this execution order is happens-before consistent(if my first understanding is correct).\r\nSo my fifth and sixth questions are: does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?\r\n\r\n  [1]: http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5","title":"How to understand happens-before consistent","body":"<p>In <a href=\"http://docs.oracle.com/javase/specs/jls/se7/html/jls-17.html#jls-17.4.5\" rel=\"noreferrer\">chapter 17 of JLS</a>, it introduce a concept: happens-before consistent.</p>\n\n<blockquote>\n  <p>A set of actions A is happens-before consistent if for all reads r in A, where W(r) is the write action seen by r, it is not the case that either hb(r, W(r)) or that there exists a write w in A such that w.v = r.v and hb(W(r), w) and hb(w, r)\"</p>\n</blockquote>\n\n<p>In my understanding, it equals to following words:\n..., it is the case that neither ... nor ...</p>\n\n<p>So my first two questions are:</p>\n\n<ul>\n<li>is my understanding right?</li>\n<li>what does \"w.v = r.v\" mean?</li>\n</ul>\n\n<p>It also gives an Example: 17.4.5-1</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Thread 1 Thread 2\n\nB = 1; A = 2; \n\nr2 = A; r1 = B; \n</code></pre>\n\n<p>In first execution order:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1: B = 1;\n\n3: A = 2;\n\n2: r2 = A;  // sees initial write of 0\n\n4: r1 = B;  // sees initial write of 0\n</code></pre>\n\n<p>The order itself has already told us that two threads are executed alternately, so my third question is: what does left number mean?</p>\n\n<p>In my understanding, the reason of both r2 and r1 can see initial write of 0 is both A and B are not volatile field. So my fourth quesiton is: whether my understanding is right?</p>\n\n<p>In second execution order:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>1: r2 = A;  // sees write of A = 2\n\n3: r1 = B;  // sees write of B = 1\n\n2: B = 1;\n\n4: A = 2;\n</code></pre>\n\n<p>According to definition of happens-before consistency, it is not difficult to understand this execution order is happens-before consistent(if my first understanding is correct).\nSo my fifth and sixth questions are: does it exist this situation (reads see writes that occur later) in real world? If it does, could you give me a real example?</p>\n"},{"tags":["java","gradle","version","project","java-14"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1684763304,"post_id":76306558,"comment_id":134560085,"body_markdown":"&quot;errors appeared&quot;. Um, yes.","body":"&quot;errors appeared&quot;. Um, yes."},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1684766597,"post_id":76306558,"comment_id":134560942,"body_markdown":"What errors appeared?  And ... how come you need to download some random (archived) project from github to complete your assignment?","body":"What errors appeared?  And ... how come you need to download some random (archived) project from github to complete your assignment?"},{"owner":{"account_id":28654411,"reputation":1,"user_id":21940755,"display_name":"Луцяк Артём Александрович"},"score":0,"creation_date":1684777798,"post_id":76306558,"comment_id":134563384,"body_markdown":"https://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit","body":"<a href=\"https://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit\" rel=\"nofollow noreferrer\">docs.google.com/document/d/&hellip;</a>"},{"owner":{"account_id":28654411,"reputation":1,"user_id":21940755,"display_name":"Луцяк Артём Александрович"},"score":0,"creation_date":1684780035,"post_id":76306558,"comment_id":134563835,"body_markdown":"I expected to see them, but such a huge number is frightening","body":"I expected to see them, but such a huge number is frightening"},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":1,"creation_date":1684786398,"post_id":76306558,"comment_id":134565045,"body_markdown":"Please [edit] the question in order to add new information.","body":"Please <a href=\"https://stackoverflow.com/posts/76306558/edit\">edit</a> the question in order to add new information."},{"owner":{"account_id":28654411,"reputation":1,"user_id":21940755,"display_name":"Луцяк Артём Александрович"},"score":0,"creation_date":1684787147,"post_id":76306558,"comment_id":134565194,"body_markdown":"what exactly should I add to the question?","body":"what exactly should I add to the question?"},{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1684792964,"post_id":76306558,"comment_id":134566044,"body_markdown":"A [mcve] would be helpful, without external links. Links can break, or linked content can change, making the question useless for others with similar problems. See also [ask].","body":"A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be helpful, without external links. Links can break, or linked content can change, making the question useless for others with similar problems. See also <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}],"owner":{"account_id":28654411,"reputation":1,"user_id":21940755,"display_name":"Луцяк Артём Александрович"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1684786966,"creation_date":1684761059,"question_id":76306558,"body_markdown":"I downloaded the project from the git hub to java, he has a gradle build version 6.3, and it needs to be run with the sdk version 14, but for my assignment at the university I need to run the project on version 17, how to raise the gradle version to 7.3 and not break the project\r\nhttps://github.com/slamach/prog-labs/tree/master/prog-lab6 - link to the git from which I downloaded the project\r\n\r\nI tried to change the version in gradle wrapper, but errors appeared during assembly, apparently the problem is in the dependencies, but I do not know what to do with them\r\nhttps://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit - file with exception\r\n","title":"How to update Gradle version to 7.3 in a Java project downloaded from GitHub with JDK 17 and avoid dependency issues?","body":"<p>I downloaded the project from the git hub to java, he has a gradle build version 6.3, and it needs to be run with the sdk version 14, but for my assignment at the university I need to run the project on version 17, how to raise the gradle version to 7.3 and not break the project\n<a href=\"https://github.com/slamach/prog-labs/tree/master/prog-lab6\" rel=\"nofollow noreferrer\">https://github.com/slamach/prog-labs/tree/master/prog-lab6</a> - link to the git from which I downloaded the project</p>\n<p>I tried to change the version in gradle wrapper, but errors appeared during assembly, apparently the problem is in the dependencies, but I do not know what to do with them\n<a href=\"https://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit\" rel=\"nofollow noreferrer\">https://docs.google.com/document/d/1PAoBMxiXy77cMjkulIplKhuw0YXxsO48LMv94oW-jHw/edit</a> - file with exception</p>\n"},{"tags":["java","android","android-studio","kotlin","ide"],"comments":[{"owner":{"account_id":14102121,"reputation":625,"user_id":10187218,"display_name":"Yasin Ege"},"score":0,"creation_date":1684785667,"post_id":76309378,"comment_id":134564920,"body_markdown":"You can change the compileSdkVersion on build.gradle file","body":"You can change the compileSdkVersion on build.gradle file"}],"answers":[{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1684785967,"post_id":76309422,"comment_id":134564971,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76309422/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27267586,"reputation":59,"user_id":20789350,"display_name":"carter"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684786663,"creation_date":1684784600,"answer_id":76309422,"question_id":76309378,"body_markdown":"You can go to file -&gt; project structure -&gt; you click your modules and change the &quot;Compile Sdk Version&quot; property to be 33. \r\n","title":"How to update API level in android studio?","body":"<p>You can go to file -&gt; project structure -&gt; you click your modules and change the &quot;Compile Sdk Version&quot; property to be 33.</p>\n"}],"owner":{"account_id":27648043,"reputation":11,"user_id":21103521,"display_name":"Pranjali Srivastava"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":721,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1684786663,"creation_date":1684784229,"question_id":76309378,"body_markdown":"Currently while executing the program it shows &quot;current API level is 32 please update the API level to 33&quot;. How should I resolve this???\r\n\r\n[enter image description here](https://i.stack.imgur.com/k6fa2.png)\r\nI tried executing my code in android studio, but it says to update the API level. How to fix it?","title":"How to update API level in android studio?","body":"<p>Currently while executing the program it shows &quot;current API level is 32 please update the API level to 33&quot;. How should I resolve this???</p>\n<p><a href=\"https://i.stack.imgur.com/k6fa2.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nI tried executing my code in android studio, but it says to update the API level. How to fix it?</p>\n"},{"tags":["java","rust","java-native-interface"],"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1684773234,"post_id":76307885,"comment_id":134562457,"body_markdown":"probably you must pass an array of `java/lang/String` instances... but I am a Java developer with very limited Rust knowledge","body":"probably you must pass an array of <code>java&#47;lang&#47;String</code> instances... but I am a Java developer with very limited Rust knowledge"},{"owner":{"account_id":198222,"reputation":19310,"user_id":442760,"display_name":"cafce25"},"score":1,"creation_date":1684778288,"post_id":76307885,"comment_id":134563474,"body_markdown":"&quot;it doesn&#39;t work&quot; is about the least useful description of an error ever, can you be more specific, best would be a [mre] of exactly what didn&#39;t work.","body":"&quot;it doesn&#39;t work&quot; is about the least useful description of an error ever, can you be more specific, best would be a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of exactly what didn&#39;t work."},{"owner":{"account_id":198222,"reputation":19310,"user_id":442760,"display_name":"cafce25"},"score":0,"creation_date":1684778426,"post_id":76307885,"comment_id":134563506,"body_markdown":"In your &#39;string array&#39; you have &#39;proper&#39; quotes (`“` and `”`) instead of plain `&quot;` the former while technically correct for text quotation usually doesn&#39;t work to delimit stirngs in programming languages.","body":"In your &#39;string array&#39; you have &#39;proper&#39; quotes (<code>“</code> and <code>”</code>) instead of plain <code>&quot;</code> the former while technically correct for text quotation usually doesn&#39;t work to delimit stirngs in programming languages."}],"answers":[{"comments":[{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691640392,"post_id":76309571,"comment_id":135519512,"body_markdown":"That&#39;s one of three available ways.","body":"That&#39;s one of three available ways."}],"tags":[],"owner":{"account_id":27727288,"reputation":61,"user_id":21166555,"display_name":"Maxim Fineskin"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1684786272,"creation_date":1684786272,"answer_id":76309571,"question_id":76307885,"body_markdown":"Finally. I solved the problem by spending a lot of time studying the documentation. Since I could not find information on the web (that&#39;s why I created the question), I&#39;ll leave the solution here.\r\nTo pass arguments to a method call, you need to do something like this:\r\n```rust\r\n// create Java array of objects (in our case, type string)\r\n// 1 - one element of array\r\n// stringClass - Java string class signature (&quot;java/lang/String&quot;)\r\n// env.new_string(&quot;&quot;) - initial element of array\r\nlet arguments: JObjectArray = env.new_object_array(1, stringClass, env.new_string(&quot;&quot;).unwrap()).unwrap();\r\n\r\n// Set element at index 0\r\n// &amp;arguments - reference to our Java objects array\r\n// 0 - element index (place at)\r\n// env.new_string(&quot;--username&quot;) - the value we set at 0 index (create new java string)\r\nenv.set_object_array_element(&amp;arguments, 0, env.new_string(&quot;--username&quot;).unwrap()).unwrap();\r\n\r\n// JValue - This type is used for parameters passed to Java method calls.\r\n// A reference JValueGen\r\n// docs:  \r\n// https://docs.rs/jni/latest/jni/objects/enum.JValueGen.html#\r\n// https://docs.rs/jni/latest/jni/objects/type.JValue.html\r\n//\r\n// &amp;JObject::from(arguments) - create Java object instance from our arguments object array\r\n// \r\nenv.call_static_method(class,main_method_name, main_signature, &amp;[JValue::Object(&amp;JObject::from(arguments))])\r\n```","title":"JNI Rust how to pass arguments to call_static_method?","body":"<p>Finally. I solved the problem by spending a lot of time studying the documentation. Since I could not find information on the web (that's why I created the question), I'll leave the solution here.\nTo pass arguments to a method call, you need to do something like this:</p>\n<pre class=\"lang-rust prettyprint-override\"><code>// create Java array of objects (in our case, type string)\n// 1 - one element of array\n// stringClass - Java string class signature (&quot;java/lang/String&quot;)\n// env.new_string(&quot;&quot;) - initial element of array\nlet arguments: JObjectArray = env.new_object_array(1, stringClass, env.new_string(&quot;&quot;).unwrap()).unwrap();\n\n// Set element at index 0\n// &amp;arguments - reference to our Java objects array\n// 0 - element index (place at)\n// env.new_string(&quot;--username&quot;) - the value we set at 0 index (create new java string)\nenv.set_object_array_element(&amp;arguments, 0, env.new_string(&quot;--username&quot;).unwrap()).unwrap();\n\n// JValue - This type is used for parameters passed to Java method calls.\n// A reference JValueGen\n// docs:  \n// https://docs.rs/jni/latest/jni/objects/enum.JValueGen.html#\n// https://docs.rs/jni/latest/jni/objects/type.JValue.html\n//\n// &amp;JObject::from(arguments) - create Java object instance from our arguments object array\n// \nenv.call_static_method(class,main_method_name, main_signature, &amp;[JValue::Object(&amp;JObject::from(arguments))])\n</code></pre>\n"}],"owner":{"account_id":27727288,"reputation":61,"user_id":21166555,"display_name":"Maxim Fineskin"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":348,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":76309571,"answer_count":1,"score":2,"last_activity_date":1684786272,"creation_date":1684770375,"question_id":76307885,"body_markdown":"This is my first project using jni.\r\n\r\nI am trying to invoke a Java method from Rust.\r\n\r\nJava method signature looks like this:\r\n```java\r\npublic static void main(String[] args) {...}\r\n```\r\nOn the Rust side, I create a JavaVM, find the class and try to call static method, but I don&#39;t know how to pass the arguments\r\n```rust\r\nenv.call_static_method(class, &quot;main&quot;, &quot;([Ljava/lang/String;)V&quot;, HowPassArgumentsThere?)\r\n.expect(&quot;Failed to invoke main method&quot;);\r\n```\r\nArguments are an array of strings as I understand it. And I have to put something like this:\r\n\r\n```\r\n[\r\n“—username”, “Test”,\r\n“—version”, “1.7.10”,\r\n“—uuid”, “4f19c3577b774731bcc663e536ebd108”, \r\n“—accessToken”, “12412412412”,\r\n“—userProperties”, “{}”\r\n]\r\n```\r\n\r\nFull code available there: https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=03c197068218a00b3e0a2d8f170dda16\r\n\r\ni tried to create an object array according to how it&#39;s done in cpp\r\n```c++\r\njobjectArray str_array = Env-&gt;NewObjectArray(Env, 4, Env-&gt;FindClass(Env, &#39;java/lang/String&#39;), Env-&gt;NewString(Env, NULL, 0));\r\nArguments[0] = &#39;--username&#39;;\r\nArguments[1] = &#39;Player&#39;;\r\nArguments[2] = &#39;--accessToken&#39;;\r\nArguments[3] = &#39;12345&#39;;\r\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 0, Env-&gt;NewString(Env, &amp;Arguments[0]), strlen(Arguments[0]));\r\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 1, Env-&gt;NewString(Env, &amp;Arguments[1]), strlen(Arguments[1]));\r\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 2, Env-&gt;NewString(Env, &amp;Arguments[2]), strlen(Arguments[2]));\r\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 3, Env-&gt;NewString(Env, &amp;Arguments[3]), strlen(Arguments[3]));\r\n\r\nenv-&gt;CallStaticVoidMethod(class_Launch, env-&gt;GetStaticMethodID(class_Launch, &quot;main&quot;, &quot;([Ljava/lang/String;)V&quot;), str_array);\r\njvm-&gt;DestroyJavaVM();\r\n```\r\nBut in Rust it doesn&#39;t work. Any ideas?","title":"JNI Rust how to pass arguments to call_static_method?","body":"<p>This is my first project using jni.</p>\n<p>I am trying to invoke a Java method from Rust.</p>\n<p>Java method signature looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {...}\n</code></pre>\n<p>On the Rust side, I create a JavaVM, find the class and try to call static method, but I don't know how to pass the arguments</p>\n<pre class=\"lang-rust prettyprint-override\"><code>env.call_static_method(class, &quot;main&quot;, &quot;([Ljava/lang/String;)V&quot;, HowPassArgumentsThere?)\n.expect(&quot;Failed to invoke main method&quot;);\n</code></pre>\n<p>Arguments are an array of strings as I understand it. And I have to put something like this:</p>\n<pre><code>[\n“—username”, “Test”,\n“—version”, “1.7.10”,\n“—uuid”, “4f19c3577b774731bcc663e536ebd108”, \n“—accessToken”, “12412412412”,\n“—userProperties”, “{}”\n]\n</code></pre>\n<p>Full code available there: <a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=03c197068218a00b3e0a2d8f170dda16\" rel=\"nofollow noreferrer\">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=03c197068218a00b3e0a2d8f170dda16</a></p>\n<p>i tried to create an object array according to how it's done in cpp</p>\n<pre class=\"lang-cpp prettyprint-override\"><code>jobjectArray str_array = Env-&gt;NewObjectArray(Env, 4, Env-&gt;FindClass(Env, 'java/lang/String'), Env-&gt;NewString(Env, NULL, 0));\nArguments[0] = '--username';\nArguments[1] = 'Player';\nArguments[2] = '--accessToken';\nArguments[3] = '12345';\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 0, Env-&gt;NewString(Env, &amp;Arguments[0]), strlen(Arguments[0]));\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 1, Env-&gt;NewString(Env, &amp;Arguments[1]), strlen(Arguments[1]));\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 2, Env-&gt;NewString(Env, &amp;Arguments[2]), strlen(Arguments[2]));\nEnv-&gt;SetObjectArrayElement(Env, JavaObjectArray, 3, Env-&gt;NewString(Env, &amp;Arguments[3]), strlen(Arguments[3]));\n\nenv-&gt;CallStaticVoidMethod(class_Launch, env-&gt;GetStaticMethodID(class_Launch, &quot;main&quot;, &quot;([Ljava/lang/String;)V&quot;), str_array);\njvm-&gt;DestroyJavaVM();\n</code></pre>\n<p>But in Rust it doesn't work. Any ideas?</p>\n"},{"tags":["java","google-app-engine","namespaces","google-cloud-datastore","multi-tenant"],"comments":[{"owner":{"account_id":1078814,"reputation":11,"user_id":1076384,"display_name":"user1076384"},"score":0,"creation_date":1366751728,"post_id":16178359,"comment_id":23127720,"body_markdown":"Also this is how I do the makePersistentAll (after the saxParser.parse line ... pm.makePersistentAll(layouts);","body":"Also this is how I do the makePersistentAll (after the saxParser.parse line ... pm.makePersistentAll(layouts);"}],"answers":[{"comments":[{"owner":{"account_id":1078814,"reputation":11,"user_id":1076384,"display_name":"user1076384"},"score":0,"creation_date":1366838237,"post_id":16200980,"comment_id":23167649,"body_markdown":"This is what goes in the jdoconfig.xml&lt;property name=&quot;datanucleus.appengine.datastoreEnableXGTransactions&quot; value=&quot;true&quot;/&gt;","body":"This is what goes in the jdoconfig.xml&lt;property name=&quot;datanucleus.appengine.datastoreEnableXGTransactions&quot; value=&quot;true&quot;/&gt;"}],"tags":[],"owner":{"account_id":1078814,"reputation":11,"user_id":1076384,"display_name":"user1076384"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684785856,"creation_date":1366833305,"answer_id":16200980,"question_id":16178359,"body_markdown":"I resolved this issue by \r\n\r\n1) removing the jdo 1.5 libs which were being cached in my application libraries (I had switched to v2, but they were still there.\r\nThe way I removed them was to start a new project and copy my code over.\r\n\r\nThis revealed some issues locally, e.g. now an exception was thrown in my localhost which instructed me to enable xg transactions...\r\n\r\n2) adding the following to the jdoconfig.xml ...\r\n\r\n&lt;property name=&quot;datanucleus.appengine.datastoreEnableXGTransactions&quot; value=&quot;true&quot;/&gt;\r\n\r\n3) I am using transactions.\r\n\r\nI don&#39;t entirely understand the solution, because the transaction is simply persisting a collection of objects of type Layout. I&#39;m happy it works.\r\n\r\nNow the data is being persisted on the production (remote) copy as well as my localhost, according to the namespaces.  \r\n\r\n\r\n\r\n","title":"GAE application works locally, not on appengine (remote copy)","body":"<p>I resolved this issue by</p>\n<ol>\n<li>removing the jdo 1.5 libs which were being cached in my application libraries (I had switched to v2, but they were still there.\nThe way I removed them was to start a new project and copy my code over.</li>\n</ol>\n<p>This revealed some issues locally, e.g. now an exception was thrown in my localhost which instructed me to enable xg transactions...</p>\n<ol start=\"2\">\n<li>adding the following to the jdoconfig.xml ...</li>\n</ol>\n\n<ol start=\"3\">\n<li>I am using transactions.</li>\n</ol>\n<p>I don't entirely understand the solution, because the transaction is simply persisting a collection of objects of type Layout. I'm happy it works.</p>\n<p>Now the data is being persisted on the production (remote) copy as well as my localhost, according to the namespaces.</p>\n"}],"owner":{"account_id":1078814,"reputation":11,"user_id":1076384,"display_name":"user1076384"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":229,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1684785856,"creation_date":1366748139,"question_id":16178359,"body_markdown":"I wrote a web application with servlets and using the datastore and namespace apis.\r\n\r\nThis works great on my localhost, but never stores data on the deployed copy.\r\n\r\nI followed the multi-tenancy with java documentation, along with another reference so that I could read xml and store it in the BigTable.\r\n\r\nMake the class persistable:\r\n\r\n    `@PersistenceCapable(identityType = IdentityType.APPLICATION)\r\n    public class Layout {\r\n    \t\r\n    \t@PrimaryKey\r\n        @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)\r\n        private Key key;\r\n    \t\r\n        private String id;&#39;\r\n\r\nStore the data:\r\n\r\n    `customerKey = KeyFactory.createKey(Layout.class.getSimpleName(), layout.getId());\r\n    \t\t\tlayout.setKey(customerKey);`\r\n\r\nNow make it persistent ...\r\n\r\n    `pm = XMLImportPersistenceManagerFactory.get().getPersistenceManager();\r\n    \t\t\tSAXParser saxParser = factory.newSAXParser();\r\n    \t\t\tsaxParser.parse(new InputSource(_URL_STRINGS), this);`\r\n\r\nThen close it ...\r\n\r\n    pm.close()\r\n\r\nThe code works beautifully in my localhost. It does not work that I can see on appengine. The servlet runs, but no data is ever stored.\r\n\r\nIf you hit the url, it will say Layouts Created, and I will see a 200 in the logs, but no data. That tells me the servlet is running.\r\nHere is my app: http://layoutimporter.appspot.com/CreateLayout?namespace=boston\r\n\r\nSome closing details. I wrote a Namespace filter to set the namespace based on the parameter in the querystring.  \r\n\r\nI am running a warmup servlet to intialize the PersistenceManagerFactory to avoid loading requests = 1.\r\n\r\nAny ideas on this one. I have exhausted my resources and am spooling among all the same threads that are related to &quot;oops, I can&#39;t find your kinds ...&quot; etc.\r\n\r\nI tried deleting the deployed copy and starting a new deployed copy. I tried reversioning the deployed copy. No joy. I can out.print the namespaces and data after persisting it when I do so on the local copy, but not ever on the remote copy.  This is a real stumper!\r\n\r\nThanks!\r\n\r\n..\\Wendy\r\n\t\t\t","title":"GAE application works locally, not on appengine (remote copy)","body":"<p>I wrote a web application with servlets and using the datastore and namespace apis.</p>\n\n<p>This works great on my localhost, but never stores data on the deployed copy.</p>\n\n<p>I followed the multi-tenancy with java documentation, along with another reference so that I could read xml and store it in the BigTable.</p>\n\n<p>Make the class persistable:</p>\n\n<pre><code>`@PersistenceCapable(identityType = IdentityType.APPLICATION)\npublic class Layout {\n\n    @PrimaryKey\n    @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)\n    private Key key;\n\n    private String id;'\n</code></pre>\n\n<p>Store the data:</p>\n\n<pre><code>`customerKey = KeyFactory.createKey(Layout.class.getSimpleName(), layout.getId());\n            layout.setKey(customerKey);`\n</code></pre>\n\n<p>Now make it persistent ...</p>\n\n<pre><code>`pm = XMLImportPersistenceManagerFactory.get().getPersistenceManager();\n            SAXParser saxParser = factory.newSAXParser();\n            saxParser.parse(new InputSource(_URL_STRINGS), this);`\n</code></pre>\n\n<p>Then close it ...</p>\n\n<pre><code>pm.close()\n</code></pre>\n\n<p>The code works beautifully in my localhost. It does not work that I can see on appengine. The servlet runs, but no data is ever stored.</p>\n\n<p>If you hit the url, it will say Layouts Created, and I will see a 200 in the logs, but no data. That tells me the servlet is running.\nHere is my app: <a href=\"http://layoutimporter.appspot.com/CreateLayout?namespace=boston\" rel=\"nofollow\">http://layoutimporter.appspot.com/CreateLayout?namespace=boston</a></p>\n\n<p>Some closing details. I wrote a Namespace filter to set the namespace based on the parameter in the querystring.  </p>\n\n<p>I am running a warmup servlet to intialize the PersistenceManagerFactory to avoid loading requests = 1.</p>\n\n<p>Any ideas on this one. I have exhausted my resources and am spooling among all the same threads that are related to \"oops, I can't find your kinds ...\" etc.</p>\n\n<p>I tried deleting the deployed copy and starting a new deployed copy. I tried reversioning the deployed copy. No joy. I can out.print the namespaces and data after persisting it when I do so on the local copy, but not ever on the remote copy.  This is a real stumper!</p>\n\n<p>Thanks!</p>\n\n<p>..\\Wendy</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9807,"page":418,"page_size":100}
