{"items":[{"tags":["java","spring","spring-boot","thymeleaf"],"comments":[{"owner":{"account_id":15750954,"reputation":315,"user_id":11365529,"display_name":"berkancetin"},"score":0,"creation_date":1560258703,"post_id":55879751,"comment_id":99670638,"body_markdown":"have you found the solution to this problem?","body":"have you found the solution to this problem?"},{"owner":{"account_id":6384435,"reputation":145,"user_id":4952812,"display_name":"Kate"},"score":0,"creation_date":1652618097,"post_id":55879751,"comment_id":127644495,"body_markdown":"Hi, Did you find a solution? I&#39;m working with Eclipse 2022","body":"Hi, Did you find a solution? I&#39;m working with Eclipse 2022"}],"answers":[{"tags":[],"owner":{"account_id":14355952,"reputation":31,"user_id":10369830,"display_name":"S.H."},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1600677852,"creation_date":1600676688,"answer_id":63988624,"question_id":55879751,"body_markdown":"I was facing the same issue I done the following steps.\r\n1. Open .log file under .metadata of the work-space\r\n2. Open the Thymeleaf template (html) after th: press Ctrl+sapce\r\n3. Check the exception in .log file \r\nIn my case it was groovy runtime exception so I un-install and installed groovy plug-in\r\nRestart eclipse and thymeleaf content assistant stared working.\r\n\r\n\r\n    [ groovy.lang.GroovyRuntimeException: Could not find matching constructor for: org.thymeleaf.extras.eclipse.contentassist.autocomplete.proposals.AttributeProcessorCompletionProposal(org.thymeleaf.extras.eclipse.dialect.xml.ElementProcessor, Integer, Integer, Boolean) ]\r\n\r\n[Screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gaZig.png\r\n","title":"Thymeleaf content assistant not working with Spring Boot","body":"<p>I was facing the same issue I done the following steps.</p>\n<ol>\n<li><p>Open .log file under .metadata of the work-space</p>\n</li>\n<li><p>Open the Thymeleaf template (html) after th: press Ctrl+sapce</p>\n</li>\n<li><p>Check the exception in .log file\nIn my case it was groovy runtime exception so I un-install and installed groovy plug-in\nRestart eclipse and thymeleaf content assistant stared working.</p>\n<p>[ groovy.lang.GroovyRuntimeException: Could not find matching constructor for: org.thymeleaf.extras.eclipse.contentassist.autocomplete.proposals.AttributeProcessorCompletionProposal(org.thymeleaf.extras.eclipse.dialect.xml.ElementProcessor, Integer, Integer, Boolean) ]</p>\n</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/gaZig.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n"},{"tags":[],"owner":{"account_id":5987036,"reputation":394,"user_id":4704305,"display_name":"RSG"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1603393942,"creation_date":1603393942,"answer_id":64489016,"question_id":55879751,"body_markdown":"Got same problem but it went away after upgrade Spring Tools 4.","title":"Thymeleaf content assistant not working with Spring Boot","body":"<p>Got same problem but it went away after upgrade Spring Tools 4.</p>\n"},{"tags":[],"owner":{"account_id":13927811,"reputation":3,"user_id":10056674,"display_name":"RVP"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630702002,"creation_date":1630651882,"answer_id":69040641,"question_id":55879751,"body_markdown":"I also faced the same, and tried a lot of things, then I saw below error in .log file inside .metadata/ folder:\r\n\r\n```\r\n!ENTRY org.eclipse.equinox.p2.repository 2 0 2021-09-03 12:04:19.422\r\n!MESSAGE Server returned lastModified &lt;= 0 for https://raw.githubusercontent.com/thymeleaf/thymeleaf-extras-eclipse-plugin/update-site/2.1.2/content.jar\r\n```\r\nSo I basically downloaded jar from link:\r\nhttps://raw.githubusercontent.com/thymeleaf/thymeleaf-extras-eclipse-plugin/update-site/2.1.2/content.jar\r\n\r\nand installed this plugin in STS via: Help-&gt; Install New Software -&gt;Add -&gt; &lt;enter name and Select downloaded jar(content.jar) after clicking on Archive&gt;\r\n \r\nI Installed the plugin using above steps and it worked for me.\r\n\r\n[Screenshot][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6NRqk.png\r\n\r\nAlso one more point I have observed, that it is not working with jdk16, it is working fine with jdk8.","title":"Thymeleaf content assistant not working with Spring Boot","body":"<p>I also faced the same, and tried a lot of things, then I saw below error in .log file inside .metadata/ folder:</p>\n<pre><code>!ENTRY org.eclipse.equinox.p2.repository 2 0 2021-09-03 12:04:19.422\n!MESSAGE Server returned lastModified &lt;= 0 for https://raw.githubusercontent.com/thymeleaf/thymeleaf-extras-eclipse-plugin/update-site/2.1.2/content.jar\n</code></pre>\n<p>So I basically downloaded jar from link:\n<a href=\"https://raw.githubusercontent.com/thymeleaf/thymeleaf-extras-eclipse-plugin/update-site/2.1.2/content.jar\" rel=\"nofollow noreferrer\">https://raw.githubusercontent.com/thymeleaf/thymeleaf-extras-eclipse-plugin/update-site/2.1.2/content.jar</a></p>\n<p>and installed this plugin in STS via: Help-&gt; Install New Software -&gt;Add -&gt; &lt;enter name and Select downloaded jar(content.jar) after clicking on Archive&gt;</p>\n<p>I Installed the plugin using above steps and it worked for me.</p>\n<p><a href=\"https://i.stack.imgur.com/6NRqk.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n<p>Also one more point I have observed, that it is not working with jdk16, it is working fine with jdk8.</p>\n"},{"tags":[],"owner":{"account_id":25806054,"reputation":1,"user_id":19547572,"display_name":"user19547572"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1657785274,"creation_date":1657785274,"answer_id":72977056,"question_id":55879751,"body_markdown":"After appending the following line to the eclipse.ini, adding the Thymeleaf Nature doesn&#39;t fail any more and the content assist works:\r\n\r\n--add-opens=java.base/java.lang=ALL-UNNAMED","title":"Thymeleaf content assistant not working with Spring Boot","body":"<p>After appending the following line to the eclipse.ini, adding the Thymeleaf Nature doesn't fail any more and the content assist works:</p>\n<p>--add-opens=java.base/java.lang=ALL-UNNAMED</p>\n"},{"tags":[],"owner":{"account_id":27957132,"reputation":1,"user_id":21349734,"display_name":"Piyush"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1678199406,"creation_date":1678199406,"answer_id":75663279,"question_id":55879751,"body_markdown":"It may get fixed in future releases until you can use thymeleaf extension on vscode editor as an alternative.","title":"Thymeleaf content assistant not working with Spring Boot","body":"<p>It may get fixed in future releases until you can use thymeleaf extension on vscode editor as an alternative.</p>\n"}],"owner":{"account_id":2840840,"reputation":283,"user_id":2440495,"display_name":"ArL"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4939,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1698411223,"creation_date":1556362093,"question_id":55879751,"body_markdown":"The thymeleaf content assist is not working, when I type th: prefix in the HTML files, only a th:block proposal is showing.\r\n\r\n    &lt;th:block\r\n\r\nI have tried to move up the Thymeleaf Processor Proposals to the top in the STS/elipse settings for HTML files but not work.\r\n\r\nThe project is Spring Boot + Thymeleaf, Gradle snippet:\r\n\r\n    plugins {\r\n    \tid &#39;org.springframework.boot&#39; version &#39;2.1.4.RELEASE&#39;\r\n    \tid &#39;java&#39;\r\n    }\r\n    \r\n    apply plugin: &#39;io.spring.dependency-management&#39;\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    \timplementation &quot;org.springframework.boot:spring-boot-starter-thymeleaf&quot;\r\n    \timplementation &quot;org.springframework.boot:spring-boot-devtools&quot;\r\n    }\r\n\r\nI have added html namespace:\r\n\r\n    &lt;html xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;\r\nchange the th namespace to another does not work;\r\n\r\nwell, the only working time is that th just replaces the HTML th posotion...\r\n   \r\n\r\n    &lt;table&gt;\r\n    \t\t&lt;tbody&gt;\r\n    \t\t\t&lt;tr th:","title":"Thymeleaf content assistant not working with Spring Boot","body":"<p>The thymeleaf content assist is not working, when I type th: prefix in the HTML files, only a th:block proposal is showing.</p>\n\n<pre><code>&lt;th:block\n</code></pre>\n\n<p>I have tried to move up the Thymeleaf Processor Proposals to the top in the STS/elipse settings for HTML files but not work.</p>\n\n<p>The project is Spring Boot + Thymeleaf, Gradle snippet:</p>\n\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.1.4.RELEASE'\n    id 'java'\n}\n\napply plugin: 'io.spring.dependency-management'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation \"org.springframework.boot:spring-boot-starter-thymeleaf\"\n    implementation \"org.springframework.boot:spring-boot-devtools\"\n}\n</code></pre>\n\n<p>I have added html namespace:</p>\n\n<pre><code>&lt;html xmlns:th=\"http://www.thymeleaf.org\"&gt;\n</code></pre>\n\n<p>change the th namespace to another does not work;</p>\n\n<p>well, the only working time is that th just replaces the HTML th posotion...</p>\n\n<pre><code>&lt;table&gt;\n        &lt;tbody&gt;\n            &lt;tr th:\n</code></pre>\n"},{"tags":["java","video","webview","androidx"],"owner":{"account_id":28899694,"reputation":1,"user_id":22134954,"display_name":"Matin Javid"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698410919,"creation_date":1698410919,"question_id":77374285,"body_markdown":"I am developing an android browser using webview!\r\nWhen I enter the YouTube site in my browser and click on the full screen video, nothing happens!\r\nI want when I click on the full screen option, the video will be displayed in a separate section, full screen and horizontally!\r\n\r\nImage of my browser\r\n[enter image description here][1]\r\n\r\n\r\nOther people&#39;s browser image\r\n[enter image description here][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/20V6u.jpg\r\n  [2]: https://i.stack.imgur.com/OccDC.jpg","title":"Full screen video display in Android webview","body":"<p>I am developing an android browser using webview!\nWhen I enter the YouTube site in my browser and click on the full screen video, nothing happens!\nI want when I click on the full screen option, the video will be displayed in a separate section, full screen and horizontally!</p>\n<p>Image of my browser\n<a href=\"https://i.stack.imgur.com/20V6u.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>Other people's browser image\n<a href=\"https://i.stack.imgur.com/OccDC.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","proxy"],"answers":[{"tags":[],"owner":{"account_id":111563,"reputation":13269,"user_id":294657,"accept_rate":85,"display_name":"kaqqao"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698410711,"creation_date":1698410094,"answer_id":77374194,"question_id":77372570,"body_markdown":"Java&#39;s proxies cannot extend a class, because they already extend `java.lang.reflect.Proxy`. They can only implement interfaces, so you&#39;ll never be able to get a `BigDecimal` instance, only a `Comparable`. If you need more capabilities, you have to look into ByteBuddy, CGLib (this is what Spring uses when it has to proxy concrete classes, but it&#39;s barely maintained these days) or similars libs, they can produce what you&#39;re after.\r\n\r\nHere&#39;s one way to do it using ByteBuddy (note that I&#39;m not exactly familiar with ByteBuddy, so I may have done something wrong):\r\n\r\n```java\r\npublic class Test {\r\n\r\n    //No need to generate a new class for each proxy instance\r\n    private static final Class&lt;? extends BigDecimal&gt; PROXY_TYPE = generateProxy();\r\n\r\n    private static Class&lt;? extends BigDecimal&gt; generateProxy() {\r\n        return new ByteBuddy()\r\n                .subclass(BigDecimal.class)\r\n                .method(ElementMatchers.isEquals())\r\n                .intercept(MethodDelegation.to(Interceptor.class))\r\n                .make()\r\n                .load(Test.class.getClassLoader()) //BigDecimal classloader won&#39;t know where to find Interceptor.class\r\n                .getLoaded();\r\n    }\r\n\r\n    public static class Interceptor {\r\n        @RuntimeType\r\n        public static boolean intercept(@This BigDecimal _this, @AllArguments Object[] args) throws Throwable {\r\n            Object that = args[0];\r\n            return that instanceof BigDecimal &amp;&amp; _this.compareTo((BigDecimal) that) == 0;\r\n        }\r\n    }\r\n\r\n    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\r\n        try {\r\n            return PROXY_TYPE.getConstructor(String.class).newInstance(scaleAwareBigDecimal.toString());\r\n        } catch (ReflectiveOperationException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n\r\n    @Test\r\n    public void testCustomBigDecimal() {\r\n        BigDecimal ten = BigDecimal.TEN;\r\n        BigDecimal x = getScaleObliviousProxy(new BigDecimal(&quot;10.0&quot;));\r\n        assertTrue(x.equals(ten));\r\n    }\r\n}\r\n```","title":"ClassCastException when trying to make a class proxy","body":"<p>Java's proxies cannot extend a class, because they already extend <code>java.lang.reflect.Proxy</code>. They can only implement interfaces, so you'll never be able to get a <code>BigDecimal</code> instance, only a <code>Comparable</code>. If you need more capabilities, you have to look into ByteBuddy, CGLib (this is what Spring uses when it has to proxy concrete classes, but it's barely maintained these days) or similars libs, they can produce what you're after.</p>\n<p>Here's one way to do it using ByteBuddy (note that I'm not exactly familiar with ByteBuddy, so I may have done something wrong):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Test {\n\n    //No need to generate a new class for each proxy instance\n    private static final Class&lt;? extends BigDecimal&gt; PROXY_TYPE = generateProxy();\n\n    private static Class&lt;? extends BigDecimal&gt; generateProxy() {\n        return new ByteBuddy()\n                .subclass(BigDecimal.class)\n                .method(ElementMatchers.isEquals())\n                .intercept(MethodDelegation.to(Interceptor.class))\n                .make()\n                .load(Test.class.getClassLoader()) //BigDecimal classloader won't know where to find Interceptor.class\n                .getLoaded();\n    }\n\n    public static class Interceptor {\n        @RuntimeType\n        public static boolean intercept(@This BigDecimal _this, @AllArguments Object[] args) throws Throwable {\n            Object that = args[0];\n            return that instanceof BigDecimal &amp;&amp; _this.compareTo((BigDecimal) that) == 0;\n        }\n    }\n\n    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\n        try {\n            return PROXY_TYPE.getConstructor(String.class).newInstance(scaleAwareBigDecimal.toString());\n        } catch (ReflectiveOperationException e) {\n            throw new RuntimeException(e);\n        }\n    }\n\n    @Test\n    public void testCustomBigDecimal() {\n        BigDecimal ten = BigDecimal.TEN;\n        BigDecimal x = getScaleObliviousProxy(new BigDecimal(&quot;10.0&quot;));\n        assertTrue(x.equals(ten));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":28965224,"reputation":321,"user_id":22186847,"display_name":"JoreJoh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698410711,"creation_date":1698395072,"question_id":77372570,"body_markdown":"Why doesn&#39;t it work (specifically, the cast)? I thought a proxy extends the original class so it should go smoothly since casting to a superclass is always fine\r\n```\r\npublic class BigDecimalUtils {\r\n    /**\r\n     * Compares two instances of &lt;code&gt;BigDecimal&lt;/code&gt; ignoring scale\r\n     * @return &lt;code&gt;true&lt;/code&gt; if two decimals are equal, &lt;code&gt;false&lt;/code&gt; otherwise\r\n     */\r\n    public static boolean areEqual(BigDecimal firstDecimal, BigDecimal secondDecimal) {\r\n        return firstDecimal.compareTo(secondDecimal) == 0;\r\n    }\r\n\r\n    /**\r\n     * Returns a &lt;code&gt;BigDecimal&lt;/code&gt; proxy with an overriden &lt;code&gt;equals()&lt;/code&gt; method that doesn&#39;t take scale into account\r\n     * @param scaleAwareBigDecimal &lt;code&gt;BigDecimal&lt;/code&gt; that needs to be proxied\r\n     * @return new &lt;code&gt;BigDecimal&lt;/code&gt; proxy instance\r\n     */\r\n    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\r\n        return (BigDecimal) Proxy.newProxyInstance(\r\n                scaleAwareBigDecimal.getClass().getClassLoader(),\r\n                scaleAwareBigDecimal.getClass().getInterfaces(),\r\n                (proxy, method, args) -&gt; {\r\n                    if (isEquals(method)) {\r\n                        BigDecimal bigDecimalEqualsWasCalledOn = (BigDecimal) proxy;\r\n                        BigDecimal bigDecimalPassedToEquals = (BigDecimal) args[0];\r\n                        return areEqual(bigDecimalEqualsWasCalledOn, bigDecimalPassedToEquals);\r\n                    } else {\r\n                        return invokeAsUsual(proxy, method, args);\r\n                    }\r\n                });\r\n    }\r\n\r\n    private static boolean isEquals(Method method) {\r\n        return method.getName().equals(&quot;equals&quot;);\r\n    }\r\n\r\n    private static Object invokeAsUsual(Object proxy, Method method, Object[] args) throws IllegalAccessException, InvocationTargetException {\r\n        return method.invoke(proxy, args);\r\n    }\r\n}\r\n```\r\n```\r\njava.lang.ClassCastException: class jdk.proxy1.$Proxy8 cannot be cast to class java.math.BigDecimal (jdk.proxy1.$Proxy8 is in module jdk.proxy1 of loader &#39;bootstrap&#39;; java.math.BigDecimal is in module java.base of loader &#39;bootstrap&#39;)\r\n```\r\nSuppose, the proxy simply implemented the same interfaces (in this case, `Comparable` since it&#39;s the only interface implemented by `BigDecimal`). I tried to fool it:\r\n```java\r\n    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\r\n        return (BigDecimal) Proxy.newProxyInstance(\r\n                scaleAwareBigDecimal.getClass().getClassLoader(),\r\n                new Class&lt;?&gt;[0], // &quot;You know what, it doesn&#39;t implement anything! Go extend&quot;\r\n                (proxy, method, args) -&gt; {\r\n```\r\nbut I got the same exception\r\n\r\nHow do I solve this problem? Is there any way to force it to use extension-based proxying, not interface-based one?\r\n\r\n**P.S.:** Surely, I can do something like this\r\n```java\r\n    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\r\n        return new BigDecimal(scaleAwareBigDecimal.toString()) {\r\n            @Override\r\n            public boolean equals(Object otherObject) {\r\n                return otherObject instanceof BigDecimal &amp;&amp;\r\n                        areEqual(this, (BigDecimal) otherObject);\r\n            }\r\n        };\r\n    }\r\n```\r\nbut imagine I want to perform some runtime post-processing","title":"ClassCastException when trying to make a class proxy","body":"<p>Why doesn't it work (specifically, the cast)? I thought a proxy extends the original class so it should go smoothly since casting to a superclass is always fine</p>\n<pre><code>public class BigDecimalUtils {\n    /**\n     * Compares two instances of &lt;code&gt;BigDecimal&lt;/code&gt; ignoring scale\n     * @return &lt;code&gt;true&lt;/code&gt; if two decimals are equal, &lt;code&gt;false&lt;/code&gt; otherwise\n     */\n    public static boolean areEqual(BigDecimal firstDecimal, BigDecimal secondDecimal) {\n        return firstDecimal.compareTo(secondDecimal) == 0;\n    }\n\n    /**\n     * Returns a &lt;code&gt;BigDecimal&lt;/code&gt; proxy with an overriden &lt;code&gt;equals()&lt;/code&gt; method that doesn't take scale into account\n     * @param scaleAwareBigDecimal &lt;code&gt;BigDecimal&lt;/code&gt; that needs to be proxied\n     * @return new &lt;code&gt;BigDecimal&lt;/code&gt; proxy instance\n     */\n    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\n        return (BigDecimal) Proxy.newProxyInstance(\n                scaleAwareBigDecimal.getClass().getClassLoader(),\n                scaleAwareBigDecimal.getClass().getInterfaces(),\n                (proxy, method, args) -&gt; {\n                    if (isEquals(method)) {\n                        BigDecimal bigDecimalEqualsWasCalledOn = (BigDecimal) proxy;\n                        BigDecimal bigDecimalPassedToEquals = (BigDecimal) args[0];\n                        return areEqual(bigDecimalEqualsWasCalledOn, bigDecimalPassedToEquals);\n                    } else {\n                        return invokeAsUsual(proxy, method, args);\n                    }\n                });\n    }\n\n    private static boolean isEquals(Method method) {\n        return method.getName().equals(&quot;equals&quot;);\n    }\n\n    private static Object invokeAsUsual(Object proxy, Method method, Object[] args) throws IllegalAccessException, InvocationTargetException {\n        return method.invoke(proxy, args);\n    }\n}\n</code></pre>\n<pre><code>java.lang.ClassCastException: class jdk.proxy1.$Proxy8 cannot be cast to class java.math.BigDecimal (jdk.proxy1.$Proxy8 is in module jdk.proxy1 of loader 'bootstrap'; java.math.BigDecimal is in module java.base of loader 'bootstrap')\n</code></pre>\n<p>Suppose, the proxy simply implemented the same interfaces (in this case, <code>Comparable</code> since it's the only interface implemented by <code>BigDecimal</code>). I tried to fool it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\n        return (BigDecimal) Proxy.newProxyInstance(\n                scaleAwareBigDecimal.getClass().getClassLoader(),\n                new Class&lt;?&gt;[0], // &quot;You know what, it doesn't implement anything! Go extend&quot;\n                (proxy, method, args) -&gt; {\n</code></pre>\n<p>but I got the same exception</p>\n<p>How do I solve this problem? Is there any way to force it to use extension-based proxying, not interface-based one?</p>\n<p><strong>P.S.:</strong> Surely, I can do something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static BigDecimal getScaleObliviousProxy(BigDecimal scaleAwareBigDecimal) {\n        return new BigDecimal(scaleAwareBigDecimal.toString()) {\n            @Override\n            public boolean equals(Object otherObject) {\n                return otherObject instanceof BigDecimal &amp;&amp;\n                        areEqual(this, (BigDecimal) otherObject);\n            }\n        };\n    }\n</code></pre>\n<p>but imagine I want to perform some runtime post-processing</p>\n"},{"tags":["java","netbeans","centos"],"comments":[{"owner":{"account_id":1933692,"reputation":260,"user_id":1742529,"display_name":"user1742529"},"score":0,"creation_date":1580312595,"post_id":29052219,"comment_id":106057829,"body_markdown":"recheck please both:\n`java -version` , `javac -version`","body":"recheck please both: <code>java -version</code> , <code>javac -version</code>"}],"answers":[{"tags":[],"owner":{"account_id":1338540,"reputation":9401,"user_id":1280723,"accept_rate":76,"display_name":"Crazyjavahacking"},"down_vote_count":1,"up_vote_count":44,"is_accepted":true,"score":43,"last_activity_date":1426356024,"creation_date":1426356024,"answer_id":29052292,"question_id":29052219,"body_markdown":"**I do recommend you to change the configuration of JDK used by NetBeans in `netbeans.conf` config file**:\r\n\r\n    netbeans_jdkhome=&quot;C:\\Program Files\\Java\\...&quot;\r\n","title":"Cannot find java. Please use the --jdkhome switch","body":"<p><strong>I do recommend you to change the configuration of JDK used by NetBeans in <code>netbeans.conf</code> config file</strong>:</p>\n\n<pre><code>netbeans_jdkhome=\"C:\\Program Files\\Java\\...\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2631859,"reputation":83,"user_id":2277613,"display_name":"ntm"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1461338116,"creation_date":1461338116,"answer_id":36797550,"question_id":29052219,"body_markdown":"Check the setting in your user config `/home/username/.netbeans/version/etc/netbeans.conf`\r\n\r\nI had the problem where I was specifying the location globally, but my user setting was overriding the global setting.\r\n\r\nCentOS 7/Netbeans 8.1","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>Check the setting in your user config <code>/home/username/.netbeans/version/etc/netbeans.conf</code></p>\n\n<p>I had the problem where I was specifying the location globally, but my user setting was overriding the global setting.</p>\n\n<p>CentOS 7/Netbeans 8.1</p>\n"},{"tags":[],"owner":{"account_id":5651830,"reputation":391,"user_id":4472131,"display_name":"Maruf Hamidi"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1495462228,"creation_date":1484762080,"answer_id":41726232,"question_id":29052219,"body_markdown":"1. Go to the netbeans installation directory\r\n2. Find configuration file [installation-directory]/etc/netbeans.conf\r\n3. towards the end find the line netbeans_jdkhome=...\r\n4. comment this line line using &#39;#&#39;\r\n5. now run netbeans. launcher will find jdk itself (from $JDK_HOME/$JAVA_HOME) environment variable\r\n\r\n***example:***\r\n\r\n    sudo vim /usr/local/netbeans-8.2/etc/netbeans.conf\r\n\r\n","title":"Cannot find java. Please use the --jdkhome switch","body":"<ol>\n<li>Go to the netbeans installation directory</li>\n<li>Find configuration file [installation-directory]/etc/netbeans.conf</li>\n<li>towards the end find the line netbeans_jdkhome=...</li>\n<li>comment this line line using '#'</li>\n<li>now run netbeans. launcher will find jdk itself (from $JDK_HOME/$JAVA_HOME) environment variable</li>\n</ol>\n\n<p><strong><em>example:</em></strong></p>\n\n<pre><code>sudo vim /usr/local/netbeans-8.2/etc/netbeans.conf\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10592782,"reputation":61,"user_id":7802722,"display_name":"dirk"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1495155822,"creation_date":1495155822,"answer_id":44059896,"question_id":29052219,"body_markdown":"NetBeans 8.2 - Cannot locate java installation in specified jdkhome?\r\n\r\nAnswer: Edit the netbeans.conf file.\r\n\r\nClose NetBeans, start Notepad or another text editor as Administrator. Right click on the Notepad application and choose &quot;Run as administrator&quot; and then open netbeans.conf with it. Change netbeans_jdkhome=”C:\\Program Files\\...whatever”.\r\n","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>NetBeans 8.2 - Cannot locate java installation in specified jdkhome?</p>\n\n<p>Answer: Edit the netbeans.conf file.</p>\n\n<p>Close NetBeans, start Notepad or another text editor as Administrator. Right click on the Notepad application and choose \"Run as administrator\" and then open netbeans.conf with it. Change netbeans_jdkhome=”C:\\Program Files...whatever”.</p>\n"},{"tags":[],"owner":{"account_id":6991958,"reputation":337,"user_id":5601592,"display_name":"Sus20200"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1524407396,"creation_date":1524407396,"answer_id":49967026,"question_id":29052219,"body_markdown":"Try Java SE Runtime Environment 8. It fixed it for me.","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>Try Java SE Runtime Environment 8. It fixed it for me.</p>\n"},{"tags":[],"owner":{"account_id":252630,"reputation":2903,"user_id":2457251,"display_name":"Almir Campos"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1540345018,"creation_date":1540345018,"answer_id":52959955,"question_id":29052219,"body_markdown":"**ATTENTION MAC OS USERS**\r\n--------------------------\r\n----------\r\n\r\nFirst, please remember that in a Mac computer the **netbeans.conf** file is stored at\r\n\r\n    /Applications/NetBeans/NetBeans 8.2.app/Contents/Resources/NetBeans/etc/netbeans.conf\r\n\r\n(if you had used the default installation package.)\r\n\r\nThen, also remember that **the directory** you **MUST** use on either **&quot;netbeans_jdkhome**&quot; or **&quot;--jdkhome&quot;** it&#39;s **NOT** the */Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/* **but the following one**:\r\n\r\n    /Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home //&lt;-- Please, notice the /Contents/Home at the end. That&#39;s the &quot;trick&quot;!\r\n\r\n*Note: of course, you must change the versions for both NetBeans and JDK you&#39;re using.*","title":"Cannot find java. Please use the --jdkhome switch","body":"<h2><strong>ATTENTION MAC OS USERS</strong></h2>\n\n<hr>\n\n<p>First, please remember that in a Mac computer the <strong>netbeans.conf</strong> file is stored at</p>\n\n<pre><code>/Applications/NetBeans/NetBeans 8.2.app/Contents/Resources/NetBeans/etc/netbeans.conf\n</code></pre>\n\n<p>(if you had used the default installation package.)</p>\n\n<p>Then, also remember that <strong>the directory</strong> you <strong>MUST</strong> use on either <strong>\"netbeans_jdkhome</strong>\" or <strong>\"--jdkhome\"</strong> it's <strong>NOT</strong> the <em>/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/</em> <strong>but the following one</strong>:</p>\n\n<pre><code>/Library/Java/JavaVirtualMachines/jdk1.8.0_172.jdk/Contents/Home //&lt;-- Please, notice the /Contents/Home at the end. That's the \"trick\"!\n</code></pre>\n\n<p><em>Note: of course, you must change the versions for both NetBeans and JDK you're using.</em></p>\n"},{"tags":[],"owner":{"account_id":7249053,"reputation":1015,"user_id":5530034,"display_name":"Franc Drobnič"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1551892171,"creation_date":1551892171,"answer_id":55028614,"question_id":29052219,"body_markdown":"With the Netbeans 10, commenting out the `netbeans_jdkhome` setting in `.../etc/netbeans.conf` doesn&#39;t do the job anymore. It is necessary to specify the right directory depending of 32/64 bitness.\r\n\r\nE.g. for 64 bit application: `netbeans_jdkhome=&quot;C:\\Program Files\\AdoptOpenJDK\\jdk8u202-b08&quot;`","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>With the Netbeans 10, commenting out the <code>netbeans_jdkhome</code> setting in <code>.../etc/netbeans.conf</code> doesn't do the job anymore. It is necessary to specify the right directory depending of 32/64 bitness.</p>\n\n<p>E.g. for 64 bit application: <code>netbeans_jdkhome=\"C:\\Program Files\\AdoptOpenJDK\\jdk8u202-b08\"</code></p>\n"},{"tags":[],"owner":{"account_id":90574,"reputation":267,"user_id":1689906,"display_name":"f1vlad"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1562866630,"creation_date":1562866630,"answer_id":56994647,"question_id":29052219,"body_markdown":"What worked for me is:\r\n\r\n- make sure `java` path is available:\r\n\r\n```\r\n$ which java\r\n/usr/bin/java\r\n```\r\n\r\n- then in etc/netbeans.conf make sure `netbeans_jdkhome` is commented out\r\n- in Finder go to &lt;NETBEANS_LOCATION&gt;/bin/ click on netbeans (terminal icon)\r\n\r\nYou would expect `./netbeans --jdkhome=/usr/bin/java` to work, but it doesn&#39;t for some reason.","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>What worked for me is:</p>\n\n<ul>\n<li>make sure <code>java</code> path is available:</li>\n</ul>\n\n<pre><code>$ which java\n/usr/bin/java\n</code></pre>\n\n<ul>\n<li>then in etc/netbeans.conf make sure <code>netbeans_jdkhome</code> is commented out</li>\n<li>in Finder go to /bin/ click on netbeans (terminal icon)</li>\n</ul>\n\n<p>You would expect <code>./netbeans --jdkhome=/usr/bin/java</code> to work, but it doesn't for some reason.</p>\n"},{"tags":[],"owner":{"account_id":9324589,"reputation":191,"user_id":6922320,"display_name":"Captain A"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1578342792,"creation_date":1578342792,"answer_id":59618588,"question_id":29052219,"body_markdown":"If like me, you got that message after installing [jenv][1],\r\nsimply add `netbeans_jdkhome=&quot;$JAVA_HOME&quot;` to your `[netbeans-installation-directory]/etc/netbeans.conf` file\r\n\r\n\r\n  [1]: https://www.jenv.be/","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>If like me, you got that message after installing <a href=\"https://www.jenv.be/\" rel=\"nofollow noreferrer\">jenv</a>,\nsimply add <code>netbeans_jdkhome=\"$JAVA_HOME\"</code> to your <code>[netbeans-installation-directory]/etc/netbeans.conf</code> file</p>\n"},{"tags":[],"owner":{"account_id":1047596,"reputation":9325,"user_id":1052284,"accept_rate":44,"display_name":"Mark Jeronimus"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1579512192,"creation_date":1579512192,"answer_id":59820221,"question_id":29052219,"body_markdown":"In my case, I had installed \\*ahem* Open**JDK**, but the bin folder was full of symlinks to the bundled JRE and the actual JDK was nowhere to be found.\r\n\r\nWhen I see a directory structure with `bin` and `jre` subdirectories I expect this to be the JDK installation, because JRE installations on Windows looked different. But in this case it was the JRE installation as found out by `apt search`. After installing openjdk-8-jre the simlinks were replaced and the directory structure otherwise stayed the same.","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>In my case, I had installed *ahem* Open<strong>JDK</strong>, but the bin folder was full of symlinks to the bundled JRE and the actual JDK was nowhere to be found.</p>\n\n<p>When I see a directory structure with <code>bin</code> and <code>jre</code> subdirectories I expect this to be the JDK installation, because JRE installations on Windows looked different. But in this case it was the JRE installation as found out by <code>apt search</code>. After installing openjdk-8-jre the simlinks were replaced and the directory structure otherwise stayed the same.</p>\n"},{"tags":[],"owner":{"account_id":3341589,"reputation":653,"user_id":2817520,"accept_rate":44,"display_name":"Dante"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673715541,"creation_date":1673715541,"answer_id":75119709,"question_id":29052219,"body_markdown":"Just add the following lines to the end of `.profile` file inside your home directory and then logout and login or reboot:\r\n\r\n    export JAVA_HOME=/path/to/jdk\r\n    export PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\r\n\r\nin which `/path/to/jdk` points to your JDK installation folder. For exapmple `/snap/openjdk/1163/jdk`.","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>Just add the following lines to the end of <code>.profile</code> file inside your home directory and then logout and login or reboot:</p>\n<pre><code>export JAVA_HOME=/path/to/jdk\nexport PATH=&quot;$JAVA_HOME/bin:$PATH&quot;\n</code></pre>\n<p>in which <code>/path/to/jdk</code> points to your JDK installation folder. For exapmple <code>/snap/openjdk/1163/jdk</code>.</p>\n"},{"tags":[],"owner":{"account_id":8914278,"reputation":41,"user_id":6653380,"display_name":"daniele daniele"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698410438,"creation_date":1698410438,"answer_id":77374229,"question_id":29052219,"body_markdown":"Just &quot;suffered&quot; on Windows and latest Netbeans 19, no way to use something in the PATH variable...\r\n\r\nTo solve, I&#39;ve added to the shortcut in &quot;C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Apache NetBeans&quot; an argument like below: \r\n\r\n    --jdkhome &quot;C:\\Program Files\\Java\\jdk-11.0.7&quot;\r\n","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>Just &quot;suffered&quot; on Windows and latest Netbeans 19, no way to use something in the PATH variable...</p>\n<p>To solve, I've added to the shortcut in &quot;C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs\\Apache NetBeans&quot; an argument like below:</p>\n<pre><code>--jdkhome &quot;C:\\Program Files\\Java\\jdk-11.0.7&quot;\n</code></pre>\n"}],"owner":{"account_id":1127133,"reputation":3989,"user_id":1114136,"accept_rate":80,"display_name":"OtagoHarbour"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":142598,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":29052292,"answer_count":12,"score":30,"last_activity_date":1698410438,"creation_date":1426355614,"question_id":29052219,"body_markdown":"I have just installed Netbeans 8.0.2 on CentOS 6.5.\r\n\r\nWhen I try to run it, I get the message\r\n\r\n    Cannot find java. Please use the --jdkhome switch\r\n\r\nI have /usr/share/java-1.7.0  so I typed\r\n    \r\n    /usr/local/netbeans-8.0.2/bin/netbeans --jdkhome /usr/share/java-1.7.0\r\n\r\nand still got\r\n\r\n    Cannot find java. Please use the --jdkhome switch\r\n\r\nI also have /root/Downloads/jdk1.8.0_40 which allowed me to install Netbeans.  However, when I type    \r\n\r\n    /usr/local/netbeans-8.0.2/bin/netbeans --jdkhome /root/Downloads/jdk1.8.0_40\r\n\r\nI still get\r\n\r\n    Cannot find java. Please use the --jdkhome switch\r\n\r\nI tried\r\n\r\n    whereis java\r\n\r\nand got\r\n\r\n    java: /usr/bin/java /etc/java /usr/lib/java /usr/share/java /usr/share/man/man1/java.1.gz\r\n\r\nHowever\r\n\r\n    /usr/local/netbeans-8.0.2/bin/netbeans --jdkhome /usr/bin/java\r\n\r\nstill produces\r\n    \r\n    Cannot find java. Please use the --jdkhome switch.","title":"Cannot find java. Please use the --jdkhome switch","body":"<p>I have just installed Netbeans 8.0.2 on CentOS 6.5.</p>\n\n<p>When I try to run it, I get the message</p>\n\n<pre><code>Cannot find java. Please use the --jdkhome switch\n</code></pre>\n\n<p>I have /usr/share/java-1.7.0  so I typed</p>\n\n<pre><code>/usr/local/netbeans-8.0.2/bin/netbeans --jdkhome /usr/share/java-1.7.0\n</code></pre>\n\n<p>and still got</p>\n\n<pre><code>Cannot find java. Please use the --jdkhome switch\n</code></pre>\n\n<p>I also have /root/Downloads/jdk1.8.0_40 which allowed me to install Netbeans.  However, when I type    </p>\n\n<pre><code>/usr/local/netbeans-8.0.2/bin/netbeans --jdkhome /root/Downloads/jdk1.8.0_40\n</code></pre>\n\n<p>I still get</p>\n\n<pre><code>Cannot find java. Please use the --jdkhome switch\n</code></pre>\n\n<p>I tried</p>\n\n<pre><code>whereis java\n</code></pre>\n\n<p>and got</p>\n\n<pre><code>java: /usr/bin/java /etc/java /usr/lib/java /usr/share/java /usr/share/man/man1/java.1.gz\n</code></pre>\n\n<p>However</p>\n\n<pre><code>/usr/local/netbeans-8.0.2/bin/netbeans --jdkhome /usr/bin/java\n</code></pre>\n\n<p>still produces</p>\n\n<pre><code>Cannot find java. Please use the --jdkhome switch.\n</code></pre>\n"},{"tags":["java","gradle","swagger","springfox","grgit"],"owner":{"account_id":2684968,"reputation":5561,"user_id":2319542,"accept_rate":82,"display_name":"Sash_KP"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698410406,"creation_date":1690558242,"question_id":76789193,"body_markdown":"After cloning the https://github.com/springfox/springfox springfix repo , when i try to build the project using `./gradlew clean build -i` command, i always get AbstractMethodError. \r\n\r\n    * What went wrong:\r\n    Receiver class org.ajoberstar.grgit.operation.OpenOp does not define or inherit an implementation of the resolved method abstract setProperty(Ljava/lang/String;Ljava/lang/Object;)V of interface groovy.lang.GroovyObject.\r\n\r\n    * Exception is:\r\n    java.lang.AbstractMethodError: Receiver class org.ajoberstar.grgit.operation.OpenOp does not define or inherit an implementation of the resolved method abstract setProperty(Ljava/lang/String;Ljava/lang/Object;)V of interface groovy.lang.GroovyObject.\r\n            at org.ajoberstar.grgit.internal.OpSyntax$_mapOperation_closure1.doCall(OpSyntax.groovy:17)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at com.sun.proxy.$Proxy84.accept(Unknown Source)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n            at org.ajoberstar.grgit.internal.OpSyntax.mapOperation(OpSyntax.groovy:16)\r\n            at org.ajoberstar.grgit.internal.OpSyntax$mapOperation.callStatic(Unknown Source)\r\n            at org.ajoberstar.grgit.Grgit.open(Grgit.groovy)\r\n            at org.ajoberstar.grgit.Grgit$open.call(Unknown Source)\r\n            at org.ajoberstar.grgit.gradle.GrgitPlugin.apply(GrgitPlugin.groovy:17)\r\n            at org.ajoberstar.grgit.gradle.GrgitPlugin.apply(GrgitPlugin.groovy)\r\n\r\n\r\n    JAVA version: \r\n    java version &quot;11.0.19&quot; 2023-04-18 LTS\r\n    Java(TM) SE Runtime Environment 18.9 (build 11.0.19+9-LTS-224)\r\n    Java HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.19+9-LTS-224, mixed mode)\r\n\r\ngradle used in gradle-wrapper.properties file is : \r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-6.5-bin.zip\r\n\r\nIn build.gradle file inside plugins {} , it has: \r\n\r\n    id &quot;org.ajoberstar.grgit&quot; version &quot;4.0.2&quot;\r\n    id &quot;org.ajoberstar.git-publish&quot; version &quot;3.0.0-rc.1&quot;\r\n\r\nIn gradle.org site, i can see this post asking about same error but no resolution mentioned there : https://discuss.gradle.org/t/gradle-6-9-2-started-failing-without-changes-receiver-class-org-ajoberstar-grgit-operation-openop-does-not-define-or-inherit-an-implementation-of-the-resolved-method-abstract-setproperty/42172\r\n\r\nSimilar issue raised in springfox github issues section as well, but no reply there as well. - https://github.com/springfox/springfox/issues/4005\r\n\r\nCan you please help if you also have faced it and how did you get rid of it?\r\n\r\n\r\n","title":"AbstractMethodError in Receiver class org.ajoberstar.grgit.operation.OpenOp while trying to build springfox using gradle","body":"<p>After cloning the <a href=\"https://github.com/springfox/springfox\" rel=\"nofollow noreferrer\">https://github.com/springfox/springfox</a> springfix repo , when i try to build the project using <code>./gradlew clean build -i</code> command, i always get AbstractMethodError.</p>\n<pre><code>* What went wrong:\nReceiver class org.ajoberstar.grgit.operation.OpenOp does not define or inherit an implementation of the resolved method abstract setProperty(Ljava/lang/String;Ljava/lang/Object;)V of interface groovy.lang.GroovyObject.\n\n* Exception is:\njava.lang.AbstractMethodError: Receiver class org.ajoberstar.grgit.operation.OpenOp does not define or inherit an implementation of the resolved method abstract setProperty(Ljava/lang/String;Ljava/lang/Object;)V of interface groovy.lang.GroovyObject.\n        at org.ajoberstar.grgit.internal.OpSyntax$_mapOperation_closure1.doCall(OpSyntax.groovy:17)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at com.sun.proxy.$Proxy84.accept(Unknown Source)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at org.ajoberstar.grgit.internal.OpSyntax.mapOperation(OpSyntax.groovy:16)\n        at org.ajoberstar.grgit.internal.OpSyntax$mapOperation.callStatic(Unknown Source)\n        at org.ajoberstar.grgit.Grgit.open(Grgit.groovy)\n        at org.ajoberstar.grgit.Grgit$open.call(Unknown Source)\n        at org.ajoberstar.grgit.gradle.GrgitPlugin.apply(GrgitPlugin.groovy:17)\n        at org.ajoberstar.grgit.gradle.GrgitPlugin.apply(GrgitPlugin.groovy)\n\n\nJAVA version: \njava version &quot;11.0.19&quot; 2023-04-18 LTS\nJava(TM) SE Runtime Environment 18.9 (build 11.0.19+9-LTS-224)\nJava HotSpot(TM) 64-Bit Server VM 18.9 (build 11.0.19+9-LTS-224, mixed mode)\n</code></pre>\n<p>gradle used in gradle-wrapper.properties file is :</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-6.5-bin.zip\n</code></pre>\n<p>In build.gradle file inside plugins {} , it has:</p>\n<pre><code>id &quot;org.ajoberstar.grgit&quot; version &quot;4.0.2&quot;\nid &quot;org.ajoberstar.git-publish&quot; version &quot;3.0.0-rc.1&quot;\n</code></pre>\n<p>In gradle.org site, i can see this post asking about same error but no resolution mentioned there : <a href=\"https://discuss.gradle.org/t/gradle-6-9-2-started-failing-without-changes-receiver-class-org-ajoberstar-grgit-operation-openop-does-not-define-or-inherit-an-implementation-of-the-resolved-method-abstract-setproperty/42172\" rel=\"nofollow noreferrer\">https://discuss.gradle.org/t/gradle-6-9-2-started-failing-without-changes-receiver-class-org-ajoberstar-grgit-operation-openop-does-not-define-or-inherit-an-implementation-of-the-resolved-method-abstract-setproperty/42172</a></p>\n<p>Similar issue raised in springfox github issues section as well, but no reply there as well. - <a href=\"https://github.com/springfox/springfox/issues/4005\" rel=\"nofollow noreferrer\">https://github.com/springfox/springfox/issues/4005</a></p>\n<p>Can you please help if you also have faced it and how did you get rid of it?</p>\n"},{"tags":["java","mongodb","spring-boot","amazon-s3","stream"],"owner":{"account_id":6561856,"reputation":13,"user_id":5072680,"display_name":"Vladimir"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698410226,"creation_date":1698410226,"question_id":77374207,"body_markdown":"I have a spring boot project and I am trying to read csv file from AWS S3 bucket as a stream and save the data in mongodb database.\r\n\r\nThis is my **AmazonS3** bean configuration:\r\n\r\n```\r\nimport com.amazonaws.services.s3.AmazonS3;\r\nimport com.amazonaws.services.s3.AmazonS3ClientBuilder;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class AmazonS3Config {\r\n\r\n    @Bean\r\n    public AmazonS3 getDefaultS3Client() {\r\n        return AmazonS3ClientBuilder.defaultClient();\r\n    }\r\n}\r\n```\r\n\r\nAnd this is the code that actually does the work:\r\n\r\n```\r\nimport com.amazonaws.services.s3.AmazonS3;\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\n\r\npublic class MyClass {\r\n    private final AmazonS3 s3Client;\r\n\r\n    public void readCsvFile() {\r\n       final InputStream inputStream = s3Client.getObject(bucketName, key).getObjectContent();\r\n       final InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\r\n       final BufferedReader reader = new BufferedReader(inputStreamReader);\r\n\r\n       String line = reader.readLine();\r\n       while ((line = reader.readLine()) != null) {\r\n          // process data and save it to mongo db\r\n       }\r\n    }\r\n}\r\n```\r\n\r\nI am able to get the object and the stream from the S3 bucket but I&#39;m getting the following error:\r\n\r\n```\r\njavax.net.ssl.SSLException: Tag mismatch!\r\n\tat java.base/sun.security.ssl.Alert.createSSLException(Alert.java:133)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\r\n\tat java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:123)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1508)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1479)\r\n\tat java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1064)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\r\n\tat org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\r\n\tat org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\r\n\tat org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\r\n\tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n\tat com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\r\n\tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n\tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n\tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n\tat com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\r\n\tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n\tat com.amazonaws.util.LengthCheckInputStream.read(LengthCheckInputStream.java:107)\r\n\tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n\tat com.amazonaws.services.s3.internal.S3AbortableInputStream.read(S3AbortableInputStream.java:125)\r\n\tat com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\r\n\tat java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:270)\r\n\tat java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:313)\r\n\tat java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:188)\r\n\tat java.base/java.io.InputStreamReader.read(InputStreamReader.java:177)\r\n\tat java.base/java.io.BufferedReader.fill(BufferedReader.java:162)\r\n\tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:329)\r\n\tat java.base/java.io.BufferedReader.readLine(BufferedReader.java:396)\r\n\tat com.example.MyClass.readCsvFile(MyClass.java:72)\r\n\tat com.example.MyClassController.readCsvFile(MyClassController.java:21)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tat java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: javax.crypto.AEADBadTagException: Tag mismatch!\r\n\tat java.base/com.sun.crypto.provider.GaloisCounterMode$GCMDecrypt.doFinal(GaloisCounterMode.java:1486)\r\n\tat java.base/com.sun.crypto.provider.GaloisCounterMode.engineDoFinal(GaloisCounterMode.java:447)\r\n\tat java.base/javax.crypto.Cipher.doFinal(Cipher.java:2500)\r\n\tat java.base/sun.security.ssl.SSLCipher$T12GcmReadCipherGenerator$GcmReadCipher.decrypt(SSLCipher.java:1659)\r\n\tat java.base/sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:260)\r\n\tat java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:181)\r\n\tat java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)\r\n\t... 84 common frames omitted\r\n```\r\n\r\nCan someone tell me what&#39;s the problem with this code and why I&#39;m getting this error?\r\n\r\nI was expecting to read the file without getting any errors","title":"javax.crypto.AEADBadTagException: Tag mismatch! when trying to read file from AWS S3 bucket","body":"<p>I have a spring boot project and I am trying to read csv file from AWS S3 bucket as a stream and save the data in mongodb database.</p>\n<p>This is my <strong>AmazonS3</strong> bean configuration:</p>\n<pre><code>import com.amazonaws.services.s3.AmazonS3;\nimport com.amazonaws.services.s3.AmazonS3ClientBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class AmazonS3Config {\n\n    @Bean\n    public AmazonS3 getDefaultS3Client() {\n        return AmazonS3ClientBuilder.defaultClient();\n    }\n}\n</code></pre>\n<p>And this is the code that actually does the work:</p>\n<pre><code>import com.amazonaws.services.s3.AmazonS3;\nimport java.io.BufferedReader;\nimport java.io.InputStream;\nimport java.io.InputStreamReader;\n\npublic class MyClass {\n    private final AmazonS3 s3Client;\n\n    public void readCsvFile() {\n       final InputStream inputStream = s3Client.getObject(bucketName, key).getObjectContent();\n       final InputStreamReader inputStreamReader = new InputStreamReader(inputStream);\n       final BufferedReader reader = new BufferedReader(inputStreamReader);\n\n       String line = reader.readLine();\n       while ((line = reader.readLine()) != null) {\n          // process data and save it to mongo db\n       }\n    }\n}\n</code></pre>\n<p>I am able to get the object and the stream from the S3 bucket but I'm getting the following error:</p>\n<pre><code>javax.net.ssl.SSLException: Tag mismatch!\n    at java.base/sun.security.ssl.Alert.createSSLException(Alert.java:133)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:371)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:314)\n    at java.base/sun.security.ssl.TransportContext.fatal(TransportContext.java:309)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:123)\n    at java.base/sun.security.ssl.SSLSocketImpl.decode(SSLSocketImpl.java:1508)\n    at java.base/sun.security.ssl.SSLSocketImpl.readApplicationRecord(SSLSocketImpl.java:1479)\n    at java.base/sun.security.ssl.SSLSocketImpl$AppInputStream.read(SSLSocketImpl.java:1064)\n    at org.apache.http.impl.io.SessionInputBufferImpl.streamRead(SessionInputBufferImpl.java:137)\n    at org.apache.http.impl.io.SessionInputBufferImpl.read(SessionInputBufferImpl.java:197)\n    at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:176)\n    at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:135)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.event.ProgressInputStream.read(ProgressInputStream.java:180)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.util.LengthCheckInputStream.read(LengthCheckInputStream.java:107)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at com.amazonaws.services.s3.internal.S3AbortableInputStream.read(S3AbortableInputStream.java:125)\n    at com.amazonaws.internal.SdkFilterInputStream.read(SdkFilterInputStream.java:90)\n    at java.base/sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:270)\n    at java.base/sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:313)\n    at java.base/sun.nio.cs.StreamDecoder.read(StreamDecoder.java:188)\n    at java.base/java.io.InputStreamReader.read(InputStreamReader.java:177)\n    at java.base/java.io.BufferedReader.fill(BufferedReader.java:162)\n    at java.base/java.io.BufferedReader.readLine(BufferedReader.java:329)\n    at java.base/java.io.BufferedReader.readLine(BufferedReader.java:396)\n    at com.example.MyClass.readCsvFile(MyClass.java:72)\n    at com.example.MyClassController.readCsvFile(MyClassController.java:21)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\n    at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341)\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391)\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894)\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740)\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: javax.crypto.AEADBadTagException: Tag mismatch!\n    at java.base/com.sun.crypto.provider.GaloisCounterMode$GCMDecrypt.doFinal(GaloisCounterMode.java:1486)\n    at java.base/com.sun.crypto.provider.GaloisCounterMode.engineDoFinal(GaloisCounterMode.java:447)\n    at java.base/javax.crypto.Cipher.doFinal(Cipher.java:2500)\n    at java.base/sun.security.ssl.SSLCipher$T12GcmReadCipherGenerator$GcmReadCipher.decrypt(SSLCipher.java:1659)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decodeInputRecord(SSLSocketInputRecord.java:260)\n    at java.base/sun.security.ssl.SSLSocketInputRecord.decode(SSLSocketInputRecord.java:181)\n    at java.base/sun.security.ssl.SSLTransport.decode(SSLTransport.java:111)\n    ... 84 common frames omitted\n</code></pre>\n<p>Can someone tell me what's the problem with this code and why I'm getting this error?</p>\n<p>I was expecting to read the file without getting any errors</p>\n"},{"tags":["java","eclipse-plugin","eclipse-rcp"],"comments":[{"owner":{"account_id":3159259,"reputation":109665,"user_id":2670892,"display_name":"greg-449"},"score":0,"creation_date":1685907827,"post_id":76401644,"comment_id":134723166,"body_markdown":"Handlers normally use `HandlerUtil.getCurrentSelection(event)` to get the current selection. Also I don&#39;t see a `getSelectedProjects` method in the current `org.eclipse.ui.navigator.resources.ProjectExplorer`","body":"Handlers normally use <code>HandlerUtil.getCurrentSelection(event)</code> to get the current selection. Also I don&#39;t see a <code>getSelectedProjects</code> method in the current <code>org.eclipse.ui.navigator.resources.ProjectExplorer</code>"}],"answers":[{"tags":[],"owner":{"account_id":6629323,"reputation":2067,"user_id":5118465,"accept_rate":75,"display_name":"Henning Luther"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698409772,"creation_date":1698409772,"answer_id":77374159,"question_id":76401644,"body_markdown":"So i have some code to get the Project no matter what the current selection is in a view or editor - i know its not complete but should do for most - hope it helps a bit:\r\n\r\n    @Override\r\n\tpublic final Object execute(ExecutionEvent event) throws ExecutionException {\r\n\t\tISelection selection = HandlerUtil.getActiveMenuSelection(event);\r\n\t\tIResource resource = Activator.getSelectedResource(selection);\r\n\t\tIProject project = resource.getProject();\r\n\t\t//do something\r\n\r\n\t\treturn null;\r\n\t}\r\n\r\n    public static IResource getSelectedResource(ISelection selection) {\r\n    if (selection instanceof TreeSelection) {\r\n      Object selectedElement = ((TreeSelection) selection).getFirstElement();\r\n      if (selectedElement instanceof IResource) {\r\n        return (IResource) selectedElement;\r\n      } else if (selectedElement instanceof IPackageFragmentRoot) {\r\n        return ((IPackageFragmentRoot) selectedElement).getResource();\r\n      } else if (selectedElement instanceof IJavaProject) {\r\n        return ((IJavaProject) selectedElement).getProject();\r\n      }\r\n    } else if (selection instanceof TextSelection) {\r\n      IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();\r\n      IEditorPart editor = page.getActiveEditor();\r\n      if (editor.getEditorInput() instanceof IFileEditorInput fei) {\r\n        return fei.getFile();\r\n      }\r\n    }\r\n    return null;\r\n  }","title":"How can I access the path of the selected project in Eclipse&#39;s Project Explorer using a menuContribution?","body":"<p>So i have some code to get the Project no matter what the current selection is in a view or editor - i know its not complete but should do for most - hope it helps a bit:</p>\n<pre><code>@Override\npublic final Object execute(ExecutionEvent event) throws ExecutionException {\n    ISelection selection = HandlerUtil.getActiveMenuSelection(event);\n    IResource resource = Activator.getSelectedResource(selection);\n    IProject project = resource.getProject();\n    //do something\n\n    return null;\n}\n\npublic static IResource getSelectedResource(ISelection selection) {\nif (selection instanceof TreeSelection) {\n  Object selectedElement = ((TreeSelection) selection).getFirstElement();\n  if (selectedElement instanceof IResource) {\n    return (IResource) selectedElement;\n  } else if (selectedElement instanceof IPackageFragmentRoot) {\n    return ((IPackageFragmentRoot) selectedElement).getResource();\n  } else if (selectedElement instanceof IJavaProject) {\n    return ((IJavaProject) selectedElement).getProject();\n  }\n} else if (selection instanceof TextSelection) {\n  IWorkbenchPage page = PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage();\n  IEditorPart editor = page.getActiveEditor();\n  if (editor.getEditorInput() instanceof IFileEditorInput fei) {\n    return fei.getFile();\n  }\n}\nreturn null;\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":28749444,"reputation":1,"user_id":22017845,"display_name":"CONSTPLANK"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698409772,"creation_date":1685900020,"question_id":76401644,"body_markdown":"I want to get the path of the project selected in eclipse project explorer, I have created a menuContribution on the right click menu want to access the path in the handler.\r\n\r\nI tried this code but was unable to import ProjectExplorer class.\r\n\r\n    @Override public Object execute(ExecutionEvent event) throws ExecutionException { // Get the active part IPartService partService = (IPartService) PlatformUI.getWorkbench().getService(IPartService.class); IPart activePart = partService.getActivePart();\r\n    // Check if the active part is a Project Explorer\r\n    if (activePart instanceof ProjectExplorer) {\r\n        // Get the selected projects\r\n        List&lt;IProject&gt; selectedProjects = ((ProjectExplorer) activePart).getSelectedProjects();\r\n    \r\n        // Get the path of the selected project\r\n        if (selectedProjects.size() &gt; 0) {\r\n            IProject selectedProject = selectedProjects.get(0);\r\n            String path = selectedProject.getFullPath().toString();\r\n    \r\n            // Do something with the path\r\n            System.out.println(path);\r\n        }\r\n    }\r\n    \r\n    return null;\r\n    }","title":"How can I access the path of the selected project in Eclipse&#39;s Project Explorer using a menuContribution?","body":"<p>I want to get the path of the project selected in eclipse project explorer, I have created a menuContribution on the right click menu want to access the path in the handler.</p>\n<p>I tried this code but was unable to import ProjectExplorer class.</p>\n<pre><code>@Override public Object execute(ExecutionEvent event) throws ExecutionException { // Get the active part IPartService partService = (IPartService) PlatformUI.getWorkbench().getService(IPartService.class); IPart activePart = partService.getActivePart();\n// Check if the active part is a Project Explorer\nif (activePart instanceof ProjectExplorer) {\n    // Get the selected projects\n    List&lt;IProject&gt; selectedProjects = ((ProjectExplorer) activePart).getSelectedProjects();\n\n    // Get the path of the selected project\n    if (selectedProjects.size() &gt; 0) {\n        IProject selectedProject = selectedProjects.get(0);\n        String path = selectedProject.getFullPath().toString();\n\n        // Do something with the path\n        System.out.println(path);\n    }\n}\n\nreturn null;\n}\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":16878,"reputation":306133,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":3,"creation_date":1698408912,"post_id":77373721,"comment_id":136405154,"body_markdown":"Bad design.  The services shouldn&#39;t know or care who is calling them.","body":"Bad design.  The services shouldn&#39;t know or care who is calling them."}],"answers":[{"tags":[],"owner":{"account_id":7082410,"reputation":117,"user_id":5420342,"accept_rate":43,"display_name":"Udhaya"},"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1698407553,"creation_date":1698407553,"answer_id":77373931,"question_id":77373721,"body_markdown":"I don&#39;t have any idea about the Spring ecosystem, but there is a solution in Java itself.\r\n\r\n    public class SomeService {\r\n    \r\n         public void someMethod(){\r\n    \r\n           // this will fetch all the information about current thread\r\n           StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();\r\n    \r\n           // third element of the array will contain caller class name\r\n           String callerClassName = stackTrace[2].getClassName();\r\n    \r\n           // now you can perform whatever operation based on callerClassName\r\n           if(callerClassName.equals(&quot;A&quot;)){\r\n              //doThis\r\n           }else{\r\n              //doThat\r\n           }\r\n        }\r\n    }","title":"How service can identify controller","body":"<p>I don't have any idea about the Spring ecosystem, but there is a solution in Java itself.</p>\n<pre><code>public class SomeService {\n\n     public void someMethod(){\n\n       // this will fetch all the information about current thread\n       StackTraceElement[] stackTrace = Thread.currentThread().getStackTrace();\n\n       // third element of the array will contain caller class name\n       String callerClassName = stackTrace[2].getClassName();\n\n       // now you can perform whatever operation based on callerClassName\n       if(callerClassName.equals(&quot;A&quot;)){\n          //doThis\n       }else{\n          //doThat\n       }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698409272,"creation_date":1698408766,"answer_id":77374047,"question_id":77373721,"body_markdown":"You could work around this issue with reflective tricks, but there&#39;s really no reason to. The solution is simple: If you need different functionality, have different methods:\r\n\r\n```\r\nclass SomeService {\r\n  void callFromA() {\r\n    // A specific stuff\r\n    call()\r\n  }\r\n\r\n  void callFromB() {\r\n    // B specific stuff\r\n    call()\r\n  }\r\n\r\n  private void call() { \r\n    // shared logic\r\n  }\r\n}\r\n```\r\n\r\nUpdate: I assumed this was obvious, but here&#39;s now you use it:\r\n```\r\nclass ControllerA {\r\n  private final SomeService service;\r\n  void someMethod() { service.callFromA(); }\r\n}\r\nclass ControllerB {\r\n  private final SomeService service;\r\n  void someMethod() { service.callFromB(); }\r\n}\r\n```","title":"How service can identify controller","body":"<p>You could work around this issue with reflective tricks, but there's really no reason to. The solution is simple: If you need different functionality, have different methods:</p>\n<pre><code>class SomeService {\n  void callFromA() {\n    // A specific stuff\n    call()\n  }\n\n  void callFromB() {\n    // B specific stuff\n    call()\n  }\n\n  private void call() { \n    // shared logic\n  }\n}\n</code></pre>\n<p>Update: I assumed this was obvious, but here's now you use it:</p>\n<pre><code>class ControllerA {\n  private final SomeService service;\n  void someMethod() { service.callFromA(); }\n}\nclass ControllerB {\n  private final SomeService service;\n  void someMethod() { service.callFromB(); }\n}\n</code></pre>\n"}],"owner":{"account_id":17607759,"reputation":55,"user_id":13308178,"display_name":"danilakds"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":2,"score":-2,"last_activity_date":1698409272,"creation_date":1698405378,"question_id":77373721,"body_markdown":"I have Spring boot application with such case:\r\n\r\n    Controller A { service.call()}\r\n    Controller B { service.call()}\r\n\r\nDepends on which controller was used i need to implement custom logic in service. Does spring ecosystem let do it without any external methods, like IDs, different service implementations etc.\r\n\r\nHow can i make service know which controller, A or B was used?\r\n ","title":"How service can identify controller","body":"<p>I have Spring boot application with such case:</p>\n<pre><code>Controller A { service.call()}\nController B { service.call()}\n</code></pre>\n<p>Depends on which controller was used i need to implement custom logic in service. Does spring ecosystem let do it without any external methods, like IDs, different service implementations etc.</p>\n<p>How can i make service know which controller, A or B was used?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":39846,"reputation":991123,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698407701,"post_id":77373896,"comment_id":136404930,"body_markdown":"&quot;When I open intent to request permission, my application is not in the list&quot; -- the file that matters for this is your manifest. You may want to add that to your [mcve]. Also, please note that it is unlikely that your app will be approved for distribution on the Play Store (or perhaps elsewhere) given your request for this permission. You might wish to consider alternative approaches for building your app that can avoid that permission. Otherwise, be prepared to provide Google with a very good reason why it is impossible to implement your app without that permission.","body":"&quot;When I open intent to request permission, my application is not in the list&quot; -- the file that matters for this is your manifest. You may want to add that to your <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Also, please note that it is unlikely that your app will be approved for distribution on the Play Store (or perhaps elsewhere) given your request for this permission. You might wish to consider alternative approaches for building your app that can avoid that permission. Otherwise, be prepared to provide Google with a very good reason why it is impossible to implement your app without that permission."},{"owner":{"account_id":19211594,"reputation":1477,"user_id":14037302,"display_name":"sweak"},"score":0,"creation_date":1698407774,"post_id":77373896,"comment_id":136404942,"body_markdown":"Have you included the permission in AndroidManifest?","body":"Have you included the permission in AndroidManifest?"},{"owner":{"account_id":24789842,"reputation":33,"user_id":18672883,"display_name":"Pprog"},"score":0,"creation_date":1698408299,"post_id":77373896,"comment_id":136405033,"body_markdown":"I added the manifest code, I&#39;m sorry, I forgot about it","body":"I added the manifest code, I&#39;m sorry, I forgot about it"},{"owner":{"account_id":24789842,"reputation":33,"user_id":18672883,"display_name":"Pprog"},"score":0,"creation_date":1698408953,"post_id":77373896,"comment_id":136405168,"body_markdown":"@CommonsWare - what permission do you recommend, for writing and reading files, perhaps in the application folder without accessing external files?","body":"@CommonsWare - what permission do you recommend, for writing and reading files, perhaps in the application folder without accessing external files?"},{"owner":{"account_id":39846,"reputation":991123,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1698409078,"post_id":77373896,"comment_id":136405200,"body_markdown":"In the abstract, I recommend not using any permission. Instead, use the Storage Access Framework, such as `ACTION_OPEN_DOCUMENT` / `ActivityResultContracts.OpenDocument`, to allow the user to choose what content you should work with.","body":"In the abstract, I recommend not using any permission. Instead, use the Storage Access Framework, such as <code>ACTION_OPEN_DOCUMENT</code> / <code>ActivityResultContracts.OpenDocument</code>, to allow the user to choose what content you should work with."},{"owner":{"account_id":24789842,"reputation":33,"user_id":18672883,"display_name":"Pprog"},"score":0,"creation_date":1698409763,"post_id":77373896,"comment_id":136405357,"body_markdown":"@CommonsWare - thx!","body":"@CommonsWare - thx!"}],"answers":[{"tags":[],"owner":{"account_id":39846,"reputation":991123,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698409172,"creation_date":1698409172,"answer_id":77374083,"question_id":77373896,"body_markdown":"```xml\r\n    &lt;uses-permission android:name=&quot;android.permission.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION&quot; /&gt;\r\n```\r\n\r\nThat is not a permission string. It is an `Intent` action string. Replace that XML element with:\r\n\r\n```xml\r\n    &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\r\n```\r\n\r\nSee [the documentation](https://developer.android.com/reference/android/Manifest.permission#MANAGE_EXTERNAL_STORAGE).\r\n","title":"I can&#39;t find my app in the permissions list","body":"<pre class=\"lang-xml prettyprint-override\"><code>    &lt;uses-permission android:name=&quot;android.permission.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION&quot; /&gt;\n</code></pre>\n<p>That is not a permission string. It is an <code>Intent</code> action string. Replace that XML element with:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;uses-permission android:name=&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot; /&gt;\n</code></pre>\n<p>See <a href=\"https://developer.android.com/reference/android/Manifest.permission#MANAGE_EXTERNAL_STORAGE\" rel=\"nofollow noreferrer\">the documentation</a>.</p>\n"}],"owner":{"account_id":24789842,"reputation":33,"user_id":18672883,"display_name":"Pprog"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77374083,"answer_count":1,"score":1,"last_activity_date":1698409172,"creation_date":1698407075,"question_id":77373896,"body_markdown":"I am developing an application for working with files, respectively, I request permission to access all files. However, in new versions of android, you need to find your application among others and click on toggle to give access.\r\n\r\nWhen I open intent to request permission, my application is not in the list\r\n\r\nMainActivity.java\r\n\r\n```\r\npackage com.example.quazzyapp;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.provider.Settings;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n    private static final int PERMISSION_STORAGE = 101;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        if (!PremissionUtils.hasPermissions(MainActivity.this)) {\r\n            PremissionUtils.requestPermissions(MainActivity.this, PERMISSION_STORAGE);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nPremissionUtils.java\r\n\r\n```\r\npackage com.example.quazzyapp;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Environment;\r\nimport android.provider.Settings;\r\n\r\nimport androidx.core.app.ActivityCompat;\r\nimport androidx.core.content.ContextCompat;\r\n\r\npublic class PremissionUtils {\r\n    public static boolean hasPermissions(Context context) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            return Environment.isExternalStorageManager();\r\n        } else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\r\n            return ContextCompat.checkSelfPermission(context, android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\r\n                    == PackageManager.PERMISSION_GRANTED;\r\n        } else {\r\n            return true;\r\n        }\r\n    }\r\n\r\n    public static void requestPermissions(Activity activity, int requestCode) {\r\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\r\n            try {\r\n                Intent intent = new Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);\r\n                intent.addCategory(&quot;android.intent.category.DEFAULT&quot;);\r\n                intent.setData(Uri.parse(String.format(&quot;package:%s&quot;, activity.getPackageName())));\r\n                activity.startActivityForResult(intent, requestCode);\r\n            } catch (Exception e) {\r\n                Intent intent = new Intent();\r\n                intent.setAction(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);\r\n                activity.startActivityForResult(intent, requestCode);\r\n            }\r\n        } else {\r\n            ActivityCompat.requestPermissions(activity,\r\n                    new String[] { android.Manifest.permission.WRITE_EXTERNAL_STORAGE },\r\n                    requestCode);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\nbuild.gradle.kts\r\n\r\n```\r\nplugins {\r\n    id(&quot;com.android.application&quot;)\r\n}\r\n\r\nandroid {\r\n    namespace = &quot;com.example.quazzyapp&quot;\r\n    compileSdk = 34\r\n\r\n    defaultConfig {\r\n        applicationId = &quot;com.example.quazzyapp&quot;\r\n        minSdk = 24\r\n        targetSdk = 33\r\n        versionCode = 1\r\n        versionName = &quot;1.0&quot;\r\n\r\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\r\n    }\r\n\r\n    buildTypes {\r\n        release {\r\n            isMinifyEnabled = false\r\n            proguardFiles(getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), &quot;proguard-rules.pro&quot;)\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility = JavaVersion.VERSION_1_8\r\n        targetCompatibility = JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n\r\n    implementation(&quot;androidx.appcompat:appcompat:1.6.1&quot;)\r\n    implementation(&quot;com.google.android.material:material:1.8.0&quot;)\r\n    implementation(&quot;androidx.constraintlayout:constraintlayout:2.1.4&quot;)\r\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\r\n    androidTestImplementation(&quot;androidx.test.ext:junit:1.1.5&quot;)\r\n    androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.5.1&quot;)\r\n}\r\n```\r\n\r\nAndriodManifest.xml\r\n```\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\r\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.QuazzyApp&quot;\r\n        tools:targetApi=&quot;31&quot;&gt;\r\n        &lt;activity\r\n            android:name=&quot;.MainActivity&quot;\r\n            android:exported=&quot;true&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n```\r\n\r\nThere is a possibility that the problem is located locally on the tested smartphone, unfortunately I can&#39;t check on other devices\r\n\r\nI created an intent to request permissions in a new project to exclude the influence of other pieces of code, but nothing happened and the problem remained","title":"I can&#39;t find my app in the permissions list","body":"<p>I am developing an application for working with files, respectively, I request permission to access all files. However, in new versions of android, you need to find your application among others and click on toggle to give access.</p>\n<p>When I open intent to request permission, my application is not in the list</p>\n<p>MainActivity.java</p>\n<pre><code>package com.example.quazzyapp;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.content.Intent;\nimport android.os.Build;\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.provider.Settings;\n\npublic class MainActivity extends AppCompatActivity {\n    private static final int PERMISSION_STORAGE = 101;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        if (!PremissionUtils.hasPermissions(MainActivity.this)) {\n            PremissionUtils.requestPermissions(MainActivity.this, PERMISSION_STORAGE);\n        }\n    }\n}\n</code></pre>\n<p>PremissionUtils.java</p>\n<pre><code>package com.example.quazzyapp;\n\nimport android.app.Activity;\nimport android.content.Context;\nimport android.content.Intent;\nimport android.content.pm.PackageManager;\nimport android.net.Uri;\nimport android.os.Build;\nimport android.os.Environment;\nimport android.provider.Settings;\n\nimport androidx.core.app.ActivityCompat;\nimport androidx.core.content.ContextCompat;\n\npublic class PremissionUtils {\n    public static boolean hasPermissions(Context context) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n            return Environment.isExternalStorageManager();\n        } else if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.M) {\n            return ContextCompat.checkSelfPermission(context, android.Manifest.permission.WRITE_EXTERNAL_STORAGE)\n                    == PackageManager.PERMISSION_GRANTED;\n        } else {\n            return true;\n        }\n    }\n\n    public static void requestPermissions(Activity activity, int requestCode) {\n        if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {\n            try {\n                Intent intent = new Intent(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);\n                intent.addCategory(&quot;android.intent.category.DEFAULT&quot;);\n                intent.setData(Uri.parse(String.format(&quot;package:%s&quot;, activity.getPackageName())));\n                activity.startActivityForResult(intent, requestCode);\n            } catch (Exception e) {\n                Intent intent = new Intent();\n                intent.setAction(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);\n                activity.startActivityForResult(intent, requestCode);\n            }\n        } else {\n            ActivityCompat.requestPermissions(activity,\n                    new String[] { android.Manifest.permission.WRITE_EXTERNAL_STORAGE },\n                    requestCode);\n        }\n    }\n}\n</code></pre>\n<p>build.gradle.kts</p>\n<pre><code>plugins {\n    id(&quot;com.android.application&quot;)\n}\n\nandroid {\n    namespace = &quot;com.example.quazzyapp&quot;\n    compileSdk = 34\n\n    defaultConfig {\n        applicationId = &quot;com.example.quazzyapp&quot;\n        minSdk = 24\n        targetSdk = 33\n        versionCode = 1\n        versionName = &quot;1.0&quot;\n\n        testInstrumentationRunner = &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n    }\n\n    buildTypes {\n        release {\n            isMinifyEnabled = false\n            proguardFiles(getDefaultProguardFile(&quot;proguard-android-optimize.txt&quot;), &quot;proguard-rules.pro&quot;)\n        }\n    }\n    compileOptions {\n        sourceCompatibility = JavaVersion.VERSION_1_8\n        targetCompatibility = JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n\n    implementation(&quot;androidx.appcompat:appcompat:1.6.1&quot;)\n    implementation(&quot;com.google.android.material:material:1.8.0&quot;)\n    implementation(&quot;androidx.constraintlayout:constraintlayout:2.1.4&quot;)\n    testImplementation(&quot;junit:junit:4.13.2&quot;)\n    androidTestImplementation(&quot;androidx.test.ext:junit:1.1.5&quot;)\n    androidTestImplementation(&quot;androidx.test.espresso:espresso-core:3.5.1&quot;)\n}\n</code></pre>\n<p>AndriodManifest.xml</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION&quot; /&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:dataExtractionRules=&quot;@xml/data_extraction_rules&quot;\n        android:fullBackupContent=&quot;@xml/backup_rules&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.QuazzyApp&quot;\n        tools:targetApi=&quot;31&quot;&gt;\n        &lt;activity\n            android:name=&quot;.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>There is a possibility that the problem is located locally on the tested smartphone, unfortunately I can't check on other devices</p>\n<p>I created an intent to request permissions in a new project to exclude the influence of other pieces of code, but nothing happened and the problem remained</p>\n"},{"tags":["java","maven","groovy","maven-plugin","maven-surefire-plugin"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1698408022,"post_id":77373704,"comment_id":136404991,"body_markdown":"does your project have multiple modules? (in POM)\nbtw: when you call `mvn` with the goal `install`, `compile` is included - will probably trigger compile twice, but that should not impact the tests. Please notice that the first occurence in the logs shows 0 tests run, but the second shows 28.","body":"does your project have multiple modules? (in POM) btw: when you call <code>mvn</code> with the goal <code>install</code>, <code>compile</code> is included - will probably trigger compile twice, but that should not impact the tests. Please notice that the first occurence in the logs shows 0 tests run, but the second shows 28."},{"owner":{"account_id":6364484,"reputation":534,"user_id":4938849,"display_name":"Remo"},"score":0,"creation_date":1698408271,"post_id":77373704,"comment_id":136405026,"body_markdown":"yes, its an multi module application. But in earlier version, this issue not happened. Is there anyway to show only second occurence?","body":"yes, its an multi module application. But in earlier version, this issue not happened. Is there anyway to show only second occurence?"},{"owner":{"account_id":6364484,"reputation":534,"user_id":4938849,"display_name":"Remo"},"score":0,"creation_date":1698408872,"post_id":77373704,"comment_id":136405146,"body_markdown":"Updated sub module plugin","body":"Updated sub module plugin"},{"owner":{"account_id":3793708,"reputation":7679,"user_id":3149528,"accept_rate":50,"display_name":"Slawomir Jaranowski"},"score":1,"creation_date":1698409503,"post_id":77373704,"comment_id":136405298,"body_markdown":"Why you add dependencies `surefire-junit47` and `surefire-junit-platform` to `maven-surefire-plugin`? Do you use JUnit4 and JUnit5 in one project?","body":"Why you add dependencies <code>surefire-junit47</code> and <code>surefire-junit-platform</code> to <code>maven-surefire-plugin</code>? Do you use JUnit4 and JUnit5 in one project?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1698413775,"post_id":77373704,"comment_id":136406175,"body_markdown":"Based on what I can see here you don&#39;t have an engine of junit jupiter anywhere also why using an old versions for maven-surefire-plugin ... etc. furtherrmore you should define the junit jupiter part via BOM ...","body":"Based on what I can see here you don&#39;t have an engine of junit jupiter anywhere also why using an old versions for maven-surefire-plugin ... etc. furtherrmore you should define the junit jupiter part via BOM ..."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1698502393,"post_id":77373704,"comment_id":136415391,"body_markdown":"which JUnit version do you want to use? 4 or 5? (If you don&#39;t know exactly, just add one import of an `@Test` annotation here, probably the package name helps us.)","body":"which JUnit version do you want to use? 4 or 5? (If you don&#39;t know exactly, just add one import of an <code>@Test</code> annotation here, probably the package name helps us.)"},{"owner":{"account_id":6364484,"reputation":534,"user_id":4938849,"display_name":"Remo"},"score":0,"creation_date":1698638938,"post_id":77373704,"comment_id":136426369,"body_markdown":"```surefire-junit47``` plugin is there from very long in my project. I have added ```surefire-junit-platform``` to run the unit tests as Junit in intelliJ. Without this intelliJ not picking the test cases to run. I am not having any Junit test cases in my project. Only using spock. \n\nNow I tried to removed both ```surefire-junit47 and surefire-junit-platform``` plugins and able to run the test cases in intelliJ and also only able to see this ```&quot;[INFO] Tests run: 28&quot;``` occurence.","body":"<code>surefire-junit47</code> plugin is there from very long in my project. I have added <code>surefire-junit-platform</code> to run the unit tests as Junit in intelliJ. Without this intelliJ not picking the test cases to run. I am not having any Junit test cases in my project. Only using spock.   Now I tried to removed both <code>surefire-junit47 and surefire-junit-platform</code> plugins and able to run the test cases in intelliJ and also only able to see this <code>&quot;[INFO] Tests run: 28&quot;</code> occurence."},{"owner":{"account_id":6364484,"reputation":534,"user_id":4938849,"display_name":"Remo"},"score":0,"creation_date":1698640984,"post_id":77373704,"comment_id":136426507,"body_markdown":"I was faced ```java.lang.NoClassDefFoundError: org/junit/platform/engine/discovery/NestedClassSelector``` while running test. After adding `` junit-platform-engine``` dependency, its solved. Why I need to add Junit dependency in spock environment?","body":"I was faced <code>java.lang.NoClassDefFoundError: org&#47;junit&#47;platform&#47;engine&#47;discovery&#47;NestedClassSelector</code> while running test. After adding `` junit-platform-engine``` dependency, its solved. Why I need to add Junit dependency in spock environment?"}],"owner":{"account_id":6364484,"reputation":534,"user_id":4938849,"display_name":"Remo"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698408826,"creation_date":1698405235,"question_id":77373704,"body_markdown":"I have a Java application using the Maven build tool and using Spock framework for unit test cases.\r\n\r\nI am upgrading my Groovy version 2.5.7 to 3.0.19 and Spock version 1.3-groovy-2.5 to 2.3-groovy-3.0.\r\n\r\nproperties:\r\n```xml\r\n&lt;mavenSurefirePluginVersion&gt;3.0.0-M4&lt;/mavenSurefirePluginVersion&gt;\r\n&lt;gmaven-plugin.version&gt;1.5&lt;/gmaven-plugin.version&gt;\r\n&lt;gmaven-runtime.version&gt;1.5&lt;/gmaven-runtime.version&gt;\r\n&lt;java.version&gt;11&lt;/java.version&gt;\r\n&lt;mavenCompilerPluginVersion&gt;3.8.0&lt;/mavenCompilerPluginVersion&gt;\r\n```\r\nBelow are the plugins:\r\n```xml\r\n&lt;plugins&gt;\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n            &lt;source&gt;${java.version}&lt;/source&gt;\r\n            &lt;target&gt;${java.version}&lt;/target&gt;\r\n        &lt;/configuration&gt;\r\n    &lt;/plugin&gt;\r\n\r\n    &lt;plugin&gt;\r\n        &lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\r\n        &lt;artifactId&gt;gmaven-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${gmaven-plugin.version}&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;providerSelection&gt;2.0&lt;/providerSelection&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;executions&gt;\r\n            &lt;execution&gt;\r\n                &lt;goals&gt;\r\n                    &lt;goal&gt;compile&lt;/goal&gt;\r\n                    &lt;goal&gt;testCompile&lt;/goal&gt;\r\n                &lt;/goals&gt;\r\n            &lt;/execution&gt;\r\n        &lt;/executions&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.gmaven.runtime&lt;/groupId&gt;\r\n                &lt;artifactId&gt;gmaven-runtime-2.0&lt;/artifactId&gt;\r\n                &lt;version&gt;${gmaven-runtime.version}&lt;/version&gt;\r\n                &lt;exclusions&gt;\r\n                    &lt;exclusion&gt;\r\n                        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n                        &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\r\n                    &lt;/exclusion&gt;\r\n                &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\r\n                &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\r\n                &lt;version&gt;${groovyVersion}&lt;/version&gt;\r\n                &lt;type&gt;pom&lt;/type&gt;\r\n            &lt;/dependency&gt;\r\n\r\n        &lt;/dependencies&gt;\r\n    &lt;/plugin&gt;\r\n    &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;${mavenSurefirePluginVersion}&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n            &lt;properties&gt;\r\n                &lt;property&gt;\r\n                    &lt;name&gt;listener&lt;/name&gt;\r\n                    &lt;value&gt;org.sonar.java.jacoco.JUnitListener&lt;/value&gt;\r\n                &lt;/property&gt;\r\n            &lt;/properties&gt;\r\n            &lt;testFailureIgnore&gt;false&lt;/testFailureIgnore&gt;\r\n            &lt;useFile&gt;false&lt;/useFile&gt;\r\n            &lt;includes&gt;\r\n                &lt;include&gt;**/*Spec.java&lt;/include&gt;\r\n            &lt;/includes&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;dependencies&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\r\n                &lt;artifactId&gt;surefire-junit47&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenSurefirePluginVersion}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\r\n                &lt;artifactId&gt;surefire-junit-platform&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenSurefirePluginVersion}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    &lt;/plugin&gt;\r\n```\r\n\r\nAdded dependency:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit-platform-engine&lt;/artifactId&gt;\r\n    &lt;version&gt;1.9.0&lt;/version&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nWhile doing ```maven clean compile install``` in IntelliJ, I get below logs\r\n\r\n```none\r\n[INFO] --- gmaven-plugin:1.5:testCompile (default) @ test-base ---\r\n[INFO] Compiled 17 Groovy classes\r\n[INFO] \r\n[INFO] --- maven-surefire-plugin:3.0.0-M4:test (default-test) @ test-base ---\r\n[INFO] \r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n[INFO] \r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\r\n[INFO] \r\n[INFO] \r\n[INFO] -------------------------------------------------------\r\n[INFO]  T E S T S\r\n[INFO] -------------------------------------------------------\r\n\r\n--- running tests----\r\n[INFO] Results:\r\n[INFO] \r\n[INFO] Tests run: 28, Failures: 0, Errors: 0, Skipped: 0\r\n```\r\n\r\nIts an multi module application and **test-base** is a sub module and which having below plugin:\r\n\r\n```\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;${mavenCompilerPluginVersion}&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;11&lt;/source&gt;\r\n                    &lt;target&gt;11&lt;/target&gt;\r\n                    &lt;generatedSourcesDirectory&gt;${project.build.directory}/generated-sources/&lt;/generatedSourcesDirectory&gt;\r\n                    &lt;compilerArgument&gt;-proc:none&lt;/compilerArgument&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\n\r\nHere, why am I seeing [INFO] Tests run: two times? One with 0 tests run and the other one with actual tests run. How to remove the first test results?","title":"Why maven-surefire plugin running twice?","body":"<p>I have a Java application using the Maven build tool and using Spock framework for unit test cases.</p>\n<p>I am upgrading my Groovy version 2.5.7 to 3.0.19 and Spock version 1.3-groovy-2.5 to 2.3-groovy-3.0.</p>\n<p>properties:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;mavenSurefirePluginVersion&gt;3.0.0-M4&lt;/mavenSurefirePluginVersion&gt;\n&lt;gmaven-plugin.version&gt;1.5&lt;/gmaven-plugin.version&gt;\n&lt;gmaven-runtime.version&gt;1.5&lt;/gmaven-runtime.version&gt;\n&lt;java.version&gt;11&lt;/java.version&gt;\n&lt;mavenCompilerPluginVersion&gt;3.8.0&lt;/mavenCompilerPluginVersion&gt;\n</code></pre>\n<p>Below are the plugins:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugins&gt;\n\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n            &lt;source&gt;${java.version}&lt;/source&gt;\n            &lt;target&gt;${java.version}&lt;/target&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.codehaus.gmaven&lt;/groupId&gt;\n        &lt;artifactId&gt;gmaven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${gmaven-plugin.version}&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;providerSelection&gt;2.0&lt;/providerSelection&gt;\n        &lt;/configuration&gt;\n        &lt;executions&gt;\n            &lt;execution&gt;\n                &lt;goals&gt;\n                    &lt;goal&gt;compile&lt;/goal&gt;\n                    &lt;goal&gt;testCompile&lt;/goal&gt;\n                &lt;/goals&gt;\n            &lt;/execution&gt;\n        &lt;/executions&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.gmaven.runtime&lt;/groupId&gt;\n                &lt;artifactId&gt;gmaven-runtime-2.0&lt;/artifactId&gt;\n                &lt;version&gt;${gmaven-runtime.version}&lt;/version&gt;\n                &lt;exclusions&gt;\n                    &lt;exclusion&gt;\n                        &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n                        &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\n                    &lt;/exclusion&gt;\n                &lt;/exclusions&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.groovy&lt;/groupId&gt;\n                &lt;artifactId&gt;groovy-all&lt;/artifactId&gt;\n                &lt;version&gt;${groovyVersion}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n            &lt;/dependency&gt;\n\n        &lt;/dependencies&gt;\n    &lt;/plugin&gt;\n    &lt;plugin&gt;\n        &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n        &lt;version&gt;${mavenSurefirePluginVersion}&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;properties&gt;\n                &lt;property&gt;\n                    &lt;name&gt;listener&lt;/name&gt;\n                    &lt;value&gt;org.sonar.java.jacoco.JUnitListener&lt;/value&gt;\n                &lt;/property&gt;\n            &lt;/properties&gt;\n            &lt;testFailureIgnore&gt;false&lt;/testFailureIgnore&gt;\n            &lt;useFile&gt;false&lt;/useFile&gt;\n            &lt;includes&gt;\n                &lt;include&gt;**/*Spec.java&lt;/include&gt;\n            &lt;/includes&gt;\n        &lt;/configuration&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n                &lt;artifactId&gt;surefire-junit47&lt;/artifactId&gt;\n                &lt;version&gt;${mavenSurefirePluginVersion}&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.maven.surefire&lt;/groupId&gt;\n                &lt;artifactId&gt;surefire-junit-platform&lt;/artifactId&gt;\n                &lt;version&gt;${mavenSurefirePluginVersion}&lt;/version&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<p>Added dependency:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-platform-engine&lt;/artifactId&gt;\n    &lt;version&gt;1.9.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>While doing <code>maven clean compile install</code> in IntelliJ, I get below logs</p>\n<pre class=\"lang-none prettyprint-override\"><code>[INFO] --- gmaven-plugin:1.5:testCompile (default) @ test-base ---\n[INFO] Compiled 17 Groovy classes\n[INFO] \n[INFO] --- maven-surefire-plugin:3.0.0-M4:test (default-test) @ test-base ---\n[INFO] \n[INFO] -------------------------------------------------------\n[INFO]  T E S T S\n[INFO] -------------------------------------------------------\n[INFO] \n[INFO] Results:\n[INFO] \n[INFO] Tests run: 0, Failures: 0, Errors: 0, Skipped: 0\n[INFO] \n[INFO] \n[INFO] -------------------------------------------------------\n[INFO]  T E S T S\n[INFO] -------------------------------------------------------\n\n--- running tests----\n[INFO] Results:\n[INFO] \n[INFO] Tests run: 28, Failures: 0, Errors: 0, Skipped: 0\n</code></pre>\n<p>Its an multi module application and <strong>test-base</strong> is a sub module and which having below plugin:</p>\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${mavenCompilerPluginVersion}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;11&lt;/source&gt;\n                    &lt;target&gt;11&lt;/target&gt;\n                    &lt;generatedSourcesDirectory&gt;${project.build.directory}/generated-sources/&lt;/generatedSourcesDirectory&gt;\n                    &lt;compilerArgument&gt;-proc:none&lt;/compilerArgument&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>Here, why am I seeing [INFO] Tests run: two times? One with 0 tests run and the other one with actual tests run. How to remove the first test results?</p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"account_id":13161401,"reputation":333,"user_id":9506781,"display_name":"Oskarro"},"score":0,"creation_date":1668977400,"post_id":74511814,"comment_id":131531545,"body_markdown":"Please execute two additional commands and add result output here:  \n`./gradlew wrapper --stacktrace` and `./gradlew --version`","body":"Please execute two additional commands and add result output here:   <code>.&#47;gradlew wrapper --stacktrace</code> and <code>.&#47;gradlew --version</code>"},{"owner":{"account_id":26813292,"reputation":65,"user_id":20403560,"display_name":"Mateusz Kuncewicz"},"score":0,"creation_date":1668978126,"post_id":74511814,"comment_id":131531675,"body_markdown":"gradle verson - 4.10.2, and ./gradlew wrapper --stacktrace is too long and i can&#39;t add result in com","body":"gradle verson - 4.10.2, and ./gradlew wrapper --stacktrace is too long and i can&#39;t add result in com"},{"owner":{"account_id":26813292,"reputation":65,"user_id":20403560,"display_name":"Mateusz Kuncewicz"},"score":0,"creation_date":1668978631,"post_id":74511814,"comment_id":131531779,"body_markdown":"I added the result in &quot;ask&quot;","body":"I added the result in &quot;ask&quot;"},{"owner":{"account_id":13161401,"reputation":333,"user_id":9506781,"display_name":"Oskarro"},"score":0,"creation_date":1668979383,"post_id":74511814,"comment_id":131531955,"body_markdown":"OK, but could you paste all info regarding the second command because JVM version is also important","body":"OK, but could you paste all info regarding the second command because JVM version is also important"},{"owner":{"account_id":26813292,"reputation":65,"user_id":20403560,"display_name":"Mateusz Kuncewicz"},"score":0,"creation_date":1668979636,"post_id":74511814,"comment_id":131532010,"body_markdown":"------------------------------------------------------------\nGradle 4.10.2                                               \n------------------------------------------------------------\n\nBuild time:   2018-09-19 18:10:15 UTC\nRevision:     b4d8d5d170bb4ba516e88d7fe5647e2323d791dd\n\nKotlin DSL:   1.0-rc-6\nKotlin:       1.2.61\nGroovy:       2.4.15\nAnt:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018\nJVM:          17.0.5 (Oracle Corporation 17.0.5+9-LTS-191)\nOS:           Windows 10 10.0 amd64","body":"------------------------------------------------------------ Gradle 4.10.2                                                ------------------------------------------------------------  Build time:   2018-09-19 18:10:15 UTC Revision:     b4d8d5d170bb4ba516e88d7fe5647e2323d791dd  Kotlin DSL:   1.0-rc-6 Kotlin:       1.2.61 Groovy:       2.4.15 Ant:          Apache Ant(TM) version 1.9.11 compiled on March 23 2018 JVM:          17.0.5 (Oracle Corporation 17.0.5+9-LTS-191) OS:           Windows 10 10.0 amd64"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1668980107,"post_id":74511814,"comment_id":131532095,"body_markdown":"You are running Java version 17. To use Gradle with Java 17 you must upgrade to at least Gradle 7.3 (https://stackoverflow.com/questions/69801373/starting-from-which-version-gradle-supports-java-17). The alternate approach is to use an older Java version (Java 1.8 if you want to stay with Gradle 4.10, Java 11 if you can upgrade to Gradle 5.0 or later).","body":"You are running Java version 17. To use Gradle with Java 17 you must upgrade to at least Gradle 7.3 (<a href=\"https://stackoverflow.com/questions/69801373/starting-from-which-version-gradle-supports-java-17\" title=\"starting from which version gradle supports java 17\">stackoverflow.com/questions/69801373/&hellip;</a>). The alternate approach is to use an older Java version (Java 1.8 if you want to stay with Gradle 4.10, Java 11 if you can upgrade to Gradle 5.0 or later)."},{"owner":{"account_id":13161401,"reputation":333,"user_id":9506781,"display_name":"Oskarro"},"score":0,"creation_date":1668982026,"post_id":74511814,"comment_id":131532483,"body_markdown":"Btw, I found one nice article with great explanation and way of fix: https://highlysuspect.agency/posts/unable_to_get_windows_mutable_environment_variable_map/ . I hope it helps :)","body":"Btw, I found one nice article with great explanation and way of fix: <a href=\"https://highlysuspect.agency/posts/unable_to_get_windows_mutable_environment_variable_map/\" rel=\"nofollow noreferrer\">highlysuspect.agency/posts/&hellip;</a> . I hope it helps :)"}],"answers":[{"tags":[],"owner":{"account_id":13161401,"reputation":333,"user_id":9506781,"display_name":"Oskarro"},"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1668980052,"creation_date":1668980052,"answer_id":74512181,"question_id":74511814,"body_markdown":"I think that based on what you wrote in the comments under your post I found the cause of the error.\r\n\r\nTake a look at the Gradle version you are using and the JVM version - the time difference between them is quite large. In other words, they are incompatible. \r\n \r\n[![enter image description here][1]][1]\r\n\r\nUpdate gradle version or change JAVA_HOME path to older JVM version\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VSL0Y.png","title":"Unable to get mutable Windows environment variable map - gradle","body":"<p>I think that based on what you wrote in the comments under your post I found the cause of the error.</p>\n<p>Take a look at the Gradle version you are using and the JVM version - the time difference between them is quite large. In other words, they are incompatible.</p>\n<p><a href=\"https://i.stack.imgur.com/VSL0Y.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/VSL0Y.png\" alt=\"enter image description here\" /></a></p>\n<p>Update gradle version or change JAVA_HOME path to older JVM version</p>\n"},{"tags":[],"owner":{"account_id":4619184,"reputation":2113,"user_id":3744739,"accept_rate":33,"display_name":"SoliQuiD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696927337,"creation_date":1696927337,"answer_id":77264186,"question_id":74511814,"body_markdown":"Ok, i realize its a compatibility problem. i&#39;ll mention the facts i knew about that. and what i did to solve the issue.\r\n\r\n- VSCode seems to be very bad with building gradle.\r\n\r\n- you have to open the project as an android project, in order to update the gradle using `Tools` &gt; `AGP Upgrade Assistant`. In android Studio, close the current flutter project. open the android folder inside your flutter project.\r\n\r\n- the first issue i noticed from the build results that im using a java version in my project different from the JDK i installed and set the `JAVA_HOME` env variable to. i deleted the `JAVA_HOME` cos it seemed like the project already has a java instance (i honestly dont fully understand that up until this moment).\r\n\r\n- your project uses a built in gradle version located at `android` &gt; `gradle` &gt; `wrapper`. for some reason my project was failing to overrite that, so i manually deleted it. rebuilt the `build.gradle` with changing the gradle version to what i want.\r\n\r\n&gt; I know the answer isn&#39;t perfectly written. hopefully i&#39;ll come back to edit it later. i just hope it helps in the meanwhile.\r\n\r\n","title":"Unable to get mutable Windows environment variable map - gradle","body":"<p>Ok, i realize its a compatibility problem. i'll mention the facts i knew about that. and what i did to solve the issue.</p>\n<ul>\n<li><p>VSCode seems to be very bad with building gradle.</p>\n</li>\n<li><p>you have to open the project as an android project, in order to update the gradle using <code>Tools</code> &gt; <code>AGP Upgrade Assistant</code>. In android Studio, close the current flutter project. open the android folder inside your flutter project.</p>\n</li>\n<li><p>the first issue i noticed from the build results that im using a java version in my project different from the JDK i installed and set the <code>JAVA_HOME</code> env variable to. i deleted the <code>JAVA_HOME</code> cos it seemed like the project already has a java instance (i honestly dont fully understand that up until this moment).</p>\n</li>\n<li><p>your project uses a built in gradle version located at <code>android</code> &gt; <code>gradle</code> &gt; <code>wrapper</code>. for some reason my project was failing to overrite that, so i manually deleted it. rebuilt the <code>build.gradle</code> with changing the gradle version to what i want.</p>\n</li>\n</ul>\n<blockquote>\n<p>I know the answer isn't perfectly written. hopefully i'll come back to edit it later. i just hope it helps in the meanwhile.</p>\n</blockquote>\n"}],"owner":{"account_id":26813292,"reputation":65,"user_id":20403560,"display_name":"Mateusz Kuncewicz"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6164,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":74512181,"answer_count":2,"score":4,"last_activity_date":1698408585,"creation_date":1668976835,"question_id":74511814,"body_markdown":"When i try build project, terminal return error:\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nUnable to get mutable Windows environment variable map\r\n\r\nbuild.gradle:\r\n\r\n\r\n```\r\nbuildscript {\r\n    ext {\r\n        springBootVersion = &#39;2.1.18.RELEASE&#39;\r\n    }\r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    dependencies {\r\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\r\n    }\r\n}\r\n\r\napply plugin: &#39;java&#39;\r\napply plugin: &#39;idea&#39;\r\napply plugin: &#39;org.springframework.boot&#39;\r\napply plugin: &#39;io.spring.dependency-management&#39;\r\n\r\ngroup = &#39;com.kodilla&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = 1.8\r\n\r\nrepositories {\r\n    mavenCentral()\r\n}\r\n\r\n\r\ndependencies {\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;)\r\n    implementation(&#39;org.springframework.boot:spring-boot-starter-web&#39;)\r\n    implementation &#39;org.projectlombok:lombok:1.18.24&#39;\r\n    runtimeOnly(&#39;com.h2database:h2&#39;)\r\n    testImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;)\r\n    implementation group: &#39;mysql&#39;, name: &#39;mysql-connector-java&#39;, version: &#39;5.1.13&#39;\r\n}\r\n```\r\nPS D:\\Development\\Projects\\project-jdp-2212-02&gt; ./gradlew wrapper --stacktrace\r\n\r\nFAILURE: Build failed with an exception.                                                                                                                                               \r\n                                                                                                                                                                                       \r\n* What went wrong:                                                                                                                                                                     \r\nUnable to get mutable Windows environment variable map                                                                                                                                 \r\n                                                                                                                                                                                       \r\n* Try:                                                                                                                                                                                 \r\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.                                                                                        \r\n                                                                                                                                                                                       \r\n* Exception is:                                                                                                                                                                        \r\nnet.rubygrapefruit.platform.NativeException: Unable to get mutable Windows environment variable map                                                                                    \r\n        at net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:127)                                                                                  \r\n        at net.rubygrapefruit.platform.internal.WrapperProcess.setEnvInternal(WrapperProcess.java:100)                                                                                 \r\n        at net.rubygrapefruit.platform.internal.WrapperProcess.setEnvironmentVariable(WrapperProcess.java:85)                                                                          \r\n        at org.gradle.internal.nativeintegration.processenvironment.NativePlatformBackedProcessEnvironment.setNativeEnvironmentVariable(NativePlatformBackedProcessEnvironment.java:36)\r\n        at org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.setEnvironmentVariable(AbstractProcessEnvironment.java:67)                              \r\n        at org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.maybeSetEnvironment(AbstractProcessEnvironment.java:41)                                 \r\n        at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:65)                                                                 \r\n        at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)                                                                                   \r\n        at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)                                                                       \r\n        at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)                                                               \r\n        at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)                                                                             \r\n        at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\r\n        at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\r\n        at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\r\n        at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\r\n        at java.base/java.lang.Thread.run(Thread.java:833)\r\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private static final java.util.Map java.lang.ProcessEnvironment.theCaseInsensitiveEnvironment accessible: module java.base does not &quot;opens java.lang&quot; to \r\nunnamed module @5a39699c\r\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\r\n        at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\r\n        at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\r\n        at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\r\n        at net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:124)\r\n        ... 16 more\r\n\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\n\r\n```\r\nTried to find a solution in web but to no avail\r\n```\r\n","title":"Unable to get mutable Windows environment variable map - gradle","body":"<p>When i try build project, terminal return error:\nFAILURE: Build failed with an exception.</p>\n<ul>\n<li>What went wrong:\nUnable to get mutable Windows environment variable map</li>\n</ul>\n<p>build.gradle:</p>\n<pre><code>buildscript {\n    ext {\n        springBootVersion = '2.1.18.RELEASE'\n    }\n    repositories {\n        mavenCentral()\n    }\n    dependencies {\n        classpath(&quot;org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}&quot;)\n    }\n}\n\napply plugin: 'java'\napply plugin: 'idea'\napply plugin: 'org.springframework.boot'\napply plugin: 'io.spring.dependency-management'\n\ngroup = 'com.kodilla'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = 1.8\n\nrepositories {\n    mavenCentral()\n}\n\n\ndependencies {\n    implementation('org.springframework.boot:spring-boot-starter-data-jpa')\n    implementation('org.springframework.boot:spring-boot-starter-web')\n    implementation 'org.projectlombok:lombok:1.18.24'\n    runtimeOnly('com.h2database:h2')\n    testImplementation('org.springframework.boot:spring-boot-starter-test')\n    implementation group: 'mysql', name: 'mysql-connector-java', version: '5.1.13'\n}\n</code></pre>\n<p>PS D:\\Development\\Projects\\project-jdp-2212-02&gt; ./gradlew wrapper --stacktrace</p>\n<p>FAILURE: Build failed with an exception.</p>\n<ul>\n<li><p>What went wrong:<br />\nUnable to get mutable Windows environment variable map</p>\n</li>\n<li><p>Try:<br />\nRun with --info or --debug option to get more log output. Run with --scan to get full insights.</p>\n</li>\n<li><p>Exception is:<br />\nnet.rubygrapefruit.platform.NativeException: Unable to get mutable Windows environment variable map<br />\nat net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:127)<br />\nat net.rubygrapefruit.platform.internal.WrapperProcess.setEnvInternal(WrapperProcess.java:100)<br />\nat net.rubygrapefruit.platform.internal.WrapperProcess.setEnvironmentVariable(WrapperProcess.java:85)<br />\nat org.gradle.internal.nativeintegration.processenvironment.NativePlatformBackedProcessEnvironment.setNativeEnvironmentVariable(NativePlatformBackedProcessEnvironment.java:36)\nat org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.setEnvironmentVariable(AbstractProcessEnvironment.java:67)<br />\nat org.gradle.internal.nativeintegration.processenvironment.AbstractProcessEnvironment.maybeSetEnvironment(AbstractProcessEnvironment.java:41)<br />\nat org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:65)<br />\nat org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:36)<br />\nat org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:122)<br />\nat org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:50)<br />\nat org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:295)<br />\nat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)\nat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)\nat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)\nat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)\nat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)\nat java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make field private static final java.util.Map java.lang.ProcessEnvironment.theCaseInsensitiveEnvironment accessible: module java.base does not &quot;opens java.lang&quot; to\nunnamed module @5a39699c\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\nat java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\nat java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)\nat java.base/java.lang.reflect.Field.setAccessible(Field.java:172)\nat net.rubygrapefruit.platform.internal.WrapperProcess.getWindowsEnv(WrapperProcess.java:124)\n... 16 more</p>\n</li>\n<li><p>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></p>\n</li>\n</ul>\n<pre><code>Tried to find a solution in web but to no avail\n</code></pre>\n"},{"tags":["java","angular","encryption","aes","badpaddingexception"],"comments":[{"owner":{"account_id":1684984,"reputation":27030,"user_id":1548468,"display_name":"Botje"},"score":0,"creation_date":1698408213,"post_id":77373980,"comment_id":136405019,"body_markdown":"`MTIzNDU2Nzg5MEFCQ0RFRkdISUpLTE1O` is base64 encoding of a 24-byte string. You should probably go read the source code of `CryptoTS.AES.encrypt` to see how it derives a key from that input string. PBKDF2 would be my guess.","body":"<code>MTIzNDU2Nzg5MEFCQ0RFRkdISUpLTE1O</code> is base64 encoding of a 24-byte string. You should probably go read the source code of <code>CryptoTS.AES.encrypt</code> to see how it derives a key from that input string. PBKDF2 would be my guess."},{"owner":{"account_id":12359353,"reputation":42427,"user_id":9014097,"display_name":"Topaco"},"score":1,"creation_date":1698414836,"post_id":77373980,"comment_id":136406468,"body_markdown":"If you pass the key material as string (as you do), it is interpreted as password and CryptoJS/CryptoTS uses a key derivation function (`EVP_BytesToKey()`) in conjunction with a random 8 bytes salt to derive key and IV. The result is the concatenation of the ASCII encoding of `Salted__` + 8 bytes salt + ciphertext (which is why your Base64 encoded result starts with `U2FsdGVkX1`). In the Java code this key derivation is not considered at all, so decryption must fail.","body":"If you pass the key material as string (as you do), it is interpreted as password and CryptoJS/CryptoTS uses a key derivation function (<code>EVP_BytesToKey()</code>) in conjunction with a random 8 bytes salt to derive key and IV. The result is the concatenation of the ASCII encoding of <code>Salted__</code> + 8 bytes salt + ciphertext (which is why your Base64 encoded result starts with <code>U2FsdGVkX1</code>). In the Java code this key derivation is not considered at all, so decryption must fail."},{"owner":{"account_id":288696,"reputation":91230,"user_id":589259,"accept_rate":82,"display_name":"Maarten Bodewes"},"score":1,"creation_date":1698417811,"post_id":77373980,"comment_id":136407202,"body_markdown":"Not sure why the CryptoTS package is used. Why would you use a single person, unmaintained library for security purposes.","body":"Not sure why the CryptoTS package is used. Why would you use a single person, unmaintained library for security purposes."}],"owner":{"account_id":18079451,"reputation":19,"user_id":13142012,"display_name":"PersonuNique"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1698419734,"answer_count":0,"score":0,"last_activity_date":1698408031,"creation_date":1698408031,"question_id":77373980,"body_markdown":"I am trying to encrypt two variable mobile number and landline number in Angular and then trying to decrypt in Java, but i am getting the above mentioned error.\r\n\r\nBelow is the Encryption logic in Angular\r\n\r\n```\r\nconst encryptedMobileNumber = this.encrypt.encryptionAES(mobileNumber);\r\nconst encryptedLandlineNumber = this.encrypt.encryptionAES(landlineNumber);\r\n```\r\nThis will call an angular file encryption.service.ts and do the encryption\r\n\r\n\r\n\r\n```\r\nimport { Injectable } from &quot;@angular/core&quot;;\r\nimport * as CryptoTS from &#39;crypto-ts&#39;;\r\nimport { Dealer } from &quot;src/assets/data_customer/dealer&quot;;\r\n\r\n@Injectable({\r\n  providedIn: &quot;root&quot;\r\n})\r\nexport class EncryptionService {\r\n  key: string = &quot;z!!!!!!!1sdfadsf56adf456asdfasdf&quot;;\r\n  appProperties = {\r\n    VALUES: {\r\n      KEY: &quot;MTIzNDU2Nzg5MEFCQ0RFRkdISUpLTE1O&quot;,\r\n      IV: &quot;MTIzNDU2Nzg=&quot;\r\n    }\r\n  }\r\n\r\n  constructor() {}\r\n\r\n  encryptionAES (msg: string) {\r\n    // Encrypt\r\n    const ciphertext = CryptoTS.AES.encrypt(msg, &#39;secret key 123&#39;);\r\n    return ciphertext.toString();\r\n  }\r\n}\r\n```\r\n\r\nThen in Java, i am trying to decrypt those variables as given below:\r\n\r\n```\r\nimport javax.crypto.Cipher;\r\nimport javax.crypto.spec.SecretKeySpec;\r\nimport java.util.Base64;\r\n\r\npublic class StringDecryption {\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\tString mobileNumber= &quot;U2FsdGVkX1+Zft80q841JLxxNlJmbhGswoDY8PtPj/8=&quot;;\r\n\t\t\tString secretKey = &quot;secret key 123&quot;;\r\n\t\t\tbyte[] encryptedBytes = Base64.getDecoder().decode(mobileNumber);\r\n\t\t\tSecretKeySpec secretKeySpec = new SecretKeySpec(secretKey.getBytes(), &quot;AES&quot;);\r\n\t\t\tCipher cipher = Cipher.getInstance(&quot;AES&quot;);\r\n\t\t\tcipher.init(Cipher.DECRYPT_MODE, secretKeySpec);\r\n\t\t\tbyte[] decryptedBytes = cipher.doFinal(encryptedBytes);\r\n\t\t\tString decryptedString = new String(decryptedBytes);\r\n\t\t\tSystem.out.println(&quot;Decrypted String: &quot; + decryptedString);\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n}\r\n\r\n```\r\n\r\nThis gives me error as given below:\r\n\r\n```\r\njava.security.InvalidKeyException: Invalid AES key length: 14 bytes\r\n\tat com.sun.crypto.provider.AESCrypt.init(AESCrypt.java:87)\r\n\tat com.sun.crypto.provider.ElectronicCodeBook.init(ElectronicCodeBook.java:94)\r\n\tat com.sun.crypto.provider.CipherCore.init(CipherCore.java:591)\r\n\tat com.sun.crypto.provider.CipherCore.init(CipherCore.java:467)\r\n\tat com.sun.crypto.provider.AESCipher.engineInit(AESCipher.java:313)\r\n\tat javax.crypto.Cipher.implInit(Cipher.java:801)\r\n\tat javax.crypto.Cipher.chooseProvider(Cipher.java:863)\r\n\tat javax.crypto.Cipher.init(Cipher.java:1248)\r\n\tat javax.crypto.Cipher.init(Cipher.java:1185)\r\n\tat StringDecryption.main(StringDecryption.java:20)\r\n```\r\n\r\n\r\nI tried to change the secretKey values to :\r\n\r\n&quot;z!!!!!!!1sdfadsf56adf456asdfasdf&quot;\r\n\r\n&quot;MTIzNDU2Nzg5MEFCQ0RFRkdISUpLTE1O&quot;\r\n\r\nas these are mention in encryption.service.ts file\r\n\r\nBut this gave me another error\r\n\r\n```\r\njavax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\r\n\tat com.sun.crypto.provider.CipherCore.unpad(CipherCore.java:975)\r\n\tat com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1056)\r\n\tat com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:853)\r\n\tat com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:446)\r\n\tat javax.crypto.Cipher.doFinal(Cipher.java:2164)\r\n\tat StringDecryption.main(StringDecryption.java:14)\r\n\r\n```","title":"java.security.InvalidKeyException: Invalid AES key length: 14 bytes","body":"<p>I am trying to encrypt two variable mobile number and landline number in Angular and then trying to decrypt in Java, but i am getting the above mentioned error.</p>\n<p>Below is the Encryption logic in Angular</p>\n<pre><code>const encryptedMobileNumber = this.encrypt.encryptionAES(mobileNumber);\nconst encryptedLandlineNumber = this.encrypt.encryptionAES(landlineNumber);\n</code></pre>\n<p>This will call an angular file encryption.service.ts and do the encryption</p>\n<pre><code>import { Injectable } from &quot;@angular/core&quot;;\nimport * as CryptoTS from 'crypto-ts';\nimport { Dealer } from &quot;src/assets/data_customer/dealer&quot;;\n\n@Injectable({\n  providedIn: &quot;root&quot;\n})\nexport class EncryptionService {\n  key: string = &quot;z!!!!!!!1sdfadsf56adf456asdfasdf&quot;;\n  appProperties = {\n    VALUES: {\n      KEY: &quot;MTIzNDU2Nzg5MEFCQ0RFRkdISUpLTE1O&quot;,\n      IV: &quot;MTIzNDU2Nzg=&quot;\n    }\n  }\n\n  constructor() {}\n\n  encryptionAES (msg: string) {\n    // Encrypt\n    const ciphertext = CryptoTS.AES.encrypt(msg, 'secret key 123');\n    return ciphertext.toString();\n  }\n}\n</code></pre>\n<p>Then in Java, i am trying to decrypt those variables as given below:</p>\n<pre><code>import javax.crypto.Cipher;\nimport javax.crypto.spec.SecretKeySpec;\nimport java.util.Base64;\n\npublic class StringDecryption {\n    public static void main(String[] args) {\n        try {\n            String mobileNumber= &quot;U2FsdGVkX1+Zft80q841JLxxNlJmbhGswoDY8PtPj/8=&quot;;\n            String secretKey = &quot;secret key 123&quot;;\n            byte[] encryptedBytes = Base64.getDecoder().decode(mobileNumber);\n            SecretKeySpec secretKeySpec = new SecretKeySpec(secretKey.getBytes(), &quot;AES&quot;);\n            Cipher cipher = Cipher.getInstance(&quot;AES&quot;);\n            cipher.init(Cipher.DECRYPT_MODE, secretKeySpec);\n            byte[] decryptedBytes = cipher.doFinal(encryptedBytes);\n            String decryptedString = new String(decryptedBytes);\n            System.out.println(&quot;Decrypted String: &quot; + decryptedString);\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n}\n\n</code></pre>\n<p>This gives me error as given below:</p>\n<pre><code>java.security.InvalidKeyException: Invalid AES key length: 14 bytes\n    at com.sun.crypto.provider.AESCrypt.init(AESCrypt.java:87)\n    at com.sun.crypto.provider.ElectronicCodeBook.init(ElectronicCodeBook.java:94)\n    at com.sun.crypto.provider.CipherCore.init(CipherCore.java:591)\n    at com.sun.crypto.provider.CipherCore.init(CipherCore.java:467)\n    at com.sun.crypto.provider.AESCipher.engineInit(AESCipher.java:313)\n    at javax.crypto.Cipher.implInit(Cipher.java:801)\n    at javax.crypto.Cipher.chooseProvider(Cipher.java:863)\n    at javax.crypto.Cipher.init(Cipher.java:1248)\n    at javax.crypto.Cipher.init(Cipher.java:1185)\n    at StringDecryption.main(StringDecryption.java:20)\n</code></pre>\n<p>I tried to change the secretKey values to :</p>\n<p>&quot;z!!!!!!!1sdfadsf56adf456asdfasdf&quot;</p>\n<p>&quot;MTIzNDU2Nzg5MEFCQ0RFRkdISUpLTE1O&quot;</p>\n<p>as these are mention in encryption.service.ts file</p>\n<p>But this gave me another error</p>\n<pre><code>javax.crypto.BadPaddingException: Given final block not properly padded. Such issues can arise if a bad key is used during decryption.\n    at com.sun.crypto.provider.CipherCore.unpad(CipherCore.java:975)\n    at com.sun.crypto.provider.CipherCore.fillOutputBuffer(CipherCore.java:1056)\n    at com.sun.crypto.provider.CipherCore.doFinal(CipherCore.java:853)\n    at com.sun.crypto.provider.AESCipher.engineDoFinal(AESCipher.java:446)\n    at javax.crypto.Cipher.doFinal(Cipher.java:2164)\n    at StringDecryption.main(StringDecryption.java:14)\n\n</code></pre>\n"},{"tags":["java","graalvm-native-image","dynamic-proxy"],"owner":{"account_id":29766302,"reputation":1,"user_id":22812587,"display_name":"yrn1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698407208,"creation_date":1698401364,"question_id":77373292,"body_markdown":"I&#39;m trying to get native-image to work in this situation: I have a dynamic proxy on an interface, which has a super-interface that declares a default method. Invoking this default method from the sub-interface always fails.\r\n\r\nI tried to put various entries in proxy-config.json and reflect-config.json, including what was generated by the native-image agent, but I just cannot get it to work. I tried with GraalVM 21 and 17. Any ideas what I&#39;m doing wrong? Here&#39;s the code. I know it is a bit of a contrived example. This is the minimal version I could extract from a much more complicated code-base.\r\n\r\n\r\n```\r\npackage nativetest;\r\n\r\nimport java.lang.invoke.MethodHandle;\r\nimport java.lang.invoke.MethodHandles;\r\nimport java.lang.invoke.MethodType;\r\nimport java.lang.reflect.InvocationHandler;\r\nimport java.lang.reflect.Method;\r\nimport java.lang.reflect.Proxy;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Class&lt;?&gt; c = TestSubInterface.class;\r\n        TestInvocationHandler&lt;?&gt; handler = new TestInvocationHandler&lt;&gt;(c);\r\n        TestSubInterface proxy = (TestSubInterface) Proxy.newProxyInstance(Main.class.getClassLoader(),\r\n                new Class&lt;?&gt;[] { c }, handler);\r\n\r\n        System.out.println(&quot;Result: &quot; + proxy.doSomething());\r\n    }\r\n\r\n    public static class TestInvocationHandler&lt;T&gt; implements InvocationHandler {\r\n        private final Class&lt;T&gt; configClass;\r\n\r\n        public TestInvocationHandler(Class&lt;T&gt; configClass) {\r\n            this.configClass = configClass;\r\n        }\r\n\r\n        @Override\r\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\r\n            MethodHandle methodHandle = MethodHandles.lookup()\r\n                    .findSpecial(configClass, method.getName(),\r\n                            MethodType.methodType(method.getReturnType(), method.getParameterTypes()),\r\n                            configClass);\r\n            return methodHandle.bindTo(proxy).invoke();\r\n        }\r\n    }\r\n\r\n    public interface TestInterface {\r\n        default String doSomething() {\r\n            System.out.println(&quot;Doing something&quot;);\r\n            return &quot;Something done&quot;;\r\n        }\r\n    }\r\n\r\n    public interface TestSubInterface extends TestInterface {\r\n\r\n    }\r\n}\r\n\r\n```\r\n\r\nThe exception I&#39;m getting is\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.reflect.UndeclaredThrowableException\r\n\tat jdk.proxy4/jdk.proxy4.$Proxy48.doSomething(Unknown Source)\r\n\tat nativetest.Main.main(Main.java:17)\r\n\tat java.base@21.0.1/java.lang.invoke.LambdaForm$DMH/sa346b79c.invokeStaticInit(LambdaForm$DMH)\r\nCaused by: java.lang.NoSuchMethodException: no such method: nativetest.Main$TestSubInterface.doSomething()String/invokeSpecial\r\n\tat java.base@21.0.1/java.lang.invoke.MemberName.makeAccessException(MemberName.java:915)\r\n\tat java.base@21.0.1/java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:994)\r\n\tat java.base@21.0.1/java.lang.invoke.MethodHandles$Lookup.resolveOrFail(MethodHandles.java:3750)\r\n\tat java.base@21.0.1/java.lang.invoke.MethodHandles$Lookup.findSpecial(MethodHandles.java:3097)\r\n\tat nativetest.Main$TestInvocationHandler.invoke(Main.java:30)\r\n\t... 3 more\r\nCaused by: java.lang.NoSuchMethodError: nativetest.Main$TestSubInterface.doSomething()\r\n\tat org.graalvm.nativeimage.builder/com.oracle.svm.core.methodhandles.Util_java_lang_invoke_MethodHandleNatives.resolve(Target_java_lang_invoke_MethodHandleNatives.java:335)\r\n\tat java.base@21.0.1/java.lang.invoke.MethodHandleNatives.resolve(MethodHandleNatives.java:213)\r\n\tat java.base@21.0.1/java.lang.invoke.MemberName$Factory.resolve(MemberName.java:962)\r\n\tat java.base@21.0.1/java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:991)\r\n\t... 6 more\r\n```\r\n\r\nWhen running with `java -jar`, it works just fine btw.","title":"GraalVM native-image dynamic proxy fails to invoke methods defined in super-interfaces","body":"<p>I'm trying to get native-image to work in this situation: I have a dynamic proxy on an interface, which has a super-interface that declares a default method. Invoking this default method from the sub-interface always fails.</p>\n<p>I tried to put various entries in proxy-config.json and reflect-config.json, including what was generated by the native-image agent, but I just cannot get it to work. I tried with GraalVM 21 and 17. Any ideas what I'm doing wrong? Here's the code. I know it is a bit of a contrived example. This is the minimal version I could extract from a much more complicated code-base.</p>\n<pre><code>package nativetest;\n\nimport java.lang.invoke.MethodHandle;\nimport java.lang.invoke.MethodHandles;\nimport java.lang.invoke.MethodType;\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Proxy;\n\npublic class Main {\n    public static void main(String[] args) {\n        Class&lt;?&gt; c = TestSubInterface.class;\n        TestInvocationHandler&lt;?&gt; handler = new TestInvocationHandler&lt;&gt;(c);\n        TestSubInterface proxy = (TestSubInterface) Proxy.newProxyInstance(Main.class.getClassLoader(),\n                new Class&lt;?&gt;[] { c }, handler);\n\n        System.out.println(&quot;Result: &quot; + proxy.doSomething());\n    }\n\n    public static class TestInvocationHandler&lt;T&gt; implements InvocationHandler {\n        private final Class&lt;T&gt; configClass;\n\n        public TestInvocationHandler(Class&lt;T&gt; configClass) {\n            this.configClass = configClass;\n        }\n\n        @Override\n        public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n            MethodHandle methodHandle = MethodHandles.lookup()\n                    .findSpecial(configClass, method.getName(),\n                            MethodType.methodType(method.getReturnType(), method.getParameterTypes()),\n                            configClass);\n            return methodHandle.bindTo(proxy).invoke();\n        }\n    }\n\n    public interface TestInterface {\n        default String doSomething() {\n            System.out.println(&quot;Doing something&quot;);\n            return &quot;Something done&quot;;\n        }\n    }\n\n    public interface TestSubInterface extends TestInterface {\n\n    }\n}\n\n</code></pre>\n<p>The exception I'm getting is</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.reflect.UndeclaredThrowableException\n    at jdk.proxy4/jdk.proxy4.$Proxy48.doSomething(Unknown Source)\n    at nativetest.Main.main(Main.java:17)\n    at java.base@21.0.1/java.lang.invoke.LambdaForm$DMH/sa346b79c.invokeStaticInit(LambdaForm$DMH)\nCaused by: java.lang.NoSuchMethodException: no such method: nativetest.Main$TestSubInterface.doSomething()String/invokeSpecial\n    at java.base@21.0.1/java.lang.invoke.MemberName.makeAccessException(MemberName.java:915)\n    at java.base@21.0.1/java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:994)\n    at java.base@21.0.1/java.lang.invoke.MethodHandles$Lookup.resolveOrFail(MethodHandles.java:3750)\n    at java.base@21.0.1/java.lang.invoke.MethodHandles$Lookup.findSpecial(MethodHandles.java:3097)\n    at nativetest.Main$TestInvocationHandler.invoke(Main.java:30)\n    ... 3 more\nCaused by: java.lang.NoSuchMethodError: nativetest.Main$TestSubInterface.doSomething()\n    at org.graalvm.nativeimage.builder/com.oracle.svm.core.methodhandles.Util_java_lang_invoke_MethodHandleNatives.resolve(Target_java_lang_invoke_MethodHandleNatives.java:335)\n    at java.base@21.0.1/java.lang.invoke.MethodHandleNatives.resolve(MethodHandleNatives.java:213)\n    at java.base@21.0.1/java.lang.invoke.MemberName$Factory.resolve(MemberName.java:962)\n    at java.base@21.0.1/java.lang.invoke.MemberName$Factory.resolveOrFail(MemberName.java:991)\n    ... 6 more\n</code></pre>\n<p>When running with <code>java -jar</code>, it works just fine btw.</p>\n"},{"tags":["java","jooq"],"comments":[{"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"score":0,"creation_date":1698405774,"post_id":77370405,"comment_id":136404570,"body_markdown":"I&#39;m not sure why your particular error occurs. It seems you haven&#39;t provided all the information necessary to reproduce this error (perhaps you didn&#39;t `select()`, but project only a single column?","body":"I&#39;m not sure why your particular error occurs. It seems you haven&#39;t provided all the information necessary to reproduce this error (perhaps you didn&#39;t <code>select()</code>, but project only a single column?"}],"answers":[{"tags":[],"owner":{"account_id":247217,"reputation":213455,"user_id":521799,"accept_rate":89,"display_name":"Lukas Eder"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698406131,"creation_date":1698406131,"answer_id":77373802,"question_id":77370405,"body_markdown":"The best way to fetch to-many relationships in jOOQ is to use the [`MULTISET` operator][1]. It adds type safety to your mapping, and allows for projecting arbitrary levels of nesting:\r\n\r\n```java\r\nList&lt;UserEntity&gt; list =\r\ndsl.select(\r\n        USERS.ID,\r\n        USERS.USERNAME,\r\n        USERS.PASSWORD, // Not convinced you want to project this, though?\r\n        USERS.EMAIL\r\n        multiset(\r\n            select(\r\n                PROJECT.ID,\r\n                PROJECT.NAME,\r\n                PROJECT.DESCRIPTION,\r\n                PROJECT.LOCATION,\r\n                PROJECT.CREATION_DATE,\r\n                PROJECT.LAST_MODIFIED_DATE\r\n            )\r\n            .from(PROJECT)\r\n            .where(PROJECT.ID_USERS.eq(USERS.ID))\r\n        ).convertFrom(r -&gt; r.map(Records.mapping(ProjectEntity::new)))\r\n    )\r\n    .from(USERS)\r\n    .where(USERS.ID.eq(1))\r\n    .fetch(Records.mapping(UserEntity::new));\r\n```\r\n\r\nYou can also work with your `JOIN` if you believe that&#39;s faster / more suitable for your case, in case of which you can nest the collection using [`MULTISET_AGG`][2]. This alternative would work because you only have 1 nested collection.\r\n\r\n\r\n  [1]: https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/multiset-value-constructor/\r\n  [2]: https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/aggregate-functions/multiset-agg-function/","title":"Fetch an object that has a object inside using JOOQ","body":"<p>The best way to fetch to-many relationships in jOOQ is to use the <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/multiset-value-constructor/\" rel=\"nofollow noreferrer\"><code>MULTISET</code> operator</a>. It adds type safety to your mapping, and allows for projecting arbitrary levels of nesting:</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;UserEntity&gt; list =\ndsl.select(\n        USERS.ID,\n        USERS.USERNAME,\n        USERS.PASSWORD, // Not convinced you want to project this, though?\n        USERS.EMAIL\n        multiset(\n            select(\n                PROJECT.ID,\n                PROJECT.NAME,\n                PROJECT.DESCRIPTION,\n                PROJECT.LOCATION,\n                PROJECT.CREATION_DATE,\n                PROJECT.LAST_MODIFIED_DATE\n            )\n            .from(PROJECT)\n            .where(PROJECT.ID_USERS.eq(USERS.ID))\n        ).convertFrom(r -&gt; r.map(Records.mapping(ProjectEntity::new)))\n    )\n    .from(USERS)\n    .where(USERS.ID.eq(1))\n    .fetch(Records.mapping(UserEntity::new));\n</code></pre>\n<p>You can also work with your <code>JOIN</code> if you believe that's faster / more suitable for your case, in case of which you can nest the collection using <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/aggregate-functions/multiset-agg-function/\" rel=\"nofollow noreferrer\"><code>MULTISET_AGG</code></a>. This alternative would work because you only have 1 nested collection.</p>\n"}],"owner":{"account_id":7671769,"reputation":123,"user_id":5813771,"display_name":"Eduardo B."},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77373802,"answer_count":1,"score":1,"last_activity_date":1698407192,"creation_date":1698355973,"question_id":77370405,"body_markdown":"I have this association in my database\r\n\r\nUser(1) &lt;-----------&gt; Project(n)\r\n\r\nI&#39;m trying to fetch the data into a single object\r\n\r\n```\r\ndsl.select()\r\n    .from(PROJECT.join(USERS)\r\n    .on(USERS.ID.eq(PROJECT.ID_USERS))).where(PROJECT.ID.eq(id))\r\n    .fetchOneInto(ProjectEntity.class)\r\n```\r\n\r\nThis is the User\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class UserEntity {\r\n    \r\n    private int id;\r\n    private String username;\r\n    private String password;\r\n    private String email;\r\n    //private List&lt;ProjectEntity&gt; projects;   \r\n\r\n}\r\n```\r\n\r\nThis is my ProjectEntity:\r\n\r\n```\r\n@Getter\r\n@Setter\r\n@AllArgsConstructor\r\n@NoArgsConstructor\r\npublic class ProjectEntity {\r\n    \r\n    private Integer id;\r\n    private String name;\r\n    private String description;\r\n    private String location;\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\r\n    private LocalDateTime creationDate;\r\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\r\n    private LocalDateTime lastModifiedDate;\r\n    private Integer idUsers;\r\n    \r\n}\r\n```\r\n\r\nWhen I try to retrieve the object, the error below occurs:\r\n\r\n&gt; org.jooq.exception.DataTypeException: No Converter found for types\r\n&gt; java.lang.Integer and  com.xmobots.domain.entities.UserEntity\r\n\r\nWhy does this happen and how can I fix it?\r\n\r\n","title":"Fetch an object that has a object inside using JOOQ","body":"<p>I have this association in my database</p>\n<p>User(1) &lt;-----------&gt; Project(n)</p>\n<p>I'm trying to fetch the data into a single object</p>\n<pre><code>dsl.select()\n    .from(PROJECT.join(USERS)\n    .on(USERS.ID.eq(PROJECT.ID_USERS))).where(PROJECT.ID.eq(id))\n    .fetchOneInto(ProjectEntity.class)\n</code></pre>\n<p>This is the User</p>\n<pre><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class UserEntity {\n    \n    private int id;\n    private String username;\n    private String password;\n    private String email;\n    //private List&lt;ProjectEntity&gt; projects;   \n\n}\n</code></pre>\n<p>This is my ProjectEntity:</p>\n<pre><code>@Getter\n@Setter\n@AllArgsConstructor\n@NoArgsConstructor\npublic class ProjectEntity {\n    \n    private Integer id;\n    private String name;\n    private String description;\n    private String location;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\n    private LocalDateTime creationDate;\n    @JsonFormat(shape = JsonFormat.Shape.STRING, pattern = &quot;dd-MM-yyyy hh:mm:ss&quot;)\n    private LocalDateTime lastModifiedDate;\n    private Integer idUsers;\n    \n}\n</code></pre>\n<p>When I try to retrieve the object, the error below occurs:</p>\n<blockquote>\n<p>org.jooq.exception.DataTypeException: No Converter found for types\njava.lang.Integer and  com.xmobots.domain.entities.UserEntity</p>\n</blockquote>\n<p>Why does this happen and how can I fix it?</p>\n"},{"tags":["java","duration","java-time","iso8601","period"],"comments":[{"owner":{"account_id":45934,"reputation":203649,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":10,"creation_date":1530689134,"post_id":51168022,"comment_id":89319042,"body_markdown":"This is the standard [ISO-8601](https://en.wikipedia.org/wiki/ISO_8601) notation for durations / periods.","body":"This is the standard <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO-8601</a> notation for durations / periods."}],"answers":[{"tags":[],"owner":{"account_id":210082,"reputation":19409,"user_id":461499,"accept_rate":73,"display_name":"Rob Audenaerde"},"down_vote_count":0,"up_vote_count":140,"is_accepted":true,"score":140,"last_activity_date":1698407034,"creation_date":1530689241,"answer_id":51168078,"question_id":51168022,"body_markdown":"As can be found on the page Jesper linked to ([ISO-8601 - Data elements and interchange formats – Information interchange – Representation of dates and times][1])\r\n\r\n``` lang-plaintext\r\nP is the duration designator (for period) placed at the start of the duration representation.\r\nY is the year designator that follows the value for the number of years.\r\nM is the month designator that follows the value for the number of months.\r\nW is the week designator that follows the value for the number of weeks.\r\nD is the day designator that follows the value for the number of days.\r\nT is the time designator that precedes the time components of the representation.\r\n```\r\n\r\nSo `P` means &#39;Period&#39; and because there are no date-components it only has a &#39;Time&#39;.\r\n\r\nYou could interpret this as &#39;Period of Time&#39;\r\n\r\nThe &#39;why&#39; this was chosen, you have to ask the ISO members that wrote the standard, but my guess is that it is easier to parse. (short and unambigious)\r\n\r\nThe details for the time component are:\r\n\r\n``` lang-plaintext\r\nH is the hour designator that follows the value for the number of hours.\r\nM is the minute designator that follows the value for the number of minutes.\r\nS is the second designator that follows the value for the number of seconds. \r\n```\r\n\r\nThe value of `PT20S` then parses to:\r\n* Period\r\n* Time\r\n* 20 \r\n* Seconds\r\n\r\nSo, a duration of 20 seconds.\r\n\r\nMore examples can be found in the javadoc: https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-\r\n\r\n  [1]: https://en.wikipedia.org/wiki/ISO_8601\r\n","title":"What does &#39;PT&#39; prefix stand for in Duration?","body":"<p>As can be found on the page Jesper linked to (<a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"noreferrer\">ISO-8601 - Data elements and interchange formats – Information interchange – Representation of dates and times</a>)</p>\n<pre class=\"lang-plaintext prettyprint-override\"><code>P is the duration designator (for period) placed at the start of the duration representation.\nY is the year designator that follows the value for the number of years.\nM is the month designator that follows the value for the number of months.\nW is the week designator that follows the value for the number of weeks.\nD is the day designator that follows the value for the number of days.\nT is the time designator that precedes the time components of the representation.\n</code></pre>\n<p>So <code>P</code> means 'Period' and because there are no date-components it only has a 'Time'.</p>\n<p>You could interpret this as 'Period of Time'</p>\n<p>The 'why' this was chosen, you have to ask the ISO members that wrote the standard, but my guess is that it is easier to parse. (short and unambigious)</p>\n<p>The details for the time component are:</p>\n<pre class=\"lang-plaintext prettyprint-override\"><code>H is the hour designator that follows the value for the number of hours.\nM is the minute designator that follows the value for the number of minutes.\nS is the second designator that follows the value for the number of seconds. \n</code></pre>\n<p>The value of <code>PT20S</code> then parses to:</p>\n<ul>\n<li>Period</li>\n<li>Time</li>\n<li>20</li>\n<li>Seconds</li>\n</ul>\n<p>So, a duration of 20 seconds.</p>\n<p>More examples can be found in the javadoc: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-\" rel=\"noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html#parse-java.lang.CharSequence-</a></p>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1530701896,"creation_date":1530695622,"answer_id":51170014,"question_id":51168022,"body_markdown":"Java has taken a subset of the ISO 8601 standard format for a duration. So the “why” is why the standard was written the way it is, and it’s a guessing game. My go is:\r\n\r\n - `P` for period was chosen so that you can distinguish a duration from a date and/or time. Especially since a period may also be written in the same format as a local date-time, for example `P0003-06-04T12:30:05` for 3 years 6 months 4 days 12 hours 30 minutes 5 seconds, the `P` can be necessary to distinguish. The `P` also gives a little but quick and convenient bit of validation in case you happen to pass a completely different string in a place where a duration was expected. And yes, `PT10S` looks weird, but once you get accustomed to it, you recognize it immediately as a duration, which can be practical.\r\n - `T` for time between the date part and the time part was chosen for two reasons:\r\n    - For consistency with date-time strings that have `T` in the same place, for example `2018-07-04T15:00` for July 4, 2018 at 15:00 hours.\r\n    - To disambiguate the otherwise ambiguous `M` for either months or minutes: `P3M` unambiguously means 3 months while `PT3M` means 3 minutes.","title":"What does &#39;PT&#39; prefix stand for in Duration?","body":"<p>Java has taken a subset of the ISO 8601 standard format for a duration. So the “why” is why the standard was written the way it is, and it’s a guessing game. My go is:</p>\n\n<ul>\n<li><code>P</code> for period was chosen so that you can distinguish a duration from a date and/or time. Especially since a period may also be written in the same format as a local date-time, for example <code>P0003-06-04T12:30:05</code> for 3 years 6 months 4 days 12 hours 30 minutes 5 seconds, the <code>P</code> can be necessary to distinguish. The <code>P</code> also gives a little but quick and convenient bit of validation in case you happen to pass a completely different string in a place where a duration was expected. And yes, <code>PT10S</code> looks weird, but once you get accustomed to it, you recognize it immediately as a duration, which can be practical.</li>\n<li><code>T</code> for time between the date part and the time part was chosen for two reasons:\n\n<ul>\n<li>For consistency with date-time strings that have <code>T</code> in the same place, for example <code>2018-07-04T15:00</code> for July 4, 2018 at 15:00 hours.</li>\n<li>To disambiguate the otherwise ambiguous <code>M</code> for either months or minutes: <code>P3M</code> unambiguously means 3 months while <code>PT3M</code> means 3 minutes.</li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8587609,"reputation":1094,"user_id":6433161,"display_name":"Sandeep Jain"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1650529700,"creation_date":1596703115,"answer_id":63279843,"question_id":51168022,"body_markdown":"Actually if go on Duration API developed in Java since 1.8, they have gone with standard ISO 8601:\r\n    \r\n    with java doc as below  :\r\n    \r\n    /**\r\n     * Applies an ISO 8601 Duration to a {@link ZonedDateTime}.\r\n     *\r\n     * &lt;p&gt;Since the JDK defined different types for the different parts of a Duration\r\n     * specification, this utility method is needed when a full Duration is to be applied to a\r\n     * {@link ZonedDateTime}. See {@link Period} and {@link Duration}.\r\n     *\r\n     * &lt;p&gt;All date-based parts of a Duration specification (Year, Month, Day or Week) are parsed\r\n     * using {@link Period#parse(CharSequence)} and added to the time. The remaining parts (Hour,\r\n     * Minute, Second) are parsed using {@link Duration#parse(CharSequence)} and added to the time.\r\n     *\r\n     * @param time   A zoned date time to apply the offset to\r\n     * @param offset The offset in ISO 8601 Duration format\r\n     * @return A zoned date time with the offset applied\r\n     */\r\n    public static ZonedDateTime addOffset(ZonedDateTime time, String offset) { }\r\n    \r\n    Obtains a Duration from a text string of pattern: PnDTnHnMn.nS, where\r\n    nD = number of days,\r\n    nH = number of hours,\r\n    nM = number of minutes,\r\n    n.nS = number of seconds, the decimal point may be either a dot or a comma.\r\n    T = must be used before the part consisting of nH, nM, n.nS\r\n    \r\n    \r\n    Example of implementation with java as \r\n    \r\n    import java.time.Duration;\r\n    \r\n    public class ParseExample {\r\n    \r\n        public static void main(String... args) {\r\n            parse(&quot;PT20S&quot;);//T must be at the beginning to time part\r\n            parse(&quot;P2D&quot;);//2 day\r\n            parse(&quot;-P2D&quot;);//minus 2 days\r\n            parse(&quot;P-2DT-20S&quot;);//S for seconds\r\n            parse(&quot;PT20H&quot;);//H for hours\r\n            parse(&quot;PT220H&quot;);\r\n            parse(&quot;PT20M&quot;);//M for minutes\r\n            parse(&quot;PT20.3S&quot;);//second can be in fraction like 20.3\r\n            parse(&quot;P4DT12H20M20.3S&quot;);\r\n            parse(&quot;P-4DT-12H-20M-20.3S&quot;);\r\n            parse(&quot;-P4DT12H20M20.3S&quot;);\r\n        }\r\n    \r\n        private static void parse(String pattern) {\r\n            Duration d = Duration.parse(pattern);\r\n            System.out.println(&quot;Pattern: %s =&gt; %s%n&quot;, pattern, d);\r\n        }\r\n    }","title":"What does &#39;PT&#39; prefix stand for in Duration?","body":"<p>Actually if go on Duration API developed in Java since 1.8, they have gone with standard ISO 8601:</p>\n<pre><code>with java doc as below  :\n\n/**\n * Applies an ISO 8601 Duration to a {@link ZonedDateTime}.\n *\n * &lt;p&gt;Since the JDK defined different types for the different parts of a Duration\n * specification, this utility method is needed when a full Duration is to be applied to a\n * {@link ZonedDateTime}. See {@link Period} and {@link Duration}.\n *\n * &lt;p&gt;All date-based parts of a Duration specification (Year, Month, Day or Week) are parsed\n * using {@link Period#parse(CharSequence)} and added to the time. The remaining parts (Hour,\n * Minute, Second) are parsed using {@link Duration#parse(CharSequence)} and added to the time.\n *\n * @param time   A zoned date time to apply the offset to\n * @param offset The offset in ISO 8601 Duration format\n * @return A zoned date time with the offset applied\n */\npublic static ZonedDateTime addOffset(ZonedDateTime time, String offset) { }\n\nObtains a Duration from a text string of pattern: PnDTnHnMn.nS, where\nnD = number of days,\nnH = number of hours,\nnM = number of minutes,\nn.nS = number of seconds, the decimal point may be either a dot or a comma.\nT = must be used before the part consisting of nH, nM, n.nS\n\n\nExample of implementation with java as \n\nimport java.time.Duration;\n\npublic class ParseExample {\n\n    public static void main(String... args) {\n        parse(&quot;PT20S&quot;);//T must be at the beginning to time part\n        parse(&quot;P2D&quot;);//2 day\n        parse(&quot;-P2D&quot;);//minus 2 days\n        parse(&quot;P-2DT-20S&quot;);//S for seconds\n        parse(&quot;PT20H&quot;);//H for hours\n        parse(&quot;PT220H&quot;);\n        parse(&quot;PT20M&quot;);//M for minutes\n        parse(&quot;PT20.3S&quot;);//second can be in fraction like 20.3\n        parse(&quot;P4DT12H20M20.3S&quot;);\n        parse(&quot;P-4DT-12H-20M-20.3S&quot;);\n        parse(&quot;-P4DT12H20M20.3S&quot;);\n    }\n\n    private static void parse(String pattern) {\n        Duration d = Duration.parse(pattern);\n        System.out.println(&quot;Pattern: %s =&gt; %s%n&quot;, pattern, d);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":138148,"reputation":5659,"user_id":342882,"accept_rate":34,"display_name":"Daniil Iaitskov"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103620,"favorite_count":0,"down_vote_count":1,"up_vote_count":105,"accepted_answer_id":51168078,"answer_count":3,"score":104,"last_activity_date":1698407034,"creation_date":1530689038,"question_id":51168022,"body_markdown":"I am trying to use the `Duration` class instead of `long`. \r\nIt has superior literal syntax. I like its flexibility, though it looks weird.\r\n\r\n&quot;PT10S&quot; means 10 seconds, what is the problem to accept &quot;10 seconds&quot;?!\r\nOkay never mind.\r\n\r\nI am just curious why PT prefix has been chosen (not &quot;DU&quot; e.g.) and why any prefix is better here rather than nothing?\r\n ","title":"What does &#39;PT&#39; prefix stand for in Duration?","body":"<p>I am trying to use the <code>Duration</code> class instead of <code>long</code>. \nIt has superior literal syntax. I like its flexibility, though it looks weird.</p>\n\n<p>\"PT10S\" means 10 seconds, what is the problem to accept \"10 seconds\"?!\nOkay never mind.</p>\n\n<p>I am just curious why PT prefix has been chosen (not \"DU\" e.g.) and why any prefix is better here rather than nothing?</p>\n"},{"tags":["java","maven","selenium-webdriver","junit5"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":0,"creation_date":1698251361,"post_id":77360003,"comment_id":136382458,"body_markdown":"You probably can&#39;t control two tabs at the same time. (though you could try by getting the sessionID from the first launch, and using that with the second driver...it&#39;s a little hacky but it might work?)  You can, however, use 2 drivers each controlling a driver/browser pair in a separate thread.  (You wouldn&#39;t use a singleton in either case...)","body":"You probably can&#39;t control two tabs at the same time. (though you could try by getting the sessionID from the first launch, and using that with the second driver...it&#39;s a little hacky but it might work?)  You can, however, use 2 drivers each controlling a driver/browser pair in a separate thread.  (You wouldn&#39;t use a singleton in either case...)"}],"owner":{"account_id":27523642,"reputation":27,"user_id":21003348,"display_name":"Serhii"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698406886,"creation_date":1698241079,"question_id":77360003,"body_markdown":"I have parameterized test methods that I want to run in parallel. But when I execute my test class - I see that two browser tabs are opened but only one of them is used by tests to interact with page elements. And because of that all tests failed.\r\n\r\nI think that the possible reason for this problem is that for some reason a new instance of Webdriver is not created for each execution of the test method.\r\nHow I can fix this problem?\r\n\r\nHere is my code:\r\n\r\n**DriverSingleton:**\r\n\r\n    public class DriverSingleton {\r\n    \r\n        private static WebDriver driver;\r\n    \r\n        private DriverSingleton() {}\r\n    \r\n        public static WebDriver getDriver() {\r\n            if (null == driver) {\r\n                switch (System.getProperty(&quot;browser&quot;)) {\r\n                    case &quot;firefox&quot;: {\r\n                        WebDriverManager.firefoxdriver().setup();\r\n                        driver = new FirefoxDriver();\r\n                        break;\r\n                    }\r\n                    case &quot;edge&quot;: {\r\n                        WebDriverManager.edgedriver().setup();\r\n                        driver = new EdgeDriver();\r\n                        break;\r\n                    }\r\n                    default: {\r\n                        WebDriverManager.chromedriver().setup();\r\n                        ChromeOptions options = new ChromeOptions();\r\n                        options.addArguments(&quot;--remote-allow-origins=*&quot;);\r\n                        options.addArguments(&quot;--headless&quot;);\r\n    \r\n                        driver = new ChromeDriver(options);\r\n                    }\r\n                }\r\n                driver.manage().window().maximize();\r\n            }\r\n            return driver;\r\n        }\r\n    \r\n        public static void closeDriver() {\r\n            if (driver != null) {\r\n                driver.quit();\r\n                driver = null;\r\n            }\r\n        }\r\n    }\r\n\r\nJunitConditions:\r\n\r\n    public class JunitConditions {\r\n    \r\n        protected WebDriver driver;\r\n        public static LoginAction loginAction;\r\n        public static SidebarAction sidebarAction;\r\n        public static FiltersAction filtersAction;\r\n        public static FiltersPage filtersPage;\r\n        public static LaunchesAction launchesAction;\r\n    \r\n        @BeforeEach\r\n        public void setUp() {\r\n    \r\n            System.out.println(&quot;Opening the browser&quot;);\r\n            driver = DriverSingleton.getDriver();\r\n    \r\n            System.setProperty(&quot;env&quot;, &quot;prod&quot;);\r\n    \r\n            loginAction = new LoginAction(driver);\r\n            sidebarAction = new SidebarAction(driver);\r\n            filtersAction = new FiltersAction(driver);\r\n            launchesAction = new LaunchesAction(driver);\r\n    \r\n            filtersPage = new FiltersPage(driver);\r\n        }\r\n    \r\n        @AfterEach\r\n        public void closeBrowser() {\r\n            System.out.println(&quot;Closing the browser&quot;);\r\n            DriverSingleton.closeDriver();\r\n    \r\n        }\r\n    }\r\n\r\nJunitTest:\r\n\r\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n    public class JunitTest extends JunitConditions {\r\n    \r\n        @Nested\r\n        @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n        class LaunchNameAndFailed {\r\n    \r\n            @ParameterizedTest\r\n            @Execution(SAME_THREAD)\r\n            @CsvSource({&quot;Demo, 1, 4&quot;, &quot;Demo, 6, 3&quot;, &quot;Demo, 8, 3&quot;, &quot;Demo, 9, 2&quot;})\r\n            @Description(&quot;Add filter: Launch name + Failed&quot;)\r\n            public void setLaunchNameAndFailed(String launchName, String filterInput, int launchesAmountOutput) throws InterruptedException {\r\n                loginAction.doLogin();\r\n                sidebarAction.openLaunchesPage();\r\n                filtersAction.activateFiltering();\r\n                filtersAction.addLaunchNameFilter(launchName);\r\n                filtersAction.addFilterFromDrpDwn(&quot;Failed&quot;, filterInput);\r\n                launchesAction.countLaunchesAmount(launchName, launchesAmountOutput);\r\n            }\r\n        }\r\n    \r\n        @Nested\r\n        @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n        class LaunchNameAndSkipped {\r\n    \r\n            @ParameterizedTest\r\n            @Execution(CONCURRENT)\r\n            @CsvSource({&quot;Demo, 0, 5&quot;, &quot;Demo, 1, 2&quot;, &quot;Demo, 2, 1&quot;, &quot;Demo, 3, 0&quot;})\r\n            @Description(&quot;Add Launch name + Skipped&quot;)\r\n            public void setLaunchNameAndSkipped(String launchName, String filterInput, int launchesAmountOutput) throws InterruptedException {\r\n                loginAction.doLogin();\r\n                sidebarAction.openLaunchesPage();\r\n                filtersAction.activateFiltering();\r\n                filtersAction.addLaunchNameFilter(launchName);\r\n                filtersAction.addFilterFromDrpDwn(&quot;Skipped&quot;, filterInput);\r\n                launchesAction.countLaunchesAmount(launchName, launchesAmountOutput);\r\n            }\r\n    \r\n        }\r\n    \r\n        @Nested\r\n        @TestInstance(TestInstance.Lifecycle.PER_CLASS)\r\n        class LaunchNameAndProductBug {\r\n    \r\n            @ParameterizedTest\r\n            @Execution(CONCURRENT)\r\n            @CsvSource({&quot;Demo, 0, 5&quot;, &quot;Demo, 1, 3&quot;, &quot;Demo, 4, 2&quot;, &quot;Demo, 5, 0&quot;})\r\n            @Description(&quot;Add Launch name + Product Bug&quot;)\r\n            public void setLaunchNameAndProductBug(String launchName, String filterInput, int launchesAmountOutput) throws InterruptedException {\r\n                loginAction.doLogin();\r\n                sidebarAction.openLaunchesPage();\r\n                filtersAction.activateFiltering();\r\n                filtersAction.addLaunchNameFilter(launchName);\r\n                filtersAction.addFilterFromDrpDwn(&quot;Product bug&quot;, filterInput);\r\n                launchesAction.countLaunchesAmount(launchName, launchesAmountOutput);\r\n            }\r\n        }\r\n    }","title":"Selenium executes parameterized tests in parallel in the same browser tab","body":"<p>I have parameterized test methods that I want to run in parallel. But when I execute my test class - I see that two browser tabs are opened but only one of them is used by tests to interact with page elements. And because of that all tests failed.</p>\n<p>I think that the possible reason for this problem is that for some reason a new instance of Webdriver is not created for each execution of the test method.\nHow I can fix this problem?</p>\n<p>Here is my code:</p>\n<p><strong>DriverSingleton:</strong></p>\n<pre><code>public class DriverSingleton {\n\n    private static WebDriver driver;\n\n    private DriverSingleton() {}\n\n    public static WebDriver getDriver() {\n        if (null == driver) {\n            switch (System.getProperty(&quot;browser&quot;)) {\n                case &quot;firefox&quot;: {\n                    WebDriverManager.firefoxdriver().setup();\n                    driver = new FirefoxDriver();\n                    break;\n                }\n                case &quot;edge&quot;: {\n                    WebDriverManager.edgedriver().setup();\n                    driver = new EdgeDriver();\n                    break;\n                }\n                default: {\n                    WebDriverManager.chromedriver().setup();\n                    ChromeOptions options = new ChromeOptions();\n                    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n                    options.addArguments(&quot;--headless&quot;);\n\n                    driver = new ChromeDriver(options);\n                }\n            }\n            driver.manage().window().maximize();\n        }\n        return driver;\n    }\n\n    public static void closeDriver() {\n        if (driver != null) {\n            driver.quit();\n            driver = null;\n        }\n    }\n}\n</code></pre>\n<p>JunitConditions:</p>\n<pre><code>public class JunitConditions {\n\n    protected WebDriver driver;\n    public static LoginAction loginAction;\n    public static SidebarAction sidebarAction;\n    public static FiltersAction filtersAction;\n    public static FiltersPage filtersPage;\n    public static LaunchesAction launchesAction;\n\n    @BeforeEach\n    public void setUp() {\n\n        System.out.println(&quot;Opening the browser&quot;);\n        driver = DriverSingleton.getDriver();\n\n        System.setProperty(&quot;env&quot;, &quot;prod&quot;);\n\n        loginAction = new LoginAction(driver);\n        sidebarAction = new SidebarAction(driver);\n        filtersAction = new FiltersAction(driver);\n        launchesAction = new LaunchesAction(driver);\n\n        filtersPage = new FiltersPage(driver);\n    }\n\n    @AfterEach\n    public void closeBrowser() {\n        System.out.println(&quot;Closing the browser&quot;);\n        DriverSingleton.closeDriver();\n\n    }\n}\n</code></pre>\n<p>JunitTest:</p>\n<pre><code>@TestInstance(TestInstance.Lifecycle.PER_CLASS)\npublic class JunitTest extends JunitConditions {\n\n    @Nested\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\n    class LaunchNameAndFailed {\n\n        @ParameterizedTest\n        @Execution(SAME_THREAD)\n        @CsvSource({&quot;Demo, 1, 4&quot;, &quot;Demo, 6, 3&quot;, &quot;Demo, 8, 3&quot;, &quot;Demo, 9, 2&quot;})\n        @Description(&quot;Add filter: Launch name + Failed&quot;)\n        public void setLaunchNameAndFailed(String launchName, String filterInput, int launchesAmountOutput) throws InterruptedException {\n            loginAction.doLogin();\n            sidebarAction.openLaunchesPage();\n            filtersAction.activateFiltering();\n            filtersAction.addLaunchNameFilter(launchName);\n            filtersAction.addFilterFromDrpDwn(&quot;Failed&quot;, filterInput);\n            launchesAction.countLaunchesAmount(launchName, launchesAmountOutput);\n        }\n    }\n\n    @Nested\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\n    class LaunchNameAndSkipped {\n\n        @ParameterizedTest\n        @Execution(CONCURRENT)\n        @CsvSource({&quot;Demo, 0, 5&quot;, &quot;Demo, 1, 2&quot;, &quot;Demo, 2, 1&quot;, &quot;Demo, 3, 0&quot;})\n        @Description(&quot;Add Launch name + Skipped&quot;)\n        public void setLaunchNameAndSkipped(String launchName, String filterInput, int launchesAmountOutput) throws InterruptedException {\n            loginAction.doLogin();\n            sidebarAction.openLaunchesPage();\n            filtersAction.activateFiltering();\n            filtersAction.addLaunchNameFilter(launchName);\n            filtersAction.addFilterFromDrpDwn(&quot;Skipped&quot;, filterInput);\n            launchesAction.countLaunchesAmount(launchName, launchesAmountOutput);\n        }\n\n    }\n\n    @Nested\n    @TestInstance(TestInstance.Lifecycle.PER_CLASS)\n    class LaunchNameAndProductBug {\n\n        @ParameterizedTest\n        @Execution(CONCURRENT)\n        @CsvSource({&quot;Demo, 0, 5&quot;, &quot;Demo, 1, 3&quot;, &quot;Demo, 4, 2&quot;, &quot;Demo, 5, 0&quot;})\n        @Description(&quot;Add Launch name + Product Bug&quot;)\n        public void setLaunchNameAndProductBug(String launchName, String filterInput, int launchesAmountOutput) throws InterruptedException {\n            loginAction.doLogin();\n            sidebarAction.openLaunchesPage();\n            filtersAction.activateFiltering();\n            filtersAction.addLaunchNameFilter(launchName);\n            filtersAction.addFilterFromDrpDwn(&quot;Product bug&quot;, filterInput);\n            launchesAction.countLaunchesAmount(launchName, launchesAmountOutput);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","okhttp"],"answers":[{"tags":[],"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698406863,"creation_date":1698406863,"answer_id":77373875,"question_id":77373080,"body_markdown":"Enqueued calls execute on a different thread from the enqueuer.\r\n\r\nSome options:\r\n\r\n * User Request.Builder.tag to supply MDC stuff when you create the request \r\n * Build your own Call.Factory implementation that decorates OkHttpClient and captures MDC info in newCall().","title":"How to get MDC in a OkHttp request interceptor?","body":"<p>Enqueued calls execute on a different thread from the enqueuer.</p>\n<p>Some options:</p>\n<ul>\n<li>User Request.Builder.tag to supply MDC stuff when you create the request</li>\n<li>Build your own Call.Factory implementation that decorates OkHttpClient and captures MDC info in newCall().</li>\n</ul>\n"}],"owner":{"account_id":184504,"reputation":3675,"user_id":420593,"accept_rate":54,"display_name":"fluminis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698406863,"creation_date":1698399463,"question_id":77373080,"body_markdown":"In a spring-boot-3 application with okhttp3, I try to write an interceptor to add a correlation id header to all my requests but I am not able to acces the MDC context from my okhttp interceptor: it is always empty.\r\n\r\nHow can i correctly setup OkHttpClient and/or interceptor so that the MDC context is propagated to the interceptor? \r\n\r\nMy OkhttpClient is declared:\r\n\r\n    @Bean\r\n    public OkHttpClient okHttpClient() {\r\n        return new OkHttpClient.Builder()\r\n\t\t\t.addInterceptor(new LoggerInterceptor())\r\n\t\t\t.build();\r\n    }\r\n\r\nMy interceptor is declared:\r\n\r\n\t@Slf4j\r\n\tpublic class LoggerInterceptor implements Interceptor {\r\n\r\n\t\t@Override\r\n\t\tpublic Response intercept(Chain chain) throws IOException {\r\n\t\t\tlog.info(&quot;MDC {}&quot;, MDC.getCopyOfContextMap()); // &lt;==== KO MDC context is null\r\n\t\t\treturn chain.proceed(request);\r\n\t\t}\r\n\t}\r\n\t\r\nAnd my calls are done like that:\r\n\r\n\t@Async\r\n    public CompletableFuture&lt;Optional&lt;JsonNode&gt;&gt; getEvent(String eventId) {\r\n        log.info(&quot;MDC {}&quot;, MDC.getCopyOfContextMap()); // &lt;==== OK my MDC context is correct\r\n        Request request = new Request.Builder()\r\n                .url(rsvpServicesProperties.getResource() + &quot;/v2/events/&quot; + eventId)\r\n                .tag(MDC.getCopyOfContextMap())\r\n                .build();\r\n        \r\n\t\tCompletableFuture&lt;T&gt; futur = new CompletableFuture&lt;&gt;();\r\n\t\tokHttpClient.newCall(request).enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n                futur.completeExceptionally(new IOException(&quot;Error occurred while getting &quot; + request.url().url() + &quot;: &quot; + e.getMessage(), e));\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                try {\r\n                    if (response.isSuccessful()) {\r\n                        futur.complete(mapper.map(response.body().bytes()));\r\n                    }\r\n                    futur.complete(mapper.map(null));\r\n                } catch (Exception e) {\r\n                    throw new IOException(&quot;Exception occurred while mapping response of &quot; + request.url().url() + &quot;: &quot; + e.getMessage(), e);\r\n                }\r\n            }\r\n        });\r\n\t\treturn futur;\r\n    }\r\n","title":"How to get MDC in a OkHttp request interceptor?","body":"<p>In a spring-boot-3 application with okhttp3, I try to write an interceptor to add a correlation id header to all my requests but I am not able to acces the MDC context from my okhttp interceptor: it is always empty.</p>\n<p>How can i correctly setup OkHttpClient and/or interceptor so that the MDC context is propagated to the interceptor?</p>\n<p>My OkhttpClient is declared:</p>\n<pre><code>@Bean\npublic OkHttpClient okHttpClient() {\n    return new OkHttpClient.Builder()\n        .addInterceptor(new LoggerInterceptor())\n        .build();\n}\n</code></pre>\n<p>My interceptor is declared:</p>\n<pre><code>@Slf4j\npublic class LoggerInterceptor implements Interceptor {\n\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        log.info(&quot;MDC {}&quot;, MDC.getCopyOfContextMap()); // &lt;==== KO MDC context is null\n        return chain.proceed(request);\n    }\n}\n</code></pre>\n<p>And my calls are done like that:</p>\n<pre><code>@Async\npublic CompletableFuture&lt;Optional&lt;JsonNode&gt;&gt; getEvent(String eventId) {\n    log.info(&quot;MDC {}&quot;, MDC.getCopyOfContextMap()); // &lt;==== OK my MDC context is correct\n    Request request = new Request.Builder()\n            .url(rsvpServicesProperties.getResource() + &quot;/v2/events/&quot; + eventId)\n            .tag(MDC.getCopyOfContextMap())\n            .build();\n    \n    CompletableFuture&lt;T&gt; futur = new CompletableFuture&lt;&gt;();\n    okHttpClient.newCall(request).enqueue(new Callback() {\n        @Override\n        public void onFailure(Call call, IOException e) {\n            futur.completeExceptionally(new IOException(&quot;Error occurred while getting &quot; + request.url().url() + &quot;: &quot; + e.getMessage(), e));\n        }\n\n        @Override\n        public void onResponse(Call call, Response response) throws IOException {\n            try {\n                if (response.isSuccessful()) {\n                    futur.complete(mapper.map(response.body().bytes()));\n                }\n                futur.complete(mapper.map(null));\n            } catch (Exception e) {\n                throw new IOException(&quot;Exception occurred while mapping response of &quot; + request.url().url() + &quot;: &quot; + e.getMessage(), e);\n            }\n        }\n    });\n    return futur;\n}\n</code></pre>\n"},{"tags":["java","sql","hibernate","spring-data-jpa","firebird"],"comments":[{"owner":{"account_id":213468,"reputation":103463,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1698306617,"post_id":77362822,"comment_id":136389224,"body_markdown":"The query in your screenshot is not the same as the native query you set for `findCPCsForCustomer`","body":"The query in your screenshot is not the same as the native query you set for <code>findCPCsForCustomer</code>"}],"answers":[{"tags":[],"owner":{"account_id":213468,"reputation":103463,"user_id":466862,"display_name":"Mark Rotteveel"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698306777,"creation_date":1698306386,"answer_id":77365053,"question_id":77362822,"body_markdown":"You should use a custom entity for this query, or only query that single CPC (whatever that is) and use `CPCEntity` or `List&lt;CPCEntity&gt;` as the return type. The problem is that you&#39;re creating a (normal) `CustomerEntity`, which means when you ask that entity for its `cpcEntityList`, it will query for and return **all** CPC entities associated with the customer, not just the one that you tried to query. That is why Hibernate executes that second and third query (your code probably queried both `xeroEntityList` **and** `cpcEntityList`).\r\n\r\nIn fact, for your first query, Hibernate ignored all the columns that did not map to the `CustomerEntity`: it only used the columns directly associated with `CustomerEntity`.","title":"Spring Data JPA query returns multiple CPCs instead of a single one","body":"<p>You should use a custom entity for this query, or only query that single CPC (whatever that is) and use <code>CPCEntity</code> or <code>List&lt;CPCEntity&gt;</code> as the return type. The problem is that you're creating a (normal) <code>CustomerEntity</code>, which means when you ask that entity for its <code>cpcEntityList</code>, it will query for and return <strong>all</strong> CPC entities associated with the customer, not just the one that you tried to query. That is why Hibernate executes that second and third query (your code probably queried both <code>xeroEntityList</code> <strong>and</strong> <code>cpcEntityList</code>).</p>\n<p>In fact, for your first query, Hibernate ignored all the columns that did not map to the <code>CustomerEntity</code>: it only used the columns directly associated with <code>CustomerEntity</code>.</p>\n"},{"tags":[],"owner":{"account_id":29328831,"reputation":131,"user_id":22470734,"display_name":"Sairam Nagaraj"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698396417,"creation_date":1698326870,"answer_id":77367419,"question_id":77362822,"body_markdown":"I agree with Mark Rotteveel on the above. \r\n\r\nExtending to his, \r\n\r\nI highly recommend to create a view on the database with the same query as above (without the where clause), a projection interface for the view and call it from Repository. \r\n\r\nBut if for some reason the implementation cannot be altered, you can use @EntityGraph\r\n\r\n - On the CustomerEntity class, implement the @NamedEntityGraph\r\n\r\n    ```java\r\n    @Entity\r\n    @NamedEntityGraph(name = &quot;graph.customer.cpc&quot;, attributeNodes = @NamedAttributeNode(&quot;cpcEntityList&quot;))\r\n    public class CustomerEntity{//Entity members}\r\n    ```\r\n\r\n - And on the repository, you can implement the below\r\n\r\n    ```java\r\n    @Query(value = &quot;SELECT k \\n&quot; +\r\n        &quot;FROM CustomerEntity k \\n&quot; +\r\n        &quot;JOIN k.cpcEntityList c \\n&quot; +\r\n        &quot;JOIN k.xeroEntityList m \\n&quot; +\r\n        &quot;WHERE (k.id = :customerId) and (m.id = c.xeroId) order by c.settlementDate desc limit 1&quot;,\r\n        nativeQuery = false)\r\n    @EntityGraph(value = &quot;graph.customer.cpc&quot;)\r\n    List&lt;CustomerEntity&gt; findCPCsForCustomer(@Param(&quot;customerId&quot;) int customerId);\r\n    ```\r\n\r\nKindly note, this will still execute two queries, you are simply limiting the response of CPCEntity and will have challenges when a similar behaviour is expected out of XeroEntity\r\n\r\nReferences:\r\n\r\n[\\[1\\]][1] --- Similar issue on stack overflow\r\n[\\[2\\]][2]\r\n\r\n\r\nI hope this helps\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/54521443/when-should-i-use-entitygraph-in-spring-data-jpa\r\n  [2]: https://stackoverflow.com/questions/65649418/hibernate-left-join-fetch-with-on-clause-or-alternative","title":"Spring Data JPA query returns multiple CPCs instead of a single one","body":"<p>I agree with Mark Rotteveel on the above.</p>\n<p>Extending to his,</p>\n<p>I highly recommend to create a view on the database with the same query as above (without the where clause), a projection interface for the view and call it from Repository.</p>\n<p>But if for some reason the implementation cannot be altered, you can use @EntityGraph</p>\n<ul>\n<li><p>On the CustomerEntity class, implement the @NamedEntityGraph</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@NamedEntityGraph(name = &quot;graph.customer.cpc&quot;, attributeNodes = @NamedAttributeNode(&quot;cpcEntityList&quot;))\npublic class CustomerEntity{//Entity members}\n</code></pre>\n</li>\n<li><p>And on the repository, you can implement the below</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value = &quot;SELECT k \\n&quot; +\n    &quot;FROM CustomerEntity k \\n&quot; +\n    &quot;JOIN k.cpcEntityList c \\n&quot; +\n    &quot;JOIN k.xeroEntityList m \\n&quot; +\n    &quot;WHERE (k.id = :customerId) and (m.id = c.xeroId) order by c.settlementDate desc limit 1&quot;,\n    nativeQuery = false)\n@EntityGraph(value = &quot;graph.customer.cpc&quot;)\nList&lt;CustomerEntity&gt; findCPCsForCustomer(@Param(&quot;customerId&quot;) int customerId);\n</code></pre>\n</li>\n</ul>\n<p>Kindly note, this will still execute two queries, you are simply limiting the response of CPCEntity and will have challenges when a similar behaviour is expected out of XeroEntity</p>\n<p>References:</p>\n<p><a href=\"https://stackoverflow.com/questions/54521443/when-should-i-use-entitygraph-in-spring-data-jpa\">[1]</a> --- Similar issue on stack overflow\n<a href=\"https://stackoverflow.com/questions/65649418/hibernate-left-join-fetch-with-on-clause-or-alternative\">[2]</a></p>\n<p>I hope this helps</p>\n"}],"owner":{"account_id":29754228,"reputation":3,"user_id":22803382,"display_name":"borowcze"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77365053,"answer_count":2,"score":0,"last_activity_date":1698406836,"creation_date":1698267193,"question_id":77362822,"body_markdown":"I&#39;m using Spring Data JPA and have defined a native SQL query that is intended to retrieve a single CPC record for a given customer (KLIENCI) based on certain criteria. However, the query is returning a list of CPC records instead of a single one, which is not the expected behavior.\r\n\r\nHere&#39;s the **SQL query** for reference:\r\n```java\r\n@Query(value = &quot;SELECT k.ID_KLIENT, k.NAZWA, k.EMAIL,  \\n&quot; +\r\n        &quot;\\tc.ID_CPC , c.DATA_ROZLICZENIA, c.ID_MASZYNA, \\n&quot; +\r\n        &quot;\\tm.ID_MASZYNA, m.MODEL, m.KOLOR  \\n&quot; +\r\n        &quot;FROM KLIENCI k \\n&quot; +\r\n        &quot;JOIN CPC c ON c.ID_KLIENT = k.ID_KLIENT \\n&quot; +\r\n        &quot;JOIN MASZYNY m ON m.ID_KLIENT  = k.ID_KLIENT AND m.ID_MASZYNA = c.ID_MASZYNA \\n&quot; +\r\n        &quot;WHERE c.DATA_ROZLICZENIA = (\\n&quot; +\r\n        &quot;\\tSELECT MAX (c2.DATA_ROZLICZENIA)\\n&quot; +\r\n        &quot;\\tFROM CPC c2 \\n&quot; +\r\n        &quot;\\tWHERE  c2.ID_KLIENT  = k.ID_KLIENT AND c2.ID_MASZYNA = c.ID_MASZYNA \\n&quot; +\r\n        &quot;) AND k.ID_KLIENT = :customerId&quot;,\r\n        nativeQuery = true)\r\nList&lt;CustomerEntity&gt; findCPCsForCustomer(@Param(&quot;customerId&quot;) int customerId);\r\n```\r\n\r\nThis is how [_results_](https://i.stack.imgur.com/FALt5.png) looks like in _DBeaver_:\r\n\r\n\r\nHowever, Spring creates 3 queries instead of one, and returns all CPC for the specified customer:\r\n```none\r\nHibernate: \r\n    SELECT\r\n        k.ID_KLIENT,\r\n        k.NAZWA,\r\n        k.EMAIL,\r\n        c.ID_CPC ,\r\n        c.DATA_ROZLICZENIA,\r\n        c.ID_MASZYNA,\r\n        m.ID_MASZYNA,\r\n        m.MODEL,\r\n        m.KOLOR   \r\n    FROM\r\n        KLIENCI k  \r\n    JOIN\r\n        CPC c \r\n            ON c.ID_KLIENT = k.ID_KLIENT  \r\n    JOIN\r\n        MASZYNY m \r\n            ON m.ID_KLIENT  = k.ID_KLIENT \r\n            AND m.ID_MASZYNA = c.ID_MASZYNA  \r\n    WHERE\r\n        c.DATA_ROZLICZENIA = (\r\n            SELECT\r\n                MAX (c2.DATA_ROZLICZENIA)  \r\n            FROM\r\n                CPC c2   \r\n            WHERE\r\n                c2.ID_KLIENT  = k.ID_KLIENT \r\n                AND c2.ID_MASZYNA = c.ID_MASZYNA  \r\n        ) \r\n        AND k.ID_KLIENT = ?\r\nHibernate: \r\n    select\r\n        x1_0.id_klient,\r\n        x1_0.id_maszyna,\r\n        x1_0.kolor,\r\n        x1_0.model \r\n    from\r\n        maszyny x1_0 \r\n    where\r\n        x1_0.id_klient=?\r\nHibernate: \r\n    select\r\n        c1_0.id_klient,\r\n        c1_0.id_cpc,\r\n        c1_0.data_rozliczenia,\r\n        c1_0.id_maszyna \r\n    from\r\n        cpc c1_0 \r\n    where\r\n        c1_0.id_klient=?\r\n```\r\n\r\n**Customer class**\r\n```java\r\npublic class CustomerEntity {\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_KLIENT&quot;)\r\n    private int id;\r\n\r\n    @Column(name = &quot;NAZWA&quot;)\r\n    private String name;\r\n    private String email;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;customerEntity&quot;, fetch = FetchType.LAZY)\r\n    private List&lt;XeroEntity&gt; xeroEntityList;\r\n\r\n    @JsonManagedReference\r\n    @OneToMany(mappedBy = &quot;customerEntity&quot;, fetch = FetchType.LAZY)\r\n    private List&lt;CPCEntity&gt; cpcEntityList;\r\n}\r\n```\r\n\r\n**Xero machine class**\r\n\r\n```java\r\npublic class XeroEntity {\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_MASZYNA&quot;)\r\n    private int id;\r\n\r\n    private String model;\r\n\r\n    @Column(name = &quot;KOLOR&quot;)\r\n    private String color;\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;ID_KLIENT&quot;)\r\n    private CustomerEntity customerEntity;\r\n}\r\n```\r\n\r\n\r\n**CPC class**\r\n\r\n```java\r\npublic class CPCEntity {\r\n\r\n    @Id\r\n    @Column(name = &quot;ID_CPC&quot;)\r\n    private int id;\r\n\r\n    @Column(name = &quot;ID_MASZYNA&quot;)\r\n    private int xeroId;\r\n    @Column(name = &quot;DATA_ROZLICZENIA&quot;)\r\n    private Date settlementDate;\r\n\r\n    @JsonBackReference\r\n    @ManyToOne(fetch = FetchType.LAZY)\r\n    @JoinColumn(name = &quot;ID_KLIENT&quot;)\r\n    private CustomerEntity customerEntity;\r\n\r\n}\r\n```\r\n\r\nAdditionally, I attempted to use JPQL to address the issue, but encountered the same problem.\r\n\r\nI&#39;ve confirmed that the database schema is correct, and the expected result is a single CPC record per machine for a specific customer. However, the query is returning multiple CPC records. I&#39;m not sure why this is happening, and I&#39;m looking for guidance on how to modify the query or the repository method to return a single CPC as intended.\r\n\r\n\r\n","title":"Spring Data JPA query returns multiple CPCs instead of a single one","body":"<p>I'm using Spring Data JPA and have defined a native SQL query that is intended to retrieve a single CPC record for a given customer (KLIENCI) based on certain criteria. However, the query is returning a list of CPC records instead of a single one, which is not the expected behavior.</p>\n<p>Here's the <strong>SQL query</strong> for reference:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(value = &quot;SELECT k.ID_KLIENT, k.NAZWA, k.EMAIL,  \\n&quot; +\n        &quot;\\tc.ID_CPC , c.DATA_ROZLICZENIA, c.ID_MASZYNA, \\n&quot; +\n        &quot;\\tm.ID_MASZYNA, m.MODEL, m.KOLOR  \\n&quot; +\n        &quot;FROM KLIENCI k \\n&quot; +\n        &quot;JOIN CPC c ON c.ID_KLIENT = k.ID_KLIENT \\n&quot; +\n        &quot;JOIN MASZYNY m ON m.ID_KLIENT  = k.ID_KLIENT AND m.ID_MASZYNA = c.ID_MASZYNA \\n&quot; +\n        &quot;WHERE c.DATA_ROZLICZENIA = (\\n&quot; +\n        &quot;\\tSELECT MAX (c2.DATA_ROZLICZENIA)\\n&quot; +\n        &quot;\\tFROM CPC c2 \\n&quot; +\n        &quot;\\tWHERE  c2.ID_KLIENT  = k.ID_KLIENT AND c2.ID_MASZYNA = c.ID_MASZYNA \\n&quot; +\n        &quot;) AND k.ID_KLIENT = :customerId&quot;,\n        nativeQuery = true)\nList&lt;CustomerEntity&gt; findCPCsForCustomer(@Param(&quot;customerId&quot;) int customerId);\n</code></pre>\n<p>This is how <a href=\"https://i.stack.imgur.com/FALt5.png\" rel=\"nofollow noreferrer\"><em>results</em></a> looks like in <em>DBeaver</em>:</p>\n<p>However, Spring creates 3 queries instead of one, and returns all CPC for the specified customer:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Hibernate: \n    SELECT\n        k.ID_KLIENT,\n        k.NAZWA,\n        k.EMAIL,\n        c.ID_CPC ,\n        c.DATA_ROZLICZENIA,\n        c.ID_MASZYNA,\n        m.ID_MASZYNA,\n        m.MODEL,\n        m.KOLOR   \n    FROM\n        KLIENCI k  \n    JOIN\n        CPC c \n            ON c.ID_KLIENT = k.ID_KLIENT  \n    JOIN\n        MASZYNY m \n            ON m.ID_KLIENT  = k.ID_KLIENT \n            AND m.ID_MASZYNA = c.ID_MASZYNA  \n    WHERE\n        c.DATA_ROZLICZENIA = (\n            SELECT\n                MAX (c2.DATA_ROZLICZENIA)  \n            FROM\n                CPC c2   \n            WHERE\n                c2.ID_KLIENT  = k.ID_KLIENT \n                AND c2.ID_MASZYNA = c.ID_MASZYNA  \n        ) \n        AND k.ID_KLIENT = ?\nHibernate: \n    select\n        x1_0.id_klient,\n        x1_0.id_maszyna,\n        x1_0.kolor,\n        x1_0.model \n    from\n        maszyny x1_0 \n    where\n        x1_0.id_klient=?\nHibernate: \n    select\n        c1_0.id_klient,\n        c1_0.id_cpc,\n        c1_0.data_rozliczenia,\n        c1_0.id_maszyna \n    from\n        cpc c1_0 \n    where\n        c1_0.id_klient=?\n</code></pre>\n<p><strong>Customer class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CustomerEntity {\n\n    @Id\n    @Column(name = &quot;ID_KLIENT&quot;)\n    private int id;\n\n    @Column(name = &quot;NAZWA&quot;)\n    private String name;\n    private String email;\n\n    @JsonManagedReference\n    @OneToMany(mappedBy = &quot;customerEntity&quot;, fetch = FetchType.LAZY)\n    private List&lt;XeroEntity&gt; xeroEntityList;\n\n    @JsonManagedReference\n    @OneToMany(mappedBy = &quot;customerEntity&quot;, fetch = FetchType.LAZY)\n    private List&lt;CPCEntity&gt; cpcEntityList;\n}\n</code></pre>\n<p><strong>Xero machine class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class XeroEntity {\n\n    @Id\n    @Column(name = &quot;ID_MASZYNA&quot;)\n    private int id;\n\n    private String model;\n\n    @Column(name = &quot;KOLOR&quot;)\n    private String color;\n\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;ID_KLIENT&quot;)\n    private CustomerEntity customerEntity;\n}\n</code></pre>\n<p><strong>CPC class</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CPCEntity {\n\n    @Id\n    @Column(name = &quot;ID_CPC&quot;)\n    private int id;\n\n    @Column(name = &quot;ID_MASZYNA&quot;)\n    private int xeroId;\n    @Column(name = &quot;DATA_ROZLICZENIA&quot;)\n    private Date settlementDate;\n\n    @JsonBackReference\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name = &quot;ID_KLIENT&quot;)\n    private CustomerEntity customerEntity;\n\n}\n</code></pre>\n<p>Additionally, I attempted to use JPQL to address the issue, but encountered the same problem.</p>\n<p>I've confirmed that the database schema is correct, and the expected result is a single CPC record per machine for a specific customer. However, the query is returning multiple CPC records. I'm not sure why this is happening, and I'm looking for guidance on how to modify the query or the repository method to return a single CPC as intended.</p>\n"},{"tags":["java","selenium","selenium-webdriver","cucumber-junit","cucumber-java"],"comments":[{"owner":{"account_id":2050353,"reputation":4625,"user_id":1829500,"accept_rate":57,"display_name":"Mrunal Gosar"},"score":0,"creation_date":1461313261,"post_id":36787461,"comment_id":61152169,"body_markdown":"you have not specified the glue code which is why probably it is not working. please specify the glue code and that should be it","body":"you have not specified the glue code which is why probably it is not working. please specify the glue code and that should be it"},{"owner":{"account_id":4230585,"reputation":633,"user_id":3462955,"accept_rate":36,"display_name":"tsr_qa"},"score":0,"creation_date":1461314222,"post_id":36787461,"comment_id":61152721,"body_markdown":"@MrunalGosar what i have to specify in glue code? is package name of step definition? or anything else?","body":"@MrunalGosar what i have to specify in glue code? is package name of step definition? or anything else?"}],"answers":[{"tags":[],"owner":{"account_id":2050353,"reputation":4625,"user_id":1829500,"accept_rate":57,"display_name":"Mrunal Gosar"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1461330532,"creation_date":1461320278,"answer_id":36791076,"question_id":36787461,"body_markdown":"Here&#39;s a sample cucumber Junit runner template:\r\n\r\n    @RunWith(Cucumber.class)\r\n    @CucumberOptions(features = { &quot;classpath:features/*.feature&quot; }, glue = &quot;packagename(s) or class name(s) containing the step definitions&quot;, plugin = {\r\n    \t\t&quot;pretty:target/prettyReport.txt&quot;, &quot;html:target/cucumber&quot;, &quot;json:target/cucumber.json&quot;, &quot;rerun:target/rerun.txt&quot;,\r\n    \t\t&quot;junit:target/junit-report.xml&quot;, &quot;testng:target/testng-output.xml&quot; }, monochrome = true, tags = {&quot;~@Ignore&quot;})\r\n    public class FeatureRunnerTest {\r\n    \r\n    }\r\nHope this helps!! &lt;br&gt;\r\nEDIT: &quot;~&quot; symbol..is used for negation..that is run all the features except one&#39;s marked with Ignore tag..On the other hand u can specify list of tags in the tags attribute comma seperated to run only those tests","title":"How to run multiple tags from testrunner class file in cucumber framework using @tags?","body":"<p>Here's a sample cucumber Junit runner template:</p>\n\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(features = { \"classpath:features/*.feature\" }, glue = \"packagename(s) or class name(s) containing the step definitions\", plugin = {\n        \"pretty:target/prettyReport.txt\", \"html:target/cucumber\", \"json:target/cucumber.json\", \"rerun:target/rerun.txt\",\n        \"junit:target/junit-report.xml\", \"testng:target/testng-output.xml\" }, monochrome = true, tags = {\"~@Ignore\"})\npublic class FeatureRunnerTest {\n\n}\n</code></pre>\n\n<p>Hope this helps!! <br>\nEDIT: \"~\" symbol..is used for negation..that is run all the features except one's marked with Ignore tag..On the other hand u can specify list of tags in the tags attribute comma seperated to run only those tests</p>\n"},{"tags":[],"owner":{"account_id":2691165,"reputation":23,"user_id":2324496,"display_name":"Muhammad Atif Niaz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1610376980,"creation_date":1610376980,"answer_id":65669180,"question_id":36787461,"body_markdown":"See the below implemtation of multi tag form cucumber rummer:\r\n   \r\n\r\n&gt; @CucumberOptions(\r\n&gt;     \t\tfeatures = &quot;src/test/java/features&quot;,\r\n&gt;     \t\tglue=&quot;stepDefinations&quot;,\r\n&gt;     \t\ttags = &quot;@Test_Working_Calendar,@Test_email_tempalte&quot;,\r\n&gt;     \t\tplugin = {&quot;pretty&quot;,&quot;html:target/cucumber&quot;\r\n&gt;     \t\t\t\t,&quot;json:target/cucumber.json&quot;\r\n&gt;     \t\t\t\t,&quot;junit:target/cukes.xml&quot;\r\n&gt;     \t\t\t\t,&quot;com.cucumber.listener.ExtentCucumberFormatter:target/cucumber-reports/report.html&quot;})","title":"How to run multiple tags from testrunner class file in cucumber framework using @tags?","body":"<p>See the below implemtation of multi tag form cucumber rummer:</p>\n<blockquote>\n<p>@CucumberOptions(\nfeatures = &quot;src/test/java/features&quot;,\nglue=&quot;stepDefinations&quot;,\ntags = &quot;@Test_Working_Calendar,@Test_email_tempalte&quot;,\nplugin = {&quot;pretty&quot;,&quot;html:target/cucumber&quot;\n,&quot;json:target/cucumber.json&quot;\n,&quot;junit:target/cukes.xml&quot;\n,&quot;com.cucumber.listener.ExtentCucumberFormatter:target/cucumber-reports/report.html&quot;})</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":21189368,"reputation":61,"user_id":15582117,"display_name":"Rajesh Saini"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1617878946,"creation_date":1617878946,"answer_id":67002431,"question_id":36787461,"body_markdown":"For multiple tags Cucumber uses logical AND and logical OR.\r\nFor example, the below works fine for me.\r\n```\r\n@RunWith(Cucumber.class)\r\n@CucumberOptions(plugin = {&quot;pretty&quot;, &quot;html:target/cucumber-report.html&quot;},\r\n\t\tfeatures= &quot;Features&quot;,\r\n\t\tglue= {&quot;com.cucumber.stepdefinition&quot;},\r\n\t\ttags= &quot;@RegressionTest or @SmokeTest&quot;\r\n\t\t)\r\npublic class TestRunner {\r\n}\r\n\r\n```","title":"How to run multiple tags from testrunner class file in cucumber framework using @tags?","body":"<p>For multiple tags Cucumber uses logical AND and logical OR.\nFor example, the below works fine for me.</p>\n<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions(plugin = {&quot;pretty&quot;, &quot;html:target/cucumber-report.html&quot;},\n        features= &quot;Features&quot;,\n        glue= {&quot;com.cucumber.stepdefinition&quot;},\n        tags= &quot;@RegressionTest or @SmokeTest&quot;\n        )\npublic class TestRunner {\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22297967,"reputation":1,"user_id":16523695,"display_name":"Sushil Prabhu Prabhakaran"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1627253427,"creation_date":1627237318,"answer_id":68521407,"question_id":36787461,"body_markdown":"    @CucumberOptions(\r\n         /* tags = {&quot;@SmokeTest&quot;,&quot;@Register&quot;},*/\r\n         features = &quot;src/test/Features&quot;,\r\n         glue = &quot;&quot;,\r\n         plugin = { &quot;pretty&quot;,&quot;json:target/stepdefinition.json&quot;})\r\n\r\nI commented the tags line and the test cases ran in order for me. Try this and let me know.","title":"How to run multiple tags from testrunner class file in cucumber framework using @tags?","body":"<pre><code>@CucumberOptions(\n     /* tags = {&quot;@SmokeTest&quot;,&quot;@Register&quot;},*/\n     features = &quot;src/test/Features&quot;,\n     glue = &quot;&quot;,\n     plugin = { &quot;pretty&quot;,&quot;json:target/stepdefinition.json&quot;})\n</code></pre>\n<p>I commented the tags line and the test cases ran in order for me. Try this and let me know.</p>\n"},{"tags":[],"owner":{"account_id":25532955,"reputation":1,"user_id":19320613,"display_name":"Ahmet Parlak"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655162330,"creation_date":1654967661,"answer_id":72586390,"question_id":36787461,"body_markdown":"~~~\r\n@RunWith(Cucumber.class)\r\n\r\n@CucumberOptions(\r\n\r\n        features = &quot;src/test/resources/features&quot;,\r\n        glue = &quot;stepDefinitions&quot;,          \r\n        tags=&quot;@grup1 or @grup2&quot;,                                                             \r\n        dryRun = false\r\n)\r\n~~~\r\n","title":"How to run multiple tags from testrunner class file in cucumber framework using @tags?","body":"<pre><code>@RunWith(Cucumber.class)\n\n@CucumberOptions(\n\n        features = &quot;src/test/resources/features&quot;,\n        glue = &quot;stepDefinitions&quot;,          \n        tags=&quot;@grup1 or @grup2&quot;,                                                             \n        dryRun = false\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19059063,"reputation":17,"user_id":13915555,"display_name":"Bhupender singh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698406043,"creation_date":1698406043,"answer_id":77373788,"question_id":36787461,"body_markdown":"tags=&quot;test1 or @test2&quot; \r\nWorked for me.","title":"How to run multiple tags from testrunner class file in cucumber framework using @tags?","body":"<p>tags=&quot;test1 or @test2&quot;\nWorked for me.</p>\n"}],"owner":{"account_id":4230585,"reputation":633,"user_id":3462955,"accept_rate":36,"display_name":"tsr_qa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48283,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":36791076,"answer_count":6,"score":0,"last_activity_date":1698406043,"creation_date":1461309656,"question_id":36787461,"body_markdown":"    @RunWith(Cucumber.class)\r\n    @CucumberOptions( plugin = {&quot;pretty&quot;,&quot;html:target/html/automation&quot;},\r\n    \t\t\t\tfeatures = {&quot;resource/***.feature&quot;},\r\n    \t\t\t\tglue={},\r\n    \t\t\t\ttags={&quot;@login&quot;,&quot;@Products&quot;}\r\n    \t\t)\r\n\r\nThis is my feature files\r\n\r\n@login\r\n\r\nFeature: Login to Application\r\n\r\n  Scenario: this is verify the application is logged successfully\r\n    Given Navigate to Panasonic application\r\n    Then Verify the title of the application\r\n    Then Logout the application\r\n\r\n@Products\r\n\r\nFeature: Login to Application\r\n\r\nBackground: user should be navigate to home page of application\r\n    \r\nGiven User login to home page with valid credentials\r\n    \r\nWhen click the catalog link on home page\r\n\r\nScenario : To verify whether able to create more than ten products in products page\r\n\r\nAnd check the sub menu of catalog is displaying in header\r\n    \r\nAnd check the My product catalog table","title":"How to run multiple tags from testrunner class file in cucumber framework using @tags?","body":"<pre><code>@RunWith(Cucumber.class)\n@CucumberOptions( plugin = {\"pretty\",\"html:target/html/automation\"},\n                features = {\"resource/***.feature\"},\n                glue={},\n                tags={\"@login\",\"@Products\"}\n        )\n</code></pre>\n\n<p>This is my feature files</p>\n\n<p>@login</p>\n\n<p>Feature: Login to Application</p>\n\n<p>Scenario: this is verify the application is logged successfully\n    Given Navigate to Panasonic application\n    Then Verify the title of the application\n    Then Logout the application</p>\n\n<p>@Products</p>\n\n<p>Feature: Login to Application</p>\n\n<p>Background: user should be navigate to home page of application</p>\n\n<p>Given User login to home page with valid credentials</p>\n\n<p>When click the catalog link on home page</p>\n\n<p>Scenario : To verify whether able to create more than ten products in products page</p>\n\n<p>And check the sub menu of catalog is displaying in header</p>\n\n<p>And check the My product catalog table</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1698403951,"post_id":77373193,"comment_id":136404212,"body_markdown":"Does this answer your question? [What is PECS (Producer Extends Consumer Super)?](https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2723397/what-is-pecs-producer-extends-consumer-super\">What is PECS (Producer Extends Consumer Super)?</a>"}],"answers":[{"tags":[],"owner":{"account_id":11872577,"reputation":321,"user_id":8688388,"display_name":"M. Pour"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698405881,"creation_date":1698405881,"answer_id":77373772,"question_id":77373193,"body_markdown":"This is why you are getting an *&quot;incompatible types&quot;* error: \r\n\r\nInside your method, when using the *compare* method of the *Comparator*, the compiler can’t be sure that the types of the items in the list and the comparator are compatible, because they could potentially be different subtypes of T. \r\n\r\n\r\n\r\nNow, as a solution, you can change your method signature to use a single type parameter for both the list and the comparator. Something like this:\r\n\r\n```\r\npublic static &lt;T&gt; List&lt;T&gt; customSorted(List&lt;T&gt; list, Comparator&lt;? super T&gt; comparator) {\r\n    List&lt;T&gt; sortedList = new ArrayList&lt;&gt;(list);\r\n    int n = sortedList.size();\r\n\r\n    for (int i = 0; i &lt; n - 1; i++) {\r\n        for (int j = 0; j &lt; n - i - 1; j++) {\r\n            T item1 = sortedList.get(j);\r\n            T item2 = sortedList.get(j + 1);\r\n\r\n            if (comparator.compare(item1, item2) &gt; 0) {\r\n                // Swap items if they are out of order\r\n                sortedList.set(j, item2);\r\n                sortedList.set(j + 1, item1);\r\n            }\r\n        }\r\n    }\r\n    return sortedList;\r\n}\r\n\r\n```\r\nWith that, the comparator can compare objects of type T or any supertype of T.\r\n\r\n\r\nOther issue you might want to know about: The comment in your *main* method indicates that you are trying to sort the list in ascending order, but you are actually sorting it in descending order due to the way the comparator is defined.\r\n\r\n\r\nGood Luck!\r\n\r\n\r\n","title":"Understanding Wildcards and Type Inference in Java Generics: Resolving &#39;Incompatible Types&#39; Error","body":"<p>This is why you are getting an <em>&quot;incompatible types&quot;</em> error:</p>\n<p>Inside your method, when using the <em>compare</em> method of the <em>Comparator</em>, the compiler can’t be sure that the types of the items in the list and the comparator are compatible, because they could potentially be different subtypes of T.</p>\n<p>Now, as a solution, you can change your method signature to use a single type parameter for both the list and the comparator. Something like this:</p>\n<pre><code>public static &lt;T&gt; List&lt;T&gt; customSorted(List&lt;T&gt; list, Comparator&lt;? super T&gt; comparator) {\n    List&lt;T&gt; sortedList = new ArrayList&lt;&gt;(list);\n    int n = sortedList.size();\n\n    for (int i = 0; i &lt; n - 1; i++) {\n        for (int j = 0; j &lt; n - i - 1; j++) {\n            T item1 = sortedList.get(j);\n            T item2 = sortedList.get(j + 1);\n\n            if (comparator.compare(item1, item2) &gt; 0) {\n                // Swap items if they are out of order\n                sortedList.set(j, item2);\n                sortedList.set(j + 1, item1);\n            }\n        }\n    }\n    return sortedList;\n}\n\n</code></pre>\n<p>With that, the comparator can compare objects of type T or any supertype of T.</p>\n<p>Other issue you might want to know about: The comment in your <em>main</em> method indicates that you are trying to sort the list in ascending order, but you are actually sorting it in descending order due to the way the comparator is defined.</p>\n<p>Good Luck!</p>\n"}],"owner":{"account_id":29757113,"reputation":11,"user_id":22805529,"display_name":"Mohan Bandlapalli"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698405881,"creation_date":1698400472,"question_id":77373193,"body_markdown":"Can someone explain the concept of using wildcards and type inference with generic types in Java, particularly in the context of the &quot;incompatible types&quot; error I&#39;m encountering when sorting data with a custom method?\r\n\r\n```\r\npublic class MyClass {\r\n\r\n    public static &lt;T&gt; List&lt;T&gt; customSorted(List&lt;? extends T&gt; list, Comparator&lt;? extends T&gt; comparator) {\r\n        List&lt;T&gt; sortedList = new ArrayList&lt;&gt;(list);\r\n        int n = sortedList.size();\r\n\r\n        for (int i = 0; i &lt; n - 1; i++) {\r\n            for (int j = 0; j &lt; n - i - 1; j++) {\r\n                T item1 = sortedList.get(j);\r\n                T item2 = sortedList.get(j + 1);\r\n\r\n                if (comparator.compare(item1, item2) &gt; 0) {\r\n                    // Swap items if they are out of order\r\n                    sortedList.set(j, item2);\r\n                    sortedList.set(j + 1, item1);\r\n                }\r\n            }\r\n        }\r\n        return sortedList;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n\r\n        List&lt;Integer&gt; numbers = List.of(10, 3, 7, 1, 8, 4, 5, 2, 9, 6);\r\n\r\n        Comparator&lt;Integer&gt; descendingOrder = (a, b) -&gt; (int) (a.doubleValue()-b.doubleValue());\r\n\r\n        List&lt;Integer&gt; sortedAscending = customSorted(numbers, descendingOrder);\r\n        System.out.println(&quot;Ascending Order: &quot; + sortedAscending);\r\n\r\n    }\r\n}\r\n\r\n```\r\nI am getting compile error in if condition as\r\n\r\nRequired type: capture of ? extends T    &amp;   Provided T\r\n\r\nIf it is expecting &quot;? extends T&quot; we can pass T itself or it&#39;s subtypes then why I am getting error even after passing T. \r\n","title":"Understanding Wildcards and Type Inference in Java Generics: Resolving &#39;Incompatible Types&#39; Error","body":"<p>Can someone explain the concept of using wildcards and type inference with generic types in Java, particularly in the context of the &quot;incompatible types&quot; error I'm encountering when sorting data with a custom method?</p>\n<pre><code>public class MyClass {\n\n    public static &lt;T&gt; List&lt;T&gt; customSorted(List&lt;? extends T&gt; list, Comparator&lt;? extends T&gt; comparator) {\n        List&lt;T&gt; sortedList = new ArrayList&lt;&gt;(list);\n        int n = sortedList.size();\n\n        for (int i = 0; i &lt; n - 1; i++) {\n            for (int j = 0; j &lt; n - i - 1; j++) {\n                T item1 = sortedList.get(j);\n                T item2 = sortedList.get(j + 1);\n\n                if (comparator.compare(item1, item2) &gt; 0) {\n                    // Swap items if they are out of order\n                    sortedList.set(j, item2);\n                    sortedList.set(j + 1, item1);\n                }\n            }\n        }\n        return sortedList;\n    }\n\n    public static void main(String[] args) {\n\n        List&lt;Integer&gt; numbers = List.of(10, 3, 7, 1, 8, 4, 5, 2, 9, 6);\n\n        Comparator&lt;Integer&gt; descendingOrder = (a, b) -&gt; (int) (a.doubleValue()-b.doubleValue());\n\n        List&lt;Integer&gt; sortedAscending = customSorted(numbers, descendingOrder);\n        System.out.println(&quot;Ascending Order: &quot; + sortedAscending);\n\n    }\n}\n\n</code></pre>\n<p>I am getting compile error in if condition as</p>\n<p>Required type: capture of ? extends T    &amp;   Provided T</p>\n<p>If it is expecting &quot;? extends T&quot; we can pass T itself or it's subtypes then why I am getting error even after passing T.</p>\n"},{"tags":["java","jpa"],"comments":[{"owner":{"account_id":217708,"reputation":23000,"user_id":473637,"accept_rate":88,"display_name":"Jeshurun"},"score":0,"creation_date":1338423499,"post_id":10825928,"comment_id":14093003,"body_markdown":"Are you sure you want to use like there and not =?","body":"Are you sure you want to use like there and not =?"},{"owner":{"account_id":35714,"reputation":10973,"user_id":101251,"accept_rate":59,"display_name":"kctang"},"score":0,"creation_date":1338423790,"post_id":10825928,"comment_id":14093044,"body_markdown":"Yes I am. It is somewhat strange, but the purpose is to provide &quot;simple search filter by partial value&quot; of the enum&#39;s string value (as stored in db). So if user type &quot;system&quot; it should return only enums that starts with &quot;system***&quot;.","body":"Yes I am. It is somewhat strange, but the purpose is to provide &quot;simple search filter by partial value&quot; of the enum&#39;s string value (as stored in db). So if user type &quot;system&quot; it should return only enums that starts with &quot;system***&quot;."},{"owner":{"account_id":217708,"reputation":23000,"user_id":473637,"accept_rate":88,"display_name":"Jeshurun"},"score":0,"creation_date":1338424569,"post_id":10825928,"comment_id":14093161,"body_markdown":"I&#39;ve updated my answer. I&#39;ve tested this and it does exactly what you want.","body":"I&#39;ve updated my answer. I&#39;ve tested this and it does exactly what you want."}],"answers":[{"tags":[],"owner":{"account_id":217708,"reputation":23000,"user_id":473637,"accept_rate":88,"display_name":"Jeshurun"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338424542,"creation_date":1338423433,"answer_id":10825960,"question_id":10825928,"body_markdown":"Absolutely. Just use `query.setString(&quot;param&quot;, &quot;BUSINESS_%&quot;);`. Note that using `setParameter()` instead of `setString()` throws a ClassCastException as Hibernate tries to cast it to an enum, however `setString()` does exactly what you want.","title":"Perform JPA query with LIKE operator on entity with enum (EnumType.STRING)","body":"<p>Absolutely. Just use <code>query.setString(\"param\", \"BUSINESS_%\");</code>. Note that using <code>setParameter()</code> instead of <code>setString()</code> throws a ClassCastException as Hibernate tries to cast it to an enum, however <code>setString()</code> does exactly what you want.</p>\n"},{"tags":[],"owner":{"account_id":166367,"reputation":667,"user_id":390436,"accept_rate":36,"display_name":"tibi"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1391338202,"creation_date":1391338202,"answer_id":21509659,"question_id":10825928,"body_markdown":"saidly there is a shortcut in the org.springframework.orm.hibernate3.HibernateTemplate:  \t\r\n\r\n\tprotected void applyNamedParameterToQuery(Query queryObject, String paramName, Object value)\r\n\t\t\tthrows HibernateException {\r\n\r\n\t\tif (value instanceof Collection) {\r\n\t\t\tqueryObject.setParameterList(paramName, (Collection) value);\r\n\t\t}\r\n\t\telse if (value instanceof Object[]) {\r\n\t\t\tqueryObject.setParameterList(paramName, (Object[]) value);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tqueryObject.setParameter(paramName, value);\r\n\t\t}\r\n\t}\r\n\r\nwould be greate if there is an extra else if (value instanceoff String)...","title":"Perform JPA query with LIKE operator on entity with enum (EnumType.STRING)","body":"<p>saidly there is a shortcut in the org.springframework.orm.hibernate3.HibernateTemplate:     </p>\n\n<pre><code>protected void applyNamedParameterToQuery(Query queryObject, String paramName, Object value)\n        throws HibernateException {\n\n    if (value instanceof Collection) {\n        queryObject.setParameterList(paramName, (Collection) value);\n    }\n    else if (value instanceof Object[]) {\n        queryObject.setParameterList(paramName, (Object[]) value);\n    }\n    else {\n        queryObject.setParameter(paramName, value);\n    }\n}\n</code></pre>\n\n<p>would be greate if there is an extra else if (value instanceoff String)...</p>\n"},{"tags":[],"owner":{"account_id":4690297,"reputation":3860,"user_id":3796586,"accept_rate":64,"display_name":"zbig"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1411029464,"creation_date":1411029464,"answer_id":25907912,"question_id":10825928,"body_markdown":"As a workaround you can build a query by concatenating pattern to the query.\r\n\r\n    em.createQuery(&quot;SELECT e FROM MyEntity e WHERE e.myEnum LIKE &#39;&quot; + pattern +&quot;&#39;&quot;)\r\n\r\nIt works with Hibernate as well as Eclipselink.\r\n\r\nHowever don&#39;t try this with `pattern` made from user input because constructing queries this way is vulnerable to sql injection attack. \r\n\r\n","title":"Perform JPA query with LIKE operator on entity with enum (EnumType.STRING)","body":"<p>As a workaround you can build a query by concatenating pattern to the query.</p>\n\n<pre><code>em.createQuery(\"SELECT e FROM MyEntity e WHERE e.myEnum LIKE '\" + pattern +\"'\")\n</code></pre>\n\n<p>It works with Hibernate as well as Eclipselink.</p>\n\n<p>However don't try this with <code>pattern</code> made from user input because constructing queries this way is vulnerable to sql injection attack. </p>\n"},{"tags":[],"owner":{"account_id":2642474,"reputation":192,"user_id":2285849,"display_name":"Michael"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1616328616,"creation_date":1616327962,"answer_id":66732019,"question_id":10825928,"body_markdown":"I ran into the same problem and I did the following:\r\n\r\n- define a second attribute mapping to the same db column\r\n- type of that attribute is String\r\n- it is neither updateable nor insertable\r\n- adapt the set methods of the enum attribute\r\n- make the String attribute a readonly property\r\n\r\n \r\n```\r\n    @Column(name = &quot;status&quot;)\r\n    @Enumerated(EnumType.STRING)\r\n    private StatusEnum status;\r\n\r\n    public void setStatus(StatusEnum status) {\r\n        this.status = status;\r\n        this.statusString = status.toString();\r\n    }\r\n    \r\n    @Column(name =&quot;status&quot;, updatable = false, insertable = false)\r\n    private String statusString;\r\n```\r\n\r\nNow you can make queries using &#39;like&#39; against the statusString:\r\n\r\n```\r\nTypedQuery&lt;MyEntity&gt; query = \r\n    em.createQuery(&quot;select e from MyEntity e where e.statusString like &#39;CLOSED%&#39;, MyEntity.class);\r\n```\r\n","title":"Perform JPA query with LIKE operator on entity with enum (EnumType.STRING)","body":"<p>I ran into the same problem and I did the following:</p>\n<ul>\n<li>define a second attribute mapping to the same db column</li>\n<li>type of that attribute is String</li>\n<li>it is neither updateable nor insertable</li>\n<li>adapt the set methods of the enum attribute</li>\n<li>make the String attribute a readonly property</li>\n</ul>\n<pre><code>    @Column(name = &quot;status&quot;)\n    @Enumerated(EnumType.STRING)\n    private StatusEnum status;\n\n    public void setStatus(StatusEnum status) {\n        this.status = status;\n        this.statusString = status.toString();\n    }\n    \n    @Column(name =&quot;status&quot;, updatable = false, insertable = false)\n    private String statusString;\n</code></pre>\n<p>Now you can make queries using 'like' against the statusString:</p>\n<pre><code>TypedQuery&lt;MyEntity&gt; query = \n    em.createQuery(&quot;select e from MyEntity e where e.statusString like 'CLOSED%', MyEntity.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14841767,"reputation":662,"user_id":10718292,"display_name":"Rogol"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698405852,"creation_date":1698405852,"answer_id":77373770,"question_id":10825928,"body_markdown":"None of the above answers worked for me, although I managed to find solution that worked for me and it&#39;s outrageously simple - you just cast your Enum to String:\r\n\r\n       @Query(&quot;SELECT a FROM MyEntity a WHERE CAST(a.myEnum AS string) LIKE %?1%&quot;)\r\n        List&lt;MyEntity&gt; findByParam(String param);\r\n\r\nwhere &quot;?1&quot; is the param","title":"Perform JPA query with LIKE operator on entity with enum (EnumType.STRING)","body":"<p>None of the above answers worked for me, although I managed to find solution that worked for me and it's outrageously simple - you just cast your Enum to String:</p>\n<pre><code>   @Query(&quot;SELECT a FROM MyEntity a WHERE CAST(a.myEnum AS string) LIKE %?1%&quot;)\n    List&lt;MyEntity&gt; findByParam(String param);\n</code></pre>\n<p>where &quot;?1&quot; is the param</p>\n"}],"owner":{"account_id":35714,"reputation":10973,"user_id":101251,"accept_rate":59,"display_name":"kctang"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8231,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":5,"score":3,"last_activity_date":1698405852,"creation_date":1338423112,"question_id":10825928,"body_markdown":"I am able to store, retrieve and query entities with enum types (using JPA/Hibernate). The enum fields are annotated with @Enumerated(EnumType.STRING).\r\n\r\nIs it possible to do things like `&quot;SELECT a FROM MyEntity a WHERE a.myEnum LIKE :param&quot;` ?\r\n\r\nThe idea is to have it match any entity where the enum value string (in DB) matches a pattern like &quot;SYSTEM_%&quot; or &quot;BUSINESS_%&quot;.\r\n\r\nThanks for helping out.\r\n\r\n--- Update:\r\n\r\nWhen I tried to query with this:\r\n\r\n    `@Query(&quot;SELECT e FROM MyEntity e WHERE e.myEnum LIKE :value&quot;)`\r\n\r\nUsing the values (to indicate match whatever...):\r\n\r\n`%%`\r\n\r\n I get this exception:\r\n\r\n  \r\n\r\n      Caused by: java.lang.IllegalArgumentException: Parameter value [%%] did not match expected type [mypackage.MyEntity$MyEnum]\r\n        \tat org.hibernate.ejb.AbstractQueryImpl.validateParameterBinding(AbstractQueryImpl.java:370)\r\n        \tat org.hibernate.ejb.AbstractQueryImpl.registerParameterBinding(AbstractQueryImpl.java:343)\r\n        \tat org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:374)\r\n        \tat org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:71)\r\n\r\n","title":"Perform JPA query with LIKE operator on entity with enum (EnumType.STRING)","body":"<p>I am able to store, retrieve and query entities with enum types (using JPA/Hibernate). The enum fields are annotated with @Enumerated(EnumType.STRING).</p>\n\n<p>Is it possible to do things like <code>\"SELECT a FROM MyEntity a WHERE a.myEnum LIKE :param\"</code> ?</p>\n\n<p>The idea is to have it match any entity where the enum value string (in DB) matches a pattern like \"SYSTEM_%\" or \"BUSINESS_%\".</p>\n\n<p>Thanks for helping out.</p>\n\n<p>--- Update:</p>\n\n<p>When I tried to query with this:</p>\n\n<pre><code>`@Query(\"SELECT e FROM MyEntity e WHERE e.myEnum LIKE :value\")`\n</code></pre>\n\n<p>Using the values (to indicate match whatever...):</p>\n\n<p><code>%%</code></p>\n\n<p>I get this exception:</p>\n\n<pre><code>  Caused by: java.lang.IllegalArgumentException: Parameter value [%%] did not match expected type [mypackage.MyEntity$MyEnum]\n        at org.hibernate.ejb.AbstractQueryImpl.validateParameterBinding(AbstractQueryImpl.java:370)\n        at org.hibernate.ejb.AbstractQueryImpl.registerParameterBinding(AbstractQueryImpl.java:343)\n        at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:374)\n        at org.hibernate.ejb.QueryImpl.setParameter(QueryImpl.java:71)\n</code></pre>\n"},{"tags":["java","datetime","java-8","timestamp","java-time"],"comments":[{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":16,"creation_date":1444524678,"post_id":22463062,"comment_id":53940607,"body_markdown":"FYI, most people most of the time would want a [`ZonedDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html) rather than a [`LocalDateTime`](http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html). The name is counter-intuitive; the `Local` means *any* locality in general rather than a specific time zone. As such, a `LocalDateTime` object is not tied to the time line. To have meaning, to get a specify moment on the time line, you must apply a time zone.","body":"FYI, most people most of the time would want a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"nofollow noreferrer\"><code>ZonedDateTime</code></a> rather than a <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\" rel=\"nofollow noreferrer\"><code>LocalDateTime</code></a>. The name is counter-intuitive; the <code>Local</code> means <i>any</i> locality in general rather than a specific time zone. As such, a <code>LocalDateTime</code> object is not tied to the time line. To have meaning, to get a specify moment on the time line, you must apply a time zone."},{"owner":{"account_id":49078,"reputation":44636,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":0,"creation_date":1560015628,"post_id":22463062,"comment_id":99604600,"body_markdown":"See my answer for an explanation of `LocalDateTime` vs. `ZonedDateTime` vs. `OffsetDateTime` vs. `Instant` vs. `LocalDate` vs. `LocalTime`, how to keep calm about why it&#39;s so complicated and how to do it right at the first shot.","body":"See my answer for an explanation of <code>LocalDateTime</code> vs. <code>ZonedDateTime</code> vs. <code>OffsetDateTime</code> vs. <code>Instant</code> vs. <code>LocalDate</code> vs. <code>LocalTime</code>, how to keep calm about why it&#39;s so complicated and how to do it right at the first shot."},{"owner":{"account_id":49078,"reputation":44636,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"score":6,"creation_date":1560141665,"post_id":22463062,"comment_id":99625821,"body_markdown":"If it wasn&#39;t impractically long, `LocalDateTime` would probably have been named `ZonelessOffsetlessDateTime`.","body":"If it wasn&#39;t impractically long, <code>LocalDateTime</code> would probably have been named <code>ZonelessOffsetlessDateTime</code>."}],"answers":[{"tags":[],"owner":{"account_id":1129042,"reputation":48134,"user_id":1115554,"accept_rate":100,"display_name":"micha"},"down_vote_count":1,"up_vote_count":741,"is_accepted":true,"score":740,"last_activity_date":1455206965,"creation_date":1395082802,"answer_id":22463063,"question_id":22463062,"body_markdown":"**Parsing date and time**\r\n\r\nTo create a `LocalDateTime` object from a string you can use the static [`LocalDateTime.parse()`][1] method. It takes a string and a [`DateTimeFormatter`][2] as parameter. The `DateTimeFormatter` is used to specify the date/time pattern.\r\n\r\n    String str = &quot;1986-04-08 12:30&quot;;\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);\r\n    LocalDateTime dateTime = LocalDateTime.parse(str, formatter);\r\n\r\n**Formatting date and time**\r\n\r\nTo create a formatted string out a `LocalDateTime` object you can use the `format()` method.\r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);\r\n    LocalDateTime dateTime = LocalDateTime.of(1986, Month.APRIL, 8, 12, 30);\r\n    String formattedDateTime = dateTime.format(formatter); // &quot;1986-04-08 12:30&quot;\r\n\r\nNote that there are some commonly used date/time formats predefined as constants in `DateTimeFormatter`. For example: Using `DateTimeFormatter.ISO_DATE_TIME` to format the `LocalDateTime` instance from above would result in the string `&quot;1986-04-08T12:30:00&quot;`.\r\n\r\nThe `parse()` and `format()` methods are available for all date/time related objects (e.g. `LocalDate` or `ZonedDateTime`)\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#parse-java.lang.CharSequence-\r\n  [2]:\r\nhttps://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p><strong>Parsing date and time</strong></p>\n\n<p>To create a <code>LocalDateTime</code> object from a string you can use the static <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html#parse-java.lang.CharSequence-\"><code>LocalDateTime.parse()</code></a> method. It takes a string and a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\"><code>DateTimeFormatter</code></a> as parameter. The <code>DateTimeFormatter</code> is used to specify the date/time pattern.</p>\n\n<pre><code>String str = \"1986-04-08 12:30\";\nDateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm\");\nLocalDateTime dateTime = LocalDateTime.parse(str, formatter);\n</code></pre>\n\n<p><strong>Formatting date and time</strong></p>\n\n<p>To create a formatted string out a <code>LocalDateTime</code> object you can use the <code>format()</code> method.</p>\n\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm\");\nLocalDateTime dateTime = LocalDateTime.of(1986, Month.APRIL, 8, 12, 30);\nString formattedDateTime = dateTime.format(formatter); // \"1986-04-08 12:30\"\n</code></pre>\n\n<p>Note that there are some commonly used date/time formats predefined as constants in <code>DateTimeFormatter</code>. For example: Using <code>DateTimeFormatter.ISO_DATE_TIME</code> to format the <code>LocalDateTime</code> instance from above would result in the string <code>\"1986-04-08T12:30:00\"</code>.</p>\n\n<p>The <code>parse()</code> and <code>format()</code> methods are available for all date/time related objects (e.g. <code>LocalDate</code> or <code>ZonedDateTime</code>)</p>\n"},{"tags":[],"owner":{"account_id":266703,"reputation":18305,"user_id":1149423,"accept_rate":83,"display_name":"Sufiyan Ghori"},"down_vote_count":1,"up_vote_count":212,"is_accepted":false,"score":211,"last_activity_date":1668300435,"creation_date":1423061479,"answer_id":28324294,"question_id":22463062,"body_markdown":"You can also use `LocalDate.parse()` or `LocalDateTime.parse()` on a `String` without providing it with a pattern, if the `String` is in [ISO&amp;nbsp;8601 format][1].\r\n\r\nFor example,\r\n\r\n    String strDate = &quot;2015-08-04&quot;;\r\n    LocalDate aLD = LocalDate.parse(strDate);\r\n    System.out.println(&quot;Date: &quot; + aLD);\r\n\r\n    String strDatewithTime = &quot;2015-08-04T10:11:30&quot;;\r\n    LocalDateTime aLDT = LocalDateTime.parse(strDatewithTime);\r\n    System.out.println(&quot;Date with Time: &quot; + aLDT);\r\n\r\n**Output**,\r\n\r\n```lang-none\r\nDate: 2015-08-04\r\nDate with Time: 2015-08-04T10:11:30\r\n```\r\n\r\nAnd use `DateTimeFormatter` only if you have to deal with other date patterns.\r\n\r\nFor instance, in the following example, ***dd MMM uuuu*** represents the day of the month (two digits), three letters of the name of the month (Jan, Feb, Mar,...), and a four-digit year:\r\n\r\n    DateTimeFormatter dTF = DateTimeFormatter.ofPattern(&quot;dd MMM uuuu&quot;);\r\n    String anotherDate = &quot;04 Aug 2015&quot;;\r\n    LocalDate lds = LocalDate.parse(anotherDate, dTF);\r\n    System.out.println(anotherDate + &quot; parses to &quot; + lds);\r\n\r\n**Output**\r\n\r\n```lang-none\r\n04 Aug 2015 parses to 2015-08-04\r\n```\r\n\r\nalso remember that the `DateTimeFormatter` object is bidirectional; it can both parse input and format output.\r\n\r\n    String strDate = &quot;2015-08-04&quot;;\r\n    LocalDate aLD = LocalDate.parse(strDate);\r\n    DateTimeFormatter dTF = DateTimeFormatter.ofPattern(&quot;dd MMM uuuu&quot;);\r\n    System.out.println(aLD + &quot; formats as &quot; + dTF.format(aLD));\r\n\r\n**Output**\r\n\r\n```lang-none\r\n2015-08-04 formats as 04 Aug 2015\r\n```\r\n\r\n(See complete [list of Patterns for Formatting and Parsing DateFormatter][2].)\r\n\r\n&lt;!-- language: lang-none --&gt;\r\n\r\n      Symbol  Meaning                     Presentation      Examples\r\n      ------  -------                     ------------      -------\r\n       G       era                         text              AD; Anno Domini; A\r\n       u       year                        year              2004; 04\r\n       y       year-of-era                 year              2004; 04\r\n       D       day-of-year                 number            189\r\n       M/L     month-of-year               number/text       7; 07; Jul; July; J\r\n       d       day-of-month                number            10\r\n\r\n       Q/q     quarter-of-year             number/text       3; 03; Q3; 3rd quarter\r\n       Y       week-based-year             year              1996; 96\r\n       w       week-of-week-based-year     number            27\r\n       W       week-of-month               number            4\r\n       E       day-of-week                 text              Tue; Tuesday; T\r\n       e/c     localized day-of-week       number/text       2; 02; Tue; Tuesday; T\r\n       F       week-of-month               number            3\r\n\r\n       a       am-pm-of-day                text              PM\r\n       h       clock-hour-of-am-pm (1-12)  number            12\r\n       K       hour-of-am-pm (0-11)        number            0\r\n       k       clock-hour-of-am-pm (1-24)  number            0\r\n\r\n       H       hour-of-day (0-23)          number            0\r\n       m       minute-of-hour              number            30\r\n       s       second-of-minute            number            55\r\n       S       fraction-of-second          fraction          978\r\n       A       milli-of-day                number            1234\r\n       n       nano-of-second              number            987654321\r\n       N       nano-of-day                 number            1234000000\r\n\r\n       V       time-zone ID                zone-id           America/Los_Angeles; Z; -08:30\r\n       z       time-zone name              zone-name         Pacific Standard Time; PST\r\n       O       localized zone-offset       offset-O          GMT+8; GMT+08:00; UTC-08:00;\r\n       X       zone-offset &#39;Z&#39; for zero    offset-X          Z; -08; -0830; -08:30; -083015; -08:30:15;\r\n       x       zone-offset                 offset-x          +0000; -08; -0830; -08:30; -083015; -08:30:15;\r\n       Z       zone-offset                 offset-Z          +0000; -0800; -08:00;\r\n\r\n       p       pad next                    pad modifier      1\r\n\r\n       &#39;       escape for text             delimiter\r\n       &#39;&#39;      single quote                literal           &#39;\r\n       [       optional section start\r\n       ]       optional section end\r\n       #       reserved for future use\r\n       {       reserved for future use\r\n       }       reserved for future use\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE_TIME\r\n  [2]: http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns\r\n\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>You can also use <code>LocalDate.parse()</code> or <code>LocalDateTime.parse()</code> on a <code>String</code> without providing it with a pattern, if the <code>String</code> is in <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#ISO_LOCAL_DATE_TIME\" rel=\"noreferrer\">ISO 8601 format</a>.</p>\n<p>For example,</p>\n<pre><code>String strDate = &quot;2015-08-04&quot;;\nLocalDate aLD = LocalDate.parse(strDate);\nSystem.out.println(&quot;Date: &quot; + aLD);\n\nString strDatewithTime = &quot;2015-08-04T10:11:30&quot;;\nLocalDateTime aLDT = LocalDateTime.parse(strDatewithTime);\nSystem.out.println(&quot;Date with Time: &quot; + aLDT);\n</code></pre>\n<p><strong>Output</strong>,</p>\n<pre class=\"lang-none prettyprint-override\"><code>Date: 2015-08-04\nDate with Time: 2015-08-04T10:11:30\n</code></pre>\n<p>And use <code>DateTimeFormatter</code> only if you have to deal with other date patterns.</p>\n<p>For instance, in the following example, <em><strong>dd MMM uuuu</strong></em> represents the day of the month (two digits), three letters of the name of the month (Jan, Feb, Mar,...), and a four-digit year:</p>\n<pre><code>DateTimeFormatter dTF = DateTimeFormatter.ofPattern(&quot;dd MMM uuuu&quot;);\nString anotherDate = &quot;04 Aug 2015&quot;;\nLocalDate lds = LocalDate.parse(anotherDate, dTF);\nSystem.out.println(anotherDate + &quot; parses to &quot; + lds);\n</code></pre>\n<p><strong>Output</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>04 Aug 2015 parses to 2015-08-04\n</code></pre>\n<p>also remember that the <code>DateTimeFormatter</code> object is bidirectional; it can both parse input and format output.</p>\n<pre><code>String strDate = &quot;2015-08-04&quot;;\nLocalDate aLD = LocalDate.parse(strDate);\nDateTimeFormatter dTF = DateTimeFormatter.ofPattern(&quot;dd MMM uuuu&quot;);\nSystem.out.println(aLD + &quot; formats as &quot; + dTF.format(aLD));\n</code></pre>\n<p><strong>Output</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>2015-08-04 formats as 04 Aug 2015\n</code></pre>\n<p>(See complete <a href=\"http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#patterns\" rel=\"noreferrer\">list of Patterns for Formatting and Parsing DateFormatter</a>.)</p>\n<pre class=\"lang-none prettyprint-override\"><code>  Symbol  Meaning                     Presentation      Examples\n  ------  -------                     ------------      -------\n   G       era                         text              AD; Anno Domini; A\n   u       year                        year              2004; 04\n   y       year-of-era                 year              2004; 04\n   D       day-of-year                 number            189\n   M/L     month-of-year               number/text       7; 07; Jul; July; J\n   d       day-of-month                number            10\n\n   Q/q     quarter-of-year             number/text       3; 03; Q3; 3rd quarter\n   Y       week-based-year             year              1996; 96\n   w       week-of-week-based-year     number            27\n   W       week-of-month               number            4\n   E       day-of-week                 text              Tue; Tuesday; T\n   e/c     localized day-of-week       number/text       2; 02; Tue; Tuesday; T\n   F       week-of-month               number            3\n\n   a       am-pm-of-day                text              PM\n   h       clock-hour-of-am-pm (1-12)  number            12\n   K       hour-of-am-pm (0-11)        number            0\n   k       clock-hour-of-am-pm (1-24)  number            0\n\n   H       hour-of-day (0-23)          number            0\n   m       minute-of-hour              number            30\n   s       second-of-minute            number            55\n   S       fraction-of-second          fraction          978\n   A       milli-of-day                number            1234\n   n       nano-of-second              number            987654321\n   N       nano-of-day                 number            1234000000\n\n   V       time-zone ID                zone-id           America/Los_Angeles; Z; -08:30\n   z       time-zone name              zone-name         Pacific Standard Time; PST\n   O       localized zone-offset       offset-O          GMT+8; GMT+08:00; UTC-08:00;\n   X       zone-offset 'Z' for zero    offset-X          Z; -08; -0830; -08:30; -083015; -08:30:15;\n   x       zone-offset                 offset-x          +0000; -08; -0830; -08:30; -083015; -08:30:15;\n   Z       zone-offset                 offset-Z          +0000; -0800; -08:00;\n\n   p       pad next                    pad modifier      1\n\n   '       escape for text             delimiter\n   ''      single quote                literal           '\n   [       optional section start\n   ]       optional section end\n   #       reserved for future use\n   {       reserved for future use\n   }       reserved for future use\n</code></pre>\n"},{"tags":[],"owner":{"account_id":942379,"reputation":1439,"user_id":970229,"display_name":"Marcio Jasinski"},"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1668300576,"creation_date":1455482886,"answer_id":35397804,"question_id":22463062,"body_markdown":"Both [Sufiyan Ghori&#39;s and][1] [micha&#39;s answer][2] explain very well the question regarding string patterns. However, just in case you are working with [ISO 8601][3], there isn&#39;t any need to apply `DateTimeFormatter` since LocalDateTime is already prepared for it:\r\n\r\n**Convert a LocalDateTime to a Time Zone ISO&amp;nbsp;8601 String**\r\n\r\n    LocalDateTime ldt = LocalDateTime.now();\r\n    ZonedDateTime zdt = ldt.atZone(ZoneOffset.UTC); // You might use a different zone\r\n    String iso8601 = zdt.toString();\r\n\r\n**Convert from ISO8601 String back to a LocalDateTime**\r\n\r\n    String iso8601 = &quot;2016-02-14T18:32:04.150Z&quot;;\r\n    ZonedDateTime zdt = ZonedDateTime.parse(iso8601);\r\n    LocalDateTime ldt = zdt.toLocalDateTime();\r\n\r\n  [1]: https://stackoverflow.com/questions/22463062/how-can-i-parse-format-dates-with-localdatetime-java-8/28324294#28324294\r\n  [2]: https://stackoverflow.com/questions/22463062/how-can-i-parse-format-dates-with-localdatetime-java-8/22463063#22463063\r\n  [3]: https://en.wikipedia.org/wiki/ISO_8601\r\n\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>Both <a href=\"https://stackoverflow.com/questions/22463062/how-can-i-parse-format-dates-with-localdatetime-java-8/28324294#28324294\">Sufiyan Ghori's and</a> <a href=\"https://stackoverflow.com/questions/22463062/how-can-i-parse-format-dates-with-localdatetime-java-8/22463063#22463063\">micha's answer</a> explain very well the question regarding string patterns. However, just in case you are working with <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a>, there isn't any need to apply <code>DateTimeFormatter</code> since LocalDateTime is already prepared for it:</p>\n<p><strong>Convert a LocalDateTime to a Time Zone ISO 8601 String</strong></p>\n<pre><code>LocalDateTime ldt = LocalDateTime.now();\nZonedDateTime zdt = ldt.atZone(ZoneOffset.UTC); // You might use a different zone\nString iso8601 = zdt.toString();\n</code></pre>\n<p><strong>Convert from ISO8601 String back to a LocalDateTime</strong></p>\n<pre><code>String iso8601 = &quot;2016-02-14T18:32:04.150Z&quot;;\nZonedDateTime zdt = ZonedDateTime.parse(iso8601);\nLocalDateTime ldt = zdt.toLocalDateTime();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":49078,"reputation":44636,"user_id":145989,"accept_rate":59,"display_name":"Ondra Žižka"},"down_vote_count":0,"up_vote_count":43,"is_accepted":false,"score":43,"last_activity_date":1668303198,"creation_date":1560011380,"answer_id":56508200,"question_id":22463062,"body_markdown":"Parsing a string with date and time into a particular point in time (Java calls it an  &quot;[`Instant`][1]&quot;) is quite complicated. Java has been tackling this in several iterations. The latest one, `java.time` and `java.time.chrono`, covers almost all needs (except [time dilation][2] :) ).\r\n\r\nHowever, that complexity brings a lot of confusion.\r\n\r\nThe key to understand date parsing is:\r\n\r\n## Why does Java have so many ways to parse a date?\r\n\r\n1. There are several systems to measure a time. For instance, the historical Japanese calendars were derived from the time ranges of the reign of the respective emperor or dynasty. Then there is, e.g., the [Unix timestamp][3].\r\n   Fortunately, the whole (business) world managed to use the same.\r\n2. Historically, the systems were being switched from/to, for [various reasons][4]. E.g., from the [Julian calendar][5] to the [Gregorian calendar][6] in 1582; so, the &#39;western&#39; dates before that need to be treated differently.\r\n3. And, of course, the change did not happen at once. Because the calendar came from the headquarters of some religion and other parts of Europe believed in other deities, for instance Germany did not switch until the year 1700.\r\n\r\n## ...and why is the `LocalDateTime`, `ZonedDateTime` et al. so complicated\r\n\r\n4. There are [time zones][7].\r\nA time zone is basically a &quot;stripe&quot;***\\[3\\]** of the Earth&#39;s surface whose authorities follow the same rules of when does it have which time offset. This includes summer time rules.\r\n\r\n    The time zones change over time for various areas, mostly based on who conquers whom. And one time zone&#39;s rules [change over time][8] as well.\r\n\r\n5. There are time offsets. That is not the same as time zones, because a time zone may be, e.g., &quot;Prague&quot;, but that has summer time offset and winter time offset.\r\n\r\n    If you get a timestamp with a time zone, the offset may vary, depending on what part of the year it is in. During the leap hour, the timestamp may mean two different times, so without additional information, it can&#39;t be reliably converted.\r\n\r\n    Note: By *timestamp* I mean &quot;a string that contains a date and/or time, optionally with a time zone and/or time offset.&quot;\r\n\r\n6. Several time zones may share the same time offset for certain periods. For instance, the GMT/UTC time zone is the same as the &quot;London&quot; time zone when the summer time offset is not in effect.\r\n\r\nTo make it a bit more complicated (but that&#39;s not too important for your use case):\r\n\r\n7. The scientists observe Earth&#39;s dynamic, which changes over time; based on that, they add seconds at the end of individual years. (So *2040-12-31 24:00:00* may be a valid date-time.) This needs regular updates of the metadata that systems use to have the date conversions right. E.g., on Linux, you get regular updates to the Java packages including these new data.\r\n8. The updates do not always keep the previous behavior for both historical and future timestamps. So it may happen that parsing of the two timestamps around some time zone&#39;s change comparing them [may give different results][9] when running on different versions of the software. That also applies to comparing between the affected time zone and other time zone.\r\n\r\n    Should this cause a bug in your software, consider using some timestamp that does not have such complicated rules, like [Unix timestamp][3].\r\n\r\n9. Because of 7, for the future dates, we can&#39;t convert dates exactly with certainty. So, for instance, current parsing of *8524-02-17 12:00:00* may be off a couple of seconds from the future parsing.\r\n\r\n\r\n### JDK&#39;s APIs for this evolved with the contemporary needs\r\n\r\n* The early Java releases had just `java.util.Date` which had a bit naive approach, assuming that there&#39;s just the year, month, day, and time. This quickly did not suffice.\r\n* Also, the needs of the databases were different, so quite early, `java.sql.Date` was introduced, with its own limitations.\r\n* Because neither covered different calendars and time zones well, the `Calendar` API was introduced.\r\n* This still did not cover the complexity of the time zones. And yet, the mix of the above APIs was really a pain to work with. So as Java developers started working on global web applications, libraries that targeted most use cases, like JodaTime, got quickly popular. JodaTime was the de facto standard for about a decade.\r\n* But the JDK did not integrate with JodaTime, so working with it was a bit cumbersome. So, after a very long discussion on how to approach the matter, [JSR-310][10] was created [mainly based on JodaTime][11].\r\n\r\n## How to deal with it in Java&#39;s `java.time`\r\n\r\n### Determine what type to parse a timestamp to\r\n\r\nWhen you are consuming a timestamp string, you need to know what information it contains. **This is the crucial point.** If you don&#39;t get this right, you end up with a cryptic exceptions like &quot;Can&#39;t create Instant&quot;, &quot;Zone offset missing&quot;, &quot;unknown zone id&quot;, etc.\r\n\r\n  * [Unable to obtain OffsetDateTime from TemporalAccessor][12]\r\n  * [Unable to obtain ZonedDateTime from TemporalAccessor][13]\r\n  * [Unable to obtain LocalDateTime from TemporalAccessor][14]\r\n  * [Unable to obtain Instant from TemporalAccessor][15]\r\n\r\n**Does it contain the date and the time?**\r\n\r\n1. **Does it have a time offset?**\r\n  A time offset is the *+hh:mm* part. Sometimes, *+00:00* may be substituted with *Z* as &#39;Zulu time&#39;, `UTC` as Universal Time Coordinated, or *GMT* as Greenwich Mean Time. These also set the time zone.\r\n  For these timestamps, you use [`OffsetDateTime`][16].\r\n\r\n2. **Does it have a time zone?**\r\n   For these timestamps, you use [`ZonedDateTime`][17].\r\n   Zone is specified either by\r\n   * name (&quot;Prague&quot;, &quot;Pacific Standard Time&quot;, &quot;PST&quot;), or\r\n   * &quot;zone ID&quot; (&quot;America/Los_Angeles&quot;, &quot;Europe/London&quot;), represented by [java.time.ZoneId][18].\r\n\r\n    The list of time zones is compiled by a [&quot;TZ database&quot;][19], backed by [ICAAN][20].\r\n\r\n    According to `ZoneId`&#39;s javadoc, the zone id&#39;s can also somehow be specified as *Z* and offset. I&#39;m not sure how this maps to real zones.\r\n\r\n    If the timestamp, which only has a TZ, falls into a leap hour of time offset change, then it is ambiguous, and the interpretation is subject of `ResolverStyle`, see below.\r\n\r\n3. **If it has neither**, then the missing context is assumed or neglected. And the consumer has to decide. So it needs to be parsed as `LocalDateTime` and converted to `OffsetDateTime` by adding the missing info:\r\n   * You can *assume* that it is a UTC time. Add the UTC offset of 0 hours.\r\n   * You can *assume* that it is a time of the place where the conversion is happening. Convert it by adding the system&#39;s time zone.\r\n   * You can *neglect* and just use it as is. That is useful e.g. to compare or subtract two times (see [`Duration`][21]), or when you don&#39;t know and it doesn&#39;t really matter (e.g., local bus schedule).\r\n\r\n**Partial time information**\r\n\r\n* Based on what the timestamp contains, you can take `LocalDate`, `LocalTime`, `OffsetTime`, `MonthDay`, `Year`, or `YearMonth` out of it.\r\n\r\nIf you have the full information, you can get a [`java.time.Instant`][1]. This is also internally used to convert between `OffsetDateTime` and `ZonedDateTime`.\r\n\r\n### Figure out how to parse it\r\n\r\nThere is an extensive documentation on [`DateTimeFormatter`][22] which can both parse a timestamp string and format to string.\r\n\r\nThe [pre-created `DateTimeFormatter`s][23] should cover more or less all standard timestamp formats. For instance, `ISO_INSTANT` can parse `2011-12-03T10:15:30.123457Z`.\r\n\r\nIf you have some special format, then you can [create your own DateTimeFormatter][24] (which is also a parser).\r\n\r\n    private static final DateTimeFormatter TIMESTAMP_PARSER = new DateTimeFormatterBuilder()\r\n       .parseCaseInsensitive()\r\n       .append(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.SX&quot;))\r\n       .toFormatter();\r\n\r\nI recommend to look at the source code of `DateTimeFormatter` and get inspired on how to build one using `DateTimeFormatterBuilder`. While you&#39;re there, also have a look at `ResolverStyle` which controls whether the parser is LENIENT, SMART or STRICT for the formats and ambiguous information.\r\n\r\n### TemporalAccessor\r\n\r\nNow, the frequent mistake is to go into the complexity of `TemporalAccessor`. This comes from how the developers were used to work with `SimpleDateFormatter.parse(String)`. Right, `DateTimeFormatter.parse(&quot;...&quot;)` gives you `TemporalAccessor`.\r\n\r\n    // No need for this!\r\n    TemporalAccessor ta = TIMESTAMP_PARSER.parse(&quot;2011-... etc&quot;);\r\n\r\nBut, equipped with the knowledge from the previous section, you can conveniently parse into the type you need:\r\n\r\n    OffsetDateTime myTimestamp = OffsetDateTime.parse(&quot;2011-12-03T10:15:30.123457Z&quot;, TIMESTAMP_PARSER);\r\n\r\nYou do not actually need to the `DateTimeFormatter` either. The types you want to parse have the `parse(String)` methods.\r\n\r\n    OffsetDateTime myTimestamp = OffsetDateTime.parse(&quot;2011-12-03T10:15:30.123457Z&quot;);\r\n\r\nRegarding `TemporalAccessor`, you can use it if you have a vague idea of what information there is in the string, and want to decide at runtime.\r\n\r\nI hope I shed some light of understanding onto your soul :)\r\n\r\nNote: There&#39;s a backport of `java.time` to Java 6 and 7: [ThreeTen-Backport][25]. For Android it has [ThreeTenABP][26].\r\n\r\n **\\[3\\]** Not just that they are not stripes, but there also some weird extremes. For instance, some [neighboring Pacific Islands][27] have +14:00 and -11:00 time zones. That means, that while on one island, there is 1st May 3 PM, on another island not so far, it is still 30 April 12 PM (if I counted correctly :) )\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\r\n  [2]: https://en.wikipedia.org/wiki/Time_dilation\r\n  [3]: https://en.wikipedia.org/wiki/Unix_time\r\n  [4]: https://www.history.com/news/6-things-you-may-not-know-about-the-gregorian-calendar\r\n  [5]: https://en.wikipedia.org/wiki/Julian_calendar\r\n  [6]: https://en.wikipedia.org/wiki/Gregorian_calendar\r\n  [7]: https://en.wikipedia.org/wiki/Time_zone\r\n  [8]: https://en.wikipedia.org/wiki/Singapore_Standard_Time\r\n  [9]: https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result\r\n  [10]: https://jcp.org/en/jsr/detail?id=310\r\n  [11]: https://community.oracle.com/docs/DOC-983209\r\n  [12]: https://stackoverflow.com/questions/35298214/unable-to-obtain-offsetdatetime-from-temporalaccessor\r\n  [13]: https://stackoverflow.com/questions/23596530/unable-to-obtain-zoneddatetime-from-temporalaccessor-using-datetimeformatter-and?noredirect=1&amp;lq=1\r\n  [14]: https://stackoverflow.com/questions/39978897/datetimeparseexception-with-localdatetime-unable-to-obtain-localdatetime-from-t?noredirect=1&amp;lq=1\r\n  [15]: https://stackoverflow.com/questions/40279066/instant-time-parsing-error-unable-to-obtain-instant-from-temporalaccessor\r\n  [16]: https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html\r\n  [17]: https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\r\n  [18]: https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\r\n  [19]: https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\r\n  [20]: https://en.wikipedia.org/wiki/ICANN\r\n  [21]: https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\r\n  [22]: https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\r\n  [23]: https://docs.oracle.com/javase/8/docs/api/index.html?java/time/format/DateTimeFormatter.html#predefined\r\n  [24]: https://www.baeldung.com/java-datetimeformatter\r\n  [25]: http://www.threeten.org/threetenbp/\r\n  [26]: https://github.com/JakeWharton/ThreeTenABP\r\n  [27]: https://en.wikipedia.org/wiki/Time_zone#/media/File:Solar_time_vs_standard_time.png\r\n\r\n\r\n\r\n\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>Parsing a string with date and time into a particular point in time (Java calls it an  &quot;<a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"noreferrer\"><code>Instant</code></a>&quot;) is quite complicated. Java has been tackling this in several iterations. The latest one, <code>java.time</code> and <code>java.time.chrono</code>, covers almost all needs (except <a href=\"https://en.wikipedia.org/wiki/Time_dilation\" rel=\"noreferrer\">time dilation</a> :) ).</p>\n<p>However, that complexity brings a lot of confusion.</p>\n<p>The key to understand date parsing is:</p>\n<h2>Why does Java have so many ways to parse a date?</h2>\n<ol>\n<li>There are several systems to measure a time. For instance, the historical Japanese calendars were derived from the time ranges of the reign of the respective emperor or dynasty. Then there is, e.g., the <a href=\"https://en.wikipedia.org/wiki/Unix_time\" rel=\"noreferrer\">Unix timestamp</a>.\nFortunately, the whole (business) world managed to use the same.</li>\n<li>Historically, the systems were being switched from/to, for <a href=\"https://www.history.com/news/6-things-you-may-not-know-about-the-gregorian-calendar\" rel=\"noreferrer\">various reasons</a>. E.g., from the <a href=\"https://en.wikipedia.org/wiki/Julian_calendar\" rel=\"noreferrer\">Julian calendar</a> to the <a href=\"https://en.wikipedia.org/wiki/Gregorian_calendar\" rel=\"noreferrer\">Gregorian calendar</a> in 1582; so, the 'western' dates before that need to be treated differently.</li>\n<li>And, of course, the change did not happen at once. Because the calendar came from the headquarters of some religion and other parts of Europe believed in other deities, for instance Germany did not switch until the year 1700.</li>\n</ol>\n<h2>...and why is the <code>LocalDateTime</code>, <code>ZonedDateTime</code> et al. so complicated</h2>\n<ol start=\"4\">\n<li><p>There are <a href=\"https://en.wikipedia.org/wiki/Time_zone\" rel=\"noreferrer\">time zones</a>.\nA time zone is basically a &quot;stripe&quot;*<strong>[3]</strong> of the Earth's surface whose authorities follow the same rules of when does it have which time offset. This includes summer time rules.</p>\n<p>The time zones change over time for various areas, mostly based on who conquers whom. And one time zone's rules <a href=\"https://en.wikipedia.org/wiki/Singapore_Standard_Time\" rel=\"noreferrer\">change over time</a> as well.</p>\n</li>\n<li><p>There are time offsets. That is not the same as time zones, because a time zone may be, e.g., &quot;Prague&quot;, but that has summer time offset and winter time offset.</p>\n<p>If you get a timestamp with a time zone, the offset may vary, depending on what part of the year it is in. During the leap hour, the timestamp may mean two different times, so without additional information, it can't be reliably converted.</p>\n<p>Note: By <em>timestamp</em> I mean &quot;a string that contains a date and/or time, optionally with a time zone and/or time offset.&quot;</p>\n</li>\n<li><p>Several time zones may share the same time offset for certain periods. For instance, the GMT/UTC time zone is the same as the &quot;London&quot; time zone when the summer time offset is not in effect.</p>\n</li>\n</ol>\n<p>To make it a bit more complicated (but that's not too important for your use case):</p>\n<ol start=\"7\">\n<li><p>The scientists observe Earth's dynamic, which changes over time; based on that, they add seconds at the end of individual years. (So <em>2040-12-31 24:00:00</em> may be a valid date-time.) This needs regular updates of the metadata that systems use to have the date conversions right. E.g., on Linux, you get regular updates to the Java packages including these new data.</p>\n</li>\n<li><p>The updates do not always keep the previous behavior for both historical and future timestamps. So it may happen that parsing of the two timestamps around some time zone's change comparing them <a href=\"https://stackoverflow.com/questions/6841333/why-is-subtracting-these-two-times-in-1927-giving-a-strange-result\">may give different results</a> when running on different versions of the software. That also applies to comparing between the affected time zone and other time zone.</p>\n<p>Should this cause a bug in your software, consider using some timestamp that does not have such complicated rules, like <a href=\"https://en.wikipedia.org/wiki/Unix_time\" rel=\"noreferrer\">Unix timestamp</a>.</p>\n</li>\n<li><p>Because of 7, for the future dates, we can't convert dates exactly with certainty. So, for instance, current parsing of <em>8524-02-17 12:00:00</em> may be off a couple of seconds from the future parsing.</p>\n</li>\n</ol>\n<h3>JDK's APIs for this evolved with the contemporary needs</h3>\n<ul>\n<li>The early Java releases had just <code>java.util.Date</code> which had a bit naive approach, assuming that there's just the year, month, day, and time. This quickly did not suffice.</li>\n<li>Also, the needs of the databases were different, so quite early, <code>java.sql.Date</code> was introduced, with its own limitations.</li>\n<li>Because neither covered different calendars and time zones well, the <code>Calendar</code> API was introduced.</li>\n<li>This still did not cover the complexity of the time zones. And yet, the mix of the above APIs was really a pain to work with. So as Java developers started working on global web applications, libraries that targeted most use cases, like JodaTime, got quickly popular. JodaTime was the de facto standard for about a decade.</li>\n<li>But the JDK did not integrate with JodaTime, so working with it was a bit cumbersome. So, after a very long discussion on how to approach the matter, <a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR-310</a> was created <a href=\"https://community.oracle.com/docs/DOC-983209\" rel=\"noreferrer\">mainly based on JodaTime</a>.</li>\n</ul>\n<h2>How to deal with it in Java's <code>java.time</code></h2>\n<h3>Determine what type to parse a timestamp to</h3>\n<p>When you are consuming a timestamp string, you need to know what information it contains. <strong>This is the crucial point.</strong> If you don't get this right, you end up with a cryptic exceptions like &quot;Can't create Instant&quot;, &quot;Zone offset missing&quot;, &quot;unknown zone id&quot;, etc.</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/35298214/unable-to-obtain-offsetdatetime-from-temporalaccessor\">Unable to obtain OffsetDateTime from TemporalAccessor</a></li>\n<li><a href=\"https://stackoverflow.com/questions/23596530/unable-to-obtain-zoneddatetime-from-temporalaccessor-using-datetimeformatter-and?noredirect=1&amp;lq=1\">Unable to obtain ZonedDateTime from TemporalAccessor</a></li>\n<li><a href=\"https://stackoverflow.com/questions/39978897/datetimeparseexception-with-localdatetime-unable-to-obtain-localdatetime-from-t?noredirect=1&amp;lq=1\">Unable to obtain LocalDateTime from TemporalAccessor</a></li>\n<li><a href=\"https://stackoverflow.com/questions/40279066/instant-time-parsing-error-unable-to-obtain-instant-from-temporalaccessor\">Unable to obtain Instant from TemporalAccessor</a></li>\n</ul>\n<p><strong>Does it contain the date and the time?</strong></p>\n<ol>\n<li><p><strong>Does it have a time offset?</strong>\nA time offset is the <em>+hh:mm</em> part. Sometimes, <em>+00:00</em> may be substituted with <em>Z</em> as 'Zulu time', <code>UTC</code> as Universal Time Coordinated, or <em>GMT</em> as Greenwich Mean Time. These also set the time zone.\nFor these timestamps, you use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html\" rel=\"noreferrer\"><code>OffsetDateTime</code></a>.</p>\n</li>\n<li><p><strong>Does it have a time zone?</strong>\nFor these timestamps, you use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html\" rel=\"noreferrer\"><code>ZonedDateTime</code></a>.\nZone is specified either by</p>\n<ul>\n<li>name (&quot;Prague&quot;, &quot;Pacific Standard Time&quot;, &quot;PST&quot;), or</li>\n<li>&quot;zone ID&quot; (&quot;America/Los_Angeles&quot;, &quot;Europe/London&quot;), represented by <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/ZoneId.html\" rel=\"noreferrer\">java.time.ZoneId</a>.</li>\n</ul>\n<p>The list of time zones is compiled by a <a href=\"https://en.wikipedia.org/wiki/List_of_tz_database_time_zones\" rel=\"noreferrer\">&quot;TZ database&quot;</a>, backed by <a href=\"https://en.wikipedia.org/wiki/ICANN\" rel=\"noreferrer\">ICAAN</a>.</p>\n<p>According to <code>ZoneId</code>'s javadoc, the zone id's can also somehow be specified as <em>Z</em> and offset. I'm not sure how this maps to real zones.</p>\n<p>If the timestamp, which only has a TZ, falls into a leap hour of time offset change, then it is ambiguous, and the interpretation is subject of <code>ResolverStyle</code>, see below.</p>\n</li>\n<li><p><strong>If it has neither</strong>, then the missing context is assumed or neglected. And the consumer has to decide. So it needs to be parsed as <code>LocalDateTime</code> and converted to <code>OffsetDateTime</code> by adding the missing info:</p>\n<ul>\n<li>You can <em>assume</em> that it is a UTC time. Add the UTC offset of 0 hours.</li>\n<li>You can <em>assume</em> that it is a time of the place where the conversion is happening. Convert it by adding the system's time zone.</li>\n<li>You can <em>neglect</em> and just use it as is. That is useful e.g. to compare or subtract two times (see <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Duration.html\" rel=\"noreferrer\"><code>Duration</code></a>), or when you don't know and it doesn't really matter (e.g., local bus schedule).</li>\n</ul>\n</li>\n</ol>\n<p><strong>Partial time information</strong></p>\n<ul>\n<li>Based on what the timestamp contains, you can take <code>LocalDate</code>, <code>LocalTime</code>, <code>OffsetTime</code>, <code>MonthDay</code>, <code>Year</code>, or <code>YearMonth</code> out of it.</li>\n</ul>\n<p>If you have the full information, you can get a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/Instant.html\" rel=\"noreferrer\"><code>java.time.Instant</code></a>. This is also internally used to convert between <code>OffsetDateTime</code> and <code>ZonedDateTime</code>.</p>\n<h3>Figure out how to parse it</h3>\n<p>There is an extensive documentation on <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"noreferrer\"><code>DateTimeFormatter</code></a> which can both parse a timestamp string and format to string.</p>\n<p>The <a href=\"https://docs.oracle.com/javase/8/docs/api/index.html?java/time/format/DateTimeFormatter.html#predefined\" rel=\"noreferrer\">pre-created <code>DateTimeFormatter</code>s</a> should cover more or less all standard timestamp formats. For instance, <code>ISO_INSTANT</code> can parse <code>2011-12-03T10:15:30.123457Z</code>.</p>\n<p>If you have some special format, then you can <a href=\"https://www.baeldung.com/java-datetimeformatter\" rel=\"noreferrer\">create your own DateTimeFormatter</a> (which is also a parser).</p>\n<pre><code>private static final DateTimeFormatter TIMESTAMP_PARSER = new DateTimeFormatterBuilder()\n   .parseCaseInsensitive()\n   .append(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH:mm:ss.SX&quot;))\n   .toFormatter();\n</code></pre>\n<p>I recommend to look at the source code of <code>DateTimeFormatter</code> and get inspired on how to build one using <code>DateTimeFormatterBuilder</code>. While you're there, also have a look at <code>ResolverStyle</code> which controls whether the parser is LENIENT, SMART or STRICT for the formats and ambiguous information.</p>\n<h3>TemporalAccessor</h3>\n<p>Now, the frequent mistake is to go into the complexity of <code>TemporalAccessor</code>. This comes from how the developers were used to work with <code>SimpleDateFormatter.parse(String)</code>. Right, <code>DateTimeFormatter.parse(&quot;...&quot;)</code> gives you <code>TemporalAccessor</code>.</p>\n<pre><code>// No need for this!\nTemporalAccessor ta = TIMESTAMP_PARSER.parse(&quot;2011-... etc&quot;);\n</code></pre>\n<p>But, equipped with the knowledge from the previous section, you can conveniently parse into the type you need:</p>\n<pre><code>OffsetDateTime myTimestamp = OffsetDateTime.parse(&quot;2011-12-03T10:15:30.123457Z&quot;, TIMESTAMP_PARSER);\n</code></pre>\n<p>You do not actually need to the <code>DateTimeFormatter</code> either. The types you want to parse have the <code>parse(String)</code> methods.</p>\n<pre><code>OffsetDateTime myTimestamp = OffsetDateTime.parse(&quot;2011-12-03T10:15:30.123457Z&quot;);\n</code></pre>\n<p>Regarding <code>TemporalAccessor</code>, you can use it if you have a vague idea of what information there is in the string, and want to decide at runtime.</p>\n<p>I hope I shed some light of understanding onto your soul :)</p>\n<p>Note: There's a backport of <code>java.time</code> to Java 6 and 7: <a href=\"http://www.threeten.org/threetenbp/\" rel=\"noreferrer\">ThreeTen-Backport</a>. For Android it has <a href=\"https://github.com/JakeWharton/ThreeTenABP\" rel=\"noreferrer\">ThreeTenABP</a>.</p>\n<p><strong>[3]</strong> Not just that they are not stripes, but there also some weird extremes. For instance, some <a href=\"https://en.wikipedia.org/wiki/Time_zone#/media/File:Solar_time_vs_standard_time.png\" rel=\"noreferrer\">neighboring Pacific Islands</a> have +14:00 and -11:00 time zones. That means, that while on one island, there is 1st May 3 PM, on another island not so far, it is still 30 April 12 PM (if I counted correctly :) )</p>\n"},{"tags":[],"owner":{"account_id":5945257,"reputation":461,"user_id":9101382,"display_name":"flowgrad"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668303492,"creation_date":1577808684,"answer_id":59546331,"question_id":22463062,"body_markdown":"I found it wonderful to cover multiple variants of date time formats like this:\r\n\r\n    final DateTimeFormatterBuilder dtfb = new DateTimeFormatterBuilder();\r\n    dtfb.appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSSSSS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSSSS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSSS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SS&quot;))\r\n        .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;))\r\n        .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\r\n        .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\r\n        .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0);\r\n\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>I found it wonderful to cover multiple variants of date time formats like this:</p>\n<pre><code>final DateTimeFormatterBuilder dtfb = new DateTimeFormatterBuilder();\ndtfb.appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSSSSS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSSSS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSSS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSSS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSSS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSSS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SS&quot;))\n    .appendOptional(DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.S&quot;))\n    .parseDefaulting(ChronoField.HOUR_OF_DAY, 0)\n    .parseDefaulting(ChronoField.MINUTE_OF_HOUR, 0)\n    .parseDefaulting(ChronoField.SECOND_OF_MINUTE, 0);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5555252,"reputation":830,"user_id":4406873,"display_name":"Santhosh Hirekerur"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1668303712,"creation_date":1582853548,"answer_id":60444098,"question_id":22463062,"body_markdown":"Get the current UTC time in the required format\r\n\r\n```\r\n// Current the UTC time\r\nOffsetDateTime utc = OffsetDateTime.now(ZoneOffset.UTC);\r\n\r\n// Get LocalDateTime\r\nLocalDateTime localDateTime = utc.toLocalDateTime();\r\nSystem.out.println(&quot;*************&quot; + localDateTime);\r\n\r\n// Formatted UTC time\r\nDateTimeFormatter dTF = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);\r\nSystem.out.println(&quot; formats as &quot; + dTF.format(localDateTime));\r\n\r\n// Get the UTC time for the current date\r\nDate now = new Date();\r\nLocalDateTime utcDateTimeForCurrentDateTime = Instant.ofEpochMilli(now.getTime()).atZone(ZoneId.of(&quot;UTC&quot;)).toLocalDateTime();\r\nDateTimeFormatter dTF2 = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);\r\nSystem.out.println(&quot; formats as &quot; + dTF2.format(utcDateTimeForCurrentDateTime));\r\n```\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>Get the current UTC time in the required format</p>\n<pre><code>// Current the UTC time\nOffsetDateTime utc = OffsetDateTime.now(ZoneOffset.UTC);\n\n// Get LocalDateTime\nLocalDateTime localDateTime = utc.toLocalDateTime();\nSystem.out.println(&quot;*************&quot; + localDateTime);\n\n// Formatted UTC time\nDateTimeFormatter dTF = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);\nSystem.out.println(&quot; formats as &quot; + dTF.format(localDateTime));\n\n// Get the UTC time for the current date\nDate now = new Date();\nLocalDateTime utcDateTimeForCurrentDateTime = Instant.ofEpochMilli(now.getTime()).atZone(ZoneId.of(&quot;UTC&quot;)).toLocalDateTime();\nDateTimeFormatter dTF2 = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;);\nSystem.out.println(&quot; formats as &quot; + dTF2.format(utcDateTimeForCurrentDateTime));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1366348,"reputation":34411,"user_id":1592191,"accept_rate":100,"display_name":"mrsrinivas"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1654342326,"creation_date":1601025815,"answer_id":64061373,"question_id":22463062,"body_markdown":"Let&#39;s take two questions, example string `&quot;2014-04-08 12:30&quot;`\r\n&gt; How can I obtain a LocalDateTime instance from the given string?\r\n\r\n    import java.time.format.DateTimeFormatter\r\n    import java.time.LocalDateTime\r\n    \r\n    final DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;)\r\n    \r\n    // Parsing or conversion\r\n    final LocalDateTime dt = LocalDateTime.parse(&quot;2014-04-08 12:30&quot;, formatter)\r\n\r\n`dt` should allow you to all date-time related operations\r\n\r\n&gt; How can I then convert the LocalDateTime instance back to a string with the same format?\r\n\r\n    final String date = dt.format(formatter) ","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>Let's take two questions, example string <code>&quot;2014-04-08 12:30&quot;</code></p>\n<blockquote>\n<p>How can I obtain a LocalDateTime instance from the given string?</p>\n</blockquote>\n<pre><code>import java.time.format.DateTimeFormatter\nimport java.time.LocalDateTime\n\nfinal DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm&quot;)\n\n// Parsing or conversion\nfinal LocalDateTime dt = LocalDateTime.parse(&quot;2014-04-08 12:30&quot;, formatter)\n</code></pre>\n<p><code>dt</code> should allow you to all date-time related operations</p>\n<blockquote>\n<p>How can I then convert the LocalDateTime instance back to a string with the same format?</p>\n</blockquote>\n<pre><code>final String date = dt.format(formatter) \n</code></pre>\n"},{"tags":[],"owner":{"account_id":202467,"reputation":9985,"user_id":449553,"accept_rate":54,"display_name":"msangel"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1668304444,"creation_date":1612143269,"answer_id":65986086,"question_id":22463062,"body_markdown":"All the answers are good. The Java 8+ versions have these patterns for parsing and formatting time zones: `V`, `z`, `O`, `X`, `x`, `Z`.\r\n\r\nHere&#39;s they are, for **parsing**, according to rules from the documentation:\r\n\r\n```lang-none\r\n   Symbol  Meaning                     Presentation      Examples\r\n   ------  -------                     ------------      -------\r\n   V       time-zone ID                zone-id           America/Los_Angeles; Z; -08:30\r\n   z       time-zone name              zone-name         Pacific Standard Time; PST\r\n   O       localized zone-offset       offset-O          GMT+8; GMT+08:00; UTC-08:00;\r\n   X       zone-offset &#39;Z&#39; for zero    offset-X          Z; -08; -0830; -08:30; -083015; -08:30:15;\r\n   x       zone-offset                 offset-x          +0000; -08; -0830; -08:30; -083015; -08:30:15;\r\n   Z       zone-offset                 offset-Z          +0000; -0800; -08:00;\r\n```\r\n\r\nBut how about **formatting**?\r\n\r\nHere&#39;s a sample for a date (assuming `ZonedDateTime`) that show these patters behavior for different formatting patters:\r\n\r\n```java\r\n// The helper function:\r\nstatic void printInPattern(ZonedDateTime dt, String pattern) {\r\n    System.out.println(pattern + &quot;: &quot; + dt.format(DateTimeFormatter.ofPattern(pattern)));\r\n}\r\n\r\n// The date:\r\nString strDate = &quot;2020-11-03 16:40:44 America/Los_Angeles&quot;;\r\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss zzzz&quot;);\r\nZonedDateTime dt = ZonedDateTime.parse(strDate, format);\r\n// 2020-11-03T16:40:44-08:00[America/Los_Angeles]\r\n\r\n// Rules:\r\n// printInPattern(dt, &quot;V&quot;);     // exception!\r\nprintInPattern(dt, &quot;VV&quot;);       // America/Los_Angeles\r\n// printInPattern(dt, &quot;VVV&quot;);   // exception!\r\n// printInPattern(dt, &quot;VVVV&quot;);  // exception!\r\nprintInPattern(dt, &quot;z&quot;);        // PST\r\nprintInPattern(dt, &quot;zz&quot;);       // PST\r\nprintInPattern(dt, &quot;zzz&quot;);      // PST\r\nprintInPattern(dt, &quot;zzzz&quot;);     // Pacific Standard Time\r\nprintInPattern(dt, &quot;O&quot;);        // GMT-8\r\n// printInPattern(dt, &quot;OO&quot;);    // exception!\r\n// printInPattern(dt, &quot;OO0&quot;);   // exception!\r\nprintInPattern(dt, &quot;OOOO&quot;);     // GMT-08:00\r\nprintInPattern(dt, &quot;X&quot;);        // -08\r\nprintInPattern(dt, &quot;XX&quot;);       // -0800\r\nprintInPattern(dt, &quot;XXX&quot;);      // -08:00\r\nprintInPattern(dt, &quot;XXXX&quot;);     // -0800\r\nprintInPattern(dt, &quot;XXXXX&quot;);    // -08:00\r\nprintInPattern(dt, &quot;x&quot;);        // -08\r\nprintInPattern(dt, &quot;xx&quot;);       // -0800\r\nprintInPattern(dt, &quot;xxx&quot;);      // -08:00\r\nprintInPattern(dt, &quot;xxxx&quot;);     // -0800\r\nprintInPattern(dt, &quot;xxxxx&quot;);    // -08:00\r\nprintInPattern(dt, &quot;Z&quot;);        // -0800\r\nprintInPattern(dt, &quot;ZZ&quot;);       // -0800\r\nprintInPattern(dt, &quot;ZZZ&quot;);      // -0800\r\nprintInPattern(dt, &quot;ZZZZ&quot;);     // GMT-08:00\r\nprintInPattern(dt, &quot;ZZZZZ&quot;);    // -08:00\r\n```\r\n\r\nIn the case of positive offset, the `+` sign character is used everywhere (where there is `-` now) and never omitted.\r\n\r\nThis well works for new `java.time` types. If you&#39;re about to use these for `java.util.Date` or `java.util.Calendar` - not all going to work as those types are broken (and so marked as deprecated, please don&#39;t use them).\r\n\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>All the answers are good. The Java 8+ versions have these patterns for parsing and formatting time zones: <code>V</code>, <code>z</code>, <code>O</code>, <code>X</code>, <code>x</code>, <code>Z</code>.</p>\n<p>Here's they are, for <strong>parsing</strong>, according to rules from the documentation:</p>\n<pre class=\"lang-none prettyprint-override\"><code>   Symbol  Meaning                     Presentation      Examples\n   ------  -------                     ------------      -------\n   V       time-zone ID                zone-id           America/Los_Angeles; Z; -08:30\n   z       time-zone name              zone-name         Pacific Standard Time; PST\n   O       localized zone-offset       offset-O          GMT+8; GMT+08:00; UTC-08:00;\n   X       zone-offset 'Z' for zero    offset-X          Z; -08; -0830; -08:30; -083015; -08:30:15;\n   x       zone-offset                 offset-x          +0000; -08; -0830; -08:30; -083015; -08:30:15;\n   Z       zone-offset                 offset-Z          +0000; -0800; -08:00;\n</code></pre>\n<p>But how about <strong>formatting</strong>?</p>\n<p>Here's a sample for a date (assuming <code>ZonedDateTime</code>) that show these patters behavior for different formatting patters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// The helper function:\nstatic void printInPattern(ZonedDateTime dt, String pattern) {\n    System.out.println(pattern + &quot;: &quot; + dt.format(DateTimeFormatter.ofPattern(pattern)));\n}\n\n// The date:\nString strDate = &quot;2020-11-03 16:40:44 America/Los_Angeles&quot;;\nDateTimeFormatter format = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss zzzz&quot;);\nZonedDateTime dt = ZonedDateTime.parse(strDate, format);\n// 2020-11-03T16:40:44-08:00[America/Los_Angeles]\n\n// Rules:\n// printInPattern(dt, &quot;V&quot;);     // exception!\nprintInPattern(dt, &quot;VV&quot;);       // America/Los_Angeles\n// printInPattern(dt, &quot;VVV&quot;);   // exception!\n// printInPattern(dt, &quot;VVVV&quot;);  // exception!\nprintInPattern(dt, &quot;z&quot;);        // PST\nprintInPattern(dt, &quot;zz&quot;);       // PST\nprintInPattern(dt, &quot;zzz&quot;);      // PST\nprintInPattern(dt, &quot;zzzz&quot;);     // Pacific Standard Time\nprintInPattern(dt, &quot;O&quot;);        // GMT-8\n// printInPattern(dt, &quot;OO&quot;);    // exception!\n// printInPattern(dt, &quot;OO0&quot;);   // exception!\nprintInPattern(dt, &quot;OOOO&quot;);     // GMT-08:00\nprintInPattern(dt, &quot;X&quot;);        // -08\nprintInPattern(dt, &quot;XX&quot;);       // -0800\nprintInPattern(dt, &quot;XXX&quot;);      // -08:00\nprintInPattern(dt, &quot;XXXX&quot;);     // -0800\nprintInPattern(dt, &quot;XXXXX&quot;);    // -08:00\nprintInPattern(dt, &quot;x&quot;);        // -08\nprintInPattern(dt, &quot;xx&quot;);       // -0800\nprintInPattern(dt, &quot;xxx&quot;);      // -08:00\nprintInPattern(dt, &quot;xxxx&quot;);     // -0800\nprintInPattern(dt, &quot;xxxxx&quot;);    // -08:00\nprintInPattern(dt, &quot;Z&quot;);        // -0800\nprintInPattern(dt, &quot;ZZ&quot;);       // -0800\nprintInPattern(dt, &quot;ZZZ&quot;);      // -0800\nprintInPattern(dt, &quot;ZZZZ&quot;);     // GMT-08:00\nprintInPattern(dt, &quot;ZZZZZ&quot;);    // -08:00\n</code></pre>\n<p>In the case of positive offset, the <code>+</code> sign character is used everywhere (where there is <code>-</code> now) and never omitted.</p>\n<p>This well works for new <code>java.time</code> types. If you're about to use these for <code>java.util.Date</code> or <code>java.util.Calendar</code> - not all going to work as those types are broken (and so marked as deprecated, please don't use them).</p>\n"},{"tags":[],"owner":{"account_id":3095876,"reputation":131,"user_id":2621070,"display_name":"Yu Cheng"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1616572133,"creation_date":1616572133,"answer_id":66776743,"question_id":22463062,"body_markdown":"Another thing to note with `LocalDateTime.parse` is that you cannot use it with a custom formatter with only date formatter characters, such as `uuuuMMdd`. In this case, you should use `LocalDate.parse` instead. For example:\r\n```\r\nString s = &quot;20210223&quot;;\r\n        \r\n// ok\r\nLocalDate.parse(s, DateTimeFormatter.ofPattern(&quot;uuuuMMdd&quot;));\r\n        \r\n// java.time.format.DateTimeParseException\r\nLocalDateTime.parse(s, DateTimeFormatter.ofPattern(&quot;uuuuMMdd&quot;)); \r\n```","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>Another thing to note with <code>LocalDateTime.parse</code> is that you cannot use it with a custom formatter with only date formatter characters, such as <code>uuuuMMdd</code>. In this case, you should use <code>LocalDate.parse</code> instead. For example:</p>\n<pre><code>String s = &quot;20210223&quot;;\n        \n// ok\nLocalDate.parse(s, DateTimeFormatter.ofPattern(&quot;uuuuMMdd&quot;));\n        \n// java.time.format.DateTimeParseException\nLocalDateTime.parse(s, DateTimeFormatter.ofPattern(&quot;uuuuMMdd&quot;)); \n</code></pre>\n"},{"tags":[],"owner":{"account_id":17426473,"reputation":990,"user_id":12631293,"display_name":"Tomasz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1668304343,"creation_date":1663933041,"answer_id":73827102,"question_id":22463062,"body_markdown":"The &lt;b&gt;universal method &lt;/b&gt; looks as below. It works for:\r\n\r\n - yyyy-MM-dd HH:mm:ss.SSS\r\n - yyyy-MM-dd HH:mm:ss.S\r\n - yyyy-MM-dd HH:mm:ss\r\n - yyyy-MM-dd HH:mm\r\n - yyyy-MM-dd HH\r\n - yyyy-MM-dd\r\n\r\n\r\n       public static final String DATE_FORMAT_YYYY_MM_DD_HH_MM_SS_SSS = &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;;\r\n\r\n       public LocalDateTime stringToLocalDateTime(String s){\r\n           return LocalDateTime.parse(s, DateTimeFormatter.ofPattern(DATE_FORMAT_YYYY_MM_DD_HH_MM_SS_SSS.substring(0, s.length())));\r\n       }\r\n\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>The <b>universal method </b> looks as below. It works for:</p>\n<ul>\n<li><p>yyyy-MM-dd HH:mm:ss.SSS</p>\n</li>\n<li><p>yyyy-MM-dd HH:mm:ss.S</p>\n</li>\n<li><p>yyyy-MM-dd HH:mm:ss</p>\n</li>\n<li><p>yyyy-MM-dd HH:mm</p>\n</li>\n<li><p>yyyy-MM-dd HH</p>\n</li>\n<li><p>yyyy-MM-dd</p>\n<pre><code>public static final String DATE_FORMAT_YYYY_MM_DD_HH_MM_SS_SSS = &quot;yyyy-MM-dd HH:mm:ss.SSS&quot;;\n\npublic LocalDateTime stringToLocalDateTime(String s){\n    return LocalDateTime.parse(s, DateTimeFormatter.ofPattern(DATE_FORMAT_YYYY_MM_DD_HH_MM_SS_SSS.substring(0, s.length())));\n}\n</code></pre>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73027,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1673284263,"creation_date":1673284263,"answer_id":75060742,"question_id":22463062,"body_markdown":"There are already many good answers to this question. This answer shows how to use predefined `DateTimeFormatter`s to build a `DateTimeFormatter` which can parse the given date-time string.\r\n\r\nHowever, formatting the obtained `LocalDateTime` using this `DateTimeFormatter` will return a string with time in `HH:mm:ss` format. To restrict the time string to `HH:mm` format, we still have to use the pattern `uuuu-MM-dd HH:mm` as other answers have done.\r\n\r\n**Demo**:\r\n    \r\n    class Main {\r\n        public static void main(String[] args) {\r\n            DateTimeFormatter dtf = new DateTimeFormatterBuilder()\r\n                    .append(DateTimeFormatter.ISO_LOCAL_DATE)\r\n                    .appendLiteral(&#39; &#39;)\r\n                    .append(DateTimeFormatter.ISO_LOCAL_TIME)\r\n                    .toFormatter(Locale.ENGLISH);\r\n    \r\n            String strDateTime = &quot;2014-04-08 12:30&quot;;\r\n            LocalDateTime ldt = LocalDateTime.parse(strDateTime, dtf);\r\n            System.out.println(ldt);\r\n    \r\n            // However, formatting the obtained LocalDateTime using this DateTimeFormatter\r\n            // will return a string with time in HH:mm:ss format. To restrict the time\r\n            // string to HH:mm format, we still have to use the pattern, uuuu-MM-dd HH:mm as\r\n            // other answers have done.\r\n            String strDateTimeFormatted = ldt.format(dtf);\r\n            System.out.println(strDateTimeFormatted);\r\n    \r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm&quot;, Locale.ENGLISH);\r\n            strDateTimeFormatted = ldt.format(formatter);\r\n            System.out.println(strDateTimeFormatted);\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    2014-04-08T12:30\r\n    2014-04-08 12:30:00\r\n    2014-04-08 12:30\r\n\r\n[&lt;kbd&gt;ONLINE DEMO&lt;/kbd&gt;](https://ideone.com/kkeDDp)\r\n\r\n**Note**: Here, you can use `y` instead of `u` but [I prefer](https://stackoverflow.com/a/65928023/10819573) `u` to `y`.\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>There are already many good answers to this question. This answer shows how to use predefined <code>DateTimeFormatter</code>s to build a <code>DateTimeFormatter</code> which can parse the given date-time string.</p>\n<p>However, formatting the obtained <code>LocalDateTime</code> using this <code>DateTimeFormatter</code> will return a string with time in <code>HH:mm:ss</code> format. To restrict the time string to <code>HH:mm</code> format, we still have to use the pattern <code>uuuu-MM-dd HH:mm</code> as other answers have done.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        DateTimeFormatter dtf = new DateTimeFormatterBuilder()\n                .append(DateTimeFormatter.ISO_LOCAL_DATE)\n                .appendLiteral(' ')\n                .append(DateTimeFormatter.ISO_LOCAL_TIME)\n                .toFormatter(Locale.ENGLISH);\n\n        String strDateTime = &quot;2014-04-08 12:30&quot;;\n        LocalDateTime ldt = LocalDateTime.parse(strDateTime, dtf);\n        System.out.println(ldt);\n\n        // However, formatting the obtained LocalDateTime using this DateTimeFormatter\n        // will return a string with time in HH:mm:ss format. To restrict the time\n        // string to HH:mm format, we still have to use the pattern, uuuu-MM-dd HH:mm as\n        // other answers have done.\n        String strDateTimeFormatted = ldt.format(dtf);\n        System.out.println(strDateTimeFormatted);\n\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd HH:mm&quot;, Locale.ENGLISH);\n        strDateTimeFormatted = ldt.format(formatter);\n        System.out.println(strDateTimeFormatted);\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>2014-04-08T12:30\n2014-04-08 12:30:00\n2014-04-08 12:30\n</code></pre>\n<p><a href=\"https://ideone.com/kkeDDp\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p><strong>Note</strong>: Here, you can use <code>y</code> instead of <code>u</code> but <a href=\"https://stackoverflow.com/a/65928023/10819573\">I prefer</a> <code>u</code> to <code>y</code>.</p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"},{"tags":[],"owner":{"account_id":23702196,"reputation":23,"user_id":17725220,"display_name":"Mady"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698405769,"creation_date":1698405769,"answer_id":77373764,"question_id":22463062,"body_markdown":"When I have a variable of type `java.time.LocalDateTime` to get the date with a desirable format and I don&#39;t want to use intermediate classes, I just do:\r\n\r\n``` java \r\nLocalDateTime nowDate = LocalDateTime.now();\r\nString nowDateInString = nowDate.toString().substring(0,16).replace(&quot;T&quot;, &quot; &quot;);\r\n\r\n\r\n```\r\n\r\nThe value of nowDateInString : 2023-10-27 11:17\r\n\r\nYou can adjust the value in &#39;substring&#39; to retrieve what you want.\r\n\r\n\r\nI would like to point out that this is not a suitable method in every situation.","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>When I have a variable of type <code>java.time.LocalDateTime</code> to get the date with a desirable format and I don't want to use intermediate classes, I just do:</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime nowDate = LocalDateTime.now();\nString nowDateInString = nowDate.toString().substring(0,16).replace(&quot;T&quot;, &quot; &quot;);\n\n\n</code></pre>\n<p>The value of nowDateInString : 2023-10-27 11:17</p>\n<p>You can adjust the value in 'substring' to retrieve what you want.</p>\n<p>I would like to point out that this is not a suitable method in every situation.</p>\n"}],"owner":{"account_id":1129042,"reputation":48134,"user_id":1115554,"accept_rate":100,"display_name":"micha"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":918958,"favorite_count":0,"down_vote_count":0,"up_vote_count":476,"accepted_answer_id":22463063,"answer_count":12,"score":476,"last_activity_date":1698405769,"creation_date":1395082802,"question_id":22463062,"body_markdown":"Java 8 added a new [*java.time*][1] API for working with dates and times ([JSR 310][2]).\r\n\r\nI have date and time as string (e.g., `&quot;2014-04-08 12:30&quot;`). How can I obtain a [`LocalDateTime`][3] instance from the given string?\r\n\r\nAfter I finished working with the `LocalDateTime` object: How can I then convert the `LocalDateTime` instance back to a string with the same format as shown above?\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\r\n  [2]: https://jcp.org/en/jsr/detail?id=310\r\n  [3]: https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\r\n","title":"How can I parse/format dates with LocalDateTime? (Java 8)","body":"<p>Java 8 added a new <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html\" rel=\"noreferrer\"><em>java.time</em></a> API for working with dates and times (<a href=\"https://jcp.org/en/jsr/detail?id=310\" rel=\"noreferrer\">JSR 310</a>).</p>\n<p>I have date and time as string (e.g., <code>&quot;2014-04-08 12:30&quot;</code>). How can I obtain a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/LocalDateTime.html\" rel=\"noreferrer\"><code>LocalDateTime</code></a> instance from the given string?</p>\n<p>After I finished working with the <code>LocalDateTime</code> object: How can I then convert the <code>LocalDateTime</code> instance back to a string with the same format as shown above?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":14915510,"reputation":396,"user_id":14674015,"display_name":"seism0saurus"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1612519653,"creation_date":1612519653,"answer_id":66061275,"question_id":66060750,"body_markdown":"```java\r\nconfig.setAllowedOrigins(Collections.singletonList(&quot;*&quot;));\r\n```\r\nThis line has to be changed. You should list all servers, that should have access to your application.\r\n\r\nE.g. you use angular, so the development server for the frontend is http://localhost:4200. Your server in production is https://you.server.domain.com\r\n\r\nThen your config List should look like this\r\n```java\r\nconfig.setAllowedOrigins(List.of(&quot;http://localhost:4200&quot;,&quot;https://you.server.domain.com&quot;));\r\n```","title":"Cors Error when using CorsFilter and spring security","body":"<pre class=\"lang-java prettyprint-override\"><code>config.setAllowedOrigins(Collections.singletonList(&quot;*&quot;));\n</code></pre>\n<p>This line has to be changed. You should list all servers, that should have access to your application.</p>\n<p>E.g. you use angular, so the development server for the frontend is http://localhost:4200. Your server in production is <a href=\"https://you.server.domain.com\" rel=\"noreferrer\">https://you.server.domain.com</a></p>\n<p>Then your config List should look like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>config.setAllowedOrigins(List.of(&quot;http://localhost:4200&quot;,&quot;https://you.server.domain.com&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10210263,"reputation":1591,"user_id":7537636,"accept_rate":33,"display_name":"stodi"},"down_vote_count":0,"up_vote_count":62,"is_accepted":true,"score":62,"last_activity_date":1612520127,"creation_date":1612520127,"answer_id":66061397,"question_id":66060750,"body_markdown":"Use `config.setAllowedOriginPatterns(&quot;*&quot;)` instead of `config.setAllowedOrigins(Collections.singletonList(&quot;*&quot;));`","title":"Cors Error when using CorsFilter and spring security","body":"<p>Use <code>config.setAllowedOriginPatterns(&quot;*&quot;)</code> instead of <code>config.setAllowedOrigins(Collections.singletonList(&quot;*&quot;));</code></p>\n"},{"tags":[],"owner":{"account_id":12392832,"reputation":60,"user_id":13082557,"display_name":"Ken Che"},"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1640832239,"creation_date":1625126956,"answer_id":68206561,"question_id":66060750,"body_markdown":"This cannot set to true when you want to have the wildcard &quot;*&quot; in your origin.   \r\n\r\n    config.setAllowCredentials(true);\r\n\r\nSo just remove it","title":"Cors Error when using CorsFilter and spring security","body":"<p>This cannot set to true when you want to have the wildcard &quot;*&quot; in your origin.</p>\n<pre><code>config.setAllowCredentials(true);\n</code></pre>\n<p>So just remove it</p>\n"},{"tags":[],"owner":{"account_id":12418673,"reputation":61,"user_id":9046772,"display_name":"风吹过的烟花"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1632675393,"creation_date":1632672400,"answer_id":69336673,"question_id":66060750,"body_markdown":"if project use port 4000, yml config\r\n\r\n    allowedOrigins:\r\n      - &quot;http://localhost:4000&quot;\r\n\r\nhttp://localhost:4000 replace *  \r\nspring document:https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#cors-configuration","title":"Cors Error when using CorsFilter and spring security","body":"<p>if project use port 4000, yml config</p>\n<pre><code>allowedOrigins:\n  - &quot;http://localhost:4000&quot;\n</code></pre>\n<p>http://localhost:4000 replace *<br />\nspring document:<a href=\"https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#cors-configuration\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-cloud-gateway/docs/current/reference/html/#cors-configuration</a></p>\n"},{"tags":[],"owner":{"account_id":16896290,"reputation":9,"user_id":12218735,"display_name":"umamaheshwar thati"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1654681342,"creation_date":1654681144,"answer_id":72543397,"question_id":66060750,"body_markdown":"Q:allowCredentials is true, allowedOrigins cannot contain the special value since that cannot\r\n\r\nthis can help for to resolve the issue :https://chowdera.com/2022/03/202203082045152102.html\r\n\r\nterms of settlement\r\nCross domain configuration error , take .allowedOrigins Replace with .allowedOriginPatterns that will do .\r\n@Configuration\r\npublic class CorsConfig {\r\n    \r\n    private CorsConfiguration buildConfig() {\r\n    \r\n        CorsConfiguration corsConfiguration = new CorsConfiguration();\r\n        //corsConfiguration.addAllowedOrigin(&quot;*&quot;);\r\n        //  Cross domain configuration error , take .allowedOrigins Replace with .allowedOriginPatterns that will do .\r\n        //  Set the domain name that allows cross domain requests \r\n        corsConfiguration.addAllowedOriginPattern(&quot;*&quot;);\r\n        corsConfiguration.addAllowedHeader(&quot;*&quot;);\r\n        //  Set allowed methods \r\n        corsConfiguration.addAllowedMethod(&quot;*&quot;);\r\n        //  Whether to allow certificates \r\n        corsConfiguration.setAllowCredentials(true);\r\n        //  Cross domain allow time \r\n        corsConfiguration.setMaxAge(3600L);\r\n        return corsConfiguration;\r\n    }\r\n\r\n    @Bean\r\n    public CorsFilter corsFilter() {\r\n    \r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, buildConfig());\r\n        return new CorsFilter(source);\r\n    }\r\n\r\n}\r\nclass:If through the realization of WebMvcConfigurer The form of the interface , Modify as follows ：\r\n@Configuration\r\npublic class CorsConfig implements WebMvcConfigurer {\r\n    \r\n\r\n    /** *  Turn on cross domain  */\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n    \r\n        //  Set routes that allow cross domain routing \r\n        registry.addMapping(&quot;/**&quot;)\r\n                //  Set the domain name that allows cross domain requests \r\n                //.allowedOrigins(&quot;*&quot;)  \r\n                // Cross domain configuration error , take .allowedOrigins Replace with .allowedOriginPatterns that will do .\r\n                .allowedOriginPatterns(&quot;*&quot;)\r\n                //  Whether to allow certificates （cookies）\r\n                .allowCredentials(true)\r\n                //  Set allowed methods \r\n                .allowedMethods(&quot;*&quot;)\r\n                //  Cross domain allow time \r\n                .maxAge(3600);\r\n    }\r\n\r\n}\r\n","title":"Cors Error when using CorsFilter and spring security","body":"<p>Q:allowCredentials is true, allowedOrigins cannot contain the special value since that cannot</p>\n<p>this can help for to resolve the issue :<a href=\"https://chowdera.com/2022/03/202203082045152102.html\" rel=\"nofollow noreferrer\">https://chowdera.com/2022/03/202203082045152102.html</a></p>\n<p>terms of settlement\nCross domain configuration error , take .allowedOrigins Replace with .allowedOriginPatterns that will do .\n@Configuration\npublic class CorsConfig {</p>\n<pre><code>private CorsConfiguration buildConfig() {\n\n    CorsConfiguration corsConfiguration = new CorsConfiguration();\n    //corsConfiguration.addAllowedOrigin(&quot;*&quot;);\n    //  Cross domain configuration error , take .allowedOrigins Replace with .allowedOriginPatterns that will do .\n    //  Set the domain name that allows cross domain requests \n    corsConfiguration.addAllowedOriginPattern(&quot;*&quot;);\n    corsConfiguration.addAllowedHeader(&quot;*&quot;);\n    //  Set allowed methods \n    corsConfiguration.addAllowedMethod(&quot;*&quot;);\n    //  Whether to allow certificates \n    corsConfiguration.setAllowCredentials(true);\n    //  Cross domain allow time \n    corsConfiguration.setMaxAge(3600L);\n    return corsConfiguration;\n}\n\n@Bean\npublic CorsFilter corsFilter() {\n\n    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n    source.registerCorsConfiguration(&quot;/**&quot;, buildConfig());\n    return new CorsFilter(source);\n}\n</code></pre>\n<p>}\nclass:If through the realization of WebMvcConfigurer The form of the interface , Modify as follows ：\n@Configuration\npublic class CorsConfig implements WebMvcConfigurer {</p>\n<pre><code>/** *  Turn on cross domain  */\n@Override\npublic void addCorsMappings(CorsRegistry registry) {\n\n    //  Set routes that allow cross domain routing \n    registry.addMapping(&quot;/**&quot;)\n            //  Set the domain name that allows cross domain requests \n            //.allowedOrigins(&quot;*&quot;)  \n            // Cross domain configuration error , take .allowedOrigins Replace with .allowedOriginPatterns that will do .\n            .allowedOriginPatterns(&quot;*&quot;)\n            //  Whether to allow certificates （cookies）\n            .allowCredentials(true)\n            //  Set allowed methods \n            .allowedMethods(&quot;*&quot;)\n            //  Cross domain allow time \n            .maxAge(3600);\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":15990293,"reputation":69,"user_id":11539668,"display_name":"N&#39;bia"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698405642,"creation_date":1698405642,"answer_id":77373745,"question_id":66060750,"body_markdown":"There is a fully sample that works fine for me.\r\n\r\n```\r\n    @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n        final CorsConfiguration configuration = new CorsConfiguration();\r\n        configuration.setAllowedOriginPatterns(Collections.singletonList(&quot;*&quot;));\r\n        configuration.setAllowedMethods(Arrays.asList(&quot;HEAD&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTION&quot;));\r\n        configuration.setAllowCredentials(true);\r\n        configuration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Cache-Control&quot;, &quot;Content-Type&quot;));\r\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\r\n        return source;\r\n    }\r\n\r\n```","title":"Cors Error when using CorsFilter and spring security","body":"<p>There is a fully sample that works fine for me.</p>\n<pre><code>    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        final CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowedOriginPatterns(Collections.singletonList(&quot;*&quot;));\n        configuration.setAllowedMethods(Arrays.asList(&quot;HEAD&quot;, &quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;, &quot;OPTION&quot;));\n        configuration.setAllowCredentials(true);\n        configuration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Cache-Control&quot;, &quot;Content-Type&quot;));\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n\n</code></pre>\n"}],"owner":{"account_id":5144135,"reputation":2717,"user_id":4120583,"accept_rate":29,"display_name":"Hikaru Shindo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46943,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"accepted_answer_id":66061397,"answer_count":6,"score":30,"last_activity_date":1698405642,"creation_date":1612517373,"question_id":66060750,"body_markdown":"I&#39;m building an API Service using Spring Boot. It uses Basic Auth for the authentication. When clients try to connect to the API, they will get **CORS error**.\r\n\r\nOn the Spring Boot, it throws error \r\n\r\n&gt; java.lang.IllegalArgumentException: When allowCredentials is true,\r\n&gt; allowedOrigins cannot contain the special value &quot;*&quot;since that cannot\r\n&gt; be set on the &quot;Access-Control-Allow-Origin&quot; response header. To allow\r\n&gt; credentials to a set of origins, list them explicitly or consider\r\n&gt; using &quot;allowedOriginPatterns&quot; instead.\r\n\r\nI have tried to find the example of **allowedOriginPatterns** usage but not found yet. Even for its document -https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/CorsRegistration.html#allowedOriginPatterns-java.lang.String... I still don&#39;t know what is the pattern I have to put inside **config.allowedOriginPatterns();**\r\n\r\nBelow is my CorsFilter code,\r\n\r\n    @Configuration\r\n    public class RequestCorsFilter {\r\n\r\n        @Bean\r\n        public CorsFilter corsFilter() {\r\n            final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\r\n            CorsConfiguration config = new CorsConfiguration();\r\n            config.setAllowCredentials(true);\r\n            config.setAllowedOrigins(Collections.singletonList(&quot;*&quot;));\r\n            config.setAllowedHeaders(Arrays.asList(&quot;Origin&quot;, &quot;Content-Type&quot;, &quot;Accept&quot;, &quot;responseType&quot;, &quot;Authorization&quot;));\r\n            config.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;OPTIONS&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\r\n            source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n            return new CorsFilter(source);\r\n        }      \r\n\r\n    }\r\n\r\nAnd here is my Authentication code,\r\n\r\n    @Configuration\r\n    @EnableWebSecurity\r\n    public class AuthenConfiguration extends WebSecurityConfigurerAdapter {\r\n\r\n        @Autowired\r\n        public void configureGlobal(AuthenticationManagerBuilder auth)\r\n            throws Exception {\r\n        auth\r\n        .inMemoryAuthentication()\r\n        .withUser(&quot;thor&quot;).password(&quot;{noop}P@ssw00rd&quot;)\r\n        .authorities(&quot;USER&quot;);\r\n        }\r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n\r\n            String[] AUTH_WHITELIST = {\r\n                // -- swagger ui\r\n                &quot;/v2/api-docs&quot;, \r\n                &quot;/swagger-resources/**&quot;, \r\n                &quot;/configuration/ui&quot;,\r\n                &quot;/configuration/security&quot;, \r\n                &quot;/swagger-ui.html&quot;,\r\n                &quot;/webjars/**&quot;\r\n            };\r\n\r\n            http\r\n                .csrf().disable()\r\n                .authorizeRequests()\r\n                .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\r\n                .antMatchers(AUTH_WHITELIST).permitAll() // whitelist URL permitted\r\n                .antMatchers(&quot;/api&quot;).authenticated(); // others need auth\r\n        }\r\n    \r\n    }\r\n\r\n\r\n","title":"Cors Error when using CorsFilter and spring security","body":"<p>I'm building an API Service using Spring Boot. It uses Basic Auth for the authentication. When clients try to connect to the API, they will get <strong>CORS error</strong>.</p>\n<p>On the Spring Boot, it throws error</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: When allowCredentials is true,\nallowedOrigins cannot contain the special value &quot;*&quot;since that cannot\nbe set on the &quot;Access-Control-Allow-Origin&quot; response header. To allow\ncredentials to a set of origins, list them explicitly or consider\nusing &quot;allowedOriginPatterns&quot; instead.</p>\n</blockquote>\n<p>I have tried to find the example of <strong>allowedOriginPatterns</strong> usage but not found yet. Even for its document -https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/config/annotation/CorsRegistration.html#allowedOriginPatterns-java.lang.String... I still don't know what is the pattern I have to put inside <strong>config.allowedOriginPatterns();</strong></p>\n<p>Below is my CorsFilter code,</p>\n<pre><code>@Configuration\npublic class RequestCorsFilter {\n\n    @Bean\n    public CorsFilter corsFilter() {\n        final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        CorsConfiguration config = new CorsConfiguration();\n        config.setAllowCredentials(true);\n        config.setAllowedOrigins(Collections.singletonList(&quot;*&quot;));\n        config.setAllowedHeaders(Arrays.asList(&quot;Origin&quot;, &quot;Content-Type&quot;, &quot;Accept&quot;, &quot;responseType&quot;, &quot;Authorization&quot;));\n        config.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;OPTIONS&quot;, &quot;DELETE&quot;, &quot;PATCH&quot;));\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n        return new CorsFilter(source);\n    }      \n\n}\n</code></pre>\n<p>And here is my Authentication code,</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class AuthenConfiguration extends WebSecurityConfigurerAdapter {\n\n    @Autowired\n    public void configureGlobal(AuthenticationManagerBuilder auth)\n        throws Exception {\n    auth\n    .inMemoryAuthentication()\n    .withUser(&quot;thor&quot;).password(&quot;{noop}P@ssw00rd&quot;)\n    .authorities(&quot;USER&quot;);\n    }\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n\n        String[] AUTH_WHITELIST = {\n            // -- swagger ui\n            &quot;/v2/api-docs&quot;, \n            &quot;/swagger-resources/**&quot;, \n            &quot;/configuration/ui&quot;,\n            &quot;/configuration/security&quot;, \n            &quot;/swagger-ui.html&quot;,\n            &quot;/webjars/**&quot;\n        };\n\n        http\n            .csrf().disable()\n            .authorizeRequests()\n            .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()\n            .antMatchers(AUTH_WHITELIST).permitAll() // whitelist URL permitted\n            .antMatchers(&quot;/api&quot;).authenticated(); // others need auth\n    }\n\n}\n</code></pre>\n"},{"tags":["java","gradle","annotation-processing"],"comments":[{"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"score":0,"creation_date":1662120980,"post_id":73582281,"comment_id":129938520,"body_markdown":"I doubt this is a Spring Boot problem as your tags suggest. More likely the Jar2exe step. Is it really `org.springframework.boot.configurationprocessor.json.JSONObject`?","body":"I doubt this is a Spring Boot problem as your tags suggest. More likely the Jar2exe step. Is it really <code>org.springframework.boot.configurationprocessor.json.JSONObj&zwnj;&#8203;ect</code>?"},{"owner":{"account_id":3274297,"reputation":1267,"user_id":2756820,"accept_rate":96,"display_name":"Ram"},"score":0,"creation_date":1662121210,"post_id":73582281,"comment_id":129938602,"body_markdown":"Yes it is. This is on top: import org.springframework.boot.configurationprocessor.json.JSONObject;","body":"Yes it is. This is on top: import org.springframework.boot.configurationprocessor.json.JSONObj&zwnj;&#8203;ect;"},{"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"score":0,"creation_date":1662122580,"post_id":73582281,"comment_id":129939053,"body_markdown":"Which version of Spring do you use? How does your build.gradle file looks like?","body":"Which version of Spring do you use? How does your build.gradle file looks like?"},{"owner":{"account_id":1674328,"reputation":2653,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1662125964,"post_id":73582281,"comment_id":129940399,"body_markdown":"This means that some classes/jars are not included in your exe file. You probably get  the non complete jar (fatJar) or jar2exe removes some when building.","body":"This means that some classes/jars are not included in your exe file. You probably get  the non complete jar (fatJar) or jar2exe removes some when building."},{"owner":{"account_id":3274297,"reputation":1267,"user_id":2756820,"accept_rate":96,"display_name":"Ram"},"score":0,"creation_date":1662126318,"post_id":73582281,"comment_id":129940531,"body_markdown":"@Nemanja Added build.gradle details","body":"@Nemanja Added build.gradle details"},{"owner":{"account_id":3274297,"reputation":1267,"user_id":2756820,"accept_rate":96,"display_name":"Ram"},"score":0,"creation_date":1662126434,"post_id":73582281,"comment_id":129940568,"body_markdown":"@grekier It is a fat jar with 43 MB file. Plain jar size is few kb. Exe size is 43 MB","body":"@grekier It is a fat jar with 43 MB file. Plain jar size is few kb. Exe size is 43 MB"},{"owner":{"account_id":1674328,"reputation":2653,"user_id":1540177,"display_name":"grekier"},"score":0,"creation_date":1662126992,"post_id":73582281,"comment_id":129940794,"body_markdown":"exe should be bigger since I guess it should include JVM as well. I don&#39;t know jar2exe so I can&#39;t be sure... Have you eventually looked at building the app natively to avoid it?","body":"exe should be bigger since I guess it should include JVM as well. I don&#39;t know jar2exe so I can&#39;t be sure... Have you eventually looked at building the app natively to avoid it?"},{"owner":{"account_id":3274297,"reputation":1267,"user_id":2756820,"accept_rate":96,"display_name":"Ram"},"score":0,"creation_date":1662127734,"post_id":73582281,"comment_id":129941118,"body_markdown":"@grekier jar2exe does not package JRE. It provides parameters which allows us to use a JVM in a folder or default java installation.","body":"@grekier jar2exe does not package JRE. It provides parameters which allows us to use a JVM in a folder or default java installation."},{"owner":{"account_id":237529,"reputation":18988,"user_id":2621917,"accept_rate":80,"display_name":"Michael Piefel"},"score":0,"creation_date":1662534094,"post_id":73582281,"comment_id":130024455,"body_markdown":"Why does `compileOnly` extend from `annotationProcessor`? Aren’t both predefined and should not be tampered with?","body":"Why does <code>compileOnly</code> extend from <code>annotationProcessor</code>? Aren’t both predefined and should not be tampered with?"}],"answers":[{"tags":[],"owner":{"account_id":7739148,"reputation":3345,"user_id":5859654,"display_name":"Nemanja"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1662127676,"creation_date":1662127676,"answer_id":73583835,"question_id":73582281,"body_markdown":"This comes from your build.gradle:\r\n\r\n    annotationProcessor &#39;org.springframework.boot:spring-boot-configuration-processor&#39;\r\n\r\nSince you have declared as `compileOnly` here:\r\n\r\n    configurations {\r\n        compileOnly {\r\n            extendsFrom annotationProcessor\r\n        }\r\n    }\r\n\r\nbut apparently the JSONException is used at run time, it makes your app fail when packaging with Jar2exe. The solution to this could be to include the whole dependency like so:\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-configuration-processor&#39;","title":"How to fix ClassNotFoundException: org.springframework.boot.configurationprocessor.json.JSONObject error?","body":"<p>This comes from your build.gradle:</p>\n<pre><code>annotationProcessor 'org.springframework.boot:spring-boot-configuration-processor'\n</code></pre>\n<p>Since you have declared as <code>compileOnly</code> here:</p>\n<pre><code>configurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n</code></pre>\n<p>but apparently the JSONException is used at run time, it makes your app fail when packaging with Jar2exe. The solution to this could be to include the whole dependency like so:</p>\n<pre><code>implementation 'org.springframework.boot:spring-boot-configuration-processor'\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2635164,"reputation":1119,"user_id":2280067,"display_name":"SJX"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698405149,"creation_date":1698405149,"answer_id":77373697,"question_id":73582281,"body_markdown":"Had a lot problems with this too.&lt;br&gt;\r\nSwitching to following solved my problems:&lt;br&gt;\r\n*org.json.JSONException&lt;br&gt;\r\norg.json.JSONObject*","title":"How to fix ClassNotFoundException: org.springframework.boot.configurationprocessor.json.JSONObject error?","body":"<p>Had a lot problems with this too.<br>\nSwitching to following solved my problems:<br>\n<em>org.json.JSONException<br>\norg.json.JSONObject</em></p>\n"}],"owner":{"account_id":3274297,"reputation":1267,"user_id":2756820,"accept_rate":96,"display_name":"Ram"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1849,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73583835,"answer_count":2,"score":1,"last_activity_date":1698405149,"creation_date":1662120193,"question_id":73582281,"body_markdown":"I am getting following error when I deploy my application:\r\n\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\r\n    \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\r\n    \tat org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\r\n    \tat org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\r\n    Caused by: java.lang.NoClassDefFoundError: org/springframework/boot/configurationprocessor/json/JSONObject\r\n    \tat com.rossmoor.jenarktomds.services.web.GrfPortalClientServiceImpl.getAccessToken(GrfPortalClientServiceImpl.java:53)\r\n    \tat com.rossmoor.jenarktomds.services.web.GrfPortalClientServiceImpl.downloadAllGrfUsers(GrfPortalClientServiceImpl.java:325)\r\n    \tat com.rossmoor.jenarktomds.services.DataProcessorImpl.testGrfApi(DataProcessorImpl.java:1939)\r\n    \tat com.rossmoor.jenarktomds.services.DataProcessorImpl$$FastClassBySpringCGLIB$$716e474b.invoke(&lt;generated&gt;)\r\n    \tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\r\n    \tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\r\n    \tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\r\n    \tat com.rossmoor.jenarktomds.services.DataProcessorImpl$$EnhancerBySpringCGLIB$$21e20f26.testGrfApi(&lt;generated&gt;)\r\n    \tat com.rossmoor.jenarktomds.JenarkToMdsApplication.run(JenarkToMdsApplication.java:76)\r\n    \tat org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:771)\r\n    \tat org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:755)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\r\n    \tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\r\n    \tat com.rossmoor.jenarktomds.JenarkToMdsApplication.main(JenarkToMdsApplication.java:59)\r\n    \t... 8 more\r\n    Caused by: java.lang.ClassNotFoundException: org.springframework.boot.configurationprocessor.json.JSONObject\r\n    \tat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\r\n    \tat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\r\n    \tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\r\n    \t... 30 more\r\n\r\nThe code that causes the error looks like this:\r\n\r\n \r\n\r\n       // create request body\r\n        JSONObject request = new JSONObject();\r\n        request.put(&quot;username&quot;, configurationProperties.getGrfPortalUserName());\r\n        request.put(&quot;password&quot;, configurationProperties.getGrfPortalUserPwd());\r\n\r\n        // set headers\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.add(&quot;API-Key&quot;, &quot;{{apiKey}}&quot;);\r\n        headers.add(&quot;Authorization&quot;, &quot;Basic {{authorization}}&quot;);\r\n\r\n        headers.setContentType(MediaType.APPLICATION_JSON);\r\n\r\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(request.toString(), headers);\r\n\r\n        if (Logger.isInfoEnabled()) Logger.info(&quot;Sending request to GRF Portal&quot;);\r\n        // send request and parse result\r\n        ResponseEntity&lt;String&gt; loginResponse = restTemplate\r\n                .exchange(GRF_LOGIN_URL, HttpMethod.POST, entity, String.class);\r\n        if (loginResponse.getStatusCode() == HttpStatus.OK)\r\n        {\r\n            JSONObject userJson = new JSONObject(loginResponse.getBody());\r\n\r\n            if (Logger.isInfoEnabled()) Logger.info(&quot;Token Data = &quot; + userJson);\r\n\r\n            this.AccessToken = String.valueOf(userJson.get(&quot;token&quot;));\r\n\r\n            System.out.println(&quot;AccessToken = &quot; + AccessToken);\r\n        }\r\n        else if (loginResponse.getStatusCode() == HttpStatus.UNAUTHORIZED)\r\n        {\r\n            // nono... bad credentials\r\n            if (Logger.isErrorEnabled()) Logger.error(&quot;nono... bad credentials&quot;);\r\n        }\r\n\r\n\r\nPlease note the error occurs only in deployment on production server. I take following steps to deploy:\r\n\r\n 1. Build the app using Gradle build command. \r\n 2. Convert Jar file to exe using [Jar2exe][1]  \r\n 3. Deploy the exe file as a windows service (Using an installer program).\r\n\r\n When I run the program on development or production server using IntelliJ idea the error does not occur. What could be problem here?\r\n\r\n\r\n    plugins {\r\n        id &#39;org.springframework.boot&#39; version &#39;2.7.0&#39;\r\n        id &#39;io.spring.dependency-management&#39; version &#39;1.0.11.RELEASE&#39;\r\n        id &#39;java&#39;\r\n    }\r\n    \r\n    group = &#39;com.rossmoor&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;17&#39;\r\n    \r\n    configurations {\r\n        compileOnly {\r\n            extendsFrom annotationProcessor\r\n        }\r\n    }\r\n    \r\n    repositories {\r\n        mavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-oauth2-client&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n        implementation &#39;org.springframework.boot:spring-boot-starter-data-rest&#39;\r\n        compileOnly &#39;org.projectlombok:lombok&#39;\r\n        developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n        runtimeOnly &#39;com.microsoft.sqlserver:mssql-jdbc&#39;\r\n        annotationProcessor &#39;org.projectlombok:lombok&#39;\r\n        testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n        testImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n        annotationProcessor &quot;org.springframework.boot:spring-boot-configuration-processor&quot;\r\n    \r\n    //    // https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-core\r\n    //    implementation group: &#39;org.hibernate.orm&#39;, name: &#39;hibernate-core&#39;, version: &#39;6.0.2.Final&#39;\r\n    //\r\n    //    // https://mvnrepository.com/artifact/jakarta.transaction/jakarta.transaction-api\r\n    //    implementation group: &#39;jakarta.transaction&#39;, name: &#39;jakarta.transaction-api&#39;, version: &#39;2.0.1&#39;\r\n    //\r\n    //    // https://mvnrepository.com/artifact/jakarta.persistence/jakarta.persistence-api\r\n    //    implementation group: &#39;jakarta.persistence&#39;, name: &#39;jakarta.persistence-api&#39;, version: &#39;3.1.0&#39;\r\n    \r\n        // https://mvnrepository.com/artifact/org.apache.commons/commons-lang3\r\n        implementation group: &#39;org.apache.commons&#39;, name: &#39;commons-lang3&#39;, version: &#39;3.12.0&#39;\r\n    \r\n        // https://mvnrepository.com/artifact/commons-validator/commons-validator\r\n        implementation group: &#39;commons-validator&#39;, name: &#39;commons-validator&#39;, version: &#39;1.7&#39;\r\n    \r\n        // https://mvnrepository.com/artifact/org.mapstruct/mapstruct\r\n        implementation group: &#39;org.mapstruct&#39;, name: &#39;mapstruct&#39;, version: &#39;1.5.2.Final&#39;\r\n    \r\n        // https://mvnrepository.com/artifact/com.google.code.gson/gson\r\n        implementation group: &#39;com.google.code.gson&#39;, name: &#39;gson&#39;, version: &#39;2.9.1&#39;\r\n    \r\n        implementation files(&#39;lib/connection-manager-2.0.0.1.jar&#39;)\r\n        implementation files(&#39;lib/Utils-2.0.0.1.jar&#39;)\r\n        implementation files(&#39;lib/TinyLog-2.0.0.1.jar&#39;)\r\n    }\r\n    \r\n    tasks.named(&#39;test&#39;) {\r\n        useJUnitPlatform()\r\n    }\r\n\r\n  [1]: https://www.jar2exe.com/","title":"How to fix ClassNotFoundException: org.springframework.boot.configurationprocessor.json.JSONObject error?","body":"<p>I am getting following error when I deploy my application:</p>\n<pre><code>java.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.boot.loader.MainMethodRunner.run(MainMethodRunner.java:49)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:108)\n    at org.springframework.boot.loader.Launcher.launch(Launcher.java:58)\n    at org.springframework.boot.loader.JarLauncher.main(JarLauncher.java:65)\nCaused by: java.lang.NoClassDefFoundError: org/springframework/boot/configurationprocessor/json/JSONObject\n    at com.rossmoor.jenarktomds.services.web.GrfPortalClientServiceImpl.getAccessToken(GrfPortalClientServiceImpl.java:53)\n    at com.rossmoor.jenarktomds.services.web.GrfPortalClientServiceImpl.downloadAllGrfUsers(GrfPortalClientServiceImpl.java:325)\n    at com.rossmoor.jenarktomds.services.DataProcessorImpl.testGrfApi(DataProcessorImpl.java:1939)\n    at com.rossmoor.jenarktomds.services.DataProcessorImpl$$FastClassBySpringCGLIB$$716e474b.invoke(&lt;generated&gt;)\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\n    at com.rossmoor.jenarktomds.services.DataProcessorImpl$$EnhancerBySpringCGLIB$$21e20f26.testGrfApi(&lt;generated&gt;)\n    at com.rossmoor.jenarktomds.JenarkToMdsApplication.run(JenarkToMdsApplication.java:76)\n    at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:771)\n    at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:755)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\n    at com.rossmoor.jenarktomds.JenarkToMdsApplication.main(JenarkToMdsApplication.java:59)\n    ... 8 more\nCaused by: java.lang.ClassNotFoundException: org.springframework.boot.configurationprocessor.json.JSONObject\n    at java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:445)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:587)\n    at org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 30 more\n</code></pre>\n<p>The code that causes the error looks like this:</p>\n<pre><code>   // create request body\n    JSONObject request = new JSONObject();\n    request.put(&quot;username&quot;, configurationProperties.getGrfPortalUserName());\n    request.put(&quot;password&quot;, configurationProperties.getGrfPortalUserPwd());\n\n    // set headers\n    HttpHeaders headers = new HttpHeaders();\n    headers.add(&quot;API-Key&quot;, &quot;{{apiKey}}&quot;);\n    headers.add(&quot;Authorization&quot;, &quot;Basic {{authorization}}&quot;);\n\n    headers.setContentType(MediaType.APPLICATION_JSON);\n\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(request.toString(), headers);\n\n    if (Logger.isInfoEnabled()) Logger.info(&quot;Sending request to GRF Portal&quot;);\n    // send request and parse result\n    ResponseEntity&lt;String&gt; loginResponse = restTemplate\n            .exchange(GRF_LOGIN_URL, HttpMethod.POST, entity, String.class);\n    if (loginResponse.getStatusCode() == HttpStatus.OK)\n    {\n        JSONObject userJson = new JSONObject(loginResponse.getBody());\n\n        if (Logger.isInfoEnabled()) Logger.info(&quot;Token Data = &quot; + userJson);\n\n        this.AccessToken = String.valueOf(userJson.get(&quot;token&quot;));\n\n        System.out.println(&quot;AccessToken = &quot; + AccessToken);\n    }\n    else if (loginResponse.getStatusCode() == HttpStatus.UNAUTHORIZED)\n    {\n        // nono... bad credentials\n        if (Logger.isErrorEnabled()) Logger.error(&quot;nono... bad credentials&quot;);\n    }\n</code></pre>\n<p>Please note the error occurs only in deployment on production server. I take following steps to deploy:</p>\n<ol>\n<li>Build the app using Gradle build command.</li>\n<li>Convert Jar file to exe using <a href=\"https://www.jar2exe.com/\" rel=\"nofollow noreferrer\">Jar2exe</a></li>\n<li>Deploy the exe file as a windows service (Using an installer program).</li>\n</ol>\n<p>When I run the program on development or production server using IntelliJ idea the error does not occur. What could be problem here?</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version '2.7.0'\n    id 'io.spring.dependency-management' version '1.0.11.RELEASE'\n    id 'java'\n}\n\ngroup = 'com.rossmoor'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-data-rest'\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    runtimeOnly 'com.microsoft.sqlserver:mssql-jdbc'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n    annotationProcessor &quot;org.springframework.boot:spring-boot-configuration-processor&quot;\n\n//    // https://mvnrepository.com/artifact/org.hibernate.orm/hibernate-core\n//    implementation group: 'org.hibernate.orm', name: 'hibernate-core', version: '6.0.2.Final'\n//\n//    // https://mvnrepository.com/artifact/jakarta.transaction/jakarta.transaction-api\n//    implementation group: 'jakarta.transaction', name: 'jakarta.transaction-api', version: '2.0.1'\n//\n//    // https://mvnrepository.com/artifact/jakarta.persistence/jakarta.persistence-api\n//    implementation group: 'jakarta.persistence', name: 'jakarta.persistence-api', version: '3.1.0'\n\n    // https://mvnrepository.com/artifact/org.apache.commons/commons-lang3\n    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.12.0'\n\n    // https://mvnrepository.com/artifact/commons-validator/commons-validator\n    implementation group: 'commons-validator', name: 'commons-validator', version: '1.7'\n\n    // https://mvnrepository.com/artifact/org.mapstruct/mapstruct\n    implementation group: 'org.mapstruct', name: 'mapstruct', version: '1.5.2.Final'\n\n    // https://mvnrepository.com/artifact/com.google.code.gson/gson\n    implementation group: 'com.google.code.gson', name: 'gson', version: '2.9.1'\n\n    implementation files('lib/connection-manager-2.0.0.1.jar')\n    implementation files('lib/Utils-2.0.0.1.jar')\n    implementation files('lib/TinyLog-2.0.0.1.jar')\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","apache-flink","command-line-arguments"],"answers":[{"tags":[],"owner":{"account_id":8011844,"reputation":607,"user_id":6043279,"display_name":"Ping"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698405079,"creation_date":1698405079,"answer_id":77373686,"question_id":77264146,"body_markdown":"I was able to solve this issue myself by annotating my function itself with `@SpringBootApplication`. This way, when the funciton runs in a Flink `TaskExecutor`, the `TaskExecutor` would end up reloading all the beans and autowiring them.\r\n\r\nCode changes that I made :\r\n\r\n    @SpringBootApplication\r\n    public class TransformFunction extends RichMapFunction&lt;AuditRecord, String&gt; implements Serializable {\r\n    \r\n        @Autowired\r\n        private transient CacheDao cacheDao;\r\n    \r\n        @Autowired\r\n        private transient ProcessController processController;\r\n    \r\n        public String map(AuditRecord auditRecord) throws Exception {\r\n    \r\n            //Some business logic\r\n        }\r\n        \r\n    }\r\n\r\nWith this change, I no longer needed the `CustomSpringContext` class and no longer needed to load the beans manually in the `open` method of the`TransformFunction`\r\n\r\nThe Apache Flink pipeline would then be created as follows : \r\n\r\n    env.fromCollection(inputRecprds).setParallelism(1)\r\n        \t\t\t\t.map(new TransformFunction()).setParallelism(30).print().setParallelism(30);\r\n\r\n","title":"Using Spring with Apache Flink - Command line arguments are not available to Spring","body":"<p>I was able to solve this issue myself by annotating my function itself with <code>@SpringBootApplication</code>. This way, when the funciton runs in a Flink <code>TaskExecutor</code>, the <code>TaskExecutor</code> would end up reloading all the beans and autowiring them.</p>\n<p>Code changes that I made :</p>\n<pre><code>@SpringBootApplication\npublic class TransformFunction extends RichMapFunction&lt;AuditRecord, String&gt; implements Serializable {\n\n    @Autowired\n    private transient CacheDao cacheDao;\n\n    @Autowired\n    private transient ProcessController processController;\n\n    public String map(AuditRecord auditRecord) throws Exception {\n\n        //Some business logic\n    }\n    \n}\n</code></pre>\n<p>With this change, I no longer needed the <code>CustomSpringContext</code> class and no longer needed to load the beans manually in the <code>open</code> method of the<code>TransformFunction</code></p>\n<p>The Apache Flink pipeline would then be created as follows :</p>\n<pre><code>env.fromCollection(inputRecprds).setParallelism(1)\n                    .map(new TransformFunction()).setParallelism(30).print().setParallelism(30);\n</code></pre>\n"}],"owner":{"account_id":8011844,"reputation":607,"user_id":6043279,"display_name":"Ping"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77373686,"answer_count":1,"score":0,"last_activity_date":1698405079,"creation_date":1696927045,"question_id":77264146,"body_markdown":"**Background**\r\n\r\nI have a Spring Boot application which I am trying to run on an *[Apache Flink][1]* cluster. This is a standard Spring Boot application with a `main` class annotated using `@SpringBootApplication` (Code snippet added later in this question).\r\n\r\nWhen I tried launching my Spring Boot application on a standalone Apache Flink cluster using the following command, I immediately started facing issues with bean autowiring. Flink was unable to desearlize the beans that have been Autowired.\r\n\r\n&gt; ./bin/flink run\r\n&gt; examples/streaming/my-springboot-function.jar\r\n\r\nOn further research, I found that the flink functions are executed on `TaskExecutors` and when this happens, Flink would first seralize the function and then deserialize it on a `TaskExecutor`. At this point, the dependencies would come out as null and not automatically be autowired. \r\n\r\nTo solve this issue, I simply created my own custom Spring Context and called it in the `open` method of my function and the beans autowiring was triggered as expected. \r\n\r\nBut the current issue that I am facing now is that Spring Boot is unable to map the command line arguments to the `@Value` annotation marked fields.\r\n\r\n**Code and details**\r\n\r\nThe custom Spring Context :\r\n\r\n    public class CustomSpringContext {\r\n    \r\n    \tprivate transient final ConcurrentHashMap&lt;String, ApplicationContext&gt; springContext;\r\n    \r\n    \tpublic CustomSpringContext() {\r\n    \t\tspringContext = new ConcurrentHashMap&lt;&gt;();\r\n    \t}\r\n    \r\n    \tpublic ApplicationContext getContext(String configurationPackageName) {\r\n    \t\treturn springContext.computeIfAbsent(configurationPackageName, AnnotationConfigApplicationContext::new);\r\n    \t}\r\n    \r\n    \tpublic &lt;T&gt; T autowiredBean(T bean, String configurationPackageName) {\r\n    \t\tAnnotationConfigApplicationContext context = getContext(configurationPackageName);\r\n    \t\tAutowireCapableBeanFactory factory = context.getAutowireCapableBeanFactory();\r\n    \t\tfactory.autowireBean(bean);\r\n    \t\treturn bean;\r\n    \t}\r\n    }\r\n\r\nThe Flink function : **Notice the `open` method**\r\n\r\n    @Component\r\n    public class TransformFunction extends RichMapFunction&lt;AuditRecord, String&gt; implements Serializable {\r\n    \r\n    \t@Autowired\r\n    \tprivate transient CacheDao cacheDao;\r\n    \r\n    \t@Autowired\r\n    \tprivate transient ProcessController processController;\r\n    \r\n    \tpublic String map(AuditRecord auditRecord) throws Exception {\r\n    \r\n    \t\t//Some business logic\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void open(Configuration parameters) throws Exception {\r\n    \t\tsuper.open(parameters);\r\n            //Autowire the dependent beans in this class \r\n    \t\tnew CustomSpringContext().autowiredBean(this, &quot;com.mypackage&quot;);\r\n    \t}\r\n    }\r\n\r\nThis solved my first issue which was the autowiring of beans after the function is deserialized on the `TaskExecutor` of Flink. \r\n\r\nBut I am now running into an issue such that if I pass any command line arguments to my program, they are not being injected into the properties marked with `@Value`. In a typical Spring Boot application, properties marked as `@Value` can be populated via command line as well and not necessarily from the applicaiton.properites. But that doesn&#39;t seem to be the case here. \r\n\r\nFor example, I have the following configuration class in my application. It uses `@Value` :\r\n\r\n    @Configuration\r\n    @ComponentScan(basePackages = &quot;com.mypackage&quot;)\r\n    public class TaskApplicationConfig {\r\n    \r\n        @Value(&quot;commandLineArgument&quot;);\r\n        private String commandLineArgument;\r\n    \r\n        //other bean configurations etc\r\n    \r\n    }\r\n\r\nSpring is unable to find `commandLineArgument` at runtime even though I pass it as a program input. I get the following exception at run time :\r\n\r\n&gt; java.lang.IllegalArgumentException: Could not resolve placeholder &#39;commandLineArgument&#39; in string value [${commandLineArgument}]\r\n\r\nI did some digging and know why this happens. In a typical Spring Boot Application, we implement the `ApplicationRunner` interface in our main class and override the `run` method. This `run` method injects the command line arguments into the context which are then accessible via `@Value` annotations. Example :\r\n\r\n    @SpringBootApplication\r\n    public class TaskApplication implements ApplicationRunner {\r\n    \r\n    \tpublic static void main(String[] args) throws Exception {\r\n    \t\tSpringApplication.run(TaskApplication .class, args);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void run(ApplicationArguments args) throws Exception {\r\n    \t\t//call some business logic\r\n    \t}\r\n    }\r\n\r\nBut since the Flink function (`TransformFunction`) is creating a custom spring context, there is no application runner or a a callback run method. In turn, the fields marked as `@Value` are not being mapped with command line arguments. \r\n\r\nHow do I solve this issue? \r\n\r\n\r\n  [1]: https://flink.apache.org/\r\n  [2]: https://getindata.com/blog/writing-flink-jobs-using-spring-dependency-injection-framework/","title":"Using Spring with Apache Flink - Command line arguments are not available to Spring","body":"<p><strong>Background</strong></p>\n<p>I have a Spring Boot application which I am trying to run on an <em><a href=\"https://flink.apache.org/\" rel=\"nofollow noreferrer\">Apache Flink</a></em> cluster. This is a standard Spring Boot application with a <code>main</code> class annotated using <code>@SpringBootApplication</code> (Code snippet added later in this question).</p>\n<p>When I tried launching my Spring Boot application on a standalone Apache Flink cluster using the following command, I immediately started facing issues with bean autowiring. Flink was unable to desearlize the beans that have been Autowired.</p>\n<blockquote>\n<p>./bin/flink run\nexamples/streaming/my-springboot-function.jar</p>\n</blockquote>\n<p>On further research, I found that the flink functions are executed on <code>TaskExecutors</code> and when this happens, Flink would first seralize the function and then deserialize it on a <code>TaskExecutor</code>. At this point, the dependencies would come out as null and not automatically be autowired.</p>\n<p>To solve this issue, I simply created my own custom Spring Context and called it in the <code>open</code> method of my function and the beans autowiring was triggered as expected.</p>\n<p>But the current issue that I am facing now is that Spring Boot is unable to map the command line arguments to the <code>@Value</code> annotation marked fields.</p>\n<p><strong>Code and details</strong></p>\n<p>The custom Spring Context :</p>\n<pre><code>public class CustomSpringContext {\n\n    private transient final ConcurrentHashMap&lt;String, ApplicationContext&gt; springContext;\n\n    public CustomSpringContext() {\n        springContext = new ConcurrentHashMap&lt;&gt;();\n    }\n\n    public ApplicationContext getContext(String configurationPackageName) {\n        return springContext.computeIfAbsent(configurationPackageName, AnnotationConfigApplicationContext::new);\n    }\n\n    public &lt;T&gt; T autowiredBean(T bean, String configurationPackageName) {\n        AnnotationConfigApplicationContext context = getContext(configurationPackageName);\n        AutowireCapableBeanFactory factory = context.getAutowireCapableBeanFactory();\n        factory.autowireBean(bean);\n        return bean;\n    }\n}\n</code></pre>\n<p>The Flink function : <strong>Notice the <code>open</code> method</strong></p>\n<pre><code>@Component\npublic class TransformFunction extends RichMapFunction&lt;AuditRecord, String&gt; implements Serializable {\n\n    @Autowired\n    private transient CacheDao cacheDao;\n\n    @Autowired\n    private transient ProcessController processController;\n\n    public String map(AuditRecord auditRecord) throws Exception {\n\n        //Some business logic\n    }\n\n    @Override\n    public void open(Configuration parameters) throws Exception {\n        super.open(parameters);\n        //Autowire the dependent beans in this class \n        new CustomSpringContext().autowiredBean(this, &quot;com.mypackage&quot;);\n    }\n}\n</code></pre>\n<p>This solved my first issue which was the autowiring of beans after the function is deserialized on the <code>TaskExecutor</code> of Flink.</p>\n<p>But I am now running into an issue such that if I pass any command line arguments to my program, they are not being injected into the properties marked with <code>@Value</code>. In a typical Spring Boot application, properties marked as <code>@Value</code> can be populated via command line as well and not necessarily from the applicaiton.properites. But that doesn't seem to be the case here.</p>\n<p>For example, I have the following configuration class in my application. It uses <code>@Value</code> :</p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = &quot;com.mypackage&quot;)\npublic class TaskApplicationConfig {\n\n    @Value(&quot;commandLineArgument&quot;);\n    private String commandLineArgument;\n\n    //other bean configurations etc\n\n}\n</code></pre>\n<p>Spring is unable to find <code>commandLineArgument</code> at runtime even though I pass it as a program input. I get the following exception at run time :</p>\n<blockquote>\n<p>java.lang.IllegalArgumentException: Could not resolve placeholder 'commandLineArgument' in string value [${commandLineArgument}]</p>\n</blockquote>\n<p>I did some digging and know why this happens. In a typical Spring Boot Application, we implement the <code>ApplicationRunner</code> interface in our main class and override the <code>run</code> method. This <code>run</code> method injects the command line arguments into the context which are then accessible via <code>@Value</code> annotations. Example :</p>\n<pre><code>@SpringBootApplication\npublic class TaskApplication implements ApplicationRunner {\n\n    public static void main(String[] args) throws Exception {\n        SpringApplication.run(TaskApplication .class, args);\n    }\n\n    @Override\n    public void run(ApplicationArguments args) throws Exception {\n        //call some business logic\n    }\n}\n</code></pre>\n<p>But since the Flink function (<code>TransformFunction</code>) is creating a custom spring context, there is no application runner or a a callback run method. In turn, the fields marked as <code>@Value</code> are not being mapped with command line arguments.</p>\n<p>How do I solve this issue?</p>\n"},{"tags":["java","spring","quarkus","hazelcast","ovh"],"comments":[{"owner":{"account_id":7592512,"reputation":3070,"user_id":5759723,"display_name":"Neil Stevenson"},"score":0,"creation_date":1698411424,"post_id":77373640,"comment_id":136405670,"body_markdown":"Does it do this with the latest version ? (Which today is 5.3.5)","body":"Does it do this with the latest version ? (Which today is 5.3.5)"},{"owner":{"account_id":7592512,"reputation":3070,"user_id":5759723,"display_name":"Neil Stevenson"},"score":0,"creation_date":1698411730,"post_id":77373640,"comment_id":136405735,"body_markdown":"If that doesn&#39;t work, logs will be helpful","body":"If that doesn&#39;t work, logs will be helpful"}],"owner":{"account_id":26352390,"reputation":11,"user_id":20009808,"display_name":"Aman Singhal"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698404558,"creation_date":1698404558,"question_id":77373640,"body_markdown":"I have java application with hazelcast client. Application being running on 2 different server. First time when on both server the application start they form a cluster but as I put down one of the node and bring it up, it takes around &quot;5 min&quot; to form a cluster, till then the node I brought up running as a standalone instance. I am not sure why is this happenning ?\r\n\r\nI have Tcpipconfig enable with list of 2 members. I am using embedded hazelcast","title":"Hazelcast cluster issue","body":"<p>I have java application with hazelcast client. Application being running on 2 different server. First time when on both server the application start they form a cluster but as I put down one of the node and bring it up, it takes around &quot;5 min&quot; to form a cluster, till then the node I brought up running as a standalone instance. I am not sure why is this happenning ?</p>\n<p>I have Tcpipconfig enable with list of 2 members. I am using embedded hazelcast</p>\n"},{"tags":["java","jar","proguard","obfuscation"],"owner":{"account_id":18649568,"reputation":3,"user_id":13593365,"display_name":"Salu Ramos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698404408,"creation_date":1698374237,"question_id":77371236,"body_markdown":"I&#39;m trying to obfuscate a jar file with proguard through its gui.\r\nMy project uses gradle, but I couldn&#39;t make it work, I didn&#39;t find tutorials and I don&#39;t understand much about gradle, so the documentation is difficult for me to understand.\r\n\r\nThis is my proguard config:\r\n\r\n```\r\n-injars &#39;build\\libs\\noah-viewer-gradle-0.3.jar&#39;\r\n-outjars &#39;build\\libs\\noah-viewer-gradle-obfuscated.jar&#39;\r\n\r\n-libraryjars &#39;D:\\Programas\\jdk-17\\jmods\\java.base.jmod&#39;\r\n-libraryjars &#39;D:\\Programas\\jdk-17\\jmods\\java.naming.jmod&#39;\r\n-libraryjars &#39;D:\\Programas\\jdk-17\\lib\\jrt-fs.jar&#39;\r\n\r\n-dontshrink\r\n-dontoptimize\r\n-dontpreverify\r\n-dontwarn sun.media.jai.**\r\n-dontwarn com.sun.**\r\n-dontwarn javax.**\r\n-dontwarn org.dcm4che3.**\r\n-dontwarn org.slf4j.**\r\n-dontwarn org.apache.**\r\n\r\n# Keep - Applications. Keep all application classes, along with their &#39;main&#39; methods.\r\n-keepclasseswithmembers public class * {\r\n    public static void main(java.lang.String[]);\r\n}\r\n\r\n# Also keep - Enumerations. Keep the special static methods that are required in\r\n# enumeration classes.\r\n-keepclassmembers enum  * {\r\n    public static **[] values();\r\n    public static ** valueOf(java.lang.String);\r\n}\r\n\r\n# Also keep - Database drivers. Keep all implementations of java.sql.Driver.\r\n-keep class * extends java.sql.Driver\r\n\r\n# Also keep - Swing UI L&amp;F. Keep all extensions of javax.swing.plaf.ComponentUI,\r\n# along with the special &#39;createUI&#39; method.\r\n-keep class * extends javax.swing.plaf.ComponentUI {\r\n    public static javax.swing.plaf.ComponentUI createUI(javax.swing.JComponent);\r\n}\r\n\r\n# Keep - Native method names. Keep all native class/method names.\r\n-keepclasseswithmembers,includedescriptorclasses,allowshrinking class * {\r\n    native &lt;methods&gt;;\r\n}\r\n\r\n\r\n```\r\n\r\nBut the outjar file is throwing a new error:\r\n\r\n```\r\nException in thread &quot;main&quot; java.lang.NoSuchMethodError: SwigDirector_Command_getName\r\n        at org.itk.simple.SimpleITKJNI.swig_module_init(Native Method)\r\n        at org.itk.simple.SimpleITKJNI.&lt;clinit&gt;(Unknown Source)\r\n        at com.webkriativa.noahviewer.Main.main(Unknown Source)\r\n```\r\n\r\nThis is the proguard log (with -dontwarn): https://pastecode.io/s/tigv6fzj\r\nAnd this is the proguard log (removing de -dontwarn): https://pastecode.io/s/h6icq6pe\r\n\r\nHow could i fix this error? Is this a libraryjars error?\r\nOr perhaps a recommendation for easier-to-use software?\r\nMaybe instructions or a good tutorial for gradle configuration...\r\n\r\nThanks!","title":"Proguard outjar throwing new errors","body":"<p>I'm trying to obfuscate a jar file with proguard through its gui.\nMy project uses gradle, but I couldn't make it work, I didn't find tutorials and I don't understand much about gradle, so the documentation is difficult for me to understand.</p>\n<p>This is my proguard config:</p>\n<pre><code>-injars 'build\\libs\\noah-viewer-gradle-0.3.jar'\n-outjars 'build\\libs\\noah-viewer-gradle-obfuscated.jar'\n\n-libraryjars 'D:\\Programas\\jdk-17\\jmods\\java.base.jmod'\n-libraryjars 'D:\\Programas\\jdk-17\\jmods\\java.naming.jmod'\n-libraryjars 'D:\\Programas\\jdk-17\\lib\\jrt-fs.jar'\n\n-dontshrink\n-dontoptimize\n-dontpreverify\n-dontwarn sun.media.jai.**\n-dontwarn com.sun.**\n-dontwarn javax.**\n-dontwarn org.dcm4che3.**\n-dontwarn org.slf4j.**\n-dontwarn org.apache.**\n\n# Keep - Applications. Keep all application classes, along with their 'main' methods.\n-keepclasseswithmembers public class * {\n    public static void main(java.lang.String[]);\n}\n\n# Also keep - Enumerations. Keep the special static methods that are required in\n# enumeration classes.\n-keepclassmembers enum  * {\n    public static **[] values();\n    public static ** valueOf(java.lang.String);\n}\n\n# Also keep - Database drivers. Keep all implementations of java.sql.Driver.\n-keep class * extends java.sql.Driver\n\n# Also keep - Swing UI L&amp;F. Keep all extensions of javax.swing.plaf.ComponentUI,\n# along with the special 'createUI' method.\n-keep class * extends javax.swing.plaf.ComponentUI {\n    public static javax.swing.plaf.ComponentUI createUI(javax.swing.JComponent);\n}\n\n# Keep - Native method names. Keep all native class/method names.\n-keepclasseswithmembers,includedescriptorclasses,allowshrinking class * {\n    native &lt;methods&gt;;\n}\n\n\n</code></pre>\n<p>But the outjar file is throwing a new error:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NoSuchMethodError: SwigDirector_Command_getName\n        at org.itk.simple.SimpleITKJNI.swig_module_init(Native Method)\n        at org.itk.simple.SimpleITKJNI.&lt;clinit&gt;(Unknown Source)\n        at com.webkriativa.noahviewer.Main.main(Unknown Source)\n</code></pre>\n<p>This is the proguard log (with -dontwarn): <a href=\"https://pastecode.io/s/tigv6fzj\" rel=\"nofollow noreferrer\">https://pastecode.io/s/tigv6fzj</a>\nAnd this is the proguard log (removing de -dontwarn): <a href=\"https://pastecode.io/s/h6icq6pe\" rel=\"nofollow noreferrer\">https://pastecode.io/s/h6icq6pe</a></p>\n<p>How could i fix this error? Is this a libraryjars error?\nOr perhaps a recommendation for easier-to-use software?\nMaybe instructions or a good tutorial for gradle configuration...</p>\n<p>Thanks!</p>\n"},{"tags":["java","amazon-web-services","aws-lambda"],"comments":[{"owner":{"account_id":5281408,"reputation":18787,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1698401657,"post_id":77373317,"comment_id":136403806,"body_markdown":"Why not try it out? Put a log statement in the c&#39;tor and run it. Then change the field to a static field, put a log statement in a `static { ... }` block and run it.","body":"Why not try it out? Put a log statement in the c&#39;tor and run it. Then change the field to a static field, put a log statement in a <code>static { ... }</code> block and run it."},{"owner":{"account_id":6157899,"reputation":19791,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":1,"creation_date":1698402529,"post_id":77373317,"comment_id":136403953,"body_markdown":"Also read: https://stackoverflow.com/q/50347544/4800344","body":"Also read: <a href=\"https://stackoverflow.com/q/50347544/4800344\">stackoverflow.com/q/50347544/4800344</a>"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1698410933,"post_id":77373317,"comment_id":136405569,"body_markdown":"If you need to keep values across multiple invocations - store them in a database like DynamoDB","body":"If you need to keep values across multiple invocations - store them in a database like DynamoDB"},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1698416627,"post_id":77373317,"comment_id":136406940,"body_markdown":"What do you mean by &quot;the timeout of the lambda&quot; when you say &quot;Shortly after event A was handled, but before the timeout of the lambda, event B fires&quot;?","body":"What do you mean by &quot;the timeout of the lambda&quot; when you say &quot;Shortly after event A was handled, but before the timeout of the lambda, event B fires&quot;?"},{"owner":{"account_id":14116182,"reputation":35,"user_id":10197897,"display_name":"Milo"},"score":0,"creation_date":1698505064,"post_id":77373317,"comment_id":136415692,"body_markdown":"@smac2020\nI explicitly don&#39;t want that. I was interested if the values would be kept without my knowledge.","body":"@smac2020 I explicitly don&#39;t want that. I was interested if the values would be kept without my knowledge."},{"owner":{"account_id":14116182,"reputation":35,"user_id":10197897,"display_name":"Milo"},"score":0,"creation_date":1698505167,"post_id":77373317,"comment_id":136415701,"body_markdown":"@jarmod It is my understanding that a lambda is initiated, has multiple invocations and after a period without any usage is being shut down. I wanted to know if field values of my handler class are being stored throughout multiple invocations. But Leeroy answered my question.","body":"@jarmod It is my understanding that a lambda is initiated, has multiple invocations and after a period without any usage is being shut down. I wanted to know if field values of my handler class are being stored throughout multiple invocations. But Leeroy answered my question."},{"owner":{"account_id":100740,"reputation":73217,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1698505812,"post_id":77373317,"comment_id":136415768,"body_markdown":"OK, just wanted to clarify. The term &quot;timeout&quot; has a specific meaning in AWS Lambda functions and relates to the maximum time that a single invocation of the function will be allowed to run before it is failed by the Lambda runtime. You&#39;re referring to the execution environment itself being [shutdown](https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtime-environment.html#runtimes-lifecycle-shutdown).","body":"OK, just wanted to clarify. The term &quot;timeout&quot; has a specific meaning in AWS Lambda functions and relates to the maximum time that a single invocation of the function will be allowed to run before it is failed by the Lambda runtime. You&#39;re referring to the execution environment itself being <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/lambda-runtime-environment.html#runtimes-lifecycle-shutdown\" rel=\"nofollow noreferrer\">shutdown</a>."}],"answers":[{"tags":[],"owner":{"account_id":10749774,"reputation":14440,"user_id":7909676,"display_name":"Leeroy Hannigan"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698403512,"creation_date":1698403512,"answer_id":77373529,"question_id":77373317,"body_markdown":"No, the request handler is not shared across invocations, but objects initiated outside of the request handler is. \r\n\r\nThe answer is `1`\r\n\r\nFor that reason it&#39;s always best practices to create your reusable components outside of the request handler to save you having to initiate them on each invocation. ","title":"Does an AWS Lambda keep field values throughout its invocation?","body":"<p>No, the request handler is not shared across invocations, but objects initiated outside of the request handler is.</p>\n<p>The answer is <code>1</code></p>\n<p>For that reason it's always best practices to create your reusable components outside of the request handler to save you having to initiate them on each invocation.</p>\n"}],"owner":{"account_id":14116182,"reputation":35,"user_id":10197897,"display_name":"Milo"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":71,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77373529,"answer_count":1,"score":-1,"last_activity_date":1698403512,"creation_date":1698401539,"question_id":77373317,"body_markdown":"Imagine the following java code:\r\n\r\n    public class HandlerClass implements RequestHandler&lt;DynamodbEvent, int&gt; {\r\n    \r\n        int i = 0;\r\n    \r\n        public RequestHandler() {}\r\n    \r\n        public int handleRequest(DynamodbEvent dynamodbEvent, Context context) {\r\n            i = i + 1;\r\n            System.out.println(i);\r\n            return i\r\n        }\r\n    }\r\n\r\nNow the lambda is triggered from an DynamoDB event A, which would lead to an invocation of the lambda, which in turn would create an instance of the RequestHandler class and a call to handleRequest().\r\nShortly after event A was handled, but before the timeout of the lambda, event B fires.\r\n\r\nDoes event B reuse the same instance of the RequestHandler class and thus would print &quot;2&quot; or does event B receive its own instance and prints &quot;1&quot;?\r\n\r\nWhat would happen if i was static?\r\n","title":"Does an AWS Lambda keep field values throughout its invocation?","body":"<p>Imagine the following java code:</p>\n<pre><code>public class HandlerClass implements RequestHandler&lt;DynamodbEvent, int&gt; {\n\n    int i = 0;\n\n    public RequestHandler() {}\n\n    public int handleRequest(DynamodbEvent dynamodbEvent, Context context) {\n        i = i + 1;\n        System.out.println(i);\n        return i\n    }\n}\n</code></pre>\n<p>Now the lambda is triggered from an DynamoDB event A, which would lead to an invocation of the lambda, which in turn would create an instance of the RequestHandler class and a call to handleRequest().\nShortly after event A was handled, but before the timeout of the lambda, event B fires.</p>\n<p>Does event B reuse the same instance of the RequestHandler class and thus would print &quot;2&quot; or does event B receive its own instance and prints &quot;1&quot;?</p>\n<p>What would happen if i was static?</p>\n"},{"tags":["java","operating-system"],"comments":[{"owner":{"account_id":23121,"reputation":527336,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":2,"creation_date":1335278678,"post_id":10300251,"comment_id":13255275,"body_markdown":"It is any component which does &quot;real&quot; work. c.f. messaging, control, gui compoenents.","body":"It is any component which does &quot;real&quot; work. c.f. messaging, control, gui compoenents."}],"answers":[{"tags":[],"owner":{"account_id":25822,"reputation":78747,"user_id":66686,"accept_rate":87,"display_name":"Jens Schauder"},"down_vote_count":0,"up_vote_count":51,"is_accepted":true,"score":51,"last_activity_date":1335278764,"creation_date":1335278764,"answer_id":10300342,"question_id":10300251,"body_markdown":"A worker is something you give a task and continue in your process, while the worker (or multiple workers) process the task on a different thread. When they finish they let you know about it via a call back method. I.e. a special method provided on the initial call gets called.","title":"What does the concept of &quot;worker&quot; mean in programming?","body":"<p>A worker is something you give a task and continue in your process, while the worker (or multiple workers) process the task on a different thread. When they finish they let you know about it via a call back method. I.e. a special method provided on the initial call gets called.</p>\n"},{"tags":[],"owner":{"account_id":20308281,"reputation":8024,"user_id":14895985,"display_name":"Gass"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698403355,"creation_date":1698403355,"answer_id":77373517,"question_id":10300251,"body_markdown":"A worker generally refers to an application that performs tasks or processes data in the background without requiring direct user interaction. Workers are essential for handling time consuming or resource intensive operations **asynchronously**.\r\n\r\nWritten by @vordrax [here][1]\r\n\r\n&gt; When our organization uses the term &quot;worker&quot;, it&#39;s just a generic term\r\n&gt; for application instance with a specific purpose. So we might have an\r\n&gt; application that handles a specific task, say consuming order messages\r\n&gt; and writing them to the database. That would be a worker. And if this\r\n&gt; work can be parallelized, we might have three copies of it running at\r\n&gt; the same time on the same server. So we&#39;d have three workers running,\r\n&gt; handling this task.\r\n\r\nAnalogy written by @cyrusol [here][1] \r\n\r\n&gt; That model is comparable to cashiers in a supermarket. A job (client)\r\n&gt; can arrive in the queue (literally, the queue) and it is handled by a\r\n&gt; worker (cashier). With the slight difference that in most IT systems\r\n&gt; jobs don&#39;t &quot;choose&quot; the worker they are handled by but humans irl do\r\n&gt; by choosing a line to wait in.\r\n&gt; \r\n&gt; Workers normally have to do some payload that involves transforming\r\n&gt; data, redirecting it to another queue or external service etc. and it\r\n&gt; all happens asynchronously which means independent from the program\r\n&gt; executation that triggered the job.\r\n\r\n\r\n  [1]: https://www.reddit.com/r/AskProgramming/comments/c7hvt9/what_the_hell_are_workers/","title":"What does the concept of &quot;worker&quot; mean in programming?","body":"<p>A worker generally refers to an application that performs tasks or processes data in the background without requiring direct user interaction. Workers are essential for handling time consuming or resource intensive operations <strong>asynchronously</strong>.</p>\n<p>Written by @vordrax <a href=\"https://www.reddit.com/r/AskProgramming/comments/c7hvt9/what_the_hell_are_workers/\" rel=\"nofollow noreferrer\">here</a></p>\n<blockquote>\n<p>When our organization uses the term &quot;worker&quot;, it's just a generic term\nfor application instance with a specific purpose. So we might have an\napplication that handles a specific task, say consuming order messages\nand writing them to the database. That would be a worker. And if this\nwork can be parallelized, we might have three copies of it running at\nthe same time on the same server. So we'd have three workers running,\nhandling this task.</p>\n</blockquote>\n<p>Analogy written by @cyrusol <a href=\"https://www.reddit.com/r/AskProgramming/comments/c7hvt9/what_the_hell_are_workers/\" rel=\"nofollow noreferrer\">here</a></p>\n<blockquote>\n<p>That model is comparable to cashiers in a supermarket. A job (client)\ncan arrive in the queue (literally, the queue) and it is handled by a\nworker (cashier). With the slight difference that in most IT systems\njobs don't &quot;choose&quot; the worker they are handled by but humans irl do\nby choosing a line to wait in.</p>\n<p>Workers normally have to do some payload that involves transforming\ndata, redirecting it to another queue or external service etc. and it\nall happens asynchronously which means independent from the program\nexecutation that triggered the job.</p>\n</blockquote>\n"}],"owner":{"account_id":120672,"reputation":40569,"user_id":313245,"accept_rate":81,"display_name":"Hossein"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":13679,"favorite_count":0,"down_vote_count":0,"up_vote_count":38,"accepted_answer_id":10300342,"answer_count":2,"score":38,"last_activity_date":1698403355,"creation_date":1335278470,"question_id":10300251,"body_markdown":"I want to know What does the concept of &quot;worker&quot; mean in programming?\r\nI&#39;ve recently started Java and have seen in so many places where they are used but don&#39;t get the idea.\r\n\r\nExamples would be great.","title":"What does the concept of &quot;worker&quot; mean in programming?","body":"<p>I want to know What does the concept of \"worker\" mean in programming?\nI've recently started Java and have seen in so many places where they are used but don't get the idea.</p>\n\n<p>Examples would be great.</p>\n"},{"tags":["java","cdi","jboss-weld"],"comments":[{"owner":{"account_id":11462792,"reputation":184,"user_id":8401926,"display_name":"Roland"},"score":0,"creation_date":1535018497,"post_id":51981660,"comment_id":90915782,"body_markdown":"One think then came to my mind: Why can&#39;t you refacture your legacy code and rewrite it to a proper way? And why do you need such tests? Normally, there is no need for this.","body":"One think then came to my mind: Why can&#39;t you refacture your legacy code and rewrite it to a proper way? And why do you need such tests? Normally, there is no need for this."},{"owner":{"account_id":2803978,"reputation":899,"user_id":2411594,"accept_rate":33,"display_name":"Paolof76"},"score":0,"creation_date":1535020668,"post_id":51981660,"comment_id":90917020,"body_markdown":"Because they don&#39;t want :( Is it always so easy for you folks to do whatever you want with company&#39;s code?","body":"Because they don&#39;t want :( Is it always so easy for you folks to do whatever you want with company&#39;s code?"},{"owner":{"account_id":2803978,"reputation":899,"user_id":2411594,"accept_rate":33,"display_name":"Paolof76"},"score":0,"creation_date":1535020778,"post_id":51981660,"comment_id":90917086,"body_markdown":"And I got a down vote for what exactly? If people don&#39;t get satisfied with an up, they down vote here?","body":"And I got a down vote for what exactly? If people don&#39;t get satisfied with an up, they down vote here?"}],"answers":[{"tags":[],"owner":{"account_id":6963528,"reputation":6523,"user_id":5342297,"display_name":"Siliarus"},"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1535019887,"creation_date":1535019887,"answer_id":51983619,"question_id":51981660,"body_markdown":"CDI is intentionally hiding (or rather not exposing) the internals as they should be unimportant to end user when programming against interface.Furthermore messing with this can cause weird errors as you should *always* be invoking methods via proxy, not the actual instance.\r\n\r\nSo the short answer is - *no, there is no pure CDI way to do this.*\r\n(At least not an intended one.)\r\n\r\nHowever, seeing that you are using Weld already, there are other ways. Weld comes with pretty much any EE server excepting TomEE, so depending on Weld API should be pretty safe.\r\nNow why am I saying this - in Weld 3.x (WildFly 12+), the API was extended to contain [`WeldConstruct`][1] and [`WeldClientProxy`][2] which are interfaces implemented by either Weld sublasses (interceptors/decorators) and/or client proxies - see javadocs of those classes for more information.\r\n\r\nSo if you must do this, then you could add a dependency on Weld API as such:\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;\r\n      &lt;artifactId&gt;weld-api&lt;/artifactId&gt;\r\n      &lt;version&gt;x.y.z&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nAnd then, in your code, you can check if injected object is a proxy by doing:\r\n\r\n    @Inject\r\n    Foo foo;\r\n    \r\n    public void doSomething() {\r\n      if (foo instanceof WeldClientProxy) {\r\n        // foo is a proxy\r\n      } else {\r\n        // not a proxy\r\n      }\r\n    }\r\n\r\nIf you want to obtain actual instances, [`WeldClientProxy` allows you to obtain `Metadata`][3] from which you can the [retrieve the underlying contextual instance][4]. That&#39;s the closest I can get you to what you are after.\r\n\r\n\r\n  [1]: https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldConstruct.java\r\n  [2]: https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldClientProxy.java\r\n  [3]: https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldClientProxy.java#L34\r\n  [4]: https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldClientProxy.java#L51","title":"Get the real object from CDI Proxy","body":"<p>CDI is intentionally hiding (or rather not exposing) the internals as they should be unimportant to end user when programming against interface.Furthermore messing with this can cause weird errors as you should <em>always</em> be invoking methods via proxy, not the actual instance.</p>\n\n<p>So the short answer is - <em>no, there is no pure CDI way to do this.</em>\n(At least not an intended one.)</p>\n\n<p>However, seeing that you are using Weld already, there are other ways. Weld comes with pretty much any EE server excepting TomEE, so depending on Weld API should be pretty safe.\nNow why am I saying this - in Weld 3.x (WildFly 12+), the API was extended to contain <a href=\"https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldConstruct.java\" rel=\"noreferrer\"><code>WeldConstruct</code></a> and <a href=\"https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldClientProxy.java\" rel=\"noreferrer\"><code>WeldClientProxy</code></a> which are interfaces implemented by either Weld sublasses (interceptors/decorators) and/or client proxies - see javadocs of those classes for more information.</p>\n\n<p>So if you must do this, then you could add a dependency on Weld API as such:</p>\n\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;\n  &lt;artifactId&gt;weld-api&lt;/artifactId&gt;\n  &lt;version&gt;x.y.z&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>And then, in your code, you can check if injected object is a proxy by doing:</p>\n\n<pre><code>@Inject\nFoo foo;\n\npublic void doSomething() {\n  if (foo instanceof WeldClientProxy) {\n    // foo is a proxy\n  } else {\n    // not a proxy\n  }\n}\n</code></pre>\n\n<p>If you want to obtain actual instances, <a href=\"https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldClientProxy.java#L34\" rel=\"noreferrer\"><code>WeldClientProxy</code> allows you to obtain <code>Metadata</code></a> from which you can the <a href=\"https://github.com/weld/api/blob/master/weld/src/main/java/org/jboss/weld/proxy/WeldClientProxy.java#L51\" rel=\"noreferrer\">retrieve the underlying contextual instance</a>. That's the closest I can get you to what you are after.</p>\n"},{"tags":[],"owner":{"account_id":2109363,"reputation":3374,"user_id":1874954,"display_name":"Romain Manni-Bucau"},"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1628250837,"creation_date":1535295320,"answer_id":52027430,"question_id":51981660,"body_markdown":"One common option is to:\r\n\r\n 1. get the Bean of the instance you want to unwrap\r\n 2. get its scope (`bean.getScope()`)\r\n 3. from the bean manager (injectable) get the Context associated to the scope\r\n 4. do a `context.get(bean)` to get the unwrapped instance if available in CDI context (there are some cases you can&#39;t get it at all).","title":"Get the real object from CDI Proxy","body":"<p>One common option is to:</p>\n<ol>\n<li>get the Bean of the instance you want to unwrap</li>\n<li>get its scope (<code>bean.getScope()</code>)</li>\n<li>from the bean manager (injectable) get the Context associated to the scope</li>\n<li>do a <code>context.get(bean)</code> to get the unwrapped instance if available in CDI context (there are some cases you can't get it at all).</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":15782199,"reputation":69,"user_id":11388213,"display_name":"Universe Whole-Xuan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698403161,"creation_date":1698398262,"answer_id":77372943,"question_id":51981660,"body_markdown":"    // test is weld proxy\r\n    if (service.getClass().getSimpleName().endsWith(&quot;WeldClientProxy&quot;)) {\r\n        service = getWeldTargetInstance(service);\r\n    }\r\n\tprivate static Object getWeldTargetInstance(Object proxy) throws NoSuchMethodException, SecurityException,\r\n\t\t\tIllegalAccessException, IllegalArgumentException, InvocationTargetException, ClassNotFoundException {\r\n\t\tClass&lt;?&gt; targetInstanceProxy=Class.forName(&quot;org.jboss.weld.interceptor.util.proxy.TargetInstanceProxy&quot;),\r\n\t\t\tclazz=proxy.getClass(); \r\n\t\tboolean isAssignableFrom=targetInstanceProxy.isAssignableFrom(clazz);\r\n\t\tif(isAssignableFrom) { \r\n\t\t\tMethod method = clazz.getDeclaredMethod(&quot;getTargetInstance&quot;);\r\n\t\t\tObject instance = method.invoke(proxy);\r\n\t\t\treturn instance;\r\n\t\t}else {\r\n\t\t\tthrow new IllegalArgumentException();\r\n\t\t}\r\n\t}","title":"Get the real object from CDI Proxy","body":"<pre><code>// test is weld proxy\nif (service.getClass().getSimpleName().endsWith(&quot;WeldClientProxy&quot;)) {\n    service = getWeldTargetInstance(service);\n}\nprivate static Object getWeldTargetInstance(Object proxy) throws NoSuchMethodException, SecurityException,\n        IllegalAccessException, IllegalArgumentException, InvocationTargetException, ClassNotFoundException {\n    Class&lt;?&gt; targetInstanceProxy=Class.forName(&quot;org.jboss.weld.interceptor.util.proxy.TargetInstanceProxy&quot;),\n        clazz=proxy.getClass(); \n    boolean isAssignableFrom=targetInstanceProxy.isAssignableFrom(clazz);\n    if(isAssignableFrom) { \n        Method method = clazz.getDeclaredMethod(&quot;getTargetInstance&quot;);\n        Object instance = method.invoke(proxy);\n        return instance;\n    }else {\n        throw new IllegalArgumentException();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":2803978,"reputation":899,"user_id":2411594,"accept_rate":33,"display_name":"Paolof76"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3815,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":51983619,"answer_count":3,"score":3,"last_activity_date":1698403161,"creation_date":1535013850,"question_id":51981660,"body_markdown":"I looked for a clean CDI solution and not a WELD dependent one but so far nothing...\r\n\r\nI need to test if every element of a list of objects that I get with `@Inject` `@Any` `MyInterface` beans is a proxy, and when `true` I need to get the real object to do introspection and get all the properties of the object.\r\n\r\nMy WELD implementation:\r\n\r\n    MyInterface interf = obj;\r\n    if (isProxy(interf )) {\r\n            interf = (Config) ((TargetInstanceProxy)interf ).getTargetInstance();\r\n    }\r\n\r\n\r\nwhere `isProxy` is so defined (CDI solution?):\r\n\r\n    public boolean isProxy(Object obj) {\r\n        try{\r\n            return Class.forName(&quot;org.jboss.weld.bean.proxy.ProxyObject&quot;).isInstance(obj);\r\n        } catch (Exception e) {\r\n            LOGGER.error(&quot;Unable to check if object is proxy&quot;, e);\r\n        }\r\n        return false;\r\n    }\r\n\r\nAny suggestions /Indications. In the official documentation I found no mention of introspection ([here][1])\r\n\r\nAnd then I would like to get all the properties of the bean with something like this:\r\n\r\n    Arrays.stream(interf.getClass().getDeclaredFields()).forEach(\r\n                            field -&gt; extractStuff(...)\r\n                    );\r\n\r\nWe use Wildfly and WELD but don&#39;t want to bind us to an implementation of CDI.\r\nThanks in advance!\r\n\r\n**EDIT:**\r\nThe question is, more precisely: Do you know a clean CDI solution that WELD is **already** implementing with *TargetInstanceProxy*? Not if I need to go back to school or if I understand what I&#39;m writing.. Thanks for taking time to help!\r\n\r\n  [1]: http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#_injection_points","title":"Get the real object from CDI Proxy","body":"<p>I looked for a clean CDI solution and not a WELD dependent one but so far nothing...</p>\n<p>I need to test if every element of a list of objects that I get with <code>@Inject</code> <code>@Any</code> <code>MyInterface</code> beans is a proxy, and when <code>true</code> I need to get the real object to do introspection and get all the properties of the object.</p>\n<p>My WELD implementation:</p>\n<pre><code>MyInterface interf = obj;\nif (isProxy(interf )) {\n        interf = (Config) ((TargetInstanceProxy)interf ).getTargetInstance();\n}\n</code></pre>\n<p>where <code>isProxy</code> is so defined (CDI solution?):</p>\n<pre><code>public boolean isProxy(Object obj) {\n    try{\n        return Class.forName(&quot;org.jboss.weld.bean.proxy.ProxyObject&quot;).isInstance(obj);\n    } catch (Exception e) {\n        LOGGER.error(&quot;Unable to check if object is proxy&quot;, e);\n    }\n    return false;\n}\n</code></pre>\n<p>Any suggestions /Indications. In the official documentation I found no mention of introspection (<a href=\"http://docs.jboss.org/weld/reference/latest/en-US/html/injection.html#_injection_points\" rel=\"nofollow noreferrer\">here</a>)</p>\n<p>And then I would like to get all the properties of the bean with something like this:</p>\n<pre><code>Arrays.stream(interf.getClass().getDeclaredFields()).forEach(\n                        field -&gt; extractStuff(...)\n                );\n</code></pre>\n<p>We use Wildfly and WELD but don't want to bind us to an implementation of CDI.\nThanks in advance!</p>\n<p><strong>EDIT:</strong>\nThe question is, more precisely: Do you know a clean CDI solution that WELD is <strong>already</strong> implementing with <em>TargetInstanceProxy</em>? Not if I need to go back to school or if I understand what I'm writing.. Thanks for taking time to help!</p>\n"},{"tags":["java","compilation","constants","runtime","final"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":3,"creation_date":1698343702,"post_id":77369382,"comment_id":136396878,"body_markdown":"Right, &quot;constants&quot; have to also be `static` or there&#39;s not a compile time value.  What you have there is just an ordinary runtime value.","body":"Right, &quot;constants&quot; have to also be <code>static</code> or there&#39;s not a compile time value.  What you have there is just an ordinary runtime value."},{"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1698352217,"post_id":77369382,"comment_id":136398256,"body_markdown":"Related: [*Is there any formal definition of constants?*](https://stackoverflow.com/q/43207857/642706)","body":"Related: <a href=\"https://stackoverflow.com/q/43207857/642706\"><i>Is there any formal definition of constants?</i></a>"},{"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"score":0,"creation_date":1698403027,"post_id":77369382,"comment_id":136404039,"body_markdown":"@markspace Can I say maximumLoginAttempts and also instance.maximumLoginAttempts are runtime constants?","body":"@markspace Can I say maximumLoginAttempts and also instance.maximumLoginAttempts are runtime constants?"},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1698417047,"post_id":77369382,"comment_id":136407022,"body_markdown":"I would say `maximumLoginAttempts` is `final`.  Try to not introduce unclear terminology.  I would not say `instance` is a constant because it isn&#39;t even final.","body":"I would say <code>maximumLoginAttempts</code> is <code>final</code>.  Try to not introduce unclear terminology.  I would not say <code>instance</code> is a constant because it isn&#39;t even final."}],"owner":{"account_id":2090997,"reputation":840,"user_id":7516740,"display_name":"elvis"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698403096,"creation_date":1698343229,"question_id":77369382,"body_markdown":"I&#39;m learning about compile-time constants and I want to ask you if that `instance.maximumLoginAttempts` expression is a compile-time constant. I don&#39;t think it is because in my opinion instance reference is obtained at runtime, so the compiler doesn&#39;t know that the value of `instance.maximumLoginAttempts` is 5. Is that correct? Thank you!\r\n    \r\n        public class CompileTimeVariables {\r\n                public final int maximumLoginAttempts = 5;\r\n            \r\n                public static void main(String[] args) {\r\n            \r\n                    CompileTimeVariables instance = new CompileTimeVariables();\r\n                    System.out.println(instance.maximumLoginAttempts);\r\n                }\r\n       }","title":"Compile-time constants when using object reference in Java","body":"<p>I'm learning about compile-time constants and I want to ask you if that <code>instance.maximumLoginAttempts</code> expression is a compile-time constant. I don't think it is because in my opinion instance reference is obtained at runtime, so the compiler doesn't know that the value of <code>instance.maximumLoginAttempts</code> is 5. Is that correct? Thank you!</p>\n<pre><code>    public class CompileTimeVariables {\n            public final int maximumLoginAttempts = 5;\n        \n            public static void main(String[] args) {\n        \n                CompileTimeVariables instance = new CompileTimeVariables();\n                System.out.println(instance.maximumLoginAttempts);\n            }\n   }\n</code></pre>\n"},{"tags":["java","sap-commerce-cloud","sap"],"comments":[{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1698654849,"post_id":77373366,"comment_id":136427958,"body_markdown":"Did you check SearchRestriction?","body":"Did you check SearchRestriction?"},{"owner":{"account_id":24108753,"reputation":33,"user_id":18079592,"display_name":"Swathi"},"score":0,"creation_date":1698668623,"post_id":77373366,"comment_id":136430404,"body_markdown":"Hi @myksoft , thanks for the response. I have disabled search restriction before execution of flexible search and enabled again still the same issue. I used these.... searchRestrictionService.disableSearchRestrictions(); \nsearchRestrictionService.enableSearchRestrictions();","body":"Hi @myksoft , thanks for the response. I have disabled search restriction before execution of flexible search and enabled again still the same issue. I used these.... searchRestrictionService.disableSearchRestrictions();  searchRestrictionService.enableSearchRestrictions();"},{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1698679352,"post_id":77373366,"comment_id":136432577,"body_markdown":"Maybe you can enable flex query logging and compare generated queries.","body":"Maybe you can enable flex query logging and compare generated queries."},{"owner":{"account_id":24108753,"reputation":33,"user_id":18079592,"display_name":"Swathi"},"score":0,"creation_date":1698731200,"post_id":77373366,"comment_id":136439057,"body_markdown":"yes i did, i have taken the generated query and put it in the hac,  i was able to see the records fetched in HAC but not in code. i literally have no idea what to do now.","body":"yes i did, i have taken the generated query and put it in the hac,  i was able to see the records fetched in HAC but not in code. i literally have no idea what to do now."},{"owner":{"account_id":3392662,"reputation":5537,"user_id":2847159,"display_name":"mkysoft"},"score":0,"creation_date":1698740468,"post_id":77373366,"comment_id":136440345,"body_markdown":"Did you compare the queries which are generated by flex and hac? Try to minimize your where condition one by one.","body":"Did you compare the queries which are generated by flex and hac? Try to minimize your where condition one by one."},{"owner":{"account_id":24108753,"reputation":33,"user_id":18079592,"display_name":"Swathi"},"score":0,"creation_date":1698908355,"post_id":77373366,"comment_id":136464534,"body_markdown":"I tried, it was giving zero results and giving results for basic query like select * from {product as pr JOIN CatalogVersion AS cv ON {cv:pk} = {pr:catalogVersion}} where {pr:modifiedtime}&gt;=?time and {cv:version} =&#39;Online&#39; . anything more than this query it is giving zero results","body":"I tried, it was giving zero results and giving results for basic query like select * from {product as pr JOIN CatalogVersion AS cv ON {cv:pk} = {pr:catalogVersion}} where {pr:modifiedtime}&gt;=?time and {cv:version} =&#39;Online&#39; . anything more than this query it is giving zero results"}],"owner":{"account_id":24108753,"reputation":33,"user_id":18079592,"display_name":"Swathi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698402159,"creation_date":1698402159,"question_id":77373366,"body_markdown":"I am using below flexible search query in my DAO class, it is giving zero results always. when I try it in the HAC it is giving results. it is only working for uk-availability and UK Price Group. I want this query to run for all countries for example for fi-availability and FI Price Group. \r\n```\r\npublic List&lt;ProductModel&gt; getProductsByDateTimeRange(Date fromModifiedDate, Date toModifiedDate,BaseSiteModel site) {\r\n\t\ttry {\r\n\t\t\tString siteid=site.getUid().split(&quot;-&quot;,2)[1];\r\n\t\t\tString siteId=siteid.toUpperCase();\r\n\tfinal FlexibleSearchQuery qar = new FlexibleSearchQuery(\r\n\t\t\t\t\t&quot;SELECT {&quot; + ProductModel.PK + &quot;} FROM {&quot; + ProductModel._TYPECODE +\r\n\t\t\t\t\t\t\t&quot; as prod JOIN CatalogVersion AS cv ON {cv:pk} = {prod:catalogVersion} &quot;+\r\n\t\t\t\t\t\t\t&quot;JOIN Catalog AS cat ON {cv:catalog} = {cat:pk} &quot;+\r\n\t\t\t\t\t\t\t&quot;join articleapprovalstatus as st on {prod.approvalstatus}={st.pk} &quot;+\r\n\t\t\t\t\t\t\t&quot;JOIN ProductAvailabilityAssignment as paa ON {paa:product} = {prod:pk} &quot;+\r\n\t\t\t\t\t\t\t&quot;JOIN ProductAvailabilityGroup as pag ON {paa:availabilityGroup} = {pag:pk} &quot; +\r\n\t\t\t\t\t\t\t&quot;JOIN PriceRow AS pricerow ON {pricerow:product} = {prod:pk} &quot;+\r\n\t\t\t\t\t\t\t&quot;JOIN UserPriceGroup AS upg ON {pricerow:ug} = {upg:pk} &quot;+\r\n\t\t\t&quot;} WHERE {prod:&quot; + ProductModel.MODIFIEDTIME + &quot;} &gt;= ?&quot; + ProductModel.MODIFIEDTIME+\r\n\t\t\t\t\t\t\t&quot; AND {cat:name} = &#39;ResMed Product Catalog&#39; AND {cv:version} = &#39;Online&#39;&quot;+\r\n\t\t\t\t\t\t\t&quot; AND {st:code}=&#39;approved&#39; and {pag:id} = &#39;&quot; + siteid + &quot;-availability&#39; and {upg:name} = &#39;&quot;+ siteId +&quot; Price Group&#39; &quot;);\r\n\t\t\tfinal Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\r\n\t\t\tparams.put(ProductModel.MODIFIEDTIME, fromModifiedDate);\r\n\t\t\tqar.addQueryParameter(params); // Replace with the actual timestamp value\r\n\t\t\tList&lt;ProductModel&gt; ress=flexibleSearchService.&lt;ProductModel&gt; search(qar).getResult();\r\n\t\t\tfor (ProductModel product : ress) {\r\n\t\t\t\tDate modifiedTime = product.getModifiedtime(); // Assuming there&#39;s a getter method for modifiedtime\r\n\t\t\t\tLOG.info(&quot;Trail PK: &quot; + product.getCode() + &quot;, Modified Time: &quot; + modifiedTime);\r\n\t\t\t}\r\n\t\t\treturn ress;\r\n\t\t}\r\n\t\tcatch (Exception e){\r\n\t\t\tLOG.error(String.format(&quot;exception flexible search query&quot;,e.getMessage()));\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n```","title":"flexible search query returning zero results in DAO giving results in HAC","body":"<p>I am using below flexible search query in my DAO class, it is giving zero results always. when I try it in the HAC it is giving results. it is only working for uk-availability and UK Price Group. I want this query to run for all countries for example for fi-availability and FI Price Group.</p>\n<pre><code>public List&lt;ProductModel&gt; getProductsByDateTimeRange(Date fromModifiedDate, Date toModifiedDate,BaseSiteModel site) {\n        try {\n            String siteid=site.getUid().split(&quot;-&quot;,2)[1];\n            String siteId=siteid.toUpperCase();\n    final FlexibleSearchQuery qar = new FlexibleSearchQuery(\n                    &quot;SELECT {&quot; + ProductModel.PK + &quot;} FROM {&quot; + ProductModel._TYPECODE +\n                            &quot; as prod JOIN CatalogVersion AS cv ON {cv:pk} = {prod:catalogVersion} &quot;+\n                            &quot;JOIN Catalog AS cat ON {cv:catalog} = {cat:pk} &quot;+\n                            &quot;join articleapprovalstatus as st on {prod.approvalstatus}={st.pk} &quot;+\n                            &quot;JOIN ProductAvailabilityAssignment as paa ON {paa:product} = {prod:pk} &quot;+\n                            &quot;JOIN ProductAvailabilityGroup as pag ON {paa:availabilityGroup} = {pag:pk} &quot; +\n                            &quot;JOIN PriceRow AS pricerow ON {pricerow:product} = {prod:pk} &quot;+\n                            &quot;JOIN UserPriceGroup AS upg ON {pricerow:ug} = {upg:pk} &quot;+\n            &quot;} WHERE {prod:&quot; + ProductModel.MODIFIEDTIME + &quot;} &gt;= ?&quot; + ProductModel.MODIFIEDTIME+\n                            &quot; AND {cat:name} = 'ResMed Product Catalog' AND {cv:version} = 'Online'&quot;+\n                            &quot; AND {st:code}='approved' and {pag:id} = '&quot; + siteid + &quot;-availability' and {upg:name} = '&quot;+ siteId +&quot; Price Group' &quot;);\n            final Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\n            params.put(ProductModel.MODIFIEDTIME, fromModifiedDate);\n            qar.addQueryParameter(params); // Replace with the actual timestamp value\n            List&lt;ProductModel&gt; ress=flexibleSearchService.&lt;ProductModel&gt; search(qar).getResult();\n            for (ProductModel product : ress) {\n                Date modifiedTime = product.getModifiedtime(); // Assuming there's a getter method for modifiedtime\n                LOG.info(&quot;Trail PK: &quot; + product.getCode() + &quot;, Modified Time: &quot; + modifiedTime);\n            }\n            return ress;\n        }\n        catch (Exception e){\n            LOG.error(String.format(&quot;exception flexible search query&quot;,e.getMessage()));\n        }\n        return null;\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa","model","multiple-inheritance"],"answers":[{"tags":[],"owner":{"account_id":48638,"reputation":5944,"user_id":144578,"accept_rate":79,"display_name":"Sebastiaan van den Broek"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698398992,"creation_date":1698398119,"answer_id":77372923,"question_id":77371578,"body_markdown":"In my opinion, just don&#39;t use inheritance. Inheritance doesn&#39;t match the model of a relational database and will always be clumsy. Instead, just define a type enum for your operation, and use a single table. Some database columns will only apply to specific types, which is really not a problem except that it may limit some database-level validation somewhat.\r\n\r\nIf you only need a certain kind of operation, it&#39;s easy to filter on that. If you need all, you have everything together and paging works easily.\r\n\r\nIf you insist on using the `@Inheritance` annotation then you probably also get this to work with the `SINGLE_TABLE` variant, which is basically this but then with a little more magic by the JPA implementation.","title":"JPA multiple inheritence","body":"<p>In my opinion, just don't use inheritance. Inheritance doesn't match the model of a relational database and will always be clumsy. Instead, just define a type enum for your operation, and use a single table. Some database columns will only apply to specific types, which is really not a problem except that it may limit some database-level validation somewhat.</p>\n<p>If you only need a certain kind of operation, it's easy to filter on that. If you need all, you have everything together and paging works easily.</p>\n<p>If you insist on using the <code>@Inheritance</code> annotation then you probably also get this to work with the <code>SINGLE_TABLE</code> variant, which is basically this but then with a little more magic by the JPA implementation.</p>\n"}],"owner":{"account_id":12732750,"reputation":519,"user_id":9248765,"display_name":"Ludov Dmitrii"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698402007,"creation_date":1698382225,"question_id":77371578,"body_markdown":"I&#39;ve this kind of **data model:**\r\n```\r\n@Entity\r\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\r\npublic class Operaton {\r\n    @Id\r\n    private int id;\r\n  \r\n}\r\n\r\n@Entity\r\npublic class Payment extends Operaton {\r\n\r\n}\r\n@Entity\r\npublic class Transfer extends Operaton /*, Operation1*/ {\r\n\r\n}\r\n\r\n@Entity\r\npublic class Payout extends Operaton1 {\r\n}\r\n\r\n@Repository\r\npublic interface OperationRepo extends JpaRepository&lt;Operation, Integer&gt;{\r\n\r\n    Page&lt;Operation&gt; findAll(Pageable pageable);// can obtain page of Payments and Transfers sorted by date\r\n\r\n}\r\n\r\npublic interface OperationRepo1 extends JpaRepository&lt;Operation1, Integer&gt;{\r\n\r\n    Page&lt;Operation1&gt; findAll(Pageable pageable);// can&#39;t obtain page of Transfers and Payouts sorted by date for other view\r\n\r\n}\r\n\r\n```\r\n\r\nThis works well when I need united pagination for one kind of balance report, where Payment + and Transfer -.  \r\nHowever now I need to show pages where Transfer recipient is getting balance pages where Transfer + and Payout as -.  \r\nObviously I can&#39;t just extend Payout as Operation this way, because I don&#39;t need 3-class mutual repository which will provide me pagination. I need 2 repos for 3 tables. Mapping is not a problem, the fields in superclass contains all I need in both cases. But without multiple inheritance I didn&#39;t found a good elegant solution so far, appreciate any help. I use Spring Boot 3.1.2\r\n\r\nUpdate:\r\n\r\nIf there was some way to define second Entity to Transfer table\r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;transfer&quot;)\r\npublic class TransferSecond extends Operation1 \r\n```\r\n\r\nIt would solve a problem and even will not create any if it can be done in a read-only way.\r\nCurrently causes org.hibernate.DuplicateMappingException","title":"JPA multiple inheritence","body":"<p>I've this kind of <strong>data model:</strong></p>\n<pre><code>@Entity\n@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)\npublic class Operaton {\n    @Id\n    private int id;\n  \n}\n\n@Entity\npublic class Payment extends Operaton {\n\n}\n@Entity\npublic class Transfer extends Operaton /*, Operation1*/ {\n\n}\n\n@Entity\npublic class Payout extends Operaton1 {\n}\n\n@Repository\npublic interface OperationRepo extends JpaRepository&lt;Operation, Integer&gt;{\n\n    Page&lt;Operation&gt; findAll(Pageable pageable);// can obtain page of Payments and Transfers sorted by date\n\n}\n\npublic interface OperationRepo1 extends JpaRepository&lt;Operation1, Integer&gt;{\n\n    Page&lt;Operation1&gt; findAll(Pageable pageable);// can't obtain page of Transfers and Payouts sorted by date for other view\n\n}\n\n</code></pre>\n<p>This works well when I need united pagination for one kind of balance report, where Payment + and Transfer -.<br />\nHowever now I need to show pages where Transfer recipient is getting balance pages where Transfer + and Payout as -.<br />\nObviously I can't just extend Payout as Operation this way, because I don't need 3-class mutual repository which will provide me pagination. I need 2 repos for 3 tables. Mapping is not a problem, the fields in superclass contains all I need in both cases. But without multiple inheritance I didn't found a good elegant solution so far, appreciate any help. I use Spring Boot 3.1.2</p>\n<p>Update:</p>\n<p>If there was some way to define second Entity to Transfer table</p>\n<pre><code>@Entity\n@Table(name = &quot;transfer&quot;)\npublic class TransferSecond extends Operation1 \n</code></pre>\n<p>It would solve a problem and even will not create any if it can be done in a read-only way.\nCurrently causes org.hibernate.DuplicateMappingException</p>\n"},{"tags":["java","list","java-8"],"comments":[{"owner":{"account_id":682692,"reputation":49061,"user_id":535275,"accept_rate":91,"display_name":"Scott Hunter"},"score":2,"creation_date":1698336070,"post_id":77368599,"comment_id":136395459,"body_markdown":"Please post you attempt to solve this problem.","body":"Please post you attempt to solve this problem."},{"owner":{"account_id":209503,"reputation":22790,"user_id":460557,"accept_rate":100,"display_name":"Jorge Campos"},"score":2,"creation_date":1698336078,"post_id":77368599,"comment_id":136395463,"body_markdown":"Add to your question the code you tried or the one you think it is not good enough.","body":"Add to your question the code you tried or the one you think it is not good enough."}],"answers":[{"tags":[],"owner":{"account_id":1960454,"reputation":44539,"user_id":1762224,"accept_rate":61,"display_name":"Mr. Polywhirl"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698347273,"creation_date":1698346949,"answer_id":77369717,"question_id":77368599,"body_markdown":"You would have to add all of dataset A to a new list and compute the id offset by referencing the final item in dataset A.\r\n\r\nOnce you have the offset, you can clone and append all of dataset B to the new list.\r\n\r\n```java\r\nstatic List&lt;Student&gt; combine(List&lt;Student&gt; left, List&lt;Student&gt; right) {\r\n    List&lt;Student&gt; combined = new ArrayList&lt;&gt;(left);\r\n    final long idOffset = combined.get(combined.size() - 1).getId();\r\n    combined.addAll(right.stream()\r\n            .map((student -&gt;\r\n                    student.toBuilder()\r\n                            .id(student.getId() + idOffset)\r\n                            .build()))\r\n            .toList());\r\n    return combined;\r\n}\r\n```\r\n\r\n\r\n## Full example\r\n\r\n```java\r\nimport lombok.Builder;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.Getter;\r\nimport lombok.ToString;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Arrays;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class DataProcessor {\r\n    private static final String[] COLUMN_NAMES = { &quot;schoolId&quot;, &quot;id&quot;, &quot;countryCode&quot;, &quot;cityCode&quot; };\r\n\r\n    public static void main(String[] args) {\r\n        List&lt;Student&gt; datasetA = parseDataset(DATASET_A);\r\n        List&lt;Student&gt; datasetB = parseDataset(DATASET_B);\r\n        List&lt;Student&gt; combined = combine(datasetA, datasetB);\r\n        printDataset(combined);\r\n    }\r\n\r\n    private static String datasetHeaderFormat = &quot;%8s | %4s | %11s | %8s%n&quot;;\r\n    private static String datasetRowFormat = &quot;%8d %6d %13d %10d%n&quot;;\r\n\r\n    static void printDataset(List&lt;Student&gt; students) {\r\n        System.out.printf(datasetHeaderFormat, COLUMN_NAMES);\r\n        for (Student student : students) {\r\n            System.out.printf(datasetRowFormat,\r\n                    student.getSchoolId(),\r\n                    student.getId(),\r\n                    student.getCountryCode(),\r\n                    student.getCityCode());\r\n        }\r\n    }\r\n\r\n    static List&lt;Student&gt; combine(List&lt;Student&gt; left, List&lt;Student&gt; right) {\r\n        List&lt;Student&gt; combined = new ArrayList&lt;&gt;(left);\r\n        final long idOffset = combined.get(combined.size() - 1).getId();\r\n        combined.addAll(right.stream()\r\n                .map((student -&gt;\r\n                        student.toBuilder()\r\n                                .id(student.getId() + idOffset)\r\n                                .build()))\r\n                .toList());\r\n        return combined;\r\n    }\r\n\r\n    static List&lt;Student&gt; parseDataset(String dataset) {\r\n        return Arrays.stream(dataset.trim()\r\n                        .split(&quot;\\n&quot;)).skip(1)\r\n                .map(DataProcessor::parseLine)\r\n                .collect(Collectors.toList());\r\n    }\r\n\r\n    private static Student parseLine(String line) {\r\n        String[] tokens = line.trim().split(&quot;\\\\s+&quot;);\r\n        if (tokens.length != 4) {\r\n            throw new IllegalArgumentException(&quot;Expected a token count of 4&quot;);\r\n        }\r\n        return Student.builder()\r\n                .schoolId(Long.parseLong(tokens[0]))\r\n                .id(Long.parseLong(tokens[1]))\r\n                .countryCode(Integer.parseInt(tokens[2]))\r\n                .cityCode(Integer.parseInt(tokens[3]))\r\n                .build();\r\n    }\r\n\r\n    @Builder(toBuilder = true)\r\n    @EqualsAndHashCode\r\n    @Getter\r\n    @ToString\r\n    private static final class Student {\r\n        private long id;\r\n        private long schoolId;\r\n        private int countryCode;\r\n        private int cityCode;\r\n    }\r\n\r\n    static String DATASET_A = &quot;&quot;&quot;\r\n            schoolId | id | countryCode | cityCode\r\n            5555       1      20            1\r\n            5555       1      24            2\r\n            5555       2      1             3\r\n            5555       3      1             3\r\n            5555       4      1             3\r\n            &quot;&quot;&quot;;\r\n\r\n    static String DATASET_B = &quot;&quot;&quot;\r\n            schoolId | id | countryCode | cityCode\r\n            6666       1      20            1\r\n            6666       1      24            2\r\n            6666       2      20            1\r\n            6666       2      24            2\r\n            6666       3      20            1\r\n            6666       3      24            2\r\n            6666       4      20            1\r\n            6666       4      24            2\r\n            6666       5      1             3\r\n            6666       6      1             3\r\n            &quot;&quot;&quot;;\r\n}\r\n```\r\n\r\n### Output\r\n\r\n```\r\nschoolId |   id | countryCode | cityCode\r\n    5555      1            20          1\r\n    5555      1            24          2\r\n    5555      2             1          3\r\n    5555      3             1          3\r\n    5555      4             1          3\r\n    6666      5            20          1\r\n    6666      5            24          2\r\n    6666      6            20          1\r\n    6666      6            24          2\r\n    6666      7            20          1\r\n    6666      7            24          2\r\n    6666      8            20          1\r\n    6666      8            24          2\r\n    6666      9             1          3\r\n    6666     10             1          3\r\n```","title":"merge two list on same field logic","body":"<p>You would have to add all of dataset A to a new list and compute the id offset by referencing the final item in dataset A.</p>\n<p>Once you have the offset, you can clone and append all of dataset B to the new list.</p>\n<pre class=\"lang-java prettyprint-override\"><code>static List&lt;Student&gt; combine(List&lt;Student&gt; left, List&lt;Student&gt; right) {\n    List&lt;Student&gt; combined = new ArrayList&lt;&gt;(left);\n    final long idOffset = combined.get(combined.size() - 1).getId();\n    combined.addAll(right.stream()\n            .map((student -&gt;\n                    student.toBuilder()\n                            .id(student.getId() + idOffset)\n                            .build()))\n            .toList());\n    return combined;\n}\n</code></pre>\n<h2>Full example</h2>\n<pre class=\"lang-java prettyprint-override\"><code>import lombok.Builder;\nimport lombok.EqualsAndHashCode;\nimport lombok.Getter;\nimport lombok.ToString;\n\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class DataProcessor {\n    private static final String[] COLUMN_NAMES = { &quot;schoolId&quot;, &quot;id&quot;, &quot;countryCode&quot;, &quot;cityCode&quot; };\n\n    public static void main(String[] args) {\n        List&lt;Student&gt; datasetA = parseDataset(DATASET_A);\n        List&lt;Student&gt; datasetB = parseDataset(DATASET_B);\n        List&lt;Student&gt; combined = combine(datasetA, datasetB);\n        printDataset(combined);\n    }\n\n    private static String datasetHeaderFormat = &quot;%8s | %4s | %11s | %8s%n&quot;;\n    private static String datasetRowFormat = &quot;%8d %6d %13d %10d%n&quot;;\n\n    static void printDataset(List&lt;Student&gt; students) {\n        System.out.printf(datasetHeaderFormat, COLUMN_NAMES);\n        for (Student student : students) {\n            System.out.printf(datasetRowFormat,\n                    student.getSchoolId(),\n                    student.getId(),\n                    student.getCountryCode(),\n                    student.getCityCode());\n        }\n    }\n\n    static List&lt;Student&gt; combine(List&lt;Student&gt; left, List&lt;Student&gt; right) {\n        List&lt;Student&gt; combined = new ArrayList&lt;&gt;(left);\n        final long idOffset = combined.get(combined.size() - 1).getId();\n        combined.addAll(right.stream()\n                .map((student -&gt;\n                        student.toBuilder()\n                                .id(student.getId() + idOffset)\n                                .build()))\n                .toList());\n        return combined;\n    }\n\n    static List&lt;Student&gt; parseDataset(String dataset) {\n        return Arrays.stream(dataset.trim()\n                        .split(&quot;\\n&quot;)).skip(1)\n                .map(DataProcessor::parseLine)\n                .collect(Collectors.toList());\n    }\n\n    private static Student parseLine(String line) {\n        String[] tokens = line.trim().split(&quot;\\\\s+&quot;);\n        if (tokens.length != 4) {\n            throw new IllegalArgumentException(&quot;Expected a token count of 4&quot;);\n        }\n        return Student.builder()\n                .schoolId(Long.parseLong(tokens[0]))\n                .id(Long.parseLong(tokens[1]))\n                .countryCode(Integer.parseInt(tokens[2]))\n                .cityCode(Integer.parseInt(tokens[3]))\n                .build();\n    }\n\n    @Builder(toBuilder = true)\n    @EqualsAndHashCode\n    @Getter\n    @ToString\n    private static final class Student {\n        private long id;\n        private long schoolId;\n        private int countryCode;\n        private int cityCode;\n    }\n\n    static String DATASET_A = &quot;&quot;&quot;\n            schoolId | id | countryCode | cityCode\n            5555       1      20            1\n            5555       1      24            2\n            5555       2      1             3\n            5555       3      1             3\n            5555       4      1             3\n            &quot;&quot;&quot;;\n\n    static String DATASET_B = &quot;&quot;&quot;\n            schoolId | id | countryCode | cityCode\n            6666       1      20            1\n            6666       1      24            2\n            6666       2      20            1\n            6666       2      24            2\n            6666       3      20            1\n            6666       3      24            2\n            6666       4      20            1\n            6666       4      24            2\n            6666       5      1             3\n            6666       6      1             3\n            &quot;&quot;&quot;;\n}\n</code></pre>\n<h3>Output</h3>\n<pre><code>schoolId |   id | countryCode | cityCode\n    5555      1            20          1\n    5555      1            24          2\n    5555      2             1          3\n    5555      3             1          3\n    5555      4             1          3\n    6666      5            20          1\n    6666      5            24          2\n    6666      6            20          1\n    6666      6            24          2\n    6666      7            20          1\n    6666      7            24          2\n    6666      8            20          1\n    6666      8            24          2\n    6666      9             1          3\n    6666     10             1          3\n</code></pre>\n"}],"owner":{"account_id":29262711,"reputation":15,"user_id":22419286,"display_name":"tom"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77369717,"answer_count":1,"score":-1,"last_activity_date":1698401890,"creation_date":1698335946,"question_id":77368599,"body_markdown":"I have two list and two list have same field. Some students have two houses in different countries. I want to increase id field of studentList2 while merging two list. I can use two for loop to check all list but do you know better solution for this problem.\r\n\r\n\r\nList1 is studentList1 \r\n\r\n  ```\r\n  schoolId | id | countryCode | cityCode\r\n  5555       1      20            1\r\n  5555       1      24            2\r\n  5555       2      1             3\r\n  5555       3      1             3\r\n  5555       4      1             3\r\n  ```\r\nList2 is studentList2\r\n\r\n```\r\n  schoolId | id | countryCode | cityCode\r\n  6666       1      20            1\r\n  6666       1      24            2\r\n  6666       2      20            1\r\n  6666       2      24            2\r\n  6666       3      20            1\r\n  6666       3      24            2\r\n  6666       4      20            1\r\n  6666       4      24            2\r\n  6666       5      1             3\r\n  6666       6      1             3\r\n```\r\nMy expectation is \r\n```\r\n  schoolId | id | countryCode | cityCode\r\n  5555       1      20            1\r\n  5555       1      24            2\r\n  5555       2      1             3\r\n  5555       3      1             3\r\n  5555       4      1             3\r\n  6666       5      20            1\r\n  6666       5      24            2\r\n  6666       6      20            1\r\n  6666       6      24            2\r\n  6666       7      20            1\r\n  6666       7      24            2\r\n  6666       8      20            1\r\n  6666       8      24            2\r\n  6666       9      1             3\r\n  6666       10     1             3\r\n```\r\n\r\n\r\nI can use two for loop to compare list fields but I want to find better solution.","title":"merge two list on same field logic","body":"<p>I have two list and two list have same field. Some students have two houses in different countries. I want to increase id field of studentList2 while merging two list. I can use two for loop to check all list but do you know better solution for this problem.</p>\n<p>List1 is studentList1</p>\n<pre><code>schoolId | id | countryCode | cityCode\n5555       1      20            1\n5555       1      24            2\n5555       2      1             3\n5555       3      1             3\n5555       4      1             3\n</code></pre>\n<p>List2 is studentList2</p>\n<pre><code>  schoolId | id | countryCode | cityCode\n  6666       1      20            1\n  6666       1      24            2\n  6666       2      20            1\n  6666       2      24            2\n  6666       3      20            1\n  6666       3      24            2\n  6666       4      20            1\n  6666       4      24            2\n  6666       5      1             3\n  6666       6      1             3\n</code></pre>\n<p>My expectation is</p>\n<pre><code>  schoolId | id | countryCode | cityCode\n  5555       1      20            1\n  5555       1      24            2\n  5555       2      1             3\n  5555       3      1             3\n  5555       4      1             3\n  6666       5      20            1\n  6666       5      24            2\n  6666       6      20            1\n  6666       6      24            2\n  6666       7      20            1\n  6666       7      24            2\n  6666       8      20            1\n  6666       8      24            2\n  6666       9      1             3\n  6666       10     1             3\n</code></pre>\n<p>I can use two for loop to compare list fields but I want to find better solution.</p>\n"},{"tags":["java","eclipse","libraries","dsl","xtext"],"answers":[{"tags":[],"owner":{"account_id":899065,"reputation":11808,"user_id":935687,"display_name":"Christian Dietrich"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1479825034,"creation_date":1479825034,"answer_id":40744506,"question_id":40731406,"body_markdown":"if you add libs to the buildpath\r\n\r\n 1. copy it to a new lib folder inside the plugin\r\n 2. adapt the manifest and add the jars as entries (runtime tab, classpath section)\r\n 3. add the jars to be included in build.properties (there should be a warning and a quickfix) ","title":"Cannot add libraries to xtext Project in Eclipse (returns error)","body":"<p>if you add libs to the buildpath</p>\n\n<ol>\n<li>copy it to a new lib folder inside the plugin</li>\n<li>adapt the manifest and add the jars as entries (runtime tab, classpath section)</li>\n<li>add the jars to be included in build.properties (there should be a warning and a quickfix) </li>\n</ol>\n"}],"owner":{"account_id":9145658,"reputation":17,"user_id":6801974,"display_name":"Manuel Lu&#237;s"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":399,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":40744506,"answer_count":1,"score":1,"last_activity_date":1698401303,"creation_date":1479771369,"question_id":40731406,"body_markdown":"Firstly, I created an xtext project using default values (with the simple Greetings grammar which comes as an example).\r\n\r\nI created then a .java file with some code (that can be seen below) and added it to the validation folder.\r\n\r\nI have loaded some jars to the build path as I would do in a normal Java Project. If I run my specific java file as a standalone it will load the libraries and run the code. The java file is quite simple:\r\n\r\n    import org.semanticweb.owlapi.apibinding.OWLManager;\r\n    import org.semanticweb.owlapi.model.OWLOntologyCreationException;\r\n    import org.semanticweb.owlapi.model.OWLOntologyManager;\r\n    import org.xtext.example.mydsl.myDsl.Greeting;\r\n\r\n\tpublic static void main(String[] args){\r\n\t\tGreeting hey = null;\r\n\t\ttry {\r\n\t\t\ttest(hey);\r\n\t\t} catch (OWLOntologyCreationException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n    public static void test(Greeting imp) throws OWLOntologyCreationException {\r\n    \tOWLOntologyManager manager = OWLManager.createOWLOntologyManager();\r\n\t    System.out.println(&quot;success!&quot;);\t    \r\n    }\r\n\r\nHowever, if a call the &quot;test&quot; function from the .xtend validator file, it will generate this error:\r\n\r\n    java.lang.NoClassDefFoundError: org/semanticweb/owlapi/model/OWLOntologyCreationException\r\n    at org.xtext.example.mydsl.validation.MyDslValidator.checkGreetingStartsWithCapital(MyDslValidator.java:24)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    /* (has some more &quot;at&quot; in the middle) */\r\n    Caused by: java.lang.ClassNotFoundException: org.semanticweb.owlapi.model.OWLOntologyCreationException cannot be found by org.xtext.example.mydsl_1.0.0.qualifier\r\n\tat org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)\r\n\tat org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)\r\n\tat org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)\r\n\tat org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n\t... 32 more\r\n\r\nWhen it mentioned &quot;cannot be found by org.xtext.example.mydsl_1.0.0.qualifier&quot; I assumed the problem was in the manifest, but I&#39;ve tried adding the libraries to the manifest in every way possible but to no avail. ","title":"Cannot add libraries to xtext Project in Eclipse (returns error)","body":"<p>Firstly, I created an xtext project using default values (with the simple Greetings grammar which comes as an example).</p>\n\n<p>I created then a .java file with some code (that can be seen below) and added it to the validation folder.</p>\n\n<p>I have loaded some jars to the build path as I would do in a normal Java Project. If I run my specific java file as a standalone it will load the libraries and run the code. The java file is quite simple:</p>\n\n<pre><code>import org.semanticweb.owlapi.apibinding.OWLManager;\nimport org.semanticweb.owlapi.model.OWLOntologyCreationException;\nimport org.semanticweb.owlapi.model.OWLOntologyManager;\nimport org.xtext.example.mydsl.myDsl.Greeting;\n\npublic static void main(String[] args){\n    Greeting hey = null;\n    try {\n        test(hey);\n    } catch (OWLOntologyCreationException e) {\n        e.printStackTrace();\n    }\n}\n\npublic static void test(Greeting imp) throws OWLOntologyCreationException {\n    OWLOntologyManager manager = OWLManager.createOWLOntologyManager();\n    System.out.println(\"success!\");     \n}\n</code></pre>\n\n<p>However, if a call the \"test\" function from the .xtend validator file, it will generate this error:</p>\n\n<pre><code>java.lang.NoClassDefFoundError: org/semanticweb/owlapi/model/OWLOntologyCreationException\nat org.xtext.example.mydsl.validation.MyDslValidator.checkGreetingStartsWithCapital(MyDslValidator.java:24)\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n/* (has some more \"at\" in the middle) */\nCaused by: java.lang.ClassNotFoundException: org.semanticweb.owlapi.model.OWLOntologyCreationException cannot be found by org.xtext.example.mydsl_1.0.0.qualifier\nat org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:461)\nat org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:372)\nat org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:364)\nat org.eclipse.osgi.internal.loader.ModuleClassLoader.loadClass(ModuleClassLoader.java:161)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n... 32 more\n</code></pre>\n\n<p>When it mentioned \"cannot be found by org.xtext.example.mydsl_1.0.0.qualifier\" I assumed the problem was in the manifest, but I've tried adding the libraries to the manifest in every way possible but to no avail. </p>\n"},{"tags":["java","android","android-studio","dynamic","textview"],"comments":[{"owner":{"account_id":13488148,"reputation":170,"user_id":17404078,"display_name":"Ali Jawad Hussain Gorayya"},"score":0,"creation_date":1698391663,"post_id":77372052,"comment_id":136401962,"body_markdown":"For listing you can move to recycler view or list view or you can simply display text in text view using for loop like list.forEach { t.setText(&quot;Your text\\n&quot;)}","body":"For listing you can move to recycler view or list view or you can simply display text in text view using for loop like list.forEach { t.setText(&quot;Your text\\n&quot;)}"}],"answers":[{"tags":[],"owner":{"account_id":26900530,"reputation":5,"user_id":20477748,"display_name":"Ehsan Taghizadeh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698395775,"creation_date":1698395583,"answer_id":77372633,"question_id":77372052,"body_markdown":"in Android, in the first step, you put each feature of the palette in xml, you have to **identify** it in java files\r\nlike this\r\n\r\nTextView textView = findViewById(R.id.textView);\r\n\r\nThen you can apply the changes\r\nWhat you did was to create an object from textView, which is wrong in the case of material design\r\nRather, it applies to classes, fragments, adapters, etc","title":"Generate TextView dynamically on Android Studio","body":"<p>in Android, in the first step, you put each feature of the palette in xml, you have to <strong>identify</strong> it in java files\nlike this</p>\n<p>TextView textView = findViewById(R.id.textView);</p>\n<p>Then you can apply the changes\nWhat you did was to create an object from textView, which is wrong in the case of material design\nRather, it applies to classes, fragments, adapters, etc</p>\n"},{"tags":[],"owner":{"account_id":15795938,"reputation":2015,"user_id":11397760,"display_name":"nasibeyyubov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698401037,"creation_date":1698401037,"answer_id":77373258,"question_id":77372052,"body_markdown":"You need first create XML layout and create TextView component there\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;androidx.appcompat.widget.LinearLayoutCompat xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n    \r\n        &lt;TextView\r\n            android:id=&quot;@+id/text_view&quot;\r\n            android:layout_width=&quot;wrap_content&quot;\r\n            android:layout_height=&quot;wrap_content&quot; /&gt;\r\n    \r\n    \r\n    &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\r\n\r\n\r\nthen you go code and get text view, and append all the strings using \\n so that at the end of each string it goes to new line\r\n\r\n    class MainActivity : Activity() {\r\n    \r\n        override fun onCreate(savedInstanceState: Bundle?) {\r\n            super.onCreate(savedInstanceState)\r\n            setContentView(R.layout.activity_main)\r\n    \r\n    \r\n            val textView = findViewById&lt;R.id.text_view&gt;()\r\n    \r\n            val yourList = listOf(&quot;Here&quot;, &quot;Will&quot;, &quot;Be&quot;, &quot;Your&quot;, &quot;Strings&quot;)\r\n    \r\n            yourList.forEach { textView.text = textView.text + it + &quot;\\n&quot; }\r\n        }\r\n    \r\n    }\r\n\r\n\r\nFor showing your items in a scrollable list, you need to use `ScrollView`, for better performance you need to use `RecyclerView`","title":"Generate TextView dynamically on Android Studio","body":"<p>You need first create XML layout and create TextView component there</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.appcompat.widget.LinearLayoutCompat xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n\n    &lt;TextView\n        android:id=&quot;@+id/text_view&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot; /&gt;\n\n\n&lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;\n</code></pre>\n<p>then you go code and get text view, and append all the strings using \\n so that at the end of each string it goes to new line</p>\n<pre><code>class MainActivity : Activity() {\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n\n        val textView = findViewById&lt;R.id.text_view&gt;()\n\n        val yourList = listOf(&quot;Here&quot;, &quot;Will&quot;, &quot;Be&quot;, &quot;Your&quot;, &quot;Strings&quot;)\n\n        yourList.forEach { textView.text = textView.text + it + &quot;\\n&quot; }\n    }\n\n}\n</code></pre>\n<p>For showing your items in a scrollable list, you need to use <code>ScrollView</code>, for better performance you need to use <code>RecyclerView</code></p>\n"}],"owner":{"account_id":27701204,"reputation":3,"user_id":21145746,"display_name":"Gio "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698401037,"creation_date":1698389910,"question_id":77372052,"body_markdown":"I am totally new to Android Studio with Java, I am familiar only with html , CSS , JavaScript and PHP. \r\n\r\nI am building an app and I need it to generate a list of items from an array. How do I do that? \r\n\r\n\r\n\r\nI tried to do simply this, but nothing shows up in the activity!\r\n\r\npublic void view(View v){\r\n \r\n \r\n        TextView t = new TextView(viewAuto.this);\r\n \r\n        t.setTextColor(Color.RED);\r\nt.setText(&quot;PIPPO&quot;);\r\n    }","title":"Generate TextView dynamically on Android Studio","body":"<p>I am totally new to Android Studio with Java, I am familiar only with html , CSS , JavaScript and PHP.</p>\n<p>I am building an app and I need it to generate a list of items from an array. How do I do that?</p>\n<p>I tried to do simply this, but nothing shows up in the activity!</p>\n<p>public void view(View v){</p>\n<pre><code>    TextView t = new TextView(viewAuto.this);\n\n    t.setTextColor(Color.RED);\n</code></pre>\n<p>t.setText(&quot;PIPPO&quot;);\n}</p>\n"},{"tags":["java","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":26565404,"reputation":28,"user_id":20192533,"display_name":"Omar Ahmed"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666549474,"creation_date":1666549474,"answer_id":74173687,"question_id":74171694,"body_markdown":"If you [follow this link](https://code.visualstudio.com/docs/java/java-project#_configure-jdk) you should find some helpful information. VSC supports Java versions 1.5 and above \r\n\r\nIf I could give my two cents however, there are many IDEs that are much more intuitive and have built-in Java support where VSC does not. IDEs like IntelliJ or Eclipse are your best options for debugging, maven, library support, etc. (IntelliJ is my personal favourite).","title":"VSCode can&#39;t change Java Version in &quot;Configure Java Runtime&quot;","body":"<p>If you <a href=\"https://code.visualstudio.com/docs/java/java-project#_configure-jdk\" rel=\"nofollow noreferrer\">follow this link</a> you should find some helpful information. VSC supports Java versions 1.5 and above</p>\n<p>If I could give my two cents however, there are many IDEs that are much more intuitive and have built-in Java support where VSC does not. IDEs like IntelliJ or Eclipse are your best options for debugging, maven, library support, etc. (IntelliJ is my personal favourite).</p>\n"},{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666594590,"creation_date":1666594590,"answer_id":74177522,"question_id":74171694,"body_markdown":"First of all, you have to make sure that the corresponding version of jdk is installed on your machine. and then select it in the **Configure Java Runtime** interface. It can also be configured in the **settings.json** file.\r\n\r\n```json\r\n    &quot;java.configuration.runtimes&quot;: [\r\n        {\r\n            &quot;name&quot;: &quot;JavaSE-16&quot;,\r\n            &quot;path&quot;: &quot;C:\\\\Program Files\\\\Java\\\\jdk-16.0.2&quot;\r\n        },\r\n        {\r\n            &quot;name&quot;: &quot;JavaSE-17&quot;,\r\n            &quot;path&quot;: &quot;C:\\\\Users\\\\Admin\\\\AppData\\\\Local\\\\Programs\\\\Eclipse Adoptium\\\\jdk-17.0.3.7-hotspot&quot;\r\n        },\r\n        {\r\n            &quot;name&quot;: &quot;JavaSE-18&quot;,\r\n            &quot;path&quot;: &quot;C:\\\\Program Files\\\\Java\\\\jdk-18.0.1.1&quot;,\r\n            &quot;default&quot;: true\r\n        }\r\n    ]\r\n```\r\n\r\nIt should be noted that if your project uses a build tool, then you need to modify the Java version in the corresponding configuration file.","title":"VSCode can&#39;t change Java Version in &quot;Configure Java Runtime&quot;","body":"<p>First of all, you have to make sure that the corresponding version of jdk is installed on your machine. and then select it in the <strong>Configure Java Runtime</strong> interface. It can also be configured in the <strong>settings.json</strong> file.</p>\n<pre class=\"lang-json prettyprint-override\"><code>    &quot;java.configuration.runtimes&quot;: [\n        {\n            &quot;name&quot;: &quot;JavaSE-16&quot;,\n            &quot;path&quot;: &quot;C:\\\\Program Files\\\\Java\\\\jdk-16.0.2&quot;\n        },\n        {\n            &quot;name&quot;: &quot;JavaSE-17&quot;,\n            &quot;path&quot;: &quot;C:\\\\Users\\\\Admin\\\\AppData\\\\Local\\\\Programs\\\\Eclipse Adoptium\\\\jdk-17.0.3.7-hotspot&quot;\n        },\n        {\n            &quot;name&quot;: &quot;JavaSE-18&quot;,\n            &quot;path&quot;: &quot;C:\\\\Program Files\\\\Java\\\\jdk-18.0.1.1&quot;,\n            &quot;default&quot;: true\n        }\n    ]\n</code></pre>\n<p>It should be noted that if your project uses a build tool, then you need to modify the Java version in the corresponding configuration file.</p>\n"},{"tags":[],"owner":{"account_id":3319392,"reputation":11,"user_id":2790936,"display_name":"Footleg"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698399740,"creation_date":1698399740,"answer_id":77373110,"question_id":74171694,"body_markdown":"I have also been struggling to get VSCode to use the JDK version I want. In my case I am using gradle build tools, and these are picking up the correct JDK from my JAVA_HOME environment variable. But the Java extension for VSCode still picked up JDK17 and was using this for debugging. I tried many things suggested on Stack Overflow and other forums, including adding the following in my settings.json\r\n\r\n&gt; &quot;java.jdt.ls.java.home&quot;: &quot;C:/Program Files/Semeru/jdk-11.0.20.101-openj9&quot;,\r\n\r\nBut VSCode still stubbornly picked up Semeru JDK 17 (also installed on my PC). Finally I found the setting which fixed this. I edited the registry and removed the keys for 17 under Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\JDK\\ (all of which contained paths to JDK 17 versions no longer on my computer). I then added the following keys: \r\n\r\n&gt; Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\JDK\\11\r\n&gt; Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\JDK\\11.0.20.101\r\n\r\nIn each of these keys, create the item\r\n&gt;    JavaHome = C:\\Program Files\\Semeru\\jdk-11.0.20.101-openj9\r\n\r\nTo be sure you get this right, you can rename the 17 key to 11, and change the JavaHome path value under that key, rather than deleting the old key and then recreating it.\r\n\r\nNow VSCode picks this JDK 11 when I reopen my workspace, and uses this JDK for the debugger.","title":"VSCode can&#39;t change Java Version in &quot;Configure Java Runtime&quot;","body":"<p>I have also been struggling to get VSCode to use the JDK version I want. In my case I am using gradle build tools, and these are picking up the correct JDK from my JAVA_HOME environment variable. But the Java extension for VSCode still picked up JDK17 and was using this for debugging. I tried many things suggested on Stack Overflow and other forums, including adding the following in my settings.json</p>\n<blockquote>\n<p>&quot;java.jdt.ls.java.home&quot;: &quot;C:/Program Files/Semeru/jdk-11.0.20.101-openj9&quot;,</p>\n</blockquote>\n<p>But VSCode still stubbornly picked up Semeru JDK 17 (also installed on my PC). Finally I found the setting which fixed this. I edited the registry and removed the keys for 17 under Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\JDK\\ (all of which contained paths to JDK 17 versions no longer on my computer). I then added the following keys:</p>\n<blockquote>\n<p>Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\JDK\\11\nComputer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\JavaSoft\\JDK\\11.0.20.101</p>\n</blockquote>\n<p>In each of these keys, create the item</p>\n<blockquote>\n<p>JavaHome = C:\\Program Files\\Semeru\\jdk-11.0.20.101-openj9</p>\n</blockquote>\n<p>To be sure you get this right, you can rename the 17 key to 11, and change the JavaHome path value under that key, rather than deleting the old key and then recreating it.</p>\n<p>Now VSCode picks this JDK 11 when I reopen my workspace, and uses this JDK for the debugger.</p>\n"}],"owner":{"account_id":17543879,"reputation":11,"user_id":12725564,"display_name":"Oliver Steiner"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1708,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1698399740,"creation_date":1666533449,"question_id":74171694,"body_markdown":"Im trying to configure a Java Web project in VSCode and want to use Java 8 for a project.\r\n\r\n[Configure Java Classpath Window][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/YpGmJ.png\r\n\r\nThe value &quot;Java Version&quot; is set to 19 and i can select other versions but it wont ever get saved. If i press CTRL+S or press the pen button next to the selection, nothing happens. If i come back to this screen after changing it its back to version 19 (which i dont want).\r\n\r\nIs there another way to change this setting or am i doing something wrong?\r\n\r\nI installed the Java Extensions Pack already.","title":"VSCode can&#39;t change Java Version in &quot;Configure Java Runtime&quot;","body":"<p>Im trying to configure a Java Web project in VSCode and want to use Java 8 for a project.</p>\n<p><a href=\"https://i.stack.imgur.com/YpGmJ.png\" rel=\"nofollow noreferrer\">Configure Java Classpath Window</a></p>\n<p>The value &quot;Java Version&quot; is set to 19 and i can select other versions but it wont ever get saved. If i press CTRL+S or press the pen button next to the selection, nothing happens. If i come back to this screen after changing it its back to version 19 (which i dont want).</p>\n<p>Is there another way to change this setting or am i doing something wrong?</p>\n<p>I installed the Java Extensions Pack already.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":278210,"reputation":176444,"user_id":572670,"accept_rate":92,"display_name":"amit"},"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1305405823,"creation_date":1305405823,"answer_id":6004679,"question_id":6004668,"body_markdown":"assume you store your ip as a string called ip, you can use `String.split()` to get an array of the parts:\r\n\r\n    String[] tokens = ip.split(&quot;\\\\.&quot;);","title":"Getting a part of IP address String","body":"<p>assume you store your ip as a string called ip, you can use <code>String.split()</code> to get an array of the parts:</p>\n\n<pre><code>String[] tokens = ip.split(\"\\\\.\");\n</code></pre>\n"},{"tags":[],"owner":{"account_id":316156,"reputation":1292,"user_id":632164,"accept_rate":100,"display_name":"Fredrik"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1305494906,"creation_date":1305405852,"answer_id":6004682,"question_id":6004668,"body_markdown":"Take a look at String.split() it&#39;s equivalent to php&#39;s explode()","title":"Getting a part of IP address String","body":"<p>Take a look at String.split() it's equivalent to php's explode()</p>\n"},{"tags":[],"owner":{"account_id":80936,"reputation":13757,"user_id":228534,"accept_rate":100,"display_name":"Soumya"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1305405876,"creation_date":1305405876,"answer_id":6004684,"question_id":6004668,"body_markdown":"    ip.substring(0, ip.indexOf(&#39;.&#39;,ip.indexOf(&#39;.&#39;) + 1) + 1)\r\n\r\nwhere `ip` is the string holding the IP address.","title":"Getting a part of IP address String","body":"<pre><code>ip.substring(0, ip.indexOf('.',ip.indexOf('.') + 1) + 1)\n</code></pre>\n\n<p>where <code>ip</code> is the string holding the IP address.</p>\n"},{"tags":[],"owner":{"account_id":387465,"reputation":4697,"user_id":745827,"accept_rate":88,"display_name":"Cengiz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698399530,"creation_date":1305411536,"answer_id":6005146,"question_id":6004668,"body_markdown":"1. The best way is `String.split()` as already mentioned by amit.\r\nE.g.\r\n\r\n       String[] ipAddressParts = ipAddress.split();\r\n\r\n2. Also you can use \r\n\r\n       StringTokenizer stringTokenizer = new StringTokenizer( ipAddress, &quot;.&quot; );\r\n       while ( stringTokenizer.hasMoreTokens() )  {\r\n         System.out.println( stringTokenizer.nextToken() );\r\n       }\r\n\r\n3. java.util.Scanner\r\n","title":"Getting a part of IP address String","body":"<ol>\n<li><p>The best way is <code>String.split()</code> as already mentioned by amit.\nE.g.</p>\n<pre><code>String[] ipAddressParts = ipAddress.split();\n</code></pre>\n</li>\n<li><p>Also you can use</p>\n<pre><code>StringTokenizer stringTokenizer = new StringTokenizer( ipAddress, &quot;.&quot; );\nwhile ( stringTokenizer.hasMoreTokens() )  {\n  System.out.println( stringTokenizer.nextToken() );\n}\n</code></pre>\n</li>\n<li><p>java.util.Scanner</p>\n</li>\n</ol>\n"}],"owner":{"account_id":392607,"reputation":9525,"user_id":753983,"accept_rate":94,"display_name":"Darth Blue Ray"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5654,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":6004684,"answer_count":4,"score":2,"last_activity_date":1698399562,"creation_date":1305405710,"question_id":6004668,"body_markdown":"If I have a IP address String like : `10.120.230.78` I would like to get `10.120.` out of it\r\n\r\nBut the parts of the address can change from 1 tot 3 numbers as we all know ... \r\n\r\n`1.1.1.1` to `255.255.255.255` so ....\r\n\r\nI believe you can use a pattern, but I don&#39;t have an idea how to.\r\n","title":"Getting a part of IP address String","body":"<p>If I have a IP address String like : <code>10.120.230.78</code> I would like to get <code>10.120.</code> out of it</p>\n<p>But the parts of the address can change from 1 tot 3 numbers as we all know ...</p>\n<p><code>1.1.1.1</code> to <code>255.255.255.255</code> so ....</p>\n<p>I believe you can use a pattern, but I don't have an idea how to.</p>\n"},{"tags":["java","fibonacci"],"comments":[{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":3,"creation_date":1475525695,"post_id":39839640,"comment_id":66969097,"body_markdown":"one word: [memoization](https://en.wikipedia.org/wiki/Memoization) (actually a second word would be [golden ratio](https://en.wikipedia.org/wiki/Golden_ratio#Relationship_to_Fibonacci_sequence))","body":"one word: <a href=\"https://en.wikipedia.org/wiki/Memoization\" rel=\"nofollow noreferrer\">memoization</a> (actually a second word would be <a href=\"https://en.wikipedia.org/wiki/Golden_ratio#Relationship_to_Fibonacci_sequence\" rel=\"nofollow noreferrer\">golden ratio</a>)"},{"owner":{"account_id":8827261,"reputation":913,"user_id":6595116,"accept_rate":95,"display_name":"TimeToCode"},"score":2,"creation_date":1475525773,"post_id":39839640,"comment_id":66969132,"body_markdown":"Your answer is in the following question: [Nth Fibonacci Number](http://stackoverflow.com/questions/1525521/nth-fibonacci-number-in-sublinear-time)","body":"Your answer is in the following question: <a href=\"http://stackoverflow.com/questions/1525521/nth-fibonacci-number-in-sublinear-time\">Nth Fibonacci Number</a>"},{"owner":{"account_id":9299724,"reputation":527,"user_id":6905600,"display_name":"Mein Name"},"score":0,"creation_date":1475525853,"post_id":39839640,"comment_id":66969163,"body_markdown":"@AndyTurner yes my mistake, sry","body":"@AndyTurner yes my mistake, sry"}],"answers":[{"tags":[],"owner":{"account_id":3693494,"reputation":2307,"user_id":3075533,"accept_rate":53,"display_name":"mohsenmadi"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1475586724,"creation_date":1475525823,"answer_id":39839710,"question_id":39839640,"body_markdown":"50 or just below 50 is as far as you can go with straight recursive implementation. You can switch to iterative or dynamic programming (DP) approaches if you want to go much higher than that. I suggest learning about those from this: https://www.javacodegeeks.com/2014/02/dynamic-programming-introduction.html. And don&#39;t forget to look the a solution in the comment by David therein, real efficient. The links shows how even `n = 500000` can be computed instantaneously using the DP method. The link also explains the concept of &quot;memoization&quot; to speed up computation by storing intermediate (but later on re-callable) results.","title":"Java Fibonacci Sequence fast method","body":"<p>50 or just below 50 is as far as you can go with straight recursive implementation. You can switch to iterative or dynamic programming (DP) approaches if you want to go much higher than that. I suggest learning about those from this: <a href=\"https://www.javacodegeeks.com/2014/02/dynamic-programming-introduction.html\" rel=\"nofollow\">https://www.javacodegeeks.com/2014/02/dynamic-programming-introduction.html</a>. And don't forget to look the a solution in the comment by David therein, real efficient. The links shows how even <code>n = 500000</code> can be computed instantaneously using the DP method. The link also explains the concept of \"memoization\" to speed up computation by storing intermediate (but later on re-callable) results.</p>\n"},{"tags":[],"owner":{"account_id":5125629,"reputation":7183,"user_id":4107781,"accept_rate":8,"display_name":"selftaught91"},"down_vote_count":2,"up_vote_count":3,"is_accepted":true,"score":1,"last_activity_date":1475525967,"creation_date":1475525967,"answer_id":39839753,"question_id":39839640,"body_markdown":"This method of solution is called dynamic programming\r\n\r\n 1. In this method we are remembering the previous results  \r\n 2. so when recursion happens then the cpu doesn&#39;t have to do any work to recompute the same value again and again\r\n\r\n\r\n   \r\n        class fibonacci\r\n        {\r\n        static int fib(int n)\r\n         {\r\n        /* Declare an array to store Fibonacci numbers. */\r\n           int f[] = new int[n+1];\r\n           int i;\r\n      \r\n           /* 0th and 1st number of the series are 0 and 1*/\r\n           f[0] = 0;\r\n           f[1] = 1;\r\n     \r\n           for (i = 2; i &lt;= n; i++)\r\n           {\r\n               /* Add the previous 2 numbers in the series\r\n                and store it */\r\n               f[i] = f[i-1] + f[i-2];\r\n            }\r\n      \r\n            return f[n];\r\n          }\r\n      \r\n        public static void main (String args[])\r\n            {\r\n               int n = 9;\r\n               System.out.println(fib(n));\r\n            }\r\n        }\r\n\r\n","title":"Java Fibonacci Sequence fast method","body":"<p>This method of solution is called dynamic programming</p>\n\n<ol>\n<li>In this method we are remembering the previous results  </li>\n<li><p>so when recursion happens then the cpu doesn't have to do any work to recompute the same value again and again</p>\n\n<pre><code>class fibonacci\n{\nstatic int fib(int n)\n {\n/* Declare an array to store Fibonacci numbers. */\n   int f[] = new int[n+1];\n   int i;\n\n   /* 0th and 1st number of the series are 0 and 1*/\n   f[0] = 0;\n   f[1] = 1;\n\n   for (i = 2; i &lt;= n; i++)\n   {\n       /* Add the previous 2 numbers in the series\n        and store it */\n       f[i] = f[i-1] + f[i-2];\n    }\n\n    return f[n];\n  }\n\npublic static void main (String args[])\n    {\n       int n = 9;\n       System.out.println(fib(n));\n    }\n}\n</code></pre></li>\n</ol>\n"},{"tags":[],"owner":{"account_id":1054395,"reputation":53323,"user_id":1057429,"accept_rate":100,"display_name":"Nir Alfasi"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1665687843,"creation_date":1475526074,"answer_id":39839775,"question_id":39839640,"body_markdown":"Yes, one improvement you can do is to `getFibonacciSum()`: instead of calling again and again to `isInFibonacci` which re-calculates everything from scratch, you can do the exact same thing that `isInFibonacci` is doing and get the sum in one pass, something like:\r\n\r\n    private static int getFibonacciSum(int n) {\r\n        int a = 0, b = 1, c = 0, sum = 0;\r\n    \r\n        while (c &lt; n) {\r\n            c = a + b;\r\n            a = b;\r\n            sum += b;\r\n            b = c;            \r\n        }   \r\n        sum += c;    \r\n        return sum;\r\n    }\r\n\r\n","title":"Java Fibonacci Sequence fast method","body":"<p>Yes, one improvement you can do is to <code>getFibonacciSum()</code>: instead of calling again and again to <code>isInFibonacci</code> which re-calculates everything from scratch, you can do the exact same thing that <code>isInFibonacci</code> is doing and get the sum in one pass, something like:</p>\n<pre><code>private static int getFibonacciSum(int n) {\n    int a = 0, b = 1, c = 0, sum = 0;\n\n    while (c &lt; n) {\n        c = a + b;\n        a = b;\n        sum += b;\n        b = c;            \n    }   \n    sum += c;    \n    return sum;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2535949,"reputation":1607,"user_id":2203061,"accept_rate":80,"display_name":"Zain Zafar"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1475526398,"creation_date":1475526398,"answer_id":39839850,"question_id":39839640,"body_markdown":"There is a way to calculate Fibonacci numbers instantaneously by using **Binet&#39;s Formula**\r\n\r\n***Algorithm:***\r\n\r\n    function fib(n):\r\n       root5 = squareroot(5)\r\n       gr = (1 + root5) / 2\r\n       igr = 1 - gr\r\n       value = (power(gr, n) - power(igr, n)) / root5\r\n\r\n       // round it to the closest integer since floating \r\n       // point arithmetic cannot be trusted to give\r\n       // perfect integer answers. \r\n       return floor(value + 0.5) \r\n\r\n\r\nOnce you do this, you need to be aware of the programming language you&#39;re using and how it behaves. This will probably return a floating point decimal type, whereas integers are probably desired.\r\n\r\n&gt; The complexity of this solution is O(1).\r\n\r\n ","title":"Java Fibonacci Sequence fast method","body":"<p>There is a way to calculate Fibonacci numbers instantaneously by using <strong>Binet's Formula</strong></p>\n\n<p><strong><em>Algorithm:</em></strong></p>\n\n<pre><code>function fib(n):\n   root5 = squareroot(5)\n   gr = (1 + root5) / 2\n   igr = 1 - gr\n   value = (power(gr, n) - power(igr, n)) / root5\n\n   // round it to the closest integer since floating \n   // point arithmetic cannot be trusted to give\n   // perfect integer answers. \n   return floor(value + 0.5) \n</code></pre>\n\n<p>Once you do this, you need to be aware of the programming language you're using and how it behaves. This will probably return a floating point decimal type, whereas integers are probably desired.</p>\n\n<blockquote>\n  <p>The complexity of this solution is O(1).</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":3191872,"reputation":2089,"user_id":2695939,"display_name":"Emre Kilinc Arslan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588024566,"creation_date":1588024566,"answer_id":61469142,"question_id":39839640,"body_markdown":"    public static long getFib(final int index) {\r\n    \t\tlong a=0,b=0,total=0;\r\n    \t\tfor(int i=0;i&lt;= index;i++) {\r\n    \t\t\t\tif(i==0) {\r\n    \t\t\t\t\t a=0;\r\n    \t\t\t\t\t total=a+b;\r\n    \t\t\t\t }else if(i==1) {\r\n    \t\t\t\t\t b=1;\r\n    \t\t\t\t\t total=a+b;\r\n    \t\t\t\t }\r\n    \t\t\t\r\n    \t\t\telse if(i%2==0) {\r\n    \t\t\t\ttotal = a+b;\r\n    \t\t\t\ta=total;\t\t\t\t\r\n    \t\t\t}else {\r\n    \t\t\t\ttotal = a+b;\r\n    \t\t\t\tb=total;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t}\r\n    \t\treturn total;\r\n    \t}","title":"Java Fibonacci Sequence fast method","body":"<pre><code>public static long getFib(final int index) {\n        long a=0,b=0,total=0;\n        for(int i=0;i&lt;= index;i++) {\n                if(i==0) {\n                     a=0;\n                     total=a+b;\n                 }else if(i==1) {\n                     b=1;\n                     total=a+b;\n                 }\n\n            else if(i%2==0) {\n                total = a+b;\n                a=total;                \n            }else {\n                total = a+b;\n                b=total;\n            }\n\n        }\n        return total;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10424544,"reputation":21,"user_id":7686263,"display_name":"Stefan Tataru"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698399477,"creation_date":1615494515,"answer_id":66590093,"question_id":39839640,"body_markdown":"Using a traditional Recursion solution: memory is not a concern, but it takes a significant amount of time to obtain fib(1000000), for instance. \r\n\r\nWith the following solution: we may be running out of memory for very big inputs, such as fib(99999*(10^999999)), but it is much faster than the traditional solution. The solution is based on the use of a map and some mathematical formulas (source: https://www.nayuki.io/page/fast-fibonacci-algorithms).\r\n\r\nMath formulas:\r\n\r\nF(2k) = F(k)[2F(k+1)−F(k)]\r\n\r\nF(2k+1) = F(k+1)^2+F(k)^2\r\n\r\nSolution:\r\n    \r\n\r\n    public BigInteger fib(BigInteger n) {\r\n\t\tif (n.equals(BigInteger.ZERO))\r\n\t\t\treturn BigInteger.ZERO;\r\n\t\tif (n.equals(BigInteger.ONE) || n.equals(BigInteger.valueOf(2)))\r\n\t\t\treturn BigInteger.ONE;\r\n\t\t\r\n\t\tBigInteger index = n;\r\n\t\t\r\n\t\t//we could have 2 Lists instead of a map\r\n\t\tMap&lt;BigInteger,BigInteger&gt; termsToCalculate = new TreeMap&lt;BigInteger,BigInteger&gt;();\r\n\t\t\r\n\t\t//add every index needed to calculate  index n\r\n\t\tpopulateMapWhitTerms(termsToCalculate, index);\r\n\t\t\r\n\t\ttermsToCalculate.put(n,null); //finally add n to map\r\n\t\t\r\n\t\tIterator&lt;Map.Entry&lt;BigInteger, BigInteger&gt;&gt; it = termsToCalculate.entrySet().iterator();//it \r\n\t\tit.next(); //it = key number 1, contains fib(1);\r\n\t\tit.next(); //it = key number 2, contains fib(2);\r\n\t\t\r\n\t\t//map is ordered\r\n\t    while (it.hasNext()) {\r\n\t        Map.Entry&lt;BigInteger, BigInteger&gt; pair = (Entry&lt;BigInteger, BigInteger&gt;)it.next();//first it = key number 3\r\n\t        index = (BigInteger) pair.getKey();\r\n\t        \r\n\t        if(index.remainder(BigInteger.valueOf(2)).equals(BigInteger.ZERO)) {\r\n\t        \t//index is divisible by 2\r\n\t        \t//F(2k) = F(k)[2F(k+1)−F(k)]\r\n\t        \tpair.setValue(termsToCalculate.get(index.divide(BigInteger.valueOf(2))).multiply(\r\n\t        \t\t\t(((BigInteger.valueOf(2)).multiply(\r\n\t        \t\t\t\t\ttermsToCalculate.get(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE)))).subtract(\r\n\t        \t\t\t\t\t\t\ttermsToCalculate.get(index.divide(BigInteger.valueOf(2)))))));\r\n\t        }\r\n\t        else {\r\n\t        \t//index is odd\r\n\t        \t//F(2k+1) = F(k+1)^2+F(k)^2\r\n\t        \tpair.setValue((termsToCalculate.get(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE)).multiply(\r\n\t        \t\t\ttermsToCalculate.get(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE)))).add(\r\n\t        \t\t\t\t\t(termsToCalculate.get(index.divide(BigInteger.valueOf(2))).multiply(\r\n\t    \t        \t\t\ttermsToCalculate.get(index.divide(BigInteger.valueOf(2))))))\r\n\t        \t\t\t);\r\n\t        }\r\n\t    }\r\n\t    \r\n\t    // fib(n) was calculated in the while loop\r\n\t\treturn termsToCalculate.get(n);\r\n\t}\r\n\r\n\tprivate void populateMapWhitTerms(Map&lt;BigInteger, BigInteger&gt; termsToCalculate, BigInteger index) {\r\n\t\tif (index.equals(BigInteger.ONE)) { //stop\r\n\t\t\ttermsToCalculate.put(BigInteger.ONE, BigInteger.ONE);\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\t} else if(index.equals(BigInteger.valueOf(2))){\r\n\t\t\ttermsToCalculate.put(BigInteger.valueOf(2), BigInteger.ONE);\r\n\t\t\treturn;\r\n\t\t\t\r\n\t\t} else if(index.remainder(BigInteger.valueOf(2)).equals(BigInteger.ZERO)) {\r\n\t\t\t// index is divisible by 2\r\n\t\t\t// FORMUMA: F(2k) = F(k)[2F(k+1)−F(k)]\r\n\t\t\t\t\t\t\r\n\t\t\t// add F(k) key to termsToCalculate (the key is replaced if it is already there, we are working with a map here)\r\n\t\t\ttermsToCalculate.put(index.divide(BigInteger.valueOf(2)), null);\r\n\t\t\tpopulateMapWhitTerms(termsToCalculate, index.divide(BigInteger.valueOf(2)));\r\n\r\n\t\t\t// add F(k+1) to termsToCalculate\r\n\t\t\ttermsToCalculate.put(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE), null);\r\n\t\t\tpopulateMapWhitTerms(termsToCalculate, index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE));\r\n\t\t\t\r\n\t\t} else {\r\n\t\t\t// index is odd\r\n\t\t\t// FORMULA: F(2k+1) = F(k+1)^2+F(k)^2\r\n\r\n\t\t\t// add F(k+1) to termsToCalculate\r\n\t\t\ttermsToCalculate.put(((index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)).add(BigInteger.ONE)),null);\r\n\t\t\tpopulateMapWhitTerms(termsToCalculate,((index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)).add(BigInteger.ONE)));\r\n\r\n\t\t\t// add F(k) to termsToCalculate\r\n\t\t\ttermsToCalculate.put((index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)), null);\r\n\t\t\tpopulateMapWhitTerms(termsToCalculate, (index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)));\r\n\t\t}\r\n\t\t\r\n\t}","title":"Java Fibonacci Sequence fast method","body":"<p>Using a traditional Recursion solution: memory is not a concern, but it takes a significant amount of time to obtain fib(1000000), for instance.</p>\n<p>With the following solution: we may be running out of memory for very big inputs, such as fib(99999*(10^999999)), but it is much faster than the traditional solution. The solution is based on the use of a map and some mathematical formulas (source: <a href=\"https://www.nayuki.io/page/fast-fibonacci-algorithms\" rel=\"nofollow noreferrer\">https://www.nayuki.io/page/fast-fibonacci-algorithms</a>).</p>\n<p>Math formulas:</p>\n<p>F(2k) = F(k)[2F(k+1)−F(k)]</p>\n<p>F(2k+1) = F(k+1)^2+F(k)^2</p>\n<p>Solution:</p>\n<pre><code>public BigInteger fib(BigInteger n) {\n    if (n.equals(BigInteger.ZERO))\n        return BigInteger.ZERO;\n    if (n.equals(BigInteger.ONE) || n.equals(BigInteger.valueOf(2)))\n        return BigInteger.ONE;\n    \n    BigInteger index = n;\n    \n    //we could have 2 Lists instead of a map\n    Map&lt;BigInteger,BigInteger&gt; termsToCalculate = new TreeMap&lt;BigInteger,BigInteger&gt;();\n    \n    //add every index needed to calculate  index n\n    populateMapWhitTerms(termsToCalculate, index);\n    \n    termsToCalculate.put(n,null); //finally add n to map\n    \n    Iterator&lt;Map.Entry&lt;BigInteger, BigInteger&gt;&gt; it = termsToCalculate.entrySet().iterator();//it \n    it.next(); //it = key number 1, contains fib(1);\n    it.next(); //it = key number 2, contains fib(2);\n    \n    //map is ordered\n    while (it.hasNext()) {\n        Map.Entry&lt;BigInteger, BigInteger&gt; pair = (Entry&lt;BigInteger, BigInteger&gt;)it.next();//first it = key number 3\n        index = (BigInteger) pair.getKey();\n        \n        if(index.remainder(BigInteger.valueOf(2)).equals(BigInteger.ZERO)) {\n            //index is divisible by 2\n            //F(2k) = F(k)[2F(k+1)−F(k)]\n            pair.setValue(termsToCalculate.get(index.divide(BigInteger.valueOf(2))).multiply(\n                    (((BigInteger.valueOf(2)).multiply(\n                            termsToCalculate.get(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE)))).subtract(\n                                    termsToCalculate.get(index.divide(BigInteger.valueOf(2)))))));\n        }\n        else {\n            //index is odd\n            //F(2k+1) = F(k+1)^2+F(k)^2\n            pair.setValue((termsToCalculate.get(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE)).multiply(\n                    termsToCalculate.get(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE)))).add(\n                            (termsToCalculate.get(index.divide(BigInteger.valueOf(2))).multiply(\n                            termsToCalculate.get(index.divide(BigInteger.valueOf(2))))))\n                    );\n        }\n    }\n    \n    // fib(n) was calculated in the while loop\n    return termsToCalculate.get(n);\n}\n\nprivate void populateMapWhitTerms(Map&lt;BigInteger, BigInteger&gt; termsToCalculate, BigInteger index) {\n    if (index.equals(BigInteger.ONE)) { //stop\n        termsToCalculate.put(BigInteger.ONE, BigInteger.ONE);\n        return;\n        \n    } else if(index.equals(BigInteger.valueOf(2))){\n        termsToCalculate.put(BigInteger.valueOf(2), BigInteger.ONE);\n        return;\n        \n    } else if(index.remainder(BigInteger.valueOf(2)).equals(BigInteger.ZERO)) {\n        // index is divisible by 2\n        // FORMUMA: F(2k) = F(k)[2F(k+1)−F(k)]\n                    \n        // add F(k) key to termsToCalculate (the key is replaced if it is already there, we are working with a map here)\n        termsToCalculate.put(index.divide(BigInteger.valueOf(2)), null);\n        populateMapWhitTerms(termsToCalculate, index.divide(BigInteger.valueOf(2)));\n\n        // add F(k+1) to termsToCalculate\n        termsToCalculate.put(index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE), null);\n        populateMapWhitTerms(termsToCalculate, index.divide(BigInteger.valueOf(2)).add(BigInteger.ONE));\n        \n    } else {\n        // index is odd\n        // FORMULA: F(2k+1) = F(k+1)^2+F(k)^2\n\n        // add F(k+1) to termsToCalculate\n        termsToCalculate.put(((index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)).add(BigInteger.ONE)),null);\n        populateMapWhitTerms(termsToCalculate,((index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)).add(BigInteger.ONE)));\n\n        // add F(k) to termsToCalculate\n        termsToCalculate.put((index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)), null);\n        populateMapWhitTerms(termsToCalculate, (index.subtract(BigInteger.ONE)).divide(BigInteger.valueOf(2)));\n    }\n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21584886,"reputation":21,"user_id":15915541,"display_name":"Rafal W"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1638307111,"creation_date":1638307111,"answer_id":70176196,"question_id":39839640,"body_markdown":"I have checked all solutions and for me, the quickest one is to use streams and this code could be easily modified to collect all Fibonacci numbers.\r\n\r\n     public static Long fibonaciN(long n){\r\n        return Stream.iterate(new long[]{0, 1}, a -&gt; new long[]{a[1], a[0] + a[1]})\r\n                .limit(n)\r\n                .map(a-&gt;a[0])\r\n                .max(Long::compareTo)\r\n                .orElseThrow();\r\n    }","title":"Java Fibonacci Sequence fast method","body":"<p>I have checked all solutions and for me, the quickest one is to use streams and this code could be easily modified to collect all Fibonacci numbers.</p>\n<pre><code> public static Long fibonaciN(long n){\n    return Stream.iterate(new long[]{0, 1}, a -&gt; new long[]{a[1], a[0] + a[1]})\n            .limit(n)\n            .map(a-&gt;a[0])\n            .max(Long::compareTo)\n            .orElseThrow();\n}\n</code></pre>\n"}],"owner":{"account_id":4449595,"reputation":81,"user_id":3621942,"display_name":"burakkaanerce"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7257,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"accepted_answer_id":39839753,"answer_count":7,"score":2,"last_activity_date":1698399477,"creation_date":1475525520,"question_id":39839640,"body_markdown":"I need a task about finding Fibonacci Sequence for my independent project in Java. Here are methods for find.\r\n    \r\n    private static long getFibonacci(int n) {\r\n        switch (n) {\r\n            case 0:\r\n                return 0;\r\n            case 1:\r\n                return 1;\r\n            default:\r\n                return (getFibonacci(n-1)+getFibonacci(n-2));\r\n        }\r\n    }\r\n    \r\n    private static long getFibonacciSum(int n) {\r\n        long result = 0;\r\n        \r\n        while(n &gt;= 0) {\r\n            result += getFibonacci(n);\r\n            n--;\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    private static boolean isInFibonacci(long n) {\r\n        long a = 0, b = 1, c = 0;\r\n        \r\n        while (c &lt; n) {\r\n            c = a + b;\r\n            a = b;\r\n            b = c;\r\n        }\r\n        \r\n        return c == n;\r\n    }\r\n    \r\nHere is main method:\r\n\r\n    \r\n        long key = getFibonacciSum(n);\r\n        System.out.println(&quot;Sum of all Fibonacci Numbers until Fibonacci[n]: &quot;+key);\r\n        \r\n        System.out.println(getFibonacci(n)+&quot; is Fibonacci[n]&quot;);\r\n     \r\n        System.out.println(&quot;Is n2 in Fibonacci Sequence ?: &quot;+isInFibonacci(n2));\r\n\r\n\r\nCodes are completely done and working. But if the n or n2 will be more than normal (50th numbers in Fib. Seq.) ? Codes will be runout. Are there any suggestions ?","title":"Java Fibonacci Sequence fast method","body":"<p>I need a task about finding Fibonacci Sequence for my independent project in Java. Here are methods for find.</p>\n\n<pre><code>private static long getFibonacci(int n) {\n    switch (n) {\n        case 0:\n            return 0;\n        case 1:\n            return 1;\n        default:\n            return (getFibonacci(n-1)+getFibonacci(n-2));\n    }\n}\n\nprivate static long getFibonacciSum(int n) {\n    long result = 0;\n\n    while(n &gt;= 0) {\n        result += getFibonacci(n);\n        n--;\n    }\n    return result;\n}\n\nprivate static boolean isInFibonacci(long n) {\n    long a = 0, b = 1, c = 0;\n\n    while (c &lt; n) {\n        c = a + b;\n        a = b;\n        b = c;\n    }\n\n    return c == n;\n}\n</code></pre>\n\n<p>Here is main method:</p>\n\n<pre><code>    long key = getFibonacciSum(n);\n    System.out.println(\"Sum of all Fibonacci Numbers until Fibonacci[n]: \"+key);\n\n    System.out.println(getFibonacci(n)+\" is Fibonacci[n]\");\n\n    System.out.println(\"Is n2 in Fibonacci Sequence ?: \"+isInFibonacci(n2));\n</code></pre>\n\n<p>Codes are completely done and working. But if the n or n2 will be more than normal (50th numbers in Fib. Seq.) ? Codes will be runout. Are there any suggestions ?</p>\n"},{"tags":["java","spring","spring-cloud","spring-cloud-config","spring-cloud-gateway"],"comments":[{"owner":{"account_id":1368060,"reputation":24601,"user_id":2730527,"display_name":"spencergibb"},"score":0,"creation_date":1679410361,"post_id":75802304,"comment_id":133714764,"body_markdown":"If this `/myapp/services/v1/request` maps to a controller, then it will never hit the gateway. Do you want just a webflux `WebFilter`?","body":"If this <code>&#47;myapp&#47;services&#47;v1&#47;request</code> maps to a controller, then it will never hit the gateway. Do you want just a webflux <code>WebFilter</code>?"},{"owner":{"account_id":19688119,"reputation":61,"user_id":14413687,"display_name":"spyder"},"score":0,"creation_date":1679555646,"post_id":75802304,"comment_id":133743330,"body_markdown":"how can I make it do go via gateway?","body":"how can I make it do go via gateway?"}],"owner":{"account_id":19688119,"reputation":61,"user_id":14413687,"display_name":"spyder"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":534,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698399177,"creation_date":1679407834,"question_id":75802304,"body_markdown":"```\r\n@Configuration\r\npublic class GatewayConfig {\r\n\r\n    @Bean\r\n    public RouteLocator routes(RouteLocatorBuilder builder, JwtTokenValidationAndRouteFilter authenticationCheckAndRouteFilter, AuthServerFilter authServerFilter) {\r\n        return builder.routes()\r\n                .route(&quot;auth-routes&quot;, r -&gt; r.path(&quot;/myapp/api/v1/auth/**&quot;)\r\n                        .filters(f -&gt; f.filter(authServerFilter)).uri(&quot;lb://auth-server&quot;))\r\n                .route(&quot;evoke-endpoints&quot;, r -&gt; r.path(&quot;/myapp/services/v1/request&quot;)\r\n                        .filters(f -&gt; f.filter(authenticationCheckAndRouteFilter)).uri(&quot;lb://cloud-gateway&quot;))\r\n             \r\n                .build();\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\n@Component\r\n@Slf4j\r\npublic class JwtTokenValidationAndRouteFilter implements GatewayFilter {\r\n\r\n    @Autowired\r\n    private ObjectMapper objectMapper;\r\n\r\n    @Override\r\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\r\n\r\n        final List&lt;String&gt; apiEndpoints = Arrays.asList(&quot;/myapp/services/v1/request/**&quot;);\r\n        ServerHttpRequest request = exchange.getRequest();\r\n        Predicate&lt;ServerHttpRequest&gt; isApiSecured = r -&gt; apiEndpoints.stream().noneMatch(uri -&gt; r.getURI().getPath().contains(uri));\r\n        Claims claims = null;\r\n        String errorMessage = null;\r\n\r\n        if (isApiSecured.test(request)) {\r\n            if (!request.getHeaders().containsKey(&quot;Authorization&quot;)) {\r\n                errorMessage = &quot;Authorization token not present in request headers, please check.&quot;;\r\n                return onError(exchange, HttpStatus.UNAUTHORIZED, errorMessage, request.getPath().pathWithinApplication().toString());\r\n\r\n            }\r\n            final String token = request.getHeaders().getOrEmpty(&quot;Authorization&quot;).get(0);\r\n            if (token == null || token.isEmpty() || !token.startsWith(&quot;Bearer &quot;)) {\r\n                errorMessage = &quot;Authorization token should start with Bearer, please check.&quot;;\r\n                return onError(exchange, HttpStatus.UNAUTHORIZED, errorMessage, request.getPath().pathWithinApplication().toString());\r\n\r\n            }\r\n            try {\r\n                final String jwt = token.substring(7);\r\n                JwtUtils.isTokenValid(jwt);\r\n                claims = JwtUtils.extractAllClaims(jwt);\r\n            } catch (ExpiredJwtException e) {\r\n                log.error(&quot;ExpiredJwtException occurred.. please check..&quot;);\r\n                errorMessage = e.getLocalizedMessage();\r\n            } catch (MalformedJwtException e) {\r\n                log.error(&quot;MalformedJwtException occurred.. please check..&quot;);\r\n                errorMessage = e.getLocalizedMessage();\r\n            } catch (Exception e) {\r\n                errorMessage = e.getLocalizedMessage();\r\n                log.error(&quot;Unknown Exception occurred while validating the token..&quot;, e);\r\n            }\r\n            if (errorMessage != null &amp;&amp; !errorMessage.isEmpty()) {\r\n                return onError(exchange, HttpStatus.UNAUTHORIZED, errorMessage, request.getPath().pathWithinApplication().toString());\r\n            }\r\n            exchange.getRequest().mutate().header(&quot;id&quot;, String.valueOf(claims.get(&quot;id&quot;))).build();\r\n        }\r\n        return chain.filter(exchange);\r\n    }\r\n\r\n```\r\n\r\n\r\n\r\n\r\n```\r\n@RestController\r\n@RequestMapping({&quot;/services/v1/request&quot;})\r\npublic class EvokeController {\r\n\r\n    @PostMapping(value = &quot;/handle-emk-request&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;?&gt; processRequest(@RequestBody String request) {\r\n        return ResponseEntity.ok(request);\r\n    }\r\n\r\n    @GetMapping(value = &quot;/health&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\r\n    public ResponseEntity&lt;?&gt; checkHealth() {\r\n        return null;\r\n    }\r\n```\r\n\r\n\r\n\r\nIf I invoke http://localhost:8080/myapp/services/v1/request it is not executing my filter &quot;JwtTokenValidationAndRouteFilter &quot;. It is directly calling the endpoint and giving the response.\r\n\r\nAll these classes present in same project. \r\n\r\nMy app should execute the filter first then it has to call the controller.\r\n\r\n\r\n\r\ntried to multiple ways and couldn&#39;t find anything.","title":"Spring Cloud Gateway not executing filter if the controller is in same project","body":"<pre><code>@Configuration\npublic class GatewayConfig {\n\n    @Bean\n    public RouteLocator routes(RouteLocatorBuilder builder, JwtTokenValidationAndRouteFilter authenticationCheckAndRouteFilter, AuthServerFilter authServerFilter) {\n        return builder.routes()\n                .route(&quot;auth-routes&quot;, r -&gt; r.path(&quot;/myapp/api/v1/auth/**&quot;)\n                        .filters(f -&gt; f.filter(authServerFilter)).uri(&quot;lb://auth-server&quot;))\n                .route(&quot;evoke-endpoints&quot;, r -&gt; r.path(&quot;/myapp/services/v1/request&quot;)\n                        .filters(f -&gt; f.filter(authenticationCheckAndRouteFilter)).uri(&quot;lb://cloud-gateway&quot;))\n             \n                .build();\n    }\n\n}\n</code></pre>\n<pre><code>@Component\n@Slf4j\npublic class JwtTokenValidationAndRouteFilter implements GatewayFilter {\n\n    @Autowired\n    private ObjectMapper objectMapper;\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, GatewayFilterChain chain) {\n\n        final List&lt;String&gt; apiEndpoints = Arrays.asList(&quot;/myapp/services/v1/request/**&quot;);\n        ServerHttpRequest request = exchange.getRequest();\n        Predicate&lt;ServerHttpRequest&gt; isApiSecured = r -&gt; apiEndpoints.stream().noneMatch(uri -&gt; r.getURI().getPath().contains(uri));\n        Claims claims = null;\n        String errorMessage = null;\n\n        if (isApiSecured.test(request)) {\n            if (!request.getHeaders().containsKey(&quot;Authorization&quot;)) {\n                errorMessage = &quot;Authorization token not present in request headers, please check.&quot;;\n                return onError(exchange, HttpStatus.UNAUTHORIZED, errorMessage, request.getPath().pathWithinApplication().toString());\n\n            }\n            final String token = request.getHeaders().getOrEmpty(&quot;Authorization&quot;).get(0);\n            if (token == null || token.isEmpty() || !token.startsWith(&quot;Bearer &quot;)) {\n                errorMessage = &quot;Authorization token should start with Bearer, please check.&quot;;\n                return onError(exchange, HttpStatus.UNAUTHORIZED, errorMessage, request.getPath().pathWithinApplication().toString());\n\n            }\n            try {\n                final String jwt = token.substring(7);\n                JwtUtils.isTokenValid(jwt);\n                claims = JwtUtils.extractAllClaims(jwt);\n            } catch (ExpiredJwtException e) {\n                log.error(&quot;ExpiredJwtException occurred.. please check..&quot;);\n                errorMessage = e.getLocalizedMessage();\n            } catch (MalformedJwtException e) {\n                log.error(&quot;MalformedJwtException occurred.. please check..&quot;);\n                errorMessage = e.getLocalizedMessage();\n            } catch (Exception e) {\n                errorMessage = e.getLocalizedMessage();\n                log.error(&quot;Unknown Exception occurred while validating the token..&quot;, e);\n            }\n            if (errorMessage != null &amp;&amp; !errorMessage.isEmpty()) {\n                return onError(exchange, HttpStatus.UNAUTHORIZED, errorMessage, request.getPath().pathWithinApplication().toString());\n            }\n            exchange.getRequest().mutate().header(&quot;id&quot;, String.valueOf(claims.get(&quot;id&quot;))).build();\n        }\n        return chain.filter(exchange);\n    }\n\n</code></pre>\n<pre><code>@RestController\n@RequestMapping({&quot;/services/v1/request&quot;})\npublic class EvokeController {\n\n    @PostMapping(value = &quot;/handle-emk-request&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;?&gt; processRequest(@RequestBody String request) {\n        return ResponseEntity.ok(request);\n    }\n\n    @GetMapping(value = &quot;/health&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)\n    public ResponseEntity&lt;?&gt; checkHealth() {\n        return null;\n    }\n</code></pre>\n<p>If I invoke http://localhost:8080/myapp/services/v1/request it is not executing my filter &quot;JwtTokenValidationAndRouteFilter &quot;. It is directly calling the endpoint and giving the response.</p>\n<p>All these classes present in same project.</p>\n<p>My app should execute the filter first then it has to call the controller.</p>\n<p>tried to multiple ways and couldn't find anything.</p>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"account_id":135407,"reputation":10653,"user_id":338249,"accept_rate":100,"display_name":"rjdkolb"},"score":0,"creation_date":1698392707,"post_id":77372279,"comment_id":136402164,"body_markdown":"I am not the person who down voted, but what have you tried so far?","body":"I am not the person who down voted, but what have you tried so far?"},{"owner":{"account_id":20196841,"reputation":2309,"user_id":14813577,"display_name":"kennarddh"},"score":0,"creation_date":1698392873,"post_id":77372279,"comment_id":136402201,"body_markdown":"I haven&#39;t.. i dont have any clue where to start..","body":"I haven&#39;t.. i dont have any clue where to start.."},{"owner":{"account_id":8884226,"reputation":514,"user_id":6633045,"display_name":"phuongnq1995"},"score":0,"creation_date":1698393096,"post_id":77372279,"comment_id":136402262,"body_markdown":"Me neither, but I guess we can easily use `Reflection` (with package as well) to new Instance &amp; setter variable. The thing is we only have an instance with `Object` type which is not really useful in most cases.","body":"Me neither, but I guess we can easily use <code>Reflection</code> (with package as well) to new Instance &amp; setter variable. The thing is we only have an instance with <code>Object</code> type which is not really useful in most cases."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1698393195,"post_id":77372279,"comment_id":136402282,"body_markdown":"Write a custom deserializer, [How do I write a custom JSON deserializer for Gson?](https://stackoverflow.com/questions/6096940/how-do-i-write-a-custom-json-deserializer-for-gson) should get you started.","body":"Write a custom deserializer, <a href=\"https://stackoverflow.com/questions/6096940/how-do-i-write-a-custom-json-deserializer-for-gson\">How do I write a custom JSON deserializer for Gson?</a> should get you started."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698395498,"creation_date":1698395498,"answer_id":77372621,"question_id":77372279,"body_markdown":"You want to deserialize the JSON according to the value of the *type* element. So you parse the JSON and extract the value of the *type* element. Then you extract the *data* element and use Gson to deserialize it to a Java object.\r\n```java\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonElement;\r\nimport com.google.gson.JsonObject;\r\nimport com.google.gson.JsonParser;\r\n\r\npublic class GsonTest {\r\n\r\n    public static void main(String[] args) {\r\n        String json = &quot;&quot;&quot;\r\n{\r\n  &quot;type&quot;: &quot;X&quot;,\r\n  &quot;data&quot;: {\r\n    &quot;name&quot;: &quot;myname&quot;,\r\n    &quot;age&quot;: 20\r\n  }\r\n}\r\n&quot;&quot;&quot;;\r\n        JsonElement root = JsonParser.parseString(json);\r\n        JsonObject obj = root.getAsJsonObject();\r\n        JsonElement typeElem = obj.get(&quot;type&quot;);\r\n        String type = typeElem.getAsString();\r\n        JsonElement dataElem = obj.get(&quot;data&quot;);\r\n        Gson gson = new Gson();\r\n        Class&lt;?&gt; theClass;\r\n        if (&quot;X&quot;.equals(type)) {\r\n            theClass = X.class;\r\n        }\r\n        else if (&quot;Y&quot;.equals(type)) {\r\n            theClass = Y.class;\r\n        }\r\n        else {\r\n            theClass = null;\r\n        }\r\n        if (theClass != null) {\r\n            Object result = gson.fromJson(dataElem, theClass);\r\n            System.out.println(result);\r\n        }\r\n    }\r\n}\r\n```\r\nThe above code uses [text blocks][1] that were added in Java 15.\r\n\r\nI added a [toString][2] method to class `X`:\r\n```java\r\npublic String toString() {\r\n    return String.format(&quot;%s:%d&quot;, name, age);\r\n}\r\n```\r\nWhen I run the above code, I get the following:\r\n```none\r\nmyname:20\r\n```\r\nNote that one would usually make class `X` and class `Y` [JavaBeans][3], i.e. you need to add &quot;getters&quot; and &quot;setters&quot;.\r\n\r\nHere is a complete code:\r\n```java\r\nimport com.google.gson.Gson;\r\nimport com.google.gson.JsonElement;\r\nimport com.google.gson.JsonObject;\r\nimport com.google.gson.JsonParser;\r\n\r\npublic class GsonTest {\r\n\r\n    public static void main(String[] args) {\r\n        String json = &quot;&quot;&quot;\r\n{\r\n  &quot;type&quot;: &quot;Y&quot;,\r\n  &quot;data&quot;: {\r\n    &quot;score&quot;: 10\r\n  }\r\n}\r\n&quot;&quot;&quot;;\r\n        JsonElement root = JsonParser.parseString(json);\r\n        JsonObject obj = root.getAsJsonObject();\r\n        JsonElement typeElem = obj.get(&quot;type&quot;);\r\n        String type = typeElem.getAsString();\r\n        JsonElement dataElem = obj.get(&quot;data&quot;);\r\n        Gson gson = new Gson();\r\n        Class&lt;?&gt; theClass;\r\n        if (&quot;X&quot;.equals(type)) {\r\n            theClass = X.class;\r\n        }\r\n        else if (&quot;Y&quot;.equals(type)) {\r\n            theClass = Y.class;\r\n        }\r\n        else {\r\n            theClass = null;\r\n        }\r\n        if (theClass != null) {\r\n            Object result = gson.fromJson(dataElem, theClass);\r\n            System.out.println(result);\r\n        }\r\n    }\r\n}\r\n\r\nclass X {\r\n    private String name;\r\n    private int age;\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public void setName(String name) {\r\n        this.name = name;\r\n    }\r\n\r\n    public int getAge() {\r\n        return age;\r\n    }\r\n\r\n    public void setAge(int age) {\r\n        this.age = age;\r\n    }\r\n\r\n    public String toString() {\r\n        return String.format(&quot;%s:%d&quot;, name, age);\r\n    }\r\n}\r\n\r\nclass Y {\r\n    private float score;\r\n\r\n    public float getScore() {\r\n        return score;\r\n    }\r\n\r\n    public void setScore(float score) {\r\n        this.score = score;\r\n    }\r\n\r\n    public String toString() {\r\n        return Float.toString(score);\r\n    }\r\n}\r\n```\r\nRefer to [Gson User Guide][4]\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/text-blocks/index.html\r\n  [2]: https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()\r\n  [3]: https://stackoverflow.com/questions/3295496/what-is-a-javabean-exactly\r\n  [4]: https://github.com/google/gson/blob/main/UserGuide.md","title":"How to parse dynamic json object value with java gson","body":"<p>You want to deserialize the JSON according to the value of the <em>type</em> element. So you parse the JSON and extract the value of the <em>type</em> element. Then you extract the <em>data</em> element and use Gson to deserialize it to a Java object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.gson.Gson;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\n\npublic class GsonTest {\n\n    public static void main(String[] args) {\n        String json = &quot;&quot;&quot;\n{\n  &quot;type&quot;: &quot;X&quot;,\n  &quot;data&quot;: {\n    &quot;name&quot;: &quot;myname&quot;,\n    &quot;age&quot;: 20\n  }\n}\n&quot;&quot;&quot;;\n        JsonElement root = JsonParser.parseString(json);\n        JsonObject obj = root.getAsJsonObject();\n        JsonElement typeElem = obj.get(&quot;type&quot;);\n        String type = typeElem.getAsString();\n        JsonElement dataElem = obj.get(&quot;data&quot;);\n        Gson gson = new Gson();\n        Class&lt;?&gt; theClass;\n        if (&quot;X&quot;.equals(type)) {\n            theClass = X.class;\n        }\n        else if (&quot;Y&quot;.equals(type)) {\n            theClass = Y.class;\n        }\n        else {\n            theClass = null;\n        }\n        if (theClass != null) {\n            Object result = gson.fromJson(dataElem, theClass);\n            System.out.println(result);\n        }\n    }\n}\n</code></pre>\n<p>The above code uses <a href=\"https://docs.oracle.com/en/java/javase/21/text-blocks/index.html\" rel=\"nofollow noreferrer\">text blocks</a> that were added in Java 15.</p>\n<p>I added a <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()\" rel=\"nofollow noreferrer\">toString</a> method to class <code>X</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public String toString() {\n    return String.format(&quot;%s:%d&quot;, name, age);\n}\n</code></pre>\n<p>When I run the above code, I get the following:</p>\n<pre class=\"lang-none prettyprint-override\"><code>myname:20\n</code></pre>\n<p>Note that one would usually make class <code>X</code> and class <code>Y</code> <a href=\"https://stackoverflow.com/questions/3295496/what-is-a-javabean-exactly\">JavaBeans</a>, i.e. you need to add &quot;getters&quot; and &quot;setters&quot;.</p>\n<p>Here is a complete code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.gson.Gson;\nimport com.google.gson.JsonElement;\nimport com.google.gson.JsonObject;\nimport com.google.gson.JsonParser;\n\npublic class GsonTest {\n\n    public static void main(String[] args) {\n        String json = &quot;&quot;&quot;\n{\n  &quot;type&quot;: &quot;Y&quot;,\n  &quot;data&quot;: {\n    &quot;score&quot;: 10\n  }\n}\n&quot;&quot;&quot;;\n        JsonElement root = JsonParser.parseString(json);\n        JsonObject obj = root.getAsJsonObject();\n        JsonElement typeElem = obj.get(&quot;type&quot;);\n        String type = typeElem.getAsString();\n        JsonElement dataElem = obj.get(&quot;data&quot;);\n        Gson gson = new Gson();\n        Class&lt;?&gt; theClass;\n        if (&quot;X&quot;.equals(type)) {\n            theClass = X.class;\n        }\n        else if (&quot;Y&quot;.equals(type)) {\n            theClass = Y.class;\n        }\n        else {\n            theClass = null;\n        }\n        if (theClass != null) {\n            Object result = gson.fromJson(dataElem, theClass);\n            System.out.println(result);\n        }\n    }\n}\n\nclass X {\n    private String name;\n    private int age;\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public int getAge() {\n        return age;\n    }\n\n    public void setAge(int age) {\n        this.age = age;\n    }\n\n    public String toString() {\n        return String.format(&quot;%s:%d&quot;, name, age);\n    }\n}\n\nclass Y {\n    private float score;\n\n    public float getScore() {\n        return score;\n    }\n\n    public void setScore(float score) {\n        this.score = score;\n    }\n\n    public String toString() {\n        return Float.toString(score);\n    }\n}\n</code></pre>\n<p>Refer to <a href=\"https://github.com/google/gson/blob/main/UserGuide.md\" rel=\"nofollow noreferrer\">Gson User Guide</a></p>\n"},{"tags":[],"owner":{"account_id":20196841,"reputation":2309,"user_id":14813577,"display_name":"kennarddh"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698395506,"creation_date":1698395506,"answer_id":77372622,"question_id":77372279,"body_markdown":"I found how after some questions to google bard...\r\n\r\n```java\r\npublic static class CustomTypeAdapter extends TypeAdapter&lt;Object&gt; {\r\n    @Override\r\n    public void write(JsonWriter out, Object value) {\r\n\r\n    }\r\n\r\n    @Override\r\n    public Object read(JsonReader reader) {\r\n        JsonObject jsonObject = JsonParser.parseReader(reader).getAsJsonObject();\r\n\r\n        String type = jsonObject.get(&quot;type&quot;).getAsString();\r\n\r\n        System.out.println(type);\r\n\r\n        return switch (type) {\r\n            case &quot;X&quot; -&gt; new Gson().fromJson(jsonObject.get(&quot;data&quot;), X.class);\r\n            case &quot;Y&quot; -&gt; new Gson().fromJson(jsonObject.get(&quot;data&quot;), Y.class);\r\n            default -&gt; throw new JsonParseException(&quot;Unknown type: &quot; + type);\r\n        };\r\n    }\r\n}\r\n```\r\n\r\nThen I use it like this\r\n\r\n```java\r\nJsonReader reader = new Gson().newJsonReader(new StringReader(&quot;{\\&quot;type\\&quot;:\\&quot;X\\&quot;,\\&quot;data\\&quot;:{\\&quot;name\\&quot;:\\&quot;Name\\&quot;,\\&quot;age\\&quot;:10}}&quot;));\r\n\r\nObject output = new CustomTypeAdapter().read(reader);\r\n\r\nSystem.out.println(((X) output).name);\r\n```\r\n\r\nBut with this i dont know why i extend the `TypeAdapter&lt;Object&gt;`.. i dont think i need it.","title":"How to parse dynamic json object value with java gson","body":"<p>I found how after some questions to google bard...</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static class CustomTypeAdapter extends TypeAdapter&lt;Object&gt; {\n    @Override\n    public void write(JsonWriter out, Object value) {\n\n    }\n\n    @Override\n    public Object read(JsonReader reader) {\n        JsonObject jsonObject = JsonParser.parseReader(reader).getAsJsonObject();\n\n        String type = jsonObject.get(&quot;type&quot;).getAsString();\n\n        System.out.println(type);\n\n        return switch (type) {\n            case &quot;X&quot; -&gt; new Gson().fromJson(jsonObject.get(&quot;data&quot;), X.class);\n            case &quot;Y&quot; -&gt; new Gson().fromJson(jsonObject.get(&quot;data&quot;), Y.class);\n            default -&gt; throw new JsonParseException(&quot;Unknown type: &quot; + type);\n        };\n    }\n}\n</code></pre>\n<p>Then I use it like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>JsonReader reader = new Gson().newJsonReader(new StringReader(&quot;{\\&quot;type\\&quot;:\\&quot;X\\&quot;,\\&quot;data\\&quot;:{\\&quot;name\\&quot;:\\&quot;Name\\&quot;,\\&quot;age\\&quot;:10}}&quot;));\n\nObject output = new CustomTypeAdapter().read(reader);\n\nSystem.out.println(((X) output).name);\n</code></pre>\n<p>But with this i dont know why i extend the <code>TypeAdapter&lt;Object&gt;</code>.. i dont think i need it.</p>\n"},{"tags":[],"owner":{"account_id":24044690,"reputation":25,"user_id":18023837,"display_name":"cloudchamb3r"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1698398366,"creation_date":1698398366,"answer_id":77372956,"question_id":77372279,"body_markdown":"```java\r\nvar m = new TreeMap();\r\nm.put(&quot;type&quot;, X.class.getSimpleName());\r\nm.put(&quot;data&quot;, new X(&quot;myname&quot;, 20));\r\n\r\nvar gson = new Gson();\r\nvar json = gson.toJson(m);\r\n```\r\nif you don&#39;t want to create custom adapter then try using map!  \r\nit could be one of the most simple solution","title":"How to parse dynamic json object value with java gson","body":"<pre class=\"lang-java prettyprint-override\"><code>var m = new TreeMap();\nm.put(&quot;type&quot;, X.class.getSimpleName());\nm.put(&quot;data&quot;, new X(&quot;myname&quot;, 20));\n\nvar gson = new Gson();\nvar json = gson.toJson(m);\n</code></pre>\n<p>if you don't want to create custom adapter then try using map!<br />\nit could be one of the most simple solution</p>\n"}],"owner":{"account_id":20196841,"reputation":2309,"user_id":14813577,"display_name":"kennarddh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77372622,"answer_count":3,"score":-1,"last_activity_date":1698398366,"creation_date":1698392219,"question_id":77372279,"body_markdown":"I have 2 class\r\n\r\n```java\r\nclass X {\r\n  public String name;\r\n  public int age;\r\n}\r\n```\r\n\r\n```java\r\nclass Y {\r\n  public float score;\r\n}\r\n```\r\n\r\nThe json is like this\r\n\r\n```json\r\n{\r\n  &quot;type&quot;: &quot;X&quot;,\r\n  &quot;data&quot;: {\r\n    &quot;name&quot;: &quot;myname&quot;,\r\n    &quot;age&quot;: 20\r\n  }\r\n}\r\n```\r\n\r\nor\r\n\r\n```json\r\n{\r\n  &quot;type&quot;: &quot;Y&quot;,\r\n  &quot;data&quot;: {\r\n    &quot;score&quot;: 10\r\n  }\r\n}\r\n```\r\n\r\nHow to parse the json with gson but if the type field is `X` then the data will be `X` class instance","title":"How to parse dynamic json object value with java gson","body":"<p>I have 2 class</p>\n<pre class=\"lang-java prettyprint-override\"><code>class X {\n  public String name;\n  public int age;\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>class Y {\n  public float score;\n}\n</code></pre>\n<p>The json is like this</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;type&quot;: &quot;X&quot;,\n  &quot;data&quot;: {\n    &quot;name&quot;: &quot;myname&quot;,\n    &quot;age&quot;: 20\n  }\n}\n</code></pre>\n<p>or</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;type&quot;: &quot;Y&quot;,\n  &quot;data&quot;: {\n    &quot;score&quot;: 10\n  }\n}\n</code></pre>\n<p>How to parse the json with gson but if the type field is <code>X</code> then the data will be <code>X</code> class instance</p>\n"},{"tags":["java","mysql","h2"],"answers":[{"tags":[],"owner":{"account_id":1049835,"reputation":3025,"user_id":1054036,"display_name":"Viruzzo"},"down_vote_count":4,"up_vote_count":9,"is_accepted":false,"score":5,"last_activity_date":1329741637,"creation_date":1329741637,"answer_id":9361272,"question_id":9361227,"body_markdown":"There is none; still, `enum` is not a great solution in any case, just use a a reference table.","title":"How to replace enum type in H2 database?","body":"<p>There is none; still, <code>enum</code> is not a great solution in any case, just use a a reference table.</p>\n"},{"tags":[],"owner":{"account_id":161745,"reputation":49235,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"down_vote_count":0,"up_vote_count":18,"is_accepted":true,"score":18,"last_activity_date":1329764582,"creation_date":1329764582,"answer_id":9366855,"question_id":9361227,"body_markdown":"I&#39;m not sure if this is what you are looking for, but would you could do is use a check constraint:\r\n\r\n    CREATE TABLE My_Table(my_column varchar(255) \r\n        check (my_column in (&#39;first&#39;, &#39;second&#39;, &#39;last&#39;)));\r\n    \r\n    -- fails:\r\n    insert into My_Table values(&#39;x&#39;);\r\n\r\n    -- ok:\r\n    insert into My_Table values(&#39;first&#39;);\r\n\r\nThis will work in H2, Apache Derby, PostgreSQL, HSQLDB, and even SQLite. I didn&#39;t test other databases.\r\n\r\n","title":"How to replace enum type in H2 database?","body":"<p>I'm not sure if this is what you are looking for, but would you could do is use a check constraint:</p>\n\n<pre><code>CREATE TABLE My_Table(my_column varchar(255) \n    check (my_column in ('first', 'second', 'last')));\n\n-- fails:\ninsert into My_Table values('x');\n\n-- ok:\ninsert into My_Table values('first');\n</code></pre>\n\n<p>This will work in H2, Apache Derby, PostgreSQL, HSQLDB, and even SQLite. I didn't test other databases.</p>\n"},{"tags":[],"owner":{"account_id":3629218,"reputation":1414,"user_id":3025921,"accept_rate":100,"display_name":"thesquaregroot"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1547524885,"creation_date":1500071421,"answer_id":45112448,"question_id":9361227,"body_markdown":"I ran into this problem and solved it by creating a separate table and foreign key constraint.\r\n\r\n    CREATE TABLE My_Enum_Table (\r\n        my_column varchar(255) UNIQUE\r\n    );\r\n\r\n    INSERT INTO My_Enum_Table (my_column)\r\n    VALUES\r\n        (&#39;First&#39;),\r\n        (&#39;Second&#39;),\r\n        ...\r\n        (&#39;Last&#39;);\r\n    \r\n    CREATE TABLE My_Table (\r\n       my_column varchar(255),\r\n       FOREIGN KEY (my_column) REFERENCES My_Enum_Table (my_column)\r\n    );\r\n\r\nThat way when you try to do an `INSERT` into `My_Table` it will do a foreign key check to make sure the value you&#39;re inserting is in `My_Enum_Table`.\r\n\r\nThere are some trade-offs here though:\r\n\r\n- PROS\r\n - You can still interact with this the same way you would an `ENUM`.\r\n - You also get a little extra flexibility in the sense that you can add another value without having to alter table definitions.\r\n- CONS\r\n - This is likely slower than an `ENUM` since it has to do a table look-up.  Realistically though since the table should have a reasonably small number of rows this is probably fairly negligible.  Adding an index to `My_Table.my_column` may help with this.\r\n - This prevents the need to join with the reference table but with basically the same level of complexity from a database perspective.  Though this probably isn&#39;t a big deal unless you&#39;re concerned about cluttering your database with another table.\r\n - This also requires you to use an engine that support foreign keys, such as `INNODB`.  I&#39;m not sure if this is really a CON but I suppose it could be for someone with specialized needs.","title":"How to replace enum type in H2 database?","body":"<p>I ran into this problem and solved it by creating a separate table and foreign key constraint.</p>\n\n<pre><code>CREATE TABLE My_Enum_Table (\n    my_column varchar(255) UNIQUE\n);\n\nINSERT INTO My_Enum_Table (my_column)\nVALUES\n    ('First'),\n    ('Second'),\n    ...\n    ('Last');\n\nCREATE TABLE My_Table (\n   my_column varchar(255),\n   FOREIGN KEY (my_column) REFERENCES My_Enum_Table (my_column)\n);\n</code></pre>\n\n<p>That way when you try to do an <code>INSERT</code> into <code>My_Table</code> it will do a foreign key check to make sure the value you're inserting is in <code>My_Enum_Table</code>.</p>\n\n<p>There are some trade-offs here though:</p>\n\n<ul>\n<li>PROS\n\n<ul>\n<li>You can still interact with this the same way you would an <code>ENUM</code>.</li>\n<li>You also get a little extra flexibility in the sense that you can add another value without having to alter table definitions.</li>\n</ul></li>\n<li>CONS\n\n<ul>\n<li>This is likely slower than an <code>ENUM</code> since it has to do a table look-up.  Realistically though since the table should have a reasonably small number of rows this is probably fairly negligible.  Adding an index to <code>My_Table.my_column</code> may help with this.</li>\n<li>This prevents the need to join with the reference table but with basically the same level of complexity from a database perspective.  Though this probably isn't a big deal unless you're concerned about cluttering your database with another table.</li>\n<li>This also requires you to use an engine that support foreign keys, such as <code>INNODB</code>.  I'm not sure if this is really a CON but I suppose it could be for someone with specialized needs.</li>\n</ul></li>\n</ul>\n"},{"tags":[],"owner":{"account_id":132750,"reputation":2444,"user_id":333643,"display_name":"nafg"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1507519963,"creation_date":1507519963,"answer_id":46638442,"question_id":9361227,"body_markdown":"Looks like H2 has enums: http://www.h2database.com/html/datatypes.html#enum_type\r\n\r\nSo the exact same syntax should work. (I don&#39;t know how closely the semantics match.)","title":"How to replace enum type in H2 database?","body":"<p>Looks like H2 has enums: <a href=\"http://www.h2database.com/html/datatypes.html#enum_type\" rel=\"noreferrer\">http://www.h2database.com/html/datatypes.html#enum_type</a></p>\n\n<p>So the exact same syntax should work. (I don't know how closely the semantics match.)</p>\n"},{"tags":[],"owner":{"account_id":3672667,"reputation":3747,"user_id":3059453,"display_name":"blueberry0xff"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1514970430,"creation_date":1514970430,"answer_id":48074237,"question_id":9361227,"body_markdown":"Upgrade h2 jar\r\n\r\nH2 maven repository:\r\nhttps://mvnrepository.com/artifact/com.h2database/h2\r\n\r\njar versions:\r\n\r\n1.4.196 Central (Jun, 2017) - enum support (tested)\r\n\r\n1.4.192\tCentral (May, 2016) - lack of enum support (also tested)","title":"How to replace enum type in H2 database?","body":"<p>Upgrade h2 jar</p>\n\n<p>H2 maven repository:\n<a href=\"https://mvnrepository.com/artifact/com.h2database/h2\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.h2database/h2</a></p>\n\n<p>jar versions:</p>\n\n<p>1.4.196 Central (Jun, 2017) - enum support (tested)</p>\n\n<p>1.4.192 Central (May, 2016) - lack of enum support (also tested)</p>\n"},{"tags":[],"owner":{"account_id":4424946,"reputation":5229,"user_id":3603660,"accept_rate":75,"display_name":"loicmathieu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698398189,"creation_date":1698398189,"answer_id":77372931,"question_id":9361227,"body_markdown":"This is now supported on H2, you can create a table with an enum column and even alter the enum later if needed.\r\n\r\n    CREATE TABLE example (\r\n        &quot;example&quot; TEXT,\r\n        &quot;state&quot; ENUM (\r\n             &#39;CREATED&#39;,\r\n             &#39;DELETED&#39;\r\n         )\r\n    );\r\n    \r\n    ALTER TABLE example ALTER COLUMN &quot;state&quot; ENUM (\r\n        &#39;CREATED&#39;,\r\n        &#39;USED&#39;,\r\n        &#39;DELETED&#39;\r\n    );","title":"How to replace enum type in H2 database?","body":"<p>This is now supported on H2, you can create a table with an enum column and even alter the enum later if needed.</p>\n<pre><code>CREATE TABLE example (\n    &quot;example&quot; TEXT,\n    &quot;state&quot; ENUM (\n         'CREATED',\n         'DELETED'\n     )\n);\n\nALTER TABLE example ALTER COLUMN &quot;state&quot; ENUM (\n    'CREATED',\n    'USED',\n    'DELETED'\n);\n</code></pre>\n"}],"owner":{"account_id":950085,"reputation":2784,"user_id":1356124,"accept_rate":54,"display_name":"Igor Kostenko"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20554,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":9366855,"answer_count":6,"score":15,"last_activity_date":1698398189,"creation_date":1329741414,"question_id":9361227,"body_markdown":"MySQL dialect:\r\n\r\n    CREATE TABLE My_Table ( my_column enum (&#39;first&#39;, &#39;second&#39;, ... &#39;last&#39;));\r\n\r\nH2 dialect:\r\n\r\n    CREATE TABLE My_Table ( my_column ? (&#39;first&#39;, &#39;second&#39;, ... &#39;last&#39;));\r\n\r\nWhat type is equivalent in H2 too the `enum` type from MySQL?","title":"How to replace enum type in H2 database?","body":"<p>MySQL dialect:</p>\n\n<pre><code>CREATE TABLE My_Table ( my_column enum ('first', 'second', ... 'last'));\n</code></pre>\n\n<p>H2 dialect:</p>\n\n<pre><code>CREATE TABLE My_Table ( my_column ? ('first', 'second', ... 'last'));\n</code></pre>\n\n<p>What type is equivalent in H2 too the <code>enum</code> type from MySQL?</p>\n"},{"tags":["java","rest","gson","unirest"],"comments":[{"owner":{"account_id":18184107,"reputation":807,"user_id":13231239,"display_name":"Deotyma"},"score":0,"creation_date":1698438599,"post_id":77372583,"comment_id":136410595,"body_markdown":"What is your script for this template?","body":"What is your script for this template?"}],"answers":[{"tags":[],"owner":{"account_id":26854060,"reputation":11,"user_id":20438587,"display_name":"Bianca "},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698397973,"creation_date":1698397973,"answer_id":77372910,"question_id":77372583,"body_markdown":"I resolved it by specifying a new header and inserting it into the headers field like so\r\n\r\n        Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\r\n        headers.put(&quot;accept&quot;, &quot;application/json&quot;);\r\n        headers.put(&quot;content-type&quot;, &quot;application/json&quot;);\r\n\r\n      HttpResponse&lt;JsonNode&gt; response = Unirest.post(http://localhost:8080/post/&quot;)\r\n                .headers(headers)\r\n                .body(entityJson)\r\n                .asJson();\r\n\r\n","title":"Unirest inserts empty fields when doing a POST with json body, even if same body works elsewhere","body":"<p>I resolved it by specifying a new header and inserting it into the headers field like so</p>\n<pre><code>    Map&lt;String, String&gt; headers = new HashMap&lt;&gt;();\n    headers.put(&quot;accept&quot;, &quot;application/json&quot;);\n    headers.put(&quot;content-type&quot;, &quot;application/json&quot;);\n\n  HttpResponse&lt;JsonNode&gt; response = Unirest.post(http://localhost:8080/post/&quot;)\n            .headers(headers)\n            .body(entityJson)\n            .asJson();\n</code></pre>\n"}],"owner":{"account_id":26854060,"reputation":11,"user_id":20438587,"display_name":"Bianca "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77372910,"answer_count":1,"score":0,"last_activity_date":1698397973,"creation_date":1698395211,"question_id":77372583,"body_markdown":"I&#39;m using unirest to do a post/put request using as body a string I get from gson&#39;s toJson method\r\n\r\n```\r\n        String entityJson = gson.toJson(entity);\r\n        System.out.println(entityJson);\r\n\r\n        HttpResponse&lt;JsonNode&gt; response = Unirest.post(http://localhost:8080/post/&quot;)\r\n                .header(&quot;Accept&quot;, &quot;application/json&quot;)\r\n                .body(entityJson)\r\n                .asJson();\r\n        System.out.println(response.getBody().toPrettyString());\r\n```\r\n\r\nThe response I get has all the fields of the entity empty, but when copying the printed string of entityJson and using it as a json body while doing the same post request through postman it works correctly with all the fields filled like in the entity","title":"Unirest inserts empty fields when doing a POST with json body, even if same body works elsewhere","body":"<p>I'm using unirest to do a post/put request using as body a string I get from gson's toJson method</p>\n<pre><code>        String entityJson = gson.toJson(entity);\n        System.out.println(entityJson);\n\n        HttpResponse&lt;JsonNode&gt; response = Unirest.post(http://localhost:8080/post/&quot;)\n                .header(&quot;Accept&quot;, &quot;application/json&quot;)\n                .body(entityJson)\n                .asJson();\n        System.out.println(response.getBody().toPrettyString());\n</code></pre>\n<p>The response I get has all the fields of the entity empty, but when copying the printed string of entityJson and using it as a json body while doing the same post request through postman it works correctly with all the fields filled like in the entity</p>\n"},{"tags":["java","arrays","initialization"],"comments":[{"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"score":7,"creation_date":1257235034,"post_id":1665834,"comment_id":1538954,"body_markdown":"I just realized this is a stupid question :( As these arrays are initialized exactly the same way as any other array just with a size 0. Shows how often I initialize arrays nowadays. I&#39;ll leave the question (not delete it) cause someday someone else might be just as  stupid as I was just now :)","body":"I just realized this is a stupid question :( As these arrays are initialized exactly the same way as any other array just with a size 0. Shows how often I initialize arrays nowadays. I&#39;ll leave the question (not delete it) cause someday someone else might be just as  stupid as I was just now :)"},{"owner":{"account_id":8305927,"reputation":1012,"user_id":7571925,"display_name":"Blake"},"score":1,"creation_date":1521053200,"post_id":1665834,"comment_id":85573883,"body_markdown":"I am confused about what use case you would have for an array of length 0, and why you wouldn&#39;t simply init to `null` in that special case.","body":"I am confused about what use case you would have for an array of length 0, and why you wouldn&#39;t simply init to <code>null</code> in that special case."}],"answers":[{"tags":[],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1257235985,"creation_date":1257234597,"answer_id":1665836,"question_id":1665834,"body_markdown":"Ok I actually found the answer but thought I would &#39;import&#39; the question into SO anyway\r\n\r\n`String[] files = new String[0];`  \r\nor  \r\n`int[] files = new int[0];`","title":"How can I initialize a String array with length 0 in Java?","body":"<p>Ok I actually found the answer but thought I would 'import' the question into SO anyway</p>\n\n<p><code>String[] files = new String[0];</code><br>\nor<br>\n<code>int[] files = new int[0];</code></p>\n"},{"tags":[],"owner":{"account_id":43169,"reputation":43162,"user_id":126039,"accept_rate":97,"display_name":"mauris"},"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1257234604,"creation_date":1257234604,"answer_id":1665837,"question_id":1665834,"body_markdown":"`String[] str = new String[0];`?","title":"How can I initialize a String array with length 0 in Java?","body":"<p><code>String[] str = new String[0];</code>?</p>\n"},{"tags":[],"owner":{"account_id":50098,"reputation":32598,"user_id":149311,"accept_rate":80,"display_name":"Thomas Jung"},"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1257235460,"creation_date":1257234950,"answer_id":1665860,"question_id":1665834,"body_markdown":"    String[] str = {};\r\n\r\nBut\r\n\r\n    return {};\r\n\r\nwon&#39;t work as the type information is missing.","title":"How can I initialize a String array with length 0 in Java?","body":"<pre><code>String[] str = {};\n</code></pre>\n\n<p>But</p>\n\n<pre><code>return {};\n</code></pre>\n\n<p>won't work as the type information is missing.</p>\n"},{"tags":[],"owner":{"account_id":11683,"reputation":1438131,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"down_vote_count":0,"up_vote_count":262,"is_accepted":true,"score":262,"last_activity_date":1257235751,"creation_date":1257235751,"answer_id":1665899,"question_id":1665834,"body_markdown":"As others have said,\r\n\r\n    new String[0]\r\n\r\nwill indeed create an empty array. However, there&#39;s one nice thing about arrays - their size can&#39;t change, so you can always use the same empty array reference. So in your code, you can use:\r\n\r\n    private static final String[] EMPTY_ARRAY = new String[0];\r\n\r\nand then just return `EMPTY_ARRAY` each time you need it - there&#39;s no need to create a new object each time.\r\n","title":"How can I initialize a String array with length 0 in Java?","body":"<p>As others have said,</p>\n\n<pre><code>new String[0]\n</code></pre>\n\n<p>will indeed create an empty array. However, there's one nice thing about arrays - their size can't change, so you can always use the same empty array reference. So in your code, you can use:</p>\n\n<pre><code>private static final String[] EMPTY_ARRAY = new String[0];\n</code></pre>\n\n<p>and then just return <code>EMPTY_ARRAY</code> each time you need it - there's no need to create a new object each time.</p>\n"},{"tags":[],"owner":{"account_id":2606443,"reputation":464,"user_id":2257531,"display_name":"Swapnil Gangrade"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1490001086,"creation_date":1489999368,"answer_id":42899080,"question_id":1665834,"body_markdown":"Make a function which will not return null instead return an empty array you can go through below code to understand. \r\n\r\n        public static String[] getJavaFileNameList(File inputDir) {\r\n        String[] files = inputDir.list(new FilenameFilter() {\r\n            @Override\r\n            public boolean accept(File current, String name) {\r\n                return new File(current, name).isFile() &amp;&amp; (name.endsWith(&quot;java&quot;));\r\n            }\r\n        });\r\n\r\n        return files == null ? new String[0] : files;\r\n    }\r\n\r\n ","title":"How can I initialize a String array with length 0 in Java?","body":"<p>Make a function which will not return null instead return an empty array you can go through below code to understand. </p>\n\n<pre><code>    public static String[] getJavaFileNameList(File inputDir) {\n    String[] files = inputDir.list(new FilenameFilter() {\n        @Override\n        public boolean accept(File current, String name) {\n            return new File(current, name).isFile() &amp;&amp; (name.endsWith(\"java\"));\n        }\n    });\n\n    return files == null ? new String[0] : files;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4092354,"reputation":93,"user_id":3360026,"display_name":"freak0"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1527685310,"creation_date":1527685310,"answer_id":50605417,"question_id":1665834,"body_markdown":"You can use ArrayUtils.EMPTY_STRING_ARRAY from org.apache.commons.lang3\r\n\r\n    import org.apache.commons.lang3.ArrayUtils;\r\n        \r\n        class Scratch {\r\n            public static void main(String[] args) {\r\n                String[] strings = ArrayUtils.EMPTY_STRING_ARRAY;\r\n            }\r\n        }","title":"How can I initialize a String array with length 0 in Java?","body":"<p>You can use ArrayUtils.EMPTY_STRING_ARRAY from org.apache.commons.lang3</p>\n\n<pre><code>import org.apache.commons.lang3.ArrayUtils;\n\n    class Scratch {\n        public static void main(String[] args) {\n            String[] strings = ArrayUtils.EMPTY_STRING_ARRAY;\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11373312,"reputation":109,"user_id":8338329,"display_name":"dynamo"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698397959,"creation_date":1619027094,"answer_id":67200970,"question_id":1665834,"body_markdown":"You can use the following things-\r\n  \r\n\r\n    1. String[] str = new String[0];\r\n    2. String[] str = ArrayUtils.EMPTY_STRING_ARRAY;\r\n\r\nBoth are the same.","title":"How can I initialize a String array with length 0 in Java?","body":"<p>You can use the following things-</p>\n<pre><code>1. String[] str = new String[0];\n2. String[] str = ArrayUtils.EMPTY_STRING_ARRAY;\n</code></pre>\n<p>Both are the same.</p>\n"}],"owner":{"account_id":717,"reputation":54118,"user_id":939,"accept_rate":81,"display_name":"Ron Tuffin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":379690,"favorite_count":0,"down_vote_count":1,"up_vote_count":156,"accepted_answer_id":1665899,"answer_count":7,"score":155,"last_activity_date":1698397959,"creation_date":1257234550,"question_id":1665834,"body_markdown":"The Java Docs for the method   \r\n`String[] java.io.File.list(FilenameFilter filter)`  \r\nincludes this in the returns description:\r\n\r\n&gt; The array will be empty if the directory is empty or if no names were accepted by the filter.\r\n\r\nHow do I do a similar thing and initialize a String array (or any other array for that matter) to have a length 0?\r\n","title":"How can I initialize a String array with length 0 in Java?","body":"<p>The Java Docs for the method<br>\n<code>String[] java.io.File.list(FilenameFilter filter)</code><br>\nincludes this in the returns description:</p>\n\n<blockquote>\n  <p>The array will be empty if the directory is empty or if no names were accepted by the filter.</p>\n</blockquote>\n\n<p>How do I do a similar thing and initialize a String array (or any other array for that matter) to have a length 0?</p>\n"},{"tags":["java","android"],"answers":[{"tags":[],"owner":{"account_id":18812812,"reputation":92,"user_id":13720647,"display_name":"Zobaer Hossain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698397902,"creation_date":1698397902,"answer_id":77372898,"question_id":77369858,"body_markdown":"The issue you&#39;re encountering is due to the fact that you&#39;re closing the cursor in the `onLoadFinished` method, and it&#39;s not being managed properly when your fragment is being destroyed. When your fragment gets recreated after being in the background, you&#39;re trying to access the closed cursor, resulting in the &quot;attempt to invoke interface method on a null object reference&quot; error.\r\n\r\nTo fix this issue, you need to ensure that you don&#39;t close the cursor when it&#39;s still needed by your fragment. Here&#39;s how you can modify your code to manage the cursor lifecycle correctly:\r\n\r\n1. Initialize your `songMainArrayList` as a global variable in your Fragment, so it&#39;s accessible throughout the fragment&#39;s lifecycle:\r\n\r\n```java\r\npublic class YourFragment extends Fragment implements LoaderManager.LoaderCallbacks&lt;Cursor&gt; {\r\n    private ArrayList&lt;Song&gt; songMainArrayList = new ArrayList&lt;&gt;();\r\n    // ...\r\n}\r\n```\r\n\r\n2. In your `onLoadFinished` method, don&#39;t close the cursor immediately after populating your `songMainArrayList`. Instead, store a reference to the cursor, and Android will automatically manage the cursor lifecycle for you:\r\n\r\n```java\r\n@Override\r\npublic void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) {\r\n    // Clear the list to avoid duplicates when the loader reloads data.\r\n    songMainArrayList.clear();\r\n\r\n    if (data != null &amp;&amp; data.moveToFirst()) {\r\n        do {\r\n            long id = data.getLong(data.getColumnIndex(MediaStore.Audio.Media._ID));\r\n            long duration = data.getLong(data.getColumnIndex(MediaStore.Audio.AudioColumns.DURATION));\r\n            String title = data.getString(data.getColumnIndex(MediaStore.Audio.Media.TITLE));\r\n            String artist = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ARTIST));\r\n            String album = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ALBUM));\r\n            long albumid = data.getLong(data.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));\r\n            songMainArrayList.add(new Song(id, duration, album, title, artist, AppConstants.getAlbumArtUri(albumid), false));\r\n        } while (data.moveToNext());\r\n\r\n        // Don&#39;t close the cursor here; it will be automatically managed by the Loader.\r\n    }\r\n\r\n    // Update your UI with the songMainArrayList.\r\n    // ...\r\n}\r\n```\r\n\r\nWith this approach, the cursor will be managed automatically by the `LoaderManager`, and you don&#39;t need to worry about explicitly closing it. Just make sure to clear your `songMainArrayList` at the beginning of `onLoadFinished` to avoid duplicates when the loader reloads data.\r\n\r\nBy making these changes, you should be able to avoid the &quot;attempt to invoke interface method on a null object reference&quot; error when your fragment is recreated after being in the background.","title":"android.database.StaleDataException ScrollingFragment.java:234 Attempted to access a cursor after it has been closed","body":"<p>The issue you're encountering is due to the fact that you're closing the cursor in the <code>onLoadFinished</code> method, and it's not being managed properly when your fragment is being destroyed. When your fragment gets recreated after being in the background, you're trying to access the closed cursor, resulting in the &quot;attempt to invoke interface method on a null object reference&quot; error.</p>\n<p>To fix this issue, you need to ensure that you don't close the cursor when it's still needed by your fragment. Here's how you can modify your code to manage the cursor lifecycle correctly:</p>\n<ol>\n<li>Initialize your <code>songMainArrayList</code> as a global variable in your Fragment, so it's accessible throughout the fragment's lifecycle:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class YourFragment extends Fragment implements LoaderManager.LoaderCallbacks&lt;Cursor&gt; {\n    private ArrayList&lt;Song&gt; songMainArrayList = new ArrayList&lt;&gt;();\n    // ...\n}\n</code></pre>\n<ol start=\"2\">\n<li>In your <code>onLoadFinished</code> method, don't close the cursor immediately after populating your <code>songMainArrayList</code>. Instead, store a reference to the cursor, and Android will automatically manage the cursor lifecycle for you:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) {\n    // Clear the list to avoid duplicates when the loader reloads data.\n    songMainArrayList.clear();\n\n    if (data != null &amp;&amp; data.moveToFirst()) {\n        do {\n            long id = data.getLong(data.getColumnIndex(MediaStore.Audio.Media._ID));\n            long duration = data.getLong(data.getColumnIndex(MediaStore.Audio.AudioColumns.DURATION));\n            String title = data.getString(data.getColumnIndex(MediaStore.Audio.Media.TITLE));\n            String artist = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ARTIST));\n            String album = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ALBUM));\n            long albumid = data.getLong(data.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));\n            songMainArrayList.add(new Song(id, duration, album, title, artist, AppConstants.getAlbumArtUri(albumid), false));\n        } while (data.moveToNext());\n\n        // Don't close the cursor here; it will be automatically managed by the Loader.\n    }\n\n    // Update your UI with the songMainArrayList.\n    // ...\n}\n</code></pre>\n<p>With this approach, the cursor will be managed automatically by the <code>LoaderManager</code>, and you don't need to worry about explicitly closing it. Just make sure to clear your <code>songMainArrayList</code> at the beginning of <code>onLoadFinished</code> to avoid duplicates when the loader reloads data.</p>\n<p>By making these changes, you should be able to avoid the &quot;attempt to invoke interface method on a null object reference&quot; error when your fragment is recreated after being in the background.</p>\n"}],"owner":{"account_id":24246713,"reputation":3,"user_id":18198324,"display_name":"Nicholas"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77372898,"answer_count":1,"score":0,"last_activity_date":1698397902,"creation_date":1698348610,"question_id":77369858,"body_markdown":"This is the fragment activity on a music player. When I press the back button and the app plays on the background, the app crashes when I open it again. (attempt to invoke interface method &quot;_____&quot; on a null object reference) on Destroy is what Android Studio is showing me.\r\n\r\n[screenshot of the code](https://i.stack.imgur.com/5oj9e.png)\r\n\r\n    @Override\r\n    public void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) {\r\n        //int textLimit = 26;\r\n        if (data != null &amp;&amp; data.moveToFirst()) {\r\n            do {\r\n                long id = data.getLong(data.getColumnIndex(MediaStore.Audio.Media._ID));\r\n                long duration = data.getLong(data.getColumnIndex(MediaStore.Audio.AudioColumns.DURATION));\r\n                String title = data.getString(data.getColumnIndex(MediaStore.Audio.Media.TITLE));\r\n                String artist = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ARTIST));\r\n                String album = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ALBUM));\r\n                long albumid = data.getLong(data.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));\r\n                songMainArrayList.add(new Song(id, duration,album, title, artist, AppConstants.getAlbumArtUri(albumid), false));\r\n            }\r\n            while (data.moveToNext());\r\n            data.close();\r\n        }\r\n\r\n \r\n\r\n\r\n\r\nI&#39;m not sure what might be the problem","title":"android.database.StaleDataException ScrollingFragment.java:234 Attempted to access a cursor after it has been closed","body":"<p>This is the fragment activity on a music player. When I press the back button and the app plays on the background, the app crashes when I open it again. (attempt to invoke interface method &quot;_____&quot; on a null object reference) on Destroy is what Android Studio is showing me.</p>\n<p><a href=\"https://i.stack.imgur.com/5oj9e.png\" rel=\"nofollow noreferrer\">screenshot of the code</a></p>\n<pre><code>@Override\npublic void onLoadFinished(Loader&lt;Cursor&gt; loader, Cursor data) {\n    //int textLimit = 26;\n    if (data != null &amp;&amp; data.moveToFirst()) {\n        do {\n            long id = data.getLong(data.getColumnIndex(MediaStore.Audio.Media._ID));\n            long duration = data.getLong(data.getColumnIndex(MediaStore.Audio.AudioColumns.DURATION));\n            String title = data.getString(data.getColumnIndex(MediaStore.Audio.Media.TITLE));\n            String artist = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ARTIST));\n            String album = data.getString(data.getColumnIndex(MediaStore.Audio.Media.ALBUM));\n            long albumid = data.getLong(data.getColumnIndex(MediaStore.Audio.Media.ALBUM_ID));\n            songMainArrayList.add(new Song(id, duration,album, title, artist, AppConstants.getAlbumArtUri(albumid), false));\n        }\n        while (data.moveToNext());\n        data.close();\n    }\n</code></pre>\n<p>I'm not sure what might be the problem</p>\n"},{"tags":["java","spring-boot","testing","karate"],"answers":[{"tags":[],"owner":{"account_id":48302,"reputation":55353,"user_id":143475,"display_name":"Peter Thomas"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698397668,"creation_date":1578669836,"answer_id":59684516,"question_id":59682699,"body_markdown":"The problem is `retry until` comes into the picture only *after* the HTTP connection has been established. You need to figure out a way to wait until your server can accept connections.\r\n\r\nWhy you see 3 attempts is because that is the default behavior of the underlying Apache HTTP client.\r\n\r\nYou should be able to write or re-use some utility to do this. Take a look at this code from Karate internals, look for the `waitForHttp` method:\r\n\r\nhttps://github.com/karatelabs/karate/blob/v1.4.1/karate-core/src/main/java/com/intuit/karate/shell/Command.java#L219\r\n\r\nAnd in my opinion, the best place to do this &quot;wait&quot; is in the JUnit / Java code that kicks off the Karate suite - which you probably already have for starting Spring Boot.\r\n\r\n\r\n\r\n","title":"Karate 0.9.5.RC5 - &#39;retry until&#39; function somehow does not respect my &#39;retry&#39; configuration in karate-config.js","body":"<p>The problem is <code>retry until</code> comes into the picture only <em>after</em> the HTTP connection has been established. You need to figure out a way to wait until your server can accept connections.</p>\n<p>Why you see 3 attempts is because that is the default behavior of the underlying Apache HTTP client.</p>\n<p>You should be able to write or re-use some utility to do this. Take a look at this code from Karate internals, look for the <code>waitForHttp</code> method:</p>\n<p><a href=\"https://github.com/karatelabs/karate/blob/v1.4.1/karate-core/src/main/java/com/intuit/karate/shell/Command.java#L219\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/blob/v1.4.1/karate-core/src/main/java/com/intuit/karate/shell/Command.java#L219</a></p>\n<p>And in my opinion, the best place to do this &quot;wait&quot; is in the JUnit / Java code that kicks off the Karate suite - which you probably already have for starting Spring Boot.</p>\n"}],"owner":{"account_id":143246,"reputation":367,"user_id":351448,"accept_rate":50,"display_name":"olibur"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1070,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":59684516,"answer_count":1,"score":2,"last_activity_date":1698397814,"creation_date":1578663025,"question_id":59682699,"body_markdown":"I have following test:\r\n\r\n```\r\nFeature: News API\r\n\r\n  Background:\r\n    * url baseUrl\r\n\r\n  Scenario: get news index\r\n    Given path &quot;/&quot;\r\n    And retry until responseStatus == 200\r\n    When method get\r\n    Then status 200\r\n    And match response contains &quot;News service up and running&quot;\r\n```\r\n\r\nand the following karate-config.js\r\n\r\n```js\r\nfunction fn() {\r\n\t// get java system property &#39;karate.env&#39;\r\n\tvar env = karate.env;\r\n\tkarate.log(&#39;karate.env system property was:&#39;, env);\r\n\r\n\tvar config = {\r\n\t\tbaseUrl: &#39;http://localhost:8080&#39;,\r\n\t};\r\n\r\n\tkarate.configure(&#39;retry&#39;, {count: 5, interval: 6000});\r\n\tkarate.configure(&#39;connectTimeout&#39;, 5000);\r\n\tkarate.configure(&#39;readTimeout&#39;, 5000);\r\n\r\n\treturn config;\r\n}\r\n```\r\n\r\nand the following error in the console after executing the tests with the maven-failsafe-plugin:\r\n\r\n```none\r\n...\r\n[INFO] Running newsservice.NewsServiceIT\r\n[main] INFO  o.a.http.impl.execchain.RetryExec - I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}-&gt;http://localhost:8080: The target server failed to respond\r\n[main] INFO  o.a.http.impl.execchain.RetryExec - Retrying request to {}-&gt;http://localhost:8080\r\n[main] INFO  o.a.http.impl.execchain.RetryExec - I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}-&gt;http://localhost:8080: The target server failed to respond\r\n[main] INFO  o.a.http.impl.execchain.RetryExec - Retrying request to {}-&gt;http://localhost:8080\r\n[main] INFO  o.a.http.impl.execchain.RetryExec - I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}-&gt;http://localhost:8080: The target server failed to respond\r\n[main] INFO  o.a.http.impl.execchain.RetryExec - Retrying request to {}-&gt;http://localhost:8080\r\n[main] ERROR com.intuit.karate - org.apache.http.NoHttpResponseException: localhost:8080 failed to respond, http call failed after 2 milliseconds for URL: http://localhost:8080/\r\n[main] ERROR com.intuit.karate - http request failed: \r\norg.apache.http.NoHttpResponseException: localhost:8080 failed to respond\r\n---------------------------------------------------------\r\nfeature: classpath:newsservice/news/news-index.feature\r\nscenarios:  1 | passed:  0 | failed:  1 | time: 0.7678\r\n---------------------------------------------------------\r\n\r\nHTML report: (paste into browser to view) | Karate version: 0.9.5.RC5\r\n...\r\n```\r\n\r\nBefore the tests start, I boot up my Spring Boot application and this takes some time (~5-7 seconds) and I know that the test does not succeed because the Sprint Boot app has not yet started.\r\n\r\nThat&#39;s why I&#39;ve tried to use this `retry until` feature of Karate to make sure it retries after some intervals.\r\n\r\nBut it seems that the `retry` config is not respected according to the console output. It seems so that it always only try 3 times...\r\n\r\nI have also tried to set the `retry` config in the test file itself like in the Karate docs with:\r\n\r\n`* configure retry = { count: 10, interval: 5000 }`\r\n\r\nbut this also did not work.\r\n\r\nMaybe you have a hint why it does not work or do I still miss something?\r\n\r\n","title":"Karate 0.9.5.RC5 - &#39;retry until&#39; function somehow does not respect my &#39;retry&#39; configuration in karate-config.js","body":"<p>I have following test:</p>\n<pre><code>Feature: News API\n\n  Background:\n    * url baseUrl\n\n  Scenario: get news index\n    Given path &quot;/&quot;\n    And retry until responseStatus == 200\n    When method get\n    Then status 200\n    And match response contains &quot;News service up and running&quot;\n</code></pre>\n<p>and the following karate-config.js</p>\n<pre class=\"lang-js prettyprint-override\"><code>function fn() {\n    // get java system property 'karate.env'\n    var env = karate.env;\n    karate.log('karate.env system property was:', env);\n\n    var config = {\n        baseUrl: 'http://localhost:8080',\n    };\n\n    karate.configure('retry', {count: 5, interval: 6000});\n    karate.configure('connectTimeout', 5000);\n    karate.configure('readTimeout', 5000);\n\n    return config;\n}\n</code></pre>\n<p>and the following error in the console after executing the tests with the maven-failsafe-plugin:</p>\n<pre class=\"lang-none prettyprint-override\"><code>...\n[INFO] Running newsservice.NewsServiceIT\n[main] INFO  o.a.http.impl.execchain.RetryExec - I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}-&gt;http://localhost:8080: The target server failed to respond\n[main] INFO  o.a.http.impl.execchain.RetryExec - Retrying request to {}-&gt;http://localhost:8080\n[main] INFO  o.a.http.impl.execchain.RetryExec - I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}-&gt;http://localhost:8080: The target server failed to respond\n[main] INFO  o.a.http.impl.execchain.RetryExec - Retrying request to {}-&gt;http://localhost:8080\n[main] INFO  o.a.http.impl.execchain.RetryExec - I/O exception (org.apache.http.NoHttpResponseException) caught when processing request to {}-&gt;http://localhost:8080: The target server failed to respond\n[main] INFO  o.a.http.impl.execchain.RetryExec - Retrying request to {}-&gt;http://localhost:8080\n[main] ERROR com.intuit.karate - org.apache.http.NoHttpResponseException: localhost:8080 failed to respond, http call failed after 2 milliseconds for URL: http://localhost:8080/\n[main] ERROR com.intuit.karate - http request failed: \norg.apache.http.NoHttpResponseException: localhost:8080 failed to respond\n---------------------------------------------------------\nfeature: classpath:newsservice/news/news-index.feature\nscenarios:  1 | passed:  0 | failed:  1 | time: 0.7678\n---------------------------------------------------------\n\nHTML report: (paste into browser to view) | Karate version: 0.9.5.RC5\n...\n</code></pre>\n<p>Before the tests start, I boot up my Spring Boot application and this takes some time (~5-7 seconds) and I know that the test does not succeed because the Sprint Boot app has not yet started.</p>\n<p>That's why I've tried to use this <code>retry until</code> feature of Karate to make sure it retries after some intervals.</p>\n<p>But it seems that the <code>retry</code> config is not respected according to the console output. It seems so that it always only try 3 times...</p>\n<p>I have also tried to set the <code>retry</code> config in the test file itself like in the Karate docs with:</p>\n<p><code>* configure retry = { count: 10, interval: 5000 }</code></p>\n<p>but this also did not work.</p>\n<p>Maybe you have a hint why it does not work or do I still miss something?</p>\n"},{"tags":["java","selenium-webdriver","microsoft-edge","iedriverserver","javascriptexecutor"],"answers":[{"tags":[],"owner":{"account_id":21316508,"reputation":1609,"user_id":15690271,"display_name":"Xudong Peng"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698397727,"creation_date":1698397425,"answer_id":77372837,"question_id":77368066,"body_markdown":"As far as I know, this is by design. You cannot set file input via JavaScript as this is a security violation. Therefore you cannot achieve this requirement by executing scripts on the page. \r\n\r\nBut `sendKeys` work. Because this method bypasses security restrictions, it is an operating system-level event and is not browser-specific. If it is just a simple text input element, this requirement can be easily achieved through javascript. But input element of file type will call the file system.\r\n\r\nJust refer to this similar case and relevant doc:\r\n\r\n[how does selenium webdriver upload files to the browser?](https://stackoverflow.com/questions/13963738/how-does-selenium-webdriver-upload-files-to-the-browser)\r\n\r\nhttps://aosabook.org/en/v1/selenium.html","title":"Selenium Javascriptexecutor (edge/ie) not changing the value of an input field","body":"<p>As far as I know, this is by design. You cannot set file input via JavaScript as this is a security violation. Therefore you cannot achieve this requirement by executing scripts on the page.</p>\n<p>But <code>sendKeys</code> work. Because this method bypasses security restrictions, it is an operating system-level event and is not browser-specific. If it is just a simple text input element, this requirement can be easily achieved through javascript. But input element of file type will call the file system.</p>\n<p>Just refer to this similar case and relevant doc:</p>\n<p><a href=\"https://stackoverflow.com/questions/13963738/how-does-selenium-webdriver-upload-files-to-the-browser\">how does selenium webdriver upload files to the browser?</a></p>\n<p><a href=\"https://aosabook.org/en/v1/selenium.html\" rel=\"nofollow noreferrer\">https://aosabook.org/en/v1/selenium.html</a></p>\n"}],"owner":{"account_id":7783163,"reputation":1123,"user_id":5888946,"accept_rate":58,"display_name":"Tony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698397727,"creation_date":1698331806,"question_id":77368066,"body_markdown":" am using javascriptexecutor with Selenium (IEdriver used on Edge (IE compatibility)).\r\nThere is a input with w BROWSE button that brings up a Windows file search.  (See picture).  Selenium can&#39;t handle Windows file browser.\r\n\r\nThe HTML looks like this\r\n\r\n    &lt;span class=&quot;options&quot;&gt;\r\n        &lt;input id=&quot;importSource&quot; title=&quot;Source&quot; size=&quot;50&quot; type=&quot;file&quot; \r\n         name=&quot;importSource&quot; requiredfield=&quot;1&quot;&gt;\r\n    &lt;/span&gt;\r\n\r\nDoing a sendKeys(file) to the element will bring up the file browser.\r\nI wanted to use JavascriptExecutor, so I did\r\n\r\n    [![enter image description here][1]][1]WebElement ele = driver.findElement(By.xpath(&quot;//input[@id=&#39;importSource&#39;]&quot;));\r\n    JavascriptExecutor jse = (JavascriptExecutor) driver;\r\n    String script = &quot;arguments[0].setAttribute(&#39;value&#39;, &#39;&quot; + fileName + &quot;&#39;);&quot;;\r\n    jse.executeScript(script, ele);\r\n\r\nfileName is the name of a file.  But when I look at the box it is empty and when I inspect\r\nele.getAttribute(&quot;value&quot;) it is blank.\r\n\r\nIf I manually click browse and select a file and do an inspect ele.getAttribute(&quot;value&quot;) it shows the filename.  So setting it should work but doesn&#39;t.\r\n\r\nis there some reason the Javascript is not working?  The value of ele is not null as I can get the attribute. (In the picture I removed any company-specific confidential info, but it is just text).\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/iCHcE.png","title":"Selenium Javascriptexecutor (edge/ie) not changing the value of an input field","body":"<p>am using javascriptexecutor with Selenium (IEdriver used on Edge (IE compatibility)).\nThere is a input with w BROWSE button that brings up a Windows file search.  (See picture).  Selenium can't handle Windows file browser.</p>\n<p>The HTML looks like this</p>\n<pre><code>&lt;span class=&quot;options&quot;&gt;\n    &lt;input id=&quot;importSource&quot; title=&quot;Source&quot; size=&quot;50&quot; type=&quot;file&quot; \n     name=&quot;importSource&quot; requiredfield=&quot;1&quot;&gt;\n&lt;/span&gt;\n</code></pre>\n<p>Doing a sendKeys(file) to the element will bring up the file browser.\nI wanted to use JavascriptExecutor, so I did</p>\n<pre><code>[![enter image description here][1]][1]WebElement ele = driver.findElement(By.xpath(&quot;//input[@id='importSource']&quot;));\nJavascriptExecutor jse = (JavascriptExecutor) driver;\nString script = &quot;arguments[0].setAttribute('value', '&quot; + fileName + &quot;');&quot;;\njse.executeScript(script, ele);\n</code></pre>\n<p>fileName is the name of a file.  But when I look at the box it is empty and when I inspect\nele.getAttribute(&quot;value&quot;) it is blank.</p>\n<p>If I manually click browse and select a file and do an inspect ele.getAttribute(&quot;value&quot;) it shows the filename.  So setting it should work but doesn't.</p>\n<p>is there some reason the Javascript is not working?  The value of ele is not null as I can get the attribute. (In the picture I removed any company-specific confidential info, but it is just text).</p>\n"},{"tags":["java","square"],"comments":[{"owner":{"account_id":21557482,"reputation":1,"user_id":15892485,"display_name":"Digital Ishant"},"score":0,"creation_date":1620707273,"post_id":67480479,"comment_id":119272938,"body_markdown":"For N = 4 in square pattern\n1357\n3571\n5713\n7135","body":"For N = 4 in square pattern 1357 3571 5713 7135"}],"answers":[{"tags":[],"owner":{"account_id":21493250,"reputation":69,"user_id":15838626,"display_name":"karanforprogram1"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1620707381,"creation_date":1620707381,"answer_id":67480587,"question_id":67480479,"body_markdown":"You should import scanner package. Type this in previous line before public static void\r\nimport java.util.Scanner;","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<p>You should import scanner package. Type this in previous line before public static void\nimport java.util.Scanner;</p>\n"},{"tags":[],"owner":{"account_id":18454137,"reputation":1,"user_id":13443403,"display_name":"Shubham Jadhav"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625537713,"creation_date":1625491327,"answer_id":68256911,"question_id":67480479,"body_markdown":"Try this code.\r\n\r\n```java\r\nimport java.util.Scanner;\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Scanner sc= new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        int i=1;\r\n\r\n        while(i&lt;=n) {\r\n            int j=n;\r\n            int odd= 2*i-1;\r\n            while(j&gt;=i) {\r\n                System.out.print(odd);\r\n                odd=odd+2;\r\n                j--;\r\n            }\r\n            if(j!=0) {\r\n                int p=1,temp=1;\r\n                while (temp&lt;i) {\r\n                    System.out.print(p);\r\n                    p=p+2;\r\n                    temp++;\r\n                }\r\n            }\r\n            System.out.println();\r\n            i++;\r\n        }\r\n    }\r\n}\r\n```","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<p>Try this code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner sc= new Scanner(System.in);\n        int n=sc.nextInt();\n        int i=1;\n\n        while(i&lt;=n) {\n            int j=n;\n            int odd= 2*i-1;\n            while(j&gt;=i) {\n                System.out.print(odd);\n                odd=odd+2;\n                j--;\n            }\n            if(j!=0) {\n                int p=1,temp=1;\n                while (temp&lt;i) {\n                    System.out.print(p);\n                    p=p+2;\n                    temp++;\n                }\n            }\n            System.out.println();\n            i++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23329266,"reputation":1,"user_id":17405921,"display_name":"PANKAJ KUMARGAUTAM"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636838465,"creation_date":1636836976,"answer_id":69958170,"question_id":67480479,"body_markdown":"```\r\nimport java.util.*;\r\n\r\npublic class Main {\r\n\tpublic static void main(String[] args) {\r\n\t\t// Write your code here\r\n         Scanner sc= new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        int i=1;\r\n\r\n        while(i&lt;=n) {\r\n            int j=n;\r\n            int odd= 2*i-1;\r\n            while(j&gt;=i){\r\n                System.out.print(odd);\r\n                odd=odd+2;\r\n                j--;\r\n            }\r\n            \r\n            int p=1;\r\n            int k =1;\r\n            while (k&lt;=i-1) {\r\n                System.out.print(p);\r\n                p=p+2;  \r\n                k++;\r\n            }\r\n            \r\n            System.out.println();\r\n            i++;\r\n        }\r\n\t}\r\n}\r\n```","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<pre><code>import java.util.*;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Write your code here\n         Scanner sc= new Scanner(System.in);\n        int n=sc.nextInt();\n        int i=1;\n\n        while(i&lt;=n) {\n            int j=n;\n            int odd= 2*i-1;\n            while(j&gt;=i){\n                System.out.print(odd);\n                odd=odd+2;\n                j--;\n            }\n            \n            int p=1;\n            int k =1;\n            while (k&lt;=i-1) {\n                System.out.print(p);\n                p=p+2;  \n                k++;\n            }\n            \n            System.out.println();\n            i++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21155515,"reputation":21,"user_id":15554875,"display_name":"Rohit Tingare"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636869444,"creation_date":1636869444,"answer_id":69960649,"question_id":67480479,"body_markdown":"for successfully getting output as\r\n    N=5 \r\noutput will be\r\n    \r\n    13579\r\n    35791\r\n    57913\r\n    79135\r\n    91357\r\nCode in Java:\r\n    \r\n    import java.util.Scanner;\r\n    public class Solution {\r\n    \r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int N = sc.nextInt();\r\n        int i = 1,j;\r\n        while(i&lt;=N){\r\n            int odd = 2*i-1;\r\n            j=N;\r\n            while(j&gt;=i){\r\n                System.out.print(odd);\r\n                odd = odd +2;\r\n                j--;\r\n            }\r\n            j = 1;\r\n            int  p =1;\r\n            while(j&lt;=i-1){\r\n                \r\n                System.out.print(p);\r\n                p= p+2;\r\n                j++;\r\n            }\r\n            System.out.println();\r\n            i++;\r\n        }\r\n    }\r\n}","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<p>for successfully getting output as\nN=5\noutput will be</p>\n<pre><code>13579\n35791\n57913\n79135\n91357\n</code></pre>\n<p>Code in Java:</p>\n<pre><code>import java.util.Scanner;\npublic class Solution {\n\npublic static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    int N = sc.nextInt();\n    int i = 1,j;\n    while(i&lt;=N){\n        int odd = 2*i-1;\n        j=N;\n        while(j&gt;=i){\n            System.out.print(odd);\n            odd = odd +2;\n            j--;\n        }\n        j = 1;\n        int  p =1;\n        while(j&lt;=i-1){\n            \n            System.out.print(p);\n            p= p+2;\n            j++;\n        }\n        System.out.println();\n        i++;\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":24692636,"reputation":1,"user_id":18584961,"display_name":"Anuj Narula"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653923762,"creation_date":1653923621,"answer_id":72436533,"question_id":67480479,"body_markdown":"````\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        \r\n         Scanner sc= new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        int i=1;\r\n\r\n        while(i&lt;=n) {\r\n            int j=1;\r\n            int num=2*i-1;\r\n            \r\n            while(j&lt;=n-i+1){\r\n                System.out.print(num);\r\n                num=num+2;\r\n                j++;\r\n            }\r\n            \r\n            j=1;\r\n            int k=1;\r\n            while(j&lt;=i-1){\r\n                System.out.print(k);\r\n                k=k+2;\r\n                j++;\r\n            }\r\n            \r\n            \r\n            System.out.println();\r\n            i++;\r\n        }\r\n    }\r\n}\r\n````","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        \n         Scanner sc= new Scanner(System.in);\n        int n=sc.nextInt();\n        int i=1;\n\n        while(i&lt;=n) {\n            int j=1;\n            int num=2*i-1;\n            \n            while(j&lt;=n-i+1){\n                System.out.print(num);\n                num=num+2;\n                j++;\n            }\n            \n            j=1;\n            int k=1;\n            while(j&lt;=i-1){\n                System.out.print(k);\n                k=k+2;\n                j++;\n            }\n            \n            \n            System.out.println();\n            i++;\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25517357,"reputation":1,"user_id":19307980,"display_name":"Aurgha Kamol Biswas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1654787301,"creation_date":1654787301,"answer_id":72562693,"question_id":67480479,"body_markdown":"    import java.util.Scanner;\r\n    public class TestingoddSquare {\r\n    \tpublic static void main(String[] args) {\r\n    \t        Scanner sc= new Scanner(System.in);\r\n    \t        int n=sc.nextInt();\r\n    \t        if(n&gt;=0 &amp;&amp; n&lt;=50) {\r\n    \t        int i=1;\r\n    \t        while(i&lt;=n) {\r\n    \t            int j=n;\r\n    \t            int odd= 2*i-1;\r\n    \t            while(j&gt;=i){\r\n    \t                System.out.print(odd);\r\n    \t                odd=odd+2;\r\n    \t                j--;\r\n    \t            }\r\n    \t            \r\n    \t            int p=1;\r\n    \t            int k=1;\r\n    \t            while (p&lt;=i-1) {\r\n    \t                System.out.print(k);\r\n    \t                k=k+2; \r\n    \t                p=p+1;\r\n    \t            }\r\n    \t            \r\n    \t            System.out.println();\r\n    \t            i++;\r\n    \t                    \r\n    \t        }\r\n    \t        }\r\n    \t}\r\n    }\r\n\r\n","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<pre><code>import java.util.Scanner;\npublic class TestingoddSquare {\n    public static void main(String[] args) {\n            Scanner sc= new Scanner(System.in);\n            int n=sc.nextInt();\n            if(n&gt;=0 &amp;&amp; n&lt;=50) {\n            int i=1;\n            while(i&lt;=n) {\n                int j=n;\n                int odd= 2*i-1;\n                while(j&gt;=i){\n                    System.out.print(odd);\n                    odd=odd+2;\n                    j--;\n                }\n                \n                int p=1;\n                int k=1;\n                while (p&lt;=i-1) {\n                    System.out.print(k);\n                    k=k+2; \n                    p=p+1;\n                }\n                \n                System.out.println();\n                i++;\n                        \n            }\n            }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16863614,"reputation":1,"user_id":12193840,"display_name":"Subham Bhadani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1659273706,"creation_date":1658990760,"answer_id":73148359,"question_id":67480479,"body_markdown":"```java\r\nimport java.util.Scanner;\r\n\r\npublic class Solution {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tScanner s=new Scanner(System.in);\r\n\t\tint n=s.nextInt();\r\n\t\tfor(int i=1;i&lt;=n;i++) {\r\n\t\t\tint odd=2*i-1;\r\n\t\t\tfor(int j=n;j&gt;=i;j--) {\r\n\t\t\t\tSystem.out.print(odd);\r\n\t\t\t\todd=odd+2;\r\n\t\t\t}\r\n\t\t\tint p=1;\r\n\t\t\tfor(int j=1;j&lt;=i-1;j++) {\r\n\t\t\t\tSystem.out.print(p);\r\n\t\t\t\tp=p+2;\r\n\t\t\t}\r\n\t\t\tSystem.out.println();\r\n\t\t}\r\n\t}\r\n\r\n}\r\n```","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class Solution {\n\n    public static void main(String[] args) {\n        Scanner s=new Scanner(System.in);\n        int n=s.nextInt();\n        for(int i=1;i&lt;=n;i++) {\n            int odd=2*i-1;\n            for(int j=n;j&gt;=i;j--) {\n                System.out.print(odd);\n                odd=odd+2;\n            }\n            int p=1;\n            for(int j=1;j&lt;=i-1;j++) {\n                System.out.print(p);\n                p=p+2;\n            }\n            System.out.println();\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":26839387,"reputation":1,"user_id":20426144,"display_name":"ErSnDubey"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1667905817,"creation_date":1667658646,"answer_id":74328587,"question_id":67480479,"body_markdown":"```\r\nimport java.util.Scanner;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        \r\n         Scanner sc= new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        int i=1\r\n\t\r\n\twhile (i&lt;=n) {\r\n\t\tint j = n;\r\n\t\tint p = 2*i-1;\r\n\t\twhile(j&gt;=0){\r\n\t\t\tSystem.out.print(p);\r\n\t\t\tp=p+2;\r\n\t\t\tif(p&gt;(2*n)-1) {\r\n\t\t\t\tp=1;\r\n\t\t\t}\r\n\t\t\tj--;\r\n\t\t\t}\r\n\tSystem.out.println();\r\n\ti++;\r\n\t}\r\n\t}\t\r\n\t\r\n}\r\n```","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<pre><code>import java.util.Scanner;\n\npublic class Main {\n    public static void main(String[] args) {\n        \n         Scanner sc= new Scanner(System.in);\n        int n=sc.nextInt();\n        int i=1\n    \n    while (i&lt;=n) {\n        int j = n;\n        int p = 2*i-1;\n        while(j&gt;=0){\n            System.out.print(p);\n            p=p+2;\n            if(p&gt;(2*n)-1) {\n                p=1;\n            }\n            j--;\n            }\n    System.out.println();\n    i++;\n    }\n    }   \n    \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27424096,"reputation":1,"user_id":20921939,"display_name":"Satyam Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1672772022,"creation_date":1672772022,"answer_id":74997563,"question_id":67480479,"body_markdown":"import java.util.*;\r\npublic class Patterrn {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc=new Scanner(System.in);\r\n        int n=sc.nextInt();\r\n        int i=1;\r\n        while(i&lt;=n)\r\n        {\r\n            int x=2*i-1;\r\n            int j=1;\r\n            while(j&lt;=n)\r\n            {\r\n                if(x&lt;=7)\r\n                {\r\n                    System.out.print(x);\r\n                    x=x+2;\r\n                }\r\n                else\r\n                {\r\n                    x=1;\r\n                    System.out.print(x);\r\n                    x=x+2;\r\n                }\r\n                j++;\r\n            }\r\n            System.out.println(&quot;&quot;);\r\n            i++;\r\n            x=x+2;\r\n        }\r\n    }\r\n}\r\n","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<p>import java.util.*;\npublic class Patterrn {</p>\n<pre><code>public static void main(String[] args) {\n    Scanner sc=new Scanner(System.in);\n    int n=sc.nextInt();\n    int i=1;\n    while(i&lt;=n)\n    {\n        int x=2*i-1;\n        int j=1;\n        while(j&lt;=n)\n        {\n            if(x&lt;=7)\n            {\n                System.out.print(x);\n                x=x+2;\n            }\n            else\n            {\n                x=1;\n                System.out.print(x);\n                x=x+2;\n            }\n            j++;\n        }\n        System.out.println(&quot;&quot;);\n        i++;\n        x=x+2;\n    }\n}\n</code></pre>\n<p>}</p>\n"},{"tags":[],"owner":{"account_id":29765998,"reputation":1,"user_id":22812340,"display_name":"Prem Kumar"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698397705,"creation_date":1698397705,"answer_id":77372871,"question_id":67480479,"body_markdown":"Write a program that takes an integer n as input and generates a square pattern of n x n size.\r\n\r\nInput Format\r\nThe input consists of a single integer n, where 1 &lt;= n &lt;= 100.\r\n\r\nOutput Format\r\nThe output is a square pattern of size n x n, where each row consists of n asterisks (*).\r\n\r\nSample Inputs &amp; Outputs\r\nSample Input 1\r\n5\r\nSample Output 1\r\n*****\r\n*****\r\n*****\r\n*****\r\n*****\r\nConstraints\r\n1 &lt;= n &lt;= 100\r\n","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<p>Write a program that takes an integer n as input and generates a square pattern of n x n size.</p>\n<p>Input Format\nThe input consists of a single integer n, where 1 &lt;= n &lt;= 100.</p>\n<p>Output Format\nThe output is a square pattern of size n x n, where each row consists of n asterisks (*).</p>\n<p>Sample Inputs &amp; Outputs\nSample Input 1\n5\nSample Output 1</p>\n<hr />\n<hr />\n<hr />\n<hr />\n<hr />\n<p>Constraints\n1 &lt;= n &lt;= 100</p>\n"}],"owner":{"account_id":21557482,"reputation":1,"user_id":15892485,"display_name":"Digital Ishant"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9383,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":10,"score":0,"last_activity_date":1698397705,"creation_date":1620706534,"question_id":67480479,"body_markdown":"I have tried as per below code but not able to get the desired output\r\n\r\n\r\n    package patterns;\r\n    import java.util.Scanner;\r\n    public class OddSquarePattern {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tScanner sc= new Scanner(System.in);\r\n    \t\tint n=sc.nextInt();\r\n    \t\tint i=1;\r\n    \r\n    \t\twhile(i&lt;=n) {\r\n    \t\t\tint j=n;\r\n    \t\t\tint odd= 2*i-1;\r\n    \t\t\twhile(j&gt;=i){\r\n    \t\t\t\tSystem.out.print(odd);\r\n    \t\t\t\todd=odd+2;\r\n    \t\t\t\tj--;\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tint p=1;\r\n    \t\t\twhile (p&lt;=i-1) {\r\n    \t\t\t\tSystem.out.print(p);\r\n    \t\t\t\tp=p+2;\t\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\tSystem.out.println();\r\n    \t\t\ti++;\r\n    \t\t\t\t\t\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n\r\n    ","title":"program to print the square pattern for the given N number of rows (numbers to be odd numbers)","body":"<p>I have tried as per below code but not able to get the desired output</p>\n<pre><code>package patterns;\nimport java.util.Scanner;\npublic class OddSquarePattern {\n\n    public static void main(String[] args) {\n        Scanner sc= new Scanner(System.in);\n        int n=sc.nextInt();\n        int i=1;\n\n        while(i&lt;=n) {\n            int j=n;\n            int odd= 2*i-1;\n            while(j&gt;=i){\n                System.out.print(odd);\n                odd=odd+2;\n                j--;\n            }\n            \n            int p=1;\n            while (p&lt;=i-1) {\n                System.out.print(p);\n                p=p+2;  \n            }\n            \n            System.out.println();\n            i++;\n                    \n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-security"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1580217030,"post_id":36427923,"comment_id":106018731,"body_markdown":"Don&#39;t check permissions in the successhandler. Instead write a security expression which validates if the user can access the project. Your userservice shouldn&#39;t depend on a request/session variable. It should only obtain the user with its rights. You should wrote a security expression limiting him to access things he isn&#39;t allowed to. You are basically working around Spring Securiyt instead of working with it.","body":"Don&#39;t check permissions in the successhandler. Instead write a security expression which validates if the user can access the project. Your userservice shouldn&#39;t depend on a request/session variable. It should only obtain the user with its rights. You should wrote a security expression limiting him to access things he isn&#39;t allowed to. You are basically working around Spring Securiyt instead of working with it."}],"answers":[{"tags":[],"owner":{"account_id":4477370,"reputation":436,"user_id":3642148,"accept_rate":100,"display_name":"niilzon"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1459882957,"creation_date":1459864434,"answer_id":36428403,"question_id":36427923,"body_markdown":"Not sure if this is what you are looking for, but you can inject the `HttpServletResponse` in the login POST method of your Controller. \r\n\r\nTherefore, if your service notifies you that authorization is not OK, you can for example do \r\n\r\nresponse.setStatus(403);\r\n\r\n \r\n\r\n    @RequestMapping(value = &quot;/login&quot;, method = RequestMethod.POST)\r\n    public ModelAndView loginAction(@RequestParam String login, @RequestParam String pw, HttpServletResponse response) {\r\n       doStuff(login,pw);\r\n       if(service.isNotHappy(login,pw)){\r\n          response.setStatus(403);\r\n       }else{\r\n          // happy flow\r\n       }\r\n       ...\r\n    }\r\n\r\n**// UPDATE :** \r\n\r\nsince the \r\n\r\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException \r\n\r\nmethod is the implementation of the `org.springframework.security.core.userdetails.UserDetailsService` interface, indeed you can&#39;t inject the `HttpServletResponse` like you would in a `@RequestMapping` annotated controller. \r\n\r\n\r\nHowever, here is another (hopefully correct!) solution : \r\n\r\n1) In the implementation of the `loadUserByUsername(String x)` method, if the user does not have the access rights, throw a `CustomYourException`\r\n\r\n2) Create a new `ExceptionHandlingController` class annotated with `@ControllerAdvice` at `class level` (and make sure it gets scanned like your controllers) that contains a method like this : \r\n\r\n    \r\n    @ControllerAdvice\r\n    public class ExceptionHandlingController {\r\n\r\n       @ExceptionHandler({CustomYourException.class})\r\n       public ModelAndView handleCustomExceptionError(HttpServletRequest request, HttpServletResponse response, CustomYourException cyee) {\r\n           // this method will be triggered upon CustomYourException only\r\n           // you can manipulate the response code here, \r\n           // return a custom view, use a special logger\r\n           // or do whatever else you want here :)\r\n       }\r\n    }\r\n\r\nAs you can see, this handler will be called based on what specific exceptions you define in the `@ExceptionHandler` annotation - very useful ! \r\nFrom there, you can manipulate the HttpServletResponse and set the response code you want, and/or send the user to a specific view.\r\n\r\nHope this solves your issue :)","title":"How to return HTTP 403 after successful authentication, but unsuccessful authorization?","body":"<p>Not sure if this is what you are looking for, but you can inject the <code>HttpServletResponse</code> in the login POST method of your Controller. </p>\n\n<p>Therefore, if your service notifies you that authorization is not OK, you can for example do </p>\n\n<p>response.setStatus(403);</p>\n\n<pre><code>@RequestMapping(value = \"/login\", method = RequestMethod.POST)\npublic ModelAndView loginAction(@RequestParam String login, @RequestParam String pw, HttpServletResponse response) {\n   doStuff(login,pw);\n   if(service.isNotHappy(login,pw)){\n      response.setStatus(403);\n   }else{\n      // happy flow\n   }\n   ...\n}\n</code></pre>\n\n<p><strong>// UPDATE :</strong> </p>\n\n<p>since the </p>\n\n<pre><code>public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException \n</code></pre>\n\n<p>method is the implementation of the <code>org.springframework.security.core.userdetails.UserDetailsService</code> interface, indeed you can't inject the <code>HttpServletResponse</code> like you would in a <code>@RequestMapping</code> annotated controller. </p>\n\n<p>However, here is another (hopefully correct!) solution : </p>\n\n<p>1) In the implementation of the <code>loadUserByUsername(String x)</code> method, if the user does not have the access rights, throw a <code>CustomYourException</code></p>\n\n<p>2) Create a new <code>ExceptionHandlingController</code> class annotated with <code>@ControllerAdvice</code> at <code>class level</code> (and make sure it gets scanned like your controllers) that contains a method like this : </p>\n\n<pre><code>@ControllerAdvice\npublic class ExceptionHandlingController {\n\n   @ExceptionHandler({CustomYourException.class})\n   public ModelAndView handleCustomExceptionError(HttpServletRequest request, HttpServletResponse response, CustomYourException cyee) {\n       // this method will be triggered upon CustomYourException only\n       // you can manipulate the response code here, \n       // return a custom view, use a special logger\n       // or do whatever else you want here :)\n   }\n}\n</code></pre>\n\n<p>As you can see, this handler will be called based on what specific exceptions you define in the <code>@ExceptionHandler</code> annotation - very useful ! \nFrom there, you can manipulate the HttpServletResponse and set the response code you want, and/or send the user to a specific view.</p>\n\n<p>Hope this solves your issue :)</p>\n"},{"tags":[],"owner":{"account_id":12621112,"reputation":176,"user_id":9176568,"display_name":"Oktfolio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643122322,"creation_date":1643122322,"answer_id":70850769,"question_id":36427923,"body_markdown":"maybe you are supposed to *return;* after *response.sendError()*","title":"How to return HTTP 403 after successful authentication, but unsuccessful authorization?","body":"<p>maybe you are supposed to <em>return;</em> after <em>response.sendError()</em></p>\n"}],"owner":{"account_id":429505,"reputation":1098,"user_id":812439,"accept_rate":81,"display_name":"Tural"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11283,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1698397465,"creation_date":1459863254,"question_id":36427923,"body_markdown":"I have a Spring Boot application which also uses Spring Security. I want to check if user has access to login to the application, but it must be after authentication. The point is that, at login, the user selects the project to which they must connect. A user can be allowed to connect to one project, but can not be allowed to connect to another project. However, if user enters invalid credentials, message about invalid credentials must be shown first even if user has no right to login to the selected project. For this reason, checking for the rights to the project must be after authentication.\r\n\r\nThis my SecurityConfig class:\r\n\r\n    package org.aze.accountingprogram.config;\r\n\r\n    import org.aze.accountingprogram.models.CurrentUser;\r\n    import org.aze.accountingprogram.models.PermissionAliasConstants;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.context.annotation.Configuration;\r\n    import org.springframework.http.HttpStatus;\r\n    import org.springframework.security.access.AccessDeniedException;\r\n    import org.springframework.security.authentication.encoding.Md5PasswordEncoder;\r\n    import org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\r\n    import org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\r\n    import org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\n    import org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\r\n    import org.springframework.security.core.Authentication;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.web.access.AccessDeniedHandler;\r\n    import org.springframework.security.web.authentication.AuthenticationSuccessHandler;\r\n    \r\n    import javax.servlet.ServletException;\r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    import java.io.IOException;\r\n    \r\n    @Configuration\r\n    @EnableWebSecurity\r\n    @EnableGlobalMethodSecurity(prePostEnabled = true)\r\n    public class SecurityConfig extends WebSecurityConfigurerAdapter {\r\n    \r\n        private static final Logger logger = LoggerFactory.getLogger(SecurityConfig.class);\r\n    \r\n        @Autowired\r\n        private UserDetailsService userDetailsService;\r\n    \r\n        @Override\r\n        protected void configure(HttpSecurity http) throws Exception {\r\n            http\r\n                    .authorizeRequests().antMatchers(&quot;/lib/**&quot;).permitAll().anyRequest().fullyAuthenticated()\r\n                    .and()\r\n                    .formLogin().successHandler(successHandler()).loginPage(&quot;/login&quot;).permitAll()\r\n                    .and().exceptionHandling().accessDeniedHandler(accessDeniedHandler())\r\n                    .and()\r\n                    .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/login&quot;).permitAll();\r\n    \r\n            http.csrf().disable();\r\n        }\r\n    \r\n        @Override\r\n        protected void configure(AuthenticationManagerBuilder auth) throws Exception {\r\n            auth.userDetailsService(userDetailsService).passwordEncoder(new Md5PasswordEncoder());\r\n        }\r\n    \r\n        private AccessDeniedHandler accessDeniedHandler() {\r\n            return (request, response, e) -&gt; {\r\n                logger.debug(&quot;Returning HTTP 403 FORBIDDEN with message: \\&quot;{}\\&quot;&quot;, e.getMessage());\r\n                response.sendError(HttpStatus.FORBIDDEN.value(), e.getMessage());\r\n            };\r\n        }\r\n    \r\n        private AuthenticationSuccessHandler successHandler() {\r\n            return new AuthenticationSuccessHandler() {\r\n                @Override\r\n                public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {\r\n                    CurrentUser user = (CurrentUser) authentication.getPrincipal();\r\n                    if (!user.hasAccessRight(PermissionAliasConstants.LOGIN)) {\r\n                        throw new AccessDeniedException(String.format(&quot;User \\&quot;%s\\&quot; is not authorized to login \\&quot;%s\\&quot; project&quot;, user.getUsername(), user.getProject().getName()));\r\n                    }\r\n                }\r\n            };\r\n        }\r\n    \r\n    }\r\n\r\nimplementation of UserDetailsService:\r\n\r\n    package org.aze.accountingprogram.serviceimpl;\r\n\r\n    import org.aze.accountingprogram.common.Constants;\r\n    import org.aze.accountingprogram.exceptions.DataNotFoundException;\r\n    import org.aze.accountingprogram.models.AccessRightsPermission;\r\n    import org.aze.accountingprogram.models.CurrentUser;\r\n    import org.aze.accountingprogram.models.Project;\r\n    import org.aze.accountingprogram.models.User;\r\n    import org.aze.accountingprogram.service.AccessRightsService;\r\n    import org.aze.accountingprogram.service.ProjectService;\r\n    import org.aze.accountingprogram.service.UserService;\r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.security.core.GrantedAuthority;\r\n    import org.springframework.security.core.authority.SimpleGrantedAuthority;\r\n    import org.springframework.security.core.userdetails.UserDetails;\r\n    import org.springframework.security.core.userdetails.UserDetailsService;\r\n    import org.springframework.security.core.userdetails.UsernameNotFoundException;\r\n    import org.springframework.stereotype.Service;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import java.util.HashSet;\r\n    import java.util.List;\r\n    import java.util.Set;\r\n    import java.util.stream.Collectors;\r\n    \r\n    @Service\r\n    public class UserDetailsServiceImpl implements UserDetailsService {\r\n    \r\n        @Autowired\r\n        private UserService userService;\r\n    \r\n        @Autowired\r\n        private ProjectService projectService;\r\n    \r\n        @Autowired\r\n        private AccessRightsService accessRightsService;\r\n        \r\n        @Autowired\r\n        private HttpServletRequest request;\r\n    \r\n        private static final Logger logger = LoggerFactory.getLogger(UserDetailsServiceImpl.class);\r\n    \r\n        @Override\r\n        public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\r\n            User user;\r\n            Project project;\r\n            final String projectId = request.getParameter(Constants.SESSION_PROJECT_ID);\r\n            logger.debug(&quot;Username: {}, projectId: {}&quot;, username, projectId);\r\n    \r\n            try {\r\n                user = userService.getUserByUsername(username);\r\n            } catch (DataNotFoundException e) {\r\n                throw new UsernameNotFoundException(e.getMessage(), e);\r\n            }\r\n    \r\n            // Value of projectId is from combo box which is filled from table of projects\r\n            // That is why there is no probability that the project will not be found\r\n            project = projectService.getProjectById(Integer.valueOf(projectId));\r\n    \r\n            // User can have different rights for different projects\r\n            List&lt;AccessRightsPermission&gt; accessRights = accessRightsService.getAccessRightsByProject(user.getId(), project.getId());\r\n            Set&lt;GrantedAuthority&gt; authorities = new HashSet&lt;&gt;(accessRights.size());\r\n            authorities.addAll(accessRights.stream().map(right -&gt; new SimpleGrantedAuthority(right.getAlias())).collect(Collectors.toList()));\r\n    \r\n            final CurrentUser currentUser = new CurrentUser(user, project, authorities);\r\n    \r\n            // If to check LOGIN access right to project here, and user entered right credentials\r\n            // then user will see message about invalid credentials.\r\n            // .and().exceptionHandling().accessDeniedHandler(accessDeniedHandler()) at SecurityConfig is not working in this case\r\n    //        if (!currentUser.hasAccessRight(PermissionAliasConstants.LOGIN)) {\r\n    //            throw new AccessDeniedException(String.format(&quot;User \\&quot;%s\\&quot; is not authorized to login \\&quot;%s\\&quot; project&quot;, user.getUsername(), project.getName()));\r\n    //        }\r\n    \r\n            logger.info(&quot;Logged in user: {}&quot;, currentUser);\r\n            return currentUser;\r\n        }\r\n    }\r\n\r\nand LoginController\r\n\r\n    package org.aze.accountingprogram.controllers;\r\n\r\n    import org.springframework.stereotype.Controller;\r\n    import org.springframework.web.bind.annotation.RequestMapping;\r\n    import org.springframework.web.bind.annotation.RequestMethod;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.servlet.ModelAndView;\r\n    \r\n    import java.util.Optional;\r\n    \r\n    @Controller\r\n    public class LoginController {\r\n    \r\n        @RequestMapping(value = &quot;/login&quot;, method = RequestMethod.GET)\r\n        public ModelAndView getLoginPage(@RequestParam Optional&lt;String&gt; error) {\r\n            return new ModelAndView(&quot;login&quot;, &quot;error&quot;, error);\r\n        }\r\n    \r\n    }\r\n\r\n`successHandler()` works and application throws `AccessDeniedException` if user has not access right to login to the project. But `accessDeniedHandler()` doesn&#39;t work and doesn&#39;t send HTTP 403. Instead I receive HTTP 500.\r\n\r\nHow to return response with HTTP 403 and message of exception (e.g. &quot;User &quot;tural&quot; is not authorized to login &quot;AZB&quot; project&quot;) and to handle it in `LoginController` (using `@ResponseStatus(HttpStatus.FORBIDDEN)` or `@ExceptionHandler`)?","title":"How to return HTTP 403 after successful authentication, but unsuccessful authorization?","body":"<p>I have a Spring Boot application which also uses Spring Security. I want to check if user has access to login to the application, but it must be after authentication. The point is that, at login, the user selects the project to which they must connect. A user can be allowed to connect to one project, but can not be allowed to connect to another project. However, if user enters invalid credentials, message about invalid credentials must be shown first even if user has no right to login to the selected project. For this reason, checking for the rights to the project must be after authentication.</p>\n<p>This my SecurityConfig class:</p>\n<pre><code>package org.aze.accountingprogram.config;\n\nimport org.aze.accountingprogram.models.CurrentUser;\nimport org.aze.accountingprogram.models.PermissionAliasConstants;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.security.access.AccessDeniedException;\nimport org.springframework.security.authentication.encoding.Md5PasswordEncoder;\nimport org.springframework.security.config.annotation.authentication.builders.AuthenticationManagerBuilder;\nimport org.springframework.security.config.annotation.method.configuration.EnableGlobalMethodSecurity;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.config.annotation.web.configuration.WebSecurityConfigurerAdapter;\nimport org.springframework.security.core.Authentication;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.web.access.AccessDeniedHandler;\nimport org.springframework.security.web.authentication.AuthenticationSuccessHandler;\n\nimport javax.servlet.ServletException;\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\nimport java.io.IOException;\n\n@Configuration\n@EnableWebSecurity\n@EnableGlobalMethodSecurity(prePostEnabled = true)\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    private static final Logger logger = LoggerFactory.getLogger(SecurityConfig.class);\n\n    @Autowired\n    private UserDetailsService userDetailsService;\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n                .authorizeRequests().antMatchers(&quot;/lib/**&quot;).permitAll().anyRequest().fullyAuthenticated()\n                .and()\n                .formLogin().successHandler(successHandler()).loginPage(&quot;/login&quot;).permitAll()\n                .and().exceptionHandling().accessDeniedHandler(accessDeniedHandler())\n                .and()\n                .logout().logoutUrl(&quot;/logout&quot;).logoutSuccessUrl(&quot;/login&quot;).permitAll();\n\n        http.csrf().disable();\n    }\n\n    @Override\n    protected void configure(AuthenticationManagerBuilder auth) throws Exception {\n        auth.userDetailsService(userDetailsService).passwordEncoder(new Md5PasswordEncoder());\n    }\n\n    private AccessDeniedHandler accessDeniedHandler() {\n        return (request, response, e) -&gt; {\n            logger.debug(&quot;Returning HTTP 403 FORBIDDEN with message: \\&quot;{}\\&quot;&quot;, e.getMessage());\n            response.sendError(HttpStatus.FORBIDDEN.value(), e.getMessage());\n        };\n    }\n\n    private AuthenticationSuccessHandler successHandler() {\n        return new AuthenticationSuccessHandler() {\n            @Override\n            public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws IOException, ServletException {\n                CurrentUser user = (CurrentUser) authentication.getPrincipal();\n                if (!user.hasAccessRight(PermissionAliasConstants.LOGIN)) {\n                    throw new AccessDeniedException(String.format(&quot;User \\&quot;%s\\&quot; is not authorized to login \\&quot;%s\\&quot; project&quot;, user.getUsername(), user.getProject().getName()));\n                }\n            }\n        };\n    }\n\n}\n</code></pre>\n<p>implementation of UserDetailsService:</p>\n<pre><code>package org.aze.accountingprogram.serviceimpl;\n\nimport org.aze.accountingprogram.common.Constants;\nimport org.aze.accountingprogram.exceptions.DataNotFoundException;\nimport org.aze.accountingprogram.models.AccessRightsPermission;\nimport org.aze.accountingprogram.models.CurrentUser;\nimport org.aze.accountingprogram.models.Project;\nimport org.aze.accountingprogram.models.User;\nimport org.aze.accountingprogram.service.AccessRightsService;\nimport org.aze.accountingprogram.service.ProjectService;\nimport org.aze.accountingprogram.service.UserService;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UserDetailsService;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\n\nimport javax.servlet.http.HttpServletRequest;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Set;\nimport java.util.stream.Collectors;\n\n@Service\npublic class UserDetailsServiceImpl implements UserDetailsService {\n\n    @Autowired\n    private UserService userService;\n\n    @Autowired\n    private ProjectService projectService;\n\n    @Autowired\n    private AccessRightsService accessRightsService;\n    \n    @Autowired\n    private HttpServletRequest request;\n\n    private static final Logger logger = LoggerFactory.getLogger(UserDetailsServiceImpl.class);\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        User user;\n        Project project;\n        final String projectId = request.getParameter(Constants.SESSION_PROJECT_ID);\n        logger.debug(&quot;Username: {}, projectId: {}&quot;, username, projectId);\n\n        try {\n            user = userService.getUserByUsername(username);\n        } catch (DataNotFoundException e) {\n            throw new UsernameNotFoundException(e.getMessage(), e);\n        }\n\n        // Value of projectId is from combo box which is filled from table of projects\n        // That is why there is no probability that the project will not be found\n        project = projectService.getProjectById(Integer.valueOf(projectId));\n\n        // User can have different rights for different projects\n        List&lt;AccessRightsPermission&gt; accessRights = accessRightsService.getAccessRightsByProject(user.getId(), project.getId());\n        Set&lt;GrantedAuthority&gt; authorities = new HashSet&lt;&gt;(accessRights.size());\n        authorities.addAll(accessRights.stream().map(right -&gt; new SimpleGrantedAuthority(right.getAlias())).collect(Collectors.toList()));\n\n        final CurrentUser currentUser = new CurrentUser(user, project, authorities);\n\n        // If to check LOGIN access right to project here, and user entered right credentials\n        // then user will see message about invalid credentials.\n        // .and().exceptionHandling().accessDeniedHandler(accessDeniedHandler()) at SecurityConfig is not working in this case\n//        if (!currentUser.hasAccessRight(PermissionAliasConstants.LOGIN)) {\n//            throw new AccessDeniedException(String.format(&quot;User \\&quot;%s\\&quot; is not authorized to login \\&quot;%s\\&quot; project&quot;, user.getUsername(), project.getName()));\n//        }\n\n        logger.info(&quot;Logged in user: {}&quot;, currentUser);\n        return currentUser;\n    }\n}\n</code></pre>\n<p>and LoginController</p>\n<pre><code>package org.aze.accountingprogram.controllers;\n\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RequestMethod;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.servlet.ModelAndView;\n\nimport java.util.Optional;\n\n@Controller\npublic class LoginController {\n\n    @RequestMapping(value = &quot;/login&quot;, method = RequestMethod.GET)\n    public ModelAndView getLoginPage(@RequestParam Optional&lt;String&gt; error) {\n        return new ModelAndView(&quot;login&quot;, &quot;error&quot;, error);\n    }\n\n}\n</code></pre>\n<p><code>successHandler()</code> works and application throws <code>AccessDeniedException</code> if user has not access right to login to the project. But <code>accessDeniedHandler()</code> doesn't work and doesn't send HTTP 403. Instead I receive HTTP 500.</p>\n<p>How to return response with HTTP 403 and message of exception (e.g. &quot;User &quot;tural&quot; is not authorized to login &quot;AZB&quot; project&quot;) and to handle it in <code>LoginController</code> (using <code>@ResponseStatus(HttpStatus.FORBIDDEN)</code> or <code>@ExceptionHandler</code>)?</p>\n"},{"tags":["java","algorithm","zip","detection"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1698325312,"post_id":77367199,"comment_id":136392993,"body_markdown":"That isn’t language identification, it’s compression size comparison. You may know the language as a side effect. Do you actually want language identification (seems tangential) or are you asking how to compare file sizes?","body":"That isn’t language identification, it’s compression size comparison. You may know the language as a side effect. Do you actually want language identification (seems tangential) or are you asking how to compare file sizes?"},{"owner":{"account_id":7359583,"reputation":11343,"user_id":5603247,"display_name":"Hans Olsson"},"score":0,"creation_date":1698391360,"post_id":77367199,"comment_id":136401906,"body_markdown":"Wikipedia ( https://en.wikipedia.org/wiki/Language_identification ) has comparing compression sizes as a method for identifying language; looking more it is possible that it is a suboptimal method and no-one has dared to remove it from that article","body":"Wikipedia ( <a href=\"https://en.wikipedia.org/wiki/Language_identification\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Language_identification</a> ) has comparing compression sizes as a method for identifying language; looking more it is possible that it is a suboptimal method and no-one has dared to remove it from that article"}],"answers":[{"tags":[],"owner":{"account_id":2968584,"reputation":50561,"user_id":2521214,"accept_rate":71,"display_name":"Spektre"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698397353,"creation_date":1698396924,"answer_id":77372766,"question_id":77367199,"body_markdown":"what you proposing is unreliable as compression scheme must stay the same which is not guarantied (you might update zip utility at any time which might break your algo) And I think this will work only for Huffman encoding based (or similar letter probability based) encoding so ZIP is not good match as that one uses Lharc which uses combinations of letters.\r\n\r\nSimple Language identification is usually done by comparing character histograms...\r\n\r\nEach language &quot;beletry&quot; texts has they own probability distribution of ocurrence of each characters so you take long enough input text (does not need to be the same text per language) and compute probability of occurrence of each character in alphabet and use this data as referrence for each language.\r\n\r\nThen for unknown text compute the same and just compute distance between it and your known languages which ever is closest is your language...\r\n\r\nnote that technical literature might have different probabilities in comparison to beletry or poetry or whatever else ... So its best to compute reference probabilities from the same type of literature.\r\n\r\nThis is usually used in cryptho-graphy to break substitution based ciphers quickly (based on probability of letters you have much less possible combinations of substitutions so the brute force `O(26^26)` will be eased up (the 26 exponent) will be usually (wildly guessed) `~3..10` based on language.\r\n\r\nThere might be more languages with similar distance in such cases you can add dictionary comparison (have few very common words and search for them like `a,an,the,and` in english to distinguish such languages)","title":"Creating an algorithm for language identification","body":"<p>what you proposing is unreliable as compression scheme must stay the same which is not guarantied (you might update zip utility at any time which might break your algo) And I think this will work only for Huffman encoding based (or similar letter probability based) encoding so ZIP is not good match as that one uses Lharc which uses combinations of letters.</p>\n<p>Simple Language identification is usually done by comparing character histograms...</p>\n<p>Each language &quot;beletry&quot; texts has they own probability distribution of ocurrence of each characters so you take long enough input text (does not need to be the same text per language) and compute probability of occurrence of each character in alphabet and use this data as referrence for each language.</p>\n<p>Then for unknown text compute the same and just compute distance between it and your known languages which ever is closest is your language...</p>\n<p>note that technical literature might have different probabilities in comparison to beletry or poetry or whatever else ... So its best to compute reference probabilities from the same type of literature.</p>\n<p>This is usually used in cryptho-graphy to break substitution based ciphers quickly (based on probability of letters you have much less possible combinations of substitutions so the brute force <code>O(26^26)</code> will be eased up (the 26 exponent) will be usually (wildly guessed) <code>~3..10</code> based on language.</p>\n<p>There might be more languages with similar distance in such cases you can add dictionary comparison (have few very common words and search for them like <code>a,an,the,and</code> in english to distinguish such languages)</p>\n"}],"owner":{"account_id":29759597,"reputation":1,"user_id":22807517,"display_name":"Кызжибек Орозбекова"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698397353,"creation_date":1698324884,"question_id":77367199,"body_markdown":"Who knows similar algorithms for finding a language whose logic is similar to this one?\r\nSprachidentifikation algorithm: The main idea of the algorithm is to compare the difference between the compression of the original text and the compression of the translation of the text into different languages. How are the steps of this algorithm:\r\n\r\nTake a short text T, for which translations into many languages are available, and save the translation of Ti into each of these languages.\r\nDetermine the length |zip(Ti)| compressed file using the ZIP compression algorithm for each Ti.\r\nAttach the text X under study to each of these translations. You will get a set of strings of the form Ti+X.\r\nThe algorithm selects the language for which the difference is |zip(Ti+X)| - |ti(Ti)| is minimal, that is, where Ti+X is compressed in the best way.pt\r\n\r\nI tried to find similar sources, but I didn&#39;t find them.","title":"Creating an algorithm for language identification","body":"<p>Who knows similar algorithms for finding a language whose logic is similar to this one?\nSprachidentifikation algorithm: The main idea of the algorithm is to compare the difference between the compression of the original text and the compression of the translation of the text into different languages. How are the steps of this algorithm:</p>\n<p>Take a short text T, for which translations into many languages are available, and save the translation of Ti into each of these languages.\nDetermine the length |zip(Ti)| compressed file using the ZIP compression algorithm for each Ti.\nAttach the text X under study to each of these translations. You will get a set of strings of the form Ti+X.\nThe algorithm selects the language for which the difference is |zip(Ti+X)| - |ti(Ti)| is minimal, that is, where Ti+X is compressed in the best way.pt</p>\n<p>I tried to find similar sources, but I didn't find them.</p>\n"},{"tags":["java","spring-boot","spring-mvc"],"comments":[{"owner":{"account_id":25807941,"reputation":105,"user_id":19549205,"display_name":"PhantomPhreak1995"},"score":0,"creation_date":1698395505,"post_id":77371174,"comment_id":136402700,"body_markdown":"What are you exactly trying to do here? Because I think the source code is correct :D","body":"What are you exactly trying to do here? Because I think the source code is correct :D"},{"owner":{"account_id":381081,"reputation":77,"user_id":735514,"display_name":"ryan"},"score":0,"creation_date":1698396682,"post_id":77371174,"comment_id":136402904,"body_markdown":"The error log describes that the request attribute &quot;org.springframework.web.util.ServletRequestPathUtils.PATH&quot; is missed. But from the spring source code , we can see the attribute is set directly before the doDispatch is called. So We want to find out why the attribute no longer exist.","body":"The error log describes that the request attribute &quot;org.springframework.web.util.ServletRequestPathUtils.PATH&quot; is missed. But from the spring source code , we can see the attribute is set directly before the doDispatch is called. So We want to find out why the attribute no longer exist."}],"owner":{"account_id":381081,"reputation":77,"user_id":735514,"display_name":"ryan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698396732,"creation_date":1698372722,"question_id":77371174,"body_markdown":"We have a java application based on the spring boot 3.1.4 and Spring 6.0.12. Sometimes customer sent some indentical requests concurrently to our service. And one of the request would fail to be processed. The application sent back the 500 status code.    The Kibana shows the corresponding error log like below.\r\n\r\n```\r\njava.lang.IllegalArgumentException: Expected parsed RequestPath in request attribute &quot;org.springframework.web.util.ServletRequestPathUtils.PATH&quot;.\r\n\tat org.springframework.util.Assert.notNull(Assert.java:222)\r\n\tat org.springframework.web.util.ServletRequestPathUtils.getParsedRequestPath(ServletRequestPathUtils.java:77)\r\n\tat org.springframework.web.servlet.mvc.condition.PathPatternsRequestCondition.getMatchingCondition(PathPatternsRequestCondition.java:192)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfo.getMatchingCondition(RequestMappingInfo.java:407)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getMatchingMapping(RequestMappingInfoHandlerMapping.java:110)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getMatchingMapping(RequestMappingInfoHandlerMapping.java:68)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.addMatchingMappings(AbstractHandlerMethodMapping.java:447)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:407)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:126)\r\n\tat org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)\r\n\tat org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:505)\r\n\tat org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1275)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:527)\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)\r\n\tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)\r\n\tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\r\n\tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n\tat org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)\r\n\tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)\r\n\tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)\r\n\tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\r\n\tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\r\n\tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)\r\n\tat org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\r\n\tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCache\r\n```\r\n\r\nBy checking the spring boot source code, the attribute &quot;org.springframework.web.util.ServletRequestPathUtils.PATH&quot; is actually set before DispatcherServlet::doDispatch. see https://github.com/spring-projects/spring-framework/blob/d6c9ed200ab9f753940d696c9b0ce2369ebc6e92/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java#L975. So We have no clue why this request attribute is lost before the invocation of PathPatternsRequestCondition::getMatchingCondition. Does anybody has the idea? Thanks for your help.\r\n \r\n","title":"Expected parsed RequestPath in request attribute &quot;org.springframework.web.util.ServletRequestPathUtils.PATH&quot;","body":"<p>We have a java application based on the spring boot 3.1.4 and Spring 6.0.12. Sometimes customer sent some indentical requests concurrently to our service. And one of the request would fail to be processed. The application sent back the 500 status code.    The Kibana shows the corresponding error log like below.</p>\n<pre><code>java.lang.IllegalArgumentException: Expected parsed RequestPath in request attribute &quot;org.springframework.web.util.ServletRequestPathUtils.PATH&quot;.\n    at org.springframework.util.Assert.notNull(Assert.java:222)\n    at org.springframework.web.util.ServletRequestPathUtils.getParsedRequestPath(ServletRequestPathUtils.java:77)\n    at org.springframework.web.servlet.mvc.condition.PathPatternsRequestCondition.getMatchingCondition(PathPatternsRequestCondition.java:192)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfo.getMatchingCondition(RequestMappingInfo.java:407)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getMatchingMapping(RequestMappingInfoHandlerMapping.java:110)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getMatchingMapping(RequestMappingInfoHandlerMapping.java:68)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.addMatchingMappings(AbstractHandlerMethodMapping.java:447)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.lookupHandlerMethod(AbstractHandlerMethodMapping.java:407)\n    at org.springframework.web.servlet.handler.AbstractHandlerMethodMapping.getHandlerInternal(AbstractHandlerMethodMapping.java:382)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:126)\n    at org.springframework.web.servlet.mvc.method.RequestMappingInfoHandlerMapping.getHandlerInternal(RequestMappingInfoHandlerMapping.java:68)\n    at org.springframework.web.servlet.handler.AbstractHandlerMapping.getHandler(AbstractHandlerMapping.java:505)\n    at org.springframework.web.servlet.DispatcherServlet.getHandler(DispatcherServlet.java:1275)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1057)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:527)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCache\n</code></pre>\n<p>By checking the spring boot source code, the attribute &quot;org.springframework.web.util.ServletRequestPathUtils.PATH&quot; is actually set before DispatcherServlet::doDispatch. see <a href=\"https://github.com/spring-projects/spring-framework/blob/d6c9ed200ab9f753940d696c9b0ce2369ebc6e92/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java#L975\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-framework/blob/d6c9ed200ab9f753940d696c9b0ce2369ebc6e92/spring-webmvc/src/main/java/org/springframework/web/servlet/DispatcherServlet.java#L975</a>. So We have no clue why this request attribute is lost before the invocation of PathPatternsRequestCondition::getMatchingCondition. Does anybody has the idea? Thanks for your help.</p>\n"},{"tags":["java","spring","spring-boot","spring-profiles"],"owner":{"account_id":14963595,"reputation":728,"user_id":10802597,"display_name":"MrFisherman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698396642,"creation_date":1698396642,"question_id":77372739,"body_markdown":"There is parent project with additional module that I have to use in my project, it looks like this:\r\n\r\n    microservice-template\r\n        microservice-parent\r\n        microservice-jpa (it has application-jpa.properties file for config)\r\n        microservice-jdbc\r\n        microservice-abc\r\n\r\nNow in my project I set parent of my main pom to \r\n\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;com.bla.bla&lt;/groupId&gt;\r\n        &lt;artifactId&gt;microservice-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;/parent&gt;\r\n\r\nand in dependencies I want to use microservice-jpa\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.bla.bla&lt;/groupId&gt;\r\n        &lt;artifactId&gt;microservice-jpa&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThe problem is, when I want to run tests in my project and use standard name **application-test.properties** then my project does not override **application-jpa.properties** from this microservice-jpa dependency. Properties are overrided only if I set my file to same name application-jpa.properties which looks weird in tests. How can I tell spring boot that I want to override properties from parent but with different file name?\r\n\r\n    \r\n\r\n\r\n","title":"How to override name of parent properties file?","body":"<p>There is parent project with additional module that I have to use in my project, it looks like this:</p>\n<pre><code>microservice-template\n    microservice-parent\n    microservice-jpa (it has application-jpa.properties file for config)\n    microservice-jdbc\n    microservice-abc\n</code></pre>\n<p>Now in my project I set parent of my main pom to</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;com.bla.bla&lt;/groupId&gt;\n    &lt;artifactId&gt;microservice-parent&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>and in dependencies I want to use microservice-jpa</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.bla.bla&lt;/groupId&gt;\n    &lt;artifactId&gt;microservice-jpa&lt;/artifactId&gt;\n    &lt;version&gt;1.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The problem is, when I want to run tests in my project and use standard name <strong>application-test.properties</strong> then my project does not override <strong>application-jpa.properties</strong> from this microservice-jpa dependency. Properties are overrided only if I set my file to same name application-jpa.properties which looks weird in tests. How can I tell spring boot that I want to override properties from parent but with different file name?</p>\n"},{"tags":["java","appium","appium-ios","appium-desktop","appium-java"],"comments":[{"owner":{"account_id":16992528,"reputation":374,"user_id":12291777,"display_name":"drunkencheetah"},"score":0,"creation_date":1657775006,"post_id":72964853,"comment_id":128891494,"body_markdown":"What exactly are you trying to achieve? Restart the app or reset the app data? Resetting the app data has never been possible on iOS (or at least for a long, long time) - the only way to reset the app data on iOS is to re-install the app.","body":"What exactly are you trying to achieve? Restart the app or reset the app data? Resetting the app data has never been possible on iOS (or at least for a long, long time) - the only way to reset the app data on iOS is to re-install the app."},{"owner":{"account_id":25798362,"reputation":1,"user_id":19541189,"display_name":"keerthiga jayakumar"},"score":0,"creation_date":1657786503,"post_id":72964853,"comment_id":128894650,"body_markdown":"Basically i want to close and launch the app to the same page, is it possible?","body":"Basically i want to close and launch the app to the same page, is it possible?"},{"owner":{"account_id":16992528,"reputation":374,"user_id":12291777,"display_name":"drunkencheetah"},"score":0,"creation_date":1657791518,"post_id":72964853,"comment_id":128896366,"body_markdown":"I took a quick glance at the Java docs for 8.1.1 and for me the way to go would probably be:  \n`driver.terminateApp(); driver.activateApp();`\nThis will close the app and re-open it - it will not bring you back to the last screen though. To just minimize and bring back you can try:\n`driver.runAppInBackground​();`","body":"I took a quick glance at the Java docs for 8.1.1 and for me the way to go would probably be:   <code>driver.terminateApp(); driver.activateApp();</code> This will close the app and re-open it - it will not bring you back to the last screen though. To just minimize and bring back you can try: <code>driver.runAppInBackground​();</code>"}],"answers":[{"tags":[],"owner":{"account_id":4116605,"reputation":431,"user_id":3378002,"accept_rate":50,"display_name":"Jano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1686749615,"creation_date":1686749615,"answer_id":76474162,"question_id":72964853,"body_markdown":"I guess the reason is that you have the generic appium driver that can be &quot;anything&quot; (android ios windows etc)\r\n\r\nif you want the functions that are for a specific mobile driver you would probably have to cast it to that driver type.\r\neg\r\n\r\n    ((IOSDriver) driver).resetApp()\r\n\r\nyou can still use this, however these are also deprecated methods.\r\nI&#39;m yet to upgrade my code as well removing these, this is the forum I saved to do it in the future:\r\n\r\nhttps://applitools.com/blog/whats-new-appium-java-client-8/","title":"The method resetApp() is undefined for the type AppiumDriver","body":"<p>I guess the reason is that you have the generic appium driver that can be &quot;anything&quot; (android ios windows etc)</p>\n<p>if you want the functions that are for a specific mobile driver you would probably have to cast it to that driver type.\neg</p>\n<pre><code>((IOSDriver) driver).resetApp()\n</code></pre>\n<p>you can still use this, however these are also deprecated methods.\nI'm yet to upgrade my code as well removing these, this is the forum I saved to do it in the future:</p>\n<p><a href=\"https://applitools.com/blog/whats-new-appium-java-client-8/\" rel=\"nofollow noreferrer\">https://applitools.com/blog/whats-new-appium-java-client-8/</a></p>\n"},{"tags":[],"owner":{"account_id":22738733,"reputation":11,"user_id":16900583,"display_name":"Hans K."},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698396610,"creation_date":1697631458,"answer_id":77316229,"question_id":72964853,"body_markdown":"AppiumDriver methods resetApp, launchApp and closeApp have been deprecated in appium v8 as they are going to be removed from future Appium versions. Check [appium/appium#15807][1] for more details.\r\n\r\n\r\n  [1]: https://github.com/appium/appium/issues/15807\r\n\r\n**UPDATE:** I wrote my own resetApp() method (for Android).\r\n\r\n     public void startActivity(){\r\n        AppiumDriver driver = DRIVER.get();\r\n        String appPackage = driver.getCapabilities().getCapability(&quot;appPackage&quot;).toString()+&quot;/.HomeActivity&quot;;\r\n       driver.executeScript(&quot;mobile: startActivity&quot;, ImmutableMap.of(&quot;intent&quot;, appPackage));\r\n\r\n    }\r\n\r\n    public void clearApp() {\r\n        AppiumDriver driver = DRIVER.get();\r\n        String appPackage = driver.getCapabilities().getCapability(&quot;appPackage&quot;).toString();\r\n        driver.executeScript(&quot;mobile: clearApp&quot;, ImmutableMap.of(&quot;appId&quot;, appPackage));\r\n    }\r\n\r\n\r\n    public void myResetApp(){\r\n        clearApp();\r\n        startActivity();\r\n    }\r\n\r\n","title":"The method resetApp() is undefined for the type AppiumDriver","body":"<p>AppiumDriver methods resetApp, launchApp and closeApp have been deprecated in appium v8 as they are going to be removed from future Appium versions. Check <a href=\"https://github.com/appium/appium/issues/15807\" rel=\"nofollow noreferrer\">appium/appium#15807</a> for more details.</p>\n<p><strong>UPDATE:</strong> I wrote my own resetApp() method (for Android).</p>\n<pre><code> public void startActivity(){\n    AppiumDriver driver = DRIVER.get();\n    String appPackage = driver.getCapabilities().getCapability(&quot;appPackage&quot;).toString()+&quot;/.HomeActivity&quot;;\n   driver.executeScript(&quot;mobile: startActivity&quot;, ImmutableMap.of(&quot;intent&quot;, appPackage));\n\n}\n\npublic void clearApp() {\n    AppiumDriver driver = DRIVER.get();\n    String appPackage = driver.getCapabilities().getCapability(&quot;appPackage&quot;).toString();\n    driver.executeScript(&quot;mobile: clearApp&quot;, ImmutableMap.of(&quot;appId&quot;, appPackage));\n}\n\n\npublic void myResetApp(){\n    clearApp();\n    startActivity();\n}\n</code></pre>\n"}],"owner":{"account_id":25798362,"reputation":1,"user_id":19541189,"display_name":"keerthiga jayakumar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1001,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1698396610,"creation_date":1657708554,"question_id":72964853,"body_markdown":"I am using appium 8.1.1 java client, I am trying to use driver.resetApp() in my code for IOS app, but it shows as The method resetApp() is undefined for the type  AppiumDriver","title":"The method resetApp() is undefined for the type AppiumDriver","body":"<p>I am using appium 8.1.1 java client, I am trying to use driver.resetApp() in my code for IOS app, but it shows as The method resetApp() is undefined for the type  AppiumDriver</p>\n"},{"tags":["java","logging","filtering"],"answers":[{"tags":[],"owner":{"account_id":20627481,"reputation":46,"user_id":15142989,"display_name":"vickllny"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698395350,"creation_date":1698395350,"answer_id":77372599,"question_id":77372141,"body_markdown":"http post can pass json strings, file streams, form-based parameters, etc. You should determine how to use request to obtain parameters based on the value of the request header content-type. Maybe some content-type request parameters are not what you want. For example, when the content-type is application/json, you can use request.getReader() or request.getInputStream() to obtain character and byte streams, but once you do this, you cannot pass request in the actual controller corresponding interface. .getReader() or request.getInputStream() and other methods obtain parameters because these methods are one-time.If you insist on doing this, please refer to the following code.\r\n**obtain content-type:**\r\n\r\n    String contentType = request.getHeader(&quot;Content-Type&quot;)\r\n**obtain json (contentType.equals(&quot;application/json&quot;)\r\n)**\r\n       \r\n\r\n    BufferedReader streamReader = new BufferedReader( new \r\n    InputStreamReader(request.getInputStream(), &quot;UTF-8&quot;));\r\n    StringBuilder responseStrBuilder = new StringBuilder();\r\n    String inputStr;\r\n    while ((inputStr = streamReader.readLine()) != null)\r\n        responseStrBuilder.append(inputStr);\r\n    //TODO Convert the string to List&lt;Map&lt;String, Object&gt;&gt;, HashMap, etc. according to whether the first character of the character is &quot;{&quot; or &quot;[&quot;\r\n\r\n**obtain params(contentType.equals(&quot;application/x-www-form-urlencoded&quot;))**\r\n\r\n    Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\r\n    Enumeration enum = request.getParameterNames();\r\n    while (enum.hasMoreElements()) {\r\n      String paramName = (String) enum.nextElement();\r\n      String paramValue = this.getRequest().getParameter(paramName);\r\n      map.put(paramName, paramValue);\r\n    }\r\n**obtain file stream(contentType.equals(&quot;multipart/form-data&quot;))**\r\nYou probably won&#39;t need it\r\n\r\n    MultipartHttpServletRequest mRequest = (MultipartHttpServletRequest) request;\r\n    MultipartFile file2 = mRequest.getFile(&quot;myFile&quot;);\r\n    InputStream inputStream = file2.getInputStream()","title":"How to correctly add requestBody in logs in LogRequestFilter?","body":"<p>http post can pass json strings, file streams, form-based parameters, etc. You should determine how to use request to obtain parameters based on the value of the request header content-type. Maybe some content-type request parameters are not what you want. For example, when the content-type is application/json, you can use request.getReader() or request.getInputStream() to obtain character and byte streams, but once you do this, you cannot pass request in the actual controller corresponding interface. .getReader() or request.getInputStream() and other methods obtain parameters because these methods are one-time.If you insist on doing this, please refer to the following code.\n<strong>obtain content-type:</strong></p>\n<pre><code>String contentType = request.getHeader(&quot;Content-Type&quot;)\n</code></pre>\n<p><strong>obtain json (contentType.equals(&quot;application/json&quot;)\n)</strong></p>\n<pre><code>BufferedReader streamReader = new BufferedReader( new \nInputStreamReader(request.getInputStream(), &quot;UTF-8&quot;));\nStringBuilder responseStrBuilder = new StringBuilder();\nString inputStr;\nwhile ((inputStr = streamReader.readLine()) != null)\n    responseStrBuilder.append(inputStr);\n//TODO Convert the string to List&lt;Map&lt;String, Object&gt;&gt;, HashMap, etc. according to whether the first character of the character is &quot;{&quot; or &quot;[&quot;\n</code></pre>\n<p><strong>obtain params(contentType.equals(&quot;application/x-www-form-urlencoded&quot;))</strong></p>\n<pre><code>Map&lt;String, Object&gt; map = new HashMap&lt;&gt;();\nEnumeration enum = request.getParameterNames();\nwhile (enum.hasMoreElements()) {\n  String paramName = (String) enum.nextElement();\n  String paramValue = this.getRequest().getParameter(paramName);\n  map.put(paramName, paramValue);\n}\n</code></pre>\n<p><strong>obtain file stream(contentType.equals(&quot;multipart/form-data&quot;))</strong>\nYou probably won't need it</p>\n<pre><code>MultipartHttpServletRequest mRequest = (MultipartHttpServletRequest) request;\nMultipartFile file2 = mRequest.getFile(&quot;myFile&quot;);\nInputStream inputStream = file2.getInputStream()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698396577,"creation_date":1698396577,"answer_id":77372731,"question_id":77372141,"body_markdown":"From what I can see from the Javadoc of `ContentCachingRequestWrapper` is that it only allows you to read the cached contents. It does not make the body re-readable. That means that your logging consumes the entire body, and it&#39;s no longer available for the actual request handling.\r\n\r\nI think you have two options:\r\n1. Log the request after the filtering. Then the request handling will have read the content, and you can read the cached content from the `ContentCachingRequestWrapper`.\r\n\r\n2. Don&#39;t use `ContentCachingRequestWrapper`. Instead, read the body completely, then replace the request with one that uses the read body. I don&#39;t know if there is a class available for that or if you need to write something yourself.\r\n\r\nI have written something myself that uses an approach similar to option 2. However, instead of reading the body twice (once for logging, once for actual processing), it reads the body once during processing. When the body stream is completely read there is a callback that performs the logging. That approach does have some caveats - what if the body is never read (GET, DELETE)? What if the body is not completely read (Jackson by default stops parsing once it finds the final `}` or `]`)?","title":"How to correctly add requestBody in logs in LogRequestFilter?","body":"<p>From what I can see from the Javadoc of <code>ContentCachingRequestWrapper</code> is that it only allows you to read the cached contents. It does not make the body re-readable. That means that your logging consumes the entire body, and it's no longer available for the actual request handling.</p>\n<p>I think you have two options:</p>\n<ol>\n<li><p>Log the request after the filtering. Then the request handling will have read the content, and you can read the cached content from the <code>ContentCachingRequestWrapper</code>.</p>\n</li>\n<li><p>Don't use <code>ContentCachingRequestWrapper</code>. Instead, read the body completely, then replace the request with one that uses the read body. I don't know if there is a class available for that or if you need to write something yourself.</p>\n</li>\n</ol>\n<p>I have written something myself that uses an approach similar to option 2. However, instead of reading the body twice (once for logging, once for actual processing), it reads the body once during processing. When the body stream is completely read there is a callback that performs the logging. That approach does have some caveats - what if the body is never read (GET, DELETE)? What if the body is not completely read (Jackson by default stops parsing once it finds the final <code>}</code> or <code>]</code>)?</p>\n"}],"owner":{"account_id":27135544,"reputation":3,"user_id":20677096,"display_name":"DonDon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":29,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77372731,"answer_count":2,"score":-1,"last_activity_date":1698396577,"creation_date":1698390857,"question_id":77372141,"body_markdown":"I have the following LogRequestFilter in my project:\r\n\r\n```\r\n@Slf4j\r\n@RequiredArgsConstructor\r\npublic class LogRequestFilter extends OncePerRequestFilter {\r\n\r\n    private final String POST = &quot;POST&quot;;\r\n\r\n    @Override\r\n    protected void doFilterInternal(@Nonnull HttpServletRequest request,\r\n                                    @Nonnull HttpServletResponse response,\r\n                                    @Nonnull FilterChain filterChain) throws ServletException, IOException {\r\n        ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper(request);\r\n        logRequest(wrappedRequest);\r\n        filterChain.doFilter(wrappedRequest, response);\r\n    }\r\n\r\n    private void logRequest(@Nonnull ContentCachingRequestWrapper request) {\r\n        if (!log.isDebugEnabled()) {\r\n            return;\r\n        }\r\n\r\n        log.debug(&quot;\\n&quot; +\r\n                        &quot;==================== request begin ====================\\n&quot; +\r\n                        &quot;URI           : {}\\n&quot; +\r\n                        &quot;Method        : {}\\n&quot; +\r\n                        &quot;Headers       : {}\\n&quot; +\r\n                        &quot;Request Body  : {}\\n&quot; +\r\n                        &quot;==================== request end ======================&quot;,\r\n                request.getRequestURI(),\r\n                request.getMethod(),\r\n                getHeaders(request),\r\n                getRequestContent(request)\r\n        );\r\n    }\r\n\r\n    @Nonnull\r\n    private String getRequestContent(@Nonnull HttpServletRequest request) {\r\n        try {\r\n            if (POST.equalsIgnoreCase(request.getMethod()) &amp;&amp; request.getContentType() != null) {\r\n                BufferedReader reader = request.getReader();\r\n                StringBuilder content = new StringBuilder();\r\n                String line;\r\n                while ((line = reader.readLine()) != null) {\r\n                    content.append(line);\r\n                }\r\n                return content.toString();\r\n            } else {\r\n                return &quot;No request body or content type is null&quot;;\r\n            }\r\n        } catch (IOException e) {\r\n            log.error(&quot;Error reading request body&quot;, e);\r\n            return &quot;Error reading request body&quot;;\r\n        }\r\n    }\r\n\r\n    @Nonnull\r\n    private Map&lt;String, List&lt;String&gt;&gt; getHeaders(@Nonnull HttpServletRequest request) {\r\n        return Collections.list(request.getHeaderNames())\r\n                .stream()\r\n                .collect(Collectors.toMap(\r\n                        Function.identity(),\r\n                        header -&gt; Collections.list(request.getHeaders(header))));\r\n    }\r\n}\r\n```\r\n\r\nAnd I have an error \r\n\r\n**Required request body is missing: public**\r\n\r\nHow can I fix this error and refactor my LogRequestFilter class?\r\n\r\nMaybe to check if this is a POST request with a content type (i.e., a request that typically has a request body)? ","title":"How to correctly add requestBody in logs in LogRequestFilter?","body":"<p>I have the following LogRequestFilter in my project:</p>\n<pre><code>@Slf4j\n@RequiredArgsConstructor\npublic class LogRequestFilter extends OncePerRequestFilter {\n\n    private final String POST = &quot;POST&quot;;\n\n    @Override\n    protected void doFilterInternal(@Nonnull HttpServletRequest request,\n                                    @Nonnull HttpServletResponse response,\n                                    @Nonnull FilterChain filterChain) throws ServletException, IOException {\n        ContentCachingRequestWrapper wrappedRequest = new ContentCachingRequestWrapper(request);\n        logRequest(wrappedRequest);\n        filterChain.doFilter(wrappedRequest, response);\n    }\n\n    private void logRequest(@Nonnull ContentCachingRequestWrapper request) {\n        if (!log.isDebugEnabled()) {\n            return;\n        }\n\n        log.debug(&quot;\\n&quot; +\n                        &quot;==================== request begin ====================\\n&quot; +\n                        &quot;URI           : {}\\n&quot; +\n                        &quot;Method        : {}\\n&quot; +\n                        &quot;Headers       : {}\\n&quot; +\n                        &quot;Request Body  : {}\\n&quot; +\n                        &quot;==================== request end ======================&quot;,\n                request.getRequestURI(),\n                request.getMethod(),\n                getHeaders(request),\n                getRequestContent(request)\n        );\n    }\n\n    @Nonnull\n    private String getRequestContent(@Nonnull HttpServletRequest request) {\n        try {\n            if (POST.equalsIgnoreCase(request.getMethod()) &amp;&amp; request.getContentType() != null) {\n                BufferedReader reader = request.getReader();\n                StringBuilder content = new StringBuilder();\n                String line;\n                while ((line = reader.readLine()) != null) {\n                    content.append(line);\n                }\n                return content.toString();\n            } else {\n                return &quot;No request body or content type is null&quot;;\n            }\n        } catch (IOException e) {\n            log.error(&quot;Error reading request body&quot;, e);\n            return &quot;Error reading request body&quot;;\n        }\n    }\n\n    @Nonnull\n    private Map&lt;String, List&lt;String&gt;&gt; getHeaders(@Nonnull HttpServletRequest request) {\n        return Collections.list(request.getHeaderNames())\n                .stream()\n                .collect(Collectors.toMap(\n                        Function.identity(),\n                        header -&gt; Collections.list(request.getHeaders(header))));\n    }\n}\n</code></pre>\n<p>And I have an error</p>\n<p><strong>Required request body is missing: public</strong></p>\n<p>How can I fix this error and refactor my LogRequestFilter class?</p>\n<p>Maybe to check if this is a POST request with a content type (i.e., a request that typically has a request body)?</p>\n"},{"tags":["java","collections","threadpoolexecutor"],"comments":[{"owner":{"account_id":1535561,"reputation":7664,"user_id":1431720,"accept_rate":89,"display_name":"Robert"},"score":0,"creation_date":1698440513,"post_id":77372693,"comment_id":136410859,"body_markdown":"Welcome to stackoverflow. This is too broad, IMHO... can you add more details like code you&#39;ve tried already? See [ask].","body":"Welcome to stackoverflow. This is too broad, IMHO... can you add more details like code you&#39;ve tried already? See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."},{"owner":{"account_id":3211603,"reputation":289287,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1698842821,"post_id":77372693,"comment_id":136455745,"body_markdown":"It’s strange that you want to make calculations using data you just deleted it in the database. Unless you are actually describing two unrelated tasks.","body":"It’s strange that you want to make calculations using data you just deleted it in the database. Unless you are actually describing two unrelated tasks."}],"owner":{"account_id":29765701,"reputation":1,"user_id":22812091,"display_name":"Kerasss"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698396216,"creation_date":1698396216,"question_id":77372693,"body_markdown":"There is a task in which it is necessary to subtract from the database a huge list of models (several millions) and, based on the data of each model, make separate calculations and save them in another database.\r\n\r\nFaced with the problem of creating the storage of a set of models in order to take data from there in multithreading mode. How best to implement this so that the threads generated by the Executor receive data from the collection of models without repetition. In this case, does the thread need to pick up the object and delete it in the collection? It sounds anti-productive.\r\n\r\nI don&#39;t really understand which collection to choose so that it works correctly and as quickly as possible.\r\nAnd how to prevent the same object from being used several times by different threads without deleting it. The option to divide in advance into subcollections is not suitable, because models can be processed at different speeds.","title":"Collection for many elements and multithreaded reading","body":"<p>There is a task in which it is necessary to subtract from the database a huge list of models (several millions) and, based on the data of each model, make separate calculations and save them in another database.</p>\n<p>Faced with the problem of creating the storage of a set of models in order to take data from there in multithreading mode. How best to implement this so that the threads generated by the Executor receive data from the collection of models without repetition. In this case, does the thread need to pick up the object and delete it in the collection? It sounds anti-productive.</p>\n<p>I don't really understand which collection to choose so that it works correctly and as quickly as possible.\nAnd how to prevent the same object from being used several times by different threads without deleting it. The option to divide in advance into subcollections is not suitable, because models can be processed at different speeds.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3597402,"reputation":1164,"user_id":3001675,"accept_rate":86,"display_name":"LIvanov"},"score":0,"creation_date":1698384170,"post_id":77279341,"comment_id":136400960,"body_markdown":"Spring Boot&#39;s scanning highly depends on packages. Can you post your package structure, so that we can examine a bit better your case?","body":"Spring Boot&#39;s scanning highly depends on packages. Can you post your package structure, so that we can examine a bit better your case?"},{"owner":{"account_id":968984,"reputation":3860,"user_id":991903,"accept_rate":40,"display_name":"Meier"},"score":0,"creation_date":1698395396,"post_id":77279341,"comment_id":136402686,"body_markdown":"@Livanow I added the module structure. It is modulith-1.0.1, I need to check is the problem still exists in 1.0.2.","body":"@Livanow I added the module structure. It is modulith-1.0.1, I need to check is the problem still exists in 1.0.2."}],"owner":{"account_id":968984,"reputation":3860,"user_id":991903,"accept_rate":40,"display_name":"Meier"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698395218,"creation_date":1697102736,"question_id":77279341,"body_markdown":"In a Spring Boot project using `Spring Modulith` to structure the application.\r\n\r\nWhen I add a subdir &quot;config&quot; with a bean definition, the app refuses to start. The file looks like this:\r\n```\r\n@Configuration\r\n@EnableWebFluxSecurity\r\npublic class WebSecurityConfig {\r\n\r\n  @Bean\r\n  public SecurityWebFilterChain registerAuthenticationFilter(\r\n    ServerHttpSecurity httpSecurity) {\r\n  ....\r\n```\r\nI get error when starting the app:\r\n\r\n```none\r\nError creating bean with name ...\r\n   Unsatisfied dependency expressed through method &#39;setSecurityWebFilterChains&#39; parameter 0: \r\n   Error creating bean with name &#39;registerAuthenticationFilter&#39; defined in class path resource \r\n    Failed to instantiate [org.springframework.security.web.server.SecurityWebFilterChain]: Illegal arguments to factory method\r\n    &#39;registerAuthenticationFilter&#39;; args: org.springframework.security.config.annotation.web.reactive.ServerHttpSecurityConfiguration$ContextAwareServerHttpSecurity@284bdeed\r\n\tat org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:875) ~\r\n```\r\nWhen I put the file with the config bean in the root directory, then it the apps starts just fine.\r\n\r\nThe project strucuture looks like this:\r\n\r\n    /root\r\n      application.java \r\n      /config\r\n         WebSecurityConfig.java  &lt;- this one is the problem\r\n      /moduleA\r\n      /moduleB\r\n\r\n\r\nBut when I have more config beans, and a lot of them are cross-cutting, I would like to put them in a own config directory. This seem to contradict the normal modulith convention. How do I organize the config beans when using Spring Modulith?\r\n\r\nIt is `Java 20` and `Spring Boot 3.1.4`\r\n\r\n\r\n\r\n\r\n","title":"Where should I put config beans with a Spring Modulith project?","body":"<p>In a Spring Boot project using <code>Spring Modulith</code> to structure the application.</p>\n<p>When I add a subdir &quot;config&quot; with a bean definition, the app refuses to start. The file looks like this:</p>\n<pre><code>@Configuration\n@EnableWebFluxSecurity\npublic class WebSecurityConfig {\n\n  @Bean\n  public SecurityWebFilterChain registerAuthenticationFilter(\n    ServerHttpSecurity httpSecurity) {\n  ....\n</code></pre>\n<p>I get error when starting the app:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Error creating bean with name ...\n   Unsatisfied dependency expressed through method 'setSecurityWebFilterChains' parameter 0: \n   Error creating bean with name 'registerAuthenticationFilter' defined in class path resource \n    Failed to instantiate [org.springframework.security.web.server.SecurityWebFilterChain]: Illegal arguments to factory method\n    'registerAuthenticationFilter'; args: org.springframework.security.config.annotation.web.reactive.ServerHttpSecurityConfiguration$ContextAwareServerHttpSecurity@284bdeed\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:875) ~\n</code></pre>\n<p>When I put the file with the config bean in the root directory, then it the apps starts just fine.</p>\n<p>The project strucuture looks like this:</p>\n<pre><code>/root\n  application.java \n  /config\n     WebSecurityConfig.java  &lt;- this one is the problem\n  /moduleA\n  /moduleB\n</code></pre>\n<p>But when I have more config beans, and a lot of them are cross-cutting, I would like to put them in a own config directory. This seem to contradict the normal modulith convention. How do I organize the config beans when using Spring Modulith?</p>\n<p>It is <code>Java 20</code> and <code>Spring Boot 3.1.4</code></p>\n"},{"tags":["java","multithreading","concurrency"],"answers":[{"tags":[],"owner":{"account_id":3044796,"reputation":3439,"user_id":2580773,"display_name":"David SN"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698394238,"creation_date":1477469433,"answer_id":40256956,"question_id":40256804,"body_markdown":"The problem in your code is that you are starting a Thread in the constructor:\r\n\r\n    MyTask1(){\r\n        new Thread(this).start();\r\n    }\r\n\r\nWhen you execute `scheduleAtFixedRate`, you are creating a new instance and starting a new thread. Then the ExecutorService run the task as expected.\r\n\r\nIn your second version, you defined an anonymous class implementing Runnable. You are not starting the thread yourself and the code works as expected.","title":"scheduleAtFixedRate executes task immediately, should run after defined delay.","body":"<p>The problem in your code is that you are starting a Thread in the constructor:</p>\n<pre><code>MyTask1(){\n    new Thread(this).start();\n}\n</code></pre>\n<p>When you execute <code>scheduleAtFixedRate</code>, you are creating a new instance and starting a new thread. Then the ExecutorService run the task as expected.</p>\n<p>In your second version, you defined an anonymous class implementing Runnable. You are not starting the thread yourself and the code works as expected.</p>\n"},{"tags":[],"owner":{"account_id":2044891,"reputation":3271,"user_id":4503311,"display_name":"Mike Shauneu"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1477469469,"creation_date":1477469469,"answer_id":40256966,"question_id":40256804,"body_markdown":"You don&#39;t  need  start  `Thread` in your `MyTask1`. \r\nThe correct version  of  `MyTask1` is going to be: \r\n\r\n    class MyTask1 implements Runnable{\r\n        MyTask1(){\r\n        }\r\n        public void run(){\r\n            System.out.println(&quot;Running&quot;);\r\n        }\r\n    }\r\n\r\n","title":"scheduleAtFixedRate executes task immediately, should run after defined delay.","body":"<p>You don't  need  start  <code>Thread</code> in your <code>MyTask1</code>. \nThe correct version  of  <code>MyTask1</code> is going to be: </p>\n\n<pre><code>class MyTask1 implements Runnable{\n    MyTask1(){\n    }\n    public void run(){\n        System.out.println(\"Running\");\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":9351960,"reputation":315,"user_id":6941347,"accept_rate":56,"display_name":"Rohit Shekhar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1236,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":40256966,"answer_count":2,"score":0,"last_activity_date":1698394238,"creation_date":1477468932,"question_id":40256804,"body_markdown":"    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.ScheduledExecutorService;\r\n    import java.util.concurrent.TimeUnit;\r\n\r\n    class MyTask1 implements Runnable{\r\n\tMyTask1(){\r\n\t\tnew Thread(this).start();\r\n\t}\r\n\tpublic void run(){\r\n\t\tSystem.out.println(&quot;Running&quot;);\r\n\t}\r\n    }\r\n    public class Schedular_1 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tScheduledExecutorService ex = Executors.newScheduledThreadPool(1);\r\n\t\tex.scheduleAtFixedRate(new MyTask1(), 3, 10, TimeUnit.SECONDS);\t\r\n\t  }\r\n\r\n     }\r\n\r\n\r\nscheduleAtFixedRate &#39;s first run is expected after delay we defined in 2nd parameter. And subsequent execution has to be defined by 3rd parameter ie every 10 seconds. But actually it(MyTask1) is running immediately as soon as I invoke main method. after 3 seconds it executes for 2nd time and after every 10 seconds it runs periodically. \r\n\r\nI got another version of this that works fine available here ([link][1]). \r\n\r\n    import java.util.concurrent.Executors;\r\n    import java.util.concurrent.ScheduledExecutorService;\r\n    import java.util.concurrent.TimeUnit;\r\n\r\n    class MyTask1 implements Runnable{\r\n\tMyTask1(){\r\n\t\tnew Thread(this).start();\r\n\t}\r\n\tpublic void run(){\r\n\t\tSystem.out.println(&quot;Running&quot;);\r\n\t}\r\n    }\r\n    public class Schedular_1 {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tScheduledExecutorService ex = Executors.newScheduledThreadPool(1);\r\n\t\tex.scheduleAtFixedRate(new Runnable() {\r\n\t        @Override\r\n\t        public void run() {\r\n\t            System.out.println(&quot;Testing...&quot;);\r\n\t        }\r\n\t\t}, 3, 10, TimeUnit.SECONDS);\r\n\t}\r\n\r\n    }\r\n\r\n\r\nWhat is the difference between these 2 veriations. Why it behaves abnormally?\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/38431262/in-my-scheduleatfixedrate-method-i-put-delay-time-to-start-run-the-method-but","title":"scheduleAtFixedRate executes task immediately, should run after defined delay.","body":"<pre><code>import java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\nclass MyTask1 implements Runnable{\nMyTask1(){\n    new Thread(this).start();\n}\npublic void run(){\n    System.out.println(\"Running\");\n}\n}\npublic class Schedular_1 {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    ScheduledExecutorService ex = Executors.newScheduledThreadPool(1);\n    ex.scheduleAtFixedRate(new MyTask1(), 3, 10, TimeUnit.SECONDS); \n  }\n\n }\n</code></pre>\n\n<p>scheduleAtFixedRate 's first run is expected after delay we defined in 2nd parameter. And subsequent execution has to be defined by 3rd parameter ie every 10 seconds. But actually it(MyTask1) is running immediately as soon as I invoke main method. after 3 seconds it executes for 2nd time and after every 10 seconds it runs periodically. </p>\n\n<p>I got another version of this that works fine available here (<a href=\"https://stackoverflow.com/questions/38431262/in-my-scheduleatfixedrate-method-i-put-delay-time-to-start-run-the-method-but\">link</a>). </p>\n\n<pre><code>import java.util.concurrent.Executors;\nimport java.util.concurrent.ScheduledExecutorService;\nimport java.util.concurrent.TimeUnit;\n\nclass MyTask1 implements Runnable{\nMyTask1(){\n    new Thread(this).start();\n}\npublic void run(){\n    System.out.println(\"Running\");\n}\n}\npublic class Schedular_1 {\n\npublic static void main(String[] args) {\n    // TODO Auto-generated method stub\n    ScheduledExecutorService ex = Executors.newScheduledThreadPool(1);\n    ex.scheduleAtFixedRate(new Runnable() {\n        @Override\n        public void run() {\n            System.out.println(\"Testing...\");\n        }\n    }, 3, 10, TimeUnit.SECONDS);\n}\n\n}\n</code></pre>\n\n<p>What is the difference between these 2 veriations. Why it behaves abnormally?</p>\n"},{"tags":["java","log4j2","micrometer","spring-micrometer"],"answers":[{"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698394044,"creation_date":1689153377,"answer_id":76668959,"question_id":76660558,"body_markdown":"The problem you are experiencing is due to the unsolved [micrometer-metrics/micrometer#2176](https://github.com/micrometer-metrics/micrometer/issues/2176) issue.\r\n\r\nSince filters are usually side-effect free, the current (2.20.0) version of Log4j2 Core calls the filter 3 times for async loggers. Currently Micrometer works around this issue by counting the number of event **batches** instead of single events. When the system is idle there is usually a single event per batch, but that changes when the system is under load.\r\n\r\nI added [apache/logging-log4j2#1550](https://github.com/apache/logging-log4j2/issues/1550) to keep track of this issue.\r\n\r\n**Edit**: The Log4j2 bug was fixed in version 2.21.0 and Micrometer corrected their filter in [micrometer-metrics/micrometer#4253](https://github.com/micrometer-metrics/micrometer/pull/4253), which is scheduled to be released in version 1.12.0.","title":"Log4j2 Metrics with Micrometer","body":"<p>The problem you are experiencing is due to the unsolved <a href=\"https://github.com/micrometer-metrics/micrometer/issues/2176\" rel=\"nofollow noreferrer\">micrometer-metrics/micrometer#2176</a> issue.</p>\n<p>Since filters are usually side-effect free, the current (2.20.0) version of Log4j2 Core calls the filter 3 times for async loggers. Currently Micrometer works around this issue by counting the number of event <strong>batches</strong> instead of single events. When the system is idle there is usually a single event per batch, but that changes when the system is under load.</p>\n<p>I added <a href=\"https://github.com/apache/logging-log4j2/issues/1550\" rel=\"nofollow noreferrer\">apache/logging-log4j2#1550</a> to keep track of this issue.</p>\n<p><strong>Edit</strong>: The Log4j2 bug was fixed in version 2.21.0 and Micrometer corrected their filter in <a href=\"https://github.com/micrometer-metrics/micrometer/pull/4253\" rel=\"nofollow noreferrer\">micrometer-metrics/micrometer#4253</a>, which is scheduled to be released in version 1.12.0.</p>\n"}],"owner":{"account_id":911208,"reputation":7563,"user_id":945034,"accept_rate":57,"display_name":"Kumar Sambhav"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":291,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1698394044,"creation_date":1689067966,"question_id":76660558,"body_markdown":"I am trying to get log events metrics using Log4j2 &amp; Micrometer. My setup -&gt; Spring Boot application running on Azure with Azure monitoring javaagent which internally creates a [AzureMonitorMeterRegistry][1]. \r\n\r\n**Problem :-**\r\n\r\nIt seems while using the async appender, metric count is less than expected. Refer :-\r\n\r\n[![enter image description here][2]][2] (It&#39;s a StepCounter that&#39;s why you do no see ever increasing trend of the counter.)\r\n\r\nOnce I switched to sync logger, I started getting correct numbers.\r\n\r\nHow can I get correct metrics count while using async appender ? The relevant code is present in [Log4j2Metrics][3] - a MeterBinder implementation. In here, decision is made whether to increment the counter using :-\r\n```\r\n@Override\r\npublic Result filter(LogEvent event) {\r\n\r\n\tif (!isAsyncLogger || isAsyncLoggerAndEndOfBatch(event)) {\r\n\t  // increments by 1\r\n\t  incrementCounter(event); // shouldn&#39;t this be incremented by &quot;batch size&quot; in case of async logger ?\r\n\t}\r\n\r\n\treturn Result.NEUTRAL;\r\n}\r\n```\r\n\r\n  [1]: https://github.com/micrometer-metrics/micrometer/blob/main/implementations/micrometer-registry-azure-monitor/src/main/java/io/micrometer/azuremonitor/AzureMonitorMeterRegistry.java\r\n  [2]: https://i.stack.imgur.com/SND4G.png\r\n  [3]: https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/logging/Log4j2Metrics.java","title":"Log4j2 Metrics with Micrometer","body":"<p>I am trying to get log events metrics using Log4j2 &amp; Micrometer. My setup -&gt; Spring Boot application running on Azure with Azure monitoring javaagent which internally creates a <a href=\"https://github.com/micrometer-metrics/micrometer/blob/main/implementations/micrometer-registry-azure-monitor/src/main/java/io/micrometer/azuremonitor/AzureMonitorMeterRegistry.java\" rel=\"nofollow noreferrer\">AzureMonitorMeterRegistry</a>.</p>\n<p><strong>Problem :-</strong></p>\n<p>It seems while using the async appender, metric count is less than expected. Refer :-</p>\n<p><a href=\"https://i.stack.imgur.com/SND4G.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SND4G.png\" alt=\"enter image description here\" /></a> (It's a StepCounter that's why you do no see ever increasing trend of the counter.)</p>\n<p>Once I switched to sync logger, I started getting correct numbers.</p>\n<p>How can I get correct metrics count while using async appender ? The relevant code is present in <a href=\"https://github.com/micrometer-metrics/micrometer/blob/main/micrometer-core/src/main/java/io/micrometer/core/instrument/binder/logging/Log4j2Metrics.java\" rel=\"nofollow noreferrer\">Log4j2Metrics</a> - a MeterBinder implementation. In here, decision is made whether to increment the counter using :-</p>\n<pre><code>@Override\npublic Result filter(LogEvent event) {\n\n    if (!isAsyncLogger || isAsyncLoggerAndEndOfBatch(event)) {\n      // increments by 1\n      incrementCounter(event); // shouldn't this be incremented by &quot;batch size&quot; in case of async logger ?\n    }\n\n    return Result.NEUTRAL;\n}\n</code></pre>\n"},{"tags":["java",".net","multithreading","synchronization"],"answers":[{"tags":[],"owner":{"account_id":32074,"reputation":59409,"user_id":88558,"accept_rate":88,"display_name":"Lucero"},"down_vote_count":1,"up_vote_count":21,"is_accepted":true,"score":20,"last_activity_date":1698393563,"creation_date":1246378495,"answer_id":1064626,"question_id":1064596,"body_markdown":"The closest I know of is the [Semaphore][1]. Just use it with a &quot;permit&quot; count of 1, and acquire/release will be pretty much the same as what you know from the `ManualResetEvent`.\r\n\r\n&gt; A semaphore initialized to one, and\r\n&gt; which is used such that it only has at\r\n&gt; most one permit available, can serve\r\n&gt; as a mutual exclusion lock. This is\r\n&gt; more commonly known as a binary\r\n&gt; semaphore, because it only has two\r\n&gt; states: one permit available, or zero\r\n&gt; permits available. When used in this\r\n&gt; way, the binary semaphore has the\r\n&gt; property (unlike many Lock\r\n&gt; implementations), that the &quot;lock&quot; can\r\n&gt; be released by a thread other than the\r\n&gt; owner (as semaphores have no notion of\r\n&gt; ownership). This can be useful in some\r\n&gt; specialized contexts, such as deadlock\r\n&gt; recovery.\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Semaphore.html","title":"What is java&#39;s equivalent of ManualResetEvent?","body":"<p>The closest I know of is the <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/Semaphore.html\" rel=\"nofollow noreferrer\">Semaphore</a>. Just use it with a &quot;permit&quot; count of 1, and acquire/release will be pretty much the same as what you know from the <code>ManualResetEvent</code>.</p>\n<blockquote>\n<p>A semaphore initialized to one, and\nwhich is used such that it only has at\nmost one permit available, can serve\nas a mutual exclusion lock. This is\nmore commonly known as a binary\nsemaphore, because it only has two\nstates: one permit available, or zero\npermits available. When used in this\nway, the binary semaphore has the\nproperty (unlike many Lock\nimplementations), that the &quot;lock&quot; can\nbe released by a thread other than the\nowner (as semaphores have no notion of\nownership). This can be useful in some\nspecialized contexts, such as deadlock\nrecovery.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":30387,"reputation":62460,"user_id":82865,"accept_rate":71,"display_name":"Jonathan Holloway"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1246378629,"creation_date":1246378629,"answer_id":1064632,"question_id":1064596,"body_markdown":"Based on:\r\n\r\n&gt; ManualResetEvent allows threads to communicate with each other by\r\n&gt; signaling. Typically, this\r\n&gt; communication concerns a task which\r\n&gt; one thread must complete before other\r\n&gt; threads can proceed.\r\n\r\nfrom here:\r\n\r\n[http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx][1]\r\n\r\nyou possibly want to look at the Barriers in the Java concurrency package - specifically **CyclicBarrier** I believe:\r\n\r\n[http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html][2]\r\n\r\nIt blocks a fixed number of threads until a particular event has occured.  All the threads must come together at a **barrier point**.  \r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx\r\n  [2]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html","title":"What is java&#39;s equivalent of ManualResetEvent?","body":"<p>Based on:</p>\n\n<blockquote>\n  <p>ManualResetEvent allows threads to communicate with each other by\n  signaling. Typically, this\n  communication concerns a task which\n  one thread must complete before other\n  threads can proceed.</p>\n</blockquote>\n\n<p>from here:</p>\n\n<p><a href=\"http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx\" rel=\"nofollow noreferrer\">http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx</a></p>\n\n<p>you possibly want to look at the Barriers in the Java concurrency package - specifically <strong>CyclicBarrier</strong> I believe:</p>\n\n<p><a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html\" rel=\"nofollow noreferrer\">http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html</a></p>\n\n<p>It blocks a fixed number of threads until a particular event has occured.  All the threads must come together at a <strong>barrier point</strong>.  </p>\n"},{"tags":[],"owner":{"account_id":29867,"reputation":10466,"user_id":81009,"display_name":"crafty"},"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1246378631,"creation_date":1246378631,"answer_id":1064633,"question_id":1064596,"body_markdown":"Try [CountDownLatch][1] with count of one.\r\n\r\n    CountDownLatch startSignal = new CountDownLatch(1);\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\r\n\r\n","title":"What is java&#39;s equivalent of ManualResetEvent?","body":"<p>Try <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/util/concurrent/CountDownLatch.html\" rel=\"noreferrer\">CountDownLatch</a> with count of one.</p>\n\n<pre><code>CountDownLatch startSignal = new CountDownLatch(1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":30043,"reputation":71,"user_id":81635,"display_name":"deltaearl"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1259585048,"creation_date":1259045181,"answer_id":1788288,"question_id":1064596,"body_markdown":"I believe the crux of the .NET MRE is thread affinity and its ability to let all waiting threads go through when Set is called. I found the use of the Semaphore works well. However, if I get 10 or 15 threads waiting, then I run into another issue. Specifically, it occurs when Set is called. In .Net, all waiting threads are released. Using a semphore does not release all. So I wrapped it in a class. NOTE: I am very familiar with .NET threading. I am relatively new to Java threading and synchronization. Nevertheless, I am willing to jump in and get some real feedback. Here&#39;s my implementation with assumptions that a Java novice would make:\r\n\r\n    public class ManualEvent {\r\n\tprivate final static int MAX_WAIT = 1000;\r\n\tprivate final static String TAG = &quot;ManualEvent&quot;; \r\n\tprivate Semaphore semaphore = new Semaphore(MAX_WAIT, false);\r\n\t\r\n\tprivate volatile boolean signaled = false;\r\n\tpublic ManualEvent(boolean signaled) {\r\n\t\tthis.signaled = signaled; \r\n\t\tif (!signaled) {\r\n\t\t\tsemaphore.drainPermits();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic boolean WaitOne() {\r\n\t\treturn WaitOne(Long.MAX_VALUE);\r\n\t}\r\n\t\r\n\tprivate volatile int count = 0;\r\n\tpublic boolean WaitOne(long millis) {\r\n\t\tboolean bRc = true;\r\n\t\tif (signaled)\r\n\t\t\treturn true;\r\n\r\n\t\ttry {\r\n\t\t\t++count;\r\n\t\t\tif (count &gt; MAX_WAIT) {\r\n\t\t\t\tLog.w(TAG, &quot;More requests than waits: &quot; + String.valueOf(count));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tLog.d(TAG, &quot;ManualEvent WaitOne Entered&quot;);\r\n\t\t\tbRc = semaphore.tryAcquire(millis, TimeUnit.MILLISECONDS);\r\n\t\t\tLog.d(TAG, &quot;ManualEvent WaitOne=&quot; + String.valueOf(bRc));\r\n\t\t}\r\n\t\tcatch (InterruptedException e) {\r\n\t\t\tbRc = false;\r\n\t\t}\r\n\t\tfinally {\r\n\t\t\t--count;\r\n\t\t}\r\n\t\t\r\n\t\tLog.d(TAG, &quot;ManualEvent WaitOne Exit&quot;);\r\n\t\treturn bRc;\r\n\t}\r\n\t\r\n\tpublic void Set() {\r\n\t\tLog.d(TAG, &quot;ManualEvent Set&quot;);\r\n\t\tsignaled = true;\r\n\t\tsemaphore.release(MAX_WAIT);\r\n\t}\r\n\t\r\n\tpublic void Reset() {\r\n\t\tsignaled = false;\r\n\t\t//stop any new requests\r\n\t\tint count = semaphore.drainPermits();\r\n\t\tLog.d(TAG, &quot;ManualEvent Reset: Permits drained=&quot; + String.valueOf(count));\r\n\t}\r\n}\r\n\r\n\r\n\r\nAlso note that I am basically betting that there&#39;s no more than a 1000 requests waiting for a release at any given time. By releasing and aquiring in batches, I am attempting to release any waiting threads. Note the call to WaitOne is working 1 permit at a time.\r\n","title":"What is java&#39;s equivalent of ManualResetEvent?","body":"<p>I believe the crux of the .NET MRE is thread affinity and its ability to let all waiting threads go through when Set is called. I found the use of the Semaphore works well. However, if I get 10 or 15 threads waiting, then I run into another issue. Specifically, it occurs when Set is called. In .Net, all waiting threads are released. Using a semphore does not release all. So I wrapped it in a class. NOTE: I am very familiar with .NET threading. I am relatively new to Java threading and synchronization. Nevertheless, I am willing to jump in and get some real feedback. Here's my implementation with assumptions that a Java novice would make:</p>\n\n<pre><code>public class ManualEvent {\nprivate final static int MAX_WAIT = 1000;\nprivate final static String TAG = \"ManualEvent\"; \nprivate Semaphore semaphore = new Semaphore(MAX_WAIT, false);\n\nprivate volatile boolean signaled = false;\npublic ManualEvent(boolean signaled) {\n    this.signaled = signaled; \n    if (!signaled) {\n        semaphore.drainPermits();\n    }\n}\n\npublic boolean WaitOne() {\n    return WaitOne(Long.MAX_VALUE);\n}\n\nprivate volatile int count = 0;\npublic boolean WaitOne(long millis) {\n    boolean bRc = true;\n    if (signaled)\n        return true;\n\n    try {\n        ++count;\n        if (count &gt; MAX_WAIT) {\n            Log.w(TAG, \"More requests than waits: \" + String.valueOf(count));\n        }\n\n        Log.d(TAG, \"ManualEvent WaitOne Entered\");\n        bRc = semaphore.tryAcquire(millis, TimeUnit.MILLISECONDS);\n        Log.d(TAG, \"ManualEvent WaitOne=\" + String.valueOf(bRc));\n    }\n    catch (InterruptedException e) {\n        bRc = false;\n    }\n    finally {\n        --count;\n    }\n\n    Log.d(TAG, \"ManualEvent WaitOne Exit\");\n    return bRc;\n}\n\npublic void Set() {\n    Log.d(TAG, \"ManualEvent Set\");\n    signaled = true;\n    semaphore.release(MAX_WAIT);\n}\n\npublic void Reset() {\n    signaled = false;\n    //stop any new requests\n    int count = semaphore.drainPermits();\n    Log.d(TAG, \"ManualEvent Reset: Permits drained=\" + String.valueOf(count));\n}\n</code></pre>\n\n<p>}</p>\n\n<p>Also note that I am basically betting that there's no more than a 1000 requests waiting for a release at any given time. By releasing and aquiring in batches, I am attempting to release any waiting threads. Note the call to WaitOne is working 1 permit at a time.</p>\n"},{"tags":[],"owner":{"account_id":90751,"reputation":654,"user_id":249654,"display_name":"terentev"},"down_vote_count":0,"up_vote_count":28,"is_accepted":false,"score":28,"last_activity_date":1339615266,"creation_date":1263374707,"answer_id":2055584,"question_id":1064596,"body_markdown":"    class ManualResetEvent {\r\n    \r\n      private final Object monitor = new Object();\r\n      private volatile boolean open = false;\r\n    \r\n      public ManualResetEvent(boolean open) {\r\n        this.open = open;\r\n      }\r\n    \r\n      public void waitOne() throws InterruptedException {\r\n        synchronized (monitor) {\r\n          while (open==false) {\r\n              monitor.wait();\r\n          }\r\n        }\r\n      }\r\n\r\n      public boolean waitOne(long milliseconds) throws InterruptedException {\r\n        synchronized (monitor) {\r\n          if (open) \r\n            return true;\r\n          monitor.wait(milliseconds);\r\n            return open;\r\n        }\r\n      }\r\n    \r\n      public void set() {//open start\r\n        synchronized (monitor) {\r\n          open = true;\r\n          monitor.notifyAll();\r\n        }\r\n      }\r\n    \r\n      public void reset() {//close stop\r\n        open = false;\r\n      }\r\n    }\r\n","title":"What is java&#39;s equivalent of ManualResetEvent?","body":"<pre><code>class ManualResetEvent {\n\n  private final Object monitor = new Object();\n  private volatile boolean open = false;\n\n  public ManualResetEvent(boolean open) {\n    this.open = open;\n  }\n\n  public void waitOne() throws InterruptedException {\n    synchronized (monitor) {\n      while (open==false) {\n          monitor.wait();\n      }\n    }\n  }\n\n  public boolean waitOne(long milliseconds) throws InterruptedException {\n    synchronized (monitor) {\n      if (open) \n        return true;\n      monitor.wait(milliseconds);\n        return open;\n    }\n  }\n\n  public void set() {//open start\n    synchronized (monitor) {\n      open = true;\n      monitor.notifyAll();\n    }\n  }\n\n  public void reset() {//close stop\n    open = false;\n  }\n}\n</code></pre>\n"}],"owner":{"account_id":6636,"reputation":224522,"user_id":11236,"accept_rate":76,"display_name":"ripper234"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14042,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"closed_date":1533561293,"accepted_answer_id":1064626,"answer_count":5,"score":34,"last_activity_date":1698393563,"creation_date":1246378178,"question_id":1064596,"body_markdown":"What is java&#39;s equivalent of [ManualResetEvent][1]?\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx","title":"What is java&#39;s equivalent of ManualResetEvent?","body":"<p>What is java's equivalent of <a href=\"http://msdn.microsoft.com/en-us/library/system.threading.manualresetevent.aspx\" rel=\"noreferrer\">ManualResetEvent</a>?</p>\n"},{"tags":["java","arrays","generics","collections"],"comments":[{"owner":{"account_id":31622,"reputation":120341,"user_id":86989,"display_name":"newacct"},"score":6,"creation_date":1242710804,"post_id":880581,"comment_id":688214,"body_markdown":"&quot;I want to create a Map&lt;int[], double&gt; ... but Map doesn&#39;t take primitive types.&quot; As one of the posts below pointed out, int[] is not a primitive type, so that is not the real problem. The real problem is that arrays do not override .equals() to compare the elements. In that sense converting to Integer[] (as your title says) does not help you. In the code above, frequencies.containsKey(q) would still not work as you expect because it uses .equals() to compare. The real solution is to not use arrays here.","body":"&quot;I want to create a Map&lt;int[], double&gt; ... but Map doesn&#39;t take primitive types.&quot; As one of the posts below pointed out, int[] is not a primitive type, so that is not the real problem. The real problem is that arrays do not override .equals() to compare the elements. In that sense converting to Integer[] (as your title says) does not help you. In the code above, frequencies.containsKey(q) would still not work as you expect because it uses .equals() to compare. The real solution is to not use arrays here."},{"owner":{"account_id":2818342,"reputation":299828,"user_id":2422776,"display_name":"Mureinik"},"score":0,"creation_date":1482145409,"post_id":880581,"comment_id":69640845,"body_markdown":"Don&#39;t want to spam with another answer, but worth noting there&#39;s now a [documentation example](http://stackoverflow.com/documentation/java/99/arrays/17621/converting-arrays-between-primitives-and-boxed-types#t=201612191100551953842) about this.","body":"Don&#39;t want to spam with another answer, but worth noting there&#39;s now a <a href=\"http://stackoverflow.com/documentation/java/99/arrays/17621/converting-arrays-between-primitives-and-boxed-types#t=201612191100551953842\">documentation example</a> about this."}],"answers":[{"tags":[],"owner":{"account_id":37250,"reputation":12091,"user_id":106463,"display_name":"Mihai Toader"},"down_vote_count":8,"up_vote_count":2,"is_accepted":false,"score":-6,"last_activity_date":1646829754,"creation_date":1242696466,"answer_id":880589,"question_id":880581,"body_markdown":"You don&#39;t need it. `int[]` is an object and can be used as a key inside a map.\r\n\r\n    Map&lt;int[], Double&gt; frequencies = new HashMap&lt;int[], Double&gt;();\r\n\r\nis the proper definition of the frequencies map.\r\n\r\n&lt;sub&gt;This was wrong :-). The proper solution is posted too :-).&lt;/sub&gt;\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>You don't need it. <code>int[]</code> is an object and can be used as a key inside a map.</p>\n<pre><code>Map&lt;int[], Double&gt; frequencies = new HashMap&lt;int[], Double&gt;();\n</code></pre>\n<p>is the proper definition of the frequencies map.</p>\n<p><sub>This was wrong :-). The proper solution is posted too :-).</sub></p>\n"},{"tags":[],"owner":{"account_id":23143,"reputation":53986,"user_id":57752,"accept_rate":73,"display_name":"Eddie"},"down_vote_count":2,"up_vote_count":85,"is_accepted":false,"score":83,"last_activity_date":1352491110,"creation_date":1242696603,"answer_id":880593,"question_id":880581,"body_markdown":"If you want to convert an `int[]` to an `Integer[]`, there isn&#39;t an automated way to do it in the JDK.  However, you can do something like this:\r\n\r\n    int[] oldArray;\r\n\r\n    ... // Here you would assign and fill oldArray\r\n\r\n    Integer[] newArray = new Integer[oldArray.length];\r\n    int i = 0;\r\n    for (int value : oldArray) {\r\n        newArray[i++] = Integer.valueOf(value);\r\n    }\r\n\r\nIf you have access to the [Apache lang][1] library, then you can use the [`ArrayUtils.toObject(int[])`][2] method like this:\r\n\r\n    Integer[] newArray = ArrayUtils.toObject(oldArray);\r\n\r\n [1]: http://commons.apache.org/lang/\r\n [2]: http://commons.apache.org/lang/api-release/org/apache/commons/lang3/ArrayUtils.html#toObject(int[])\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>If you want to convert an <code>int[]</code> to an <code>Integer[]</code>, there isn't an automated way to do it in the JDK.  However, you can do something like this:</p>\n\n<pre><code>int[] oldArray;\n\n... // Here you would assign and fill oldArray\n\nInteger[] newArray = new Integer[oldArray.length];\nint i = 0;\nfor (int value : oldArray) {\n    newArray[i++] = Integer.valueOf(value);\n}\n</code></pre>\n\n<p>If you have access to the <a href=\"http://commons.apache.org/lang/\" rel=\"noreferrer\">Apache lang</a> library, then you can use the <a href=\"http://commons.apache.org/lang/api-release/org/apache/commons/lang3/ArrayUtils.html#toObject(int[])\" rel=\"noreferrer\"><code>ArrayUtils.toObject(int[])</code></a> method like this:</p>\n\n<pre><code>Integer[] newArray = ArrayUtils.toObject(oldArray);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3282,"reputation":146276,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1242696878,"creation_date":1242696878,"answer_id":880604,"question_id":880581,"body_markdown":"Presumably you want the key to the map to match on the value of the elements instead of the identity of the array. In that case you want some kind of object that defines `equals` and `hashCode` as you would expect. Easiest is to convert to a `List&lt;Integer&gt;`, either an `ArrayList` or better use `Arrays.asList`. Better than that you can introduce a class that represents the data (similar to `java.awt.Rectangle` but I recommend making the variables private final, and the class final too).","title":"How can I convert int[] to Integer[] in Java?","body":"<p>Presumably you want the key to the map to match on the value of the elements instead of the identity of the array. In that case you want some kind of object that defines <code>equals</code> and <code>hashCode</code> as you would expect. Easiest is to convert to a <code>List&lt;Integer&gt;</code>, either an <code>ArrayList</code> or better use <code>Arrays.asList</code>. Better than that you can introduce a class that represents the data (similar to <code>java.awt.Rectangle</code> but I recommend making the variables private final, and the class final too).</p>\n"},{"tags":[],"owner":{"account_id":37250,"reputation":12091,"user_id":106463,"display_name":"Mihai Toader"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1646830040,"creation_date":1242697930,"answer_id":880644,"question_id":880581,"body_markdown":"The proper solution is to use this class as a key in the map wrapping the actual int[].\r\n\r\n    public class IntArrayWrapper {\r\n        int[] data;\r\n\r\n        public IntArrayWrapper(int[] data) {\r\n            this.data = data;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object o) {\r\n            if (this == o)\r\n                return true;\r\n            if (o == null || getClass() != o.getClass())\r\n                return false;\r\n\r\n            IntArrayWrapper that = (IntArrayWrapper) o;\r\n\r\n            if (!Arrays.equals(data, that.data))\r\n                return false;\r\n\r\n            return true;\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            return data != null ? Arrays.hashCode(data) : 0;\r\n        }\r\n    }\r\n\r\nAnd change your code like this:\r\n\r\n    Map&lt;IntArrayWrapper, Double &gt; freqs = new HashMap&lt;IntArrayWrapper, Double&gt;();\r\n\r\n    for (int[] data : datas) {\r\n        IntArrayWrapper wrapper = new IntArrayWrapper(data);\r\n\r\n        if (freqs.containsKey(wrapper)) {\r\n            freqs.put(wrapper, freqs.get(wrapper) + p);\r\n        }\r\n\r\n        freqs.put(wrapper, p);\r\n    }\r\n\r\n\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>The proper solution is to use this class as a key in the map wrapping the actual int[].</p>\n<pre><code>public class IntArrayWrapper {\n    int[] data;\n\n    public IntArrayWrapper(int[] data) {\n        this.data = data;\n    }\n\n    @Override\n    public boolean equals(Object o) {\n        if (this == o)\n            return true;\n        if (o == null || getClass() != o.getClass())\n            return false;\n\n        IntArrayWrapper that = (IntArrayWrapper) o;\n\n        if (!Arrays.equals(data, that.data))\n            return false;\n\n        return true;\n    }\n\n    @Override\n    public int hashCode() {\n        return data != null ? Arrays.hashCode(data) : 0;\n    }\n}\n</code></pre>\n<p>And change your code like this:</p>\n<pre><code>Map&lt;IntArrayWrapper, Double &gt; freqs = new HashMap&lt;IntArrayWrapper, Double&gt;();\n\nfor (int[] data : datas) {\n    IntArrayWrapper wrapper = new IntArrayWrapper(data);\n\n    if (freqs.containsKey(wrapper)) {\n        freqs.put(wrapper, freqs.get(wrapper) + p);\n    }\n\n    freqs.put(wrapper, p);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":38143,"reputation":2447,"user_id":109309,"accept_rate":83,"display_name":"Chris"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1646830193,"creation_date":1242735285,"answer_id":882383,"question_id":880581,"body_markdown":"Rather than write your own code, you can use an IntBuffer to wrap the existing int[] without having to copy the data into an Integer array:\r\n\r\n    int[] a = {1, 2, 3, 4};\r\n    IntBuffer b = IntBuffer.wrap(a);\r\n\r\nIntBuffer implements *comparable*, so you are able to use the code you already have written. Formally, maps compare keys such that a.equals(b) is used to say two keys are equal, so two IntBuffers with array 1,2,3 - even if the arrays are in different memory locations - are said to be equal and so will work for your frequency code.\r\n\r\n    ArrayList&lt;int[]&gt; data = ... // Load a dataset`\r\n\r\n    Map&lt;IntBuffer, Double&gt; frequencies = new HashMap&lt;IntBuffer, Double&gt;();\r\n\r\n    for(int[] a : data) {\r\n\r\n        IntBuffer q = IntBuffer.wrap(a);\r\n\r\n        if(frequencies.containsKey(q)) {\r\n            frequencies.put(q, tfs.get(q) + p);\r\n        } else {\r\n            frequencies.put(q, p);\r\n        }\r\n    }\r\n\r\n\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>Rather than write your own code, you can use an IntBuffer to wrap the existing int[] without having to copy the data into an Integer array:</p>\n<pre><code>int[] a = {1, 2, 3, 4};\nIntBuffer b = IntBuffer.wrap(a);\n</code></pre>\n<p>IntBuffer implements <em>comparable</em>, so you are able to use the code you already have written. Formally, maps compare keys such that a.equals(b) is used to say two keys are equal, so two IntBuffers with array 1,2,3 - even if the arrays are in different memory locations - are said to be equal and so will work for your frequency code.</p>\n<pre><code>ArrayList&lt;int[]&gt; data = ... // Load a dataset`\n\nMap&lt;IntBuffer, Double&gt; frequencies = new HashMap&lt;IntBuffer, Double&gt;();\n\nfor(int[] a : data) {\n\n    IntBuffer q = IntBuffer.wrap(a);\n\n    if(frequencies.containsKey(q)) {\n        frequencies.put(q, tfs.get(q) + p);\n    } else {\n        frequencies.put(q, p);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":71043,"reputation":30960,"user_id":205521,"accept_rate":89,"display_name":"Thomas Ahle"},"down_vote_count":5,"up_vote_count":5,"is_accepted":false,"score":0,"last_activity_date":1646830326,"creation_date":1343994770,"answer_id":11795220,"question_id":880581,"body_markdown":"Though the below compiles, it throws a `ArrayStoreException` at runtime.\r\n\r\n---\r\n\r\nConverting an `int[]`, to an `Integer[]`:\r\n\r\n    int[] old;\r\n    ...\r\n    Integer[] arr = new Integer[old.length];\r\n    System.arraycopy(old, 0, arr, 0, old.length);\r\n\r\nI must admit I was a bit surprised that this compiles, given `System.arraycopy` being lowlevel and everything, but it does. At least in Java&amp;nbsp;7.\r\n\r\nYou can convert the other way just as easily.\r\n\r\n\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>Though the below compiles, it throws a <code>ArrayStoreException</code> at runtime.</p>\n<hr />\n<p>Converting an <code>int[]</code>, to an <code>Integer[]</code>:</p>\n<pre><code>int[] old;\n...\nInteger[] arr = new Integer[old.length];\nSystem.arraycopy(old, 0, arr, 0, old.length);\n</code></pre>\n<p>I must admit I was a bit surprised that this compiles, given <code>System.arraycopy</code> being lowlevel and everything, but it does. At least in Java 7.</p>\n<p>You can convert the other way just as easily.</p>\n"},{"tags":[],"owner":{"account_id":1322191,"reputation":11583,"user_id":1267768,"accept_rate":83,"display_name":"Matt"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1646830536,"creation_date":1343996994,"answer_id":11795773,"question_id":880581,"body_markdown":"I am not sure why you need a Double in your map.  In terms of what you&#39;re trying to do, you have an int[] and you just want counts of how many times each sequence occurs(?).  Why would this require a Double anyway?\r\n\r\nI would create a wrapper for the int array with a proper .equals and .hashCode methods to account for the fact that int[] object itself doesn&#39;t consider the data in its version of these methods.\r\n\r\n    public class IntArrayWrapper {\r\n        private int values[];\r\n\r\n        public IntArrayWrapper(int[] values) {\r\n            super();\r\n            this.values = values;\r\n        }\r\n\r\n        @Override\r\n        public int hashCode() {\r\n            final int prime = 31;\r\n            int result = 1;\r\n            result = prime * result + Arrays.hashCode(values);\r\n            return result;\r\n        }\r\n\r\n        @Override\r\n        public boolean equals(Object obj) {\r\n            if (this == obj)\r\n                return true;\r\n            if (obj == null)\r\n                return false;\r\n            if (getClass() != obj.getClass())\r\n                return false;\r\n            IntArrayWrapper other = (IntArrayWrapper) obj;\r\n            if (!Arrays.equals(values, other.values))\r\n                return false;\r\n            return true;\r\n        }\r\n\r\n    }\r\n\r\nAnd then use [Google Guava][1]&#39;s multiset, which is meant exactly for the purpose of counting occurrences, as long as the element type you put in it has proper .equals and .hashCode methods.\r\n\r\n    List&lt;int[]&gt; list = ...;\r\n    HashMultiset&lt;IntArrayWrapper&gt; multiset = HashMultiset.create();\r\n    for (int values[] : list) {\r\n        multiset.add(new IntArrayWrapper(values));\r\n    }\r\n\r\nThen, to get the count for any particular combination:\r\n\r\n    int cnt = multiset.count(new IntArrayWrapper(new int[] { 0, 1, 2, 3 }));\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Google_Guava\r\n\r\n\r\n\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>I am not sure why you need a Double in your map.  In terms of what you're trying to do, you have an int[] and you just want counts of how many times each sequence occurs(?).  Why would this require a Double anyway?</p>\n<p>I would create a wrapper for the int array with a proper .equals and .hashCode methods to account for the fact that int[] object itself doesn't consider the data in its version of these methods.</p>\n<pre><code>public class IntArrayWrapper {\n    private int values[];\n\n    public IntArrayWrapper(int[] values) {\n        super();\n        this.values = values;\n    }\n\n    @Override\n    public int hashCode() {\n        final int prime = 31;\n        int result = 1;\n        result = prime * result + Arrays.hashCode(values);\n        return result;\n    }\n\n    @Override\n    public boolean equals(Object obj) {\n        if (this == obj)\n            return true;\n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        IntArrayWrapper other = (IntArrayWrapper) obj;\n        if (!Arrays.equals(values, other.values))\n            return false;\n        return true;\n    }\n\n}\n</code></pre>\n<p>And then use <a href=\"https://en.wikipedia.org/wiki/Google_Guava\" rel=\"nofollow noreferrer\">Google Guava</a>'s multiset, which is meant exactly for the purpose of counting occurrences, as long as the element type you put in it has proper .equals and .hashCode methods.</p>\n<pre><code>List&lt;int[]&gt; list = ...;\nHashMultiset&lt;IntArrayWrapper&gt; multiset = HashMultiset.create();\nfor (int values[] : list) {\n    multiset.add(new IntArrayWrapper(values));\n}\n</code></pre>\n<p>Then, to get the count for any particular combination:</p>\n<pre><code>int cnt = multiset.count(new IntArrayWrapper(new int[] { 0, 1, 2, 3 }));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3340410,"reputation":5354,"user_id":2806819,"accept_rate":97,"display_name":"k_rollo"},"down_vote_count":1,"up_vote_count":12,"is_accepted":false,"score":11,"last_activity_date":1431046972,"creation_date":1396970737,"answer_id":22941402,"question_id":880581,"body_markdown":"Using regular for-loop without external libraries:\r\n--------------------------------------------------\r\n\r\n**Convert int[] to Integer[]:**\r\n\r\n    int[] primitiveArray = {1, 2, 3, 4, 5};\r\n    Integer[] objectArray = new Integer[primitiveArray.length];\r\n    \r\n    for(int ctr = 0; ctr &lt; primitiveArray.length; ctr++) {\r\n    \tobjectArray[ctr] = Integer.valueOf(primitiveArray[ctr]); // returns Integer value\r\n    }\r\n\r\n**Convert Integer[] to int[]:**\r\n\r\n    Integer[] objectArray = {1, 2, 3, 4, 5};\r\n    int[] primitiveArray = new int[objectArray.length];\r\n    \r\n    for(int ctr = 0; ctr &lt; objectArray.length; ctr++) {\r\n    \tprimitiveArray[ctr] = objectArray[ctr].intValue(); // returns int value\r\n    }","title":"How can I convert int[] to Integer[] in Java?","body":"<h2>Using regular for-loop without external libraries:</h2>\n\n<p><strong>Convert int[] to Integer[]:</strong></p>\n\n<pre><code>int[] primitiveArray = {1, 2, 3, 4, 5};\nInteger[] objectArray = new Integer[primitiveArray.length];\n\nfor(int ctr = 0; ctr &lt; primitiveArray.length; ctr++) {\n    objectArray[ctr] = Integer.valueOf(primitiveArray[ctr]); // returns Integer value\n}\n</code></pre>\n\n<p><strong>Convert Integer[] to int[]:</strong></p>\n\n<pre><code>Integer[] objectArray = {1, 2, 3, 4, 5};\nint[] primitiveArray = new int[objectArray.length];\n\nfor(int ctr = 0; ctr &lt; objectArray.length; ctr++) {\n    primitiveArray[ctr] = objectArray[ctr].intValue(); // returns int value\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":480372,"reputation":17424,"user_id":893578,"display_name":"Sheepy"},"down_vote_count":0,"up_vote_count":262,"is_accepted":false,"score":262,"last_activity_date":1445480367,"creation_date":1416496738,"answer_id":27043087,"question_id":880581,"body_markdown":"# Native Java 8 (one line)\r\n\r\nWith Java 8, `int[]` can be converted to `Integer[]` easily:\r\n\r\n    int[] data = {1,2,3,4,5,6,7,8,9,10};\r\n\r\n    // To boxed array\r\n    Integer[] what = Arrays.stream( data ).boxed().toArray( Integer[]::new );\r\n    Integer[] ever = IntStream.of( data ).boxed().toArray( Integer[]::new );\r\n\r\n    // To boxed list\r\n    List&lt;Integer&gt; you  = Arrays.stream( data ).boxed().collect( Collectors.toList() );\r\n    List&lt;Integer&gt; like = IntStream.of( data ).boxed().collect( Collectors.toList() );\r\n\r\nAs others stated, `Integer[]` is usually not a good map key.\r\nBut as far as conversion goes, we now have a relatively clean and native code.","title":"How can I convert int[] to Integer[] in Java?","body":"<h1>Native Java 8 (one line)</h1>\n\n<p>With Java 8, <code>int[]</code> can be converted to <code>Integer[]</code> easily:</p>\n\n<pre><code>int[] data = {1,2,3,4,5,6,7,8,9,10};\n\n// To boxed array\nInteger[] what = Arrays.stream( data ).boxed().toArray( Integer[]::new );\nInteger[] ever = IntStream.of( data ).boxed().toArray( Integer[]::new );\n\n// To boxed list\nList&lt;Integer&gt; you  = Arrays.stream( data ).boxed().collect( Collectors.toList() );\nList&lt;Integer&gt; like = IntStream.of( data ).boxed().collect( Collectors.toList() );\n</code></pre>\n\n<p>As others stated, <code>Integer[]</code> is usually not a good map key.\nBut as far as conversion goes, we now have a relatively clean and native code.</p>\n"},{"tags":[],"owner":{"account_id":1733872,"reputation":2893,"user_id":1586864,"display_name":"Harsh"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1646830764,"creation_date":1439388520,"answer_id":31967630,"question_id":880581,"body_markdown":"1. Convert int[] to Integer[]\r\n\r\n        public static Integer[] toConvertInteger(int[] ids) {\r\n\r\n            Integer[] newArray = new Integer[ids.length];\r\n            for (int i = 0; i &lt; ids.length; i++) {\r\n                newArray[i] = Integer.valueOf(ids[i]);\r\n            }\r\n            return newArray;\r\n        }\r\n\r\n2. Convert Integer[] to int[]\r\n\r\n        public static int[] toint(Integer[] WrapperArray) {\r\n\r\n           int[] newArray = new int[WrapperArray.length];\r\n           for (int i = 0; i &lt; WrapperArray.length; i++) {\r\n               newArray[i] = WrapperArray[i].intValue();\r\n           }\r\n           return newArray;\r\n        }\r\n\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<ol>\n<li><p>Convert int[] to Integer[]</p>\n<pre><code> public static Integer[] toConvertInteger(int[] ids) {\n\n     Integer[] newArray = new Integer[ids.length];\n     for (int i = 0; i &lt; ids.length; i++) {\n         newArray[i] = Integer.valueOf(ids[i]);\n     }\n     return newArray;\n }\n</code></pre>\n</li>\n<li><p>Convert Integer[] to int[]</p>\n<pre><code> public static int[] toint(Integer[] WrapperArray) {\n\n    int[] newArray = new int[WrapperArray.length];\n    for (int i = 0; i &lt; WrapperArray.length; i++) {\n        newArray[i] = WrapperArray[i].intValue();\n    }\n    return newArray;\n }\n</code></pre>\n</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8621592,"reputation":21,"user_id":6456326,"display_name":"Itamar Borges"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1465740984,"creation_date":1465739392,"answer_id":37775001,"question_id":880581,"body_markdown":"This worked like a charm!\r\n\r\n    int[] mInt = new int[10];\r\n    Integer[] mInteger = new Integer[mInt.length];\r\n\r\n    List&lt;Integer&gt; wrapper = new AbstractList&lt;Integer&gt;() {\r\n        @Override\r\n        public int size() {\r\n            return mInt.length;\r\n        }\r\n\r\n        @Override\r\n        public Integer get(int i) {\r\n            return mInt[i];\r\n        }\r\n    };\r\n\r\n    wrapper.toArray(mInteger);","title":"How can I convert int[] to Integer[] in Java?","body":"<p>This worked like a charm!</p>\n\n<pre><code>int[] mInt = new int[10];\nInteger[] mInteger = new Integer[mInt.length];\n\nList&lt;Integer&gt; wrapper = new AbstractList&lt;Integer&gt;() {\n    @Override\n    public int size() {\n        return mInt.length;\n    }\n\n    @Override\n    public Integer get(int i) {\n        return mInt[i];\n    }\n};\n\nwrapper.toArray(mInteger);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10641157,"reputation":371,"user_id":7836134,"display_name":"zemiak"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1574320755,"creation_date":1574320755,"answer_id":58969297,"question_id":880581,"body_markdown":"**Convert int[] to Integer[]:**\r\n```\r\n    import java.util.Arrays;\r\n    ...\r\n\r\n    int[] aint = {1,2,3,4,5,6,7,8,9,10};\r\n    Integer[] aInt = new Integer[aint.length];\r\n    \r\n    Arrays.setAll(aInt, i -&gt; aint[i]);\r\n```","title":"How can I convert int[] to Integer[] in Java?","body":"<p><strong>Convert int[] to Integer[]:</strong></p>\n\n<pre><code>    import java.util.Arrays;\n    ...\n\n    int[] aint = {1,2,3,4,5,6,7,8,9,10};\n    Integer[] aInt = new Integer[aint.length];\n\n    Arrays.setAll(aInt, i -&gt; aint[i]);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":179742,"reputation":9030,"user_id":412591,"accept_rate":46,"display_name":"Angelin Nadar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1666268215,"creation_date":1666268215,"answer_id":74139749,"question_id":880581,"body_markdown":"Int is a primitive. Primitives can’t accept null and have default value. Hence, to accept Null you need to use wrapper class Integer.\r\n\r\n\r\n**Option 1:** \r\n\r\n    int[] nos = { 1, 2, 3, 4, 5 };\r\n    Integer[] nosWrapped = Arrays.stream(nos) \r\n                                 .boxed()\r\n                                 .toArray(Integer[]::new);\r\n    nosWrapped[5] = null // can store null\r\n\r\n**Option 2:**\r\nYou can use any data structure that use wrapper class Integer\r\n\r\n    int[] nos = { 1, 2, 3, 4, 5 };\r\n    List&lt;Integer&gt; = Arrays.asList(nos)\r\n\r\n\r\n\r\n\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>Int is a primitive. Primitives can’t accept null and have default value. Hence, to accept Null you need to use wrapper class Integer.</p>\n<p><strong>Option 1:</strong></p>\n<pre><code>int[] nos = { 1, 2, 3, 4, 5 };\nInteger[] nosWrapped = Arrays.stream(nos) \n                             .boxed()\n                             .toArray(Integer[]::new);\nnosWrapped[5] = null // can store null\n</code></pre>\n<p><strong>Option 2:</strong>\nYou can use any data structure that use wrapper class Integer</p>\n<pre><code>int[] nos = { 1, 2, 3, 4, 5 };\nList&lt;Integer&gt; = Arrays.asList(nos)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3245251,"reputation":93,"user_id":2737026,"accept_rate":60,"display_name":"Azzedine madi"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698393511,"creation_date":1698392657,"answer_id":77372330,"question_id":880581,"body_markdown":"the easiest way to do it:\r\n\r\n    int[] arrayOfInts = {1 , 3 , 5 , 6};\r\n        Integer[] arrayOfObjects = new Integer[arrayOfInts.length];\r\n        Arrays.setAll(arrayOfInts,\r\n                i -&gt; arrayOfObjects[i] = arrayOfInts[i]\r\n                );\r\n\r\nand if you want to put it in a List:\r\n\r\n    int[] arrayOfInts = {1 , 3 , 5 , 6};\r\n        List&lt;Integer&gt; intList = new ArrayList&lt;&gt;(Collections.nCopies(arrayOfInts.length, 0));\r\n        intList.replaceAll(e -&gt; arrayOfInts[intList.indexOf(e)]);","title":"How can I convert int[] to Integer[] in Java?","body":"<p>the easiest way to do it:</p>\n<pre><code>int[] arrayOfInts = {1 , 3 , 5 , 6};\n    Integer[] arrayOfObjects = new Integer[arrayOfInts.length];\n    Arrays.setAll(arrayOfInts,\n            i -&gt; arrayOfObjects[i] = arrayOfInts[i]\n            );\n</code></pre>\n<p>and if you want to put it in a List:</p>\n<pre><code>int[] arrayOfInts = {1 , 3 , 5 , 6};\n    List&lt;Integer&gt; intList = new ArrayList&lt;&gt;(Collections.nCopies(arrayOfInts.length, 0));\n    intList.replaceAll(e -&gt; arrayOfInts[intList.indexOf(e)]);\n</code></pre>\n"}],"owner":{"display_name":"John"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":274374,"favorite_count":0,"down_vote_count":0,"up_vote_count":213,"answer_count":14,"score":213,"last_activity_date":1698393511,"creation_date":1242696262,"question_id":880581,"body_markdown":"I have a large dataset of length 4 `int[]` and I want to count the number of times that each particular combination of 4 integers occurs.  This is very similar to counting word frequencies in a document.\r\n\r\nI want to create a `Map&lt;int[], double&gt;` that maps each int[] to a running count as the list is iterated over, but Map doesn&#39;t take primitive types.\r\n\r\nSo I made `Map&lt;Integer[], Double&gt;`.\r\n\r\nMy data is stored as an `ArrayList&lt;int[]&gt;`, so my loop should be something like:\r\n\r\n    ArrayList&lt;int[]&gt; data = ... // load a dataset`\r\n\r\n    Map&lt;Integer[], Double&gt; frequencies = new HashMap&lt;Integer[], Double&gt;();\r\n\r\n    for(int[] q : data) {\r\n\r\n        // **DO SOMETHING TO convert q from int[] to Integer[] so I can put it in the map\r\n\r\n        if(frequencies.containsKey(q)) {\r\n        frequencies.put(q, tfs.get(q) + p);\r\n        } else {\r\n            frequencies.put(q, p);\r\n        }\r\n    }\r\n\r\nI&#39;m not sure what code I need at the comment to make this work to convert an `int[]` to an `Integer[]`.  Or maybe I&#39;m fundamentally confused about the right way to do this.\r\n\r\n\r\n","title":"How can I convert int[] to Integer[] in Java?","body":"<p>I have a large dataset of length 4 <code>int[]</code> and I want to count the number of times that each particular combination of 4 integers occurs.  This is very similar to counting word frequencies in a document.</p>\n<p>I want to create a <code>Map&lt;int[], double&gt;</code> that maps each int[] to a running count as the list is iterated over, but Map doesn't take primitive types.</p>\n<p>So I made <code>Map&lt;Integer[], Double&gt;</code>.</p>\n<p>My data is stored as an <code>ArrayList&lt;int[]&gt;</code>, so my loop should be something like:</p>\n<pre><code>ArrayList&lt;int[]&gt; data = ... // load a dataset`\n\nMap&lt;Integer[], Double&gt; frequencies = new HashMap&lt;Integer[], Double&gt;();\n\nfor(int[] q : data) {\n\n    // **DO SOMETHING TO convert q from int[] to Integer[] so I can put it in the map\n\n    if(frequencies.containsKey(q)) {\n    frequencies.put(q, tfs.get(q) + p);\n    } else {\n        frequencies.put(q, p);\n    }\n}\n</code></pre>\n<p>I'm not sure what code I need at the comment to make this work to convert an <code>int[]</code> to an <code>Integer[]</code>.  Or maybe I'm fundamentally confused about the right way to do this.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":11683,"reputation":1438131,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":4,"creation_date":1697957851,"post_id":77338942,"comment_id":136342884,"body_markdown":"Well, you&#39;re trying to print character number 8 (0-based, so actually the 9th character) from a string which only has 4 characters (hii&#39;). It&#39;s unclear to me what output you expected.","body":"Well, you&#39;re trying to print character number 8 (0-based, so actually the 9th character) from a string which only has 4 characters (hii&#39;). It&#39;s unclear to me what output you expected."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":1,"creation_date":1697957996,"post_id":77338942,"comment_id":136342894,"body_markdown":"Check if `i` is within the range of characters in the string. Loop if it&#39;s not, and you want the user to try again.","body":"Check if <code>i</code> is within the range of characters in the string. Loop if it&#39;s not, and you want the user to try again."}],"answers":[{"tags":[],"owner":{"account_id":23624871,"reputation":352,"user_id":17657568,"display_name":"AMZ"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698393476,"creation_date":1697959305,"answer_id":77339011,"question_id":77338942,"body_markdown":"You can do like this :\r\n\r\n    Scanner sc = new Scanner(System.in);\r\n\r\n        System.out.print(&quot;Enter string : &quot;);\r\n        String str = sc.next();\r\n        int i;\r\n        while (true) {\r\n            i = sc.nextInt();\r\n        //you can handle floating point and very big numbers as well \r\n            if (i &gt;= str.length() &amp;&amp; i &gt; -1)\r\n                System.out.println(&quot;Enter a valid index : &quot;);\r\n            else break;\r\n        }\r\n        System.out.println(&quot;Char at &quot; + i + &quot; is &quot; + str.charAt(i));","title":"What is the correct way to take input as a string. I want to print a character at &#39;i&#39; which is entered by user","body":"<p>You can do like this :</p>\n<pre><code>Scanner sc = new Scanner(System.in);\n\n    System.out.print(&quot;Enter string : &quot;);\n    String str = sc.next();\n    int i;\n    while (true) {\n        i = sc.nextInt();\n    //you can handle floating point and very big numbers as well \n        if (i &gt;= str.length() &amp;&amp; i &gt; -1)\n            System.out.println(&quot;Enter a valid index : &quot;);\n        else break;\n    }\n    System.out.println(&quot;Char at &quot; + i + &quot; is &quot; + str.charAt(i));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310744,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697990615,"creation_date":1697960519,"answer_id":77339074,"question_id":77338942,"body_markdown":"The code in [Answer by AMZ][1] is correct for some strings, but fails with most characters. For example, try `&quot;&#128567;&quot;.length()`. \r\n\r\nInstead of using `char`, use [code point][2] integer numbers.\r\n\r\nThe key to solving your problem is validating your user’s input: Did the user input a position number that is not too small or too large?\r\n\r\n    System.out.print(&quot;Enter string : &quot;);\r\n    String s = sc.next();\r\n    System.out.print(&quot;Enter the position of desired character : &quot;);\r\n    int position ;\r\n    while (true) {\r\n        i = sc.nextInt();\r\n        if ( ( position &lt; 1 ) || ( position &gt; s.codePoints().count() ) )\r\n            System.out.println( &quot;Enter a valid position number : &quot; );\r\n        else break;\r\n    }\r\n    int codePoint = s.codePoints().toArray()[ position - 1 ] ;  // Subtract one for annoying zero-based index number. \r\n    String result = Character.toString( codePoint ) ;\r\n    System.out.println(&quot;Character at position &quot; + position + &quot; is &quot; + result );\r\n\r\n\r\n----------\r\n\r\n\r\nAlso, be aware that what appears to be a single character may actually be a composite of several. For example, what appears to be a single emoji character of a human hand may actually be composed of multiple characters that act as modifiers to indicate a particular skin tone. Text-handling is a tricky subject. \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77339011/642706\r\n  [2]: https://en.wikipedia.org/wiki/Code_point","title":"What is the correct way to take input as a string. I want to print a character at &#39;i&#39; which is entered by user","body":"<p>The code in <a href=\"https://stackoverflow.com/a/77339011/642706\">Answer by AMZ</a> is correct for some strings, but fails with most characters. For example, try <code>&quot;😷&quot;.length()</code>.</p>\n<p>Instead of using <code>char</code>, use <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers.</p>\n<p>The key to solving your problem is validating your user’s input: Did the user input a position number that is not too small or too large?</p>\n<pre><code>System.out.print(&quot;Enter string : &quot;);\nString s = sc.next();\nSystem.out.print(&quot;Enter the position of desired character : &quot;);\nint position ;\nwhile (true) {\n    i = sc.nextInt();\n    if ( ( position &lt; 1 ) || ( position &gt; s.codePoints().count() ) )\n        System.out.println( &quot;Enter a valid position number : &quot; );\n    else break;\n}\nint codePoint = s.codePoints().toArray()[ position - 1 ] ;  // Subtract one for annoying zero-based index number. \nString result = Character.toString( codePoint ) ;\nSystem.out.println(&quot;Character at position &quot; + position + &quot; is &quot; + result );\n</code></pre>\n<hr />\n<p>Also, be aware that what appears to be a single character may actually be a composite of several. For example, what appears to be a single emoji character of a human hand may actually be composed of multiple characters that act as modifiers to indicate a particular skin tone. Text-handling is a tricky subject.</p>\n"}],"owner":{"account_id":29650742,"reputation":11,"user_id":22724704,"display_name":"Varun Tripathti"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1697968467,"answer_count":2,"score":-2,"last_activity_date":1698393476,"creation_date":1697957566,"question_id":77338942,"body_markdown":"The output and error my code is showing:\r\n\r\n```none\r\nEnter string : hii&#39;\r\n\r\n8\r\nException in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: Index 8 out of bounds for length 4\r\n\tat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)\r\n\tat java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)\r\n\tat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)\r\n\tat java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\r\n\tat java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)\r\n\tat java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)\r\n\tat java.base/java.lang.String.checkIndex(String.java:4828)\r\n\tat java.base/java.lang.StringLatin1.charAt(StringLatin1.java:46)\r\n\tat java.base/java.lang.String.charAt(String.java:1555)\r\n\tat string_methods.main(string_methods.java:9)\r\n\r\nProcess finished with exit code 1\r\n```\r\n\r\nSuggest me the corrections and also please explain why this error occurred. My code:\r\n\r\n```java\r\nimport java.util.Scanner;\r\n\r\npublic class string_methods {\r\n\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n\r\n        System.out.print(&quot;Enter string : &quot;);\r\n        String str = sc.next();\r\n        int i = sc.nextInt();\r\n        System.out.println(&quot;Char at &quot;+i+&quot; is &quot;+str.charAt(i));\r\n    }\r\n}\r\n```","title":"What is the correct way to take input as a string. I want to print a character at &#39;i&#39; which is entered by user","body":"<p>The output and error my code is showing:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter string : hii'\n\n8\nException in thread &quot;main&quot; java.lang.StringIndexOutOfBoundsException: Index 8 out of bounds for length 4\n    at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)\n    at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)\n    at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)\n    at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)\n    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)\n    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:106)\n    at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:302)\n    at java.base/java.lang.String.checkIndex(String.java:4828)\n    at java.base/java.lang.StringLatin1.charAt(StringLatin1.java:46)\n    at java.base/java.lang.String.charAt(String.java:1555)\n    at string_methods.main(string_methods.java:9)\n\nProcess finished with exit code 1\n</code></pre>\n<p>Suggest me the corrections and also please explain why this error occurred. My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\n\npublic class string_methods {\n\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n\n        System.out.print(&quot;Enter string : &quot;);\n        String str = sc.next();\n        int i = sc.nextInt();\n        System.out.println(&quot;Char at &quot;+i+&quot; is &quot;+str.charAt(i));\n    }\n}\n</code></pre>\n"},{"tags":["java","multithreading","java-stream","quarkus","open-telemetry"],"answers":[{"tags":[],"owner":{"account_id":5621681,"reputation":229,"user_id":6935180,"display_name":"Bruno Baptista"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698393474,"creation_date":1698393474,"answer_id":77372409,"question_id":77367565,"body_markdown":"This will happen because that piece of code uses the unmanaged ForkJoinPool to execute the tasks.\r\nIf you use a managed executor, that context propagation is handled by the framework.\r\n\r\nSee: https://quarkus.io/guides/context-propagation#sharing-configured-cdi-instances-of-managedexecutor-and-threadcontext\r\n\r\nMoreover, it&#39;s not recommended to use `sampleList.parallelStream().*` in a managed framework like Quarkus (and many others) because the ForkJoinPool is a limited shared resource. You should create your own executor services for your business logic. \r\n","title":"Quarkus Opentelemetry Context","body":"<p>This will happen because that piece of code uses the unmanaged ForkJoinPool to execute the tasks.\nIf you use a managed executor, that context propagation is handled by the framework.</p>\n<p>See: <a href=\"https://quarkus.io/guides/context-propagation#sharing-configured-cdi-instances-of-managedexecutor-and-threadcontext\" rel=\"nofollow noreferrer\">https://quarkus.io/guides/context-propagation#sharing-configured-cdi-instances-of-managedexecutor-and-threadcontext</a></p>\n<p>Moreover, it's not recommended to use <code>sampleList.parallelStream().*</code> in a managed framework like Quarkus (and many others) because the ForkJoinPool is a limited shared resource. You should create your own executor services for your business logic.</p>\n"}],"owner":{"account_id":18044566,"reputation":101,"user_id":13115896,"display_name":"sg2000"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698393474,"creation_date":1698328062,"question_id":77367565,"body_markdown":"The opentelemetry context is bound to the running thread which means the context needs to be propagated for any new threads being used. However, i am trying to see how the below code works:\r\n\r\nsampleList.parallelStream().foreach(e -&gt; e.process()); // example code\r\n\r\nhere the span on the process method is coming up as a separate trace as it&#39;s in a different thread. the only way to make it work is by adding a parentContext.makeCurrent() code around it. I feel this is a bit clumsy. Any ideas/suggestions on how to propagate the context without having to explicitly do it?\r\n\r\nThank you\r\nSG","title":"Quarkus Opentelemetry Context","body":"<p>The opentelemetry context is bound to the running thread which means the context needs to be propagated for any new threads being used. However, i am trying to see how the below code works:</p>\n<p>sampleList.parallelStream().foreach(e -&gt; e.process()); // example code</p>\n<p>here the span on the process method is coming up as a separate trace as it's in a different thread. the only way to make it work is by adding a parentContext.makeCurrent() code around it. I feel this is a bit clumsy. Any ideas/suggestions on how to propagate the context without having to explicitly do it?</p>\n<p>Thank you\nSG</p>\n"},{"tags":["java","environment","endpoint","spring-cloud-config","spring-cloud-config-server"],"owner":{"account_id":2325075,"reputation":29,"user_id":2039781,"display_name":"Valeriy Blyus"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":28,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698393166,"creation_date":1698392829,"question_id":77372349,"body_markdown":"I have a Java Spring config client application (&quot;A&quot;) that works with my config server (&quot;B&quot;). I also have an application.yaml configuration file in project &quot;A&quot;. If the contents of the application.yaml file are:\r\n```\r\nspring:\r\n&#160;config:\r\n&#160;&#160;import: configserver:http://localhost:8080/config\r\n&#160;&#160;activate:\r\n&#160;&#160;&#160;on-profile: useConfigServer\r\n&#160;cloud:\r\n&#160;&#160;config:\r\n&#160;&#160;&#160;enabled: true\r\n```\r\nEverything works perfectly. However, if I try to set the import property with my custom actuator endpoint in &quot;B&quot; like this:\r\n```\r\nspring:\r\n&#160;config:\r\n&#160;&#160;import: configserver:http://config-server-1-9-int/actuator/getconfigurations/proxy-gw-1-8-c78d88cbf-nfbh4/proxy-gw/useConfigServer,dev\r\n```\r\n\r\nI am getting an exception:\r\n```\r\n[main] ERROR org.springframework.boot.SpringApplication - Application run failed\r\njava.lang.IllegalStateException: Unable to load config data from &#39;dev&#39;\r\n\tat org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferences(StandardConfigDataLocationResolver.java:141)\r\n\tat org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferences(StandardConfigDataLocationResolver.java:126)\r\n\tat org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:119)\r\n\tat org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$1(ConfigDataLocationResolvers.java:115)\r\n\tat org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:126)\r\n\tat org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:115)\r\n\tat org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:107)\r\n\tat org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:105)\r\n\tat org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:97)\r\n\tat org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:85)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:116)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:311)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:232)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:102)\r\n\tat org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:94)\r\n\tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:102)\r\n\tat org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:87)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\r\n\tat org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\r\n\tat org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\r\n\tat java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\r\n\tat org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\r\n\tat org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:343)\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:301)\r\n\tat org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:164)\r\n\tat com.poalim.modernization.infra.Application.main(Application.java:34)\r\nCaused by: java.lang.IllegalStateException: File extension is not known to any PropertySourceLoader. If the location is meant to reference a directory, it must end in &#39;/&#39; or File.separator\r\n\tat org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferencesForFile(StandardConfigDataLocationResolver.java:229)\r\n\tat org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferences(StandardConfigDataLocationResolver.java:138)\r\n\t... 30 common frames omitted\r\n\r\nProcess finished with exit code 1\r\n```\r\nAnd in this case, the actuator endpoint in &quot;B&quot; is not accessed (during debugging). Please pay attention to the fact that if I perform a REST request from &quot;A&quot; to &quot;B&quot; to the address http://config-server-1-9-int/actuator/getconfigurations/proxy-gw-1-8-c78d88cbf-nfbh4/proxy-gw/useConfigServer,dev, everything works perfectly, and I get the Environment object (configurations) in response.\r\n\r\napplication.yaml in config server &quot;B&quot;:\r\n```\r\nspring:\r\n  application:\r\n    name: config-server\r\n  cloud:\r\n    config:\r\n      server:\r\n        health:\r\n          enabled: false\r\n        prefix: /config\r\n```\r\n\r\nI also tried to change the prefix in all of the combinations.\r\n\r\n\r\nActuator endpoint in config-server &quot;B&quot;:\r\n```\r\n@Component\r\n@Endpoint(id = &quot;getconfigurations&quot;)\r\n@RequiredArgsConstructor\r\npublic class GetConfigurationsEndpoint {\r\n    private final RefreshConfigsManagementService refreshConfigsManagementService;\r\n\r\n    @ReadOperation\r\n//        (produces = EnvironmentMediaType.V2_JSON)\r\n    public Environment getConfigurations(@Selector String podId, @Selector String serviceName, @Selector String profilesList) {\r\n\r\n\r\n\r\n        return refreshConfigsManagementService.getConfigurations(\r\n            PodId.builder()\r\n                .id(podId)\r\n                .service(serviceName)\r\n                .profilesList(profilesList)\r\n                .build()\r\n        );\r\n    }\r\n\r\n}\r\n```\r\nThat&#39;s works perfect if I perform REST request.\r\n\r\nThe exception thrown from org.springframework.boot.context.config.StandardConfigDataLocationResolver:\r\n\r\n&gt; \tprivate Set&lt;StandardConfigDataReference&gt;\r\n&gt; getReferencesForFile(ConfigDataLocation configDataLocation, String\r\n&gt; file, \t\t\tString profile) { \t\tMatcher extensionHintMatcher =\r\n&gt; EXTENSION_HINT_PATTERN.matcher(file); \t\tboolean extensionHintLocation\r\n&gt; = extensionHintMatcher.matches(); \t\tif (extensionHintLocation) { \t\t\tfile = extensionHintMatcher.group(1) +\r\n&gt; extensionHintMatcher.group(2); \t\t} \t\tfor (PropertySourceLoader\r\n&gt; propertySourceLoader : this.propertySourceLoaders) { \t\t\tString\r\n&gt; extension = getLoadableFileExtension(propertySourceLoader, file);\r\n&gt; \t\t\tif (extension != null) {\r\n&gt; \t\t\t\tString root = file.substring(0, file.length() - extension.length() - 1);\r\n&gt; \t\t\t\tStandardConfigDataReference reference = new StandardConfigDataReference(configDataLocation, null, root,\r\n&gt; \t\t\t\t\t\tprofile, (!extensionHintLocation) ? extension : null, propertySourceLoader);\r\n&gt; \t\t\t\treturn Collections.singleton(reference); \t\t\t} \t\t} \t\tthrow new IllegalStateException(&quot;File extension is not known to any\r\n&gt; PropertySourceLoader. &quot;\r\n&gt; \t\t\t\t+ &quot;If the location is meant to reference a directory, it must end in &#39;/&#39; or File.separator&quot;); \t}\r\n\r\nDebugger is accessing this method only when I trying to make spring access to the actuator endpoint on application loading. I need that because I need to know in my config-server which application is accessing. In my company rest requests network is only option at this moment. I can&#39;t use KAFKA or RabbitMq or something else.\r\n\r\nBest Regards,\r\nPlease help❤✌ \r\n\r\n\r\n\r\n","title":"Java Spring cloud config client and config server. custom link to actuator endpoint","body":"<p>I have a Java Spring config client application (&quot;A&quot;) that works with my config server (&quot;B&quot;). I also have an application.yaml configuration file in project &quot;A&quot;. If the contents of the application.yaml file are:</p>\n<pre><code>spring:\n config:\n  import: configserver:http://localhost:8080/config\n  activate:\n   on-profile: useConfigServer\n cloud:\n  config:\n   enabled: true\n</code></pre>\n<p>Everything works perfectly. However, if I try to set the import property with my custom actuator endpoint in &quot;B&quot; like this:</p>\n<pre><code>spring:\n config:\n  import: configserver:http://config-server-1-9-int/actuator/getconfigurations/proxy-gw-1-8-c78d88cbf-nfbh4/proxy-gw/useConfigServer,dev\n</code></pre>\n<p>I am getting an exception:</p>\n<pre><code>[main] ERROR org.springframework.boot.SpringApplication - Application run failed\njava.lang.IllegalStateException: Unable to load config data from 'dev'\n    at org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferences(StandardConfigDataLocationResolver.java:141)\n    at org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferences(StandardConfigDataLocationResolver.java:126)\n    at org.springframework.boot.context.config.StandardConfigDataLocationResolver.resolve(StandardConfigDataLocationResolver.java:119)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.lambda$resolve$1(ConfigDataLocationResolvers.java:115)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:126)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:115)\n    at org.springframework.boot.context.config.ConfigDataLocationResolvers.resolve(ConfigDataLocationResolvers.java:107)\n    at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:105)\n    at org.springframework.boot.context.config.ConfigDataImporter.resolve(ConfigDataImporter.java:97)\n    at org.springframework.boot.context.config.ConfigDataImporter.resolveAndLoad(ConfigDataImporter.java:85)\n    at org.springframework.boot.context.config.ConfigDataEnvironmentContributors.withProcessedImports(ConfigDataEnvironmentContributors.java:116)\n    at org.springframework.boot.context.config.ConfigDataEnvironment.processWithProfiles(ConfigDataEnvironment.java:311)\n    at org.springframework.boot.context.config.ConfigDataEnvironment.processAndApply(ConfigDataEnvironment.java:232)\n    at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:102)\n    at org.springframework.boot.context.config.ConfigDataEnvironmentPostProcessor.postProcessEnvironment(ConfigDataEnvironmentPostProcessor.java:94)\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEnvironmentPreparedEvent(EnvironmentPostProcessorApplicationListener.java:102)\n    at org.springframework.boot.env.EnvironmentPostProcessorApplicationListener.onApplicationEvent(EnvironmentPostProcessorApplicationListener.java:87)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:176)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:169)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:143)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:131)\n    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:85)\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$environmentPrepared$2(SpringApplicationRunListeners.java:66)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:120)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:114)\n    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:65)\n    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:343)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:301)\n    at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:164)\n    at com.poalim.modernization.infra.Application.main(Application.java:34)\nCaused by: java.lang.IllegalStateException: File extension is not known to any PropertySourceLoader. If the location is meant to reference a directory, it must end in '/' or File.separator\n    at org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferencesForFile(StandardConfigDataLocationResolver.java:229)\n    at org.springframework.boot.context.config.StandardConfigDataLocationResolver.getReferences(StandardConfigDataLocationResolver.java:138)\n    ... 30 common frames omitted\n\nProcess finished with exit code 1\n</code></pre>\n<p>And in this case, the actuator endpoint in &quot;B&quot; is not accessed (during debugging). Please pay attention to the fact that if I perform a REST request from &quot;A&quot; to &quot;B&quot; to the address http://config-server-1-9-int/actuator/getconfigurations/proxy-gw-1-8-c78d88cbf-nfbh4/proxy-gw/useConfigServer,dev, everything works perfectly, and I get the Environment object (configurations) in response.</p>\n<p>application.yaml in config server &quot;B&quot;:</p>\n<pre><code>spring:\n  application:\n    name: config-server\n  cloud:\n    config:\n      server:\n        health:\n          enabled: false\n        prefix: /config\n</code></pre>\n<p>I also tried to change the prefix in all of the combinations.</p>\n<p>Actuator endpoint in config-server &quot;B&quot;:</p>\n<pre><code>@Component\n@Endpoint(id = &quot;getconfigurations&quot;)\n@RequiredArgsConstructor\npublic class GetConfigurationsEndpoint {\n    private final RefreshConfigsManagementService refreshConfigsManagementService;\n\n    @ReadOperation\n//        (produces = EnvironmentMediaType.V2_JSON)\n    public Environment getConfigurations(@Selector String podId, @Selector String serviceName, @Selector String profilesList) {\n\n\n\n        return refreshConfigsManagementService.getConfigurations(\n            PodId.builder()\n                .id(podId)\n                .service(serviceName)\n                .profilesList(profilesList)\n                .build()\n        );\n    }\n\n}\n</code></pre>\n<p>That's works perfect if I perform REST request.</p>\n<p>The exception thrown from org.springframework.boot.context.config.StandardConfigDataLocationResolver:</p>\n<blockquote>\n<p>private Set\ngetReferencesForFile(ConfigDataLocation configDataLocation, String\nfile,             String profile) {       Matcher extensionHintMatcher =\nEXTENSION_HINT_PATTERN.matcher(file);         boolean extensionHintLocation\n= extensionHintMatcher.matches();         if (extensionHintLocation) {            file = extensionHintMatcher.group(1) +\nextensionHintMatcher.group(2);        }       for (PropertySourceLoader\npropertySourceLoader : this.propertySourceLoaders) {          String\nextension = getLoadableFileExtension(propertySourceLoader, file);\nif (extension != null) {\nString root = file.substring(0, file.length() - extension.length() - 1);\nStandardConfigDataReference reference = new StandardConfigDataReference(configDataLocation, null, root,\nprofile, (!extensionHintLocation) ? extension : null, propertySourceLoader);\nreturn Collections.singleton(reference);            }       }       throw new IllegalStateException(&quot;File extension is not known to any\nPropertySourceLoader. &quot;\n+ &quot;If the location is meant to reference a directory, it must end in '/' or File.separator&quot;);   }</p>\n</blockquote>\n<p>Debugger is accessing this method only when I trying to make spring access to the actuator endpoint on application loading. I need that because I need to know in my config-server which application is accessing. In my company rest requests network is only option at this moment. I can't use KAFKA or RabbitMq or something else.</p>\n<p>Best Regards,\nPlease help❤✌</p>\n"},{"tags":["java","spring","spring-boot","graphql","spring-boot-starter-graphql"],"answers":[{"tags":[],"owner":{"account_id":4530531,"reputation":147,"user_id":3681158,"display_name":"purzel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698392999,"creation_date":1698392999,"answer_id":77372358,"question_id":77358796,"body_markdown":"I have finally found a solution to avoid FetchType.EAGER.\r\n\r\nIn the GraphQL controller I add a method with @SchemaMapping which allows me to create custom mappings on defined fields within a GraphQL type. This fulfills all my requirements since the @SchemaMapping annotated mapper method will not be called if the GraphQL client does not request any programs in the response.\r\n\r\n```java\r\n/*\r\n * This annotation allows me to create a custom maping.\r\n * The typename is the typename that you find in the graphql schema,\r\n * whereas the field is the field name you wish to apply it on.\r\n */\r\n@SchemaMapping(typeName = &quot;VideoMedia&quot;, field = &quot;programs&quot;)\r\npublic Set&lt;Program&gt; programs(VideoMedia videoMedia) {\r\n    return programService.findAllProgramsByVideoMedia(videoMedia);\r\n}\r\n```","title":"Spring Boot Starter GraphQL LazyInitializationException","body":"<p>I have finally found a solution to avoid FetchType.EAGER.</p>\n<p>In the GraphQL controller I add a method with @SchemaMapping which allows me to create custom mappings on defined fields within a GraphQL type. This fulfills all my requirements since the @SchemaMapping annotated mapper method will not be called if the GraphQL client does not request any programs in the response.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n * This annotation allows me to create a custom maping.\n * The typename is the typename that you find in the graphql schema,\n * whereas the field is the field name you wish to apply it on.\n */\n@SchemaMapping(typeName = &quot;VideoMedia&quot;, field = &quot;programs&quot;)\npublic Set&lt;Program&gt; programs(VideoMedia videoMedia) {\n    return programService.findAllProgramsByVideoMedia(videoMedia);\n}\n</code></pre>\n"}],"owner":{"account_id":4530531,"reputation":147,"user_id":3681158,"display_name":"purzel"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77372358,"answer_count":1,"score":0,"last_activity_date":1698392999,"creation_date":1698230882,"question_id":77358796,"body_markdown":"I am currently implementing GraphQL into a system and am using Spring Boot 3.0.5 together with `org.springframework.boot:spring-boot-starter-graphql` to implement GraphQL schemas and queries. However there is a query that has issues.\r\n\r\nThe relevant JPA entities:\r\n```java\r\n@Entity\r\npublic class Video {\r\n\r\n    @Id\r\n    @Column(length = 24, nullable = false)\r\n    private String videoId;\r\n\r\n    @ManyToMany(mappedBy = &quot;video&quot;)\r\n    private Set&lt;Program&gt; programs = new HashSet&lt;&gt;();\r\n\r\n    @PreRemove\r\n    private void removeProgramAssociation() {\r\n        if (programs != null) {\r\n            for (Program program : this.programs) {\r\n                program.getVideo().remove(this);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\r\n@Entity\r\npublic class Program extends Auditable {\r\n\r\n    @Id\r\n    @Column(length = 50)\r\n    private String programId;\r\n\r\n    @ManyToMany(fetch = FetchType.EAGER,\r\n            cascade = {\r\n                    CascadeType.DETACH,\r\n                    CascadeType.MERGE,\r\n                    CascadeType.REFRESH,\r\n                    CascadeType.PERSIST})\r\n    @JoinTable(\r\n            name = &quot;video_program&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;programId&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;videoId&quot;)\r\n    )\r\n    @ToString.Exclude\r\n    @EqualsAndHashCode.Exclude\r\n    private Set&lt;Video&gt; video;\r\n\r\n}\r\n```\r\n\r\nWhen executing the following query we receive a `org.hibernate.LazyInitializationException` because program can not be loaded directly.\r\n```graphql\r\nquery videoMedia {\r\n    video {\r\n        materialId\r\n        programs {\r\n            programId\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nI am aware that setting FetchType.EAGER for Video.program is a possible solution to avoid the exception, however I would rather explore other options before giving in. The only other question or link I was able to find was https://stackoverflow.com/a/48046402/3681158 which unfortunately seems to no longer be valid in Spring Boot 3.0.5 due to class name changes.","title":"Spring Boot Starter GraphQL LazyInitializationException","body":"<p>I am currently implementing GraphQL into a system and am using Spring Boot 3.0.5 together with <code>org.springframework.boot:spring-boot-starter-graphql</code> to implement GraphQL schemas and queries. However there is a query that has issues.</p>\n<p>The relevant JPA entities:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\npublic class Video {\n\n    @Id\n    @Column(length = 24, nullable = false)\n    private String videoId;\n\n    @ManyToMany(mappedBy = &quot;video&quot;)\n    private Set&lt;Program&gt; programs = new HashSet&lt;&gt;();\n\n    @PreRemove\n    private void removeProgramAssociation() {\n        if (programs != null) {\n            for (Program program : this.programs) {\n                program.getVideo().remove(this);\n            }\n        }\n    }\n}\n\n\n@Entity\npublic class Program extends Auditable {\n\n    @Id\n    @Column(length = 50)\n    private String programId;\n\n    @ManyToMany(fetch = FetchType.EAGER,\n            cascade = {\n                    CascadeType.DETACH,\n                    CascadeType.MERGE,\n                    CascadeType.REFRESH,\n                    CascadeType.PERSIST})\n    @JoinTable(\n            name = &quot;video_program&quot;,\n            joinColumns = @JoinColumn(name = &quot;programId&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;videoId&quot;)\n    )\n    @ToString.Exclude\n    @EqualsAndHashCode.Exclude\n    private Set&lt;Video&gt; video;\n\n}\n</code></pre>\n<p>When executing the following query we receive a <code>org.hibernate.LazyInitializationException</code> because program can not be loaded directly.</p>\n<pre><code>query videoMedia {\n    video {\n        materialId\n        programs {\n            programId\n        }\n    }\n}\n</code></pre>\n<p>I am aware that setting FetchType.EAGER for Video.program is a possible solution to avoid the exception, however I would rather explore other options before giving in. The only other question or link I was able to find was <a href=\"https://stackoverflow.com/a/48046402/3681158\">https://stackoverflow.com/a/48046402/3681158</a> which unfortunately seems to no longer be valid in Spring Boot 3.0.5 due to class name changes.</p>\n"},{"tags":["java","intellij-idea","colors","syntax-highlighting","intellij-plugin"],"comments":[{"owner":{"account_id":24517308,"reputation":401,"user_id":18430882,"display_name":"quickfix"},"score":0,"creation_date":1664800033,"post_id":73925462,"comment_id":130547093,"body_markdown":"Not possible in IDEA itself as it has only &#39;Escape sequence&#39;, &#39;Highlighted reference&#39; and &#39;String&#39; in&#39; Preferences | Editor | Color Scheme | Language Defaults | String. There are highlight plugins (Preferences | Plugins | Marketplace), but I don&#39;t see the one which can do what you need - some plugin which can highlight based on a regex. As a manual workaround, you can use regex in a search field, see https://www.jetbrains.com/help/idea/tutorial-finding-and-replacing-text-using-regular-expressions.html","body":"Not possible in IDEA itself as it has only &#39;Escape sequence&#39;, &#39;Highlighted reference&#39; and &#39;String&#39; in&#39; Preferences | Editor | Color Scheme | Language Defaults | String. There are highlight plugins (Preferences | Plugins | Marketplace), but I don&#39;t see the one which can do what you need - some plugin which can highlight based on a regex. As a manual workaround, you can use regex in a search field, see <a href=\"https://www.jetbrains.com/help/idea/tutorial-finding-and-replacing-text-using-regular-expressions.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>"},{"owner":{"account_id":16379082,"reputation":355,"user_id":11830541,"display_name":"Serhii Kachan"},"score":0,"creation_date":1664813452,"post_id":73925462,"comment_id":130551778,"body_markdown":"This is possible by writing own plugin. As an example it could be SQL language injection. Or JSON language injection. My purpose is very easy because my input string doesn&#39;t have any structure of statement. The problem is that I haven&#39;t found any references or code examples to achieve smth similar.","body":"This is possible by writing own plugin. As an example it could be SQL language injection. Or JSON language injection. My purpose is very easy because my input string doesn&#39;t have any structure of statement. The problem is that I haven&#39;t found any references or code examples to achieve smth similar."}],"answers":[{"tags":[],"owner":{"account_id":6022505,"reputation":3558,"user_id":4729203,"accept_rate":88,"display_name":"wonsuc"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698392138,"creation_date":1698392138,"answer_id":77372265,"question_id":73925462,"body_markdown":"Check [this][1] and [this][2] out. \r\n\r\nHere is the sample codes from the link. \r\n\r\n```\r\nfinal class SimpleAnnotator implements Annotator {\r\n\r\n  // Define strings for the Simple language prefix - used for annotations, line markers, etc.\r\n  public static final String SIMPLE_PREFIX_STR = &quot;simple&quot;;\r\n  public static final String SIMPLE_SEPARATOR_STR = &quot;:&quot;;\r\n\r\n  @Override\r\n  public void annotate(@NotNull final PsiElement element, @NotNull AnnotationHolder holder) {\r\n    // Ensure the PSI Element is an expression\r\n    if (!(element instanceof PsiLiteralExpression literalExpression)) {\r\n      return;\r\n    }\r\n\r\n    // Ensure the Psi element contains a string that starts with the prefix and separator\r\n    String value = literalExpression.getValue() instanceof String ? (String) literalExpression.getValue() : null;\r\n    if (value == null || !value.startsWith(SIMPLE_PREFIX_STR + SIMPLE_SEPARATOR_STR)) {\r\n      return;\r\n    }\r\n\r\n    // Define the text ranges (start is inclusive, end is exclusive)\r\n    // &quot;simple:key&quot;\r\n    //  01234567890\r\n    TextRange prefixRange = TextRange.from(element.getTextRange().getStartOffset(), SIMPLE_PREFIX_STR.length() + 1);\r\n    TextRange separatorRange = TextRange.from(prefixRange.getEndOffset(), SIMPLE_SEPARATOR_STR.length());\r\n    TextRange keyRange = new TextRange(separatorRange.getEndOffset(), element.getTextRange().getEndOffset() - 1);\r\n\r\n    // highlight &quot;simple&quot; prefix and &quot;:&quot; separator\r\n    holder.newSilentAnnotation(HighlightSeverity.INFORMATION)\r\n        .range(prefixRange).textAttributes(DefaultLanguageHighlighterColors.KEYWORD).create();\r\n    holder.newSilentAnnotation(HighlightSeverity.INFORMATION)\r\n        .range(separatorRange).textAttributes(SimpleSyntaxHighlighter.SEPARATOR).create();\r\n\r\n\r\n    // Get the list of properties for given key\r\n    String key = value.substring(SIMPLE_PREFIX_STR.length() + SIMPLE_SEPARATOR_STR.length());\r\n    List&lt;SimpleProperty&gt; properties = SimpleUtil.findProperties(element.getProject(), key);\r\n    if (properties.isEmpty()) {\r\n      holder.newAnnotation(HighlightSeverity.ERROR, &quot;Unresolved property&quot;)\r\n          .range(keyRange)\r\n          .highlightType(ProblemHighlightType.LIKE_UNKNOWN_SYMBOL)\r\n          // ** Tutorial step 19. - Add a quick fix for the string containing possible properties\r\n          .withFix(new SimpleCreatePropertyQuickFix(key))\r\n          .create();\r\n    } else {\r\n      // Found at least one property, force the text attributes to Simple syntax value character\r\n      holder.newSilentAnnotation(HighlightSeverity.INFORMATION)\r\n          .range(keyRange).textAttributes(SimpleSyntaxHighlighter.VALUE).create();\r\n    }\r\n  }\r\n\r\n}\r\n```\r\n\r\nYou can also use [LivePlugin][3] or [Flora][4] without creating new plugin. \r\n\r\n\r\n  [1]: https://plugins.jetbrains.com/docs/intellij/syntax-highlighting-and-error-highlighting.html#annotator\r\n  [2]: https://plugins.jetbrains.com/docs/intellij/annotator.html\r\n  [3]: https://plugins.jetbrains.com/plugin/7282-liveplugin\r\n  [4]: https://plugins.jetbrains.com/plugin/17669-flora-beta-","title":"Intellij IDEA custom language plugin - highlight numbers in string parameter of a method","body":"<p>Check <a href=\"https://plugins.jetbrains.com/docs/intellij/syntax-highlighting-and-error-highlighting.html#annotator\" rel=\"nofollow noreferrer\">this</a> and <a href=\"https://plugins.jetbrains.com/docs/intellij/annotator.html\" rel=\"nofollow noreferrer\">this</a> out.</p>\n<p>Here is the sample codes from the link.</p>\n<pre><code>final class SimpleAnnotator implements Annotator {\n\n  // Define strings for the Simple language prefix - used for annotations, line markers, etc.\n  public static final String SIMPLE_PREFIX_STR = &quot;simple&quot;;\n  public static final String SIMPLE_SEPARATOR_STR = &quot;:&quot;;\n\n  @Override\n  public void annotate(@NotNull final PsiElement element, @NotNull AnnotationHolder holder) {\n    // Ensure the PSI Element is an expression\n    if (!(element instanceof PsiLiteralExpression literalExpression)) {\n      return;\n    }\n\n    // Ensure the Psi element contains a string that starts with the prefix and separator\n    String value = literalExpression.getValue() instanceof String ? (String) literalExpression.getValue() : null;\n    if (value == null || !value.startsWith(SIMPLE_PREFIX_STR + SIMPLE_SEPARATOR_STR)) {\n      return;\n    }\n\n    // Define the text ranges (start is inclusive, end is exclusive)\n    // &quot;simple:key&quot;\n    //  01234567890\n    TextRange prefixRange = TextRange.from(element.getTextRange().getStartOffset(), SIMPLE_PREFIX_STR.length() + 1);\n    TextRange separatorRange = TextRange.from(prefixRange.getEndOffset(), SIMPLE_SEPARATOR_STR.length());\n    TextRange keyRange = new TextRange(separatorRange.getEndOffset(), element.getTextRange().getEndOffset() - 1);\n\n    // highlight &quot;simple&quot; prefix and &quot;:&quot; separator\n    holder.newSilentAnnotation(HighlightSeverity.INFORMATION)\n        .range(prefixRange).textAttributes(DefaultLanguageHighlighterColors.KEYWORD).create();\n    holder.newSilentAnnotation(HighlightSeverity.INFORMATION)\n        .range(separatorRange).textAttributes(SimpleSyntaxHighlighter.SEPARATOR).create();\n\n\n    // Get the list of properties for given key\n    String key = value.substring(SIMPLE_PREFIX_STR.length() + SIMPLE_SEPARATOR_STR.length());\n    List&lt;SimpleProperty&gt; properties = SimpleUtil.findProperties(element.getProject(), key);\n    if (properties.isEmpty()) {\n      holder.newAnnotation(HighlightSeverity.ERROR, &quot;Unresolved property&quot;)\n          .range(keyRange)\n          .highlightType(ProblemHighlightType.LIKE_UNKNOWN_SYMBOL)\n          // ** Tutorial step 19. - Add a quick fix for the string containing possible properties\n          .withFix(new SimpleCreatePropertyQuickFix(key))\n          .create();\n    } else {\n      // Found at least one property, force the text attributes to Simple syntax value character\n      holder.newSilentAnnotation(HighlightSeverity.INFORMATION)\n          .range(keyRange).textAttributes(SimpleSyntaxHighlighter.VALUE).create();\n    }\n  }\n\n}\n</code></pre>\n<p>You can also use <a href=\"https://plugins.jetbrains.com/plugin/7282-liveplugin\" rel=\"nofollow noreferrer\">LivePlugin</a> or <a href=\"https://plugins.jetbrains.com/plugin/17669-flora-beta-\" rel=\"nofollow noreferrer\">Flora</a> without creating new plugin.</p>\n"}],"owner":{"account_id":16379082,"reputation":355,"user_id":11830541,"display_name":"Serhii Kachan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1698392138,"creation_date":1664710463,"question_id":73925462,"body_markdown":"Question is pretty straightforward.\r\n\r\nI use Intellij IDEA for coding.\r\nI want my piece of code colored on simple condition.\r\n\r\nI am attaching an image for better reference.\r\n\r\nImagine I have the following code:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nAnd I want this string literal to be highlighted applying the following conditions.\r\n\r\n - numbers (like 123) - be BOLD and BLUE\r\n - string (anything wrapped in &#39;&#39;) - be BOLD and ORANGE\r\n\r\nHow can I achieve this?\r\nI think I need some advises on IDEA plugins or some other way?\r\n\r\n  [1]: https://i.stack.imgur.com/f0v3s.png","title":"Intellij IDEA custom language plugin - highlight numbers in string parameter of a method","body":"<p>Question is pretty straightforward.</p>\n<p>I use Intellij IDEA for coding.\nI want my piece of code colored on simple condition.</p>\n<p>I am attaching an image for better reference.</p>\n<p>Imagine I have the following code:</p>\n<p><a href=\"https://i.stack.imgur.com/f0v3s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f0v3s.png\" alt=\"enter image description here\" /></a></p>\n<p>And I want this string literal to be highlighted applying the following conditions.</p>\n<ul>\n<li>numbers (like 123) - be BOLD and BLUE</li>\n<li>string (anything wrapped in '') - be BOLD and ORANGE</li>\n</ul>\n<p>How can I achieve this?\nI think I need some advises on IDEA plugins or some other way?</p>\n"},{"tags":["java","apache-spark","google-bigquery","apache-spark-sql"],"comments":[{"owner":{"account_id":19741957,"reputation":111,"user_id":14455211,"display_name":"JanOels"},"score":0,"creation_date":1670339594,"post_id":74151492,"comment_id":131850794,"body_markdown":"I&#39;m facing the same problem. Maybe you can add the &#39;google-cloud-dataproc&#39; tag for getting some hints. The connector is developed by the dataproc team (according to Github at least).","body":"I&#39;m facing the same problem. Maybe you can add the &#39;google-cloud-dataproc&#39; tag for getting some hints. The connector is developed by the dataproc team (according to Github at least)."},{"owner":{"account_id":19741957,"reputation":111,"user_id":14455211,"display_name":"JanOels"},"score":0,"creation_date":1670508545,"post_id":74151492,"comment_id":131894816,"body_markdown":"You can use the flag `enableModeCheckForSchemaFields` to disable the comparison of nullable mode in both schema. But the comparison is all in all very strict, there is also an issue about that in [Github](https://github.com/GoogleCloudDataproc/spark-bigquery-connector/issues/830)","body":"You can use the flag <code>enableModeCheckForSchemaFields</code> to disable the comparison of nullable mode in both schema. But the comparison is all in all very strict, there is also an issue about that in <a href=\"https://github.com/GoogleCloudDataproc/spark-bigquery-connector/issues/830\" rel=\"nofollow noreferrer\">Github</a>"}],"owner":{"account_id":12280100,"reputation":131,"user_id":8962015,"accept_rate":14,"display_name":"B-Brennan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":666,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1698391827,"creation_date":1666344050,"question_id":74151492,"body_markdown":"I have created a Dataframe to match the output table in Big Query that I want to write to using Spark.\r\n\r\nThe schema are like so:\r\n\r\nOutput Table:\r\n\r\n     |-- email_id: string (nullable = false)\r\n     |-- src_id: string (nullable = false)\r\n     |-- src_name: string (nullable = false)\r\n     |-- sent_local_time: string (nullable = false)\r\n     |-- participant: array (nullable = true)\r\n     |    |-- element: struct (containsNull = true)\r\n     |    |    |-- participant_type: string (nullable = false)\r\n     |    |    |-- participant_email: string (nullable = false)\r\n     |-- priority: string (nullable = true)\r\n     |-- subject: string (nullable = true)\r\n     |-- insertion_date: string (nullable = false)\r\n     |-- run_date: string (nullable = false)\r\n\r\nAnd my created Dataframe:\r\n\r\n     |-- email_id: string (nullable = false)\r\n     |-- src_id: string (nullable = false)\r\n     |-- src_name: string (nullable = false)\r\n     |-- sent_local_time: string (nullable = false)\r\n     |-- participant: array (nullable = false)\r\n     |    |-- element: struct (containsNull = false)\r\n     |    |    |-- participant_type: string (nullable = false)\r\n     |    |    |-- participant_email: string (nullable = false)\r\n     |-- priority: string (nullable = true)\r\n     |-- subject: string (nullable = false)\r\n     |-- insertion_date: string (nullable = false)\r\n     |-- run_date: string (nullable = false)\r\n\r\nThe only difference visible is that the participant array &#39;element&#39; doesn&#39;t contain null in my Dataframe and &#39;subject&#39; is &#39;nullable=false&#39;. However I&#39;m not sure if that should make a difference.\r\n\r\nI am attempting to write to output table using:\r\n\r\n    dataframe.write().format(&quot;bigquery&quot;)\r\n                    .option(&quot;table&quot;, &quot;output-table&quot;)\r\n                    .option(&quot;writeMethod&quot;, &quot;direct&quot;)\r\n                    .mode(SaveMode.Append)\r\n                    .save();\r\n\r\nHowever this gives me the error:\r\n\r\n    java.lang.IllegalArgumentException: com.google.cloud.bigquery.connector.common.BigQueryConnectorException$InvalidSchemaException: Destination table&#39;s schema is not compatible with dataframe&#39;s schema\r\n\r\nIs there any other things I can check for why Spark wont allow me to write to the output table with my dataframe?\r\n\r\n\r\n**EDIT:** I&#39;ve now - by using a union - created a completely matching schema (nullable states of columns all match) and am still getting the same incompatible schema error as before so I&#39;m stumped. \r\n\r\nOne thing I&#39;ve noted is if I check the Big Query console, some columns appear as DATETIME rather than string. So I&#39;m not sure why they are appearing as string when reading the table in spark. Maybe this is causing the mismatch? ","title":"Destination table&#39;s schema is not compatible with dataframe&#39;s schema - During Spark Bigquery write","body":"<p>I have created a Dataframe to match the output table in Big Query that I want to write to using Spark.</p>\n<p>The schema are like so:</p>\n<p>Output Table:</p>\n<pre><code> |-- email_id: string (nullable = false)\n |-- src_id: string (nullable = false)\n |-- src_name: string (nullable = false)\n |-- sent_local_time: string (nullable = false)\n |-- participant: array (nullable = true)\n |    |-- element: struct (containsNull = true)\n |    |    |-- participant_type: string (nullable = false)\n |    |    |-- participant_email: string (nullable = false)\n |-- priority: string (nullable = true)\n |-- subject: string (nullable = true)\n |-- insertion_date: string (nullable = false)\n |-- run_date: string (nullable = false)\n</code></pre>\n<p>And my created Dataframe:</p>\n<pre><code> |-- email_id: string (nullable = false)\n |-- src_id: string (nullable = false)\n |-- src_name: string (nullable = false)\n |-- sent_local_time: string (nullable = false)\n |-- participant: array (nullable = false)\n |    |-- element: struct (containsNull = false)\n |    |    |-- participant_type: string (nullable = false)\n |    |    |-- participant_email: string (nullable = false)\n |-- priority: string (nullable = true)\n |-- subject: string (nullable = false)\n |-- insertion_date: string (nullable = false)\n |-- run_date: string (nullable = false)\n</code></pre>\n<p>The only difference visible is that the participant array 'element' doesn't contain null in my Dataframe and 'subject' is 'nullable=false'. However I'm not sure if that should make a difference.</p>\n<p>I am attempting to write to output table using:</p>\n<pre><code>dataframe.write().format(&quot;bigquery&quot;)\n                .option(&quot;table&quot;, &quot;output-table&quot;)\n                .option(&quot;writeMethod&quot;, &quot;direct&quot;)\n                .mode(SaveMode.Append)\n                .save();\n</code></pre>\n<p>However this gives me the error:</p>\n<pre><code>java.lang.IllegalArgumentException: com.google.cloud.bigquery.connector.common.BigQueryConnectorException$InvalidSchemaException: Destination table's schema is not compatible with dataframe's schema\n</code></pre>\n<p>Is there any other things I can check for why Spark wont allow me to write to the output table with my dataframe?</p>\n<p><strong>EDIT:</strong> I've now - by using a union - created a completely matching schema (nullable states of columns all match) and am still getting the same incompatible schema error as before so I'm stumped.</p>\n<p>One thing I've noted is if I check the Big Query console, some columns appear as DATETIME rather than string. So I'm not sure why they are appearing as string when reading the table in spark. Maybe this is causing the mismatch?</p>\n"},{"tags":["java","spring-boot","apache-kafka"],"owner":{"account_id":2809636,"reputation":1,"user_id":2416124,"display_name":"user2416124"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698390881,"creation_date":1687319409,"question_id":76519828,"body_markdown":"I am using kafka listener on single partition topic, I have single consumer per pod \r\nand i have 2 pods running ( other being idle consumer).\r\n\r\nWhen my pod restarted for some reason i see KafkaMessageListenerConatiner is trying to commit some offset.i.e 10 i.e (9 consumed +1)\r\n\r\nWhen other consumer(pod) received onPartionAssigned during rebalance it started consuming from 11th (committed +1) offset\r\nideally it should consume from commited offset.\r\n\r\nWhy the last offset commited is not being replayed or how come it is committing next offset when pod restart.\r\n\r\n\r\n\r\nHere is my code and configuration\r\n\r\n\r\n```\r\n@KafkaListener(topics = &quot;#{topicProvider.getOffsetStorageTopicName()}&quot;, idIsGroup = false)\r\n    public void handleMessage(ConsumerRecord&lt;String, String&gt; record, Acknowledgment acknowledgment) {\r\n        try {\r\n            consumeOffsetRecords(record);\r\n            acknowledgment.acknowledge();\r\n        }\r\n        catch (Exception exception) {\r\n            log.error(&quot;Error thrown while consuming message {}, record offset{}&quot;, exception.getMessage(), record.offset());\r\n            acknowledgment.nack(Duration.ofMillis(60000));\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\nconfigs :\r\n\r\n\r\n```\r\n@Bean\r\n    public ConsumerFactory&lt;String, String&gt; consumerFactory(KafkaProperties kafkaProperties, DmpKafkaSecurityService\r\n        dmpKafkaSecurityService, TopicProvider topicProvider) throws DMPException {\r\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\r\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaProperties.getBrokerUrl());\r\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, topicProvider.getOffsetStorageTopicName() + HYPHEN + &quot;restore-tracker&quot;);\r\n        props.put(KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n        props.put(VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\r\n        props.put(ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;);\r\n       \r\n      \r\n        return new DefaultKafkaConsumerFactory&lt;&gt;(props);\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\n```\r\n@Bean\r\n    KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;String, String&gt;&gt; kafkaListenerContainerFactory(ConsumerFactory&lt;String, String&gt; consumerFactory, RestoreStatusTracker restoreStatusTracker) {\r\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory =\r\n            new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\r\n        factory.setConsumerFactory(consumerFactory);\r\n        //single consumer per container\r\n        factory.setConcurrency(1);\r\n        factory.setCommonErrorHandler(errorHandler());\r\n        factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\r\n        factory.getContainerProperties().setCommitLogLevel(LogIfLevelEnabled.Level.INFO);\r\n        factory.getContainerProperties().setConsumerRebalanceListener(restoreStatusTracker);\r\n        return factory;\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\nI want when pod restart it consumer should consume from last record committed.\r\nto maintain atleast once delivery ","title":"offsets are committed even when pods are restarted.(Kafka listener)","body":"<p>I am using kafka listener on single partition topic, I have single consumer per pod\nand i have 2 pods running ( other being idle consumer).</p>\n<p>When my pod restarted for some reason i see KafkaMessageListenerConatiner is trying to commit some offset.i.e 10 i.e (9 consumed +1)</p>\n<p>When other consumer(pod) received onPartionAssigned during rebalance it started consuming from 11th (committed +1) offset\nideally it should consume from commited offset.</p>\n<p>Why the last offset commited is not being replayed or how come it is committing next offset when pod restart.</p>\n<p>Here is my code and configuration</p>\n<pre><code>@KafkaListener(topics = &quot;#{topicProvider.getOffsetStorageTopicName()}&quot;, idIsGroup = false)\n    public void handleMessage(ConsumerRecord&lt;String, String&gt; record, Acknowledgment acknowledgment) {\n        try {\n            consumeOffsetRecords(record);\n            acknowledgment.acknowledge();\n        }\n        catch (Exception exception) {\n            log.error(&quot;Error thrown while consuming message {}, record offset{}&quot;, exception.getMessage(), record.offset());\n            acknowledgment.nack(Duration.ofMillis(60000));\n        }\n    }\n</code></pre>\n<p>configs :</p>\n<pre><code>@Bean\n    public ConsumerFactory&lt;String, String&gt; consumerFactory(KafkaProperties kafkaProperties, DmpKafkaSecurityService\n        dmpKafkaSecurityService, TopicProvider topicProvider) throws DMPException {\n        Map&lt;String, Object&gt; props = new HashMap&lt;&gt;();\n        props.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, kafkaProperties.getBrokerUrl());\n        props.put(ConsumerConfig.GROUP_ID_CONFIG, topicProvider.getOffsetStorageTopicName() + HYPHEN + &quot;restore-tracker&quot;);\n        props.put(KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n        props.put(VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n        props.put(ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;);\n       \n      \n        return new DefaultKafkaConsumerFactory&lt;&gt;(props);\n    }\n</code></pre>\n<pre><code>@Bean\n    KafkaListenerContainerFactory&lt;ConcurrentMessageListenerContainer&lt;String, String&gt;&gt; kafkaListenerContainerFactory(ConsumerFactory&lt;String, String&gt; consumerFactory, RestoreStatusTracker restoreStatusTracker) {\n        ConcurrentKafkaListenerContainerFactory&lt;String, String&gt; factory =\n            new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        factory.setConsumerFactory(consumerFactory);\n        //single consumer per container\n        factory.setConcurrency(1);\n        factory.setCommonErrorHandler(errorHandler());\n        factory.getContainerProperties().setAckMode(ContainerProperties.AckMode.MANUAL_IMMEDIATE);\n        factory.getContainerProperties().setCommitLogLevel(LogIfLevelEnabled.Level.INFO);\n        factory.getContainerProperties().setConsumerRebalanceListener(restoreStatusTracker);\n        return factory;\n    }\n</code></pre>\n<p>I want when pod restart it consumer should consume from last record committed.\nto maintain atleast once delivery</p>\n"},{"tags":["java","macos","apple-silicon"],"comments":[{"owner":{"account_id":1068173,"reputation":766,"user_id":1068125,"accept_rate":17,"display_name":"jrh"},"score":4,"creation_date":1608836078,"post_id":64788005,"comment_id":115699002,"body_markdown":"I followed the youtube video for the JDK installation, https://www.youtube.com/watch?v=pZjGom2qTEA. It is working.","body":"I followed the youtube video for the JDK installation, <a href=\"https://www.youtube.com/watch?v=pZjGom2qTEA\" rel=\"nofollow noreferrer\">youtube.com/watch?v=pZjGom2qTEA</a>. It is working."},{"owner":{"account_id":110909,"reputation":45713,"user_id":293280,"accept_rate":77,"display_name":"Joshua Pinter"},"score":8,"creation_date":1642440290,"post_id":64788005,"comment_id":125066170,"body_markdown":"Native Apple/Arm64 versions are now available on `brew`, so you should be able to just do `brew install java`, provided you install `brew` natively without using Rosetta 2.","body":"Native Apple/Arm64 versions are now available on <code>brew</code>, so you should be able to just do <code>brew install java</code>, provided you install <code>brew</code> natively without using Rosetta 2."},{"owner":{"account_id":12183171,"reputation":914,"user_id":8894035,"display_name":"Wahab Khan Jadon"},"score":0,"creation_date":1664867859,"post_id":64788005,"comment_id":130562575,"body_markdown":"https://medium.com/@kirebyte/using-homebrew-to-install-java-jdk11-on-macos-2021-4a90aa276f1c \n\nworks for me.","body":"<a href=\"https://medium.com/@kirebyte/using-homebrew-to-install-java-jdk11-on-macos-2021-4a90aa276f1c\" rel=\"nofollow noreferrer\">medium.com/@kirebyte/&hellip;</a>   works for me."}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89758,"user_id":768644,"display_name":"rzwitserloot"},"down_vote_count":1,"up_vote_count":126,"is_accepted":false,"score":125,"last_activity_date":1637007474,"creation_date":1605104223,"answer_id":64788161,"question_id":64788005,"body_markdown":"Yes.\r\n\r\nOn this page: [AdoptOpenJDK Latest Releases](https://adoptopenjdk.net/releases.html) you can select &#39;macOS&#39; from the &#39;Operating System&#39; dropdown, and then from &#39;Architecture&#39;, it&#39;s currently only x64, but soonish there should be AArch64 or ARM64 (those are usually the shortcodes for 64-bit ARM). Possibly, as Apple no doubt has a bunch of extensions built into their M1 designs, and Apple gets its own.\r\n\r\nIf you instead leave Operation System on &#39;any&#39;, you&#39;ll note aarch64 is in there, and this gets you to a Linux release for ARM processors. That (probably) won&#39;t run on macOS on M1 hardware, but that&#39;s 95% of the work already done.\r\n\r\nSo: It&#39;s not there yet, but note that JDKs for ARM have been available for more than decade, and whilst JDK&amp;nbsp;15 has dropped support for a bunch of exotic OS/architecture combinations (such as [Solaris][1]), ARM development has always remained at least partially relevant (even if so far it&#39;s mostly an Oracle commercial license offering). That is to say: It should not be a herculean effort to create an adoptopenjdk release that runs on M1s natively, so presumably, it will happen. But, it&#39;s an open source effort, so if you&#39;re anxious, by all means, read up and contribute :)\r\n\r\nApple has not given any details on this architecture whatsoever until November 10th 2020, unless you bought a development kit box for it (a [Mac Mini][2] with an A14 chip, which isn&#39;t an M1 chip, but close enough I guess), and signed a big [NDA][3].\r\n\r\nAs a rule, open source projects will run as fast as possible in the opposite direction if you wave an NDA around, so if you dislike this state of affairs, I don&#39;t think it&#39;s wise to complain to adoptopenjdk or other packagers and open source projects about it :)\r\n\r\nFortunately, now it&#39;s out, and an NDA is no longer required. My assumption is that the ARM branch of the OpenJDK source code + the macOS bits that already exist for the macOS x64 release can be combined rather easily once someone with some familiarity with the OpenJDK source code has an M1-based macOS system to test it on, which should mean an adoptopenjdk macos-aarch64 release should be here within the month.\r\n\r\nBut, open source. You didn&#39;t pay them, you have no contract, and they don&#39;t owe it to you. Donate to the effort or contribute a pull request if you want it to go faster.\r\n\r\nUPDATE:\r\n\r\n* [Azul&#39;s M1 OpenJDK builds](https://www.azul.com/downloads/zulu-community/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk)\r\n* Microsoft&#39;s (yes, really) [GitHub source repo](https://github.com/microsoft/openjdk-aarch64/releases/tag/16-ea%2B10-macos) for an early access OpenJDK16 build for macOS on AArch64. Note that Microsoft&#39;s been working on the OpenJDK branch of AArch64 (for ARM-based Windows&amp;nbsp;10) for a while, which goes back to: A lot of the hard work was already done.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Solaris_%28operating_system%29\r\n  [2]: https://en.wikipedia.org/wiki/Mac_Mini\r\n  [3]: https://en.wikipedia.org/wiki/Non-disclosure_agreement\r\n\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>Yes.</p>\n<p>On this page: <a href=\"https://adoptopenjdk.net/releases.html\" rel=\"noreferrer\">AdoptOpenJDK Latest Releases</a> you can select 'macOS' from the 'Operating System' dropdown, and then from 'Architecture', it's currently only x64, but soonish there should be AArch64 or ARM64 (those are usually the shortcodes for 64-bit ARM). Possibly, as Apple no doubt has a bunch of extensions built into their M1 designs, and Apple gets its own.</p>\n<p>If you instead leave Operation System on 'any', you'll note aarch64 is in there, and this gets you to a Linux release for ARM processors. That (probably) won't run on macOS on M1 hardware, but that's 95% of the work already done.</p>\n<p>So: It's not there yet, but note that JDKs for ARM have been available for more than decade, and whilst JDK 15 has dropped support for a bunch of exotic OS/architecture combinations (such as <a href=\"https://en.wikipedia.org/wiki/Solaris_%28operating_system%29\" rel=\"noreferrer\">Solaris</a>), ARM development has always remained at least partially relevant (even if so far it's mostly an Oracle commercial license offering). That is to say: It should not be a herculean effort to create an adoptopenjdk release that runs on M1s natively, so presumably, it will happen. But, it's an open source effort, so if you're anxious, by all means, read up and contribute :)</p>\n<p>Apple has not given any details on this architecture whatsoever until November 10th 2020, unless you bought a development kit box for it (a <a href=\"https://en.wikipedia.org/wiki/Mac_Mini\" rel=\"noreferrer\">Mac Mini</a> with an A14 chip, which isn't an M1 chip, but close enough I guess), and signed a big <a href=\"https://en.wikipedia.org/wiki/Non-disclosure_agreement\" rel=\"noreferrer\">NDA</a>.</p>\n<p>As a rule, open source projects will run as fast as possible in the opposite direction if you wave an NDA around, so if you dislike this state of affairs, I don't think it's wise to complain to adoptopenjdk or other packagers and open source projects about it :)</p>\n<p>Fortunately, now it's out, and an NDA is no longer required. My assumption is that the ARM branch of the OpenJDK source code + the macOS bits that already exist for the macOS x64 release can be combined rather easily once someone with some familiarity with the OpenJDK source code has an M1-based macOS system to test it on, which should mean an adoptopenjdk macos-aarch64 release should be here within the month.</p>\n<p>But, open source. You didn't pay them, you have no contract, and they don't owe it to you. Donate to the effort or contribute a pull request if you want it to go faster.</p>\n<p>UPDATE:</p>\n<ul>\n<li><a href=\"https://www.azul.com/downloads/zulu-community/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk\" rel=\"noreferrer\">Azul's M1 OpenJDK builds</a></li>\n<li>Microsoft's (yes, really) <a href=\"https://github.com/microsoft/openjdk-aarch64/releases/tag/16-ea%2B10-macos\" rel=\"noreferrer\">GitHub source repo</a> for an early access OpenJDK16 build for macOS on AArch64. Note that Microsoft's been working on the OpenJDK branch of AArch64 (for ARM-based Windows 10) for a while, which goes back to: A lot of the hard work was already done.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":19978323,"reputation":41,"user_id":14642072,"display_name":"Vladimir Kempik"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1637008861,"creation_date":1605439611,"answer_id":64843829,"question_id":64788005,"body_markdown":"It&#39;s not just JEP-391.\r\n\r\nThere is a preview branch, *https://github.com/openjdk/jdk-sandbox/tree/JEP-391-branch*, one can build JDK 16 early-access (EA) using cross-compilation on Intel Mac or directly on ARM Mac. And it runs fine.\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>It's not just JEP-391.</p>\n<p>There is a preview branch, <em><a href=\"https://github.com/openjdk/jdk-sandbox/tree/JEP-391-branch\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk-sandbox/tree/JEP-391-branch</a></em>, one can build JDK 16 early-access (EA) using cross-compilation on Intel Mac or directly on ARM Mac. And it runs fine.</p>\n"},{"tags":[],"owner":{"account_id":19990400,"reputation":31,"user_id":14651541,"display_name":"Peter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1637009242,"creation_date":1605574536,"answer_id":64867855,"question_id":64788005,"body_markdown":"Microsoft and [Azul][1] appear to be prime movers on [JEP 391][2] in combination with the Windows port (JEP&amp;nbsp;388). They have [a separate GitHub repository][3] that actually has an [EA][4] release for macOS-aarch64.\r\n\r\nI am not sure what exact relationship is with the OpenJDK repository.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Azul_Systems\r\n  [2]: https://openjdk.java.net/jeps/391\r\n  [3]: https://github.com/microsoft/openjdk-aarch64/releases\r\n  [4]: https://jdk.java.net/18/\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>Microsoft and <a href=\"https://en.wikipedia.org/wiki/Azul_Systems\" rel=\"nofollow noreferrer\">Azul</a> appear to be prime movers on <a href=\"https://openjdk.java.net/jeps/391\" rel=\"nofollow noreferrer\">JEP 391</a> in combination with the Windows port (JEP 388). They have <a href=\"https://github.com/microsoft/openjdk-aarch64/releases\" rel=\"nofollow noreferrer\">a separate GitHub repository</a> that actually has an <a href=\"https://jdk.java.net/18/\" rel=\"nofollow noreferrer\">EA</a> release for macOS-aarch64.</p>\n<p>I am not sure what exact relationship is with the OpenJDK repository.</p>\n"},{"tags":[],"owner":{"account_id":5081490,"reputation":854,"user_id":4077427,"display_name":"Ming-Yee Iu"},"down_vote_count":0,"up_vote_count":52,"is_accepted":false,"score":52,"last_activity_date":1637010260,"creation_date":1605638677,"answer_id":64881417,"question_id":64788005,"body_markdown":"[Azul][1] is offering macOS ARM builds of OpenJDK on their website in the *Downloads* section. I haven’t tried them out yet though, but Azul have been long-time JDK developers.\r\n\r\nOnce you unpack the Azul JDK, you have to rummage around inside of it until you find the `zulu-11.jdk` directory (assuming you&#39;ve downloaded JDK&amp;nbsp;11), which you then copy to `/Library/Java/JavaVirtualMachines`.\r\n\r\n  [1]: https://www.azul.com/downloads/zulu-community/\r\n\r\n\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p><a href=\"https://www.azul.com/downloads/zulu-community/\" rel=\"noreferrer\">Azul</a> is offering macOS ARM builds of OpenJDK on their website in the <em>Downloads</em> section. I haven’t tried them out yet though, but Azul have been long-time JDK developers.</p>\n<p>Once you unpack the Azul JDK, you have to rummage around inside of it until you find the <code>zulu-11.jdk</code> directory (assuming you've downloaded JDK 11), which you then copy to <code>/Library/Java/JavaVirtualMachines</code>.</p>\n"},{"tags":[],"owner":{"display_name":"user14679771"},"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1637009607,"creation_date":1605939751,"answer_id":64940420,"question_id":64788005,"body_markdown":"I am successfully developing Java applications on the new Apple M1 Chip with Azul OpenJDK and NetBeans.\r\n\r\nConfiguration:\r\n\r\n * zulu16.0.65-ea-jdk16.0.0-ea.24-macos_aarch64\r\n * NetBeans 12.1 and Maven.\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>I am successfully developing Java applications on the new Apple M1 Chip with Azul OpenJDK and NetBeans.</p>\n<p>Configuration:</p>\n<ul>\n<li>zulu16.0.65-ea-jdk16.0.0-ea.24-macos_aarch64</li>\n<li>NetBeans 12.1 and Maven.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":10781950,"reputation":91,"user_id":7932213,"display_name":"Madhav7890"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1637010871,"creation_date":1612199611,"answer_id":65997129,"question_id":64788005,"body_markdown":"Please go to the Azul site and download the .dmg file:\r\n\r\nhttps://www.azul.com/downloads/zulu-community/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk\r\n\r\nThis will be placed in a library and once IntelliJ IDEA identifies it, it should be good to run.\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>Please go to the Azul site and download the .dmg file:</p>\n<p><a href=\"https://www.azul.com/downloads/zulu-community/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk\" rel=\"nofollow noreferrer\">https://www.azul.com/downloads/zulu-community/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk</a></p>\n<p>This will be placed in a library and once IntelliJ IDEA identifies it, it should be good to run.</p>\n"},{"tags":[],"owner":{"account_id":11950660,"reputation":256,"user_id":8744412,"display_name":"Saideep Ullal"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1637011113,"creation_date":1614697904,"answer_id":66442012,"question_id":64788005,"body_markdown":"Here are steps to install Oracle JDK 8 and run it from [Rosetta][1] - https://www.oracle.com/in/java/technologies/javase/javase-jdk8-downloads.html\r\n\r\n - Download the macOS x64 version\r\n - While attempting to install the package, you will receive a prompt to install Rosetta if it already doesn&#39;t exist\r\n - The rest of the installation steps are as any other package.\r\n\r\nYou can verify it has worked or not by opening up terminal and typing:\r\n\r\n    java -version\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Rosetta_%28software%29\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>Here are steps to install Oracle JDK 8 and run it from <a href=\"https://en.wikipedia.org/wiki/Rosetta_%28software%29\" rel=\"nofollow noreferrer\">Rosetta</a> - <a href=\"https://www.oracle.com/in/java/technologies/javase/javase-jdk8-downloads.html\" rel=\"nofollow noreferrer\">https://www.oracle.com/in/java/technologies/javase/javase-jdk8-downloads.html</a></p>\n<ul>\n<li>Download the macOS x64 version</li>\n<li>While attempting to install the package, you will receive a prompt to install Rosetta if it already doesn't exist</li>\n<li>The rest of the installation steps are as any other package.</li>\n</ul>\n<p>You can verify it has worked or not by opening up terminal and typing:</p>\n<pre><code>java -version\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3858478,"reputation":7458,"user_id":3196753,"display_name":"tresf"},"down_vote_count":0,"up_vote_count":194,"is_accepted":false,"score":194,"last_activity_date":1675063152,"creation_date":1617209339,"answer_id":66891978,"question_id":64788005,"body_markdown":"A command line approach (thanks to the [Homebrew](https://brew.sh/) team and the hard work of [`@vladimir-kempik`](https://stackoverflow.com/users/14642072) and other openjdk contributors on the [`JEP-391`](https://github.com/openjdk/jdk-sandbox/tree/JEP-391-branch) branch)\r\n\r\n\r\n```bash\r\n# Install Homebrew\r\n/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\r\n\r\n# Install OpenJDK\r\nbrew install openjdk\r\n```\r\n\r\n\r\nVerify it&#39;s installed:\r\n\r\n```bash\r\n$(brew --prefix openjdk)/bin/java --version\r\n```\r\n\r\nVerify it&#39;s for the arm64 hardware:\r\n```bash\r\nfile $(brew --prefix openjdk)/bin/java     \r\n# /opt/homebrew/opt/openjdk/bin/java: Mach-O 64-bit executable arm64\r\n```\r\n\r\n**Note:** To install openjdk system-wide, follow the on-screen instructions provided by Homebrew.\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>A command line approach (thanks to the <a href=\"https://brew.sh/\" rel=\"noreferrer\">Homebrew</a> team and the hard work of <a href=\"https://stackoverflow.com/users/14642072\"><code>@vladimir-kempik</code></a> and other openjdk contributors on the <a href=\"https://github.com/openjdk/jdk-sandbox/tree/JEP-391-branch\" rel=\"noreferrer\"><code>JEP-391</code></a> branch)</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Install Homebrew\n/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;\n\n# Install OpenJDK\nbrew install openjdk\n</code></pre>\n<p>Verify it's installed:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$(brew --prefix openjdk)/bin/java --version\n</code></pre>\n<p>Verify it's for the arm64 hardware:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>file $(brew --prefix openjdk)/bin/java     \n# /opt/homebrew/opt/openjdk/bin/java: Mach-O 64-bit executable arm64\n</code></pre>\n<p><strong>Note:</strong> To install openjdk system-wide, follow the on-screen instructions provided by Homebrew.</p>\n"},{"tags":[],"owner":{"account_id":19512571,"reputation":61,"user_id":15626622,"display_name":"Dmitry"},"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1637011491,"creation_date":1618345917,"answer_id":67082000,"question_id":64788005,"body_markdown":"You can download the Liberica JDK from:\r\n\r\nhttps://bell-sw.com/pages/downloads/?os=macOS&amp;architecture=ARM\r\n\r\nIn [IntelliJ IDEA][1] for M1, the JetBrains Runtime is also native (ARM64).\r\n\r\n  [1]: https://en.wikipedia.org/wiki/IntelliJ_IDEA\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>You can download the Liberica JDK from:</p>\n<p><a href=\"https://bell-sw.com/pages/downloads/?os=macOS&amp;architecture=ARM\" rel=\"nofollow noreferrer\">https://bell-sw.com/pages/downloads/?os=macOS&amp;architecture=ARM</a></p>\n<p>In <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ IDEA</a> for M1, the JetBrains Runtime is also native (ARM64).</p>\n"},{"tags":[],"owner":{"account_id":14790822,"reputation":1718,"user_id":10681828,"display_name":"pavel_orekhov"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1642045917,"creation_date":1619532656,"answer_id":67284776,"question_id":64788005,"body_markdown":"I&#39;ve tried the Azul JDK 8.\r\n\r\nI just wanted to say that, while the Azul JDK works natively on Apple M1 and its speed is great, there are still issues. Especially when some Java code needs to call C++ code.\r\n\r\nFor example, I am a big data developer. And I started using the Azul JDK for my development workflow. But I noticed that certain tests started failing after the switch. For example, when the test writes to a [Parquet][1]/[Avro][2] file, it fails. I think that is because there are some native things written in C++ for Parquet/Avro, and they are not compiled for M1.\r\n\r\nFor this specific reason I am forced to use the non-M1 JDK, which is slow. There are no issues there.\r\n\r\nHere&#39;s an example of the error that I get with Azul that I don&#39;t get with non-M1 JDKs:\r\n\r\n```lang-none\r\n- convert Base64 JSON back to rpo Avro *** FAILED ***\r\n  org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 10.0 failed 1 times, most recent failure: Lost task 0.0 in stage 10.0 (TID 14, localhost, executor driver): org.xerial.snappy.SnappyError: [FAILED_TO_LOAD_NATIVE_LIBRARY] no native library is found for os.name=Mac and os.arch=aarch64\r\n        at org.xerial.snappy.SnappyLoader.findNativeLibrary(SnappyLoader.java:331)\r\n        at org.xerial.snappy.SnappyLoader.loadNativeLibrary(SnappyLoader.java:171)\r\n        at org.xerial.snappy.SnappyLoader.load(SnappyLoader.java:152)\r\n        at org.xerial.snappy.Snappy.&lt;clinit&gt;(Snappy.java:47)\r\n        at org.apache.avro.file.SnappyCodec.compress(SnappyCodec.java:43)\r\n        at org.apache.avro.file.DataFileStream$DataBlock.compressUsing(DataFileStream.java:358)\r\n        at org.apache.avro.file.DataFileWriter.writeBlock(DataFileWriter.java:382)\r\n        at org.apache.avro.file.DataFileWriter.sync(DataFileWriter.java:401)\r\n        at org.apache.avro.file.DataFileWriter.flush(DataFileWriter.java:410)\r\n        at org.apache.avro.file.DataFileWriter.close(DataFileWriter.java:433)\r\n        at org.apache.avro.mapred.AvroOutputFormat$1.close(AvroOutputFormat.java:170)\r\n        at org.apache.spark.internal.io.SparkHadoopWriter.close(SparkHadoopWriter.scala:101)\r\n        at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$12$$anonfun$apply$5.apply$mcV$sp(PairRDDFunctions.scala:1145)\r\n        at org.apache.spark.util.Utils$.tryWithSafeFinallyAndFailureCallbacks(Utils.scala:1393)\r\n        at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$12.apply(PairRDDFunctions.scala:1145)\r\n        at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$12.apply(PairRDDFunctions.scala:1125)\r\n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\r\n        at org.apache.spark.scheduler.Task.run(Task.scala:108)\r\n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:335)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n        at java.lang.Thread.run(Thread.java:748)\r\n\r\nDriver stacktrace:\r\n  at org.apache.spark.scheduler.DAGScheduler.org$apache$spark$scheduler$DAGScheduler$$failJobAndIndependentStages(DAGScheduler.scala:1499)\r\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1487)\r\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1486)\r\n  at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\r\n  at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)\r\n  at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1486)\r\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:814)\r\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:814)\r\n  at scala.Option.foreach(Option.scala:257)\r\n  at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:814)\r\n  ...\r\n  Cause: org.xerial.snappy.SnappyError: [FAILED_TO_LOAD_NATIVE_LIBRARY] no native library is found for os.name=Mac and os.arch=aarch64\r\n  at org.xerial.snappy.SnappyLoader.findNativeLibrary(SnappyLoader.java:331)\r\n  at org.xerial.snappy.SnappyLoader.loadNativeLibrary(SnappyLoader.java:171)\r\n  at org.xerial.snappy.SnappyLoader.load(SnappyLoader.java:152)\r\n  at org.xerial.snappy.Snappy.&lt;clinit&gt;(Snappy.java:47)\r\n  at org.apache.avro.file.SnappyCodec.compress(SnappyCodec.java:43)\r\n  at org.apache.avro.file.DataFileStream$DataBlock.compressUsing(DataFileStream.java:358)\r\n  at org.apache.avro.file.DataFileWriter.writeBlock(DataFileWriter.java:382)\r\n  at org.apache.avro.file.DataFileWriter.sync(DataFileWriter.java:401)\r\n  at org.apache.avro.file.DataFileWriter.flush(DataFileWriter.java:410)\r\n  at org.apache.avro.file.DataFileWriter.close(DataFileWriter.java:433)\r\n```\r\n\r\nAs you can see, it says: `  Cause: org.xerial.snappy.SnappyError: [FAILED_TO_LOAD_NATIVE_LIBRARY] no native library is found for os.name=Mac and os.arch=aarch64\r\n`\r\n\r\nI googled this issue and they said that the native library is compiled for a later version of [Spark][3], unfortunately.\r\n\r\nThis frustrated me tremendously, and I want a Windows laptop now, LOL. Running an Intel JDK on the M1 chip can be slow at times, and I don&#39;t want that.\r\n\r\nBe careful!\r\n\r\n**Update:**\r\nThey released new versions of their libraries with support for M1, I updated them in the projects and everything works, thank God. Sometimes these &quot;native code errors&quot; manifest themselves with different exceptions and this is additional P.I.T.A. that I have to deal with while my colleagues on windows laptops don&#39;t need to deal with it. The errors can be a bit unclear sometimes, but if you see something about native code in the error log, or words like &quot;jna&quot; or &quot;jni&quot;, then it&#39;s an M1 chip problem.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Parquet\r\n  [2]: https://en.wikipedia.org/wiki/Apache_Avro\r\n  [3]: https://en.wikipedia.org/wiki/Apache_Spark\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>I've tried the Azul JDK 8.</p>\n<p>I just wanted to say that, while the Azul JDK works natively on Apple M1 and its speed is great, there are still issues. Especially when some Java code needs to call C++ code.</p>\n<p>For example, I am a big data developer. And I started using the Azul JDK for my development workflow. But I noticed that certain tests started failing after the switch. For example, when the test writes to a <a href=\"https://en.wikipedia.org/wiki/Apache_Parquet\" rel=\"nofollow noreferrer\">Parquet</a>/<a href=\"https://en.wikipedia.org/wiki/Apache_Avro\" rel=\"nofollow noreferrer\">Avro</a> file, it fails. I think that is because there are some native things written in C++ for Parquet/Avro, and they are not compiled for M1.</p>\n<p>For this specific reason I am forced to use the non-M1 JDK, which is slow. There are no issues there.</p>\n<p>Here's an example of the error that I get with Azul that I don't get with non-M1 JDKs:</p>\n<pre class=\"lang-none prettyprint-override\"><code>- convert Base64 JSON back to rpo Avro *** FAILED ***\n  org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 10.0 failed 1 times, most recent failure: Lost task 0.0 in stage 10.0 (TID 14, localhost, executor driver): org.xerial.snappy.SnappyError: [FAILED_TO_LOAD_NATIVE_LIBRARY] no native library is found for os.name=Mac and os.arch=aarch64\n        at org.xerial.snappy.SnappyLoader.findNativeLibrary(SnappyLoader.java:331)\n        at org.xerial.snappy.SnappyLoader.loadNativeLibrary(SnappyLoader.java:171)\n        at org.xerial.snappy.SnappyLoader.load(SnappyLoader.java:152)\n        at org.xerial.snappy.Snappy.&lt;clinit&gt;(Snappy.java:47)\n        at org.apache.avro.file.SnappyCodec.compress(SnappyCodec.java:43)\n        at org.apache.avro.file.DataFileStream$DataBlock.compressUsing(DataFileStream.java:358)\n        at org.apache.avro.file.DataFileWriter.writeBlock(DataFileWriter.java:382)\n        at org.apache.avro.file.DataFileWriter.sync(DataFileWriter.java:401)\n        at org.apache.avro.file.DataFileWriter.flush(DataFileWriter.java:410)\n        at org.apache.avro.file.DataFileWriter.close(DataFileWriter.java:433)\n        at org.apache.avro.mapred.AvroOutputFormat$1.close(AvroOutputFormat.java:170)\n        at org.apache.spark.internal.io.SparkHadoopWriter.close(SparkHadoopWriter.scala:101)\n        at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$12$$anonfun$apply$5.apply$mcV$sp(PairRDDFunctions.scala:1145)\n        at org.apache.spark.util.Utils$.tryWithSafeFinallyAndFailureCallbacks(Utils.scala:1393)\n        at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$12.apply(PairRDDFunctions.scala:1145)\n        at org.apache.spark.rdd.PairRDDFunctions$$anonfun$saveAsHadoopDataset$1$$anonfun$12.apply(PairRDDFunctions.scala:1125)\n        at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:87)\n        at org.apache.spark.scheduler.Task.run(Task.scala:108)\n        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:335)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n        at java.lang.Thread.run(Thread.java:748)\n\nDriver stacktrace:\n  at org.apache.spark.scheduler.DAGScheduler.org$apache$spark$scheduler$DAGScheduler$$failJobAndIndependentStages(DAGScheduler.scala:1499)\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1487)\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$abortStage$1.apply(DAGScheduler.scala:1486)\n  at scala.collection.mutable.ResizableArray$class.foreach(ResizableArray.scala:59)\n  at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:48)\n  at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:1486)\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:814)\n  at org.apache.spark.scheduler.DAGScheduler$$anonfun$handleTaskSetFailed$1.apply(DAGScheduler.scala:814)\n  at scala.Option.foreach(Option.scala:257)\n  at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:814)\n  ...\n  Cause: org.xerial.snappy.SnappyError: [FAILED_TO_LOAD_NATIVE_LIBRARY] no native library is found for os.name=Mac and os.arch=aarch64\n  at org.xerial.snappy.SnappyLoader.findNativeLibrary(SnappyLoader.java:331)\n  at org.xerial.snappy.SnappyLoader.loadNativeLibrary(SnappyLoader.java:171)\n  at org.xerial.snappy.SnappyLoader.load(SnappyLoader.java:152)\n  at org.xerial.snappy.Snappy.&lt;clinit&gt;(Snappy.java:47)\n  at org.apache.avro.file.SnappyCodec.compress(SnappyCodec.java:43)\n  at org.apache.avro.file.DataFileStream$DataBlock.compressUsing(DataFileStream.java:358)\n  at org.apache.avro.file.DataFileWriter.writeBlock(DataFileWriter.java:382)\n  at org.apache.avro.file.DataFileWriter.sync(DataFileWriter.java:401)\n  at org.apache.avro.file.DataFileWriter.flush(DataFileWriter.java:410)\n  at org.apache.avro.file.DataFileWriter.close(DataFileWriter.java:433)\n</code></pre>\n<p>As you can see, it says: <code> Cause: org.xerial.snappy.SnappyError: [FAILED_TO_LOAD_NATIVE_LIBRARY] no native library is found for os.name=Mac and os.arch=aarch64</code></p>\n<p>I googled this issue and they said that the native library is compiled for a later version of <a href=\"https://en.wikipedia.org/wiki/Apache_Spark\" rel=\"nofollow noreferrer\">Spark</a>, unfortunately.</p>\n<p>This frustrated me tremendously, and I want a Windows laptop now, LOL. Running an Intel JDK on the M1 chip can be slow at times, and I don't want that.</p>\n<p>Be careful!</p>\n<p><strong>Update:</strong>\nThey released new versions of their libraries with support for M1, I updated them in the projects and everything works, thank God. Sometimes these &quot;native code errors&quot; manifest themselves with different exceptions and this is additional P.I.T.A. that I have to deal with while my colleagues on windows laptops don't need to deal with it. The errors can be a bit unclear sometimes, but if you see something about native code in the error log, or words like &quot;jna&quot; or &quot;jni&quot;, then it's an M1 chip problem.</p>\n"},{"tags":[],"owner":{"account_id":9096979,"reputation":4448,"user_id":6770614,"display_name":"Boris Azanov"},"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1637067675,"creation_date":1624869953,"answer_id":68160268,"question_id":64788005,"body_markdown":"You can install the Java JDK using sdkman (see [sdkman install][1]):\r\n\r\n```bash\r\nvim .sdkman/etc/config\r\n```\r\n\r\nSet `sdkman_rosetta2_compatible=false` (see [sdkman config][2])\r\n\r\nAfter that, you will see a list of compatible with M1 JDKs:\r\n\r\n```bash\r\nsdk list java\r\n\r\n================================================================================\r\nAvailable Java Versions\r\n================================================================================\r\n Vendor        | Use | Version      | Dist    | Status     | Identifier\r\n--------------------------------------------------------------------------------\r\n Azul Zulu     |     | 16.0.1       | zulu    |            | 16.0.1-zulu\r\n               |     | 11.0.11      | zulu    |            | 11.0.11-zulu\r\n               |     | 8.0.292      | zulu    |            | 8.0.292-zulu\r\n BellSoft      |     | 16.0.1       | librca  |            | 16.0.1-librca\r\n               |     | 11.0.11      | librca  |            | 11.0.11-librca\r\n               |     | 8.0.292      | librca  |            | 8.0.292-librca\r\n Java.net      |     | 18.ea.3      | open    |            | 18.ea.3-open\r\n               |     | 18.ea.2      | open    |            | 18.ea.2-open\r\n               |     | 18.ea.1      | open    |            | 18.ea.1-open\r\n               |     | 17.ea.28     | open    |            | 17.ea.28-open\r\n               |     | 17.ea.27     | open    |            | 17.ea.27-open\r\n               |     | 17.ea.26     | open    |            | 17.ea.26-open\r\n               |     | 17.ea.25     | open    |            | 17.ea.25-open\r\n================================================================================\r\n```\r\n\r\nChoose one and install it using the command `sdk install java IDENTIFIER`, i.e.:\r\n\r\n`sdk install java 8.0.292-zulu`\r\n\r\n  [1]: https://sdkman.io/install\r\n  [2]: https://sdkman.io/usage#config\r\n\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>You can install the Java JDK using sdkman (see <a href=\"https://sdkman.io/install\" rel=\"noreferrer\">sdkman install</a>):</p>\n<pre class=\"lang-sh prettyprint-override\"><code>vim .sdkman/etc/config\n</code></pre>\n<p>Set <code>sdkman_rosetta2_compatible=false</code> (see <a href=\"https://sdkman.io/usage#config\" rel=\"noreferrer\">sdkman config</a>)</p>\n<p>After that, you will see a list of compatible with M1 JDKs:</p>\n<pre class=\"lang-sh prettyprint-override\"><code>sdk list java\n\n================================================================================\nAvailable Java Versions\n================================================================================\n Vendor        | Use | Version      | Dist    | Status     | Identifier\n--------------------------------------------------------------------------------\n Azul Zulu     |     | 16.0.1       | zulu    |            | 16.0.1-zulu\n               |     | 11.0.11      | zulu    |            | 11.0.11-zulu\n               |     | 8.0.292      | zulu    |            | 8.0.292-zulu\n BellSoft      |     | 16.0.1       | librca  |            | 16.0.1-librca\n               |     | 11.0.11      | librca  |            | 11.0.11-librca\n               |     | 8.0.292      | librca  |            | 8.0.292-librca\n Java.net      |     | 18.ea.3      | open    |            | 18.ea.3-open\n               |     | 18.ea.2      | open    |            | 18.ea.2-open\n               |     | 18.ea.1      | open    |            | 18.ea.1-open\n               |     | 17.ea.28     | open    |            | 17.ea.28-open\n               |     | 17.ea.27     | open    |            | 17.ea.27-open\n               |     | 17.ea.26     | open    |            | 17.ea.26-open\n               |     | 17.ea.25     | open    |            | 17.ea.25-open\n================================================================================\n</code></pre>\n<p>Choose one and install it using the command <code>sdk install java IDENTIFIER</code>, i.e.:</p>\n<p><code>sdk install java 8.0.292-zulu</code></p>\n"},{"tags":[],"owner":{"account_id":3850009,"reputation":841,"user_id":3190416,"display_name":"Anurag"},"down_vote_count":2,"up_vote_count":9,"is_accepted":false,"score":7,"last_activity_date":1660791151,"creation_date":1631383803,"answer_id":69145549,"question_id":64788005,"body_markdown":"I followed the below steps and I was able to successfully run JDK 16 on a [MacBook Air (M1)][1]:\r\n\r\n 1. Go to &quot;Oracle.com&quot;\r\n 2. Go to *Products* &amp;rarr; *Software* &amp;rarr; *Java*\r\n 3. Click on &quot;Download Java Now&quot;\r\n 4. Click on &quot;JDK Download&quot;\r\n 5. Select &quot;macOS Installer&quot;\r\n 6. Install JDK\r\n 7. Try with any sample Java program and this should work for you.\r\n\r\nI was able to install and successfully run this on my MacBook Air (M1).\r\n\r\n  [1]: https://en.wikipedia.org/wiki/MacBook_Air_(Apple_silicon)#Third_generation_(Retina_with_Apple_silicon)\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>I followed the below steps and I was able to successfully run JDK 16 on a <a href=\"https://en.wikipedia.org/wiki/MacBook_Air_(Apple_silicon)#Third_generation_(Retina_with_Apple_silicon)\" rel=\"nofollow noreferrer\">MacBook Air (M1)</a>:</p>\n<ol>\n<li>Go to &quot;Oracle.com&quot;</li>\n<li>Go to <em>Products</em> → <em>Software</em> → <em>Java</em></li>\n<li>Click on &quot;Download Java Now&quot;</li>\n<li>Click on &quot;JDK Download&quot;</li>\n<li>Select &quot;macOS Installer&quot;</li>\n<li>Install JDK</li>\n<li>Try with any sample Java program and this should work for you.</li>\n</ol>\n<p>I was able to install and successfully run this on my MacBook Air (M1).</p>\n"},{"tags":[],"owner":{"account_id":10835566,"reputation":2546,"user_id":7968673,"display_name":"Hamza Belmellouki"},"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1640350908,"creation_date":1632487877,"answer_id":69315345,"question_id":64788005,"body_markdown":"Now, OpenJDK 17 from Oracle supports the Apple M1 chip. The status of the [JEP 391][1] is closed &amp; delivered.\r\n\r\nYou can download the free, macOS/AArch64 open-source build of the JDK, version 17 from the [official website][2].\r\n\r\n\r\n  [1]: http://openjdk.java.net/jeps/391\r\n  [2]: https://jdk.java.net/17/","title":"Java/JDK for the Apple Silicon chips","body":"<p>Now, OpenJDK 17 from Oracle supports the Apple M1 chip. The status of the <a href=\"http://openjdk.java.net/jeps/391\" rel=\"noreferrer\">JEP 391</a> is closed &amp; delivered.</p>\n<p>You can download the free, macOS/AArch64 open-source build of the JDK, version 17 from the <a href=\"https://jdk.java.net/17/\" rel=\"noreferrer\">official website</a>.</p>\n"},{"tags":[],"owner":{"account_id":7022638,"reputation":58830,"user_id":5381331,"accept_rate":60,"display_name":"Linh"},"down_vote_count":0,"up_vote_count":45,"is_accepted":false,"score":45,"last_activity_date":1660792044,"creation_date":1640224327,"answer_id":70456947,"question_id":64788005,"body_markdown":"```\r\nbrew install openjdk\r\n```\r\n\r\nIn my case, after installing [OpenJDK][1] successfully on [MacBook Air (M1)][2], the `java` command still did not work. I fixed it by\r\n\r\n```\r\nbrew info openjdk\r\n```\r\n\r\nThen there is a command like\r\n\r\n```lang-none\r\nFor the system Java wrappers to find this JDK, symlink it with\r\n  sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\r\n```\r\n\r\nExecute this command and the `java` command works.\r\n\r\n  [1]: https://en.wikipedia.org/wiki/OpenJDK\r\n  [2]: https://en.wikipedia.org/wiki/MacBook_Air_(Apple_silicon)#Third_generation_(Retina_with_Apple_silicon)\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<pre><code>brew install openjdk\n</code></pre>\n<p>In my case, after installing <a href=\"https://en.wikipedia.org/wiki/OpenJDK\" rel=\"noreferrer\">OpenJDK</a> successfully on <a href=\"https://en.wikipedia.org/wiki/MacBook_Air_(Apple_silicon)#Third_generation_(Retina_with_Apple_silicon)\" rel=\"noreferrer\">MacBook Air (M1)</a>, the <code>java</code> command still did not work. I fixed it by</p>\n<pre><code>brew info openjdk\n</code></pre>\n<p>Then there is a command like</p>\n<pre class=\"lang-none prettyprint-override\"><code>For the system Java wrappers to find this JDK, symlink it with\n  sudo ln -sfn /opt/homebrew/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk\n</code></pre>\n<p>Execute this command and the <code>java</code> command works.</p>\n"},{"tags":[],"owner":{"account_id":433794,"reputation":3783,"user_id":819344,"display_name":"Waqas"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1648539741,"creation_date":1648539741,"answer_id":71658185,"question_id":64788005,"body_markdown":"The latest build for Mac M1&#39;s are available now\r\n\r\nhttps://www.oracle.com/java/technologies/downloads/#jdk18-mac\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rKiIB.png","title":"Java/JDK for the Apple Silicon chips","body":"<p>The latest build for Mac M1's are available now</p>\n<p><a href=\"https://www.oracle.com/java/technologies/downloads/#jdk18-mac\" rel=\"noreferrer\">https://www.oracle.com/java/technologies/downloads/#jdk18-mac</a></p>\n<p><a href=\"https://i.stack.imgur.com/rKiIB.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/rKiIB.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":11974240,"reputation":85,"user_id":8761873,"display_name":"Azzam Rar"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1660791858,"creation_date":1655779052,"answer_id":72694771,"question_id":64788005,"body_markdown":"Simply use go to [Java downloads][1] and in the menu select tab *&quot;Java 18&quot;* and then tab *&quot;macOS&quot;*. Download the **Arm 64 DMG Installer**.\r\n\r\nYou can verify whether it has worked or not by\r\nopening up the terminal and typing:\r\n\r\n    java -version\r\n\r\n  [1]: https://www.oracle.com/java/technologies/downloads/#jdk18-mac\r\n\r\n\r\n\r\n\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>Simply use go to <a href=\"https://www.oracle.com/java/technologies/downloads/#jdk18-mac\" rel=\"nofollow noreferrer\">Java downloads</a> and in the menu select tab <em>&quot;Java 18&quot;</em> and then tab <em>&quot;macOS&quot;</em>. Download the <strong>Arm 64 DMG Installer</strong>.</p>\n<p>You can verify whether it has worked or not by\nopening up the terminal and typing:</p>\n<pre><code>java -version\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17313431,"reputation":17,"user_id":12540471,"display_name":"Rahul Agrawal"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1698390535,"creation_date":1698390231,"answer_id":77372084,"question_id":64788005,"body_markdown":"https://www.azul.com/downloads/?package=jdk#zulu\r\n\r\ndownload any version of java JDK from here\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Bvssk.png","title":"Java/JDK for the Apple Silicon chips","body":"<p><a href=\"https://www.azul.com/downloads/?package=jdk#zulu\" rel=\"nofollow noreferrer\">https://www.azul.com/downloads/?package=jdk#zulu</a></p>\n<p>download any version of java JDK from here</p>\n<p><a href=\"https://i.stack.imgur.com/Bvssk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Bvssk.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":9219687,"reputation":2996,"user_id":6849612,"display_name":"Thar"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":481179,"favorite_count":0,"down_vote_count":4,"up_vote_count":283,"answer_count":17,"score":279,"last_activity_date":1698390535,"creation_date":1605103625,"question_id":64788005,"body_markdown":"Will there need to be a special release of [OpenJDK][1] to support the new [Apple Silicon][2] chips?\r\n\r\nI see that there are currently downloads of the JDK for macOS/OS&amp;nbsp;X, but these seem to only be for x86 processors. Is that correct? If so, where can I download a version of OpenJDK for the M1?\r\n\r\n  [1]: https://en.wikipedia.org/wiki/OpenJDK\r\n  [2]: https://support.apple.com/en-us/HT211814\r\n","title":"Java/JDK for the Apple Silicon chips","body":"<p>Will there need to be a special release of <a href=\"https://en.wikipedia.org/wiki/OpenJDK\" rel=\"noreferrer\">OpenJDK</a> to support the new <a href=\"https://support.apple.com/en-us/HT211814\" rel=\"noreferrer\">Apple Silicon</a> chips?</p>\n<p>I see that there are currently downloads of the JDK for macOS/OS X, but these seem to only be for x86 processors. Is that correct? If so, where can I download a version of OpenJDK for the M1?</p>\n"},{"tags":["java","android","localbroadcastmanager"],"answers":[{"tags":[],"owner":{"account_id":19211594,"reputation":1477,"user_id":14037302,"display_name":"sweak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698390515,"creation_date":1698388572,"answer_id":77371953,"question_id":77371855,"body_markdown":"Since Android 14 there is a requirement to specify the export flag when registering context-registered receivers - https://developer.android.com/about/versions/14/behavior-changes-14#runtime-receivers-exported\r\n\r\n&gt; Apps and services that target Android 14 and use context-registered receivers are required to specify a flag to indicate whether or not the receiver should be exported to all other apps on the device either `RECEIVER_EXPORTED` or `RECEIVER_NOT_EXPORTED`, respectively.\r\n\r\nIf your `MessageReceiver` is supposed to be called only by the components within your app, then you should use `RECEIVER_NOT_EXPORTED`. If it is supposed to be accessible to components beyond your own app - use `RECEIVER_EXPORTED`.\r\n\r\nNow, before you try to apply the change, you have to migrate from the deprecated `LocalBroadcastManager` since it does not allow you to specify the export flag. I would advise you to use `ContextCompat` class to register the receiver now. Your code should look more or less like this now:\r\n\r\n```kotlin\r\nimport androidx.core.content.ContextCompat\r\n\r\nContextCompat.registerReceiver(\r\n    this,\r\n    mMessageReceiver,\r\n    filter,\r\n    ContextCompat.RECEIVER_NOT_EXPORTED\r\n)\r\n```\r\n\r\nNow this code will not throw an error now, but **it still might not work** - Android 14 introduced another restriction when it comes to sending implicit intents to non-exported components: https://developer.android.com/about/versions/14/behavior-changes-14#safer-intents\r\n\r\nIn your case, if you&#39;re using the `RECEIVER_EXPORTED` flag, you should not worry about this change in this context.\r\n\r\nIf you&#39;re using `RECEIVER_NOT_EXPORTED` (like on the code above) and you&#39;re calling the `MessageReceiver` with an implicit intent, probably using intent action:\r\n\r\n```kotlin\r\ncontext.sendBroadcast(Intent(YOUR_APP_ACTION))\r\n```\r\n\r\nthen you should make that `Intent` explicit, because otherwise it would not be received on Android 14+:\r\n\r\n```kotlin\r\ncontext.sendBroadcast(\r\n    Intent(YOUR_APP_ACTION).apply {\r\n        setPackage(context.packageName)\r\n    }\r\n)\r\n```\r\n\r\nSpecifying a package makes the `Intent` explicit - the non-exported `MessageReceiver` is able to receive those intents now.","title":"Fatal Exception: java.lang.SecurityException One of RECEIVER_EXPORTED or RECEIVER_NOT_EXPORTED (com.google.android.play:core","body":"<p>Since Android 14 there is a requirement to specify the export flag when registering context-registered receivers - <a href=\"https://developer.android.com/about/versions/14/behavior-changes-14#runtime-receivers-exported\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/14/behavior-changes-14#runtime-receivers-exported</a></p>\n<blockquote>\n<p>Apps and services that target Android 14 and use context-registered receivers are required to specify a flag to indicate whether or not the receiver should be exported to all other apps on the device either <code>RECEIVER_EXPORTED</code> or <code>RECEIVER_NOT_EXPORTED</code>, respectively.</p>\n</blockquote>\n<p>If your <code>MessageReceiver</code> is supposed to be called only by the components within your app, then you should use <code>RECEIVER_NOT_EXPORTED</code>. If it is supposed to be accessible to components beyond your own app - use <code>RECEIVER_EXPORTED</code>.</p>\n<p>Now, before you try to apply the change, you have to migrate from the deprecated <code>LocalBroadcastManager</code> since it does not allow you to specify the export flag. I would advise you to use <code>ContextCompat</code> class to register the receiver now. Your code should look more or less like this now:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import androidx.core.content.ContextCompat\n\nContextCompat.registerReceiver(\n    this,\n    mMessageReceiver,\n    filter,\n    ContextCompat.RECEIVER_NOT_EXPORTED\n)\n</code></pre>\n<p>Now this code will not throw an error now, but <strong>it still might not work</strong> - Android 14 introduced another restriction when it comes to sending implicit intents to non-exported components: <a href=\"https://developer.android.com/about/versions/14/behavior-changes-14#safer-intents\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/14/behavior-changes-14#safer-intents</a></p>\n<p>In your case, if you're using the <code>RECEIVER_EXPORTED</code> flag, you should not worry about this change in this context.</p>\n<p>If you're using <code>RECEIVER_NOT_EXPORTED</code> (like on the code above) and you're calling the <code>MessageReceiver</code> with an implicit intent, probably using intent action:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>context.sendBroadcast(Intent(YOUR_APP_ACTION))\n</code></pre>\n<p>then you should make that <code>Intent</code> explicit, because otherwise it would not be received on Android 14+:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>context.sendBroadcast(\n    Intent(YOUR_APP_ACTION).apply {\n        setPackage(context.packageName)\n    }\n)\n</code></pre>\n<p>Specifying a package makes the <code>Intent</code> explicit - the non-exported <code>MessageReceiver</code> is able to receive those intents now.</p>\n"},{"tags":[],"owner":{"account_id":5909013,"reputation":1390,"user_id":4649860,"display_name":"Chirag Thummar"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698389035,"creation_date":1698389035,"answer_id":77371983,"question_id":77371855,"body_markdown":"Starting from `Android 14` (API 34) are required to specify a `flag` to indicate whether or not the receiver should be exported to all other apps on the device \r\n\r\nFollow the steps\r\n\r\n**Step 1** : Create an instance of `BroadcastReceiver`\r\n\r\n    val br: BroadcastReceiver = MyBroadcastReceiver()\r\n\r\n**Step 2** : Create an instance of `IntentFilter`\r\n\r\n    val filter = IntentFilter(YOUR_BROADCAST_FILTER)\r\n\r\n**Step 3** : Choose whether the broadcast receiver should be exported and visible to other apps on the device. If this receiver is listening for broadcasts sent from the system or from other apps—even other apps that you own—use the RECEIVER_EXPORTED flag. If instead this receiver is listening only for broadcasts sent by your app, use the RECEIVER_NOT_EXPORTED flag.\r\n\r\n    val listenToBroadcastsFromOtherApps = false\r\n        val receiverFlags = if (listenToBroadcastsFromOtherApps) {\r\n            ContextCompat.RECEIVER_EXPORTED\r\n        } else {\r\n            ContextCompat.RECEIVER_NOT_EXPORTED\r\n        }\r\n\r\n**Step 4** : Register the receiver by calling `registerReceiver()`\r\n\r\n    ContextCompat.registerReceiver(context, br, filter, receiverFlags)\r\n\r\n\r\n&gt; Caution: If the broadcast receiver is exported, other apps could send\r\n&gt; unprotected broadcasts to your app\r\n","title":"Fatal Exception: java.lang.SecurityException One of RECEIVER_EXPORTED or RECEIVER_NOT_EXPORTED (com.google.android.play:core","body":"<p>Starting from <code>Android 14</code> (API 34) are required to specify a <code>flag</code> to indicate whether or not the receiver should be exported to all other apps on the device</p>\n<p>Follow the steps</p>\n<p><strong>Step 1</strong> : Create an instance of <code>BroadcastReceiver</code></p>\n<pre><code>val br: BroadcastReceiver = MyBroadcastReceiver()\n</code></pre>\n<p><strong>Step 2</strong> : Create an instance of <code>IntentFilter</code></p>\n<pre><code>val filter = IntentFilter(YOUR_BROADCAST_FILTER)\n</code></pre>\n<p><strong>Step 3</strong> : Choose whether the broadcast receiver should be exported and visible to other apps on the device. If this receiver is listening for broadcasts sent from the system or from other apps—even other apps that you own—use the RECEIVER_EXPORTED flag. If instead this receiver is listening only for broadcasts sent by your app, use the RECEIVER_NOT_EXPORTED flag.</p>\n<pre><code>val listenToBroadcastsFromOtherApps = false\n    val receiverFlags = if (listenToBroadcastsFromOtherApps) {\n        ContextCompat.RECEIVER_EXPORTED\n    } else {\n        ContextCompat.RECEIVER_NOT_EXPORTED\n    }\n</code></pre>\n<p><strong>Step 4</strong> : Register the receiver by calling <code>registerReceiver()</code></p>\n<pre><code>ContextCompat.registerReceiver(context, br, filter, receiverFlags)\n</code></pre>\n<blockquote>\n<p>Caution: If the broadcast receiver is exported, other apps could send\nunprotected broadcasts to your app</p>\n</blockquote>\n"}],"owner":{"account_id":12244530,"reputation":2176,"user_id":8936551,"accept_rate":20,"display_name":"sejn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":630,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77371953,"answer_count":2,"score":2,"last_activity_date":1698390515,"creation_date":1698387002,"question_id":77371855,"body_markdown":"I am getting a crash with my android apps. Which shows security exception with the targetSDKVersion 34.\r\n\r\nHow to resolve this. The error is showing as below (playcore library) **com.google.android.play.core.listener.zzc.zzb (com.google.android.play:core@@1.10.3:3)**\r\n\r\n\r\nNote: I am using the LocalBroadcastManager in my app. Is this issue raised because of this?\r\n\r\n  \r\nCode:\r\n \r\n\r\n     LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver, filter)\r\n\r\nError:\r\n\r\n    Fatal Exception: java.lang.SecurityException\r\n    pck: One of RECEIVER_EXPORTED or RECEIVER_NOT_EXPORTED should be specified when a receiver isn&#39;t being registered exclusively for system broadcasts\r\n    android.os.Parcel.createExceptionOrNull (Parcel.java:3057)\r\n    \r\n    android.content.ContextWrapper.registerReceiver (ContextWrapper.java:755)\r\n    com.google.android.play.core.listener.zzc.zzb (com.google.android.play:core@@1.10.3:3)\r\n    com.google.android.play.core.listener.zzc.zzf (com.google.android.play:core@@1.10.3:4)\r\n    com.google.android.play.core.appupdate.zzf.registerListener (com.google.android.play:core@@1.10.3:1)\r\n    fragments.Summaryfragment.onCreate (Summaryfragment.java:144)\r\n    androidx.fragment.app.Fragment.performCreate (Fragment.java:2949)\r\n    \r\n    androidx.appcompat.app.AppCompatActivity.onStart (AppCompatActivity.java:246)\r\n    ActionBarFragmentActivity.onStart (ActionBarFragmentActivity.java:358)\r\n    android.app.Instrumentation.callActivityOnStart (Instrumentation.java:1582)\r\n    \r\n    com.android.internal.os.ZygoteInit.main (ZygoteInit.java:971)","title":"Fatal Exception: java.lang.SecurityException One of RECEIVER_EXPORTED or RECEIVER_NOT_EXPORTED (com.google.android.play:core","body":"<p>I am getting a crash with my android apps. Which shows security exception with the targetSDKVersion 34.</p>\n<p>How to resolve this. The error is showing as below (playcore library) <strong>com.google.android.play.core.listener.zzc.zzb (com.google.android.play:core@@1.10.3:3)</strong></p>\n<p>Note: I am using the LocalBroadcastManager in my app. Is this issue raised because of this?</p>\n<p>Code:</p>\n<pre><code> LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver, filter)\n</code></pre>\n<p>Error:</p>\n<pre><code>Fatal Exception: java.lang.SecurityException\npck: One of RECEIVER_EXPORTED or RECEIVER_NOT_EXPORTED should be specified when a receiver isn't being registered exclusively for system broadcasts\nandroid.os.Parcel.createExceptionOrNull (Parcel.java:3057)\n\nandroid.content.ContextWrapper.registerReceiver (ContextWrapper.java:755)\ncom.google.android.play.core.listener.zzc.zzb (com.google.android.play:core@@1.10.3:3)\ncom.google.android.play.core.listener.zzc.zzf (com.google.android.play:core@@1.10.3:4)\ncom.google.android.play.core.appupdate.zzf.registerListener (com.google.android.play:core@@1.10.3:1)\nfragments.Summaryfragment.onCreate (Summaryfragment.java:144)\nandroidx.fragment.app.Fragment.performCreate (Fragment.java:2949)\n\nandroidx.appcompat.app.AppCompatActivity.onStart (AppCompatActivity.java:246)\nActionBarFragmentActivity.onStart (ActionBarFragmentActivity.java:358)\nandroid.app.Instrumentation.callActivityOnStart (Instrumentation.java:1582)\n\ncom.android.internal.os.ZygoteInit.main (ZygoteInit.java:971)\n</code></pre>\n"},{"tags":["java","readonly"],"answers":[{"tags":[],"owner":{"account_id":342531,"reputation":254989,"user_id":673730,"accept_rate":89,"display_name":"Luchian Grigore"},"down_vote_count":4,"up_vote_count":29,"is_accepted":true,"score":25,"last_activity_date":1321445247,"creation_date":1321445247,"answer_id":8151396,"question_id":8151342,"body_markdown":"There&#39;s no way to do this in Java.\r\n\r\nYour two options (one which you mentioned) are using public getters and making the field private, or thorough documentation in the class.\r\n\r\nThe overhead on getter methods in extremely small (if at all). If you&#39;re doing it a large number of times, you might want to cache the fetched value instead of calling the get method.\r\n\r\nEDIT:\r\n\r\nOne way to do it, although it has even more overhead than the getter, is defining a public inner class (let&#39;s call it `innerC`) with a constructor that is only available to your `C` class, and make your fields public. That way, you can&#39;t create `innerC` instances outside your class so changing your fields from outside is impossible, yet you can change them from inside. You could however read them from the outside.","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<p>There's no way to do this in Java.</p>\n\n<p>Your two options (one which you mentioned) are using public getters and making the field private, or thorough documentation in the class.</p>\n\n<p>The overhead on getter methods in extremely small (if at all). If you're doing it a large number of times, you might want to cache the fetched value instead of calling the get method.</p>\n\n<p>EDIT:</p>\n\n<p>One way to do it, although it has even more overhead than the getter, is defining a public inner class (let's call it <code>innerC</code>) with a constructor that is only available to your <code>C</code> class, and make your fields public. That way, you can't create <code>innerC</code> instances outside your class so changing your fields from outside is impossible, yet you can change them from inside. You could however read them from the outside.</p>\n"},{"tags":[],"owner":{"account_id":451260,"reputation":31009,"user_id":847064,"accept_rate":84,"display_name":"Thomas Uhrig"},"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1698389321,"creation_date":1321445289,"answer_id":8151405,"question_id":8151342,"body_markdown":"There is no way to make a field &quot;read only&quot; from outside. The only - and right - way is to make the fields private and provide only getters, no setters. ","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<p>There is no way to make a field &quot;read only&quot; from outside. The only - and right - way is to make the fields private and provide only getters, no setters.</p>\n"},{"tags":[],"owner":{"account_id":88014,"reputation":60053,"user_id":1178669,"accept_rate":93,"display_name":"helpermethod"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1321445878,"creation_date":1321445343,"answer_id":8151419,"question_id":8151342,"body_markdown":"Actually the HotSpot compiler would most likely inline calls to your getters, so no overhead will be involved (besides, the overhead for calling these methods would hardly be measurable).\r\n\r\n**EDIT**\r\n\r\nIf you *really* need every CPU cycle, use C or C++ (or write performance-critical parts in it and call it via JNA, though its unlikely that it will be worth the time spent).\r\n","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<p>Actually the HotSpot compiler would most likely inline calls to your getters, so no overhead will be involved (besides, the overhead for calling these methods would hardly be measurable).</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>If you <em>really</em> need every CPU cycle, use C or C++ (or write performance-critical parts in it and call it via JNA, though its unlikely that it will be worth the time spent).</p>\n"},{"tags":[],"owner":{"account_id":9193,"reputation":343113,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1698390260,"creation_date":1321445449,"answer_id":8151439,"question_id":8151342,"body_markdown":"&gt; from what I know the compiler does not optimize this kind of code\r\n\r\nThe Hotspot JIT compiler [most definitely does][1].\r\n\r\n&gt; I was wondering what&#39;s the best solution?\r\n\r\nStop optimizing prematurely. If you&#39;re using this code in a painting routine, I can guarantee that the actual painting will take at least  a hundred times longer than calling a trivial method, even if it&#39;s not inlined.\r\n\r\n\r\n  [1]: https://web.archive.org/web/20110804232933/http://java.sun.com/developer/technicalArticles/Networking/HotSpot/inlining.html","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<blockquote>\n<p>from what I know the compiler does not optimize this kind of code</p>\n</blockquote>\n<p>The Hotspot JIT compiler <a href=\"https://web.archive.org/web/20110804232933/http://java.sun.com/developer/technicalArticles/Networking/HotSpot/inlining.html\" rel=\"nofollow noreferrer\">most definitely does</a>.</p>\n<blockquote>\n<p>I was wondering what's the best solution?</p>\n</blockquote>\n<p>Stop optimizing prematurely. If you're using this code in a painting routine, I can guarantee that the actual painting will take at least  a hundred times longer than calling a trivial method, even if it's not inlined.</p>\n"},{"tags":[],"owner":{"account_id":411534,"reputation":2703,"user_id":784043,"accept_rate":50,"display_name":"RokL"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1321446143,"creation_date":1321446143,"answer_id":8151622,"question_id":8151342,"body_markdown":"Your solution is:\r\nprivate fields,\r\nprivate setters,\r\nprotected or public getters (note: protected allows access from same package as well as from subclasses)","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<p>Your solution is:\nprivate fields,\nprivate setters,\nprotected or public getters (note: protected allows access from same package as well as from subclasses)</p>\n"},{"tags":[],"owner":{"account_id":48782,"reputation":6089,"user_id":145046,"accept_rate":75,"display_name":"Aleks N."},"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1392897379,"creation_date":1392897379,"answer_id":21907078,"question_id":8151342,"body_markdown":"Create a class with `public final` fields. Provide constructor where those fields would be initialized. This way your class will be immutable, but you won&#39;t have an overhead on accessing the values from the outside. For example:\r\n\r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    public class ShortCalendar\r\n    {\r\n        public final int year, month, day;\r\n    \r\n        public ShortCalendar(Calendar calendar)\r\n        {\r\n            if (null == calendar)\r\n                throw new IllegalArgumentException();\r\n    \r\n            year = calendar.get(Calendar.YEAR);\r\n            month = calendar.get(Calendar.MONTH);\r\n            day = calendar.get(Calendar.DATE);\r\n        }\r\n    }\r\n","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<p>Create a class with <code>public final</code> fields. Provide constructor where those fields would be initialized. This way your class will be immutable, but you won't have an overhead on accessing the values from the outside. For example:</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>public class ShortCalendar\n{\n    public final int year, month, day;\n\n    public ShortCalendar(Calendar calendar)\n    {\n        if (null == calendar)\n            throw new IllegalArgumentException();\n\n        year = calendar.get(Calendar.YEAR);\n        month = calendar.get(Calendar.MONTH);\n        day = calendar.get(Calendar.DATE);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13728601,"reputation":483,"user_id":9906656,"display_name":"malith vitha"},"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1530941630,"creation_date":1530941630,"answer_id":51220218,"question_id":8151342,"body_markdown":"yes.. we can make a variable read-only using **final** keyword\r\n\r\nEx: `public final int id = 10;`\r\n","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<p>yes.. we can make a variable read-only using <strong>final</strong> keyword</p>\n\n<p>Ex: <code>public final int id = 10;</code></p>\n"}],"owner":{"account_id":316665,"reputation":86991,"user_id":632951,"accept_rate":83,"display_name":"Pacerier"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":81921,"favorite_count":0,"down_vote_count":0,"up_vote_count":46,"accepted_answer_id":8151396,"answer_count":7,"score":46,"last_activity_date":1698390260,"creation_date":1321444921,"question_id":8151342,"body_markdown":"How can we have a variable that is *writable* within the class but only &quot;readable&quot; outside it?\r\n\r\nFor example, instead of having to do this:\r\n\r\n    \t\r\n    Class C {\r\n      private int width, height;\r\n            \r\n      int GetWidth(){\r\n        return width;\r\n      }\r\n            \r\n      int GetHeight(){\r\n        return height;\r\n      }\r\n        \r\n      // etc..\r\n\r\nI would like to do something like this:\r\n\r\n    Class C {\r\n      public_readonly int width, height;\r\n        \t\r\n      // etc...\r\n\r\n\r\nWhat&#39;s the best solution?\r\n\r\n\r\n","title":"Do we have a Readonly field in java (which is set-able within the scope of the class itself)?","body":"<p>How can we have a variable that is <em>writable</em> within the class but only \"readable\" outside it?</p>\n\n<p>For example, instead of having to do this:</p>\n\n<pre><code>Class C {\n  private int width, height;\n\n  int GetWidth(){\n    return width;\n  }\n\n  int GetHeight(){\n    return height;\n  }\n\n  // etc..\n</code></pre>\n\n<p>I would like to do something like this:</p>\n\n<pre><code>Class C {\n  public_readonly int width, height;\n\n  // etc...\n</code></pre>\n\n<p>What's the best solution?</p>\n"},{"tags":["java","list","collections"],"comments":[{"owner":{"account_id":213468,"reputation":103463,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1698308680,"post_id":77365270,"comment_id":136389605,"body_markdown":"What is your question? Right now you have just stated a fact, that the `List` interface doesn&#39;t have something, and you&#39;re right, it doesn&#39;t.","body":"What is your question? Right now you have just stated a fact, that the <code>List</code> interface doesn&#39;t have something, and you&#39;re right, it doesn&#39;t."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1698308700,"post_id":77365270,"comment_id":136389609,"body_markdown":"`List` indeed has no `removeRange`. What are you asking exactly? Note that [&quot;why is it not a certain way&quot; is not a good question.](https://meta.stackoverflow.com/q/293815/5133585)","body":"<code>List</code> indeed has no <code>removeRange</code>. What are you asking exactly? Note that <a href=\"https://meta.stackoverflow.com/q/293815/5133585\">&quot;why is it not a certain way&quot; is not a good question.</a>"},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1698309144,"post_id":77365270,"comment_id":136389676,"body_markdown":"You can also use `listIterator(startIndex)` and then remove from there. The complexity of doing that may vary depending on your `List` implementation (I can&#39;t post this in an answer since your question was closed now).","body":"You can also use <code>listIterator(startIndex)</code> and then remove from there. The complexity of doing that may vary depending on your <code>List</code> implementation (I can&#39;t post this in an answer since your question was closed now)."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1698311275,"post_id":77365270,"comment_id":136390110,"body_markdown":"@dan1st but that&#39;s not a good way of removing multiple items, because each remove is done independently, which is inefficient in the case of removing from the start/middle of an ArrayList because all the elements are shifted down multiple times. `subList(...).clear()` does just one shift, however many elements you remove.","body":"@dan1st but that&#39;s not a good way of removing multiple items, because each remove is done independently, which is inefficient in the case of removing from the start/middle of an ArrayList because all the elements are shifted down multiple times. <code>subList(...).clear()</code> does just one shift, however many elements you remove."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1698331869,"post_id":77365270,"comment_id":136394494,"body_markdown":"@AndyTurner this depends on the list you are working with. For example, for `LinkedList`, this would save the cost of looking up the cost of navigating to the element to remove each time. `subList().clear()` is great but there may be specific lists (especially with custom `List` implementations) that don&#39;t optimize well for that. It all depends on the type of list you are dealing with.","body":"@AndyTurner this depends on the list you are working with. For example, for <code>LinkedList</code>, this would save the cost of looking up the cost of navigating to the element to remove each time. <code>subList().clear()</code> is great but there may be specific lists (especially with custom <code>List</code> implementations) that don&#39;t optimize well for that. It all depends on the type of list you are dealing with."},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":0,"creation_date":1698387089,"post_id":77365270,"comment_id":136401248,"body_markdown":"@dan1st even for LinkedList, it&#39;s less efficient because you update the prev/next pointers for nodes you immediately delete.","body":"@dan1st even for LinkedList, it&#39;s less efficient because you update the prev/next pointers for nodes you immediately delete."},{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1698390034,"post_id":77365270,"comment_id":136401658,"body_markdown":"With more efficient, I meant more efficient that deleting all using remove(int) or similar.","body":"With more efficient, I meant more efficient that deleting all using remove(int) or similar."}],"answers":[{"tags":[],"owner":{"account_id":4819600,"reputation":56500,"user_id":3890632,"display_name":"khelwood"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1698342741,"creation_date":1698308799,"answer_id":77365310,"question_id":77365270,"body_markdown":"[`List#subList`](https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-) \r\n\r\nThe `List` method `subList` returns a view of a subrange of the list, backed by the same data: Alterations made to the sublist are reflected in the original. \r\n\r\nSo you can use `subList` and `clear` to remove a block of elements from a mutable list:\r\n\r\n    &gt;&gt;&gt; List&lt;Integer&gt; values = new ArrayList&lt;&gt;(List.of(10,20,30,40,50,60));\r\n    values ==&gt; [10, 20, 30, 40, 50, 60]\r\n    &gt;&gt;&gt; values.subList(3,5).clear()\r\n    &gt;&gt;&gt; values\r\n    values ==&gt; [10, 20, 30, 60]","title":"Java List has a method to add multiple elements at a position, but I can&#39;t find a method to remove multiple elements at a position","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/List.html#subList-int-int-\" rel=\"nofollow noreferrer\"><code>List#subList</code></a></p>\n<p>The <code>List</code> method <code>subList</code> returns a view of a subrange of the list, backed by the same data: Alterations made to the sublist are reflected in the original.</p>\n<p>So you can use <code>subList</code> and <code>clear</code> to remove a block of elements from a mutable list:</p>\n<pre><code>&gt;&gt;&gt; List&lt;Integer&gt; values = new ArrayList&lt;&gt;(List.of(10,20,30,40,50,60));\nvalues ==&gt; [10, 20, 30, 40, 50, 60]\n&gt;&gt;&gt; values.subList(3,5).clear()\n&gt;&gt;&gt; values\nvalues ==&gt; [10, 20, 30, 60]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698390105,"creation_date":1698311536,"answer_id":77365635,"question_id":77365270,"body_markdown":"Since there may be some lists that don&#39;t implement efficient removal with [`subList` as described by khelwood](https://stackoverflow.com/a/77365310/10871900), you can use an iterator in cases like that. The time complexity of that may vary depending on your list implementation.\r\n\r\n```java\r\nList&lt;T&gt; yourList = ...;//TODO\r\nIterator&lt;T&gt; it = yourList.listIterator(yourStartIndex);\r\nfor(int i=0; i&lt;numberOfElementsToRemove &amp;&amp; it.hasNext(); i++){\r\n    it.next();\r\n    it.remove();\r\n}\r\n```\r\n\r\nHere, the `List#listIterator(int)` method creates a `ListIterator` at the position where you want to start.\r\n\r\nThere, it removes as many elements as you want to remove. This may not lead to best possible performance but it doesn&#39;t need to look up the position of each element to remove seperately.","title":"Java List has a method to add multiple elements at a position, but I can&#39;t find a method to remove multiple elements at a position","body":"<p>Since there may be some lists that don't implement efficient removal with <a href=\"https://stackoverflow.com/a/77365310/10871900\"><code>subList</code> as described by khelwood</a>, you can use an iterator in cases like that. The time complexity of that may vary depending on your list implementation.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;T&gt; yourList = ...;//TODO\nIterator&lt;T&gt; it = yourList.listIterator(yourStartIndex);\nfor(int i=0; i&lt;numberOfElementsToRemove &amp;&amp; it.hasNext(); i++){\n    it.next();\n    it.remove();\n}\n</code></pre>\n<p>Here, the <code>List#listIterator(int)</code> method creates a <code>ListIterator</code> at the position where you want to start.</p>\n<p>There, it removes as many elements as you want to remove. This may not lead to best possible performance but it doesn't need to look up the position of each element to remove seperately.</p>\n"}],"owner":{"account_id":2046019,"reputation":690,"user_id":1826075,"accept_rate":47,"display_name":"Markus"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77365310,"answer_count":2,"score":2,"last_activity_date":1698390105,"creation_date":1698308432,"question_id":77365270,"body_markdown":"There is `List.addAll(position, collection)` but I can&#39;t find a corresponding `List.&lt;remove&gt;(position, &lt;range&gt;)`, whatever the wording of &lt;remove&gt; and the way &lt;range&gt; is specified would be. In `ArrayList`, there is `removeRange(position, positionAfter)`, but not in `List`.\r\n\r\nRemoving an interval from a list can be O(1) in many list types, removing elements one by one would be O(n) and miss that ability. Converting a general `List` to a type that supports range removal would also be O(n) and miss the chance.\r\n\r\nIs there any way to remove a range of values from a general `List` in a way that the `List` implementations can optimize for this?","title":"Java List has a method to add multiple elements at a position, but I can&#39;t find a method to remove multiple elements at a position","body":"<p>There is <code>List.addAll(position, collection)</code> but I can't find a corresponding <code>List.&lt;remove&gt;(position, &lt;range&gt;)</code>, whatever the wording of  and the way  is specified would be. In <code>ArrayList</code>, there is <code>removeRange(position, positionAfter)</code>, but not in <code>List</code>.</p>\n<p>Removing an interval from a list can be O(1) in many list types, removing elements one by one would be O(n) and miss that ability. Converting a general <code>List</code> to a type that supports range removal would also be O(n) and miss the chance.</p>\n<p>Is there any way to remove a range of values from a general <code>List</code> in a way that the <code>List</code> implementations can optimize for this?</p>\n"},{"tags":["java","kubernetes","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698390086,"creation_date":1698390086,"answer_id":77372073,"question_id":77366138,"body_markdown":"In a remote partitioning setup, workers are listeners on a queue in which messages coming from the manager are of type `StepExecutionRequest`. So you can package workers as a regular message listening app (a long running process) waiting for step execution requests on a given queue.\r\n\r\nThe `StepExecutionRequestHandler` provided by Spring Batch and that is used on the worker side is able to handle requests for different jobs, so workers can be reused for different jobs.\r\n\r\nSo the way to deploy workers of a partitioned Spring Batch job in kubernetes would be the same way you would use to deploy a regular message consumer app.","title":"Spring batch Partitioning execute slave step in other pods in Kubernetes","body":"<p>In a remote partitioning setup, workers are listeners on a queue in which messages coming from the manager are of type <code>StepExecutionRequest</code>. So you can package workers as a regular message listening app (a long running process) waiting for step execution requests on a given queue.</p>\n<p>The <code>StepExecutionRequestHandler</code> provided by Spring Batch and that is used on the worker side is able to handle requests for different jobs, so workers can be reused for different jobs.</p>\n<p>So the way to deploy workers of a partitioned Spring Batch job in kubernetes would be the same way you would use to deploy a regular message consumer app.</p>\n"}],"owner":{"account_id":5279068,"reputation":895,"user_id":4215032,"display_name":"Pp88"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77372073,"answer_count":1,"score":0,"last_activity_date":1698390086,"creation_date":1698315675,"question_id":77366138,"body_markdown":"I&#39;ve read the [documentation](https://docs.spring.io/spring-batch/docs/current/reference/html/scalability.html#partitioning) about partitioning on spring batch. They say that it is possible to execute a step remotely.\r\nIt&#39;s possible to create pods that executes the partitioned slave step? \r\n\r\nIf yes someone knows how to do this?","title":"Spring batch Partitioning execute slave step in other pods in Kubernetes","body":"<p>I've read the <a href=\"https://docs.spring.io/spring-batch/docs/current/reference/html/scalability.html#partitioning\" rel=\"nofollow noreferrer\">documentation</a> about partitioning on spring batch. They say that it is possible to execute a step remotely.\nIt's possible to create pods that executes the partitioned slave step?</p>\n<p>If yes someone knows how to do this?</p>\n"},{"tags":["java","maven","build","maven-3"],"comments":[{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":2,"creation_date":1536860528,"post_id":52318089,"comment_id":91585560,"body_markdown":"If you think that parallel threads are writing to the log it is expected that the output is no more linear otherwise you would do a synchronisation to the logging output which would prevent real parallelization in the end. There is only a problem if you really have problem which you like to analyze...but for that you could change to single thread and analyse it...So ?","body":"If you think that parallel threads are writing to the log it is expected that the output is no more linear otherwise you would do a synchronisation to the logging output which would prevent real parallelization in the end. There is only a problem if you really have problem which you like to analyze...but for that you could change to single thread and analyse it...So ?"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1536864652,"post_id":52318089,"comment_id":91587470,"body_markdown":"How many modules do you have in your build?","body":"How many modules do you have in your build?"},{"owner":{"account_id":12008899,"reputation":331,"user_id":8797083,"display_name":"worldbeater"},"score":0,"creation_date":1537633840,"post_id":52318089,"comment_id":91859402,"body_markdown":"@khmarbause Thanks for your answer. I have about 30 modules in my project. And I do believe we can live with some unordered logging and go back to single thread in case of an issue.","body":"@khmarbause Thanks for your answer. I have about 30 modules in my project. And I do believe we can live with some unordered logging and go back to single thread in case of an issue."},{"owner":{"account_id":1770040,"reputation":954,"user_id":1615039,"display_name":"Scott"},"score":0,"creation_date":1694103302,"post_id":52318089,"comment_id":135850433,"body_markdown":"In my opinion this is a failure of maven. They should have changed the logging output to prepend a thread number or something (maybe optionally). After all thread 2 that&#39;s running X,Y,Z modules should easily be able to know that it&#39;s thread #2 (or heck, give it a unique generated name or something), and prepend log output from that thread.\nIt could even splice it to different files or whatever maven wanted to architect as a solution.\n\nBut as far as I know, they didn&#39;t think this through, or consider it worth doing.","body":"In my opinion this is a failure of maven. They should have changed the logging output to prepend a thread number or something (maybe optionally). After all thread 2 that&#39;s running X,Y,Z modules should easily be able to know that it&#39;s thread #2 (or heck, give it a unique generated name or something), and prepend log output from that thread. It could even splice it to different files or whatever maven wanted to architect as a solution.  But as far as I know, they didn&#39;t think this through, or consider it worth doing."}],"answers":[{"tags":[],"owner":{"account_id":7590669,"reputation":1088,"user_id":5758441,"display_name":"Ashraff Ali Wahab"},"down_vote_count":3,"up_vote_count":1,"is_accepted":false,"score":-2,"last_activity_date":1536861220,"creation_date":1536858719,"answer_id":52318649,"question_id":52318089,"body_markdown":"It is not possible with the Threading configuration used. The Threading is used only to get the files from repositories otherwise it is linear due to dependency unless your modules are independent in which case you would have created multiple build easily. You can disable the logging and print only errors in Thread mode.\r\n\r\nReference Link for linear execution: http://www.keensoft.es/en/speeding-up-maven-by-parallel-threads/","title":"Ordered output for maven parallel build","body":"<p>It is not possible with the Threading configuration used. The Threading is used only to get the files from repositories otherwise it is linear due to dependency unless your modules are independent in which case you would have created multiple build easily. You can disable the logging and print only errors in Thread mode.</p>\n\n<p>Reference Link for linear execution: <a href=\"http://www.keensoft.es/en/speeding-up-maven-by-parallel-threads/\" rel=\"nofollow noreferrer\">http://www.keensoft.es/en/speeding-up-maven-by-parallel-threads/</a></p>\n"},{"tags":[],"owner":{"account_id":1724700,"reputation":73,"user_id":1879514,"display_name":"Final&#39;Cie"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698390016,"creation_date":1698390016,"answer_id":77372067,"question_id":52318089,"body_markdown":"While maven still can not separate the logoutput per thread (as of version 3.9.5), there&#39;s still a way to make the log more debugable.\r\n\r\nIn the logging properties (%M2_HOME%\\conf\\logging\\simplelogger.properties), set these values:\r\n&gt; org.slf4j.simpleLogger.showDateTime=**true**\r\n&gt;\r\n&gt; org.slf4j.simpleLogger.showThreadName=**true**\r\n\r\nThe first config will add the milliseconds for the entire build and the second one will add the name of each thread to each line of the output. This makes it alot easier to analyze the logfile.\r\n\r\n(source: https://struberg.wordpress.com/2016/10/18/better-test-logs-in-parallel-maven-builds/)","title":"Ordered output for maven parallel build","body":"<p>While maven still can not separate the logoutput per thread (as of version 3.9.5), there's still a way to make the log more debugable.</p>\n<p>In the logging properties (%M2_HOME%\\conf\\logging\\simplelogger.properties), set these values:</p>\n<blockquote>\n<p>org.slf4j.simpleLogger.showDateTime=<strong>true</strong></p>\n<p>org.slf4j.simpleLogger.showThreadName=<strong>true</strong></p>\n</blockquote>\n<p>The first config will add the milliseconds for the entire build and the second one will add the name of each thread to each line of the output. This makes it alot easier to analyze the logfile.</p>\n<p>(source: <a href=\"https://struberg.wordpress.com/2016/10/18/better-test-logs-in-parallel-maven-builds/\" rel=\"nofollow noreferrer\">https://struberg.wordpress.com/2016/10/18/better-test-logs-in-parallel-maven-builds/</a>)</p>\n"}],"owner":{"account_id":12008899,"reputation":331,"user_id":8797083,"display_name":"worldbeater"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1072,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1698390016,"creation_date":1536856352,"question_id":52318089,"body_markdown":"I am using maven version 3+ to build my project. I am using parallel builds by using the command:\r\n**mvn -T 10 clean install**\r\n\r\nThis uses 10 threads and I get a 40%-50% decrease in build time. But at the same time, it messes up the output of the maven command and it becomes very difficult to make sense of. Is there a way I can get an ordered output or is their no way around the jumbled up console output?","title":"Ordered output for maven parallel build","body":"<p>I am using maven version 3+ to build my project. I am using parallel builds by using the command:\n<strong>mvn -T 10 clean install</strong></p>\n\n<p>This uses 10 threads and I get a 40%-50% decrease in build time. But at the same time, it messes up the output of the maven command and it becomes very difficult to make sense of. Is there a way I can get an ordered output or is their no way around the jumbled up console output?</p>\n"},{"tags":["java","google-app-engine","google-cloud-run"],"comments":[{"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1698063359,"post_id":77301774,"comment_id":136353575,"body_markdown":"These are log are in json objects which is getting printed. How json will interpret \\n? \\n will only work if you print them in the console. You have to get the actual value from log object and print them..","body":"These are log are in json objects which is getting printed. How json will interpret \\n? \\n will only work if you print them in the console. You have to get the actual value from log object and print them.."},{"owner":{"account_id":1674243,"reputation":10043,"user_id":1553537,"accept_rate":29,"display_name":"Giorgi Tsiklauri"},"score":0,"creation_date":1698656132,"post_id":77301774,"comment_id":136428173,"body_markdown":"I can&#39;t reproduce this. It works as you have in the expected case. Do you have any configuration for the logger?","body":"I can&#39;t reproduce this. It works as you have in the expected case. Do you have any configuration for the logger?"}],"owner":{"account_id":5705595,"reputation":6905,"user_id":4509268,"accept_rate":94,"display_name":"Jad Chahine"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":160,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1698389845,"creation_date":1697457509,"question_id":77301774,"body_markdown":"I am looking to log messages with multiple lines separated by `\\n` hence a log message can contain multiple lines in respect to the `\\n` as shown in the screenshot below.\r\n\r\nThe `\\n` is parsed as a new line which is correct but our problem is that it’s keeping it in the log output.\r\nNote that we are using the default Java logger of the `java.util.logging package.`\r\n\r\nThis is the code snippet concerning the text we are looking to log:\r\n\r\n\r\n```\r\nimport java.util.logging.Logger;\r\n\r\npublic static void main(String[] args) {\r\n    SpringApplication.run(DemoApplication.class, args);\r\n    logger.info(&quot;Log =&gt; &quot; + prepareWelcomeMessage());\r\n}\r\n\r\n\r\nprivate static String prepareWelcomeMessage() {\r\n    StringBuilder stringBuilder = new StringBuilder();\r\n\r\n    stringBuilder.append(&quot;\\n ****************************** WELCOME ****************************** \\n&quot;);\r\n    stringBuilder.append(&quot; ****************************** TO ****************************** \\n&quot;);\r\n    stringBuilder.append(&quot; ****************************** THE ****************************** \\n&quot;);\r\n    stringBuilder.append(&quot; ****************************** DEMO APPLICATION ****************************** \\n&quot;);\r\n    stringBuilder.append(&quot; ****************************** TO VALIDATE ****************************** \\n&quot;);\r\n    stringBuilder.append(&quot; ****************************** LOGS ****************************** \\n&quot;);\r\n    stringBuilder.append(&quot; ****************************** ON APP ENGINE FLEX ****************************** \\n&quot;);\r\n\r\n    return stringBuilder.toString();\r\n}\r\n```\r\n\r\n\r\nThe expected result is:\r\n[![enter image description here][1]][1]\r\n \r\n\r\n\r\nThe actual result is :\r\n[![enter image description here][2]][2]\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wufdn.png\r\n  [2]: https://i.stack.imgur.com/PvZkp.png","title":"Logs on Google App Engine / Google Cloud Run are appearing incorrectly","body":"<p>I am looking to log messages with multiple lines separated by <code>\\n</code> hence a log message can contain multiple lines in respect to the <code>\\n</code> as shown in the screenshot below.</p>\n<p>The <code>\\n</code> is parsed as a new line which is correct but our problem is that it’s keeping it in the log output.\nNote that we are using the default Java logger of the <code>java.util.logging package.</code></p>\n<p>This is the code snippet concerning the text we are looking to log:</p>\n<pre><code>import java.util.logging.Logger;\n\npublic static void main(String[] args) {\n    SpringApplication.run(DemoApplication.class, args);\n    logger.info(&quot;Log =&gt; &quot; + prepareWelcomeMessage());\n}\n\n\nprivate static String prepareWelcomeMessage() {\n    StringBuilder stringBuilder = new StringBuilder();\n\n    stringBuilder.append(&quot;\\n ****************************** WELCOME ****************************** \\n&quot;);\n    stringBuilder.append(&quot; ****************************** TO ****************************** \\n&quot;);\n    stringBuilder.append(&quot; ****************************** THE ****************************** \\n&quot;);\n    stringBuilder.append(&quot; ****************************** DEMO APPLICATION ****************************** \\n&quot;);\n    stringBuilder.append(&quot; ****************************** TO VALIDATE ****************************** \\n&quot;);\n    stringBuilder.append(&quot; ****************************** LOGS ****************************** \\n&quot;);\n    stringBuilder.append(&quot; ****************************** ON APP ENGINE FLEX ****************************** \\n&quot;);\n\n    return stringBuilder.toString();\n}\n</code></pre>\n<p>The expected result is:\n<a href=\"https://i.stack.imgur.com/wufdn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wufdn.png\" alt=\"enter image description here\" /></a></p>\n<p>The actual result is :\n<a href=\"https://i.stack.imgur.com/PvZkp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PvZkp.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","email","jakarta-mail","attachment"],"comments":[{"owner":{"account_id":5603344,"reputation":305,"user_id":4438847,"accept_rate":67,"display_name":"Lucas Baizer"},"score":0,"creation_date":1521910181,"post_id":49467285,"comment_id":85937094,"body_markdown":"What version of the JDK are you using?","body":"What version of the JDK are you using?"},{"owner":{"account_id":9089375,"reputation":108,"user_id":6765936,"accept_rate":80,"display_name":"Aleksandar Stojanovic"},"score":0,"creation_date":1521910444,"post_id":49467285,"comment_id":85937185,"body_markdown":"jdk1.8.0_111 @LucasBaizer","body":"jdk1.8.0_111 @LucasBaizer"}],"answers":[{"tags":[],"owner":{"account_id":8357433,"reputation":31,"user_id":6277131,"display_name":"Shan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521911854,"creation_date":1521911003,"answer_id":49467439,"question_id":49467285,"body_markdown":"Add below dependency in your pom.xml and try to rebuild again:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\r\n            &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;","title":"Downloading email attachments in java","body":"<p>Add below dependency in your pom.xml and try to rebuild again:</p>\n\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.sun.mail&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.mail&lt;/artifactId&gt;\n        &lt;version&gt;1.6.1&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":9089375,"reputation":108,"user_id":6765936,"accept_rate":80,"display_name":"Aleksandar Stojanovic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":3692,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698389810,"creation_date":1521909903,"question_id":49467285,"body_markdown":"The following code should download any attachments from mail if there are any . Gmali , pop3 , javax.mail ... Any ides how to do this , maybe for specific sender of a mail , or check that mail if there is a specifick word in the title or something like that ? \r\n\r\n\r\n    package emailattachmentsdownloader;\r\n    import java.io.File;\r\n    import java.io.IOException;\r\n    import java.util.Properties;\r\n    import javax.mail.Address;\r\n    import javax.mail.Folder;\r\n    import javax.mail.Message;\r\n    import javax.mail.MessagingException;\r\n    import javax.mail.Multipart;\r\n    import javax.mail.NoSuchProviderException;\r\n    import javax.mail.Part;\r\n    import javax.mail.Session;\r\n    import javax.mail.Store;\r\n    import javax.mail.internet.MimeBodyPart;\r\n    /**\r\n     * This program demonstrates how to download e-mail messages and save\r\n     * attachments into files on disk.\r\n     *\r\n     * \r\n     *\r\n     */\r\n    public class EmailAttachmentsDownloader {\r\n        private String saveDirectory;\r\n        /**\r\n         * Sets the directory where attached files will be stored.\r\n         * @param dir absolute path of the directory\r\n         */\r\n        public void setSaveDirectory(String dir) {\r\n            this.saveDirectory = dir;\r\n        }\r\n        /**\r\n         * Downloads new messages and saves attachments to disk if any.\r\n         * @param host\r\n         * @param port\r\n         * @param userName\r\n         * @param password\r\n         */\r\n        public void downloadEmailAttachments(String host, String port,\r\n                String userName, String password) {\r\n            Properties properties = new Properties();\r\n     \r\n            // server setting\r\n            properties.put(&quot;mail.pop3.host&quot;, host);\r\n            properties.put(&quot;mail.pop3.port&quot;, port);\r\n     \r\n            // SSL setting\r\n            properties.setProperty(&quot;mail.pop3.socketFactory.class&quot;,\r\n                    &quot;javax.net.ssl.SSLSocketFactory&quot;);\r\n            properties.setProperty(&quot;mail.pop3.socketFactory.fallback&quot;, &quot;false&quot;);\r\n            properties.setProperty(&quot;mail.pop3.socketFactory.port&quot;,\r\n                    String.valueOf(port));\r\n     \r\n            Session session = Session.getDefaultInstance(properties);\r\n     \r\n            try {\r\n                // connects to the message store\r\n                Store store = session.getStore(&quot;pop3&quot;);\r\n                store.connect(userName, password);\r\n     \r\n                // opens the inbox folder\r\n                Folder folderInbox = store.getFolder(&quot;INBOX&quot;);\r\n                folderInbox.open(Folder.READ_ONLY);\r\n     \r\n                // fetches new messages from server\r\n                Message[] arrayMessages = folderInbox.getMessages();\r\n     \r\n                for (int i = 0; i &lt; arrayMessages.length; i++) {\r\n                    Message message = arrayMessages[i];\r\n                    Address[] fromAddress = message.getFrom();\r\n                    String from = fromAddress[0].toString();\r\n                    String subject = message.getSubject();\r\n                    String sentDate = message.getSentDate().toString();\r\n     \r\n                    String contentType = message.getContentType();\r\n                    String messageContent = &quot;&quot;;\r\n     \r\n                    // store attachment file name, separated by comma\r\n                    String attachFiles = &quot;&quot;;\r\n     \r\n                    if (contentType.contains(&quot;multipart&quot;)) {\r\n                        // content may contain attachments\r\n                        Multipart multiPart = (Multipart) message.getContent();\r\n                        int numberOfParts = multiPart.getCount();\r\n                        for (int partCount = 0; partCount &lt; numberOfParts; partCount++) {\r\n                            MimeBodyPart part = (MimeBodyPart) multiPart.getBodyPart(partCount);\r\n                            if (Part.ATTACHMENT.equalsIgnoreCase(part.getDisposition())) {\r\n                                // this part is attachment\r\n                                String fileName = part.getFileName();\r\n                                attachFiles += fileName + &quot;, &quot;;\r\n                                part.saveFile(saveDirectory + File.separator + fileName);\r\n                            } else {\r\n                                // this part may be the message content\r\n                                messageContent = part.getContent().toString();\r\n                            }\r\n                        }\r\n     \r\n                        if (attachFiles.length() &gt; 1) {\r\n                            attachFiles = attachFiles.substring(0, attachFiles.length() - 2);\r\n                        }\r\n                    } else if (contentType.contains(&quot;text/plain&quot;)\r\n                            || contentType.contains(&quot;text/html&quot;)) {\r\n                        Object content = message.getContent();\r\n                        if (content != null) {\r\n                            messageContent = content.toString();\r\n                        }\r\n                    }\r\n     \r\n                    // print out details of each message\r\n                    System.out.println(&quot;Message #&quot; + (i + 1) + &quot;:&quot;);\r\n                    System.out.println(&quot;\\t From: &quot; + from);\r\n                    System.out.println(&quot;\\t Subject: &quot; + subject);\r\n                    System.out.println(&quot;\\t Sent Date: &quot; + sentDate);\r\n                    System.out.println(&quot;\\t Message: &quot; + messageContent);\r\n                    System.out.println(&quot;\\t Attachments: &quot; + attachFiles);\r\n                }\r\n     \r\n                // disconnect\r\n                folderInbox.close(false);\r\n                store.close();\r\n            } catch (NoSuchProviderException ex) {\r\n                System.out.println(&quot;No provider for pop3.&quot;);\r\n                ex.printStackTrace();\r\n            } catch (MessagingException ex) {\r\n                System.out.println(&quot;Could not connect to the message store&quot;);\r\n                ex.printStackTrace();\r\n            } catch (IOException ex) {\r\n                ex.printStackTrace();\r\n            }\r\n        }\r\n     \r\n        /**\r\n         * Runs this program with Gmail POP3 server\r\n         */\r\n        public static void main(String[] args) {\r\n            String host = &quot;pop.gmail.com&quot;;\r\n            String port = &quot;995&quot;;\r\n            String userName = &quot;MYMAIL&quot;;\r\n            String password = &quot;MYPASS&quot;;\r\n     \r\n            String saveDirectory = &quot;D:/Attachments&quot;;\r\n     \r\n            EmailAttachmentsDownloader receiver = new \r\n            EmailAttachmentsDownloader();\r\n            receiver.setSaveDirectory(saveDirectory);\r\n            receiver.downloadEmailAttachments(host, port, userName, password);\r\n     \r\n        }\r\n    }\r\n\r\nBut when i run it i get the following error. Whats the problem , what should i do ?\r\n\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: \r\n    com/sun/mail/util/MailLogger\r\n    at javax.mail.Session.initLogger(Session.java:227)\r\n    at javax.mail.Session.&lt;init&gt;(Session.java:212)\r\n    at javax.mail.Session.getDefaultInstance(Session.java:315)\r\n    at javax.mail.Session.getDefaultInstance(Session.java:355)\r\n    at emailattachmentsdownloader.EmailAttachmentsDownloader.downloadEmailAttachments(EmailAttachmentsDownloader.java:53)\r\n    at emailattachmentsdownloader.EmailAttachmentsDownloader.main(EmailAttachmentsDownloader.java:144)\r\n    Caused by: java.lang.ClassNotFoundException: com.sun.mail.util.MailLogger\r\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:381)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:424)\r\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\r\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:357)\r\n    ... 6 more\r\n    C:\\Users\\Aca\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53: \r\n    Java returned: 1\r\n    BUILD FAILED (total time: 0 seconds)\r\n\r\n","title":"Downloading email attachments in java","body":"<p>The following code should download any attachments from mail if there are any . Gmali , pop3 , javax.mail ... Any ides how to do this , maybe for specific sender of a mail , or check that mail if there is a specifick word in the title or something like that ? </p>\n\n<pre><code>package emailattachmentsdownloader;\nimport java.io.File;\nimport java.io.IOException;\nimport java.util.Properties;\nimport javax.mail.Address;\nimport javax.mail.Folder;\nimport javax.mail.Message;\nimport javax.mail.MessagingException;\nimport javax.mail.Multipart;\nimport javax.mail.NoSuchProviderException;\nimport javax.mail.Part;\nimport javax.mail.Session;\nimport javax.mail.Store;\nimport javax.mail.internet.MimeBodyPart;\n/**\n * This program demonstrates how to download e-mail messages and save\n * attachments into files on disk.\n *\n * \n *\n */\npublic class EmailAttachmentsDownloader {\n    private String saveDirectory;\n    /**\n     * Sets the directory where attached files will be stored.\n     * @param dir absolute path of the directory\n     */\n    public void setSaveDirectory(String dir) {\n        this.saveDirectory = dir;\n    }\n    /**\n     * Downloads new messages and saves attachments to disk if any.\n     * @param host\n     * @param port\n     * @param userName\n     * @param password\n     */\n    public void downloadEmailAttachments(String host, String port,\n            String userName, String password) {\n        Properties properties = new Properties();\n\n        // server setting\n        properties.put(\"mail.pop3.host\", host);\n        properties.put(\"mail.pop3.port\", port);\n\n        // SSL setting\n        properties.setProperty(\"mail.pop3.socketFactory.class\",\n                \"javax.net.ssl.SSLSocketFactory\");\n        properties.setProperty(\"mail.pop3.socketFactory.fallback\", \"false\");\n        properties.setProperty(\"mail.pop3.socketFactory.port\",\n                String.valueOf(port));\n\n        Session session = Session.getDefaultInstance(properties);\n\n        try {\n            // connects to the message store\n            Store store = session.getStore(\"pop3\");\n            store.connect(userName, password);\n\n            // opens the inbox folder\n            Folder folderInbox = store.getFolder(\"INBOX\");\n            folderInbox.open(Folder.READ_ONLY);\n\n            // fetches new messages from server\n            Message[] arrayMessages = folderInbox.getMessages();\n\n            for (int i = 0; i &lt; arrayMessages.length; i++) {\n                Message message = arrayMessages[i];\n                Address[] fromAddress = message.getFrom();\n                String from = fromAddress[0].toString();\n                String subject = message.getSubject();\n                String sentDate = message.getSentDate().toString();\n\n                String contentType = message.getContentType();\n                String messageContent = \"\";\n\n                // store attachment file name, separated by comma\n                String attachFiles = \"\";\n\n                if (contentType.contains(\"multipart\")) {\n                    // content may contain attachments\n                    Multipart multiPart = (Multipart) message.getContent();\n                    int numberOfParts = multiPart.getCount();\n                    for (int partCount = 0; partCount &lt; numberOfParts; partCount++) {\n                        MimeBodyPart part = (MimeBodyPart) multiPart.getBodyPart(partCount);\n                        if (Part.ATTACHMENT.equalsIgnoreCase(part.getDisposition())) {\n                            // this part is attachment\n                            String fileName = part.getFileName();\n                            attachFiles += fileName + \", \";\n                            part.saveFile(saveDirectory + File.separator + fileName);\n                        } else {\n                            // this part may be the message content\n                            messageContent = part.getContent().toString();\n                        }\n                    }\n\n                    if (attachFiles.length() &gt; 1) {\n                        attachFiles = attachFiles.substring(0, attachFiles.length() - 2);\n                    }\n                } else if (contentType.contains(\"text/plain\")\n                        || contentType.contains(\"text/html\")) {\n                    Object content = message.getContent();\n                    if (content != null) {\n                        messageContent = content.toString();\n                    }\n                }\n\n                // print out details of each message\n                System.out.println(\"Message #\" + (i + 1) + \":\");\n                System.out.println(\"\\t From: \" + from);\n                System.out.println(\"\\t Subject: \" + subject);\n                System.out.println(\"\\t Sent Date: \" + sentDate);\n                System.out.println(\"\\t Message: \" + messageContent);\n                System.out.println(\"\\t Attachments: \" + attachFiles);\n            }\n\n            // disconnect\n            folderInbox.close(false);\n            store.close();\n        } catch (NoSuchProviderException ex) {\n            System.out.println(\"No provider for pop3.\");\n            ex.printStackTrace();\n        } catch (MessagingException ex) {\n            System.out.println(\"Could not connect to the message store\");\n            ex.printStackTrace();\n        } catch (IOException ex) {\n            ex.printStackTrace();\n        }\n    }\n\n    /**\n     * Runs this program with Gmail POP3 server\n     */\n    public static void main(String[] args) {\n        String host = \"pop.gmail.com\";\n        String port = \"995\";\n        String userName = \"MYMAIL\";\n        String password = \"MYPASS\";\n\n        String saveDirectory = \"D:/Attachments\";\n\n        EmailAttachmentsDownloader receiver = new \n        EmailAttachmentsDownloader();\n        receiver.setSaveDirectory(saveDirectory);\n        receiver.downloadEmailAttachments(host, port, userName, password);\n\n    }\n}\n</code></pre>\n\n<p>But when i run it i get the following error. Whats the problem , what should i do ?</p>\n\n<pre><code>Exception in thread \"main\" java.lang.NoClassDefFoundError: \ncom/sun/mail/util/MailLogger\nat javax.mail.Session.initLogger(Session.java:227)\nat javax.mail.Session.&lt;init&gt;(Session.java:212)\nat javax.mail.Session.getDefaultInstance(Session.java:315)\nat javax.mail.Session.getDefaultInstance(Session.java:355)\nat emailattachmentsdownloader.EmailAttachmentsDownloader.downloadEmailAttachments(EmailAttachmentsDownloader.java:53)\nat emailattachmentsdownloader.EmailAttachmentsDownloader.main(EmailAttachmentsDownloader.java:144)\nCaused by: java.lang.ClassNotFoundException: com.sun.mail.util.MailLogger\nat java.net.URLClassLoader.findClass(URLClassLoader.java:381)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:424)\nat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:331)\nat java.lang.ClassLoader.loadClass(ClassLoader.java:357)\n... 6 more\nC:\\Users\\Aca\\AppData\\Local\\NetBeans\\Cache\\8.2\\executor-snippets\\run.xml:53: \nJava returned: 1\nBUILD FAILED (total time: 0 seconds)\n</code></pre>\n"},{"tags":["java","android","timer","admob"],"answers":[{"tags":[],"owner":{"account_id":18812812,"reputation":92,"user_id":13720647,"display_name":"Zobaer Hossain"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1698388729,"creation_date":1698388729,"answer_id":77371966,"question_id":77371566,"body_markdown":"To show an ad after a certain time interval, you can use a Handler to schedule the ad display. In your case, you can modify your code as follows:\r\n\r\n    // Declare these variables at the beginning of your activity\r\n      private InterstitialAd interstitialAd;\r\n      private Handler adHandler;\r\n      private static final long AD_DELAY = 30000; // 30 seconds in milliseconds\r\n\r\n      // Initialize your ad in onCreate or wherever is appropriate\r\n      MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n      @Override\r\n      public void onInitializationComplete(InitializationStatus) {\r\n       }\r\n      });\r\n\r\n      AdRequest adRequest = new AdRequest.Builder().build();\r\n\r\n      InterstitialAd.load(this, &quot;ca-app-pub- \r\n       123256789123456/1234567890&quot;,adRequest, new InterstitialAdLoadCallback() \r\n       {\r\n    @Override\r\n    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n        MainActivity.this.interstitialAd = interstitialAd;\r\n\r\n        // Schedule ad display after a delay\r\n        adHandler = new Handler();\r\n        adHandler.postDelayed(new Runnable() {\r\n            public void run() {\r\n                if (MainActivity.this.interstitialAd != null) {\r\n                    MainActivity.this.interstitialAd.show(MainActivity.this);\r\n                }\r\n            }\r\n        }, AD_DELAY);\r\n\r\n        interstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\r\n            // Your callback methods here\r\n        });\r\n    }\r\n\r\n    @Override\r\n    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n      }\r\n    });\r\n\r\n\r\n\r\n\r\nThis code schedules the ad to display after a 30-second delay. You should place this code in your onCreate method or wherever it&#39;s appropriate for your app&#39;s flow. Once the InterstitialAd is loaded and the Handler fires after the specified delay, it will show the ad.\r\n\r\nRemember to manage the adHandler and the interstitialAd variable properly in your activity&#39;s lifecycle to avoid memory leaks or issues when navigating between activities or fragments.","title":"Trying to show ad after certain time using android webview","body":"<p>To show an ad after a certain time interval, you can use a Handler to schedule the ad display. In your case, you can modify your code as follows:</p>\n<pre><code>// Declare these variables at the beginning of your activity\n  private InterstitialAd interstitialAd;\n  private Handler adHandler;\n  private static final long AD_DELAY = 30000; // 30 seconds in milliseconds\n\n  // Initialize your ad in onCreate or wherever is appropriate\n  MobileAds.initialize(this, new OnInitializationCompleteListener() {\n  @Override\n  public void onInitializationComplete(InitializationStatus) {\n   }\n  });\n\n  AdRequest adRequest = new AdRequest.Builder().build();\n\n  InterstitialAd.load(this, &quot;ca-app-pub- \n   123256789123456/1234567890&quot;,adRequest, new InterstitialAdLoadCallback() \n   {\n@Override\npublic void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n    MainActivity.this.interstitialAd = interstitialAd;\n\n    // Schedule ad display after a delay\n    adHandler = new Handler();\n    adHandler.postDelayed(new Runnable() {\n        public void run() {\n            if (MainActivity.this.interstitialAd != null) {\n                MainActivity.this.interstitialAd.show(MainActivity.this);\n            }\n        }\n    }, AD_DELAY);\n\n    interstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\n        // Your callback methods here\n    });\n}\n\n@Override\npublic void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n  }\n});\n</code></pre>\n<p>This code schedules the ad to display after a 30-second delay. You should place this code in your onCreate method or wherever it's appropriate for your app's flow. Once the InterstitialAd is loaded and the Handler fires after the specified delay, it will show the ad.</p>\n<p>Remember to manage the adHandler and the interstitialAd variable properly in your activity's lifecycle to avoid memory leaks or issues when navigating between activities or fragments.</p>\n"}],"owner":{"account_id":29764484,"reputation":21,"user_id":22811140,"display_name":"Lili Meet"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1698388729,"creation_date":1698381998,"question_id":77371566,"body_markdown":"As I mentioned in the question title that I am trying to show ad after a certain time like after every 30 seconds. I am doing this because I am using WebView so in WebView I have no idea about if there is a way to control admob ads through the website which is being loaded inside the Android Webview. Below is my code from `MainActivity.java` right now the ad is showing but only at the time when application starts and after there is no ad so I just to show every after 30 seconds\r\n\r\n\r\n```\r\n        MobileAds.initialize(this, new OnInitializationCompleteListener() {\r\n            @Override\r\n            public void onInitializationComplete(InitializationStatus initializationStatus) {\r\n            }\r\n        });\r\n\r\n\r\n        //AdView mAdView;\r\n        //mAdView = findViewById(R.id.adView);\r\n        //AdRequest bannerRequest = new AdRequest.Builder().build();\r\n        //mAdView.loadAd(bannerRequest);\r\n\r\n        AdRequest adRequest = new AdRequest.Builder().build();\r\n\r\n        InterstitialAd.load(this,&quot;ca-app-pub-123256789123456/1234567890&quot;, adRequest,\r\n                new InterstitialAdLoadCallback() {\r\n                    @Override\r\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\r\n                        interstitialAd.show(MainActivity.this);\r\n                        interstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\r\n                            @Override\r\n                            public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\r\n                                super.onAdFailedToShowFullScreenContent(adError);\r\n                            }\r\n\r\n                            @Override\r\n                            public void onAdShowedFullScreenContent() {\r\n                                super.onAdShowedFullScreenContent();\r\n                            }\r\n\r\n                            @Override\r\n                            public void onAdDismissedFullScreenContent() {\r\n                                super.onAdDismissedFullScreenContent();\r\n                            }\r\n\r\n                            @Override\r\n                            public void onAdImpression() {\r\n                                super.onAdImpression();\r\n                            }\r\n\r\n                            @Override\r\n                            public void onAdClicked() {\r\n                                super.onAdClicked();\r\n                            }\r\n                        });\r\n                    }\r\n\r\n                    @Override\r\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\r\n                    }\r\n                });\r\n\r\n```\r\nI found this code as solution through the internet but I have no idea if the same code will work in my case or if there is any changes required in the code and lastly where should I place this code:\r\n\r\n```\r\ninterstitialAd.setAdListener(new AdListener() {\r\n    public void onAdLoaded() {\r\n        Handler handler = new Handler();\r\n        handler.postDelayed(new Runnable() {\r\n            public void run() {\r\n                MainActivity.this.interstitialAd.show();\r\n            }\r\n        }, 5000);\r\n    }\r\n});\r\n```","title":"Trying to show ad after certain time using android webview","body":"<p>As I mentioned in the question title that I am trying to show ad after a certain time like after every 30 seconds. I am doing this because I am using WebView so in WebView I have no idea about if there is a way to control admob ads through the website which is being loaded inside the Android Webview. Below is my code from <code>MainActivity.java</code> right now the ad is showing but only at the time when application starts and after there is no ad so I just to show every after 30 seconds</p>\n<pre><code>        MobileAds.initialize(this, new OnInitializationCompleteListener() {\n            @Override\n            public void onInitializationComplete(InitializationStatus initializationStatus) {\n            }\n        });\n\n\n        //AdView mAdView;\n        //mAdView = findViewById(R.id.adView);\n        //AdRequest bannerRequest = new AdRequest.Builder().build();\n        //mAdView.loadAd(bannerRequest);\n\n        AdRequest adRequest = new AdRequest.Builder().build();\n\n        InterstitialAd.load(this,&quot;ca-app-pub-123256789123456/1234567890&quot;, adRequest,\n                new InterstitialAdLoadCallback() {\n                    @Override\n                    public void onAdLoaded(@NonNull InterstitialAd interstitialAd) {\n                        interstitialAd.show(MainActivity.this);\n                        interstitialAd.setFullScreenContentCallback(new FullScreenContentCallback() {\n                            @Override\n                            public void onAdFailedToShowFullScreenContent(@NonNull AdError adError) {\n                                super.onAdFailedToShowFullScreenContent(adError);\n                            }\n\n                            @Override\n                            public void onAdShowedFullScreenContent() {\n                                super.onAdShowedFullScreenContent();\n                            }\n\n                            @Override\n                            public void onAdDismissedFullScreenContent() {\n                                super.onAdDismissedFullScreenContent();\n                            }\n\n                            @Override\n                            public void onAdImpression() {\n                                super.onAdImpression();\n                            }\n\n                            @Override\n                            public void onAdClicked() {\n                                super.onAdClicked();\n                            }\n                        });\n                    }\n\n                    @Override\n                    public void onAdFailedToLoad(@NonNull LoadAdError loadAdError) {\n                    }\n                });\n\n</code></pre>\n<p>I found this code as solution through the internet but I have no idea if the same code will work in my case or if there is any changes required in the code and lastly where should I place this code:</p>\n<pre><code>interstitialAd.setAdListener(new AdListener() {\n    public void onAdLoaded() {\n        Handler handler = new Handler();\n        handler.postDelayed(new Runnable() {\n            public void run() {\n                MainActivity.this.interstitialAd.show();\n            }\n        }, 5000);\n    }\n});\n</code></pre>\n"},{"tags":["java","apache-poi","docx","apache-poi-4"],"answers":[{"tags":[],"owner":{"account_id":20151450,"reputation":3,"user_id":14778664,"display_name":"Zuhlek"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1696691052,"creation_date":1696690964,"answer_id":77250315,"question_id":76120737,"body_markdown":"I can&#39;t provide you with an exact solution for your problem, but some hints might help you out (I had a pretty similar issue).\r\n\r\nThe question is what kind of element you are showing in your screenshot. If you say it is neither a paragraph nor a table, then it might be an embedded file? In the [documentation][1] there is a method to fetch those: \r\n\r\n[getAllEmbeddedParts()][2]\r\n\r\nAlso, check out this repo which I found when I was solving a quite similar problem (maybe you find something helpful for your case as well):\r\n\r\nhttps://github.com/deividasstr/docx-word-replacer\r\n\r\n\r\n  [1]: https://poi.apache.org/apidocs/5.0/\r\n  [2]: https://i.stack.imgur.com/zPN9n.png","title":"Insert an XSLFTetxRun in a specified position using Apache POI","body":"<p>I can't provide you with an exact solution for your problem, but some hints might help you out (I had a pretty similar issue).</p>\n<p>The question is what kind of element you are showing in your screenshot. If you say it is neither a paragraph nor a table, then it might be an embedded file? In the <a href=\"https://poi.apache.org/apidocs/5.0/\" rel=\"nofollow noreferrer\">documentation</a> there is a method to fetch those:</p>\n<p><a href=\"https://i.stack.imgur.com/zPN9n.png\" rel=\"nofollow noreferrer\">getAllEmbeddedParts()</a></p>\n<p>Also, check out this repo which I found when I was solving a quite similar problem (maybe you find something helpful for your case as well):</p>\n<p><a href=\"https://github.com/deividasstr/docx-word-replacer\" rel=\"nofollow noreferrer\">https://github.com/deividasstr/docx-word-replacer</a></p>\n"}],"owner":{"account_id":28242228,"reputation":9,"user_id":21589845,"display_name":"Furqan Ahmed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":181,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698388569,"creation_date":1682600426,"question_id":76120737,"body_markdown":"I am currently working on a Document Management System using Apache POI in which I have to replace certain placeholders from XSLFParagraph text. Previously using XWPFParagraph, I was able to insert an XWPFRun on a specified position e.g., \r\n\r\n    XWPFRun beforePlaceholderRun = paragraph.insertNewRun(start);\r\nThe above code insert run in a paragraph on a specified position i.e., start. I couldn&#39;t find any functions that inserts an XSLFTextRun in a specified position of XSLFTextParagraph. E.g., the below code insert an XSLFTextRun in the end of the paragraph\r\n\r\n    XSLFTextRun placeholderRun = paragraph.addNewTextRun();\r\nBut what I want to achieve is to insert an XSLFTextRun on a specified position of an XSLFParagraph when the XSLFParagraph is comprised of multiple XSLFTextRun. Can anybody please guide me how can I achieve this?","title":"Insert an XSLFTetxRun in a specified position using Apache POI","body":"<p>I am currently working on a Document Management System using Apache POI in which I have to replace certain placeholders from XSLFParagraph text. Previously using XWPFParagraph, I was able to insert an XWPFRun on a specified position e.g.,</p>\n<pre><code>XWPFRun beforePlaceholderRun = paragraph.insertNewRun(start);\n</code></pre>\n<p>The above code insert run in a paragraph on a specified position i.e., start. I couldn't find any functions that inserts an XSLFTextRun in a specified position of XSLFTextParagraph. E.g., the below code insert an XSLFTextRun in the end of the paragraph</p>\n<pre><code>XSLFTextRun placeholderRun = paragraph.addNewTextRun();\n</code></pre>\n<p>But what I want to achieve is to insert an XSLFTextRun on a specified position of an XSLFParagraph when the XSLFParagraph is comprised of multiple XSLFTextRun. Can anybody please guide me how can I achieve this?</p>\n"},{"tags":["java","logging","httpclient","connection-pooling","httpconnection"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1698387399,"post_id":77371700,"comment_id":136401297,"body_markdown":"maybe that it is your first HTTP connection in the pool and you didn&#39;t open any reusable connection before?","body":"maybe that it is your first HTTP connection in the pool and you didn&#39;t open any reusable connection before?"}],"answers":[{"tags":[],"owner":{"account_id":22130238,"reputation":1,"user_id":16381891,"display_name":"Priya"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698387598,"creation_date":1698387598,"answer_id":77371886,"question_id":77371700,"body_markdown":"The log message you provided is from the **PoolingHttpClientConnectionManager** class of Apache HttpClient, and while it doesn&#39;t have an official, detailed public documentation for this log message format, I can provide some context to help you understand what these values typically represent:\r\n\r\nTotal Available: This typically represents the total number of connections that are currently available in the connection pool for all routes. In your log message, it shows &quot;0,&quot; which means that there are no available connections at that moment.\r\n\r\nRoute Allocated: This represents the number of connections that are currently allocated for a specific route. A &quot;route&quot; in this context typically refers to a specific combination of target host and proxy (if any). For example, in your log, the route is shown as &quot;{tls}-&gt;http://xxxxx,&quot; which implies it&#39;s a TLS (HTTPS) connection going through an HTTP proxy.\r\n\r\nTotal Allocated: This represents the total number of connections that are currently allocated across all routes. In your log message, it shows &quot;1,&quot; which means that there&#39;s one connection currently in use.\r\n\r\nTo give you a better idea, let&#39;s break down your log message:\r\n\r\n&quot;Connection request: [route: {tls}-&gt;http://xxxxx][total available: 0; route allocated: 1 of 10; total allocated: 1 of 20]&quot;\r\n\r\nTotal Available: 0 - There are currently no available connections in the pool for all routes.\r\n\r\nRoute Allocated: 1 of 10 - For the specific route &quot;{tls}-&gt;http://xxxxx,&quot; one connection has been allocated, and you can allocate up to 10 connections for this route.\r\n\r\nTotal Allocated: 1 of 20 - Across all routes, there is one connection currently allocated, and you can allocate up to 20 connections in total.\r\nIn your configuration, you&#39;ve set a maximum total of 20 connections and a maximum of 10 connections per route. The purpose of these settings is to limit the number of concurrent connections to a specific host or route and to the total number of connections in the pool to prevent overloading the server or exhausting system resources.\r\n\r\nWhile you won&#39;t find detailed public documentation for this log message format, you can generally rely on these interpretations to understand the log messages generated by the PoolingHttpClientConnectionManager.","title":"meaning of PoolingHttpClientConnectionManager logs &quot;total available&quot;","body":"<p>The log message you provided is from the <strong>PoolingHttpClientConnectionManager</strong> class of Apache HttpClient, and while it doesn't have an official, detailed public documentation for this log message format, I can provide some context to help you understand what these values typically represent:</p>\n<p>Total Available: This typically represents the total number of connections that are currently available in the connection pool for all routes. In your log message, it shows &quot;0,&quot; which means that there are no available connections at that moment.</p>\n<p>Route Allocated: This represents the number of connections that are currently allocated for a specific route. A &quot;route&quot; in this context typically refers to a specific combination of target host and proxy (if any). For example, in your log, the route is shown as &quot;{tls}-&gt;http://xxxxx,&quot; which implies it's a TLS (HTTPS) connection going through an HTTP proxy.</p>\n<p>Total Allocated: This represents the total number of connections that are currently allocated across all routes. In your log message, it shows &quot;1,&quot; which means that there's one connection currently in use.</p>\n<p>To give you a better idea, let's break down your log message:</p>\n<p>&quot;Connection request: [route: {tls}-&gt;http://xxxxx][total available: 0; route allocated: 1 of 10; total allocated: 1 of 20]&quot;</p>\n<p>Total Available: 0 - There are currently no available connections in the pool for all routes.</p>\n<p>Route Allocated: 1 of 10 - For the specific route &quot;{tls}-&gt;http://xxxxx,&quot; one connection has been allocated, and you can allocate up to 10 connections for this route.</p>\n<p>Total Allocated: 1 of 20 - Across all routes, there is one connection currently allocated, and you can allocate up to 20 connections in total.\nIn your configuration, you've set a maximum total of 20 connections and a maximum of 10 connections per route. The purpose of these settings is to limit the number of concurrent connections to a specific host or route and to the total number of connections in the pool to prevent overloading the server or exhausting system resources.</p>\n<p>While you won't find detailed public documentation for this log message format, you can generally rely on these interpretations to understand the log messages generated by the PoolingHttpClientConnectionManager.</p>\n"}],"owner":{"account_id":29764655,"reputation":1,"user_id":22811257,"display_name":"Harrison"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698387598,"creation_date":1698384574,"question_id":77371700,"body_markdown":"I&#39;m using PoolingHttpClientConnectionManager to configure how many concurrent requests I could send to servers, my code looks like\r\n\r\n``` lang-java\r\nprivate RestTemplate createRestTemplate(HttpHost proxy) throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\r\n    CloseableHttpClient httpClient;\r\n    PoolingHttpClientConnectionManager connManager = new PoolingHttpClientConnectionManager();\r\n    connManager.setMaxTotal(20);\r\n    connManager.setDefaultMaxPerRoute(10);\r\n```\r\n\r\nand I enabled logs in logback config like\r\n``` lang-xml\r\n&lt;logger name=&quot;org.apache.http.impl.conn.PoolingHttpClientConnectionManager&quot; level=&quot;DEBUG&quot;/&gt;\r\n```\r\n\r\nWhen testing, logs look like\r\n``` lang-none\r\nh.i.c.PoolingHttpClientConnectionManager : Connection request: [route: {tls}-&gt;http://xxxxx][total available: 0; route allocated: 1 of 10; total allocated: 1 of 20]\r\n```\r\n\r\nI can guess the meaning of `route allocated` and `total allocated`, but wonder what does it mean for `total available`? It doesn&#39;t make sense for available connections or something, please let me know if there&#39;s a doc about this, thanks.\r\n\r\nI can&#39;t find online doc about this","title":"meaning of PoolingHttpClientConnectionManager logs &quot;total available&quot;","body":"<p>I'm using PoolingHttpClientConnectionManager to configure how many concurrent requests I could send to servers, my code looks like</p>\n<pre class=\"lang-java prettyprint-override\"><code>private RestTemplate createRestTemplate(HttpHost proxy) throws NoSuchAlgorithmException, KeyStoreException, KeyManagementException {\n    CloseableHttpClient httpClient;\n    PoolingHttpClientConnectionManager connManager = new PoolingHttpClientConnectionManager();\n    connManager.setMaxTotal(20);\n    connManager.setDefaultMaxPerRoute(10);\n</code></pre>\n<p>and I enabled logs in logback config like</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;logger name=&quot;org.apache.http.impl.conn.PoolingHttpClientConnectionManager&quot; level=&quot;DEBUG&quot;/&gt;\n</code></pre>\n<p>When testing, logs look like</p>\n<pre class=\"lang-none prettyprint-override\"><code>h.i.c.PoolingHttpClientConnectionManager : Connection request: [route: {tls}-&gt;http://xxxxx][total available: 0; route allocated: 1 of 10; total allocated: 1 of 20]\n</code></pre>\n<p>I can guess the meaning of <code>route allocated</code> and <code>total allocated</code>, but wonder what does it mean for <code>total available</code>? It doesn't make sense for available connections or something, please let me know if there's a doc about this, thanks.</p>\n<p>I can't find online doc about this</p>\n"},{"tags":["java","android","function","calendar","repeatingalarm"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698400951,"post_id":77371728,"comment_id":136403689,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1698405320,"post_id":77371728,"comment_id":136404476,"body_markdown":"I recommend that you use [java.time, the modern Java date and time API,](https://docs.oracle.com/javase/tutorial/datetime/index.html) for your date and time work and forget about the long outdated and troublesome `Calendar` and `Date` classes. You need something like `LocalDate.now().plusDays(1).atStartOfDay(ZoneId.systemDefault()).toInstant().toEpochMilli()`.","body":"I recommend that you use <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API,</a> for your date and time work and forget about the long outdated and troublesome <code>Calendar</code> and <code>Date</code> classes. You need something like <code>LocalDate.now().plusDays(1).atStartOfDay(ZoneId.systemDefaul&zwnj;&#8203;t()).toInstant().toE&zwnj;&#8203;pochMilli()</code>."}],"answers":[{"tags":[],"owner":{"account_id":8057643,"reputation":4920,"user_id":6074224,"accept_rate":60,"display_name":"Biscuit"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698385864,"creation_date":1698385864,"answer_id":77371769,"question_id":77371728,"body_markdown":"Please take a look at the [documentation note](https://developer.android.com/reference/android/app/AlarmManager)\r\n&gt; Beginning with API 19 (Build.VERSION_CODES.KITKAT) alarm delivery is inexact: the OS will shift alarms in order to minimize wakeups and battery use.\r\n\r\nYou should use `setExact` and create a repeating mechanism in your app","title":"I am try to trigger alarm for Every day 12:00 am but why it is trigger after 10/20 minute later of 12:00 am?","body":"<p>Please take a look at the <a href=\"https://developer.android.com/reference/android/app/AlarmManager\" rel=\"nofollow noreferrer\">documentation note</a></p>\n<blockquote>\n<p>Beginning with API 19 (Build.VERSION_CODES.KITKAT) alarm delivery is inexact: the OS will shift alarms in order to minimize wakeups and battery use.</p>\n</blockquote>\n<p>You should use <code>setExact</code> and create a repeating mechanism in your app</p>\n"}],"owner":{"account_id":29764588,"reputation":1,"user_id":22811220,"display_name":"Md.Arifin Zaman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698387201,"creation_date":1698385211,"question_id":77371728,"body_markdown":"```\r\n   public void alarmUpdateForEveryDay(Context context) {\r\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\r\n\r\n        Intent intent = new Intent(context, NewDayReceiver.class);\r\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 50, intent, PendingIntent.FLAG_IMMUTABLE);\r\n\r\n        Calendar c = Calendar.getInstance();\r\n        c.set(Calendar.HOUR_OF_DAY, 0); \r\n        c.set(Calendar.MINUTE, 0); \r\n        c.set(Calendar.SECOND, 0); \r\n        if (System.currentTimeMillis() &gt; c.getTimeInMillis()) {\r\n            c.add(Calendar.DAY_OF_MONTH, 1); // Add 1 day\r\n        }\r\n\r\n        long midnight = c.getTimeInMillis();\r\n\r\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, midnight, AlarmManager.INTERVAL_DAY, pendingIntent);\r\n        \r\n        Log.d(&quot;current_time&quot;, new Date(midnight).toString());\r\n    }\r\n```\r\nI test with adjust the system time\r\n","title":"I am try to trigger alarm for Every day 12:00 am but why it is trigger after 10/20 minute later of 12:00 am?","body":"<pre><code>   public void alarmUpdateForEveryDay(Context context) {\n        AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);\n\n        Intent intent = new Intent(context, NewDayReceiver.class);\n        PendingIntent pendingIntent = PendingIntent.getBroadcast(context, 50, intent, PendingIntent.FLAG_IMMUTABLE);\n\n        Calendar c = Calendar.getInstance();\n        c.set(Calendar.HOUR_OF_DAY, 0); \n        c.set(Calendar.MINUTE, 0); \n        c.set(Calendar.SECOND, 0); \n        if (System.currentTimeMillis() &gt; c.getTimeInMillis()) {\n            c.add(Calendar.DAY_OF_MONTH, 1); // Add 1 day\n        }\n\n        long midnight = c.getTimeInMillis();\n\n        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, midnight, AlarmManager.INTERVAL_DAY, pendingIntent);\n        \n        Log.d(&quot;current_time&quot;, new Date(midnight).toString());\n    }\n</code></pre>\n<p>I test with adjust the system time</p>\n"},{"tags":["java","hashmap"],"answers":[{"tags":[],"owner":{"account_id":93689,"reputation":415931,"user_id":256196,"accept_rate":77,"display_name":"Bohemian"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1698386062,"creation_date":1698386062,"answer_id":77371779,"question_id":77371731,"body_markdown":"Make a copy, modify it as you like then discard it:\r\n\r\n```\r\nMap&lt;Character, Integer&gt; originalFreq = ...;\r\nwhile (&lt;making guesses&gt;) {\r\n    Map&lt;Character, Integer&gt; guessFreq = new HashMap&lt;&gt;(originalFreq); // make fresh copy\r\n    // modify guessFreq as you like - it will be discarded next loop iteration\r\n}\r\n```","title":"How to set Hashmap equal to its original values?","body":"<p>Make a copy, modify it as you like then discard it:</p>\n<pre><code>Map&lt;Character, Integer&gt; originalFreq = ...;\nwhile (&lt;making guesses&gt;) {\n    Map&lt;Character, Integer&gt; guessFreq = new HashMap&lt;&gt;(originalFreq); // make fresh copy\n    // modify guessFreq as you like - it will be discarded next loop iteration\n}\n</code></pre>\n"}],"owner":{"account_id":10341526,"reputation":284,"user_id":13157036,"display_name":"CodingNinja"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77371779,"answer_count":1,"score":0,"last_activity_date":1698386172,"creation_date":1698385213,"question_id":77371731,"body_markdown":"I have a `HashMap&lt;Character, Integer&gt;` that counts the frequencies of letters in a string, called `freq`. For example, if the word is PUPPY, then the map holds the values `{P=3, U=1, Y=1}`.\r\n\r\nI am using this for a wordle-like game. When assigning yellow and green to the letters of a submitted guess, I am subtracting from the frequencies of the letters, so that there are not more colors assigned than letters. \r\n\r\nSo if the target word is PUPPY and the user guesses PRUNE, then the colors work fine for the first guess but the map values become `{P=2, U=0, Y=1}`. I need the frequencies to return to the original values. \r\n\r\nI tried creating a second hashmap of the same kind and setting `revert` (my second hashmap) equal to `freq`, then setting `freq` equal to `revert` after the function is executed, but it retains its changed values.\r\n\r\n\r\n\r\n","title":"How to set Hashmap equal to its original values?","body":"<p>I have a <code>HashMap&lt;Character, Integer&gt;</code> that counts the frequencies of letters in a string, called <code>freq</code>. For example, if the word is PUPPY, then the map holds the values <code>{P=3, U=1, Y=1}</code>.</p>\n<p>I am using this for a wordle-like game. When assigning yellow and green to the letters of a submitted guess, I am subtracting from the frequencies of the letters, so that there are not more colors assigned than letters.</p>\n<p>So if the target word is PUPPY and the user guesses PRUNE, then the colors work fine for the first guess but the map values become <code>{P=2, U=0, Y=1}</code>. I need the frequencies to return to the original values.</p>\n<p>I tried creating a second hashmap of the same kind and setting <code>revert</code> (my second hashmap) equal to <code>freq</code>, then setting <code>freq</code> equal to <code>revert</code> after the function is executed, but it retains its changed values.</p>\n"},{"tags":["java","database","eclipse"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":3,"creation_date":1698158447,"post_id":77353060,"comment_id":136368018,"body_markdown":"How are you packaging or running the jar? Seems like it’s missing either a classpath or it’s packaged incorrectly.","body":"How are you packaging or running the jar? Seems like it’s missing either a classpath or it’s packaged incorrectly."},{"owner":{"account_id":14683872,"reputation":1,"user_id":10604501,"display_name":"met8657"},"score":1,"creation_date":1698158835,"post_id":77353060,"comment_id":136368102,"body_markdown":"right click on the project -&gt; export -&gt; Runnable JAR file -&gt; Extract required libraries into generated JAR","body":"right click on the project -&gt; export -&gt; Runnable JAR file -&gt; Extract required libraries into generated JAR"},{"owner":{"account_id":5404,"reputation":22089,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":2,"creation_date":1698159327,"post_id":77353060,"comment_id":136368234,"body_markdown":"Yeah, that&#39;s not going to work. You are exporting a JAR of only your code. You need the dependencies on the classpath too, either in the same jar or in separate ones.","body":"Yeah, that&#39;s not going to work. You are exporting a JAR of only your code. You need the dependencies on the classpath too, either in the same jar or in separate ones."},{"owner":{"account_id":14683872,"reputation":1,"user_id":10604501,"display_name":"met8657"},"score":0,"creation_date":1698160668,"post_id":77353060,"comment_id":136368533,"body_markdown":"Jorn, can you tell me how to do it in eclipse please. I exported the file using -&gt; Package required libraries into generated JAR, but doesn&#39;t work","body":"Jorn, can you tell me how to do it in eclipse please. I exported the file using -&gt; Package required libraries into generated JAR, but doesn&#39;t work"}],"answers":[{"tags":[],"owner":{"account_id":10034154,"reputation":479,"user_id":7419493,"display_name":"justis"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698171603,"creation_date":1698171603,"answer_id":77354527,"question_id":77353060,"body_markdown":"As the error states, the required driver is not located in the classpath. \r\n\r\nIf your application requires dependencies, you should strongly consider using build and dependency management tool such as [Maven or Gradle][1].\r\n\r\nSince you appear to be trying to build a single runnable jar, you&#39;ll probably want to use the [Maven Shade Plugin][2] or [Gradle Shadow Plugin][3] (depending on your build tool) to package your dependencies, such as the database driver, into your executable jar. \r\n\r\nIf an Uber-jar containing your dependencies is not what you&#39;re after and you would prefer to load the db driver from another jar on disk, you can can follow [this example][4] in order to load the driver into your classpath.\r\n\r\n\r\n  [1]: https://www.baeldung.com/ant-maven-gradle\r\n  [2]: https://maven.apache.org/plugins/maven-shade-plugin/\r\n  [3]: https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\r\n  [4]: https://stackoverflow.com/questions/14478870/dynamically-load-the-jdbc-driver/14479658#14479658","title":"The program works in IDE but not on the export jar","body":"<p>As the error states, the required driver is not located in the classpath.</p>\n<p>If your application requires dependencies, you should strongly consider using build and dependency management tool such as <a href=\"https://www.baeldung.com/ant-maven-gradle\" rel=\"nofollow noreferrer\">Maven or Gradle</a>.</p>\n<p>Since you appear to be trying to build a single runnable jar, you'll probably want to use the <a href=\"https://maven.apache.org/plugins/maven-shade-plugin/\" rel=\"nofollow noreferrer\">Maven Shade Plugin</a> or <a href=\"https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\" rel=\"nofollow noreferrer\">Gradle Shadow Plugin</a> (depending on your build tool) to package your dependencies, such as the database driver, into your executable jar.</p>\n<p>If an Uber-jar containing your dependencies is not what you're after and you would prefer to load the db driver from another jar on disk, you can can follow <a href=\"https://stackoverflow.com/questions/14478870/dynamically-load-the-jdbc-driver/14479658#14479658\">this example</a> in order to load the driver into your classpath.</p>\n"},{"tags":[],"owner":{"account_id":14683872,"reputation":1,"user_id":10604501,"display_name":"met8657"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698386126,"creation_date":1698214333,"answer_id":77356973,"question_id":77353060,"body_markdown":"I resolved the problem by reinstalling JDK on my PC.","title":"The program works in IDE but not on the export jar","body":"<p>I resolved the problem by reinstalling JDK on my PC.</p>\n"}],"owner":{"account_id":14683872,"reputation":1,"user_id":10604501,"display_name":"met8657"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77356973,"answer_count":2,"score":0,"last_activity_date":1698386126,"creation_date":1698158332,"question_id":77353060,"body_markdown":"I have to connect my database with java. The program work fine in my Eclipse IDE but when i export in jar file . I get this error:\r\nconnection failure: No suitable driver found for jdbc:sqlserver://myServer:1433;databaseName=mydb\r\n\r\nThis is my code \r\n```\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.SQLException;\r\n\r\nimport javax.swing.JOptionPane;\r\n\r\npublic class DriverManagerSql {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tConnection connection = null;\r\n\t\tString dbUrl = &quot;jdbc:sqlserver://myServer:1433;databaseName=mydb&quot;;\r\n\t\tString username = &quot;sa&quot;;\r\n\t\tString password = &quot;12345&quot;;\r\n\t\ttry {\r\n\t\t    connection = DriverManager.getConnection(dbUrl, username, password);\r\n\t\t    if (connection != null) {\r\n\t\t    \t JOptionPane.showMessageDialog(null, &quot;good connection&quot;);\r\n\t\t    }\r\n\t\t} catch (SQLException e) {\r\n\t\t\tJOptionPane.showMessageDialog(null, &quot;connection failure:&quot; + e.getMessage());\r\n\t\t} finally {\r\n\t\t    try {\r\n\t\t        if (connection != null) {\r\n\t\t            connection.close();\r\n\t\t        }\r\n\t\t    } catch (SQLException e) {\r\n\t\t        System.err.println(&quot;Error while closing the connection: &quot; + e.getMessage());\r\n\t\t    }\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n```\r\n\r\n\r\nI want the same result as the ide","title":"The program works in IDE but not on the export jar","body":"<p>I have to connect my database with java. The program work fine in my Eclipse IDE but when i export in jar file . I get this error:\nconnection failure: No suitable driver found for jdbc:sqlserver://myServer:1433;databaseName=mydb</p>\n<p>This is my code</p>\n<pre><code>\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\nimport javax.swing.JOptionPane;\n\npublic class DriverManagerSql {\n\n    public static void main(String[] args) {\n        Connection connection = null;\n        String dbUrl = &quot;jdbc:sqlserver://myServer:1433;databaseName=mydb&quot;;\n        String username = &quot;sa&quot;;\n        String password = &quot;12345&quot;;\n        try {\n            connection = DriverManager.getConnection(dbUrl, username, password);\n            if (connection != null) {\n                 JOptionPane.showMessageDialog(null, &quot;good connection&quot;);\n            }\n        } catch (SQLException e) {\n            JOptionPane.showMessageDialog(null, &quot;connection failure:&quot; + e.getMessage());\n        } finally {\n            try {\n                if (connection != null) {\n                    connection.close();\n                }\n            } catch (SQLException e) {\n                System.err.println(&quot;Error while closing the connection: &quot; + e.getMessage());\n            }\n        }\n\n    }\n\n}\n</code></pre>\n<p>I want the same result as the ide</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":5998820,"reputation":12656,"user_id":4712734,"display_name":"DuncG"},"score":0,"creation_date":1698402110,"post_id":77371352,"comment_id":136403877,"body_markdown":"Its not good creating 1000 threads to write like this, but note that you don&#39;t need to use `BufferedWriter` here at all.  That may be the cause of up to 1000 x 8k buffer allocation leading to OOM.","body":"Its not good creating 1000 threads to write like this, but note that you don&#39;t need to use <code>BufferedWriter</code> here at all.  That may be the cause of up to 1000 x 8k buffer allocation leading to OOM."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698384646,"creation_date":1698378114,"answer_id":77371392,"question_id":77371352,"body_markdown":"\r\nYes. If you run out of memory, the OOME (`OutOfMemoryError`) will kill the current thread.  (Unless caught ... and you are not catching it.)\r\n\r\nIf the thread gets the OOME after it has opened the file and before it closes it, the file *may* be empty or partially written. \r\n\r\nSolution: don&#39;t create 1,000 I/O threads!  It is a bad idea even when it works.\r\n\r\nInstead, use an `ExecutorService` with a bounded thread pool, and submit a task for each of the files to be created.  Tune the the thread pool to optimize performance by adjusting the pool size parameters.  (Statically via a hard coded constant or a settings file or something.)\r\n\r\n------------------\r\n\r\nAlso note that if you try to do a huge number of file (or network) operations in parallel (using lots of threads) your application will saturate the network or file system I/O capacity and hit a resource bottleneck.  (Or a CPU or RAM bandwidth bottleneck.  Or you could trigger virtual memory thrashing.)  \r\n\r\nParallelizing I/O and then saturating it doesn&#39;t help, and can actually lead to really bad outcomes.  Maybe worse that you are seeing, up to an including &quot;breaking&quot; the network for other users or crashing the host operating system.\r\n\r\n-----------------\r\n\r\n[This answer][1] talks about whether or not you should be catching the OOMEs.  I think that you shouldn&#39;t ... in this use-case.\r\n\r\nIf an OOME occurs you *will have* created the partial or empty file.  The best you could do would be to delete the file and try again.  But the risk is that the OOME will occur again, and again, and again.\r\n\r\nIn addition, each time you get an OOME, that (typically) be preceded by a full garbage collection.  Doing GC&#39;s repeatedly when your heap is *nearly* full is inefficient / bad for performance.\r\n\r\nThat answer also says that you shouldn&#39;t try to catch an OOME anyway because the OOME could have caused other damage to application and runtime data structures.  This is true in the general case&lt;sup&gt;1&lt;/sup&gt;, but in this specific use-case, any such damage will be limited to objects / resources that would be cleaned up by the GC anyway.  OOMEs and (in some cases SOEs) are more recoverable than other `Error` exceptions&lt;sup&gt;2&lt;/sup&gt;.\r\n\r\n----------------\r\n\r\n&lt;sup&gt;1 - You also need to worry threads that are stuck waiting for a `notify` from another thread that was killed by the OOME.  Recovering from that scenario is difficult.&lt;br&gt;\r\n2 - ... if you really understand what you are doing; e.g. see 1.&lt;/sup&gt;\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/77371427/139985","title":"Insufficient memory causes Java threads to do things only halfway","body":"<p>Yes. If you run out of memory, the OOME (<code>OutOfMemoryError</code>) will kill the current thread.  (Unless caught ... and you are not catching it.)</p>\n<p>If the thread gets the OOME after it has opened the file and before it closes it, the file <em>may</em> be empty or partially written.</p>\n<p>Solution: don't create 1,000 I/O threads!  It is a bad idea even when it works.</p>\n<p>Instead, use an <code>ExecutorService</code> with a bounded thread pool, and submit a task for each of the files to be created.  Tune the the thread pool to optimize performance by adjusting the pool size parameters.  (Statically via a hard coded constant or a settings file or something.)</p>\n<hr />\n<p>Also note that if you try to do a huge number of file (or network) operations in parallel (using lots of threads) your application will saturate the network or file system I/O capacity and hit a resource bottleneck.  (Or a CPU or RAM bandwidth bottleneck.  Or you could trigger virtual memory thrashing.)</p>\n<p>Parallelizing I/O and then saturating it doesn't help, and can actually lead to really bad outcomes.  Maybe worse that you are seeing, up to an including &quot;breaking&quot; the network for other users or crashing the host operating system.</p>\n<hr />\n<p><a href=\"https://stackoverflow.com/a/77371427/139985\">This answer</a> talks about whether or not you should be catching the OOMEs.  I think that you shouldn't ... in this use-case.</p>\n<p>If an OOME occurs you <em>will have</em> created the partial or empty file.  The best you could do would be to delete the file and try again.  But the risk is that the OOME will occur again, and again, and again.</p>\n<p>In addition, each time you get an OOME, that (typically) be preceded by a full garbage collection.  Doing GC's repeatedly when your heap is <em>nearly</em> full is inefficient / bad for performance.</p>\n<p>That answer also says that you shouldn't try to catch an OOME anyway because the OOME could have caused other damage to application and runtime data structures.  This is true in the general case<sup>1</sup>, but in this specific use-case, any such damage will be limited to objects / resources that would be cleaned up by the GC anyway.  OOMEs and (in some cases SOEs) are more recoverable than other <code>Error</code> exceptions<sup>2</sup>.</p>\n<hr />\n<p><sup>1 - You also need to worry threads that are stuck waiting for a <code>notify</code> from another thread that was killed by the OOME.  Recovering from that scenario is difficult.<br>\n2 - ... if you really understand what you are doing; e.g. see 1.</sup></p>\n"},{"tags":[],"owner":{"account_id":2182934,"reputation":2525,"user_id":1932011,"accept_rate":71,"display_name":"JayC667"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698379004,"creation_date":1698379004,"answer_id":77371427,"question_id":77371352,"body_markdown":"The main culprit that crashes most Threads is:\r\n\r\n    Exception in thread &quot;Thread-891&quot; Exception in thread &quot;Thread-871&quot; java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:105)\r\n    \tat java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:88)\r\n    \tat stackoverflow.threading.TestThreadOOME.write1(TestThreadOOME.java:35)\r\n    \tat stackoverflow.threading.TestThreadOOME.lambda$0(TestThreadOOME.java:19)\r\n    \tat stackoverflow.threading.TestThreadOOME$$Lambda$1/531885035.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Thread.java:750)\r\n    java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:105)\r\n    \tat java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:88)\r\n    \tat stackoverflow.threading.TestThreadOOME.write1(TestThreadOOME.java:35)\r\n    \tat stackoverflow.threading.TestThreadOOME.lambda$0(TestThreadOOME.java:19)\r\n    \tat stackoverflow.threading.TestThreadOOME$$Lambda$1/531885035.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Thread.java:750)\r\n\r\nThat is the normal error stack trace of Java. Which usually tells you everything you need to know.\r\n\r\nSo this tells us, that the problem happens when we try to instantiate the `BufferedWriter`. If we look at its code, the way you call it, it will attempt to create a buffer with the size of `private static int defaultCharBufferSize = 8192;` bytes. As 8 KB is MUCH compared to the tiny environment you give it, this is where MOST errors will happen.\r\n\r\nSo your code first creates a `FileWriter`, which in turn creates a `FileOutputStream` which on creation will create a `FileDescriptor`, on which it calls `open()`, which creates your file on the disk (without contenty yet).\r\n\r\nSo in short: calling `new FileWriter(file.getAbsoluteFile());` will already create the file, but without contents yet.\r\n\r\nNow, in the next step, `new BufferedWriter(fw);` will fail, and the Thread (i.e. your `write1` method) will abort. Before any data can be written to the file.\r\n\r\nNote, that even if you extended your catch clause to `} catch (final Throwable e) {`, which COULD catch Exceptions AND Errors, this would not be enough, the problem would often still crash your thread, because the `OutOfMemoryError` is so severe that you will not be able to rely on most functions inside the JVM anymore.\r\n\r\nAlso note that the OOME CAN happen literally anywhere in your code, whenever you call `new`, even if you simply call a method, but it&#39;s usually where larger portions of the RAM are getting reserved, like `byte[]` or `char[]` or similar buffers. So if you ran your example a million times, you would probably get all different error cases.","title":"Insufficient memory causes Java threads to do things only halfway","body":"<p>The main culprit that crashes most Threads is:</p>\n<pre><code>Exception in thread &quot;Thread-891&quot; Exception in thread &quot;Thread-871&quot; java.lang.OutOfMemoryError: Java heap space\n    at java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:105)\n    at java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:88)\n    at stackoverflow.threading.TestThreadOOME.write1(TestThreadOOME.java:35)\n    at stackoverflow.threading.TestThreadOOME.lambda$0(TestThreadOOME.java:19)\n    at stackoverflow.threading.TestThreadOOME$$Lambda$1/531885035.run(Unknown Source)\n    at java.lang.Thread.run(Thread.java:750)\njava.lang.OutOfMemoryError: Java heap space\n    at java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:105)\n    at java.io.BufferedWriter.&lt;init&gt;(BufferedWriter.java:88)\n    at stackoverflow.threading.TestThreadOOME.write1(TestThreadOOME.java:35)\n    at stackoverflow.threading.TestThreadOOME.lambda$0(TestThreadOOME.java:19)\n    at stackoverflow.threading.TestThreadOOME$$Lambda$1/531885035.run(Unknown Source)\n    at java.lang.Thread.run(Thread.java:750)\n</code></pre>\n<p>That is the normal error stack trace of Java. Which usually tells you everything you need to know.</p>\n<p>So this tells us, that the problem happens when we try to instantiate the <code>BufferedWriter</code>. If we look at its code, the way you call it, it will attempt to create a buffer with the size of <code>private static int defaultCharBufferSize = 8192;</code> bytes. As 8 KB is MUCH compared to the tiny environment you give it, this is where MOST errors will happen.</p>\n<p>So your code first creates a <code>FileWriter</code>, which in turn creates a <code>FileOutputStream</code> which on creation will create a <code>FileDescriptor</code>, on which it calls <code>open()</code>, which creates your file on the disk (without contenty yet).</p>\n<p>So in short: calling <code>new FileWriter(file.getAbsoluteFile());</code> will already create the file, but without contents yet.</p>\n<p>Now, in the next step, <code>new BufferedWriter(fw);</code> will fail, and the Thread (i.e. your <code>write1</code> method) will abort. Before any data can be written to the file.</p>\n<p>Note, that even if you extended your catch clause to <code>} catch (final Throwable e) {</code>, which COULD catch Exceptions AND Errors, this would not be enough, the problem would often still crash your thread, because the <code>OutOfMemoryError</code> is so severe that you will not be able to rely on most functions inside the JVM anymore.</p>\n<p>Also note that the OOME CAN happen literally anywhere in your code, whenever you call <code>new</code>, even if you simply call a method, but it's usually where larger portions of the RAM are getting reserved, like <code>byte[]</code> or <code>char[]</code> or similar buffers. So if you ran your example a million times, you would probably get all different error cases.</p>\n"}],"owner":{"account_id":15968441,"reputation":373,"user_id":11523294,"display_name":"Criwran"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77371392,"answer_count":2,"score":0,"last_activity_date":1698384646,"creation_date":1698377186,"question_id":77371352,"body_markdown":"If set the JVM args to this:\r\n```none\r\n-Xms10m -Xmx10m\r\n```\r\nThe following programs worked fine and 1000 files with content were created.\r\n```java\r\nimport java.io.BufferedWriter;\r\nimport java.io.File;\r\nimport java.io.FileWriter;\r\n\r\npublic class Test {\r\n    public static final int COUNT = 1_000;\r\n\r\n    public static void main(String[] args) {\r\n        testByThread();\r\n    }\r\n\r\n    public static void testByThread() {\r\n        long start = System.currentTimeMillis();\r\n        for (int i = 0; i &lt; COUNT; i++) {\r\n            int finalI = i;\r\n            new Thread(() -&gt; {\r\n                int num = write1(&quot;threadTest\\\\&quot;, finalI);\r\n                System.out.println(num);\r\n            }).start();\r\n        }\r\n        System.out.println(&quot;total: &quot; + (System.currentTimeMillis() - start));\r\n    }\r\n\r\n    public static int write1(String name, int i) {\r\n        try {\r\n            String content = &quot;This is the content to write into create file&quot;;\r\n            String path = &quot;D:\\\\&quot; + name + i + &quot;.txt&quot;;\r\n            File file = new File(path);\r\n\r\n            FileWriter fw = new FileWriter(file.getAbsoluteFile());\r\n            BufferedWriter bw = new BufferedWriter(fw);\r\n\r\n            bw.write(content);\r\n            bw.close();\r\n        }\r\n        catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        return i + 1;\r\n    }\r\n}\r\n```\r\nHowever, if I reduce the heap size:\r\n```\r\n-Xms2m -Xmx2m\r\n```\r\nThe program came to hint some exception in the console:\r\n```none\r\nException in thread &quot;Thread-253&quot; java.lang.OutOfMemoryError: Java heap space\r\nException in thread &quot;Thread-254&quot; java.lang.OutOfMemoryError: Java heap space\r\n...\r\n```\r\nAnd though 1000 files are created, some of them (275 files) have no content, meaning that the file size is 0kb.\r\n\r\nI wonder why the thread just created the file but did not continue to write the content. What happened during the whole `write1(String name, int i)` process in each thread?","title":"Insufficient memory causes Java threads to do things only halfway","body":"<p>If set the JVM args to this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>-Xms10m -Xmx10m\n</code></pre>\n<p>The following programs worked fine and 1000 files with content were created.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedWriter;\nimport java.io.File;\nimport java.io.FileWriter;\n\npublic class Test {\n    public static final int COUNT = 1_000;\n\n    public static void main(String[] args) {\n        testByThread();\n    }\n\n    public static void testByThread() {\n        long start = System.currentTimeMillis();\n        for (int i = 0; i &lt; COUNT; i++) {\n            int finalI = i;\n            new Thread(() -&gt; {\n                int num = write1(&quot;threadTest\\\\&quot;, finalI);\n                System.out.println(num);\n            }).start();\n        }\n        System.out.println(&quot;total: &quot; + (System.currentTimeMillis() - start));\n    }\n\n    public static int write1(String name, int i) {\n        try {\n            String content = &quot;This is the content to write into create file&quot;;\n            String path = &quot;D:\\\\&quot; + name + i + &quot;.txt&quot;;\n            File file = new File(path);\n\n            FileWriter fw = new FileWriter(file.getAbsoluteFile());\n            BufferedWriter bw = new BufferedWriter(fw);\n\n            bw.write(content);\n            bw.close();\n        }\n        catch (Exception e) {\n            e.printStackTrace();\n        }\n        return i + 1;\n    }\n}\n</code></pre>\n<p>However, if I reduce the heap size:</p>\n<pre><code>-Xms2m -Xmx2m\n</code></pre>\n<p>The program came to hint some exception in the console:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Exception in thread &quot;Thread-253&quot; java.lang.OutOfMemoryError: Java heap space\nException in thread &quot;Thread-254&quot; java.lang.OutOfMemoryError: Java heap space\n...\n</code></pre>\n<p>And though 1000 files are created, some of them (275 files) have no content, meaning that the file size is 0kb.</p>\n<p>I wonder why the thread just created the file but did not continue to write the content. What happened during the whole <code>write1(String name, int i)</code> process in each thread?</p>\n"},{"tags":["java","android","performance","bluetooth-lowenergy","esp32"],"answers":[{"tags":[],"owner":{"account_id":19104350,"reputation":15,"user_id":13951848,"display_name":"Amirhossein Rezvani"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698383860,"creation_date":1698299977,"answer_id":77364436,"question_id":77364175,"body_markdown":"          @Override\r\n                public void onCharacteristicChanged(final byte[] data) {\r\n                    runOnUiThread(new Runnable() {\r\n                        @Override\r\n                        public void run() {\r\n                            String ipData = HexUtil.formatHexString(data); // HTML FORMAT DATA hAI\r\n                            Log.d(Tag + &quot;OP&quot;, ipData);\r\n                            // Log.d(Tag + &quot;OPA&quot;, String.valueOf(ipData.charAt(3)));\r\n\r\n                            if (ipData != null) {\r\n                                builderList.clear();\r\n                                String[] data = ipData.split(&quot;/&quot;);\r\n                                Log.d(Tag + &quot;OP&quot;, Arrays.toString(data));\r\n                                Log.d(Tag + &quot;OPB&quot;, Arrays.toString(data));\r\n                                // builderList.clear();\r\n                                convertHaxToASCII(data);\r\n                                Log.d(&quot;&quot;, &quot;myData&quot; + data.length);\r\n                                setButtonText();\r\n                                setText();\r\n                                alarms.checkAlert(builderList.get(9).toString(), MainScreen.this);\r\n                                Log.d(&quot;&quot;, &quot;helo beo&quot; + builderList.size());\r\n                            }\r\n\r\n                            // Move builderList.clear() here to clear the list after processing\r\n                            builderList.clear();\r\n\r\n                            if (builderList.size() == 9) {\r\n                                Toast.makeText(MainScreen.this, &quot;hi javed&quot;, Toast.LENGTH_SHORT).show();\r\n                            }\r\n\r\n                            if (!builderList.isEmpty()) {\r\n                                setTitle(builderList.get(1).toString());\r\n                                setArrowsStatus();\r\n                                setBatteryImage();\r\n                            }\r\n                        }\r\n                    });\r\n                } \r\n\r\nAs your logs suggests the data which is passed to your method is not what you are looking for.\r\n\r\n    2023-10-27 10:12:54.985 30830-30830 DetailBleOP com.eapro.myproject D [5550532f54455354494e472d31323334353637382f3232332f3031322e382f3030302f3232332f30302e302f3034362f312f3030312f31332e352f30302e302f30302e332f30302e302f30302e342f3030302e302f3030302e302f454e440d0a]\r\n\r\n    2023-10-27 10:12:54.985 30830-30830 DetailBleOPB com.eapro.myproject D [5550532f54455354494e472d31323334353637382f3232332f3031322e382f3030302f3232332f30302e302f3034362f312f3030312f31332e352f30302e302f30302e332f30302e302f30302e342f3030302e302f3030302e302f454e440d0a] \r\n\r\nAs you can see from above the data logged with &#39;op&#39; has no slashes and it is not clear what it is exactly.\r\n\r\n\r\nPlease suggest your edits in comments to make the thread running and more understandable for others.","title":"can&#39;t split array of data coming from esp32 module server to Android Application. in java","body":"<pre><code>      @Override\n            public void onCharacteristicChanged(final byte[] data) {\n                runOnUiThread(new Runnable() {\n                    @Override\n                    public void run() {\n                        String ipData = HexUtil.formatHexString(data); // HTML FORMAT DATA hAI\n                        Log.d(Tag + &quot;OP&quot;, ipData);\n                        // Log.d(Tag + &quot;OPA&quot;, String.valueOf(ipData.charAt(3)));\n\n                        if (ipData != null) {\n                            builderList.clear();\n                            String[] data = ipData.split(&quot;/&quot;);\n                            Log.d(Tag + &quot;OP&quot;, Arrays.toString(data));\n                            Log.d(Tag + &quot;OPB&quot;, Arrays.toString(data));\n                            // builderList.clear();\n                            convertHaxToASCII(data);\n                            Log.d(&quot;&quot;, &quot;myData&quot; + data.length);\n                            setButtonText();\n                            setText();\n                            alarms.checkAlert(builderList.get(9).toString(), MainScreen.this);\n                            Log.d(&quot;&quot;, &quot;helo beo&quot; + builderList.size());\n                        }\n\n                        // Move builderList.clear() here to clear the list after processing\n                        builderList.clear();\n\n                        if (builderList.size() == 9) {\n                            Toast.makeText(MainScreen.this, &quot;hi javed&quot;, Toast.LENGTH_SHORT).show();\n                        }\n\n                        if (!builderList.isEmpty()) {\n                            setTitle(builderList.get(1).toString());\n                            setArrowsStatus();\n                            setBatteryImage();\n                        }\n                    }\n                });\n            } \n</code></pre>\n<p>As your logs suggests the data which is passed to your method is not what you are looking for.</p>\n<pre><code>2023-10-27 10:12:54.985 30830-30830 DetailBleOP com.eapro.myproject D [5550532f54455354494e472d31323334353637382f3232332f3031322e382f3030302f3232332f30302e302f3034362f312f3030312f31332e352f30302e302f30302e332f30302e302f30302e342f3030302e302f3030302e302f454e440d0a]\n\n2023-10-27 10:12:54.985 30830-30830 DetailBleOPB com.eapro.myproject D [5550532f54455354494e472d31323334353637382f3232332f3031322e382f3030302f3232332f30302e302f3034362f312f3030312f31332e352f30302e302f30302e332f30302e302f30302e342f3030302e302f3030302e302f454e440d0a] \n</code></pre>\n<p>As you can see from above the data logged with 'op' has no slashes and it is not clear what it is exactly.</p>\n<p>Please suggest your edits in comments to make the thread running and more understandable for others.</p>\n"}],"owner":{"account_id":25577581,"reputation":15,"user_id":19356725,"display_name":"Javed Quantum"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698383860,"creation_date":1698295463,"question_id":77364175,"body_markdown":"`I want to display data to Android Application \r\nthe data is coming from Esp32 module to Android Application \r\nbut I can&#39;t split this array its seems it string \r\nand when I get the index value 9 ..its gave me array array index out of bound\r\n`\r\n**data = ups/testing/00.2/232/322/433/4323/332/32/332/332/543/453/3454/343/End this is Esp32 Server Module Data**\r\n\r\n**I am sending this data from Docklight App**\r\n\r\n***I want to split this data but its shows me Array index out of bound please help me this is my first job project and i want to do this task as soon as possible .\r\n***\r\n\r\n// this is my java code for Android Application \r\n\r\n  public void onCharacteristicChanged(final byte[] data) {\r\n\r\n                        runOnUiThread(new Runnable() {\r\n                            @Override\r\n                            public void run() {\r\n                                String ipData = HexUtil.formatHexString(data);\r\n                                Log.d(Tag+&quot;OP&quot;,ipData);\r\n                                if (ipData!=null) {\r\n                                    String [] data=ipData.split(&quot;/&quot;);\r\n                                    builderList.clear();\r\n                                    convertHaxToASCII(data);\r\n                                    setButtonText();\r\n                                    setText();\r\n                                    alarms.checkAlert(builderList.get(9).toString(), DetailBLE.this);\r\n                                }\r\n\r\n                                if (!builderList.isEmpty())\r\n                                {\r\n                                    setTitle(builderList.get(1).toString());\r\n                                    setArrowsStatus();\r\n                                    setBatteryImage();\r\n                                }\r\n\r\n                            }\r\n                        });\r\n                    }\r\n\r\n\r\n**I want to split this data  data = ups/123/334/233/244/24/24/545/56/343/54634/454/End\r\nas in the form of Array then i show this on user screen by indexing **\r\nlike for ups --get(0)\r\n\r\nlike for mains--get(1)\r\nlike for solar--get(2)\r\nlike for non solar--get(3)\r\nlike for battery low--get(4)\r\nlike for discharging current--get(5)\r\n","title":"can&#39;t split array of data coming from esp32 module server to Android Application. in java","body":"<p><code>I want to display data to Android Application  the data is coming from Esp32 module to Android Application  but I can't split this array its seems it string  and when I get the index value 9 ..its gave me array array index out of bound </code>\n<strong>data = ups/testing/00.2/232/322/433/4323/332/32/332/332/543/453/3454/343/End this is Esp32 Server Module Data</strong></p>\n<p><strong>I am sending this data from Docklight App</strong></p>\n<p>***I want to split this data but its shows me Array index out of bound please help me this is my first job project and i want to do this task as soon as possible .</p>\n<hr />\n<p>// this is my java code for Android Application</p>\n<p>public void onCharacteristicChanged(final byte[] data) {</p>\n<pre><code>                    runOnUiThread(new Runnable() {\n                        @Override\n                        public void run() {\n                            String ipData = HexUtil.formatHexString(data);\n                            Log.d(Tag+&quot;OP&quot;,ipData);\n                            if (ipData!=null) {\n                                String [] data=ipData.split(&quot;/&quot;);\n                                builderList.clear();\n                                convertHaxToASCII(data);\n                                setButtonText();\n                                setText();\n                                alarms.checkAlert(builderList.get(9).toString(), DetailBLE.this);\n                            }\n\n                            if (!builderList.isEmpty())\n                            {\n                                setTitle(builderList.get(1).toString());\n                                setArrowsStatus();\n                                setBatteryImage();\n                            }\n\n                        }\n                    });\n                }\n</code></pre>\n<p>**I want to split this data  data = ups/123/334/233/244/24/24/545/56/343/54634/454/End\nas in the form of Array then i show this on user screen by indexing **\nlike for ups --get(0)</p>\n<p>like for mains--get(1)\nlike for solar--get(2)\nlike for non solar--get(3)\nlike for battery low--get(4)\nlike for discharging current--get(5)</p>\n"},{"tags":["java","simulation","anylogic","multi-agent"],"comments":[{"owner":{"account_id":11561728,"reputation":124,"user_id":8471228,"display_name":"yuriy pidvalny"},"score":0,"creation_date":1698408455,"post_id":77371635,"comment_id":136405061,"body_markdown":"hi there, the error tells us that the space markup shape is not compatible with GIS space. Indeed , for GIS space there is specific one you should try - its called GIS Region. And instead of attractors try use GIS Points. Thats not answering you question completely but i hope it can help you to get a bit further.","body":"hi there, the error tells us that the space markup shape is not compatible with GIS space. Indeed , for GIS space there is specific one you should try - its called GIS Region. And instead of attractors try use GIS Points. Thats not answering you question completely but i hope it can help you to get a bit further."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1698440108,"post_id":77371635,"comment_id":136410798,"body_markdown":"Please provide enough code so others can better understand or reproduce the problem.","body":"Please provide enough code so others can better understand or reproduce the problem."}],"owner":{"account_id":29764566,"reputation":1,"user_id":22811203,"display_name":"Buds"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698383167,"creation_date":1698383167,"question_id":77371635,"body_markdown":"I am trying to build a multiagent simulation in Anylogic on a GIS map. I have created a Polygonal Node and inserted around 8 attractors. I want a population of agents to freely roam within the polygonal node through the attractors; the agents should be attracted to the attractors but should leave them for another one immediately. How to do this? A step by step solution is appreciated. And once I created the attractors I get an error as in the image. Why is that? [enter image description here](https://i.stack.imgur.com/o8DtS.png)\r\n\r\nI tried creating an agent in the normal process, but I do not know how to let it roam for free.\r\n\r\nAnd I create this model on a GIS map.","title":"Agents freely roaming among attractors in AnyLogic","body":"<p>I am trying to build a multiagent simulation in Anylogic on a GIS map. I have created a Polygonal Node and inserted around 8 attractors. I want a population of agents to freely roam within the polygonal node through the attractors; the agents should be attracted to the attractors but should leave them for another one immediately. How to do this? A step by step solution is appreciated. And once I created the attractors I get an error as in the image. Why is that? <a href=\"https://i.stack.imgur.com/o8DtS.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I tried creating an agent in the normal process, but I do not know how to let it roam for free.</p>\n<p>And I create this model on a GIS map.</p>\n"},{"tags":["java","spring-boot","sonarqube","sql-injection","jdbctemplate"],"comments":[{"owner":{"account_id":13181158,"reputation":420,"user_id":9520479,"display_name":"Jhilton"},"score":1,"creation_date":1698392014,"post_id":77371546,"comment_id":136402030,"body_markdown":"It would be useful to know exactly what rule is being triggered. From what I see in the example given I would infer it is a false positive since I do not see any way the SQL can be modified by providing certain values.","body":"It would be useful to know exactly what rule is being triggered. From what I see in the example given I would infer it is a false positive since I do not see any way the SQL can be modified by providing certain values."}],"owner":{"account_id":29764449,"reputation":1,"user_id":22811116,"display_name":"unstable"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698381789,"creation_date":1698381519,"question_id":77371546,"body_markdown":"I am encountering a SonarQube vulnerability warning in my Spring Boot project. The warning is related to a potential SQL injection vulnerability in a piece of code that uses JdbcTemplate.query to execute a SQL query. Specifically, the warning appears when I have a line like this:\r\n\r\n    jdbcTemplate.query(&quot;select * from service&quot;, new BeanPropertyRowMapper&lt;Service&gt;(Service.class));\r\n\r\n\r\nI have checked the documentation for `JdbcTemplate` to see if there are any recommendations regarding SQL injection prevention, but I couldn&#39;t find specific guidance.","title":"SonarQube SQL Injection Vulnerability Warning for JdbcTemplate.query with Spring Boot","body":"<p>I am encountering a SonarQube vulnerability warning in my Spring Boot project. The warning is related to a potential SQL injection vulnerability in a piece of code that uses JdbcTemplate.query to execute a SQL query. Specifically, the warning appears when I have a line like this:</p>\n<pre><code>jdbcTemplate.query(&quot;select * from service&quot;, new BeanPropertyRowMapper&lt;Service&gt;(Service.class));\n</code></pre>\n<p>I have checked the documentation for <code>JdbcTemplate</code> to see if there are any recommendations regarding SQL injection prevention, but I couldn't find specific guidance.</p>\n"},{"tags":["java","spring","gradle","dependencies","multi-module"],"answers":[{"tags":[],"owner":{"account_id":9291622,"reputation":11361,"user_id":6899896,"display_name":"M.Ricciuti"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698271873,"creation_date":1698271873,"answer_id":77363148,"question_id":77358072,"body_markdown":"Are you deploying your application using the Springboot &quot;fat-jar&quot; created by the  `bootJar` task?  if so, one solution would be to conditionally include the feature module librarie(s) inside this Springboot jar, at the expected location  ( under `BOOT-INF/lib` where all other dependent libraries from your main project will be located).\r\nThis way, your feature module library will be scanned at application startup, and your custom beans will be found (if you respect the package naming as you mentioned).\r\n\r\nA sample configuration that can be used to configure the Spring jar content:\r\n\r\n```\r\nif (project.hasProperty(&quot;feature-a&quot;)) {\r\n    project(&quot;:feature-a&quot;).afterEvaluate { featureAproject-&gt;\r\n        bootJar {\r\n            into(&quot;BOOT-INF/lib&quot;) {\r\n                // note: there might be other ways to reference the output jar from subproject                \r\n                from(featureAproject.tasks.getByName(&quot;jar&quot;).outputs)\r\n\r\n                // TODO : create task dependency between bootJar task and the &#39;jar&#39; task from feature subproject\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n","title":"Using gradle to conditionally add beans to a spring project","body":"<p>Are you deploying your application using the Springboot &quot;fat-jar&quot; created by the  <code>bootJar</code> task?  if so, one solution would be to conditionally include the feature module librarie(s) inside this Springboot jar, at the expected location  ( under <code>BOOT-INF/lib</code> where all other dependent libraries from your main project will be located).\nThis way, your feature module library will be scanned at application startup, and your custom beans will be found (if you respect the package naming as you mentioned).</p>\n<p>A sample configuration that can be used to configure the Spring jar content:</p>\n<pre><code>if (project.hasProperty(&quot;feature-a&quot;)) {\n    project(&quot;:feature-a&quot;).afterEvaluate { featureAproject-&gt;\n        bootJar {\n            into(&quot;BOOT-INF/lib&quot;) {\n                // note: there might be other ways to reference the output jar from subproject                \n                from(featureAproject.tasks.getByName(&quot;jar&quot;).outputs)\n\n                // TODO : create task dependency between bootJar task and the 'jar' task from feature subproject\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29749396,"reputation":1,"user_id":22799645,"display_name":"DTS"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1698381772,"creation_date":1698381772,"answer_id":77371555,"question_id":77358072,"body_markdown":"I discovered a simple and effective way to do it:\r\n\r\n    if (project.hasProperty(&quot;feature-a&quot;)) {\r\n\t\truntimeOnly project(&#39;:feature-a&#39;)\r\n\t}\r\n\r\n","title":"Using gradle to conditionally add beans to a spring project","body":"<p>I discovered a simple and effective way to do it:</p>\n<pre><code>if (project.hasProperty(&quot;feature-a&quot;)) {\n    runtimeOnly project(':feature-a')\n}\n</code></pre>\n"}],"owner":{"account_id":29749396,"reputation":1,"user_id":22799645,"display_name":"DTS"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77371555,"answer_count":2,"score":0,"last_activity_date":1698381772,"creation_date":1698224633,"question_id":77358072,"body_markdown":"I&#39;m trying to think of a way to conditionally add (or augment) behaviour in my Spring boot project. The use-case is such: When a project is built for a particular customer, they have custom functionality requirements. I don&#39;t want the (unused) custom functionality class files to exist in the deployment for other customers, so I&#39;m thinking about a multi module project that&#39;s using a gradle build argument to include the custom functionality module. However, I think there&#39;s a circular dependency issue where the custom functionality depends on components from the main project - but to include the custom functionality in the build, the main project has to depend on the custom module. I&#39;ve tried including the module in the parent gradle.settings, having the module depend on the main project and then using the same package name and structure as what exists in the main project in a hopeful attempt that classpath scanning would pick up the class and create the bean - but it seems unless I have the main project depend on the custom code it doesn&#39;t seem to want to work.\r\n\r\nIs there something simple I&#39;ve missed or a better way to go about what I&#39;m trying to do?\r\nRegards","title":"Using gradle to conditionally add beans to a spring project","body":"<p>I'm trying to think of a way to conditionally add (or augment) behaviour in my Spring boot project. The use-case is such: When a project is built for a particular customer, they have custom functionality requirements. I don't want the (unused) custom functionality class files to exist in the deployment for other customers, so I'm thinking about a multi module project that's using a gradle build argument to include the custom functionality module. However, I think there's a circular dependency issue where the custom functionality depends on components from the main project - but to include the custom functionality in the build, the main project has to depend on the custom module. I've tried including the module in the parent gradle.settings, having the module depend on the main project and then using the same package name and structure as what exists in the main project in a hopeful attempt that classpath scanning would pick up the class and create the bean - but it seems unless I have the main project depend on the custom code it doesn't seem to want to work.</p>\n<p>Is there something simple I've missed or a better way to go about what I'm trying to do?\nRegards</p>\n"},{"tags":["java","http"],"answers":[{"tags":[],"owner":{"account_id":12305345,"reputation":450,"user_id":8978587,"display_name":"ShaharT"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698352253,"creation_date":1698352253,"answer_id":77370149,"question_id":77369946,"body_markdown":"just add `exchange.sendResponseHeaders(200, htmlResponse.length());`","title":"HttpServer responds with ERR_EMPTY_RESPONSE","body":"<p>just add <code>exchange.sendResponseHeaders(200, htmlResponse.length());</code></p>\n"}],"owner":{"account_id":1626178,"reputation":17293,"user_id":1501700,"accept_rate":39,"display_name":"vico"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698381282,"creation_date":1698349714,"question_id":77369946,"body_markdown":"I have self-hosted simple HTTP server. I tried to test with Chrome by entering address `http://localhost:8077/hello` and got error:\r\n\r\n    This page isn’t working\r\n    localhost didn’t send any data.\r\n    ERR_EMPTY_RESPONSE\r\n\r\nHow to solve this problem?\r\n\r\n    package com.kpv.gateway;\r\n            \r\n    import com.sun.net.httpserver.HttpServer;\r\n    import com.sun.net.httpserver.HttpHandler;\r\n    import com.sun.net.httpserver.HttpExchange;\r\n    \r\n    import java.io.IOException;\r\n    import java.io.OutputStream;        \r\n    \r\n    public class SimpleHttpServer {\r\n\r\n        public static void main(String[] args) throws IOException {\r\n            // Create an HttpServer instance \r\n            HttpServer server = HttpServer.create(new java.net.InetSocketAddress(8077), 0);\r\n    \r\n            // Create a context for a specific path and associate it with a handler\r\n            server.createContext(&quot;/hello&quot;, new HelloHandler());\r\n    \r\n            // Start the server\r\n            server.start();\r\n        }\r\n    \r\n        // Define a simple handler\r\n        static class HelloHandler implements HttpHandler {\r\n            @Override\r\n            public void handle(HttpExchange exchange) throws IOException {\r\n                // Get the output stream to write the response\r\n                OutputStream os = exchange.getResponseBody();\r\n                \r\n                System.out.print(&quot;hello&quot;);\r\n\r\n                String htmlResponse = &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\r\n                os.write(htmlResponse.getBytes());\r\n                os.close();\r\n            }\r\n        }\r\n    }\r\n","title":"HttpServer responds with ERR_EMPTY_RESPONSE","body":"<p>I have self-hosted simple HTTP server. I tried to test with Chrome by entering address <code>http://localhost:8077/hello</code> and got error:</p>\n<pre><code>This page isn’t working\nlocalhost didn’t send any data.\nERR_EMPTY_RESPONSE\n</code></pre>\n<p>How to solve this problem?</p>\n<pre><code>package com.kpv.gateway;\n        \nimport com.sun.net.httpserver.HttpServer;\nimport com.sun.net.httpserver.HttpHandler;\nimport com.sun.net.httpserver.HttpExchange;\n\nimport java.io.IOException;\nimport java.io.OutputStream;        \n\npublic class SimpleHttpServer {\n\n    public static void main(String[] args) throws IOException {\n        // Create an HttpServer instance \n        HttpServer server = HttpServer.create(new java.net.InetSocketAddress(8077), 0);\n\n        // Create a context for a specific path and associate it with a handler\n        server.createContext(&quot;/hello&quot;, new HelloHandler());\n\n        // Start the server\n        server.start();\n    }\n\n    // Define a simple handler\n    static class HelloHandler implements HttpHandler {\n        @Override\n        public void handle(HttpExchange exchange) throws IOException {\n            // Get the output stream to write the response\n            OutputStream os = exchange.getResponseBody();\n            \n            System.out.print(&quot;hello&quot;);\n\n            String htmlResponse = &quot;&lt;html&gt;&lt;body&gt;&lt;h1&gt;Hello, World!&lt;/h1&gt;&lt;/body&gt;&lt;/html&gt;&quot;;\n            os.write(htmlResponse.getBytes());\n            os.close();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","gradle","compiler-errors","war"],"comments":[{"owner":{"account_id":551394,"reputation":8315,"user_id":916225,"accept_rate":69,"display_name":"seenukarthi"},"score":0,"creation_date":1698379051,"post_id":77371241,"comment_id":136400633,"body_markdown":"[Please do not upload images of code/data/errors.](//meta.stackoverflow.com/q/285551) Instead, [edit] your question to include the code as properly formatted text.","body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a> Instead, <a href=\"https://stackoverflow.com/posts/77371241/edit\">edit</a> your question to include the code as properly formatted text."}],"owner":{"account_id":14581414,"reputation":1,"user_id":10531713,"display_name":"swaeetpotato"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698381039,"creation_date":1698374404,"question_id":77371241,"body_markdown":"I&#39;m trying to build a war file for my java project by using gradle task. However,I feep getting this error, but I do have ajc.options in my project, What did I do wrong?\r\n```\r\nWorking Directory: C:\\Users\\weihsiang\\Documents\\危害鑑別\\backend_api\r\nGradle user home: C:\\Users\\weihsiang\\.gradle\r\nGradle Distribution: Gradle wrapper from target build\r\nGradle Version: 7.6\r\nJava Home: C:\\Program Files\\Java\\jdk1.8.0_202\r\nJVM Arguments: None\r\nProgram Arguments: None\r\nBuild Scans Enabled: false\r\nOffline Mode Enabled: false\r\nGradle Tasks: war\r\n\r\n\r\n&gt; Task :app:compileJava\r\n[error] build config error: file does not exist: C:\\Users\\weihsiang\\Documents\\�摰喲�\\backend_api\\app\\build\\tmp\\compileJava\\ajc.options\r\n\t\r\n[error] no sources specified\r\n\t\r\n\r\n2 errors\r\n\r\n&gt; Task :app:compileJava FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:compileJava&#39;.\r\n&gt; Compilation failed with exit code 2; see the compiler error output for details.\r\n\r\n* Try:\r\n&gt; Run with --stacktrace option to get the stack trace.\r\n&gt; Run with --info or --debug option to get more log output.\r\n&gt; Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nBUILD FAILED in 4s\r\n1 actionable task: 1 executed\r\n```","title":"Task :app:compileJava FAILED: file does not exist","body":"<p>I'm trying to build a war file for my java project by using gradle task. However,I feep getting this error, but I do have ajc.options in my project, What did I do wrong?</p>\n<pre><code>Working Directory: C:\\Users\\weihsiang\\Documents\\危害鑑別\\backend_api\nGradle user home: C:\\Users\\weihsiang\\.gradle\nGradle Distribution: Gradle wrapper from target build\nGradle Version: 7.6\nJava Home: C:\\Program Files\\Java\\jdk1.8.0_202\nJVM Arguments: None\nProgram Arguments: None\nBuild Scans Enabled: false\nOffline Mode Enabled: false\nGradle Tasks: war\n\n\n&gt; Task :app:compileJava\n[error] build config error: file does not exist: C:\\Users\\weihsiang\\Documents\\�摰喲�\\backend_api\\app\\build\\tmp\\compileJava\\ajc.options\n    \n[error] no sources specified\n    \n\n2 errors\n\n&gt; Task :app:compileJava FAILED\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':app:compileJava'.\n&gt; Compilation failed with exit code 2; see the compiler error output for details.\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 4s\n1 actionable task: 1 executed\n</code></pre>\n"},{"tags":["java","maven","maven-plugin","errorprone"],"comments":[{"owner":{"account_id":5196039,"reputation":187,"user_id":4157304,"display_name":"Ankur Saxena"},"score":0,"creation_date":1698085258,"post_id":77347465,"comment_id":136357937,"body_markdown":"Try cleaning your local Maven repository by deleting the contents of the .m2 directory (usually located in your home directory). Then, run mvn clean install again to redownload all dependencies.","body":"Try cleaning your local Maven repository by deleting the contents of the .m2 directory (usually located in your home directory). Then, run mvn clean install again to redownload all dependencies."},{"owner":{"account_id":17474517,"reputation":108,"user_id":12669673,"display_name":"Alexandru Borza"},"score":0,"creation_date":1698085842,"post_id":77347465,"comment_id":136358007,"body_markdown":"@AnkurSaxena \nI tried now, but the result was the same","body":"@AnkurSaxena  I tried now, but the result was the same"}],"answers":[{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698380667,"creation_date":1698333134,"answer_id":77368243,"question_id":77347465,"body_markdown":"Found the issue. Please read the docs properly.\r\n\r\nI followed the **Official Docs from Google Error Prone** [here][1].\r\n\r\nCouple of things need to be fixed.\r\n\r\n- Firstly, you will need to add `error_prone_refaster` dependency in your `annotationProcessorPaths` to make the plugin work.\r\n\r\nThis will fix the error: **Error: plug-in not found: RefasterRuleCompiler**.\r\n\r\n**Note:** This was not mentioned in the docs. I had to do hit and trial method to get to the solution.\r\n\r\nOtherwise, you will face `Error: plug-in not found: RefasterRuleCompiler` if you don&#39;t add `error_prone_refaster` dependency to the `annotationProcessorPaths`:\r\n\r\n    ➜  maven-error-prone-test git:(master) ✗ mvn clean install\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] -----------------&lt; org.example:maven-error-prone-test &gt;-----------------\r\n    [INFO] Building maven-error-prone-test 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ maven-error-prone-test ---\r\n    [INFO] Deleting /Users/anish/maven-error-prone-test/target\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ maven-error-prone-test ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Copying 1 resource\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ maven-error-prone-test ---\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 1 source file to /Users/anish/maven-error-prone-test/target/classes\r\n    [INFO] -------------------------------------------------------------\r\n    [ERROR] COMPILATION ERROR : \r\n    [INFO] -------------------------------------------------------------\r\n    [ERROR] error: plug-in not found: RefasterRuleCompiler\r\n    [INFO] 1 error\r\n    [INFO] -------------------------------------------------------------\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD FAILURE\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  1.526 s\r\n    [INFO] Finished at: 2023-10-26T20:45:15+05:30\r\n    [INFO] ------------------------------------------------------------------------\r\n    [ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project maven-error-prone-test: Compilation failure\r\n    [ERROR] error: plug-in not found: RefasterRuleCompiler\r\n    [ERROR] \r\n    [ERROR] -&gt; [Help 1]\r\n    [ERROR] \r\n    [ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n    [ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n    [ERROR] \r\n    [ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n    [ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\nSo, it&#39;s mandatory to add it.\r\n\r\n-  In the **RefasterRuleCompiler** plugin, you will need to pass the **Refaster Rule/Template** class. For example: If you have created a template class called \r\n**StringIsEmpty.java**, then you have to pass it to **RefasterRuleCompiler** plugin to generate the necessary **.refaster** file for you. \r\n\r\nI saw that you missed to do it. So, fix this please. \r\n\r\n**Example on how I did:** \r\n\r\n    &lt;arg&gt;-Xplugin:RefasterRuleCompiler --out ${project.basedir}/src/main/resources/refaster_files/emptystring.refaster ${project.basedir}/src/main/org/example/StringIsEmpty.java&lt;/arg&gt;  \r\n\r\n---\r\n\r\n**Scratch Project for demonstration:**\r\n\r\n**Project Structure (Before running `mvn clean install`):**\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n**StringIsEmpty.java (example code taken from Google Error Prone):**\r\n\r\n    package org.example;\r\n    \r\n    import com.google.errorprone.refaster.annotation.AfterTemplate;\r\n    import com.google.errorprone.refaster.annotation.AlsoNegation;\r\n    import com.google.errorprone.refaster.annotation.BeforeTemplate;\r\n    \r\n    public class StringIsEmpty {\r\n        @BeforeTemplate\r\n        boolean equalsEmptyString(String string) {\r\n            return string.equals(&quot;&quot;);\r\n        }\r\n    \r\n        @BeforeTemplate\r\n        boolean lengthEquals0(String string) {\r\n            return string.length() == 0;\r\n        }\r\n    \r\n        @AfterTemplate\r\n        @AlsoNegation\r\n        boolean optimizedMethod(String string) {\r\n            return string.isEmpty();\r\n        }\r\n    }\r\n\r\n\r\nWorking **pom.xml:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n             xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n             xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n        &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \r\n        &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n        &lt;artifactId&gt;maven-error-prone-test&lt;/artifactId&gt;\r\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    \r\n        &lt;properties&gt;\r\n            &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n            &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n            &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n            &lt;error-prone.version&gt;2.23.0&lt;/error-prone.version&gt;\r\n        &lt;/properties&gt;\r\n    \r\n        &lt;dependencies&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/com.google.errorprone/error_prone_core --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\r\n                &lt;artifactId&gt;error_prone_core&lt;/artifactId&gt;\r\n                &lt;version&gt;${error-prone.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n            &lt;!-- https://mvnrepository.com/artifact/com.google.errorprone/error_prone_refaster --&gt;\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\r\n                &lt;artifactId&gt;error_prone_refaster&lt;/artifactId&gt;\r\n                &lt;version&gt;${error-prone.version}&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n        &lt;/dependencies&gt;\r\n    \r\n        &lt;build&gt;\r\n            &lt;plugins&gt;\r\n                &lt;plugin&gt;\r\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                    &lt;version&gt;3.10.1&lt;/version&gt;\r\n                    &lt;configuration&gt;\r\n                        &lt;source&gt;17&lt;/source&gt;\r\n                        &lt;target&gt;17&lt;/target&gt;\r\n                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n                        &lt;fork&gt;true&lt;/fork&gt;\r\n                        &lt;compilerArgs&gt;\r\n                            &lt;arg&gt;-Xplugin:RefasterRuleCompiler --out ${project.basedir}/src/main/resources/refaster_files/emptystring.refaster ${project.basedir}/src/main/org/example/StringIsEmpty.java&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&lt;/arg&gt;\r\n                            &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&lt;/arg&gt;\r\n                        &lt;/compilerArgs&gt;\r\n                        &lt;annotationProcessorPaths&gt;\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;error_prone_refaster&lt;/artifactId&gt;\r\n                                &lt;version&gt;${error-prone.version}&lt;/version&gt;\r\n                            &lt;/path&gt;\r\n                            &lt;path&gt;\r\n                                &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\r\n                                &lt;artifactId&gt;error_prone_core&lt;/artifactId&gt;\r\n                                &lt;version&gt;${error-prone.version}&lt;/version&gt;\r\n                            &lt;/path&gt;\r\n                        &lt;/annotationProcessorPaths&gt;\r\n                    &lt;/configuration&gt;\r\n                &lt;/plugin&gt;\r\n            &lt;/plugins&gt;\r\n        &lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n**`mvn clean install` success logs:**\r\n\r\n    ➜  maven-error-prone-test git:(master) ✗ mvn clean install\r\n    [INFO] Scanning for projects...\r\n    [INFO] \r\n    [INFO] -----------------&lt; org.example:maven-error-prone-test &gt;-----------------\r\n    [INFO] Building maven-error-prone-test 1.0-SNAPSHOT\r\n    [INFO] --------------------------------[ jar ]---------------------------------\r\n    [INFO] \r\n    [INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ maven-error-prone-test ---\r\n    [INFO] Deleting /Users/anish/maven-error-prone-test/target\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ maven-error-prone-test ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] Copying 0 resource\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ maven-error-prone-test ---\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] Compiling 1 source file to /Users/anish/maven-error-prone-test/target/classes\r\n    [INFO] \r\n    [INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ maven-error-prone-test ---\r\n    [INFO] Using &#39;UTF-8&#39; encoding to copy filtered resources.\r\n    [INFO] skip non existing resourceDirectory /Users/anish/maven-error-prone-test/src/test/resources\r\n    [INFO] \r\n    [INFO] --- maven-compiler-plugin:3.10.1:testCompile (default-testCompile) @ maven-error-prone-test ---\r\n    [INFO] Changes detected - recompiling the module!\r\n    [INFO] \r\n    [INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ maven-error-prone-test ---\r\n    [INFO] \r\n    [INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ maven-error-prone-test ---\r\n    [INFO] Building jar: /Users/anish/maven-error-prone-test/target/maven-error-prone-test-1.0-SNAPSHOT.jar\r\n    [INFO] \r\n    [INFO] --- maven-install-plugin:2.4:install (default-install) @ maven-error-prone-test ---\r\n    [INFO] Installing /Users/anish/maven-error-prone-test/target/maven-error-prone-test-1.0-SNAPSHOT.jar to /Users/anish/.m2/repository/org/example/maven-error-prone-test/1.0-SNAPSHOT/maven-error-prone-test-1.0-SNAPSHOT.jar\r\n    [INFO] Installing /Users/anish/maven-error-prone-test/pom.xml to /Users/anish/.m2/repository/org/example/maven-error-prone-test/1.0-SNAPSHOT/maven-error-prone-test-1.0-SNAPSHOT.pom\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] BUILD SUCCESS\r\n    [INFO] ------------------------------------------------------------------------\r\n    [INFO] Total time:  2.502 s\r\n    [INFO] Finished at: 2023-10-26T20:39:21+05:30\r\n    [INFO] ------------------------------------------------------------------------\r\n\r\n**Project Structure (after running `mvn clean install`):**\r\n\r\n[![enter image description here][3]][3]\r\n\r\nAs you can see the **.refaster** file was generated :)\r\n\r\n\r\n  [1]: https://errorprone.info/docs/installation\r\n  [2]: https://i.stack.imgur.com/LnSOH.png\r\n  [3]: https://i.stack.imgur.com/sjUTI.png","title":"Error: plug-in not found: RefasterRuleCompiler","body":"<p>Found the issue. Please read the docs properly.</p>\n<p>I followed the <strong>Official Docs from Google Error Prone</strong> <a href=\"https://errorprone.info/docs/installation\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Couple of things need to be fixed.</p>\n<ul>\n<li>Firstly, you will need to add <code>error_prone_refaster</code> dependency in your <code>annotationProcessorPaths</code> to make the plugin work.</li>\n</ul>\n<p>This will fix the error: <strong>Error: plug-in not found: RefasterRuleCompiler</strong>.</p>\n<p><strong>Note:</strong> This was not mentioned in the docs. I had to do hit and trial method to get to the solution.</p>\n<p>Otherwise, you will face <code>Error: plug-in not found: RefasterRuleCompiler</code> if you don't add <code>error_prone_refaster</code> dependency to the <code>annotationProcessorPaths</code>:</p>\n<pre><code>➜  maven-error-prone-test git:(master) ✗ mvn clean install\n[INFO] Scanning for projects...\n[INFO] \n[INFO] -----------------&lt; org.example:maven-error-prone-test &gt;-----------------\n[INFO] Building maven-error-prone-test 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ maven-error-prone-test ---\n[INFO] Deleting /Users/anish/maven-error-prone-test/target\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ maven-error-prone-test ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 1 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ maven-error-prone-test ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 1 source file to /Users/anish/maven-error-prone-test/target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] error: plug-in not found: RefasterRuleCompiler\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  1.526 s\n[INFO] Finished at: 2023-10-26T20:45:15+05:30\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project maven-error-prone-test: Compilation failure\n[ERROR] error: plug-in not found: RefasterRuleCompiler\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n</code></pre>\n<p>So, it's mandatory to add it.</p>\n<ul>\n<li>In the <strong>RefasterRuleCompiler</strong> plugin, you will need to pass the <strong>Refaster Rule/Template</strong> class. For example: If you have created a template class called\n<strong>StringIsEmpty.java</strong>, then you have to pass it to <strong>RefasterRuleCompiler</strong> plugin to generate the necessary <strong>.refaster</strong> file for you.</li>\n</ul>\n<p>I saw that you missed to do it. So, fix this please.</p>\n<p><strong>Example on how I did:</strong></p>\n<pre><code>&lt;arg&gt;-Xplugin:RefasterRuleCompiler --out ${project.basedir}/src/main/resources/refaster_files/emptystring.refaster ${project.basedir}/src/main/org/example/StringIsEmpty.java&lt;/arg&gt;  \n</code></pre>\n<hr />\n<p><strong>Scratch Project for demonstration:</strong></p>\n<p><strong>Project Structure (Before running <code>mvn clean install</code>):</strong></p>\n<p><a href=\"https://i.stack.imgur.com/LnSOH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LnSOH.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>StringIsEmpty.java (example code taken from Google Error Prone):</strong></p>\n<pre><code>package org.example;\n\nimport com.google.errorprone.refaster.annotation.AfterTemplate;\nimport com.google.errorprone.refaster.annotation.AlsoNegation;\nimport com.google.errorprone.refaster.annotation.BeforeTemplate;\n\npublic class StringIsEmpty {\n    @BeforeTemplate\n    boolean equalsEmptyString(String string) {\n        return string.equals(&quot;&quot;);\n    }\n\n    @BeforeTemplate\n    boolean lengthEquals0(String string) {\n        return string.length() == 0;\n    }\n\n    @AfterTemplate\n    @AlsoNegation\n    boolean optimizedMethod(String string) {\n        return string.isEmpty();\n    }\n}\n</code></pre>\n<p>Working <strong>pom.xml:</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;maven-error-prone-test&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;error-prone.version&gt;2.23.0&lt;/error-prone.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.google.errorprone/error_prone_core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\n            &lt;artifactId&gt;error_prone_core&lt;/artifactId&gt;\n            &lt;version&gt;${error-prone.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/com.google.errorprone/error_prone_refaster --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\n            &lt;artifactId&gt;error_prone_refaster&lt;/artifactId&gt;\n            &lt;version&gt;${error-prone.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;fork&gt;true&lt;/fork&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;-Xplugin:RefasterRuleCompiler --out ${project.basedir}/src/main/resources/refaster_files/emptystring.refaster ${project.basedir}/src/main/org/example/StringIsEmpty.java&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-exports=jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED&lt;/arg&gt;\n                        &lt;arg&gt;-J--add-opens=jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\n                            &lt;artifactId&gt;error_prone_refaster&lt;/artifactId&gt;\n                            &lt;version&gt;${error-prone.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\n                            &lt;artifactId&gt;error_prone_core&lt;/artifactId&gt;\n                            &lt;version&gt;${error-prone.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong><code>mvn clean install</code> success logs:</strong></p>\n<pre><code>➜  maven-error-prone-test git:(master) ✗ mvn clean install\n[INFO] Scanning for projects...\n[INFO] \n[INFO] -----------------&lt; org.example:maven-error-prone-test &gt;-----------------\n[INFO] Building maven-error-prone-test 1.0-SNAPSHOT\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-clean-plugin:2.5:clean (default-clean) @ maven-error-prone-test ---\n[INFO] Deleting /Users/anish/maven-error-prone-test/target\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ maven-error-prone-test ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 0 resource\n[INFO] \n[INFO] --- maven-compiler-plugin:3.10.1:compile (default-compile) @ maven-error-prone-test ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 1 source file to /Users/anish/maven-error-prone-test/target/classes\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ maven-error-prone-test ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /Users/anish/maven-error-prone-test/src/test/resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.10.1:testCompile (default-testCompile) @ maven-error-prone-test ---\n[INFO] Changes detected - recompiling the module!\n[INFO] \n[INFO] --- maven-surefire-plugin:2.12.4:test (default-test) @ maven-error-prone-test ---\n[INFO] \n[INFO] --- maven-jar-plugin:2.4:jar (default-jar) @ maven-error-prone-test ---\n[INFO] Building jar: /Users/anish/maven-error-prone-test/target/maven-error-prone-test-1.0-SNAPSHOT.jar\n[INFO] \n[INFO] --- maven-install-plugin:2.4:install (default-install) @ maven-error-prone-test ---\n[INFO] Installing /Users/anish/maven-error-prone-test/target/maven-error-prone-test-1.0-SNAPSHOT.jar to /Users/anish/.m2/repository/org/example/maven-error-prone-test/1.0-SNAPSHOT/maven-error-prone-test-1.0-SNAPSHOT.jar\n[INFO] Installing /Users/anish/maven-error-prone-test/pom.xml to /Users/anish/.m2/repository/org/example/maven-error-prone-test/1.0-SNAPSHOT/maven-error-prone-test-1.0-SNAPSHOT.pom\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.502 s\n[INFO] Finished at: 2023-10-26T20:39:21+05:30\n[INFO] ------------------------------------------------------------------------\n</code></pre>\n<p><strong>Project Structure (after running <code>mvn clean install</code>):</strong></p>\n<p><a href=\"https://i.stack.imgur.com/sjUTI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sjUTI.png\" alt=\"enter image description here\" /></a></p>\n<p>As you can see the <strong>.refaster</strong> file was generated :)</p>\n"}],"owner":{"account_id":17474517,"reputation":108,"user_id":12669673,"display_name":"Alexandru Borza"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":113,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77368243,"answer_count":1,"score":2,"last_activity_date":1698380667,"creation_date":1698084876,"question_id":77347465,"body_markdown":"I am trying to create **.refaster** rules using [Google Error Prone](https://github.com/google/error-prone) library for my project. \r\n\r\nMy project is using **Maven** &amp; **JDK 17** and has the following **pom.xml**:\r\n\r\n       &lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;error_prone_refaster&lt;/artifactId&gt;\r\n    \t\t\t&lt;version&gt;2.23.0&lt;/version&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;version&gt;3.11.0&lt;/version&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;release&gt;17&lt;/release&gt;\r\n    \t\t\t\t\t&lt;compilerArgs&gt;\r\n    \t\t\t\t\t\t&lt;arg&gt;-Xplugin:RefasterRuleCompiler --out ${project.basedir}/../emptystring.refaster&lt;/arg&gt;\r\n    \t\t\t\t\t&lt;/compilerArgs&gt;\r\n    \t\t\t\t\t&lt;annotationProcessorPaths&gt;\r\n    \t\t\t\t\t\t&lt;path&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;error_prone_core&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t\t&lt;version&gt;2.23.0&lt;/version&gt;\r\n    \t\t\t\t\t\t&lt;/path&gt;\r\n    \t\t\t\t\t&lt;/annotationProcessorPaths&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n\r\n\r\nWhen I&#39;m executing the command `mvn clean install`, the following error is thrown:\r\n\r\n\r\n    Compilation failure\r\n    plug-in not found: RefasterRuleCompiler\r\n\r\nAlso, I have added the following configuration in the **.mvn/jvm.config** to run with JDK 17 like indicated in the official documentation:\r\n\r\n\r\n    --add-exports jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED\r\n    --add-exports jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED\r\n    --add-exports jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED\r\n    --add-exports jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED\r\n    --add-exports jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED\r\n    --add-exports jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED\r\n    --add-exports jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED\r\n    --add-exports jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED\r\n    --add-opens jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED\r\n    --add-opens jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED\r\n    \r\n\r\n**Note:** I started a project with **Error Prone Core** before also and I have succeeded to run with JDK 17 but when I try to run the project with **Error Prone Refaster**, it&#39;s failing.\r\n\r\nAlso, I set the `JAVA_HOME` to **JDK 17** and tried running the project from the terminal, the error still persisted.\r\n\r\nHow to fix this?","title":"Error: plug-in not found: RefasterRuleCompiler","body":"<p>I am trying to create <strong>.refaster</strong> rules using <a href=\"https://github.com/google/error-prone\" rel=\"nofollow noreferrer\">Google Error Prone</a> library for my project.</p>\n<p>My project is using <strong>Maven</strong> &amp; <strong>JDK 17</strong> and has the following <strong>pom.xml</strong>:</p>\n<pre><code>   &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\n            &lt;artifactId&gt;error_prone_refaster&lt;/artifactId&gt;\n            &lt;version&gt;2.23.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.11.0&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;17&lt;/release&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;-Xplugin:RefasterRuleCompiler --out ${project.basedir}/../emptystring.refaster&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;com.google.errorprone&lt;/groupId&gt;\n                            &lt;artifactId&gt;error_prone_core&lt;/artifactId&gt;\n                            &lt;version&gt;2.23.0&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>When I'm executing the command <code>mvn clean install</code>, the following error is thrown:</p>\n<pre><code>Compilation failure\nplug-in not found: RefasterRuleCompiler\n</code></pre>\n<p>Also, I have added the following configuration in the <strong>.mvn/jvm.config</strong> to run with JDK 17 like indicated in the official documentation:</p>\n<pre><code>--add-exports jdk.compiler/com.sun.tools.javac.api=ALL-UNNAMED\n--add-exports jdk.compiler/com.sun.tools.javac.file=ALL-UNNAMED\n--add-exports jdk.compiler/com.sun.tools.javac.main=ALL-UNNAMED\n--add-exports jdk.compiler/com.sun.tools.javac.model=ALL-UNNAMED\n--add-exports jdk.compiler/com.sun.tools.javac.parser=ALL-UNNAMED\n--add-exports jdk.compiler/com.sun.tools.javac.processing=ALL-UNNAMED\n--add-exports jdk.compiler/com.sun.tools.javac.tree=ALL-UNNAMED\n--add-exports jdk.compiler/com.sun.tools.javac.util=ALL-UNNAMED\n--add-opens jdk.compiler/com.sun.tools.javac.code=ALL-UNNAMED\n--add-opens jdk.compiler/com.sun.tools.javac.comp=ALL-UNNAMED\n</code></pre>\n<p><strong>Note:</strong> I started a project with <strong>Error Prone Core</strong> before also and I have succeeded to run with JDK 17 but when I try to run the project with <strong>Error Prone Refaster</strong>, it's failing.</p>\n<p>Also, I set the <code>JAVA_HOME</code> to <strong>JDK 17</strong> and tried running the project from the terminal, the error still persisted.</p>\n<p>How to fix this?</p>\n"},{"tags":["java","regex","xml"],"comments":[{"owner":{"account_id":2213369,"reputation":27567,"user_id":1954610,"accept_rate":78,"display_name":"Tom Lord"},"score":6,"creation_date":1695113284,"post_id":77132963,"comment_id":135977325,"body_markdown":"Obligatory: [**TH̘Ë͖́̉ ͠P̯͍̭O̚​N̐Y̡ H̸̡̪̯ͨ͊̽̅̾̎Ȩ̬̩̾͛ͪ̈́̀́͘ ̶̧̨̱̹̭̯ͧ̾ͬC̷̙̲̝͖ͭ̏ͥͮ͟Oͮ͏̮̪̝͍M̲̖͊̒ͪͩͬ̚̚͜Ȇ̴̟̟͙̞ͩ͌͝S̨̥̫͎̭ͯ̿̔̀ͅ**](https://stackoverflow.com/a/1732454/1954610)","body":"Obligatory: <a href=\"https://stackoverflow.com/a/1732454/1954610\"><b>TH̘Ë͖́̉ ͠P̯͍̭O̚​N̐Y̡ H̸̡̪̯ͨ͊̽̅̾̎Ȩ̬̩̾͛ͪ̈́̀́͘ ̶̧̨̱̹̭̯ͧ̾ͬC̷̙̲̝͖ͭ̏ͥͮ͟Oͮ͏̮̪̝͍M̲̖͊̒ͪͩͬ̚̚͜Ȇ̴̟̟͙̞ͩ͌͝S̨̥̫͎̭ͯ̿̔̀ͅ</b></a>"},{"owner":{"account_id":6156307,"reputation":33584,"user_id":5015238,"display_name":"jdweng"},"score":2,"creation_date":1695114517,"post_id":77132963,"comment_id":135977589,"body_markdown":"Never use Regex on XML.  Regex is meant for regular expressions and XML is not regular.  Use an XML library.","body":"Never use Regex on XML.  Regex is meant for regular expressions and XML is not regular.  Use an XML library."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695133257,"post_id":77132963,"comment_id":135981410,"body_markdown":"The zalgo question is always amusing but this one is more helpful:  https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg  (Seriously, do not use a regex to parse XML.)","body":"The zalgo question is always amusing but this one is more helpful:  <a href=\"https://stackoverflow.com/questions/701166/can-you-provide-some-examples-of-why-it-is-hard-to-parse-xml-and-html-with-a-reg\" title=\"can you provide some examples of why it is hard to parse xml and html with a reg\">stackoverflow.com/questions/701166/&hellip;</a>  (Seriously, do not use a regex to parse XML.)"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1698383365,"post_id":77132963,"comment_id":136400897,"body_markdown":"[Java XML and JSON](https://www.amazon.com/Java-XML-JSON-Document-Processing-dp-1484243293/dp/1484243293/ref=dp_ob_title_bk) book written by Jeff Friesen","body":"<a href=\"https://rads.stackoverflow.com/amzn/click/com/1484243293\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Java XML and JSON</a> book written by Jeff Friesen"}],"owner":{"account_id":22480689,"reputation":11,"user_id":16679813,"display_name":"Hionut"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1698380469,"creation_date":1695112866,"question_id":77132963,"body_markdown":"I have one arxml file where I want to delete multiple elements (interfaces, ports, references of those etc). \r\n\r\nExample : \r\n\r\n    &lt;CLIENT-SERVER-INTERFACE&gt;\r\n        &lt;SHORT-NAME&gt;IF_interfaceName&lt;/SHORT-NAME&gt;\r\n        &lt;IS-SERVICE&gt;false&lt;/IS-SERVICE&gt;\r\n        &lt;OPERATIONS&gt;\r\n            &lt;CLIENT-SERVER-OPERATION&gt;\r\n                &lt;SHORT-NAME&gt;CS_operationname&lt;/SHORT-NAME&gt;\r\n                &lt;POSSIBLE-ERROR-REFS&gt;\r\n                    &lt;POSSIBLE-ERROR-REF&gt;something&lt;/POSSIBLE-ERROR-REF&gt;\r\n                &lt;/POSSIBLE-ERROR-REFS&gt;\r\n            &lt;/CLIENT-SERVER-OPERATION&gt;\r\n\r\n    &lt;/CLIENT-SERVER-INTERFACE&gt;\r\n\r\nI&#39;m using an array where I have stored multiple &quot;tags&quot; that will be replaced in my regex. ex :\r\n\r\n    &lt;CLIENT-SERVER-INTERFACE(.*?)(IF_interfaceName)(.*?)&lt;/CLIENT-SERVER-INTERFACE&gt; \r\n\r\nI want to delete EVERY element that is (in this case) a client-server-interface, where my regex will match the shortname of it. \r\n\r\nUnfortunately, if my ARXML file contains multiple elements of the same kind in a row, the regex will not stop and delete everything until the last `&lt;/client-server-interface&gt;` it will find, even if the shortName of the other elements are not matched. \r\n\r\n\r\n```\r\nStringBuilder content = readArxml(filePath); // Load content from file\r\n\r\nif (content != null) \r\n{ \r\n    // Check if content was successfully loaded\r\n    //&quot;tag&quot; will iterate over an array of opening tags(&lt;tagName&gt;)\r\n\r\n    for (String tag : tags) \r\n    {\r\n        // &quot;regex&quot; will iterate over an array of regex expressions that will match the shortname tag of every element\r\n        for (String regex : regexExp) \r\n        {\r\n            String expression = &quot;&lt;&quot; + tag + &quot;(.|\\\\s+)*&quot; + regex + &quot;(.|\\\\s+)*&quot; + &quot;&lt;/&quot; + tag + &quot;.*&gt;&quot;;\r\n            String replacement = &quot;&quot;;\r\n            content = new StringBuilder(content.toString().replaceAll(expression, replacement));\r\n                \r\n```\r\n\r\nWhat&#39;s the problem here?\r\n\r\n\r\nI have tried to add a &quot;?&quot; to the expression, but that didn&#39;t work as expected , the code didn&#39;t alter the file\r\n\r\n```\r\nString expression = &quot;&lt;&quot; + tag + &quot;(.|\\\\s+)?*&quot; + regex + &quot;(.|\\\\s+)?*&quot; + &quot;&lt;/&quot; + tag + &quot;.?*&gt;&quot;;\r\n```\r\n","title":"Why isn&#39;t this regex stoping after the first encounter of the string its supposed to match?","body":"<p>I have one arxml file where I want to delete multiple elements (interfaces, ports, references of those etc).</p>\n<p>Example :</p>\n<pre><code>&lt;CLIENT-SERVER-INTERFACE&gt;\n    &lt;SHORT-NAME&gt;IF_interfaceName&lt;/SHORT-NAME&gt;\n    &lt;IS-SERVICE&gt;false&lt;/IS-SERVICE&gt;\n    &lt;OPERATIONS&gt;\n        &lt;CLIENT-SERVER-OPERATION&gt;\n            &lt;SHORT-NAME&gt;CS_operationname&lt;/SHORT-NAME&gt;\n            &lt;POSSIBLE-ERROR-REFS&gt;\n                &lt;POSSIBLE-ERROR-REF&gt;something&lt;/POSSIBLE-ERROR-REF&gt;\n            &lt;/POSSIBLE-ERROR-REFS&gt;\n        &lt;/CLIENT-SERVER-OPERATION&gt;\n\n&lt;/CLIENT-SERVER-INTERFACE&gt;\n</code></pre>\n<p>I'm using an array where I have stored multiple &quot;tags&quot; that will be replaced in my regex. ex :</p>\n<pre><code>&lt;CLIENT-SERVER-INTERFACE(.*?)(IF_interfaceName)(.*?)&lt;/CLIENT-SERVER-INTERFACE&gt; \n</code></pre>\n<p>I want to delete EVERY element that is (in this case) a client-server-interface, where my regex will match the shortname of it.</p>\n<p>Unfortunately, if my ARXML file contains multiple elements of the same kind in a row, the regex will not stop and delete everything until the last <code>&lt;/client-server-interface&gt;</code> it will find, even if the shortName of the other elements are not matched.</p>\n<pre><code>StringBuilder content = readArxml(filePath); // Load content from file\n\nif (content != null) \n{ \n    // Check if content was successfully loaded\n    //&quot;tag&quot; will iterate over an array of opening tags(&lt;tagName&gt;)\n\n    for (String tag : tags) \n    {\n        // &quot;regex&quot; will iterate over an array of regex expressions that will match the shortname tag of every element\n        for (String regex : regexExp) \n        {\n            String expression = &quot;&lt;&quot; + tag + &quot;(.|\\\\s+)*&quot; + regex + &quot;(.|\\\\s+)*&quot; + &quot;&lt;/&quot; + tag + &quot;.*&gt;&quot;;\n            String replacement = &quot;&quot;;\n            content = new StringBuilder(content.toString().replaceAll(expression, replacement));\n                \n</code></pre>\n<p>What's the problem here?</p>\n<p>I have tried to add a &quot;?&quot; to the expression, but that didn't work as expected , the code didn't alter the file</p>\n<pre><code>String expression = &quot;&lt;&quot; + tag + &quot;(.|\\\\s+)?*&quot; + regex + &quot;(.|\\\\s+)?*&quot; + &quot;&lt;/&quot; + tag + &quot;.?*&gt;&quot;;\n</code></pre>\n"},{"tags":["java","ffmpeg"],"comments":[{"owner":{"account_id":6095312,"reputation":33135,"user_id":4756299,"display_name":"Andrew Henle"},"score":0,"creation_date":1698281672,"post_id":77363258,"comment_id":136386669,"body_markdown":"&quot;It does not run&quot; is horribly imprecise.  What **does** it do, **exactly**?  Does it hang?  Does it throw any exception(s)?  Does it turn your computer into a pony that prances about the room?","body":"&quot;It does not run&quot; is horribly imprecise.  What <b>does</b> it do, <b>exactly</b>?  Does it hang?  Does it throw any exception(s)?  Does it turn your computer into a pony that prances about the room?"},{"owner":{"account_id":1361814,"reputation":2859,"user_id":1299026,"accept_rate":77,"display_name":"Todd"},"score":0,"creation_date":1698283123,"post_id":77363258,"comment_id":136386797,"body_markdown":"I&#39;ve updated the &quot;doesn&#39;t run&quot; section.","body":"I&#39;ve updated the &quot;doesn&#39;t run&quot; section."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1698309653,"post_id":77363258,"comment_id":136389768,"body_markdown":"Don&#39;t redirect stderr. Inherit it and try again","body":"Don&#39;t redirect stderr. Inherit it and try again"},{"owner":{"account_id":1361814,"reputation":2859,"user_id":1299026,"accept_rate":77,"display_name":"Todd"},"score":0,"creation_date":1698348339,"post_id":77363258,"comment_id":136397588,"body_markdown":"g00se, I don&#39;t understand.  Could you show me what you mean?  Thx.","body":"g00se, I don&#39;t understand.  Could you show me what you mean?  Thx."}],"owner":{"account_id":1361814,"reputation":2859,"user_id":1299026,"accept_rate":77,"display_name":"Todd"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698380398,"creation_date":1698274093,"question_id":77363258,"body_markdown":"I&#39;m writing a Podcast downloader where I want to be able to download one or more podcasts then run them through FFMPEG.  \r\n\r\nIt **does** run when I run the program in Windows.  \r\nIt **does not** run when I run the program in Linux - Meaning FFMPEG may or may not have been called.  I have no way of knowing.  I get a -1 back from process.waitfor() but no error in my Java logs and no entries at all in the ffmpeg.log file.  And there is no file in the processed file directory that FFMPEG would have created.  \r\nIt **does** run in Linux if I run the same command that fails in Java from the command line.\r\n\r\nFFMPEG has the permissions: rwxr-xr-x , so it doesn&#39;t seem as if it&#39;d be a permission error.  The Java code looks like: \r\n\r\n        ProcessBuilder processBuilder = new ProcessBuilder( commands );\r\n        processBuilder.redirectErrorStream( true );\r\n        //  Added the next line to see if I could log an error from ffmpeg\r\n        processBuilder.redirectOutput( ProcessBuilder.Redirect.appendTo( new File( &quot;./ffmpeg.log&quot; ) ) );\r\n\r\n        Process process = processBuilder.start();\r\n        BufferedReader bufferedOutputReader = new BufferedReader( new InputStreamReader( process.getInputStream() ) );\r\n        do {\r\n            outputString = bufferedOutputReader.readLine();\r\n            if ( outputString != null ) {\r\n                LOGGER.trace( outputString );\r\n            }\r\n        } while ( outputString != null );\r\n        results = process.waitFor();\r\n        LOGGER.debug( &quot;Exit value: &quot; + results );\r\n\r\nThe commands are:\r\n\r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: /bin/ffmpeg \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -y \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -i \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: &quot;/home/todd/aggregator/incoming/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot; \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -ac \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: 1 \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -af \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: &quot;atempo=1.4,volume=1.4&quot; \r\n    2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: &quot;/home/todd/aggregator/processed/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot;\r\n\r\nAnd the manually constructed and run command line that DOES work is:\r\n\r\n    /bin/ffmpeg -y -i &quot;/home/todd/aggregator/incoming/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot; -ac 1 -af &quot;atempo=1.4,volume=1.4&quot; &quot;/home/todd/aggregator/processed/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot;\r\n\r\nThe ffmpeg.log file is empty, so I&#39;m doubting whether FFMPEG is ever being reached.\r\n\r\nWhat am I doing wrong?\r\n\r\n\r\n**EDIT:**\r\nI changed the commands to be \r\n    \r\n    &quot;/bin/ffmpeg 2&gt; foo.txt&quot; \r\n\r\nand the execution code to:\r\n\r\n        ProcessBuilder processBuilder = new ProcessBuilder( commands );\r\n    //        processBuilder.redirectErrorStream( true );\r\n        //  Added the next line to see if I could log an error from ffmpeg\r\n    //        processBuilder.redirectOutput( ProcessBuilder.Redirect.appendTo( new File( &quot;./ffmpeg.log&quot; ) ) );\r\n            Process process = processBuilder.start();\r\n            results = process.waitFor();\r\n\r\nRunning that command from the command line displays a list of MMPEG commands that can be run within foo.txt.  Upon running from within the Java app, the foo.txt file is empty, so it doesn&#39;t appear that FFMPEG ever gets reached.  But, I&#39;m clueless why not.\r\n\r\n**EDIT 2:**\r\nI converted the /bin/ffmpeg path to uppercase to see if that would return an error and it did.\r\n\r\n    ERROR org.mrpc.utilities.ShellUtils - Cannot run program &quot;/BIN/FFMPEG&quot;: error=2, No such file or directory\r\n\r\nThis seems to confirm that the Java Process object can locate ffmpeg successfully when it is properly cased (i.e. my original code) as I don&#39;t see an error message when the case is incorrect.  Still not sure why nothing happens when it is called.","title":"Java shelling out to FFMPEG not running nor giving error","body":"<p>I'm writing a Podcast downloader where I want to be able to download one or more podcasts then run them through FFMPEG.</p>\n<p>It <strong>does</strong> run when I run the program in Windows.<br />\nIt <strong>does not</strong> run when I run the program in Linux - Meaning FFMPEG may or may not have been called.  I have no way of knowing.  I get a -1 back from process.waitfor() but no error in my Java logs and no entries at all in the ffmpeg.log file.  And there is no file in the processed file directory that FFMPEG would have created.<br />\nIt <strong>does</strong> run in Linux if I run the same command that fails in Java from the command line.</p>\n<p>FFMPEG has the permissions: rwxr-xr-x , so it doesn't seem as if it'd be a permission error.  The Java code looks like:</p>\n<pre><code>    ProcessBuilder processBuilder = new ProcessBuilder( commands );\n    processBuilder.redirectErrorStream( true );\n    //  Added the next line to see if I could log an error from ffmpeg\n    processBuilder.redirectOutput( ProcessBuilder.Redirect.appendTo( new File( &quot;./ffmpeg.log&quot; ) ) );\n\n    Process process = processBuilder.start();\n    BufferedReader bufferedOutputReader = new BufferedReader( new InputStreamReader( process.getInputStream() ) );\n    do {\n        outputString = bufferedOutputReader.readLine();\n        if ( outputString != null ) {\n            LOGGER.trace( outputString );\n        }\n    } while ( outputString != null );\n    results = process.waitFor();\n    LOGGER.debug( &quot;Exit value: &quot; + results );\n</code></pre>\n<p>The commands are:</p>\n<pre><code>2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: /bin/ffmpeg \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -y \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -i \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: &quot;/home/todd/aggregator/incoming/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot; \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -ac \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: 1 \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: -af \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: &quot;atempo=1.4,volume=1.4&quot; \n2023-10-25 16:21:52,452 224257 [pool-1-thread-4] DEBUG org.sperbolink.utils.CodecUtils - command string: &quot;/home/todd/aggregator/processed/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot;\n</code></pre>\n<p>And the manually constructed and run command line that DOES work is:</p>\n<pre><code>/bin/ffmpeg -y -i &quot;/home/todd/aggregator/incoming/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot; -ac 1 -af &quot;atempo=1.4,volume=1.4&quot; &quot;/home/todd/aggregator/processed/Downrange Radio/Downrange_Radio_2023-02-15_The_Avidity_PD-10_Delivers_.mp3&quot;\n</code></pre>\n<p>The ffmpeg.log file is empty, so I'm doubting whether FFMPEG is ever being reached.</p>\n<p>What am I doing wrong?</p>\n<p><strong>EDIT:</strong>\nI changed the commands to be</p>\n<pre><code>&quot;/bin/ffmpeg 2&gt; foo.txt&quot; \n</code></pre>\n<p>and the execution code to:</p>\n<pre><code>    ProcessBuilder processBuilder = new ProcessBuilder( commands );\n//        processBuilder.redirectErrorStream( true );\n    //  Added the next line to see if I could log an error from ffmpeg\n//        processBuilder.redirectOutput( ProcessBuilder.Redirect.appendTo( new File( &quot;./ffmpeg.log&quot; ) ) );\n        Process process = processBuilder.start();\n        results = process.waitFor();\n</code></pre>\n<p>Running that command from the command line displays a list of MMPEG commands that can be run within foo.txt.  Upon running from within the Java app, the foo.txt file is empty, so it doesn't appear that FFMPEG ever gets reached.  But, I'm clueless why not.</p>\n<p><strong>EDIT 2:</strong>\nI converted the /bin/ffmpeg path to uppercase to see if that would return an error and it did.</p>\n<pre><code>ERROR org.mrpc.utilities.ShellUtils - Cannot run program &quot;/BIN/FFMPEG&quot;: error=2, No such file or directory\n</code></pre>\n<p>This seems to confirm that the Java Process object can locate ffmpeg successfully when it is properly cased (i.e. my original code) as I don't see an error message when the case is incorrect.  Still not sure why nothing happens when it is called.</p>\n"},{"tags":["java","android","kotlin","exception","android-sqlite"],"comments":[{"owner":{"account_id":6077735,"reputation":52951,"user_id":4744514,"accept_rate":96,"display_name":"MikeT"},"score":0,"creation_date":1698275238,"post_id":77357158,"comment_id":136386183,"body_markdown":"I believe that you need to concentrate on `at com.internetdesignzone.quotes.DatabaseHelper.getQuoteOfTheDay (DatabaseHelper.kt:214)` i.e. the exception appears to be when the `HomeFragment` is calling the `getQuoteOfTheDay` function.","body":"I believe that you need to concentrate on <code>at com.internetdesignzone.quotes.DatabaseHelper.getQuoteOfTheDa&zwnj;&#8203;y (DatabaseHelper.kt:214)</code> i.e. the exception appears to be when the <code>HomeFragment</code> is calling the <code>getQuoteOfTheDay</code> function."}],"owner":{"account_id":19276063,"reputation":11,"user_id":14089060,"display_name":"Vikram Sawant"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698380337,"creation_date":1698216529,"question_id":77357158,"body_markdown":"This is the function of android(Kotlin) app where sqlite database is used. My table name is `allcategories` and column&#39;s name is `clickcount` and I am facing an error as shown below:\r\n\r\n     fun updateCountById(id: String?) {\r\n            val mDataBase = this.writableDatabase\r\n            val incrementQuery =\r\n                &quot;UPDATE allcategories SET clickcount = clickcount + 1 WHERE category = ?&quot;\r\n            val selectionArgs = arrayOf(id)\r\n            Log.d(&quot;SQL Query&quot;, &quot;Query: $incrementQuery, Args: ${selectionArgs.joinToString(&quot;, &quot;)}&quot;)\r\n    \r\n            try {\r\n                mDataBase.execSQL(incrementQuery, selectionArgs)\r\n            } catch (e: SQLiteException) {\r\n                e.printStackTrace()\r\n            }\r\n    \r\n            val query = &quot;SELECT clickcount FROM allcategories WHERE category = ?&quot;\r\n            val cursor = mDataBase.rawQuery(query, selectionArgs)\r\n            var updatedCount = 0\r\n\r\n            if (cursor.moveToFirst()) {\r\n                val columnIndex = cursor.getColumnIndex(&quot;clickcount&quot;)\r\n\r\n                if (columnIndex != -1) {\r\n                    updatedCount = cursor.getInt(columnIndex)\r\n                }\r\n            }\r\n            cursor.close()\r\n            mDataBase.close()\r\n    \r\n            Log.e(&quot;Updated Count&quot;, &quot;Updated the count for category $id to $updatedCount&quot;)\r\n        }\r\n\r\nThe above is the function it is called when the button is clicked, this function fetches the current value of the count from db and increment it by 1 and again updates the incremented value to db \r\n\r\nI am getting this below error:\r\n\r\n&gt; android.database.sqlite.SQLiteException  \r\n&gt; Exception android.database.sqlite.SQLiteException:\r\n&gt;\r\n&gt; at android.database.sqlite.SQLiteConnection.nativePrepareStatement  \r\n&gt; at android.database.sqlite.SQLiteConnection.acquirePreparedStatement (SQLiteConnection.java:903)  \r\n&gt; at android.database.sqlite.SQLiteConnection.prepare (SQLiteConnection.java:514)\r\n      at android.database.sqlite.SQLiteSession.prepare (SQLiteSession.java:588)\r\n      at android.database.sqlite.SQLiteProgram.&lt;init&gt; (SQLiteProgram.java:58)\r\n      at android.database.sqlite.SQLiteQuery.&lt;init&gt; (SQLiteQuery.java:37)\r\n      at android.database.sqlite.SQLiteDirectCursorDriver.query (SQLiteDirectCursorDriver.java:46)\r\n      at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory (SQLiteDatabase.java:1408)\r\n      at android.database.sqlite.SQLiteDatabase.rawQuery (SQLiteDatabase.java:1347)\r\n      at com.internetdesignzone.quotes.DatabaseHelper.getQuoteOfTheDay (DatabaseHelper.kt:214)\r\n      at com.internetdesignzone.quotes.fragments.HomeFragment.onCreateView (HomeFragment.kt:349)\r\n      at androidx.fragment.app.Fragment.performCreateView (Fragment.java:2995)\r\n      at androidx.fragment.app.FragmentStateManager.createView (FragmentStateManager.java:523)\r\n      at androidx.fragment.app.FragmentStateManager.moveToExpectedState (FragmentStateManager.java:261)\r\n      at androidx.fragment.app.FragmentManager.executeOpsTogether (FragmentManager.java:1840)\r\n      at androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute (FragmentManager.java:1764)\r\n      at androidx.fragment.app.FragmentManager.execPendingActions (FragmentManager.java:1701)\r\n      at androidx.fragment.app.FragmentManager.dispatchStateChange (FragmentManager.java:2849)\r\n      at androidx.fragment.app.FragmentManager.dispatchViewCreated (FragmentManager.java:2777)\r\n      at androidx.fragment.app.Fragment.performViewCreated (Fragment.java:3020)\r\n      at androidx.fragment.app.FragmentStateManager.createView (FragmentStateManager.java:551)\r\n      at androidx.fragment.app.FragmentStateManager.moveToExpectedState (FragmentStateManager.java:261)\r\n      at androidx.fragment.app.FragmentStore.moveToExpectedState (FragmentStore.java:113)\r\n      at androidx.fragment.app.FragmentManager.moveToState (FragmentManager.java:1374)\r\n      at androidx.fragment.app.FragmentManager.dispatchStateChange (FragmentManager.java:2841)\r\n      at androidx.fragment.app.FragmentManager.dispatchActivityCreated (FragmentManager.java:2784)\r\n      at androidx.fragment.app.FragmentController.dispatchActivityCreated (FragmentController.java:262)\r\n      at androidx.fragment.app.FragmentActivity.onStart (FragmentActivity.java:478)\r\n      at androidx.appcompat.app.AppCompatActivity.onStart (AppCompatActivity.java:210)\r\n      at com.internetdesignzone.quotes.MainActivity.onStart (MainActivity.kt:235)\r\n      at android.app.Instrumentation.callActivityOnStart (Instrumentation.java:1405)\r\n      at android.app.Activity.performStart (Activity.java:8627)\r\n      at android.app.ActivityThread.handleStartActivity (ActivityThread.java:2991)\r\n      at android.app.servertransaction.TransactionExecutor.performLifecycleSequence (TransactionExecutor.java:180)\r\n      at android.app.servertransaction.TransactionExecutor.cycleToPath (TransactionExecutor.java:165)\r\n      at android.app.servertransaction.TransactionExecutor.executeLifecycleState (TransactionExecutor.java:142)\r\n      at android.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:70)\r\n      at android.app.ActivityThread$H.handleMessage (ActivityThread.java:1830)\r\n      at android.os.Handler.dispatchMessage (Handler.java:106)\r\n      at android.os.Looper.loop (Looper.java:193)\r\n      at android.app.ActivityThread.main (ActivityThread.java:6914)\r\n      at java.lang.reflect.Method.invoke\r\n      at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:592)\r\n      at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:858)","title":"Android Sqlite database crash while fetching and updating the value in the same function","body":"<p>This is the function of android(Kotlin) app where sqlite database is used. My table name is <code>allcategories</code> and column's name is <code>clickcount</code> and I am facing an error as shown below:</p>\n<pre><code> fun updateCountById(id: String?) {\n        val mDataBase = this.writableDatabase\n        val incrementQuery =\n            &quot;UPDATE allcategories SET clickcount = clickcount + 1 WHERE category = ?&quot;\n        val selectionArgs = arrayOf(id)\n        Log.d(&quot;SQL Query&quot;, &quot;Query: $incrementQuery, Args: ${selectionArgs.joinToString(&quot;, &quot;)}&quot;)\n\n        try {\n            mDataBase.execSQL(incrementQuery, selectionArgs)\n        } catch (e: SQLiteException) {\n            e.printStackTrace()\n        }\n\n        val query = &quot;SELECT clickcount FROM allcategories WHERE category = ?&quot;\n        val cursor = mDataBase.rawQuery(query, selectionArgs)\n        var updatedCount = 0\n\n        if (cursor.moveToFirst()) {\n            val columnIndex = cursor.getColumnIndex(&quot;clickcount&quot;)\n\n            if (columnIndex != -1) {\n                updatedCount = cursor.getInt(columnIndex)\n            }\n        }\n        cursor.close()\n        mDataBase.close()\n\n        Log.e(&quot;Updated Count&quot;, &quot;Updated the count for category $id to $updatedCount&quot;)\n    }\n</code></pre>\n<p>The above is the function it is called when the button is clicked, this function fetches the current value of the count from db and increment it by 1 and again updates the incremented value to db</p>\n<p>I am getting this below error:</p>\n<blockquote>\n<p>android.database.sqlite.SQLiteException<br />\nException android.database.sqlite.SQLiteException:</p>\n<p>at android.database.sqlite.SQLiteConnection.nativePrepareStatement<br />\nat android.database.sqlite.SQLiteConnection.acquirePreparedStatement (SQLiteConnection.java:903)<br />\nat android.database.sqlite.SQLiteConnection.prepare (SQLiteConnection.java:514)\nat android.database.sqlite.SQLiteSession.prepare (SQLiteSession.java:588)\nat android.database.sqlite.SQLiteProgram. (SQLiteProgram.java:58)\nat android.database.sqlite.SQLiteQuery. (SQLiteQuery.java:37)\nat android.database.sqlite.SQLiteDirectCursorDriver.query (SQLiteDirectCursorDriver.java:46)\nat android.database.sqlite.SQLiteDatabase.rawQueryWithFactory (SQLiteDatabase.java:1408)\nat android.database.sqlite.SQLiteDatabase.rawQuery (SQLiteDatabase.java:1347)\nat com.internetdesignzone.quotes.DatabaseHelper.getQuoteOfTheDay (DatabaseHelper.kt:214)\nat com.internetdesignzone.quotes.fragments.HomeFragment.onCreateView (HomeFragment.kt:349)\nat androidx.fragment.app.Fragment.performCreateView (Fragment.java:2995)\nat androidx.fragment.app.FragmentStateManager.createView (FragmentStateManager.java:523)\nat androidx.fragment.app.FragmentStateManager.moveToExpectedState (FragmentStateManager.java:261)\nat androidx.fragment.app.FragmentManager.executeOpsTogether (FragmentManager.java:1840)\nat androidx.fragment.app.FragmentManager.removeRedundantOperationsAndExecute (FragmentManager.java:1764)\nat androidx.fragment.app.FragmentManager.execPendingActions (FragmentManager.java:1701)\nat androidx.fragment.app.FragmentManager.dispatchStateChange (FragmentManager.java:2849)\nat androidx.fragment.app.FragmentManager.dispatchViewCreated (FragmentManager.java:2777)\nat androidx.fragment.app.Fragment.performViewCreated (Fragment.java:3020)\nat androidx.fragment.app.FragmentStateManager.createView (FragmentStateManager.java:551)\nat androidx.fragment.app.FragmentStateManager.moveToExpectedState (FragmentStateManager.java:261)\nat androidx.fragment.app.FragmentStore.moveToExpectedState (FragmentStore.java:113)\nat androidx.fragment.app.FragmentManager.moveToState (FragmentManager.java:1374)\nat androidx.fragment.app.FragmentManager.dispatchStateChange (FragmentManager.java:2841)\nat androidx.fragment.app.FragmentManager.dispatchActivityCreated (FragmentManager.java:2784)\nat androidx.fragment.app.FragmentController.dispatchActivityCreated (FragmentController.java:262)\nat androidx.fragment.app.FragmentActivity.onStart (FragmentActivity.java:478)\nat androidx.appcompat.app.AppCompatActivity.onStart (AppCompatActivity.java:210)\nat com.internetdesignzone.quotes.MainActivity.onStart (MainActivity.kt:235)\nat android.app.Instrumentation.callActivityOnStart (Instrumentation.java:1405)\nat android.app.Activity.performStart (Activity.java:8627)\nat android.app.ActivityThread.handleStartActivity (ActivityThread.java:2991)\nat android.app.servertransaction.TransactionExecutor.performLifecycleSequence (TransactionExecutor.java:180)\nat android.app.servertransaction.TransactionExecutor.cycleToPath (TransactionExecutor.java:165)\nat android.app.servertransaction.TransactionExecutor.executeLifecycleState (TransactionExecutor.java:142)\nat android.app.servertransaction.TransactionExecutor.execute (TransactionExecutor.java:70)\nat android.app.ActivityThread$H.handleMessage (ActivityThread.java:1830)\nat android.os.Handler.dispatchMessage (Handler.java:106)\nat android.os.Looper.loop (Looper.java:193)\nat android.app.ActivityThread.main (ActivityThread.java:6914)\nat java.lang.reflect.Method.invoke\nat com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run (RuntimeInit.java:592)\nat com.android.internal.os.ZygoteInit.main (ZygoteInit.java:858)</p>\n</blockquote>\n"},{"tags":["java","android","date","materialdatepicker"],"comments":[{"owner":{"account_id":39846,"reputation":991123,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":2,"creation_date":1697843204,"post_id":77334028,"comment_id":136335083,"body_markdown":"What is the specific problem? If you are trying to determine how to convert a Unix epoch time (typically stored as a `long` value) into something that tells you the various date parts, see https://stackoverflow.com/questions/68638574/java-convert-string-and-long-to-datetime.","body":"What is the specific problem? If you are trying to determine how to convert a Unix epoch time (typically stored as a <code>long</code> value) into something that tells you the various date parts, see <a href=\"https://stackoverflow.com/questions/68638574/java-convert-string-and-long-to-datetime\" title=\"java convert string and long to datetime\">stackoverflow.com/questions/68638574/&hellip;</a>."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1697859455,"post_id":77334028,"comment_id":136335919,"body_markdown":"You wrote (in your question): _What does ... `ZoneOffset.of(&quot;-04:00&quot;)` ... do?_ Have you read the [documentation](https://developer.android.com/reference/java/time/ZoneOffset)?","body":"You wrote (in your question): <i>What does ... <code>ZoneOffset.of(&quot;-04:00&quot;)</code> ... do?</i> Have you read the <a href=\"https://developer.android.com/reference/java/time/ZoneOffset\" rel=\"nofollow noreferrer\">documentation</a>?"},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697864339,"post_id":77334028,"comment_id":136336105,"body_markdown":"Instead of that `ZoneOffset` you asked about you by all likelihood want `ZonedDateTime zdt = instant.atZone(ZoneId.systemDefaullt());`. To answer your question, it refers to the mentioned UTC offset, so as used, for example, in New York during summer time/DST; but you want your code to work all year, so you don’t want to use a fixed UTC offset.","body":"Instead of that <code>ZoneOffset</code> you asked about you by all likelihood want <code>ZonedDateTime zdt = instant.atZone(ZoneId.systemDefaullt());</code>. To answer your question, it refers to the mentioned UTC offset, so as used, for example, in New York during summer time/DST; but you want your code to work all year, so you don’t want to use a fixed UTC offset."},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697865214,"post_id":77334028,"comment_id":136336149,"body_markdown":"What was your question again, please? If your code misbehaves, in what way then? Which values does it store into `newEventSelected...` if not the right ones? Does it throw any exception, or do you get any error messages?","body":"What was your question again, please? If your code misbehaves, in what way then? Which values does it store into <code>newEventSelected...</code> if not the right ones? Does it throw any exception, or do you get any error messages?"},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1697865684,"post_id":77334028,"comment_id":136336174,"body_markdown":"I recommend that you stick to java.time, the modern Java date and time API (for example `LocalDateTime`, `Instant` and `ZoneId`) and skip the outdated and troublesome `Date`, `Calendar` and not least `SimpleDateFormat`. For the text for the `EditText` use `dateTime.format(DateTimeFormatter.ofLocalizedDate(FormatStyle.SHORT))` (or some other format style). To get the month in `newEventSelectedMonth` 0-based subtract 1 from the month from `dateTime` instead of adding 1. Isn’t this all you need?","body":"I recommend that you stick to java.time, the modern Java date and time API (for example <code>LocalDateTime</code>, <code>Instant</code> and <code>ZoneId</code>) and skip the outdated and troublesome <code>Date</code>, <code>Calendar</code> and not least <code>SimpleDateFormat</code>. For the text for the <code>EditText</code> use <code>dateTime.format(DateTimeFormatter.ofLocalizedDate(FormatStyl&zwnj;&#8203;e.SHORT))</code> (or some other format style). To get the month in <code>newEventSelectedMonth</code> 0-based subtract 1 from the month from <code>dateTime</code> instead of adding 1. Isn’t this all you need?"},{"owner":{"account_id":29581991,"reputation":78,"user_id":22671571,"display_name":"SE User"},"score":1,"creation_date":1697983372,"post_id":77334028,"comment_id":136345030,"body_markdown":"Can someone please post an answer? I can&#39;t piece together all these suggestions into some working code.","body":"Can someone please post an answer? I can&#39;t piece together all these suggestions into some working code."},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1698093356,"post_id":77334028,"comment_id":136359252,"body_markdown":"[I put some code together on Rextester](https://rextester.com/KGTA62550). It’s not Android code. I still hope you have a better chance of fitting it into your code,","body":"<a href=\"https://rextester.com/KGTA62550\" rel=\"nofollow noreferrer\">I put some code together on Rextester</a>. It’s not Android code. I still hope you have a better chance of fitting it into your code,"},{"owner":{"account_id":29581991,"reputation":78,"user_id":22671571,"display_name":"SE User"},"score":0,"creation_date":1698340534,"post_id":77334028,"comment_id":136396331,"body_markdown":"@OleV.V. Works great except the day of month is too low by 1. When I add 1 and the user has marked the date to be the end of the month, (e.g. they selected October 31), it turns into October 32, which doesn&#39;t exist. How can I get this to behave exactly as DatePickerDialog? Maybe I need to get the day of the year (not month), add 1, and then convert it back to day of the month? How do I do this?","body":"@OleV.V. Works great except the day of month is too low by 1. When I add 1 and the user has marked the date to be the end of the month, (e.g. they selected October 31), it turns into October 32, which doesn&#39;t exist. How can I get this to behave exactly as DatePickerDialog? Maybe I need to get the day of the year (not month), add 1, and then convert it back to day of the month? How do I do this?"},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1698341871,"post_id":77334028,"comment_id":136396562,"body_markdown":"That’s a time zone problem. While I can’t tell y the details, it can probably be solved by putting a different time zone instead of `ZoneId.systemDefault()`. What happens if you put `ZoneOffset.UTC` there? Like so: `LocalDateTime.ofInstant(Instant.ofEpochMilli(selection), ZoneOffset.UTC);`.","body":"That’s a time zone problem. While I can’t tell y the details, it can probably be solved by putting a different time zone instead of <code>ZoneId.systemDefault()</code>. What happens if you put <code>ZoneOffset.UTC</code> there? Like so: <code>LocalDateTime.ofInstant(Instant.ofEpochMilli(selection), ZoneOffset.UTC);</code>."},{"owner":{"account_id":29581991,"reputation":78,"user_id":22671571,"display_name":"SE User"},"score":1,"creation_date":1698342305,"post_id":77334028,"comment_id":136396630,"body_markdown":"@OleV.V. It works now! Thank you so much. I will post an answer to the question myself with how I solved it.","body":"@OleV.V. It works now! Thank you so much. I will post an answer to the question myself with how I solved it."},{"owner":{"account_id":7612423,"reputation":82476,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1698342360,"post_id":77334028,"comment_id":136396637,"body_markdown":"The answers under [this related question, *MaterialDatePicker returns incorrect date after selection*,](https://stackoverflow.com/questions/69648393/materialdatepicker-returns-incorrect-date-after-selection) say to use UTC time zone, so I expect my suggestion to be right.","body":"The answers under <a href=\"https://stackoverflow.com/questions/69648393/materialdatepicker-returns-incorrect-date-after-selection\">this related question, <i>MaterialDatePicker returns incorrect date after selection</i>,</a> say to use UTC time zone, so I expect my suggestion to be right."}],"answers":[{"tags":[],"owner":{"account_id":29581991,"reputation":78,"user_id":22671571,"display_name":"SE User"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1698380090,"creation_date":1698342537,"answer_id":77369302,"question_id":77334028,"body_markdown":"Thanks to @OleV.V., I have the answer! I had to use the following code:\r\n```java\r\n// Set temp variables accordingly.\r\nLocalDateTime dateTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(selection), ZoneOffset.UTC);\r\n\r\nint year = dateTime.getYear();\r\nint month = dateTime.getMonthValue() - 1; // Zero-based month.\r\nint day = dateTime.getDayOfMonth();\r\n\r\n// Text for display in inputDateEditText.\r\nString displayText = dateTime.format(Variables.dateTimeFormatter);\r\ninputDateEditText.setText(displayText);\r\n                \r\n// Set variables accordingly.\r\nnewEventSelectedYear.set(year);\r\n\r\nnewEventSelectedMonth.set(month);\r\nnewEventSelectedDay.set(day);\r\n```\r\nThe key was to use `LocalDateTime` instead of `Calendar`. `Variables.dateTimeFormatter` can be any `DateTimeFormatter`, for example `DateTimeFormatter.ofLcalizedDate(FormatStyle.MEDIUM)` or `DateTimeFormatter.ofPattern(&quot;MMM d, u&quot;)`. Ole had first suggested `ZoneId.systemDefault()`, but that gave 1 day too early. Instead I had to set the `ZoneOffset` to `ZoneOffset.UTC` and it works great now! ","title":"Turn the long generated by MaterialDatePicker into year, month, and day varialbes","body":"<p>Thanks to @OleV.V., I have the answer! I had to use the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Set temp variables accordingly.\nLocalDateTime dateTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(selection), ZoneOffset.UTC);\n\nint year = dateTime.getYear();\nint month = dateTime.getMonthValue() - 1; // Zero-based month.\nint day = dateTime.getDayOfMonth();\n\n// Text for display in inputDateEditText.\nString displayText = dateTime.format(Variables.dateTimeFormatter);\ninputDateEditText.setText(displayText);\n                \n// Set variables accordingly.\nnewEventSelectedYear.set(year);\n\nnewEventSelectedMonth.set(month);\nnewEventSelectedDay.set(day);\n</code></pre>\n<p>The key was to use <code>LocalDateTime</code> instead of <code>Calendar</code>. <code>Variables.dateTimeFormatter</code> can be any <code>DateTimeFormatter</code>, for example <code>DateTimeFormatter.ofLcalizedDate(FormatStyle.MEDIUM)</code> or <code>DateTimeFormatter.ofPattern(&quot;MMM d, u&quot;)</code>. Ole had first suggested <code>ZoneId.systemDefault()</code>, but that gave 1 day too early. Instead I had to set the <code>ZoneOffset</code> to <code>ZoneOffset.UTC</code> and it works great now!</p>\n"}],"owner":{"account_id":29581991,"reputation":78,"user_id":22671571,"display_name":"SE User"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77369302,"answer_count":1,"score":0,"last_activity_date":1698380090,"creation_date":1697840490,"question_id":77334028,"body_markdown":"I am using the following code:\r\n```java\r\nMaterialDatePicker.Builder&lt;Long&gt; datePickerBuilder = MaterialDatePicker.Builder.datePicker();\r\nMaterialDatePicker&lt;Long&gt; datePicker = datePickerBuilder.build();\r\ndatePicker.addOnPositiveButtonClickListener(selection -&gt; {\r\n    Date selectedDate = Calendar.getInstance().getTime();\r\n    selectedDate.setTime(selection);\r\n\r\n    // Return and set the text of the date edit text.\r\n    TextInputEditText inputDateEditText = dialogView.findViewById(R.id.input_date_edit_text);\r\n\r\n    // Set temp variables accordingly.\r\n    LocalDateTime dateTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(selection), ZoneId.systemDefault());\r\n\r\n    int year = dateTime.getYear();\r\n    int month = dateTime.getMonthValue();\r\n    int day = dateTime.getDayOfMonth();\r\n\r\n    // Get formatted month name.\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.set(Calendar.MONTH, month + 1);\r\n    SimpleDateFormat monthDate = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault()); // Use MMMM for full name of month.\r\n    String monthName = monthDate.format(cal.getTime());\r\n\r\n    // Put the text into the edittext.\r\n    inputDateEditText.setText(&quot;&quot; + monthName + &quot; &quot; + day + &quot;, &quot; + year);\r\n\r\n    // Set variables accordingly.\r\n    newEventSelectedYear.set(year);\r\n    newEventSelectedMonth.set(month);\r\n    newEventSelectedDay.set(day);\r\n\r\n    System.out.println(selection);\r\n});\r\ndatePicker.show(getFragmentManager(), &quot;DATE_PICKER&quot;);\r\n```\r\nI&#39;m trying to use `MaterialDatePicker&lt;Long&gt;` to display a date picker and then put the values it receives from the user into the `newEventSelected...` variables. I need the month value to be zero-based (so October is month 9) and all the other values to be one-based (so if the user selects &quot;October 20, 2023&quot; in the dialog, the year will be recorded as 2023, month as 9, and the day as 20.\r\n\r\nIf it helps, I was using the following code, (which worked) before:\r\n```java\r\nDatePickerDialog datePickerDialog = new DatePickerDialog(requireContext());\r\ndatePickerDialog.setOnDateSetListener((view12, year, month, dayOfMonth) -&gt; {\r\n    // Return and set the text of the date edit text.\r\n    TextInputEditText inputDateEditText = dialogView.findViewById(R.id.input_date_edit_text);\r\n\r\n    // Get formatted month name.\r\n    Calendar cal = Calendar.getInstance();\r\n    cal.set(Calendar.MONTH, month);\r\n    SimpleDateFormat monthDate = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault()); // Use MMMM for full name of month.\r\n    String monthName = monthDate.format(cal.getTime());\r\n\r\n    // Put the text into the edittext.\r\n    inputDateEditText.setText(&quot;&quot; + monthName + &quot; &quot; + dayOfMonth + &quot;, &quot; + year);\r\n\r\n    // Set variables accordingly.\r\n    newEventSelectedYear.set(year);\r\n    newEventSelectedMonth.set(month);\r\n    newEventSelectedDay.set(dayOfMonth);\r\n});\r\ndatePickerDialog.show();\r\n```\r\nBut I had to switch to `MaterialDatePicker` because `DatePickerDialog`&#39;s interface didn&#39;t match my app&#39;s.\r\n\r\nHow do I do this?\r\n\r\n## Edit:\r\nI looked at [this question][1], which was recommended to me by `@commonsware`, but had a few questions:\r\n- I was using this code:\r\n```java\r\nInstant instant = Instant.ofEpochMilli(selection);\r\nSystem.out.println(instant);\r\n\r\nOffsetDateTime odt = instant.atOffset(ZoneOffset.of(&quot;-04:00&quot;));\r\nSystem.out.println(odt);\r\n\r\nint year = odt.getYear();\r\nint month = odt.getMonthValue();\r\nint day = odt.getDayOfMonth();\r\n```\r\nBut for some reason, when I select October 20th, 2023 in the dialog, November 19, 2023 is returned. I want September 20th, 2023 to be returned instead. How do I do this?\r\n\r\nBy the way, I&#39;m using the following to get the formatted month name, if that matters:\r\n```java\r\nCalendar cal = Calendar.getInstance();\r\ncal.set(Calendar.MONTH, month);\r\nSimpleDateFormat monthDate = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault()); // Use MMMM for full name of month.\r\nString monthName = monthDate.format(cal.getTime());\r\n```\r\n- What does the `ZoneOffset.of(&quot;-04:00&quot;)` in the code in the answer to the question I mentioned before do? Do I have to change that? What is it&#39;s purpose? I want this to be compatible with all users time zones.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/68638574/java-convert-string-and-long-to-datetime","title":"Turn the long generated by MaterialDatePicker into year, month, and day varialbes","body":"<p>I am using the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MaterialDatePicker.Builder&lt;Long&gt; datePickerBuilder = MaterialDatePicker.Builder.datePicker();\nMaterialDatePicker&lt;Long&gt; datePicker = datePickerBuilder.build();\ndatePicker.addOnPositiveButtonClickListener(selection -&gt; {\n    Date selectedDate = Calendar.getInstance().getTime();\n    selectedDate.setTime(selection);\n\n    // Return and set the text of the date edit text.\n    TextInputEditText inputDateEditText = dialogView.findViewById(R.id.input_date_edit_text);\n\n    // Set temp variables accordingly.\n    LocalDateTime dateTime = LocalDateTime.ofInstant(Instant.ofEpochMilli(selection), ZoneId.systemDefault());\n\n    int year = dateTime.getYear();\n    int month = dateTime.getMonthValue();\n    int day = dateTime.getDayOfMonth();\n\n    // Get formatted month name.\n    Calendar cal = Calendar.getInstance();\n    cal.set(Calendar.MONTH, month + 1);\n    SimpleDateFormat monthDate = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault()); // Use MMMM for full name of month.\n    String monthName = monthDate.format(cal.getTime());\n\n    // Put the text into the edittext.\n    inputDateEditText.setText(&quot;&quot; + monthName + &quot; &quot; + day + &quot;, &quot; + year);\n\n    // Set variables accordingly.\n    newEventSelectedYear.set(year);\n    newEventSelectedMonth.set(month);\n    newEventSelectedDay.set(day);\n\n    System.out.println(selection);\n});\ndatePicker.show(getFragmentManager(), &quot;DATE_PICKER&quot;);\n</code></pre>\n<p>I'm trying to use <code>MaterialDatePicker&lt;Long&gt;</code> to display a date picker and then put the values it receives from the user into the <code>newEventSelected...</code> variables. I need the month value to be zero-based (so October is month 9) and all the other values to be one-based (so if the user selects &quot;October 20, 2023&quot; in the dialog, the year will be recorded as 2023, month as 9, and the day as 20.</p>\n<p>If it helps, I was using the following code, (which worked) before:</p>\n<pre class=\"lang-java prettyprint-override\"><code>DatePickerDialog datePickerDialog = new DatePickerDialog(requireContext());\ndatePickerDialog.setOnDateSetListener((view12, year, month, dayOfMonth) -&gt; {\n    // Return and set the text of the date edit text.\n    TextInputEditText inputDateEditText = dialogView.findViewById(R.id.input_date_edit_text);\n\n    // Get formatted month name.\n    Calendar cal = Calendar.getInstance();\n    cal.set(Calendar.MONTH, month);\n    SimpleDateFormat monthDate = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault()); // Use MMMM for full name of month.\n    String monthName = monthDate.format(cal.getTime());\n\n    // Put the text into the edittext.\n    inputDateEditText.setText(&quot;&quot; + monthName + &quot; &quot; + dayOfMonth + &quot;, &quot; + year);\n\n    // Set variables accordingly.\n    newEventSelectedYear.set(year);\n    newEventSelectedMonth.set(month);\n    newEventSelectedDay.set(dayOfMonth);\n});\ndatePickerDialog.show();\n</code></pre>\n<p>But I had to switch to <code>MaterialDatePicker</code> because <code>DatePickerDialog</code>'s interface didn't match my app's.</p>\n<p>How do I do this?</p>\n<h2>Edit:</h2>\n<p>I looked at <a href=\"https://stackoverflow.com/questions/68638574/java-convert-string-and-long-to-datetime\">this question</a>, which was recommended to me by <code>@commonsware</code>, but had a few questions:</p>\n<ul>\n<li>I was using this code:</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>Instant instant = Instant.ofEpochMilli(selection);\nSystem.out.println(instant);\n\nOffsetDateTime odt = instant.atOffset(ZoneOffset.of(&quot;-04:00&quot;));\nSystem.out.println(odt);\n\nint year = odt.getYear();\nint month = odt.getMonthValue();\nint day = odt.getDayOfMonth();\n</code></pre>\n<p>But for some reason, when I select October 20th, 2023 in the dialog, November 19, 2023 is returned. I want September 20th, 2023 to be returned instead. How do I do this?</p>\n<p>By the way, I'm using the following to get the formatted month name, if that matters:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Calendar cal = Calendar.getInstance();\ncal.set(Calendar.MONTH, month);\nSimpleDateFormat monthDate = new SimpleDateFormat(&quot;MMM&quot;, Locale.getDefault()); // Use MMMM for full name of month.\nString monthName = monthDate.format(cal.getTime());\n</code></pre>\n<ul>\n<li>What does the <code>ZoneOffset.of(&quot;-04:00&quot;)</code> in the code in the answer to the question I mentioned before do? Do I have to change that? What is it's purpose? I want this to be compatible with all users time zones.</li>\n</ul>\n"},{"tags":["java","spring-boot","spring-security"],"answers":[{"tags":[],"owner":{"account_id":29755793,"reputation":106,"user_id":22804519,"display_name":"Pablo Marco Rider"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1698380023,"creation_date":1698380023,"answer_id":77371470,"question_id":77371393,"body_markdown":"Maybe I&#39;m not understanding well what you are trying to do, but it seems to me that you are mixing up authentication and authorization.\r\n\r\nThe idea would be that you don&#39;t have different logins for users and admins, but instead that the users themselves, once logged in (using all the same login) have different roles (normal user vs admin) which in turn allows them to do different things on the application.\r\n\r\nRoles are also standard functionality of Spring Security.\r\n","title":"How to create two form login in thymeleaf spring security with different mechanism authentication and role","body":"<p>Maybe I'm not understanding well what you are trying to do, but it seems to me that you are mixing up authentication and authorization.</p>\n<p>The idea would be that you don't have different logins for users and admins, but instead that the users themselves, once logged in (using all the same login) have different roles (normal user vs admin) which in turn allows them to do different things on the application.</p>\n<p>Roles are also standard functionality of Spring Security.</p>\n"}],"owner":{"account_id":19853486,"reputation":1,"user_id":14543495,"display_name":"Rocky Operation"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1698380023,"creation_date":1698378134,"question_id":77371393,"body_markdown":"I have created a website using spring security and now i want that if user access to the &quot;/hi&quot; they will be directed to the &quot;/login&quot; page of user if they haven&#39;t logged and with admin if they access to the &quot;/admin&quot; they will be directed to the &quot;/admin/login&quot; page. I almost done but when i login with admin and when back to the &quot;/hi&quot; i no longer be redirected to the &quot;/login&quot; page for user but i&#39;m in the &quot;/hi&quot; page. How can i fix it\r\n\r\n```\r\npackage com.teenboutique.web.config;\r\n\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.core.annotation.Order;\r\nimport org.springframework.security.authentication.AuthenticationManager;\r\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\r\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\r\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\r\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\r\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\r\nimport org.springframework.security.crypto.password.PasswordEncoder;\r\nimport org.springframework.security.web.SecurityFilterChain;\r\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\r\n\r\nimport com.teenboutique.web.services.CustomerDetailServiceImpl;\r\nimport com.teenboutique.web.services.EmployeeDetailServiceImpl;\r\n\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class FormLoginSecurityConfig {\r\n\t@Autowired\r\n\tprivate EmployeeDetailServiceImpl employeeDetailServiceImpl;\r\n\t\r\n\t@Autowired\r\n\tprivate CustomerDetailServiceImpl customerDetailServiceImpl;\r\n\r\n\t@Bean\r\n\tDaoAuthenticationProvider daoAdminAuthenticationProvider() {\r\n\t\tDaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n\t\tdaoAuthenticationProvider.setUserDetailsService(employeeDetailServiceImpl);\r\n\t\tdaoAuthenticationProvider.setPasswordEncoder(passwordEncoder());\r\n\t\treturn daoAuthenticationProvider;\r\n\t}\r\n\t\r\n\t@Bean\r\n\tDaoAuthenticationProvider daoUserAuthenticationProvider() {\r\n\t\tDaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\r\n\t\tdaoAuthenticationProvider.setUserDetailsService(customerDetailServiceImpl);\r\n\t\tdaoAuthenticationProvider.setPasswordEncoder(passwordEncoder());\r\n\t\treturn daoAuthenticationProvider;\r\n\t}\r\n\t\r\n\t@Bean\r\n\tstatic PasswordEncoder passwordEncoder() {\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\r\n\t@Bean\r\n\tAuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\r\n\t\t\tthrows Exception {\r\n\t\treturn authenticationConfiguration.getAuthenticationManager();\r\n\t}\r\n\t\r\n\t//This part will be for apis\r\n\t//API will get the order 1 and push all the rest filters down \r\n\t\r\n\t@Bean\t\r\n\t@Order(1)\r\n\tSecurityFilterChain filterChainAdmin(HttpSecurity httpSecurity) throws Exception {\r\n\t\thttpSecurity.csrf(null)\r\n\t\t\t\t.securityMatcher(AntPathRequestMatcher.antMatcher(&quot;/admin/**&quot;))\r\n\t\t\t\t.authorizeHttpRequests((authorizeRequests) -&gt; authorizeRequests\r\n\t\t\t\t\t\t.requestMatchers(&quot;/admin/css/**&quot;, &quot;/admin/images/**&quot;, &quot;/admin/fonts/**&quot;, &quot;/admin/js/**&quot;, &quot;/admin/scss/**&quot;, &quot;/admin/vendors/**&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/uploads/**&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/admin/login&quot;).permitAll()\r\n\t\t\t\t\t\t.anyRequest().authenticated())\r\n\t\t\t\t.formLogin((formLogin) -&gt; formLogin\r\n\t\t\t\t\t\t.usernameParameter(&quot;id&quot;)\r\n\t\t\t\t\t\t.passwordParameter(&quot;pass&quot;)\r\n\t\t\t\t\t\t.loginPage(&quot;/admin/login&quot;)\r\n\t\t\t\t\t\t.defaultSuccessUrl(&quot;/admin&quot;).permitAll()\r\n\t\t\t\t\t\t.failureUrl(&quot;/admin/login?error=true&quot;).permitAll())\r\n\t\t\t\t.logout((logout) -&gt; logout.invalidateHttpSession(true).clearAuthentication(true)\r\n\t\t\t\t\t\t.logoutRequestMatcher(new AntPathRequestMatcher(&quot;/admin/logout&quot;)).logoutSuccessUrl(&quot;/admin/login&quot;)\r\n\t\t\t\t\t\t.permitAll());\r\n\t\thttpSecurity.authenticationProvider(daoAdminAuthenticationProvider());\r\n\t\treturn httpSecurity.build();\r\n\t}\r\n\t\r\n\t@Bean\r\n\t@Order(2)\r\n\tSecurityFilterChain filterChainUser(HttpSecurity httpSecurity) throws Exception {\r\n\t\thttpSecurity.securityMatcher(AntPathRequestMatcher.antMatcher(&quot;/**&quot;))\r\n\t\t\t\t.authorizeHttpRequests((authorizeRequests) -&gt; authorizeRequests\r\n\t\t\t\t\t\t.requestMatchers(&quot;/main/css/**&quot;, &quot;/main/images/**&quot;, &quot;/main/js/**&quot;, &quot;/main/plugins/**&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/uploads/**&quot;).permitAll()\r\n\t\t\t\t\t\t.requestMatchers(&quot;/&quot; ,&quot;/login&quot;).permitAll()\r\n\t\t\t\t\t\t.anyRequest().authenticated())\r\n\t\t\t\t.formLogin((formLogin) -&gt; formLogin\r\n\t\t\t\t\t\t.usernameParameter(&quot;username&quot;)\r\n\t\t\t\t\t\t.passwordParameter(&quot;password&quot;)\r\n\t\t\t\t\t\t.loginPage(&quot;/login&quot;)\r\n\t\t\t\t\t\t.defaultSuccessUrl(&quot;/&quot;).permitAll()\r\n\t\t\t\t\t\t.failureUrl(&quot;/login?error=true&quot;).permitAll())\r\n\t\t\t\t.logout((logout) -&gt; logout.invalidateHttpSession(true).clearAuthentication(true)\r\n\t\t\t\t\t\t.logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;)).logoutSuccessUrl(&quot;/&quot;)\r\n\t\t\t\t\t\t.permitAll());\r\n\t\thttpSecurity.authenticationProvider(daoUserAuthenticationProvider());\r\n\t\treturn httpSecurity.build();\r\n\t}\r\n\t\r\n\t\r\n\t\r\n}\r\n\r\n```\r\n\r\n\r\nFix problem that i can seperate the authentication between admin and user.","title":"How to create two form login in thymeleaf spring security with different mechanism authentication and role","body":"<p>I have created a website using spring security and now i want that if user access to the &quot;/hi&quot; they will be directed to the &quot;/login&quot; page of user if they haven't logged and with admin if they access to the &quot;/admin&quot; they will be directed to the &quot;/admin/login&quot; page. I almost done but when i login with admin and when back to the &quot;/hi&quot; i no longer be redirected to the &quot;/login&quot; page for user but i'm in the &quot;/hi&quot; page. How can i fix it</p>\n<pre><code>package com.teenboutique.web.config;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authentication.dao.DaoAuthenticationProvider;\nimport org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.util.matcher.AntPathRequestMatcher;\n\nimport com.teenboutique.web.services.CustomerDetailServiceImpl;\nimport com.teenboutique.web.services.EmployeeDetailServiceImpl;\n\n@Configuration\n@EnableWebSecurity\npublic class FormLoginSecurityConfig {\n    @Autowired\n    private EmployeeDetailServiceImpl employeeDetailServiceImpl;\n    \n    @Autowired\n    private CustomerDetailServiceImpl customerDetailServiceImpl;\n\n    @Bean\n    DaoAuthenticationProvider daoAdminAuthenticationProvider() {\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setUserDetailsService(employeeDetailServiceImpl);\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder());\n        return daoAuthenticationProvider;\n    }\n    \n    @Bean\n    DaoAuthenticationProvider daoUserAuthenticationProvider() {\n        DaoAuthenticationProvider daoAuthenticationProvider = new DaoAuthenticationProvider();\n        daoAuthenticationProvider.setUserDetailsService(customerDetailServiceImpl);\n        daoAuthenticationProvider.setPasswordEncoder(passwordEncoder());\n        return daoAuthenticationProvider;\n    }\n    \n    @Bean\n    static PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder();\n    }\n\n    @Bean\n    AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration)\n            throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n    \n    //This part will be for apis\n    //API will get the order 1 and push all the rest filters down \n    \n    @Bean   \n    @Order(1)\n    SecurityFilterChain filterChainAdmin(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.csrf(null)\n                .securityMatcher(AntPathRequestMatcher.antMatcher(&quot;/admin/**&quot;))\n                .authorizeHttpRequests((authorizeRequests) -&gt; authorizeRequests\n                        .requestMatchers(&quot;/admin/css/**&quot;, &quot;/admin/images/**&quot;, &quot;/admin/fonts/**&quot;, &quot;/admin/js/**&quot;, &quot;/admin/scss/**&quot;, &quot;/admin/vendors/**&quot;).permitAll()\n                        .requestMatchers(&quot;/uploads/**&quot;).permitAll()\n                        .requestMatchers(&quot;/admin/login&quot;).permitAll()\n                        .anyRequest().authenticated())\n                .formLogin((formLogin) -&gt; formLogin\n                        .usernameParameter(&quot;id&quot;)\n                        .passwordParameter(&quot;pass&quot;)\n                        .loginPage(&quot;/admin/login&quot;)\n                        .defaultSuccessUrl(&quot;/admin&quot;).permitAll()\n                        .failureUrl(&quot;/admin/login?error=true&quot;).permitAll())\n                .logout((logout) -&gt; logout.invalidateHttpSession(true).clearAuthentication(true)\n                        .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/admin/logout&quot;)).logoutSuccessUrl(&quot;/admin/login&quot;)\n                        .permitAll());\n        httpSecurity.authenticationProvider(daoAdminAuthenticationProvider());\n        return httpSecurity.build();\n    }\n    \n    @Bean\n    @Order(2)\n    SecurityFilterChain filterChainUser(HttpSecurity httpSecurity) throws Exception {\n        httpSecurity.securityMatcher(AntPathRequestMatcher.antMatcher(&quot;/**&quot;))\n                .authorizeHttpRequests((authorizeRequests) -&gt; authorizeRequests\n                        .requestMatchers(&quot;/main/css/**&quot;, &quot;/main/images/**&quot;, &quot;/main/js/**&quot;, &quot;/main/plugins/**&quot;).permitAll()\n                        .requestMatchers(&quot;/uploads/**&quot;).permitAll()\n                        .requestMatchers(&quot;/&quot; ,&quot;/login&quot;).permitAll()\n                        .anyRequest().authenticated())\n                .formLogin((formLogin) -&gt; formLogin\n                        .usernameParameter(&quot;username&quot;)\n                        .passwordParameter(&quot;password&quot;)\n                        .loginPage(&quot;/login&quot;)\n                        .defaultSuccessUrl(&quot;/&quot;).permitAll()\n                        .failureUrl(&quot;/login?error=true&quot;).permitAll())\n                .logout((logout) -&gt; logout.invalidateHttpSession(true).clearAuthentication(true)\n                        .logoutRequestMatcher(new AntPathRequestMatcher(&quot;/logout&quot;)).logoutSuccessUrl(&quot;/&quot;)\n                        .permitAll());\n        httpSecurity.authenticationProvider(daoUserAuthenticationProvider());\n        return httpSecurity.build();\n    }\n    \n    \n    \n}\n\n</code></pre>\n<p>Fix problem that i can seperate the authentication between admin and user.</p>\n"},{"tags":["java","android","xml","gradle","aapt"],"answers":[{"tags":[],"owner":{"account_id":16856995,"reputation":407,"user_id":12188708,"display_name":"Mr. Robot"},"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1698379858,"creation_date":1589968808,"answer_id":61910239,"question_id":61729274,"body_markdown":"Due to a bug the `android:clipToOutline` attribute is not recognised and will throw a compiler error when trying to build. I&#39;ve read that using `android:outlineProvider=&quot;background&quot;` is working in some cases, but for me it doesn&#39;t work. A workaround is to programmatically set `view.setClipToOutline(true)` in Java or `view.clipToOutline = true` in Kotlin on your view.","title":"AAPT: error: attribute android:clipToOutline not found","body":"<p>Due to a bug the <code>android:clipToOutline</code> attribute is not recognised and will throw a compiler error when trying to build. I've read that using <code>android:outlineProvider=&quot;background&quot;</code> is working in some cases, but for me it doesn't work. A workaround is to programmatically set <code>view.setClipToOutline(true)</code> in Java or <code>view.clipToOutline = true</code> in Kotlin on your view.</p>\n"}],"owner":{"account_id":13356871,"reputation":191,"user_id":9640121,"display_name":"Akshay Raut"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4453,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"accepted_answer_id":61910239,"answer_count":1,"score":5,"last_activity_date":1698379858,"creation_date":1589198666,"question_id":61729274,"body_markdown":"Executing tasks: [:app:assembleDebug]\r\n\r\n&gt; Task :app:preBuild UP-TO-DATE\r\n&gt; Task :app:preDebugBuild UP-TO-DATE\r\n&gt; Task :app:compileDebugAidl NO-SOURCE\r\n&gt; Task :app:checkDebugManifest UP-TO-DATE\r\n&gt; Task :app:compileDebugRenderscript NO-SOURCE\r\n&gt; Task :app:generateDebugBuildConfig UP-TO-DATE\r\n&gt; Task :app:prepareLintJar UP-TO-DATE\r\n&gt; Task :app:processDebugGoogleServices UP-TO-DATE\r\n&gt; Task :app:generateDebugSources UP-TO-DATE\r\n&gt; Task :app:javaPreCompileDebug UP-TO-DATE\r\n&gt; Task :app:mainApkListPersistenceDebug UP-TO-DATE\r\n&gt; Task :app:generateDebugResValues UP-TO-DATE\r\n&gt; Task :app:generateDebugResources UP-TO-DATE\r\n&gt; Task :app:createDebugCompatibleScreenManifests UP-TO-DATE\r\n&gt; Task :app:mergeDebugResources\r\n&gt; Task :app:processDebugManifest UP-TO-DATE\r\n&gt; Task :app:processDebugResources FAILED\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:app:processDebugResources&#39;.\r\n&gt; Android resource linking failed\r\n  C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:23: AAPT: error: attribute android:clipToOutline not found.\r\n      \r\n  C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:87: AAPT: error: attribute layout_constrainttop_toTopOf (aka com.example.impwala:layout_constrainttop_toTopOf) not found.\r\n      \r\n  C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:87: AAPT: error: attribute android:clipToOutline not found.\r\n      \r\n  C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:150: AAPT: error: attribute android:clipToOutline not found.\r\n      \r\n  C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:212: AAPT: error: attribute android:clipToOutline not found.\r\n      \r\n  C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:274: AAPT: error: attribute android:clipToOutline not found.\r\n      \r\n  error: failed linking file resources.\r\n\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.\r\nUse &#39;--warning-mode all&#39; to show the individual deprecation warnings.\r\nSee https://docs.gradle.org/5.1.1/userguide/command_line_interface.html#sec:command_line_warnings\r\n\r\nBUILD FAILED in 54s\r\n12 actionable tasks: 2 executed, 10 up-to-date","title":"AAPT: error: attribute android:clipToOutline not found","body":"<p>Executing tasks: [:app:assembleDebug]</p>\n\n<blockquote>\n  <p>Task :app:preBuild UP-TO-DATE\n  Task :app:preDebugBuild UP-TO-DATE\n  Task :app:compileDebugAidl NO-SOURCE\n  Task :app:checkDebugManifest UP-TO-DATE\n  Task :app:compileDebugRenderscript NO-SOURCE\n  Task :app:generateDebugBuildConfig UP-TO-DATE\n  Task :app:prepareLintJar UP-TO-DATE\n  Task :app:processDebugGoogleServices UP-TO-DATE\n  Task :app:generateDebugSources UP-TO-DATE\n  Task :app:javaPreCompileDebug UP-TO-DATE\n  Task :app:mainApkListPersistenceDebug UP-TO-DATE\n  Task :app:generateDebugResValues UP-TO-DATE\n  Task :app:generateDebugResources UP-TO-DATE\n  Task :app:createDebugCompatibleScreenManifests UP-TO-DATE\n  Task :app:mergeDebugResources\n  Task :app:processDebugManifest UP-TO-DATE\n  Task :app:processDebugResources FAILED</p>\n</blockquote>\n\n<p>FAILURE: Build failed with an exception.</p>\n\n<ul>\n<li><p>What went wrong:\nExecution failed for task ':app:processDebugResources'.</p>\n\n<blockquote>\n  <p>Android resource linking failed\n  C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:23: AAPT: error: attribute android:clipToOutline not found.</p>\n</blockquote>\n\n<p>C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:87: AAPT: error: attribute layout_constrainttop_toTopOf (aka com.example.impwala:layout_constrainttop_toTopOf) not found.</p>\n\n<p>C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:87: AAPT: error: attribute android:clipToOutline not found.</p>\n\n<p>C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:150: AAPT: error: attribute android:clipToOutline not found.</p>\n\n<p>C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:212: AAPT: error: attribute android:clipToOutline not found.</p>\n\n<p>C:\\Users\\user\\StudioProjects\\IMPwala\\app\\src\\main\\res\\layout\\activity_main2.xml:274: AAPT: error: attribute android:clipToOutline not found.</p>\n\n<p>error: failed linking file resources.</p></li>\n<li><p>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</p></li>\n<li><p>Get more help at <a href=\"https://help.gradle.org\" rel=\"noreferrer\">https://help.gradle.org</a></p></li>\n</ul>\n\n<p>Deprecated Gradle features were used in this build, making it incompatible with Gradle 6.0.\nUse '--warning-mode all' to show the individual deprecation warnings.\nSee <a href=\"https://docs.gradle.org/5.1.1/userguide/command_line_interface.html#sec:command_line_warnings\" rel=\"noreferrer\">https://docs.gradle.org/5.1.1/userguide/command_line_interface.html#sec:command_line_warnings</a></p>\n\n<p>BUILD FAILED in 54s\n12 actionable tasks: 2 executed, 10 up-to-date</p>\n"},{"tags":["java","spring-boot","hibernate","annotations"],"answers":[{"tags":[],"owner":{"account_id":29758193,"reputation":1,"user_id":22806393,"display_name":"Jaydeep"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698379780,"creation_date":1698312980,"answer_id":77365815,"question_id":75900083,"body_markdown":"Check your entity class for any instances where you are using \r\n@Type annotation, replace with @JdbcTypeCode.","title":"Spring Boot 3 upgrade error: org.hibernate.annotations.Type missing element value","body":"<p>Check your entity class for any instances where you are using\n@Type annotation, replace with @JdbcTypeCode.</p>\n"}],"owner":{"account_id":23986192,"reputation":11,"user_id":17972973,"display_name":"Victor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":938,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1698379780,"creation_date":1680275376,"question_id":75900083,"body_markdown":"I recently began work on upgrading a Spring Boot application from 2.2.4.RELEASE to 3.0.0\r\n\r\nWhile I&#39;d like to think I managed to do good work on resolving issues from the upgrade so far, this one has blocked me for quite a while now.\r\n\r\nThe project builds with no problems, however. when I trigger the test suite I encounter the error\r\n\r\n```\r\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;entityManagerFactory&#39; defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: org.hibernate.annotations.Type missing element value\r\n\r\n    Caused by: java.lang.annotation.IncompleteAnnotationException: org.hibernate.annotations.Type missing element value\r\n    \tat java.base/sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:86)\r\n```\r\n\r\nI don&#39;t even have any @Type annotation in the test class, so I&#39;m quite confused.\r\n\r\nThe above error is produced by all my tests, a sample test that produces the error is the following:\r\n\r\n```\r\nimport static org.hamcrest.core.Is.is;\r\nimport static org.junit.Assert.assertThat;\r\n\r\nimport com.getyourguide.pricingalerts.Application;\r\nimport org.junit.Test;\r\nimport org.junit.runner.RunWith;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.test.context.junit4.SpringRunner;\r\n\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(classes = Application.class)\r\npublic class HomeEndpointsTest {\r\n    @Test\r\n    public void testReadiness() throws Exception {\r\n        String response = &quot;Ha&quot;;\r\n\r\n        assertThat(response, is(&quot;Ok&quot;));\r\n    }\r\n```\r\n\r\nIf either of @RunWith(SpringRunner.class) or @SpringBootTest(classes = Application.class) are removed, the test works as expected. Only when both of them are used the error occurs.\r\n\r\nMy build.gradle contains the following dependencies\r\n\r\n```\r\ndependencies {\r\n    // https://mvnrepository.com/artifact/com.google.api-client/google-api-client-gson\r\n    implementation &#39;com.google.api-client:google-api-client-gson:2.2.0&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-validation:3.0.5&#39;\r\n\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa:3.0.5&#39;\r\n    annotationProcessor &#39;org.hibernate:hibernate-core-jakarta:5.6.15.Final&#39;\r\n\r\n\r\n    implementation &#39;javax.validation:validation-api:2.0.1.Final&#39;\r\n\r\n    implementation group: &#39;jakarta.xml.bind&#39;, name: &#39;jakarta.xml.bind-api&#39;, version: &#39;4.0.0&#39;\r\n    implementation group: &#39;com.sun.xml.bind&#39;, name: &#39;jaxb-impl&#39;, version: &#39;4.0.1&#39;\r\n    implementation group: &#39;org.glassfish.jaxb&#39;, name: &#39;jaxb-runtime&#39;, version: &#39;4.0.2&#39;\r\n\r\n\r\n    // Spring MVC, testing, and devtools\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-webflux&#39;\r\n\r\n    // https://mvnrepository.com/artifact/io.netty/netty-transport\r\n    implementation group: &#39;io.netty&#39;, name: &#39;netty-transport-native-epoll&#39;, version: &#39;4.1.90.Final&#39;, classifier: &#39;linux-x86_64&#39;\r\n    implementation &#39;junit:junit:4.13.2&#39;\r\n\r\n\r\n    testImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n    testImplementation &#39;io.projectreactor:reactor-test&#39;\r\n    developmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n    // Lombok annotations to reduce boilerplate code\r\n    compileOnly &#39;org.projectlombok:lombok:1.18.26&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18.26&#39;\r\n    // create MetaModel for jpa specification/\r\n    annotationProcessor &#39;org.hibernate:hibernate-jpamodelgen:6.1.7.Final&#39;\r\n    implementation &#39;io.hypersistence:hypersistence-utils-hibernate-60:3.3.0&#39;\r\n\r\n    // Sentry\r\n    implementation &#39;io.sentry:sentry-spring-boot-starter-jakarta:6.16.0&#39;\r\n    implementation &#39;io.sentry:sentry-logback:6.16.0&#39;\r\n\r\n    // DataDog\r\n    datadogAgent group: &#39;com.datadoghq&#39;, name: &#39;dd-java-agent&#39;, version: &#39;1.10.0&#39;\r\n    implementation group: &#39;com.datadoghq&#39;, name: &#39;dd-trace-api&#39;, version: &#39;1.10.0&#39;\r\n    implementation &#39;com.datadoghq:java-dogstatsd-client:4.2.0&#39;\r\n    implementation &#39;io.micrometer:micrometer-registry-statsd:1.10.5&#39;\r\n    // Error Prone: (java error/antipattern checker - works with the net.ltgt.errorprone plugin above)\r\n    errorprone &#39;com.google.errorprone:error_prone_core:2.18.0&#39;\r\n    // Database support\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    testImplementation &#39;net.ttddyy:datasource-proxy:1.8&#39;\r\n    // MySQL\r\n    implementation &#39;org.mariadb.jdbc:mariadb-java-client:3.1.2&#39;\r\n    implementation &#39;com.h2database:h2:2.1.214&#39;\r\n    testImplementation &#39;mysql:mysql-connector-java:8.0.32&#39;\r\n    // Google sheets\r\n    implementation &#39;com.google.api-client:google-api-client:2.2.0&#39;\r\n    implementation &#39;com.google.apis:google-api-services-sheets:v4-rev20230227-2.0.0&#39;\r\n    //s3\r\n    implementation group: &#39;com.amazonaws&#39;, name: &#39;aws-java-sdk-s3&#39;, version: &#39;1.12.429&#39;\r\n    //thymeleaf\r\n    implementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n    //testing\r\n    testImplementation &#39;org.mockito:mockito-core:5.2.0&#39;\r\n}\r\n```\r\n\r\nI&#39;ve tried downgrading to SB 2.7 in case it was a change introduced later, but that produced a slew of other problems so I reverted.\r\n\r\nI&#39;ve checked that It&#39;s running with  Hibernate ORM core version 6.1.5.Final, which should be compatible with io.hypersistence:hypersistence-utils-hibernate-60:3.0.1.\r\n\r\nI&#39;ve tried removing some annotations, (see above) to understand if a specific annotation triggers the error, but since it&#39;s only when two of the annotations are used at the same time, I&#39;m unsure.\r\n\r\nI&#39;ve tried finding similar questions on slack, but none seemed quite right.\r\n\r\nIf anyone has an idea for how to resolve the error, or if I&#39;ve missed some piece of documentation on how to properly upgrade things I&#39;d really appreciate the support.\r\n\r\nBest,\r\nVictor","title":"Spring Boot 3 upgrade error: org.hibernate.annotations.Type missing element value","body":"<p>I recently began work on upgrading a Spring Boot application from 2.2.4.RELEASE to 3.0.0</p>\n<p>While I'd like to think I managed to do good work on resolving issues from the upgrade so far, this one has blocked me for quite a while now.</p>\n<p>The project builds with no problems, however. when I trigger the test suite I encounter the error</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: org.hibernate.annotations.Type missing element value\n\n    Caused by: java.lang.annotation.IncompleteAnnotationException: org.hibernate.annotations.Type missing element value\n        at java.base/sun.reflect.annotation.AnnotationInvocationHandler.invoke(AnnotationInvocationHandler.java:86)\n</code></pre>\n<p>I don't even have any @Type annotation in the test class, so I'm quite confused.</p>\n<p>The above error is produced by all my tests, a sample test that produces the error is the following:</p>\n<pre><code>import static org.hamcrest.core.Is.is;\nimport static org.junit.Assert.assertThat;\n\nimport com.getyourguide.pricingalerts.Application;\nimport org.junit.Test;\nimport org.junit.runner.RunWith;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.junit4.SpringRunner;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest(classes = Application.class)\npublic class HomeEndpointsTest {\n    @Test\n    public void testReadiness() throws Exception {\n        String response = &quot;Ha&quot;;\n\n        assertThat(response, is(&quot;Ok&quot;));\n    }\n</code></pre>\n<p>If either of @RunWith(SpringRunner.class) or @SpringBootTest(classes = Application.class) are removed, the test works as expected. Only when both of them are used the error occurs.</p>\n<p>My build.gradle contains the following dependencies</p>\n<pre><code>dependencies {\n    // https://mvnrepository.com/artifact/com.google.api-client/google-api-client-gson\n    implementation 'com.google.api-client:google-api-client-gson:2.2.0'\n    implementation 'org.springframework.boot:spring-boot-starter-validation:3.0.5'\n\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:3.0.5'\n    annotationProcessor 'org.hibernate:hibernate-core-jakarta:5.6.15.Final'\n\n\n    implementation 'javax.validation:validation-api:2.0.1.Final'\n\n    implementation group: 'jakarta.xml.bind', name: 'jakarta.xml.bind-api', version: '4.0.0'\n    implementation group: 'com.sun.xml.bind', name: 'jaxb-impl', version: '4.0.1'\n    implementation group: 'org.glassfish.jaxb', name: 'jaxb-runtime', version: '4.0.2'\n\n\n    // Spring MVC, testing, and devtools\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-webflux'\n\n    // https://mvnrepository.com/artifact/io.netty/netty-transport\n    implementation group: 'io.netty', name: 'netty-transport-native-epoll', version: '4.1.90.Final', classifier: 'linux-x86_64'\n    implementation 'junit:junit:4.13.2'\n\n\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'io.projectreactor:reactor-test'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    // Lombok annotations to reduce boilerplate code\n    compileOnly 'org.projectlombok:lombok:1.18.26'\n    annotationProcessor 'org.projectlombok:lombok:1.18.26'\n    // create MetaModel for jpa specification/\n    annotationProcessor 'org.hibernate:hibernate-jpamodelgen:6.1.7.Final'\n    implementation 'io.hypersistence:hypersistence-utils-hibernate-60:3.3.0'\n\n    // Sentry\n    implementation 'io.sentry:sentry-spring-boot-starter-jakarta:6.16.0'\n    implementation 'io.sentry:sentry-logback:6.16.0'\n\n    // DataDog\n    datadogAgent group: 'com.datadoghq', name: 'dd-java-agent', version: '1.10.0'\n    implementation group: 'com.datadoghq', name: 'dd-trace-api', version: '1.10.0'\n    implementation 'com.datadoghq:java-dogstatsd-client:4.2.0'\n    implementation 'io.micrometer:micrometer-registry-statsd:1.10.5'\n    // Error Prone: (java error/antipattern checker - works with the net.ltgt.errorprone plugin above)\n    errorprone 'com.google.errorprone:error_prone_core:2.18.0'\n    // Database support\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    testImplementation 'net.ttddyy:datasource-proxy:1.8'\n    // MySQL\n    implementation 'org.mariadb.jdbc:mariadb-java-client:3.1.2'\n    implementation 'com.h2database:h2:2.1.214'\n    testImplementation 'mysql:mysql-connector-java:8.0.32'\n    // Google sheets\n    implementation 'com.google.api-client:google-api-client:2.2.0'\n    implementation 'com.google.apis:google-api-services-sheets:v4-rev20230227-2.0.0'\n    //s3\n    implementation group: 'com.amazonaws', name: 'aws-java-sdk-s3', version: '1.12.429'\n    //thymeleaf\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    //testing\n    testImplementation 'org.mockito:mockito-core:5.2.0'\n}\n</code></pre>\n<p>I've tried downgrading to SB 2.7 in case it was a change introduced later, but that produced a slew of other problems so I reverted.</p>\n<p>I've checked that It's running with  Hibernate ORM core version 6.1.5.Final, which should be compatible with io.hypersistence:hypersistence-utils-hibernate-60:3.0.1.</p>\n<p>I've tried removing some annotations, (see above) to understand if a specific annotation triggers the error, but since it's only when two of the annotations are used at the same time, I'm unsure.</p>\n<p>I've tried finding similar questions on slack, but none seemed quite right.</p>\n<p>If anyone has an idea for how to resolve the error, or if I've missed some piece of documentation on how to properly upgrade things I'd really appreciate the support.</p>\n<p>Best,\nVictor</p>\n"},{"tags":["java","google-app-engine","terraform","app-engine-flexible"],"answers":[{"tags":[],"owner":{"account_id":1016403,"reputation":1,"user_id":22763085,"display_name":"Antonio"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1697638558,"creation_date":1697638558,"answer_id":77317164,"question_id":77261389,"body_markdown":"I have the same error.\r\n\r\nI have a Spring Boot application and I migrated my project from Java 8 to Java 17, and I could deploy normally on october 14. I could see in the logs that the app is running on Java 17.\r\n\r\nOn october 15, I just added a small feature, with no changes in the configuration, and then I started to get the same error.\r\n\r\nAs I didn&#39;t change the configuration, I suppose it is a problem on Google Cloud, but it&#39;s been happening for me since october 15.\r\n\r\nHere&#39;s my app.yaml, made following Google Cloud tutorial:\r\n\r\n```\r\nruntime: java\r\nenv: flex\r\nruntime_config:\r\n  operating_system: ubuntu22\r\n  runtime_version: 17\r\n  \r\nservice: api\r\n  \r\nhandlers:\r\n- url: /.*\r\n  script: this field is required, but ignored\r\n  \r\nresources:\r\n  cpu: 1\r\n  memory_gb: 4\r\n  disk_size_gb: 40\r\n\r\n\r\nautomatic_scaling:\r\n  min_num_instances: 1\r\n  max_num_instances: 1\r\n  \r\n  cpu_utilization:\r\n    target_utilization: 0.85\r\n  \r\nenv_variables:                      \r\n    SPRING_PROFILES_ACTIVE: prod\r\n\r\n```\r\n  ","title":"Issue with Google App Engine Flexible Environment using Java 11 as Runtime in terraform code","body":"<p>I have the same error.</p>\n<p>I have a Spring Boot application and I migrated my project from Java 8 to Java 17, and I could deploy normally on october 14. I could see in the logs that the app is running on Java 17.</p>\n<p>On october 15, I just added a small feature, with no changes in the configuration, and then I started to get the same error.</p>\n<p>As I didn't change the configuration, I suppose it is a problem on Google Cloud, but it's been happening for me since october 15.</p>\n<p>Here's my app.yaml, made following Google Cloud tutorial:</p>\n<pre><code>runtime: java\nenv: flex\nruntime_config:\n  operating_system: ubuntu22\n  runtime_version: 17\n  \nservice: api\n  \nhandlers:\n- url: /.*\n  script: this field is required, but ignored\n  \nresources:\n  cpu: 1\n  memory_gb: 4\n  disk_size_gb: 40\n\n\nautomatic_scaling:\n  min_num_instances: 1\n  max_num_instances: 1\n  \n  cpu_utilization:\n    target_utilization: 0.85\n  \nenv_variables:                      \n    SPRING_PROFILES_ACTIVE: prod\n\n</code></pre>\n"}],"owner":{"account_id":22312990,"reputation":384,"user_id":16536734,"display_name":"Abhishek Solanki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1698379696,"creation_date":1696880413,"question_id":77261389,"body_markdown":"I am trying to configure a Google App Engine Flexible Environment for my Java application, and I want to use Java 11 as the runtime. However, I&#39;m encountering an issue where it seems to be using Java 8 instead, and I&#39;m getting the following error:\r\n\r\n```\r\ngoogle_app_engine_flexible_app_version.myapp_v1: Still creating... [3m30s elapsed]╷│ Error: Error waiting to create FlexibleAppVersion: Error waiting for Creating FlexibleAppVersion: Error code 9, message: An internal error occurred while processing task /app-engine-flex/flex_await_healthy/flex_await_healthy&gt;2023-10-27T03:35:51.497Z43727.vt.2: Start command: java -showversion -Xms491M -Xmx491M -XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:+PrintCommandLineFlags -jar app.jar\r\n│ -XX:InitialHeapSize=514850816 -XX:MaxHeapSize=514850816 -XX:+ParallelRefProcEnabled -XX:+PrintCommandLineFlags -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC \r\n│ openjdk version &quot;1.8.0_345&quot;\r\n│ OpenJDK Runtime Environment (Temurin)(build 1.8.0_345-b01)\r\n│ OpenJDK 64-Bit Server VM (Temurin)(build 25.345-b01, mixed mode)\r\n│ │ Error: A JNI error has occurred, please check your installation and try again\r\n│ Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/example/appengine/Application has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\r\n│       at java.lang.ClassLoader.defineClass1(Native Method)\r\n│       at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\r\n│       at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\r\n│       at java.net.URLClassLoader.defineClass(URLClassLoader.java:473)\r\n│       at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\r\n│       at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\r\n│       at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\r\n│       at java.security.AccessController.doPrivileged(Native Method)\r\n│       at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\r\n│       at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n│       at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n│       at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n│       at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:601)\r\n```\r\nI&#39;ve configured my google_app_engine_flexible_app_version resource like this: This time I have tried using app.yaml file from terraform resource\r\n\r\n```\r\nresource &quot;google_app_engine_flexible_app_version&quot; &quot;myapp_v1&quot; {\r\n  version_id = &quot;v1&quot;\r\n  project    = &quot;fresh-test1&quot;\r\n  service    = &quot;servcie1&quot;\r\n  runtime    = &quot;java&quot;\r\n\r\n  deployment {\r\n    files {\r\n      name = &quot;micronaut-helloworld-0.1.jar&quot;\r\n      source_url = &quot;https://storage.googleapis.com/${google_storage_bucket.bucket.name}/${google_storage_bucket_object.object.name}&quot;\r\n    }\r\n    cloud_build_options {\r\n      app_yaml_path = &quot;[./app.yaml]&quot;\r\n    }\r\n  }\r\n\r\n  liveness_check {\r\n    path = &quot;/&quot;\r\n  }\r\n\r\n  readiness_check {\r\n    path = &quot;/&quot;\r\n  }\r\n\r\n  env_variables = {\r\n    port = &quot;8080&quot;\r\n  }\r\n\r\n  automatic_scaling {\r\n    cool_down_period = &quot;120s&quot;\r\n    max_total_instances = 2\r\n    min_total_instances = 1\r\n    cpu_utilization {\r\n      target_utilization = 0.5\r\n    }\r\n  }\r\n  delete_service_on_destroy = true\r\n  service_account = google_service_account.custom_service_account.email\r\n}\r\n```\r\n**app.yaml**\r\n```\r\nruntime: java\r\nenv: flex\r\nruntime_config:\r\n  operating_system: ubuntu22\r\n  runtime_version: 11\r\nservice: api\r\nhandlers:\r\n- url: /.*\r\n  script: this field is required, but ignored\r\n\r\nresources:\r\n  cpu: 1\r\n  memory_gb: 4\r\n  disk_size_gb: 40\r\n\r\nautomatic_scaling:\r\n  min_num_instances: 1\r\n  max_num_instances: 1\r\n\r\n  cpu_utilization:\r\n    target_utilization: 0.85\r\n\r\nenv_variables:\r\n  SPRING_PROFILES_ACTIVE: prod\r\n  \r\n```\r\nI am running the terraform code from google cloud shell.\r\nand Java --version points to java17 \r\nJAVA_HOME points to java11\r\nI don&#39;t know if that matters.\r\n\r\nIs there a way to properly configure Google App Engine Flexible Environment to use Java 11 as the runtime? Am I using the correct entrypoint and runtime configuration? Any help or guidance would be greatly appreciated.\r\n\r\n\r\n\r\n","title":"Issue with Google App Engine Flexible Environment using Java 11 as Runtime in terraform code","body":"<p>I am trying to configure a Google App Engine Flexible Environment for my Java application, and I want to use Java 11 as the runtime. However, I'm encountering an issue where it seems to be using Java 8 instead, and I'm getting the following error:</p>\n<pre><code>google_app_engine_flexible_app_version.myapp_v1: Still creating... [3m30s elapsed]╷│ Error: Error waiting to create FlexibleAppVersion: Error waiting for Creating FlexibleAppVersion: Error code 9, message: An internal error occurred while processing task /app-engine-flex/flex_await_healthy/flex_await_healthy&gt;2023-10-27T03:35:51.497Z43727.vt.2: Start command: java -showversion -Xms491M -Xmx491M -XX:+UseG1GC -XX:+ParallelRefProcEnabled -XX:+PrintCommandLineFlags -jar app.jar\n│ -XX:InitialHeapSize=514850816 -XX:MaxHeapSize=514850816 -XX:+ParallelRefProcEnabled -XX:+PrintCommandLineFlags -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseG1GC \n│ openjdk version &quot;1.8.0_345&quot;\n│ OpenJDK Runtime Environment (Temurin)(build 1.8.0_345-b01)\n│ OpenJDK 64-Bit Server VM (Temurin)(build 25.345-b01, mixed mode)\n│ │ Error: A JNI error has occurred, please check your installation and try again\n│ Exception in thread &quot;main&quot; java.lang.UnsupportedClassVersionError: com/example/appengine/Application has been compiled by a more recent version of the Java Runtime (class file version 55.0), this version of the Java Runtime only recognizes class file versions up to 52.0\n│       at java.lang.ClassLoader.defineClass1(Native Method)\n│       at java.lang.ClassLoader.defineClass(ClassLoader.java:756)\n│       at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)\n│       at java.net.URLClassLoader.defineClass(URLClassLoader.java:473)\n│       at java.net.URLClassLoader.access$100(URLClassLoader.java:74)\n│       at java.net.URLClassLoader$1.run(URLClassLoader.java:369)\n│       at java.net.URLClassLoader$1.run(URLClassLoader.java:363)\n│       at java.security.AccessController.doPrivileged(Native Method)\n│       at java.net.URLClassLoader.findClass(URLClassLoader.java:362)\n│       at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n│       at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n│       at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n│       at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:601)\n</code></pre>\n<p>I've configured my google_app_engine_flexible_app_version resource like this: This time I have tried using app.yaml file from terraform resource</p>\n<pre><code>resource &quot;google_app_engine_flexible_app_version&quot; &quot;myapp_v1&quot; {\n  version_id = &quot;v1&quot;\n  project    = &quot;fresh-test1&quot;\n  service    = &quot;servcie1&quot;\n  runtime    = &quot;java&quot;\n\n  deployment {\n    files {\n      name = &quot;micronaut-helloworld-0.1.jar&quot;\n      source_url = &quot;https://storage.googleapis.com/${google_storage_bucket.bucket.name}/${google_storage_bucket_object.object.name}&quot;\n    }\n    cloud_build_options {\n      app_yaml_path = &quot;[./app.yaml]&quot;\n    }\n  }\n\n  liveness_check {\n    path = &quot;/&quot;\n  }\n\n  readiness_check {\n    path = &quot;/&quot;\n  }\n\n  env_variables = {\n    port = &quot;8080&quot;\n  }\n\n  automatic_scaling {\n    cool_down_period = &quot;120s&quot;\n    max_total_instances = 2\n    min_total_instances = 1\n    cpu_utilization {\n      target_utilization = 0.5\n    }\n  }\n  delete_service_on_destroy = true\n  service_account = google_service_account.custom_service_account.email\n}\n</code></pre>\n<p><strong>app.yaml</strong></p>\n<pre><code>runtime: java\nenv: flex\nruntime_config:\n  operating_system: ubuntu22\n  runtime_version: 11\nservice: api\nhandlers:\n- url: /.*\n  script: this field is required, but ignored\n\nresources:\n  cpu: 1\n  memory_gb: 4\n  disk_size_gb: 40\n\nautomatic_scaling:\n  min_num_instances: 1\n  max_num_instances: 1\n\n  cpu_utilization:\n    target_utilization: 0.85\n\nenv_variables:\n  SPRING_PROFILES_ACTIVE: prod\n  \n</code></pre>\n<p>I am running the terraform code from google cloud shell.\nand Java --version points to java17\nJAVA_HOME points to java11\nI don't know if that matters.</p>\n<p>Is there a way to properly configure Google App Engine Flexible Environment to use Java 11 as the runtime? Am I using the correct entrypoint and runtime configuration? Any help or guidance would be greatly appreciated.</p>\n"},{"tags":["java","linux","jvm","oom"],"comments":[{"owner":{"account_id":3761893,"reputation":193,"user_id":3126580,"display_name":"hehe"},"score":0,"creation_date":1698376042,"post_id":77371301,"comment_id":136400441,"body_markdown":"debug info : https://drive.google.com/drive/folders/1C67MOzbOa5XCAJO3FEd92yUpwU9WAaHI?usp=drive_link","body":"debug info : <a href=\"https://drive.google.com/drive/folders/1C67MOzbOa5XCAJO3FEd92yUpwU9WAaHI?usp=drive_link\" rel=\"nofollow noreferrer\">drive.google.com/drive/folders/&hellip;</a>"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1698379117,"post_id":77371301,"comment_id":136400639,"body_markdown":"It looks like your memory leak is actually a *resource* leak.  Something is not closing database connections or statements, and they are ending up on the finalizer queue.  And the finalizer thread either cannot keep up or has been blocked.  Examine your application code that performs DB operations to make sure that connections / statements / resultsets do not leak.","body":"It looks like your memory leak is actually a <i>resource</i> leak.  Something is not closing database connections or statements, and they are ending up on the finalizer queue.  And the finalizer thread either cannot keep up or has been blocked.  Examine your application code that performs DB operations to make sure that connections / statements / resultsets do not leak."},{"owner":{"account_id":3761893,"reputation":193,"user_id":3126580,"display_name":"hehe"},"score":0,"creation_date":1698379419,"post_id":77371301,"comment_id":136400656,"body_markdown":"why FinalizerThread queue blocked.","body":"why FinalizerThread queue blocked."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1698379508,"post_id":77371301,"comment_id":136400664,"body_markdown":"There is not enough information to tell why.  But its not really relevant.  Your code should not be leaking the DB / JDBC resources in the first place.","body":"There is not enough information to tell why.  But its not really relevant.  Your code should not be leaking the DB / JDBC resources in the first place."},{"owner":{"account_id":3761893,"reputation":193,"user_id":3126580,"display_name":"hehe"},"score":0,"creation_date":1698379818,"post_id":77371301,"comment_id":136400680,"body_markdown":"I have checked my code, and everywhere I used PreparedStatement, I closed it using DbUtils.closeQuietly(statement) from commons-dbutils:1.7. Also, this issue only occurs in one environment, while it&#39;s not happening in dozens of other environments, so I suspect it is related to the running environment. How should I further investigate?","body":"I have checked my code, and everywhere I used PreparedStatement, I closed it using DbUtils.closeQuietly(statement) from commons-dbutils:1.7. Also, this issue only occurs in one environment, while it&#39;s not happening in dozens of other environments, so I suspect it is related to the running environment. How should I further investigate?"},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1698380021,"post_id":77371301,"comment_id":136400692,"body_markdown":"Did you also close when the database resources when an exception is thrown?  The fact that you are using `closeQuietly` rather than *try with resources* is suspicious.","body":"Did you also close when the database resources when an exception is thrown?  The fact that you are using <code>closeQuietly</code> rather than <i>try with resources</i> is suspicious."},{"owner":{"account_id":3761893,"reputation":193,"user_id":3126580,"display_name":"hehe"},"score":0,"creation_date":1698380151,"post_id":77371301,"comment_id":136400697,"body_markdown":"All close operations are in the finally block.","body":"All close operations are in the finally block."},{"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":0,"creation_date":1698383435,"post_id":77371301,"comment_id":136400904,"body_markdown":"Yes ... but you can still get in trouble; e.g. if `closeQuietly` on one resource throws an exception that is not handled by the `closeQuietly` logic.  *Try with resources* solves that.  And anyway, **the evidence** suggests that something is not getting closed properly.  Trust the evidence!","body":"Yes ... but you can still get in trouble; e.g. if <code>closeQuietly</code> on one resource throws an exception that is not handled by the <code>closeQuietly</code> logic.  <i>Try with resources</i> solves that.  And anyway, <b>the evidence</b> suggests that something is not getting closed properly.  Trust the evidence!"},{"owner":{"account_id":4210603,"reputation":94356,"user_id":3448419,"display_name":"apangin"},"score":0,"creation_date":1698418363,"post_id":77371301,"comment_id":136407338,"body_markdown":"*&quot;and my process envionment don&#39;t have MALLOC_ARENA_MAX&quot;* - so you need to set it. Or use alternative allocator, e.g. [jemalloc](https://github.com/jemalloc/jemalloc)","body":"<i>&quot;and my process envionment don&#39;t have MALLOC_ARENA_MAX&quot;</i> - so you need to set it. Or use alternative allocator, e.g. <a href=\"https://github.com/jemalloc/jemalloc\" rel=\"nofollow noreferrer\">jemalloc</a>"},{"owner":{"account_id":9494766,"reputation":147,"user_id":7058262,"display_name":"prasannajoshi"},"score":0,"creation_date":1698648043,"post_id":77371301,"comment_id":136427072,"body_markdown":"also to add what Stephen is saying if you check code for dbutils.closeconnection \nhttps://github.com/apache/commons-dbutils/blob/master/src/main/java/org/apache/commons/dbutils/DbUtils.java#L159\n\nit does not handle exception occurs during close call so its better if you write your code for closing connection and probably add some loggers around it.\n\nalso if somehow you can simulate this in local then u can profile your app with viusualvm&#39;s Buffer Monitor which could help understanding if memory leak is via direct buffers allocations on off-heap","body":"also to add what Stephen is saying if you check code for dbutils.closeconnection  <a href=\"https://github.com/apache/commons-dbutils/blob/master/src/main/java/org/apache/commons/dbutils/DbUtils.java#L159\" rel=\"nofollow noreferrer\">github.com/apache/commons-dbutils/blob/master/src/main/java/&zwnj;&#8203;org/&hellip;</a>  it does not handle exception occurs during close call so its better if you write your code for closing connection and probably add some loggers around it.  also if somehow you can simulate this in local then u can profile your app with viusualvm&#39;s Buffer Monitor which could help understanding if memory leak is via direct buffers allocations on off-heap"}],"owner":{"account_id":3761893,"reputation":193,"user_id":3126580,"display_name":"hehe"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1698379466,"creation_date":1698375610,"question_id":77371301,"body_markdown":"I have a Java service that has been running for about ten days. \r\nI found that it was killed by Linux&#39;s OOM killer during busy periods. The heap memory I configured for it was Xmx10G Xms6G, but the OOM killer showed that its RSS was 24.5G. \r\n\r\n```\r\n[6252128.258453]Out of memory: Kill process 113627 (java) score 350 or sacrifice child\r\n[6252128.258533]Killed process 113627 (java) total-vm:50134728kB, anon-rss:25062168kB, file-rss:0kB, shmem-rss:0kB\r\n[7954659.707880][43116(bkmonitorbeat)]:gsch scan(inode=411811729,type=1,flags=0x0) -interrupted &amp; wait(timeout=1000)\r\n[7954659.709606][43116(bkmonitorbeat): gsch_scan(inode=411811729,type-1,flags-exe)-interrupted &amp; waitdone\r\n```\r\n\r\n\r\nI restarted the process and found that the RSS in top was 30G after a few days.\r\nI suspect there is an off-heap memory leak. \r\n\r\n\r\nI have performed operations such as jmap dump, jstack, and pmap, and found that there is a lot of memory of 65508KB held in the process. \r\nThen, I found many java.lang.ref.Finalizer objects in jmap, totaling 7206. \r\n\r\n\r\n[![enter image description here][2]][2]\r\n\r\nFurther using OQL queries, I found that many of the referents in the Finalizer are org.apache.commons.dbcp2.DelegatingPreparedStatement (2124), \r\n\r\n[![enter image description here][3]][3]\r\n\r\norg.apache.commons.dbcp2.DelegatingStatement (1940), \r\n\r\n[![enter image description here][4]][4]\r\n\r\nsun.security.ssl.SSLSessionImpl (460).\r\n\r\n[![enter image description here][5]][5]\r\n\r\nThe FinalizerThread is stuck at ReferenceQueue.remove(), and I feel that there is nothing left in this queue, but there is still a lot of garbage retained in the Finalizer&#39;s linked list.\r\n\r\n```\r\n\r\n&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x00007f96183e2800 nid=0x174a7 in Object.wait() [0x00007f95e4ecd000]\r\n   java.lang.Thread.State: WAITING (on object monitor)\r\n\tat java.lang.Object.wait(Native Method)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\r\n\t- locked &lt;0x0000000540020d40&gt; (a java.lang.ref.ReferenceQueue$Lock)\r\n\tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\r\n\tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)\r\n```\r\n\r\n\r\nI check smaps file, found that there are 322 memory blocks with an RSS value of around 64MB, which accumulates to more than 20GB of memory.  \r\n\r\n[![enter image description here][6]][6]\r\n\r\nI use gdb dump an 64M memory to file, but I don&#39;t know the memory data struct，so I can&#39;t debug it.\r\n\r\nThis means that there is a possibility that the memory leak is related to glibc&#39;s malloc memory pool.\r\n\r\n\r\n[![enter image description here][7]][7]\r\n\r\n\r\n\r\n```\r\nldd /usr/lib64/jdk8/bin/java  \r\n\r\nlinux-vdso.so.1 =&gt;  (0x00007ffd381f1000)\r\nlibpthread.so.0 =&gt; /lib64/libpthread.so.0(0x00007fc9c1743000)\r\nlibjli.so =&gt; /usr/lib64/idk8/bin/../lib/amd64/ili/libjli.so(0x00007fc9c152d000)\r\nlibdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fc9c1329000)\r\nlibc.so.6 =&gt; /lib64/ibc.so.6 (0x00007fc9cof5b000)\r\n/lib64/ld-linux-x86-64.so.2 (0x00007fc9c195f000)\r\n\r\n\r\n\r\n-------\r\nInstalled Packages\r\nglibc.x86_64  2.17-317.el\r\n\r\n```\r\n\r\nand my process envionment don&#39;t have MALLOC_ARENA_MAX\r\n\r\n\r\nI restarted the service manually to prevent OOM killer from killing it again and added the -XX:NativeMemoryTracking=detail parameter, but after running for a few days, I still cannot see any abnormalities when using `jcmd pid VM.native_memory detail`.\r\n\r\n[![enter image description here][9]][9]\r\n\r\nI have some other debugging information\r\nWhat should I do next to troubleshoot this issue?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/w2qwr.png\r\n  [2]: https://i.stack.imgur.com/1tTeK.png\r\n  [3]: https://i.stack.imgur.com/qPbdz.png\r\n  [4]: https://i.stack.imgur.com/pKV0a.png\r\n  [5]: https://i.stack.imgur.com/k2oWF.png\r\n  [6]: https://i.stack.imgur.com/CDv35.png\r\n  [7]: https://i.stack.imgur.com/XpMsF.png\r\n  [8]: https://i.stack.imgur.com/iZ3ks.png\r\n  [9]: https://i.stack.imgur.com/ylWly.png","title":"java process killed by linux oomkiller, like native memory leak","body":"<p>I have a Java service that has been running for about ten days.\nI found that it was killed by Linux's OOM killer during busy periods. The heap memory I configured for it was Xmx10G Xms6G, but the OOM killer showed that its RSS was 24.5G.</p>\n<pre><code>[6252128.258453]Out of memory: Kill process 113627 (java) score 350 or sacrifice child\n[6252128.258533]Killed process 113627 (java) total-vm:50134728kB, anon-rss:25062168kB, file-rss:0kB, shmem-rss:0kB\n[7954659.707880][43116(bkmonitorbeat)]:gsch scan(inode=411811729,type=1,flags=0x0) -interrupted &amp; wait(timeout=1000)\n[7954659.709606][43116(bkmonitorbeat): gsch_scan(inode=411811729,type-1,flags-exe)-interrupted &amp; waitdone\n</code></pre>\n<p>I restarted the process and found that the RSS in top was 30G after a few days.\nI suspect there is an off-heap memory leak.</p>\n<p>I have performed operations such as jmap dump, jstack, and pmap, and found that there is a lot of memory of 65508KB held in the process.\nThen, I found many java.lang.ref.Finalizer objects in jmap, totaling 7206.</p>\n<p><a href=\"https://i.stack.imgur.com/1tTeK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1tTeK.png\" alt=\"enter image description here\" /></a></p>\n<p>Further using OQL queries, I found that many of the referents in the Finalizer are org.apache.commons.dbcp2.DelegatingPreparedStatement (2124),</p>\n<p><a href=\"https://i.stack.imgur.com/qPbdz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qPbdz.png\" alt=\"enter image description here\" /></a></p>\n<p>org.apache.commons.dbcp2.DelegatingStatement (1940),</p>\n<p><a href=\"https://i.stack.imgur.com/pKV0a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pKV0a.png\" alt=\"enter image description here\" /></a></p>\n<p>sun.security.ssl.SSLSessionImpl (460).</p>\n<p><a href=\"https://i.stack.imgur.com/k2oWF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k2oWF.png\" alt=\"enter image description here\" /></a></p>\n<p>The FinalizerThread is stuck at ReferenceQueue.remove(), and I feel that there is nothing left in this queue, but there is still a lot of garbage retained in the Finalizer's linked list.</p>\n<pre><code>\n&quot;Finalizer&quot; #3 daemon prio=8 os_prio=0 tid=0x00007f96183e2800 nid=0x174a7 in Object.wait() [0x00007f95e4ecd000]\n   java.lang.Thread.State: WAITING (on object monitor)\n    at java.lang.Object.wait(Native Method)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:143)\n    - locked &lt;0x0000000540020d40&gt; (a java.lang.ref.ReferenceQueue$Lock)\n    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:164)\n    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:209)\n</code></pre>\n<p>I check smaps file, found that there are 322 memory blocks with an RSS value of around 64MB, which accumulates to more than 20GB of memory.</p>\n<p><a href=\"https://i.stack.imgur.com/CDv35.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CDv35.png\" alt=\"enter image description here\" /></a></p>\n<p>I use gdb dump an 64M memory to file, but I don't know the memory data struct，so I can't debug it.</p>\n<p>This means that there is a possibility that the memory leak is related to glibc's malloc memory pool.</p>\n<p><a href=\"https://i.stack.imgur.com/XpMsF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XpMsF.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>ldd /usr/lib64/jdk8/bin/java  \n\nlinux-vdso.so.1 =&gt;  (0x00007ffd381f1000)\nlibpthread.so.0 =&gt; /lib64/libpthread.so.0(0x00007fc9c1743000)\nlibjli.so =&gt; /usr/lib64/idk8/bin/../lib/amd64/ili/libjli.so(0x00007fc9c152d000)\nlibdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fc9c1329000)\nlibc.so.6 =&gt; /lib64/ibc.so.6 (0x00007fc9cof5b000)\n/lib64/ld-linux-x86-64.so.2 (0x00007fc9c195f000)\n\n\n\n-------\nInstalled Packages\nglibc.x86_64  2.17-317.el\n\n</code></pre>\n<p>and my process envionment don't have MALLOC_ARENA_MAX</p>\n<p>I restarted the service manually to prevent OOM killer from killing it again and added the -XX:NativeMemoryTracking=detail parameter, but after running for a few days, I still cannot see any abnormalities when using <code>jcmd pid VM.native_memory detail</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/ylWly.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ylWly.png\" alt=\"enter image description here\" /></a></p>\n<p>I have some other debugging information\nWhat should I do next to troubleshoot this issue?</p>\n"},{"tags":["java","generator","test-data","instancio"],"answers":[{"tags":[],"owner":{"account_id":7701,"reputation":47163,"user_id":13447,"accept_rate":100,"display_name":"Olaf Kock"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1698341135,"creation_date":1698341135,"answer_id":77369176,"question_id":77369000,"body_markdown":"I hope I understand your intention correctly... two options for interpretation:\r\n\r\nTo me this sounds dangerously close to test the implementation *of the annotations*, rather than your own code. \r\n\r\nI don&#39;t expect to learn too much from this kind of tests. If the annotations were implemented manually: Sure - validate that the validation is correct. But this way, personally, I&#39;d skip writing those tests. \r\n\r\nWhat would happen, when such a test fails? My expectation is: If a test fails, the fix is to correct the annotation. Which might risk any external component that relies on the original annotation to break. But in general, you&#39;re just testing that you have used the &quot;correct&quot; annotation - this is something that a simple review can do (after all, you review your test for the correct assumptions as well, right? this way just just have the same review to do twice: For the annotation *and* the test)\r\n\r\nAnother option:\r\n\r\nIf you want to generate random objects: Are those repeatable for each test? Is the data expected to be completely random? You use the example of an address: Certainly, &quot;aiwjelfkmjlsk&quot; does not sound like a description for any point on the planet, though &quot;krk&quot; actually is. If you *really* just want to validate static criteria like length and min/max, you&#39;re right. But if there&#39;s any semantics to the data, you haven&#39;t won anything. \r\n\r\nIf the random values are *not* repeatable, you might have random test failures, with the next run succeeding due to other values being generated.\r\n\r\nAlso there&#39;s value in explicit input values for tests. I recall writing a test feeding random data into a &quot;credit card transfer money&quot; web application (20y ago), literally by &quot;sitting on the keyboard&quot; to generate data. Imagine my surprise to discover that the application was happy to pay me &quot;3e3&quot; money (aka 3000) instead of rejecting this as not a number. Having such a value explicitly in a test has more value than a stream of random nonreproducible data. And if it&#39;s reproducible randomness, you might not even get to such values, which provide a tremendous documentation value for your application.","title":"how to generate test data based on java object model?","body":"<p>I hope I understand your intention correctly... two options for interpretation:</p>\n<p>To me this sounds dangerously close to test the implementation <em>of the annotations</em>, rather than your own code.</p>\n<p>I don't expect to learn too much from this kind of tests. If the annotations were implemented manually: Sure - validate that the validation is correct. But this way, personally, I'd skip writing those tests.</p>\n<p>What would happen, when such a test fails? My expectation is: If a test fails, the fix is to correct the annotation. Which might risk any external component that relies on the original annotation to break. But in general, you're just testing that you have used the &quot;correct&quot; annotation - this is something that a simple review can do (after all, you review your test for the correct assumptions as well, right? this way just just have the same review to do twice: For the annotation <em>and</em> the test)</p>\n<p>Another option:</p>\n<p>If you want to generate random objects: Are those repeatable for each test? Is the data expected to be completely random? You use the example of an address: Certainly, &quot;aiwjelfkmjlsk&quot; does not sound like a description for any point on the planet, though &quot;krk&quot; actually is. If you <em>really</em> just want to validate static criteria like length and min/max, you're right. But if there's any semantics to the data, you haven't won anything.</p>\n<p>If the random values are <em>not</em> repeatable, you might have random test failures, with the next run succeeding due to other values being generated.</p>\n<p>Also there's value in explicit input values for tests. I recall writing a test feeding random data into a &quot;credit card transfer money&quot; web application (20y ago), literally by &quot;sitting on the keyboard&quot; to generate data. Imagine my surprise to discover that the application was happy to pay me &quot;3e3&quot; money (aka 3000) instead of rejecting this as not a number. Having such a value explicitly in a test has more value than a stream of random nonreproducible data. And if it's reproducible randomness, you might not even get to such values, which provide a tremendous documentation value for your application.</p>\n"},{"tags":[],"owner":{"account_id":19296,"reputation":17862,"user_id":45112,"accept_rate":71,"display_name":"armandino"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1698350798,"creation_date":1698350798,"answer_id":77370029,"question_id":77369000,"body_markdown":"If you enable the `Keys.BEAN_VALIDATION_ENABLED` setting, then Instancio will generate valid objects using the constraints.\r\n\r\n```java\r\nPerson person = Instancio.of(Person.class)\r\n    .withSettings(Settings.create().set(Keys.BEAN_VALIDATION_ENABLED, true))\r\n    .create();\r\n```\r\n\r\nSee: https://www.instancio.org/user-guide/#bean-validation\r\n","title":"how to generate test data based on java object model?","body":"<p>If you enable the <code>Keys.BEAN_VALIDATION_ENABLED</code> setting, then Instancio will generate valid objects using the constraints.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Person person = Instancio.of(Person.class)\n    .withSettings(Settings.create().set(Keys.BEAN_VALIDATION_ENABLED, true))\n    .create();\n</code></pre>\n<p>See: <a href=\"https://www.instancio.org/user-guide/#bean-validation\" rel=\"nofollow noreferrer\">https://www.instancio.org/user-guide/#bean-validation</a></p>\n"}],"owner":{"account_id":318541,"reputation":758,"user_id":635831,"accept_rate":47,"display_name":"Adrian Herscu"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1698379361,"creation_date":1698339322,"question_id":77369000,"body_markdown":"Let&#39;s assume that there is a Java class object model in which all fields are annotated with JSR-303 constraints. Something like this:\r\n\r\n```java\r\n@SuperBuilder\r\n@ToString\r\n@EqualsAndHashCode\r\npublic class Address {\r\n    @Size(min = 1, max = 20)\r\n    @NotNull\r\n    public final String line1;\r\n    @Size(min = 1, max = 20)\r\n    public final String line2;\r\n    @Size(min = 1, max = 20)\r\n    public final String city;\r\n    @Size(min = 1, max = 20)\r\n    public final String country;\r\n    @Size(min = 1, max = 20)\r\n    public final String zipCode;\r\n}\r\n```\r\n\r\nand maybe few tens more like this:\r\n\r\n```java\r\n@SuperBuilder\r\n@ToString\r\n@EqualsAndHashCode\r\npublic class Person {\r\n    @NotNull\r\n    @Valid\r\n    public final Phone phone;\r\n    @NotNull\r\n    @Valid\r\n    public final Address address;\r\n}\r\n```\r\n\r\nManually writing and maintaing test data for these is extremely tedious.\r\n\r\nI believe that this manual process can be automated, let&#39;s say:\r\n\r\n - **minimum values**: null for nullable fields, minimum value for numeric fields, minimum length for string/collection fields, and false for booleans\r\n - **maximum values**: not null for nullable fields, maximum value for numeric fields, maximum length for string/collection fields, and true for booleans\r\n - **below minimum values**: null for nullable fields... you get the rest :)\r\n - **above maximum values**\r\n\r\nThen the programmer should be able to call:\r\n\r\n```java\r\nSomeMagicalGenerator.for(Person.class)\r\n  .generateMaximum() // returns a Stream&lt;Person&gt;\r\n  .distinct()\r\n  .limit(10)\r\n```\r\n\r\nand use it as TestNG DataProvider for example.\r\n\r\n\r\nAt first Instancio looked promising :)\r\nChecked it here: https://github.com/adrian-herscu/instancio-experiment\r\n\r\nBut... I failed to find a way to make it generate minimum and maximum values accoding to the annotations. In my dream if that would work, then making it generate out-range values should be workable too.\r\n\r\nAny ideas? Suggestions? Do I miss something?\r\n\r\n","title":"how to generate test data based on java object model?","body":"<p>Let's assume that there is a Java class object model in which all fields are annotated with JSR-303 constraints. Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuperBuilder\n@ToString\n@EqualsAndHashCode\npublic class Address {\n    @Size(min = 1, max = 20)\n    @NotNull\n    public final String line1;\n    @Size(min = 1, max = 20)\n    public final String line2;\n    @Size(min = 1, max = 20)\n    public final String city;\n    @Size(min = 1, max = 20)\n    public final String country;\n    @Size(min = 1, max = 20)\n    public final String zipCode;\n}\n</code></pre>\n<p>and maybe few tens more like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SuperBuilder\n@ToString\n@EqualsAndHashCode\npublic class Person {\n    @NotNull\n    @Valid\n    public final Phone phone;\n    @NotNull\n    @Valid\n    public final Address address;\n}\n</code></pre>\n<p>Manually writing and maintaing test data for these is extremely tedious.</p>\n<p>I believe that this manual process can be automated, let's say:</p>\n<ul>\n<li><strong>minimum values</strong>: null for nullable fields, minimum value for numeric fields, minimum length for string/collection fields, and false for booleans</li>\n<li><strong>maximum values</strong>: not null for nullable fields, maximum value for numeric fields, maximum length for string/collection fields, and true for booleans</li>\n<li><strong>below minimum values</strong>: null for nullable fields... you get the rest :)</li>\n<li><strong>above maximum values</strong></li>\n</ul>\n<p>Then the programmer should be able to call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SomeMagicalGenerator.for(Person.class)\n  .generateMaximum() // returns a Stream&lt;Person&gt;\n  .distinct()\n  .limit(10)\n</code></pre>\n<p>and use it as TestNG DataProvider for example.</p>\n<p>At first Instancio looked promising :)\nChecked it here: <a href=\"https://github.com/adrian-herscu/instancio-experiment\" rel=\"nofollow noreferrer\">https://github.com/adrian-herscu/instancio-experiment</a></p>\n<p>But... I failed to find a way to make it generate minimum and maximum values accoding to the annotations. In my dream if that would work, then making it generate out-range values should be workable too.</p>\n<p>Any ideas? Suggestions? Do I miss something?</p>\n"},{"tags":["java","spring","spring-boot","spring-cache","caffeine-cache"],"answers":[{"tags":[],"owner":{"account_id":4243,"reputation":1301716,"user_id":6309,"accept_rate":100,"display_name":"VonC"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697668620,"creation_date":1697668620,"answer_id":77319986,"question_id":77303787,"body_markdown":"If you see a select query in the console every time `findDogHouseEnFromDB()` method is called, that should mean the caching might not be working as expected.\r\n\r\nAfter reading &quot;[Caffeine Cache with Spring Boot](https://howtodoinjava.com/spring-boot/spring-boot-caffeine-cache/)&quot; from [Lokesh Gupta](https://github.com/lokeshgupta1981), for debugging purposes, you could add an endpoint or method to inspect the contents of the cache to make sure entries are being cached and evicted as expected.\r\n\r\n```java\r\n@GetMapping(value = &quot;/inspectCache&quot;)\r\npublic void inspectCache() {\r\n    CaffeineCache caffeineCache = (CaffeineCache) cacheManager.getCache(&quot;dogsInHouse&quot;);\r\n    Cache&lt;Object, Object&gt; nativeCache = caffeineCache.getNativeCache();\r\n    for (Map.Entry&lt;Object, Object&gt; entry : nativeCache.asMap().entrySet()) {\r\n        System.out.println(&quot;Key = &quot; + entry.getKey());\r\n        System.out.println(&quot;Value = &quot; + entry.getValue());\r\n    }\r\n}\r\n```\r\n\r\n\r\nNote: Instead of configuring cache properties within the Java configuration file, you could move some or all of these configurations to the `application.properties` file. That could simplify the configuration and make it more manageable. See [Configuration library for JVM languages](https://github.com/lightbend/config#standard-behavior)\r\n\r\n```properties\r\nspring.cache.cache-names=dogsInHouse\r\nspring.cache.caffeine.spec=initialCapacity=200,maximumSize=500,expireAfterAccess=720h\r\n```\r\n\r\nAnd if there is a need for custom cache key generation, you might consider implementing a [custom `KeyGenerator`](https://www.baeldung.com/spring-cache-custom-keygenerator) or using the `key` attribute on the `@Cacheable` annotation to specify how the cache key should be generated.\r\n\r\n```java\r\n@Cacheable(value = &quot;dogsInHouse&quot;, key = &quot;#key&quot;)\r\npublic DogsInHouse findDogHouseEnFromDB (String key) {\r\n    return dogsEnRepository.findByNameAndLangIs(..);\r\n}\r\n```","title":"Caching in Spring Boot with Caffeine","body":"<p>If you see a select query in the console every time <code>findDogHouseEnFromDB()</code> method is called, that should mean the caching might not be working as expected.</p>\n<p>After reading &quot;<a href=\"https://howtodoinjava.com/spring-boot/spring-boot-caffeine-cache/\" rel=\"nofollow noreferrer\">Caffeine Cache with Spring Boot</a>&quot; from <a href=\"https://github.com/lokeshgupta1981\" rel=\"nofollow noreferrer\">Lokesh Gupta</a>, for debugging purposes, you could add an endpoint or method to inspect the contents of the cache to make sure entries are being cached and evicted as expected.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(value = &quot;/inspectCache&quot;)\npublic void inspectCache() {\n    CaffeineCache caffeineCache = (CaffeineCache) cacheManager.getCache(&quot;dogsInHouse&quot;);\n    Cache&lt;Object, Object&gt; nativeCache = caffeineCache.getNativeCache();\n    for (Map.Entry&lt;Object, Object&gt; entry : nativeCache.asMap().entrySet()) {\n        System.out.println(&quot;Key = &quot; + entry.getKey());\n        System.out.println(&quot;Value = &quot; + entry.getValue());\n    }\n}\n</code></pre>\n<p>Note: Instead of configuring cache properties within the Java configuration file, you could move some or all of these configurations to the <code>application.properties</code> file. That could simplify the configuration and make it more manageable. See <a href=\"https://github.com/lightbend/config#standard-behavior\" rel=\"nofollow noreferrer\">Configuration library for JVM languages</a></p>\n<pre><code>spring.cache.cache-names=dogsInHouse\nspring.cache.caffeine.spec=initialCapacity=200,maximumSize=500,expireAfterAccess=720h\n</code></pre>\n<p>And if there is a need for custom cache key generation, you might consider implementing a <a href=\"https://www.baeldung.com/spring-cache-custom-keygenerator\" rel=\"nofollow noreferrer\">custom <code>KeyGenerator</code></a> or using the <code>key</code> attribute on the <code>@Cacheable</code> annotation to specify how the cache key should be generated.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Cacheable(value = &quot;dogsInHouse&quot;, key = &quot;#key&quot;)\npublic DogsInHouse findDogHouseEnFromDB (String key) {\n    return dogsEnRepository.findByNameAndLangIs(..);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1697892336,"creation_date":1697892336,"answer_id":77336026,"question_id":77303787,"body_markdown":"With your configuration, the caching should work.\r\nIt is due to something other than the provided code if it fails.\r\n\r\nCreated a working demo with your code here: [caffeine_cache](https://github.com/dirkdeyne/caffeine_cache)\r\n","title":"Caching in Spring Boot with Caffeine","body":"<p>With your configuration, the caching should work.\nIt is due to something other than the provided code if it fails.</p>\n<p>Created a working demo with your code here: <a href=\"https://github.com/dirkdeyne/caffeine_cache\" rel=\"nofollow noreferrer\">caffeine_cache</a></p>\n"},{"tags":[],"owner":{"account_id":11377012,"reputation":12762,"user_id":8340997,"display_name":"Anish B."},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1698378801,"creation_date":1697907247,"answer_id":77336975,"question_id":77303787,"body_markdown":"Use `logging.level.org.springframework.cache=TRACE` in your **application.properties** to see whether or not the value is picked from the cache.\r\n\r\n**NOTE:** When you hit the service for the first time, it will bring data from database and will put the data into the cache and next time, it will bring from the cache.\r\n\r\nPlease remove `@CacheConfig` you don&#39;t need that in Spring Boot App.\r\n\r\n----\r\n\r\nI&#39;ve used `spring-data-jpa` with **MySQL** for demonstration.\r\n\r\nSame Config used. Just added for reference. \r\n\r\n    @Configuration\r\n    @EnableCaching\r\n    public class CacheConfig {\r\n    \r\n        @Bean\r\n        @Primary\r\n        public CacheManager cacheManager() {\r\n            CaffeineCacheManager cacheManager = new CaffeineCacheManager(&quot;dogsInHouse&quot;);\r\n            cacheManager.setCaffeine(Caffeine.newBuilder()\r\n                    .initialCapacity(200)\r\n                    .expireAfterAccess(Duration.ofDays(30))\r\n                    .maximumSize(500));\r\n            return cacheManager;\r\n        }\r\n    }\r\n\r\n**DogInHouse** for testing:\r\n\r\n    @Entity\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class DogInHouse {\r\n    \r\n        @Id\r\n        @GeneratedValue\r\n        private int id;\r\n    \r\n        @Column(name = &quot;name&quot;)\r\n        private String name;\r\n    \r\n    }\r\n\r\n**DogInHouseRepository** for testing:\r\n\r\n    public interface DogInHouseRepository extends JpaRepository&lt;DogInHouse, Integer&gt; {\r\n    }\r\n\r\n\r\n\r\nMy Service class for testing:\r\n\r\n\r\n    @Service\r\n    @Slf4j\r\n    public class DogsInHouseService {\r\n    \r\n        @Autowired\r\n        private DogInHouseRepository dogsEnRepository;\r\n    \r\n        @Cacheable(value = &quot;dogsInHouse&quot;)\r\n        public Optional&lt;DogInHouse&gt; findDogHouseById(int key) {\r\n            return dogsEnRepository.findById(key);\r\n        }\r\n    \r\n    }\r\n\r\n\r\n**application.properties** for testing:\r\n\r\n\r\n    spring.datasource.url=jdbc:mysql://localhost:3306/test\r\n    spring.datasource.username=root\r\n    spring.datasource.password=Anish@123\r\n    spring.jpa.hibernate.ddl-auto=create-drop\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\r\n    spring.jpa.properties.hibernate.format_sql=true\r\n    logging.level.org.hibernate.SQL=DEBUG\r\n    logging.level.org.springframework.cache=TRACE\r\n\r\nMy **pom.xml** had these dependencies:\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n             &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n             &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n             &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\r\n             &lt;artifactId&gt;caffeine&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n\r\n**My Application Log:**\r\n\r\n**First Time Service Hit:**\r\n\r\n    2023-10-21T22:22:16.575+05:30 TRACE 14989 --- [nio-8080-exec-3] o.s.cache.interceptor.CacheInterceptor   : Computed cache key &#39;1&#39; for operation Builder[public java.util.Optional com.example.springbootmysql.DogsInHouseService.findDogHouseById(int)] caches=[dogsInHouse] | key=&#39;&#39; | keyGenerator=&#39;&#39; | cacheManager=&#39;&#39; | cacheResolver=&#39;&#39; | condition=&#39;&#39; | unless=&#39;&#39; | sync=&#39;false&#39;\r\n    2023-10-21T22:22:16.576+05:30 TRACE 14989 --- [nio-8080-exec-3] o.s.cache.interceptor.CacheInterceptor   : No cache entry for key &#39;1&#39; in cache(s) [dogsInHouse]\r\n    2023-10-21T22:22:16.577+05:30 TRACE 14989 --- [nio-8080-exec-3] o.s.cache.interceptor.CacheInterceptor   : Computed cache key &#39;1&#39; for operation Builder[public java.util.Optional com.example.springbootmysql.DogsInHouseService.findDogHouseById(int)] caches=[dogsInHouse] | key=&#39;&#39; | keyGenerator=&#39;&#39; | cacheManager=&#39;&#39; | cacheResolver=&#39;&#39; | condition=&#39;&#39; | unless=&#39;&#39; | sync=&#39;false&#39;\r\n    2023-10-21T22:22:16.587+05:30 DEBUG 14989 --- [nio-8080-exec-3] org.hibernate.SQL                        : \r\n        select\r\n            d1_0.id,\r\n            d1_0.name \r\n        from\r\n            dog_in_house d1_0 \r\n        where\r\n            d1_0.id=?\r\n\r\n&gt; Currently there is no value in the cache with the key that is passed,\r\n&gt; So, a select query will be executed via Hibernate to bring the value\r\n&gt; from DB and the value is put into the cache by that key.\r\n\r\n**Second Time Service Hit:**\r\n\r\n    2023-10-21T22:23:33.485+05:30 TRACE 14989 --- [nio-8080-exec-6] o.s.cache.interceptor.CacheInterceptor   : Computed cache key &#39;1&#39; for operation Builder[public java.util.Optional com.example.springbootmysql.DogsInHouseService.findDogHouseById(int)] caches=[dogsInHouse] | key=&#39;&#39; | keyGenerator=&#39;&#39; | cacheManager=&#39;&#39; | cacheResolver=&#39;&#39; | condition=&#39;&#39; | unless=&#39;&#39; | sync=&#39;false&#39;\r\n    2023-10-21T22:23:33.490+05:30 TRACE 14989 --- [nio-8080-exec-6] o.s.cache.interceptor.CacheInterceptor   : Cache entry for key &#39;1&#39; found in cache &#39;dogsInHouse&#39;\r\n\r\n&gt; This time the value exists in the cache by the same key that was\r\n&gt; passed earlier and the value is fetched from the cache.\r\n\r\n**Postman Output:**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/SqAt1.png","title":"Caching in Spring Boot with Caffeine","body":"<p>Use <code>logging.level.org.springframework.cache=TRACE</code> in your <strong>application.properties</strong> to see whether or not the value is picked from the cache.</p>\n<p><strong>NOTE:</strong> When you hit the service for the first time, it will bring data from database and will put the data into the cache and next time, it will bring from the cache.</p>\n<p>Please remove <code>@CacheConfig</code> you don't need that in Spring Boot App.</p>\n<hr />\n<p>I've used <code>spring-data-jpa</code> with <strong>MySQL</strong> for demonstration.</p>\n<p>Same Config used. Just added for reference.</p>\n<pre><code>@Configuration\n@EnableCaching\npublic class CacheConfig {\n\n    @Bean\n    @Primary\n    public CacheManager cacheManager() {\n        CaffeineCacheManager cacheManager = new CaffeineCacheManager(&quot;dogsInHouse&quot;);\n        cacheManager.setCaffeine(Caffeine.newBuilder()\n                .initialCapacity(200)\n                .expireAfterAccess(Duration.ofDays(30))\n                .maximumSize(500));\n        return cacheManager;\n    }\n}\n</code></pre>\n<p><strong>DogInHouse</strong> for testing:</p>\n<pre><code>@Entity\n@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class DogInHouse {\n\n    @Id\n    @GeneratedValue\n    private int id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n}\n</code></pre>\n<p><strong>DogInHouseRepository</strong> for testing:</p>\n<pre><code>public interface DogInHouseRepository extends JpaRepository&lt;DogInHouse, Integer&gt; {\n}\n</code></pre>\n<p>My Service class for testing:</p>\n<pre><code>@Service\n@Slf4j\npublic class DogsInHouseService {\n\n    @Autowired\n    private DogInHouseRepository dogsEnRepository;\n\n    @Cacheable(value = &quot;dogsInHouse&quot;)\n    public Optional&lt;DogInHouse&gt; findDogHouseById(int key) {\n        return dogsEnRepository.findById(key);\n    }\n\n}\n</code></pre>\n<p><strong>application.properties</strong> for testing:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/test\nspring.datasource.username=root\nspring.datasource.password=Anish@123\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.properties.hibernate.format_sql=true\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.springframework.cache=TRACE\n</code></pre>\n<p>My <strong>pom.xml</strong> had these dependencies:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n         &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n         &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n         &lt;groupId&gt;com.github.ben-manes.caffeine&lt;/groupId&gt;\n         &lt;artifactId&gt;caffeine&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p><strong>My Application Log:</strong></p>\n<p><strong>First Time Service Hit:</strong></p>\n<pre><code>2023-10-21T22:22:16.575+05:30 TRACE 14989 --- [nio-8080-exec-3] o.s.cache.interceptor.CacheInterceptor   : Computed cache key '1' for operation Builder[public java.util.Optional com.example.springbootmysql.DogsInHouseService.findDogHouseById(int)] caches=[dogsInHouse] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false'\n2023-10-21T22:22:16.576+05:30 TRACE 14989 --- [nio-8080-exec-3] o.s.cache.interceptor.CacheInterceptor   : No cache entry for key '1' in cache(s) [dogsInHouse]\n2023-10-21T22:22:16.577+05:30 TRACE 14989 --- [nio-8080-exec-3] o.s.cache.interceptor.CacheInterceptor   : Computed cache key '1' for operation Builder[public java.util.Optional com.example.springbootmysql.DogsInHouseService.findDogHouseById(int)] caches=[dogsInHouse] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false'\n2023-10-21T22:22:16.587+05:30 DEBUG 14989 --- [nio-8080-exec-3] org.hibernate.SQL                        : \n    select\n        d1_0.id,\n        d1_0.name \n    from\n        dog_in_house d1_0 \n    where\n        d1_0.id=?\n</code></pre>\n<blockquote>\n<p>Currently there is no value in the cache with the key that is passed,\nSo, a select query will be executed via Hibernate to bring the value\nfrom DB and the value is put into the cache by that key.</p>\n</blockquote>\n<p><strong>Second Time Service Hit:</strong></p>\n<pre><code>2023-10-21T22:23:33.485+05:30 TRACE 14989 --- [nio-8080-exec-6] o.s.cache.interceptor.CacheInterceptor   : Computed cache key '1' for operation Builder[public java.util.Optional com.example.springbootmysql.DogsInHouseService.findDogHouseById(int)] caches=[dogsInHouse] | key='' | keyGenerator='' | cacheManager='' | cacheResolver='' | condition='' | unless='' | sync='false'\n2023-10-21T22:23:33.490+05:30 TRACE 14989 --- [nio-8080-exec-6] o.s.cache.interceptor.CacheInterceptor   : Cache entry for key '1' found in cache 'dogsInHouse'\n</code></pre>\n<blockquote>\n<p>This time the value exists in the cache by the same key that was\npassed earlier and the value is fetched from the cache.</p>\n</blockquote>\n<p><strong>Postman Output:</strong></p>\n<p><a href=\"https://i.stack.imgur.com/SqAt1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SqAt1.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":5619788,"reputation":4111,"user_id":4450024,"accept_rate":99,"display_name":"Nu&#241;ito Calzada"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77336975,"answer_count":3,"score":2,"last_activity_date":1698378801,"creation_date":1697476189,"question_id":77303787,"body_markdown":"I have this configuration class:\r\n\r\n    @Configuration\r\n    @EnableCaching\r\n    public class CacheConfig {\r\n    \r\n        @Bean\r\n        @Primary\r\n        public CacheManager cacheManager() {\r\n            CaffeineCacheManager cacheManager = new CaffeineCacheManager(&quot;dogsInHouse&quot;);\r\n            cacheManager.setCaffeine(Caffeine.newBuilder()\r\n                    .initialCapacity(200)\r\n                    .expireAfterAccess(Duration.ofDays(30))\r\n                    .maximumSize(500));\r\n            return cacheManager;\r\n        }\r\n    }\r\n\r\nin the properties file:\r\n\r\n    spring.jpa.show-sql=true\r\n\r\nin the service:\r\n\r\n\r\n    @Service\r\n    @Transactional(readOnly = true)\r\n    @Slf4j\r\n    @CacheConfig(cacheNames = {&quot;dogsInHouse&quot;})\r\n    public class DogsInHouseService {\r\n    \r\n        @Cacheable(&quot;dogsInHouse&quot;)\r\n        public DogsInHouse findDogHouseEnFromDB (String key) {\r\n            return dogsEnRepository.findByNameAndLangIs(key);\r\n        }\r\n    }\r\n\r\nBut I always see a select query in the console. But I don&#39;t see the cache logs.","title":"Caching in Spring Boot with Caffeine","body":"<p>I have this configuration class:</p>\n<pre><code>@Configuration\n@EnableCaching\npublic class CacheConfig {\n\n    @Bean\n    @Primary\n    public CacheManager cacheManager() {\n        CaffeineCacheManager cacheManager = new CaffeineCacheManager(&quot;dogsInHouse&quot;);\n        cacheManager.setCaffeine(Caffeine.newBuilder()\n                .initialCapacity(200)\n                .expireAfterAccess(Duration.ofDays(30))\n                .maximumSize(500));\n        return cacheManager;\n    }\n}\n</code></pre>\n<p>in the properties file:</p>\n<pre><code>spring.jpa.show-sql=true\n</code></pre>\n<p>in the service:</p>\n<pre><code>@Service\n@Transactional(readOnly = true)\n@Slf4j\n@CacheConfig(cacheNames = {&quot;dogsInHouse&quot;})\npublic class DogsInHouseService {\n\n    @Cacheable(&quot;dogsInHouse&quot;)\n    public DogsInHouse findDogHouseEnFromDB (String key) {\n        return dogsEnRepository.findByNameAndLangIs(key);\n    }\n}\n</code></pre>\n<p>But I always see a select query in the console. But I don't see the cache logs.</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":9990,"page":97,"page_size":100}
