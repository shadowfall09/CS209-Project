{"items":[{"tags":["java","spring","spring-boot","spring-security"],"answers":[{"comments":[{"owner":{"account_id":1022283,"reputation":847,"user_id":1032315,"accept_rate":60,"display_name":"pengemizt"},"score":0,"creation_date":1671882063,"post_id":74887392,"comment_id":132192000,"body_markdown":"Yes exactly! I&#39;m not really sure but before Spring Boot 3.0, I&#39;m using exactly same method and the result is like I expected, the exception is returned to body with 400 error code instead 403 and empty response body for authenticated users. Is there any reason why this happen?","body":"Yes exactly! I&#39;m not really sure but before Spring Boot 3.0, I&#39;m using exactly same method and the result is like I expected, the exception is returned to body with 400 error code instead 403 and empty response body for authenticated users. Is there any reason why this happen?"},{"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"score":0,"creation_date":1673031760,"post_id":74887392,"comment_id":132413873,"body_markdown":"What exactly do you mean? The exception thrown is written into the body of the response? Wasn&#39;t that your original question? Could you please elaborate further?","body":"What exactly do you mean? The exception thrown is written into the body of the response? Wasn&#39;t that your original question? Could you please elaborate further?"}],"tags":[],"owner":{"account_id":19726215,"reputation":538,"user_id":14442758,"display_name":"Z-100"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671705956,"creation_date":1671705956,"answer_id":74887392,"question_id":74883874,"body_markdown":"If I understood you correctly, you want the exception-message shown in the return body of the request.\r\n\r\nI solved this problem by implementing a (global) [exception handler](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseEntityExceptionHandler.html).\r\n\r\n#### (Optional) Create a custom exception, extending some sort of other exception.\r\n```\r\npublic class ApiException extends RuntimeException {\r\n\r\n    // Not really needed here, as Throwable.java has a message too\r\n    // I added it for better readability\r\n\t@Getter\r\n\tprivate String message;\r\n\r\n\tpublic ApiException() {\r\n\t\tsuper();\r\n\t}\r\n\r\n\tpublic ApiException(String message) {\r\n\t\tthis.message = message;\r\n\t}\r\n\r\n\tpublic ApiException(String message, Throwable cause) {\r\n\t\tsuper(message, cause);\r\n\t}\r\n}\r\n```\r\n\r\n#### (Optional) A Wrapper, with custom information. (This is the object returned in the body).\r\n\r\n```\r\n// I&#39;ve used a record, as the wrapper simply has to store data\r\npublic record ApiError(String message, HttpStatus status, Throwable cause, ZonedDateTime timestamp) {}\r\n```\r\n\r\n#### The handler\r\n\r\nTo create the handler, you simply have to create a custom class, which extends the ```ResponseEntityExceptionHandler.java```\r\n\r\n```\r\n@ControllerAdvice\r\n@Order(Ordered.HIGHEST_PRECEDENCE)\r\npublic class ApiExceptionHandler extends ResponseEntityExceptionHandler {\r\n\r\n    // The annotation&#39;s value can be replaced by any exception.\r\n    // Use Throwable.class to handle **all** exceptions.\r\n    // For this example I used the previously created exception.\r\n\t@ExceptionHandler(value = { ApiException.class })\r\n\t@ResponseBody\r\n\t@ResponseStatus(HttpStatus.BAD_REQUEST)\r\n\tpublic ResponseEntity&lt;Object&gt; handleApiRequestException(ApiException e) {\r\n\r\n        // At this point, you can create the exception wrapper to create a\r\n        // formatted JSON-response, but you could also just get the info\r\n        // required from the exception and return that.\r\n\t\tApiError error = new ApiError(\r\n\t\t\t\te.getMessage(),\r\n\t\t\t\tHttpStatus.BAD_REQUEST,\r\n\t\t\t\tnull,\r\n\t\t\t\tZonedDateTime.now(ZoneId.of(&quot;Z&quot;))\r\n\t\t);\r\n\r\n\t\treturn new ResponseEntity&lt;&gt;(error, error.status());\r\n\t}\r\n}\r\n```\r\n\r\nAlso: To handle different kinds of exceptions differently, like e.g. you want a ApiException to return a 403 and a FooException to return a 404, just create another method inside of the handler and adjust it to your likings.\r\n\r\nI hope this helped!\r\n\r\nCheers","title":"Spring Rest Forbidden Access when hit Exception","body":"<p>If I understood you correctly, you want the exception-message shown in the return body of the request.</p>\n<p>I solved this problem by implementing a (global) <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/servlet/mvc/method/annotation/ResponseEntityExceptionHandler.html\" rel=\"nofollow noreferrer\">exception handler</a>.</p>\n<h4>(Optional) Create a custom exception, extending some sort of other exception.</h4>\n<pre><code>public class ApiException extends RuntimeException {\n\n    // Not really needed here, as Throwable.java has a message too\n    // I added it for better readability\n    @Getter\n    private String message;\n\n    public ApiException() {\n        super();\n    }\n\n    public ApiException(String message) {\n        this.message = message;\n    }\n\n    public ApiException(String message, Throwable cause) {\n        super(message, cause);\n    }\n}\n</code></pre>\n<h4>(Optional) A Wrapper, with custom information. (This is the object returned in the body).</h4>\n<pre><code>// I've used a record, as the wrapper simply has to store data\npublic record ApiError(String message, HttpStatus status, Throwable cause, ZonedDateTime timestamp) {}\n</code></pre>\n<h4>The handler</h4>\n<p>To create the handler, you simply have to create a custom class, which extends the <code>ResponseEntityExceptionHandler.java</code></p>\n<pre><code>@ControllerAdvice\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class ApiExceptionHandler extends ResponseEntityExceptionHandler {\n\n    // The annotation's value can be replaced by any exception.\n    // Use Throwable.class to handle **all** exceptions.\n    // For this example I used the previously created exception.\n    @ExceptionHandler(value = { ApiException.class })\n    @ResponseBody\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\n    public ResponseEntity&lt;Object&gt; handleApiRequestException(ApiException e) {\n\n        // At this point, you can create the exception wrapper to create a\n        // formatted JSON-response, but you could also just get the info\n        // required from the exception and return that.\n        ApiError error = new ApiError(\n                e.getMessage(),\n                HttpStatus.BAD_REQUEST,\n                null,\n                ZonedDateTime.now(ZoneId.of(&quot;Z&quot;))\n        );\n\n        return new ResponseEntity&lt;&gt;(error, error.status());\n    }\n}\n</code></pre>\n<p>Also: To handle different kinds of exceptions differently, like e.g. you want a ApiException to return a 403 and a FooException to return a 404, just create another method inside of the handler and adjust it to your likings.</p>\n<p>I hope this helped!</p>\n<p>Cheers</p>\n"}],"owner":{"account_id":1022283,"reputation":847,"user_id":1032315,"accept_rate":60,"display_name":"pengemizt"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":225,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671832152,"creation_date":1671679814,"question_id":74883874,"body_markdown":"I&#39;m using Spring Boot 3.0. The authorization just works as expected but when it hit `SomeException` like `MethodArgumentNotValidException` it just only show 403 Forbidden Access with empty body. Before I&#39;m using Spring Boot 3.0 everything just work as I&#39;m expected when hitting Exception like they give me the exception JSON result.\r\n\r\nSecurityConfiguration\r\n\r\n```java\r\n@Configuration\r\n@EnableWebSecurity\r\npublic class SecurityConfiguration {\r\n    @Bean\r\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\r\n        return authenticationConfiguration.getAuthenticationManager();\r\n    }\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain(HttpSecurity http, AuthenticationManager authenticationManager) throws Exception {\r\n        var secret = System.getProperty(&quot;app.secret&quot;);\r\n        var authorizationFilter = new AuthorizationFilter(secret);\r\n        var authenticationFilter = new AuthenticationFilter(secret, authenticationManager);\r\n        authenticationFilter.setFilterProcessesUrl(&quot;/login&quot;);\r\n        authenticationFilter.setPostOnly(true);\r\n\r\n        return http\r\n                .cors().and()\r\n                .csrf((csrf) -&gt; csrf.disable())\r\n\r\n                .sessionManagement((session) -&gt; session\r\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n                )\r\n\r\n                .authorizeHttpRequests((authorize) -&gt; authorize\r\n                        .requestMatchers(&quot;/login/**&quot;, &quot;/trackers/camera/**&quot;).permitAll()\r\n                        .requestMatchers(&quot;/sites/**&quot;).hasAnyRole(Role.OWNER.name())\r\n                        .anyRequest().authenticated()\r\n                )\r\n\r\n                .addFilter(authenticationFilter)\r\n                .addFilterBefore(authorizationFilter, UsernamePasswordAuthenticationFilter.class)\r\n\r\n                .build();\r\n    }\r\n\r\n    @Bean\r\n    public CorsConfigurationSource corsConfigurationSource() {\r\n        var config = new CorsConfiguration();\r\n\r\n        var all = Arrays.asList(&quot;*&quot;);\r\n        config.setAllowedOrigins(all);\r\n        config.setAllowedHeaders(all);\r\n        config.setAllowedMethods(all);\r\n        config.setExposedHeaders(all);\r\n\r\n        var source = new UrlBasedCorsConfigurationSource();\r\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\r\n\r\n        return source;\r\n    }\r\n\r\n}\r\n```\r\n\r\nAuthenticationFilter\r\n```java\r\n@RequiredArgsConstructor\r\npublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\r\n\r\n    private final String secretToken;\r\n\r\n    private final AuthenticationManager authenticationManager;\r\n\r\n    @Override\r\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\r\n        String username, password;\r\n\r\n        try {\r\n            var requestMap = new ObjectMapper().readValue(request.getInputStream(), LoginRequest.class);\r\n            username = requestMap.getUsername();\r\n            password = requestMap.getPassword();\r\n        } catch (Exception e) {\r\n            throw new AuthenticationServiceException(e.getMessage(), e);\r\n        }\r\n\r\n        var token = new UsernamePasswordAuthenticationToken(username, password);\r\n        return authenticationManager.authenticate(token);\r\n    }\r\n\r\n    @Override\r\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\r\n        var user = (UserDetails) authResult.getPrincipal();\r\n        var algorithm = Algorithm.HMAC512(secretToken.getBytes());\r\n\r\n        var token = JWT.create()\r\n                .withSubject(user.getUsername())\r\n                .withIssuer(request.getRequestURL().toString())\r\n                .withClaim(&quot;roles&quot;, user.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\r\n                .sign(algorithm);\r\n\r\n        var jsonMap = new HashMap&lt;String, String&gt;();\r\n        jsonMap.put(&quot;token&quot;, token);\r\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\r\n\r\n        new ObjectMapper().writeValue(response.getOutputStream(), jsonMap);\r\n        response.flushBuffer();\r\n    }\r\n}\r\n\r\n```\r\n\r\nAuthorizationFilter\r\n\r\n```java\r\n@RequiredArgsConstructor\r\npublic class AuthorizationFilter extends OncePerRequestFilter {\r\n    private final String secretToken;\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\r\n        var authentication = request.getHeader(HttpHeaders.AUTHORIZATION);\r\n\r\n        if(authentication != null) {\r\n            if(authentication.startsWith(&quot;Bearer&quot;)) {\r\n                var token = authentication.substring(&quot;Bearer &quot;.length());\r\n                var algorithm = Algorithm.HMAC512(secretToken.getBytes());\r\n                var verifier = JWT.require(algorithm).build();\r\n\r\n                var message = verifier.verify(token);\r\n                var subject = message.getSubject();\r\n                var roles = message.getClaim(&quot;roles&quot;).asArray(String.class);\r\n                var authorities = new ArrayList&lt;SimpleGrantedAuthority&gt;();\r\n                Arrays.stream(roles).forEach(role -&gt; authorities.add(new SimpleGrantedAuthority(role)));\r\n\r\n                var authenticationToken = new UsernamePasswordAuthenticationToken(subject, token, authorities);\r\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n            } else if(authentication.startsWith(&quot;Basic&quot;)) {\r\n                var token = authentication.substring(&quot;Basic &quot;.length());\r\n                var bundle = new String(Base64.getDecoder().decode(token)).split(&quot;:&quot;, 2);\r\n                if(bundle.length == 2 &amp;&amp; bundle[0].equals(System.getProperty(&quot;app.camera.username&quot;)) &amp;&amp; bundle[1].equals(System.getProperty(&quot;app.camera.password&quot;))) {\r\n                    var authenticationToken = new UsernamePasswordAuthenticationToken(&quot;camera1&quot;, null, Arrays.asList(new SimpleGrantedAuthority(Role.USER.getAuthority())));\r\n                    SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n                }\r\n            }\r\n        }\r\n\r\n        filterChain.doFilter(request, response);\r\n    }\r\n}\r\n```","title":"Spring Rest Forbidden Access when hit Exception","body":"<p>I'm using Spring Boot 3.0. The authorization just works as expected but when it hit <code>SomeException</code> like <code>MethodArgumentNotValidException</code> it just only show 403 Forbidden Access with empty body. Before I'm using Spring Boot 3.0 everything just work as I'm expected when hitting Exception like they give me the exception JSON result.</p>\n<p>SecurityConfiguration</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class SecurityConfiguration {\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http, AuthenticationManager authenticationManager) throws Exception {\n        var secret = System.getProperty(&quot;app.secret&quot;);\n        var authorizationFilter = new AuthorizationFilter(secret);\n        var authenticationFilter = new AuthenticationFilter(secret, authenticationManager);\n        authenticationFilter.setFilterProcessesUrl(&quot;/login&quot;);\n        authenticationFilter.setPostOnly(true);\n\n        return http\n                .cors().and()\n                .csrf((csrf) -&gt; csrf.disable())\n\n                .sessionManagement((session) -&gt; session\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                )\n\n                .authorizeHttpRequests((authorize) -&gt; authorize\n                        .requestMatchers(&quot;/login/**&quot;, &quot;/trackers/camera/**&quot;).permitAll()\n                        .requestMatchers(&quot;/sites/**&quot;).hasAnyRole(Role.OWNER.name())\n                        .anyRequest().authenticated()\n                )\n\n                .addFilter(authenticationFilter)\n                .addFilterBefore(authorizationFilter, UsernamePasswordAuthenticationFilter.class)\n\n                .build();\n    }\n\n    @Bean\n    public CorsConfigurationSource corsConfigurationSource() {\n        var config = new CorsConfiguration();\n\n        var all = Arrays.asList(&quot;*&quot;);\n        config.setAllowedOrigins(all);\n        config.setAllowedHeaders(all);\n        config.setAllowedMethods(all);\n        config.setExposedHeaders(all);\n\n        var source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, config);\n\n        return source;\n    }\n\n}\n</code></pre>\n<p>AuthenticationFilter</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\npublic class AuthenticationFilter extends UsernamePasswordAuthenticationFilter {\n\n    private final String secretToken;\n\n    private final AuthenticationManager authenticationManager;\n\n    @Override\n    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response) throws AuthenticationException {\n        String username, password;\n\n        try {\n            var requestMap = new ObjectMapper().readValue(request.getInputStream(), LoginRequest.class);\n            username = requestMap.getUsername();\n            password = requestMap.getPassword();\n        } catch (Exception e) {\n            throw new AuthenticationServiceException(e.getMessage(), e);\n        }\n\n        var token = new UsernamePasswordAuthenticationToken(username, password);\n        return authenticationManager.authenticate(token);\n    }\n\n    @Override\n    protected void successfulAuthentication(HttpServletRequest request, HttpServletResponse response, FilterChain chain, Authentication authResult) throws IOException, ServletException {\n        var user = (UserDetails) authResult.getPrincipal();\n        var algorithm = Algorithm.HMAC512(secretToken.getBytes());\n\n        var token = JWT.create()\n                .withSubject(user.getUsername())\n                .withIssuer(request.getRequestURL().toString())\n                .withClaim(&quot;roles&quot;, user.getAuthorities().stream().map(GrantedAuthority::getAuthority).collect(Collectors.toList()))\n                .sign(algorithm);\n\n        var jsonMap = new HashMap&lt;String, String&gt;();\n        jsonMap.put(&quot;token&quot;, token);\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n\n        new ObjectMapper().writeValue(response.getOutputStream(), jsonMap);\n        response.flushBuffer();\n    }\n}\n\n</code></pre>\n<p>AuthorizationFilter</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\npublic class AuthorizationFilter extends OncePerRequestFilter {\n    private final String secretToken;\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        var authentication = request.getHeader(HttpHeaders.AUTHORIZATION);\n\n        if(authentication != null) {\n            if(authentication.startsWith(&quot;Bearer&quot;)) {\n                var token = authentication.substring(&quot;Bearer &quot;.length());\n                var algorithm = Algorithm.HMAC512(secretToken.getBytes());\n                var verifier = JWT.require(algorithm).build();\n\n                var message = verifier.verify(token);\n                var subject = message.getSubject();\n                var roles = message.getClaim(&quot;roles&quot;).asArray(String.class);\n                var authorities = new ArrayList&lt;SimpleGrantedAuthority&gt;();\n                Arrays.stream(roles).forEach(role -&gt; authorities.add(new SimpleGrantedAuthority(role)));\n\n                var authenticationToken = new UsernamePasswordAuthenticationToken(subject, token, authorities);\n                SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n            } else if(authentication.startsWith(&quot;Basic&quot;)) {\n                var token = authentication.substring(&quot;Basic &quot;.length());\n                var bundle = new String(Base64.getDecoder().decode(token)).split(&quot;:&quot;, 2);\n                if(bundle.length == 2 &amp;&amp; bundle[0].equals(System.getProperty(&quot;app.camera.username&quot;)) &amp;&amp; bundle[1].equals(System.getProperty(&quot;app.camera.password&quot;))) {\n                    var authenticationToken = new UsernamePasswordAuthenticationToken(&quot;camera1&quot;, null, Arrays.asList(new SimpleGrantedAuthority(Role.USER.getAuthority())));\n                    SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n                }\n            }\n        }\n\n        filterChain.doFilter(request, response);\n    }\n}\n</code></pre>\n"},{"tags":["java","swift","datetimeoffset","localdate"],"comments":[{"owner":{"account_id":8633322,"reputation":218443,"user_id":6464308,"display_name":"Laurenz Albe"},"score":0,"creation_date":1539849091,"post_id":52869194,"comment_id":92652251,"body_markdown":"Can you be a bit more specific?","body":"Can you be a bit more specific?"},{"owner":{"account_id":14487615,"reputation":43,"user_id":10522610,"display_name":"gke"},"score":0,"creation_date":1539849950,"post_id":52869194,"comment_id":92652688,"body_markdown":"Updated.  Does this help?","body":"Updated.  Does this help?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1539851412,"post_id":52869194,"comment_id":92653500,"body_markdown":"It might be good to have a (simplified) example of what your JSON looks like?","body":"It might be good to have a (simplified) example of what your JSON looks like?"}],"answers":[{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1539906260,"post_id":52869747,"comment_id":92681297,"body_markdown":"The `LocalDateTime` class in Java represents a date and a time-of-day without any concept of time zone nor offset-from-UTC. So it does *not* represent a moment, is *not* a point on the timeline.","body":"The <code>LocalDateTime</code> class in Java represents a date and a time-of-day without any concept of time zone nor offset-from-UTC. So it does <i>not</i> represent a moment, is <i>not</i> a point on the timeline."},{"owner":{"account_id":1810076,"reputation":9969,"user_id":1646335,"display_name":"Andreas Oetjen"},"score":0,"creation_date":1539928151,"post_id":52869747,"comment_id":92685906,"body_markdown":"@BasilBourque I was talking about the Foundation `Date` class, not about any Java classes. `Date` in fact is a point in time.","body":"@BasilBourque I was talking about the Foundation <code>Date</code> class, not about any Java classes. <code>Date</code> in fact is a point in time."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1539929742,"post_id":52869747,"comment_id":92686431,"body_markdown":"That’s my point, the title of the Question asks partly about Java `LocalDateTime`. This Answer does not address that part.","body":"That’s my point, the title of the Question asks partly about Java <code>LocalDateTime</code>. This Answer does not address that part."}],"tags":[],"owner":{"account_id":1810076,"reputation":9969,"user_id":1646335,"display_name":"Andreas Oetjen"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1539850544,"creation_date":1539850544,"answer_id":52869747,"question_id":52869194,"body_markdown":"Swift uses the `Date` struct to store a point in time. This is always stored in `UTC`. If you want the local date time, you either work with `Calendar` or with `DateFormatter`, like in this example:\r\n\r\n    import Foundation\r\n\r\n    let date = Date();\r\n\r\n    let dateFormatter = DateFormatter()\r\n    dateFormatter.timeStyle = .medium \r\n    dateFormatter.dateStyle = .none // ignore date\r\n    dateFormatter.timeZone = TimeZone(secondsFromGMT: 2*60*60)\r\n    let localDate = dateFormatter.string(from:date)\r\n\r\n    print(&quot;UTC Time: \\(date)&quot;)  // 2018-10-18 08:15:07 +0000\r\n    print(&quot;Local Time: \\(localDate)&quot;) // 10:15:07 AM\r\n\r\nThere are multiple ways to convert `Date` into someting local, just use a search engine of your choice","title":"Java LocalDateTime/ OffsetDateTime to Swift 4","body":"<p>Swift uses the <code>Date</code> struct to store a point in time. This is always stored in <code>UTC</code>. If you want the local date time, you either work with <code>Calendar</code> or with <code>DateFormatter</code>, like in this example:</p>\n\n<pre><code>import Foundation\n\nlet date = Date();\n\nlet dateFormatter = DateFormatter()\ndateFormatter.timeStyle = .medium \ndateFormatter.dateStyle = .none // ignore date\ndateFormatter.timeZone = TimeZone(secondsFromGMT: 2*60*60)\nlet localDate = dateFormatter.string(from:date)\n\nprint(\"UTC Time: \\(date)\")  // 2018-10-18 08:15:07 +0000\nprint(\"Local Time: \\(localDate)\") // 10:15:07 AM\n</code></pre>\n\n<p>There are multiple ways to convert <code>Date</code> into someting local, just use a search engine of your choice</p>\n"},{"tags":[],"owner":{"account_id":8258676,"reputation":973,"user_id":6210973,"display_name":"Mick"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671831217,"creation_date":1671831217,"answer_id":74904145,"question_id":52869194,"body_markdown":"Since Java&#39;s LocalDateTime is &quot;just a container&quot; for storing local date and time values, I recently copied this idea from Java and created a Swift version: https://github.com/hoereth/LocalDateTime","title":"Java LocalDateTime/ OffsetDateTime to Swift 4","body":"<p>Since Java's LocalDateTime is &quot;just a container&quot; for storing local date and time values, I recently copied this idea from Java and created a Swift version: <a href=\"https://github.com/hoereth/LocalDateTime\" rel=\"nofollow noreferrer\">https://github.com/hoereth/LocalDateTime</a></p>\n"}],"owner":{"account_id":14487615,"reputation":43,"user_id":10522610,"display_name":"gke"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1319,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":52869747,"answer_count":2,"score":4,"last_activity_date":1671831217,"creation_date":1539848397,"question_id":52869194,"body_markdown":"What&#39;s the equivalent of LocalDateTime and OffsetDateTime in Swift 4?\r\n\r\nI am trying to encode Java dates and decode them in Swift using Json.  It seems like there is only one Date object in Swift. ","title":"Java LocalDateTime/ OffsetDateTime to Swift 4","body":"<p>What's the equivalent of LocalDateTime and OffsetDateTime in Swift 4?</p>\n\n<p>I am trying to encode Java dates and decode them in Swift using Json.  It seems like there is only one Date object in Swift. </p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - 退した"},"score":1,"creation_date":1671835884,"post_id":74903842,"comment_id":132187251,"body_markdown":"This is no way to make a clock. Instead of `while(true) {`, use a Timer thread. [Read this](https://www.educba.com/javafx-timer/). Also read up on the **Clip** class.","body":"This is no way to make a clock. Instead of <code>while(true) {</code>, use a Timer thread. <a href=\"https://www.educba.com/javafx-timer/\" rel=\"nofollow noreferrer\">Read this</a>. Also read up on the <b>Clip</b> class."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1671842986,"post_id":74903842,"comment_id":132188157,"body_markdown":"@DevilsHnd A timer here is not a good approach. It unnecessarily creates additional threads and the.l code becomes more convoluted to make sure UI updates occur on the correct thread. The animation API is the preferred approach here.","body":"@DevilsHnd A timer here is not a good approach. It unnecessarily creates additional threads and the.l code becomes more convoluted to make sure UI updates occur on the correct thread. The animation API is the preferred approach here."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1672119284,"post_id":74903842,"comment_id":132223519,"body_markdown":"https://stackoverflow.com/questions/60226658/trying-to-stop-a-single-thread-out-of-multiple-running-at-the-same-time-in-java/60234199#60234199","body":"<a href=\"https://stackoverflow.com/questions/60226658/trying-to-stop-a-single-thread-out-of-multiple-running-at-the-same-time-in-java/60234199#60234199\" title=\"trying to stop a single thread out of multiple running at the same time in java\">stackoverflow.com/questions/60226658/&hellip;</a>"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1672119328,"post_id":74903842,"comment_id":132223527,"body_markdown":"https://stackoverflow.com/questions/50766244/creating-a-timer-that-shows-the-time-in-hhmmss-format-javafx/50774740#50774740","body":"<a href=\"https://stackoverflow.com/questions/50766244/creating-a-timer-that-shows-the-time-in-hhmmss-format-javafx/50774740#50774740\" title=\"creating a timer that shows the time in hhmmss format javafx\">stackoverflow.com/questions/50766244/&hellip;</a>"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1672119387,"post_id":74903842,"comment_id":132223538,"body_markdown":"https://stackoverflow.com/questions/50626831/how-to-set-up-two-timelines-to-one-app/50627639#50627639","body":"<a href=\"https://stackoverflow.com/questions/50626831/how-to-set-up-two-timelines-to-one-app/50627639#50627639\" title=\"how to set up two timelines to one app\">stackoverflow.com/questions/50626831/&hellip;</a>"}],"owner":{"account_id":25937798,"reputation":21,"user_id":19657758,"display_name":"AKL-R"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671828730,"answer_count":0,"score":0,"last_activity_date":1671830604,"creation_date":1671828141,"question_id":74903842,"body_markdown":"I am a student, I am creating a clock for an application, I added a Label in scene builder assigned the clock to it and added the following java code:\r\n~~~java\r\n public void initialize() throws FileNotFoundException, InterruptedException {\r\n\r\n\r\n   var now = LocalTime.now();\r\n   DateTimeFormatter dft =DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;);\r\n   \r\nlabelclock.setText(LocalTime.now().format(dft));\r\n\r\n~~~\r\n\r\n\r\nI want to make the clock tick and tried in many ways but it didn&#39;t work.\r\n\r\nI also tried creating the clock in another way and got the same result.\r\n\r\n~~~java\r\n public void setTime() {\r\n\r\n       while (true) {\r\n\r\n       time = timeFormat.format(calendar.getInstance().getTime());\r\n       labelclock.setText(time);\r\n         try {\r\n          Thread.sleep(1000);\r\n              } catch (InterruptedException e) {\r\n          e.printStackTrace();\r\n              }\r\n             }\r\n            }\r\n\r\n~~~","title":"Make the clock tick in (java/ javaFX)","body":"<p>I am a student, I am creating a clock for an application, I added a Label in scene builder assigned the clock to it and added the following java code:</p>\n<pre class=\"lang-java prettyprint-override\"><code> public void initialize() throws FileNotFoundException, InterruptedException {\n\n\n   var now = LocalTime.now();\n   DateTimeFormatter dft =DateTimeFormatter.ofPattern(&quot;HH:mm:ss&quot;);\n   \nlabelclock.setText(LocalTime.now().format(dft));\n\n</code></pre>\n<p>I want to make the clock tick and tried in many ways but it didn't work.</p>\n<p>I also tried creating the clock in another way and got the same result.</p>\n<pre class=\"lang-java prettyprint-override\"><code> public void setTime() {\n\n       while (true) {\n\n       time = timeFormat.format(calendar.getInstance().getTime());\n       labelclock.setText(time);\n         try {\n          Thread.sleep(1000);\n              } catch (InterruptedException e) {\n          e.printStackTrace();\n              }\n             }\n            }\n\n</code></pre>\n"},{"tags":["java","for-loop","if-statement","double","calculation"],"comments":[{"owner":{"account_id":6714862,"reputation":16230,"user_id":5176992,"display_name":"Eritrean"},"score":1,"creation_date":1671826494,"post_id":74903577,"comment_id":132185549,"body_markdown":"Store the highest input in a separate field and do the comparison after the for loop where you take the inputs and based on them calculate an average. Side note __**3 points above the averag**__ sounds as if you need to substract the average from the highest input and not do a modulo operation","body":"Store the highest input in a separate field and do the comparison after the for loop where you take the inputs and based on them calculate an average. Side note <b><i>*3 points above the averag*</i></b> sounds as if you need to substract the average from the highest input and not do a modulo operation"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671826505,"post_id":74903577,"comment_id":132185553,"body_markdown":"I think you need to save the printing and also the detection of cheating till after the loop (not inside it). Only after all numers have been input can you correctly calculate the average (so-called weighted average). This also means that underway in addition to the sum you will also need to keep track of the highest number entered.","body":"I think you need to save the printing and also the detection of cheating till after the loop (not inside it). Only after all numers have been input can you correctly calculate the average (so-called weighted average). This also means that underway in addition to the sum you will also need to keep track of the highest number entered."},{"owner":{"account_id":341129,"reputation":39091,"user_id":671543,"accept_rate":55,"display_name":"njzk2"},"score":0,"creation_date":1671829549,"post_id":74903577,"comment_id":132186200,"body_markdown":"what do you think `number%result` does ?","body":"what do you think <code>number%result</code> does ?"}],"answers":[{"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671828199,"post_id":74903805,"comment_id":132185902,"body_markdown":"Thanks for the answer. A bit of nitpicking: 1. When in the average the numbers count 1x, 2x, 3x and 4x, you need to divide by the sum of those numbers, 1 + 2 + 3 + 4 = 10, not by 4. // 2. Another option is to keep track of the highest number entered so far, then you don’t need the array. // 3. Incorrectly using `%` instead of `-` may have been a typo. // Also as said in the comments I believe that the calculation of average and printing need to go outside the loop.","body":"Thanks for the answer. A bit of nitpicking: 1. When in the average the numbers count 1x, 2x, 3x and 4x, you need to divide by the sum of those numbers, 1 + 2 + 3 + 4 = 10, not by 4. // 2. Another option is to keep track of the highest number entered so far, then you don’t need the array. // 3. Incorrectly using <code>%</code> instead of <code>-</code> may have been a typo. // Also as said in the comments I believe that the calculation of average and printing need to go outside the loop."},{"owner":{"account_id":27239654,"reputation":11,"user_id":20766030,"display_name":"JavaStudent"},"score":0,"creation_date":1671831807,"post_id":74903805,"comment_id":132186623,"body_markdown":"Can it also be done without an array? because that is the way I am trying to solve it.","body":"Can it also be done without an array? because that is the way I am trying to solve it."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671863084,"post_id":74903805,"comment_id":132189648,"body_markdown":"*Can it also be done without an array?* Yes, @JavaStudent, it certainly can. Leave out the array, keep `number = sc.nextDouble()` from your own code and do the comparison as `if (highestNum &lt; number) {`. You will need to adapt a little further, but there’s really no need for the array.","body":"<i>Can it also be done without an array?</i> Yes, @JavaStudent, it certainly can. Leave out the array, keep <code>number = sc.nextDouble()</code> from your own code and do the comparison as <code>if (highestNum &lt; number) {</code>. You will need to adapt a little further, but there’s really no need for the array."}],"tags":[],"owner":{"account_id":26712766,"reputation":1,"user_id":20317828,"display_name":"Mykyta"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671827981,"creation_date":1671827771,"answer_id":74903805,"question_id":74903577,"body_markdown":"1) to calculate average you need the sum(*sum* variable) divide by amount of numbers(4 in your case) \r\n2) you need to use array to find the highest number\r\n3) the if logic is incorrect \r\n\r\nI suggest:\r\n    \r\n    public class Main{\r\n        public static void main(String[] args) {\r\n            Scanner sc = new Scanner(System.in);\r\n            double sum;\r\n            double[] number = new double[4];\r\n            double result = 0;\r\n            double highestNum = 0;\r\n    \r\n            for (int i = 0; i &lt;= 3; i++) {\r\n                number[i] = sc.nextDouble();\r\n                sum += number[i] * i;\r\n                if(highestNum&lt;number[i]){\r\n                     highestNum = number[i];\r\n                     }\r\n                }\r\n                double aveNum = sum/4;\r\n                   \r\n                if ((highestNum-aveNum)&gt; 3) {\r\n                    System.out.println(&quot;cheater!\\n&quot; + &quot;-1.0&quot;);\r\n    \r\n                } else{\r\n                    System.out.printf(&quot;%3.1f&quot;, result / 10);\r\n                }\r\n            }\r\n        }\r\n\r\n","title":"How to calculate the highest number and compare it to the average?","body":"<ol>\n<li>to calculate average you need the sum(<em>sum</em> variable) divide by amount of numbers(4 in your case)</li>\n<li>you need to use array to find the highest number</li>\n<li>the if logic is incorrect</li>\n</ol>\n<p>I suggest:</p>\n<pre><code>public class Main{\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        double sum;\n        double[] number = new double[4];\n        double result = 0;\n        double highestNum = 0;\n\n        for (int i = 0; i &lt;= 3; i++) {\n            number[i] = sc.nextDouble();\n            sum += number[i] * i;\n            if(highestNum&lt;number[i]){\n                 highestNum = number[i];\n                 }\n            }\n            double aveNum = sum/4;\n               \n            if ((highestNum-aveNum)&gt; 3) {\n                System.out.println(&quot;cheater!\\n&quot; + &quot;-1.0&quot;);\n\n            } else{\n                System.out.printf(&quot;%3.1f&quot;, result / 10);\n            }\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":12743722,"reputation":19966,"user_id":12567365,"display_name":"andrewJames"},"score":1,"creation_date":1671831804,"post_id":74903958,"comment_id":132186621,"body_markdown":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value. For reference: [Explaining entirely code-based answers](https://meta.stackoverflow.com/q/392712/12567365)","body":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value. For reference: <a href=\"https://meta.stackoverflow.com/q/392712/12567365\">Explaining entirely code-based answers</a>"}],"tags":[],"owner":{"account_id":17920962,"reputation":182,"user_id":13250060,"display_name":"Yannick"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671830384,"creation_date":1671829254,"answer_id":74903958,"question_id":74903577,"body_markdown":"\r\n            double sum;\r\n            double number;\r\n            double result = 0;\r\n            double max = 0;\r\n\r\n            //Compute the sum\r\n            for (int i = 1; i &lt; 5; i++)\r\n            {\r\n                number = sc.nextDouble();\r\n                sum = number * i;\r\n                result += sum;\r\n\r\n                if (max &lt; number)\r\n                    max = number;\r\n            }\r\n\r\n            //Average\r\n            double average = Math.Round((double)result / 10, 1);\r\n\r\n            //Compare to data\r\n            if (max &gt; average + 3)\r\n                System.out.println(&quot;cheater!\\n&quot; + &quot;-1.0&quot;);\r\n            else\r\n                System.out.printf(&quot;%3.1f&quot;, average);","title":"How to calculate the highest number and compare it to the average?","body":"<pre><code>        double sum;\n        double number;\n        double result = 0;\n        double max = 0;\n\n        //Compute the sum\n        for (int i = 1; i &lt; 5; i++)\n        {\n            number = sc.nextDouble();\n            sum = number * i;\n            result += sum;\n\n            if (max &lt; number)\n                max = number;\n        }\n\n        //Average\n        double average = Math.Round((double)result / 10, 1);\n\n        //Compare to data\n        if (max &gt; average + 3)\n            System.out.println(&quot;cheater!\\n&quot; + &quot;-1.0&quot;);\n        else\n            System.out.printf(&quot;%3.1f&quot;, average);\n</code></pre>\n"}],"owner":{"account_id":27239654,"reputation":11,"user_id":20766030,"display_name":"JavaStudent"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":127,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74903958,"answer_count":2,"score":0,"last_activity_date":1671830384,"creation_date":1671825688,"question_id":74903577,"body_markdown":"This is what I am trying to do:\r\n\r\nthe user needs to enter 4 numbers (already done)  \r\nthen I want to calculate the average of those 4 digits but The first digit needs to counts 1x, the second digit 2x, the third digit 3x and the fourth digit 4x. (already done)\r\n\r\n(this is the part where i am stuck)  \r\nAlso calculate the highest number. If the highest grade is more than 3 points above the average, the screen will show:\r\n\r\n```\r\ncheater!\r\n-1\r\n```\r\n\r\nIf the highest grade is less than 3 points above the average, the actual average will appear on the screen, rounded to 1 decimal place.\r\n\r\n\r\n```\r\npublic class Main{\r\n    public static void main(String[] args) {\r\n        Scanner sc = new Scanner(System.in);\r\n        int i;\r\n        double sum;\r\n        double number;\r\n        double result = 0;\r\n\r\n        for (i = 1; i &lt; 5; i++) {\r\n            number = sc.nextDouble();\r\n            sum = number * i;\r\n            result += sum;\r\n            if (number%result &gt; 3) {\r\n                System.out.println(&quot;cheater!\\n&quot; + &quot;-1.0&quot;);\r\n\r\n            } else{\r\n                System.out.printf(&quot;%3.1f&quot;, result / 10);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAs you can see above here, this is what I got for now. Don&#39;t know exactly what I am doing wrong here?\r\n\r\n\r\nThese are my input/results:\r\n\r\n```\r\n5.5\r\n6.1\r\n7.3\r\n5.8\r\n\r\n0.6cheater!\r\n-1.0\r\ncheater!\r\n-1.0\r\ncheater!\r\n-1.0\r\n```\r\n\r\nExpected results:\r\n\r\nSample Input 1:\r\n\r\n```\r\n5.5\r\n6.1\r\n7.3\r\n5.8\r\n```\r\n\r\nSample Output 1:\r\n\r\n```\r\n6.3\r\n```\r\n\r\nSample Input 2:\r\n\r\n```\r\n3.0\r\n5.4\r\n9.8\r\n2.5\r\n```\r\n\r\nSample Output 2:\r\n\r\n```\r\ncheater!\r\n-1.0\r\n```\r\n","title":"How to calculate the highest number and compare it to the average?","body":"<p>This is what I am trying to do:</p>\n<p>the user needs to enter 4 numbers (already done)<br />\nthen I want to calculate the average of those 4 digits but The first digit needs to counts 1x, the second digit 2x, the third digit 3x and the fourth digit 4x. (already done)</p>\n<p>(this is the part where i am stuck)<br />\nAlso calculate the highest number. If the highest grade is more than 3 points above the average, the screen will show:</p>\n<pre><code>cheater!\n-1\n</code></pre>\n<p>If the highest grade is less than 3 points above the average, the actual average will appear on the screen, rounded to 1 decimal place.</p>\n<pre><code>public class Main{\n    public static void main(String[] args) {\n        Scanner sc = new Scanner(System.in);\n        int i;\n        double sum;\n        double number;\n        double result = 0;\n\n        for (i = 1; i &lt; 5; i++) {\n            number = sc.nextDouble();\n            sum = number * i;\n            result += sum;\n            if (number%result &gt; 3) {\n                System.out.println(&quot;cheater!\\n&quot; + &quot;-1.0&quot;);\n\n            } else{\n                System.out.printf(&quot;%3.1f&quot;, result / 10);\n            }\n        }\n    }\n}\n</code></pre>\n<p>As you can see above here, this is what I got for now. Don't know exactly what I am doing wrong here?</p>\n<p>These are my input/results:</p>\n<pre><code>5.5\n6.1\n7.3\n5.8\n\n0.6cheater!\n-1.0\ncheater!\n-1.0\ncheater!\n-1.0\n</code></pre>\n<p>Expected results:</p>\n<p>Sample Input 1:</p>\n<pre><code>5.5\n6.1\n7.3\n5.8\n</code></pre>\n<p>Sample Output 1:</p>\n<pre><code>6.3\n</code></pre>\n<p>Sample Input 2:</p>\n<pre><code>3.0\n5.4\n9.8\n2.5\n</code></pre>\n<p>Sample Output 2:</p>\n<pre><code>cheater!\n-1.0\n</code></pre>\n"},{"tags":["java","spring-security","spring-boot-security"],"answers":[{"tags":[],"owner":{"account_id":15806948,"reputation":150,"user_id":11405229,"display_name":"Romain Lavabre"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671829967,"creation_date":1671829967,"answer_id":74904027,"question_id":74901447,"body_markdown":"Ok, I found a solution that seems to work.\r\n\r\nAdding this line fixes the problem :\r\n\r\n```java\r\n.dispatcherTypeMatchers( DispatcherType.ERROR ).permitAll()\r\n```\r\n\r\nComplete code :\r\n\r\n```java\r\n@Bean\r\n    public SecurityFilterChain filterChain( final HttpSecurity http ) throws Exception {\r\n        http\r\n                .cors().and().csrf().disable()\r\n                .sessionManagement().sessionCreationPolicy( SessionCreationPolicy.STATELESS )\r\n                .and()\r\n                .anonymous()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .dispatcherTypeMatchers( DispatcherType.ERROR ).permitAll()\r\n                .requestMatchers( HttpMethod.OPTIONS ).permitAll()\r\n                .requestMatchers( &quot;/guest/**&quot; ).permitAll()\r\n                .requestMatchers( &quot;/system/**&quot; ).hasRole( new SecurityRole( Role.ROLE_SYSTEM ).toString() )\r\n                .requestMatchers( &quot;/admin/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_ADMIN ).toString() )\r\n                .requestMatchers( &quot;/identity/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_IDENTITY ).toString() )\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .oauth2ResourceServer( OAuth2ResourceServerConfigurer::jwt );\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nDocumentation : https://docs.spring.io/spring-security/reference/servlet/authorization/authorize-http-requests.html","title":"All exceptions are converted to HTTP 401 on public endpoints","body":"<p>Ok, I found a solution that seems to work.</p>\n<p>Adding this line fixes the problem :</p>\n<pre class=\"lang-java prettyprint-override\"><code>.dispatcherTypeMatchers( DispatcherType.ERROR ).permitAll()\n</code></pre>\n<p>Complete code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\n    public SecurityFilterChain filterChain( final HttpSecurity http ) throws Exception {\n        http\n                .cors().and().csrf().disable()\n                .sessionManagement().sessionCreationPolicy( SessionCreationPolicy.STATELESS )\n                .and()\n                .anonymous()\n                .and()\n                .authorizeHttpRequests()\n                .dispatcherTypeMatchers( DispatcherType.ERROR ).permitAll()\n                .requestMatchers( HttpMethod.OPTIONS ).permitAll()\n                .requestMatchers( &quot;/guest/**&quot; ).permitAll()\n                .requestMatchers( &quot;/system/**&quot; ).hasRole( new SecurityRole( Role.ROLE_SYSTEM ).toString() )\n                .requestMatchers( &quot;/admin/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_ADMIN ).toString() )\n                .requestMatchers( &quot;/identity/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_IDENTITY ).toString() )\n                .anyRequest().authenticated()\n                .and()\n                .oauth2ResourceServer( OAuth2ResourceServerConfigurer::jwt );\n\n        return http.build();\n    }\n</code></pre>\n<p>Documentation : <a href=\"https://docs.spring.io/spring-security/reference/servlet/authorization/authorize-http-requests.html\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/reference/servlet/authorization/authorize-http-requests.html</a></p>\n"}],"owner":{"account_id":15806948,"reputation":150,"user_id":11405229,"display_name":"Romain Lavabre"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74904027,"answer_count":1,"score":0,"last_activity_date":1671829967,"creation_date":1671809986,"question_id":74901447,"body_markdown":"i have problem on spring boot starter security V3.0.0\r\n\r\nFor this configuration : \r\n\r\n```java\r\n\r\n    @Bean\r\n    public SecurityFilterChain filterChain( final HttpSecurity http ) throws Exception {\r\n        http\r\n                .cors().and().csrf().disable()\r\n                .sessionManagement().sessionCreationPolicy( SessionCreationPolicy.STATELESS )\r\n                .and()\r\n                .anonymous()\r\n                .and()\r\n                .authorizeHttpRequests()\r\n                .requestMatchers( HttpMethod.OPTIONS ).permitAll()\r\n                .requestMatchers( &quot;/system/**&quot; ).hasRole( new SecurityRole( Role.ROLE_SYSTEM ).toString() )\r\n                .requestMatchers( &quot;/admin/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_ADMIN ).toString() )\r\n                .requestMatchers( &quot;/identity/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_IDENTITY ).toString() )\r\n                .requestMatchers( &quot;/guest/**&quot; ).permitAll()\r\n                .anyRequest().authenticated()\r\n                .and()\r\n                .oauth2ResourceServer( OAuth2ResourceServerConfigurer::jwt );\r\n\r\n        return http.build();\r\n    }\r\n```\r\n\r\nAll exceptions thrown by &quot;/guest/**&quot; endpoint are converted to HTTP 401 whitout body.  Even when I issue an HTTP 409 with this class : \r\n\r\n```java\r\n@ResponseStatus( code = HttpStatus.CONFLICT )\r\npublic class HttpConflictException extends RuntimeException {\r\n    public HttpConflictException( String message ) {\r\n        super( message );\r\n    }\r\n}\r\n```\r\n\r\nIMPORTANT : When no exception is thrown, the query works\r\n\r\n\r\nIf this line \r\n\r\n```java\r\n.requestMatchers( &quot;/guest/**&quot; ).permitAll()\r\n```\r\nis replaced by this\r\n```java\r\n .requestMatchers( &quot;/**&quot; ).permitAll()\r\n```\r\nit works. But this option seems too dangerous. Am I not understanding something? I haven&#39;t seen anything in the documentation that can help with this issue.\r\n\r\nDependencies : \r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n    &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\r\n&lt;/dependency&gt;\r\n```\r\nThank you.","title":"All exceptions are converted to HTTP 401 on public endpoints","body":"<p>i have problem on spring boot starter security V3.0.0</p>\n<p>For this configuration :</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n    @Bean\n    public SecurityFilterChain filterChain( final HttpSecurity http ) throws Exception {\n        http\n                .cors().and().csrf().disable()\n                .sessionManagement().sessionCreationPolicy( SessionCreationPolicy.STATELESS )\n                .and()\n                .anonymous()\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers( HttpMethod.OPTIONS ).permitAll()\n                .requestMatchers( &quot;/system/**&quot; ).hasRole( new SecurityRole( Role.ROLE_SYSTEM ).toString() )\n                .requestMatchers( &quot;/admin/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_ADMIN ).toString() )\n                .requestMatchers( &quot;/identity/**&quot; ).hasRole( new SecurityRole( Role.ROLE_AUTH_IDENTITY ).toString() )\n                .requestMatchers( &quot;/guest/**&quot; ).permitAll()\n                .anyRequest().authenticated()\n                .and()\n                .oauth2ResourceServer( OAuth2ResourceServerConfigurer::jwt );\n\n        return http.build();\n    }\n</code></pre>\n<p>All exceptions thrown by &quot;/guest/**&quot; endpoint are converted to HTTP 401 whitout body.  Even when I issue an HTTP 409 with this class :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ResponseStatus( code = HttpStatus.CONFLICT )\npublic class HttpConflictException extends RuntimeException {\n    public HttpConflictException( String message ) {\n        super( message );\n    }\n}\n</code></pre>\n<p>IMPORTANT : When no exception is thrown, the query works</p>\n<p>If this line</p>\n<pre class=\"lang-java prettyprint-override\"><code>.requestMatchers( &quot;/guest/**&quot; ).permitAll()\n</code></pre>\n<p>is replaced by this</p>\n<pre class=\"lang-java prettyprint-override\"><code> .requestMatchers( &quot;/**&quot; ).permitAll()\n</code></pre>\n<p>it works. But this option seems too dangerous. Am I not understanding something? I haven't seen anything in the documentation that can help with this issue.</p>\n<p>Dependencies :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-oauth2-resource-server&lt;/artifactId&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-security-oauth2-jose&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Thank you.</p>\n"},{"tags":["java","parsing","jogl","wavefront"],"comments":[{"owner":{"account_id":207965,"reputation":3704,"user_id":458157,"accept_rate":75,"display_name":"gouessej"},"score":0,"creation_date":1671881623,"post_id":74904006,"comment_id":132191934,"body_markdown":"It has nothing to do with JOGL, your program expects a number and reads an empty string: &quot;at ImportedModel$ModelImporter.parseOBJ(ImportedModel.java:60)&quot;.","body":"It has nothing to do with JOGL, your program expects a number and reads an empty string: &quot;at ImportedModel$ModelImporter.parseOBJ(ImportedModel.java:60)&quot;&zwnj;&#8203;."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671888064,"post_id":74904006,"comment_id":132192846,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":27339043,"reputation":1,"user_id":20850012,"display_name":"Martin Freeman"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671829701,"creation_date":1671829701,"question_id":74904006,"body_markdown":"Hopefully someone can help me. I am trying to load a model I made in Blender into my JOGL program. I was able to manual models working and set up my window but there is something wrong with parsing the .obj wavefront file. No errors in my code that I can see, the ImportedModel class came from a textbook.\r\n\r\nHere is the code:\r\n\r\n    import com.jogamp.common.nio.Buffers;\r\n    import com.jogamp.opengl.*;\r\n    import com.jogamp.opengl.awt.GLCanvas;\r\n    import com.jogamp.opengl.util.Animator;\r\n    import org.joml.Matrix4f;\r\n    import org.joml.Vector2f;\r\n    import org.joml.Vector3f;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.event.KeyEvent;\r\n    import java.awt.event.KeyListener;\r\n    import java.nio.FloatBuffer;\r\n    import java.util.ArrayList;\r\n    import java.util.List;\r\n    \r\n    import static com.jogamp.opengl.GL.*;\r\n    \r\n    \r\n    \r\n    public class WalkingTour extends JFrame implements GLEventListener, KeyListener {\r\n    \r\n    \r\n    private static final int windowWidth = 800, windowHeight = 600;\r\n    private static final String windowTitle = &quot;Walking Tour&quot;;\r\n    private static final String vertexShaderFile = &quot;src/walkingtour-vertex.glsl&quot;,\r\n            fragmentShaderFile = &quot;src/walkingtour-fragment.glsl&quot;;\r\n    private final GLCanvas glCanvas;\r\n    private int renderingProgram;\r\n    private final int[] vao = new int[1];\r\n    private final int[] vbo = new int[6];\r\n    private final FloatBuffer values = Buffers.newDirectFloatBuffer(16);\r\n    private final Matrix4f pMat = new Matrix4f();  // perspective matrix\r\n    private final Matrix4f vMat = new Matrix4f();  // view matrix\r\n    private final Matrix4f mMat = new Matrix4f();  // model matrix\r\n    private final Matrix4f mvMat = new Matrix4f(); // model-view matrix\r\n    private int gTexture;\r\n    private ImportedModel myModel;\r\n    private int numObjVertices;\r\n    \r\n    private boolean keyPressedForward = false,\r\n            keyPressedBackward = false,\r\n            keyPressedMoveRight = false,\r\n            keyPressedMoveLeft = false,\r\n            keyPressedTurnRight = false,\r\n            keyPressedTurnLeft = false,\r\n            keyPressedSpace = false,\r\n            keyPressedControl = false,\r\n            keyPressedShift = false;\r\n    private final ArrayList&lt;Float&gt; vertexValues = new ArrayList&lt;&gt;();\r\n    private final ArrayList&lt;Float&gt; stVals = new ArrayList&lt;&gt;();\r\n    private final ArrayList&lt;Float&gt; normalValues = new ArrayList&lt;&gt;();\r\n    \r\n    \r\n    private final ArrayList&lt;Float&gt; triangleVerts = new ArrayList&lt;&gt;();\r\n    private final ArrayList&lt;Float&gt; textureCoordinates = new ArrayList&lt;&gt;();\r\n    private final ArrayList&lt;Float&gt; normals = new ArrayList&lt;&gt;();\r\n    \r\n    private List&lt;float[]&gt; vertices = new ArrayList&lt;float[]&gt;();\r\n    private List&lt;int[]&gt; faces =new ArrayList&lt;int[]&gt;();\r\n    \r\n    \r\n    \r\n    public WalkingTour() {\r\n        setTitle(windowTitle);\r\n        setSize(windowWidth, windowHeight);\r\n        glCanvas = new GLCanvas(new GLCapabilities(GLProfile.getMaxProgrammableCore(true)));\r\n        glCanvas.addGLEventListener(this);\r\n        this.add(glCanvas);\r\n        this.setVisible(true);\r\n        Animator animator = new Animator(glCanvas);\r\n        animator.start();\r\n    }\r\n    \r\n    public static void main(String[] args) {\r\n        new WalkingTour();\r\n    }\r\n    \r\n    \r\n    \r\n    @Override\r\n    public void init(GLAutoDrawable glAutoDrawable) {\r\n    \r\n        myModel = new ImportedModel(&quot;hwk5Model.obj&quot;);\r\n    \r\n        GL4 gl = (GL4) GLContext.getCurrentGL();\r\n    \r\n        numObjVertices = myModel.getNumVertices();\r\n        Vector3f[ ] vertices = myModel.getVertices();\r\n        Vector2f[ ] texCoords = myModel.getTexCoords();\r\n        Vector3f[ ] normals = myModel.getNormals();\r\n        float[ ] pvalues = new float[numObjVertices*3];        // vertex positions\r\n        float[ ] tvalues = new float[numObjVertices*2];        // texture coordinates\r\n        float[ ] nvalues = new float[numObjVertices*3];        // normal vectors\r\n    \r\n        for (int i=0; i&lt;numObjVertices; i++)\r\n        {   pvalues[i*3]   = (float) (vertices[i]).x();\r\n            pvalues[i*3+1]     = (float) (vertices[i]).y();\r\n            pvalues[i*3+2]  = (float) (vertices[i]).z();\r\n            tvalues[i*2]    = (float) (texCoords[i]).x();\r\n            tvalues[i*2+1]  = (float) (texCoords[i]).y();\r\n            nvalues[i*3]    = (float) (normals[i]).x();\r\n            nvalues[i*3+1]  = (float) (normals[i]).y();\r\n            nvalues[i*3+2]  = (float) (normals[i]).z();\r\n        }\r\n    \r\n        // VBO for vertex locations\r\n        gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[2]);\r\n        FloatBuffer vertBuf = Buffers.newDirectFloatBuffer(pvalues);\r\n        gl.glBufferData(GL_ARRAY_BUFFER, vertBuf.limit()*4, vertBuf, GL_STATIC_DRAW);\r\n    // VBO for texture coordinates\r\n        gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[3]);\r\n        FloatBuffer texBuf = Buffers.newDirectFloatBuffer(tvalues);\r\n        gl.glBufferData(GL_ARRAY_BUFFER, texBuf.limit()*4, texBuf, GL_STATIC_DRAW);\r\n    // VBO for normal vectors\r\n        gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[4]);\r\n        FloatBuffer norBuf = Buffers.newDirectFloatBuffer(nvalues);\r\n        gl.glBufferData(GL_ARRAY_BUFFER, norBuf.limit()*4,norBuf, GL_STATIC_DRAW);\r\n    \r\n    \r\n        renderingProgram = Utils.createShaderProgram(vertexShaderFile, fragmentShaderFile);\r\n        gTexture = Utils.loadTexture(&quot;groundTexture.jpeg&quot;);\r\n        gl.glActiveTexture(GL_TEXTURE0);\r\n        gl.glBindTexture(GL_TEXTURE_2D, gTexture);\r\n        \r\n    \r\n        float[] floor = {\r\n                -2000.0f, -50.0f, -2000.0f, -2000.0f, -50.0f, 2000.0f, 2000.0f, -50.0f, 2000.0f,\r\n                -2000.0f, -50.0f, -2000.0f, 2000.0f, -50.0f, -2000.0f, 2000.0f, -50.0f, 2000.0f,\r\n        };\r\n    \r\n        gl.glGenVertexArrays(vao.length, vao, 0);\r\n        gl.glBindVertexArray(vao[0]);\r\n        gl.glGenBuffers(vbo.length, vbo, 0);\r\n    \r\n        FloatBuffer corBuf = Buffers.newDirectFloatBuffer(floor);\r\n        gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);\r\n        gl.glBufferData(GL_ARRAY_BUFFER, corBuf.limit() * 4L, corBuf, GL_STATIC_DRAW);\r\n    \r\n        float[] textureCoords = {\r\n                0f, 1f, 0f, 0f, 1f, 0f,\r\n                0f, 1f, 1f, 1f, 1f, 0f\r\n        };\r\n    \r\n        FloatBuffer textureBuffer = Buffers.newDirectFloatBuffer(textureCoords);\r\n        gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[1]);\r\n        gl.glBufferData(GL_ARRAY_BUFFER, textureBuffer.limit() * 4L, textureBuffer, GL_STATIC_DRAW);\r\n    \r\n    \r\n        this.addKeyListener(this);\r\n    }\r\n    \r\n    @Override\r\n    public void dispose(GLAutoDrawable glAutoDrawable) {\r\n        this.removeKeyListener(this);\r\n    }\r\n    \r\n    @Override\r\n    public void display(GLAutoDrawable glAutoDrawable) {\r\n        GL4 gl = (GL4) GLContext.getCurrentGL();\r\n    \r\n        gl.glClear(GL_COLOR_BUFFER_BIT);\r\n        gl.glClear(GL_DEPTH_BUFFER_BIT);\r\n        gl.glUseProgram(renderingProgram);\r\n    \r\n        int mvLoc = gl.glGetUniformLocation(renderingProgram, &quot;mv_matrix&quot;);\r\n        int pLoc = gl.glGetUniformLocation(renderingProgram, &quot;p_matrix&quot;);\r\n    \r\n        float aspect = (float) glCanvas.getWidth() / (float) glCanvas.getHeight();\r\n        pMat.identity().setPerspective((float) Math.toRadians(60.0f), aspect, 0.1f, 5000.0f);\r\n        gl.glUniformMatrix4fv(pLoc, 1, false, pMat.get(values));\r\n    \r\n        vMat.translate(0f,0f,0f);\r\n    \r\n        mvMat.identity();\r\n        mvMat.mul(vMat);\r\n        mvMat.mul(mMat);\r\n    \r\n        gl.glUniformMatrix4fv(mvLoc, 1, false, mvMat.get(values));\r\n        gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);\r\n        gl.glVertexAttribPointer(0, 3, GL_FLOAT, false, 0, 0);\r\n        gl.glEnableVertexAttribArray(0);\r\n        gl.glEnable(GL_DEPTH_TEST);\r\n        gl.glDepthFunc(GL_LEQUAL);\r\n    \r\n        gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[1]);\r\n        gl.glVertexAttribPointer(1, 2, GL_FLOAT, false, 0, 0);\r\n        gl.glEnableVertexAttribArray(1);\r\n    \r\n        gl.glBindTexture(GL_TEXTURE_2D, gTexture);\r\n        gl.glDrawArrays(GL_TRIANGLES, 0, 6);\r\n        gl.glDrawArrays(GL_TRIANGLES, 0, myModel.getNumVertices());\r\n    \r\n        if (keyPressedForward) {\r\n            vMat.translateLocal(0f, 0f, 0.1f);\r\n        }\r\n        if (keyPressedBackward) {\r\n            vMat.translateLocal(0f,0f,-0.1f);\r\n        }\r\n        if (keyPressedMoveLeft) {\r\n            vMat.translateLocal(0.1f,0f,0f);\r\n        }\r\n        if (keyPressedMoveRight) {\r\n            vMat.translateLocal(-0.1f,0f,0f);\r\n        }\r\n        if (keyPressedTurnLeft) {\r\n            vMat.rotateLocalY(-0.001f);\r\n        }\r\n        if (keyPressedTurnRight) {\r\n            vMat.rotateLocalY(0.001f);\r\n        }\r\n        if (keyPressedSpace) {\r\n            vMat.translateLocal(0f,-0.1f,0f);\r\n        }\r\n        if (keyPressedControl) {\r\n            vMat.translateLocal(0f,0.1f,0f);\r\n        }\r\n        if (keyPressedForward &amp;&amp; keyPressedShift){\r\n            vMat.translateLocal(0f,0f,0.2f);\r\n        }\r\n    \r\n    \r\n    }\r\n    \r\n    @Override\r\n    public void reshape(GLAutoDrawable glAutoDrawable, int i, int i1, int i2, int i3) {\r\n    \r\n    }\r\n    \r\n    @Override\r\n    public void keyTyped(KeyEvent e) {\r\n        //do nothing\r\n    }\r\n    \r\n    \r\n    @Override\r\n    public void keyPressed(KeyEvent e) {\r\n        int keyCode = e.getKeyCode();\r\n        if (keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_W) {\r\n            // Move camera forward\r\n            keyPressedForward = true;\r\n        } else if (keyCode == KeyEvent.VK_DOWN || keyCode == KeyEvent.VK_S) {\r\n            // Move camera backward\r\n            keyPressedBackward = true;\r\n        } else if (keyCode == KeyEvent.VK_LEFT || keyCode == KeyEvent.VK_A) {\r\n            // Move camera to the left\r\n            keyPressedMoveLeft = true;\r\n        } else if (keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_D) {\r\n            // Move camera to the right\r\n            keyPressedMoveRight = true;\r\n        } else if (keyCode == KeyEvent.VK_HOME || keyCode == KeyEvent.VK_Q) {\r\n            // Turn camera to the left\r\n            keyPressedTurnLeft = true;\r\n        } else if (keyCode == KeyEvent.VK_PAGE_UP || keyCode == KeyEvent.VK_E) {\r\n            // Turn camera to the right\r\n            keyPressedTurnRight = true;\r\n        } else if (keyCode == KeyEvent.VK_SPACE) {\r\n            // Move camera up\r\n            keyPressedSpace = true;\r\n        } else if (keyCode == KeyEvent.VK_CONTROL) {\r\n            // Move camera down\r\n            keyPressedControl = true;\r\n        } else if (keyCode == KeyEvent.VK_SHIFT) {\r\n            //hold shift to &quot;sprint&quot;\r\n            //can only sprint while forward buttons are pressed\r\n            keyPressedShift = true;\r\n        }\r\n    }\r\n    \r\n    @Override\r\n    public void keyReleased(KeyEvent e) {\r\n        int keyCode = e.getKeyCode();\r\n            if (keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_W) {\r\n                // Move camera forward\r\n                keyPressedForward = false;\r\n            } else if (keyCode == KeyEvent.VK_DOWN || keyCode == KeyEvent.VK_S) {\r\n                // Move camera backward\r\n                keyPressedBackward = false;\r\n            } else if (keyCode == KeyEvent.VK_LEFT || keyCode == KeyEvent.VK_A) {\r\n                // Move camera to the left\r\n                keyPressedMoveLeft = false;\r\n            } else if (keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_D) {\r\n                // Move camera to the right\r\n                keyPressedMoveRight = false;\r\n            } else if (keyCode == KeyEvent.VK_HOME || keyCode == KeyEvent.VK_Q) {\r\n                // Turn camera to the left\r\n                keyPressedTurnLeft = false;\r\n            } else if (keyCode == KeyEvent.VK_PAGE_UP || keyCode == KeyEvent.VK_E) {\r\n                // Turn camera to the right\r\n                keyPressedTurnRight = false;\r\n            } else if (keyCode == KeyEvent.VK_SPACE) {\r\n                // Move camera up\r\n                keyPressedSpace = false;\r\n            } else if (keyCode == KeyEvent.VK_CONTROL) {\r\n                // Move Camera down\r\n                keyPressedControl = false;\r\n            } else if (keyCode == KeyEvent.VK_SHIFT) {\r\n                //hold shift to &quot;sprint&quot;\r\n                keyPressedShift = false;\r\n            }\r\n    }\r\n    }\r\n\r\n    import org.joml.Vector2f;\r\n    import org.joml.Vector3f;\r\n    \r\n    import java.io.*;\r\n    import java.nio.file.Files;\r\n    import java.util.ArrayList;\r\n    \r\n    public class ImportedModel {\r\n    private Vector3f[ ] vertices;\r\n    private Vector2f[ ] texCoords;\r\n    private Vector3f[] normals;\r\n    private int numVertices;\r\n    \r\n    public ImportedModel(String filename) {\r\n        ModelImporter modelImporter = new ModelImporter();\r\n    \r\n        try {\r\n            modelImporter.parseOBJ(filename);   // uses modelImporter to get vertex information\r\n            numVertices = modelImporter.getNumVertices();\r\n            float[ ] verts = modelImporter.getVertices();\r\n            float[ ] tcs = modelImporter.getTextureCoordinates();\r\n            float[ ] norm = modelImporter.getNormals();\r\n    \r\n            this.vertices = new Vector3f[numVertices];\r\n            this.texCoords = new Vector2f[numVertices];\r\n            this.normals = new Vector3f[numVertices];\r\n    \r\n            for(int i=0; i&lt;vertices.length; i++)\r\n            { vertices[i] = new Vector3f();\r\n                vertices[i].set(verts[i*3], verts[i*3+1], verts[i*3+2]);\r\n                texCoords[i] = new Vector2f();\r\n                texCoords[i].set(tcs[i*2], tcs[i*2+1]);\r\n                this.normals[i] = new Vector3f();\r\n                this.normals[i].set(norm[i*3], norm[i*3+1], norm[i*3+2]);\r\n            }\r\n        } catch (IOException e)\r\n        { e.printStackTrace();\r\n        } }\r\n    public int getNumVertices() { return numVertices; } // accessors\r\n    public Vector3f[ ] getVertices() { return vertices; }\r\n    public Vector2f[ ] getTexCoords() { return texCoords; }\r\n    public Vector3f[ ] getNormals() { return normals; }\r\n    \r\n    private static class ModelImporter\r\n    { // values as read in from OBJ file\r\n        private final ArrayList&lt;Float&gt; vertVals = new ArrayList&lt;&gt;();\r\n        private final ArrayList&lt;Float&gt; stVals = new ArrayList&lt;&gt;();\r\n        private final ArrayList&lt;Float&gt; normVals = new ArrayList&lt;&gt;();\r\n        // values stored for later use as vertex attributes\r\n        private final ArrayList&lt;Float&gt; triangleVerts = new ArrayList&lt;&gt;();\r\n        private final ArrayList&lt;Float&gt; textureCoords = new ArrayList&lt;&gt;();\r\n        private final ArrayList&lt;Float&gt; normals = new ArrayList&lt;&gt;();\r\n        public void parseOBJ(String filename) throws IOException\r\n        {   InputStream input = Files.newInputStream(new File(filename).toPath());\r\n            BufferedReader br = new BufferedReader(new InputStreamReader(input));\r\n            String line;\r\n            while ((line = br.readLine()) != null)\r\n            {    if(line.startsWith(&quot;v&quot;))        // vertex position (&quot;v&quot; case)\r\n            {   for(String s : (line.substring(2)).split(&quot; &quot;))\r\n            {   vertVals.add(Float.valueOf(s));    // extract the vertex position values\r\n            } }\r\n            else if(line.startsWith(&quot;vt&quot;))        // texture coordinates (&quot;vt&quot; case)\r\n            {   for(String s : (line.substring(3)).split(&quot; &quot;))\r\n            {   stVals.add(Float.valueOf(s));     // extract the texture coordinate values\r\n            } }\r\n            else if(line.startsWith(&quot;vn&quot;))        // vertex normals (&quot;vn&quot; case)\r\n            {   for(String s : (line.substring(3)).split(&quot; &quot;))\r\n            {   normVals.add(Float.valueOf(s));    // extract the normal vector values\r\n            } }\r\n            else if(line.startsWith(&quot;f&quot;))         // triangle faces (&quot;f&quot; case)\r\n            {   for(String s : (line.substring(2)).split(&quot; &quot;))\r\n            {   String v = s.split(&quot;/&quot;)[0];        // extract triangle face references\r\n                String vt = s.split(&quot;/&quot;)[1];\r\n                String vn = s.split(&quot;/&quot;)[2];\r\n                int vertRef = (Integer.parseInt(v)-1)*3;\r\n                int tcRef = (Integer.parseInt(vt)-1)*2;\r\n                int normRef = (Integer.parseInt(vn)-1)*3;\r\n                triangleVerts.add(vertVals.get(vertRef));   // build array of vertices\r\n                triangleVerts.add(vertVals.get(vertRef+1));\r\n                triangleVerts.add(vertVals.get(vertRef+2));\r\n                textureCoords.add(stVals.get(tcRef));   // build array of\r\n                textureCoords.add(stVals.get(tcRef+1));     // texture coordinates.\r\n                normals.add(normVals.get(normRef));     //… and normals\r\n                normals.add(normVals.get(normRef+1));\r\n                normals.add(normVals.get(normRef+2));\r\n            } }}\r\n            System.out.println(vertVals);\r\n            System.out.println(stVals);\r\n            System.out.println(normVals);\r\n            input.close();\r\n        }\r\n        // accessors for retrieving the number of vertices, the vertices themselves,\r\n        // and the corresponding texture coordinates and normals (only called once per model)\r\n        public int getNumVertices() { return (triangleVerts.size()/3); }\r\n        public float[ ] getVertices()\r\n        {   float[ ] p = new float[triangleVerts.size()];\r\n            for(int i = 0; i &lt; triangleVerts.size(); i++)\r\n            { p[i] = triangleVerts.get(i);\r\n            }\r\n            return p;\r\n        }\r\n    \r\n        public float[] getTextureCoordinates() {\r\n            float[] p = new float[textureCoords.size()];\r\n            for (int i = 0; i &lt; textureCoords.size(); i++) {\r\n                p[i] = textureCoords.get(i);\r\n            }\r\n            return p;\r\n    }\r\n        public float[] getNormals() {\r\n            float[ ] p = new float[normals.size()];\r\n            for(int i = 0; i &lt; normals.size(); i++)\r\n            { p[i] = normals.get(i);\r\n            }\r\n            return p;\r\n        }\r\n        // similar accessors for texture coordinates and normal vectors go here\r\n    } }\r\n\r\nHere are the errors I am getting:\r\n\r\n```\r\nException in thread &quot;main-AWTAnimator#00&quot; com.jogamp.opengl.util.AnimatorBase$UncaughtAnimatorException: java.lang.RuntimeException: com.jogamp.opengl.GLException: Caught NumberFormatException: empty String on thread AWT-EventQueue-0\r\n\tat com.jogamp.opengl.util.AWTAnimatorImpl.display(AWTAnimatorImpl.java:92)\r\n\tat com.jogamp.opengl.util.AnimatorBase.display(AnimatorBase.java:452)\r\n\tat com.jogamp.opengl.util.Animator$MainLoop.run(Animator.java:204)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.lang.RuntimeException: com.jogamp.opengl.GLException: Caught NumberFormatException: empty String on thread AWT-EventQueue-0\r\n\tat com.jogamp.common.util.awt.AWTEDTExecutor.invoke(AWTEDTExecutor.java:58)\r\n\tat jogamp.opengl.awt.AWTThreadingPlugin.invokeOnOpenGLThread(AWTThreadingPlugin.java:103)\r\n\tat jogamp.opengl.ThreadingImpl.invokeOnOpenGLThread(ThreadingImpl.java:201)\r\n\tat com.jogamp.opengl.Threading.invokeOnOpenGLThread(Threading.java:202)\r\n\tat com.jogamp.opengl.Threading.invoke(Threading.java:221)\r\n\tat com.jogamp.opengl.awt.GLCanvas.display(GLCanvas.java:505)\r\n\tat com.jogamp.opengl.util.AWTAnimatorImpl.display(AWTAnimatorImpl.java:81)\r\n\t... 3 more\r\nCaused by: com.jogamp.opengl.GLException: Caught NumberFormatException: empty String on thread AWT-EventQueue-0\r\n\tat com.jogamp.opengl.GLException.newGLException(GLException.java:76)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1327)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:1147)\r\n\tat com.jogamp.opengl.awt.GLCanvas$12.run(GLCanvas.java:1438)\r\n\tat java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:301)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)\r\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:726)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\nCaused by: java.lang.NumberFormatException: empty String\r\n\tat sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1842)\r\n\tat sun.misc.FloatingDecimal.parseFloat(FloatingDecimal.java:122)\r\n\tat java.lang.Float.parseFloat(Float.java:451)\r\n\tat java.lang.Float.valueOf(Float.java:416)\r\n\tat ImportedModel$ModelImporter.parseOBJ(ImportedModel.java:60)\r\n\tat ImportedModel.&lt;init&gt;(ImportedModel.java:18)\r\n\tat WalkingTour.init(WalkingTour.java:83)\r\n\tat jogamp.opengl.GLDrawableHelper.init(GLDrawableHelper.java:644)\r\n\tat jogamp.opengl.GLDrawableHelper.init(GLDrawableHelper.java:667)\r\n\tat com.jogamp.opengl.awt.GLCanvas$10.run(GLCanvas.java:1407)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1291)\r\n\t... 16 more\r\nException in thread &quot;AWT-EventQueue-0&quot; com.jogamp.opengl.GLException: Caught GLException: array vertex_buffer_object must be bound to call this method on thread AWT-EventQueue-0\r\n\tat com.jogamp.opengl.GLException.newGLException(GLException.java:76)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1327)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:1147)\r\n\tat com.jogamp.opengl.awt.GLCanvas$12.run(GLCanvas.java:1438)\r\n\tat com.jogamp.opengl.Threading.invoke(Threading.java:223)\r\n\tat com.jogamp.opengl.awt.GLCanvas.display(GLCanvas.java:505)\r\n\tat com.jogamp.opengl.awt.GLCanvas.paint(GLCanvas.java:559)\r\n\tat sun.awt.RepaintArea.paintComponent(RepaintArea.java:264)\r\n\tat sun.lwawt.LWRepaintArea.paintComponent(LWRepaintArea.java:59)\r\n\tat sun.awt.RepaintArea.paint(RepaintArea.java:240)\r\n\tat sun.lwawt.LWComponentPeer.handleJavaPaintEvent(LWComponentPeer.java:1314)\r\n\tat sun.lwawt.LWComponentPeer.handleEvent(LWComponentPeer.java:1198)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4965)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:731)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:729)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\nCaused by: com.jogamp.opengl.GLException: array vertex_buffer_object must be bound to call this method\r\n\tat jogamp.opengl.gl4.GL4bcImpl.checkBufferObject(GL4bcImpl.java:40621)\r\n\tat jogamp.opengl.gl4.GL4bcImpl.checkArrayVBOBound(GL4bcImpl.java:40653)\r\n\tat jogamp.opengl.gl4.GL4bcImpl.glVertexAttribPointer(GL4bcImpl.java:12429)\r\n\tat WalkingTour.display(WalkingTour.java:180)\r\n\tat jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:692)\r\n\tat jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:674)\r\n\tat com.jogamp.opengl.awt.GLCanvas$11.run(GLCanvas.java:1424)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1293)\r\n\t... 30 more\r\nException in thread &quot;AWT-EventQueue-0&quot; com.jogamp.opengl.GLException: Caught GLException: array vertex_buffer_object must be bound to call this method on thread AWT-EventQueue-0\r\n\tat com.jogamp.opengl.GLException.newGLException(GLException.java:76)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1327)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:1147)\r\n\tat com.jogamp.opengl.awt.GLCanvas$12.run(GLCanvas.java:1438)\r\n\tat com.jogamp.opengl.Threading.invoke(Threading.java:223)\r\n\tat com.jogamp.opengl.awt.GLCanvas.display(GLCanvas.java:505)\r\n\tat com.jogamp.opengl.awt.GLCanvas.paint(GLCanvas.java:559)\r\n\tat com.jogamp.opengl.awt.GLCanvas.update(GLCanvas.java:866)\r\n\tat sun.awt.RepaintArea.updateComponent(RepaintArea.java:255)\r\n\tat sun.lwawt.LWRepaintArea.updateComponent(LWRepaintArea.java:47)\r\n\tat sun.awt.RepaintArea.paint(RepaintArea.java:232)\r\n\tat sun.lwawt.LWComponentPeer.handleJavaPaintEvent(LWComponentPeer.java:1314)\r\n\tat sun.lwawt.LWComponentPeer.handleEvent(LWComponentPeer.java:1198)\r\n\tat java.awt.Component.dispatchEventImpl(Component.java:4965)\r\n\tat java.awt.Component.dispatchEvent(Component.java:4711)\r\n\tat java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\r\n\tat java.awt.EventQueue.access$500(EventQueue.java:97)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:709)\r\n\tat java.awt.EventQueue$3.run(EventQueue.java:703)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:731)\r\n\tat java.awt.EventQueue$4.run(EventQueue.java:729)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\r\n\tat java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\r\n\tat java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\r\n\tat java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\r\n\tat java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\r\n\tat java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\r\n\tat java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\r\nCaused by: com.jogamp.opengl.GLException: array vertex_buffer_object must be bound to call this method\r\n\tat jogamp.opengl.gl4.GL4bcImpl.checkBufferObject(GL4bcImpl.java:40621)\r\n\tat jogamp.opengl.gl4.GL4bcImpl.checkArrayVBOBound(GL4bcImpl.java:40653)\r\n\tat jogamp.opengl.gl4.GL4bcImpl.glVertexAttribPointer(GL4bcImpl.java:12429)\r\n\tat WalkingTour.display(WalkingTour.java:180)\r\n\tat jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:692)\r\n\tat jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:674)\r\n\tat com.jogamp.opengl.awt.GLCanvas$11.run(GLCanvas.java:1424)\r\n\tat jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1293)\r\n\t... 31 more\r\n```\r\n\r\nAny help would be appreciated.\r\n\r\nTrying to parse a .obj model and use the extracted information to load my model into a JOGL program.","title":"Errors loading Blender Wavefront Model","body":"<p>Hopefully someone can help me. I am trying to load a model I made in Blender into my JOGL program. I was able to manual models working and set up my window but there is something wrong with parsing the .obj wavefront file. No errors in my code that I can see, the ImportedModel class came from a textbook.</p>\n<p>Here is the code:</p>\n<pre><code>import com.jogamp.common.nio.Buffers;\nimport com.jogamp.opengl.*;\nimport com.jogamp.opengl.awt.GLCanvas;\nimport com.jogamp.opengl.util.Animator;\nimport org.joml.Matrix4f;\nimport org.joml.Vector2f;\nimport org.joml.Vector3f;\n\nimport javax.swing.*;\nimport java.awt.event.KeyEvent;\nimport java.awt.event.KeyListener;\nimport java.nio.FloatBuffer;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport static com.jogamp.opengl.GL.*;\n\n\n\npublic class WalkingTour extends JFrame implements GLEventListener, KeyListener {\n\n\nprivate static final int windowWidth = 800, windowHeight = 600;\nprivate static final String windowTitle = &quot;Walking Tour&quot;;\nprivate static final String vertexShaderFile = &quot;src/walkingtour-vertex.glsl&quot;,\n        fragmentShaderFile = &quot;src/walkingtour-fragment.glsl&quot;;\nprivate final GLCanvas glCanvas;\nprivate int renderingProgram;\nprivate final int[] vao = new int[1];\nprivate final int[] vbo = new int[6];\nprivate final FloatBuffer values = Buffers.newDirectFloatBuffer(16);\nprivate final Matrix4f pMat = new Matrix4f();  // perspective matrix\nprivate final Matrix4f vMat = new Matrix4f();  // view matrix\nprivate final Matrix4f mMat = new Matrix4f();  // model matrix\nprivate final Matrix4f mvMat = new Matrix4f(); // model-view matrix\nprivate int gTexture;\nprivate ImportedModel myModel;\nprivate int numObjVertices;\n\nprivate boolean keyPressedForward = false,\n        keyPressedBackward = false,\n        keyPressedMoveRight = false,\n        keyPressedMoveLeft = false,\n        keyPressedTurnRight = false,\n        keyPressedTurnLeft = false,\n        keyPressedSpace = false,\n        keyPressedControl = false,\n        keyPressedShift = false;\nprivate final ArrayList&lt;Float&gt; vertexValues = new ArrayList&lt;&gt;();\nprivate final ArrayList&lt;Float&gt; stVals = new ArrayList&lt;&gt;();\nprivate final ArrayList&lt;Float&gt; normalValues = new ArrayList&lt;&gt;();\n\n\nprivate final ArrayList&lt;Float&gt; triangleVerts = new ArrayList&lt;&gt;();\nprivate final ArrayList&lt;Float&gt; textureCoordinates = new ArrayList&lt;&gt;();\nprivate final ArrayList&lt;Float&gt; normals = new ArrayList&lt;&gt;();\n\nprivate List&lt;float[]&gt; vertices = new ArrayList&lt;float[]&gt;();\nprivate List&lt;int[]&gt; faces =new ArrayList&lt;int[]&gt;();\n\n\n\npublic WalkingTour() {\n    setTitle(windowTitle);\n    setSize(windowWidth, windowHeight);\n    glCanvas = new GLCanvas(new GLCapabilities(GLProfile.getMaxProgrammableCore(true)));\n    glCanvas.addGLEventListener(this);\n    this.add(glCanvas);\n    this.setVisible(true);\n    Animator animator = new Animator(glCanvas);\n    animator.start();\n}\n\npublic static void main(String[] args) {\n    new WalkingTour();\n}\n\n\n\n@Override\npublic void init(GLAutoDrawable glAutoDrawable) {\n\n    myModel = new ImportedModel(&quot;hwk5Model.obj&quot;);\n\n    GL4 gl = (GL4) GLContext.getCurrentGL();\n\n    numObjVertices = myModel.getNumVertices();\n    Vector3f[ ] vertices = myModel.getVertices();\n    Vector2f[ ] texCoords = myModel.getTexCoords();\n    Vector3f[ ] normals = myModel.getNormals();\n    float[ ] pvalues = new float[numObjVertices*3];        // vertex positions\n    float[ ] tvalues = new float[numObjVertices*2];        // texture coordinates\n    float[ ] nvalues = new float[numObjVertices*3];        // normal vectors\n\n    for (int i=0; i&lt;numObjVertices; i++)\n    {   pvalues[i*3]   = (float) (vertices[i]).x();\n        pvalues[i*3+1]     = (float) (vertices[i]).y();\n        pvalues[i*3+2]  = (float) (vertices[i]).z();\n        tvalues[i*2]    = (float) (texCoords[i]).x();\n        tvalues[i*2+1]  = (float) (texCoords[i]).y();\n        nvalues[i*3]    = (float) (normals[i]).x();\n        nvalues[i*3+1]  = (float) (normals[i]).y();\n        nvalues[i*3+2]  = (float) (normals[i]).z();\n    }\n\n    // VBO for vertex locations\n    gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[2]);\n    FloatBuffer vertBuf = Buffers.newDirectFloatBuffer(pvalues);\n    gl.glBufferData(GL_ARRAY_BUFFER, vertBuf.limit()*4, vertBuf, GL_STATIC_DRAW);\n// VBO for texture coordinates\n    gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[3]);\n    FloatBuffer texBuf = Buffers.newDirectFloatBuffer(tvalues);\n    gl.glBufferData(GL_ARRAY_BUFFER, texBuf.limit()*4, texBuf, GL_STATIC_DRAW);\n// VBO for normal vectors\n    gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[4]);\n    FloatBuffer norBuf = Buffers.newDirectFloatBuffer(nvalues);\n    gl.glBufferData(GL_ARRAY_BUFFER, norBuf.limit()*4,norBuf, GL_STATIC_DRAW);\n\n\n    renderingProgram = Utils.createShaderProgram(vertexShaderFile, fragmentShaderFile);\n    gTexture = Utils.loadTexture(&quot;groundTexture.jpeg&quot;);\n    gl.glActiveTexture(GL_TEXTURE0);\n    gl.glBindTexture(GL_TEXTURE_2D, gTexture);\n    \n\n    float[] floor = {\n            -2000.0f, -50.0f, -2000.0f, -2000.0f, -50.0f, 2000.0f, 2000.0f, -50.0f, 2000.0f,\n            -2000.0f, -50.0f, -2000.0f, 2000.0f, -50.0f, -2000.0f, 2000.0f, -50.0f, 2000.0f,\n    };\n\n    gl.glGenVertexArrays(vao.length, vao, 0);\n    gl.glBindVertexArray(vao[0]);\n    gl.glGenBuffers(vbo.length, vbo, 0);\n\n    FloatBuffer corBuf = Buffers.newDirectFloatBuffer(floor);\n    gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);\n    gl.glBufferData(GL_ARRAY_BUFFER, corBuf.limit() * 4L, corBuf, GL_STATIC_DRAW);\n\n    float[] textureCoords = {\n            0f, 1f, 0f, 0f, 1f, 0f,\n            0f, 1f, 1f, 1f, 1f, 0f\n    };\n\n    FloatBuffer textureBuffer = Buffers.newDirectFloatBuffer(textureCoords);\n    gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[1]);\n    gl.glBufferData(GL_ARRAY_BUFFER, textureBuffer.limit() * 4L, textureBuffer, GL_STATIC_DRAW);\n\n\n    this.addKeyListener(this);\n}\n\n@Override\npublic void dispose(GLAutoDrawable glAutoDrawable) {\n    this.removeKeyListener(this);\n}\n\n@Override\npublic void display(GLAutoDrawable glAutoDrawable) {\n    GL4 gl = (GL4) GLContext.getCurrentGL();\n\n    gl.glClear(GL_COLOR_BUFFER_BIT);\n    gl.glClear(GL_DEPTH_BUFFER_BIT);\n    gl.glUseProgram(renderingProgram);\n\n    int mvLoc = gl.glGetUniformLocation(renderingProgram, &quot;mv_matrix&quot;);\n    int pLoc = gl.glGetUniformLocation(renderingProgram, &quot;p_matrix&quot;);\n\n    float aspect = (float) glCanvas.getWidth() / (float) glCanvas.getHeight();\n    pMat.identity().setPerspective((float) Math.toRadians(60.0f), aspect, 0.1f, 5000.0f);\n    gl.glUniformMatrix4fv(pLoc, 1, false, pMat.get(values));\n\n    vMat.translate(0f,0f,0f);\n\n    mvMat.identity();\n    mvMat.mul(vMat);\n    mvMat.mul(mMat);\n\n    gl.glUniformMatrix4fv(mvLoc, 1, false, mvMat.get(values));\n    gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[0]);\n    gl.glVertexAttribPointer(0, 3, GL_FLOAT, false, 0, 0);\n    gl.glEnableVertexAttribArray(0);\n    gl.glEnable(GL_DEPTH_TEST);\n    gl.glDepthFunc(GL_LEQUAL);\n\n    gl.glBindBuffer(GL_ARRAY_BUFFER, vbo[1]);\n    gl.glVertexAttribPointer(1, 2, GL_FLOAT, false, 0, 0);\n    gl.glEnableVertexAttribArray(1);\n\n    gl.glBindTexture(GL_TEXTURE_2D, gTexture);\n    gl.glDrawArrays(GL_TRIANGLES, 0, 6);\n    gl.glDrawArrays(GL_TRIANGLES, 0, myModel.getNumVertices());\n\n    if (keyPressedForward) {\n        vMat.translateLocal(0f, 0f, 0.1f);\n    }\n    if (keyPressedBackward) {\n        vMat.translateLocal(0f,0f,-0.1f);\n    }\n    if (keyPressedMoveLeft) {\n        vMat.translateLocal(0.1f,0f,0f);\n    }\n    if (keyPressedMoveRight) {\n        vMat.translateLocal(-0.1f,0f,0f);\n    }\n    if (keyPressedTurnLeft) {\n        vMat.rotateLocalY(-0.001f);\n    }\n    if (keyPressedTurnRight) {\n        vMat.rotateLocalY(0.001f);\n    }\n    if (keyPressedSpace) {\n        vMat.translateLocal(0f,-0.1f,0f);\n    }\n    if (keyPressedControl) {\n        vMat.translateLocal(0f,0.1f,0f);\n    }\n    if (keyPressedForward &amp;&amp; keyPressedShift){\n        vMat.translateLocal(0f,0f,0.2f);\n    }\n\n\n}\n\n@Override\npublic void reshape(GLAutoDrawable glAutoDrawable, int i, int i1, int i2, int i3) {\n\n}\n\n@Override\npublic void keyTyped(KeyEvent e) {\n    //do nothing\n}\n\n\n@Override\npublic void keyPressed(KeyEvent e) {\n    int keyCode = e.getKeyCode();\n    if (keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_W) {\n        // Move camera forward\n        keyPressedForward = true;\n    } else if (keyCode == KeyEvent.VK_DOWN || keyCode == KeyEvent.VK_S) {\n        // Move camera backward\n        keyPressedBackward = true;\n    } else if (keyCode == KeyEvent.VK_LEFT || keyCode == KeyEvent.VK_A) {\n        // Move camera to the left\n        keyPressedMoveLeft = true;\n    } else if (keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_D) {\n        // Move camera to the right\n        keyPressedMoveRight = true;\n    } else if (keyCode == KeyEvent.VK_HOME || keyCode == KeyEvent.VK_Q) {\n        // Turn camera to the left\n        keyPressedTurnLeft = true;\n    } else if (keyCode == KeyEvent.VK_PAGE_UP || keyCode == KeyEvent.VK_E) {\n        // Turn camera to the right\n        keyPressedTurnRight = true;\n    } else if (keyCode == KeyEvent.VK_SPACE) {\n        // Move camera up\n        keyPressedSpace = true;\n    } else if (keyCode == KeyEvent.VK_CONTROL) {\n        // Move camera down\n        keyPressedControl = true;\n    } else if (keyCode == KeyEvent.VK_SHIFT) {\n        //hold shift to &quot;sprint&quot;\n        //can only sprint while forward buttons are pressed\n        keyPressedShift = true;\n    }\n}\n\n@Override\npublic void keyReleased(KeyEvent e) {\n    int keyCode = e.getKeyCode();\n        if (keyCode == KeyEvent.VK_UP || keyCode == KeyEvent.VK_W) {\n            // Move camera forward\n            keyPressedForward = false;\n        } else if (keyCode == KeyEvent.VK_DOWN || keyCode == KeyEvent.VK_S) {\n            // Move camera backward\n            keyPressedBackward = false;\n        } else if (keyCode == KeyEvent.VK_LEFT || keyCode == KeyEvent.VK_A) {\n            // Move camera to the left\n            keyPressedMoveLeft = false;\n        } else if (keyCode == KeyEvent.VK_RIGHT || keyCode == KeyEvent.VK_D) {\n            // Move camera to the right\n            keyPressedMoveRight = false;\n        } else if (keyCode == KeyEvent.VK_HOME || keyCode == KeyEvent.VK_Q) {\n            // Turn camera to the left\n            keyPressedTurnLeft = false;\n        } else if (keyCode == KeyEvent.VK_PAGE_UP || keyCode == KeyEvent.VK_E) {\n            // Turn camera to the right\n            keyPressedTurnRight = false;\n        } else if (keyCode == KeyEvent.VK_SPACE) {\n            // Move camera up\n            keyPressedSpace = false;\n        } else if (keyCode == KeyEvent.VK_CONTROL) {\n            // Move Camera down\n            keyPressedControl = false;\n        } else if (keyCode == KeyEvent.VK_SHIFT) {\n            //hold shift to &quot;sprint&quot;\n            keyPressedShift = false;\n        }\n}\n}\n\nimport org.joml.Vector2f;\nimport org.joml.Vector3f;\n\nimport java.io.*;\nimport java.nio.file.Files;\nimport java.util.ArrayList;\n\npublic class ImportedModel {\nprivate Vector3f[ ] vertices;\nprivate Vector2f[ ] texCoords;\nprivate Vector3f[] normals;\nprivate int numVertices;\n\npublic ImportedModel(String filename) {\n    ModelImporter modelImporter = new ModelImporter();\n\n    try {\n        modelImporter.parseOBJ(filename);   // uses modelImporter to get vertex information\n        numVertices = modelImporter.getNumVertices();\n        float[ ] verts = modelImporter.getVertices();\n        float[ ] tcs = modelImporter.getTextureCoordinates();\n        float[ ] norm = modelImporter.getNormals();\n\n        this.vertices = new Vector3f[numVertices];\n        this.texCoords = new Vector2f[numVertices];\n        this.normals = new Vector3f[numVertices];\n\n        for(int i=0; i&lt;vertices.length; i++)\n        { vertices[i] = new Vector3f();\n            vertices[i].set(verts[i*3], verts[i*3+1], verts[i*3+2]);\n            texCoords[i] = new Vector2f();\n            texCoords[i].set(tcs[i*2], tcs[i*2+1]);\n            this.normals[i] = new Vector3f();\n            this.normals[i].set(norm[i*3], norm[i*3+1], norm[i*3+2]);\n        }\n    } catch (IOException e)\n    { e.printStackTrace();\n    } }\npublic int getNumVertices() { return numVertices; } // accessors\npublic Vector3f[ ] getVertices() { return vertices; }\npublic Vector2f[ ] getTexCoords() { return texCoords; }\npublic Vector3f[ ] getNormals() { return normals; }\n\nprivate static class ModelImporter\n{ // values as read in from OBJ file\n    private final ArrayList&lt;Float&gt; vertVals = new ArrayList&lt;&gt;();\n    private final ArrayList&lt;Float&gt; stVals = new ArrayList&lt;&gt;();\n    private final ArrayList&lt;Float&gt; normVals = new ArrayList&lt;&gt;();\n    // values stored for later use as vertex attributes\n    private final ArrayList&lt;Float&gt; triangleVerts = new ArrayList&lt;&gt;();\n    private final ArrayList&lt;Float&gt; textureCoords = new ArrayList&lt;&gt;();\n    private final ArrayList&lt;Float&gt; normals = new ArrayList&lt;&gt;();\n    public void parseOBJ(String filename) throws IOException\n    {   InputStream input = Files.newInputStream(new File(filename).toPath());\n        BufferedReader br = new BufferedReader(new InputStreamReader(input));\n        String line;\n        while ((line = br.readLine()) != null)\n        {    if(line.startsWith(&quot;v&quot;))        // vertex position (&quot;v&quot; case)\n        {   for(String s : (line.substring(2)).split(&quot; &quot;))\n        {   vertVals.add(Float.valueOf(s));    // extract the vertex position values\n        } }\n        else if(line.startsWith(&quot;vt&quot;))        // texture coordinates (&quot;vt&quot; case)\n        {   for(String s : (line.substring(3)).split(&quot; &quot;))\n        {   stVals.add(Float.valueOf(s));     // extract the texture coordinate values\n        } }\n        else if(line.startsWith(&quot;vn&quot;))        // vertex normals (&quot;vn&quot; case)\n        {   for(String s : (line.substring(3)).split(&quot; &quot;))\n        {   normVals.add(Float.valueOf(s));    // extract the normal vector values\n        } }\n        else if(line.startsWith(&quot;f&quot;))         // triangle faces (&quot;f&quot; case)\n        {   for(String s : (line.substring(2)).split(&quot; &quot;))\n        {   String v = s.split(&quot;/&quot;)[0];        // extract triangle face references\n            String vt = s.split(&quot;/&quot;)[1];\n            String vn = s.split(&quot;/&quot;)[2];\n            int vertRef = (Integer.parseInt(v)-1)*3;\n            int tcRef = (Integer.parseInt(vt)-1)*2;\n            int normRef = (Integer.parseInt(vn)-1)*3;\n            triangleVerts.add(vertVals.get(vertRef));   // build array of vertices\n            triangleVerts.add(vertVals.get(vertRef+1));\n            triangleVerts.add(vertVals.get(vertRef+2));\n            textureCoords.add(stVals.get(tcRef));   // build array of\n            textureCoords.add(stVals.get(tcRef+1));     // texture coordinates.\n            normals.add(normVals.get(normRef));     //… and normals\n            normals.add(normVals.get(normRef+1));\n            normals.add(normVals.get(normRef+2));\n        } }}\n        System.out.println(vertVals);\n        System.out.println(stVals);\n        System.out.println(normVals);\n        input.close();\n    }\n    // accessors for retrieving the number of vertices, the vertices themselves,\n    // and the corresponding texture coordinates and normals (only called once per model)\n    public int getNumVertices() { return (triangleVerts.size()/3); }\n    public float[ ] getVertices()\n    {   float[ ] p = new float[triangleVerts.size()];\n        for(int i = 0; i &lt; triangleVerts.size(); i++)\n        { p[i] = triangleVerts.get(i);\n        }\n        return p;\n    }\n\n    public float[] getTextureCoordinates() {\n        float[] p = new float[textureCoords.size()];\n        for (int i = 0; i &lt; textureCoords.size(); i++) {\n            p[i] = textureCoords.get(i);\n        }\n        return p;\n}\n    public float[] getNormals() {\n        float[ ] p = new float[normals.size()];\n        for(int i = 0; i &lt; normals.size(); i++)\n        { p[i] = normals.get(i);\n        }\n        return p;\n    }\n    // similar accessors for texture coordinates and normal vectors go here\n} }\n</code></pre>\n<p>Here are the errors I am getting:</p>\n<pre><code>Exception in thread &quot;main-AWTAnimator#00&quot; com.jogamp.opengl.util.AnimatorBase$UncaughtAnimatorException: java.lang.RuntimeException: com.jogamp.opengl.GLException: Caught NumberFormatException: empty String on thread AWT-EventQueue-0\n    at com.jogamp.opengl.util.AWTAnimatorImpl.display(AWTAnimatorImpl.java:92)\n    at com.jogamp.opengl.util.AnimatorBase.display(AnimatorBase.java:452)\n    at com.jogamp.opengl.util.Animator$MainLoop.run(Animator.java:204)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.RuntimeException: com.jogamp.opengl.GLException: Caught NumberFormatException: empty String on thread AWT-EventQueue-0\n    at com.jogamp.common.util.awt.AWTEDTExecutor.invoke(AWTEDTExecutor.java:58)\n    at jogamp.opengl.awt.AWTThreadingPlugin.invokeOnOpenGLThread(AWTThreadingPlugin.java:103)\n    at jogamp.opengl.ThreadingImpl.invokeOnOpenGLThread(ThreadingImpl.java:201)\n    at com.jogamp.opengl.Threading.invokeOnOpenGLThread(Threading.java:202)\n    at com.jogamp.opengl.Threading.invoke(Threading.java:221)\n    at com.jogamp.opengl.awt.GLCanvas.display(GLCanvas.java:505)\n    at com.jogamp.opengl.util.AWTAnimatorImpl.display(AWTAnimatorImpl.java:81)\n    ... 3 more\nCaused by: com.jogamp.opengl.GLException: Caught NumberFormatException: empty String on thread AWT-EventQueue-0\n    at com.jogamp.opengl.GLException.newGLException(GLException.java:76)\n    at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1327)\n    at jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:1147)\n    at com.jogamp.opengl.awt.GLCanvas$12.run(GLCanvas.java:1438)\n    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:301)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:756)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:726)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\nCaused by: java.lang.NumberFormatException: empty String\n    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1842)\n    at sun.misc.FloatingDecimal.parseFloat(FloatingDecimal.java:122)\n    at java.lang.Float.parseFloat(Float.java:451)\n    at java.lang.Float.valueOf(Float.java:416)\n    at ImportedModel$ModelImporter.parseOBJ(ImportedModel.java:60)\n    at ImportedModel.&lt;init&gt;(ImportedModel.java:18)\n    at WalkingTour.init(WalkingTour.java:83)\n    at jogamp.opengl.GLDrawableHelper.init(GLDrawableHelper.java:644)\n    at jogamp.opengl.GLDrawableHelper.init(GLDrawableHelper.java:667)\n    at com.jogamp.opengl.awt.GLCanvas$10.run(GLCanvas.java:1407)\n    at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1291)\n    ... 16 more\nException in thread &quot;AWT-EventQueue-0&quot; com.jogamp.opengl.GLException: Caught GLException: array vertex_buffer_object must be bound to call this method on thread AWT-EventQueue-0\n    at com.jogamp.opengl.GLException.newGLException(GLException.java:76)\n    at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1327)\n    at jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:1147)\n    at com.jogamp.opengl.awt.GLCanvas$12.run(GLCanvas.java:1438)\n    at com.jogamp.opengl.Threading.invoke(Threading.java:223)\n    at com.jogamp.opengl.awt.GLCanvas.display(GLCanvas.java:505)\n    at com.jogamp.opengl.awt.GLCanvas.paint(GLCanvas.java:559)\n    at sun.awt.RepaintArea.paintComponent(RepaintArea.java:264)\n    at sun.lwawt.LWRepaintArea.paintComponent(LWRepaintArea.java:59)\n    at sun.awt.RepaintArea.paint(RepaintArea.java:240)\n    at sun.lwawt.LWComponentPeer.handleJavaPaintEvent(LWComponentPeer.java:1314)\n    at sun.lwawt.LWComponentPeer.handleEvent(LWComponentPeer.java:1198)\n    at java.awt.Component.dispatchEventImpl(Component.java:4965)\n    at java.awt.Component.dispatchEvent(Component.java:4711)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\n    at java.awt.EventQueue$4.run(EventQueue.java:731)\n    at java.awt.EventQueue$4.run(EventQueue.java:729)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\nCaused by: com.jogamp.opengl.GLException: array vertex_buffer_object must be bound to call this method\n    at jogamp.opengl.gl4.GL4bcImpl.checkBufferObject(GL4bcImpl.java:40621)\n    at jogamp.opengl.gl4.GL4bcImpl.checkArrayVBOBound(GL4bcImpl.java:40653)\n    at jogamp.opengl.gl4.GL4bcImpl.glVertexAttribPointer(GL4bcImpl.java:12429)\n    at WalkingTour.display(WalkingTour.java:180)\n    at jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:692)\n    at jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:674)\n    at com.jogamp.opengl.awt.GLCanvas$11.run(GLCanvas.java:1424)\n    at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1293)\n    ... 30 more\nException in thread &quot;AWT-EventQueue-0&quot; com.jogamp.opengl.GLException: Caught GLException: array vertex_buffer_object must be bound to call this method on thread AWT-EventQueue-0\n    at com.jogamp.opengl.GLException.newGLException(GLException.java:76)\n    at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1327)\n    at jogamp.opengl.GLDrawableHelper.invokeGL(GLDrawableHelper.java:1147)\n    at com.jogamp.opengl.awt.GLCanvas$12.run(GLCanvas.java:1438)\n    at com.jogamp.opengl.Threading.invoke(Threading.java:223)\n    at com.jogamp.opengl.awt.GLCanvas.display(GLCanvas.java:505)\n    at com.jogamp.opengl.awt.GLCanvas.paint(GLCanvas.java:559)\n    at com.jogamp.opengl.awt.GLCanvas.update(GLCanvas.java:866)\n    at sun.awt.RepaintArea.updateComponent(RepaintArea.java:255)\n    at sun.lwawt.LWRepaintArea.updateComponent(LWRepaintArea.java:47)\n    at sun.awt.RepaintArea.paint(RepaintArea.java:232)\n    at sun.lwawt.LWComponentPeer.handleJavaPaintEvent(LWComponentPeer.java:1314)\n    at sun.lwawt.LWComponentPeer.handleEvent(LWComponentPeer.java:1198)\n    at java.awt.Component.dispatchEventImpl(Component.java:4965)\n    at java.awt.Component.dispatchEvent(Component.java:4711)\n    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:758)\n    at java.awt.EventQueue.access$500(EventQueue.java:97)\n    at java.awt.EventQueue$3.run(EventQueue.java:709)\n    at java.awt.EventQueue$3.run(EventQueue.java:703)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:90)\n    at java.awt.EventQueue$4.run(EventQueue.java:731)\n    at java.awt.EventQueue$4.run(EventQueue.java:729)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:80)\n    at java.awt.EventQueue.dispatchEvent(EventQueue.java:728)\n    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:201)\n    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:116)\n    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:105)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101)\n    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:93)\n    at java.awt.EventDispatchThread.run(EventDispatchThread.java:82)\nCaused by: com.jogamp.opengl.GLException: array vertex_buffer_object must be bound to call this method\n    at jogamp.opengl.gl4.GL4bcImpl.checkBufferObject(GL4bcImpl.java:40621)\n    at jogamp.opengl.gl4.GL4bcImpl.checkArrayVBOBound(GL4bcImpl.java:40653)\n    at jogamp.opengl.gl4.GL4bcImpl.glVertexAttribPointer(GL4bcImpl.java:12429)\n    at WalkingTour.display(WalkingTour.java:180)\n    at jogamp.opengl.GLDrawableHelper.displayImpl(GLDrawableHelper.java:692)\n    at jogamp.opengl.GLDrawableHelper.display(GLDrawableHelper.java:674)\n    at com.jogamp.opengl.awt.GLCanvas$11.run(GLCanvas.java:1424)\n    at jogamp.opengl.GLDrawableHelper.invokeGLImpl(GLDrawableHelper.java:1293)\n    ... 31 more\n</code></pre>\n<p>Any help would be appreciated.</p>\n<p>Trying to parse a .obj model and use the extracted information to load my model into a JOGL program.</p>\n"},{"tags":["java","jdbc","avro","sqoop"],"answers":[{"comments":[{"owner":{"account_id":17941912,"reputation":81,"user_id":13310154,"display_name":"Salva"},"score":0,"creation_date":1671878639,"post_id":74903911,"comment_id":132191483,"body_markdown":"this solved the Avro schema error, but now am getting another error.","body":"this solved the Avro schema error, but now am getting another error."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671878723,"post_id":74903911,"comment_id":132191498,"body_markdown":"Such as? And why continue to use Sqoop at all?","body":"Such as? And why continue to use Sqoop at all?"},{"owner":{"account_id":17941912,"reputation":81,"user_id":13310154,"display_name":"Salva"},"score":0,"creation_date":1671878830,"post_id":74903911,"comment_id":132191518,"body_markdown":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils - i tried adding org-apache-common-langs2.6.jar still its shows the same error.","body":"Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/commons/lang/StringUtils - i tried adding org-apache-common-langs2.6.jar still its shows the same error."},{"owner":{"account_id":17941912,"reputation":81,"user_id":13310154,"display_name":"Salva"},"score":0,"creation_date":1671878936,"post_id":74903911,"comment_id":132191534,"body_markdown":"actually, am doing it for a small poc and want to finish rest dependencies. once this is implemented, I will change it later with new tool.","body":"actually, am doing it for a small poc and want to finish rest dependencies. once this is implemented, I will change it later with new tool."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671880870,"post_id":74903911,"comment_id":132191805,"body_markdown":"That should be the correct JAR. Even as a POC, you should use tools that you&#39;ll actually use when deployed for real","body":"That should be the correct JAR. Even as a POC, you should use tools that you&#39;ll actually use when deployed for real"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671829073,"creation_date":1671828753,"answer_id":74903911,"question_id":74899345,"body_markdown":"Sqoop will create Avro schema files for the table when it imports data. You&#39;d need to add Avro JARs to the Sqoop `lib` directory (the tool classpath). \r\n\r\nBy the way, you should use `--table E_INFO` instead of `--query &quot;select * FROM E_INFO&quot;`\r\n\r\nSee docs on controlling data format - https://sqoop.apache.org/docs/1.4.7/SqoopUserGuide.html#_purpose\r\n\r\n**NOTE**: As answered before, Sqoop is a retired Apache project. Suggest you find an alternative tool that will be maintained going forward. ","title":"Facing error while reading MySQL table in Sqoop. using Sqoop Eval","body":"<p>Sqoop will create Avro schema files for the table when it imports data. You'd need to add Avro JARs to the Sqoop <code>lib</code> directory (the tool classpath).</p>\n<p>By the way, you should use <code>--table E_INFO</code> instead of <code>--query &quot;select * FROM E_INFO&quot;</code></p>\n<p>See docs on controlling data format - <a href=\"https://sqoop.apache.org/docs/1.4.7/SqoopUserGuide.html#_purpose\" rel=\"nofollow noreferrer\">https://sqoop.apache.org/docs/1.4.7/SqoopUserGuide.html#_purpose</a></p>\n<p><strong>NOTE</strong>: As answered before, Sqoop is a retired Apache project. Suggest you find an alternative tool that will be maintained going forward.</p>\n"}],"owner":{"account_id":17941912,"reputation":81,"user_id":13310154,"display_name":"Salva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671829073,"creation_date":1671796401,"question_id":74899345,"body_markdown":"```\r\nh-user@h-primary:~/sqoop-1.4.7/bin$ sqoop eval --connect jdbc:mysql://localhost/HADOOP_BANK_DATA_POC --username root --password xxxxxxxx --query &quot;select * from E_INFO&quot;\r\nWarning: /home/h-user/sqoop-1.4.7/../hbase does not exist! HBase imports will fail.\r\nPlease set $HBASE_HOME to the root of your HBase installation.\r\nWarning: /home/h-user/sqoop-1.4.7/../hcatalog does not exist! HCatalog jobs will fail.\r\nPlease set $HCAT_HOME to the root of your HCatalog installation.\r\nWarning: /home/h-user/sqoop-1.4.7/../accumulo does not exist! Accumulo imports will fail.\r\nPlease set $ACCUMULO_HOME to the root of your Accumulo installation.\r\nWarning: /home/h-user/sqoop-1.4.7/../zookeeper does not exist! Accumulo imports will fail.\r\nPlease set $ZOOKEEPER_HOME to the root of your Zookeeper installation.\r\n/usr/local/hadoop/libexec/hadoop-functions.sh: line 2366: HADOOP_ORG.APACHE.SQOOP.SQOOP_USER: invalid variable name\r\n/usr/local/hadoop/libexec/hadoop-functions.sh: line 2461: HADOOP_ORG.APACHE.SQOOP.SQOOP_OPTS: invalid variable name\r\n2022-12-23 17:13:06,493 INFO sqoop.Sqoop: Running Sqoop version: 1.4.7\r\n2022-12-23 17:13:06,683 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.\r\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/avro/LogicalType\r\n\tat org.apache.sqoop.manager.DefaultManagerFactory.accept(DefaultManagerFactory.java:67)\r\n\tat org.apache.sqoop.ConnFactory.getManager(ConnFactory.java:184)\r\n\tat org.apache.sqoop.tool.BaseSqoopTool.init(BaseSqoopTool.java:272)\r\n\tat org.apache.sqoop.tool.EvalSqlTool.run(EvalSqlTool.java:56)\r\n\tat org.apache.sqoop.Sqoop.run(Sqoop.java:147)\r\n\tat org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76)\r\n\tat org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:183)\r\n\tat org.apache.sqoop.Sqoop.runTool(Sqoop.java:234)\r\n\tat org.apache.sqoop.Sqoop.runTool(Sqoop.java:243)\r\n\tat org.apache.sqoop.Sqoop.main(Sqoop.java:252)\r\nCaused by: java.lang.ClassNotFoundException: org.apache.avro.LogicalType\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:387)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:418)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:351)\r\n\t... 10 more\r\nh-user@h-primary:~/s\r\n```\r\nTrying to read mysql table and databases in sqoop using eval when executed getting above error. \r\ni tried outside of bin also,still same error.whats going wrong here ?","title":"Facing error while reading MySQL table in Sqoop. using Sqoop Eval","body":"<pre><code>h-user@h-primary:~/sqoop-1.4.7/bin$ sqoop eval --connect jdbc:mysql://localhost/HADOOP_BANK_DATA_POC --username root --password xxxxxxxx --query &quot;select * from E_INFO&quot;\nWarning: /home/h-user/sqoop-1.4.7/../hbase does not exist! HBase imports will fail.\nPlease set $HBASE_HOME to the root of your HBase installation.\nWarning: /home/h-user/sqoop-1.4.7/../hcatalog does not exist! HCatalog jobs will fail.\nPlease set $HCAT_HOME to the root of your HCatalog installation.\nWarning: /home/h-user/sqoop-1.4.7/../accumulo does not exist! Accumulo imports will fail.\nPlease set $ACCUMULO_HOME to the root of your Accumulo installation.\nWarning: /home/h-user/sqoop-1.4.7/../zookeeper does not exist! Accumulo imports will fail.\nPlease set $ZOOKEEPER_HOME to the root of your Zookeeper installation.\n/usr/local/hadoop/libexec/hadoop-functions.sh: line 2366: HADOOP_ORG.APACHE.SQOOP.SQOOP_USER: invalid variable name\n/usr/local/hadoop/libexec/hadoop-functions.sh: line 2461: HADOOP_ORG.APACHE.SQOOP.SQOOP_OPTS: invalid variable name\n2022-12-23 17:13:06,493 INFO sqoop.Sqoop: Running Sqoop version: 1.4.7\n2022-12-23 17:13:06,683 WARN tool.BaseSqoopTool: Setting your password on the command-line is insecure. Consider using -P instead.\nException in thread &quot;main&quot; java.lang.NoClassDefFoundError: org/apache/avro/LogicalType\n    at org.apache.sqoop.manager.DefaultManagerFactory.accept(DefaultManagerFactory.java:67)\n    at org.apache.sqoop.ConnFactory.getManager(ConnFactory.java:184)\n    at org.apache.sqoop.tool.BaseSqoopTool.init(BaseSqoopTool.java:272)\n    at org.apache.sqoop.tool.EvalSqlTool.run(EvalSqlTool.java:56)\n    at org.apache.sqoop.Sqoop.run(Sqoop.java:147)\n    at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:76)\n    at org.apache.sqoop.Sqoop.runSqoop(Sqoop.java:183)\n    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:234)\n    at org.apache.sqoop.Sqoop.runTool(Sqoop.java:243)\n    at org.apache.sqoop.Sqoop.main(Sqoop.java:252)\nCaused by: java.lang.ClassNotFoundException: org.apache.avro.LogicalType\n    at java.net.URLClassLoader.findClass(URLClassLoader.java:387)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:418)\n    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:352)\n    at java.lang.ClassLoader.loadClass(ClassLoader.java:351)\n    ... 10 more\nh-user@h-primary:~/s\n</code></pre>\n<p>Trying to read mysql table and databases in sqoop using eval when executed getting above error.\ni tried outside of bin also,still same error.whats going wrong here ?</p>\n"},{"tags":["java","android","flutter","sdk"],"comments":[{"owner":{"account_id":8108093,"reputation":2413,"user_id":6109034,"display_name":"Mimu Saha Tishan"},"score":1,"creation_date":1669635358,"post_id":73040651,"comment_id":131679355,"body_markdown":"Here I have written the solution, You can follow this link https://stackoverflow.com/a/74599949/6109034","body":"Here I have written the solution, You can follow this link <a href=\"https://stackoverflow.com/a/74599949/6109034\">stackoverflow.com/a/74599949/6109034</a>"}],"answers":[{"comments":[{"owner":{"account_id":16445686,"reputation":51,"user_id":11880559,"display_name":"Mahir Yakup Şahin"},"score":0,"creation_date":1658271465,"post_id":73040878,"comment_id":129009243,"body_markdown":"shaik h if you are talking about C:\\users\\myusername  then i did deleted it but did not worked again.","body":"shaik h if you are talking about C:\\users\\myusername  then i did deleted it but did not worked again."},{"owner":{"account_id":15789852,"reputation":46,"user_id":11393399,"display_name":"Abubakar shaikh"},"score":0,"creation_date":1658295304,"post_id":73040878,"comment_id":129012840,"body_markdown":"Then you need to reinstall android studio again.","body":"Then you need to reinstall android studio again."},{"owner":{"account_id":15789852,"reputation":46,"user_id":11393399,"display_name":"Abubakar shaikh"},"score":0,"creation_date":1658295372,"post_id":73040878,"comment_id":129012860,"body_markdown":"After that, go to android studio folder at c:\\ ... Delete duplicate android studio folder.","body":"After that, go to android studio folder at c:\\ ... Delete duplicate android studio folder."}],"tags":[],"owner":{"account_id":15789852,"reputation":46,"user_id":11393399,"display_name":"Abubakar shaikh"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658250030,"creation_date":1658250030,"answer_id":73040878,"question_id":73040651,"body_markdown":"You should delete .gradle folder under user name. Then again run your project.","title":"Flutter &quot;You need Java 11 or higher to build your app with this version of Gradle.&quot; error","body":"<p>You should delete .gradle folder under user name. Then again run your project.</p>\n"},{"tags":[],"owner":{"account_id":15392619,"reputation":11,"user_id":11104775,"display_name":"karim adel rashad"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671828158,"creation_date":1671828158,"answer_id":74903845,"question_id":73040651,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8CpyD.png\r\n\r\nchange  gradle to 4.1.0\r\nand it will be run","title":"Flutter &quot;You need Java 11 or higher to build your app with this version of Gradle.&quot; error","body":"<p><a href=\"https://i.stack.imgur.com/8CpyD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8CpyD.png\" alt=\"enter image description here\" /></a></p>\n<p>change  gradle to 4.1.0\nand it will be run</p>\n"}],"owner":{"account_id":16445686,"reputation":51,"user_id":11880559,"display_name":"Mahir Yakup Şahin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2861,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671828158,"creation_date":1658248827,"question_id":73040651,"body_markdown":"When i create a new project, and press run i get this error.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThe fact is i do already have jdk verison of 15 and my previously created projects do open and run without any errors. Also, if i add ```org.gradle.java.home=C:/Program Files/Java/jdk-15.0.1``` line to my ```gradle.properties``` file the app runs without error but this way just does not seems right way to do it. \r\n\r\nI have tried to change the SDK version from the project structure like some other questions and answers but it did not worked either. As an additon to other problems i do not have the same project structure screen as they showed so.\r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n[![enter image description here][3]][3]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/baIFg.jpg\r\n  [2]: https://i.stack.imgur.com/RIIBZ.jpg\r\n  [3]: https://i.stack.imgur.com/xeHHw.jpg\r\n\r\n\r\n\r\nI do not know what to do right now, i would be very grateful if you could help me.","title":"Flutter &quot;You need Java 11 or higher to build your app with this version of Gradle.&quot; error","body":"<p>When i create a new project, and press run i get this error.</p>\n<p><a href=\"https://i.stack.imgur.com/baIFg.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/baIFg.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The fact is i do already have jdk verison of 15 and my previously created projects do open and run without any errors. Also, if i add <code>org.gradle.java.home=C:/Program Files/Java/jdk-15.0.1</code> line to my <code>gradle.properties</code> file the app runs without error but this way just does not seems right way to do it.</p>\n<p>I have tried to change the SDK version from the project structure like some other questions and answers but it did not worked either. As an additon to other problems i do not have the same project structure screen as they showed so.</p>\n<p><a href=\"https://i.stack.imgur.com/RIIBZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RIIBZ.jpg\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/xeHHw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xeHHw.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I do not know what to do right now, i would be very grateful if you could help me.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"comments":[{"owner":{"account_id":1949790,"reputation":563,"user_id":1754147,"accept_rate":59,"display_name":"Dreamer"},"score":0,"creation_date":1671836074,"post_id":74903798,"comment_id":132187276,"body_markdown":"Thanks! This is super helpful.\n\n&gt; &#39;It needs to serialize any object to bytes to send over the network.&#39; \nDo you happen to know any documentation explaining this the expected behavior? I just feel this is not super efficient, so want to confirm further.","body":"Thanks! This is super helpful.  &gt; &#39;It needs to serialize any object to bytes to send over the network.&#39;  Do you happen to know any documentation explaining this the expected behavior? I just feel this is not super efficient, so want to confirm further."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671837114,"post_id":74903798,"comment_id":132187441,"body_markdown":"This is basic concept of serialization and TCP networking, nothing Kafka related","body":"This is basic concept of serialization and TCP networking, nothing Kafka related"},{"owner":{"account_id":1949790,"reputation":563,"user_id":1754147,"accept_rate":59,"display_name":"Dreamer"},"score":0,"creation_date":1671843598,"post_id":74903798,"comment_id":132188201,"body_markdown":"I&#39;m asking about the part where streams library don&#39;t just pass object among operations, if it passes the serialized (key, val) pairs to the brokers every time, then it&#39;s a big IO overhead. Doesn&#39;t this [map](https://github.com/apache/kafka/blob/3.3/streams/examples/src/main/java/org/apache/kafka/streams/examples/pageview/PageViewTypedDemo.java#L214) operation directly convert the string key to the object without specifying the key serdes?","body":"I&#39;m asking about the part where streams library don&#39;t just pass object among operations, if it passes the serialized (key, val) pairs to the brokers every time, then it&#39;s a big IO overhead. Doesn&#39;t this <a href=\"https://github.com/apache/kafka/blob/3.3/streams/examples/src/main/java/org/apache/kafka/streams/examples/pageview/PageViewTypedDemo.java#L214\" rel=\"nofollow noreferrer\">map</a> operation directly convert the string key to the object without specifying the key serdes?"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671844316,"post_id":74903798,"comment_id":132188258,"body_markdown":"Stateless operations such as `map` or `forEach` don&#39;t need network requests, no. But the JVM still needs to process the data as bytes. Kafka&#39;s serializers use generics, as well, so you need to give explicit type information on the operations.","body":"Stateless operations such as <code>map</code> or <code>forEach</code> don&#39;t need network requests, no. But the JVM still needs to process the data as bytes. Kafka&#39;s serializers use generics, as well, so you need to give explicit type information on the operations."},{"owner":{"account_id":1949790,"reputation":563,"user_id":1754147,"accept_rate":59,"display_name":"Dreamer"},"score":1,"creation_date":1671847508,"post_id":74903798,"comment_id":132188492,"body_markdown":"Thanks for mentioning that. I missed this. So for stateful operations, the streams library persists the state to a local state store (e.g. each aggregation result for a key will be recorded) and this is backed by a Kafka change log partition for fault tolerance (each aggregation result for a key will be streamed back to Kafka), thus Serdes are requied. Helpful video: https://developer.confluent.io/learn-kafka/kafka-streams/stateful-operations/","body":"Thanks for mentioning that. I missed this. So for stateful operations, the streams library persists the state to a local state store (e.g. each aggregation result for a key will be recorded) and this is backed by a Kafka change log partition for fault tolerance (each aggregation result for a key will be streamed back to Kafka), thus Serdes are requied. Helpful video: <a href=\"https://developer.confluent.io/learn-kafka/kafka-streams/stateful-operations/\" rel=\"nofollow noreferrer\">developer.confluent.io/learn-kafka/kafka-streams/&hellip;</a>"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671828036,"creation_date":1671827710,"answer_id":74903798,"question_id":74903542,"body_markdown":"&gt; Why are Serdes required for operations\r\n\r\nKafka stores bytes. Streams API doesn&#39;t pass objects from one operation to the other, it uses Kafka as a message bus. It needs to serialize any object to bytes to send over the network. \r\n\r\nIf you are working with JSON, then Kafka Streams [already has a built-in way to create a JSONSerde](https://github.com/apache/kafka/blob/3.3/streams/examples/src/main/java/org/apache/kafka/streams/examples/pageview/PageViewUntypedDemo.java#L70-L72); there doesn&#39;t need to be an `ObjectMapper` one since you can use `Serdes.serdeFrom` static method. (Also, it would create a dependency on `connect-json` module and bloat the `kafka-streams` classpath). \r\n\r\nAlternatively, Spring-Kafka also has [`JsonSerde`](https://docs.spring.io/spring-kafka/api/org/springframework/kafka/support/serializer/JsonSerde.html). And Confluent maintains `AvroSerde`, `ProtobufSerde`, etc. to use with classes generated from those tools. \r\n\r\n&gt; got String serializer not compatible with the UserBankBalance object\r\n\r\nYou need to use some combination of [`Grouped`, `Materialized`, `Consumed`, or `Produced`](https://kafka.apache.org/33/javadoc/org/apache/kafka/streams/kstream/package-summary.html) classes with each operation to override the default topology serde.","title":"Kafka Streams - Serdes for Custom Objects","body":"<blockquote>\n<p>Why are Serdes required for operations</p>\n</blockquote>\n<p>Kafka stores bytes. Streams API doesn't pass objects from one operation to the other, it uses Kafka as a message bus. It needs to serialize any object to bytes to send over the network.</p>\n<p>If you are working with JSON, then Kafka Streams <a href=\"https://github.com/apache/kafka/blob/3.3/streams/examples/src/main/java/org/apache/kafka/streams/examples/pageview/PageViewUntypedDemo.java#L70-L72\" rel=\"nofollow noreferrer\">already has a built-in way to create a JSONSerde</a>; there doesn't need to be an <code>ObjectMapper</code> one since you can use <code>Serdes.serdeFrom</code> static method. (Also, it would create a dependency on <code>connect-json</code> module and bloat the <code>kafka-streams</code> classpath).</p>\n<p>Alternatively, Spring-Kafka also has <a href=\"https://docs.spring.io/spring-kafka/api/org/springframework/kafka/support/serializer/JsonSerde.html\" rel=\"nofollow noreferrer\"><code>JsonSerde</code></a>. And Confluent maintains <code>AvroSerde</code>, <code>ProtobufSerde</code>, etc. to use with classes generated from those tools.</p>\n<blockquote>\n<p>got String serializer not compatible with the UserBankBalance object</p>\n</blockquote>\n<p>You need to use some combination of <a href=\"https://kafka.apache.org/33/javadoc/org/apache/kafka/streams/kstream/package-summary.html\" rel=\"nofollow noreferrer\"><code>Grouped</code>, <code>Materialized</code>, <code>Consumed</code>, or <code>Produced</code></a> classes with each operation to override the default topology serde.</p>\n"}],"owner":{"account_id":1949790,"reputation":563,"user_id":1754147,"accept_rate":59,"display_name":"Dreamer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1616,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74903798,"answer_count":1,"score":0,"last_activity_date":1671828036,"creation_date":1671825369,"question_id":74903542,"body_markdown":"I&#39;m pretty new to Kafka Streams and found overall the API is confusing and documentation not easy to follow. I&#39;m writing a simple streams app like this: \r\n\r\n1. Input stream: key(String)-&gt;userID, value(String)-&gt;a user&#39;s transaction record JSON string.\r\n2. Topology: aggregate the above input and generate a KTable&lt;String, UserAccountBalance&gt;. Key is userId, value is a custom object updated as the aggregation goes.\r\n\r\n        final KStream&lt;String, String&gt; transactionsInput = streamsBuilder.stream(&quot;bank-balance-input-topic&quot;);\r\n        final KTable&lt;String, UserBankBalance&gt; table =\r\n                transactionsInput.groupBy((key, value) -&gt; key)\r\n                                 .aggregate(() -&gt; new UserBankBalance(&quot;dummyUserId&quot;, 0, &quot;1866-12-23T17:47:37Z&quot;),\r\n                                            (userName, transactionRecordStr, userBankBalance) -&gt; {\r\n                                                // Code does the following:\r\n                                                //   1. Deserialize the transactionRecordStr\r\n                                                //   2. Update the UserBankBalance object.\r\n                                                //   return userBankBalance;\r\n                                            });\r\n\r\n(Default key,value serdes configured to be String)\r\nHowever, when running some sanity tests, I got String serializer not compatible with the UserBankBalance object. \r\n\r\n1. Why are Serdes required for operations like mapValues, groupByKey, aggregate?\r\n\r\n   My understanding: \r\n     * Streams library need to materialize the object using the default serdes to update internal state? \r\n     * If repartition happens, the key, value needs to be serialized and stored back to the internal partition for further processing?\r\n     * Given the above, even if we just create the `KTable&lt;String,UserBankBalance&gt;` as in-memory representation, the Serdes is still required.\r\n  \r\n   I&#39;ve read the official doc and API doc, just couldn&#39;t find any good clarification.\r\n\r\n2. Why Kafka Stream&#39;s library doesn&#39;t provide a default `ObjectMapperSerdes` which utilize the Jackson&#39;s `ObjectMapper` (Like [this official example](https://github.com/apache/kafka/blob/3.3/streams/examples/src/main/java/org/apache/kafka/streams/examples/pageview/PageViewTypedDemo.java#L83))? I imagine lots of users would have similar use cases and there would be duplicate efforts for the library users to do so.\r\n\r\nReferences:\r\n* [Architecture](https://kafka.apache.org/33/documentation/streams/architecture)\r\n* [DATA TYPES AND SERIALIZATION](https://kafka.apache.org/20/documentation/streams/developer-guide/datatypes)\r\n","title":"Kafka Streams - Serdes for Custom Objects","body":"<p>I'm pretty new to Kafka Streams and found overall the API is confusing and documentation not easy to follow. I'm writing a simple streams app like this:</p>\n<ol>\n<li><p>Input stream: key(String)-&gt;userID, value(String)-&gt;a user's transaction record JSON string.</p>\n</li>\n<li><p>Topology: aggregate the above input and generate a KTable&lt;String, UserAccountBalance&gt;. Key is userId, value is a custom object updated as the aggregation goes.</p>\n<pre><code> final KStream&lt;String, String&gt; transactionsInput = streamsBuilder.stream(&quot;bank-balance-input-topic&quot;);\n final KTable&lt;String, UserBankBalance&gt; table =\n         transactionsInput.groupBy((key, value) -&gt; key)\n                          .aggregate(() -&gt; new UserBankBalance(&quot;dummyUserId&quot;, 0, &quot;1866-12-23T17:47:37Z&quot;),\n                                     (userName, transactionRecordStr, userBankBalance) -&gt; {\n                                         // Code does the following:\n                                         //   1. Deserialize the transactionRecordStr\n                                         //   2. Update the UserBankBalance object.\n                                         //   return userBankBalance;\n                                     });\n</code></pre>\n</li>\n</ol>\n<p>(Default key,value serdes configured to be String)\nHowever, when running some sanity tests, I got String serializer not compatible with the UserBankBalance object.</p>\n<ol>\n<li><p>Why are Serdes required for operations like mapValues, groupByKey, aggregate?</p>\n<p>My understanding:</p>\n<ul>\n<li>Streams library need to materialize the object using the default serdes to update internal state?</li>\n<li>If repartition happens, the key, value needs to be serialized and stored back to the internal partition for further processing?</li>\n<li>Given the above, even if we just create the <code>KTable&lt;String,UserBankBalance&gt;</code> as in-memory representation, the Serdes is still required.</li>\n</ul>\n<p>I've read the official doc and API doc, just couldn't find any good clarification.</p>\n</li>\n<li><p>Why Kafka Stream's library doesn't provide a default <code>ObjectMapperSerdes</code> which utilize the Jackson's <code>ObjectMapper</code> (Like <a href=\"https://github.com/apache/kafka/blob/3.3/streams/examples/src/main/java/org/apache/kafka/streams/examples/pageview/PageViewTypedDemo.java#L83\" rel=\"nofollow noreferrer\">this official example</a>)? I imagine lots of users would have similar use cases and there would be duplicate efforts for the library users to do so.</p>\n</li>\n</ol>\n<p>References:</p>\n<ul>\n<li><a href=\"https://kafka.apache.org/33/documentation/streams/architecture\" rel=\"nofollow noreferrer\">Architecture</a></li>\n<li><a href=\"https://kafka.apache.org/20/documentation/streams/developer-guide/datatypes\" rel=\"nofollow noreferrer\">DATA TYPES AND SERIALIZATION</a></li>\n</ul>\n"},{"tags":["java","android","androidpdfviewer"],"comments":[{"owner":{"account_id":23347294,"reputation":1,"user_id":17421381,"display_name":"user17421381"},"score":0,"creation_date":1671831278,"post_id":74903815,"comment_id":132186532,"body_markdown":"@KJ so please explain more about bookmarks cause they are getting more wierd","body":"@KJ so please explain more about bookmarks cause they are getting more wierd"},{"owner":{"account_id":23347294,"reputation":1,"user_id":17421381,"display_name":"user17421381"},"score":0,"creation_date":1671999321,"post_id":74903815,"comment_id":132206332,"body_markdown":"Well thanks for the explanation and help @KJ so how do we extract bookmarks and how do we make them using pdfviewer lib","body":"Well thanks for the explanation and help @KJ so how do we extract bookmarks and how do we make them using pdfviewer lib"},{"owner":{"account_id":23347294,"reputation":1,"user_id":17421381,"display_name":"user17421381"},"score":0,"creation_date":1672084288,"post_id":74903815,"comment_id":132219016,"body_markdown":"I have seen it that&#39;s what I wanted so how am I getting them in java@KJ","body":"I have seen it that&#39;s what I wanted so how am I getting them in java@KJ"},{"owner":{"account_id":23347294,"reputation":1,"user_id":17421381,"display_name":"user17421381"},"score":0,"creation_date":1672162346,"post_id":74903815,"comment_id":132233539,"body_markdown":"Well I had gotten them but I cant insert them into the dialog","body":"Well I had gotten them but I cant insert them into the dialog"},{"owner":{"account_id":23347294,"reputation":1,"user_id":17421381,"display_name":"user17421381"},"score":0,"creation_date":1672168380,"post_id":74903815,"comment_id":132235190,"body_markdown":"If I use log.i it printed them but I I use a variable it says null","body":"If I use log.i it printed them but I I use a variable it says null"}],"owner":{"account_id":23347294,"reputation":1,"user_id":17421381,"display_name":"user17421381"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":50,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671827876,"creation_date":1671827876,"question_id":74903815,"body_markdown":"Well I am using pdf viewer by bartsek but when I try to retrieve bookmarks using the bookmark function it gives me wierd characters \r\nHere is the code \r\n```\r\npdfview.getTableofContents.toString()\r\n```\r\n  [Wierd characters](https://i.stack.imgur.com/9kht3.jpg)\r\n\r\nHow can I achieve this \r\n\r\nI want a list of bookmarks and a way of bookmarking pages\r\nI have no idea about it","title":"How to bookmark and retrieve bookmarks in android java","body":"<p>Well I am using pdf viewer by bartsek but when I try to retrieve bookmarks using the bookmark function it gives me wierd characters\nHere is the code</p>\n<pre><code>pdfview.getTableofContents.toString()\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/9kht3.jpg\" rel=\"nofollow noreferrer\">Wierd characters</a></p>\n<p>How can I achieve this</p>\n<p>I want a list of bookmarks and a way of bookmarking pages\nI have no idea about it</p>\n"},{"tags":["java","spring-boot","oauth-2.0","openid-connect","spring-oauth2"],"owner":{"account_id":18845492,"reputation":1,"user_id":13745893,"display_name":"melmarz"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671827091,"creation_date":1671827091,"question_id":74903729,"body_markdown":"I Have a situation when a client send and authorize request as such below: \r\n`\r\nhttp://localhost:8080/oauth2/authorize?scope=openid&amp;response_type=code&amp;redirect_uri=https://api.test.local:9443/commonauth&amp;state=b3cefc9d-2096-4a3c-a291-58781a171b5f,OIDC&amp;client_id=client-id&amp;login_hint=BfcZPa4vv_Q6Y_o0VwqTOnUA4pcPJLTNgSTq3vqiouJFY4TaMd6kKxanim2CDhilkQhrvzbv7fanE3-vpyG4dtLky5bLJFpbDYP7eIAtuP7WLe00mlMUpUPzd733V39TsWhf2lOkpP0z2JcdCQvTi7b2W1OFxPoHrNUMCFhj0AnJqaTal3O7l1Oo1-xrlJR3nz_p_EeK-eWK6bMQZqPvon8AHkQMtq8txClqM3aywZtXJ0Jea4fJyVEhvV_tnIXxgYg296_a5HsnnmcPlkVk-1TMZesr07dC2OBh0m02gGcWW-TPunBH5SRTI8BwzgwFBSig8Js_4gkgGwxhTpBo5g`\r\n\r\nNotice that we have a login_hint query param that we need later on the process \r\n\r\ni wrote an interceptor to intercept the query param after the AbstractPreAuthenticatedProcessingFilter\r\n\r\nOnce storing it in the SecurityContextHolder it seem that i lost it later in the process once getting to the login page\r\n\r\ndoes any have a slick way to store this information (by the way the request.getSession() resulted in the same problem\r\n\r\n\r\n\r\n```\r\npublic class LoginHintFilter extends OncePerRequestFilter {\r\n\r\n    private static final Logger logger = LoggerFactory.getLogger(LoginHintFilter.class);\r\n\r\n\r\n    @Override\r\n    public void doFilterInternal(final HttpServletRequest httpServletRequest, final HttpServletResponse response, final FilterChain chain) throws ServletException, IOException {\r\n        try {\r\n            if (Objects.equals(httpServletRequest.getServletPath(), &quot;/oauth2/authorize&quot;)) {\r\n                if (httpServletRequest.getParameter(&quot;login_hint&quot;) == null) {\r\n                    throw new SecurityLoginHintException(&quot;Error No security &#39;login_hint&#39; found&quot;);\r\n                }\r\n                ....\r\n            }\r\n        } catch (SecurityLoginHintException | NoSuchPaddingException | IllegalBlockSizeException |\r\n                 NoSuchAlgorithmException | BadPaddingException | InvalidKeyException e) {\r\n            logger.error(e.getMessage());\r\n        }\r\n        try {\r\n            chain.doFilter(httpServletRequest, response);\r\n        } catch (final Exception e) {\r\n            throw e;\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\n    @Bean\r\n    @Order(Ordered.HIGHEST_PRECEDENCE)\r\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\r\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\r\n        return http.getConfigurer(OAuth2AuthorizationServerConfigurer.class).oidc(Customizer.withDefaults())\r\n                .and()\r\n                .formLogin().loginPage(&quot;/login_kvk&quot;).and()\r\n                .addFilterAfter(bsnDecryptionFilter, AbstractPreAuthenticatedProcessingFilter.class)\r\n                .build();\r\n    }\r\n```\r\n\r\n\r\n```\r\n@Bean\r\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n   return http.formLogin().loginPage(&quot;/login&quot;).and().authorizeRequests().requestMatchers(DEFAULT_WHITELIST).permitAll().anyRequest().authenticated().and().build();\r\n}\r\n```\r\n\r\n\r\n","title":"Spring boot authorization server (1.0.0) intercept and store login_hint as a query param","body":"<p>I Have a situation when a client send and authorize request as such below:\n<code> http://localhost:8080/oauth2/authorize?scope=openid&amp;response_type=code&amp;redirect_uri=https://api.test.local:9443/commonauth&amp;state=b3cefc9d-2096-4a3c-a291-58781a171b5f,OIDC&amp;client_id=client-id&amp;login_hint=BfcZPa4vv_Q6Y_o0VwqTOnUA4pcPJLTNgSTq3vqiouJFY4TaMd6kKxanim2CDhilkQhrvzbv7fanE3-vpyG4dtLky5bLJFpbDYP7eIAtuP7WLe00mlMUpUPzd733V39TsWhf2lOkpP0z2JcdCQvTi7b2W1OFxPoHrNUMCFhj0AnJqaTal3O7l1Oo1-xrlJR3nz_p_EeK-eWK6bMQZqPvon8AHkQMtq8txClqM3aywZtXJ0Jea4fJyVEhvV_tnIXxgYg296_a5HsnnmcPlkVk-1TMZesr07dC2OBh0m02gGcWW-TPunBH5SRTI8BwzgwFBSig8Js_4gkgGwxhTpBo5g</code></p>\n<p>Notice that we have a login_hint query param that we need later on the process</p>\n<p>i wrote an interceptor to intercept the query param after the AbstractPreAuthenticatedProcessingFilter</p>\n<p>Once storing it in the SecurityContextHolder it seem that i lost it later in the process once getting to the login page</p>\n<p>does any have a slick way to store this information (by the way the request.getSession() resulted in the same problem</p>\n<pre><code>public class LoginHintFilter extends OncePerRequestFilter {\n\n    private static final Logger logger = LoggerFactory.getLogger(LoginHintFilter.class);\n\n\n    @Override\n    public void doFilterInternal(final HttpServletRequest httpServletRequest, final HttpServletResponse response, final FilterChain chain) throws ServletException, IOException {\n        try {\n            if (Objects.equals(httpServletRequest.getServletPath(), &quot;/oauth2/authorize&quot;)) {\n                if (httpServletRequest.getParameter(&quot;login_hint&quot;) == null) {\n                    throw new SecurityLoginHintException(&quot;Error No security 'login_hint' found&quot;);\n                }\n                ....\n            }\n        } catch (SecurityLoginHintException | NoSuchPaddingException | IllegalBlockSizeException |\n                 NoSuchAlgorithmException | BadPaddingException | InvalidKeyException e) {\n            logger.error(e.getMessage());\n        }\n        try {\n            chain.doFilter(httpServletRequest, response);\n        } catch (final Exception e) {\n            throw e;\n        }\n    }\n}\n</code></pre>\n<pre><code>    @Bean\n    @Order(Ordered.HIGHEST_PRECEDENCE)\n    public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http) throws Exception {\n        OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);\n        return http.getConfigurer(OAuth2AuthorizationServerConfigurer.class).oidc(Customizer.withDefaults())\n                .and()\n                .formLogin().loginPage(&quot;/login_kvk&quot;).and()\n                .addFilterAfter(bsnDecryptionFilter, AbstractPreAuthenticatedProcessingFilter.class)\n                .build();\n    }\n</code></pre>\n<pre><code>@Bean\npublic SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n   return http.formLogin().loginPage(&quot;/login&quot;).and().authorizeRequests().requestMatchers(DEFAULT_WHITELIST).permitAll().anyRequest().authenticated().and().build();\n}\n</code></pre>\n"},{"tags":["java","bash","macos","terminal","command"],"comments":[{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":0,"creation_date":1671796339,"post_id":74899170,"comment_id":132178056,"body_markdown":"You  could try to set the permissions with the ProcesBuilder. For further info have a look on my blog post: https://thilosdevblog.wordpress.com/2022/09/18/how-to-properly-handle-the-output-of-the-processbuilder/","body":"You  could try to set the permissions with the ProcesBuilder. For further info have a look on my blog post: <a href=\"https://thilosdevblog.wordpress.com/2022/09/18/how-to-properly-handle-the-output-of-the-processbuilder/\" rel=\"nofollow noreferrer\">thilosdevblog.wordpress.com/2022/09/18/&hellip;</a>"},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1671797377,"post_id":74899170,"comment_id":132178337,"body_markdown":"You could perform the equivalent of `chmod a+x` in your Java program by using `myFile.setExecutable(true)` https://docs.oracle.com/javase/7/docs/api/java/io/File.html#setExecutable(boolean)","body":"You could perform the equivalent of <code>chmod a+x</code> in your Java program by using <code>myFile.setExecutable(true)</code> <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/File.html#setExecutable(boolean)\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/io/&hellip;</a>"},{"owner":{"account_id":465198,"reputation":1536,"user_id":869134,"accept_rate":73,"display_name":"Lasse"},"score":0,"creation_date":1671799278,"post_id":74899170,"comment_id":132178865,"body_markdown":"Do you need the solution to be Java-specific? Otherwise, the Automator app can generate you an app that runs a shell script","body":"Do you need the solution to be Java-specific? Otherwise, the Automator app can generate you an app that runs a shell script"},{"owner":{"account_id":83440,"reputation":12537,"user_id":233944,"accept_rate":78,"display_name":"TheNextman"},"score":0,"creation_date":1671806964,"post_id":74899170,"comment_id":132180884,"body_markdown":"Why is this tagged Java?","body":"Why is this tagged Java?"},{"owner":{"account_id":83440,"reputation":12537,"user_id":233944,"accept_rate":78,"display_name":"TheNextman"},"score":1,"creation_date":1671807024,"post_id":74899170,"comment_id":132180900,"body_markdown":"Make your script executable and then distribute it inside a .tar file. Alternatively, wrap it inside an .app and sign and notarize it with an Apple Developer ID.","body":"Make your script executable and then distribute it inside a .tar file. Alternatively, wrap it inside an .app and sign and notarize it with an Apple Developer ID."},{"owner":{"account_id":24391745,"reputation":29,"user_id":18321622,"display_name":"L_Karapetti"},"score":0,"creation_date":1671826324,"post_id":74899170,"comment_id":132185509,"body_markdown":"@Lasse I&#39;dont. Can I make an automator work on other computers??","body":"@Lasse I&#39;dont. Can I make an automator work on other computers??"},{"owner":{"account_id":24391745,"reputation":29,"user_id":18321622,"display_name":"L_Karapetti"},"score":0,"creation_date":1671826389,"post_id":74899170,"comment_id":132185526,"body_markdown":"@TheNextman Hi, I forgot to mention that , I am trying to distribute a java app.","body":"@TheNextman Hi, I forgot to mention that , I am trying to distribute a java app."},{"owner":{"account_id":24391745,"reputation":29,"user_id":18321622,"display_name":"L_Karapetti"},"score":0,"creation_date":1671826589,"post_id":74899170,"comment_id":132185574,"body_markdown":"@TheNextman I will try it and let people here to know if it works.","body":"@TheNextman I will try it and let people here to know if it works."},{"owner":{"account_id":2686715,"reputation":8194,"user_id":2320961,"display_name":"Nic3500"},"score":0,"creation_date":1672604316,"post_id":74899170,"comment_id":132312274,"body_markdown":"`sh myFile.sh`.  This way the executable is `sh` a system command, and your script can remain not +x.","body":"<code>sh myFile.sh</code>.  This way the executable is <code>sh</code> a system command, and your script can remain not +x."}],"owner":{"account_id":24391745,"reputation":29,"user_id":18321622,"display_name":"L_Karapetti"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":360,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671826468,"creation_date":1671795224,"question_id":74899170,"body_markdown":"I have to make a click to run  .command/ shell script (.sh) for my users on mac.\r\n\r\nI did manage to make .sh work=&gt; to do that I have to type these in to terminal at that folder.\r\n\r\n    chmod a+x myFile.sh\r\nBut none of my users are technical. So they cant type on terminal.\r\n\r\nI tried creating .command file. But this also needs special permission to execute.\r\nAnd that permission cant be given via right click- info - permissions.\r\nThis permission can only given by terminal code.Thx to stpd mac security policies.\r\n\r\nAlso  creating .app won&#39;t work , because that way also needs a permission code on terminal.\r\n\r\nIs there any hero to help me solve this problem\r\n\r\nEdit 1: Forgot to mention that app I am trying to distribute is Java app, .jar. I need to run sh to run specific commands to run myapp.jar.","title":"How to bypass Mac permission to run .command or .sh file","body":"<p>I have to make a click to run  .command/ shell script (.sh) for my users on mac.</p>\n<p>I did manage to make .sh work=&gt; to do that I have to type these in to terminal at that folder.</p>\n<pre><code>chmod a+x myFile.sh\n</code></pre>\n<p>But none of my users are technical. So they cant type on terminal.</p>\n<p>I tried creating .command file. But this also needs special permission to execute.\nAnd that permission cant be given via right click- info - permissions.\nThis permission can only given by terminal code.Thx to stpd mac security policies.</p>\n<p>Also  creating .app won't work , because that way also needs a permission code on terminal.</p>\n<p>Is there any hero to help me solve this problem</p>\n<p>Edit 1: Forgot to mention that app I am trying to distribute is Java app, .jar. I need to run sh to run specific commands to run myapp.jar.</p>\n"},{"tags":["java","http","http-headers","basic-authentication","java-17"],"answers":[{"comments":[{"owner":{"account_id":5238567,"reputation":113,"user_id":4186378,"display_name":"Piotr Sulecki"},"score":0,"creation_date":1673630359,"post_id":74903640,"comment_id":132549944,"body_markdown":"As I said above, the problem is not with the Digest authentication. The problem is that the  Authorization header is not being sent at all with the request. If the original request contains the Basic authentication data in the header, the request is processed and the camera doesn&#39;t ask for Digest authentication. The problem is, this was done using Apache&#39;s HttpClient, and I wanted to do this using the JDK one.","body":"As I said above, the problem is not with the Digest authentication. The problem is that the  Authorization header is not being sent at all with the request. If the original request contains the Basic authentication data in the header, the request is processed and the camera doesn&#39;t ask for Digest authentication. The problem is, this was done using Apache&#39;s HttpClient, and I wanted to do this using the JDK one."},{"owner":{"account_id":5686961,"reputation":631,"user_id":4496194,"accept_rate":75,"display_name":"taranion"},"score":0,"creation_date":1676904250,"post_id":74903640,"comment_id":133226062,"body_markdown":"Sorry, I misread your post.","body":"Sorry, I misread your post."},{"owner":{"account_id":5686961,"reputation":631,"user_id":4496194,"accept_rate":75,"display_name":"taranion"},"score":0,"creation_date":1676904376,"post_id":74903640,"comment_id":133226107,"body_markdown":"Did you try setting a global ``Authenticator.setDefault(...)`` instead of setting the authenticator per request?","body":"Did you try setting a global <code>Authenticator.setDefault(...)</code> instead of setting the authenticator per request?"}],"tags":[],"owner":{"account_id":5686961,"reputation":631,"user_id":4496194,"accept_rate":75,"display_name":"taranion"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671826256,"creation_date":1671826256,"answer_id":74903640,"question_id":72112433,"body_markdown":"You are doing nothing wrong. It seems the new HttpClient does not support Digest authentication out of the box. See here: https://bugs.openjdk.org/browse/JDK-8285888\r\n\r\nThe suggested way is to implement digest authentication yourself on application level. ","title":"java.net.http.HttpRequest not sending &quot;Authorization:&quot; header - why?","body":"<p>You are doing nothing wrong. It seems the new HttpClient does not support Digest authentication out of the box. See here: <a href=\"https://bugs.openjdk.org/browse/JDK-8285888\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8285888</a></p>\n<p>The suggested way is to implement digest authentication yourself on application level.</p>\n"}],"owner":{"account_id":5238567,"reputation":113,"user_id":4186378,"display_name":"Piotr Sulecki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":672,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1671826256,"creation_date":1651664763,"question_id":72112433,"body_markdown":"I&#39;m trying to download an image from a HTTP camera. The problem is, the camera in question requires (basic) authentication. I know basic auth should not be used over HTTP, but we&#39;re talking about an isolated network, so that&#39;s not the point here.\r\n\r\nI&#39;m trying to use Java17 native java.net.http.HttpClient for this. I&#39;m using the following code:\r\n\r\n    protected BufferedImage retrieveImage(URI uri) throws IOException, InterruptedException {\r\n        log.trace(&quot;Using authorization header of &#39;{}&#39;&quot;, basicAuthString);\r\n        HttpRequest request = HttpRequest.newBuilder()\r\n                                         .uri(uri)\r\n                                         .header(&quot;Authorization&quot;, basicAuthString)\r\n                                         .GET()\r\n                                         .timeout(Duration.ofSeconds(20))\r\n                                         .build();\r\n        return retrieveImage(request);\r\n    }\r\n\r\n    private BufferedImage retrieveImage(HttpRequest request) throws IOException, InterruptedException {\r\n        HttpResponse&lt;byte[]&gt; response = null;\r\n        try {\r\n            response = client.send(request, HttpResponse.BodyHandlers.ofByteArray());\r\n        } catch (ConnectException ex) {\r\n            log.error(&quot;Connection refused when downloading image from &quot; + uri.toString());\r\n            return null;\r\n        }\r\n        if (response.statusCode() != 200) { // ok\r\n            log.error(&quot;Error retrieving image, status code is {}&quot;, response.statusCode());\r\n            return null;\r\n        }\r\n        ByteArrayInputStream bis   = new ByteArrayInputStream(response.body());\r\n        BufferedImage        image = ImageIO.read(bis);\r\n        return image;\r\n    }\r\n\r\nThe HttpClient variable (client in the above code) is created by:\r\n\r\n                this.client = HttpClient.newBuilder()\r\n                                    .connectTimeout(Duration.ofSeconds(5))\r\n                                    .followRedirects(HttpClient.Redirect.NORMAL)\r\n                                    .authenticator(new Authenticator() {\r\n                                        @Override\r\n                                        protected PasswordAuthentication getPasswordAuthentication() {\r\n                                            return new PasswordAuthentication(camera.getLogin(), camera.getPassword().toCharArray());\r\n                                        }\r\n                                    })\r\n                                    .version(HttpClient.Version.HTTP_1_1)\r\n                                    .build();\r\n\r\n\r\nSince I&#39;m using Basic authorization, I can pre-calculate the auth header and store it internally. And this code is executed, as in the logs I can see the following:\r\n\r\n    2022-05-04 12:40:00.183 [TRACE] [pool-2-thread-78]     Retrieving image from http://&lt;censored&gt;:7020/ISAPI/Streaming/channels/1/picture\r\n    2022-05-04 12:40:00.183 [TRACE] [pool-2-thread-78]     Using authorization header of &#39;Basic &lt;censored&gt;&#39;\r\n    2022-05-04 12:40:00.491 [ERROR] [pool-2-thread-78]     Error retrieving image, status code is 401\r\n\r\nHowever, what actually gets sent over TCP does not include the Authorization header. The following is a &quot;Follow TCP&quot; dump from Wireshark:\r\n\r\n    GET /ISAPI/Streaming/channels/1/picture HTTP/1.1\r\n    Content-Length: 0\r\n    Host: &lt;censored&gt;:7020\r\n    User-Agent: Java-http-client/17.0.3\r\n\r\n    HTTP/1.1 401 Unauthorized\r\n    Date: Wed, 04 May 2022 12:39:59 GMT\r\n    Server: webserver\r\n    X-Frame-Options: SAMEORIGIN\r\n    Content-Length: 178\r\n    Content-Type: text/html\r\n    Connection: close\r\n    WWW-Authenticate: Digest qop=&quot;auth&quot;, realm=&quot;&lt;censored&gt;&quot;, nonce=&quot;&lt;censored&gt;&quot;, stale=&quot;FALSE&quot;\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;&lt;head&gt;&lt;title&gt;Document Error: Unauthorized&lt;/title&gt;&lt;/head&gt;\r\n    &lt;body&gt;&lt;h2&gt;Access Error: 401 -- Unauthorized&lt;/h2&gt;\r\n    &lt;p&gt;Authentication Error&lt;/p&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\nI know the response asks for Digest authorization, and I&#39;m using Basic. That&#39;s not the point, the camera supports basic authorization as well. **The point is, the &quot;Authorization:&quot; header is not even sent with the request.**\r\n\r\nIt&#39;s hard to find any good guides for using Java17 native HttpClient, as most of them cover the Apache one. I found one from [Baeldung][1], but it covers the Java9. The [JavaDoc][2] is of little help, either. I am also using Authenticator, as Baeldung suggested, but it doesn&#39;t kick in, either.\r\n\r\nWhat am I doing wrong?\r\n\r\n  [1]: https://www.baeldung.com/java-9-http-client\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.net.http/java/net/http/HttpRequest.Builder.html#header(java.lang.String,java.lang.String)","title":"java.net.http.HttpRequest not sending &quot;Authorization:&quot; header - why?","body":"<p>I'm trying to download an image from a HTTP camera. The problem is, the camera in question requires (basic) authentication. I know basic auth should not be used over HTTP, but we're talking about an isolated network, so that's not the point here.</p>\n<p>I'm trying to use Java17 native java.net.http.HttpClient for this. I'm using the following code:</p>\n<pre><code>protected BufferedImage retrieveImage(URI uri) throws IOException, InterruptedException {\n    log.trace(&quot;Using authorization header of '{}'&quot;, basicAuthString);\n    HttpRequest request = HttpRequest.newBuilder()\n                                     .uri(uri)\n                                     .header(&quot;Authorization&quot;, basicAuthString)\n                                     .GET()\n                                     .timeout(Duration.ofSeconds(20))\n                                     .build();\n    return retrieveImage(request);\n}\n\nprivate BufferedImage retrieveImage(HttpRequest request) throws IOException, InterruptedException {\n    HttpResponse&lt;byte[]&gt; response = null;\n    try {\n        response = client.send(request, HttpResponse.BodyHandlers.ofByteArray());\n    } catch (ConnectException ex) {\n        log.error(&quot;Connection refused when downloading image from &quot; + uri.toString());\n        return null;\n    }\n    if (response.statusCode() != 200) { // ok\n        log.error(&quot;Error retrieving image, status code is {}&quot;, response.statusCode());\n        return null;\n    }\n    ByteArrayInputStream bis   = new ByteArrayInputStream(response.body());\n    BufferedImage        image = ImageIO.read(bis);\n    return image;\n}\n</code></pre>\n<p>The HttpClient variable (client in the above code) is created by:</p>\n<pre><code>            this.client = HttpClient.newBuilder()\n                                .connectTimeout(Duration.ofSeconds(5))\n                                .followRedirects(HttpClient.Redirect.NORMAL)\n                                .authenticator(new Authenticator() {\n                                    @Override\n                                    protected PasswordAuthentication getPasswordAuthentication() {\n                                        return new PasswordAuthentication(camera.getLogin(), camera.getPassword().toCharArray());\n                                    }\n                                })\n                                .version(HttpClient.Version.HTTP_1_1)\n                                .build();\n</code></pre>\n<p>Since I'm using Basic authorization, I can pre-calculate the auth header and store it internally. And this code is executed, as in the logs I can see the following:</p>\n<pre><code>2022-05-04 12:40:00.183 [TRACE] [pool-2-thread-78]     Retrieving image from http://&lt;censored&gt;:7020/ISAPI/Streaming/channels/1/picture\n2022-05-04 12:40:00.183 [TRACE] [pool-2-thread-78]     Using authorization header of 'Basic &lt;censored&gt;'\n2022-05-04 12:40:00.491 [ERROR] [pool-2-thread-78]     Error retrieving image, status code is 401\n</code></pre>\n<p>However, what actually gets sent over TCP does not include the Authorization header. The following is a &quot;Follow TCP&quot; dump from Wireshark:</p>\n<pre><code>GET /ISAPI/Streaming/channels/1/picture HTTP/1.1\nContent-Length: 0\nHost: &lt;censored&gt;:7020\nUser-Agent: Java-http-client/17.0.3\n\nHTTP/1.1 401 Unauthorized\nDate: Wed, 04 May 2022 12:39:59 GMT\nServer: webserver\nX-Frame-Options: SAMEORIGIN\nContent-Length: 178\nContent-Type: text/html\nConnection: close\nWWW-Authenticate: Digest qop=&quot;auth&quot;, realm=&quot;&lt;censored&gt;&quot;, nonce=&quot;&lt;censored&gt;&quot;, stale=&quot;FALSE&quot;\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;&lt;head&gt;&lt;title&gt;Document Error: Unauthorized&lt;/title&gt;&lt;/head&gt;\n&lt;body&gt;&lt;h2&gt;Access Error: 401 -- Unauthorized&lt;/h2&gt;\n&lt;p&gt;Authentication Error&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>I know the response asks for Digest authorization, and I'm using Basic. That's not the point, the camera supports basic authorization as well. <strong>The point is, the &quot;Authorization:&quot; header is not even sent with the request.</strong></p>\n<p>It's hard to find any good guides for using Java17 native HttpClient, as most of them cover the Apache one. I found one from <a href=\"https://www.baeldung.com/java-9-http-client\" rel=\"nofollow noreferrer\">Baeldung</a>, but it covers the Java9. The <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.net.http/java/net/http/HttpRequest.Builder.html#header(java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">JavaDoc</a> is of little help, either. I am also using Authenticator, as Baeldung suggested, but it doesn't kick in, either.</p>\n<p>What am I doing wrong?</p>\n"},{"tags":["java","spring","database","hibernate","jpa"],"comments":[{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1671854907,"post_id":74903540,"comment_id":132189057,"body_markdown":"You can remove the field `key` in the query, so the field won&#39;t be updated.","body":"You can remove the field <code>key</code> in the query, so the field won&#39;t be updated."},{"owner":{"account_id":22402724,"reputation":101,"user_id":16612843,"display_name":"Seema Sharma"},"score":0,"creation_date":1671861230,"post_id":74903540,"comment_id":132189525,"body_markdown":"From which query? I didn&#39;t understand the solution.","body":"From which query? I didn&#39;t understand the solution."},{"owner":{"account_id":480617,"reputation":2495,"user_id":893952,"accept_rate":57,"display_name":"Harry Coder"},"score":0,"creation_date":1671895787,"post_id":74903540,"comment_id":132194149,"body_markdown":"Do you have a `sql` file where you initialize your queries with an Update statement?","body":"Do you have a <code>sql</code> file where you initialize your queries with an Update statement?"},{"owner":{"account_id":22402724,"reputation":101,"user_id":16612843,"display_name":"Seema Sharma"},"score":0,"creation_date":1671898151,"post_id":74903540,"comment_id":132194558,"body_markdown":"No. I am not using any sql file. Totally dependent on hibernate","body":"No. I am not using any sql file. Totally dependent on hibernate"}],"owner":{"account_id":22402724,"reputation":101,"user_id":16612843,"display_name":"Seema Sharma"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":25,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671825355,"creation_date":1671825355,"question_id":74903540,"body_markdown":"I have an class called `Credential` which has field called `User`. Here is the class,\r\n\r\n```\r\n@Entity\r\npublic class Credential extends BaseModel {\r\n\r\n\t// more fields\r\n\r\n\t@ManyToOne(targetEntity = User.class, cascade = CascadeType.ALL)\r\n\t@JoinTable(name = &quot;user_cred&quot;, joinColumns = @JoinColumn(name = &quot;cred_id&quot;, \r\n    updatable = false, insertable = true), \r\n    inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;, updatable = false, \r\n    insertable = true))\r\n    @JsonIgnore\r\n\tprivate User user;\r\n\r\n    // setters getters\r\n}\r\n```\r\n\r\nI also have a service class which I am using to save this object of this `Credential` class. Now the user class is having a field `Key` which I don&#39;t want to update if I am saving a new `Credential` object.\r\nHere is the `User` class,\r\n```\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User extends BaseModel {\r\n\r\n    // more fields\r\n   \r\n\t@OneToOne(targetEntity = AESKey.class, cascade = CascadeType.ALL)\r\n\t@JoinColumn(name = &quot;password_id&quot;, updatable = false, insertable = true)\r\n\tprivate Key password;\r\n\r\n    // getter setter\r\n}\r\n``` \r\nI have used `updatable=false` in both `User` field in`Credential` and `Key` field in `User`. Even then when I am saving the `Credential` object, `Key` object is also updated.\r\nI have tried removing `cascade = CascadeType.ALL` but the result is the same.\r\nHere is the query that runs everytime I save the `Credential` object,\r\n\r\n```\r\nHibernate: insert into credential (creation_date, associated_phone_number, email, password, username, id) values (?, ?, ?, ?, ?, ?)\r\nHibernate: insert into user_cred (user_id, cred_id) values (?, ?)\r\nHibernate: update key set creation_date=?, key=?, type=? where id=?\r\n```\r\n\r\nI dont want to add `updatable=false` to my fields in `Key` class as then I will be forbidden to update my `Key` objects *directly*. I just want to prevent *indirect* updations.\r\n\r\nCan anyone tell how prevent my `Key` object from updating.\r\n  ","title":"Saving an object updates all the fields even when `updatable=false` in SpringJPA","body":"<p>I have an class called <code>Credential</code> which has field called <code>User</code>. Here is the class,</p>\n<pre><code>@Entity\npublic class Credential extends BaseModel {\n\n    // more fields\n\n    @ManyToOne(targetEntity = User.class, cascade = CascadeType.ALL)\n    @JoinTable(name = &quot;user_cred&quot;, joinColumns = @JoinColumn(name = &quot;cred_id&quot;, \n    updatable = false, insertable = true), \n    inverseJoinColumns = @JoinColumn(name = &quot;user_id&quot;, updatable = false, \n    insertable = true))\n    @JsonIgnore\n    private User user;\n\n    // setters getters\n}\n</code></pre>\n<p>I also have a service class which I am using to save this object of this <code>Credential</code> class. Now the user class is having a field <code>Key</code> which I don't want to update if I am saving a new <code>Credential</code> object.\nHere is the <code>User</code> class,</p>\n<pre><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User extends BaseModel {\n\n    // more fields\n   \n    @OneToOne(targetEntity = AESKey.class, cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;password_id&quot;, updatable = false, insertable = true)\n    private Key password;\n\n    // getter setter\n}\n</code></pre>\n<p>I have used <code>updatable=false</code> in both <code>User</code> field in<code>Credential</code> and <code>Key</code> field in <code>User</code>. Even then when I am saving the <code>Credential</code> object, <code>Key</code> object is also updated.\nI have tried removing <code>cascade = CascadeType.ALL</code> but the result is the same.\nHere is the query that runs everytime I save the <code>Credential</code> object,</p>\n<pre><code>Hibernate: insert into credential (creation_date, associated_phone_number, email, password, username, id) values (?, ?, ?, ?, ?, ?)\nHibernate: insert into user_cred (user_id, cred_id) values (?, ?)\nHibernate: update key set creation_date=?, key=?, type=? where id=?\n</code></pre>\n<p>I dont want to add <code>updatable=false</code> to my fields in <code>Key</code> class as then I will be forbidden to update my <code>Key</code> objects <em>directly</em>. I just want to prevent <em>indirect</em> updations.</p>\n<p>Can anyone tell how prevent my <code>Key</code> object from updating.</p>\n"},{"tags":["java","spring-boot","spring-security","token","roles"],"owner":{"account_id":19621073,"reputation":47,"user_id":14361541,"display_name":"lucas.iter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671839634,"answer_count":0,"score":0,"last_activity_date":1671825147,"creation_date":1671815983,"question_id":74902320,"body_markdown":"I have an application that validates an authentication token to access your endpoints. It is important to note that I do not have a user&#39;s logged in. This validation is made as follows: \r\n\r\nI get the token and I call an REST API that tells me if that token is valid or not (this validation is made through a filter through which all the requests I receive pass). \r\n\r\nBut now I have to do another validation besides that. I need to decrypt the token to pick up a set of roles and see if for certain endpoints the rule validates. Initially I thought about using `@Secured` but I noticed that without a log in he cannot know where the roles come from that he should validate. So I thought I&#39;d create a filter that would only be used on a few endpoints and validate the permissive role. Something like this:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    http\r\n        .authorizeRequests(r -&gt;\r\n            r \r\n                 .antMatchers(&quot;/isAlive**&quot;).permitAll()\r\n                 .antMatchers(&quot;/users&quot;).permitAll()\r\n                 .and()\r\n            .addFilterBefore(new RoleFilter(),  UsernamePasswordAuthenticationFilter.class)\r\n                 .antMatchers(&quot;/cars&quot;).permitAll()\r\n                 .and()\r\n            .addFilterBefore(new RoleFilter(),  UsernamePasswordAuthenticationFilter.class)\r\n                 .anyRequest().permitAll()\r\n                 .and()\r\n            .addFilterBefore(new AuthorizationFilter(), UsernamePasswordAuthenticationFilter.class))\r\n        .sessionManagement()\r\n            .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\r\n\r\nAs you can see the `AuthorizationFilter` is the filter that must be done by all endpoints except `/isAlive`. It validates whether the token is valid. \r\n\r\nAnd `RoleFilter` should be used only on some endpoints to validate whether that token has the specific role that I need. But that doesn&#39;t work. It does not accept this structure with two filters. Any solution?","title":"How to use multiples filters in SecurityConfig on Spring Boot?","body":"<p>I have an application that validates an authentication token to access your endpoints. It is important to note that I do not have a user's logged in. This validation is made as follows:</p>\n<p>I get the token and I call an REST API that tells me if that token is valid or not (this validation is made through a filter through which all the requests I receive pass).</p>\n<p>But now I have to do another validation besides that. I need to decrypt the token to pick up a set of roles and see if for certain endpoints the rule validates. Initially I thought about using <code>@Secured</code> but I noticed that without a log in he cannot know where the roles come from that he should validate. So I thought I'd create a filter that would only be used on a few endpoints and validate the permissive role. Something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>http\n    .authorizeRequests(r -&gt;\n        r \n             .antMatchers(&quot;/isAlive**&quot;).permitAll()\n             .antMatchers(&quot;/users&quot;).permitAll()\n             .and()\n        .addFilterBefore(new RoleFilter(),  UsernamePasswordAuthenticationFilter.class)\n             .antMatchers(&quot;/cars&quot;).permitAll()\n             .and()\n        .addFilterBefore(new RoleFilter(),  UsernamePasswordAuthenticationFilter.class)\n             .anyRequest().permitAll()\n             .and()\n        .addFilterBefore(new AuthorizationFilter(), UsernamePasswordAuthenticationFilter.class))\n    .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS);\n</code></pre>\n<p>As you can see the <code>AuthorizationFilter</code> is the filter that must be done by all endpoints except <code>/isAlive</code>. It validates whether the token is valid.</p>\n<p>And <code>RoleFilter</code> should be used only on some endpoints to validate whether that token has the specific role that I need. But that doesn't work. It does not accept this structure with two filters. Any solution?</p>\n"},{"tags":["java","filesystems","jna","windows-server-2016","applocker"],"answers":[{"comments":[{"owner":{"account_id":11322688,"reputation":239,"user_id":8302613,"accept_rate":75,"display_name":"user136819"},"score":0,"creation_date":1670939970,"post_id":74781754,"comment_id":131985502,"body_markdown":"Thanks for answering @Daniel.\nThis may have been the solution, however, the Java Application is pre-built and I cannot modify the source code (I should have mentioned this part in the original question, my bad). And I don&#39;t see any &quot;*.properties&quot; files in the application folder to set the Path variables either.\n\nIs there still a way to go with the Wildcard approach for the AppLocker?\n(this would eventually also save us time)","body":"Thanks for answering @Daniel. This may have been the solution, however, the Java Application is pre-built and I cannot modify the source code (I should have mentioned this part in the original question, my bad). And I don&#39;t see any &quot;*.properties&quot; files in the application folder to set the Path variables either.  Is there still a way to go with the Wildcard approach for the AppLocker? (this would eventually also save us time)"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":1,"creation_date":1670954439,"post_id":74781754,"comment_id":131990919,"body_markdown":"@user136819 Based on [the docs](https://github.com/isbrahm/windows-itpro-docs/blob/2a1630822c9833417543a87d959638eab5f21c4f/windows/security/threat-protection/windows-defender-application-control/select-types-of-rules-to-create.md) you can only use a wildcard at the beginning or end of the path, not in the middle.","body":"@user136819 Based on <a href=\"https://github.com/isbrahm/windows-itpro-docs/blob/2a1630822c9833417543a87d959638eab5f21c4f/windows/security/threat-protection/windows-defender-application-control/select-types-of-rules-to-create.md\" rel=\"nofollow noreferrer\">the docs</a> you can only use a wildcard at the beginning or end of the path, not in the middle."},{"owner":{"account_id":11322688,"reputation":239,"user_id":8302613,"accept_rate":75,"display_name":"user136819"},"score":0,"creation_date":1671048261,"post_id":74781754,"comment_id":132015951,"body_markdown":"I see. Well, it was worth a shot with the AppLocker.\nBut I saw something like &quot;jna.tmpdir&quot; and &quot;java.io.tmpdir&quot; on this question here:   https://stackoverflow.com/questions/59763859/how-to-override-jna-tmpdir-and-java-io-tmpdir-properties-in-testcontainers  ...  Anyway I can override these 2 props? (this may even help the original poster of that question!)","body":"I see. Well, it was worth a shot with the AppLocker. But I saw something like &quot;jna.tmpdir&quot; and &quot;java.io.tmpdir&quot; on this question here:   <a href=\"https://stackoverflow.com/questions/59763859/how-to-override-jna-tmpdir-and-java-io-tmpdir-properties-in-testcontainers\" title=\"how to override jna tmpdir and java io tmpdir properties in testcontainers\">stackoverflow.com/questions/59763859/&hellip;</a>  ...  Anyway I can override these 2 props? (this may even help the original poster of that question!)"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671055789,"post_id":74781754,"comment_id":132017919,"body_markdown":"@user136819 Those would work: Those properties just override the location that you extract the DLL to.  So you could set those to always extract to `C:\\your\\custom\\path` where you&#39;ve added `C:\\your\\custom\\path\\*` to AppLocker.  You&#39;ll still get a randomly named jna dll in that directory.  But they still require a &quot;Java System Property&quot; to be set by whoever is starting the jvm using a `-D` switch on the command line.  If you have any control over the JVM when starting this program you can do that.  If it&#39;s a compiled executable you can&#39;t and need to ask the authors to enable it.","body":"@user136819 Those would work: Those properties just override the location that you extract the DLL to.  So you could set those to always extract to <code>C:\\your\\custom\\path</code> where you&#39;ve added <code>C:\\your\\custom\\path\\*</code> to AppLocker.  You&#39;ll still get a randomly named jna dll in that directory.  But they still require a &quot;Java System Property&quot; to be set by whoever is starting the jvm using a <code>-D</code> switch on the command line.  If you have any control over the JVM when starting this program you can do that.  If it&#39;s a compiled executable you can&#39;t and need to ask the authors to enable it."},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671055952,"post_id":74781754,"comment_id":132017959,"body_markdown":"@user136819 in theory you could change the environment variable `%TEMP%` to an allowed location and you would know it would be under a JNA path there.  I&#39;m not sure, but it&#39;s possible that an AppLocker path `%TEMP%\\jna*` might work?","body":"@user136819 in theory you could change the environment variable <code>%TEMP%</code> to an allowed location and you would know it would be under a JNA path there.  I&#39;m not sure, but it&#39;s possible that an AppLocker path <code>%TEMP%\\jna*</code> might work?"},{"owner":{"account_id":11322688,"reputation":239,"user_id":8302613,"accept_rate":75,"display_name":"user136819"},"score":0,"creation_date":1671445550,"post_id":74781754,"comment_id":132093298,"body_markdown":"Unfortunately, the AppLocker reconfiguration isn&#39;t an option with `%TEMP%` anymore due to hardening of the server and we aren&#39;t allowed to change this.\n\nBut we are thinking of going with the `-D` switch via command line.\nCurrently, we pass something like this in command line to open the Java app:\n`&quot;C:\\&lt;J-APP&gt;\\java\\bin\\javaw.exe&quot; -classpath &quot;C:\\&lt;J-APP&gt;\\&lt;J-APP&gt;.exe;commons-logging-1.2.jar;httpclient-4.5.10.jar;httpcore-4.4.12.jar&quot; com.x.x.java.ui.JAppLauncher`\n\nWhere can I include the `-D` switch path in the above command? (i.e. this part: `-Djna.boot.library.path=C:\\your\\path`)","body":"Unfortunately, the AppLocker reconfiguration isn&#39;t an option with <code>%TEMP%</code> anymore due to hardening of the server and we aren&#39;t allowed to change this.  But we are thinking of going with the <code>-D</code> switch via command line. Currently, we pass something like this in command line to open the Java app: <code>&quot;C:\\&lt;J-APP&gt;\\java\\bin\\javaw.exe&quot; -classpath &quot;C:\\&lt;J-APP&gt;\\&lt;J-APP&gt;.exe;commons-logging-1.2.jar;httpclient-4&zwnj;&#8203;.5.10.jar;httpcore-4&zwnj;&#8203;.4.12.jar&quot; com.x.x.java.ui.JAppLauncher</code>  Where can I include the <code>-D</code> switch path in the above command? (i.e. this part: <code>-Djna.boot.library.path=C:\\your\\path</code>)"},{"owner":{"account_id":11322688,"reputation":239,"user_id":8302613,"accept_rate":75,"display_name":"user136819"},"score":0,"creation_date":1671453523,"post_id":74781754,"comment_id":132095486,"body_markdown":"An additional comment: is there any way a custom JAR file will be able to override the `jna.tmpdir` and `java.io.tmpdir`? Can we be able to create one or does it exist online already?","body":"An additional comment: is there any way a custom JAR file will be able to override the <code>jna.tmpdir</code> and <code>java.io.tmpdir</code>? Can we be able to create one or does it exist online already?"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671472798,"post_id":74781754,"comment_id":132102168,"body_markdown":"@user136819 how are you starting the program? If you&#39;re executing via Java you just add those as command line arguments.","body":"@user136819 how are you starting the program? If you&#39;re executing via Java you just add those as command line arguments."},{"owner":{"account_id":11322688,"reputation":239,"user_id":8302613,"accept_rate":75,"display_name":"user136819"},"score":1,"creation_date":1671819425,"post_id":74781754,"comment_id":132184131,"body_markdown":"so basically the program can be started from the command line, but we were exploring ways to just use the `&lt;J-APP&gt;.exe` executable instead of passing a long command line argument. Ultimately, we ended up simply using the command line thing and finally, we were able to solve our issue with this command: `&quot;C:\\&lt;J-APP&gt;\\java\\bin\\javaw.exe&quot; -Djava.io.tmpdir=&quot;C:\\&lt;J-APP&gt;\\temp&quot; -classpath &quot;C:\\&lt;J-APP&gt;\\&lt;J-APP&gt;.exe;commons-logging-1.2.jar;httpclient-4.5.10.jar;httpcore-4.4.12.jar&quot; com.x.x.java.ui.JAppLauncher` . Now, the DLL is generated into the custom path! ;)\n\nThank you for your hints!","body":"so basically the program can be started from the command line, but we were exploring ways to just use the <code>&lt;J-APP&gt;.exe</code> executable instead of passing a long command line argument. Ultimately, we ended up simply using the command line thing and finally, we were able to solve our issue with this command: <code>&quot;C:\\&lt;J-APP&gt;\\java\\bin\\javaw.exe&quot; -Djava.io.tmpdir=&quot;C:\\&lt;J-APP&gt;\\temp&quot; -classpath &quot;C:\\&lt;J-APP&gt;\\&lt;J-APP&gt;.exe;commons-logging-1.2.jar;httpclient-4&zwnj;&#8203;.5.10.jar;httpcore-4&zwnj;&#8203;.4.12.jar&quot; com.x.x.java.ui.JAppLauncher</code> . Now, the DLL is generated into the custom path! ;)  Thank you for your hints!"},{"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"score":0,"creation_date":1671824812,"post_id":74781754,"comment_id":132185228,"body_markdown":"@user136819 a little late but I just realized the `_JAVA_OPTIONS` environment vairable migh thave worked with the .exe: `export _JAVA_OPTIONS=-Djava.io.tmpdir=/new/tmp/dir`","body":"@user136819 a little late but I just realized the <code>_JAVA_OPTIONS</code> environment vairable migh thave worked with the .exe: <code>export _JAVA_OPTIONS=-Djava.io.tmpdir=&#47;new&#47;tmp&#47;dir</code>"}],"tags":[],"owner":{"account_id":1187908,"reputation":8615,"user_id":1161484,"accept_rate":93,"display_name":"Daniel Widdis"},"comment_count":10,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671825119,"creation_date":1670919180,"answer_id":74781754,"question_id":74772475,"body_markdown":"Based on [the available documentation][1] I could find, it appears that a wildcard (`*`) character is only supported in AppLocker at the beginning or end of a path, but not in the middle.  So your proposed solution is impossible.\r\n\r\nHowever, rather than using a wildcard in the path for AppLocker, you can pre-extract the JNA native library to a known location for all users.  This is a relatively common need for security purposes (exactly your intent), sometimes related to temp directory access permissions or sometimes related to signing binaries.  \r\n\r\nFrom the JNA API Overview [Loading JNA][2]:\r\n&gt; JNA includes a small, platform-specific shared library which enables all native access. When the Native class is first accessed, JNA will first attempt to load this library from the directories specified in `jna.boot.library.path`. If that fails and `jna.nosys=false` is set, it will fall back to loading from the system library paths. Finally it will attempt to extract the stub library from from the JNA jar file, and load it.\r\n\r\nThis gives you two options to avoid the randomly-named temporary file.  Copy it to:\r\n - a directory of your choice, and either pass `-Djna.boot.library.path=C:\\your\\path` on the java command line, or before loading JNA call `System.setProperty(&quot;jna.boot.library.path&quot;, &quot;C:\\your\\path&quot;)` in your program.\r\n - a system directory on the PATH, e.g. System32, and set `jna.nosys=false`.  (You can also set `jna.nounpack=true` to prevent the temp file unpacking.)\r\n\r\nIn addition, the JNA native library will be in a subdirectory of the Java temporary directory specified by the `java.io.tmpdir` system property.  See this SO question: https://stackoverflow.com/questions/1924136/environment-variable-to-control-java-io-tmpdir\r\n\r\nAnswers to that question include using the `_JAVA_OPTIONS` environment variable as a possible means to change the tmpdir even if you&#39;re running an executable rather than Java command line.\r\n\r\n  [1]: https://github.com/isbrahm/windows-itpro-docs/blob/2a1630822c9833417543a87d959638eab5f21c4f/windows/security/threat-protection/windows-defender-application-control/select-types-of-rules-to-create.md\r\n  [2]: https://java-native-access.github.io/jna/5.12.1/javadoc/overview-summary.html#loading","title":"Windows AppLocker Path Wildcards for Files and Folders","body":"<p>Based on <a href=\"https://github.com/isbrahm/windows-itpro-docs/blob/2a1630822c9833417543a87d959638eab5f21c4f/windows/security/threat-protection/windows-defender-application-control/select-types-of-rules-to-create.md\" rel=\"nofollow noreferrer\">the available documentation</a> I could find, it appears that a wildcard (<code>*</code>) character is only supported in AppLocker at the beginning or end of a path, but not in the middle.  So your proposed solution is impossible.</p>\n<p>However, rather than using a wildcard in the path for AppLocker, you can pre-extract the JNA native library to a known location for all users.  This is a relatively common need for security purposes (exactly your intent), sometimes related to temp directory access permissions or sometimes related to signing binaries.</p>\n<p>From the JNA API Overview <a href=\"https://java-native-access.github.io/jna/5.12.1/javadoc/overview-summary.html#loading\" rel=\"nofollow noreferrer\">Loading JNA</a>:</p>\n<blockquote>\n<p>JNA includes a small, platform-specific shared library which enables all native access. When the Native class is first accessed, JNA will first attempt to load this library from the directories specified in <code>jna.boot.library.path</code>. If that fails and <code>jna.nosys=false</code> is set, it will fall back to loading from the system library paths. Finally it will attempt to extract the stub library from from the JNA jar file, and load it.</p>\n</blockquote>\n<p>This gives you two options to avoid the randomly-named temporary file.  Copy it to:</p>\n<ul>\n<li>a directory of your choice, and either pass <code>-Djna.boot.library.path=C:\\your\\path</code> on the java command line, or before loading JNA call <code>System.setProperty(&quot;jna.boot.library.path&quot;, &quot;C:\\your\\path&quot;)</code> in your program.</li>\n<li>a system directory on the PATH, e.g. System32, and set <code>jna.nosys=false</code>.  (You can also set <code>jna.nounpack=true</code> to prevent the temp file unpacking.)</li>\n</ul>\n<p>In addition, the JNA native library will be in a subdirectory of the Java temporary directory specified by the <code>java.io.tmpdir</code> system property.  See this SO question: <a href=\"https://stackoverflow.com/questions/1924136/environment-variable-to-control-java-io-tmpdir\">Environment variable to control java.io.tmpdir?</a></p>\n<p>Answers to that question include using the <code>_JAVA_OPTIONS</code> environment variable as a possible means to change the tmpdir even if you're running an executable rather than Java command line.</p>\n"}],"owner":{"account_id":11322688,"reputation":239,"user_id":8302613,"accept_rate":75,"display_name":"user136819"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1564,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74781754,"answer_count":1,"score":1,"last_activity_date":1671825119,"creation_date":1670854712,"question_id":74772475,"body_markdown":"I have a **Java Application** which generates a temporary JNA folder and a temporary DLL file to the following location in the users&#39; profile:\r\n\r\n```%OSDRIVE%\\Users\\ABC-&lt;SOME-USER-ID&gt;\\AppData\\Local\\Temp\\jna--881477353\\jna7513918229606912988.dll```\r\n\r\n(the JNA folder and file names contain random numbers as suffix and with prefix &quot;**jna--**&quot; , &quot;**jna**&quot; respectively)\r\n\r\nThe JNA DLL file &quot;**Path**&quot; needs to be made an exception in Application Control Policies, specifically in ```AppLocker -&gt; DLL Rules -&gt; [Users] -&gt; Exceptions``` in order for the Java app to function properly. At the moment, it is blocked by the AppLocker, however, if I add this path to the AppLocker, it will work for the **current user**.\r\n\r\nNow, this is achievable for 1 user, but I have many users with the prefix as &quot;**ABC-**&quot; and the suffix &quot;**SOME-USER-ID**&quot; contains a random string with numbers and letters, i.e. many users who have prefix &quot;**ABC-**&quot; should be able to use this application without the need for manually adding every users&#39; profile path into the AppLocker configuration.\r\n\r\nIs there a way I can &quot;**Wildcard**&quot; this path into the AppLocker configuration?\r\nFor example, something like this:\r\n\r\n```%OSDRIVE%\\Users\\ABC-&lt;WILDCARD&gt;\\AppData\\Local\\Temp\\jna--&lt;WILDCARD&gt;\\jna&lt;WILDCARD&gt;.dll```\r\n\r\nor even:\r\n\r\n```%OSDRIVE%\\Users\\ABC-&lt;WILDCARD&gt;\\AppData\\Local\\Temp\\jna--&lt;WILDCARD&gt;\\*```\r\n\r\nIs there a realistic way of achieving this via Wildcards?\r\nI do not wish to use **&quot;*&quot;** inside the path because it will then allow **ALL** users to be exempted from the AppLocker settings.\r\n\r\nAny help is appreciated.\r\n\r\nThanks in advance!","title":"Windows AppLocker Path Wildcards for Files and Folders","body":"<p>I have a <strong>Java Application</strong> which generates a temporary JNA folder and a temporary DLL file to the following location in the users' profile:</p>\n<p><code>%OSDRIVE%\\Users\\ABC-&lt;SOME-USER-ID&gt;\\AppData\\Local\\Temp\\jna--881477353\\jna7513918229606912988.dll</code></p>\n<p>(the JNA folder and file names contain random numbers as suffix and with prefix &quot;<strong>jna--</strong>&quot; , &quot;<strong>jna</strong>&quot; respectively)</p>\n<p>The JNA DLL file &quot;<strong>Path</strong>&quot; needs to be made an exception in Application Control Policies, specifically in <code>AppLocker -&gt; DLL Rules -&gt; [Users] -&gt; Exceptions</code> in order for the Java app to function properly. At the moment, it is blocked by the AppLocker, however, if I add this path to the AppLocker, it will work for the <strong>current user</strong>.</p>\n<p>Now, this is achievable for 1 user, but I have many users with the prefix as &quot;<strong>ABC-</strong>&quot; and the suffix &quot;<strong>SOME-USER-ID</strong>&quot; contains a random string with numbers and letters, i.e. many users who have prefix &quot;<strong>ABC-</strong>&quot; should be able to use this application without the need for manually adding every users' profile path into the AppLocker configuration.</p>\n<p>Is there a way I can &quot;<strong>Wildcard</strong>&quot; this path into the AppLocker configuration?\nFor example, something like this:</p>\n<p><code>%OSDRIVE%\\Users\\ABC-&lt;WILDCARD&gt;\\AppData\\Local\\Temp\\jna--&lt;WILDCARD&gt;\\jna&lt;WILDCARD&gt;.dll</code></p>\n<p>or even:</p>\n<p><code>%OSDRIVE%\\Users\\ABC-&lt;WILDCARD&gt;\\AppData\\Local\\Temp\\jna--&lt;WILDCARD&gt;\\*</code></p>\n<p>Is there a realistic way of achieving this via Wildcards?\nI do not wish to use <strong>&quot;*&quot;</strong> inside the path because it will then allow <strong>ALL</strong> users to be exempted from the AppLocker settings.</p>\n<p>Any help is appreciated.</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","spring","spring-boot","repository","jhipster"],"comments":[{"owner":{"account_id":2469136,"reputation":641,"user_id":2151471,"display_name":"atomfrede"},"score":0,"creation_date":1673939794,"post_id":74903509,"comment_id":132602714,"body_markdown":"Is the method name correct, such that spring can infer the query? Can you try `findAllByCompanyId`?","body":"Is the method name correct, such that spring can infer the query? Can you try <code>findAllByCompanyId</code>?"}],"owner":{"account_id":16206688,"reputation":607,"user_id":11701675,"display_name":"natyus"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":477,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671825113,"creation_date":1671825113,"question_id":74903509,"body_markdown":"I have a jhipster generated gateway, where I want to add a new method to an existing repository (generated with jhipster entity command) This repository is extending by default R2dbcRepository. So far I have implemented my method called findReceiptsByCompanyId() when I am trying to call this method, it gives me the following error:\r\n\r\n    java.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74)\r\n    \tSuppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \r\n    Assembly trace from producer [reactor.core.publisher.MonoError] :\r\n    \treactor.core.publisher.Mono.error(Mono.java:313)\r\n    \torg.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$5(TransactionAspectSupport.java:951)\r\n    Error has been observed at the following site(s):\r\n    \t|_         Mono.error ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$5(TransactionAspectSupport.java:951)\r\n    \t|_     Flux.usingWhen ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$8(TransactionAspectSupport.java:944)\r\n    \t|_          Mono.then ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$7(TransactionAspectSupport.java:958)\r\n    \t|_ Flux.onErrorResume ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$8(TransactionAspectSupport.java:957)\r\n    \t|_   Mono.flatMapMany ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$invokeWithinTransaction$9(TransactionAspectSupport.java:940)\r\n    \t|_   Mono.flatMapMany ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.invokeWithinTransaction(TransactionAspectSupport.java:939)\r\n    \t|_  Flux.contextWrite ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.invokeWithinTransaction(TransactionAspectSupport.java:964)\r\n    \t|_  Flux.contextWrite ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.invokeWithinTransaction(TransactionAspectSupport.java:965)\r\n    \t|_   Flux.collectList ⇢ at com.nosi.gateway.web.rest.ReceiptResource.getAllReceiptsByCompanyId(ReceiptResource.java:180)\r\n    \t|_           Mono.map ⇢ at org.springframework.http.codec.json.AbstractJackson2Encoder.encode(AbstractJackson2Encoder.java:150)\r\n    \t|_          Mono.flux ⇢ at org.springframework.http.codec.json.AbstractJackson2Encoder.encode(AbstractJackson2Encoder.java:151)\r\n    \t|_ Flux.singleOrEmpty ⇢ at org.springframework.http.codec.EncoderHttpMessageWriter.write(EncoderHttpMessageWriter.java:129)\r\n    \t|_ Mono.switchIfEmpty ⇢ at org.springframework.http.codec.EncoderHttpMessageWriter.write(EncoderHttpMessageWriter.java:130)\r\n    \t|_       Mono.flatMap ⇢ at org.springframework.http.codec.EncoderHttpMessageWriter.write(EncoderHttpMessageWriter.java:134)\r\n    \t|_         checkpoint ⇢ Handler com.nosi.gateway.web.rest.ReceiptResource#getAllReceiptsByCompanyId(Long) [DispatcherHandler]\r\n    \r\nHow can I fix this? This is how my repository I modified looks like:\r\n\r\n\r\n\r\n    /**\r\n     * Spring Data SQL reactive repository for the Receipt entity.\r\n     */\r\n    @SuppressWarnings(&quot;unused&quot;)\r\n    @Repository\r\n    public interface ReceiptRepository extends R2dbcRepository&lt;Receipt, Long&gt;, ReceiptRepositoryInternal {\r\n        @Query(&quot;SELECT * FROM receipt entity WHERE entity.user_receipt_id = :id&quot;)\r\n        Flux&lt;Receipt&gt; findByUser_receipt(Long id);\r\n    \r\n        @Query(&quot;SELECT * FROM receipt entity WHERE entity.user_receipt_id IS NULL&quot;)\r\n        Flux&lt;Receipt&gt; findAllWhereUser_receiptIsNull();\r\n    \r\n        // just to avoid having unambigous methods\r\n        @Override\r\n        Flux&lt;Receipt&gt; findAll();\r\n    \r\n        @Override\r\n        Flux&lt;Receipt&gt; findReceiptsByCompanyId(Long id);\r\n    \r\n        @Override\r\n        Mono&lt;Receipt&gt; findById(Long id);\r\n    \r\n    \r\n        @Override\r\n        &lt;S extends Receipt&gt; Mono&lt;S&gt; save(S entity);\r\n    }\r\n    \r\n    interface ReceiptRepositoryInternal{\r\n        &lt;S extends Receipt&gt; Mono&lt;S&gt; insert(S entity);\r\n        &lt;S extends Receipt&gt; Mono&lt;S&gt; save(S entity);\r\n        Mono&lt;Integer&gt; update(Receipt entity);\r\n    \r\n        Flux&lt;Receipt&gt; findAll();\r\n        Mono&lt;Receipt&gt; findById(Long id);\r\n        Flux&lt;Receipt&gt; findAllBy(Pageable pageable);\r\n        Flux&lt;Receipt&gt; findAllBy(Pageable pageable, Criteria criteria);\r\n    \r\n        Flux&lt;Receipt&gt; findReceiptsByCompanyId(Long id);\r\n    \r\n    \r\n    }\r\n\r\nMy service class implementing the method:\r\n\r\n    @Service\r\n    @Transactional\r\n    public class ReceiptService {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(ReceiptService.class);\r\n    \r\n        private final ReceiptRepository receiptRepository;\r\n    \r\n        private final ReceiptMapper receiptMapper;\r\n    \r\n        public ReceiptService(ReceiptRepository receiptRepository, ReceiptMapper receiptMapper) {\r\n            this.receiptRepository = receiptRepository;\r\n            this.receiptMapper = receiptMapper;\r\n        }\r\n    \r\n        /**\r\n         * Save a receipt.\r\n         *\r\n         * @param receiptDTO the entity to save.\r\n         * @return the persisted entity.\r\n         */\r\n        public Mono&lt;ReceiptDTO&gt; save(ReceiptDTO receiptDTO) {\r\n            log.debug(&quot;Request to save Receipt : {}&quot;, receiptDTO);\r\n            return receiptRepository.save(receiptMapper.toEntity(receiptDTO)).map(receiptMapper::toDto);\r\n        }\r\n    \r\n        /**\r\n         * Partially update a receipt.\r\n         *\r\n         * @param receiptDTO the entity to update partially.\r\n         * @return the persisted entity.\r\n         */\r\n        public Mono&lt;ReceiptDTO&gt; partialUpdate(ReceiptDTO receiptDTO) {\r\n            log.debug(&quot;Request to partially update Receipt : {}&quot;, receiptDTO);\r\n    \r\n            return receiptRepository\r\n                .findById(receiptDTO.getId())\r\n                .map(existingReceipt -&gt; {\r\n                    receiptMapper.partialUpdate(existingReceipt, receiptDTO);\r\n    \r\n                    return existingReceipt;\r\n                })\r\n                .flatMap(receiptRepository::save)\r\n                .map(receiptMapper::toDto);\r\n        }\r\n    \r\n    \r\n        public Flux&lt;ReceiptDTO&gt; findByCompany(Long companyUserID) {\r\n            log.debug(&quot;Request to get all Receipts by a company&quot;);\r\n            return receiptRepository.findReceiptsByCompanyId(companyUserID).map(receiptMapper::toDto);\r\n    \r\n       }\r\n    \r\n    }\r\n\r\nAnd finally my controller:\r\n\r\n    @RestController\r\n    @RequestMapping(&quot;/api&quot;)\r\n    public class ReceiptResource {\r\n    \r\n        private final Logger log = LoggerFactory.getLogger(ReceiptResource.class);\r\n    \r\n        private static final String ENTITY_NAME = &quot;receipt&quot;;\r\n    \r\n        @Value(&quot;${jhipster.clientApp.name}&quot;)\r\n        private String applicationName;\r\n    \r\n        private final ReceiptService receiptService;\r\n    \r\n        private final ReceiptRepository receiptRepository;\r\n    \r\n        private final UserRepository userRepository;\r\n    \r\n        public ReceiptResource(ReceiptService receiptService, ReceiptRepository receiptRepository, UserRepository userRepository) {\r\n            this.receiptService = receiptService;\r\n            this.receiptRepository = receiptRepository;\r\n            this.userRepository = userRepository;\r\n        }\r\n    \r\n        /**\r\n         * {@code POST  /receipts} : Create a new receipt.\r\n         *\r\n         * @param receiptDTO the receiptDTO to create.\r\n         * @return the {@link ResponseEntity} with status {@code 201 (Created)} and with body the new receiptDTO, or with status {@code 400 (Bad Request)} if the receipt has already an ID.\r\n         * @throws URISyntaxException if the Location URI syntax is incorrect.\r\n         */\r\n        \r\n        @PostMapping(&quot;/receipts&quot;)\r\n        public Mono&lt;ResponseEntity&lt;ReceiptDTO&gt;&gt; createReceipt(@RequestBody ReceiptDTO receiptDTO) throws URISyntaxException {\r\n            log.debug(&quot;REST request to save Receipt : {}&quot;, receiptDTO);\r\n            if (receiptDTO.getId() != null) {\r\n                throw new BadRequestAlertException(&quot;A new receipt cannot already have an ID&quot;, ENTITY_NAME, &quot;idexists&quot;);\r\n            }\r\n            return receiptService\r\n                .save(receiptDTO)\r\n                .map(result -&gt; {\r\n                    try {\r\n                        return ResponseEntity\r\n                            .created(new URI(&quot;/api/receipts/&quot; + result.getId()))\r\n                            .headers(HeaderUtil.createEntityCreationAlert(applicationName, true, ENTITY_NAME, result.getId().toString()))\r\n                            .body(result);\r\n                    } catch (URISyntaxException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n                });\r\n        }\r\n    \r\n        @GetMapping(&quot;/receipts/byUserId&quot;)\r\n        public Mono&lt;List&lt;ReceiptDTO&gt;&gt; getAllReceiptsByCompanyId(@RequestParam Long companyId) {\r\n            log.debug(&quot;REST request to get all Receipts&quot;);\r\n    \r\n            return receiptService.findByCompany(companyId).collectList();\r\n        }\r\n    }","title":"How to fix jhipster: No MethodInvocation found: Check that an AOP invocation is in when using repository","body":"<p>I have a jhipster generated gateway, where I want to add a new method to an existing repository (generated with jhipster entity command) This repository is extending by default R2dbcRepository. So far I have implemented my method called findReceiptsByCompanyId() when I am trying to call this method, it gives me the following error:</p>\n<pre><code>java.lang.IllegalStateException: No MethodInvocation found: Check that an AOP invocation is in progress and that the ExposeInvocationInterceptor is upfront in the interceptor chain. Specifically, note that advices with order HIGHEST_PRECEDENCE will execute before ExposeInvocationInterceptor! In addition, ExposeInvocationInterceptor and ExposeInvocationInterceptor.currentInvocation() must be invoked from the same thread.\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.currentInvocation(ExposeInvocationInterceptor.java:74)\n    Suppressed: reactor.core.publisher.FluxOnAssembly$OnAssemblyException: \nAssembly trace from producer [reactor.core.publisher.MonoError] :\n    reactor.core.publisher.Mono.error(Mono.java:313)\n    org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$5(TransactionAspectSupport.java:951)\nError has been observed at the following site(s):\n    |_         Mono.error ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$5(TransactionAspectSupport.java:951)\n    |_     Flux.usingWhen ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$8(TransactionAspectSupport.java:944)\n    |_          Mono.then ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$7(TransactionAspectSupport.java:958)\n    |_ Flux.onErrorResume ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$null$8(TransactionAspectSupport.java:957)\n    |_   Mono.flatMapMany ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.lambda$invokeWithinTransaction$9(TransactionAspectSupport.java:940)\n    |_   Mono.flatMapMany ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.invokeWithinTransaction(TransactionAspectSupport.java:939)\n    |_  Flux.contextWrite ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.invokeWithinTransaction(TransactionAspectSupport.java:964)\n    |_  Flux.contextWrite ⇢ at org.springframework.transaction.interceptor.TransactionAspectSupport$ReactiveTransactionSupport.invokeWithinTransaction(TransactionAspectSupport.java:965)\n    |_   Flux.collectList ⇢ at com.nosi.gateway.web.rest.ReceiptResource.getAllReceiptsByCompanyId(ReceiptResource.java:180)\n    |_           Mono.map ⇢ at org.springframework.http.codec.json.AbstractJackson2Encoder.encode(AbstractJackson2Encoder.java:150)\n    |_          Mono.flux ⇢ at org.springframework.http.codec.json.AbstractJackson2Encoder.encode(AbstractJackson2Encoder.java:151)\n    |_ Flux.singleOrEmpty ⇢ at org.springframework.http.codec.EncoderHttpMessageWriter.write(EncoderHttpMessageWriter.java:129)\n    |_ Mono.switchIfEmpty ⇢ at org.springframework.http.codec.EncoderHttpMessageWriter.write(EncoderHttpMessageWriter.java:130)\n    |_       Mono.flatMap ⇢ at org.springframework.http.codec.EncoderHttpMessageWriter.write(EncoderHttpMessageWriter.java:134)\n    |_         checkpoint ⇢ Handler com.nosi.gateway.web.rest.ReceiptResource#getAllReceiptsByCompanyId(Long) [DispatcherHandler]\n</code></pre>\n<p>How can I fix this? This is how my repository I modified looks like:</p>\n<pre><code>/**\n * Spring Data SQL reactive repository for the Receipt entity.\n */\n@SuppressWarnings(&quot;unused&quot;)\n@Repository\npublic interface ReceiptRepository extends R2dbcRepository&lt;Receipt, Long&gt;, ReceiptRepositoryInternal {\n    @Query(&quot;SELECT * FROM receipt entity WHERE entity.user_receipt_id = :id&quot;)\n    Flux&lt;Receipt&gt; findByUser_receipt(Long id);\n\n    @Query(&quot;SELECT * FROM receipt entity WHERE entity.user_receipt_id IS NULL&quot;)\n    Flux&lt;Receipt&gt; findAllWhereUser_receiptIsNull();\n\n    // just to avoid having unambigous methods\n    @Override\n    Flux&lt;Receipt&gt; findAll();\n\n    @Override\n    Flux&lt;Receipt&gt; findReceiptsByCompanyId(Long id);\n\n    @Override\n    Mono&lt;Receipt&gt; findById(Long id);\n\n\n    @Override\n    &lt;S extends Receipt&gt; Mono&lt;S&gt; save(S entity);\n}\n\ninterface ReceiptRepositoryInternal{\n    &lt;S extends Receipt&gt; Mono&lt;S&gt; insert(S entity);\n    &lt;S extends Receipt&gt; Mono&lt;S&gt; save(S entity);\n    Mono&lt;Integer&gt; update(Receipt entity);\n\n    Flux&lt;Receipt&gt; findAll();\n    Mono&lt;Receipt&gt; findById(Long id);\n    Flux&lt;Receipt&gt; findAllBy(Pageable pageable);\n    Flux&lt;Receipt&gt; findAllBy(Pageable pageable, Criteria criteria);\n\n    Flux&lt;Receipt&gt; findReceiptsByCompanyId(Long id);\n\n\n}\n</code></pre>\n<p>My service class implementing the method:</p>\n<pre><code>@Service\n@Transactional\npublic class ReceiptService {\n\n    private final Logger log = LoggerFactory.getLogger(ReceiptService.class);\n\n    private final ReceiptRepository receiptRepository;\n\n    private final ReceiptMapper receiptMapper;\n\n    public ReceiptService(ReceiptRepository receiptRepository, ReceiptMapper receiptMapper) {\n        this.receiptRepository = receiptRepository;\n        this.receiptMapper = receiptMapper;\n    }\n\n    /**\n     * Save a receipt.\n     *\n     * @param receiptDTO the entity to save.\n     * @return the persisted entity.\n     */\n    public Mono&lt;ReceiptDTO&gt; save(ReceiptDTO receiptDTO) {\n        log.debug(&quot;Request to save Receipt : {}&quot;, receiptDTO);\n        return receiptRepository.save(receiptMapper.toEntity(receiptDTO)).map(receiptMapper::toDto);\n    }\n\n    /**\n     * Partially update a receipt.\n     *\n     * @param receiptDTO the entity to update partially.\n     * @return the persisted entity.\n     */\n    public Mono&lt;ReceiptDTO&gt; partialUpdate(ReceiptDTO receiptDTO) {\n        log.debug(&quot;Request to partially update Receipt : {}&quot;, receiptDTO);\n\n        return receiptRepository\n            .findById(receiptDTO.getId())\n            .map(existingReceipt -&gt; {\n                receiptMapper.partialUpdate(existingReceipt, receiptDTO);\n\n                return existingReceipt;\n            })\n            .flatMap(receiptRepository::save)\n            .map(receiptMapper::toDto);\n    }\n\n\n    public Flux&lt;ReceiptDTO&gt; findByCompany(Long companyUserID) {\n        log.debug(&quot;Request to get all Receipts by a company&quot;);\n        return receiptRepository.findReceiptsByCompanyId(companyUserID).map(receiptMapper::toDto);\n\n   }\n\n}\n</code></pre>\n<p>And finally my controller:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class ReceiptResource {\n\n    private final Logger log = LoggerFactory.getLogger(ReceiptResource.class);\n\n    private static final String ENTITY_NAME = &quot;receipt&quot;;\n\n    @Value(&quot;${jhipster.clientApp.name}&quot;)\n    private String applicationName;\n\n    private final ReceiptService receiptService;\n\n    private final ReceiptRepository receiptRepository;\n\n    private final UserRepository userRepository;\n\n    public ReceiptResource(ReceiptService receiptService, ReceiptRepository receiptRepository, UserRepository userRepository) {\n        this.receiptService = receiptService;\n        this.receiptRepository = receiptRepository;\n        this.userRepository = userRepository;\n    }\n\n    /**\n     * {@code POST  /receipts} : Create a new receipt.\n     *\n     * @param receiptDTO the receiptDTO to create.\n     * @return the {@link ResponseEntity} with status {@code 201 (Created)} and with body the new receiptDTO, or with status {@code 400 (Bad Request)} if the receipt has already an ID.\n     * @throws URISyntaxException if the Location URI syntax is incorrect.\n     */\n    \n    @PostMapping(&quot;/receipts&quot;)\n    public Mono&lt;ResponseEntity&lt;ReceiptDTO&gt;&gt; createReceipt(@RequestBody ReceiptDTO receiptDTO) throws URISyntaxException {\n        log.debug(&quot;REST request to save Receipt : {}&quot;, receiptDTO);\n        if (receiptDTO.getId() != null) {\n            throw new BadRequestAlertException(&quot;A new receipt cannot already have an ID&quot;, ENTITY_NAME, &quot;idexists&quot;);\n        }\n        return receiptService\n            .save(receiptDTO)\n            .map(result -&gt; {\n                try {\n                    return ResponseEntity\n                        .created(new URI(&quot;/api/receipts/&quot; + result.getId()))\n                        .headers(HeaderUtil.createEntityCreationAlert(applicationName, true, ENTITY_NAME, result.getId().toString()))\n                        .body(result);\n                } catch (URISyntaxException e) {\n                    throw new RuntimeException(e);\n                }\n            });\n    }\n\n    @GetMapping(&quot;/receipts/byUserId&quot;)\n    public Mono&lt;List&lt;ReceiptDTO&gt;&gt; getAllReceiptsByCompanyId(@RequestParam Long companyId) {\n        log.debug(&quot;REST request to get all Receipts&quot;);\n\n        return receiptService.findByCompany(companyId).collectList();\n    }\n}\n</code></pre>\n"},{"tags":["java","maven","filenotfoundexception"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1671795834,"post_id":74899153,"comment_id":132177942,"body_markdown":"Can you please describe what: `For some reason it wont work,` means? Exception? does not work in IDE? Does not work on command line??","body":"Can you please describe what: <code>For some reason it wont work,</code> means? Exception? does not work in IDE? Does not work on command line??"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671797855,"post_id":74899153,"comment_id":132178455,"body_markdown":"*i also tried variations on the path like &quot;/pws.csv&quot;* And that&#39;s the very one that ought to work.","body":"<i>i also tried variations on the path like &quot;/pws.csv&quot;</i> And that&#39;s the very one that ought to work."},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671799070,"post_id":74899153,"comment_id":132178803,"body_markdown":"@khmarbaise editet the Question to include the error. I am sorry.","body":"@khmarbaise editet the Question to include the error. I am sorry."},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671799101,"post_id":74899153,"comment_id":132178816,"body_markdown":"@g00se sadly it did not, the very reason I am here","body":"@g00se sadly it did not, the very reason I am here"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671800243,"post_id":74899153,"comment_id":132179102,"body_markdown":"Please include the listing of the compiled jar: `jar tf foo-bar-1.0-SNAPSHOT.jar` *formatted as code*\n*@khmarbaise editet the Question to include the error. I am sorry.* I don&#39;t see that edit...","body":"Please include the listing of the compiled jar: <code>jar tf foo-bar-1.0-SNAPSHOT.jar</code> <i>formatted as code</i> <i>@khmarbaise editet the Question to include the error. I am sorry.</i> I don&#39;t see that edit..."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671800581,"post_id":74899153,"comment_id":132179196,"body_markdown":"Make it absolute (`/pws.csv`), not relative (without slash)! ...who knows where it otherwise resolves to!? (-&gt; `/com/kolan/pws.csv`!?;)","body":"Make it absolute (<code>&#47;pws.csv</code>), not relative (without slash)! ...who knows where it otherwise resolves to!? (-&gt; <code>&#47;com&#47;kolan&#47;pws.csv</code>!?;)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671800732,"post_id":74899153,"comment_id":132179236,"body_markdown":"..and also expand `target/classes` (to verify csv inside)","body":"..and also expand <code>target&#47;classes</code> (to verify csv inside)"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671800854,"post_id":74899153,"comment_id":132179263,"body_markdown":"And of course good old: [Class.getResource vs ClassLoader.getResource](https://stackoverflow.com/q/6608795/592355)","body":"And of course good old: <a href=\"https://stackoverflow.com/q/6608795/592355\">Class.getResource vs ClassLoader.getResource</a>"},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671801649,"post_id":74899153,"comment_id":132179465,"body_markdown":"@xerx593 the .csv is under target/classes/com/ is that the correct directory here? Also I tried using the ClassLoader but I got the same result ( Main.class.getClassLoader().getResourceAsStream )","body":"@xerx593 the .csv is under target/classes/com/ is that the correct directory here? Also I tried using the ClassLoader but I got the same result ( Main.class.getClassLoader().getResourceAsStream )"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671802006,"post_id":74899153,"comment_id":132179545,"body_markdown":"*is that the correct directory here?* No. It should be one higher. But according to the gui tree, that shouldn&#39;t be happening","body":"<i>is that the correct directory here?</i> No. It should be one higher. But according to the gui tree, that shouldn&#39;t be happening"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671802018,"post_id":74899153,"comment_id":132179551,"body_markdown":"`com` is really strange(please clean build).","body":"<code>com</code> is really strange(please clean build)."},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671802298,"post_id":74899153,"comment_id":132179620,"body_markdown":"it&#39;s under classes now","body":"it&#39;s under classes now"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671802329,"post_id":74899153,"comment_id":132179629,"body_markdown":"Then it should work with /pws.csv. It&#39;s probably better to have at least one directory of the resource root though","body":"Then it should work with /pws.csv. It&#39;s probably better to have at least one directory of the resource root though"},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671802467,"post_id":74899153,"comment_id":132179671,"body_markdown":"Sadly it does not, i still get the same error when running the jar and the file via intelliJ","body":"Sadly it does not, i still get the same error when running the jar and the file via intelliJ"},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671802568,"post_id":74899153,"comment_id":132179698,"body_markdown":"@g00se what exactly do you mean by that &quot;It&#39;s probably better to have at least one directory of the resource root though&quot; ?","body":"@g00se what exactly do you mean by that &quot;It&#39;s probably better to have at least one directory of the resource root though&quot; ?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671802581,"post_id":74899153,"comment_id":132179700,"body_markdown":"Since you still haven&#39;t posted the listing I can&#39;t really say why. Don&#39;t worry about my remark about directories at the moment. That&#39;s not going to help immediately","body":"Since you still haven&#39;t posted the listing I can&#39;t really say why. Don&#39;t worry about my remark about directories at the moment. That&#39;s not going to help immediately"},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671802841,"post_id":74899153,"comment_id":132179801,"body_markdown":"I&#39;m sorry, I added the output to the question","body":"I&#39;m sorry, I added the output to the question"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671803892,"post_id":74899153,"comment_id":132180059,"body_markdown":"Please never post images of text. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly.\nBut put that into practice right now by pasting the full stack trace of running the jar","body":"Please never post images of text. They are not searchable, we cannot copy-paste... Always copy-paste the text and format it properly. But put that into practice right now by pasting the full stack trace of running the jar"},{"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"score":0,"creation_date":1671804170,"post_id":74899153,"comment_id":132180138,"body_markdown":"Should be in the answer now","body":"Should be in the answer now"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671807234,"post_id":74899153,"comment_id":132180957,"body_markdown":"Had to leave. Back later","body":"Had to leave. Back later"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671812390,"post_id":74899153,"comment_id":132182352,"body_markdown":"At this stage I&#39;d probably need a link to your source","body":"At this stage I&#39;d probably need a link to your source"}],"answers":[{"tags":[],"owner":{"account_id":9512052,"reputation":15,"user_id":7069685,"display_name":"Stu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671823996,"creation_date":1671823996,"answer_id":74903387,"question_id":74899153,"body_markdown":"Put pwc.csv in a folder that is on the classpath. And of course, double check your classpath setting.","title":"cannot find resource with maven, even with resource marked as root directory","body":"<p>Put pwc.csv in a folder that is on the classpath. And of course, double check your classpath setting.</p>\n"}],"owner":{"account_id":20512494,"reputation":103,"user_id":15053949,"display_name":"Connor Kolan"},"comment_count":21,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":97,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671823996,"creation_date":1671795097,"question_id":74899153,"body_markdown":"[![My project strrcture][1]][1]\r\n\r\n\r\nI am trying to read pws.csv in the resources directory with this line:\r\n\r\n    BufferedReader br = new BufferedReader(new InputStreamReader(App.class.getClass().getResourceAsStream(&quot;pws.csv&quot;)));\r\n\r\nWhen I try to run it in IntelliJ or the comiled jar, I get a NullPointerExceptions, which I understand means that the file cannot be found. I also tried variations on the path like &quot;/pws.csv&quot; and &quot;src/main/resources/pws.csv&quot; and got the same error. My understanding is, that when using maven, &quot;src/main/resources&quot; is a special directory and intelliJ will recognize it, when searching for resources do I have to change some setting to achieve this or am I just stupid ?\r\n\r\nEdit:\r\nListing of the jar:\r\n\r\n[![Listing of the jar][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/orSJa.png\r\n  [2]: https://i.stack.imgur.com/Nbneo.png\r\n\r\nStacktrace of running that jar:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException\r\n    \tat java.base/java.io.Reader.&lt;init&gt;(Reader.java:167)\r\n    \tat java.base/java.io.InputStreamReader.&lt;init&gt;(InputStreamReader.java:72)\r\n    \tat com.kolan.Main.main(Main.java:8)","title":"cannot find resource with maven, even with resource marked as root directory","body":"<p><a href=\"https://i.stack.imgur.com/orSJa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/orSJa.png\" alt=\"My project strrcture\" /></a></p>\n<p>I am trying to read pws.csv in the resources directory with this line:</p>\n<pre><code>BufferedReader br = new BufferedReader(new InputStreamReader(App.class.getClass().getResourceAsStream(&quot;pws.csv&quot;)));\n</code></pre>\n<p>When I try to run it in IntelliJ or the comiled jar, I get a NullPointerExceptions, which I understand means that the file cannot be found. I also tried variations on the path like &quot;/pws.csv&quot; and &quot;src/main/resources/pws.csv&quot; and got the same error. My understanding is, that when using maven, &quot;src/main/resources&quot; is a special directory and intelliJ will recognize it, when searching for resources do I have to change some setting to achieve this or am I just stupid ?</p>\n<p>Edit:\nListing of the jar:</p>\n<p><a href=\"https://i.stack.imgur.com/Nbneo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Nbneo.png\" alt=\"Listing of the jar\" /></a></p>\n<p>Stacktrace of running that jar:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException\n    at java.base/java.io.Reader.&lt;init&gt;(Reader.java:167)\n    at java.base/java.io.InputStreamReader.&lt;init&gt;(InputStreamReader.java:72)\n    at com.kolan.Main.main(Main.java:8)\n</code></pre>\n"},{"tags":["java","spring-boot","junit"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671905989,"post_id":74902577,"comment_id":132195868,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"answers":[{"comments":[{"owner":{"account_id":25299544,"reputation":11,"user_id":19124021,"display_name":"unknown"},"score":0,"creation_date":1671920377,"post_id":74903349,"comment_id":132197936,"body_markdown":"i have tried the suggestions mentioned above, nothing seems to work, could you share sample code.","body":"i have tried the suggestions mentioned above, nothing seems to work, could you share sample code."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1671971022,"post_id":74903349,"comment_id":132202261,"body_markdown":"You can check my unit tests: https://github.com/robtimus/connect-sdk-java-spring-boot-starter/tree/master/src/test/java/com/github/robtimus/connect/sdk/java/springboot/autoconfigure","body":"You can check my unit tests: <a href=\"https://github.com/robtimus/connect-sdk-java-spring-boot-starter/tree/master/src/test/java/com/github/robtimus/connect/sdk/java/springboot/autoconfigure\" rel=\"nofollow noreferrer\">github.com/robtimus/connect-sdk-java-spring-boot-starter/tre&zwnj;&#8203;e/&hellip;</a>"}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671823566,"creation_date":1671823566,"answer_id":74903349,"question_id":74902577,"body_markdown":"You&#39;ve already found `ApplicationContextRunner`, but it can do a lot more than you&#39;ve shown here. https://www.baeldung.com/spring-boot-context-runner contains quite some examples.\r\n\r\nWhat I&#39;ve used myself mostly:\r\n* For `@ConditionalOnClass`, use `FilteredClassLoader` (see the above URL)\r\n* For `@ConditionalOnMissingBean` and `@ConditionalOnBean`, create a custom bean provider class that you include additionally using `withUserConfiguration`\r\n* For `@ConditionalOnProperty`, specify these using `withPropertyValues`\r\n* For `@ConditionalOnAvailableEndpoint` and `@ConditionalOnEnabledHealthIndicator`, just add the necessary properties to enable the endpoint or health indicator","title":"Junit tests for @ConditionalOnClass and @ConditionalOnBean annotations","body":"<p>You've already found <code>ApplicationContextRunner</code>, but it can do a lot more than you've shown here. <a href=\"https://www.baeldung.com/spring-boot-context-runner\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-boot-context-runner</a> contains quite some examples.</p>\n<p>What I've used myself mostly:</p>\n<ul>\n<li>For <code>@ConditionalOnClass</code>, use <code>FilteredClassLoader</code> (see the above URL)</li>\n<li>For <code>@ConditionalOnMissingBean</code> and <code>@ConditionalOnBean</code>, create a custom bean provider class that you include additionally using <code>withUserConfiguration</code></li>\n<li>For <code>@ConditionalOnProperty</code>, specify these using <code>withPropertyValues</code></li>\n<li>For <code>@ConditionalOnAvailableEndpoint</code> and <code>@ConditionalOnEnabledHealthIndicator</code>, just add the necessary properties to enable the endpoint or health indicator</li>\n</ul>\n"}],"owner":{"account_id":25299544,"reputation":11,"user_id":19124021,"display_name":"unknown"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":247,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671823566,"creation_date":1671817629,"question_id":74902577,"body_markdown":"I have my config class as shown below\r\n\r\n\r\n```\r\n@Configuration\r\n@ConditionalOnClass({SomeKeyService.class})\r\n@EnableConfigurationProperties({SomeConfig.class})\r\npublic class MyServiceAutoConfig {\r\n\r\n@Bean\r\n@ConditionalOnProperty(&quot;certificate.password&quot;)\r\n@ConditionalOnBean(KeyStore.class)\r\n@ConditionalOnMissingBean\r\npublic someClass myService(KeyStore ks, SomeConfig config) {\r\nreturn new someClass(ks, config.getPassword());\r\n}\r\n```\r\n\r\n```\r\npublic class MyServiceAutoConfigTest{\r\nApplicationRunner context = new ApplicationRunner().withConfiguration(AutoConfigurations.of(MyServiceAutoConfig.class));\r\n\r\n@Test\r\npublic void givenPropertyShouldHaveSomeClassBean() {\r\nthis.context.withUserConfiguration(MyServiceAutoConfig.class, SomeConfig.class)\r\n.withPropertyValues(&quot;certificate.password=hdgjashjfdjcn&quot;)\r\n.run((context) -&gt; {assertThat(context).hasSingleBean(someClass.class);});\r\n}\r\n```\r\n&gt; someClass implements SomeKeyService and KeyStore is java.security.KeyStore.\r\n\r\n&gt; Error: no beans found of that type.\r\n\r\nMy question is, How do i test these @Conditionals?\r\n","title":"Junit tests for @ConditionalOnClass and @ConditionalOnBean annotations","body":"<p>I have my config class as shown below</p>\n<pre><code>@Configuration\n@ConditionalOnClass({SomeKeyService.class})\n@EnableConfigurationProperties({SomeConfig.class})\npublic class MyServiceAutoConfig {\n\n@Bean\n@ConditionalOnProperty(&quot;certificate.password&quot;)\n@ConditionalOnBean(KeyStore.class)\n@ConditionalOnMissingBean\npublic someClass myService(KeyStore ks, SomeConfig config) {\nreturn new someClass(ks, config.getPassword());\n}\n</code></pre>\n<pre><code>public class MyServiceAutoConfigTest{\nApplicationRunner context = new ApplicationRunner().withConfiguration(AutoConfigurations.of(MyServiceAutoConfig.class));\n\n@Test\npublic void givenPropertyShouldHaveSomeClassBean() {\nthis.context.withUserConfiguration(MyServiceAutoConfig.class, SomeConfig.class)\n.withPropertyValues(&quot;certificate.password=hdgjashjfdjcn&quot;)\n.run((context) -&gt; {assertThat(context).hasSingleBean(someClass.class);});\n}\n</code></pre>\n<blockquote>\n<p>someClass implements SomeKeyService and KeyStore is java.security.KeyStore.</p>\n</blockquote>\n<blockquote>\n<p>Error: no beans found of that type.</p>\n</blockquote>\n<p>My question is, How do i test these @Conditionals?</p>\n"},{"tags":["java","java.util.scanner"],"comments":[{"owner":{"account_id":886578,"reputation":219,"user_id":925884,"accept_rate":100,"display_name":"Curlystraw"},"score":0,"creation_date":1354730093,"post_id":13729294,"comment_id":18861693,"body_markdown":"What SDK are you using? I just pasted your code into Eclipse, and it seems to work fine!","body":"What SDK are you using? I just pasted your code into Eclipse, and it seems to work fine!"},{"owner":{"account_id":2005973,"reputation":3730,"user_id":1795862,"accept_rate":96,"display_name":"adaam"},"score":0,"creation_date":1354736266,"post_id":13729294,"comment_id":18864605,"body_markdown":"I am running the program from within TextMate on Mac OS X, although when I run the program from Terminal, I get no errors. So I think it is an environmental issue rather than anything to do with the source code","body":"I am running the program from within TextMate on Mac OS X, although when I run the program from Terminal, I get no errors. So I think it is an environmental issue rather than anything to do with the source code"},{"owner":{"account_id":3557535,"reputation":2460,"user_id":2970890,"accept_rate":71,"display_name":"Ascendant"},"score":1,"creation_date":1391816566,"post_id":13729294,"comment_id":32703444,"body_markdown":"@adaam The reason you got this error is because TextMate terminal simulator can&#39;t (or not properly configured to) accept inputs, I got the same issue in Sublime Text 2.","body":"@adaam The reason you got this error is because TextMate terminal simulator can&#39;t (or not properly configured to) accept inputs, I got the same issue in Sublime Text 2."}],"answers":[{"tags":[],"owner":{"account_id":2043682,"reputation":813,"user_id":1824286,"accept_rate":38,"display_name":"Addict"},"comment_count":0,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1354730004,"creation_date":1354730004,"answer_id":13729393,"question_id":13729294,"body_markdown":"You should use `hasNextInt()` before assigning value to variable.","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>You should use <code>hasNextInt()</code> before assigning value to variable.</p>\n"},{"comments":[{"owner":{"account_id":2005973,"reputation":3730,"user_id":1795862,"accept_rate":96,"display_name":"adaam"},"score":0,"creation_date":1354730420,"post_id":13729414,"comment_id":18861846,"body_markdown":"I receive &quot;variable number1 might not have been initialized&quot; and the same for the second variable.","body":"I receive &quot;variable number1 might not have been initialized&quot; and the same for the second variable."},{"owner":{"display_name":"user813853"},"score":0,"creation_date":1354734790,"post_id":13729414,"comment_id":18863821,"body_markdown":"that means you have not initialized the variable `number1`. \ntry `int number1 = 0; int number2 = 0; `","body":"that means you have not initialized the variable <code>number1</code>.  try <code>int number1 = 0; int number2 = 0; </code>"}],"tags":[],"owner":{"display_name":"user813853"},"comment_count":2,"down_vote_count":1,"up_vote_count":13,"is_accepted":true,"score":12,"last_activity_date":1354734992,"creation_date":1354730061,"answer_id":13729414,"question_id":13729294,"body_markdown":"`NoSuchElementException` *Thrown by the `nextElement` method of an Enumeration to indicate that there are no more elements in the enumeration.*\r\n\r\nhttp://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html\r\n\r\nHow about this : \r\n\r\n    if(input.hasNextInt() )\r\n         number1 = input.nextInt(); // if there is another number  \r\n    else \r\n         number1 = 0; // nothing added in the input \r\n\r\n","title":"NoSuchElementException with Java.Util.Scanner","body":"<p><code>NoSuchElementException</code> <em>Thrown by the <code>nextElement</code> method of an Enumeration to indicate that there are no more elements in the enumeration.</em></p>\n\n<p><a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html\" rel=\"noreferrer\">http://docs.oracle.com/javase/7/docs/api/java/util/NoSuchElementException.html</a></p>\n\n<p>How about this : </p>\n\n<pre><code>if(input.hasNextInt() )\n     number1 = input.nextInt(); // if there is another number  \nelse \n     number1 = 0; // nothing added in the input \n</code></pre>\n"},{"comments":[{"owner":{"account_id":2005973,"reputation":3730,"user_id":1795862,"accept_rate":96,"display_name":"adaam"},"score":0,"creation_date":1354736116,"post_id":13729470,"comment_id":18864529,"body_markdown":"Just a sidenote, (I use Mac OS X) I have been trying to compile and run this source code from within my text editor (TextMate- which allows for this kind of procedure). But I have been experiencing the NoSuchElementException still despite your suggestions. When I javac and java the file inside of Terminal however, the example above runs perfectly  - why is this?","body":"Just a sidenote, (I use Mac OS X) I have been trying to compile and run this source code from within my text editor (TextMate- which allows for this kind of procedure). But I have been experiencing the NoSuchElementException still despite your suggestions. When I javac and java the file inside of Terminal however, the example above runs perfectly  - why is this?"}],"tags":[],"owner":{"account_id":72575,"reputation":40794,"user_id":209513,"accept_rate":100,"display_name":"Subhrajyoti Majumder"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1354730246,"creation_date":1354730246,"answer_id":13729470,"question_id":13729294,"body_markdown":"`Integer#nextInt` throws `NoSuchElementException` - if input is exhausted\r\n\r\nYou should check if there is a next line with `Integer#hasNextLine`\r\n\r\n    if(sc.hasNextLine()){\r\n        number1=sc.nextInt();\r\n    }\r\n\r\n","title":"NoSuchElementException with Java.Util.Scanner","body":"<p><code>Integer#nextInt</code> throws <code>NoSuchElementException</code> - if input is exhausted</p>\n\n<p>You should check if there is a next line with <code>Integer#hasNextLine</code></p>\n\n<pre><code>if(sc.hasNextLine()){\n    number1=sc.nextInt();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":397289,"reputation":17010,"user_id":761330,"accept_rate":97,"display_name":"Terry Li"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1354730664,"creation_date":1354730664,"answer_id":13729573,"question_id":13729294,"body_markdown":"`NoSuchElementException` will be thrown [if no more tokens are available][1]. This is caused by invoking `nextInt()` without checking [if there&#39;s any integer available][2]. To prevent it from happening, you may consider using `hasNextInt()` to check if any more tokens are available.\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#hasNext%28%29","title":"NoSuchElementException with Java.Util.Scanner","body":"<p><code>NoSuchElementException</code> will be thrown <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29\" rel=\"nofollow\">if no more tokens are available</a>. This is caused by invoking <code>nextInt()</code> without checking <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html#hasNext%28%29\" rel=\"nofollow\">if there's any integer available</a>. To prevent it from happening, you may consider using <code>hasNextInt()</code> to check if any more tokens are available.</p>\n"},{"tags":[],"owner":{"account_id":15114345,"reputation":11,"user_id":10907253,"display_name":"Kaushal Vyas 007"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547368961,"creation_date":1547368961,"answer_id":54167294,"question_id":13729294,"body_markdown":"You must add input.close() at the end...","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>You must add input.close() at the end...</p>\n"},{"tags":[],"owner":{"account_id":17022824,"reputation":169,"user_id":12314888,"display_name":"Deepanshu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1585729117,"creation_date":1585729117,"answer_id":60966389,"question_id":13729294,"body_markdown":"This error is mostly occur in case of 0nline IDE&#39;s on which you are testing your code. It is not configured properly, as if you run the same code on any other IDE/Notepad it works properly because the online IDE is not designed such a way that it will adjust the input code of your format, So you have to take input as the Online IDE supports.\r\n","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>This error is mostly occur in case of 0nline IDE's on which you are testing your code. It is not configured properly, as if you run the same code on any other IDE/Notepad it works properly because the online IDE is not designed such a way that it will adjust the input code of your format, So you have to take input as the Online IDE supports.</p>\n"},{"tags":[],"owner":{"account_id":17861786,"reputation":31,"user_id":12975111,"display_name":"maganoegi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1602112629,"creation_date":1602112629,"answer_id":64253592,"question_id":13729294,"body_markdown":"If I may, I solved this issue today by realizing that I had multiple functions that used an instance of a Scanner, each. So basically, try refactoring so that you have only **one instance opened and then closed in the end** - this should work.","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>If I may, I solved this issue today by realizing that I had multiple functions that used an instance of a Scanner, each. So basically, try refactoring so that you have only <strong>one instance opened and then closed in the end</strong> - this should work.</p>\n"},{"tags":[],"owner":{"account_id":20265046,"reputation":15,"user_id":14862455,"display_name":"Saeed Dai Alnoor"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1615283690,"creation_date":1615283690,"answer_id":66544602,"question_id":13729294,"body_markdown":"I faced this Error with nextDouble(), when I input numbers such as 5.3, 23.8 ... I think that was from my PC depending on computer settings that use Arabic (23,33 instead 23.33),  I fixed it with add: \r\nScanner scanner = new Scanner(System.in).useLocale(Locale.US);","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>I faced this Error with nextDouble(), when I input numbers such as 5.3, 23.8 ... I think that was from my PC depending on computer settings that use Arabic (23,33 instead 23.33),  I fixed it with add:\nScanner scanner = new Scanner(System.in).useLocale(Locale.US);</p>\n"},{"tags":[],"owner":{"account_id":7844722,"reputation":116,"user_id":5930157,"display_name":"douglas"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1661777743,"creation_date":1661777743,"answer_id":73529132,"question_id":13729294,"body_markdown":"For anyone using gradle&#39;s application plugin, you must wire it to the standard console in build.gradle(.kts) otherwise it will keep throwing the NoSuchElementException error if you try to use scanner.\r\n\r\nFor groovy:\r\n\r\n    run {\r\n    standardInput = System.in}\r\n\r\nFor gradle kotlin dsl:\r\n\r\n    tasks.withType&lt;JavaExec&gt;() {\r\n    standardInput = System.`in`}","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>For anyone using gradle's application plugin, you must wire it to the standard console in build.gradle(.kts) otherwise it will keep throwing the NoSuchElementException error if you try to use scanner.</p>\n<p>For groovy:</p>\n<pre><code>run {\nstandardInput = System.in}\n</code></pre>\n<p>For gradle kotlin dsl:</p>\n<pre><code>tasks.withType&lt;JavaExec&gt;() {\nstandardInput = System.`in`}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17878793,"reputation":1,"user_id":12988134,"display_name":"Utkarshthgr8"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671823385,"creation_date":1671823385,"answer_id":74903326,"question_id":13729294,"body_markdown":"I added a **single static scanner** (sc) at the top of my class and closed it (sc.close()) when coming out of the whole class wherever I used return statements. Again that&#39;s **one instance of scanner** as suggested by another answer, which should be **static**.\r\n\r\n\r\n    package com.example.com;\r\n\timport java.util.Scanner;\r\n\r\n\tpublic class someClass {\r\n\t\tstatic Scanner sc = new Scanner(System.in);\r\n\t\t//Whole world of methods using same sc.\r\n\t\t//sc.close()); return;\r\n\t}\r\n\r\nOther than that you can add @SuppressWarnings(&quot;resource&quot;) on the top of the troubling method to *make the warning go away.* But be careful about resource leaks.","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>I added a <strong>single static scanner</strong> (sc) at the top of my class and closed it (sc.close()) when coming out of the whole class wherever I used return statements. Again that's <strong>one instance of scanner</strong> as suggested by another answer, which should be <strong>static</strong>.</p>\n<pre><code>package com.example.com;\nimport java.util.Scanner;\n\npublic class someClass {\n    static Scanner sc = new Scanner(System.in);\n    //Whole world of methods using same sc.\n    //sc.close()); return;\n}\n</code></pre>\n<p>Other than that you can add @SuppressWarnings(&quot;resource&quot;) on the top of the troubling method to <em>make the warning go away.</em> But be careful about resource leaks.</p>\n"}],"owner":{"account_id":2005973,"reputation":3730,"user_id":1795862,"accept_rate":96,"display_name":"adaam"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":114657,"favorite_count":0,"down_vote_count":1,"up_vote_count":23,"accepted_answer_id":13729414,"answer_count":10,"score":22,"last_activity_date":1671823385,"creation_date":1354729658,"question_id":13729294,"body_markdown":"I am very new to Java but am working through the book Java: How to program (9th ed.) and have reached an example where for the life of me I cannot figure out what the problem is.\r\n\r\nHere is a (slightly) augmented version of the source code example in the textbook:\r\n\r\n    import java.util.Scanner;\r\n    public class Addition {\r\n      public static void main(String[] args) {\r\n        // creates a scanner to obtain input from a command window\r\n    \r\n        Scanner input = new Scanner(System.in);\r\n    \r\n        int number1; // first number to add\r\n        int number2; // second number to add\r\n        int sum; // sum of 1 &amp; 2\r\n    \r\n        System.out.print(&quot;Enter First Integer: &quot;); // prompt\r\n        number1 = input.nextInt(); // reads first number inputted by user\r\n    \r\n        System.out.print(&quot;Enter Second Integer: &quot;); // prompt 2 \r\n        number2 = input.nextInt(); // reads second number from user\r\n    \r\n        sum = number1 + number2; // addition takes place, then stores the total of the two numbers in sum\r\n    \r\n        System.out.printf( &quot;Sum is %d\\n&quot;, sum ); // displays the sum on screen\r\n      } // end method main\r\n    } // end class Addition\r\n\r\nI am getting the &#39;NoSuchElementException&#39; error:\r\n\r\n    Exception in thread &quot;main&quot; java.util.NoSuchElementException\r\n\tat java.util.Scanner.throwFor(Scanner.java:838)\r\n\tat java.util.Scanner.next(Scanner.java:1461)\r\n\tat java.util.Scanner.nextInt(Scanner.java:2091)\r\n\tat java.util.Scanner.nextInt(Scanner.java:2050)\r\n\tat Addition.main(Addition.java:16)\r\n    Enter First Integer:\r\n\r\nI understand that this is probably due to something in the source code that is incompatible with the `Scanner` class from `java.util`, but I really can&#39;t get any further than this in terms of deducing what the problem is.","title":"NoSuchElementException with Java.Util.Scanner","body":"<p>I am very new to Java but am working through the book Java: How to program (9th ed.) and have reached an example where for the life of me I cannot figure out what the problem is.</p>\n\n<p>Here is a (slightly) augmented version of the source code example in the textbook:</p>\n\n<pre><code>import java.util.Scanner;\npublic class Addition {\n  public static void main(String[] args) {\n    // creates a scanner to obtain input from a command window\n\n    Scanner input = new Scanner(System.in);\n\n    int number1; // first number to add\n    int number2; // second number to add\n    int sum; // sum of 1 &amp; 2\n\n    System.out.print(\"Enter First Integer: \"); // prompt\n    number1 = input.nextInt(); // reads first number inputted by user\n\n    System.out.print(\"Enter Second Integer: \"); // prompt 2 \n    number2 = input.nextInt(); // reads second number from user\n\n    sum = number1 + number2; // addition takes place, then stores the total of the two numbers in sum\n\n    System.out.printf( \"Sum is %d\\n\", sum ); // displays the sum on screen\n  } // end method main\n} // end class Addition\n</code></pre>\n\n<p>I am getting the 'NoSuchElementException' error:</p>\n\n<pre><code>Exception in thread \"main\" java.util.NoSuchElementException\nat java.util.Scanner.throwFor(Scanner.java:838)\nat java.util.Scanner.next(Scanner.java:1461)\nat java.util.Scanner.nextInt(Scanner.java:2091)\nat java.util.Scanner.nextInt(Scanner.java:2050)\nat Addition.main(Addition.java:16)\nEnter First Integer:\n</code></pre>\n\n<p>I understand that this is probably due to something in the source code that is incompatible with the <code>Scanner</code> class from <code>java.util</code>, but I really can't get any further than this in terms of deducing what the problem is.</p>\n"},{"tags":["java","json","jackson","record"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":1,"creation_date":1671726361,"post_id":74890806,"comment_id":132164446,"body_markdown":"if a json object contains a field that contains a &quot;discriminator&quot; you can setup your classes in a hierachy where the base class contains only that field (and all common fields) and have subclasses for each discriminator value. https://www.baeldung.com/jackson-inheritance#2-per-class-annotations is an example of that. `@JsonSubTypes` defines the value to class mapping and `@JsonTypeInfo` defines the field name - or see https://stackoverflow.com/questions/18394819/jackson-polymorphism-how-to-map-multiple-subtypes-to-the-same-class","body":"if a json object contains a field that contains a &quot;discriminator&quot; you can setup your classes in a hierachy where the base class contains only that field (and all common fields) and have subclasses for each discriminator value. <a href=\"https://www.baeldung.com/jackson-inheritance#2-per-class-annotations\" rel=\"nofollow noreferrer\">baeldung.com/jackson-inheritance#2-per-class-annotations</a> is an example of that. <code>@JsonSubTypes</code> defines the value to class mapping and <code>@JsonTypeInfo</code> defines the field name - or see <a href=\"https://stackoverflow.com/questions/18394819/jackson-polymorphism-how-to-map-multiple-subtypes-to-the-same-class\" title=\"jackson polymorphism how to map multiple subtypes to the same class\">stackoverflow.com/questions/18394819/&hellip;</a>"},{"owner":{"account_id":104307,"reputation":5969,"user_id":278949,"accept_rate":97,"display_name":"Frank"},"score":0,"creation_date":1671729180,"post_id":74890806,"comment_id":132165248,"body_markdown":"indeed, but as far as I know that won&#39;t work on Java records as they can&#39;t extend from a base...","body":"indeed, but as far as I know that won&#39;t work on Java records as they can&#39;t extend from a base..."}],"answers":[{"comments":[{"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"score":2,"creation_date":1671729443,"post_id":74891785,"comment_id":132165341,"body_markdown":"You can add the type field as a `name` property in the `@JsonSubTypes.Type` annotation, but this works with or without discriminator as long as the fields in your records are never exactly the same","body":"You can add the type field as a <code>name</code> property in the <code>@JsonSubTypes.Type</code> annotation, but this works with or without discriminator as long as the fields in your records are never exactly the same"},{"owner":{"account_id":104307,"reputation":5969,"user_id":278949,"accept_rate":97,"display_name":"Frank"},"score":0,"creation_date":1671745415,"post_id":74891785,"comment_id":132169554,"body_markdown":"wow, really like this approach! thanks for your very detailed explanation and test case!!!","body":"wow, really like this approach! thanks for your very detailed explanation and test case!!!"}],"tags":[],"owner":{"account_id":17006998,"reputation":713,"user_id":12302982,"display_name":"Igor Flakiewicz"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1671823246,"creation_date":1671729284,"answer_id":74891785,"question_id":74890806,"body_markdown":"Records cannot inherit because they are intended to be a solid contract, but they can implement an interface. So you can do something like this with `JasonSubTypes` with Jackson 2.12 or above:\r\n\r\nModels\r\n```java\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record Drawing(\r\n        String name,\r\n        List&lt;BaseShape&gt; shapes\r\n) { }\r\n\r\n// added benefit of interface here is it reminds you to have the default fields\r\n@JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)\r\n@JsonSubTypes({\r\n        @JsonSubTypes.Type(ShapeA.class),\r\n        @JsonSubTypes.Type(ShapeB.class),\r\n        @JsonSubTypes.Type(ShapeC.class)\r\n})\r\npublic interface BaseShape {\r\n    Integer width();\r\n    Integer height();\r\n}\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record ShapeA (\r\n        Integer width,\r\n        Integer height,\r\n        String label\r\n) implements BaseShape { }\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record ShapeB(\r\n        Integer width,\r\n        Integer height,\r\n        Integer length\r\n) implements BaseShape { }\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record ShapeC(\r\n        Integer width,\r\n        Integer height,\r\n        String url,\r\n        String color\r\n) implements BaseShape { }\r\n```\r\n\r\nTest Class\r\n```java\r\n@Slf4j\r\nclass DemoTest {\r\n\r\n    private ObjectMapper objectMapper = ObjectMapperBuilder.getObjectMapper();\r\n\r\n    @Test\r\n    void test() throws JsonProcessingException {\r\n        final String testString = objectMapper\r\n                .writerWithDefaultPrettyPrinter()\r\n                .writeValueAsString(\r\n                        new Drawing(\r\n                                &quot;happy&quot;,\r\n                                List.of(\r\n                                        new ShapeA(1, 1, &quot;happyShape&quot;),\r\n                                        new ShapeB(2, 2, 3),\r\n                                        new ShapeC(2, 2, &quot;www.shape.com/shape&quot;, &quot;blue&quot;\r\n                                        )\r\n                                )\r\n                        )\r\n                );\r\n\r\n        log.info(&quot;From model to string {}&quot;, testString);\r\n\r\n        Drawing drawing = objectMapper.readValue(testString, Drawing.class);\r\n\r\n        log.info(\r\n                &quot;Captured types {}&quot;,\r\n                drawing\r\n                    .shapes()\r\n                    .stream()\r\n                    .map(s -&gt; s.getClass().getName())\r\n                    .collect(Collectors.toSet())\r\n        );\r\n\r\n        log.info(\r\n                &quot;From string back to model then again to string {}&quot;,\r\n                objectMapper\r\n                    .writerWithDefaultPrettyPrinter()\r\n                    .writeValueAsString(drawing)\r\n        );\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nHere&#39;s the test log output:\r\n```log\r\n17:06:41.293 [Test worker] INFO com.demo.DemoTest - From model to string {\r\n  &quot;name&quot; : &quot;happy&quot;,\r\n  &quot;shapes&quot; : [ {\r\n    &quot;width&quot; : 1,\r\n    &quot;height&quot; : 1,\r\n    &quot;label&quot; : &quot;happyShape&quot;\r\n  }, {\r\n    &quot;width&quot; : 2,\r\n    &quot;height&quot; : 2,\r\n    &quot;length&quot; : 3\r\n  }, {\r\n    &quot;width&quot; : 2,\r\n    &quot;height&quot; : 2,\r\n    &quot;url&quot; : &quot;www.shape.com/shape&quot;,\r\n    &quot;color&quot; : &quot;blue&quot;\r\n  } ]\r\n}\r\n17:06:41.353 [Test worker] INFO com.demo.DemoTest - Captured types [com.demo.DemoTest$ShapeB, com.demo.DemoTest$ShapeA, com.demo.DemoTest$ShapeC]\r\n17:06:41.354 [Test worker] INFO com.demo.DemoTest - From string back to model then again to string {\r\n  &quot;name&quot; : &quot;happy&quot;,\r\n  &quot;shapes&quot; : [ {\r\n    &quot;width&quot; : 1,\r\n    &quot;height&quot; : 1,\r\n    &quot;label&quot; : &quot;happyShape&quot;\r\n  }, {\r\n    &quot;width&quot; : 2,\r\n    &quot;height&quot; : 2,\r\n    &quot;length&quot; : 3\r\n  }, {\r\n    &quot;width&quot; : 2,\r\n    &quot;height&quot; : 2,\r\n    &quot;url&quot; : &quot;www.shape.com/shape&quot;,\r\n    &quot;color&quot; : &quot;blue&quot;\r\n  } ]\r\n}\r\n\r\n```\r\n\r\nNote that you can add the `type` field as a `name` property of the `@JsonSubTypes.Type` annotation, but this works with or without discriminator as long as the fields in your records are never exactly the same.\r\n\r\nYou can read more about `JsonSubtypes` [**here**](https://cowtowncoder.medium.com/jackson-2-12-most-wanted-1-5-deduction-based-polymorphism-c7fb51db7818).","title":"Parse JSON to Java records with fasterxml.jackson","body":"<p>Records cannot inherit because they are intended to be a solid contract, but they can implement an interface. So you can do something like this with <code>JasonSubTypes</code> with Jackson 2.12 or above:</p>\n<p>Models</p>\n<pre class=\"lang-java prettyprint-override\"><code>@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record Drawing(\n        String name,\n        List&lt;BaseShape&gt; shapes\n) { }\n\n// added benefit of interface here is it reminds you to have the default fields\n@JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)\n@JsonSubTypes({\n        @JsonSubTypes.Type(ShapeA.class),\n        @JsonSubTypes.Type(ShapeB.class),\n        @JsonSubTypes.Type(ShapeC.class)\n})\npublic interface BaseShape {\n    Integer width();\n    Integer height();\n}\n\n@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record ShapeA (\n        Integer width,\n        Integer height,\n        String label\n) implements BaseShape { }\n\n@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record ShapeB(\n        Integer width,\n        Integer height,\n        Integer length\n) implements BaseShape { }\n\n@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record ShapeC(\n        Integer width,\n        Integer height,\n        String url,\n        String color\n) implements BaseShape { }\n</code></pre>\n<p>Test Class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Slf4j\nclass DemoTest {\n\n    private ObjectMapper objectMapper = ObjectMapperBuilder.getObjectMapper();\n\n    @Test\n    void test() throws JsonProcessingException {\n        final String testString = objectMapper\n                .writerWithDefaultPrettyPrinter()\n                .writeValueAsString(\n                        new Drawing(\n                                &quot;happy&quot;,\n                                List.of(\n                                        new ShapeA(1, 1, &quot;happyShape&quot;),\n                                        new ShapeB(2, 2, 3),\n                                        new ShapeC(2, 2, &quot;www.shape.com/shape&quot;, &quot;blue&quot;\n                                        )\n                                )\n                        )\n                );\n\n        log.info(&quot;From model to string {}&quot;, testString);\n\n        Drawing drawing = objectMapper.readValue(testString, Drawing.class);\n\n        log.info(\n                &quot;Captured types {}&quot;,\n                drawing\n                    .shapes()\n                    .stream()\n                    .map(s -&gt; s.getClass().getName())\n                    .collect(Collectors.toSet())\n        );\n\n        log.info(\n                &quot;From string back to model then again to string {}&quot;,\n                objectMapper\n                    .writerWithDefaultPrettyPrinter()\n                    .writeValueAsString(drawing)\n        );\n    }\n\n}\n\n</code></pre>\n<p>Here's the test log output:</p>\n<pre><code>17:06:41.293 [Test worker] INFO com.demo.DemoTest - From model to string {\n  &quot;name&quot; : &quot;happy&quot;,\n  &quot;shapes&quot; : [ {\n    &quot;width&quot; : 1,\n    &quot;height&quot; : 1,\n    &quot;label&quot; : &quot;happyShape&quot;\n  }, {\n    &quot;width&quot; : 2,\n    &quot;height&quot; : 2,\n    &quot;length&quot; : 3\n  }, {\n    &quot;width&quot; : 2,\n    &quot;height&quot; : 2,\n    &quot;url&quot; : &quot;www.shape.com/shape&quot;,\n    &quot;color&quot; : &quot;blue&quot;\n  } ]\n}\n17:06:41.353 [Test worker] INFO com.demo.DemoTest - Captured types [com.demo.DemoTest$ShapeB, com.demo.DemoTest$ShapeA, com.demo.DemoTest$ShapeC]\n17:06:41.354 [Test worker] INFO com.demo.DemoTest - From string back to model then again to string {\n  &quot;name&quot; : &quot;happy&quot;,\n  &quot;shapes&quot; : [ {\n    &quot;width&quot; : 1,\n    &quot;height&quot; : 1,\n    &quot;label&quot; : &quot;happyShape&quot;\n  }, {\n    &quot;width&quot; : 2,\n    &quot;height&quot; : 2,\n    &quot;length&quot; : 3\n  }, {\n    &quot;width&quot; : 2,\n    &quot;height&quot; : 2,\n    &quot;url&quot; : &quot;www.shape.com/shape&quot;,\n    &quot;color&quot; : &quot;blue&quot;\n  } ]\n}\n\n</code></pre>\n<p>Note that you can add the <code>type</code> field as a <code>name</code> property of the <code>@JsonSubTypes.Type</code> annotation, but this works with or without discriminator as long as the fields in your records are never exactly the same.</p>\n<p>You can read more about <code>JsonSubtypes</code> <a href=\"https://cowtowncoder.medium.com/jackson-2-12-most-wanted-1-5-deduction-based-polymorphism-c7fb51db7818\" rel=\"nofollow noreferrer\"><strong>here</strong></a>.</p>\n"}],"owner":{"account_id":104307,"reputation":5969,"user_id":278949,"accept_rate":97,"display_name":"Frank"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4310,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74891785,"answer_count":1,"score":2,"last_activity_date":1671823246,"creation_date":1671723766,"question_id":74890806,"body_markdown":"Java records can not - by design - inherit from another object (see https://stackoverflow.com/questions/71139939/why-java-records-do-not-support-inheritance). So I wonder what would be the best way to achieve the following.\r\n\r\nGiven my JSON data contains objects that have some common data + unique data. For example, type, width and height are in all shapes, but depending on the type, they can have additional fields:\r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;testDrawing&quot;,\r\n  &quot;shapes&quot;: [\r\n    {\r\n      &quot;type&quot;: &quot;shapeA&quot;,\r\n      &quot;width&quot;: 100,\r\n      &quot;height&quot;: 200,\r\n      &quot;label&quot;: &quot;test&quot;\r\n    },\r\n    {\r\n      &quot;type&quot;: &quot;shapeB&quot;,\r\n      &quot;width&quot;: 100,\r\n      &quot;height&quot;: 200,\r\n      &quot;length&quot;: 300\r\n    },\r\n    {\r\n      &quot;type&quot;: &quot;shapeC&quot;,\r\n      &quot;width&quot;: 100,\r\n      &quot;height&quot;: 200,\r\n      &quot;url&quot;: &quot;www.test.be&quot;,\r\n      &quot;color&quot;: &quot;#FF2233&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nIn &quot;traditional&quot; Java you would do this with \r\n\r\n```\r\nBaseShape with width and height\r\nShapeA extends BaseShape with label\r\nShapeB extends BaseShape with length\r\nShapeC extends BaseShape with URL and color\r\n```\r\n\r\nBut I&#39;m a bit stubborn and really would like to use records.\r\n\r\nMy solution now looks like this:\r\n\r\n* No BaseShape\r\n* The common fields are repeated in all records\r\n\r\n```\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record Drawing(\r\n        @JsonProperty(&quot;name&quot;)\r\n        String name,\r\n\r\n        @JsonProperty(&quot;shapes&quot;)\r\n        @JsonDeserialize(using = TestDeserializer.class)\r\n        List&lt;Object&gt; shapes // I don&#39;t like the Objects here... \r\n) {\r\n}\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record ShapeA (\r\n        @JsonProperty(&quot;type&quot;) String type,\r\n        @JsonProperty(&quot;width&quot;) Integer width,\r\n        @JsonProperty(&quot;height&quot;) Integer height,\r\n        @JsonProperty(&quot;label&quot;) String label\r\n) {\r\n}\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record ShapeB(\r\n        @JsonProperty(&quot;type&quot;) String type,\r\n        @JsonProperty(&quot;width&quot;) Integer width,\r\n        @JsonProperty(&quot;height&quot;) Integer height,\r\n        @JsonProperty(&quot;length&quot;) Integer length\r\n) {\r\n}\r\n\r\n@JsonIgnoreProperties(ignoreUnknown = true)\r\n@JsonInclude(JsonInclude.Include.NON_NULL)\r\npublic record ShapeC(\r\n        @JsonProperty(&quot;type&quot;) String type,\r\n        @JsonProperty(&quot;width&quot;) Integer width,\r\n        @JsonProperty(&quot;height&quot;) Integer height,\r\n        @JsonProperty(&quot;url&quot;) String url,\r\n        @JsonProperty(&quot;color&quot;) String color\r\n) {\r\n}\r\n\r\n```\r\n\r\nI don&#39;t like repeated code and it&#39;s a bad practice... But in the end I can get this loaded with this helper class:\r\n\r\n```\r\npublic class TestDeserializer extends JsonDeserializer {\r\n\r\n    ObjectMapper mapper = new ObjectMapper();\r\n\r\n    @Override\r\n    public List&lt;Object&gt; deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\r\n        List&lt;Object&gt; rt = new ArrayList&lt;&gt;();\r\n\r\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\r\n\r\n        if (node instanceof ArrayNode array) {\r\n            for (Iterator&lt;JsonNode&gt; it = array.elements(); it.hasNext(); ) {\r\n                JsonNode childNode = it.next();\r\n                rt.add(getShape(childNode));\r\n            }\r\n        } else {\r\n            rt.add(getShape(node));\r\n        }\r\n\r\n        return rt;\r\n    }\r\n\r\n    private Object getShape(JsonNode node) {\r\n        var type = node.get(&quot;type&quot;).asText();\r\n        switch (type) {\r\n            case &quot;shapeA&quot;:\r\n                return mapper.convertValue(node, ShapeA.class);\r\n            case &quot;shapeB&quot;:\r\n                return mapper.convertValue(node, ShapeB.class);\r\n            case &quot;shapeC&quot;:\r\n                return mapper.convertValue(node, ShapeC.class);\r\n            default:\r\n                throw new IllegalArgumentException(&quot;Shape could not be parsed&quot;);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd this test proves to be working OK:\r\n\r\n```\r\n@Test\r\n    void fromJsonToJson() throws IOException, JSONException {\r\n        File f = new File(this.getClass().getResource(&quot;/test.json&quot;).getFile());\r\n        String jsonFromFile = Files.readString(f.toPath());\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        Drawing drawing = mapper.readValue(jsonFromFile, Drawing.class);\r\n        String jsonFromObject = mapper.writeValueAsString(drawing);\r\n\r\n        System.out.println(&quot;Original:\\n&quot; + jsonFromFile.replace(&quot;\\n&quot;, &quot;&quot;).replace(&quot; &quot;, &quot;&quot;));\r\n        System.out.println(&quot;Generated:\\n&quot; + jsonFromObject);\r\n\r\n        assertAll(\r\n                //() -&gt; assertEquals(jsonFromFile, jsonFromObject),\r\n                () -&gt; assertEquals(&quot;testDrawing&quot;, drawing.name()),\r\n                () -&gt; assertTrue(drawing.shapes().get(0) instanceof ShapeA),\r\n                () -&gt; assertTrue(drawing.shapes().get(1) instanceof ShapeB),\r\n                () -&gt; assertTrue(drawing.shapes().get(2) instanceof ShapeC)\r\n        );\r\n    }\r\n```\r\n\r\nWhat would be the best way to achieve this with the Jackson library and Java Records?\r\n\r\nExtra sidenote: I will also need to be able to write back to JSON in the same format as the original.","title":"Parse JSON to Java records with fasterxml.jackson","body":"<p>Java records can not - by design - inherit from another object (see <a href=\"https://stackoverflow.com/questions/71139939/why-java-records-do-not-support-inheritance\">Why Java records do not support inheritance?</a>). So I wonder what would be the best way to achieve the following.</p>\n<p>Given my JSON data contains objects that have some common data + unique data. For example, type, width and height are in all shapes, but depending on the type, they can have additional fields:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;testDrawing&quot;,\n  &quot;shapes&quot;: [\n    {\n      &quot;type&quot;: &quot;shapeA&quot;,\n      &quot;width&quot;: 100,\n      &quot;height&quot;: 200,\n      &quot;label&quot;: &quot;test&quot;\n    },\n    {\n      &quot;type&quot;: &quot;shapeB&quot;,\n      &quot;width&quot;: 100,\n      &quot;height&quot;: 200,\n      &quot;length&quot;: 300\n    },\n    {\n      &quot;type&quot;: &quot;shapeC&quot;,\n      &quot;width&quot;: 100,\n      &quot;height&quot;: 200,\n      &quot;url&quot;: &quot;www.test.be&quot;,\n      &quot;color&quot;: &quot;#FF2233&quot;\n    }\n  ]\n}\n</code></pre>\n<p>In &quot;traditional&quot; Java you would do this with</p>\n<pre><code>BaseShape with width and height\nShapeA extends BaseShape with label\nShapeB extends BaseShape with length\nShapeC extends BaseShape with URL and color\n</code></pre>\n<p>But I'm a bit stubborn and really would like to use records.</p>\n<p>My solution now looks like this:</p>\n<ul>\n<li>No BaseShape</li>\n<li>The common fields are repeated in all records</li>\n</ul>\n<pre><code>@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record Drawing(\n        @JsonProperty(&quot;name&quot;)\n        String name,\n\n        @JsonProperty(&quot;shapes&quot;)\n        @JsonDeserialize(using = TestDeserializer.class)\n        List&lt;Object&gt; shapes // I don't like the Objects here... \n) {\n}\n\n@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record ShapeA (\n        @JsonProperty(&quot;type&quot;) String type,\n        @JsonProperty(&quot;width&quot;) Integer width,\n        @JsonProperty(&quot;height&quot;) Integer height,\n        @JsonProperty(&quot;label&quot;) String label\n) {\n}\n\n@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record ShapeB(\n        @JsonProperty(&quot;type&quot;) String type,\n        @JsonProperty(&quot;width&quot;) Integer width,\n        @JsonProperty(&quot;height&quot;) Integer height,\n        @JsonProperty(&quot;length&quot;) Integer length\n) {\n}\n\n@JsonIgnoreProperties(ignoreUnknown = true)\n@JsonInclude(JsonInclude.Include.NON_NULL)\npublic record ShapeC(\n        @JsonProperty(&quot;type&quot;) String type,\n        @JsonProperty(&quot;width&quot;) Integer width,\n        @JsonProperty(&quot;height&quot;) Integer height,\n        @JsonProperty(&quot;url&quot;) String url,\n        @JsonProperty(&quot;color&quot;) String color\n) {\n}\n\n</code></pre>\n<p>I don't like repeated code and it's a bad practice... But in the end I can get this loaded with this helper class:</p>\n<pre><code>public class TestDeserializer extends JsonDeserializer {\n\n    ObjectMapper mapper = new ObjectMapper();\n\n    @Override\n    public List&lt;Object&gt; deserialize(JsonParser jsonParser, DeserializationContext deserializationContext) throws IOException {\n        List&lt;Object&gt; rt = new ArrayList&lt;&gt;();\n\n        JsonNode node = jsonParser.getCodec().readTree(jsonParser);\n\n        if (node instanceof ArrayNode array) {\n            for (Iterator&lt;JsonNode&gt; it = array.elements(); it.hasNext(); ) {\n                JsonNode childNode = it.next();\n                rt.add(getShape(childNode));\n            }\n        } else {\n            rt.add(getShape(node));\n        }\n\n        return rt;\n    }\n\n    private Object getShape(JsonNode node) {\n        var type = node.get(&quot;type&quot;).asText();\n        switch (type) {\n            case &quot;shapeA&quot;:\n                return mapper.convertValue(node, ShapeA.class);\n            case &quot;shapeB&quot;:\n                return mapper.convertValue(node, ShapeB.class);\n            case &quot;shapeC&quot;:\n                return mapper.convertValue(node, ShapeC.class);\n            default:\n                throw new IllegalArgumentException(&quot;Shape could not be parsed&quot;);\n        }\n    }\n}\n</code></pre>\n<p>And this test proves to be working OK:</p>\n<pre><code>@Test\n    void fromJsonToJson() throws IOException, JSONException {\n        File f = new File(this.getClass().getResource(&quot;/test.json&quot;).getFile());\n        String jsonFromFile = Files.readString(f.toPath());\n\n        ObjectMapper mapper = new ObjectMapper();\n        Drawing drawing = mapper.readValue(jsonFromFile, Drawing.class);\n        String jsonFromObject = mapper.writeValueAsString(drawing);\n\n        System.out.println(&quot;Original:\\n&quot; + jsonFromFile.replace(&quot;\\n&quot;, &quot;&quot;).replace(&quot; &quot;, &quot;&quot;));\n        System.out.println(&quot;Generated:\\n&quot; + jsonFromObject);\n\n        assertAll(\n                //() -&gt; assertEquals(jsonFromFile, jsonFromObject),\n                () -&gt; assertEquals(&quot;testDrawing&quot;, drawing.name()),\n                () -&gt; assertTrue(drawing.shapes().get(0) instanceof ShapeA),\n                () -&gt; assertTrue(drawing.shapes().get(1) instanceof ShapeB),\n                () -&gt; assertTrue(drawing.shapes().get(2) instanceof ShapeC)\n        );\n    }\n</code></pre>\n<p>What would be the best way to achieve this with the Jackson library and Java Records?</p>\n<p>Extra sidenote: I will also need to be able to write back to JSON in the same format as the original.</p>\n"},{"tags":["java","android","location","android-permissions"],"owner":{"account_id":18854506,"reputation":17,"user_id":13752820,"display_name":"Code_Gabi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671822779,"creation_date":1671809048,"question_id":74901290,"body_markdown":"I am trying to ask for user location permission but I need to set some kind of listener to the user response otherwise, I cant get the user location and the app crashes due to null pointer exception.\r\n\r\nThis are the functions I am using to get and set the location\r\n\r\n```\r\nprivate void setLocation() {\r\n    if (ContextCompat.checkSelfPermission(getApplicationContext(), android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED ) {\r\n        ActivityCompat.requestPermissions(this, new String[]{android.Manifest.permission.ACCESS_FINE_LOCATION}, 44);\r\n            \r\n    }\r\n    LocationManager locationManager;\r\n    locationManager = (LocationManager) getSystemService(ScoreActivity.this.LOCATION_SERVICE);\r\n    Location location = locationManager.getLastKnownLocation(locationManager.NETWORK_PROVIDER);\r\n    onLocationChanged(location);\r\n}\r\n```\r\n\r\n\r\n```\r\n@Override\r\npublic void onLocationChanged(@NonNull Location location) {\r\n    locationDetails=new LatLng(location.getLatitude(),location.getLongitude());\r\n}\r\n```\r\n","title":"Android studio location permission listener","body":"<p>I am trying to ask for user location permission but I need to set some kind of listener to the user response otherwise, I cant get the user location and the app crashes due to null pointer exception.</p>\n<p>This are the functions I am using to get and set the location</p>\n<pre><code>private void setLocation() {\n    if (ContextCompat.checkSelfPermission(getApplicationContext(), android.Manifest.permission.ACCESS_FINE_LOCATION) != PackageManager.PERMISSION_GRANTED ) {\n        ActivityCompat.requestPermissions(this, new String[]{android.Manifest.permission.ACCESS_FINE_LOCATION}, 44);\n            \n    }\n    LocationManager locationManager;\n    locationManager = (LocationManager) getSystemService(ScoreActivity.this.LOCATION_SERVICE);\n    Location location = locationManager.getLastKnownLocation(locationManager.NETWORK_PROVIDER);\n    onLocationChanged(location);\n}\n</code></pre>\n<pre><code>@Override\npublic void onLocationChanged(@NonNull Location location) {\n    locationDetails=new LatLng(location.getLatitude(),location.getLongitude());\n}\n</code></pre>\n"},{"tags":["java","spring-boot","cron","scheduled-tasks"],"answers":[{"comments":[{"owner":{"account_id":23135641,"reputation":25,"user_id":17239916,"display_name":"Rafik Boubaker"},"score":0,"creation_date":1671663736,"post_id":74882562,"comment_id":132150019,"body_markdown":"i know about annotation and constant expressions and i&#39;ve thinked about that , but a cron executed every minute ? huh ? i think it&#39;s not an efficient way right ?  i have another crons working in background and maybe this will affect the flow :/","body":"i know about annotation and constant expressions and i&#39;ve thinked about that , but a cron executed every minute ? huh ? i think it&#39;s not an efficient way right ?  i have another crons working in background and maybe this will affect the flow :/"},{"owner":{"account_id":19514117,"reputation":1316,"user_id":14277434,"display_name":"Elmar Brauch"},"score":0,"creation_date":1671664582,"post_id":74882562,"comment_id":132150174,"body_markdown":"If the solution is effective or not depends on many aspects. Based on your question, I guess its hard to decide what is effective for an outsider.","body":"If the solution is effective or not depends on many aspects. Based on your question, I guess its hard to decide what is effective for an outsider."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1671666321,"post_id":74882562,"comment_id":132150457,"body_markdown":"Premature optimisation is the root of all evil. Why do you think running something once a minute is too expensive?","body":"Premature optimisation is the root of all evil. Why do you think running something once a minute is too expensive?"},{"owner":{"account_id":23135641,"reputation":25,"user_id":17239916,"display_name":"Rafik Boubaker"},"score":0,"creation_date":1671699388,"post_id":74882562,"comment_id":132155770,"body_markdown":"because simply the amount of the data is very huge and i need to do some filter before i execute the job too :/  this is why i need an accurate solution.","body":"because simply the amount of the data is very huge and i need to do some filter before i execute the job too :/  this is why i need an accurate solution."}],"tags":[],"owner":{"account_id":19514117,"reputation":1316,"user_id":14277434,"display_name":"Elmar Brauch"},"comment_count":4,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671744371,"creation_date":1671663397,"answer_id":74882562,"question_id":74882447,"body_markdown":"Annotations work with constant expressions.\r\nSo You can not put dynamic expressions inside an annotation.\r\nThe compiler should show you an error, which explains exactly this.\r\n\r\nYou could create one method, which is executed every minute (with @Scheduled annotation). This method calls database and sends Email to users inside your database, which fit to current timeslot.\r\n\r\nMore details about @Scheduled in my German blog: &lt;br&gt;\r\nhttps://agile-coding.blogspot.com/2021/03/spring-cronjobs.html","title":"execute same cronJob with multiple and dynamic dates","body":"<p>Annotations work with constant expressions.\nSo You can not put dynamic expressions inside an annotation.\nThe compiler should show you an error, which explains exactly this.</p>\n<p>You could create one method, which is executed every minute (with @Scheduled annotation). This method calls database and sends Email to users inside your database, which fit to current timeslot.</p>\n<p>More details about @Scheduled in my German blog: <br>\n<a href=\"https://agile-coding.blogspot.com/2021/03/spring-cronjobs.html\" rel=\"nofollow noreferrer\">https://agile-coding.blogspot.com/2021/03/spring-cronjobs.html</a></p>\n"},{"comments":[{"owner":{"account_id":23135641,"reputation":25,"user_id":17239916,"display_name":"Rafik Boubaker"},"score":0,"creation_date":1671816214,"post_id":74890677,"comment_id":132183350,"body_markdown":"Done, i really appreciate the help! , you said that there is no need to convert date to cron expresssion , but it seems , this is only workig with cron expression ! can you show me an example ?","body":"Done, i really appreciate the help! , you said that there is no need to convert date to cron expresssion , but it seems , this is only workig with cron expression ! can you show me an example ?"},{"owner":{"account_id":3793951,"reputation":655,"user_id":3149693,"display_name":"Arnas"},"score":0,"creation_date":1671822302,"post_id":74890677,"comment_id":132184753,"body_markdown":"Just pass your Date or Instant variable to the second parameter. I edited the answer to add an example.","body":"Just pass your Date or Instant variable to the second parameter. I edited the answer to add an example."}],"tags":[],"owner":{"account_id":3793951,"reputation":655,"user_id":3149693,"display_name":"Arnas"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671822141,"creation_date":1671723175,"answer_id":74890677,"question_id":74882447,"body_markdown":"You can use [TaskScheduler][1] for dynamic scheduling based on data. Like this:\r\n\r\n```java\r\nimport org.springframework.scheduling.TaskScheduler;\r\n\r\nprivate final TaskScheduler executor;\r\n\r\nString[] cronList = { &quot;0 0 8-10 * * &quot; , &quot; 30 16 * * &quot; , &quot; * 9 * * &quot; };\r\n\r\nfor (String cron: cronList) {\r\n    executor.schedule(() -&gt; {\r\n        // do your job here\r\n    }, new CronTrigger(cron));\r\n}\r\n```\r\nIn your case, you don&#39;t need to convert Date to a cron expression. You can specify [Date][2] or [Instant][3] as a parameter. Read this [documentation][4].\r\n\r\n**For Example:**\r\n\r\nI want to run the task one minute after now. In this case, I use LocalDateTime and convert to Instant.\r\n\r\n```java\r\nLocalDateTime oneMinuteAfter = LocalDateTime.now().plusMinutes(1);\r\n\r\nexecutor.schedule(() =&gt; {}, oneMinuteAfter.atZone(ZoneId.systemDefault()).toInstant());\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/TaskScheduler.html\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Date.html\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html\r\n  [4]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/TaskScheduler.html#schedule(java.lang.Runnable,java.time.Instant)","title":"execute same cronJob with multiple and dynamic dates","body":"<p>You can use <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/TaskScheduler.html\" rel=\"nofollow noreferrer\">TaskScheduler</a> for dynamic scheduling based on data. Like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.scheduling.TaskScheduler;\n\nprivate final TaskScheduler executor;\n\nString[] cronList = { &quot;0 0 8-10 * * &quot; , &quot; 30 16 * * &quot; , &quot; * 9 * * &quot; };\n\nfor (String cron: cronList) {\n    executor.schedule(() -&gt; {\n        // do your job here\n    }, new CronTrigger(cron));\n}\n</code></pre>\n<p>In your case, you don't need to convert Date to a cron expression. You can specify <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Date.html\" rel=\"nofollow noreferrer\">Date</a> or <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/Instant.html\" rel=\"nofollow noreferrer\">Instant</a> as a parameter. Read this <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/TaskScheduler.html#schedule(java.lang.Runnable,java.time.Instant)\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n<p><strong>For Example:</strong></p>\n<p>I want to run the task one minute after now. In this case, I use LocalDateTime and convert to Instant.</p>\n<pre class=\"lang-java prettyprint-override\"><code>LocalDateTime oneMinuteAfter = LocalDateTime.now().plusMinutes(1);\n\nexecutor.schedule(() =&gt; {}, oneMinuteAfter.atZone(ZoneId.systemDefault()).toInstant());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":115659,"reputation":32567,"user_id":303598,"accept_rate":84,"display_name":"matsev"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671745362,"creation_date":1671745362,"answer_id":74894130,"question_id":74882447,"body_markdown":"You cannot schedule the cron job dynamically using the `@Scheduled` annotation. For this you need something like the `TaskScheduler` suggested in [another answer][1].\r\n\r\nIn case you have a static configuration such that you would like to schedule the same job with different cron expressions you can use the `@Schedule` annotation if you refactor the code slightly. For example,  you can extract the business logic to a separate method and then have three cron-annotated method delegate to that method, e.g.\r\n\r\n\r\n    private void sendEmail() {\r\n        // lengthy method that does the actual work\r\n    }\r\n    \r\n    @Scheduled(cron = &quot;0 0 8-10 * *&quot;)\r\n    private void firstCron() {\r\n        sendEmail();    \r\n    }\r\n\r\n    @Scheduled(cron = &quot;30 16 * *&quot;)\r\n    private void secondCron() {\r\n        sendEmail();        \r\n    }\r\n\r\n    @Scheduled(cron = &quot;* 9 * *&quot;)\r\n    private void thirdCron() {\r\n        sendEmail();        \r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74890677/303598","title":"execute same cronJob with multiple and dynamic dates","body":"<p>You cannot schedule the cron job dynamically using the <code>@Scheduled</code> annotation. For this you need something like the <code>TaskScheduler</code> suggested in <a href=\"https://stackoverflow.com/a/74890677/303598\">another answer</a>.</p>\n<p>In case you have a static configuration such that you would like to schedule the same job with different cron expressions you can use the <code>@Schedule</code> annotation if you refactor the code slightly. For example,  you can extract the business logic to a separate method and then have three cron-annotated method delegate to that method, e.g.</p>\n<pre><code>private void sendEmail() {\n    // lengthy method that does the actual work\n}\n\n@Scheduled(cron = &quot;0 0 8-10 * *&quot;)\nprivate void firstCron() {\n    sendEmail();    \n}\n\n@Scheduled(cron = &quot;30 16 * *&quot;)\nprivate void secondCron() {\n    sendEmail();        \n}\n\n@Scheduled(cron = &quot;* 9 * *&quot;)\nprivate void thirdCron() {\n    sendEmail();        \n}\n</code></pre>\n"}],"owner":{"account_id":23135641,"reputation":25,"user_id":17239916,"display_name":"Rafik Boubaker"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":558,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74890677,"answer_count":3,"score":0,"last_activity_date":1671822141,"creation_date":1671662405,"question_id":74882447,"body_markdown":"please i need help with this : \r\n\r\ni&#39;m developing an application where the user select multiple dates from a calendar in the frontend and those dates are sent to the spring-boot backend and stored into a database.\r\nOn those exact dates i need to execute a cronjob (let&#39;s say send an email).\r\n\r\n\r\n\r\n\r\n-First of all :  i have convert each date to a cron schedule expressions\r\nfor example the user choose 3 dates and the result is a list of 3 cron expressions as below :\r\n\r\n*[ &quot;0 0 8-10 * * *&quot;  **,** &quot;* 30 16 * * *&quot;  **,**  &quot;* * 9 * * *&quot;* ]*\r\n\r\n**how can i dynamically execute the same job 3 times with the 3 differents cron expressions ??? :** \r\n\r\n\r\n```\r\n`@Scheduled(cron = &quot;cron[0]&quot; &amp; &quot;cron[1]&quot; &amp; &quot;cron[2]&quot;) // &lt;--- this is what i need \r\n  private void sendEmail() {\r\n\r\n  }`\r\n\r\n```\r\n\r\n\r\n\r\n```\r\n","title":"execute same cronJob with multiple and dynamic dates","body":"<p>please i need help with this :</p>\n<p>i'm developing an application where the user select multiple dates from a calendar in the frontend and those dates are sent to the spring-boot backend and stored into a database.\nOn those exact dates i need to execute a cronjob (let's say send an email).</p>\n<p>-First of all :  i have convert each date to a cron schedule expressions\nfor example the user choose 3 dates and the result is a list of 3 cron expressions as below :</p>\n<p><em>[ &quot;0 0 8-10 * * <em>&quot;  <strong>,</strong> &quot;</em> 30 16 * * <em>&quot;  <strong>,</strong>  &quot;</em> * 9 * * <em>&quot;</em> ]</em></p>\n<p><strong>how can i dynamically execute the same job 3 times with the 3 differents cron expressions ??? :</strong></p>\n<pre><code>`@Scheduled(cron = &quot;cron[0]&quot; &amp; &quot;cron[1]&quot; &amp; &quot;cron[2]&quot;) // &lt;--- this is what i need \n  private void sendEmail() {\n\n  }`\n\n</code></pre>\n<pre><code></code></pre>\n"},{"tags":["java","android","android-studio","whatsapp","status"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":2,"creation_date":1671821946,"post_id":74903072,"comment_id":132184679,"body_markdown":"You no longer have access to app-specific storage of other apps.","body":"You no longer have access to app-specific storage of other apps."},{"owner":{"account_id":10814854,"reputation":4137,"user_id":7954210,"accept_rate":73,"display_name":"Mouaad Abdelghafour AITALI"},"score":0,"creation_date":1671836005,"post_id":74903072,"comment_id":132187270,"body_markdown":"As @CommonsWare said, in the API 32, you don&#39;t have permission to access the WhatsApp app folders, you have permission to access only your created folders, you need to use scoped storage instead of the old storage","body":"As @CommonsWare said, in the API 32, you don&#39;t have permission to access the WhatsApp app folders, you have permission to access only your created folders, you need to use scoped storage instead of the old storage"},{"owner":{"account_id":27044541,"reputation":13,"user_id":20598914,"display_name":"IT Student"},"score":0,"creation_date":1671862105,"post_id":74903072,"comment_id":132189574,"body_markdown":"Can you please send me the code for getting Scoped storage, or the code for achieving this? Please.","body":"Can you please send me the code for getting Scoped storage, or the code for achieving this? Please."}],"owner":{"account_id":27044541,"reputation":13,"user_id":20598914,"display_name":"IT Student"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":188,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671821416,"creation_date":1671821416,"question_id":74903072,"body_markdown":"When I had the Target API 29, the app was showing WhatsApp statuses, but when I increase the target api to 32, it is not showing the statuses.\r\n\r\n    public File getWhatsupFolder() {\r\n            if (new File(Environment.getExternalStorageDirectory().toString() + File.separator + &quot;Android/media/com.whatsapp/WhatsApp&quot; + File.separator + &quot;Media&quot; + File.separator + &quot;.Statuses&quot;).isDirectory()) {\r\n                return new File(Environment.getExternalStorageDirectory() + File.separator + &quot;Android/media/com.whatsapp/WhatsApp&quot; + File.separator + &quot;Media&quot; + File.separator + &quot;.Statuses&quot;);\r\n            } else {\r\n                return new File(Environment.getExternalStorageDirectory() + File.separator + &quot;WhatsApp&quot; + File.separator + &quot;Media&quot; + File.separator + &quot;.Statuses&quot;);\r\n            }\r\n        }\r\n\r\nHere is the code of my getting status that was working fine in target api 29.\r\n\r\nIf anyone knows what is the issue. Please let me know. Thanks in advance.","title":"WhatsApp status in java","body":"<p>When I had the Target API 29, the app was showing WhatsApp statuses, but when I increase the target api to 32, it is not showing the statuses.</p>\n<pre><code>public File getWhatsupFolder() {\n        if (new File(Environment.getExternalStorageDirectory().toString() + File.separator + &quot;Android/media/com.whatsapp/WhatsApp&quot; + File.separator + &quot;Media&quot; + File.separator + &quot;.Statuses&quot;).isDirectory()) {\n            return new File(Environment.getExternalStorageDirectory() + File.separator + &quot;Android/media/com.whatsapp/WhatsApp&quot; + File.separator + &quot;Media&quot; + File.separator + &quot;.Statuses&quot;);\n        } else {\n            return new File(Environment.getExternalStorageDirectory() + File.separator + &quot;WhatsApp&quot; + File.separator + &quot;Media&quot; + File.separator + &quot;.Statuses&quot;);\n        }\n    }\n</code></pre>\n<p>Here is the code of my getting status that was working fine in target api 29.</p>\n<p>If anyone knows what is the issue. Please let me know. Thanks in advance.</p>\n"},{"tags":["java","spring-webflux","project-reactor","spring-aop"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1659352749,"post_id":73191109,"comment_id":129266832,"body_markdown":"Mono&lt;Void&gt; from the aspect? So every method that is annotated should not return anything?","body":"Mono&lt;Void&gt; from the aspect? So every method that is annotated should not return anything?"},{"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"score":0,"creation_date":1659353407,"post_id":73191109,"comment_id":129267044,"body_markdown":"I am not sure, does it matter what the aspect is retuning? \n\nMethods that will be annotated are returning different objects","body":"I am not sure, does it matter what the aspect is retuning?   Methods that will be annotated are returning different objects"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1659353893,"post_id":73191109,"comment_id":129267195,"body_markdown":"Well as the code looks now, every function using the annotation will return ”nothing”, basically discarding the returns, and if thats what you want….","body":"Well as the code looks now, every function using the annotation will return ”nothing”, basically discarding the returns, and if thats what you want…."},{"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"score":0,"creation_date":1659353985,"post_id":73191109,"comment_id":129267236,"body_markdown":"for example in the ```FooService``` the annotated method returns a Mono&lt;Bar&gt;. The things is that i don&#39;t care what the aspect is returning, i only want the code from aspect method to be executed always before the annotated method","body":"for example in the <code>FooService</code> the annotated method returns a Mono&lt;Bar&gt;. The things is that i don&#39;t care what the aspect is returning, i only want the code from aspect method to be executed always before the annotated method"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1659354269,"post_id":73191109,"comment_id":129267330,"body_markdown":"ah its an `@Before` and not an `@Around` my mistake, but `return validationService.validateObject(object)` what is `object`","body":"ah its an <code>@Before</code> and not an <code>@Around</code> my mistake, but <code>return validationService.validateObject(object)</code> what is <code>object</code>"},{"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"score":0,"creation_date":1659354543,"post_id":73191109,"comment_id":129267434,"body_markdown":"It&#39;s something that I am retrieving somehow using the ```joinPoint``` argument and a SpelExpressionParser.\n\nMy challenge is how can I be sure that the code inside of the aspect is executed before  the method that is annotated starts executing, without using ```.block()```.  With ```.block()``` the order of execution is performed as wanted but I don&#39;t really want to use ```.block()``` just used it to prototype.","body":"It&#39;s something that I am retrieving somehow using the <code>joinPoint</code> argument and a SpelExpressionParser.  My challenge is how can I be sure that the code inside of the aspect is executed before  the method that is annotated starts executing, without using <code>.block()</code>.  With <code>.block()</code> the order of execution is performed as wanted but I don&#39;t really want to use <code>.block()</code> just used it to prototype."},{"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"score":0,"creation_date":1659354660,"post_id":73191109,"comment_id":129267468,"body_markdown":"If i remove ```.block()``` the code  inside aspect is not executed at all, because no one subscribes to it, i think","body":"If i remove <code>.block()</code> the code  inside aspect is not executed at all, because no one subscribes to it, i think"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1659355851,"post_id":73191109,"comment_id":129267822,"body_markdown":"since this is a void function no one will subscribe to it, i would recommend that you use the `@Around`annotation instead so that you can return from it and becomes part of the reactive flow.","body":"since this is a void function no one will subscribe to it, i would recommend that you use the <code>@Around</code>annotation instead so that you can return from it and becomes part of the reactive flow."},{"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"score":0,"creation_date":1659356378,"post_id":73191109,"comment_id":129267975,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/246943/discussion-between-robertsci-and-toerktumlare).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/246943/discussion-between-robertsci-and-toerktumlare\">continue this discussion in chat</a>."},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":0,"creation_date":1659356732,"post_id":73191109,"comment_id":129268084,"body_markdown":"A ` @Before` advice has return type `void`, same goes for `@After`. Only `@Around` advices return something. So your code does not make any sense.","body":"A ` @Before` advice has return type <code>void</code>, same goes for <code>@After</code>. Only <code>@Around</code> advices return something. So your code does not make any sense."},{"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"score":0,"creation_date":1659357326,"post_id":73191109,"comment_id":129268311,"body_markdown":"How would you use the @Around to return the subscribtion from the aspect and then use the subscribtion in the annotated method?","body":"How would you use the @Around to return the subscribtion from the aspect and then use the subscribtion in the annotated method?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1659358835,"post_id":73191109,"comment_id":129268864,"body_markdown":"i have no idea what you mean when you say __return a subscription__ functions return _types_ and asking how `@Around` &quot;works&quot; is a big subject and im not going to write your complete implementation. I suggest you google how `@Around` &quot;works&quot; and try to build it yourself and then ask a new question if you get stuck","body":"i have no idea what you mean when you say <b>return a subscription</b> functions return <i>types</i> and asking how <code>@Around</code> &quot;works&quot; is a big subject and im not going to write your complete implementation. I suggest you google how <code>@Around</code> &quot;works&quot; and try to build it yourself and then ask a new question if you get stuck"},{"owner":{"account_id":1087271,"reputation":64101,"user_id":1082681,"accept_rate":90,"display_name":"kriegaex"},"score":1,"creation_date":1671356095,"post_id":73191109,"comment_id":132078486,"body_markdown":"Please do not answer a question by editing it. Instead, please post an answer. After some waiting time, you can even accept your own answer in order to mark the problem as solved.","body":"Please do not answer a question by editing it. Instead, please post an answer. After some waiting time, you can even accept your own answer in order to mark the problem as solved."}],"answers":[{"tags":[],"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671821312,"creation_date":1671815782,"answer_id":74902296,"question_id":73191109,"body_markdown":"My solution looks like this:\r\n\r\n```java \r\n@Around(&quot;execution(* *.*(..)) &amp;&amp; @annotation(performValidation)&quot;)\r\npublic Mono doBeforeMethod(JoinPoint joinPoint, PerformValidationInterface performValidation) {\r\n  return validationService\r\n    .validateObject(object)\r\n    //i am using defer becaue I don&#39;t want to evaluate the switchIfEmpty() if the validateObject() returns something \r\n    .switchIfEmpty(\r\n      Mono.defer( \r\n        () -&gt; anotherService.checkIfObjectExists(object)\r\n      )\r\n    )\r\n    .then((Mono) joinPoint.proceed());\r\n}\r\n```\r\n\r\n`.then()` -&gt; will wait until your validation logic(or some other logic) is completed, THEN will call the `joinPoint.proceed()`\r\n\r\n`joinPoint.proceed()` -&gt; will continue the execution of the annotated method","title":"Execute custom annotation in webflux application before method execution","body":"<p>My solution looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Around(&quot;execution(* *.*(..)) &amp;&amp; @annotation(performValidation)&quot;)\npublic Mono doBeforeMethod(JoinPoint joinPoint, PerformValidationInterface performValidation) {\n  return validationService\n    .validateObject(object)\n    //i am using defer becaue I don't want to evaluate the switchIfEmpty() if the validateObject() returns something \n    .switchIfEmpty(\n      Mono.defer( \n        () -&gt; anotherService.checkIfObjectExists(object)\n      )\n    )\n    .then((Mono) joinPoint.proceed());\n}\n</code></pre>\n<p><code>.then()</code> -&gt; will wait until your validation logic(or some other logic) is completed, THEN will call the <code>joinPoint.proceed()</code></p>\n<p><code>joinPoint.proceed()</code> -&gt; will continue the execution of the annotated method</p>\n"}],"owner":{"account_id":15882815,"reputation":45,"user_id":11460115,"display_name":"robertsci"},"comment_count":13,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":565,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74902296,"answer_count":1,"score":0,"last_activity_date":1671821312,"creation_date":1659343701,"question_id":73191109,"body_markdown":"How can I avoid using the .block() method in the aspect component while making sure the annotation is completed before the method where is called starts executing?\r\n\r\n\r\nI have some validations that needs to be executed before some methods from a service are executed\r\n\r\nI have created a custom annotation, that I can use to annotate each method where I want to perform the validation\r\n\r\nThe Annotation looks like this:\r\n```\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Target(ElementType.METHOD)\r\npublic @interface PerformValidationInterface{\r\n\r\n}\r\n```\r\n\r\nThe Aspect method that i want to be executed looks like this:\r\n```\r\n    @Before(&quot;execution(* *.*(..)) &amp;&amp; @annotation(performValidation)&quot;)\r\n    public Mono&lt;Void&gt; doBeforeMethod(JoinPoint joinPoint, PerformValidationInterface performValidation) {\r\n\r\n        return validationService.validateObject(object)\r\n                         //i am using defer becaue I don&#39;t want to evaluate the switchIfEmpty()  if the validateObject() returns something \r\n                         .switchIfEmpty(Mono.defer( \r\n                              () -&gt; anotherService.checkIfObjectExists(object)))      \r\n                         .block();\r\n}\r\n\r\n```\r\n\r\n\r\n\r\n```\r\npublic ValidationService {\r\n\r\n    public Mono&lt;Object&gt; validateObject(Object object) {\r\n            //perform object validation\r\n            if (objectIsValid) { \r\n                return Mono.just(object) \r\n            } else { \r\n                return Mono.empty()\r\n            }\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n```\r\n\r\npublic FooService {\r\n\r\n\r\n\r\n     //How can I avoid using the .block() method in the aspect component while making sure the annotation is completed before the barMethod starts executing\r\n      @PerformValidation\r\n      public Mono&lt;Bar&gt; barMethod(Object arg1, Object arg2 ) {\r\n         //do some stuff and return a Mono&lt;Bar&gt;\r\n\r\n      }\r\n}\r\n```","title":"Execute custom annotation in webflux application before method execution","body":"<p>How can I avoid using the .block() method in the aspect component while making sure the annotation is completed before the method where is called starts executing?</p>\n<p>I have some validations that needs to be executed before some methods from a service are executed</p>\n<p>I have created a custom annotation, that I can use to annotate each method where I want to perform the validation</p>\n<p>The Annotation looks like this:</p>\n<pre><code>@Retention(RetentionPolicy.RUNTIME)\n@Target(ElementType.METHOD)\npublic @interface PerformValidationInterface{\n\n}\n</code></pre>\n<p>The Aspect method that i want to be executed looks like this:</p>\n<pre><code>    @Before(&quot;execution(* *.*(..)) &amp;&amp; @annotation(performValidation)&quot;)\n    public Mono&lt;Void&gt; doBeforeMethod(JoinPoint joinPoint, PerformValidationInterface performValidation) {\n\n        return validationService.validateObject(object)\n                         //i am using defer becaue I don't want to evaluate the switchIfEmpty()  if the validateObject() returns something \n                         .switchIfEmpty(Mono.defer( \n                              () -&gt; anotherService.checkIfObjectExists(object)))      \n                         .block();\n}\n\n</code></pre>\n<pre><code>public ValidationService {\n\n    public Mono&lt;Object&gt; validateObject(Object object) {\n            //perform object validation\n            if (objectIsValid) { \n                return Mono.just(object) \n            } else { \n                return Mono.empty()\n            }\n    }\n\n}\n</code></pre>\n<pre><code>\npublic FooService {\n\n\n\n     //How can I avoid using the .block() method in the aspect component while making sure the annotation is completed before the barMethod starts executing\n      @PerformValidation\n      public Mono&lt;Bar&gt; barMethod(Object arg1, Object arg2 ) {\n         //do some stuff and return a Mono&lt;Bar&gt;\n\n      }\n}\n</code></pre>\n"},{"tags":["java","gradle","desktop","gluon"],"answers":[{"comments":[{"owner":{"account_id":11929948,"reputation":37,"user_id":8730104,"display_name":"Harry05"},"score":0,"creation_date":1538895469,"post_id":52684388,"comment_id":92299719,"body_markdown":"Sorry what shity it that. i thinked that glouon company fix ist from Java 8 to 9 Java reales. That call that i have to use the old Version of Java becous dosn&#39;t fix it from Java 8to9 ,8to10,8to11. I meine that gloun Still Standing in the development. The Idee Stop on Java 8. Grrr","body":"Sorry what shity it that. i thinked that glouon company fix ist from Java 8 to 9 Java reales. That call that i have to use the old Version of Java becous dosn&#39;t fix it from Java 8to9 ,8to10,8to11. I meine that gloun Still Standing in the development. The Idee Stop on Java 8. Grrr"},{"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"score":0,"creation_date":1538913086,"post_id":52684388,"comment_id":92303486,"body_markdown":"First of all, if you find it &quot;shity&quot;, feel free to go and use other technology. If you still like to use it, and want to work with Java 11, you can do the upgrade yourself, as you only have to modify the `build.gradle` file as I proposed here. Most of the JavaFX projects nowadays have to do this migration. And if you have a license, please email to support at gluonhq dot com and ask for a new release of the framework.","body":"First of all, if you find it &quot;shity&quot;, feel free to go and use other technology. If you still like to use it, and want to work with Java 11, you can do the upgrade yourself, as you only have to modify the <code>build.gradle</code> file as I proposed here. Most of the JavaFX projects nowadays have to do this migration. And if you have a license, please email to support at gluonhq dot com and ask for a new release of the framework."},{"owner":{"account_id":11929948,"reputation":37,"user_id":8730104,"display_name":"Harry05"},"score":0,"creation_date":1539007464,"post_id":52684388,"comment_id":92334600,"body_markdown":"No i Like the Main ldee behind it, but the configuration make my depressive &#128513; .  But I anderstand right all developer use java 8 for it for Desktop and mobile?","body":"No i Like the Main ldee behind it, but the configuration make my depressive 😁 .  But I anderstand right all developer use java 8 for it for Desktop and mobile?"},{"owner":{"account_id":352388,"reputation":1045,"user_id":689448,"display_name":"splonk"},"score":0,"creation_date":1580877247,"post_id":52684388,"comment_id":106238130,"body_markdown":"Thanks @Jos&#233;Pereda. Your suggested fix worked for me.","body":"Thanks @Jos&#233;Pereda. Your suggested fix worked for me."}],"tags":[],"owner":{"account_id":4910667,"reputation":44671,"user_id":3956070,"display_name":"Jos&#233; Pereda"},"comment_count":4,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1538871067,"creation_date":1538871067,"answer_id":52684388,"question_id":52684025,"body_markdown":"The Gluon plugin 2.7.0 was released a while ago, mainly to create Gluon Desktop or Gluon Mobile applications with Java 8.\r\n\r\nIf you are using now Java 11, until there is a new release of the Gluon plugin, you will have to update the build.gradle file.\r\n\r\nI&#39;d suggest you have a look at how to get started with JavaFX 11 in this [guide](https://openjfx.io/openjfx-docs/#introduction), and check this [question](https://stackoverflow.com/questions/52467561/intellij-cant-recognize-javafx-11-with-openjdk-11) about adding JavaFX 11 to a project in IntelliJ.\r\n\r\nWhen you use the Gluon plugin you are creating a Gradle project. And for that, you don&#39;t need to download the whole JavaFX SDK, you can include it via dependencies from Maven Central.\r\n\r\nSo edit your `build.gradle` file, that looks like:\r\n\r\n    apply plugin: &#39;java&#39;\r\n    apply plugin: &#39;application&#39;\r\n    \r\n    repositories {\r\n        jcenter()\r\n        maven {\r\n            url &#39;http://nexus.gluonhq.com/nexus/content/repositories/releases&#39;\r\n        }\r\n    }\r\n    \r\n    mainClassName = &#39;com.gluonapplication.GluonDesktop&#39;\r\n    \r\n    dependencies {\r\n        compile &#39;com.gluonhq:particle:1.1.3&#39;\r\n    }\r\n\r\nAnd add the following changes:\r\n\r\n1. According to the guide for [Gradle](https://openjfx.io/openjfx-docs/#gradle), add a way to find which is your platform:\r\n\r\n        apply plugin: &#39;java&#39;\r\n        apply plugin: &#39;application&#39;\r\n    \r\n        def currentOS = org.gradle.internal.os.OperatingSystem.current()\r\n        def platform\r\n        if (currentOS.isWindows()) {\r\n            platform = &#39;win&#39;\r\n        } else if (currentOS.isLinux()) {\r\n            platform = &#39;linux&#39;\r\n        } else if (currentOS.isMacOsX()) {\r\n            platform = &#39;mac&#39;\r\n        }\r\n\r\n        repositories {\r\n            jcenter()\r\n            maven {\r\n                url &#39;http://nexus.gluonhq.com/nexus/content/repositories/releases&#39;\r\n            }\r\n        }\r\n    \r\n        mainClassName = &#39;com.gluonapplication.GluonDesktop&#39;\r\n    \r\n\r\n2. Add the JavaFX dependencies for your platform: \r\n    \r\n        dependencies {\r\n            compile &quot;org.openjfx:javafx-base:11:${platform}&quot;\r\n            compile &quot;org.openjfx:javafx-graphics:11:${platform}&quot;\r\n            compile &quot;org.openjfx:javafx-controls:11:${platform}&quot;\r\n            compile &quot;org.openjfx:javafx-fxml:11:${platform}&quot;\r\n    \r\n3. Add the ControlsFX dependency compatible with Java 9+ (by default is using 8.40.14 which was for Java 8) and add the `javax.annotation` dependency, that is not part of Java 9+:\r\n\r\n            compile &#39;com.gluonhq:particle:1.1.3&#39;\r\n            compile &#39;org.controlsfx:controlsfx:9.0.0&#39;\r\n            compile &#39;javax.annotation:javax.annotation-api:1.3.1&#39;\r\n        }\r\n    \r\n4. According to the guide, you need to add the module-path and add the required modules to the compiler arguments: \r\n\r\n        compileJava {\r\n            doFirst {\r\n                options.compilerArgs = [\r\n                        &#39;--module-path&#39;, classpath.asPath,\r\n                        &#39;--add-modules&#39;, &#39;javafx.controls,javafx.fxml&#39;\r\n                ]\r\n            }\r\n        }\r\n\r\n5. And the same for the run arguments. In this case, the access to private API (due to some requirement of ControlsFX), can be done with `--add-exports`:\r\n    \r\n        run {\r\n            doFirst {\r\n                jvmArgs = [\r\n                        &#39;--module-path&#39;, classpath.asPath,\r\n                        &#39;--add-modules&#39;, &#39;javafx.controls,javafx.fxml&#39;,\r\n                        &#39;--add-exports&#39;, &#39;javafx.base/com.sun.javafx.runtime=ALL-UNNAMED&#39;,\r\n                        &#39;--add-exports&#39;, &#39;javafx.graphics/com.sun.javafx.scene=ALL-UNNAMED&#39;,\r\n                        &#39;--add-exports&#39;, &#39;javafx.graphics/com.sun.javafx.scene.traversal=ALL-UNNAMED&#39;,\r\n    \r\n                ]\r\n            }\r\n        }\r\n\r\nSave and sync the changes and you should be able to run your Gluon Desktop project.\r\n\r\n[![Gluon Desktop][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WgklJ.png","title":"I don&#39;t know what i make wrong for the Gluon Start","body":"<p>The Gluon plugin 2.7.0 was released a while ago, mainly to create Gluon Desktop or Gluon Mobile applications with Java 8.</p>\n\n<p>If you are using now Java 11, until there is a new release of the Gluon plugin, you will have to update the build.gradle file.</p>\n\n<p>I'd suggest you have a look at how to get started with JavaFX 11 in this <a href=\"https://openjfx.io/openjfx-docs/#introduction\" rel=\"nofollow noreferrer\">guide</a>, and check this <a href=\"https://stackoverflow.com/questions/52467561/intellij-cant-recognize-javafx-11-with-openjdk-11\">question</a> about adding JavaFX 11 to a project in IntelliJ.</p>\n\n<p>When you use the Gluon plugin you are creating a Gradle project. And for that, you don't need to download the whole JavaFX SDK, you can include it via dependencies from Maven Central.</p>\n\n<p>So edit your <code>build.gradle</code> file, that looks like:</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'application'\n\nrepositories {\n    jcenter()\n    maven {\n        url 'http://nexus.gluonhq.com/nexus/content/repositories/releases'\n    }\n}\n\nmainClassName = 'com.gluonapplication.GluonDesktop'\n\ndependencies {\n    compile 'com.gluonhq:particle:1.1.3'\n}\n</code></pre>\n\n<p>And add the following changes:</p>\n\n<ol>\n<li><p>According to the guide for <a href=\"https://openjfx.io/openjfx-docs/#gradle\" rel=\"nofollow noreferrer\">Gradle</a>, add a way to find which is your platform:</p>\n\n<pre><code>apply plugin: 'java'\napply plugin: 'application'\n\ndef currentOS = org.gradle.internal.os.OperatingSystem.current()\ndef platform\nif (currentOS.isWindows()) {\n    platform = 'win'\n} else if (currentOS.isLinux()) {\n    platform = 'linux'\n} else if (currentOS.isMacOsX()) {\n    platform = 'mac'\n}\n\nrepositories {\n    jcenter()\n    maven {\n        url 'http://nexus.gluonhq.com/nexus/content/repositories/releases'\n    }\n}\n\nmainClassName = 'com.gluonapplication.GluonDesktop'\n</code></pre></li>\n<li><p>Add the JavaFX dependencies for your platform: </p>\n\n<pre><code>dependencies {\n    compile \"org.openjfx:javafx-base:11:${platform}\"\n    compile \"org.openjfx:javafx-graphics:11:${platform}\"\n    compile \"org.openjfx:javafx-controls:11:${platform}\"\n    compile \"org.openjfx:javafx-fxml:11:${platform}\"\n</code></pre></li>\n<li><p>Add the ControlsFX dependency compatible with Java 9+ (by default is using 8.40.14 which was for Java 8) and add the <code>javax.annotation</code> dependency, that is not part of Java 9+:</p>\n\n<pre><code>    compile 'com.gluonhq:particle:1.1.3'\n    compile 'org.controlsfx:controlsfx:9.0.0'\n    compile 'javax.annotation:javax.annotation-api:1.3.1'\n}\n</code></pre></li>\n<li><p>According to the guide, you need to add the module-path and add the required modules to the compiler arguments: </p>\n\n<pre><code>compileJava {\n    doFirst {\n        options.compilerArgs = [\n                '--module-path', classpath.asPath,\n                '--add-modules', 'javafx.controls,javafx.fxml'\n        ]\n    }\n}\n</code></pre></li>\n<li><p>And the same for the run arguments. In this case, the access to private API (due to some requirement of ControlsFX), can be done with <code>--add-exports</code>:</p>\n\n<pre><code>run {\n    doFirst {\n        jvmArgs = [\n                '--module-path', classpath.asPath,\n                '--add-modules', 'javafx.controls,javafx.fxml',\n                '--add-exports', 'javafx.base/com.sun.javafx.runtime=ALL-UNNAMED',\n                '--add-exports', 'javafx.graphics/com.sun.javafx.scene=ALL-UNNAMED',\n                '--add-exports', 'javafx.graphics/com.sun.javafx.scene.traversal=ALL-UNNAMED',\n\n        ]\n    }\n}\n</code></pre></li>\n</ol>\n\n<p>Save and sync the changes and you should be able to run your Gluon Desktop project.</p>\n\n<p><a href=\"https://i.stack.imgur.com/WgklJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WgklJ.png\" alt=\"Gluon Desktop\"></a></p>\n"}],"owner":{"account_id":11929948,"reputation":37,"user_id":8730104,"display_name":"Harry05"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1166,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1671820794,"creation_date":1538866478,"question_id":52684025,"body_markdown":"I don&#39;t have any idee what I make wrong for the beginning with Gluon.\r\n\r\n 1. I have IntelliJ IDEA 2018.2.4 (Community Edition)  \r\nBuild #IC-182.4505.22, built on September 18, 2018  \r\nJRE: 1.8.0_152-release-1248-b8 amd64  \r\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o  \r\nWindows 10 10.0\r\n\r\n 2. install Gluon Plugin Version: 2.7.0\r\n\r\n 3. File-&gt;new-&gt;Project-&gt;gluon-&gt;Desktop Multi view Project with FXML-&gt;java 11-&gt;finish\r\n\r\n 4. install gradel Gradle 4.10.2 used it as local option in last setup view\r\n\r\n 5. I use java version &quot;11&quot; 2018-09-25\r\n\r\n 6. I download the javaFx11 (openjfx-11_windows-x64_bin-sdk) and use it in an Structure as a libery\r\n\r\n\r\nknow I have this --&gt;\r\n\r\n    00:41:11: Executing task &#39;run&#39;...\r\n    \r\n    \r\n    &gt; Task :compileJava FAILED\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:5: error: package javafx.scene.control does not exist\r\n    import javafx.scene.control.Alert;\r\n                               ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:7: error: package javafx.scene.image does not exist\r\n    import javafx.scene.image.Image;\r\n                             ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:8: error: package javafx.scene.image does not exist\r\n    import javafx.scene.image.ImageView;\r\n                             ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:7: error: package javafx.fxml does not exist\r\n    import javafx.fxml.FXML;\r\n                      ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:8: error: package javafx.scene.control does not exist\r\n    import javafx.scene.control.Button;\r\n                               ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:9: error: package javafx.scene.control does not exist\r\n    import javafx.scene.control.Label;\r\n                               ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:10: error: package javafx.scene.control does not exist\r\n    import javafx.scene.control.TextInputDialog;\r\n                               ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:27: error: cannot find symbol\r\n        private Label label;\r\n                ^\r\n      symbol:   class Label\r\n      location: class PrimaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:30: error: cannot find symbol\r\n        private Button button;\r\n                ^\r\n      symbol:   class Button\r\n      location: class PrimaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:6: error: package javafx.fxml does not exist\r\n    import javafx.fxml.FXML;\r\n                      ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:7: error: package javafx.scene.control does not exist\r\n    import javafx.scene.control.Button;\r\n                               ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:20: error: cannot find symbol\r\n        private Button button;\r\n                ^\r\n      symbol:   class Button\r\n      location: class SecondaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\GluonApplication.java:4: error: package javafx.scene does not exist\r\n    import javafx.scene.Scene;\r\n                       ^\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\GluonApplication.java:7: error: cannot access Application\r\n    public class GluonApplication extends ParticleApplication {\r\n           ^\r\n      class file for javafx.application.Application not found\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\GluonApplication.java:14: error: cannot find symbol\r\n        public void postInit(Scene scene) {\r\n                             ^\r\n      symbol:   class Scene\r\n      location: class GluonApplication\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:26: error: cannot find symbol\r\n        @FXML\r\n         ^\r\n      symbol:   class FXML\r\n      location: class PrimaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:29: error: cannot find symbol\r\n        @FXML\r\n         ^\r\n      symbol:   class FXML\r\n      location: class PrimaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:32: error: cannot find symbol\r\n        @FXML\r\n         ^\r\n      symbol:   class FXML\r\n      location: class PrimaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:19: error: cannot find symbol\r\n        @FXML\r\n         ^\r\n      symbol:   class FXML\r\n      location: class SecondaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:22: error: cannot find symbol\r\n        @FXML\r\n         ^\r\n      symbol:   class FXML\r\n      location: class SecondaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:24: error: cannot find symbol\r\n            Alert alert = new Alert(AlertType.INFORMATION);\r\n            ^\r\n      symbol:   class Alert\r\n      location: class MenuActions\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:24: error: cannot find symbol\r\n            Alert alert = new Alert(AlertType.INFORMATION);\r\n                              ^\r\n      symbol:   class Alert\r\n      location: class MenuActions\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:24: error: cannot find symbol\r\n            Alert alert = new Alert(AlertType.INFORMATION);\r\n                                    ^\r\n      symbol:   variable AlertType\r\n      location: class MenuActions\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:27: error: cannot find symbol\r\n            alert.setGraphic(new ImageView(new Image(MenuActions.class.getResource(&quot;/icon.png&quot;).toExternalForm(), 48, 48, true, true)));\r\n                                 ^\r\n      symbol:   class ImageView\r\n      location: class MenuActions\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:27: error: cannot find symbol\r\n            alert.setGraphic(new ImageView(new Image(MenuActions.class.getResource(&quot;/icon.png&quot;).toExternalForm(), 48, 48, true, true)));\r\n                                               ^\r\n      symbol:   class Image\r\n      location: class MenuActions\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:51: error: cannot access StackPane\r\n            app.getParticle().getToolBarActions().add(0, actionSignin);\r\n                             ^\r\n      class file for javafx.scene.layout.StackPane not found\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:55: error: cannot access ObservableList\r\n            app.getParticle().getToolBarActions().remove(actionSignin);\r\n                                               ^\r\n      class file for javafx.collections.ObservableList not found\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:65: error: cannot find symbol\r\n            TextInputDialog input = new TextInputDialog(stateManager.getProperty(&quot;UserName&quot;).orElse(&quot;&quot;).toString());\r\n            ^\r\n      symbol:   class TextInputDialog\r\n      location: class PrimaryController\r\n    E:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:65: error: cannot find symbol\r\n            TextInputDialog input = new TextInputDialog(stateManager.getProperty(&quot;UserName&quot;).orElse(&quot;&quot;).toString());\r\n                                        ^\r\n      symbol:   class TextInputDialog\r\n      location: class PrimaryController\r\n    29 errors\r\n    \r\n    FAILURE: Build failed with an exception.\r\n    \r\n    * What went wrong:\r\n    Execution failed for task &#39;:compileJava&#39;.\r\n    &gt; Compilation failed; see the compiler error output for details.\r\n    \r\n    * Try:\r\n    Run with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n    \r\n    * Get more help at https://help.gradle.org\r\n    \r\n    BUILD FAILED in 0s\r\n    1 actionable task: 1 executed\r\n    Compilation failed; see the compiler error output for details.\r\n    00:41:11: Task execution finished &#39;run&#39;.\r\n\r\nWhich step did I make a mistake in?","title":"I don&#39;t know what i make wrong for the Gluon Start","body":"<p>I don't have any idee what I make wrong for the beginning with Gluon.</p>\n<ol>\n<li><p>I have IntelliJ IDEA 2018.2.4 (Community Edition)<br />\nBuild #IC-182.4505.22, built on September 18, 2018<br />\nJRE: 1.8.0_152-release-1248-b8 amd64<br />\nJVM: OpenJDK 64-Bit Server VM by JetBrains s.r.o<br />\nWindows 10 10.0</p>\n</li>\n<li><p>install Gluon Plugin Version: 2.7.0</p>\n</li>\n<li><p>File-&gt;new-&gt;Project-&gt;gluon-&gt;Desktop Multi view Project with FXML-&gt;java 11-&gt;finish</p>\n</li>\n<li><p>install gradel Gradle 4.10.2 used it as local option in last setup view</p>\n</li>\n<li><p>I use java version &quot;11&quot; 2018-09-25</p>\n</li>\n<li><p>I download the javaFx11 (openjfx-11_windows-x64_bin-sdk) and use it in an Structure as a libery</p>\n</li>\n</ol>\n<p>know I have this --&gt;</p>\n<pre><code>00:41:11: Executing task 'run'...\n\n\n&gt; Task :compileJava FAILED\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:5: error: package javafx.scene.control does not exist\nimport javafx.scene.control.Alert;\n                           ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:7: error: package javafx.scene.image does not exist\nimport javafx.scene.image.Image;\n                         ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:8: error: package javafx.scene.image does not exist\nimport javafx.scene.image.ImageView;\n                         ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:7: error: package javafx.fxml does not exist\nimport javafx.fxml.FXML;\n                  ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:8: error: package javafx.scene.control does not exist\nimport javafx.scene.control.Button;\n                           ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:9: error: package javafx.scene.control does not exist\nimport javafx.scene.control.Label;\n                           ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:10: error: package javafx.scene.control does not exist\nimport javafx.scene.control.TextInputDialog;\n                           ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:27: error: cannot find symbol\n    private Label label;\n            ^\n  symbol:   class Label\n  location: class PrimaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:30: error: cannot find symbol\n    private Button button;\n            ^\n  symbol:   class Button\n  location: class PrimaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:6: error: package javafx.fxml does not exist\nimport javafx.fxml.FXML;\n                  ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:7: error: package javafx.scene.control does not exist\nimport javafx.scene.control.Button;\n                           ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:20: error: cannot find symbol\n    private Button button;\n            ^\n  symbol:   class Button\n  location: class SecondaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\GluonApplication.java:4: error: package javafx.scene does not exist\nimport javafx.scene.Scene;\n                   ^\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\GluonApplication.java:7: error: cannot access Application\npublic class GluonApplication extends ParticleApplication {\n       ^\n  class file for javafx.application.Application not found\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\GluonApplication.java:14: error: cannot find symbol\n    public void postInit(Scene scene) {\n                         ^\n  symbol:   class Scene\n  location: class GluonApplication\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:26: error: cannot find symbol\n    @FXML\n     ^\n  symbol:   class FXML\n  location: class PrimaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:29: error: cannot find symbol\n    @FXML\n     ^\n  symbol:   class FXML\n  location: class PrimaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:32: error: cannot find symbol\n    @FXML\n     ^\n  symbol:   class FXML\n  location: class PrimaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:19: error: cannot find symbol\n    @FXML\n     ^\n  symbol:   class FXML\n  location: class SecondaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\SecondaryController.java:22: error: cannot find symbol\n    @FXML\n     ^\n  symbol:   class FXML\n  location: class SecondaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:24: error: cannot find symbol\n        Alert alert = new Alert(AlertType.INFORMATION);\n        ^\n  symbol:   class Alert\n  location: class MenuActions\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:24: error: cannot find symbol\n        Alert alert = new Alert(AlertType.INFORMATION);\n                          ^\n  symbol:   class Alert\n  location: class MenuActions\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:24: error: cannot find symbol\n        Alert alert = new Alert(AlertType.INFORMATION);\n                                ^\n  symbol:   variable AlertType\n  location: class MenuActions\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:27: error: cannot find symbol\n        alert.setGraphic(new ImageView(new Image(MenuActions.class.getResource(&quot;/icon.png&quot;).toExternalForm(), 48, 48, true, true)));\n                             ^\n  symbol:   class ImageView\n  location: class MenuActions\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\actions\\MenuActions.java:27: error: cannot find symbol\n        alert.setGraphic(new ImageView(new Image(MenuActions.class.getResource(&quot;/icon.png&quot;).toExternalForm(), 48, 48, true, true)));\n                                           ^\n  symbol:   class Image\n  location: class MenuActions\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:51: error: cannot access StackPane\n        app.getParticle().getToolBarActions().add(0, actionSignin);\n                         ^\n  class file for javafx.scene.layout.StackPane not found\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:55: error: cannot access ObservableList\n        app.getParticle().getToolBarActions().remove(actionSignin);\n                                           ^\n  class file for javafx.collections.ObservableList not found\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:65: error: cannot find symbol\n        TextInputDialog input = new TextInputDialog(stateManager.getProperty(&quot;UserName&quot;).orElse(&quot;&quot;).toString());\n        ^\n  symbol:   class TextInputDialog\n  location: class PrimaryController\nE:\\IntellijProjects\\GluonDesktop-MultipleViewProjectwithFXML\\src\\main\\java\\com\\gluonapplication\\controllers\\PrimaryController.java:65: error: cannot find symbol\n        TextInputDialog input = new TextInputDialog(stateManager.getProperty(&quot;UserName&quot;).orElse(&quot;&quot;).toString());\n                                    ^\n  symbol:   class TextInputDialog\n  location: class PrimaryController\n29 errors\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':compileJava'.\n&gt; Compilation failed; see the compiler error output for details.\n\n* Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 0s\n1 actionable task: 1 executed\nCompilation failed; see the compiler error output for details.\n00:41:11: Task execution finished 'run'.\n</code></pre>\n<p>Which step did I make a mistake in?</p>\n"},{"tags":["java","overriding","equals"],"comments":[{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":1,"creation_date":1538871519,"post_id":52684028,"comment_id":92296671,"body_markdown":"(You also need to override `hashCode`.)","body":"(You also need to override <code>hashCode</code>.)"}],"answers":[{"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1538867124,"creation_date":1538866619,"answer_id":52684039,"question_id":52684028,"body_markdown":"This is pretty simple but you need to cast `object`:\r\n\r\n    @Override\r\n    public boolean equals(Object object){\r\n        if (object != null &amp;&amp; object.getClass()==Point.class){\r\n            Point p = (Point)object;\r\n            return p.getX()==this.x &amp;&amp; p.getY()==this.y;\r\n        }\r\n        else{\r\n            return false;\r\n        }\r\n    }\r\n\r\nThis is also relevant: https://stackoverflow.com/questions/16497471/casting-in-equals-method","title":"Override equals method in java","body":"<p>This is pretty simple but you need to cast <code>object</code>:</p>\n\n<pre><code>@Override\npublic boolean equals(Object object){\n    if (object != null &amp;&amp; object.getClass()==Point.class){\n        Point p = (Point)object;\n        return p.getX()==this.x &amp;&amp; p.getY()==this.y;\n    }\n    else{\n        return false;\n    }\n}\n</code></pre>\n\n<p>This is also relevant: <a href=\"https://stackoverflow.com/questions/16497471/casting-in-equals-method\">Casting in equals method</a></p>\n"}],"owner":{"account_id":14423843,"reputation":57,"user_id":10419198,"display_name":"Phil&#233;mon Roubaud"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671820682,"creation_date":1538866509,"question_id":52684028,"body_markdown":"Let&#39;s consider the following simple class.\r\n\r\n    class Point {\r\n    private float x;\r\n    private float y;\r\n    \r\n    public Point(float x, float y){\r\n        this.x=x;\r\n        this.y=y;\r\n    }\r\n    \r\n    public float getX(){return this.x;}\r\n    public float getY(){return this.y;}\r\n    public void setX(float x){this.x=x;}\r\n    public void setY(float y){this.y=y;}\r\n    \r\n    @Override\r\n    public String toString(){\r\n        return (&quot;x = &quot;+this.x+&quot;, y = &quot;+this.y+&quot;;&quot;);\r\n    }\r\n    @Override\r\n    public Point clone(){\r\n        return new Point(this.x,this.y);\r\n    }\r\n    @Override\r\n    public boolean equals(Object object){\r\n        if (object != null &amp;&amp; object.getClass()==Point.class){\r\n            return object.getX()==this.x &amp;&amp; object.getY()==this.y;\r\n        }\r\n        else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\nThe problem is in the rewrite of method equals: I use the general Object class as attribute to make it more flexible, but netbeans prints error on return line: &quot;Object has no method getX&quot; which is perfectly logical. \r\n\r\nBut the problem is still here, how can I manage to fix this?\r\n\r\nThanks you in advance","title":"Override equals method in java","body":"<p>Let's consider the following simple class.</p>\n<pre><code>class Point {\nprivate float x;\nprivate float y;\n\npublic Point(float x, float y){\n    this.x=x;\n    this.y=y;\n}\n\npublic float getX(){return this.x;}\npublic float getY(){return this.y;}\npublic void setX(float x){this.x=x;}\npublic void setY(float y){this.y=y;}\n\n@Override\npublic String toString(){\n    return (&quot;x = &quot;+this.x+&quot;, y = &quot;+this.y+&quot;;&quot;);\n}\n@Override\npublic Point clone(){\n    return new Point(this.x,this.y);\n}\n@Override\npublic boolean equals(Object object){\n    if (object != null &amp;&amp; object.getClass()==Point.class){\n        return object.getX()==this.x &amp;&amp; object.getY()==this.y;\n    }\n    else{\n        return false;\n    }\n}\n</code></pre>\n<p>The problem is in the rewrite of method equals: I use the general Object class as attribute to make it more flexible, but netbeans prints error on return line: &quot;Object has no method getX&quot; which is perfectly logical.</p>\n<p>But the problem is still here, how can I manage to fix this?</p>\n<p>Thanks you in advance</p>\n"},{"tags":["java","web-services","cxf"],"answers":[{"comments":[{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":1,"creation_date":1308065824,"post_id":6344047,"comment_id":7425688,"body_markdown":"I&#39;ve seen this, but the example uses Spring - which I&#39;d like to avoid. Do you have the java code to get this working? +1","body":"I&#39;ve seen this, but the example uses Spring - which I&#39;d like to avoid. Do you have the java code to get this working? +1"},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1308114365,"post_id":6344047,"comment_id":7435633,"body_markdown":"This is what I was afraid of...that in order to do Object over the wire with CXF you have to markup the classes with JAXB annotations. However, in my instance...changing the classes to add the JAXB annotations is not an option. Thus, this is not what I would quantify as &quot;automatically mapping&quot; since you have to modify your classes to get them to marshal. The restlet library does this by default via xstream (you simply add the jar to your path) - I was hoping CXF has something similar.","body":"This is what I was afraid of...that in order to do Object over the wire with CXF you have to markup the classes with JAXB annotations. However, in my instance...changing the classes to add the JAXB annotations is not an option. Thus, this is not what I would quantify as &quot;automatically mapping&quot; since you have to modify your classes to get them to marshal. The restlet library does this by default via xstream (you simply add the jar to your path) - I was hoping CXF has something similar."},{"owner":{"account_id":333322,"reputation":3805,"user_id":659138,"display_name":"philwb"},"score":0,"creation_date":1308147020,"post_id":6344047,"comment_id":7443847,"body_markdown":"I see; so you&#39;re real issue is that you need a json message body provider that isn&#39;t based on the underlying jaxb provider.  Actually, that probably makes it easier.  You can quickly build a provider based on xstream and simply use it.  I&#39;ll post some sample code that I have for that shortly.","body":"I see; so you&#39;re real issue is that you need a json message body provider that isn&#39;t based on the underlying jaxb provider.  Actually, that probably makes it easier.  You can quickly build a provider based on xstream and simply use it.  I&#39;ll post some sample code that I have for that shortly."},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1308170704,"post_id":6344047,"comment_id":7451443,"body_markdown":"First of all, I appreciate your efforts to help me solve this. Second, I would expect something like this to exist in the library &quot;out of the box&quot; - but maybe I&#39;m expecting too much. In my opinion, it seems heavy &amp; cluttery that one would have to implement MessageBody[Reader\\Writer] for every resource. Unless someone comes along with a better solution I&#39;ll accept your solution and grant you the bounty at the end of the timeline, however, I still don&#39;t see this as an optimal solution. Thanks!","body":"First of all, I appreciate your efforts to help me solve this. Second, I would expect something like this to exist in the library &quot;out of the box&quot; - but maybe I&#39;m expecting too much. In my opinion, it seems heavy &amp; cluttery that one would have to implement MessageBody[Reader\\Writer] for every resource. Unless someone comes along with a better solution I&#39;ll accept your solution and grant you the bounty at the end of the timeline, however, I still don&#39;t see this as an optimal solution. Thanks!"},{"owner":{"account_id":333322,"reputation":3805,"user_id":659138,"display_name":"philwb"},"score":0,"creation_date":1308171188,"post_id":6344047,"comment_id":7451572,"body_markdown":"Happy to help if I can.  Personally, I wouldn&#39;t expect much from a json provider out of the box; too many possibilities for it to be generically useful.  In many of these cases the client and server would have to know quite a bit about one another to work properly, which might make jaxb markup or other methods much more feasible.  One last point, you don&#39;t need to have a message body reader/writer for each resource.  You can handily change isWritable/Readable to not care about the class type, leaving you with xstream/jettison default marshalling for all entities.  At less than 100 LOC, cheap.","body":"Happy to help if I can.  Personally, I wouldn&#39;t expect much from a json provider out of the box; too many possibilities for it to be generically useful.  In many of these cases the client and server would have to know quite a bit about one another to work properly, which might make jaxb markup or other methods much more feasible.  One last point, you don&#39;t need to have a message body reader/writer for each resource.  You can handily change isWritable/Readable to not care about the class type, leaving you with xstream/jettison default marshalling for all entities.  At less than 100 LOC, cheap."},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1308202703,"post_id":6344047,"comment_id":7456392,"body_markdown":"Restlet does it by default. I think it achieves it with reflection. But then the restlet library does not adhere to the JAX-RS spec on the client side like CXF does. Do either way I have to compromise :(","body":"Restlet does it by default. I think it achieves it with reflection. But then the restlet library does not adhere to the JAX-RS spec on the client side like CXF does. Do either way I have to compromise :("},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1327707838,"post_id":6344047,"comment_id":11342547,"body_markdown":"Do you have to do something on the server side to make this work? I am finally getting around to trying this out, and I can&#39;t seem to get it to work.","body":"Do you have to do something on the server side to make this work? I am finally getting around to trying this out, and I can&#39;t seem to get it to work."},{"owner":{"account_id":333322,"reputation":3805,"user_id":659138,"display_name":"philwb"},"score":0,"creation_date":1327711798,"post_id":6344047,"comment_id":11343179,"body_markdown":"@javamonkey79: see edit 3 for spring based server configuration.  I don&#39;t have a code based configuration handy but it should follow very similarly to the client configuration for providers which is in one of the code samples above.","body":"@javamonkey79: see edit 3 for spring based server configuration.  I don&#39;t have a code based configuration handy but it should follow very similarly to the client configuration for providers which is in one of the code samples above."},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1327713095,"post_id":6344047,"comment_id":11343339,"body_markdown":"I&#39;ve been looking into Aegis as an alternate databinding (other than JAXB). It looks like this might do the trick if I can get it to work. Have you tried this?","body":"I&#39;ve been looking into Aegis as an alternate databinding (other than JAXB). It looks like this might do the trick if I can get it to work. Have you tried this?"},{"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"score":0,"creation_date":1327713270,"post_id":6344047,"comment_id":11343359,"body_markdown":"I tried to set it as a service provider, I don&#39;t know if I&#39;m doing something wrong or what. I am using: `JAXRSServerFactoryBean` I tried `sf.setResourceProvider( Demo.class, new XstreamJsonProvider() );` but this doesn&#39;t seem to work - also it requires making `XstreamJsonProvider` adhere to the `ResourceProvider` interface...","body":"I tried to set it as a service provider, I don&#39;t know if I&#39;m doing something wrong or what. I am using: <code>JAXRSServerFactoryBean</code> I tried <code>sf.setResourceProvider( Demo.class, new XstreamJsonProvider() );</code> but this doesn&#39;t seem to work - also it requires making <code>XstreamJsonProvider</code> adhere to the <code>ResourceProvider</code> interface..."},{"owner":{"account_id":333322,"reputation":3805,"user_id":659138,"display_name":"philwb"},"score":0,"creation_date":1327714434,"post_id":6344047,"comment_id":11343489,"body_markdown":"@javamonkey79: see edit 4 for help with non-spring configuration.  As for aegis, no I haven&#39;t used it. I&#39;m not sure how much help that is for you in producing JSON, though it looks like it might help with XML in the case where you cannot annotate the source DTO. However, if you are going down that path to avoid a message body writer/reader I think you are adding to your work and complexity without any real gains.","body":"@javamonkey79: see edit 4 for help with non-spring configuration.  As for aegis, no I haven&#39;t used it. I&#39;m not sure how much help that is for you in producing JSON, though it looks like it might help with XML in the case where you cannot annotate the source DTO. However, if you are going down that path to avoid a message body writer/reader I think you are adding to your work and complexity without any real gains."},{"owner":{"account_id":1146751,"reputation":4513,"user_id":1129313,"accept_rate":46,"display_name":"Garry"},"score":0,"creation_date":1432899088,"post_id":6344047,"comment_id":49130315,"body_markdown":"@philwb ... thank you, it also helped me as I am working on a RESTful service in CXF with Spring.","body":"@philwb ... thank you, it also helped me as I am working on a RESTful service in CXF with Spring."},{"owner":{"account_id":36915,"reputation":3723,"user_id":105408,"accept_rate":75,"display_name":"markthegrea"},"score":0,"creation_date":1487023036,"post_id":6344047,"comment_id":71589919,"body_markdown":"Is there a way to set a MessageBodyReader/Writer programatically?  I am not using a webap, so I don&#39;t have xml or a startup.","body":"Is there a way to set a MessageBodyReader/Writer programatically?  I am not using a webap, so I don&#39;t have xml or a startup."}],"tags":[],"owner":{"account_id":333322,"reputation":3805,"user_id":659138,"display_name":"philwb"},"comment_count":13,"down_vote_count":0,"up_vote_count":47,"is_accepted":true,"score":47,"last_activity_date":1327714297,"creation_date":1308057311,"answer_id":6344047,"question_id":6312030,"body_markdown":"It isn&#39;t quite out of the box but CXF does support JSON bindings to rest services.  See [cxf jax-rs json docs here.][1] You&#39;ll still need to do some minimal configuration to have the provider available and you need to be familiar with jettison if you want to have more control over how the JSON is formed.\r\n\r\n**EDIT:** Per comment request, here is some code.  I don&#39;t have a lot of experience with this but the following code worked as an example in a quick test system.\r\n\r\n    //TestApi parts\r\n    @GET\r\n    @Path ( &quot;test&quot; )\r\n    @Produces ( &quot;application/json&quot; )\r\n    public Demo getDemo () {\r\n        Demo d = new Demo ();\r\n        d.id = 1;\r\n        d.name = &quot;test&quot;;\r\n        return d;\r\n    }\r\n\r\n    //client config for a TestApi interface\r\n    List providers = new ArrayList ();\r\n    JSONProvider jsonProvider = new JSONProvider ();\r\n    Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt; ();\r\n    map.put ( &quot;http://www.myserviceapi.com&quot;, &quot;myapi&quot; );\r\n    jsonProvider.setNamespaceMap ( map );\r\n    providers.add ( jsonProvider );\r\n    TestApi proxy = JAXRSClientFactory.create ( url, TestApi.class, \r\n        providers, true );\r\n\r\n    Demo d = proxy.getDemo ();\r\n    if ( d != null ) {\r\n        System.out.println ( d.id + &quot;:&quot; + d.name );\r\n    }\r\n\r\n    //the Demo class\r\n    @XmlRootElement ( name = &quot;demo&quot;, namespace = &quot;http://www.myserviceapi.com&quot; )\r\n    @XmlType ( name = &quot;demo&quot;, namespace = &quot;http://www.myserviceapi.com&quot;, \r\n        propOrder = { &quot;name&quot;, &quot;id&quot; } )\r\n    @XmlAccessorType ( XmlAccessType.FIELD )\r\n    public class Demo {\r\n\r\n        public String name;\r\n        public int id;\r\n    }\r\n\r\nNotes:\r\n\r\n 1. The providers list is where you code configure the JSON provider on the client.  In particular, you see the namespace mapping.  This needs to match what is on your server side configuration.  I don&#39;t know much about Jettison options so I&#39;m not much help on manipulating all of the various knobs for controlling the marshalling process.\r\n 2. Jettison in CXF works by marshalling XML from a JAXB provider into JSON.  So you have to ensure that the payload objects are all marked up (or otherwise configured) to marshall as application/xml before you can have them marshall as JSON.  If you know of a way around this (other than writing your own message body writer), I&#39;d love to hear about it.\r\n 3. I use spring on the server so my configuration there is all xml stuff.  Essentially, you need to go through the same process to add the JSONProvider to the service with the same namespace configuration.  Don&#39;t have code for that handy but I imagine it will mirror the client side fairly well.\r\n\r\nThis is a bit dirty as an example but will hopefully get you going.\r\n\r\n**Edit2:** An example of a message body writer that is based on xstream to avoid jaxb.\r\n\r\n    @Produces ( &quot;application/json&quot; )\r\n    @Consumes ( &quot;application/json&quot; )\r\n    @Provider\r\n    public class XstreamJsonProvider implements MessageBodyReader&lt;Object&gt;,\r\n        MessageBodyWriter&lt;Object&gt; {\r\n\r\n    @Override\r\n    public boolean isWriteable ( Class&lt;?&gt; type, Type genericType, \r\n        Annotation[] annotations, MediaType mediaType ) {\r\n        return MediaType.APPLICATION_JSON_TYPE.equals ( mediaType ) \r\n            &amp;&amp; type.equals ( Demo.class );\r\n    }\r\n\r\n    @Override\r\n    public long getSize ( Object t, Class&lt;?&gt; type, Type genericType, \r\n        Annotation[] annotations, MediaType mediaType ) {\r\n        // I&#39;m being lazy - should compute the actual size\r\n        return -1;\r\n    }\r\n\r\n    @Override\r\n    public void writeTo ( Object t, Class&lt;?&gt; type, Type genericType, \r\n        Annotation[] annotations, MediaType mediaType, \r\n        MultivaluedMap&lt;String, Object&gt; httpHeaders, OutputStream entityStream ) \r\n        throws IOException, WebApplicationException {\r\n        // deal with thread safe use of xstream, etc.\r\n        XStream xstream = new XStream ( new JettisonMappedXmlDriver () );\r\n        xstream.setMode ( XStream.NO_REFERENCES );\r\n        // add safer encoding, error handling, etc.\r\n        xstream.toXML ( t, entityStream );\r\n    }\r\n\r\n    @Override\r\n    public boolean isReadable ( Class&lt;?&gt; type, Type genericType, \r\n        Annotation[] annotations, MediaType mediaType ) {\r\n        return MediaType.APPLICATION_JSON_TYPE.equals ( mediaType ) \r\n            &amp;&amp; type.equals ( Demo.class );\r\n    }\r\n\r\n    @Override\r\n    public Object readFrom ( Class&lt;Object&gt; type, Type genericType, \r\n        Annotation[] annotations, MediaType mediaType, \r\n        MultivaluedMap&lt;String, String&gt; httpHeaders, InputStream entityStream ) \r\n        throws IOException, WebApplicationException {\r\n        // add error handling, etc.\r\n        XStream xstream = new XStream ( new JettisonMappedXmlDriver () );\r\n        return xstream.fromXML ( entityStream );\r\n    }\r\n    }\r\n\r\n    //now your client just needs this\r\n    List providers = new ArrayList ();\r\n    XstreamJsonProvider jsonProvider = new XstreamJsonProvider ();\r\n    providers.add ( jsonProvider );\r\n    TestApi proxy = JAXRSClientFactory.create ( url, TestApi.class, \r\n        providers, true );\r\n\r\n    Demo d = proxy.getDemo ();\r\n    if ( d != null ) {\r\n        System.out.println ( d.id + &quot;:&quot; + d.name );\r\n    }\r\n\r\nThe sample code is missing the parts for robust media type support, error handling, thread safety, etc.  But, it ought to get you around the jaxb issue with minimal code.\r\n\r\n**EDIT 3 - sample server side configuration**\r\nAs I said before, my server side is spring configured.  Here is a sample configuration that works to wire in the provider:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot;\r\n\txmlns:cxf=&quot;http://cxf.apache.org/core&quot;\r\n\txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans\r\n\thttp://www.springframework.org/schema/beans/spring-beans-3.0.xsd\r\n        http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\r\n        http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd&quot;&gt;\r\n\r\n\t&lt;import resource=&quot;classpath:META-INF/cxf/cxf.xml&quot; /&gt;\r\n\r\n\t&lt;jaxrs:server id=&quot;TestApi&quot;&gt;\r\n\t\t&lt;jaxrs:serviceBeans&gt;\r\n\t\t\t&lt;ref bean=&quot;testApi&quot; /&gt;\r\n\t\t&lt;/jaxrs:serviceBeans&gt;\r\n\t\t&lt;jaxrs:providers&gt;\r\n\t\t\t&lt;bean id=&quot;xstreamJsonProvider&quot; class=&quot;webtests.rest.XstreamJsonProvider&quot; /&gt;\r\n\t\t&lt;/jaxrs:providers&gt;\r\n\t&lt;/jaxrs:server&gt;\r\n\r\n\t&lt;bean id=&quot;testApi&quot; class=&quot;webtests.rest.TestApi&quot;&gt;\r\n\t&lt;/bean&gt;\r\n\r\n    &lt;/beans&gt;\r\n\r\nI have also noted that in the latest rev of cxf that I&#39;m using there is a difference in the media types, so the example above on the xstream message body reader/writer needs a quick modification where isWritable/isReadable change to:\r\n\r\n    return MediaType.APPLICATION_JSON_TYPE.getType ().equals ( mediaType.getType () )\r\n        &amp;&amp; MediaType.APPLICATION_JSON_TYPE.getSubtype ().equals ( mediaType.getSubtype () )\r\n        &amp;&amp; type.equals ( Demo.class );\r\n\r\n**EDIT 4 - non-spring configuration**\r\nUsing your servlet container of choice, configure\r\n\r\n    org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet\r\n\r\nwith at least 2 init params of:\r\n\r\n    jaxrs.serviceClasses\r\n    jaxrs.providers\r\n\r\nwhere the serviceClasses is a space separated list of the service implementations you want bound, such as the TestApi mentioned above and the providers is a space separated list of message body providers, such as the XstreamJsonProvider mentioned above.  In tomcat you might add the following to web.xml:\r\n\r\n    &lt;servlet&gt;\r\n        &lt;servlet-name&gt;cxfservlet&lt;/servlet-name&gt;\r\n        &lt;servlet-class&gt;org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet&lt;/servlet-class&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;jaxrs.serviceClasses&lt;/param-name&gt;\r\n            &lt;param-value&gt;webtests.rest.TestApi&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;init-param&gt;\r\n            &lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\r\n            &lt;param-value&gt;webtests.rest.XstreamJsonProvider&lt;/param-value&gt;\r\n        &lt;/init-param&gt;\r\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    &lt;/servlet&gt;\r\n\r\nThat is pretty much the quickest way to run it without spring.  If you are not using a servlet container, you would need to configure the JAXRSServerFactoryBean.setProviders with an instance of XstreamJsonProvider and set the service implementation via the JAXRSServerFactoryBean.setResourceProvider method.  Check the CXFNonSpringJaxrsServlet.init method to see how they do it when setup in a servlet container.\r\n\r\nThat ought to get you going no matter your scenario.\r\n\r\n  [1]: http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-JSONsupport","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>It isn't quite out of the box but CXF does support JSON bindings to rest services.  See <a href=\"http://cxf.apache.org/docs/jax-rs-data-bindings.html#JAX-RSDataBindings-JSONsupport\">cxf jax-rs json docs here.</a> You'll still need to do some minimal configuration to have the provider available and you need to be familiar with jettison if you want to have more control over how the JSON is formed.</p>\n\n<p><strong>EDIT:</strong> Per comment request, here is some code.  I don't have a lot of experience with this but the following code worked as an example in a quick test system.</p>\n\n<pre><code>//TestApi parts\n@GET\n@Path ( \"test\" )\n@Produces ( \"application/json\" )\npublic Demo getDemo () {\n    Demo d = new Demo ();\n    d.id = 1;\n    d.name = \"test\";\n    return d;\n}\n\n//client config for a TestApi interface\nList providers = new ArrayList ();\nJSONProvider jsonProvider = new JSONProvider ();\nMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt; ();\nmap.put ( \"http://www.myserviceapi.com\", \"myapi\" );\njsonProvider.setNamespaceMap ( map );\nproviders.add ( jsonProvider );\nTestApi proxy = JAXRSClientFactory.create ( url, TestApi.class, \n    providers, true );\n\nDemo d = proxy.getDemo ();\nif ( d != null ) {\n    System.out.println ( d.id + \":\" + d.name );\n}\n\n//the Demo class\n@XmlRootElement ( name = \"demo\", namespace = \"http://www.myserviceapi.com\" )\n@XmlType ( name = \"demo\", namespace = \"http://www.myserviceapi.com\", \n    propOrder = { \"name\", \"id\" } )\n@XmlAccessorType ( XmlAccessType.FIELD )\npublic class Demo {\n\n    public String name;\n    public int id;\n}\n</code></pre>\n\n<p>Notes:</p>\n\n<ol>\n<li>The providers list is where you code configure the JSON provider on the client.  In particular, you see the namespace mapping.  This needs to match what is on your server side configuration.  I don't know much about Jettison options so I'm not much help on manipulating all of the various knobs for controlling the marshalling process.</li>\n<li>Jettison in CXF works by marshalling XML from a JAXB provider into JSON.  So you have to ensure that the payload objects are all marked up (or otherwise configured) to marshall as application/xml before you can have them marshall as JSON.  If you know of a way around this (other than writing your own message body writer), I'd love to hear about it.</li>\n<li>I use spring on the server so my configuration there is all xml stuff.  Essentially, you need to go through the same process to add the JSONProvider to the service with the same namespace configuration.  Don't have code for that handy but I imagine it will mirror the client side fairly well.</li>\n</ol>\n\n<p>This is a bit dirty as an example but will hopefully get you going.</p>\n\n<p><strong>Edit2:</strong> An example of a message body writer that is based on xstream to avoid jaxb.</p>\n\n<pre><code>@Produces ( \"application/json\" )\n@Consumes ( \"application/json\" )\n@Provider\npublic class XstreamJsonProvider implements MessageBodyReader&lt;Object&gt;,\n    MessageBodyWriter&lt;Object&gt; {\n\n@Override\npublic boolean isWriteable ( Class&lt;?&gt; type, Type genericType, \n    Annotation[] annotations, MediaType mediaType ) {\n    return MediaType.APPLICATION_JSON_TYPE.equals ( mediaType ) \n        &amp;&amp; type.equals ( Demo.class );\n}\n\n@Override\npublic long getSize ( Object t, Class&lt;?&gt; type, Type genericType, \n    Annotation[] annotations, MediaType mediaType ) {\n    // I'm being lazy - should compute the actual size\n    return -1;\n}\n\n@Override\npublic void writeTo ( Object t, Class&lt;?&gt; type, Type genericType, \n    Annotation[] annotations, MediaType mediaType, \n    MultivaluedMap&lt;String, Object&gt; httpHeaders, OutputStream entityStream ) \n    throws IOException, WebApplicationException {\n    // deal with thread safe use of xstream, etc.\n    XStream xstream = new XStream ( new JettisonMappedXmlDriver () );\n    xstream.setMode ( XStream.NO_REFERENCES );\n    // add safer encoding, error handling, etc.\n    xstream.toXML ( t, entityStream );\n}\n\n@Override\npublic boolean isReadable ( Class&lt;?&gt; type, Type genericType, \n    Annotation[] annotations, MediaType mediaType ) {\n    return MediaType.APPLICATION_JSON_TYPE.equals ( mediaType ) \n        &amp;&amp; type.equals ( Demo.class );\n}\n\n@Override\npublic Object readFrom ( Class&lt;Object&gt; type, Type genericType, \n    Annotation[] annotations, MediaType mediaType, \n    MultivaluedMap&lt;String, String&gt; httpHeaders, InputStream entityStream ) \n    throws IOException, WebApplicationException {\n    // add error handling, etc.\n    XStream xstream = new XStream ( new JettisonMappedXmlDriver () );\n    return xstream.fromXML ( entityStream );\n}\n}\n\n//now your client just needs this\nList providers = new ArrayList ();\nXstreamJsonProvider jsonProvider = new XstreamJsonProvider ();\nproviders.add ( jsonProvider );\nTestApi proxy = JAXRSClientFactory.create ( url, TestApi.class, \n    providers, true );\n\nDemo d = proxy.getDemo ();\nif ( d != null ) {\n    System.out.println ( d.id + \":\" + d.name );\n}\n</code></pre>\n\n<p>The sample code is missing the parts for robust media type support, error handling, thread safety, etc.  But, it ought to get you around the jaxb issue with minimal code.</p>\n\n<p><strong>EDIT 3 - sample server side configuration</strong>\nAs I said before, my server side is spring configured.  Here is a sample configuration that works to wire in the provider:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\nxmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\nxmlns:jaxrs=\"http://cxf.apache.org/jaxrs\"\nxmlns:cxf=\"http://cxf.apache.org/core\"\nxsi:schemaLocation=\"http://www.springframework.org/schema/beans\nhttp://www.springframework.org/schema/beans/spring-beans-3.0.xsd\n    http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd\n    http://cxf.apache.org/core http://cxf.apache.org/schemas/core.xsd\"&gt;\n\n&lt;import resource=\"classpath:META-INF/cxf/cxf.xml\" /&gt;\n\n&lt;jaxrs:server id=\"TestApi\"&gt;\n    &lt;jaxrs:serviceBeans&gt;\n        &lt;ref bean=\"testApi\" /&gt;\n    &lt;/jaxrs:serviceBeans&gt;\n    &lt;jaxrs:providers&gt;\n        &lt;bean id=\"xstreamJsonProvider\" class=\"webtests.rest.XstreamJsonProvider\" /&gt;\n    &lt;/jaxrs:providers&gt;\n&lt;/jaxrs:server&gt;\n\n&lt;bean id=\"testApi\" class=\"webtests.rest.TestApi\"&gt;\n&lt;/bean&gt;\n\n&lt;/beans&gt;\n</code></pre>\n\n<p>I have also noted that in the latest rev of cxf that I'm using there is a difference in the media types, so the example above on the xstream message body reader/writer needs a quick modification where isWritable/isReadable change to:</p>\n\n<pre><code>return MediaType.APPLICATION_JSON_TYPE.getType ().equals ( mediaType.getType () )\n    &amp;&amp; MediaType.APPLICATION_JSON_TYPE.getSubtype ().equals ( mediaType.getSubtype () )\n    &amp;&amp; type.equals ( Demo.class );\n</code></pre>\n\n<p><strong>EDIT 4 - non-spring configuration</strong>\nUsing your servlet container of choice, configure</p>\n\n<pre><code>org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet\n</code></pre>\n\n<p>with at least 2 init params of:</p>\n\n<pre><code>jaxrs.serviceClasses\njaxrs.providers\n</code></pre>\n\n<p>where the serviceClasses is a space separated list of the service implementations you want bound, such as the TestApi mentioned above and the providers is a space separated list of message body providers, such as the XstreamJsonProvider mentioned above.  In tomcat you might add the following to web.xml:</p>\n\n<pre><code>&lt;servlet&gt;\n    &lt;servlet-name&gt;cxfservlet&lt;/servlet-name&gt;\n    &lt;servlet-class&gt;org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet&lt;/servlet-class&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;jaxrs.serviceClasses&lt;/param-name&gt;\n        &lt;param-value&gt;webtests.rest.TestApi&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n        &lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\n        &lt;param-value&gt;webtests.rest.XstreamJsonProvider&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n&lt;/servlet&gt;\n</code></pre>\n\n<p>That is pretty much the quickest way to run it without spring.  If you are not using a servlet container, you would need to configure the JAXRSServerFactoryBean.setProviders with an instance of XstreamJsonProvider and set the service implementation via the JAXRSServerFactoryBean.setResourceProvider method.  Check the CXFNonSpringJaxrsServlet.init method to see how they do it when setup in a servlet container.</p>\n\n<p>That ought to get you going no matter your scenario.</p>\n"},{"tags":[],"owner":{"account_id":1152519,"reputation":733,"user_id":1133928,"display_name":"Sergey Beryozkin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1334513973,"creation_date":1334513973,"answer_id":10164730,"question_id":6312030,"body_markdown":"You can also configure CXFNonSpringJAXRSServlet (assuming JSONProvider is used):\r\n\r\n    &lt;init-param&gt;\r\n      &lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\r\n      &lt;param-value&gt;\r\n          org.apache.cxf.jaxrs.provider.JSONProvider\r\n          (writeXsiType=false)\r\n      &lt;/param-value&gt; \r\n    &lt;/init-param&gt;\r\n","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>You can also configure CXFNonSpringJAXRSServlet (assuming JSONProvider is used):</p>\n\n<pre><code>&lt;init-param&gt;\n  &lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\n  &lt;param-value&gt;\n      org.apache.cxf.jaxrs.provider.JSONProvider\n      (writeXsiType=false)\n  &lt;/param-value&gt; \n&lt;/init-param&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":468218,"reputation":2281,"user_id":874076,"accept_rate":84,"display_name":"Kilokahn"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1367418156,"creation_date":1367418156,"answer_id":16319917,"question_id":6312030,"body_markdown":"If you are using jaxrs:client route of configuring, you can choose to use the JacksonJsonProvider to provide \r\n\r\n    &lt;jaxrs:client id=&quot;serviceId&quot;\r\n        serviceClass=&quot;classname&quot;\r\n        address=&quot;&quot;&gt;\r\n        &lt;jaxrs:providers&gt;\r\n            &lt;bean class=&quot;org.codehaus.jackson.jaxrs.JacksonJsonProvider&quot;&gt;\r\n                &lt;property name=&quot;mapper&quot; ref=&quot;jacksonMapper&quot; /&gt;\r\n            &lt;/bean&gt;\r\n        &lt;/jaxrs:providers&gt;\r\n    &lt;/jaxrs:client&gt;\r\n\r\n    &lt;bean id=&quot;jacksonMapper&quot; class=&quot;org.codehaus.jackson.map.ObjectMapper&quot;&gt;\r\n    &lt;/bean&gt;\r\n\r\nYou need to include the jackson-mapper-asl and jackson-jaxr artifacts in your classpath\r\n","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>If you are using jaxrs:client route of configuring, you can choose to use the JacksonJsonProvider to provide </p>\n\n<pre><code>&lt;jaxrs:client id=\"serviceId\"\n    serviceClass=\"classname\"\n    address=\"\"&gt;\n    &lt;jaxrs:providers&gt;\n        &lt;bean class=\"org.codehaus.jackson.jaxrs.JacksonJsonProvider\"&gt;\n            &lt;property name=\"mapper\" ref=\"jacksonMapper\" /&gt;\n        &lt;/bean&gt;\n    &lt;/jaxrs:providers&gt;\n&lt;/jaxrs:client&gt;\n\n&lt;bean id=\"jacksonMapper\" class=\"org.codehaus.jackson.map.ObjectMapper\"&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>You need to include the jackson-mapper-asl and jackson-jaxr artifacts in your classpath</p>\n"},{"comments":[{"owner":{"account_id":2426870,"reputation":238,"user_id":2118606,"accept_rate":43,"display_name":"Abhishek Ranjan"},"score":1,"creation_date":1447924795,"post_id":26679847,"comment_id":55365175,"body_markdown":"Can you share what you did do to register the provider class in CXF 2.7?","body":"Can you share what you did do to register the provider class in CXF 2.7?"},{"owner":{"account_id":111587,"reputation":11539,"user_id":294702,"accept_rate":90,"display_name":"MonoThreaded"},"score":0,"creation_date":1589340626,"post_id":26679847,"comment_id":109252270,"body_markdown":"what is the xmlns for jaxrs?","body":"what is the xmlns for jaxrs?"}],"tags":[],"owner":{"account_id":2170364,"reputation":311,"user_id":1922538,"display_name":"Ross H Mills III"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1414774846,"creation_date":1414774846,"answer_id":26679847,"question_id":6312030,"body_markdown":"I encountered this problem while upgrading from CXF 2.7.0 to 3.0.2.  Here is what I did to resolve it:\r\n\r\nIncluded the following in my pom.xml\r\n\r\n    \t&lt;dependency&gt;\r\n  \t\t\t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n  \t\t\t&lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\r\n  \t\t\t&lt;version&gt;3.0.2&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\t\t\r\n\t\t&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;jackson-jaxrs&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;1.9.0&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n\r\n and added the following provider\r\n\r\n        &lt;jaxrs:providers&gt;\r\n            &lt;bean class=&quot;org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider&quot; /&gt;\r\n        &lt;/jaxrs:providers&gt;\r\n\r\n","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>I encountered this problem while upgrading from CXF 2.7.0 to 3.0.2.  Here is what I did to resolve it:</p>\n\n<p>Included the following in my pom.xml</p>\n\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n        &lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n        &lt;artifactId&gt;jackson-jaxrs&lt;/artifactId&gt;\n        &lt;version&gt;1.9.0&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n\n<p>and added the following provider</p>\n\n<pre><code>    &lt;jaxrs:providers&gt;\n        &lt;bean class=\"org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider\" /&gt;\n    &lt;/jaxrs:providers&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1926150,"reputation":42835,"user_id":1736537,"display_name":"A Kunin"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1482296140,"creation_date":1482296140,"answer_id":41255348,"question_id":6312030,"body_markdown":"When programmatically creating server, you can add message body writers for json/xml by setting Providers.\r\n\r\n    JAXRSServerFactoryBean bean = new JAXRSServerFactoryBean();\r\n    bean.setAddress(&quot;http://localhost:9000/&quot;);\r\n\r\n    List&lt;Object&gt; providers = new ArrayList&lt;Object&gt;();\r\n    providers.add(new JacksonJaxbJsonProvider());\r\n    providers.add(new JacksonJaxbXMLProvider());\r\n    bean.setProviders(providers);\r\n\r\n    List&lt;Class&lt; ? &gt;&gt; resourceClasses = new ArrayList&lt;Class&lt; ? &gt;&gt;();\r\n    resourceClasses.add(YourRestServiceImpl.class);\r\n    bean.setResourceClasses(resourceClasses);\r\n\r\n    bean.setResourceProvider(YourRestServiceImpl.class, new SingletonResourceProvider(new YourRestServiceImpl()));\r\n\r\n    BindingFactoryManager manager = bean.getBus().getExtension(BindingFactoryManager.class);\r\n    JAXRSBindingFactory restFactory = new JAXRSBindingFactory();\r\n    restFactory.setBus(bean.getBus());\r\n    manager.registerBindingFactory(JAXRSBindingFactory.JAXRS_BINDING_ID, restFactory);\r\n\r\n    bean.create();","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>When programmatically creating server, you can add message body writers for json/xml by setting Providers.</p>\n\n<pre><code>JAXRSServerFactoryBean bean = new JAXRSServerFactoryBean();\nbean.setAddress(\"http://localhost:9000/\");\n\nList&lt;Object&gt; providers = new ArrayList&lt;Object&gt;();\nproviders.add(new JacksonJaxbJsonProvider());\nproviders.add(new JacksonJaxbXMLProvider());\nbean.setProviders(providers);\n\nList&lt;Class&lt; ? &gt;&gt; resourceClasses = new ArrayList&lt;Class&lt; ? &gt;&gt;();\nresourceClasses.add(YourRestServiceImpl.class);\nbean.setResourceClasses(resourceClasses);\n\nbean.setResourceProvider(YourRestServiceImpl.class, new SingletonResourceProvider(new YourRestServiceImpl()));\n\nBindingFactoryManager manager = bean.getBus().getExtension(BindingFactoryManager.class);\nJAXRSBindingFactory restFactory = new JAXRSBindingFactory();\nrestFactory.setBus(bean.getBus());\nmanager.registerBindingFactory(JAXRSBindingFactory.JAXRS_BINDING_ID, restFactory);\n\nbean.create();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6839027,"reputation":4521,"user_id":5260008,"accept_rate":100,"display_name":"N00b Pr0grammer"},"score":0,"creation_date":1532684470,"post_id":49612971,"comment_id":90077163,"body_markdown":"This doesn&#39;t really help @Koushik Das","body":"This doesn&#39;t really help @Koushik Das"}],"tags":[],"owner":{"account_id":1461567,"reputation":29,"user_id":1375744,"display_name":"Koushik Das"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1522678577,"creation_date":1522678577,"answer_id":49612971,"question_id":6312030,"body_markdown":"You can try with mentioning  &quot;Accept: application/json&quot; in your rest client header as well, if you are expecting your object as JSON in response.","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>You can try with mentioning  \"Accept: application/json\" in your rest client header as well, if you are expecting your object as JSON in response.</p>\n"},{"tags":[],"owner":{"account_id":7814745,"reputation":417,"user_id":5909830,"display_name":"Purushothaman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534517633,"creation_date":1534517633,"answer_id":51897999,"question_id":6312030,"body_markdown":"If you are using &quot;cxf-rt-rs-client&quot; version 3.03. or above make sure the xml name space and schemaLocation are declared as below\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; \r\n    \txmlns:jaxrs=&quot;http://cxf.apache.org/jaxrs&quot; \r\n    \txmlns:jaxrs-client=&quot;http://cxf.apache.org/jaxrs-client&quot;\r\n    \txsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\r\n    \thttp://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd http://cxf.apache.org/jaxrs-client http://cxf.apache.org/schemas/jaxrs-client.xsd&quot;&gt;\r\n\r\nAnd make sure the client have JacksonJsonProvider or your custom JsonProvider \r\n\r\n    &lt;jaxrs-client:client id=&quot;serviceClient&quot; address=&quot;${cxf.endpoint.service.address}&quot; serviceClass=&quot;serviceClass&quot;&gt;\r\n            &lt;jaxrs-client:headers&gt;\r\n                &lt;entry key=&quot;Accept&quot; value=&quot;application/json&quot;&gt;&lt;/entry&gt;\r\n            &lt;/jaxrs-client:headers&gt;\r\n            &lt;jaxrs-client:providers&gt;\r\n                &lt;bean class=&quot;org.codehaus.jackson.jaxrs.JacksonJsonProvider&quot;&gt;\r\n                &lt;property name=&quot;mapper&quot; ref=&quot;jacksonMapper&quot; /&gt;\r\n            &lt;/bean&gt;\r\n            &lt;/jaxrs-client:providers&gt;\r\n    &lt;/jaxrs-client:client&gt;\r\n\r\n","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>If you are using \"cxf-rt-rs-client\" version 3.03. or above make sure the xml name space and schemaLocation are declared as below</p>\n\n\n\n<pre><code>&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n    xmlns:jaxrs=\"http://cxf.apache.org/jaxrs\" \n    xmlns:jaxrs-client=\"http://cxf.apache.org/jaxrs-client\"\n    xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://cxf.apache.org/jaxrs http://cxf.apache.org/schemas/jaxrs.xsd http://cxf.apache.org/jaxrs-client http://cxf.apache.org/schemas/jaxrs-client.xsd\"&gt;\n</code></pre>\n\n<p>And make sure the client have JacksonJsonProvider or your custom JsonProvider </p>\n\n<pre><code>&lt;jaxrs-client:client id=\"serviceClient\" address=\"${cxf.endpoint.service.address}\" serviceClass=\"serviceClass\"&gt;\n        &lt;jaxrs-client:headers&gt;\n            &lt;entry key=\"Accept\" value=\"application/json\"&gt;&lt;/entry&gt;\n        &lt;/jaxrs-client:headers&gt;\n        &lt;jaxrs-client:providers&gt;\n            &lt;bean class=\"org.codehaus.jackson.jaxrs.JacksonJsonProvider\"&gt;\n            &lt;property name=\"mapper\" ref=\"jacksonMapper\" /&gt;\n        &lt;/bean&gt;\n        &lt;/jaxrs-client:providers&gt;\n&lt;/jaxrs-client:client&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7029323,"reputation":41,"user_id":5385634,"display_name":"Dinesh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1555419055,"creation_date":1555419055,"answer_id":55708592,"question_id":6312030,"body_markdown":"In my scenario, i faced similar error, when the rest url without port number is not properly configured for load balancing. I verified the rest url with portnumber and this issue was not occurring. so we had to update the load balancing configuration to resolve this issue.","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>In my scenario, i faced similar error, when the rest url without port number is not properly configured for load balancing. I verified the rest url with portnumber and this issue was not occurring. so we had to update the load balancing configuration to resolve this issue.</p>\n"},{"tags":[],"owner":{"account_id":1028612,"reputation":1675,"user_id":1037363,"accept_rate":20,"display_name":"Prasobh.Kollattu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1558424420,"creation_date":1558424420,"answer_id":56233439,"question_id":6312030,"body_markdown":"None of the above changes worked for me.\r\nPlease see my worked configuration below:\r\n\r\nDependencies:\r\n\r\n                &lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;cxf-rt-frontend-jaxrs&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;3.3.2&lt;/version&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;3.3.2&lt;/version&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jackson-jaxrs&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;1.9.13&lt;/version&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\t\t\t\t&lt;dependency&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;jettison&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;1.4.0&lt;/version&gt;\r\n\t\t\t\t&lt;/dependency&gt;\r\n\r\nweb.xml:\r\n  \r\n         &lt;servlet&gt;\r\n    \t\t&lt;servlet-name&gt;cfxServlet&lt;/servlet-name&gt;\r\n    \t\t&lt;servlet-class&gt;org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet&lt;/servlet-class&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;javax.ws.rs.Application&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;com.MyApplication&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt;org.codehaus.jackson.jaxrs.JacksonJsonProvider&lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;init-param&gt;\r\n    \t\t\t&lt;param-name&gt;jaxrs.extensions&lt;/param-name&gt;\r\n    \t\t\t&lt;param-value&gt; \r\n                json=application/json \r\n            &lt;/param-value&gt;\r\n    \t\t&lt;/init-param&gt;\r\n    \t\t&lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\r\n    \t&lt;/servlet&gt;\r\n    \t&lt;servlet-mapping&gt;\r\n    \t\t&lt;servlet-name&gt;cfxServlet&lt;/servlet-name&gt;\r\n    \t\t&lt;url-pattern&gt;/v1/*&lt;/url-pattern&gt;\r\n    \t&lt;/servlet-mapping&gt;\r\n\r\nEnjoy coding .. :)","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>None of the above changes worked for me.\nPlease see my worked configuration below:</p>\n\n<p>Dependencies:</p>\n\n<pre><code>            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n                &lt;artifactId&gt;cxf-rt-frontend-jaxrs&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n                &lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\n                &lt;version&gt;3.3.2&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;\n                &lt;artifactId&gt;jackson-jaxrs&lt;/artifactId&gt;\n                &lt;version&gt;1.9.13&lt;/version&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\n                &lt;artifactId&gt;jettison&lt;/artifactId&gt;\n                &lt;version&gt;1.4.0&lt;/version&gt;\n            &lt;/dependency&gt;\n</code></pre>\n\n<p>web.xml:</p>\n\n<pre><code>     &lt;servlet&gt;\n        &lt;servlet-name&gt;cfxServlet&lt;/servlet-name&gt;\n        &lt;servlet-class&gt;org.apache.cxf.jaxrs.servlet.CXFNonSpringJaxrsServlet&lt;/servlet-class&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;javax.ws.rs.Application&lt;/param-name&gt;\n            &lt;param-value&gt;com.MyApplication&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\n            &lt;param-value&gt;org.codehaus.jackson.jaxrs.JacksonJsonProvider&lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;init-param&gt;\n            &lt;param-name&gt;jaxrs.extensions&lt;/param-name&gt;\n            &lt;param-value&gt; \n            json=application/json \n        &lt;/param-value&gt;\n        &lt;/init-param&gt;\n        &lt;load-on-startup&gt;1&lt;/load-on-startup&gt;\n    &lt;/servlet&gt;\n    &lt;servlet-mapping&gt;\n        &lt;servlet-name&gt;cfxServlet&lt;/servlet-name&gt;\n        &lt;url-pattern&gt;/v1/*&lt;/url-pattern&gt;\n    &lt;/servlet-mapping&gt;\n</code></pre>\n\n<p>Enjoy coding .. :)</p>\n"},{"tags":[],"owner":{"account_id":18192250,"reputation":11,"user_id":13237905,"display_name":"NatarajaN"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586184267,"creation_date":1586178936,"answer_id":61060711,"question_id":6312030,"body_markdown":"Step 1: Add the bean class into the `dataFormat` list:\r\n\r\n```xml\r\n&lt;dataFormats&gt;\r\n    &lt;json id=&quot;jack&quot; library=&quot;Jackson&quot; prettyPrint=&quot;true&quot;\r\n          unmarshalTypeName=&quot;{ur bean class path}&quot; /&gt; \r\n&lt;/dataFormats&gt;\r\n```    \r\n    \r\nStep 2: Marshal the bean prior to the client call:\r\n\r\n```xml\r\n&lt;marchal id=&quot;marsh&quot; ref=&quot;jack&quot;/&gt;\r\n```\r\n\r\n","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>Step 1: Add the bean class into the <code>dataFormat</code> list:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dataFormats&gt;\n    &lt;json id=\"jack\" library=\"Jackson\" prettyPrint=\"true\"\n          unmarshalTypeName=\"{ur bean class path}\" /&gt; \n&lt;/dataFormats&gt;\n</code></pre>\n\n<p>Step 2: Marshal the bean prior to the client call:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;marchal id=\"marsh\" ref=\"jack\"/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3567133,"reputation":623,"user_id":2978362,"accept_rate":67,"display_name":"vsriram92"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671820016,"creation_date":1671820016,"answer_id":74902884,"question_id":6312030,"body_markdown":"Having both org.codehaus.jackson and com.fasterxml.jackson dependencies in a same project will cause this &quot;No message body writer&quot; issue irrespective of annotations.\r\n\r\nIn my case, the Bean was marshal&#39;d by com.fasterxml.jackson -&gt; jackson-jaxrs-json-provider and unmarshall&#39;d by org.codehaus.jackson -&gt; jackson-jaxrs\r\n\r\nSo removing / updating all the references from org.codehaus.jackson to com.fasterxml.jackson.jaxrs fixed this issue.\r\n\r\nI have updated it in \r\ncxf-servlet.xml, pom.xml and in all java class imports.\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\r\n         &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\r\n         &lt;version&gt;2.13.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nProvider in cxf-servlet.xml\r\n\r\n    &lt;jaxrs:providers&gt;\r\n       &lt;bean class=&quot;com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider&quot; /&gt;\r\n    &lt;/jaxrs:providers&gt;","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>Having both org.codehaus.jackson and com.fasterxml.jackson dependencies in a same project will cause this &quot;No message body writer&quot; issue irrespective of annotations.</p>\n<p>In my case, the Bean was marshal'd by com.fasterxml.jackson -&gt; jackson-jaxrs-json-provider and unmarshall'd by org.codehaus.jackson -&gt; jackson-jaxrs</p>\n<p>So removing / updating all the references from org.codehaus.jackson to com.fasterxml.jackson.jaxrs fixed this issue.</p>\n<p>I have updated it in\ncxf-servlet.xml, pom.xml and in all java class imports.</p>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\n    &lt;version&gt;3.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\n     &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\n     &lt;version&gt;2.13.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Provider in cxf-servlet.xml</p>\n<pre><code>&lt;jaxrs:providers&gt;\n   &lt;bean class=&quot;com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider&quot; /&gt;\n&lt;/jaxrs:providers&gt;\n</code></pre>\n"}],"owner":{"account_id":13696,"reputation":17531,"user_id":27657,"accept_rate":65,"display_name":"javamonkey79"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130651,"favorite_count":0,"down_vote_count":0,"up_vote_count":43,"accepted_answer_id":6344047,"answer_count":11,"score":43,"last_activity_date":1671820016,"creation_date":1307739679,"question_id":6312030,"body_markdown":"I am using the CXF rest client which works well for simple data types (eg: Strings, ints). However, when I attempt to use custom Objects I get this:\r\n\r\n    Exception in thread &quot;main&quot; org.apache.cxf.interceptor.Fault: .No message body writer found for class : class com.company.datatype.normal.MyObject.\r\n    \tat org.apache.cxf.jaxrs.client.ClientProxyImpl$BodyWriter.handleMessage(ClientProxyImpl.java:523)\r\n    \tat org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)\r\n    \tat org.apache.cxf.jaxrs.client.ClientProxyImpl.doChainedInvocation(ClientProxyImpl.java:438)\r\n    \tat org.apache.cxf.jaxrs.client.ClientProxyImpl.invoke(ClientProxyImpl.java:177)\r\n    \tat $Proxy13.execute(Unknown Source)\r\n    \tat com.company.JaxTestClient.main(JaxTestClient.java:26)\r\n    Caused by: org.apache.cxf.jaxrs.client.ClientWebApplicationException: .No message body writer found for class : class com.company.datatype.normal.MyObject.\r\n    \tat org.apache.cxf.jaxrs.client.AbstractClient.reportMessageHandlerProblem(AbstractClient.java:491)\r\n    \tat org.apache.cxf.jaxrs.client.AbstractClient.writeBody(AbstractClient.java:401)\r\n    \tat org.apache.cxf.jaxrs.client.ClientProxyImpl$BodyWriter.handleMessage(ClientProxyImpl.java:515)\r\n    \t... 5 more\r\n\r\nI&#39;m calling it like this:\r\n\r\n    JaxExample jaxExample = JAXRSClientFactory.create( &quot;http://localhost:8111/&quot;, JaxExample.class );\r\n    MyObject before = ...\r\n    MyObject after = jaxExample.execute( before );\r\n\r\nHere is the method in the interface:\r\n\r\n\t@POST\r\n\t@Path( &quot;execute&quot; )\r\n\t@Produces( &quot;application/json&quot; )\r\n\tMyObject execute( MyObject myObject );\r\n\r\nThe restlet library does this quite simply, by adding the XStream dependency to your path it &quot;just works&quot;. Does CXF something similar?\r\n\r\n**EDIT #1:**\r\n\r\nI&#39;ve posted this as a feature improvement to the CXF issue management system [here][1]. I can only hope this will get attended to.\r\n\r\n\r\n  [1]: https://issues.apache.org/jira/browse/CXF-3617","title":"CXF: No message body writer found for class - automatically mapping non-simple resources","body":"<p>I am using the CXF rest client which works well for simple data types (eg: Strings, ints). However, when I attempt to use custom Objects I get this:</p>\n\n<pre><code>Exception in thread \"main\" org.apache.cxf.interceptor.Fault: .No message body writer found for class : class com.company.datatype.normal.MyObject.\n    at org.apache.cxf.jaxrs.client.ClientProxyImpl$BodyWriter.handleMessage(ClientProxyImpl.java:523)\n    at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)\n    at org.apache.cxf.jaxrs.client.ClientProxyImpl.doChainedInvocation(ClientProxyImpl.java:438)\n    at org.apache.cxf.jaxrs.client.ClientProxyImpl.invoke(ClientProxyImpl.java:177)\n    at $Proxy13.execute(Unknown Source)\n    at com.company.JaxTestClient.main(JaxTestClient.java:26)\nCaused by: org.apache.cxf.jaxrs.client.ClientWebApplicationException: .No message body writer found for class : class com.company.datatype.normal.MyObject.\n    at org.apache.cxf.jaxrs.client.AbstractClient.reportMessageHandlerProblem(AbstractClient.java:491)\n    at org.apache.cxf.jaxrs.client.AbstractClient.writeBody(AbstractClient.java:401)\n    at org.apache.cxf.jaxrs.client.ClientProxyImpl$BodyWriter.handleMessage(ClientProxyImpl.java:515)\n    ... 5 more\n</code></pre>\n\n<p>I'm calling it like this:</p>\n\n<pre><code>JaxExample jaxExample = JAXRSClientFactory.create( \"http://localhost:8111/\", JaxExample.class );\nMyObject before = ...\nMyObject after = jaxExample.execute( before );\n</code></pre>\n\n<p>Here is the method in the interface:</p>\n\n<pre><code>@POST\n@Path( \"execute\" )\n@Produces( \"application/json\" )\nMyObject execute( MyObject myObject );\n</code></pre>\n\n<p>The restlet library does this quite simply, by adding the XStream dependency to your path it \"just works\". Does CXF something similar?</p>\n\n<p><strong>EDIT #1:</strong></p>\n\n<p>I've posted this as a feature improvement to the CXF issue management system <a href=\"https://issues.apache.org/jira/browse/CXF-3617\" rel=\"noreferrer\">here</a>. I can only hope this will get attended to.</p>\n"},{"tags":["java","unit-testing","timezone"],"answers":[{"comments":[{"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1338469239,"post_id":10834016,"comment_id":14105499,"body_markdown":"I fixed the time strings. They now expect midnight as they should.","body":"I fixed the time strings. They now expect midnight as they should."},{"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1338469381,"post_id":10834016,"comment_id":14105569,"body_markdown":"I don&#39;t want to change the `new DateTime(0L)`. But setting the locale+timezone on the joda-time formatter also fixes the issue.","body":"I don&#39;t want to change the <code>new DateTime(0L)</code>. But setting the locale+timezone on the joda-time formatter also fixes the issue."},{"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"score":0,"creation_date":1338470234,"post_id":10834016,"comment_id":14105937,"body_markdown":"@AaronDigulla: Sure - I was assuming you wanted to just call toString. If you&#39;re going to allow a DateTimeFormatter, life becomes a lot nicer :)","body":"@AaronDigulla: Sure - I was assuming you wanted to just call toString. If you&#39;re going to allow a DateTimeFormatter, life becomes a lot nicer :)"}],"tags":[],"owner":{"account_id":11683,"reputation":1438219,"user_id":22656,"accept_rate":86,"display_name":"Jon Skeet"},"comment_count":3,"down_vote_count":1,"up_vote_count":8,"is_accepted":true,"score":7,"last_activity_date":1338470164,"creation_date":1338468723,"answer_id":10834016,"question_id":10833948,"body_markdown":"By default, a new `SimpleDateFormat` will use the system default time zone. If you want a specific time zone, you should call `setTimeZone` on it:\r\n\r\n    private final static SimpleDateFormat DATE_FORMAT = createFormat();\r\n\r\n    private static SimpleDateFormat createFormat() {\r\n        // Make sure there are no locale-specific nasties, either...\r\n        SimpleDateFormat ret = new SimpleDateFormat(&quot;yyyy.MM.dd&#39;T&#39;HH:mm.ss:SSSZZ&quot;,\r\n                                                    Locale.US);\r\n        ret.setTimeZone(TimeZone.getTimeZone(&quot;Etc/UTC&quot;);\r\n    }\r\n\r\nFor your second test, you&#39;d want to change it to:\r\n\r\n    new DateTime(0L, DateTimeZone.UTC);\r\n\r\nNote that you shouldn&#39;t usually use a static `SimpleDateFormat` variable, as it&#39;s not thread-safe. (Whereas the [Joda Time][1] `DateTimeFormatter` implementation *is* thread-safe.)\r\n\r\n\r\n  [1]: http://joda-time.sf.net","title":"Make unit tests with dates pass in all time zones and with/out DST","body":"<p>By default, a new <code>SimpleDateFormat</code> will use the system default time zone. If you want a specific time zone, you should call <code>setTimeZone</code> on it:</p>\n\n<pre><code>private final static SimpleDateFormat DATE_FORMAT = createFormat();\n\nprivate static SimpleDateFormat createFormat() {\n    // Make sure there are no locale-specific nasties, either...\n    SimpleDateFormat ret = new SimpleDateFormat(\"yyyy.MM.dd'T'HH:mm.ss:SSSZZ\",\n                                                Locale.US);\n    ret.setTimeZone(TimeZone.getTimeZone(\"Etc/UTC\");\n}\n</code></pre>\n\n<p>For your second test, you'd want to change it to:</p>\n\n<pre><code>new DateTime(0L, DateTimeZone.UTC);\n</code></pre>\n\n<p>Note that you shouldn't usually use a static <code>SimpleDateFormat</code> variable, as it's not thread-safe. (Whereas the <a href=\"http://joda-time.sf.net\" rel=\"noreferrer\">Joda Time</a> <code>DateTimeFormatter</code> implementation <em>is</em> thread-safe.)</p>\n"},{"comments":[{"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":1,"creation_date":1459070899,"post_id":36194014,"comment_id":60121408,"body_markdown":"That will ignore the whole test.","body":"That will ignore the whole test."}],"tags":[],"owner":{"account_id":3819165,"reputation":1091,"user_id":3167672,"display_name":"VinhNT"},"comment_count":1,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1458798573,"creation_date":1458798573,"answer_id":36194014,"question_id":10833948,"body_markdown":"Or you can compare the date and put \r\n\r\n    @Ignore(&quot;Timezone issues&quot;)\r\n    @Test\r\n\r\nIn your unit-test","title":"Make unit tests with dates pass in all time zones and with/out DST","body":"<p>Or you can compare the date and put </p>\n\n<pre><code>@Ignore(\"Timezone issues\")\n@Test\n</code></pre>\n\n<p>In your unit-test</p>\n"}],"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6635,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":10834016,"answer_count":2,"score":4,"last_activity_date":1671819942,"creation_date":1338468501,"question_id":10833948,"body_markdown":"How do I make this unit test pass in all time zones independent of whether DST is active or not?\r\n\r\n\r\n    import static org.junit.Assert.*;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import org.joda.time.DateTime;\r\n    import org.junit.Test;\r\n    \r\n    public class TimeZoneTest {\r\n    \r\n        private final static SimpleDateFormat DATE_FORMAT = new SimpleDateFormat( &quot;yyyy.MM.dd&#39;T&#39;HH:mm.ss:SSSZZ&quot; );\r\n        \r\n        @Test\r\n        public void testUtilDateMillis() throws Exception {\r\n            assertEquals( &quot;1970.01.01T00:00.00:000+0000&quot;, DATE_FORMAT.format( new Date( 0L ) ) );\r\n        }\r\n        \r\n        @Test\r\n        public void testDateTimeMillis() throws Exception {\r\n            assertEquals( &quot;1970-01-01T00:00:00.000+00:00&quot;, new DateTime( 0L ).toString() );\r\n        }\r\n    }\r\n\r\n","title":"Make unit tests with dates pass in all time zones and with/out DST","body":"<p>How do I make this unit test pass in all time zones independent of whether DST is active or not?</p>\n\n<pre><code>import static org.junit.Assert.*;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport org.joda.time.DateTime;\nimport org.junit.Test;\n\npublic class TimeZoneTest {\n\n    private final static SimpleDateFormat DATE_FORMAT = new SimpleDateFormat( \"yyyy.MM.dd'T'HH:mm.ss:SSSZZ\" );\n\n    @Test\n    public void testUtilDateMillis() throws Exception {\n        assertEquals( \"1970.01.01T00:00.00:000+0000\", DATE_FORMAT.format( new Date( 0L ) ) );\n    }\n\n    @Test\n    public void testDateTimeMillis() throws Exception {\n        assertEquals( \"1970-01-01T00:00:00.000+00:00\", new DateTime( 0L ).toString() );\n    }\n}\n</code></pre>\n"},{"tags":["java","web-services","cxfrs"],"comments":[{"owner":{"account_id":162900,"reputation":2068,"user_id":384673,"accept_rate":64,"display_name":"Yazan Jaber"},"score":0,"creation_date":1329396678,"post_id":9311396,"comment_id":132187710,"body_markdown":"See [this](https://stackoverflow.com/questions/1603404/using-jaxb-to-unmarshal-marshal-a-liststring), Its JAXB thats giving you problems, it doesn&#39;t know how to unmarshal/marshal a List&lt;String&gt;.","body":"See <a href=\"https://stackoverflow.com/questions/1603404/using-jaxb-to-unmarshal-marshal-a-liststring\">this</a>, Its JAXB thats giving you problems, it doesn&#39;t know how to unmarshal/marshal a List&lt;String&gt;."},{"owner":{"account_id":1293616,"reputation":5058,"user_id":1245231,"display_name":"petrsyn"},"score":0,"creation_date":1434016262,"post_id":9311396,"comment_id":132187707,"body_markdown":"I&#39;ve solved it using JacksonJaxbJsonProvider. No Java code needs to be modified. Just few changes in Spring `context.xml` and Maven `pom.xml`, see https://stackoverflow.com/a/30777172/1245231","body":"I&#39;ve solved it using JacksonJaxbJsonProvider. No Java code needs to be modified. Just few changes in Spring <code>context.xml</code> and Maven <code>pom.xml</code>, see <a href=\"https://stackoverflow.com/a/30777172/1245231\">stackoverflow.com/a/30777172/1245231</a>"}],"answers":[{"comments":[{"owner":{"account_id":2264130,"reputation":38917,"user_id":1993366,"accept_rate":86,"display_name":"vikingsteve"},"score":2,"creation_date":1383664190,"post_id":9311666,"comment_id":29421076,"body_markdown":"And make sure that `Container` has a default, no-args constructor :)","body":"And make sure that <code>Container</code> has a default, no-args constructor :)"}],"tags":[],"owner":{"account_id":12693,"reputation":6851,"user_id":25141,"accept_rate":67,"display_name":"Urs Reupke"},"comment_count":1,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1329397024,"creation_date":1329397024,"answer_id":9311666,"question_id":9311396,"body_markdown":"To return a list, best wrap it into a container annotated ``@XmlRootElement`` and give that container your list as a field, annotated as ``@XmlElement``.\r\n\r\nLike so:\r\n\r\n    @XmlRootElement\r\n    public class Container {\r\n        @XmlElement\r\n        public List yourlist;\r\n    }\r\n\r\n","title":"No message body writer has been found for response class ArrayList","body":"<p>To return a list, best wrap it into a container annotated <code>@XmlRootElement</code> and give that container your list as a field, annotated as <code>@XmlElement</code>.</p>\n\n<p>Like so:</p>\n\n<pre><code>@XmlRootElement\npublic class Container {\n    @XmlElement\n    public List yourlist;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":100576,"reputation":1195,"user_id":271051,"accept_rate":64,"display_name":"Peter De Winter"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1384374982,"creation_date":1384374982,"answer_id":19963807,"question_id":9311396,"body_markdown":"Try using the GenericEntity.\r\n\r\n    Response.ok(new GenericEntity&lt;List&lt;String&gt;&gt;(yourCollectionOfStrings) {}).build();","title":"No message body writer has been found for response class ArrayList","body":"<p>Try using the GenericEntity.</p>\n\n<pre><code>Response.ok(new GenericEntity&lt;List&lt;String&gt;&gt;(yourCollectionOfStrings) {}).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2078662,"reputation":2458,"user_id":1851286,"display_name":"Oleksii Kyslytsyn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458736235,"creation_date":1458736235,"answer_id":36178261,"question_id":9311396,"body_markdown":"I have added the List&lt;String&gt; to existing object of the project scope of domain layer. \r\n\r\nIt was more contextual for project and also worked out-of-the box: no needed to test XmlRootElement, but add the test data+logic for List&lt;String&gt; of existing test case for that object.","title":"No message body writer has been found for response class ArrayList","body":"<p>I have added the List to existing object of the project scope of domain layer. </p>\n\n<p>It was more contextual for project and also worked out-of-the box: no needed to test XmlRootElement, but add the test data+logic for List of existing test case for that object.</p>\n"},{"tags":[],"owner":{"account_id":14477895,"reputation":1,"user_id":10458019,"display_name":"syam"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1538673592,"creation_date":1538673282,"answer_id":52652208,"question_id":9311396,"body_markdown":"Add this Maven dependency:\r\n\r\n&lt;!-- language: lang-xml --&gt;\r\n\r\n\t&lt;init-param&gt;\r\n        &lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\r\n        &lt;param-value&gt;org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider&lt;/param-value&gt;\r\n\t&lt;/init-param&gt;\r\n\r\n","title":"No message body writer has been found for response class ArrayList","body":"<p>Add this Maven dependency:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;init-param&gt;\n    &lt;param-name&gt;jaxrs.providers&lt;/param-name&gt;\n    &lt;param-value&gt;org.codehaus.jackson.jaxrs.JacksonJaxbJsonProvider&lt;/param-value&gt;\n&lt;/init-param&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3567133,"reputation":623,"user_id":2978362,"accept_rate":67,"display_name":"vsriram92"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671819859,"creation_date":1671818600,"answer_id":74902709,"question_id":9311396,"body_markdown":"Having both org.codehaus.jackson and com.fasterxml.jackson dependencies in a same project will cause this No message body writer issue irrespective of annotations.\r\n\r\nIn my case, the Bean was marshal&#39;d by com.fasterxml.jackson -&gt; jackson-jaxrs-json-provider and unmarshall&#39;d by org.codehaus.jackson -&gt; jackson-jaxrs\r\n\r\nSo removing / updating all the references from org.codehaus.jackson to com.fasterxml.jackson fixed this issue.\r\n\r\nI have updated it in \r\ncxf-servlet.xml, pom.xml and in all java class imports.\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\r\n        &lt;version&gt;3.5.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n         &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\r\n         &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\r\n         &lt;version&gt;2.13.4&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n\r\nProvider in cxf-servlet.xml\r\n\r\n    &lt;jaxrs:providers&gt;\r\n       &lt;bean class=&quot;com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider&quot; /&gt;\r\n    &lt;/jaxrs:providers&gt;","title":"No message body writer has been found for response class ArrayList","body":"<p>Having both org.codehaus.jackson and com.fasterxml.jackson dependencies in a same project will cause this No message body writer issue irrespective of annotations.</p>\n<p>In my case, the Bean was marshal'd by com.fasterxml.jackson -&gt; jackson-jaxrs-json-provider and unmarshall'd by org.codehaus.jackson -&gt; jackson-jaxrs</p>\n<p>So removing / updating all the references from org.codehaus.jackson to com.fasterxml.jackson fixed this issue.</p>\n<p>I have updated it in\ncxf-servlet.xml, pom.xml and in all java class imports.</p>\n<p>pom.xml</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.cxf&lt;/groupId&gt;\n    &lt;artifactId&gt;cxf-rt-rs-extension-providers&lt;/artifactId&gt;\n    &lt;version&gt;3.5.2&lt;/version&gt;\n&lt;/dependency&gt;\n\n&lt;dependency&gt;\n     &lt;groupId&gt;com.fasterxml.jackson.jaxrs&lt;/groupId&gt;\n     &lt;artifactId&gt;jackson-jaxrs-json-provider&lt;/artifactId&gt;\n     &lt;version&gt;2.13.4&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Provider in cxf-servlet.xml</p>\n<pre><code>&lt;jaxrs:providers&gt;\n   &lt;bean class=&quot;com.fasterxml.jackson.jaxrs.json.JacksonJsonProvider&quot; /&gt;\n&lt;/jaxrs:providers&gt;\n</code></pre>\n"}],"owner":{"account_id":263153,"reputation":953,"user_id":548543,"accept_rate":39,"display_name":"aswininayak"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53916,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":9311666,"answer_count":5,"score":13,"last_activity_date":1671819859,"creation_date":1329395868,"question_id":9311396,"body_markdown":"While I am trying to return List&lt;String&gt; its throwing No message body writer has been found for response class ArrayList.\r\n\r\nI have code as follows:\r\n\r\n    @POST \r\n    @Path(&quot;/{scope}/{application}/tables&quot;)\r\n    @Produces(&quot;application/xml&quot;)\r\n    public List&lt;String&gt; getTableNames(@PathParam(&quot;scope&quot;) String scope,\r\n        @PathParam(&quot;application&quot;) String application, Request request) {\r\n\r\n        // For example, I am returning a list of String\r\n        return new ArrayList&lt;String&gt;(4);\r\n    }\r\n\r\nPlease help me. Thanks in advance","title":"No message body writer has been found for response class ArrayList","body":"<p>While I am trying to return List its throwing No message body writer has been found for response class ArrayList.</p>\n\n<p>I have code as follows:</p>\n\n<pre><code>@POST \n@Path(\"/{scope}/{application}/tables\")\n@Produces(\"application/xml\")\npublic List&lt;String&gt; getTableNames(@PathParam(\"scope\") String scope,\n    @PathParam(\"application\") String application, Request request) {\n\n    // For example, I am returning a list of String\n    return new ArrayList&lt;String&gt;(4);\n}\n</code></pre>\n\n<p>Please help me. Thanks in advance</p>\n"},{"tags":["java","unit-testing","timezone","jodatime","dst"],"comments":[{"owner":{"account_id":323395,"reputation":124305,"user_id":643383,"accept_rate":79,"display_name":"Caleb"},"score":0,"creation_date":1338612218,"post_id":10846704,"comment_id":14146758,"body_markdown":"possible duplicate of [Make unit tests with dates pass in all time zones and with/out DST](http://stackoverflow.com/questions/10833948/make-unit-tests-with-dates-pass-in-all-time-zones-and-with-out-dst)","body":"possible duplicate of <a href=\"http://stackoverflow.com/questions/10833948/make-unit-tests-with-dates-pass-in-all-time-zones-and-with-out-dst\">Make unit tests with dates pass in all time zones and with/out DST</a>"},{"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":0,"creation_date":1338809038,"post_id":10846704,"comment_id":14179475,"body_markdown":"It&#39;s not a duplicate; it&#39;s a followup.","body":"It&#39;s not a duplicate; it&#39;s a followup."}],"answers":[{"comments":[{"owner":{"account_id":135174,"reputation":17875,"user_id":337819,"accept_rate":68,"display_name":"Marvo"},"score":1,"creation_date":1380832404,"post_id":10854527,"comment_id":28357744,"body_markdown":"I&#39;m not sure this will work independently of Daylight Savings Time.  For instance, right now I&#39;m getting the time zone for &quot;US/Pacific.&quot;  And right now, because we&#39;re still in DST, I get back an offset of -25200.  But when we switch back to standard time in November, the same code will return -28800.  Am I mistaken about that?","body":"I&#39;m not sure this will work independently of Daylight Savings Time.  For instance, right now I&#39;m getting the time zone for &quot;US/Pacific.&quot;  And right now, because we&#39;re still in DST, I get back an offset of -25200.  But when we switch back to standard time in November, the same code will return -28800.  Am I mistaken about that?"}],"tags":[],"owner":{"account_id":1165262,"reputation":29315,"user_id":1143825,"accept_rate":94,"display_name":"Ilya"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1338811456,"creation_date":1338570197,"answer_id":10854527,"question_id":10846704,"body_markdown":"    for (String zoneId : DateTimeZone.getAvailableIDs())\r\n    {\r\n       DateTime testedDate1;\r\n       DateTime testedDate2;\r\n       try\r\n       {\r\n          final DateTimeZone tz = DateTimeZone.forID(zoneId);\r\n          // your test with testedDate1 and testedDate2 \r\n       }\r\n       catch (final IllegalArgumentException e)\r\n       {\r\n          // catching DST problem\r\n          testedDate1 = testetDate1.plusHours(1);\r\n          testedDate2 = testetDate2.plusHours(1);\r\n          // repeat your test for this dates\r\n       }\r\n    }\r\n\r\nChange for single test\r\n\r\n    DateTimeZone default;  \r\n    \r\n    DateTimeZone testedTZ;\r\n    \r\n    @Before\r\n    public void setUp()\r\n    {\r\n       default = GateTimeZone.getDefault();\r\n       DateTimeZone.setDefault\r\n    }  \r\n    \r\n    @After\r\n    public void tearDown()\r\n    {\r\n       default = GateTimeZone.setDefault();\r\n       DateTimeZone.setDefault(testedTZ)\r\n    }   \r\n      \r\n    @Test\r\n    public void test()\r\n    {\r\n    //...\r\n    }\r\n\r\n","title":"How do I write unit tests to make sure my date/time based code works for all time zones and with/out DST?","body":"<pre><code>for (String zoneId : DateTimeZone.getAvailableIDs())\n{\n   DateTime testedDate1;\n   DateTime testedDate2;\n   try\n   {\n      final DateTimeZone tz = DateTimeZone.forID(zoneId);\n      // your test with testedDate1 and testedDate2 \n   }\n   catch (final IllegalArgumentException e)\n   {\n      // catching DST problem\n      testedDate1 = testetDate1.plusHours(1);\n      testedDate2 = testetDate2.plusHours(1);\n      // repeat your test for this dates\n   }\n}\n</code></pre>\n\n<p>Change for single test</p>\n\n<pre><code>DateTimeZone default;  \n\nDateTimeZone testedTZ;\n\n@Before\npublic void setUp()\n{\n   default = GateTimeZone.getDefault();\n   DateTimeZone.setDefault\n}  \n\n@After\npublic void tearDown()\n{\n   default = GateTimeZone.setDefault();\n   DateTimeZone.setDefault(testedTZ)\n}   \n\n@Test\npublic void test()\n{\n//...\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":135368,"reputation":547,"user_id":338193,"accept_rate":83,"display_name":"Spille"},"score":1,"creation_date":1541675400,"post_id":11139732,"comment_id":93301004,"body_markdown":"Nice solution, but I think it can be risky to set the original value back, if you run tests in parallel, as the first test, which finishes, sets the timezone (static field) back for all other tests.","body":"Nice solution, but I think it can be risky to set the original value back, if you run tests in parallel, as the first test, which finishes, sets the timezone (static field) back for all other tests."},{"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"score":1,"creation_date":1548421130,"post_id":11139732,"comment_id":95545275,"body_markdown":"@CSpille Correct. If you want to run tests in parallel, you have to group the tests which need this rule somehow and execute the rule around the group.","body":"@CSpille Correct. If you want to run tests in parallel, you have to group the tests which need this rule somehow and execute the rule around the group."}],"tags":[],"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":2,"down_vote_count":0,"up_vote_count":32,"is_accepted":true,"score":32,"last_activity_date":1548421205,"creation_date":1340286799,"answer_id":11139732,"question_id":10846704,"body_markdown":"You can use a `@Rule` for this. Here is the code for the rule:\r\n\r\n    import org.joda.time.DateTimeZone;\r\n    import org.junit.rules.TestWatcher;\r\n    import org.junit.runner.Description;\r\n    \r\n    public class UTCRule extends TestWatcher {\r\n    \r\n        private DateTimeZone origDefault = DateTimeZone.getDefault();\r\n        \r\n        @Override\r\n        protected void starting( Description description ) {\r\n            DateTimeZone.setDefault( DateTimeZone.UTC );\r\n        }\r\n    \r\n        @Override\r\n        protected void finished( Description description ) {\r\n            DateTimeZone.setDefault( origDefault );\r\n        }\r\n    }\r\n\r\nYou can use the rule like this:\r\n\r\n    public class SomeTest {\r\n    \r\n        @Rule\r\n        public UTCRule utcRule = new UTCRule();\r\n    \r\n        ....\r\n    }\r\n\r\nThis will change the current time zone to UTC before each test in `SomeTest` will be executed and it will restore the default time zone after each test.\r\n\r\nIf you want to check several time zones, use a rule like this one:\r\n\r\n    import org.joda.time.DateTimeZone;\r\n    import org.junit.rules.TestWatcher;\r\n    import org.junit.runner.Description;\r\n    \r\n    public class TZRule extends TestWatcher {\r\n    \r\n        private DateTimeZone origDefault = DateTimeZone.getDefault();\r\n\r\n        private DateTimeZone tz;\r\n\r\n        public TZRule( DateTimeZone tz ) {\r\n            this.tz = tz;\r\n        }\r\n        \r\n        @Override\r\n        protected void starting( Description description ) {\r\n            DateTimeZone.setDefault( tz );\r\n        }\r\n    \r\n        @Override\r\n        protected void finished( Description description ) {\r\n            DateTimeZone.setDefault( origDefault );\r\n        }\r\n    }\r\n\r\nPut all the affected tests in an abstract base class `AbstractTZTest` and extend it:\r\n\r\n    public class UTCTest extends AbstractTZTest {\r\n        @Rule public TZRule tzRule = new TZRule( DateTimeZone.UTC );\r\n    }\r\n\r\nThat will execute all tests in `AbstractTZTest` with UTC. For each time zone that you want to test, you&#39;ll need another class:\r\n\r\n    public class UTCTest extends AbstractTZTest {\r\n        @Rule public TZRule tzRule = new TZRule( DateTimeZone.forID( &quot;...&quot; );\r\n    }\r\n\r\nSince test cases are inherited, that&#39;s all - you just need to define the rule.\r\n\r\nIn a similar way, you can shift the system clock. Use a rule that calls `DateTimeUtils.setCurrentMillisProvider(...)` to simulate that the test runs at a certain time and `DateTimeUtils.setCurrentMillisSystem()` to restore the defaults.\r\n\r\nNote: Your provider will need a way to make the clock tick or all new `DateTime` instances will have the same value. I often advance the value by a millisecond each time `getMillis()` is called.\r\n\r\nNote 2: That only works with joda-time. It doesn&#39;t affect `new java.util.Date()`.\r\n\r\nNote 3: You can&#39;t run these tests in parallel anymore. They must run in sequence or one of them will most likely restore the default timezone while another test is running.","title":"How do I write unit tests to make sure my date/time based code works for all time zones and with/out DST?","body":"<p>You can use a <code>@Rule</code> for this. Here is the code for the rule:</p>\n\n<pre><code>import org.joda.time.DateTimeZone;\nimport org.junit.rules.TestWatcher;\nimport org.junit.runner.Description;\n\npublic class UTCRule extends TestWatcher {\n\n    private DateTimeZone origDefault = DateTimeZone.getDefault();\n\n    @Override\n    protected void starting( Description description ) {\n        DateTimeZone.setDefault( DateTimeZone.UTC );\n    }\n\n    @Override\n    protected void finished( Description description ) {\n        DateTimeZone.setDefault( origDefault );\n    }\n}\n</code></pre>\n\n<p>You can use the rule like this:</p>\n\n<pre><code>public class SomeTest {\n\n    @Rule\n    public UTCRule utcRule = new UTCRule();\n\n    ....\n}\n</code></pre>\n\n<p>This will change the current time zone to UTC before each test in <code>SomeTest</code> will be executed and it will restore the default time zone after each test.</p>\n\n<p>If you want to check several time zones, use a rule like this one:</p>\n\n<pre><code>import org.joda.time.DateTimeZone;\nimport org.junit.rules.TestWatcher;\nimport org.junit.runner.Description;\n\npublic class TZRule extends TestWatcher {\n\n    private DateTimeZone origDefault = DateTimeZone.getDefault();\n\n    private DateTimeZone tz;\n\n    public TZRule( DateTimeZone tz ) {\n        this.tz = tz;\n    }\n\n    @Override\n    protected void starting( Description description ) {\n        DateTimeZone.setDefault( tz );\n    }\n\n    @Override\n    protected void finished( Description description ) {\n        DateTimeZone.setDefault( origDefault );\n    }\n}\n</code></pre>\n\n<p>Put all the affected tests in an abstract base class <code>AbstractTZTest</code> and extend it:</p>\n\n<pre><code>public class UTCTest extends AbstractTZTest {\n    @Rule public TZRule tzRule = new TZRule( DateTimeZone.UTC );\n}\n</code></pre>\n\n<p>That will execute all tests in <code>AbstractTZTest</code> with UTC. For each time zone that you want to test, you'll need another class:</p>\n\n<pre><code>public class UTCTest extends AbstractTZTest {\n    @Rule public TZRule tzRule = new TZRule( DateTimeZone.forID( \"...\" );\n}\n</code></pre>\n\n<p>Since test cases are inherited, that's all - you just need to define the rule.</p>\n\n<p>In a similar way, you can shift the system clock. Use a rule that calls <code>DateTimeUtils.setCurrentMillisProvider(...)</code> to simulate that the test runs at a certain time and <code>DateTimeUtils.setCurrentMillisSystem()</code> to restore the defaults.</p>\n\n<p>Note: Your provider will need a way to make the clock tick or all new <code>DateTime</code> instances will have the same value. I often advance the value by a millisecond each time <code>getMillis()</code> is called.</p>\n\n<p>Note 2: That only works with joda-time. It doesn't affect <code>new java.util.Date()</code>.</p>\n\n<p>Note 3: You can't run these tests in parallel anymore. They must run in sequence or one of them will most likely restore the default timezone while another test is running.</p>\n"}],"owner":{"account_id":15903,"reputation":323453,"user_id":34088,"accept_rate":77,"display_name":"Aaron Digulla"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19976,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":11139732,"answer_count":2,"score":25,"last_activity_date":1671819814,"creation_date":1338538376,"question_id":10846704,"body_markdown":"I&#39;m using JodaTime 2.1 and I&#39;m looking for a pattern to unit test code which performs date/time operations to make sure it behaves well for all time zones and independent of [DST][1].\r\n\r\nSpecifically:\r\n\r\n1. How can I mock the system clock (so I don&#39;t have to mock all the places where I call `new DateTime()` to get the current time)\r\n1. How can I do the same for the default time zone?\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Daylight_saving_time","title":"How do I write unit tests to make sure my date/time based code works for all time zones and with/out DST?","body":"<p>I'm using JodaTime 2.1 and I'm looking for a pattern to unit test code which performs date/time operations to make sure it behaves well for all time zones and independent of <a href=\"https://en.wikipedia.org/wiki/Daylight_saving_time\" rel=\"noreferrer\">DST</a>.</p>\n\n<p>Specifically:</p>\n\n<ol>\n<li>How can I mock the system clock (so I don't have to mock all the places where I call <code>new DateTime()</code> to get the current time)</li>\n<li>How can I do the same for the default time zone?</li>\n</ol>\n"},{"tags":["java","android","uri"],"comments":[{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1671738875,"post_id":74893058,"comment_id":132167922,"body_markdown":"Why do you wanna create a new uri? Use the first one. All your trying is false.","body":"Why do you wanna create a new uri? Use the first one. All your trying is false."},{"owner":{"account_id":14531956,"reputation":3,"user_id":10771894,"display_name":"Backfisch Inderjemmel"},"score":0,"creation_date":1671822505,"post_id":74893058,"comment_id":132184796,"body_markdown":"I want to create a duplicate of that Uri for testing purposes. In the end I need to let the user pick a file and then depending on the result of a qr code a different file that&#39;s named similar to the first one has to be opened. So I want to get the path of the first Uri then slightly change it and create another Uri with it.","body":"I want to create a duplicate of that Uri for testing purposes. In the end I need to let the user pick a file and then depending on the result of a qr code a different file that&#39;s named similar to the first one has to be opened. So I want to get the path of the first Uri then slightly change it and create another Uri with it."},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1671835807,"post_id":74893058,"comment_id":132187238,"body_markdown":"That will not go for most of the uris are not decodable to a file system path and if you could you would have no access to that path. And just creating another uri makes no sense. What do you want to do with the file behind the new uri?","body":"That will not go for most of the uris are not decodable to a file system path and if you could you would have no access to that path. And just creating another uri makes no sense. What do you want to do with the file behind the new uri?"},{"owner":{"account_id":14531956,"reputation":3,"user_id":10771894,"display_name":"Backfisch Inderjemmel"},"score":0,"creation_date":1671917892,"post_id":74893058,"comment_id":132197638,"body_markdown":"I need to make an intent with the new file and open it in Google Sheets","body":"I need to make an intent with the new file and open it in Google Sheets"},{"owner":{"account_id":16768304,"reputation":8503,"user_id":12121419,"display_name":"blackapps"},"score":0,"creation_date":1671971324,"post_id":74893058,"comment_id":132202302,"body_markdown":"If you have a new file and you want to serve it then you have to use your own file provider. You cannot just change the file name of a valid uri and expect that the provider will serve that other file. Use FileProvider class to serve your file.","body":"If you have a new file and you want to serve it then you have to use your own file provider. You cannot just change the file name of a valid uri and expect that the provider will serve that other file. Use FileProvider class to serve your file."}],"owner":{"account_id":14531956,"reputation":3,"user_id":10771894,"display_name":"Backfisch Inderjemmel"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671819682,"creation_date":1671737316,"question_id":74893058,"body_markdown":"I have a Uri of a File that the User can pick with a `FilePicker`.\r\nI can make an intent with this Uri and Google Sheets opens the file successfully.\r\n\r\nI now get the Path of the `pickedUri` and create a new Uri with it and try to open it. This does not work.\r\n\r\n\r\nIf I compare the paths of the URIs, they are identical but if I compare the encoded Paths then they don&#39;t match.\r\n\r\n```\r\nfilepath = pickedUri.getPath();\r\nUri testUri = Uri.fromFile(new File(filepath));\r\n```\r\n\r\nand \r\n\r\n```\r\nfilepath = pickedUri.getPath();\r\nUri testUri = Uri.parse(&quot;file://&quot; + filepath);\r\n```","title":"Uri from Filepath returns false EncodedPath","body":"<p>I have a Uri of a File that the User can pick with a <code>FilePicker</code>.\nI can make an intent with this Uri and Google Sheets opens the file successfully.</p>\n<p>I now get the Path of the <code>pickedUri</code> and create a new Uri with it and try to open it. This does not work.</p>\n<p>If I compare the paths of the URIs, they are identical but if I compare the encoded Paths then they don't match.</p>\n<pre><code>filepath = pickedUri.getPath();\nUri testUri = Uri.fromFile(new File(filepath));\n</code></pre>\n<p>and</p>\n<pre><code>filepath = pickedUri.getPath();\nUri testUri = Uri.parse(&quot;file://&quot; + filepath);\n</code></pre>\n"},{"tags":["java","xpath"],"comments":[{"owner":{"account_id":13823959,"reputation":5465,"user_id":9978746,"display_name":"E.Wiest"},"score":0,"creation_date":1671114059,"post_id":74714664,"comment_id":132031941,"body_markdown":"Could you use a wildcard like `@XmlPath(&quot;reports/*/ReportName/text()&quot;)` ? Or should it be more specific ?","body":"Could you use a wildcard like <code>@XmlPath(&quot;reports&#47;*&#47;ReportName&#47;text()&quot;)</code> ? Or should it be more specific ?"}],"answers":[{"tags":[],"owner":{"account_id":10594731,"reputation":43,"user_id":7803883,"display_name":"Mayur Punjabi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671818798,"creation_date":1671818798,"answer_id":74902739,"question_id":74714664,"body_markdown":"xpath `name` function can be used to compare the node/tag. Reference - https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/name\r\n\r\nYou can use `name` function to check if the node/tag contains &#39;FATHER&#39;.\r\n\r\nYour xpath will be - `reports/*[contains(name(),&#39;FATHER&#39;)]/ReportName/text()`.\r\n\r\nIf &#39;FATHER&#39; is supposed to be at the beginning, then you can also use - `reports/*[starts-with(name(),&#39;FATHER&#39;)]/ReportName/text()`.\r\n\r\n","title":"XPath and @XmlPath: same path with different element node name in Java","body":"<p>xpath <code>name</code> function can be used to compare the node/tag. Reference - <a href=\"https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/name\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/XPath/Functions/name</a></p>\n<p>You can use <code>name</code> function to check if the node/tag contains 'FATHER'.</p>\n<p>Your xpath will be - <code>reports/*[contains(name(),'FATHER')]/ReportName/text()</code>.</p>\n<p>If 'FATHER' is supposed to be at the beginning, then you can also use - <code>reports/*[starts-with(name(),'FATHER')]/ReportName/text()</code>.</p>\n"}],"owner":{"account_id":10294346,"reputation":1237,"user_id":7595061,"accept_rate":53,"display_name":"Andrea Bevilacqua"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671818798,"creation_date":1670406692,"question_id":74714664,"body_markdown":"I am using in Java the annotation @XmlPath from the org.eclipse.persistence.oxm\r\nI need to map the same field but with different father element node name.\r\nExample:\r\n\r\n\t@XmlPath(&quot;reports/FATHER1/ReportName/text()&quot;)\r\n\tpublic void setReportName(String reportName) {\r\n\t\tthis.reportName = reportName;\r\n\t}\r\n\r\n\t@XmlPath(&quot;reports/FATHER2/ReportName/text()&quot;)\r\n\tpublic void setReportName(String reportName) {\r\n\t\tthis.reportName = reportName;\r\n\t}\r\n\r\nI would like to have only one method setReportName and use a variable expression instead of &quot;FATHER1&quot; or &quot;FATHER2&quot; like:\r\n\r\n\t@XmlPath(&quot;reports/&quot;takeEveryVariableFatherExpression&quot;/ReportName/text()&quot;)\r\n\tpublic void setReportName(String reportName) {\r\n\t\tthis.reportName = reportName;\r\n\t}","title":"XPath and @XmlPath: same path with different element node name in Java","body":"<p>I am using in Java the annotation @XmlPath from the org.eclipse.persistence.oxm\nI need to map the same field but with different father element node name.\nExample:</p>\n<pre><code>@XmlPath(&quot;reports/FATHER1/ReportName/text()&quot;)\npublic void setReportName(String reportName) {\n    this.reportName = reportName;\n}\n\n@XmlPath(&quot;reports/FATHER2/ReportName/text()&quot;)\npublic void setReportName(String reportName) {\n    this.reportName = reportName;\n}\n</code></pre>\n<p>I would like to have only one method setReportName and use a variable expression instead of &quot;FATHER1&quot; or &quot;FATHER2&quot; like:</p>\n<pre><code>@XmlPath(&quot;reports/&quot;takeEveryVariableFatherExpression&quot;/ReportName/text()&quot;)\npublic void setReportName(String reportName) {\n    this.reportName = reportName;\n}\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":1,"creation_date":1671819429,"post_id":74902719,"comment_id":132184132,"body_markdown":"Step 1 is to stop ignoring errors and implement `onCancelled`. At its minimum that should be `public void onCancelled(@NonNull DatabaseError databaseError) { throw databaseError.toException(); }`. --- After that, it&#39;ll be easier to help if you debug locally and tell us the results. If you set a breakpoint on each line of the code you shared, run the code in a debugger, and then check the value of each variable on each line, which is the **first** line that doesn&#39;t do what you expect it to do?","body":"Step 1 is to stop ignoring errors and implement <code>onCancelled</code>. At its minimum that should be <code>public void onCancelled(@NonNull DatabaseError databaseError) { throw databaseError.toException(); }</code>. --- After that, it&#39;ll be easier to help if you debug locally and tell us the results. If you set a breakpoint on each line of the code you shared, run the code in a debugger, and then check the value of each variable on each line, which is the <b>first</b> line that doesn&#39;t do what you expect it to do?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1671868202,"post_id":74902719,"comment_id":132190076,"body_markdown":"Please edit your question and add the information Frank asked for, and please also respond using @.","body":"Please edit your question and add the information Frank asked for, and please also respond using @."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671912824,"post_id":74902719,"comment_id":132196867,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":21329131,"reputation":1,"user_id":20849081,"display_name":"leo leo"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671818669,"creation_date":1671818669,"question_id":74902719,"body_markdown":"I have a search written via order by.\r\nI have 6 buttons (in the future checkboxes) that filter the contents of the view by category.\r\nButtons are described in a similar way to search.\r\nHow to write search and filter correctly in order to synchronize the work of both checkboxes and the search line, so as not to prescribe each script separately.\r\n\r\nsearch code\r\n\r\n```\r\nprivate void search(String s) {\r\n    Query query = ProductsRef.orderByChild(&quot;prodName&quot;)\r\n            .startAt(s)\r\n            .endAt(s + &quot;\\uf8ff&quot;);\r\n\r\n    query.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n            if(snapshot.hasChildren())\r\n            {\r\n                arrayList.clear();\r\n                for(DataSnapshot dss: snapshot.getChildren())\r\n                {\r\n                    final Products product = dss.getValue(Products.class);\r\n                    arrayList.add(product);\r\n                }\r\n                MyAdapter myAdapter = new MyAdapter(getApplicationContext(),arrayList);\r\n                recyclerView.setAdapter(myAdapter);\r\n            }\r\n        }\r\n\r\n        @Override\r\n        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n        }\r\n    });\r\n\r\n}\r\n```\r\n\r\nbutton code\r\n\r\n```\r\nprivate void SortByCat(String u) {\r\n    Query query = ProductsRef.orderByChild(&quot;category&quot;).startAt(u).endAt(u +&quot;\\uf8ff&quot; );\r\n    query.addValueEventListener(new ValueEventListener() {\r\n        @Override\r\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n            if(snapshot.hasChildren())\r\n            {\r\n                arrayList.clear();\r\n                for(DataSnapshot dss: snapshot.getChildren())\r\n                {\r\n                    final Products product = dss.getValue(Products.class);\r\n                    arrayList.add(product);\r\n                }\r\n                MyAdapter myAdapter = new MyAdapter(getApplicationContext(),arrayList);\r\n                recyclerView.setAdapter(myAdapter);\r\n            }\r\n        }\r\n        @Override\r\n        public void onCancelled(@NonNull DatabaseError error) {\r\n        }\r\n    });\r\n}\r\n```\r\n\r\nSearch and buttons work separately, and to be honest, I don’t have enough experience to come up with something more concise than going through all the options for using filters with search.","title":"How to make search with filtering in recyclerView(firebase)?","body":"<p>I have a search written via order by.\nI have 6 buttons (in the future checkboxes) that filter the contents of the view by category.\nButtons are described in a similar way to search.\nHow to write search and filter correctly in order to synchronize the work of both checkboxes and the search line, so as not to prescribe each script separately.</p>\n<p>search code</p>\n<pre><code>private void search(String s) {\n    Query query = ProductsRef.orderByChild(&quot;prodName&quot;)\n            .startAt(s)\n            .endAt(s + &quot;\\uf8ff&quot;);\n\n    query.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            if(snapshot.hasChildren())\n            {\n                arrayList.clear();\n                for(DataSnapshot dss: snapshot.getChildren())\n                {\n                    final Products product = dss.getValue(Products.class);\n                    arrayList.add(product);\n                }\n                MyAdapter myAdapter = new MyAdapter(getApplicationContext(),arrayList);\n                recyclerView.setAdapter(myAdapter);\n            }\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n        }\n    });\n\n}\n</code></pre>\n<p>button code</p>\n<pre><code>private void SortByCat(String u) {\n    Query query = ProductsRef.orderByChild(&quot;category&quot;).startAt(u).endAt(u +&quot;\\uf8ff&quot; );\n    query.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            if(snapshot.hasChildren())\n            {\n                arrayList.clear();\n                for(DataSnapshot dss: snapshot.getChildren())\n                {\n                    final Products product = dss.getValue(Products.class);\n                    arrayList.add(product);\n                }\n                MyAdapter myAdapter = new MyAdapter(getApplicationContext(),arrayList);\n                recyclerView.setAdapter(myAdapter);\n            }\n        }\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n        }\n    });\n}\n</code></pre>\n<p>Search and buttons work separately, and to be honest, I don’t have enough experience to come up with something more concise than going through all the options for using filters with search.</p>\n"},{"tags":["java","apache-spark","rdd","mapper"],"answers":[{"comments":[{"owner":{"account_id":9909961,"reputation":379,"user_id":7337077,"accept_rate":36,"display_name":"Yong Hyun Kwon"},"score":0,"creation_date":1510107880,"post_id":47163135,"comment_id":81290718,"body_markdown":"I wanted to use mapPartition since I have read mapPartition is better in perofmance. Isn&#39;t that so?","body":"I wanted to use mapPartition since I have read mapPartition is better in perofmance. Isn&#39;t that so?"},{"owner":{"account_id":9909961,"reputation":379,"user_id":7337077,"accept_rate":36,"display_name":"Yong Hyun Kwon"},"score":0,"creation_date":1510108216,"post_id":47163135,"comment_id":81290804,"body_markdown":"String[] row = iterator.next().split(&quot;,&quot;); --&gt; where is iterator coming from?","body":"String[] row = iterator.next().split(&quot;,&quot;); --&gt; where is iterator coming from?"},{"owner":{"account_id":12182705,"reputation":10096,"user_id":8893686,"display_name":"Oli"},"score":0,"creation_date":1510124890,"post_id":47163135,"comment_id":81296193,"body_markdown":"I copy pasted the code from the question and forgot to modify that part. I edited my answer. Thanks ;-)","body":"I copy pasted the code from the question and forgot to modify that part. I edited my answer. Thanks ;-)"},{"owner":{"account_id":12182705,"reputation":10096,"user_id":8893686,"display_name":"Oli"},"score":0,"creation_date":1510127808,"post_id":47163135,"comment_id":81297777,"body_markdown":"In case you want to use mapPartition, take an iterator as an input and wrap my function inside a for loop that iterates over all its rows ;-)","body":"In case you want to use mapPartition, take an iterator as an input and wrap my function inside a for loop that iterates over all its rows ;-)"}],"tags":[],"owner":{"account_id":12182705,"reputation":10096,"user_id":8893686,"display_name":"Oli"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671818584,"creation_date":1510072904,"answer_id":47163135,"question_id":47152679,"body_markdown":"According to the need you express, I cannot see why you use `mapPartition` instead of simply `map`. Also another mistake here is that you should be using `flatMapToPair` instead of `mapToPair`.\r\n\r\nTo achieve what you want, your `flatmap` function needs to map a string (e.g. `&quot;0,1,hi,1.0&quot;`) to an iterator of tuples. To do that, you can simply create an `ArrayList` of the results you compute : \r\n\r\n    @Override\r\n    public Iterator&lt;Tuple2&lt;Integer, String&gt;&gt; call(String row) throws Exception {\r\n        String[] split_row = row.split(&quot;,&quot;);\r\n        //create list\r\n        List&lt;Tuple2&lt;Integer, String&gt;&gt; result = new ArrayList&lt;&gt;()\r\n        for(int j = 0; j&lt;split_row.length;j++) {\r\n            if(split_row[j].matches(int_regex)) {\r\n                result.add(new Tuple2(j, &quot;int&quot;));\r\n            } //else ...\r\n        }\r\n        //return the iterator\r\n        return result.iterator();\r\n    }\r\n\r\nIn case you actually need to use mapPartition, you can apply the same logic to your function.\r\n","title":"RDD get type and index of each element","body":"<p>According to the need you express, I cannot see why you use <code>mapPartition</code> instead of simply <code>map</code>. Also another mistake here is that you should be using <code>flatMapToPair</code> instead of <code>mapToPair</code>.</p>\n<p>To achieve what you want, your <code>flatmap</code> function needs to map a string (e.g. <code>&quot;0,1,hi,1.0&quot;</code>) to an iterator of tuples. To do that, you can simply create an <code>ArrayList</code> of the results you compute :</p>\n<pre><code>@Override\npublic Iterator&lt;Tuple2&lt;Integer, String&gt;&gt; call(String row) throws Exception {\n    String[] split_row = row.split(&quot;,&quot;);\n    //create list\n    List&lt;Tuple2&lt;Integer, String&gt;&gt; result = new ArrayList&lt;&gt;()\n    for(int j = 0; j&lt;split_row.length;j++) {\n        if(split_row[j].matches(int_regex)) {\n            result.add(new Tuple2(j, &quot;int&quot;));\n        } //else ...\n    }\n    //return the iterator\n    return result.iterator();\n}\n</code></pre>\n<p>In case you actually need to use mapPartition, you can apply the same logic to your function.</p>\n"}],"owner":{"account_id":9909961,"reputation":379,"user_id":7337077,"accept_rate":36,"display_name":"Yong Hyun Kwon"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":531,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":47163135,"answer_count":1,"score":0,"last_activity_date":1671818584,"creation_date":1510041576,"question_id":47152679,"body_markdown":"I am looking for ways to get type and index of each element in Java.  For instance, suppose there is an RDD \r\n\r\n    [&#39;0,1,hi,1.0&#39;, &#39;2,3,String,String2&#39;, &#39;1.0,2.0,3,String&#39;]\r\n\r\nThen I want\r\n\r\n    [(0, int),(1, int),(2, String),(3, Double),(0, int) ........]\r\nSo that I can reduce by keys and see the data types for each column. I achieved it in python, but not sure about how to do this in Java. Is there any way to do this? Here is how I did it in python\r\n\r\n    def infer_type(partition):\r\n    for row in partition:\r\n        value = &quot;&quot;\r\n        idx = 0\r\n        for i in range(len(row)):\r\n            if row[0] == self.prop.comment:\r\n                break\r\n            if row[i] == self.prop.delimiter or i == (len(row) - 1):\r\n                if i == len(row) - 1:\r\n                    value += str(row[i])\r\n                if bool(value.strip()) == False:\r\n                    yield (idx, &#39;None&#39;)\r\n                elif int_regex_match.match(value):\r\n                    yield (idx, &#39;int&#39;)\r\n                elif float_regex_match.match(value):\r\n                    yield (idx, &#39;float&#39;)\r\n                else:\r\n                    if date_regex_match.match(value):\r\n                        yield (idx, &#39;date&#39;)\r\n                    else:\r\n                        yield (idx, &#39;str&#39;)\r\n                    idx += 1\r\n                    value = &quot;&quot;\r\n            else:\r\n                value += str(row[i])\r\n        rdd = rdd.mapPartitions(infer_type).map(lambda x: ((x[0], x[1]), 1)).reduceByKey(add).map(\r\n        lambda x: (x[0][0], (x[0][1], x[1])))\r\n\r\n\r\n\r\nEDIT : This is what I got upto now. However, I can&#39;t get iterator of tuple. \r\n\r\n    PairFlatMapFunction map = new PairFlatMapFunction&lt;Iterator&lt;String&gt;, Integer, String&gt;(){\r\n    \r\n    \t\t@Override\r\n    \t\tpublic Iterator&lt;Tuple2&lt;Integer, String&gt;&gt; call(Iterator&lt;String&gt; iterator) throws Exception {\r\n    \t\t\t// TODO Auto-generated method stub\r\n                while(iterator.hasNext()) {\r\n                \tString[] row = iterator.next().split(&quot;,&quot;);\r\n                \tfor(int j = 0; j&lt;row.length;j++) {\r\n                \t\tif(row[j].matches(int_regex)) {\r\n                \t\t\tTuple2&lt;Integer, String&gt; result =new Tuple2(j, &quot;int&quot;);\r\n                \t\t\t// return iterator of result..?\r\n                \t\t}else if(row[j].matches(float_regex)) {\r\n                \t\t\tTuple2&lt;Integer, String&gt; result =new Tuple2(j, &quot;float&quot;);\r\n                \t\t\t// return iterator of result..?\r\n                \t\t}else if(row[j].matches(date_regex_match)) {\r\n                \t\t\tTuple2&lt;Integer, String&gt; result =new Tuple2(j, &quot;date&quot;);\r\n                \t\t\t// return iterator of result..?\r\n                \t\t}else {\r\n                \t\t\tTuple2&lt;Integer, String&gt; result =new Tuple2(j, &quot;str&quot;);\r\n                \t\t\t// return iterator of result..?\r\n                \t\t}\r\n                \t}\r\n                }\r\n    \t\t}\r\n     };\r\n    JavaPairRDD pair_rdd = rdd.mapPartitionsToPair(map, false);\r\n\r\n","title":"RDD get type and index of each element","body":"<p>I am looking for ways to get type and index of each element in Java.  For instance, suppose there is an RDD </p>\n\n<pre><code>['0,1,hi,1.0', '2,3,String,String2', '1.0,2.0,3,String']\n</code></pre>\n\n<p>Then I want</p>\n\n<pre><code>[(0, int),(1, int),(2, String),(3, Double),(0, int) ........]\n</code></pre>\n\n<p>So that I can reduce by keys and see the data types for each column. I achieved it in python, but not sure about how to do this in Java. Is there any way to do this? Here is how I did it in python</p>\n\n<pre><code>def infer_type(partition):\nfor row in partition:\n    value = \"\"\n    idx = 0\n    for i in range(len(row)):\n        if row[0] == self.prop.comment:\n            break\n        if row[i] == self.prop.delimiter or i == (len(row) - 1):\n            if i == len(row) - 1:\n                value += str(row[i])\n            if bool(value.strip()) == False:\n                yield (idx, 'None')\n            elif int_regex_match.match(value):\n                yield (idx, 'int')\n            elif float_regex_match.match(value):\n                yield (idx, 'float')\n            else:\n                if date_regex_match.match(value):\n                    yield (idx, 'date')\n                else:\n                    yield (idx, 'str')\n                idx += 1\n                value = \"\"\n        else:\n            value += str(row[i])\n    rdd = rdd.mapPartitions(infer_type).map(lambda x: ((x[0], x[1]), 1)).reduceByKey(add).map(\n    lambda x: (x[0][0], (x[0][1], x[1])))\n</code></pre>\n\n<p>EDIT : This is what I got upto now. However, I can't get iterator of tuple. </p>\n\n<pre><code>PairFlatMapFunction map = new PairFlatMapFunction&lt;Iterator&lt;String&gt;, Integer, String&gt;(){\n\n        @Override\n        public Iterator&lt;Tuple2&lt;Integer, String&gt;&gt; call(Iterator&lt;String&gt; iterator) throws Exception {\n            // TODO Auto-generated method stub\n            while(iterator.hasNext()) {\n                String[] row = iterator.next().split(\",\");\n                for(int j = 0; j&lt;row.length;j++) {\n                    if(row[j].matches(int_regex)) {\n                        Tuple2&lt;Integer, String&gt; result =new Tuple2(j, \"int\");\n                        // return iterator of result..?\n                    }else if(row[j].matches(float_regex)) {\n                        Tuple2&lt;Integer, String&gt; result =new Tuple2(j, \"float\");\n                        // return iterator of result..?\n                    }else if(row[j].matches(date_regex_match)) {\n                        Tuple2&lt;Integer, String&gt; result =new Tuple2(j, \"date\");\n                        // return iterator of result..?\n                    }else {\n                        Tuple2&lt;Integer, String&gt; result =new Tuple2(j, \"str\");\n                        // return iterator of result..?\n                    }\n                }\n            }\n        }\n };\nJavaPairRDD pair_rdd = rdd.mapPartitionsToPair(map, false);\n</code></pre>\n"},{"tags":["java","spring","spring-boot","build","jar"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671817880,"post_id":74902576,"comment_id":132183776,"body_markdown":"Looks like you are running your code against an incompatible java version","body":"Looks like you are running your code against an incompatible java version"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671818067,"post_id":74902576,"comment_id":132183815,"body_markdown":"The method which is metioned in the stacktrace was introduced in java 9","body":"The method which is metioned in the stacktrace was introduced in java 9"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671818109,"post_id":74902576,"comment_id":132183826,"body_markdown":"BTW: Please add the stacktrace as text not as image","body":"BTW: Please add the stacktrace as text not as image"},{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":0,"creation_date":1671818113,"post_id":74902576,"comment_id":132183828,"body_markdown":"And according to the stacktrace you are running your application with Java 1.8","body":"And according to the stacktrace you are running your application with Java 1.8"},{"owner":{"account_id":27337881,"reputation":1,"user_id":20849014,"display_name":"Suhail Ansari"},"score":0,"creation_date":1671821211,"post_id":74902576,"comment_id":132184540,"body_markdown":"Thanks @Jens, it is java version incompatible issue","body":"Thanks @Jens, it is java version incompatible issue"}],"owner":{"account_id":27337881,"reputation":1,"user_id":20849014,"display_name":"Suhail Ansari"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":556,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671818215,"creation_date":1671817622,"question_id":74902576,"body_markdown":"facing NoSuchMethodError, when I run my spring boot(v2.7.2) build jar file on my cmd. It&#39;s works fine on Eclipse IDE\r\n\r\n    @Override\r\n    public void run(String... args) throws Exception {\r\n    \r\n        \ttry {\r\n        \t\tRole role1 = new Role();\r\n        \t\trole1.setId(AppConstants.ADMIN_USER);\r\n        \t\trole1.setName(&quot;ROLE_ADMIN&quot;);\r\n        \r\n        \t\tRole role2 = new Role();\r\n        \t\trole2.setId(AppConstants.NORMAL_USER);\r\n        \t\trole2.setName(&quot;ROLE_NORMAL&quot;);\t\t\r\n        \r\n        \t\tList&lt;Role&gt; roles = List.of(role1, role2); //@line 50\r\n        \r\n        \t\tList&lt;Role&gt; result = this.roleRepo.saveAll(roles);\r\n        \r\n        \t\tresult.forEach(r -&gt; System.out.println(r.getName()));\r\n        \r\n        \t} catch (Exception e) {\r\n        \r\n        \t\te.printStackTrace();\r\n        \t}\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/uEBwT.png","title":"Failed spring boot app with java.lang.NoSuchMethodError: java.util.List.of","body":"<p>facing NoSuchMethodError, when I run my spring boot(v2.7.2) build jar file on my cmd. It's works fine on Eclipse IDE</p>\n<pre><code>@Override\npublic void run(String... args) throws Exception {\n\n        try {\n            Role role1 = new Role();\n            role1.setId(AppConstants.ADMIN_USER);\n            role1.setName(&quot;ROLE_ADMIN&quot;);\n    \n            Role role2 = new Role();\n            role2.setId(AppConstants.NORMAL_USER);\n            role2.setName(&quot;ROLE_NORMAL&quot;);       \n    \n            List&lt;Role&gt; roles = List.of(role1, role2); //@line 50\n    \n            List&lt;Role&gt; result = this.roleRepo.saveAll(roles);\n    \n            result.forEach(r -&gt; System.out.println(r.getName()));\n    \n        } catch (Exception e) {\n    \n            e.printStackTrace();\n        }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/uEBwT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uEBwT.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","netbeans"],"comments":[{"owner":{"account_id":1064245,"reputation":85256,"user_id":1065197,"accept_rate":88,"display_name":"Luiggi Mendoza"},"score":2,"creation_date":1409669603,"post_id":25626339,"comment_id":40036812,"body_markdown":"Looks like you haven&#39;t attached the sources of your library (not even the own Java SE sources).","body":"Looks like you haven&#39;t attached the sources of your library (not even the own Java SE sources)."},{"owner":{"account_id":4973922,"reputation":31,"user_id":4000857,"display_name":"Selene Nox"},"score":0,"creation_date":1409669832,"post_id":25626339,"comment_id":40036946,"body_markdown":"and how would one go about doing that?","body":"and how would one go about doing that?"},{"owner":{"account_id":4256604,"reputation":18866,"user_id":3482140,"accept_rate":83,"display_name":"Am_I_Helpful"},"score":0,"creation_date":1409682406,"post_id":25626339,"comment_id":40043565,"body_markdown":"@SeleneNox-See `Ian Fairman`&#39;s answer.It&#39;ll work out for you!","body":"@SeleneNox-See <code>Ian Fairman</code>&#39;s answer.It&#39;ll work out for you!"}],"answers":[{"tags":[],"owner":{"account_id":162311,"reputation":625,"user_id":383687,"display_name":"Ian Fairman"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1409670298,"creation_date":1409670298,"answer_id":25626599,"question_id":25626339,"body_markdown":"Try Ctrl-0 or from the menu &quot;Window&quot;/&quot;Editor&quot;.","title":"Why Netbeans 8.0 is not showing Source code","body":"<p>Try Ctrl-0 or from the menu \"Window\"/\"Editor\".</p>\n"},{"tags":[],"owner":{"account_id":3512734,"reputation":1562,"user_id":2936675,"accept_rate":89,"display_name":"nwhaught"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1477628575,"creation_date":1477628575,"answer_id":40298003,"question_id":25626339,"body_markdown":"Another possibility is a corrupted userdir. Close NetBeans, remove your userdir, and reopen NetBeans. It will recreate the userdir, and you should have your source tab back. See below, copied from [http://wiki.netbeans.org/FaqWhatIsUserdir][1]\r\n\r\n**NetBeans 7.2 and newer**\r\n\r\nThe default location of the userdir is specific to the given system.\r\nBy default on Windows and Mac OS X the userdir is inside a directory NetBeans in application settings folder (usually at C:\\Users\\&lt;username&gt;\\AppData\\Roaming\\ on Windows 7, and at /Users/&lt;username&gt;/Library/Application Support/ on Mac OS X).\r\n\r\n\r\nOn Unix-like systems the userdir is inside a (hidden) directory called .netbeans in the user&#39;s home directory. The home directory path is ${HOME}.\r\nOn Windows XP system userdir is localised to your language, so in english version it is in: c:\\Documents and Settings\\Your Name\\Application Data\\NetBeans\\7.3\\\r\n\r\n\r\nAs the name suggests, the userdir is unique per user. For each version of NetBeans installed, the userdir will be a unique subdirectory such as NetBeans/&lt;nb-version&gt;.\r\n\r\n\r\nTo find out your exact userdir location, go to the IDE&#39;s main menu, and choose Help &gt; About. (Mac: NetBeans &gt; About NetBeans).\r\n\r\n\r\n  [1]: http://wiki.netbeans.org/FaqWhatIsUserdir","title":"Why Netbeans 8.0 is not showing Source code","body":"<p>Another possibility is a corrupted userdir. Close NetBeans, remove your userdir, and reopen NetBeans. It will recreate the userdir, and you should have your source tab back. See below, copied from <a href=\"http://wiki.netbeans.org/FaqWhatIsUserdir\" rel=\"nofollow\">http://wiki.netbeans.org/FaqWhatIsUserdir</a></p>\n\n<p><strong>NetBeans 7.2 and newer</strong></p>\n\n<p>The default location of the userdir is specific to the given system.\nBy default on Windows and Mac OS X the userdir is inside a directory NetBeans in application settings folder (usually at C:\\Users\\\\AppData\\Roaming\\ on Windows 7, and at /Users//Library/Application Support/ on Mac OS X).</p>\n\n<p>On Unix-like systems the userdir is inside a (hidden) directory called .netbeans in the user's home directory. The home directory path is ${HOME}.\nOn Windows XP system userdir is localised to your language, so in english version it is in: c:\\Documents and Settings\\Your Name\\Application Data\\NetBeans\\7.3\\</p>\n\n<p>As the name suggests, the userdir is unique per user. For each version of NetBeans installed, the userdir will be a unique subdirectory such as NetBeans/.</p>\n\n<p>To find out your exact userdir location, go to the IDE's main menu, and choose Help > About. (Mac: NetBeans > About NetBeans).</p>\n"},{"tags":[],"owner":{"account_id":6931967,"reputation":134,"user_id":5321182,"accept_rate":75,"display_name":"TomateFraiche"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1569529686,"creation_date":1569529686,"answer_id":58124302,"question_id":25626339,"body_markdown":"Window / Reset Windows could be an option\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/JbbLz.png","title":"Why Netbeans 8.0 is not showing Source code","body":"<p>Window / Reset Windows could be an option</p>\n\n<p><a href=\"https://i.stack.imgur.com/JbbLz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JbbLz.png\" alt=\"enter image description here\"></a></p>\n"}],"owner":{"account_id":4973922,"reputation":31,"user_id":4000857,"display_name":"Selene Nox"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8844,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":3,"score":3,"last_activity_date":1671817851,"creation_date":1409669539,"question_id":25626339,"body_markdown":"Okay so the source tab on Netbeans 8.0 shows up on my school computers but not my personal tablet computer. I am frustrated beyond reason because i have no idea how to get my source tabe to appear on my personal computer. Any help beyond uninstalling and reinstalling would be much appreciated as i have tried to uninstall and reinstall. ","title":"Why Netbeans 8.0 is not showing Source code","body":"<p>Okay so the source tab on Netbeans 8.0 shows up on my school computers but not my personal tablet computer. I am frustrated beyond reason because i have no idea how to get my source tabe to appear on my personal computer. Any help beyond uninstalling and reinstalling would be much appreciated as i have tried to uninstall and reinstall. </p>\n"},{"tags":["java","html","spring"],"owner":{"account_id":13429807,"reputation":1816,"user_id":9689945,"display_name":"hhrzc"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671817574,"creation_date":1671106045,"question_id":74811276,"body_markdown":"I try to pass a parameter from the view to the controller, but received the &quot;Whiteble error page&quot;.\r\n\r\nI follow the very simple solution that I have successfully implemented in another project, but I can&#39;t understand why it not working now.\r\n\r\nHTML:\r\n\r\n```html\r\n    &lt;form action=&quot;/admin/block/execute&quot; method=&quot;post&quot;&gt;\r\n        &lt;select name=&quot;user&quot; id=userId required&gt;\r\n            &lt;option th:each=&quot;user: ${users}&quot;&gt;\r\n                &lt;title th:text=&quot;${user}&quot;/&gt;\r\n            &lt;/option&gt;\r\n        &lt;/select&gt;\r\n        &lt;div class=&quot;w3-container w3-margin&quot;&gt;\r\n            &lt;input class=&quot;w3-button w3-blue&quot; type=&quot;submit&quot; value=&quot;Start&quot;/&gt;\r\n        &lt;/div&gt;\r\n    &lt;/form&gt;\r\n\r\n```\r\n\r\ncontroller:\r\n```java\r\n@Controller\r\n@RequestMapping(&quot;/admin/block&quot;)\r\n@AllArgsConstructor\r\n@Slf4j\r\npublic class AdminController {\r\n\r\n    @RequestMapping(value = &quot;/execute&quot;, method = RequestMethod.POST)\r\n    public String executeParser(\r\n            @RequestParam String user\r\n    ){\r\n        //this controller doesn&#39;t executed\r\n        return &quot;redirect:/admin/block&quot;;\r\n    }\r\n}\r\n```\r\n\r\n\r\nAfter I successfully selected the value from the dropdown and pressed the button `Start` I received *Whiteble page error - This application has no explicit mapping for /error, so you are seeing this as a fallback.*\r\n\r\n\r\nWhat I have missed?","title":"How to pass parameter from dropdown to controller in spring","body":"<p>I try to pass a parameter from the view to the controller, but received the &quot;Whiteble error page&quot;.</p>\n<p>I follow the very simple solution that I have successfully implemented in another project, but I can't understand why it not working now.</p>\n<p>HTML:</p>\n<pre class=\"lang-html prettyprint-override\"><code>    &lt;form action=&quot;/admin/block/execute&quot; method=&quot;post&quot;&gt;\n        &lt;select name=&quot;user&quot; id=userId required&gt;\n            &lt;option th:each=&quot;user: ${users}&quot;&gt;\n                &lt;title th:text=&quot;${user}&quot;/&gt;\n            &lt;/option&gt;\n        &lt;/select&gt;\n        &lt;div class=&quot;w3-container w3-margin&quot;&gt;\n            &lt;input class=&quot;w3-button w3-blue&quot; type=&quot;submit&quot; value=&quot;Start&quot;/&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n\n</code></pre>\n<p>controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\n@RequestMapping(&quot;/admin/block&quot;)\n@AllArgsConstructor\n@Slf4j\npublic class AdminController {\n\n    @RequestMapping(value = &quot;/execute&quot;, method = RequestMethod.POST)\n    public String executeParser(\n            @RequestParam String user\n    ){\n        //this controller doesn't executed\n        return &quot;redirect:/admin/block&quot;;\n    }\n}\n</code></pre>\n<p>After I successfully selected the value from the dropdown and pressed the button <code>Start</code> I received <em>Whiteble page error - This application has no explicit mapping for /error, so you are seeing this as a fallback.</em></p>\n<p>What I have missed?</p>\n"},{"tags":["java","appium","appium-android"],"comments":[{"owner":{"account_id":27264513,"reputation":354,"user_id":20786794,"display_name":"Omprakash Chavan"},"score":0,"creation_date":1671698590,"post_id":74878903,"comment_id":132155576,"body_markdown":"The error is showing multiple locations where it&#39;s not able to find apksigner.jar file. Did you check all these locations and confirm that the file is available?","body":"The error is showing multiple locations where it&#39;s not able to find apksigner.jar file. Did you check all these locations and confirm that the file is available?"}],"answers":[{"tags":[],"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671817483,"creation_date":1671813116,"answer_id":74901905,"question_id":74878903,"body_markdown":"For some reason the apksigner was not there, hence adding it manually based on [the comment](https://stackoverflow.com/questions/74878903/receiving-response-code-500-when-trying-to-open-a-webpage-using-appium-on-androi/74901905#comment132155576_74878903) by @Omprakash Chavan fixed the issue.","title":"Receiving response code 500 when trying to open a webpage using Appium on Android Emulated Device","body":"<p>For some reason the apksigner was not there, hence adding it manually based on <a href=\"https://stackoverflow.com/questions/74878903/receiving-response-code-500-when-trying-to-open-a-webpage-using-appium-on-androi/74901905#comment132155576_74878903\">the comment</a> by @Omprakash Chavan fixed the issue.</p>\n"}],"owner":{"account_id":20678479,"reputation":33,"user_id":15182594,"display_name":"Gabriel Dragomir"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74901905,"answer_count":1,"score":0,"last_activity_date":1671817483,"creation_date":1671639571,"question_id":74878903,"body_markdown":"Based on the following code:\r\n\r\n    @Test\r\n    public void androidDriver() throws MalformedURLException {\r\n        DesiredCapabilities capabilities = new DesiredCapabilities();\r\n        capabilities.setCapability(&quot;deviceName&quot;, &quot;emulator-5554&quot;);\r\n        capabilities.setCapability(&quot;browserName&quot;, &quot;Chrome&quot;);\r\n        capabilities.setCapability(&quot;platformVersion&quot;, &quot;11&quot;);\r\n        capabilities.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\r\n        WebDriver driver = new RemoteWebDriver(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;), capabilities);\r\n\r\n        driver.get(&quot;website&quot;);\r\n    }\r\n\r\nI am receiving the following errors:\r\n\r\nIDE Error:\r\n\r\n        org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: Cannot verify the signature of &#39;C:\\Users\\user\\AppData\\Local\\Programs\\Appium Server GUI\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.27.0.apk&#39;. Original error: Could not find &#39;apksigner.jar&#39; in [&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\platform-tools\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\emulator\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\cmdline-tools\\\\latest\\\\bin\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\tools\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\tools\\\\bin\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\apksigner.jar&quot;]. Do you have Android Build Tools installed at &#39;C:\\Users\\user\\AppData\\Local\\Android\\Sdk\\platform-tools&#39;?\r\n    Build info: version: &#39;4.1.2&#39;, revision: &#39;9a5a329c5a&#39;\r\n    System info: host: &#39;LAP3-056&#39;, ip: &#39;192.168.68.102&#39;, os.name: &#39;Windows 10&#39;, os.arch: &#39;amd64&#39;, os.version: &#39;10.0&#39;, java.version: &#39;19.0.1&#39;\r\n    Driver info: org.openqa.selenium.remote.RemoteWebDriver\r\n    Command: [null, newSession {capabilities=[Capabilities {browserName: Chrome, platformName: android}], desiredCapabilities=Capabilities {browserName: Chrome, deviceName: emulator-5554, platformName: Android, platformVersion: 11}}]\r\n    Capabilities {}\r\n\r\nI am using the latest version of Appium Server GUI and Android SDK Platform-Tools is also installed.\r\n\r\nAny other ideas of what can I do to fix this?","title":"Receiving response code 500 when trying to open a webpage using Appium on Android Emulated Device","body":"<p>Based on the following code:</p>\n<pre><code>@Test\npublic void androidDriver() throws MalformedURLException {\n    DesiredCapabilities capabilities = new DesiredCapabilities();\n    capabilities.setCapability(&quot;deviceName&quot;, &quot;emulator-5554&quot;);\n    capabilities.setCapability(&quot;browserName&quot;, &quot;Chrome&quot;);\n    capabilities.setCapability(&quot;platformVersion&quot;, &quot;11&quot;);\n    capabilities.setCapability(&quot;platformName&quot;, &quot;Android&quot;);\n    WebDriver driver = new RemoteWebDriver(new URL(&quot;http://127.0.0.1:4723/wd/hub&quot;), capabilities);\n\n    driver.get(&quot;website&quot;);\n}\n</code></pre>\n<p>I am receiving the following errors:</p>\n<p>IDE Error:</p>\n<pre><code>    org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: An unknown server-side error occurred while processing the command. Original error: Cannot verify the signature of 'C:\\Users\\user\\AppData\\Local\\Programs\\Appium Server GUI\\resources\\app\\node_modules\\appium\\node_modules\\appium-uiautomator2-server\\apks\\appium-uiautomator2-server-v4.27.0.apk'. Original error: Could not find 'apksigner.jar' in [&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\platform-tools\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\emulator\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\cmdline-tools\\\\latest\\\\bin\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\tools\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\tools\\\\bin\\\\apksigner.jar&quot;,&quot;C:\\\\Users\\\\user\\\\AppData\\\\Local\\\\Android\\\\Sdk\\\\platform-tools\\\\apksigner.jar&quot;]. Do you have Android Build Tools installed at 'C:\\Users\\user\\AppData\\Local\\Android\\Sdk\\platform-tools'?\nBuild info: version: '4.1.2', revision: '9a5a329c5a'\nSystem info: host: 'LAP3-056', ip: '192.168.68.102', os.name: 'Windows 10', os.arch: 'amd64', os.version: '10.0', java.version: '19.0.1'\nDriver info: org.openqa.selenium.remote.RemoteWebDriver\nCommand: [null, newSession {capabilities=[Capabilities {browserName: Chrome, platformName: android}], desiredCapabilities=Capabilities {browserName: Chrome, deviceName: emulator-5554, platformName: Android, platformVersion: 11}}]\nCapabilities {}\n</code></pre>\n<p>I am using the latest version of Appium Server GUI and Android SDK Platform-Tools is also installed.</p>\n<p>Any other ideas of what can I do to fix this?</p>\n"},{"tags":["java","android"],"owner":{"account_id":13547561,"reputation":3338,"user_id":9773423,"display_name":"Taki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671817243,"creation_date":1671817243,"question_id":74902517,"body_markdown":"I have built a call recorder app , i have tested the app in android 9 and it does record both sides but when i try to make a call with one plus phone which has android 12 , it does only record my voice not the other side voice , is there any special permission to be granted or something cause i&#39;m alread using the accessibility permission to handle this , any help would be appreciated thank you \r\n\r\n * Recording block code \r\n\r\n```\r\n      RecordingThread(Context context, String mode, Recorder recorder) throws RecordingException {\r\n        this.context = context;\r\n        channels = (mode.equals(Recorder.MONO) ? 1 : 2);\r\n        this.recorder = recorder;\r\n        bufferSize = AudioRecord.getMinBufferSize(SAMPLE_RATE, channels == 1 ?\r\n                        AudioFormat.CHANNEL_IN_MONO : AudioFormat.CHANNEL_IN_STEREO,\r\n                AudioFormat.ENCODING_PCM_16BIT);\r\n        audioRecord = createAudioRecord();\r\n        audioRecord.startRecording();\r\n    }\r\n\r\n```\r\n\r\n * Permissions in manifest \r\n\r\n```\r\n\r\n   &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_CALL_LOG&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_CALL_LOG&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_CONTACTS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.CAPTURE_AUDIO_OUTPUT&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.WRITE_SECURE_SETTINGS&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n    &lt;uses-permission\r\n        android:name=&quot;android.permission.WRITE_SETTINGS&quot;\r\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot; /&gt;\r\n```","title":"App recording only caller voice in android 12","body":"<p>I have built a call recorder app , i have tested the app in android 9 and it does record both sides but when i try to make a call with one plus phone which has android 12 , it does only record my voice not the other side voice , is there any special permission to be granted or something cause i'm alread using the accessibility permission to handle this , any help would be appreciated thank you</p>\n<ul>\n<li>Recording block code</li>\n</ul>\n<pre><code>      RecordingThread(Context context, String mode, Recorder recorder) throws RecordingException {\n        this.context = context;\n        channels = (mode.equals(Recorder.MONO) ? 1 : 2);\n        this.recorder = recorder;\n        bufferSize = AudioRecord.getMinBufferSize(SAMPLE_RATE, channels == 1 ?\n                        AudioFormat.CHANNEL_IN_MONO : AudioFormat.CHANNEL_IN_STEREO,\n                AudioFormat.ENCODING_PCM_16BIT);\n        audioRecord = createAudioRecord();\n        audioRecord.startRecording();\n    }\n\n</code></pre>\n<ul>\n<li>Permissions in manifest</li>\n</ul>\n<pre><code>\n   &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.POST_NOTIFICATIONS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.RECEIVE_BOOT_COMPLETED&quot; /&gt;\n    &lt;uses-permission android:name=&quot;com.google.android.finsky.permission.BIND_GET_INSTALL_REFERRER_SERVICE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_CALL_LOG&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_CALL_LOG&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_PHONE_STATE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_CONTACTS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.MODIFY_AUDIO_SETTINGS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.CAPTURE_AUDIO_OUTPUT&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.WRITE_SECURE_SETTINGS&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n    &lt;uses-permission\n        android:name=&quot;android.permission.WRITE_SETTINGS&quot;\n        tools:ignore=&quot;ProtectedPermissions&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.REQUEST_IGNORE_BATTERY_OPTIMIZATIONS&quot; /&gt;\n    &lt;uses-permission android:name=&quot;com.google.android.gms.permission.AD_ID&quot; /&gt;\n</code></pre>\n"},{"tags":["java","java-stream","atomicinteger"],"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1672665139,"post_id":74899560,"comment_id":132322323,"body_markdown":"If `diff` contains the difference, you are not calculating the difference to the previous value, but the difference to the the difference. What you actually want is, `.map(i -&gt; i - diff.getAndSet(i))` though then, you should rename `diff` to `previous` to match the true purpose. However, that’s only to explain what’s wrong with the way you use the `AtomicInteger`, the answer suggesting to use a stream of indices instead, is the way to go.","body":"If <code>diff</code> contains the difference, you are not calculating the difference to the previous value, but the difference to the the difference. What you actually want is, <code>.map(i -&gt; i - diff.getAndSet(i))</code> though then, you should rename <code>diff</code> to <code>previous</code> to match the true purpose. However, that’s only to explain what’s wrong with the way you use the <code>AtomicInteger</code>, the answer suggesting to use a stream of indices instead, is the way to go."}],"answers":[{"comments":[{"owner":{"account_id":16773423,"reputation":576,"user_id":12125351,"display_name":"wannaBeDev"},"score":1,"creation_date":1671799245,"post_id":74899685,"comment_id":132178856,"body_markdown":"Thank you. I had obsessed myself with working with the elements and didn&#39;t think it would be easier to work with the indexes.","body":"Thank you. I had obsessed myself with working with the elements and didn&#39;t think it would be easier to work with the indexes."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671816526,"creation_date":1671798749,"answer_id":74899685,"question_id":74899560,"body_markdown":"I wouldn&#39;t use an atomic type for this.  Instead I would start with a stream of the list indexes:\r\n\r\n    List&lt;Integer&gt; result = IntStream.range(0, list.size() - 1)\r\n                           .map(i -&gt; list.get(i + 1) - list.get(i))\r\n                           .boxed()\r\n                           .toList();\r\n\r\nNote that the ending number passed to [`IntStream#range`][1] is *exclusive* while the start is inclusive. The range is half-open. \r\n\r\nThis (IMO) is simpler and cleaner (and more functional) than relying on side-effects.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-","title":"How to use AtomicInteger getAndSet correctly?","body":"<p>I wouldn't use an atomic type for this.  Instead I would start with a stream of the list indexes:</p>\n<pre><code>List&lt;Integer&gt; result = IntStream.range(0, list.size() - 1)\n                       .map(i -&gt; list.get(i + 1) - list.get(i))\n                       .boxed()\n                       .toList();\n</code></pre>\n<p>Note that the ending number passed to <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/IntStream.html#range-int-int-\" rel=\"nofollow noreferrer\"><code>IntStream#range</code></a> is <em>exclusive</em> while the start is inclusive. The range is half-open.</p>\n<p>This (IMO) is simpler and cleaner (and more functional) than relying on side-effects.</p>\n"}],"owner":{"account_id":16773423,"reputation":576,"user_id":12125351,"display_name":"wannaBeDev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74899685,"answer_count":1,"score":1,"last_activity_date":1671816526,"creation_date":1671797938,"question_id":74899560,"body_markdown":"I want to get the difference between consecutive list elements using Java stream and AtomicInteger:\r\n\r\n    List&lt;Integer&gt; list  = List.of(1,2,3,5,6,8,9,10,22,23,27);\r\n    AtomicInteger diff  = new AtomicInteger(1);\r\n\r\n\r\n    List&lt;Integer&gt; result = list.stream()\r\n                               .skip(1)\r\n                               .map(i -&gt; diff.getAndSet(i - diff.get()))\r\n                               .toList();\r\n\r\n    System.out.println(result);\r\n\r\nOutput is:\r\n\r\n    [1, 1, 2, 3, 3, 5, 4, 6, 16, 7]\r\n\r\n \r\nI was expecting to get the difference of each element from previous like below:\r\n\r\n    [1, 1, 2, 1, 2, 1, 1, 12, 1, 4]\r\n\r\nWhat am I doing wrong? How to get the desired output?","title":"How to use AtomicInteger getAndSet correctly?","body":"<p>I want to get the difference between consecutive list elements using Java stream and AtomicInteger:</p>\n<pre><code>List&lt;Integer&gt; list  = List.of(1,2,3,5,6,8,9,10,22,23,27);\nAtomicInteger diff  = new AtomicInteger(1);\n\n\nList&lt;Integer&gt; result = list.stream()\n                           .skip(1)\n                           .map(i -&gt; diff.getAndSet(i - diff.get()))\n                           .toList();\n\nSystem.out.println(result);\n</code></pre>\n<p>Output is:</p>\n<pre><code>[1, 1, 2, 3, 3, 5, 4, 6, 16, 7]\n</code></pre>\n<p>I was expecting to get the difference of each element from previous like below:</p>\n<pre><code>[1, 1, 2, 1, 2, 1, 1, 12, 1, 4]\n</code></pre>\n<p>What am I doing wrong? How to get the desired output?</p>\n"},{"tags":["java","spring","spring-boot","jackson"],"comments":[{"owner":{"account_id":1610757,"reputation":1067,"user_id":1856573,"accept_rate":90,"display_name":"lapadets"},"score":0,"creation_date":1671805868,"post_id":74899635,"comment_id":132180583,"body_markdown":"How should this behave if the quantity == 1? 1 is also a valid double (being 1.0). \nBecause in this case you would need to use a different type.","body":"How should this behave if the quantity == 1? 1 is also a valid double (being 1.0).  Because in this case you would need to use a different type."}],"answers":[{"tags":[],"owner":{"account_id":15433020,"reputation":24,"user_id":11726419,"display_name":"ga_ts"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671803197,"creation_date":1671803197,"answer_id":74900334,"question_id":74899635,"body_markdown":"You could validate the input by using Apache Commons&#39; NumberUtils \r\n(https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/math/NumberUtils.html)\r\n\r\nNumberUtils provides a bunch of useful methods to check if a String is a valid Java number, a parsable value, unicode digit and so on.\r\n___\r\nThis approach provides a static method called **NumberUtils.isCreatable(String)**, which checks whether a String is a valid Java number or not.\r\n\r\nThe aforementioned method accepts:\r\n\r\n- Hexadecimal numbers starting with 0x or 0X\r\n- Octal numbers starting with a leading 0\r\n- Scientific notation (for example 1.05e-10)\r\n- Numbers marked with a type qualifier (for example 1L or 2.2d)\r\n\r\n**Null and empty/blank inputs are not considered numbers** and therefore the method will return false.\r\n___\r\nThe **NumberUtils.isParsable(String)** method checks whether the given String is parsable or not.\r\n\r\nParsable numbers are those that are successfully parsed by any parse method such as Integer.parseInt(String), Long.parseLong(String), Float.parseFloat(String) or Double.parseDouble(String).\r\n\r\nUnlike NumberUtils.isCreatable(), **this method will not accept hexadecimal numbers, scientific notations, or strings ending with any type of qualifier like &#39;f&#39;, &#39;F&#39;, ‘d&#39; ,&#39;D&#39; ,&#39;l&#39; or &#39;L&#39;**.\r\n___\r\n\r\nThe method **StringUtils.isNumeric(CharSequence)** checks for Unicode digits, meaning:\r\n\r\nAny digits from any language that is a Unicode digit is acceptable.\r\n**Since a decimal point is not considered as a Unicode digit, it&#39;s not valid\r\nLeading signs (either positive or negative) are also not acceptable**.\r\n___\r\n**StringUtils.isNumericSpace(CharSequence)** checks strictly for Unicode digits and/or space. This is the same as StringUtils.isNumeric(), except that it also accepts spaces, and not only leading and/or trailing spaces, but also if they&#39;re in between numbers.\r\n___\r\nYou can also use Regular Expressions (although most people would not recommend it unless it&#39;s really needed). Here&#39;s a simple example:\r\n\r\nUse the Regular Expression **-?\\d+(\\.\\d+)?** to match numeric Strings consisting of the positive or negative integer and floats.\r\n\r\nRegEx breakdown:\r\n\r\n- -? – identifies if the given number is negative, the dash &quot;-&quot; literally searches for dash and the question mark &quot;?&quot; makes it optional.\r\n- \\d+ – this searches for one or more digits.\r\n- (\\.\\d+)? – identifies float numbers. It looks for one or more digits followed by a period. The question mark, in the end, means that this group is optional.\r\n\r\nA method example:\r\n\r\n    private Pattern pattern = Pattern.compile(&quot;-?\\\\d+(\\\\.\\\\d+)?&quot;);\r\n    \r\n    public boolean isNumeric(String input) {\r\n        if (input == null) {\r\n            return false; \r\n        }\r\n        return pattern.matcher(input).matches();\r\n    }","title":"Is there a Java bean validation to accept only numbers?","body":"<p>You could validate the input by using Apache Commons' NumberUtils\n(<a href=\"https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/math/NumberUtils.html\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-lang/apidocs/org/apache/commons/lang3/math/NumberUtils.html</a>)</p>\n<p>NumberUtils provides a bunch of useful methods to check if a String is a valid Java number, a parsable value, unicode digit and so on.</p>\n<hr />\n<p>This approach provides a static method called <strong>NumberUtils.isCreatable(String)</strong>, which checks whether a String is a valid Java number or not.</p>\n<p>The aforementioned method accepts:</p>\n<ul>\n<li>Hexadecimal numbers starting with 0x or 0X</li>\n<li>Octal numbers starting with a leading 0</li>\n<li>Scientific notation (for example 1.05e-10)</li>\n<li>Numbers marked with a type qualifier (for example 1L or 2.2d)</li>\n</ul>\n<p><strong>Null and empty/blank inputs are not considered numbers</strong> and therefore the method will return false.</p>\n<hr />\n<p>The <strong>NumberUtils.isParsable(String)</strong> method checks whether the given String is parsable or not.</p>\n<p>Parsable numbers are those that are successfully parsed by any parse method such as Integer.parseInt(String), Long.parseLong(String), Float.parseFloat(String) or Double.parseDouble(String).</p>\n<p>Unlike NumberUtils.isCreatable(), <strong>this method will not accept hexadecimal numbers, scientific notations, or strings ending with any type of qualifier like 'f', 'F', ‘d' ,'D' ,'l' or 'L'</strong>.</p>\n<hr />\n<p>The method <strong>StringUtils.isNumeric(CharSequence)</strong> checks for Unicode digits, meaning:</p>\n<p>Any digits from any language that is a Unicode digit is acceptable.\n<strong>Since a decimal point is not considered as a Unicode digit, it's not valid\nLeading signs (either positive or negative) are also not acceptable</strong>.</p>\n<hr />\n<p><strong>StringUtils.isNumericSpace(CharSequence)</strong> checks strictly for Unicode digits and/or space. This is the same as StringUtils.isNumeric(), except that it also accepts spaces, and not only leading and/or trailing spaces, but also if they're in between numbers.</p>\n<hr />\n<p>You can also use Regular Expressions (although most people would not recommend it unless it's really needed). Here's a simple example:</p>\n<p>Use the Regular Expression <strong>-?\\d+(.\\d+)?</strong> to match numeric Strings consisting of the positive or negative integer and floats.</p>\n<p>RegEx breakdown:</p>\n<ul>\n<li>-? – identifies if the given number is negative, the dash &quot;-&quot; literally searches for dash and the question mark &quot;?&quot; makes it optional.</li>\n<li>\\d+ – this searches for one or more digits.</li>\n<li>(.\\d+)? – identifies float numbers. It looks for one or more digits followed by a period. The question mark, in the end, means that this group is optional.</li>\n</ul>\n<p>A method example:</p>\n<pre><code>private Pattern pattern = Pattern.compile(&quot;-?\\\\d+(\\\\.\\\\d+)?&quot;);\n\npublic boolean isNumeric(String input) {\n    if (input == null) {\n        return false; \n    }\n    return pattern.matcher(input).matches();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1610757,"reputation":1067,"user_id":1856573,"accept_rate":90,"display_name":"lapadets"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671806334,"creation_date":1671806334,"answer_id":74900863,"question_id":74899635,"body_markdown":"You can use `@Digits` - here is a [tutorial][1]\r\n\r\n\r\n    @Digits(integer = 3, fraction = 2, message = &quot;Quantity must be a valid number with a maximum of 3 integral digits and 2 fractional digits&quot;)\r\n    private Double quantity;\r\n\r\n\r\nBut @Digits only works for numeric values!\r\n\r\nAnother point to concider is that if you want to treat 1.0 as a `Double` an 1 as an `Integer`, you need to work with the input variable, which is of type String.\r\n\r\nJava will always treat `Double x = 1` in the same way as `Double y = 1.0` (meaning 1 is a valid Double), so you will not be able to distinguish them with code.\r\n\r\nAlternatively, you can use the good old regular expressions! \r\n\r\n`@Pattern(regexp = &quot;^[0-9]+(\\\\.[0-9]+)?$&quot;, message = &quot;Quantity must be a numeric value&quot;)`\r\n\r\nThis regEx will match any string that consists of one or more digits, optionally followed by a decimal point and one or more digits. It will reject any non-numeric characters.\r\n\r\n  [1]: https://www.baeldung.com/javax-bigdecimal-validation#3-digits","title":"Is there a Java bean validation to accept only numbers?","body":"<p>You can use <code>@Digits</code> - here is a <a href=\"https://www.baeldung.com/javax-bigdecimal-validation#3-digits\" rel=\"nofollow noreferrer\">tutorial</a></p>\n<pre><code>@Digits(integer = 3, fraction = 2, message = &quot;Quantity must be a valid number with a maximum of 3 integral digits and 2 fractional digits&quot;)\nprivate Double quantity;\n</code></pre>\n<p>But @Digits only works for numeric values!</p>\n<p>Another point to concider is that if you want to treat 1.0 as a <code>Double</code> an 1 as an <code>Integer</code>, you need to work with the input variable, which is of type String.</p>\n<p>Java will always treat <code>Double x = 1</code> in the same way as <code>Double y = 1.0</code> (meaning 1 is a valid Double), so you will not be able to distinguish them with code.</p>\n<p>Alternatively, you can use the good old regular expressions!</p>\n<p><code>@Pattern(regexp = &quot;^[0-9]+(\\\\.[0-9]+)?$&quot;, message = &quot;Quantity must be a numeric value&quot;)</code></p>\n<p>This regEx will match any string that consists of one or more digits, optionally followed by a decimal point and one or more digits. It will reject any non-numeric characters.</p>\n"},{"tags":[],"owner":{"account_id":204659,"reputation":37559,"user_id":453005,"accept_rate":100,"display_name":"DwB"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671807185,"creation_date":1671807185,"answer_id":74901001,"question_id":74899635,"body_markdown":"In general,\r\nunless I am performing math on the value, \r\nI store all values (including numbers) as Strings in my JSON objects.\r\n\r\nI would define your class as follows (getter and setter are lombok annotations):\r\n```Java\r\n@Getter\r\n@Setter\r\npublic class ItemForReorderRequest {\r\n    private String itemNumber;\r\n    private String quantity;\r\n}\r\n\r\n\r\nItemForReorderRequest blam; // used below.\r\n```\r\n\r\nNote: &quot;No&quot; is a terrible abbreviation for number.\r\nIf you must abbreviate,\r\nconsider &quot;Num&quot;.\r\n\r\nI would perform validation after I received the JSON.\r\n\r\nI like Apache utility classes,\r\nso I would likely use `NumberUtils.isParsable(blam.getQuantity())`\r\n","title":"Is there a Java bean validation to accept only numbers?","body":"<p>In general,\nunless I am performing math on the value,\nI store all values (including numbers) as Strings in my JSON objects.</p>\n<p>I would define your class as follows (getter and setter are lombok annotations):</p>\n<pre><code>@Getter\n@Setter\npublic class ItemForReorderRequest {\n    private String itemNumber;\n    private String quantity;\n}\n\n\nItemForReorderRequest blam; // used below.\n</code></pre>\n<p>Note: &quot;No&quot; is a terrible abbreviation for number.\nIf you must abbreviate,\nconsider &quot;Num&quot;.</p>\n<p>I would perform validation after I received the JSON.</p>\n<p>I like Apache utility classes,\nso I would likely use <code>NumberUtils.isParsable(blam.getQuantity())</code></p>\n"}],"owner":{"account_id":10845840,"reputation":19,"user_id":7975359,"display_name":"G.D. Nipuna"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1886,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1671816038,"creation_date":1671798388,"question_id":74899635,"body_markdown":"This is my Java class for accepting the request body.\r\n```\r\npublic class ItemForReorderRequest {\r\n    private String itemNo;\r\n    @DecimalMax(value = &quot;100&quot;, message = &quot;Reorder quantity must be less than or equal to 100&quot;)\r\n    private Double quantity;\r\n}\r\n```\r\n\r\nThis is the request body.\r\n```\r\n{\r\n        &quot;itemNo&quot;: &quot;000006510&quot;,\r\n        &quot;quantity&quot;: 100.0\r\n}\r\n```\r\n\r\n\r\nI need to validate the quantity to accept only numeric inputs. Whenever I enter a string to quantity, it gives me &quot;An unexpected application error has occurred&quot; with multiple errors including &quot;className&quot;: &quot;com.fasterxml.jackson.core.JsonParser&quot;.","title":"Is there a Java bean validation to accept only numbers?","body":"<p>This is my Java class for accepting the request body.</p>\n<pre><code>public class ItemForReorderRequest {\n    private String itemNo;\n    @DecimalMax(value = &quot;100&quot;, message = &quot;Reorder quantity must be less than or equal to 100&quot;)\n    private Double quantity;\n}\n</code></pre>\n<p>This is the request body.</p>\n<pre><code>{\n        &quot;itemNo&quot;: &quot;000006510&quot;,\n        &quot;quantity&quot;: 100.0\n}\n</code></pre>\n<p>I need to validate the quantity to accept only numeric inputs. Whenever I enter a string to quantity, it gives me &quot;An unexpected application error has occurred&quot; with multiple errors including &quot;className&quot;: &quot;com.fasterxml.jackson.core.JsonParser&quot;.</p>\n"},{"tags":["java","node.js","swift","cryptography","shared-secret"],"answers":[{"comments":[{"owner":{"account_id":1297216,"reputation":589,"user_id":1247964,"accept_rate":75,"display_name":"alexward1230"},"score":1,"creation_date":1671867703,"post_id":74902323,"comment_id":132190027,"body_markdown":"Thanks! You are a lifesaver. I won&#39;t have time to check this until after the holidays, but assuming this is correct considering the thorough response. I will let you know if I have any questions, thank you.","body":"Thanks! You are a lifesaver. I won&#39;t have time to check this until after the holidays, but assuming this is correct considering the thorough response. I will let you know if I have any questions, thank you."}],"tags":[],"owner":{"account_id":2700653,"reputation":26716,"user_id":2331445,"display_name":"Stephan Schlecht"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671816013,"creation_date":1671816013,"answer_id":74902323,"question_id":74830703,"body_markdown":"The result should be a Swift method that gets a public key in hex, internally generates its own key pair, and determines the shared secret in the same way as the Node program.\r\n\r\n\r\n**Test Scenario**\r\n\r\nA test could then look like the following: \r\n- the Swift program generates a key pair\r\n- the public key is printed in Hex on the console\r\n- the Swift public key is copied/pasted into the node program \r\n- the node program outputs its own public key and the shared secret, both in Hex\r\n- the public key of the node program is transferred to the Swift program, e.g. by copy/paste into a text field\r\n- the calculation is done in the Swift program and printed out\r\n\r\nIf the two determined shared secrets match, the test was successful.\r\n\r\nThis fine answer https://stackoverflow.com/a/26502285/2331445 provides utility methods for converting a hex String to Data and back and are used in the test.\r\n\r\n**Swift**\r\n\r\nStep 1 could be the calculation of the common secret (without pre- and post-salting):\r\n\r\n```\r\n    private static func computeSharedSecret(ownPrivateKey: P256.KeyAgreement.PrivateKey, otherPublicKeyHex: String) -&gt; Data? {\r\n        guard let otherPK = otherPublicKeyHex.hexadecimal else { return nil }\r\n        let rawOtherPublicKey = otherPK.dropFirst()\r\n        guard let otherPublicKey = try? P256.KeyAgreement.PublicKey(rawRepresentation: rawOtherPublicKey) else { return nil }\r\n        let sharedSecret = try? ownPrivateKey.sharedSecretFromKeyAgreement(with: otherPublicKey)\r\n        return sharedSecret?.data\r\n    }\r\n```\r\n\r\nSince `sharedSecretFromKeyAgreement` return a struct `SharedSecret`\tthat conforms to the protocol `ContiguousBytes` we can define an extension like this:\r\n\r\n```\r\nextension ContiguousBytes {\r\n    var data: Data {\r\n        var result = Data()\r\n        self.withUnsafeBytes {\r\n            result = Data($0)\r\n        }\r\n        return result\r\n    }\r\n}\r\n```\r\n\r\nThe private key could be created like this:\r\n```\r\nlet ownPrivateKey = P256.KeyAgreement.PrivateKey(compactRepresentable: false)\r\n```\r\n\r\nAnd here we call it and apply pre- and postSaltValue, convert it to data and calculate the SHA512 digest:\r\n```\r\nfunc onComputeSecret() {\r\n        guard let otherPublicKeyHex = otherPublicKeyTextField.text else { return }\r\n        guard let sharedSecret = Self.computeSharedSecret(ownPrivateKey: ownPrivateKey, otherPublicKeyHex: otherPublicKeyHex) else {\r\n            print (&quot;failed&quot;)\r\n            return\r\n        }\r\n\r\n        let preSaltValue = &quot;f0f0f0f0f0&quot;\r\n        let postSaltValue = &quot;0101010101&quot;\r\n        if let salted = (preSaltValue + sharedSecret.hexadecimal + postSaltValue).hexadecimal {\r\n            var sha512 = SHA512()\r\n            sha512.update(data: salted)\r\n            print(sha512.finalize())\r\n        }\r\n    }\r\n```\r\n\r\nFinally the whole program for an easy test on iOS:\r\n```\r\nimport UIKit\r\nimport CryptoKit\r\n\r\nclass ViewController: UIViewController {\r\n\r\n    private let ownPrivateKey = P256.KeyAgreement.PrivateKey(compactRepresentable: false)\r\n    private let otherPublicKeyTextField = UITextField()\r\n    private let computeSecretButton = UIButton()\r\n\r\n    override func viewDidLoad() {\r\n        super.viewDidLoad()\r\n        buildUI()\r\n        printPublicKeyHex()\r\n    }\r\n\r\n    @objc func onComputeSecret() {\r\n        guard let otherPublicKeyHex = otherPublicKeyTextField.text else { return }\r\n        guard let sharedSecret = Self.computeSharedSecret(ownPrivateKey: ownPrivateKey, otherPublicKeyHex: otherPublicKeyHex) else {\r\n            print (&quot;failed&quot;)\r\n            return\r\n        }\r\n\r\n        let preSaltValue = &quot;f0f0f0f0f0&quot;\r\n        let postSaltValue = &quot;0101010101&quot;\r\n        if let salted = (preSaltValue + sharedSecret.hexadecimal + postSaltValue).hexadecimal {\r\n            var sha512 = SHA512()\r\n            sha512.update(data: salted)\r\n            print(sha512.finalize())\r\n        }\r\n    }\r\n\r\n    private func printPublicKeyHex() {\r\n        let ownPublicKey = ownPrivateKey.publicKey\r\n        //to get 65 byte result with uncompressed indicator add &quot;04&quot; prefix\r\n        let ownPublicKeyHex = &quot;04\\(ownPublicKey.rawRepresentation.hexadecimal)&quot;\r\n        print (&quot;own public key: \\(ownPublicKeyHex)&quot;)\r\n    }\r\n\r\n    private static func computeSharedSecret(ownPrivateKey: P256.KeyAgreement.PrivateKey, otherPublicKeyHex: String) -&gt; Data? {\r\n        guard let otherPK = otherPublicKeyHex.hexadecimal else { return nil }\r\n        let rawOtherPublicKey = otherPK.dropFirst()\r\n        guard let otherPublicKey = try? P256.KeyAgreement.PublicKey(rawRepresentation: rawOtherPublicKey) else { return nil }\r\n        let sharedSecret = try? ownPrivateKey.sharedSecretFromKeyAgreement(with: otherPublicKey)\r\n        return sharedSecret?.data\r\n    }\r\n\r\n    private func buildUI() {\r\n        otherPublicKeyTextField.translatesAutoresizingMaskIntoConstraints = false\r\n        otherPublicKeyTextField.borderStyle = .bezel\r\n        view.addSubview(otherPublicKeyTextField)\r\n\r\n        computeSecretButton.translatesAutoresizingMaskIntoConstraints = false\r\n        view.addSubview(computeSecretButton)\r\n        computeSecretButton.setTitle(&quot;Compute Shared Secret&quot;, for: .normal)\r\n        computeSecretButton.addTarget(self, action: #selector(onComputeSecret), for: .touchUpInside)\r\n        computeSecretButton.setTitleColor(.blue, for: .normal)\r\n\r\n        let layout = view.safeAreaLayoutGuide\r\n        NSLayoutConstraint.activate([\r\n            otherPublicKeyTextField.topAnchor.constraint(equalTo: layout.topAnchor, constant: 24),\r\n            otherPublicKeyTextField.leadingAnchor.constraint(equalTo: layout.leadingAnchor, constant: 24),\r\n            otherPublicKeyTextField.trailingAnchor.constraint(equalTo: layout.trailingAnchor, constant: -24),\r\n\r\n            computeSecretButton.topAnchor.constraint(equalTo: otherPublicKeyTextField.bottomAnchor, constant: 24),\r\n            computeSecretButton.centerXAnchor.constraint(equalTo: view.centerXAnchor)\r\n        ])\r\n    }\r\n\r\n}\r\n\r\nextension ContiguousBytes {\r\n    var data: Data {\r\n        var result = Data()\r\n        self.withUnsafeBytes {\r\n            result = Data($0)\r\n        }\r\n        return result\r\n    }\r\n}\r\n```\r\n\r\n**Test**\r\n\r\nIn the upper area is the Node program, in the lower area you can see the console of Xcode with the Swift program:\r\n\r\n[![test run][1]][1]\r\n\r\nThe shared secrets are identical, so the test was successful. \r\n\r\nPlease note: Like the Node program, the Swift program expects an &quot;04&quot; prefix at the beginning of the other public key, indicating that it is an uncompressed key. This must be added if required.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ljDBE.png","title":"Derive Shared Secret From ECDH with existing foreign public key - Swift","body":"<p>The result should be a Swift method that gets a public key in hex, internally generates its own key pair, and determines the shared secret in the same way as the Node program.</p>\n<p><strong>Test Scenario</strong></p>\n<p>A test could then look like the following:</p>\n<ul>\n<li>the Swift program generates a key pair</li>\n<li>the public key is printed in Hex on the console</li>\n<li>the Swift public key is copied/pasted into the node program</li>\n<li>the node program outputs its own public key and the shared secret, both in Hex</li>\n<li>the public key of the node program is transferred to the Swift program, e.g. by copy/paste into a text field</li>\n<li>the calculation is done in the Swift program and printed out</li>\n</ul>\n<p>If the two determined shared secrets match, the test was successful.</p>\n<p>This fine answer <a href=\"https://stackoverflow.com/a/26502285/2331445\">https://stackoverflow.com/a/26502285/2331445</a> provides utility methods for converting a hex String to Data and back and are used in the test.</p>\n<p><strong>Swift</strong></p>\n<p>Step 1 could be the calculation of the common secret (without pre- and post-salting):</p>\n<pre><code>    private static func computeSharedSecret(ownPrivateKey: P256.KeyAgreement.PrivateKey, otherPublicKeyHex: String) -&gt; Data? {\n        guard let otherPK = otherPublicKeyHex.hexadecimal else { return nil }\n        let rawOtherPublicKey = otherPK.dropFirst()\n        guard let otherPublicKey = try? P256.KeyAgreement.PublicKey(rawRepresentation: rawOtherPublicKey) else { return nil }\n        let sharedSecret = try? ownPrivateKey.sharedSecretFromKeyAgreement(with: otherPublicKey)\n        return sharedSecret?.data\n    }\n</code></pre>\n<p>Since <code>sharedSecretFromKeyAgreement</code> return a struct <code>SharedSecret</code> that conforms to the protocol <code>ContiguousBytes</code> we can define an extension like this:</p>\n<pre><code>extension ContiguousBytes {\n    var data: Data {\n        var result = Data()\n        self.withUnsafeBytes {\n            result = Data($0)\n        }\n        return result\n    }\n}\n</code></pre>\n<p>The private key could be created like this:</p>\n<pre><code>let ownPrivateKey = P256.KeyAgreement.PrivateKey(compactRepresentable: false)\n</code></pre>\n<p>And here we call it and apply pre- and postSaltValue, convert it to data and calculate the SHA512 digest:</p>\n<pre><code>func onComputeSecret() {\n        guard let otherPublicKeyHex = otherPublicKeyTextField.text else { return }\n        guard let sharedSecret = Self.computeSharedSecret(ownPrivateKey: ownPrivateKey, otherPublicKeyHex: otherPublicKeyHex) else {\n            print (&quot;failed&quot;)\n            return\n        }\n\n        let preSaltValue = &quot;f0f0f0f0f0&quot;\n        let postSaltValue = &quot;0101010101&quot;\n        if let salted = (preSaltValue + sharedSecret.hexadecimal + postSaltValue).hexadecimal {\n            var sha512 = SHA512()\n            sha512.update(data: salted)\n            print(sha512.finalize())\n        }\n    }\n</code></pre>\n<p>Finally the whole program for an easy test on iOS:</p>\n<pre><code>import UIKit\nimport CryptoKit\n\nclass ViewController: UIViewController {\n\n    private let ownPrivateKey = P256.KeyAgreement.PrivateKey(compactRepresentable: false)\n    private let otherPublicKeyTextField = UITextField()\n    private let computeSecretButton = UIButton()\n\n    override func viewDidLoad() {\n        super.viewDidLoad()\n        buildUI()\n        printPublicKeyHex()\n    }\n\n    @objc func onComputeSecret() {\n        guard let otherPublicKeyHex = otherPublicKeyTextField.text else { return }\n        guard let sharedSecret = Self.computeSharedSecret(ownPrivateKey: ownPrivateKey, otherPublicKeyHex: otherPublicKeyHex) else {\n            print (&quot;failed&quot;)\n            return\n        }\n\n        let preSaltValue = &quot;f0f0f0f0f0&quot;\n        let postSaltValue = &quot;0101010101&quot;\n        if let salted = (preSaltValue + sharedSecret.hexadecimal + postSaltValue).hexadecimal {\n            var sha512 = SHA512()\n            sha512.update(data: salted)\n            print(sha512.finalize())\n        }\n    }\n\n    private func printPublicKeyHex() {\n        let ownPublicKey = ownPrivateKey.publicKey\n        //to get 65 byte result with uncompressed indicator add &quot;04&quot; prefix\n        let ownPublicKeyHex = &quot;04\\(ownPublicKey.rawRepresentation.hexadecimal)&quot;\n        print (&quot;own public key: \\(ownPublicKeyHex)&quot;)\n    }\n\n    private static func computeSharedSecret(ownPrivateKey: P256.KeyAgreement.PrivateKey, otherPublicKeyHex: String) -&gt; Data? {\n        guard let otherPK = otherPublicKeyHex.hexadecimal else { return nil }\n        let rawOtherPublicKey = otherPK.dropFirst()\n        guard let otherPublicKey = try? P256.KeyAgreement.PublicKey(rawRepresentation: rawOtherPublicKey) else { return nil }\n        let sharedSecret = try? ownPrivateKey.sharedSecretFromKeyAgreement(with: otherPublicKey)\n        return sharedSecret?.data\n    }\n\n    private func buildUI() {\n        otherPublicKeyTextField.translatesAutoresizingMaskIntoConstraints = false\n        otherPublicKeyTextField.borderStyle = .bezel\n        view.addSubview(otherPublicKeyTextField)\n\n        computeSecretButton.translatesAutoresizingMaskIntoConstraints = false\n        view.addSubview(computeSecretButton)\n        computeSecretButton.setTitle(&quot;Compute Shared Secret&quot;, for: .normal)\n        computeSecretButton.addTarget(self, action: #selector(onComputeSecret), for: .touchUpInside)\n        computeSecretButton.setTitleColor(.blue, for: .normal)\n\n        let layout = view.safeAreaLayoutGuide\n        NSLayoutConstraint.activate([\n            otherPublicKeyTextField.topAnchor.constraint(equalTo: layout.topAnchor, constant: 24),\n            otherPublicKeyTextField.leadingAnchor.constraint(equalTo: layout.leadingAnchor, constant: 24),\n            otherPublicKeyTextField.trailingAnchor.constraint(equalTo: layout.trailingAnchor, constant: -24),\n\n            computeSecretButton.topAnchor.constraint(equalTo: otherPublicKeyTextField.bottomAnchor, constant: 24),\n            computeSecretButton.centerXAnchor.constraint(equalTo: view.centerXAnchor)\n        ])\n    }\n\n}\n\nextension ContiguousBytes {\n    var data: Data {\n        var result = Data()\n        self.withUnsafeBytes {\n            result = Data($0)\n        }\n        return result\n    }\n}\n</code></pre>\n<p><strong>Test</strong></p>\n<p>In the upper area is the Node program, in the lower area you can see the console of Xcode with the Swift program:</p>\n<p><a href=\"https://i.stack.imgur.com/ljDBE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ljDBE.png\" alt=\"test run\" /></a></p>\n<p>The shared secrets are identical, so the test was successful.</p>\n<p>Please note: Like the Node program, the Swift program expects an &quot;04&quot; prefix at the beginning of the other public key, indicating that it is an uncompressed key. This must be added if required.</p>\n"}],"owner":{"account_id":1297216,"reputation":589,"user_id":1247964,"accept_rate":75,"display_name":"alexward1230"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74902323,"answer_count":1,"score":1,"last_activity_date":1671816013,"creation_date":1671233039,"question_id":74830703,"body_markdown":"I&#39;m converting a method that I have working in both NodeJS/Java to Swift but I&#39;m having trouble getting it to work.\r\n\r\nHoping someone can help me covert this to Swift\r\n\r\nNodeJS Code:\r\n```\r\n//the public_key param here is from a different device. \r\n sign: function(public_key)\r\n    {\r\n        //dummy values \r\n        var PRE_SALT_VALUE = &#39;f0f0f0f0f0&#39;;\r\n        var POST_SALT_VALUE = &#39;0101010101&#39;;\r\n\r\n        const crypto = require(&#39;crypto&#39;);\r\n        var sha512 = crypto.createHash(&quot;sha512&quot;);\r\n\r\n        var EC = require(&#39;elliptic&#39;).ec;\r\n        var ec = new EC(&#39;p256&#39;);\r\n\r\n        // Generate keys\r\n        var key1 = ec.genKeyPair(); //key1 is gen before pub key\r\n        var key2 = ec.keyFromPublic(public_key, &#39;hex&#39;) //pub key gen from saved cert\r\n\r\n        var derived_secret = key1.derive(key2.getPublic()); \r\n        var derived_secret = Buffer.from(derived_secret.toString(16), &#39;hex&#39;)\r\n\r\n        var public_key_client = key1.getPublic(&#39;hex&#39;) \r\n\r\n        var pre_salt = Buffer.from(PRE_SALT_VALUE, &#39;hex&#39;)\r\n        var post_salt = Buffer.from(POST_SALT_VALUE, &#39;hex&#39;)\r\n\r\n        derived_secret = Buffer.from(pre_salt.toString(&#39;hex&#39;)+derived_secret.toString(&#39;hex&#39;)+post_salt.toString(&#39;hex&#39;), &#39;hex&#39;) // finalyze shared secret \r\n        // Hash shared secret\r\n        var sha = sha512.update(derived_secret);\r\n        derived_secret = sha.digest();\r\n\r\n        return {\r\n            public_key: public_key_client.toString(&#39;hex&#39;).slice(2), //dropping first byte of compression bits\r\n            secret: derived_secret.toString(&#39;hex&#39;)  \r\n        }\r\n    }\r\n```\r\n\r\nThe same code is also working in Java: See the answer to a similar question I asked a few years ago [here](https://stackoverflow.com/questions/57238837/derive-shared-secret-from-ecdh-with-existing-foreign-public-key) if you would like to see the java implementation. This was what originally helped me port it to java.\r\n\r\nHow do I add the same logic in Swift (I am a Swift beginner). So far I have tried\r\n\r\n**Step 1**\r\n```\r\n        // certData will be the external cert byte array in der format\r\n        let certData = Data(bytes: self.cert!, count: self.cert_length!)\r\n\r\n        // load the cert so I can read the data\r\n        guard let certificate = SecCertificateCreateWithData(nil, certData as CFData) else {\r\n            // todo handle error\r\n            print(&quot;explode&quot;)\r\n            return\r\n        }\r\n\r\n        // log public key from cert\r\n        let publicKey = SecCertificateCopyKey(certificate)!\r\n        let pubKeyExternRep = SecKeyCopyExternalRepresentation(publicKey, nil)\r\n        let pubKeyExternRepData:Data = pubKeyExternRep! as Data\r\n        print(pubKeyExternRepData.bytes) //  printed pub key looks reasonable\r\n```\r\n**Step 2**\r\nNext I have to generate a new random public/private keypair, so I tried this\r\n```\r\n        // Attempt 1 - generate our own random public/private keypair\r\n        let attributes: [String: Any] = [\r\n           kSecAttrType as String: kSecAttrKeyTypeECSECPrimeRandom,\r\n           kSecAttrKeySizeInBits as String: 256,\r\n           kSecPrivateKeyAttrs as String: [\r\n              kSecAttrIsPermanent as String: true\r\n           ]\r\n        ]\r\n\r\n        var error: Unmanaged&lt;CFError&gt;?\r\n        let ouPrivateKeyAttempt1 = SecKeyCreateRandomKey(attributes as CFDictionary, &amp;error)!\r\n        let ourPubKeyAttempt1 = SecKeyCopyPublicKey(ouPrivateKeyAttempt1)\r\n        let ourPubKeyExternRep = SecKeyCopyExternalRepresentation(ourPubKeyAttempt1!, &amp;error)\r\n        print(&quot;our generated EC public key (65 bytes)&quot;)\r\n        print(&quot;\\(pubKeyExternRep!)&quot;)\r\n        // =-=-=--=-=-=-=-==--==-=-=-=- End attempt1\r\n```\r\n**Step 3**\r\nNext I have to derive the shared secret given the random keypair above the the public external cert. I am pretty lost at this point. I tried something like\r\n```\r\n        // our private key agreement (does this generate a new private key, guess we dont need &#39;Attempt1&#39; above?)\r\n        let ourPrivateKey = P256.KeyAgreement.PrivateKey()\r\n        let ourPubKey = ourPrivateKey.publicKey\r\n        \r\n        // external device public key agreement given our generated private agreement\r\n        let externalPubKeyAg = try! P256.KeyAgreement.PublicKey(\r\n            rawRepresentation: pubKeyExternRepData.bytes) // &lt;-- var from step 1, crashes here\r\n        \r\n        // get shared secret\r\n        let sharedSecret = try! ourPrivateKey.sharedSecretFromKeyAgreement(\r\n          with: externalPubKeyAg)\r\n        \r\n        print(sharedSecret)\r\n```\r\nThe above will crash with `CryptoKit.CryptoKitError.incorrectParameterSize`. \r\n\r\nAnyway, hoping someone can help me convert the function that&#39;s in NodeJS/Java above into Swift. Thanks! :) ","title":"Derive Shared Secret From ECDH with existing foreign public key - Swift","body":"<p>I'm converting a method that I have working in both NodeJS/Java to Swift but I'm having trouble getting it to work.</p>\n<p>Hoping someone can help me covert this to Swift</p>\n<p>NodeJS Code:</p>\n<pre><code>//the public_key param here is from a different device. \n sign: function(public_key)\n    {\n        //dummy values \n        var PRE_SALT_VALUE = 'f0f0f0f0f0';\n        var POST_SALT_VALUE = '0101010101';\n\n        const crypto = require('crypto');\n        var sha512 = crypto.createHash(&quot;sha512&quot;);\n\n        var EC = require('elliptic').ec;\n        var ec = new EC('p256');\n\n        // Generate keys\n        var key1 = ec.genKeyPair(); //key1 is gen before pub key\n        var key2 = ec.keyFromPublic(public_key, 'hex') //pub key gen from saved cert\n\n        var derived_secret = key1.derive(key2.getPublic()); \n        var derived_secret = Buffer.from(derived_secret.toString(16), 'hex')\n\n        var public_key_client = key1.getPublic('hex') \n\n        var pre_salt = Buffer.from(PRE_SALT_VALUE, 'hex')\n        var post_salt = Buffer.from(POST_SALT_VALUE, 'hex')\n\n        derived_secret = Buffer.from(pre_salt.toString('hex')+derived_secret.toString('hex')+post_salt.toString('hex'), 'hex') // finalyze shared secret \n        // Hash shared secret\n        var sha = sha512.update(derived_secret);\n        derived_secret = sha.digest();\n\n        return {\n            public_key: public_key_client.toString('hex').slice(2), //dropping first byte of compression bits\n            secret: derived_secret.toString('hex')  \n        }\n    }\n</code></pre>\n<p>The same code is also working in Java: See the answer to a similar question I asked a few years ago <a href=\"https://stackoverflow.com/questions/57238837/derive-shared-secret-from-ecdh-with-existing-foreign-public-key\">here</a> if you would like to see the java implementation. This was what originally helped me port it to java.</p>\n<p>How do I add the same logic in Swift (I am a Swift beginner). So far I have tried</p>\n<p><strong>Step 1</strong></p>\n<pre><code>        // certData will be the external cert byte array in der format\n        let certData = Data(bytes: self.cert!, count: self.cert_length!)\n\n        // load the cert so I can read the data\n        guard let certificate = SecCertificateCreateWithData(nil, certData as CFData) else {\n            // todo handle error\n            print(&quot;explode&quot;)\n            return\n        }\n\n        // log public key from cert\n        let publicKey = SecCertificateCopyKey(certificate)!\n        let pubKeyExternRep = SecKeyCopyExternalRepresentation(publicKey, nil)\n        let pubKeyExternRepData:Data = pubKeyExternRep! as Data\n        print(pubKeyExternRepData.bytes) //  printed pub key looks reasonable\n</code></pre>\n<p><strong>Step 2</strong>\nNext I have to generate a new random public/private keypair, so I tried this</p>\n<pre><code>        // Attempt 1 - generate our own random public/private keypair\n        let attributes: [String: Any] = [\n           kSecAttrType as String: kSecAttrKeyTypeECSECPrimeRandom,\n           kSecAttrKeySizeInBits as String: 256,\n           kSecPrivateKeyAttrs as String: [\n              kSecAttrIsPermanent as String: true\n           ]\n        ]\n\n        var error: Unmanaged&lt;CFError&gt;?\n        let ouPrivateKeyAttempt1 = SecKeyCreateRandomKey(attributes as CFDictionary, &amp;error)!\n        let ourPubKeyAttempt1 = SecKeyCopyPublicKey(ouPrivateKeyAttempt1)\n        let ourPubKeyExternRep = SecKeyCopyExternalRepresentation(ourPubKeyAttempt1!, &amp;error)\n        print(&quot;our generated EC public key (65 bytes)&quot;)\n        print(&quot;\\(pubKeyExternRep!)&quot;)\n        // =-=-=--=-=-=-=-==--==-=-=-=- End attempt1\n</code></pre>\n<p><strong>Step 3</strong>\nNext I have to derive the shared secret given the random keypair above the the public external cert. I am pretty lost at this point. I tried something like</p>\n<pre><code>        // our private key agreement (does this generate a new private key, guess we dont need 'Attempt1' above?)\n        let ourPrivateKey = P256.KeyAgreement.PrivateKey()\n        let ourPubKey = ourPrivateKey.publicKey\n        \n        // external device public key agreement given our generated private agreement\n        let externalPubKeyAg = try! P256.KeyAgreement.PublicKey(\n            rawRepresentation: pubKeyExternRepData.bytes) // &lt;-- var from step 1, crashes here\n        \n        // get shared secret\n        let sharedSecret = try! ourPrivateKey.sharedSecretFromKeyAgreement(\n          with: externalPubKeyAg)\n        \n        print(sharedSecret)\n</code></pre>\n<p>The above will crash with <code>CryptoKit.CryptoKitError.incorrectParameterSize</code>.</p>\n<p>Anyway, hoping someone can help me convert the function that's in NodeJS/Java above into Swift. Thanks! :)</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams"],"answers":[{"comments":[{"owner":{"account_id":11944159,"reputation":767,"user_id":8739916,"accept_rate":71,"display_name":"JollyRoger"},"score":0,"creation_date":1672127281,"post_id":74902246,"comment_id":132224776,"body_markdown":"Could you give a short example implementation please? I couldn&#39;t implement it yet.","body":"Could you give a short example implementation please? I couldn&#39;t implement it yet."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1672189731,"post_id":74902246,"comment_id":132239151,"body_markdown":"Look at the parameters for the aggregate function. There&#39;s an initializer function and another one that returns a new object","body":"Look at the parameters for the aggregate function. There&#39;s an initializer function and another one that returns a new object"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671815369,"creation_date":1671815369,"answer_id":74902246,"question_id":74894632,"body_markdown":"&gt; it could be any of my avro schemas for the topic content\r\n\r\nThen you need to `extends ClassWithMinMaxFields`. Otherwise, you will be unable to extract it from generic `SpecificRecordBase` object. \r\n\r\nAlso, your method returns a stream. You cannot `return` the min/max. If that is your objective, you need a plain consumer to scan the whole topic, beginning to (eventual) end. \r\n\r\nTo do this (correctly) with Streams API, you would either \r\n1. need to build a KTable for every value, grouped by key, then do a table scan for the min/max, as you need them. \r\n2. Create a new topic using [`aggregate` DSL function](https://docs.confluent.io/platform/current/streams/developer-guide/dsl-api.html#aggregating), initialized with `{&quot;min&quot;: +Inf, &quot;max&quot;: -Inf}`, then on new records you check old vs new records, if you have a new min and/or max, set them and return the new record. Then, you still need an external consumer to fetch the most recent min/max events. \r\n3. If you had a consistent Avro type, you could use [ksqlDB functions](https://docs.ksqldb.io/en/latest/developer-guide/ksqldb-reference/aggregate-functions/#max) ","title":"Finding min/max values in a KafkaStream (KStream) object","body":"<blockquote>\n<p>it could be any of my avro schemas for the topic content</p>\n</blockquote>\n<p>Then you need to <code>extends ClassWithMinMaxFields</code>. Otherwise, you will be unable to extract it from generic <code>SpecificRecordBase</code> object.</p>\n<p>Also, your method returns a stream. You cannot <code>return</code> the min/max. If that is your objective, you need a plain consumer to scan the whole topic, beginning to (eventual) end.</p>\n<p>To do this (correctly) with Streams API, you would either</p>\n<ol>\n<li>need to build a KTable for every value, grouped by key, then do a table scan for the min/max, as you need them.</li>\n<li>Create a new topic using <a href=\"https://docs.confluent.io/platform/current/streams/developer-guide/dsl-api.html#aggregating\" rel=\"nofollow noreferrer\"><code>aggregate</code> DSL function</a>, initialized with <code>{&quot;min&quot;: +Inf, &quot;max&quot;: -Inf}</code>, then on new records you check old vs new records, if you have a new min and/or max, set them and return the new record. Then, you still need an external consumer to fetch the most recent min/max events.</li>\n<li>If you had a consistent Avro type, you could use <a href=\"https://docs.ksqldb.io/en/latest/developer-guide/ksqldb-reference/aggregate-functions/#max\" rel=\"nofollow noreferrer\">ksqlDB functions</a></li>\n</ol>\n"}],"owner":{"account_id":11944159,"reputation":767,"user_id":8739916,"accept_rate":71,"display_name":"JollyRoger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":117,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671815519,"creation_date":1671749788,"question_id":74894632,"body_markdown":"I have a Kafka Stream application and Avro schemas for each of the topics and also for the key. Key topic schema is same for all. \r\n\r\nNow, there is a KafkaStream (KStream) object with the known key object as the key and a value object (derived from the AvroSchema) which extends `org.apache.avro.specific.SpecificRecordBase` but it could be any of my avro schemas for the topic content. \r\n\r\n`KStream&lt;CustomKey, ? extends SpecificRecordBase&gt; myStream = ...`\r\n\r\nWhat I want to achieve is to run min and max functions on this stream. The problem is that I don&#39;t know what is the `?` object, and as there are 30+ (and will increase in the future) topics, I don&#39;t wanna do a switch-case. So I have the followings:\r\n\r\n\r\n```\r\npublic KStream&lt;CustomKey, ? extends SpecificRecordBase&gt; max(\r\n    final KStream&lt;CustomKey, ? extends SpecificRecordBase&gt; myStream,\r\n    final String attributeName) {\r\n\r\n    SpecificRecordBase maxValue = ...;\r\n    myStream.foreach((key, value) -&gt; {\r\n      value.get(attributeName) // I want to find the max value for this attribute, \r\n                               // but at this point we don&#39;t know it&#39;s type and\r\n                               // and we can&#39;t assign maxValue = value, because this is a lambda \r\n                               // function.\r\n    });\r\n\r\n    // find and return the max value\r\n  }\r\n```\r\nMy question is, how can I calculate the max value for the `myStream` on the `attributeName` attribute?","title":"Finding min/max values in a KafkaStream (KStream) object","body":"<p>I have a Kafka Stream application and Avro schemas for each of the topics and also for the key. Key topic schema is same for all.</p>\n<p>Now, there is a KafkaStream (KStream) object with the known key object as the key and a value object (derived from the AvroSchema) which extends <code>org.apache.avro.specific.SpecificRecordBase</code> but it could be any of my avro schemas for the topic content.</p>\n<p><code>KStream&lt;CustomKey, ? extends SpecificRecordBase&gt; myStream = ...</code></p>\n<p>What I want to achieve is to run min and max functions on this stream. The problem is that I don't know what is the <code>?</code> object, and as there are 30+ (and will increase in the future) topics, I don't wanna do a switch-case. So I have the followings:</p>\n<pre><code>public KStream&lt;CustomKey, ? extends SpecificRecordBase&gt; max(\n    final KStream&lt;CustomKey, ? extends SpecificRecordBase&gt; myStream,\n    final String attributeName) {\n\n    SpecificRecordBase maxValue = ...;\n    myStream.foreach((key, value) -&gt; {\n      value.get(attributeName) // I want to find the max value for this attribute, \n                               // but at this point we don't know it's type and\n                               // and we can't assign maxValue = value, because this is a lambda \n                               // function.\n    });\n\n    // find and return the max value\n  }\n</code></pre>\n<p>My question is, how can I calculate the max value for the <code>myStream</code> on the <code>attributeName</code> attribute?</p>\n"},{"tags":["java","maven","program-entry-point","jar-with-dependencies"],"comments":[{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1671815067,"post_id":74902176,"comment_id":132183083,"body_markdown":"Feed it lots of other jars?","body":"Feed it lots of other jars?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671819700,"post_id":74902176,"comment_id":132184205,"body_markdown":"Maven Shade doesn&#39;t care if there&#39;s a main class","body":"Maven Shade doesn&#39;t care if there&#39;s a main class"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1671819721,"post_id":74902176,"comment_id":132184210,"body_markdown":"Fat jars cannot be used as libraries.","body":"Fat jars cannot be used as libraries."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671819857,"post_id":74902176,"comment_id":132184250,"body_markdown":"@Thorbj&#248;rnRavnAndersen I don&#39;t see why not but having said that, something will have to use that library, which implies at least two jars. If there&#39;s more than one, it really defeats the usual point of a fat jar","body":"@Thorbj&#248;rnRavnAndersen I don&#39;t see why not but having said that, something will have to use that library, which implies at least two jars. If there&#39;s more than one, it really defeats the usual point of a fat jar"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1671822909,"post_id":74902176,"comment_id":132184865,"body_markdown":"@g00se Depends on how the jar is created.  If it is anything but all the files in all the jars repackaged as a single jar, like jars-in-jar, the JVM (and therefore Maven) does not understand them unless you bring in a special classloader.  This is what Spring Boot does, but that does not apply when just put on the classpath.","body":"@g00se Depends on how the jar is created.  If it is anything but all the files in all the jars repackaged as a single jar, like jars-in-jar, the JVM (and therefore Maven) does not understand them unless you bring in a special classloader.  This is what Spring Boot does, but that does not apply when just put on the classpath."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671834453,"post_id":74902176,"comment_id":132187015,"body_markdown":"You can actually create fat jars by just zipping a lot of classes together. That&#39;s precisely how I used to do it in a rather makeshift way with Ant","body":"You can actually create fat jars by just zipping a lot of classes together. That&#39;s precisely how I used to do it in a rather makeshift way with Ant"},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1671841465,"post_id":74902176,"comment_id":132188030,"body_markdown":"Doing it with Maven creates an additional problem that if there is another dependency on an included library (possibly transitive), this is invisible to Maven’s resolver and could result in different versions of the same classes on the classpath.","body":"Doing it with Maven creates an additional problem that if there is another dependency on an included library (possibly transitive), this is invisible to Maven’s resolver and could result in different versions of the same classes on the classpath."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1671841577,"post_id":74902176,"comment_id":132188038,"body_markdown":"The Maven Shade Plug-in works around that problem by rewriting the package names.","body":"The Maven Shade Plug-in works around that problem by rewriting the package names."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1671884445,"post_id":74902176,"comment_id":132192308,"body_markdown":"Using the maven-assembly-plugin should work. If you don&#39;t want a main class, then don&#39;t specify one. Otherwise, please provide a [mre] that show what you&#39;re doing and provides sufficient details about what is going wrong.","body":"Using the maven-assembly-plugin should work. If you don&#39;t want a main class, then don&#39;t specify one. Otherwise, please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that show what you&#39;re doing and provides sufficient details about what is going wrong."}],"owner":{"account_id":20040265,"reputation":11,"user_id":14691110,"display_name":"JPA"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1671884411,"answer_count":0,"score":0,"last_activity_date":1671814880,"creation_date":1671814880,"question_id":74902176,"body_markdown":"I try to create a library by creating a fat jar with maven in IntelliJ. \r\nHowever, in that library I don&#39;t need main class because all methods and classes were tested with unit tests.\r\nSo, the main class is simply there because all java programs need it and if I delete it I would get an error.\r\nHow could I create a jar with dependencies (fat jar or uber jar) without main class?\r\n\r\nI tried to use it with maven assembly plugin.","title":"How can I create FAT JAR using maven without main class?","body":"<p>I try to create a library by creating a fat jar with maven in IntelliJ.\nHowever, in that library I don't need main class because all methods and classes were tested with unit tests.\nSo, the main class is simply there because all java programs need it and if I delete it I would get an error.\nHow could I create a jar with dependencies (fat jar or uber jar) without main class?</p>\n<p>I tried to use it with maven assembly plugin.</p>\n"},{"tags":["java","spring","spring-boot","jpa"],"owner":{"account_id":16375124,"reputation":139,"user_id":11827421,"display_name":"11ohina017"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":126,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671814858,"creation_date":1671814858,"question_id":74902173,"body_markdown":"EntityExistsException for deleteAllinBatch and saveAll in the same transaction in JPA.\r\n\r\nI am flushing after delete, but the following error occurs due to duplicate primary key at save time.\r\n\r\n```java\r\nCaused by: jakarta.persistence.EntityExistsException: \r\n\r\nA different object with the same identifier value was already associated with the session : \r\n\r\n[jp.co.hoge.entities.db.HogeEntitiy#HogeKey(\r\nid1=000000001, id2=000000002)\r\n]\r\n\r\n```\r\n\r\n* DB Entity\r\n\r\n```java\r\npackage jp.co.hoge.entities;\r\n\r\nimport lombok.Data;\r\nimport org.springframework.data.domain.Persistable;\r\n\r\n@Data\r\npublic abstract class BaseDbEntity&lt;T&gt; implements Persistable&lt;T&gt; {\r\n\r\n    private boolean newFlag = true;\r\n\r\n    @Override\r\n    public boolean isNew() {\r\n        return newFlag;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\npackage jp.co.hoge.entities.db;\r\n\r\nimport jakarta.persistence.*;\r\nimport jp.co.hoge.entities.BaseDbEntity;\r\nimport lombok.Data;\r\nimport lombok.EqualsAndHashCode;\r\nimport lombok.ToString;\r\n\r\nimport java.math.BigDecimal;\r\n\r\n@Entity\r\n@Table(name = &quot;hoge_table&quot;)\r\n@Data\r\n@EqualsAndHashCode(callSuper=true)\r\n@ToString(callSuper=true)\r\npublic class HogenEntitiy extends BaseDbEntity&lt;HogeKey&gt; {\r\n\r\n    public HogenEntitiy() {\r\n    }\r\n\r\n    public HogenEntitiy(HogeKey primaryKey, String a, BigDecimal b) {\r\n        this.primaryKey = primaryKey;\r\n        this.a = a;\r\n        this.b = b;\r\n    }\r\n\r\n    @EmbeddedId\r\n    private HogeKey primaryKey;\r\n\r\n    @Column(name = &quot;A&quot;)\r\n    private String a;\r\n\r\n    @Column(name = &quot;B&quot;)\r\n    private BigDecimal b;\r\n\r\n    @Override\r\n    public HogeKey getId() {\r\n        return this.primaryKey;\r\n    }\r\n}\r\n```\r\n\r\n```java\r\n@Embeddable\r\n@Data\r\npublic class HogeKey implements Serializable {\r\n\r\n    @Column(name = &quot;id1&quot;, nullable = false)\r\n    private String id1;\r\n\r\n    @Column(name = &quot;id2&quot;, nullable = false)\r\n    private String id2;\r\n\r\n}\r\n```\r\n\r\n* Repo\r\n\r\n```java\r\npackage jp.co.hoge.repositories.db;\r\n\r\nimport jp.co.hoge.entities.db.HogeEntitiy;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.data.jpa.repository.Modifying;\r\nimport org.springframework.data.jpa.repository.Query;\r\nimport org.springframework.data.repository.query.Param;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\npublic interface HogeRepository extends JpaRepository&lt;HogeEntitiy, String&gt; {\r\n\r\n}\r\n```\r\n\r\n* Logic\r\n\r\n```java\r\n    @Autowired\r\n    private HogeRepository hogeRepository;\r\n・\r\n・\r\n・\r\n    @Transactional\r\n    public void deleteAndSave(List&lt;HogeEntitiy&gt; entitiyList) throws Exception {\r\n\r\n        hogeRepository.deleteAllInBatch();\r\n        hogeRepository.flush();\r\n        if(hogeRepository.count() == 0) {\r\n            hogeRepository.saveAllAndFlush(entitiyList);\r\n        }\r\n\r\n}\r\n```\r\n\r\n* insert data\r\n\r\n```\r\n000000001, 000000002, a1, 1\r\n000000001, 000000003, a2, 2\r\n```\r\n\r\nWhy do I get duplicate primary keys even though I flush after delete? is the reason why duplicate primary keys occur?\r\n","title":"EntityExistsException occurs when using deleteAllinBatch and saveAll in the same transaction in JPA","body":"<p>EntityExistsException for deleteAllinBatch and saveAll in the same transaction in JPA.</p>\n<p>I am flushing after delete, but the following error occurs due to duplicate primary key at save time.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Caused by: jakarta.persistence.EntityExistsException: \n\nA different object with the same identifier value was already associated with the session : \n\n[jp.co.hoge.entities.db.HogeEntitiy#HogeKey(\nid1=000000001, id2=000000002)\n]\n\n</code></pre>\n<ul>\n<li>DB Entity</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package jp.co.hoge.entities;\n\nimport lombok.Data;\nimport org.springframework.data.domain.Persistable;\n\n@Data\npublic abstract class BaseDbEntity&lt;T&gt; implements Persistable&lt;T&gt; {\n\n    private boolean newFlag = true;\n\n    @Override\n    public boolean isNew() {\n        return newFlag;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package jp.co.hoge.entities.db;\n\nimport jakarta.persistence.*;\nimport jp.co.hoge.entities.BaseDbEntity;\nimport lombok.Data;\nimport lombok.EqualsAndHashCode;\nimport lombok.ToString;\n\nimport java.math.BigDecimal;\n\n@Entity\n@Table(name = &quot;hoge_table&quot;)\n@Data\n@EqualsAndHashCode(callSuper=true)\n@ToString(callSuper=true)\npublic class HogenEntitiy extends BaseDbEntity&lt;HogeKey&gt; {\n\n    public HogenEntitiy() {\n    }\n\n    public HogenEntitiy(HogeKey primaryKey, String a, BigDecimal b) {\n        this.primaryKey = primaryKey;\n        this.a = a;\n        this.b = b;\n    }\n\n    @EmbeddedId\n    private HogeKey primaryKey;\n\n    @Column(name = &quot;A&quot;)\n    private String a;\n\n    @Column(name = &quot;B&quot;)\n    private BigDecimal b;\n\n    @Override\n    public HogeKey getId() {\n        return this.primaryKey;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Embeddable\n@Data\npublic class HogeKey implements Serializable {\n\n    @Column(name = &quot;id1&quot;, nullable = false)\n    private String id1;\n\n    @Column(name = &quot;id2&quot;, nullable = false)\n    private String id2;\n\n}\n</code></pre>\n<ul>\n<li>Repo</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>package jp.co.hoge.repositories.db;\n\nimport jp.co.hoge.entities.db.HogeEntitiy;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.data.jpa.repository.Modifying;\nimport org.springframework.data.jpa.repository.Query;\nimport org.springframework.data.repository.query.Param;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface HogeRepository extends JpaRepository&lt;HogeEntitiy, String&gt; {\n\n}\n</code></pre>\n<ul>\n<li>Logic</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>    @Autowired\n    private HogeRepository hogeRepository;\n・\n・\n・\n    @Transactional\n    public void deleteAndSave(List&lt;HogeEntitiy&gt; entitiyList) throws Exception {\n\n        hogeRepository.deleteAllInBatch();\n        hogeRepository.flush();\n        if(hogeRepository.count() == 0) {\n            hogeRepository.saveAllAndFlush(entitiyList);\n        }\n\n}\n</code></pre>\n<ul>\n<li>insert data</li>\n</ul>\n<pre><code>000000001, 000000002, a1, 1\n000000001, 000000003, a2, 2\n</code></pre>\n<p>Why do I get duplicate primary keys even though I flush after delete? is the reason why duplicate primary keys occur?</p>\n"},{"tags":["java","hashmap"],"comments":[{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":2,"creation_date":1671813077,"post_id":74901815,"comment_id":132182561,"body_markdown":"`response.get(&quot;result&quot;)` isn&#39;t a Map, it&#39;s a List","body":"<code>response.get(&quot;result&quot;)</code> isn&#39;t a Map, it&#39;s a List"},{"owner":{"display_name":"user20848574"},"score":0,"creation_date":1671813398,"post_id":74901815,"comment_id":132182636,"body_markdown":"@azro , do u konw how to achive this? I need to get value1 and value2 from this. There is only one array of object inside.","body":"@azro , do u konw how to achive this? I need to get value1 and value2 from this. There is only one array of object inside."},{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1671814262,"post_id":74901815,"comment_id":132182851,"body_markdown":"Achieve what ? We don&#39;t know the initial class of `response`. Cas it into a List instead of a Map, and use it like a list","body":"Achieve what ? We don&#39;t know the initial class of <code>response</code>. Cas it into a List instead of a Map, and use it like a list"},{"owner":{"display_name":"user20848574"},"score":0,"creation_date":1671814549,"post_id":74901815,"comment_id":132182928,"body_markdown":"@azro this is the type of response -----&gt;  HashMap&lt;String, Object&gt; response","body":"@azro this is the type of response -----&gt;  HashMap&lt;String, Object&gt; response"},{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1671814598,"post_id":74901815,"comment_id":132182949,"body_markdown":"And what about casting it to list and use like a list then ?","body":"And what about casting it to list and use like a list then ?"},{"owner":{"display_name":"user20848574"},"score":0,"creation_date":1671814641,"post_id":74901815,"comment_id":132182958,"body_markdown":"Right, will do like that. Thanks","body":"Right, will do like that. Thanks"}],"answers":[{"comments":[{"owner":{"display_name":"user20848574"},"score":0,"creation_date":1671815069,"post_id":74902148,"comment_id":132183085,"body_markdown":"Just to understand,  response.get(&quot;result&quot;).get(0).get(&quot;serial&quot;).get(&quot;id&quot;) @azro is this wrong?","body":"Just to understand,  response.get(&quot;result&quot;).get(0).get(&quot;serial&quot;).get(&quot;id&quot;) @azro is this wrong?"},{"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"score":0,"creation_date":1671815123,"post_id":74902148,"comment_id":132183100,"body_markdown":"@Nickjonas Does it raise an error ? If you don&#39;t cast, you have `Object` and you can&#39;t call the `get` methods","body":"@Nickjonas Does it raise an error ? If you don&#39;t cast, you have <code>Object</code> and you can&#39;t call the <code>get</code> methods"}],"tags":[],"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671814674,"creation_date":1671814674,"answer_id":74902148,"question_id":74901815,"body_markdown":"You&#39;re missing the `List` level\r\n\r\n    List&lt;Object&gt; result = (List&lt;Object&gt;) response.get(&quot;result&quot;);\r\n    HashMap&lt;String,Object&gt; item = (HashMap&lt;String,Object&gt;) result.get(0);\r\n    HashMap&lt;String,String&gt; desc = (&lt;String,String&gt;) item.get(&quot;desc&quot;);\r\n    map.put(&quot;value1&quot;, desc.get(&quot;value1&quot;));\r\n    map.put(&quot;value2&quot;, desc.get(&quot;value2&quot;));","title":"Read hashmap with inner array of objects in java","body":"<p>You're missing the <code>List</code> level</p>\n<pre><code>List&lt;Object&gt; result = (List&lt;Object&gt;) response.get(&quot;result&quot;);\nHashMap&lt;String,Object&gt; item = (HashMap&lt;String,Object&gt;) result.get(0);\nHashMap&lt;String,String&gt; desc = (&lt;String,String&gt;) item.get(&quot;desc&quot;);\nmap.put(&quot;value1&quot;, desc.get(&quot;value1&quot;));\nmap.put(&quot;value2&quot;, desc.get(&quot;value2&quot;));\n</code></pre>\n"}],"owner":{"display_name":"user20848574"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74902148,"answer_count":1,"score":0,"last_activity_date":1671814674,"creation_date":1671812495,"question_id":74901815,"body_markdown":"This is a result I get from a hashmap in java. How do we read this and extract value1 and value2 and put them inside another hash map? And only one array of object inside.\r\n\r\n\r\n```\r\n{\r\n    &quot;result&quot;: [\r\n        {\r\n            &quot;desc&quot;: {\r\n                &quot;value1&quot;: &quot;&quot;,\r\n                &quot;value2 &quot;&quot;\r\n            }\r\n        }\r\n    ]\r\n}\r\n```\r\n\r\nThis is the method tried,\r\n\r\n```HashMap map = new HashMap&lt;&gt;();\r\nHashMap result = (HashMap) response.get(&quot;result&quot;);\r\nHashMap desc = (HashMap) result.get(&quot;desc&quot;);\r\nmap.put(&quot;value1&quot;, desc.get(&quot;value1&quot;));\r\nmap.put(&quot;value2&quot;, desc.get(&quot;value2&quot;));","title":"Read hashmap with inner array of objects in java","body":"<p>This is a result I get from a hashmap in java. How do we read this and extract value1 and value2 and put them inside another hash map? And only one array of object inside.</p>\n<pre><code>{\n    &quot;result&quot;: [\n        {\n            &quot;desc&quot;: {\n                &quot;value1&quot;: &quot;&quot;,\n                &quot;value2 &quot;&quot;\n            }\n        }\n    ]\n}\n</code></pre>\n<p>This is the method tried,</p>\n<pre><code>HashMap result = (HashMap) response.get(&quot;result&quot;);\nHashMap desc = (HashMap) result.get(&quot;desc&quot;);\nmap.put(&quot;value1&quot;, desc.get(&quot;value1&quot;));\nmap.put(&quot;value2&quot;, desc.get(&quot;value2&quot;));\n</code></pre>\n"},{"tags":["java","interface"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1671814316,"post_id":74902009,"comment_id":132182864,"body_markdown":"As an aside don’t use `Date`. That class is poorly designed and long outdated. Instead use `Instant or another class` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/).","body":"As an aside don’t use <code>Date</code>. That class is poorly designed and long outdated. Instead use <code>Instant or another class</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>."}],"answers":[{"comments":[{"owner":{"account_id":11644799,"reputation":170,"user_id":8528063,"accept_rate":100,"display_name":"Jamie"},"score":0,"creation_date":1671814598,"post_id":74902079,"comment_id":132182950,"body_markdown":"Thanks. I knew there must be something simple like that. I think I even tried something close to it but would have missed the `T` following `&lt;T extends IHasDate&gt;`.","body":"Thanks. I knew there must be something simple like that. I think I even tried something close to it but would have missed the <code>T</code> following <code>&lt;T extends IHasDate&gt;</code>."}],"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671814156,"creation_date":1671814156,"answer_id":74902079,"question_id":74902009,"body_markdown":"You are *sooo* close. &#128578;\r\n```Java\r\npublic &lt;T extends IHasDate&gt; T getUpcoming(List&lt;T&gt; dates) {\r\n//...\r\n}\r\n```","title":"Method to return the same interface implementation as passed in","body":"<p>You are <em>sooo</em> close. 🙂</p>\n<pre><code>public &lt;T extends IHasDate&gt; T getUpcoming(List&lt;T&gt; dates) {\n//...\n}\n</code></pre>\n"}],"owner":{"account_id":11644799,"reputation":170,"user_id":8528063,"accept_rate":100,"display_name":"Jamie"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74902079,"answer_count":1,"score":0,"last_activity_date":1671814505,"creation_date":1671813735,"question_id":74902009,"body_markdown":"I&#39;ve seen similar questions, but I don&#39;t really feel like I have an understanding of how to solve this. I want to make a method that takes a list of any class that implements an interface and returns an object of the same class.\r\n\r\nI was hoping something like this would work.\r\n\r\n```java\r\npublic interface IHasDate {\r\n  public Date getDate();\r\n}\r\n\r\npublic class A implements IHasDate {\r\n  private Date date;\r\n  public Date getDate(){ return date; }\r\n}\r\n\r\npublic class B implements IHasDate {\r\n  private Date date;\r\n  public Date getDate(){ return date; }\r\n}\r\n\r\npublic class Util {\r\n  public IHasDate getUpcoming(List&lt;IHasDate&gt; dates) {\r\n    // logic omitted to find the object with the next upcoming date\r\n    return dates.get(next);\r\n  }\r\n}\r\n\r\npublic class X {\r\n  private List&lt;A&gt; aList;\r\n  public A getUpcoming() {\r\n    return Util.getUpcoming(aList);\r\n  }\r\n}\r\n```\r\n\r\nWhat I&#39;m really trying to do is just avoid writing `getUpcoming(List&lt;?&gt; aList)` for each class that has a list of IHasDate&#39;s.\r\n\r\nIs there a better strategy for what I&#39;m trying to do?\r\n\r\nRight now I&#39;ve been able to get around it by having a function that takes a list of IHasDate&#39;s and returns the index of the upcoming object in the list, but I have to create a new list of IHasDate&#39;s from aList first and it all just feels kind of clunky.\r\n\r\nWhat I was hoping for was something along these lines.\r\n\r\n```java\r\npublic T getUpcoming(List&lt;T implements IHasDate&gt; dates) {\r\n  //...\r\n}\r\n```","title":"Method to return the same interface implementation as passed in","body":"<p>I've seen similar questions, but I don't really feel like I have an understanding of how to solve this. I want to make a method that takes a list of any class that implements an interface and returns an object of the same class.</p>\n<p>I was hoping something like this would work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface IHasDate {\n  public Date getDate();\n}\n\npublic class A implements IHasDate {\n  private Date date;\n  public Date getDate(){ return date; }\n}\n\npublic class B implements IHasDate {\n  private Date date;\n  public Date getDate(){ return date; }\n}\n\npublic class Util {\n  public IHasDate getUpcoming(List&lt;IHasDate&gt; dates) {\n    // logic omitted to find the object with the next upcoming date\n    return dates.get(next);\n  }\n}\n\npublic class X {\n  private List&lt;A&gt; aList;\n  public A getUpcoming() {\n    return Util.getUpcoming(aList);\n  }\n}\n</code></pre>\n<p>What I'm really trying to do is just avoid writing <code>getUpcoming(List&lt;?&gt; aList)</code> for each class that has a list of IHasDate's.</p>\n<p>Is there a better strategy for what I'm trying to do?</p>\n<p>Right now I've been able to get around it by having a function that takes a list of IHasDate's and returns the index of the upcoming object in the list, but I have to create a new list of IHasDate's from aList first and it all just feels kind of clunky.</p>\n<p>What I was hoping for was something along these lines.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public T getUpcoming(List&lt;T implements IHasDate&gt; dates) {\n  //...\n}\n</code></pre>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"account_id":7248179,"reputation":1545,"user_id":5529417,"display_name":"Seth"},"score":0,"creation_date":1461842054,"post_id":36912914,"comment_id":61387986,"body_markdown":"This question would probably be better suited for CodeReview I think. But your solution doesn&#39;t look bad tbh.","body":"This question would probably be better suited for CodeReview I think. But your solution doesn&#39;t look bad tbh."},{"owner":{"account_id":27543,"reputation":7198,"user_id":72810,"accept_rate":61,"display_name":"lexicalscope"},"score":0,"creation_date":1461842211,"post_id":36912914,"comment_id":61388110,"body_markdown":"http://stackoverflow.com/questions/17095628/loop-over-all-fields-in-a-java-class","body":"<a href=\"http://stackoverflow.com/questions/17095628/loop-over-all-fields-in-a-java-class\" title=\"loop over all fields in a java class\">stackoverflow.com/questions/17095628/&hellip;</a>"},{"owner":{"account_id":2934181,"reputation":11458,"user_id":2513573,"accept_rate":76,"display_name":"AdamSkywalker"},"score":0,"creation_date":1461842304,"post_id":36912914,"comment_id":61388178,"body_markdown":"Since you add functions to list, it is not better than creating a simple method where you check fields one by one","body":"Since you add functions to list, it is not better than creating a simple method where you check fields one by one"},{"owner":{"account_id":439098,"reputation":4236,"user_id":4274119,"accept_rate":83,"display_name":"justAbit"},"score":0,"creation_date":1461842402,"post_id":36912914,"comment_id":61388263,"body_markdown":"@AdamSkywalker Can you please suggest a better solution?","body":"@AdamSkywalker Can you please suggest a better solution?"},{"owner":{"account_id":2934181,"reputation":11458,"user_id":2513573,"accept_rate":76,"display_name":"AdamSkywalker"},"score":0,"creation_date":1461842602,"post_id":36912914,"comment_id":61388381,"body_markdown":"I would just check each field and count the sum, one minute of code with same result","body":"I would just check each field and count the sum, one minute of code with same result"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1461844324,"post_id":36912914,"comment_id":61389654,"body_markdown":"This use of `Optional` doesn’t make any sense…","body":"This use of <code>Optional</code> doesn’t make any sense…"}],"answers":[{"comments":[{"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"score":2,"creation_date":1461842455,"post_id":36913013,"comment_id":61388294,"body_markdown":"@Tom Oh correct, I didn&#39;t notice and edited. Thanks!","body":"@Tom Oh correct, I didn&#39;t notice and edited. Thanks!"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1461844278,"post_id":36913013,"comment_id":61389615,"body_markdown":"@Tom: this only reflects the inconsistency of the question itself, having “Count null fields” in the title but “count non `null` fields” in its body.","body":"@Tom: this only reflects the inconsistency of the question itself, having “Count null fields” in the title but “count non <code>null</code> fields” in its body."},{"owner":{"account_id":439098,"reputation":4236,"user_id":4274119,"accept_rate":83,"display_name":"justAbit"},"score":2,"creation_date":1461844907,"post_id":36913013,"comment_id":61390135,"body_markdown":"@Holger Thanks for pointing that out, I have updated question title.","body":"@Holger Thanks for pointing that out, I have updated question title."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1461845064,"post_id":36913013,"comment_id":61390247,"body_markdown":"Of course, instead of `.map(f -&gt; f.apply(t)).filter(Objects::nonNull)` you could just write `.filter(f -&gt; f.apply(t)!=null)`, but that’s a matter of taste.","body":"Of course, instead of <code>.map(f -&gt; f.apply(t)).filter(Objects::nonNull)</code> you could just write <code>.filter(f -&gt; f.apply(t)!=null)</code>, but that’s a matter of taste."}],"tags":[],"owner":{"account_id":1936546,"reputation":133675,"user_id":1743880,"accept_rate":100,"display_name":"Tunaki"},"comment_count":4,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1461844826,"creation_date":1461842114,"answer_id":36913013,"question_id":36912914,"body_markdown":"You can simply a lot your code by creating a Stream over the given list of functions:\r\n\r\n\tpublic static &lt;T&gt; long getNonNullFieldCount(T t, List&lt;Function&lt;? super T, ?&gt;&gt; functionList) {\r\n\t    return functionList.stream().map(f -&gt; f.apply(t)).filter(Objects::nonNull).count();\r\n\t}\r\n\r\nThis will return the count of non-`null` fields returned by each function. Each function is mapped to the result of applying it to the given object and `null` fields are filtered out with the predicate [`Objects::nonNull`](https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#nonNull-java.lang.Object-).","title":"Count non null fields in an object","body":"<p>You can simply a lot your code by creating a Stream over the given list of functions:</p>\n\n<pre><code>public static &lt;T&gt; long getNonNullFieldCount(T t, List&lt;Function&lt;? super T, ?&gt;&gt; functionList) {\n    return functionList.stream().map(f -&gt; f.apply(t)).filter(Objects::nonNull).count();\n}\n</code></pre>\n\n<p>This will return the count of non-<code>null</code> fields returned by each function. Each function is mapped to the result of applying it to the given object and <code>null</code> fields are filtered out with the predicate <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Objects.html#nonNull-java.lang.Object-\" rel=\"noreferrer\"><code>Objects::nonNull</code></a>.</p>\n"},{"tags":[],"owner":{"account_id":16638988,"reputation":158,"user_id":12025006,"display_name":"flaviuratiu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671814140,"creation_date":1671553096,"answer_id":74865954,"question_id":36912914,"body_markdown":"I wrote a utility class to get the total count of readable properties and the count of non null values in an object. The completion percentage can be calculated based on these.\r\n\r\nIt should work pretty well with inherited properties, nested properties, (multi-dimensional) iterables and maps.\r\n\r\nI couldn&#39;t include the tests as well in here, because of the character limit, but here&#39;s the utility class:\r\n\r\n```\r\nimport lombok.*;\r\n\r\nimport java.beans.IntrospectionException;\r\nimport java.beans.PropertyDescriptor;\r\nimport java.lang.reflect.Field;\r\nimport java.lang.reflect.Method;\r\nimport java.lang.reflect.ParameterizedType;\r\nimport java.lang.reflect.Type;\r\nimport java.util.*;\r\nimport java.util.stream.Stream;\r\nimport java.util.stream.StreamSupport;\r\n\r\npublic class PropertyCountUtils {\r\n\r\n    /***\r\n     * See {@link #getReadablePropertyValueCount(Object, Set)}.\r\n     */\r\n    public static PropertyValueCount getReadablePropertyValueCount(@NonNull Object object) {\r\n        return getReadablePropertyValueCount(object, null);\r\n    }\r\n\r\n    /**\r\n     * Counts the properties of the given object, including inherited and nested properties,\r\n     * returning the total property count and the count of properties with assigned values.\r\n     *\r\n     * &lt;p&gt;\r\n     * Properties with assigned values have a value meeting all conditions below:\r\n     * &lt;ul&gt;\r\n     * &lt;li&gt;different from null&lt;/li&gt;\r\n     * &lt;li&gt;different from an empty iterable or an empty map&lt;/li&gt;\r\n     * &lt;li&gt;different from an iterable containing only null values&lt;/li&gt;\r\n     * &lt;li&gt;different from a map containing only null values.&lt;/li&gt;\r\n     * &lt;/ul&gt;\r\n     * For multidimensional Iterables and Maps, these conditions apply to each dimension.\r\n     * &lt;/p&gt;\r\n     *\r\n     * @param object            The object to inspect. It should not be null.\r\n     * @param ignoredProperties The properties to ignore or null.\r\n     *                          For nested properties, use dot as a separator: &quot;property1.nestedProperty.nestedProperty2&quot;\r\n     * @return A pair of `assignedValueCount` (properties with assigned value) and `totalCount` (total property count).\r\n     */\r\n    public static PropertyValueCount getReadablePropertyValueCount(\r\n            @NonNull Object object, Set&lt;String&gt; ignoredProperties) {\r\n        PropertyValueCount countHolder = new PropertyValueCount();\r\n        processReadablePropertyValueCount(countHolder, object, ignoredProperties, null);\r\n        return countHolder;\r\n    }\r\n\r\n    /***\r\n     * @return true if the object had at least one non-null property value or no readable properties.\r\n     * &lt;p&gt;\r\n     * If the object is an instance of String, for example, it would have no readable nested properties.\r\n     * Also, if the object is an instance of some class for which all nested properties are ignored,\r\n     * the method would return true, since the object itself has a non-null value,\r\n     * but the caller decided to ignore all properties.\r\n     * &lt;/p&gt;\r\n     */\r\n    @SneakyThrows\r\n    private static boolean processReadablePropertyValueCount(\r\n            PropertyValueCount countHolder, @NonNull Object object, Set&lt;String&gt; ignoredProperties, String parentPath) {\r\n        boolean objectHasAssignedProperties = false;\r\n        boolean objectHasNoReadableProperties = true;\r\n\r\n        List&lt;Field&gt; fields = getAllDeclaredFields(object.getClass());\r\n\r\n        for (Field field : fields) {\r\n            String fieldPath = buildFieldPath(parentPath, field);\r\n\r\n            Method readMethod = getReadMethod(object.getClass(), ignoredProperties, field, fieldPath);\r\n            if (readMethod == null) {\r\n                continue;\r\n            }\r\n\r\n            countHolder.setTotalCount(countHolder.getTotalCount() + 1);\r\n            objectHasNoReadableProperties = false;\r\n\r\n            Object value = readMethod.invoke(object);\r\n\r\n            if (value == null || isCollectionWithoutAnyNonNullValue(value)) {\r\n\r\n                // no assigned value, so we&#39;ll just count the total available properties\r\n                int readablePropertyValueCount = getReadablePropertyCount(\r\n                        readMethod.getGenericReturnType(), ignoredProperties, fieldPath);\r\n                countHolder.setTotalCount(countHolder.getTotalCount() + readablePropertyValueCount);\r\n\r\n            } else if (value instanceof Iterable&lt;?&gt; iterable) {\r\n                processPropertyValueCountInIterable(countHolder, ignoredProperties, fieldPath, iterable);\r\n\r\n            } else if (value instanceof Map&lt;?, ?&gt; map) {\r\n                processPropertyValueCountInIterable(countHolder, ignoredProperties, fieldPath, map.values());\r\n\r\n            } else {\r\n                countHolder.setAssignedValueCount(countHolder.getAssignedValueCount() + 1);\r\n\r\n                // process properties of nested object\r\n                processReadablePropertyValueCount(countHolder, value, ignoredProperties, fieldPath);\r\n                objectHasAssignedProperties = true;\r\n            }\r\n        }\r\n\r\n        return objectHasAssignedProperties || objectHasNoReadableProperties;\r\n    }\r\n\r\n    private static void processPropertyValueCountInIterable(\r\n            PropertyValueCount countHolder, Set&lt;String&gt; ignoredProperties, String fieldPath, Iterable&lt;?&gt; iterable) {\r\n        boolean iterableHasNonNullValues = false;\r\n\r\n        // process properties of each item in the iterable\r\n        for (Object value : iterable) {\r\n            if (value != null) {\r\n                // check if the current iterable item is also an iterable itself\r\n                Optional&lt;Iterable&lt;?&gt;&gt; nestedIterable = getProcessableCollection(value);\r\n                if (nestedIterable.isPresent()) {\r\n                    processPropertyValueCountInIterable(countHolder, ignoredProperties, fieldPath, nestedIterable.get());\r\n                } else {\r\n                    iterableHasNonNullValues = processReadablePropertyValueCount(\r\n                            countHolder, value, ignoredProperties, fieldPath);\r\n                }\r\n            }\r\n        }\r\n\r\n        // consider the iterable as having an assigned value only if it contains at least one non-null value\r\n        if (iterableHasNonNullValues) {\r\n            countHolder.setAssignedValueCount(countHolder.getAssignedValueCount() + 1);\r\n        }\r\n    }\r\n\r\n    @SneakyThrows\r\n    private static int getReadablePropertyCount(\r\n            @NonNull Type inspectedType, Set&lt;String&gt; ignoredProperties, String parentPath) {\r\n        int totalReadablePropertyCount = 0;\r\n\r\n        Class&lt;?&gt; inspectedClass = getTargetClassFromGenericType(inspectedType);\r\n        List&lt;Field&gt; fields = getAllDeclaredFields(inspectedClass);\r\n\r\n        for (Field field : fields) {\r\n            String fieldPath = buildFieldPath(parentPath, field);\r\n\r\n            Method readMethod = getReadMethod(inspectedClass, ignoredProperties, field, fieldPath);\r\n\r\n            if (readMethod != null) {\r\n                totalReadablePropertyCount++;\r\n\r\n                Class&lt;?&gt; returnType = getTargetClassFromGenericType(readMethod.getGenericReturnType());\r\n\r\n                // process properties of nested class, avoiding infinite loops\r\n                if (!hasCircularTypeReference(inspectedClass, returnType)) {\r\n                    int readablePropertyValueCount = getReadablePropertyCount(\r\n                            returnType, ignoredProperties, fieldPath);\r\n\r\n                    totalReadablePropertyCount += readablePropertyValueCount;\r\n                }\r\n            }\r\n        }\r\n\r\n        return totalReadablePropertyCount;\r\n    }\r\n\r\n    // In case the object being analyzed is of parameterized type,\r\n    // we want to count the properties in the class of the parameter, not of the container.\r\n    private static Class&lt;?&gt; getTargetClassFromGenericType(Type type) {\r\n        if (type instanceof ParameterizedType parameterizedType) {\r\n            Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();\r\n\r\n            if (actualTypeArguments.length &gt; 0) {\r\n                // Inspect the last parameter type.\r\n                // For example, lists would only have one parameter type,\r\n                // but in the case of maps we would inspect the parameter representing the entry value, not the entry key.\r\n                Type inspectedTypeArgument = actualTypeArguments[actualTypeArguments.length - 1];\r\n\r\n                return inspectedTypeArgument instanceof ParameterizedType ?\r\n                        getTargetClassFromGenericType(inspectedTypeArgument) :\r\n                        (Class&lt;?&gt;) inspectedTypeArgument;\r\n            }\r\n        }\r\n\r\n        return type instanceof Class&lt;?&gt; ? (Class&lt;?&gt;) type : type.getClass();\r\n    }\r\n\r\n    private static List&lt;Field&gt; getAllDeclaredFields(@NonNull Class&lt;?&gt; inspectedClass) {\r\n        List&lt;Field&gt; fields = new ArrayList&lt;&gt;();\r\n        Collections.addAll(fields, inspectedClass.getDeclaredFields());\r\n\r\n        Class&lt;?&gt; superClass = inspectedClass.getSuperclass();\r\n        while (superClass != null) {\r\n            Collections.addAll(fields, superClass.getDeclaredFields());\r\n\r\n            superClass = superClass.getSuperclass();\r\n        }\r\n        return fields;\r\n    }\r\n\r\n    private static Method getReadMethod(@NonNull Class&lt;?&gt; inspectedClass, Set&lt;String&gt; ignoredProperties, Field field, String fieldPath) {\r\n        if (ignoredProperties != null &amp;&amp; ignoredProperties.contains(fieldPath)) {\r\n            return null;\r\n        }\r\n\r\n        PropertyDescriptor propertyDescriptor;\r\n        try {\r\n            propertyDescriptor = new PropertyDescriptor(field.getName(), inspectedClass);\r\n        } catch (IntrospectionException e) {\r\n            // statement reached when the field doesn&#39;t have a getter\r\n            return null;\r\n        }\r\n\r\n        return propertyDescriptor.getReadMethod();\r\n    }\r\n\r\n    private static boolean hasCircularTypeReference(Class&lt;?&gt; propertyContainerClass, Class&lt;?&gt; propertyType) {\r\n        return propertyContainerClass.isAssignableFrom(propertyType);\r\n    }\r\n\r\n    private static String buildFieldPath(String parentPath, Field field) {\r\n        return parentPath == null ? field.getName() : parentPath + &quot;.&quot; + field.getName();\r\n    }\r\n\r\n    private static boolean isCollectionWithoutAnyNonNullValue(Object value) {\r\n        Stream&lt;?&gt; stream = null;\r\n        if (value instanceof Iterable&lt;?&gt; iterable) {\r\n            stream = StreamSupport.stream(iterable.spliterator(), false);\r\n        } else if (value instanceof Map&lt;?, ?&gt; map) {\r\n            stream = map.values().stream();\r\n        }\r\n\r\n        return stream != null &amp;&amp;\r\n                stream.noneMatch(item -&gt; item != null &amp;&amp; !isCollectionWithoutAnyNonNullValue(item));\r\n    }\r\n\r\n    private static Optional&lt;Iterable&lt;?&gt;&gt; getProcessableCollection(Object value) {\r\n        if (value instanceof Iterable&lt;?&gt; iterable) {\r\n            return Optional.of(iterable);\r\n        } else if (value instanceof Map&lt;?, ?&gt; map) {\r\n            return Optional.of(map.values());\r\n        }\r\n        return Optional.empty();\r\n    }\r\n\r\n    @Data\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    @Builder\r\n    public static class PropertyValueCount {\r\n        private int assignedValueCount;\r\n        private int totalCount;\r\n    }\r\n}\r\n```\r\n\r\nThe completion percentage can be calculated like this:\r\n```\r\nPropertyCountUtils.PropertyValueCount propertyValueCount = getReadablePropertyValueCount(profile);\r\n\r\nBigDecimal profileCompletionPercentage = BigDecimal.valueOf(propertyValueCount.getNonNullValueCount())\r\n    .multiply(BigDecimal.valueOf(100))\r\n                .divide(BigDecimal.valueOf(propertyValueCount.getTotalCount()), 2, RoundingMode.UP)\r\n                .stripTrailingZeros();\r\n```","title":"Count non null fields in an object","body":"<p>I wrote a utility class to get the total count of readable properties and the count of non null values in an object. The completion percentage can be calculated based on these.</p>\n<p>It should work pretty well with inherited properties, nested properties, (multi-dimensional) iterables and maps.</p>\n<p>I couldn't include the tests as well in here, because of the character limit, but here's the utility class:</p>\n<pre><code>import lombok.*;\n\nimport java.beans.IntrospectionException;\nimport java.beans.PropertyDescriptor;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.ParameterizedType;\nimport java.lang.reflect.Type;\nimport java.util.*;\nimport java.util.stream.Stream;\nimport java.util.stream.StreamSupport;\n\npublic class PropertyCountUtils {\n\n    /***\n     * See {@link #getReadablePropertyValueCount(Object, Set)}.\n     */\n    public static PropertyValueCount getReadablePropertyValueCount(@NonNull Object object) {\n        return getReadablePropertyValueCount(object, null);\n    }\n\n    /**\n     * Counts the properties of the given object, including inherited and nested properties,\n     * returning the total property count and the count of properties with assigned values.\n     *\n     * &lt;p&gt;\n     * Properties with assigned values have a value meeting all conditions below:\n     * &lt;ul&gt;\n     * &lt;li&gt;different from null&lt;/li&gt;\n     * &lt;li&gt;different from an empty iterable or an empty map&lt;/li&gt;\n     * &lt;li&gt;different from an iterable containing only null values&lt;/li&gt;\n     * &lt;li&gt;different from a map containing only null values.&lt;/li&gt;\n     * &lt;/ul&gt;\n     * For multidimensional Iterables and Maps, these conditions apply to each dimension.\n     * &lt;/p&gt;\n     *\n     * @param object            The object to inspect. It should not be null.\n     * @param ignoredProperties The properties to ignore or null.\n     *                          For nested properties, use dot as a separator: &quot;property1.nestedProperty.nestedProperty2&quot;\n     * @return A pair of `assignedValueCount` (properties with assigned value) and `totalCount` (total property count).\n     */\n    public static PropertyValueCount getReadablePropertyValueCount(\n            @NonNull Object object, Set&lt;String&gt; ignoredProperties) {\n        PropertyValueCount countHolder = new PropertyValueCount();\n        processReadablePropertyValueCount(countHolder, object, ignoredProperties, null);\n        return countHolder;\n    }\n\n    /***\n     * @return true if the object had at least one non-null property value or no readable properties.\n     * &lt;p&gt;\n     * If the object is an instance of String, for example, it would have no readable nested properties.\n     * Also, if the object is an instance of some class for which all nested properties are ignored,\n     * the method would return true, since the object itself has a non-null value,\n     * but the caller decided to ignore all properties.\n     * &lt;/p&gt;\n     */\n    @SneakyThrows\n    private static boolean processReadablePropertyValueCount(\n            PropertyValueCount countHolder, @NonNull Object object, Set&lt;String&gt; ignoredProperties, String parentPath) {\n        boolean objectHasAssignedProperties = false;\n        boolean objectHasNoReadableProperties = true;\n\n        List&lt;Field&gt; fields = getAllDeclaredFields(object.getClass());\n\n        for (Field field : fields) {\n            String fieldPath = buildFieldPath(parentPath, field);\n\n            Method readMethod = getReadMethod(object.getClass(), ignoredProperties, field, fieldPath);\n            if (readMethod == null) {\n                continue;\n            }\n\n            countHolder.setTotalCount(countHolder.getTotalCount() + 1);\n            objectHasNoReadableProperties = false;\n\n            Object value = readMethod.invoke(object);\n\n            if (value == null || isCollectionWithoutAnyNonNullValue(value)) {\n\n                // no assigned value, so we'll just count the total available properties\n                int readablePropertyValueCount = getReadablePropertyCount(\n                        readMethod.getGenericReturnType(), ignoredProperties, fieldPath);\n                countHolder.setTotalCount(countHolder.getTotalCount() + readablePropertyValueCount);\n\n            } else if (value instanceof Iterable&lt;?&gt; iterable) {\n                processPropertyValueCountInIterable(countHolder, ignoredProperties, fieldPath, iterable);\n\n            } else if (value instanceof Map&lt;?, ?&gt; map) {\n                processPropertyValueCountInIterable(countHolder, ignoredProperties, fieldPath, map.values());\n\n            } else {\n                countHolder.setAssignedValueCount(countHolder.getAssignedValueCount() + 1);\n\n                // process properties of nested object\n                processReadablePropertyValueCount(countHolder, value, ignoredProperties, fieldPath);\n                objectHasAssignedProperties = true;\n            }\n        }\n\n        return objectHasAssignedProperties || objectHasNoReadableProperties;\n    }\n\n    private static void processPropertyValueCountInIterable(\n            PropertyValueCount countHolder, Set&lt;String&gt; ignoredProperties, String fieldPath, Iterable&lt;?&gt; iterable) {\n        boolean iterableHasNonNullValues = false;\n\n        // process properties of each item in the iterable\n        for (Object value : iterable) {\n            if (value != null) {\n                // check if the current iterable item is also an iterable itself\n                Optional&lt;Iterable&lt;?&gt;&gt; nestedIterable = getProcessableCollection(value);\n                if (nestedIterable.isPresent()) {\n                    processPropertyValueCountInIterable(countHolder, ignoredProperties, fieldPath, nestedIterable.get());\n                } else {\n                    iterableHasNonNullValues = processReadablePropertyValueCount(\n                            countHolder, value, ignoredProperties, fieldPath);\n                }\n            }\n        }\n\n        // consider the iterable as having an assigned value only if it contains at least one non-null value\n        if (iterableHasNonNullValues) {\n            countHolder.setAssignedValueCount(countHolder.getAssignedValueCount() + 1);\n        }\n    }\n\n    @SneakyThrows\n    private static int getReadablePropertyCount(\n            @NonNull Type inspectedType, Set&lt;String&gt; ignoredProperties, String parentPath) {\n        int totalReadablePropertyCount = 0;\n\n        Class&lt;?&gt; inspectedClass = getTargetClassFromGenericType(inspectedType);\n        List&lt;Field&gt; fields = getAllDeclaredFields(inspectedClass);\n\n        for (Field field : fields) {\n            String fieldPath = buildFieldPath(parentPath, field);\n\n            Method readMethod = getReadMethod(inspectedClass, ignoredProperties, field, fieldPath);\n\n            if (readMethod != null) {\n                totalReadablePropertyCount++;\n\n                Class&lt;?&gt; returnType = getTargetClassFromGenericType(readMethod.getGenericReturnType());\n\n                // process properties of nested class, avoiding infinite loops\n                if (!hasCircularTypeReference(inspectedClass, returnType)) {\n                    int readablePropertyValueCount = getReadablePropertyCount(\n                            returnType, ignoredProperties, fieldPath);\n\n                    totalReadablePropertyCount += readablePropertyValueCount;\n                }\n            }\n        }\n\n        return totalReadablePropertyCount;\n    }\n\n    // In case the object being analyzed is of parameterized type,\n    // we want to count the properties in the class of the parameter, not of the container.\n    private static Class&lt;?&gt; getTargetClassFromGenericType(Type type) {\n        if (type instanceof ParameterizedType parameterizedType) {\n            Type[] actualTypeArguments = parameterizedType.getActualTypeArguments();\n\n            if (actualTypeArguments.length &gt; 0) {\n                // Inspect the last parameter type.\n                // For example, lists would only have one parameter type,\n                // but in the case of maps we would inspect the parameter representing the entry value, not the entry key.\n                Type inspectedTypeArgument = actualTypeArguments[actualTypeArguments.length - 1];\n\n                return inspectedTypeArgument instanceof ParameterizedType ?\n                        getTargetClassFromGenericType(inspectedTypeArgument) :\n                        (Class&lt;?&gt;) inspectedTypeArgument;\n            }\n        }\n\n        return type instanceof Class&lt;?&gt; ? (Class&lt;?&gt;) type : type.getClass();\n    }\n\n    private static List&lt;Field&gt; getAllDeclaredFields(@NonNull Class&lt;?&gt; inspectedClass) {\n        List&lt;Field&gt; fields = new ArrayList&lt;&gt;();\n        Collections.addAll(fields, inspectedClass.getDeclaredFields());\n\n        Class&lt;?&gt; superClass = inspectedClass.getSuperclass();\n        while (superClass != null) {\n            Collections.addAll(fields, superClass.getDeclaredFields());\n\n            superClass = superClass.getSuperclass();\n        }\n        return fields;\n    }\n\n    private static Method getReadMethod(@NonNull Class&lt;?&gt; inspectedClass, Set&lt;String&gt; ignoredProperties, Field field, String fieldPath) {\n        if (ignoredProperties != null &amp;&amp; ignoredProperties.contains(fieldPath)) {\n            return null;\n        }\n\n        PropertyDescriptor propertyDescriptor;\n        try {\n            propertyDescriptor = new PropertyDescriptor(field.getName(), inspectedClass);\n        } catch (IntrospectionException e) {\n            // statement reached when the field doesn't have a getter\n            return null;\n        }\n\n        return propertyDescriptor.getReadMethod();\n    }\n\n    private static boolean hasCircularTypeReference(Class&lt;?&gt; propertyContainerClass, Class&lt;?&gt; propertyType) {\n        return propertyContainerClass.isAssignableFrom(propertyType);\n    }\n\n    private static String buildFieldPath(String parentPath, Field field) {\n        return parentPath == null ? field.getName() : parentPath + &quot;.&quot; + field.getName();\n    }\n\n    private static boolean isCollectionWithoutAnyNonNullValue(Object value) {\n        Stream&lt;?&gt; stream = null;\n        if (value instanceof Iterable&lt;?&gt; iterable) {\n            stream = StreamSupport.stream(iterable.spliterator(), false);\n        } else if (value instanceof Map&lt;?, ?&gt; map) {\n            stream = map.values().stream();\n        }\n\n        return stream != null &amp;&amp;\n                stream.noneMatch(item -&gt; item != null &amp;&amp; !isCollectionWithoutAnyNonNullValue(item));\n    }\n\n    private static Optional&lt;Iterable&lt;?&gt;&gt; getProcessableCollection(Object value) {\n        if (value instanceof Iterable&lt;?&gt; iterable) {\n            return Optional.of(iterable);\n        } else if (value instanceof Map&lt;?, ?&gt; map) {\n            return Optional.of(map.values());\n        }\n        return Optional.empty();\n    }\n\n    @Data\n    @NoArgsConstructor\n    @AllArgsConstructor\n    @Builder\n    public static class PropertyValueCount {\n        private int assignedValueCount;\n        private int totalCount;\n    }\n}\n</code></pre>\n<p>The completion percentage can be calculated like this:</p>\n<pre><code>PropertyCountUtils.PropertyValueCount propertyValueCount = getReadablePropertyValueCount(profile);\n\nBigDecimal profileCompletionPercentage = BigDecimal.valueOf(propertyValueCount.getNonNullValueCount())\n    .multiply(BigDecimal.valueOf(100))\n                .divide(BigDecimal.valueOf(propertyValueCount.getTotalCount()), 2, RoundingMode.UP)\n                .stripTrailingZeros();\n</code></pre>\n"}],"owner":{"account_id":439098,"reputation":4236,"user_id":4274119,"accept_rate":83,"display_name":"justAbit"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7655,"favorite_count":0,"down_vote_count":0,"up_vote_count":9,"accepted_answer_id":36913013,"answer_count":2,"score":9,"last_activity_date":1671814140,"creation_date":1461841877,"question_id":36912914,"body_markdown":"I have a `UserProfile` class which contains user&#39;s data as shown below:\r\n\r\n    class UserProfile {\r\n    \r\n      private String userId;\r\n      private String displayName;\r\n      private String loginId;\r\n      private String role;\r\n      private String orgId;\r\n      private String email;\r\n      private String contactNumber;\r\n      private Integer age;\r\n      private String address;\r\n    \r\n    // few more fields ...\r\n    \r\n    // getter and setter\r\n    }\r\n\r\nI need to count non `null` fields to show how much percentage of the profile has been filled by the user. Also there are few fields which I do not want to consider in percentage calculation like: `userId`, `loginId` and `displayName`.\r\n\r\nSimple way would be to use multiple `If` statements to get the non null field `count` but it would involve lot of boiler plate code and there is another class `Organization` for which I need to show completion percentage as well. So I created a utility function as show below:\r\n\r\n    public static &lt;T, U&gt; int getNotNullFieldCount(T t,\r\n    \t\tList&lt;Function&lt;? super T, ? extends U&gt;&gt; functionList) {\r\n    \tint count = 0;\r\n    \t\r\n    \tfor (Function&lt;? super T, ? extends U&gt; function : functionList) {\r\n    \t\tcount += Optional.of(t).map(obj -&gt; function.apply(t) != null ? 1 : 0).get();\r\n    \t}\r\n    \t\r\n    \treturn count;\r\n    }\r\n\r\nAnd then I call this function as shown below:\r\n\r\n    List&lt;Function&lt;? super UserProfile, ? extends Object&gt;&gt; functionList = new ArrayList&lt;&gt;();\r\n    functionList.add(UserProfile::getAge);\r\n    functionList.add(UserProfile::getAddress);\r\n    functionList.add(UserProfile::getEmail);\r\n    functionList.add(UserProfile::getContactNumber);\r\n    System.out.println(getNotNullFieldCount(userProfile, functionList));\r\n\r\nMy question is, is this the best way I could count not `null` fields or I could improve it further. Please suggest.","title":"Count non null fields in an object","body":"<p>I have a <code>UserProfile</code> class which contains user's data as shown below:</p>\n\n<pre><code>class UserProfile {\n\n  private String userId;\n  private String displayName;\n  private String loginId;\n  private String role;\n  private String orgId;\n  private String email;\n  private String contactNumber;\n  private Integer age;\n  private String address;\n\n// few more fields ...\n\n// getter and setter\n}\n</code></pre>\n\n<p>I need to count non <code>null</code> fields to show how much percentage of the profile has been filled by the user. Also there are few fields which I do not want to consider in percentage calculation like: <code>userId</code>, <code>loginId</code> and <code>displayName</code>.</p>\n\n<p>Simple way would be to use multiple <code>If</code> statements to get the non null field <code>count</code> but it would involve lot of boiler plate code and there is another class <code>Organization</code> for which I need to show completion percentage as well. So I created a utility function as show below:</p>\n\n<pre><code>public static &lt;T, U&gt; int getNotNullFieldCount(T t,\n        List&lt;Function&lt;? super T, ? extends U&gt;&gt; functionList) {\n    int count = 0;\n\n    for (Function&lt;? super T, ? extends U&gt; function : functionList) {\n        count += Optional.of(t).map(obj -&gt; function.apply(t) != null ? 1 : 0).get();\n    }\n\n    return count;\n}\n</code></pre>\n\n<p>And then I call this function as shown below:</p>\n\n<pre><code>List&lt;Function&lt;? super UserProfile, ? extends Object&gt;&gt; functionList = new ArrayList&lt;&gt;();\nfunctionList.add(UserProfile::getAge);\nfunctionList.add(UserProfile::getAddress);\nfunctionList.add(UserProfile::getEmail);\nfunctionList.add(UserProfile::getContactNumber);\nSystem.out.println(getNotNullFieldCount(userProfile, functionList));\n</code></pre>\n\n<p>My question is, is this the best way I could count not <code>null</code> fields or I could improve it further. Please suggest.</p>\n"},{"tags":["java","proxy","spring-webflux","reactor-netty"],"comments":[{"owner":{"account_id":5024231,"reputation":2017,"user_id":4036754,"display_name":"Violeta Georgieva"},"score":0,"creation_date":1671790729,"post_id":74893474,"comment_id":132176641,"body_markdown":"Do you have many proxy configurations or just a few? If there are not many for the moment you can have several HttpClients as a solution as such feature similar to httpclient4 is not available.","body":"Do you have many proxy configurations or just a few? If there are not many for the moment you can have several HttpClients as a solution as such feature similar to httpclient4 is not available."},{"owner":{"account_id":5652819,"reputation":13,"user_id":6687394,"display_name":"Aditya lahiri"},"score":0,"creation_date":1684997771,"post_id":74893474,"comment_id":134599815,"body_markdown":"Thank you, I made separate clients for each proxy","body":"Thank you, I made separate clients for each proxy"}],"owner":{"account_id":5652819,"reputation":13,"user_id":6687394,"display_name":"Aditya lahiri"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671813982,"creation_date":1671740352,"question_id":74893474,"body_markdown":"As per the available examples and documentation, it seems that the way to use a proxy with an http-client is like so:\r\n\r\n```\r\nHttpClient.create()\r\n        .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 2_000)\r\n        .doOnConnected(connection -&gt;\r\n                connection\r\n                        .addHandlerLast(new ReadTimeoutHandler(2_000, TimeUnit.MILLISECONDS))\r\n                        .addHandlerLast(new WriteTimeoutHandler(2_000, TimeUnit.MILLISECONDS)))\r\n        .proxy(proxy -&gt; proxy\r\n                .type(ProxyProvider.Proxy.HTTP)\r\n                .host((${host})\r\n                .port(${port})\r\n                .build()));\r\n```\r\n\r\nIt seems like in this setup, once initialized, it is not possible to change the host of the proxy. So, how would one go about implementing a rotating proxy? like\r\n\r\nIt is possible to do it apache httpclient4 where one can configure a different proxy per request using RequestConfig in the following manner:\r\n\r\n```\r\nRequestConfig config = RequestConfig.custom()\r\n.setProxy(new HttpHost(proxyHost, port, &quot;https&quot;))\r\n.build();\r\n```\r\n\r\nHowever, httpclient4 is a blocking client library and i couldn&#39;t find any reactive alternative that can work with WebClient in Spring Boot","title":"Is there any way to imlement a rotating proxy based HttpClient in reactor netty?","body":"<p>As per the available examples and documentation, it seems that the way to use a proxy with an http-client is like so:</p>\n<pre><code>HttpClient.create()\n        .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 2_000)\n        .doOnConnected(connection -&gt;\n                connection\n                        .addHandlerLast(new ReadTimeoutHandler(2_000, TimeUnit.MILLISECONDS))\n                        .addHandlerLast(new WriteTimeoutHandler(2_000, TimeUnit.MILLISECONDS)))\n        .proxy(proxy -&gt; proxy\n                .type(ProxyProvider.Proxy.HTTP)\n                .host((${host})\n                .port(${port})\n                .build()));\n</code></pre>\n<p>It seems like in this setup, once initialized, it is not possible to change the host of the proxy. So, how would one go about implementing a rotating proxy? like</p>\n<p>It is possible to do it apache httpclient4 where one can configure a different proxy per request using RequestConfig in the following manner:</p>\n<pre><code>RequestConfig config = RequestConfig.custom()\n.setProxy(new HttpHost(proxyHost, port, &quot;https&quot;))\n.build();\n</code></pre>\n<p>However, httpclient4 is a blocking client library and i couldn't find any reactive alternative that can work with WebClient in Spring Boot</p>\n"},{"tags":["java","akka"],"answers":[{"tags":[],"owner":{"account_id":5994994,"reputation":19189,"user_id":5641244,"display_name":"Levi Ramsey"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1671813778,"creation_date":1671813778,"answer_id":74902016,"question_id":74891670,"body_markdown":"`Futures timed out` and messages going to `DeadLetter` are generally indications that _something_ is wrong, but not what is wrong.\r\n\r\nThe future timing out is an indication that your actor isn&#39;t sending a reply to the asker (more properly, that the temporary actor created for the ask pattern hasn&#39;t received the reply by the timeout, but especially in the local case with an application where there aren&#39;t a lot of actors &quot;chatting away&quot;, this is equivalent to the reply not being sent).\r\n\r\nThe dead letters indicate that your `numbersPrinter` actor isn&#39;t handling the message of type `String`.\r\n\r\n`returnNumber` certainly appears to handle that message and reply, but the culprit is the `Receive` that you&#39;re building:\r\n\r\n```java\r\nreceiveBuilder().create().match(numbersPrinter.class, this::returnNumber)\r\n```\r\n\r\nsets up the `Receive` to only pass messages of type `numbersPrinter` to `returnNumber`.  Since that&#39;s the only `match` call in that `Receive`, messages of all other types are ignored and will go to dead letters.\r\n\r\nSince your `returnNumber` method is total for all `Object`s, it probably makes sense to replace `numbersPrinter.class` in the `match` with `Object.class`; replacing with `String.class` would also work.","title":"How can I fix &quot;Futures timed out [5 seconds]&quot; and [akkaDeadLetter] errors?","body":"<p><code>Futures timed out</code> and messages going to <code>DeadLetter</code> are generally indications that <em>something</em> is wrong, but not what is wrong.</p>\n<p>The future timing out is an indication that your actor isn't sending a reply to the asker (more properly, that the temporary actor created for the ask pattern hasn't received the reply by the timeout, but especially in the local case with an application where there aren't a lot of actors &quot;chatting away&quot;, this is equivalent to the reply not being sent).</p>\n<p>The dead letters indicate that your <code>numbersPrinter</code> actor isn't handling the message of type <code>String</code>.</p>\n<p><code>returnNumber</code> certainly appears to handle that message and reply, but the culprit is the <code>Receive</code> that you're building:</p>\n<pre class=\"lang-java prettyprint-override\"><code>receiveBuilder().create().match(numbersPrinter.class, this::returnNumber)\n</code></pre>\n<p>sets up the <code>Receive</code> to only pass messages of type <code>numbersPrinter</code> to <code>returnNumber</code>.  Since that's the only <code>match</code> call in that <code>Receive</code>, messages of all other types are ignored and will go to dead letters.</p>\n<p>Since your <code>returnNumber</code> method is total for all <code>Object</code>s, it probably makes sense to replace <code>numbersPrinter.class</code> in the <code>match</code> with <code>Object.class</code>; replacing with <code>String.class</code> would also work.</p>\n"}],"owner":{"account_id":26923937,"reputation":21,"user_id":20497483,"display_name":"Olga Puzikova"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":294,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671813778,"creation_date":1671728639,"question_id":74891670,"body_markdown":"I&#39;m trying to realize numbersPrinter class (the code:\r\n\r\n    package org.example.actors;\r\n    \r\n    import akka.actor.AbstractActor;\r\n    import akka.actor.Props;\r\n    import akka.event.Logging;\r\n    import akka.event.LoggingAdapter;\r\n    import akka.japi.Procedure;\r\n    \r\n    import java.util.ArrayList;\r\n    \r\n    public class numbersPrinter extends AbstractActor {\r\n        // fields\r\n        LoggingAdapter log = Logging.getLogger(getContext().system(), this);\r\n    \r\n        // the method\r\n        public void returnNumber(Object message){\r\n            if (message.equals(String.valueOf(1))){\r\n                getSender().tell(1, getSelf());\r\n            } else if (message instanceof String) {\r\n                log.info((String) message);\r\n            } else {\r\n                unhandled(message);\r\n                log.info(&quot;Unhandled message&quot;);\r\n            }\r\n        }\r\n    \r\n        @Override\r\n        public Receive createReceive() {\r\n            return receiveBuilder()\r\n                    .create()\r\n                    .match(numbersPrinter.class, this::returnNumber)\r\n                    .build();\r\n        }\r\n    \r\n    }\r\nMain class code fragment:\r\n\r\n    package org.example;\r\n    \r\n    import akka.actor.ActorRef;\r\n    import akka.actor.ActorSystem;\r\n    import akka.actor.Props;\r\n    import akka.pattern.Patterns;\r\n    import akka.util.Timeout;\r\n    import org.example.actors.numbersPrinter;\r\n    import scala.concurrent.Await;\r\n    import scala.concurrent.duration.Duration;\r\n    \r\n    import java.util.ArrayList;\r\n    import java.util.Scanner;\r\n    import java.util.concurrent.Future;\r\n    import java.util.concurrent.TimeUnit;\r\n\r\n    // actors system\r\n            final ActorSystem system = ActorSystem.create(\r\n                    &quot;ActorsSystem&quot;);\r\n    \r\n            // the actor for numbers output\r\n            ActorRef numbersPrinter = system.actorOf(Props.create(numbersPrinter.class, numbersPrinter::new), &quot;numbersPrinter&quot;);\r\n            // number 1 output test\r\n            System.out.println(&quot;numbersPrinter actor test&quot;);\r\n            final Timeout timeout = new Timeout(Duration.create(5, TimeUnit.SECONDS));\r\n            scala.concurrent.Future&lt;Object&gt; rt = Patterns.ask(numbersPrinter, String.valueOf(1), timeout);\r\n            try {\r\n                String result = (String) Await.result(rt, timeout.duration());\r\n                System.out.println(result);\r\n            } catch (Exception e) {\r\n                throw new RuntimeException(e);\r\n            }\r\nThe following errors are occuring:\r\n\r\n[INFO] [akkaDeadLetter][12/22/2022 20:10:42.028] [ActorsSystem-akka.actor.default-dispatcher-6] [akka://ActorsSystem/user/numbersPrinter] Message [java.lang.String] from Actor[akka://ActorsSystem/temp/numbersPrinter$a] to Actor[akka://ActorsSystem/user/numbersPrinter#-1051654874] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings &#39;akka.log-dead-letters&#39; and &#39;akka.log-dead-letters-during-shutdown&#39;.\r\n\r\n    Exception in thread &quot;main&quot; java.lang.RuntimeException:\r\n    java.util.concurrent.TimeoutException: Future timed out after [5 seconds]\r\n    \tat org.example.Main.main(Main.java:63)\r\n    Caused by: java.util.concurrent.TimeoutException: Future timed out after [5 seconds]\r\n    at scala.concurrent.impl.Promise$DefaultPromise.tryAwait0(Promise.scala:248)\r\n    at scala.concurrent.impl.Promise$DefaultPromise.result(Promise.scala:261)\r\n    at scala.concurrent.Await$.$anonfun$result$1(package.scala:201)\r\n    at scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:62)\r\n    at scala.concurrent.Await$.result(package.scala:124)\r\n    at scala.concurrent.Await.result(package.scala)\r\n    at org.example.Main.main(Main.java:60)\r\n\r\nTell me please, how to fix it.","title":"How can I fix &quot;Futures timed out [5 seconds]&quot; and [akkaDeadLetter] errors?","body":"<p>I'm trying to realize numbersPrinter class (the code:</p>\n<pre><code>package org.example.actors;\n\nimport akka.actor.AbstractActor;\nimport akka.actor.Props;\nimport akka.event.Logging;\nimport akka.event.LoggingAdapter;\nimport akka.japi.Procedure;\n\nimport java.util.ArrayList;\n\npublic class numbersPrinter extends AbstractActor {\n    // fields\n    LoggingAdapter log = Logging.getLogger(getContext().system(), this);\n\n    // the method\n    public void returnNumber(Object message){\n        if (message.equals(String.valueOf(1))){\n            getSender().tell(1, getSelf());\n        } else if (message instanceof String) {\n            log.info((String) message);\n        } else {\n            unhandled(message);\n            log.info(&quot;Unhandled message&quot;);\n        }\n    }\n\n    @Override\n    public Receive createReceive() {\n        return receiveBuilder()\n                .create()\n                .match(numbersPrinter.class, this::returnNumber)\n                .build();\n    }\n\n}\n</code></pre>\n<p>Main class code fragment:</p>\n<pre><code>package org.example;\n\nimport akka.actor.ActorRef;\nimport akka.actor.ActorSystem;\nimport akka.actor.Props;\nimport akka.pattern.Patterns;\nimport akka.util.Timeout;\nimport org.example.actors.numbersPrinter;\nimport scala.concurrent.Await;\nimport scala.concurrent.duration.Duration;\n\nimport java.util.ArrayList;\nimport java.util.Scanner;\nimport java.util.concurrent.Future;\nimport java.util.concurrent.TimeUnit;\n\n// actors system\n        final ActorSystem system = ActorSystem.create(\n                &quot;ActorsSystem&quot;);\n\n        // the actor for numbers output\n        ActorRef numbersPrinter = system.actorOf(Props.create(numbersPrinter.class, numbersPrinter::new), &quot;numbersPrinter&quot;);\n        // number 1 output test\n        System.out.println(&quot;numbersPrinter actor test&quot;);\n        final Timeout timeout = new Timeout(Duration.create(5, TimeUnit.SECONDS));\n        scala.concurrent.Future&lt;Object&gt; rt = Patterns.ask(numbersPrinter, String.valueOf(1), timeout);\n        try {\n            String result = (String) Await.result(rt, timeout.duration());\n            System.out.println(result);\n        } catch (Exception e) {\n            throw new RuntimeException(e);\n        }\n</code></pre>\n<p>The following errors are occuring:</p>\n<p>[INFO] [akkaDeadLetter][12/22/2022 20:10:42.028] [ActorsSystem-akka.actor.default-dispatcher-6] [akka://ActorsSystem/user/numbersPrinter] Message [java.lang.String] from Actor[akka://ActorsSystem/temp/numbersPrinter$a] to Actor[akka://ActorsSystem/user/numbersPrinter#-1051654874] was unhandled. [1] dead letters encountered. This logging can be turned off or adjusted with configuration settings 'akka.log-dead-letters' and 'akka.log-dead-letters-during-shutdown'.</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.RuntimeException:\njava.util.concurrent.TimeoutException: Future timed out after [5 seconds]\n    at org.example.Main.main(Main.java:63)\nCaused by: java.util.concurrent.TimeoutException: Future timed out after [5 seconds]\nat scala.concurrent.impl.Promise$DefaultPromise.tryAwait0(Promise.scala:248)\nat scala.concurrent.impl.Promise$DefaultPromise.result(Promise.scala:261)\nat scala.concurrent.Await$.$anonfun$result$1(package.scala:201)\nat scala.concurrent.BlockContext$DefaultBlockContext$.blockOn(BlockContext.scala:62)\nat scala.concurrent.Await$.result(package.scala:124)\nat scala.concurrent.Await.result(package.scala)\nat org.example.Main.main(Main.java:60)\n</code></pre>\n<p>Tell me please, how to fix it.</p>\n"},{"tags":["java","apache-kafka","avro"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671807398,"post_id":74898094,"comment_id":132181005,"body_markdown":"You don&#39;t need Kafka to test this.... Call `deserializer.deserialize(null, serializer.serialize(null, data))` in a simple unit test","body":"You don&#39;t need Kafka to test this.... Call <code>deserializer.deserialize(null, serializer.serialize(null, data))</code> in a simple unit test"},{"owner":{"account_id":13597036,"reputation":3,"user_id":9808781,"display_name":"Cinas"},"score":0,"creation_date":1671809113,"post_id":74898094,"comment_id":132181481,"body_markdown":"Agree. But need to use this mechanism with kafka","body":"Agree. But need to use this mechanism with kafka"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671809977,"post_id":74898094,"comment_id":132181719,"body_markdown":"What reason do you have not to use a Schema Registry tool that includes existing Avro functionality?","body":"What reason do you have not to use a Schema Registry tool that includes existing Avro functionality?"},{"owner":{"account_id":13597036,"reputation":3,"user_id":9808781,"display_name":"Cinas"},"score":0,"creation_date":1671813347,"post_id":74898094,"comment_id":132182625,"body_markdown":"Because of the license :|","body":"Because of the license :|"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671813382,"post_id":74898094,"comment_id":132182634,"body_markdown":"Apicurio is fully Apache Licensed. Confluent isn&#39;t your only option","body":"Apicurio is fully Apache Licensed. Confluent isn&#39;t your only option"}],"answers":[{"comments":[{"owner":{"account_id":13597036,"reputation":3,"user_id":9808781,"display_name":"Cinas"},"score":0,"creation_date":1671793941,"post_id":74898744,"comment_id":132177442,"body_markdown":"Hmm, but in my opinion old schema is inside the serialized object (according to the https://en.wikipedia.org/wiki/Apache_Avro), the new schema is on clients side (new SpecificDatumReader&lt;&gt;(targetType.getDeclaredConstructor().newInstance().getSchema()) gets the new schema)","body":"Hmm, but in my opinion old schema is inside the serialized object (according to the <a href=\"https://en.wikipedia.org/wiki/Apache_Avro\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Apache_Avro</a>), the new schema is on clients side (new SpecificDatumReader&lt;&gt;(targetType.getDeclaredConstructor().ne&zwnj;&#8203;wInstance().getSchem&zwnj;&#8203;a()) gets the new schema)"},{"owner":{"account_id":11322917,"reputation":765,"user_id":15074748,"display_name":"pacman"},"score":0,"creation_date":1671794478,"post_id":74898744,"comment_id":132177578,"body_markdown":"@Cinas Schema is not part of serialized object. the data is serialized according to the schema. If schema was part of the serialized object you wouldn&#39;t need a schema to deserialize the data and tools like schema registry wouldn&#39;t exist.","body":"@Cinas Schema is not part of serialized object. the data is serialized according to the schema. If schema was part of the serialized object you wouldn&#39;t need a schema to deserialize the data and tools like schema registry wouldn&#39;t exist."},{"owner":{"account_id":13597036,"reputation":3,"user_id":9808781,"display_name":"Cinas"},"score":0,"creation_date":1671795268,"post_id":74898744,"comment_id":132177795,"body_markdown":"You are right. But anyway SpecificDatumReader constructor gets new schema. In my opinion the problem lies somewhere else, looks like client side reads more than should, expecting 3rd optional field.","body":"You are right. But anyway SpecificDatumReader constructor gets new schema. In my opinion the problem lies somewhere else, looks like client side reads more than should, expecting 3rd optional field."},{"owner":{"account_id":11322917,"reputation":765,"user_id":15074748,"display_name":"pacman"},"score":0,"creation_date":1671795443,"post_id":74898744,"comment_id":132177841,"body_markdown":"@Cinas The problem is that you are trying to deserialize with different schema. Even though you are providing default values it will not work. It needs exactly the same schema it was serialized wtih.","body":"@Cinas The problem is that you are trying to deserialize with different schema. Even though you are providing default values it will not work. It needs exactly the same schema it was serialized wtih."},{"owner":{"account_id":13597036,"reputation":3,"user_id":9808781,"display_name":"Cinas"},"score":0,"creation_date":1671795714,"post_id":74898744,"comment_id":132177911,"body_markdown":"You are right. And I see where the problem lies. Somewhere in reader the actual and expected schemas are the same, both are new schemas.","body":"You are right. And I see where the problem lies. Somewhere in reader the actual and expected schemas are the same, both are new schemas."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671807188,"post_id":74898744,"comment_id":132180943,"body_markdown":"_needs exactly the same schema it was serialized wtih_ - This isn&#39;t true since it goes against the whole idea of schema evolution. _If schema was part of the serialized object you wouldn&#39;t need a schema to deserialize the data and tools like schema registry wouldn&#39;t exist_ - Even with the Registry, you can provide a reader schema that doesn&#39;t match the producer&#39;s","body":"<i>needs exactly the same schema it was serialized wtih</i> - This isn&#39;t true since it goes against the whole idea of schema evolution. <i>If schema was part of the serialized object you wouldn&#39;t need a schema to deserialize the data and tools like schema registry wouldn&#39;t exist</i> - Even with the Registry, you can provide a reader schema that doesn&#39;t match the producer&#39;s"},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":0,"creation_date":1671807865,"post_id":74898744,"comment_id":132181140,"body_markdown":"Avro deserialization is purely based on field names. Defaults are only applied to the reader schema. This allows you to provide any subset of fields to deserialize into a new object while adding others with a defined value (a forward projection)","body":"Avro deserialization is purely based on field names. Defaults are only applied to the reader schema. This allows you to provide any subset of fields to deserialize into a new object while adding others with a defined value (a forward projection)"}],"tags":[],"owner":{"account_id":11322917,"reputation":765,"user_id":15074748,"display_name":"pacman"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671792257,"creation_date":1671792257,"answer_id":74898744,"question_id":74898094,"body_markdown":"If you have to handle evolving schema it is a little bit tricky. Refer the question [here][1]. One of the ways you can probably handle that is by adding the schema to the header and using the schema from header while deserializing. \r\n\r\nBut the problem with that approach is you are still sending a lot of data which beats the purpose of using something like Avro. Avro is used to reduce the size of data being transmitted.\r\n\r\nThe best way to handle this is to use Confluent schema registry. It is open source. You can run a docker container in your local if you want to use it and configure it with your application.\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/66763677/deserialization-without-confluent-schema-registry-avro-serialized-data-doesnt/66801044#66801044","title":"Send / Receive message through kafka using Apache Avro but with different schema","body":"<p>If you have to handle evolving schema it is a little bit tricky. Refer the question <a href=\"https://stackoverflow.com/questions/66763677/deserialization-without-confluent-schema-registry-avro-serialized-data-doesnt/66801044#66801044\">here</a>. One of the ways you can probably handle that is by adding the schema to the header and using the schema from header while deserializing.</p>\n<p>But the problem with that approach is you are still sending a lot of data which beats the purpose of using something like Avro. Avro is used to reduce the size of data being transmitted.</p>\n<p>The best way to handle this is to use Confluent schema registry. It is open source. You can run a docker container in your local if you want to use it and configure it with your application.</p>\n"},{"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671813252,"creation_date":1671811350,"answer_id":74901644,"question_id":74898094,"body_markdown":"Avro needs the reader **and writer** schema when deserializing binary. This can be done with `BinaryMessageDecoder.addSchema`\r\n\r\nHere&#39;s a simple unit test that shows the concept. \r\n\r\n\r\n```\r\n@Test\r\nvoid avroRoundTrip() throws IOException {\r\n    User u = User.newBuilder()\r\n        .setName(&quot;foobar&quot;)\r\n        .setFavoriteNumber(0)\r\n        .build();\r\n    ByteBuffer bb = u.toByteBuffer();\r\n\r\n    ColoredUser.getDecoder().addSchema(User.SCHEMA$);\r\n    ColoredUser cu = ColoredUser.fromByteBuffer(bb);\r\n    System.out.println(cu);\r\n    // {&quot;name&quot;: &quot;foobar&quot;, &quot;favorite_number&quot;: 0, &quot;favorite_color&quot;: &quot;green&quot;}\r\n}\r\n```\r\n\r\nYou already know what types you have at runtime, so just make specific deserializers (e.g. `implements Deserializer&lt;ColoredUser&gt;`, and don&#39;t try to use generics unless you&#39;re trying to make some shared library. ","title":"Send / Receive message through kafka using Apache Avro but with different schema","body":"<p>Avro needs the reader <strong>and writer</strong> schema when deserializing binary. This can be done with <code>BinaryMessageDecoder.addSchema</code></p>\n<p>Here's a simple unit test that shows the concept.</p>\n<pre><code>@Test\nvoid avroRoundTrip() throws IOException {\n    User u = User.newBuilder()\n        .setName(&quot;foobar&quot;)\n        .setFavoriteNumber(0)\n        .build();\n    ByteBuffer bb = u.toByteBuffer();\n\n    ColoredUser.getDecoder().addSchema(User.SCHEMA$);\n    ColoredUser cu = ColoredUser.fromByteBuffer(bb);\n    System.out.println(cu);\n    // {&quot;name&quot;: &quot;foobar&quot;, &quot;favorite_number&quot;: 0, &quot;favorite_color&quot;: &quot;green&quot;}\n}\n</code></pre>\n<p>You already know what types you have at runtime, so just make specific deserializers (e.g. <code>implements Deserializer&lt;ColoredUser&gt;</code>, and don't try to use generics unless you're trying to make some shared library.</p>\n"}],"owner":{"account_id":13597036,"reputation":3,"user_id":9808781,"display_name":"Cinas"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1032,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74901644,"answer_count":2,"score":0,"last_activity_date":1671813252,"creation_date":1671787792,"question_id":74898094,"body_markdown":"I&#39;m new with Apache Avro. Let me describe the problem.\r\nI&#39;m trying to send some message using Apache Kafka from a producer application to a consumer application. Message schemas are not the same.\r\n\r\nProducer schema (User.avsc):\r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;User&quot;,\r\n  &quot;namespace&quot;: &quot;avro&quot;,\r\n  &quot;type&quot;: &quot;record&quot;,\r\n  &quot;fields&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;name&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;favorite_number&quot;,\r\n      &quot;type&quot;: &quot;int&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nConsumer schema (User.avsc):\r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;User&quot;,\r\n  &quot;namespace&quot;: &quot;avro&quot;,\r\n  &quot;type&quot;: &quot;record&quot;,\r\n  &quot;fields&quot;: [\r\n    {\r\n      &quot;name&quot;: &quot;name&quot;,\r\n      &quot;type&quot;: &quot;string&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;favorite_number&quot;,\r\n      &quot;type&quot;: &quot;int&quot;\r\n    },\r\n    {\r\n      &quot;name&quot;: &quot;favorite_color&quot;,\r\n      &quot;type&quot;: &quot;string&quot;,\r\n      &quot;default&quot;: &quot;green&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\nClasses:\r\n\r\n``` lang-java\r\npublic class AvroSerializer&lt;T extends SpecificRecordBase&gt; implements Serializer&lt;T&gt; {\r\n\r\n    @Override\r\n    public byte[] serialize(String topic, T data) {\r\n        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\r\n            if (data != null) {\r\n                BinaryEncoder binaryEncoder = EncoderFactory.get().binaryEncoder(byteArrayOutputStream, null);\r\n                DatumWriter&lt;T&gt; datumWriter = new SpecificDatumWriter&lt;&gt;(data.getSchema());\r\n                datumWriter.write(data, binaryEncoder);\r\n                binaryEncoder.flush();\r\n                return byteArrayOutputStream.toByteArray();\r\n            }\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(&quot;An exception occurred during serialization&quot;, e);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n``` lang-java\r\npublic class AvroDeserializer&lt;T extends SpecificRecordBase&gt; implements Deserializer&lt;T&gt; {\r\n\r\n    protected final Class&lt;T&gt; targetType;\r\n\r\n    public AvroDeserializer(Class&lt;T&gt; targetType) {\r\n        this.targetType = targetType;\r\n    }\r\n\r\n    @Override\r\n    public T deserialize(String topic, byte[] bytes) {\r\n        try {\r\n            if (bytes != null) {\r\n                DatumReader&lt;T&gt; datumReader =\r\n                        new SpecificDatumReader&lt;&gt;(targetType.getDeclaredConstructor().newInstance().getSchema());\r\n                Decoder decoder = DecoderFactory.get().binaryDecoder(bytes, null);\r\n                return datumReader.read(null, decoder);\r\n            }\r\n        } catch (Exception e) {\r\n            throw new RuntimeException(&quot;An exception occurred during deserialization&quot;, e);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n``` lang-java\r\npublic class UserProducer {\r\n\r\n    public static void main(String[] args) {\r\n        UserProducer userProducer = new UserProducer();\r\n        userProducer.writeUser();\r\n    }\r\n\r\n    public void writeUser() {\r\n        Properties properties = new Properties();\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\r\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, AvroSerializer.class);\r\n\r\n        Producer&lt;String, SpecificRecord&gt; recordProducer = new KafkaProducer&lt;&gt;(properties);\r\n\r\n        User user = User.newBuilder()\r\n                .setName(&quot;Bob&quot;)\r\n                .setFavoriteNumber(666)\r\n                .build();\r\n\r\n        ProducerRecord&lt;String, SpecificRecord&gt; record = new ProducerRecord&lt;&gt;(&quot;avro.User&quot;, null, user);\r\n        recordProducer.send(record);\r\n        recordProducer.flush();\r\n        recordProducer.close();\r\n    }\r\n}\r\n```\r\n\r\n``` lang-java\r\npublic class Consumer {\r\n\r\n    public static void main(String[] args) {\r\n        Consumer consumer = new Consumer();\r\n        consumer.readMessages();\r\n    }\r\n\r\n    public void readMessages() {\r\n        Properties properties = new Properties();\r\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;specific-record-consumer-group&quot;);\r\n        properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n        properties.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\r\n\r\n        KafkaConsumer&lt;String, User&gt; consumer = new KafkaConsumer&lt;&gt;(properties,\r\n                new StringDeserializer(), new AvroDeserializer&lt;&gt;(User.class));\r\n\r\n        consumer.subscribe(Collections.singletonList(&quot;avro.User&quot;));\r\n\r\n        while (true) {\r\n            consumer.poll(Duration.ofMillis(100)).forEach(System.out::println);\r\n            consumer.commitAsync();\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nOf course having the same schema it works fine. The problem is with schema evolving. On the receiver side there a new field with default value that should be set but ... I get an exception:\r\n\r\n```\r\nException in thread &quot;main&quot; org.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition avro.User-0 at offset 0. If needed, please seek past the record to continue consumption.\r\nCaused by: java.lang.RuntimeException: An exception occurred during deserialization\r\n\tat serializer.AvroDeserializer.deserialize(AvroDeserializer.java:28)\r\n\tat serializer.AvroDeserializer.deserialize(AvroDeserializer.java:10)\r\n\tat org.apache.kafka.common.serialization.Deserializer.deserialize(Deserializer.java:60)\r\n\tat org.apache.kafka.clients.consumer.internals.Fetcher.parseRecord(Fetcher.java:1306)\r\n\tat org.apache.kafka.clients.consumer.internals.Fetcher.access$3500(Fetcher.java:128)\r\n\tat org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1537)\r\n\tat org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.access$1700(Fetcher.java:1373)\r\n\tat org.apache.kafka.clients.consumer.internals.Fetcher.fetchRecords(Fetcher.java:679)\r\n\tat org.apache.kafka.clients.consumer.internals.Fetcher.fetchedRecords(Fetcher.java:634)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.pollForFetches(KafkaConsumer.java:1313)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1240)\r\n\tat org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1211)\r\n\tat consumer.Consumer.readMessages(Consumer.java:34)\r\n\tat consumer.Consumer.main(Consumer.java:18)\r\nCaused by: java.io.EOFException\r\n\tat org.apache.avro.io.BinaryDecoder.ensureBounds(BinaryDecoder.java:509)\r\n\tat org.apache.avro.io.BinaryDecoder.readLong(BinaryDecoder.java:181)\r\n\tat org.apache.avro.io.BinaryDecoder.readString(BinaryDecoder.java:279)\r\n\tat org.apache.avro.io.BinaryDecoder.readString(BinaryDecoder.java:298)\r\n\tat org.apache.avro.io.ResolvingDecoder.readString(ResolvingDecoder.java:220)\r\n\tat org.apache.avro.generic.GenericDatumReader.readString(GenericDatumReader.java:456)\r\n\tat org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:191)\r\n\tat org.apache.avro.specific.SpecificDatumReader.readField(SpecificDatumReader.java:136)\r\n\tat org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:247)\r\n\tat org.apache.avro.specific.SpecificDatumReader.readRecord(SpecificDatumReader.java:123)\r\n\tat org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:179)\r\n\tat org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:160)\r\n\tat org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:153)\r\n\tat serializer.AvroDeserializer.deserialize(AvroDeserializer.java:25)\r\n\t... 13 more\r\n```\r\n\r\npom.xml in both applications is more less the same\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;kafka-avro-producer&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\r\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\r\n            &lt;version&gt;2.4.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.30&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\r\n            &lt;version&gt;1.7.30&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n            &lt;artifactId&gt;avro&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n            &lt;artifactId&gt;avro-compiler&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n            &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;1.9.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;1.8&lt;/source&gt;\r\n                    &lt;target&gt;1.8&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\r\n                &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.9.2&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;schema&lt;/goal&gt;\r\n                            &lt;goal&gt;protocol&lt;/goal&gt;\r\n                            &lt;goal&gt;idl-protocol&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;sourceDirectory&gt;${project.basedir}/src/main/avro/&lt;/sourceDirectory&gt;\r\n                            &lt;outputDirectory&gt;${project.basedir}/target/generated-sources/avro/&lt;/outputDirectory&gt;\r\n                            &lt;stringType&gt;String&lt;/stringType&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\nWhat am I doing wrong?\r\n\r\nI tried with equal schemas and it works but I cannot figure out why receiver side does not handle the lack of optional field.","title":"Send / Receive message through kafka using Apache Avro but with different schema","body":"<p>I'm new with Apache Avro. Let me describe the problem.\nI'm trying to send some message using Apache Kafka from a producer application to a consumer application. Message schemas are not the same.</p>\n<p>Producer schema (User.avsc):</p>\n<pre><code>{\n  &quot;name&quot;: &quot;User&quot;,\n  &quot;namespace&quot;: &quot;avro&quot;,\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;name&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    },\n    {\n      &quot;name&quot;: &quot;favorite_number&quot;,\n      &quot;type&quot;: &quot;int&quot;\n    }\n  ]\n}\n</code></pre>\n<p>Consumer schema (User.avsc):</p>\n<pre><code>{\n  &quot;name&quot;: &quot;User&quot;,\n  &quot;namespace&quot;: &quot;avro&quot;,\n  &quot;type&quot;: &quot;record&quot;,\n  &quot;fields&quot;: [\n    {\n      &quot;name&quot;: &quot;name&quot;,\n      &quot;type&quot;: &quot;string&quot;\n    },\n    {\n      &quot;name&quot;: &quot;favorite_number&quot;,\n      &quot;type&quot;: &quot;int&quot;\n    },\n    {\n      &quot;name&quot;: &quot;favorite_color&quot;,\n      &quot;type&quot;: &quot;string&quot;,\n      &quot;default&quot;: &quot;green&quot;\n    }\n  ]\n}\n</code></pre>\n<p>Classes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AvroSerializer&lt;T extends SpecificRecordBase&gt; implements Serializer&lt;T&gt; {\n\n    @Override\n    public byte[] serialize(String topic, T data) {\n        try (ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream()) {\n            if (data != null) {\n                BinaryEncoder binaryEncoder = EncoderFactory.get().binaryEncoder(byteArrayOutputStream, null);\n                DatumWriter&lt;T&gt; datumWriter = new SpecificDatumWriter&lt;&gt;(data.getSchema());\n                datumWriter.write(data, binaryEncoder);\n                binaryEncoder.flush();\n                return byteArrayOutputStream.toByteArray();\n            }\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;An exception occurred during serialization&quot;, e);\n        }\n        return null;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class AvroDeserializer&lt;T extends SpecificRecordBase&gt; implements Deserializer&lt;T&gt; {\n\n    protected final Class&lt;T&gt; targetType;\n\n    public AvroDeserializer(Class&lt;T&gt; targetType) {\n        this.targetType = targetType;\n    }\n\n    @Override\n    public T deserialize(String topic, byte[] bytes) {\n        try {\n            if (bytes != null) {\n                DatumReader&lt;T&gt; datumReader =\n                        new SpecificDatumReader&lt;&gt;(targetType.getDeclaredConstructor().newInstance().getSchema());\n                Decoder decoder = DecoderFactory.get().binaryDecoder(bytes, null);\n                return datumReader.read(null, decoder);\n            }\n        } catch (Exception e) {\n            throw new RuntimeException(&quot;An exception occurred during deserialization&quot;, e);\n        }\n        return null;\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class UserProducer {\n\n    public static void main(String[] args) {\n        UserProducer userProducer = new UserProducer();\n        userProducer.writeUser();\n    }\n\n    public void writeUser() {\n        Properties properties = new Properties();\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n        properties.put(ProducerConfig.KEY_SERIALIZER_CLASS_CONFIG, StringSerializer.class);\n        properties.put(ProducerConfig.VALUE_SERIALIZER_CLASS_CONFIG, AvroSerializer.class);\n\n        Producer&lt;String, SpecificRecord&gt; recordProducer = new KafkaProducer&lt;&gt;(properties);\n\n        User user = User.newBuilder()\n                .setName(&quot;Bob&quot;)\n                .setFavoriteNumber(666)\n                .build();\n\n        ProducerRecord&lt;String, SpecificRecord&gt; record = new ProducerRecord&lt;&gt;(&quot;avro.User&quot;, null, user);\n        recordProducer.send(record);\n        recordProducer.flush();\n        recordProducer.close();\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>public class Consumer {\n\n    public static void main(String[] args) {\n        Consumer consumer = new Consumer();\n        consumer.readMessages();\n    }\n\n    public void readMessages() {\n        Properties properties = new Properties();\n        properties.put(ProducerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n        properties.put(ConsumerConfig.GROUP_ID_CONFIG, &quot;specific-record-consumer-group&quot;);\n        properties.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n        properties.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, false);\n\n        KafkaConsumer&lt;String, User&gt; consumer = new KafkaConsumer&lt;&gt;(properties,\n                new StringDeserializer(), new AvroDeserializer&lt;&gt;(User.class));\n\n        consumer.subscribe(Collections.singletonList(&quot;avro.User&quot;));\n\n        while (true) {\n            consumer.poll(Duration.ofMillis(100)).forEach(System.out::println);\n            consumer.commitAsync();\n        }\n    }\n}\n</code></pre>\n<p>Of course having the same schema it works fine. The problem is with schema evolving. On the receiver side there a new field with default value that should be set but ... I get an exception:</p>\n<pre><code>Exception in thread &quot;main&quot; org.apache.kafka.common.errors.SerializationException: Error deserializing key/value for partition avro.User-0 at offset 0. If needed, please seek past the record to continue consumption.\nCaused by: java.lang.RuntimeException: An exception occurred during deserialization\n    at serializer.AvroDeserializer.deserialize(AvroDeserializer.java:28)\n    at serializer.AvroDeserializer.deserialize(AvroDeserializer.java:10)\n    at org.apache.kafka.common.serialization.Deserializer.deserialize(Deserializer.java:60)\n    at org.apache.kafka.clients.consumer.internals.Fetcher.parseRecord(Fetcher.java:1306)\n    at org.apache.kafka.clients.consumer.internals.Fetcher.access$3500(Fetcher.java:128)\n    at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.fetchRecords(Fetcher.java:1537)\n    at org.apache.kafka.clients.consumer.internals.Fetcher$CompletedFetch.access$1700(Fetcher.java:1373)\n    at org.apache.kafka.clients.consumer.internals.Fetcher.fetchRecords(Fetcher.java:679)\n    at org.apache.kafka.clients.consumer.internals.Fetcher.fetchedRecords(Fetcher.java:634)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.pollForFetches(KafkaConsumer.java:1313)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1240)\n    at org.apache.kafka.clients.consumer.KafkaConsumer.poll(KafkaConsumer.java:1211)\n    at consumer.Consumer.readMessages(Consumer.java:34)\n    at consumer.Consumer.main(Consumer.java:18)\nCaused by: java.io.EOFException\n    at org.apache.avro.io.BinaryDecoder.ensureBounds(BinaryDecoder.java:509)\n    at org.apache.avro.io.BinaryDecoder.readLong(BinaryDecoder.java:181)\n    at org.apache.avro.io.BinaryDecoder.readString(BinaryDecoder.java:279)\n    at org.apache.avro.io.BinaryDecoder.readString(BinaryDecoder.java:298)\n    at org.apache.avro.io.ResolvingDecoder.readString(ResolvingDecoder.java:220)\n    at org.apache.avro.generic.GenericDatumReader.readString(GenericDatumReader.java:456)\n    at org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:191)\n    at org.apache.avro.specific.SpecificDatumReader.readField(SpecificDatumReader.java:136)\n    at org.apache.avro.generic.GenericDatumReader.readRecord(GenericDatumReader.java:247)\n    at org.apache.avro.specific.SpecificDatumReader.readRecord(SpecificDatumReader.java:123)\n    at org.apache.avro.generic.GenericDatumReader.readWithoutConversion(GenericDatumReader.java:179)\n    at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:160)\n    at org.apache.avro.generic.GenericDatumReader.read(GenericDatumReader.java:153)\n    at serializer.AvroDeserializer.deserialize(AvroDeserializer.java:25)\n    ... 13 more\n</code></pre>\n<p>pom.xml in both applications is more less the same</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-avro-producer&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n            &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n            &lt;version&gt;2.4.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;1.7.30&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-log4j12&lt;/artifactId&gt;\n            &lt;version&gt;1.7.30&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n            &lt;artifactId&gt;avro&lt;/artifactId&gt;\n            &lt;version&gt;1.9.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n            &lt;artifactId&gt;avro-compiler&lt;/artifactId&gt;\n            &lt;version&gt;1.9.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n            &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\n            &lt;version&gt;1.9.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;1.8&lt;/source&gt;\n                    &lt;target&gt;1.8&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.avro&lt;/groupId&gt;\n                &lt;artifactId&gt;avro-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.9.2&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;schema&lt;/goal&gt;\n                            &lt;goal&gt;protocol&lt;/goal&gt;\n                            &lt;goal&gt;idl-protocol&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;sourceDirectory&gt;${project.basedir}/src/main/avro/&lt;/sourceDirectory&gt;\n                            &lt;outputDirectory&gt;${project.basedir}/target/generated-sources/avro/&lt;/outputDirectory&gt;\n                            &lt;stringType&gt;String&lt;/stringType&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>What am I doing wrong?</p>\n<p>I tried with equal schemas and it works but I cannot figure out why receiver side does not handle the lack of optional field.</p>\n"},{"tags":["java","swing","jtable"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":2,"creation_date":1671776632,"post_id":74896715,"comment_id":132173737,"body_markdown":"Never catch exceptions without handle it. Also do not catch the base class Exception. Catch only specific exceptions","body":"Never catch exceptions without handle it. Also do not catch the base class Exception. Catch only specific exceptions"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1671776745,"post_id":74896715,"comment_id":132173750,"body_markdown":"You should take the value from the resultset","body":"You should take the value from the resultset"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1671777370,"post_id":74896715,"comment_id":132173822,"body_markdown":"Create a new `TableModel` and fill that; Remove all the existing content from the existing `TableModel` before you up date it","body":"Create a new <code>TableModel</code> and fill that; Remove all the existing content from the existing <code>TableModel</code> before you up date it"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1671806595,"post_id":74896715,"comment_id":132180787,"body_markdown":"You can use the `DefaultTableModel.setRowCount(...)` method to clear the data before adding more data.","body":"You can use the <code>DefaultTableModel.setRowCount(...)</code> method to clear the data before adding more data."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":0,"creation_date":1671840930,"post_id":74896715,"comment_id":132187975,"body_markdown":"[mcve] please..","body":"<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please.."}],"owner":{"account_id":27052346,"reputation":11,"user_id":20605523,"display_name":"Dev W"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1671813084,"creation_date":1671776443,"question_id":74896715,"body_markdown":"How to not duplicate when adding data in `JTable` because when I am adding in `JTable` it always duplicate the same data.\r\n```java\r\npublic void buyproduct() {\r\n    String name = code_cart1.getText();\r\n    try {\r\n        con = Connector.getConnection();\r\n        PreparedStatement pst = con.prepareStatement(&quot;SELECT `Code`, `Category`, `ProductName`, `Size`, `Quantity`, `Price`, `Sub-Total` FROM `product_table` WHERE Code = ?&quot;);\r\n        pst.setString(1, name);\r\n        rs = pst.executeQuery();\r\n        while (rs.next()) {\r\n            int currentqty = rs.getInt(&quot;Quantity&quot;);\r\n            int pricenew = Integer.parseInt(price_cart1.getText());\r\n            int qtynew = Integer.parseInt(quantity_cart1.getText());\r\n            int tot = pricenew * qtynew;\r\n            if (qtynew &gt; currentqty || qtynew == 0) {\r\n                JOptionPane.showMessageDialog(this, &quot;Out of Stock!&quot;);\r\n            } else {\r\n                DefaultTableModel model = (DefaultTableModel) cart_Display.getModel();\r\n                model.addRow(new Object[]{code_cart1.getText(),\r\n                                          category_cart1.getText(),\r\n                                          productname_cart1.getText(),\r\n                                          size_cart1.getText(),\r\n                                          quantity_cart1.getText(),\r\n                                          price_cart1.getText(),\r\n                                          tot});\r\n                int sum = 0;\r\n                for (int i = 0; i &lt; cart_Display.getRowCount(); i++) {\r\n                    sum = sum + Integer.parseInt(cart_Display.getValueAt(i, 6).toString());\r\n                }\r\n                SubTotal_Cart_text.setText(Integer.toString(sum));\r\n                SubTotal_Cart_text1.setText(Integer.toString(sum));\r\n                code_cart1.setText(&quot;&quot;);\r\n                category_cart1.setText(&quot;&quot;);\r\n                productname_cart1.setText(&quot;&quot;);\r\n                size_cart1.setText(&quot;&quot;);\r\n                quantity_cart1.setText(&quot;&quot;);\r\n                price_cart1.setText(&quot;&quot;);\r\n            }\r\n        }\r\n    } catch(Exception ex) {\r\n    }\r\n}\r\n```\r\n","title":"How to not duplicate when adding data in JTable","body":"<p>How to not duplicate when adding data in <code>JTable</code> because when I am adding in <code>JTable</code> it always duplicate the same data.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void buyproduct() {\n    String name = code_cart1.getText();\n    try {\n        con = Connector.getConnection();\n        PreparedStatement pst = con.prepareStatement(&quot;SELECT `Code`, `Category`, `ProductName`, `Size`, `Quantity`, `Price`, `Sub-Total` FROM `product_table` WHERE Code = ?&quot;);\n        pst.setString(1, name);\n        rs = pst.executeQuery();\n        while (rs.next()) {\n            int currentqty = rs.getInt(&quot;Quantity&quot;);\n            int pricenew = Integer.parseInt(price_cart1.getText());\n            int qtynew = Integer.parseInt(quantity_cart1.getText());\n            int tot = pricenew * qtynew;\n            if (qtynew &gt; currentqty || qtynew == 0) {\n                JOptionPane.showMessageDialog(this, &quot;Out of Stock!&quot;);\n            } else {\n                DefaultTableModel model = (DefaultTableModel) cart_Display.getModel();\n                model.addRow(new Object[]{code_cart1.getText(),\n                                          category_cart1.getText(),\n                                          productname_cart1.getText(),\n                                          size_cart1.getText(),\n                                          quantity_cart1.getText(),\n                                          price_cart1.getText(),\n                                          tot});\n                int sum = 0;\n                for (int i = 0; i &lt; cart_Display.getRowCount(); i++) {\n                    sum = sum + Integer.parseInt(cart_Display.getValueAt(i, 6).toString());\n                }\n                SubTotal_Cart_text.setText(Integer.toString(sum));\n                SubTotal_Cart_text1.setText(Integer.toString(sum));\n                code_cart1.setText(&quot;&quot;);\n                category_cart1.setText(&quot;&quot;);\n                productname_cart1.setText(&quot;&quot;);\n                size_cart1.setText(&quot;&quot;);\n                quantity_cart1.setText(&quot;&quot;);\n                price_cart1.setText(&quot;&quot;);\n            }\n        }\n    } catch(Exception ex) {\n    }\n}\n</code></pre>\n"},{"tags":["javascript","java","gwt"],"comments":[{"owner":{"account_id":4195842,"reputation":1,"user_id":3437290,"display_name":"user3437290"},"score":0,"creation_date":1672050881,"post_id":74896485,"comment_id":132212609,"body_markdown":"public static native String readText()/*-{\n   try\n     {\n      var promise = $wnd.navigator.clipboard.readText();\n      var resolve = function(text){\n      console.log(text); \n      }\n      catch (e){\n      //futher code goes here\n      }\n     }-*/;\n   above code is working, can anybody help here how to return (text) value as String","body":"public static native String readText()/*-{    try      {       var promise = $wnd.navigator.clipboard.readText();       var resolve = function(text){       console.log(text);        }       catch (e){       //futher code goes here       }      }-*/;    above code is working, can anybody help here how to return (text) value as String"},{"owner":{"account_id":4195842,"reputation":1,"user_id":3437290,"display_name":"user3437290"},"score":0,"creation_date":1672818756,"post_id":74896485,"comment_id":132356553,"body_markdown":"Experts could you please comment!!","body":"Experts could you please comment!!"}],"owner":{"account_id":4195842,"reputation":1,"user_id":3437290,"display_name":"user3437290"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671812986,"creation_date":1671774100,"question_id":74896485,"body_markdown":"We are facing issue with copy to clipboard function, which is working fine with IE browser while copying       data from Excel to grid on browser,but not working with modern browsers.\r\n\r\n&gt; Our code is using GWT and through java native method call its calling Javascript code.\r\n&gt; We have tool button- with name &quot;Paste from excel&quot;  on click of it below code gets called\r\n&gt; \r\n&gt; I was trying to use `event.clipboardData.getData(&quot;text/plain&quot;)` but in my case I am not aware how to get event in `getClipboardData()`. Please comment if any one has resolved similar issue, considering the code how I can get event(paste event) in getClipboardData() or any alternative way to get solution.\r\n\r\n```\r\n\r\n\r\nprotected Function pasteFromExcelFunction =new Function(){\r\n    public void execute(){\r\n     if(readOnly){\r\n     return;\r\n     }// its false\r\n    try{\r\n         if(pasteFromExcelHelper.pasteDataIntoGrid(BaseEditorGridPanel.this, getRecordDef()));\r\n           doAfterPaste();\r\n   }\r\n    }\r\n  }    \r\n    public boolean pasteDataIntoGrid(BaseEditorGridPanel grid, BaseGridRecordDef recordDef)\r\n    {\r\n      boolean pasteSuccessful=true;\r\n      String pastedText= readFromClipboard(); \r\n     }   \r\n     private String readFromClipboard (){\r\n    return JavaScriptUtils.getClipboardData();\r\n   }\r\n\r\npublic static native String getClipboardData()/*-{\r\n    if($wnd.clipboardData &amp;&amp; clipboardData.setData){\r\n    return $wnd.clipboardData.getData(&#39;Text&#39;);\r\n}-*/;\r\n\r\n```\r\n\r\n\r\n\r\n","title":"Copy to clipboard getdata function not working with modern browsers","body":"<p>We are facing issue with copy to clipboard function, which is working fine with IE browser while copying       data from Excel to grid on browser,but not working with modern browsers.</p>\n<blockquote>\n<p>Our code is using GWT and through java native method call its calling Javascript code.\nWe have tool button- with name &quot;Paste from excel&quot;  on click of it below code gets called</p>\n<p>I was trying to use <code>event.clipboardData.getData(&quot;text/plain&quot;)</code> but in my case I am not aware how to get event in <code>getClipboardData()</code>. Please comment if any one has resolved similar issue, considering the code how I can get event(paste event) in getClipboardData() or any alternative way to get solution.</p>\n</blockquote>\n<pre><code>\n\nprotected Function pasteFromExcelFunction =new Function(){\n    public void execute(){\n     if(readOnly){\n     return;\n     }// its false\n    try{\n         if(pasteFromExcelHelper.pasteDataIntoGrid(BaseEditorGridPanel.this, getRecordDef()));\n           doAfterPaste();\n   }\n    }\n  }    \n    public boolean pasteDataIntoGrid(BaseEditorGridPanel grid, BaseGridRecordDef recordDef)\n    {\n      boolean pasteSuccessful=true;\n      String pastedText= readFromClipboard(); \n     }   \n     private String readFromClipboard (){\n    return JavaScriptUtils.getClipboardData();\n   }\n\npublic static native String getClipboardData()/*-{\n    if($wnd.clipboardData &amp;&amp; clipboardData.setData){\n    return $wnd.clipboardData.getData('Text');\n}-*/;\n\n</code></pre>\n"},{"tags":["java","multithreading","udp"],"answers":[{"tags":[],"owner":{"account_id":20399566,"reputation":306,"user_id":14965614,"display_name":"Andrea"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671812791,"creation_date":1671812791,"answer_id":74901849,"question_id":74898979,"body_markdown":"A DatagramSocket listens forever also if there no incoming traffic. If the client goes down the server has no way to understand what happens (whit TCP connection you can). \r\n\r\nThe only moment in which the server can &quot;understand&quot; the problem is when a client reconnect. I think that a possible approach is to keep a Map of active port/Handler in the main thread and do one of these two thing:\r\n- reuse the previous  connection/threads/Handler passing the same port to the client without creating a new thread. The server side thread will be still alive.\r\n- kill the previous  connection/threads/Handler closing the socket from outside (you must expose a method). This will generate a IOException in  socket.receive (packet); line and the thread will exit. Then you can create a new one without problems\r\n","title":"Problem with Java UDP server client Threads","body":"<p>A DatagramSocket listens forever also if there no incoming traffic. If the client goes down the server has no way to understand what happens (whit TCP connection you can).</p>\n<p>The only moment in which the server can &quot;understand&quot; the problem is when a client reconnect. I think that a possible approach is to keep a Map of active port/Handler in the main thread and do one of these two thing:</p>\n<ul>\n<li>reuse the previous  connection/threads/Handler passing the same port to the client without creating a new thread. The server side thread will be still alive.</li>\n<li>kill the previous  connection/threads/Handler closing the socket from outside (you must expose a method). This will generate a IOException in  socket.receive (packet); line and the thread will exit. Then you can create a new one without problems</li>\n</ul>\n"}],"owner":{"account_id":27204287,"reputation":11,"user_id":20736089,"display_name":"Jay Medicco"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1671812791,"creation_date":1671793774,"question_id":74898979,"body_markdown":"I have a UDP server and many UDP clients (for hardware reasons, UDP is the only choice).\r\n\r\nThe UDP server accepts an incoming UDP connection on a default port and then assigns a new port to the client. It then starts a new thread (handler) with the new port to handle the client.\r\n\r\nThe client connects to the handler thread with the new port.\r\n\r\nThe client constantly feeds data to the handler thread.\r\n\r\nThe problem comes when I am trying to manage what will happen when the client goes down for whatever reason and then comes back up again.\r\n\r\nI catch a datagramsocket exception and have tried various ways to terminate the handling thread.\r\n\r\nThe problem is that when the client is back up again, using the same port (must use the same port assigned to it), a new handler thread (i presume?) is started by the server and I get a java.net.BindException: Address is already in use: bind....\r\n\r\nThis is what I get (after the client goes down and back up again).\r\n`java.net.BindException: Address already in use: bind\r\n------------IOException was caught--------------`\r\n\r\nI really don&#39;t understand how to unbind the datagramsocket in any different way.\r\n The data flow is gone, \r\nthe socket times out, \r\nthe thread is stopped.\r\nI&#39;ve even used the deprecated .stop() method to make sure on a couple of runs. \r\n\r\nWhy is the socket still bound / in use ?\r\n\r\nWhat can I do about it?\r\n\r\n\r\nAnybody has any suggestions .. I am really stuck...\r\n\r\nhere is the Handler code ... \r\n\r\n\r\n\r\n\r\n```\r\npublic class Handler implements Runnable, Serializable\r\n {\r\n\r\n//Declaration stuff\r\n\r\n\t\r\npublic Handler (int con_port)\r\n{\r\n\t\r\n\tport_number=con_port;\r\n\r\n\t\r\n}  \r\n\r\n\r\npublic static void wait(int ms)\r\n{\r\n\ttry \r\n\t{\r\n\t\tThread.sleep(ms);\r\n\t}\r\n\tcatch(InterruptedException ex)\r\n\t{\r\n\t\tThread.currentThread().interrupt();\r\n\t}\r\n\t\r\n\t\r\n\t\r\n}\r\n\r\n\r\n\r\npublic void write() throws FileNotFoundException, IOException\r\n{\r\n\tFileOutputStream fos=new FileOutputStream(&quot;testing.tmp&quot;);\r\n\tObjectOutputStream oos= new ObjectOutputStream(fos);\r\n\toos.writeObject(data_list);\r\n\toos.close();\r\n\r\n}\r\n\r\npublic void write(String fname) throws FileNotFoundException, IOException\r\n{\r\n\tFileOutputStream fos=new FileOutputStream(fname);\r\n\tObjectOutputStream oos= new ObjectOutputStream(fos);\r\n\toos.writeObject(data_list);\r\n\toos.close();\r\n}\r\n\r\n    public void run()\r\n\t{\r\n\t\t\r\n\t\twhile(running)\r\n\t\t{\r\n\t\t\r\n\t\ttry\r\n        {\r\n\t\t\tDatagramSocket socket =new DatagramSocket(port_number);\r\n\t\t\tsocket.setReuseAddress(true);\r\n\t\tsocket.setSoTimeout(1000);\r\n\t\tDatagramPacket packet;\r\n\t\tbyte[] buf = new byte[32];\r\n\t\tpacket = new DatagramPacket (buf, buf.length);\r\n\t\tsocket.receive (packet);\r\n\t\tString received = new String (packet.getData());\r\n\t\r\n\t\tString data[]= received.split(&quot;/&quot;);\r\n\t\t\r\n\t\t//Do things with incoming data\r\n\t\t\r\n\t\tsocket.close();\r\n\t\t\r\n\t\t}\r\n        catch (IOException e)\r\n        {\r\n\t\t\tSystem.out.println(e);\r\n\t\t\t\r\n\r\n\t\t\tSystem.out.println(&quot;------------IOException was caught--------------&quot;);\r\n\t\t\trunning=false;\r\n        }\r\n\t\t\r\n\t\tSystem.out.println(&quot;This is the Handler Thread Id:&quot;+Thread.currentThread().getId());\r\n\t\t}\r\n       \r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n\r\nI tried to use :\r\n\r\n```\r\nDatagramSocket socket = new DatagramSocket(null);\r\nsocket.setReuseAddress(true);\r\nsocket.bind(new InetSocketAddress(localAddress, localPort));\r\n```\r\n\r\nbut when I use that, I get even more unexplained behavior where I get a socket timeout exception even though the client is feeding data normally..\r\nOn that front, java is picking up my VM GNS3 nic IP addresses and does not pick up my actual NIC IP address, which is weird... I have to add that manually if I am using the above way..\r\n","title":"Problem with Java UDP server client Threads","body":"<p>I have a UDP server and many UDP clients (for hardware reasons, UDP is the only choice).</p>\n<p>The UDP server accepts an incoming UDP connection on a default port and then assigns a new port to the client. It then starts a new thread (handler) with the new port to handle the client.</p>\n<p>The client connects to the handler thread with the new port.</p>\n<p>The client constantly feeds data to the handler thread.</p>\n<p>The problem comes when I am trying to manage what will happen when the client goes down for whatever reason and then comes back up again.</p>\n<p>I catch a datagramsocket exception and have tried various ways to terminate the handling thread.</p>\n<p>The problem is that when the client is back up again, using the same port (must use the same port assigned to it), a new handler thread (i presume?) is started by the server and I get a java.net.BindException: Address is already in use: bind....</p>\n<p>This is what I get (after the client goes down and back up again).\n<code>java.net.BindException: Address already in use: bind ------------IOException was caught--------------</code></p>\n<p>I really don't understand how to unbind the datagramsocket in any different way.\nThe data flow is gone,\nthe socket times out,\nthe thread is stopped.\nI've even used the deprecated .stop() method to make sure on a couple of runs.</p>\n<p>Why is the socket still bound / in use ?</p>\n<p>What can I do about it?</p>\n<p>Anybody has any suggestions .. I am really stuck...</p>\n<p>here is the Handler code ...</p>\n<pre><code>public class Handler implements Runnable, Serializable\n {\n\n//Declaration stuff\n\n    \npublic Handler (int con_port)\n{\n    \n    port_number=con_port;\n\n    \n}  \n\n\npublic static void wait(int ms)\n{\n    try \n    {\n        Thread.sleep(ms);\n    }\n    catch(InterruptedException ex)\n    {\n        Thread.currentThread().interrupt();\n    }\n    \n    \n    \n}\n\n\n\npublic void write() throws FileNotFoundException, IOException\n{\n    FileOutputStream fos=new FileOutputStream(&quot;testing.tmp&quot;);\n    ObjectOutputStream oos= new ObjectOutputStream(fos);\n    oos.writeObject(data_list);\n    oos.close();\n\n}\n\npublic void write(String fname) throws FileNotFoundException, IOException\n{\n    FileOutputStream fos=new FileOutputStream(fname);\n    ObjectOutputStream oos= new ObjectOutputStream(fos);\n    oos.writeObject(data_list);\n    oos.close();\n}\n\n    public void run()\n    {\n        \n        while(running)\n        {\n        \n        try\n        {\n            DatagramSocket socket =new DatagramSocket(port_number);\n            socket.setReuseAddress(true);\n        socket.setSoTimeout(1000);\n        DatagramPacket packet;\n        byte[] buf = new byte[32];\n        packet = new DatagramPacket (buf, buf.length);\n        socket.receive (packet);\n        String received = new String (packet.getData());\n    \n        String data[]= received.split(&quot;/&quot;);\n        \n        //Do things with incoming data\n        \n        socket.close();\n        \n        }\n        catch (IOException e)\n        {\n            System.out.println(e);\n            \n\n            System.out.println(&quot;------------IOException was caught--------------&quot;);\n            running=false;\n        }\n        \n        System.out.println(&quot;This is the Handler Thread Id:&quot;+Thread.currentThread().getId());\n        }\n       \n\n    }\n\n}\n</code></pre>\n<p>I tried to use :</p>\n<pre><code>DatagramSocket socket = new DatagramSocket(null);\nsocket.setReuseAddress(true);\nsocket.bind(new InetSocketAddress(localAddress, localPort));\n</code></pre>\n<p>but when I use that, I get even more unexplained behavior where I get a socket timeout exception even though the client is feeding data normally..\nOn that front, java is picking up my VM GNS3 nic IP addresses and does not pick up my actual NIC IP address, which is weird... I have to add that manually if I am using the above way..</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":13794509,"reputation":138,"user_id":9956025,"display_name":"Hrithik Manchanda"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1671812068,"creation_date":1563281630,"answer_id":57057754,"question_id":57057074,"body_markdown":"For this you have to disable a setting which verifies the hostname with the name you provided. This is an error of HTTPClient in apache and you have to virtualize the hostname as verified in setSSLHostnameVerifier method like this.\r\n\r\nAlthough this code is in Kotlin but one can write java alternative easily\r\n```\r\nval builder = RestClient.builder(host).setHttpClientConfigCallback { httpAsyncClientBuilder -&gt;\r\n            httpAsyncClientBuilder.setSSLHostnameVerifier { _, _ -&gt; true }\r\n        }\r\n```\r\nThis will always override your setting for verifying hostname as true.\r\n\r\nHere is Java code reference.\r\n```\r\nRestClientBuilder builder =  RestClient.builder(host);\r\nbuilder.setHttpClientConfigCallback(httpAsyncClientBuilder -&gt;\r\n   httpAsyncClientBuilder.setSSLHostnameVerifier((host, sslSession) -&gt; true));\r\nnew RestHighLevelClient(builder);\r\n```\r\n\r\n","title":"How to disable SSL verification for Elasticsearch RestClient v6.7.0 in Java","body":"<p>For this you have to disable a setting which verifies the hostname with the name you provided. This is an error of HTTPClient in apache and you have to virtualize the hostname as verified in setSSLHostnameVerifier method like this.</p>\n<p>Although this code is in Kotlin but one can write java alternative easily</p>\n<pre><code>val builder = RestClient.builder(host).setHttpClientConfigCallback { httpAsyncClientBuilder -&gt;\n            httpAsyncClientBuilder.setSSLHostnameVerifier { _, _ -&gt; true }\n        }\n</code></pre>\n<p>This will always override your setting for verifying hostname as true.</p>\n<p>Here is Java code reference.</p>\n<pre><code>RestClientBuilder builder =  RestClient.builder(host);\nbuilder.setHttpClientConfigCallback(httpAsyncClientBuilder -&gt;\n   httpAsyncClientBuilder.setSSLHostnameVerifier((host, sslSession) -&gt; true));\nnew RestHighLevelClient(builder);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14950045,"reputation":11564,"user_id":10794031,"display_name":"bad_coder"},"score":0,"creation_date":1583127546,"post_id":60482914,"comment_id":106998166,"body_markdown":"You should include a brief explanation of what the code does and why it solves the problem.","body":"You should include a brief explanation of what the code does and why it solves the problem."},{"owner":{"account_id":6064253,"reputation":153,"user_id":4735133,"display_name":"Jiten"},"score":0,"creation_date":1585938773,"post_id":60482914,"comment_id":107951099,"body_markdown":"Please explain how this fixed the error or little brief about the code which you have written here.","body":"Please explain how this fixed the error or little brief about the code which you have written here."},{"owner":{"account_id":367746,"reputation":24129,"user_id":714112,"accept_rate":80,"display_name":"Sridhar Sarnobat"},"score":2,"creation_date":1603151222,"post_id":60482914,"comment_id":113939830,"body_markdown":"I think it&#39;s relatively obvious. `setSSLHostnameVerifier()` will return `true` regardless of the SSL session behavior.","body":"I think it&#39;s relatively obvious. <code>setSSLHostnameVerifier()</code> will return <code>true</code> regardless of the SSL session behavior."}],"tags":[],"owner":{"account_id":10453996,"reputation":417,"user_id":7706667,"display_name":"AMA"},"comment_count":3,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1649915880,"creation_date":1583126322,"answer_id":60482914,"question_id":57057074,"body_markdown":"Since the hostname in your certificate is not localhost you will have this issue, so to solve it you need to disable SSL hostname verification, by doing the following, return true always and this will skip the verification.\r\n\r\n    RestClientBuilder restClientBuilder =  RestClient.builder(HttpHost);\r\n    restClientBuilder.setHttpClientConfigCallback(httpAsyncClientBuilder -&gt;\r\n       httpAsyncClientBuilder.setSSLHostnameVerifier((s, sslSession) -&gt; true));\r\n    new RestHighLevelClient(restClientBuilder);\r\n","title":"How to disable SSL verification for Elasticsearch RestClient v6.7.0 in Java","body":"<p>Since the hostname in your certificate is not localhost you will have this issue, so to solve it you need to disable SSL hostname verification, by doing the following, return true always and this will skip the verification.</p>\n<pre><code>RestClientBuilder restClientBuilder =  RestClient.builder(HttpHost);\nrestClientBuilder.setHttpClientConfigCallback(httpAsyncClientBuilder -&gt;\n   httpAsyncClientBuilder.setSSLHostnameVerifier((s, sslSession) -&gt; true));\nnew RestHighLevelClient(restClientBuilder);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16930860,"reputation":164,"user_id":12245178,"display_name":"Anusree"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1620142023,"creation_date":1619678194,"answer_id":67312156,"question_id":57057074,"body_markdown":"I hope this would give a complete answer.\r\n\r\nhope this will help you, I had the same problem and this is how I resolved.\r\n\r\n        @Bean\r\n            public RestHighLevelClient createSimpleElasticClient() throws Exception {\r\n                try {\r\n                    SSLContextBuilder sslBuilder = SSLContexts.custom()\r\n                            .loadTrustMaterial(null, (x509Certificates, s) -&gt; true);\r\n                            final SSLContext sslContext = sslBuilder.build();\r\n                    RestHighLevelClient client = new RestHighLevelClient(RestClient\r\n                            .builder(new HttpHost(hostNameOrLoadbalancerURL, 443, &quot;https&quot;)) \r\n    //port number is given as 443 since its https schema\r\n                            .setHttpClientConfigCallback(new HttpClientConfigCallback() {\r\n                                @Override\r\n                                public HttpAsyncClientBuilder customizeHttpClient(HttpAsyncClientBuilder httpClientBuilder) {\r\n                                    return httpClientBuilder\r\n                                             .setSSLContext(sslContext)\r\n                                             .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE);\r\n                                }\r\n                            })\r\n                            .setRequestConfigCallback(new RestClientBuilder.RequestConfigCallback() {\r\n                                @Override\r\n                                public RequestConfig.Builder customizeRequestConfig(\r\n                                        RequestConfig.Builder requestConfigBuilder) {\r\n                                    return requestConfigBuilder.setConnectTimeout(5000)\r\n                                            .setSocketTimeout(120000);\r\n                                }\r\n                            }));\r\n                    System.out.println(&quot;elasticsearch client created&quot;);\r\n                    return client;\r\n                } catch (Exception e) {\r\n                    System.out.println(e);\r\n                    throw new Exception(&quot;Could not create an elasticsearch client!!&quot;);\r\n                }\r\n            }","title":"How to disable SSL verification for Elasticsearch RestClient v6.7.0 in Java","body":"<p>I hope this would give a complete answer.</p>\n<p>hope this will help you, I had the same problem and this is how I resolved.</p>\n<pre><code>    @Bean\n        public RestHighLevelClient createSimpleElasticClient() throws Exception {\n            try {\n                SSLContextBuilder sslBuilder = SSLContexts.custom()\n                        .loadTrustMaterial(null, (x509Certificates, s) -&gt; true);\n                        final SSLContext sslContext = sslBuilder.build();\n                RestHighLevelClient client = new RestHighLevelClient(RestClient\n                        .builder(new HttpHost(hostNameOrLoadbalancerURL, 443, &quot;https&quot;)) \n//port number is given as 443 since its https schema\n                        .setHttpClientConfigCallback(new HttpClientConfigCallback() {\n                            @Override\n                            public HttpAsyncClientBuilder customizeHttpClient(HttpAsyncClientBuilder httpClientBuilder) {\n                                return httpClientBuilder\n                                         .setSSLContext(sslContext)\n                                         .setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE);\n                            }\n                        })\n                        .setRequestConfigCallback(new RestClientBuilder.RequestConfigCallback() {\n                            @Override\n                            public RequestConfig.Builder customizeRequestConfig(\n                                    RequestConfig.Builder requestConfigBuilder) {\n                                return requestConfigBuilder.setConnectTimeout(5000)\n                                        .setSocketTimeout(120000);\n                            }\n                        }));\n                System.out.println(&quot;elasticsearch client created&quot;);\n                return client;\n            } catch (Exception e) {\n                System.out.println(e);\n                throw new Exception(&quot;Could not create an elasticsearch client!!&quot;);\n            }\n        }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6316958,"reputation":621,"user_id":4906544,"display_name":"Alexey Stepanov"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638446431,"creation_date":1638446431,"answer_id":70199056,"question_id":57057074,"body_markdown":"Full working example for Elastic disabling SSL verification with Spring Boot on Kotlin\r\n```kotlin\r\nimport org.apache.http.conn.ssl.NoopHostnameVerifier\r\nimport org.apache.http.conn.ssl.TrustAllStrategy\r\nimport org.apache.http.impl.nio.client.HttpAsyncClientBuilder\r\nimport org.apache.http.ssl.SSLContexts\r\nimport org.elasticsearch.client.RestClientBuilder\r\nimport org.springframework.boot.autoconfigure.elasticsearch.RestClientBuilderCustomizer\r\n\r\n@Configuration\r\n@ConditionalOnProperty(name = [&quot;spring.elasticsearch.rest.ssl.disable&quot;], havingValue = &quot;DISABLE_SSL&quot;)\r\nclass ElasticSSLCertDisableConfig {\r\n\r\n    private val sslContext = SSLContexts.custom()\r\n        .loadTrustMaterial(null, TrustAllStrategy.INSTANCE)\r\n        .build()\r\n\r\n    @Bean\r\n    fun restClientBuilderCustomizer() = object : RestClientBuilderCustomizer {\r\n        override fun customize(builder: HttpAsyncClientBuilder) {\r\n            builder.setSSLContext(sslContext)\r\n            builder.setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\r\n        }\r\n\r\n        override fun customize(builder: RestClientBuilder) {}\r\n    }\r\n}\r\n```\r\n\r\nATTENTION: Use it for development environment only. ","title":"How to disable SSL verification for Elasticsearch RestClient v6.7.0 in Java","body":"<p>Full working example for Elastic disabling SSL verification with Spring Boot on Kotlin</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>import org.apache.http.conn.ssl.NoopHostnameVerifier\nimport org.apache.http.conn.ssl.TrustAllStrategy\nimport org.apache.http.impl.nio.client.HttpAsyncClientBuilder\nimport org.apache.http.ssl.SSLContexts\nimport org.elasticsearch.client.RestClientBuilder\nimport org.springframework.boot.autoconfigure.elasticsearch.RestClientBuilderCustomizer\n\n@Configuration\n@ConditionalOnProperty(name = [&quot;spring.elasticsearch.rest.ssl.disable&quot;], havingValue = &quot;DISABLE_SSL&quot;)\nclass ElasticSSLCertDisableConfig {\n\n    private val sslContext = SSLContexts.custom()\n        .loadTrustMaterial(null, TrustAllStrategy.INSTANCE)\n        .build()\n\n    @Bean\n    fun restClientBuilderCustomizer() = object : RestClientBuilderCustomizer {\n        override fun customize(builder: HttpAsyncClientBuilder) {\n            builder.setSSLContext(sslContext)\n            builder.setSSLHostnameVerifier(NoopHostnameVerifier.INSTANCE)\n        }\n\n        override fun customize(builder: RestClientBuilder) {}\n    }\n}\n</code></pre>\n<p>ATTENTION: Use it for development environment only.</p>\n"}],"owner":{"account_id":5744026,"reputation":428,"user_id":4535741,"display_name":"Sahil"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17748,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":57057754,"answer_count":4,"score":8,"last_activity_date":1671812068,"creation_date":1563279395,"question_id":57057074,"body_markdown":"I&#39;m trying to connect to an elasticsearch instance which is behind a ssh tunnel. Domain of the elasticsearch instance is `*.ap-south-1.es.amazonaws.com` while locally on the tunnel, I connect via `localhost:9201`.\r\n\r\nHere is the code I&#39;m using to connect to elasticsearch\r\n```\r\nRestHighLevelClient(RestClient.builder(HttpHost(&quot;localhost&quot;, 9201, &quot;https&quot;)))\r\n```\r\n\r\nI&#39;m getting the following error   \r\n```\r\njavax.net.ssl.SSLPeerUnverifiedException: Host name &#39;localhost&#39; does not match the certificate subject provided by the peer (CN=*.ap-south-1.es.amazonaws.com)\r\n```\r\n\r\nI got this error when I was working with PHP-Elasticsearch and I fixed it using \r\n```\r\n$esClient-&gt;setSSLVerification(false);\r\n```\r\n\r\nI was hoping to find a similar method for Java RestClient.","title":"How to disable SSL verification for Elasticsearch RestClient v6.7.0 in Java","body":"<p>I'm trying to connect to an elasticsearch instance which is behind a ssh tunnel. Domain of the elasticsearch instance is <code>*.ap-south-1.es.amazonaws.com</code> while locally on the tunnel, I connect via <code>localhost:9201</code>.</p>\n\n<p>Here is the code I'm using to connect to elasticsearch</p>\n\n<pre><code>RestHighLevelClient(RestClient.builder(HttpHost(\"localhost\", 9201, \"https\")))\n</code></pre>\n\n<p>I'm getting the following error   </p>\n\n<pre><code>javax.net.ssl.SSLPeerUnverifiedException: Host name 'localhost' does not match the certificate subject provided by the peer (CN=*.ap-south-1.es.amazonaws.com)\n</code></pre>\n\n<p>I got this error when I was working with PHP-Elasticsearch and I fixed it using </p>\n\n<pre><code>$esClient-&gt;setSSLVerification(false);\n</code></pre>\n\n<p>I was hoping to find a similar method for Java RestClient.</p>\n"},{"tags":["java","elasticsearch"],"answers":[{"tags":[],"owner":{"account_id":13794509,"reputation":138,"user_id":9956025,"display_name":"Hrithik Manchanda"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671811034,"creation_date":1671811034,"answer_id":74901596,"question_id":74901549,"body_markdown":"There is no direct method given as known which will help to clone the existing object. However, here is a method you can use to copy your existing BoolQueryBuilder object.\r\n\r\n    public BoolQueryBuilder createCopy(BoolQueryBuilder oldQuery) {\r\n        BoolQueryBuilder builder = new BoolQueryBuilder();\r\n        oldQuery.must().forEach(builder::must);\r\n        oldQuery.mustNot().forEach(builder::mustNot);\r\n        oldQuery.filter().forEach(builder::filter);\r\n        oldQuery.should().forEach(builder::should);\r\n        builder.minimumShouldMatch(oldQuery.minimumShouldMatch());\r\n        builder.adjustPureNegative(oldQuery.adjustPureNegative());\r\n        return builder;\r\n    }\r\n\r\n","title":"How to deep copy BoolQueryBuilder object in Java rest high level client?","body":"<p>There is no direct method given as known which will help to clone the existing object. However, here is a method you can use to copy your existing BoolQueryBuilder object.</p>\n<pre><code>public BoolQueryBuilder createCopy(BoolQueryBuilder oldQuery) {\n    BoolQueryBuilder builder = new BoolQueryBuilder();\n    oldQuery.must().forEach(builder::must);\n    oldQuery.mustNot().forEach(builder::mustNot);\n    oldQuery.filter().forEach(builder::filter);\n    oldQuery.should().forEach(builder::should);\n    builder.minimumShouldMatch(oldQuery.minimumShouldMatch());\n    builder.adjustPureNegative(oldQuery.adjustPureNegative());\n    return builder;\n}\n</code></pre>\n"}],"owner":{"account_id":17384308,"reputation":13,"user_id":20848383,"display_name":"Devesh pathak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74901596,"answer_count":1,"score":1,"last_activity_date":1671811034,"creation_date":1671810636,"question_id":74901549,"body_markdown":"I am trying to generate a new instance out of my existing instance of BoolQueryBuilder. I have tried the following approach but could not find any proper solution.\r\n\r\n\r\n```\r\n...\r\n\r\nBoolQueryBuilder mQuery = QueryBuilder.boolQuery();\r\n...\r\n\r\nBytesStreamOutput output = new BytesStreamOutput();\r\nmQuery.writeTo(output);\r\nStreamInput input = output.bytes().streamInput();\r\nBoolQueryBuilder pQuery= new BoolQueryBuilder(input);\r\n```\r\n\r\nThe above method gives me java.lang.UnsupportedOperationException: can&#39;t read named writeable from StreamInput\r\n","title":"How to deep copy BoolQueryBuilder object in Java rest high level client?","body":"<p>I am trying to generate a new instance out of my existing instance of BoolQueryBuilder. I have tried the following approach but could not find any proper solution.</p>\n<pre><code>...\n\nBoolQueryBuilder mQuery = QueryBuilder.boolQuery();\n...\n\nBytesStreamOutput output = new BytesStreamOutput();\nmQuery.writeTo(output);\nStreamInput input = output.bytes().streamInput();\nBoolQueryBuilder pQuery= new BoolQueryBuilder(input);\n</code></pre>\n<p>The above method gives me java.lang.UnsupportedOperationException: can't read named writeable from StreamInput</p>\n"},{"tags":["java","methods","recursion"],"comments":[{"owner":{"account_id":543250,"reputation":18874,"user_id":912319,"accept_rate":62,"display_name":"Kanagavelu Sugumar"},"score":0,"creation_date":1359604428,"post_id":14618055,"comment_id":20414584,"body_markdown":"Burn Math.pow() needs only single execution. why do you want to recursion here?","body":"Burn Math.pow() needs only single execution. why do you want to recursion here?"},{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":3,"creation_date":1359604609,"post_id":14618055,"comment_id":20414632,"body_markdown":"@KanagaveluSugumar - _&quot;To iterate is human; to recurse is divine.&quot;_","body":"@KanagaveluSugumar - <i>&quot;To iterate is human; to recurse is divine.&quot;</i>"},{"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"score":0,"creation_date":1360959156,"post_id":14618055,"comment_id":20903189,"body_markdown":"Why not return the result without loop or recursion? `return (int)Math.pow(2,number+1) -1;`","body":"Why not return the result without loop or recursion? <code>return (int)Math.pow(2,number+1) -1;</code>"},{"owner":{"account_id":1955479,"reputation":1368,"user_id":1758558,"accept_rate":75,"display_name":"Kailua Bum"},"score":0,"creation_date":1360959980,"post_id":14618055,"comment_id":20903554,"body_markdown":"@MrSmith42 that would only work for summing the powers of 2, if it was changed to 3 it wouldnt work anymore.  Also this was about learning recursion not the simplest way to sum the powers of 2","body":"@MrSmith42 that would only work for summing the powers of 2, if it was changed to 3 it wouldnt work anymore.  Also this was about learning recursion not the simplest way to sum the powers of 2"},{"owner":{"account_id":2168743,"reputation":10044,"user_id":1921273,"display_name":"MrSmith42"},"score":0,"creation_date":1360964669,"post_id":14618055,"comment_id":20905442,"body_markdown":"when changed to 3 you can change the formula to `return (int)(Math.pow(3,number+1) -1) / 2`. This can be generalized (with little thought) for any number.","body":"when changed to 3 you can change the formula to <code>return (int)(Math.pow(3,number+1) -1) &#47; 2</code>. This can be generalized (with little thought) for any number."}],"answers":[{"comments":[{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1359604316,"post_id":14618115,"comment_id":20414560,"body_markdown":"That should be either `2 &lt;&lt; (n-1)` or (better) `1 &lt;&lt; n`, since 2^1 = 2, not 4.","body":"That should be either <code>2 &lt;&lt; (n-1)</code> or (better) <code>1 &lt;&lt; n</code>, since 2^1 = 2, not 4."},{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1359736826,"post_id":14618115,"comment_id":20471487,"body_markdown":"It really should be `1 &lt;&lt; n`. Using `2 &lt;&lt; (n-1)` won&#39;t work for `n==0`.","body":"It really should be <code>1 &lt;&lt; n</code>. Using <code>2 &lt;&lt; (n-1)</code> won&#39;t work for <code>n==0</code>."}],"tags":[],"owner":{"account_id":185878,"reputation":7904,"user_id":422870,"display_name":"Saurabh"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1359604503,"creation_date":1359604100,"answer_id":14618115,"question_id":14618055,"body_markdown":"You should define another recursive method to calculate Math.pow(2,n) recursively probably.\r\nHowever I would suggest to do bit shift operation of 2  to calculate Math.pow(2,n) quickly. For example shifting 2 &lt;&lt; (n-1) will do hob here.\r\n","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<p>You should define another recursive method to calculate Math.pow(2,n) recursively probably.\nHowever I would suggest to do bit shift operation of 2  to calculate Math.pow(2,n) quickly. For example shifting 2 &lt;&lt; (n-1) will do hob here.</p>\n"},{"comments":[{"owner":{"account_id":1955479,"reputation":1368,"user_id":1758558,"accept_rate":75,"display_name":"Kailua Bum"},"score":0,"creation_date":1359604277,"post_id":14618128,"comment_id":20414543,"body_markdown":"is there a way to combine both into one method?","body":"is there a way to combine both into one method?"},{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1359604489,"post_id":14618128,"comment_id":20414601,"body_markdown":"@KailuaBum - The recursive relationship is f(n) = 2^n + f(n-1). You&#39;d need to transform that into a doubly-recursive relationship to get rid of the `2^n` term. Nothing obvious comes to mind.","body":"@KailuaBum - The recursive relationship is f(n) = 2^n + f(n-1). You&#39;d need to transform that into a doubly-recursive relationship to get rid of the <code>2^n</code> term. Nothing obvious comes to mind."}],"tags":[],"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"comment_count":2,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1359604149,"creation_date":1359604149,"answer_id":14618128,"question_id":14618055,"body_markdown":"You can use this as a recursive power function:\r\n\r\n    public static int powerOf2(int number) {\r\n        if (number == 0) {\r\n            return 1;\r\n        } else {\r\n            return 2 * powerOf2(number - 1);\r\n        }\r\n    }\r\n\r\nOr, as a one-line body:\r\n\r\n    return number &gt; 0 ? 2 * powerOf2(number - 1) : 1;","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<p>You can use this as a recursive power function:</p>\n\n<pre><code>public static int powerOf2(int number) {\n    if (number == 0) {\n        return 1;\n    } else {\n        return 2 * powerOf2(number - 1);\n    }\n}\n</code></pre>\n\n<p>Or, as a one-line body:</p>\n\n<pre><code>return number &gt; 0 ? 2 * powerOf2(number - 1) : 1;\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user2023812"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359604548,"creation_date":1359604548,"answer_id":14618190,"question_id":14618055,"body_markdown":"If you want to learn Recursion take a well known example of Fabonacci series.\r\n\r\n    public int getNthFibonacci( int n )\r\n    \t{\r\n    \t\tif ( n == 1 || n == 2 ) \r\n    \t    \treturn 1;\r\n    \t    \r\n    \t  else\r\n    \t    return getNthFibonacci( n-1 ) + getNthFibonacci( n-2 );\r\n    \t}\r\n    \t\r\n    public static void main(String[] args){\r\n    \t\r\n    \t\tRecursion myRecursor = new Recursion();\r\n    \t\tSystem.out.println( myRecursor.getNthFibonacci(5) );\r\n    \t\t\r\n    \t}\r\n\r\nBut in your case it can be done by for loop also easily.\r\n\r\n    public static void main(String[] args) {\r\n    \t\t\r\n    \t   int sum = 0;\t\t\r\n    \t\tfor (int number = 20; number&gt;0; number--)\r\n    \t\t{\r\n    \t\t\tsum += Math.pow(2,number);\r\n    \t\t}\r\n    \t\t\r\n    \t\tSystem.out.println(sum);\r\n    \t\t\r\n    }\r\n\r\n","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<p>If you want to learn Recursion take a well known example of Fabonacci series.</p>\n\n<pre><code>public int getNthFibonacci( int n )\n    {\n        if ( n == 1 || n == 2 ) \n            return 1;\n\n      else\n        return getNthFibonacci( n-1 ) + getNthFibonacci( n-2 );\n    }\n\npublic static void main(String[] args){\n\n        Recursion myRecursor = new Recursion();\n        System.out.println( myRecursor.getNthFibonacci(5) );\n\n    }\n</code></pre>\n\n<p>But in your case it can be done by for loop also easily.</p>\n\n<pre><code>public static void main(String[] args) {\n\n       int sum = 0;     \n        for (int number = 20; number&gt;0; number--)\n        {\n            sum += Math.pow(2,number);\n        }\n\n        System.out.println(sum);\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":255665,"reputation":232836,"user_id":535871,"accept_rate":84,"display_name":"Ted Hopp"},"score":0,"creation_date":1359619359,"post_id":14618488,"comment_id":20419419,"body_markdown":"It would be better to declare `ex` to be an `int`. Otherwise, if it happens to not be an integer value, this method will recurse until the stack overflows.","body":"It would be better to declare <code>ex</code> to be an <code>int</code>. Otherwise, if it happens to not be an integer value, this method will recurse until the stack overflows."},{"owner":{"account_id":2099873,"reputation":229,"user_id":1978815,"accept_rate":80,"display_name":"None"},"score":0,"creation_date":1359663021,"post_id":14618488,"comment_id":20442605,"body_markdown":"I think you&#39;re right. I&#39;ll edit my answer to work only for integers.","body":"I think you&#39;re right. I&#39;ll edit my answer to work only for integers."}],"tags":[],"owner":{"account_id":2099873,"reputation":229,"user_id":1978815,"accept_rate":80,"display_name":"None"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359663047,"creation_date":1359606451,"answer_id":14618488,"question_id":14618055,"body_markdown":"A more general solution:\r\n\r\n\tpublic static int pow (int base, int ex) {\r\n\t\tif (ex == 0) {\r\n\t\t\treturn 1;\r\n\t\t} else if (ex == 1) {\r\n\t\t\treturn base;\r\n\t\t} else if(ex &gt; 1) {\r\n\t\t\treturn (pow(base, ex - 1) * base);\r\n\t\t} else {\r\n\t\t\treturn pow(base, ex + 1) / base;\r\n\t\t}\r\n\t}\r\n\r\nThis handle all possible cases where the passed values are integers..","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<p>A more general solution:</p>\n\n<pre><code>public static int pow (int base, int ex) {\n    if (ex == 0) {\n        return 1;\n    } else if (ex == 1) {\n        return base;\n    } else if(ex &gt; 1) {\n        return (pow(base, ex - 1) * base);\n    } else {\n        return pow(base, ex + 1) / base;\n    }\n}\n</code></pre>\n\n<p>This handle all possible cases where the passed values are integers..</p>\n"},{"tags":[],"owner":{"account_id":2247983,"reputation":3795,"user_id":1980918,"display_name":"Michał Kupisiński"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1359664767,"creation_date":1359664767,"answer_id":14634722,"question_id":14618055,"body_markdown":"Maybe a little far from strict question your problem is to calculate sum of &lt;strong&gt;geometric series &lt;/strong&gt; which &lt;em&gt;is a series with a constant ratio between successive terms&lt;/em&gt;.\r\n\r\nYour first element is equal to 1 (as 2 pow 0) and your ratio is equal to 2. So instead of using any recursion you can use it with common, well-know, equatation:\r\n\r\n    public long computGemetricSeries(int n) {\r\n      long firstElem = 1;\r\n      long ratio = 2;\r\n    \r\n      return (firstElem * (1 - Math.pow(ration,n)) / (1 - ratio));\r\n    }\r\n\r\nOr for general term (not only power o 2):\r\n\r\n    public long computGeometricSeries(int n, double ration, double firstElem) {\r\n       return (firstElem * (1 - Math.pow(ration,n)) / (1 - ration));\r\n    }\r\n\r\nIf you realy want recursion here you can change `Math.pow(ration,n)` to some recursion function proposed by other answers.\r\n\r\nI think it won&#39;t help much as resolution to your question but will be a nice good-to-know answer.","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<p>Maybe a little far from strict question your problem is to calculate sum of <strong>geometric series </strong> which <em>is a series with a constant ratio between successive terms</em>.</p>\n\n<p>Your first element is equal to 1 (as 2 pow 0) and your ratio is equal to 2. So instead of using any recursion you can use it with common, well-know, equatation:</p>\n\n<pre><code>public long computGemetricSeries(int n) {\n  long firstElem = 1;\n  long ratio = 2;\n\n  return (firstElem * (1 - Math.pow(ration,n)) / (1 - ratio));\n}\n</code></pre>\n\n<p>Or for general term (not only power o 2):</p>\n\n<pre><code>public long computGeometricSeries(int n, double ration, double firstElem) {\n   return (firstElem * (1 - Math.pow(ration,n)) / (1 - ration));\n}\n</code></pre>\n\n<p>If you realy want recursion here you can change <code>Math.pow(ration,n)</code> to some recursion function proposed by other answers.</p>\n\n<p>I think it won't help much as resolution to your question but will be a nice good-to-know answer.</p>\n"},{"tags":[],"owner":{"account_id":6518700,"reputation":31,"user_id":5043590,"display_name":"Sachin Nikam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1436168834,"creation_date":1436168133,"answer_id":31240137,"question_id":14618055,"body_markdown":"    public class ComputePowerUsingRecursion {\r\n     \r\n    \tpublic static void main(String[] args) {\t\r\n    \t\tSystem.out.println(computePower(2,5));  // Passing 2 for power of 2\r\n    \t\tSystem.out.println(computePower(2,-5));\t// Number would be +ve or -ve\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * &lt;p&gt;Compute power&lt;/p&gt;\r\n    \t * \r\n    \t *  p(x,n)  =  1              if(x=0)\r\n    \t *          =  x*p(x,n-1)     if(n&gt;0)\r\n    \t *          =  (1/x)*p(x,n+1) if(n&lt;0)  \r\n    \t * @param x\r\n    \t * @param n\r\n    \t * @return\r\n    \t */\r\n    \tpublic static double computePower(double x, double n){\r\n    \t\t//base case\r\n    \t\tif(n==0){\r\n    \t\t\treturn 1;\r\n    \t\t}else if(n&gt;0){   //recursive condition for postive power\r\n    \t\t\treturn x*computePower(x, n-1);\r\n    \t\t}else if(n&lt;0){  //recursive condition for negative power\r\n    \t\t\treturn (1/x)*computePower(x, n+1);\r\n    \t\t}else{ \r\n    \t\t\treturn -1;\r\n    \t\t}\r\n    \t}\r\n    }","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<pre><code>public class ComputePowerUsingRecursion {\n\n    public static void main(String[] args) {    \n        System.out.println(computePower(2,5));  // Passing 2 for power of 2\n        System.out.println(computePower(2,-5)); // Number would be +ve or -ve\n    }\n\n    /**\n     * &lt;p&gt;Compute power&lt;/p&gt;\n     * \n     *  p(x,n)  =  1              if(x=0)\n     *          =  x*p(x,n-1)     if(n&gt;0)\n     *          =  (1/x)*p(x,n+1) if(n&lt;0)  \n     * @param x\n     * @param n\n     * @return\n     */\n    public static double computePower(double x, double n){\n        //base case\n        if(n==0){\n            return 1;\n        }else if(n&gt;0){   //recursive condition for postive power\n            return x*computePower(x, n-1);\n        }else if(n&lt;0){  //recursive condition for negative power\n            return (1/x)*computePower(x, n+1);\n        }else{ \n            return -1;\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":317220,"reputation":4366,"user_id":1597771,"accept_rate":58,"display_name":"SpiXel"},"score":1,"creation_date":1473974252,"post_id":39520419,"comment_id":66356732,"body_markdown":"This does answer the question but It&#39;s always better to provide instructions on why and how this piece of code answers the OP&#39;s question","body":"This does answer the question but It&#39;s always better to provide instructions on why and how this piece of code answers the OP&#39;s question"}],"tags":[],"owner":{"account_id":9084215,"reputation":1,"user_id":6762914,"display_name":"Ted Lam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1473973814,"creation_date":1473973814,"answer_id":39520419,"question_id":14618055,"body_markdown":"\tpublic static void main (String[] args){\r\n\t\tInteger output = 0;\r\n\t\toutput = sumOfThePower(end, 1, 1); //input the number you like at &#39;end&#39; to get the sum\r\n\t\tSystem.out.println(output);\r\n\t}\r\n    public static Integer sumOfThePower (int end, int start, int mul){\r\n    if (start &lt;= end){\r\n        mul =2 * mul;\r\n        return mul + sumOfThePower(end, start + 1, mul);\r\n    }\r\n    else{\r\n        return 1;\r\n    }\r\n\t}","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<pre><code>public static void main (String[] args){\n    Integer output = 0;\n    output = sumOfThePower(end, 1, 1); //input the number you like at 'end' to get the sum\n    System.out.println(output);\n}\npublic static Integer sumOfThePower (int end, int start, int mul){\nif (start &lt;= end){\n    mul =2 * mul;\n    return mul + sumOfThePower(end, start + 1, mul);\n}\nelse{\n    return 1;\n}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7223225,"reputation":172,"user_id":5512878,"accept_rate":62,"display_name":"Olaitan Adeboye"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671810979,"creation_date":1671810979,"answer_id":74901590,"question_id":14618055,"body_markdown":"My assumption from this question is that you want to add for example,\r\n\r\n    2 + 4 + 8 = 14 by calling func(3)\r\n    2 + 4 + 8 + 16 = 30 by calling func(4)\r\n\r\nIf so, you can try,\r\n\r\n    public static int SumPowerOf2(int number) {\r\n    if (number == 1) {\r\n        return 2;\r\n    } else {\r\n        return 2 + (2 * powerOf2(number - 1));\r\n    }\r\n\r\nGoing through each stack&#39;s frame, we should have below analysis for SumPowerOf2(3)\r\n\r\n    SumPowerOf2(3) =&gt; 2 + (2 * SumPowerOf2(2)) = 2 + 2(6) =&gt; 2 + 12 =&gt; 14\r\n    SumPowerOf2(2) =&gt; 2 + (2 * SumPowerOf2(1)) =&gt; 2 + 2(2) =&gt; 2 + 4 =&gt; 6\r\n    SumPowerOf2(1) =&gt; 2\r\n\r\n","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<p>My assumption from this question is that you want to add for example,</p>\n<pre><code>2 + 4 + 8 = 14 by calling func(3)\n2 + 4 + 8 + 16 = 30 by calling func(4)\n</code></pre>\n<p>If so, you can try,</p>\n<pre><code>public static int SumPowerOf2(int number) {\nif (number == 1) {\n    return 2;\n} else {\n    return 2 + (2 * powerOf2(number - 1));\n}\n</code></pre>\n<p>Going through each stack's frame, we should have below analysis for SumPowerOf2(3)</p>\n<pre><code>SumPowerOf2(3) =&gt; 2 + (2 * SumPowerOf2(2)) = 2 + 2(6) =&gt; 2 + 12 =&gt; 14\nSumPowerOf2(2) =&gt; 2 + (2 * SumPowerOf2(1)) =&gt; 2 + 2(2) =&gt; 2 + 4 =&gt; 6\nSumPowerOf2(1) =&gt; 2\n</code></pre>\n"}],"owner":{"account_id":1955479,"reputation":1368,"user_id":1758558,"accept_rate":75,"display_name":"Kailua Bum"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10843,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":8,"score":1,"last_activity_date":1671810979,"creation_date":1359603688,"question_id":14618055,"body_markdown":"so im trying to learn recursion (i know in this case recursion is not necessary)\r\n\r\ni have already written this method, which works\r\n\r\n\tpublic static int method(int number) {\r\n\t\tif(number == 0) {\r\n\t\t\treturn 1;\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn (int)Math.pow(2,number) + method(number-1);\r\n\t\t}\r\n\t}\r\n\r\nthis works perfectly for summing the powers of 2 from 0 to number, but i was wondering if there was a way to replace the `Math.pow()` with another recursive method call","title":"Java recursive method for summing the powers of 2, from 0 to N","body":"<p>so im trying to learn recursion (i know in this case recursion is not necessary)</p>\n\n<p>i have already written this method, which works</p>\n\n<pre><code>public static int method(int number) {\n    if(number == 0) {\n        return 1;\n    }\n    else {\n        return (int)Math.pow(2,number) + method(number-1);\n    }\n}\n</code></pre>\n\n<p>this works perfectly for summing the powers of 2 from 0 to number, but i was wondering if there was a way to replace the <code>Math.pow()</code> with another recursive method call</p>\n"},{"tags":["java","spring","spring-boot","graphql","client"],"answers":[{"tags":[],"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669583556,"creation_date":1669583556,"answer_id":74593834,"question_id":74590015,"body_markdown":"Let&#39;s say you defined a schema for Person like this:\r\n\r\n\r\n    type Person{\r\n        firstName: String\r\n        // other fields...\r\n    }\r\n\r\n\r\nThen you can use `@SchemaMapping` for returning list of that objects:\r\n\r\n    @SchemaMapping(typeName = &quot;Query&quot;,value = &quot;personList&quot;)\r\n    public List&lt;Person&gt; getPersonsByIds() {\r\n      return personService.getPersonsByIds();\r\n    }","title":"Graphql spring boot client","body":"<p>Let's say you defined a schema for Person like this:</p>\n<pre><code>type Person{\n    firstName: String\n    // other fields...\n}\n</code></pre>\n<p>Then you can use <code>@SchemaMapping</code> for returning list of that objects:</p>\n<pre><code>@SchemaMapping(typeName = &quot;Query&quot;,value = &quot;personList&quot;)\npublic List&lt;Person&gt; getPersonsByIds() {\n  return personService.getPersonsByIds();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1672041218,"post_id":74901550,"comment_id":132210787,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/74901550/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":19839005,"reputation":1,"user_id":14532002,"display_name":"Francis Anyuru"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671810637,"creation_date":1671810637,"answer_id":74901550,"question_id":74590015,"body_markdown":"You could pass the DataFetchingEnvironment object to the resolver and call the getDocument() method to relay the document/query https://www.youtube.com/watch?v=_sILQm0axSw","title":"Graphql spring boot client","body":"<p>You could pass the DataFetchingEnvironment object to the resolver and call the getDocument() method to relay the document/query <a href=\"https://www.youtube.com/watch?v=_sILQm0axSw\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=_sILQm0axSw</a></p>\n"}],"owner":{"account_id":27062194,"reputation":11,"user_id":20614070,"display_name":"Alex_95"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":496,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1671810637,"creation_date":1669552096,"question_id":74590015,"body_markdown":"guys, I have a problem: I have microservices on spring graphql, which works properly, example of request here: \r\n\r\n[enter image description here](https://i.stack.imgur.com/wXwNm.png)\r\n\r\nBut it is not clear how to write client for the case if I need to convey list of objects. I tried to use GraphqlTemplate (implementation &#39;com.github.americanexpress:nodes:0.5.0&#39;) but I did not find any example of passing list to request. Maybe it worse to use other library.\r\n\r\nDoes anybody worked with something like that?\r\n\r\n```\r\n@Service\r\npublic class PersonService {\r\n\r\n    private final GraphQLTemplate graphQLTemplate = new GraphQLTemplate();\r\n    private final String url = &quot;http://localhost:8084/graphql&quot;;\r\n    \r\n    \r\n    public List&lt;Person&gt; getPersonsByIds() {\r\n  \r\n        GraphQLRequestEntity requestEntity;\r\n        try {\r\n            requestEntity = GraphQLRequestEntity.Builder()\r\n                .url(url)\r\n                .requestMethod(GraphQLTemplate.GraphQLMethod.QUERY)\r\n                .request(&quot;query($personIds: [BigInteger]) {\\n&quot; +\r\n                    &quot;  getPersonsByIds(personIds : $personIds ) {\\n&quot; +\r\n                    &quot;    firstName\\n&quot; +\r\n                    &quot;    middleName\\n&quot; +\r\n                    &quot;    lastName\\n&quot; +\r\n                    &quot;    birthDt\\n&quot; +\r\n                    &quot;  }\\n&quot; +\r\n                    &quot;}&quot;\r\n                )\r\n                .variables(new Variable&lt;&gt;(&quot;personId&quot;, &quot;2477142261427744786&quot;)) // just enable to pass only one id and got 1 person\r\n                .build();\r\n        } catch (MalformedURLException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n        return graphQLTemplate.query(requestEntity, ResponseGetPersonsByIds.class).getResponse().getGetPersonsByIds();\r\n    }    \r\n}    \r\n```\r\n\r\nI understand how to pass only 1 id but it is not clear how to pass the array\r\n","title":"Graphql spring boot client","body":"<p>guys, I have a problem: I have microservices on spring graphql, which works properly, example of request here:</p>\n<p><a href=\"https://i.stack.imgur.com/wXwNm.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>But it is not clear how to write client for the case if I need to convey list of objects. I tried to use GraphqlTemplate (implementation 'com.github.americanexpress:nodes:0.5.0') but I did not find any example of passing list to request. Maybe it worse to use other library.</p>\n<p>Does anybody worked with something like that?</p>\n<pre><code>@Service\npublic class PersonService {\n\n    private final GraphQLTemplate graphQLTemplate = new GraphQLTemplate();\n    private final String url = &quot;http://localhost:8084/graphql&quot;;\n    \n    \n    public List&lt;Person&gt; getPersonsByIds() {\n  \n        GraphQLRequestEntity requestEntity;\n        try {\n            requestEntity = GraphQLRequestEntity.Builder()\n                .url(url)\n                .requestMethod(GraphQLTemplate.GraphQLMethod.QUERY)\n                .request(&quot;query($personIds: [BigInteger]) {\\n&quot; +\n                    &quot;  getPersonsByIds(personIds : $personIds ) {\\n&quot; +\n                    &quot;    firstName\\n&quot; +\n                    &quot;    middleName\\n&quot; +\n                    &quot;    lastName\\n&quot; +\n                    &quot;    birthDt\\n&quot; +\n                    &quot;  }\\n&quot; +\n                    &quot;}&quot;\n                )\n                .variables(new Variable&lt;&gt;(&quot;personId&quot;, &quot;2477142261427744786&quot;)) // just enable to pass only one id and got 1 person\n                .build();\n        } catch (MalformedURLException e) {\n            throw new RuntimeException(e);\n        }\n        return graphQLTemplate.query(requestEntity, ResponseGetPersonsByIds.class).getResponse().getGetPersonsByIds();\n    }    \n}    \n</code></pre>\n<p>I understand how to pass only 1 id but it is not clear how to pass the array</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1671809000,"post_id":74901210,"comment_id":132181452,"body_markdown":"@ControlAltDel unless that&#39;s the only thing this program should do, that&#39;s terrible advice. That means running Java with more rights that it needs.","body":"@ControlAltDel unless that&#39;s the only thing this program should do, that&#39;s terrible advice. That means running Java with more rights that it needs."},{"owner":{"account_id":23870445,"reputation":35,"user_id":17872214,"display_name":"Stud 20178034"},"score":0,"creation_date":1671809840,"post_id":74901210,"comment_id":132181684,"body_markdown":"I tried to run java as administrator but also it gave me error again","body":"I tried to run java as administrator but also it gave me error again"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671814837,"post_id":74901210,"comment_id":132183025,"body_markdown":"Does that command actually work simply run at the command line without Java?","body":"Does that command actually work simply run at the command line without Java?"},{"owner":{"account_id":23870445,"reputation":35,"user_id":17872214,"display_name":"Stud 20178034"},"score":0,"creation_date":1671818175,"post_id":74901210,"comment_id":132183848,"body_markdown":"yes, this error is resolved as @RobSpoor said but now it require administrator password","body":"yes, this error is resolved as @RobSpoor said but now it require administrator password"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1671819393,"post_id":74901210,"comment_id":132184124,"body_markdown":"Interesting. I&#39;d no idea you could run a dll without ... rundll ;)","body":"Interesting. I&#39;d no idea you could run a dll without ... rundll ;)"}],"answers":[{"comments":[{"owner":{"account_id":23870445,"reputation":35,"user_id":17872214,"display_name":"Stud 20178034"},"score":0,"creation_date":1671810383,"post_id":74901454,"comment_id":132181832,"body_markdown":"yes, I understand that and that is great answer, I tried it now and it doesn&#39;t give me error, but it requires a password","body":"yes, I understand that and that is great answer, I tried it now and it doesn&#39;t give me error, but it requires a password"},{"owner":{"account_id":23870445,"reputation":35,"user_id":17872214,"display_name":"Stud 20178034"},"score":0,"creation_date":1671812442,"post_id":74901454,"comment_id":132182365,"body_markdown":"how can I Enter this password ?","body":"how can I Enter this password ?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1671822543,"post_id":74901454,"comment_id":132184805,"body_markdown":"I haven&#39;t tried it, but I&#39;m guessing using `stdin.println(&quot;mypassword&quot;)` - before sending `netsh winsock reset` to the process. After all, it&#39;s input for the process.","body":"I haven&#39;t tried it, but I&#39;m guessing using <code>stdin.println(&quot;mypassword&quot;)</code> - before sending <code>netsh winsock reset</code> to the process. After all, it&#39;s input for the process."}],"tags":[],"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671810017,"creation_date":1671810017,"answer_id":74901454,"question_id":74901210,"body_markdown":"You&#39;re giving the command as an array with a single element, which is treated as a single command. You&#39;re already giving the command as an array - split it accordingly, where `runas` is the command, and everything else is an argument to `runas`:\r\n\r\n```java\r\nString[] command = {\r\n        &quot;runas&quot;,\r\n        &quot;/profile&quot;,\r\n        &quot;/user:Administrator&quot;,\r\n        &quot;cmd.exe /c Powrprof.dll,SetSuspendState&quot;,\r\n};\r\n```\r\nNote that you don&#39;t have to add quotes to the last argument.\r\n\r\nYou can make your program a bit better by using `ProcessBuilder`. Now you&#39;re redirecting streams yourself, but you can easily let `ProcessBuilder` handle that for you:\r\n\r\n```java\r\nProcess p = new ProcessBuilder(command).inheritIO().start();\r\nPrintWriter stdin = new PrintWriter(p.getOutputStream());\r\nstdin.println(&quot;netsh winsock reset&quot;);\r\nstdin.close();\r\nint returnCode = p.waitFor();\r\nSystem.out.println(&quot;Return code = &quot; + returnCode);\r\n```","title":"run cmd command as administrator through java program","body":"<p>You're giving the command as an array with a single element, which is treated as a single command. You're already giving the command as an array - split it accordingly, where <code>runas</code> is the command, and everything else is an argument to <code>runas</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String[] command = {\n        &quot;runas&quot;,\n        &quot;/profile&quot;,\n        &quot;/user:Administrator&quot;,\n        &quot;cmd.exe /c Powrprof.dll,SetSuspendState&quot;,\n};\n</code></pre>\n<p>Note that you don't have to add quotes to the last argument.</p>\n<p>You can make your program a bit better by using <code>ProcessBuilder</code>. Now you're redirecting streams yourself, but you can easily let <code>ProcessBuilder</code> handle that for you:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Process p = new ProcessBuilder(command).inheritIO().start();\nPrintWriter stdin = new PrintWriter(p.getOutputStream());\nstdin.println(&quot;netsh winsock reset&quot;);\nstdin.close();\nint returnCode = p.waitFor();\nSystem.out.println(&quot;Return code = &quot; + returnCode);\n</code></pre>\n"}],"owner":{"account_id":23870445,"reputation":35,"user_id":17872214,"display_name":"Stud 20178034"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74901454,"answer_count":1,"score":0,"last_activity_date":1671810017,"creation_date":1671808507,"question_id":74901210,"body_markdown":"I need to build a java program to reset network in windows 10, this command needs cmd to be opened as administrator I tried to build it, but it gives me this error\r\n```\r\nCannot run program &quot;runas /profile /user:Administrator &quot;cmd.exe /c Powrprof.dll,SetSuspendState&quot;&quot;: CreateProcess error=2, The system cannot find the file specified\r\n```\r\nthis is my code\r\n```\r\ntry {\r\n            String[] command\r\n                    = {\r\n                        &quot;runas /profile /user:Administrator \\&quot;cmd.exe /c Powrprof.dll,SetSuspendState\\&quot;&quot;,};\r\n            Process p = Runtime.getRuntime().exec(command);\r\n            new Thread(new SyncPipe(p.getErrorStream(), System.err)).start();\r\n            new Thread(new SyncPipe(p.getInputStream(), System.out)).start();\r\n            PrintWriter stdin = new PrintWriter(p.getOutputStream());\r\n            stdin.println(&quot;netsh winsock reset&quot;);\r\n            stdin.close();\r\n            int returnCode = p.waitFor();\r\n            System.out.println(&quot;Return code = &quot; + returnCode);\r\n\r\n            stat_lbl.setText(&quot;Network reset Successfully&quot;);\r\n\r\n        } catch (IOException | InterruptedException e) {\r\n            System.out.println(e.getMessage());\r\n        }\r\n```\r\nI don&#39;t understand what the problem is and how can I resolve it","title":"run cmd command as administrator through java program","body":"<p>I need to build a java program to reset network in windows 10, this command needs cmd to be opened as administrator I tried to build it, but it gives me this error</p>\n<pre><code>Cannot run program &quot;runas /profile /user:Administrator &quot;cmd.exe /c Powrprof.dll,SetSuspendState&quot;&quot;: CreateProcess error=2, The system cannot find the file specified\n</code></pre>\n<p>this is my code</p>\n<pre><code>try {\n            String[] command\n                    = {\n                        &quot;runas /profile /user:Administrator \\&quot;cmd.exe /c Powrprof.dll,SetSuspendState\\&quot;&quot;,};\n            Process p = Runtime.getRuntime().exec(command);\n            new Thread(new SyncPipe(p.getErrorStream(), System.err)).start();\n            new Thread(new SyncPipe(p.getInputStream(), System.out)).start();\n            PrintWriter stdin = new PrintWriter(p.getOutputStream());\n            stdin.println(&quot;netsh winsock reset&quot;);\n            stdin.close();\n            int returnCode = p.waitFor();\n            System.out.println(&quot;Return code = &quot; + returnCode);\n\n            stat_lbl.setText(&quot;Network reset Successfully&quot;);\n\n        } catch (IOException | InterruptedException e) {\n            System.out.println(e.getMessage());\n        }\n</code></pre>\n<p>I don't understand what the problem is and how can I resolve it</p>\n"},{"tags":["java","list","file","serialization","gson"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1671810396,"post_id":74901448,"comment_id":132181834,"body_markdown":"I haven&#39;t spent too much time looking at your code, but in the `FileItem(File)` constructor `FileItem fileItem = new FileItem(file.getName(),file.getPath());` should be `this(file.getName(),file.getPath());`","body":"I haven&#39;t spent too much time looking at your code, but in the <code>FileItem(File)</code> constructor <code>FileItem fileItem = new FileItem(file.getName(),file.getPath());</code> should be <code>this(file.getName(),file.getPath());</code>"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671906473,"post_id":74901448,"comment_id":132195959,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}],"owner":{"account_id":25656493,"reputation":1,"user_id":19422812,"display_name":"Mudern"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671809989,"creation_date":1671809989,"question_id":74901448,"body_markdown":"I don&#39;t know why the isFile() of the element f in the files list traversed by the for loop in the FileInit class in the code below is always false.false. But if delete the content related to FileItem, it will return to normal.It&#39;s kind of weird to me, and I didn&#39;t find a targeted answer. It might be some peculiarity of Java.A cloud disk project is used to learn Java, using Google&#39;s Gson library.\r\n```Java\r\npublic class FileInit {\r\n    String path;\r\n\r\n    public String getPath() {\r\n        return path;\r\n    }\r\n\r\n    public void setPath(String path) {\r\n        this.path = path;\r\n    }\r\n\r\n    //Query file method, will return a list containing file information\r\n    public String queryFiles() throws NoSuchAlgorithmException, IOException {\r\n        //Query the path and build a File collection\r\n        File file = new File(path);\r\n        File[] files = file.listFiles();\r\n        //Build a List to store the converted FileItem\r\n        List&lt;FileItem&gt; fileItems = new ArrayList&lt;&gt;();\r\n        //Traversing files to make judgments\r\n        for (File f:files){\r\n            FileItem fileItem = new FileItem(f);\r\n            fileItem.printFile();\r\n            fileItems.add(fileItem);\r\n        }\r\n        Gson gson = new Gson();\r\n        return gson.toJson(fileItems);\r\n    }\r\n    //formatted output\r\n    public void printFiles(String files){\r\n        Gson gson = new Gson();\r\n        Type type = new TypeToken&lt;List&lt;FileItem&gt;&gt;(){}.getType();\r\n        List&lt;FileItem&gt; fileItems = gson.fromJson(files, type);\r\n        // Format output file list\r\n        int count = 0;\r\n        for (FileItem f :fileItems ) {\r\n            String name;\r\n            if (f.getFileType()==null){\r\n                name = f.getFileName() + &quot;/&quot;;\r\n            }else {\r\n                name = f.getFileName();\r\n            }\r\n            System.out.printf(&quot;%-40s&quot;, name);\r\n            count++;\r\n            if (count % 3 == 0) {\r\n                System.out.println();\r\n            }\r\n        }\r\n        System.out.println();\r\n    }\r\n    //Change directory command\r\n    public void changeDic(String addPath){\r\n        File fileDic1 = new File(path+addPath);\r\n        File fileDic2 = new File(addPath);\r\n        if (addPath.equals(&quot;..&quot;)) {\r\n            File parent = new File(path).getParentFile();\r\n            if (parent != null) {\r\n                this.path = parent.getPath();\r\n            }else{\r\n                System.out.println(&quot;Parent directory does not exist&quot;);\r\n            }\r\n        }\r\n        else {\r\n            if (fileDic1.exists()){\r\n                this.path = path+addPath;\r\n            } else if (fileDic2.exists()) {\r\n                this.path = addPath;\r\n            }else{\r\n                System.out.println(&quot;Illegal input path&quot;);\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\n```Java\r\npublic class FileItem {\r\n    private String fileName;\r\n    private String fileHash;\r\n    private String filePath;\r\n    private long fileLength;\r\n    private String fileType;\r\n\r\n    //Construction method of FileItem\r\n    /*\r\nBuild a construction method that only needs fileName and filePath, and judge whether to calculate the hash value, file size, and file type according to the folder or file\r\n*/\r\n    public FileItem(String fileName,String filePath) {\r\n        this.fileName = fileName;\r\n        this.filePath = filePath;\r\n        File file =new File(this.filePath+&quot;/&quot;+this.fileName);\r\n        if (file.isFile()){\r\n            try {\r\n                //Get the file size through the file built-in method\r\n                this.fileLength = file.length();\r\n                // Define a regular expression for extracting the suffix of the file name\r\n                String regex = &quot;\\\\.(\\\\w+)$&quot;;\r\n                Pattern pattern = Pattern.compile(regex);\r\n                Matcher matcher = pattern.matcher(fileName);\r\n                // If the match is successful\r\n                if (matcher.find()) {\r\n                    // Get the suffix of the file name\r\n                    this.fileType = matcher.group(1);\r\n                }else{\r\n                    this.fileType = null;\r\n                }\r\n                //Calculate the Hash value of the file by calling the FileHash method\r\n                this.fileHash=FileHash(file.getPath());\r\n                System.out.printf(fileHash);\r\n                System.out.print(&quot;\\n&quot;);\r\n            } catch (NoSuchAlgorithmException | IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }else{\r\n            this.fileName=fileName;\r\n            this.fileLength=0;\r\n            this.fileType = null;\r\n            this.fileHash=null;\r\n        }\r\n    }\r\n\r\n    //Build a constructor that only needs a json file\r\n    public FileItem(String json){\r\n        Gson gson = new Gson();\r\n        FileItem fileItem = gson.fromJson(json,FileItem.class);\r\n        this.fileName=fileItem.getFileName();\r\n        this.filePath=fileItem.getFilePath();\r\n        this.fileHash=fileItem.getFileHash();\r\n        this.fileLength=fileItem.getFileLength();\r\n        this.fileType=fileItem.getFileType();\r\n    }\r\n\r\n    //Realize mutual conversion between FileItem and File class\r\n    public File toFile(){\r\n        return new File(this.filePath+&quot;/&quot;+this.fileName);\r\n    }\r\n\r\n    public FileItem(File file) throws NoSuchAlgorithmException, IOException {\r\n        FileItem fileItem = new FileItem(file.getName(),file.getPath());\r\n        this.fileName=fileItem.getFileName();\r\n        this.filePath=fileItem.getFilePath();\r\n        this.fileHash=fileItem.getFileHash();\r\n        this.fileLength=fileItem.getFileLength();\r\n        this.fileType=fileItem.getFileType();\r\n    }\r\n\r\n    //Display FileItem related information\r\n    public void printFile(){\r\n        if (fileType==null){\r\n            System.out.println(fileName+&quot;是文件夹&quot;);\r\n        }else {\r\n            System.out.println(fileName+&quot;是&quot;+fileType+&quot;文件&quot;);\r\n        }\r\n        double fileLenOp=(double)fileLength;\r\n        //Different file sizes use different output methods\r\n        if(fileLength&lt;=1024*1024){\r\n            System.out.printf(&quot;file size is:%.3fKB\\n&quot;,fileLenOp/1024);\r\n        } else if ((fileLength&lt;1024*1024*1024)) {\r\n            System.out.printf(&quot;file size is:%.3fMB\\n&quot;,fileLenOp/1024/1024);\r\n        }else {\r\n            System.out.printf(&quot;file size is:%.3fGB\\n&quot;,fileLenOp/1024/1024/1024);\r\n        }\r\n        System.out.println(&quot;file hash is:&quot;+fileHash);\r\n    }\r\n\r\n\r\n    //Getter and Setter methods for FileItem\r\n\r\n    public String getFileName() {\r\n        return fileName;\r\n    }\r\n\r\n    public void setFileName(String fileName) {\r\n        this.fileName = fileName;\r\n    }\r\n\r\n    public String getFileHash() {\r\n        return fileHash;\r\n    }\r\n\r\n    public void setFileHash(String fileHash) {\r\n        this.fileHash = fileHash;\r\n    }\r\n\r\n    public String getFilePath() {\r\n        return filePath;\r\n    }\r\n\r\n    public void setFilePath(String filePath) {\r\n        this.filePath = filePath;\r\n    }\r\n\r\n    public long getFileLength() {\r\n        return fileLength;\r\n    }\r\n\r\n    public void setFileLength(long fileLength) {\r\n        this.fileLength = fileLength;\r\n    }\r\n\r\n    public String getFileType() {\r\n        return fileType;\r\n    }\r\n\r\n    public void setFileType(String fileType) {\r\n        this.fileType = fileType;\r\n    }\r\n}\r\n\r\n```\r\n\r\n\r\nI try to query the file information in a folder by using the methods related to the File class. And return them as a collection. Then realize the conversion of the File class and the FileItem class by traversing this collection to form a new FileItem class collection , so that it can be converted into Json format data for network transmission. However, all fileitems in the generated FileItem collection are judged as folders. And if you comment out the FileItem related content, the judgment of File will be normal, but if you don’t do this , the judgment of File will always remain false.","title":"A question about the Java File class and its Serialization maybe？","body":"<p>I don't know why the isFile() of the element f in the files list traversed by the for loop in the FileInit class in the code below is always false.false. But if delete the content related to FileItem, it will return to normal.It's kind of weird to me, and I didn't find a targeted answer. It might be some peculiarity of Java.A cloud disk project is used to learn Java, using Google's Gson library.</p>\n<pre><code>public class FileInit {\n    String path;\n\n    public String getPath() {\n        return path;\n    }\n\n    public void setPath(String path) {\n        this.path = path;\n    }\n\n    //Query file method, will return a list containing file information\n    public String queryFiles() throws NoSuchAlgorithmException, IOException {\n        //Query the path and build a File collection\n        File file = new File(path);\n        File[] files = file.listFiles();\n        //Build a List to store the converted FileItem\n        List&lt;FileItem&gt; fileItems = new ArrayList&lt;&gt;();\n        //Traversing files to make judgments\n        for (File f:files){\n            FileItem fileItem = new FileItem(f);\n            fileItem.printFile();\n            fileItems.add(fileItem);\n        }\n        Gson gson = new Gson();\n        return gson.toJson(fileItems);\n    }\n    //formatted output\n    public void printFiles(String files){\n        Gson gson = new Gson();\n        Type type = new TypeToken&lt;List&lt;FileItem&gt;&gt;(){}.getType();\n        List&lt;FileItem&gt; fileItems = gson.fromJson(files, type);\n        // Format output file list\n        int count = 0;\n        for (FileItem f :fileItems ) {\n            String name;\n            if (f.getFileType()==null){\n                name = f.getFileName() + &quot;/&quot;;\n            }else {\n                name = f.getFileName();\n            }\n            System.out.printf(&quot;%-40s&quot;, name);\n            count++;\n            if (count % 3 == 0) {\n                System.out.println();\n            }\n        }\n        System.out.println();\n    }\n    //Change directory command\n    public void changeDic(String addPath){\n        File fileDic1 = new File(path+addPath);\n        File fileDic2 = new File(addPath);\n        if (addPath.equals(&quot;..&quot;)) {\n            File parent = new File(path).getParentFile();\n            if (parent != null) {\n                this.path = parent.getPath();\n            }else{\n                System.out.println(&quot;Parent directory does not exist&quot;);\n            }\n        }\n        else {\n            if (fileDic1.exists()){\n                this.path = path+addPath;\n            } else if (fileDic2.exists()) {\n                this.path = addPath;\n            }else{\n                System.out.println(&quot;Illegal input path&quot;);\n            }\n        }\n    }\n}\n</code></pre>\n<pre><code>public class FileItem {\n    private String fileName;\n    private String fileHash;\n    private String filePath;\n    private long fileLength;\n    private String fileType;\n\n    //Construction method of FileItem\n    /*\nBuild a construction method that only needs fileName and filePath, and judge whether to calculate the hash value, file size, and file type according to the folder or file\n*/\n    public FileItem(String fileName,String filePath) {\n        this.fileName = fileName;\n        this.filePath = filePath;\n        File file =new File(this.filePath+&quot;/&quot;+this.fileName);\n        if (file.isFile()){\n            try {\n                //Get the file size through the file built-in method\n                this.fileLength = file.length();\n                // Define a regular expression for extracting the suffix of the file name\n                String regex = &quot;\\\\.(\\\\w+)$&quot;;\n                Pattern pattern = Pattern.compile(regex);\n                Matcher matcher = pattern.matcher(fileName);\n                // If the match is successful\n                if (matcher.find()) {\n                    // Get the suffix of the file name\n                    this.fileType = matcher.group(1);\n                }else{\n                    this.fileType = null;\n                }\n                //Calculate the Hash value of the file by calling the FileHash method\n                this.fileHash=FileHash(file.getPath());\n                System.out.printf(fileHash);\n                System.out.print(&quot;\\n&quot;);\n            } catch (NoSuchAlgorithmException | IOException e) {\n                throw new RuntimeException(e);\n            }\n        }else{\n            this.fileName=fileName;\n            this.fileLength=0;\n            this.fileType = null;\n            this.fileHash=null;\n        }\n    }\n\n    //Build a constructor that only needs a json file\n    public FileItem(String json){\n        Gson gson = new Gson();\n        FileItem fileItem = gson.fromJson(json,FileItem.class);\n        this.fileName=fileItem.getFileName();\n        this.filePath=fileItem.getFilePath();\n        this.fileHash=fileItem.getFileHash();\n        this.fileLength=fileItem.getFileLength();\n        this.fileType=fileItem.getFileType();\n    }\n\n    //Realize mutual conversion between FileItem and File class\n    public File toFile(){\n        return new File(this.filePath+&quot;/&quot;+this.fileName);\n    }\n\n    public FileItem(File file) throws NoSuchAlgorithmException, IOException {\n        FileItem fileItem = new FileItem(file.getName(),file.getPath());\n        this.fileName=fileItem.getFileName();\n        this.filePath=fileItem.getFilePath();\n        this.fileHash=fileItem.getFileHash();\n        this.fileLength=fileItem.getFileLength();\n        this.fileType=fileItem.getFileType();\n    }\n\n    //Display FileItem related information\n    public void printFile(){\n        if (fileType==null){\n            System.out.println(fileName+&quot;是文件夹&quot;);\n        }else {\n            System.out.println(fileName+&quot;是&quot;+fileType+&quot;文件&quot;);\n        }\n        double fileLenOp=(double)fileLength;\n        //Different file sizes use different output methods\n        if(fileLength&lt;=1024*1024){\n            System.out.printf(&quot;file size is:%.3fKB\\n&quot;,fileLenOp/1024);\n        } else if ((fileLength&lt;1024*1024*1024)) {\n            System.out.printf(&quot;file size is:%.3fMB\\n&quot;,fileLenOp/1024/1024);\n        }else {\n            System.out.printf(&quot;file size is:%.3fGB\\n&quot;,fileLenOp/1024/1024/1024);\n        }\n        System.out.println(&quot;file hash is:&quot;+fileHash);\n    }\n\n\n    //Getter and Setter methods for FileItem\n\n    public String getFileName() {\n        return fileName;\n    }\n\n    public void setFileName(String fileName) {\n        this.fileName = fileName;\n    }\n\n    public String getFileHash() {\n        return fileHash;\n    }\n\n    public void setFileHash(String fileHash) {\n        this.fileHash = fileHash;\n    }\n\n    public String getFilePath() {\n        return filePath;\n    }\n\n    public void setFilePath(String filePath) {\n        this.filePath = filePath;\n    }\n\n    public long getFileLength() {\n        return fileLength;\n    }\n\n    public void setFileLength(long fileLength) {\n        this.fileLength = fileLength;\n    }\n\n    public String getFileType() {\n        return fileType;\n    }\n\n    public void setFileType(String fileType) {\n        this.fileType = fileType;\n    }\n}\n\n</code></pre>\n<p>I try to query the file information in a folder by using the methods related to the File class. And return them as a collection. Then realize the conversion of the File class and the FileItem class by traversing this collection to form a new FileItem class collection , so that it can be converted into Json format data for network transmission. However, all fileitems in the generated FileItem collection are judged as folders. And if you comment out the FileItem related content, the judgment of File will be normal, but if you don’t do this , the judgment of File will always remain false.</p>\n"},{"tags":["java","class","object","is-empty"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1671808265,"post_id":74901033,"comment_id":132181243,"body_markdown":"then just check of getProfiles() return null.   Not sure I understand the question","body":"then just check of getProfiles() return null.   Not sure I understand the question"},{"owner":{"account_id":27336605,"reputation":3,"user_id":20847937,"display_name":"camach828"},"score":0,"creation_date":1671809048,"post_id":74901033,"comment_id":132181468,"body_markdown":"@OldProgrammer if I do this:\nif (response.getProfiles() != null) {\n}\n\nThe code still enters the if statement because profiles returns like this profiles{}\nThat&#39;s what I tried at first but it doesn&#39;t treat it as null, it looks like it&#39;s just empty","body":"@OldProgrammer if I do this: if (response.getProfiles() != null) { }  The code still enters the if statement because profiles returns like this profiles{} That&#39;s what I tried at first but it doesn&#39;t treat it as null, it looks like it&#39;s just empty"}],"answers":[{"tags":[],"owner":{"account_id":2124329,"reputation":612,"user_id":1886904,"display_name":"egeorge"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671808854,"creation_date":1671808854,"answer_id":74901256,"question_id":74901033,"body_markdown":"You need some basic null checking. The most basic way is to assign a new variable and check.\r\n```Java\r\nProfiles profiles = account.getProfiles();\r\nif(profiles != null) {\r\n   //dosomething with profiles.getDateOfBirth()\r\n}\r\n```\r\nThe more &quot;modern&quot; functional Java way would be to use the `Optional` class.\r\n```Java\r\nString dateOfBirth = Optional.ofNullable(account.getProfiles())\r\n    .map(profile -&gt; profile.getDateOfBirth)\r\n    .orElse(null);\r\n```\r\n(A note about your example: In the Account class, you have this.\r\n```Java\r\n@JsonProperty(&quot;testexample&quot;)\r\npublic void setProfiles(Profiles profiles) {\r\n    this.profiles = profiles;\r\n}\r\n```\r\nWhich appears to be an incorrect `@JsonProperty` annotation and might be causing some problems.\r\nThat said, it is not *necessary* to annotate the getters and setters. The one annotation on the field is sufficient.)","title":"Is there a way to check if a class is empty in java?","body":"<p>You need some basic null checking. The most basic way is to assign a new variable and check.</p>\n<pre><code>Profiles profiles = account.getProfiles();\nif(profiles != null) {\n   //dosomething with profiles.getDateOfBirth()\n}\n</code></pre>\n<p>The more &quot;modern&quot; functional Java way would be to use the <code>Optional</code> class.</p>\n<pre><code>String dateOfBirth = Optional.ofNullable(account.getProfiles())\n    .map(profile -&gt; profile.getDateOfBirth)\n    .orElse(null);\n</code></pre>\n<p>(A note about your example: In the Account class, you have this.</p>\n<pre><code>@JsonProperty(&quot;testexample&quot;)\npublic void setProfiles(Profiles profiles) {\n    this.profiles = profiles;\n}\n</code></pre>\n<p>Which appears to be an incorrect <code>@JsonProperty</code> annotation and might be causing some problems.\nThat said, it is not <em>necessary</em> to annotate the getters and setters. The one annotation on the field is sufficient.)</p>\n"}],"owner":{"account_id":27336605,"reputation":3,"user_id":20847937,"display_name":"camach828"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":314,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74901256,"answer_count":1,"score":0,"last_activity_date":1671809807,"creation_date":1671807377,"question_id":74901033,"body_markdown":"Sorry if the title is a bit confusing, I didn&#39;t really know how to word what I wanted to ask.\r\n\r\nBasically, I am making an api call to a database that returns data as such:\r\n\r\n[{&quot;profiles&quot;:{&quot;**testexample**&quot;:{&quot;addresses&quot;:[{&quot;city&quot;:&quot;***&quot;,&quot;street1&quot;:&quot;***&quot;,&quot;street2&quot;:&quot;apt 320&quot;}],&quot;addressType&quot;:&quot;HOME&quot;,&quot;city&quot;:&quot;***&quot;,&quot;dateOfBirth&quot;:&quot;***&quot;,&quot;emailAddress1&quot;:&quot;***&quot;,&quot;emailAddress2&quot;:&quot;***&quot;,&quot;emailAddresses&quot;:[{&quot;email&quot;:&quot;***&quot;,&quot;preferred&quot;:1,&quot;type&quot;:&quot;BUSINESS&quot;},{&quot;email&quot;:&quot;***&quot;,&quot;preferred&quot;:0,&quot;type&quot;:&quot;PERSONAL&quot;}],&quot;firstName&quot;:&quot;***&quot;,&quot;lastName&quot;:&quot;***&quot;,&quot;phoneNumber&quot;:&quot;***&quot;,&quot;phoneNumbers&quot;:[],&quot;phoneType&quot;:&quot;HOME&quot;,&quot;postalCode&quot;:&quot;***&quot;,&quot;preferred&quot;:1,&quot;street1&quot;:&quot;***&quot;,&quot;street2&quot;:&quot;***&quot;}]\r\n\r\nThe code I have below works fine when the database returns a non-empty profiles {}. I have the following Java classes that looks like the following:\r\n\r\n\r\n```\r\npublic class Account {\r\n\r\n    @JsonProperty(&quot;profiles&quot;)\r\n    private Profiles profiles;\r\n\r\n    @JsonProperty(&quot;profiles&quot;)\r\n    public Profiles getProfiles() {\r\n        return profiles;\r\n    }\r\n\r\n    @JsonProperty(&quot;testexample&quot;)\r\n    public void setProfiles(Profiles profiles) {\r\n        this.profiles = profiles;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\npublic class Profiles {\r\n\r\n    @JsonProperty(&quot;testexample&quot;)\r\n    private Profile testExample;\r\n\r\n    @JsonProperty(&quot;testexample&quot;)\r\n    public Profile getTestExample() {\r\n        return testExample;\r\n    }\r\n\r\n    @JsonProperty(&quot;testexample&quot;)\r\n    public void setTestExample(Profile testExample) {\r\n        this.testExample = testExample;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```\r\npublic class Profile {\r\n\r\n\r\n    @JsonProperty(&quot;dateOfBirth&quot;)\r\n    private String dateOfBirth;\r\n\r\n    @JsonProperty(&quot;dateOfBirth&quot;)\r\n    public String getDateOfBirth() {\r\n        return dateOfBirth;\r\n    }\r\n    @JsonProperty(&quot;dateOfBirth&quot;)\r\n    public void setDateOfBirth(String dateOfBirth) {\r\n        this.dateOfBirth = dateOfBirth;\r\n    }\r\n\r\n}\r\n```\r\nSo what I want to do when I get the data is check whether the getProfiles() returns empty, so I don&#39;t make the calls to anything within that object. \r\n\r\n\r\n**Please note, for the sake of simplicity I omitted other parts of the classes to focus primarily on what I wanted**\r\n\r\nThis is what I have so far, and it works when the profiles {} is not empty\r\n\r\n\r\n```\r\nAccount response = access.lookup(id, type); //This is to grab the response from the database, which is working.\r\n\r\nresponse.getProfiles(); //This is the part that works when it has a profiles {} not empty, but fails on empty.\r\n\r\n```\r\nSo what happens is that I don&#39;t get an error for response.getProfiles(), but if I tried to do response.getProfiles().getDateOfBirth(), it won&#39;t work because it will give a null pointer exception since the dateOfBirth isn&#39;t there.\r\n\r\nI want to avoid calling anything within response.getProfiles() by skipping it if it&#39;s empty.","title":"Is there a way to check if a class is empty in java?","body":"<p>Sorry if the title is a bit confusing, I didn't really know how to word what I wanted to ask.</p>\n<p>Basically, I am making an api call to a database that returns data as such:</p>\n<p>[{&quot;profiles&quot;:{&quot;<strong>testexample</strong>&quot;:{&quot;addresses&quot;:[{&quot;city&quot;:&quot;<em><strong>&quot;,&quot;street1&quot;:&quot;</strong></em>&quot;,&quot;street2&quot;:&quot;apt 320&quot;}],&quot;addressType&quot;:&quot;HOME&quot;,&quot;city&quot;:&quot;<em><strong>&quot;,&quot;dateOfBirth&quot;:&quot;</strong></em>&quot;,&quot;emailAddress1&quot;:&quot;<em><strong>&quot;,&quot;emailAddress2&quot;:&quot;</strong></em>&quot;,&quot;emailAddresses&quot;:[{&quot;email&quot;:&quot;<em><strong>&quot;,&quot;preferred&quot;:1,&quot;type&quot;:&quot;BUSINESS&quot;},{&quot;email&quot;:&quot;</strong></em>&quot;,&quot;preferred&quot;:0,&quot;type&quot;:&quot;PERSONAL&quot;}],&quot;firstName&quot;:&quot;<em><strong>&quot;,&quot;lastName&quot;:&quot;</strong></em>&quot;,&quot;phoneNumber&quot;:&quot;<em><strong>&quot;,&quot;phoneNumbers&quot;:[],&quot;phoneType&quot;:&quot;HOME&quot;,&quot;postalCode&quot;:&quot;</strong></em>&quot;,&quot;preferred&quot;:1,&quot;street1&quot;:&quot;<em><strong>&quot;,&quot;street2&quot;:&quot;</strong></em>&quot;}]</p>\n<p>The code I have below works fine when the database returns a non-empty profiles {}. I have the following Java classes that looks like the following:</p>\n<pre><code>public class Account {\n\n    @JsonProperty(&quot;profiles&quot;)\n    private Profiles profiles;\n\n    @JsonProperty(&quot;profiles&quot;)\n    public Profiles getProfiles() {\n        return profiles;\n    }\n\n    @JsonProperty(&quot;testexample&quot;)\n    public void setProfiles(Profiles profiles) {\n        this.profiles = profiles;\n    }\n\n}\n</code></pre>\n<pre><code>public class Profiles {\n\n    @JsonProperty(&quot;testexample&quot;)\n    private Profile testExample;\n\n    @JsonProperty(&quot;testexample&quot;)\n    public Profile getTestExample() {\n        return testExample;\n    }\n\n    @JsonProperty(&quot;testexample&quot;)\n    public void setTestExample(Profile testExample) {\n        this.testExample = testExample;\n    }\n\n}\n</code></pre>\n<pre><code>public class Profile {\n\n\n    @JsonProperty(&quot;dateOfBirth&quot;)\n    private String dateOfBirth;\n\n    @JsonProperty(&quot;dateOfBirth&quot;)\n    public String getDateOfBirth() {\n        return dateOfBirth;\n    }\n    @JsonProperty(&quot;dateOfBirth&quot;)\n    public void setDateOfBirth(String dateOfBirth) {\n        this.dateOfBirth = dateOfBirth;\n    }\n\n}\n</code></pre>\n<p>So what I want to do when I get the data is check whether the getProfiles() returns empty, so I don't make the calls to anything within that object.</p>\n<p><strong>Please note, for the sake of simplicity I omitted other parts of the classes to focus primarily on what I wanted</strong></p>\n<p>This is what I have so far, and it works when the profiles {} is not empty</p>\n<pre><code>Account response = access.lookup(id, type); //This is to grab the response from the database, which is working.\n\nresponse.getProfiles(); //This is the part that works when it has a profiles {} not empty, but fails on empty.\n\n</code></pre>\n<p>So what happens is that I don't get an error for response.getProfiles(), but if I tried to do response.getProfiles().getDateOfBirth(), it won't work because it will give a null pointer exception since the dateOfBirth isn't there.</p>\n<p>I want to avoid calling anything within response.getProfiles() by skipping it if it's empty.</p>\n"},{"tags":["java","dictionary","collections","jackson","hashmap"],"comments":[{"owner":{"account_id":4563475,"reputation":27298,"user_id":3705127,"accept_rate":52,"display_name":"sprinter"},"score":0,"creation_date":1671744241,"post_id":74893488,"comment_id":132169305,"body_markdown":"Your issue is really about use of `ObjectMapper` rather than use of maps. At the moment you are returning a `Map&lt;String,Object&gt;` whereas the image you posted makes it clear that it&#39;s really a `Map&lt;String,Map&lt;String,...&gt;&gt;`. I&#39;m assuming `ObjectMapper` here is from the Jackson library?","body":"Your issue is really about use of <code>ObjectMapper</code> rather than use of maps. At the moment you are returning a <code>Map&lt;String,Object&gt;</code> whereas the image you posted makes it clear that it&#39;s really a <code>Map&lt;String,Map&lt;String,...&gt;&gt;</code>. I&#39;m assuming <code>ObjectMapper</code> here is from the Jackson library?"},{"owner":{"account_id":5490334,"reputation":175,"user_id":4363862,"accept_rate":0,"display_name":"Zoso619"},"score":0,"creation_date":1671749205,"post_id":74893488,"comment_id":132170364,"body_markdown":"Yes . It’s from Jackson library","body":"Yes . It’s from Jackson library"}],"answers":[{"comments":[{"owner":{"account_id":5490334,"reputation":175,"user_id":4363862,"accept_rate":0,"display_name":"Zoso619"},"score":0,"creation_date":1671778328,"post_id":74893933,"comment_id":132173966,"body_markdown":"its not working . values.containsKey does not recognise .","body":"its not working . values.containsKey does not recognise ."}],"tags":[],"owner":{"account_id":14856402,"reputation":697,"user_id":10728774,"display_name":"Reddi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671743780,"creation_date":1671743780,"answer_id":74893933,"question_id":74893488,"body_markdown":"I have mocked some data you have provided as below.\r\n\r\n[![Debug values][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/yUwwv.png\r\nIn order to retrieve the values for the &quot;plan_id&quot; key I do use this code.\r\n```\r\nfor(var values : map.values()) {\r\n    if(values.containsKey(&quot;plan_id&quot;)) {\r\n        // return values for &#39;plan_id&#39; key.\r\n    }\r\n}\r\n```","title":"Java HashMap one of the &lt;V&gt; has a &lt;K,V&gt; and need to fetch the value by the key","body":"<p>I have mocked some data you have provided as below.</p>\n<p><a href=\"https://i.stack.imgur.com/yUwwv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yUwwv.png\" alt=\"Debug values\" /></a></p>\n<p>In order to retrieve the values for the &quot;plan_id&quot; key I do use this code.</p>\n<pre><code>for(var values : map.values()) {\n    if(values.containsKey(&quot;plan_id&quot;)) {\n        // return values for 'plan_id' key.\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5490334,"reputation":175,"user_id":4363862,"accept_rate":0,"display_name":"Zoso619"},"score":0,"creation_date":1671778387,"post_id":74894193,"comment_id":132173981,"body_markdown":"whats mapper here and jsonStringContents should have the string ?","body":"whats mapper here and jsonStringContents should have the string ?"},{"owner":{"account_id":10637559,"reputation":2455,"user_id":7833793,"display_name":"R4N"},"score":0,"creation_date":1671808752,"post_id":74894193,"comment_id":132181387,"body_markdown":"@Zoso619 I&#39;ve edited my response to add the instantiation of mapper (ObjectMapper) and reading the local jsonStringContents (at the bottom of the response).","body":"@Zoso619 I&#39;ve edited my response to add the instantiation of mapper (ObjectMapper) and reading the local jsonStringContents (at the bottom of the response)."}],"tags":[],"owner":{"account_id":10637559,"reputation":2455,"user_id":7833793,"display_name":"R4N"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671809643,"creation_date":1671745895,"answer_id":74894193,"question_id":74893488,"body_markdown":"If you don&#39;t want to create model objects for your response (and nested objects) you could use object mapper to read read the value as a JsonNode and then either use `get` or a `jsonPtrExpr` to get the exact value you want. Here are a couple of examples of that:\r\n\r\n### Example Json:\r\n\r\n```\r\n{\r\n  &quot;map1&quot; : {\r\n    &quot;headers&quot; : {},\r\n    &quot;content&quot; : {\r\n      &quot;account&quot; : {},\r\n      &quot;email&quot; : {},\r\n      &quot;plan_id&quot; : {\r\n        &quot;target_key&quot; : &quot;target_value&quot;\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\n### JsonNode with get\r\n\r\n```\r\n    JsonNode outerNode = mapper.readValue(jsonStringContents, JsonNode.class);\r\n    // JsonNode with get\r\n    String targetValueWithGet = outerNode.get(&quot;map1&quot;).get(&quot;content&quot;).get(&quot;plan_id&quot;).get(\r\n            &quot;target_key&quot;).asText();\r\n    System.out.println(&quot;JsonNode with get: &quot; + targetValueWithGet);\r\n```\r\n\r\n### JsonNode with jsonPtrExpr\r\n\r\n```\r\n    JsonNode outerNode = mapper.readValue(jsonStringContents, JsonNode.class);\r\n    // JsonNode with jsonPtrExpr\r\n    String targetValueWithJsonPtrExpr = outerNode.at(&quot;/map1/content/plan_id/target_key&quot;).asText();\r\n    System.out.println(&quot;JsonNode with jsonPtrExpr: &quot; + targetValueWithJsonPtrExpr);\r\n```\r\n\r\nThe outputs are:\r\n\r\n```\r\nJsonNode with get: target_value\r\nJsonNode with jsonPtrExpr: target_value\r\n```\r\n\r\nLinks:\r\n\r\nJsonNode get: https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#get(java.lang.String)\r\n\r\nJsonNode at: https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#at(com.fasterxml.jackson.core.JsonPointer)\r\n\r\nJsonPointer (expression passed into at): https://fasterxml.github.io/jackson-core/javadoc/2.7/com/fasterxml/jackson/core/JsonPointer.html\r\n\r\nThe `at` method will return a node with isMissingNode() == true if the path doesn&#39;t exist, so if you&#39;re unsure that the structure will always be the same from your response, you&#39;ll probably want to check that\r\n\r\nThis is from the documentation linked (for `at`):\r\n\r\n&gt;Node that matches given JSON Pointer: if no match exists, will return a node for which isMissingNode() returns true.\r\n\r\nWhen this occurs your asText will return null, so you&#39;ll want to handle that case (either by checking isMissingNode() before calling asText() or checking if asText() is null)\r\n\r\n```\r\n    JsonNode outerNode = mapper.readValue(jsonStringContents, JsonNode.class);\r\n    JsonNode targetNode = outerNode.at(&quot;/incorrect/path&quot;);\r\n    System.out.println(&quot;Is missing node = &quot; + targetNode.isMissingNode());\r\n    String textFromMissingNode = targetNode.asText();\r\n```\r\n\r\nWhich outputs:\r\n\r\n```\r\nIs missing node = true\r\nasText value after calling on missing node = \r\n```\r\n\r\n_Edit:_\r\n\r\nIn both of the above examples, for brevity I left off the instantiation of ObjectMapper and reading the local json file (I just used a local json file for the example code here):\r\n\r\n```\r\nObjectMapper mapper = new ObjectMapper();\r\n// this should be wrapped in a try/catch (catching IOException) or the method should be marked as throw IOException\r\nString jsonStringContents = Files.readString(Path.of(NestedMapping.class.getClassLoader().getResource(&quot;test.json&quot;).getPath()));\r\n```\r\n\r\nNestedMapping is my class in this example, I don&#39;t believe you&#39;ll be reading the json file from local resources, but if you are you&#39;ll want to switch that to your class.","title":"Java HashMap one of the &lt;V&gt; has a &lt;K,V&gt; and need to fetch the value by the key","body":"<p>If you don't want to create model objects for your response (and nested objects) you could use object mapper to read read the value as a JsonNode and then either use <code>get</code> or a <code>jsonPtrExpr</code> to get the exact value you want. Here are a couple of examples of that:</p>\n<h3>Example Json:</h3>\n<pre><code>{\n  &quot;map1&quot; : {\n    &quot;headers&quot; : {},\n    &quot;content&quot; : {\n      &quot;account&quot; : {},\n      &quot;email&quot; : {},\n      &quot;plan_id&quot; : {\n        &quot;target_key&quot; : &quot;target_value&quot;\n      }\n    }\n  }\n}\n</code></pre>\n<h3>JsonNode with get</h3>\n<pre><code>    JsonNode outerNode = mapper.readValue(jsonStringContents, JsonNode.class);\n    // JsonNode with get\n    String targetValueWithGet = outerNode.get(&quot;map1&quot;).get(&quot;content&quot;).get(&quot;plan_id&quot;).get(\n            &quot;target_key&quot;).asText();\n    System.out.println(&quot;JsonNode with get: &quot; + targetValueWithGet);\n</code></pre>\n<h3>JsonNode with jsonPtrExpr</h3>\n<pre><code>    JsonNode outerNode = mapper.readValue(jsonStringContents, JsonNode.class);\n    // JsonNode with jsonPtrExpr\n    String targetValueWithJsonPtrExpr = outerNode.at(&quot;/map1/content/plan_id/target_key&quot;).asText();\n    System.out.println(&quot;JsonNode with jsonPtrExpr: &quot; + targetValueWithJsonPtrExpr);\n</code></pre>\n<p>The outputs are:</p>\n<pre><code>JsonNode with get: target_value\nJsonNode with jsonPtrExpr: target_value\n</code></pre>\n<p>Links:</p>\n<p>JsonNode get: <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#get(java.lang.String)\" rel=\"nofollow noreferrer\">https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#get(java.lang.String)</a></p>\n<p>JsonNode at: <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#at(com.fasterxml.jackson.core.JsonPointer)\" rel=\"nofollow noreferrer\">https://fasterxml.github.io/jackson-databind/javadoc/2.7/com/fasterxml/jackson/databind/JsonNode.html#at(com.fasterxml.jackson.core.JsonPointer)</a></p>\n<p>JsonPointer (expression passed into at): <a href=\"https://fasterxml.github.io/jackson-core/javadoc/2.7/com/fasterxml/jackson/core/JsonPointer.html\" rel=\"nofollow noreferrer\">https://fasterxml.github.io/jackson-core/javadoc/2.7/com/fasterxml/jackson/core/JsonPointer.html</a></p>\n<p>The <code>at</code> method will return a node with isMissingNode() == true if the path doesn't exist, so if you're unsure that the structure will always be the same from your response, you'll probably want to check that</p>\n<p>This is from the documentation linked (for <code>at</code>):</p>\n<blockquote>\n<p>Node that matches given JSON Pointer: if no match exists, will return a node for which isMissingNode() returns true.</p>\n</blockquote>\n<p>When this occurs your asText will return null, so you'll want to handle that case (either by checking isMissingNode() before calling asText() or checking if asText() is null)</p>\n<pre><code>    JsonNode outerNode = mapper.readValue(jsonStringContents, JsonNode.class);\n    JsonNode targetNode = outerNode.at(&quot;/incorrect/path&quot;);\n    System.out.println(&quot;Is missing node = &quot; + targetNode.isMissingNode());\n    String textFromMissingNode = targetNode.asText();\n</code></pre>\n<p>Which outputs:</p>\n<pre><code>Is missing node = true\nasText value after calling on missing node = \n</code></pre>\n<p><em>Edit:</em></p>\n<p>In both of the above examples, for brevity I left off the instantiation of ObjectMapper and reading the local json file (I just used a local json file for the example code here):</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\n// this should be wrapped in a try/catch (catching IOException) or the method should be marked as throw IOException\nString jsonStringContents = Files.readString(Path.of(NestedMapping.class.getClassLoader().getResource(&quot;test.json&quot;).getPath()));\n</code></pre>\n<p>NestedMapping is my class in this example, I don't believe you'll be reading the json file from local resources, but if you are you'll want to switch that to your class.</p>\n"}],"owner":{"account_id":5490334,"reputation":175,"user_id":4363862,"accept_rate":0,"display_name":"Zoso619"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1671809643,"creation_date":1671740468,"question_id":74893488,"body_markdown":"I have an API response that gives the below result . The response Map has 3 &lt;K,V&gt;. and One of the &lt;K&gt; content has another &lt;K,V&gt; in its value . My problem here is I need to fetch the value &lt;V&gt; of &quot;plan_id&quot; which is a Key . this simply contains a Key and value \r\n\r\nso far the code is \r\n\r\n```\r\nObjectMapper objectMapper = new ObjectMapper();\r\n        Map&lt;String, Object&gt; map1\r\n                = objectMapper.readValue(response, new TypeReference&lt;Map&lt;String,Object&gt;&gt;(){});\r\n        logger.info(&quot;-----------&quot;+map1.get(&quot;content&quot;));\r\n```\r\n\r\nnot sure how to convert the map1 to another map and fetch the value for plan_id. \r\nif any other short cut please let me know.\r\n\r\n[![response map][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/60a2Q.png","title":"Java HashMap one of the &lt;V&gt; has a &lt;K,V&gt; and need to fetch the value by the key","body":"<p>I have an API response that gives the below result . The response Map has 3 &lt;K,V&gt;. and One of the  content has another &lt;K,V&gt; in its value . My problem here is I need to fetch the value  of &quot;plan_id&quot; which is a Key . this simply contains a Key and value</p>\n<p>so far the code is</p>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\n        Map&lt;String, Object&gt; map1\n                = objectMapper.readValue(response, new TypeReference&lt;Map&lt;String,Object&gt;&gt;(){});\n        logger.info(&quot;-----------&quot;+map1.get(&quot;content&quot;));\n</code></pre>\n<p>not sure how to convert the map1 to another map and fetch the value for plan_id.\nif any other short cut please let me know.</p>\n<p><a href=\"https://i.stack.imgur.com/60a2Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/60a2Q.png\" alt=\"response map\" /></a></p>\n"},{"tags":["java","gradle","cucumber","junit5","cucumber-junit"],"answers":[{"comments":[{"owner":{"account_id":10413480,"reputation":3924,"user_id":10950272,"display_name":"makozaki"},"score":0,"creation_date":1605298434,"post_id":64683390,"comment_id":114617543,"body_markdown":"I made it for now by using matching path to features and source code but I will try to test it later, thx.","body":"I made it for now by using matching path to features and source code but I will try to test it later, thx."},{"owner":{"account_id":10413480,"reputation":3924,"user_id":10950272,"display_name":"makozaki"},"score":0,"creation_date":1607594971,"post_id":64683390,"comment_id":115324129,"body_markdown":"@m-p-korstanje is there any rationale why `features` has been removed from [properties](https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#configuration-options)? Would it be ok to request such functionality in `cucumber-junit-platform-engine`?","body":"@m-p-korstanje is there any rationale why <code>features</code> has been removed from <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#configuration-options\" rel=\"nofollow noreferrer\">properties</a>? Would it be ok to request such functionality in <code>cucumber-junit-platform-engine</code>?"},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1607596031,"post_id":64683390,"comment_id":115324580,"body_markdown":"Test discovery is a feature provided by the JUnit Platform. As such the Cucumber integration with the JUnit Platform can not provide it. You&#39;d replace `cucumber.features` with the appropriate selector. https://junit.org/junit5/docs/current/user-guide/#launcher-api","body":"Test discovery is a feature provided by the JUnit Platform. As such the Cucumber integration with the JUnit Platform can not provide it. You&#39;d replace <code>cucumber.features</code> with the appropriate selector. <a href=\"https://junit.org/junit5/docs/current/user-guide/#launcher-api\" rel=\"nofollow noreferrer\">junit.org/junit5/docs/current/user-guide/#launcher-api</a>"},{"owner":{"account_id":10413480,"reputation":3924,"user_id":10950272,"display_name":"makozaki"},"score":1,"creation_date":1607598991,"post_id":64683390,"comment_id":115325919,"body_markdown":"I&#39;m still not convinced, as per docs`Cucumber will scan the package of a class annotated with @Cucumber for feature files.` So why can&#39;t this behaviour be overriden by `features` property to scan not the package of the runner but custom user provided package? I have many runners which scan all resources, i.e. `features = &quot;.&quot;` and then filter the tests by tags.","body":"I&#39;m still not convinced, as per docs<code>Cucumber will scan the package of a class annotated with @Cucumber for feature files.</code> So why can&#39;t this behaviour be overriden by <code>features</code> property to scan not the package of the runner but custom user provided package? I have many runners which scan all resources, i.e. <code>features = &quot;.&quot;</code> and then filter the tests by tags."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":2,"creation_date":1607613089,"post_id":64683390,"comment_id":115332633,"body_markdown":"As I wrote in the docs, the annotation is a workaround for the lack of support from Gradle and Maven. I reckon that once supported the annotation will be deprecated. Consider using a custom Gradle job with the JUnit ConsoleLauncher.","body":"As I wrote in the docs, the annotation is a workaround for the lack of support from Gradle and Maven. I reckon that once supported the annotation will be deprecated. Consider using a custom Gradle job with the JUnit ConsoleLauncher."},{"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"score":0,"creation_date":1607613783,"post_id":64683390,"comment_id":115332975,"body_markdown":"You may also benefit from the ability to run JUnit5 Suites programmatically once \nhttps://github.com/junit-team/junit5/pull/2416 is merged.","body":"You may also benefit from the ability to run JUnit5 Suites programmatically once  <a href=\"https://github.com/junit-team/junit5/pull/2416\" rel=\"nofollow noreferrer\">github.com/junit-team/junit5/pull/2416</a> is merged."},{"owner":{"account_id":1056871,"reputation":117749,"user_id":1059372,"accept_rate":97,"display_name":"Eugene"},"score":0,"creation_date":1631243388,"post_id":64683390,"comment_id":122175323,"body_markdown":"the amount of work in the PR is absolutely staggering!","body":"the amount of work in the PR is absolutely staggering!"}],"tags":[],"owner":{"account_id":4895787,"reputation":10858,"user_id":3945473,"display_name":"M.P. Korstanje"},"comment_count":7,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1604505195,"creation_date":1604505195,"answer_id":64683390,"question_id":64676559,"body_markdown":"[Gradle doesn&#39;t support non-class based test engines][1]. However you can create [a custom task that uses the JUnit Platform ConsoleLauncher][2]. You can then use the [Junit 5 selectors][3] that are [supported by Cucumber][4] to select your features. For example the `FileSelector` with `--select-file`.\r\n\r\n\r\n```\r\nval consoleLauncherTest by tasks.creating(JavaExec::class) {\r\n\tdependsOn(&quot;testClasses&quot;)\r\n\tval reportsDir = file(&quot;$buildDir/test-results&quot;)\r\n\toutputs.dir(reportsDir)\r\n\tclasspath(sourceSets[&quot;test&quot;].runtimeClasspath)\r\n\tmain = &quot;org.junit.platform.console.ConsoleLauncher&quot;\r\n\targs(&quot;--select-file&quot;, &quot;path/to.feature&quot;)\r\n\targs(&quot;--details&quot;, &quot;tree&quot;)\r\n\targs(&quot;--reports-dir&quot;, reportsDir)\r\n}\r\n```\r\n\r\n\r\n\r\n  [1]: https://github.com/gradle/gradle/issues/4252#issuecomment-434217496\r\n  [2]: https://github.com/junit-team/junit5/blob/7f04a28b136e8545206b66bf4b200271805beced/documentation/documentation.gradle.kts#L22-L35\r\n  [3]: https://junit.org/junit5/docs/current/user-guide/#running-tests-console-launcher-options\r\n  [4]: https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#supported-discovery-selectors-and-filters","title":"Feature files discovery in cucumber-junit-platform-engine","body":"<p><a href=\"https://github.com/gradle/gradle/issues/4252#issuecomment-434217496\" rel=\"nofollow noreferrer\">Gradle doesn't support non-class based test engines</a>. However you can create <a href=\"https://github.com/junit-team/junit5/blob/7f04a28b136e8545206b66bf4b200271805beced/documentation/documentation.gradle.kts#L22-L35\" rel=\"nofollow noreferrer\">a custom task that uses the JUnit Platform ConsoleLauncher</a>. You can then use the <a href=\"https://junit.org/junit5/docs/current/user-guide/#running-tests-console-launcher-options\" rel=\"nofollow noreferrer\">Junit 5 selectors</a> that are <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#supported-discovery-selectors-and-filters\" rel=\"nofollow noreferrer\">supported by Cucumber</a> to select your features. For example the <code>FileSelector</code> with <code>--select-file</code>.</p>\n<pre><code>val consoleLauncherTest by tasks.creating(JavaExec::class) {\n    dependsOn(&quot;testClasses&quot;)\n    val reportsDir = file(&quot;$buildDir/test-results&quot;)\n    outputs.dir(reportsDir)\n    classpath(sourceSets[&quot;test&quot;].runtimeClasspath)\n    main = &quot;org.junit.platform.console.ConsoleLauncher&quot;\n    args(&quot;--select-file&quot;, &quot;path/to.feature&quot;)\n    args(&quot;--details&quot;, &quot;tree&quot;)\n    args(&quot;--reports-dir&quot;, reportsDir)\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1475496,"reputation":3420,"user_id":1385966,"accept_rate":68,"display_name":"Wins"},"score":2,"creation_date":1655260355,"post_id":70032272,"comment_id":128288275,"body_markdown":"What about in cucumber-jvm 6.9.1?","body":"What about in cucumber-jvm 6.9.1?"}],"tags":[],"owner":{"account_id":3945,"reputation":4048,"user_id":5793,"accept_rate":100,"display_name":"spmason"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1671809431,"creation_date":1637312583,"answer_id":70032272,"question_id":64676559,"body_markdown":"In cucumber-jvm v7 the `@Cucumber` annotation is deprecated and you&#39;re encouraged to use the regular `@Suite` annotation. This works for me:\r\n\r\n```java\r\n@Suite\r\n@IncludeEngines(&quot;cucumber&quot;)\r\n@SelectClasspathResource(&quot;features&quot;)\r\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;com.mycompany.cucumber&quot;)\r\npublic class CucumberIT {\r\n}\r\n```\r\n\r\nIt picks up all my .feature files under the `features/` dir in my resources folder (classpath)\r\n\r\nPurpose of annotations:  \r\n@Suite - annotation from JUnit 5 to make this class a run configuration for  test suite.  \r\n@IncludeEngines(&quot;cucumber&quot;) - tells JUnit 5 to use Cucumber test engine to run features.  \r\n@SelectClasspathResource(&quot;features&quot;) - to change the location of your feature files (if you do not add this annotation classpath of the current class will be used).  \r\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;com.mycompany.cucumber&quot;) - this annotation specifies the path to steps definitions (java classes).  \r\n\r\nDocs: https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#suites-with-different-configurations\r\n\r\nThere are various other `@Select*` annotations supported by junit-platform, I assume those work as well (though they&#39;re marked as experimental so subject to change): https://junit.org/junit5/docs/current/user-guide/#api-evolution-experimental-apis","title":"Feature files discovery in cucumber-junit-platform-engine","body":"<p>In cucumber-jvm v7 the <code>@Cucumber</code> annotation is deprecated and you're encouraged to use the regular <code>@Suite</code> annotation. This works for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Suite\n@IncludeEngines(&quot;cucumber&quot;)\n@SelectClasspathResource(&quot;features&quot;)\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;com.mycompany.cucumber&quot;)\npublic class CucumberIT {\n}\n</code></pre>\n<p>It picks up all my .feature files under the <code>features/</code> dir in my resources folder (classpath)</p>\n<p>Purpose of annotations:<br />\n@Suite - annotation from JUnit 5 to make this class a run configuration for  test suite.<br />\n@IncludeEngines(&quot;cucumber&quot;) - tells JUnit 5 to use Cucumber test engine to run features.<br />\n@SelectClasspathResource(&quot;features&quot;) - to change the location of your feature files (if you do not add this annotation classpath of the current class will be used).<br />\n@ConfigurationParameter(key = GLUE_PROPERTY_NAME, value = &quot;com.mycompany.cucumber&quot;) - this annotation specifies the path to steps definitions (java classes).</p>\n<p>Docs: <a href=\"https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#suites-with-different-configurations\" rel=\"nofollow noreferrer\">https://github.com/cucumber/cucumber-jvm/tree/main/junit-platform-engine#suites-with-different-configurations</a></p>\n<p>There are various other <code>@Select*</code> annotations supported by junit-platform, I assume those work as well (though they're marked as experimental so subject to change): <a href=\"https://junit.org/junit5/docs/current/user-guide/#api-evolution-experimental-apis\" rel=\"nofollow noreferrer\">https://junit.org/junit5/docs/current/user-guide/#api-evolution-experimental-apis</a></p>\n"}],"owner":{"account_id":10413480,"reputation":3924,"user_id":10950272,"display_name":"makozaki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7975,"favorite_count":0,"down_vote_count":0,"up_vote_count":8,"accepted_answer_id":70032272,"answer_count":2,"score":8,"last_activity_date":1671809431,"creation_date":1604478922,"question_id":64676559,"body_markdown":"In `cucumber-junit` library I use `@CucumberOptions` to define feature files location:\r\n```java\r\npackage com.mycompany.cucumber;\r\n\r\nimport cucumber.api.CucumberOptions;\r\nimport cucumber.api.junit.Cucumber;\r\nimport org.junit.runner.RunWith;\r\n\r\n@RunWith(Cucumber.class)\r\n@CucumberOptions(\r\n  plugin = ...,\r\n  features = &quot;classpath:.&quot;, // my java step definitions are in package com.mycompany.cucumber \r\n                            // but feature files directly in test resources \r\n                            // resources/is_it_friday_yet.feature\r\n  tags = ...,\r\n  glue = ...\r\n)\r\npublic class CucumberRunner {\r\n}\r\n```\r\nI&#39;m running my tests with custom gradle task `cucumberTest`\r\n```gradle\r\ncucumberTest {\r\n    useJUnitPlatform()\r\n}\r\n```\r\n\r\nAfter migrating to `cucumber-junit-platform-engine` `@CucumberOptions` are no longer supported.\r\n```java\r\npackage com.mycompany.cucumber;\r\nimport io.cucumber.junit.platform.engine.Cucumber;\r\n@Cucumber\r\npublic class CucumberRunner {\r\n}\r\n```\r\nI can make it work with replacing `plugin`, `tags`, `glue` options with properties `cucumber.filter.tags`, `cucumber.glue`, `cucumber.plugin`.\r\n\r\nWhat about `features` property? It works fine if I change feature files location to match package name i.e. `resources/com/mycompany/cucumber/is_it_friday_yet.feature`. Still this is a simple case and I have many more test packages which are not placed in the same locations as source code and I cannot move them.","title":"Feature files discovery in cucumber-junit-platform-engine","body":"<p>In <code>cucumber-junit</code> library I use <code>@CucumberOptions</code> to define feature files location:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.mycompany.cucumber;\n\nimport cucumber.api.CucumberOptions;\nimport cucumber.api.junit.Cucumber;\nimport org.junit.runner.RunWith;\n\n@RunWith(Cucumber.class)\n@CucumberOptions(\n  plugin = ...,\n  features = &quot;classpath:.&quot;, // my java step definitions are in package com.mycompany.cucumber \n                            // but feature files directly in test resources \n                            // resources/is_it_friday_yet.feature\n  tags = ...,\n  glue = ...\n)\npublic class CucumberRunner {\n}\n</code></pre>\n<p>I'm running my tests with custom gradle task <code>cucumberTest</code></p>\n<pre><code>cucumberTest {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>After migrating to <code>cucumber-junit-platform-engine</code> <code>@CucumberOptions</code> are no longer supported.</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.mycompany.cucumber;\nimport io.cucumber.junit.platform.engine.Cucumber;\n@Cucumber\npublic class CucumberRunner {\n}\n</code></pre>\n<p>I can make it work with replacing <code>plugin</code>, <code>tags</code>, <code>glue</code> options with properties <code>cucumber.filter.tags</code>, <code>cucumber.glue</code>, <code>cucumber.plugin</code>.</p>\n<p>What about <code>features</code> property? It works fine if I change feature files location to match package name i.e. <code>resources/com/mycompany/cucumber/is_it_friday_yet.feature</code>. Still this is a simple case and I have many more test packages which are not placed in the same locations as source code and I cannot move them.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1641302190,"post_id":70578507,"comment_id":124765331,"body_markdown":"Just don&#39;t use it, it will lead to more problems than it solves. It basically acts as a factory method (as the documentation states) and for each bean that needs an instance of that bean it will create a fresh one (while most will think it will also produce a singleton).","body":"Just don&#39;t use it, it will lead to more problems than it solves. It basically acts as a factory method (as the documentation states) and for each bean that needs an instance of that bean it will create a fresh one (while most will think it will also produce a singleton)."},{"owner":{"account_id":23824284,"reputation":29,"user_id":17831566,"display_name":"Maunish Shah"},"score":0,"creation_date":1641396118,"post_id":70578507,"comment_id":124794609,"body_markdown":"Okay So you mean to say it will act as prototyped bean but originally singletone. Correct?","body":"Okay So you mean to say it will act as prototyped bean but originally singletone. Correct?"},{"owner":{"account_id":17206530,"reputation":106,"user_id":12456968,"display_name":"Steven Kristian"},"score":0,"creation_date":1697424862,"post_id":70578507,"comment_id":136273813,"body_markdown":"Yes it&#39;ll act as prototyped bean (because bean annotation acts as a factory method), and another backlash of that is that the factory method won&#39;t be able to access another bean definition so it&#39;s tricky to be able to find a use case which benefits the lite mode compared to the full mode.","body":"Yes it&#39;ll act as prototyped bean (because bean annotation acts as a factory method), and another backlash of that is that the factory method won&#39;t be able to access another bean definition so it&#39;s tricky to be able to find a use case which benefits the lite mode compared to the full mode."}],"answers":[{"tags":[],"owner":{"account_id":4388558,"reputation":71,"user_id":3577810,"display_name":"user3577810"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671809387,"creation_date":1671809387,"answer_id":74901358,"question_id":70578507,"body_markdown":"When a @Bean method is declared within a @Component annotated class or a plain class, it is not proxied and behaves as a normal java method - so it does not return an instance from the spring container but rather creates a new instance. \r\n\r\nThis article contains an explanation with examples - \r\nhttps://irena-sayv.medium.com/spring-bean-annotation-what-how-and-why-24f7abe20f83","title":"Need to know about &quot;lite&quot; mode of @Bean in spring","body":"<p>When a @Bean method is declared within a @Component annotated class or a plain class, it is not proxied and behaves as a normal java method - so it does not return an instance from the spring container but rather creates a new instance.</p>\n<p>This article contains an explanation with examples -\n<a href=\"https://irena-sayv.medium.com/spring-bean-annotation-what-how-and-why-24f7abe20f83\" rel=\"nofollow noreferrer\">https://irena-sayv.medium.com/spring-bean-annotation-what-how-and-why-24f7abe20f83</a></p>\n"}],"owner":{"account_id":23824284,"reputation":29,"user_id":17831566,"display_name":"Maunish Shah"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":302,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1671809387,"creation_date":1641297792,"question_id":70578507,"body_markdown":"Full @Configuration vs “lite” @Bean mode?\r\nIn Spring documentation they have mentioned something about @Bean annotated method without @Configuration annotated class.\r\nCan anyone please help me to get perfect example and where can it useful(in which case)?\r\n\r\nhttps://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-standard-annotations (Concept : 1.12.1)","title":"Need to know about &quot;lite&quot; mode of @Bean in spring","body":"<p>Full @Configuration vs “lite” @Bean mode?\nIn Spring documentation they have mentioned something about @Bean annotated method without @Configuration annotated class.\nCan anyone please help me to get perfect example and where can it useful(in which case)?</p>\n<p><a href=\"https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-standard-annotations\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-framework/docs/current/reference/html/core.html#beans-standard-annotations</a> (Concept : 1.12.1)</p>\n"},{"tags":["java","certificate","keycloak"],"comments":[{"owner":{"account_id":1967474,"reputation":3342,"user_id":1767316,"accept_rate":42,"display_name":"user1767316"},"score":0,"creation_date":1673722695,"post_id":74901304,"comment_id":132563465,"body_markdown":"It seems that I have the same difficulty to retrieve sessions from SPI, see my question here: https://stackoverflow.com/questions/75099686/how-to-retrieve-the-list-of-online-and-offline-sessions-attached-to-a-user-using","body":"It seems that I have the same difficulty to retrieve sessions from SPI, see my question here: <a href=\"https://stackoverflow.com/questions/75099686/how-to-retrieve-the-list-of-online-and-offline-sessions-attached-to-a-user-using\" title=\"how to retrieve the list of online and offline sessions attached to a user using\">stackoverflow.com/questions/75099686/&hellip;</a>"}],"owner":{"account_id":5946082,"reputation":13,"user_id":4675543,"display_name":"Yonchev"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671809094,"creation_date":1671809094,"question_id":74901304,"body_markdown":"I have an SPI module that listens for events and sends them to my backend service, but I want to encrypt the connection from Keycloak to the backend with the realm certificates. For this purpose, I need the private key of one of these certificates. I saw that if I have a KeycloakSession I can get it as:\r\n\r\n    session.keys().getActiveKey(session.getContext().getRealm(), KeyUse.SIG, Algorithm.RS256).getPrivateKey()\r\n\r\nHowever, event listeners have no way to get the session, or at least I haven&#39;t found a way. Is there another option to access the certificates without using a session?","title":"Find Realm PrivateKey in Keycloak SPI module","body":"<p>I have an SPI module that listens for events and sends them to my backend service, but I want to encrypt the connection from Keycloak to the backend with the realm certificates. For this purpose, I need the private key of one of these certificates. I saw that if I have a KeycloakSession I can get it as:</p>\n<pre><code>session.keys().getActiveKey(session.getContext().getRealm(), KeyUse.SIG, Algorithm.RS256).getPrivateKey()\n</code></pre>\n<p>However, event listeners have no way to get the session, or at least I haven't found a way. Is there another option to access the certificates without using a session?</p>\n"},{"tags":["java","arraylist","hashmap","linkedhashmap"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671801438,"post_id":74899906,"comment_id":132179402,"body_markdown":"Do you mean you want to print the list elements in order, or for each map you want to print the mappings (key-value pairs) in order, and if so, in which order? Or did you want both? Please give example of desired output and observed output.","body":"Do you mean you want to print the list elements in order, or for each map you want to print the mappings (key-value pairs) in order, and if so, in which order? Or did you want both? Please give example of desired output and observed output."},{"owner":{"account_id":5273740,"reputation":698,"user_id":4211252,"display_name":"Thilo Schwarz"},"score":0,"creation_date":1671801587,"post_id":74899906,"comment_id":132179451,"body_markdown":"You could write your own ```Comparator``` to order your list by ```Collections.sort(list, comparator)```, or you have to construct a new fat LinkedHashMap with respectation of unique keys.","body":"You could write your own <code>Comparator</code> to order your list by <code>Collections.sort(list, comparator)</code>, or you have to construct a new fat LinkedHashMap with respectation of unique keys."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":3,"creation_date":1671801648,"post_id":74899906,"comment_id":132179464,"body_markdown":"do you mean to have the columns sorted or the whole list? (a cast does NOT change the runtime type of an instance - that is not possible, you need to create a new instance of different type)","body":"do you mean to have the columns sorted or the whole list? (a cast does NOT change the runtime type of an instance - that is not possible, you need to create a new instance of different type)"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1671802271,"post_id":74899906,"comment_id":132179614,"body_markdown":"For a sorted map fill the contents of your `HashMap` into a new `TreeMap`.","body":"For a sorted map fill the contents of your <code>HashMap</code> into a new <code>TreeMap</code>."},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":1,"creation_date":1671803163,"post_id":74899906,"comment_id":132179901,"body_markdown":"Please clarify what need to be sorted? If you want the list to be sorted, then use `ORDER BY` in your query.","body":"Please clarify what need to be sorted? If you want the list to be sorted, then use <code>ORDER BY</code> in your query."}],"answers":[{"tags":[],"owner":{"account_id":22436368,"reputation":276,"user_id":16641566,"display_name":"Robs"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671809076,"creation_date":1671809076,"answer_id":74901298,"question_id":74899906,"body_markdown":"Create this class and call it instead of: `AliasToEntityMapResultTransformer.INSTANCE`\r\n\r\n    public class MyTransformer extends AliasedTupleSubsetResultTransformer {\r\n\r\n\tpublic static final MyTransformer INSTANCE = new MyTransformer();\r\n\r\n\t/**\r\n\t * Disallow instantiation of AliasToEntityMapResultTransformer.\r\n\t */\r\n\tprivate MyTransformer() {\r\n\t}\r\n\r\n\t@Override\r\n\tpublic Object transformTuple(Object[] tuple, String[] aliases) {\r\n\t\tMap result = new LinkedHashMap&lt;&gt;(tuple.length);\r\n\t\r\n\t\tfor (int i = 0; i &lt; tuple.length; i++) {\r\n\t\t\tString alias = aliases[i];\r\n\t\t\tif (alias != null) {\r\n\t\t\t\tresult.put(alias, tuple[i]);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic boolean isTransformedValueATupleElement(String[] aliases, int tupleLength) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Serialization hook for ensuring singleton uniqueing.\r\n\t *\r\n\t * @return The singleton instance : {@link #INSTANCE}\r\n\t */\r\n\tprivate Object readResolve() {\r\n\t\treturn INSTANCE;\r\n\t}\r\n    }","title":"Cast HashMap in LinkedHashMap","body":"<p>Create this class and call it instead of: <code>AliasToEntityMapResultTransformer.INSTANCE</code></p>\n<pre><code>public class MyTransformer extends AliasedTupleSubsetResultTransformer {\n\npublic static final MyTransformer INSTANCE = new MyTransformer();\n\n/**\n * Disallow instantiation of AliasToEntityMapResultTransformer.\n */\nprivate MyTransformer() {\n}\n\n@Override\npublic Object transformTuple(Object[] tuple, String[] aliases) {\n    Map result = new LinkedHashMap&lt;&gt;(tuple.length);\n\n    for (int i = 0; i &lt; tuple.length; i++) {\n        String alias = aliases[i];\n        if (alias != null) {\n            result.put(alias, tuple[i]);\n        }\n    }\n    return result;\n}\n\n@Override\npublic boolean isTransformedValueATupleElement(String[] aliases, int tupleLength) {\n    return false;\n}\n\n/**\n * Serialization hook for ensuring singleton uniqueing.\n *\n * @return The singleton instance : {@link #INSTANCE}\n */\nprivate Object readResolve() {\n    return INSTANCE;\n}\n}\n</code></pre>\n"}],"owner":{"account_id":26186898,"reputation":99,"user_id":19869319,"display_name":"Alex"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74901298,"answer_count":1,"score":0,"last_activity_date":1671809076,"creation_date":1671800283,"question_id":74899906,"body_markdown":"I&#39;m getting the results from the database into a `List&lt;Map&lt;String, Object&gt;&gt;`. The problem the values are not in order, so I thought to cast in a LinkedHashMap, but I get this exception:\r\n\r\n     javax.ejb.EJBException: java.lang.ClassCastException: class java.util.HashMap cannot be cast to class java.util.LinkedHashMap (java.util.HashMap and java.util.LinkedHashMap are in module java.base of loader &#39;bootstrap&#39;)\r\n\r\nThe method is this:\r\n\r\n    protected EntityManager em;\r\n    Query q = em.createNativeQuery(&quot;select * from City&quot;);\r\n    NativeQueryImpl nativeQuery = (NativeQueryImpl) q;\r\n\tnativeQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\r\n\tList&lt;LinkedHashMap&lt;String, Object&gt;&gt; r = (List&lt;LinkedHashMap&lt;String, Object&gt;&gt;) nativeQuery.getResultList();\r\n\tr.stream().forEach(System.out::println);\r\n\r\nDoes anybody knows how can I print results in order?\r\n","title":"Cast HashMap in LinkedHashMap","body":"<p>I'm getting the results from the database into a <code>List&lt;Map&lt;String, Object&gt;&gt;</code>. The problem the values are not in order, so I thought to cast in a LinkedHashMap, but I get this exception:</p>\n<pre><code> javax.ejb.EJBException: java.lang.ClassCastException: class java.util.HashMap cannot be cast to class java.util.LinkedHashMap (java.util.HashMap and java.util.LinkedHashMap are in module java.base of loader 'bootstrap')\n</code></pre>\n<p>The method is this:</p>\n<pre><code>protected EntityManager em;\nQuery q = em.createNativeQuery(&quot;select * from City&quot;);\nNativeQueryImpl nativeQuery = (NativeQueryImpl) q;\nnativeQuery.setResultTransformer(AliasToEntityMapResultTransformer.INSTANCE);\nList&lt;LinkedHashMap&lt;String, Object&gt;&gt; r = (List&lt;LinkedHashMap&lt;String, Object&gt;&gt;) nativeQuery.getResultList();\nr.stream().forEach(System.out::println);\n</code></pre>\n<p>Does anybody knows how can I print results in order?</p>\n"},{"tags":["java","spring-boot","scheduled-tasks"],"comments":[{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":0,"creation_date":1671805587,"post_id":74900515,"comment_id":132180514,"body_markdown":"You can always use [`ScheduledExecutorService`](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html) yourself.","body":"You can always use <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/concurrent/ScheduledExecutorService.html\" rel=\"nofollow noreferrer\"><code>ScheduledExecutorService</code></a> yourself."}],"owner":{"account_id":27334860,"reputation":1,"user_id":20846449,"display_name":"maciejgogulski"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":151,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671808489,"creation_date":1671804204,"question_id":74900515,"body_markdown":"I have a table whith 3 columns. \r\n- dateTimeStart\r\n- dateTimeEnd\r\n- refreshTimeInSeconds\r\n\r\nIn want my application for each record to run a scheduled task between dateTimeStart and dateTimeEnd for every refreshTimeInSeconds.\r\n\r\nExample:\r\n \r\n\r\ndateTimeStart - 2022/12/23 03:00:00 PM  \r\ndateTimeEnd - 2022/12/23 04:00:00 PM  \r\nrefreshTimeInSeconds - 60\r\n\r\n2022/12/23 03:00:00 PM - call some method  \r\n2022/12/23 03:01:00 PM - call some method (+ 60 seconds)  \r\n...  \r\n2022/12/23 04:00:00 PM - call some method\r\n\r\n\r\nI have no idea how to solve this. Can I do this in spring using @Scheduled?","title":"Spring boot @Scheduled: parametrized task based on database record","body":"<p>I have a table whith 3 columns.</p>\n<ul>\n<li>dateTimeStart</li>\n<li>dateTimeEnd</li>\n<li>refreshTimeInSeconds</li>\n</ul>\n<p>In want my application for each record to run a scheduled task between dateTimeStart and dateTimeEnd for every refreshTimeInSeconds.</p>\n<p>Example:</p>\n<p>dateTimeStart - 2022/12/23 03:00:00 PM<br />\ndateTimeEnd - 2022/12/23 04:00:00 PM<br />\nrefreshTimeInSeconds - 60</p>\n<p>2022/12/23 03:00:00 PM - call some method<br />\n2022/12/23 03:01:00 PM - call some method (+ 60 seconds)<br />\n...<br />\n2022/12/23 04:00:00 PM - call some method</p>\n<p>I have no idea how to solve this. Can I do this in spring using @Scheduled?</p>\n"},{"tags":["java","spring-boot","swagger","swagger-ui","springfox"],"comments":[{"owner":{"account_id":4130200,"reputation":1291,"user_id":3388344,"accept_rate":71,"display_name":"Jorj"},"score":0,"creation_date":1572880656,"post_id":58695839,"comment_id":103688999,"body_markdown":"From what I know there is no solution for this in springfox api. Another dirty solution that worked for me: if you have access to modify `swagger-ui.html` you can sort the specs with javascript.","body":"From what I know there is no solution for this in springfox api. Another dirty solution that worked for me: if you have access to modify <code>swagger-ui.html</code> you can sort the specs with javascript."}],"answers":[{"tags":[],"owner":{"account_id":56970,"reputation":1143,"user_id":170637,"display_name":"Olivier G&#233;rardin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1576839956,"creation_date":1576839956,"answer_id":59424223,"question_id":58695839,"body_markdown":"My quick-and dirty hack: \r\n\r\n - I prepend &quot;@&quot; to make a group first in the list (hence default) \r\n - I prepend &quot;~&quot; to make a group last in the list\r\n\r\n","title":"How to change the default group / specification in Swagger UI?","body":"<p>My quick-and dirty hack: </p>\n\n<ul>\n<li>I prepend \"@\" to make a group first in the list (hence default) </li>\n<li>I prepend \"~\" to make a group last in the list</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1641733876,"post_id":70640045,"comment_id":124877773,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/70640045/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":6343851,"reputation":31,"user_id":4924993,"display_name":"khejing"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1641781112,"creation_date":1641721407,"answer_id":70640045,"question_id":58695839,"body_markdown":"use **urls.primaryName** parameter in the doc: https://github.com/swagger-api/swagger-ui/blob/v3.17.1/docs/usage/configuration.md#parameters","title":"How to change the default group / specification in Swagger UI?","body":"<p>use <strong>urls.primaryName</strong> parameter in the doc: <a href=\"https://github.com/swagger-api/swagger-ui/blob/v3.17.1/docs/usage/configuration.md#parameters\" rel=\"nofollow noreferrer\">https://github.com/swagger-api/swagger-ui/blob/v3.17.1/docs/usage/configuration.md#parameters</a></p>\n"}],"owner":{"account_id":10183527,"reputation":2074,"user_id":7519419,"display_name":"Vladas Maier"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4538,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":2,"score":7,"last_activity_date":1671808446,"creation_date":1572879051,"question_id":58695839,"body_markdown":"The Swagger documentation in my project has multiple groups. There is a `Docket` for each group and the endpoints (members of each group) are marked with a custom annotation. For example here is the `Docket` for **authentication** group:\r\n\r\n    @Bean\r\n    public Docket authenticationApis() {\r\n\r\n        return new Docket(DocumentationType.SWAGGER_2)\r\n                .groupName(&quot;authentication&quot;)\r\n                .useDefaultResponseMessages(false)\r\n                .select()\r\n                .apis(RequestHandlerSelectors.withMethodAnnotation(AuthenticationApiGroup.class))\r\n                .paths(PathSelectors.any())\r\n                .build()\r\n                .apiInfo(apiInfo())\r\n                .securitySchemes(Collections.singletonList(securityScheme()))\r\n                .securityContexts(Collections.singletonList(securityContext()));\r\n    }\r\n\r\nThere is also a (default) `Docket` for all available endpoints. The problem is that Swagger UI loads the most top group on default when I am calling the documentation URL `.../swagger-ui.html`. In my case it is the **authentication** group, since the groups are sorted alphabetically. The desired behaviour is that the **default** group is loaded as the default API group. How could I achieve that?\r\n\r\n[![][1]][1]\r\n\r\nI have tried to name the default `Docket` with the `.groupName(&quot;all&quot;)` so it&#39;s the most top group (**all** &lt; **authentication**) but this solution is a bit &quot;dirty&quot; and in this case the documentation would have two duplicate groups (**all** and **default**).\r\n\r\n`Springfox 2.9.2` is used in the project. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/LiS1f.jpg","title":"How to change the default group / specification in Swagger UI?","body":"<p>The Swagger documentation in my project has multiple groups. There is a <code>Docket</code> for each group and the endpoints (members of each group) are marked with a custom annotation. For example here is the <code>Docket</code> for <strong>authentication</strong> group:</p>\n\n<pre><code>@Bean\npublic Docket authenticationApis() {\n\n    return new Docket(DocumentationType.SWAGGER_2)\n            .groupName(\"authentication\")\n            .useDefaultResponseMessages(false)\n            .select()\n            .apis(RequestHandlerSelectors.withMethodAnnotation(AuthenticationApiGroup.class))\n            .paths(PathSelectors.any())\n            .build()\n            .apiInfo(apiInfo())\n            .securitySchemes(Collections.singletonList(securityScheme()))\n            .securityContexts(Collections.singletonList(securityContext()));\n}\n</code></pre>\n\n<p>There is also a (default) <code>Docket</code> for all available endpoints. The problem is that Swagger UI loads the most top group on default when I am calling the documentation URL <code>.../swagger-ui.html</code>. In my case it is the <strong>authentication</strong> group, since the groups are sorted alphabetically. The desired behaviour is that the <strong>default</strong> group is loaded as the default API group. How could I achieve that?</p>\n\n<p><a href=\"https://i.stack.imgur.com/LiS1f.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/LiS1f.jpg\" alt=\"\"></a></p>\n\n<p>I have tried to name the default <code>Docket</code> with the <code>.groupName(\"all\")</code> so it's the most top group (<strong>all</strong> &lt; <strong>authentication</strong>) but this solution is a bit \"dirty\" and in this case the documentation would have two duplicate groups (<strong>all</strong> and <strong>default</strong>).</p>\n\n<p><code>Springfox 2.9.2</code> is used in the project. </p>\n"},{"tags":["java","spring-boot","hibernate-envers","teiid"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1671906318,"post_id":74901109,"comment_id":132195926,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27336687,"reputation":1,"user_id":20848010,"display_name":"nick-cloud"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671807860,"creation_date":1671807860,"question_id":74901109,"body_markdown":"I have a problem with the integration of hibernate envers on a application that use Teiid. This one doesn&#39;t support ddl like &#39;create table TABLE_NAME_AUD&#39; or sequence generation.\r\n\r\nI tried to split entity manager and tranction manager and delegate create table to another entity manager, but the transations on entities created by virtual table doesn&#39;t work. I also tried to create tables on DB, but the insert statement generated by hibernate dosn&#39;t work because the name of column of reventity is a keyword of teiid syntax and I can&#39;t change the name of column.\r\nSo, there&#39;s a way to implements hibernate envers with Teiid propertly?\r\n\r\nThanks!","title":"How use Hibernate Envers with Teiid","body":"<p>I have a problem with the integration of hibernate envers on a application that use Teiid. This one doesn't support ddl like 'create table TABLE_NAME_AUD' or sequence generation.</p>\n<p>I tried to split entity manager and tranction manager and delegate create table to another entity manager, but the transations on entities created by virtual table doesn't work. I also tried to create tables on DB, but the insert statement generated by hibernate dosn't work because the name of column of reventity is a keyword of teiid syntax and I can't change the name of column.\nSo, there's a way to implements hibernate envers with Teiid propertly?</p>\n<p>Thanks!</p>\n"},{"tags":["java","spring","spring-boot","unit-testing","hibernate-validator"],"comments":[{"owner":{"account_id":6228391,"reputation":708,"user_id":4845935,"display_name":"dimnnv"},"score":0,"creation_date":1671796325,"post_id":74899087,"comment_id":132178052,"body_markdown":"Can you please provide the content of VehiculeFrontDto.java as well?","body":"Can you please provide the content of VehiculeFrontDto.java as well?"},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1671797899,"post_id":74899087,"comment_id":132178476,"body_markdown":"If the DTO is valid, an empty set is the only thing I&#39;d expect - there are no violations. If the test is failing, the DTO is not valid. The violation(s) contain not just the (interpolated) message, but also the constraint annotation that triggered the violation.","body":"If the DTO is valid, an empty set is the only thing I&#39;d expect - there are no violations. If the test is failing, the DTO is not valid. The violation(s) contain not just the (interpolated) message, but also the constraint annotation that triggered the violation."}],"answers":[{"tags":[],"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671807852,"creation_date":1671807852,"answer_id":74901107,"question_id":74899087,"body_markdown":"When you validate the DTO with the validator, *all* validation annotations are checked. Did you maybe forget to set the `derogatoire` property? Because your message template says `{vehicule.derogatoire.obligatoire}`. If your DTO was valid, the returned list should indeed be empty, but it is not! You probably need to append your code like this:\r\n```java\r\n        VehiculeFrontDto vehiculeFrontDto = new VehiculeFrontDto();\r\n        vehiculeFrontDto.setImmat(&quot;test&quot;);\r\n        vehiculeFrontDto.setMarque(&quot;test2&quot;);\r\n        vehiculeFrontDto.setModele(&quot;test3&quot;);\r\n        vehiculeFrontDto.setDatePremiereImmat(new Date());\r\n        vehiculeFrontDto.setSituation(SituationVehiculeEnum.CAPA.getCode());\r\n        // added line\r\n        vehiculeFrontDto.setDerogatoire(true); // or false?\r\n```\r\n\r\n","title":"Can this Set be empty when I validate it with the Validator class?","body":"<p>When you validate the DTO with the validator, <em>all</em> validation annotations are checked. Did you maybe forget to set the <code>derogatoire</code> property? Because your message template says <code>{vehicule.derogatoire.obligatoire}</code>. If your DTO was valid, the returned list should indeed be empty, but it is not! You probably need to append your code like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        VehiculeFrontDto vehiculeFrontDto = new VehiculeFrontDto();\n        vehiculeFrontDto.setImmat(&quot;test&quot;);\n        vehiculeFrontDto.setMarque(&quot;test2&quot;);\n        vehiculeFrontDto.setModele(&quot;test3&quot;);\n        vehiculeFrontDto.setDatePremiereImmat(new Date());\n        vehiculeFrontDto.setSituation(SituationVehiculeEnum.CAPA.getCode());\n        // added line\n        vehiculeFrontDto.setDerogatoire(true); // or false?\n</code></pre>\n"}],"owner":{"account_id":15922986,"reputation":280,"user_id":11489425,"display_name":"Andrew"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":128,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74901107,"answer_count":1,"score":1,"last_activity_date":1671807852,"creation_date":1671794677,"question_id":74899087,"body_markdown":"I don&#39;t really understand how the function isEmpty() can return true when it&#39;s validated with a valid DTO object.\r\nIn the anomalies variable, after I checked with the debugger, we have the following values\r\n```\r\ninterpolatedMessage: &quot;Veuillez renseigner si votre v&#233;hicule est d&#233;rogatoire ou non.&quot; (id=344)\r\nmessageTemplate: {vehicule.derogatoire.obligatoire}&quot; (id=348)\r\n```\r\n org.opentest4j.AssertionFailedError: expected: true but was: false\r\n\r\nIn this case, the test might be written in a wrong way?\r\n```\r\n @Test\r\n    public void testValidator() {\r\n\r\n        VehiculeFrontDto vehiculeFrontDto = new VehiculeFrontDto();\r\n        vehiculeFrontDto.setImmat(&quot;test&quot;);\r\n        vehiculeFrontDto.setMarque(&quot;test2&quot;);\r\n        vehiculeFrontDto.setModele(&quot;test3&quot;);\r\n        vehiculeFrontDto.setDatePremiereImmat(new Date());\r\n        vehiculeFrontDto.setSituation(SituationVehiculeEnum.CAPA.getCode());\r\n\r\n        ValidatorFactory factory = Validation.buildDefaultValidatorFactory();\r\n        Validator validator = factory.getValidator();\r\n\r\n        \r\n        Set&lt;ConstraintViolation&lt;VehiculeFrontDto&gt;&gt; anomalies = validator.validate(vehiculeFrontDto, Default.class);\r\n\t\tAssertions.assertTrue(anomalies.isEmpty());\r\n```","title":"Can this Set be empty when I validate it with the Validator class?","body":"<p>I don't really understand how the function isEmpty() can return true when it's validated with a valid DTO object.\nIn the anomalies variable, after I checked with the debugger, we have the following values</p>\n<pre><code>interpolatedMessage: &quot;Veuillez renseigner si votre véhicule est dérogatoire ou non.&quot; (id=344)\nmessageTemplate: {vehicule.derogatoire.obligatoire}&quot; (id=348)\n</code></pre>\n<p>org.opentest4j.AssertionFailedError: expected: true but was: false</p>\n<p>In this case, the test might be written in a wrong way?</p>\n<pre><code> @Test\n    public void testValidator() {\n\n        VehiculeFrontDto vehiculeFrontDto = new VehiculeFrontDto();\n        vehiculeFrontDto.setImmat(&quot;test&quot;);\n        vehiculeFrontDto.setMarque(&quot;test2&quot;);\n        vehiculeFrontDto.setModele(&quot;test3&quot;);\n        vehiculeFrontDto.setDatePremiereImmat(new Date());\n        vehiculeFrontDto.setSituation(SituationVehiculeEnum.CAPA.getCode());\n\n        ValidatorFactory factory = Validation.buildDefaultValidatorFactory();\n        Validator validator = factory.getValidator();\n\n        \n        Set&lt;ConstraintViolation&lt;VehiculeFrontDto&gt;&gt; anomalies = validator.validate(vehiculeFrontDto, Default.class);\n        Assertions.assertTrue(anomalies.isEmpty());\n</code></pre>\n"},{"tags":["java","spring","interface","spring-webflux"],"answers":[{"tags":[],"owner":{"account_id":368269,"reputation":93629,"user_id":714969,"accept_rate":86,"display_name":"Kevin Bowersox"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671807524,"creation_date":1671806870,"answer_id":74900942,"question_id":74900828,"body_markdown":"The return type and parameter type of the save method defined on the two interfaces are different, which makes them incompatible.\r\n\r\nThe `ReactiveCrudRepository` that `ReactiveElasticsearchRepository` extends, specifies that types derived from `MyPojo` can be passed to and will be returned from the [save method][1].\r\n\r\nIn your custom interface you limit the passed argument and return type strictly to `MyPojo`.  So the compiler recognizes there is no way to determine which save method is called at runtime and complains.\r\n\r\nTry adjusting the return type of your interface to the following and adjusting your implementations:\r\n\r\n```\r\npublic interface MyInterface&lt;T extends MyPojo&gt; {\r\n    Mono&lt;T&gt; save(T myPojo);\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/reactive/ReactiveCrudRepository.html#save(S)","title":"Java Spring Webflux: issue types MyInterface and org.springframework.data.repository.reactive.ReactiveCrudRepository&lt;MyPojo,String&gt; are incompatible","body":"<p>The return type and parameter type of the save method defined on the two interfaces are different, which makes them incompatible.</p>\n<p>The <code>ReactiveCrudRepository</code> that <code>ReactiveElasticsearchRepository</code> extends, specifies that types derived from <code>MyPojo</code> can be passed to and will be returned from the <a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/reactive/ReactiveCrudRepository.html#save(S)\" rel=\"nofollow noreferrer\">save method</a>.</p>\n<p>In your custom interface you limit the passed argument and return type strictly to <code>MyPojo</code>.  So the compiler recognizes there is no way to determine which save method is called at runtime and complains.</p>\n<p>Try adjusting the return type of your interface to the following and adjusting your implementations:</p>\n<pre><code>public interface MyInterface&lt;T extends MyPojo&gt; {\n    Mono&lt;T&gt; save(T myPojo);\n}\n</code></pre>\n"}],"owner":{"account_id":14482834,"reputation":3924,"user_id":10461625,"display_name":"PatPanda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74900942,"answer_count":1,"score":1,"last_activity_date":1671807813,"creation_date":1671806172,"question_id":74900828,"body_markdown":"Small question regarding Java Spring Webflux and type incompatibility issues please.\r\n\r\nI have a very simple Spring Webflux application, where I declare a common interface for all my repositories to save a pojo:\r\n\r\n```\r\npublic interface MyInterface {\r\n\r\n    Mono&lt;MyPojo&gt; save(MyPojo myPojo);\r\n\r\n}\r\n```\r\n\r\nHere are example of a concrete implementation, for instance, Redis:\r\n\r\n```\r\n@Repository(&quot;redis&quot;)\r\npublic class MyRedisRepository implements MyInterface {\r\n    private final ReactiveRedisOperations&lt;String, String&gt; reactiveRedisOperations;\r\n\r\n    public MyRedisRepository(ReactiveRedisOperations&lt;String, String&gt; reactiveRedisOperations) {\r\n        this.reactiveRedisOperations = reactiveRedisOperations;\r\n    }\r\n\r\n    @Override\r\n    public Mono&lt;MyPojo&gt; save(MyPojo myPojo) {\r\n        return reactiveRedisOperations.opsForValue().set(&quot;someKey&quot;, &quot;someValue&quot;).map(__ -&gt; myPojo);\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\nAnd now an example with Elastic.\r\n\r\n```\r\n@Repository(&quot;elastic&quot;)\r\npublic interface MyElasticRepository extends ReactiveElasticsearchRepository&lt;MyPojo, String&gt;, MyInterface {\r\n\r\n}\r\n```\r\n\r\nPlease note, the important point is that some are regular classes (like Redis) which needs to implement the save method.\r\n\r\nOn the other hand, some are interface which implements ```Reactive___Repository&lt;MyPojo, String&gt;``` (which already have a save method)\r\n\r\nWhen trying to compile, I am faced with this issue:\r\n\r\n```\r\ntypes question.MyInterface and org.springframework.data.repository.reactive.ReactiveCrudRepository&lt;question.MyPojo,java.lang.String&gt; are incompatible;\r\n```\r\n\r\nThis is a bit strange to me, as my intention is just to have all the repositories under a common ```MyInterface ```, with a save method.\r\n\r\nMay I ask why I am facing this issue, and most of all, how to resolve this (keeping the ```MyInterface ```) please?\r\n\r\nThank you","title":"Java Spring Webflux: issue types MyInterface and org.springframework.data.repository.reactive.ReactiveCrudRepository&lt;MyPojo,String&gt; are incompatible","body":"<p>Small question regarding Java Spring Webflux and type incompatibility issues please.</p>\n<p>I have a very simple Spring Webflux application, where I declare a common interface for all my repositories to save a pojo:</p>\n<pre><code>public interface MyInterface {\n\n    Mono&lt;MyPojo&gt; save(MyPojo myPojo);\n\n}\n</code></pre>\n<p>Here are example of a concrete implementation, for instance, Redis:</p>\n<pre><code>@Repository(&quot;redis&quot;)\npublic class MyRedisRepository implements MyInterface {\n    private final ReactiveRedisOperations&lt;String, String&gt; reactiveRedisOperations;\n\n    public MyRedisRepository(ReactiveRedisOperations&lt;String, String&gt; reactiveRedisOperations) {\n        this.reactiveRedisOperations = reactiveRedisOperations;\n    }\n\n    @Override\n    public Mono&lt;MyPojo&gt; save(MyPojo myPojo) {\n        return reactiveRedisOperations.opsForValue().set(&quot;someKey&quot;, &quot;someValue&quot;).map(__ -&gt; myPojo);\n    }\n\n}\n\n</code></pre>\n<p>And now an example with Elastic.</p>\n<pre><code>@Repository(&quot;elastic&quot;)\npublic interface MyElasticRepository extends ReactiveElasticsearchRepository&lt;MyPojo, String&gt;, MyInterface {\n\n}\n</code></pre>\n<p>Please note, the important point is that some are regular classes (like Redis) which needs to implement the save method.</p>\n<p>On the other hand, some are interface which implements <code>Reactive___Repository&lt;MyPojo, String&gt;</code> (which already have a save method)</p>\n<p>When trying to compile, I am faced with this issue:</p>\n<pre><code>types question.MyInterface and org.springframework.data.repository.reactive.ReactiveCrudRepository&lt;question.MyPojo,java.lang.String&gt; are incompatible;\n</code></pre>\n<p>This is a bit strange to me, as my intention is just to have all the repositories under a common <code>MyInterface </code>, with a save method.</p>\n<p>May I ask why I am facing this issue, and most of all, how to resolve this (keeping the <code>MyInterface </code>) please?</p>\n<p>Thank you</p>\n"},{"tags":["java","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":22604293,"reputation":5,"user_id":16785383,"display_name":"IMNOTIKE"},"score":0,"creation_date":1671888044,"post_id":74901061,"comment_id":132192842,"body_markdown":"I found that a couple of minutes after this post and used it. It resolved it but I got  a timeout exception so I ended up moving back to Mongo.","body":"I found that a couple of minutes after this post and used it. It resolved it but I got  a timeout exception so I ended up moving back to Mongo."},{"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"score":1,"creation_date":1672315728,"post_id":74901061,"comment_id":132265337,"body_markdown":"@IMNOTIKE with Mongo you get the timeout exception if your connection URL points to non-accessible instance. Are you sure you configured your Couchbase URL correctly?","body":"@IMNOTIKE with Mongo you get the timeout exception if your connection URL points to non-accessible instance. Are you sure you configured your Couchbase URL correctly?"}],"tags":[],"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1671807594,"creation_date":1671807594,"answer_id":74901061,"question_id":74899925,"body_markdown":"Try out the [`@EnableCouchbaseRepositories`][1] annotation, maybe even by specifying the `basePackages`. Add a configuration bean like this:\r\n```java\r\n@Configuration\r\n@EnableCouchbaseRepositories(basePackages = &quot;com.minerva.borrowings.repositories&quot;)\r\nclass CouchbaseDbConfig {\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/couchbase/docs/current/api/org/springframework/data/couchbase/repository/config/EnableCouchbaseRepositories.html","title":"Repository is declared with @Repository but bean is not recognized","body":"<p>Try out the <a href=\"https://docs.spring.io/spring-data/couchbase/docs/current/api/org/springframework/data/couchbase/repository/config/EnableCouchbaseRepositories.html\" rel=\"nofollow noreferrer\"><code>@EnableCouchbaseRepositories</code></a> annotation, maybe even by specifying the <code>basePackages</code>. Add a configuration bean like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableCouchbaseRepositories(basePackages = &quot;com.minerva.borrowings.repositories&quot;)\nclass CouchbaseDbConfig {\n}\n</code></pre>\n"}],"owner":{"account_id":22604293,"reputation":5,"user_id":16785383,"display_name":"IMNOTIKE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":123,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74901061,"answer_count":1,"score":0,"last_activity_date":1671807594,"creation_date":1671800412,"question_id":74899925,"body_markdown":"This has been happening ever since i moved from Spring Data MongoDB to Spring Data Couchbase but even deleting the project as a whole and recreating did not solve the problem.\r\n\r\nEvery time I start my application throws:\r\n\r\n```bash\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nParameter 0 of constructor in com.minerva.borrowings.services.BorrowingServiceImpl required a bean of type &#39;com.minerva.borrowings.repositories.BorrowingRepo&#39; that could not be found.\r\n\r\n\r\nAction:\r\n\r\nConsider defining a bean of type &#39;com.minerva.borrowings.repositories.BorrowingRepo&#39; in your configuration.\r\n\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nBut my file structure is:\r\n```\r\n └───com\r\n    └───minerva\r\n        └───borrowings\r\n            │   BorrowingsApplication.java\r\n            │   \r\n            ├───config\r\n            │       LoggingConfig.java\r\n            │       NotificationConfig.java\r\n            │       \r\n            ├───controllers\r\n            │       BorrowingController.java\r\n            │       \r\n            ├───entities\r\n            │       Borrowing.java\r\n            │\r\n            ├───exceptions\r\n            │       BorrowingNotFoundException.java\r\n            │       BorrowingServerErrorException.java\r\n            │       NullBodyException.java\r\n            │       NullIdException.java\r\n            │       UnknownIdTypeException.java\r\n            │\r\n            ├───repositories\r\n            │       BorrowingRepo.java\r\n            │\r\n            └───services\r\n                    BorrowingNotificationSender.java\r\n                    BorrowingService.java\r\n                    BorrowingServiceImpl.java\r\n\r\n```\r\n\r\nAnd the repository file is as such:\r\n```java\r\n\r\npackage com.minerva.borrowings.repositories;\r\n\r\nimport com.minerva.borrowings.entities.Borrowing;\r\nimport org.springframework.data.couchbase.repository.CouchbaseRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\n@Repository\r\n   public interface BorrowingRepo extends CouchbaseRepository&lt;Borrowing, String&gt; {\r\n}\r\n\r\n```\r\n\r\nAnd my BorrowingApplication.java uses `@SpringBootApplication` and does not allow to use `@ComponentScan` or `@EnableJpaRepository`\r\n\r\nMy pom.xml file is as such:\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    &lt;parent&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n        &lt;version&gt;3.0.1&lt;/version&gt;\r\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    &lt;/parent&gt;\r\n    &lt;groupId&gt;com.minerva&lt;/groupId&gt;\r\n    &lt;artifactId&gt;borrowings&lt;/artifactId&gt;\r\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;borrowings&lt;/name&gt;\r\n    &lt;description&gt;borrowings&lt;/description&gt;\r\n    &lt;properties&gt;\r\n        &lt;java.version&gt;17&lt;/java.version&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-couchbase&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\r\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;optional&gt;true&lt;/optional&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\r\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\r\n            &lt;version&gt;1.6.13&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;excludes&gt;\r\n                        &lt;exclude&gt;\r\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n                        &lt;/exclude&gt;\r\n                    &lt;/excludes&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\n\r\n\r\n\r\n\r\n\r\nI&#39;ve tried using JpaRepository and CrudRepository but the problem remains","title":"Repository is declared with @Repository but bean is not recognized","body":"<p>This has been happening ever since i moved from Spring Data MongoDB to Spring Data Couchbase but even deleting the project as a whole and recreating did not solve the problem.</p>\n<p>Every time I start my application throws:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nParameter 0 of constructor in com.minerva.borrowings.services.BorrowingServiceImpl required a bean of type 'com.minerva.borrowings.repositories.BorrowingRepo' that could not be found.\n\n\nAction:\n\nConsider defining a bean of type 'com.minerva.borrowings.repositories.BorrowingRepo' in your configuration.\n\n\nProcess finished with exit code 0\n</code></pre>\n<p>But my file structure is:</p>\n<pre><code> └───com\n    └───minerva\n        └───borrowings\n            │   BorrowingsApplication.java\n            │   \n            ├───config\n            │       LoggingConfig.java\n            │       NotificationConfig.java\n            │       \n            ├───controllers\n            │       BorrowingController.java\n            │       \n            ├───entities\n            │       Borrowing.java\n            │\n            ├───exceptions\n            │       BorrowingNotFoundException.java\n            │       BorrowingServerErrorException.java\n            │       NullBodyException.java\n            │       NullIdException.java\n            │       UnknownIdTypeException.java\n            │\n            ├───repositories\n            │       BorrowingRepo.java\n            │\n            └───services\n                    BorrowingNotificationSender.java\n                    BorrowingService.java\n                    BorrowingServiceImpl.java\n\n</code></pre>\n<p>And the repository file is as such:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\npackage com.minerva.borrowings.repositories;\n\nimport com.minerva.borrowings.entities.Borrowing;\nimport org.springframework.data.couchbase.repository.CouchbaseRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\n   public interface BorrowingRepo extends CouchbaseRepository&lt;Borrowing, String&gt; {\n}\n\n</code></pre>\n<p>And my BorrowingApplication.java uses <code>@SpringBootApplication</code> and does not allow to use <code>@ComponentScan</code> or <code>@EnableJpaRepository</code></p>\n<p>My pom.xml file is as such:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.minerva&lt;/groupId&gt;\n    &lt;artifactId&gt;borrowings&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;borrowings&lt;/name&gt;\n    &lt;description&gt;borrowings&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-couchbase&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-rabbit-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;junit&lt;/groupId&gt;\n            &lt;artifactId&gt;junit&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mockito&lt;/groupId&gt;\n            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.6.13&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>I've tried using JpaRepository and CrudRepository but the problem remains</p>\n"},{"tags":["java","apache-camel","tokenize"],"owner":{"account_id":10058979,"reputation":1712,"user_id":7436321,"accept_rate":75,"display_name":"JustLudo"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671807255,"creation_date":1671807255,"question_id":74901015,"body_markdown":"I have an apache camel route which listens for plain text formatted files on an SFTP server. These files have a clear structure but can be any lenght. I would like to be memory efficient and split them into multiple messages which can be processed individually.\r\n\r\nThe files look like this:\r\n```\r\nA1\r\nB123\r\nB456\r\nB789\r\nA2\r\nB422\r\nB873\r\nA3\r\nB863\r\nB376\r\n```\r\netc.\r\n\r\nThere are any number of A-records with a up to 30 B-records underneath. There is a clear relationship here. All the B-records belong to the nearest A-record above. The file is invalid if it does not start with an A record. In theory though, there can be A-records without matching B-records.\r\n\r\nFor now I have the following implementation:\r\n```\r\nfrom(&quot;sftp:MYsftpDetails)\r\n  .convertBodyTo(String.class)\r\n  .to(&quot;file:mydir?fileName=${file:name}&quot;)\r\n  .process(new myProcessor())\r\n```\r\n\r\nThe processor in this case holds a giant string which I can use java util&#39;s scanner to process. However, some of the files will be rather big meaning that I will soon run out of memory.\r\n\r\nI have also tried this setup:\r\n```\r\nfrom(&quot;sftp:MYsftpDetails)\r\n  .convertBodyTo(String.class)\r\n  .to(&quot;file:mydir?fileName=${file:name}&quot;)\r\n  .split()\r\n  .tokenize(&quot;^A&quot;, true)\r\n```\r\n\r\nThis setup does not work because the entire file is considered as 1 record and therefore the tokenize simply only matches with the first A record found (which happens to be on line 1).\r\n\r\n--------\r\n\r\nWhat would be the most camel way to split these files into entities that consist of 1 A-record and all its associated B-records?","title":"Apache Camel split plain text based on first character","body":"<p>I have an apache camel route which listens for plain text formatted files on an SFTP server. These files have a clear structure but can be any lenght. I would like to be memory efficient and split them into multiple messages which can be processed individually.</p>\n<p>The files look like this:</p>\n<pre><code>A1\nB123\nB456\nB789\nA2\nB422\nB873\nA3\nB863\nB376\n</code></pre>\n<p>etc.</p>\n<p>There are any number of A-records with a up to 30 B-records underneath. There is a clear relationship here. All the B-records belong to the nearest A-record above. The file is invalid if it does not start with an A record. In theory though, there can be A-records without matching B-records.</p>\n<p>For now I have the following implementation:</p>\n<pre><code>from(&quot;sftp:MYsftpDetails)\n  .convertBodyTo(String.class)\n  .to(&quot;file:mydir?fileName=${file:name}&quot;)\n  .process(new myProcessor())\n</code></pre>\n<p>The processor in this case holds a giant string which I can use java util's scanner to process. However, some of the files will be rather big meaning that I will soon run out of memory.</p>\n<p>I have also tried this setup:</p>\n<pre><code>from(&quot;sftp:MYsftpDetails)\n  .convertBodyTo(String.class)\n  .to(&quot;file:mydir?fileName=${file:name}&quot;)\n  .split()\n  .tokenize(&quot;^A&quot;, true)\n</code></pre>\n<p>This setup does not work because the entire file is considered as 1 record and therefore the tokenize simply only matches with the first A record found (which happens to be on line 1).</p>\n<hr />\n<p>What would be the most camel way to split these files into entities that consist of 1 A-record and all its associated B-records?</p>\n"},{"tags":["java","scala","sbt","aws-sdk","sbt-assembly"],"comments":[{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671694055,"post_id":74881933,"comment_id":132154423,"body_markdown":"https://stackoverflow.com/questions/74800073/drools-fat-jar-nullpointer-kieservices https://stackoverflow.com/questions/74809158/run-drools-kie-project-from-fat-jar","body":"<a href=\"https://stackoverflow.com/questions/74800073/drools-fat-jar-nullpointer-kieservices\" title=\"drools fat jar nullpointer kieservices\">stackoverflow.com/questions/74800073/&hellip;</a> <a href=\"https://stackoverflow.com/questions/74809158/run-drools-kie-project-from-fat-jar\" title=\"run drools kie project from fat jar\">stackoverflow.com/questions/74809158/&hellip;</a>"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671696914,"post_id":74881933,"comment_id":132155099,"body_markdown":"https://stackoverflow.com/questions/74879217/sbt-assembly-and-lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-wit","body":"<a href=\"https://stackoverflow.com/questions/74879217/sbt-assembly-and-lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-wit\" title=\"sbt assembly and lucene an spi class of type org apache lucene codecs codec wit\">stackoverflow.com/questions/74879217/&hellip;</a>"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671697658,"post_id":74881933,"comment_id":132155318,"body_markdown":"Please provide the reproduction i.e. `build.sbt` with dependencies (not only assembly strategy part), what code throws the errors, how you&#39;re checking that something is missing etc.","body":"Please provide the reproduction i.e. <code>build.sbt</code> with dependencies (not only assembly strategy part), what code throws the errors, how you&#39;re checking that something is missing etc."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1673667800,"post_id":74881933,"comment_id":132555521,"body_markdown":"https://stackoverflow.com/questions/25144484/sbt-assembly-deduplication-found-error","body":"<a href=\"https://stackoverflow.com/questions/25144484/sbt-assembly-deduplication-found-error\" title=\"sbt assembly deduplication found error\">stackoverflow.com/questions/25144484/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":1,"creation_date":1671837794,"post_id":74900993,"comment_id":132187548,"body_markdown":"Awesome. Congrats.","body":"Awesome. Congrats."}],"tags":[],"owner":{"account_id":10806176,"reputation":141,"user_id":7948380,"display_name":"jboges"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671807147,"creation_date":1671807147,"answer_id":74900993,"question_id":74881933,"body_markdown":"I solved this question, the issue was that the aws s3 interceptors were getting merged out, I added this line to the merge strategy and it solved the problem:\r\n```\r\ncase PathList(\r\n        &quot;software&quot;,\r\n        &quot;amazon&quot;,\r\n        &quot;awssdk&quot;,\r\n        &quot;services&quot;,\r\n        &quot;s3&quot;,\r\n        &quot;execution.interceptors&quot;,\r\n        xs @ _*\r\n        ) =&gt;\r\n      MergeStrategy.concat\r\n","title":"Missing AWS SDK execution interceptors in ExecutionInterceptorChain in Scala fat jar","body":"<p>I solved this question, the issue was that the aws s3 interceptors were getting merged out, I added this line to the merge strategy and it solved the problem:</p>\n<pre><code>case PathList(\n        &quot;software&quot;,\n        &quot;amazon&quot;,\n        &quot;awssdk&quot;,\n        &quot;services&quot;,\n        &quot;s3&quot;,\n        &quot;execution.interceptors&quot;,\n        xs @ _*\n        ) =&gt;\n      MergeStrategy.concat\n</code></pre>\n"}],"owner":{"account_id":10806176,"reputation":141,"user_id":7948380,"display_name":"jboges"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":455,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74900993,"answer_count":1,"score":0,"last_activity_date":1671807147,"creation_date":1671658059,"question_id":74881933,"body_markdown":"I&#39;m fairly new to scala / java / sbt and this is my first time debugging a discrepancy between code ran in &#39;scala&#39; through sbt and the same code ran from a compiled jar. I have some Scala code which utilizes the AWS Java SDK to make some S3 requests. When I run my code in &quot;Scala&quot; using sbt or Intellij the code succeeds as intended. If I build a fat jar using sbt and run the same code in &quot;Java&quot; using the jar, the code fails. I debugged the failure and can attribute it to missing ExecutionInterceptors in the interceptor chain:\r\n```\r\n// Logging the code ran from &#39;scala&#39;\r\n2022-12-21 14:09:33,861 [main] DEBUG software.amazon.awssdk.core.interceptor.ExecutionInterceptorChain -  Creating an interceptor chain that will apply interceptors in the following order: \r\n[software.amazon.awssdk.core.internal.interceptor.HttpChecksumRequiredInterceptor@5965844d, \r\nsoftware.amazon.awssdk.core.internal.interceptor.SyncHttpChecksumInTrailerInterceptor@6d4a65c6, \r\nsoftware.amazon.awssdk.core.internal.interceptor.HttpChecksumValidationInterceptor@aa004a0, \r\nsoftware.amazon.awssdk.core.internal.interceptor.AsyncRequestBodyHttpChecksumTrailerInterceptor@4c98a6d5, \r\nsoftware.amazon.awssdk.core.internal.interceptor.HttpChecksumInHeaderInterceptor@392a04e7, \r\nsoftware.amazon.awssdk.awscore.interceptor.HelpfulUnknownHostExceptionInterceptor@7f02251, \r\nsoftware.amazon.awssdk.awscore.eventstream.EventStreamInitialRequestInterceptor@dffa30b, \r\nsoftware.amazon.awssdk.awscore.interceptor.TraceIdExecutionInterceptor@4d8126f, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.EnableChunkedEncodingInterceptor@6d3c232f, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.DisableDoubleUrlEncodingInterceptor@6b587673, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.EnableTrailingChecksumInterceptor@1bcf67e8, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.CreateMultipartUploadRequestInterceptor@5f404594, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.GetObjectInterceptor@53692008, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.ExceptionTranslationInterceptor@7b2a3ff8, \r\nsoftware.amazon.awssdk.transfer.s3.internal.ApplyUserAgentInterceptor@1bbae752, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.AsyncChecksumValidationInterceptor@460b6d54, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.EndpointAddressInterceptor@5cf87cfd, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.SignerOverrideInterceptor@76075d65, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.GetBucketPolicyInterceptor@3a4ba480, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.PutObjectInterceptor@27b71f50, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.SyncChecksumValidationInterceptor@383790cf, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.DecodeUrlEncodedResponseInterceptor@74971ed9, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.CreateBucketInterceptor@131fcb6f, \r\nsoftware.amazon.awssdk.services.s3.internal.handlers.CopySourceInterceptor@ccd1bc3]\r\n```\r\n```\r\n// Logging the same code ran from &#39;java&#39;\r\n2022-12-21 14:15:06,281 [main] DEBUG software.amazon.awssdk.core.interceptor.ExecutionInterceptorChain -  Creating an interceptor chain that will apply interceptors in the following order: \r\n[software.amazon.awssdk.core.internal.interceptor.HttpChecksumRequiredInterceptor@147e2ae7, \r\nsoftware.amazon.awssdk.core.internal.interceptor.SyncHttpChecksumInTrailerInterceptor@448c8166, \r\noftware.amazon.awssdk.core.internal.interceptor.HttpChecksumValidationInterceptor@4470fbd6, \r\nsoftware.amazon.awssdk.core.internal.interceptor.AsyncRequestBodyHttpChecksumTrailerInterceptor@15d49048, \r\nsoftware.amazon.awssdk.core.internal.interceptor.HttpChecksumInHeaderInterceptor@7098b907, \r\nsoftware.amazon.awssdk.awscore.interceptor.HelpfulUnknownHostExceptionInterceptor@503f91c3, \r\nsoftware.amazon.awssdk.awscore.eventstream.EventStreamInitialRequestInterceptor@13526e59, \r\nsoftware.amazon.awssdk.awscore.interceptor.TraceIdExecutionInterceptor@2235eaab, \r\nsoftware.amazon.awssdk.transfer.s3.internal.ApplyUserAgentInterceptor@17503f6b]\r\n```\r\nAll of the interceptors of the type `software.amazon.awssdk.services.s3.internal.handlers` are missing from the code ran in the jar. \r\n\r\nI&#39;m not sure if this is directly related. My `build.sbt` has the following merge strategies:\r\n```\r\n  assembly / assemblyMergeStrategy := {\r\n    // Don&#39;t discard Geotools META-INF service files\r\n    case PathList(&quot;META-INF&quot;, xs @ _*) =&gt;\r\n      (xs map { _.toLowerCase }) match {\r\n        case (&quot;manifest.mf&quot; :: Nil) | (&quot;index.list&quot; :: Nil) | (&quot;dependencies&quot; :: Nil) =&gt;\r\n          MergeStrategy.discard\r\n        case ps @ (x :: xs) if ps.last.endsWith(&quot;.sf&quot;) || ps.last.endsWith(&quot;.dsa&quot;) =&gt;\r\n          MergeStrategy.discard\r\n        case &quot;plexus&quot; :: xs =&gt;\r\n          MergeStrategy.discard\r\n        case &quot;services&quot; :: xs =&gt;\r\n          MergeStrategy.filterDistinctLines\r\n        case (&quot;spring.schemas&quot; :: Nil) | (&quot;spring.handlers&quot; :: Nil) =&gt;\r\n          MergeStrategy.filterDistinctLines\r\n        case _ =&gt; MergeStrategy.discard\r\n      }\r\n    case PathList(&quot;reference.conf&quot;, xs @ _*) =&gt; MergeStrategy.concat\r\n    case PathList(&quot;version.conf&quot;, xs @ _*)   =&gt; MergeStrategy.concat\r\n    case x                                   =&gt; MergeStrategy.first\r\n  },\r\n```\r\nWhen debugging compiling my jar with `sbt assembly` I noticed this line:\r\n`[debug] Merging &#39;software/amazon/awssdk/services/s3/execution.interceptors&#39; with strategy &#39;first&#39;\r\n`\r\nIs this related to why i&#39;m missing the interceptors? or might there be some other cause for missing these handlers, such as a missing dependency? ","title":"Missing AWS SDK execution interceptors in ExecutionInterceptorChain in Scala fat jar","body":"<p>I'm fairly new to scala / java / sbt and this is my first time debugging a discrepancy between code ran in 'scala' through sbt and the same code ran from a compiled jar. I have some Scala code which utilizes the AWS Java SDK to make some S3 requests. When I run my code in &quot;Scala&quot; using sbt or Intellij the code succeeds as intended. If I build a fat jar using sbt and run the same code in &quot;Java&quot; using the jar, the code fails. I debugged the failure and can attribute it to missing ExecutionInterceptors in the interceptor chain:</p>\n<pre><code>// Logging the code ran from 'scala'\n2022-12-21 14:09:33,861 [main] DEBUG software.amazon.awssdk.core.interceptor.ExecutionInterceptorChain -  Creating an interceptor chain that will apply interceptors in the following order: \n[software.amazon.awssdk.core.internal.interceptor.HttpChecksumRequiredInterceptor@5965844d, \nsoftware.amazon.awssdk.core.internal.interceptor.SyncHttpChecksumInTrailerInterceptor@6d4a65c6, \nsoftware.amazon.awssdk.core.internal.interceptor.HttpChecksumValidationInterceptor@aa004a0, \nsoftware.amazon.awssdk.core.internal.interceptor.AsyncRequestBodyHttpChecksumTrailerInterceptor@4c98a6d5, \nsoftware.amazon.awssdk.core.internal.interceptor.HttpChecksumInHeaderInterceptor@392a04e7, \nsoftware.amazon.awssdk.awscore.interceptor.HelpfulUnknownHostExceptionInterceptor@7f02251, \nsoftware.amazon.awssdk.awscore.eventstream.EventStreamInitialRequestInterceptor@dffa30b, \nsoftware.amazon.awssdk.awscore.interceptor.TraceIdExecutionInterceptor@4d8126f, \nsoftware.amazon.awssdk.services.s3.internal.handlers.EnableChunkedEncodingInterceptor@6d3c232f, \nsoftware.amazon.awssdk.services.s3.internal.handlers.DisableDoubleUrlEncodingInterceptor@6b587673, \nsoftware.amazon.awssdk.services.s3.internal.handlers.EnableTrailingChecksumInterceptor@1bcf67e8, \nsoftware.amazon.awssdk.services.s3.internal.handlers.CreateMultipartUploadRequestInterceptor@5f404594, \nsoftware.amazon.awssdk.services.s3.internal.handlers.GetObjectInterceptor@53692008, \nsoftware.amazon.awssdk.services.s3.internal.handlers.ExceptionTranslationInterceptor@7b2a3ff8, \nsoftware.amazon.awssdk.transfer.s3.internal.ApplyUserAgentInterceptor@1bbae752, \nsoftware.amazon.awssdk.services.s3.internal.handlers.AsyncChecksumValidationInterceptor@460b6d54, \nsoftware.amazon.awssdk.services.s3.internal.handlers.EndpointAddressInterceptor@5cf87cfd, \nsoftware.amazon.awssdk.services.s3.internal.handlers.SignerOverrideInterceptor@76075d65, \nsoftware.amazon.awssdk.services.s3.internal.handlers.GetBucketPolicyInterceptor@3a4ba480, \nsoftware.amazon.awssdk.services.s3.internal.handlers.PutObjectInterceptor@27b71f50, \nsoftware.amazon.awssdk.services.s3.internal.handlers.SyncChecksumValidationInterceptor@383790cf, \nsoftware.amazon.awssdk.services.s3.internal.handlers.DecodeUrlEncodedResponseInterceptor@74971ed9, \nsoftware.amazon.awssdk.services.s3.internal.handlers.CreateBucketInterceptor@131fcb6f, \nsoftware.amazon.awssdk.services.s3.internal.handlers.CopySourceInterceptor@ccd1bc3]\n</code></pre>\n<pre><code>// Logging the same code ran from 'java'\n2022-12-21 14:15:06,281 [main] DEBUG software.amazon.awssdk.core.interceptor.ExecutionInterceptorChain -  Creating an interceptor chain that will apply interceptors in the following order: \n[software.amazon.awssdk.core.internal.interceptor.HttpChecksumRequiredInterceptor@147e2ae7, \nsoftware.amazon.awssdk.core.internal.interceptor.SyncHttpChecksumInTrailerInterceptor@448c8166, \noftware.amazon.awssdk.core.internal.interceptor.HttpChecksumValidationInterceptor@4470fbd6, \nsoftware.amazon.awssdk.core.internal.interceptor.AsyncRequestBodyHttpChecksumTrailerInterceptor@15d49048, \nsoftware.amazon.awssdk.core.internal.interceptor.HttpChecksumInHeaderInterceptor@7098b907, \nsoftware.amazon.awssdk.awscore.interceptor.HelpfulUnknownHostExceptionInterceptor@503f91c3, \nsoftware.amazon.awssdk.awscore.eventstream.EventStreamInitialRequestInterceptor@13526e59, \nsoftware.amazon.awssdk.awscore.interceptor.TraceIdExecutionInterceptor@2235eaab, \nsoftware.amazon.awssdk.transfer.s3.internal.ApplyUserAgentInterceptor@17503f6b]\n</code></pre>\n<p>All of the interceptors of the type <code>software.amazon.awssdk.services.s3.internal.handlers</code> are missing from the code ran in the jar.</p>\n<p>I'm not sure if this is directly related. My <code>build.sbt</code> has the following merge strategies:</p>\n<pre><code>  assembly / assemblyMergeStrategy := {\n    // Don't discard Geotools META-INF service files\n    case PathList(&quot;META-INF&quot;, xs @ _*) =&gt;\n      (xs map { _.toLowerCase }) match {\n        case (&quot;manifest.mf&quot; :: Nil) | (&quot;index.list&quot; :: Nil) | (&quot;dependencies&quot; :: Nil) =&gt;\n          MergeStrategy.discard\n        case ps @ (x :: xs) if ps.last.endsWith(&quot;.sf&quot;) || ps.last.endsWith(&quot;.dsa&quot;) =&gt;\n          MergeStrategy.discard\n        case &quot;plexus&quot; :: xs =&gt;\n          MergeStrategy.discard\n        case &quot;services&quot; :: xs =&gt;\n          MergeStrategy.filterDistinctLines\n        case (&quot;spring.schemas&quot; :: Nil) | (&quot;spring.handlers&quot; :: Nil) =&gt;\n          MergeStrategy.filterDistinctLines\n        case _ =&gt; MergeStrategy.discard\n      }\n    case PathList(&quot;reference.conf&quot;, xs @ _*) =&gt; MergeStrategy.concat\n    case PathList(&quot;version.conf&quot;, xs @ _*)   =&gt; MergeStrategy.concat\n    case x                                   =&gt; MergeStrategy.first\n  },\n</code></pre>\n<p>When debugging compiling my jar with <code>sbt assembly</code> I noticed this line:\n<code>[debug] Merging 'software/amazon/awssdk/services/s3/execution.interceptors' with strategy 'first' </code>\nIs this related to why i'm missing the interceptors? or might there be some other cause for missing these handlers, such as a missing dependency?</p>\n"},{"tags":["java","linux","amazon-web-services","spring-boot"],"answers":[{"comments":[{"owner":{"account_id":977201,"reputation":303,"user_id":997943,"accept_rate":20,"display_name":"user997943"},"score":0,"creation_date":1671662754,"post_id":74882442,"comment_id":132149857,"body_markdown":"I&#39;m not the most experienced in this stuff, but my understanding is: the curl requests are entirely over http (so no certificates involved), from the same host (so no firewall involved). hosts file is identical. Can you expand the point on nics?","body":"I&#39;m not the most experienced in this stuff, but my understanding is: the curl requests are entirely over http (so no certificates involved), from the same host (so no firewall involved). hosts file is identical. Can you expand the point on nics?"},{"owner":{"account_id":117556,"reputation":3752,"user_id":307795,"accept_rate":43,"display_name":"DaShaun"},"score":0,"creation_date":1671773828,"post_id":74882442,"comment_id":132173346,"body_markdown":"I use a program call `netstat` which is available with most flavors of Linux, to check which ports are open and see how they are bound to NICs.\n\n`netstat -lnp` is my default here, and it shows me the `Local Address` which is listening and on which port.  So my list may include `127.0.0.1:443` or and external IP like `100.82.80.36:443` or both, or `0.0.0.0:443`, which represents all of the NICs available.","body":"I use a program call <code>netstat</code> which is available with most flavors of Linux, to check which ports are open and see how they are bound to NICs.  <code>netstat -lnp</code> is my default here, and it shows me the <code>Local Address</code> which is listening and on which port.  So my list may include <code>127.0.0.1:443</code> or and external IP like <code>100.82.80.36:443</code> or both, or <code>0.0.0.0:443</code>, which represents all of the NICs available."}],"tags":[],"owner":{"account_id":117556,"reputation":3752,"user_id":307795,"accept_rate":43,"display_name":"DaShaun"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671662321,"creation_date":1671662321,"answer_id":74882442,"question_id":74882397,"body_markdown":"It could be so many different things.  Here is where I would look off the top of my head.\r\n\r\n- Firewall\r\n- /etc/hosts\r\n- Certificates\r\n- Look at the nics, are the apps bound the same (0.0.0.0)","title":"Spring-boot redirects differently when hitting localhost vs host ip","body":"<p>It could be so many different things.  Here is where I would look off the top of my head.</p>\n<ul>\n<li>Firewall</li>\n<li>/etc/hosts</li>\n<li>Certificates</li>\n<li>Look at the nics, are the apps bound the same (0.0.0.0)</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":977201,"reputation":303,"user_id":997943,"accept_rate":20,"display_name":"user997943"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671807077,"creation_date":1671807077,"answer_id":74900986,"question_id":74882397,"body_markdown":"The issue was the IP difference between Host1&#39;s VPC (172.31.x.x) and Host2&#39;s VPC (172.32.x.x)\r\n\r\nThe default for ```server.tomcat.internal-proxies``` matched 172.31.\\*, but not 172.32.\\* - causing ```X-Forwarded``` headers to be ignored in Host 2. Updating the property fixed it.\r\n\r\n**Default**\r\n&gt; server.tomcat.internal-proxies=10\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}|192\\\\.168\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}|169\\\\.254\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}|127\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}|172\\\\.1[6-9]{1}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}|172\\\\.2[0-9]{1}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}|172\\\\.3[0-1]{1}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\r\n\r\n**Updated**\r\n&gt;server.tomcat.internal-proxies=(127\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3})|(172.32.\\\\d{1,3}\\\\.\\\\d{1,3})\r\n\r\nA few things I came across which were helpful: there&#39;s a handy properties reference [here][1]. Also, all properties actually in use (including defaults) can be checked via the actuator link in your app ```/actuator/configprops.json```\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/1.2.0.RC2/reference/html/common-application-properties.html","title":"Spring-boot redirects differently when hitting localhost vs host ip","body":"<p>The issue was the IP difference between Host1's VPC (172.31.x.x) and Host2's VPC (172.32.x.x)</p>\n<p>The default for <code>server.tomcat.internal-proxies</code> matched 172.31.*, but not 172.32.* - causing <code>X-Forwarded</code> headers to be ignored in Host 2. Updating the property fixed it.</p>\n<p><strong>Default</strong></p>\n<blockquote>\n<p>server.tomcat.internal-proxies=10\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|192\\.168\\.\\d{1,3}\\.\\d{1,3}|169\\.254\\.\\d{1,3}\\.\\d{1,3}|127\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}|172\\.1[6-9]{1}\\.\\d{1,3}\\.\\d{1,3}|172\\.2[0-9]{1}\\.\\d{1,3}\\.\\d{1,3}|172\\.3[0-1]{1}\\.\\d{1,3}\\.\\d{1,3}</p>\n</blockquote>\n<p><strong>Updated</strong></p>\n<blockquote>\n<p>server.tomcat.internal-proxies=(127\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3})|(172.32.\\d{1,3}\\.\\d{1,3})</p>\n</blockquote>\n<p>A few things I came across which were helpful: there's a handy properties reference <a href=\"https://docs.spring.io/spring-boot/docs/1.2.0.RC2/reference/html/common-application-properties.html\" rel=\"nofollow noreferrer\">here</a>. Also, all properties actually in use (including defaults) can be checked via the actuator link in your app <code>/actuator/configprops.json</code></p>\n"}],"owner":{"account_id":977201,"reputation":303,"user_id":997943,"accept_rate":20,"display_name":"user997943"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74900986,"answer_count":2,"score":0,"last_activity_date":1671807077,"creation_date":1671661907,"question_id":74882397,"body_markdown":"I have a Java 8 Spring Boot (1.5.13) web server, behind an AWS Application Load Balancer. The ALB performs TLS termination. \r\n\r\nThe web server redirects users for various reasons (for eg. to a login page). As described in [docs](https://docs.spring.io/spring-boot/docs/1.5.13.RELEASE/reference/html/howto-embedded-servlet-containers.html), I&#39;ve set ```server.use-forward-headers``` to ```true``` in ```application.properties``` so the redirection happens correctly to the external (https) url, using the ```X-Forwarded-Proto``` and ```Host``` headers. \r\n\r\nThis setup works on Host 1, but a (near) identical setup doesn&#39;t work on Host 2. On Host 2, I&#39;ve narrowed it down to the below. Things work if I curl ```localhost```, but not if I curl ```172.32.1.1``` (host 2&#39;s ip).\r\n\r\nBoth commands below were run on Host 2. Any ideas on what could be causing the difference in response? (http vs https)\r\n\r\n```\r\n[ec2-user@ip-172-32-1-1 ~]$ curl -v localhost:8080 -H &quot;X-Forwarded-Proto: https&quot; -H &quot;X-Forwarded-Port: 443&quot; -H &quot;Host: example.com&quot;\r\n*   Trying 127.0.0.1:8080...\r\n* Connected to localhost (127.0.0.1) port 8080 (#0)\r\n&gt; GET / HTTP/1.1\r\n&gt; Host: example.com\r\n&gt; User-Agent: curl/7.79.1\r\n&gt; Accept: */*\r\n&gt; X-Forwarded-Proto: https\r\n&gt; X-Forwarded-Port: 443\r\n&gt; \r\n* Mark bundle as not supporting multiuse\r\n&lt; HTTP/1.1 302 \r\n&lt; Set-Cookie: SESSION=6a9d14f0-07f6-4f73-ae31-8232f2d9de5d; Path=/; Secure; HttpOnly\r\n&lt; Location: https://example.com/login\r\n&lt; Content-Length: 0\r\n&lt; Date: Wed, 21 Dec 2022 21:43:28 GMT\r\n&lt; \r\n* Connection #0 to host localhost left intact\r\n```\r\n\r\n```\r\n[ec2-user@ip-172-32-1-1 ~]$ curl -v 172.32.1.1:8080 -H &quot;X-Forwarded-Proto: https&quot; -H &quot;X-Forwarded-Port: 443&quot; -H &quot;Host: example.com&quot;\r\n*   Trying 172.32.1.1:8080...\r\n* Connected to 172.32.1.1 (172.32.1.1) port 8080 (#0)\r\n&gt; GET / HTTP/1.1\r\n&gt; Host: example.com\r\n&gt; User-Agent: curl/7.79.1\r\n&gt; Accept: */*\r\n&gt; X-Forwarded-Proto: https\r\n&gt; X-Forwarded-Port: 443\r\n&gt; \r\n* Mark bundle as not supporting multiuse\r\n&lt; HTTP/1.1 302 \r\n&lt; Set-Cookie: SESSION=cbf4800a-15a8-460a-a3db-d6e3c21c046e; Path=/; HttpOnly\r\n&lt; Location: http://example.com/login\r\n&lt; Content-Length: 0\r\n&lt; Date: Wed, 21 Dec 2022 21:42:50 GMT\r\n&lt; \r\n* Connection #0 to host 172.32.1.1 left intact\r\n```\r\n\r\nHost 1 and Host 2 are using the same VM Image, and WAR file. On Host 1, the 2 commands above both respond with https as expected.","title":"Spring-boot redirects differently when hitting localhost vs host ip","body":"<p>I have a Java 8 Spring Boot (1.5.13) web server, behind an AWS Application Load Balancer. The ALB performs TLS termination.</p>\n<p>The web server redirects users for various reasons (for eg. to a login page). As described in <a href=\"https://docs.spring.io/spring-boot/docs/1.5.13.RELEASE/reference/html/howto-embedded-servlet-containers.html\" rel=\"nofollow noreferrer\">docs</a>, I've set <code>server.use-forward-headers</code> to <code>true</code> in <code>application.properties</code> so the redirection happens correctly to the external (https) url, using the <code>X-Forwarded-Proto</code> and <code>Host</code> headers.</p>\n<p>This setup works on Host 1, but a (near) identical setup doesn't work on Host 2. On Host 2, I've narrowed it down to the below. Things work if I curl <code>localhost</code>, but not if I curl <code>172.32.1.1</code> (host 2's ip).</p>\n<p>Both commands below were run on Host 2. Any ideas on what could be causing the difference in response? (http vs https)</p>\n<pre><code>[ec2-user@ip-172-32-1-1 ~]$ curl -v localhost:8080 -H &quot;X-Forwarded-Proto: https&quot; -H &quot;X-Forwarded-Port: 443&quot; -H &quot;Host: example.com&quot;\n*   Trying 127.0.0.1:8080...\n* Connected to localhost (127.0.0.1) port 8080 (#0)\n&gt; GET / HTTP/1.1\n&gt; Host: example.com\n&gt; User-Agent: curl/7.79.1\n&gt; Accept: */*\n&gt; X-Forwarded-Proto: https\n&gt; X-Forwarded-Port: 443\n&gt; \n* Mark bundle as not supporting multiuse\n&lt; HTTP/1.1 302 \n&lt; Set-Cookie: SESSION=6a9d14f0-07f6-4f73-ae31-8232f2d9de5d; Path=/; Secure; HttpOnly\n&lt; Location: https://example.com/login\n&lt; Content-Length: 0\n&lt; Date: Wed, 21 Dec 2022 21:43:28 GMT\n&lt; \n* Connection #0 to host localhost left intact\n</code></pre>\n<pre><code>[ec2-user@ip-172-32-1-1 ~]$ curl -v 172.32.1.1:8080 -H &quot;X-Forwarded-Proto: https&quot; -H &quot;X-Forwarded-Port: 443&quot; -H &quot;Host: example.com&quot;\n*   Trying 172.32.1.1:8080...\n* Connected to 172.32.1.1 (172.32.1.1) port 8080 (#0)\n&gt; GET / HTTP/1.1\n&gt; Host: example.com\n&gt; User-Agent: curl/7.79.1\n&gt; Accept: */*\n&gt; X-Forwarded-Proto: https\n&gt; X-Forwarded-Port: 443\n&gt; \n* Mark bundle as not supporting multiuse\n&lt; HTTP/1.1 302 \n&lt; Set-Cookie: SESSION=cbf4800a-15a8-460a-a3db-d6e3c21c046e; Path=/; HttpOnly\n&lt; Location: http://example.com/login\n&lt; Content-Length: 0\n&lt; Date: Wed, 21 Dec 2022 21:42:50 GMT\n&lt; \n* Connection #0 to host 172.32.1.1 left intact\n</code></pre>\n<p>Host 1 and Host 2 are using the same VM Image, and WAR file. On Host 1, the 2 commands above both respond with https as expected.</p>\n"},{"tags":["java","spring","validation","vaadin"],"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1671360820,"post_id":74838699,"comment_id":132079160,"body_markdown":"If you have clearly different things for each state of your FSM, I&#39;d use different DTOs with according validation for each state. It&#39;s very unlikely, that not other things occur and you will most likely want &quot;four&quot; different forms (e.g. different order, visibility, options inside fields, ...) - OR do your own validation via the Binder.","body":"If you have clearly different things for each state of your FSM, I&#39;d use different DTOs with according validation for each state. It&#39;s very unlikely, that not other things occur and you will most likely want &quot;four&quot; different forms (e.g. different order, visibility, options inside fields, ...) - OR do your own validation via the Binder."}],"owner":{"account_id":19533773,"reputation":1,"user_id":14292965,"display_name":"Ismael Matos"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":136,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671807075,"creation_date":1671328932,"question_id":74838699,"body_markdown":"I&#39;ve got an Entity class with lots of fields, including a **status** to represent the progression of an object thru its life cycle, say &quot;INITIAL&quot;, &quot;READY&quot;, &quot;SUSPENDED&quot; and &quot;CLOSED&quot;. While at the &quot;INITIAL&quot; stage, all fields can be changed, a few can be changed while the object is &quot;SUSPENDED&quot;, very few fields can be changed while in the &quot;READY&quot; status, and once &quot;CLOSED&quot;, nothing more can be changed for that object.\r\n\r\nSo, *setName(@NotBlank String name)* is fine, but that is not enough, as as the name can only be changed when *status* is NOT CLOSED, but *setCurrency(@NotBlank String currency)* can only be applied when *status* is INITIAL, or SUSPENDED if other conditions are also valid.  Thus, I need varying validations applied as pre-conditions to the **set...** method execution, not as Class-level validation. \r\n\r\nThere is more. The status is implemented as an **enum**, with a Finite State Machine defining the valid transitions from one state to another. And at each state transition, a number of business rules need to be applied to validate the data surrounding the core entity. So instead of using **setStatus(Status newStatus)**, I&#39;m using **setStatusReady()**, **setStatusSuspended()**...\r\n\r\n\r\n\r\n\r\n\r\n\r\nFrom all that I&#39;ve found, most tutorials, articles, best practices and solutions cater for the syntactical validations at field or class level and cross-parameter method validations, while I&#39;d **need access to whole Bean instance at the time of the method execution**.\r\n\r\nSo far, the &quot;best&quot; solution is from OVAL (see https://sebthom.github.io/oval/USERGUIDE.html#using-validate_with_method), but that framework is not longer under development and OVal is not JSR303/JSR380 compliant.\r\n\r\nSo, what are your suggestions?\r\n\r\nThank you all.\r\n\r\n*** EDITED *** In response to CFRICK, thank you\r\n\r\nFirst, I don&#39;t mean any disregard or disrespect for anybody&#39;s recommendations. I&#39;m genuinely trying to find a &quot;better&quot; solution for my situation.\r\n\r\nVaadin handles JSR303/JSR380 validation rather nicely at the front-end.\r\n\r\nThe validation still has to be done on the back-end, ideally under the JSR303/JSR380 umbrella.  So, moving anything to the front-end is just replicating the validation to make a nice and consistent presentation of the errors when they happen.\r\n\r\nI like the concept of entities taking care of their status, not being just data skeletons. I could repeat some &quot;validation&quot; to the front-end at Binder (in vaadin) and still make full use of the vaadin great features. Enable and disable field editing depending on the entity status is fairly easy to do.  \r\n\r\nI will try again with the suggested multiple DTOs option for the front-end.  My first attempt just turn ugly to handle in a single view, or make multiple views of the &quot;same thing&quot; at the presentation level.\r\n\r\nI still like the simplicity of the OVal solution, but that will force me into &quot;hacking&quot; the Validator/ValidatorFactory or use more advanced features of Spring/Hibernate, which I need to research.  \r\n\r\nPerhaps, the access to the root bean during the method validation will come as a new feature in future releases of Spring/Hibernate validation.","title":"Question about complex Java Beans Validation with Spring Boot and Vaadin in the front-end","body":"<p>I've got an Entity class with lots of fields, including a <strong>status</strong> to represent the progression of an object thru its life cycle, say &quot;INITIAL&quot;, &quot;READY&quot;, &quot;SUSPENDED&quot; and &quot;CLOSED&quot;. While at the &quot;INITIAL&quot; stage, all fields can be changed, a few can be changed while the object is &quot;SUSPENDED&quot;, very few fields can be changed while in the &quot;READY&quot; status, and once &quot;CLOSED&quot;, nothing more can be changed for that object.</p>\n<p>So, <em>setName(@NotBlank String name)</em> is fine, but that is not enough, as as the name can only be changed when <em>status</em> is NOT CLOSED, but <em>setCurrency(@NotBlank String currency)</em> can only be applied when <em>status</em> is INITIAL, or SUSPENDED if other conditions are also valid.  Thus, I need varying validations applied as pre-conditions to the <strong>set...</strong> method execution, not as Class-level validation.</p>\n<p>There is more. The status is implemented as an <strong>enum</strong>, with a Finite State Machine defining the valid transitions from one state to another. And at each state transition, a number of business rules need to be applied to validate the data surrounding the core entity. So instead of using <strong>setStatus(Status newStatus)</strong>, I'm using <strong>setStatusReady()</strong>, <strong>setStatusSuspended()</strong>...</p>\n<p>From all that I've found, most tutorials, articles, best practices and solutions cater for the syntactical validations at field or class level and cross-parameter method validations, while I'd <strong>need access to whole Bean instance at the time of the method execution</strong>.</p>\n<p>So far, the &quot;best&quot; solution is from OVAL (see <a href=\"https://sebthom.github.io/oval/USERGUIDE.html#using-validate_with_method\" rel=\"nofollow noreferrer\">https://sebthom.github.io/oval/USERGUIDE.html#using-validate_with_method</a>), but that framework is not longer under development and OVal is not JSR303/JSR380 compliant.</p>\n<p>So, what are your suggestions?</p>\n<p>Thank you all.</p>\n<p>*** EDITED *** In response to CFRICK, thank you</p>\n<p>First, I don't mean any disregard or disrespect for anybody's recommendations. I'm genuinely trying to find a &quot;better&quot; solution for my situation.</p>\n<p>Vaadin handles JSR303/JSR380 validation rather nicely at the front-end.</p>\n<p>The validation still has to be done on the back-end, ideally under the JSR303/JSR380 umbrella.  So, moving anything to the front-end is just replicating the validation to make a nice and consistent presentation of the errors when they happen.</p>\n<p>I like the concept of entities taking care of their status, not being just data skeletons. I could repeat some &quot;validation&quot; to the front-end at Binder (in vaadin) and still make full use of the vaadin great features. Enable and disable field editing depending on the entity status is fairly easy to do.</p>\n<p>I will try again with the suggested multiple DTOs option for the front-end.  My first attempt just turn ugly to handle in a single view, or make multiple views of the &quot;same thing&quot; at the presentation level.</p>\n<p>I still like the simplicity of the OVal solution, but that will force me into &quot;hacking&quot; the Validator/ValidatorFactory or use more advanced features of Spring/Hibernate, which I need to research.</p>\n<p>Perhaps, the access to the root bean during the method validation will come as a new feature in future releases of Spring/Hibernate validation.</p>\n"},{"tags":["java","security","jframe"],"owner":{"account_id":8950298,"reputation":95,"user_id":6676512,"display_name":"Methark"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671806861,"creation_date":1671806861,"question_id":74900941,"body_markdown":"I&#39;m developing a virtual keyboard and would like to know what is the best approach to hide it from print-screen and screen recording.\r\n\r\nI&#39;ve found examples while researching the web, but the results are for Android - even if I put JFrame as a must have on the search query. Mostly, what I have found is something like: `getWindow().WindowManager.LayoutParams.FLAG_SECURE` - but like I said, it doesn&#39;t seems to be applicable for a desktop environment Java application (I think).\r\n\r\nThanks in advance for your for the help!\r\n\r\nAll my attempts were relying on &quot;half measures&quot; like creating a ClipboardMonitor (java.util.Observable, etc) - but this just gets me to avoid print-screens by flushing the clipboard.\r\n\r\nWhat I&#39;m aiming for is to hide the JFrame or make it black if a user tries to capture the screen with a print-screen command, a snip or screen record application.","title":"Is there a method to hide a JFrame from Print-Screen or Screen Recording?","body":"<p>I'm developing a virtual keyboard and would like to know what is the best approach to hide it from print-screen and screen recording.</p>\n<p>I've found examples while researching the web, but the results are for Android - even if I put JFrame as a must have on the search query. Mostly, what I have found is something like: <code>getWindow().WindowManager.LayoutParams.FLAG_SECURE</code> - but like I said, it doesn't seems to be applicable for a desktop environment Java application (I think).</p>\n<p>Thanks in advance for your for the help!</p>\n<p>All my attempts were relying on &quot;half measures&quot; like creating a ClipboardMonitor (java.util.Observable, etc) - but this just gets me to avoid print-screens by flushing the clipboard.</p>\n<p>What I'm aiming for is to hide the JFrame or make it black if a user tries to capture the screen with a print-screen command, a snip or screen record application.</p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa","dto"],"answers":[{"comments":[{"owner":{"account_id":22407403,"reputation":67,"user_id":16616719,"display_name":"Siddhant Bhandari"},"score":0,"creation_date":1671527798,"post_id":74860767,"comment_id":132113193,"body_markdown":"Yes I am aware of this way. But I am using a DTO interface not an POJO entity class","body":"Yes I am aware of this way. But I am using a DTO interface not an POJO entity class"},{"owner":{"account_id":12226275,"reputation":102,"user_id":8923778,"display_name":"Bacem W."},"score":0,"creation_date":1671529197,"post_id":74860767,"comment_id":132113582,"body_markdown":"yes I know, but this code should be in DAO (Entity) before the mappring to DTO,and then you should change your \n\nString getFreelanceInvoiceId(); \nto \nList&lt;String&gt; getFreelanceInvoiceId();","body":"yes I know, but this code should be in DAO (Entity) before the mappring to DTO,and then you should change your   String getFreelanceInvoiceId();  to  List&lt;String&gt; getFreelanceInvoiceId();"},{"owner":{"account_id":22407403,"reputation":67,"user_id":16616719,"display_name":"Siddhant Bhandari"},"score":0,"creation_date":1671683469,"post_id":74860767,"comment_id":132152686,"body_markdown":"how that can be done? Any code snippet?","body":"how that can be done? Any code snippet?"},{"owner":{"account_id":12226275,"reputation":102,"user_id":8923778,"display_name":"Bacem W."},"score":0,"creation_date":1671806868,"post_id":74860767,"comment_id":132180850,"body_markdown":"yes, I added the response above","body":"yes, I added the response above"},{"owner":{"account_id":12226275,"reputation":102,"user_id":8923778,"display_name":"Bacem W."},"score":0,"creation_date":1672733512,"post_id":74860767,"comment_id":132335908,"body_markdown":"I didn&#39;t got you feedback about the given response ? does it cover the needs ? thank you in advance","body":"I didn&#39;t got you feedback about the given response ? does it cover the needs ? thank you in advance"}],"tags":[],"owner":{"account_id":12226275,"reputation":102,"user_id":8923778,"display_name":"Bacem W."},"comment_count":5,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671527658,"creation_date":1671527658,"answer_id":74860767,"question_id":74859111,"body_markdown":"You can use @Converter from JPA (implemented by hibernate also)\r\n\r\n```\r\n@Converter\r\npublic class List2StringConveter implements AttributeConverter&lt;List&lt;String&gt;, String&gt; {\r\n\r\n    @Override\r\n    public String convertToDatabaseColumn(List&lt;String&gt; attribute) {\r\n        if (attribute == null || attribute.isEmpty()) {\r\n            return &quot;&quot;;\r\n        }\r\n        return StringUtils.join(attribute, &quot;,&quot;);\r\n    }\r\n\r\n    @Override\r\n    public List&lt;String&gt; convertToEntityAttribute(String dbData) {\r\n        if (dbData == null || dbData.trim().length() == 0) {\r\n            return new ArrayList&lt;String&gt;();\r\n        }\r\n\r\n        String[] data = dbData.split(&quot;,&quot;);\r\n        return Arrays.asList(data);\r\n    }\r\n}\r\n```\r\nAnd references it in the pojo class as below \r\n\r\n```\r\n@Column(name=&quot;freeLanceInvoiceId&quot;)\r\n@Convert(converter = List2StringConveter.class)\r\nprivate List&lt;String&gt; tags=new ArrayList&lt;&gt;();","title":"Retrieve JSON Array or JSON Object using JPA Projections &amp; DTO interface","body":"<p>You can use @Converter from JPA (implemented by hibernate also)</p>\n<pre><code>@Converter\npublic class List2StringConveter implements AttributeConverter&lt;List&lt;String&gt;, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(List&lt;String&gt; attribute) {\n        if (attribute == null || attribute.isEmpty()) {\n            return &quot;&quot;;\n        }\n        return StringUtils.join(attribute, &quot;,&quot;);\n    }\n\n    @Override\n    public List&lt;String&gt; convertToEntityAttribute(String dbData) {\n        if (dbData == null || dbData.trim().length() == 0) {\n            return new ArrayList&lt;String&gt;();\n        }\n\n        String[] data = dbData.split(&quot;,&quot;);\n        return Arrays.asList(data);\n    }\n}\n</code></pre>\n<p>And references it in the pojo class as below</p>\n<pre><code>@Column(name=&quot;freeLanceInvoiceId&quot;)\n@Convert(converter = List2StringConveter.class)\nprivate List&lt;String&gt; tags=new ArrayList&lt;&gt;();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12226275,"reputation":102,"user_id":8923778,"display_name":"Bacem W."},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671806744,"creation_date":1671806744,"answer_id":74900919,"question_id":74859111,"body_markdown":"Basically I have list of names separated by camma (;),\r\n \r\n```\r\nCREATE TABLE familynames (\r\n\tid int4 NOT NULL DEFAULT nextval(&#39;family_id_seq&#39;::regclass),\r\n\tnames varchar NULL\r\n);\r\n\r\nINSERT INTO familynames (id, names) VALUES(1, &#39;Animalia;Arthropoda;Pancrustacea;Hexapoda&#39;);\r\n```\r\nThe converter : \r\n\r\n```\r\n@Converter\r\npublic class NameConverter implements AttributeConverter&lt;List&lt;String&gt;, String&gt; {\r\n\r\n\t@Override\r\n\tpublic List&lt;String&gt; convertToEntityAttribute(String attribute) {\r\n\t\tif (attribute == null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tList&lt;String&gt; namesList = new ArrayList&lt;String&gt;(Arrays.asList(attribute.split(&quot;;&quot;)));\r\n\r\n\t\treturn namesList;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String convertToDatabaseColumn(List&lt;String&gt; namesList) {\r\n\t\tif (namesList == null || namesList.size() == 0) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tString result = namesList.stream().collect( Collectors.joining( &quot;;&quot; ) );\r\n\r\n\t\treturn result;\r\n\t}\r\n}\r\n```\r\n\r\n\r\n\r\nAn entity that map the sql table \r\n\r\n```\r\n@Entity\r\n@Table(name = &quot;familynames&quot;)\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\npublic class FamilyNames implements Serializable {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\r\n    private Long id;\r\n\r\n\t@Convert(converter = NameConverter.class, attributeName = &quot;names&quot;)\r\n\tprivate List&lt;String&gt; names;\r\n}\r\n\r\n```\r\nAn interface for projection \r\n\r\n```\r\npublic interface FamilyNamesDto {\r\n\t\r\n    Integer getId();\r\n    List&lt;String&gt; getNames();\r\n}\r\n```\r\nThe repository that ensure the selection and the projection \r\n\r\n```\r\n@Repository\r\npublic interface FamilyNamesRepository extends JpaRepository&lt;FamilyNames, Long&gt; {\r\n\r\n\t/** @return the whole elements of mapped  elements as dto */\r\n\tList&lt;FamilyNamesDto&gt; findAllProjectedBy();\r\n}\r\n\r\n```\r\nHow to autowire it \r\n\r\n```\r\n@Autowired \r\nprivate FamilyNamesRepository familyNamesRepository;\r\n```\r\n\r\nhow to call repository within any service \r\n\r\n```\r\nList&lt;FamilyNamesDto&gt; fs = familyNamesRepository.findAllProjectedBy();\r\n```\t\r\n\r\nresults : \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/41XQw.png","title":"Retrieve JSON Array or JSON Object using JPA Projections &amp; DTO interface","body":"<p>Basically I have list of names separated by camma (;),</p>\n<pre><code>CREATE TABLE familynames (\n    id int4 NOT NULL DEFAULT nextval('family_id_seq'::regclass),\n    names varchar NULL\n);\n\nINSERT INTO familynames (id, names) VALUES(1, 'Animalia;Arthropoda;Pancrustacea;Hexapoda');\n</code></pre>\n<p>The converter :</p>\n<pre><code>@Converter\npublic class NameConverter implements AttributeConverter&lt;List&lt;String&gt;, String&gt; {\n\n    @Override\n    public List&lt;String&gt; convertToEntityAttribute(String attribute) {\n        if (attribute == null) {\n            return null;\n        }\n\n        List&lt;String&gt; namesList = new ArrayList&lt;String&gt;(Arrays.asList(attribute.split(&quot;;&quot;)));\n\n        return namesList;\n    }\n\n    @Override\n    public String convertToDatabaseColumn(List&lt;String&gt; namesList) {\n        if (namesList == null || namesList.size() == 0) {\n            return null;\n        }\n        String result = namesList.stream().collect( Collectors.joining( &quot;;&quot; ) );\n\n        return result;\n    }\n}\n</code></pre>\n<p>An entity that map the sql table</p>\n<pre><code>@Entity\n@Table(name = &quot;familynames&quot;)\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\npublic class FamilyNames implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy=GenerationType.IDENTITY)\n    private Long id;\n\n    @Convert(converter = NameConverter.class, attributeName = &quot;names&quot;)\n    private List&lt;String&gt; names;\n}\n\n</code></pre>\n<p>An interface for projection</p>\n<pre><code>public interface FamilyNamesDto {\n    \n    Integer getId();\n    List&lt;String&gt; getNames();\n}\n</code></pre>\n<p>The repository that ensure the selection and the projection</p>\n<pre><code>@Repository\npublic interface FamilyNamesRepository extends JpaRepository&lt;FamilyNames, Long&gt; {\n\n    /** @return the whole elements of mapped  elements as dto */\n    List&lt;FamilyNamesDto&gt; findAllProjectedBy();\n}\n\n</code></pre>\n<p>How to autowire it</p>\n<pre><code>@Autowired \nprivate FamilyNamesRepository familyNamesRepository;\n</code></pre>\n<p>how to call repository within any service</p>\n<pre><code>List&lt;FamilyNamesDto&gt; fs = familyNamesRepository.findAllProjectedBy();\n</code></pre>\n<p>results :</p>\n<p><a href=\"https://i.stack.imgur.com/41XQw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/41XQw.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":22407403,"reputation":67,"user_id":16616719,"display_name":"Siddhant Bhandari"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1169,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1671806744,"creation_date":1671516771,"question_id":74859111,"body_markdown":"I have a DTO interface which fetches data from different tables using joins. I have made a DTO interface with the abstract getter methods something like this.\r\n\r\n        public interface HRJobsDTO {\r\n    \r\n        String getEditorName();\r\n    \r\n        String getEditorId();\r\n    \r\n        String getBillingMonth();\r\n    \r\n        Integer getEditorWordCount();\r\n    \r\n        Integer getJobCount();\r\n    \r\n        Integer getEmployeeGrade();\r\n    \r\n        Float getGrossPayableAmount();\r\n    \r\n        Float getJobBillingRate();\r\n    \r\n        Float getTaxDeduction();\r\n    \r\n        Float getTaxDeductionAmount();\r\n    \r\n        Float getNetPayableAmount();\r\n    \r\n        String getInvoiceStatus();\r\n    \r\n        String getFreelanceInvoiceId();\r\n    }\r\n\r\n\r\nIn this interface my getFreelanceInvoiceId(); method returns a JSON Array using json_arrayagg function of mysql. I changed the datatype to String, String[] and Arraylist but it returns something like this in my response\r\n\r\n    &quot;freelanceInvoiceId&quot;: &quot;[\\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/2022121-95540\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/2022121-95540\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/20221215-53817\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/20221215-53817\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/20221215-53817\\&quot;]&quot;\r\n\r\n\r\nIs there any way to return only array with exclusion of backslashes? \r\n\r\n\r\n","title":"Retrieve JSON Array or JSON Object using JPA Projections &amp; DTO interface","body":"<p>I have a DTO interface which fetches data from different tables using joins. I have made a DTO interface with the abstract getter methods something like this.</p>\n<pre><code>    public interface HRJobsDTO {\n\n    String getEditorName();\n\n    String getEditorId();\n\n    String getBillingMonth();\n\n    Integer getEditorWordCount();\n\n    Integer getJobCount();\n\n    Integer getEmployeeGrade();\n\n    Float getGrossPayableAmount();\n\n    Float getJobBillingRate();\n\n    Float getTaxDeduction();\n\n    Float getTaxDeductionAmount();\n\n    Float getNetPayableAmount();\n\n    String getInvoiceStatus();\n\n    String getFreelanceInvoiceId();\n}\n</code></pre>\n<p>In this interface my getFreelanceInvoiceId(); method returns a JSON Array using json_arrayagg function of mysql. I changed the datatype to String, String[] and Arraylist but it returns something like this in my response</p>\n<pre><code>&quot;freelanceInvoiceId&quot;: &quot;[\\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/2022121-95540\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/2022121-95540\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/20221215-53817\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/20221215-53817\\&quot;, \\&quot;4af9e342-065b-4594-9f4f-a408d5db9819/20221215-53817\\&quot;]&quot;\n</code></pre>\n<p>Is there any way to return only array with exclusion of backslashes?</p>\n"},{"tags":["java","amazon-ecs","scheduledexecutorservice"],"answers":[{"comments":[{"owner":{"account_id":10909625,"reputation":3249,"user_id":8019439,"accept_rate":58,"display_name":"Almas Abdrazak"},"score":0,"creation_date":1671816972,"post_id":74900909,"comment_id":132183554,"body_markdown":"thanks a lot , I will discuss the even bridge with my customer. I guess adding a listener within java app for ready state will be the easier solution","body":"thanks a lot , I will discuss the even bridge with my customer. I guess adding a listener within java app for ready state will be the easier solution"}],"tags":[],"owner":{"account_id":7501,"reputation":187982,"user_id":13070,"accept_rate":90,"display_name":"Mark B"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671806684,"creation_date":1671806684,"answer_id":74900909,"question_id":74894222,"body_markdown":"&gt; 1. Runtime.addShutdownHook - doesn&#39;t work because proprietary java framework that we use require us to boot it up with a shell script\r\n&gt; (PID 1 is given to shell rather than java app)\r\n\r\n[You could capture][1] `SIGTERM` in your shell script, and trigger a shutdown of the Java app from that. However I don&#39;t think that happens until right before the container is killed, which isn&#39;t going to help anything in your situation. All the Java shutdown hook would do is allow you to close some things out right before your container is killed, it wouldn&#39;t trigger until the very end of your deployment process, where it seems like you need it to run as soon as the deployment starts.\r\n\r\n&gt; 2. Self written cluster healthcheck - self written code that sends heartbeat messages from the instance and saves them in Dynamo, once\r\n&gt; instance B doesn&#39;t work , instance A checks that last hearbeat\r\n&gt; timestamp and if it&#39;s longer than 30 seconds then starts a job\r\n\r\nIf you were using [Quartz scheduler][2] you could use a [database backend][3] for the scheduler and it would handle this sort of concurrency thing automatically. It sounds like you are using some sort of proprietary in-house scheduler solution, so if you want a database-backed job concurrency solution like this you will have to build it yourself, and DynamoDB is a good option.\r\n\r\n\r\n&gt; 3. Event bridge - ecs docs says that it publishes events to event bridge. But my customer doesn&#39;t want to pay for another service\r\n\r\n[AWS Free Tier:][4] &quot;All state change events published by AWS services by default are free.&quot;  \r\n\r\nThere is no additional cost for using EventBridge if you are only using it for AWS service events. You are literally already using EventBridge in the sense that AWS is already publishing all those ECS service events to EventBridge. You just aren&#39;t listening to them currently.\r\n\r\n\r\n  [1]: https://aws.amazon.com/blogs/containers/graceful-shutdowns-with-ecs/\r\n  [2]: https://www.quartz-scheduler.org/\r\n  [3]: https://github.com/quartz-scheduler/quartz/wiki/How-to-Setup-Databases\r\n  [4]: https://aws.amazon.com/eventbridge/pricing/","title":"Start scheduled job inside of a Java app deployed in ECS fargate after previous task will be shutdown","body":"<blockquote>\n<ol>\n<li>Runtime.addShutdownHook - doesn't work because proprietary java framework that we use require us to boot it up with a shell script\n(PID 1 is given to shell rather than java app)</li>\n</ol>\n</blockquote>\n<p><a href=\"https://aws.amazon.com/blogs/containers/graceful-shutdowns-with-ecs/\" rel=\"nofollow noreferrer\">You could capture</a> <code>SIGTERM</code> in your shell script, and trigger a shutdown of the Java app from that. However I don't think that happens until right before the container is killed, which isn't going to help anything in your situation. All the Java shutdown hook would do is allow you to close some things out right before your container is killed, it wouldn't trigger until the very end of your deployment process, where it seems like you need it to run as soon as the deployment starts.</p>\n<blockquote>\n<ol start=\"2\">\n<li>Self written cluster healthcheck - self written code that sends heartbeat messages from the instance and saves them in Dynamo, once\ninstance B doesn't work , instance A checks that last hearbeat\ntimestamp and if it's longer than 30 seconds then starts a job</li>\n</ol>\n</blockquote>\n<p>If you were using <a href=\"https://www.quartz-scheduler.org/\" rel=\"nofollow noreferrer\">Quartz scheduler</a> you could use a <a href=\"https://github.com/quartz-scheduler/quartz/wiki/How-to-Setup-Databases\" rel=\"nofollow noreferrer\">database backend</a> for the scheduler and it would handle this sort of concurrency thing automatically. It sounds like you are using some sort of proprietary in-house scheduler solution, so if you want a database-backed job concurrency solution like this you will have to build it yourself, and DynamoDB is a good option.</p>\n<blockquote>\n<ol start=\"3\">\n<li>Event bridge - ecs docs says that it publishes events to event bridge. But my customer doesn't want to pay for another service</li>\n</ol>\n</blockquote>\n<p><a href=\"https://aws.amazon.com/eventbridge/pricing/\" rel=\"nofollow noreferrer\">AWS Free Tier:</a> &quot;All state change events published by AWS services by default are free.&quot;</p>\n<p>There is no additional cost for using EventBridge if you are only using it for AWS service events. You are literally already using EventBridge in the sense that AWS is already publishing all those ECS service events to EventBridge. You just aren't listening to them currently.</p>\n"}],"owner":{"account_id":10909625,"reputation":3249,"user_id":8019439,"accept_rate":58,"display_name":"Almas Abdrazak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":350,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74900909,"answer_count":1,"score":2,"last_activity_date":1671806684,"creation_date":1671746082,"question_id":74894222,"body_markdown":"Good day everyone. I have a problem with my java app deployed in AWS ECS Fargate instance. With our configuration the fargate instance is running all the time and during the redeploy , ECS spawn a new instance(instance A) waits for it to reach steady state and then shuts down the old instance (instance B)\r\nThe problem is that the main method of these instances start a scheduled job. And because instance A reaches the steady state , the scheduled job is executed by both instances for a short period of time until B will be shut down.\r\nHow to make sure instance A starts a job only when B doesn&#39;t work ? \r\nThe java instance is dockerized \r\nSo far I tried \r\n1. `Runtime.addShutdownHook` - doesn&#39;t work because proprietary java framework that we use require us to boot it up with a shell script (PID 1 is given to shell rather than java app)\r\n2. `Self written cluster healthcheck` - self written code that sends heartbeat messages from the instance and saves them in Dynamo, once instance B doesn&#39;t work , instance A checks that last hearbeat timestamp and if it&#39;s longer than 30 seconds then starts a job \r\n3. `Event bridge` - ecs docs says that it publishes events to event bridge. But my customer doesn&#39;t want to pay for another service\r\n\r\nAll suggestions will be appreciated ! ","title":"Start scheduled job inside of a Java app deployed in ECS fargate after previous task will be shutdown","body":"<p>Good day everyone. I have a problem with my java app deployed in AWS ECS Fargate instance. With our configuration the fargate instance is running all the time and during the redeploy , ECS spawn a new instance(instance A) waits for it to reach steady state and then shuts down the old instance (instance B)\nThe problem is that the main method of these instances start a scheduled job. And because instance A reaches the steady state , the scheduled job is executed by both instances for a short period of time until B will be shut down.\nHow to make sure instance A starts a job only when B doesn't work ?\nThe java instance is dockerized\nSo far I tried</p>\n<ol>\n<li><code>Runtime.addShutdownHook</code> - doesn't work because proprietary java framework that we use require us to boot it up with a shell script (PID 1 is given to shell rather than java app)</li>\n<li><code>Self written cluster healthcheck</code> - self written code that sends heartbeat messages from the instance and saves them in Dynamo, once instance B doesn't work , instance A checks that last hearbeat timestamp and if it's longer than 30 seconds then starts a job</li>\n<li><code>Event bridge</code> - ecs docs says that it publishes events to event bridge. But my customer doesn't want to pay for another service</li>\n</ol>\n<p>All suggestions will be appreciated !</p>\n"},{"tags":["java","fonts","lwjgl"],"owner":{"display_name":"user20597717"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":82,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671805734,"creation_date":1671805484,"question_id":74900707,"body_markdown":"I want to use sub-pixel rendering for my font. If that is not possible, I at least want to disable anti-aliasing. How could I do so?\r\nI am using LWJGL 3.3.1.\r\nThis is my font renderer:\r\n```\r\npublic class FontRenderer\r\n{\r\n    private final STBTTBakedChar.Buffer characterData;\r\n    private final STBTTFontinfo fontinfo;\r\n    private final int size, textureID;\r\n    private final float ascent;\r\n\r\n    public FontRenderer(File font, int size)\r\n    {\r\n        this.size = size;\r\n        this.characterData = STBTTBakedChar.malloc(96);\r\n        this.fontinfo = STBTTFontinfo.create();\r\n        int textureID = 0;\r\n        float ascent = 0;\r\n\r\n        try\r\n        {\r\n            ByteBuffer fontData = this.loadFileToByteBuffer(font);\r\n            ByteBuffer textureData = BufferUtils.createByteBuffer(262144);\r\n            assert fontData != null;\r\n            stbtt_BakeFontBitmap(fontData, size, textureData, 512, 512, 32, this.characterData);\r\n\r\n            try (MemoryStack memoryStack = MemoryStack.stackPush())\r\n            {\r\n                stbtt_InitFont(this.fontinfo, fontData);\r\n                float pixelScale = stbtt_ScaleForPixelHeight(this.fontinfo, size);\r\n                IntBuffer ascentBuffer = memoryStack.mallocInt(1);\r\n                IntBuffer descentBuffer = memoryStack.mallocInt(1);\r\n                IntBuffer lineGapBuffer = memoryStack.mallocInt(1);\r\n                stbtt_GetFontVMetrics(this.fontinfo, ascentBuffer, descentBuffer, lineGapBuffer);\r\n                ascent = ascentBuffer.get(0) * pixelScale;\r\n            }\r\n\r\n            textureID = glGenTextures();\r\n            glBindTexture(GL_TEXTURE_2D, textureID);\r\n            glTexImage2D(GL_TEXTURE_2D, 0, GL_ALPHA, 512, 512, 0, GL_ALPHA, GL_UNSIGNED_BYTE, textureData);\r\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\r\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\r\n            glBindTexture(GL_TEXTURE_2D, 0);\r\n        }\r\n\r\n        catch (Exception e)\r\n        {\r\n            ;\r\n        }\r\n\r\n        this.ascent = ascent;\r\n        this.textureID = textureID;\r\n    }\r\n\r\n    public int getSize()\r\n    {\r\n        return this.size;\r\n    }\r\n```\r\n\r\nCreates a new ByteBuffer:\r\n```\r\n    private ByteBuffer loadFileToByteBuffer(File file)\r\n    {\r\n        try (FileInputStream fileInputStream = new FileInputStream(file); FileChannel fileChannel = fileInputStream.getChannel())\r\n        {\r\n            return fileChannel.map(FileChannel.MapMode.READ_ONLY, 0, fileChannel.size());\r\n        }\r\n\r\n        catch (Exception e)\r\n        {\r\n            return null;\r\n        }\r\n    }\r\n```\r\n\r\nDraws the text:\r\n```\r\n    public void drawString(String text, float x, float y, Color color)\r\n    {\r\n        y += this.ascent;\r\n\r\n        try (MemoryStack memoryStack = MemoryStack.stackPush())\r\n        {\r\n            FloatBuffer xBuffer = memoryStack.floats(x);\r\n            FloatBuffer yBuffer = memoryStack.floats(y);\r\n            STBTTAlignedQuad stbttAlignedQuad = STBTTAlignedQuad.malloc(memoryStack);\r\n            glEnable(GL_ALPHA);\r\n            glEnable(GL_BLEND);\r\n            GL14.glBlendFuncSeparate(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA, 1, 0);\r\n            int colorRGB = color.getRGB();\r\n            float alpha = (float)((colorRGB &gt;&gt; 24) &amp; 0xFF) / 255;\r\n            float red = (float)((colorRGB &gt;&gt; 16) &amp; 0xFF) / 255;\r\n            float green = (float)((colorRGB &gt;&gt; 8) &amp; 0xFF) / 255;\r\n            float blue = (float)((colorRGB) &amp; 0xFF) / 255;\r\n            glColor4f(red, green, blue, alpha);\r\n            glEnable(GL_TEXTURE_2D);\r\n            glBindTexture(GL_TEXTURE_2D, this.textureID);\r\n            glBegin(GL_TRIANGLES);\r\n\r\n            for (int i = 0; i &lt; text.length(); i++)\r\n            {\r\n                int codePoint = text.codePointAt(i);\r\n\r\n                if (codePoint == &#39;\\n&#39;)\r\n                {\r\n                    xBuffer.put(0, x);\r\n                    yBuffer.put(0, y += this.ascent);\r\n                    continue;\r\n                }\r\n\r\n                else if (codePoint &lt; 32 || codePoint &gt; 127)\r\n                {\r\n                    continue;\r\n                }\r\n\r\n                stbtt_GetBakedQuad(this.characterData, 512, 512, codePoint - 32, xBuffer, yBuffer, stbttAlignedQuad, true);\r\n                glTexCoord2f(stbttAlignedQuad.s0(), stbttAlignedQuad.t0());\r\n                glVertex2f(stbttAlignedQuad.x0(), stbttAlignedQuad.y0());\r\n                glTexCoord2f(stbttAlignedQuad.s0(), stbttAlignedQuad.t1());\r\n                glVertex2f(stbttAlignedQuad.x0(), stbttAlignedQuad.y1());\r\n                glTexCoord2f(stbttAlignedQuad.s1(), stbttAlignedQuad.t1());\r\n                glVertex2f(stbttAlignedQuad.x1(), stbttAlignedQuad.y1());\r\n                glTexCoord2f(stbttAlignedQuad.s1(), stbttAlignedQuad.t1());\r\n                glVertex2f(stbttAlignedQuad.x1(), stbttAlignedQuad.y1());\r\n                glTexCoord2f(stbttAlignedQuad.s1(), stbttAlignedQuad.t0());\r\n                glVertex2f(stbttAlignedQuad.x1(), stbttAlignedQuad.y0());\r\n                glTexCoord2f(stbttAlignedQuad.s0(), stbttAlignedQuad.t0());\r\n                glVertex2f(stbttAlignedQuad.x0(), stbttAlignedQuad.y0());\r\n            }\r\n\r\n            glEnd();\r\n            glDisable(GL_TEXTURE_2D);\r\n            glBindTexture(GL_TEXTURE_2D, 0);\r\n            glColor4f(1, 1, 1, 1);\r\n            glDisable(GL_BLEND);\r\n            glDisable(GL_ALPHA);\r\n        }\r\n    }\r\n```","title":"Is it possible to use sub-pixel rendering, or no anti-alias for STB fonts?","body":"<p>I want to use sub-pixel rendering for my font. If that is not possible, I at least want to disable anti-aliasing. How could I do so?\nI am using LWJGL 3.3.1.\nThis is my font renderer:</p>\n<pre><code>public class FontRenderer\n{\n    private final STBTTBakedChar.Buffer characterData;\n    private final STBTTFontinfo fontinfo;\n    private final int size, textureID;\n    private final float ascent;\n\n    public FontRenderer(File font, int size)\n    {\n        this.size = size;\n        this.characterData = STBTTBakedChar.malloc(96);\n        this.fontinfo = STBTTFontinfo.create();\n        int textureID = 0;\n        float ascent = 0;\n\n        try\n        {\n            ByteBuffer fontData = this.loadFileToByteBuffer(font);\n            ByteBuffer textureData = BufferUtils.createByteBuffer(262144);\n            assert fontData != null;\n            stbtt_BakeFontBitmap(fontData, size, textureData, 512, 512, 32, this.characterData);\n\n            try (MemoryStack memoryStack = MemoryStack.stackPush())\n            {\n                stbtt_InitFont(this.fontinfo, fontData);\n                float pixelScale = stbtt_ScaleForPixelHeight(this.fontinfo, size);\n                IntBuffer ascentBuffer = memoryStack.mallocInt(1);\n                IntBuffer descentBuffer = memoryStack.mallocInt(1);\n                IntBuffer lineGapBuffer = memoryStack.mallocInt(1);\n                stbtt_GetFontVMetrics(this.fontinfo, ascentBuffer, descentBuffer, lineGapBuffer);\n                ascent = ascentBuffer.get(0) * pixelScale;\n            }\n\n            textureID = glGenTextures();\n            glBindTexture(GL_TEXTURE_2D, textureID);\n            glTexImage2D(GL_TEXTURE_2D, 0, GL_ALPHA, 512, 512, 0, GL_ALPHA, GL_UNSIGNED_BYTE, textureData);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);\n            glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);\n            glBindTexture(GL_TEXTURE_2D, 0);\n        }\n\n        catch (Exception e)\n        {\n            ;\n        }\n\n        this.ascent = ascent;\n        this.textureID = textureID;\n    }\n\n    public int getSize()\n    {\n        return this.size;\n    }\n</code></pre>\n<p>Creates a new ByteBuffer:</p>\n<pre><code>    private ByteBuffer loadFileToByteBuffer(File file)\n    {\n        try (FileInputStream fileInputStream = new FileInputStream(file); FileChannel fileChannel = fileInputStream.getChannel())\n        {\n            return fileChannel.map(FileChannel.MapMode.READ_ONLY, 0, fileChannel.size());\n        }\n\n        catch (Exception e)\n        {\n            return null;\n        }\n    }\n</code></pre>\n<p>Draws the text:</p>\n<pre><code>    public void drawString(String text, float x, float y, Color color)\n    {\n        y += this.ascent;\n\n        try (MemoryStack memoryStack = MemoryStack.stackPush())\n        {\n            FloatBuffer xBuffer = memoryStack.floats(x);\n            FloatBuffer yBuffer = memoryStack.floats(y);\n            STBTTAlignedQuad stbttAlignedQuad = STBTTAlignedQuad.malloc(memoryStack);\n            glEnable(GL_ALPHA);\n            glEnable(GL_BLEND);\n            GL14.glBlendFuncSeparate(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA, 1, 0);\n            int colorRGB = color.getRGB();\n            float alpha = (float)((colorRGB &gt;&gt; 24) &amp; 0xFF) / 255;\n            float red = (float)((colorRGB &gt;&gt; 16) &amp; 0xFF) / 255;\n            float green = (float)((colorRGB &gt;&gt; 8) &amp; 0xFF) / 255;\n            float blue = (float)((colorRGB) &amp; 0xFF) / 255;\n            glColor4f(red, green, blue, alpha);\n            glEnable(GL_TEXTURE_2D);\n            glBindTexture(GL_TEXTURE_2D, this.textureID);\n            glBegin(GL_TRIANGLES);\n\n            for (int i = 0; i &lt; text.length(); i++)\n            {\n                int codePoint = text.codePointAt(i);\n\n                if (codePoint == '\\n')\n                {\n                    xBuffer.put(0, x);\n                    yBuffer.put(0, y += this.ascent);\n                    continue;\n                }\n\n                else if (codePoint &lt; 32 || codePoint &gt; 127)\n                {\n                    continue;\n                }\n\n                stbtt_GetBakedQuad(this.characterData, 512, 512, codePoint - 32, xBuffer, yBuffer, stbttAlignedQuad, true);\n                glTexCoord2f(stbttAlignedQuad.s0(), stbttAlignedQuad.t0());\n                glVertex2f(stbttAlignedQuad.x0(), stbttAlignedQuad.y0());\n                glTexCoord2f(stbttAlignedQuad.s0(), stbttAlignedQuad.t1());\n                glVertex2f(stbttAlignedQuad.x0(), stbttAlignedQuad.y1());\n                glTexCoord2f(stbttAlignedQuad.s1(), stbttAlignedQuad.t1());\n                glVertex2f(stbttAlignedQuad.x1(), stbttAlignedQuad.y1());\n                glTexCoord2f(stbttAlignedQuad.s1(), stbttAlignedQuad.t1());\n                glVertex2f(stbttAlignedQuad.x1(), stbttAlignedQuad.y1());\n                glTexCoord2f(stbttAlignedQuad.s1(), stbttAlignedQuad.t0());\n                glVertex2f(stbttAlignedQuad.x1(), stbttAlignedQuad.y0());\n                glTexCoord2f(stbttAlignedQuad.s0(), stbttAlignedQuad.t0());\n                glVertex2f(stbttAlignedQuad.x0(), stbttAlignedQuad.y0());\n            }\n\n            glEnd();\n            glDisable(GL_TEXTURE_2D);\n            glBindTexture(GL_TEXTURE_2D, 0);\n            glColor4f(1, 1, 1, 1);\n            glDisable(GL_BLEND);\n            glDisable(GL_ALPHA);\n        }\n    }\n</code></pre>\n"},{"tags":["java","rundeck"],"comments":[{"owner":{"account_id":22003198,"reputation":49,"user_id":16274614,"display_name":"sigfried"},"score":0,"creation_date":1671792937,"post_id":74898777,"comment_id":132177189,"body_markdown":"I also tried appending --testauth but error remains the same","body":"I also tried appending --testauth but error remains the same"}],"answers":[{"comments":[{"owner":{"account_id":22003198,"reputation":49,"user_id":16274614,"display_name":"sigfried"},"score":0,"creation_date":1671807392,"post_id":74900532,"comment_id":132181001,"body_markdown":"I believe I&#39;m tired. I need rest. really. It even took me few seconds to figure your response out, I really needed to read the (jass =! jaas) statement you wrote.  thanks again! Now I get the &quot;You have no authorized access to projects.&quot; message but that is another story, I will create an ACL. Anyway... would you know the answer to my second question too by any chance?","body":"I believe I&#39;m tired. I need rest. really. It even took me few seconds to figure your response out, I really needed to read the (jass =! jaas) statement you wrote.  thanks again! Now I get the &quot;You have no authorized access to projects.&quot; message but that is another story, I will create an ACL. Anyway... would you know the answer to my second question too by any chance?"},{"owner":{"account_id":14433269,"reputation":3831,"user_id":10426011,"display_name":"MegaDrive68k"},"score":1,"creation_date":1671809896,"post_id":74900532,"comment_id":132181696,"body_markdown":"Check this approach: https://groups.google.com/g/rundeck-discuss/c/Vxdfzz0rqzs/m/tl0__Yp4BAAJ","body":"Check this approach: <a href=\"https://groups.google.com/g/rundeck-discuss/c/Vxdfzz0rqzs/m/tl0__Yp4BAAJ\" rel=\"nofollow noreferrer\">groups.google.com/g/rundeck-discuss/c/Vxdfzz0rqzs/m/&hellip;</a>"}],"tags":[],"owner":{"account_id":14433269,"reputation":3831,"user_id":10426011,"display_name":"MegaDrive68k"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1671805269,"creation_date":1671804329,"answer_id":74900532,"question_id":74898777,"body_markdown":"Your multiauth config file is saved as `jass-multiauth.conf` but the launcher script is looking for `jaas-multiauth.conf` (jass =! jaas). That is the reason of &quot;No such file or directory&quot; error. Rename the file as `jaas-multiauth.conf` and relaunch the Rundeck service.","title":"Rundeck config file not found when service starts up","body":"<p>Your multiauth config file is saved as <code>jass-multiauth.conf</code> but the launcher script is looking for <code>jaas-multiauth.conf</code> (jass =! jaas). That is the reason of &quot;No such file or directory&quot; error. Rename the file as <code>jaas-multiauth.conf</code> and relaunch the Rundeck service.</p>\n"}],"owner":{"account_id":22003198,"reputation":49,"user_id":16274614,"display_name":"sigfried"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":279,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74900532,"answer_count":1,"score":0,"last_activity_date":1671805269,"creation_date":1671792509,"question_id":74898777,"body_markdown":"I have installed RD 4.8 CE on a Windows 2019 server + MariaDB. The application is up and I can login with the admin account. Service is Windows integrated.\r\n\r\nI&#39;m trying now to allow AD users to login and perform activities. I haven&#39;t found much documentation on how to configure RD on Windows. So I&#39;m grabbing from here and there. So far I have done the following:\r\n\r\nCreated a file called jass-multiauth.conf in server/config/ folder as listed below:\r\n\r\n    multiauth {\r\n        com.dtolabs.rundeck.jetty.jaas.JettyCombinedLdapLoginModule sufficient\r\n        debug=&quot;true&quot;\r\n        contextFactory=&quot;com.sun.jndi.ldap.LdapCtxFactory&quot;\r\n        providerUrl=&quot;ldaps://xxxxxxxxxxx:636&quot;\r\n        bindDn=&quot;CN=xxxxxx,OU=Service Accounts,OU=Admin Users and Groups,OU=xxx,DC=xxx,DC=xxx,DC=xxx&quot;\r\n        bindPassword=&quot;x$xx&lt;x&gt;xx&quot;\r\n        authenticationMethod=&quot;simple&quot;\r\n        forceBindingLogin=&quot;true&quot;\r\n        userBaseDn=&quot;OU=Admin Users,OU=Admin Users and Groups,OU=xxx,DC=xxx,DC=xxx,DC=xxx&quot;\r\n        userRdnAttribute=&quot;sAMAccountName&quot;\r\n        userIdAttribute=&quot;sAMAccountName&quot;\r\n        userPasswordAttribute=&quot;unicodePwd&quot;\r\n        userObjectClass=&quot;user&quot;\r\n        roleBaseDn=&quot;OU=Groups,OU=Admin Users and Groups,OU=xxxx,DC=xxx,DC=xxx,DC=xxx&quot;\r\n        roleNameAttribute=&quot;cn&quot;\r\n        roleMemberAttribute=&quot;member&quot;\r\n        roleObjectClass=&quot;group&quot;\r\n        cacheDurationMillis=&quot;300000&quot;\r\n        timeoutRead=&quot;10000&quot;\r\n        reportStatistics=&quot;true&quot;\r\n        supplementalRoles=&quot;user&quot;;\r\n    \r\n        org.eclipse.jetty.jaas.spi.PropertyFileLoginModule required\r\n        debug=&quot;true&quot;\r\n        file=&quot;E:/rundeck/server/config/realm.properties&quot;;\r\n    };\r\n\r\nwhen I restart rundeck service the AD users are not recognized and no error at all is displayed in the log. I can however login with the admin account. So to troubleshoot this I added:\r\n\r\n    java %RDECK_CLI_OPTS% %RDECK_SSL_OPTS% -Drundeck.jaaslogin=true -Dloginmodule.conf.name=jaas-multiauth.conf -Djava.security.auth.login.config=E:\\rundeck\\server\\config\\jaas-multiauth.conf -Dloginmodule.name=multiauth -jar rundeck.war --skipinstall -d  &gt;&gt; %CURDIR%\\var\\logs\\service.log  2&gt;&amp;1\r\n\r\nto the start-rundeck.bat file and in fact when I launch it I see an error which is quite weird:\r\n\r\n    [2022-12-22T18:58:09,409] ERROR config.GrailsApplicationPostProcessor - Error loading spring/resources.groovy file: java.io.IOException: E:\\rundeck\\server\\config\\jaas-multiauth.conf (No such file or directory)\r\n    java.lang.SecurityException: java.io.IOException: E:\\rundeck\\server\\config\\jaas-multiauth.conf (No such file or directory)\r\n\r\nthe file is there, path is correct and permission is set as on any other file in same directory. I deleted the file and created it again, but same error.\r\n\r\nAlso, I have a question: I understand that I should not edit the profile file. Hence, when the problem above is fixed, considering that the rundeck service is Windows integrated, where shall I put the line:\r\n\r\n    java %RDECK_CLI_OPTS% %RDECK_SSL_OPTS% -Drundeck.jaaslogin=true -Dloginmodule.conf.name=jaas-multiauth.conf -Djava.security.auth.login.config=E:\\rundeck\\server\\config\\jaas-multiauth.conf -Dloginmodule.name=multiauth -jar rundeck.war --skipinstall -d  &gt;&gt; %CURDIR%\\var\\logs\\service.log  2&gt;&amp;1\r\n\r\nto refer the jass-multiauth.conf file?","title":"Rundeck config file not found when service starts up","body":"<p>I have installed RD 4.8 CE on a Windows 2019 server + MariaDB. The application is up and I can login with the admin account. Service is Windows integrated.</p>\n<p>I'm trying now to allow AD users to login and perform activities. I haven't found much documentation on how to configure RD on Windows. So I'm grabbing from here and there. So far I have done the following:</p>\n<p>Created a file called jass-multiauth.conf in server/config/ folder as listed below:</p>\n<pre><code>multiauth {\n    com.dtolabs.rundeck.jetty.jaas.JettyCombinedLdapLoginModule sufficient\n    debug=&quot;true&quot;\n    contextFactory=&quot;com.sun.jndi.ldap.LdapCtxFactory&quot;\n    providerUrl=&quot;ldaps://xxxxxxxxxxx:636&quot;\n    bindDn=&quot;CN=xxxxxx,OU=Service Accounts,OU=Admin Users and Groups,OU=xxx,DC=xxx,DC=xxx,DC=xxx&quot;\n    bindPassword=&quot;x$xx&lt;x&gt;xx&quot;\n    authenticationMethod=&quot;simple&quot;\n    forceBindingLogin=&quot;true&quot;\n    userBaseDn=&quot;OU=Admin Users,OU=Admin Users and Groups,OU=xxx,DC=xxx,DC=xxx,DC=xxx&quot;\n    userRdnAttribute=&quot;sAMAccountName&quot;\n    userIdAttribute=&quot;sAMAccountName&quot;\n    userPasswordAttribute=&quot;unicodePwd&quot;\n    userObjectClass=&quot;user&quot;\n    roleBaseDn=&quot;OU=Groups,OU=Admin Users and Groups,OU=xxxx,DC=xxx,DC=xxx,DC=xxx&quot;\n    roleNameAttribute=&quot;cn&quot;\n    roleMemberAttribute=&quot;member&quot;\n    roleObjectClass=&quot;group&quot;\n    cacheDurationMillis=&quot;300000&quot;\n    timeoutRead=&quot;10000&quot;\n    reportStatistics=&quot;true&quot;\n    supplementalRoles=&quot;user&quot;;\n\n    org.eclipse.jetty.jaas.spi.PropertyFileLoginModule required\n    debug=&quot;true&quot;\n    file=&quot;E:/rundeck/server/config/realm.properties&quot;;\n};\n</code></pre>\n<p>when I restart rundeck service the AD users are not recognized and no error at all is displayed in the log. I can however login with the admin account. So to troubleshoot this I added:</p>\n<pre><code>java %RDECK_CLI_OPTS% %RDECK_SSL_OPTS% -Drundeck.jaaslogin=true -Dloginmodule.conf.name=jaas-multiauth.conf -Djava.security.auth.login.config=E:\\rundeck\\server\\config\\jaas-multiauth.conf -Dloginmodule.name=multiauth -jar rundeck.war --skipinstall -d  &gt;&gt; %CURDIR%\\var\\logs\\service.log  2&gt;&amp;1\n</code></pre>\n<p>to the start-rundeck.bat file and in fact when I launch it I see an error which is quite weird:</p>\n<pre><code>[2022-12-22T18:58:09,409] ERROR config.GrailsApplicationPostProcessor - Error loading spring/resources.groovy file: java.io.IOException: E:\\rundeck\\server\\config\\jaas-multiauth.conf (No such file or directory)\njava.lang.SecurityException: java.io.IOException: E:\\rundeck\\server\\config\\jaas-multiauth.conf (No such file or directory)\n</code></pre>\n<p>the file is there, path is correct and permission is set as on any other file in same directory. I deleted the file and created it again, but same error.</p>\n<p>Also, I have a question: I understand that I should not edit the profile file. Hence, when the problem above is fixed, considering that the rundeck service is Windows integrated, where shall I put the line:</p>\n<pre><code>java %RDECK_CLI_OPTS% %RDECK_SSL_OPTS% -Drundeck.jaaslogin=true -Dloginmodule.conf.name=jaas-multiauth.conf -Djava.security.auth.login.config=E:\\rundeck\\server\\config\\jaas-multiauth.conf -Dloginmodule.name=multiauth -jar rundeck.war --skipinstall -d  &gt;&gt; %CURDIR%\\var\\logs\\service.log  2&gt;&amp;1\n</code></pre>\n<p>to refer the jass-multiauth.conf file?</p>\n"},{"tags":["java","spring-data-jpa","spring-data"],"comments":[{"owner":{"account_id":17644829,"reputation":671,"user_id":12806467,"display_name":"MrSolarius"},"score":1,"creation_date":1671793316,"post_id":74898803,"comment_id":132177277,"body_markdown":"You have the extract function from oracle that can get your month number like that : `@Query(&quot;SELECT * FROM Table_name WHERE EXTRACT(MONTH FROM timestamp_date) = ?1&quot;)\nList getByMonth(int monthNumber);`","body":"You have the extract function from oracle that can get your month number like that : <code>@Query(&quot;SELECT * FROM Table_name WHERE EXTRACT(MONTH FROM timestamp_date) = ?1&quot;) List getByMonth(int monthNumber);</code>"},{"owner":{"account_id":23651005,"reputation":699,"user_id":17679888,"display_name":"Newbie learner"},"score":0,"creation_date":1671794041,"post_id":74898803,"comment_id":132177461,"body_markdown":"I think this works, i have written the query in repo class should I mention the db table name instead of entity class name which mapped to the table ?","body":"I think this works, i have written the query in repo class should I mention the db table name instead of entity class name which mapped to the table ?"},{"owner":{"account_id":17644829,"reputation":671,"user_id":12806467,"display_name":"MrSolarius"},"score":0,"creation_date":1671795033,"post_id":74898803,"comment_id":132177749,"body_markdown":"The entity class is used to represent the data in your application, while the database table stores the actual data. So yes, you should ;)","body":"The entity class is used to represent the data in your application, while the database table stores the actual data. So yes, you should ;)"}],"owner":{"account_id":23651005,"reputation":699,"user_id":17679888,"display_name":"Newbie learner"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":256,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671804926,"creation_date":1671792684,"question_id":74898803,"body_markdown":"UI sends month parameter as int\r\n\r\n```java\r\n@GetMapping(&quot;/{Monthnumber}&quot;)\r\nPublic List&lt;FunctionList&gt; getByMonth(@pathvariable(&quot;MonthNumber&quot;) int month)\r\n```\r\nUsing the above API\r\n\r\nFor example, if my month is Feb the parameter value would be 2 but in my oracle db the column contains timestamp data `22-FEB-22 11.00.00.00000000 AM`\r\n\r\nTried below IN REPO\r\n```java\r\n@QUERY(&quot;SELECT * FROM Table_name WHERE month(timestamp_date) = ?1)\r\nList&lt;Functionlist&gt; getByMonth(int month number)\r\n```\r\n\r\nHow to correctly query this","title":"SPRING DATA JPA - I need to fetch data based on timestamp column where month (int) as a parameter in native query","body":"<p>UI sends month parameter as int</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/{Monthnumber}&quot;)\nPublic List&lt;FunctionList&gt; getByMonth(@pathvariable(&quot;MonthNumber&quot;) int month)\n</code></pre>\n<p>Using the above API</p>\n<p>For example, if my month is Feb the parameter value would be 2 but in my oracle db the column contains timestamp data <code>22-FEB-22 11.00.00.00000000 AM</code></p>\n<p>Tried below IN REPO</p>\n<pre class=\"lang-java prettyprint-override\"><code>@QUERY(&quot;SELECT * FROM Table_name WHERE month(timestamp_date) = ?1)\nList&lt;Functionlist&gt; getByMonth(int month number)\n</code></pre>\n<p>How to correctly query this</p>\n"},{"tags":["java","mongodb","cdc"],"comments":[{"owner":{"account_id":36137,"reputation":178799,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1664708870,"post_id":73925291,"comment_id":130529583,"body_markdown":"Seems like the outcome depends on what `resumeToken` contains.","body":"Seems like the outcome depends on what <code>resumeToken</code> contains."},{"owner":{"account_id":3631143,"reputation":55363,"user_id":3027266,"accept_rate":75,"display_name":"Wernfried Domscheit"},"score":0,"creation_date":1664709203,"post_id":73925291,"comment_id":130529647,"body_markdown":"Max. size of 16793600 Byte (16 MiBYte) is a fix limit. Make your documents smaller, there is no other way. If you need to store bigger documents, then see [GridFS](https://www.mongodb.com/docs/manual/core/gridfs/)","body":"Max. size of 16793600 Byte (16 MiBYte) is a fix limit. Make your documents smaller, there is no other way. If you need to store bigger documents, then see <a href=\"https://www.mongodb.com/docs/manual/core/gridfs/\" rel=\"nofollow noreferrer\">GridFS</a>"},{"owner":{"account_id":877270,"reputation":742,"user_id":153271,"accept_rate":33,"display_name":"chendu"},"score":0,"creation_date":1664715387,"post_id":73925291,"comment_id":130530723,"body_markdown":"We should atleast be able to ignore such large rows and proceed further. how? --I am trying to find out. Also, i think the error is not coming from the collections I own. in the above code if we can somehow mention the `collections` of interest in the `pipeline` object -- I think the issue can be fixed. But i couldnt know how to do it. Any help?","body":"We should atleast be able to ignore such large rows and proceed further. how? --I am trying to find out. Also, i think the error is not coming from the collections I own. in the above code if we can somehow mention the <code>collections</code> of interest in the <code>pipeline</code> object -- I think the issue can be fixed. But i couldnt know how to do it. Any help?"},{"owner":{"account_id":877270,"reputation":742,"user_id":153271,"accept_rate":33,"display_name":"chendu"},"score":0,"creation_date":1664723930,"post_id":73925291,"comment_id":130532414,"body_markdown":"@WernfriedDomscheit i went through the GridFS documentation. What is not clear is how to use it in the context of CDC. The document shared is more wrt finding a document. Even google doesnt help. Any pointers?","body":"@WernfriedDomscheit i went through the GridFS documentation. What is not clear is how to use it in the context of CDC. The document shared is more wrt finding a document. Even google doesnt help. Any pointers?"}],"answers":[{"tags":[],"owner":{"account_id":877270,"reputation":742,"user_id":153271,"accept_rate":33,"display_name":"chendu"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1665550497,"creation_date":1665550497,"answer_id":74036652,"question_id":73925291,"body_markdown":"This is how i ended up solving the problem. (just incase somebody else is searching for solution to-this problem)\r\n\r\n1. removed `FullDocument.UPDATE_LOOKUP` when creating the cursor. So now my code looks like `cursor = mongoClient.watch(pipeline).batchSize(20000).cursor();` --Now this avoided the gigantic column that may endup in the document which was eventually error-ing out. This worked. \r\n\r\n2. In my case i didnt have to listen to the collection updates which had this bad data. So i modified my cursor to listen only on the databases and collections of my interest --instead of listening on the entire database and then ignoring the unwanted collections later. Below is the code\r\n\r\n3. When writing to the destination i had done bulk lookup on mongo db, constructed the full document and then written it --This approach of lazy lookup reduced a lot of memory footprint of the java program.\r\n\r\n```\r\n\r\n    private List&lt;Bson&gt; generatePipeline(CdcConfigs cdcConfig) {\r\n        List&lt;String&gt; whiteListedCollections = getWhitelistedCollection(cdcConfig);\r\n        List&lt;String&gt; whiteListedDbs = getWhitelistedDbs(cdcConfig);\r\n        log.info(&quot;whitelisted dbs:&quot; + whiteListedDbs + &quot; coll:&quot; + whiteListedCollections);\r\n        List&lt;Bson&gt; pipeline;\r\n        if (whiteListedDbs.size() &gt; 0)\r\n            pipeline = singletonList(match(and(\r\n                    in(&quot;ns.db&quot;, whiteListedDbs),\r\n                    in(&quot;ns.coll&quot;, whiteListedCollections),\r\n                    in(&quot;operationType&quot;, asList(&quot;insert&quot;, &quot;delete&quot;, &quot;update&quot;)))));\r\n        else\r\n            pipeline = singletonList(match(and(\r\n                    in(&quot;ns.coll&quot;, whiteListedCollections),\r\n                    in(&quot;operationType&quot;, asList(&quot;insert&quot;, &quot;delete&quot;, &quot;update&quot;)))));\r\n        return pipeline;\r\n    }\r\n\r\n    private MongoChangeStreamCursor&lt;ChangeStreamDocument&lt;Document&gt;&gt; getCursorAtResumeToken(CdcConfigs cdcConfig, MongoClient mongoClient) {\r\n        List&lt;Bson&gt; pipeline = generatePipeline(cdcConfig);\r\n        MongoChangeStreamCursor&lt;ChangeStreamDocument&lt;Document&gt;&gt; cursor;\r\n        String resumeTokenStr = getResumeTokenFromS3(cdcConfig);\r\n        if (resumeTokenStr == null) {\r\n//            cursor = mongoClient.watch(pipeline).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\r\n            cursor = mongoClient.watch(pipeline).batchSize(20000).cursor();\r\n            log.warn(&quot;RESUME TOKEN IS NULL. READING CDC FROM CURRENT TIMESTAMP FROM MONGO DB !!! &quot;);\r\n        } else {\r\n            BsonDocument resumeToken = BsonDocument.parse(resumeTokenStr);\r\n            cursor = mongoClient.watch(pipeline).batchSize(20000).maxAwaitTime(30, TimeUnit.MINUTES).startAfter(resumeToken).cursor();\r\n//            cursor = mongoClient.watch(pipeline).startAfter(resumeToken).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\r\n        }\r\n        return cursor;\r\n    }\r\n\r\n```\r\n\r\nThe solutions available sofar are more inclined towards python code. So it was a challange translating them into Java. ","title":"Mongo CDC throws : BSONObjectTooLarge . How to ignore this and proceed further?","body":"<p>This is how i ended up solving the problem. (just incase somebody else is searching for solution to-this problem)</p>\n<ol>\n<li><p>removed <code>FullDocument.UPDATE_LOOKUP</code> when creating the cursor. So now my code looks like <code>cursor = mongoClient.watch(pipeline).batchSize(20000).cursor();</code> --Now this avoided the gigantic column that may endup in the document which was eventually error-ing out. This worked.</p>\n</li>\n<li><p>In my case i didnt have to listen to the collection updates which had this bad data. So i modified my cursor to listen only on the databases and collections of my interest --instead of listening on the entire database and then ignoring the unwanted collections later. Below is the code</p>\n</li>\n<li><p>When writing to the destination i had done bulk lookup on mongo db, constructed the full document and then written it --This approach of lazy lookup reduced a lot of memory footprint of the java program.</p>\n</li>\n</ol>\n<pre><code>\n    private List&lt;Bson&gt; generatePipeline(CdcConfigs cdcConfig) {\n        List&lt;String&gt; whiteListedCollections = getWhitelistedCollection(cdcConfig);\n        List&lt;String&gt; whiteListedDbs = getWhitelistedDbs(cdcConfig);\n        log.info(&quot;whitelisted dbs:&quot; + whiteListedDbs + &quot; coll:&quot; + whiteListedCollections);\n        List&lt;Bson&gt; pipeline;\n        if (whiteListedDbs.size() &gt; 0)\n            pipeline = singletonList(match(and(\n                    in(&quot;ns.db&quot;, whiteListedDbs),\n                    in(&quot;ns.coll&quot;, whiteListedCollections),\n                    in(&quot;operationType&quot;, asList(&quot;insert&quot;, &quot;delete&quot;, &quot;update&quot;)))));\n        else\n            pipeline = singletonList(match(and(\n                    in(&quot;ns.coll&quot;, whiteListedCollections),\n                    in(&quot;operationType&quot;, asList(&quot;insert&quot;, &quot;delete&quot;, &quot;update&quot;)))));\n        return pipeline;\n    }\n\n    private MongoChangeStreamCursor&lt;ChangeStreamDocument&lt;Document&gt;&gt; getCursorAtResumeToken(CdcConfigs cdcConfig, MongoClient mongoClient) {\n        List&lt;Bson&gt; pipeline = generatePipeline(cdcConfig);\n        MongoChangeStreamCursor&lt;ChangeStreamDocument&lt;Document&gt;&gt; cursor;\n        String resumeTokenStr = getResumeTokenFromS3(cdcConfig);\n        if (resumeTokenStr == null) {\n//            cursor = mongoClient.watch(pipeline).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\n            cursor = mongoClient.watch(pipeline).batchSize(20000).cursor();\n            log.warn(&quot;RESUME TOKEN IS NULL. READING CDC FROM CURRENT TIMESTAMP FROM MONGO DB !!! &quot;);\n        } else {\n            BsonDocument resumeToken = BsonDocument.parse(resumeTokenStr);\n            cursor = mongoClient.watch(pipeline).batchSize(20000).maxAwaitTime(30, TimeUnit.MINUTES).startAfter(resumeToken).cursor();\n//            cursor = mongoClient.watch(pipeline).startAfter(resumeToken).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\n        }\n        return cursor;\n    }\n\n</code></pre>\n<p>The solutions available sofar are more inclined towards python code. So it was a challange translating them into Java.</p>\n"},{"tags":[],"owner":{"account_id":7369213,"reputation":312,"user_id":5609968,"display_name":"Xfox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671804499,"creation_date":1671804499,"answer_id":74900559,"question_id":73925291,"body_markdown":"My case is a little bit different. I have a trigger used to align documents from a collection to another, with the option to include the fullDocument in the change event. Problem is that the [metadata][1] added to the event, combined with the fullDocument, exceeds the BSON max size (16MB).\r\n\r\nI solved removing the fullDocument from the trigger and getting the document from the collection itself performing an aggregate:\r\n\r\n       collection1.aggregate([\r\n                {$match: {_id: changeEvent.documentKey._id}},\r\n                { $merge: { into: &quot;collection&quot;, on: &quot;_id&quot;, whenMatched: &quot;replace&quot;, whenNotMatched: &quot;insert&quot; } }\r\n              ]);\r\n\r\n\r\n  [1]: https://www.mongodb.com/docs/manual/reference/change-events/insert/#mongodb-data-insert","title":"Mongo CDC throws : BSONObjectTooLarge . How to ignore this and proceed further?","body":"<p>My case is a little bit different. I have a trigger used to align documents from a collection to another, with the option to include the fullDocument in the change event. Problem is that the <a href=\"https://www.mongodb.com/docs/manual/reference/change-events/insert/#mongodb-data-insert\" rel=\"nofollow noreferrer\">metadata</a> added to the event, combined with the fullDocument, exceeds the BSON max size (16MB).</p>\n<p>I solved removing the fullDocument from the trigger and getting the document from the collection itself performing an aggregate:</p>\n<pre><code>   collection1.aggregate([\n            {$match: {_id: changeEvent.documentKey._id}},\n            { $merge: { into: &quot;collection&quot;, on: &quot;_id&quot;, whenMatched: &quot;replace&quot;, whenNotMatched: &quot;insert&quot; } }\n          ]);\n</code></pre>\n"}],"owner":{"account_id":877270,"reputation":742,"user_id":153271,"accept_rate":33,"display_name":"chendu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":763,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74036652,"answer_count":2,"score":0,"last_activity_date":1671804499,"creation_date":1664708596,"question_id":73925291,"body_markdown":"I would liketo listen only to 3 collections in a database: c1, c2, c3. I was not able to figureout how to limit listening to these 3 collections only. Below is my code. \r\n\r\n1. i would like to ignore this error and proceed further. How to do it? In this case the cursor itself is not getting created. \r\n2. Like i said previously, is there a way to limit the listening to the collections `c1`, `c2` `c3` collections only?-- on the db side. Below code is listening to the full db and then filtering the collections on the java side. \r\n\r\n```\r\n        List&lt;Bson&gt; pipeline = singletonList(match(in(&quot;operationType&quot;, asList(&quot;insert&quot;, &quot;delete&quot;, &quot;update&quot;))));\r\n        MongoChangeStreamCursor&lt;ChangeStreamDocument&lt;Document&gt;&gt; cursor;\r\n        String resumeTokenStr = getResumeTokenFromS3(cdcConfig);\r\n        if (resumeTokenStr == null) {\r\n            cursor = mongoClient.watch(pipeline).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\r\n        } else {\r\n            BsonDocument resumeToken = BsonDocument.parse(resumeTokenStr);\r\n            cursor = mongoClient.watch(pipeline).batchSize(1).maxAwaitTime(60, TimeUnit.SECONDS).startAfter(resumeToken).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\r\n        }\r\n        return cursor;\r\n```\r\n\r\nThe above code throws the below error\r\n\r\n```\r\ncom.mongodb.MongoCommandException: Command failed with error 10334 (BSONObjectTooLarge): &#39;BSONObj size: 16795345 (0x10046D1) is invalid. Size must be between 0 and 16793600(16MB) First element: _id: { _data: &quot;826337A73B0000000A2B022C0100296E5A1004B317A529F739433BA840730515AC0EAC46645F6964006462624E8146E0FB000934F6560004&quot; }&#39; on server crm-mongo-report01.prod.phenom.local:27017. The full response is {&quot;operationTime&quot;: {&quot;$timestamp&quot;: {&quot;t&quot;: 1664707966, &quot;i&quot;: 25}}, &quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;BSONObj size: 16795345 (0x10046D1) is invalid. Size must be between 0 and 16793600(16MB) First element: _id: { _data: \\&quot;826337A73B0000000A2B022C0100296E5A1004B317A529F739433BA840730515AC0EAC46645F6964006462624E8146E0FB000934F6560004\\&quot; }&quot;, &quot;code&quot;: 10334, &quot;codeName&quot;: &quot;BSONObjectTooLarge&quot;, &quot;$clusterTime&quot;: {&quot;clusterTime&quot;: {&quot;$timestamp&quot;: {&quot;t&quot;: 1664707966, &quot;i&quot;: 26}}, &quot;signature&quot;: {&quot;hash&quot;: {&quot;$binary&quot;: {&quot;base64&quot;: &quot;NZDJKhCse19Eud88kNh7XRWRgas=&quot;, &quot;subType&quot;: &quot;00&quot;}}, &quot;keyId&quot;: 7113062344413937666}}}\r\n\tat com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:198)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:413)\r\n\tat com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:337)\r\n\tat com.mongodb.internal.connection.UsageTrackingInternalConnection.sendAndReceive(UsageTrackingInternalConnection.java:116)\r\n\tat com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.sendAndReceive(DefaultConnectionPool.java:644)\r\n\tat com.mongodb.internal.connection.CommandProtocolImpl.execute(CommandProtocolImpl.java:71)\r\n\tat com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.execute(DefaultServer.java:240)\r\n\tat com.mongodb.internal.connection.DefaultServerConnection.executeProtocol(DefaultServerConnection.java:226)\r\n\tat com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:126)\r\n\tat com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:116)\r\n\tat com.mongodb.internal.connection.DefaultServer$OperationCountTrackingConnection.command(DefaultServer.java:345)\r\n\tat com.mongodb.internal.operation.CommandOperationHelper.createReadCommandAndExecute(CommandOperationHelper.java:232)\r\n\tat com.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableRead$4(CommandOperationHelper.java:214)\r\n\tat com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$2(OperationHelper.java:575)\r\n\tat com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:600)\r\n\tat com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$3(OperationHelper.java:574)\r\n\tat com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:600)\r\n\tat com.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:573)\r\n\tat com.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableRead$5(CommandOperationHelper.java:211)\r\n\tat com.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:65)\r\n\tat com.mongodb.internal.operation.CommandOperationHelper.executeRetryableRead(CommandOperationHelper.java:217)\r\n\tat com.mongodb.internal.operation.CommandOperationHelper.executeRetryableRead(CommandOperationHelper.java:197)\r\n\tat com.mongodb.internal.operation.AggregateOperationImpl.execute(AggregateOperationImpl.java:195)\r\n\tat com.mongodb.internal.operation.ChangeStreamOperation$1.call(ChangeStreamOperation.java:347)\r\n\tat com.mongodb.internal.operation.ChangeStreamOperation$1.call(ChangeStreamOperation.java:343)\r\n\tat com.mongodb.internal.operation.OperationHelper.withReadConnectionSource(OperationHelper.java:538)\r\n\tat com.mongodb.internal.operation.ChangeStreamOperation.execute(ChangeStreamOperation.java:343)\r\n\tat com.mongodb.internal.operation.ChangeStreamOperation.execute(ChangeStreamOperation.java:58)\r\n\tat com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:191)\r\n\tat com.mongodb.client.internal.ChangeStreamIterableImpl.execute(ChangeStreamIterableImpl.java:221)\r\n\tat com.mongodb.client.internal.ChangeStreamIterableImpl.cursor(ChangeStreamIterableImpl.java:174)\r\n\tat com.company.cdc.services.CDCMain.getCursorAtResumeToken(CdcServiceMain.java:217)\r\n```\r\n\r\nline 217 points to the line : ` cursor = mongoClient.watch(pipeline).batchSize(1).maxAwaitTime(60, TimeUnit.SECONDS).startAfter(resumeToken).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();`","title":"Mongo CDC throws : BSONObjectTooLarge . How to ignore this and proceed further?","body":"<p>I would liketo listen only to 3 collections in a database: c1, c2, c3. I was not able to figureout how to limit listening to these 3 collections only. Below is my code.</p>\n<ol>\n<li>i would like to ignore this error and proceed further. How to do it? In this case the cursor itself is not getting created.</li>\n<li>Like i said previously, is there a way to limit the listening to the collections <code>c1</code>, <code>c2</code> <code>c3</code> collections only?-- on the db side. Below code is listening to the full db and then filtering the collections on the java side.</li>\n</ol>\n<pre><code>        List&lt;Bson&gt; pipeline = singletonList(match(in(&quot;operationType&quot;, asList(&quot;insert&quot;, &quot;delete&quot;, &quot;update&quot;))));\n        MongoChangeStreamCursor&lt;ChangeStreamDocument&lt;Document&gt;&gt; cursor;\n        String resumeTokenStr = getResumeTokenFromS3(cdcConfig);\n        if (resumeTokenStr == null) {\n            cursor = mongoClient.watch(pipeline).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\n        } else {\n            BsonDocument resumeToken = BsonDocument.parse(resumeTokenStr);\n            cursor = mongoClient.watch(pipeline).batchSize(1).maxAwaitTime(60, TimeUnit.SECONDS).startAfter(resumeToken).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();\n        }\n        return cursor;\n</code></pre>\n<p>The above code throws the below error</p>\n<pre><code>com.mongodb.MongoCommandException: Command failed with error 10334 (BSONObjectTooLarge): 'BSONObj size: 16795345 (0x10046D1) is invalid. Size must be between 0 and 16793600(16MB) First element: _id: { _data: &quot;826337A73B0000000A2B022C0100296E5A1004B317A529F739433BA840730515AC0EAC46645F6964006462624E8146E0FB000934F6560004&quot; }' on server crm-mongo-report01.prod.phenom.local:27017. The full response is {&quot;operationTime&quot;: {&quot;$timestamp&quot;: {&quot;t&quot;: 1664707966, &quot;i&quot;: 25}}, &quot;ok&quot;: 0.0, &quot;errmsg&quot;: &quot;BSONObj size: 16795345 (0x10046D1) is invalid. Size must be between 0 and 16793600(16MB) First element: _id: { _data: \\&quot;826337A73B0000000A2B022C0100296E5A1004B317A529F739433BA840730515AC0EAC46645F6964006462624E8146E0FB000934F6560004\\&quot; }&quot;, &quot;code&quot;: 10334, &quot;codeName&quot;: &quot;BSONObjectTooLarge&quot;, &quot;$clusterTime&quot;: {&quot;clusterTime&quot;: {&quot;$timestamp&quot;: {&quot;t&quot;: 1664707966, &quot;i&quot;: 26}}, &quot;signature&quot;: {&quot;hash&quot;: {&quot;$binary&quot;: {&quot;base64&quot;: &quot;NZDJKhCse19Eud88kNh7XRWRgas=&quot;, &quot;subType&quot;: &quot;00&quot;}}, &quot;keyId&quot;: 7113062344413937666}}}\n    at com.mongodb.internal.connection.ProtocolHelper.getCommandFailureException(ProtocolHelper.java:198)\n    at com.mongodb.internal.connection.InternalStreamConnection.receiveCommandMessageResponse(InternalStreamConnection.java:413)\n    at com.mongodb.internal.connection.InternalStreamConnection.sendAndReceive(InternalStreamConnection.java:337)\n    at com.mongodb.internal.connection.UsageTrackingInternalConnection.sendAndReceive(UsageTrackingInternalConnection.java:116)\n    at com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection.sendAndReceive(DefaultConnectionPool.java:644)\n    at com.mongodb.internal.connection.CommandProtocolImpl.execute(CommandProtocolImpl.java:71)\n    at com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor.execute(DefaultServer.java:240)\n    at com.mongodb.internal.connection.DefaultServerConnection.executeProtocol(DefaultServerConnection.java:226)\n    at com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:126)\n    at com.mongodb.internal.connection.DefaultServerConnection.command(DefaultServerConnection.java:116)\n    at com.mongodb.internal.connection.DefaultServer$OperationCountTrackingConnection.command(DefaultServer.java:345)\n    at com.mongodb.internal.operation.CommandOperationHelper.createReadCommandAndExecute(CommandOperationHelper.java:232)\n    at com.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableRead$4(CommandOperationHelper.java:214)\n    at com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$2(OperationHelper.java:575)\n    at com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:600)\n    at com.mongodb.internal.operation.OperationHelper.lambda$withSourceAndConnection$3(OperationHelper.java:574)\n    at com.mongodb.internal.operation.OperationHelper.withSuppliedResource(OperationHelper.java:600)\n    at com.mongodb.internal.operation.OperationHelper.withSourceAndConnection(OperationHelper.java:573)\n    at com.mongodb.internal.operation.CommandOperationHelper.lambda$executeRetryableRead$5(CommandOperationHelper.java:211)\n    at com.mongodb.internal.async.function.RetryingSyncSupplier.get(RetryingSyncSupplier.java:65)\n    at com.mongodb.internal.operation.CommandOperationHelper.executeRetryableRead(CommandOperationHelper.java:217)\n    at com.mongodb.internal.operation.CommandOperationHelper.executeRetryableRead(CommandOperationHelper.java:197)\n    at com.mongodb.internal.operation.AggregateOperationImpl.execute(AggregateOperationImpl.java:195)\n    at com.mongodb.internal.operation.ChangeStreamOperation$1.call(ChangeStreamOperation.java:347)\n    at com.mongodb.internal.operation.ChangeStreamOperation$1.call(ChangeStreamOperation.java:343)\n    at com.mongodb.internal.operation.OperationHelper.withReadConnectionSource(OperationHelper.java:538)\n    at com.mongodb.internal.operation.ChangeStreamOperation.execute(ChangeStreamOperation.java:343)\n    at com.mongodb.internal.operation.ChangeStreamOperation.execute(ChangeStreamOperation.java:58)\n    at com.mongodb.client.internal.MongoClientDelegate$DelegateOperationExecutor.execute(MongoClientDelegate.java:191)\n    at com.mongodb.client.internal.ChangeStreamIterableImpl.execute(ChangeStreamIterableImpl.java:221)\n    at com.mongodb.client.internal.ChangeStreamIterableImpl.cursor(ChangeStreamIterableImpl.java:174)\n    at com.company.cdc.services.CDCMain.getCursorAtResumeToken(CdcServiceMain.java:217)\n</code></pre>\n<p>line 217 points to the line : <code> cursor = mongoClient.watch(pipeline).batchSize(1).maxAwaitTime(60, TimeUnit.SECONDS).startAfter(resumeToken).fullDocument(FullDocument.UPDATE_LOOKUP).cursor();</code></p>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1671803340,"post_id":74900346,"comment_id":132179947,"body_markdown":"I see no use what-so-ever for this code.","body":"I see no use what-so-ever for this code."},{"owner":{"account_id":1610757,"reputation":1067,"user_id":1856573,"accept_rate":90,"display_name":"lapadets"},"score":2,"creation_date":1671803586,"post_id":74900346,"comment_id":132180001,"body_markdown":"Enums cannot be used as Spring beans because they cannot be instantiated using the default constructor. Try removing the @Service annotation and instead use the `getInstance()` method to obtain an instance of your LockerRepo class.","body":"Enums cannot be used as Spring beans because they cannot be instantiated using the default constructor. Try removing the @Service annotation and instead use the <code>getInstance()</code> method to obtain an instance of your LockerRepo class."},{"owner":{"account_id":26810839,"reputation":57,"user_id":20401498,"display_name":"Kiemoon"},"score":0,"creation_date":1671803596,"post_id":74900346,"comment_id":132180003,"body_markdown":"It just imitates repository layer by containing List inside of itself. And I omitted other methods","body":"It just imitates repository layer by containing List inside of itself. And I omitted other methods"},{"owner":{"account_id":26810839,"reputation":57,"user_id":20401498,"display_name":"Kiemoon"},"score":1,"creation_date":1671803894,"post_id":74900346,"comment_id":132180063,"body_markdown":"Thank you @lapadets. That was it. When we&#39;re at it. What is the best approach for singleton pattern in SpringBoot?","body":"Thank you @lapadets. That was it. When we&#39;re at it. What is the best approach for singleton pattern in SpringBoot?"},{"owner":{"account_id":1610757,"reputation":1067,"user_id":1856573,"accept_rate":90,"display_name":"lapadets"},"score":0,"creation_date":1671803990,"post_id":74900346,"comment_id":132180088,"body_markdown":"I posted an asnwer, hope that helps to clear up things.","body":"I posted an asnwer, hope that helps to clear up things."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1671804165,"post_id":74900346,"comment_id":132180137,"body_markdown":"reflecting on what (I think) you try to do with that code: you can easily replace it all with a single static method","body":"reflecting on what (I think) you try to do with that code: you can easily replace it all with a single static method"}],"answers":[{"tags":[],"owner":{"account_id":1610757,"reputation":1067,"user_id":1856573,"accept_rate":90,"display_name":"lapadets"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1671803913,"creation_date":1671803913,"answer_id":74900459,"question_id":74900346,"body_markdown":"As I wrote as comment, Enums cannot be used as Spring beans because they cannot be instantiated using the default constructor. \r\n\r\nBut if you still have to use the `@Service` annotation and also `@Autowired` to inject your class, you use the Singleton Pattern:\r\n\r\n    @Service\r\n    public class LockerRepo {\r\n    \r\n        private static final LockerRepo INSTANCE = new LockerRepo();\r\n    \r\n        private List&lt;Locker&gt; lockerList;\r\n    \r\n        private LockerRepo() {\r\n            lockerList = generateExampleData();\r\n        }\r\n    \r\n        private List&lt;Locker&gt; generateExampleData() {\r\n            List&lt;Locker&gt; exampleList = new ArrayList&lt;&gt;();\r\n    \r\n            for (int i = 0; i &lt; 100; i++) {\r\n                if (i &lt;= 30) {\r\n                    exampleList.add(new Locker(i, Size.S));\r\n                } else if (1 &gt; 30 &amp;&amp; i &lt;= 70) {\r\n                    exampleList.add(new Locker(i, Size.M));\r\n                } else {\r\n                    exampleList.add(new Locker(i, Size.L));\r\n                }\r\n            }\r\n    \r\n            return exampleList;\r\n        }\r\n    \r\n        public static LockerRepo getInstance() {\r\n            return INSTANCE;\r\n        }\r\n    \r\n        // getter for locker list\r\n    }\r\n\r\nThis should work, but it has a disadvantage - it makes your code more difficult to test and you have also tight coupling between your components. So it is generally not recommented as best practice.","title":"Autowiring Enums in Spring boot","body":"<p>As I wrote as comment, Enums cannot be used as Spring beans because they cannot be instantiated using the default constructor.</p>\n<p>But if you still have to use the <code>@Service</code> annotation and also <code>@Autowired</code> to inject your class, you use the Singleton Pattern:</p>\n<pre><code>@Service\npublic class LockerRepo {\n\n    private static final LockerRepo INSTANCE = new LockerRepo();\n\n    private List&lt;Locker&gt; lockerList;\n\n    private LockerRepo() {\n        lockerList = generateExampleData();\n    }\n\n    private List&lt;Locker&gt; generateExampleData() {\n        List&lt;Locker&gt; exampleList = new ArrayList&lt;&gt;();\n\n        for (int i = 0; i &lt; 100; i++) {\n            if (i &lt;= 30) {\n                exampleList.add(new Locker(i, Size.S));\n            } else if (1 &gt; 30 &amp;&amp; i &lt;= 70) {\n                exampleList.add(new Locker(i, Size.M));\n            } else {\n                exampleList.add(new Locker(i, Size.L));\n            }\n        }\n\n        return exampleList;\n    }\n\n    public static LockerRepo getInstance() {\n        return INSTANCE;\n    }\n\n    // getter for locker list\n}\n</code></pre>\n<p>This should work, but it has a disadvantage - it makes your code more difficult to test and you have also tight coupling between your components. So it is generally not recommented as best practice.</p>\n"}],"owner":{"account_id":26810839,"reputation":57,"user_id":20401498,"display_name":"Kiemoon"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":413,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74900459,"answer_count":1,"score":0,"last_activity_date":1671803913,"creation_date":1671803242,"question_id":74900346,"body_markdown":"In my SpringBoot App I have class:\r\n\r\n```\r\n@Service\r\npublic enum LockerRepo {\r\n    INSTANCE;\r\n\r\n    private static List&lt;Locker&gt; lockerList = new ArrayList&lt;&gt;(generateExampleData());\r\n    \r\n    private static List&lt;Locker&gt; generateExampleData() {\r\n\r\n        List&lt;Locker&gt; exampleList = new ArrayList&lt;&gt;();\r\n\r\n            for (int i = 0; i &lt; 100; i++) {\r\n                if (i &lt;= 30) {\r\n                    exampleList.add(new Locker(i, Size.S));\r\n                } else if (1 &gt; 30 &amp;&amp; i &lt;= 70) {\r\n                    exampleList.add(new Locker(i, Size.M));\r\n                } else {\r\n                    exampleList.add(new Locker(i, Size.L));\r\n                }\r\n            }\r\n\r\n        return exampleList;\r\n    }\r\n\r\n    public static LockerRepo getInstance() {\r\n        return INSTANCE;\r\n    }\r\n}\r\n```\r\n\r\nAnd I&#39;m getting error:\r\n\r\n```\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\nDescription:\r\nParameter 0 of constructor in com.smartlocker.repository.LockerRepo required a bean of type &#39;java.lang.String&#39; that could not be found.\r\nAction:\r\nConsider defining a bean of type &#39;java.lang.String&#39; in your configuration.\r\n```\r\n\r\nI have it autowired in other classes, and also called by getInstance() method. I was trying to add different annotations, and it didn&#39;t worked out. Also in test module it works well, and I can access it by getInstance()","title":"Autowiring Enums in Spring boot","body":"<p>In my SpringBoot App I have class:</p>\n<pre><code>@Service\npublic enum LockerRepo {\n    INSTANCE;\n\n    private static List&lt;Locker&gt; lockerList = new ArrayList&lt;&gt;(generateExampleData());\n    \n    private static List&lt;Locker&gt; generateExampleData() {\n\n        List&lt;Locker&gt; exampleList = new ArrayList&lt;&gt;();\n\n            for (int i = 0; i &lt; 100; i++) {\n                if (i &lt;= 30) {\n                    exampleList.add(new Locker(i, Size.S));\n                } else if (1 &gt; 30 &amp;&amp; i &lt;= 70) {\n                    exampleList.add(new Locker(i, Size.M));\n                } else {\n                    exampleList.add(new Locker(i, Size.L));\n                }\n            }\n\n        return exampleList;\n    }\n\n    public static LockerRepo getInstance() {\n        return INSTANCE;\n    }\n}\n</code></pre>\n<p>And I'm getting error:</p>\n<pre><code>***************************\nAPPLICATION FAILED TO START\n***************************\nDescription:\nParameter 0 of constructor in com.smartlocker.repository.LockerRepo required a bean of type 'java.lang.String' that could not be found.\nAction:\nConsider defining a bean of type 'java.lang.String' in your configuration.\n</code></pre>\n<p>I have it autowired in other classes, and also called by getInstance() method. I was trying to add different annotations, and it didn't worked out. Also in test module it works well, and I can access it by getInstance()</p>\n"},{"tags":["java","mockito","junit5","powermockito"],"comments":[{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1638899543,"post_id":70264024,"comment_id":124208581,"body_markdown":"You are trying to mock a final class. You need to use the inline mock maker. Check the docs: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#39","body":"You are trying to mock a final class. You need to use the inline mock maker. Check the docs: <a href=\"https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#39\" rel=\"nofollow noreferrer\">javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/&hellip;</a>"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1638900332,"post_id":70264024,"comment_id":124208888,"body_markdown":"Does this answer your question? [How to mock a final class with mockito](https://stackoverflow.com/questions/14292863/how-to-mock-a-final-class-with-mockito)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/14292863/how-to-mock-a-final-class-with-mockito\">How to mock a final class with mockito</a>"}],"answers":[{"tags":[],"owner":{"account_id":976957,"reputation":420,"user_id":997801,"accept_rate":100,"display_name":"Ramgau"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671803830,"creation_date":1671803830,"answer_id":74900447,"question_id":70264024,"body_markdown":"we can mock ConfigProvider using mockito library by following the ways\r\n\r\n    public void testMethodWithMockConfigProvider(){ \r\n        Config config= mock(Config.class);\r\n        try (MockedStatic&lt;ConfigProvider&gt; mockConfigProvider = Mockito.mockStatic(ConfigProvider.class)) {\r\n            mockConfigProvider.when(()-&gt; ConfigProvider.getConfig()).thenReturn(config);\r\n            when(config.getValue(eq(&quot;myproject.some.remote.service.url&quot;), any())).thenReturn(&quot;mockUrl&quot;);\r\n\r\n    }//try with resource close\r\n    }//end of method\r\n\r\nSometimes there may be needed to add dependencies for static methods. they are **junit5-mockito** and **mockito-inline**","title":"How to Mock Config Provider Class ( org.eclipse.microprofile.config.ConfigProvider)","body":"<p>we can mock ConfigProvider using mockito library by following the ways</p>\n<pre><code>public void testMethodWithMockConfigProvider(){ \n    Config config= mock(Config.class);\n    try (MockedStatic&lt;ConfigProvider&gt; mockConfigProvider = Mockito.mockStatic(ConfigProvider.class)) {\n        mockConfigProvider.when(()-&gt; ConfigProvider.getConfig()).thenReturn(config);\n        when(config.getValue(eq(&quot;myproject.some.remote.service.url&quot;), any())).thenReturn(&quot;mockUrl&quot;);\n\n}//try with resource close\n}//end of method\n</code></pre>\n<p>Sometimes there may be needed to add dependencies for static methods. they are <strong>junit5-mockito</strong> and <strong>mockito-inline</strong></p>\n"}],"owner":{"account_id":23577395,"reputation":1,"user_id":17616896,"display_name":"Satvika Oppula"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1004,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671803830,"creation_date":1638896131,"question_id":70264024,"body_markdown":" I am using ConfigProvider.getConfig().getValue(&quot;myproject.some.remote.service.url&quot;, String.class);\r\nfrom org.eclipse.microprofile.config .\r\n when iam trying to mock the ConfigProvider class  getting org.mockito.exceptions.base.MockitoException cannot mock/spy org.eclipse.microprofile.config.ConfigProvider. Need help in resolving the issue.\r\n\r\n","title":"How to Mock Config Provider Class ( org.eclipse.microprofile.config.ConfigProvider)","body":"<p>I am using ConfigProvider.getConfig().getValue(&quot;myproject.some.remote.service.url&quot;, String.class);\nfrom org.eclipse.microprofile.config .\nwhen iam trying to mock the ConfigProvider class  getting org.mockito.exceptions.base.MockitoException cannot mock/spy org.eclipse.microprofile.config.ConfigProvider. Need help in resolving the issue.</p>\n"},{"tags":["java","static-code-analysis","soot"],"comments":[{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1671804106,"post_id":74900418,"comment_id":132180123,"body_markdown":"Asking for offsite resources (other tools) is off-topic. If you change `doStuff1()` to `doStuff()` I will assume soot works, which strongly implies soot &quot;can not do this&quot;. Best of luck with finding a tool that supports static code analysis on illegal code.","body":"Asking for offsite resources (other tools) is off-topic. If you change <code>doStuff1()</code> to <code>doStuff()</code> I will assume soot works, which strongly implies soot &quot;can not do this&quot;. Best of luck with finding a tool that supports static code analysis on illegal code."},{"owner":{"account_id":10583629,"reputation":1134,"user_id":7796663,"accept_rate":67,"display_name":"JMax"},"score":0,"creation_date":1672143225,"post_id":74900418,"comment_id":132228130,"body_markdown":"Soot theoretically has the capability to use Java source files. But as far as I know this feature is unmaintained for years so it may work or not. In your case I would try not to store multiple classes in one Java file.","body":"Soot theoretically has the capability to use Java source files. But as far as I know this feature is unmaintained for years so it may work or not. In your case I would try not to store multiple classes in one Java file."},{"owner":{"account_id":17427293,"reputation":1,"user_id":12631975,"display_name":"杨国强"},"score":0,"creation_date":1672543829,"post_id":74900418,"comment_id":132304698,"body_markdown":"Thanks for your reply. I have found a new tool called Joern that can solve the problem.","body":"Thanks for your reply. I have found a new tool called Joern that can solve the problem."}],"owner":{"account_id":17427293,"reputation":1,"user_id":12631975,"display_name":"杨国强"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":37,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671803643,"creation_date":1671803643,"question_id":74900418,"body_markdown":"For example, in the CallGraphs.java file below, the doStuff1 function is not defined, so the file can not be compiled. When I use the command \r\n`java -cp soot.jar soot.Main -cp .:soot.jar -pp -allow-phantom-refs -allow-phantom-elms -src-prec java CallGraphs`, it throws soot.CompilationDeathException.\r\n```java\r\npublic class CallGraphs\r\n{\r\n\tpublic static void main(String[] args) {\r\n\t\tdoStuff1();\r\n\t}\r\n\t\r\n\tpublic static void doStuff() {\r\n\t\tnew A().foo();\r\n\t}\r\n}\r\n \r\nclass A\r\n{\r\n\tpublic void foo() {\r\n\t\tbar();\r\n\t}\r\n\t\r\n\tpublic void bar() {\r\n\t}\r\n}\r\n```\r\n\r\nIs there a way for soot to continue to analyse the file without throwing soot.CompilationDeathException? Moreover,if soot can not do this, is there a tool that can finish the task?","title":"Can soot deal with java files can not be compiled?","body":"<p>For example, in the CallGraphs.java file below, the doStuff1 function is not defined, so the file can not be compiled. When I use the command\n<code>java -cp soot.jar soot.Main -cp .:soot.jar -pp -allow-phantom-refs -allow-phantom-elms -src-prec java CallGraphs</code>, it throws soot.CompilationDeathException.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CallGraphs\n{\n    public static void main(String[] args) {\n        doStuff1();\n    }\n    \n    public static void doStuff() {\n        new A().foo();\n    }\n}\n \nclass A\n{\n    public void foo() {\n        bar();\n    }\n    \n    public void bar() {\n    }\n}\n</code></pre>\n<p>Is there a way for soot to continue to analyse the file without throwing soot.CompilationDeathException? Moreover,if soot can not do this, is there a tool that can finish the task?</p>\n"},{"tags":["java","maven","junit5","test-suite"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1671791870,"post_id":74898534,"comment_id":132176921,"body_markdown":"Why do you need to scan dependencies? Sounds like those &quot;Suites&quot; are integration tests? So maybe better go with naming `*IT` and using failsafe-plugin instead??? Why do you need test suites? Is using the general unit test approach (`*Test.java`) and as mentioned `*IT.java`not enough?","body":"Why do you need to scan dependencies? Sounds like those &quot;Suites&quot; are integration tests? So maybe better go with naming <code>*IT</code> and using failsafe-plugin instead??? Why do you need test suites? Is using the general unit test approach (<code>*Test.java</code>) and as mentioned <code>*IT.java</code>not enough?"},{"owner":{"account_id":7372006,"reputation":473,"user_id":5611906,"accept_rate":100,"display_name":"TCH"},"score":0,"creation_date":1671792545,"post_id":74898534,"comment_id":132177093,"body_markdown":"I don&#39;t know, the project existed before I came on it. Maybe this part is not needed anymore, all the tests are like *Test.java. Maybe if I succeed to run them without the dependencies scan I&#39;d remove that part","body":"I don&#39;t know, the project existed before I came on it. Maybe this part is not needed anymore, all the tests are like *Test.java. Maybe if I succeed to run them without the dependencies scan I&#39;d remove that part"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1671803994,"post_id":74898534,"comment_id":132180090,"body_markdown":"First do you use spring-boot-parent ? Or are you going via BOM file (spring-boot-dependencies)? Best would be having a real example project on github or alike... because there are so many information missing...","body":"First do you use spring-boot-parent ? Or are you going via BOM file (spring-boot-dependencies)? Best would be having a real example project on github or alike... because there are so many information missing..."}],"answers":[{"comments":[{"owner":{"account_id":7372006,"reputation":473,"user_id":5611906,"accept_rate":100,"display_name":"TCH"},"score":0,"creation_date":1671792969,"post_id":74898682,"comment_id":132177195,"body_markdown":"Ok I tried it. I get the same result but there is now a warning saying WARNING: Third-party TestEngine implementations are forbidden to use the reserved &#39;junit-&#39; prefix for their ID: &#39;junit-platform-suite&#39;","body":"Ok I tried it. I get the same result but there is now a warning saying WARNING: Third-party TestEngine implementations are forbidden to use the reserved &#39;junit-&#39; prefix for their ID: &#39;junit-platform-suite&#39;"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1671795639,"post_id":74898682,"comment_id":132177894,"body_markdown":"Please show your full pom file and show the commands you are using furthermore the JDK version, Maven version etc... and the full error output...","body":"Please show your full pom file and show the commands you are using furthermore the JDK version, Maven version etc... and the full error output..."},{"owner":{"account_id":7372006,"reputation":473,"user_id":5611906,"accept_rate":100,"display_name":"TCH"},"score":0,"creation_date":1671803530,"post_id":74898682,"comment_id":132179996,"body_markdown":"I edited the question with more info about the pom/JDK and the full warning output. The maven version is 3.8.6","body":"I edited the question with more info about the pom/JDK and the full warning output. The maven version is 3.8.6"}],"tags":[],"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671791832,"creation_date":1671791832,"answer_id":74898682,"question_id":74898534,"body_markdown":"You have to have the `junit-platform-suite-engine` as well as `junit-jupiter-engine` as a dependency. \r\n\r\nThey are both needed to run suites with JUnit Jupiter.\r\n\r\n\r\n&lt;!-- language:language-xml --&gt;\r\n\r\n      &lt;dependencyManagement&gt;\r\n        &lt;dependencies&gt;\r\n          &lt;dependency&gt;\r\n            &lt;groupId&gt;org.junit&lt;/groupId&gt;\r\n            &lt;artifactId&gt;junit-bom&lt;/artifactId&gt;\r\n            &lt;version&gt;5.9.1&lt;/version&gt;\r\n            &lt;scope&gt;import&lt;/scope&gt;\r\n            &lt;type&gt;pom&lt;/type&gt;\r\n          &lt;/dependency&gt;\r\n      &lt;/dependencyManagement&gt;\r\n    \r\n      &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit-platform-suite-engine&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n          &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n      &lt;/dependencies&gt;\r\n\r\n","title":"Test suite migration from JUnit4 to JUnit5","body":"<p>You have to have the <code>junit-platform-suite-engine</code> as well as <code>junit-jupiter-engine</code> as a dependency.</p>\n<p>They are both needed to run suites with JUnit Jupiter.</p>\n\n<pre><code>  &lt;dependencyManagement&gt;\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.junit&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-bom&lt;/artifactId&gt;\n        &lt;version&gt;5.9.1&lt;/version&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n      &lt;/dependency&gt;\n  &lt;/dependencyManagement&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-platform-suite-engine&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n</code></pre>\n"}],"owner":{"account_id":7372006,"reputation":473,"user_id":5611906,"accept_rate":100,"display_name":"TCH"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":432,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671803473,"creation_date":1671790863,"question_id":74898534,"body_markdown":"I&#39;ve migrated all the JUnit tests in my project from version 4 to version 5.\r\nThe project is composed by severals Maven modules and projects like the following architecture\r\n- parent pom\r\n   - backend project\r\n   - core project\r\n     - some modules\r\n     - test suite module\r\n       - **TestSuite.java**\r\n   - ... some other projects   \r\n\r\nInside the TestSuite.java, I had the following code under Junit4\r\n\r\n    import org.junit.extensions.cpsuite.ClasspathSuite;\r\n    import org.junit.extensions.cpsuite.ClasspathSuite.ClassnameFilters;\r\n    import org.junit.runner.RunWith;\r\n\r\n    @RunWith(ClasspathSuite.class)\r\n    @ClassnameFilters({&quot;common.package.of.all.projects.*&quot;})\r\n    public class TestSuite {\r\n       \r\n    }\r\n\r\nNow I try to create the equivalent configuration under JUnit5\r\n\r\n    import org.junit.platform.suite.api.SelectPackages;\r\n    import org.junit.platform.suite.api.Suite;\r\n    \r\n    @Suite\r\n    @SelectPackages(&quot;common.package.of.all.projects.*&quot;)\r\n    public class TestSuite {\r\n        \r\n    }\r\n\r\nAnd this is an extract of the test suite module **pom.xml**\r\n\r\n    // this lib help to execute the test suite under eclipse\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;io.takari.junit&lt;/groupId&gt;\r\n      &lt;artifactId&gt;takari-cpsuite&lt;/artifactId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    // these are the test dependencies I added\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-platform-suite-api&lt;/artifactId&gt;\r\n        &lt;version&gt;1.8.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n     &lt;/dependency&gt;\r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\r\n          &lt;artifactId&gt;junit-platform-suite-engine&lt;/artifactId&gt;\r\n          &lt;version&gt;1.8.2&lt;/version&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n     &lt;/dependency&gt;\r\n     // all module are in the dependencies like the following\r\n     &lt;dependency&gt;\r\n          &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\r\n          &lt;artifactId&gt;module.name&lt;/artifactId&gt;\r\n          &lt;version&gt;${project.version}&lt;/version&gt;\r\n          &lt;type&gt;test-jar&lt;/type&gt;\r\n          &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n      ...\r\nI use IntelliJ IDE and JDK 17.0.5,    \r\n**But when I try to run the test suite, none of the tests are launched. It seems like there are not found despite I added the modules in the *dependenciesToScan***   \r\nHere is the warning I get\r\n\r\n    WARNING: Third-party TestEngine implementations are forbidden to use the reserved &#39;junit-&#39; prefix for their ID: &#39;junit-platform-suite&#39;\r\n    Internal Error occurred.\r\n    org.junit.platform.commons.JUnitException: TestEngine with ID &#39;junit-platform-suite&#39; failed to discover tests\r\n    \tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:111)\r\n    \tat org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:85)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:92)\r\n    \tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n    \tat com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\r\n    \tat com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\r\n    \tat com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\r\n    \tat com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\r\n    \tat com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\r\n    Caused by: java.lang.NoSuchMethodError: &#39;org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder.parentConfigurationParameters(org.junit.platform.engine.ConfigurationParameters)&#39;\r\n    \tat org.junit.platform.suite.commons.SuiteLauncherDiscoveryRequestBuilder.build(SuiteLauncherDiscoveryRequestBuilder.java:198)\r\n    \tat org.junit.platform.suite.engine.SuiteTestDescriptor.discover(SuiteTestDescriptor.java:102)\r\n    \tat java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\r\n    \tat java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\r\n    \tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n\r\nAs suggested in another post https://stackoverflow.com/questions/59900637/error-testengine-with-id-junit-vintage-failed-to-discover-tests-with-spring about this warning, I added an exclusion for junit.vintage in the parent pom for spring-boot-starter-test\r\n\r\n    &lt;dependency&gt;\r\n              &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n              &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n              &lt;version&gt;${spring.boot.version}&lt;/version&gt;\r\n              &lt;scope&gt;test&lt;/scope&gt;\r\n              &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                  &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\r\n                  &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n              &lt;/exclusions&gt;\r\n            &lt;/dependency&gt;\r\n\r\nSo I&#39;m probably missing something in my configuration or maybe it is not the right way to achieve what I want.    \r\nAny ideas ? Thanks !\r\n\r\n","title":"Test suite migration from JUnit4 to JUnit5","body":"<p>I've migrated all the JUnit tests in my project from version 4 to version 5.\nThe project is composed by severals Maven modules and projects like the following architecture</p>\n<ul>\n<li>parent pom\n<ul>\n<li>backend project</li>\n<li>core project\n<ul>\n<li>some modules</li>\n<li>test suite module\n<ul>\n<li><strong>TestSuite.java</strong></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>... some other projects</li>\n</ul>\n</li>\n</ul>\n<p>Inside the TestSuite.java, I had the following code under Junit4</p>\n<pre><code>import org.junit.extensions.cpsuite.ClasspathSuite;\nimport org.junit.extensions.cpsuite.ClasspathSuite.ClassnameFilters;\nimport org.junit.runner.RunWith;\n\n@RunWith(ClasspathSuite.class)\n@ClassnameFilters({&quot;common.package.of.all.projects.*&quot;})\npublic class TestSuite {\n   \n}\n</code></pre>\n<p>Now I try to create the equivalent configuration under JUnit5</p>\n<pre><code>import org.junit.platform.suite.api.SelectPackages;\nimport org.junit.platform.suite.api.Suite;\n\n@Suite\n@SelectPackages(&quot;common.package.of.all.projects.*&quot;)\npublic class TestSuite {\n    \n}\n</code></pre>\n<p>And this is an extract of the test suite module <strong>pom.xml</strong></p>\n<pre><code>// this lib help to execute the test suite under eclipse\n&lt;dependency&gt;\n  &lt;groupId&gt;io.takari.junit&lt;/groupId&gt;\n  &lt;artifactId&gt;takari-cpsuite&lt;/artifactId&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n// these are the test dependencies I added\n&lt;dependency&gt;\n    &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;junit-platform-suite-api&lt;/artifactId&gt;\n    &lt;version&gt;1.8.2&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n &lt;/dependency&gt;\n &lt;dependency&gt;\n      &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n      &lt;artifactId&gt;junit-platform-suite-engine&lt;/artifactId&gt;\n      &lt;version&gt;1.8.2&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n &lt;/dependency&gt;\n // all module are in the dependencies like the following\n &lt;dependency&gt;\n      &lt;groupId&gt;${project.groupId}&lt;/groupId&gt;\n      &lt;artifactId&gt;module.name&lt;/artifactId&gt;\n      &lt;version&gt;${project.version}&lt;/version&gt;\n      &lt;type&gt;test-jar&lt;/type&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n  &lt;/dependency&gt;\n  ...\n</code></pre>\n<p>I use IntelliJ IDE and JDK 17.0.5,<br />\n<strong>But when I try to run the test suite, none of the tests are launched. It seems like there are not found despite I added the modules in the <em>dependenciesToScan</em></strong><br />\nHere is the warning I get</p>\n<pre><code>WARNING: Third-party TestEngine implementations are forbidden to use the reserved 'junit-' prefix for their ID: 'junit-platform-suite'\nInternal Error occurred.\norg.junit.platform.commons.JUnitException: TestEngine with ID 'junit-platform-suite' failed to discover tests\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discoverEngineRoot(EngineDiscoveryOrchestrator.java:111)\n    at org.junit.platform.launcher.core.EngineDiscoveryOrchestrator.discover(EngineDiscoveryOrchestrator.java:85)\n    at org.junit.platform.launcher.core.DefaultLauncher.discover(DefaultLauncher.java:92)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: java.lang.NoSuchMethodError: 'org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder org.junit.platform.launcher.core.LauncherDiscoveryRequestBuilder.parentConfigurationParameters(org.junit.platform.engine.ConfigurationParameters)'\n    at org.junit.platform.suite.commons.SuiteLauncherDiscoveryRequestBuilder.build(SuiteLauncherDiscoveryRequestBuilder.java:198)\n    at org.junit.platform.suite.engine.SuiteTestDescriptor.discover(SuiteTestDescriptor.java:102)\n    at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\n</code></pre>\n<p>As suggested in another post <a href=\"https://stackoverflow.com/questions/59900637/error-testengine-with-id-junit-vintage-failed-to-discover-tests-with-spring\">Error &quot;TestEngine with ID &#39;junit-vintage&#39; failed to discover tests&quot; with Spring Boot 2.2</a> about this warning, I added an exclusion for junit.vintage in the parent pom for spring-boot-starter-test</p>\n<pre><code>&lt;dependency&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n          &lt;version&gt;${spring.boot.version}&lt;/version&gt;\n          &lt;scope&gt;test&lt;/scope&gt;\n          &lt;exclusions&gt;\n            &lt;exclusion&gt;\n              &lt;groupId&gt;org.junit.vintage&lt;/groupId&gt;\n              &lt;artifactId&gt;junit-vintage-engine&lt;/artifactId&gt;\n            &lt;/exclusion&gt;\n          &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>So I'm probably missing something in my configuration or maybe it is not the right way to achieve what I want.<br />\nAny ideas ? Thanks !</p>\n"},{"tags":["javascript","java","selenium","input","selenide"],"answers":[{"tags":[],"owner":{"account_id":20087954,"reputation":423,"user_id":14729128,"display_name":"Maria"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671803431,"creation_date":1671803431,"answer_id":74900381,"question_id":74847774,"body_markdown":"Have you checked an example from Selenide&#39;s developers on how they suggest file uploading? It is not mandatory to have &#39;input&#39; btw.\r\n https://github.com/selenide/selenide/blob/master/src/test/java/integration/FileUploadTest.java","title":"How upload file if input take click automaticaly","body":"<p>Have you checked an example from Selenide's developers on how they suggest file uploading? It is not mandatory to have 'input' btw.\n<a href=\"https://github.com/selenide/selenide/blob/master/src/test/java/integration/FileUploadTest.java\" rel=\"nofollow noreferrer\">https://github.com/selenide/selenide/blob/master/src/test/java/integration/FileUploadTest.java</a></p>\n"}],"owner":{"account_id":27287533,"reputation":1,"user_id":20806488,"display_name":"Maksim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671803431,"creation_date":1671437744,"question_id":74847774,"body_markdown":"I&#39;m trying to write an e2e test for upload file using `selenide`, but face a problem.   \r\nElement `&#39;input&#39;` creates only after click at `&#39;button&#39;` and then input takes click.\r\n\r\nJS code :\r\n```javascript\r\nconst input = document.createElement(&#39;input&#39;);\r\ninput.type = &#39;file&#39;;\r\ninput.click();\r\n```\r\n\r\nHow can I upload a file if input don&#39;t exist in DOM?\r\n\r\nI&#39;d like to use `selenide` native `uploadFile()` method. Perhaps for this I need to call some kind of JS script.","title":"How upload file if input take click automaticaly","body":"<p>I'm trying to write an e2e test for upload file using <code>selenide</code>, but face a problem.<br />\nElement <code>'input'</code> creates only after click at <code>'button'</code> and then input takes click.</p>\n<p>JS code :</p>\n<pre class=\"lang-js prettyprint-override\"><code>const input = document.createElement('input');\ninput.type = 'file';\ninput.click();\n</code></pre>\n<p>How can I upload a file if input don't exist in DOM?</p>\n<p>I'd like to use <code>selenide</code> native <code>uploadFile()</code> method. Perhaps for this I need to call some kind of JS script.</p>\n"},{"tags":["java","spring","multithreading","spring-boot","asynchronous"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671804161,"post_id":74898430,"comment_id":132180135,"body_markdown":"Simplest: you use `fixedDelay` (instead of cron) .. it (seems to) offers a &quot;sequential execution&quot; https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html#fixedDelay()","body":"Simplest: you use <code>fixedDelay</code> (instead of cron) .. it (seems to) offers a &quot;sequential execution&quot; <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html#fixedDelay()\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"},{"owner":{"account_id":16584480,"reputation":121,"user_id":11984272,"display_name":"Rahul"},"score":0,"creation_date":1671808837,"post_id":74898430,"comment_id":132181404,"body_markdown":"I tried it but still not working as expected. May be I am using Scheduled and Async both that&#39;s why fixedDelay is not working as expected.","body":"I tried it but still not working as expected. May be I am using Scheduled and Async both that&#39;s why fixedDelay is not working as expected."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671809659,"post_id":74898430,"comment_id":132181623,"body_markdown":"yes, of course (for `fixedDelay` to work as expected) there should be no async/threading inside your scheduled, but only &quot;blocking code&quot;","body":"yes, of course (for <code>fixedDelay</code> to work as expected) there should be no async/threading inside your scheduled, but only &quot;blocking code&quot;"},{"owner":{"account_id":16584480,"reputation":121,"user_id":11984272,"display_name":"Rahul"},"score":0,"creation_date":1671809820,"post_id":74898430,"comment_id":132181676,"body_markdown":"then how to prevent next scheduler call ?","body":"then how to prevent next scheduler call ?"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671810269,"post_id":74898430,"comment_id":132181810,"body_markdown":"&quot;`long fixedDelay`\nExecute the annotated method with a fixed period **between the end of the last invocation and the start of the next**.&quot;","body":"&quot;<code>long fixedDelay</code> Execute the annotated method with a fixed period <b>between the end of the last invocation and the start of the next</b>.&quot;"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1671815790,"post_id":74898430,"comment_id":132183262,"body_markdown":"..btw. &quot;0/2 * * * * *&quot; (cron expr.) means every minute at 0. second and 2. second (so twice/minute), you mean probably `*/2 * * * * *` (every 2 seconds) https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html#parse(java.lang.String)","body":"..btw. &quot;0/2 * * * * *&quot; (cron expr.) means every minute at 0. second and 2. second (so twice/minute), you mean probably <code>*&#47;2 * * * * *</code> (every 2 seconds) <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronExpression.html#parse(java.lang.String)\" rel=\"nofollow noreferrer\">docs.spring.io/spring-framework/docs/current/javadoc-api/org&zwnj;&#8203;/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":10298861,"reputation":111,"user_id":7598149,"display_name":"kesaven"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671790565,"creation_date":1671790565,"answer_id":74898492,"question_id":74898430,"body_markdown":"I believe you can use ShedLock to solve this issue. https://www.baeldung.com/shedlock-spring  \r\nhttps://github.com/lukas-krecan/ShedLock","title":"How to prevent next @Scheduler call until current @scheduler have finished in Spring Boot?","body":"<p>I believe you can use ShedLock to solve this issue. <a href=\"https://www.baeldung.com/shedlock-spring\" rel=\"nofollow noreferrer\">https://www.baeldung.com/shedlock-spring</a><br />\n<a href=\"https://github.com/lukas-krecan/ShedLock\" rel=\"nofollow noreferrer\">https://github.com/lukas-krecan/ShedLock</a></p>\n"},{"comments":[{"owner":{"account_id":16255308,"reputation":401,"user_id":13695861,"display_name":"Marc Bannout"},"score":0,"creation_date":1672078258,"post_id":74900033,"comment_id":132217899,"body_markdown":"Would you have any clue about a solution if, for the same problem, we have several instances of the same application? Thank you!","body":"Would you have any clue about a solution if, for the same problem, we have several instances of the same application? Thank you!"},{"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"score":1,"creation_date":1672082643,"post_id":74900033,"comment_id":132218697,"body_markdown":"@MarcBannout yes in that case you could use spring quartz and configure it to store the details of job scheduller in database where both applications have access. Then you could also read how to solve the specific issue here https://stackoverflow.com/questions/1636556/ensure-that-spring-quartz-job-execution-doesnt-overlap","body":"@MarcBannout yes in that case you could use spring quartz and configure it to store the details of job scheduller in database where both applications have access. Then you could also read how to solve the specific issue here <a href=\"https://stackoverflow.com/questions/1636556/ensure-that-spring-quartz-job-execution-doesnt-overlap\" title=\"ensure that spring quartz job execution doesnt overlap\">stackoverflow.com/questions/1636556/&hellip;</a>"}],"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671802835,"creation_date":1671801065,"answer_id":74900033,"question_id":74898430,"body_markdown":"&gt; I am looking solution that next scheduler should not call until first\r\n&gt; scheduler get completed.\r\n\r\nYou have defined `@Service public class Main {...}` and by default `@Service` is an indication for spring to build a singleton. If you have not done anything to modify this, then the expected behavior is for spring to create only a single instance of your class `Main` in heap memory.  \r\n\r\nSo in this case if you add the `synchronized` keyword in your method you will allow only 1 thread to be able to execute your method at some time. Every other thread requesting to execute your scheduled method will need to wait until the thread that is already running finishes.\r\n   \r\n\r\n        @Scheduled(cron = &quot;0/2 * * * * *&quot;)\r\n        public synchronized void schedule() { .... }\r\n\r\nExample of above solution scenario.\r\n\r\n- `Thread A` starts executing method `schedule`. \r\n- 2 seconds later while `Thread A` still executes, `Thread B` starts and wants to execute the same method. \r\n- `Thread B` will wait outside and will start executing the method only after `Thread A` has finished execution. \r\n\r\nSo in the above scenario if 3 schedulers are spawn at close 3 time intervals all of them will wait for execution and maybe this will lead to some bottle neck of your scheduling and might put some heavy load on your resources.\r\n\r\nIf that is the case another alternative solution would be to `cancel` `Thread B` method execution if it arrives while `Thread A` already executes the same method. This way you will be sure that no bottle neck is built up.\r\n\r\nTo implement this you can use a `ReentrantLock`. \r\n\r\n    @Service\r\n    public class Main {\r\n    \r\n       private final ReentrantLock reentrantLock = new ReentrantLock();\r\n    \r\n        ....\r\n       \r\n        @Scheduled(cron = &quot;0/2 * * * * *&quot;)\r\n        public void schedule() {\r\n    \r\n          if (reentrantLock.tryLock()) {\r\n                try {\r\n    \r\n                //... all your existing method code\r\n    \r\n                } finally {\r\n                    reentrantLock.unlock();\r\n                }\r\n            } else {\r\n              //log that the `Thread B` was cancelled if you want, as it requested to execute the method while `Thread A` was already executing.\r\n            }\r\n        }\r\n\r\n     }","title":"How to prevent next @Scheduler call until current @scheduler have finished in Spring Boot?","body":"<blockquote>\n<p>I am looking solution that next scheduler should not call until first\nscheduler get completed.</p>\n</blockquote>\n<p>You have defined <code>@Service public class Main {...}</code> and by default <code>@Service</code> is an indication for spring to build a singleton. If you have not done anything to modify this, then the expected behavior is for spring to create only a single instance of your class <code>Main</code> in heap memory.</p>\n<p>So in this case if you add the <code>synchronized</code> keyword in your method you will allow only 1 thread to be able to execute your method at some time. Every other thread requesting to execute your scheduled method will need to wait until the thread that is already running finishes.</p>\n<pre><code>    @Scheduled(cron = &quot;0/2 * * * * *&quot;)\n    public synchronized void schedule() { .... }\n</code></pre>\n<p>Example of above solution scenario.</p>\n<ul>\n<li><code>Thread A</code> starts executing method <code>schedule</code>.</li>\n<li>2 seconds later while <code>Thread A</code> still executes, <code>Thread B</code> starts and wants to execute the same method.</li>\n<li><code>Thread B</code> will wait outside and will start executing the method only after <code>Thread A</code> has finished execution.</li>\n</ul>\n<p>So in the above scenario if 3 schedulers are spawn at close 3 time intervals all of them will wait for execution and maybe this will lead to some bottle neck of your scheduling and might put some heavy load on your resources.</p>\n<p>If that is the case another alternative solution would be to <code>cancel</code> <code>Thread B</code> method execution if it arrives while <code>Thread A</code> already executes the same method. This way you will be sure that no bottle neck is built up.</p>\n<p>To implement this you can use a <code>ReentrantLock</code>.</p>\n<pre><code>@Service\npublic class Main {\n\n   private final ReentrantLock reentrantLock = new ReentrantLock();\n\n    ....\n   \n    @Scheduled(cron = &quot;0/2 * * * * *&quot;)\n    public void schedule() {\n\n      if (reentrantLock.tryLock()) {\n            try {\n\n            //... all your existing method code\n\n            } finally {\n                reentrantLock.unlock();\n            }\n        } else {\n          //log that the `Thread B` was cancelled if you want, as it requested to execute the method while `Thread A` was already executing.\n        }\n    }\n\n }\n</code></pre>\n"}],"owner":{"account_id":16584480,"reputation":121,"user_id":11984272,"display_name":"Rahul"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":852,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1671802835,"creation_date":1671790054,"question_id":74898430,"body_markdown":"I am trying to create a Spring boot application, which asynchronously process thousand of records using @Async multithreading. For this I am creating 8 threads and 8 sub list from main list so that 8 thread process 8 sub list asynchronously. I am also using @scheduler so that method calls in every 2 seconds. \r\n\r\n**But problem is that due to scheduler, sometimes this application process duplicate records because this method get called in every 2 seconds and retrieve data from database in every 2 seconds. for example first time method get called and retrieved 72000 records from database whose flag 0 and then @Async method process all these records and change processed records flag from 0 to 1. And again in 2 seconds method get called and retrieve new records wh0se flag is 0.**\r\n\r\nIn log attached pic you can see that first time scheduler get called and retrieved 72000 records and multiple threads started processing in between next scheduler started and retrieved 16000 records which contain those records also which are present in current scheduler.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n\r\n**I am looking solution that next scheduler should not call until first scheduler get completed. Because sometime first scheduler processing records in between if next scheduler call in 2 seconds then may be it retrieve those records again which are already present in first scheduler call.**\r\n\r\nI can&#39;t increase scheduler call time. Because maximum time we get the records around 400-500 and sometime we get records in thousands.\r\n\r\nCode as below.\r\n\r\n\r\n    @SpringBootApplication\r\n    @EnableScheduling\r\n    @EnableAsync\r\n    public class DemoApplication {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSpringApplication.run(DemoApplication.class, args);\r\n    \t}\r\n    \t\r\n    \t@Bean\r\n    \tpublic RestTemplate restTemplate(RestTemplateBuilder builder) {\r\n    \t\treturn builder.build();\r\n    \t}\r\n    \t\r\n    \t\r\n    \t@Bean(&quot;ThreadPoolTaskExecutor&quot;)\r\n    \t  public TaskExecutor getAsyncExecutor() {\r\n    \t    final ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\r\n    \t    executor.setCorePoolSize(8);\r\n    \t    executor.setMaxPoolSize(8);\r\n    \t    executor.setQueueCapacity(8);\r\n    \t    executor.setWaitForTasksToCompleteOnShutdown(true);\r\n    \t    executor.setThreadNamePrefix(&quot;async-&quot;);\r\n    \t    executor.setRejectedExecutionHandler(new RejectedExecutionHandlerImpl());\r\n    \t    executor.initialize();\r\n    \t    return executor;\r\n    \t  }\r\n    }\r\n\r\n\r\n    @Service\r\n    public class Main {\r\n    \r\n    \t@Autowired\r\n    \tprivate DemoDao dao;\r\n    \r\n    \t@Autowired\r\n    \tprivate Asyn asyn;\r\n    \t\r\n    \t\r\n    \tstatic int schedulerCount = 0;\r\n    \r\n    \t\r\n    \t@Scheduled(cron = &quot;0/2 * * * * *&quot;)\r\n    \tpublic void schedule() {\r\n    \r\n    \t\tSystem.out.println(&quot;++++++++++++++++++++++++++++++++++++Scheduler started schedulerCount  :  &quot;+schedulerCount+&quot;+++++++++++++++++++++++++++++++++++++&quot;+ LocalDateTime.now());\r\n    \t\tList&lt;Json&gt; jsonList = new ArrayList&lt;Json&gt;();\r\n    \t\tList&lt;List&lt;Json&gt;&gt; smallLi = new ArrayList&lt;List&lt;Json&gt;&gt;();\r\n    \t\ttry {\r\n    \t\t\tjsonList = dao.getJsonList();\r\n    \t\t\tSystem.out.println(&quot;jsonList size   :   &quot; + jsonList.size());\r\n    \t\t\t\r\n    \t\t\tint count = jsonList.size();\r\n    \t\t\t\r\n    \t\t\t//Creating 8 sublist (8 sublist because thread pool size is 8) from main list(jsonList)\r\n    \t\t\tint limit = Math.round(count / 8) + 1;\r\n    \t\t\t\r\n    \t\t\tfor (int j = 0; j &lt; count; j += limit) {\r\n    \t\t\t\tsmallLi.add(new ArrayList&lt;Json&gt;(jsonList.subList(j, Math.min(count, j + limit))));\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;smallLi  :  &quot; + smallLi.size());\r\n    \t\t\t\r\n    \t\t\t//After creating 8 sublist, sending sublists with Async method so that 8 threads create and each thread process one sublist asynchronously.\r\n    \t\t\tfor (int i = 0; i &lt; smallLi.size(); i++) {\r\n    \t\t\t\tasyn.withAsyn(smallLi.get(i), schedulerCount);\r\n    \t\t\t}\r\n    \t\t\tschedulerCount++;\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t}\r\n\r\n\r\n    @Async(&quot;ThreadPoolTaskExecutor&quot;)\r\n    \tpublic void withAsyn(List&lt;Json&gt; li, int schedulerCount) throws Exception {\r\n    \r\n    \t\tSystem.out.println(&quot;with start+++++++++++++ schedulerCount &quot; + schedulerCount + &quot;, name  :  &quot;\r\n    \t\t\t\t+ Thread.currentThread().getName() + &quot;, time  :  &quot; + LocalDateTime.now() + &quot;, start index  :  &quot;\r\n    \t\t\t\t+ li.get(0).getId() + &quot;, end index  :  &quot; + li.get(li.size() - 1).getId());\r\n    \t\ttry {\r\n    \t\t\tXSSFWorkbook workbook = new XSSFWorkbook();\r\n    \t\t\tXSSFSheet spreadsheet = workbook.createSheet(&quot;Data&quot;);\r\n    \t\t\tXSSFRow row;\r\n    \r\n    \t\t\tfor (int i = 0; i &lt; li.size(); i++) {\r\n    \r\n    \t\t\t\trow = spreadsheet.createRow(i);\r\n    \r\n    \t\t\t\tCell cell9 = row.createCell(0);\r\n    \t\t\t\tcell9.setCellValue(li.get(i).getId());\r\n    \r\n    \t\t\t\tCell cell = row.createCell(1);\r\n    \t\t\t\tcell.setCellValue(li.get(i).getName());\r\n    \r\n    \t\t\t\tCell cell1 = row.createCell(2);\r\n    \t\t\t\tcell1.setCellValue(li.get(i).getPhone());\r\n    \r\n    \t\t\t\tCell cell2 = row.createCell(3);\r\n    \t\t\t\tcell2.setCellValue(li.get(i).getEmail());\r\n    \r\n    \t\t\t\tCell cell3 = row.createCell(4);\r\n    \t\t\t\tcell3.setCellValue(li.get(i).getAddress());\r\n    \r\n    \t\t\t\tCell cell4 = row.createCell(5);\r\n    \t\t\t\tcell4.setCellValue(li.get(i).getPostalZip());\r\n    \t\t\t}\r\n    \t\t\tFileOutputStream out = new FileOutputStream(new File(&quot;C:\\\\Users\\\\RK658\\\\Desktop\\\\logs\\\\generated\\\\&quot;\r\n    \t\t\t\t\t+ Thread.currentThread().getName() + &quot;_&quot; + schedulerCount + &quot;.xlsx&quot;));\r\n    \t\t\tworkbook.write(out);\r\n    \t\t\tout.close();\r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \t\tSystem.out.println(&quot;with end+++++++++++++ schedulerCount &quot; + schedulerCount + &quot;, name  :  &quot;\r\n    \t\t\t\t+ Thread.currentThread().getName() + &quot;, time  :  &quot; + LocalDateTime.now() + &quot;, start index  :  &quot;\r\n    \t\t\t\t+ li.get(0).getId() + &quot;, end index  :  &quot; + li.get(li.size() - 1).getId());\r\n    \t}\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/g0nnj.png","title":"How to prevent next @Scheduler call until current @scheduler have finished in Spring Boot?","body":"<p>I am trying to create a Spring boot application, which asynchronously process thousand of records using @Async multithreading. For this I am creating 8 threads and 8 sub list from main list so that 8 thread process 8 sub list asynchronously. I am also using @scheduler so that method calls in every 2 seconds.</p>\n<p><strong>But problem is that due to scheduler, sometimes this application process duplicate records because this method get called in every 2 seconds and retrieve data from database in every 2 seconds. for example first time method get called and retrieved 72000 records from database whose flag 0 and then @Async method process all these records and change processed records flag from 0 to 1. And again in 2 seconds method get called and retrieve new records wh0se flag is 0.</strong></p>\n<p>In log attached pic you can see that first time scheduler get called and retrieved 72000 records and multiple threads started processing in between next scheduler started and retrieved 16000 records which contain those records also which are present in current scheduler.</p>\n<p><a href=\"https://i.stack.imgur.com/g0nnj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/g0nnj.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>I am looking solution that next scheduler should not call until first scheduler get completed. Because sometime first scheduler processing records in between if next scheduler call in 2 seconds then may be it retrieve those records again which are already present in first scheduler call.</strong></p>\n<p>I can't increase scheduler call time. Because maximum time we get the records around 400-500 and sometime we get records in thousands.</p>\n<p>Code as below.</p>\n<pre><code>@SpringBootApplication\n@EnableScheduling\n@EnableAsync\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(DemoApplication.class, args);\n    }\n    \n    @Bean\n    public RestTemplate restTemplate(RestTemplateBuilder builder) {\n        return builder.build();\n    }\n    \n    \n    @Bean(&quot;ThreadPoolTaskExecutor&quot;)\n      public TaskExecutor getAsyncExecutor() {\n        final ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();\n        executor.setCorePoolSize(8);\n        executor.setMaxPoolSize(8);\n        executor.setQueueCapacity(8);\n        executor.setWaitForTasksToCompleteOnShutdown(true);\n        executor.setThreadNamePrefix(&quot;async-&quot;);\n        executor.setRejectedExecutionHandler(new RejectedExecutionHandlerImpl());\n        executor.initialize();\n        return executor;\n      }\n}\n\n\n@Service\npublic class Main {\n\n    @Autowired\n    private DemoDao dao;\n\n    @Autowired\n    private Asyn asyn;\n    \n    \n    static int schedulerCount = 0;\n\n    \n    @Scheduled(cron = &quot;0/2 * * * * *&quot;)\n    public void schedule() {\n\n        System.out.println(&quot;++++++++++++++++++++++++++++++++++++Scheduler started schedulerCount  :  &quot;+schedulerCount+&quot;+++++++++++++++++++++++++++++++++++++&quot;+ LocalDateTime.now());\n        List&lt;Json&gt; jsonList = new ArrayList&lt;Json&gt;();\n        List&lt;List&lt;Json&gt;&gt; smallLi = new ArrayList&lt;List&lt;Json&gt;&gt;();\n        try {\n            jsonList = dao.getJsonList();\n            System.out.println(&quot;jsonList size   :   &quot; + jsonList.size());\n            \n            int count = jsonList.size();\n            \n            //Creating 8 sublist (8 sublist because thread pool size is 8) from main list(jsonList)\n            int limit = Math.round(count / 8) + 1;\n            \n            for (int j = 0; j &lt; count; j += limit) {\n                smallLi.add(new ArrayList&lt;Json&gt;(jsonList.subList(j, Math.min(count, j + limit))));\n            }\n            System.out.println(&quot;smallLi  :  &quot; + smallLi.size());\n            \n            //After creating 8 sublist, sending sublists with Async method so that 8 threads create and each thread process one sublist asynchronously.\n            for (int i = 0; i &lt; smallLi.size(); i++) {\n                asyn.withAsyn(smallLi.get(i), schedulerCount);\n            }\n            schedulerCount++;\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n\n@Async(&quot;ThreadPoolTaskExecutor&quot;)\n    public void withAsyn(List&lt;Json&gt; li, int schedulerCount) throws Exception {\n\n        System.out.println(&quot;with start+++++++++++++ schedulerCount &quot; + schedulerCount + &quot;, name  :  &quot;\n                + Thread.currentThread().getName() + &quot;, time  :  &quot; + LocalDateTime.now() + &quot;, start index  :  &quot;\n                + li.get(0).getId() + &quot;, end index  :  &quot; + li.get(li.size() - 1).getId());\n        try {\n            XSSFWorkbook workbook = new XSSFWorkbook();\n            XSSFSheet spreadsheet = workbook.createSheet(&quot;Data&quot;);\n            XSSFRow row;\n\n            for (int i = 0; i &lt; li.size(); i++) {\n\n                row = spreadsheet.createRow(i);\n\n                Cell cell9 = row.createCell(0);\n                cell9.setCellValue(li.get(i).getId());\n\n                Cell cell = row.createCell(1);\n                cell.setCellValue(li.get(i).getName());\n\n                Cell cell1 = row.createCell(2);\n                cell1.setCellValue(li.get(i).getPhone());\n\n                Cell cell2 = row.createCell(3);\n                cell2.setCellValue(li.get(i).getEmail());\n\n                Cell cell3 = row.createCell(4);\n                cell3.setCellValue(li.get(i).getAddress());\n\n                Cell cell4 = row.createCell(5);\n                cell4.setCellValue(li.get(i).getPostalZip());\n            }\n            FileOutputStream out = new FileOutputStream(new File(&quot;C:\\\\Users\\\\RK658\\\\Desktop\\\\logs\\\\generated\\\\&quot;\n                    + Thread.currentThread().getName() + &quot;_&quot; + schedulerCount + &quot;.xlsx&quot;));\n            workbook.write(out);\n            out.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        System.out.println(&quot;with end+++++++++++++ schedulerCount &quot; + schedulerCount + &quot;, name  :  &quot;\n                + Thread.currentThread().getName() + &quot;, time  :  &quot; + LocalDateTime.now() + &quot;, start index  :  &quot;\n                + li.get(0).getId() + &quot;, end index  :  &quot; + li.get(li.size() - 1).getId());\n    }\n</code></pre>\n"},{"tags":["java","arraylist"],"comments":[{"owner":{"account_id":740820,"reputation":47963,"user_id":2353911,"accept_rate":100,"display_name":"Mena"},"score":0,"creation_date":1671462334,"post_id":74851297,"comment_id":132098388,"body_markdown":"Note: you probably don&#39;t want to use `LocalDateTime` if there&#39;s any chance the timezone on the client may differ to the one on server. Secondly, just invoke a setter on your `Client` instances to mutate them? Not a very clear question though...","body":"Note: you probably don&#39;t want to use <code>LocalDateTime</code> if there&#39;s any chance the timezone on the client may differ to the one on server. Secondly, just invoke a setter on your <code>Client</code> instances to mutate them? Not a very clear question though..."},{"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"score":0,"creation_date":1671464251,"post_id":74851297,"comment_id":132099065,"body_markdown":"Hi!\n\nAs Mena wrote, you just need to add a setter for the appointment in class `Client` and iterate on clients in your method `setAppointment` to set the new value:\n\n        `for(Client client: clients)\t\t\t\n    \t     client.setAppointment(nextappointment);`","body":"Hi!  As Mena wrote, you just need to add a setter for the appointment in class <code>Client</code> and iterate on clients in your method <code>setAppointment</code> to set the new value:          <code>for(Client client: clients)\t\t\t     \t     client.setAppointment(nextappointment);</code>"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1671802769,"creation_date":1671802769,"answer_id":74900280,"question_id":74851297,"body_markdown":"You need to call `Client.setAppointment`\r\n\r\nFor a specific client:\r\n\r\n    LocalDateTime tempappointment = LocalDateTime.of(yearint, monthint, dayint, hourint, minuteint);\r\n    clients.get(0).setAppointment(tempappointment);\r\n\r\n\r\nFor all\r\n\r\n    for (Client client : clients) {\r\n        client.setAppointment(tempappointment);\r\n    }\r\n\r\n","title":"How do I update a specific property of an object in an arraylist in Java?","body":"<p>You need to call <code>Client.setAppointment</code></p>\n<p>For a specific client:</p>\n<pre><code>LocalDateTime tempappointment = LocalDateTime.of(yearint, monthint, dayint, hourint, minuteint);\nclients.get(0).setAppointment(tempappointment);\n</code></pre>\n<p>For all</p>\n<pre><code>for (Client client : clients) {\n    client.setAppointment(tempappointment);\n}\n</code></pre>\n"}],"owner":{"account_id":27297880,"reputation":1,"user_id":20815230,"display_name":"HELOTHERE"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1671802769,"creation_date":1671456974,"question_id":74851297,"body_markdown":"I have a system that I&#39;m making for a school project, with clients, appointments, etc. I&#39;m just struggling to figure out how I can update the LocalDateTime appointment variable that I have setup for each client, I know how to make a new client with one, but just can&#39;t figure out how to update it.\r\n\r\n```\r\nArrayList&lt;Client&gt; clients = Client.inputClientsFromFile();\r\n\r\nLocalDateTime tempappointment;\r\nint yearint = Integer.parseInt(year.getText());\r\nint monthint = Integer.parseInt(month.getText());\r\nint dayint = Integer.parseInt(day.getText());\r\nint hourint = Integer.parseInt(hour.getText());\r\nint minuteint = Integer.parseInt(minutes.getText());\r\ntempappointment = LocalDateTime.of(yearint,monthint,dayint,hourint,minuteint);\r\n```\r\nI have written this to get the localdatetime from textboxes and this\r\n\r\n```\r\npublic LocalDateTime getAppointment() {\r\n        return nextappointment;\r\n    }\r\n\r\n    /**\r\n     * @param nextappointment\r\n     */\r\n    public void setAppointment(LocalDateTime nextappointment) {\r\n        this.nextappointment = nextappointment;\r\n```\r\nwhen initiliazing the client object in the arraylist.","title":"How do I update a specific property of an object in an arraylist in Java?","body":"<p>I have a system that I'm making for a school project, with clients, appointments, etc. I'm just struggling to figure out how I can update the LocalDateTime appointment variable that I have setup for each client, I know how to make a new client with one, but just can't figure out how to update it.</p>\n<pre><code>ArrayList&lt;Client&gt; clients = Client.inputClientsFromFile();\n\nLocalDateTime tempappointment;\nint yearint = Integer.parseInt(year.getText());\nint monthint = Integer.parseInt(month.getText());\nint dayint = Integer.parseInt(day.getText());\nint hourint = Integer.parseInt(hour.getText());\nint minuteint = Integer.parseInt(minutes.getText());\ntempappointment = LocalDateTime.of(yearint,monthint,dayint,hourint,minuteint);\n</code></pre>\n<p>I have written this to get the localdatetime from textboxes and this</p>\n<pre><code>public LocalDateTime getAppointment() {\n        return nextappointment;\n    }\n\n    /**\n     * @param nextappointment\n     */\n    public void setAppointment(LocalDateTime nextappointment) {\n        this.nextappointment = nextappointment;\n</code></pre>\n<p>when initiliazing the client object in the arraylist.</p>\n"},{"tags":["java","eclipse","testing","junit"],"comments":[{"owner":{"account_id":6530,"reputation":1194,"user_id":11026,"display_name":"Bdoserror"},"score":5,"creation_date":1325725606,"post_id":413214,"comment_id":10880693,"body_markdown":"None of the answers below work. I have the same problem. I can run all the tests in &quot;code.branchone.aaa&quot; but if I go to the root &quot;code.branchone&quot; it says &quot;No test found with test runner &#39;Junit 4&#39;&quot;. Keep in mind the &quot;code.branchone&quot; doesn&#39;t have any source in it.","body":"None of the answers below work. I have the same problem. I can run all the tests in &quot;code.branchone.aaa&quot; but if I go to the root &quot;code.branchone&quot; it says &quot;No test found with test runner &#39;Junit 4&#39;&quot;. Keep in mind the &quot;code.branchone&quot; doesn&#39;t have any source in it."},{"owner":{"account_id":6530,"reputation":1194,"user_id":11026,"display_name":"Bdoserror"},"score":0,"creation_date":1325725996,"post_id":413214,"comment_id":10880759,"body_markdown":"Extra confusion note: my project (built by someone else) already has a launch configuration which works from a higher directory in the hierarchy (&quot;code&quot;). I copied that config and modified it for the subdirectory I wanted, it still doesn&#39;t work and that directory spec is the only difference between them.","body":"Extra confusion note: my project (built by someone else) already has a launch configuration which works from a higher directory in the hierarchy (&quot;code&quot;). I copied that config and modified it for the subdirectory I wanted, it still doesn&#39;t work and that directory spec is the only difference between them."},{"owner":{"account_id":6530,"reputation":1194,"user_id":11026,"display_name":"Bdoserror"},"score":0,"creation_date":1325726745,"post_id":413214,"comment_id":10880892,"body_markdown":"Hmm, maybe the issue is because the one that works runs from a directory which is &quot;sub-project&quot;(?) under the main project. e.g. in this setup the working config runs for &quot;src/it/java&quot;: Project (root of tree) with 1 child, src/it/java\n\nAnd the one I want is a subdir of src/it/java, and in the source view the common parent of the subdirectories I want to run doesn&#39;t have it&#39;s own entry. e.g.:\n\nProject (root) has src/it/java as child, and srt/it/java has 2 children, sub1.subA &amp; sub1.subB, and I want to run all tests from src/it/java/sub1","body":"Hmm, maybe the issue is because the one that works runs from a directory which is &quot;sub-project&quot;(?) under the main project. e.g. in this setup the working config runs for &quot;src/it/java&quot;: Project (root of tree) with 1 child, src/it/java  And the one I want is a subdir of src/it/java, and in the source view the common parent of the subdirectories I want to run doesn&#39;t have it&#39;s own entry. e.g.:  Project (root) has src/it/java as child, and srt/it/java has 2 children, sub1.subA &amp; sub1.subB, and I want to run all tests from src/it/java/sub1"}],"answers":[{"tags":[],"owner":{"account_id":14626,"reputation":2286,"user_id":30297,"accept_rate":92,"display_name":"chillysapien"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1231166154,"creation_date":1231166154,"answer_id":413281,"question_id":413214,"body_markdown":"I beleieve that you can add all your test packages to a single directory. If you right click on this directory, then you should find the &quot;run as -&gt; JUnit test&quot; option available. This will run all tests contained in the directory and will catch anything you&#39;ve added. Any new tests get put in there with the rest of them and whatever package name you have it doesn&#39;t matter. Hope that helps","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>I beleieve that you can add all your test packages to a single directory. If you right click on this directory, then you should find the \"run as -> JUnit test\" option available. This will run all tests contained in the directory and will catch anything you've added. Any new tests get put in there with the rest of them and whatever package name you have it doesn't matter. Hope that helps</p>\n"},{"tags":[],"owner":{"account_id":20669,"reputation":815,"user_id":49642,"display_name":"Phil"},"comment_count":0,"down_vote_count":4,"up_vote_count":5,"is_accepted":false,"score":1,"last_activity_date":1231166178,"creation_date":1231166178,"answer_id":413282,"question_id":413214,"body_markdown":"Sure, right-click on the packages you want, and select Run As... JUnit Test","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>Sure, right-click on the packages you want, and select Run As... JUnit Test</p>\n"},{"comments":[{"owner":{"account_id":30058,"reputation":1137,"user_id":81698,"accept_rate":60,"display_name":"Eishay Smith"},"score":17,"creation_date":1285568533,"post_id":413289,"comment_id":4030513,"body_markdown":"but it doesn&#39;t let you run tests from different packages","body":"but it doesn&#39;t let you run tests from different packages"}],"tags":[],"owner":{"account_id":14954,"reputation":47917,"user_id":31136,"accept_rate":50,"display_name":"bruno conde"},"comment_count":1,"down_vote_count":8,"up_vote_count":9,"is_accepted":false,"score":1,"last_activity_date":1231166295,"creation_date":1231166295,"answer_id":413289,"question_id":413214,"body_markdown":"In Eclipse, on your debug/run configurations you have the following options:\r\n\r\n 1. Run a single test\r\n 2. Run all tests in the selected project, package or source folder\r\n\r\nI think the second option is your friend in this case.","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>In Eclipse, on your debug/run configurations you have the following options:</p>\n\n<ol>\n<li>Run a single test</li>\n<li>Run all tests in the selected project, package or source folder</li>\n</ol>\n\n<p>I think the second option is your friend in this case.</p>\n"},{"comments":[{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":0,"creation_date":1296157075,"post_id":413331,"comment_id":5346813,"body_markdown":"I also used this in a different way than the one you suggested, using annotations. This link is really useful!","body":"I also used this in a different way than the one you suggested, using annotations. This link is really useful!"}],"tags":[],"owner":{"account_id":20615,"reputation":973,"user_id":49431,"accept_rate":20,"display_name":"Jurgen Hannaert"},"comment_count":1,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1231167068,"creation_date":1231167068,"answer_id":413331,"question_id":413214,"body_markdown":"I&#39;m sure u can tweak this a bit. Make a Collection of the CLASSES_DIR property and loop over it in the findClasses method. (junit4)\r\n\r\nhttp://burtbeckwith.com/blog/?p=52\r\n\r\n    ","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>I'm sure u can tweak this a bit. Make a Collection of the CLASSES_DIR property and loop over it in the findClasses method. (junit4)</p>\n\n<p><a href=\"http://burtbeckwith.com/blog/?p=52\" rel=\"nofollow noreferrer\">http://burtbeckwith.com/blog/?p=52</a></p>\n"},{"comments":[{"owner":{"account_id":4401188,"reputation":4398,"user_id":3586851,"accept_rate":50,"display_name":"Heri"},"score":7,"creation_date":1450789020,"post_id":13519526,"comment_id":56573778,"body_markdown":"Only on the src (root of the classpath) it will run all unit tests of the project. If chosen on a particular package it only runs the tests within the chosen package itself, but not the tests from the sub packages.","body":"Only on the src (root of the classpath) it will run all unit tests of the project. If chosen on a particular package it only runs the tests within the chosen package itself, but not the tests from the sub packages."}],"tags":[],"owner":{"account_id":1234733,"reputation":20412,"user_id":1198559,"accept_rate":70,"display_name":"jhegedus"},"comment_count":1,"down_vote_count":4,"up_vote_count":28,"is_accepted":false,"score":24,"last_activity_date":1353615748,"creation_date":1353615748,"answer_id":13519526,"question_id":413214,"body_markdown":"An other way: \r\n\r\nClick on the black triangle denoted by red rectangle in the picture below (in your Eclipse, not here :).)\r\n\r\n![enter image description here][1]\r\n\r\nThen open run configurations, create a new configuration and then set &quot;Run all tests...&quot; as exemplified in the image below.\r\n\r\n![enter image description here][2]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/8NDHB.png\r\n  [2]: http://i.stack.imgur.com/rslD8.png","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>An other way: </p>\n\n<p>Click on the black triangle denoted by red rectangle in the picture below (in your Eclipse, not here :).)</p>\n\n<p><img src=\"https://i.stack.imgur.com/8NDHB.png\" alt=\"enter image description here\"></p>\n\n<p>Then open run configurations, create a new configuration and then set \"Run all tests...\" as exemplified in the image below.</p>\n\n<p><img src=\"https://i.stack.imgur.com/rslD8.png\" alt=\"enter image description here\"></p>\n"},{"comments":[{"owner":{"account_id":1200792,"reputation":11279,"user_id":1171509,"accept_rate":84,"display_name":"jacobq"},"score":3,"creation_date":1380738983,"post_id":14923130,"comment_id":28315376,"body_markdown":"I don&#39;t suppose there&#39;s a way to use package names or wildcards with `@SuiteClasses`, is there? I&#39;ve seen http://johanneslink.net/projects/cpsuite.jsp, http://burtbeckwith.com/blog/?p=52, and http://stackoverflow.com/questions/1293880/run-all-tests-in-a-source-tree-not-a-package but none is quite as nice of a solution as I&#39;d hoped for.","body":"I don&#39;t suppose there&#39;s a way to use package names or wildcards with <code>@SuiteClasses</code>, is there? I&#39;ve seen <a href=\"http://johanneslink.net/projects/cpsuite.jsp\" rel=\"nofollow noreferrer\">johanneslink.net/projects/cpsuite.jsp</a>, <a href=\"http://burtbeckwith.com/blog/?p=52\" rel=\"nofollow noreferrer\">burtbeckwith.com/blog/?p=52</a>, and <a href=\"http://stackoverflow.com/questions/1293880/run-all-tests-in-a-source-tree-not-a-package\" title=\"run all tests in a source tree not a package\">stackoverflow.com/questions/1293880/&hellip;</a> but none is quite as nice of a solution as I&#39;d hoped for."},{"owner":{"account_id":955989,"reputation":10476,"user_id":981284,"accept_rate":94,"display_name":"rlegendi"},"score":0,"creation_date":1414655760,"post_id":14923130,"comment_id":41900119,"body_markdown":"This helped me solve an issue where 2 test cases were interfering each other (separately they were green but failed when they were executed in a sequence). Nice trick :-)","body":"This helped me solve an issue where 2 test cases were interfering each other (separately they were green but failed when they were executed in a sequence). Nice trick :-)"},{"owner":{"account_id":5561189,"reputation":315,"user_id":9260110,"display_name":"Abdullah Nurum"},"score":0,"creation_date":1592317863,"post_id":14923130,"comment_id":110378825,"body_markdown":"java.lang.Exception: No runnable methods","body":"java.lang.Exception: No runnable methods"}],"tags":[],"owner":{"account_id":1068225,"reputation":5459,"user_id":1068167,"accept_rate":97,"display_name":"span"},"comment_count":3,"down_vote_count":2,"up_vote_count":31,"is_accepted":false,"score":29,"last_activity_date":1361117551,"creation_date":1361117551,"answer_id":14923130,"question_id":413214,"body_markdown":"Yes, it is possible. The easiest way for me at least is to add a test suite class. It can look like this:\r\n\r\n    package tests;\r\n    \r\n    import org.junit.runner.RunWith;\r\n    import org.junit.runners.Suite;\r\n    import org.junit.runners.Suite.SuiteClasses;\r\n    \r\n    import tests.message.ATest;\r\n    import tests.validator.BTest;\r\n    import tests.validator.CTest;\r\n    import tests.validator.DTest;\r\n    \r\n    @RunWith(Suite.class)\r\n    @SuiteClasses({ ATest.class, \r\n    \t\tBTest.class, \r\n    \t\tCTest.class, \r\n    \t\tDTest.class })\r\n    public class AllTests {\r\n    \r\n    }\r\n\r\nThis will allow you to test any class that you import no matter what package it is in. To run this in eclipse you just right click the AllTests class and run it as JUnit test. It will then run all the tests you define in `@SuiteClasses`.\r\n\r\nThis will work with linked sources as well, I use it all the time.","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>Yes, it is possible. The easiest way for me at least is to add a test suite class. It can look like this:</p>\n\n<pre><code>package tests;\n\nimport org.junit.runner.RunWith;\nimport org.junit.runners.Suite;\nimport org.junit.runners.Suite.SuiteClasses;\n\nimport tests.message.ATest;\nimport tests.validator.BTest;\nimport tests.validator.CTest;\nimport tests.validator.DTest;\n\n@RunWith(Suite.class)\n@SuiteClasses({ ATest.class, \n        BTest.class, \n        CTest.class, \n        DTest.class })\npublic class AllTests {\n\n}\n</code></pre>\n\n<p>This will allow you to test any class that you import no matter what package it is in. To run this in eclipse you just right click the AllTests class and run it as JUnit test. It will then run all the tests you define in <code>@SuiteClasses</code>.</p>\n\n<p>This will work with linked sources as well, I use it all the time.</p>\n"},{"tags":[],"owner":{"account_id":121188,"reputation":5073,"user_id":314089,"accept_rate":60,"display_name":"icyerasor"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1372862168,"creation_date":1372862168,"answer_id":17450919,"question_id":413214,"body_markdown":"Maybe not exactly what the original question was, but you can easily run all tests of a **whole Project**, by simply right-clicking the project -&gt; Run As JUnitTest. Don&#39;t worry where the annotated classes reside, this will be scanned.\r\n\r\nThis does not work if applied to the test-src-folder or a package with subpackes. Quite a shame actually -.-","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>Maybe not exactly what the original question was, but you can easily run all tests of a <strong>whole Project</strong>, by simply right-clicking the project -> Run As JUnitTest. Don't worry where the annotated classes reside, this will be scanned.</p>\n\n<p>This does not work if applied to the test-src-folder or a package with subpackes. Quite a shame actually -.-</p>\n"},{"tags":[],"owner":{"account_id":7388280,"reputation":438,"user_id":5622596,"display_name":"jspek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671802151,"creation_date":1671802151,"answer_id":74900186,"question_id":413214,"body_markdown":"If you are using **JUnit 5** you can cherry pick which tests you want to run:\r\n```Java\r\nimport org.junit.platform.suite.api.SelectClasses;\r\nimport org.junit.platform.suite.api.Suite;\r\n\r\nimport tests.Test1;\r\nimport tests.Test2;\r\nimport tests.Test3;\r\n\r\n@Suite\r\n@SelectClasses({\r\n\tTest1.class,\r\n\tTest2.class,\r\n\tTest3.class\r\n})\r\npublic class AllMyTests {\r\n\r\n}\r\n```\r\n\r\nIf you want to select which packages to run you can: \r\n```Java\r\nimport org.junit.platform.suite.api.SelectPackages;\r\nimport org.junit.platform.suite.api.Suite;\r\n\r\n@Suite\r\n@SelectPackages({\r\n\t&quot;com.package1&quot;,\r\n\t&quot;com.package2&quot;,\r\n\t&quot;com.package3&quot;\r\n})\r\npublic class AllMyTests {\r\n\r\n}\r\n```\r\n\r\nIf you need to be able to exclude certain sub-packages you can do:\r\n```Java\r\nimport org.junit.platform.suite.api.ExcludePackages;\r\nimport org.junit.platform.suite.api.SelectPackages;\r\nimport org.junit.platform.suite.api.Suite;\r\n\r\n@Suite\r\n@SelectPackages({\r\n\t&quot;com.package1&quot;,\r\n\t&quot;com.package2&quot;,\r\n\t&quot;com.package3&quot;\r\n})\r\n@ExcludePackages({\r\n\t&quot;com.package1.subpackage&quot;,\r\n\t&quot;com.package2.othersubpackage&quot;\r\n})\r\npublic class AllMyTests {\r\n\r\n}\r\n```\r\n\r\nOther useful annotations:\r\n\r\n - To match a particular pattern:\r\n   `@IncludeClassNamePatterns({&quot;^.*ATests?$&quot;})`\r\n - To exclude a particular pattern:\r\n   `@ExcludeClassNamePatterns({&quot;^.*ATests?$&quot;})`\r\n\r\nExamples were based on: [https://howtodoinjava.com/junit5/junit5-test-suites-examples/][1]\r\n\r\n\r\n  [1]: https://howtodoinjava.com/junit5/junit5-test-suites-examples/","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>If you are using <strong>JUnit 5</strong> you can cherry pick which tests you want to run:</p>\n<pre><code>import org.junit.platform.suite.api.SelectClasses;\nimport org.junit.platform.suite.api.Suite;\n\nimport tests.Test1;\nimport tests.Test2;\nimport tests.Test3;\n\n@Suite\n@SelectClasses({\n    Test1.class,\n    Test2.class,\n    Test3.class\n})\npublic class AllMyTests {\n\n}\n</code></pre>\n<p>If you want to select which packages to run you can:</p>\n<pre><code>import org.junit.platform.suite.api.SelectPackages;\nimport org.junit.platform.suite.api.Suite;\n\n@Suite\n@SelectPackages({\n    &quot;com.package1&quot;,\n    &quot;com.package2&quot;,\n    &quot;com.package3&quot;\n})\npublic class AllMyTests {\n\n}\n</code></pre>\n<p>If you need to be able to exclude certain sub-packages you can do:</p>\n<pre><code>import org.junit.platform.suite.api.ExcludePackages;\nimport org.junit.platform.suite.api.SelectPackages;\nimport org.junit.platform.suite.api.Suite;\n\n@Suite\n@SelectPackages({\n    &quot;com.package1&quot;,\n    &quot;com.package2&quot;,\n    &quot;com.package3&quot;\n})\n@ExcludePackages({\n    &quot;com.package1.subpackage&quot;,\n    &quot;com.package2.othersubpackage&quot;\n})\npublic class AllMyTests {\n\n}\n</code></pre>\n<p>Other useful annotations:</p>\n<ul>\n<li>To match a particular pattern:\n<code>@IncludeClassNamePatterns({&quot;^.*ATests?$&quot;})</code></li>\n<li>To exclude a particular pattern:\n<code>@ExcludeClassNamePatterns({&quot;^.*ATests?$&quot;})</code></li>\n</ul>\n<p>Examples were based on: <a href=\"https://howtodoinjava.com/junit5/junit5-test-suites-examples/\" rel=\"nofollow noreferrer\">https://howtodoinjava.com/junit5/junit5-test-suites-examples/</a></p>\n"}],"owner":{"account_id":5380,"reputation":1175,"user_id":8633,"display_name":"will"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45340,"favorite_count":0,"down_vote_count":0,"up_vote_count":53,"answer_count":8,"score":53,"last_activity_date":1671802151,"creation_date":1231164964,"question_id":413214,"body_markdown":"Is it possible to run JUnit tests for multiple packages at the same time without manually creating test suites.\r\n\r\nFor example if I have the hierarchy:\r\n\r\ncode.branchone&lt;br/&gt;\r\ncode.branchone.aaa&lt;br/&gt;\r\ncode.branchone.bbb&lt;br/&gt;\r\ncode.branchtwo&lt;br/&gt;\r\ncode.branchtwo.aaa&lt;br/&gt;\r\ncode.branchtwo.bbb&lt;br/&gt;\r\n\r\nIs it possible to:\r\n\r\n 1. Run all tests in code.branchone and in descendent packages\r\n 2. Run all tests in say code.branchone.aaa and code.branchtwo.bbb\r\n\r\nThe problem I see with manually creating test suites is that when new tests come along you may forget to add them.\r\n\r\n","title":"Is it possible to run JUnit tests from multiple packages in Eclipse?","body":"<p>Is it possible to run JUnit tests for multiple packages at the same time without manually creating test suites.</p>\n\n<p>For example if I have the hierarchy:</p>\n\n<p>code.branchone<br/>\ncode.branchone.aaa<br/>\ncode.branchone.bbb<br/>\ncode.branchtwo<br/>\ncode.branchtwo.aaa<br/>\ncode.branchtwo.bbb<br/></p>\n\n<p>Is it possible to:</p>\n\n<ol>\n<li>Run all tests in code.branchone and in descendent packages</li>\n<li>Run all tests in say code.branchone.aaa and code.branchtwo.bbb</li>\n</ol>\n\n<p>The problem I see with manually creating test suites is that when new tests come along you may forget to add them.</p>\n"},{"tags":["java","selenium","xpath","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"account_id":122932,"reputation":51815,"user_id":317052,"accept_rate":86,"display_name":"Daniel Haley"},"score":0,"creation_date":1484263356,"post_id":41622240,"comment_id":70450921,"body_markdown":"`//` is short for `/descendant-or-self::node()/`. See https://www.w3.org/TR/xpath/#path-abbrev for more info.","body":"<code>&#47;&#47;</code> is short for <code>&#47;descendant-or-self::node()&#47;</code>. See <a href=\"https://www.w3.org/TR/xpath/#path-abbrev\" rel=\"nofollow noreferrer\">w3.org/TR/xpath/#path-abbrev</a> for more info."},{"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"score":0,"creation_date":1484293120,"post_id":41622240,"comment_id":70459211,"body_markdown":"&quot;descendant or self&quot; sounds contradicting with what other people saying (from root)?","body":"&quot;descendant or self&quot; sounds contradicting with what other people saying (from root)?"},{"owner":{"account_id":122932,"reputation":51815,"user_id":317052,"accept_rate":86,"display_name":"Daniel Haley"},"score":0,"creation_date":1484301195,"post_id":41622240,"comment_id":70463314,"body_markdown":"Take a look at the link to the spec above. Scroll past the examples in the beginning of that section and read the last few paragraphs. It explains both `//` and `.` and how they work together.","body":"Take a look at the link to the spec above. Scroll past the examples in the beginning of that section and read the last few paragraphs. It explains both <code>&#47;&#47;</code> and <code>.</code> and how they work together."},{"owner":{"account_id":122932,"reputation":51815,"user_id":317052,"accept_rate":86,"display_name":"Daniel Haley"},"score":0,"creation_date":1484322647,"post_id":41622240,"comment_id":70476531,"body_markdown":"This might also help: http://stackoverflow.com/q/33918010/317052","body":"This might also help: <a href=\"http://stackoverflow.com/q/33918010/317052\">stackoverflow.com/q/33918010/317052</a>"}],"answers":[{"tags":[],"owner":{"account_id":4608097,"reputation":20703,"user_id":3737009,"accept_rate":69,"display_name":"Granitosaurus"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1484253786,"creation_date":1484253786,"answer_id":41622610,"question_id":41622240,"body_markdown":"Your xpath is faulty here.\r\n\r\n    &quot;//li[starts-with(@class, &#39;_lessons--row-&#39;)]&quot;\r\n\r\n`//` searches from root level, to search from node preappend `.`:\r\n\r\n    &quot;.//li[starts-with(@class, &#39;_lessons--row-&#39;)]&quot;","title":"Too many results when finding within element with Selenium WebDriver","body":"<p>Your xpath is faulty here.</p>\n\n<pre><code>\"//li[starts-with(@class, '_lessons--row-')]\"\n</code></pre>\n\n<p><code>//</code> searches from root level, to search from node preappend <code>.</code>:</p>\n\n<pre><code>\".//li[starts-with(@class, '_lessons--row-')]\"\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10011868,"reputation":77,"user_id":7404484,"accept_rate":50,"display_name":"promitheus"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484283635,"creation_date":1484283635,"answer_id":41627670,"question_id":41622240,"body_markdown":"Try your xpath with .// , normally you should start xpath with &quot;.&quot; to stop finding elements from root.  \r\n\r\n    .//li[starts-with(@class, &#39;_lessons--row-&#39;)]","title":"Too many results when finding within element with Selenium WebDriver","body":"<p>Try your xpath with .// , normally you should start xpath with \".\" to stop finding elements from root.  </p>\n\n<pre><code>.//li[starts-with(@class, '_lessons--row-')]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6597861,"reputation":7627,"user_id":5097027,"accept_rate":71,"display_name":"NarendraR"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1484288548,"creation_date":1484288548,"answer_id":41628547,"question_id":41622240,"body_markdown":" `//` match relative data. which starts at the document root. In your case you are trying to locate using \r\n\r\n    //li[starts-with(@class, &#39;_lessons--row-&#39;)]\r\n\r\nSo it will return all the match in your html. If you want to locate some specific portion of element with `class` have start text`_lessons--row-` . You have to make your `xpath` more specific.\r\n\r\ne.g \r\n\r\n     //div[@id=&#39;someid&#39;]//li[starts-with(@class, &#39;_lessons--row-&#39;)]\r\n\r\n","title":"Too many results when finding within element with Selenium WebDriver","body":"<p><code>//</code> match relative data. which starts at the document root. In your case you are trying to locate using </p>\n\n<pre><code>//li[starts-with(@class, '_lessons--row-')]\n</code></pre>\n\n<p>So it will return all the match in your html. If you want to locate some specific portion of element with <code>class</code> have start text<code>_lessons--row-</code> . You have to make your <code>xpath</code> more specific.</p>\n\n<p>e.g </p>\n\n<pre><code> //div[@id='someid']//li[starts-with(@class, '_lessons--row-')]\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23489944,"reputation":26,"user_id":17541087,"display_name":"collder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671802096,"creation_date":1666102794,"answer_id":74112581,"question_id":41622240,"body_markdown":"I had a similar case, but `.` before `//` didn&#39;t help me. Just added `findElements(By.xpath(&quot;your_xpath&quot;)).stream().filter(WebElement::isDisplayed).toList()` as a workaround.","title":"Too many results when finding within element with Selenium WebDriver","body":"<p>I had a similar case, but <code>.</code> before <code>//</code> didn't help me. Just added <code>findElements(By.xpath(&quot;your_xpath&quot;)).stream().filter(WebElement::isDisplayed).toList()</code> as a workaround.</p>\n"}],"owner":{"account_id":94736,"reputation":48421,"user_id":258483,"accept_rate":46,"display_name":"Dims"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":793,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":41622610,"answer_count":4,"score":0,"last_activity_date":1671802096,"creation_date":1484252367,"question_id":41622240,"body_markdown":"I did the following search\r\n\r\n    parts.get(i).findElements(By.xpath(&quot;//li[starts-with(@class, &#39;_lessons--row-&#39;)]&quot;))\r\n\r\nand it returned dozens of results, while I see in Developer Tools, that there are no more than 3 of them.\r\n\r\n`parts.get(i)` returns single [`WebElement`][1].\r\n\r\nLooks like it searches not children of a given element, but over entire page. Can double slash cause this? What double slash means in XPath?\r\n\r\n\r\n  [1]: https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebElement.html","title":"Too many results when finding within element with Selenium WebDriver","body":"<p>I did the following search</p>\n\n<pre><code>parts.get(i).findElements(By.xpath(\"//li[starts-with(@class, '_lessons--row-')]\"))\n</code></pre>\n\n<p>and it returned dozens of results, while I see in Developer Tools, that there are no more than 3 of them.</p>\n\n<p><code>parts.get(i)</code> returns single <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebElement.html\" rel=\"nofollow noreferrer\"><code>WebElement</code></a>.</p>\n\n<p>Looks like it searches not children of a given element, but over entire page. Can double slash cause this? What double slash means in XPath?</p>\n"},{"tags":["java","wiremock"],"answers":[{"tags":[],"owner":{"account_id":16106441,"reputation":6176,"user_id":11625850,"display_name":"agoff"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584974312,"creation_date":1584974312,"answer_id":60815702,"question_id":60541307,"body_markdown":"You can use [Request Matching][1] to get matching query parameters. There are a number of different ways that this can be implemented and without knowing exactly what you would like to test, I don&#39;t think I can recommend one strategy over the others.\r\n\r\n\r\n  [1]: http://wiremock.org/docs/request-matching/","title":"Is there any way to test array type query parameter in WireMock?","body":"<p>You can use <a href=\"http://wiremock.org/docs/request-matching/\" rel=\"nofollow noreferrer\">Request Matching</a> to get matching query parameters. There are a number of different ways that this can be implemented and without knowing exactly what you would like to test, I don't think I can recommend one strategy over the others.</p>\n"},{"tags":[],"owner":{"account_id":15921623,"reputation":592,"user_id":11488462,"display_name":"Dirk Bolte"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671793748,"creation_date":1671793748,"answer_id":74898971,"question_id":60541307,"body_markdown":"As of now (Dec &#39;22), there&#39;s no built-in solution utilising the RequestPatternBuilder. The corresponding GitHub issue for this is: https://github.com/wiremock/wiremock/issues/398 .\r\n\r\nThere is however a way to build this your own using `andMatching` as described in the issue&#39;s comment https://github.com/wiremock/wiremock/issues/398#issuecomment-778465146 :\r\n\r\n```java\r\nwireMockRule.stubFor(\r\n  get(urlPathEqualTo(&quot;/path&quot;))\r\n  .andMatching(request -&gt;\r\n    MatchResult.of(\r\n      Matchers.containsInAnyOrder(&quot;filter1&quot;, &quot;filter2&quot;)\r\n        .matches(request.queryParameter(&quot;filter&quot;).values()\r\n    )\r\n  )\r\n)\r\n```\r\n\r\nor in Kotlin:\r\n\r\n```kotlin\r\nwireMockRule.stubFor(\r\n  get(urlPathEqualTo(&quot;/path&quot;))\r\n  .andMatching {\r\n    MatchResult.of(\r\n      Matchers.containsInAnyOrder(&quot;filter1&quot;, &quot;filter2&quot;)\r\n        .matches(it.queryParameter(&quot;filter&quot;).values()\r\n    )\r\n  }\r\n)\r\n```","title":"Is there any way to test array type query parameter in WireMock?","body":"<p>As of now (Dec '22), there's no built-in solution utilising the RequestPatternBuilder. The corresponding GitHub issue for this is: <a href=\"https://github.com/wiremock/wiremock/issues/398\" rel=\"nofollow noreferrer\">https://github.com/wiremock/wiremock/issues/398</a> .</p>\n<p>There is however a way to build this your own using <code>andMatching</code> as described in the issue's comment <a href=\"https://github.com/wiremock/wiremock/issues/398#issuecomment-778465146\" rel=\"nofollow noreferrer\">https://github.com/wiremock/wiremock/issues/398#issuecomment-778465146</a> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>wireMockRule.stubFor(\n  get(urlPathEqualTo(&quot;/path&quot;))\n  .andMatching(request -&gt;\n    MatchResult.of(\n      Matchers.containsInAnyOrder(&quot;filter1&quot;, &quot;filter2&quot;)\n        .matches(request.queryParameter(&quot;filter&quot;).values()\n    )\n  )\n)\n</code></pre>\n<p>or in Kotlin:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>wireMockRule.stubFor(\n  get(urlPathEqualTo(&quot;/path&quot;))\n  .andMatching {\n    MatchResult.of(\n      Matchers.containsInAnyOrder(&quot;filter1&quot;, &quot;filter2&quot;)\n        .matches(it.queryParameter(&quot;filter&quot;).values()\n    )\n  }\n)\n</code></pre>\n"}],"owner":{"account_id":8963401,"reputation":11,"user_id":6685099,"display_name":"lameduck"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1066,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1671801770,"creation_date":1583398056,"question_id":60541307,"body_markdown":"In my case I want to test query parameters of a request like\r\n``http://localhost/path?filter=filter1&amp;filter=filter2``\r\n\r\nWhat is the way to test this type of scenario?\r\n","title":"Is there any way to test array type query parameter in WireMock?","body":"<p>In my case I want to test query parameters of a request like\n<code>http://localhost/path?filter=filter1&amp;filter=filter2</code></p>\n<p>What is the way to test this type of scenario?</p>\n"},{"tags":["java","android","json","multithreading"],"comments":[{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1671778198,"post_id":74895045,"comment_id":132173955,"body_markdown":"The thread you use here `Handler handler = new Handler(Looper.getMainLooper());` is actually main (UI) thread itself. This may not arise a problem for a small set of data, however as the data gets bigger the more freezing in the UI might occur. Consider using a **background thread** instead.","body":"The thread you use here <code>Handler handler = new Handler(Looper.getMainLooper());</code> is actually main (UI) thread itself. This may not arise a problem for a small set of data, however as the data gets bigger the more freezing in the UI might occur. Consider using a <b>background thread</b> instead."},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1671778443,"post_id":74895045,"comment_id":132173992,"body_markdown":"Can you explain the actual problem clearly? It&#39;s hard to understand what the problem is from the images since they have only some markers and don&#39;t explain anything.","body":"Can you explain the actual problem clearly? It&#39;s hard to understand what the problem is from the images since they have only some markers and don&#39;t explain anything."},{"owner":{"account_id":24257347,"reputation":1,"user_id":18207501,"display_name":"Paul de Go&#255;s"},"score":0,"creation_date":1671802194,"post_id":74895045,"comment_id":132179599,"body_markdown":"The images show that there are not the right items (here tools) in the lists. \nIn the JSON we can see the increments, but when displayed in the expandable list the display is not good.","body":"The images show that there are not the right items (here tools) in the lists.  In the JSON we can see the increments, but when displayed in the expandable list the display is not good."},{"owner":{"account_id":24257347,"reputation":1,"user_id":18207501,"display_name":"Paul de Go&#255;s"},"score":0,"creation_date":1671802548,"post_id":74895045,"comment_id":132179692,"body_markdown":"Thanks for your clarification on my Handler. Would it be better to use an Async Task?","body":"Thanks for your clarification on my Handler. Would it be better to use an Async Task?"},{"owner":{"account_id":17575058,"reputation":2200,"user_id":12749998,"display_name":"Kozmotronik"},"score":0,"creation_date":1671804160,"post_id":74895045,"comment_id":132180134,"body_markdown":"I would recommend you to use either [ExecutorService](https://developer.android.com/guide/background/asynchronous/java-threads#create-multiple) or [HandlerThread](https://developer.android.com/reference/android/os/HandlerThread) as a single threaded solution. `HandlerThread` is more Android OS specific hence can&#39;t be used in non-Android projects. In case of you don&#39;t know, you can&#39;t update UI elements from a background thread.","body":"I would recommend you to use either <a href=\"https://developer.android.com/guide/background/asynchronous/java-threads#create-multiple\" rel=\"nofollow noreferrer\">ExecutorService</a> or <a href=\"https://developer.android.com/reference/android/os/HandlerThread\" rel=\"nofollow noreferrer\">HandlerThread</a> as a single threaded solution. <code>HandlerThread</code> is more Android OS specific hence can&#39;t be used in non-Android projects. In case of you don&#39;t know, you can&#39;t update UI elements from a background thread."},{"owner":{"account_id":24257347,"reputation":1,"user_id":18207501,"display_name":"Paul de Go&#255;s"},"score":0,"creation_date":1671807405,"post_id":74895045,"comment_id":132181007,"body_markdown":"Thank you I will look into it\nSo in principle, I create my Hashmap containing my classification in background\nThen I use it for my adapter","body":"Thank you I will look into it So in principle, I create my Hashmap containing my classification in background Then I use it for my adapter"}],"owner":{"account_id":24257347,"reputation":1,"user_id":18207501,"display_name":"Paul de Go&#255;s"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":29,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671801760,"creation_date":1671754815,"question_id":74895045,"body_markdown":"I have made a page allowing to see tools arranged in classes and subclasses (3rd floor).\r\nThe tools database is on a server, and I receive the data as JSON.\r\n\r\n\r\n Everything was working fine until I added a number of tools (and therefore classes)\r\nMy tools appear several times without reason in classes that are not the right ones.\r\nI checked the JSON, no problem.\r\nHere are screenshots of the problem and the code that allows me to retrieve the data and send it to my adapter.\r\nThanks for your help.\r\n\r\n* [Random display problem image 1](https://i.stack.imgur.com/TM6Y2.png)\r\n* [Random display problem image 2](https://i.stack.imgur.com/BXS0p.png)\r\n* [Random display problem image 3](https://i.stack.imgur.com/vVjDZ.png)\r\n\r\n```lang-java\r\nArrayList&lt;String&gt; famille1 = new ArrayList&lt;&gt;();\r\nArrayList&lt;String&gt; typeliste = new ArrayList&lt;&gt;();\r\nHashMap&lt;String, HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt;&gt; ma = new HashMap&lt;&gt;();\r\nArrayList&lt;String&gt; materiauliste = new ArrayList&lt;&gt;();\r\nHashMap&lt;String, HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt;&gt; materielsItemList = new HashMap&lt;&gt;();\r\nHandler handler = new Handler(Looper.getMainLooper());\r\nhandler.post(new Runnable() {\r\n    @Override\r\n    public void run() {\r\n        FetchData fetchData = new FetchData(&quot;http://&quot; + adresseIp.getAdresseIP() + &quot;/jsonmateriels.php&quot;);\r\n        if (fetchData.startFetch()) {\r\n            if (fetchData.onComplete()) {\r\n                String json = fetchData.getResult();\r\n                        try {\r\n                            HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt; typeItemList = new HashMap&lt;&gt;();\r\n                            JSONObject jsonObject = new JSONObject(json);\r\n                            JSONArray jsonArrayOutils = jsonObject.getJSONArray(&quot;Outils&quot;);\r\n                            for (int j = 0; j &lt; jsonArrayOutils.length(); j++) {\r\n                                HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt; typeItemList1 = new HashMap&lt;&gt;();\r\n                                JSONObject fam = jsonArrayOutils.getJSONObject(j);\r\n                                String famille = fam.names().getString(0);//permet d&#39;avoir les choses contenu dans la classe soudeurs\r\n                                JSONArray jsonArrayFamille = fam.getJSONArray(famille);//permet de r&#233;cup&#233;rer le suivant\r\n                                famille1.add(famille);\r\n                                for (int i = 0; i &lt; jsonArrayFamille.length(); i++) {\r\n                                    HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt; matItemList = new HashMap&lt;&gt;();\r\n                                    JSONObject typ = jsonArrayFamille.getJSONObject(i);\r\n                                    String type = typ.names().getString(0);\r\n                                    JSONArray jsonArrayType = typ.getJSONArray(type);\r\n                                    typeliste.add(type);\r\n                                    for (int k = 0; k &lt; jsonArrayType.length(); k++) {\r\n                                        JSONObject mat = jsonArrayType.getJSONObject(k);\r\n                                        ArrayList&lt;MatosItem&gt; outils = new ArrayList&lt;&gt;();\r\n                                        String materiau = mat.names().getString(0);\r\n                                        JSONArray jsonArraylistout = mat.getJSONArray(materiau);\r\n                                        materiauliste.add(materiau);\r\n                                        for (int l = 0; l &lt; jsonArraylistout.length(); l++) {\r\n                                            JSONObject out = jsonArraylistout.getJSONObject(l);\r\n                                            String description = out.getString(&quot;description&quot;);\r\n                                            String id = out.getString(&quot;id&quot;);\r\n                                            String ref = out.getString(&quot;ref&quot;);\r\n                                            String code_fourn = out.getString(&quot;code_fourn&quot;);\r\n                                            Log.e(&quot;boucle&quot;,description+id);\r\n                                            outils.add(new MatosItem(description, id, false, ref, code_fourn));\r\n                                        }\r\n                                        matItemList.put(materiau, outils);\r\n                                    }\r\n                                    typeItemList1.put(type, matItemList);\r\n                                }\r\n                                materielsItemList.put(famille, typeItemList1);\r\n                                tabLayout.addTab(tabLayout.newTab().setText(famille));\r\n\r\n                            }\r\n                            ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n\r\n                             for (String i : Objects.requireNonNull(materielsItemList.get(famille1.get(0))).keySet()) {\r\n                                list.add(i);\r\n                                 Log.e(TAG, &quot;run: &quot;+i );\r\n                            }\r\n\r\n                            typeItemList = materielsItemList.get(famille1.get(0));\r\n                            Log.e(TAG, &quot;run: &quot;+typeItemList );\r\n                            matosListView.setAdapter(new MatosItemAdapter(context, typeItemList,list ));\r\n                            tabLayout.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\r\n                                @Override\r\n                                public void onTabSelected(TabLayout.Tab tab) {\r\n                                    // get the current selected tab&#39;s position and replace the fragment accordingly\r\n                                    Fragment fragment = null;\r\n                                    if (tab.isSelected()) {\r\n                                        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();\r\n                                        for (String i : Objects.requireNonNull(materielsItemList.get(famille1.get(tab.getPosition()))).keySet()) {\r\n                                            list.add(i);\r\n                                        }\r\n                                        HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt; typeItemList1 = new HashMap&lt;&gt;();\r\n                                        typeItemList1 = materielsItemList.get(famille1.get(tab.getPosition()));\r\n                                        matosListView.setAdapter(new MatosItemAdapter(context, typeItemList1, list));\r\n                                    }\r\n\r\n                                    FragmentManager fm = getSupportFragmentManager();\r\n                                    FragmentTransaction ft = fm.beginTransaction();\r\n                                    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);\r\n                                    ft.commit();\r\n                                }\r\n\r\n                                @Override\r\n                                public void onTabUnselected(TabLayout.Tab tab) {\r\n\r\n                                }\r\n\r\n                                @Override\r\n                                public void onTabReselected(TabLayout.Tab tab) {\r\n\r\n                                }\r\n                            });\r\n                            progressBar.setVisibility(GONE);\r\n\r\n                        } catch (JSONException e) {\r\n                            e.printStackTrace();\r\n                        }\r\n            }\r\n        }\r\n    }\r\n});\r\n```\r\n\r\nI checked the JSON\r\nI tried to use a thread\r\n\r\n``` lang-json\r\n{\r\n    &quot;Outils&quot; : [{\r\n        &quot;Soudeurs&quot; : [\r\n        {\r\n            &quot;Fils&quot; : [\r\n            {\r\n                &quot;Fil&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Fil MIG G3SI1 diam 1.2&quot;,\r\n                    &quot;id&quot; : &quot;26&quot;,\r\n                    &quot;ref&quot; : &quot;bobine de 15 kg&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Fourre OK1413 diam 1.2&quot;,\r\n                    &quot;id&quot; : &quot;45&quot;,\r\n                    &quot;ref&quot; : &quot;bobine 16 kg avec gaz&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;MIG inox 316L SI diam 1.2&quot;,\r\n                    &quot;id&quot; : &quot;46&quot;,\r\n                    &quot;ref&quot; : &quot;bobine 15 kg&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }]\r\n            }]\r\n        },\r\n        {\r\n            &quot;Materiel de soudure&quot; : [\r\n            {\r\n                &quot;Gaine guide&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;fil 25 x 45 4M diam 1.2&quot;,\r\n                    &quot;id&quot; : &quot;27&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }\r\n            ]},\r\n            {\r\n                &quot;Batterie&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Warrior AIR ESAB&quot;,\r\n                    &quot;id&quot; : &quot;47&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }\r\n            ]},\r\n            {\r\n                &quot;Cagoule&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Couvre nuque noire ESAB&quot;,\r\n                    &quot;id&quot; : &quot;48&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }\r\n            ]},\r\n            {\r\n                &quot;Protection&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Ecran de protection bleu&quot;,\r\n                    &quot;id&quot; : &quot;49&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Visiere transparente pour ecran HG930B&quot;,\r\n                    &quot;id&quot; : &quot;50&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Visiere teinte pour ecran HG930B&quot;,\r\n                    &quot;id&quot; : &quot;51&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }\r\n            ]},\r\n            {\r\n                &quot;Pince&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Stubby original 400 A&quot;,\r\n                    &quot;id&quot; : &quot;52&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Masse bronze GCB 450 A&quot;,\r\n                    &quot;id&quot; : &quot;53&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Masse bronze GCB 600 A&quot;,\r\n                    &quot;id&quot; : &quot;54&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }]\r\n            }]\r\n        },\r\n        {\r\n            &quot;Electrodes&quot; : [\r\n            {\r\n                &quot;OK4627&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 2.5 x 350 rutile&quot;,\r\n                    &quot;id&quot; : &quot;25&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }]\r\n            },\r\n            {\r\n                &quot;OK4800&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 2.5 x 350&quot;,\r\n                    &quot;id&quot; : &quot;32&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 3.2 x 350&quot;,\r\n                    &quot;id&quot; : &quot;33&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 4 x 350&quot;,\r\n                    &quot;id&quot; : &quot;34&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 5 x 450&quot;,\r\n                    &quot;id&quot; : &quot;35&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }]\r\n            },\r\n            {\r\n                &quot;Inox 316 L 17&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 2.5 x 300&quot;,\r\n                    &quot;id&quot; : &quot;36&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 3.2 x 350&quot;,\r\n                    &quot;id&quot; : &quot;37&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;Diam 4 x 350&quot;,\r\n                    &quot;id&quot; : &quot;38&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }]\r\n            },\r\n            {\r\n                &quot;Gougeage&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;6 x 305&quot;,\r\n                    &quot;id&quot; : &quot;39&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;8 x 305&quot;,\r\n                    &quot;id&quot; : &quot;40&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                },\r\n                {\r\n                    &quot;description&quot; : &quot;10 x 305&quot;,\r\n                    &quot;id&quot; : &quot;41&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }]\r\n            },\r\n            {\r\n                &quot;Nue&quot; : [\r\n                {\r\n                    &quot;description&quot; : &quot;9.5 x 914 slice&quot;,\r\n                    &quot;id&quot; : &quot;42&quot;,\r\n                    &quot;ref&quot; : &quot;x&quot;,\r\n                    &quot;code_fourn&quot; : &quot;x&quot;\r\n                }]\r\n            }]\r\n        }]},\r\n        {\r\n            &quot;Ajusteurs&quot; : [\r\n            {\r\n                &quot;Accessoires&quot; : [\r\n                {\r\n                    &quot;Nettoyant&quot; : [\r\n                    {\r\n                        &quot;description&quot; : &quot;26.5 kg alfa marine&quot;,\r\n                        &quot;id&quot; : &quot;44&quot;,\r\n                        &quot;ref&quot; : &quot;x&quot;,\r\n                        &quot;code_fourn&quot; : &quot;x&quot;\r\n                    }]\r\n                }]\r\n            },\r\n            {\r\n                &quot;Hydraulique&quot; : [\r\n                {\r\n                    &quot;Huile&quot; : [\r\n                    {\r\n                        &quot;description&quot; : &quot;Enerpac HF95Y bidon 5L&quot;,\r\n                        &quot;id&quot; : &quot;43&quot;,\r\n                        &quot;ref&quot; : &quot;x&quot;,\r\n                        &quot;code_fourn&quot; : &quot;x&quot;\r\n                    }]\r\n                }]\r\n            }]\r\n        },\r\n        {\r\n            &quot;Machinistes&quot; : [\r\n            {\r\n                &quot;Accessoires&quot; : [\r\n                {\r\n                    &quot;Lame ebavureur&quot; : [\r\n                    {\r\n                        &quot;description&quot; : &quot;E100S (longue) boite de 10&quot;,\r\n                        &quot;id&quot; : &quot;30&quot;,\r\n                        &quot;ref&quot; : &quot;x&quot;,\r\n                        &quot;code_fourn&quot; : &quot;x&quot;\r\n                    },\r\n                    {\r\n                        &quot;description&quot; : &quot;B10S (courte) boite de 10&quot;,\r\n                        &quot;id&quot; : &quot;31&quot;,\r\n                        &quot;ref&quot; : &quot;x&quot;,\r\n                        &quot;code_fourn&quot; : &quot;x&quot;\r\n                    }]\r\n                }]\r\n            }]\r\n        }]\r\n    }\r\n\r\n```\r\n\r\nI would like to have a correct display of the tools and their class. I don&#39;t have to have expandables list","title":"Problem displaying an expandable list android studio java","body":"<p>I have made a page allowing to see tools arranged in classes and subclasses (3rd floor).\nThe tools database is on a server, and I receive the data as JSON.</p>\n<p>Everything was working fine until I added a number of tools (and therefore classes)\nMy tools appear several times without reason in classes that are not the right ones.\nI checked the JSON, no problem.\nHere are screenshots of the problem and the code that allows me to retrieve the data and send it to my adapter.\nThanks for your help.</p>\n<ul>\n<li><a href=\"https://i.stack.imgur.com/TM6Y2.png\" rel=\"nofollow noreferrer\">Random display problem image 1</a></li>\n<li><a href=\"https://i.stack.imgur.com/BXS0p.png\" rel=\"nofollow noreferrer\">Random display problem image 2</a></li>\n<li><a href=\"https://i.stack.imgur.com/vVjDZ.png\" rel=\"nofollow noreferrer\">Random display problem image 3</a></li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>ArrayList&lt;String&gt; famille1 = new ArrayList&lt;&gt;();\nArrayList&lt;String&gt; typeliste = new ArrayList&lt;&gt;();\nHashMap&lt;String, HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt;&gt; ma = new HashMap&lt;&gt;();\nArrayList&lt;String&gt; materiauliste = new ArrayList&lt;&gt;();\nHashMap&lt;String, HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt;&gt; materielsItemList = new HashMap&lt;&gt;();\nHandler handler = new Handler(Looper.getMainLooper());\nhandler.post(new Runnable() {\n    @Override\n    public void run() {\n        FetchData fetchData = new FetchData(&quot;http://&quot; + adresseIp.getAdresseIP() + &quot;/jsonmateriels.php&quot;);\n        if (fetchData.startFetch()) {\n            if (fetchData.onComplete()) {\n                String json = fetchData.getResult();\n                        try {\n                            HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt; typeItemList = new HashMap&lt;&gt;();\n                            JSONObject jsonObject = new JSONObject(json);\n                            JSONArray jsonArrayOutils = jsonObject.getJSONArray(&quot;Outils&quot;);\n                            for (int j = 0; j &lt; jsonArrayOutils.length(); j++) {\n                                HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt; typeItemList1 = new HashMap&lt;&gt;();\n                                JSONObject fam = jsonArrayOutils.getJSONObject(j);\n                                String famille = fam.names().getString(0);//permet d'avoir les choses contenu dans la classe soudeurs\n                                JSONArray jsonArrayFamille = fam.getJSONArray(famille);//permet de récupérer le suivant\n                                famille1.add(famille);\n                                for (int i = 0; i &lt; jsonArrayFamille.length(); i++) {\n                                    HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt; matItemList = new HashMap&lt;&gt;();\n                                    JSONObject typ = jsonArrayFamille.getJSONObject(i);\n                                    String type = typ.names().getString(0);\n                                    JSONArray jsonArrayType = typ.getJSONArray(type);\n                                    typeliste.add(type);\n                                    for (int k = 0; k &lt; jsonArrayType.length(); k++) {\n                                        JSONObject mat = jsonArrayType.getJSONObject(k);\n                                        ArrayList&lt;MatosItem&gt; outils = new ArrayList&lt;&gt;();\n                                        String materiau = mat.names().getString(0);\n                                        JSONArray jsonArraylistout = mat.getJSONArray(materiau);\n                                        materiauliste.add(materiau);\n                                        for (int l = 0; l &lt; jsonArraylistout.length(); l++) {\n                                            JSONObject out = jsonArraylistout.getJSONObject(l);\n                                            String description = out.getString(&quot;description&quot;);\n                                            String id = out.getString(&quot;id&quot;);\n                                            String ref = out.getString(&quot;ref&quot;);\n                                            String code_fourn = out.getString(&quot;code_fourn&quot;);\n                                            Log.e(&quot;boucle&quot;,description+id);\n                                            outils.add(new MatosItem(description, id, false, ref, code_fourn));\n                                        }\n                                        matItemList.put(materiau, outils);\n                                    }\n                                    typeItemList1.put(type, matItemList);\n                                }\n                                materielsItemList.put(famille, typeItemList1);\n                                tabLayout.addTab(tabLayout.newTab().setText(famille));\n\n                            }\n                            ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();\n\n                             for (String i : Objects.requireNonNull(materielsItemList.get(famille1.get(0))).keySet()) {\n                                list.add(i);\n                                 Log.e(TAG, &quot;run: &quot;+i );\n                            }\n\n                            typeItemList = materielsItemList.get(famille1.get(0));\n                            Log.e(TAG, &quot;run: &quot;+typeItemList );\n                            matosListView.setAdapter(new MatosItemAdapter(context, typeItemList,list ));\n                            tabLayout.addOnTabSelectedListener(new TabLayout.OnTabSelectedListener() {\n                                @Override\n                                public void onTabSelected(TabLayout.Tab tab) {\n                                    // get the current selected tab's position and replace the fragment accordingly\n                                    Fragment fragment = null;\n                                    if (tab.isSelected()) {\n                                        ArrayList&lt;String&gt; list = new ArrayList&lt;&gt;();\n                                        for (String i : Objects.requireNonNull(materielsItemList.get(famille1.get(tab.getPosition()))).keySet()) {\n                                            list.add(i);\n                                        }\n                                        HashMap&lt;String, HashMap&lt;String, ArrayList&lt;MatosItem&gt;&gt;&gt; typeItemList1 = new HashMap&lt;&gt;();\n                                        typeItemList1 = materielsItemList.get(famille1.get(tab.getPosition()));\n                                        matosListView.setAdapter(new MatosItemAdapter(context, typeItemList1, list));\n                                    }\n\n                                    FragmentManager fm = getSupportFragmentManager();\n                                    FragmentTransaction ft = fm.beginTransaction();\n                                    ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_OPEN);\n                                    ft.commit();\n                                }\n\n                                @Override\n                                public void onTabUnselected(TabLayout.Tab tab) {\n\n                                }\n\n                                @Override\n                                public void onTabReselected(TabLayout.Tab tab) {\n\n                                }\n                            });\n                            progressBar.setVisibility(GONE);\n\n                        } catch (JSONException e) {\n                            e.printStackTrace();\n                        }\n            }\n        }\n    }\n});\n</code></pre>\n<p>I checked the JSON\nI tried to use a thread</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n    &quot;Outils&quot; : [{\n        &quot;Soudeurs&quot; : [\n        {\n            &quot;Fils&quot; : [\n            {\n                &quot;Fil&quot; : [\n                {\n                    &quot;description&quot; : &quot;Fil MIG G3SI1 diam 1.2&quot;,\n                    &quot;id&quot; : &quot;26&quot;,\n                    &quot;ref&quot; : &quot;bobine de 15 kg&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Fourre OK1413 diam 1.2&quot;,\n                    &quot;id&quot; : &quot;45&quot;,\n                    &quot;ref&quot; : &quot;bobine 16 kg avec gaz&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;MIG inox 316L SI diam 1.2&quot;,\n                    &quot;id&quot; : &quot;46&quot;,\n                    &quot;ref&quot; : &quot;bobine 15 kg&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }]\n            }]\n        },\n        {\n            &quot;Materiel de soudure&quot; : [\n            {\n                &quot;Gaine guide&quot; : [\n                {\n                    &quot;description&quot; : &quot;fil 25 x 45 4M diam 1.2&quot;,\n                    &quot;id&quot; : &quot;27&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }\n            ]},\n            {\n                &quot;Batterie&quot; : [\n                {\n                    &quot;description&quot; : &quot;Warrior AIR ESAB&quot;,\n                    &quot;id&quot; : &quot;47&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }\n            ]},\n            {\n                &quot;Cagoule&quot; : [\n                {\n                    &quot;description&quot; : &quot;Couvre nuque noire ESAB&quot;,\n                    &quot;id&quot; : &quot;48&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }\n            ]},\n            {\n                &quot;Protection&quot; : [\n                {\n                    &quot;description&quot; : &quot;Ecran de protection bleu&quot;,\n                    &quot;id&quot; : &quot;49&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Visiere transparente pour ecran HG930B&quot;,\n                    &quot;id&quot; : &quot;50&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Visiere teinte pour ecran HG930B&quot;,\n                    &quot;id&quot; : &quot;51&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }\n            ]},\n            {\n                &quot;Pince&quot; : [\n                {\n                    &quot;description&quot; : &quot;Stubby original 400 A&quot;,\n                    &quot;id&quot; : &quot;52&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Masse bronze GCB 450 A&quot;,\n                    &quot;id&quot; : &quot;53&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Masse bronze GCB 600 A&quot;,\n                    &quot;id&quot; : &quot;54&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }]\n            }]\n        },\n        {\n            &quot;Electrodes&quot; : [\n            {\n                &quot;OK4627&quot; : [\n                {\n                    &quot;description&quot; : &quot;Diam 2.5 x 350 rutile&quot;,\n                    &quot;id&quot; : &quot;25&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }]\n            },\n            {\n                &quot;OK4800&quot; : [\n                {\n                    &quot;description&quot; : &quot;Diam 2.5 x 350&quot;,\n                    &quot;id&quot; : &quot;32&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Diam 3.2 x 350&quot;,\n                    &quot;id&quot; : &quot;33&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Diam 4 x 350&quot;,\n                    &quot;id&quot; : &quot;34&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Diam 5 x 450&quot;,\n                    &quot;id&quot; : &quot;35&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }]\n            },\n            {\n                &quot;Inox 316 L 17&quot; : [\n                {\n                    &quot;description&quot; : &quot;Diam 2.5 x 300&quot;,\n                    &quot;id&quot; : &quot;36&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Diam 3.2 x 350&quot;,\n                    &quot;id&quot; : &quot;37&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;Diam 4 x 350&quot;,\n                    &quot;id&quot; : &quot;38&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }]\n            },\n            {\n                &quot;Gougeage&quot; : [\n                {\n                    &quot;description&quot; : &quot;6 x 305&quot;,\n                    &quot;id&quot; : &quot;39&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;8 x 305&quot;,\n                    &quot;id&quot; : &quot;40&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                },\n                {\n                    &quot;description&quot; : &quot;10 x 305&quot;,\n                    &quot;id&quot; : &quot;41&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }]\n            },\n            {\n                &quot;Nue&quot; : [\n                {\n                    &quot;description&quot; : &quot;9.5 x 914 slice&quot;,\n                    &quot;id&quot; : &quot;42&quot;,\n                    &quot;ref&quot; : &quot;x&quot;,\n                    &quot;code_fourn&quot; : &quot;x&quot;\n                }]\n            }]\n        }]},\n        {\n            &quot;Ajusteurs&quot; : [\n            {\n                &quot;Accessoires&quot; : [\n                {\n                    &quot;Nettoyant&quot; : [\n                    {\n                        &quot;description&quot; : &quot;26.5 kg alfa marine&quot;,\n                        &quot;id&quot; : &quot;44&quot;,\n                        &quot;ref&quot; : &quot;x&quot;,\n                        &quot;code_fourn&quot; : &quot;x&quot;\n                    }]\n                }]\n            },\n            {\n                &quot;Hydraulique&quot; : [\n                {\n                    &quot;Huile&quot; : [\n                    {\n                        &quot;description&quot; : &quot;Enerpac HF95Y bidon 5L&quot;,\n                        &quot;id&quot; : &quot;43&quot;,\n                        &quot;ref&quot; : &quot;x&quot;,\n                        &quot;code_fourn&quot; : &quot;x&quot;\n                    }]\n                }]\n            }]\n        },\n        {\n            &quot;Machinistes&quot; : [\n            {\n                &quot;Accessoires&quot; : [\n                {\n                    &quot;Lame ebavureur&quot; : [\n                    {\n                        &quot;description&quot; : &quot;E100S (longue) boite de 10&quot;,\n                        &quot;id&quot; : &quot;30&quot;,\n                        &quot;ref&quot; : &quot;x&quot;,\n                        &quot;code_fourn&quot; : &quot;x&quot;\n                    },\n                    {\n                        &quot;description&quot; : &quot;B10S (courte) boite de 10&quot;,\n                        &quot;id&quot; : &quot;31&quot;,\n                        &quot;ref&quot; : &quot;x&quot;,\n                        &quot;code_fourn&quot; : &quot;x&quot;\n                    }]\n                }]\n            }]\n        }]\n    }\n\n</code></pre>\n<p>I would like to have a correct display of the tools and their class. I don't have to have expandables list</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"score":0,"creation_date":1672049067,"post_id":74900118,"comment_id":132212268,"body_markdown":"Frohe Weihnachten ! well i didn&#39;t tried to open any Git issue. i was expecting that issue was on my fault and was just a configuration issue. \nI&#39;m going to test now those new features and send to Chorus Pro. Actually, I just have to implement Min, BasicWL and later Basic fx. Ideally, a sample of each facturx in Mustang tests would be great. Luckily, at this time i was just working on a proof of concept and we just consider creating a real application right now. Thanks for the improvment.","body":"Frohe Weihnachten ! well i didn&#39;t tried to open any Git issue. i was expecting that issue was on my fault and was just a configuration issue.  I&#39;m going to test now those new features and send to Chorus Pro. Actually, I just have to implement Min, BasicWL and later Basic fx. Ideally, a sample of each facturx in Mustang tests would be great. Luckily, at this time i was just working on a proof of concept and we just consider creating a real application right now. Thanks for the improvment."},{"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"score":0,"creation_date":1672049275,"post_id":74900118,"comment_id":132212303,"body_markdown":"PS: I will try to find out other issues and create a github issue for this.","body":"PS: I will try to find out other issues and create a github issue for this."},{"owner":{"account_id":8290243,"reputation":106,"user_id":6232150,"display_name":"J. Staerk"},"score":0,"creation_date":1672150804,"post_id":74900118,"comment_id":132230140,"body_markdown":"Cool thanks, would be great to have a french reference user. And apologies for the lack of documentation, if I remember correctly even the issue &quot;publish parts of the testcase for minimum+siret+chorus somewhere on the homepage&quot; is still somewhere on my list.","body":"Cool thanks, would be great to have a french reference user. And apologies for the lack of documentation, if I remember correctly even the issue &quot;publish parts of the testcase for minimum+siret+chorus somewhere on the homepage&quot; is still somewhere on my list."}],"tags":[],"owner":{"account_id":8290243,"reputation":106,"user_id":6232150,"display_name":"J. Staerk"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1671801726,"creation_date":1671801726,"answer_id":74900118,"question_id":72450066,"body_markdown":"Trade Parties were defective, credit memos were defective and the minimum profile was most defective of all. Most of that should now be fixed in todays 2.6.0 and I also created a automatic test, which probably does most of what you want to do on https://github.com/ZUGFeRD/mustangproject/blob/master/library/src/test/java/org/mustangproject/ZUGFeRD/ProfilesMinimumBasicWLTest.java\r\n\r\nYou are so right that it really hurts you didn&#39;t just raise a Github issue, mention it in the mailing list https://groups.google.com/g/zugferd or via matrix (https://app.element.io/#/room/#facturx:matrix.org). \r\n\r\nThis is the second time that I actually learn of Chorus Pro requirements via Stackoverflow (besides, where do you have your sample from?) and I might have fixed this three months earlier if only I had been aware of it. \r\n\r\n\r\nJoyeux No&#235;l,\r\nJochen\r\n\r\n\r\nPS: I believe in the context of the previous stackoverflow encounter I had investigated and BusinessProcessSpecifiedDocumentContextParameter=A1 may actually be optional in terms of Chorus Pro, i.e. B2G, and I would be astonished if that was any different in B2B.","title":"Creating a min, basic and basic WL factur-x using mustang","body":"<p>Trade Parties were defective, credit memos were defective and the minimum profile was most defective of all. Most of that should now be fixed in todays 2.6.0 and I also created a automatic test, which probably does most of what you want to do on <a href=\"https://github.com/ZUGFeRD/mustangproject/blob/master/library/src/test/java/org/mustangproject/ZUGFeRD/ProfilesMinimumBasicWLTest.java\" rel=\"nofollow noreferrer\">https://github.com/ZUGFeRD/mustangproject/blob/master/library/src/test/java/org/mustangproject/ZUGFeRD/ProfilesMinimumBasicWLTest.java</a></p>\n<p>You are so right that it really hurts you didn't just raise a Github issue, mention it in the mailing list <a href=\"https://groups.google.com/g/zugferd\" rel=\"nofollow noreferrer\">https://groups.google.com/g/zugferd</a> or via matrix (<a href=\"https://app.element.io/#/room/#facturx:matrix.org\" rel=\"nofollow noreferrer\">https://app.element.io/#/room/#facturx:matrix.org</a>).</p>\n<p>This is the second time that I actually learn of Chorus Pro requirements via Stackoverflow (besides, where do you have your sample from?) and I might have fixed this three months earlier if only I had been aware of it.</p>\n<p>Joyeux Noël,\nJochen</p>\n<p>PS: I believe in the context of the previous stackoverflow encounter I had investigated and BusinessProcessSpecifiedDocumentContextParameter=A1 may actually be optional in terms of Chorus Pro, i.e. B2G, and I would be astonished if that was any different in B2B.</p>\n"}],"owner":{"account_id":11634705,"reputation":1396,"user_id":8521515,"accept_rate":41,"display_name":"davidvera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":121,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74900118,"answer_count":1,"score":0,"last_activity_date":1671801726,"creation_date":1654008995,"question_id":72450066,"body_markdown":"I try to create a factur-x using mustang library. \r\nI found how to create an EN16931 factur-x xml and how to embed it in the pdf. \r\n\r\nFor this I used the following code sample: \r\n\r\n    ZUGFeRDExporterFromA1 ze = new ZUGFeRDExporterFromA1().setProducer(&quot;My Application&quot;)\r\n              .setCreator(System.getProperty(&quot;user.name&quot;)).setZUGFeRDVersion(2).ignorePDFAErrors()\r\n              .load(&quot;blanko.pdf&quot;);\r\n    Invoice i = new Invoice()\r\n              .setIssueDate(new Date())\r\n              .setDueDate(new Date())\r\n              .setDetailedDeliveryPeriod(new Date(), new Date())\r\n              .setDeliveryDate(new Date())\r\n              .setSender(\r\n                      new TradeParty(&quot;ME&quot;, &quot;teststr&quot;, &quot;55232&quot;, &quot;teststadt&quot;, &quot;DE&quot;)\r\n                              .addTaxID(&quot;4711&quot;)\r\n                              .addVATID(&quot;DE0815&quot;)\r\n                              .addBankDetails(new BankDetails(&quot;DE88200800000970375700&quot;, &quot;COBADEFFXXX&quot;)))\r\n              .setRecipient(\r\n                      new TradeParty(&quot;Franz M&#252;ller&quot;, &quot;teststr.12&quot;, &quot;55232&quot;, &quot;Entenhausen&quot;, &quot;DE&quot;)\r\n                              .addVATID(&quot;DE0815&quot;))\r\n              .setNumber(&quot;NUMFACTURE&quot;)\r\n              .addItem(new Item(new Product(&quot;Testprodukt&quot;, &quot;&quot;, &quot;C62&quot;, new BigDecimal(19)), new BigDecimal(123), new BigDecimal(1)))\r\n              .addItem(new Item(new Product(&quot;Testprodukt&quot;, &quot;&quot;, &quot;C62&quot;, new BigDecimal(19)), new BigDecimal(123), new BigDecimal(1)))\r\n              .addItem(new Item(new Product(&quot;Testprodukt&quot;, &quot;&quot;, &quot;C62&quot;, new BigDecimal(19)), new BigDecimal(123), new BigDecimal(1)))\r\n              .setCreditNote();\r\n          ze.setTransaction(i);\r\n          ze.export(&quot;factur-x-en16931.pdf&quot;);\r\n\r\n\r\nThis code work fine. I do generate a valid PDF with valid XML data... My issue is concerning lower facturx level such as Minimum, Basic, Basic WL.  \r\n\r\nThe XML should look like this: \r\n\r\n\r\n    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39;?&gt;\r\n    &lt;rsm:CrossIndustryInvoice \r\n        xmlns:qdt=&quot;urn:un:unece:uncefact:data:standard:QualifiedDataType:100&quot;\r\n    \txmlns:ram=&quot;urn:un:unece:uncefact:data:standard:ReusableAggregateBusinessInformationEntity:100&quot;\r\n    \txmlns:rsm=&quot;urn:un:unece:uncefact:data:standard:CrossIndustryInvoice:100&quot;\r\n    \txmlns:udt=&quot;urn:un:unece:uncefact:data:standard:UnqualifiedDataType:100&quot;\r\n    \txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\r\n       &lt;rsm:ExchangedDocumentContext&gt;\r\n          &lt;ram:BusinessProcessSpecifiedDocumentContextParameter&gt;\r\n             &lt;ram:ID&gt;A1&lt;/ram:ID&gt;\r\n          &lt;/ram:BusinessProcessSpecifiedDocumentContextParameter&gt;\r\n          &lt;ram:GuidelineSpecifiedDocumentContextParameter&gt;\r\n             &lt;ram:ID&gt;urn:factur-x.eu:1p0:minimum&lt;/ram:ID&gt;\r\n          &lt;/ram:GuidelineSpecifiedDocumentContextParameter&gt;\r\n       &lt;/rsm:ExchangedDocumentContext&gt;\r\n       &lt;rsm:ExchangedDocument&gt;\r\n          &lt;ram:ID&gt;NUMFCADNO22&lt;/ram:ID&gt;\r\n          &lt;ram:TypeCode&gt;380&lt;/ram:TypeCode&gt;\r\n          &lt;ram:IssueDateTime&gt;\r\n             &lt;udt:DateTimeString format=&quot;102&quot;&gt;20220506&lt;/udt:DateTimeString&gt;\r\n          &lt;/ram:IssueDateTime&gt;\r\n       &lt;/rsm:ExchangedDocument&gt;\r\n       &lt;rsm:SupplyChainTradeTransaction&gt;\r\n          &lt;ram:ApplicableHeaderTradeAgreement&gt;\r\n             &lt;ram:SellerTradeParty&gt;\r\n                &lt;ram:Name&gt;ACME&lt;/ram:Name&gt;\r\n                &lt;ram:SpecifiedLegalOrganization&gt;\r\n                   &lt;ram:ID schemeID=&quot;0002&quot;&gt;3810011234560073&lt;/ram:ID&gt;\r\n                &lt;/ram:SpecifiedLegalOrganization&gt;\r\n                &lt;ram:PostalTradeAddress&gt;\r\n                   &lt;ram:CountryID&gt;FR&lt;/ram:CountryID&gt;\r\n                &lt;/ram:PostalTradeAddress&gt;\r\n                &lt;ram:SpecifiedTaxRegistration&gt;\r\n                   &lt;ram:ID schemeID=&quot;VA&quot;&gt;FR17143232666&lt;/ram:ID&gt;\r\n                &lt;/ram:SpecifiedTaxRegistration&gt;\r\n             &lt;/ram:SellerTradeParty&gt;\r\n             &lt;ram:BuyerTradeParty&gt;\r\n                &lt;ram:Name&gt;Client&lt;/ram:Name&gt;\r\n             &lt;/ram:BuyerTradeParty&gt;\r\n          &lt;/ram:ApplicableHeaderTradeAgreement&gt;\r\n          &lt;ram:ApplicableHeaderTradeDelivery/&gt;\r\n          &lt;ram:ApplicableHeaderTradeSettlement&gt;\r\n             &lt;ram:InvoiceCurrencyCode&gt;EUR&lt;/ram:InvoiceCurrencyCode&gt;\r\n             &lt;ram:SpecifiedTradeSettlementHeaderMonetarySummation&gt;\r\n                &lt;ram:TaxBasisTotalAmount&gt;200.00&lt;/ram:TaxBasisTotalAmount&gt;\r\n                &lt;ram:TaxTotalAmount currencyID=&quot;EUR&quot;&gt;40.00&lt;/ram:TaxTotalAmount&gt;\r\n                &lt;ram:GrandTotalAmount&gt;240.00&lt;/ram:GrandTotalAmount&gt;\r\n                &lt;ram:DuePayableAmount&gt;240.00&lt;/ram:DuePayableAmount&gt;\r\n             &lt;/ram:SpecifiedTradeSettlementHeaderMonetarySummation&gt;\r\n          &lt;/ram:ApplicableHeaderTradeSettlement&gt;\r\n       &lt;/rsm:SupplyChainTradeTransaction&gt;\r\n    &lt;/rsm:CrossIndustryInvoice&gt;\r\n\r\n\r\nMy issue is that i have issues creating such attached document. Here, i do need to set : \r\n  - IssueDateTime\r\n  - Seller name( but constructor requires all information)\r\n  - Seller VAT ID\r\n  - Buyer name\r\n  - Currency\r\n  - Total \r\n    - tax basis total amount\r\n    - tax total amount\r\n    - grand total amount\r\n    - due payable amount\r\n\r\n\r\nI partially found out how to set the profile. \r\n\r\n    ZUGFeRDExporterFromA1 ze = new ZUGFeRDExporterFromA1()\r\n          .setProducer(&quot;My Application&quot;)\r\n          .setCreator(System.getProperty(&quot;user.name&quot;))\r\n          .setZUGFeRDVersion(2)\r\n          .setProfile(&quot;MINIMUM&quot;)\r\n          .ignorePDFAErrors()\r\n          .load(&quot;blanko.pdf&quot;);\r\n\r\nI have issue concerning definig the invoice details: \r\n\r\n\r\n        Invoice i = new Invoice()\r\n                .setIssueDate(new Date())                                                                                   \r\n                // .setDueDate(new Date()) ==&gt; not required\r\n                // .setDetailedDeliveryPeriod(new Date(), new Date()) ==&gt; not required\r\n                // .setDeliveryDate(new Date()) ==&gt; not required\r\n                .setSender(\r\n                        new TradeParty(&quot;ACME&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;FR&quot;)\r\n                                .addVATID(&quot;FR17143232666&quot;))\r\n                .setRecipient(\r\n                        new TradeParty(&quot;Client test MOA&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)\r\n                                .addVATID(&quot;DE0815&quot;))\r\n                .setNumber(&quot;NUMFACTURE&quot;)\r\n                .setCurrency(&quot;EUR&quot;)\r\n                .setTotalPrepaidAmount(new BigDecimal(&quot;450.00&quot;));\r\n            ze.setTransaction(i);\r\n            ze.export(&quot;factur-x-min.pdf&quot;);\r\n\r\n\r\nI didn&#39;t find how to set values for required elements in Mustang and I have null pointers exceptions concerning dates for example.","title":"Creating a min, basic and basic WL factur-x using mustang","body":"<p>I try to create a factur-x using mustang library.\nI found how to create an EN16931 factur-x xml and how to embed it in the pdf.</p>\n<p>For this I used the following code sample:</p>\n<pre><code>ZUGFeRDExporterFromA1 ze = new ZUGFeRDExporterFromA1().setProducer(&quot;My Application&quot;)\n          .setCreator(System.getProperty(&quot;user.name&quot;)).setZUGFeRDVersion(2).ignorePDFAErrors()\n          .load(&quot;blanko.pdf&quot;);\nInvoice i = new Invoice()\n          .setIssueDate(new Date())\n          .setDueDate(new Date())\n          .setDetailedDeliveryPeriod(new Date(), new Date())\n          .setDeliveryDate(new Date())\n          .setSender(\n                  new TradeParty(&quot;ME&quot;, &quot;teststr&quot;, &quot;55232&quot;, &quot;teststadt&quot;, &quot;DE&quot;)\n                          .addTaxID(&quot;4711&quot;)\n                          .addVATID(&quot;DE0815&quot;)\n                          .addBankDetails(new BankDetails(&quot;DE88200800000970375700&quot;, &quot;COBADEFFXXX&quot;)))\n          .setRecipient(\n                  new TradeParty(&quot;Franz Müller&quot;, &quot;teststr.12&quot;, &quot;55232&quot;, &quot;Entenhausen&quot;, &quot;DE&quot;)\n                          .addVATID(&quot;DE0815&quot;))\n          .setNumber(&quot;NUMFACTURE&quot;)\n          .addItem(new Item(new Product(&quot;Testprodukt&quot;, &quot;&quot;, &quot;C62&quot;, new BigDecimal(19)), new BigDecimal(123), new BigDecimal(1)))\n          .addItem(new Item(new Product(&quot;Testprodukt&quot;, &quot;&quot;, &quot;C62&quot;, new BigDecimal(19)), new BigDecimal(123), new BigDecimal(1)))\n          .addItem(new Item(new Product(&quot;Testprodukt&quot;, &quot;&quot;, &quot;C62&quot;, new BigDecimal(19)), new BigDecimal(123), new BigDecimal(1)))\n          .setCreditNote();\n      ze.setTransaction(i);\n      ze.export(&quot;factur-x-en16931.pdf&quot;);\n</code></pre>\n<p>This code work fine. I do generate a valid PDF with valid XML data... My issue is concerning lower facturx level such as Minimum, Basic, Basic WL.</p>\n<p>The XML should look like this:</p>\n<pre><code>&lt;?xml version='1.0' encoding='UTF-8'?&gt;\n&lt;rsm:CrossIndustryInvoice \n    xmlns:qdt=&quot;urn:un:unece:uncefact:data:standard:QualifiedDataType:100&quot;\n    xmlns:ram=&quot;urn:un:unece:uncefact:data:standard:ReusableAggregateBusinessInformationEntity:100&quot;\n    xmlns:rsm=&quot;urn:un:unece:uncefact:data:standard:CrossIndustryInvoice:100&quot;\n    xmlns:udt=&quot;urn:un:unece:uncefact:data:standard:UnqualifiedDataType:100&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;&gt;\n   &lt;rsm:ExchangedDocumentContext&gt;\n      &lt;ram:BusinessProcessSpecifiedDocumentContextParameter&gt;\n         &lt;ram:ID&gt;A1&lt;/ram:ID&gt;\n      &lt;/ram:BusinessProcessSpecifiedDocumentContextParameter&gt;\n      &lt;ram:GuidelineSpecifiedDocumentContextParameter&gt;\n         &lt;ram:ID&gt;urn:factur-x.eu:1p0:minimum&lt;/ram:ID&gt;\n      &lt;/ram:GuidelineSpecifiedDocumentContextParameter&gt;\n   &lt;/rsm:ExchangedDocumentContext&gt;\n   &lt;rsm:ExchangedDocument&gt;\n      &lt;ram:ID&gt;NUMFCADNO22&lt;/ram:ID&gt;\n      &lt;ram:TypeCode&gt;380&lt;/ram:TypeCode&gt;\n      &lt;ram:IssueDateTime&gt;\n         &lt;udt:DateTimeString format=&quot;102&quot;&gt;20220506&lt;/udt:DateTimeString&gt;\n      &lt;/ram:IssueDateTime&gt;\n   &lt;/rsm:ExchangedDocument&gt;\n   &lt;rsm:SupplyChainTradeTransaction&gt;\n      &lt;ram:ApplicableHeaderTradeAgreement&gt;\n         &lt;ram:SellerTradeParty&gt;\n            &lt;ram:Name&gt;ACME&lt;/ram:Name&gt;\n            &lt;ram:SpecifiedLegalOrganization&gt;\n               &lt;ram:ID schemeID=&quot;0002&quot;&gt;3810011234560073&lt;/ram:ID&gt;\n            &lt;/ram:SpecifiedLegalOrganization&gt;\n            &lt;ram:PostalTradeAddress&gt;\n               &lt;ram:CountryID&gt;FR&lt;/ram:CountryID&gt;\n            &lt;/ram:PostalTradeAddress&gt;\n            &lt;ram:SpecifiedTaxRegistration&gt;\n               &lt;ram:ID schemeID=&quot;VA&quot;&gt;FR17143232666&lt;/ram:ID&gt;\n            &lt;/ram:SpecifiedTaxRegistration&gt;\n         &lt;/ram:SellerTradeParty&gt;\n         &lt;ram:BuyerTradeParty&gt;\n            &lt;ram:Name&gt;Client&lt;/ram:Name&gt;\n         &lt;/ram:BuyerTradeParty&gt;\n      &lt;/ram:ApplicableHeaderTradeAgreement&gt;\n      &lt;ram:ApplicableHeaderTradeDelivery/&gt;\n      &lt;ram:ApplicableHeaderTradeSettlement&gt;\n         &lt;ram:InvoiceCurrencyCode&gt;EUR&lt;/ram:InvoiceCurrencyCode&gt;\n         &lt;ram:SpecifiedTradeSettlementHeaderMonetarySummation&gt;\n            &lt;ram:TaxBasisTotalAmount&gt;200.00&lt;/ram:TaxBasisTotalAmount&gt;\n            &lt;ram:TaxTotalAmount currencyID=&quot;EUR&quot;&gt;40.00&lt;/ram:TaxTotalAmount&gt;\n            &lt;ram:GrandTotalAmount&gt;240.00&lt;/ram:GrandTotalAmount&gt;\n            &lt;ram:DuePayableAmount&gt;240.00&lt;/ram:DuePayableAmount&gt;\n         &lt;/ram:SpecifiedTradeSettlementHeaderMonetarySummation&gt;\n      &lt;/ram:ApplicableHeaderTradeSettlement&gt;\n   &lt;/rsm:SupplyChainTradeTransaction&gt;\n&lt;/rsm:CrossIndustryInvoice&gt;\n</code></pre>\n<p>My issue is that i have issues creating such attached document. Here, i do need to set :</p>\n<ul>\n<li>IssueDateTime</li>\n<li>Seller name( but constructor requires all information)</li>\n<li>Seller VAT ID</li>\n<li>Buyer name</li>\n<li>Currency</li>\n<li>Total\n<ul>\n<li>tax basis total amount</li>\n<li>tax total amount</li>\n<li>grand total amount</li>\n<li>due payable amount</li>\n</ul>\n</li>\n</ul>\n<p>I partially found out how to set the profile.</p>\n<pre><code>ZUGFeRDExporterFromA1 ze = new ZUGFeRDExporterFromA1()\n      .setProducer(&quot;My Application&quot;)\n      .setCreator(System.getProperty(&quot;user.name&quot;))\n      .setZUGFeRDVersion(2)\n      .setProfile(&quot;MINIMUM&quot;)\n      .ignorePDFAErrors()\n      .load(&quot;blanko.pdf&quot;);\n</code></pre>\n<p>I have issue concerning definig the invoice details:</p>\n<pre><code>    Invoice i = new Invoice()\n            .setIssueDate(new Date())                                                                                   \n            // .setDueDate(new Date()) ==&gt; not required\n            // .setDetailedDeliveryPeriod(new Date(), new Date()) ==&gt; not required\n            // .setDeliveryDate(new Date()) ==&gt; not required\n            .setSender(\n                    new TradeParty(&quot;ACME&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;FR&quot;)\n                            .addVATID(&quot;FR17143232666&quot;))\n            .setRecipient(\n                    new TradeParty(&quot;Client test MOA&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;)\n                            .addVATID(&quot;DE0815&quot;))\n            .setNumber(&quot;NUMFACTURE&quot;)\n            .setCurrency(&quot;EUR&quot;)\n            .setTotalPrepaidAmount(new BigDecimal(&quot;450.00&quot;));\n        ze.setTransaction(i);\n        ze.export(&quot;factur-x-min.pdf&quot;);\n</code></pre>\n<p>I didn't find how to set values for required elements in Mustang and I have null pointers exceptions concerning dates for example.</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot","spring-data-jpa"],"answers":[{"tags":[],"owner":{"account_id":2182602,"reputation":1740,"user_id":1931740,"accept_rate":80,"display_name":"Bunti"},"comment_count":0,"down_vote_count":1,"up_vote_count":23,"is_accepted":true,"score":22,"last_activity_date":1459049284,"creation_date":1459048080,"answer_id":36243408,"question_id":36241163,"body_markdown":"As you&#39;re already using Spring and Spring-Data-Jpa calling `sampleRepository.save(sample);` would suffice. [save][1] method first checks to see if the passed in entity is a new entity or an existing one based on the identity value of the entity. Identity is defined by primary keys of your entity. \r\n\r\nYou can also use [EntityManager#merge][2] method. But as you&#39;re already using Spring Data, save method will internally call the merge method.\r\n\r\n\r\nIn my opinion you don&#39;t need to use `@DynamicUpdate` unless you have got so many fields to be updated but only few are actually being updated and also has many constraints with other tables.\r\n\r\nSpring BeanUtils has nothing to do with object persistence. It is mainly aimed at doing Java bean specific operations such as copying properties, finding methods of a bean, getting property descriptors etc..\r\n\r\nP.S: So you do not need to check if `sample.getId()` is null or not and fetch the record from DB with `findOne` method. Just passing `sampleRepository.save(sample)` will save/update the record.\r\n\r\n  [1]: http://docs.spring.io/spring-data/data-commons/docs/current/api/org/springframework/data/repository/CrudRepository.html#save-S-\r\n  [2]: http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#merge(T)","title":"Spring JPA: How to upsert without losing data","body":"<p>As you're already using Spring and Spring-Data-Jpa calling <code>sampleRepository.save(sample);</code> would suffice. <a href=\"http://docs.spring.io/spring-data/data-commons/docs/current/api/org/springframework/data/repository/CrudRepository.html#save-S-\" rel=\"noreferrer\">save</a> method first checks to see if the passed in entity is a new entity or an existing one based on the identity value of the entity. Identity is defined by primary keys of your entity. </p>\n\n<p>You can also use <a href=\"http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html#merge(T)\" rel=\"noreferrer\">EntityManager#merge</a> method. But as you're already using Spring Data, save method will internally call the merge method.</p>\n\n<p>In my opinion you don't need to use <code>@DynamicUpdate</code> unless you have got so many fields to be updated but only few are actually being updated and also has many constraints with other tables.</p>\n\n<p>Spring BeanUtils has nothing to do with object persistence. It is mainly aimed at doing Java bean specific operations such as copying properties, finding methods of a bean, getting property descriptors etc..</p>\n\n<p>P.S: So you do not need to check if <code>sample.getId()</code> is null or not and fetch the record from DB with <code>findOne</code> method. Just passing <code>sampleRepository.save(sample)</code> will save/update the record.</p>\n"},{"tags":[],"owner":{"account_id":27336076,"reputation":1,"user_id":20847480,"display_name":"Ashish Arya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1671801657,"creation_date":1671801657,"answer_id":74900110,"question_id":36241163,"body_markdown":"I would prefer upsert instead of @DynamicUpdate. DynamicUpdate comes with a performance overhead and locking issues in case many requests are fired at same time.","title":"Spring JPA: How to upsert without losing data","body":"<p>I would prefer upsert instead of @DynamicUpdate. DynamicUpdate comes with a performance overhead and locking issues in case many requests are fired at same time.</p>\n"}],"owner":{"account_id":3268751,"reputation":1481,"user_id":2752615,"accept_rate":67,"display_name":"Arif Acar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43716,"favorite_count":0,"down_vote_count":0,"up_vote_count":21,"accepted_answer_id":36243408,"answer_count":2,"score":21,"last_activity_date":1671801657,"creation_date":1459028138,"question_id":36241163,"body_markdown":"Is there any way for insert a new record if doesn&#39;t exist and update the record if exist without losing old data?\r\n\r\nThis is my service layer method:\r\n\r\n\tpublic void saveSample(Sample sample) {\r\n\t\tSample samplePersistent = sample;\r\n\t\t\r\n\t\tif (sample.getId() != null) {\r\n\t\t\tsamplePersistent = sampleRepository.findOne(sample.getId());\r\n\t\t\tAssert.notNull(samplePersistent, &quot;Sample entity not found with id : &quot; + sample.getId());\r\n\t\t\t\r\n\t\t\tsamplePersistent.setLocation(sample.getLocation());\r\n\t\t\tsamplePersistent.setName(sample.getName());\r\n\t\t\tsamplePersistent.setType(sample.getType());\r\n            ...\r\n            ...\r\n \r\n\t\t}\r\n\t\t\r\n\t\tsamplePersistent.cloneAuditingInfoFrom(sample);\r\n\t\tsampleRepository.save(sample);\r\n\t}\r\n\r\nI think this is useless way.\r\n\r\nCan Spring BeanUtils Class or @DynamicUpdate Annotation solve my problem?","title":"Spring JPA: How to upsert without losing data","body":"<p>Is there any way for insert a new record if doesn't exist and update the record if exist without losing old data?</p>\n\n<p>This is my service layer method:</p>\n\n<pre><code>public void saveSample(Sample sample) {\n    Sample samplePersistent = sample;\n\n    if (sample.getId() != null) {\n        samplePersistent = sampleRepository.findOne(sample.getId());\n        Assert.notNull(samplePersistent, \"Sample entity not found with id : \" + sample.getId());\n\n        samplePersistent.setLocation(sample.getLocation());\n        samplePersistent.setName(sample.getName());\n        samplePersistent.setType(sample.getType());\n        ...\n        ...\n\n    }\n\n    samplePersistent.cloneAuditingInfoFrom(sample);\n    sampleRepository.save(sample);\n}\n</code></pre>\n\n<p>I think this is useless way.</p>\n\n<p>Can Spring BeanUtils Class or @DynamicUpdate Annotation solve my problem?</p>\n"},{"tags":["java","spring","spring-boot","testing","spring-test"],"comments":[{"owner":{"account_id":6390592,"reputation":16008,"user_id":4956907,"display_name":"Michał Krzywański"},"score":1,"creation_date":1671804440,"post_id":74900096,"comment_id":132180212,"body_markdown":"Did you have a look at [`DynamicPropertySource`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/DynamicPropertySource.html) ?","body":"Did you have a look at <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/test/context/DynamicPropertySource.html\" rel=\"nofollow noreferrer\"><code>DynamicPropertySource</code></a> ?"},{"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"score":0,"creation_date":1671814635,"post_id":74900096,"comment_id":132182955,"body_markdown":"yep, just found that. should solve my problem","body":"yep, just found that. should solve my problem"}],"owner":{"account_id":1109371,"reputation":14160,"user_id":1100135,"accept_rate":53,"display_name":"piotrek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":54,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671801520,"creation_date":1671801520,"question_id":74900096,"body_markdown":"I have a spring boot application that sends requests to external services. url and port of those services are configured using standard spring boot way - configuration properties. During integration tests i want to start my external mocks (e.g. test-container) using random free port, provide this port to spring-boot config and start the spring boot app. \r\n\r\nbut any `@SpringBootTest` requires config provided in annotation. that must be static. there is no way to provide a port this way. i need something like:\r\n\r\n```\r\nclass IntegrationTest {\r\n\r\n  static int port;\r\n\r\n  @BeforeAll\r\n  static void initialize_external_mocks() {\r\n     port = start_docker_and_get_its_port()\r\n  }\r\n\r\n  @Test\r\n  void should_call_external_service() {\r\n\r\n     start_my_spring_boot_app_with_port(port); // how to do this?\r\n\r\n     restTemplate.get(&quot;/my-spring-boot-app/request&quot;);\r\n\r\n     assert_my_docker_received_a_call_from_my_app();\r\n  }\r\n}\r\n```","title":"How to configure spring boot integration tests with random coordinates of external mocks?","body":"<p>I have a spring boot application that sends requests to external services. url and port of those services are configured using standard spring boot way - configuration properties. During integration tests i want to start my external mocks (e.g. test-container) using random free port, provide this port to spring-boot config and start the spring boot app.</p>\n<p>but any <code>@SpringBootTest</code> requires config provided in annotation. that must be static. there is no way to provide a port this way. i need something like:</p>\n<pre><code>class IntegrationTest {\n\n  static int port;\n\n  @BeforeAll\n  static void initialize_external_mocks() {\n     port = start_docker_and_get_its_port()\n  }\n\n  @Test\n  void should_call_external_service() {\n\n     start_my_spring_boot_app_with_port(port); // how to do this?\n\n     restTemplate.get(&quot;/my-spring-boot-app/request&quot;);\n\n     assert_my_docker_received_a_call_from_my_app();\n  }\n}\n</code></pre>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1671721122,"post_id":74889408,"comment_id":132162558,"body_markdown":"What&#39;s the problem with the code you shared? Or where are you stuck in extending it?","body":"What&#39;s the problem with the code you shared? Or where are you stuck in extending it?"},{"owner":{"account_id":21806975,"reputation":7,"user_id":16105042,"display_name":"Chen Argon"},"score":0,"creation_date":1671721330,"post_id":74889408,"comment_id":132162642,"body_markdown":"I have problem with extending it. Now I want to show a new list of &quot;users&quot; whose id matches the id in &quot;favor&quot;","body":"I have problem with extending it. Now I want to show a new list of &quot;users&quot; whose id matches the id in &quot;favor&quot;"},{"owner":{"account_id":72426,"reputation":573804,"user_id":209103,"accept_rate":73,"display_name":"Frank van Puffelen"},"score":0,"creation_date":1671723582,"post_id":74889408,"comment_id":132163534,"body_markdown":"The use-case is clear, but I&#39;m not sure where you stuck in implementing it.  Did you try anything for that already? Was there an error mesage?","body":"The use-case is clear, but I&#39;m not sure where you stuck in implementing it.  Did you try anything for that already? Was there an error mesage?"},{"owner":{"account_id":6819231,"reputation":132861,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1671800226,"post_id":74889408,"comment_id":132179096,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":21806975,"reputation":7,"user_id":16105042,"display_name":"Chen Argon"},"score":0,"creation_date":1671801322,"post_id":74889408,"comment_id":132179373,"body_markdown":"Sorry about late, I trying equal two keys but it&#39;s not working","body":"Sorry about late, I trying equal two keys but it&#39;s not working"}],"owner":{"account_id":21806975,"reputation":7,"user_id":16105042,"display_name":"Chen Argon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1671801278,"creation_date":1671716813,"question_id":74889408,"body_markdown":"In Firebase I have the &quot;users&quot; where I save all users&#39; information.\r\n\r\nNow I want to show someone I like in the &quot;Favor&quot;. \r\n\r\nThis is &quot;Favors&quot;\r\n\r\n![https://i.stack.imgur.com/9olWt.png][1]\r\n\r\nIn &quot;Favor&quot;, only my ID and people ID I added to the favor list\r\n\r\n\r\nAnd this is &quot;users&quot;:\r\n\r\n![https://i.stack.imgur.com/IKqrz.png][2]\r\n\r\nIn &quot;users&quot;, I have all users&#39; information inside people&#39;s ID\r\n\r\n\r\n\r\nAnd this is my code to show all users\r\n\r\n\r\n\r\n```\r\ndatabase.getReference().child(&quot;users&quot;).addValueEventListener(new ValueEventListener() {\r\n    @Override\r\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n        users.clear();\r\n        for(DataSnapshot snapshot1: snapshot.getChildren()){\r\n            User user= snapshot1.getValue(User.class);\r\n\r\n            if(!user.getUid().equals(FirebaseAuth.getInstance().getUid()) &amp;&amp; hasChat != null)\r\n                users.add(user);\r\n\r\n        }\r\n        binding.recyclerView.hideShimmerAdapter();\r\n        usersAdapter.notifyDataSetChanged();\r\n    }\r\n\r\n    @Override\r\n    public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n    }\r\n});\r\n```\r\nAnd this code i&#39;m trying to show favor list, but it&#39;s show blank:\r\n\r\n     database.getReference().child(&quot;users&quot;).addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    users.clear();\r\n                    for (DataSnapshot snapshot1 : snapshot.getChildren()) {\r\n                        User user = snapshot1.getValue(User.class);\r\n\r\n                        if (!user.getUid().equals(FirebaseAuth.getInstance().getUid()) &amp;&amp; user.getUid().equals(database.getReference().child(&quot;Favors&quot;).getKey()))\r\n                            users.add(user);\r\n\r\n                    }\r\n                    binding.recyclerView.hideShimmerAdapter();\r\n                    usersAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n\r\n  [1]: https://i.stack.imgur.com/9olWt.png\r\n  [2]: https://i.stack.imgur.com/IKqrz.png","title":"Show list of users with comparison two references in Android Firebase","body":"<p>In Firebase I have the &quot;users&quot; where I save all users' information.</p>\n<p>Now I want to show someone I like in the &quot;Favor&quot;.</p>\n<p>This is &quot;Favors&quot;</p>\n<p><img src=\"https://i.stack.imgur.com/9olWt.png\" alt=\"https://i.stack.imgur.com/9olWt.png\" /></p>\n<p>In &quot;Favor&quot;, only my ID and people ID I added to the favor list</p>\n<p>And this is &quot;users&quot;:</p>\n<p><img src=\"https://i.stack.imgur.com/IKqrz.png\" alt=\"https://i.stack.imgur.com/IKqrz.png\" /></p>\n<p>In &quot;users&quot;, I have all users' information inside people's ID</p>\n<p>And this is my code to show all users</p>\n<pre><code>database.getReference().child(&quot;users&quot;).addValueEventListener(new ValueEventListener() {\n    @Override\n    public void onDataChange(@NonNull DataSnapshot snapshot) {\n        users.clear();\n        for(DataSnapshot snapshot1: snapshot.getChildren()){\n            User user= snapshot1.getValue(User.class);\n\n            if(!user.getUid().equals(FirebaseAuth.getInstance().getUid()) &amp;&amp; hasChat != null)\n                users.add(user);\n\n        }\n        binding.recyclerView.hideShimmerAdapter();\n        usersAdapter.notifyDataSetChanged();\n    }\n\n    @Override\n    public void onCancelled(@NonNull DatabaseError error) {\n\n    }\n});\n</code></pre>\n<p>And this code i'm trying to show favor list, but it's show blank:</p>\n<pre><code> database.getReference().child(&quot;users&quot;).addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                users.clear();\n                for (DataSnapshot snapshot1 : snapshot.getChildren()) {\n                    User user = snapshot1.getValue(User.class);\n\n                    if (!user.getUid().equals(FirebaseAuth.getInstance().getUid()) &amp;&amp; user.getUid().equals(database.getReference().child(&quot;Favors&quot;).getKey()))\n                        users.add(user);\n\n                }\n                binding.recyclerView.hideShimmerAdapter();\n                usersAdapter.notifyDataSetChanged();\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n</code></pre>\n"},{"tags":["java","spring","spring-boot","apache-camel","spring-boot-actuator"],"comments":[{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1636814696,"post_id":69950499,"comment_id":123660285,"body_markdown":"Hi&amp;Welcome to [SO]! What you show is rather `.properties` syntax not `.yaml`. But generally I would solve your problem by: 1. fix/ensure working camel path (on `/api-context`) 2. Set  `management.endpoints.web.base-path: /api-context/actuator/**` (assuming `server.servlet.context-path=/`)","body":"Hi&amp;Welcome to <a href=\"https://stackoverflow.com\">Stack Overflow</a>! What you show is rather <code>.properties</code> syntax not <code>.yaml</code>. But generally I would solve your problem by: 1. fix/ensure working camel path (on <code>&#47;api-context</code>) 2. Set  <code>management.endpoints.web.base-path: &#47;api-context&#47;actuator&#47;**</code> (assuming <code>server.servlet.context-path=&#47;</code>)"},{"owner":{"account_id":23301548,"reputation":55,"user_id":17382114,"display_name":"Italo Vieira "},"score":0,"creation_date":1637024998,"post_id":69950499,"comment_id":123709609,"body_markdown":"@xerx593, thank you so much! I&#39;ve tried this, but when I run actuator, returns 404.\n\nlocalhost:8080/api/actuator = 404\n\n`camel.component.servlet.mapping.contextPath: /api/*` \n`server.servlet.context-path: /`\n`management.endpoints.web.base-path: /api/actuator/**`","body":"@xerx593, thank you so much! I&#39;ve tried this, but when I run actuator, returns 404.  localhost:8080/api/actuator = 404  <code>camel.component.servlet.mapping.contextPath: &#47;api&#47;*</code>  <code>server.servlet.context-path: &#47;</code> <code>management.endpoints.web.base-path: &#47;api&#47;actuator&#47;**</code>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1637048572,"post_id":69950499,"comment_id":123714296,"body_markdown":"please also share your camel/springboot version","body":"please also share your camel/springboot version"},{"owner":{"account_id":23301548,"reputation":55,"user_id":17382114,"display_name":"Italo Vieira "},"score":0,"creation_date":1637065173,"post_id":69950499,"comment_id":123720745,"body_markdown":"camel 3.4.0, spring 2.3.1","body":"camel 3.4.0, spring 2.3.1"}],"owner":{"account_id":23301548,"reputation":55,"user_id":17382114,"display_name":"Italo Vieira "},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":796,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1671801264,"creation_date":1636763904,"question_id":69950499,"body_markdown":"I&#39;m trying to utilize Spring Boot Actuator but utilizing the same context-path from camel, is that possible?\r\n\r\nhere I set the context_path in camel\r\n\r\napplication.yml\r\n\r\n    camel.component.servlet.mapping.contextPath: ${CONTEXT_PATH}\r\n\r\nI&#39;ve tried many ways \r\n\r\n    server.servlet.context-path: ${CONTEXT_PATH}\r\n\r\nbut this way doesn&#39;t found camel route.\r\n\r\n    management.endpoint.health.show-details: &#39;always&#39;\r\n    management.endpoints.web.base-path: ${CONTEXT_PATH}/actuator/**\r\n\r\nthis way returns 404.\r\n\r\nMy camel path is\r\n\r\n    localhost:8080/api-context\r\n\r\nAnd I need to utilize Actuator and Health in\r\n\r\n    localhost:8080/api-context/actuator\r\n    localhost:8080/api-context/actuator/health","title":"Spring Boot Actuator in same contextPath from camel","body":"<p>I'm trying to utilize Spring Boot Actuator but utilizing the same context-path from camel, is that possible?</p>\n<p>here I set the context_path in camel</p>\n<p>application.yml</p>\n<pre><code>camel.component.servlet.mapping.contextPath: ${CONTEXT_PATH}\n</code></pre>\n<p>I've tried many ways</p>\n<pre><code>server.servlet.context-path: ${CONTEXT_PATH}\n</code></pre>\n<p>but this way doesn't found camel route.</p>\n<pre><code>management.endpoint.health.show-details: 'always'\nmanagement.endpoints.web.base-path: ${CONTEXT_PATH}/actuator/**\n</code></pre>\n<p>this way returns 404.</p>\n<p>My camel path is</p>\n<pre><code>localhost:8080/api-context\n</code></pre>\n<p>And I need to utilize Actuator and Health in</p>\n<pre><code>localhost:8080/api-context/actuator\nlocalhost:8080/api-context/actuator/health\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9439,"page":784,"page_size":100}
