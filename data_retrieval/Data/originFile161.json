{"items":[{"tags":["java","reactjs","spring","spring-boot"],"comments":[{"owner":{"account_id":106364,"reputation":159996,"user_id":283366,"accept_rate":100,"display_name":"Phil"},"score":1,"creation_date":1695715484,"post_id":77178065,"comment_id":136057936,"body_markdown":"Could it be because you&#39;re missing a `/` between `&#39;/photos/add&#39;` and `employeeEmail`?","body":"Could it be because you&#39;re missing a <code>&#47;</code> between <code>&#39;&#47;photos&#47;add&#39;</code> and <code>employeeEmail</code>?"},{"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"score":0,"creation_date":1695716296,"post_id":77178065,"comment_id":136058087,"body_markdown":"If you get a network error, it would be very helpful if you could share more information about the error (a screenshot of the devtools, ...). In addition it would be nice if you could simplify your code further so there aren&#39;t unknown variables for us (eg. provide a dummy `employeeEmail`, `month` and `year`).","body":"If you get a network error, it would be very helpful if you could share more information about the error (a screenshot of the devtools, ...). In addition it would be nice if you could simplify your code further so there aren&#39;t unknown variables for us (eg. provide a dummy <code>employeeEmail</code>, <code>month</code> and <code>year</code>)."},{"owner":{"account_id":29449413,"reputation":25,"user_id":22566131,"display_name":"Miguel Celos"},"score":0,"creation_date":1695717229,"post_id":77178065,"comment_id":136058267,"body_markdown":"I fixed the question adding in what you saw Phil, and included the error message I&#39;ve been getting in the browser as well. I&#39;ve ruled out possible errors with the API by using postman and from the file upload function of my app by logging the formData values, I&#39;m thinking it might be the api call that&#39;s giving me problems but I can&#39;t find any help online so far.","body":"I fixed the question adding in what you saw Phil, and included the error message I&#39;ve been getting in the browser as well. I&#39;ve ruled out possible errors with the API by using postman and from the file upload function of my app by logging the formData values, I&#39;m thinking it might be the api call that&#39;s giving me problems but I can&#39;t find any help online so far."}],"answers":[{"comments":[{"owner":{"account_id":29449413,"reputation":25,"user_id":22566131,"display_name":"Miguel Celos"},"score":0,"creation_date":1695777701,"post_id":77179292,"comment_id":136068711,"body_markdown":"I added how I use axios within the project. I haven&#39;t seen the approach you suggested but as I understand its already pretty similar.","body":"I added how I use axios within the project. I haven&#39;t seen the approach you suggested but as I understand its already pretty similar."}],"tags":[],"owner":{"account_id":27467013,"reputation":1,"user_id":20956548,"display_name":"Deidine"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1695727370,"creation_date":1695725331,"answer_id":77179292,"question_id":77178065,"body_markdown":"Your error occurs because you miss give some variable when you send it to Spring, \r\nand I don&#39;t know if you use axios instead of api.post but you should use it \r\n\r\n    let reqInstance = axios.create({\r\n    headers: {\r\n      Authorization : &#39;Bearer &#39;+localStorage.getItem(ACCESS_TOKEN)\r\n    //   Authorization : `Bearer ${localStorage.getItem(&quot;accessToken&quot;)}`\r\n      },\r\n    &#39;Content-Type&#39;: &#39;application/json&#39;,  });\r\n\r\n       getAll(url) {\r\n        return reqInstance.get(API_BASE_URL + url);\r\n    }\r\n\r\n","title":"Connecting my React Application to my Springboot API (Post)","body":"<p>Your error occurs because you miss give some variable when you send it to Spring,\nand I don't know if you use axios instead of api.post but you should use it</p>\n<pre><code>let reqInstance = axios.create({\nheaders: {\n  Authorization : 'Bearer '+localStorage.getItem(ACCESS_TOKEN)\n//   Authorization : `Bearer ${localStorage.getItem(&quot;accessToken&quot;)}`\n  },\n'Content-Type': 'application/json',  });\n\n   getAll(url) {\n    return reqInstance.get(API_BASE_URL + url);\n}\n</code></pre>\n"}],"owner":{"account_id":29449413,"reputation":25,"user_id":22566131,"display_name":"Miguel Celos"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1695777616,"creation_date":1695715232,"question_id":77178065,"body_markdown":"I&#39;m getting an **Axios Network Error when trying to upload a file** to my endpoint using my app, and the `App.js` re-renders upon every attempt. This is then sent to `mongodb`.\r\n\r\n**The error:**\r\n\r\n```bash\r\nnetwork error\r\nAxiosError:Network Error at XMLHttpRequest.handleError (http://localhost:3000/static/js/bundle.js:52506:14)\r\n```\r\n\r\n**My API call (react):**\r\n\r\n```javascript\r\n\r\nimport api from &quot;../../api/axiosConfig&quot;;\r\n//my axios import which contains base url + headers\r\n\r\nconst uploadHandler = async () =&gt; {\r\n  const formData = new FormData();\r\n  if (!image) {\r\n    console.log(&#39;No file selected&#39;);\r\n    return;\r\n  }\r\n  try {\r\n    formData.append(&#39;image&#39;, image);\r\n    for (const value of formData.values()) {\r\n      console.log(value);\r\n    }\r\n    const response = api.post(&#39;/photos/add/&#39; + employeeEmail + &#39;/&#39; + month + &#39;/&#39; + year, formData);\r\n    //api here is the base url\r\n    console.log(response);\r\n  } catch (err) {\r\n    console.error(err);\r\n  }\r\n};\r\n\r\n```\r\n**My axios config file**\r\n```\r\nimport axios from &#39;axios&#39;;\r\n\r\nexport default axios.create({\r\n    baseURL: &#39;http://localhost:8080&#39;,\r\n    headers: {&quot;ngrok-skip-browser-warning&quot;: &quot;true&quot;}\r\n});\r\n```\r\n**My Controller:**\r\n\r\n```java\r\n@Autowired\r\nPhotoService photoService;\r\n\r\n@PostMapping(&quot;/photos/add/{employeeEmail}/{month}/{year}&quot;)\r\npublic ResponseEntity&lt;Photo&gt; addPhoto(@PathVariable(&quot;employeeEmail&quot;) String employeeEmail, @PathVariable String month, @PathVariable String year, @RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\r\n  return new ResponseEntity&lt;Photo&gt;(photoService.addPhoto(employeeEmail, month, year, image), HttpStatus.CREATED);\r\n}\r\n```\r\n\r\nI&#39;ve tried following many tutorials and their formatting of how the url is called/formData is sent and I&#39;m very very new to react so I&#39;d like some help understanding where I made a mistake.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Epl7u.png","title":"Connecting my React Application to my Springboot API (Post)","body":"<p>I'm getting an <strong>Axios Network Error when trying to upload a file</strong> to my endpoint using my app, and the <code>App.js</code> re-renders upon every attempt. This is then sent to <code>mongodb</code>.</p>\n<p><strong>The error:</strong></p>\n<pre class=\"lang-bash prettyprint-override\"><code>network error\nAxiosError:Network Error at XMLHttpRequest.handleError (http://localhost:3000/static/js/bundle.js:52506:14)\n</code></pre>\n<p><strong>My API call (react):</strong></p>\n<pre class=\"lang-js prettyprint-override\"><code>\nimport api from &quot;../../api/axiosConfig&quot;;\n//my axios import which contains base url + headers\n\nconst uploadHandler = async () =&gt; {\n  const formData = new FormData();\n  if (!image) {\n    console.log('No file selected');\n    return;\n  }\n  try {\n    formData.append('image', image);\n    for (const value of formData.values()) {\n      console.log(value);\n    }\n    const response = api.post('/photos/add/' + employeeEmail + '/' + month + '/' + year, formData);\n    //api here is the base url\n    console.log(response);\n  } catch (err) {\n    console.error(err);\n  }\n};\n\n</code></pre>\n<p><strong>My axios config file</strong></p>\n<pre><code>import axios from 'axios';\n\nexport default axios.create({\n    baseURL: 'http://localhost:8080',\n    headers: {&quot;ngrok-skip-browser-warning&quot;: &quot;true&quot;}\n});\n</code></pre>\n<p><strong>My Controller:</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Autowired\nPhotoService photoService;\n\n@PostMapping(&quot;/photos/add/{employeeEmail}/{month}/{year}&quot;)\npublic ResponseEntity&lt;Photo&gt; addPhoto(@PathVariable(&quot;employeeEmail&quot;) String employeeEmail, @PathVariable String month, @PathVariable String year, @RequestParam(&quot;image&quot;) MultipartFile image) throws IOException {\n  return new ResponseEntity&lt;Photo&gt;(photoService.addPhoto(employeeEmail, month, year, image), HttpStatus.CREATED);\n}\n</code></pre>\n<p>I've tried following many tutorials and their formatting of how the url is called/formData is sent and I'm very very new to react so I'd like some help understanding where I made a mistake.</p>\n"},{"tags":["java","spring-mvc","swagger","spring-restcontroller","spring-rest"],"comments":[{"owner":{"account_id":6094808,"reputation":7041,"user_id":4755974,"display_name":"Veselin Davidov"},"score":0,"creation_date":1524128303,"post_id":49916772,"comment_id":86848984,"body_markdown":"Maybe add the media type to the resource so it knows it should use the byteArrayHttpMessageConverter?","body":"Maybe add the media type to the resource so it knows it should use the byteArrayHttpMessageConverter?"},{"owner":{"account_id":13398462,"reputation":103,"user_id":9668694,"display_name":"Aminos"},"score":0,"creation_date":1524129009,"post_id":49916772,"comment_id":86849432,"body_markdown":"are you talking about the byteArrayResource ? how can I do that?","body":"are you talking about the byteArrayResource ? how can I do that?"}],"answers":[{"comments":[{"owner":{"account_id":13398462,"reputation":103,"user_id":9668694,"display_name":"Aminos"},"score":0,"creation_date":1524129260,"post_id":49916893,"comment_id":86849601,"body_markdown":"It returns the byte array quoted","body":"It returns the byte array quoted"}],"tags":[],"owner":{"account_id":2623128,"reputation":775,"user_id":2270735,"accept_rate":50,"display_name":"Alberto"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524128414,"creation_date":1524128414,"answer_id":49916893,"question_id":49916772,"body_markdown":"Try returning array of bytes:\r\n\r\n    @RequestMapping(value = &quot;/temp&quot;, method = RequestMethod.GET)\r\n    public @ResponseBody byte[] downloadDocument(\r\n            @RequestParam(value = &quot;id&quot;, required = true) Long idInscription) throws IOException {\r\n        FileInputStream signedFileInputStream = new FileInputStream(signedFilePAth);\r\n        byte[] doc = IOUtils.toByteArray(fis);\r\n        return doc;\r\n    }\r\n\r\nIOUtils is from `org.apache.commons.io.IOUtils`.","title":"return ByteArrayResource in spring restcontroller response","body":"<p>Try returning array of bytes:</p>\n\n<pre><code>@RequestMapping(value = \"/temp\", method = RequestMethod.GET)\npublic @ResponseBody byte[] downloadDocument(\n        @RequestParam(value = \"id\", required = true) Long idInscription) throws IOException {\n    FileInputStream signedFileInputStream = new FileInputStream(signedFilePAth);\n    byte[] doc = IOUtils.toByteArray(fis);\n    return doc;\n}\n</code></pre>\n\n<p>IOUtils is from <code>org.apache.commons.io.IOUtils</code>.</p>\n"},{"tags":[],"owner":{"account_id":2492679,"reputation":20748,"user_id":2169845,"accept_rate":91,"display_name":"zappee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524129544,"creation_date":1524129544,"answer_id":49917276,"question_id":49916772,"body_markdown":"It seems that the response content type definition is missing from your code.\r\n\r\nThe following code snippet returns with an image content which is displayed by web browser. It is a Jersy code but you can adopt it to Spring: \r\n\r\n    @GET\r\n    @Path(&quot;/{image-uuid}&quot;)\r\n    @Produces(&quot;images/jpg&quot;)\r\n    public Response getImage(@PathParam(&quot;uuid&quot;) final String uuid) throws IOException {\r\n        byte[] content = imageDao.getImage(uuid);\r\n        if (Objects.isNull(content )) {\r\n            throw new ImageNotFoundError(uuid);\r\n        }\r\n\r\n        ByteArrayInputStream stream = new ByteArrayInputStream(content);\r\n        return Response.ok(stream).build();\r\n    }\r\n","title":"return ByteArrayResource in spring restcontroller response","body":"<p>It seems that the response content type definition is missing from your code.</p>\n\n<p>The following code snippet returns with an image content which is displayed by web browser. It is a Jersy code but you can adopt it to Spring: </p>\n\n<pre><code>@GET\n@Path(\"/{image-uuid}\")\n@Produces(\"images/jpg\")\npublic Response getImage(@PathParam(\"uuid\") final String uuid) throws IOException {\n    byte[] content = imageDao.getImage(uuid);\n    if (Objects.isNull(content )) {\n        throw new ImageNotFoundError(uuid);\n    }\n\n    ByteArrayInputStream stream = new ByteArrayInputStream(content);\n    return Response.ok(stream).build();\n}\n</code></pre>\n"}],"owner":{"account_id":13398462,"reputation":103,"user_id":9668694,"display_name":"Aminos"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":16231,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695776820,"creation_date":1524128036,"question_id":49916772,"body_markdown":"I&#39;m trying to download a file using my restController, but it always return this error : \r\n\r\n     java.io.FileNotFoundException: Byte array resource [resource loaded from byte array] cannot be resolved to URL\r\n\tat org.springframework.core.io.AbstractResource.getURL(AbstractResource.java:90) ~[spring-core-4.2.2.RELEASE.jar:4.2.2.RELEASE]\r\n\r\nthen it downloads a file that has something like this : \r\n\r\n      {&quot;byteArray&quot;:&quot;JVBERi0xLjQKJeL.... \r\n\r\nhere&#39;s my restController :\r\n\r\n    @Api(&quot;products&quot;)\r\n    @RestController\r\n    @RequestMapping(&quot;/v1/products&quot;)\r\n    public class DocumentApi extends storeApi {\r\n        @ApiOperation(&quot;GET download document&quot;)\r\n        @RequestMapping(value = &quot;/temp&quot;, method = RequestMethod.GET)\r\n        @ResponseStatus(code = HttpStatus.OK)\r\n        public ResponseEntity&lt;ByteArrayResource&gt; downloadDocument(\r\n            @RequestParam(value = &quot;id&quot;, required = true) Long idInscription) throws IOException {\r\n              String signedFilePAth = &quot;C:/APPLIS/signedTemp/5982312957957647037_signed.pdf&quot;\r\n              return ResponseEntity\r\n                     .ok()\r\n                     .contentLength(contentLength)\r\n                     .contentType(\r\n                         MediaType.parseMediaType(&quot;application/pdf&quot;))\r\n                     .body(new \r\n              ByteArrayResource(Files.readAllBytes(Paths.get(signedFilePAth))));\r\n        }\r\n    }\r\n\r\nand here&#39;s my spring configuration :\r\n\r\n    protected MappingJackson2HttpMessageConverter jacksonMessageConverter() {\r\n        MappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter();\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\r\n        // Registering Hibernate4Module to support lazy objects\r\n        mapper.registerModule(new Hibernate4Module());\r\n        messageConverter.setObjectMapper(mapper);\r\n        return messageConverter;\r\n    }\r\n\r\n    public ByteArrayHttpMessageConverter byteArrayHttpMessageConverter() {\r\n        ByteArrayHttpMessageConverter arrayHttpMessageConverter = new ByteArrayHttpMessageConverter();\r\n        arrayHttpMessageConverter.setSupportedMediaTypes(getSupportedMediaTypes());\r\n        return arrayHttpMessageConverter;\r\n    }\r\n\r\n    private List&lt;MediaType&gt; getSupportedMediaTypes() {\r\n        List&lt;MediaType&gt; list = new ArrayList&lt;MediaType&gt;();\r\n        list.add(MediaType.APPLICATION_OCTET_STREAM);\r\n        list.add(MediaType.parseMediaType(&quot;application/pdf&quot;));\r\n        return list;\r\n    }\r\n\r\n    @Override\r\n    public void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\r\n        converters.add(jacksonMessageConverter());\r\n        converters.add(byteArrayHttpMessageConverter());\r\n        super.configureMessageConverters(converters);\r\n    }\r\n\r\nwhat seems to be the problem ? how can i solve this ?\r\n\r\nnb : I don&#39;t know if this is related, but my swagger-ui.html doesn&#39;t work (it shows a blank page) while v2/api-docs/ works fine","title":"return ByteArrayResource in spring restcontroller response","body":"<p>I'm trying to download a file using my restController, but it always return this error : </p>\n\n<pre><code> java.io.FileNotFoundException: Byte array resource [resource loaded from byte array] cannot be resolved to URL\nat org.springframework.core.io.AbstractResource.getURL(AbstractResource.java:90) ~[spring-core-4.2.2.RELEASE.jar:4.2.2.RELEASE]\n</code></pre>\n\n<p>then it downloads a file that has something like this : </p>\n\n<pre><code>  {\"byteArray\":\"JVBERi0xLjQKJeL.... \n</code></pre>\n\n<p>here's my restController :</p>\n\n<pre><code>@Api(\"products\")\n@RestController\n@RequestMapping(\"/v1/products\")\npublic class DocumentApi extends storeApi {\n    @ApiOperation(\"GET download document\")\n    @RequestMapping(value = \"/temp\", method = RequestMethod.GET)\n    @ResponseStatus(code = HttpStatus.OK)\n    public ResponseEntity&lt;ByteArrayResource&gt; downloadDocument(\n        @RequestParam(value = \"id\", required = true) Long idInscription) throws IOException {\n          String signedFilePAth = \"C:/APPLIS/signedTemp/5982312957957647037_signed.pdf\"\n          return ResponseEntity\n                 .ok()\n                 .contentLength(contentLength)\n                 .contentType(\n                     MediaType.parseMediaType(\"application/pdf\"))\n                 .body(new \n          ByteArrayResource(Files.readAllBytes(Paths.get(signedFilePAth))));\n    }\n}\n</code></pre>\n\n<p>and here's my spring configuration :</p>\n\n<pre><code>protected MappingJackson2HttpMessageConverter jacksonMessageConverter() {\n    MappingJackson2HttpMessageConverter messageConverter = new MappingJackson2HttpMessageConverter();\n    ObjectMapper mapper = new ObjectMapper();\n    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n    // Registering Hibernate4Module to support lazy objects\n    mapper.registerModule(new Hibernate4Module());\n    messageConverter.setObjectMapper(mapper);\n    return messageConverter;\n}\n\npublic ByteArrayHttpMessageConverter byteArrayHttpMessageConverter() {\n    ByteArrayHttpMessageConverter arrayHttpMessageConverter = new ByteArrayHttpMessageConverter();\n    arrayHttpMessageConverter.setSupportedMediaTypes(getSupportedMediaTypes());\n    return arrayHttpMessageConverter;\n}\n\nprivate List&lt;MediaType&gt; getSupportedMediaTypes() {\n    List&lt;MediaType&gt; list = new ArrayList&lt;MediaType&gt;();\n    list.add(MediaType.APPLICATION_OCTET_STREAM);\n    list.add(MediaType.parseMediaType(\"application/pdf\"));\n    return list;\n}\n\n@Override\npublic void configureMessageConverters(List&lt;HttpMessageConverter&lt;?&gt;&gt; converters) {\n    converters.add(jacksonMessageConverter());\n    converters.add(byteArrayHttpMessageConverter());\n    super.configureMessageConverters(converters);\n}\n</code></pre>\n\n<p>what seems to be the problem ? how can i solve this ?</p>\n\n<p>nb : I don't know if this is related, but my swagger-ui.html doesn't work (it shows a blank page) while v2/api-docs/ works fine</p>\n"},{"tags":["java","netbeans","path","compilation","warnings"],"comments":[{"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"score":0,"creation_date":1612549478,"post_id":66068153,"comment_id":116810826,"body_markdown":"Consider reading up the modules feature. It seems recent version of java are throwing the warnings and suggesting that you use the modules feature in your code. http://tutorials.jenkov.com/java/modules.html","body":"Consider reading up the modules feature. It seems recent version of java are throwing the warnings and suggesting that you use the modules feature in your code. <a href=\"http://tutorials.jenkov.com/java/modules.html\" rel=\"nofollow noreferrer\">tutorials.jenkov.com/java/modules.html</a>"},{"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"score":0,"creation_date":1613257547,"post_id":66068153,"comment_id":117021427,"body_markdown":"Jens -thank you for your comment and your pitch for Java Modules, but this doesn&#39;t answer my specific question about this specific warning message and how I can go about resolving it.  Warning message should be easily decipherable - not cryptic without resource to resolve them.","body":"Jens -thank you for your comment and your pitch for Java Modules, but this doesn&#39;t answer my specific question about this specific warning message and how I can go about resolving it.  Warning message should be easily decipherable - not cryptic without resource to resolve them."},{"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"score":1,"creation_date":1613259736,"post_id":66068153,"comment_id":117021838,"body_markdown":"The warning is as with many system messages is indeed cryptic. Assume you are using - source 11 somewhere in the javac command used for the build. Please try adding - - release 11 and rerun the build. That should fix this","body":"The warning is as with many system messages is indeed cryptic. Assume you are using - source 11 somewhere in the javac command used for the build. Please try adding - - release 11 and rerun the build. That should fix this"},{"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"score":1,"creation_date":1613264015,"post_id":66068153,"comment_id":117022496,"body_markdown":"I stumbled on the issue and the fix!  While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11.  Changing this manually to JDK 15 made the warning go away.  The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;","body":"I stumbled on the issue and the fix!  While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11.  Changing this manually to JDK 15 made the warning go away.  The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;"},{"owner":{"account_id":2691224,"reputation":1066,"user_id":2324541,"display_name":"vvs"},"score":0,"creation_date":1613266402,"post_id":66068153,"comment_id":117022863,"body_markdown":"@WeberElnc The warning doesn&#39;t say about source format since in java it&#39;s a perfectly valid scenario to use a later version of jdk (15) and want to compile with compatibility level of an older version (11). Usually changing the version for compiling can be non trivial exercise especially if the source code uses classes or methods that have been deprecated in later versions. In such a case changing compile version would involve code rewrite.","body":"@WeberElnc The warning doesn&#39;t say about source format since in java it&#39;s a perfectly valid scenario to use a later version of jdk (15) and want to compile with compatibility level of an older version (11). Usually changing the version for compiling can be non trivial exercise especially if the source code uses classes or methods that have been deprecated in later versions. In such a case changing compile version would involve code rewrite."}],"answers":[{"comments":[{"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"score":0,"creation_date":1613257628,"post_id":66068678,"comment_id":117021438,"body_markdown":"Isilacar - unfortunately, the install process of the newer version did not warn about removing the old version and did not say that there would be any issues.  Shouldn&#39;t Java documentation include a way to troubleshoot these warnings?","body":"Isilacar - unfortunately, the install process of the newer version did not warn about removing the old version and did not say that there would be any issues.  Shouldn&#39;t Java documentation include a way to troubleshoot these warnings?"}],"tags":[],"owner":{"account_id":20032283,"reputation":1,"user_id":14684778,"display_name":"isilacar"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1612549733,"creation_date":1612549733,"answer_id":66068678,"question_id":66068153,"body_markdown":"It is sometimes happened because of java updates. When the newer version is needed,it says you to remove the older version. If you didn&#39;t do that this cause come confusing. You can better use older versions to solve this problem. Maybe this can help you.","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>It is sometimes happened because of java updates. When the newer version is needed,it says you to remove the older version. If you didn't do that this cause come confusing. You can better use older versions to solve this problem. Maybe this can help you.</p>\n"},{"comments":[{"owner":{"account_id":12309331,"reputation":321,"user_id":8981345,"display_name":"Philip H"},"score":2,"creation_date":1620657299,"post_id":66191460,"comment_id":119258252,"body_markdown":"Took me a little effort to understand your solution (which worked - thanks!), so to clarify for others: In Netbeans, right click on project and go to Properties. Then look at Sources. As stated above, the Source / Binary Format will specify an older version of the JDK, so use the dropdown to update that value (in my case, JDK 11 --&gt; JDK 15).","body":"Took me a little effort to understand your solution (which worked - thanks!), so to clarify for others: In Netbeans, right click on project and go to Properties. Then look at Sources. As stated above, the Source / Binary Format will specify an older version of the JDK, so use the dropdown to update that value (in my case, JDK 11 --&gt; JDK 15)."}],"tags":[],"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1613264079,"creation_date":1613264079,"answer_id":66191460,"question_id":66068153,"body_markdown":"I stumbled on the issue and the fix! While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11. Changing this manually to JDK 15 made the warning go away. The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>I stumbled on the issue and the fix! While the new install changed the Java Platform in the Libraries properties to correctly point to JDK 15 as the new (Default), in the Sources area, towards the bottom, it left the Source/Binary Format still showing JDK 11. Changing this manually to JDK 15 made the warning go away. The warning message should have said something to the effect of &quot;Source/Binary Format&quot; does not match Library Java Platform - check corresponding versions.&quot;</p>\n"},{"tags":[],"owner":{"account_id":9752053,"reputation":823,"user_id":8430632,"display_name":"Laszlo Sarvold"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1628151417,"creation_date":1628150688,"answer_id":68662778,"question_id":66068153,"body_markdown":"I had this exact same warning, which in my case ended up as an error and caused build to fail when runnning mvn commands. I was using jdk 16 and also had 11 installed. \r\nIn my case, nothing has fixed it except to fully uninstall java from my mac and reinstall the versions I needed from https://adoptopenjdk.net/. ","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>I had this exact same warning, which in my case ended up as an error and caused build to fail when runnning mvn commands. I was using jdk 16 and also had 11 installed.\nIn my case, nothing has fixed it except to fully uninstall java from my mac and reinstall the versions I needed from <a href=\"https://adoptopenjdk.net/\" rel=\"nofollow noreferrer\">https://adoptopenjdk.net/</a>.</p>\n"},{"tags":[],"owner":{"account_id":26546949,"reputation":1,"user_id":20176879,"display_name":"Morgan Iverson"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1665068659,"creation_date":1665068627,"answer_id":73976042,"question_id":66068153,"body_markdown":"You need to update your JAVA_HOME environment variable.\r\n\r\n**On Mac** update your `~/.bash_profile` or `~/.zshrc`. Make sure you have the version you want installed and make `-v##` the version you want to use. For example, \r\n\r\nTo use Java 11, \r\n```\r\nexport JAVA_HOME=`/usr/libexec/java_home -v11` \r\n```\r\n\r\nTo use Java 17, \r\n```\r\nexport JAVA_HOME=`/usr/libexec/java_home -v17` \r\n```\r\n\r\n**On Windows** change you system environment variable to your new java version. \r\n\r\n[Heres how! (Confluence)](https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html)","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>You need to update your JAVA_HOME environment variable.</p>\n<p><strong>On Mac</strong> update your <code>~/.bash_profile</code> or <code>~/.zshrc</code>. Make sure you have the version you want installed and make <code>-v##</code> the version you want to use. For example,</p>\n<p>To use Java 11,</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v11` \n</code></pre>\n<p>To use Java 17,</p>\n<pre><code>export JAVA_HOME=`/usr/libexec/java_home -v17` \n</code></pre>\n<p><strong>On Windows</strong> change you system environment variable to your new java version.</p>\n<p><a href=\"https://confluence.atlassian.com/doc/setting-the-java_home-variable-in-windows-8895.html\" rel=\"nofollow noreferrer\">Heres how! (Confluence)</a></p>\n"},{"tags":[],"owner":{"account_id":21851467,"reputation":682,"user_id":16143492,"display_name":"nineninesevenfour"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695774780,"creation_date":1695774780,"answer_id":77184084,"question_id":66068153,"body_markdown":"I am posting a new anwser to this question, because I feel something important has been overlooked here before but should be pointed out to readers coming across in the future. Let&#39;s try to answer the actual question first and then give a more detailed explanation.\r\n\r\n&gt; What setting am I missing that wasn&#39;t properly updated as I&#39;ve updated my JDK and my IDE? Or am I completely looking in the wrong places?\r\n\r\nThis message is an output of `javac` (the Java compiler) and created (since JDK14) by default when the argument `-source` diverges from the version of the JDK from which `javac` was started. There is not one solution, you have to think first, if `-source` (and `-target` as well) are still up to date for your needs. That means:\r\n* *What is the JRE (or JDK) version I want/need to support my artifacts to run on?*\r\n\r\nRemark1: `-source` cannot be completely treated independently from `-target`, because the first one must be &lt;= the second one (you cannot develop sources against JDK 17 and run on JDK 8 for example - that would be cool, but is not supported).\r\n\r\nRemark2: In Maven the parameters are named `maven.compiler.source` and `maven.compiler.target`, in Gradle `sourceCompatibility` and `targetCompatibility`, I don&#39;t know for Ant (pls. check third link below).\r\n\r\nIf you want/need to __keep the current compatibility settings__ then you have basically \r\ntwo options:\r\n\r\n* (recommended) Replace `-source` and `-target` by **`--release`**. This option implicitly includes a check against the API version of the targeted JRE/JDK! Therefor the message goes away as well.\r\n* Add addtionally the **`--system`** option to `javac` pointing to a JDK of the same version as `--source`. Setting that parameter allows `javac` to take the API into account as well. It is roughly a replacement for `-bootclasspath` with the difference that it doesn&#39;t point to a &quot;rt.jar&quot;, but to the root directory, like `JAVA_HOME` would do. Think of it as a &quot;old JAVA_HOME&quot; option.\r\n\r\nIf you can **switch to a newer JDK/JRE** version for runtime entirely, of course `-source` and `-target` can be adapted accordingly (I&#39;d recommend to use `--release` instead anyway).\r\n\r\nThe actual problem (and that&#39;s why I am writing so much), is that neither `-source` nor `-target` include a check against the API, hence the warning. For example (without API check through `--release` or `--system`) it would be possible to compile with `-target 1.7` **and** reference `java.util.function.Consumer` at the same time, which has been added in JDK 8. You might not even notice locally (neither in CI), when running tests with the newer JDK. It just stops working in production.\r\n\r\nsee also:\r\n* https://docs.oracle.com/en/java/javase/20/docs/specs/man/javac.html#standard-options\r\n* https://stackoverflow.com/questions/59049980/maven-compiler-release-as-an-replacement-for-source-and-target\r\n* https://ant.apache.org/manual/Tasks/javac.html\r\n* https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\r\n* https://docs.gradle.org/current/userguide/building_java_projects.html#sec:compiling_with_release","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>I am posting a new anwser to this question, because I feel something important has been overlooked here before but should be pointed out to readers coming across in the future. Let's try to answer the actual question first and then give a more detailed explanation.</p>\n<blockquote>\n<p>What setting am I missing that wasn't properly updated as I've updated my JDK and my IDE? Or am I completely looking in the wrong places?</p>\n</blockquote>\n<p>This message is an output of <code>javac</code> (the Java compiler) and created (since JDK14) by default when the argument <code>-source</code> diverges from the version of the JDK from which <code>javac</code> was started. There is not one solution, you have to think first, if <code>-source</code> (and <code>-target</code> as well) are still up to date for your needs. That means:</p>\n<ul>\n<li><em>What is the JRE (or JDK) version I want/need to support my artifacts to run on?</em></li>\n</ul>\n<p>Remark1: <code>-source</code> cannot be completely treated independently from <code>-target</code>, because the first one must be &lt;= the second one (you cannot develop sources against JDK 17 and run on JDK 8 for example - that would be cool, but is not supported).</p>\n<p>Remark2: In Maven the parameters are named <code>maven.compiler.source</code> and <code>maven.compiler.target</code>, in Gradle <code>sourceCompatibility</code> and <code>targetCompatibility</code>, I don't know for Ant (pls. check third link below).</p>\n<p>If you want/need to <strong>keep the current compatibility settings</strong> then you have basically\ntwo options:</p>\n<ul>\n<li>(recommended) Replace <code>-source</code> and <code>-target</code> by <strong><code>--release</code></strong>. This option implicitly includes a check against the API version of the targeted JRE/JDK! Therefor the message goes away as well.</li>\n<li>Add addtionally the <strong><code>--system</code></strong> option to <code>javac</code> pointing to a JDK of the same version as <code>--source</code>. Setting that parameter allows <code>javac</code> to take the API into account as well. It is roughly a replacement for <code>-bootclasspath</code> with the difference that it doesn't point to a &quot;rt.jar&quot;, but to the root directory, like <code>JAVA_HOME</code> would do. Think of it as a &quot;old JAVA_HOME&quot; option.</li>\n</ul>\n<p>If you can <strong>switch to a newer JDK/JRE</strong> version for runtime entirely, of course <code>-source</code> and <code>-target</code> can be adapted accordingly (I'd recommend to use <code>--release</code> instead anyway).</p>\n<p>The actual problem (and that's why I am writing so much), is that neither <code>-source</code> nor <code>-target</code> include a check against the API, hence the warning. For example (without API check through <code>--release</code> or <code>--system</code>) it would be possible to compile with <code>-target 1.7</code> <strong>and</strong> reference <code>java.util.function.Consumer</code> at the same time, which has been added in JDK 8. You might not even notice locally (neither in CI), when running tests with the newer JDK. It just stops working in production.</p>\n<p>see also:</p>\n<ul>\n<li><a href=\"https://docs.oracle.com/en/java/javase/20/docs/specs/man/javac.html#standard-options\" rel=\"nofollow noreferrer\">https://docs.oracle.com/en/java/javase/20/docs/specs/man/javac.html#standard-options</a></li>\n<li><a href=\"https://stackoverflow.com/questions/59049980/maven-compiler-release-as-an-replacement-for-source-and-target\">&quot;maven.compiler.release&quot; as an replacement for source and target?</a></li>\n<li><a href=\"https://ant.apache.org/manual/Tasks/javac.html\" rel=\"nofollow noreferrer\">https://ant.apache.org/manual/Tasks/javac.html</a></li>\n<li><a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html</a></li>\n<li><a href=\"https://docs.gradle.org/current/userguide/building_java_projects.html#sec:compiling_with_release\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/building_java_projects.html#sec:compiling_with_release</a></li>\n</ul>\n"}],"owner":{"account_id":11989539,"reputation":131,"user_id":15153895,"display_name":"WeberEInc"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7834,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":66191460,"answer_count":5,"score":6,"last_activity_date":1695774780,"creation_date":1612547365,"question_id":66068153,"body_markdown":"This machine has had multiple version of Java JDK installed and multiple version of multiple IDEs (Netbeans, IntelliJ, Eclipse, etc.)  Most recently, I have added JDK 15.0.2 and Netbeans 12.2.  When trying to compile a simple &quot;Hello World&quot;, this is the output that results:\r\n\r\n    ant -f C:\\\\Data\\\\NetBeans\\\\grading\\\\TestGrading -Dnb.internal.action.name=run.single -Djavac.includes=testgrading/HelloWorld.java -Drun.class=HelloWorld run-single\r\n    \r\n    init:\r\n    \r\n    Deleting: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\r\n    \r\n    deps-jar:\r\n    \r\n    Updating property file: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\r\n    \r\n    Compiling 1 source file to C:\\Data\\NetBeans\\grading\\TestGrading\\build\\classes\r\n    \r\n    **warning: [options] system modules path not set in conjunction with -source 11**\r\n    \r\n    **1 warning**\r\n    \r\n    compile-single:\r\n    \r\n    run-single:\r\n    \r\n    Hello World!\r\n    \r\n    BUILD SUCCESSFUL (total time: 1 second)\r\n\r\nAs you can see, the file compiles and runs, but the warning is causing me concern.  I have not been able to find a similar warning in my searches... (all of the warnings refer to &quot;bootstrap class path not set&quot; instead of &quot;system modules path not set&quot;\r\n\r\nI have updated my Environment Variable to reflect the most current JDK with this entry:\r\nJAVA_HOME=C:\\Program Files\\Java\\jdk-15.0.2\r\n\r\nWhat setting am I missing that wasn&#39;t properly updated as I&#39;ve updated my JDK and my IDE?  Or am I completely looking in the wrong places?  Or do I need to fully uninstall previous versions and, if so, what will that do to previous code written using those previous versions that I&#39;d still like to retain?\r\n\r\nThanks in advance! \r\n","title":"Java warning: [options] system modules path not set in conjunction with -source 11","body":"<p>This machine has had multiple version of Java JDK installed and multiple version of multiple IDEs (Netbeans, IntelliJ, Eclipse, etc.)  Most recently, I have added JDK 15.0.2 and Netbeans 12.2.  When trying to compile a simple &quot;Hello World&quot;, this is the output that results:</p>\n<pre><code>ant -f C:\\\\Data\\\\NetBeans\\\\grading\\\\TestGrading -Dnb.internal.action.name=run.single -Djavac.includes=testgrading/HelloWorld.java -Drun.class=HelloWorld run-single\n\ninit:\n\nDeleting: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\n\ndeps-jar:\n\nUpdating property file: C:\\Data\\NetBeans\\grading\\TestGrading\\build\\built-jar.properties\n\nCompiling 1 source file to C:\\Data\\NetBeans\\grading\\TestGrading\\build\\classes\n\n**warning: [options] system modules path not set in conjunction with -source 11**\n\n**1 warning**\n\ncompile-single:\n\nrun-single:\n\nHello World!\n\nBUILD SUCCESSFUL (total time: 1 second)\n</code></pre>\n<p>As you can see, the file compiles and runs, but the warning is causing me concern.  I have not been able to find a similar warning in my searches... (all of the warnings refer to &quot;bootstrap class path not set&quot; instead of &quot;system modules path not set&quot;</p>\n<p>I have updated my Environment Variable to reflect the most current JDK with this entry:\nJAVA_HOME=C:\\Program Files\\Java\\jdk-15.0.2</p>\n<p>What setting am I missing that wasn't properly updated as I've updated my JDK and my IDE?  Or am I completely looking in the wrong places?  Or do I need to fully uninstall previous versions and, if so, what will that do to previous code written using those previous versions that I'd still like to retain?</p>\n<p>Thanks in advance!</p>\n"},{"tags":["java","google-maps","jsf","primefaces"],"comments":[{"owner":{"account_id":10368273,"reputation":742,"user_id":10195307,"display_name":"BugsForBreakfast"},"score":0,"creation_date":1561481207,"post_id":56758017,"comment_id":100074813,"body_markdown":"Guys, in my search the best I have found to accomplish my requeriment is the following https://stackoverflow.com/questions/47492459/how-do-i-draw-a-route-along-an-existing-road-between-two-points what do you think? (see best answer there)","body":"Guys, in my search the best I have found to accomplish my requeriment is the following <a href=\"https://stackoverflow.com/questions/47492459/how-do-i-draw-a-route-along-an-existing-road-between-two-points\" title=\"how do i draw a route along an existing road between two points\">stackoverflow.com/questions/47492459/&hellip;</a> what do you think? (see best answer there)"},{"owner":{"account_id":10368273,"reputation":742,"user_id":10195307,"display_name":"BugsForBreakfast"},"score":0,"creation_date":1562159699,"post_id":56758017,"comment_id":100290722,"body_markdown":"I manage to adapt the above code to primefaces library components, I will post code later today for posteriority","body":"I manage to adapt the above code to primefaces library components, I will post code later today for posteriority"}],"owner":{"account_id":10368273,"reputation":742,"user_id":10195307,"display_name":"BugsForBreakfast"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":418,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695771856,"creation_date":1561478500,"question_id":56758017,"body_markdown":"I implemented gMap from https://www.primefaces.org/showcase/ui/data/gmap/geocode.xhtml and it&#39;s working as expected but I have a requirement to draw the route from user location to a point on map.\r\n\r\nI see that they (primefaces) have polylines https://www.primefaces.org/showcase/ui/data/gmap/polylines.xhtml but I&#39;m not sure if I should use that because it&#39;s probably not gonna be a good route, because it will ignore buildings and things like that between the 2 points right?.\r\n\r\nWhere can I find a guide or example to implement this requirement properly with primefaces usage?\r\n\r\n\r\n ","title":"How to implement Google maps draw route with primefaces gMap","body":"<p>I implemented gMap from <a href=\"https://www.primefaces.org/showcase/ui/data/gmap/geocode.xhtml\" rel=\"nofollow noreferrer\">https://www.primefaces.org/showcase/ui/data/gmap/geocode.xhtml</a> and it's working as expected but I have a requirement to draw the route from user location to a point on map.</p>\n\n<p>I see that they (primefaces) have polylines <a href=\"https://www.primefaces.org/showcase/ui/data/gmap/polylines.xhtml\" rel=\"nofollow noreferrer\">https://www.primefaces.org/showcase/ui/data/gmap/polylines.xhtml</a> but I'm not sure if I should use that because it's probably not gonna be a good route, because it will ignore buildings and things like that between the 2 points right?.</p>\n\n<p>Where can I find a guide or example to implement this requirement properly with primefaces usage?</p>\n"},{"tags":["java","android","soap","web-services","ksoap2"],"comments":[{"owner":{"account_id":662121,"reputation":1,"user_id":486574,"display_name":"DFDF"},"score":0,"creation_date":1288019559,"post_id":3092424,"comment_id":136068093,"body_markdown":"Here is a [tutorial on how to work with array of complex objects with KSOAP](https://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html). I found out by countless hours of debugging.","body":"Here is a <a href=\"https://seesharpgears.blogspot.com/2010/10/ksoap-android-web-service-tutorial-with.html\" rel=\"nofollow noreferrer\">tutorial on how to work with array of complex objects with KSOAP</a>. I found out by countless hours of debugging."}],"answers":[{"comments":[{"owner":{"account_id":71498,"reputation":2116,"user_id":206809,"accept_rate":57,"display_name":"Vishal Khakhkhar"},"score":0,"creation_date":1388383144,"post_id":4050881,"comment_id":31246855,"body_markdown":"in above case suppose countryName = &quot;&quot; then it parse its value as anyType.. ie. String countryName = anyType.. Any solution for that ?","body":"in above case suppose countryName = &quot;&quot; then it parse its value as anyType.. ie. String countryName = anyType.. Any solution for that ?"}],"tags":[],"owner":{"account_id":109543,"reputation":4760,"user_id":290189,"accept_rate":80,"display_name":"mac"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1365676437,"creation_date":1288347062,"answer_id":4050881,"question_id":3092424,"body_markdown":"    SoapObject countryDetails = (SoapObject)envelope.getResponse();\r\n    System.out.println(countryDetails.toString());\r\n                      \r\n    ArrayList list = new ArrayList(countryDetails.getPropertyCount());\r\n    lv_arr = new String[countryDetails.getPropertyCount()];\r\n    for (int i = 0; i &lt; countryDetails.getPropertyCount(); i++) {\r\n        Object property = countryDetails.getProperty(i);\r\n        if (property instanceof SoapObject) {\r\n            SoapObject countryObj = (SoapObject) property;\r\n            String countryName = countryObj.getProperty(&quot;countryName&quot;).toString();\r\n            list.add(countryName );\r\n        }\r\n    }\r\n\r\nHope it should work","title":"Parsing ksoap2 response","body":"<pre><code>SoapObject countryDetails = (SoapObject)envelope.getResponse();\nSystem.out.println(countryDetails.toString());\n\nArrayList list = new ArrayList(countryDetails.getPropertyCount());\nlv_arr = new String[countryDetails.getPropertyCount()];\nfor (int i = 0; i &lt; countryDetails.getPropertyCount(); i++) {\n    Object property = countryDetails.getProperty(i);\n    if (property instanceof SoapObject) {\n        SoapObject countryObj = (SoapObject) property;\n        String countryName = countryObj.getProperty(\"countryName\").toString();\n        list.add(countryName );\n    }\n}\n</code></pre>\n\n<p>Hope it should work</p>\n"},{"comments":[{"owner":{"account_id":71498,"reputation":2116,"user_id":206809,"accept_rate":57,"display_name":"Vishal Khakhkhar"},"score":0,"creation_date":1388383186,"post_id":10187104,"comment_id":31246868,"body_markdown":"in above case suppose countryName = &quot;&quot; then it parse its value as anyType.. ie. String countryName = anyType.. Any solution for that ?","body":"in above case suppose countryName = &quot;&quot; then it parse its value as anyType.. ie. String countryName = anyType.. Any solution for that ?"},{"owner":{"account_id":5757765,"reputation":860,"user_id":4545077,"display_name":"Ashish Tikarye"},"score":0,"creation_date":1485148897,"post_id":10187104,"comment_id":70787497,"body_markdown":"@Rooban Ponraj A very nice example but with this code getting only first set of response like getting only **Books** data response every time but not getting **Cameras** data response...can anyone please help me out.\nThanks","body":"@Rooban Ponraj A very nice example but with this code getting only first set of response like getting only <b>Books</b> data response every time but not getting <b>Cameras</b> data response...can anyone please help me out. Thanks"}],"tags":[],"owner":{"account_id":441634,"reputation":281,"user_id":831834,"accept_rate":7,"display_name":"Rooban Ponraj A"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1335345974,"creation_date":1334648333,"answer_id":10187104,"question_id":3092424,"body_markdown":"**For example your Response:**\r\n\r\n    anyType\r\n    {\r\n      FOO_DEALS=anyType\r\n      {\r\n           CATEGORY_LIST=anyType\r\n           {\r\n             CATEGORY=Books; \r\n             CATEGORY_URL=books_chennai; \r\n             CATEGORY_ICON=http://deals.foo.com/common/images/books.png; \r\n             CATEGORY_COUNT=1045; \r\n             TYPE=1; \r\n             SUPERTAG=Books; \r\n           };\r\n           CATEGORY_LIST=anyType\r\n           {\r\n               CATEGORY=Cameras;\r\n               CATEGORY_URL=cameras_chennai;\r\n               CATEGORY_ICON=http://deals.foo.com/common/images/cameras.png; \r\n               CATEGORY_COUNT=152; \r\n               SUPERTAG=Cameras; \r\n               TYPE=1; \r\n           }; \r\n       }; \r\n     }\r\n\r\n**For requesting and parsing do like this:**\r\n\r\n    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\r\n               // Add the input required by web service\r\n               request.addProperty(&quot;city&quot;,&quot;chennai&quot;);\r\n               request.addProperty(&quot;key&quot;,&quot;10000&quot;);\r\n    \r\n               SoapSerializationEnvelope envelope =new SoapSerializationEnvelope(SoapEnvelope.VER11);\r\n               envelope.setOutputSoapObject(request);\r\n    \r\n               // Make the soap call.\r\n               androidHttpTransport.call(SOAP_ACTION, envelope);\r\n    \r\n               // Get the SoapResult from the envelope body.\r\n               resultRequestSOAP = (SoapObject) envelope.bodyIn;\r\n    \r\n    \r\n               System.out.println(&quot;********Response : &quot;+resultRequestSOAP.toString());\r\n    \r\n               SoapObject root = (SoapObject) resultRequestSOAP.getProperty(0);\r\n               SoapObject s_deals = (SoapObject) root.getProperty(&quot;FOO_DEALS&quot;);\r\n    \r\n               StringBuilder stringBuilder = new StringBuilder();\r\n    \r\n               System.out.println(&quot;********Count : &quot;+ s_deals.getPropertyCount());\r\n    \r\n               for (int i = 0; i &lt; s_deals.getPropertyCount(); i++) \r\n               {\r\n                   Object property = s_deals.getProperty(i);\r\n                   if (property instanceof SoapObject)\r\n                   {\r\n                       SoapObject category_list = (SoapObject) property;\r\n                       String CATEGORY = category_list.getProperty(&quot;CATEGORY&quot;).toString();\r\n                       String CATEGORY_URL = category_list.getProperty(&quot;CATEGORY_URL&quot;).toString();\r\n                       String CATEGORY_ICON = category_list.getProperty(&quot;CATEGORY_ICON&quot;).toString();\r\n                       String CATEGORY_COUNT = category_list.getProperty(&quot;CATEGORY_COUNT&quot;).toString();\r\n                       String SUPERTAG = category_list.getProperty(&quot;SUPERTAG&quot;).toString();\r\n                       String TYPE = category_list.getProperty(&quot;TYPE&quot;).toString();\r\n                       stringBuilder.append\r\n                       (\r\n                            &quot;Row value of: &quot; +(i+1)+&quot;\\n&quot;+\r\n                            &quot;Category: &quot;+CATEGORY+&quot;\\n&quot;+\r\n                            &quot;Category URL: &quot;+CATEGORY_URL+&quot;\\n&quot;+\r\n                            &quot;Category_Icon: &quot;+CATEGORY_ICON+&quot;\\n&quot;+\r\n                            &quot;Category_Count: &quot;+CATEGORY_COUNT+&quot;\\n&quot;+\r\n                            &quot;SuperTag: &quot;+SUPERTAG+&quot;\\n&quot;+\r\n                            &quot;Type: &quot;+TYPE+&quot;\\n&quot;+\r\n                            &quot;******************************&quot;\r\n                       );                   \r\n                       stringBuilder.append(&quot;\\n&quot;);\r\n                   }\r\n               }","title":"Parsing ksoap2 response","body":"<p><strong>For example your Response:</strong></p>\n\n<pre><code>anyType\n{\n  FOO_DEALS=anyType\n  {\n       CATEGORY_LIST=anyType\n       {\n         CATEGORY=Books; \n         CATEGORY_URL=books_chennai; \n         CATEGORY_ICON=http://deals.foo.com/common/images/books.png; \n         CATEGORY_COUNT=1045; \n         TYPE=1; \n         SUPERTAG=Books; \n       };\n       CATEGORY_LIST=anyType\n       {\n           CATEGORY=Cameras;\n           CATEGORY_URL=cameras_chennai;\n           CATEGORY_ICON=http://deals.foo.com/common/images/cameras.png; \n           CATEGORY_COUNT=152; \n           SUPERTAG=Cameras; \n           TYPE=1; \n       }; \n   }; \n }\n</code></pre>\n\n<p><strong>For requesting and parsing do like this:</strong></p>\n\n<pre><code>SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\n           // Add the input required by web service\n           request.addProperty(\"city\",\"chennai\");\n           request.addProperty(\"key\",\"10000\");\n\n           SoapSerializationEnvelope envelope =new SoapSerializationEnvelope(SoapEnvelope.VER11);\n           envelope.setOutputSoapObject(request);\n\n           // Make the soap call.\n           androidHttpTransport.call(SOAP_ACTION, envelope);\n\n           // Get the SoapResult from the envelope body.\n           resultRequestSOAP = (SoapObject) envelope.bodyIn;\n\n\n           System.out.println(\"********Response : \"+resultRequestSOAP.toString());\n\n           SoapObject root = (SoapObject) resultRequestSOAP.getProperty(0);\n           SoapObject s_deals = (SoapObject) root.getProperty(\"FOO_DEALS\");\n\n           StringBuilder stringBuilder = new StringBuilder();\n\n           System.out.println(\"********Count : \"+ s_deals.getPropertyCount());\n\n           for (int i = 0; i &lt; s_deals.getPropertyCount(); i++) \n           {\n               Object property = s_deals.getProperty(i);\n               if (property instanceof SoapObject)\n               {\n                   SoapObject category_list = (SoapObject) property;\n                   String CATEGORY = category_list.getProperty(\"CATEGORY\").toString();\n                   String CATEGORY_URL = category_list.getProperty(\"CATEGORY_URL\").toString();\n                   String CATEGORY_ICON = category_list.getProperty(\"CATEGORY_ICON\").toString();\n                   String CATEGORY_COUNT = category_list.getProperty(\"CATEGORY_COUNT\").toString();\n                   String SUPERTAG = category_list.getProperty(\"SUPERTAG\").toString();\n                   String TYPE = category_list.getProperty(\"TYPE\").toString();\n                   stringBuilder.append\n                   (\n                        \"Row value of: \" +(i+1)+\"\\n\"+\n                        \"Category: \"+CATEGORY+\"\\n\"+\n                        \"Category URL: \"+CATEGORY_URL+\"\\n\"+\n                        \"Category_Icon: \"+CATEGORY_ICON+\"\\n\"+\n                        \"Category_Count: \"+CATEGORY_COUNT+\"\\n\"+\n                        \"SuperTag: \"+SUPERTAG+\"\\n\"+\n                        \"Type: \"+TYPE+\"\\n\"+\n                        \"******************************\"\n                   );                   \n                   stringBuilder.append(\"\\n\");\n               }\n           }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1183313,"reputation":829,"user_id":1157744,"display_name":"mahasam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1364759246,"creation_date":1364759246,"answer_id":15733751,"question_id":3092424,"body_markdown":"My Project it&#39;s work. Hope this hepls.\r\n\r\n\t    \tSoapObject requestx = new SoapObject(NAMESPACE, METHOD_NAME);\r\n\t    \t\r\n\t    \tSoapSerializationEnvelope envelopex = new SoapSerializationEnvelope(SoapEnvelope.VER11);\r\n\t    \tenvelopex.dotNet = true;\r\n\t    \tenvelopex.setOutputSoapObject(requestx);\r\n\t    \tHttpTransportSE httpTransportx = new HttpTransportSE(URL);\t    \t\r\n            \r\n\t        try  {                    \r\n\t        \thttpTransportx.call(SOAP_ACTION, envelopex);\r\n\t        \tSoapObject responsex = (SoapObject)envelopex.getResponse(); // not envelopex.bodyIn;\r\n\t        \t\r\n\t             int i=0;\r\n\t             int RCount=responsex.getPropertyCount();\r\n\t             int[] tbIDArray = new int[RCount+1];\r\n\t             int[] iMonthAarray = new int[RCount+1];\r\n\t             int[] iYearAarray = new int[RCount+1];\r\n\t             String[] sDetailAarray = new String[RCount+1];\r\n\t             \r\n                 for (i = 0; i &lt; RCount; i++) {\r\n                     Object property = responsex.getProperty(i);\r\n                     if (property instanceof SoapObject) {\r\n                         SoapObject info = (SoapObject) property;\r\n                         String tbID = info.getProperty(&quot;tbID&quot;).toString();\r\n                         String iMonth = info.getProperty(&quot;iMonth&quot;).toString();\r\n                         String iYear = info.getProperty(&quot;iYear&quot;).toString();\r\n                         String sDetail = info.getProperty(&quot;sDetail&quot;).toString();\r\n                         \r\n         \t            tbIDArray[i] =Integer.valueOf(tbID);\r\n         \t            iMonthAarray[i] =Integer.valueOf(iMonth);\r\n         \t            iYearAarray[i] =Integer.valueOf(iYear);\r\n         \t            sDetailAarray[i] =sDetail;\r\n                     }//if (property instanceof SoapObject) {\r\n                 }//for (i = 0; i &lt; RCount; i++) {\r\n                 \r\n\t             \r\n            }  catch (Exception exception)   {\r\n            \tMsgBox1(exception.toString() , &quot;Error&quot;);\r\n            }","title":"Parsing ksoap2 response","body":"<p>My Project it's work. Hope this hepls.</p>\n\n<pre><code>        SoapObject requestx = new SoapObject(NAMESPACE, METHOD_NAME);\n\n        SoapSerializationEnvelope envelopex = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n        envelopex.dotNet = true;\n        envelopex.setOutputSoapObject(requestx);\n        HttpTransportSE httpTransportx = new HttpTransportSE(URL);          \n\n        try  {                    \n            httpTransportx.call(SOAP_ACTION, envelopex);\n            SoapObject responsex = (SoapObject)envelopex.getResponse(); // not envelopex.bodyIn;\n\n             int i=0;\n             int RCount=responsex.getPropertyCount();\n             int[] tbIDArray = new int[RCount+1];\n             int[] iMonthAarray = new int[RCount+1];\n             int[] iYearAarray = new int[RCount+1];\n             String[] sDetailAarray = new String[RCount+1];\n\n             for (i = 0; i &lt; RCount; i++) {\n                 Object property = responsex.getProperty(i);\n                 if (property instanceof SoapObject) {\n                     SoapObject info = (SoapObject) property;\n                     String tbID = info.getProperty(\"tbID\").toString();\n                     String iMonth = info.getProperty(\"iMonth\").toString();\n                     String iYear = info.getProperty(\"iYear\").toString();\n                     String sDetail = info.getProperty(\"sDetail\").toString();\n\n                    tbIDArray[i] =Integer.valueOf(tbID);\n                    iMonthAarray[i] =Integer.valueOf(iMonth);\n                    iYearAarray[i] =Integer.valueOf(iYear);\n                    sDetailAarray[i] =sDetail;\n                 }//if (property instanceof SoapObject) {\n             }//for (i = 0; i &lt; RCount; i++) {\n\n\n        }  catch (Exception exception)   {\n            MsgBox1(exception.toString() , \"Error\");\n        }\n</code></pre>\n"}],"owner":{"account_id":126556,"reputation":4194,"user_id":323128,"accept_rate":84,"display_name":"Maxim"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19396,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":3,"score":4,"last_activity_date":1695770248,"creation_date":1277204378,"question_id":3092424,"body_markdown":"I use a ksoap2 lib for communicating from android client with SOAP web service. Great job was done by ksoap team, but the problem is, there is no any good example how to use it correct in different aspects. For instance I get in soap response following data:\r\n\r\n    anyType{\r\n        StatusSetting=anyType{Id=1; Name=Til afskrivning; LocationId=1; Editable=true; Default=true; Transcribed=false; }; \r\n        StatusSetting=anyType{Id=2; Name=Afskrevet; LocationId=1; Editable=false; Default=false; Transcribed=true; }; \r\n        ...\r\n    }\r\n\r\nIt&#39;s a complex object, or rather a collection of StatusSetting objects.\r\nWhen I try to get a property of SoapObject it&#39;s only 1 property with all that data as a string. It can&#39;t be parsed as json too. Unbelievable that nobody met same problem regarding to popularity android is gaining. Would be very cool to know if somebody solved this issue and how. \r\nThanks.\r\n","title":"Parsing ksoap2 response","body":"<p>I use a ksoap2 lib for communicating from android client with SOAP web service. Great job was done by ksoap team, but the problem is, there is no any good example how to use it correct in different aspects. For instance I get in soap response following data:</p>\n\n<pre><code>anyType{\n    StatusSetting=anyType{Id=1; Name=Til afskrivning; LocationId=1; Editable=true; Default=true; Transcribed=false; }; \n    StatusSetting=anyType{Id=2; Name=Afskrevet; LocationId=1; Editable=false; Default=false; Transcribed=true; }; \n    ...\n}\n</code></pre>\n\n<p>It's a complex object, or rather a collection of StatusSetting objects.\nWhen I try to get a property of SoapObject it's only 1 property with all that data as a string. It can't be parsed as json too. Unbelievable that nobody met same problem regarding to popularity android is gaining. Would be very cool to know if somebody solved this issue and how. \nThanks.</p>\n"},{"tags":["java","networking","udp"],"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1695770611,"post_id":26085225,"comment_id":136068127,"body_markdown":"Detecting that the last block has been received is about the same as detecting that any other block has been received (and assembled in order).  Which, if you don&#39;t have, means you have a really unreliable transfer program.","body":"Detecting that the last block has been received is about the same as detecting that any other block has been received (and assembled in order).  Which, if you don&#39;t have, means you have a really unreliable transfer program."}],"answers":[{"comments":[{"owner":{"account_id":23121,"reputation":527376,"user_id":57695,"accept_rate":75,"display_name":"Peter Lawrey"},"score":0,"creation_date":1411914131,"post_id":26085503,"comment_id":40874793,"body_markdown":"+1 Generally speaking, implementing a point to point protocol over UDP is about as fast/complicated as UDP, except for UDP you have to do all the work/testing yourself, for TCP this is written and tested over decades for you.","body":"+1 Generally speaking, implementing a point to point protocol over UDP is about as fast/complicated as UDP, except for UDP you have to do all the work/testing yourself, for TCP this is written and tested over decades for you."},{"owner":{"account_id":5097515,"reputation":11,"user_id":4088315,"display_name":"L4mbd4"},"score":0,"creation_date":1412282818,"post_id":26085503,"comment_id":41028106,"body_markdown":"Thanks. I used Thread.sleep(15) to slow send file. But what another way to detect end of file send from Client? Thank you very much ?","body":"Thanks. I used Thread.sleep(15) to slow send file. But what another way to detect end of file send from Client? Thank you very much ?"},{"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"score":1,"creation_date":1412291339,"post_id":26085503,"comment_id":41031340,"body_markdown":"@L4mbd4 - You need to handle that in the *design* of your application-level file transfer protocol.  There are various ways to do it.  I don&#39;t particularly want to explain it because I don&#39;t want to encourage you to waste your time *doing this the wrong way*.  And UDP &gt;&gt;is&lt;&lt; the wrong way.  Hint: `sleep(15)` is a band-aid.  It doesn&#39;t fix the problem *reliably*.","body":"@L4mbd4 - You need to handle that in the <i>design</i> of your application-level file transfer protocol.  There are various ways to do it.  I don&#39;t particularly want to explain it because I don&#39;t want to encourage you to waste your time <i>doing this the wrong way</i>.  And UDP &gt;&gt;is&lt;&lt; the wrong way.  Hint: <code>sleep(15)</code> is a band-aid.  It doesn&#39;t fix the problem <i>reliably</i>."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1411911924,"creation_date":1411911924,"answer_id":26085503,"question_id":26085225,"body_markdown":"UDP is an unreliable protocol.  Messages may be lost without either the sender or receiver being notified.  This is particularly likely if the sender sends a large number of messages in quick succession ... as your code is liable to do.\r\n\r\nSo I suspect that what is happening in your case is that the message that contains the &quot;done&quot; string is being lost.\r\n\r\n------------\r\n\r\nThere is no easy cure for this using UDP.  It would entail implementing flow control, message loss detection and retransmission ... at the application protocol level.  This is technically possible, but it is simpler to either switch to TCP, or look for an alternative *reliable* protocol. ","title":"Transfer File through UDP in Java. How to detect end of file at Server?","body":"<p>UDP is an unreliable protocol.  Messages may be lost without either the sender or receiver being notified.  This is particularly likely if the sender sends a large number of messages in quick succession ... as your code is liable to do.</p>\n\n<p>So I suspect that what is happening in your case is that the message that contains the \"done\" string is being lost.</p>\n\n<hr>\n\n<p>There is no easy cure for this using UDP.  It would entail implementing flow control, message loss detection and retransmission ... at the application protocol level.  This is technically possible, but it is simpler to either switch to TCP, or look for an alternative <em>reliable</em> protocol. </p>\n"},{"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":0,"creation_date":1695779003,"post_id":77183890,"comment_id":136068818,"body_markdown":"How does this differ from the OP&#39;s code where he sends &#39;Done&#39;?","body":"How does this differ from the OP&#39;s code where he sends &#39;Done&#39;?"}],"tags":[],"owner":{"account_id":5966995,"reputation":189,"user_id":4690527,"display_name":"Izzy Kiefer"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695769945,"creation_date":1695769945,"answer_id":77183890,"question_id":26085225,"body_markdown":"From the app that sends the file, Send a new packet after transferring your file. \r\nFor ex.\r\n\r\n    DatagramPacket dp = new DatagramPacket(&quot;[END OF UDP STREAM]&quot;.getBytes(), 19, ip, port);\r\n\r\nThen from the receiving end, detect if the packet is equal to the end string then break out of the loop that receives it.\r\n\r\n\r\n    if (Arrays.equals(&quot;[END OF UDP STREAM]&quot;.getBytes(), Arrays.copyOf(buff, 19)))\r\n    {\r\n        System.out.println(&quot;END OF STREAM DETECTED&quot;);\r\n        break;\r\n    }\r\n*buff being the byte[] array that buffers the datgram packet","title":"Transfer File through UDP in Java. How to detect end of file at Server?","body":"<p>From the app that sends the file, Send a new packet after transferring your file.\nFor ex.</p>\n<pre><code>DatagramPacket dp = new DatagramPacket(&quot;[END OF UDP STREAM]&quot;.getBytes(), 19, ip, port);\n</code></pre>\n<p>Then from the receiving end, detect if the packet is equal to the end string then break out of the loop that receives it.</p>\n<pre><code>if (Arrays.equals(&quot;[END OF UDP STREAM]&quot;.getBytes(), Arrays.copyOf(buff, 19)))\n{\n    System.out.println(&quot;END OF STREAM DETECTED&quot;);\n    break;\n}\n</code></pre>\n<p>*buff being the byte[] array that buffers the datgram packet</p>\n"}],"owner":{"account_id":5097515,"reputation":11,"user_id":4088315,"display_name":"L4mbd4"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3367,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695769945,"creation_date":1411910225,"question_id":26085225,"body_markdown":"At Client I chunks buffer with `Arrays.CopyofRange()` from 1 `FileEvent` object:\r\n\r\n    byte[] data = outputStream.toByteArray();\r\n    for (int i = 0; i &lt;= data.length; i += incommingData.length) {             \r\n        byte[] forSent = new byte[0x3ff];\r\n        forSent = Arrays.copyOfRange(data, i, i + 1023);\r\n        DatagramPacket sendPacket = new DatagramPacket(forSent, forSent.length, ipAddress, PORT);\r\n        socket.send(sendPacket);\r\n        System.out.println(&quot;File sent from client : &quot; + i);\r\n    }\r\n    String done = &quot;Done&quot;;\r\n    DatagramPacket stringDone = new DatagramPacket(done.getBytes(), done.length(), ipAddress, PORT);\r\n    socket.send(stringDone);\r\n\r\nAnd at Server:\r\n\r\n    do {\r\n        byte[] incomingData = new byte[1024 * 1000 * 50];\r\n        incomingPacket = new DatagramPacket(incomingData, incomingData.length);\r\n        socket.receive(incomingPacket);\r\n        byte[] data ;\r\n        data = incomingPacket.getData();\r\n        result = Arrays.copyOfRange(data, 0, data.length);\r\n        System.out.println(&quot;Da nhan:&quot; + result.length);\r\n        message = new String(incomingPacket.getData(), 0, incomingPacket.getLength());\r\n        System.out.println(message);\r\n    } while ( !message.equals(&quot;Done&quot;));\r\n\r\nafter send all buffer, i send 1 String &quot;done&quot;. And at Server i check end of file by String &quot;done&quot;. But it not work, via UDP, how can i detect end of file transfer. Thanks!","title":"Transfer File through UDP in Java. How to detect end of file at Server?","body":"<p>At Client I chunks buffer with <code>Arrays.CopyofRange()</code> from 1 <code>FileEvent</code> object:</p>\n\n<pre><code>byte[] data = outputStream.toByteArray();\nfor (int i = 0; i &lt;= data.length; i += incommingData.length) {             \n    byte[] forSent = new byte[0x3ff];\n    forSent = Arrays.copyOfRange(data, i, i + 1023);\n    DatagramPacket sendPacket = new DatagramPacket(forSent, forSent.length, ipAddress, PORT);\n    socket.send(sendPacket);\n    System.out.println(\"File sent from client : \" + i);\n}\nString done = \"Done\";\nDatagramPacket stringDone = new DatagramPacket(done.getBytes(), done.length(), ipAddress, PORT);\nsocket.send(stringDone);\n</code></pre>\n\n<p>And at Server:</p>\n\n<pre><code>do {\n    byte[] incomingData = new byte[1024 * 1000 * 50];\n    incomingPacket = new DatagramPacket(incomingData, incomingData.length);\n    socket.receive(incomingPacket);\n    byte[] data ;\n    data = incomingPacket.getData();\n    result = Arrays.copyOfRange(data, 0, data.length);\n    System.out.println(\"Da nhan:\" + result.length);\n    message = new String(incomingPacket.getData(), 0, incomingPacket.getLength());\n    System.out.println(message);\n} while ( !message.equals(\"Done\"));\n</code></pre>\n\n<p>after send all buffer, i send 1 String \"done\". And at Server i check end of file by String \"done\". But it not work, via UDP, how can i detect end of file transfer. Thanks!</p>\n"},{"tags":["java","spring-boot","docker","spring-security","jwt"],"answers":[{"comments":[{"owner":{"account_id":26609502,"reputation":1,"user_id":20229880,"display_name":"Wolf Ganger"},"score":0,"creation_date":1696268746,"post_id":77183886,"comment_id":136128518,"body_markdown":"Yes, I had to change the constructor in the JWTAuthenticationFilter to use the password as a second parameter instead of the authorities and the authorities as the third parameter","body":"Yes, I had to change the constructor in the JWTAuthenticationFilter to use the password as a second parameter instead of the authorities and the authorities as the third parameter"}],"tags":[],"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695769893,"creation_date":1695769893,"answer_id":77183886,"question_id":77182719,"body_markdown":"The `UsernamePasswordAuthenticationToken` constructor you used doesn&#39;t allow to pass authorities. There is another one with a third parameter for authorities (a list of `GrantedAuthority` you can use `SimpleGrantedAuthority` as implementation) see the documentation here:\r\n\r\nhttps://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken-java.lang.Object-java.lang.Object-\r\n\r\nSince you aren&#39;t passing user authorities correctly, Spring sees an authenticated user without roles.\r\n\r\nSo you should convert authorities from a list of strings to a list of GrantedAuthority and then pass it as a third constructor parameter. You can use the password as a second parameter.\r\n","title":"SpringSecurity AuthorizationFilter returning 403-Access Denied with user logged in","body":"<p>The <code>UsernamePasswordAuthenticationToken</code> constructor you used doesn't allow to pass authorities. There is another one with a third parameter for authorities (a list of <code>GrantedAuthority</code> you can use <code>SimpleGrantedAuthority</code> as implementation) see the documentation here:</p>\n<p><a href=\"https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken-java.lang.Object-java.lang.Object-\" rel=\"nofollow noreferrer\">https://docs.spring.io/spring-security/site/docs/4.0.x/apidocs/org/springframework/security/authentication/UsernamePasswordAuthenticationToken.html#UsernamePasswordAuthenticationToken-java.lang.Object-java.lang.Object-</a></p>\n<p>Since you aren't passing user authorities correctly, Spring sees an authenticated user without roles.</p>\n<p>So you should convert authorities from a list of strings to a list of GrantedAuthority and then pass it as a third constructor parameter. You can use the password as a second parameter.</p>\n"}],"owner":{"account_id":26609502,"reputation":1,"user_id":20229880,"display_name":"Wolf Ganger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77183886,"answer_count":1,"score":0,"last_activity_date":1695769893,"creation_date":1695754331,"question_id":77182719,"body_markdown":"I am using JWT for keeping the user authenticated between requests. The thing is that, after registering and logging successfully, building the token used for the rest of the requests, when I try to make a request which is not behind a &quot;.permitAll()&quot; the authorizationFilter says it denies the access when checking the authorization, even when the user logged has the authorities demanded\r\n\r\nThose are the console logs with the error:\r\n```\r\n2023-09-26T18:23:25.241Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JWTAuthenticationFilter (6/13)\r\nbackend  | 2023-09-26T18:23:25.250Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : USUARIO: george\r\nbackend  | 2023-09-26T18:23:25.252Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : AUTORIDADES: [ROLE_USER]\r\nbackend  | 2023-09-26T18:23:25.252Z TRACE 1 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (7/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header        \r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)\r\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)\r\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.spring\r\nframework.security.core.userdetails.User [Username=george, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED],\r\n Authenticated=false, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]]\r\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\r\nbackend  | 2023-09-26T18:23:25.254Z DEBUG 1 --- [nio-8080-exec-4] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 03662B9D807EE64CDC7E8E6EE96F0FC7\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$Header\r\nWriterRequest@7a0e32f2]\r\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWrite\r\nrFilter$HeaderWriterRequest@7a0e32f2] using AuthorityAuthorizationManager[authorities=[ROLE_USER]]\r\nbackend  | 2023-09-26T18:23:25.256Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.ExceptionTranslationFilter     : Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=geo\r\nrge, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=false, Details=WebAuthenticationDetails\r\n [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]] to access denied handler since access is denied\r\nbackend  | \r\nbackend  | org.springframework.security.access.AccessDeniedException: Access Denied\r\nbackend  |      at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at com.gametags.gametags.infrastructure.JWTAuthenticationFilter.doFilterInternal(JWTAuthenticationFilter.java:41) ~[classes!/:0.0.1-SNAPSHOT]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.debug.DebugFilter.invokeWithWrappedRequest(DebugFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:78) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:67) ~[spring-security-web-6.0.2.jar!/:6.0.2]\r\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.7.jar!/:na]\r\nbackend  |      at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\nbackend  | \r\nbackend  | 2023-09-26T18:23:25.258Z DEBUG 1 --- [nio-8080-exec-4] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\r\n\r\n```\r\n\r\n\r\nThis is my SecurityConfig filterchain:\r\n\r\n```\r\n@Bean\r\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\r\n    /*return http.authorizeHttpRequests(auth -&gt; {\r\n          auth.anyRequest().authenticated();\r\n        }).formLogin(Customizer.withDefaults())\r\n        .build();*/\r\n    http\r\n        .csrf().disable()\r\n        .exceptionHandling()\r\n        .authenticationEntryPoint(authEntryPoint)\r\n        .and()\r\n        .sessionManagement()\r\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\r\n        .and()\r\n        .authorizeHttpRequests()\r\n//        .requestMatchers(HttpMethod.GET).permitAll()\r\n//        .requestMatchers(HttpMethod.POST).permitAll()\r\n//            .requestMatchers(HttpMethod.PUT).permitAll()\r\n        .requestMatchers(&quot;/auth/**&quot;).permitAll()\r\n            .requestMatchers(&quot;/classification/**&quot;).hasAuthority(&quot;ROLE_USER&quot;)\r\n        .anyRequest().authenticated()\r\n        .and()\r\n        .httpBasic();\r\n    http.addFilterBefore(authenticationFilter(), UsernamePasswordAuthenticationFilter.class);\r\n    return http.build();\r\n  }\r\n```\r\n\r\n\r\nThis is my login method:\r\n\r\n```\r\npublic AuthResponseDTO loginUser(LoginInput input) {\r\n    User user = userService.findOneUserByUsername(input.getUserName());\r\n    if(ObjectUtils.isNotEmpty(user)){\r\n      Authentication authentication = authenticationManager\r\n              .authenticate(new UsernamePasswordAuthenticationToken(input.getUserName(), input.getPassword(), List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;))));\r\n      SecurityContextHolder.getContext().setAuthentication(authentication);\r\n      log.info(&quot;User logged&quot; + SecurityContextHolder.getContext().getAuthentication().getName());\r\n      String token = jwtGenerator.generateToken(authentication);\r\n      return new AuthResponseDTO(token);\r\n    }else{\r\n      throw new NoSuchElementException(&quot;The user doesn&#39;t exist&quot;);\r\n    }\r\n  }\r\n```\r\n\r\n\r\nThis is my JWTAuthenticationFilter:\r\n\r\n```\r\n@Override\r\n  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n      throws ServletException, IOException {\r\n    String token = getJWTFromRequest(request);\r\n    HttpSession session = request.getSession(true);\r\n    if(StringUtils.hasText(token) &amp;&amp; tokenGenerator.validateToken(token)){\r\n      String username = tokenGenerator.getUsernameFromJWT(token);\r\n      logger.info(&quot;USUARIO: &quot; + username);\r\n      UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\r\n      logger.info(&quot;AUTORIDADES: &quot; + userDetails.getAuthorities().toString());\r\n      UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(userDetails, userDetails.getAuthorities());\r\n      authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n      SecurityContextHolder.getContext().setAuthentication(authenticationToken);\r\n      session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, SecurityContextHolder.getContext());\r\n    }\r\n    filterChain.doFilter(request,response);\r\n  }\r\n```\r\n\r\n\r\nThis is my register method:\r\n\r\n```\r\npublic User registerUser(RegisterInput input) throws Exception {\r\n    if (!Objects.isNull(userService.findOneUserByUsername(input.getUserName()).getId())) {\r\n      throw new Exception(&quot;User already existing&quot;);\r\n    }\r\n    return userService.createUser(User.builder()\r\n        .id(UUID.randomUUID())\r\n        .password(input.getPassword())\r\n        .username(input.getUserName())\r\n        .country(input.getCountry())\r\n        .roles(List.of(&quot;ROLE_USER&quot;))\r\n        .build());\r\n  }\r\n```\r\n\r\nThe version Im using of SpringBoot is 3.0.5 and SpringSecurity is 2.3.3\r\n\r\n```\r\n&lt;parent&gt;\r\n\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;3.0.5&lt;/version&gt;\r\n\t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n\t&lt;/parent&gt;\r\n\r\n&lt;dependency&gt;\r\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n\t\t\t&lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n\t\t\t&lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\r\n\t\t&lt;/dependency&gt;\r\n```\r\n\r\n\r\nI have tried changing hasAuthority to hasRole and changing the roles to USER instead of ROLE_USER and nothing has worked","title":"SpringSecurity AuthorizationFilter returning 403-Access Denied with user logged in","body":"<p>I am using JWT for keeping the user authenticated between requests. The thing is that, after registering and logging successfully, building the token used for the rest of the requests, when I try to make a request which is not behind a &quot;.permitAll()&quot; the authorizationFilter says it denies the access when checking the authorization, even when the user logged has the authorities demanded</p>\n<p>Those are the console logs with the error:</p>\n<pre><code>2023-09-26T18:23:25.241Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking JWTAuthenticationFilter (6/13)\nbackend  | 2023-09-26T18:23:25.250Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : USUARIO: george\nbackend  | 2023-09-26T18:23:25.252Z  INFO 1 --- [nio-8080-exec-4] c.g.g.i.JWTAuthenticationFilter          : AUTORIDADES: [ROLE_USER]\nbackend  | 2023-09-26T18:23:25.252Z TRACE 1 --- [nio-8080-exec-4] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking BasicAuthenticationFilter (7/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.www.BasicAuthenticationFilter  : Did not process authentication request since failed to find username and password in Basic Authorization header        \nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (8/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (9/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (10/13)\nbackend  | 2023-09-26T18:23:25.253Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (11/13)\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=org.spring\nframework.security.core.userdetails.User [Username=george, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED],\n Authenticated=false, Details=WebAuthenticationDetails [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]]\nbackend  | 2023-09-26T18:23:25.254Z TRACE 1 --- [nio-8080-exec-4] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)\nbackend  | 2023-09-26T18:23:25.254Z DEBUG 1 --- [nio-8080-exec-4] .s.ChangeSessionIdAuthenticationStrategy : Changed session id from 03662B9D807EE64CDC7E8E6EE96F0FC7\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (12/13)\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (13/13)\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$Header\nWriterRequest@7a0e32f2]\nbackend  | 2023-09-26T18:23:25.255Z TRACE 1 --- [nio-8080-exec-4] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWrite\nrFilter$HeaderWriterRequest@7a0e32f2] using AuthorityAuthorizationManager[authorities=[ROLE_USER]]\nbackend  | 2023-09-26T18:23:25.256Z TRACE 1 --- [nio-8080-exec-4] o.s.s.w.a.ExceptionTranslationFilter     : Sending UsernamePasswordAuthenticationToken [Principal=org.springframework.security.core.userdetails.User [Username=geo\nrge, Password=[PROTECTED], Enabled=true, AccountNonExpired=true, credentialsNonExpired=true, AccountNonLocked=true, Granted Authorities=[ROLE_USER]], Credentials=[PROTECTED], Authenticated=false, Details=WebAuthenticationDetails\n [RemoteIpAddress=192.168.48.1, SessionId=03662B9D807EE64CDC7E8E6EE96F0FC7], Granted Authorities=[]] to access denied handler since access is denied\nbackend  | \nbackend  | org.springframework.security.access.AccessDeniedException: Access Denied\nbackend  |      at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:170) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at com.gametags.gametags.infrastructure.JWTAuthenticationFilter.doFilterInternal(JWTAuthenticationFilter.java:41) ~[classes!/:0.0.1-SNAPSHOT]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.debug.DebugFilter.invokeWithWrappedRequest(DebugFilter.java:90) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:78) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.security.web.debug.DebugFilter.doFilter(DebugFilter.java:67) ~[spring-security-web-6.0.2.jar!/:6.0.2]\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.7.jar!/:6.0.7]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:166) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:493) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.7.jar!/:na]\nbackend  |      at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nbackend  | \nbackend  | 2023-09-26T18:23:25.258Z DEBUG 1 --- [nio-8080-exec-4] o.s.s.w.access.AccessDeniedHandlerImpl   : Responding with 403 status code\n\n</code></pre>\n<p>This is my SecurityConfig filterchain:</p>\n<pre><code>@Bean\n  public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n    /*return http.authorizeHttpRequests(auth -&gt; {\n          auth.anyRequest().authenticated();\n        }).formLogin(Customizer.withDefaults())\n        .build();*/\n    http\n        .csrf().disable()\n        .exceptionHandling()\n        .authenticationEntryPoint(authEntryPoint)\n        .and()\n        .sessionManagement()\n        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n        .and()\n        .authorizeHttpRequests()\n//        .requestMatchers(HttpMethod.GET).permitAll()\n//        .requestMatchers(HttpMethod.POST).permitAll()\n//            .requestMatchers(HttpMethod.PUT).permitAll()\n        .requestMatchers(&quot;/auth/**&quot;).permitAll()\n            .requestMatchers(&quot;/classification/**&quot;).hasAuthority(&quot;ROLE_USER&quot;)\n        .anyRequest().authenticated()\n        .and()\n        .httpBasic();\n    http.addFilterBefore(authenticationFilter(), UsernamePasswordAuthenticationFilter.class);\n    return http.build();\n  }\n</code></pre>\n<p>This is my login method:</p>\n<pre><code>public AuthResponseDTO loginUser(LoginInput input) {\n    User user = userService.findOneUserByUsername(input.getUserName());\n    if(ObjectUtils.isNotEmpty(user)){\n      Authentication authentication = authenticationManager\n              .authenticate(new UsernamePasswordAuthenticationToken(input.getUserName(), input.getPassword(), List.of(new SimpleGrantedAuthority(&quot;ROLE_USER&quot;))));\n      SecurityContextHolder.getContext().setAuthentication(authentication);\n      log.info(&quot;User logged&quot; + SecurityContextHolder.getContext().getAuthentication().getName());\n      String token = jwtGenerator.generateToken(authentication);\n      return new AuthResponseDTO(token);\n    }else{\n      throw new NoSuchElementException(&quot;The user doesn't exist&quot;);\n    }\n  }\n</code></pre>\n<p>This is my JWTAuthenticationFilter:</p>\n<pre><code>@Override\n  protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n      throws ServletException, IOException {\n    String token = getJWTFromRequest(request);\n    HttpSession session = request.getSession(true);\n    if(StringUtils.hasText(token) &amp;&amp; tokenGenerator.validateToken(token)){\n      String username = tokenGenerator.getUsernameFromJWT(token);\n      logger.info(&quot;USUARIO: &quot; + username);\n      UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);\n      logger.info(&quot;AUTORIDADES: &quot; + userDetails.getAuthorities().toString());\n      UsernamePasswordAuthenticationToken authenticationToken = new UsernamePasswordAuthenticationToken(userDetails, userDetails.getAuthorities());\n      authenticationToken.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n      SecurityContextHolder.getContext().setAuthentication(authenticationToken);\n      session.setAttribute(&quot;SPRING_SECURITY_CONTEXT&quot;, SecurityContextHolder.getContext());\n    }\n    filterChain.doFilter(request,response);\n  }\n</code></pre>\n<p>This is my register method:</p>\n<pre><code>public User registerUser(RegisterInput input) throws Exception {\n    if (!Objects.isNull(userService.findOneUserByUsername(input.getUserName()).getId())) {\n      throw new Exception(&quot;User already existing&quot;);\n    }\n    return userService.createUser(User.builder()\n        .id(UUID.randomUUID())\n        .password(input.getPassword())\n        .username(input.getUserName())\n        .country(input.getCountry())\n        .roles(List.of(&quot;ROLE_USER&quot;))\n        .build());\n  }\n</code></pre>\n<p>The version Im using of SpringBoot is 3.0.5 and SpringSecurity is 2.3.3</p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.5&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n\n&lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;version&gt;2.3.3.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I have tried changing hasAuthority to hasRole and changing the roles to USER instead of ROLE_USER and nothing has worked</p>\n"},{"tags":["java","spring-boot","spring-security","jwt"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1694363601,"post_id":77076987,"comment_id":135878383,"body_markdown":"Does this answer your question? [Java Spring cannot logout properly](https://stackoverflow.com/questions/75356073/java-spring-cannot-logout-properly)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/75356073/java-spring-cannot-logout-properly\">Java Spring cannot logout properly</a>"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1694364733,"post_id":77076987,"comment_id":135878509,"body_markdown":"@Toerktumlare No, I tried to implement the process of invalidating the token.","body":"@Toerktumlare No, I tried to implement the process of invalidating the token."},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1694365076,"post_id":77076987,"comment_id":135878537,"body_markdown":"Use the OIDC Endpoint to Log Users Out of Auth0 - https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0","body":"Use the OIDC Endpoint to Log Users Out of Auth0 - <a href=\"https://auth0.com/docs/authenticate/login/logout/log-users-out-of-auth0\" rel=\"nofollow noreferrer\">auth0.com/docs/authenticate/login/logout/log-users-out-of-au&zwnj;&#8203;th0</a>"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694365154,"post_id":77076987,"comment_id":135878543,"body_markdown":"i looked at your filter, your filter does nothing except validate the signage of the token. If you provide a token, how does your filter know that the token has been &quot;invalidated&quot;, well it doesnt? The funny thing here is that you are reimplementing session authentication using JWTs, why dont you just use session cookies?","body":"i looked at your filter, your filter does nothing except validate the signage of the token. If you provide a token, how does your filter know that the token has been &quot;invalidated&quot;, well it doesnt? The funny thing here is that you are reimplementing session authentication using JWTs, why dont you just use session cookies?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694365388,"post_id":77076987,"comment_id":135878555,"body_markdown":"@K.Nicholas is he using `auth0` i can&#39;t see that, this entire application looks like some home built own custom insecure authentication service by someone that doesnt know what FormLogin is, and he is rebuilding FormLogin from scratch but insisting on using JWTs instead of cookies which means he is loosing the benefits like `httpOnly` `Secured`and `same-site`","body":"@K.Nicholas is he using <code>auth0</code> i can&#39;t see that, this entire application looks like some home built own custom insecure authentication service by someone that doesnt know what FormLogin is, and he is rebuilding FormLogin from scratch but insisting on using JWTs instead of cookies which means he is loosing the benefits like <code>httpOnly</code> <code>Secured</code>and <code>same-site</code>"},{"owner":{"account_id":4688171,"reputation":11056,"user_id":3795036,"accept_rate":88,"display_name":"K.Nicholas"},"score":0,"creation_date":1694366122,"post_id":77076987,"comment_id":135878640,"body_markdown":"oauth or auth0 has the same odic logout endpoint, so I&#39;m assuming that&#39;s the answer here. If you want to logout the JWT token, tell the server that issued it to you. I&#39;m assuming at this point it&#39;s a bogus question since it should be obvious to anyone working with JWTs.","body":"oauth or auth0 has the same odic logout endpoint, so I&#39;m assuming that&#39;s the answer here. If you want to logout the JWT token, tell the server that issued it to you. I&#39;m assuming at this point it&#39;s a bogus question since it should be obvious to anyone working with JWTs."},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694371540,"post_id":77076987,"comment_id":135879146,"body_markdown":"he doesnt have an issuer, the github he has provided he has built his own login and issues a jwt by himself https://github.com/Rapter1990/bookdelivery/blob/0d0394c882ba2b2e4008a7fbf90583c4dfad4cde/src/main/java/com/example/demo/service/impl/AuthServiceImpl.java#L60 so basically he has done the same misstake as everyone else, he is using JWT as a session. Most likely just found some poor tutorial saying that you should use JWTs as sessions","body":"he doesnt have an issuer, the github he has provided he has built his own login and issues a jwt by himself <a href=\"https://github.com/Rapter1990/bookdelivery/blob/0d0394c882ba2b2e4008a7fbf90583c4dfad4cde/src/main/java/com/example/demo/service/impl/AuthServiceImpl.java#L60\" rel=\"nofollow noreferrer\">github.com/Rapter1990/bookdelivery/blob/&hellip;</a> so basically he has done the same misstake as everyone else, he is using JWT as a session. Most likely just found some poor tutorial saying that you should use JWTs as sessions"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":1,"creation_date":1694371738,"post_id":77076987,"comment_id":135879163,"body_markdown":"so the answer here is basically, he is using JWTs the wrong way and, he is using them as sessions which you should not. You dont use JWTs when you build this type of login because of the simple reason. You can not invalidate a JWT without either rotating the keys which invalidates all JWTs issued, or as he is trying to do, build a some sort of database to keep track of the issued JWTs, which means he needs to check in his filter everytime someone supplies a JWT if the JWT is logged out or not, which he currently doesnt. So his login endpoint does nothing, and his filter will gladly let them in","body":"so the answer here is basically, he is using JWTs the wrong way and, he is using them as sessions which you should not. You dont use JWTs when you build this type of login because of the simple reason. You can not invalidate a JWT without either rotating the keys which invalidates all JWTs issued, or as he is trying to do, build a some sort of database to keep track of the issued JWTs, which means he needs to check in his filter everytime someone supplies a JWT if the JWT is logged out or not, which he currently doesnt. So his login endpoint does nothing, and his filter will gladly let them in"}],"answers":[{"tags":[],"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1694374433,"creation_date":1694374074,"answer_id":77077604,"question_id":77076987,"body_markdown":"So the answer here is the following:\r\n\r\nWhat you have here is you have built a login, that at successful login you create your JWT in your service and hand out a token directly to the calling client. This is in oauth2 called an `implicit flow`and was deprecated from the oauth2 rfc because it was found to be insecure. \r\n\r\nYou also have built some sort of custom solution with some sort of thing you call a refresh token, which basically stores an id in some sort of storage.\r\n\r\nSo in principal, what you have actually built is some sort of Session authentication containing state, but completely custom, using JWTs.\r\n\r\nYou have tried to reinvent something that already exists in Spring Security which is called `FormLogin` which basically does all the things you want the only difference is that `FormLogin` uses cookies (which has additional security features like `httpOnly`, `Secured`, and `same-site`) but with JWTs.\r\n\r\nSo you are ending up with the same thing as `FormLogin` just less secure.\r\n\r\n&quot;Logging out&quot; a JWT isn&#39;t really possible. You can only invalidate a JWT by letting it time out. Once a JWT is created with and expiration date is set and then signed, its signed. The contract has been written.\r\n\r\nThe problem with your code is that when someone supplies a JWT to your application is that your filter that checks the JWTs just checks if the signage and expiration is still valid.\r\n\r\n```\r\n// Checking the validity and expiration\r\nJwts.parserBuilder()\r\n    .setSigningKey(getSignInKey())\r\n    .build()\r\n    .parseClaimsJws(authToken);\r\n```\r\n\r\nAs long is the signage and time stamp is still valid your JWT will pass through here:\r\n\r\n```\r\nif (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\r\n    // some other code\r\n}\r\n```\r\n\r\nWhich means you never check if the token is actually *logged out* in your custom refreshToken database, so the filter never understands that anything is logged out.\r\n\r\nSo you need to do a check here, but remember, you will then in each request done to your service, you have to possibly do 2 database calls. One to check if the token isnt logged out, and a second one to check if the user exists and log them in. Thats 2 database calls for every request, unless you store things in memory, or offload using caches etc.\r\n\r\n\r\nThe bottom line is that, you are basically trying to build `FormLogin` using JWTs, but less secure and possibly with less good performance and i strongly discourage you from doing so.\r\n","title":"How can I invalidate the jwt token after logout in Spring Boot with Spring Security","body":"<p>So the answer here is the following:</p>\n<p>What you have here is you have built a login, that at successful login you create your JWT in your service and hand out a token directly to the calling client. This is in oauth2 called an <code>implicit flow</code>and was deprecated from the oauth2 rfc because it was found to be insecure.</p>\n<p>You also have built some sort of custom solution with some sort of thing you call a refresh token, which basically stores an id in some sort of storage.</p>\n<p>So in principal, what you have actually built is some sort of Session authentication containing state, but completely custom, using JWTs.</p>\n<p>You have tried to reinvent something that already exists in Spring Security which is called <code>FormLogin</code> which basically does all the things you want the only difference is that <code>FormLogin</code> uses cookies (which has additional security features like <code>httpOnly</code>, <code>Secured</code>, and <code>same-site</code>) but with JWTs.</p>\n<p>So you are ending up with the same thing as <code>FormLogin</code> just less secure.</p>\n<p>&quot;Logging out&quot; a JWT isn't really possible. You can only invalidate a JWT by letting it time out. Once a JWT is created with and expiration date is set and then signed, its signed. The contract has been written.</p>\n<p>The problem with your code is that when someone supplies a JWT to your application is that your filter that checks the JWTs just checks if the signage and expiration is still valid.</p>\n<pre><code>// Checking the validity and expiration\nJwts.parserBuilder()\n    .setSigningKey(getSignInKey())\n    .build()\n    .parseClaimsJws(authToken);\n</code></pre>\n<p>As long is the signage and time stamp is still valid your JWT will pass through here:</p>\n<pre><code>if (jwt != null &amp;&amp; jwtUtils.validateJwtToken(jwt)) {\n    // some other code\n}\n</code></pre>\n<p>Which means you never check if the token is actually <em>logged out</em> in your custom refreshToken database, so the filter never understands that anything is logged out.</p>\n<p>So you need to do a check here, but remember, you will then in each request done to your service, you have to possibly do 2 database calls. One to check if the token isnt logged out, and a second one to check if the user exists and log them in. Thats 2 database calls for every request, unless you store things in memory, or offload using caches etc.</p>\n<p>The bottom line is that, you are basically trying to build <code>FormLogin</code> using JWTs, but less secure and possibly with less good performance and i strongly discourage you from doing so.</p>\n"},{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695769671,"creation_date":1694394850,"answer_id":77078437,"question_id":77076987,"body_markdown":"You just can&#39;t invalidate a JWT.\r\n\r\nWhat you can invalidate, are the sessions on the OAuth2 authorization server (which delivered the token) and OAuth2 client (to which the token was delivered).\r\n\r\nSpring Security client implementation can be configured to do both: perform logout from the authorization server with a post-logout handler on the client.\r\n\r\nThe thing is that apparently, the application configuration and flows used have nothing to do with OAuth2, which ends to something pretty unsafe and inefficient as pointed in the other answer. You should just trash all that and opt for:\r\n- [`formLogin`][1] (with sessions and CSRF protection) if you don&#39;t need externalized authentication (SSO with the rest of your information system) or secured inter micro-services calls\r\n- proper OAuth2 otherwise (with confidential client on your server) \r\n\r\n\r\n  [1]: https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html","title":"How can I invalidate the jwt token after logout in Spring Boot with Spring Security","body":"<p>You just can't invalidate a JWT.</p>\n<p>What you can invalidate, are the sessions on the OAuth2 authorization server (which delivered the token) and OAuth2 client (to which the token was delivered).</p>\n<p>Spring Security client implementation can be configured to do both: perform logout from the authorization server with a post-logout handler on the client.</p>\n<p>The thing is that apparently, the application configuration and flows used have nothing to do with OAuth2, which ends to something pretty unsafe and inefficient as pointed in the other answer. You should just trash all that and opt for:</p>\n<ul>\n<li><a href=\"https://docs.spring.io/spring-security/reference/servlet/authentication/passwords/form.html\" rel=\"nofollow noreferrer\"><code>formLogin</code></a> (with sessions and CSRF protection) if you don't need externalized authentication (SSO with the rest of your information system) or secured inter micro-services calls</li>\n<li>proper OAuth2 otherwise (with confidential client on your server)</li>\n</ul>\n"}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":891,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":77077604,"answer_count":2,"score":0,"last_activity_date":1695769671,"creation_date":1694363275,"question_id":77076987,"body_markdown":"I tried to implement an example with the usage of jwt token in Spring Boot. It covers register, login, refresh token and lastly logout process. I have a problem in logout process.\r\n\r\nI tried to delete jwt token after logout but I think the process of invalidating the jwt token is the best way to handle with this process.\r\n\r\nHere is the logout method of auth service shown below\r\n\r\n\r\nHere is the logout request shown below\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    public class LogoutRequest {\r\n    \r\n        private String token;\r\n    }\r\n\r\nHere is the logout method of controller\r\n\r\n    @PostMapping(&quot;/logout&quot;)\r\n    public ResponseEntity&lt;String&gt; logout(@RequestBody LogoutRequest request) {\r\n\r\n        return ResponseEntity.ok(authService.logout(request));\r\n    }\r\n\r\n\r\nHere is the getIdFromToken shown below\r\n\r\n    public Long getIdFromToken(String token){\r\n        return Long.parseLong(extractClaims(token).getId());\r\n    }\r\n\r\nHere is deleteByUserId shown below\r\n\r\n    @Override\r\n    public int deleteByUserId(Long userId) {\r\n\r\n        User user = userService.findById(userId).orElseThrow(() -&gt; new RuntimeException(&quot;User not found&quot;));\r\n        return refreshTokenRepository.deleteByUser(user);\r\n    }\r\n\r\nHow can I do that?\r\n\r\nHere is the repo : [Link][1]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/bookdelivery","title":"How can I invalidate the jwt token after logout in Spring Boot with Spring Security","body":"<p>I tried to implement an example with the usage of jwt token in Spring Boot. It covers register, login, refresh token and lastly logout process. I have a problem in logout process.</p>\n<p>I tried to delete jwt token after logout but I think the process of invalidating the jwt token is the best way to handle with this process.</p>\n<p>Here is the logout method of auth service shown below</p>\n<p>Here is the logout request shown below</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\npublic class LogoutRequest {\n\n    private String token;\n}\n</code></pre>\n<p>Here is the logout method of controller</p>\n<pre><code>@PostMapping(&quot;/logout&quot;)\npublic ResponseEntity&lt;String&gt; logout(@RequestBody LogoutRequest request) {\n\n    return ResponseEntity.ok(authService.logout(request));\n}\n</code></pre>\n<p>Here is the getIdFromToken shown below</p>\n<pre><code>public Long getIdFromToken(String token){\n    return Long.parseLong(extractClaims(token).getId());\n}\n</code></pre>\n<p>Here is deleteByUserId shown below</p>\n<pre><code>@Override\npublic int deleteByUserId(Long userId) {\n\n    User user = userService.findById(userId).orElseThrow(() -&gt; new RuntimeException(&quot;User not found&quot;));\n    return refreshTokenRepository.deleteByUser(user);\n}\n</code></pre>\n<p>How can I do that?</p>\n<p>Here is the repo : <a href=\"https://github.com/Rapter1990/bookdelivery\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","unit-testing","spring-boot","mockito","junit5"],"comments":[{"owner":{"account_id":3020783,"reputation":963,"user_id":2561895,"accept_rate":67,"display_name":"Brandon"},"score":0,"creation_date":1550073630,"post_id":54674251,"comment_id":96138356,"body_markdown":"Would you mind sharing more of your code? Such as your CrudRespository and your unit test test case?","body":"Would you mind sharing more of your code? Such as your CrudRespository and your unit test test case?"},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550073984,"post_id":54674251,"comment_id":96138565,"body_markdown":"@Brandon of course, please find attached the code","body":"@Brandon of course, please find attached the code"},{"owner":{"account_id":4629221,"reputation":2621,"user_id":3752185,"display_name":"Janar"},"score":3,"creation_date":1550074168,"post_id":54674251,"comment_id":96138689,"body_markdown":"mockito should be able to mock that interface just fine - what is the exception you are getting?","body":"mockito should be able to mock that interface just fine - what is the exception you are getting?"},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550074259,"post_id":54674251,"comment_id":96138735,"body_markdown":"@Janar : Mockito cannot mock this class: interface fr.test.repo.Repository.BookRepository.\n  The error is this one : &quot;Mockito can only mock non-private &amp; non-final classes.\nIf you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.&quot;","body":"@Janar : Mockito cannot mock this class: interface fr.test.repo.Repository.BookRepository.   The error is this one : &quot;Mockito can only mock non-private &amp; non-final classes. If you&#39;re not sure why you&#39;re getting this error, please report to the mailing list.&quot;"},{"owner":{"account_id":9553206,"reputation":2510,"user_id":7099148,"display_name":"user31601"},"score":0,"creation_date":1550074391,"post_id":54674251,"comment_id":96138825,"body_markdown":"Are you sure its the `given(bookRepository.findAll())` line that&#39;s throwing that exception? Find all is a non-final public method, so it should be fine.","body":"Are you sure its the <code>given(bookRepository.findAll())</code> line that&#39;s throwing that exception? Find all is a non-final public method, so it should be fine."},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550074545,"post_id":54674251,"comment_id":96138921,"body_markdown":"@user31601 It fails before entering the test part.\nI forgot to precise that I&#39;m using MockitoExtensions given by JUNIT jupiter","body":"@user31601 It fails before entering the test part. I forgot to precise that I&#39;m using MockitoExtensions given by JUNIT jupiter"},{"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"score":0,"creation_date":1550139184,"post_id":54674251,"comment_id":96163733,"body_markdown":"I&#39;ve noticed that my code isn&#39;t working when using Junit5 + Mockito from junit jupiter but it works perfectly fine with Junit 4 + basic Mockito&#129488;.\n\nI&#39;m thinking that Junit 5 mockito isn&#39;t extending all the basic mockito behaviour.","body":"I&#39;ve noticed that my code isn&#39;t working when using Junit5 + Mockito from junit jupiter but it works perfectly fine with Junit 4 + basic Mockito.  I&#39;m thinking that Junit 5 mockito isn&#39;t extending all the basic mockito behaviour."}],"answers":[{"tags":[],"owner":{"account_id":8975058,"reputation":426,"user_id":6692227,"display_name":"theonlyrao"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550077398,"creation_date":1550077398,"answer_id":54675724,"question_id":54674251,"body_markdown":"I&#39;m wondering if the issue is that Mockito isn&#39;t sure how to inject the `bookService` into the Spring TestContext.\r\n\r\nI would try annotating the test with `@ExtendWith(SpringExtension.class)` as suggested at the bottom of the &quot;[Writing Tests Dependency Injection][1]&quot; section of the JUnit5 User Guide.\r\n\r\nThe source code for that annotation is [here][2].\r\n\r\nI also think it&#39;s possible the `given` [BDD style of Mockito][3] and the `when\\\\then` style could have different results.\r\n\r\n\r\n  [1]: https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\r\n  [2]: https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/context/junit/jupiter/SpringExtension.java\r\n  [3]: https://static.javadoc.io/org.mockito/mockito-core/2.24.0/org/mockito/Mockito.html#bdd_mockito","title":"How to mock JPA repository&#39;s find method in unit tests","body":"<p>I'm wondering if the issue is that Mockito isn't sure how to inject the <code>bookService</code> into the Spring TestContext.</p>\n\n<p>I would try annotating the test with <code>@ExtendWith(SpringExtension.class)</code> as suggested at the bottom of the \"<a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-dependency-injection\" rel=\"nofollow noreferrer\">Writing Tests Dependency Injection</a>\" section of the JUnit5 User Guide.</p>\n\n<p>The source code for that annotation is <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-test/src/main/java/org/springframework/test/context/junit/jupiter/SpringExtension.java\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I also think it's possible the <code>given</code> <a href=\"https://static.javadoc.io/org.mockito/mockito-core/2.24.0/org/mockito/Mockito.html#bdd_mockito\" rel=\"nofollow noreferrer\">BDD style of Mockito</a> and the <code>when\\\\then</code> style could have different results.</p>\n"},{"tags":[],"owner":{"account_id":3490105,"reputation":7,"user_id":2920017,"display_name":"Mathan"},"comment_count":0,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1550141694,"creation_date":1550141694,"answer_id":54688729,"question_id":54674251,"body_markdown":"If i remember well your test have to use this :\r\n\r\n```java\r\n\t@Before\r\n\tpublic void init() {\r\n\t\tMockitoAnnotations.initMocks(this);\r\n\t}\r\n```\r\n","title":"How to mock JPA repository&#39;s find method in unit tests","body":"<p>If i remember well your test have to use this :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>    @Before\n    public void init() {\n        MockitoAnnotations.initMocks(this);\n    }\n</code></pre>\n"}],"owner":{"account_id":6759137,"reputation":111,"user_id":5206714,"accept_rate":50,"display_name":"Kyle_jumpen"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9015,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":2,"score":4,"last_activity_date":1695769219,"creation_date":1550073138,"question_id":54674251,"body_markdown":"I&#39;m trying to UT my little project and I have a problem.\r\nMy application use a simple Layered Architecture and I can&#39;t happen to UT the service Layer.\r\nIn fact I&#39;m trying to mock the class **[CrudRepository][1]** from Spring-data.\r\nI&#39;m trying to mock the method findAll of one of my repository that is extending this class but mockito can&#39;t mock Interface.\r\nIs there a way to do it simply aside from creating the bean myself and filling it ?\r\n\r\n[Update]\r\nHere is the Repository Code :\r\n\r\n    package fr.kaf.interview.Repository;\r\n\r\n    import fr.kaf.interview.model.Book;\r\n    import org.springframework.data.repository.CrudRepository;\r\n    import org.springframework.stereotype.Repository;\r\n\r\n    @Repository\r\n    public interface BookRepository extends CrudRepository&lt;Book,Long&gt; {\r\n    }\r\n\r\n\r\n\r\nHere Is The UT :\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    class BookServiceTest {\r\n\r\n    \r\n    @Mock\r\n    private BookRepository bookRepository;\r\n\r\n    @InjectMocks\r\n    private BookService bookService;\r\n\r\n    @Test\r\n    public void should_get_All_books_from_database() {\r\n        //Given\r\n\r\n        Person author = new Person();\r\n        author.setFirstName(&quot;Ka&quot;);\r\n        author.setLastName(&quot;AwQl&quot;);\r\n\r\n        Book firstBook = new Book();\r\n        firstBook.setTitle(&quot;One Book&quot;);\r\n        firstBook.setAuthors(singletonList(author));\r\n\r\n        Book secondBook = new Book();\r\n        secondBook.setTitle(&quot;Second Book&quot;);\r\n        secondBook.setAuthors(singletonList(author));\r\n\r\n        given(bookRepository.findAll()).willReturn(asList(firstBook, secondBook));\r\n\r\n        //When\r\n        List&lt;Book&gt; allBooks = bookService.getAllBooks();\r\n\r\n        //Then\r\n        assertThat(allBooks).containsExactly(firstBook, secondBook);\r\n\r\n    }\r\n\r\n    }\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html","title":"How to mock JPA repository&#39;s find method in unit tests","body":"<p>I'm trying to UT my little project and I have a problem.\nMy application use a simple Layered Architecture and I can't happen to UT the service Layer.\nIn fact I'm trying to mock the class <strong><a href=\"https://docs.spring.io/spring-data/commons/docs/current/api/org/springframework/data/repository/CrudRepository.html\" rel=\"nofollow noreferrer\">CrudRepository</a></strong> from Spring-data.\nI'm trying to mock the method findAll of one of my repository that is extending this class but mockito can't mock Interface.\nIs there a way to do it simply aside from creating the bean myself and filling it ?</p>\n\n<p>[Update]\nHere is the Repository Code :</p>\n\n<pre><code>package fr.kaf.interview.Repository;\n\nimport fr.kaf.interview.model.Book;\nimport org.springframework.data.repository.CrudRepository;\nimport org.springframework.stereotype.Repository;\n\n@Repository\npublic interface BookRepository extends CrudRepository&lt;Book,Long&gt; {\n}\n</code></pre>\n\n<p>Here Is The UT :</p>\n\n<pre><code>@ExtendWith(MockitoExtension.class)\nclass BookServiceTest {\n\n\n@Mock\nprivate BookRepository bookRepository;\n\n@InjectMocks\nprivate BookService bookService;\n\n@Test\npublic void should_get_All_books_from_database() {\n    //Given\n\n    Person author = new Person();\n    author.setFirstName(\"Ka\");\n    author.setLastName(\"AwQl\");\n\n    Book firstBook = new Book();\n    firstBook.setTitle(\"One Book\");\n    firstBook.setAuthors(singletonList(author));\n\n    Book secondBook = new Book();\n    secondBook.setTitle(\"Second Book\");\n    secondBook.setAuthors(singletonList(author));\n\n    given(bookRepository.findAll()).willReturn(asList(firstBook, secondBook));\n\n    //When\n    List&lt;Book&gt; allBooks = bookService.getAllBooks();\n\n    //Then\n    assertThat(allBooks).containsExactly(firstBook, secondBook);\n\n}\n\n}\n</code></pre>\n"},{"tags":["java","file","char","return"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695390004,"post_id":77158011,"comment_id":136021977,"body_markdown":"*//1.Read words  from File and return as arr of char* If the file contained only the word &#39;cat&#39;, what would your array be? You should probably post an example file too","body":"<i>//1.Read words  from File and return as arr of char</i> If the file contained only the word &#39;cat&#39;, what would your array be? You should probably post an example file too"},{"owner":{"account_id":29509322,"reputation":3,"user_id":22614714,"display_name":"Maiinjoon"},"score":0,"creation_date":1695391062,"post_id":77158011,"comment_id":136022231,"body_markdown":"yes any word  like you say for example  a file called word.txt and inside the word cat so the array have char [ ] word ={ &#39;c&#39;, &#39;a&#39; ,&#39;t&#39; };","body":"yes any word  like you say for example  a file called word.txt and inside the word cat so the array have char [ ] word ={ &#39;c&#39;, &#39;a&#39; ,&#39;t&#39; };"}],"answers":[{"comments":[{"owner":{"account_id":29509322,"reputation":3,"user_id":22614714,"display_name":"Maiinjoon"},"score":0,"creation_date":1695394567,"post_id":77158370,"comment_id":136022975,"body_markdown":"Thank you for your help, it is very useful.\nIf I understand correctly instead of trying to save it in a char array directly we save it in a String and we pass it to char array with the method.\nBest regards","body":"Thank you for your help, it is very useful. If I understand correctly instead of trying to save it in a char array directly we save it in a String and we pass it to char array with the method. Best regards"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695399613,"post_id":77158370,"comment_id":136024022,"body_markdown":"*st+=aux;* of course makes no sense so probably not a good idea to quote it. So, when you&#39;ve got all the words into the array, how do you know where one begins and ends?","body":"<i>st+=aux;</i> of course makes no sense so probably not a good idea to quote it. So, when you&#39;ve got all the words into the array, how do you know where one begins and ends?"}],"tags":[],"owner":{"account_id":370994,"reputation":35154,"user_id":719263,"accept_rate":100,"display_name":"Jean-Baptiste Yun&#232;s"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695391794,"creation_date":1695391794,"answer_id":77158370,"question_id":77158011,"body_markdown":"Nothing changes `aux` in your code:\r\n\r\n    char [] aux = null;\r\n    // Declaring a string variable\r\n    String st;\r\n    // Condition holds true till\r\n    // there is character in a string\r\n    while ((st = br.readLine()) != null)\r\n      st+=aux;\r\n    return aux;\r\n\r\nConcatenate all read strings and then get the char array from:\r\n\r\n    String st = &quot;&quot;, read = null;\r\n    // Condition holds true till\r\n    // there is character in a string\r\n    while ((read = br.readLine()) != null)\r\n      st += read;\r\n    return st.toCharArray();\r\n\r\n\r\n","title":"Function to read file passing it by parameter","body":"<p>Nothing changes <code>aux</code> in your code:</p>\n<pre><code>char [] aux = null;\n// Declaring a string variable\nString st;\n// Condition holds true till\n// there is character in a string\nwhile ((st = br.readLine()) != null)\n  st+=aux;\nreturn aux;\n</code></pre>\n<p>Concatenate all read strings and then get the char array from:</p>\n<pre><code>String st = &quot;&quot;, read = null;\n// Condition holds true till\n// there is character in a string\nwhile ((read = br.readLine()) != null)\n  st += read;\nreturn st.toCharArray();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29509322,"reputation":3,"user_id":22614714,"display_name":"Maiinjoon"},"score":0,"creation_date":1695764551,"post_id":77159479,"comment_id":136067553,"body_markdown":"Hello, I finally understood what you meant. It is true with the way we are reading it only takes the last word.I couldn&#39;t understand the example you gave.\nCould you update the code by adding it in an individual method. and where do we specify the file path ?\nRegards.","body":"Hello, I finally understood what you meant. It is true with the way we are reading it only takes the last word.I couldn&#39;t understand the example you gave. Could you update the code by adding it in an individual method. and where do we specify the file path ? Regards."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695768311,"post_id":77159479,"comment_id":136067932,"body_markdown":"There&#39;s a complete app. Pass the path to the file as an argument when running it","body":"There&#39;s a complete app. Pass the path to the file as an argument when running it"}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695768267,"creation_date":1695401849,"answer_id":77159479,"question_id":77158011,"body_markdown":"As I mentioned in my comment above, if you have a file containing words on each line, you&#39;re not going to to be able to distinguish the beginnings and endings of words if you put everything into one `char[]`. You *can* use `char[][]` though, so something like:\r\n\r\n```\r\nimport java.nio.file.Files;\r\nimport java.nio.file.Path;\r\nimport java.util.Scanner;\r\nimport java.util.Arrays;\r\n\r\npublic class Words {\r\n    public static void main(String[] args) throws Exception {\r\n        try (Scanner sc = new Scanner(Files.newBufferedReader(Path.of(args[0])))) {\r\n            char[][] words = sc.tokens()\r\n                .map(String::toCharArray)\r\n                .toArray(char[][]::new);\r\n            System.out.println(Arrays.deepToString(words));\r\n        }\r\n    }\r\n}\r\n```","title":"Function to read file passing it by parameter","body":"<p>As I mentioned in my comment above, if you have a file containing words on each line, you're not going to to be able to distinguish the beginnings and endings of words if you put everything into one <code>char[]</code>. You <em>can</em> use <code>char[][]</code> though, so something like:</p>\n<pre><code>import java.nio.file.Files;\nimport java.nio.file.Path;\nimport java.util.Scanner;\nimport java.util.Arrays;\n\npublic class Words {\n    public static void main(String[] args) throws Exception {\n        try (Scanner sc = new Scanner(Files.newBufferedReader(Path.of(args[0])))) {\n            char[][] words = sc.tokens()\n                .map(String::toCharArray)\n                .toArray(char[][]::new);\n            System.out.println(Arrays.deepToString(words));\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29509322,"reputation":3,"user_id":22614714,"display_name":"Maiinjoon"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77158370,"answer_count":2,"score":-1,"last_activity_date":1695768267,"creation_date":1695388967,"question_id":77158011,"body_markdown":"Hi guys I&#39;m having difficulty with a method to read file.I have not found anything in the documentation.\r\n\r\nI&#39;m trying to return an array of char.\r\n\r\n```\r\npublic class ReadFile {\r\n\r\n\tpublic static void main(String[] args) throws IOException {\r\n\t\t\r\n\t\tFile  f = new File(&quot;word.txt&quot;);\r\n\t \r\n\t\tchar [] word=ReadWordFile(f);\r\n\t\t\r\n\t\tSystem.out.println(word);\r\n\r\n\t}\r\n\t\r\n\t\r\n\t//1.Read words  from File and return as arr of char\r\n\tpublic static  char [] ReadWordFile(File f) throws IOException {\r\n\t\t BufferedReader br\r\n         = new BufferedReader(new FileReader(f));\r\n\t\t \r\n\t\t char [] aux = null;\r\n\r\n     // Declaring a string variable\r\n     String st;\r\n     // Condition holds true till\r\n     // there is character in a string\r\n     while ((st = br.readLine()) != null)\r\n\r\n\t\tst+=aux;\r\n\r\n     return aux;\t\r\n\t}\r\n```","title":"Function to read file passing it by parameter","body":"<p>Hi guys I'm having difficulty with a method to read file.I have not found anything in the documentation.</p>\n<p>I'm trying to return an array of char.</p>\n<pre><code>public class ReadFile {\n\n    public static void main(String[] args) throws IOException {\n        \n        File  f = new File(&quot;word.txt&quot;);\n     \n        char [] word=ReadWordFile(f);\n        \n        System.out.println(word);\n\n    }\n    \n    \n    //1.Read words  from File and return as arr of char\n    public static  char [] ReadWordFile(File f) throws IOException {\n         BufferedReader br\n         = new BufferedReader(new FileReader(f));\n         \n         char [] aux = null;\n\n     // Declaring a string variable\n     String st;\n     // Condition holds true till\n     // there is character in a string\n     while ((st = br.readLine()) != null)\n\n        st+=aux;\n\n     return aux;    \n    }\n</code></pre>\n"},{"tags":["java","spring","rest","logging"],"comments":[{"owner":{"account_id":178052,"reputation":1861,"user_id":409784,"display_name":"Francois"},"score":0,"creation_date":1422461128,"post_id":3892018,"comment_id":44760258,"body_markdown":"You can also use LoggingRequestInterceptor\r\n\r\ncf http://stackoverflow.com/a/22620168/409784","body":"You can also use LoggingRequestInterceptor    cf <a href=\"http://stackoverflow.com/a/22620168/409784\">stackoverflow.com/a/22620168/409784</a>"},{"owner":{"account_id":3260335,"reputation":23,"user_id":2746033,"display_name":"user2746033"},"score":0,"creation_date":1511505795,"post_id":3892018,"comment_id":81889668,"body_markdown":"Resolved https://stackoverflow.com/questions/7952154/spring-resttemplate-how-to-enable-full-debugging-logging-of-requests-responses/47467572","body":"Resolved <a href=\"https://stackoverflow.com/questions/7952154/spring-resttemplate-how-to-enable-full-debugging-logging-of-requests-responses/47467572\" title=\"spring resttemplate how to enable full debugging logging of requests responses\">stackoverflow.com/questions/7952154/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":170154,"reputation":1757,"user_id":396675,"accept_rate":73,"display_name":"rjsang"},"score":3,"creation_date":1286811150,"post_id":3892159,"comment_id":4164838,"body_markdown":"That log4j setting logs the requests but not the responses. I can&#39;t use curl because it is a Windows environment, plus I&#39;m looking for something I could commit as part of the codebase so that the logging is enabled for our integration tests","body":"That log4j setting logs the requests but not the responses. I can&#39;t use curl because it is a Windows environment, plus I&#39;m looking for something I could commit as part of the codebase so that the logging is enabled for our integration tests"},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1286817946,"post_id":3892159,"comment_id":4165942,"body_markdown":"There are Windows versions of curl, and also cygwin versions: http://curl.haxx.se/download.html#Win32","body":"There are Windows versions of curl, and also cygwin versions: <a href=\"http://curl.haxx.se/download.html#Win32\" rel=\"nofollow noreferrer\">curl.haxx.se/download.html#Win32</a>"}],"tags":[],"owner":{"account_id":64878,"reputation":3521,"user_id":191300,"accept_rate":55,"display_name":"surajz"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1449016354,"creation_date":1286552692,"answer_id":3892159,"question_id":3892018,"body_markdown":"Configure your logging as follows:\r\n\r\n    log4j.logger.org.springframework.web.client=DEBUG\r\n\r\nThen use a curl command to see the output, eg\r\n\r\n    curl  -H &#39;Accept: application/xml&#39; -H &#39;Content-Type: application/xml&#39; http://localhost:8080/ser/data\r\n\r\nBy default, restTemplate uses HttpURlConnection (via SimpleClientHttpRequest), so you might need to switch to jakarta httpclient to see the log statement. Otherwise the above log configuration will out show you the response\r\n\r\n        &lt;bean id=&quot;httpClientFactory&quot; class=&quot;org.springframework.http.client.CommonsClientHttpRequestFactory&quot;&gt;\r\n            &lt;constructor-arg&gt;&lt;bean  class=&quot;org.apache.commons.httpclient.HttpClient&quot;/&gt;&lt;/constructor-arg&gt;\r\n        &lt;/bean&gt;\r\n    \t&lt;bean id=&quot;restTemplate&quot; class=&quot;org.springframework.web.client.RestTemplate&quot;&gt;\r\n    \t\t&lt;constructor-arg ref=&quot;httpClientFactory&quot;/&gt;\r\n    \t\t&lt;property name=&quot;messageConverters&quot;&gt;\r\n    ...","title":"How do I log response in Spring RestTemplate?","body":"<p>Configure your logging as follows:</p>\n\n<pre><code>log4j.logger.org.springframework.web.client=DEBUG\n</code></pre>\n\n<p>Then use a curl command to see the output, eg</p>\n\n<pre><code>curl  -H 'Accept: application/xml' -H 'Content-Type: application/xml' http://localhost:8080/ser/data\n</code></pre>\n\n<p>By default, restTemplate uses HttpURlConnection (via SimpleClientHttpRequest), so you might need to switch to jakarta httpclient to see the log statement. Otherwise the above log configuration will out show you the response</p>\n\n<pre><code>    &lt;bean id=\"httpClientFactory\" class=\"org.springframework.http.client.CommonsClientHttpRequestFactory\"&gt;\n        &lt;constructor-arg&gt;&lt;bean  class=\"org.apache.commons.httpclient.HttpClient\"/&gt;&lt;/constructor-arg&gt;\n    &lt;/bean&gt;\n    &lt;bean id=\"restTemplate\" class=\"org.springframework.web.client.RestTemplate\"&gt;\n        &lt;constructor-arg ref=\"httpClientFactory\"/&gt;\n        &lt;property name=\"messageConverters\"&gt;\n...\n</code></pre>\n"},{"comments":[{"owner":{"account_id":170154,"reputation":1757,"user_id":396675,"accept_rate":73,"display_name":"rjsang"},"score":1,"creation_date":1286811310,"post_id":3892328,"comment_id":4164873,"body_markdown":"I don&#39;t know what method I&#39;m using, it&#39;s all under the hood of RestTemplate. Using log4j.logger.httpclient.wire doesn&#39;t seem to do anything.","body":"I don&#39;t know what method I&#39;m using, it&#39;s all under the hood of RestTemplate. Using log4j.logger.httpclient.wire doesn&#39;t seem to do anything."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":0,"creation_date":1286817903,"post_id":3892328,"comment_id":4165933,"body_markdown":"I suggest first turning up logging for ALL of Spring to understand what is going on under the hood of RestTemplate, this might give you an idea of where to go next.","body":"I suggest first turning up logging for ALL of Spring to understand what is going on under the hood of RestTemplate, this might give you an idea of where to go next."}],"tags":[],"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1286554101,"creation_date":1286554101,"answer_id":3892328,"question_id":3892018,"body_markdown":"Depending on which method of making the HTTP connection you are using, you could look at turning up the logging within the actual HTTP connection classes.\r\n\r\nFor example, if you are using commons HttpClient, you can set\r\n\r\n    log4j.logger.httpclient.wire=DEBUG\r\n\r\nThe commons-httpclient project has [an entire page in the documentation on their logging practices][1].\r\n\r\n\r\n  [1]: http://hc.apache.org/httpclient-3.x/logging.html","title":"How do I log response in Spring RestTemplate?","body":"<p>Depending on which method of making the HTTP connection you are using, you could look at turning up the logging within the actual HTTP connection classes.</p>\n\n<p>For example, if you are using commons HttpClient, you can set</p>\n\n<pre><code>log4j.logger.httpclient.wire=DEBUG\n</code></pre>\n\n<p>The commons-httpclient project has <a href=\"http://hc.apache.org/httpclient-3.x/logging.html\" rel=\"noreferrer\">an entire page in the documentation on their logging practices</a>.</p>\n"},{"comments":[{"owner":{"account_id":755765,"reputation":8010,"user_id":765965,"accept_rate":94,"display_name":"Al-Mothafar"},"score":0,"creation_date":1509533589,"post_id":47052567,"comment_id":81053243,"body_markdown":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - [From Review](/review/low-quality-posts/17802986)","body":"While this link may answer the question, it is better to include the essential parts of the answer here and provide the link for reference.  Link-only answers can become invalid if the linked page changes. - <a href=\"/review/low-quality-posts/17802986\">From Review</a>"},{"owner":{"account_id":5406670,"reputation":1601,"user_id":4304958,"display_name":"Mark Hobson"},"score":0,"creation_date":1509536461,"post_id":47052567,"comment_id":81054814,"body_markdown":"@Al-Mothafar Thanks, I&#39;ve included the relevant information here.","body":"@Al-Mothafar Thanks, I&#39;ve included the relevant information here."}],"tags":[],"owner":{"account_id":5406670,"reputation":1601,"user_id":4304958,"display_name":"Mark Hobson"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1580935335,"creation_date":1509531478,"answer_id":47052567,"question_id":3892018,"body_markdown":"You can use [spring-rest-template-logger][1] to log `RestTemplate` HTTP traffic.\r\n\r\nAdd a dependency to your Maven project:\r\n\r\n    &lt;dependency&gt;\r\n    \t&lt;groupId&gt;org.hobsoft.spring&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;spring-rest-template-logger&lt;/artifactId&gt;\r\n    \t&lt;version&gt;2.0.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\nThen customize your `RestTemplate` as follows:\r\n\r\n    RestTemplate restTemplate = new RestTemplateBuilder()\r\n    \t.customizers(new LoggingCustomizer())\r\n    \t.build()\r\n\r\nEnsure that debug logging is enabled in `application.properties`:\r\n\r\n    logging.level.org.hobsoft.spring.resttemplatelogger.LoggingCustomizer = DEBUG\r\n\r\nNow all RestTemplate HTTP traffic will be logged to `org.hobsoft.spring.resttemplatelogger.LoggingCustomizer` at debug level.\r\n\r\nDISCLAIMER: I wrote this library.\r\n\r\n  [1]: https://github.com/markhobson/spring-rest-template-logger\r\n","title":"How do I log response in Spring RestTemplate?","body":"<p>You can use <a href=\"https://github.com/markhobson/spring-rest-template-logger\" rel=\"nofollow noreferrer\">spring-rest-template-logger</a> to log <code>RestTemplate</code> HTTP traffic.</p>\n\n<p>Add a dependency to your Maven project:</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.hobsoft.spring&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-rest-template-logger&lt;/artifactId&gt;\n    &lt;version&gt;2.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>Then customize your <code>RestTemplate</code> as follows:</p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplateBuilder()\n    .customizers(new LoggingCustomizer())\n    .build()\n</code></pre>\n\n<p>Ensure that debug logging is enabled in <code>application.properties</code>:</p>\n\n<pre><code>logging.level.org.hobsoft.spring.resttemplatelogger.LoggingCustomizer = DEBUG\n</code></pre>\n\n<p>Now all RestTemplate HTTP traffic will be logged to <code>org.hobsoft.spring.resttemplatelogger.LoggingCustomizer</code> at debug level.</p>\n\n<p>DISCLAIMER: I wrote this library.</p>\n"},{"comments":[{"owner":{"account_id":12735021,"reputation":459,"user_id":9250232,"display_name":"Solanki Vaibhav"},"score":0,"creation_date":1564402510,"post_id":56003085,"comment_id":101007023,"body_markdown":"Yes, this will do it. check it out.","body":"Yes, this will do it. check it out."},{"owner":{"account_id":141852,"reputation":4322,"user_id":349169,"accept_rate":78,"display_name":"Chris"},"score":0,"creation_date":1564403258,"post_id":56003085,"comment_id":101007413,"body_markdown":"I did and ask on my machine it only logs URL, status code, and JSON mapping model class name","body":"I did and ask on my machine it only logs URL, status code, and JSON mapping model class name"}],"tags":[],"owner":{"account_id":12735021,"reputation":459,"user_id":9250232,"display_name":"Solanki Vaibhav"},"comment_count":2,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1557137578,"creation_date":1557137578,"answer_id":56003085,"question_id":3892018,"body_markdown":"you don&#39;t need to write a single line of code,\r\nyou just need to add the following property in application.properties file\r\n\r\n    logging.level.org.springframework.web.client.RestTemplate=DEBUG\r\n\r\nusing this it will log rest template call&#39;s request body, request header, request URL, and response body also in debug mode.","title":"How do I log response in Spring RestTemplate?","body":"<p>you don't need to write a single line of code,\nyou just need to add the following property in application.properties file</p>\n\n<pre><code>logging.level.org.springframework.web.client.RestTemplate=DEBUG\n</code></pre>\n\n<p>using this it will log rest template call's request body, request header, request URL, and response body also in debug mode.</p>\n"},{"tags":[],"owner":{"account_id":15382998,"reputation":51,"user_id":11097895,"display_name":"kedar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1593693596,"creation_date":1593693596,"answer_id":62696545,"question_id":3892018,"body_markdown":"If you used swagger to generate the RestTemplate based client then in the ApiClient there is a public method setDebugging and you can set to true or false and then I was able to see whats going on.\r\nHope this helps.\r\nI used latest swager generator cli I think its 2.9 or something\r\n","title":"How do I log response in Spring RestTemplate?","body":"<p>If you used swagger to generate the RestTemplate based client then in the ApiClient there is a public method setDebugging and you can set to true or false and then I was able to see whats going on.\nHope this helps.\nI used latest swager generator cli I think its 2.9 or something</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695766961,"creation_date":1695766961,"answer_id":77183735,"question_id":3892018,"body_markdown":"For the Apache HttpClient v4 factory:\r\n\r\n    final RestTemplate restTemplate = restTemplateBuilder\r\n        .requestFactory(() -&gt; new HttpComponentsClientHttpRequestFactory())\r\n        .build();\r\n\r\nthe Apache lib has:\r\n\r\n```\r\npublic class ManagedHttpClientConnectionFactory\r\n...\r\n    private final Log log = LogFactory.getLog(DefaultManagedHttpClientConnection.class);\r\n    private final Log headerLog = LogFactory.getLog(&quot;org.apache.http.headers&quot;);\r\n    private final Log wireLog = LogFactory.getLog(&quot;org.apache.http.wire&quot;);\r\n```\r\n\r\nSo define loggers `org.apache.http.headers` &amp; `org.apache.http.wire` at DEBUG level!","title":"How do I log response in Spring RestTemplate?","body":"<p>For the Apache HttpClient v4 factory:</p>\n<pre><code>final RestTemplate restTemplate = restTemplateBuilder\n    .requestFactory(() -&gt; new HttpComponentsClientHttpRequestFactory())\n    .build();\n</code></pre>\n<p>the Apache lib has:</p>\n<pre><code>public class ManagedHttpClientConnectionFactory\n...\n    private final Log log = LogFactory.getLog(DefaultManagedHttpClientConnection.class);\n    private final Log headerLog = LogFactory.getLog(&quot;org.apache.http.headers&quot;);\n    private final Log wireLog = LogFactory.getLog(&quot;org.apache.http.wire&quot;);\n</code></pre>\n<p>So define loggers <code>org.apache.http.headers</code> &amp; <code>org.apache.http.wire</code> at DEBUG level!</p>\n"}],"owner":{"account_id":170154,"reputation":1757,"user_id":396675,"accept_rate":73,"display_name":"rjsang"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":38700,"favorite_count":0,"down_vote_count":0,"up_vote_count":15,"accepted_answer_id":3892328,"answer_count":6,"score":15,"last_activity_date":1695766961,"creation_date":1286551639,"question_id":3892018,"body_markdown":"I am using RestTemplate to make calls to a web service.\r\n\r\n    String userId = restTemplate.getForObject(createUserUrl, String.class);\r\n\r\nIf this fails to return a user ID I just get returned null but I don&#39;t know why. How do I output the actual XML response to a log?","title":"How do I log response in Spring RestTemplate?","body":"<p>I am using RestTemplate to make calls to a web service.</p>\n\n<pre><code>String userId = restTemplate.getForObject(createUserUrl, String.class);\n</code></pre>\n\n<p>If this fails to return a user ID I just get returned null but I don't know why. How do I output the actual XML response to a log?</p>\n"},{"tags":["java","graalvm"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695416982,"post_id":77160433,"comment_id":136026733,"body_markdown":"Does `ProxyObject.fromMap` help? (similar to https://stackoverflow.com/a/67156894/10871900)","body":"Does <code>ProxyObject.fromMap</code> help? (similar to <a href=\"https://stackoverflow.com/a/67156894/10871900\">stackoverflow.com/a/67156894/10871900</a>)"}],"answers":[{"tags":[],"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695766933,"creation_date":1695491318,"answer_id":77164272,"question_id":77160433,"body_markdown":"That **engine.put** looks like putting the object into context but somehow it is not working. At old answers I see that approach was working https://stackoverflow.com/a/46424798/175554 maybe it was in [Nashorn](https://en.wikipedia.org/wiki/Nashorn_(JavaScript_engine)), long story short we can provide the hashmap easiest and quickest like below\r\n\r\n```java\r\nHashMap&lt;String, String&gt; obj = new HashMap();\r\nobj.put(&quot;f&quot;, &quot;f&quot;);\r\nobj.put(&quot;c&quot;, &quot;c&quot;);\r\n\r\nObjectMapper objectMapper = new ObjectMapper();\r\n\r\nScriptEngineManager manager = new ScriptEngineManager();\r\nScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\r\n\r\nSystem.out.println(engine.eval(&quot;&quot;&quot;\r\n                console.log(&#39;hey I am in js.&#39;);\r\n                o=%s;\r\n                JSON.stringify(o);\r\n        &quot;&quot;&quot;.formatted(objectMapper.writeValueAsString(obj))));\r\n```\r\nYou can find full working example [here](https://github.com/ozkanpakdil/java-examlpes/tree/master/graal-js)","title":"GraalVM&#39;s JSON.stringify is not working as it is expected","body":"<p>That <strong>engine.put</strong> looks like putting the object into context but somehow it is not working. At old answers I see that approach was working <a href=\"https://stackoverflow.com/a/46424798/175554\">https://stackoverflow.com/a/46424798/175554</a> maybe it was in <a href=\"https://en.wikipedia.org/wiki/Nashorn_(JavaScript_engine)\" rel=\"nofollow noreferrer\">Nashorn</a>, long story short we can provide the hashmap easiest and quickest like below</p>\n<pre class=\"lang-java prettyprint-override\"><code>HashMap&lt;String, String&gt; obj = new HashMap();\nobj.put(&quot;f&quot;, &quot;f&quot;);\nobj.put(&quot;c&quot;, &quot;c&quot;);\n\nObjectMapper objectMapper = new ObjectMapper();\n\nScriptEngineManager manager = new ScriptEngineManager();\nScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\n\nSystem.out.println(engine.eval(&quot;&quot;&quot;\n                console.log('hey I am in js.');\n                o=%s;\n                JSON.stringify(o);\n        &quot;&quot;&quot;.formatted(objectMapper.writeValueAsString(obj))));\n</code></pre>\n<p>You can find full working example <a href=\"https://github.com/ozkanpakdil/java-examlpes/tree/master/graal-js\" rel=\"nofollow noreferrer\">here</a></p>\n"}],"owner":{"account_id":1814568,"reputation":3,"user_id":1649936,"display_name":"Mohammad Kermani"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695766933,"creation_date":1695413732,"question_id":77160433,"body_markdown":"It seems that JSON.stringify cannot  proccess Map Objects in GraalVM.\r\n\r\n\r\n```\r\n            HashMap&lt;String, String&gt; obj = new HashMap();\r\n            obj.put(&quot;f&quot;, &quot;f&quot;);\r\n            obj.put(&quot;c&quot;, &quot;c&quot;);\r\n\r\n            ScriptEngineManager manager = new ScriptEngineManager();\r\n            ScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\r\n            engine.put(&quot;obj&quot;, obj);\r\n            System.out.println(engine.eval(&quot;JSON.stringify(obj)&quot;));\r\n```\r\nThis is output:\r\n\r\n```\r\n{}\r\n```\r\n\r\nCan anyone help to fix this Issue?\r\nJDK17 Graalvm 22.0.0","title":"GraalVM&#39;s JSON.stringify is not working as it is expected","body":"<p>It seems that JSON.stringify cannot  proccess Map Objects in GraalVM.</p>\n<pre><code>            HashMap&lt;String, String&gt; obj = new HashMap();\n            obj.put(&quot;f&quot;, &quot;f&quot;);\n            obj.put(&quot;c&quot;, &quot;c&quot;);\n\n            ScriptEngineManager manager = new ScriptEngineManager();\n            ScriptEngine engine = manager.getEngineByName(&quot;graal.js&quot;);\n            engine.put(&quot;obj&quot;, obj);\n            System.out.println(engine.eval(&quot;JSON.stringify(obj)&quot;));\n</code></pre>\n<p>This is output:</p>\n<pre><code>{}\n</code></pre>\n<p>Can anyone help to fix this Issue?\nJDK17 Graalvm 22.0.0</p>\n"},{"tags":["java","spring","rest","character-encoding","resttemplate"],"answers":[{"tags":[],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1600340109,"creation_date":1600328898,"answer_id":63933496,"question_id":63887160,"body_markdown":"I am not sure what the problem was exactly. I configured the rest template to use apache Http client instead of the default HttpUrlConnection used by rest template.\r\n\r\nThis seemed to work well and fixed the garbage error response body issue.\r\n\r\n[This tutorial][1] helps us do the same.\r\n\r\n\r\n  [1]: https://howtodoinjava.com/spring-boot2/resttemplate/resttemplate-httpclient-java-config/","title":"Spring rest template garbage error response body","body":"<p>I am not sure what the problem was exactly. I configured the rest template to use apache Http client instead of the default HttpUrlConnection used by rest template.</p>\n<p>This seemed to work well and fixed the garbage error response body issue.</p>\n<p><a href=\"https://howtodoinjava.com/spring-boot2/resttemplate/resttemplate-httpclient-java-config/\" rel=\"nofollow noreferrer\">This tutorial</a> helps us do the same.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695766271,"creation_date":1695766271,"answer_id":77183689,"question_id":63887160,"body_markdown":"Get the same issue with default `HttpURLConnection` when 4xx code is returned the response body is damaged and unreadable in the exception.\r\n\r\nHad to switch to Apache HttpClient v4 library to avoid garbage.\r\n\r\nSpring suggest to avoid built-in `SimpleClientHttpRequestFactory` and use `CustomHttpComponentsClientHttpRequestFactory` instead:\r\n\r\n    @Bean\r\n    public RestTemplate indraRestTemplate() {\r\n        final RestTemplate restTemplate = restTemplateBuilder\r\n                .requestFactory(() -&gt; new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()))\r\n                .setConnectTimeout(Duration.ofMillis(CONNECT_TIMEOUT))\r\n                .setReadTimeout(Duration.ofMillis(READ_TIMEOUT))\r\n                .build();\r\n        restTemplate.setInterceptors(Collections.singletonList(new RestTemplateLoggingInterceptor()));\r\n        restTemplate.setErrorHandler(new RestTemplateLoggingResponseErrorHandler());\r\n        return restTemplate;\r\n    }\r\n","title":"Spring rest template garbage error response body","body":"<p>Get the same issue with default <code>HttpURLConnection</code> when 4xx code is returned the response body is damaged and unreadable in the exception.</p>\n<p>Had to switch to Apache HttpClient v4 library to avoid garbage.</p>\n<p>Spring suggest to avoid built-in <code>SimpleClientHttpRequestFactory</code> and use <code>CustomHttpComponentsClientHttpRequestFactory</code> instead:</p>\n<pre><code>@Bean\npublic RestTemplate indraRestTemplate() {\n    final RestTemplate restTemplate = restTemplateBuilder\n            .requestFactory(() -&gt; new BufferingClientHttpRequestFactory(new HttpComponentsClientHttpRequestFactory()))\n            .setConnectTimeout(Duration.ofMillis(CONNECT_TIMEOUT))\n            .setReadTimeout(Duration.ofMillis(READ_TIMEOUT))\n            .build();\n    restTemplate.setInterceptors(Collections.singletonList(new RestTemplateLoggingInterceptor()));\n    restTemplate.setErrorHandler(new RestTemplateLoggingResponseErrorHandler());\n    return restTemplate;\n}\n</code></pre>\n"}],"owner":{"account_id":11296302,"reputation":2929,"user_id":8283737,"accept_rate":89,"display_name":"Arun Gowda"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":563,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":63933496,"answer_count":2,"score":1,"last_activity_date":1695766271,"creation_date":1600096531,"question_id":63887160,"body_markdown":"I have the following rest template config:\r\n\r\n    @Bean\r\n    public RestTemplate restTemplate() {\r\n        RestTemplate template = new RestTemplate();\r\n        template.getMessageConverters().add(new ObjectToUrlEncodedConverter());\r\n        return template;\r\n    }\r\n`ObjectToUrlEncodedConverter` is copied as is from [this answer][1]\r\n\r\nAnd I call the rest API as mentioned below:\r\n\r\n    try {\r\n            response = template.exchange(uri, httpRequestObject.getMethod(), requestEntity, httpRequestObject.getResponseClass());\r\n            responseObject.setHeaders(response.getHeaders().toSingleValueMap());\r\n            responseObject.setHttpStatus(response.getStatusCode());\r\n            responseObject.setResponseBody(response.getBody());\r\n        } catch (HttpStatusCodeException ex) {\r\n            log.error(&quot;Non OK response received from server. Status code: {}, response: {}&quot;, ex.getStatusCode(), ex.getResponseBodyAsString());\r\n            throw ex;\r\n        }\r\n\r\nThe problem I am facing is, when the response is 4xx or 5xx series, The response body `ex.getResponseBodyAsString()` is giving garbage values. Something like this: `0E%61YhPN\\]8w+Q\\:SM&#39;Z`ml)@]BL4 V`VQxF&lt;{Q/fZS3RNy&gt;]S+=!x9)n%\r\n\r\n\r\nI have tried setting the `Charset` to &quot;UTF-8&quot; while getting the errorResponseBody like the following.\r\n\r\n    ex.getResponseBodyAsString(Charset.forName(&quot;UTF-8&quot;))\r\n\r\nalso, building the string from responseBodyByteArray as follows:\r\n\r\n    new String(ex.getResponseBodyAsByteArray())\r\n\r\nBut still no luck.\r\n\r\nThe same endpoint works well in Postman. Rest template seems to be messing up the error response body somehow.\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/56566601/8283737","title":"Spring rest template garbage error response body","body":"<p>I have the following rest template config:</p>\n<pre><code>@Bean\npublic RestTemplate restTemplate() {\n    RestTemplate template = new RestTemplate();\n    template.getMessageConverters().add(new ObjectToUrlEncodedConverter());\n    return template;\n}\n</code></pre>\n<p><code>ObjectToUrlEncodedConverter</code> is copied as is from <a href=\"https://stackoverflow.com/a/56566601/8283737\">this answer</a></p>\n<p>And I call the rest API as mentioned below:</p>\n<pre><code>try {\n        response = template.exchange(uri, httpRequestObject.getMethod(), requestEntity, httpRequestObject.getResponseClass());\n        responseObject.setHeaders(response.getHeaders().toSingleValueMap());\n        responseObject.setHttpStatus(response.getStatusCode());\n        responseObject.setResponseBody(response.getBody());\n    } catch (HttpStatusCodeException ex) {\n        log.error(&quot;Non OK response received from server. Status code: {}, response: {}&quot;, ex.getStatusCode(), ex.getResponseBodyAsString());\n        throw ex;\n    }\n</code></pre>\n<p>The problem I am facing is, when the response is 4xx or 5xx series, The response body <code>ex.getResponseBodyAsString()</code> is giving garbage values. Something like this: <code>0E%61YhPN\\]8w+Q\\:SM'Z</code>ml)@]BL4 V`VQxF&lt;{Q/fZS3RNy&gt;]S+=!x9)n%</p>\n<p>I have tried setting the <code>Charset</code> to &quot;UTF-8&quot; while getting the errorResponseBody like the following.</p>\n<pre><code>ex.getResponseBodyAsString(Charset.forName(&quot;UTF-8&quot;))\n</code></pre>\n<p>also, building the string from responseBodyByteArray as follows:</p>\n<pre><code>new String(ex.getResponseBodyAsByteArray())\n</code></pre>\n<p>But still no luck.</p>\n<p>The same endpoint works well in Postman. Rest template seems to be messing up the error response body somehow.</p>\n"},{"tags":["java","swing","jpanel","joptionpane"],"comments":[{"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"score":0,"creation_date":1695716782,"post_id":77178151,"comment_id":136058172,"body_markdown":"Could the voter (closer) indicate what in particular is unclear?","body":"Could the voter (closer) indicate what in particular is unclear?"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1695716810,"post_id":77178151,"comment_id":136058181,"body_markdown":"Not the voter/closer, but other than having the JPanel call some generic method in the parent component (That you have created/overridden) I can&#39;t think of any way to keep it oblivious.","body":"Not the voter/closer, but other than having the JPanel call some generic method in the parent component (That you have created/overridden) I can&#39;t think of any way to keep it oblivious."},{"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"score":1,"creation_date":1695716894,"post_id":77178151,"comment_id":136058194,"body_markdown":"@sorifiend thanks. I was perhaps hoping that this mechanism (setting the &quot;result&quot;) happened through some generic event mechanism that might be present even though the code doesn&#39;t itself have access to the parent (wrapper). I have not looked into how it is coded in `JOptionPane`.","body":"@sorifiend thanks. I was perhaps hoping that this mechanism (setting the &quot;result&quot;) happened through some generic event mechanism that might be present even though the code doesn&#39;t itself have access to the parent (wrapper). I have not looked into how it is coded in <code>JOptionPane</code>."}],"answers":[{"comments":[{"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"score":0,"creation_date":1695725985,"post_id":77179013,"comment_id":136060035,"body_markdown":"I will accept as this solves the problem I formulated. Thank you! Having reviewing the desired result I will probably end up rewriting to avoid this &quot;invisible relation&quot; between the `JPanel` and the `JOptionPane`.","body":"I will accept as this solves the problem I formulated. Thank you! Having reviewing the desired result I will probably end up rewriting to avoid this &quot;invisible relation&quot; between the <code>JPanel</code> and the <code>JOptionPane</code>."},{"owner":{"account_id":2259314,"reputation":11225,"user_id":1989769,"accept_rate":45,"display_name":"Sergiy Medvynskyy"},"score":3,"creation_date":1695727670,"post_id":77179013,"comment_id":136060379,"body_markdown":"I think, it would be difficult to avoid this &quot;invisible relation&quot;. Another possibility to get the JOptionPane is to use `AncestorListener`. But &quot;invisible relation&quot; in this case is still present. And in your solution you already have &quot;invisible relation&quot; to `Window`","body":"I think, it would be difficult to avoid this &quot;invisible relation&quot;. Another possibility to get the JOptionPane is to use <code>AncestorListener</code>. But &quot;invisible relation&quot; in this case is still present. And in your solution you already have &quot;invisible relation&quot; to <code>Window</code>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696003197,"post_id":77179013,"comment_id":136102715,"body_markdown":"@HalvorHolstenStrand your editor doesnt have to know that it is residing in a JOptionPane. Obviously, there must be code putting the editor into an option pane. *That* code can add a listener to the editor to close the option pane. By the way, calling `setValue(JOptionPane.OK_OPTION)` on the `JOptionPane` is already sufficient, the option pane will care to close the dialog.","body":"@HalvorHolstenStrand your editor doesnt have to know that it is residing in a JOptionPane. Obviously, there must be code putting the editor into an option pane. <i>That</i> code can add a listener to the editor to close the option pane. By the way, calling <code>setValue(JOptionPane.OK_OPTION)</code> on the <code>JOptionPane</code> is already sufficient, the option pane will care to close the dialog."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696003878,"post_id":77179013,"comment_id":136102855,"body_markdown":"To stay at your questions example, instead of `int action = JOptionPane.showOptionDialog( parent, panel, title, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null, null, null);` you do `JOptionPane oPane = new JOptionPane(panel, JOptionPane.PLAIN_MESSAGE, JOptionPane.OK_CANCEL_OPTION); /* add your listener to panel, to call oPane.setValue(JOptionPane.OK_OPTION) */ oPane.createDialog(parent, title).setVisible(true); int action = (int)oPane.getValue();` Thats it. The `SelectionPanel` doesnt need to know.","body":"To stay at your questions example, instead of <code>int action = JOptionPane.showOptionDialog( parent, panel, title, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null, null, null);</code> you do <code>JOptionPane oPane = new JOptionPane(panel, JOptionPane.PLAIN_MESSAGE, JOptionPane.OK_CANCEL_OPTION); &#47;* add your listener to panel, to call oPane.setValue(JOptionPane.OK_OPTION) *&#47; oPane.createDialog(parent, title).setVisible(true); int action = (int)oPane.getValue();</code> Thats it. The <code>SelectionPanel</code> doesnt need to know."}],"tags":[],"owner":{"account_id":2259314,"reputation":11225,"user_id":1989769,"accept_rate":45,"display_name":"Sergiy Medvynskyy"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1695723010,"creation_date":1695723010,"answer_id":77179013,"question_id":77178151,"body_markdown":"You should modify your `mouseClicked` method as following:\r\n\r\n    @Override\r\n    public void mouseClicked(MouseEvent e) {\r\n        if (e.getClickCount() == 2 &amp;&amp; SwingUtilities.isLeftMouseButton(e) &amp;&amp; !e.isControlDown()) {\r\n            JOptionPane pane = (JOptionPane) SwingUtilities.getAncestorOfClass(JOptionPane.class, e.getComponent());\r\n            pane.setValue(JOptionPane.OK_OPTION);\r\n            Window w = SwingUtilities.getWindowAncestor(this);\r\n            w.dispose();\r\n        }\r\n    }","title":"Manually trigger OK_OPTION for a JOptionPane within a JPanel","body":"<p>You should modify your <code>mouseClicked</code> method as following:</p>\n<pre><code>@Override\npublic void mouseClicked(MouseEvent e) {\n    if (e.getClickCount() == 2 &amp;&amp; SwingUtilities.isLeftMouseButton(e) &amp;&amp; !e.isControlDown()) {\n        JOptionPane pane = (JOptionPane) SwingUtilities.getAncestorOfClass(JOptionPane.class, e.getComponent());\n        pane.setValue(JOptionPane.OK_OPTION);\n        Window w = SwingUtilities.getWindowAncestor(this);\n        w.dispose();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"score":0,"creation_date":1695799082,"post_id":77183669,"comment_id":136070806,"body_markdown":"Thank you! I think my biggest take from this is that I don&#39;t have to do `getWindowAncestor`, since setting the value will will fire the property change event, which in the `JOptionPane` case closes the window by itself.","body":"Thank you! I think my biggest take from this is that I don&#39;t have to do <code>getWindowAncestor</code>, since setting the value will will fire the property change event, which in the <code>JOptionPane</code> case closes the window by itself."}],"tags":[],"owner":{"account_id":6017640,"reputation":8919,"user_id":4725875,"display_name":"DevilsHnd - "},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695765964,"creation_date":1695765964,"answer_id":77183669,"question_id":77178151,"body_markdown":"The following runnable code *may be* another solution for you: Read the comments in code:\r\n\r\n```\r\npublic class DoubleClickJListItemToExitDialog {\r\n\r\n    \r\n    public static void main(String[] args) {\r\n        new DoubleClickJListItemToExitDialog().startApp(args);\r\n    }\r\n    \r\n    private void startApp(String[] args) {\r\n        // Temp OptionPane Parent...\r\n        javax.swing.JFrame iFrame = new javax.swing.JFrame();\r\n        iFrame.setAlwaysOnTop(true);\r\n        iFrame.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\r\n        iFrame.setLocationRelativeTo(null);\r\n        \r\n        String selectedItem = null;  // To hold the selected list item String value;\r\n        \r\n        \r\n        javax.swing.JPanel panel = new javax.swing.JPanel();        // Create JPanel\r\n        panel.setPreferredSize(new java.awt.Dimension(300, 200));   // Set its size\r\n        \r\n        javax.swing.JLabel msg = new javax.swing.JLabel(            // Create the dialog message\r\n                &quot;&lt;html&gt;Select an item from the list and then select the OK&lt;br&gt;&quot;\r\n                + &quot;button.  If you like,  you can also double-click on the&lt;br&gt;&quot;\r\n                + &quot;item in the list as well to make your selection.&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;);\r\n        panel.add(msg);     // Add message to panel\r\n        \r\n        // Create a DefaultListModel\r\n        javax.swing.DefaultListModel&lt;String&gt; model = new javax.swing.DefaultListModel&lt;&gt;();\r\n        // Add (whatever) String elements to the Model\r\n        for (int i = 0; i &lt; 20; i++) {\r\n            model.addElement(&quot;List String Item &quot; + (i+1));\r\n        }\r\n        \r\n        // Create a JList and add the DefaultListModel to it.\r\n        javax.swing.JList&lt;String&gt; list = new javax.swing.JList&lt;&gt;(model);\r\n        /* Add a MouseListener to the JList so to pick up Double-Clicks \r\n           within the mouseClicked event:             */\r\n        list.addMouseListener(new java.awt.event.MouseListener() {\r\n            @Override\r\n            public void mouseClicked(java.awt.event.MouseEvent e) {\r\n                // Was the left mouse button clicked twice\r\n                if (e.getClickCount() == 2 &amp;&amp; javax.swing.SwingUtilities.isLeftMouseButton(e)) {\r\n                    // Get the OptionPane...\r\n                    javax.swing.JOptionPane pane = (javax.swing.JOptionPane) \r\n                            javax.swing.SwingUtilities.getAncestorOfClass(\r\n                                    javax.swing.JOptionPane.class, e.getComponent());\r\n                    // Fire the OK Option button\r\n                    pane.setValue(javax.swing.JOptionPane.OK_OPTION);\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void mousePressed(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n\r\n            @Override\r\n            public void mouseReleased(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n\r\n            @Override\r\n            public void mouseEntered(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n\r\n            @Override\r\n            public void mouseExited(java.awt.event.MouseEvent e) {\r\n                // Not in use here.\r\n            }\r\n        });\r\n        \r\n        // Create a JScrollPane and add the JList to it.\r\n        javax.swing.JScrollPane sp = new javax.swing.JScrollPane(list);\r\n        // Set the desired JScrollPane Size\r\n        sp.setPreferredSize(new java.awt.Dimension(180,120));\r\n        // Add the JScrollPane to the JPanel\r\n        panel.add(sp);\r\n        \r\n        /* Display the JOptionPane Option Dialog using the temp JFrame as parent \r\n           and the newly created JPanel as its content, the desired title, the\r\n           desired dialog buttons (OK and Cancel), as a Plain Message dialog (no\r\n           icon image).        */\r\n        int res = javax.swing.JOptionPane.showOptionDialog(iFrame, panel, \r\n                &quot;Select From List:&quot;, javax.swing.JOptionPane.OK_CANCEL_OPTION, \r\n                javax.swing.JOptionPane.PLAIN_MESSAGE, null, null, null);\r\n        \r\n        // If the dialog&#39;s OK button was selected....\r\n        if (res == javax.swing.JOptionPane.OK_OPTION) {\r\n            // Get the selected JList element and store in `selectedItem`:\r\n            selectedItem = list.getSelectedValue();\r\n            // Open a messge dialog to display the selected JList item:\r\n            javax.swing.JOptionPane.showMessageDialog(iFrame, \r\n                    &quot;&lt;html&gt;Selected List Item Was:&lt;br&gt;&lt;br&gt;&lt;center&gt;&lt;font size=&#39;5&#39; color=blue&gt;&lt;b&gt;&quot; \r\n                    + selectedItem + &quot;&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Selection&quot;, \r\n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\r\n        }\r\n        iFrame.dispose();  // Dispose of the temp JFrame Parent.\r\n    }\r\n}\r\n```","title":"Manually trigger OK_OPTION for a JOptionPane within a JPanel","body":"<p>The following runnable code <em>may be</em> another solution for you: Read the comments in code:</p>\n<pre><code>public class DoubleClickJListItemToExitDialog {\n\n    \n    public static void main(String[] args) {\n        new DoubleClickJListItemToExitDialog().startApp(args);\n    }\n    \n    private void startApp(String[] args) {\n        // Temp OptionPane Parent...\n        javax.swing.JFrame iFrame = new javax.swing.JFrame();\n        iFrame.setAlwaysOnTop(true);\n        iFrame.setDefaultCloseOperation(javax.swing.JFrame.DISPOSE_ON_CLOSE);\n        iFrame.setLocationRelativeTo(null);\n        \n        String selectedItem = null;  // To hold the selected list item String value;\n        \n        \n        javax.swing.JPanel panel = new javax.swing.JPanel();        // Create JPanel\n        panel.setPreferredSize(new java.awt.Dimension(300, 200));   // Set its size\n        \n        javax.swing.JLabel msg = new javax.swing.JLabel(            // Create the dialog message\n                &quot;&lt;html&gt;Select an item from the list and then select the OK&lt;br&gt;&quot;\n                + &quot;button.  If you like,  you can also double-click on the&lt;br&gt;&quot;\n                + &quot;item in the list as well to make your selection.&lt;br&gt;&lt;br&gt;&lt;/html&gt;&quot;);\n        panel.add(msg);     // Add message to panel\n        \n        // Create a DefaultListModel\n        javax.swing.DefaultListModel&lt;String&gt; model = new javax.swing.DefaultListModel&lt;&gt;();\n        // Add (whatever) String elements to the Model\n        for (int i = 0; i &lt; 20; i++) {\n            model.addElement(&quot;List String Item &quot; + (i+1));\n        }\n        \n        // Create a JList and add the DefaultListModel to it.\n        javax.swing.JList&lt;String&gt; list = new javax.swing.JList&lt;&gt;(model);\n        /* Add a MouseListener to the JList so to pick up Double-Clicks \n           within the mouseClicked event:             */\n        list.addMouseListener(new java.awt.event.MouseListener() {\n            @Override\n            public void mouseClicked(java.awt.event.MouseEvent e) {\n                // Was the left mouse button clicked twice\n                if (e.getClickCount() == 2 &amp;&amp; javax.swing.SwingUtilities.isLeftMouseButton(e)) {\n                    // Get the OptionPane...\n                    javax.swing.JOptionPane pane = (javax.swing.JOptionPane) \n                            javax.swing.SwingUtilities.getAncestorOfClass(\n                                    javax.swing.JOptionPane.class, e.getComponent());\n                    // Fire the OK Option button\n                    pane.setValue(javax.swing.JOptionPane.OK_OPTION);\n                }\n            }\n\n            @Override\n            public void mousePressed(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n\n            @Override\n            public void mouseReleased(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n\n            @Override\n            public void mouseEntered(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n\n            @Override\n            public void mouseExited(java.awt.event.MouseEvent e) {\n                // Not in use here.\n            }\n        });\n        \n        // Create a JScrollPane and add the JList to it.\n        javax.swing.JScrollPane sp = new javax.swing.JScrollPane(list);\n        // Set the desired JScrollPane Size\n        sp.setPreferredSize(new java.awt.Dimension(180,120));\n        // Add the JScrollPane to the JPanel\n        panel.add(sp);\n        \n        /* Display the JOptionPane Option Dialog using the temp JFrame as parent \n           and the newly created JPanel as its content, the desired title, the\n           desired dialog buttons (OK and Cancel), as a Plain Message dialog (no\n           icon image).        */\n        int res = javax.swing.JOptionPane.showOptionDialog(iFrame, panel, \n                &quot;Select From List:&quot;, javax.swing.JOptionPane.OK_CANCEL_OPTION, \n                javax.swing.JOptionPane.PLAIN_MESSAGE, null, null, null);\n        \n        // If the dialog's OK button was selected....\n        if (res == javax.swing.JOptionPane.OK_OPTION) {\n            // Get the selected JList element and store in `selectedItem`:\n            selectedItem = list.getSelectedValue();\n            // Open a messge dialog to display the selected JList item:\n            javax.swing.JOptionPane.showMessageDialog(iFrame, \n                    &quot;&lt;html&gt;Selected List Item Was:&lt;br&gt;&lt;br&gt;&lt;center&gt;&lt;font size='5' color=blue&gt;&lt;b&gt;&quot; \n                    + selectedItem + &quot;&lt;/b&gt;&lt;/font&gt;&lt;/center&gt;&lt;br&gt;&lt;/html&gt;&quot;, &quot;Your Selection&quot;, \n                    javax.swing.JOptionPane.INFORMATION_MESSAGE);\n        }\n        iFrame.dispose();  // Dispose of the temp JFrame Parent.\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3239634,"reputation":20214,"user_id":2732991,"accept_rate":80,"display_name":"Halvor Holsten Strand"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":61,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":77179013,"answer_count":2,"score":1,"last_activity_date":1695765964,"creation_date":1695716012,"question_id":77178151,"body_markdown":"I&#39;ve got some utility code that presents a `JList` inside a `JPanel` that is used inside a `JOptionPane.showOptionDialog`, similar to this:\r\n\r\n```java\r\nSelectionPanel&lt;T&gt; panel = new SelectionPanel&lt;&gt;(allValues, initiallySelectedElement, multipleSelection);\r\nint action = JOptionPane.showOptionDialog(parent, panel, title, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null, null, null);\r\nif (action == JOptionPane.OK_OPTION) {\r\n    // Do stuff\r\n}\r\n```\r\n\r\nThis works well, but I&#39;ve had a feature request to be able to double click in the list to add the clicked element. The panel has no knowledge of being wrapped in a `JOptionPane`, and ideally I would like to keep it that way.\r\n\r\nI&#39;ve found that I can close the dialog using the following code:\r\n\r\n```java\r\n@Override\r\npublic void mouseClicked(MouseEvent e) {\r\n    if (e.getClickCount() == 2 &amp;&amp; !e.isControlDown()) {\r\n        Window w = SwingUtilities.getWindowAncestor(this);\r\n        w.setVisible(false);\r\n    }\r\n}\r\n```\r\n\r\nHowever this closes it without `action == JOptionPane.OK_OPTION` being `true`.\r\n\r\nIs there any generic way of signaling the `OK_OPTION` action and closing, from a `JPanel` that is oblivious to being inside a `JOptionPane`?","title":"Manually trigger OK_OPTION for a JOptionPane within a JPanel","body":"<p>I've got some utility code that presents a <code>JList</code> inside a <code>JPanel</code> that is used inside a <code>JOptionPane.showOptionDialog</code>, similar to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SelectionPanel&lt;T&gt; panel = new SelectionPanel&lt;&gt;(allValues, initiallySelectedElement, multipleSelection);\nint action = JOptionPane.showOptionDialog(parent, panel, title, JOptionPane.OK_CANCEL_OPTION, JOptionPane.PLAIN_MESSAGE, null, null, null);\nif (action == JOptionPane.OK_OPTION) {\n    // Do stuff\n}\n</code></pre>\n<p>This works well, but I've had a feature request to be able to double click in the list to add the clicked element. The panel has no knowledge of being wrapped in a <code>JOptionPane</code>, and ideally I would like to keep it that way.</p>\n<p>I've found that I can close the dialog using the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic void mouseClicked(MouseEvent e) {\n    if (e.getClickCount() == 2 &amp;&amp; !e.isControlDown()) {\n        Window w = SwingUtilities.getWindowAncestor(this);\n        w.setVisible(false);\n    }\n}\n</code></pre>\n<p>However this closes it without <code>action == JOptionPane.OK_OPTION</code> being <code>true</code>.</p>\n<p>Is there any generic way of signaling the <code>OK_OPTION</code> action and closing, from a <code>JPanel</code> that is oblivious to being inside a <code>JOptionPane</code>?</p>\n"},{"tags":["java","servlets","jakarta-ee","portlet"],"answers":[{"tags":[],"owner":{"account_id":59126,"reputation":5430,"user_id":176958,"accept_rate":89,"display_name":"whatnick"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1253945182,"creation_date":1253945182,"answer_id":1480544,"question_id":1480528,"body_markdown":"Servlets have a java definition (applications which handle HTTP GET/POST requests), while portlets have a user interface definition.A component performing a specific function similar to the windows vista widgets or a lot of components used in stackoverflow here. They need not necessarily be backed by servlets on the server side. But the Portlet standard was developed alongside java. O&#39;Reilly has a nice [tutorial][1].\r\n\r\n\r\n  [1]: http://oreilly.com/pub/a/java/archive/what-is-a-portlet.html","title":"what is the difference between a portlet and a servlet?","body":"<p>Servlets have a java definition (applications which handle HTTP GET/POST requests), while portlets have a user interface definition.A component performing a specific function similar to the windows vista widgets or a lot of components used in stackoverflow here. They need not necessarily be backed by servlets on the server side. But the Portlet standard was developed alongside java. O'Reilly has a nice <a href=\"http://oreilly.com/pub/a/java/archive/what-is-a-portlet.html\" rel=\"noreferrer\">tutorial</a>.</p>\n"},{"tags":[],"owner":{"account_id":30285,"reputation":55210,"user_id":82511,"accept_rate":71,"display_name":"djna"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1253945193,"creation_date":1253945193,"answer_id":1480545,"question_id":1480528,"body_markdown":"\r\nBoth portlets and servlets receive an http request and return a response, which is usally some HTML that can be rendered by a browser. A portlet is used in the context of a &quot;Portal&quot;, the idea being that a single page seen by the user has lots of parts, think tiles, each coming from a different portlet.\r\n\r\nNow, you can get that &quot;tiled&quot; effect from normal servets (See Struts + Tiles for an example of how) the extra bit from the portlets is that the portlets are in a richer environment provided by the Portal, extra APIs are provided so that what is displayed by any portlet can be configured by individual users to their preferences, and the porlets can communicate with each other - press a button in one, something happens in a another.","title":"what is the difference between a portlet and a servlet?","body":"<p>Both portlets and servlets receive an http request and return a response, which is usally some HTML that can be rendered by a browser. A portlet is used in the context of a \"Portal\", the idea being that a single page seen by the user has lots of parts, think tiles, each coming from a different portlet.</p>\n\n<p>Now, you can get that \"tiled\" effect from normal servets (See Struts + Tiles for an example of how) the extra bit from the portlets is that the portlets are in a richer environment provided by the Portal, extra APIs are provided so that what is displayed by any portlet can be configured by individual users to their preferences, and the porlets can communicate with each other - press a button in one, something happens in a another.</p>\n"},{"comments":[{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":2,"creation_date":1591241796,"post_id":1480557,"comment_id":109982787,"body_markdown":"Update: Portlets 1 is [JSR 168](https://www.jcp.org/en/jsr/detail?id=168), Portlets 2 is  [JSR 286](https://www.jcp.org/en/jsr/detail?id=286), and Portlet 3 is [JSR 362](https://www.jcp.org/en/jsr/detail?id=362).","body":"Update: Portlets 1 is <a href=\"https://www.jcp.org/en/jsr/detail?id=168\" rel=\"nofollow noreferrer\">JSR 168</a>, Portlets 2 is  <a href=\"https://www.jcp.org/en/jsr/detail?id=286\" rel=\"nofollow noreferrer\">JSR 286</a>, and Portlet 3 is <a href=\"https://www.jcp.org/en/jsr/detail?id=362\" rel=\"nofollow noreferrer\">JSR 362</a>."}],"tags":[],"owner":{"account_id":23666,"reputation":19288,"user_id":59470,"accept_rate":79,"display_name":"topchef"},"comment_count":1,"down_vote_count":1,"up_vote_count":71,"is_accepted":true,"score":70,"last_activity_date":1339477118,"creation_date":1253945639,"answer_id":1480557,"question_id":1480528,"body_markdown":"Portlets are part of JSR-168 standard that regulates portal containers and components. This is different standard from standards for web containers (and servlets). Though there are definitely strong parallels between these two standards they differ in containers, APIs, life cycle, configuration, deployment, etc. \r\n\r\nThe main difference between portlet vs. servlet could be that while servlet always responds to single type of action - *request*, portlet (due to nature of its life cycle and stronger container bindings) has to respond to two types of actions: *render* and *request*. There are of course more to it but I found this as the core difference between the two when I studied portal development.","title":"what is the difference between a portlet and a servlet?","body":"<p>Portlets are part of JSR-168 standard that regulates portal containers and components. This is different standard from standards for web containers (and servlets). Though there are definitely strong parallels between these two standards they differ in containers, APIs, life cycle, configuration, deployment, etc. </p>\n\n<p>The main difference between portlet vs. servlet could be that while servlet always responds to single type of action - <em>request</em>, portlet (due to nature of its life cycle and stronger container bindings) has to respond to two types of actions: <em>render</em> and <em>request</em>. There are of course more to it but I found this as the core difference between the two when I studied portal development.</p>\n"},{"tags":[],"owner":{"account_id":697990,"reputation":41,"user_id":572541,"display_name":"Liyakath"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1294826973,"creation_date":1294826973,"answer_id":4667521,"question_id":1480528,"body_markdown":"Essentially, Servlets provide content that normally takes up the whole page in a browser (unless you&#39;re using frames), and portlets provide content that is wrapped by a window. With portlets, you can have multiple portlets side by side with one another and each one can provide content and functionality that is different from the other. A portlet can provide the complete interaction for one type of application, while another portlet can provide content for another type of application. The portal can provide some house keeping functionality and secured single point of entry to all of the portlets on a page. As for the particulars (similarities/differences) between them, please continue reading. Here are some similarities: Servlets and portlets are web based components that utilize Java for their implementation Portlets are managed by a portlet container similar to a servlet container Both of these components generate content, which can be static or dynamic","title":"what is the difference between a portlet and a servlet?","body":"<p>Essentially, Servlets provide content that normally takes up the whole page in a browser (unless you're using frames), and portlets provide content that is wrapped by a window. With portlets, you can have multiple portlets side by side with one another and each one can provide content and functionality that is different from the other. A portlet can provide the complete interaction for one type of application, while another portlet can provide content for another type of application. The portal can provide some house keeping functionality and secured single point of entry to all of the portlets on a page. As for the particulars (similarities/differences) between them, please continue reading. Here are some similarities: Servlets and portlets are web based components that utilize Java for their implementation Portlets are managed by a portlet container similar to a servlet container Both of these components generate content, which can be static or dynamic</p>\n"},{"comments":[{"owner":{"account_id":230293,"reputation":8818,"user_id":493807,"accept_rate":84,"display_name":"Andy"},"score":0,"creation_date":1384440855,"post_id":8927313,"comment_id":29744888,"body_markdown":"So, a portal application runs in a servlet/JEE container and talks to a portlet container separately? The client&#39;s machine (browser) is not aware of the portlet container or portlets as I understand it, Other than the appearance on the page which is handled via JavaScript and partial-page refreshes.","body":"So, a portal application runs in a servlet/JEE container and talks to a portlet container separately? The client&#39;s machine (browser) is not aware of the portlet container or portlets as I understand it, Other than the appearance on the page which is handled via JavaScript and partial-page refreshes."},{"owner":{"account_id":339024,"reputation":5103,"user_id":668240,"accept_rate":76,"display_name":"Ashok Goli"},"score":2,"creation_date":1384484269,"post_id":8927313,"comment_id":29766011,"body_markdown":"A Portlet container is built on a Servlet container. You can say that a Portlet container is an advanced Servlet container with many &#39;features&#39;. But to answer your question bluntly, yes. While developing apps, we view a portlet container separately from the Servlet/JEE container.","body":"A Portlet container is built on a Servlet container. You can say that a Portlet container is an advanced Servlet container with many &#39;features&#39;. But to answer your question bluntly, yes. While developing apps, we view a portlet container separately from the Servlet/JEE container."},{"owner":{"display_name":"user2080225"},"score":4,"creation_date":1391321004,"post_id":8927313,"comment_id":32469971,"body_markdown":"The simplest way to think of this is that a servlet renders an entire web page, and a portlet renders a specific rectangular part (subsection) of a web page. For example, the advertising bar on the right hand side of a news page could be rendered as a portlet.  But you wouldn&#39;t implement a single edit field as a portlet, because that&#39;s too granular.  Basically if you break down a web page into it&#39;s major sectional areas, those are good candidates to make into portlets.","body":"The simplest way to think of this is that a servlet renders an entire web page, and a portlet renders a specific rectangular part (subsection) of a web page. For example, the advertising bar on the right hand side of a news page could be rendered as a portlet.  But you wouldn&#39;t implement a single edit field as a portlet, because that&#39;s too granular.  Basically if you break down a web page into it&#39;s major sectional areas, those are good candidates to make into portlets."},{"owner":{"account_id":108205,"reputation":27809,"user_id":287316,"accept_rate":87,"display_name":"The Student"},"score":0,"creation_date":1488896267,"post_id":8927313,"comment_id":72427214,"body_markdown":"@ClayFerguson &quot;a portlet renders a specific rectangular part (subsection) of a web page&quot;, so it&#39;s like a frame, or a &lt;div&gt;...","body":"@ClayFerguson &quot;a portlet renders a specific rectangular part (subsection) of a web page&quot;, so it&#39;s like a frame, or a &lt;div&gt;..."},{"owner":{"account_id":339024,"reputation":5103,"user_id":668240,"accept_rate":76,"display_name":"Ashok Goli"},"score":0,"creation_date":1488954904,"post_id":8927313,"comment_id":72454262,"body_markdown":"@TomBrito - Partly true. It&#39;s like a frame or a div, which have their own lifecycles and can share data with other frames or divs.","body":"@TomBrito - Partly true. It&#39;s like a frame or a div, which have their own lifecycles and can share data with other frames or divs."}],"tags":[],"owner":{"account_id":339024,"reputation":5103,"user_id":668240,"accept_rate":76,"display_name":"Ashok Goli"},"comment_count":5,"down_vote_count":0,"up_vote_count":145,"is_accepted":false,"score":145,"last_activity_date":1589982879,"creation_date":1326981634,"answer_id":8927313,"question_id":1480528,"body_markdown":"***Enhanced from Source***: [Servlets Vs Portlets](http://fanatech.wordpress.com/servlets-vs-portlets/)\n\n&gt; **Similarities** \n&gt; \n&gt; 1. Servlets and Portlets are web based components which use Java for\n&gt; their implementation.\n&gt; \n&gt; 1. Portlets are managed by a portlet container just like servlet is\n&gt; managed by servlet container.\n&gt; \n&gt; 1. Both static and dynamic content can be generated by Portlets and\n&gt; Servlets.\n&gt; \n&gt; 1. The life cycle of portlets and servlets is controlled by the container\n&gt; \n&gt; 1. The client/server model is used for both servlets and portlets\n&gt; \n&gt; 1. The packaging and deployment are essentially the same, WAR/EARs.\n&gt;\n&gt; 1. Application Session exists in both Servlet and Portlet containers. It is one of the ways of of sharing data (crude Inter-Portlet Communication) from the render phase to the action phase (or any lower phases) in the portlet containers.\n&gt; 1. Both Servlets and Portlets use similar server / VM environments that support it. Although, some additional configurations might needed in case of portlets to make it tick\n&gt; 1. The build/DI tools are similar for both - Ant, Maven, Gradle, etc are all supported. Mostly :) - This has changed a bit with Liferay 7.\n\n-----\n\n&gt; **Dissimilarities** \n&gt; \n&gt; 1. Servlets can render complete web pages, whereas portlets renders html\n&gt; fragments. These fragments are aggregated by the portal into a\n&gt; complete web page.\n&gt; \n&gt; 1. The content type of JSR 168 portlets can be only cHTML, XHTML, WML. It\n&gt; does not support other content types.\n&gt; \n&gt; 1. Portlets are not allowed to generate HTML code that contains tags such\n&gt; as body, frame, frameset, head, html, or title.\n&gt; \n&gt; 1. A Portlet unlike a servlet doesnt have URL attached to it so it\n&gt; cannot be accessed directly. Access is only through the portal page\n&gt; which holds the portlet.\n&gt; \n&gt; 1. Portlets can be provided with controls to manipulate its window states\n&gt; or portlet modes.\n&gt; \n&gt; 1. Multiple instances of a single portlet can be placed onto the same\n&gt; page.\n&gt; \n&gt; 1. Portlets support persistent configuration and customization, profile\n&gt; information.\n&gt; \n&gt; 1. Portlets can have two types of request viz. render request and action\n&gt; request.\n&gt; \n&gt; 1. Portlets have two scopes within session; application scope for\n&gt; communication across portlets and portlet scope for intra portlet\n&gt; communication.\n&gt; \n&gt; 1. Portlet cannot set the character set encoding of the response nor can\n&gt; it set the HTTP response headers.\n&gt; \n&gt; 1. Portlets doesnt have access to request URL. So it cannot access the\n&gt; query parameters appended to the URL. Portlets cannot set cookies.\n&gt; \n&gt; 1. Typical methods of Portlet API are `doView()`, `doEdit()`, `doHelp()` and\n&gt; `processAction()` while those of servlet are `service()`, `doPost()`,\n&gt; `doGet()`.\n&gt;\n&gt; 1. *Servlet Specifications* - JSR 369(Servlet 4.0), JSR 340(Servlet 3.1), JSR 315(Servlet 3.0), JSR 154(Servlet 2.5 &amp; 2.4).\n&gt; *Portlet Specifications* - JSR 168(Portlet Spec v1.0), JSR 286(Portlet Spec v2.0), JSR 362(Portlet Spec v3.0)\n&gt;\n&gt; 1. Deployment of Portlets involves [different approach][1] than a Servlet application. Some Providers (Liferay/Alfresco/WebSphere) support hot-deploying of portlets without the need to restart the server which is not possible in case of servlets without modularizing the application using special libraries such as OSGi.\n\n----\n\n**Edit** &lt;sub&gt;(From comments)&lt;/sub&gt;\n\nA Portlet container is built on a Servlet container. So ultimately it can be said that the portlet runs on a Servlet Container. But while developing apps, we view a portlet container separately from the Servlet/Java EE container.\n\n  [1]: https://stackoverflow.com/questions/5260119/how-to-deploy-portlets-to-liferay","title":"what is the difference between a portlet and a servlet?","body":"<p><em><strong>Enhanced from Source</strong></em>: <a href=\"http://fanatech.wordpress.com/servlets-vs-portlets/\" rel=\"noreferrer\">Servlets Vs Portlets</a></p>\n<blockquote>\n<p><strong>Similarities</strong></p>\n<ol>\n<li><p>Servlets and Portlets are web based components which use Java for\ntheir implementation.</p>\n</li>\n<li><p>Portlets are managed by a portlet container just like servlet is\nmanaged by servlet container.</p>\n</li>\n<li><p>Both static and dynamic content can be generated by Portlets and\nServlets.</p>\n</li>\n<li><p>The life cycle of portlets and servlets is controlled by the container</p>\n</li>\n<li><p>The client/server model is used for both servlets and portlets</p>\n</li>\n<li><p>The packaging and deployment are essentially the same, WAR/EARs.</p>\n</li>\n<li><p>Application Session exists in both Servlet and Portlet containers. It is one of the ways of of sharing data (crude Inter-Portlet Communication) from the render phase to the action phase (or any lower phases) in the portlet containers.</p>\n</li>\n<li><p>Both Servlets and Portlets use similar server / VM environments that support it. Although, some additional configurations might needed in case of portlets to make it tick</p>\n</li>\n<li><p>The build/DI tools are similar for both - Ant, Maven, Gradle, etc are all supported. Mostly :) - This has changed a bit with Liferay 7.</p>\n</li>\n</ol>\n</blockquote>\n<hr />\n<blockquote>\n<p><strong>Dissimilarities</strong></p>\n<ol>\n<li><p>Servlets can render complete web pages, whereas portlets renders html\nfragments. These fragments are aggregated by the portal into a\ncomplete web page.</p>\n</li>\n<li><p>The content type of JSR 168 portlets can be only cHTML, XHTML, WML. It\ndoes not support other content types.</p>\n</li>\n<li><p>Portlets are not allowed to generate HTML code that contains tags such\nas body, frame, frameset, head, html, or title.</p>\n</li>\n<li><p>A Portlet unlike a servlet doesnt have URL attached to it so it\ncannot be accessed directly. Access is only through the portal page\nwhich holds the portlet.</p>\n</li>\n<li><p>Portlets can be provided with controls to manipulate its window states\nor portlet modes.</p>\n</li>\n<li><p>Multiple instances of a single portlet can be placed onto the same\npage.</p>\n</li>\n<li><p>Portlets support persistent configuration and customization, profile\ninformation.</p>\n</li>\n<li><p>Portlets can have two types of request viz. render request and action\nrequest.</p>\n</li>\n<li><p>Portlets have two scopes within session; application scope for\ncommunication across portlets and portlet scope for intra portlet\ncommunication.</p>\n</li>\n<li><p>Portlet cannot set the character set encoding of the response nor can\nit set the HTTP response headers.</p>\n</li>\n<li><p>Portlets doesnt have access to request URL. So it cannot access the\nquery parameters appended to the URL. Portlets cannot set cookies.</p>\n</li>\n<li><p>Typical methods of Portlet API are <code>doView()</code>, <code>doEdit()</code>, <code>doHelp()</code> and\n<code>processAction()</code> while those of servlet are <code>service()</code>, <code>doPost()</code>,\n<code>doGet()</code>.</p>\n</li>\n<li><p><em>Servlet Specifications</em> - JSR 369(Servlet 4.0), JSR 340(Servlet 3.1), JSR 315(Servlet 3.0), JSR 154(Servlet 2.5 &amp; 2.4).\n<em>Portlet Specifications</em> - JSR 168(Portlet Spec v1.0), JSR 286(Portlet Spec v2.0), JSR 362(Portlet Spec v3.0)</p>\n</li>\n<li><p>Deployment of Portlets involves <a href=\"https://stackoverflow.com/questions/5260119/how-to-deploy-portlets-to-liferay\">different approach</a> than a Servlet application. Some Providers (Liferay/Alfresco/WebSphere) support hot-deploying of portlets without the need to restart the server which is not possible in case of servlets without modularizing the application using special libraries such as OSGi.</p>\n</li>\n</ol>\n</blockquote>\n<hr />\n<p><strong>Edit</strong> <sub>(From comments)</sub></p>\n<p>A Portlet container is built on a Servlet container. So ultimately it can be said that the portlet runs on a Servlet Container. But while developing apps, we view a portlet container separately from the Servlet/Java EE container.</p>\n"}],"owner":{"account_id":879951,"reputation":1063,"user_id":163967,"display_name":"Rajesh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99862,"favorite_count":0,"down_vote_count":0,"up_vote_count":106,"accepted_answer_id":1480557,"answer_count":5,"score":106,"last_activity_date":1695765201,"creation_date":1253944663,"question_id":1480528,"body_markdown":"I have been asked to work on portlets and portals, and I want to know the differences between a portlet and a servlet.\r\n\r\nHow and where does a portlet differ (maybe functionally) from a servlet?","title":"what is the difference between a portlet and a servlet?","body":"<p>I have been asked to work on portlets and portals, and I want to know the differences between a portlet and a servlet.</p>\n<p>How and where does a portlet differ (maybe functionally) from a servlet?</p>\n"},{"tags":["java","recursion","jgrasp"],"comments":[{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":2,"creation_date":1695759624,"post_id":77183160,"comment_id":136066836,"body_markdown":"Welcome to Stack Overflow!  Relevant code and error messages need to be included in your question *as text*, [not as pictures of text](https://meta.stackoverflow.com/q/285551/328193).  Just linking to screen shots makes it more difficult for people to help you.  To learn more about this community and how we can help you, please start with the [tour] and read [ask] and its linked resources.","body":"Welcome to Stack Overflow!  Relevant code and error messages need to be included in your question <i>as text</i>, <a href=\"https://meta.stackoverflow.com/q/285551/328193\">not as pictures of text</a>.  Just linking to screen shots makes it more difficult for people to help you.  To learn more about this community and how we can help you, please start with the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and its linked resources."},{"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"score":0,"creation_date":1695760197,"post_id":77183160,"comment_id":136066927,"body_markdown":"David, I don&#39;t know how to put my code in the question here unlike other users do and my professor for Finger Lakes Community College always wants me to take a screenshot and submit the question here.","body":"David, I don&#39;t know how to put my code in the question here unlike other users do and my professor for Finger Lakes Community College always wants me to take a screenshot and submit the question here."},{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":5,"creation_date":1695760463,"post_id":77183160,"comment_id":136066984,"body_markdown":"*&quot;I don&#39;t know how to put my code in the question here&quot;* - Text can be copied and pasted.  If the formatting is a struggle, the community can help with that because questions are publicly editable.  *&quot;my professor [...] always wants me to take a screenshot and submit the question here&quot;* - Your professor has misinformed you of how this community works.  Your professor is also encouraged to start with the [tour] and read [ask] and its linked resources.","body":"<i>&quot;I don&#39;t know how to put my code in the question here&quot;</i> - Text can be copied and pasted.  If the formatting is a struggle, the community can help with that because questions are publicly editable.  <i>&quot;my professor [...] always wants me to take a screenshot and submit the question here&quot;</i> - Your professor has misinformed you of how this community works.  Your professor is also encouraged to start with the <a href=\"https://stackoverflow.com/tour\">tour</a> and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and its linked resources."},{"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"score":0,"creation_date":1695760919,"post_id":77183160,"comment_id":136067055,"body_markdown":"David, I meant on my learning platform which is called Brightspace by &quot;submit the question here&quot; because it only relates to Brightspace","body":"David, I meant on my learning platform which is called Brightspace by &quot;submit the question here&quot; because it only relates to Brightspace"},{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1695766475,"post_id":77183160,"comment_id":136067759,"body_markdown":"Your assignment **tells** you how to approach the solution. &quot;Using Newton&#39;s method...&quot; which it then explains in detail.  And then the assignment says &quot;use recursion&quot;. It is all spelled out.","body":"Your assignment <b>tells</b> you how to approach the solution. &quot;Using Newton&#39;s method...&quot; which it then explains in detail.  And then the assignment says &quot;use recursion&quot;. It is all spelled out."}],"answers":[{"comments":[{"owner":{"account_id":28104689,"reputation":512,"user_id":21473475,"display_name":"Arfur Narf"},"score":1,"creation_date":1695766765,"post_id":77183523,"comment_id":136067781,"body_markdown":"You&#39;re of course correct, but the details (explanation of Newton&#39;s method, and instruction to use recursion) are written in the actual assignment text.  The OP appears to have not read it.","body":"You&#39;re of course correct, but the details (explanation of Newton&#39;s method, and instruction to use recursion) are written in the actual assignment text.  The OP appears to have not read it."}],"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695764504,"creation_date":1695763905,"answer_id":77183523,"question_id":77183160,"body_markdown":"&gt;Is there a way to make a sqrt function without using Math.sqrt ()and without loops?\r\nYes.\r\n\r\nYou can use [Newton&#39;s method](https://en.wikipedia.org/wiki/Newton%27s_method) in combination with recursion.\r\n\r\nConsider if you want to find the **sqrt(10)**.  Then the equation\r\n**f(x) = x&lt;sup&gt;2&lt;/sup&gt; - 10** will solve for **x** when **f(x) = 0**.\r\n\r\nThe first  derivative of **f(x)** is  **f&#39;(x) = 2*x**.  So read the wiki page apply **x, f(x), and  f&#39;(x)** as described.\r\n\r\n- first do it in a loop to ensure you have the algorithm down.\r\n- then do it recursively to fulfill the requirements.\r\n- in both cases you should stop the iteration when **|x&lt;sub&gt;n+1&lt;/sub&gt; - x&lt;sub&gt;n&lt;/sub&gt;|** are within a reasonable tolerance.\r\n- finally, you will want to use some variable in place of **10** in the above mentioned equations to take the sqrt root of any number.\r\n","title":"Is there a way to make a sqrt function without using Math.sqrt ()and without loops?","body":"<blockquote>\n<p>Is there a way to make a sqrt function without using Math.sqrt ()and without loops?\nYes.</p>\n</blockquote>\n<p>You can use <a href=\"https://en.wikipedia.org/wiki/Newton%27s_method\" rel=\"nofollow noreferrer\">Newton's method</a> in combination with recursion.</p>\n<p>Consider if you want to find the <strong>sqrt(10)</strong>.  Then the equation\n<strong>f(x) = x<sup>2</sup> - 10</strong> will solve for <strong>x</strong> when <strong>f(x) = 0</strong>.</p>\n<p>The first  derivative of <strong>f(x)</strong> is  <strong>f'(x) = 2*x</strong>.  So read the wiki page apply <strong>x, f(x), and  f'(x)</strong> as described.</p>\n<ul>\n<li>first do it in a loop to ensure you have the algorithm down.</li>\n<li>then do it recursively to fulfill the requirements.</li>\n<li>in both cases you should stop the iteration when <strong>|x<sub>n+1</sub> - x<sub>n</sub>|</strong> are within a reasonable tolerance.</li>\n<li>finally, you will want to use some variable in place of <strong>10</strong> in the above mentioned equations to take the sqrt root of any number.</li>\n</ul>\n"}],"owner":{"account_id":29374491,"reputation":5,"user_id":22506381,"display_name":"RWorker"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":3,"up_vote_count":1,"closed_date":1696529793,"accepted_answer_id":77183523,"answer_count":1,"score":-2,"last_activity_date":1695764504,"creation_date":1695759426,"question_id":77183160,"body_markdown":"I&#39;m trying to make program that uses recursive for a college homework but teacher does not want me to use loops for the problems but this is a jGRASP java program.\r\nAnd this is the homework:[homework attachment][1]\r\n\r\n[My code](https://i.stack.imgur.com/qU4Dz.png)\r\n\r\nI tried this code: [my code](https://i.stack.imgur.com/3FyNX.png)\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class SquareRoot {\r\n     public static void main(String[] args) {\r\n       Scanner scanner = new Scanner(System.in);\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int x = scanner.nextInt();\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int y = scanner.nextInt();\r\n       \r\n       System.out.println(&quot;&quot; + powS(x));\r\n       System.out.println(&quot;&quot; + powNS(y));\r\n     }\r\n     \r\n     public static int powS(int x) {\r\n       int result = (2 * x) - 1;\r\n       if (x == 0) {\r\n         return 0;\r\n       }\r\n       return result + powS(x-1);\r\n     }\r\n     \r\n     public static int powNS(int y) {\r\n       int solution = (2 * y) - 1;\r\n       if (y == 0) {\r\n         return 0;\r\n       }\r\n       return solution + powS(y-1);\r\n     }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nAnd the square function worked but the only problem is that I can&#39;t figure out how to change the last method to make a square root function without loops(no while loops and no for loops)\r\n\r\nI tried this code: [my code](https://i.stack.imgur.com/CoVyj.png)\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class SquareRoot9 {\r\n     public static void main(String[] args) {\r\n       Scanner scanner = new Scanner(System.in);\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int x = scanner.nextInt();\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int y = scanner.nextInt();\r\n       \r\n       System.out.println(&quot;&quot; + powS(x));\r\n       System.out.println(&quot;&quot; + powNS(y));\r\n     }\r\n     \r\n     public static int powS(int x) {\r\n       int result = 2 * (x-1);\r\n       if (x == 0) {\r\n         return 0;\r\n       }\r\n       return result * powS(x-1);\r\n     }\r\n     \r\n     public static int powNS(int y) {\r\n       int solution = 2 * (y-1);\r\n       if (y == 0) {\r\n         return 1;\r\n       }\r\n       if (y == 1) {\r\n         return solution;\r\n       }\r\n       return solution / powNS(y-1);\r\n     }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\nbut there&#39;s an error\r\n\r\nAnd then I tried this code: [my code]\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-js --&gt;\r\n\r\n    import java.util.Scanner;\r\n\r\n    public class SquareRoot10 {\r\n     public static void main(String[] args) {\r\n       Scanner scanner = new Scanner(System.in);\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int x = scanner.nextInt();\r\n       System.out.println(&quot;Enter a number: &quot;);\r\n       int y = scanner.nextInt();\r\n       \r\n       System.out.println(&quot;&quot; + powS(x));\r\n       System.out.println(&quot;&quot; + powNS(y));\r\n     }\r\n     \r\n     public static int powS(int x) {\r\n       int result = (2 * x) - 1;\r\n       if (x == 0) {\r\n         return 0;\r\n       }\r\n       return result + powS(x-1);\r\n     }\r\n     \r\n     public static int powNS(int y) {\r\n       int solution = (2 / y) - 1;\r\n       if (y == 0) {\r\n         return 0;\r\n       }\r\n       return solution + powS(y-1);\r\n     }\r\n    }\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n (https://i.stack.imgur.com/2ZRQV.png) and it worked but the code didn&#39;t retrieve the answer I&#39;m looking for and the code says I got 625 when I was looking for the square root of the number.\r\n\r\nDoes anyone know how to solve or change the last method so I can get the square root of a number for a jGRASP java program?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/16zn8.jpg","title":"Is there a way to make a sqrt function without using Math.sqrt ()and without loops?","body":"<p>I'm trying to make program that uses recursive for a college homework but teacher does not want me to use loops for the problems but this is a jGRASP java program.\nAnd this is the homework:<a href=\"https://i.stack.imgur.com/16zn8.jpg\" rel=\"nofollow noreferrer\">homework attachment</a></p>\n<p><a href=\"https://i.stack.imgur.com/qU4Dz.png\" rel=\"nofollow noreferrer\">My code</a></p>\n<p>I tried this code: <a href=\"https://i.stack.imgur.com/3FyNX.png\" rel=\"nofollow noreferrer\">my code</a></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.Scanner;\n\npublic class SquareRoot {\n public static void main(String[] args) {\n   Scanner scanner = new Scanner(System.in);\n   System.out.println(\"Enter a number: \");\n   int x = scanner.nextInt();\n   System.out.println(\"Enter a number: \");\n   int y = scanner.nextInt();\n   \n   System.out.println(\"\" + powS(x));\n   System.out.println(\"\" + powNS(y));\n }\n \n public static int powS(int x) {\n   int result = (2 * x) - 1;\n   if (x == 0) {\n     return 0;\n   }\n   return result + powS(x-1);\n }\n \n public static int powNS(int y) {\n   int solution = (2 * y) - 1;\n   if (y == 0) {\n     return 0;\n   }\n   return solution + powS(y-1);\n }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>And the square function worked but the only problem is that I can't figure out how to change the last method to make a square root function without loops(no while loops and no for loops)</p>\n<p>I tried this code: <a href=\"https://i.stack.imgur.com/CoVyj.png\" rel=\"nofollow noreferrer\">my code</a></p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.Scanner;\n\npublic class SquareRoot9 {\n public static void main(String[] args) {\n   Scanner scanner = new Scanner(System.in);\n   System.out.println(\"Enter a number: \");\n   int x = scanner.nextInt();\n   System.out.println(\"Enter a number: \");\n   int y = scanner.nextInt();\n   \n   System.out.println(\"\" + powS(x));\n   System.out.println(\"\" + powNS(y));\n }\n \n public static int powS(int x) {\n   int result = 2 * (x-1);\n   if (x == 0) {\n     return 0;\n   }\n   return result * powS(x-1);\n }\n \n public static int powNS(int y) {\n   int solution = 2 * (y-1);\n   if (y == 0) {\n     return 1;\n   }\n   if (y == 1) {\n     return solution;\n   }\n   return solution / powNS(y-1);\n }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>but there's an error</p>\n<p>And then I tried this code: [my code]</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>import java.util.Scanner;\n\npublic class SquareRoot10 {\n public static void main(String[] args) {\n   Scanner scanner = new Scanner(System.in);\n   System.out.println(\"Enter a number: \");\n   int x = scanner.nextInt();\n   System.out.println(\"Enter a number: \");\n   int y = scanner.nextInt();\n   \n   System.out.println(\"\" + powS(x));\n   System.out.println(\"\" + powNS(y));\n }\n \n public static int powS(int x) {\n   int result = (2 * x) - 1;\n   if (x == 0) {\n     return 0;\n   }\n   return result + powS(x-1);\n }\n \n public static int powNS(int y) {\n   int solution = (2 / y) - 1;\n   if (y == 0) {\n     return 0;\n   }\n   return solution + powS(y-1);\n }\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>(<a href=\"https://i.stack.imgur.com/2ZRQV.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/2ZRQV.png</a>) and it worked but the code didn't retrieve the answer I'm looking for and the code says I got 625 when I was looking for the square root of the number.</p>\n<p>Does anyone know how to solve or change the last method so I can get the square root of a number for a jGRASP java program?</p>\n"},{"tags":["java","spring","graphql"],"answers":[{"tags":[],"owner":{"account_id":11415465,"reputation":59,"user_id":8368390,"display_name":"thegreatleaf"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1547870107,"creation_date":1547870107,"answer_id":54263924,"question_id":54244791,"body_markdown":"you can implement `GraphQLError` where extra error properties can be added. ","title":"How to respond with extensions using graphql-java?","body":"<p>you can implement <code>GraphQLError</code> where extra error properties can be added. </p>\n"},{"comments":[{"owner":{"account_id":1406015,"reputation":2323,"user_id":1333713,"accept_rate":82,"display_name":"David Groomes"},"score":0,"creation_date":1650580611,"post_id":55698152,"comment_id":127158943,"body_markdown":"There is a convenient builder class that makes it a bit easier to build a new `ExecutionResultImpl` from an existing one. Less boilerplate. See &lt;https://github.com/graphql-java/graphql-java/blob/12c7c4e301fd919827742a46eca482614a67a583/src/main/java/graphql/ExecutionResultImpl.java#L157&gt;","body":"There is a convenient builder class that makes it a bit easier to build a new <code>ExecutionResultImpl</code> from an existing one. Less boilerplate. See &lt;<a href=\"https://github.com/graphql-java/graphql-java/blob/12c7c4e301fd919827742a46eca482614a67a583/src/main/java/graphql/ExecutionResultImpl.java#L157\" rel=\"nofollow noreferrer\">github.com/graphql-java/graphql-java/blob/&hellip;</a>&gt;"}],"tags":[],"owner":{"account_id":15241422,"reputation":607,"user_id":10997589,"display_name":"Joe"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1555509874,"creation_date":1555367886,"answer_id":55698152,"question_id":54244791,"body_markdown":"The best way I&#39;ve found to return `extensions` is to implement a subclass of `SimpleInstrumentation` that overrides `instrumentExecutionResult` (code stolen partially from graphql-java&#39;s `TracingInstrumentation`):\r\n\r\n    @Override\r\n    public CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\r\n            ExecutionResult executionResult,\r\n            InstrumentationExecutionParameters parameters) {\r\n        Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\r\n        Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\r\n        newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\r\n        newExtensionMap.put(&quot;MyExtensionKey&quot;, myExtensionValue);\r\n\r\n        return CompletableFuture.completedFuture(\r\n            new ExecutionResultImpl(\r\n                executionResult.getData(), \r\n                executionResult.getErrors(), \r\n                newExtensionMap));\r\n    }\r\n\r\nWhen setting up the `GraphQL` instance you then pass an instance of the instrumentation class in:\r\n\r\n    GraphQL graphQL = GraphQL\r\n            .newGraphQL(schema)\r\n            .instrumentation(new MyInstrumentation())\r\n            .build()\r\n\r\n(Not sure entirely how this is handled by `graphql-spring-boot` but would imagine there is some way to `@Autowire` or otherwise configure the `GraphQL` instance?  `InstrumentationProvider` from `graphql-java-servlet` might be what you&#39;d use to do this)","title":"How to respond with extensions using graphql-java?","body":"<p>The best way I've found to return <code>extensions</code> is to implement a subclass of <code>SimpleInstrumentation</code> that overrides <code>instrumentExecutionResult</code> (code stolen partially from graphql-java's <code>TracingInstrumentation</code>):</p>\n\n<pre><code>@Override\npublic CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\n        ExecutionResult executionResult,\n        InstrumentationExecutionParameters parameters) {\n    Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\n    Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\n    newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\n    newExtensionMap.put(\"MyExtensionKey\", myExtensionValue);\n\n    return CompletableFuture.completedFuture(\n        new ExecutionResultImpl(\n            executionResult.getData(), \n            executionResult.getErrors(), \n            newExtensionMap));\n}\n</code></pre>\n\n<p>When setting up the <code>GraphQL</code> instance you then pass an instance of the instrumentation class in:</p>\n\n<pre><code>GraphQL graphQL = GraphQL\n        .newGraphQL(schema)\n        .instrumentation(new MyInstrumentation())\n        .build()\n</code></pre>\n\n<p>(Not sure entirely how this is handled by <code>graphql-spring-boot</code> but would imagine there is some way to <code>@Autowire</code> or otherwise configure the <code>GraphQL</code> instance?  <code>InstrumentationProvider</code> from <code>graphql-java-servlet</code> might be what you'd use to do this)</p>\n"},{"tags":[],"owner":{"account_id":8263841,"reputation":847,"user_id":6214197,"display_name":"Shubham Arora"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658270895,"creation_date":1658270433,"answer_id":73044166,"question_id":54244791,"body_markdown":"Okay so after spending some 20 hours on this thing . Finally figured it out . \r\nRequired a lot of trial and error . Also we most definitely dont have proper/enough documenting for this . \r\n\r\nAlthough my solution answers this question , It answers an extra question as well, which is  -&gt; **How do I make extensions dynamic for every query ?**\r\n\r\nMeaning , all 3 (data, errors and extensions) would be dynamic in the response . \r\n\r\nMy use case - **How do I add logs for each query in extensions ?**\r\n\r\nAnswer  - (Note - The code below contains lombok annotations)\r\n\r\nStep 1 - Creating your **Instrumentation Class** and the **Instrumentation State Class** . \r\n\r\n```\r\n//This is the state class . \r\n//State is the first thing created whenever a graphql query is run . \r\n//We will embed our Logs object here .\r\n@Builder\r\nclass LogInstrumentationState implements InstrumentationState {\r\n    @Getter\r\n    @Setter\r\n    public LogsDto logsDto;\r\n}\r\n\r\n\r\n//This is the instrumentation class that will be used to create the graphql object .\r\n//The overridden methods are different stages in the graphql query execution \r\n@Builder\r\npublic class LogsInstrumentation extends SimpleInstrumentation {\r\n\r\n  //First stage in graphql query execution .\r\n  //Object for our custom state class object is created here . \r\n  @Override\r\n  public InstrumentationState createState() {\r\n    return LogInstrumentationState.builder().build();\r\n  }\r\n\r\n   //Second Stage in graphql query execution\r\n   //Reference of initialized Logs object in the main code flow is passed here . \r\n   //This reference is stored in our custom state class&#39;s object .\r\n  @Override\r\n  public ExecutionInput instrumentExecutionInput(ExecutionInput executionInput,\r\n                                                 InstrumentationExecutionParameters parameters) {\r\n    LogsDto logsDto = (LogsDto) executionInput.getExtensions().get(&quot;logs&quot;);\r\n\r\n    LogInstrumentationState logInstrumentationState = parameters.getInstrumentationState();\r\n    logInstrumentationState.setLogsDto(logsDto);\r\n    return super.instrumentExecutionInput(executionInput, parameters);\r\n  }\r\n\r\n  //This is the last stage in the graphql query execution .\r\n  //Logs are taken from the custom container and added into extensions . \r\n  @Override\r\n  public CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\r\n      ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\r\n\r\n    Map&lt;Object, Object&gt; newExtensionMap = getExtensionsMap(executionResult,parameters);\r\n\r\n    return CompletableFuture.completedFuture(\r\n        new ExecutionResultImpl(\r\n            executionResult.getData(),\r\n            executionResult.getErrors(),\r\n            newExtensionMap));\r\n  }\r\n\r\n  //Helper function\r\n  public Map&lt;Object, Object&gt; getExtensionsMap(ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\r\n    Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\r\n    Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\r\n    newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\r\n    LogsDto logsDto =\r\n        ((LogInstrumentationState)parameters.getInstrumentationState()).getLogsDto();\r\n    newExtensionMap.put(ControllerConstants.LOGS, logsDto);\r\n    return newExtensionMap;\r\n  }\r\n\r\n}\r\n```\r\n\r\nStep 2 - Creating graphql object - \r\n```\r\nGraphQL graphQl = GraphQL.newGraphQL(graphqlSchema).instrumentation(LogsInstrumentation.builder().build())\r\n        .build();\r\n```\r\n\r\nStep 3 - Creating executing input . This is where you pass the dynamic Log object into the ```LogsInstrumentation``` class .\r\n\r\n```\r\nvar executionInput = ExecutionInput.newExecutionInput()\r\n          .query(...)\r\n          .variables(...)\r\n          .operationName(...)\r\n          .extensions(Map.of(&quot;logs&quot;,logsDto))\r\n          .dataLoaderRegistry(...)\r\n          .graphQLContext(graphqlContext).build();\r\n\r\n\r\n      ExecutionResult executionResult = graphQl.execute(executionInput);\r\n```\r\n\r\nStep 4 - This is how you get your extensions after your query has completed . \r\n\r\n```\r\nMap&lt;Object, Object&gt; extensions = executionResult.getExtensions();\r\nLogsDto logsDto = (LogsDto) extensions.get(&quot;logs&quot;);\r\n```\r\n\r\n[My source][1]\r\n\r\n\r\n  [1]: https://medium.com/@gabbigum/java-graphql-instrumentation-explained-255e3b69cf75","title":"How to respond with extensions using graphql-java?","body":"<p>Okay so after spending some 20 hours on this thing . Finally figured it out .\nRequired a lot of trial and error . Also we most definitely dont have proper/enough documenting for this .</p>\n<p>Although my solution answers this question , It answers an extra question as well, which is  -&gt; <strong>How do I make extensions dynamic for every query ?</strong></p>\n<p>Meaning , all 3 (data, errors and extensions) would be dynamic in the response .</p>\n<p>My use case - <strong>How do I add logs for each query in extensions ?</strong></p>\n<p>Answer  - (Note - The code below contains lombok annotations)</p>\n<p>Step 1 - Creating your <strong>Instrumentation Class</strong> and the <strong>Instrumentation State Class</strong> .</p>\n<pre><code>//This is the state class . \n//State is the first thing created whenever a graphql query is run . \n//We will embed our Logs object here .\n@Builder\nclass LogInstrumentationState implements InstrumentationState {\n    @Getter\n    @Setter\n    public LogsDto logsDto;\n}\n\n\n//This is the instrumentation class that will be used to create the graphql object .\n//The overridden methods are different stages in the graphql query execution \n@Builder\npublic class LogsInstrumentation extends SimpleInstrumentation {\n\n  //First stage in graphql query execution .\n  //Object for our custom state class object is created here . \n  @Override\n  public InstrumentationState createState() {\n    return LogInstrumentationState.builder().build();\n  }\n\n   //Second Stage in graphql query execution\n   //Reference of initialized Logs object in the main code flow is passed here . \n   //This reference is stored in our custom state class's object .\n  @Override\n  public ExecutionInput instrumentExecutionInput(ExecutionInput executionInput,\n                                                 InstrumentationExecutionParameters parameters) {\n    LogsDto logsDto = (LogsDto) executionInput.getExtensions().get(&quot;logs&quot;);\n\n    LogInstrumentationState logInstrumentationState = parameters.getInstrumentationState();\n    logInstrumentationState.setLogsDto(logsDto);\n    return super.instrumentExecutionInput(executionInput, parameters);\n  }\n\n  //This is the last stage in the graphql query execution .\n  //Logs are taken from the custom container and added into extensions . \n  @Override\n  public CompletableFuture&lt;ExecutionResult&gt; instrumentExecutionResult(\n      ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\n\n    Map&lt;Object, Object&gt; newExtensionMap = getExtensionsMap(executionResult,parameters);\n\n    return CompletableFuture.completedFuture(\n        new ExecutionResultImpl(\n            executionResult.getData(),\n            executionResult.getErrors(),\n            newExtensionMap));\n  }\n\n  //Helper function\n  public Map&lt;Object, Object&gt; getExtensionsMap(ExecutionResult executionResult, InstrumentationExecutionParameters parameters) {\n    Map&lt;Object, Object&gt; currentExt = executionResult.getExtensions();\n    Map&lt;Object, Object&gt; newExtensionMap = new LinkedHashMap&lt;&gt;();\n    newExtensionMap.putAll(currentExt == null ? Collections.emptyMap() : currentExt);\n    LogsDto logsDto =\n        ((LogInstrumentationState)parameters.getInstrumentationState()).getLogsDto();\n    newExtensionMap.put(ControllerConstants.LOGS, logsDto);\n    return newExtensionMap;\n  }\n\n}\n</code></pre>\n<p>Step 2 - Creating graphql object -</p>\n<pre><code>GraphQL graphQl = GraphQL.newGraphQL(graphqlSchema).instrumentation(LogsInstrumentation.builder().build())\n        .build();\n</code></pre>\n<p>Step 3 - Creating executing input . This is where you pass the dynamic Log object into the <code>LogsInstrumentation</code> class .</p>\n<pre><code>var executionInput = ExecutionInput.newExecutionInput()\n          .query(...)\n          .variables(...)\n          .operationName(...)\n          .extensions(Map.of(&quot;logs&quot;,logsDto))\n          .dataLoaderRegistry(...)\n          .graphQLContext(graphqlContext).build();\n\n\n      ExecutionResult executionResult = graphQl.execute(executionInput);\n</code></pre>\n<p>Step 4 - This is how you get your extensions after your query has completed .</p>\n<pre><code>Map&lt;Object, Object&gt; extensions = executionResult.getExtensions();\nLogsDto logsDto = (LogsDto) extensions.get(&quot;logs&quot;);\n</code></pre>\n<p><a href=\"https://medium.com/@gabbigum/java-graphql-instrumentation-explained-255e3b69cf75\" rel=\"nofollow noreferrer\">My source</a></p>\n"},{"tags":[],"owner":{"account_id":104236,"reputation":2064,"user_id":278800,"accept_rate":58,"display_name":"Steve K"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695764494,"creation_date":1695764494,"answer_id":77183562,"question_id":54244791,"body_markdown":"Starting with graphql-java 21.0, you can set `extensions` directly on the `DataFetcherResult`: https://github.com/graphql-java/graphql-java/blob/v21.0/src/main/java/graphql/execution/DataFetcherResult.java#L205\r\n\r\nIt was added [here](https://github.com/graphql-java/graphql-java/commit/1bbaeeae155ac492722957dc9d450b3c3cdbe3bc). If you&#39;re stuck on an older version of graphql-java, you can get it from the `DataFetchingEnvironment` like so:\r\n```\r\nExtensionsBuilder extensionsBuilder = dfe.getGraphQlContext().get&lt;ExtensionsBuilder&gt;(ExtensionsBuilder.class);\r\nif (extensionsBuilder != null) {\r\n    extensionsBuilder.addValue(&quot;yourKey&quot;, yourValue);\r\n}\r\n```","title":"How to respond with extensions using graphql-java?","body":"<p>Starting with graphql-java 21.0, you can set <code>extensions</code> directly on the <code>DataFetcherResult</code>: <a href=\"https://github.com/graphql-java/graphql-java/blob/v21.0/src/main/java/graphql/execution/DataFetcherResult.java#L205\" rel=\"nofollow noreferrer\">https://github.com/graphql-java/graphql-java/blob/v21.0/src/main/java/graphql/execution/DataFetcherResult.java#L205</a></p>\n<p>It was added <a href=\"https://github.com/graphql-java/graphql-java/commit/1bbaeeae155ac492722957dc9d450b3c3cdbe3bc\" rel=\"nofollow noreferrer\">here</a>. If you're stuck on an older version of graphql-java, you can get it from the <code>DataFetchingEnvironment</code> like so:</p>\n<pre><code>ExtensionsBuilder extensionsBuilder = dfe.getGraphQlContext().get&lt;ExtensionsBuilder&gt;(ExtensionsBuilder.class);\nif (extensionsBuilder != null) {\n    extensionsBuilder.addValue(&quot;yourKey&quot;, yourValue);\n}\n</code></pre>\n"}],"owner":{"account_id":11368375,"reputation":169,"user_id":8334622,"display_name":"John Doe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2593,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"answer_count":4,"score":7,"last_activity_date":1695764494,"creation_date":1547761721,"question_id":54244791,"body_markdown":"My responses from GraphQL have to follow a particular format of \r\n\r\n    {\r\n        data:{}\r\n        errors:[{}]\r\n        extensions:{}\r\n    }\r\n  \r\n\r\nHowever, I am uncertain how to respond with extensions from my methods.\r\nI am using graphql-spring-boot which pulls in graphql-java, graphql-java-tools, and graphql-java-servlet.\r\n\r\n\r\nI understand that my results from a query/mutation method will be wrapped in the data object, and if any exceptions were thrown they&#39;ll be wrapped in errors. \r\n\r\nIf I have a GraphQL Schema defined as \r\n    \r\n    type Query {\r\n        someQuery(input: String!) : String!\r\n    }\r\n\r\nand a corresponding Java method\r\n\r\n    public String someQuery(String input) {\r\n        return &quot;Hello, world!&quot;;\r\n    }\r\n\r\nThe GraphQL response will be\r\n\r\n    {\r\n        data: { &quot;Hello, world!&quot;}\r\n    }\r\n\r\nI would like to know how I am able to add extensions to my GraphQL response so that the output is as:\r\n\r\n    {\r\n        data: {&quot;Hello, world!&quot;}\r\n        extensions: { &lt;something&gt;}\r\n    }\r\n\r\n","title":"How to respond with extensions using graphql-java?","body":"<p>My responses from GraphQL have to follow a particular format of </p>\n\n<pre><code>{\n    data:{}\n    errors:[{}]\n    extensions:{}\n}\n</code></pre>\n\n<p>However, I am uncertain how to respond with extensions from my methods.\nI am using graphql-spring-boot which pulls in graphql-java, graphql-java-tools, and graphql-java-servlet.</p>\n\n<p>I understand that my results from a query/mutation method will be wrapped in the data object, and if any exceptions were thrown they'll be wrapped in errors. </p>\n\n<p>If I have a GraphQL Schema defined as </p>\n\n<pre><code>type Query {\n    someQuery(input: String!) : String!\n}\n</code></pre>\n\n<p>and a corresponding Java method</p>\n\n<pre><code>public String someQuery(String input) {\n    return \"Hello, world!\";\n}\n</code></pre>\n\n<p>The GraphQL response will be</p>\n\n<pre><code>{\n    data: { \"Hello, world!\"}\n}\n</code></pre>\n\n<p>I would like to know how I am able to add extensions to my GraphQL response so that the output is as:</p>\n\n<pre><code>{\n    data: {\"Hello, world!\"}\n    extensions: { &lt;something&gt;}\n}\n</code></pre>\n"},{"tags":["java","gradle","protocol-buffers"],"comments":[{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":2,"creation_date":1542721802,"post_id":53394466,"comment_id":93664284,"body_markdown":"I don&#39;t think `protobuf-gradle-plugin` should be part of your applications dependencies. Rather it&#39;s a gradle plugin that goes at the top gradle file, and you&#39;ll need to apply it","body":"I don&#39;t think <code>protobuf-gradle-plugin</code> should be part of your applications dependencies. Rather it&#39;s a gradle plugin that goes at the top gradle file, and you&#39;ll need to apply it"}],"answers":[{"tags":[],"owner":{"account_id":13388424,"reputation":277,"user_id":9661508,"display_name":"Oluwatosin Solarin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695764316,"creation_date":1695764316,"answer_id":77183551,"question_id":53394466,"body_markdown":"For me updating this line \r\n\r\n&gt; artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;\r\n\r\nto have the same version number as this line fixed the problem.\r\n\r\n&gt; implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;\r\n\r\n    \r\n    dependencies {\r\n        implementation  &quot;androidx.datastore:datastore:1.0.0&quot;\r\n        implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;\r\n    }\r\n    \r\n    protobuf {\r\n        protoc {\r\n            artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;\r\n        }\r\n    \r\n        // Generates the java Protobuf-lite code for the Protobufs in this project. See\r\n        // https://github.com/google/protobuf-gradle-plugin#customizing-protobuf-compilation\r\n        // for more information.\r\n        generateProtoTasks {\r\n            all().each { task -&gt;\r\n                task.builtins {\r\n                    java {\r\n                        option &#39;lite&#39;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"Gradle can&#39;t find com.google.protobuf","body":"<p>For me updating this line</p>\n<blockquote>\n<p>artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;</p>\n</blockquote>\n<p>to have the same version number as this line fixed the problem.</p>\n<blockquote>\n<p>implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;</p>\n</blockquote>\n<pre><code>dependencies {\n    implementation  &quot;androidx.datastore:datastore:1.0.0&quot;\n    implementation  &quot;com.google.protobuf:protobuf-javalite:3.18.0&quot;\n}\n\nprotobuf {\n    protoc {\n        artifact = &quot;com.google.protobuf:protoc:3.18.0&quot;\n    }\n\n    // Generates the java Protobuf-lite code for the Protobufs in this project. See\n    // https://github.com/google/protobuf-gradle-plugin#customizing-protobuf-compilation\n    // for more information.\n    generateProtoTasks {\n        all().each { task -&gt;\n            task.builtins {\n                java {\n                    option 'lite'\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":5579578,"reputation":95,"user_id":4421913,"display_name":"Jo&#227;o Borrego"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1044,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1695764316,"creation_date":1542721709,"question_id":53394466,"body_markdown":"I&#39;m trying to compile a project with protobuf using gradle. However, I&#39;m getting the following errors in the protobuf generated java file:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nHere&#39;s the build.gradle file:\r\n\r\n        // Apply the java-library plugin to add support for Java Library\r\n    apply plugin: &#39;java-library&#39;\r\n    \r\n    \r\n    // In this section you declare where to find the dependencies of your project\r\n    repositories {\r\n        // Use jcenter for resolving your dependencies.\r\n        // You can declare any Maven/Ivy/file repository here.\r\n        jcenter()\r\n    }\r\n    \r\n    dependencies {\r\n     \r\n        // This dependency is used internally, and not exposed to consumers on their own compile classpath.\r\n        implementation &#39;com.google.protobuf:protobuf-java:3.5.1&#39;\r\n    \timplementation &#39;com.google.protobuf:protobuf-gradle-plugin:0.8.7&#39;\r\n        // Use JUnit test framework\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n    }\r\n\r\nAny hint of what&#39;s missing?\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/bcz0V.png","title":"Gradle can&#39;t find com.google.protobuf","body":"<p>I'm trying to compile a project with protobuf using gradle. However, I'm getting the following errors in the protobuf generated java file:</p>\n\n<p><a href=\"https://i.stack.imgur.com/bcz0V.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bcz0V.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's the build.gradle file:</p>\n\n<pre><code>    // Apply the java-library plugin to add support for Java Library\napply plugin: 'java-library'\n\n\n// In this section you declare where to find the dependencies of your project\nrepositories {\n    // Use jcenter for resolving your dependencies.\n    // You can declare any Maven/Ivy/file repository here.\n    jcenter()\n}\n\ndependencies {\n\n    // This dependency is used internally, and not exposed to consumers on their own compile classpath.\n    implementation 'com.google.protobuf:protobuf-java:3.5.1'\n    implementation 'com.google.protobuf:protobuf-gradle-plugin:0.8.7'\n    // Use JUnit test framework\n    testImplementation 'junit:junit:4.12'\n}\n</code></pre>\n\n<p>Any hint of what's missing?</p>\n"},{"tags":["java","spring","jdbc","jdbctemplate"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695800476,"post_id":77183520,"comment_id":136071077,"body_markdown":"The `rewriteBatchedStatements` is for MySQL not Postgres. You should check the database not the logging from the java client. That can log individual queries (MySQL does as well) but the actual SQL send to to database is a batched insert.","body":"The <code>rewriteBatchedStatements</code> is for MySQL not Postgres. You should check the database not the logging from the java client. That can log individual queries (MySQL does as well) but the actual SQL send to to database is a batched insert."},{"owner":{"account_id":15880446,"reputation":55,"user_id":12104581,"display_name":"robber"},"score":0,"creation_date":1695845475,"post_id":77183520,"comment_id":136079945,"body_markdown":"It looks like its for postgres aswell, https://jdbc.postgresql.org/documentation/use/#:~:text=reWriteBatchedInserts\n\nThose queries are from the RDS not from the java client","body":"It looks like its for postgres aswell, <a href=\"https://jdbc.postgresql.org/documentation/use/#:~:text=reWriteBatchedInserts\" rel=\"nofollow noreferrer\">jdbc.postgresql.org/documentation/use/&hellip;</a>  Those queries are from the RDS not from the java client"}],"owner":{"account_id":15880446,"reputation":55,"user_id":12104581,"display_name":"robber"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":79,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695763845,"creation_date":1695763845,"question_id":77183520,"body_markdown":"Spring JdbcTemplate is sending small batch sizes of 1-3. I would like batch sizes of 10,000. The code im using to call the batchUpdate is below, and the logs im seeing on the postgres db from AWS.\r\n\r\nI have on my jdbc connection rewriteBatchedStatements set to true. I have also tried re-writing my functions to the code in the last codespace. \r\n\r\nMy goal is to have one insert of 10,000 records, logged like this on the db.\r\n\r\n```\r\nINSERT INTO table_name (column_list)\r\nVALUES\r\n    (value_list_1),\r\n    (value_list_2),\r\n    ...\r\n    (value_list_n);\r\n```\r\n\r\n```\r\n    public void insertTest(UUID var1, int var2, List&lt;Shape&gt; Tests)\r\n    {\r\n        jdbcTemplate.batchUpdate(\r\n                &quot;INSERT INTO database.table VALUES (?, ?, ?, ?, ?, ?, ?)&quot;,\r\n                Tests,\r\n                10000,\r\n                (ps, entity) -&gt;\r\n                {\r\n                    ps.setObject(1, var1);\r\n                    ps.setLong(2, var2);\r\n                    ps.setObject(3, entity.getVar3());\r\n                    ps.setObject(4, entity.getVar4());\r\n                    ps.setObject(5, entity.getVar5());\r\n                    ps.setObject(6, entity.getVar6());\r\n                    ps.setObject(7, entity.getVar7());\r\n                });\r\n    }\r\n```\r\n\r\n```\r\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: duration: 0.003 ms bind S_1: INSERT INTO database.table VALUES ($1, $2, $3, $4, $5, $6)\r\n\r\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:DETAIL: parameters: $1 = &#39;data&#39;, $2 = &#39;1&#39;, $3 = &#39;data&#39;, $4 = &#39;1&#39;, $5 = &#39;data&#39;, $6 = &#39;data&#39;\r\n\r\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: execute S_1: INSERT INTO database.table  VALUES ($1, $2, $3, $4, $5, $6)\r\n```\r\n\r\n\r\n\r\n```\r\nimport org.springframework.jdbc.core.JdbcTemplate;\r\nimport org.springframework.jdbc.core.BatchPreparedStatementSetter;\r\n\r\n    public int[] batchInsert(List&lt;Book&gt; books) {\r\n\r\n        return this.jdbcTemplate.batchUpdate(\r\n\t\t\t&quot;insert into books (name, price) values(?,?)&quot;,\r\n\t\t\tnew BatchPreparedStatementSetter() {\r\n\r\n\t\t\t\tpublic void setValues(PreparedStatement ps, int i) throws SQLException {\r\n\t\t\t\t\tps.setString(1, books.get(i).getName());\r\n\t\t\t\t\tps.setBigDecimal(2, books.get(i).getPrice());\r\n\t\t\t\t}\r\n\r\n\t\t\t\tpublic int getBatchSize() {\r\n\t\t\t\t\treturn books.size();\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n    }\r\n```\r\nFrom this link: https://mkyong.com/spring/spring-jdbctemplate-batchupdate-example/\r\n\r\nThank you\r\n","title":"jdbcTemplate BatchUpdate sending row by row instead of bigger batch","body":"<p>Spring JdbcTemplate is sending small batch sizes of 1-3. I would like batch sizes of 10,000. The code im using to call the batchUpdate is below, and the logs im seeing on the postgres db from AWS.</p>\n<p>I have on my jdbc connection rewriteBatchedStatements set to true. I have also tried re-writing my functions to the code in the last codespace.</p>\n<p>My goal is to have one insert of 10,000 records, logged like this on the db.</p>\n<pre><code>INSERT INTO table_name (column_list)\nVALUES\n    (value_list_1),\n    (value_list_2),\n    ...\n    (value_list_n);\n</code></pre>\n<pre><code>    public void insertTest(UUID var1, int var2, List&lt;Shape&gt; Tests)\n    {\n        jdbcTemplate.batchUpdate(\n                &quot;INSERT INTO database.table VALUES (?, ?, ?, ?, ?, ?, ?)&quot;,\n                Tests,\n                10000,\n                (ps, entity) -&gt;\n                {\n                    ps.setObject(1, var1);\n                    ps.setLong(2, var2);\n                    ps.setObject(3, entity.getVar3());\n                    ps.setObject(4, entity.getVar4());\n                    ps.setObject(5, entity.getVar5());\n                    ps.setObject(6, entity.getVar6());\n                    ps.setObject(7, entity.getVar7());\n                });\n    }\n</code></pre>\n<pre><code>2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: duration: 0.003 ms bind S_1: INSERT INTO database.table VALUES ($1, $2, $3, $4, $5, $6)\n\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:DETAIL: parameters: $1 = 'data', $2 = '1', $3 = 'data', $4 = '1', $5 = 'data', $6 = 'data'\n\n2023-09-26T12:47:13.000+13:00   2023-09-25 23:47:13 UTC:10.20.0.125(28120):database:[4882]:LOG: execute S_1: INSERT INTO database.table  VALUES ($1, $2, $3, $4, $5, $6)\n</code></pre>\n<pre><code>import org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.core.BatchPreparedStatementSetter;\n\n    public int[] batchInsert(List&lt;Book&gt; books) {\n\n        return this.jdbcTemplate.batchUpdate(\n            &quot;insert into books (name, price) values(?,?)&quot;,\n            new BatchPreparedStatementSetter() {\n\n                public void setValues(PreparedStatement ps, int i) throws SQLException {\n                    ps.setString(1, books.get(i).getName());\n                    ps.setBigDecimal(2, books.get(i).getPrice());\n                }\n\n                public int getBatchSize() {\n                    return books.size();\n                }\n\n            });\n    }\n</code></pre>\n<p>From this link: <a href=\"https://mkyong.com/spring/spring-jdbctemplate-batchupdate-example/\" rel=\"nofollow noreferrer\">https://mkyong.com/spring/spring-jdbctemplate-batchupdate-example/</a></p>\n<p>Thank you</p>\n"},{"tags":["java","spring","stored-procedures","websphere","blob"],"answers":[{"tags":[],"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1497427192,"creation_date":1497427192,"answer_id":44538864,"question_id":44279571,"body_markdown":"Problem solved:\r\nI do not need to use Blob object: I can use simple byte[] on Java-side, put it in paramSource and bind that array with OracleTypes.BINARY.\r\nThat works.","title":"Spring Send Blob to Stored Procedure","body":"<p>Problem solved:\nI do not need to use Blob object: I can use simple byte[] on Java-side, put it in paramSource and bind that array with OracleTypes.BINARY.\nThat works.</p>\n"}],"owner":{"account_id":10966372,"reputation":535,"user_id":8057985,"display_name":"DeooK"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1989,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":44538864,"answer_count":1,"score":0,"last_activity_date":1695763598,"creation_date":1496219472,"question_id":44279571,"body_markdown":"I&#39;m trying to send a Blob to a stored procedure without success.\r\nFirst of all, I had some limitations, i.e. I cannot use a prepared statement.\r\n\r\nSecondly, I&#39;m sure that the stored procedure works, because I&#39;ve tried \r\nit with success calling manually the procedure and with prepared statement.\r\n\r\nIf I execute this all works correctly:\r\n\r\n    PreparedStatement ps = con.prepareStatement(&quot;call t1000_adm.Mandamail.manda_mail(?)&quot;);\r\n    file = new File(request.getPathAllegato());\r\n    InputStream fis = new FileInputStream(file);\r\n    ps.setBinaryStream(1, fis, (int)file.length());\r\n    ps.execute();\r\n\r\nBut I&#39;m forced to use Spring MVC with WebSphere application server and I cannot use directly a prepared statement.\r\nI have to use a javax.sql.DataSource and org.springframework.jdbc.core.namedparam.MapSqlParameterSource.\r\n\r\nThis is what I have to do:\r\n\r\n    MapSqlParameterSource paramSource = new MapSqlParameterSource();\r\n    paramSource.addValue(BLOB_NAME, blob);\r\n    CustomStoredProcedure proc = new CustomStoredProcedure( dataSource, storedProcedure); \r\n    proc.execute(paramSource);\r\n\r\nIn CustomStoredProcedure, which extends org.springframework.jdbc.object.StoredProcedure, I have to associate to BLOB_NAME an Oracle Data Type, in this way:\r\n\r\n    public CustomStoredProcedure(DataSource dataSource, String sprocName) {\r\n\t    super(dataSource, sprocName);\r\n\t\tdeclareParameter(new SqlParameter(BLOB_NAME, OracleTypes.BLOB));\r\n\t\tcompile();\r\n\t}\r\n\r\nNow, here&#39;s the problems:\r\n\r\n1) If I try to create the blob object with dataSource.getConnection().createBlob() I receive the error:\r\n \r\n&gt;java.sql.SQLFeatureNotSupportedException: DSRA1300E: Function not implemented: Connection.createBlob \r\n\r\n(the description may be incorrect but I have the localized version and I translated it in English).\r\n\r\n2) If I try to create the blob object with BLOB.createTemporary I receive the error \r\n\r\n&gt;java.lang.ClassCastException: com.ibm.ws.rsadapter.jdbc.WSJdbcConnection incompatible with oracle.jdbc.OracleConnection\r\n\r\n3) If I use \r\n    \r\n    com.ibm.websphere.rsadapter.WSCallHelper.getNativeConnection( dataSource.getConnection)\r\n\r\nI receive the compiling error (only with Ant, with Eclipse I have no problem):\r\n\r\n&gt;error: package com.ibm.websphere.rsadapter not exists\r\n    [javac] import com.ibm.websphere.rsadapter.WSCallHelper\r\n\r\n(as before, I translated the error)\r\n\r\n4) If I ignore the Ant compiling error and use it anyway I receive the execution error:\r\n\r\n&gt;[31/05/17 9.52.50:414 CEST] 0000007f SystemErr     R org.springframework.jdbc.UncategorizedSQLException: CallableStatementCallback; uncategorized SQLException for SQL [{call MANDAMAIL.MANDA_MAIL(?)}]; SQL state [99999]; error code [22922]; ORA-22922: valore LOB non esistente  \r\n    ORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837  \r\n    ORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190  \r\n    ORA-06512: a line 1  \r\n    ; nested exception is java.sql.SQLException: ORA-22922: valore LOB non esistente  \r\n    ORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837  \r\n    ORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190  \r\n    ORA-06512: a line 1  \r\n&gt;    \r\n&gt;    [31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)  \r\n    [31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)  \r\n    [31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)  \r\n    [31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1030)  \r\n    [31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)  \r\n    [31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R \tat org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)  \r\n    [31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R \tat com.bpvn.vieniconnoi.dao.MandaMailStoredProcedure.execute(MandaMailStoredProcedure.java:42)...\r\n\r\nThe line 190 of the procedure is the first occurrance of DBMS_LOB.\r\nThis is the stored procedure (in Java code I&#39;ve removed other params for simplicity).\r\n\r\n    PROCEDURE manda_mail(   destinatario          IN VARCHAR2,\r\n                            cc                    IN VARCHAR2,\r\n                            mittente              IN VARCHAR2,\r\n                            oggetto               IN VARCHAR2,\r\n                            corpo                 IN VARCHAR2 DEFAULT NULL,\r\n                            nomeAllegato          IN VARCHAR2 DEFAULT NULL,\r\n                            allegato              IN BLOB DEFAULT NULL)\r\n    AS\r\n      l_mail_conn   UTL_SMTP.connection;\r\n      l_boundary    VARCHAR2(50) := &#39;----=*#abc1234321cba#*=&#39;;\r\n      l_step        PLS_INTEGER  := 12000; -- make sure you set a multiple of 3 not higher than 24573\r\n      v_mime VARCHAR2(50) := &#39;application/pdf&#39;;\r\n    BEGIN\r\n      l_mail_conn := UTL_SMTP.open_connection(C_SMTP_SERVER, 25);\r\n      UTL_SMTP.helo(l_mail_conn, C_SMTP_SERVER);\r\n      UTL_SMTP.mail(l_mail_conn, mittente);\r\n      UTL_SMTP.rcpt(l_mail_conn, destinatario);\r\n    \r\n      UTL_SMTP.open_data(l_mail_conn);\r\n      \r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Date: &#39; || TO_CHAR(SYSDATE, &#39;DD-MON-YYYY HH24:MI:SS&#39;) || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;To: &#39; || destinatario || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;From: &#39; || mittente || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Subject: &#39; || oggetto || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Reply-To: &#39; || mittente || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;MIME-Version: 1.0&#39; || UTL_TCP.crlf);\r\n      UTL_SMTP.write_data(l_mail_conn, &#39;Content-Type: multipart/mixed; boundary=&quot;&#39; || l_boundary || &#39;&quot;&#39; || UTL_TCP.crlf || UTL_TCP.crlf);\r\n      \r\n      IF corpo IS NOT NULL THEN\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;--&#39; || l_boundary || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Type: text/plain; charset=&quot;iso-8859-1&quot;&#39; || UTL_TCP.crlf || UTL_TCP.crlf);\r\n    \r\n        UTL_SMTP.write_data(l_mail_conn, corpo);\r\n        UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\r\n      END IF;\r\n    \r\n      IF nomeAllegato IS NOT NULL THEN\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;--&#39; || l_boundary || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Type: &#39; || v_mime || &#39;; name=&quot;&#39; || nomeAllegato || &#39;&quot;&#39; || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Transfer-Encoding: base64&#39; || UTL_TCP.crlf);\r\n        UTL_SMTP.write_data(l_mail_conn, &#39;Content-Disposition: attachment; filename=&quot;&#39; || nomeAllegato || &#39;&quot;&#39; || UTL_TCP.crlf || UTL_TCP.crlf);\r\n    \r\n        FOR i IN 0 .. TRUNC((DBMS_LOB.getlength(allegato) - 1 )/l_step) LOOP\r\n          UTL_SMTP.write_data(l_mail_conn, UTL_RAW.cast_to_varchar2(UTL_ENCODE.base64_encode(DBMS_LOB.substr(allegato, l_step, i * l_step + 1))));\r\n        END LOOP;\r\n    \r\n        UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\r\n      END IF;\r\n      \r\n      UTL_SMTP.write_data(l_mail_conn, &#39;--&#39; || l_boundary || &#39;--&#39; || UTL_TCP.crlf);\r\n      UTL_SMTP.close_data(l_mail_conn);\r\n    \r\n      UTL_SMTP.quit(l_mail_conn);\r\n    END;\r\n\r\nTo get this I&#39;ve used the code written before creating the blob object in this way:\r\n\r\n    BLOB blob = BLOB.createTemporary(WSCallHelper.getNativeConnection(dataSource.getConnection()), false, BLOB.DURATION_SESSION);\r\n    FileInputStream is = new FileInputStream(filePath);\r\n    byte[] buffer = new byte[30000000];\r\n    ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n    \r\n    int bytesRead;\r\n    while ((bytesRead = is.read(buffer)) != -1) {\r\n    \tbaos.write(buffer, 0, bytesRead);\r\n    }\r\n    \r\n    blob.setBytes(1, baos.toByteArray());\t\t\r\n\r\nAny suggestions?","title":"Spring Send Blob to Stored Procedure","body":"<p>I'm trying to send a Blob to a stored procedure without success.\nFirst of all, I had some limitations, i.e. I cannot use a prepared statement.</p>\n<p>Secondly, I'm sure that the stored procedure works, because I've tried\nit with success calling manually the procedure and with prepared statement.</p>\n<p>If I execute this all works correctly:</p>\n<pre><code>PreparedStatement ps = con.prepareStatement(&quot;call t1000_adm.Mandamail.manda_mail(?)&quot;);\nfile = new File(request.getPathAllegato());\nInputStream fis = new FileInputStream(file);\nps.setBinaryStream(1, fis, (int)file.length());\nps.execute();\n</code></pre>\n<p>But I'm forced to use Spring MVC with WebSphere application server and I cannot use directly a prepared statement.\nI have to use a javax.sql.DataSource and org.springframework.jdbc.core.namedparam.MapSqlParameterSource.</p>\n<p>This is what I have to do:</p>\n<pre><code>MapSqlParameterSource paramSource = new MapSqlParameterSource();\nparamSource.addValue(BLOB_NAME, blob);\nCustomStoredProcedure proc = new CustomStoredProcedure( dataSource, storedProcedure); \nproc.execute(paramSource);\n</code></pre>\n<p>In CustomStoredProcedure, which extends org.springframework.jdbc.object.StoredProcedure, I have to associate to BLOB_NAME an Oracle Data Type, in this way:</p>\n<pre><code>public CustomStoredProcedure(DataSource dataSource, String sprocName) {\n    super(dataSource, sprocName);\n    declareParameter(new SqlParameter(BLOB_NAME, OracleTypes.BLOB));\n    compile();\n}\n</code></pre>\n<p>Now, here's the problems:</p>\n<ol>\n<li>If I try to create the blob object with dataSource.getConnection().createBlob() I receive the error:</li>\n</ol>\n<blockquote>\n<p>java.sql.SQLFeatureNotSupportedException: DSRA1300E: Function not implemented: Connection.createBlob</p>\n</blockquote>\n<p>(the description may be incorrect but I have the localized version and I translated it in English).</p>\n<ol start=\"2\">\n<li>If I try to create the blob object with BLOB.createTemporary I receive the error</li>\n</ol>\n<blockquote>\n<p>java.lang.ClassCastException: com.ibm.ws.rsadapter.jdbc.WSJdbcConnection incompatible with oracle.jdbc.OracleConnection</p>\n</blockquote>\n<ol start=\"3\">\n<li><p>If I use</p>\n<p>com.ibm.websphere.rsadapter.WSCallHelper.getNativeConnection( dataSource.getConnection)</p>\n</li>\n</ol>\n<p>I receive the compiling error (only with Ant, with Eclipse I have no problem):</p>\n<blockquote>\n<p>error: package com.ibm.websphere.rsadapter not exists\n[javac] import com.ibm.websphere.rsadapter.WSCallHelper</p>\n</blockquote>\n<p>(as before, I translated the error)</p>\n<ol start=\"4\">\n<li>If I ignore the Ant compiling error and use it anyway I receive the execution error:</li>\n</ol>\n<blockquote>\n<p>[31/05/17 9.52.50:414 CEST] 0000007f SystemErr     R org.springframework.jdbc.UncategorizedSQLException: CallableStatementCallback; uncategorized SQLException for SQL [{call MANDAMAIL.MANDA_MAIL(?)}]; SQL state [99999]; error code [22922]; ORA-22922: valore LOB non esistente<br />\nORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837<br />\nORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190<br />\nORA-06512: a line 1<br />\n; nested exception is java.sql.SQLException: ORA-22922: valore LOB non esistente<br />\nORA-06512: a &quot;SYS.DBMS_LOB&quot;, line 837<br />\nORA-06512: a &quot;T1000_ADM.MANDAMAIL&quot;, line 190<br />\nORA-06512: a line 1</p>\n<p>[31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R   at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)<br />\n[31/05/17 9.52.50:415 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)<br />\n[31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:80)<br />\n[31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.core.JdbcTemplate.execute(JdbcTemplate.java:1030)<br />\n[31/05/17 9.52.50:416 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.core.JdbcTemplate.call(JdbcTemplate.java:1064)<br />\n[31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R    at org.springframework.jdbc.object.StoredProcedure.execute(StoredProcedure.java:144)<br />\n[31/05/17 9.52.50:417 CEST] 0000007f SystemErr     R    at com.bpvn.vieniconnoi.dao.MandaMailStoredProcedure.execute(MandaMailStoredProcedure.java:42)...</p>\n</blockquote>\n<p>The line 190 of the procedure is the first occurrance of DBMS_LOB.\nThis is the stored procedure (in Java code I've removed other params for simplicity).</p>\n<pre><code>PROCEDURE manda_mail(   destinatario          IN VARCHAR2,\n                        cc                    IN VARCHAR2,\n                        mittente              IN VARCHAR2,\n                        oggetto               IN VARCHAR2,\n                        corpo                 IN VARCHAR2 DEFAULT NULL,\n                        nomeAllegato          IN VARCHAR2 DEFAULT NULL,\n                        allegato              IN BLOB DEFAULT NULL)\nAS\n  l_mail_conn   UTL_SMTP.connection;\n  l_boundary    VARCHAR2(50) := '----=*#abc1234321cba#*=';\n  l_step        PLS_INTEGER  := 12000; -- make sure you set a multiple of 3 not higher than 24573\n  v_mime VARCHAR2(50) := 'application/pdf';\nBEGIN\n  l_mail_conn := UTL_SMTP.open_connection(C_SMTP_SERVER, 25);\n  UTL_SMTP.helo(l_mail_conn, C_SMTP_SERVER);\n  UTL_SMTP.mail(l_mail_conn, mittente);\n  UTL_SMTP.rcpt(l_mail_conn, destinatario);\n\n  UTL_SMTP.open_data(l_mail_conn);\n  \n  UTL_SMTP.write_data(l_mail_conn, 'Date: ' || TO_CHAR(SYSDATE, 'DD-MON-YYYY HH24:MI:SS') || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'To: ' || destinatario || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'From: ' || mittente || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'Subject: ' || oggetto || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'Reply-To: ' || mittente || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'MIME-Version: 1.0' || UTL_TCP.crlf);\n  UTL_SMTP.write_data(l_mail_conn, 'Content-Type: multipart/mixed; boundary=&quot;' || l_boundary || '&quot;' || UTL_TCP.crlf || UTL_TCP.crlf);\n  \n  IF corpo IS NOT NULL THEN\n    UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Type: text/plain; charset=&quot;iso-8859-1&quot;' || UTL_TCP.crlf || UTL_TCP.crlf);\n\n    UTL_SMTP.write_data(l_mail_conn, corpo);\n    UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\n  END IF;\n\n  IF nomeAllegato IS NOT NULL THEN\n    UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Type: ' || v_mime || '; name=&quot;' || nomeAllegato || '&quot;' || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Transfer-Encoding: base64' || UTL_TCP.crlf);\n    UTL_SMTP.write_data(l_mail_conn, 'Content-Disposition: attachment; filename=&quot;' || nomeAllegato || '&quot;' || UTL_TCP.crlf || UTL_TCP.crlf);\n\n    FOR i IN 0 .. TRUNC((DBMS_LOB.getlength(allegato) - 1 )/l_step) LOOP\n      UTL_SMTP.write_data(l_mail_conn, UTL_RAW.cast_to_varchar2(UTL_ENCODE.base64_encode(DBMS_LOB.substr(allegato, l_step, i * l_step + 1))));\n    END LOOP;\n\n    UTL_SMTP.write_data(l_mail_conn, UTL_TCP.crlf || UTL_TCP.crlf);\n  END IF;\n  \n  UTL_SMTP.write_data(l_mail_conn, '--' || l_boundary || '--' || UTL_TCP.crlf);\n  UTL_SMTP.close_data(l_mail_conn);\n\n  UTL_SMTP.quit(l_mail_conn);\nEND;\n</code></pre>\n<p>To get this I've used the code written before creating the blob object in this way:</p>\n<pre><code>BLOB blob = BLOB.createTemporary(WSCallHelper.getNativeConnection(dataSource.getConnection()), false, BLOB.DURATION_SESSION);\nFileInputStream is = new FileInputStream(filePath);\nbyte[] buffer = new byte[30000000];\nByteArrayOutputStream baos = new ByteArrayOutputStream();\n\nint bytesRead;\nwhile ((bytesRead = is.read(buffer)) != -1) {\n    baos.write(buffer, 0, bytesRead);\n}\n\nblob.setBytes(1, baos.toByteArray());       \n</code></pre>\n<p>Any suggestions?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":7089168,"reputation":157141,"user_id":5424988,"display_name":"The fourth bird"},"score":1,"creation_date":1695756581,"post_id":77182842,"comment_id":136066339,"body_markdown":"Perhaps like `^https?://\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[/?#]\\S*)?$` See https://regex101.com/r/cjFaXl/1 In Java you would have to double escape the backslashes like `\\\\.fun` etc..","body":"Perhaps like <code>^https?:&#47;&#47;\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[&#47;?#]\\S*)?$</code> See <a href=\"https://regex101.com/r/cjFaXl/1\" rel=\"nofollow noreferrer\">regex101.com/r/cjFaXl/1</a> In Java you would have to double escape the backslashes like <code>\\\\.fun</code> etc.."},{"owner":{"account_id":3847859,"reputation":7139,"user_id":3188761,"accept_rate":55,"display_name":"90abyss"},"score":1,"creation_date":1695758698,"post_id":77182842,"comment_id":136066674,"body_markdown":"thanks @Thefourthbird! that is working","body":"thanks @Thefourthbird! that is working"},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":2,"creation_date":1695760869,"post_id":77182842,"comment_id":136067047,"body_markdown":"Do you have to use a regular expression for this?  `URI.create(httpRequest.getRequestURL().toString()).getHost().endsWith(&quot;.fun.foo.bar.net&quot;)` will do the same thing.","body":"Do you have to use a regular expression for this?  <code>URI.create(httpRequest.getRequestURL().toString()).getHost()&zwnj;&#8203;.endsWith(&quot;.fun.foo.&zwnj;&#8203;bar.net&quot;)</code> will do the same thing."},{"owner":{"account_id":3847859,"reputation":7139,"user_id":3188761,"accept_rate":55,"display_name":"90abyss"},"score":0,"creation_date":1695767173,"post_id":77182842,"comment_id":136067826,"body_markdown":"@VGR thats a great idea! thanks","body":"@VGR thats a great idea! thanks"}],"answers":[{"tags":[],"owner":{"account_id":7089168,"reputation":157141,"user_id":5424988,"display_name":"The fourth bird"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695759683,"creation_date":1695759683,"answer_id":77183175,"question_id":77182842,"body_markdown":"For your example string, you might use:\r\n\r\n    ^https?://\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[/?#]\\S*)?$\r\n\r\nThe pattern matches:\r\n\r\n- `^` Start of string\r\n- `https?://` Match the protocol with optional `s`\r\n- `\\S*` Match optional non whitespace characters\r\n- `\\.fun\\.foo\\.bar\\.net` Match the part of interest (escape the dot to match it literally)\r\n- `(?::\\d+)?` Optionally match the port\r\n- `(?:[/?#]\\S*)?` Optionally match one of `/` `?` `#` followed by optional non whitespace characters\r\n- `$` End of string\r\n\r\n[Regex demo](https://regex101.com/r/cjFaXl/1)\r\n\r\nIn Java with the doubled backslashes:\r\n\r\n    String regex = &quot;^https?://\\\\S*\\\\.fun\\\\.foo\\\\.bar\\\\.net(?::\\\\d+)?(?:[/?#]\\\\S*)?$&quot;;","title":"Create a filter for URL that follows a specific format","body":"<p>For your example string, you might use:</p>\n<pre><code>^https?://\\S*\\.fun\\.foo\\.bar\\.net(?::\\d+)?(?:[/?#]\\S*)?$\n</code></pre>\n<p>The pattern matches:</p>\n<ul>\n<li><code>^</code> Start of string</li>\n<li><code>https?://</code> Match the protocol with optional <code>s</code></li>\n<li><code>\\S*</code> Match optional non whitespace characters</li>\n<li><code>\\.fun\\.foo\\.bar\\.net</code> Match the part of interest (escape the dot to match it literally)</li>\n<li><code>(?::\\d+)?</code> Optionally match the port</li>\n<li><code>(?:[/?#]\\S*)?</code> Optionally match one of <code>/</code> <code>?</code> <code>#</code> followed by optional non whitespace characters</li>\n<li><code>$</code> End of string</li>\n</ul>\n<p><a href=\"https://regex101.com/r/cjFaXl/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n<p>In Java with the doubled backslashes:</p>\n<pre><code>String regex = &quot;^https?://\\\\S*\\\\.fun\\\\.foo\\\\.bar\\\\.net(?::\\\\d+)?(?:[/?#]\\\\S*)?$&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23740623,"reputation":1,"user_id":17758716,"display_name":"Reilas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695763585,"creation_date":1695760882,"answer_id":77183289,"question_id":77182842,"body_markdown":"&gt; _&quot;... I only want to filter in the requests where `w.x.y.z` is strictly:_\r\n&gt;\r\n&gt;     fun.foo.bar.net\r\n&gt; ... &quot;\r\n\r\nYou can simplify your code with a _[Matcher#matches](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#matches())_ call, which can be accessed via _[String#matches](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#matches(java.lang.String))_.\r\n\r\n\r\n&gt; _&quot;... I am trying to do with this but I am not quite sure how do I create the regex. ...&quot;_\r\n\r\nYou can use the following pattern to match the entire text.\\\r\nFor a _match_ call, the starting `^` and ending `$` are optional.\r\n\r\n```none\r\n^http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)$\r\n```\r\n\r\nAs a note, I am presuming you are expecting the _&quot;fun.foo.bar.net&quot;_ to follow two _domain-labels_, _&quot;aa-bb.cc-dd-ee.&quot;_.\\\r\nIf this isn&#39;t the case, change the `{2}` to a `*`.\r\n\r\n```none\r\n^http://(?:[^.]+\\.)*fun\\.foo\\.bar\\.net(?::.+|/.*)$\r\n```\r\n\r\nHere is an example.\r\n\r\n```java\r\nString s = httpRequest.getRequestURL().toString();\r\nString r = &quot;http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)&quot;;\r\nboolean match = s.matches(r);\r\n```","title":"Create a filter for URL that follows a specific format","body":"<blockquote>\n<p><em>&quot;... I only want to filter in the requests where <code>w.x.y.z</code> is strictly:</em></p>\n<pre><code>fun.foo.bar.net\n</code></pre>\n<p>... &quot;</p>\n</blockquote>\n<p>You can simplify your code with a <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/util/regex/Matcher.html#matches()\" rel=\"nofollow noreferrer\">Matcher#matches</a></em> call, which can be accessed via <em><a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/String.html#matches(java.lang.String)\" rel=\"nofollow noreferrer\">String#matches</a></em>.</p>\n<blockquote>\n<p><em>&quot;... I am trying to do with this but I am not quite sure how do I create the regex. ...&quot;</em></p>\n</blockquote>\n<p>You can use the following pattern to match the entire text.<br />\nFor a <em>match</em> call, the starting <code>^</code> and ending <code>$</code> are optional.</p>\n<pre class=\"lang-none prettyprint-override\"><code>^http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)$\n</code></pre>\n<p>As a note, I am presuming you are expecting the <em>&quot;fun.foo.bar.net&quot;</em> to follow two <em>domain-labels</em>, <em>&quot;aa-bb.cc-dd-ee.&quot;</em>.<br />\nIf this isn't the case, change the <code>{2}</code> to a <code>*</code>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>^http://(?:[^.]+\\.)*fun\\.foo\\.bar\\.net(?::.+|/.*)$\n</code></pre>\n<p>Here is an example.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s = httpRequest.getRequestURL().toString();\nString r = &quot;http://(?:[^.]+\\.){2}fun\\.foo\\.bar\\.net(?::.+|/.*)&quot;;\nboolean match = s.matches(r);\n</code></pre>\n"}],"owner":{"account_id":3847859,"reputation":7139,"user_id":3188761,"accept_rate":55,"display_name":"90abyss"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77183175,"answer_count":2,"score":0,"last_activity_date":1695763585,"creation_date":1695755816,"question_id":77182842,"body_markdown":"I have a URL of this form:\r\n\r\n    http://aa-bb.cc-dd-ee.w.x.y.z:8080/funservice/graphql\r\n\r\nI only want to filter in the requests where `w.x.y.z` is strictly:\r\n\r\n    fun.foo.bar.net\r\n\r\nI am trying to do with this but I am not quite sure how do I create the regex. \r\n\r\n    private static final Pattern pat = Pattern.compile(&quot;http(.*?).fun.foo.bar.net(.*?)&quot;);\r\n    \r\n    Matcher matcher = pat.matcher(httpRequest.getRequestURL().toString());\r\n    while (matcher.find()) {\r\n         for (int j = 0; j &lt;= matcher.groupCount(); j++) {\r\n              String temp = matcher.group(j);\r\n           }\r\n    }\r\n                \r\n            \r\n\r\n","title":"Create a filter for URL that follows a specific format","body":"<p>I have a URL of this form:</p>\n<pre><code>http://aa-bb.cc-dd-ee.w.x.y.z:8080/funservice/graphql\n</code></pre>\n<p>I only want to filter in the requests where <code>w.x.y.z</code> is strictly:</p>\n<pre><code>fun.foo.bar.net\n</code></pre>\n<p>I am trying to do with this but I am not quite sure how do I create the regex.</p>\n<pre><code>private static final Pattern pat = Pattern.compile(&quot;http(.*?).fun.foo.bar.net(.*?)&quot;);\n\nMatcher matcher = pat.matcher(httpRequest.getRequestURL().toString());\nwhile (matcher.find()) {\n     for (int j = 0; j &lt;= matcher.groupCount(); j++) {\n          String temp = matcher.group(j);\n       }\n}\n            \n        \n</code></pre>\n"},{"tags":["java","android","delphi","cloud","google-cloud-messaging"],"comments":[{"owner":{"account_id":3312412,"reputation":381,"user_id":2785563,"accept_rate":25,"display_name":"FerretDriver"},"score":0,"creation_date":1379438928,"post_id":18838485,"comment_id":27822685,"body_markdown":"I&#39;m posting the registration information to some processing scripts on a web server. When I need to communicate to GCM I have a server side process which handles that which is in Delphi.","body":"I&#39;m posting the registration information to some processing scripts on a web server. When I need to communicate to GCM I have a server side process which handles that which is in Delphi."}],"answers":[{"tags":[],"owner":{"account_id":1146772,"reputation":31458,"user_id":1129332,"accept_rate":61,"display_name":"Ilya Gazman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390488970,"creation_date":1390488970,"answer_id":21311640,"question_id":18838485,"body_markdown":"I think that creating a bridge to Java could be a good idea. Take a look at [this][1] post about how to do it. And [here][2] you can find a tutorial for implementing client side GCM in Java.\r\n\r\n\r\n  [1]: http://www.pclviewer.com/android/androidJNI.html\r\n  [2]: http://developer.android.com/google/gcm/client.html","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I think that creating a bridge to Java could be a good idea. Take a look at <a href=\"http://www.pclviewer.com/android/androidJNI.html\" rel=\"nofollow\">this</a> post about how to do it. And <a href=\"http://developer.android.com/google/gcm/client.html\" rel=\"nofollow\">here</a> you can find a tutorial for implementing client side GCM in Java.</p>\n"},{"comments":[{"owner":{"account_id":278600,"reputation":106366,"user_id":573261,"accept_rate":68,"display_name":"RichardTheKiwi"},"score":0,"creation_date":1390861953,"post_id":21377021,"comment_id":32267589,"body_markdown":"A little too broad, but I will add an upvote and when the bounty period expires, the top voted answer should get half of it.","body":"A little too broad, but I will add an upvote and when the bounty period expires, the top voted answer should get half of it."},{"owner":{"account_id":930843,"reputation":75387,"user_id":960757,"accept_rate":95,"display_name":"TLama"},"score":0,"creation_date":1391036947,"post_id":21377021,"comment_id":32358233,"body_markdown":"That smooth communication article seems to be about 13 years old. I hope there are more &quot;native&quot; ways to do it in Delphi XE5.","body":"That smooth communication article seems to be about 13 years old. I hope there are more &quot;native&quot; ways to do it in Delphi XE5."},{"owner":{"account_id":3616503,"reputation":7466,"user_id":3016219,"display_name":"Avanz"},"score":1,"creation_date":1391049826,"post_id":21377021,"comment_id":32362505,"body_markdown":"@TLama - for a more trendy &quot;native&quot; flavour, have a look on Embarcadero alternative: http://www.embarcadero.com/press-releases/embarcadero-launches-rad-studio-xe5-with-android-and-ios-support","body":"@TLama - for a more trendy &quot;native&quot; flavour, have a look on Embarcadero alternative: <a href=\"http://www.embarcadero.com/press-releases/embarcadero-launches-rad-studio-xe5-with-android-and-ios-support\" rel=\"nofollow noreferrer\">embarcadero.com/press-releases/&hellip;</a>"}],"tags":[],"owner":{"account_id":3616503,"reputation":7466,"user_id":3016219,"display_name":"Avanz"},"comment_count":3,"down_vote_count":1,"up_vote_count":21,"is_accepted":false,"score":20,"last_activity_date":1390870351,"creation_date":1390814466,"answer_id":21377021,"question_id":18838485,"body_markdown":"You interface Java with Delphi using JNI. The JNI allows you to call in both directions: Java to Delphi or Delphi to Java. So you can extend your Delphi applications with [Java classes][1].\r\n\r\nFor implementing what you want on Android, doing it in Java will be the easier path to follow, as some available examples do exactly what you have in mind. Just have a look:\r\n\r\n - [Implementing Push Notification / Google Cloud Messaging for Android][2]\r\n - [Android* Client App Using Cloud-Based Alert Service][3]\r\n - [Github Gist - GCMIntentService.java][4]\r\n\r\nTo interface Java JNI and Delphi, you can follow detailed steps, thus allowing a [smooth communication][5] between front end and back end of your application.\r\n\r\nIf you decide to re-use some of the code, remember to give appropriate credit to the authors.\r\n\r\n\r\n  [1]: http://edn.embarcadero.com/article/27192\r\n  [2]: http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm\r\n  [3]: http://software.intel.com/en-us/articles/a-case-study-of-an-android-client-app-using-cloud-based-alert-service\r\n  [4]: https://gist.github.com/okiess/3156229\r\n  [5]: http://www.pacifier.com/~mmead/jni/delphi/JEDI/DOCS/delphi-jni-1.html","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>You interface Java with Delphi using JNI. The JNI allows you to call in both directions: Java to Delphi or Delphi to Java. So you can extend your Delphi applications with <a href=\"http://edn.embarcadero.com/article/27192\" rel=\"noreferrer\">Java classes</a>.</p>\n\n<p>For implementing what you want on Android, doing it in Java will be the easier path to follow, as some available examples do exactly what you have in mind. Just have a look:</p>\n\n<ul>\n<li><a href=\"http://fryerblog.com/post/30057483199/implementing-push-notifications-with-gcm\" rel=\"noreferrer\">Implementing Push Notification / Google Cloud Messaging for Android</a></li>\n<li><a href=\"http://software.intel.com/en-us/articles/a-case-study-of-an-android-client-app-using-cloud-based-alert-service\" rel=\"noreferrer\">Android* Client App Using Cloud-Based Alert Service</a></li>\n<li><a href=\"https://gist.github.com/okiess/3156229\" rel=\"noreferrer\">Github Gist - GCMIntentService.java</a></li>\n</ul>\n\n<p>To interface Java JNI and Delphi, you can follow detailed steps, thus allowing a <a href=\"http://www.pacifier.com/~mmead/jni/delphi/JEDI/DOCS/delphi-jni-1.html\" rel=\"noreferrer\">smooth communication</a> between front end and back end of your application.</p>\n\n<p>If you decide to re-use some of the code, remember to give appropriate credit to the authors.</p>\n"},{"tags":[],"owner":{"account_id":236130,"reputation":5021,"user_id":503413,"accept_rate":78,"display_name":"Olimpiu POP"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390916058,"creation_date":1390916058,"answer_id":21407022,"question_id":18838485,"body_markdown":"I am glad to see delphi is evolving and adapting to current needs. The post made me curios so I looked around a little bit so I came across these resources:\r\n\r\n[forum post on embarcadero][1] that recommends using [datasnap][2] to solve the communication issue between GCM and the delphi side.\r\n\r\nI hope this will help somebody.\r\n\r\n\r\n[1]:https://forums.embarcadero.com/thread.jspa?threadID=93361\r\n[2]:http://docwiki.embarcadero.com/RADStudio/XE5/en/Developing_DataSnap_Applications","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I am glad to see delphi is evolving and adapting to current needs. The post made me curios so I looked around a little bit so I came across these resources:</p>\n\n<p><a href=\"https://forums.embarcadero.com/thread.jspa?threadID=93361\" rel=\"nofollow\">forum post on embarcadero</a> that recommends using <a href=\"http://docwiki.embarcadero.com/RADStudio/XE5/en/Developing_DataSnap_Applications\" rel=\"nofollow\">datasnap</a> to solve the communication issue between GCM and the delphi side.</p>\n\n<p>I hope this will help somebody.</p>\n"},{"comments":[{"owner":{"account_id":1532531,"reputation":36089,"user_id":1429387,"accept_rate":63,"display_name":"naXa stands with Ukraine"},"score":0,"creation_date":1396124242,"post_id":21444622,"comment_id":34652920,"body_markdown":"may I suggest you to use quotes around path parameters in your batch file? The var %PROJ_DIR% (*from where the script is executing*) can contain spaces.","body":"may I suggest you to use quotes around path parameters in your batch file? The var %PROJ_DIR% (<i>from where the script is executing</i>) can contain spaces."},{"owner":{"account_id":71647,"reputation":1212,"user_id":207219,"accept_rate":83,"display_name":"ioan ghip"},"score":0,"creation_date":1412102712,"post_id":21444622,"comment_id":40951328,"body_markdown":"@Touregsys I don&#39;t have xe6, but if you describe your problem maybe  I can help.","body":"@Touregsys I don&#39;t have xe6, but if you describe your problem maybe  I can help."},{"owner":{"display_name":"user2846400"},"score":0,"creation_date":1412161175,"post_id":21444622,"comment_id":40972658,"body_markdown":"@ioan app worked on real device. but on emulator app doesnt open. another problem i can receive message from gcm but if i touch the tmemo or tedit the app close. I dont understand why","body":"@ioan app worked on real device. but on emulator app doesnt open. another problem i can receive message from gcm but if i touch the tmemo or tedit the app close. I dont understand why"},{"owner":{"account_id":559510,"reputation":577,"user_id":921804,"display_name":"liquid_code"},"score":0,"creation_date":1450256379,"post_id":21444622,"comment_id":56356916,"body_markdown":"Is there any way to get activity context from java code?","body":"Is there any way to get activity context from java code?"},{"owner":{"account_id":3312412,"reputation":381,"user_id":2785563,"accept_rate":25,"display_name":"FerretDriver"},"score":1,"creation_date":1456344719,"post_id":21444622,"comment_id":58908135,"body_markdown":"Anyone get this running in Delphi 10? I see an XE 8 example but running it in Seattle doesnt seem to work.","body":"Anyone get this running in Delphi 10? I see an XE 8 example but running it in Seattle doesnt seem to work."},{"owner":{"account_id":528,"reputation":15197,"user_id":685,"accept_rate":89,"display_name":"BIBD"},"score":0,"creation_date":1456350399,"post_id":21444622,"comment_id":58911359,"body_markdown":"@FerretDriver I found this helpful (http://delphi.org/2014/12/mobile-push-notifications-without-a-baas/) but I&#39;m still running into a problem with the GCMReciever.Jar (I&#39;m getting a message about a Service tag missing the attribute &quot;name&quot;). Also in Seattle. Same error?","body":"@FerretDriver I found this helpful (<a href=\"http://delphi.org/2014/12/mobile-push-notifications-without-a-baas/\" rel=\"nofollow noreferrer\">delphi.org/2014/12/mobile-push-notifications-without-a-baas</a>&zwnj;&#8203;) but I&#39;m still running into a problem with the GCMReciever.Jar (I&#39;m getting a message about a Service tag missing the attribute &quot;name&quot;). Also in Seattle. Same error?"},{"owner":{"account_id":3312412,"reputation":381,"user_id":2785563,"accept_rate":25,"display_name":"FerretDriver"},"score":1,"creation_date":1456367251,"post_id":21444622,"comment_id":58917435,"body_markdown":"@BIBD I got GCM running in Delphi (I already had a android app with GCM so I had very little setup), it is much simpler than the above. See my answer here, I link to the original answer with the one modification needed to get it to work. : http://stackoverflow.com/questions/35590533/gcm-in-delphi-seattle-without-baas/","body":"@BIBD I got GCM running in Delphi (I already had a android app with GCM so I had very little setup), it is much simpler than the above. See my answer here, I link to the original answer with the one modification needed to get it to work. : <a href=\"http://stackoverflow.com/questions/35590533/gcm-in-delphi-seattle-without-baas/\" title=\"gcm in delphi seattle without baas\">stackoverflow.com/questions/35590533/&hellip;</a>"}],"tags":[],"owner":{"account_id":71647,"reputation":1212,"user_id":207219,"accept_rate":83,"display_name":"ioan ghip"},"comment_count":7,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1695762940,"creation_date":1391036786,"answer_id":21444622,"question_id":18838485,"body_markdown":"I got GCM working with Delphi and [I made a sample component][1] to take care of registering and receiving the GCM messages.\r\n\r\n**NOTE**: This is just a rough test code, I&#39;m not using it in any real application (yet). Please fell free to modify and improve, and if you find bugs, please post back.\r\n\r\nBig thanks to Brian Long and his article on [Android Services][2].\r\n\r\nGet your GCM sender ID (it&#39;s your Project Number from gcm console) and your GCM API id (create a key for server application in GCM console), you&#39;ll need them (see the pictures at the bottom).\r\n\r\nFirst of all, you need a modified classes.dex file. You can create this by running the bat file Java dir in the archive, or you can use the one that is already compiled by me (also included in the archive). \r\n\r\nYou have to **ADD** the new classes.dex to your Android Deployment and **UNCHECK** the embarcadero one: \r\n\r\n[![classes.dex deployment][3]][3]\r\n\r\nThen, you need to edit your AndroidManifest.template.xml and add right after `&lt;%uses-permission%&gt;`:\r\n\r\n    &lt;%uses-permission%&gt;\r\n    &lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\r\n\r\nand right after `android:theme=&quot;%theme%&quot;&gt;`\r\n\r\n        &lt;receiver\r\n            android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\r\n            android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\r\n                &lt;category android:name=&quot;%package%&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/receiver&gt;\r\n\r\n\r\nIn your application, declare the gcmnotification unit:\r\n\r\n    uses\r\n      gcmnotification;\r\n\r\n\r\n\r\nand then in your form declare a variable of the TGCMNotification type and a procedure that you will link to the TGCMNotification.OnReceiveGCMNotification event:\r\n\r\n    type\r\n      TForm8 = class(TForm)\r\n        //....\r\n      private\r\n        { Private declarations }\r\n      public\r\n        { Public declarations }\r\n        gcmn: TGCMNotification;\r\n        procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\r\n      end;\r\n\r\n\r\n    procedure TForm8.FormCreate(Sender: TObject);\r\n    begin\r\n       gcmn := TGCMNotification.Create(self);\r\n       gcmn.OnReceiveGCMNotification := OnNotification;\r\n    end;\r\n\r\nPut in the SenderID your GCM Project Number. To register you APP with GCM, call DoRegister:\r\n\r\n    procedure TForm8.Button1Click(Sender: TObject);\r\n    begin\r\n      gcmn.SenderID := YOUR_GCM_SENDERID;\r\n      if gcmn.DoRegister then\r\n        Toast(&#39;Successfully registered with GCM.&#39;);\r\n    end;\r\n\r\nIf the DoRegister returns true (successfully registered), gcmn.RegistrationID will have the unique ID you need for sending messages to this device.\r\n\r\nAnd you&#39;ll receive messages in event procedure:\r\n\r\n    procedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\r\n    begin\r\n      Memo1.Lines.Add(&#39;Received: &#39; + ANotification.Body);\r\n    end;\r\n\r\n.. and that&#39;s **ALL** you need it for Receiving. Cool, huh? :-)\r\n\r\n\r\n\r\nTo send, just use TIdHttp:\r\n\r\n    procedure TForm8.Button2Click(Sender: TObject);\r\n    const\r\n      sendUrl = &#39;https://android.googleapis.com/gcm/send&#39;;\r\n    var\r\n      Params: TStringList;\r\n      AuthHeader: STring;\r\n      idHTTP: TIDHTTP;\r\n      SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\r\n    begin\r\n      idHTTP := TIDHTTP.Create(nil);\r\n      try\r\n        SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\r\n        idHTTP.IOHandler := SSLIOHandler;\r\n        idHTTP.HTTPOptions := [];\r\n        Params := TStringList.Create;\r\n        try\r\n          Params.Add(&#39;registration_id=&#39;+ gcmn.RegistrationID);\r\n          Params.Values[&#39;data.message&#39;] := &#39;test: &#39; + FormatDateTime(&#39;yy-mm-dd hh:nn:ss&#39;, Now);\r\n          idHTTP.Request.Host := sendUrl;\r\n          AuthHeader := &#39;Authorization: key=&#39; + YOUR_API_ID;\r\n          idHTTP.Request.CustomHeaders.Add(AuthHeader);\r\n          IdHTTP.Request.ContentType := &#39;application/x-www-form-urlencoded;charset=UTF-8&#39;;\r\n          Memo1.Lines.Add(&#39;Send result: &#39; + idHTTP.Post(sendUrl, Params));\r\n        finally\r\n          Params.Free;\r\n        end;\r\n      finally\r\n        FreeAndNil(idHTTP);\r\n      end;\r\n    end;\r\n\r\nNext I&#39;m going to post the units you need, just save them in the same place with your application (or just download the whole thing from [HERE][1]).\r\n\r\ngcmnotification.pas\r\n\r\n    unit gcmnotification;\r\n    \r\n    interface\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      System.SysUtils,\r\n      System.Classes,\r\n      FMX.Helpers.Android,\r\n      Androidapi.JNI.PlayServices,\r\n      Androidapi.JNI.GraphicsContentViewText,\r\n      Androidapi.JNIBridge,\r\n      Androidapi.JNI.JavaTypes;\r\n    \r\n    type\r\n      TGCMNotificationMessageKind = (nmMESSAGE_TYPE_MESSAGE, nmMESSAGE_TYPE_DELETED, nmMESSAGE_TYPE_SEND_ERROR);\r\n    \r\n      { Discription of notification for Notification Center }\r\n      TGCMNotificationMessage = class (TPersistent)\r\n      private\r\n        FKind: TGCMNotificationMessageKind;\r\n        FSender: string;\r\n        FWhat: integer;\r\n        FBody: string;\r\n      protected\r\n        procedure AssignTo(Dest: TPersistent); override;\r\n      public\r\n        { Unique identificator for determenation notification in Notification list }\r\n        property Kind: TGCMNotificationMessageKind read FKind write FKind;\r\n        property Sender: string read FSender write FSender;\r\n        property What: integer read FWhat write FWhat;\r\n        property Body: string read FBody write FBody;\r\n        constructor Create;\r\n      end;\r\n    \r\n      TOnReceiveGCMNotification = procedure (Sender: TObject; ANotification: TGCMNotificationMessage) of object;\r\n    \r\n      TGCMNotification = class(TComponent)\r\n      strict private\r\n        { Private declarations }\r\n        FRegistrationID: string;\r\n        FSenderID: string;\r\n        FOnReceiveGCMNotification: TOnReceiveGCMNotification;\r\n        FReceiver: JBroadcastReceiver;\r\n        FAlreadyRegistered: boolean;\r\n        function CheckPlayServicesSupport: boolean;\r\n      protected\r\n        { Protected declarations }\r\n      public\r\n        { Public declarations }\r\n        constructor Create(AOwner: TComponent); override;\r\n        destructor Destroy; override;\r\n        function DoRegister: boolean;\r\n        function GetGCMInstance: JGoogleCloudMessaging;\r\n      published\r\n        { Published declarations }\r\n        property SenderID: string read FSenderID write FSenderID;\r\n        property RegistrationID: string read FRegistrationID write FRegistrationID;\r\n        property OnReceiveGCMNotification: TOnReceiveGCMNotification read FOnReceiveGCMNotification write FOnReceiveGCMNotification;\r\n      end;\r\n    \r\n    {$ENDIF}\r\n    implementation\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      uGCMReceiver;\r\n    \r\n    \r\n    { TGCMNotification }\r\n    function TGCMNotification.CheckPlayServicesSupport: boolean;\r\n    var\r\n      resultCode: integer;\r\n    begin\r\n      resultCode := TJGooglePlayServicesUtil.JavaClass.isGooglePlayServicesAvailable(SharedActivity);\r\n      result := (resultCode = TJConnectionResult.JavaClass.SUCCESS);\r\n    end;\r\n    \r\n    constructor TGCMNotification.Create(AOwner: TComponent);\r\n    var\r\n      Filter: JIntentFilter;\r\n    begin\r\n      inherited;\r\n      Filter := TJIntentFilter.Create;\r\n      FReceiver := TJGCMReceiver.Create(Self);\r\n      SharedActivity.registerReceiver(FReceiver, Filter);\r\n      FAlreadyRegistered := false;\r\n    end;\r\n    \r\n    destructor TGCMNotification.Destroy;\r\n    begin\r\n      SharedActivity.unregisterReceiver(FReceiver);\r\n      FReceiver := nil;\r\n      inherited;\r\n    end;\r\n    \r\n    function TGCMNotification.DoRegister: boolean;\r\n    var\r\n      p: TJavaObjectArray&lt;JString&gt;;\r\n      gcm: JGoogleCloudMessaging;\r\n    begin\r\n      if FAlreadyRegistered then\r\n        result := true\r\n      else\r\n      begin\r\n        if CheckPlayServicesSupport then\r\n        begin\r\n          gcm := GetGCMInstance;\r\n          p := TJavaObjectArray&lt;JString&gt;.Create(1);\r\n          p.Items[0] := StringToJString(FSenderID);\r\n          FRegistrationID := JStringToString(gcm.register(p));\r\n          FAlreadyRegistered := (FRegistrationID &lt;&gt; &#39;&#39;);\r\n          result := FAlreadyRegistered;\r\n        end\r\n        else\r\n          result := false;\r\n      end;\r\n    end;\r\n    \r\n    function TGCMNotification.GetGCMInstance: JGoogleCloudMessaging;\r\n    begin\r\n      result := TJGoogleCloudMessaging.JavaClass.getInstance(SharedActivity.getApplicationContext);\r\n    end;\r\n    \r\n    { TGCMNotificationMessage }\r\n    \r\n    procedure TGCMNotificationMessage.AssignTo(Dest: TPersistent);\r\n    var\r\n      DestNotification: TGCMNotificationMessage;\r\n    begin\r\n      if Dest is TGCMNotificationMessage then\r\n      begin\r\n        DestNotification := Dest as TGCMNotificationMessage;\r\n        DestNotification.Kind := Kind;\r\n        DestNotification.What := What;\r\n        DestNotification.Sender := Sender;\r\n        DestNotification.Body := Body;\r\n      end\r\n      else\r\n        inherited AssignTo(Dest);\r\n    end;\r\n    \r\n    constructor TGCMNotificationMessage.Create;\r\n    begin\r\n      Body := &#39;&#39;;\r\n    end;\r\n    {$ENDIF}\r\n    end.\r\n\r\nuGCMReceiver.pas\r\n\r\n    unit uGCMReceiver;\r\n    \r\n    interface\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      FMX.Types,\r\n      Androidapi.JNIBridge,\r\n      Androidapi.JNI.GraphicsContentViewText,\r\n      gcmnotification;\r\n    \r\n    type\r\n      JGCMReceiverClass = interface(JBroadcastReceiverClass)\r\n      [&#39;{9D967671-9CD8-483A-98C8-161071CE7B64}&#39;]\r\n        {Methods}\r\n      end;\r\n    \r\n      [JavaSignature(&#39;com/ioan/delphi/GCMReceiver&#39;)]\r\n      JGCMReceiver = interface(JBroadcastReceiver)\r\n      [&#39;{4B30D537-5221-4451-893D-7916ED11CE1F}&#39;]\r\n        {Methods}\r\n      end;\r\n    \r\n    \r\n      TJGCMReceiver = class(TJavaGenericImport&lt;JGCMReceiverClass, JGCMReceiver&gt;)\r\n      private\r\n        FOwningComponent: TGCMNotification;\r\n      protected\r\n        constructor _Create(AOwner: TGCMNotification);\r\n      public\r\n        class function Create(AOwner: TGCMNotification): JGCMReceiver;\r\n        procedure OnReceive(Context: JContext; ReceivedIntent: JIntent);\r\n      end;\r\n    {$ENDIF}\r\n    implementation\r\n    {$IFDEF ANDROID}\r\n    uses\r\n      System.Classes,\r\n      System.SysUtils,\r\n      FMX.Helpers.Android,\r\n      Androidapi.NativeActivity,\r\n      Androidapi.JNI,\r\n      Androidapi.JNI.JavaTypes,\r\n      Androidapi.JNI.Os,\r\n      Androidapi.JNI.PlayServices;\r\n    \r\n    {$REGION &#39;JNI setup code and callback&#39;}\r\n    var\r\n      GCMReceiver: TJGCMReceiver;\r\n      ARNContext: JContext;\r\n      ARNReceivedIntent: JIntent;\r\n    \r\n    procedure GCMReceiverOnReceiveThreadSwitcher;\r\n    begin\r\n      Log.d(&#39;+gcmReceiverOnReceiveThreadSwitcher&#39;);\r\n      Log.d(&#39;Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)&#39;,\r\n        [MainThreadID, TThread.CurrentThread.ThreadID,\r\n        TJThread.JavaClass.CurrentThread.getId]);\r\n      GCMReceiver.OnReceive(ARNContext,ARNReceivedIntent );\r\n      Log.d(&#39;-gcmReceiverOnReceiveThreadSwitcher&#39;);\r\n    end;\r\n    \r\n    //This is called from the Java activity&#39;s onReceiveNative() method\r\n    procedure GCMReceiverOnReceiveNative(PEnv: PJNIEnv; This: JNIObject; JNIContext, JNIReceivedIntent: JNIObject); cdecl;\r\n    begin\r\n      Log.d(&#39;+gcmReceiverOnReceiveNative&#39;);\r\n      Log.d(&#39;Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)&#39;,\r\n        [MainThreadID, TThread.CurrentThread.ThreadID,\r\n        TJThread.JavaClass.CurrentThread.getId]);\r\n      ARNContext := TJContext.Wrap(JNIContext);\r\n      ARNReceivedIntent := TJIntent.Wrap(JNIReceivedIntent);\r\n      Log.d(&#39;Calling Synchronize&#39;);\r\n      TThread.Synchronize(nil, GCMReceiverOnReceiveThreadSwitcher);\r\n      Log.d(&#39;Synchronize is over&#39;);\r\n      Log.d(&#39;-gcmReceiverOnReceiveNative&#39;);\r\n    end;\r\n    \r\n    procedure RegisterDelphiNativeMethods;\r\n    var\r\n      PEnv: PJNIEnv;\r\n      ReceiverClass: JNIClass;\r\n      NativeMethod: JNINativeMethod;\r\n    begin\r\n      Log.d(&#39;Starting the GCMReceiver JNI stuff&#39;);\r\n    \r\n      PEnv := TJNIResolver.GetJNIEnv;\r\n    \r\n      Log.d(&#39;Registering interop methods&#39;);\r\n    \r\n      NativeMethod.Name := &#39;gcmReceiverOnReceiveNative&#39;;\r\n      NativeMethod.Signature := &#39;(Landroid/content/Context;Landroid/content/Intent;)V&#39;;\r\n      NativeMethod.FnPtr := @GCMReceiverOnReceiveNative;\r\n    \r\n      ReceiverClass := TJNIResolver.GetJavaClassID(&#39;com.ioan.delphi.GCMReceiver&#39;);\r\n    \r\n      PEnv^.RegisterNatives(PEnv, ReceiverClass, @NativeMethod, 1);\r\n    \r\n      PEnv^.DeleteLocalRef(PEnv, ReceiverClass);\r\n    end;\r\n    {$ENDREGION}\r\n    \r\n    { TActivityReceiver }\r\n    \r\n    constructor TJGCMReceiver._Create(AOwner: TGCMNotification);\r\n    begin\r\n      inherited;\r\n      FOwningComponent := AOwner;\r\n      Log.d(&#39;TJGCMReceiver._Create constructor&#39;);\r\n    end;\r\n    \r\n    class function TJGCMReceiver.Create(AOwner: TGCMNotification): JGCMReceiver;\r\n    begin\r\n      Log.d(&#39;TJGCMReceiver.Create class function&#39;);\r\n      Result := inherited Create;\r\n      GCMReceiver := TJGCMReceiver._Create(AOwner);\r\n    end;\r\n    \r\n    procedure TJGCMReceiver.OnReceive(Context: JContext;  ReceivedIntent: JIntent);\r\n    var\r\n      extras: JBundle;\r\n      gcm: JGoogleCloudMessaging;\r\n      messageType: JString;\r\n      noti: TGCMNotificationMessage;\r\n    begin\r\n      if Assigned(FOwningComponent.OnReceiveGCMNotification) then\r\n      begin\r\n        noti := TGCMNotificationMessage.Create;\r\n        try\r\n          Log.d(&#39;Received a message!&#39;);\r\n          extras := ReceivedIntent.getExtras();\r\n          gcm := FOwningComponent.GetGCMInstance;\r\n          // The getMessageType() intent parameter must be the intent you received\r\n          // in your BroadcastReceiver.\r\n          messageType := gcm.getMessageType(ReceivedIntent);\r\n          if not extras.isEmpty() then\r\n          begin\r\n              {*\r\n               * Filter messages based on message type. Since it is likely that GCM will be\r\n               * extended in the future with new message types, just ignore any message types you&#39;re\r\n               * not interested in, or that you don&#39;t recognize.\r\n               *}\r\n              if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_SEND_ERROR.equals(messageType) then\r\n              begin\r\n                // It&#39;s an error.\r\n                noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_SEND_ERROR;\r\n                FOwningComponent.OnReceiveGCMNotification(Self, noti);\r\n              end\r\n              else\r\n              if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_DELETED.equals(messageType) then\r\n              begin\r\n                // Deleted messages on the server.\r\n                noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_DELETED;\r\n                FOwningComponent.OnReceiveGCMNotification(Self, noti);\r\n              end\r\n              else\r\n              if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_MESSAGE.equals(messageType) then\r\n              begin\r\n                // It&#39;s a regular GCM message, do some work.\r\n                noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE;\r\n                noti.Sender := JStringToString(extras.getString(StringToJString(&#39;sender&#39;)));\r\n                noti.What := StrToIntDef(JStringToString(extras.getString(StringToJString(&#39;what&#39;))), 0);\r\n                noti.Body := JStringToString(extras.getString(StringToJString(&#39;message&#39;)));\r\n                FOwningComponent.OnReceiveGCMNotification(Self, noti);\r\n              end;\r\n          end;\r\n        finally\r\n          noti.Free;\r\n        end;\r\n      end;\r\n    end;\r\n    \r\n    initialization\r\n      RegisterDelphiNativeMethods\r\n    {$ENDIF}\r\n    end.\r\n\r\n\r\nHere is the modified AndroidManifest.template.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;!-- BEGIN_INCLUDE(manifest) --&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            package=&quot;%package%&quot;\r\n            android:versionCode=&quot;%versionCode%&quot;\r\n            android:versionName=&quot;%versionName%&quot;&gt;\r\n    \r\n        &lt;!-- This is the platform API where NativeActivity was introduced. --&gt;\r\n        &lt;uses-sdk android:minSdkVersion=&quot;%minSdkVersion%&quot; /&gt;\r\n    &lt;%uses-permission%&gt;\r\n        &lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\r\n    \r\n        &lt;application android:persistent=&quot;%persistent%&quot; \r\n            android:restoreAnyVersion=&quot;%restoreAnyVersion%&quot; \r\n            android:label=&quot;%label%&quot; \r\n            android:installLocation=&quot;%installLocation%&quot; \r\n            android:debuggable=&quot;%debuggable%&quot; \r\n            android:largeHeap=&quot;%largeHeap%&quot;\r\n            android:icon=&quot;%icon%&quot;\r\n            android:theme=&quot;%theme%&quot;&gt;\r\n            &lt;receiver\r\n                android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\r\n                android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\r\n                &lt;intent-filter&gt;\r\n                    &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\r\n                    &lt;category android:name=&quot;%package%&quot; /&gt;\r\n                &lt;/intent-filter&gt;\r\n            &lt;/receiver&gt;\r\n            &lt;!-- Our activity is a subclass of the built-in NativeActivity framework class.\r\n                 This will take care of integrating with our NDK code. --&gt;\r\n            &lt;activity android:name=&quot;com.embarcadero.firemonkey.FMXNativeActivity&quot;\r\n                    android:label=&quot;%activityLabel%&quot;\r\n                    android:configChanges=&quot;orientation|keyboardHidden&quot;&gt;\r\n                &lt;!-- Tell NativeActivity the name of our .so --&gt;\r\n                &lt;meta-data android:name=&quot;android.app.lib_name&quot;\r\n                    android:value=&quot;%libNameValue%&quot; /&gt;\r\n                &lt;intent-filter&gt;  \r\n                    &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n                    &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n                &lt;/intent-filter&gt; \r\n            &lt;/activity&gt;\r\n            &lt;receiver android:name=&quot;com.embarcadero.firemonkey.notifications.FMXNotificationAlarm&quot; /&gt;\r\n        &lt;/application&gt;\r\n    &lt;/manifest&gt;   \r\n    &lt;!-- END_INCLUDE(manifest) --&gt;\r\n\r\n\r\nAnd the full source for the test application (it will send and receive a GCM message):\r\n\r\n    unit testgcmmain;\r\n    \r\n    interface\r\n    \r\n    uses\r\n      System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,\r\n      FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs,\r\n      FMX.StdCtrls, FMX.Layouts, FMX.Memo, IdBaseComponent, IdComponent, IdTCPConnection,\r\n      IdTCPClient, IdHTTP, IdIOHandler, IdIOHandlerSocket, IdIOHandlerStack, IdSSL, IdSSLOpenSSL,\r\n      gcmnotification;\r\n    \r\n    type\r\n      TForm8 = class(TForm)\r\n        Button1: TButton;\r\n        Memo1: TMemo;\r\n        Button2: TButton;\r\n        procedure Button1Click(Sender: TObject);\r\n        procedure FormCreate(Sender: TObject);\r\n        procedure FormDestroy(Sender: TObject);\r\n        procedure Button2Click(Sender: TObject);\r\n      private\r\n        { Private declarations }\r\n      public\r\n        { Public declarations }\r\n        gcmn: TGCMNotification;\r\n        procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\r\n      end;\r\n    \r\n    const\r\n      YOUR_GCM_SENDERID = &#39;1234567890&#39;;\r\n      YOUR_API_ID = &#39;abc1234567890&#39;;\r\n    \r\n    var\r\n      Form8: TForm8;\r\n    \r\n    implementation\r\n    \r\n    {$R *.fmx}\r\n    \r\n    procedure TForm8.FormCreate(Sender: TObject);\r\n    begin\r\n       gcmn := TGCMNotification.Create(self);\r\n       gcmn.OnReceiveGCMNotification := OnNotification;\r\n    end;\r\n    \r\n    procedure TForm8.FormDestroy(Sender: TObject);\r\n    begin\r\n      FreeAndNil(gcmn);\r\n    end;\r\n    \r\n    procedure TForm8.Button1Click(Sender: TObject);\r\n    begin\r\n      // register with the GCM \r\n      gcmn.SenderID := YOUR_GCM_SENDERID;\r\n      if gcmn.DoRegister then\r\n        Memo1.Lines.Add(&#39;Successfully registered with GCM.&#39;);\r\n    end;\r\n\r\n    procedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\r\n    begin\r\n      // you just received a message!\r\n      if ANotification.Kind = TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE then\r\n        Memo1.Lines.Add(&#39;Received: &#39; + ANotification.Body);\r\n    end;\r\n    \r\n    // send a message\r\n    procedure TForm8.Button2Click(Sender: TObject);\r\n    const\r\n      sendUrl = &#39;https://android.googleapis.com/gcm/send&#39;;\r\n    var\r\n      Params: TStringList;\r\n      AuthHeader: STring;\r\n      idHTTP: TIDHTTP;\r\n      SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\r\n    begin\r\n      idHTTP := TIDHTTP.Create(nil);\r\n      try\r\n        SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\r\n        idHTTP.IOHandler := SSLIOHandler;\r\n        idHTTP.HTTPOptions := [];\r\n        Params := TStringList.Create;\r\n        try\r\n          Params.Add(&#39;registration_id=&#39;+ gcmn.RegistrationID);\r\n          // you can send the data with a payload, in my example the server will accept \r\n          // data.message = the message you want to send\r\n          // data.sender = some sender info\r\n          // data.what = an integer  (aka &quot;message type&quot;)\r\n          // you can put any payload in the data, data.score, data.blabla... \r\n          // just make  sure you modify the code in my component to handle it \r\n          Params.Values[&#39;data.message&#39;] := &#39;test: &#39; + FormatDateTime(&#39;yy-mm-dd hh:nn:ss&#39;, Now);\r\n          idHTTP.Request.Host := sendUrl;\r\n          AuthHeader := &#39;Authorization: key=&#39; + YOUR_API_ID;\r\n          idHTTP.Request.CustomHeaders.Add(AuthHeader);\r\n          IdHTTP.Request.ContentType := &#39;application/x-www-form-urlencoded;charset=UTF-8&#39;;\r\n          Memo1.Lines.Add(&#39;Send result: &#39; + idHTTP.Post(sendUrl, Params));\r\n        finally\r\n          Params.Free;\r\n        end;\r\n      finally\r\n        FreeAndNil(idHTTP);\r\n      end;\r\n    end;\r\n    \r\n    end.\r\n\r\n\r\nThe GCMReceiver.java that you need to compile and add it to the classes.dex is:\r\n\r\n    package com.ioan.delphi;\r\n    \r\n    import android.content.BroadcastReceiver;\r\n    import android.content.Intent;\r\n    import android.content.Context;\r\n    import android.util.Log;\r\n    \r\n    public class GCMReceiver extends BroadcastReceiver\r\n    {\r\n    \tstatic final String TAG = &quot;GCMReceiver&quot;;\r\n    \r\n    \tpublic native void gcmReceiverOnReceiveNative(Context context, Intent receivedIntent);\r\n    \r\n    \t@Override\r\n        public void onReceive(Context context, Intent receivedIntent)\r\n        {\r\n    \t\tLog.d(TAG, &quot;onReceive&quot;);\r\n    \t\tgcmReceiverOnReceiveNative(context, receivedIntent);\r\n        }\r\n    }\r\n\r\n[**And HERE is the zip archive with the source.**][4]\r\n\r\n\r\nIf you have trouble making it work, it&#39;s probably something not configured right in you GCM console. \r\n\r\nHere is what you need from you GCM console:\r\n\r\n**Project number** (you use this when you register with GCM, place it into TGCMNotification.SenderID before calling DoRegister).\r\n \r\n[![Project number][5]][5]\r\n\r\n**API ID** you&#39;ll use this to send messages to the registered devices.\r\n\r\n[![API ID][6]][6]\r\n\r\n\r\n  [1]: https://github.com/e1ioan/TGCMReceiver\r\n  [2]: http://blog.blong.com/2013/11/delphi-and-android-services-part-2.html\r\n  [3]: http://i.stack.imgur.com/eWyH0.png\r\n  [4]: https://github.com/e1ioan/TGCMReceiver\r\n  [5]: http://i.stack.imgur.com/aAsBm.png\r\n  [6]: http://i.stack.imgur.com/nk3kU.png","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I got GCM working with Delphi and <a href=\"https://github.com/e1ioan/TGCMReceiver\" rel=\"nofollow noreferrer\">I made a sample component</a> to take care of registering and receiving the GCM messages.</p>\n<p><strong>NOTE</strong>: This is just a rough test code, I'm not using it in any real application (yet). Please fell free to modify and improve, and if you find bugs, please post back.</p>\n<p>Big thanks to Brian Long and his article on <a href=\"http://blog.blong.com/2013/11/delphi-and-android-services-part-2.html\" rel=\"nofollow noreferrer\">Android Services</a>.</p>\n<p>Get your GCM sender ID (it's your Project Number from gcm console) and your GCM API id (create a key for server application in GCM console), you'll need them (see the pictures at the bottom).</p>\n<p>First of all, you need a modified classes.dex file. You can create this by running the bat file Java dir in the archive, or you can use the one that is already compiled by me (also included in the archive).</p>\n<p>You have to <strong>ADD</strong> the new classes.dex to your Android Deployment and <strong>UNCHECK</strong> the embarcadero one:</p>\n<p><a href=\"https://i.stack.imgur.com/eWyH0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eWyH0.png\" alt=\"classes.dex deployment\" /></a></p>\n<p>Then, you need to edit your AndroidManifest.template.xml and add right after <code>&lt;%uses-permission%&gt;</code>:</p>\n<pre><code>&lt;%uses-permission%&gt;\n&lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\n</code></pre>\n<p>and right after <code>android:theme=&quot;%theme%&quot;&gt;</code></p>\n<pre><code>    &lt;receiver\n        android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\n        android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\n            &lt;category android:name=&quot;%package%&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/receiver&gt;\n</code></pre>\n<p>In your application, declare the gcmnotification unit:</p>\n<pre><code>uses\n  gcmnotification;\n</code></pre>\n<p>and then in your form declare a variable of the TGCMNotification type and a procedure that you will link to the TGCMNotification.OnReceiveGCMNotification event:</p>\n<pre><code>type\n  TForm8 = class(TForm)\n    //....\n  private\n    { Private declarations }\n  public\n    { Public declarations }\n    gcmn: TGCMNotification;\n    procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\n  end;\n\n\nprocedure TForm8.FormCreate(Sender: TObject);\nbegin\n   gcmn := TGCMNotification.Create(self);\n   gcmn.OnReceiveGCMNotification := OnNotification;\nend;\n</code></pre>\n<p>Put in the SenderID your GCM Project Number. To register you APP with GCM, call DoRegister:</p>\n<pre><code>procedure TForm8.Button1Click(Sender: TObject);\nbegin\n  gcmn.SenderID := YOUR_GCM_SENDERID;\n  if gcmn.DoRegister then\n    Toast('Successfully registered with GCM.');\nend;\n</code></pre>\n<p>If the DoRegister returns true (successfully registered), gcmn.RegistrationID will have the unique ID you need for sending messages to this device.</p>\n<p>And you'll receive messages in event procedure:</p>\n<pre><code>procedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\nbegin\n  Memo1.Lines.Add('Received: ' + ANotification.Body);\nend;\n</code></pre>\n<p>.. and that's <strong>ALL</strong> you need it for Receiving. Cool, huh? :-)</p>\n<p>To send, just use TIdHttp:</p>\n<pre><code>procedure TForm8.Button2Click(Sender: TObject);\nconst\n  sendUrl = 'https://android.googleapis.com/gcm/send';\nvar\n  Params: TStringList;\n  AuthHeader: STring;\n  idHTTP: TIDHTTP;\n  SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\nbegin\n  idHTTP := TIDHTTP.Create(nil);\n  try\n    SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\n    idHTTP.IOHandler := SSLIOHandler;\n    idHTTP.HTTPOptions := [];\n    Params := TStringList.Create;\n    try\n      Params.Add('registration_id='+ gcmn.RegistrationID);\n      Params.Values['data.message'] := 'test: ' + FormatDateTime('yy-mm-dd hh:nn:ss', Now);\n      idHTTP.Request.Host := sendUrl;\n      AuthHeader := 'Authorization: key=' + YOUR_API_ID;\n      idHTTP.Request.CustomHeaders.Add(AuthHeader);\n      IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded;charset=UTF-8';\n      Memo1.Lines.Add('Send result: ' + idHTTP.Post(sendUrl, Params));\n    finally\n      Params.Free;\n    end;\n  finally\n    FreeAndNil(idHTTP);\n  end;\nend;\n</code></pre>\n<p>Next I'm going to post the units you need, just save them in the same place with your application (or just download the whole thing from <a href=\"https://github.com/e1ioan/TGCMReceiver\" rel=\"nofollow noreferrer\">HERE</a>).</p>\n<p>gcmnotification.pas</p>\n<pre><code>unit gcmnotification;\n\ninterface\n{$IFDEF ANDROID}\nuses\n  System.SysUtils,\n  System.Classes,\n  FMX.Helpers.Android,\n  Androidapi.JNI.PlayServices,\n  Androidapi.JNI.GraphicsContentViewText,\n  Androidapi.JNIBridge,\n  Androidapi.JNI.JavaTypes;\n\ntype\n  TGCMNotificationMessageKind = (nmMESSAGE_TYPE_MESSAGE, nmMESSAGE_TYPE_DELETED, nmMESSAGE_TYPE_SEND_ERROR);\n\n  { Discription of notification for Notification Center }\n  TGCMNotificationMessage = class (TPersistent)\n  private\n    FKind: TGCMNotificationMessageKind;\n    FSender: string;\n    FWhat: integer;\n    FBody: string;\n  protected\n    procedure AssignTo(Dest: TPersistent); override;\n  public\n    { Unique identificator for determenation notification in Notification list }\n    property Kind: TGCMNotificationMessageKind read FKind write FKind;\n    property Sender: string read FSender write FSender;\n    property What: integer read FWhat write FWhat;\n    property Body: string read FBody write FBody;\n    constructor Create;\n  end;\n\n  TOnReceiveGCMNotification = procedure (Sender: TObject; ANotification: TGCMNotificationMessage) of object;\n\n  TGCMNotification = class(TComponent)\n  strict private\n    { Private declarations }\n    FRegistrationID: string;\n    FSenderID: string;\n    FOnReceiveGCMNotification: TOnReceiveGCMNotification;\n    FReceiver: JBroadcastReceiver;\n    FAlreadyRegistered: boolean;\n    function CheckPlayServicesSupport: boolean;\n  protected\n    { Protected declarations }\n  public\n    { Public declarations }\n    constructor Create(AOwner: TComponent); override;\n    destructor Destroy; override;\n    function DoRegister: boolean;\n    function GetGCMInstance: JGoogleCloudMessaging;\n  published\n    { Published declarations }\n    property SenderID: string read FSenderID write FSenderID;\n    property RegistrationID: string read FRegistrationID write FRegistrationID;\n    property OnReceiveGCMNotification: TOnReceiveGCMNotification read FOnReceiveGCMNotification write FOnReceiveGCMNotification;\n  end;\n\n{$ENDIF}\nimplementation\n{$IFDEF ANDROID}\nuses\n  uGCMReceiver;\n\n\n{ TGCMNotification }\nfunction TGCMNotification.CheckPlayServicesSupport: boolean;\nvar\n  resultCode: integer;\nbegin\n  resultCode := TJGooglePlayServicesUtil.JavaClass.isGooglePlayServicesAvailable(SharedActivity);\n  result := (resultCode = TJConnectionResult.JavaClass.SUCCESS);\nend;\n\nconstructor TGCMNotification.Create(AOwner: TComponent);\nvar\n  Filter: JIntentFilter;\nbegin\n  inherited;\n  Filter := TJIntentFilter.Create;\n  FReceiver := TJGCMReceiver.Create(Self);\n  SharedActivity.registerReceiver(FReceiver, Filter);\n  FAlreadyRegistered := false;\nend;\n\ndestructor TGCMNotification.Destroy;\nbegin\n  SharedActivity.unregisterReceiver(FReceiver);\n  FReceiver := nil;\n  inherited;\nend;\n\nfunction TGCMNotification.DoRegister: boolean;\nvar\n  p: TJavaObjectArray&lt;JString&gt;;\n  gcm: JGoogleCloudMessaging;\nbegin\n  if FAlreadyRegistered then\n    result := true\n  else\n  begin\n    if CheckPlayServicesSupport then\n    begin\n      gcm := GetGCMInstance;\n      p := TJavaObjectArray&lt;JString&gt;.Create(1);\n      p.Items[0] := StringToJString(FSenderID);\n      FRegistrationID := JStringToString(gcm.register(p));\n      FAlreadyRegistered := (FRegistrationID &lt;&gt; '');\n      result := FAlreadyRegistered;\n    end\n    else\n      result := false;\n  end;\nend;\n\nfunction TGCMNotification.GetGCMInstance: JGoogleCloudMessaging;\nbegin\n  result := TJGoogleCloudMessaging.JavaClass.getInstance(SharedActivity.getApplicationContext);\nend;\n\n{ TGCMNotificationMessage }\n\nprocedure TGCMNotificationMessage.AssignTo(Dest: TPersistent);\nvar\n  DestNotification: TGCMNotificationMessage;\nbegin\n  if Dest is TGCMNotificationMessage then\n  begin\n    DestNotification := Dest as TGCMNotificationMessage;\n    DestNotification.Kind := Kind;\n    DestNotification.What := What;\n    DestNotification.Sender := Sender;\n    DestNotification.Body := Body;\n  end\n  else\n    inherited AssignTo(Dest);\nend;\n\nconstructor TGCMNotificationMessage.Create;\nbegin\n  Body := '';\nend;\n{$ENDIF}\nend.\n</code></pre>\n<p>uGCMReceiver.pas</p>\n<pre><code>unit uGCMReceiver;\n\ninterface\n{$IFDEF ANDROID}\nuses\n  FMX.Types,\n  Androidapi.JNIBridge,\n  Androidapi.JNI.GraphicsContentViewText,\n  gcmnotification;\n\ntype\n  JGCMReceiverClass = interface(JBroadcastReceiverClass)\n  ['{9D967671-9CD8-483A-98C8-161071CE7B64}']\n    {Methods}\n  end;\n\n  [JavaSignature('com/ioan/delphi/GCMReceiver')]\n  JGCMReceiver = interface(JBroadcastReceiver)\n  ['{4B30D537-5221-4451-893D-7916ED11CE1F}']\n    {Methods}\n  end;\n\n\n  TJGCMReceiver = class(TJavaGenericImport&lt;JGCMReceiverClass, JGCMReceiver&gt;)\n  private\n    FOwningComponent: TGCMNotification;\n  protected\n    constructor _Create(AOwner: TGCMNotification);\n  public\n    class function Create(AOwner: TGCMNotification): JGCMReceiver;\n    procedure OnReceive(Context: JContext; ReceivedIntent: JIntent);\n  end;\n{$ENDIF}\nimplementation\n{$IFDEF ANDROID}\nuses\n  System.Classes,\n  System.SysUtils,\n  FMX.Helpers.Android,\n  Androidapi.NativeActivity,\n  Androidapi.JNI,\n  Androidapi.JNI.JavaTypes,\n  Androidapi.JNI.Os,\n  Androidapi.JNI.PlayServices;\n\n{$REGION 'JNI setup code and callback'}\nvar\n  GCMReceiver: TJGCMReceiver;\n  ARNContext: JContext;\n  ARNReceivedIntent: JIntent;\n\nprocedure GCMReceiverOnReceiveThreadSwitcher;\nbegin\n  Log.d('+gcmReceiverOnReceiveThreadSwitcher');\n  Log.d('Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)',\n    [MainThreadID, TThread.CurrentThread.ThreadID,\n    TJThread.JavaClass.CurrentThread.getId]);\n  GCMReceiver.OnReceive(ARNContext,ARNReceivedIntent );\n  Log.d('-gcmReceiverOnReceiveThreadSwitcher');\nend;\n\n//This is called from the Java activity's onReceiveNative() method\nprocedure GCMReceiverOnReceiveNative(PEnv: PJNIEnv; This: JNIObject; JNIContext, JNIReceivedIntent: JNIObject); cdecl;\nbegin\n  Log.d('+gcmReceiverOnReceiveNative');\n  Log.d('Thread: Main: %.8x, Current: %.8x, Java:%.8d (%2:.8x)',\n    [MainThreadID, TThread.CurrentThread.ThreadID,\n    TJThread.JavaClass.CurrentThread.getId]);\n  ARNContext := TJContext.Wrap(JNIContext);\n  ARNReceivedIntent := TJIntent.Wrap(JNIReceivedIntent);\n  Log.d('Calling Synchronize');\n  TThread.Synchronize(nil, GCMReceiverOnReceiveThreadSwitcher);\n  Log.d('Synchronize is over');\n  Log.d('-gcmReceiverOnReceiveNative');\nend;\n\nprocedure RegisterDelphiNativeMethods;\nvar\n  PEnv: PJNIEnv;\n  ReceiverClass: JNIClass;\n  NativeMethod: JNINativeMethod;\nbegin\n  Log.d('Starting the GCMReceiver JNI stuff');\n\n  PEnv := TJNIResolver.GetJNIEnv;\n\n  Log.d('Registering interop methods');\n\n  NativeMethod.Name := 'gcmReceiverOnReceiveNative';\n  NativeMethod.Signature := '(Landroid/content/Context;Landroid/content/Intent;)V';\n  NativeMethod.FnPtr := @GCMReceiverOnReceiveNative;\n\n  ReceiverClass := TJNIResolver.GetJavaClassID('com.ioan.delphi.GCMReceiver');\n\n  PEnv^.RegisterNatives(PEnv, ReceiverClass, @NativeMethod, 1);\n\n  PEnv^.DeleteLocalRef(PEnv, ReceiverClass);\nend;\n{$ENDREGION}\n\n{ TActivityReceiver }\n\nconstructor TJGCMReceiver._Create(AOwner: TGCMNotification);\nbegin\n  inherited;\n  FOwningComponent := AOwner;\n  Log.d('TJGCMReceiver._Create constructor');\nend;\n\nclass function TJGCMReceiver.Create(AOwner: TGCMNotification): JGCMReceiver;\nbegin\n  Log.d('TJGCMReceiver.Create class function');\n  Result := inherited Create;\n  GCMReceiver := TJGCMReceiver._Create(AOwner);\nend;\n\nprocedure TJGCMReceiver.OnReceive(Context: JContext;  ReceivedIntent: JIntent);\nvar\n  extras: JBundle;\n  gcm: JGoogleCloudMessaging;\n  messageType: JString;\n  noti: TGCMNotificationMessage;\nbegin\n  if Assigned(FOwningComponent.OnReceiveGCMNotification) then\n  begin\n    noti := TGCMNotificationMessage.Create;\n    try\n      Log.d('Received a message!');\n      extras := ReceivedIntent.getExtras();\n      gcm := FOwningComponent.GetGCMInstance;\n      // The getMessageType() intent parameter must be the intent you received\n      // in your BroadcastReceiver.\n      messageType := gcm.getMessageType(ReceivedIntent);\n      if not extras.isEmpty() then\n      begin\n          {*\n           * Filter messages based on message type. Since it is likely that GCM will be\n           * extended in the future with new message types, just ignore any message types you're\n           * not interested in, or that you don't recognize.\n           *}\n          if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_SEND_ERROR.equals(messageType) then\n          begin\n            // It's an error.\n            noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_SEND_ERROR;\n            FOwningComponent.OnReceiveGCMNotification(Self, noti);\n          end\n          else\n          if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_DELETED.equals(messageType) then\n          begin\n            // Deleted messages on the server.\n            noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_DELETED;\n            FOwningComponent.OnReceiveGCMNotification(Self, noti);\n          end\n          else\n          if TJGoogleCloudMessaging.JavaClass.MESSAGE_TYPE_MESSAGE.equals(messageType) then\n          begin\n            // It's a regular GCM message, do some work.\n            noti.Kind := TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE;\n            noti.Sender := JStringToString(extras.getString(StringToJString('sender')));\n            noti.What := StrToIntDef(JStringToString(extras.getString(StringToJString('what'))), 0);\n            noti.Body := JStringToString(extras.getString(StringToJString('message')));\n            FOwningComponent.OnReceiveGCMNotification(Self, noti);\n          end;\n      end;\n    finally\n      noti.Free;\n    end;\n  end;\nend;\n\ninitialization\n  RegisterDelphiNativeMethods\n{$ENDIF}\nend.\n</code></pre>\n<p>Here is the modified AndroidManifest.template.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;!-- BEGIN_INCLUDE(manifest) --&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        package=&quot;%package%&quot;\n        android:versionCode=&quot;%versionCode%&quot;\n        android:versionName=&quot;%versionName%&quot;&gt;\n\n    &lt;!-- This is the platform API where NativeActivity was introduced. --&gt;\n    &lt;uses-sdk android:minSdkVersion=&quot;%minSdkVersion%&quot; /&gt;\n&lt;%uses-permission%&gt;\n    &lt;uses-permission android:name=&quot;com.google.android.c2dm.permission.RECEIVE&quot; /&gt;\n\n    &lt;application android:persistent=&quot;%persistent%&quot; \n        android:restoreAnyVersion=&quot;%restoreAnyVersion%&quot; \n        android:label=&quot;%label%&quot; \n        android:installLocation=&quot;%installLocation%&quot; \n        android:debuggable=&quot;%debuggable%&quot; \n        android:largeHeap=&quot;%largeHeap%&quot;\n        android:icon=&quot;%icon%&quot;\n        android:theme=&quot;%theme%&quot;&gt;\n        &lt;receiver\n            android:name=&quot;com.ioan.delphi.GCMReceiver&quot;\n            android:permission=&quot;com.google.android.c2dm.permission.SEND&quot; &gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;com.google.android.c2dm.intent.RECEIVE&quot; /&gt;\n                &lt;category android:name=&quot;%package%&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/receiver&gt;\n        &lt;!-- Our activity is a subclass of the built-in NativeActivity framework class.\n             This will take care of integrating with our NDK code. --&gt;\n        &lt;activity android:name=&quot;com.embarcadero.firemonkey.FMXNativeActivity&quot;\n                android:label=&quot;%activityLabel%&quot;\n                android:configChanges=&quot;orientation|keyboardHidden&quot;&gt;\n            &lt;!-- Tell NativeActivity the name of our .so --&gt;\n            &lt;meta-data android:name=&quot;android.app.lib_name&quot;\n                android:value=&quot;%libNameValue%&quot; /&gt;\n            &lt;intent-filter&gt;  \n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt; \n        &lt;/activity&gt;\n        &lt;receiver android:name=&quot;com.embarcadero.firemonkey.notifications.FMXNotificationAlarm&quot; /&gt;\n    &lt;/application&gt;\n&lt;/manifest&gt;   \n&lt;!-- END_INCLUDE(manifest) --&gt;\n</code></pre>\n<p>And the full source for the test application (it will send and receive a GCM message):</p>\n<pre><code>unit testgcmmain;\n\ninterface\n\nuses\n  System.SysUtils, System.Types, System.UITypes, System.Classes, System.Variants,\n  FMX.Types, FMX.Controls, FMX.Forms, FMX.Graphics, FMX.Dialogs,\n  FMX.StdCtrls, FMX.Layouts, FMX.Memo, IdBaseComponent, IdComponent, IdTCPConnection,\n  IdTCPClient, IdHTTP, IdIOHandler, IdIOHandlerSocket, IdIOHandlerStack, IdSSL, IdSSLOpenSSL,\n  gcmnotification;\n\ntype\n  TForm8 = class(TForm)\n    Button1: TButton;\n    Memo1: TMemo;\n    Button2: TButton;\n    procedure Button1Click(Sender: TObject);\n    procedure FormCreate(Sender: TObject);\n    procedure FormDestroy(Sender: TObject);\n    procedure Button2Click(Sender: TObject);\n  private\n    { Private declarations }\n  public\n    { Public declarations }\n    gcmn: TGCMNotification;\n    procedure OnNotification(Sender: TObject; ANotification: TGCMNotificationMessage);\n  end;\n\nconst\n  YOUR_GCM_SENDERID = '1234567890';\n  YOUR_API_ID = 'abc1234567890';\n\nvar\n  Form8: TForm8;\n\nimplementation\n\n{$R *.fmx}\n\nprocedure TForm8.FormCreate(Sender: TObject);\nbegin\n   gcmn := TGCMNotification.Create(self);\n   gcmn.OnReceiveGCMNotification := OnNotification;\nend;\n\nprocedure TForm8.FormDestroy(Sender: TObject);\nbegin\n  FreeAndNil(gcmn);\nend;\n\nprocedure TForm8.Button1Click(Sender: TObject);\nbegin\n  // register with the GCM \n  gcmn.SenderID := YOUR_GCM_SENDERID;\n  if gcmn.DoRegister then\n    Memo1.Lines.Add('Successfully registered with GCM.');\nend;\n\nprocedure TForm8.OnNotification(Sender: TObject;  ANotification: TGCMNotificationMessage);\nbegin\n  // you just received a message!\n  if ANotification.Kind = TGCMNotificationMessageKind.nmMESSAGE_TYPE_MESSAGE then\n    Memo1.Lines.Add('Received: ' + ANotification.Body);\nend;\n\n// send a message\nprocedure TForm8.Button2Click(Sender: TObject);\nconst\n  sendUrl = 'https://android.googleapis.com/gcm/send';\nvar\n  Params: TStringList;\n  AuthHeader: STring;\n  idHTTP: TIDHTTP;\n  SSLIOHandler: TIdSSLIOHandlerSocketOpenSSL;\nbegin\n  idHTTP := TIDHTTP.Create(nil);\n  try\n    SslIOHandler := TIdSSLIOHandlerSocketOpenSSL.Create(nil);\n    idHTTP.IOHandler := SSLIOHandler;\n    idHTTP.HTTPOptions := [];\n    Params := TStringList.Create;\n    try\n      Params.Add('registration_id='+ gcmn.RegistrationID);\n      // you can send the data with a payload, in my example the server will accept \n      // data.message = the message you want to send\n      // data.sender = some sender info\n      // data.what = an integer  (aka &quot;message type&quot;)\n      // you can put any payload in the data, data.score, data.blabla... \n      // just make  sure you modify the code in my component to handle it \n      Params.Values['data.message'] := 'test: ' + FormatDateTime('yy-mm-dd hh:nn:ss', Now);\n      idHTTP.Request.Host := sendUrl;\n      AuthHeader := 'Authorization: key=' + YOUR_API_ID;\n      idHTTP.Request.CustomHeaders.Add(AuthHeader);\n      IdHTTP.Request.ContentType := 'application/x-www-form-urlencoded;charset=UTF-8';\n      Memo1.Lines.Add('Send result: ' + idHTTP.Post(sendUrl, Params));\n    finally\n      Params.Free;\n    end;\n  finally\n    FreeAndNil(idHTTP);\n  end;\nend;\n\nend.\n</code></pre>\n<p>The GCMReceiver.java that you need to compile and add it to the classes.dex is:</p>\n<pre><code>package com.ioan.delphi;\n\nimport android.content.BroadcastReceiver;\nimport android.content.Intent;\nimport android.content.Context;\nimport android.util.Log;\n\npublic class GCMReceiver extends BroadcastReceiver\n{\n    static final String TAG = &quot;GCMReceiver&quot;;\n\n    public native void gcmReceiverOnReceiveNative(Context context, Intent receivedIntent);\n\n    @Override\n    public void onReceive(Context context, Intent receivedIntent)\n    {\n        Log.d(TAG, &quot;onReceive&quot;);\n        gcmReceiverOnReceiveNative(context, receivedIntent);\n    }\n}\n</code></pre>\n<p><a href=\"https://github.com/e1ioan/TGCMReceiver\" rel=\"nofollow noreferrer\"><strong>And HERE is the zip archive with the source.</strong></a></p>\n<p>If you have trouble making it work, it's probably something not configured right in you GCM console.</p>\n<p>Here is what you need from you GCM console:</p>\n<p><strong>Project number</strong> (you use this when you register with GCM, place it into TGCMNotification.SenderID before calling DoRegister).</p>\n<p><a href=\"https://i.stack.imgur.com/aAsBm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aAsBm.png\" alt=\"Project number\" /></a></p>\n<p><strong>API ID</strong> you'll use this to send messages to the registered devices.</p>\n<p><a href=\"https://i.stack.imgur.com/nk3kU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nk3kU.png\" alt=\"API ID\" /></a></p>\n"}],"owner":{"account_id":3312412,"reputation":381,"user_id":2785563,"accept_rate":25,"display_name":"FerretDriver"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9747,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":4,"score":25,"last_activity_date":1695762940,"creation_date":1379371196,"question_id":18838485,"body_markdown":"I&#39;ve got an android app that I am thinking about porting to Delphi but I can&#39;t see a way to interface with GCM. I am thinking I would possibly have to run the GCMBaseIntentService in java and interface with the delphi shared object?\r\n\r\nAlternatively, I am looking for a way to do push notifications in a Delphi Xe5 android app.\r\n\r\n","title":"Google Cloud Messaging in Delphi XE5?","body":"<p>I've got an android app that I am thinking about porting to Delphi but I can't see a way to interface with GCM. I am thinking I would possibly have to run the GCMBaseIntentService in java and interface with the delphi shared object?</p>\n\n<p>Alternatively, I am looking for a way to do push notifications in a Delphi Xe5 android app.</p>\n"},{"tags":["java","spring","hibernate"],"answers":[{"comments":[{"owner":{"account_id":22759914,"reputation":1,"user_id":16918907,"display_name":"Marcus Peterson "},"score":0,"creation_date":1695756628,"post_id":77182884,"comment_id":136066345,"body_markdown":"Thank you, how do I do this through java hibernate tho?","body":"Thank you, how do I do this through java hibernate tho?"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695756876,"post_id":77182884,"comment_id":136066390,"body_markdown":"This responsibility will be on database side, I mean every insert/update doesnt matter from application(Java,hibernate) or workbench will have update time field populate, trigger will do it.","body":"This responsibility will be on database side, I mean every insert/update doesnt matter from application(Java,hibernate) or workbench will have update time field populate, trigger will do it."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695758280,"post_id":77182884,"comment_id":136066611,"body_markdown":"If you find my answer really helpfully, don&#39;t forget to upvote and approve it","body":"If you find my answer really helpfully, don&#39;t forget to upvote and approve it"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695832000,"post_id":77182884,"comment_id":136077673,"body_markdown":"Any updates about it ?","body":"Any updates about it ?"},{"owner":{"account_id":22759914,"reputation":1,"user_id":16918907,"display_name":"Marcus Peterson "},"score":0,"creation_date":1695912191,"post_id":77182884,"comment_id":136089655,"body_markdown":"Thank for the help, but it wasn&#39;t applicable in my case.\nI just told my co-workers they will have to insert timestamp manually\n\nThe purpose of my code was that all the changes that affect the database&#39;s behavior should be done through my java application and not through workbench or similiar tools.","body":"Thank for the help, but it wasn&#39;t applicable in my case. I just told my co-workers they will have to insert timestamp manually  The purpose of my code was that all the changes that affect the database&#39;s behavior should be done through my java application and not through workbench or similiar tools."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695912397,"post_id":77182884,"comment_id":136089706,"body_markdown":"I get you, by the way this was the reason why you were not able to got the create timestamp and I think that you should approve this answer for others people to know that is the right way.","body":"I get you, by the way this was the reason why you were not able to got the create timestamp and I think that you should approve this answer for others people to know that is the right way."},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695912468,"post_id":77182884,"comment_id":136089723,"body_markdown":"The question was `Why the timestamp is not inserting automatically when i do inserts by workbench`","body":"The question was <code>Why the timestamp is not inserting automatically when i do inserts by workbench</code>"},{"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"score":0,"creation_date":1695912548,"post_id":77182884,"comment_id":136089743,"body_markdown":"Also i wrote about it `To have these columns populate with values into database the insert request should be passed through hibernate(java application)`","body":"Also i wrote about it <code>To have these columns populate with values into database the insert request should be passed through hibernate(java application)</code>"}],"tags":[],"owner":{"account_id":24440940,"reputation":3132,"user_id":18364656,"display_name":"Andrei Lisa"},"comment_count":8,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695756323,"creation_date":1695756323,"answer_id":77182884,"question_id":77182782,"body_markdown":"It will be null forever il you will insert the values from workbench, because these two annotations are from ORM(hibernate) \r\n\r\n    @CreationTimestamp\r\n    @LastModifiedBy\r\nTo have these columns populate with values into database the insert request should be passed through hibernate \r\n\r\nAs solution, to have a inserted/updated time of the entity when the values are populated you can create a trigger on table something like in this [Q/A][1]. Also don&#39;t forget to remove \r\n`@CreationTimestamp`,`@LastModifiedBy` if you will choose to do it with trigger.\r\n\r\n  [1]: https://stackoverflow.com/questions/28988885/trigger-on-insert-and-update-that-adds-modification-date","title":"Java Hibernate database doesn&#39;t automatically insert timestamp in MySQL database","body":"<p>It will be null forever il you will insert the values from workbench, because these two annotations are from ORM(hibernate)</p>\n<pre><code>@CreationTimestamp\n@LastModifiedBy\n</code></pre>\n<p>To have these columns populate with values into database the insert request should be passed through hibernate</p>\n<p>As solution, to have a inserted/updated time of the entity when the values are populated you can create a trigger on table something like in this <a href=\"https://stackoverflow.com/questions/28988885/trigger-on-insert-and-update-that-adds-modification-date\">Q/A</a>. Also don't forget to remove\n<code>@CreationTimestamp</code>,<code>@LastModifiedBy</code> if you will choose to do it with trigger.</p>\n"}],"owner":{"account_id":22759914,"reputation":1,"user_id":16918907,"display_name":"Marcus Peterson "},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695762923,"creation_date":1695755060,"question_id":77182782,"body_markdown":"So this is my current Java Hibernate code, this table is part of a database that is supposed to store temperature values\r\n\r\n```package com.example.javabackend_dbms.models;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport org.hibernate.annotations.CreationTimestamp;\r\nimport org.hibernate.annotations.UpdateTimestamp;\r\nimport org.springframework.data.annotation.CreatedDate;\r\nimport org.springframework.data.annotation.LastModifiedBy;\r\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\r\n\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@NoArgsConstructor\r\n@EntityListeners(AuditingEntityListener.class)\r\n@Data\r\npublic class TempTable { //Den viktigaste tabellen i DBMS, h&#228;r lagras data r&#229;tt\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\r\n    private Long Id;\r\n\r\n    private Float temperatures;\r\n\r\n    @Column(name = &quot;timestamp&quot;)\r\n    @CreationTimestamp\r\n    @LastModifiedBy\r\n    private LocalDateTime timestamp; // &#39; 2023-09-24T12:34:56.789 &#39;\r\n\r\n    @Transient\r\n    public String getFormattedTimestamp(){ //Denna metod p&#229;verkar inte data som finns i tabellerna, den &#228;r framtagen f&#246;r enkelt kunna formatera data\r\n        if (timestamp != null) {\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd &#39;hour&#39; HH : &#39;minute&#39; mm : &#39;seconds&#39; : ss.SSS&quot;);\r\n            return timestamp.format(formatter);\r\n        }\r\n        System.out.println(&quot;Could not format datetime&quot;);\r\n        return &quot;&quot;;\r\n    }\r\n\r\n    @OneToMany(mappedBy = &quot;tempTable&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;WarningTable&gt; warningTables = new ArrayList&lt;&gt;();\r\n\r\n    public TempTable(Long Id, Float temperatures, LocalDateTime timestamp){\r\n        this.Id = Id;\r\n        this.temperatures = temperatures;\r\n        this.timestamp = timestamp;\r\n    }\r\n\r\n    public LocalDateTime getTimestamp() {\r\n        return timestamp;\r\n    }\r\n\r\n    public void setTimestamp(LocalDateTime timestamp) {\r\n        this.timestamp = timestamp;\r\n    }\r\n\r\n}\r\n```\r\n\r\nThis is really where I think the main issue is, either I&#39;m using the wrong annotations or I don&#39;t know what I talking about, I have some getters and setters. But I don&#39;t think i&#39;ll use them for now\r\n```\r\n@Column(name = &quot;timestamp&quot;)\r\n@CreationTimestamp\r\n@LastModifiedBy\r\nprivate LocalDateTime timestamp; // &#39; 2023-09-24T12:34:56.789 &#39;\r\n ```\r\n\r\nAnd simply doing this in MySQL workbench: \r\n```\r\nINSERT INTO temp_table (temperatures) VALUES (22.5);\r\nINSERT INTO temp_table (temperatures) VALUES (32.5);\r\nINSERT INTO temp_table (temperatures) VALUES (21.5);\r\n```\r\n\r\nShould automatically just set the timestamp in the database. But when I through my endpoint request with JSON this is what it returns:\r\n\r\n```[\r\n  {\r\n    &quot;temperatures&quot;: 22.5,\r\n    &quot;timestamp&quot;: null,\r\n    &quot;warningTables&quot;: [],\r\n    &quot;id&quot;: 1,\r\n    &quot;formattedTimestamp&quot;: &quot;&quot;\r\n  },\r\n  {\r\n    &quot;temperatures&quot;: 32.5,\r\n    &quot;timestamp&quot;: null,\r\n    &quot;warningTables&quot;: [],\r\n    &quot;id&quot;: 2,\r\n    &quot;formattedTimestamp&quot;: &quot;&quot;\r\n  },\r\n  {\r\n    &quot;temperatures&quot;: 21.5,\r\n    &quot;timestamp&quot;: null,\r\n    &quot;warningTables&quot;: [],\r\n    &quot;id&quot;: 3,\r\n    &quot;formattedTimestamp&quot;: &quot;&quot;\r\n  }\r\n]\r\n```\r\n\r\n\r\nWhy is timestamp null? What am I missing here?\r\n","title":"Java Hibernate database doesn&#39;t automatically insert timestamp in MySQL database","body":"<p>So this is my current Java Hibernate code, this table is part of a database that is supposed to store temperature values</p>\n<pre><code>\nimport jakarta.persistence.*;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.hibernate.annotations.CreationTimestamp;\nimport org.hibernate.annotations.UpdateTimestamp;\nimport org.springframework.data.annotation.CreatedDate;\nimport org.springframework.data.annotation.LastModifiedBy;\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\n\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@NoArgsConstructor\n@EntityListeners(AuditingEntityListener.class)\n@Data\npublic class TempTable { //Den viktigaste tabellen i DBMS, hr lagras data rtt\n    @Id\n    @GeneratedValue (strategy = GenerationType.IDENTITY)\n    private Long Id;\n\n    private Float temperatures;\n\n    @Column(name = &quot;timestamp&quot;)\n    @CreationTimestamp\n    @LastModifiedBy\n    private LocalDateTime timestamp; // ' 2023-09-24T12:34:56.789 '\n\n    @Transient\n    public String getFormattedTimestamp(){ //Denna metod pverkar inte data som finns i tabellerna, den r framtagen fr enkelt kunna formatera data\n        if (timestamp != null) {\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd 'hour' HH : 'minute' mm : 'seconds' : ss.SSS&quot;);\n            return timestamp.format(formatter);\n        }\n        System.out.println(&quot;Could not format datetime&quot;);\n        return &quot;&quot;;\n    }\n\n    @OneToMany(mappedBy = &quot;tempTable&quot;, cascade = CascadeType.ALL)\n    private List&lt;WarningTable&gt; warningTables = new ArrayList&lt;&gt;();\n\n    public TempTable(Long Id, Float temperatures, LocalDateTime timestamp){\n        this.Id = Id;\n        this.temperatures = temperatures;\n        this.timestamp = timestamp;\n    }\n\n    public LocalDateTime getTimestamp() {\n        return timestamp;\n    }\n\n    public void setTimestamp(LocalDateTime timestamp) {\n        this.timestamp = timestamp;\n    }\n\n}\n</code></pre>\n<p>This is really where I think the main issue is, either I'm using the wrong annotations or I don't know what I talking about, I have some getters and setters. But I don't think i'll use them for now</p>\n<pre><code>@Column(name = &quot;timestamp&quot;)\n@CreationTimestamp\n@LastModifiedBy\nprivate LocalDateTime timestamp; // ' 2023-09-24T12:34:56.789 '\n</code></pre>\n<p>And simply doing this in MySQL workbench:</p>\n<pre><code>INSERT INTO temp_table (temperatures) VALUES (22.5);\nINSERT INTO temp_table (temperatures) VALUES (32.5);\nINSERT INTO temp_table (temperatures) VALUES (21.5);\n</code></pre>\n<p>Should automatically just set the timestamp in the database. But when I through my endpoint request with JSON this is what it returns:</p>\n<pre><code>  {\n    &quot;temperatures&quot;: 22.5,\n    &quot;timestamp&quot;: null,\n    &quot;warningTables&quot;: [],\n    &quot;id&quot;: 1,\n    &quot;formattedTimestamp&quot;: &quot;&quot;\n  },\n  {\n    &quot;temperatures&quot;: 32.5,\n    &quot;timestamp&quot;: null,\n    &quot;warningTables&quot;: [],\n    &quot;id&quot;: 2,\n    &quot;formattedTimestamp&quot;: &quot;&quot;\n  },\n  {\n    &quot;temperatures&quot;: 21.5,\n    &quot;timestamp&quot;: null,\n    &quot;warningTables&quot;: [],\n    &quot;id&quot;: 3,\n    &quot;formattedTimestamp&quot;: &quot;&quot;\n  }\n]\n</code></pre>\n<p>Why is timestamp null? What am I missing here?</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695761986,"post_id":77183349,"comment_id":136067230,"body_markdown":"Not in the standard library. There might be third party libraries that offer an API like this, but realistically it&#39;s just going to be similar to what you&#39;ve implemented here.","body":"Not in the standard library. There might be third party libraries that offer an API like this, but realistically it&#39;s just going to be similar to what you&#39;ve implemented here."}],"answers":[{"tags":[],"owner":{"account_id":8653039,"reputation":599,"user_id":7775861,"accept_rate":50,"display_name":"Kyle Berezin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695762589,"creation_date":1695762589,"answer_id":77183446,"question_id":77183349,"body_markdown":"As dan1st pointed out, this is covered in https://stackoverflow.com/questions/10194855/java-map-key-class-value-instance-of-that-class\r\n\r\nSpecifically, replacing `return (T)cachedAttributes.get(category).get();` with  `return category.cast(cachedAttributes.get(category).get());` removed the warning. It seems odd to me though, I feel like there should still be a warning here, as nothing is informing the compiler that wildcards for `Class&lt;?&gt;, CachedObject&lt;?&gt;` are the same.\r\n\r\nI will leave this post unanswered for now just in case a more complete answer comes around.","title":"Fun with Generics; Type-Safe HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt;","body":"<p>As dan1st pointed out, this is covered in <a href=\"https://stackoverflow.com/questions/10194855/java-map-key-class-value-instance-of-that-class\">Java map, key = class, value = instance of that class</a></p>\n<p>Specifically, replacing <code>return (T)cachedAttributes.get(category).get();</code> with  <code>return category.cast(cachedAttributes.get(category).get());</code> removed the warning. It seems odd to me though, I feel like there should still be a warning here, as nothing is informing the compiler that wildcards for <code>Class&lt;?&gt;, CachedObject&lt;?&gt;</code> are the same.</p>\n<p>I will leave this post unanswered for now just in case a more complete answer comes around.</p>\n"},{"comments":[{"owner":{"account_id":8653039,"reputation":599,"user_id":7775861,"accept_rate":50,"display_name":"Kyle Berezin"},"score":0,"creation_date":1695763058,"post_id":77183447,"comment_id":136067372,"body_markdown":"category.cast instead of (T) seems to have hidden the warning. I think this is only due to there being a ClassCastException catch internal to it though.","body":"category.cast instead of (T) seems to have hidden the warning. I think this is only due to there being a ClassCastException catch internal to it though."},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695770473,"post_id":77183447,"comment_id":136068116,"body_markdown":"It does, and it &#39;works&#39;, but as a principle it doesn&#39;t extend all that far. After all, imagine you want T to be `List&lt;String&gt;`. You can&#39;t put that in `Class&lt;X&gt;` terms. You can hack it, sure. It won&#39;t get you type safety though.","body":"It does, and it &#39;works&#39;, but as a principle it doesn&#39;t extend all that far. After all, imagine you want T to be <code>List&lt;String&gt;</code>. You can&#39;t put that in <code>Class&lt;X&gt;</code> terms. You can hack it, sure. It won&#39;t get you type safety though."}],"tags":[],"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":2,"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1695762595,"creation_date":1695762595,"answer_id":77183447,"question_id":77183349,"body_markdown":"This is a more generic problem that requires higher order generics. A type variable represents an actual type: `public &lt;T&gt; void foo(T in, T out)` means that the T is a variable and is to be replaced by an actual type. Just like in `void foo(int x)`, x is a variable and is to be replaced, for any given invocation, by an actual `int`.\r\n\r\nWhat this requires is yet another abstractive layer deeper: We now want a type variable, say, &#223;, which gets replaced not with an actual type, but with a type variable - or at least the notion that you can _declare_ type variables within a generics signature block. Something like:\r\n\r\n```\r\nMap&lt;{&#223;} Class&lt;&#223;&gt;, CachedObject&lt;&#223;&gt;&gt; cachedAttributes = ...;\r\n```\r\n\r\nIt&#39;s not that `&#223;` is the same type throughout. &#223; is different for every k/v pair. Hence, it&#39;s a higher order thing.\r\n\r\nJava doesn&#39;t have this. __What you want is not possible__. Given the steady stream of complaints that generics are &#39;too complicated&#39; and the questions e.g. here on SO about it, it&#39;s probably correct that java does not have them.\r\n\r\nThere are fixes. One of them is what you&#39;ve done: That you take some source file and limit the heap violations solely to that source file: That is the one that contains a bunch of `@SuppressWarnings`, unsafe casts, and so on - and requires extra scrutiny on review to ensure that from the outside it is not actually possible to cause generics breaks, so that no other code needs to be infected with it. `ArrayList`, itself, works just the same way: ArrayList&#39;s backing store is `Object[]`. Not `T[]` (for good reasons). e.g. the `get(int idx)` method casts to T, which causes a warning, which is suppressed, which is fine, because non-Ts cannot actually end up in that list unless the caller themselves have ignored compiler warnings about generics issues.\r\n\r\nThere are some takes on this, it comes up relatively often. For example, guava&#39;s [ClassToInstanceMap](https://guava.dev/releases/18.0/api/docs/com/google/common/collect/ClassToInstanceMap.html).\r\n\r\n","title":"Fun with Generics; Type-Safe HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt;","body":"<p>This is a more generic problem that requires higher order generics. A type variable represents an actual type: <code>public &lt;T&gt; void foo(T in, T out)</code> means that the T is a variable and is to be replaced by an actual type. Just like in <code>void foo(int x)</code>, x is a variable and is to be replaced, for any given invocation, by an actual <code>int</code>.</p>\n<p>What this requires is yet another abstractive layer deeper: We now want a type variable, say, , which gets replaced not with an actual type, but with a type variable - or at least the notion that you can <em>declare</em> type variables within a generics signature block. Something like:</p>\n<pre><code>Map&lt;{} Class&lt;&gt;, CachedObject&lt;&gt;&gt; cachedAttributes = ...;\n</code></pre>\n<p>It's not that <code></code> is the same type throughout.  is different for every k/v pair. Hence, it's a higher order thing.</p>\n<p>Java doesn't have this. <strong>What you want is not possible</strong>. Given the steady stream of complaints that generics are 'too complicated' and the questions e.g. here on SO about it, it's probably correct that java does not have them.</p>\n<p>There are fixes. One of them is what you've done: That you take some source file and limit the heap violations solely to that source file: That is the one that contains a bunch of <code>@SuppressWarnings</code>, unsafe casts, and so on - and requires extra scrutiny on review to ensure that from the outside it is not actually possible to cause generics breaks, so that no other code needs to be infected with it. <code>ArrayList</code>, itself, works just the same way: ArrayList's backing store is <code>Object[]</code>. Not <code>T[]</code> (for good reasons). e.g. the <code>get(int idx)</code> method casts to T, which causes a warning, which is suppressed, which is fine, because non-Ts cannot actually end up in that list unless the caller themselves have ignored compiler warnings about generics issues.</p>\n<p>There are some takes on this, it comes up relatively often. For example, guava's <a href=\"https://guava.dev/releases/18.0/api/docs/com/google/common/collect/ClassToInstanceMap.html\" rel=\"nofollow noreferrer\">ClassToInstanceMap</a>.</p>\n"}],"owner":{"account_id":8653039,"reputation":599,"user_id":7775861,"accept_rate":50,"display_name":"Kyle Berezin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695762598,"accepted_answer_id":77183447,"answer_count":2,"score":0,"last_activity_date":1695762595,"creation_date":1695761644,"question_id":77183349,"body_markdown":"PrinterService has a generic `getAttribute` function that uses a Class argument to determine the type of attribute returned. Due to a memory leak in java (JDK-7001133) we are caching these values. Most of the caches were trivial to implement, but getAttribute was not. I add them to an ArrayList, indexed by the class of the request. The issue is I wasn&#39;t able to find a type-safe way of doing it. In the following example, I get a warning about an unsafe cast.\r\n\r\nIn reality, the cast is safe, so worst case scenario I will just use my example, I was curious to see if there is a better way.\r\n``` java\r\n    private final HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt; cachedAttributes = new HashMap&lt;&gt;();\r\n\r\n    public &lt;T extends PrintServiceAttribute&gt; T getAttribute(Class&lt;T&gt; category) {\r\n        if (!cachedAttributes.containsKey(category)) {\r\n            Supplier&lt;T&gt; supplier = () -&gt; innerPrintService.getAttribute(category);\r\n            CachedObject&lt;T&gt; cachedObject = new CachedObject&lt;&gt;(supplier, lifespan);\r\n            cachedAttributes.put(category, cachedObject);\r\n        }\r\n        return (T)cachedAttributes.get(category).get();\r\n    }\r\n```","title":"Fun with Generics; Type-Safe HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt;","body":"<p>PrinterService has a generic <code>getAttribute</code> function that uses a Class argument to determine the type of attribute returned. Due to a memory leak in java (JDK-7001133) we are caching these values. Most of the caches were trivial to implement, but getAttribute was not. I add them to an ArrayList, indexed by the class of the request. The issue is I wasn't able to find a type-safe way of doing it. In the following example, I get a warning about an unsafe cast.</p>\n<p>In reality, the cast is safe, so worst case scenario I will just use my example, I was curious to see if there is a better way.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private final HashMap&lt;Class&lt;?&gt;, CachedObject&lt;?&gt;&gt; cachedAttributes = new HashMap&lt;&gt;();\n\n    public &lt;T extends PrintServiceAttribute&gt; T getAttribute(Class&lt;T&gt; category) {\n        if (!cachedAttributes.containsKey(category)) {\n            Supplier&lt;T&gt; supplier = () -&gt; innerPrintService.getAttribute(category);\n            CachedObject&lt;T&gt; cachedObject = new CachedObject&lt;&gt;(supplier, lifespan);\n            cachedAttributes.put(category, cachedObject);\n        }\n        return (T)cachedAttributes.get(category).get();\n    }\n</code></pre>\n"},{"tags":["java","struts-1"],"comments":[{"owner":{"account_id":4790967,"reputation":2035,"user_id":3870176,"accept_rate":83,"display_name":"bencripps"},"score":0,"creation_date":1415843671,"post_id":26900012,"comment_id":42352742,"body_markdown":"whats the exact problem?","body":"whats the exact problem?"},{"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"score":0,"creation_date":1415843926,"post_id":26900012,"comment_id":42352805,"body_markdown":"when i load it in tomcat server,it throws error like this:\n&#39;javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot;&#39; @bencripps","body":"when i load it in tomcat server,it throws error like this: &#39;javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot;&#39; @bencripps"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1415884032,"post_id":26900012,"comment_id":42368829,"body_markdown":"You have no form beans defined, I&#39;m not sure what you expect.","body":"You have no form beans defined, I&#39;m not sure what you expect."},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1415884162,"post_id":26900012,"comment_id":42368910,"body_markdown":"Unrelated, but this must be from a *very* old tutorial; it&#39;s pretty awful.","body":"Unrelated, but this must be from a <i>very</i> old tutorial; it&#39;s pretty awful."},{"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"score":0,"creation_date":1415933973,"post_id":26900012,"comment_id":42392052,"body_markdown":"finally i found the Problem, after i enter name=&quot;CommentsUpdated&quot; inside the activity in struts-config.xml..it works! hope this might helpful for others too!","body":"finally i found the Problem, after i enter name=&quot;CommentsUpdated&quot; inside the activity in struts-config.xml..it works! hope this might helpful for others too!"}],"answers":[{"tags":[],"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1415933944,"creation_date":1415933944,"answer_id":26922188,"question_id":26900012,"body_markdown":"    &lt;action path=&quot;/Link&quot; parameter=&quot;method&quot; type=&quot;com.sicmsb.action.LinkAction&quot; name=&quot;CommentsUpdated&quot;&gt;\r\n            \t&lt;forward name=&quot;baseLayout&quot; path=&quot;baseLayout&quot;/&gt;\r\n                &lt;forward name=&quot;search&quot; path=&quot;search&quot;/&gt;\r\n                &lt;forward name=&quot;details&quot; path=&quot;details&quot;/&gt;\r\n                &lt;forward name=&quot;insert&quot; path=&quot;insert&quot;/&gt;\r\n\r\nfinally i found the Problem, after i enter `name=&quot;CommentsUpdated&quot;` inside the activity in struts-config.xml..it works! hope this might helpful for others too!","title":"javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope","body":"<pre><code>&lt;action path=\"/Link\" parameter=\"method\" type=\"com.sicmsb.action.LinkAction\" name=\"CommentsUpdated\"&gt;\n            &lt;forward name=\"baseLayout\" path=\"baseLayout\"/&gt;\n            &lt;forward name=\"search\" path=\"search\"/&gt;\n            &lt;forward name=\"details\" path=\"details\"/&gt;\n            &lt;forward name=\"insert\" path=\"insert\"/&gt;\n</code></pre>\n\n<p>finally i found the Problem, after i enter <code>name=\"CommentsUpdated\"</code> inside the activity in struts-config.xml..it works! hope this might helpful for others too!</p>\n"},{"tags":[],"owner":{"account_id":698222,"reputation":50202,"user_id":573032,"accept_rate":77,"display_name":"Roman C"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1489252908,"creation_date":1489252908,"answer_id":42738275,"question_id":26900012,"body_markdown":"If you didn&#39;t set the `name` property in the action config, which should be the same as `&lt;form-bean&gt;` name, but used the name in the tag\n\n&lt;!-- language: lang-jsp --&gt;\n\n    &lt;html:text name=&quot;CommentsUpdated&quot; .../&gt;\n\nof course you got an exception\n\n&gt;### Cannot find bean: CommentsUpdated in any scope\n\nStruts will instantiate a form-bean and pass it to the action if the form bean and action name are configured. If you want to instantiate it yourself then you should put it into any scope before accessing it in JSP.\n\n","title":"javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope","body":"<p>If you didn't set the <code>name</code> property in the action config, which should be the same as <code>&lt;form-bean&gt;</code> name, but used the name in the tag</p>\n<pre class=\"lang-jsp prettyprint-override\"><code>&lt;html:text name=&quot;CommentsUpdated&quot; .../&gt;\n</code></pre>\n<p>of course you got an exception</p>\n<blockquote>\n<h3>Cannot find bean: CommentsUpdated in any scope</h3>\n</blockquote>\n<p>Struts will instantiate a form-bean and pass it to the action if the form bean and action name are configured. If you want to instantiate it yourself then you should put it into any scope before accessing it in JSP.</p>\n"}],"owner":{"account_id":5293280,"reputation":21,"user_id":4225131,"display_name":"Amos"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20909,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1695762541,"creation_date":1415843397,"question_id":26900012,"body_markdown":"**`Struts-config.xml`:**\r\n\r\n&lt;!-- language-all: lang-xml --&gt;\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n\r\n    &lt;!DOCTYPE struts-config PUBLIC\r\n          &quot;-//Apache Software Foundation//DTD Struts Configuration 1.2//EN&quot;\r\n          &quot;http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd&quot;&gt;\r\n    &lt;struts-config&gt;\r\n      &lt;form-beans&gt;\r\n      &lt;/form-beans&gt;\r\n    \r\n      &lt;global-exceptions&gt;\r\n      &lt;/global-exceptions&gt;\r\n\r\n    &lt;global-forwards&gt;\r\n        &lt;forward name=&quot;welcome&quot;  path=&quot;/Welcome.do&quot;/&gt;\r\n    &lt;/global-forwards&gt;\r\n\r\n    &lt;action-mappings&gt;\r\n        &lt;action path=&quot;/Link&quot; parameter=&quot;method&quot; type=&quot;com.sicmsb.action.LinkAction&quot;&gt;\r\n            &lt;forward name=&quot;search&quot; path=&quot;search&quot;/&gt;\r\n        &lt;/action&gt;\r\n        &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot;/&gt;\r\n    &lt;/action-mappings&gt;\r\n    \r\n    &lt;controller processorClass=&quot;org.apache.struts.tiles.TilesRequestProcessor&quot;/&gt;\r\n\r\n    &lt;message-resources parameter=&quot;com/vaannila/ApplicationResource&quot;/&gt;\r\n    \r\n    &lt;plug-in className=&quot;org.apache.struts.tiles.TilesPlugin&quot; &gt;\r\n        &lt;set-property property=&quot;definitions-config&quot; value=&quot;/WEB-INF/tiles-defs.xml&quot; /&gt;      \r\n        &lt;set-property property=&quot;moduleAware&quot; value=&quot;true&quot; /&gt;\r\n    &lt;/plug-in&gt;\r\n    \r\n    &lt;plug-in className=&quot;org.apache.struts.validator.ValidatorPlugIn&quot;&gt;\r\n        &lt;set-property\r\n            property=&quot;pathnames&quot;\r\n            value=&quot;/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml&quot;/&gt;\r\n    &lt;/plug-in&gt;\r\n  \r\n    &lt;/struts-config&gt;\r\n\r\n**`tiles-defs.xml`:**\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\r\n    \r\n     &lt;!DOCTYPE tiles-definitions PUBLIC\r\n           &quot;-//Apache Software Foundation//DTD Tiles Configuration 1.1//EN&quot;\r\n           &quot;http://jakarta.apache.org/struts/dtds/tiles-config_1_1.dtd&quot;&gt;\r\n    &lt;tiles-definitions&gt;\r\n    \t&lt;definition name=&quot;baseLayout&quot; path=&quot;/common-layout.jsp&quot;&gt;\r\n    \t\t&lt;put name=&quot;header&quot; value=&quot;/header.jsp&quot; /&gt;\r\n    \t\t&lt;put name=&quot;body&quot; value=&quot;/body.jsp&quot; /&gt;\r\n    \t\t&lt;put name=&quot;footer&quot; value=&quot;/footer.jsp&quot; /&gt;\r\n    \t&lt;/definition&gt;\r\n    \t&lt;definition name=&quot;search&quot; extends=&quot;baseLayout&quot;&gt;\r\n    \r\n    \t\t&lt;put name=&quot;body&quot; value=&quot;/searchMyUser.jsp&quot; /&gt;\r\n    \t&lt;/definition&gt;\r\n    &lt;/tiles-definitions&gt;\r\n\r\n**`common-layout.jsp`:**\r\n\r\n    &lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot; %&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\r\n    &lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;\r\n       &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n    &lt;html&gt;\r\n    \r\n    &lt;head&gt;\r\n    &lt;title&gt;&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t &lt;table border=&quot;1&quot;  width=&quot;100%&quot; height=&quot;100%&quot;&gt;\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td&gt;&lt;tiles:insert attribute=&quot;header&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td&gt;&lt;tiles:insert attribute=&quot;body&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;td&gt;&lt;tiles:insert attribute=&quot;footer&quot; /&gt;&lt;/td&gt;\r\n    \t\t&lt;/tr&gt;\r\n    \t&lt;/table&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**`searchMyUser.jsp`:**\r\n\r\n    &lt;%@page import=&quot;com.sicmsb.bean.Comments&quot;%&gt;\r\n    &lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\r\n    \tpageEncoding=&quot;ISO-8859-1&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-bean&quot; prefix=&quot;bean&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot;%&gt;\r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-logic&quot; prefix=&quot;logic&quot;%&gt;\r\n    \r\n    &lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\r\n    &lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\r\n    \r\n    &lt;html&gt;\r\n    &lt;head&gt;\r\n    &lt;script&gt;\r\n    \tfunction submitAdd(form) {\r\n    \t\tform.submit();\r\n    \t}\r\n    \r\n    \tfunction goDetail(commentId) {\r\n    \t\tvar myform = document[&#39;detForm&#39;];\r\n    \t\t//myform.action = &quot;/detail.do&quot;;\r\n    \t\tmyform[&#39;commentId&#39;].value = commentId;\r\n    \t\tmyform.submit();\r\n    \t}\r\n    &lt;/script&gt;\r\n    &lt;style&gt;\r\n    A {\r\n    \ttext-decoration: underline;\r\n    \tcolor: blue;\r\n    \tcursor: pointer;\r\n    }\r\n    &lt;/style&gt;\r\n    \r\n    &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\r\n    \r\n    &lt;title&gt;Search here&lt;/title&gt;\r\n    &lt;/head&gt;\r\n    &lt;body&gt;\r\n    \t&lt;form name=&quot;detForm&quot; action=&quot;details.do&quot; method=&quot;post&quot;&gt;\r\n    \t\t&lt;input type=&quot;hidden&quot; name=&quot;commentId&quot; /&gt;\r\n    \t&lt;/form&gt;\r\n    \r\n    \t&lt;h1&gt;Search in MyUser&lt;/h1&gt;\r\n    \r\n    \t&lt;form action=&quot;SearchUser.do&quot; method=&quot;post&quot;&gt;\r\n    \t\t&lt;table cellpadding=&quot;3pt&quot;&gt;\r\n    \t\t\t&lt;tr&gt;\r\n    \t\t\t\t&lt;td&gt;Insert Name : &lt;html:text name=&quot;CommentsUpdated&quot;\r\n    \t\t\t\t\t\tproperty=&quot;myUser&quot; size=&quot;30&quot;&gt;&lt;/html:text&gt;&lt;/td&gt;\r\n    \t\t\t&lt;/tr&gt;\r\n    \t\t&lt;/table&gt;\r\n    \t\t&lt;p /&gt;\r\n    \t\t&lt;input type=&quot;button&quot; value=&quot;Search&quot;\r\n    \t\t\tonclick=&quot;this.disabled=true; submitAdd(this.form)&quot; /&gt;\r\n    \t&lt;/form&gt;\r\n    \r\n    \t&lt;hr /&gt;\r\n\r\n    \t&lt;table&gt;\r\n    \t\t&lt;tr&gt;\r\n    \t\t\t&lt;th&gt;Name&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Email&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Webpage&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Summary&lt;/th&gt;\r\n    \t\t\t&lt;th&gt;Comments&lt;/th&gt;\r\n    \t\t&lt;/tr&gt;\r\n    \r\n    \t\t&lt;logic:iterate id=&quot;comment&quot; name=&quot;listComments&quot;\r\n    \t\t\ttype=&quot;com.sicmsb.bean.Comments&quot;&gt;\r\n    \t\t\t&lt;tr&gt;\r\n    \t\t\t\t&lt;td&gt;&lt;a onclick=&quot;goDetail(&#39;&lt;%=comment.getCommentId()%&gt;&#39;)&quot;&gt; &lt;bean:write\r\n    \t\t\t\t\t\t\tname=&quot;comment&quot; property=&quot;myuser&quot; /&gt;\r\n    \t\t\t\t&lt;/a&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;email&quot; /&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;webpage&quot; /&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;summary&quot; /&gt;\r\n    \t\t\t\t&lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;comments&quot; /&gt;\r\n    \t\t\t&lt;/tr&gt;\r\n    \t\t&lt;/logic:iterate&gt;\r\n    \t&lt;/table&gt;\r\n    &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n**`LinkAction.java`:**\r\n\r\n&lt;!-- language-all: lang-java --&gt;\r\n\r\n    package com.sicmsb.action;\r\n    \r\n    import javax.servlet.http.HttpServletRequest;\r\n    import javax.servlet.http.HttpServletResponse;\r\n    \r\n    import org.apache.struts.actions.DispatchAction;\r\n    import org.apache.struts.action.ActionForm;\r\n    import org.apache.struts.action.ActionMapping;\r\n    import org.apache.struts.action.ActionForward;\r\n    \r\n    public class LinkAction extends DispatchAction {\r\n        public ActionForward Search(ActionMapping mapping, ActionForm  form,\r\n                HttpServletRequest request, HttpServletResponse response)\r\n                throws Exception {\r\n            return mapping.findForward(&quot;search&quot;);\r\n        }\r\n    }\r\n\r\nI managed to create the template and call in the forms without the &quot;name&quot; attributes.It worked, then i realized i have to call in forms that have names attribute(`CommentsUpdated`) so that i able to pass the variables for digging the data from database.Unluckily it throws error like this:\r\n\r\n`javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope`.\r\n\r\ni understand that the name attribute in my `serachMyUser.jsp` causing this error, but i&#39;m stuck on this part, i&#39;ve tried to search in google for examples, but all i get is the forms were called in without names attribute in it. ","title":"javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope","body":"<p><strong><code>Struts-config.xml</code>:</strong></p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n\n&lt;!DOCTYPE struts-config PUBLIC\n      &quot;-//Apache Software Foundation//DTD Struts Configuration 1.2//EN&quot;\n      &quot;http://jakarta.apache.org/struts/dtds/struts-config_1_2.dtd&quot;&gt;\n&lt;struts-config&gt;\n  &lt;form-beans&gt;\n  &lt;/form-beans&gt;\n\n  &lt;global-exceptions&gt;\n  &lt;/global-exceptions&gt;\n\n&lt;global-forwards&gt;\n    &lt;forward name=&quot;welcome&quot;  path=&quot;/Welcome.do&quot;/&gt;\n&lt;/global-forwards&gt;\n\n&lt;action-mappings&gt;\n    &lt;action path=&quot;/Link&quot; parameter=&quot;method&quot; type=&quot;com.sicmsb.action.LinkAction&quot;&gt;\n        &lt;forward name=&quot;search&quot; path=&quot;search&quot;/&gt;\n    &lt;/action&gt;\n    &lt;action path=&quot;/Welcome&quot; forward=&quot;/welcomeStruts.jsp&quot;/&gt;\n&lt;/action-mappings&gt;\n\n&lt;controller processorClass=&quot;org.apache.struts.tiles.TilesRequestProcessor&quot;/&gt;\n\n&lt;message-resources parameter=&quot;com/vaannila/ApplicationResource&quot;/&gt;\n\n&lt;plug-in className=&quot;org.apache.struts.tiles.TilesPlugin&quot; &gt;\n    &lt;set-property property=&quot;definitions-config&quot; value=&quot;/WEB-INF/tiles-defs.xml&quot; /&gt;      \n    &lt;set-property property=&quot;moduleAware&quot; value=&quot;true&quot; /&gt;\n&lt;/plug-in&gt;\n\n&lt;plug-in className=&quot;org.apache.struts.validator.ValidatorPlugIn&quot;&gt;\n    &lt;set-property\n        property=&quot;pathnames&quot;\n        value=&quot;/WEB-INF/validator-rules.xml,/WEB-INF/validation.xml&quot;/&gt;\n&lt;/plug-in&gt;\n\n&lt;/struts-config&gt;\n</code></pre>\n<p><strong><code>tiles-defs.xml</code>:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n\n &lt;!DOCTYPE tiles-definitions PUBLIC\n       &quot;-//Apache Software Foundation//DTD Tiles Configuration 1.1//EN&quot;\n       &quot;http://jakarta.apache.org/struts/dtds/tiles-config_1_1.dtd&quot;&gt;\n&lt;tiles-definitions&gt;\n    &lt;definition name=&quot;baseLayout&quot; path=&quot;/common-layout.jsp&quot;&gt;\n        &lt;put name=&quot;header&quot; value=&quot;/header.jsp&quot; /&gt;\n        &lt;put name=&quot;body&quot; value=&quot;/body.jsp&quot; /&gt;\n        &lt;put name=&quot;footer&quot; value=&quot;/footer.jsp&quot; /&gt;\n    &lt;/definition&gt;\n    &lt;definition name=&quot;search&quot; extends=&quot;baseLayout&quot;&gt;\n\n        &lt;put name=&quot;body&quot; value=&quot;/searchMyUser.jsp&quot; /&gt;\n    &lt;/definition&gt;\n&lt;/tiles-definitions&gt;\n</code></pre>\n<p><strong><code>common-layout.jsp</code>:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@page contentType=&quot;text/html&quot; pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot; %&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\n&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;\n   &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n&lt;html&gt;\n\n&lt;head&gt;\n&lt;title&gt;&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n     &lt;table border=&quot;1&quot;  width=&quot;100%&quot; height=&quot;100%&quot;&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;tiles:insert attribute=&quot;header&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n            &lt;td&gt;&lt;tiles:insert attribute=&quot;body&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n        &lt;tr&gt;\n            &lt;td&gt;&lt;tiles:insert attribute=&quot;footer&quot; /&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong><code>searchMyUser.jsp</code>:</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;%@page import=&quot;com.sicmsb.bean.Comments&quot;%&gt;\n&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=ISO-8859-1&quot;\n    pageEncoding=&quot;ISO-8859-1&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-bean&quot; prefix=&quot;bean&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-html&quot; prefix=&quot;html&quot;%&gt;\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-logic&quot; prefix=&quot;logic&quot;%&gt;\n\n&lt;%@ taglib uri=&quot;http://struts.apache.org/tags-tiles&quot; prefix=&quot;tiles&quot;%&gt;\n&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n\n&lt;html&gt;\n&lt;head&gt;\n&lt;script&gt;\n    function submitAdd(form) {\n        form.submit();\n    }\n\n    function goDetail(commentId) {\n        var myform = document['detForm'];\n        //myform.action = &quot;/detail.do&quot;;\n        myform['commentId'].value = commentId;\n        myform.submit();\n    }\n&lt;/script&gt;\n&lt;style&gt;\nA {\n    text-decoration: underline;\n    color: blue;\n    cursor: pointer;\n}\n&lt;/style&gt;\n\n&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot;&gt;\n\n&lt;title&gt;Search here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;form name=&quot;detForm&quot; action=&quot;details.do&quot; method=&quot;post&quot;&gt;\n        &lt;input type=&quot;hidden&quot; name=&quot;commentId&quot; /&gt;\n    &lt;/form&gt;\n\n    &lt;h1&gt;Search in MyUser&lt;/h1&gt;\n\n    &lt;form action=&quot;SearchUser.do&quot; method=&quot;post&quot;&gt;\n        &lt;table cellpadding=&quot;3pt&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Insert Name : &lt;html:text name=&quot;CommentsUpdated&quot;\n                        property=&quot;myUser&quot; size=&quot;30&quot;&gt;&lt;/html:text&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/table&gt;\n        &lt;p /&gt;\n        &lt;input type=&quot;button&quot; value=&quot;Search&quot;\n            onclick=&quot;this.disabled=true; submitAdd(this.form)&quot; /&gt;\n    &lt;/form&gt;\n\n    &lt;hr /&gt;\n\n    &lt;table&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th&gt;Email&lt;/th&gt;\n            &lt;th&gt;Webpage&lt;/th&gt;\n            &lt;th&gt;Summary&lt;/th&gt;\n            &lt;th&gt;Comments&lt;/th&gt;\n        &lt;/tr&gt;\n\n        &lt;logic:iterate id=&quot;comment&quot; name=&quot;listComments&quot;\n            type=&quot;com.sicmsb.bean.Comments&quot;&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;a onclick=&quot;goDetail('&lt;%=comment.getCommentId()%&gt;')&quot;&gt; &lt;bean:write\n                            name=&quot;comment&quot; property=&quot;myuser&quot; /&gt;\n                &lt;/a&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;email&quot; /&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;webpage&quot; /&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;summary&quot; /&gt;\n                &lt;td&gt;|&lt;bean:write name=&quot;comment&quot; property=&quot;comments&quot; /&gt;\n            &lt;/tr&gt;\n        &lt;/logic:iterate&gt;\n    &lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><strong><code>LinkAction.java</code>:</strong></p>\n\n<pre class=\"lang-java prettyprint-override\"><code>package com.sicmsb.action;\n\nimport javax.servlet.http.HttpServletRequest;\nimport javax.servlet.http.HttpServletResponse;\n\nimport org.apache.struts.actions.DispatchAction;\nimport org.apache.struts.action.ActionForm;\nimport org.apache.struts.action.ActionMapping;\nimport org.apache.struts.action.ActionForward;\n\npublic class LinkAction extends DispatchAction {\n    public ActionForward Search(ActionMapping mapping, ActionForm  form,\n            HttpServletRequest request, HttpServletResponse response)\n            throws Exception {\n        return mapping.findForward(&quot;search&quot;);\n    }\n}\n</code></pre>\n<p>I managed to create the template and call in the forms without the &quot;name&quot; attributes.It worked, then i realized i have to call in forms that have names attribute(<code>CommentsUpdated</code>) so that i able to pass the variables for digging the data from database.Unluckily it throws error like this:</p>\n<p><code>javax.servlet.jsp.JspException: Cannot find bean: &quot;CommentsUpdated&quot; in any scope</code>.</p>\n<p>i understand that the name attribute in my <code>serachMyUser.jsp</code> causing this error, but i'm stuck on this part, i've tried to search in google for examples, but all i get is the forms were called in without names attribute in it.</p>\n"},{"tags":["java","exception","httpurlconnection","http-status-codes"],"comments":[{"owner":{"account_id":5694623,"reputation":6528,"user_id":4501480,"accept_rate":55,"display_name":"Vikrant Kashyap"},"score":0,"creation_date":1459656559,"post_id":36381353,"comment_id":60380376,"body_markdown":"HTTP Error 401 - Unauthorized: Access is denied due to invalid credentials. This behavior occurs if the following conditions are true: The Web site that you try to view uses Integrated Windows authentication. The application pool for the Web site recycles during the authentication process.","body":"HTTP Error 401 - Unauthorized: Access is denied due to invalid credentials. This behavior occurs if the following conditions are true: The Web site that you try to view uses Integrated Windows authentication. The application pool for the Web site recycles during the authentication process."}],"answers":[{"comments":[{"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"score":1,"creation_date":1459655526,"post_id":36381364,"comment_id":60380202,"body_markdown":"I included a test. I call getResponseCode before getInputStream and I got IOException. Please see my example!","body":"I included a test. I call getResponseCode before getInputStream and I got IOException. Please see my example!"},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1459655695,"post_id":36381364,"comment_id":60380232,"body_markdown":"@Loc The exception is thrown by `getInputStream()` in both cases. Your new example is futile because you ignored the result of `getResponseCode()`. If you had programmed it properly, as I assumed, you would have seen that the value was 401 and not attempted to call `getInputStream()` at all.","body":"@Loc The exception is thrown by <code>getInputStream()</code> in both cases. Your new example is futile because you ignored the result of <code>getResponseCode()</code>. If you had programmed it properly, as I assumed, you would have seen that the value was 401 and not attempted to call <code>getInputStream()</code> at all."},{"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"score":0,"creation_date":1459655995,"post_id":36381364,"comment_id":60380281,"body_markdown":"I understand it now. Thank you!","body":"I understand it now. Thank you!"}],"tags":[],"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"comment_count":3,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1459656470,"creation_date":1459654777,"answer_id":36381364,"question_id":36381353,"body_markdown":"Not if you check `getResponseCode()` before `getInputStream()` and the problem is an HTTP return code rather than a connect error.","title":"Does java.net.HttpUrlConnection always throw IOException if there is an error status return by Server?","body":"<p>Not if you check <code>getResponseCode()</code> before <code>getInputStream()</code> and the problem is an HTTP return code rather than a connect error.</p>\n"},{"tags":[],"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695762383,"creation_date":1695762383,"answer_id":77183426,"question_id":36381353,"body_markdown":"In case of codes beyond 400 you need to call `HttpURLConnection.getErrorStream()` instead of `HttpURLConnection.getInputStream()`. Java 11 implementation:\r\n\r\n    public InputStream getErrorStream() {\r\n        if (this.connected &amp;&amp; this.responseCode &gt;= 400) {\r\n            if (this.errorStream != null) {\r\n                return this.errorStream;\r\n            }\r\n            if (this.inputStream != null) {\r\n                return this.inputStream;\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n","title":"Does java.net.HttpUrlConnection always throw IOException if there is an error status return by Server?","body":"<p>In case of codes beyond 400 you need to call <code>HttpURLConnection.getErrorStream()</code> instead of <code>HttpURLConnection.getInputStream()</code>. Java 11 implementation:</p>\n<pre><code>public InputStream getErrorStream() {\n    if (this.connected &amp;&amp; this.responseCode &gt;= 400) {\n        if (this.errorStream != null) {\n            return this.errorStream;\n        }\n        if (this.inputStream != null) {\n            return this.inputStream;\n        }\n    }\n    return null;\n}\n</code></pre>\n"}],"owner":{"account_id":3619169,"reputation":9458,"user_id":3018377,"accept_rate":64,"display_name":"LHA"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3788,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":36381364,"answer_count":2,"score":2,"last_activity_date":1695762383,"creation_date":1459654637,"question_id":36381353,"body_markdown":"I am using **java.net.HttpUrlConnection** to make Http requests to my Server. I realized that if the Server return an error status (400 for example). HttpUrlConnection will throw an IOException corresponding to the error status.\r\n\r\nMy question is:  **Does HttpUrlConnection always throw an IOException if the server return an error status (4xx, 5xx)?**\r\n\r\nI take a look at [HttpUrlConnection][1] API description but I couldn&#39;t answer my question.\r\n\r\n**Updated: Please see my test:**\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\ttry {\r\n\t\t\t\r\n            String url = &quot;https://www.googleapis.com/oauth2/v3/userinfo?access_token=___fake_token&quot;;\r\n\t\t\tHttpURLConnection conn = (HttpURLConnection)new URL(url).openConnection();\r\n\t\t\t\r\n\t\t\tconn.getResponseCode();\r\n\t\t\tconn.getInputStream();\r\n\t\t\t\r\n\t\t} catch (Exception ex) {\r\n\t\t\tex.printStackTrace();\r\n\t\t\t// Print IOException: java.io.IOException: Server returned HTTP response code: 401 for URL: https://www.googleapis.com/oauth2/v3/userinfo?access_token=abc\r\n\r\n            // If I commented conn.getResponseCode() -&gt; The same IOException\r\n\t\t}\r\n\t}\r\n\r\nThank you!\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html","title":"Does java.net.HttpUrlConnection always throw IOException if there is an error status return by Server?","body":"<p>I am using <strong>java.net.HttpUrlConnection</strong> to make Http requests to my Server. I realized that if the Server return an error status (400 for example). HttpUrlConnection will throw an IOException corresponding to the error status.</p>\n<p>My question is:  <strong>Does HttpUrlConnection always throw an IOException if the server return an error status (4xx, 5xx)?</strong></p>\n<p>I take a look at <a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/HttpURLConnection.html\" rel=\"nofollow noreferrer\">HttpUrlConnection</a> API description but I couldn't answer my question.</p>\n<p><strong>Updated: Please see my test:</strong></p>\n<pre><code>public static void main(String[] args) {\n    try {\n        \n        String url = &quot;https://www.googleapis.com/oauth2/v3/userinfo?access_token=___fake_token&quot;;\n        HttpURLConnection conn = (HttpURLConnection)new URL(url).openConnection();\n        \n        conn.getResponseCode();\n        conn.getInputStream();\n        \n    } catch (Exception ex) {\n        ex.printStackTrace();\n        // Print IOException: java.io.IOException: Server returned HTTP response code: 401 for URL: https://www.googleapis.com/oauth2/v3/userinfo?access_token=abc\n\n        // If I commented conn.getResponseCode() -&gt; The same IOException\n    }\n}\n</code></pre>\n<p>Thank you!</p>\n"},{"tags":["java","database","h2"],"comments":[{"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":4,"creation_date":1329422216,"post_id":9318116,"comment_id":11755838,"body_markdown":"http://www.h2database.com/html/tutorial.html#using_server","body":"<a href=\"http://www.h2database.com/html/tutorial.html#using_server\" rel=\"nofollow noreferrer\">h2database.com/html/tutorial.html#using_server</a>"},{"owner":{"account_id":151106,"reputation":9166,"user_id":364746,"accept_rate":84,"display_name":"Feras Odeh"},"score":1,"creation_date":1329423373,"post_id":9318116,"comment_id":11756289,"body_markdown":"This doesn&#39;t work for me","body":"This doesn&#39;t work for me"},{"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":1,"creation_date":1329423647,"post_id":9318116,"comment_id":11756369,"body_markdown":"OK...               I mean - please be more specific. Why this doesn&#39;t work? What do you want to achieve? What have you tried so far?","body":"OK...               I mean - please be more specific. Why this doesn&#39;t work? What do you want to achieve? What have you tried so far?"},{"owner":{"account_id":60171,"reputation":115485,"user_id":179850,"accept_rate":100,"display_name":"Gray"},"score":0,"creation_date":1329427421,"post_id":9318116,"comment_id":11757727,"body_markdown":"Please demonstrate the research, code, work you have done up to now.","body":"Please demonstrate the research, code, work you have done up to now."}],"answers":[{"comments":[{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":1,"creation_date":1437177031,"post_id":9328973,"comment_id":50937081,"body_markdown":"The exception message gives the impression that running the database in `embedded mode` allows only 1 connection, while putting it in `server mode` will allow multiple connections. Isn&#39;t that the case ?","body":"The exception message gives the impression that running the database in <code>embedded mode</code> allows only 1 connection, while putting it in <code>server mode</code> will allow multiple connections. Isn&#39;t that the case ?"},{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":0,"creation_date":1437245128,"post_id":9328973,"comment_id":50952221,"body_markdown":"No, that&#39;s not the case. See the documentation.","body":"No, that&#39;s not the case. See the documentation."},{"owner":{"account_id":1204576,"reputation":2855,"user_id":1174543,"accept_rate":80,"display_name":"Steve11235"},"score":11,"creation_date":1458325007,"post_id":9328973,"comment_id":59827307,"body_markdown":"@Thomas--I&#39;ve scanned a number of posts, and I keep seeing you say to look at the documentation. Please don&#39;t do that. The documentation, especially around startTcpServer, is sparse at best. The server starts, and it can be shutdown remotely, but it refuses all connections.","body":"@Thomas--I&#39;ve scanned a number of posts, and I keep seeing you say to look at the documentation. Please don&#39;t do that. The documentation, especially around startTcpServer, is sparse at best. The server starts, and it can be shutdown remotely, but it refuses all connections."},{"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"score":1,"creation_date":1458415255,"post_id":9328973,"comment_id":59854156,"body_markdown":"@Steve11235 I wrote &quot;see the documentation&quot; for the question &quot;embedded mode allows only 1 connection&quot;. This is clearly documented. The TcpServer  might not be documented well enough, that&#39;s true. But this question here is not about the TcpServer. Maybe you should write your own question?","body":"@Steve11235 I wrote &quot;see the documentation&quot; for the question &quot;embedded mode allows only 1 connection&quot;. This is clearly documented. The TcpServer  might not be documented well enough, that&#39;s true. But this question here is not about the TcpServer. Maybe you should write your own question?"}],"tags":[],"owner":{"account_id":161745,"reputation":49245,"user_id":382763,"accept_rate":92,"display_name":"Thomas Mueller"},"comment_count":4,"down_vote_count":0,"up_vote_count":33,"is_accepted":true,"score":33,"last_activity_date":1624274476,"creation_date":1329484819,"answer_id":9328973,"question_id":9318116,"body_markdown":"As the exception message says, &quot;Database may be already in use&quot;. You need to close all other connection(s), to make sure the database is not open in another process concurrently.\r\n\r\nBy the way, don&#39;t use `AUTO_SERVER=TRUE` _and_ the server mode at the same time. See the documentation for the [automatic mixed mode][1]. Use either one. \r\n\r\nI guess you are a bit confused about the different connection modes. I suggest to read [the documentation about the connection modes][2], to make sure you understand it.\r\n\r\n\r\n  [1]: http://h2database.com/html/features.html#auto_mixed_mode\r\n  [2]: http://h2database.com/html/features.html#connection_modes","title":"How to run H2 database in server mode?","body":"<p>As the exception message says, &quot;Database may be already in use&quot;. You need to close all other connection(s), to make sure the database is not open in another process concurrently.</p>\n<p>By the way, don't use <code>AUTO_SERVER=TRUE</code> <em>and</em> the server mode at the same time. See the documentation for the <a href=\"http://h2database.com/html/features.html#auto_mixed_mode\" rel=\"nofollow noreferrer\">automatic mixed mode</a>. Use either one.</p>\n<p>I guess you are a bit confused about the different connection modes. I suggest to read <a href=\"http://h2database.com/html/features.html#connection_modes\" rel=\"nofollow noreferrer\">the documentation about the connection modes</a>, to make sure you understand it.</p>\n"},{"comments":[{"owner":{"account_id":11466702,"reputation":387,"user_id":8404716,"display_name":"Justin.Cooke"},"score":1,"creation_date":1512636230,"post_id":19036460,"comment_id":82340722,"body_markdown":"org.h2.jdbc.JdbcSQLException: A file path that is implicitly relative to the current working directory is not allowed in the database URL &quot;jdbc:h2:target/h2/ps;AUTO_SERVER=TRUE&quot;. Use an absolute path, ~/name, ./name, or the baseDir setting instead. [90011-196]","body":"org.h2.jdbc.JdbcSQLException: A file path that is implicitly relative to the current working directory is not allowed in the database URL &quot;jdbc:h2:target/h2/ps;AUTO_SERVER=TRUE&quot;. Use an absolute path, ~/name, ./name, or the baseDir setting instead. [90011-196]"}],"tags":[],"owner":{"account_id":913756,"reputation":973,"user_id":1366617,"accept_rate":71,"display_name":"yousafsajjad"},"comment_count":1,"down_vote_count":1,"up_vote_count":15,"is_accepted":false,"score":14,"last_activity_date":1571748935,"creation_date":1380221987,"answer_id":19036460,"question_id":9318116,"body_markdown":"You can use the following code to run H2 in server mode.\r\n\r\n    &lt;bean id=&quot;dataSource&quot; class=&quot;org.apache.commons.dbcp.BasicDataSource&quot;\r\n\tdestroy-method=&quot;close&quot;&gt;\r\n\t    &lt;property name=&quot;driverClassName&quot; value=&quot;org.h2.Driver&quot; /&gt;\r\n    \t&lt;property name=&quot;url&quot; value=&quot;jdbc:h2:target/h2/ps;AUTO_SERVER=TRUE&quot; /&gt;\r\n\t    &lt;property name=&quot;username&quot; value=&quot;sa&quot; /&gt;\r\n    \t&lt;property name=&quot;password&quot; value=&quot;&quot; /&gt;\r\n    &lt;/bean&gt;\r\n\r\nYou can use SQuirrel SQL client (http://squirrel-sql.sourceforge.net/) to connect to you H2 database and look at the tables.\r\n\r\n1. Create new connection.\r\n2. Select H2 in the driver dropdown menu\r\n3. Set url to your project target folder h2 folder (jdbc:h2:C:\\projects\\workspace\\TestProject\\target/h2/ps;AUTO_SERVER=true)\r\n4. Enter user name (&quot;sa&quot;)\r\n5. Enter password (&quot;&quot;)","title":"How to run H2 database in server mode?","body":"<p>You can use the following code to run H2 in server mode.</p>\n\n<pre><code>&lt;bean id=\"dataSource\" class=\"org.apache.commons.dbcp.BasicDataSource\"\ndestroy-method=\"close\"&gt;\n    &lt;property name=\"driverClassName\" value=\"org.h2.Driver\" /&gt;\n    &lt;property name=\"url\" value=\"jdbc:h2:target/h2/ps;AUTO_SERVER=TRUE\" /&gt;\n    &lt;property name=\"username\" value=\"sa\" /&gt;\n    &lt;property name=\"password\" value=\"\" /&gt;\n&lt;/bean&gt;\n</code></pre>\n\n<p>You can use SQuirrel SQL client (<a href=\"http://squirrel-sql.sourceforge.net/\" rel=\"nofollow noreferrer\">http://squirrel-sql.sourceforge.net/</a>) to connect to you H2 database and look at the tables.</p>\n\n<ol>\n<li>Create new connection.</li>\n<li>Select H2 in the driver dropdown menu</li>\n<li>Set url to your project target folder h2 folder (jdbc:h2:C:\\projects\\workspace\\TestProject\\target/h2/ps;AUTO_SERVER=true)</li>\n<li>Enter user name (\"sa\")</li>\n<li>Enter password (\"\")</li>\n</ol>\n"},{"comments":[{"owner":{"account_id":1202806,"reputation":23223,"user_id":1173112,"accept_rate":89,"display_name":"Koray Tugay"},"score":1,"creation_date":1469818281,"post_id":21672625,"comment_id":64712317,"body_markdown":"When using this approach, how do you increase the maximum number of allowed connections?","body":"When using this approach, how do you increase the maximum number of allowed connections?"},{"owner":{"account_id":2640370,"reputation":2355,"user_id":2284160,"display_name":"Lars"},"score":0,"creation_date":1493038874,"post_id":21672625,"comment_id":74226972,"body_markdown":"This one worked for me. Especially keep attention to the default TCP port: 9092 (can be adjusted using -tcpPort)!","body":"This one worked for me. Especially keep attention to the default TCP port: 9092 (can be adjusted using -tcpPort)!"}],"tags":[],"owner":{"account_id":557015,"reputation":992,"user_id":919312,"accept_rate":0,"display_name":"ERNESTO ARROYO RON"},"comment_count":2,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1561539235,"creation_date":1392022555,"answer_id":21672625,"question_id":9318116,"body_markdown":"From command line,\r\n\r\n    java -jar h2-1.3.160.jar -webAllowOthers -tcpAllowOthers\r\n\r\n\r\n\r\nthis will launch an h2 database in server mode:\r\n\r\n```none\r\nWeb Console server running at http://A.B.C.D:8082 (others can connect)\r\nTCP server running at tcp://A.B.C.D:9092 (others can connect)\r\nPG server running at pg://A.B.C.D:5435 (only local connections)\r\n```\r\n\r\nopen a browser to have an admin GUI","title":"How to run H2 database in server mode?","body":"<p>From command line,</p>\n\n<pre><code>java -jar h2-1.3.160.jar -webAllowOthers -tcpAllowOthers\n</code></pre>\n\n<p>this will launch an h2 database in server mode:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Web Console server running at http://A.B.C.D:8082 (others can connect)\nTCP server running at tcp://A.B.C.D:9092 (others can connect)\nPG server running at pg://A.B.C.D:5435 (only local connections)\n</code></pre>\n\n<p>open a browser to have an admin GUI</p>\n"},{"tags":[],"owner":{"account_id":8125967,"reputation":262,"user_id":6120928,"display_name":"Nimesha Kalinga"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1493966373,"creation_date":1493966373,"answer_id":43798150,"question_id":9318116,"body_markdown":"Close all the applications that using H2 (web console, etc)\r\nThen add the AUTO_SERVER=TRUE to the end of the location in h2 console and also in java program (which you already have done)\r\n ","title":"How to run H2 database in server mode?","body":"<p>Close all the applications that using H2 (web console, etc)\nThen add the AUTO_SERVER=TRUE to the end of the location in h2 console and also in java program (which you already have done)</p>\n"},{"tags":[],"owner":{"account_id":9698624,"reputation":46,"user_id":7194279,"display_name":"Manoj Kumar Mali"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1542945174,"creation_date":1542909581,"answer_id":53436188,"question_id":9318116,"body_markdown":"I was getting this error when trying to start H2.  \r\nSee also http://h2database.com/javadoc/org/h2/tools/Server.html  \r\n\r\n&gt; Exception in thread &quot;main&quot; org.h2.jdbc.JdbcSQLException: Feature not\r\n&gt; supported: &quot;-~webAllowOthers&quot; [50100-197]\r\n\r\nSo I followed these steps:  \r\n\r\n1. make dir mkdir h2db this directory will have your db files.\r\n2. Hit this command : `java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0`  \r\n   this command will start h2 \r\n3. If you want to run h2 in backend then open vi h2.sh and paste this command in this:\r\n   `nohup java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0/ &amp;`\r\n4. Now run ./bin.h2.sh.\r\n\r\n","title":"How to run H2 database in server mode?","body":"<p>I was getting this error when trying to start H2.<br>\nSee also <a href=\"http://h2database.com/javadoc/org/h2/tools/Server.html\" rel=\"nofollow noreferrer\">http://h2database.com/javadoc/org/h2/tools/Server.html</a>  </p>\n\n<blockquote>\n  <p>Exception in thread \"main\" org.h2.jdbc.JdbcSQLException: Feature not\n  supported: \"-~webAllowOthers\" [50100-197]</p>\n</blockquote>\n\n<p>So I followed these steps:  </p>\n\n<ol>\n<li>make dir mkdir h2db this directory will have your db files.</li>\n<li>Hit this command : <code>java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0</code><br>\nthis command will start h2 </li>\n<li>If you want to run h2 in backend then open vi h2.sh and paste this command in this:\n<code>nohup java -cp bin/h2-1.4.197.jar org.h2.tools.Server -web -webAllowOthers -tcp -tcpAllowOthers -baseDir /home/manoj/dev/h2/h2db_6.0/ &amp;</code></li>\n<li>Now run ./bin.h2.sh.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":20291587,"reputation":21,"user_id":14883137,"display_name":"Andrey Zaytsev"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695762221,"creation_date":1624251215,"answer_id":68062440,"question_id":9318116,"body_markdown":"There is one more way. You may define @Configuration bean, e.g.:\r\n\r\n\r\n    @Configuration\r\n    public class H2Configuration {\r\n    \r\n        @Bean\r\n        public void startTCPServer(){\r\n            try {\r\n                Server h2Server = Server.createTcpServer().start();\r\n                if (h2Server.isRunning(true)) {\r\n                    System.out.println(h2Server.getStatus());\r\n                } else {\r\n                    throw new RuntimeException(&quot;Could not start H2 server.&quot;);\r\n                }\r\n            } catch (SQLException e) {\r\n                throw new RuntimeException(&quot;Failed to start H2 server: &quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\n","title":"How to run H2 database in server mode?","body":"<p>There is one more way. You may define @Configuration bean, e.g.:</p>\n<pre><code>@Configuration\npublic class H2Configuration {\n\n    @Bean\n    public void startTCPServer(){\n        try {\n            Server h2Server = Server.createTcpServer().start();\n            if (h2Server.isRunning(true)) {\n                System.out.println(h2Server.getStatus());\n            } else {\n                throw new RuntimeException(&quot;Could not start H2 server.&quot;);\n            }\n        } catch (SQLException e) {\n            throw new RuntimeException(&quot;Failed to start H2 server: &quot;, e);\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":151106,"reputation":9166,"user_id":364746,"accept_rate":84,"display_name":"Feras Odeh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":143454,"favorite_count":0,"down_vote_count":2,"up_vote_count":39,"accepted_answer_id":9328973,"answer_count":6,"score":37,"last_activity_date":1695762221,"creation_date":1329422010,"question_id":9318116,"body_markdown":"I need to start H2 database in server mode from my application. Having tried the following code:\r\n\r\n    server = Server.createTcpServer().start();\r\n\r\nHere is the properties for the connection:\r\n\r\n    javabase.jdbc.url = jdbc:h2:tcp://localhost:9092/nio:~/source/db/database/db;AUTO_SERVER=TRUE\r\n    javabase.jdbc.driver = org.h2.Driver\r\n    javabase.jdbc.username = sa\r\n    javabase.jdbc.password =\r\n\r\n\r\nWhen I run the program, I got the following error:\r\n\r\n    client.db.exception.DAOException: org.h2.jdbc.JdbcSQLException: Database may be already in use: &quot;Locked by another process&quot;. Possible solutions: close all other connection(s); use the server mode [90020-164]\r\n    \tat org.h2.message.DbException.getJdbcSQLException(DbException.java:329)\r\n    \tat org.h2.message.DbException.get(DbException.java:169)\r\n    \tat org.h2.message.DbException.get(DbException.java:146)\r\n    \tat org.h2.store.FileLock.getExceptionAlreadyInUse(FileLock.java:439)\r\n    \tat org.h2.store.FileLock.lockFile(FileLock.java:336)\r\n    \tat org.h2.store.FileLock.lock(FileLock.java:128)\r\n    \tat org.h2.engine.Database.open(Database.java:542)\r\n    \tat org.h2.engine.Database.openDatabase(Database.java:222)\r\n    \tat org.h2.engine.Database.&lt;init&gt;(Database.java:217)\r\n    \tat org.h2.engine.Engine.openSession(Engine.java:56)\r\n    \tat org.h2.engine.Engine.openSession(Engine.java:159)\r\n    \tat org.h2.engine.Engine.createSessionAndValidate(Engine.java:138)\r\n    \tat org.h2.engine.Engine.createSession(Engine.java:121)\r\n    \tat org.h2.server.TcpServerThread.run(TcpServerThread.java:133)\r\n    \tat java.lang.Thread.run(Thread.java:680)\r\n\r\n\r\n\r\n","title":"How to run H2 database in server mode?","body":"<p>I need to start H2 database in server mode from my application. Having tried the following code:</p>\n<pre><code>server = Server.createTcpServer().start();\n</code></pre>\n<p>Here is the properties for the connection:</p>\n<pre><code>javabase.jdbc.url = jdbc:h2:tcp://localhost:9092/nio:~/source/db/database/db;AUTO_SERVER=TRUE\njavabase.jdbc.driver = org.h2.Driver\njavabase.jdbc.username = sa\njavabase.jdbc.password =\n</code></pre>\n<p>When I run the program, I got the following error:</p>\n<pre><code>client.db.exception.DAOException: org.h2.jdbc.JdbcSQLException: Database may be already in use: &quot;Locked by another process&quot;. Possible solutions: close all other connection(s); use the server mode [90020-164]\n    at org.h2.message.DbException.getJdbcSQLException(DbException.java:329)\n    at org.h2.message.DbException.get(DbException.java:169)\n    at org.h2.message.DbException.get(DbException.java:146)\n    at org.h2.store.FileLock.getExceptionAlreadyInUse(FileLock.java:439)\n    at org.h2.store.FileLock.lockFile(FileLock.java:336)\n    at org.h2.store.FileLock.lock(FileLock.java:128)\n    at org.h2.engine.Database.open(Database.java:542)\n    at org.h2.engine.Database.openDatabase(Database.java:222)\n    at org.h2.engine.Database.&lt;init&gt;(Database.java:217)\n    at org.h2.engine.Engine.openSession(Engine.java:56)\n    at org.h2.engine.Engine.openSession(Engine.java:159)\n    at org.h2.engine.Engine.createSessionAndValidate(Engine.java:138)\n    at org.h2.engine.Engine.createSession(Engine.java:121)\n    at org.h2.server.TcpServerThread.run(TcpServerThread.java:133)\n    at java.lang.Thread.run(Thread.java:680)\n</code></pre>\n"},{"tags":["java","spring-boot","google-app-engine"],"comments":[{"owner":{"account_id":13426160,"reputation":488,"user_id":9687449,"display_name":"Oliver Aragon"},"score":0,"creation_date":1570118978,"post_id":58113844,"comment_id":102821498,"body_markdown":"Are you using App Engine Standard or Flexible? Does it run on your local environment?","body":"Are you using App Engine Standard or Flexible? Does it run on your local environment?"},{"owner":{"account_id":16630867,"reputation":43,"user_id":12018748,"display_name":"Jonie_pe"},"score":0,"creation_date":1570571810,"post_id":58113844,"comment_id":102952930,"body_markdown":"@OliverAragon I try running it local with gradle appengineRun task. It should be standard.","body":"@OliverAragon I try running it local with gradle appengineRun task. It should be standard."},{"owner":{"account_id":13426160,"reputation":488,"user_id":9687449,"display_name":"Oliver Aragon"},"score":0,"creation_date":1570728618,"post_id":58113844,"comment_id":103014620,"body_markdown":"Did it work on you local environment?","body":"Did it work on you local environment?"},{"owner":{"account_id":9761175,"reputation":73,"user_id":7236219,"display_name":"Leandro Silva"},"score":1,"creation_date":1613515336,"post_id":58113844,"comment_id":117097499,"body_markdown":"I&#39;m having the same problem, but I&#39;m using maven and this error only happens when i run as test.","body":"I&#39;m having the same problem, but I&#39;m using maven and this error only happens when i run as test."},{"owner":{"account_id":273169,"reputation":2083,"user_id":564606,"accept_rate":79,"display_name":"ciferkey"},"score":1,"creation_date":1617594226,"post_id":58113844,"comment_id":118339438,"body_markdown":"Were you ever able to resolve this issue? I&#39;m facing the same issue myself right now.","body":"Were you ever able to resolve this issue? I&#39;m facing the same issue myself right now."}],"owner":{"account_id":16630867,"reputation":43,"user_id":12018748,"display_name":"Jonie_pe"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1246,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1695760040,"creation_date":1569490666,"question_id":58113844,"body_markdown":"I have a problem..\r\nI want to deploy my Spring Boot Gradle app to GC App Engine.\r\nI use the command :\r\n\r\n**gradle appengineDeploy**\r\n\r\nIt actually works but when i try to open the app in the browser it says :\r\n```\r\nError: Server Error\r\nThe server encountered an error and could not complete your request.\r\nPlease try again in 30 seconds.\r\n```\r\nSo the app was deployed successfully but it has a problem to start..\r\n\r\n```\r\njava.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cloudSqlDataSourceProperties&#39; defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method &#39;cloudSqlDataSourceProperties&#39; threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:68)\r\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\r\nat org.eclipse.jetty.servlet.ServletContextHandler.startContext (ServletContextHandler.java:330)\r\nat org.eclipse.jetty.webapp.WebAppContext.startWebapp (WebAppContext.java:1406)\r\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.startWebapp (AppEngineWebAppContext.java:175)\r\nat org.eclipse.jetty.webapp.WebAppContext.startContext (WebAppContext.java:1368)\r\nat org.eclipse.jetty.server.handler.ContextHandler.doStart (ContextHandler.java:778)\r\nat org.eclipse.jetty.servlet.ServletContextHandler.doStart (ServletContextHandler.java:262)\r\nat org.eclipse.jetty.webapp.WebAppContext.doStart (WebAppContext.java:522)\r\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.doStart (AppEngineWebAppContext.java:120)\r\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\r\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.createHandler (AppVersionHandlerMap.java:240)\r\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.getHandler (AppVersionHandlerMap.java:178)\r\nat com.google.apphosting.runtime.jetty9.JettyServletEngineAdapter.serviceRequest (JettyServletEngineAdapter.java:120)\r\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchServletRequest (JavaRuntime.java:728)\r\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchRequest (JavaRuntime.java:691)\r\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run (JavaRuntime.java:661)\r\nat com.google.apphosting.runtime.JavaRuntime$NullSandboxRequestRunnable.run (JavaRuntime.java:853)\r\nat com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run (ThreadGroupPool.java:270)\r\nat java.lang.Thread.run (Thread.java:748)\r\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;cloudSqlDataSourceProperties&#39; defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method &#39;cloudSqlDataSourceProperties&#39; threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:627)\r\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod (ConstructorResolver.java:607)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod (AbstractAutowireCapableBeanFactory.java:1305)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance (AbstractAutowireCapableBeanFactory.java:1144)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean (AbstractAutowireCapableBeanFactory.java:555)\r\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean (AbstractAutowireCapableBeanFactory.java:515)\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:320)\r\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:318)\r\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:199)\r\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons (DefaultListableBeanFactory.java:849)\r\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization (AbstractApplicationContext.java:877)\r\nat org.springframework.context.support.AbstractApplicationContext.refresh (AbstractApplicationContext.java:549)\r\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh (ServletWebServerApplicationContext.java:142)\r\nat org.springframework.boot.SpringApplication.refresh (SpringApplication.java:775)\r\nat org.springframework.boot.SpringApplication.refreshContext (SpringApplication.java:397)\r\nat org.springframework.boot.SpringApplication.run (SpringApplication.java:316)\r\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run (SpringBootServletInitializer.java:157)\r\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext (SpringBootServletInitializer.java:137)\r\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup (SpringBootServletInitializer.java:91)\r\nat org.springframework.web.SpringServletContainerInitializer.onStartup (SpringServletContainerInitializer.java:171)\r\nat org.eclipse.jetty.plus.annotation.ContainerInitializer.callStartup (ContainerInitializer.java:140)\r\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:63)\r\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method &#39;cloudSqlDataSourceProperties&#39; threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:185)\r\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:622)\r\nCaused by: java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\r\nat com.google.cloud.sql.core.CoreSocketFactory.setApplicationName (CoreSocketFactory.java:341)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.cloudSqlDataSourceProperties (GcpCloudSqlAutoConfiguration.java:209)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.CGLIB$cloudSqlDataSourceProperties$0 (&lt;generated&gt;)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e$$FastClassBySpringCGLIB$$a426c72d.invoke (&lt;generated&gt;)\r\nat org.springframework.cglib.proxy.MethodProxy.invokeSuper (MethodProxy.java:244)\r\nat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept (ConfigurationClassEnhancer.java:363)\r\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.cloudSqlDataSourceProperties (&lt;generated&gt;)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\r\nat java.lang.reflect.Method.invoke (Method.java:498)\r\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:154)\r\n\r\n\r\n```\r\n\r\nSo it is caused by \r\n```\r\nUnable to set ApplicationName - SQLAdmin client already initialized.\r\n```\r\n\r\nmy build.gradle looks like this \r\n\r\n````\r\nbuildscript {    // Configuration for building\r\n\trepositories {\r\n\t\tjcenter()\r\n\t\tmavenCentral()\r\n\t}\r\n\tdependencies {\r\n\t\tclasspath &#39;com.google.cloud.tools:appengine-gradle-plugin:1.+&#39;    // Latest 1.x.x releas\r\n\t}\r\n}\r\n\r\nplugins {\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.1.3.RELEASE&#39;\r\n\tid &#39;java&#39;\r\n}\r\n\r\napply plugin: &#39;io.spring.dependency-management&#39;\r\napply plugin: &#39;java&#39;                              // standard Java tasks\r\napply plugin: &#39;war&#39;                               // standard Web Archive plugin\r\napply plugin: &#39;com.google.cloud.tools.appengine&#39;  // App Engine tasks\r\n\r\ngroup = &#39;de.msm&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;1.8&#39;\r\ntargetCompatibility = 1.8     // App Engine Flexible uses Java 8\r\n\r\n\r\nconfigurations {\r\n\tprovidedRuntime\r\n\tcompileOnly {\r\n\t\textendsFrom annotationProcessor\r\n\t}\r\n\tdevelopmentOnly\r\n\truntimeClasspath {\r\n\t\textendsFrom developmentOnly\r\n\t}\r\n}\r\n\r\n\r\n\r\nappengine {  // App Engine tasks configuration\r\n\tdeploy {   // deploy configuration\r\n\t\tstopPreviousVersion = true  // default - stop the current version\r\n\t\tpromote = true              // default - &amp; make this the current version\r\n\t}\r\n}\r\n/*\r\nOnly for Run\r\nconfigurations.all {\r\n\texclude group: &#39;org.slf4j&#39;, module: &#39;slf4j-log4j12&#39;\r\n\texclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-tomcat&#39;\r\n}*/\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n\tjcenter()\r\n\tjcenter{\r\n\t\turl &#39;http://oss.jfrog.org/artifactory/oss-snapshot-local&#39;\r\n\t}\r\n}\r\n\r\ntask getHomeDir { //To get actual homeDir\r\n    doLast {\r\n        println gradle.gradleHomeDir\r\n    }\r\n}\r\n\r\ndependencies {\r\n\tcompile(&#39;org.springframework.boot:spring-boot-starter-web&#39;) {\r\n\t\texclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-tomcat&#39;\r\n\t}\r\n\tcompile(&#39;org.springframework.boot:spring-boot-starter-jetty&#39;)\r\n\tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-devtools&#39;, version: &#39;2.1.6.RELEASE&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-security&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n\tcompileOnly &#39;org.projectlombok:lombok&#39;\r\n\tannotationProcessor &#39;org.projectlombok:lombok&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\ttestImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n\timplementation &#39;com.github.javafaker:javafaker:0.17.2&#39;\r\n\tcompile group: &#39;org.bouncycastle&#39;, name: &#39;bcprov-jdk15on&#39;, version: &#39;1.56&#39;\r\n\tcompile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-configuration-processor&#39;, version: &#39;2.1.4.RELEASE&#39;\r\n\tcompile &#39;org.springframework.boot:spring-boot-starter-mail:2.1.5.RELEASE&#39;\r\n\tcompile &#39;org.springframework:spring-context-support:5.1.7.RELEASE&#39;\r\n\ttestCompile &#39;io.rest-assured:rest-assured:4.0.0&#39;\r\n\tcompile &#39;io.rest-assured:xml-path:4.0.0&#39;\r\n\tcompile &#39;io.rest-assured:json-path:4.0.0&#39;\r\n\ttestCompile &#39;io.rest-assured:json-schema-validator:4.0.0&#39;\r\n\tcompile group: &#39;joda-time&#39;, name: &#39;joda-time&#39;, version: &#39;2.10.3&#39;\r\n\ttestCompile group: &#39;org.junit.jupiter&#39;, name: &#39;junit-jupiter-api&#39;, version: &#39;5.5.1&#39;\r\n\ttestCompile group: &#39;org.mockito&#39;, name: &#39;mockito-all&#39;, version: &#39;2.0.2-beta&#39;\r\n\tcompile group: &#39;org.xhtmlrenderer&#39;, name: &#39;flying-saucer-pdf&#39;, version: &#39;9.1.18&#39;\r\n\tcompile &quot;org.apache.pdfbox:pdfbox-tools:2.0.3&quot;\r\n\tcompile &quot;com.itextpdf:itextpdf:5.5.10&quot;\r\n\tcompile &quot;com.itextpdf.tool:xmlworker:5.5.10&quot;\r\n\tcompile &quot;org.apache.poi:poi-ooxml:3.15&quot;\r\n\tcompile &quot;org.apache.poi:poi-scratchpad:3.15&quot;\r\n\tcompile &quot;xerces:xercesImpl:2.8.0&quot;\r\n\tcompile &quot;org.slf4j:slf4j-nop:1.8.0-beta4&quot;\r\n\tcompile group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.5&#39;\r\n\tcompile group: &#39;com.google.cloud&#39;, name: &#39;google-cloud-storage&#39;, version: &#39;1.91.0&#39;\r\n\tcompile group: &#39;org.postgresql&#39;, name: &#39;postgresql&#39;, version: &#39;42.1.4&#39;\r\n\tcompile group: &#39;org.springframework.cloud&#39;, name: &#39;spring-cloud-gcp-starter-sql-postgresql&#39;, version: &#39;1.1.3.RELEASE&#39;\r\n\tcompile &#39;com.google.appengine:appengine-api-1.0-sdk:+&#39;\r\n\tcompile group: &#39;commons-io&#39;, name: &#39;commons-io&#39;, version: &#39;2.6&#39;\r\n\r\n}\r\n```\r\n\r\nI dont understand whats the problem..","title":"Problem with Google Cloud App Engine and Spring Boot gradle Deploying","body":"<p>I have a problem..\nI want to deploy my Spring Boot Gradle app to GC App Engine.\nI use the command :</p>\n\n<p><strong>gradle appengineDeploy</strong></p>\n\n<p>It actually works but when i try to open the app in the browser it says :</p>\n\n<pre><code>Error: Server Error\nThe server encountered an error and could not complete your request.\nPlease try again in 30 seconds.\n</code></pre>\n\n<p>So the app was deployed successfully but it has a problem to start..</p>\n\n<pre><code>java.lang.RuntimeException: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cloudSqlDataSourceProperties' defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method 'cloudSqlDataSourceProperties' threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:68)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\nat org.eclipse.jetty.servlet.ServletContextHandler.startContext (ServletContextHandler.java:330)\nat org.eclipse.jetty.webapp.WebAppContext.startWebapp (WebAppContext.java:1406)\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.startWebapp (AppEngineWebAppContext.java:175)\nat org.eclipse.jetty.webapp.WebAppContext.startContext (WebAppContext.java:1368)\nat org.eclipse.jetty.server.handler.ContextHandler.doStart (ContextHandler.java:778)\nat org.eclipse.jetty.servlet.ServletContextHandler.doStart (ServletContextHandler.java:262)\nat org.eclipse.jetty.webapp.WebAppContext.doStart (WebAppContext.java:522)\nat com.google.apphosting.runtime.jetty9.AppEngineWebAppContext.doStart (AppEngineWebAppContext.java:120)\nat org.eclipse.jetty.util.component.AbstractLifeCycle.start (AbstractLifeCycle.java:68)\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.createHandler (AppVersionHandlerMap.java:240)\nat com.google.apphosting.runtime.jetty9.AppVersionHandlerMap.getHandler (AppVersionHandlerMap.java:178)\nat com.google.apphosting.runtime.jetty9.JettyServletEngineAdapter.serviceRequest (JettyServletEngineAdapter.java:120)\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchServletRequest (JavaRuntime.java:728)\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.dispatchRequest (JavaRuntime.java:691)\nat com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run (JavaRuntime.java:661)\nat com.google.apphosting.runtime.JavaRuntime$NullSandboxRequestRunnable.run (JavaRuntime.java:853)\nat com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run (ThreadGroupPool.java:270)\nat java.lang.Thread.run (Thread.java:748)\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'cloudSqlDataSourceProperties' defined in class path resource [org/springframework/cloud/gcp/autoconfigure/sql/GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method 'cloudSqlDataSourceProperties' threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:627)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod (ConstructorResolver.java:607)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod (AbstractAutowireCapableBeanFactory.java:1305)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance (AbstractAutowireCapableBeanFactory.java:1144)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean (AbstractAutowireCapableBeanFactory.java:555)\nat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean (AbstractAutowireCapableBeanFactory.java:515)\nat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0 (AbstractBeanFactory.java:320)\nat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton (DefaultSingletonBeanRegistry.java:222)\nat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean (AbstractBeanFactory.java:318)\nat org.springframework.beans.factory.support.AbstractBeanFactory.getBean (AbstractBeanFactory.java:199)\nat org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons (DefaultListableBeanFactory.java:849)\nat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization (AbstractApplicationContext.java:877)\nat org.springframework.context.support.AbstractApplicationContext.refresh (AbstractApplicationContext.java:549)\nat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh (ServletWebServerApplicationContext.java:142)\nat org.springframework.boot.SpringApplication.refresh (SpringApplication.java:775)\nat org.springframework.boot.SpringApplication.refreshContext (SpringApplication.java:397)\nat org.springframework.boot.SpringApplication.run (SpringApplication.java:316)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.run (SpringBootServletInitializer.java:157)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.createRootApplicationContext (SpringBootServletInitializer.java:137)\nat org.springframework.boot.web.servlet.support.SpringBootServletInitializer.onStartup (SpringBootServletInitializer.java:91)\nat org.springframework.web.SpringServletContainerInitializer.onStartup (SpringServletContainerInitializer.java:171)\nat org.eclipse.jetty.plus.annotation.ContainerInitializer.callStartup (ContainerInitializer.java:140)\nat org.eclipse.jetty.annotations.ServletContainerInitializersStarter.doStart (ServletContainerInitializersStarter.java:63)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.boot.autoconfigure.jdbc.DataSourceProperties]: Factory method 'cloudSqlDataSourceProperties' threw exception; nested exception is java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:185)\nat org.springframework.beans.factory.support.ConstructorResolver.instantiate (ConstructorResolver.java:622)\nCaused by: java.lang.IllegalStateException: Unable to set ApplicationName - SQLAdmin client already initialized.\nat com.google.cloud.sql.core.CoreSocketFactory.setApplicationName (CoreSocketFactory.java:341)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration.cloudSqlDataSourceProperties (GcpCloudSqlAutoConfiguration.java:209)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.CGLIB$cloudSqlDataSourceProperties$0 (&lt;generated&gt;)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e$$FastClassBySpringCGLIB$$a426c72d.invoke (&lt;generated&gt;)\nat org.springframework.cglib.proxy.MethodProxy.invokeSuper (MethodProxy.java:244)\nat org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept (ConfigurationClassEnhancer.java:363)\nat org.springframework.cloud.gcp.autoconfigure.sql.GcpCloudSqlAutoConfiguration$CloudSqlDataSourcePropertiesConfiguration$$EnhancerBySpringCGLIB$$bb6c42e.cloudSqlDataSourceProperties (&lt;generated&gt;)\nat sun.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\nat sun.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:62)\nat sun.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\nat java.lang.reflect.Method.invoke (Method.java:498)\nat org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate (SimpleInstantiationStrategy.java:154)\n\n\n</code></pre>\n\n<p>So it is caused by </p>\n\n<pre><code>Unable to set ApplicationName - SQLAdmin client already initialized.\n</code></pre>\n\n<p>my build.gradle looks like this </p>\n\n<pre><code>buildscript {    // Configuration for building\n    repositories {\n        jcenter()\n        mavenCentral()\n    }\n    dependencies {\n        classpath 'com.google.cloud.tools:appengine-gradle-plugin:1.+'    // Latest 1.x.x releas\n    }\n}\n\nplugins {\n    id 'org.springframework.boot' version '2.1.3.RELEASE'\n    id 'java'\n}\n\napply plugin: 'io.spring.dependency-management'\napply plugin: 'java'                              // standard Java tasks\napply plugin: 'war'                               // standard Web Archive plugin\napply plugin: 'com.google.cloud.tools.appengine'  // App Engine tasks\n\ngroup = 'de.msm'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\ntargetCompatibility = 1.8     // App Engine Flexible uses Java 8\n\n\nconfigurations {\n    providedRuntime\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n    developmentOnly\n    runtimeClasspath {\n        extendsFrom developmentOnly\n    }\n}\n\n\n\nappengine {  // App Engine tasks configuration\n    deploy {   // deploy configuration\n        stopPreviousVersion = true  // default - stop the current version\n        promote = true              // default - &amp; make this the current version\n    }\n}\n/*\nOnly for Run\nconfigurations.all {\n    exclude group: 'org.slf4j', module: 'slf4j-log4j12'\n    exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat'\n}*/\n\nrepositories {\n    mavenCentral()\n    jcenter()\n    jcenter{\n        url 'http://oss.jfrog.org/artifactory/oss-snapshot-local'\n    }\n}\n\ntask getHomeDir { //To get actual homeDir\n    doLast {\n        println gradle.gradleHomeDir\n    }\n}\n\ndependencies {\n    compile('org.springframework.boot:spring-boot-starter-web') {\n        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat'\n    }\n    compile('org.springframework.boot:spring-boot-starter-jetty')\n    compile group: 'org.springframework.boot', name: 'spring-boot-devtools', version: '2.1.6.RELEASE'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n    implementation 'com.github.javafaker:javafaker:0.17.2'\n    compile group: 'org.bouncycastle', name: 'bcprov-jdk15on', version: '1.56'\n    compile group: 'org.springframework.boot', name: 'spring-boot-configuration-processor', version: '2.1.4.RELEASE'\n    compile 'org.springframework.boot:spring-boot-starter-mail:2.1.5.RELEASE'\n    compile 'org.springframework:spring-context-support:5.1.7.RELEASE'\n    testCompile 'io.rest-assured:rest-assured:4.0.0'\n    compile 'io.rest-assured:xml-path:4.0.0'\n    compile 'io.rest-assured:json-path:4.0.0'\n    testCompile 'io.rest-assured:json-schema-validator:4.0.0'\n    compile group: 'joda-time', name: 'joda-time', version: '2.10.3'\n    testCompile group: 'org.junit.jupiter', name: 'junit-jupiter-api', version: '5.5.1'\n    testCompile group: 'org.mockito', name: 'mockito-all', version: '2.0.2-beta'\n    compile group: 'org.xhtmlrenderer', name: 'flying-saucer-pdf', version: '9.1.18'\n    compile \"org.apache.pdfbox:pdfbox-tools:2.0.3\"\n    compile \"com.itextpdf:itextpdf:5.5.10\"\n    compile \"com.itextpdf.tool:xmlworker:5.5.10\"\n    compile \"org.apache.poi:poi-ooxml:3.15\"\n    compile \"org.apache.poi:poi-scratchpad:3.15\"\n    compile \"xerces:xercesImpl:2.8.0\"\n    compile \"org.slf4j:slf4j-nop:1.8.0-beta4\"\n    compile group: 'commons-io', name: 'commons-io', version: '2.5'\n    compile group: 'com.google.cloud', name: 'google-cloud-storage', version: '1.91.0'\n    compile group: 'org.postgresql', name: 'postgresql', version: '42.1.4'\n    compile group: 'org.springframework.cloud', name: 'spring-cloud-gcp-starter-sql-postgresql', version: '1.1.3.RELEASE'\n    compile 'com.google.appengine:appengine-api-1.0-sdk:+'\n    compile group: 'commons-io', name: 'commons-io', version: '2.6'\n\n}\n```\n\nI dont understand whats the problem..\n</code></pre>\n"},{"tags":["java","sorting","swingworker"],"comments":[{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695393291,"post_id":77158551,"comment_id":136022703,"body_markdown":"Apologies, I forgot to note that my main class is calling SwingUtilities.invokeLater","body":"Apologies, I forgot to note that my main class is calling SwingUtilities.invokeLater"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695393369,"post_id":77158551,"comment_id":136022722,"body_markdown":"&quot;*Before using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step*&quot; -- why not? This would likely be much simpler and easier to implement than a SwingWorker?","body":"&quot;<i>Before using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step</i>&quot; -- why not? This would likely be much simpler and easier to implement than a SwingWorker?"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695393503,"post_id":77158551,"comment_id":136022751,"body_markdown":"And your code is incomplete as you don&#39;t show any of the sorting code, nor how you are trying to publish/process the data to the GUI. Please fix.  You have two options, if you&#39;re set on using a SwingWorker, and these are to use the publish/process method pair for sending information back to the GUI, or using &quot;bound&quot; properties and adding a PropertChangeListener to the worker.","body":"And your code is incomplete as you don&#39;t show any of the sorting code, nor how you are trying to publish/process the data to the GUI. Please fix.  You have two options, if you&#39;re set on using a SwingWorker, and these are to use the publish/process method pair for sending information back to the GUI, or using &quot;bound&quot; properties and adding a PropertChangeListener to the worker."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":0,"creation_date":1695393884,"post_id":77158551,"comment_id":136022825,"body_markdown":"Based on the code you&#39;ve shown it looks like you&#39;re going to do the entire sort in a single call in the background. But if you want to show the sorting, you&#39;ll need to be able to perform a single step of the sort at a time and show the results, which means you&#39;re going to need to modify your sort code to make that possible.","body":"Based on the code you&#39;ve shown it looks like you&#39;re going to do the entire sort in a single call in the background. But if you want to show the sorting, you&#39;ll need to be able to perform a single step of the sort at a time and show the results, which means you&#39;re going to need to modify your sort code to make that possible."},{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695394624,"post_id":77158551,"comment_id":136022985,"body_markdown":"Apologies, I did not want to clutter it too much. Let me add that additional code.\n\nI tried to do it with a timer but after hitting start there was a delay and then it was all sorted, so it was not doing it step-by-step. I did some research but could not figure it out with the timer so I switched to SwingWorker","body":"Apologies, I did not want to clutter it too much. Let me add that additional code.  I tried to do it with a timer but after hitting start there was a delay and then it was all sorted, so it was not doing it step-by-step. I did some research but could not figure it out with the timer so I switched to SwingWorker"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695394765,"post_id":77158551,"comment_id":136023017,"body_markdown":"Read MadProgrammer&#39;s answer [here](https://stackoverflow.com/a/15756352/). No, better yet, *study* it as it goes into great detail on how to do step-wise sorting of all types using Java, separating the model from the view, and visualizing all using a SwingWorker. That answer is a work of art, really.","body":"Read MadProgrammer&#39;s answer <a href=\"https://stackoverflow.com/a/15756352/\">here</a>. No, better yet, <i>study</i> it as it goes into great detail on how to do step-wise sorting of all types using Java, separating the model from the view, and visualizing all using a SwingWorker. That answer is a work of art, really."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1695394818,"post_id":77158551,"comment_id":136023035,"body_markdown":"Yeah, you need to first and foremost *remove the loops* in the sorting code, and use a Swing Timer in place of the loops.","body":"Yeah, you need to first and foremost <i>remove the loops</i> in the sorting code, and use a Swing Timer in place of the loops."},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1695394902,"post_id":77158551,"comment_id":136023061,"body_markdown":"*so I switched to SwingWorker* - which I find is the easier approach., since you don&#39;t need to modify the basic sorting algorithm See: https://stackoverflow.com/questions/64196198/bubble-sort-animation for two working examples. One using a SwingWorker and one using a Timer.","body":"<i>so I switched to SwingWorker</i> - which I find is the easier approach., since you don&#39;t need to modify the basic sorting algorithm See: <a href=\"https://stackoverflow.com/questions/64196198/bubble-sort-animation\" title=\"bubble sort animation\">stackoverflow.com/questions/64196198/bubble-sort-animation</a> for two working examples. One using a SwingWorker and one using a Timer."},{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695395359,"post_id":77158551,"comment_id":136023172,"body_markdown":"https://stackoverflow.com/questions/59247093/how-to-properly-use-swing-timer-in-visualizing-sorting-algorithm\n\nIs this what you are referring to for removing the for loops and implementing using Swing Timer?","body":"<a href=\"https://stackoverflow.com/questions/59247093/how-to-properly-use-swing-timer-in-visualizing-sorting-algorithm\" title=\"how to properly use swing timer in visualizing sorting algorithm\">stackoverflow.com/questions/59247093/&hellip;</a>  Is this what you are referring to for removing the for loops and implementing using Swing Timer?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1695411821,"post_id":77158551,"comment_id":136026008,"body_markdown":"*removing the for loops and implementing using Swing Timer?* - not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort.","body":"<i>removing the for loops and implementing using Swing Timer?</i> - not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort."},{"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"score":0,"creation_date":1695744768,"post_id":77158551,"comment_id":136064256,"body_markdown":"*not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort* - that comment was meant for Hovercraft Full Of Eels. However, I was able to get it working using Swing Timer in place of the for loops - which also meant I had to do what David Conrad suggested and break it down into single steps","body":"<i>not sure why you are worrying about that code since your question is about using a SwingWorker to do a bubble sort</i> - that comment was meant for Hovercraft Full Of Eels. However, I was able to get it working using Swing Timer in place of the for loops - which also meant I had to do what David Conrad suggested and break it down into single steps"}],"owner":{"account_id":29509880,"reputation":1,"user_id":22615172,"display_name":"povertyStrickenCoder"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1695393631,"answer_count":0,"score":0,"last_activity_date":1695759650,"creation_date":1695393224,"question_id":77158551,"body_markdown":"I am trying to create a Java Sorting Visualizer using SwingWorker to run the sorting algorithm step by step in a separate thread, and publish intermediate states to update the UI (I am going to say using the Event Dispatch Thread) but I am having trouble understanding how to use SwingWorker for this. Below is my code:\r\n```\r\n\r\n    package visualizer;\r\n    \r\n    import visualizer.ui.SortingLogic;\r\n    import visualizer.ui.SortingWindow;\r\n    \r\n    import javax.swing.*;\r\n    import java.util.Arrays;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n               new SortingWindow();\r\n    \r\n            });\r\n    \r\n    \r\n            //System.out.println(&quot;Hello world!&quot;);\r\n        }\r\n    }\r\n    package visualizer.ui;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.awt.event.ActionEvent;\r\n    import java.awt.event.ActionListener;\r\n    import java.util.Arrays;\r\n    \r\n    public class SortingWindow {\r\n        int [] arrayToSort;\r\n        SortingVisualizer visualizer;\r\n        SortingLogic sortingLogic;\r\n        JButton startButton, stopButton, resetButton;\r\n    \r\n        public SortingWindow(){\r\n            //System.out.println(&quot;SortingWindow is being called&quot;);\r\n            initiliaze();\r\n        }\r\n        private void initiliaze() {\r\n            JFrame frame = new JFrame();\r\n            frame.setTitle(&quot;Sorting Visualizer&quot;);\r\n            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\r\n            frame.setSize(1000, 800);\r\n            frame.setLocationRelativeTo(null);\r\n            frame.setResizable(true);\r\n    \r\n            JPanel panelBottom = new JPanel();\r\n            panelBottom.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\r\n            frame.add(panelBottom, BorderLayout.PAGE_END);\r\n            panelBottom.setBackground(Color.ORANGE);\r\n            //Creates Panel that holds Start and Reset Buttons\r\n    \r\n            /*JPanel panelTop = new JPanel();\r\n            panelTop.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\r\n            frame.add(panelTop, BorderLayout.PAGE_START);\r\n            panelTop.setBackground(Color.blue);\r\n            //Creates top Panel that holds currently sorting*/\r\n    \r\n            String [] sortOptions = {&quot;Bubble Sort&quot;, &quot;Selection Sort&quot;, &quot;Insertion Sort&quot;,\r\n                    &quot;Merge Sort&quot;, &quot;Quick Sort&quot;, &quot;Heap Sort&quot;, &quot;Counting Sort&quot;, &quot;Radix Sort&quot;,\r\n                    &quot;Bucket Sort&quot;, &quot;Shell Sort&quot;};\r\n            JComboBox sortingOptionsDropdown = new JComboBox(sortOptions);\r\n            panelBottom.add(sortingOptionsDropdown);\r\n            //Adds the drop-down menu to the bottom panel\r\n            /*https://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html*/\r\n    \r\n            startButton = new JButton(&quot;Start&quot;);\r\n            stopButton = new JButton(&quot;Stop&quot;);\r\n            resetButton = new JButton(&quot;Reset&quot;);\r\n            panelBottom.add(startButton);\r\n            panelBottom.add(stopButton);\r\n            panelBottom.add(resetButton);\r\n            //Adds buttons for starting and stopping to JPanel\r\n    \r\n            stopButton.setEnabled(false);\r\n            resetButton.setEnabled(false);\r\n    \r\n            /*JLabel currentlySorting = new JLabel(&quot;Currently Sorting&quot;);\r\n            panelTop.add(currentlySorting);\r\n            currentlySorting.setText(&quot;Currently Sorting: &quot; + sortingOptionsDropdown.getSelectedItem()\r\n                    + &quot; \\tTime Elapsed: &quot;);\r\n            currentlySorting.setForeground(Color.gray);\r\n            currentlySorting.setLayout(new FlowLayout(FlowLayout.LEFT, 10, 5));\r\n            //Adds labels for Currently sorting to the top label*/\r\n    \r\n    \r\n    \r\n            sortingLogic = new SortingLogic();\r\n            arrayToSort = sortingLogic.generateRandomIntArray(5, 1000, 30);\r\n            visualizer = new SortingVisualizer(arrayToSort);\r\n            sortingLogic.setArrayToSort(arrayToSort);\r\n            sortingLogic.setVisualizer(visualizer);\r\n    \r\n            System.out.println(Arrays.toString(arrayToSort));\r\n            //initializes a random array\r\n    \r\n            frame.getContentPane().add(visualizer);\r\n            startButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    String selectedAlgorithm = (String) sortingOptionsDropdown.getSelectedItem();\r\n                    if (selectedAlgorithm != null){\r\n                        if (!sortingLogic.isSorted(arrayToSort)) {\r\n                            sortingLogic.setSortingAlgorithm(selectedAlgorithm);\r\n                            sortingLogic.startSorting();\r\n                        }else {\r\n                            System.out.println(&quot;Array is sorted&quot;);\r\n                        }\r\n                    }\r\n                    startButton.setEnabled(false);\r\n                    stopButton.setEnabled(true);\r\n                    resetButton.setEnabled(true);\r\n                    //System.out.println(&quot;Start has been clicked&quot;);\r\n                }\r\n            });//Performs sort that is selected under dropdownOptions and checks that it is not null or already sorted\r\n            stopButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    sortingLogic.stopSorting();\r\n                }\r\n            });\r\n            resetButton.addActionListener(new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    //System.out.println(&quot;Reset has been clicked&quot;);\r\n                    sortingLogic.stopSorting(); // Stop the sorting algorithm\r\n                    sortingLogic.resetArray();\r\n                    startButton.setEnabled(true);\r\n                    stopButton.setEnabled(false);\r\n                    resetButton.setEnabled(false);\r\n                }\r\n    \r\n            });\r\n    \r\n            frame.setVisible(true);\r\n        }\r\n    \r\n    \r\n    \r\n    }\r\n    \r\n    package visualizer.ui;\r\n    \r\n    \r\n    import visualizer.algorithms.BubbleSort;\r\n    import visualizer.algorithms.SelectionSort;\r\n    import visualizer.algorithms.SortingInterface;\r\n    \r\n    import java.util.Arrays;\r\n    import java.util.Random;\r\n    \r\n    public class SortingLogic {\r\n        private SortingVisualizer visualizer;\r\n        private SortingInterface currentAlgorithm;\r\n        private int[] arrayToSort;\r\n        public SortingLogic() {\r\n            //System.out.println(&quot;SortingLogic is being called&quot;);\r\n        }\r\n        public void setVisualizer(SortingVisualizer visualizer) {\r\n            this.visualizer = visualizer;\r\n        }\r\n        public int [] generateRandomIntArray(int min, int max, int length) {\r\n            arrayToSort = new int[length];\r\n            Random randNumGenerator = new Random();\r\n            for (int i = 0; i &lt; length; i++) {\r\n                arrayToSort[i] = randNumGenerator.nextInt(max - min + 1) + min;\r\n            }\r\n            return arrayToSort;\r\n        }\r\n        public void setSortingAlgorithm(String algorithm) {\r\n            switch (algorithm) {\r\n                case &quot;Bubble Sort&quot;:\r\n                    currentAlgorithm = new BubbleSort(visualizer);\r\n                    break;\r\n                case &quot;Selection Sort&quot;:\r\n                    currentAlgorithm = new SelectionSort(visualizer);\r\n                    break;\r\n                /*case &quot;Insertion Sort&quot;:\r\n                    currentAlgorithm = new InsertionSort(visualizer);*/\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        public void startSorting() {\r\n            if (currentAlgorithm != null)\r\n                currentAlgorithm.toSort(visualizer);\r\n        }\r\n        public void stopSorting() {\r\n            if (currentAlgorithm != null) {\r\n                currentAlgorithm.stopSorting();\r\n            }\r\n        }\r\n        public int[] getArrayToSort() {\r\n            return arrayToSort;\r\n        }\r\n        public void setArrayToSort(int[] newArray) {\r\n            this.arrayToSort = newArray;\r\n        }\r\n        public void resetArray() {\r\n            // Generate a new random array and update the visualizer\r\n            arrayToSort = generateRandomIntArray(1, 1000, 30);\r\n            visualizer.setArrayToSort(arrayToSort);\r\n            visualizer.updateVisualizationPanel();\r\n        }\r\n        public boolean isSorted(int [] arrayToSort){\r\n            for (int i = 0; i &lt; arrayToSort.length; i++){\r\n                if (arrayToSort[i] &gt; arrayToSort[i + 1]){\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    \r\n    }\r\n    package visualizer.ui;\r\n    \r\n    import javax.swing.*;\r\n    import java.awt.*;\r\n    import java.util.Arrays;\r\n    \r\n    public class SortingVisualizer extends JPanel{\r\n        private int[] arrayToSort;\r\n    \r\n        public int[] getArrayToSort() {\r\n            return arrayToSort;\r\n        }\r\n    \r\n        public void setArrayToSort(int[] arrayToSort) {\r\n            this.arrayToSort = arrayToSort;\r\n        }\r\n    \r\n        public SortingVisualizer(int[] arrayToSort) {\r\n            this.arrayToSort = Arrays.copyOf(arrayToSort, arrayToSort.length);\r\n            //System.out.println(&quot;SortingVisualizer is being called&quot;);\r\n        }\r\n            protected void paintComponent(Graphics g){\r\n                super.paintComponent(g);\r\n                int barWidth = getWidth() / arrayToSort.length;\r\n                //System.out.println(Arrays.toString(arrayToSort) + &quot;array within Visualizer&#39;s Paint Component&quot;);\r\n    \r\n                for (int j = 0; j &lt; arrayToSort.length; j++) {//Enhanced for loops look at the values not the indices, so we do not use it\r\n                    int maxArrayValue = Arrays.stream(arrayToSort).max().getAsInt();\r\n                    int barHeight = (int) ((double) arrayToSort[j] / maxArrayValue * getHeight());                int x = j * barWidth;\r\n                    int y = getHeight() - barHeight;\r\n    \r\n                    g.setColor(Color.red);\r\n                    g.fillRect(x, y, barWidth, barHeight);\r\n                    //Fills in a rectangular column\r\n                    g.setColor(Color.black);\r\n                    g.drawRect(x, y, barWidth, barHeight);\r\n                    //Creates a border for said columns\r\n    \r\n                    //System.out.println(&quot;SortingVisualizer: /nBar Height &quot; + barHeight +  &quot;barWidth &quot; + barWidth + &quot;x &quot; + x + &quot;y&quot; + y);\r\n                }\r\n            }\r\n        public void updateVisualizationPanel() {\r\n            //System.out.println(&quot;Repaint has been called&quot;);\r\n            repaint(); // Trigger a repaint of the panel\r\n        }\r\n    }\r\n    \r\n    package visualizer.algorithms;\r\n    \r\n    import visualizer.ui.SortingVisualizer;\r\n    \r\n    public interface SortingInterface {\r\n        void toSort(SortingVisualizer visualizer);\r\n        void stopSorting();\r\n    \r\n    \r\n    }\r\n\r\n\r\n\r\n```\r\nI started to create a Seperate SwingWorker Class so it may not be complete to the experienced eye. \r\n\r\nBefore using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step so I switched to SwingWorker. Specifically because it would allow me to do Multi-threading. \r\n\r\nWhat is currently happening: Once you hit start nothing happens, I believe that us just because I do not make any calls to the BubbleSort (fully expect to implement the rest) in the ActionListener. But that is because I need the Sorting classes to work with the SwingWorker first\r\n\r\nWhat I am expecting: Once the user hits the Start button they see the bars being sorted step-by-step\r\n\r\n\r\nAny tips, comments, or concerns or duly appreciated!\r\n\r\n**EDIT**\r\n\r\nI was able to remove the For Loops and do it step-by-step as Hovercraft Full Of Eels and David Conrad suggested and this shows in the visualization panel \r\n\r\n\r\n    public BubbleSort(SortingVisualizer visualizer) {\r\n            if (visualizer == null) {\r\n                throw new IllegalArgumentException(&quot;Visualizer cannot be null&quot;);\r\n            }\r\n            this.visualizer = visualizer;\r\n            this.arr = visualizer.getArrayToSort();\r\n            this.i = 0;\r\n            this.j = 0;\r\n            this.timer = new Timer(100, new ActionListener() {\r\n                @Override\r\n                public void actionPerformed(ActionEvent e) {\r\n                    if(i &lt; arr.length - 1){\r\n                        if(j &lt; arr.length - i - 1){\r\n                            if(arr[j] &gt; arr[j + 1]){\r\n                                int temp = arr[j];\r\n                                arr[j] = arr[j + 1];\r\n                                arr[j + 1] = temp;\r\n    \r\n                                visualizer.updateVisualizationPanel();\r\n                            }\r\n                            j++;\r\n                        }else{\r\n                            j = 0;\r\n                            i++;\r\n                        }\r\n                    }else{\r\n                        timer.stop();\r\n                    }\r\n    \r\n                }\r\n            });\r\n        }\r\n\r\n","title":"How to use SwingWorker with Java Sorting classes e.g. Bubble Sort","body":"<p>I am trying to create a Java Sorting Visualizer using SwingWorker to run the sorting algorithm step by step in a separate thread, and publish intermediate states to update the UI (I am going to say using the Event Dispatch Thread) but I am having trouble understanding how to use SwingWorker for this. Below is my code:</p>\n<pre><code>\n    package visualizer;\n    \n    import visualizer.ui.SortingLogic;\n    import visualizer.ui.SortingWindow;\n    \n    import javax.swing.*;\n    import java.util.Arrays;\n    \n    public class Main {\n        public static void main(String[] args) {\n            SwingUtilities.invokeLater(() -&gt; {\n               new SortingWindow();\n    \n            });\n    \n    \n            //System.out.println(&quot;Hello world!&quot;);\n        }\n    }\n    package visualizer.ui;\n    \n    import javax.swing.*;\n    import java.awt.*;\n    import java.awt.event.ActionEvent;\n    import java.awt.event.ActionListener;\n    import java.util.Arrays;\n    \n    public class SortingWindow {\n        int [] arrayToSort;\n        SortingVisualizer visualizer;\n        SortingLogic sortingLogic;\n        JButton startButton, stopButton, resetButton;\n    \n        public SortingWindow(){\n            //System.out.println(&quot;SortingWindow is being called&quot;);\n            initiliaze();\n        }\n        private void initiliaze() {\n            JFrame frame = new JFrame();\n            frame.setTitle(&quot;Sorting Visualizer&quot;);\n            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);\n            frame.setSize(1000, 800);\n            frame.setLocationRelativeTo(null);\n            frame.setResizable(true);\n    \n            JPanel panelBottom = new JPanel();\n            panelBottom.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\n            frame.add(panelBottom, BorderLayout.PAGE_END);\n            panelBottom.setBackground(Color.ORANGE);\n            //Creates Panel that holds Start and Reset Buttons\n    \n            /*JPanel panelTop = new JPanel();\n            panelTop.setLayout(new FlowLayout(FlowLayout.CENTER, 10, 5));\n            frame.add(panelTop, BorderLayout.PAGE_START);\n            panelTop.setBackground(Color.blue);\n            //Creates top Panel that holds currently sorting*/\n    \n            String [] sortOptions = {&quot;Bubble Sort&quot;, &quot;Selection Sort&quot;, &quot;Insertion Sort&quot;,\n                    &quot;Merge Sort&quot;, &quot;Quick Sort&quot;, &quot;Heap Sort&quot;, &quot;Counting Sort&quot;, &quot;Radix Sort&quot;,\n                    &quot;Bucket Sort&quot;, &quot;Shell Sort&quot;};\n            JComboBox sortingOptionsDropdown = new JComboBox(sortOptions);\n            panelBottom.add(sortingOptionsDropdown);\n            //Adds the drop-down menu to the bottom panel\n            /*https://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html*/\n    \n            startButton = new JButton(&quot;Start&quot;);\n            stopButton = new JButton(&quot;Stop&quot;);\n            resetButton = new JButton(&quot;Reset&quot;);\n            panelBottom.add(startButton);\n            panelBottom.add(stopButton);\n            panelBottom.add(resetButton);\n            //Adds buttons for starting and stopping to JPanel\n    \n            stopButton.setEnabled(false);\n            resetButton.setEnabled(false);\n    \n            /*JLabel currentlySorting = new JLabel(&quot;Currently Sorting&quot;);\n            panelTop.add(currentlySorting);\n            currentlySorting.setText(&quot;Currently Sorting: &quot; + sortingOptionsDropdown.getSelectedItem()\n                    + &quot; \\tTime Elapsed: &quot;);\n            currentlySorting.setForeground(Color.gray);\n            currentlySorting.setLayout(new FlowLayout(FlowLayout.LEFT, 10, 5));\n            //Adds labels for Currently sorting to the top label*/\n    \n    \n    \n            sortingLogic = new SortingLogic();\n            arrayToSort = sortingLogic.generateRandomIntArray(5, 1000, 30);\n            visualizer = new SortingVisualizer(arrayToSort);\n            sortingLogic.setArrayToSort(arrayToSort);\n            sortingLogic.setVisualizer(visualizer);\n    \n            System.out.println(Arrays.toString(arrayToSort));\n            //initializes a random array\n    \n            frame.getContentPane().add(visualizer);\n            startButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    String selectedAlgorithm = (String) sortingOptionsDropdown.getSelectedItem();\n                    if (selectedAlgorithm != null){\n                        if (!sortingLogic.isSorted(arrayToSort)) {\n                            sortingLogic.setSortingAlgorithm(selectedAlgorithm);\n                            sortingLogic.startSorting();\n                        }else {\n                            System.out.println(&quot;Array is sorted&quot;);\n                        }\n                    }\n                    startButton.setEnabled(false);\n                    stopButton.setEnabled(true);\n                    resetButton.setEnabled(true);\n                    //System.out.println(&quot;Start has been clicked&quot;);\n                }\n            });//Performs sort that is selected under dropdownOptions and checks that it is not null or already sorted\n            stopButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    sortingLogic.stopSorting();\n                }\n            });\n            resetButton.addActionListener(new ActionListener() {\n                @Override\n                public void actionPerformed(ActionEvent e) {\n                    //System.out.println(&quot;Reset has been clicked&quot;);\n                    sortingLogic.stopSorting(); // Stop the sorting algorithm\n                    sortingLogic.resetArray();\n                    startButton.setEnabled(true);\n                    stopButton.setEnabled(false);\n                    resetButton.setEnabled(false);\n                }\n    \n            });\n    \n            frame.setVisible(true);\n        }\n    \n    \n    \n    }\n    \n    package visualizer.ui;\n    \n    \n    import visualizer.algorithms.BubbleSort;\n    import visualizer.algorithms.SelectionSort;\n    import visualizer.algorithms.SortingInterface;\n    \n    import java.util.Arrays;\n    import java.util.Random;\n    \n    public class SortingLogic {\n        private SortingVisualizer visualizer;\n        private SortingInterface currentAlgorithm;\n        private int[] arrayToSort;\n        public SortingLogic() {\n            //System.out.println(&quot;SortingLogic is being called&quot;);\n        }\n        public void setVisualizer(SortingVisualizer visualizer) {\n            this.visualizer = visualizer;\n        }\n        public int [] generateRandomIntArray(int min, int max, int length) {\n            arrayToSort = new int[length];\n            Random randNumGenerator = new Random();\n            for (int i = 0; i &lt; length; i++) {\n                arrayToSort[i] = randNumGenerator.nextInt(max - min + 1) + min;\n            }\n            return arrayToSort;\n        }\n        public void setSortingAlgorithm(String algorithm) {\n            switch (algorithm) {\n                case &quot;Bubble Sort&quot;:\n                    currentAlgorithm = new BubbleSort(visualizer);\n                    break;\n                case &quot;Selection Sort&quot;:\n                    currentAlgorithm = new SelectionSort(visualizer);\n                    break;\n                /*case &quot;Insertion Sort&quot;:\n                    currentAlgorithm = new InsertionSort(visualizer);*/\n                default:\n                    break;\n            }\n        }\n        public void startSorting() {\n            if (currentAlgorithm != null)\n                currentAlgorithm.toSort(visualizer);\n        }\n        public void stopSorting() {\n            if (currentAlgorithm != null) {\n                currentAlgorithm.stopSorting();\n            }\n        }\n        public int[] getArrayToSort() {\n            return arrayToSort;\n        }\n        public void setArrayToSort(int[] newArray) {\n            this.arrayToSort = newArray;\n        }\n        public void resetArray() {\n            // Generate a new random array and update the visualizer\n            arrayToSort = generateRandomIntArray(1, 1000, 30);\n            visualizer.setArrayToSort(arrayToSort);\n            visualizer.updateVisualizationPanel();\n        }\n        public boolean isSorted(int [] arrayToSort){\n            for (int i = 0; i &lt; arrayToSort.length; i++){\n                if (arrayToSort[i] &gt; arrayToSort[i + 1]){\n                    return false;\n                }\n            }\n            return true;\n        }\n    \n    }\n    package visualizer.ui;\n    \n    import javax.swing.*;\n    import java.awt.*;\n    import java.util.Arrays;\n    \n    public class SortingVisualizer extends JPanel{\n        private int[] arrayToSort;\n    \n        public int[] getArrayToSort() {\n            return arrayToSort;\n        }\n    \n        public void setArrayToSort(int[] arrayToSort) {\n            this.arrayToSort = arrayToSort;\n        }\n    \n        public SortingVisualizer(int[] arrayToSort) {\n            this.arrayToSort = Arrays.copyOf(arrayToSort, arrayToSort.length);\n            //System.out.println(&quot;SortingVisualizer is being called&quot;);\n        }\n            protected void paintComponent(Graphics g){\n                super.paintComponent(g);\n                int barWidth = getWidth() / arrayToSort.length;\n                //System.out.println(Arrays.toString(arrayToSort) + &quot;array within Visualizer's Paint Component&quot;);\n    \n                for (int j = 0; j &lt; arrayToSort.length; j++) {//Enhanced for loops look at the values not the indices, so we do not use it\n                    int maxArrayValue = Arrays.stream(arrayToSort).max().getAsInt();\n                    int barHeight = (int) ((double) arrayToSort[j] / maxArrayValue * getHeight());                int x = j * barWidth;\n                    int y = getHeight() - barHeight;\n    \n                    g.setColor(Color.red);\n                    g.fillRect(x, y, barWidth, barHeight);\n                    //Fills in a rectangular column\n                    g.setColor(Color.black);\n                    g.drawRect(x, y, barWidth, barHeight);\n                    //Creates a border for said columns\n    \n                    //System.out.println(&quot;SortingVisualizer: /nBar Height &quot; + barHeight +  &quot;barWidth &quot; + barWidth + &quot;x &quot; + x + &quot;y&quot; + y);\n                }\n            }\n        public void updateVisualizationPanel() {\n            //System.out.println(&quot;Repaint has been called&quot;);\n            repaint(); // Trigger a repaint of the panel\n        }\n    }\n    \n    package visualizer.algorithms;\n    \n    import visualizer.ui.SortingVisualizer;\n    \n    public interface SortingInterface {\n        void toSort(SortingVisualizer visualizer);\n        void stopSorting();\n    \n    \n    }\n\n\n\n</code></pre>\n<p>I started to create a Seperate SwingWorker Class so it may not be complete to the experienced eye.</p>\n<p>Before using SwingWorker I was trying to do it using a Timer instead but that was not doing it step-by-step so I switched to SwingWorker. Specifically because it would allow me to do Multi-threading.</p>\n<p>What is currently happening: Once you hit start nothing happens, I believe that us just because I do not make any calls to the BubbleSort (fully expect to implement the rest) in the ActionListener. But that is because I need the Sorting classes to work with the SwingWorker first</p>\n<p>What I am expecting: Once the user hits the Start button they see the bars being sorted step-by-step</p>\n<p>Any tips, comments, or concerns or duly appreciated!</p>\n<p><strong>EDIT</strong></p>\n<p>I was able to remove the For Loops and do it step-by-step as Hovercraft Full Of Eels and David Conrad suggested and this shows in the visualization panel</p>\n<pre><code>public BubbleSort(SortingVisualizer visualizer) {\n        if (visualizer == null) {\n            throw new IllegalArgumentException(&quot;Visualizer cannot be null&quot;);\n        }\n        this.visualizer = visualizer;\n        this.arr = visualizer.getArrayToSort();\n        this.i = 0;\n        this.j = 0;\n        this.timer = new Timer(100, new ActionListener() {\n            @Override\n            public void actionPerformed(ActionEvent e) {\n                if(i &lt; arr.length - 1){\n                    if(j &lt; arr.length - i - 1){\n                        if(arr[j] &gt; arr[j + 1]){\n                            int temp = arr[j];\n                            arr[j] = arr[j + 1];\n                            arr[j + 1] = temp;\n\n                            visualizer.updateVisualizationPanel();\n                        }\n                        j++;\n                    }else{\n                        j = 0;\n                        i++;\n                    }\n                }else{\n                    timer.stop();\n                }\n\n            }\n        });\n    }\n</code></pre>\n"},{"tags":["java","amazon-web-services","spring-boot","stream","amazon-kinesis"],"comments":[{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1695760300,"post_id":77183149,"comment_id":136066949,"body_markdown":"WHy are you using a third party API over the Official AWS SDK for Java V2.","body":"WHy are you using a third party API over the Official AWS SDK for Java V2."},{"owner":{"account_id":5589271,"reputation":87,"user_id":4428984,"display_name":"Anderson"},"score":0,"creation_date":1695810248,"post_id":77183149,"comment_id":136072991,"body_markdown":"Because the project pattern was defined that way. And before changing the way you implement it, I would like to try to make it work this way!","body":"Because the project pattern was defined that way. And before changing the way you implement it, I would like to try to make it work this way!"},{"owner":{"account_id":1540816,"reputation":10259,"user_id":1435543,"display_name":"smac2020"},"score":0,"creation_date":1695827933,"post_id":77183149,"comment_id":136076823,"body_markdown":"This is not an AWS Offical API. Its 3rd party and not supported by AWS","body":"This is not an AWS Offical API. Its 3rd party and not supported by AWS"},{"owner":{"account_id":6157899,"reputation":19810,"user_id":4800344,"display_name":"Ermiya Eskandary"},"score":0,"creation_date":1696167197,"post_id":77183149,"comment_id":136116033,"body_markdown":"When you declare a bean with a parameter (like `String json`), Spring tries to find a bean of type `String` in its context to inject it, but it cant find one, hence you get the error of `Could not autowire. No beans of String type found`. Where is this string coming from? Are you changing this string at runtime? What are you really trying to do here?","body":"When you declare a bean with a parameter (like <code>String json</code>), Spring tries to find a bean of type <code>String</code> in its context to inject it, but it cant find one, hence you get the error of <code>Could not autowire. No beans of String type found</code>. Where is this string coming from? Are you changing this string at runtime? What are you really trying to do here?"},{"owner":{"account_id":5589271,"reputation":87,"user_id":4428984,"display_name":"Anderson"},"score":0,"creation_date":1696334553,"post_id":77183149,"comment_id":136136907,"body_markdown":"Hello, Ermiya, thanks for answer.  \nThe idea would be for this Json(String) to be coming from a business class, for example UserService.java, where I will convert the user object to a json, and I wanted to call this &quot;Producer&quot; via injection, or any other way, to send to the Kinesis","body":"Hello, Ermiya, thanks for answer.   The idea would be for this Json(String) to be coming from a business class, for example UserService.java, where I will convert the user object to a json, and I wanted to call this &quot;Producer&quot; via injection, or any other way, to send to the Kinesis"}],"owner":{"account_id":5589271,"reputation":87,"user_id":4428984,"display_name":"Anderson"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695759301,"creation_date":1695759301,"question_id":77183149,"body_markdown":"I&#39;m trying to implement an integration solution with Kinesis (AWS), using &quot;Stream Binder Kinesis&quot;. I need to send a json(String) to a queue (producer). I&#39;m based on the example https://www.baeldung.com/spring-aws-kinesis, item 5.4!\r\n\r\nproperties: \r\n\r\n    spring.cloud.stream.bindings.output-out-0.destination=myStream\r\n    spring.cloud.stream.bindings.output-out-0.content-type=text/plain\r\n    spring.cloud.stream.poller.fixed-delay = 3000\r\n\r\nCode example:\r\n\r\n\r\n    @Configuration class ProducerBinder {\r\n      @Bean public Supplier output() {\r\n        return () -&gt; IntStream.range(1, 200)\r\n                     .mapToObj(ipSuffix - &gt;&quot;192.168.0.&quot; + ipSuffix)\r\n                     .map(entry - &gt;MessageBuilder.withPayload(entry)\r\n                     .build());\r\n        }\r\n      }\r\n\r\nI need to implement something like this (passing a String), but the code does not allow the method to receive an argument.\r\n\r\n    @Configuration\r\n    class ProducerBinder {\r\n        @Bean\r\n        public Supplier output(String json) {\r\n            return () -&gt; MessageBuilder.withPayload(json).build();\r\n        }\r\n    }\r\n\r\nThis message in compile mode appears:\r\n\r\n&quot;Could not autowire. No beans of &#39;String&#39; type found&quot;\r\n\r\nHow can I make this code receive a string? Can you help me please ?\r\n \r\n\r\n","title":"Integrating Spring with AWS Binder (Kinesis)","body":"<p>I'm trying to implement an integration solution with Kinesis (AWS), using &quot;Stream Binder Kinesis&quot;. I need to send a json(String) to a queue (producer). I'm based on the example <a href=\"https://www.baeldung.com/spring-aws-kinesis\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-aws-kinesis</a>, item 5.4!</p>\n<p>properties:</p>\n<pre><code>spring.cloud.stream.bindings.output-out-0.destination=myStream\nspring.cloud.stream.bindings.output-out-0.content-type=text/plain\nspring.cloud.stream.poller.fixed-delay = 3000\n</code></pre>\n<p>Code example:</p>\n<pre><code>@Configuration class ProducerBinder {\n  @Bean public Supplier output() {\n    return () -&gt; IntStream.range(1, 200)\n                 .mapToObj(ipSuffix - &gt;&quot;192.168.0.&quot; + ipSuffix)\n                 .map(entry - &gt;MessageBuilder.withPayload(entry)\n                 .build());\n    }\n  }\n</code></pre>\n<p>I need to implement something like this (passing a String), but the code does not allow the method to receive an argument.</p>\n<pre><code>@Configuration\nclass ProducerBinder {\n    @Bean\n    public Supplier output(String json) {\n        return () -&gt; MessageBuilder.withPayload(json).build();\n    }\n}\n</code></pre>\n<p>This message in compile mode appears:</p>\n<p>&quot;Could not autowire. No beans of 'String' type found&quot;</p>\n<p>How can I make this code receive a string? Can you help me please ?</p>\n"},{"tags":["java","spring","spring-mvc","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1432274563,"post_id":30388169,"comment_id":48867373,"body_markdown":"Post some configuration.","body":"Post some configuration."},{"owner":{"account_id":1443205,"reputation":553,"user_id":1362658,"accept_rate":41,"display_name":"Ryan Zhu"},"score":0,"creation_date":1432276805,"post_id":30388169,"comment_id":48868388,"body_markdown":"M. Deinum I don&#39;t have much configuration, just a application.properties, which only contains some database configuration, redis configuration and logging configuration. Nothing is related with the exception handling logic","body":"M. Deinum I don&#39;t have much configuration, just a application.properties, which only contains some database configuration, redis configuration and logging configuration. Nothing is related with the exception handling logic"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1432276964,"post_id":30388169,"comment_id":48868458,"body_markdown":"At least add something, a starter class etc. a `@ControllerAdvice` is a `@Component` so it should be detected so you must have somewhere disabled proper component-scanning.","body":"At least add something, a starter class etc. a <code>@ControllerAdvice</code> is a <code>@Component</code> so it should be detected so you must have somewhere disabled proper component-scanning."},{"owner":{"account_id":1443205,"reputation":553,"user_id":1362658,"accept_rate":41,"display_name":"Ryan Zhu"},"score":0,"creation_date":1432278282,"post_id":30388169,"comment_id":48869122,"body_markdown":"M. Deinum I add the starter class as above. But, I think I&#39;ve figured it out myself... I tried change the return type of the exception handling method `handleException` to `ResponseEntity&lt;RestEntity&gt;`, it worked again... Springboot must have to wrap the return type of exception handler method, without a `ResponseEntity`, springboot just ignore the return type and give the default response object structure, with timestamp, error message, url and etc...","body":"M. Deinum I add the starter class as above. But, I think I&#39;ve figured it out myself... I tried change the return type of the exception handling method <code>handleException</code> to <code>ResponseEntity&lt;RestEntity&gt;</code>, it worked again... Springboot must have to wrap the return type of exception handler method, without a <code>ResponseEntity</code>, springboot just ignore the return type and give the default response object structure, with timestamp, error message, url and etc..."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1432278361,"post_id":30388169,"comment_id":48869155,"body_markdown":"Instead of that you could also have added `@ResponseBody` as that is what you want.","body":"Instead of that you could also have added <code>@ResponseBody</code> as that is what you want."},{"owner":{"account_id":393856,"reputation":11926,"user_id":755932,"accept_rate":67,"display_name":"K. Siva Prasad Reddy"},"score":0,"creation_date":1432287046,"post_id":30388169,"comment_id":48874105,"body_markdown":"Also, you don&#39;t need both @ SpringBootApplication and @ ComponentScan,\n@ EnableAutoConfiguration together. Use either one.","body":"Also, you don&#39;t need both @ SpringBootApplication and @ ComponentScan, @ EnableAutoConfiguration together. Use either one."},{"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"score":0,"creation_date":1695768539,"post_id":30388169,"comment_id":136067957,"body_markdown":"Do you have a particular controller in your project (another class annotated with @RestController)?","body":"Do you have a particular controller in your project (another class annotated with @RestController)?"}],"answers":[{"tags":[],"owner":{"account_id":361980,"reputation":2500,"user_id":704916,"accept_rate":88,"display_name":"ianaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1525417438,"creation_date":1525417438,"answer_id":50169092,"question_id":30388169,"body_markdown":"I actually had to remove @EnableWebMvc from my main application file.\r\n\r\nHere the working configuration for me:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan(basePackages = {\r\n    ....\r\n    })\r\n    public class Application extends SpringBootServletInitializer { ... }\r\n\r\nand the ControllerAdvice:\r\n\r\n    @ControllerAdvice\r\n    public class ErrorHandlingController { ... }","title":"spring boot starter web @ControllerAdvice annotation is not work without having @RestController annotation","body":"<p>I actually had to remove @EnableWebMvc from my main application file.</p>\n\n<p>Here the working configuration for me:</p>\n\n<pre><code>@SpringBootApplication\n@ComponentScan(basePackages = {\n....\n})\npublic class Application extends SpringBootServletInitializer { ... }\n</code></pre>\n\n<p>and the ControllerAdvice:</p>\n\n<pre><code>@ControllerAdvice\npublic class ErrorHandlingController { ... }\n</code></pre>\n"}],"owner":{"account_id":1443205,"reputation":553,"user_id":1362658,"accept_rate":41,"display_name":"Ryan Zhu"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":9056,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"answer_count":1,"score":4,"last_activity_date":1695758645,"creation_date":1432267398,"question_id":30388169,"body_markdown":"**RESOLVE**\r\n\r\nin rest api application, the return type of exception handling method should be `ResponseEntity` or annotate the method with `@ResponseBody` so that spring boot can do the http serialisation. \r\n\r\n**UPDATE**\r\n\r\nstarter class:\r\n\r\n    @SpringBootApplication\r\n    @ComponentScan\r\n    @EnableAutoConfiguration\r\n    @EnableConfigurationProperties\r\n    @EnableTransactionManagement//TODO remove this line if not needed\r\n    public class Application extends SpringBootServletInitializer{\r\n\r\n    private static Class&lt;Application&gt; applicationClass= Application.class;\r\n    public static void main(String[] args) {\r\n        SpringApplication.run(applicationClass, args);\r\n    }\r\n\r\n    @Override\r\n    protected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {\r\n        return builder.sources(applicationClass);\r\n    }\r\n    }\r\n\r\nI was using `@ControllerAdvice` to handle global exception handling in spring boot starter web and I got such a weird problem.\r\n\r\nAs I followed the guide from spring official doc, https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc, to handling exceptions globally, just add a handler class with `@ControllerAdivce` annotated. But, when I test it, the exception handling method is not invoked when a `RunTimeException` is thrown.\r\n\r\nHere is My code:\r\n\r\n    @ControllerAdvice\r\n    public class GlobalDefaultExceptionHandler {\r\n\r\n    @ExceptionHandler(value = RuntimeException.class)\r\n    @ResponseStatus(HttpStatus.BAD_REQUEST)\r\n    public RestEntity handleException(HttpServletRequest req, RuntimeException ex) {\r\n        RestEntity restEntity=new RestEntity();\r\n        Message message=new Message();\r\n        message.setCode(1000);\r\n        message.setMessage(&quot;Something wrong with the server&quot;);\r\n        restEntity.setMessage(message);\r\n        return restEntity;\r\n    }\r\n    }\r\n\r\nAnd I have methods in other controllers annotated with `@ExceptionHandler` to handle specific exceptions in each Controller, while leave unresolved exceptions to the `GlobalDefaultExceptionHandler`. \r\n\r\nIt turns out that it doesn&#39;t work. Am I missing something here??\r\n\r\nAnd, for now, as a workaround , I just add `@RestControoler` on the `GlobalDefaultExceptionHandler` and it just work fine. I don&#39;t why...\r\n\r\nAnyone can help?","title":"spring boot starter web @ControllerAdvice annotation is not work without having @RestController annotation","body":"<p><strong>RESOLVE</strong></p>\n\n<p>in rest api application, the return type of exception handling method should be <code>ResponseEntity</code> or annotate the method with <code>@ResponseBody</code> so that spring boot can do the http serialisation. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>starter class:</p>\n\n<pre><code>@SpringBootApplication\n@ComponentScan\n@EnableAutoConfiguration\n@EnableConfigurationProperties\n@EnableTransactionManagement//TODO remove this line if not needed\npublic class Application extends SpringBootServletInitializer{\n\nprivate static Class&lt;Application&gt; applicationClass= Application.class;\npublic static void main(String[] args) {\n    SpringApplication.run(applicationClass, args);\n}\n\n@Override\nprotected SpringApplicationBuilder configure(SpringApplicationBuilder builder) {\n    return builder.sources(applicationClass);\n}\n}\n</code></pre>\n\n<p>I was using <code>@ControllerAdvice</code> to handle global exception handling in spring boot starter web and I got such a weird problem.</p>\n\n<p>As I followed the guide from spring official doc, <a href=\"https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc\" rel=\"nofollow\">https://spring.io/blog/2013/11/01/exception-handling-in-spring-mvc</a>, to handling exceptions globally, just add a handler class with <code>@ControllerAdivce</code> annotated. But, when I test it, the exception handling method is not invoked when a <code>RunTimeException</code> is thrown.</p>\n\n<p>Here is My code:</p>\n\n<pre><code>@ControllerAdvice\npublic class GlobalDefaultExceptionHandler {\n\n@ExceptionHandler(value = RuntimeException.class)\n@ResponseStatus(HttpStatus.BAD_REQUEST)\npublic RestEntity handleException(HttpServletRequest req, RuntimeException ex) {\n    RestEntity restEntity=new RestEntity();\n    Message message=new Message();\n    message.setCode(1000);\n    message.setMessage(\"Something wrong with the server\");\n    restEntity.setMessage(message);\n    return restEntity;\n}\n}\n</code></pre>\n\n<p>And I have methods in other controllers annotated with <code>@ExceptionHandler</code> to handle specific exceptions in each Controller, while leave unresolved exceptions to the <code>GlobalDefaultExceptionHandler</code>. </p>\n\n<p>It turns out that it doesn't work. Am I missing something here??</p>\n\n<p>And, for now, as a workaround , I just add <code>@RestControoler</code> on the <code>GlobalDefaultExceptionHandler</code> and it just work fine. I don't why...</p>\n\n<p>Anyone can help?</p>\n"},{"tags":["java","generics","overriding","bridge"],"comments":[{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1695158168,"post_id":77137921,"comment_id":135985904,"body_markdown":"Can you provide the decompiled class file to show there is a bridge method? I don&#39;t see how there can be, considering it would have the same signature.","body":"Can you provide the decompiled class file to show there is a bridge method? I don&#39;t see how there can be, considering it would have the same signature."},{"owner":{"account_id":19997547,"reputation":99,"user_id":14657254,"display_name":"stathis94"},"score":0,"creation_date":1695159038,"post_id":77137921,"comment_id":135986049,"body_markdown":"I got the methods using reflection and used the isBridge method. Both set and get methods have a bridge. I followed this example: https://www.geeksforgeeks.org/method-class-isbridge-method-in-java/","body":"I got the methods using reflection and used the isBridge method. Both set and get methods have a bridge. I followed this example: <a href=\"https://www.geeksforgeeks.org/method-class-isbridge-method-in-java/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/method-class-isbridge-method-in-java</a>"},{"owner":{"account_id":162699,"reputation":138060,"user_id":3788176,"accept_rate":54,"display_name":"Andy Turner"},"score":3,"creation_date":1695160897,"post_id":77137921,"comment_id":135986312,"body_markdown":"I think there can be methods which differ only in return type in a class file: this is a difference between Java (which doesn&#39;t consider return type part of the signature) and the JVM (which does).  I don&#39;t want to commit to it as an answer, but [JVM 4.7.9.1](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.7.9.1) may well contain the answer.","body":"I think there can be methods which differ only in return type in a class file: this is a difference between Java (which doesn&#39;t consider return type part of the signature) and the JVM (which does).  I don&#39;t want to commit to it as an answer, but <a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.7.9.1\" rel=\"nofollow noreferrer\">JVM 4.7.9.1</a> may well contain the answer."},{"owner":{"account_id":31180,"reputation":29173,"user_id":85421,"display_name":"user85421"},"score":0,"creation_date":1695161683,"post_id":77137921,"comment_id":135986435,"body_markdown":"@Andy yes, the return type is part of the method descriptor and by [JVM 4.6](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.6): &quot;No two methods in one class file may have the same name and descriptor ([&#167;4.3.3](https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.3.3))&quot;","body":"@Andy yes, the return type is part of the method descriptor and by <a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.6\" rel=\"nofollow noreferrer\">JVM 4.6</a>: &quot;No two methods in one class file may have the same name and descriptor (<a href=\"https://docs.oracle.com/javase/specs/jvms/se21/html/jvms-4.html#jvms-4.3.3\" rel=\"nofollow noreferrer\">&#167;4.3.3</a>)&quot;"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1695162389,"post_id":77137921,"comment_id":135986527,"body_markdown":"This may help: https://stackoverflow.com/q/18655541/6395627","body":"This may help: <a href=\"https://stackoverflow.com/q/18655541/6395627\">stackoverflow.com/q/18655541/6395627</a>"},{"owner":{"account_id":7123842,"reputation":27597,"user_id":5684257,"display_name":"HTNW"},"score":0,"creation_date":1695171539,"post_id":77137921,"comment_id":135987489,"body_markdown":"None of the &quot;duplicates&quot; explain why a bridge method is necessary in this case. This question should not have been closed.","body":"None of the &quot;duplicates&quot; explain why a bridge method is necessary in this case. This question should not have been closed."}],"answers":[{"tags":[],"owner":{"account_id":7123842,"reputation":27597,"user_id":5684257,"display_name":"HTNW"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1695758301,"creation_date":1695189618,"answer_id":77139649,"question_id":77137921,"body_markdown":"Actually, the JVM doesn&#39;t implement return type covariance. Even without generics, Java requires bridge methods to implement return type covariance on the JVM. If you compile the following,\r\n\r\n    class MySupplier {\r\n        public Object supply() { return null; }\r\n    }\r\n    class HelloSupplier extends MySupplier {\r\n        @Override public String supply() { return &quot;Hello, World!&quot;; }\r\n    }\r\n\r\nyou will find that `HelloSupplier` contains bytecode amounting to the following:\r\n\r\n    class HelloSupplier extends MySupplier {\r\n        public String supply() { return &quot;Hello, World!&quot;; }\r\n        public /*bridge*/ Object supply() { return this.supply()/*String*/; }\r\n        // in bytecode, all method calls include the signature of the method, including the return type (which is written after the method name and parameters)\r\n        // the bridge method supply()Object calls the method supply()String\r\n        // note that bytecode allows overloading on return type, even though Java doesn&#39;t\r\n    }\r\n\r\nIf you look at the *JVM* definition of an override, you will notice that it differs from *Java*&#39;s idea of an override, in that the signatures of overrides must match *exactly* in the eyes of the JVM. You don&#39;t get to relax the parameter types or strengthen the return type.\r\n\r\n[JVM Specification SE 20, Section 5.4.5](https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-5.html#jvms-5.4.5)\r\n&gt; An instance method &lt;code&gt;m&lt;sub&gt;C&lt;/sub&gt;&lt;/code&gt; can override another instance method &lt;code&gt;m&lt;sub&gt;A&lt;/sub&gt;&lt;/code&gt; iff all of the following are true:\r\n&gt; * &lt;code&gt;m&lt;sub&gt;C&lt;/sub&gt;&lt;/code&gt; has the same name and descriptor as &lt;code&gt;m&lt;sub&gt;A&lt;/sub&gt;&lt;/code&gt;.\r\n&gt; * ...\r\n\r\nThis is important, because this is how the JVM decides what method to call when you do a virtual lookup. A virtual call (`invokevirtual`) to `MySupplier#supply()Object` on a `HelloSupplier` object will never call `HelloSupplier#supply()String`, since a `supply()String` method does not override a `supply()Object` method in the eyes of the JVM (even though it does in Java). Such a virtual method call will call `HelloSupplier#supply()Object`, if it exists, or else look for such a method in superclasses. The Java compiler, in order to implement return type covariance, must override `MySupplier#supply()Object` in the only way the JVM understands: by defining `HelloSupplier#supply()Object`.\r\n\r\nBecause the JVM doesn&#39;t implement return type covariance anyway, the Java compiler can&#39;t leverage return type covariance to sometimes avoid emitting bridges for generic code.","title":"Why Java compiler creates bridge methods for methods without parameters (getter methods)","body":"<p>Actually, the JVM doesn't implement return type covariance. Even without generics, Java requires bridge methods to implement return type covariance on the JVM. If you compile the following,</p>\n<pre><code>class MySupplier {\n    public Object supply() { return null; }\n}\nclass HelloSupplier extends MySupplier {\n    @Override public String supply() { return &quot;Hello, World!&quot;; }\n}\n</code></pre>\n<p>you will find that <code>HelloSupplier</code> contains bytecode amounting to the following:</p>\n<pre><code>class HelloSupplier extends MySupplier {\n    public String supply() { return &quot;Hello, World!&quot;; }\n    public /*bridge*/ Object supply() { return this.supply()/*String*/; }\n    // in bytecode, all method calls include the signature of the method, including the return type (which is written after the method name and parameters)\n    // the bridge method supply()Object calls the method supply()String\n    // note that bytecode allows overloading on return type, even though Java doesn't\n}\n</code></pre>\n<p>If you look at the <em>JVM</em> definition of an override, you will notice that it differs from <em>Java</em>'s idea of an override, in that the signatures of overrides must match <em>exactly</em> in the eyes of the JVM. You don't get to relax the parameter types or strengthen the return type.</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-5.html#jvms-5.4.5\" rel=\"nofollow noreferrer\">JVM Specification SE 20, Section 5.4.5</a></p>\n<blockquote>\n<p>An instance method <code>m<sub>C</sub></code> can override another instance method <code>m<sub>A</sub></code> iff all of the following are true:</p>\n<ul>\n<li><code>m<sub>C</sub></code> has the same name and descriptor as <code>m<sub>A</sub></code>.</li>\n<li>...</li>\n</ul>\n</blockquote>\n<p>This is important, because this is how the JVM decides what method to call when you do a virtual lookup. A virtual call (<code>invokevirtual</code>) to <code>MySupplier#supply()Object</code> on a <code>HelloSupplier</code> object will never call <code>HelloSupplier#supply()String</code>, since a <code>supply()String</code> method does not override a <code>supply()Object</code> method in the eyes of the JVM (even though it does in Java). Such a virtual method call will call <code>HelloSupplier#supply()Object</code>, if it exists, or else look for such a method in superclasses. The Java compiler, in order to implement return type covariance, must override <code>MySupplier#supply()Object</code> in the only way the JVM understands: by defining <code>HelloSupplier#supply()Object</code>.</p>\n<p>Because the JVM doesn't implement return type covariance anyway, the Java compiler can't leverage return type covariance to sometimes avoid emitting bridges for generic code.</p>\n"}],"owner":{"account_id":19997547,"reputation":99,"user_id":14657254,"display_name":"stathis94"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":104,"favorite_count":0,"down_vote_count":2,"up_vote_count":5,"accepted_answer_id":77139649,"answer_count":1,"score":3,"last_activity_date":1695758301,"creation_date":1695156749,"question_id":77137921,"body_markdown":"I do understand the need to create bridge methods for example a setter method that expects an argument to be passed, but what about a getter method? Why does Java produce a bridge method as well?\r\n\r\nHere is a dummy code produced by ChatGPT to make things more specific:\r\n\r\n    class Box&lt;T&gt; {\r\n    private T value;\r\n\r\n    public void setValue(T value) {\r\n        this.value = value;\r\n    }\r\n\r\n    public T getValue() {\r\n        return value;\r\n    }\r\n    }\r\n\r\n    class StringBox extends Box&lt;String&gt; {\r\n    public void setValue(String value) {\r\n        System.out.println(&quot;Setting a String value in StringBox&quot;);\r\n        super.setValue(value.toString());\r\n    }\r\n\r\n    public String getValue() {\r\n        System.out.println(&quot;Getting String value from StringBox&quot;);\r\n        return super.getValue();\r\n    }\r\n    }\r\n\r\nThe Box class after the erasure will have the following method:\r\n`public Object getValue();`\r\nIn the StringBox class, we defined the method:\r\n`public String getValue()`\r\nBut these two methods have the same signature and the return type of the overriding method uses String as return type, which is a subclass of Object class(Covariant Return Type)\r\nSo it seems that overriding is already complete. Why is there a need for the bridge method?\r\nWhat am i missing?","title":"Why Java compiler creates bridge methods for methods without parameters (getter methods)","body":"<p>I do understand the need to create bridge methods for example a setter method that expects an argument to be passed, but what about a getter method? Why does Java produce a bridge method as well?</p>\n<p>Here is a dummy code produced by ChatGPT to make things more specific:</p>\n<pre><code>class Box&lt;T&gt; {\nprivate T value;\n\npublic void setValue(T value) {\n    this.value = value;\n}\n\npublic T getValue() {\n    return value;\n}\n}\n\nclass StringBox extends Box&lt;String&gt; {\npublic void setValue(String value) {\n    System.out.println(&quot;Setting a String value in StringBox&quot;);\n    super.setValue(value.toString());\n}\n\npublic String getValue() {\n    System.out.println(&quot;Getting String value from StringBox&quot;);\n    return super.getValue();\n}\n}\n</code></pre>\n<p>The Box class after the erasure will have the following method:\n<code>public Object getValue();</code>\nIn the StringBox class, we defined the method:\n<code>public String getValue()</code>\nBut these two methods have the same signature and the return type of the overriding method uses String as return type, which is a subclass of Object class(Covariant Return Type)\nSo it seems that overriding is already complete. Why is there a need for the bridge method?\nWhat am i missing?</p>\n"},{"tags":["java","testing","testng"],"owner":{"account_id":2724755,"reputation":1595,"user_id":2350150,"accept_rate":56,"display_name":"Georgi Georgiev"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695757975,"creation_date":1695757975,"question_id":77183024,"body_markdown":"When I use `Reporter.log()` the messages are displayed in the `Reporter output` section of the HTML report.\r\n\r\nI would like to be able to show these messages under each test that I click in the `Results` section:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/96Id3.png\r\n\r\n\r\nHow can I do that?","title":"TestNG Reporter log messages that show when you click on a test method in the HTML report","body":"<p>When I use <code>Reporter.log()</code> the messages are displayed in the <code>Reporter output</code> section of the HTML report.</p>\n<p>I would like to be able to show these messages under each test that I click in the <code>Results</code> section:</p>\n<p><a href=\"https://i.stack.imgur.com/96Id3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/96Id3.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I do that?</p>\n"},{"tags":["java","libgdx"],"answers":[{"comments":[{"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"score":0,"creation_date":1618170411,"post_id":67046708,"comment_id":118515291,"body_markdown":"Yeah I tried that and got an error I&#39;m not at my desktop atm but I&#39;ll double check my JRE before getting back to you. Thanks for helping me with another libgdx problem &#128591;&#127995;","body":"Yeah I tried that and got an error I&#39;m not at my desktop atm but I&#39;ll double check my JRE before getting back to you. Thanks for helping me with another libgdx problem "},{"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"score":1,"creation_date":1618182376,"post_id":67046708,"comment_id":118518074,"body_markdown":"Okay so, I checked my JRE and I&#39;m running 11.0.10+9. Even though the project didn&#39;t sync I tried to build it anyway to see if maybe I could get some other errors. Well I did. And It looks like I needed to update my iOS build.gradle files sourceCompatibility to &#39;1.8&#39; as well. After that I was able to sync and build. Thanks again.","body":"Okay so, I checked my JRE and I&#39;m running 11.0.10+9. Even though the project didn&#39;t sync I tried to build it anyway to see if maybe I could get some other errors. Well I did. And It looks like I needed to update my iOS build.gradle files sourceCompatibility to &#39;1.8&#39; as well. After that I was able to sync and build. Thanks again."}],"tags":[],"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1618154336,"creation_date":1618154336,"answer_id":67046708,"question_id":67042505,"body_markdown":"You need to change the source compatibility in your gradle file to `1.8`, since Streams are part of java-8: \r\n\r\nhttps://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\r\n\r\n&gt; Since:  \r\n&gt; 1.8\r\n\r\nSo your `build.gradle` file should look like this:\r\n\r\n```\r\nsourceCompatibility = 1.8\r\n[compileJava, compileTestJava]*.options*.encoding = &#39;UTF-8&#39;\r\n\r\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\r\n\r\neclipse.project.name = appName + &quot;-core&quot;\r\n```\r\n\r\n**Note**: After this change your game will require a java-8 JRE to be run.","title":"LibGDX use java.util.stream.Stream in core folder?","body":"<p>You need to change the source compatibility in your gradle file to <code>1.8</code>, since Streams are part of java-8:</p>\n<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html</a></p>\n<blockquote>\n<p>Since:<br />\n1.8</p>\n</blockquote>\n<p>So your <code>build.gradle</code> file should look like this:</p>\n<pre><code>sourceCompatibility = 1.8\n[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'\n\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\n\neclipse.project.name = appName + &quot;-core&quot;\n</code></pre>\n<p><strong>Note</strong>: After this change your game will require a java-8 JRE to be run.</p>\n"}],"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":164,"favorite_count":0,"down_vote_count":5,"up_vote_count":1,"answer_count":1,"score":-4,"last_activity_date":1695757944,"creation_date":1618126643,"question_id":67042505,"body_markdown":"I&#39;m trying to make a default stream function in my lib GDX game. I followed some instructions on adding to my android gradle project but ofc that only lets me use it in my android project.\r\nHow can I use it in my core folder?\r\n\r\nAndroid gradle build file:\r\n```\r\ndefaultConfig {\r\n        ...\r\n        multiDexEnabled true\r\n    }\r\n    compileOptions {\r\n        // Flag to enable support for the new language APIs\r\n        coreLibraryDesugaringEnabled true\r\n        // Sets Java compatibility to Java 8\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n\r\n    dependencies {\r\n        coreLibraryDesugaring &#39;com.android.tools:desugar_jdk_libs:1.0.9&#39;\r\n    }\r\n```\r\n\r\nCore gradle build:\r\n```\r\nsourceCompatibility = 1.7\r\n[compileJava, compileTestJava]*.options*.encoding = &#39;UTF-8&#39;\r\n\r\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\r\n\r\neclipse.project.name = appName + &quot;-core&quot;\r\n```","title":"LibGDX use java.util.stream.Stream in core folder?","body":"<p>I'm trying to make a default stream function in my lib GDX game. I followed some instructions on adding to my android gradle project but ofc that only lets me use it in my android project.\nHow can I use it in my core folder?</p>\n<p>Android gradle build file:</p>\n<pre><code>defaultConfig {\n        ...\n        multiDexEnabled true\n    }\n    compileOptions {\n        // Flag to enable support for the new language APIs\n        coreLibraryDesugaringEnabled true\n        // Sets Java compatibility to Java 8\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n\n    dependencies {\n        coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.0.9'\n    }\n</code></pre>\n<p>Core gradle build:</p>\n<pre><code>sourceCompatibility = 1.7\n[compileJava, compileTestJava]*.options*.encoding = 'UTF-8'\n\nsourceSets.main.java.srcDirs = [ &quot;src/&quot; ]\n\neclipse.project.name = appName + &quot;-core&quot;\n</code></pre>\n"},{"tags":["java","android","libgdx"],"comments":[{"owner":{"account_id":3463622,"reputation":7032,"user_id":2899889,"accept_rate":79,"display_name":"MilanG"},"score":0,"creation_date":1617963299,"post_id":67010269,"comment_id":118463593,"body_markdown":"It&#39;s not very clear of what touches you are talking about. Are you pressing physical keyboard keys or game controller or touching the screen?","body":"It&#39;s not very clear of what touches you are talking about. Are you pressing physical keyboard keys or game controller or touching the screen?"},{"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"score":0,"creation_date":1617986237,"post_id":67010269,"comment_id":118473969,"body_markdown":"Sorry I didn&#39;t mean to be vague. I assumed that b/c I mentioned android that the touch screen was implied.\n\nYes it&#39;s touch screen only. So I&#39;m wondering if I can allow a player to press two buttons with one finger. For example, using their thumb in a similar way to how they would press two buttons on a PS4 controller.","body":"Sorry I didn&#39;t mean to be vague. I assumed that b/c I mentioned android that the touch screen was implied.  Yes it&#39;s touch screen only. So I&#39;m wondering if I can allow a player to press two buttons with one finger. For example, using their thumb in a similar way to how they would press two buttons on a PS4 controller."}],"answers":[{"comments":[{"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"score":0,"creation_date":1618091463,"post_id":67036191,"comment_id":118498624,"body_markdown":"Yeah that&#39;s what I figured. Since I did notice that when I laid down my thumb it only &quot;touched&quot; where the tip of my thumb was. Thanks for confirming it. I thought about having hidden buttons in between. That might work. It&#39;s something I&#39;ll have to test to see how easy it would be to hit them on accident.","body":"Yeah that&#39;s what I figured. Since I did notice that when I laid down my thumb it only &quot;touched&quot; where the tip of my thumb was. Thanks for confirming it. I thought about having hidden buttons in between. That might work. It&#39;s something I&#39;ll have to test to see how easy it would be to hit them on accident."}],"tags":[],"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1618069082,"creation_date":1618069082,"answer_id":67036191,"question_id":67010269,"body_markdown":"**Short answer**: No, it&#39;s not possible.\r\n\r\n**Detailed answer**: A touch on the screen will always be registered as a point. This means you won&#39;t be able to get the width, hight or shape of the touch event, but only the center of it. So you cant realy know whether both buttons are pressed. (I think this behaviour is not specific to libGDX, but to all phone operating systems; at least all that I know).\r\n\r\n**Possible Workarround**: You could try to add an invisible button in between two buttons to &quot;emulate&quot; a touch on both buttons, since when pushing both buttons usually the center of the thumb will be the position, that libGDX will get as the resulting touch event.","title":"Android Studio/LibGDX: Is it possible to press two buttons with a single touch?","body":"<p><strong>Short answer</strong>: No, it's not possible.</p>\n<p><strong>Detailed answer</strong>: A touch on the screen will always be registered as a point. This means you won't be able to get the width, hight or shape of the touch event, but only the center of it. So you cant realy know whether both buttons are pressed. (I think this behaviour is not specific to libGDX, but to all phone operating systems; at least all that I know).</p>\n<p><strong>Possible Workarround</strong>: You could try to add an invisible button in between two buttons to &quot;emulate&quot; a touch on both buttons, since when pushing both buttons usually the center of the thumb will be the position, that libGDX will get as the resulting touch event.</p>\n"}],"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":175,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"closed_date":1695759719,"answer_count":1,"score":-1,"last_activity_date":1695757903,"creation_date":1617908402,"question_id":67010269,"body_markdown":"I&#39;m making a fighting game for android using Android Studio and LibGdx. It&#39;d be really cool if I could have attack input combos like Light+Medium. I seem to be able to register multiple inputs if touched by multiple digits. But what if I wanted to use my thumb to press two buttons at once? Is it possible?\r\n\r\nEdit: This is a touch screen only game. So, ideally the player would press two attack buttons on their screen with their thumb.","title":"Android Studio/LibGDX: Is it possible to press two buttons with a single touch?","body":"<p>I'm making a fighting game for android using Android Studio and LibGdx. It'd be really cool if I could have attack input combos like Light+Medium. I seem to be able to register multiple inputs if touched by multiple digits. But what if I wanted to use my thumb to press two buttons at once? Is it possible?</p>\n<p>Edit: This is a touch screen only game. So, ideally the player would press two attack buttons on their screen with their thumb.</p>\n"},{"tags":["java","algorithm","animation","libgdx"],"answers":[{"comments":[{"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"score":0,"creation_date":1628173232,"post_id":68661733,"comment_id":121354781,"body_markdown":"libgdx default animation class doesn&#39;t allow for uneven key frame lengths afaik. isAnimationFinished(float) uses a single value for frame duration that is passed into the constructor. It calculates the frame number by : frameNumber = (int)(stateTime / frameDuration);. and then depending on the on the play mode adjusts the framenumber accordingly. Some of my key frames need to play for 4 frames then 5 frames. which again for looping animations is fine but for attacking single play animations I&#39;m having trouble getting the single animation to play smoothly","body":"libgdx default animation class doesn&#39;t allow for uneven key frame lengths afaik. isAnimationFinished(float) uses a single value for frame duration that is passed into the constructor. It calculates the frame number by : frameNumber = (int)(stateTime / frameDuration);. and then depending on the on the play mode adjusts the framenumber accordingly. Some of my key frames need to play for 4 frames then 5 frames. which again for looping animations is fine but for attacking single play animations I&#39;m having trouble getting the single animation to play smoothly"}],"tags":[],"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1628145454,"creation_date":1628145454,"answer_id":68661733,"question_id":68661514,"body_markdown":"If you use the [Animation](https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--) class from libGDX you can use these methods (from the API):\r\n- [getAnimationDuration](https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--): the duration of the entire animation, number of frames times frame duration, in seconds\r\n- [isAnimationFinished(float)](https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#isAnimationFinished-float-): Whether the animation would be finished if played without looping (PlayMode#NORMAL), given the state time.\r\n\r\nSo all you need to know is the current `stateTime`, that is calculated like you already have done in you pseudocode:\r\n\r\n```\r\npublic void draw(float deltaTime) {\r\n    stateTime += deltaTime;\r\n    \r\n    //...\r\n}\r\n```\r\n\r\nFor a further introduction on how to use the libGDX animations, see [this tutorial](https://github.com/libgdx/libgdx/wiki/2D-Animation).\r\n\r\n&lt;hr&gt;\r\n\r\nIn one of my projects I use a wrapper class for some additional functionality. If you want to use it you can find it on [GitHub](https://github.com/tfassbender/DwarfScrollerGDX/blob/master/core/src/net/jfabricationgames/gdx/animation/AnimationDirector.java), or use the current version of it:\r\n\r\n**AnimationDirector**\r\n```\r\nimport com.badlogic.gdx.graphics.g2d.Animation;\r\nimport com.badlogic.gdx.graphics.g2d.Animation.PlayMode;\r\n\r\nimport net.jfabricationgames.gdx.screens.game.GameScreen;\r\n\r\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\r\nimport com.badlogic.gdx.graphics.g2d.TextureRegion;\r\n\r\npublic class AnimationDirector&lt;T extends TextureRegion&gt; {\r\n\t\r\n\tpublic static boolean isTextureRight(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\r\n\t\treturn initialAnimationDirectionIsRight != animation.getKeyFrame().isFlipX();\r\n\t}\r\n\t\r\n\tpublic static boolean isTextureLeft(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\r\n\t\treturn initialAnimationDirectionIsRight == animation.getKeyFrame().isFlipX();\r\n\t}\r\n\t\r\n\tprivate float stateTime;\r\n\tprivate Animation&lt;T&gt; animation;\r\n\t\r\n\tprivate AnimationSpriteConfig spriteConfig;\r\n\t\r\n\tpublic AnimationDirector(Animation&lt;T&gt; animation) {\r\n\t\tthis.animation = animation;\r\n\t\tinitializeSpriteConfigWithoutPosition();\r\n\t}\r\n\t\r\n\tprotected void initializeSpriteConfigWithoutPosition() {\r\n\t\tT keyFrame = animation.getKeyFrame(0);\r\n\t\tspriteConfig = new AnimationSpriteConfig().setWidth(keyFrame.getRegionWidth()).setHeight(keyFrame.getRegionHeight());\r\n\t}\r\n\t\r\n\t/**\r\n\t * Draw the current key frame of this animation onto the {@link SpriteBatch}.&lt;br&gt;\r\n\t * ATTENTION: This method will throw an {@link IllegalStateException} if this AnimationDirector does not contain an AnimationSpriteConfig object.\r\n\t */\r\n\tpublic void draw(SpriteBatch batch) {\r\n\t\tif (spriteConfig == null) {\r\n\t\t\tthrow new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\r\n\t\t}\r\n\t\tT keyFrame = getKeyFrame();\r\n\t\tfloat x = spriteConfig.x + ((spriteConfig.width - keyFrame.getRegionWidth()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\r\n\t\tfloat y = spriteConfig.y + ((spriteConfig.height - keyFrame.getRegionHeight()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\r\n\t\tbatch.draw(keyFrame, x, y, spriteConfig.width * 0.5f, spriteConfig.height * 0.5f, keyFrame.getRegionWidth(), keyFrame.getRegionHeight(),\r\n\t\t\t\tGameScreen.WORLD_TO_SCREEN, GameScreen.WORLD_TO_SCREEN, 0f);\r\n\t}\r\n\t\r\n\tpublic void drawInMenu(SpriteBatch batch) {\r\n\t\tif (spriteConfig == null) {\r\n\t\t\tthrow new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\r\n\t\t}\r\n\t\t\r\n\t\tT keyFrame = getKeyFrame();\r\n\t\tbatch.draw(keyFrame, spriteConfig.x, spriteConfig.y, spriteConfig.width, spriteConfig.height);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the frame at the current time.\r\n\t */\r\n\tpublic T getKeyFrame() {\r\n\t\treturn animation.getKeyFrame(stateTime);\r\n\t}\r\n\t\r\n\tpublic float getStateTime() {\r\n\t\treturn stateTime;\r\n\t}\r\n\t\r\n\tpublic void increaseStateTime(float delta) {\r\n\t\tstateTime += delta;\r\n\t}\r\n\t\r\n\tpublic void setStateTime(float stateTime) {\r\n\t\tthis.stateTime = stateTime;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reset the state time to 0 to restart the animation.\r\n\t */\r\n\tpublic void resetStateTime() {\r\n\t\tstateTime = 0;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set the animation state time to the end of the animation.\r\n\t */\r\n\tpublic void endAnimation() {\r\n\t\tstateTime = animation.getAnimationDuration();\r\n\t}\r\n\t\r\n\tpublic void setPlayMode(PlayMode playMode) {\r\n\t\tanimation.setPlayMode(playMode);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the {@link Animation} that this object holds.\r\n\t */\r\n\tpublic Animation&lt;T&gt; getAnimation() {\r\n\t\treturn animation;\r\n\t}\r\n\t\r\n\tpublic boolean isAnimationFinished() {\r\n\t\treturn animation.isAnimationFinished(stateTime);\r\n\t}\r\n\t\r\n\tpublic float getAnimationDuration() {\r\n\t\treturn animation.getAnimationDuration();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Flip all key frames of the animation.\r\n\t */\r\n\tpublic void flip(boolean x, boolean y) {\r\n\t\tfor (TextureRegion region : animation.getKeyFrames()) {\r\n\t\t\tregion.flip(x, y);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig getSpriteConfig() {\r\n\t\treturn spriteConfig;\r\n\t}\r\n\t\r\n\tpublic void setSpriteConfig(AnimationSpriteConfig spriteConfig) {\r\n\t\tthis.spriteConfig = spriteConfig;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig getSpriteConfigCopy() {\r\n\t\treturn new AnimationSpriteConfig(spriteConfig);\r\n\t}\r\n}\r\n```\r\n**AnimationSpriteConfig**\r\n```\r\nimport com.badlogic.gdx.graphics.g2d.Sprite;\r\n\r\npublic class AnimationSpriteConfig {\r\n\t\r\n\tpublic static AnimationSpriteConfig fromSprite(Sprite sprite) {\r\n\t\tAnimationSpriteConfig spriteConfig = new AnimationSpriteConfig();\r\n\t\tspriteConfig.width = sprite.getWidth();\r\n\t\tspriteConfig.height = sprite.getHeight();\r\n\t\tspriteConfig.x = sprite.getX();\r\n\t\tspriteConfig.y = sprite.getY();\r\n\t\t\r\n\t\treturn spriteConfig;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig() {}\r\n\t\r\n\tpublic AnimationSpriteConfig(AnimationSpriteConfig spriteConfig) {\r\n\t\tthis.x = spriteConfig.x;\r\n\t\tthis.y = spriteConfig.y;\r\n\t\tthis.width = spriteConfig.width;\r\n\t\tthis.height = spriteConfig.height;\r\n\t}\r\n\t\r\n\tpublic float x;\r\n\tpublic float y;\r\n\tpublic float width;\r\n\tpublic float height;\r\n\t\r\n\tpublic AnimationSpriteConfig setX(float x) {\r\n\t\tthis.x = x;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig setY(float y) {\r\n\t\tthis.y = y;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig setWidth(float width) {\r\n\t\tthis.width = width;\r\n\t\treturn this;\r\n\t}\r\n\t\r\n\tpublic AnimationSpriteConfig setHeight(float height) {\r\n\t\tthis.height = height;\r\n\t\treturn this;\r\n\t}\r\n}\r\n```","title":"Is there a general method for calculating the end of an animation and switching between animations when they are finished?","body":"<p>If you use the <a href=\"https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--\" rel=\"nofollow noreferrer\">Animation</a> class from libGDX you can use these methods (from the API):</p>\n<ul>\n<li><a href=\"https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#getAnimationDuration--\" rel=\"nofollow noreferrer\">getAnimationDuration</a>: the duration of the entire animation, number of frames times frame duration, in seconds</li>\n<li><a href=\"https://libgdx.badlogicgames.com/ci/nightlies/docs/api/com/badlogic/gdx/graphics/g2d/Animation.html#isAnimationFinished-float-\" rel=\"nofollow noreferrer\">isAnimationFinished(float)</a>: Whether the animation would be finished if played without looping (PlayMode#NORMAL), given the state time.</li>\n</ul>\n<p>So all you need to know is the current <code>stateTime</code>, that is calculated like you already have done in you pseudocode:</p>\n<pre><code>public void draw(float deltaTime) {\n    stateTime += deltaTime;\n    \n    //...\n}\n</code></pre>\n<p>For a further introduction on how to use the libGDX animations, see <a href=\"https://github.com/libgdx/libgdx/wiki/2D-Animation\" rel=\"nofollow noreferrer\">this tutorial</a>.</p>\n<hr>\n<p>In one of my projects I use a wrapper class for some additional functionality. If you want to use it you can find it on <a href=\"https://github.com/tfassbender/DwarfScrollerGDX/blob/master/core/src/net/jfabricationgames/gdx/animation/AnimationDirector.java\" rel=\"nofollow noreferrer\">GitHub</a>, or use the current version of it:</p>\n<p><strong>AnimationDirector</strong></p>\n<pre><code>import com.badlogic.gdx.graphics.g2d.Animation;\nimport com.badlogic.gdx.graphics.g2d.Animation.PlayMode;\n\nimport net.jfabricationgames.gdx.screens.game.GameScreen;\n\nimport com.badlogic.gdx.graphics.g2d.SpriteBatch;\nimport com.badlogic.gdx.graphics.g2d.TextureRegion;\n\npublic class AnimationDirector&lt;T extends TextureRegion&gt; {\n    \n    public static boolean isTextureRight(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\n        return initialAnimationDirectionIsRight != animation.getKeyFrame().isFlipX();\n    }\n    \n    public static boolean isTextureLeft(boolean initialAnimationDirectionIsRight, AnimationDirector&lt;TextureRegion&gt; animation) {\n        return initialAnimationDirectionIsRight == animation.getKeyFrame().isFlipX();\n    }\n    \n    private float stateTime;\n    private Animation&lt;T&gt; animation;\n    \n    private AnimationSpriteConfig spriteConfig;\n    \n    public AnimationDirector(Animation&lt;T&gt; animation) {\n        this.animation = animation;\n        initializeSpriteConfigWithoutPosition();\n    }\n    \n    protected void initializeSpriteConfigWithoutPosition() {\n        T keyFrame = animation.getKeyFrame(0);\n        spriteConfig = new AnimationSpriteConfig().setWidth(keyFrame.getRegionWidth()).setHeight(keyFrame.getRegionHeight());\n    }\n    \n    /**\n     * Draw the current key frame of this animation onto the {@link SpriteBatch}.&lt;br&gt;\n     * ATTENTION: This method will throw an {@link IllegalStateException} if this AnimationDirector does not contain an AnimationSpriteConfig object.\n     */\n    public void draw(SpriteBatch batch) {\n        if (spriteConfig == null) {\n            throw new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\n        }\n        T keyFrame = getKeyFrame();\n        float x = spriteConfig.x + ((spriteConfig.width - keyFrame.getRegionWidth()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\n        float y = spriteConfig.y + ((spriteConfig.height - keyFrame.getRegionHeight()) * GameScreen.WORLD_TO_SCREEN * 0.5f);\n        batch.draw(keyFrame, x, y, spriteConfig.width * 0.5f, spriteConfig.height * 0.5f, keyFrame.getRegionWidth(), keyFrame.getRegionHeight(),\n                GameScreen.WORLD_TO_SCREEN, GameScreen.WORLD_TO_SCREEN, 0f);\n    }\n    \n    public void drawInMenu(SpriteBatch batch) {\n        if (spriteConfig == null) {\n            throw new IllegalStateException(&quot;No AnimationSpriteConfig. Please add an AnimationSpriteConfig in order to use the draw method&quot;);\n        }\n        \n        T keyFrame = getKeyFrame();\n        batch.draw(keyFrame, spriteConfig.x, spriteConfig.y, spriteConfig.width, spriteConfig.height);\n    }\n    \n    /**\n     * Get the frame at the current time.\n     */\n    public T getKeyFrame() {\n        return animation.getKeyFrame(stateTime);\n    }\n    \n    public float getStateTime() {\n        return stateTime;\n    }\n    \n    public void increaseStateTime(float delta) {\n        stateTime += delta;\n    }\n    \n    public void setStateTime(float stateTime) {\n        this.stateTime = stateTime;\n    }\n    \n    /**\n     * Reset the state time to 0 to restart the animation.\n     */\n    public void resetStateTime() {\n        stateTime = 0;\n    }\n    \n    /**\n     * Set the animation state time to the end of the animation.\n     */\n    public void endAnimation() {\n        stateTime = animation.getAnimationDuration();\n    }\n    \n    public void setPlayMode(PlayMode playMode) {\n        animation.setPlayMode(playMode);\n    }\n    \n    /**\n     * Get the {@link Animation} that this object holds.\n     */\n    public Animation&lt;T&gt; getAnimation() {\n        return animation;\n    }\n    \n    public boolean isAnimationFinished() {\n        return animation.isAnimationFinished(stateTime);\n    }\n    \n    public float getAnimationDuration() {\n        return animation.getAnimationDuration();\n    }\n    \n    /**\n     * Flip all key frames of the animation.\n     */\n    public void flip(boolean x, boolean y) {\n        for (TextureRegion region : animation.getKeyFrames()) {\n            region.flip(x, y);\n        }\n    }\n    \n    public AnimationSpriteConfig getSpriteConfig() {\n        return spriteConfig;\n    }\n    \n    public void setSpriteConfig(AnimationSpriteConfig spriteConfig) {\n        this.spriteConfig = spriteConfig;\n    }\n    \n    public AnimationSpriteConfig getSpriteConfigCopy() {\n        return new AnimationSpriteConfig(spriteConfig);\n    }\n}\n</code></pre>\n<p><strong>AnimationSpriteConfig</strong></p>\n<pre><code>import com.badlogic.gdx.graphics.g2d.Sprite;\n\npublic class AnimationSpriteConfig {\n    \n    public static AnimationSpriteConfig fromSprite(Sprite sprite) {\n        AnimationSpriteConfig spriteConfig = new AnimationSpriteConfig();\n        spriteConfig.width = sprite.getWidth();\n        spriteConfig.height = sprite.getHeight();\n        spriteConfig.x = sprite.getX();\n        spriteConfig.y = sprite.getY();\n        \n        return spriteConfig;\n    }\n    \n    public AnimationSpriteConfig() {}\n    \n    public AnimationSpriteConfig(AnimationSpriteConfig spriteConfig) {\n        this.x = spriteConfig.x;\n        this.y = spriteConfig.y;\n        this.width = spriteConfig.width;\n        this.height = spriteConfig.height;\n    }\n    \n    public float x;\n    public float y;\n    public float width;\n    public float height;\n    \n    public AnimationSpriteConfig setX(float x) {\n        this.x = x;\n        return this;\n    }\n    \n    public AnimationSpriteConfig setY(float y) {\n        this.y = y;\n        return this;\n    }\n    \n    public AnimationSpriteConfig setWidth(float width) {\n        this.width = width;\n        return this;\n    }\n    \n    public AnimationSpriteConfig setHeight(float height) {\n        this.height = height;\n        return this;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":10971775,"reputation":1,"user_id":8061799,"display_name":"user123546863"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":262,"favorite_count":0,"down_vote_count":11,"up_vote_count":0,"answer_count":1,"score":-11,"last_activity_date":1695757857,"creation_date":1628144299,"question_id":68661514,"body_markdown":"I&#39;m working on a game that has animations with non uniform key frames so that things like start up, active, and recovery frames can be changed for balance purposes. I have looping animations such as idle and walking that loop fairly smoothly however attacking animations that only play once are very stuttery and sometimes play multiple times.\r\n\r\nI&#39;ve tried the following calculations to no help in pseudo ish code\r\n\r\n```\r\nin animation class:\r\nisAnimationFinished(float time)\r\n    return (time / animationLength) &gt;= 0.95\r\n    // Note: 0.95 seemed like a good value as it seemed that the last frame in any animation\r\n    // would result in a value between 0.95 and 0.99 when used in this calculation. \r\n\r\n// frameTimes is an array of floats that stores the amount of time, in milliseconds,\r\n// that a key frame should be drawn for. \r\n// One example of an array used is:\r\nfloat[] jabFrames = {\r\n    FRAME * frameData[0].getStartUpFrames(), FRAME * frameData[0].getActiveFrames(),\r\n    FRAME * frameData[0].getRecoveryFrames()\r\n};\r\n// Where FRAME is a float of 1/60f and frameData is an int array\r\n\r\ngetAnimationDuration()\r\n    sum = 0.0\r\n    for each floatValue in frameTimes:\r\n        sum += floatValue \r\n    return sum\r\n\r\n...\r\n\r\nin the pawn class&#39;s draw function:\r\n\r\ndraw(deltaTime):\r\n    stateTime += deltaTime (time since last render)\r\n\r\n    get the animation based on the animation_state\r\n\r\n    if(animation_state is JAB and animation.isAnimationFinished(stateTime))\r\n        animation_state = IDLE\r\n\r\n    if(stateTime &gt;= animation.getAnimationDuration())\r\n        stateTime -= animation.getAnimationDuration()\r\n\r\n    drawAnimation()","title":"Is there a general method for calculating the end of an animation and switching between animations when they are finished?","body":"<p>I'm working on a game that has animations with non uniform key frames so that things like start up, active, and recovery frames can be changed for balance purposes. I have looping animations such as idle and walking that loop fairly smoothly however attacking animations that only play once are very stuttery and sometimes play multiple times.</p>\n<p>I've tried the following calculations to no help in pseudo ish code</p>\n<pre><code>in animation class:\nisAnimationFinished(float time)\n    return (time / animationLength) &gt;= 0.95\n    // Note: 0.95 seemed like a good value as it seemed that the last frame in any animation\n    // would result in a value between 0.95 and 0.99 when used in this calculation. \n\n// frameTimes is an array of floats that stores the amount of time, in milliseconds,\n// that a key frame should be drawn for. \n// One example of an array used is:\nfloat[] jabFrames = {\n    FRAME * frameData[0].getStartUpFrames(), FRAME * frameData[0].getActiveFrames(),\n    FRAME * frameData[0].getRecoveryFrames()\n};\n// Where FRAME is a float of 1/60f and frameData is an int array\n\ngetAnimationDuration()\n    sum = 0.0\n    for each floatValue in frameTimes:\n        sum += floatValue \n    return sum\n\n...\n\nin the pawn class's draw function:\n\ndraw(deltaTime):\n    stateTime += deltaTime (time since last render)\n\n    get the animation based on the animation_state\n\n    if(animation_state is JAB and animation.isAnimationFinished(stateTime))\n        animation_state = IDLE\n\n    if(stateTime &gt;= animation.getAnimationDuration())\n        stateTime -= animation.getAnimationDuration()\n\n    drawAnimation()\n</code></pre>\n"},{"tags":["java","spring"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1695475841,"post_id":77163031,"comment_id":136031071,"body_markdown":"Not a practical strategy really. You&#39;re better off storing them in the file system and storing their *paths* in your persistence layer","body":"Not a practical strategy really. You&#39;re better off storing them in the file system and storing their <i>paths</i> in your persistence layer"},{"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"score":1,"creation_date":1695486092,"post_id":77163031,"comment_id":136032107,"body_markdown":"`@PostMapping(&quot;board/writepro&quot;)` should use the consumes-value to accept `application/x-www-form-urlencoded`.","body":"<code>@PostMapping(&quot;board&#47;writepro&quot;)</code> should use the consumes-value to accept <code>application&#47;x-www-form-urlencoded</code>."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1695496021,"post_id":77163031,"comment_id":136033281,"body_markdown":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a [minimal reproducible example](https://stackoverflow.com/help/minimal-reproducible-example).","body":"Please trim your code to make it easier to find your problem. Follow these guidelines to create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."},{"owner":{"account_id":16744354,"reputation":504,"user_id":12103109,"display_name":"CaptainAye"},"score":0,"creation_date":1695498252,"post_id":77163031,"comment_id":136033477,"body_markdown":"In order to send images via rest, use multipart/form-data instead of application/x-www-form-urlencoded. Take a look at https://www.baeldung.com/sprint-boot-multipart-requests for hints","body":"In order to send images via rest, use multipart/form-data instead of application/x-www-form-urlencoded. Take a look at <a href=\"https://www.baeldung.com/sprint-boot-multipart-requests\" rel=\"nofollow noreferrer\">baeldung.com/sprint-boot-multipart-requests</a> for hints"}],"owner":{"account_id":29505376,"reputation":11,"user_id":22611453,"display_name":""},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695755640,"creation_date":1695472141,"question_id":77163031,"body_markdown":"I&#39;m working on a web application, and I&#39;m trying to send a `POST` request to a specific endpoint (`/board/writepro`). However, I&#39;m encountering the following error message:\r\nI&#39;m using `Spring`, and I&#39;m getting an error message that says:\r\n \r\n\r\n&gt; Content-Type &#39;application/x-www-form-urlencoded;charset=UTF-8&#39; is not\r\n&gt; supported\r\n\r\n when making a `POST` request. How can I resolve this issue? Here&#39;s my `controller` class:\r\nI am working with a `React` user on a project\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.controller;\r\n\r\n\r\nimport jakarta.transaction.Transactional;\r\nimport lombok.extern.slf4j.Slf4j;\r\nimport org.polyproject.fishinghubpro.dto.BoardDto;\r\nimport org.polyproject.fishinghubpro.entity.Board;\r\nimport org.polyproject.fishinghubpro.service.BoardService;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.data.domain.Page;\r\nimport org.springframework.data.domain.Pageable;\r\nimport org.springframework.data.domain.Sort;\r\nimport org.springframework.data.web.PageableDefault;\r\nimport org.springframework.http.HttpStatus;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.stereotype.Controller;\r\nimport org.springframework.ui.Model;\r\nimport org.springframework.web.bind.annotation.*;\r\nimport org.springframework.web.multipart.MultipartFile;\r\n\r\nimport java.security.Principal;\r\nimport java.util.List;\r\n\r\n@RestController\r\n@CrossOrigin(&quot;*&quot;)\r\n@Transactional\r\n@Slf4j\r\npublic class BoardController {\r\n\r\n\r\n    @Autowired\r\n    private BoardService boardService;\r\n\r\n    @GetMapping(&quot;/board/write&quot;)//localhost:8090/board/write\r\n    public String boardWriteForm(){\r\n\r\n        return &quot;boardwrite&quot;;\r\n    }\r\n\r\n    //\r\n    @PostMapping(&quot;board/writepro&quot;)\r\n    public ResponseEntity&lt;BoardDto&gt; boardWritePro(@RequestBody Board board, MultipartFile file, Principal principal) throws Exception {\r\n        String userId = principal.getName();\r\n\r\n        // boardService.write      \r\n        BoardDto createdBoard = boardService.write(board, file, userId);\r\n\r\n        // ResponseEntity   ,    \r\n        return new ResponseEntity&lt;&gt;(createdBoard, HttpStatus.CREATED); // : response  createdBoard \r\n    }\r\n\r\n\r\n\r\n\r\n\r\n@GetMapping(&quot;/board/list&quot;)\r\npublic ResponseEntity&lt;List&lt;Board&gt;&gt; boardList(@PageableDefault(page = 0, size = 10, sort = &quot;id&quot;, direction = Sort.Direction.DESC) Pageable pageable) {\r\n    Page&lt;Board&gt; list = boardService.boardList(pageable);\r\n\r\n    //    \r\n    List&lt;Board&gt; boardList = list.getContent();\r\n\r\n    // ResponseEntity  JSON   \r\n    return new ResponseEntity&lt;&gt;(boardList, HttpStatus.OK);\r\n}\r\n\r\n    @GetMapping(&quot;/board/view&quot;)//localhost:8080/board/view?id=1\r\n    public String boardView(Model model, Integer id){\r\n\r\n\r\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\r\n        return &quot;boardview&quot;;\r\n    }\r\n    @DeleteMapping(&quot;/board/{id}&quot;)\r\n    public ResponseEntity&lt;String&gt; deleteBoard(@PathVariable(&quot;id&quot;) Integer id) {\r\n        try {\r\n            //   .\r\n            boardService.boardDelete(id);\r\n\r\n            //     .\r\n            return ResponseEntity.noContent().build();\r\n        } catch (Exception e) {\r\n            //       .\r\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;    .&quot;);\r\n        }\r\n    }\r\n\r\n\r\n    @GetMapping(&quot;/board/modify/{id}&quot;)\r\n    public String boardModify(@PathVariable(&quot;id&quot;)Integer id,Model model){\r\n\r\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\r\n        return &quot;boardmodify&quot;;\r\n    }\r\n    @PostMapping(&quot;/board/update/&quot;)\r\n    public String boardUpdate(@RequestBody BoardDto board, Principal principal)throws Exception {\r\n        log.info(&quot;!~!==={}&quot;,board.getId());\r\n        String userId = principal.getName();    //   .\r\n        Board boardTemp = boardService.boardView(board.getId());   //   \r\n\r\n        //        .\r\n        boardTemp.setTitle(board.getTitle());   //dirtyChecking  .     .\r\n        boardTemp.setContent(board.getContent());\r\n//        boardService.write(boardTemp, file, userId); //   \r\n        return &quot;.&quot;;\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.dto;\r\n\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.Getter;\r\nimport lombok.Setter;\r\nimport org.polyproject.fishinghubpro.entity.BaseEntity;\r\n\r\nimport java.util.Date;\r\n\r\n@Data\r\n@Builder\r\npublic class BoardDto {\r\n\r\n    @Setter@Getter\r\n    private int id;\r\n    private String title;\r\n    private String content;\r\n    private String filename;\r\n    private String filepath;\r\n    private Date createdAt;\r\n    private String memberNick; //  \r\n\r\n    // , getter, setter \r\n}\r\n```\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.entity;\r\n\r\nimport com.fasterxml.jackson.annotation.JsonIgnore;\r\nimport jakarta.persistence.*;\r\nimport lombok.Builder;\r\nimport lombok.Data;\r\nimport lombok.ToString;\r\nimport org.hibernate.annotations.CreationTimestamp;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@Data\r\npublic class Board{\r\n\r\n    @Id\r\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\r\n    private Integer id;\r\n\r\n    private String title;\r\n\r\n    @Column(columnDefinition = &quot;TEXT&quot;, nullable = false) // content TEXT   NOT NULL   \r\n    private  String content;\r\n\r\n    @Column(length = 15000 )\r\n    private String filename;\r\n\r\n    @Column(length = 30000 )\r\n    private String filepath;\r\n\r\n    @CreationTimestamp\r\n    @Temporal(TemporalType.TIMESTAMP)\r\n    @Column(name = &quot;created_at&quot;, nullable = false, updatable = false)\r\n    private Date createdAt;\r\n\r\n    @ManyToOne\r\n    @ToString.Exclude\r\n    @JoinColumn(name=&quot;user_no&quot;)\r\n    private Member member;\r\n}\r\n\r\n```\r\n\r\n```\r\npackage org.polyproject.fishinghubpro.repository;\r\n\r\nimport jakarta.transaction.Transactional;\r\nimport org.polyproject.fishinghubpro.entity.Board;\r\nimport org.polyproject.fishinghubpro.entity.Member;\r\nimport org.springframework.data.jpa.repository.JpaRepository;\r\nimport org.springframework.stereotype.Repository;\r\n\r\nimport java.util.Optional;\r\n\r\n@Repository\r\n@Transactional\r\npublic interface BoardRepository  extends JpaRepository &lt;Board, Integer&gt; {\r\n}\r\n\r\n```\r\n\r\n\r\n```\r\n    package org.polyproject.fishinghubpro.service;\r\n\r\n    import jakarta.transaction.Transactional;\r\n    import org.polyproject.fishinghubpro.dto.BoardDto;\r\n    import org.polyproject.fishinghubpro.entity.Board;\r\n    import org.polyproject.fishinghubpro.entity.Member;\r\n    import org.polyproject.fishinghubpro.repository.BoardRepository;\r\n    import org.polyproject.fishinghubpro.repository.member.MemberRepository;\r\n    import org.springframework.beans.factory.annotation.Autowired;\r\n    import org.springframework.data.domain.Page;\r\n    import org.springframework.data.domain.Pageable;\r\n    import org.springframework.stereotype.Service;\r\n    import org.springframework.web.multipart.MultipartFile;\r\n\r\n    import java.util.Date;\r\n    import java.io.File;\r\n    import java.util.List;\r\n    import java.util.UUID;\r\n\r\n\r\n\r\n    @Service\r\n    @Transactional\r\n    public class BoardService {\r\n\r\n\r\n\r\n            @Autowired\r\n            private BoardRepository boardRepository;\r\n\r\n            @Autowired\r\n            private MemberRepository memberRepository;\r\n\r\n  \r\n\r\n            //  \r\n            public Page&lt;Board&gt;boardList(Pageable pageable){\r\n\r\n                return boardRepository.findAll(pageable);\r\n\r\n\r\n            }\r\n            //  \r\n        public Board boardView(Integer id) {\r\n\r\n            return boardRepository.findById(id).get();\r\n\r\n        }\r\n        // \r\n        public void boardDelete(Integer id){\r\n\r\n                boardRepository.deleteById(id);\r\n        }\r\n\r\n        //   \r\n        public BoardDto write(Board board, MultipartFile file, String userId) throws Exception {\r\n            Member member = memberRepository.findByUserId(userId).orElse(null);\r\n\r\n            if (board.getContent() != null &amp;&amp; !board.getContent().isEmpty()) {\r\n    //            //   \r\n    //            board.setCreatedAt(new Date());\r\n                //    \r\n                String projectPath = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static/files&quot;;\r\n                // UUID    \r\n                UUID uuid = UUID.randomUUID();\r\n\r\n                //     \r\n                if (file != null &amp;&amp; !file.isEmpty()) {\r\n                    String fileName = uuid + &quot;_&quot; + file.getOriginalFilename();\r\n                    File saveFile = new File(projectPath, fileName);\r\n                    file.transferTo(saveFile);\r\n                    board.setFilename(fileName);\r\n                    board.setFilepath(&quot;/files/&quot; + fileName); //    \r\n                }\r\n                board.setMember(member);\r\n\r\n                Board savedBoard = boardRepository.save(board); //  \r\n\r\n                //     DTO  \r\n                BoardDto boardDto = BoardDto.builder()\r\n                                .title(savedBoard.getTitle())\r\n                                        .content(savedBoard.getContent())\r\n                                                .filepath(savedBoard.getFilepath())\r\n                                                        .filename(savedBoard.getFilename())\r\n                                                                .build();\r\n                boardDto.setMemberNick(member.getUserNick());\r\n\r\n                return boardDto;\r\n            } else {\r\n                //  null      \r\n                throw new Exception(&quot;  .&quot;);\r\n            }\r\n        }\r\n        }\r\n\r\n\r\n```\r\n\r\n\r\n\r\nThank you for helping me fix this.","title":"I want to store and send images to a database using Spring","body":"<p>I'm working on a web application, and I'm trying to send a <code>POST</code> request to a specific endpoint (<code>/board/writepro</code>). However, I'm encountering the following error message:\nI'm using <code>Spring</code>, and I'm getting an error message that says:</p>\n<blockquote>\n<p>Content-Type 'application/x-www-form-urlencoded;charset=UTF-8' is not\nsupported</p>\n</blockquote>\n<p>when making a <code>POST</code> request. How can I resolve this issue? Here's my <code>controller</code> class:\nI am working with a <code>React</code> user on a project</p>\n<pre><code>package org.polyproject.fishinghubpro.controller;\n\n\nimport jakarta.transaction.Transactional;\nimport lombok.extern.slf4j.Slf4j;\nimport org.polyproject.fishinghubpro.dto.BoardDto;\nimport org.polyproject.fishinghubpro.entity.Board;\nimport org.polyproject.fishinghubpro.service.BoardService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.data.domain.Page;\nimport org.springframework.data.domain.Pageable;\nimport org.springframework.data.domain.Sort;\nimport org.springframework.data.web.PageableDefault;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.ui.Model;\nimport org.springframework.web.bind.annotation.*;\nimport org.springframework.web.multipart.MultipartFile;\n\nimport java.security.Principal;\nimport java.util.List;\n\n@RestController\n@CrossOrigin(&quot;*&quot;)\n@Transactional\n@Slf4j\npublic class BoardController {\n\n\n    @Autowired\n    private BoardService boardService;\n\n    @GetMapping(&quot;/board/write&quot;)//localhost:8090/board/write\n    public String boardWriteForm(){\n\n        return &quot;boardwrite&quot;;\n    }\n\n    //\n    @PostMapping(&quot;board/writepro&quot;)\n    public ResponseEntity&lt;BoardDto&gt; boardWritePro(@RequestBody Board board, MultipartFile file, Principal principal) throws Exception {\n        String userId = principal.getName();\n\n        // boardService.write      \n        BoardDto createdBoard = boardService.write(board, file, userId);\n\n        // ResponseEntity   ,    \n        return new ResponseEntity&lt;&gt;(createdBoard, HttpStatus.CREATED); // : response  createdBoard \n    }\n\n\n\n\n\n@GetMapping(&quot;/board/list&quot;)\npublic ResponseEntity&lt;List&lt;Board&gt;&gt; boardList(@PageableDefault(page = 0, size = 10, sort = &quot;id&quot;, direction = Sort.Direction.DESC) Pageable pageable) {\n    Page&lt;Board&gt; list = boardService.boardList(pageable);\n\n    //    \n    List&lt;Board&gt; boardList = list.getContent();\n\n    // ResponseEntity  JSON   \n    return new ResponseEntity&lt;&gt;(boardList, HttpStatus.OK);\n}\n\n    @GetMapping(&quot;/board/view&quot;)//localhost:8080/board/view?id=1\n    public String boardView(Model model, Integer id){\n\n\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\n        return &quot;boardview&quot;;\n    }\n    @DeleteMapping(&quot;/board/{id}&quot;)\n    public ResponseEntity&lt;String&gt; deleteBoard(@PathVariable(&quot;id&quot;) Integer id) {\n        try {\n            //   .\n            boardService.boardDelete(id);\n\n            //     .\n            return ResponseEntity.noContent().build();\n        } catch (Exception e) {\n            //       .\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR).body(&quot;    .&quot;);\n        }\n    }\n\n\n    @GetMapping(&quot;/board/modify/{id}&quot;)\n    public String boardModify(@PathVariable(&quot;id&quot;)Integer id,Model model){\n\n        model.addAttribute(&quot;board&quot;,boardService.boardView(id));\n        return &quot;boardmodify&quot;;\n    }\n    @PostMapping(&quot;/board/update/&quot;)\n    public String boardUpdate(@RequestBody BoardDto board, Principal principal)throws Exception {\n        log.info(&quot;!~!==={}&quot;,board.getId());\n        String userId = principal.getName();    //   .\n        Board boardTemp = boardService.boardView(board.getId());   //   \n\n        //        .\n        boardTemp.setTitle(board.getTitle());   //dirtyChecking  .     .\n        boardTemp.setContent(board.getContent());\n//        boardService.write(boardTemp, file, userId); //   \n        return &quot;.&quot;;\n    }\n\n}\n\n</code></pre>\n<pre><code>package org.polyproject.fishinghubpro.dto;\n\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.Getter;\nimport lombok.Setter;\nimport org.polyproject.fishinghubpro.entity.BaseEntity;\n\nimport java.util.Date;\n\n@Data\n@Builder\npublic class BoardDto {\n\n    @Setter@Getter\n    private int id;\n    private String title;\n    private String content;\n    private String filename;\n    private String filepath;\n    private Date createdAt;\n    private String memberNick; //  \n\n    // , getter, setter \n}\n</code></pre>\n<pre><code>package org.polyproject.fishinghubpro.entity;\n\nimport com.fasterxml.jackson.annotation.JsonIgnore;\nimport jakarta.persistence.*;\nimport lombok.Builder;\nimport lombok.Data;\nimport lombok.ToString;\nimport org.hibernate.annotations.CreationTimestamp;\n\nimport java.util.ArrayList;\nimport java.util.Date;\nimport java.util.List;\n\n@Entity\n@Data\npublic class Board{\n\n    @Id\n    @GeneratedValue(strategy= GenerationType.IDENTITY)\n    private Integer id;\n\n    private String title;\n\n    @Column(columnDefinition = &quot;TEXT&quot;, nullable = false) // content TEXT   NOT NULL   \n    private  String content;\n\n    @Column(length = 15000 )\n    private String filename;\n\n    @Column(length = 30000 )\n    private String filepath;\n\n    @CreationTimestamp\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name = &quot;created_at&quot;, nullable = false, updatable = false)\n    private Date createdAt;\n\n    @ManyToOne\n    @ToString.Exclude\n    @JoinColumn(name=&quot;user_no&quot;)\n    private Member member;\n}\n\n</code></pre>\n<pre><code>package org.polyproject.fishinghubpro.repository;\n\nimport jakarta.transaction.Transactional;\nimport org.polyproject.fishinghubpro.entity.Board;\nimport org.polyproject.fishinghubpro.entity.Member;\nimport org.springframework.data.jpa.repository.JpaRepository;\nimport org.springframework.stereotype.Repository;\n\nimport java.util.Optional;\n\n@Repository\n@Transactional\npublic interface BoardRepository  extends JpaRepository &lt;Board, Integer&gt; {\n}\n\n</code></pre>\n<pre><code>    package org.polyproject.fishinghubpro.service;\n\n    import jakarta.transaction.Transactional;\n    import org.polyproject.fishinghubpro.dto.BoardDto;\n    import org.polyproject.fishinghubpro.entity.Board;\n    import org.polyproject.fishinghubpro.entity.Member;\n    import org.polyproject.fishinghubpro.repository.BoardRepository;\n    import org.polyproject.fishinghubpro.repository.member.MemberRepository;\n    import org.springframework.beans.factory.annotation.Autowired;\n    import org.springframework.data.domain.Page;\n    import org.springframework.data.domain.Pageable;\n    import org.springframework.stereotype.Service;\n    import org.springframework.web.multipart.MultipartFile;\n\n    import java.util.Date;\n    import java.io.File;\n    import java.util.List;\n    import java.util.UUID;\n\n\n\n    @Service\n    @Transactional\n    public class BoardService {\n\n\n\n            @Autowired\n            private BoardRepository boardRepository;\n\n            @Autowired\n            private MemberRepository memberRepository;\n\n  \n\n            //  \n            public Page&lt;Board&gt;boardList(Pageable pageable){\n\n                return boardRepository.findAll(pageable);\n\n\n            }\n            //  \n        public Board boardView(Integer id) {\n\n            return boardRepository.findById(id).get();\n\n        }\n        // \n        public void boardDelete(Integer id){\n\n                boardRepository.deleteById(id);\n        }\n\n        //   \n        public BoardDto write(Board board, MultipartFile file, String userId) throws Exception {\n            Member member = memberRepository.findByUserId(userId).orElse(null);\n\n            if (board.getContent() != null &amp;&amp; !board.getContent().isEmpty()) {\n    //            //   \n    //            board.setCreatedAt(new Date());\n                //    \n                String projectPath = System.getProperty(&quot;user.dir&quot;) + &quot;/src/main/resources/static/files&quot;;\n                // UUID    \n                UUID uuid = UUID.randomUUID();\n\n                //     \n                if (file != null &amp;&amp; !file.isEmpty()) {\n                    String fileName = uuid + &quot;_&quot; + file.getOriginalFilename();\n                    File saveFile = new File(projectPath, fileName);\n                    file.transferTo(saveFile);\n                    board.setFilename(fileName);\n                    board.setFilepath(&quot;/files/&quot; + fileName); //    \n                }\n                board.setMember(member);\n\n                Board savedBoard = boardRepository.save(board); //  \n\n                //     DTO  \n                BoardDto boardDto = BoardDto.builder()\n                                .title(savedBoard.getTitle())\n                                        .content(savedBoard.getContent())\n                                                .filepath(savedBoard.getFilepath())\n                                                        .filename(savedBoard.getFilename())\n                                                                .build();\n                boardDto.setMemberNick(member.getUserNick());\n\n                return boardDto;\n            } else {\n                //  null      \n                throw new Exception(&quot;  .&quot;);\n            }\n        }\n        }\n\n\n</code></pre>\n<p>Thank you for helping me fix this.</p>\n"},{"tags":["java","function","lambda","monads"],"comments":[{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1695143747,"post_id":77136616,"comment_id":135983595,"body_markdown":"A ton. `Function` does not exist in java 1.7 at all, so you can&#39;t use it (You can make your own, of course). The synax `return Monad&lt;U&gt;(val + 1);` isn&#39;t even legal java. Did you mean `return new Monad&lt;U&gt;(val + 1);` perhaps? That still doesn&#39;t work - val&#39;s type is `T`, could be anything. &quot;Anything&quot; is not guaranteed to have a meaningful interaction with &quot;+1&quot;. So that code makes no semantic sense whatsoever.","body":"A ton. <code>Function</code> does not exist in java 1.7 at all, so you can&#39;t use it (You can make your own, of course). The synax <code>return Monad&lt;U&gt;(val + 1);</code> isn&#39;t even legal java. Did you mean <code>return new Monad&lt;U&gt;(val + 1);</code> perhaps? That still doesn&#39;t work - val&#39;s type is <code>T</code>, could be anything. &quot;Anything&quot; is not guaranteed to have a meaningful interaction with &quot;+1&quot;. So that code makes no semantic sense whatsoever."},{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":0,"creation_date":1695144118,"post_id":77136616,"comment_id":135983659,"body_markdown":"Implementing Monads is harder than that, but really, you don&#39;t want to create a class called `MonadFunction`.  Really, just create your own `Function` interface and keep everything else the same.","body":"Implementing Monads is harder than that, but really, you don&#39;t want to create a class called <code>MonadFunction</code>.  Really, just create your own <code>Function</code> interface and keep everything else the same."},{"owner":{"account_id":21469747,"reputation":83,"user_id":15818978,"display_name":"toowren"},"score":0,"creation_date":1695157808,"post_id":77136616,"comment_id":135985846,"body_markdown":"Cheers. Just for now, I&#39;m not looking for val + 1 or any other operation, but a way to make lambda expressions  free code. For example,\n \n`class FunctionWithoutLambda implements Function&lt;String, Integer&gt; {\n\n  FunctionWithoutLambda() { }\n  \n  Integer apply(String string_) { return string_.length(); } \n    \n}`\n\nworks fine with at least 1.8, pretty sure that it&#39;s a generic types issue.","body":"Cheers. Just for now, I&#39;m not looking for val + 1 or any other operation, but a way to make lambda expressions  free code. For example,   <code>class FunctionWithoutLambda implements Function&lt;String, Integer&gt; {    FunctionWithoutLambda() { }      Integer apply(String string_) { return string_.length(); }       }</code>  works fine with at least 1.8, pretty sure that it&#39;s a generic types issue."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":0,"creation_date":1695195635,"post_id":77136616,"comment_id":135990039,"body_markdown":"The `MonadFunction` class doesnt define `T`. Please clarify: do you actually need this to work with Java 1.7 or are you just looking to make it work in 1.8 without using lambdas?","body":"The <code>MonadFunction</code> class doesnt define <code>T</code>. Please clarify: do you actually need this to work with Java 1.7 or are you just looking to make it work in 1.8 without using lambdas?"}],"answers":[{"tags":[],"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695387574,"creation_date":1695387574,"answer_id":77157834,"question_id":77136616,"body_markdown":"If you only need to make this work in Java 8 without the use of lambdas, you can also create a class that implements `Function`:\r\n\r\n```java\r\nclass Adder implements Function&lt;Integer, Monad&lt;Integer&gt;&gt; {\r\n    private final int num;\r\n\r\n    Adder(int num) {\r\n        this.num = num;\r\n    }\r\n\r\n    @Override\r\n    public Monad&lt;Integer&gt; apply(Integer integer) {\r\n        return new Maybe&lt;&gt;(integer + num);\r\n    }\r\n}\r\n\r\npublic class MonadApp {\r\n    public static void main(String[] args) {\r\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n        Monad&lt;Integer&gt; y = x\r\n                .bind(new Adder(1))\r\n                .bind(new Adder(2));\r\n\r\n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\r\n    }\r\n}\r\n```\r\n\r\nIn this case, the definitions of `Monad` and `Maybe` are unchanged.\r\n\r\nIf it does need to work with Java 7, `java.util.function.Function` is not available, but you can easily define an identical interface yourself:\r\n\r\n```java\r\ninterface Function&lt;T, U&gt; {\r\n    U apply(T value);\r\n}\r\n```\r\n\r\nIf you use this interface instead of `java.util.function.Function`, this will work with both Java 7 and Java 8, even with lambdas.","title":"Converting java.util.Function to non-Lambda expression one in Monad example taken from Wikipedia","body":"<p>If you only need to make this work in Java 8 without the use of lambdas, you can also create a class that implements <code>Function</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Adder implements Function&lt;Integer, Monad&lt;Integer&gt;&gt; {\n    private final int num;\n\n    Adder(int num) {\n        this.num = num;\n    }\n\n    @Override\n    public Monad&lt;Integer&gt; apply(Integer integer) {\n        return new Maybe&lt;&gt;(integer + num);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n        Monad&lt;Integer&gt; y = x\n                .bind(new Adder(1))\n                .bind(new Adder(2));\n\n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\n    }\n}\n</code></pre>\n<p>In this case, the definitions of <code>Monad</code> and <code>Maybe</code> are unchanged.</p>\n<p>If it does need to work with Java 7, <code>java.util.function.Function</code> is not available, but you can easily define an identical interface yourself:</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface Function&lt;T, U&gt; {\n    U apply(T value);\n}\n</code></pre>\n<p>If you use this interface instead of <code>java.util.function.Function</code>, this will work with both Java 7 and Java 8, even with lambdas.</p>\n"},{"tags":[],"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695755637,"creation_date":1695672696,"answer_id":77175461,"question_id":77136616,"body_markdown":"Your approach is flawed for a couple of reasons:\r\n\r\n 1. You can implement monadic types in Java but you can&#39;t usefully express the fact that your type is a `Monad`, because the return type of the bind method needs to be M&lt;U&gt; (M being the actual monad type), not `Monad&lt;U&gt;`. This isn&#39;t possible to express in Java due to the absence of higher-kinded types. You also can&#39;t capture the fact that the monad type needs to have a static `pure` method (sometimes called `return` or `unit`).\r\n 1. Your `MonadFunction` type isn&#39;t valid Java, as the generic type parameters, T &amp; U aren&#39;t declared (the class declaration should start with `class MonadFunction&lt;T, U&gt;`). Even if you fix that you&#39;ll then still have the above issue.\r\n\r\nHowever, you can express your `Maybe` class without recourse to Lambda functions quite easily once you throw away the `Monad` type:\r\n\r\n    class Maybe&lt;T&gt; {\r\n\r\n        private final T val;\r\n\r\n        public Maybe(T val) {\r\n            this.val = val;\r\n        }\r\n\r\n        public T getVal() {\r\n            return val;\r\n        }\r\n\r\n        public &lt;U&gt; Maybe&lt;U&gt; bind(Function&lt;T, Maybe&lt;U&gt;&gt; f) {\r\n            if (val == null)\r\n                return new Maybe&lt;U&gt;(null);\r\n            else\r\n                return f.apply(val);\r\n        }\r\n    }\r\n\r\n    public class MonadApp {\r\n        public static void main(String[] args) {\r\n            Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n\r\n            Maybe&lt;String&gt; y = x.bind(new Function&lt;Integer, Maybe&lt;String&gt;&gt;() {\r\n                @Override\r\n                public Maybe&lt;String&gt; apply(Integer i) {\r\n                    return i == 0 ? new Maybe&lt;&gt;(null) : new Maybe&lt;&gt;(i.toString());\r\n                }\r\n            });\r\n\r\n            System.out.println(y.getVal());\r\n        }\r\n    }","title":"Converting java.util.Function to non-Lambda expression one in Monad example taken from Wikipedia","body":"<p>Your approach is flawed for a couple of reasons:</p>\n<ol>\n<li>You can implement monadic types in Java but you can't usefully express the fact that your type is a <code>Monad</code>, because the return type of the bind method needs to be M (M being the actual monad type), not <code>Monad&lt;U&gt;</code>. This isn't possible to express in Java due to the absence of higher-kinded types. You also can't capture the fact that the monad type needs to have a static <code>pure</code> method (sometimes called <code>return</code> or <code>unit</code>).</li>\n<li>Your <code>MonadFunction</code> type isn't valid Java, as the generic type parameters, T &amp; U aren't declared (the class declaration should start with <code>class MonadFunction&lt;T, U&gt;</code>). Even if you fix that you'll then still have the above issue.</li>\n</ol>\n<p>However, you can express your <code>Maybe</code> class without recourse to Lambda functions quite easily once you throw away the <code>Monad</code> type:</p>\n<pre><code>class Maybe&lt;T&gt; {\n\n    private final T val;\n\n    public Maybe(T val) {\n        this.val = val;\n    }\n\n    public T getVal() {\n        return val;\n    }\n\n    public &lt;U&gt; Maybe&lt;U&gt; bind(Function&lt;T, Maybe&lt;U&gt;&gt; f) {\n        if (val == null)\n            return new Maybe&lt;U&gt;(null);\n        else\n            return f.apply(val);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n\n        Maybe&lt;String&gt; y = x.bind(new Function&lt;Integer, Maybe&lt;String&gt;&gt;() {\n            @Override\n            public Maybe&lt;String&gt; apply(Integer i) {\n                return i == 0 ? new Maybe&lt;&gt;(null) : new Maybe&lt;&gt;(i.toString());\n            }\n        });\n\n        System.out.println(y.getVal());\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21469747,"reputation":83,"user_id":15818978,"display_name":"toowren"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1695755637,"creation_date":1695143371,"question_id":77136616,"body_markdown":"There is a very simple Monad example, written in Java, which is taken from Wikipedia article.\r\n\r\n    import java.util.function.Function;\r\n    \r\n    interface Monad&lt;T&gt; {\r\n    \t&lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\r\n    }\r\n    \r\n    class Maybe&lt;T&gt; implements Monad&lt;T&gt; {\r\n    \r\n    \tprivate final T val;\r\n    \r\n    \tpublic Maybe(T val) {\r\n    \t\tthis.val = val;\r\n    \t}\r\n    \r\n    \tpublic T getVal() {\r\n    \t\treturn val;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\r\n    \t\tif (val == null)\r\n    \t\t\treturn new Maybe&lt;U&gt;(null);\r\n    \t\treturn f.apply(val);\r\n    \t}\r\n    }\r\n    \r\n    public class MonadApp {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tMaybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n            Monad&lt;Integer&gt; y = x\r\n            \t\t.bind(v -&gt; new Maybe&lt;&gt;(v + 1))\r\n            \t\t.bind(v -&gt; new Maybe&lt;&gt;(v * 2));\r\n    \r\n    \t\tSystem.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\r\n    \t}\r\n    }\r\n\r\nFor scholar purposed I&#39;m trying to rewrite it without lambda expression for old Java 1.7 version. \r\n\r\nMy code looks like\r\n\r\n    import java.util.function.Function;\r\n    \r\n    class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\r\n        \r\n        Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\r\n        \r\n    }\r\n    \r\n    interface Monad&lt;T&gt; {\r\n    \t&lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\r\n    }\r\n    \r\n    class Maybe&lt;T&gt; implements Monad&lt;T&gt; {\r\n    \r\n    \tprivate final T val;\r\n    \r\n    \tpublic Maybe(T val) {\r\n    \t\tthis.val = val;\r\n    \t}\r\n    \r\n    \tpublic T getVal() {\r\n    \t\treturn val;\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\r\n    \t\tif (val == null)\r\n    \t\t\treturn new Maybe&lt;U&gt;(null);\r\n    \t\treturn f.apply(val);\r\n    \t}\r\n    }\r\n    \r\n    public class MonadApp {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tMaybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\r\n     \r\n            Monad&lt;Integer&gt; y = x.bind(new MonadFunction())\r\n            \r\n    \t\tSystem.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\r\n    \t}\r\n    }\r\n\r\nwhere I have replaced functions (in my case just first one) with \r\n\r\n    class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\r\n    \r\n        Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\r\n    \r\n    }\r\n\r\nhowever both offline and online compilers return errors `/MonadApp.java:3: error: cannot find symbol class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{` and  `symbol: class U\r\n    /MonadApp.java:5: error: cannot find symbol Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }`\r\n\r\nThe question is what I&#39;m doing wrong?\r\n\r\n","title":"Converting java.util.Function to non-Lambda expression one in Monad example taken from Wikipedia","body":"<p>There is a very simple Monad example, written in Java, which is taken from Wikipedia article.</p>\n<pre><code>import java.util.function.Function;\n\ninterface Monad&lt;T&gt; {\n    &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\n}\n\nclass Maybe&lt;T&gt; implements Monad&lt;T&gt; {\n\n    private final T val;\n\n    public Maybe(T val) {\n        this.val = val;\n    }\n\n    public T getVal() {\n        return val;\n    }\n\n    @Override\n    public &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\n        if (val == null)\n            return new Maybe&lt;U&gt;(null);\n        return f.apply(val);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n        Monad&lt;Integer&gt; y = x\n                .bind(v -&gt; new Maybe&lt;&gt;(v + 1))\n                .bind(v -&gt; new Maybe&lt;&gt;(v * 2));\n\n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\n    }\n}\n</code></pre>\n<p>For scholar purposed I'm trying to rewrite it without lambda expression for old Java 1.7 version.</p>\n<p>My code looks like</p>\n<pre><code>import java.util.function.Function;\n\nclass MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\n    \n    Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\n    \n}\n\ninterface Monad&lt;T&gt; {\n    &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f);\n}\n\nclass Maybe&lt;T&gt; implements Monad&lt;T&gt; {\n\n    private final T val;\n\n    public Maybe(T val) {\n        this.val = val;\n    }\n\n    public T getVal() {\n        return val;\n    }\n\n    @Override\n    public &lt;U&gt; Monad&lt;U&gt; bind(Function&lt;T, Monad&lt;U&gt;&gt; f) {\n        if (val == null)\n            return new Maybe&lt;U&gt;(null);\n        return f.apply(val);\n    }\n}\n\npublic class MonadApp {\n    public static void main(String[] args) {\n        Maybe&lt;Integer&gt; x = new Maybe&lt;&gt;(5);\n \n        Monad&lt;Integer&gt; y = x.bind(new MonadFunction())\n        \n        System.out.println( ((Maybe&lt;Integer&gt;)y).getVal() );\n    }\n}\n</code></pre>\n<p>where I have replaced functions (in my case just first one) with</p>\n<pre><code>class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{\n\n    Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }\n\n}\n</code></pre>\n<p>however both offline and online compilers return errors <code>/MonadApp.java:3: error: cannot find symbol class MonadFunction implements Function&lt;T, Monad&lt;U&gt;&gt;{</code> and  <code>symbol: class U /MonadApp.java:5: error: cannot find symbol Monad&lt;U&gt; apply(T val) { return Monad&lt;U&gt;(val + 1); }</code></p>\n<p>The question is what I'm doing wrong?</p>\n"},{"tags":["java","oracle","callable-statement"],"comments":[{"owner":{"account_id":4964280,"reputation":4147,"user_id":3994197,"accept_rate":38,"display_name":"Vishal Gajera"},"score":0,"creation_date":1448999761,"post_id":34026574,"comment_id":55813263,"body_markdown":"may i know what are you tring to get values, am i guess you are getting value which is return by procedure ?","body":"may i know what are you tring to get values, am i guess you are getting value which is return by procedure ?"},{"owner":{"account_id":3448470,"reputation":369,"user_id":2888667,"accept_rate":45,"display_name":"Cleiton Ribeiro"},"score":0,"creation_date":1449000101,"post_id":34026574,"comment_id":55813442,"body_markdown":"yes, the output parameter is filled inside store procedure.\n\nI pass some empty variable, and i can recover the same filled variable.","body":"yes, the output parameter is filled inside store procedure.  I pass some empty variable, and i can recover the same filled variable."},{"owner":{"account_id":4964280,"reputation":4147,"user_id":3994197,"accept_rate":38,"display_name":"Vishal Gajera"},"score":0,"creation_date":1449000185,"post_id":34026574,"comment_id":55813489,"body_markdown":"can you please post your calling satatement exactly what have you used ?","body":"can you please post your calling satatement exactly what have you used ?"}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695755635,"creation_date":1695755635,"answer_id":77182829,"question_id":34026574,"body_markdown":"According to the [JavaDocs of `CallableStatement`](https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/CallableStatement.html) the method `getLong` ...\r\n&gt; Retrieves the value of a JDBC BIGINT parameter as a long in the Java programming language.\r\n\r\nwhile `getBigDecimal`...\r\n&gt; Retrieves the value of a JDBC NUMERIC parameter as a java.math.BigDecimal object with as many digits to the right of the decimal point as the value contains.\r\n\r\nSo as your database type is `NUMERIC` and not `BIGINT`, you have to use `getBigDecimal`.\r\n\r\n`NUMERIC` is a data type with decimal places, so `long` can&#39;t hold all possible values as it is an integer data type.\r\n\r\nIf you are sure that you don&#39;t receive a fractional part and your number will fit into a `long`, you can use \r\n\r\n```\r\nlong myNumber = CallableStatement.getNumeric(&quot;myNumber&quot;).longValue();\r\n```\r\n\r\nFor details about `longValue()` you can have a look at the [JavaDocs](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html#longValue()).","title":"When using CallableStatement, NUMBER type columns only can be recovered like BigDecimal","body":"<p>According to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.sql/java/sql/CallableStatement.html\" rel=\"nofollow noreferrer\">JavaDocs of <code>CallableStatement</code></a> the method <code>getLong</code> ...</p>\n<blockquote>\n<p>Retrieves the value of a JDBC BIGINT parameter as a long in the Java programming language.</p>\n</blockquote>\n<p>while <code>getBigDecimal</code>...</p>\n<blockquote>\n<p>Retrieves the value of a JDBC NUMERIC parameter as a java.math.BigDecimal object with as many digits to the right of the decimal point as the value contains.</p>\n</blockquote>\n<p>So as your database type is <code>NUMERIC</code> and not <code>BIGINT</code>, you have to use <code>getBigDecimal</code>.</p>\n<p><code>NUMERIC</code> is a data type with decimal places, so <code>long</code> can't hold all possible values as it is an integer data type.</p>\n<p>If you are sure that you don't receive a fractional part and your number will fit into a <code>long</code>, you can use</p>\n<pre><code>long myNumber = CallableStatement.getNumeric(&quot;myNumber&quot;).longValue();\n</code></pre>\n<p>For details about <code>longValue()</code> you can have a look at the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/math/BigDecimal.html#longValue()\" rel=\"nofollow noreferrer\">JavaDocs</a>.</p>\n"}],"owner":{"account_id":3448470,"reputation":369,"user_id":2888667,"accept_rate":45,"display_name":"Cleiton Ribeiro"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":369,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695755635,"creation_date":1448991523,"question_id":34026574,"body_markdown":"I&#39;m using CallableStatement to pass the stored procedure parameters through Java.\r\n\r\nBut, when I try to get some &quot;NUMBER&quot; type value, I can&#39;t use :\r\n\r\n    CallableStatement.getLong(1)\r\n\r\nBecause, all the &quot;NUMBER&quot; params will come like BigDecimal.\r\n\r\nAny idea ?\r\n\r\nFor example - inside database:\r\n\r\n    Procedure LookingForSomething(myNumber OUT NUMERIC);\r\n\r\nFrom Java:\r\n\r\n     Long myNumber = CallableStatement.getLong(&quot;myNumber&quot;); - doesn&#39;t work","title":"When using CallableStatement, NUMBER type columns only can be recovered like BigDecimal","body":"<p>I'm using CallableStatement to pass the stored procedure parameters through Java.</p>\n<p>But, when I try to get some &quot;NUMBER&quot; type value, I can't use :</p>\n<pre><code>CallableStatement.getLong(1)\n</code></pre>\n<p>Because, all the &quot;NUMBER&quot; params will come like BigDecimal.</p>\n<p>Any idea ?</p>\n<p>For example - inside database:</p>\n<pre><code>Procedure LookingForSomething(myNumber OUT NUMERIC);\n</code></pre>\n<p>From Java:</p>\n<pre><code> Long myNumber = CallableStatement.getLong(&quot;myNumber&quot;); - doesn't work\n</code></pre>\n"},{"tags":["java","spring","spring-security","oauth-2.0"],"answers":[{"tags":[],"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695755264,"creation_date":1695147033,"answer_id":77136984,"question_id":77136210,"body_markdown":"Resource servers are generally configured stateless (without sessions). \r\n\r\nIn the conf you expose, sessions are not disabled, but this doesn&#39;t mean that it is used to build the requests security context. What is used is the token introspector.\r\n\r\nSo if there should be some caching, it could be inside this introspector (cache the introspection response for given token strings). But this caching would contradict the most frequent motivation for introspection: validate for each request that the session was not closed on the authorization server. This has an important performance impact and is of use mainly when you can&#39;t trust client(s) to properly delete tokens when a user session is terminated on the authorization server.\r\n\r\nAs a conclusion, if performance is important, use only [OAuth2 clients on your servers][1] which you can trust to delete tokens when user logs out (`spring-cloud-gateway` is a good candidate when [configured with `spring-boot-starter-oauth2-client`, `oauth2Login` and `TokenRelay=` filter][2]), have your authorization server issue JWT access tokens, and configure your resource server(s) with a JWT decoder. With this pattern, the access tokens are &quot;cached&quot; in session on the OAuth2 client and requests are authorized with:\r\n- session (cookie) between the remote front-ends and the OAuth2 client on your server (most probably a gateway)\r\n- JWTs between the OAuth2 client and the resource servers (as well as within inter resource servers communications)\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\r\n  [2]: https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff","title":"OAuth2 token introspection for each service request?","body":"<p>Resource servers are generally configured stateless (without sessions).</p>\n<p>In the conf you expose, sessions are not disabled, but this doesn't mean that it is used to build the requests security context. What is used is the token introspector.</p>\n<p>So if there should be some caching, it could be inside this introspector (cache the introspection response for given token strings). But this caching would contradict the most frequent motivation for introspection: validate for each request that the session was not closed on the authorization server. This has an important performance impact and is of use mainly when you can't trust client(s) to properly delete tokens when a user session is terminated on the authorization server.</p>\n<p>As a conclusion, if performance is important, use only <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">OAuth2 clients on your servers</a> which you can trust to delete tokens when user logs out (<code>spring-cloud-gateway</code> is a good candidate when <a href=\"https://github.com/ch4mpy/spring-addons/tree/master/samples/tutorials/bff\" rel=\"nofollow noreferrer\">configured with <code>spring-boot-starter-oauth2-client</code>, <code>oauth2Login</code> and <code>TokenRelay=</code> filter</a>), have your authorization server issue JWT access tokens, and configure your resource server(s) with a JWT decoder. With this pattern, the access tokens are &quot;cached&quot; in session on the OAuth2 client and requests are authorized with:</p>\n<ul>\n<li>session (cookie) between the remote front-ends and the OAuth2 client on your server (most probably a gateway)</li>\n<li>JWTs between the OAuth2 client and the resource servers (as well as within inter resource servers communications)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1695240557,"post_id":77142230,"comment_id":135999776,"body_markdown":"In my opinion, and more importantly in [Spring security teams one](https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390), **&quot;internet clients&quot; should not be OAuth2 clients**. OAuth2 clients should be on servers you trust (requests from the internet to those clients being authorized with sessions). If the tokens don&#39;t leave your servers, you don&#39;t really care if the information it contains can be read from it...","body":"In my opinion, and more importantly in <a href=\"https://github.com/spring-projects/spring-authorization-server/issues/297#issue-896744390\" rel=\"nofollow noreferrer\">Spring security teams one</a>, <b>&quot;internet clients&quot; should not be OAuth2 clients</b>. OAuth2 clients should be on servers you trust (requests from the internet to those clients being authorized with sessions). If the tokens don&#39;t leave your servers, you don&#39;t really care if the information it contains can be read from it..."},{"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"score":0,"creation_date":1695276998,"post_id":77142230,"comment_id":136003325,"body_markdown":"More generally different types of clients use different best practices. We recommend web clients use SameSite cookies which can contain opaque tokens. Mobile clients follow RFC8252 with opaque tokens, and B2B clients follow RFC8705 with opaque tokens. The gateway can handle these differences, with API security then based on JWTs. An overview of our recommendations [here](https://curity.io/resources/learn/implementing-zero-trust-apis/).","body":"More generally different types of clients use different best practices. We recommend web clients use SameSite cookies which can contain opaque tokens. Mobile clients follow RFC8252 with opaque tokens, and B2B clients follow RFC8705 with opaque tokens. The gateway can handle these differences, with API security then based on JWTs. An overview of our recommendations <a href=\"https://curity.io/resources/learn/implementing-zero-trust-apis/\" rel=\"nofollow noreferrer\">here</a>."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1695317025,"post_id":77142230,"comment_id":136011645,"body_markdown":"In addition to `SameSite`, the cookies can be `HttpOnly` to hide it from Javascript code. I don&#39;t see the point to have this cookie set with an opaque token issued by the authorization server and then introspected for a JWT. The `spring-cloud-gateway` way of keeping tokens in session and setting the session cookie with UUID is much more efficient.","body":"In addition to <code>SameSite</code>, the cookies can be <code>HttpOnly</code> to hide it from Javascript code. I don&#39;t see the point to have this cookie set with an opaque token issued by the authorization server and then introspected for a JWT. The <code>spring-cloud-gateway</code> way of keeping tokens in session and setting the session cookie with UUID is much more efficient."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1695317348,"post_id":77142230,"comment_id":136011708,"body_markdown":"Also, if at [step 5 of RFC8252](https://datatracker.ietf.org/doc/html/rfc8252#section-4.1), the mobile app presents the authorization code to the gateway instead of the authorization server token endpoint, then it is possible to have the tokens delivered to the gateway instead of the mobile app, and to keep the tokens on the servers only: tokens are stored in session on the gateway (a session on associated with the mobile app user agent which presented the authorization code). This is safer than sending tokens to mobile apps which store it with random safety...","body":"Also, if at <a href=\"https://datatracker.ietf.org/doc/html/rfc8252#section-4.1\" rel=\"nofollow noreferrer\">step 5 of RFC8252</a>, the mobile app presents the authorization code to the gateway instead of the authorization server token endpoint, then it is possible to have the tokens delivered to the gateway instead of the mobile app, and to keep the tokens on the servers only: tokens are stored in session on the gateway (a session on associated with the mobile app user agent which presented the authorization code). This is safer than sending tokens to mobile apps which store it with random safety..."},{"owner":{"account_id":308139,"reputation":8199,"user_id":619830,"accept_rate":75,"display_name":"ch4mp"},"score":0,"creation_date":1695318033,"post_id":77142230,"comment_id":136011811,"body_markdown":"And more importantly, this is also safer than using a &quot;public&quot; client as required by RFC8252: mobile apps can&#39;t keep a secret to call the token endpoint (the gateway can). This also enables to set some network level protection for the token endpoint (only the gateway will call it).","body":"And more importantly, this is also safer than using a &quot;public&quot; client as required by RFC8252: mobile apps can&#39;t keep a secret to call the token endpoint (the gateway can). This also enables to set some network level protection for the token endpoint (only the gateway will call it)."},{"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"score":0,"creation_date":1695322692,"post_id":77142230,"comment_id":136012687,"body_markdown":"Well your mobile session ID is acting as an opaque token / API credential and might be exploited for longer than a short lived opaque access token if stolen. If you were to shorten its lifetime and implement a renewal mechanism, it would look like that of the public client you describe.","body":"Well your mobile session ID is acting as an opaque token / API credential and might be exploited for longer than a short lived opaque access token if stolen. If you were to shorten its lifetime and implement a renewal mechanism, it would look like that of the public client you describe."},{"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"score":0,"creation_date":1695325059,"post_id":77142230,"comment_id":136013065,"body_markdown":"A web BFF reduces the impact of cross site scripting exploits. For a mobile BFF this is not usually an objective. Native keystore capabilities can improve security in some cases, though this is often not practical, leading to the limitations you describe.","body":"A web BFF reduces the impact of cross site scripting exploits. For a mobile BFF this is not usually an objective. Native keystore capabilities can improve security in some cases, though this is often not practical, leading to the limitations you describe."}],"tags":[],"owner":{"account_id":12368896,"reputation":24924,"user_id":9019885,"display_name":"Gary Archer"},"comment_count":7,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695211377,"creation_date":1695211377,"answer_id":77142230,"question_id":77136210,"body_markdown":"Opaque access tokens are often used as a privacy preserving best practice, to avoid revealing confidential information (easily readable in JWTs) to internet clients. Yet you don&#39;t want to hammer the authorization server (a critical conponent) on every API request.\r\n\r\nOne elegant way to deal with introspection and caching is to host an API gateway in front of APIs and do the introspection in a `gateway plugin`, along with result caching. Alternatively you can do this in APIs, though that is less optimal, especially when multiple APIs call each other.\r\n\r\n**COMBINING OPAQUE TOKENS AND JWTs**\r\n\r\nThe gateway can send an introspection request and ideally use an `accept: application/jwt` header, so that the introspection response is a JWT access token that can be forwarded to APIs. See this [proposed standard](https://www.ietf.org/id/draft-ietf-oauth-jwt-introspection-response-12.html) which some authorization servers support.\r\n\r\nAt Curity, where I work, we call this the `phantom token pattern`. The advantage of the JWT response is to maintain a credential for requests inside the cluster. This provides a more complete `zero trust` API security solution, since the JWT can also be forwarded to upstream APIs.","title":"OAuth2 token introspection for each service request?","body":"<p>Opaque access tokens are often used as a privacy preserving best practice, to avoid revealing confidential information (easily readable in JWTs) to internet clients. Yet you don't want to hammer the authorization server (a critical conponent) on every API request.</p>\n<p>One elegant way to deal with introspection and caching is to host an API gateway in front of APIs and do the introspection in a <code>gateway plugin</code>, along with result caching. Alternatively you can do this in APIs, though that is less optimal, especially when multiple APIs call each other.</p>\n<p><strong>COMBINING OPAQUE TOKENS AND JWTs</strong></p>\n<p>The gateway can send an introspection request and ideally use an <code>accept: application/jwt</code> header, so that the introspection response is a JWT access token that can be forwarded to APIs. See this <a href=\"https://www.ietf.org/id/draft-ietf-oauth-jwt-introspection-response-12.html\" rel=\"nofollow noreferrer\">proposed standard</a> which some authorization servers support.</p>\n<p>At Curity, where I work, we call this the <code>phantom token pattern</code>. The advantage of the JWT response is to maintain a credential for requests inside the cluster. This provides a more complete <code>zero trust</code> API security solution, since the JWT can also be forwarded to upstream APIs.</p>\n"}],"owner":{"account_id":3138894,"reputation":3547,"user_id":2654773,"accept_rate":96,"display_name":"eztam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":179,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77136984,"answer_count":2,"score":1,"last_activity_date":1695755264,"creation_date":1695139482,"question_id":77136210,"body_markdown":"I&#39;ve implemented a Spring based REST API (resource server) that uses the OAuth2 authorization code flow. The receives an opaque access token from the client and validated this token through a custom token introspector.\r\n\r\nFor each HTTP request, the resource server has to verify the provided access token through an additional HTTP call to the token introspection service.\r\n\r\nIs there a way, to cache the token so that the resource server don&#39;t have to send a token verification request each time? \r\n\r\n\r\nCan [HttpSessionSecurityContextRepository][1] be used for that purpose?\r\n\r\nHere&#39;y my configuration:\r\n\r\n     @Configuration\r\n     public class SecurityConfig {\r\n\r\n        @Bean\r\n        public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n           \r\n            http.authorizeRequests(authz -&gt; authz.antMatchers(HttpMethod.GET, &quot;/foos/**&quot;)\r\n                .anyRequest()\r\n                .authenticated())\r\n                .oauth2ResourceServer(oauth2 -&gt;\r\n                     oauth2.opaqueToken.introspector(myIntrospector)\r\n            );\r\n            return http.build();\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-security/blob/main/web/src/main/java/org/springframework/security/web/context/HttpSessionSecurityContextRepository.java","title":"OAuth2 token introspection for each service request?","body":"<p>I've implemented a Spring based REST API (resource server) that uses the OAuth2 authorization code flow. The receives an opaque access token from the client and validated this token through a custom token introspector.</p>\n<p>For each HTTP request, the resource server has to verify the provided access token through an additional HTTP call to the token introspection service.</p>\n<p>Is there a way, to cache the token so that the resource server don't have to send a token verification request each time?</p>\n<p>Can <a href=\"https://github.com/spring-projects/spring-security/blob/main/web/src/main/java/org/springframework/security/web/context/HttpSessionSecurityContextRepository.java\" rel=\"nofollow noreferrer\">HttpSessionSecurityContextRepository</a> be used for that purpose?</p>\n<p>Here'y my configuration:</p>\n<pre><code> @Configuration\n public class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n       \n        http.authorizeRequests(authz -&gt; authz.antMatchers(HttpMethod.GET, &quot;/foos/**&quot;)\n            .anyRequest()\n            .authenticated())\n            .oauth2ResourceServer(oauth2 -&gt;\n                 oauth2.opaqueToken.introspector(myIntrospector)\n        );\n        return http.build();\n    }\n}\n</code></pre>\n"},{"tags":["java","ssl","https","proxy","apache-camel"],"answers":[{"comments":[{"owner":{"account_id":1598133,"reputation":800,"user_id":1479754,"display_name":"c0ld"},"score":0,"creation_date":1534856771,"post_id":51941932,"comment_id":90848546,"body_markdown":"Have you tried like this ?\n .toD(&quot;${header.url}&amp;throwExceptionOnFailure=false&amp;proxyHost={{proxyhost.property}}&amp;proxyPort={{proxyport.property}}&quot;)","body":"Have you tried like this ?  .toD(&quot;${header.url}&amp;throwExceptionOnFailure=false&amp;proxyHost=&zwnj;&#8203;{{proxyhost.property&zwnj;&#8203;}}&amp;proxyPort={{proxy&zwnj;&#8203;port.property}}&quot;)"},{"owner":{"account_id":1598133,"reputation":800,"user_id":1479754,"display_name":"c0ld"},"score":0,"creation_date":1534857749,"post_id":51941932,"comment_id":90849223,"body_markdown":"According to documentation properties was just renamed after 2.8.0 to proxyAuthHost and proxyAuthPort.","body":"According to documentation properties was just renamed after 2.8.0 to proxyAuthHost and proxyAuthPort."},{"owner":{"account_id":1598133,"reputation":800,"user_id":1479754,"display_name":"c0ld"},"score":0,"creation_date":1534859437,"post_id":51941932,"comment_id":90850478,"body_markdown":"Or you can call in configure method call getContext().getProperties() and directly set properties \nhttp.proxyHost\nhttp.proxyPort\nin CamelContext. HttpEndpoint will check it and auto-create proxy settings.\nBoth ways worked. Tested on 2.16.3.","body":"Or you can call in configure method call getContext().getProperties() and directly set properties  http.proxyHost http.proxyPort in CamelContext. HttpEndpoint will check it and auto-create proxy settings. Both ways worked. Tested on 2.16.3."},{"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"score":0,"creation_date":1534911089,"post_id":51941932,"comment_id":90869716,"body_markdown":"Thank you c0ld and I tried that too. like this. getContext().getProperties().put(&quot;https.proxyHost&quot;, &quot;192.168.xxx.xxx&quot;);\ngetContext().getProperties().put(&quot;https.proxyPort&quot;, &quot;xxxx&quot;); but it was not working as expected.","body":"Thank you c0ld and I tried that too. like this. getContext().getProperties().put(&quot;https.proxyHost&quot;, &quot;192.168.xxx.xxx&quot;); getContext().getProperties().put(&quot;https.proxyPort&quot;, &quot;xxxx&quot;); but it was not working as expected."},{"owner":{"account_id":1598133,"reputation":800,"user_id":1479754,"display_name":"c0ld"},"score":0,"creation_date":1534926879,"post_id":51941932,"comment_id":90875770,"body_markdown":"HttpEndpoint will check http. not https. Secure connection properties will be received from your http configuration. Look source code:\nhttps://github.com/apache/camel/blob/master/components/camel-http/src/main/java/org/apache/camel/component/http/HttpEndpoint.java","body":"HttpEndpoint will check http. not https. Secure connection properties will be received from your http configuration. Look source code: <a href=\"https://github.com/apache/camel/blob/master/components/camel-http/src/main/java/org/apache/camel/component/http/HttpEndpoint.java\" rel=\"nofollow noreferrer\">github.com/apache/camel/blob/master/components/camel-http/sr&zwnj;&#8203;c/&hellip;</a>"},{"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"score":0,"creation_date":1534928233,"post_id":51941932,"comment_id":90876486,"body_markdown":"true. but my url is https nor (https://endpoint-ssl-url.com/path/to/resource). That&#39;s why i use https4 component and https properties for proxy. But your point is an interesting one. I went through the code and noted how proxy was taken there. Let me give a try!","body":"true. but my url is https nor (<a href=\"https://endpoint-ssl-url.com/path/to/resource\" rel=\"nofollow noreferrer\">endpoint-ssl-url.com/path/to/resource</a>). That&#39;s why i use https4 component and https properties for proxy. But your point is an interesting one. I went through the code and noted how proxy was taken there. Let me give a try!"},{"owner":{"account_id":1598133,"reputation":800,"user_id":1479754,"display_name":"c0ld"},"score":0,"creation_date":1534928377,"post_id":51941932,"comment_id":90876555,"body_markdown":"Let us [continue this discussion in chat](https://chat.stackoverflow.com/rooms/178514/discussion-between-c0ld-and-namalfernandolk).","body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/178514/discussion-between-c0ld-and-namalfernandolk\">continue this discussion in chat</a>."}],"tags":[],"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"comment_count":7,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1534911267,"creation_date":1534828228,"answer_id":51941932,"question_id":51941789,"body_markdown":"**Attemp 10 :** \r\nWas succeeded in this attemp with system properties. But I&#39;m continuosuly seeking a solution via out of system properties. Posting here for the community. So, if there&#39;sa any further findings please leave an answer / comment\r\n\r\nAdd the proxy settings to the syetem property as mentioned below.\r\n\r\n    System.setProperty(&quot;http.proxyHost&quot;, &quot;192.168.xxx.xxx&quot;);\r\n    System.setProperty(&quot;http.proxyPort&quot;, &quot;xxxx&quot;);\r\n    System.setProperty(&quot;https.proxyHost&quot;, &quot;192.168.xxx.xxx&quot;);\r\n    System.setProperty(&quot;https.proxyPort&quot;, &quot;xxxx&quot;);\r\n\r\nOR\r\n\r\n    -Dhttp.proxyHost=192.168.xxx.xxx -Dhttp.proxyPort=xxxx -Dhttps.proxyHost=192.168.xxx.xxx -Dhttps.proxyPort=xxxx\r\n\r\nPut the useSystemProperties flag true in the URL as below. \r\n\r\n    https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\r\n\r\nThen it works fine as mentioned in below log\r\n\r\n**log :** \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@1aee22a3\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;http://192.168.xxx.xxx:3128-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 20; total allocated: 0 of 200]\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 20; total allocated: 1 of 200]\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:xxxx&lt;-&gt;192.168.xxx.xxx:xxxx\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; CONNECT endpoint-ssl-url.com:443 HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;CONNECT endpoint-ssl-url.com:443 HTTP/1.1[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Host: endpoint-ssl-url.com[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;HTTP/1.1 200 Connection established[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 Connection established\r\n    [org.apache.http.impl.execchain.MainClientExec] Tunnel to target created.\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE CIPHERS...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\r\n    [org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept: application/json\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept-Encoding: gzip\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; doLogFiles: true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; dontLogErrorFiles: false\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; messageId: message-x-id\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; messageName: message-x-name\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; routeId: direct-http\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRq: true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRs: true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Length: 49\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Type: application/x-www-form-urlencoded\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; Connection: Keep-Alive\r\n    [org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;POST /path/to/resource HTTP/1.1[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Accept: application/json[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Accept-Encoding: gzip[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;doLogFiles: true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;dontLogErrorFiles: false[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;messageId: message-x-id[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;messageName: message-x-name[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;routeId: direct-http[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;specialRq: true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;specialRs: true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Content-Length: 49[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Content-Type: application/x-www-form-urlencoded[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Host: endpoint-ssl-url.com[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;Connection: Keep-Alive[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &gt;&gt; &quot;grant_type=client_credentials&amp;scope=DUMMYSCOPE&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;HTTP/1.1 200 OK[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Date: Tue, 21 Aug 2018 04:11:35 GMT[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Content-Type: application/json; charset=UTF-8[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Content-Length: 72[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Connection: keep-alive[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Access-Control-Allow-Origin: *[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Cache-Control: no-cache,no-store,must-revalidate[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Pragma: no-cache[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Expires: 0[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;Strict-Transport-Security: max-age=31536000; includeSubDomains;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;[\\r][\\n]&quot;\r\n    [org.apache.http.wire] http-outgoing-0 &lt;&lt; &quot;{ &quot;xxxx_xxxxx&quot;: &quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;, &quot;xxxx_xxxxx&quot;: &quot;xxxx&quot; }&quot;\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 OK\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Date: Tue, 21 Aug 2018 04:11:35 GMT\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Type: application/json; charset=UTF-8\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Length: 72\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Connection: keep-alive\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Access-Control-Allow-Origin: *\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Cache-Control: no-cache,no-store,must-revalidate\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Pragma: no-cache\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Expires: 0\r\n    [org.apache.http.headers] http-outgoing-0 &lt;&lt; Strict-Transport-Security: max-age=31536000; includeSubDomains;\r\n    [org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443] can be kept alive indefinitely\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 1; route allocated: 1 of 20; total allocated: 1 of 200]\r\n    [com.integration.processors.base.http.HttpResponseProcessor] process(). is started\r\n    [com.integration.processors.base.common.InterfaceProcessor] loadMessageData().messageId : message-x-id | messageName : message-x-name\r\n    [com.integration.processors.base.http.HttpResponseProcessor] process(). httpResponseCode : 200 | httpResponseText : OK\r\n    [com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().rootNode : {&quot;xxxx_xxxxx&quot;:&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,&quot;xxxx_xxxxx&quot;:&quot;xxxx&quot;}\r\n    [com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().xxxx_xxxxx : xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\r\n    [com.integration.processors.base.http.HttpResponseProcessor] process().outResponseBody : {&quot;RESULT&quot;:{&quot;condition&quot;:&quot;good&quot;,&quot;severity&quot;:&quot;good&quot;,&quot;summury&quot;:&quot;Message X successful&quot;,&quot;detail&quot;:&quot;{ \\&quot;xxxx_xxxxx\\&quot;: \\&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\&quot;, \\&quot;xxxx_xxxxx\\&quot;: \\&quot;xxxx\\&quot; }\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxMessage X successful\\n&quot;},&quot;OUTPUTS&quot;:{&quot;xxxx_xxxxx&quot;:&quot;xxxxxxxxxxxxxxxxxxxxxxxxxxxxx&quot;,&quot;FAILURE_REASON&quot;:null},&quot;SUCCESS&quot;:true}\r\n\r\n","title":"SSLException: Unrecognized SSL message, plaintext connection? error while sending https POST in Camel via PROXY","body":"<p><strong>Attemp 10 :</strong> \nWas succeeded in this attemp with system properties. But I'm continuosuly seeking a solution via out of system properties. Posting here for the community. So, if there'sa any further findings please leave an answer / comment</p>\n\n<p>Add the proxy settings to the syetem property as mentioned below.</p>\n\n<pre><code>System.setProperty(\"http.proxyHost\", \"192.168.xxx.xxx\");\nSystem.setProperty(\"http.proxyPort\", \"xxxx\");\nSystem.setProperty(\"https.proxyHost\", \"192.168.xxx.xxx\");\nSystem.setProperty(\"https.proxyPort\", \"xxxx\");\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>-Dhttp.proxyHost=192.168.xxx.xxx -Dhttp.proxyPort=xxxx -Dhttps.proxyHost=192.168.xxx.xxx -Dhttps.proxyPort=xxxx\n</code></pre>\n\n<p>Put the useSystemProperties flag true in the URL as below. </p>\n\n<pre><code>https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\n</code></pre>\n\n<p>Then it works fine as mentioned in below log</p>\n\n<p><strong>log :</strong> </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@1aee22a3\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;http://192.168.xxx.xxx:3128-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 20; total allocated: 0 of 200]\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 20; total allocated: 1 of 200]\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:xxxx&lt;-&gt;192.168.xxx.xxx:xxxx\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; CONNECT endpoint-ssl-url.com:443 HTTP/1.1\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"CONNECT endpoint-ssl-url.com:443 HTTP/1.1[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Host: endpoint-ssl-url.com[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"HTTP/1.1 200 Connection established[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"[\\r][\\n]\"\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 Connection established\n[org.apache.http.impl.execchain.MainClientExec] Tunnel to target created.\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE CIPHERS...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\n[org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; POST /path/to/resource HTTP/1.1\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept: application/json\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Accept-Encoding: gzip\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; doLogFiles: true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; dontLogErrorFiles: false\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; messageId: message-x-id\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; messageName: message-x-name\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; routeId: direct-http\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRq: true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; specialRs: true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Length: 49\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Content-Type: application/x-www-form-urlencoded\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Host: endpoint-ssl-url.com\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; Connection: Keep-Alive\n[org.apache.http.headers] http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"POST /path/to/resource HTTP/1.1[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Accept: application/json[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Accept-Encoding: gzip[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Authorization: Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"breadcrumbId: xxxxxxxxxxxxxxxxxxxxxxx[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"doLogFiles: true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"dontLogErrorFiles: false[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"messageId: message-x-id[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"messageName: message-x-name[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"routeId: direct-http[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"specialRq: true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"specialRs: true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"url: https4://endpoint-ssl-url.com/path/to/resource?useSystemProperties=true[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Content-Length: 49[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Content-Type: application/x-www-form-urlencoded[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Host: endpoint-ssl-url.com[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"Connection: Keep-Alive[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"User-Agent: Apache-HttpClient/4.5.3 (Java/1.8.0_151)[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &gt;&gt; \"grant_type=client_credentials&amp;scope=DUMMYSCOPE\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"HTTP/1.1 200 OK[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Date: Tue, 21 Aug 2018 04:11:35 GMT[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Content-Type: application/json; charset=UTF-8[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Content-Length: 72[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Connection: keep-alive[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Access-Control-Allow-Origin: *[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Cache-Control: no-cache,no-store,must-revalidate[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Pragma: no-cache[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Expires: 0[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"Strict-Transport-Security: max-age=31536000; includeSubDomains;[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"[\\r][\\n]\"\n[org.apache.http.wire] http-outgoing-0 &lt;&lt; \"{ \"xxxx_xxxxx\": \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", \"xxxx_xxxxx\": \"xxxx\" }\"\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; HTTP/1.1 200 OK\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Date: Tue, 21 Aug 2018 04:11:35 GMT\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Type: application/json; charset=UTF-8\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Content-Length: 72\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Connection: keep-alive\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Access-Control-Allow-Origin: *\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Cache-Control: no-cache,no-store,must-revalidate\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Pragma: no-cache\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Expires: 0\n[org.apache.http.headers] http-outgoing-0 &lt;&lt; Strict-Transport-Security: max-age=31536000; includeSubDomains;\n[org.apache.http.impl.execchain.MainClientExec] Connection can be kept alive indefinitely\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443] can be kept alive indefinitely\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 0][route: {tls}-&gt;http://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 1; route allocated: 1 of 20; total allocated: 1 of 200]\n[com.integration.processors.base.http.HttpResponseProcessor] process(). is started\n[com.integration.processors.base.common.InterfaceProcessor] loadMessageData().messageId : message-x-id | messageName : message-x-name\n[com.integration.processors.base.http.HttpResponseProcessor] process(). httpResponseCode : 200 | httpResponseText : OK\n[com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().rootNode : {\"xxxx_xxxxx\":\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\"xxxx_xxxxx\":\"xxxx\"}\n[com.integration.processors.interfaces.http.message-x-nameResponseProcessor] decodeResponse().xxxx_xxxxx : xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n[com.integration.processors.base.http.HttpResponseProcessor] process().outResponseBody : {\"RESULT\":{\"condition\":\"good\",\"severity\":\"good\",\"summury\":\"Message X successful\",\"detail\":\"{ \\\"xxxx_xxxxx\\\": \\\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\\\", \\\"xxxx_xxxxx\\\": \\\"xxxx\\\" }\\nxxxxxxxxxxxxxxxxxxxxxxxxxxxxxMessage X successful\\n\"},\"OUTPUTS\":{\"xxxx_xxxxx\":\"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\",\"FAILURE_REASON\":null},\"SUCCESS\":true}\n</code></pre>\n"}],"owner":{"account_id":1054217,"reputation":8986,"user_id":1057291,"accept_rate":80,"display_name":"namalfernandolk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10269,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1695754945,"creation_date":1534827368,"question_id":51941789,"body_markdown":"I&#39;m trying to connect to a external https endpoint using camel https4 component through proxy.\r\nFor this I setup squid proxy in linux (18.04).\r\n\r\nAccording to the references [http://camel.apache.org/http4.html], I noted that this can be done using the proxyAuthHost and proxyAuthPort params.\r\nSo i tried to check it with the URL given as below\r\n\r\n&gt; https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx&amp;bridgeEndpoint=true\r\n\r\nBut it gives &quot;`javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?`&quot; continously. I tried number of ways as mentioned below but the result is same.\r\n\r\nCan anyone give a hint on this based on your experience / expertise?\r\n\r\n**Attempt 1 :** Using PoolingHttpClientConnectionManager\r\n\r\nCode : \r\n\r\n    @ApplicationScoped\r\n    @ContextName(&quot;camel_cdi_context&quot;)\r\n    public class HTTPRouter extends RouteBuilder {\r\n    \r\n        @Override\r\n        public void configure() throws Exception {\r\n        \t\r\n        \terrorHandler(deadLetterChannel(&quot;direct:error&quot;));\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tSSLContext sslContext = new SSLContextBuilder()\r\n    \t\t\t\t\t.loadTrustMaterial(null, new TrustStrategy() {\r\n    \t\t\t\t\t\tpublic boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\r\n    \t\t\t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()&quot;);\r\n    \t\t\t\t\t\t\treturn true;\r\n    \t\t\t\t\t\t}\r\n    \t\t\t\t\t})\r\n    \t\t\t\t\t.build();\r\n    \r\n    \t\t\tfinal SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext);\r\n    \r\n    \t\t\tHttpComponent http4 = getContext().getComponent(&quot;https4&quot;, HttpComponent.class);\r\n    \t\t\thttp4.setHttpClientConfigurer(new HttpClientConfigurer() {\r\n    \r\n    \t\t\t\t@Override\r\n    \t\t\t\tpublic void configureHttpClient(HttpClientBuilder builder) {\r\n    \r\n    \t\t\t\t\tbuilder.setSSLSocketFactory(sslsf);\r\n    \r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1&quot;);\r\n    \t\t\t\t\tRegistry&lt;ConnectionSocketFactory&gt; r = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n    \t\t\t\t\t\t\t.register(&quot;http&quot;, PlainConnectionSocketFactory.getSocketFactory())\r\n    \t\t\t\t\t\t\t.register(&quot;https&quot;, sslsf)\r\n    \t\t\t\t\t\t\t.build();\r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2&quot;);\r\n    \t\t\t\t\tHttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(r);\r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3&quot;);\r\n    \t\t\t\t\tbuilder.setConnectionManager(cm);\r\n    \t\t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4&quot;);\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \r\n    \t\t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tfrom(&quot;direct:http&quot;)\r\n    \t\t\t// prepare request payload\r\n    \t\t\t// set url to header\r\n    \t\t\t// set other connection properties (eg : Connection Method, Header etc)\r\n    \t\t\t.choice()\r\n    \t\t\t.when(header(&quot;url&quot;).contains(&quot;?&quot;))\r\n    \t\t\t\t.toD(&quot;${header.url}&amp;throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t\t.otherwise()\r\n    \t\t\t\t.toD(&quot;${header.url}?throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t.end()\r\n    \t\t.convertBodyTo(String.class)\r\n    \t\t// process on the response\r\n        \t\r\n        }\r\n        \r\n    }\r\n\r\n\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2516c8e0\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-30: Shutdown connection\r\n    [org.apache.http.impl.execchain.MainClientExec] Connection discarded\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\r\n    [ERROR] Exchange[Id: ID-xxxx-xxx-37655-1534782529403-63-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:54:27 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route221, CamelFatalFallbackErrorHandler=[route221], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX==, breadcrumbId=ID-xxxxx-xxx-37655-1534782529403-63-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015427600.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\r\n    \tat sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\r\n    \tat sun.security.ssl.InputRecord.read(InputRecord.java:527)\r\n    \tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\r\n    \tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\r\n    \tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n    \tat org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\r\n    \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\r\n    \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n    \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\r\n    \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n    \tat org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\r\n    \tat org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\r\n\r\n\r\n\r\n**Attempt 2 :** Using BasicHttpClientConnectionManager\r\n\r\nCode :\r\n\r\n    @ApplicationScoped\r\n    @ContextName(&quot;camel_cdi_context&quot;)\r\n    public class HTTPRouter extends RouteBuilder {\r\n    \r\n        @Override\r\n        public void configure() throws Exception {\r\n        \t\r\n        \terrorHandler(deadLetterChannel(&quot;direct:error&quot;));\r\n    \r\n    \t\ttry {\r\n    \r\n        \t\tTrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\r\n        \t\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure()&quot;);\r\n        \t\t\t\treturn null;\r\n        \t\t\t}\r\n        \t\t\tpublic void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n        \t\t\t}\r\n        \t\t\tpublic void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n        \t\t\t}\r\n        \t\t}\r\n        \t\t};\r\n    \r\n        \t\tSSLContext sslContext = SSLContext.getInstance(&quot;SSL&quot;);\r\n        \t\tsslContext.init(null, trustAllCerts, new java.security.SecureRandom());\r\n    \r\n                HostnameVerifier allHostsValid = new HostnameVerifier() {\r\n                    public boolean verify(String hostname, SSLSession session) {\r\n                    \tSystem.out.println(&quot;HTTPRouter.configure().new HostnameVerifier() {...}.verify()&quot;);\r\n                        return true;\r\n                    }\r\n                };\r\n        \t\t\r\n        \t\tfinal SSLConnectionSocketFactory \t\tsslConnectionSocketFactory \t\t\t= new SSLConnectionSocketFactory(sslContext,new String[]{&quot;TLSv1.2&quot;, &quot;TLSv1.1&quot;, &quot;TLSv1&quot;, &quot;SSLv3&quot;}, null, allHostsValid);\r\n    \r\n        \t\tHttpComponent http4 = getContext().getComponent(&quot;https4&quot;, HttpComponent.class);\r\n        \t\thttp4.setHttpClientConfigurer(new HttpClientConfigurer() {\r\n    \r\n        \t\t\t@Override\r\n        \t\t\tpublic void configureHttpClient(HttpClientBuilder builder) {\r\n        \t\t\t\tbuilder.setSSLSocketFactory(sslConnectionSocketFactory);\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1&quot;);\r\n        \t\t\t\tRegistry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\r\n        \t\t\t\t\t\t.register(&quot;https&quot;, sslConnectionSocketFactory)\r\n        \t\t\t\t\t\t.build();\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2&quot;);\r\n        \t\t\t\tHttpClientConnectionManager connectionManager = new  BasicHttpClientConnectionManager(registry);\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3&quot;);\r\n        \t\t\t\tbuilder.setConnectionManager(connectionManager);\r\n        \t\t\t\tSystem.out.println(&quot;HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4&quot;);\r\n        \t\t\t}\r\n        \t\t});\r\n    \r\n        \t} catch (Exception e) {\r\n    \t\t\te.printStackTrace();\r\n    \t\t}\r\n    \r\n    \t\tfrom(&quot;direct:http&quot;)\r\n    \t\t\t// prepare request payload\r\n    \t\t\t// set url to header\r\n    \t\t\t// set other connection properties (eg : Connection Method, Header etc)\r\n    \t\t\t.choice()\r\n    \t\t\t.when(header(&quot;url&quot;).contains(&quot;?&quot;))\r\n    \t\t\t\t.toD(&quot;${header.url}&amp;throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t\t.otherwise()\r\n    \t\t\t\t.toD(&quot;${header.url}?throwExceptionOnFailure=false&quot;)\r\n    \t\t\t.endChoice()\r\n    \t\t.end()\r\n    \t\t.convertBodyTo(String.class)\r\n    \t\t// process on the response\r\n        \t\r\n        }\r\n        \r\n    }\r\n\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2bb0862\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-31: Shutdown connection\r\n    [org.apache.http.impl.execchain.MainClientExec] Connection discarded\r\n    [org.apache.http.impl.conn.BasicHttpClientConnectionManager] Releasing connection [Not bound]\r\n    [ERROR] Exchange[Id: ID-xxxxx-xxx-37655-1534782529403-65-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:58:30 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route228, CamelFatalFallbackErrorHandler=[route228], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX, breadcrumbId=ID-namal-pc-37655-1534782529403-65-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015830349.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\r\n    \tat sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\r\n    \tat sun.security.ssl.InputRecord.read(InputRecord.java:527)\r\n    \tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\r\n    \tat sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\r\n    \tat sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\r\n    \tat org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\r\n    \tat org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\r\n    \tat org.apache.http.impl.conn.BasicHttpClientConnectionManager.connect(BasicHttpClientConnectionManager.java:323)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\r\n    \tat org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\r\n    \tat org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\r\n    \tat org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\r\n    \tat org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\r\n    \tat org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\r\n    \tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\r\n    \tat org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\r\n    \tat org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\r\n\r\n\r\n\r\n**Attempt 3 :** Mix of above two approaches\r\nResult : same exception\r\n\r\n**Attempt 4 :** Using with Httpurlconnection\r\nI did this as a controlled test and it was succeeded.\r\nCode : \r\n\r\n    private void testViaHttpUrlConnection() throws Exception {\r\n    \r\n    \t\tSystem.setProperty(&quot;jsse.enableSNIExtension&quot;, &quot;false&quot;);\r\n    \r\n    \t\tByteArrayOutputStream \tbaos \t\t\t\t= null;\r\n    \t\tString \t\t\t\t\trequestPayload \t\t= &quot;&lt;payload...&gt;&quot;;\r\n    \t\tString \t\t\t\t\turl \t\t\t\t= &quot;https://endpoint-ssl-url.com/path/tp/resource&quot;;\r\n    \t\tint \t\t\t\t\tconnectionTimeOut \t= 45;\r\n    \t\tint \t\t\t\t\treadTimeOut \t\t= 30;\r\n    \t\tString \t\t\t\t\tresponsePayload \t= null;\r\n    \t\tString \t\t\t\t\tproxyIp \t\t\t= &quot;192.168.xxx.xxx&quot;;\r\n    \t\tint \t\t\t\t\tproxyPort \t\t\t= xxxx;\r\n    \r\n    \t\ttry {\r\n    \r\n    \t\t\tbaos = new ByteArrayOutputStream();\r\n    \t\t\tbaos.write(((String)requestPayload).getBytes());\r\n    \r\n    \t\t\tTrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\r\n    \t\t\t\tpublic java.security.cert.X509Certificate[] getAcceptedIssuers() {\r\n    \t\t\t\t\treturn null;\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void checkClientTrusted(X509Certificate[] certs, String authType) {\r\n    \t\t\t\t}\r\n    \t\t\t\tpublic void checkServerTrusted(X509Certificate[] certs, String authType) {\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t};\r\n    \r\n    \t\t\tSSLContext sc = SSLContext.getInstance(&quot;SSL&quot;);\r\n    \t\t\tsc.init(null, trustAllCerts, new java.security.SecureRandom());\r\n    \t\t\tHttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\r\n    \r\n    \t\t\tHostnameVerifier allHostsValid = new HostnameVerifier() {\r\n    \t\t\t\tpublic boolean verify(String hostname, SSLSession session) {\r\n    \t\t\t\t\treturn true;\r\n    \t\t\t\t}\r\n    \t\t\t};\r\n    \r\n    \t\t\tHttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\r\n    \r\n    \t\t\tURL \t\t\t\t\tmUrl\t= new URL(url);\r\n    \r\n    \t\t\tURLConnection \t\t\tucon \t= null;\r\n    \r\n    \t\t\tProxy proxy_server = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyIp, proxyPort));\r\n    \r\n    \t\t\tucon = mUrl.openConnection(proxy_server);\r\n    \r\n    \t\t\tHttpURLConnection con \t\t\t\t= (HttpURLConnection) ucon;\r\n    \r\n    \t\t\tcon.setConnectTimeout(connectionTimeOut * 1000);\r\n    \t\t\tcon.setReadTimeout(readTimeOut*1000);\r\n    \t\t\tcon.setDoOutput(true);\r\n    \t\t\tcon.setUseCaches(false);\r\n    \t\t\tcon.setDoInput(true);\r\n    \t\t\tcon.setRequestMethod(&quot;POST&quot;);\r\n    \t\t\tcon.setRequestProperty(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);\r\n    \r\n    \t\t\tbaos.writeTo(con.getOutputStream());\r\n    \r\n    \t\t\tInputStream responseStream = null;\r\n    \t\t\tByteArrayOutputStream baosRsp = null;\r\n    \r\n    \t\t\ttry {\r\n    \r\n    \t\t\t\tresponseStream \t\t\t\t\t= con.getInputStream();\r\n    \r\n    \t\t\t\tbaosRsp = new ByteArrayOutputStream();\r\n    \t\t\t\tbyte[] buffer = new byte[4096];\r\n    \t\t\t\tint length = 0;\r\n    \t\t\t\twhile ((length = responseStream.read(buffer)) != -1) {\r\n    \t\t\t\t\tbaosRsp.write(buffer, 0, length);\r\n    \t\t\t\t}\r\n    \r\n    \t\t\t\tresponsePayload = new String(baosRsp.toByteArray());\r\n    \r\n    \t\t\t}finally {\r\n    \t\t\t\ttry{responseStream.close();}catch (Exception e) { responseStream = null;}\r\n    \t\t\t\ttry{baosRsp.close();}catch (Exception e) { baosRsp = null;}\r\n    \t\t\t}\r\n    \r\n    \t\t}finally {\r\n    \t\t\ttry{baos.close();}catch (Exception e) { baos = null;}\r\n    \t\t}\r\n    \r\n    \t}\r\n\r\n**Attempt 5 :** Without proxy and without trust managers  - working fine\r\n\r\n**Attempt 6 :** Without proxy and above Attemp 1  - working fine\r\n\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@7800e6b6\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\r\n    [org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 11][route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [stdout] HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:50230&lt;-&gt;xxx.xxx.xxx.xxx:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\r\n    [org.apache.http.headers] http-outgoing-34 &gt;&gt; POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept: application/json\r\n    [org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept-Encoding: gzip\r\n\r\n\r\n**Attempt 7 :** Without proxy and above Attemp 2  - working fine\r\nLog : \r\n\r\n    [org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@21c33b01\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\r\n    [stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\r\n    [org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\r\n    [org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\r\n    [org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {s}-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx## Heading ##:443\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\r\n    [stdout] HTTPRouter.configure()\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\r\n    [org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\r\n    [stdout] HTTPRouter.configure().new HostnameVerifier() {...}.verify()\r\n    [org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:57748&lt;-&gt;xxx.xxx.xxx.xxx:443\r\n    [org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\r\n    [org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\r\n    [org.apache.http.headers] http-outgoing-32 &gt;&gt; POST /path/to/resource HTTP/1.1\r\n\r\n\r\n\r\n**Attempt - 8 :** Tried with another http endpoint with the http4 component in the same way and it was succeeded.\r\n\r\n**Attempt - 9 :** Tried with directly using to() component also but same results.\r\n","title":"SSLException: Unrecognized SSL message, plaintext connection? error while sending https POST in Camel via PROXY","body":"<p>I'm trying to connect to a external https endpoint using camel https4 component through proxy.\nFor this I setup squid proxy in linux (18.04).</p>\n\n<p>According to the references [<a href=\"http://camel.apache.org/http4.html]\" rel=\"nofollow noreferrer\">http://camel.apache.org/http4.html]</a>, I noted that this can be done using the proxyAuthHost and proxyAuthPort params.\nSo i tried to check it with the URL given as below</p>\n\n<blockquote>\n  <p>https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx&amp;bridgeEndpoint=true</p>\n</blockquote>\n\n<p>But it gives \"<code>javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?</code>\" continously. I tried number of ways as mentioned below but the result is same.</p>\n\n<p>Can anyone give a hint on this based on your experience / expertise?</p>\n\n<p><strong>Attempt 1 :</strong> Using PoolingHttpClientConnectionManager</p>\n\n<p>Code : </p>\n\n<pre><code>@ApplicationScoped\n@ContextName(\"camel_cdi_context\")\npublic class HTTPRouter extends RouteBuilder {\n\n    @Override\n    public void configure() throws Exception {\n\n        errorHandler(deadLetterChannel(\"direct:error\"));\n\n        try {\n\n            SSLContext sslContext = new SSLContextBuilder()\n                    .loadTrustMaterial(null, new TrustStrategy() {\n                        public boolean isTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {\n                            System.out.println(\"HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()\");\n                            return true;\n                        }\n                    })\n                    .build();\n\n            final SSLConnectionSocketFactory sslsf = new SSLConnectionSocketFactory(sslContext);\n\n            HttpComponent http4 = getContext().getComponent(\"https4\", HttpComponent.class);\n            http4.setHttpClientConfigurer(new HttpClientConfigurer() {\n\n                @Override\n                public void configureHttpClient(HttpClientBuilder builder) {\n\n                    builder.setSSLSocketFactory(sslsf);\n\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\");\n                    Registry&lt;ConnectionSocketFactory&gt; r = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                            .register(\"http\", PlainConnectionSocketFactory.getSocketFactory())\n                            .register(\"https\", sslsf)\n                            .build();\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\");\n                    HttpClientConnectionManager cm = new PoolingHttpClientConnectionManager(r);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\");\n                    builder.setConnectionManager(cm);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\");\n                }\n            });\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        from(\"direct:http\")\n            // prepare request payload\n            // set url to header\n            // set other connection properties (eg : Connection Method, Header etc)\n            .choice()\n            .when(header(\"url\").contains(\"?\"))\n                .toD(\"${header.url}&amp;throwExceptionOnFailure=false\")\n            .endChoice()\n            .otherwise()\n                .toD(\"${header.url}?throwExceptionOnFailure=false\")\n            .endChoice()\n        .end()\n        .convertBodyTo(String.class)\n        // process on the response\n\n    }\n\n}\n</code></pre>\n\n<p>Log : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2516c8e0\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-30: Shutdown connection\n[org.apache.http.impl.execchain.MainClientExec] Connection discarded\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection released: [id: 10][route: {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\n[ERROR] Exchange[Id: ID-xxxx-xxx-37655-1534782529403-63-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:54:27 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route221, CamelFatalFallbackErrorHandler=[route221], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX==, breadcrumbId=ID-xxxxx-xxx-37655-1534782529403-63-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015427600.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\n    at sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\n    at sun.security.ssl.InputRecord.read(InputRecord.java:527)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n    at org.apache.http.impl.conn.PoolingHttpClientConnectionManager.connect(PoolingHttpClientConnectionManager.java:359)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\n    at org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\n</code></pre>\n\n<p><strong>Attempt 2 :</strong> Using BasicHttpClientConnectionManager</p>\n\n<p>Code :</p>\n\n<pre><code>@ApplicationScoped\n@ContextName(\"camel_cdi_context\")\npublic class HTTPRouter extends RouteBuilder {\n\n    @Override\n    public void configure() throws Exception {\n\n        errorHandler(deadLetterChannel(\"direct:error\"));\n\n        try {\n\n            TrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                    System.out.println(\"HTTPRouter.configure()\");\n                    return null;\n                }\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                }\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                }\n            }\n            };\n\n            SSLContext sslContext = SSLContext.getInstance(\"SSL\");\n            sslContext.init(null, trustAllCerts, new java.security.SecureRandom());\n\n            HostnameVerifier allHostsValid = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) {\n                    System.out.println(\"HTTPRouter.configure().new HostnameVerifier() {...}.verify()\");\n                    return true;\n                }\n            };\n\n            final SSLConnectionSocketFactory        sslConnectionSocketFactory          = new SSLConnectionSocketFactory(sslContext,new String[]{\"TLSv1.2\", \"TLSv1.1\", \"TLSv1\", \"SSLv3\"}, null, allHostsValid);\n\n            HttpComponent http4 = getContext().getComponent(\"https4\", HttpComponent.class);\n            http4.setHttpClientConfigurer(new HttpClientConfigurer() {\n\n                @Override\n                public void configureHttpClient(HttpClientBuilder builder) {\n                    builder.setSSLSocketFactory(sslConnectionSocketFactory);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\");\n                    Registry&lt;ConnectionSocketFactory&gt; registry = RegistryBuilder.&lt;ConnectionSocketFactory&gt;create()\n                            .register(\"https\", sslConnectionSocketFactory)\n                            .build();\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\");\n                    HttpClientConnectionManager connectionManager = new  BasicHttpClientConnectionManager(registry);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\");\n                    builder.setConnectionManager(connectionManager);\n                    System.out.println(\"HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\");\n                }\n            });\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n\n        from(\"direct:http\")\n            // prepare request payload\n            // set url to header\n            // set other connection properties (eg : Connection Method, Header etc)\n            .choice()\n            .when(header(\"url\").contains(\"?\"))\n                .toD(\"${header.url}&amp;throwExceptionOnFailure=false\")\n            .endChoice()\n            .otherwise()\n                .toD(\"${header.url}?throwExceptionOnFailure=false\")\n            .endChoice()\n        .end()\n        .convertBodyTo(String.class)\n        // process on the response\n\n    }\n\n}\n</code></pre>\n\n<p>Log : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@2bb0862\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {tls}-&gt;https://192.168.xxx.xxx:xxxx-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to /192.168.xxx.xxx:xxxx\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to /192.168.xxx.xxx:xxxx with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[org.apache.http.impl.conn.DefaultManagedHttpClientConnection] http-outgoing-31: Shutdown connection\n[org.apache.http.impl.execchain.MainClientExec] Connection discarded\n[org.apache.http.impl.conn.BasicHttpClientConnectionManager] Releasing connection [Not bound]\n[ERROR] Exchange[Id: ID-xxxxx-xxx-37655-1534782529403-65-2, ExchangePattern: InOnly, Properties: {CamelCreatedTimestamp=Tue Aug 21 01:58:30 UTC 2018, CamelExceptionCaught=javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?, CamelFailureEndpoint=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;throwExceptionOnFailure=false&amp;proxyAuthHost=192.168.xxx.xxx, CamelFailureRouteId=route228, CamelFatalFallbackErrorHandler=[route228], CamelFilterMatched=true, CamelMessageHistory=[REMOVED...], CamelToEndpoint=log://ERROR?showAll=true}, Headers: {Accept=application/json, Accept-Encoding=gzip, Authorization=Basic XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX, breadcrumbId=ID-namal-pc-37655-1534782529403-65-1, CamelFileName=null, CamelFileNameProduced=/xxxxxx/path/to/payloads/2018-08-21/message-id-x-[EXT-Request]-2018-08-21-015830349.json, CamelHttpMethod=POST, Content-Type=application/x-www-form-urlencoded, doLogFiles=true, dontLogErrorFiles=false, messageId=message-id-x, messageName=message-name-x, routeId=direct-http, specialRq=true, specialRs=true, url=https4://endpoint-ssl-url.com/path/to/resource?proxyAuthPort=xxxx&amp;proxyAuthHost=192.168.xxx.xxx}, BodyType: String, Body: grant_type=client_credentials&amp;scope=DUMMYSCOPE, CaughtExceptionType: javax.net.ssl.SSLException, CaughtExceptionMessage: Unrecognized SSL message, plaintext connection?, StackTrace: javax.net.ssl.SSLException: Unrecognized SSL message, plaintext connection?\n    at sun.security.ssl.InputRecord.handleUnknownRecord(InputRecord.java:710)\n    at sun.security.ssl.InputRecord.read(InputRecord.java:527)\n    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:983)\n    at sun.security.ssl.SSLSocketImpl.performInitialHandshake(SSLSocketImpl.java:1385)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1413)\n    at sun.security.ssl.SSLSocketImpl.startHandshake(SSLSocketImpl.java:1397)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.createLayeredSocket(SSLConnectionSocketFactory.java:396)\n    at org.apache.http.conn.ssl.SSLConnectionSocketFactory.connectSocket(SSLConnectionSocketFactory.java:355)\n    at org.apache.http.impl.conn.DefaultHttpClientConnectionOperator.connect(DefaultHttpClientConnectionOperator.java:142)\n    at org.apache.http.impl.conn.BasicHttpClientConnectionManager.connect(BasicHttpClientConnectionManager.java:323)\n    at org.apache.http.impl.execchain.MainClientExec.establishRoute(MainClientExec.java:389)\n    at org.apache.http.impl.execchain.MainClientExec.execute(MainClientExec.java:237)\n    at org.apache.http.impl.execchain.ProtocolExec.execute(ProtocolExec.java:185)\n    at org.apache.http.impl.execchain.RetryExec.execute(RetryExec.java:89)\n    at org.apache.http.impl.execchain.RedirectExec.execute(RedirectExec.java:111)\n    at org.apache.http.impl.client.InternalHttpClient.doExecute(InternalHttpClient.java:185)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:83)\n    at org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:56)\n    at org.apache.camel.component.http4.HttpProducer.executeMethod(HttpProducer.java:334)\n    at org.apache.camel.component.http4.HttpProducer.process(HttpProducer.java:193)\n</code></pre>\n\n<p><strong>Attempt 3 :</strong> Mix of above two approaches\nResult : same exception</p>\n\n<p><strong>Attempt 4 :</strong> Using with Httpurlconnection\nI did this as a controlled test and it was succeeded.\nCode : </p>\n\n<pre><code>private void testViaHttpUrlConnection() throws Exception {\n\n        System.setProperty(\"jsse.enableSNIExtension\", \"false\");\n\n        ByteArrayOutputStream   baos                = null;\n        String                  requestPayload      = \"&lt;payload...&gt;\";\n        String                  url                 = \"https://endpoint-ssl-url.com/path/tp/resource\";\n        int                     connectionTimeOut   = 45;\n        int                     readTimeOut         = 30;\n        String                  responsePayload     = null;\n        String                  proxyIp             = \"192.168.xxx.xxx\";\n        int                     proxyPort           = xxxx;\n\n        try {\n\n            baos = new ByteArrayOutputStream();\n            baos.write(((String)requestPayload).getBytes());\n\n            TrustManager[] trustAllCerts = new TrustManager[] {new X509TrustManager() {\n                public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n                    return null;\n                }\n                public void checkClientTrusted(X509Certificate[] certs, String authType) {\n                }\n                public void checkServerTrusted(X509Certificate[] certs, String authType) {\n                }\n            }\n            };\n\n            SSLContext sc = SSLContext.getInstance(\"SSL\");\n            sc.init(null, trustAllCerts, new java.security.SecureRandom());\n            HttpsURLConnection.setDefaultSSLSocketFactory(sc.getSocketFactory());\n\n            HostnameVerifier allHostsValid = new HostnameVerifier() {\n                public boolean verify(String hostname, SSLSession session) {\n                    return true;\n                }\n            };\n\n            HttpsURLConnection.setDefaultHostnameVerifier(allHostsValid);\n\n            URL                     mUrl    = new URL(url);\n\n            URLConnection           ucon    = null;\n\n            Proxy proxy_server = new Proxy(Proxy.Type.HTTP, new InetSocketAddress(proxyIp, proxyPort));\n\n            ucon = mUrl.openConnection(proxy_server);\n\n            HttpURLConnection con               = (HttpURLConnection) ucon;\n\n            con.setConnectTimeout(connectionTimeOut * 1000);\n            con.setReadTimeout(readTimeOut*1000);\n            con.setDoOutput(true);\n            con.setUseCaches(false);\n            con.setDoInput(true);\n            con.setRequestMethod(\"POST\");\n            con.setRequestProperty(\"Content-Type\",\"application/x-www-form-urlencoded\");\n\n            baos.writeTo(con.getOutputStream());\n\n            InputStream responseStream = null;\n            ByteArrayOutputStream baosRsp = null;\n\n            try {\n\n                responseStream                  = con.getInputStream();\n\n                baosRsp = new ByteArrayOutputStream();\n                byte[] buffer = new byte[4096];\n                int length = 0;\n                while ((length = responseStream.read(buffer)) != -1) {\n                    baosRsp.write(buffer, 0, length);\n                }\n\n                responsePayload = new String(baosRsp.toByteArray());\n\n            }finally {\n                try{responseStream.close();}catch (Exception e) { responseStream = null;}\n                try{baosRsp.close();}catch (Exception e) { baosRsp = null;}\n            }\n\n        }finally {\n            try{baos.close();}catch (Exception e) { baos = null;}\n        }\n\n    }\n</code></pre>\n\n<p><strong>Attempt 5 :</strong> Without proxy and without trust managers  - working fine</p>\n\n<p><strong>Attempt 6 :</strong> Without proxy and above Attemp 1  - working fine</p>\n\n<p>Log : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@7800e6b6\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient()-4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection request: [route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 0 of 2; total allocated: 0 of 20]\n[org.apache.http.impl.conn.PoolingHttpClientConnectionManager] Connection leased: [id: 11][route: {s}-&gt;https://endpoint-ssl-url.com:443][total kept alive: 0; route allocated: 1 of 2; total allocated: 1 of 20]\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[stdout] HTTPRouter.configure().new TrustStrategy() {...}.isTrusted()\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:50230&lt;-&gt;xxx.xxx.xxx.xxx:443\n[org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\n[org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\n[org.apache.http.headers] http-outgoing-34 &gt;&gt; POST /path/to/resource HTTP/1.1\n[org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept: application/json\n[org.apache.http.headers] http-outgoing-34 &gt;&gt; Accept-Encoding: gzip\n</code></pre>\n\n<p><strong>Attempt 7 :</strong> Without proxy and above Attemp 2  - working fine\nLog : </p>\n\n<pre><code>[org.apache.camel.component.http4.HttpComponent] Created ClientConnectionManager org.apache.http.impl.conn.PoolingHttpClientConnectionManager@21c33b01\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 1\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 2\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 3\n[stdout] HTTPRouter.configure().new HttpClientConfigurer() {...}.configureHttpClient() - 4\n[org.apache.http.client.protocol.RequestAddCookies] CookieSpec selected: default\n[org.apache.http.client.protocol.RequestAuthCache] Auth cache not set in the context\n[org.apache.http.impl.conn.BasicHttpClientConnectionManager] Get connection for route {s}-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.execchain.MainClientExec] Opening connection {s}-&gt;https://endpoint-ssl-url.com:443\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connecting to endpoint-ssl-url.com/xxx.xxx.xxx.xxx## Heading ##:443\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Connecting socket to endpoint-ssl-url.com/xxx.xxx.xxx.xxx:443 with timeout 0\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled protocols: [SSLv3, TLSv1, TLSv1.1, TLSv1.2]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Enabled cipher suites:[TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, MORE_CIPHERS ...]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Starting handshake\n[stdout] HTTPRouter.configure()\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory] Secure session established\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated protocol: TLSv1.2\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  negotiated cipher suite: TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer principal: CN=endpoint-ssl-url.com, OU=Software Engineering Services, O=Telstra Corporation Limited, L=Melbourne, ST=Victoria, C=AU\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  peer alternative names: [endpoint-ssl-url.com]\n[org.apache.http.conn.ssl.SSLConnectionSocketFactory]  issuer principal: CN=QuoVadis Global SSL ICA G3, O=QuoVadis Limited, C=BM\n[stdout] HTTPRouter.configure().new HostnameVerifier() {...}.verify()\n[org.apache.http.impl.conn.DefaultHttpClientConnectionOperator] Connection established 192.168.xxx.xxx:57748&lt;-&gt;xxx.xxx.xxx.xxx:443\n[org.apache.http.impl.execchain.MainClientExec] Executing request POST /path/to/resource HTTP/1.1\n[org.apache.http.impl.execchain.MainClientExec] Proxy auth state: UNCHALLENGED\n[org.apache.http.headers] http-outgoing-32 &gt;&gt; POST /path/to/resource HTTP/1.1\n</code></pre>\n\n<p><strong>Attempt - 8 :</strong> Tried with another http endpoint with the http4 component in the same way and it was succeeded.</p>\n\n<p><strong>Attempt - 9 :</strong> Tried with directly using to() component also but same results.</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":3357849,"reputation":5771,"user_id":2820379,"accept_rate":81,"display_name":"ben"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401234322,"creation_date":1401234322,"answer_id":23900710,"question_id":23900699,"body_markdown":"Have a look at decompilers. They&#39;ll transform the java-bytecode back to source code. One example of such a compiler would be JD: http://jd.benow.ca/\r\n\r\nAfter editing the source code you would have to compile the code again and pack it in the respective `.jar` file.","title":"How do I edit the actual code of a java .class file?","body":"<p>Have a look at decompilers. They'll transform the java-bytecode back to source code. One example of such a compiler would be JD: <a href=\"http://jd.benow.ca/\" rel=\"nofollow\">http://jd.benow.ca/</a></p>\n\n<p>After editing the source code you would have to compile the code again and pack it in the respective <code>.jar</code> file.</p>\n"},{"comments":[{"owner":{"account_id":3244224,"reputation":973,"user_id":2736316,"display_name":"DMP"},"score":0,"creation_date":1401235121,"post_id":23900753,"comment_id":36801074,"body_markdown":"I don&#39;t know about every scenario, because I&#39;ve only tested them just to see if they actually worked. With small projects it produced correct code that had the same functionality. Obviously it can&#39;t get you comments back, which are important.","body":"I don&#39;t know about every scenario, because I&#39;ve only tested them just to see if they actually worked. With small projects it produced correct code that had the same functionality. Obviously it can&#39;t get you comments back, which are important."}],"tags":[],"owner":{"account_id":3244224,"reputation":973,"user_id":2736316,"display_name":"DMP"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1401235227,"creation_date":1401234589,"answer_id":23900753,"question_id":23900699,"body_markdown":"What you need for this is a java de-compiler. This will take the bytecode out of your class file and convert it back to its source. From there you will need to recompile the .java files that the de-compiler produces.\r\n\r\nHere are some java de-compilers that I have seen:\r\nhttp://dcompiler.sourceforge.net/\r\n\r\n\r\nhttp://jd.benow.ca","title":"How do I edit the actual code of a java .class file?","body":"<p>What you need for this is a java de-compiler. This will take the bytecode out of your class file and convert it back to its source. From there you will need to recompile the .java files that the de-compiler produces.</p>\n\n<p>Here are some java de-compilers that I have seen:\n<a href=\"http://dcompiler.sourceforge.net/\" rel=\"nofollow\">http://dcompiler.sourceforge.net/</a></p>\n\n<p><a href=\"http://jd.benow.ca\" rel=\"nofollow\">http://jd.benow.ca</a></p>\n"},{"tags":[],"owner":{"account_id":481212,"reputation":6556,"user_id":894885,"accept_rate":88,"display_name":"Samuel Edwin Ward"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401234787,"creation_date":1401234787,"answer_id":23900786,"question_id":23900699,"body_markdown":"If your file is an old enough version, you can use [jasper](http://www.angelfire.com/tx4/cus/jasper/) to disassemble it into bytecode, edit the bytecode and reassemble it using [jasmin](http://jasmin.sourceforge.net/).  Unfortunately these tools have not been updated in some time.\r\n\r\nThey do not produce Java code; you&#39;ll have to learn Java bytecode.  But it is more reliable than the so-called &quot;decompiler&quot; methods.","title":"How do I edit the actual code of a java .class file?","body":"<p>If your file is an old enough version, you can use <a href=\"http://www.angelfire.com/tx4/cus/jasper/\" rel=\"nofollow\">jasper</a> to disassemble it into bytecode, edit the bytecode and reassemble it using <a href=\"http://jasmin.sourceforge.net/\" rel=\"nofollow\">jasmin</a>.  Unfortunately these tools have not been updated in some time.</p>\n\n<p>They do not produce Java code; you'll have to learn Java bytecode.  But it is more reliable than the so-called \"decompiler\" methods.</p>\n"},{"comments":[{"owner":{"account_id":4531361,"reputation":53,"user_id":3681742,"accept_rate":50,"display_name":"andrew3ds"},"score":0,"creation_date":1401330664,"post_id":23900789,"comment_id":36846347,"body_markdown":"Okay, thank you I decompiled it successfully, but now when I try to compile it using javac it doesn&#39;t work because it can&#39;t find the other .java files that were in the jar. It isn&#39;t letting me compile just one class. Do I have to decompile all of the other classes in the jar and then re-compile them? There is a lot of classes so this will take a very long time to do,","body":"Okay, thank you I decompiled it successfully, but now when I try to compile it using javac it doesn&#39;t work because it can&#39;t find the other .java files that were in the jar. It isn&#39;t letting me compile just one class. Do I have to decompile all of the other classes in the jar and then re-compile them? There is a lot of classes so this will take a very long time to do,"},{"owner":{"account_id":91915,"reputation":1401,"user_id":252155,"accept_rate":50,"display_name":"Amir Moghimi"},"score":0,"creation_date":1401335596,"post_id":23900789,"comment_id":36847445,"body_markdown":"With javac, unfortunately, yes. You should decompile and recompile the entire jar file. Make sure you also put all other dependant jar files on the compiler classpath.","body":"With javac, unfortunately, yes. You should decompile and recompile the entire jar file. Make sure you also put all other dependant jar files on the compiler classpath."}],"tags":[],"owner":{"account_id":91915,"reputation":1401,"user_id":252155,"accept_rate":50,"display_name":"Amir Moghimi"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1401234797,"creation_date":1401234797,"answer_id":23900789,"question_id":23900699,"body_markdown":"As Java .class files are in byte-code format, you cannot modify them the way you would edit a .java source file. Bytecode is a low level language closer to the machine language rather than Java itself.\r\n\r\nIf you need to modify the source, one option is to use a decompiler, e.g. [JAD (Java Decompiler)][1], to get a source file and then change it and recompile to .class using javac. Make sure you figure out which version of Java language (1.4, 5, 6, 7, 8) has been used for the original jar file.\r\n\r\n\r\n  [1]: http://varaneckas.com/jad/","title":"How do I edit the actual code of a java .class file?","body":"<p>As Java .class files are in byte-code format, you cannot modify them the way you would edit a .java source file. Bytecode is a low level language closer to the machine language rather than Java itself.</p>\n\n<p>If you need to modify the source, one option is to use a decompiler, e.g. <a href=\"http://varaneckas.com/jad/\" rel=\"nofollow\">JAD (Java Decompiler)</a>, to get a source file and then change it and recompile to .class using javac. Make sure you figure out which version of Java language (1.4, 5, 6, 7, 8) has been used for the original jar file.</p>\n"}],"owner":{"account_id":4531361,"reputation":53,"user_id":3681742,"accept_rate":50,"display_name":"andrew3ds"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":8279,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"answer_count":4,"score":0,"last_activity_date":1695754945,"creation_date":1401234240,"question_id":23900699,"body_markdown":"I have a jar that I want to take out a class file and add a few lines of code to it. I got class editor, but you can&#39;t actually change any code, you can change constants and that is all. I have a program that you can read the source code from a .class but you can&#39;t change anything on it. Is there a program or eclipse plugin that you can read and EDIT the source code from a .class file?","title":"How do I edit the actual code of a java .class file?","body":"<p>I have a jar that I want to take out a class file and add a few lines of code to it. I got class editor, but you can't actually change any code, you can change constants and that is all. I have a program that you can read the source code from a .class but you can't change anything on it. Is there a program or eclipse plugin that you can read and EDIT the source code from a .class file?</p>\n"},{"tags":["java","jax-ws","apache-tomee","tomee-8"],"owner":{"account_id":613530,"reputation":165,"user_id":342684,"display_name":"Boyan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695754905,"creation_date":1695571434,"question_id":77167885,"body_markdown":"Migrating an existing application to TomEE, which uses JAX-WS `javax.xml.ws.Endpoint`. The following code does not open port `7001`. \r\n\r\n    @WebServiceProvider\r\n    @ServiceMode(value=Service.Mode.PAYLOAD)\r\n    public final class WsProvider implements Provider&lt;Source&gt; {\r\n      ...\r\n      public void start() {\r\n        String publishAddress = &quot;http://0.0.0.0:7001/v1.0.1/soap&quot;;\r\n        Endpoint endPoint = Endpoint.create(this);\r\n        endPoint.publish(publishAddress);\r\n        log.debug(&quot;published: &quot; + endPoint.isPublished());\r\n      }\r\n\r\nTomEE log:\r\n\r\n    2023-09-24 05:06:05.526 INFO [main] org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass Creating Service {http://ws.app.com/} WsProviderService from class com.app.ws.WsProvider\r\n    2023-09-24 05:06:05.969 INFO [main] org.apache.cxf.endpoint.ServerImpl.initDestination Setting the server&#39;s publish address to be http://0.0.0.0:7001/v1.0.1/soap\r\n    2023-09-24 05:06:05.994 DEBUG: published: true\r\n\r\n`7001` not in the list of open ports:\r\n\r\n    lsof -i -P -n | grep LISTEN | grep java\r\n\r\n    java      4859            root   21u  IPv4  34883      0t0  TCP *:9998 (LISTEN)\r\n    java      4859            root   22u  IPv4  34884      0t0  TCP *:9999 (LISTEN)\r\n    java      4859            root   23u  IPv4  34885      0t0  TCP *:42883 (LISTEN)\r\n    java      4859            root  219u  IPv4  34886      0t0  TCP *:8080 (LISTEN)\r\n    java      4859            root  232u  IPv4  34905      0t0  TCP 127.0.0.1:61616 (LISTEN)\r\n    java      4859            root  296u  IPv4  34942      0t0  TCP 127.0.0.1:8005 (LISTEN)\r\n\r\nEnvironment:\r\n- TomEE 8.0.15\r\n- Java 1.8.0_181\r\n- Ubuntu 5.15.0-84-generic\r\n\r\n\r\nThere are no exceptions, the app deploys and runs fine on TomEE, except it does not listen on port 7001. The same app runs as expected on Weblogic and Tomcat. Is there a TomEE specific configuration that needs to be enabled to make this work?","title":"Tomee JAX-WS Enpoint.publish not running on specified port","body":"<p>Migrating an existing application to TomEE, which uses JAX-WS <code>javax.xml.ws.Endpoint</code>. The following code does not open port <code>7001</code>.</p>\n<pre><code>@WebServiceProvider\n@ServiceMode(value=Service.Mode.PAYLOAD)\npublic final class WsProvider implements Provider&lt;Source&gt; {\n  ...\n  public void start() {\n    String publishAddress = &quot;http://0.0.0.0:7001/v1.0.1/soap&quot;;\n    Endpoint endPoint = Endpoint.create(this);\n    endPoint.publish(publishAddress);\n    log.debug(&quot;published: &quot; + endPoint.isPublished());\n  }\n</code></pre>\n<p>TomEE log:</p>\n<pre><code>2023-09-24 05:06:05.526 INFO [main] org.apache.cxf.wsdl.service.factory.ReflectionServiceFactoryBean.buildServiceFromClass Creating Service {http://ws.app.com/} WsProviderService from class com.app.ws.WsProvider\n2023-09-24 05:06:05.969 INFO [main] org.apache.cxf.endpoint.ServerImpl.initDestination Setting the server's publish address to be http://0.0.0.0:7001/v1.0.1/soap\n2023-09-24 05:06:05.994 DEBUG: published: true\n</code></pre>\n<p><code>7001</code> not in the list of open ports:</p>\n<pre><code>lsof -i -P -n | grep LISTEN | grep java\n\njava      4859            root   21u  IPv4  34883      0t0  TCP *:9998 (LISTEN)\njava      4859            root   22u  IPv4  34884      0t0  TCP *:9999 (LISTEN)\njava      4859            root   23u  IPv4  34885      0t0  TCP *:42883 (LISTEN)\njava      4859            root  219u  IPv4  34886      0t0  TCP *:8080 (LISTEN)\njava      4859            root  232u  IPv4  34905      0t0  TCP 127.0.0.1:61616 (LISTEN)\njava      4859            root  296u  IPv4  34942      0t0  TCP 127.0.0.1:8005 (LISTEN)\n</code></pre>\n<p>Environment:</p>\n<ul>\n<li>TomEE 8.0.15</li>\n<li>Java 1.8.0_181</li>\n<li>Ubuntu 5.15.0-84-generic</li>\n</ul>\n<p>There are no exceptions, the app deploys and runs fine on TomEE, except it does not listen on port 7001. The same app runs as expected on Weblogic and Tomcat. Is there a TomEE specific configuration that needs to be enabled to make this work?</p>\n"},{"tags":["java","validation","string","character"],"comments":[{"owner":{"account_id":237,"reputation":28496,"user_id":292,"accept_rate":68,"display_name":"shsteimer"},"score":6,"creation_date":1233671161,"post_id":506105,"comment_id":321613,"body_markdown":"Is there any particular reason that you are trying to avoid loops?","body":"Is there any particular reason that you are trying to avoid loops?"},{"owner":{"account_id":498110,"reputation":1330,"user_id":1377112,"accept_rate":57,"display_name":"Salvador Valencia"},"score":3,"creation_date":1434394939,"post_id":506105,"comment_id":49749351,"body_markdown":"You cannot do a general search for the character without a loop. Look up how a Turing Machine works.","body":"You cannot do a general search for the character without a loop. Look up how a Turing Machine works."},{"owner":{"account_id":8211,"reputation":23893,"user_id":14663,"accept_rate":88,"display_name":"WW."},"score":9,"creation_date":1496729404,"post_id":506105,"comment_id":75765194,"body_markdown":"We should assume @barfoon doesn&#39;t want the loop to be in their code.  Obviously the machine does a loop somewhere.  Otherwise the question is nonsense.","body":"We should assume @barfoon doesn&#39;t want the loop to be in their code.  Obviously the machine does a loop somewhere.  Otherwise the question is nonsense."},{"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"score":0,"creation_date":1592046116,"post_id":506105,"comment_id":110287145,"body_markdown":"I would say java&#39;s string manipulation is quite limited","body":"I would say java&#39;s string manipulation is quite limited"},{"owner":{"account_id":20511313,"reputation":2360,"user_id":15102459,"display_name":"Thiyanesh"},"score":0,"creation_date":1614033592,"post_id":506105,"comment_id":117256235,"body_markdown":"@barfoon, based on the definition of `single character` and how the user accesses that character, there might be a different usage pattern. I have added [an answer](https://stackoverflow.com/questions/506105/how-can-i-check-if-a-single-character-appears-in-a-string/66324429#66324429)","body":"@barfoon, based on the definition of <code>single character</code> and how the user accesses that character, there might be a different usage pattern. I have added <a href=\"https://stackoverflow.com/questions/506105/how-can-i-check-if-a-single-character-appears-in-a-string/66324429#66324429\">an answer</a>"}],"answers":[{"comments":[{"owner":{"account_id":4212,"reputation":25011,"user_id":6258,"accept_rate":70,"display_name":"vava"},"score":12,"creation_date":1233642331,"post_id":506107,"comment_id":320745,"body_markdown":"But there&#39;s always a loop behind that call because you can&#39;t find a symbol otherwise.","body":"But there&#39;s always a loop behind that call because you can&#39;t find a symbol otherwise."},{"owner":{"account_id":1910,"reputation":91828,"user_id":2635,"accept_rate":65,"display_name":"mmcdole"},"score":7,"creation_date":1233644235,"post_id":506107,"comment_id":320764,"body_markdown":"indexOf() uses a loop internally.","body":"indexOf() uses a loop internally."},{"owner":{"account_id":22774,"reputation":18102,"user_id":56524,"accept_rate":45,"display_name":"mP."},"score":26,"creation_date":1233802510,"post_id":506107,"comment_id":328147,"body_markdown":"Thats not what Barfoon asked. B wishes to avoid doing the loop in B&#39;s code. Naturally the API needs to do a loop after all a String is an array of characters wrapped up in a nice class with lots of useful methods.","body":"Thats not what Barfoon asked. B wishes to avoid doing the loop in B&#39;s code. Naturally the API needs to do a loop after all a String is an array of characters wrapped up in a nice class with lots of useful methods."},{"owner":{"account_id":6061909,"reputation":447,"user_id":4733423,"accept_rate":60,"display_name":"Seyyed Mahmood Ahmadi"},"score":0,"creation_date":1464114671,"post_id":506107,"comment_id":62348082,"body_markdown":"If there is more than one character &#39;a&#39;, what returend?","body":"If there is more than one character &#39;a&#39;, what returend?"},{"owner":{"account_id":8847858,"reputation":1120,"user_id":6791449,"accept_rate":39,"display_name":"Prashant Prabhakar Singh"},"score":6,"creation_date":1488525721,"post_id":506107,"comment_id":72279040,"body_markdown":"How are these answers getting so many upvotes? The solutions of using `indexOf()` uses loop internally. None of the answers gives correct solution and if someone dares to ask a new question, people declare it `Duplicate`. Really disappointing ;(","body":"How are these answers getting so many upvotes? The solutions of using <code>indexOf()</code> uses loop internally. None of the answers gives correct solution and if someone dares to ask a new question, people declare it <code>Duplicate</code>. Really disappointing ;("},{"owner":{"account_id":7961677,"reputation":977,"user_id":6009304,"accept_rate":89,"display_name":"Tyler"},"score":9,"creation_date":1506432450,"post_id":506107,"comment_id":79812663,"body_markdown":"@PrashantPrabhakarSingh I don&#39;t see how this can be done without a loop. A string is more or less an group of characters. If it is a group (collection, array, etc) then no matter if it is internal or external to the native code, I would expect that you would need a loop in order to find something within the &quot;group&quot;. I believe &quot;without using a loop?&quot; is more like &quot;without writing my own loop?&quot;.","body":"@PrashantPrabhakarSingh I don&#39;t see how this can be done without a loop. A string is more or less an group of characters. If it is a group (collection, array, etc) then no matter if it is internal or external to the native code, I would expect that you would need a loop in order to find something within the &quot;group&quot;. I believe &quot;without using a loop?&quot; is more like &quot;without writing my own loop?&quot;."},{"owner":{"account_id":3093339,"reputation":9944,"user_id":2619038,"accept_rate":100,"display_name":"NoName"},"score":0,"creation_date":1510461547,"post_id":506107,"comment_id":81441373,"body_markdown":"@PrashantPrabhakarSingh  As long as it works! Who cares :D","body":"@PrashantPrabhakarSingh  As long as it works! Who cares :D"},{"owner":{"account_id":266943,"reputation":14507,"user_id":554807,"accept_rate":79,"display_name":"GreenAsJade"},"score":0,"creation_date":1567571277,"post_id":506107,"comment_id":101997080,"body_markdown":"Why would you use `indexOf` when you can use `contains`, which semantically matches what you are actually asking?","body":"Why would you use <code>indexOf</code> when you can use <code>contains</code>, which semantically matches what you are actually asking?"},{"owner":{"account_id":20511313,"reputation":2360,"user_id":15102459,"display_name":"Thiyanesh"},"score":0,"creation_date":1614288585,"post_id":506107,"comment_id":117347919,"body_markdown":"Using a `char` that will be widened to `indexOf(int)` can work correctly only for BMP. For SP, codepoints should be used as per [this](https://stackoverflow.com/questions/506105/how-can-i-check-if-a-single-character-appears-in-a-string/66324429#66324429)","body":"Using a <code>char</code> that will be widened to <code>indexOf(int)</code> can work correctly only for BMP. For SP, codepoints should be used as per <a href=\"https://stackoverflow.com/questions/506105/how-can-i-check-if-a-single-character-appears-in-a-string/66324429#66324429\">this</a>"}],"tags":[],"owner":{"account_id":22774,"reputation":18102,"user_id":56524,"accept_rate":45,"display_name":"mP."},"comment_count":9,"down_vote_count":6,"up_vote_count":364,"is_accepted":true,"score":358,"last_activity_date":1584880851,"creation_date":1233639635,"answer_id":506107,"question_id":506105,"body_markdown":"You can use [`string.indexOf(&#39;a&#39;)`][1].\r\n\r\nIf the char `a` is present in `string` : \r\n\r\n&gt; it returns the the index of the first occurrence of the character in\r\n&gt; the character sequence represented by this object, or -1 if the\r\n&gt; character does not occur.\r\n\r\n\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29","title":"How can I check if a single character appears in a string?","body":"<p>You can use <a href=\"http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#indexOf%28int%29\" rel=\"noreferrer\"><code>string.indexOf('a')</code></a>.</p>\n\n<p>If the char <code>a</code> is present in <code>string</code> : </p>\n\n<blockquote>\n  <p>it returns the the index of the first occurrence of the character in\n  the character sequence represented by this object, or -1 if the\n  character does not occur.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":22774,"reputation":18102,"user_id":56524,"accept_rate":45,"display_name":"mP."},"score":19,"creation_date":1233639915,"post_id":506109,"comment_id":320691,"body_markdown":"a char isnt a CharSequence so it cant be passed to String.contains(CharSequence).","body":"a char isnt a CharSequence so it cant be passed to String.contains(CharSequence)."},{"owner":{"account_id":51571,"reputation":34238,"user_id":154133,"accept_rate":57,"display_name":"friederbluemle"},"score":45,"creation_date":1348093815,"post_id":506109,"comment_id":16827872,"body_markdown":"To use String.contains() with a single char c do this: **String.contains(Character.toString(c))**","body":"To use String.contains() with a single char c do this: <b>String.contains(Character.toString(c))</b>"},{"owner":{"account_id":2091879,"reputation":80,"user_id":1861517,"display_name":"Felix Neumeyer"},"score":11,"creation_date":1445184300,"post_id":506109,"comment_id":54204917,"body_markdown":"Or do this if you like short code: `String.contains(&quot;&quot;+c)`","body":"Or do this if you like short code: <code>String.contains(&quot;&quot;+c)</code>"}],"tags":[],"owner":{"account_id":10566,"reputation":29161,"user_id":20029,"display_name":"Zach Scrivena"},"comment_count":3,"down_vote_count":4,"up_vote_count":167,"is_accepted":false,"score":163,"last_activity_date":1233644160,"creation_date":1233639701,"answer_id":506109,"question_id":506105,"body_markdown":"   - [**`String.contains()`**][1] which checks if the string contains a specified sequence of char values\r\n   - [**`String.indexOf()`**][2] which returns the index within the string of the first occurence of the specified character or substring (there are 4 variations of this method)\r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)","title":"How can I check if a single character appears in a string?","body":"<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"noreferrer\"><strong><code>String.contains()</code></strong></a> which checks if the string contains a specified sequence of char values</li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)\" rel=\"noreferrer\"><strong><code>String.indexOf()</code></strong></a> which returns the index within the string of the first occurence of the specified character or substring (there are 4 variations of this method)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":9168,"reputation":12722,"user_id":16828,"accept_rate":87,"display_name":"Fortyrunner"},"score":0,"creation_date":1233642385,"post_id":506110,"comment_id":320746,"body_markdown":"Agreed. At some point, somebody, somewhere needs to construct a loop to do this. Fortunately the Java API does this or our code would be very cluttered!","body":"Agreed. At some point, somebody, somewhere needs to construct a loop to do this. Fortunately the Java API does this or our code would be very cluttered!"}],"tags":[],"owner":{"account_id":15646,"reputation":1363,"user_id":33254,"display_name":"mweiss"},"comment_count":1,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1233639704,"creation_date":1233639704,"answer_id":506110,"question_id":506105,"body_markdown":"To check if something does not exist in a string, you at least need to look at each character in a string.  So even if you don&#39;t explicitly use a loop, it&#39;ll have the same efficiency.  That being said, you can try using str.contains(&quot;&quot;+char).","title":"How can I check if a single character appears in a string?","body":"<p>To check if something does not exist in a string, you at least need to look at each character in a string.  So even if you don't explicitly use a loop, it'll have the same efficiency.  That being said, you can try using str.contains(\"\"+char).</p>\n"},{"tags":[],"owner":{"account_id":24055,"reputation":5044,"user_id":60892,"accept_rate":42,"display_name":"Mystic"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1233639878,"creation_date":1233639878,"answer_id":506117,"question_id":506105,"body_markdown":"\r\nYes, using the indexOf() method on the string class. [See the API documentation for this method][1]\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#indexOf(int)","title":"How can I check if a single character appears in a string?","body":"<p>Yes, using the indexOf() method on the string class. <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/lang/String.html#indexOf(int)\" rel=\"nofollow noreferrer\">See the API documentation for this method</a></p>\n"},{"comments":[{"owner":{"account_id":15259,"reputation":23545,"user_id":32043,"accept_rate":98,"display_name":"guerda"},"score":14,"creation_date":1233669939,"post_id":507137,"comment_id":321533,"body_markdown":"If you define recursion as a non-loop procedure, you&#39;re a geek :D +1 for being creative.","body":"If you define recursion as a non-loop procedure, you&#39;re a geek :D +1 for being creative."},{"owner":{"account_id":498110,"reputation":1330,"user_id":1377112,"accept_rate":57,"display_name":"Salvador Valencia"},"score":1,"creation_date":1434394787,"post_id":507137,"comment_id":49749251,"body_markdown":"It&#39;s all good for the hard coded length of 5. Otherwise THERE IS A NEED TO DO A LOOP to search for the character. Not to be pedantic but, the proof of this is shown by the definition of a Turing Machine. The foundation of a computational device.","body":"It&#39;s all good for the hard coded length of 5. Otherwise THERE IS A NEED TO DO A LOOP to search for the character. Not to be pedantic but, the proof of this is shown by the definition of a Turing Machine. The foundation of a computational device."},{"owner":{"account_id":4773319,"reputation":487,"user_id":3857278,"display_name":"PasinduJay"},"score":4,"creation_date":1509423961,"post_id":507137,"comment_id":81002754,"body_markdown":"Correct me if I&#39;m wrong, I feel at the end of the day, a recursion is a loop in disguise isn&#39;t it? And it may leads to more memory consumption than an ordinary loop in some scenarios.","body":"Correct me if I&#39;m wrong, I feel at the end of the day, a recursion is a loop in disguise isn&#39;t it? And it may leads to more memory consumption than an ordinary loop in some scenarios."}],"tags":[],"owner":{"account_id":15083,"reputation":22025,"user_id":31506,"display_name":"Jack Leow"},"comment_count":3,"down_vote_count":1,"up_vote_count":39,"is_accepted":false,"score":38,"last_activity_date":1233669236,"creation_date":1233669236,"answer_id":507137,"question_id":506105,"body_markdown":"I&#39;m not sure what the original poster is asking exactly. Since indexOf(...) and contains(...) both *probably* use loops internally, perhaps he&#39;s looking to see if this is possible at all without a loop? I can think of two ways off hand, one would of course be recurrsion:\r\n\r\n    public boolean containsChar(String s, char search) {\r\n        if (s.length() == 0)\r\n            return false;\r\n        else\r\n            return s.charAt(0) == search || containsChar(s.substring(1), search);\r\n    }\r\n\r\nThe other is far less elegant, but completeness...:\r\n\r\n    /**\r\n     * Works for strings of up to 5 characters\r\n     */\r\n    public boolean containsChar(String s, char search) {\r\n        if (s.length() &gt; 5) throw IllegalArgumentException();\r\n        \r\n        try {\r\n            if (s.charAt(0) == search) return true;\r\n            if (s.charAt(1) == search) return true;\r\n            if (s.charAt(2) == search) return true;\r\n            if (s.charAt(3) == search) return true;\r\n            if (s.charAt(4) == search) return true;\r\n        } catch (IndexOutOfBoundsException e) {\r\n            // this should never happen...\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n\r\nThe number of lines grow as you need to support longer and longer strings of course. But there are no loops/recurrsions at all. You can even remove the length check if you&#39;re concerned that that length() uses a loop.","title":"How can I check if a single character appears in a string?","body":"<p>I'm not sure what the original poster is asking exactly. Since indexOf(...) and contains(...) both <em>probably</em> use loops internally, perhaps he's looking to see if this is possible at all without a loop? I can think of two ways off hand, one would of course be recurrsion:</p>\n\n<pre><code>public boolean containsChar(String s, char search) {\n    if (s.length() == 0)\n        return false;\n    else\n        return s.charAt(0) == search || containsChar(s.substring(1), search);\n}\n</code></pre>\n\n<p>The other is far less elegant, but completeness...:</p>\n\n<pre><code>/**\n * Works for strings of up to 5 characters\n */\npublic boolean containsChar(String s, char search) {\n    if (s.length() &gt; 5) throw IllegalArgumentException();\n\n    try {\n        if (s.charAt(0) == search) return true;\n        if (s.charAt(1) == search) return true;\n        if (s.charAt(2) == search) return true;\n        if (s.charAt(3) == search) return true;\n        if (s.charAt(4) == search) return true;\n    } catch (IndexOutOfBoundsException e) {\n        // this should never happen...\n        return false;\n    }\n    return false;\n}\n</code></pre>\n\n<p>The number of lines grow as you need to support longer and longer strings of course. But there are no loops/recurrsions at all. You can even remove the length check if you're concerned that that length() uses a loop.</p>\n"},{"comments":[{"owner":{"account_id":171977,"reputation":18164,"user_id":399722,"accept_rate":88,"display_name":"Shekhar_Pro"},"score":1,"creation_date":1310376954,"post_id":6646758,"comment_id":7856199,"body_markdown":"isn&#39;t this the exact duplicate of the accepted answer ?, we acknowledge your effort but you should try finding some unanswered question and answer them.","body":"isn&#39;t this the exact duplicate of the accepted answer ?, we acknowledge your effort but you should try finding some unanswered question and answer them."}],"tags":[],"owner":{"account_id":780908,"reputation":145,"user_id":838378,"display_name":"Richard"},"comment_count":1,"down_vote_count":3,"up_vote_count":15,"is_accepted":false,"score":12,"last_activity_date":1310367651,"creation_date":1310367651,"answer_id":6646758,"question_id":506105,"body_markdown":"    String temp = &quot;abcdefghi&quot;;\r\n    if(temp.indexOf(&quot;b&quot;)!=-1)\r\n    {\r\n       System.out.println(&quot;there is &#39;b&#39; in temp string&quot;);\r\n    }\r\n    else\r\n    {\r\n       System.out.println(&quot;there is no &#39;b&#39; in temp string&quot;);\r\n    }","title":"How can I check if a single character appears in a string?","body":"<pre><code>String temp = \"abcdefghi\";\nif(temp.indexOf(\"b\")!=-1)\n{\n   System.out.println(\"there is 'b' in temp string\");\n}\nelse\n{\n   System.out.println(\"there is no 'b' in temp string\");\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4528714,"reputation":594,"user_id":3679830,"accept_rate":60,"display_name":"Viorel Florian"},"score":1,"creation_date":1511301267,"post_id":10481110,"comment_id":81801454,"body_markdown":"I tried your solution on a similar problem I have. My closest solution was over 1500 miliseconds for string1 length 63k and string2 length 95k. Your solution spits out a result in 3-5 milliseconds. Can you please edit your solution to include an explanation? Please?","body":"I tried your solution on a similar problem I have. My closest solution was over 1500 miliseconds for string1 length 63k and string2 length 95k. Your solution spits out a result in 3-5 milliseconds. Can you please edit your solution to include an explanation? Please?"}],"tags":[],"owner":{"account_id":323347,"reputation":93,"user_id":643310,"display_name":"fillumina"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1336389361,"creation_date":1336389361,"answer_id":10481110,"question_id":506105,"body_markdown":"If you need to check the same string often you can calculate the character occurrences up-front. This is an implementation that uses a bit array contained into a long array:\r\n\r\n    public class FastCharacterInStringChecker implements Serializable {\r\n    private static final long serialVersionUID = 1L;\r\n\r\n    private final long[] l = new long[1024]; // 65536 / 64 = 1024\r\n\r\n    public FastCharacterInStringChecker(final String string) {\r\n        for (final char c: string.toCharArray()) {\r\n            final int index = c &gt;&gt; 6;\r\n            final int value = c - (index &lt;&lt; 6);\r\n            l[index] |= 1L &lt;&lt; value;\r\n        }\r\n    }\r\n\r\n    public boolean contains(final char c) {\r\n        final int index = c &gt;&gt; 6; // c / 64\r\n        final int value = c - (index &lt;&lt; 6); // c - (index * 64)\r\n        return (l[index] &amp; (1L &lt;&lt; value)) != 0;\r\n    }}\r\n\r\n","title":"How can I check if a single character appears in a string?","body":"<p>If you need to check the same string often you can calculate the character occurrences up-front. This is an implementation that uses a bit array contained into a long array:</p>\n\n<pre><code>public class FastCharacterInStringChecker implements Serializable {\nprivate static final long serialVersionUID = 1L;\n\nprivate final long[] l = new long[1024]; // 65536 / 64 = 1024\n\npublic FastCharacterInStringChecker(final String string) {\n    for (final char c: string.toCharArray()) {\n        final int index = c &gt;&gt; 6;\n        final int value = c - (index &lt;&lt; 6);\n        l[index] |= 1L &lt;&lt; value;\n    }\n}\n\npublic boolean contains(final char c) {\n    final int index = c &gt;&gt; 6; // c / 64\n    final int value = c - (index &lt;&lt; 6); // c - (index * 64)\n    return (l[index] &amp; (1L &lt;&lt; value)) != 0;\n}}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1506022,"reputation":11,"user_id":1409367,"display_name":"Ganeshmani"},"score":0,"creation_date":1337664151,"post_id":10696096,"comment_id":13885261,"body_markdown":"Here we are looking for occurrences of every character from String b present in String a and deleting the characters.","body":"Here we are looking for occurrences of every character from String b present in String a and deleting the characters."}],"tags":[],"owner":{"account_id":1506022,"reputation":11,"user_id":1409367,"display_name":"Ganeshmani"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1337664060,"creation_date":1337664060,"answer_id":10696096,"question_id":506105,"body_markdown":"\tstatic String removeOccurences(String a, String b)\r\n\t{\r\n\t\tStringBuilder s2 = new StringBuilder(a);\r\n\r\n\t\tfor(int i=0;i&lt;b.length();i++){\r\n\t\t\tchar ch = b.charAt(i);\t\r\n\t\t\tSystem.out.println(ch+&quot;  first index&quot;+a.indexOf(ch));\r\n\t\t\t\r\n\t\t\tint lastind = a.lastIndexOf(ch);\r\n\t\t\t\r\n\t\tfor(int k=new String(s2).indexOf(ch);k &gt; 0;k=new String(s2).indexOf(ch)){\r\n\t\t\t\tif(s2.charAt(k) == ch){\r\n\t\t\t\t\ts2.deleteCharAt(k);\r\n\t\t\tSystem.out.println(&quot;val of s2 :             &quot;+s2.toString());\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t  }\r\n\r\n\t\tSystem.out.println(s1.toString());\r\n\t\t\t\r\n\t\treturn (s1.toString());\r\n\t}","title":"How can I check if a single character appears in a string?","body":"<pre><code>static String removeOccurences(String a, String b)\n{\n    StringBuilder s2 = new StringBuilder(a);\n\n    for(int i=0;i&lt;b.length();i++){\n        char ch = b.charAt(i);  \n        System.out.println(ch+\"  first index\"+a.indexOf(ch));\n\n        int lastind = a.lastIndexOf(ch);\n\n    for(int k=new String(s2).indexOf(ch);k &gt; 0;k=new String(s2).indexOf(ch)){\n            if(s2.charAt(k) == ch){\n                s2.deleteCharAt(k);\n        System.out.println(\"val of s2 :             \"+s2.toString());\n            }\n        }\n      }\n\n    System.out.println(s1.toString());\n\n    return (s1.toString());\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1665141,"reputation":1469,"user_id":1532705,"accept_rate":73,"display_name":"Mindwin Remember Monica"},"score":3,"creation_date":1392230192,"post_id":11634692,"comment_id":32874040,"body_markdown":"and `for` is not a loop now?","body":"and <code>for</code> is not a loop now?"}],"tags":[],"owner":{"account_id":1685971,"reputation":19,"user_id":1549262,"display_name":"Praveen kumar"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1385527243,"creation_date":1343145270,"answer_id":11634692,"question_id":506105,"body_markdown":"    package com;\r\n    public class _index {\r\n\r\n        public static void main(String[] args) {\r\n            String s1=&quot;be proud to be an indian&quot;;\r\n            char ch=s1.charAt(s1.indexOf(&#39;e&#39;));\r\n            int count = 0; \r\n            for(int i=0;i&lt;s1.length();i++) {\r\n                if(s1.charAt(i)==&#39;e&#39;){\r\n                    System.out.println(&quot;number of E:==&quot;+ch);\r\n                    count++;\r\n                }\r\n            }\r\n            System.out.println(&quot;Total count of E:==&quot;+count);\r\n        }\r\n    }","title":"How can I check if a single character appears in a string?","body":"<pre><code>package com;\npublic class _index {\n\n    public static void main(String[] args) {\n        String s1=\"be proud to be an indian\";\n        char ch=s1.charAt(s1.indexOf('e'));\n        int count = 0; \n        for(int i=0;i&lt;s1.length();i++) {\n            if(s1.charAt(i)=='e'){\n                System.out.println(\"number of E:==\"+ch);\n                count++;\n            }\n        }\n        System.out.println(\"Total count of E:==\"+count);\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15102521,"reputation":455,"user_id":11064188,"display_name":"Nirvana"},"score":0,"creation_date":1630309144,"post_id":48162284,"comment_id":121911535,"body_markdown":"please do not put the explanation in code block","body":"please do not put the explanation in code block"}],"tags":[],"owner":{"account_id":3185513,"reputation":74,"user_id":5126104,"display_name":"Nandu cg"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695754699,"creation_date":1515477934,"answer_id":48162284,"question_id":506105,"body_markdown":"You can use this code. It will check the char is present or not. If it is present then the return value is &gt;= 0 otherwise it&#39;s -1. Here I am printing alphabets that is not present in the input.\r\n\r\n    import java.util.Scanner;\r\n    public class Test {\r\n        public static void letters()\r\n        {\r\n    \t     System.out.println(&quot;Enter input char&quot;);\r\n             Scanner sc = new Scanner(System.in);\r\n             String input = sc.next();\r\n             System.out.println(&quot;Output : &quot;);\r\n            for (char alphabet = &#39;A&#39;; alphabet &lt;= &#39;Z&#39;; alphabet++) {\r\n        \t    if (input.toUpperCase().indexOf(alphabet) &lt; 0) \r\n        \t        System.out.print(alphabet + &quot; &quot;);\r\n            }\r\n        }\r\n        public static void main(String[] args) {\r\n        \tletters();\r\n    \t}\r\n    }\r\n\r\n**Ouput Example**\r\n\r\n    Enter input char\r\n    nandu\r\n    Output : \r\n    B C E F G H I J K L M O P Q R S T V W X Y Z","title":"How can I check if a single character appears in a string?","body":"<p>You can use this code. It will check the char is present or not. If it is present then the return value is &gt;= 0 otherwise it's -1. Here I am printing alphabets that is not present in the input.</p>\n<pre><code>import java.util.Scanner;\npublic class Test {\n    public static void letters()\n    {\n         System.out.println(&quot;Enter input char&quot;);\n         Scanner sc = new Scanner(System.in);\n         String input = sc.next();\n         System.out.println(&quot;Output : &quot;);\n        for (char alphabet = 'A'; alphabet &lt;= 'Z'; alphabet++) {\n            if (input.toUpperCase().indexOf(alphabet) &lt; 0) \n                System.out.print(alphabet + &quot; &quot;);\n        }\n    }\n    public static void main(String[] args) {\n        letters();\n    }\n}\n</code></pre>\n<p><strong>Ouput Example</strong></p>\n<pre><code>Enter input char\nnandu\nOutput : \nB C E F G H I J K L M O P Q R S T V W X Y Z\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9330342,"reputation":954,"user_id":6926281,"accept_rate":67,"display_name":"Halfacht"},"comment_count":0,"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1522156456,"creation_date":1522156456,"answer_id":49513868,"question_id":506105,"body_markdown":"You can use 2 methods from the `String` class.\r\n\r\n   - [**`String.contains()`**][1] which checks if the string contains a specified sequence of char values\r\n   - [**`String.indexOf()`**][2] which returns the index within the string of the first occurence of the specified character or substring or returns -1 if the character is not found (there are 4 variations of this method)\r\n\r\nMethod 1:\r\n\r\n    String myString = &quot;foobar&quot;;\r\n    if (myString.contains(&quot;x&quot;) {\r\n        // Do something.\r\n    }\r\n\r\nMethod 2:\r\n\r\n    String myString = &quot;foobar&quot;;\r\n    if (myString.indexOf(&quot;x&quot;) &gt;= 0 {\r\n        // Do something.\r\n    }\r\n\r\n\r\nLinks by: [Zach Scrivena][3]\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)\r\n  [3]: https://stackoverflow.com/users/20029/zach-scrivena\r\n\r\n","title":"How can I check if a single character appears in a string?","body":"<p>You can use 2 methods from the <code>String</code> class.</p>\n\n<ul>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#contains(java.lang.CharSequence)\" rel=\"noreferrer\"><strong><code>String.contains()</code></strong></a> which checks if the string contains a specified sequence of char values</li>\n<li><a href=\"http://java.sun.com/javase/6/docs/api/java/lang/String.html#indexOf(int)\" rel=\"noreferrer\"><strong><code>String.indexOf()</code></strong></a> which returns the index within the string of the first occurence of the specified character or substring or returns -1 if the character is not found (there are 4 variations of this method)</li>\n</ul>\n\n<p>Method 1:</p>\n\n<pre><code>String myString = \"foobar\";\nif (myString.contains(\"x\") {\n    // Do something.\n}\n</code></pre>\n\n<p>Method 2:</p>\n\n<pre><code>String myString = \"foobar\";\nif (myString.indexOf(\"x\") &gt;= 0 {\n    // Do something.\n}\n</code></pre>\n\n<p>Links by: <a href=\"https://stackoverflow.com/users/20029/zach-scrivena\">Zach Scrivena</a></p>\n"},{"comments":[{"owner":{"account_id":266943,"reputation":14507,"user_id":554807,"accept_rate":79,"display_name":"GreenAsJade"},"score":0,"creation_date":1567571151,"post_id":49514009,"comment_id":101997047,"body_markdown":"Why do you have  `&amp;&amp; string.lastIndexOf(character) != index`","body":"Why do you have  <code>&amp;&amp; string.lastIndexOf(character) != index</code>"}],"tags":[],"owner":{"account_id":1533854,"reputation":904,"user_id":1430390,"accept_rate":8,"display_name":"Toochka"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1594727365,"creation_date":1522156816,"answer_id":49514009,"question_id":506105,"body_markdown":"Is the below what you were looking for?\n\n    int index = string.indexOf(character);\n    return index != -1;","title":"How can I check if a single character appears in a string?","body":"<p>Is the below what you were looking for?</p>\n<pre><code>int index = string.indexOf(character);\nreturn index != -1;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5710109,"reputation":4305,"user_id":4512411,"display_name":"Dhyey"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1562143542,"creation_date":1562143542,"answer_id":56866220,"question_id":506105,"body_markdown":"You won&#39;t be able to check if char appears at all in some string without atleast going over the string once using loop / recursion ( the built-in methods like indexOf also use a loop )\r\n\r\nIf the no. of times you look up if a char is in string *x* is more way more than the length of the string than I would recommend using a [Set](https://docs.oracle.com/javase/7/docs/api/java/util/Set.html) data structure as that would be more efficient than simply using `indexOf`\r\n\r\n```\r\nString s = &quot;abc&quot;;\r\n\r\n// Build a set so we can check if character exists in constant time O(1)\r\nSet&lt;Character&gt; set = new HashSet&lt;&gt;();\r\nint len = s.length();\r\nfor(int i = 0; i &lt; len; i++) set.add(s.charAt(i));\r\n\r\n// Now we can check without the need of a loop\r\n// contains method of set doesn&#39;t use a loop unlike string&#39;s contains method\r\nset.contains(&#39;a&#39;) // true\r\nset.contains(&#39;z&#39;) // false\r\n```\r\n\r\nUsing set you will be able to check if character exists in a string in **constant time** O(1) but you will also use additional memory ( Space complexity will be O(n) ).","title":"How can I check if a single character appears in a string?","body":"<p>You won't be able to check if char appears at all in some string without atleast going over the string once using loop / recursion ( the built-in methods like indexOf also use a loop )</p>\n\n<p>If the no. of times you look up if a char is in string <em>x</em> is more way more than the length of the string than I would recommend using a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Set.html\" rel=\"nofollow noreferrer\">Set</a> data structure as that would be more efficient than simply using <code>indexOf</code></p>\n\n<pre><code>String s = \"abc\";\n\n// Build a set so we can check if character exists in constant time O(1)\nSet&lt;Character&gt; set = new HashSet&lt;&gt;();\nint len = s.length();\nfor(int i = 0; i &lt; len; i++) set.add(s.charAt(i));\n\n// Now we can check without the need of a loop\n// contains method of set doesn't use a loop unlike string's contains method\nset.contains('a') // true\nset.contains('z') // false\n</code></pre>\n\n<p>Using set you will be able to check if character exists in a string in <strong>constant time</strong> O(1) but you will also use additional memory ( Space complexity will be O(n) ).</p>\n"},{"tags":[],"owner":{"account_id":2976512,"reputation":3160,"user_id":2527458,"accept_rate":36,"display_name":"Majid Hajibaba"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596957918,"creation_date":1596957918,"answer_id":63323603,"question_id":506105,"body_markdown":"If you see the source code of **indexOf** in JAVA:\r\n\r\n```\r\npublic int indexOf(int ch, int fromIndex) {\r\n\r\n        final int max = value.length;\r\n\r\n        if (fromIndex &lt; 0) {\r\n\r\n            fromIndex = 0;\r\n\r\n        } else if (fromIndex &gt;= max) {\r\n\r\n            // Note: fromIndex might be near -1&gt;&gt;&gt;1.\r\n\r\n            return -1;\r\n\r\n        }\r\n\r\n\r\n        if (ch &lt; Character.MIN_SUPPLEMENTARY_CODE_POINT) {\r\n\r\n            // handle most cases here (ch is a BMP code point or a\r\n\r\n            // negative value (invalid code point))\r\n\r\n            final char[] value = this.value;\r\n\r\n            for (int i = fromIndex; i &lt; max; i++) {\r\n\r\n                if (value[i] == ch) {\r\n\r\n                    return i;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return -1;\r\n\r\n        } else {\r\n\r\n            return indexOfSupplementary(ch, fromIndex);\r\n\r\n        }\r\n\r\n    }\r\n```\r\nyou can see it uses a for loop for finding a character. Note that each *indexOf* you may use in your code, is equal to one loop.\r\n\r\n**So, it is unavoidable to use loop for a single character.** \r\n\r\nHowever, if you want to find a special string with more different forms, use useful libraries such as `util.regex`, it deploys stronger algorithm to match a character or a  string pattern with *Regular Expressions*. For example to find an email in a string:\r\n\r\n```\r\nString regex = &quot;^(.+)@(.+)$&quot;;\r\n \r\nPattern pattern = Pattern.compile(regex);\r\nMatcher matcher = pattern.matcher(email);\r\n```\r\n\r\nIf you don&#39;t like to use regex, just use a loop and `charAt` and try to cover all cases in one loop.\r\n\r\nBe careful recursive methods has more overhead than loop, so it&#39;s not recommended. ","title":"How can I check if a single character appears in a string?","body":"<p>If you see the source code of <strong>indexOf</strong> in JAVA:</p>\n<pre><code>public int indexOf(int ch, int fromIndex) {\n\n        final int max = value.length;\n\n        if (fromIndex &lt; 0) {\n\n            fromIndex = 0;\n\n        } else if (fromIndex &gt;= max) {\n\n            // Note: fromIndex might be near -1&gt;&gt;&gt;1.\n\n            return -1;\n\n        }\n\n\n        if (ch &lt; Character.MIN_SUPPLEMENTARY_CODE_POINT) {\n\n            // handle most cases here (ch is a BMP code point or a\n\n            // negative value (invalid code point))\n\n            final char[] value = this.value;\n\n            for (int i = fromIndex; i &lt; max; i++) {\n\n                if (value[i] == ch) {\n\n                    return i;\n\n                }\n\n            }\n\n            return -1;\n\n        } else {\n\n            return indexOfSupplementary(ch, fromIndex);\n\n        }\n\n    }\n</code></pre>\n<p>you can see it uses a for loop for finding a character. Note that each <em>indexOf</em> you may use in your code, is equal to one loop.</p>\n<p><strong>So, it is unavoidable to use loop for a single character.</strong></p>\n<p>However, if you want to find a special string with more different forms, use useful libraries such as <code>util.regex</code>, it deploys stronger algorithm to match a character or a  string pattern with <em>Regular Expressions</em>. For example to find an email in a string:</p>\n<pre><code>String regex = &quot;^(.+)@(.+)$&quot;;\n \nPattern pattern = Pattern.compile(regex);\nMatcher matcher = pattern.matcher(email);\n</code></pre>\n<p>If you don't like to use regex, just use a loop and <code>charAt</code> and try to cover all cases in one loop.</p>\n<p>Be careful recursive methods has more overhead than loop, so it's not recommended.</p>\n"},{"comments":[{"owner":{"account_id":1449510,"reputation":48182,"user_id":1366871,"accept_rate":100,"display_name":"dreamcrash"},"score":2,"creation_date":1615845777,"post_id":66324429,"comment_id":117813912,"body_markdown":"that is a very happy answer :)","body":"that is a very happy answer :)"},{"owner":{"account_id":441661,"reputation":86528,"user_id":831878,"accept_rate":92,"display_name":"Ray Toal"},"score":0,"creation_date":1658542639,"post_id":66324429,"comment_id":129084105,"body_markdown":"Best answer I&#39;ve read in quite a while, well done","body":"Best answer I&#39;ve read in quite a while, well done"}],"tags":[],"owner":{"account_id":20511313,"reputation":2360,"user_id":15102459,"display_name":"Thiyanesh"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1616455596,"creation_date":1614033270,"answer_id":66324429,"question_id":506105,"body_markdown":"`String.contains(String)` or `String.indexOf(String)` - suggested\r\n\r\n```java\r\n&quot;abc&quot;.contains(&quot;Z&quot;); // false - correct\r\n&quot;zzzz&quot;.contains(&quot;Z&quot;); // false - correct\r\n&quot;Z&quot;.contains(&quot;Z&quot;); // true - correct\r\n&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128512;&quot;); // true - correct\r\n&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128514;&quot;); // false - correct\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128512;&quot;); // 0 - correct\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;); // -1 - correct\r\n```\r\n\r\n`String.indexOf(int)` and carefully considered `String.indexOf(char)` with char to `int` widening\r\n```java\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128512;&quot;.charAt(0)); // 0 though incorrect usage has correct output due to portion of correct data\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.charAt(0)); // 0 -- incorrect usage and ambiguous result\r\n&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.codePointAt(0)); // -1 -- correct usage and correct output\r\n```\r\n\r\n\r\n## The discussions around character is ambiguous in Java world\r\n\r\n### can the value of `char` or `Character` considered as single character?\r\n**No**. In the context of unicode characters, `char` or `Character` can sometimes be `part of a single character` and should not be treated as `a complete single character` logically.\r\n\r\n### if not, what should be considered as single character (logically)?\r\nAny system supporting character encodings for Unicode characters should consider unicode&#39;s codepoint as single character. \r\n\r\nSo Java should do that very clear &amp; loud rather than exposing too much of internal implementation details to users. \r\n\r\n`String` class is bad at abstraction (though it requires confusingly good amount of `understanding of its encapsulations to understand the abstraction &#128530;&#128530;&#128530;` and hence an `anti-pattern`).\r\n\r\n### How is it different from general `char` usage?\r\n`char` can be only be mapped to a character in Basic Multilingual Plane.\r\n\r\nOnly `codePoint - int` can cover the complete range of Unicode characters.\r\n\r\n### Why is this difference?\r\n`char` is internally treated as `16-bit` unsigned value and could not represent all the unicode characters using UTF-16 internal representation using only `2-bytes`. Sometimes, values in a `16-bit` range have to be combined with another `16-bit` value to correctly define character.\r\n\r\nWithout getting too verbose, the usage of `indexOf`, `charAt`, `length` and such methods should be more explicit. Sincerely hoping Java will add new `UnicodeString` and `UnicodeCharacter` classes with clearly defined  abstractions.\r\n\r\n### Reason to prefer `contains` and not `indexOf(int)`\r\n1. Practically there are many code flows that treat a logical character as `char` in java.\r\n2. In Unicode context, `char` is not sufficient\r\n3. Though the `indexOf` takes in an `int`, `char` to `int` conversion masks this from the user and user might do something like `str.indexOf(someotherstr.charAt(0))`(unless the user is aware of the exact context)\r\n4. So, treating everything as `CharSequence` (aka `String`) is better\r\n\r\n```java\r\n    public static void main(String[] args) {\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128512;&quot;.charAt(0))); // 0 though incorrect usage has correct output due to portion of correct data\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.charAt(0))); // 0 -- incorrect usage and ambiguous result\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.indexOf(&quot;&#128514;&quot;.codePointAt(0))); // -1 -- correct usage and correct output\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128512;&quot;)); // true - correct\r\n        System.out.println(&quot;&#128512;and&#128512;&quot;.contains(&quot;&#128514;&quot;)); // false - correct\r\n    }\r\n```\r\n\r\n## Semantics\r\n1. `char` can handle most of the practical use cases. Still its better to use codepoints within programming environment for future extensibility.\r\n2. `codepoint` should handle nearly all of the technical use cases around encodings.\r\n3. Still, [Grapheme Clusters](https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries) falls out of the scope of `codepoint` level of abstraction.\r\n4. Storage layers can choose `char` interface if `int`s are too costly(doubled). Unless storage cost is the only metric, its still better to use `codepoint`. Also, its better to treat storage as `byte` and delegate semantics to business logic built around storage.\r\n5. Semantics can be abstracted at multiple levels. `codepoint` should become lowest level of interface and other semantics can be built around `codepoint` in runtime environment.\r\n","title":"How can I check if a single character appears in a string?","body":"<p><code>String.contains(String)</code> or <code>String.indexOf(String)</code> - suggested</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;abc&quot;.contains(&quot;Z&quot;); // false - correct\n&quot;zzzz&quot;.contains(&quot;Z&quot;); // false - correct\n&quot;Z&quot;.contains(&quot;Z&quot;); // true - correct\n&quot;and&quot;.contains(&quot;&quot;); // true - correct\n&quot;and&quot;.contains(&quot;&quot;); // false - correct\n&quot;and&quot;.indexOf(&quot;&quot;); // 0 - correct\n&quot;and&quot;.indexOf(&quot;&quot;); // -1 - correct\n</code></pre>\n<p><code>String.indexOf(int)</code> and carefully considered <code>String.indexOf(char)</code> with char to <code>int</code> widening</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;and&quot;.indexOf(&quot;&quot;.charAt(0)); // 0 though incorrect usage has correct output due to portion of correct data\n&quot;and&quot;.indexOf(&quot;&quot;.charAt(0)); // 0 -- incorrect usage and ambiguous result\n&quot;and&quot;.indexOf(&quot;&quot;.codePointAt(0)); // -1 -- correct usage and correct output\n</code></pre>\n<h2>The discussions around character is ambiguous in Java world</h2>\n<h3>can the value of <code>char</code> or <code>Character</code> considered as single character?</h3>\n<p><strong>No</strong>. In the context of unicode characters, <code>char</code> or <code>Character</code> can sometimes be <code>part of a single character</code> and should not be treated as <code>a complete single character</code> logically.</p>\n<h3>if not, what should be considered as single character (logically)?</h3>\n<p>Any system supporting character encodings for Unicode characters should consider unicode's codepoint as single character.</p>\n<p>So Java should do that very clear &amp; loud rather than exposing too much of internal implementation details to users.</p>\n<p><code>String</code> class is bad at abstraction (though it requires confusingly good amount of <code>understanding of its encapsulations to understand the abstraction </code> and hence an <code>anti-pattern</code>).</p>\n<h3>How is it different from general <code>char</code> usage?</h3>\n<p><code>char</code> can be only be mapped to a character in Basic Multilingual Plane.</p>\n<p>Only <code>codePoint - int</code> can cover the complete range of Unicode characters.</p>\n<h3>Why is this difference?</h3>\n<p><code>char</code> is internally treated as <code>16-bit</code> unsigned value and could not represent all the unicode characters using UTF-16 internal representation using only <code>2-bytes</code>. Sometimes, values in a <code>16-bit</code> range have to be combined with another <code>16-bit</code> value to correctly define character.</p>\n<p>Without getting too verbose, the usage of <code>indexOf</code>, <code>charAt</code>, <code>length</code> and such methods should be more explicit. Sincerely hoping Java will add new <code>UnicodeString</code> and <code>UnicodeCharacter</code> classes with clearly defined  abstractions.</p>\n<h3>Reason to prefer <code>contains</code> and not <code>indexOf(int)</code></h3>\n<ol>\n<li>Practically there are many code flows that treat a logical character as <code>char</code> in java.</li>\n<li>In Unicode context, <code>char</code> is not sufficient</li>\n<li>Though the <code>indexOf</code> takes in an <code>int</code>, <code>char</code> to <code>int</code> conversion masks this from the user and user might do something like <code>str.indexOf(someotherstr.charAt(0))</code>(unless the user is aware of the exact context)</li>\n<li>So, treating everything as <code>CharSequence</code> (aka <code>String</code>) is better</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>    public static void main(String[] args) {\n        System.out.println(&quot;and&quot;.indexOf(&quot;&quot;.charAt(0))); // 0 though incorrect usage has correct output due to portion of correct data\n        System.out.println(&quot;and&quot;.indexOf(&quot;&quot;.charAt(0))); // 0 -- incorrect usage and ambiguous result\n        System.out.println(&quot;and&quot;.indexOf(&quot;&quot;.codePointAt(0))); // -1 -- correct usage and correct output\n        System.out.println(&quot;and&quot;.contains(&quot;&quot;)); // true - correct\n        System.out.println(&quot;and&quot;.contains(&quot;&quot;)); // false - correct\n    }\n</code></pre>\n<h2>Semantics</h2>\n<ol>\n<li><code>char</code> can handle most of the practical use cases. Still its better to use codepoints within programming environment for future extensibility.</li>\n<li><code>codepoint</code> should handle nearly all of the technical use cases around encodings.</li>\n<li>Still, <a href=\"https://unicode.org/reports/tr29/#Grapheme_Cluster_Boundaries\" rel=\"nofollow noreferrer\">Grapheme Clusters</a> falls out of the scope of <code>codepoint</code> level of abstraction.</li>\n<li>Storage layers can choose <code>char</code> interface if <code>int</code>s are too costly(doubled). Unless storage cost is the only metric, its still better to use <code>codepoint</code>. Also, its better to treat storage as <code>byte</code> and delegate semantics to business logic built around storage.</li>\n<li>Semantics can be abstracted at multiple levels. <code>codepoint</code> should become lowest level of interface and other semantics can be built around <code>codepoint</code> in runtime environment.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":13336494,"reputation":706,"user_id":9626186,"display_name":"Code with Benji"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1664265622,"creation_date":1664265622,"answer_id":73864206,"question_id":506105,"body_markdown":"how about one uses this ;\r\n\r\n    let text = &quot;Hello world, welcome to the universe.&quot;;\r\n    let result = text.includes(&quot;world&quot;);\r\n    console.log(result) ....// true\r\n\r\nthe result will be a `true` or `false`\r\n\r\nthis always works for me","title":"How can I check if a single character appears in a string?","body":"<p>how about one uses this ;</p>\n<pre><code>let text = &quot;Hello world, welcome to the universe.&quot;;\nlet result = text.includes(&quot;world&quot;);\nconsole.log(result) ....// true\n</code></pre>\n<p>the result will be a <code>true</code> or <code>false</code></p>\n<p>this always works for me</p>\n"}],"owner":{"account_id":13492,"reputation":27641,"user_id":1390354,"accept_rate":91,"display_name":"barfoon"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1269495,"favorite_count":0,"down_vote_count":5,"up_vote_count":287,"accepted_answer_id":506107,"answer_count":16,"score":282,"last_activity_date":1695754699,"creation_date":1233639522,"question_id":506105,"body_markdown":"In Java is there a way to check the condition:\r\n\r\n&quot;Does this single character appear at all in string x&quot;\r\n\r\n**without** using a loop?\r\n","title":"How can I check if a single character appears in a string?","body":"<p>In Java is there a way to check the condition:</p>\n\n<p>\"Does this single character appear at all in string x\"</p>\n\n<p><strong>without</strong> using a loop?</p>\n"},{"tags":["java","android","xml","android-studio","xml-namespaces"],"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695749182,"post_id":77181994,"comment_id":136065061,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":21741636,"reputation":1162,"user_id":16048914,"display_name":"David Weber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695753572,"creation_date":1695753572,"answer_id":77182659,"question_id":77181994,"body_markdown":"Please try &quot;invalidate caches and restart&quot;.\r\nThis should solve this problem.","title":"my android studio res layout xml files name showing duplicate","body":"<p>Please try &quot;invalidate caches and restart&quot;.\nThis should solve this problem.</p>\n"},{"tags":[],"owner":{"account_id":28779899,"reputation":61,"user_id":22041725,"display_name":"Shejan Mahamud"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695754468,"creation_date":1695754468,"answer_id":77182729,"question_id":77181994,"body_markdown":"Try Following Steps: \r\n\r\n\r\n\r\n    Clean project &gt; Invalidate caches and restart &gt; Rebuild Project\r\n\r\n ","title":"my android studio res layout xml files name showing duplicate","body":"<p>Try Following Steps:</p>\n<pre><code>Clean project &gt; Invalidate caches and restart &gt; Rebuild Project\n</code></pre>\n"}],"owner":{"account_id":28128069,"reputation":1,"user_id":21493091,"display_name":"Muhammad Taha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695754468,"creation_date":1695746983,"question_id":77181994,"body_markdown":"[Android studio xml file name problem](https://i.stack.imgur.com/yB02n.png)\r\n\r\nmy android studio res layout xml files name showing duplicate. Also my drawable file name showing two times. for example: main_activity.xmlmain_activity.xml. I also update my IDE but this weird thing is not gone.","title":"my android studio res layout xml files name showing duplicate","body":"<p><a href=\"https://i.stack.imgur.com/yB02n.png\" rel=\"nofollow noreferrer\">Android studio xml file name problem</a></p>\n<p>my android studio res layout xml files name showing duplicate. Also my drawable file name showing two times. for example: main_activity.xmlmain_activity.xml. I also update my IDE but this weird thing is not gone.</p>\n"},{"tags":["java","android","android-videoview"],"comments":[{"owner":{"account_id":251969,"reputation":13463,"user_id":529691,"display_name":"JoxTraex"},"score":0,"creation_date":1478303578,"post_id":40433248,"comment_id":68115056,"body_markdown":"Did you read logcat to see if it has any explanation? Did you confirm that the device can even go to that url? Are you sure its not session protected and non-public?","body":"Did you read logcat to see if it has any explanation? Did you confirm that the device can even go to that url? Are you sure its not session protected and non-public?"},{"owner":{"account_id":9191552,"reputation":737,"user_id":6831883,"accept_rate":60,"display_name":"Aligator"},"score":1,"creation_date":1478303958,"post_id":40433248,"comment_id":68115144,"body_markdown":"I&#39;ve tried another one online and one video from local ... no one works","body":"I&#39;ve tried another one online and one video from local ... no one works"},{"owner":{"account_id":251969,"reputation":13463,"user_id":529691,"display_name":"JoxTraex"},"score":0,"creation_date":1478304327,"post_id":40433248,"comment_id":68115216,"body_markdown":"confirm by going that url on your browser ON THE DEVICE to confirm what the behavior is. You need to see if its even a valid URL that you can access in a previously un-authed session. Don&#39;t assume just because it load on the web that it&#39;ll load for you, sessions make a big difference.","body":"confirm by going that url on your browser ON THE DEVICE to confirm what the behavior is. You need to see if its even a valid URL that you can access in a previously un-authed session. Don&#39;t assume just because it load on the web that it&#39;ll load for you, sessions make a big difference."},{"owner":{"account_id":9191552,"reputation":737,"user_id":6831883,"accept_rate":60,"display_name":"Aligator"},"score":0,"creation_date":1478305239,"post_id":40433248,"comment_id":68115413,"body_markdown":"in browser works fine.","body":"in browser works fine."}],"answers":[{"comments":[{"owner":{"account_id":9191552,"reputation":737,"user_id":6831883,"accept_rate":60,"display_name":"Aligator"},"score":0,"creation_date":1478339326,"post_id":40435356,"comment_id":68120960,"body_markdown":"I add your code and still not works :/ http://pastebin.com/gGej1GR0 ... I edit my post and add current layout .. It may helps to solve it","body":"I add your code and still not works :/ <a href=\"http://pastebin.com/gGej1GR0\" rel=\"nofollow noreferrer\">pastebin.com/gGej1GR0</a> ... I edit my post and add current layout .. It may helps to solve it"},{"owner":{"account_id":13479916,"reputation":529,"user_id":9725562,"display_name":"Anshul1507"},"score":0,"creation_date":1586513195,"post_id":40435356,"comment_id":108159154,"body_markdown":"It is not allowing youtube links to play! Error states like &quot;Can&#39;t play this video.&quot;","body":"It is not allowing youtube links to play! Error states like &quot;Can&#39;t play this video.&quot;"},{"owner":{"account_id":14000949,"reputation":344,"user_id":10112590,"display_name":"subrata sharma"},"score":2,"creation_date":1586593603,"post_id":40435356,"comment_id":108186828,"body_markdown":"@Anshul1507 if u want to play a youtube video, u can check this https://pierfrancescosoffritti.github.io/android-youtube-player/","body":"@Anshul1507 if u want to play a youtube video, u can check this <a href=\"https://pierfrancescosoffritti.github.io/android-youtube-player/\" rel=\"nofollow noreferrer\">pierfrancescosoffritti.github.io/android-youtube-player</a>"},{"owner":{"account_id":9086851,"reputation":1459,"user_id":6764479,"accept_rate":38,"display_name":"Vishnu M Menon"},"score":0,"creation_date":1589474446,"post_id":40435356,"comment_id":109315983,"body_markdown":"@Anshul1507 You can use Youtube Android Player Api. Check out https://developers.google.com/youtube/android/player","body":"@Anshul1507 You can use Youtube Android Player Api. Check out <a href=\"https://developers.google.com/youtube/android/player\" rel=\"nofollow noreferrer\">developers.google.com/youtube/android/player</a>"},{"owner":{"account_id":13479916,"reputation":529,"user_id":9725562,"display_name":"Anshul1507"},"score":1,"creation_date":1589552202,"post_id":40435356,"comment_id":109347695,"body_markdown":"@subratasharma yes, i used that one after googling, thanks!","body":"@subratasharma yes, i used that one after googling, thanks!"},{"owner":{"account_id":13479916,"reputation":529,"user_id":9725562,"display_name":"Anshul1507"},"score":1,"creation_date":1589552229,"post_id":40435356,"comment_id":109347714,"body_markdown":"@subratasharma yes, i used that one after googling, thanks!","body":"@subratasharma yes, i used that one after googling, thanks!"},{"owner":{"account_id":8778647,"reputation":2376,"user_id":6563022,"accept_rate":33,"display_name":"EdgeDev"},"score":8,"creation_date":1590769143,"post_id":40435356,"comment_id":109816005,"body_markdown":"saying &quot;can&#39;t  play this video&quot;","body":"saying &quot;can&#39;t  play this video&quot;"},{"owner":{"account_id":10647346,"reputation":5559,"user_id":7839518,"display_name":"Tonnie"},"score":0,"creation_date":1624471083,"post_id":40435356,"comment_id":120371074,"body_markdown":"Wow, [Android-Youtube-Player](https://github.com/PierfrancescoSoffritti/android-youtube-player) worked like charm. Thx Lots @subratasharma","body":"Wow, <a href=\"https://github.com/PierfrancescoSoffritti/android-youtube-player\" rel=\"nofollow noreferrer\">Android-Youtube-Player</a> worked like charm. Thx Lots @subratasharma"},{"owner":{"account_id":6270988,"reputation":1765,"user_id":4875245,"accept_rate":40,"display_name":"GS Nayma"},"score":0,"creation_date":1644293403,"post_id":40435356,"comment_id":125561689,"body_markdown":"just change http to https in the same url and it will start working.","body":"just change http to https in the same url and it will start working."}],"tags":[],"owner":{"account_id":9086851,"reputation":1459,"user_id":6764479,"accept_rate":38,"display_name":"Vishnu M Menon"},"comment_count":9,"down_vote_count":1,"up_vote_count":48,"is_accepted":true,"score":47,"last_activity_date":1595485201,"creation_date":1478326553,"answer_id":40435356,"question_id":40433248,"body_markdown":"Try this code.. This code works perfectly for me..\r\n\r\n```java\r\nVideoView videoView = findViewById(R.id.videoView);\r\nvideoView.setVideoPath(&quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;);\r\nvideoView.start();\r\n```","title":"Play video from url in VideoView [Android]","body":"<p>Try this code.. This code works perfectly for me..</p>\n<pre class=\"lang-java prettyprint-override\"><code>VideoView videoView = findViewById(R.id.videoView);\nvideoView.setVideoPath(&quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;);\nvideoView.start();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5979444,"reputation":41,"user_id":6108296,"display_name":"Alex Karamyshev"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1515763923,"creation_date":1515758447,"answer_id":48225908,"question_id":40433248,"body_markdown":"As I know you shouldn&#39;t use `wrap_content` for `VideoView` height.\r\n`VideoView` didn&#39;t resize itself after video cached","title":"Play video from url in VideoView [Android]","body":"<p>As I know you shouldn't use <code>wrap_content</code> for <code>VideoView</code> height.\n<code>VideoView</code> didn't resize itself after video cached</p>\n"},{"tags":[],"owner":{"account_id":13950334,"reputation":31,"user_id":10073992,"display_name":"Devolper Engg"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1531466897,"creation_date":1531466854,"answer_id":51319832,"question_id":40433248,"body_markdown":"Kindly add Internet permission them Change layout_height wrap_content into match parent.\r\nthis is a code for this problem \r\n\r\n\r\n    public class MainActivity extends Activity {\r\n        private ProgressDialog bar;\r\n        private String path=&quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;;\r\n        private MediaController ctlr;\r\n        private VideoView videoView;\r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            getWindow().setFormat(PixelFormat.TRANSLUCENT);\r\n            setContentView(R.layout.activity_main);\r\n          bar=new ProgressDialog(MainActivity.this);\r\n            bar.setTitle(&quot;Connecting server&quot;);\r\n            bar.setMessage(&quot;Please Wait... &quot;);\r\n            bar.setCancelable(false);\r\n            bar.show();\r\n           if(bar.isShowing()) {\r\n               videoView = findViewById(R.id.v1);\r\n               Uri uri = Uri.parse(path);\r\n               videoView.setVideoURI(uri);\r\n               videoView.start();\r\n               ctlr = new MediaController(this);\r\n               ctlr.setMediaPlayer(videoView);\r\n               videoView.setMediaController(ctlr);\r\n               videoView.requestFocus();\r\n           }\r\n            bar.dismiss();\r\n        }\r\n    }","title":"Play video from url in VideoView [Android]","body":"<p>Kindly add Internet permission them Change layout_height wrap_content into match parent.\nthis is a code for this problem </p>\n\n<pre><code>public class MainActivity extends Activity {\n    private ProgressDialog bar;\n    private String path=\"https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4\";\n    private MediaController ctlr;\n    private VideoView videoView;\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        getWindow().setFormat(PixelFormat.TRANSLUCENT);\n        setContentView(R.layout.activity_main);\n      bar=new ProgressDialog(MainActivity.this);\n        bar.setTitle(\"Connecting server\");\n        bar.setMessage(\"Please Wait... \");\n        bar.setCancelable(false);\n        bar.show();\n       if(bar.isShowing()) {\n           videoView = findViewById(R.id.v1);\n           Uri uri = Uri.parse(path);\n           videoView.setVideoURI(uri);\n           videoView.start();\n           ctlr = new MediaController(this);\n           ctlr.setMediaPlayer(videoView);\n           videoView.setMediaController(ctlr);\n           videoView.requestFocus();\n       }\n        bar.dismiss();\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":15455548,"reputation":1412,"user_id":12485639,"display_name":"Omkar76"},"score":0,"creation_date":1622963999,"post_id":62217502,"comment_id":119938292,"body_markdown":"ohh! I was trying to play from internet without permissions. Thank you!","body":"ohh! I was trying to play from internet without permissions. Thank you!"}],"tags":[],"owner":{"display_name":"user13010293"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1592030804,"creation_date":1591366771,"answer_id":62217502,"question_id":40433248,"body_markdown":"    videoView.setURI(Uri.parse(url));// use methods to set url\r\n    videoView.start();\r\n\r\n\r\nthen accept permission\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot;/&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_WIFI_STATE&quot;/&gt;","title":"Play video from url in VideoView [Android]","body":"<pre><code>videoView.setURI(Uri.parse(url));// use methods to set url\nvideoView.start();\n</code></pre>\n\n<p>then accept permission</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;\n&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\"/&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5105622,"reputation":1756,"user_id":4181630,"display_name":"Hank Chan"},"score":0,"creation_date":1629371021,"post_id":65658402,"comment_id":121671745,"body_markdown":"This should be the top voted answer. I got hamstrung on this for a whole day!","body":"This should be the top voted answer. I got hamstrung on this for a whole day!"},{"owner":{"account_id":6270988,"reputation":1765,"user_id":4875245,"accept_rate":40,"display_name":"GS Nayma"},"score":0,"creation_date":1644293448,"post_id":65658402,"comment_id":125561693,"body_markdown":"yes changing from http to https worked for the same URL.","body":"yes changing from http to https worked for the same URL."}],"tags":[],"owner":{"account_id":18341665,"reputation":91,"user_id":13357778,"display_name":"mickmick"},"comment_count":2,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1610312103,"creation_date":1610312103,"answer_id":65658402,"question_id":40433248,"body_markdown":"For me, changing the URL from \r\n\r\n    &quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\r\n\r\nto:\r\n\r\n    &quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\r\n\r\nmade it work. \r\n\r\nIn other words, I used HTTPS instead of HTTP.\r\n\r\nI used the following code to start the video:\r\n\r\n    final VideoView videoView = findViewById(R.id.videoview); //id in your xml file\r\n    videoView.setVideoURI(Uri.parse(URL)); //the string of the URL mentioned above\r\n    videoView.requestFocus();\r\n    videoView.start();","title":"Play video from url in VideoView [Android]","body":"<p>For me, changing the URL from</p>\n<pre><code>&quot;http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\n</code></pre>\n<p>to:</p>\n<pre><code>&quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;\n</code></pre>\n<p>made it work.</p>\n<p>In other words, I used HTTPS instead of HTTP.</p>\n<p>I used the following code to start the video:</p>\n<pre><code>final VideoView videoView = findViewById(R.id.videoview); //id in your xml file\nvideoView.setVideoURI(Uri.parse(URL)); //the string of the URL mentioned above\nvideoView.requestFocus();\nvideoView.start();\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1435254,"reputation":29439,"user_id":4826457,"display_name":"Suraj Rao"},"score":3,"creation_date":1615874972,"post_id":66649854,"comment_id":117819894,"body_markdown":"Welcome to Stack Overflow! While this code may solve the question, [including an explanation](//meta.stackexchange.com/q/114762) of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please [edit] your answer to add explanations and give an indication of what limitations and assumptions apply.","body":"Welcome to Stack Overflow! While this code may solve the question, <a href=\"//meta.stackexchange.com/q/114762\">including an explanation</a> of how and why this solves the problem would really help to improve the quality of your post, and probably result in more up-votes. Remember that you are answering the question for readers in the future, not just the person asking now. Please <a href=\"https://stackoverflow.com/posts/66649854/edit\">edit</a> your answer to add explanations and give an indication of what limitations and assumptions apply."}],"tags":[],"owner":{"account_id":20935429,"reputation":1,"user_id":15380680,"display_name":"Shilpa Talesara"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1615874951,"creation_date":1615874547,"answer_id":66649854,"question_id":40433248,"body_markdown":"```\r\npublic class ShowVideoActivity extends AppCompatActivity {\r\n    private static final String VIDEO_SAMPLE =\r\n            &quot;https://www.youtube.com/watch?v=HexFqifusOk&amp;list=RDHexFqifusOk&amp;start_radio=1&quot;;\r\n    private VideoView mVideoView;\r\n    private TextView mBufferingTextView;\r\n    // Current playback position (in milliseconds).\r\n    private int mCurrentPosition = 0;\r\n    // Tag for the instance state bundle.\r\n    private static final String PLAYBACK_TIME = &quot;play_time&quot;;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_show_video);\r\n\r\n        mVideoView = findViewById(R.id.videoview);\r\n        mBufferingTextView = findViewById(R.id.buffering_textview);\r\n\r\n        if (savedInstanceState != null) {\r\n            mCurrentPosition = savedInstanceState.getInt(PLAYBACK_TIME);\r\n        }\r\n\r\n        // Set up the media controller widget and attach it to the video view.\r\n        MediaController controller = new MediaController(this);\r\n        controller.setMediaPlayer(mVideoView);\r\n        mVideoView.setMediaController(controller);\r\n    }\r\n\r\n\r\n    @Override\r\n    protected void onStart() {\r\n        super.onStart();\r\n\r\n        // Load the media each time onStart() is called.\r\n        initializePlayer();\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n\r\n        // In Android versions less than N (7.0, API 24), onPause() is the\r\n        // end of the visual lifecycle of the app.  Pausing the video here\r\n        // prevents the sound from continuing to play even after the app\r\n        // disappears.\r\n        //\r\n        // This is not a problem for more recent versions of Android because\r\n        // onStop() is now the end of the visual lifecycle, and that is where\r\n        // most of the app teardown should take place.\r\n        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) {\r\n            mVideoView.pause();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n\r\n        // Media playback takes a lot of resources, so everything should be\r\n        // stopped and released at this time.\r\n        releasePlayer();\r\n    }\r\n\r\n    @Override\r\n    protected void onSaveInstanceState(Bundle outState) {\r\n        super.onSaveInstanceState(outState);\r\n\r\n        // Save the current playback position (in milliseconds) to the\r\n        // instance state bundle.\r\n        outState.putInt(PLAYBACK_TIME, mVideoView.getCurrentPosition());\r\n    }\r\n\r\n    private void initializePlayer() {\r\n        // Show the &quot;Buffering...&quot; message while the video loads.\r\n        mBufferingTextView.setVisibility(VideoView.VISIBLE);\r\n\r\n        // Buffer and decode the video sample.\r\n        Uri videoUri = getMedia(VIDEO_SAMPLE);\r\n        mVideoView.setVideoURI(videoUri);\r\n\r\n        // Listener for onPrepared() event (runs after the media is prepared).\r\n        mVideoView.setOnPreparedListener(\r\n                new MediaPlayer.OnPreparedListener() {\r\n                    @Override\r\n                    public void onPrepared(MediaPlayer mediaPlayer) {\r\n\r\n                        // Hide buffering message.\r\n                        mBufferingTextView.setVisibility(VideoView.INVISIBLE);\r\n\r\n                        // Restore saved position, if available.\r\n                        if (mCurrentPosition &gt; 0) {\r\n                            mVideoView.seekTo(mCurrentPosition);\r\n                        } else {\r\n                            // Skipping to 1 shows the first frame of the video.\r\n                            mVideoView.seekTo(1);\r\n                        }\r\n\r\n                        // Start playing!\r\n                        mVideoView.start();\r\n                    }\r\n                });\r\n\r\n        // Listener for onCompletion() event (runs after media has finished\r\n        // playing).\r\n        mVideoView.setOnCompletionListener(\r\n                new MediaPlayer.OnCompletionListener() {\r\n                    @Override\r\n                    public void onCompletion(MediaPlayer mediaPlayer) {\r\n                        Toast.makeText(ShowVideoActivity.this,\r\n                                &quot;Completed&quot;,\r\n                                Toast.LENGTH_SHORT).show();\r\n\r\n                        // Return the video position to the start.\r\n                        mVideoView.seekTo(0);\r\n                    }\r\n                });\r\n    }\r\n\r\n\r\n    // Release all media-related resources. In a more complicated app this\r\n    // might involve unregistering listeners or releasing audio focus.\r\n    private void releasePlayer() {\r\n        mVideoView.stopPlayback();\r\n    }\r\n\r\n    // Get a Uri for the media sample regardless of whether that sample is\r\n    // embedded in the app resources or available on the internet.\r\n    private Uri getMedia(String mediaName) {\r\n        if (URLUtil.isValidUrl(mediaName)) {\r\n            // Media name is an external URL.\r\n            return Uri.parse(mediaName);\r\n        } else {\r\n\r\n            // you can also put a video file in raw package and get file from there as shown below\r\n\r\n            return Uri.parse(&quot;android.resource://&quot; + getPackageName() +\r\n                    &quot;/raw/&quot; + mediaName);\r\n\r\n\r\n        }\r\n    }\r\n\r\n}\r\n```","title":"Play video from url in VideoView [Android]","body":"<pre><code>public class ShowVideoActivity extends AppCompatActivity {\n    private static final String VIDEO_SAMPLE =\n            &quot;https://www.youtube.com/watch?v=HexFqifusOk&amp;list=RDHexFqifusOk&amp;start_radio=1&quot;;\n    private VideoView mVideoView;\n    private TextView mBufferingTextView;\n    // Current playback position (in milliseconds).\n    private int mCurrentPosition = 0;\n    // Tag for the instance state bundle.\n    private static final String PLAYBACK_TIME = &quot;play_time&quot;;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_show_video);\n\n        mVideoView = findViewById(R.id.videoview);\n        mBufferingTextView = findViewById(R.id.buffering_textview);\n\n        if (savedInstanceState != null) {\n            mCurrentPosition = savedInstanceState.getInt(PLAYBACK_TIME);\n        }\n\n        // Set up the media controller widget and attach it to the video view.\n        MediaController controller = new MediaController(this);\n        controller.setMediaPlayer(mVideoView);\n        mVideoView.setMediaController(controller);\n    }\n\n\n    @Override\n    protected void onStart() {\n        super.onStart();\n\n        // Load the media each time onStart() is called.\n        initializePlayer();\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n\n        // In Android versions less than N (7.0, API 24), onPause() is the\n        // end of the visual lifecycle of the app.  Pausing the video here\n        // prevents the sound from continuing to play even after the app\n        // disappears.\n        //\n        // This is not a problem for more recent versions of Android because\n        // onStop() is now the end of the visual lifecycle, and that is where\n        // most of the app teardown should take place.\n        if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N) {\n            mVideoView.pause();\n        }\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n\n        // Media playback takes a lot of resources, so everything should be\n        // stopped and released at this time.\n        releasePlayer();\n    }\n\n    @Override\n    protected void onSaveInstanceState(Bundle outState) {\n        super.onSaveInstanceState(outState);\n\n        // Save the current playback position (in milliseconds) to the\n        // instance state bundle.\n        outState.putInt(PLAYBACK_TIME, mVideoView.getCurrentPosition());\n    }\n\n    private void initializePlayer() {\n        // Show the &quot;Buffering...&quot; message while the video loads.\n        mBufferingTextView.setVisibility(VideoView.VISIBLE);\n\n        // Buffer and decode the video sample.\n        Uri videoUri = getMedia(VIDEO_SAMPLE);\n        mVideoView.setVideoURI(videoUri);\n\n        // Listener for onPrepared() event (runs after the media is prepared).\n        mVideoView.setOnPreparedListener(\n                new MediaPlayer.OnPreparedListener() {\n                    @Override\n                    public void onPrepared(MediaPlayer mediaPlayer) {\n\n                        // Hide buffering message.\n                        mBufferingTextView.setVisibility(VideoView.INVISIBLE);\n\n                        // Restore saved position, if available.\n                        if (mCurrentPosition &gt; 0) {\n                            mVideoView.seekTo(mCurrentPosition);\n                        } else {\n                            // Skipping to 1 shows the first frame of the video.\n                            mVideoView.seekTo(1);\n                        }\n\n                        // Start playing!\n                        mVideoView.start();\n                    }\n                });\n\n        // Listener for onCompletion() event (runs after media has finished\n        // playing).\n        mVideoView.setOnCompletionListener(\n                new MediaPlayer.OnCompletionListener() {\n                    @Override\n                    public void onCompletion(MediaPlayer mediaPlayer) {\n                        Toast.makeText(ShowVideoActivity.this,\n                                &quot;Completed&quot;,\n                                Toast.LENGTH_SHORT).show();\n\n                        // Return the video position to the start.\n                        mVideoView.seekTo(0);\n                    }\n                });\n    }\n\n\n    // Release all media-related resources. In a more complicated app this\n    // might involve unregistering listeners or releasing audio focus.\n    private void releasePlayer() {\n        mVideoView.stopPlayback();\n    }\n\n    // Get a Uri for the media sample regardless of whether that sample is\n    // embedded in the app resources or available on the internet.\n    private Uri getMedia(String mediaName) {\n        if (URLUtil.isValidUrl(mediaName)) {\n            // Media name is an external URL.\n            return Uri.parse(mediaName);\n        } else {\n\n            // you can also put a video file in raw package and get file from there as shown below\n\n            return Uri.parse(&quot;android.resource://&quot; + getPackageName() +\n                    &quot;/raw/&quot; + mediaName);\n\n\n        }\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10238122,"reputation":16,"user_id":7556356,"display_name":"Mohammad Mostafavi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695754336,"creation_date":1695754336,"answer_id":77182720,"question_id":40433248,"body_markdown":"at the first you need to set internet permission in the AndroidManifest.xml file like below:\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n\r\nand then for playing video from url in android use the below structure for more readable I commented the code:)\r\n\r\n        // Your Video URL\r\n        String videoUrl = &quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;;\r\n\r\n        // on below line we are initializing our variables.\r\n        videoView = findViewById(R.id.videoView);\r\n\r\n\r\n        // Uri object to refer the\r\n        // resource from the videoUrl\r\n        Uri uri = Uri.parse(videoUrl);\r\n\r\n        // sets the resource from the\r\n        // videoUrl to the videoView\r\n        videoView.setVideoURI(uri);\r\n\r\n        // creating object of\r\n        // media controller class\r\n        MediaController mediaController = new MediaController(this);\r\n\r\n        // sets the anchor view\r\n        // anchor view for the videoView\r\n        mediaController.setAnchorView(videoView);\r\n\r\n        // sets the media player to the videoView\r\n        mediaController.setMediaPlayer(videoView);\r\n\r\n        // sets the media controller to the videoView\r\n        videoView.setMediaController(mediaController);\r\n\r\n        // starts the video\r\n        videoView.start();\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/hr3Yy.jpg","title":"Play video from url in VideoView [Android]","body":"<p>at the first you need to set internet permission in the AndroidManifest.xml file like below:</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n</code></pre>\n<p>and then for playing video from url in android use the below structure for more readable I commented the code:)</p>\n<pre><code>    // Your Video URL\n    String videoUrl = &quot;https://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4&quot;;\n\n    // on below line we are initializing our variables.\n    videoView = findViewById(R.id.videoView);\n\n\n    // Uri object to refer the\n    // resource from the videoUrl\n    Uri uri = Uri.parse(videoUrl);\n\n    // sets the resource from the\n    // videoUrl to the videoView\n    videoView.setVideoURI(uri);\n\n    // creating object of\n    // media controller class\n    MediaController mediaController = new MediaController(this);\n\n    // sets the anchor view\n    // anchor view for the videoView\n    mediaController.setAnchorView(videoView);\n\n    // sets the media player to the videoView\n    mediaController.setMediaPlayer(videoView);\n\n    // sets the media controller to the videoView\n    videoView.setMediaController(mediaController);\n\n    // starts the video\n    videoView.start();\n</code></pre>\n"}],"owner":{"account_id":9191552,"reputation":737,"user_id":6831883,"accept_rate":60,"display_name":"Aligator"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":97635,"favorite_count":0,"down_vote_count":1,"up_vote_count":28,"accepted_answer_id":40435356,"answer_count":7,"score":27,"last_activity_date":1695754336,"creation_date":1478303188,"question_id":40433248,"body_markdown":"I found a similar questions but nothing work for me.\r\nI try play video from this url:\r\n\r\n    http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4\r\n\r\nMy java code:\r\n\r\n    VideoView videoView= (VideoView)findViewById(R.id.exerciseVideo);\r\n        Uri uri = Uri.parse(TEST_URL);\r\n        videoView.setVideoURI(uri);\r\n        videoView.requestFocus();\r\n        videoView.start();\r\n\r\nWhen I run app nothing is displayed in activity and IDE does not show any errors. ANy idea, please?\r\n\r\nEDIT:\r\n\r\nMy activity where I want to show video:\r\n\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n\r\n    &lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;match_parent&quot;&gt;\r\n    \r\n        &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n            xmlns:tools=&quot;http://schemas.android.com/tools&quot;\r\n            android:layout_width=&quot;match_parent&quot;\r\n            android:layout_height=&quot;match_parent&quot;\r\n            android:paddingBottom=&quot;@dimen/activity_vertical_margin&quot;\r\n            android:paddingLeft=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingRight=&quot;@dimen/activity_horizontal_margin&quot;\r\n            android:paddingTop=&quot;@dimen/activity_vertical_margin&quot;\r\n            tools:context=&quot;com.example.martin.fitnessapp.ExerciseDetailActivity&quot;\r\n            android:orientation=&quot;vertical&quot;&gt;\r\n    \r\n    \r\n            &lt;LinearLayout\r\n                android:orientation=&quot;horizontal&quot;\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;match_parent&quot;\r\n                android:weightSum=&quot;2&quot;&gt;\r\n                &lt;ImageView\r\n                    android:layout_width=&quot;match_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/exerciseImgA&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:scaleType=&quot;fitCenter&quot;\r\n                    android:adjustViewBounds=&quot;true&quot;\r\n                    android:paddingRight=&quot;8dp&quot;/&gt;\r\n    \r\n                &lt;ImageView\r\n                    android:layout_width=&quot;fill_parent&quot;\r\n                    android:layout_height=&quot;wrap_content&quot;\r\n                    android:id=&quot;@+id/exerciseImgB&quot;\r\n                    android:layout_weight=&quot;1&quot;\r\n                    android:scaleType=&quot;fitCenter&quot;\r\n                    android:adjustViewBounds=&quot;true&quot;\r\n                    android:paddingLeft=&quot;8dp&quot;/&gt;\r\n            &lt;/LinearLayout&gt;\r\n    \r\n            &lt;TextView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:textAppearance=&quot;?android:attr/textAppearanceMedium&quot;\r\n                android:text=&quot;&quot;\r\n                android:id=&quot;@+id/exerciseDesc&quot; /&gt;\r\n    \r\n            &lt;VideoView\r\n                android:layout_width=&quot;match_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/exerciseVideo&quot; /&gt;\r\n    \r\n            &lt;ImageView\r\n                android:layout_width=&quot;fill_parent&quot;\r\n                android:layout_height=&quot;wrap_content&quot;\r\n                android:id=&quot;@+id/guideImg&quot;\r\n                android:scaleType=&quot;fitCenter&quot;\r\n                android:adjustViewBounds=&quot;true&quot;/&gt;\r\n    \r\n    \r\n        &lt;/LinearLayout&gt;\r\n    &lt;/ScrollView&gt;","title":"Play video from url in VideoView [Android]","body":"<p>I found a similar questions but nothing work for me.\nI try play video from this url:</p>\n\n<pre><code>http://videocdn.bodybuilding.com/video/mp4/62000/62792m.mp4\n</code></pre>\n\n<p>My java code:</p>\n\n<pre><code>VideoView videoView= (VideoView)findViewById(R.id.exerciseVideo);\n    Uri uri = Uri.parse(TEST_URL);\n    videoView.setVideoURI(uri);\n    videoView.requestFocus();\n    videoView.start();\n</code></pre>\n\n<p>When I run app nothing is displayed in activity and IDE does not show any errors. ANy idea, please?</p>\n\n<p>EDIT:</p>\n\n<p>My activity where I want to show video:</p>\n\n\n\n<pre><code>&lt;ScrollView xmlns:android=\"http://schemas.android.com/apk/res/android\"\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"match_parent\"&gt;\n\n    &lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\n        xmlns:tools=\"http://schemas.android.com/tools\"\n        android:layout_width=\"match_parent\"\n        android:layout_height=\"match_parent\"\n        android:paddingBottom=\"@dimen/activity_vertical_margin\"\n        android:paddingLeft=\"@dimen/activity_horizontal_margin\"\n        android:paddingRight=\"@dimen/activity_horizontal_margin\"\n        android:paddingTop=\"@dimen/activity_vertical_margin\"\n        tools:context=\"com.example.martin.fitnessapp.ExerciseDetailActivity\"\n        android:orientation=\"vertical\"&gt;\n\n\n        &lt;LinearLayout\n            android:orientation=\"horizontal\"\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"match_parent\"\n            android:weightSum=\"2\"&gt;\n            &lt;ImageView\n                android:layout_width=\"match_parent\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/exerciseImgA\"\n                android:layout_weight=\"1\"\n                android:scaleType=\"fitCenter\"\n                android:adjustViewBounds=\"true\"\n                android:paddingRight=\"8dp\"/&gt;\n\n            &lt;ImageView\n                android:layout_width=\"fill_parent\"\n                android:layout_height=\"wrap_content\"\n                android:id=\"@+id/exerciseImgB\"\n                android:layout_weight=\"1\"\n                android:scaleType=\"fitCenter\"\n                android:adjustViewBounds=\"true\"\n                android:paddingLeft=\"8dp\"/&gt;\n        &lt;/LinearLayout&gt;\n\n        &lt;TextView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:textAppearance=\"?android:attr/textAppearanceMedium\"\n            android:text=\"\"\n            android:id=\"@+id/exerciseDesc\" /&gt;\n\n        &lt;VideoView\n            android:layout_width=\"match_parent\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/exerciseVideo\" /&gt;\n\n        &lt;ImageView\n            android:layout_width=\"fill_parent\"\n            android:layout_height=\"wrap_content\"\n            android:id=\"@+id/guideImg\"\n            android:scaleType=\"fitCenter\"\n            android:adjustViewBounds=\"true\"/&gt;\n\n\n    &lt;/LinearLayout&gt;\n&lt;/ScrollView&gt;\n</code></pre>\n"},{"tags":["java","algorithm","sorting","time","time-measurement"],"comments":[{"owner":{"account_id":465573,"reputation":192703,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"score":1,"creation_date":1695753949,"post_id":77182658,"comment_id":136065870,"body_markdown":"Measuring the performance of functions in Java is _very hard,_ as a result of a number of variables.  Most obviously, the JVM&#39;s JIT compilation makes functions faster as they&#39;re called more often through the operation of a program.  You really can&#39;t measure the performance of something in Java without a benchmarking framework -- almost certainly JMH -- and any results you get measuring like this are likely to produce _completely wrong_ results.","body":"Measuring the performance of functions in Java is <i>very hard,</i> as a result of a number of variables.  Most obviously, the JVM&#39;s JIT compilation makes functions faster as they&#39;re called more often through the operation of a program.  You really can&#39;t measure the performance of something in Java without a benchmarking framework -- almost certainly JMH -- and any results you get measuring like this are likely to produce <i>completely wrong</i> results."},{"owner":{"account_id":29541276,"reputation":9,"user_id":22639885,"display_name":"HelpAnElf"},"score":0,"creation_date":1695786515,"post_id":77182658,"comment_id":136069402,"body_markdown":"Thanks a lot for pointing me in the right direction! I didn&#39;t even know that it was called Micro benchmarking, JMH has worked for me.\n\nIm new to stackOverflow, so can I give you a thumbs up or something? (I cant find anything)","body":"Thanks a lot for pointing me in the right direction! I didn&#39;t even know that it was called Micro benchmarking, JMH has worked for me.  Im new to stackOverflow, so can I give you a thumbs up or something? (I cant find anything)"}],"owner":{"account_id":29541276,"reputation":9,"user_id":22639885,"display_name":"HelpAnElf"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1695753883,"answer_count":0,"score":0,"last_activity_date":1695753936,"creation_date":1695753567,"question_id":77182658,"body_markdown":"    Function1 num1 = new Function1();\r\n    //Function2 num2 = new Function2();\r\n\r\n\r\n    ArrayList&lt;Integer&gt; nonSortedList = new ArrayList&lt;&gt;();\r\n    for (int i=1; i&lt;10000000; i++) nonSortedList.add(i);\r\n    Collections.shuffle(nonSortedList);\r\n    ArrayList&lt;Integer&gt; nonSortedList2 = new ArrayList&lt;&gt;(nonSortedList);\r\n    //ArrayList&lt;Integer&gt; nonSortedList3 = new ArrayList&lt;&gt;(nonSortedList2);\r\n\r\n\r\n\r\n    System.out.println();\r\n    System.out.println();\r\n\r\n    long start = System.nanoTime();\r\n    Collections.sort(nonSortedList);\r\n    System.out.println(&quot;function1= &quot;+((System.nanoTime()-start)/1000000000.0));\r\n\r\n    start = System.nanoTime();\r\n    num.sort(nonSortedList2);\r\n    System.out.println(&quot;function2= &quot;+((System.nanoTime()-start)/1000000000.0));\r\n\r\n    /*\r\n    start = System.nanoTime();\r\n    num2.sort(nonSortedList3);\r\n    System.out.println(&quot;function3= &quot;+((System.nanoTime()-start)/1000000000.0));\r\n    */\r\n\r\n    Output without commented lines:\r\n    function1= 6-7 seconds\r\n    function2= 2-3 seconds\r\n\r\n    Output with commented lines included:\r\n    function1= 3.8144072\r\n    function2= 5.8931552\r\n    function3= 4.2656519\r\n\r\n\r\nWhat I expected to happen is the runtime of the sort algorithm of Collection.sort() and the Function1 sort algorithm to remain the same after adding the Funtion2 algorithm measurement code, \r\n\r\nWhy does the code added elsewhere make Collections.sort() faster and the second sorting function slower. How is this possible?\r\n\r\nWhy is the speed changing with new code added when the function being measured between System.nanotime() calls is still the same?\r\n\r\nNote that i have also tried Instant.now(), the problem has something to do with the syntax of my measuring code... definitely not the functions","title":"Same function different runtime?! Why is the time measured not the same when adding code elsewhere? Java, Sorting algorithm time measurement, nanotime","body":"<pre><code>Function1 num1 = new Function1();\n//Function2 num2 = new Function2();\n\n\nArrayList&lt;Integer&gt; nonSortedList = new ArrayList&lt;&gt;();\nfor (int i=1; i&lt;10000000; i++) nonSortedList.add(i);\nCollections.shuffle(nonSortedList);\nArrayList&lt;Integer&gt; nonSortedList2 = new ArrayList&lt;&gt;(nonSortedList);\n//ArrayList&lt;Integer&gt; nonSortedList3 = new ArrayList&lt;&gt;(nonSortedList2);\n\n\n\nSystem.out.println();\nSystem.out.println();\n\nlong start = System.nanoTime();\nCollections.sort(nonSortedList);\nSystem.out.println(&quot;function1= &quot;+((System.nanoTime()-start)/1000000000.0));\n\nstart = System.nanoTime();\nnum.sort(nonSortedList2);\nSystem.out.println(&quot;function2= &quot;+((System.nanoTime()-start)/1000000000.0));\n\n/*\nstart = System.nanoTime();\nnum2.sort(nonSortedList3);\nSystem.out.println(&quot;function3= &quot;+((System.nanoTime()-start)/1000000000.0));\n*/\n\nOutput without commented lines:\nfunction1= 6-7 seconds\nfunction2= 2-3 seconds\n\nOutput with commented lines included:\nfunction1= 3.8144072\nfunction2= 5.8931552\nfunction3= 4.2656519\n</code></pre>\n<p>What I expected to happen is the runtime of the sort algorithm of Collection.sort() and the Function1 sort algorithm to remain the same after adding the Funtion2 algorithm measurement code,</p>\n<p>Why does the code added elsewhere make Collections.sort() faster and the second sorting function slower. How is this possible?</p>\n<p>Why is the speed changing with new code added when the function being measured between System.nanotime() calls is still the same?</p>\n<p>Note that i have also tried Instant.now(), the problem has something to do with the syntax of my measuring code... definitely not the functions</p>\n"},{"tags":["java","android","firebase","react-native","react-native-firebase"],"comments":[{"owner":{"account_id":7292081,"reputation":13504,"user_id":5558150,"accept_rate":100,"display_name":"Bhuvanesh BS"},"score":1,"creation_date":1527740877,"post_id":50608169,"comment_id":88243069,"body_markdown":"use same version of play-service libraries. Also dont use+ operator in dependencies. found versions `services-base:15.+&#39;`, `vision:12.0.1`","body":"use same version of play-service libraries. Also dont use+ operator in dependencies. found versions <code>services-base:15.+&#39;</code>, <code>vision:12.0.1</code>"},{"owner":{"account_id":3244469,"reputation":188,"user_id":2736483,"display_name":"bo_"},"score":1,"creation_date":1533863376,"post_id":50608169,"comment_id":90513398,"body_markdown":"@alex-khanenya did you find a solution? I have the same error. Thanks","body":"@alex-khanenya did you find a solution? I have the same error. Thanks"}],"answers":[{"comments":[{"owner":{"account_id":3436774,"reputation":2855,"user_id":2879716,"display_name":"Alexey Grinko"},"score":0,"creation_date":1605875642,"post_id":52172596,"comment_id":114793351,"body_markdown":"@alex-khanenya please consider marking the answer as accepted if it solved the issue.","body":"@alex-khanenya please consider marking the answer as accepted if it solved the issue."}],"tags":[],"owner":{"account_id":3436774,"reputation":2855,"user_id":2879716,"display_name":"Alexey Grinko"},"comment_count":1,"down_vote_count":1,"up_vote_count":17,"is_accepted":false,"score":16,"last_activity_date":1536088116,"creation_date":1536088116,"answer_id":52172596,"question_id":50608169,"body_markdown":"Faced the same issue. Then I found out that I missed an important set of instructions to integrate Firebase with Android project: https://firebase.google.com/docs/android/setup#add_firebase_to_your_app\r\n\r\nHere is the summary of the steps in that documentation that helped in my case:\r\n\r\n1. Generate `google-services.json` and put it to your `android/app/` directory.\r\n2. Add `classpath &#39;com.google.gms:google-services:4.1.0&#39;` to `buildscript -&gt; dependencies` section of your root-level `build.gradle` config; add `google()` to `allprogects -&gt; repositories` section of the same file.\r\n3. Add `implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;` to `dependencies` section of your app module&#39;s `build.gradle` file; add `apply plugin: &#39;com.google.gms.google-services&#39;` at the very bottom of the same file.\r\n4. Sync and rebuild. Now it should work.\r\n\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>Faced the same issue. Then I found out that I missed an important set of instructions to integrate Firebase with Android project: <a href=\"https://firebase.google.com/docs/android/setup#add_firebase_to_your_app\" rel=\"noreferrer\">https://firebase.google.com/docs/android/setup#add_firebase_to_your_app</a></p>\n\n<p>Here is the summary of the steps in that documentation that helped in my case:</p>\n\n<ol>\n<li>Generate <code>google-services.json</code> and put it to your <code>android/app/</code> directory.</li>\n<li>Add <code>classpath 'com.google.gms:google-services:4.1.0'</code> to <code>buildscript -&gt; dependencies</code> section of your root-level <code>build.gradle</code> config; add <code>google()</code> to <code>allprogects -&gt; repositories</code> section of the same file.</li>\n<li>Add <code>implementation 'com.google.firebase:firebase-core:16.0.3'</code> to <code>dependencies</code> section of your app module's <code>build.gradle</code> file; add <code>apply plugin: 'com.google.gms.google-services'</code> at the very bottom of the same file.</li>\n<li>Sync and rebuild. Now it should work.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2454358,"reputation":1453,"user_id":2139910,"display_name":"Anand saga"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1560503130,"creation_date":1560503130,"answer_id":56594874,"question_id":50608169,"body_markdown":"\r\n\r\nchanged latest firebase-messaging google dependencies and modified other dependencies also in a same version in app gradle file. working fine now\r\n\r\n[dependencies version detail you can refer here][1]\r\n\r\n    dependencies {\r\n        testImplementation &#39;junit:junit:4.12&#39;\r\n        androidTestImplementation &#39;androidx.test:runner:1.1.0-alpha4&#39;\r\n        androidTestImplementation &#39;androidx.test.espresso:espresso-core:3.1.0-alpha4&#39;\r\n        implementation &#39;com.google.firebase:firebase-auth:17.0.0&#39;\r\n        implementation &#39;com.google.firebase:firebase-messaging:18.0.0&#39;\r\n    }\r\n\r\n\r\n  [1]: https://developers.google.com/android/guides/releases","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>changed latest firebase-messaging google dependencies and modified other dependencies also in a same version in app gradle file. working fine now</p>\n\n<p><a href=\"https://developers.google.com/android/guides/releases\" rel=\"nofollow noreferrer\">dependencies version detail you can refer here</a></p>\n\n<pre><code>dependencies {\n    testImplementation 'junit:junit:4.12'\n    androidTestImplementation 'androidx.test:runner:1.1.0-alpha4'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.0-alpha4'\n    implementation 'com.google.firebase:firebase-auth:17.0.0'\n    implementation 'com.google.firebase:firebase-messaging:18.0.0'\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4845258,"reputation":21,"user_id":3914758,"display_name":"pritam_parker"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1563012925,"creation_date":1563012925,"answer_id":57018198,"question_id":50608169,"body_markdown":"In my case I forgot to comment Database Package in MainApplication.java\r\n\r\n```\r\n    @Override\r\n    protected List&lt;ReactPackage&gt; getPackages() {\r\n      return Arrays.&lt;ReactPackage&gt;asList(\r\n        new MainReactPackage(),\r\n            new AsyncStoragePackage(),\r\n            new RNCameraPackage(),\r\n            new VectorIconsPackage(),\r\n            new RNGestureHandlerPackage(),\r\n        new RNFirebasePackage(),\r\n        // add/remove these packages as appropriate\r\n        //new RNFirebaseAdMobPackage(),\r\n        new RNFirebaseAnalyticsPackage(),\r\n        //new RNFirebaseAuthPackage(),\r\n        // new RNFirebaseRemoteConfigPackage(),\r\n        new RNFirebaseCrashlyticsPackage(),\r\n        // new RNFirebaseDatabasePackage(), &lt;==== Comment this package\r\n       // new RNFirebaseFirestorePackage(),\r\n        // new RNFirebaseFunctionsPackage(),\r\n        new RNFirebaseInstanceIdPackage(),\r\n       // new RNFirebaseInvitesPackage(),\r\n        new RNFirebaseLinksPackage(),\r\n        new RNFirebaseMessagingPackage(),\r\n        new RNFirebaseNotificationsPackage(),\r\n        new RNFirebasePerformancePackage()\r\n       // new RNFirebaseStoragePackage()\r\n      );\r\n    }\r\n```","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>In my case I forgot to comment Database Package in MainApplication.java</p>\n\n<pre><code>    @Override\n    protected List&lt;ReactPackage&gt; getPackages() {\n      return Arrays.&lt;ReactPackage&gt;asList(\n        new MainReactPackage(),\n            new AsyncStoragePackage(),\n            new RNCameraPackage(),\n            new VectorIconsPackage(),\n            new RNGestureHandlerPackage(),\n        new RNFirebasePackage(),\n        // add/remove these packages as appropriate\n        //new RNFirebaseAdMobPackage(),\n        new RNFirebaseAnalyticsPackage(),\n        //new RNFirebaseAuthPackage(),\n        // new RNFirebaseRemoteConfigPackage(),\n        new RNFirebaseCrashlyticsPackage(),\n        // new RNFirebaseDatabasePackage(), &lt;==== Comment this package\n       // new RNFirebaseFirestorePackage(),\n        // new RNFirebaseFunctionsPackage(),\n        new RNFirebaseInstanceIdPackage(),\n       // new RNFirebaseInvitesPackage(),\n        new RNFirebaseLinksPackage(),\n        new RNFirebaseMessagingPackage(),\n        new RNFirebaseNotificationsPackage(),\n        new RNFirebasePerformancePackage()\n       // new RNFirebaseStoragePackage()\n      );\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8370794,"reputation":318,"user_id":6285987,"display_name":"Dulaj Madusanka"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1566392082,"creation_date":1566392082,"answer_id":57592136,"question_id":50608169,"body_markdown":"I have faced the same issues. You have to change the react-native-firebase version in pakage.json file. I found the solution from here \r\n\r\n[here][1]\r\n\r\n\r\n  [1]: https://github.com/invertase/react-native-firebase/issues/2047","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>I have faced the same issues. You have to change the react-native-firebase version in pakage.json file. I found the solution from here </p>\n\n<p><a href=\"https://github.com/invertase/react-native-firebase/issues/2047\" rel=\"nofollow noreferrer\">here</a></p>\n"},{"tags":[],"owner":{"account_id":201682,"reputation":15444,"user_id":448292,"accept_rate":82,"display_name":"Tiago Gouv&#234;a"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1574945556,"creation_date":1568561365,"answer_id":57945565,"question_id":50608169,"body_markdown":"On your `android/app/build.gradle` add one more implementation on dependeces:\r\n\r\n    ...\r\n    dependencies {\r\n        implementation &quot;com.google.firebase:firebase-auth:17.0.0&quot;\r\n        ...\r\n    }","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>On your <code>android/app/build.gradle</code> add one more implementation on dependeces:</p>\n\n<pre><code>...\ndependencies {\n    implementation \"com.google.firebase:firebase-auth:17.0.0\"\n    ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15327634,"reputation":437,"user_id":11058294,"display_name":"Anubhav Mittal"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1572726387,"creation_date":1572726387,"answer_id":58675002,"question_id":50608169,"body_markdown":"There is probably some problem with the dependencies involved.\r\n\r\nIn my case, making the following changes worked perfectly in the app level `build.gradle`\r\n\r\n\r\n    dependencies{\r\n         implementation &#39;com.google.firebase:firebase-auth:17.0.0&#39;\r\n         implementation &#39;com.firebaseui:firebase-ui-database:6.0.2&#39;\r\n         ...\r\n    }","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>There is probably some problem with the dependencies involved.</p>\n\n<p>In my case, making the following changes worked perfectly in the app level <code>build.gradle</code></p>\n\n<pre><code>dependencies{\n     implementation 'com.google.firebase:firebase-auth:17.0.0'\n     implementation 'com.firebaseui:firebase-ui-database:6.0.2'\n     ...\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15430164,"reputation":11,"user_id":12298909,"display_name":"Tobias Arantes"},"comment_count":0,"down_vote_count":4,"up_vote_count":1,"is_accepted":false,"score":-3,"last_activity_date":1575576820,"creation_date":1575572177,"answer_id":59201637,"question_id":50608169,"body_markdown":"In the gradle.properties file, try adding::\r\n\r\n    android.enableJetifier = true\r\n    android.useAndroidX = true","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>In the gradle.properties file, try adding::</p>\n\n<pre><code>android.enableJetifier = true\nandroid.useAndroidX = true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13707795,"reputation":1180,"user_id":9890917,"display_name":"Sumit Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1597129770,"creation_date":1587030191,"answer_id":61247203,"question_id":50608169,"body_markdown":"If your are facing this issue in Flutter, Add this dependency in your android/app/build.gradle. And run your main.dart. No need to add any type of controller in ListView. If you are using listview on that page. If you are using Firebase please add this in depencdencies.\r\n\r\n`implementation &quot;com.google.firebase:firebase-auth:19.3.0&quot;`\r\n\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>If your are facing this issue in Flutter, Add this dependency in your android/app/build.gradle. And run your main.dart. No need to add any type of controller in ListView. If you are using listview on that page. If you are using Firebase please add this in depencdencies.</p>\n<p><code>implementation &quot;com.google.firebase:firebase-auth:19.3.0&quot;</code></p>\n"},{"tags":[],"owner":{"account_id":14537432,"reputation":874,"user_id":10500330,"display_name":"Anurag Bhalekar"},"comment_count":0,"down_vote_count":3,"up_vote_count":2,"is_accepted":false,"score":-1,"last_activity_date":1591037555,"creation_date":1591037555,"answer_id":62138976,"question_id":50608169,"body_markdown":"UPDATE YOUR FIREBASE LIBRARIES!!!!\r\n\r\nEg. if your app uses firebase auth, Google for it, in its documentation they provide with the latest version, paste it to your build.gradle\r\n\r\nThe libraries added by your Firebase Assistant in Android Studio are usually old.","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>UPDATE YOUR FIREBASE LIBRARIES!!!!</p>\n\n<p>Eg. if your app uses firebase auth, Google for it, in its documentation they provide with the latest version, paste it to your build.gradle</p>\n\n<p>The libraries added by your Firebase Assistant in Android Studio are usually old.</p>\n"},{"comments":[{"owner":{"account_id":6386919,"reputation":8069,"user_id":5737950,"display_name":"nima"},"score":0,"creation_date":1637779501,"post_id":70076114,"comment_id":123919756,"body_markdown":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value. You can find more information on how to write good answers in the help center: https://stackoverflow.com/help/how-to-answer . Good luck &#128578;","body":"While this code may answer the question, providing additional context regarding how and/or why it solves the problem would improve the answer&#39;s long-term value. You can find more information on how to write good answers in the help center: <a href=\"https://stackoverflow.com/help/how-to-answer\">stackoverflow.com/help/how-to-answer</a> . Good luck "}],"tags":[],"owner":{"account_id":17022909,"reputation":27,"user_id":12314962,"display_name":"Dashrath Prajapati"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637651074,"creation_date":1637647562,"answer_id":70076114,"question_id":50608169,"body_markdown":"\r\n\r\n    implementation(&quot;com.google.firebase:firebase-iid&quot;)\r\n\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<pre><code>implementation(&quot;com.google.firebase:firebase-iid&quot;)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9564031,"reputation":12915,"user_id":7103882,"display_name":"Codemaker2015"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1637686774,"creation_date":1637686774,"answer_id":70084844,"question_id":50608169,"body_markdown":"**Solution 1:** \r\n\r\nAdd one more implementation on dependeces in your `android/app/build.gradle` file.\r\n\r\n    dependencies {\r\n        implementation &quot;com.google.firebase:firebase-auth:17.0.0&quot;\r\n        ...\r\n    }\r\n\r\n**Solution 2:**\r\n\r\n- Generate `google-services.json` and put it to your `android/app/` directory.\r\n\r\n- Add `classpath &#39;com.google.gms:google-services:4.1.0&#39;` to buildscript -&gt; dependencies section of your root-level build.gradle config and add `google()` as first entry to allprogects -&gt; repositories section of the same file.\r\n\r\n        buildscript {\r\n            repositories {\r\n                google()\r\n                jcenter()\r\n            }\r\n            dependencies {\r\n                ...\r\n                classpath &#39;com.google.gms:google-services:4.1.0&#39;\r\n            }\r\n        }\r\n        allprojects {\r\n            repositories {\r\n                google()\r\n                ...\r\n            }\r\n        }\r\n\r\n- Add `implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;` to dependencies section of your app module&#39;s `build.gradle` file and add `apply plugin: &#39;com.google.gms.google-services&#39;` at the very bottom of the same file.\r\n\r\n      dependencies {\r\n          ...\r\n          implementation &#39;com.google.firebase:firebase-core:16.0.3&#39;\r\n      } \r\n      apply plugin: &#39;com.google.gms.google-services&#39;\r\n\r\n- Sync and rebuild.","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p><strong>Solution 1:</strong></p>\n<p>Add one more implementation on dependeces in your <code>android/app/build.gradle</code> file.</p>\n<pre><code>dependencies {\n    implementation &quot;com.google.firebase:firebase-auth:17.0.0&quot;\n    ...\n}\n</code></pre>\n<p><strong>Solution 2:</strong></p>\n<ul>\n<li><p>Generate <code>google-services.json</code> and put it to your <code>android/app/</code> directory.</p>\n</li>\n<li><p>Add <code>classpath 'com.google.gms:google-services:4.1.0'</code> to buildscript -&gt; dependencies section of your root-level build.gradle config and add <code>google()</code> as first entry to allprogects -&gt; repositories section of the same file.</p>\n<pre><code>  buildscript {\n      repositories {\n          google()\n          jcenter()\n      }\n      dependencies {\n          ...\n          classpath 'com.google.gms:google-services:4.1.0'\n      }\n  }\n  allprojects {\n      repositories {\n          google()\n          ...\n      }\n  }\n</code></pre>\n</li>\n<li><p>Add <code>implementation 'com.google.firebase:firebase-core:16.0.3'</code> to dependencies section of your app module's <code>build.gradle</code> file and add <code>apply plugin: 'com.google.gms.google-services'</code> at the very bottom of the same file.</p>\n<pre><code>dependencies {\n    ...\n    implementation 'com.google.firebase:firebase-core:16.0.3'\n} \napply plugin: 'com.google.gms.google-services'\n</code></pre>\n</li>\n<li><p>Sync and rebuild.</p>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":13733259,"reputation":1173,"user_id":9910265,"display_name":"Mohamed Ben Romdhane"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1676328932,"creation_date":1676328932,"answer_id":75441948,"question_id":50608169,"body_markdown":"The only solution that worked for me is to upgrade all firebase dependencies and don&#39;t forget this one below cause Android Studio may not notify you about it.\r\n\r\n````\r\nimplementation platform(&#39;com.google.firebase:firebase-bom:31.2.0&#39;)`\r\n````\r\n","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>The only solution that worked for me is to upgrade all firebase dependencies and don't forget this one below cause Android Studio may not notify you about it.</p>\n<pre><code>implementation platform('com.google.firebase:firebase-bom:31.2.0')`\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23626485,"reputation":619,"user_id":17658933,"display_name":"insider"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695753597,"creation_date":1695369828,"answer_id":77155830,"question_id":50608169,"body_markdown":"what worked for me (as for today ***22.09.2023***) was just to remove the .android/ package completely from my project and then run\r\n\r\n```npx expo prebuild```\r\n\r\nin the root folder and it created a new android folder with a few changes (could see there are some because of GitHub addon in my VSCode), then when I ran the folder in my Android Studio it ran completely fine without any errors whatsoever.","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p>what worked for me (as for today <em><strong>22.09.2023</strong></em>) was just to remove the .android/ package completely from my project and then run</p>\n<p><code>npx expo prebuild</code></p>\n<p>in the root folder and it created a new android folder with a few changes (could see there are some because of GitHub addon in my VSCode), then when I ran the folder in my Android Studio it ran completely fine without any errors whatsoever.</p>\n"}],"owner":{"account_id":9511012,"reputation":285,"user_id":7068952,"display_name":"Alex Khanenya"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69573,"favorite_count":0,"down_vote_count":1,"up_vote_count":24,"answer_count":13,"score":23,"last_activity_date":1695753597,"creation_date":1527693183,"question_id":50608169,"body_markdown":"[![Screenshot from Android Studio][1]][1]\r\n\r\n\r\n[![Google Play Services][2]][2]\r\n\r\nThis is React Native project. I have an error after successful build in Android Studio Emulator: \r\n\r\n&gt; java.lang.NoClassDefFoundError: Failed resolution of:\r\n&gt; Lcom/google/firebase/FirebaseApp\r\n\r\nMy files:\r\n\r\n**package.json:**\r\n\r\n    ...\r\n    &quot;react-native&quot;: &quot;^0.55.3&quot;,\r\n    &quot;react-native-camera&quot;: &quot;1.1.2&quot;,\r\n    &quot;react-native-check-box&quot;: &quot;^2.1.0&quot;,\r\n    &quot;react-native-extended-stylesheet&quot;: &quot;^0.8.1&quot;,\r\n    &quot;react-native-firebase&quot;: &quot;^4.2.0&quot;,\r\n    &quot;react-native-geocoder&quot;: &quot;^0.5.0&quot;,\r\n    &quot;react-native-git-upgrade&quot;: &quot;^0.2.7&quot;,\r\n    &quot;react-native-htmlview&quot;: &quot;^0.12.1&quot;,\r\n    &quot;react-native-image-picker&quot;: &quot;^0.26.10&quot;,\r\n    &quot;react-native-linear-gradient&quot;: &quot;^2.4.0&quot;,\r\n    &quot;react-native-local-storage&quot;: &quot;^1.5.2&quot;,\r\n    &quot;react-native-maps&quot;: &quot;^0.21.0&quot;,\r\n    &quot;react-native-modal&quot;: &quot;^5.4.0&quot;,\r\n    &quot;react-native-modal-dropdown&quot;: &quot;^0.6.1&quot;,\r\n    &quot;react-native-read-more-text&quot;: &quot;^1.0.0&quot;,\r\n    &quot;react-native-router-flux&quot;: &quot;^4.0.0-beta.27&quot;,\r\n    &quot;react-native-svg-image&quot;: &quot;^2.0.1&quot;,\r\n    &quot;react-native-text-input-mask&quot;: &quot;^0.7.0&quot;,\r\n    ...\r\n\r\n**android/app/build.gradle:**\r\n\r\n    ...    \r\n    android {\r\n        compileSdkVersion 27\r\n        buildToolsVersion &quot;27.0.1&quot;\r\n    \r\n        defaultConfig {\r\n            applicationId &quot;com.something.anything&quot;\r\n            minSdkVersion 16\r\n            targetSdkVersion 22\r\n            versionCode 1\r\n            versionName &quot;1.0&quot;\r\n            ndk {\r\n                abiFilters &quot;armeabi-v7a&quot;, &quot;x86&quot;\r\n            }\r\n    \t\tmultiDexEnabled true\r\n        }\r\n    \tsigningConfigs {\r\n            release {\r\n                if (project.hasProperty(&#39;MYAPP_RELEASE_STORE_FILE&#39;)) {\r\n                    storeFile file(MYAPP_RELEASE_STORE_FILE)\r\n                    storePassword MYAPP_RELEASE_STORE_PASSWORD\r\n                    keyAlias MYAPP_RELEASE_KEY_ALIAS\r\n                    keyPassword MYAPP_RELEASE_KEY_PASSWORD\r\n                }\r\n            }\r\n        }\r\n        splits {\r\n            abi {\r\n                reset()\r\n                enable enableSeparateBuildPerCPUArchitecture\r\n                universalApk false  // If true, also generate a universal APK\r\n                include &quot;armeabi-v7a&quot;, &quot;x86&quot;\r\n            }\r\n        }\r\n        buildTypes {\r\n    \t\trelease {\r\n    \t\t\tsigningConfig signingConfigs.release\r\n                minifyEnabled enableProguardInReleaseBuilds\r\n                proguardFiles getDefaultProguardFile(&quot;proguard-android.txt&quot;), &quot;proguard-rules.pro&quot;\r\n            }\r\n        }\r\n        // applicationVariants are e.g. debug, release\r\n        applicationVariants.all { variant -&gt;\r\n            variant.outputs.each { output -&gt;\r\n                // For each separate APK per architecture, set a unique version code as described here:\r\n                // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\r\n                def versionCodes = [&quot;armeabi-v7a&quot;:1, &quot;x86&quot;:2]\r\n                def abi = output.getFilter(OutputFile.ABI)\r\n                if (abi != null) {  // null for the universal-debug, universal-release variants\r\n                    output.versionCodeOverride =\r\n                            versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\r\n                }\r\n            }\r\n        }\r\n    }\r\n    \r\n    dependencies {\r\n    \tcompile(project(&#39;:react-native-firebase&#39;)) {\r\n    \t\ttransitive = false\r\n    \t}\r\n        compile project(&#39;:react-native-geocoder&#39;)\r\n    \tcompile(project(&#39;:react-native-maps&#39;)) {\r\n    \t  exclude group: &#39;com.google.android.gms&#39;, module: &#39;play-services-base&#39;\r\n    \t  exclude group: &#39;com.google.android.gms&#39;, module: &#39;play-services-maps&#39;\r\n    \t  exclude group: &#39;com.google.android.gms&#39;, module: &#39;play-services-location&#39;\r\n    \t}\r\n    \r\n    \tcompile &#39;com.google.android.gms:play-services-base:15.+&#39;\r\n        compile &#39;com.google.android.gms:play-services-maps:15.+&#39;\r\n        compile &#39;com.google.android.gms:play-services-location:15.+&#39;\r\n        compile (project(&#39;:react-native-camera&#39;)) {\r\n        exclude group: &quot;com.google.android.gms&quot;\r\n        compile &#39;com.android.support:exifinterface:25.+&#39;\r\n        compile (&#39;com.google.android.gms:play-services-vision:12.0.1&#39;) {\r\n            force = true\r\n            }\r\n        }\r\n        compile project(&#39;:react-native-text-input-mask&#39;)\r\n        compile project(&#39;:react-native-linear-gradient&#39;)\r\n        compile project(&#39;:react-native-image-picker&#39;)\r\n        compile fileTree(dir: &quot;libs&quot;, include: [&quot;*.jar&quot;])\r\n        compile &quot;com.android.support:appcompat-v7:23.0.1&quot;\r\n        compile &quot;com.facebook.react:react-native:+&quot;  // From node_modules\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            maven { url &quot;https://jitpack.io&quot; }\r\n            maven { url &quot;https://maven.google.com&quot; }\r\n        }\r\n    }\r\n    \r\n    // Run this once to be able to run the application with BUCK\r\n    // puts all compile dependencies into folder libs for BUCK to use\r\n    task copyDownloadableDepsToLibs(type: Copy) {\r\n        from configurations.compile\r\n        into &#39;libs&#39;\r\n    }\r\n\r\n**android/build.gradle**\r\n\r\n    // Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n    \r\n    buildscript {\r\n        repositories {\r\n            jcenter()\r\n            google()\r\n        }\r\n        dependencies {\r\n            classpath &#39;com.android.tools.build:gradle:3.1.0&#39;\r\n    \r\n            // NOTE: Do not place your application dependencies here; they belong\r\n            // in the individual module build.gradle files\r\n        }\r\n    }\r\n    \r\n    allprojects {\r\n        repositories {\r\n            mavenLocal()\r\n            jcenter()\r\n            maven {\r\n                // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\r\n                url &quot;$rootDir/../node_modules/react-native/android&quot;\r\n            }\r\n        }\r\n    }\r\n    \r\n    subprojects {\r\n      project.configurations.all {\r\n         resolutionStrategy.eachDependency { details -&gt;\r\n            if (details.requested.group == &#39;com.android.support&#39;\r\n                  &amp;&amp; !details.requested.name.contains(&#39;multidex&#39;)\r\n            ) {\r\n               details.useVersion &quot;27.1.0&quot;\r\n            }\r\n         }\r\n      }\r\n    }\r\n\r\nI&#39;ve tried a lot of solutions but nothing helped.\r\n\r\n  [1]: https://i.stack.imgur.com/ucVs2.png\r\n  [2]: https://i.stack.imgur.com/FLjg0.png","title":"Java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/FirebaseApp","body":"<p><a href=\"https://i.stack.imgur.com/ucVs2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ucVs2.png\" alt=\"Screenshot from Android Studio\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/FLjg0.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/FLjg0.png\" alt=\"Google Play Services\"></a></p>\n\n<p>This is React Native project. I have an error after successful build in Android Studio Emulator: </p>\n\n<blockquote>\n  <p>java.lang.NoClassDefFoundError: Failed resolution of:\n  Lcom/google/firebase/FirebaseApp</p>\n</blockquote>\n\n<p>My files:</p>\n\n<p><strong>package.json:</strong></p>\n\n<pre><code>...\n\"react-native\": \"^0.55.3\",\n\"react-native-camera\": \"1.1.2\",\n\"react-native-check-box\": \"^2.1.0\",\n\"react-native-extended-stylesheet\": \"^0.8.1\",\n\"react-native-firebase\": \"^4.2.0\",\n\"react-native-geocoder\": \"^0.5.0\",\n\"react-native-git-upgrade\": \"^0.2.7\",\n\"react-native-htmlview\": \"^0.12.1\",\n\"react-native-image-picker\": \"^0.26.10\",\n\"react-native-linear-gradient\": \"^2.4.0\",\n\"react-native-local-storage\": \"^1.5.2\",\n\"react-native-maps\": \"^0.21.0\",\n\"react-native-modal\": \"^5.4.0\",\n\"react-native-modal-dropdown\": \"^0.6.1\",\n\"react-native-read-more-text\": \"^1.0.0\",\n\"react-native-router-flux\": \"^4.0.0-beta.27\",\n\"react-native-svg-image\": \"^2.0.1\",\n\"react-native-text-input-mask\": \"^0.7.0\",\n...\n</code></pre>\n\n<p><strong>android/app/build.gradle:</strong></p>\n\n<pre><code>...    \nandroid {\n    compileSdkVersion 27\n    buildToolsVersion \"27.0.1\"\n\n    defaultConfig {\n        applicationId \"com.something.anything\"\n        minSdkVersion 16\n        targetSdkVersion 22\n        versionCode 1\n        versionName \"1.0\"\n        ndk {\n            abiFilters \"armeabi-v7a\", \"x86\"\n        }\n        multiDexEnabled true\n    }\n    signingConfigs {\n        release {\n            if (project.hasProperty('MYAPP_RELEASE_STORE_FILE')) {\n                storeFile file(MYAPP_RELEASE_STORE_FILE)\n                storePassword MYAPP_RELEASE_STORE_PASSWORD\n                keyAlias MYAPP_RELEASE_KEY_ALIAS\n                keyPassword MYAPP_RELEASE_KEY_PASSWORD\n            }\n        }\n    }\n    splits {\n        abi {\n            reset()\n            enable enableSeparateBuildPerCPUArchitecture\n            universalApk false  // If true, also generate a universal APK\n            include \"armeabi-v7a\", \"x86\"\n        }\n    }\n    buildTypes {\n        release {\n            signingConfig signingConfigs.release\n            minifyEnabled enableProguardInReleaseBuilds\n            proguardFiles getDefaultProguardFile(\"proguard-android.txt\"), \"proguard-rules.pro\"\n        }\n    }\n    // applicationVariants are e.g. debug, release\n    applicationVariants.all { variant -&gt;\n        variant.outputs.each { output -&gt;\n            // For each separate APK per architecture, set a unique version code as described here:\n            // http://tools.android.com/tech-docs/new-build-system/user-guide/apk-splits\n            def versionCodes = [\"armeabi-v7a\":1, \"x86\":2]\n            def abi = output.getFilter(OutputFile.ABI)\n            if (abi != null) {  // null for the universal-debug, universal-release variants\n                output.versionCodeOverride =\n                        versionCodes.get(abi) * 1048576 + defaultConfig.versionCode\n            }\n        }\n    }\n}\n\ndependencies {\n    compile(project(':react-native-firebase')) {\n        transitive = false\n    }\n    compile project(':react-native-geocoder')\n    compile(project(':react-native-maps')) {\n      exclude group: 'com.google.android.gms', module: 'play-services-base'\n      exclude group: 'com.google.android.gms', module: 'play-services-maps'\n      exclude group: 'com.google.android.gms', module: 'play-services-location'\n    }\n\n    compile 'com.google.android.gms:play-services-base:15.+'\n    compile 'com.google.android.gms:play-services-maps:15.+'\n    compile 'com.google.android.gms:play-services-location:15.+'\n    compile (project(':react-native-camera')) {\n    exclude group: \"com.google.android.gms\"\n    compile 'com.android.support:exifinterface:25.+'\n    compile ('com.google.android.gms:play-services-vision:12.0.1') {\n        force = true\n        }\n    }\n    compile project(':react-native-text-input-mask')\n    compile project(':react-native-linear-gradient')\n    compile project(':react-native-image-picker')\n    compile fileTree(dir: \"libs\", include: [\"*.jar\"])\n    compile \"com.android.support:appcompat-v7:23.0.1\"\n    compile \"com.facebook.react:react-native:+\"  // From node_modules\n}\n\nallprojects {\n    repositories {\n        maven { url \"https://jitpack.io\" }\n        maven { url \"https://maven.google.com\" }\n    }\n}\n\n// Run this once to be able to run the application with BUCK\n// puts all compile dependencies into folder libs for BUCK to use\ntask copyDownloadableDepsToLibs(type: Copy) {\n    from configurations.compile\n    into 'libs'\n}\n</code></pre>\n\n<p><strong>android/build.gradle</strong></p>\n\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\n\nbuildscript {\n    repositories {\n        jcenter()\n        google()\n    }\n    dependencies {\n        classpath 'com.android.tools.build:gradle:3.1.0'\n\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n}\n\nallprojects {\n    repositories {\n        mavenLocal()\n        jcenter()\n        maven {\n            // All of React Native (JS, Obj-C sources, Android binaries) is installed from npm\n            url \"$rootDir/../node_modules/react-native/android\"\n        }\n    }\n}\n\nsubprojects {\n  project.configurations.all {\n     resolutionStrategy.eachDependency { details -&gt;\n        if (details.requested.group == 'com.android.support'\n              &amp;&amp; !details.requested.name.contains('multidex')\n        ) {\n           details.useVersion \"27.1.0\"\n        }\n     }\n  }\n}\n</code></pre>\n\n<p>I've tried a lot of solutions but nothing helped.</p>\n"},{"tags":["java","sorting","reverse","comparator"],"answers":[{"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":3,"creation_date":1695712605,"post_id":77177351,"comment_id":136057351,"body_markdown":"I don&#39;t see the difference between the two code pieces.","body":"I don&#39;t see the difference between the two code pieces."}],"tags":[],"owner":{"account_id":13352803,"reputation":181,"user_id":9637498,"display_name":"N.A"},"comment_count":1,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1695708110,"creation_date":1695708110,"answer_id":77177351,"question_id":77177310,"body_markdown":"Just figured it out.. Moving the `reversed()` inside the comparison ended up working, like so: \r\n\r\n```\r\ncars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\r\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\r\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\r\n\r\n```\r\n\r\nI&#39;m not sure I totally understand why this fixed it though.","title":"Using Comparator.nullsFirst not working with reverse()","body":"<p>Just figured it out.. Moving the <code>reversed()</code> inside the comparison ended up working, like so:</p>\n<pre><code>cars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\n\n</code></pre>\n<p>I'm not sure I totally understand why this fixed it though.</p>\n"}],"owner":{"account_id":13352803,"reputation":181,"user_id":9637498,"display_name":"N.A"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695753358,"creation_date":1695707570,"question_id":77177310,"body_markdown":"I am trying to sort Car by three values: first by type, then within the &quot;type&quot; bucket I want to sort those by price (lowest to highest), then if there are any that have the same price, I want to sort by age (newest to oldest).\r\n\r\nHowever, some Cars have a null price. In these cases, I want all the null values to be at the end of the list.\r\n\r\nI am trying to use `Comparator.nullsFirst` and `Comparator.nullsLast`, but neither of these are doing anything. I end up getting all the nulls first (regardless of which one I use), then the items sorted on price. I am wondering if it is because I have `.reverse()` which is negating the nullsFirst/Last? \r\n\r\nHere is what I am trying:\r\n\r\n```\r\ncars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\r\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\r\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\r\n\r\n```\r\n\r\nAny ideas on this?","title":"Using Comparator.nullsFirst not working with reverse()","body":"<p>I am trying to sort Car by three values: first by type, then within the &quot;type&quot; bucket I want to sort those by price (lowest to highest), then if there are any that have the same price, I want to sort by age (newest to oldest).</p>\n<p>However, some Cars have a null price. In these cases, I want all the null values to be at the end of the list.</p>\n<p>I am trying to use <code>Comparator.nullsFirst</code> and <code>Comparator.nullsLast</code>, but neither of these are doing anything. I end up getting all the nulls first (regardless of which one I use), then the items sorted on price. I am wondering if it is because I have <code>.reverse()</code> which is negating the nullsFirst/Last?</p>\n<p>Here is what I am trying:</p>\n<pre><code>cars.stream().sorted(Comparator.comparingInt((Car car) -&gt; car.getCarMetadata().getCarType().getPriority())\n     .thenComparing((Car car -&gt; car.getCarMetadata().getPrice(), Comparator.nullsLast(Double::compareTo)).reversed()\n     .thenComparing((Car car) -&gt; car.getAge).reversed()).collect(Collectors.toList());\n\n</code></pre>\n<p>Any ideas on this?</p>\n"},{"tags":["java","eclipse","tomcat7"],"comments":[{"owner":{"account_id":908201,"reputation":6185,"user_id":942671,"accept_rate":83,"display_name":"Rinke"},"score":2,"creation_date":1447422004,"post_id":31029810,"comment_id":55159416,"body_markdown":"It may help to provide a little more context. How are you trying to launch Tomcat? How did you configure Eclipse? How did you install Tomcat?","body":"It may help to provide a little more context. How are you trying to launch Tomcat? How did you configure Eclipse? How did you install Tomcat?"},{"owner":{"account_id":153779,"reputation":1985,"user_id":369280,"accept_rate":79,"display_name":"nkukhar"},"score":1,"creation_date":1447433048,"post_id":31029810,"comment_id":55167071,"body_markdown":"This answer might be helpful http://stackoverflow.com/questions/1392383/server-tomcat-v6-0-server-at-localhost-failed-to-start","body":"This answer might be helpful <a href=\"http://stackoverflow.com/questions/1392383/server-tomcat-v6-0-server-at-localhost-failed-to-start\" title=\"server tomcat v6 0 server at localhost failed to start\">stackoverflow.com/questions/1392383/&hellip;</a>"},{"owner":{"account_id":6840936,"reputation":619,"user_id":5261352,"display_name":"Ashish Bhosle"},"score":2,"creation_date":1447937178,"post_id":31029810,"comment_id":55374006,"body_markdown":"Please provide some additional information like your app code, how did you added tomcat in eclipse IDE etc.","body":"Please provide some additional information like your app code, how did you added tomcat in eclipse IDE etc."}],"answers":[{"tags":[],"owner":{"account_id":4717015,"reputation":751,"user_id":3815921,"display_name":"Facepalmed"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1448021108,"creation_date":1447870324,"answer_id":33787290,"question_id":31029810,"body_markdown":"First of all you should try to run TOMCAT using it&#39;s own .bat and not Eclipse. If it doesn&#39;t run problems would be on your tomcat installation and not in Eclipse and you could take a look to the files of TOMCAT_HOME/logs/  where Tomcat&#39;s errors are traced (they are so helpful).\r\n\r\nAnyway, if it runs properly out of eclipse, try to delete the eclipse&#39;s tomcat configuration and set it from the beginning following these simple steps\r\n \r\n - Go to Eclipse&#39;s **Window &gt; Preferences &gt; Server &gt; Runtime Environment** and\r\n   add a Tomcat Server browsing your TOMCAT_HOME and selecting the\r\n   suitable JRE (use JAVA_HOME that contains jre yet) paying attention\r\n   to messages requiring a certain JDK depending on the TOMCAT version\r\n   (TOMCAT_8 requires at least JDK_1.7 version and, if not set, usually\r\n   shows errors explaining it when starting)\r\n - Go to Eclipse&#39;s **Window &gt; Show View &gt; Other... &gt; Server &gt; Servers** and add a new \r\n   server; in this case the version of TOMCAT you set before. You don&#39;t \r\n   need to add further configuration to make TOMCAT to start.\r\n - At this point if would be helpful if you hadn&#39;t any app at\r\n   TOMCAT_HOME&#39;s webapps folder but those that came default (you must\r\n   empty TOMCAT_HOME/work folder to remove cached stuff). Once you have\r\n   ensured it, start from ECLIPSE and cross fingers. In case of fail, take a look to Eclipse&#39;s console and look for the exception to copy at this post","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>First of all you should try to run TOMCAT using it's own .bat and not Eclipse. If it doesn't run problems would be on your tomcat installation and not in Eclipse and you could take a look to the files of TOMCAT_HOME/logs/  where Tomcat's errors are traced (they are so helpful).</p>\n\n<p>Anyway, if it runs properly out of eclipse, try to delete the eclipse's tomcat configuration and set it from the beginning following these simple steps</p>\n\n<ul>\n<li>Go to Eclipse's <strong>Window > Preferences > Server > Runtime Environment</strong> and\nadd a Tomcat Server browsing your TOMCAT_HOME and selecting the\nsuitable JRE (use JAVA_HOME that contains jre yet) paying attention\nto messages requiring a certain JDK depending on the TOMCAT version\n(TOMCAT_8 requires at least JDK_1.7 version and, if not set, usually\nshows errors explaining it when starting)</li>\n<li>Go to Eclipse's <strong>Window > Show View > Other... > Server > Servers</strong> and add a new \nserver; in this case the version of TOMCAT you set before. You don't \nneed to add further configuration to make TOMCAT to start.</li>\n<li>At this point if would be helpful if you hadn't any app at\nTOMCAT_HOME's webapps folder but those that came default (you must\nempty TOMCAT_HOME/work folder to remove cached stuff). Once you have\nensured it, start from ECLIPSE and cross fingers. In case of fail, take a look to Eclipse's console and look for the exception to copy at this post</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":1602913,"reputation":1,"user_id":1483627,"display_name":"Shekhar Kadam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1524210198,"creation_date":1524210198,"answer_id":49936566,"question_id":31029810,"body_markdown":"Que 1. Is your tomcat started interdependently(outside eclipse)??\r\n\r\nAns. if ans is no - then - I think you have downloaded tomcat source instead binary... you should download binary and install tomcat then it will run.\r\n\r\n1.download binary (https://tomcat.apache.org/)\r\n2.unzip it\r\n\r\n3.copy unzipped apache folder \r\n\r\n4.place this to your program files\r\n\r\n5. set JAVA_HOME to C:\\Program Files\\Java\\jdk_Your_version_num\r\n\r\n6. Run C:\\Program Files\\apache-tomcat-Your_version_num\\bin\\startup.bat ....\r\nhope your tomcat will start\r\n\r\n1.download binary Link -. https://tomcat.apache.org/\r\n\r\n1.1. choose version of your choice and click &quot;download&quot;\r\n\r\n1.2. On next page under heading &quot;Binary Distributions&quot;- download zip and proceed to next steps.\r\nAll the best.","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>Que 1. Is your tomcat started interdependently(outside eclipse)??</p>\n\n<p>Ans. if ans is no - then - I think you have downloaded tomcat source instead binary... you should download binary and install tomcat then it will run.</p>\n\n<p>1.download binary (<a href=\"https://tomcat.apache.org/\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/</a>)\n2.unzip it</p>\n\n<p>3.copy unzipped apache folder </p>\n\n<p>4.place this to your program files</p>\n\n<ol start=\"5\">\n<li><p>set JAVA_HOME to C:\\Program Files\\Java\\jdk_Your_version_num</p></li>\n<li><p>Run C:\\Program Files\\apache-tomcat-Your_version_num\\bin\\startup.bat ....\nhope your tomcat will start</p></li>\n</ol>\n\n<p>1.download binary Link -. <a href=\"https://tomcat.apache.org/\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/</a></p>\n\n<p>1.1. choose version of your choice and click \"download\"</p>\n\n<p>1.2. On next page under heading \"Binary Distributions\"- download zip and proceed to next steps.\nAll the best.</p>\n"},{"tags":[],"owner":{"account_id":15395454,"reputation":1,"user_id":11106740,"display_name":"Rahul Kanchi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550945283,"creation_date":1550945283,"answer_id":54844536,"question_id":31029810,"body_markdown":"If tomcat is working perfectly fine independently,\r\n\r\n - then change the permissions of the directory and subdirectories of tomcat\r\n\r\nEclipse is not able to read a certain file from the directory which is the reason for the error. \r\nNothing worked for me, but changing the permission helped me.","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>If tomcat is working perfectly fine independently,</p>\n\n<ul>\n<li>then change the permissions of the directory and subdirectories of tomcat</li>\n</ul>\n\n<p>Eclipse is not able to read a certain file from the directory which is the reason for the error. \nNothing worked for me, but changing the permission helped me.</p>\n"},{"tags":[],"owner":{"account_id":3062523,"reputation":607,"user_id":2594893,"display_name":"harsh"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1624545408,"creation_date":1624545408,"answer_id":68117853,"question_id":31029810,"body_markdown":"**It seems the server does not have access to two Jar files.**\r\n\r\n- Go to Servers Tab  &gt; Double Click on your Server &gt; Open Launch Configuration &gt; Classpath(tab) &gt; Click on User Entries &gt; Add External Jars  &gt; Add Boorstrap.jar and tomcat-juli.jar &gt; Apply &gt; Ok\r\n\r\nStart the server now. ","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p><strong>It seems the server does not have access to two Jar files.</strong></p>\n<ul>\n<li>Go to Servers Tab  &gt; Double Click on your Server &gt; Open Launch Configuration &gt; Classpath(tab) &gt; Click on User Entries &gt; Add External Jars  &gt; Add Boorstrap.jar and tomcat-juli.jar &gt; Apply &gt; Ok</li>\n</ul>\n<p>Start the server now.</p>\n"},{"tags":[],"owner":{"account_id":14005411,"reputation":71,"user_id":10797105,"display_name":"Syed Saad Ullah Shah"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1638342077,"creation_date":1637923326,"answer_id":70123138,"question_id":31029810,"body_markdown":"Simply changing the perspective from java to java EE on the top right corner did the trick for me. If you cannot find java EE their simply click on the other perspective icon and add java EE from there.\r\n\r\nIf this doesn&#39;t work try using different versions of jdk in your project, i changed my jdk from 11 to 1.8 and the project started running.","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>Simply changing the perspective from java to java EE on the top right corner did the trick for me. If you cannot find java EE their simply click on the other perspective icon and add java EE from there.</p>\n<p>If this doesn't work try using different versions of jdk in your project, i changed my jdk from 11 to 1.8 and the project started running.</p>\n"},{"tags":[],"owner":{"account_id":10989495,"reputation":61,"user_id":8074003,"display_name":"Hector Pasarin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1662555392,"creation_date":1662555392,"answer_id":73635931,"question_id":31029810,"body_markdown":"  If Tomcat works fine independently, close Eclipse and then right click Eclipse and choose &#39;Run as an administrator&#39;.\r\n\r\n  That worked for me in Windows 10 with Eclipse Version: 2021-06 (4.20.0) and Tomcat 10.0.20","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>If Tomcat works fine independently, close Eclipse and then right click Eclipse and choose 'Run as an administrator'.</p>\n<p>That worked for me in Windows 10 with Eclipse Version: 2021-06 (4.20.0) and Tomcat 10.0.20</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1674339466,"post_id":75176602,"comment_id":132694854,"body_markdown":"As its currently written, your answer is unclear. Please [edit] to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"As its currently written, your answer is unclear. Please <a href=\"https://stackoverflow.com/posts/75176602/edit\">edit</a> to add additional details that will help others understand how this addresses the question asked. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":27575145,"reputation":1,"user_id":21045534,"display_name":"Lucas"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1674152014,"creation_date":1674152014,"answer_id":75176602,"question_id":31029810,"body_markdown":"most likely cause it tomcat cannot run bootstrap.jar\r\nthis is due to bad jre\r\nyou can choose with jre tomcat has to use by running ConfigureTomcat tool and choosing a different \\jre\\bin\\server\\jvm.dll ","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>most likely cause it tomcat cannot run bootstrap.jar\nthis is due to bad jre\nyou can choose with jre tomcat has to use by running ConfigureTomcat tool and choosing a different \\jre\\bin\\server\\jvm.dll</p>\n"},{"tags":[],"owner":{"account_id":29541346,"reputation":1,"user_id":22639940,"display_name":"Lowees"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695753294,"creation_date":1695753050,"answer_id":77182610,"question_id":31029810,"body_markdown":"Had the same issue on MacOS. Turns out the issue had to do with the name of the directory that I had both Tomcat and Eclipse in. My directory was titled &quot;23-24&quot; This gets automatically translated to 23:24 in Eclipse when choosing a work directory. Tomcat however does not like semicolon characters so it would not start the server. I figured this out by trying to run Tomcat by itself and getting an error in terminal saying that CATALINA_HOME contained a : which it shouldn&#39;t.  I changed the name of my directory to include no &quot;-&quot; characters and no spaces and it seemed to have fixed this issue for me. ","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>Had the same issue on MacOS. Turns out the issue had to do with the name of the directory that I had both Tomcat and Eclipse in. My directory was titled &quot;23-24&quot; This gets automatically translated to 23:24 in Eclipse when choosing a work directory. Tomcat however does not like semicolon characters so it would not start the server. I figured this out by trying to run Tomcat by itself and getting an error in terminal saying that CATALINA_HOME contained a : which it shouldn't.  I changed the name of my directory to include no &quot;-&quot; characters and no spaces and it seemed to have fixed this issue for me.</p>\n"}],"owner":{"account_id":4967090,"reputation":331,"user_id":3996008,"accept_rate":11,"display_name":"Nitesh Kataria"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130916,"favorite_count":0,"down_vote_count":1,"up_vote_count":30,"answer_count":8,"score":29,"last_activity_date":1695753294,"creation_date":1435157335,"question_id":31029810,"body_markdown":"When I run apache tomcat7.0.56 in Eclipse, I get an error\r\n&gt; **Error: Could not find or load main class org.apache.catalina.startup.Bootstrap**\r\n\r\nHow can I fix the problem?","title":"Could not find or load main class org.apache.catalina.startup.Bootstrap","body":"<p>When I run apache tomcat7.0.56 in Eclipse, I get an error</p>\n\n<blockquote>\n  <p><strong>Error: Could not find or load main class org.apache.catalina.startup.Bootstrap</strong></p>\n</blockquote>\n\n<p>How can I fix the problem?</p>\n"},{"tags":["java","spring","telegram-bot","reminders"],"comments":[{"owner":{"account_id":25926563,"reputation":119,"user_id":19648355,"display_name":"Irremediable"},"score":0,"creation_date":1695757965,"post_id":77181874,"comment_id":136066568,"body_markdown":"I am not familiar which library/API you&#39;re using, but it seems you do not send your messages (method &#39;sendLectureReminder&#39;). Also, I would recommend you to debug your code via debugger.","body":"I am not familiar which library/API you&#39;re using, but it seems you do not send your messages (method &#39;sendLectureReminder&#39;). Also, I would recommend you to debug your code via debugger."}],"owner":{"account_id":29135590,"reputation":1,"user_id":22319844,"display_name":"Vlad Chuklin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695752970,"creation_date":1695745824,"question_id":77181874,"body_markdown":"Can you help me please? I am writing a telegram bot that will send a reminder about the start of the lecture at the university five minutes before the start of the lecture. This is the logic that should be: when a user writes his group, I make a request to the API `https://nure-dev.pp.ua/api/groups` to get the group identifier, then using this group I get the identifier (groupId), which should go to `https://nure-dev.pp.ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995` and then follow the full API link `https://nure-dev.pp. ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995` and then from this API you will receive a schedule and logic with a reminder. I use Spring Boot.\r\n\r\nExample:\r\n\r\n&gt; /start  \r\nHello, Vlad! This telegram bot will notify you about the beginning of the lecture. To find out more, write /all  \r\n/all  \r\neverything you need  \r\n/setgroup  \r\nEnter your group (Example: KNT-23-3)  \r\nKNT-23-3  \r\nGroup successfully installed: KNT-23-3  \r\n/remind  \r\n\r\nAnd this tag `/remind` doesn&#39;t work. I don&#39;t receive reminders about the start of the lecture in five minutes. What should I do?\r\n\r\nMy base code: \r\n  \r\n        `class UniversityApiService`\r\n    \r\n\r\n```\r\n@Component\r\npublic class UniversityApiService {\r\n\r\n    private final RestTemplate restTemplate;\r\n    private static final String GROUPS_API_URL = &quot;https://nure-dev.pp.ua/api/groups&quot;;\r\n    private static final String TIME_PARAMETERS = &quot;&amp;start_time=1695365795&amp;end_time=1697621662&quot;;\r\n    private final ObjectMapper objectMapper;\r\n\r\n    public UniversityApiService(RestTemplate restTemplate, ObjectMapper objectMapper) {\r\n        this.restTemplate = restTemplate;\r\n        this.objectMapper=objectMapper;\r\n    }\r\n\r\n    public List&lt;UniversityGroup&gt; getGroups() {\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\r\n\r\n        HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n\r\n        ResponseEntity&lt;?&gt; responseEntity;\r\n        try {\r\n            responseEntity = restTemplate.exchange(\r\n                    GROUPS_API_URL,\r\n                    HttpMethod.GET,\r\n                    entity,\r\n                    String.class  // Change the response type to String\r\n            );\r\n        } catch (HttpStatusCodeException e) {\r\n            MediaType contentType = e.getResponseHeaders().getContentType();\r\n            if (contentType != null) {\r\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\r\n            }\r\n\r\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\r\n                // Handle plain text response\r\n                String plainTextResponse = e.getResponseBodyAsString();\r\n                try {\r\n                    // Use ObjectMapper to deserialize the plain text response into a list of UniversityGroup objects\r\n                    List&lt;UniversityGroup&gt; universityGroups = objectMapper.readValue(plainTextResponse, new TypeReference&lt;List&lt;UniversityGroup&gt;&gt;() {});\r\n                    return universityGroups;\r\n                } catch (IOException ex) {\r\n                    // Handle deserialization error\r\n                    ex.printStackTrace();\r\n                    return Collections.emptyList();\r\n                }\r\n            } else {\r\n                // Handle other exceptions\r\n                throw e;\r\n            }\r\n        }\r\n\r\n        // can also add a check for JSON content type here and parse it accordingly\r\n        // \r\n\r\n        return Collections.emptyList();\r\n    }\r\n\r\n    public String getGroupIdByName(String groupName) {\r\n        List&lt;UniversityGroup&gt; groups = getGroups();\r\n\r\n        if (groups != null) {\r\n            for (UniversityGroup group : groups) {\r\n                if (group.getName().equalsIgnoreCase(groupName)) {\r\n                    return group.getId();\r\n                }\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n\r\n    public UniversitySchedule getNextLectureForGroup(String groupId) {\r\n        ResponseEntity&lt;?&gt; responseEntity;\r\n        try {\r\n            responseEntity = restTemplate.exchange(\r\n                    &quot;https://nure-dev.pp.ua/api/schedule?type=group&amp;id=&quot; + groupId + TIME_PARAMETERS,\r\n                    HttpMethod.GET,\r\n                    null,\r\n                    String.class  // Change the response type to String\r\n            );\r\n        } catch (HttpStatusCodeException e) {\r\n            MediaType contentType = e.getResponseHeaders().getContentType();\r\n            if (contentType != null) {\r\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\r\n            }\r\n\r\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\r\n                // Handle plain text response\r\n                String plainTextResponse = e.getResponseBodyAsString();\r\n                try {\r\n                    // Use ObjectMapper to deserialize the plain text response into a UniversitySchedule object\r\n                    UniversitySchedule universitySchedule = objectMapper.readValue(plainTextResponse, UniversitySchedule.class);\r\n                    return universitySchedule;\r\n                } catch (IOException ex) {\r\n                    // Handle deserialization error\r\n                    ex.printStackTrace();\r\n                }\r\n            } else {\r\n                // Handle other exceptions\r\n                throw e;\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n```\r\n\r\n     `class TelegramBot`\r\n\r\n\r\n```\r\n@Component\r\npublic class TelegramBot extends TelegramLongPollingBot {\r\n\r\n    private final BotConfig config;\r\n    private String userGroup;\r\n\r\n    private final ChatIdHolder chatIdHolder;\r\n    private final UniversityApiService universityApiService;\r\n\r\n    @Autowired\r\n    public TelegramBot(BotConfig config, UniversityApiService universityApiService, ChatIdHolder chatIdHolder){\r\n        this.config=config;\r\n        this.universityApiService= universityApiService;\r\n        this.chatIdHolder=chatIdHolder;\r\n    }\r\n\r\n\r\n    @Override\r\n    public String getBotUsername() {\r\n        return config.getBotName();\r\n    }\r\n\r\n    @Override\r\n    public String getBotToken() {\r\n        return config.getToken();\r\n    }\r\n\r\n    @Override\r\n    public void onUpdateReceived(Update update) {\r\n\r\n        if (update.hasMessage() &amp;&amp; update.getMessage().hasText()){\r\n          String messageText = update.getMessage().getText();\r\n          long chatId= update.getMessage().getChatId();\r\n            chatIdHolder.setChatId(chatId);\r\n\r\n           if (messageText.startsWith(&quot;/start&quot;)){\r\n               startCommandReceived(chatId,update.getMessage().getChat().getFirstName());\r\n            }else if(messageText.startsWith(&quot;/all&quot;)){\r\n               startAllCommands(chatId);\r\n           }else if(messageText.startsWith(&quot;/setgroup&quot;)){\r\n               sendMessage(chatId, &quot;   (: -23-3) &quot;);\r\n\r\n           }else if(messageText.startsWith(&quot;/remind&quot;)){\r\n               if (userGroup != null) {\r\n                   processUserGroup(userGroup);\r\n               } else {\r\n                   sendMessage(chatId, &quot;  ,  /setgroup.&quot;);\r\n               }\r\n           }else if (countCapitalLetters(messageText) &lt; 2){\r\n               sendMessage(chatId, &quot;,      .  ,   /all&quot;);\r\n           }else if (countCapitalLetters(messageText) &gt; 2) { // More than two capital letters\r\n               sendMessage(chatId, &quot;  : &quot; + messageText);\r\n               userGroup = messageText; // Update userGroup\r\n           }\r\n\r\n        }\r\n\r\n    }\r\n    private int countCapitalLetters(String text) {\r\n        int count = 0;\r\n        for (char c : text.toCharArray()) {\r\n            if (Character.isUpperCase(c)) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }\r\n\r\n    //  \r\n    private void sendMessage(long chatId, String textToSend){\r\n        SendMessage message=new SendMessage();\r\n        message.setChatId(String.valueOf(chatId));\r\n        message.setText(textToSend);\r\n\r\n        try{\r\n            execute(message);\r\n        } catch (TelegramApiException e) {\r\n            throw new RuntimeException(e);\r\n        }\r\n    }\r\n    public void sendLectureReminder(long chatId,String remiderText){\r\n        SendMessage message2= new SendMessage();\r\n        message2.setChatId(String.valueOf(chatId));\r\n        message2.setText(remiderText);\r\n    }\r\n\r\n    public void processUserGroup(String groupName) {\r\n        // Step 1: Get the group ID by group name\r\n        String groupId = universityApiService.getGroupIdByName(groupName);\r\n\r\n        if (groupId != null) {\r\n            // Step 2: Get the next lecture for the group\r\n            UniversitySchedule nextLecture = universityApiService.getNextLectureForGroup(groupId);\r\n\r\n            if (nextLecture != null) {\r\n                // Step 3: Calculate the reminder time (5 minutes before the lecture)\r\n                long lectureStartTime = nextLecture.getStart_time();\r\n                long reminderTime = lectureStartTime - (5 * 60);\r\n\r\n                // Step 4: Convert the reminder time to a human-readable format (if needed)\r\n                String reminderTimeFormatted = unixTimestampToDateTime(reminderTime);\r\n\r\n                // Step 5: Create the reminder text\r\n                String reminderText = &quot;Your next lecture is at &quot; + reminderTimeFormatted +\r\n                        &quot;. Lecture: &quot; + nextLecture.getSubject().getTitle();\r\n\r\n                // Step 6: Send the reminder\r\n                long chatId = chatIdHolder.getChatId();\r\n                sendLectureReminder(chatId, reminderText);\r\n            }\r\n        }\r\n    }\r\n\r\n    private String unixTimestampToDateTime(long unixTimestamp) {\r\n        try {\r\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\r\n            Date date = new Date(unixTimestamp * 1000);\r\n            return dateFormat.format(date);\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n            return null;\r\n        }\r\n    }\r\n\r\n    private void startCommandReceived(long chatId, String name){\r\n\r\n        String answer= &quot;, &quot; +name+ &quot;!        .    /all &quot;;\r\n        sendMessage(chatId, answer);\r\n\r\n    }\r\n\r\n    private void startAllCommands(long chatId){\r\n        String allCommands= &quot;  &quot;;\r\n        sendMessage(chatId, allCommands);\r\n\r\n    }\r\n\r\n    public String getUserGroup(){\r\n        return userGroup;\r\n    }\r\n    public void setUserGroup(String userGroup){\r\n\r\n    }\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n`class ChatIdHolder`\r\n\r\n\r\n```\r\n@Component\r\n@Data\r\npublic class ChatIdHolder {\r\n    private long chatId;\r\n\r\n\r\n}\r\n```\r\n\r\n  `class UniversityGroup(UniversityScedule similare)`\r\n\r\n\r\n```\r\n@Data\r\npublic class UniversityGroup {\r\n\r\n    private String id;\r\n    private String name;\r\n}\r\n\r\n```\r\n\r\n","title":"Java.Error with telegram bot. Why don&#39;t I receive reminders?","body":"<p>Can you help me please? I am writing a telegram bot that will send a reminder about the start of the lecture at the university five minutes before the start of the lecture. This is the logic that should be: when a user writes his group, I make a request to the API <code>https://nure-dev.pp.ua/api/groups</code> to get the group identifier, then using this group I get the identifier (groupId), which should go to <code>https://nure-dev.pp.ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995</code> and then follow the full API link <code>https://nure-dev.pp. ua/api/schedule?type=group&amp;id= + groupId + &amp;start_time=1695365795&amp;end_time=1695408995</code> and then from this API you will receive a schedule and logic with a reminder. I use Spring Boot.</p>\n<p>Example:</p>\n<blockquote>\n<p>/start<br />\nHello, Vlad! This telegram bot will notify you about the beginning of the lecture. To find out more, write /all<br />\n/all<br />\neverything you need<br />\n/setgroup<br />\nEnter your group (Example: KNT-23-3)<br />\nKNT-23-3<br />\nGroup successfully installed: KNT-23-3<br />\n/remind</p>\n</blockquote>\n<p>And this tag <code>/remind</code> doesn't work. I don't receive reminders about the start of the lecture in five minutes. What should I do?</p>\n<p>My base code:</p>\n<pre><code>    `class UniversityApiService`\n</code></pre>\n<pre><code>@Component\npublic class UniversityApiService {\n\n    private final RestTemplate restTemplate;\n    private static final String GROUPS_API_URL = &quot;https://nure-dev.pp.ua/api/groups&quot;;\n    private static final String TIME_PARAMETERS = &quot;&amp;start_time=1695365795&amp;end_time=1697621662&quot;;\n    private final ObjectMapper objectMapper;\n\n    public UniversityApiService(RestTemplate restTemplate, ObjectMapper objectMapper) {\n        this.restTemplate = restTemplate;\n        this.objectMapper=objectMapper;\n    }\n\n    public List&lt;UniversityGroup&gt; getGroups() {\n        HttpHeaders headers = new HttpHeaders();\n        headers.setAccept(Collections.singletonList(MediaType.APPLICATION_JSON));\n\n        HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\n\n        ResponseEntity&lt;?&gt; responseEntity;\n        try {\n            responseEntity = restTemplate.exchange(\n                    GROUPS_API_URL,\n                    HttpMethod.GET,\n                    entity,\n                    String.class  // Change the response type to String\n            );\n        } catch (HttpStatusCodeException e) {\n            MediaType contentType = e.getResponseHeaders().getContentType();\n            if (contentType != null) {\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\n            }\n\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\n                // Handle plain text response\n                String plainTextResponse = e.getResponseBodyAsString();\n                try {\n                    // Use ObjectMapper to deserialize the plain text response into a list of UniversityGroup objects\n                    List&lt;UniversityGroup&gt; universityGroups = objectMapper.readValue(plainTextResponse, new TypeReference&lt;List&lt;UniversityGroup&gt;&gt;() {});\n                    return universityGroups;\n                } catch (IOException ex) {\n                    // Handle deserialization error\n                    ex.printStackTrace();\n                    return Collections.emptyList();\n                }\n            } else {\n                // Handle other exceptions\n                throw e;\n            }\n        }\n\n        // can also add a check for JSON content type here and parse it accordingly\n        // \n\n        return Collections.emptyList();\n    }\n\n    public String getGroupIdByName(String groupName) {\n        List&lt;UniversityGroup&gt; groups = getGroups();\n\n        if (groups != null) {\n            for (UniversityGroup group : groups) {\n                if (group.getName().equalsIgnoreCase(groupName)) {\n                    return group.getId();\n                }\n            }\n        }\n\n        return null;\n    }\n\n\n    public UniversitySchedule getNextLectureForGroup(String groupId) {\n        ResponseEntity&lt;?&gt; responseEntity;\n        try {\n            responseEntity = restTemplate.exchange(\n                    &quot;https://nure-dev.pp.ua/api/schedule?type=group&amp;id=&quot; + groupId + TIME_PARAMETERS,\n                    HttpMethod.GET,\n                    null,\n                    String.class  // Change the response type to String\n            );\n        } catch (HttpStatusCodeException e) {\n            MediaType contentType = e.getResponseHeaders().getContentType();\n            if (contentType != null) {\n                System.out.println(&quot;Response Content Type: &quot; + contentType.toString());\n            }\n\n            if (contentType != null &amp;&amp; contentType.includes(MediaType.TEXT_PLAIN)) {\n                // Handle plain text response\n                String plainTextResponse = e.getResponseBodyAsString();\n                try {\n                    // Use ObjectMapper to deserialize the plain text response into a UniversitySchedule object\n                    UniversitySchedule universitySchedule = objectMapper.readValue(plainTextResponse, UniversitySchedule.class);\n                    return universitySchedule;\n                } catch (IOException ex) {\n                    // Handle deserialization error\n                    ex.printStackTrace();\n                }\n            } else {\n                // Handle other exceptions\n                throw e;\n            }\n        }\n\n        return null;\n    }\n}\n</code></pre>\n<pre><code> `class TelegramBot`\n</code></pre>\n<pre><code>@Component\npublic class TelegramBot extends TelegramLongPollingBot {\n\n    private final BotConfig config;\n    private String userGroup;\n\n    private final ChatIdHolder chatIdHolder;\n    private final UniversityApiService universityApiService;\n\n    @Autowired\n    public TelegramBot(BotConfig config, UniversityApiService universityApiService, ChatIdHolder chatIdHolder){\n        this.config=config;\n        this.universityApiService= universityApiService;\n        this.chatIdHolder=chatIdHolder;\n    }\n\n\n    @Override\n    public String getBotUsername() {\n        return config.getBotName();\n    }\n\n    @Override\n    public String getBotToken() {\n        return config.getToken();\n    }\n\n    @Override\n    public void onUpdateReceived(Update update) {\n\n        if (update.hasMessage() &amp;&amp; update.getMessage().hasText()){\n          String messageText = update.getMessage().getText();\n          long chatId= update.getMessage().getChatId();\n            chatIdHolder.setChatId(chatId);\n\n           if (messageText.startsWith(&quot;/start&quot;)){\n               startCommandReceived(chatId,update.getMessage().getChat().getFirstName());\n            }else if(messageText.startsWith(&quot;/all&quot;)){\n               startAllCommands(chatId);\n           }else if(messageText.startsWith(&quot;/setgroup&quot;)){\n               sendMessage(chatId, &quot;   (: -23-3) &quot;);\n\n           }else if(messageText.startsWith(&quot;/remind&quot;)){\n               if (userGroup != null) {\n                   processUserGroup(userGroup);\n               } else {\n                   sendMessage(chatId, &quot;  ,  /setgroup.&quot;);\n               }\n           }else if (countCapitalLetters(messageText) &lt; 2){\n               sendMessage(chatId, &quot;,      .  ,   /all&quot;);\n           }else if (countCapitalLetters(messageText) &gt; 2) { // More than two capital letters\n               sendMessage(chatId, &quot;  : &quot; + messageText);\n               userGroup = messageText; // Update userGroup\n           }\n\n        }\n\n    }\n    private int countCapitalLetters(String text) {\n        int count = 0;\n        for (char c : text.toCharArray()) {\n            if (Character.isUpperCase(c)) {\n                count++;\n            }\n        }\n        return count;\n    }\n\n    //  \n    private void sendMessage(long chatId, String textToSend){\n        SendMessage message=new SendMessage();\n        message.setChatId(String.valueOf(chatId));\n        message.setText(textToSend);\n\n        try{\n            execute(message);\n        } catch (TelegramApiException e) {\n            throw new RuntimeException(e);\n        }\n    }\n    public void sendLectureReminder(long chatId,String remiderText){\n        SendMessage message2= new SendMessage();\n        message2.setChatId(String.valueOf(chatId));\n        message2.setText(remiderText);\n    }\n\n    public void processUserGroup(String groupName) {\n        // Step 1: Get the group ID by group name\n        String groupId = universityApiService.getGroupIdByName(groupName);\n\n        if (groupId != null) {\n            // Step 2: Get the next lecture for the group\n            UniversitySchedule nextLecture = universityApiService.getNextLectureForGroup(groupId);\n\n            if (nextLecture != null) {\n                // Step 3: Calculate the reminder time (5 minutes before the lecture)\n                long lectureStartTime = nextLecture.getStart_time();\n                long reminderTime = lectureStartTime - (5 * 60);\n\n                // Step 4: Convert the reminder time to a human-readable format (if needed)\n                String reminderTimeFormatted = unixTimestampToDateTime(reminderTime);\n\n                // Step 5: Create the reminder text\n                String reminderText = &quot;Your next lecture is at &quot; + reminderTimeFormatted +\n                        &quot;. Lecture: &quot; + nextLecture.getSubject().getTitle();\n\n                // Step 6: Send the reminder\n                long chatId = chatIdHolder.getChatId();\n                sendLectureReminder(chatId, reminderText);\n            }\n        }\n    }\n\n    private String unixTimestampToDateTime(long unixTimestamp) {\n        try {\n            SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;);\n            Date date = new Date(unixTimestamp * 1000);\n            return dateFormat.format(date);\n        } catch (Exception e) {\n            e.printStackTrace();\n            return null;\n        }\n    }\n\n    private void startCommandReceived(long chatId, String name){\n\n        String answer= &quot;, &quot; +name+ &quot;!        .    /all &quot;;\n        sendMessage(chatId, answer);\n\n    }\n\n    private void startAllCommands(long chatId){\n        String allCommands= &quot;  &quot;;\n        sendMessage(chatId, allCommands);\n\n    }\n\n    public String getUserGroup(){\n        return userGroup;\n    }\n    public void setUserGroup(String userGroup){\n\n    }\n\n}\n\n</code></pre>\n<p><code>class ChatIdHolder</code></p>\n<pre><code>@Component\n@Data\npublic class ChatIdHolder {\n    private long chatId;\n\n\n}\n</code></pre>\n<p><code>class UniversityGroup(UniversityScedule similare)</code></p>\n<pre><code>@Data\npublic class UniversityGroup {\n\n    private String id;\n    private String name;\n}\n\n</code></pre>\n"},{"tags":["java","button","javafx","observablelist"],"comments":[{"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"score":0,"creation_date":1695676493,"post_id":77175193,"comment_id":136053780,"body_markdown":"I don&#39;t know what is going wrong with your app (I don&#39;t see an obvious error).  It would take time to debug, and I may not have the skill to do that as well.  Add a listener on the children list of the group which contains the tube and particles and set a breakpoint in it (or dump the necessary children info to system out).  Run your application with a small number of particles, e.g. 3-5.  Each time the breakpoint is hit ensure the change to the group of 3D nodes matches what you expect.","body":"I don&#39;t know what is going wrong with your app (I don&#39;t see an obvious error).  It would take time to debug, and I may not have the skill to do that as well.  Add a listener on the children list of the group which contains the tube and particles and set a breakpoint in it (or dump the necessary children info to system out).  Run your application with a small number of particles, e.g. 3-5.  Each time the breakpoint is hit ensure the change to the group of 3D nodes matches what you expect."},{"owner":{"account_id":29171652,"reputation":1,"user_id":22347890,"display_name":"Darina"},"score":0,"creation_date":1695678503,"post_id":77175193,"comment_id":136053973,"body_markdown":"Thanks for watching. I tracked the changes the coordinates of the particles: the changes are small (within a few pixels), but they are there. It would be noticeable. But the picture is absolutely static.","body":"Thanks for watching. I tracked the changes the coordinates of the particles: the changes are small (within a few pixels), but they are there. It would be noticeable. But the picture is absolutely static."}],"answers":[{"comments":[{"owner":{"account_id":29171652,"reputation":1,"user_id":22347890,"display_name":"Darina"},"score":0,"creation_date":1695756496,"post_id":77180700,"comment_id":136066326,"body_markdown":"Thanks, everything works. I finally figured out for myself what a Property class is. Now I will continue to solve problems with the minimization class. Thank you for helping to solve the problem of the Tube class. It also helped a lot.","body":"Thanks, everything works. I finally figured out for myself what a Property class is. Now I will continue to solve problems with the minimization class. Thank you for helping to solve the problem of the Tube class. It also helped a lot."}],"tags":[],"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1695737133,"creation_date":1695736545,"answer_id":77180700,"question_id":77175193,"body_markdown":"Nothing in your code ever updates the UI. \r\n\r\nYour `Tube` class contains a reference to a UI object (a `Cylinder`). When you create a `Tube` instance, you set the height and radius of the `Cylinder` based on the `height` and `radius` of the `Tube`.\r\n\r\nHowever, if you later change the height or radius of the `Tube` via the `setHeight(...)` or `setRadius(...)` methods, you don&#39;t update the properties of the `Cylinder`. So the UI never changes.\r\n\r\nYou need:\r\n\r\n```\r\npublic class Tube {\r\n\r\n    private final Cylinder tube;\r\n\r\n    // ...\r\n\r\n\r\n    public void setRadius(double radius) {\r\n        this.radius = radius;\r\n        tube.setRadius(radius);\r\n    }\r\n    public void setHeight(double height) {\r\n        this.height = height;\r\n        tube.setHeight(height);\r\n    }\r\n\r\n}\r\n```\r\n\r\nSimilarly for the `Particle` class, if the properties of the `Particle` are changed, you need to update the properties of the UI object (the `Sphere`):\r\n\r\n```\r\npublic class Particle {\r\n\r\n    private final Sphere particle;\r\n\r\n    // ...\r\n\r\n    public void setPhi(double phi) {\r\n        this.phi = phi;\r\n        particle.setTranslateX(rho * Math.cos(phi));\r\n        particle.setTranslateZ(rho * Math.sin(phi));\r\n    }\r\n\r\n    public void setRho(double rho) {\r\n        this.rho = rho;\r\n        particle.setTranslateX(rho * Math.cos(phi));\r\n        particle.setTranslateZ(rho * Math.sin(phi));\r\n    }\r\n\r\n    public void setZ(double z) {\r\n        this.z = z;\r\n        particle.setTranslateY(z);\r\n    }\r\n\r\n}\r\n```\r\n\r\n(Unchanged code omitted in both classes.)\r\n\r\n---\r\n\r\nA more &quot;JavaFX&quot; approach would be to separate the data class from the view of the data, and use JavaFX properties to keep everything in sync. To give you a brief flavor of this, the implementation of the `Tube` would look something like:\r\n\r\n```\r\npublic class Tube {\r\n\r\n    private final DoubleProperty height = new SimpleDoubleProperty();\r\n\r\n    public DoubleProperty heightProperty() {\r\n        return height ;\r\n    }\r\n\r\n    public final double getHeight() {\r\n        return heightProperty().get();\r\n    }\r\n\r\n    public final void setHeight(double height) {\r\n        heightProperty().set(height);\r\n    }\r\n\r\n    private final DoubleProperty radius = new SimpleDoubleProperty();\r\n\r\n    public DoubleProperty radiusProperty() {\r\n        return radius;\r\n    }\r\n\r\n    public final double getRadius() {\r\n        return radiusProperty().get();\r\n    }\r\n\r\n    public final void setRadius(double radius) {\r\n        radiusProperty().set(radius);\r\n    }\r\n\r\n    public Tube(double radius, double height) {\r\n        setRadius(radius);\r\n        setHeight(height);\r\n    }\r\n}\r\n```\r\n\r\n```\r\npublic class TubeView {\r\n\r\n    private final Tube tube ;\r\n    private final Cylinder view ;\r\n    private Color color;\r\n\r\n    public TubeView(Tube tube, Color color) {\r\n        this.tube = tube;\r\n        this.view = new Cylinder();\r\n        this.color = color;\r\n        view.setMaterial(new PhongMaterial(color));\r\n        view.heightProperty().bind(tube.heightProperty());\r\n        view.radiusProperty().bind(tube.radiusProperty());\r\n    }\r\n\r\n    public Node asNode() {\r\n        return view;\r\n    }\r\n}\r\n```\r\n\r\n    \r\n\r\n","title":"Why doesn&#39;t the location of 3D objects change when you click on the button?","body":"<p>Nothing in your code ever updates the UI.</p>\n<p>Your <code>Tube</code> class contains a reference to a UI object (a <code>Cylinder</code>). When you create a <code>Tube</code> instance, you set the height and radius of the <code>Cylinder</code> based on the <code>height</code> and <code>radius</code> of the <code>Tube</code>.</p>\n<p>However, if you later change the height or radius of the <code>Tube</code> via the <code>setHeight(...)</code> or <code>setRadius(...)</code> methods, you don't update the properties of the <code>Cylinder</code>. So the UI never changes.</p>\n<p>You need:</p>\n<pre><code>public class Tube {\n\n    private final Cylinder tube;\n\n    // ...\n\n\n    public void setRadius(double radius) {\n        this.radius = radius;\n        tube.setRadius(radius);\n    }\n    public void setHeight(double height) {\n        this.height = height;\n        tube.setHeight(height);\n    }\n\n}\n</code></pre>\n<p>Similarly for the <code>Particle</code> class, if the properties of the <code>Particle</code> are changed, you need to update the properties of the UI object (the <code>Sphere</code>):</p>\n<pre><code>public class Particle {\n\n    private final Sphere particle;\n\n    // ...\n\n    public void setPhi(double phi) {\n        this.phi = phi;\n        particle.setTranslateX(rho * Math.cos(phi));\n        particle.setTranslateZ(rho * Math.sin(phi));\n    }\n\n    public void setRho(double rho) {\n        this.rho = rho;\n        particle.setTranslateX(rho * Math.cos(phi));\n        particle.setTranslateZ(rho * Math.sin(phi));\n    }\n\n    public void setZ(double z) {\n        this.z = z;\n        particle.setTranslateY(z);\n    }\n\n}\n</code></pre>\n<p>(Unchanged code omitted in both classes.)</p>\n<hr />\n<p>A more &quot;JavaFX&quot; approach would be to separate the data class from the view of the data, and use JavaFX properties to keep everything in sync. To give you a brief flavor of this, the implementation of the <code>Tube</code> would look something like:</p>\n<pre><code>public class Tube {\n\n    private final DoubleProperty height = new SimpleDoubleProperty();\n\n    public DoubleProperty heightProperty() {\n        return height ;\n    }\n\n    public final double getHeight() {\n        return heightProperty().get();\n    }\n\n    public final void setHeight(double height) {\n        heightProperty().set(height);\n    }\n\n    private final DoubleProperty radius = new SimpleDoubleProperty();\n\n    public DoubleProperty radiusProperty() {\n        return radius;\n    }\n\n    public final double getRadius() {\n        return radiusProperty().get();\n    }\n\n    public final void setRadius(double radius) {\n        radiusProperty().set(radius);\n    }\n\n    public Tube(double radius, double height) {\n        setRadius(radius);\n        setHeight(height);\n    }\n}\n</code></pre>\n<pre><code>public class TubeView {\n\n    private final Tube tube ;\n    private final Cylinder view ;\n    private Color color;\n\n    public TubeView(Tube tube, Color color) {\n        this.tube = tube;\n        this.view = new Cylinder();\n        this.color = color;\n        view.setMaterial(new PhongMaterial(color));\n        view.heightProperty().bind(tube.heightProperty());\n        view.radiusProperty().bind(tube.radiusProperty());\n    }\n\n    public Node asNode() {\n        return view;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":29171652,"reputation":1,"user_id":22347890,"display_name":"Darina"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":108,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77180700,"answer_count":1,"score":-1,"last_activity_date":1695752818,"creation_date":1695669118,"question_id":77175193,"body_markdown":"I am a student and I am studying physical modeling of processes. I&#39;m new to GUI. I have two processes. The first process randomly scatters the balls onto the surface of the cylinder. Here&#39;s the code for it\r\n\r\n```\r\npublic class Generation {\r\n    private static final Color[] COLORS = new Color[] { RED, YELLOW, GREEN, BROWN, BLUE, PINK, BLACK };\r\n    private final Tube tube;\r\n    private final int numberOfParticle;\r\n    private final double radius;\r\n    public Generation(Tube tube, int numberOfParticle) {\r\n        this.tube = tube;\r\n        this.numberOfParticle = numberOfParticle;\r\n        radius = Math.sqrt(tube.getRadius()*tube.getHeight()/(2*numberOfParticle));\r\n    }\r\n    private Particle RandomParticle (Color color) {\r\n        double phi = 2*Math.PI*Math.random();\r\n        double z = GetRandomNumberUsingNextDouble(-tube.getHeight()/2,tube.getHeight()/2);\r\n        Particle particle = new Particle(phi,tube.getRadius(),z,radius,color);\r\n        return particle;\r\n    }\r\n    private static double GetRandomNumberUsingNextDouble(double min, double max){\r\n        Random r = new Random();\r\n        return min + (max - min) * r.nextDouble();\r\n    }\r\n    public ObservableList&lt;Particle&gt; ParticlesGeneration() {\r\n        ObservableList&lt;Particle&gt; particlesList = FXCollections.observableArrayList()\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            Particle particle = RandomParticle(COLORS[i % COLORS.length]);\r\n            particlesList.add(particle);\r\n        }\r\n        return particlesList;\r\n    }\r\n}\r\n```\r\n\r\nParticle class\r\n\r\n```\r\npublic class Particle {\r\n   private final double radius;\r\n   private double phi, rho, z;\r\n   private final Sphere particle;\r\n   public Particle(double phi, double rho, double z, double radius, Color color) {\r\n       this.particle = new Sphere(radius);\r\n       this.radius = radius;\r\n       this.phi = phi;\r\n       this.rho = rho;\r\n       this.z = z;\r\n       particle.setMaterial(new PhongMaterial(color));\r\n       particle.setTranslateX(rho * Math.cos(phi));\r\n       particle.setTranslateY(z);\r\n       particle.setTranslateZ(rho * Math.sin(phi));\r\n   }\r\n   private static double distance(double x1, double y1, double x2, double y2) {\r\n       x2 -= x1;\r\n       y2 -= y1;\r\n       return Math.sqrt(x2 * x2 + y2 * y2);\r\n   }\r\n   public double distance(Particle p) { return distance(getPhi()*getRho(), getZ(), p.getPhi()*p.getRho(),p.getZ());}\r\n   public double getRadius() { return radius; }\r\n    public double getPhi() { return phi; }\r\n    public void setPhi(double phi) { this.phi = phi; }\r\n    public double getRho() { return rho; }\r\n    public void setRho(double rho) { this.rho = rho; }\r\n    public double getZ() { return z; }\r\n    public void setZ(double z) { this.z = z; }\r\n    public Sphere getParticle() { return particle; }\r\n}\r\n```\r\n\r\nCylinder class\r\n\r\n```\r\npublic class Tube {\r\n    private double radius, height;\r\n    private final Cylinder tube;\r\n    private final Color color;\r\n    public Tube(double radius, double height, Color color) {\r\n        this.height = height;\r\n        this.color = color;\r\n        this.radius = radius;\r\n        this.tube = new Cylinder(radius,height);\r\n        tube.setMaterial(new PhongMaterial(color));\r\n    }\r\n    public Color getColor() { return color; }\r\n    public double getRadius() { return radius; }\r\n    public double getHeight() { return height; }\r\n    public Cylinder getTube() { return tube; }\r\n    public void setRadius(double radius) { this.radius = radius; }\r\n    public void setHeight(double height) { this.height = height; }\r\n}\r\n```\r\n\r\nThe second process is to create a dense packing of randomly scattered particles\r\n\r\n```\r\npublic class Minimization {\r\n    private double COEFFICIENT_FOR_ANGLE = 1;\r\n    private double COEFFICIENT_FOR_Z = 1;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL = 0.0001;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_Z = 0.0001;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final double ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE = 0.0001;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    public static final double MAX_VALUE = 1.7976931348623157E308;\r\n    private final ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles;\r\n    private final int numberOfParticle, degree;\r\n    private final double heightTube;\r\n    public Minimization(ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles, int degree, Tube tube) {\r\n        this.poissonDiskCoordinatesParticles = poissonDiskCoordinatesParticles;\r\n        this.degree = degree;\r\n        numberOfParticle = poissonDiskCoordinatesParticles.size();\r\n        heightTube = tube.getHeight();\r\n    }\r\n    public ObservableList&lt;Particle&gt; minimization () {\r\n        ObservableList&lt;Particle&gt; list = poissonDiskCoordinatesParticles;\r\n        double energyOld = MAX_VALUE;\r\n        double energyNew = energyOfSystem(list);\r\n        while (COEFFICIENT_FOR_ANGLE &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL &amp;&amp; COEFFICIENT_FOR_Z &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_Z &amp;&amp; energyOld &gt; energyNew) {\r\n            if (energyOld - energyNew &lt; ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE) {\r\n                COEFFICIENT_FOR_Z = COEFFICIENT_FOR_Z/2;\r\n                COEFFICIENT_FOR_ANGLE = COEFFICIENT_FOR_ANGLE/2;\r\n            }\r\n            energyOld = energyNew;\r\n            stepOfMinimization(list);\r\n            energyNew = energyOfSystem(list);\r\n        }\r\n        return list;\r\n    }\r\n    private void stepOfMinimization (ObservableList&lt;Particle&gt; list) {\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            Particle particle = newParticle(list, i);\r\n            if (energyOfSystem(list) &lt; energyOfSystem(list,particle,i)) {\r\n                list.set(i, particle);\r\n            }\r\n        }\r\n    }\r\n    private Particle newParticle(ObservableList&lt;Particle&gt; coordinates, int i) {\r\n        Particle particle = coordinates.get(i);\r\n        double ForcePhi = 0.0;\r\n        double ForceZ = 0.0;\r\n        for (int j = 0; j &lt; numberOfParticle; j++) {\r\n            Particle jParticle = coordinates.get(j);\r\n            if (i != j) {\r\n                ForcePhi += (numberOfParticle * particle.getRho() *\r\n                        (particle.getPhi() - jParticle.getPhi())) / pow(particle.distance(jParticle), degree + 2);\r\n                ForceZ += (numberOfParticle *\r\n                        (particle.getZ() - jParticle.getZ())) / pow(particle.distance(jParticle), degree + 2);\r\n            }\r\n        }\r\n        ForceZ += degree / pow(particle.getZ() - heightTube / 2, degree + 1) + degree / pow(particle.getZ() + heightTube / 2, degree + 1);\r\n        particle.setPhi(particle.getPhi() + COEFFICIENT_FOR_ANGLE * ForcePhi);\r\n        particle.setZ(particle.getZ() + COEFFICIENT_FOR_Z * ForceZ);\r\n        return particle;\r\n    }\r\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates) {\r\n        double Energy = 0;\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            for (int j = 0; j &lt; numberOfParticle; j++) {\r\n                if (i != j) {\r\n                    Energy += 1/pow(coordinates.get(i).distance(coordinates.get(j)),degree);\r\n                }\r\n            }\r\n            Energy += degree / pow(coordinates.get(i).getZ() - heightTube / 2, degree) +                    degree / pow(coordinates.get(i).getZ() + heightTube / 2, degree);\r\n        }\r\n        return Energy;\r\n    }\r\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates, Particle particle, int i) {\r\n        coordinates.set(i,particle);\r\n        return energyOfSystem(coordinates);\r\n    }\r\n}\r\n```\r\n\r\nClass drawing particles\r\n\r\n```\r\npublic class Mapping {\r\n    private final ObservableList&lt;Particle&gt; list;\r\n    private final int numberOfParticle;\r\n    private final Group group;\r\n    private final Tube tube;\r\n    public Mapping(int numberOfParticle, Group group, Tube tube, ObservableList&lt;Particle&gt; list) {\r\n        this.numberOfParticle = numberOfParticle;\r\n        this.group = group;\r\n        this.list = list;\r\n        this.tube = tube;\r\n    }\r\n    public void MappingParticle() {\r\n        group.getChildren().clear();\r\n        group.getChildren().add(tube.getTube());\r\n        for (int i = 0; i &lt; numberOfParticle; i++) {\r\n            group.getChildren().add(list.get(i).getParticle());\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nAnd finally the interface\r\n\r\n```\r\npublic class NanoTube extends Application {\r\n    private double anchorX, anchorY;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final int WIDTH = 800;\r\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\r\n    private final int HEIGHT = 670;\r\n    private final int RADIUS = 100;\r\n    private final Rotate rotateX = new Rotate(0, Rotate.X_AXIS);\r\n    private final Rotate rotateY = new Rotate(0, Rotate.Y_AXIS);\r\n    @Override\r\n    public void start(Stage stage) {\r\n        var buttonEnter = new Button(&quot;Enter&quot;);\r\n        var buttonEnergyMinimization = new Button(&quot;Minimization&quot;);\r\n        var buttonEnergyMinimizationStress = new Button(&quot;Minimization Stress&quot;);\r\n        var labelRadius = new Label(&quot;Cylinder&#39;s radius&quot;);\r\n        var labelHeight = new Label(&quot;Cylinder&#39;s height&quot;);\r\n        var labelNumber = new Label(&quot;Number Particle&quot;);\r\n        var textFieldRadius = new TextField();\r\n        var textFieldHeight = new TextField();\r\n        var textNumber = new TextField();\r\n        GridPane Top = new GridPane();\r\n        for (int i : new int[]{120, 100, 70, 90, 60, 140, 150, 65}) {\r\n            Top.getColumnConstraints().add(new ColumnConstraints(i));\r\n        }\r\n        for (int i = 0; i &lt; 3; i++) {\r\n            Top.getRowConstraints().add(new RowConstraints(30));\r\n        }\r\n        Top.getRowConstraints().add(new RowConstraints(560));\r\n\r\n        Arrays.asList(labelRadius, labelHeight, labelNumber).forEach(label -&gt; {\r\n            GridPane.setHalignment(label, HPos.CENTER);\r\n            GridPane.setValignment(label, VPos.CENTER);\r\n        });\r\n        Arrays.asList(buttonEnter, buttonEnergyMinimization).forEach(button -&gt; {\r\n            GridPane.setHalignment(button, HPos.CENTER);\r\n            GridPane.setValignment(button, VPos.CENTER);\r\n        });\r\n        Top.add(labelRadius, 0, 0);\r\n        Top.add(labelHeight, 0, 1);\r\n        Top.add(labelNumber, 0, 2);\r\n        Top.add(textFieldRadius, 1, 0);\r\n        Top.add(textFieldHeight, 1, 1);\r\n        Top.add(textNumber, 1, 2);\r\n        Top.add(buttonEnter,2,0,1,3);\r\n        Top.add(buttonEnergyMinimization,3,0,1,3);\r\n        PerspectiveCamera camera = new PerspectiveCamera(true);\r\n        camera.setNearClip(0.1);\r\n        camera.setFarClip(10000.0);\r\n        camera.setFieldOfView(20);\r\n        camera.getTransforms().addAll (rotateX, rotateY, new Translate(0, 0, -500));\r\n        Tube tube = new Tube(80,80,Color.rgb(225,225,0));\r\n        Group group = new Group(tube.getTube());\r\n        SubScene subScene = new SubScene(group, 750, 550, true, SceneAntialiasing.BALANCED);\r\n        subScene.setFill (Color.rgb (129, 129, 129));\r\n        subScene.setCamera(camera);\r\n        var root3d = new Group(subScene);\r\n        initMouseControl(subScene);\r\n        Top.add(root3d,0,3,8,1);\r\n        GridPane.setHalignment(root3d, HPos.CENTER);\r\n        GridPane.setValignment(root3d, VPos.CENTER);\r\n        buttonEnter.setOnAction(e -&gt; {\r\n            int n = Integer.parseInt(textNumber.getText());\r\n            tube.setHeight(Double.parseDouble(textFieldHeight.getText()));\r\n            tube.setRadius(Double.parseDouble(textFieldRadius.getText()));\r\n            ObservableList&lt;Particle&gt; particles = new Generation(tube, n).ParticlesGeneration();\r\n            new Mapping(n,group,tube,particles).MappingParticle();\r\n            buttonEnergyMinimization.setOnAction(actionEvent -&gt; {\r\n                ObservableList&lt;Particle&gt; list = new Minimization(particles,2,tube).minimization();\r\n                new Mapping(n,group,tube,list).MappingParticle();\r\n            });\r\n        });\r\n        var scene = new Scene(Top, WIDTH,HEIGHT);\r\n        stage.setScene(scene);\r\n        stage.show();\r\n        stage.setTitle(&quot;NanoTube Student Project&quot;);\r\n    }\r\n    public static void main(String[] args) {launch();}\r\n    private void initMouseControl(SubScene scene) {\r\n        scene.setOnMousePressed(event -&gt; {\r\n            anchorX = event.getSceneX();\r\n            anchorY = event.getSceneY();\r\n        });\r\n        scene.setOnMouseDragged(event -&gt; {\r\n            double dx = (anchorX - event.getSceneX());\r\n            double dy = (anchorY - event.getSceneY());\r\n            if (event.isPrimaryButtonDown()) {\r\n                rotateX.setAngle(rotateX.getAngle() -\r\n                        (dy /RADIUS  * 360) * (Math.PI / 180));\r\n                rotateY.setAngle(rotateY.getAngle() -\r\n                        (dx /RADIUS * -360) * (Math.PI / 180));\r\n            }\r\n            anchorX = event.getSceneX();\r\n            anchorY = event.getSceneY();\r\n        });\r\n    }\r\n}\r\n```\r\n\r\nIf you click on the &quot;Enter&quot; button, the particles are drawn, but if you then click on the &quot;Minimization&quot; button, the image does not change. I don&#39;t understand why this is happening.\r\n\r\nI was advised to write as brief an example of a non-working area as possible. But the examples work, but my program doesn&#39;t. I don&#39;t understand why the second button ignores drawing particles when using the &quot;Minimization&quot; class. In the end, individually everything works fine.\r\nI use javafx but I don&#39;t use fxml. I will be grateful if you find the time to help me.\r\n\r\n\r\nUPD: About the minimization class. As I said earlier, I randomly placed the particles on the surface of the cylinder. I need to minimize the energy of the particle system by the [&quot;gradient descent&quot;][1] method. In order not to count in a three-dimensional coordinate system, I use UV-mapping of the side of the cylinder. That is, the particles are located on a rectangle with sides &quot;cylinder height&quot; and &quot;cylinder radius * angle (in radians)&quot;, where the angle takes values from 0 to 2pi\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Gradient_descent","title":"Why doesn&#39;t the location of 3D objects change when you click on the button?","body":"<p>I am a student and I am studying physical modeling of processes. I'm new to GUI. I have two processes. The first process randomly scatters the balls onto the surface of the cylinder. Here's the code for it</p>\n<pre><code>public class Generation {\n    private static final Color[] COLORS = new Color[] { RED, YELLOW, GREEN, BROWN, BLUE, PINK, BLACK };\n    private final Tube tube;\n    private final int numberOfParticle;\n    private final double radius;\n    public Generation(Tube tube, int numberOfParticle) {\n        this.tube = tube;\n        this.numberOfParticle = numberOfParticle;\n        radius = Math.sqrt(tube.getRadius()*tube.getHeight()/(2*numberOfParticle));\n    }\n    private Particle RandomParticle (Color color) {\n        double phi = 2*Math.PI*Math.random();\n        double z = GetRandomNumberUsingNextDouble(-tube.getHeight()/2,tube.getHeight()/2);\n        Particle particle = new Particle(phi,tube.getRadius(),z,radius,color);\n        return particle;\n    }\n    private static double GetRandomNumberUsingNextDouble(double min, double max){\n        Random r = new Random();\n        return min + (max - min) * r.nextDouble();\n    }\n    public ObservableList&lt;Particle&gt; ParticlesGeneration() {\n        ObservableList&lt;Particle&gt; particlesList = FXCollections.observableArrayList()\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            Particle particle = RandomParticle(COLORS[i % COLORS.length]);\n            particlesList.add(particle);\n        }\n        return particlesList;\n    }\n}\n</code></pre>\n<p>Particle class</p>\n<pre><code>public class Particle {\n   private final double radius;\n   private double phi, rho, z;\n   private final Sphere particle;\n   public Particle(double phi, double rho, double z, double radius, Color color) {\n       this.particle = new Sphere(radius);\n       this.radius = radius;\n       this.phi = phi;\n       this.rho = rho;\n       this.z = z;\n       particle.setMaterial(new PhongMaterial(color));\n       particle.setTranslateX(rho * Math.cos(phi));\n       particle.setTranslateY(z);\n       particle.setTranslateZ(rho * Math.sin(phi));\n   }\n   private static double distance(double x1, double y1, double x2, double y2) {\n       x2 -= x1;\n       y2 -= y1;\n       return Math.sqrt(x2 * x2 + y2 * y2);\n   }\n   public double distance(Particle p) { return distance(getPhi()*getRho(), getZ(), p.getPhi()*p.getRho(),p.getZ());}\n   public double getRadius() { return radius; }\n    public double getPhi() { return phi; }\n    public void setPhi(double phi) { this.phi = phi; }\n    public double getRho() { return rho; }\n    public void setRho(double rho) { this.rho = rho; }\n    public double getZ() { return z; }\n    public void setZ(double z) { this.z = z; }\n    public Sphere getParticle() { return particle; }\n}\n</code></pre>\n<p>Cylinder class</p>\n<pre><code>public class Tube {\n    private double radius, height;\n    private final Cylinder tube;\n    private final Color color;\n    public Tube(double radius, double height, Color color) {\n        this.height = height;\n        this.color = color;\n        this.radius = radius;\n        this.tube = new Cylinder(radius,height);\n        tube.setMaterial(new PhongMaterial(color));\n    }\n    public Color getColor() { return color; }\n    public double getRadius() { return radius; }\n    public double getHeight() { return height; }\n    public Cylinder getTube() { return tube; }\n    public void setRadius(double radius) { this.radius = radius; }\n    public void setHeight(double height) { this.height = height; }\n}\n</code></pre>\n<p>The second process is to create a dense packing of randomly scattered particles</p>\n<pre><code>public class Minimization {\n    private double COEFFICIENT_FOR_ANGLE = 1;\n    private double COEFFICIENT_FOR_Z = 1;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL = 0.0001;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final double ACCEPTABLE_COEFFICIENT_VALUE_K_Z = 0.0001;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final double ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE = 0.0001;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    public static final double MAX_VALUE = 1.7976931348623157E308;\n    private final ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles;\n    private final int numberOfParticle, degree;\n    private final double heightTube;\n    public Minimization(ObservableList&lt;Particle&gt; poissonDiskCoordinatesParticles, int degree, Tube tube) {\n        this.poissonDiskCoordinatesParticles = poissonDiskCoordinatesParticles;\n        this.degree = degree;\n        numberOfParticle = poissonDiskCoordinatesParticles.size();\n        heightTube = tube.getHeight();\n    }\n    public ObservableList&lt;Particle&gt; minimization () {\n        ObservableList&lt;Particle&gt; list = poissonDiskCoordinatesParticles;\n        double energyOld = MAX_VALUE;\n        double energyNew = energyOfSystem(list);\n        while (COEFFICIENT_FOR_ANGLE &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_ANGEL &amp;&amp; COEFFICIENT_FOR_Z &gt; ACCEPTABLE_COEFFICIENT_VALUE_K_Z &amp;&amp; energyOld &gt; energyNew) {\n            if (energyOld - energyNew &lt; ACCEPTABLE_VALUE_OF_ENERGY_DIFFERENCE) {\n                COEFFICIENT_FOR_Z = COEFFICIENT_FOR_Z/2;\n                COEFFICIENT_FOR_ANGLE = COEFFICIENT_FOR_ANGLE/2;\n            }\n            energyOld = energyNew;\n            stepOfMinimization(list);\n            energyNew = energyOfSystem(list);\n        }\n        return list;\n    }\n    private void stepOfMinimization (ObservableList&lt;Particle&gt; list) {\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            Particle particle = newParticle(list, i);\n            if (energyOfSystem(list) &lt; energyOfSystem(list,particle,i)) {\n                list.set(i, particle);\n            }\n        }\n    }\n    private Particle newParticle(ObservableList&lt;Particle&gt; coordinates, int i) {\n        Particle particle = coordinates.get(i);\n        double ForcePhi = 0.0;\n        double ForceZ = 0.0;\n        for (int j = 0; j &lt; numberOfParticle; j++) {\n            Particle jParticle = coordinates.get(j);\n            if (i != j) {\n                ForcePhi += (numberOfParticle * particle.getRho() *\n                        (particle.getPhi() - jParticle.getPhi())) / pow(particle.distance(jParticle), degree + 2);\n                ForceZ += (numberOfParticle *\n                        (particle.getZ() - jParticle.getZ())) / pow(particle.distance(jParticle), degree + 2);\n            }\n        }\n        ForceZ += degree / pow(particle.getZ() - heightTube / 2, degree + 1) + degree / pow(particle.getZ() + heightTube / 2, degree + 1);\n        particle.setPhi(particle.getPhi() + COEFFICIENT_FOR_ANGLE * ForcePhi);\n        particle.setZ(particle.getZ() + COEFFICIENT_FOR_Z * ForceZ);\n        return particle;\n    }\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates) {\n        double Energy = 0;\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            for (int j = 0; j &lt; numberOfParticle; j++) {\n                if (i != j) {\n                    Energy += 1/pow(coordinates.get(i).distance(coordinates.get(j)),degree);\n                }\n            }\n            Energy += degree / pow(coordinates.get(i).getZ() - heightTube / 2, degree) +                    degree / pow(coordinates.get(i).getZ() + heightTube / 2, degree);\n        }\n        return Energy;\n    }\n    private double energyOfSystem (ObservableList&lt;Particle&gt; coordinates, Particle particle, int i) {\n        coordinates.set(i,particle);\n        return energyOfSystem(coordinates);\n    }\n}\n</code></pre>\n<p>Class drawing particles</p>\n<pre><code>public class Mapping {\n    private final ObservableList&lt;Particle&gt; list;\n    private final int numberOfParticle;\n    private final Group group;\n    private final Tube tube;\n    public Mapping(int numberOfParticle, Group group, Tube tube, ObservableList&lt;Particle&gt; list) {\n        this.numberOfParticle = numberOfParticle;\n        this.group = group;\n        this.list = list;\n        this.tube = tube;\n    }\n    public void MappingParticle() {\n        group.getChildren().clear();\n        group.getChildren().add(tube.getTube());\n        for (int i = 0; i &lt; numberOfParticle; i++) {\n            group.getChildren().add(list.get(i).getParticle());\n        }\n    }\n}\n</code></pre>\n<p>And finally the interface</p>\n<pre><code>public class NanoTube extends Application {\n    private double anchorX, anchorY;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final int WIDTH = 800;\n    @SuppressWarnings(&quot;FieldCanBeLocal&quot;)\n    private final int HEIGHT = 670;\n    private final int RADIUS = 100;\n    private final Rotate rotateX = new Rotate(0, Rotate.X_AXIS);\n    private final Rotate rotateY = new Rotate(0, Rotate.Y_AXIS);\n    @Override\n    public void start(Stage stage) {\n        var buttonEnter = new Button(&quot;Enter&quot;);\n        var buttonEnergyMinimization = new Button(&quot;Minimization&quot;);\n        var buttonEnergyMinimizationStress = new Button(&quot;Minimization Stress&quot;);\n        var labelRadius = new Label(&quot;Cylinder's radius&quot;);\n        var labelHeight = new Label(&quot;Cylinder's height&quot;);\n        var labelNumber = new Label(&quot;Number Particle&quot;);\n        var textFieldRadius = new TextField();\n        var textFieldHeight = new TextField();\n        var textNumber = new TextField();\n        GridPane Top = new GridPane();\n        for (int i : new int[]{120, 100, 70, 90, 60, 140, 150, 65}) {\n            Top.getColumnConstraints().add(new ColumnConstraints(i));\n        }\n        for (int i = 0; i &lt; 3; i++) {\n            Top.getRowConstraints().add(new RowConstraints(30));\n        }\n        Top.getRowConstraints().add(new RowConstraints(560));\n\n        Arrays.asList(labelRadius, labelHeight, labelNumber).forEach(label -&gt; {\n            GridPane.setHalignment(label, HPos.CENTER);\n            GridPane.setValignment(label, VPos.CENTER);\n        });\n        Arrays.asList(buttonEnter, buttonEnergyMinimization).forEach(button -&gt; {\n            GridPane.setHalignment(button, HPos.CENTER);\n            GridPane.setValignment(button, VPos.CENTER);\n        });\n        Top.add(labelRadius, 0, 0);\n        Top.add(labelHeight, 0, 1);\n        Top.add(labelNumber, 0, 2);\n        Top.add(textFieldRadius, 1, 0);\n        Top.add(textFieldHeight, 1, 1);\n        Top.add(textNumber, 1, 2);\n        Top.add(buttonEnter,2,0,1,3);\n        Top.add(buttonEnergyMinimization,3,0,1,3);\n        PerspectiveCamera camera = new PerspectiveCamera(true);\n        camera.setNearClip(0.1);\n        camera.setFarClip(10000.0);\n        camera.setFieldOfView(20);\n        camera.getTransforms().addAll (rotateX, rotateY, new Translate(0, 0, -500));\n        Tube tube = new Tube(80,80,Color.rgb(225,225,0));\n        Group group = new Group(tube.getTube());\n        SubScene subScene = new SubScene(group, 750, 550, true, SceneAntialiasing.BALANCED);\n        subScene.setFill (Color.rgb (129, 129, 129));\n        subScene.setCamera(camera);\n        var root3d = new Group(subScene);\n        initMouseControl(subScene);\n        Top.add(root3d,0,3,8,1);\n        GridPane.setHalignment(root3d, HPos.CENTER);\n        GridPane.setValignment(root3d, VPos.CENTER);\n        buttonEnter.setOnAction(e -&gt; {\n            int n = Integer.parseInt(textNumber.getText());\n            tube.setHeight(Double.parseDouble(textFieldHeight.getText()));\n            tube.setRadius(Double.parseDouble(textFieldRadius.getText()));\n            ObservableList&lt;Particle&gt; particles = new Generation(tube, n).ParticlesGeneration();\n            new Mapping(n,group,tube,particles).MappingParticle();\n            buttonEnergyMinimization.setOnAction(actionEvent -&gt; {\n                ObservableList&lt;Particle&gt; list = new Minimization(particles,2,tube).minimization();\n                new Mapping(n,group,tube,list).MappingParticle();\n            });\n        });\n        var scene = new Scene(Top, WIDTH,HEIGHT);\n        stage.setScene(scene);\n        stage.show();\n        stage.setTitle(&quot;NanoTube Student Project&quot;);\n    }\n    public static void main(String[] args) {launch();}\n    private void initMouseControl(SubScene scene) {\n        scene.setOnMousePressed(event -&gt; {\n            anchorX = event.getSceneX();\n            anchorY = event.getSceneY();\n        });\n        scene.setOnMouseDragged(event -&gt; {\n            double dx = (anchorX - event.getSceneX());\n            double dy = (anchorY - event.getSceneY());\n            if (event.isPrimaryButtonDown()) {\n                rotateX.setAngle(rotateX.getAngle() -\n                        (dy /RADIUS  * 360) * (Math.PI / 180));\n                rotateY.setAngle(rotateY.getAngle() -\n                        (dx /RADIUS * -360) * (Math.PI / 180));\n            }\n            anchorX = event.getSceneX();\n            anchorY = event.getSceneY();\n        });\n    }\n}\n</code></pre>\n<p>If you click on the &quot;Enter&quot; button, the particles are drawn, but if you then click on the &quot;Minimization&quot; button, the image does not change. I don't understand why this is happening.</p>\n<p>I was advised to write as brief an example of a non-working area as possible. But the examples work, but my program doesn't. I don't understand why the second button ignores drawing particles when using the &quot;Minimization&quot; class. In the end, individually everything works fine.\nI use javafx but I don't use fxml. I will be grateful if you find the time to help me.</p>\n<p>UPD: About the minimization class. As I said earlier, I randomly placed the particles on the surface of the cylinder. I need to minimize the energy of the particle system by the <a href=\"https://en.wikipedia.org/wiki/Gradient_descent\" rel=\"nofollow noreferrer\">&quot;gradient descent&quot;</a> method. In order not to count in a three-dimensional coordinate system, I use UV-mapping of the side of the cylinder. That is, the particles are located on a rectangle with sides &quot;cylinder height&quot; and &quot;cylinder radius * angle (in radians)&quot;, where the angle takes values from 0 to 2pi</p>\n"},{"tags":["java","methods","boolean"],"comments":[{"owner":{"account_id":8775035,"reputation":3254,"user_id":6560579,"display_name":"Ackdari"},"score":1,"creation_date":1588346387,"post_id":61545149,"comment_id":108867614,"body_markdown":"Please explaing the reasoning for `bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0`","body":"Please explaing the reasoning for <code>bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0</code>"},{"owner":{"account_id":8775035,"reputation":3254,"user_id":6560579,"display_name":"Ackdari"},"score":0,"creation_date":1588346506,"post_id":61545149,"comment_id":108867670,"body_markdown":"Also, kindly asking: is this somesort of assignment? Also also, think about the case `goal = 20, big = 4, small = 3`","body":"Also, kindly asking: is this somesort of assignment? Also also, think about the case <code>goal = 20, big = 4, small = 3</code>"},{"owner":{"account_id":8775035,"reputation":3254,"user_id":6560579,"display_name":"Ackdari"},"score":0,"creation_date":1588347141,"post_id":61545149,"comment_id":108868030,"body_markdown":"Sorrty ment `goal = 19, big = 4, small = 3`","body":"Sorrty ment <code>goal = 19, big = 4, small = 3</code>"},{"owner":{"account_id":2063361,"reputation":31416,"user_id":1839439,"accept_rate":98,"display_name":"Dharman"},"score":0,"creation_date":1659218431,"post_id":61545149,"comment_id":129243170,"body_markdown":"Please do not completely rewrite questions. This invalidates answers and is not allowed on Stack Overflow.","body":"Please do not completely rewrite questions. This invalidates answers and is not allowed on Stack Overflow."}],"answers":[{"tags":[],"owner":{"account_id":18193410,"reputation":1213,"user_id":13238899,"display_name":"Sidak"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588346691,"creation_date":1588346691,"answer_id":61545418,"question_id":61545149,"body_markdown":"I feel like your logic behind finding the answer is not correct. The `if` statements don&#39;t cover all the cases and don&#39;t produce the right answer every time.\r\n\r\nA basic approach would be something like:\r\n\r\n- Subtract 5 from goal, and subtract 1 from bigCount while goal &gt; 0 and bigCount &gt; 0\r\n- If goal is still &gt; 0, check if smallCount &gt;= goal. If yes, return true, else false.\r\n","title":"Don&#39;t understand the logic behind the problem","body":"<p>I feel like your logic behind finding the answer is not correct. The <code>if</code> statements don't cover all the cases and don't produce the right answer every time.</p>\n\n<p>A basic approach would be something like:</p>\n\n<ul>\n<li>Subtract 5 from goal, and subtract 1 from bigCount while goal > 0 and bigCount > 0</li>\n<li>If goal is still > 0, check if smallCount >= goal. If yes, return true, else false.</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":194308,"reputation":66745,"user_id":436560,"accept_rate":87,"display_name":"Lajos Arpad"},"score":2,"creation_date":1588355911,"post_id":61546140,"comment_id":108872576,"body_markdown":"You need to explain your answer in order to ensure that the asker will understand this.","body":"You need to explain your answer in order to ensure that the asker will understand this."}],"tags":[],"owner":{"account_id":370919,"reputation":1301,"user_id":719153,"accept_rate":100,"display_name":"Oliveira"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1588360154,"creation_date":1588349039,"answer_id":61546140,"question_id":61545149,"body_markdown":"    private static boolean canPack(\r\n        final int bigCount,\r\n        final int smallCount,\r\n        final int goal\r\n    ) {\r\n\r\n        // return goal - Math.min(goal / 5, bigCount) * 5 &lt;= smallCount;\r\n\r\n        final int numberOfBigNeeded = goal / 5;\r\n        final int numberOfBigUsed = Math.min(numberOfBigNeeded, bigCount);\r\n        final int remainingKilosFromGoalAfterUsingBig = goal - numberOfBigUsed * 5;\r\n        final boolean hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig = remainingKilosFromGoalAfterUsingBig &lt;= smallCount;\r\n        return hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig;\r\n    }","title":"Don&#39;t understand the logic behind the problem","body":"<pre><code>private static boolean canPack(\n    final int bigCount,\n    final int smallCount,\n    final int goal\n) {\n\n    // return goal - Math.min(goal / 5, bigCount) * 5 &lt;= smallCount;\n\n    final int numberOfBigNeeded = goal / 5;\n    final int numberOfBigUsed = Math.min(numberOfBigNeeded, bigCount);\n    final int remainingKilosFromGoalAfterUsingBig = goal - numberOfBigUsed * 5;\n    final boolean hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig = remainingKilosFromGoalAfterUsingBig &lt;= smallCount;\n    return hasEnoughSmallToCoverRemainingKilosFromGoalAfterUsingBig;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18571461,"reputation":11,"user_id":13533208,"display_name":"ANKUSH KUMAR"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1589369584,"creation_date":1589369584,"answer_id":61773496,"question_id":61545149,"body_markdown":"    int bigCountKilo = bigCount*5;\r\n        if(bigCountKilo+smallCount*1 == goal){\r\n            return true;\r\n        }else if((bigCountKilo&gt;=goal&amp;&amp;bigCountKilo%goal == 0)||(bigCountKilo&gt;=goal&amp;&amp;goal%5&lt;=smallCount)){\r\n            return true;\r\n        }else if(smallCount&gt;=goal){\r\n            return true;\r\n        }else if(bigCountKilo+smallCount&gt;goal&amp;&amp;goal%bigCountKilo&lt;=smallCount){\r\n            return true;\r\n        }else{\r\n            return false;\r\n        }\r\n    }\r\n\r\n\r\n\r\nThis will work for all the conditions. Please try this and if anything wrong Kindly update.","title":"Don&#39;t understand the logic behind the problem","body":"<pre><code>int bigCountKilo = bigCount*5;\n    if(bigCountKilo+smallCount*1 == goal){\n        return true;\n    }else if((bigCountKilo&gt;=goal&amp;&amp;bigCountKilo%goal == 0)||(bigCountKilo&gt;=goal&amp;&amp;goal%5&lt;=smallCount)){\n        return true;\n    }else if(smallCount&gt;=goal){\n        return true;\n    }else if(bigCountKilo+smallCount&gt;goal&amp;&amp;goal%bigCountKilo&lt;=smallCount){\n        return true;\n    }else{\n        return false;\n    }\n}\n</code></pre>\n\n<p>This will work for all the conditions. Please try this and if anything wrong Kindly update.</p>\n"},{"comments":[{"owner":{"account_id":19768387,"reputation":11563,"user_id":14475852,"display_name":"Chandan"},"score":0,"creation_date":1608311759,"post_id":65360925,"comment_id":115553566,"body_markdown":"You can use `code block` for `code section` that will make question/answer more readable and good. For more info you check this [link](https://meta.stackexchange.com/questions/184108/what-is-syntax-highlighting-and-how-does-it-work/184109#184109)","body":"You can use <code>code block</code> for <code>code section</code> that will make question/answer more readable and good. For more info you check this <a href=\"https://meta.stackexchange.com/questions/184108/what-is-syntax-highlighting-and-how-does-it-work/184109#184109\">link</a>"}],"tags":[],"owner":{"account_id":18958367,"reputation":11,"user_id":13834455,"display_name":"Kruthik"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1619850060,"creation_date":1608310508,"answer_id":65360925,"question_id":61545149,"body_markdown":"This code works on the greedy algorithm and passes all the test cases, give it a try:\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\r\n        // Here we are checking if the inputs are valid\r\n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || (bigCount*5 + smallCount)  &lt; goal) {\r\n            return false;\r\n        }\r\n\r\n        // Here we multiply bigCount with 5 since each bigCount contains 5 kg\r\n        int bigCountKilo = bigCount * 5;\r\n\r\n        // We check if goal &gt; 5 and then subtract bigCount from it till the goal is less than 5kg\r\n        while (goal &gt;= 5) {\r\n            if (bigCountKilo &gt; 0) {\r\n                goal -= 5;\r\n                bigCount-=1;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        // Similarly here too we are checking if goal is greater than 0 and then subtracting smallCount values\r\n        while (goal &gt; 0) {\r\n            if (smallCount &gt; 0) {\r\n                goal -= 1;\r\n                smallCount -= 1;\r\n            } else {\r\n                break;\r\n            }\r\n        }\r\n\r\n        // We are returning true if goal is reached (if goal becomes zero)\r\n        return (goal == 0);\r\n    }","title":"Don&#39;t understand the logic behind the problem","body":"<p>This code works on the greedy algorithm and passes all the test cases, give it a try:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean canPack(int bigCount, int smallCount, int goal) {\n    // Here we are checking if the inputs are valid\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || (bigCount*5 + smallCount)  &lt; goal) {\n        return false;\n    }\n\n    // Here we multiply bigCount with 5 since each bigCount contains 5 kg\n    int bigCountKilo = bigCount * 5;\n\n    // We check if goal &gt; 5 and then subtract bigCount from it till the goal is less than 5kg\n    while (goal &gt;= 5) {\n        if (bigCountKilo &gt; 0) {\n            goal -= 5;\n            bigCount-=1;\n        } else {\n            break;\n        }\n    }\n\n    // Similarly here too we are checking if goal is greater than 0 and then subtracting smallCount values\n    while (goal &gt; 0) {\n        if (smallCount &gt; 0) {\n            goal -= 1;\n            smallCount -= 1;\n        } else {\n            break;\n        }\n    }\n\n    // We are returning true if goal is reached (if goal becomes zero)\n    return (goal == 0);\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14552971,"reputation":806,"user_id":11914501,"display_name":"nik7"},"score":0,"creation_date":1619798892,"post_id":67045077,"comment_id":119022059,"body_markdown":"While this code block may answer the question, it would be best if you could provide a little explanation for why it does so.","body":"While this code block may answer the question, it would be best if you could provide a little explanation for why it does so."}],"tags":[],"owner":{"account_id":21150204,"reputation":11,"user_id":15550699,"display_name":"Horv&#225;th Zolt&#225;n"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1618144729,"creation_date":1618144729,"answer_id":67045077,"question_id":61545149,"body_markdown":"\tpublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\t\t// Input validation.\r\n\t\tif (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// Create a variable for the the bigCount variable to show it in kg.\r\n\t\tint bigCountInKg = bigCount * 5;\r\n\t\t\r\n\t\tif (bigCountInKg &lt; goal) {\r\n\t\t\tint result = goal - bigCountInKg;\r\n\t\t\tif (result &lt;= smallCount) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t} else if (bigCountInKg == goal) {\r\n\t\t\treturn true;\r\n\t\t} else if (bigCountInKg &gt; goal) {\r\n\t\t\tint maxBigCount = goal / 5;\r\n\t\t\tint result = goal - maxBigCount;\r\n\t\t\tif (result &lt;= smallCount) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}","title":"Don&#39;t understand the logic behind the problem","body":"<pre><code>public static boolean canPack(int bigCount, int smallCount, int goal) {\n    // Input validation.\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\n        return false;\n    }\n    // Create a variable for the the bigCount variable to show it in kg.\n    int bigCountInKg = bigCount * 5;\n    \n    if (bigCountInKg &lt; goal) {\n        int result = goal - bigCountInKg;\n        if (result &lt;= smallCount) {\n            return true;\n        } else {\n            return false;\n        }\n    } else if (bigCountInKg == goal) {\n        return true;\n    } else if (bigCountInKg &gt; goal) {\n        int maxBigCount = goal / 5;\n        int result = goal - maxBigCount;\n        if (result &lt;= smallCount) {\n            return true;\n        }\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":19223857,"reputation":11,"user_id":14047110,"display_name":"Mrinal Gupta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1675649070,"creation_date":1619575629,"answer_id":67292839,"question_id":61545149,"body_markdown":"Hey the explanation is pretty simple\r\nI hope you have understood the upper part until the bigCount, smallCount and goal.\r\n\r\nSo let&#39;s begin...\r\nlet&#39;s assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\r\nNow bigCount= 2(means 10kg) and smallCount = 0.\r\n\r\nHow much flour you have (bigCount*5) + smallCount = 10kg\r\ndo you have enough flour to make a package? Yes.\r\nCan you make a package of 9kg? No.\r\nBecause you have two  bags of 5kg each and you cannot take 1kg out from any bag.\r\n\r\nConsider second scenario\r\nlet&#39;s assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\r\nNow bigCount= 1(means 5kg) and smallCount = 5(means 5kg).\r\n\r\nNow you still have 10kg of flour but the question is can you make a package without taking any flour from any bag? this time Yes.\r\n\r\n5kg + 1kg + 1kg + 1kg +1kg = 9kg and 1kg extra.\r\n\r\nSimply telling you can have extra flour but you cannot take flour from bags just to reach the goal.","title":"Don&#39;t understand the logic behind the problem","body":"<p>Hey the explanation is pretty simple\nI hope you have understood the upper part until the bigCount, smallCount and goal.</p>\n<p>So let's begin...\nlet's assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\nNow bigCount= 2(means 10kg) and smallCount = 0.</p>\n<p>How much flour you have (bigCount*5) + smallCount = 10kg\ndo you have enough flour to make a package? Yes.\nCan you make a package of 9kg? No.\nBecause you have two  bags of 5kg each and you cannot take 1kg out from any bag.</p>\n<p>Consider second scenario\nlet's assume goal = 9kg. It means you have to make a package that contains 9kg of flour.\nNow bigCount= 1(means 5kg) and smallCount = 5(means 5kg).</p>\n<p>Now you still have 10kg of flour but the question is can you make a package without taking any flour from any bag? this time Yes.</p>\n<p>5kg + 1kg + 1kg + 1kg +1kg = 9kg and 1kg extra.</p>\n<p>Simply telling you can have extra flour but you cannot take flour from bags just to reach the goal.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1630517420,"post_id":69018147,"comment_id":121980143,"body_markdown":"Please add further details to expand on your answer, such as working code or documentation citations.","body":"Please add further details to expand on your answer, such as working code or documentation citations."},{"owner":{"account_id":11629093,"reputation":2552,"user_id":8517948,"accept_rate":100,"display_name":"LW001"},"score":0,"creation_date":1630526204,"post_id":69018147,"comment_id":121983266,"body_markdown":"Please [edit] your answer to provide more information as to how the code you&#39;ve provided works. Code-only answers might solve the problem of the original asker but they don&#39;t help future readers understand the solution.","body":"Please <a href=\"https://stackoverflow.com/posts/69018147/edit\">edit</a> your answer to provide more information as to how the code you&#39;ve provided works. Code-only answers might solve the problem of the original asker but they don&#39;t help future readers understand the solution."}],"tags":[],"owner":{"account_id":21602966,"reputation":11,"user_id":15930789,"display_name":"Ayush Anand"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630516728,"creation_date":1630516728,"answer_id":69018147,"question_id":61545149,"body_markdown":"public static boolean canpack(int bigcount,int smallcount,int goal) {\r\n\t\t\r\n\t\tif(bigcount&lt;0||smallcount&lt;0||goal&lt;0) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tint a=bigcount*5;\r\n\t\tint b=smallcount*1;\r\n\t\tif(a+b&gt;goal&amp;&amp;a&lt;goal) {\r\n\t\t\treturn true;\r\n\t\t}else if(a+b==goal) {\r\n\t\t\treturn true;\r\n\t\t}else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\nHope it works.If not kindly inform me.","title":"Don&#39;t understand the logic behind the problem","body":"<p>public static boolean canpack(int bigcount,int smallcount,int goal) {</p>\n<pre><code>    if(bigcount&lt;0||smallcount&lt;0||goal&lt;0) {\n        return false;\n    }\n    int a=bigcount*5;\n    int b=smallcount*1;\n    if(a+b&gt;goal&amp;&amp;a&lt;goal) {\n        return true;\n    }else if(a+b==goal) {\n        return true;\n    }else {\n        return false;\n    }\n}\n</code></pre>\n<p>Hope it works.If not kindly inform me.</p>\n"},{"tags":[],"owner":{"account_id":10106122,"reputation":1,"user_id":7468653,"display_name":"Navneet Tyagi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1640486540,"creation_date":1640442675,"answer_id":70480675,"question_id":61545149,"body_markdown":"This is the solution for Flour packer issue\r\n\r\n\r\n```java\r\npublic class FlourPacker {\r\n\r\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\r\n        boolean  bool=false;\r\n        int bigCountKilos = bigCount * 5;\r\n    \r\n        if(bigCount == 0 &amp;&amp; smallCount&gt;=goal) {\r\n             bool= true;\r\n        } else if(smallCount==0 &amp;&amp; bigCountKilos&gt;= goal &amp;&amp; goal%bigCountKilos==0) {\r\n            bool= true;\r\n        } else if (bigCount &gt; 0 &amp;&amp; smallCount&gt;0 &amp;&amp; goal &gt;= 0) {\r\n            int bigCountTotal= bigCount*5;\r\n            int total=bigCountTotal+smallCount;\r\n            if(total==goal){\r\n                 bool= true;\r\n            }\r\n\t\t\t\r\n            if(goal/5&lt;bigCount &amp;&amp; goal%5 &lt;=smallCount){\r\n                bool= true;\r\n            }\r\n\t\t\t\r\n            if(bigCountTotal&lt;=goal &amp;&amp; goal-bigCountTotal &lt;=smallCount) {\r\n                bool= true;\r\n            }\r\n        }\r\n        \r\n        return bool;\r\n    }\r\n}\r\n```","title":"Don&#39;t understand the logic behind the problem","body":"<p>This is the solution for Flour packer issue</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FlourPacker {\n\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\n        boolean  bool=false;\n        int bigCountKilos = bigCount * 5;\n    \n        if(bigCount == 0 &amp;&amp; smallCount&gt;=goal) {\n             bool= true;\n        } else if(smallCount==0 &amp;&amp; bigCountKilos&gt;= goal &amp;&amp; goal%bigCountKilos==0) {\n            bool= true;\n        } else if (bigCount &gt; 0 &amp;&amp; smallCount&gt;0 &amp;&amp; goal &gt;= 0) {\n            int bigCountTotal= bigCount*5;\n            int total=bigCountTotal+smallCount;\n            if(total==goal){\n                 bool= true;\n            }\n            \n            if(goal/5&lt;bigCount &amp;&amp; goal%5 &lt;=smallCount){\n                bool= true;\n            }\n            \n            if(bigCountTotal&lt;=goal &amp;&amp; goal-bigCountTotal &lt;=smallCount) {\n                bool= true;\n            }\n        }\n        \n        return bool;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":24221969,"reputation":1,"user_id":18177034,"display_name":"Ha Ngoc Yen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644567709,"creation_date":1644567709,"answer_id":71077026,"question_id":61545149,"body_markdown":"Here is my solution:\r\n```java\r\npublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n    if ((bigCount &lt; 0) || (smallCount &lt; 0) || (goal &lt; 0)) {\r\n      return false;\r\n    }\r\n\r\n    for (int i = 0; i &lt;= bigCount; i++){\r\n      for (int j = 0; j &lt;= smallCount; j++) {\r\n        if (i*5 + j == goal){\r\n          return true;\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n        \r\n  }\r\n```\r\n\r\nI used nested loop to iterate all possible way to reach the goal. But I found another solution online which is much simpler so I would like to share with you guys too.\r\ncredit to Vincent&#39;s corner.\r\n\r\n```java\r\npublic class FlourPacker {\r\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\r\n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\r\n            return false;\r\n        }\r\n\r\n        if (bigCount * 5 &gt; goal) {\r\n            return smallCount &gt;= goal % 5;\r\n        }\r\n\r\n        return smallCount &gt;= goal - (bigCount * 5);\r\n    }\r\n}\r\n```","title":"Don&#39;t understand the logic behind the problem","body":"<p>Here is my solution:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static boolean canPack(int bigCount, int smallCount, int goal) {\n    if ((bigCount &lt; 0) || (smallCount &lt; 0) || (goal &lt; 0)) {\n      return false;\n    }\n\n    for (int i = 0; i &lt;= bigCount; i++){\n      for (int j = 0; j &lt;= smallCount; j++) {\n        if (i*5 + j == goal){\n          return true;\n        }\n      }\n    }\n    return false;\n        \n  }\n</code></pre>\n<p>I used nested loop to iterate all possible way to reach the goal. But I found another solution online which is much simpler so I would like to share with you guys too.\ncredit to Vincent's corner.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FlourPacker {\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\n\n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\n            return false;\n        }\n\n        if (bigCount * 5 &gt; goal) {\n            return smallCount &gt;= goal % 5;\n        }\n\n        return smallCount &gt;= goal - (bigCount * 5);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6796551,"reputation":263,"user_id":5231580,"display_name":"Deepak Play"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1666678635,"creation_date":1666678214,"answer_id":74189718,"question_id":61545149,"body_markdown":"This is my solution without loops, and which is simpler to understand.\r\n\r\n```\r\npublic static boolean canPack(int bigCount , int smallCount , int goal) {\r\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || ((bigCount * 5 + smallCount) &lt; goal)) {\r\n        return false;\r\n     }\r\n\r\n    if (bigCount * 5 == goal) return true;\r\n    int maxBigCount = (int) goal / 5; // max bigcount required in goal\r\n\r\n    int requiredBigCount = (maxBigCount &lt;= bigCount) ? maxBigCount : bigCount; // the amount of bigCount fit into the goal\r\n    \r\n    return (requiredBigCount * 5) + smallCount &gt;= goal; // the fited kg can be equal or higher than the goal\r\n}\r\n\r\n```\r\n\r\nHope this will help you.","title":"Don&#39;t understand the logic behind the problem","body":"<p>This is my solution without loops, and which is simpler to understand.</p>\n<pre><code>public static boolean canPack(int bigCount , int smallCount , int goal) {\n    if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0 || ((bigCount * 5 + smallCount) &lt; goal)) {\n        return false;\n     }\n\n    if (bigCount * 5 == goal) return true;\n    int maxBigCount = (int) goal / 5; // max bigcount required in goal\n\n    int requiredBigCount = (maxBigCount &lt;= bigCount) ? maxBigCount : bigCount; // the amount of bigCount fit into the goal\n    \n    return (requiredBigCount * 5) + smallCount &gt;= goal; // the fited kg can be equal or higher than the goal\n}\n\n</code></pre>\n<p>Hope this will help you.</p>\n"},{"tags":[],"owner":{"account_id":10428376,"reputation":1,"user_id":7688927,"display_name":"Maarifa"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695752351,"creation_date":1695670520,"answer_id":77175306,"question_id":61545149,"body_markdown":"Without using nested loops, we first ensure the bigCount can fit into the goal size. We run a while loop to test this. Everytime the bigCount fits into the goal size, we increment the count and decrement the goal size, When the bigCount cannot fit into the goal size without spilling over we break. Then we start adding the small counts until the goal is reached or the small size depletes, whichever comes first.\r\n\r\n```java\r\npublic class FlourPacker {\r\n\r\n\tpublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\r\n\t\tint sizeOfBigCount = 5 * bigCount;\r\n\t\tint sizeOfSmallCount = 1 * smallCount;\r\n\t\tint totalCount = 0;\r\n\t\tint goalControl = goal;\r\n\r\n\t\tif (totalCount &lt; goal) {\r\n\t\t\twhile (sizeOfBigCount &gt; 0) {\r\n\t\t\t\tif ((totalCount + 5) &lt;= goalControl) {\r\n\t\t\t\t\ttotalCount += 5;\r\n\t\t\t\t\tgoal -= 5;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsizeOfBigCount -= 5;\r\n\r\n\t\t\t\tif ((totalCount + 5) &gt; goalControl) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (totalCount &lt; goalControl) {\r\n\t\t\twhile (sizeOfSmallCount &gt; 0) {\r\n\t\t\t\tif ((totalCount + 1) &lt;= goalControl) {\r\n\t\t\t\t\ttotalCount++;\r\n\t\t\t\t\tgoal--;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tsizeOfSmallCount--;\r\n\r\n\t\t\t\tif ((totalCount + 1) &gt; goalControl) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (totalCount &lt; goalControl) {\r\n\t\t\treturn false;\r\n\t\t} else if (totalCount == goalControl) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(canPack(1, 0, 4));\r\n\t}\r\n}\r\n```","title":"Don&#39;t understand the logic behind the problem","body":"<p>Without using nested loops, we first ensure the bigCount can fit into the goal size. We run a while loop to test this. Everytime the bigCount fits into the goal size, we increment the count and decrement the goal size, When the bigCount cannot fit into the goal size without spilling over we break. Then we start adding the small counts until the goal is reached or the small size depletes, whichever comes first.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class FlourPacker {\n\n    public static boolean canPack(int bigCount, int smallCount, int goal) {\n\n        int sizeOfBigCount = 5 * bigCount;\n        int sizeOfSmallCount = 1 * smallCount;\n        int totalCount = 0;\n        int goalControl = goal;\n\n        if (totalCount &lt; goal) {\n            while (sizeOfBigCount &gt; 0) {\n                if ((totalCount + 5) &lt;= goalControl) {\n                    totalCount += 5;\n                    goal -= 5;\n                }\n\n                sizeOfBigCount -= 5;\n\n                if ((totalCount + 5) &gt; goalControl) {\n                    break;\n                }\n            }\n        }\n\n        if (totalCount &lt; goalControl) {\n            while (sizeOfSmallCount &gt; 0) {\n                if ((totalCount + 1) &lt;= goalControl) {\n                    totalCount++;\n                    goal--;\n                }\n\n                sizeOfSmallCount--;\n\n                if ((totalCount + 1) &gt; goalControl) {\n                    break;\n                }\n            }\n        }\n        if (totalCount &lt; goalControl) {\n            return false;\n        } else if (totalCount == goalControl) {\n            return true;\n        }\n        return false;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(canPack(1, 0, 4));\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17047918,"reputation":13,"user_id":12334293,"display_name":"IyadELwy"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2628,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"answer_count":11,"score":-4,"last_activity_date":1695752351,"creation_date":1588345756,"question_id":61545149,"body_markdown":"i&#39;m trying to understand what the problem with my code is. \r\nHere is the task and my code:\r\n\r\nWrite a method named canPack with three parameters of type int named bigCount, smallCount, and goal. \r\n\r\n- The parameter bigCount represents the count of big flour bags (5 kilos each).\r\n\r\n- The parameter smallCount represents the count of small flour bags (1 kilo each).\r\n\r\n- The parameter goal represents the goal amount of kilos of flour needed to assemble a package.\r\n\r\nTherefore, the sum of the kilos of bigCount and smallCount must be at least equal to the value of goal. The method should return true if it is possible to make a package with goal kilos of flour.\r\n\r\nIf the sum is greater than goal, ensure that only full bags are used towards the goal amount. For example, if goal = 9, bigCount = 2, and smallCount = 0, the method should return false since each big bag is 5 kilos and cannot be divided. However, if goal = 9, bigCount = 1, and smallCount = 5, the method should return true because of 1 full bigCount bag and 4 full smallCount bags equal goal, and it&#39;s okay if there are additional bags left over.\r\n\r\nIf any of the parameters are negative, return false.\r\n\r\n\r\nEXAMPLE INPUT/OUTPUT:\r\n\r\n* canPack (1, 0, 4); should return false since bigCount is 1 (big bag of 5 kilos) and goal is 4 kilos.\r\n\r\n* canPack (1, 0, 5); should return true since bigCount is 1 (big bag of 5 kilos) and goal is 5 kilos.\r\n\r\n* canPack (0, 5, 4); should return true since smallCount is 5 (small bags of 1 kilo) and goal is 4 kilos, and we have 1 bag left which is ok as mentioned above.\r\n\r\n* canPack (2, 2, 11); should return true since bigCount is 2 (big bags 5 kilos each) and smallCount is 2 (small bags of 1 kilo), makes in total 12 kilos and goal is 11 kilos. \r\n\r\n* canPack (-3, 2, 12); should return false since bigCount is negative.\r\n\r\n\r\n```\r\n\tpublic static boolean canPack(int bigCount, int smallCount, int goal) {\r\n\t\t\r\n\t\tint bigCountKilos = bigCount * 5;\r\n\t\tint smallCountKilos = smallCount;\r\n\t\t\r\n\t\tif (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\t\r\n\t\t\tif (bigCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else if (bigCountKilos &lt; goal &amp;&amp; bigCountKilos + smallCountKilos &gt;= goal) {\r\n\t\t\t\treturn true;\r\n\t\t\t} else {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(canPack(4, 18, 19));\r\n\t}\r\n```\r\n\r\nThe instance for 4,18,19 should return true but it doesn&#39;t. Could someone tell me what i&#39;m doing wrong?\r\nThanks in advance","title":"Don&#39;t understand the logic behind the problem","body":"<p>i'm trying to understand what the problem with my code is.\nHere is the task and my code:</p>\n<p>Write a method named canPack with three parameters of type int named bigCount, smallCount, and goal.</p>\n<ul>\n<li><p>The parameter bigCount represents the count of big flour bags (5 kilos each).</p>\n</li>\n<li><p>The parameter smallCount represents the count of small flour bags (1 kilo each).</p>\n</li>\n<li><p>The parameter goal represents the goal amount of kilos of flour needed to assemble a package.</p>\n</li>\n</ul>\n<p>Therefore, the sum of the kilos of bigCount and smallCount must be at least equal to the value of goal. The method should return true if it is possible to make a package with goal kilos of flour.</p>\n<p>If the sum is greater than goal, ensure that only full bags are used towards the goal amount. For example, if goal = 9, bigCount = 2, and smallCount = 0, the method should return false since each big bag is 5 kilos and cannot be divided. However, if goal = 9, bigCount = 1, and smallCount = 5, the method should return true because of 1 full bigCount bag and 4 full smallCount bags equal goal, and it's okay if there are additional bags left over.</p>\n<p>If any of the parameters are negative, return false.</p>\n<p>EXAMPLE INPUT/OUTPUT:</p>\n<ul>\n<li><p>canPack (1, 0, 4); should return false since bigCount is 1 (big bag of 5 kilos) and goal is 4 kilos.</p>\n</li>\n<li><p>canPack (1, 0, 5); should return true since bigCount is 1 (big bag of 5 kilos) and goal is 5 kilos.</p>\n</li>\n<li><p>canPack (0, 5, 4); should return true since smallCount is 5 (small bags of 1 kilo) and goal is 4 kilos, and we have 1 bag left which is ok as mentioned above.</p>\n</li>\n<li><p>canPack (2, 2, 11); should return true since bigCount is 2 (big bags 5 kilos each) and smallCount is 2 (small bags of 1 kilo), makes in total 12 kilos and goal is 11 kilos.</p>\n</li>\n<li><p>canPack (-3, 2, 12); should return false since bigCount is negative.</p>\n</li>\n</ul>\n<pre><code>    public static boolean canPack(int bigCount, int smallCount, int goal) {\n        \n        int bigCountKilos = bigCount * 5;\n        int smallCountKilos = smallCount;\n        \n        if (bigCount &lt; 0 || smallCount &lt; 0 || goal &lt; 0) {\n            return false;\n        } else {\n            \n            if (bigCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\n                return true;\n            } else if (bigCountKilos + smallCountKilos &gt;= goal &amp;&amp; bigCountKilos % goal == 0) {\n                return true;\n            } else if (bigCountKilos &lt; goal &amp;&amp; bigCountKilos + smallCountKilos &gt;= goal) {\n                return true;\n            } else {\n                return false;\n            }\n        }\n    }\n\n    public static void main(String[] args) {\n        System.out.println(canPack(4, 18, 19));\n    }\n</code></pre>\n<p>The instance for 4,18,19 should return true but it doesn't. Could someone tell me what i'm doing wrong?\nThanks in advance</p>\n"},{"tags":["java","spring","reactive-programming","spring-webflux"],"answers":[{"comments":[{"owner":{"account_id":5643369,"reputation":374,"user_id":4466363,"display_name":"Arunkumar Arjunan"},"score":0,"creation_date":1626077365,"post_id":61287477,"comment_id":120786754,"body_markdown":"This works fine for getting request Body, can you please add the code for response Body as well? I tried to do this but response Body needs BodyExtractor.","body":"This works fine for getting request Body, can you please add the code for response Body as well? I tried to do this but response Body needs BodyExtractor."},{"owner":{"account_id":3298176,"reputation":7146,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"score":0,"creation_date":1626097195,"post_id":61287477,"comment_id":120794649,"body_markdown":"@ArunkumarArjunan If you mean ClientResponse, it is a different (and much simpler) problem to extract its body. In test code it could be `response.body(BodyExtractors.toMono(String.class)).block()`. But I recommend to look at WebTestClient, which could help to test responses more naturally.","body":"@ArunkumarArjunan If you mean ClientResponse, it is a different (and much simpler) problem to extract its body. In test code it could be <code>response.body(BodyExtractors.toMono(String.class)).block()</code>. But I recommend to look at WebTestClient, which could help to test responses more naturally."},{"owner":{"account_id":982652,"reputation":303,"user_id":1001982,"accept_rate":82,"display_name":"Anvesh Raavi"},"score":0,"creation_date":1626975782,"post_id":61287477,"comment_id":121041536,"body_markdown":"extractBody(ClientRequest request, Class&lt;T&gt; clazz) -&gt; here the clazz is your model correct? Passing a String.Class throws an exception, what other types we could pass to the method?","body":"extractBody(ClientRequest request, Class&lt;T&gt; clazz) -&gt; here the clazz is your model correct? Passing a String.Class throws an exception, what other types we could pass to the method?"}],"tags":[],"owner":{"account_id":3298176,"reputation":7146,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"comment_count":3,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1639820296,"creation_date":1587204841,"answer_id":61287477,"question_id":61156827,"body_markdown":"A bit complex for such a simple case, but it took me to implement 5 classes, to extract a body from `ClientRequest`.\r\n\r\nIt seems to be too much, and I&#39;m still curious if there is a short solution for the problem. You&#39;re welcome to propose another answer to this question, so I could accept it.\r\n\r\nUnfortunately, it must be said that the design of `ClientRequest`, `BodyInserters` and most of the other stuff from `org.springframework.web.reactive.***` has a large room for improvement. At the moment it is just a pile of interfaces with tons of methods per each, and it usually takes a lot of efforts to test code, depending on those classes.\r\n\r\nThe main goal it to get this method working:\r\n\r\n    static &lt;T&gt; T extractBody(ClientRequest request, Class&lt;T&gt; clazz) {\r\n \r\n      InsertionReceiver&lt;T&gt; receiver = InsertionReceiver.forClass(clazz);\r\n      return receiver.receiveValue(request.body());\r\n    }\r\n\r\nHere is the implementation of `InsertionReceiver`:\r\n\r\n----\r\n1.\r\n\r\n    import org.springframework.http.ReactiveHttpOutputMessage;\r\n    import org.springframework.web.reactive.function.BodyInserter;\r\n\r\n    public interface InsertionReceiver&lt;T&gt; {\r\n    \r\n      T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter);\r\n    \r\n      static &lt;T&gt; InsertionReceiver&lt;T&gt; forClass(Class&lt;T&gt; clazz) {\r\n        return new SimpleValueReceiver&lt;&gt;(clazz);\r\n      }\r\n    }\r\n\r\n----\r\n2.\r\n\r\n    import java.util.concurrent.atomic.AtomicReference;\r\n    import org.springframework.http.ReactiveHttpOutputMessage;\r\n    import org.springframework.web.reactive.function.BodyInserter;\r\n        \r\n    class SimpleValueReceiver&lt;T&gt; implements InsertionReceiver&lt;T&gt; {\r\n    \r\n      private static final Object DUMMY = new Object();\r\n    \r\n      private final Class&lt;T&gt; clazz;\r\n      private final AtomicReference&lt;Object&gt; reference;\r\n    \r\n      SimpleValueReceiver(Class&lt;T&gt; clazz) {\r\n        this.clazz = clazz;\r\n        this.reference = new AtomicReference&lt;&gt;(DUMMY);\r\n      }\r\n    \r\n      @Override\r\n      public T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {\r\n        demandValueFrom(bodyInserter);\r\n    \r\n        return receivedValue();\r\n      }\r\n    \r\n      private void demandValueFrom(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {    \r\n        var inserter = (BodyInserter&lt;?, ReactiveHttpOutputMessage&gt;) bodyInserter;\r\n    \r\n        inserter.insert(\r\n            MinimalHttpOutputMessage.INSTANCE,\r\n            new SingleWriterContext(new WriteToConsumer&lt;&gt;(reference::set))\r\n        );\r\n      }\r\n    \r\n      private T receivedValue() {\r\n        Object value = reference.get();\r\n        reference.set(DUMMY);\r\n    \r\n        T validatedValue;\r\n    \r\n        if (value == DUMMY) {\r\n          throw new RuntimeException(&quot;Value was not received, Check your inserter worked properly&quot;);\r\n        } else if (!clazz.isAssignableFrom(value.getClass())) {\r\n          throw new RuntimeException(\r\n              &quot;Value has unexpected type (&quot;\r\n                  + value.getClass().getTypeName()\r\n                  + &quot;) instead of (&quot; + clazz.getTypeName() + &quot;)&quot;);\r\n        } else {\r\n          validatedValue = clazz.cast(value);\r\n        }\r\n    \r\n        return validatedValue;\r\n      }\r\n    }\r\n\r\n---\r\n3.\r\n\r\n    class WriteToConsumer&lt;T&gt; implements HttpMessageWriter&lt;T&gt; {\r\n    \r\n      private final Consumer&lt;T&gt; consumer;\r\n      private final List&lt;MediaType&gt; mediaTypes;\r\n    \r\n      WriteToConsumer(Consumer&lt;T&gt; consumer) {\r\n        this.consumer = consumer;\r\n        this.mediaTypes = Collections.singletonList(MediaType.ALL);\r\n      }\r\n    \r\n      @Override\r\n      public List&lt;MediaType&gt; getWritableMediaTypes() {\r\n        return mediaTypes;\r\n      }\r\n    \r\n      @Override\r\n      public boolean canWrite(ResolvableType elementType, MediaType mediaType) {\r\n        return true;\r\n      }\r\n    \r\n      @Override\r\n      public Mono&lt;Void&gt; write(\r\n          Publisher&lt;? extends T&gt; inputStream,\r\n          ResolvableType elementType,\r\n          MediaType mediaType,\r\n          ReactiveHttpOutputMessage message,\r\n          Map&lt;String, Object&gt; hints\r\n      ) {\r\n        inputStream.subscribe(new OneValueConsumption&lt;&gt;(consumer));\r\n        return Mono.empty();\r\n      }\r\n    }\r\n\r\n---\r\n4.\r\n\r\n    class MinimalHttpOutputMessage implements ReactiveHttpOutputMessage {\r\n    \r\n      public static MinimalHttpOutputMessage INSTANCE = new MinimalHttpOutputMessage();\r\n    \r\n      private MinimalHttpOutputMessage() {\r\n      }\r\n    \r\n      @Override\r\n      public HttpHeaders getHeaders() {\r\n        return HttpHeaders.EMPTY;\r\n      }\r\n    \r\n      // other overridden methods are omitted as they do nothing,\r\n      // i.e. return null, false, or have empty bodies\r\n    }\r\n\r\n---\r\n5.\r\n\r\n    class OneValueConsumption&lt;T&gt; implements Subscriber&lt;T&gt; {\r\n    \r\n      private final Consumer&lt;T&gt; consumer;\r\n      private int remainedAccepts;\r\n    \r\n      public OneValueConsumption(Consumer&lt;T&gt; consumer) {\r\n        this.consumer = Objects.requireNonNull(consumer);\r\n        this.remainedAccepts = 1;\r\n      }\r\n    \r\n      @Override\r\n      public void onSubscribe(Subscription s) {\r\n        s.request(1);\r\n      }\r\n    \r\n      @Override\r\n      public void onNext(T o) {\r\n        if (remainedAccepts &gt; 0) {\r\n          consumer.accept(o);\r\n          remainedAccepts -= 1;\r\n        } else {\r\n          throw new RuntimeException(&quot;No more values can be consumed&quot;);\r\n        }\r\n      }\r\n    \r\n      @Override\r\n      public void onError(Throwable t) {\r\n        throw new RuntimeException(&quot;Single value was not consumed&quot;, t);\r\n      }\r\n    \r\n      @Override\r\n      public void onComplete() {\r\n        // nothing\r\n      }\r\n    }\r\n\r\n---\r\n6.\r\n\r\n    class SingleWriterContext implements BodyInserter.Context {\r\n    \r\n      private final List&lt;HttpMessageWriter&lt;?&gt;&gt; singleWriterList;\r\n    \r\n      SingleWriterContext(HttpMessageWriter&lt;?&gt; writer) {\r\n        this.singleWriterList = List.of(writer);\r\n      }\r\n    \r\n      @Override\r\n      public List&lt;HttpMessageWriter&lt;?&gt;&gt; messageWriters() {\r\n        return singleWriterList;\r\n      }\r\n    \r\n      @Override\r\n      public Optional&lt;ServerHttpRequest&gt; serverRequest() {\r\n        return Optional.empty();\r\n      }\r\n    \r\n      @Override\r\n      public Map&lt;String, Object&gt; hints() {\r\n        return null;\r\n      }\r\n    }\r\n\r\n","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>A bit complex for such a simple case, but it took me to implement 5 classes, to extract a body from <code>ClientRequest</code>.</p>\n<p>It seems to be too much, and I'm still curious if there is a short solution for the problem. You're welcome to propose another answer to this question, so I could accept it.</p>\n<p>Unfortunately, it must be said that the design of <code>ClientRequest</code>, <code>BodyInserters</code> and most of the other stuff from <code>org.springframework.web.reactive.***</code> has a large room for improvement. At the moment it is just a pile of interfaces with tons of methods per each, and it usually takes a lot of efforts to test code, depending on those classes.</p>\n<p>The main goal it to get this method working:</p>\n<pre><code>static &lt;T&gt; T extractBody(ClientRequest request, Class&lt;T&gt; clazz) {\n\n  InsertionReceiver&lt;T&gt; receiver = InsertionReceiver.forClass(clazz);\n  return receiver.receiveValue(request.body());\n}\n</code></pre>\n<p>Here is the implementation of <code>InsertionReceiver</code>:</p>\n<hr />\n<ol>\n<li></li>\n</ol>\n<pre><code>import org.springframework.http.ReactiveHttpOutputMessage;\nimport org.springframework.web.reactive.function.BodyInserter;\n\npublic interface InsertionReceiver&lt;T&gt; {\n\n  T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter);\n\n  static &lt;T&gt; InsertionReceiver&lt;T&gt; forClass(Class&lt;T&gt; clazz) {\n    return new SimpleValueReceiver&lt;&gt;(clazz);\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"2\">\n<li></li>\n</ol>\n<pre><code>import java.util.concurrent.atomic.AtomicReference;\nimport org.springframework.http.ReactiveHttpOutputMessage;\nimport org.springframework.web.reactive.function.BodyInserter;\n    \nclass SimpleValueReceiver&lt;T&gt; implements InsertionReceiver&lt;T&gt; {\n\n  private static final Object DUMMY = new Object();\n\n  private final Class&lt;T&gt; clazz;\n  private final AtomicReference&lt;Object&gt; reference;\n\n  SimpleValueReceiver(Class&lt;T&gt; clazz) {\n    this.clazz = clazz;\n    this.reference = new AtomicReference&lt;&gt;(DUMMY);\n  }\n\n  @Override\n  public T receiveValue(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {\n    demandValueFrom(bodyInserter);\n\n    return receivedValue();\n  }\n\n  private void demandValueFrom(BodyInserter&lt;?, ? extends ReactiveHttpOutputMessage&gt; bodyInserter) {    \n    var inserter = (BodyInserter&lt;?, ReactiveHttpOutputMessage&gt;) bodyInserter;\n\n    inserter.insert(\n        MinimalHttpOutputMessage.INSTANCE,\n        new SingleWriterContext(new WriteToConsumer&lt;&gt;(reference::set))\n    );\n  }\n\n  private T receivedValue() {\n    Object value = reference.get();\n    reference.set(DUMMY);\n\n    T validatedValue;\n\n    if (value == DUMMY) {\n      throw new RuntimeException(&quot;Value was not received, Check your inserter worked properly&quot;);\n    } else if (!clazz.isAssignableFrom(value.getClass())) {\n      throw new RuntimeException(\n          &quot;Value has unexpected type (&quot;\n              + value.getClass().getTypeName()\n              + &quot;) instead of (&quot; + clazz.getTypeName() + &quot;)&quot;);\n    } else {\n      validatedValue = clazz.cast(value);\n    }\n\n    return validatedValue;\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"3\">\n<li></li>\n</ol>\n<pre><code>class WriteToConsumer&lt;T&gt; implements HttpMessageWriter&lt;T&gt; {\n\n  private final Consumer&lt;T&gt; consumer;\n  private final List&lt;MediaType&gt; mediaTypes;\n\n  WriteToConsumer(Consumer&lt;T&gt; consumer) {\n    this.consumer = consumer;\n    this.mediaTypes = Collections.singletonList(MediaType.ALL);\n  }\n\n  @Override\n  public List&lt;MediaType&gt; getWritableMediaTypes() {\n    return mediaTypes;\n  }\n\n  @Override\n  public boolean canWrite(ResolvableType elementType, MediaType mediaType) {\n    return true;\n  }\n\n  @Override\n  public Mono&lt;Void&gt; write(\n      Publisher&lt;? extends T&gt; inputStream,\n      ResolvableType elementType,\n      MediaType mediaType,\n      ReactiveHttpOutputMessage message,\n      Map&lt;String, Object&gt; hints\n  ) {\n    inputStream.subscribe(new OneValueConsumption&lt;&gt;(consumer));\n    return Mono.empty();\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"4\">\n<li></li>\n</ol>\n<pre><code>class MinimalHttpOutputMessage implements ReactiveHttpOutputMessage {\n\n  public static MinimalHttpOutputMessage INSTANCE = new MinimalHttpOutputMessage();\n\n  private MinimalHttpOutputMessage() {\n  }\n\n  @Override\n  public HttpHeaders getHeaders() {\n    return HttpHeaders.EMPTY;\n  }\n\n  // other overridden methods are omitted as they do nothing,\n  // i.e. return null, false, or have empty bodies\n}\n</code></pre>\n<hr />\n<ol start=\"5\">\n<li></li>\n</ol>\n<pre><code>class OneValueConsumption&lt;T&gt; implements Subscriber&lt;T&gt; {\n\n  private final Consumer&lt;T&gt; consumer;\n  private int remainedAccepts;\n\n  public OneValueConsumption(Consumer&lt;T&gt; consumer) {\n    this.consumer = Objects.requireNonNull(consumer);\n    this.remainedAccepts = 1;\n  }\n\n  @Override\n  public void onSubscribe(Subscription s) {\n    s.request(1);\n  }\n\n  @Override\n  public void onNext(T o) {\n    if (remainedAccepts &gt; 0) {\n      consumer.accept(o);\n      remainedAccepts -= 1;\n    } else {\n      throw new RuntimeException(&quot;No more values can be consumed&quot;);\n    }\n  }\n\n  @Override\n  public void onError(Throwable t) {\n    throw new RuntimeException(&quot;Single value was not consumed&quot;, t);\n  }\n\n  @Override\n  public void onComplete() {\n    // nothing\n  }\n}\n</code></pre>\n<hr />\n<ol start=\"6\">\n<li></li>\n</ol>\n<pre><code>class SingleWriterContext implements BodyInserter.Context {\n\n  private final List&lt;HttpMessageWriter&lt;?&gt;&gt; singleWriterList;\n\n  SingleWriterContext(HttpMessageWriter&lt;?&gt; writer) {\n    this.singleWriterList = List.of(writer);\n  }\n\n  @Override\n  public List&lt;HttpMessageWriter&lt;?&gt;&gt; messageWriters() {\n    return singleWriterList;\n  }\n\n  @Override\n  public Optional&lt;ServerHttpRequest&gt; serverRequest() {\n    return Optional.empty();\n  }\n\n  @Override\n  public Map&lt;String, Object&gt; hints() {\n    return null;\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":428762,"reputation":1481,"user_id":811293,"accept_rate":30,"display_name":"joseluisbz"},"score":2,"creation_date":1673971731,"post_id":70447970,"comment_id":132613158,"body_markdown":"would you like to share imports?","body":"would you like to share imports?"}],"tags":[],"owner":{"account_id":20498713,"reputation":41,"user_id":15043074,"display_name":"0x233"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1678538794,"creation_date":1640170729,"answer_id":70447970,"question_id":61156827,"body_markdown":"I found a relatively simple way to do this, that is to imitate `BodyInserters.fromValue()` to implement your own `BodyInserter`.\r\n\r\n    import java.util.List;\r\n    import java.util.stream.Collectors;\r\n    import org.reactivestreams.Publisher;\r\n    import org.springframework.core.ResolvableType;\r\n    import org.springframework.http.MediaType;\r\n    import org.springframework.http.ReactiveHttpOutputMessage;\r\n    import org.springframework.http.codec.HttpMessageWriter;\r\n    import org.springframework.http.server.reactive.ServerHttpResponse;\r\n    import org.springframework.lang.Nullable;\r\n    import org.springframework.web.reactive.function.BodyInserter;\r\n    import org.springframework.web.reactive.function.UnsupportedMediaTypeException;\r\n    import reactor.core.publisher.Mono;\r\n\r\n    public static class CustomerInserter&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\r\n\r\n        private T body;\r\n\r\n        private CustomerInserter(T body) {\r\n            this.body = body;\r\n        }\r\n\r\n        public static &lt;T&gt; CustomerInserter&lt;T&gt; fromValue(T body) {\r\n            return new CustomerInserter&lt;T&gt;(body);\r\n        }\r\n\r\n        public T getBody() {\r\n            return this.body;\r\n        }\r\n\r\n        @Override\r\n        public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\r\n            Mono&lt;T&gt; publisher = Mono.just(this.body);\r\n            MediaType mediaType = outputMessage.getHeaders().getContentType();\r\n            ResolvableType bodyType = ResolvableType.forInstance(this.body);\r\n            return context.messageWriters().stream()\r\n                    .filter(messageWriter -&gt; messageWriter.canWrite(bodyType, mediaType))\r\n                    .findFirst()\r\n                    .map(item -&gt; (HttpMessageWriter&lt;T&gt;) item)\r\n                    .map(writer -&gt; this.write(publisher, bodyType, mediaType, outputMessage, context, writer))\r\n                    .orElseGet(() -&gt; Mono.error(unsupportedError(bodyType, context, mediaType)));\r\n        }\r\n\r\n        private Mono&lt;Void&gt; write(Publisher&lt;? extends T&gt; input, ResolvableType type,\r\n                                            @Nullable MediaType mediaType, ReactiveHttpOutputMessage message,\r\n                                            BodyInserter.Context context, HttpMessageWriter&lt;T&gt; writer) {\r\n\r\n            return context.serverRequest()\r\n                    .map(request -&gt; {\r\n                        ServerHttpResponse response = (ServerHttpResponse) message;\r\n                        return writer.write(input, type, type, mediaType, request, response, context.hints());\r\n                    })\r\n                    .orElseGet(() -&gt; writer.write(input, type, mediaType, message, context.hints()));\r\n        }\r\n\r\n        private UnsupportedMediaTypeException unsupportedError(ResolvableType bodyType,\r\n                                                       BodyInserter.Context context, @Nullable MediaType mediaType) {\r\n\r\n            List&lt;MediaType&gt; supportedMediaTypes = context.messageWriters().stream()\r\n                    .flatMap(reader -&gt; reader.getWritableMediaTypes(bodyType).stream())\r\n                    .collect(Collectors.toList());\r\n\r\n            return new UnsupportedMediaTypeException(mediaType, supportedMediaTypes, bodyType);\r\n        }\r\n    }\r\n\r\nsimple unit testing.\r\n\r\n    Response response = webClient.post()\r\n                .uri(&quot;/xxx&quot;)\r\n                .body(CustomerInserter.fromValue(body)) //\r\n                .retrieve()\r\n                .bodyToMono(Response.class)\r\n                .block();\r\n\r\n    WebClient webClient = WebClient.builder()\r\n                .baseUrl(&quot;http://127.0.0.1:8080&quot;)\r\n                .filter((request, next) -&gt; {\r\n                    CustomerInserter&lt;?&gt; inserter = (CustomerInserter&lt;?&gt;) request.body();\r\n                    // Some things can be done here\r\n                    Object body = inserter.getBody();\r\n                    return next.exchange(request);\r\n                }).build();","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>I found a relatively simple way to do this, that is to imitate <code>BodyInserters.fromValue()</code> to implement your own <code>BodyInserter</code>.</p>\n<pre><code>import java.util.List;\nimport java.util.stream.Collectors;\nimport org.reactivestreams.Publisher;\nimport org.springframework.core.ResolvableType;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ReactiveHttpOutputMessage;\nimport org.springframework.http.codec.HttpMessageWriter;\nimport org.springframework.http.server.reactive.ServerHttpResponse;\nimport org.springframework.lang.Nullable;\nimport org.springframework.web.reactive.function.BodyInserter;\nimport org.springframework.web.reactive.function.UnsupportedMediaTypeException;\nimport reactor.core.publisher.Mono;\n\npublic static class CustomerInserter&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\n\n    private T body;\n\n    private CustomerInserter(T body) {\n        this.body = body;\n    }\n\n    public static &lt;T&gt; CustomerInserter&lt;T&gt; fromValue(T body) {\n        return new CustomerInserter&lt;T&gt;(body);\n    }\n\n    public T getBody() {\n        return this.body;\n    }\n\n    @Override\n    public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\n        Mono&lt;T&gt; publisher = Mono.just(this.body);\n        MediaType mediaType = outputMessage.getHeaders().getContentType();\n        ResolvableType bodyType = ResolvableType.forInstance(this.body);\n        return context.messageWriters().stream()\n                .filter(messageWriter -&gt; messageWriter.canWrite(bodyType, mediaType))\n                .findFirst()\n                .map(item -&gt; (HttpMessageWriter&lt;T&gt;) item)\n                .map(writer -&gt; this.write(publisher, bodyType, mediaType, outputMessage, context, writer))\n                .orElseGet(() -&gt; Mono.error(unsupportedError(bodyType, context, mediaType)));\n    }\n\n    private Mono&lt;Void&gt; write(Publisher&lt;? extends T&gt; input, ResolvableType type,\n                                        @Nullable MediaType mediaType, ReactiveHttpOutputMessage message,\n                                        BodyInserter.Context context, HttpMessageWriter&lt;T&gt; writer) {\n\n        return context.serverRequest()\n                .map(request -&gt; {\n                    ServerHttpResponse response = (ServerHttpResponse) message;\n                    return writer.write(input, type, type, mediaType, request, response, context.hints());\n                })\n                .orElseGet(() -&gt; writer.write(input, type, mediaType, message, context.hints()));\n    }\n\n    private UnsupportedMediaTypeException unsupportedError(ResolvableType bodyType,\n                                                   BodyInserter.Context context, @Nullable MediaType mediaType) {\n\n        List&lt;MediaType&gt; supportedMediaTypes = context.messageWriters().stream()\n                .flatMap(reader -&gt; reader.getWritableMediaTypes(bodyType).stream())\n                .collect(Collectors.toList());\n\n        return new UnsupportedMediaTypeException(mediaType, supportedMediaTypes, bodyType);\n    }\n}\n</code></pre>\n<p>simple unit testing.</p>\n<pre><code>Response response = webClient.post()\n            .uri(&quot;/xxx&quot;)\n            .body(CustomerInserter.fromValue(body)) //\n            .retrieve()\n            .bodyToMono(Response.class)\n            .block();\n\nWebClient webClient = WebClient.builder()\n            .baseUrl(&quot;http://127.0.0.1:8080&quot;)\n            .filter((request, next) -&gt; {\n                CustomerInserter&lt;?&gt; inserter = (CustomerInserter&lt;?&gt;) request.body();\n                // Some things can be done here\n                Object body = inserter.getBody();\n                return next.exchange(request);\n            }).build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":29009948,"reputation":11,"user_id":22221652,"display_name":"Yuliia Panchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695752337,"creation_date":1689250032,"answer_id":76679200,"question_id":61156827,"body_markdown":"The simple wrapper can be implemented to hold and get the body object:\r\n\r\n    public class BodyInserterWrapper&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\r\n    \r\n        private final BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; delegate;\r\n        @Getter\r\n        private final T body;\r\n    \r\n        public BodyInserterWrapper(T body) {\r\n            this.body = body;\r\n            this.delegate = BodyInserters.fromObject(body);\r\n        }\r\n    \r\n        @Override\r\n        public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\r\n            return this.delegate.insert(outputMessage, context);\r\n        }\r\n    }\r\n\r\n","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>The simple wrapper can be implemented to hold and get the body object:</p>\n<pre><code>public class BodyInserterWrapper&lt;T&gt; implements BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; {\n\n    private final BodyInserter&lt;T, ReactiveHttpOutputMessage&gt; delegate;\n    @Getter\n    private final T body;\n\n    public BodyInserterWrapper(T body) {\n        this.body = body;\n        this.delegate = BodyInserters.fromObject(body);\n    }\n\n    @Override\n    public Mono&lt;Void&gt; insert(ReactiveHttpOutputMessage outputMessage, Context context) {\n        return this.delegate.insert(outputMessage, context);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":3298176,"reputation":7146,"user_id":2774914,"accept_rate":94,"display_name":"diziaq"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":12990,"favorite_count":0,"down_vote_count":0,"up_vote_count":13,"accepted_answer_id":61287477,"answer_count":3,"score":13,"last_activity_date":1695752337,"creation_date":1586608206,"question_id":61156827,"body_markdown":"In a test method an instance of `org.springframework.web.reactive.function.client.ClientRequest` is received.\r\n\r\nI want to verify its HttpMethod, URI and body.\r\n\r\nIt is quite obvious how to get everything except for the body.\r\n \r\n\r\n    ClientRequest request = makeInstance(...);\r\n\r\n    assertEquals(HttpMethod.POST, request.method());\r\n    assertEquals(&quot;somewhere/else&quot;, request.url().toString());\r\n\r\n    // ? unclear how to extract body using the BodyInserter\r\n\r\n    BodyInserter&lt;?, ? super ClientHttpRequest&gt; inserter = request.body();\r\n\r\n    inserter.insert(%outputMessage%, %context%);\r\n\r\n\r\nI have found in sources of Spring [how BodyInserters are tested][1]. It is more or less clear how to create a `BodyInserter.Context` (the second parameter), but I cannot understand how to construct the first parameter, so the request body could be extracted through it.\r\n \r\nPlease, show a conventional (or at least usable) way to get request body from a `ClientRequest` instance.\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/master/spring-webflux/src/test/java/org/springframework/web/reactive/function/BodyInsertersTests.java","title":"Hot to get body as String from spring reactive ClientRequest?","body":"<p>In a test method an instance of <code>org.springframework.web.reactive.function.client.ClientRequest</code> is received.</p>\n\n<p>I want to verify its HttpMethod, URI and body.</p>\n\n<p>It is quite obvious how to get everything except for the body.</p>\n\n<pre><code>ClientRequest request = makeInstance(...);\n\nassertEquals(HttpMethod.POST, request.method());\nassertEquals(\"somewhere/else\", request.url().toString());\n\n// ? unclear how to extract body using the BodyInserter\n\nBodyInserter&lt;?, ? super ClientHttpRequest&gt; inserter = request.body();\n\ninserter.insert(%outputMessage%, %context%);\n</code></pre>\n\n<p>I have found in sources of Spring <a href=\"https://github.com/spring-projects/spring-framework/blob/master/spring-webflux/src/test/java/org/springframework/web/reactive/function/BodyInsertersTests.java\" rel=\"noreferrer\">how BodyInserters are tested</a>. It is more or less clear how to create a <code>BodyInserter.Context</code> (the second parameter), but I cannot understand how to construct the first parameter, so the request body could be extracted through it.</p>\n\n<p>Please, show a conventional (or at least usable) way to get request body from a <code>ClientRequest</code> instance.</p>\n"},{"tags":["java","lucene","spi"],"answers":[{"tags":[],"owner":{"account_id":8814568,"reputation":101,"user_id":6586467,"display_name":"Amol"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468522393,"creation_date":1468522393,"answer_id":38382096,"question_id":38361533,"body_markdown":"its is fixed i added lucene jars in weblogic app server classpath and it is working as expected. i dont know why it is not detecting from my applications lib folder as its also on class path but looks like somehow SPI needs jars and META-INF on app servers classpath","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>its is fixed i added lucene jars in weblogic app server classpath and it is working as expected. i dont know why it is not detecting from my applications lib folder as its also on class path but looks like somehow SPI needs jars and META-INF on app servers classpath</p>\n"},{"comments":[{"owner":{"account_id":3269145,"reputation":2198,"user_id":2752896,"accept_rate":40,"display_name":"Nikhil Maheshwari"},"score":0,"creation_date":1494927823,"post_id":42462012,"comment_id":75024202,"body_markdown":"Thanks ! This saved my time.","body":"Thanks ! This saved my time."},{"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"score":0,"creation_date":1497119276,"post_id":42462012,"comment_id":75948675,"body_markdown":"Didn&#39;t work for me.  Using Lucene 6.2 but confusingly got an error stacktrace which mentioned both 6.2 and 5.0: &quot;Cannot instantiate SPI class: org.apache.lucene.codecs.lucene62.Lucene62Codec&quot; ... then &quot;An SPI class of type org.apache.lucene.codecs.PostingsFormat with name &#39;Lucene50&#39; does not exist&quot;... I tried your solution with many permutations, nothing worked.  See my sort of &quot;workaround&quot; answer.","body":"Didn&#39;t work for me.  Using Lucene 6.2 but confusingly got an error stacktrace which mentioned both 6.2 and 5.0: &quot;Cannot instantiate SPI class: org.apache.lucene.codecs.lucene62.Lucene62Codec&quot; ... then &quot;An SPI class of type org.apache.lucene.codecs.PostingsFormat with name &#39;Lucene50&#39; does not exist&quot;... I tried your solution with many permutations, nothing worked.  See my sort of &quot;workaround&quot; answer."},{"owner":{"account_id":1189097,"reputation":2314,"user_id":3732965,"accept_rate":29,"display_name":"Digital Alchemist"},"score":0,"creation_date":1497376556,"post_id":42462012,"comment_id":76048594,"body_markdown":"@mikerodent i dont get error stacktrace which mentioned both 6.2 and 5.0","body":"@mikerodent i dont get error stacktrace which mentioned both 6.2 and 5.0"}],"tags":[],"owner":{"account_id":1189097,"reputation":2314,"user_id":3732965,"accept_rate":29,"display_name":"Digital Alchemist"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1488059476,"creation_date":1488059476,"answer_id":42462012,"question_id":38361533,"body_markdown":"Please add following file in \r\n\r\nFolder : `META-INF/services/`\r\n\r\nFile :`org.apache.lucene.codecs.Codec` \r\n\r\nText :`org.apache.lucene.codecs.lucene54.Lucene54Codec`\r\n\r\nPlease review the solution with detailed description at https://anwaarlabs.wordpress.com/2017/02/25/lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-with-name-does-not-exist/\r\n\r\n\r\n\r\n\r\n\r\n","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>Please add following file in </p>\n\n<p>Folder : <code>META-INF/services/</code></p>\n\n<p>File :<code>org.apache.lucene.codecs.Codec</code> </p>\n\n<p>Text :<code>org.apache.lucene.codecs.lucene54.Lucene54Codec</code></p>\n\n<p>Please review the solution with detailed description at <a href=\"https://anwaarlabs.wordpress.com/2017/02/25/lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-with-name-does-not-exist/\" rel=\"nofollow noreferrer\">https://anwaarlabs.wordpress.com/2017/02/25/lucene-an-spi-class-of-type-org-apache-lucene-codecs-codec-with-name-does-not-exist/</a></p>\n"},{"comments":[{"owner":{"account_id":1873782,"reputation":1313,"user_id":1695454,"accept_rate":25,"display_name":"Alex Klibisz"},"score":1,"creation_date":1597523366,"post_id":44476672,"comment_id":112162599,"body_markdown":"I&#39;m also using the shadow plugin, and needed this setting to make it work:\n```\nshadowJar {\nmergeServiceFiles()\n}\n```\nBased on this github comment: https://github.com/johnrengelman/shadow/issues/304#issuecomment-543249368","body":"I&#39;m also using the shadow plugin, and needed this setting to make it work: ``` shadowJar { mergeServiceFiles() } ``` Based on this github comment: <a href=\"https://github.com/johnrengelman/shadow/issues/304#issuecomment-543249368\" rel=\"nofollow noreferrer\">github.com/johnrengelman/shadow/issues/&hellip;</a>"},{"owner":{"account_id":10088218,"reputation":634,"user_id":7456022,"display_name":"Arman"},"score":0,"creation_date":1627620591,"post_id":44476672,"comment_id":121209547,"body_markdown":"`shadowJar { mergeServiceFiles() }`\nIt helped, may be the answer can be updated with this","body":"<code>shadowJar { mergeServiceFiles() }</code> It helped, may be the answer can be updated with this"}],"tags":[],"owner":{"account_id":703628,"reputation":14438,"user_id":595305,"accept_rate":83,"display_name":"mike rodent"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1497119073,"creation_date":1497119073,"answer_id":44476672,"question_id":38361533,"body_markdown":"I got this building with gradle using a proposed solution to build a &quot;fat jar&quot; (executable jar containing all dependent jars) [here][1].\r\n\r\nBut it didn&#39;t work: I got this obscure error to do with Lucene, but not when testing or building or running normally, only when building a fat jar.\r\n\r\nMy solution was to use [shadow jar][2]: code from gradle.build:\r\n\r\n    buildscript {\r\n    \trepositories { jcenter() }\r\n    \tdependencies { // fatjar\r\n    \t\tclasspath &#39;com.github.jengelman.gradle.plugins:shadow:1.2.4&#39; }\r\n    }\r\n    apply plugin: &#39;com.github.johnrengelman.shadow&#39;\r\n    shadowJar {\r\n    \tbaseName = project.name\r\n    \tclassifier = null\r\n    \tversion = project.version\r\n    }\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/4894308/595305\r\n  [2]: https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>I got this building with gradle using a proposed solution to build a \"fat jar\" (executable jar containing all dependent jars) <a href=\"https://stackoverflow.com/a/4894308/595305\">here</a>.</p>\n\n<p>But it didn't work: I got this obscure error to do with Lucene, but not when testing or building or running normally, only when building a fat jar.</p>\n\n<p>My solution was to use <a href=\"https://plugins.gradle.org/plugin/com.github.johnrengelman.shadow\" rel=\"nofollow noreferrer\">shadow jar</a>: code from gradle.build:</p>\n\n<pre><code>buildscript {\n    repositories { jcenter() }\n    dependencies { // fatjar\n        classpath 'com.github.jengelman.gradle.plugins:shadow:1.2.4' }\n}\napply plugin: 'com.github.johnrengelman.shadow'\nshadowJar {\n    baseName = project.name\n    classifier = null\n    version = project.version\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10163556,"reputation":21,"user_id":7506247,"display_name":"Cenk Akdeniz"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1651422910,"creation_date":1510579684,"answer_id":47265449,"question_id":38361533,"body_markdown":"I added the below code into configuration tags\r\n        \r\n    &lt;transformers&gt;\r\n        &lt;transformer  implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\r\n            &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.Codec&lt;/resource&gt;\r\n            &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.PostingsFormat&lt;/resource&gt;\r\n        &lt;/transformer&gt;\r\n    &lt;/transformers&gt;\r\n\r\nAnd also I add lucene-core dependency at the top of the dependencies tag\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lucene-core&lt;/artifactId&gt;\r\n        &lt;version&gt;5.5.0&lt;/version&gt;\r\n    &lt;/dependency&gt;","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>I added the below code into configuration tags</p>\n<pre><code>&lt;transformers&gt;\n    &lt;transformer  implementation=&quot;org.apache.maven.plugins.shade.resource.AppendingTransformer&quot;&gt;\n        &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.Codec&lt;/resource&gt;\n        &lt;resource&gt;META-INF/services/org.apache.lucene.codecs.PostingsFormat&lt;/resource&gt;\n    &lt;/transformer&gt;\n&lt;/transformers&gt;\n</code></pre>\n<p>And also I add lucene-core dependency at the top of the dependencies tag</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\n    &lt;artifactId&gt;lucene-core&lt;/artifactId&gt;\n    &lt;version&gt;5.5.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3798266,"reputation":119,"user_id":3152563,"accept_rate":75,"display_name":"arj"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1560589057,"creation_date":1560589057,"answer_id":56608918,"question_id":38361533,"body_markdown":"Make sure that the lucene jar that you have included in your project is of the same version as that of lucene codec mentioned in error. E.g. if the error states LuceneCodec62 then you should have lucene-6.x.x jar included in your project.","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>Make sure that the lucene jar that you have included in your project is of the same version as that of lucene codec mentioned in error. E.g. if the error states LuceneCodec62 then you should have lucene-6.x.x jar included in your project.</p>\n"},{"comments":[{"owner":{"account_id":29541269,"reputation":1,"user_id":22639879,"display_name":"jrm"},"score":1,"creation_date":1695752386,"post_id":77182538,"comment_id":136065596,"body_markdown":"I had added the SPI configuration files, and gotten past the codec, but ran into additional issues with SPI.  I thought I had all the classes accounted for, but could not get it working. I added the codec jar and removed all the resource files. Seems easier. But I am only using the standard implementations.","body":"I had added the SPI configuration files, and gotten past the codec, but ran into additional issues with SPI.  I thought I had all the classes accounted for, but could not get it working. I added the codec jar and removed all the resource files. Seems easier. But I am only using the standard implementations."}],"tags":[],"owner":{"account_id":29541269,"reputation":1,"user_id":22639879,"display_name":"jrm"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695752228,"creation_date":1695752194,"answer_id":77182538,"question_id":38361533,"body_markdown":"I just added the appropriate codec jar as a dependency.\r\n\r\n    &lt;dependency&gt;\r\n       &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\r\n        &lt;artifactId&gt;lucene-codecs&lt;/artifactId&gt;\r\n        &lt;version&gt;7.2.0&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>I just added the appropriate codec jar as a dependency.</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;\n    &lt;artifactId&gt;lucene-codecs&lt;/artifactId&gt;\n    &lt;version&gt;7.2.0&lt;/version&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":8814568,"reputation":101,"user_id":6586467,"display_name":"Amol"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9718,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":6,"score":10,"last_activity_date":1695752228,"creation_date":1468443328,"question_id":38361533,"body_markdown":"With lucene-core-5.5.2 i am facing problem a in weblogic server. standalone search application works but when i deploy as WEB APP it is failing with below error\r\n\r\n    Exception type is &#39;java.lang.ExceptionInInitializerError&#39;. Runtime error: java.lang.IllegalArgumentException: An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist. You need to add the corresponding JAR file supporting this SPI to your classpath. The current classpath supports the following names: []\r\n\r\nI tried creating folder structure under `classes/ ` as `META-INF/services/` added all files from `lucene-core-5.5.2.jar META-INF\\services\\` directory also created jar file for `META-INF\\services\\` and added in classpath but it doesn&#39;t recognize `META-INF/services` to load SPI\r\n\r\nAny help would be really appreciated.","title":"An SPI class of type org.apache.lucene.codecs.Codec with name &#39;Lucene54&#39; does not exist","body":"<p>With lucene-core-5.5.2 i am facing problem a in weblogic server. standalone search application works but when i deploy as WEB APP it is failing with below error</p>\n\n<pre><code>Exception type is 'java.lang.ExceptionInInitializerError'. Runtime error: java.lang.IllegalArgumentException: An SPI class of type org.apache.lucene.codecs.Codec with name 'Lucene54' does not exist. You need to add the corresponding JAR file supporting this SPI to your classpath. The current classpath supports the following names: []\n</code></pre>\n\n<p>I tried creating folder structure under <code>classes/</code> as <code>META-INF/services/</code> added all files from <code>lucene-core-5.5.2.jar META-INF\\services\\</code> directory also created jar file for <code>META-INF\\services\\</code> and added in classpath but it doesn't recognize <code>META-INF/services</code> to load SPI</p>\n\n<p>Any help would be really appreciated.</p>\n"},{"tags":["java","spring","spring-boot","reactive-programming","javabeans"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1695752278,"post_id":77182523,"comment_id":136065580,"body_markdown":"You either use reactive or not, you cannot mix both as Spring Boot will only auto-configure one of them. If you want both you have to manually configure them.","body":"You either use reactive or not, you cannot mix both as Spring Boot will only auto-configure one of them. If you want both you have to manually configure them."},{"owner":{"account_id":1553950,"reputation":1291,"user_id":1445660,"accept_rate":38,"display_name":"Rony Tesler"},"score":0,"creation_date":1695755910,"post_id":77182523,"comment_id":136066225,"body_markdown":"@M.Deinum Can I use pagination in the Reactive repository?","body":"@M.Deinum Can I use pagination in the Reactive repository?"},{"owner":{"account_id":10770525,"reputation":526,"user_id":7924110,"display_name":"Kenany"},"score":1,"creation_date":1695771230,"post_id":77182523,"comment_id":136068180,"body_markdown":"You can&#39;t have two repositories for the same entity. See this post: https://stackoverflow.com/questions/58292062/spring-two-repositories-of-same-entity#:~:text=It%20is%20not%20possible%20to,Person%20class)%20using%20a%20map.","body":"You can&#39;t have two repositories for the same entity. See this post: <a href=\"https://stackoverflow.com/questions/58292062/spring-two-repositories-of-same-entity#:~:text=It%20is%20not%20possible%20to,Person%20class)%20using%20a%20map\" title=\"spring two repositories of same entity%23%3a%7e%3atext%3dIt%2520is%2520not%2520possible%2520to%2cPerson%2520class)%2520using%2520a%2520map\">stackoverflow.com/questions/58292062/&hellip;</a>."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1695797951,"post_id":77182523,"comment_id":136070617,"body_markdown":"No, but you can quite easily use a flux to skip x elements and take y to simulate paging.","body":"No, but you can quite easily use a flux to skip x elements and take y to simulate paging."}],"owner":{"account_id":1553950,"reputation":1291,"user_id":1445660,"accept_rate":38,"display_name":"Rony Tesler"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695752080,"creation_date":1695751982,"question_id":77182523,"body_markdown":"\r\nGameRepository.java:\r\n\r\n    @Repository\r\n    public interface GameRepository extends MongoRepository&lt;Game, String&gt; {\r\n    }\r\n\r\nGameRepositoryReactive.java:\r\n\r\n    @Repository\r\n    public interface GameRepositoryReactive extends ReactiveMongoRepository&lt;Game, String&gt; {\r\n    }\r\n\r\nGame.java:\r\n\r\n    @Data\r\n    @AllArgsConstructor\r\n    @NoArgsConstructor\r\n    @Document(collection = &quot;games&quot;)\r\n    public class Game{\r\n        @Id\r\n        String id;\r\n        String name;\r\n    }\r\n\r\nGameService.java:\r\n\r\n    private final GameRepositoryReactive gameRepositoryReactive;\r\n        private final GameRepository gameRepository;\r\n    \r\n        public GameService(GameRepository gameRepository, GameRepositoryReactive gameRepositoryReactive) {\r\n            this.gameRepositoryReactive = gameRepositoryReactive;\r\n            this.gameRepository = gameRepository;\r\n        }\r\n\r\n\r\nThe error I get:\r\n\r\n&gt; Parameter 0 of constructor in com.example.service.GameService required\r\n&gt; a bean of type &#39;com.example.repository.GameRepository&#39; that could not\r\n&gt; be found. \r\n\r\nWith one ReactiveMongoRepository repository I get no error.\r\n\r\n","title":"spring boot can&#39;t find my repository after adding a new repository","body":"<p>GameRepository.java:</p>\n<pre><code>@Repository\npublic interface GameRepository extends MongoRepository&lt;Game, String&gt; {\n}\n</code></pre>\n<p>GameRepositoryReactive.java:</p>\n<pre><code>@Repository\npublic interface GameRepositoryReactive extends ReactiveMongoRepository&lt;Game, String&gt; {\n}\n</code></pre>\n<p>Game.java:</p>\n<pre><code>@Data\n@AllArgsConstructor\n@NoArgsConstructor\n@Document(collection = &quot;games&quot;)\npublic class Game{\n    @Id\n    String id;\n    String name;\n}\n</code></pre>\n<p>GameService.java:</p>\n<pre><code>private final GameRepositoryReactive gameRepositoryReactive;\n    private final GameRepository gameRepository;\n\n    public GameService(GameRepository gameRepository, GameRepositoryReactive gameRepositoryReactive) {\n        this.gameRepositoryReactive = gameRepositoryReactive;\n        this.gameRepository = gameRepository;\n    }\n</code></pre>\n<p>The error I get:</p>\n<blockquote>\n<p>Parameter 0 of constructor in com.example.service.GameService required\na bean of type 'com.example.repository.GameRepository' that could not\nbe found.</p>\n</blockquote>\n<p>With one ReactiveMongoRepository repository I get no error.</p>\n"},{"tags":["java","switch-statement"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":2,"creation_date":1695552888,"post_id":77166743,"comment_id":136037258,"body_markdown":"The error message is here misleading: it&#39;s only `default:`, not `case default:`.","body":"The error message is here misleading: it&#39;s only <code>default:</code>, not <code>case default:</code>."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":3,"creation_date":1695562095,"post_id":77166743,"comment_id":136038151,"body_markdown":"??? Just replace `case default` with `default` (without `case`) and everything is fine. The error message `The preview feature Pattern Matching in Switch is only available with source level 20 and above` you got from the IDE is misleading, so just ignore it.","body":"??? Just replace <code>case default</code> with <code>default</code> (without <code>case</code>) and everything is fine. The error message <code>The preview feature Pattern Matching in Switch is only available with source level 20 and above</code> you got from the IDE is misleading, so just ignore it."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1695563365,"post_id":77166743,"comment_id":136038285,"body_markdown":"What is your question?","body":"What is your question?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1695566169,"post_id":77166743,"comment_id":136038540,"body_markdown":"The syntax of the [switch statement](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html) is incorrect.","body":"The syntax of the <a href=\"https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html\" rel=\"nofollow noreferrer\">switch statement</a> is incorrect."}],"answers":[{"tags":[],"owner":{"account_id":28184633,"reputation":76,"user_id":21541061,"display_name":"Cancerous115"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1695570795,"creation_date":1695566739,"answer_id":77167570,"question_id":77166743,"body_markdown":"This is a syntax error where the code you meant to write is actually trying to do something entirely different than you intended. Your syntax error accidentally overlapped with a brand new Java Feature called [Pattern Matching for switch Expressions and Statements][1].\r\n\r\nTo fix the error, just switch `case default` to say just `default`.\r\n\r\n```\r\ncase default:\r\n    return false;\r\n```\r\nto \r\n```\r\ndefault:\r\n    return false;\r\n```\r\n\r\nAnd to better explain the error message, Eclipse the IDE is aware of the new Java feature, and thus, is trying to let you know that what you are doing looks like the new feature, and that if you are trying to do the new feature, you should upgrade your code level to 21 or above.\r\n\r\nBut of course, Eclipse got it wrong - you just want a default clause. So write it like I showed you above, and the error should go away.\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/21/language/pattern-matching-switch-expressions-and-statements.html","title":"using case default on switch statement returns &quot;The preview feature Pattern Matching in Switch is only available with source level 20 and above&quot;","body":"<p>This is a syntax error where the code you meant to write is actually trying to do something entirely different than you intended. Your syntax error accidentally overlapped with a brand new Java Feature called <a href=\"https://docs.oracle.com/en/java/javase/21/language/pattern-matching-switch-expressions-and-statements.html\" rel=\"nofollow noreferrer\">Pattern Matching for switch Expressions and Statements</a>.</p>\n<p>To fix the error, just switch <code>case default</code> to say just <code>default</code>.</p>\n<pre><code>case default:\n    return false;\n</code></pre>\n<p>to</p>\n<pre><code>default:\n    return false;\n</code></pre>\n<p>And to better explain the error message, Eclipse the IDE is aware of the new Java feature, and thus, is trying to let you know that what you are doing looks like the new feature, and that if you are trying to do the new feature, you should upgrade your code level to 21 or above.</p>\n<p>But of course, Eclipse got it wrong - you just want a default clause. So write it like I showed you above, and the error should go away.</p>\n"},{"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":2,"creation_date":1695626181,"post_id":77167919,"comment_id":136044205,"body_markdown":"Yep, [JEP 361](https://openjdk.org/jeps/361) (nice that a Java language developer answers a beginner&#39;s question).","body":"Yep, <a href=\"https://openjdk.org/jeps/361\" rel=\"nofollow noreferrer\">JEP 361</a> (nice that a Java language developer answers a beginner&#39;s question)."},{"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"score":1,"creation_date":1695751682,"post_id":77167919,"comment_id":136065487,"body_markdown":"I&#39;ve never heard &quot;morally&quot; used in this context (usually something like &quot;conceptually&quot; or &quot;semantically&quot;), but I do grok it.","body":"I&#39;ve never heard &quot;morally&quot; used in this context (usually something like &quot;conceptually&quot; or &quot;semantically&quot;), but I do grok it."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1696602815,"post_id":77167919,"comment_id":136178495,"body_markdown":"I think, in the shown form with `default -&gt; false`, the `switch` is not better than `return dayNumber &gt;=0 &amp;&amp; dayNumber &lt;= 4;` A more interesting example would be `return switch (dayNumber) { case 0, 1, 2, 3, 4 -&gt; true; case 5, 6 -&gt; false; default -&gt; throw new IllegalArgumentException(&quot;not a week day number: &quot; + dayNumber); };`","body":"I think, in the shown form with <code>default -&gt; false</code>, the <code>switch</code> is not better than <code>return dayNumber &gt;=0 &amp;&amp; dayNumber &lt;= 4;</code> A more interesting example would be <code>return switch (dayNumber) { case 0, 1, 2, 3, 4 -&gt; true; case 5, 6 -&gt; false; default -&gt; throw new IllegalArgumentException(&quot;not a week day number: &quot; + dayNumber); };</code>"}],"tags":[],"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1695579272,"creation_date":1695572030,"answer_id":77167919,"question_id":77166743,"body_markdown":"Also, note that what you are doing is morally an expression, and you can express it as such:\r\n\r\n```\r\n    return switch (dayNumber) {\r\n        case 0, 1, 2, 3, 4 -&gt; true;\r\n        case 5, 6 -&gt; false;\r\n        default -&gt; false;\r\n    }\r\n```\r\n\r\nOr even\r\n\r\n    return switch (dayNumber) {\r\n        case 0, 1, 2, 3, 4 -&gt; true;\r\n        default -&gt; false;\r\n    }\r\n\r\nsince the intention here is &quot;true if in 0..4, false otherwise&quot;.","title":"using case default on switch statement returns &quot;The preview feature Pattern Matching in Switch is only available with source level 20 and above&quot;","body":"<p>Also, note that what you are doing is morally an expression, and you can express it as such:</p>\n<pre><code>    return switch (dayNumber) {\n        case 0, 1, 2, 3, 4 -&gt; true;\n        case 5, 6 -&gt; false;\n        default -&gt; false;\n    }\n</code></pre>\n<p>Or even</p>\n<pre><code>return switch (dayNumber) {\n    case 0, 1, 2, 3, 4 -&gt; true;\n    default -&gt; false;\n}\n</code></pre>\n<p>since the intention here is &quot;true if in 0..4, false otherwise&quot;.</p>\n"}],"owner":{"account_id":26852818,"reputation":45,"user_id":20437479,"display_name":"Junk Mail"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":187,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":77167570,"answer_count":2,"score":1,"last_activity_date":1695751735,"creation_date":1695552476,"question_id":77166743,"body_markdown":"```\r\npackage com.learningjava.conditionals;\r\n\r\npublic class SwitchExcercises {\r\n\r\n\tpublic static boolean isWeekDay(int dayNumber) {\r\n\t\tswitch (dayNumber) {\r\n\t\tcase 0:\r\n\t\tcase 1:\r\n\t\tcase 2:\r\n\t\tcase 3:\r\n\t\tcase 4:\r\n\t\t\treturn true;\r\n\t\tcase 5:\r\n\t\tcase 6:\r\n\t\t\treturn false;\r\n\t\tcase default:\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n}\r\n```\r\nI&#39;m using Eclipse as my ide. Shows error next to case default, says \r\n\r\n    The preview feature Pattern Matching in Switch is only available with source level 20 and above.\r\n\r\n \r\n\r\nUsing java-se 17. Thanks for the help.","title":"using case default on switch statement returns &quot;The preview feature Pattern Matching in Switch is only available with source level 20 and above&quot;","body":"<pre><code>package com.learningjava.conditionals;\n\npublic class SwitchExcercises {\n\n    public static boolean isWeekDay(int dayNumber) {\n        switch (dayNumber) {\n        case 0:\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n            return true;\n        case 5:\n        case 6:\n            return false;\n        case default:\n            return false;\n        }\n    }\n}\n</code></pre>\n<p>I'm using Eclipse as my ide. Shows error next to case default, says</p>\n<pre><code>The preview feature Pattern Matching in Switch is only available with source level 20 and above.\n</code></pre>\n<p>Using java-se 17. Thanks for the help.</p>\n"},{"tags":["java","spring","redis","jackson","spring-data-redis"],"answers":[{"comments":[{"owner":{"account_id":23953627,"reputation":31,"user_id":17944810,"display_name":"overwriter"},"score":0,"creation_date":1695752350,"post_id":77182491,"comment_id":136065591,"body_markdown":"Hey Dennis, thank you so much - this already seems to have brought me one step closer to the solution! I am curious, when you said *&quot;I noticed you&#39;re manually creating the GenericJackson2JsonRedisSerializer&quot;*, could you elaborate on what the &quot;automatic&quot; way would be in this context? Currently, I am looking for the most plain and simple implementation, so maybe my manual creation of that `GenericJackson2JsonRedisSerializer` is indeed not even necessary at this stage?","body":"Hey Dennis, thank you so much - this already seems to have brought me one step closer to the solution! I am curious, when you said <i>&quot;I noticed you&#39;re manually creating the GenericJackson2JsonRedisSerializer&quot;</i>, could you elaborate on what the &quot;automatic&quot; way would be in this context? Currently, I am looking for the most plain and simple implementation, so maybe my manual creation of that <code>GenericJackson2JsonRedisSerializer</code> is indeed not even necessary at this stage?"},{"owner":{"account_id":1601811,"reputation":453,"user_id":1482699,"display_name":"Dennis"},"score":0,"creation_date":1695752731,"post_id":77182491,"comment_id":136065664,"body_markdown":"`@EnableRedisRepositories` should automatically configure a `RedisTemplate` for you. However it will enable a few other things as well.","body":"<code>@EnableRedisRepositories</code> should automatically configure a <code>RedisTemplate</code> for you. However it will enable a few other things as well."},{"owner":{"account_id":23953627,"reputation":31,"user_id":17944810,"display_name":"overwriter"},"score":0,"creation_date":1695754375,"post_id":77182491,"comment_id":136065952,"body_markdown":"Thank you. Would you have a general recommendation of when to use one over the other? I am trying to understand the pros and cons of each approach...","body":"Thank you. Would you have a general recommendation of when to use one over the other? I am trying to understand the pros and cons of each approach..."},{"owner":{"account_id":1601811,"reputation":453,"user_id":1482699,"display_name":"Dennis"},"score":1,"creation_date":1695798608,"post_id":77182491,"comment_id":136070722,"body_markdown":"If you&#39;re handling it yourself, you&#39;ll need a new RedisTemplate bean for each class you&#39;re serializing to redis. If you only have a few classes, doing it manually is okay. There are advanced ways like using InjectionPoint to generalize it, but that&#39;s a deeper topic.","body":"If you&#39;re handling it yourself, you&#39;ll need a new RedisTemplate bean for each class you&#39;re serializing to redis. If you only have a few classes, doing it manually is okay. There are advanced ways like using InjectionPoint to generalize it, but that&#39;s a deeper topic."},{"owner":{"account_id":23953627,"reputation":31,"user_id":17944810,"display_name":"overwriter"},"score":1,"creation_date":1695918188,"post_id":77182491,"comment_id":136091009,"body_markdown":"Thanks again for taking the time to help!","body":"Thanks again for taking the time to help!"}],"tags":[],"owner":{"account_id":1601811,"reputation":453,"user_id":1482699,"display_name":"Dennis"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695751686,"creation_date":1695751686,"answer_id":77182491,"question_id":77182388,"body_markdown":"I noticed you&#39;re manually creating the `GenericJackson2JsonRedisSerializer`. When you do that, it automatically creates a new ObjectMapper that isn&#39;t set up through Spring and has no auto module loading capability. A quick fix would be to either inject the ObjectMapper into your `redisTemplate` bean function or make an ObjectMapper right inside the function and then hand it over to the `GenericJackson2JsonRedisSerializer`&#39;s constructor. This should sort things out. By the way, going the injection route is a good idea since it lets you use the default and globally set up ObjectMapper. And just a heads up, don&#39;t forget to include the `com.fasterxml.jackson.datatype:jackson-datatype-jsr310` dependency. \r\n\r\nSo a good solution can look like this: \r\n\r\n```java\r\n@Bean\r\npublic RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory, ObjectMapper mapper) {\r\n    RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\r\n    template.setConnectionFactory(factory);\r\n\r\n    // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\r\n    template.setKeySerializer(new StringRedisSerializer());\r\n\r\n    // Serialization for values. By default, it uses JdkSerializationRedisSerializer\r\n    // Here, we use Jackson to convert MyObject to JSON\r\n    template.setValueSerializer(new GenericJackson2JsonRedisSerializer(mapper));\r\n\r\n    return template;\r\n}\r\n```\r\n\r\nHope this helps!","title":"Unable to set up a simple Redis + Spring project: &quot;Java 8 date/time type `java.time.Instant` not supported by default&quot;","body":"<p>I noticed you're manually creating the <code>GenericJackson2JsonRedisSerializer</code>. When you do that, it automatically creates a new ObjectMapper that isn't set up through Spring and has no auto module loading capability. A quick fix would be to either inject the ObjectMapper into your <code>redisTemplate</code> bean function or make an ObjectMapper right inside the function and then hand it over to the <code>GenericJackson2JsonRedisSerializer</code>'s constructor. This should sort things out. By the way, going the injection route is a good idea since it lets you use the default and globally set up ObjectMapper. And just a heads up, don't forget to include the <code>com.fasterxml.jackson.datatype:jackson-datatype-jsr310</code> dependency.</p>\n<p>So a good solution can look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory, ObjectMapper mapper) {\n    RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\n    template.setConnectionFactory(factory);\n\n    // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\n    template.setKeySerializer(new StringRedisSerializer());\n\n    // Serialization for values. By default, it uses JdkSerializationRedisSerializer\n    // Here, we use Jackson to convert MyObject to JSON\n    template.setValueSerializer(new GenericJackson2JsonRedisSerializer(mapper));\n\n    return template;\n}\n</code></pre>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":23953627,"reputation":31,"user_id":17944810,"display_name":"overwriter"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":220,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695751686,"creation_date":1695750866,"question_id":77182388,"body_markdown":"and many thanks for your help in advance! I am trying to set up a simple Spring + Redis project, using IntelliJ, and sadly it just doesn&#39;t work.\r\n\r\nI have checked countless forum posts here, but sadly to no avail. Whilst many of them are somewhat related, they are not the same, and I was unable to use the insights provided to my particular situation.\r\n\r\nFor convenient reproduction of the issue, I am listing every step of what I did below:\r\n### Project Setup\r\n 1. Start IntelliJ IDEA 2023.1.4 (Ultimate Edition)\r\n 2. *File -&gt; New -&gt; Project... -&gt;* **Spring Initializr**\r\n 3. Language: **Java**\r\n 4. Type: **Gradle - Kotlin**\r\n 5. Click *Next*\r\n 6. Spring Boot: **3.1.4**\r\n 7. Select: **Lombok** + **Spring Web** + **Spring Data Redis (Access+Driver)**\r\n## Application properties\r\n 8. I added the following  to `application.properties` in `src/main/resources`:\r\n```\r\nspring.data.redis.host=localhost\r\nspring.data.redis.port=6379\r\n```\r\n*(Note that Redis is running locally in a container and I tested that it works fine / is reachable on port 6379)*\r\n## Custom data class\r\n 9. Right-click main package (in my case `com.example.demo`), and click *New -&gt; Java Class*\r\n 10. Name the class `MyObject` and add the following:\r\n```\r\npackage com.example.demo;\r\n\r\nimport lombok.Data;\r\n\r\nimport java.time.Instant;\r\n\r\n@Data\r\npublic class MyObject {\r\n    Instant timestamp;\r\n    String textPayload;\r\n}\r\n```\r\n## Configuration class\r\n11. Right-click main package (in my case `com.example.demo`), and click *New -&gt; Java Class*\r\n12. Name the class `AppConfig` and add the following code:\r\n```\r\npackage com.example.demo;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;\r\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\r\n\r\n@Configuration\r\npublic class AppConfig {\r\n    @Bean\r\n    public RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory) {\r\n        RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\r\n        template.setConnectionFactory(factory);\r\n\r\n        // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\r\n        template.setKeySerializer(new StringRedisSerializer());\r\n\r\n        // Serialization for values. By default, it uses JdkSerializationRedisSerializer\r\n        // Here, we use Jackson to convert MyObject to JSON\r\n        template.setValueSerializer(new GenericJackson2JsonRedisSerializer());\r\n\r\n        return template;\r\n    }\r\n}\r\n```\r\n## Create controller\r\n 13. Right-click main package (in my case `com.example.demo`), and click *New -&gt; Java Class*\r\n 14. Name the class `MyController` and add the following code:\r\n```\r\npackage com.example.demo;\r\n\r\nimport lombok.AccessLevel;\r\nimport lombok.RequiredArgsConstructor;\r\nimport lombok.experimental.FieldDefaults;\r\nimport org.springframework.data.redis.core.RedisTemplate;\r\nimport org.springframework.http.ResponseEntity;\r\nimport org.springframework.web.bind.annotation.GetMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\n\r\nimport java.time.Instant;\r\n\r\n@FieldDefaults(makeFinal = true, level = AccessLevel.PRIVATE)\r\n@RequiredArgsConstructor\r\n@RestController\r\npublic class MyController {\r\n    RedisTemplate&lt;String, MyObject&gt; redisTemplate;\r\n\r\n    @GetMapping(&quot;/save&quot;)\r\n    public ResponseEntity&lt;String&gt; saveObject() {\r\n        MyObject myObject = new MyObject();\r\n        myObject.setTimestamp(Instant.now());\r\n        myObject.setTextPayload(&quot;some data&quot;);\r\n        redisTemplate.opsForValue().set(&quot;myObject&quot;, myObject);\r\n        return ResponseEntity.ok(&quot;Object saved&quot;);\r\n    }\r\n\r\n    @GetMapping(&quot;/read&quot;)\r\n    public ResponseEntity&lt;MyObject&gt; readObject() {\r\n        return ResponseEntity.ok(redisTemplate.opsForValue().get(&quot;myObject&quot;));\r\n    }\r\n}\r\n```\r\n---\r\n# Result\r\nThe above will then lead to the following exception when trying to call the `/save/ endpoint:\r\n```\r\ncom.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])\r\n\tat com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1308) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:732) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:772) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType(BeanSerializerBase.java:655) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.impl.TypeWrappedSerializer.serialize(TypeWrappedSerializer.java:32) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:479) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:318) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4719) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat com.fasterxml.jackson.databind.ObjectMapper.writeValueAsBytes(ObjectMapper.java:3987) ~[jackson-databind-2.15.2.jar:2.15.2]\r\n\tat org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.serialize(GenericJackson2JsonRedisSerializer.java:220) ~[spring-data-redis-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.redis.core.AbstractOperations.rawValue(AbstractOperations.java:128) ~[spring-data-redis-3.1.4.jar:3.1.4]\r\n\tat org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:236) ~[spring-data-redis-3.1.4.jar:3.1.4]\r\n\tat com.example.demo.MyController.saveObject(MyController.java:24) ~[main/:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\r\n\tat java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.13.jar:6.0]\r\n\tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.12.jar:6.0.12]\r\n\tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.13.jar:6.0]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\r\n\tat java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\r\n```\r\n## Solution approach #1\r\nMy first attempt was to follow the advice given in the exception message: &quot;*com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: **add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling** (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])*&quot;\r\n\r\nSo I added the following line to my `build.gradle.kts` file:\r\n```\r\nimplementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\r\n```\r\n...and hit the Gradle reload button / press *Ctrl + Shift + O* in IntelliJ\r\n\r\n**Result: the same exception as above.**\r\n\r\n## Solution approach #2\r\nKeeping the newly added dependency in there for good measure, I attempted several other solution approaches suggested here on Stack Overflow.\r\n### Add a bean for the `ObjectMapper` singleton in my configuration\r\nSource: [Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default][1]\r\n```\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        ObjectMapper objectMapper = new ObjectMapper();\r\n        objectMapper.registerModule(new JavaTimeModule());\r\n        return objectMapper;\r\n    }\r\n```\r\n\r\n**Result: same exception as above.**\r\n\r\n## Solution approach #3\r\n### Another variant for an `ObjectMapper` singleton\r\nSource: [How do I enable the JSR310 support for LocalDate using Jackson?][2]\r\n```\r\n    @Bean\r\n    public ObjectMapper objectMapper() {\r\n        return JsonMapper.builder()\r\n                         .addModule(new JavaTimeModule())\r\n                         .build();\r\n    }\r\n```\r\n\r\n**Result: same exception as above.**\r\n\r\n## Solution approach #4\r\n### Specify bean for `Jackson2ObjectMapperBuilder`\r\nSource: ChatGPT&#39;s suggestion [![Configuring ObjectMapper][3]][3]\r\n```\r\n    @Bean\r\n    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\r\n        return new Jackson2ObjectMapperBuilder().modules(new JavaTimeModule());\r\n    }\r\n```\r\n\r\n**Result: same exception as above.**\r\n\r\n---\r\n# Help?\r\nI tried many other things, spending quite some time on this problem, but nothing would work. Can it really be that hard to serialize Instant&#39;s with Spring/Redis? What am I missing? Can someone help?\r\n\r\nThank you so much in advance!\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/67874510/spring-boot-2-5-0-and-invaliddefinitionexception-java-8-date-time-type-java-ti\r\n  [2]: https://stackoverflow.com/questions/69811740/how-do-i-enable-the-jsr310-support-for-localdate-using-jackson\r\n  [3]: https://i.stack.imgur.com/PInvG.png","title":"Unable to set up a simple Redis + Spring project: &quot;Java 8 date/time type `java.time.Instant` not supported by default&quot;","body":"<p>and many thanks for your help in advance! I am trying to set up a simple Spring + Redis project, using IntelliJ, and sadly it just doesn't work.</p>\n<p>I have checked countless forum posts here, but sadly to no avail. Whilst many of them are somewhat related, they are not the same, and I was unable to use the insights provided to my particular situation.</p>\n<p>For convenient reproduction of the issue, I am listing every step of what I did below:</p>\n<h3>Project Setup</h3>\n<ol>\n<li>Start IntelliJ IDEA 2023.1.4 (Ultimate Edition)</li>\n<li><em>File -&gt; New -&gt; Project... -&gt;</em> <strong>Spring Initializr</strong></li>\n<li>Language: <strong>Java</strong></li>\n<li>Type: <strong>Gradle - Kotlin</strong></li>\n<li>Click <em>Next</em></li>\n<li>Spring Boot: <strong>3.1.4</strong></li>\n<li>Select: <strong>Lombok</strong> + <strong>Spring Web</strong> + <strong>Spring Data Redis (Access+Driver)</strong></li>\n</ol>\n<h2>Application properties</h2>\n<ol start=\"8\">\n<li>I added the following  to <code>application.properties</code> in <code>src/main/resources</code>:</li>\n</ol>\n<pre><code>spring.data.redis.host=localhost\nspring.data.redis.port=6379\n</code></pre>\n<p><em>(Note that Redis is running locally in a container and I tested that it works fine / is reachable on port 6379)</em></p>\n<h2>Custom data class</h2>\n<ol start=\"9\">\n<li>Right-click main package (in my case <code>com.example.demo</code>), and click <em>New -&gt; Java Class</em></li>\n<li>Name the class <code>MyObject</code> and add the following:</li>\n</ol>\n<pre><code>package com.example.demo;\n\nimport lombok.Data;\n\nimport java.time.Instant;\n\n@Data\npublic class MyObject {\n    Instant timestamp;\n    String textPayload;\n}\n</code></pre>\n<h2>Configuration class</h2>\n<ol start=\"11\">\n<li>Right-click main package (in my case <code>com.example.demo</code>), and click <em>New -&gt; Java Class</em></li>\n<li>Name the class <code>AppConfig</code> and add the following code:</li>\n</ol>\n<pre><code>package com.example.demo;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.redis.connection.RedisConnectionFactory;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer;\nimport org.springframework.data.redis.serializer.StringRedisSerializer;\n\n@Configuration\npublic class AppConfig {\n    @Bean\n    public RedisTemplate&lt;String, MyObject&gt; redisTemplate(RedisConnectionFactory factory) {\n        RedisTemplate&lt;String, MyObject&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(factory);\n\n        // Serialization for keys. By default, it uses JdkSerializationRedisSerializer\n        template.setKeySerializer(new StringRedisSerializer());\n\n        // Serialization for values. By default, it uses JdkSerializationRedisSerializer\n        // Here, we use Jackson to convert MyObject to JSON\n        template.setValueSerializer(new GenericJackson2JsonRedisSerializer());\n\n        return template;\n    }\n}\n</code></pre>\n<h2>Create controller</h2>\n<ol start=\"13\">\n<li>Right-click main package (in my case <code>com.example.demo</code>), and click <em>New -&gt; Java Class</em></li>\n<li>Name the class <code>MyController</code> and add the following code:</li>\n</ol>\n<pre><code>package com.example.demo;\n\nimport lombok.AccessLevel;\nimport lombok.RequiredArgsConstructor;\nimport lombok.experimental.FieldDefaults;\nimport org.springframework.data.redis.core.RedisTemplate;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\nimport java.time.Instant;\n\n@FieldDefaults(makeFinal = true, level = AccessLevel.PRIVATE)\n@RequiredArgsConstructor\n@RestController\npublic class MyController {\n    RedisTemplate&lt;String, MyObject&gt; redisTemplate;\n\n    @GetMapping(&quot;/save&quot;)\n    public ResponseEntity&lt;String&gt; saveObject() {\n        MyObject myObject = new MyObject();\n        myObject.setTimestamp(Instant.now());\n        myObject.setTextPayload(&quot;some data&quot;);\n        redisTemplate.opsForValue().set(&quot;myObject&quot;, myObject);\n        return ResponseEntity.ok(&quot;Object saved&quot;);\n    }\n\n    @GetMapping(&quot;/read&quot;)\n    public ResponseEntity&lt;MyObject&gt; readObject() {\n        return ResponseEntity.ok(redisTemplate.opsForValue().get(&quot;myObject&quot;));\n    }\n}\n</code></pre>\n<hr />\n<h1>Result</h1>\n<p>The above will then lead to the following exception when trying to call the `/save/ endpoint:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:77) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.SerializerProvider.reportBadDefinition(SerializerProvider.java:1308) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.impl.UnsupportedTypeSerializer.serialize(UnsupportedTypeSerializer.java:35) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.BeanPropertyWriter.serializeAsField(BeanPropertyWriter.java:732) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeFields(BeanSerializerBase.java:772) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.std.BeanSerializerBase.serializeWithType(BeanSerializerBase.java:655) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.impl.TypeWrappedSerializer.serialize(TypeWrappedSerializer.java:32) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider._serialize(DefaultSerializerProvider.java:479) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ser.DefaultSerializerProvider.serializeValue(DefaultSerializerProvider.java:318) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ObjectMapper._writeValueAndClose(ObjectMapper.java:4719) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at com.fasterxml.jackson.databind.ObjectMapper.writeValueAsBytes(ObjectMapper.java:3987) ~[jackson-databind-2.15.2.jar:2.15.2]\n    at org.springframework.data.redis.serializer.GenericJackson2JsonRedisSerializer.serialize(GenericJackson2JsonRedisSerializer.java:220) ~[spring-data-redis-3.1.4.jar:3.1.4]\n    at org.springframework.data.redis.core.AbstractOperations.rawValue(AbstractOperations.java:128) ~[spring-data-redis-3.1.4.jar:3.1.4]\n    at org.springframework.data.redis.core.DefaultValueOperations.set(DefaultValueOperations.java:236) ~[spring-data-redis-3.1.4.jar:3.1.4]\n    at com.example.demo.MyController.saveObject(MyController.java:24) ~[main/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:564) ~[tomcat-embed-core-10.1.13.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.12.jar:6.0.12]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.13.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.12.jar:6.0.12]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:341) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:894) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1740) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.13.jar:10.1.13]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<h2>Solution approach #1</h2>\n<p>My first attempt was to follow the advice given in the exception message: &quot;<em>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Java 8 date/time type <code>java.time.Instant</code> not supported by default: <strong>add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling</strong> (through reference chain: com.example.demo.MyObject[&quot;timestamp&quot;])</em>&quot;</p>\n<p>So I added the following line to my <code>build.gradle.kts</code> file:</p>\n<pre><code>implementation(&quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot;)\n</code></pre>\n<p>...and hit the Gradle reload button / press <em>Ctrl + Shift + O</em> in IntelliJ</p>\n<p><strong>Result: the same exception as above.</strong></p>\n<h2>Solution approach #2</h2>\n<p>Keeping the newly added dependency in there for good measure, I attempted several other solution approaches suggested here on Stack Overflow.</p>\n<h3>Add a bean for the <code>ObjectMapper</code> singleton in my configuration</h3>\n<p>Source: <a href=\"https://stackoverflow.com/questions/67874510/spring-boot-2-5-0-and-invaliddefinitionexception-java-8-date-time-type-java-ti\">Spring Boot 2.5.0 and InvalidDefinitionException: Java 8 date/time type <code>java.time.Instant</code> not supported by default</a></p>\n<pre><code>    @Bean\n    public ObjectMapper objectMapper() {\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.registerModule(new JavaTimeModule());\n        return objectMapper;\n    }\n</code></pre>\n<p><strong>Result: same exception as above.</strong></p>\n<h2>Solution approach #3</h2>\n<h3>Another variant for an <code>ObjectMapper</code> singleton</h3>\n<p>Source: <a href=\"https://stackoverflow.com/questions/69811740/how-do-i-enable-the-jsr310-support-for-localdate-using-jackson\">How do I enable the JSR310 support for LocalDate using Jackson?</a></p>\n<pre><code>    @Bean\n    public ObjectMapper objectMapper() {\n        return JsonMapper.builder()\n                         .addModule(new JavaTimeModule())\n                         .build();\n    }\n</code></pre>\n<p><strong>Result: same exception as above.</strong></p>\n<h2>Solution approach #4</h2>\n<h3>Specify bean for <code>Jackson2ObjectMapperBuilder</code></h3>\n<p>Source: ChatGPT's suggestion <a href=\"https://i.stack.imgur.com/PInvG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PInvG.png\" alt=\"Configuring ObjectMapper\" /></a></p>\n<pre><code>    @Bean\n    public Jackson2ObjectMapperBuilder jackson2ObjectMapperBuilder() {\n        return new Jackson2ObjectMapperBuilder().modules(new JavaTimeModule());\n    }\n</code></pre>\n<p><strong>Result: same exception as above.</strong></p>\n<hr />\n<h1>Help?</h1>\n<p>I tried many other things, spending quite some time on this problem, but nothing would work. Can it really be that hard to serialize Instant's with Spring/Redis? What am I missing? Can someone help?</p>\n<p>Thank you so much in advance!</p>\n"},{"tags":["java","postman","restful-url"],"comments":[{"owner":{"account_id":106364,"reputation":159996,"user_id":283366,"accept_rate":100,"display_name":"Phil"},"score":8,"creation_date":1596595066,"post_id":63257605,"comment_id":111858917,"body_markdown":"You&#39;ve put `{document}` as part of the path, not a query parameter. Try `POST /v1/e/E_PC`","body":"You&#39;ve put <code>{document}</code> as part of the path, not a query parameter. Try <code>POST &#47;v1&#47;e&#47;E_PC</code>"},{"owner":{"account_id":1223835,"reputation":75878,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1596597371,"post_id":63257605,"comment_id":111859356,"body_markdown":"A `create` POST operation normally doesn&#39;t have an additional path-component; it&#39;s just `POST /documents` with the appropriate contents. (You should also let Spring do the useful work for you and use `@RequestBody Document document` instead of passing a bare string.)","body":"A <code>create</code> POST operation normally doesn&#39;t have an additional path-component; it&#39;s just <code>POST &#47;documents</code> with the appropriate contents. (You should also let Spring do the useful work for you and use <code>@RequestBody Document document</code> instead of passing a bare string.)"},{"owner":{"account_id":14540731,"reputation":43,"user_id":10502544,"display_name":"Athe"},"score":0,"creation_date":1596613184,"post_id":63257605,"comment_id":111863992,"body_markdown":"@Phil thanks that seems to work, just to confirm I am getting this error :Request processing failed; nested exception is java.lang.Exception: java.lang.RuntimeException: error while fopping.. that means I have reached the method, just now the error is occuring in the method?","body":"@Phil thanks that seems to work, just to confirm I am getting this error :Request processing failed; nested exception is java.lang.Exception: java.lang.RuntimeException: error while fopping.. that means I have reached the method, just now the error is occuring in the method?"}],"answers":[{"tags":[],"owner":{"account_id":12509045,"reputation":661,"user_id":9104942,"display_name":"Abdusoli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596597010,"creation_date":1596597010,"answer_id":63257863,"question_id":63257605,"body_markdown":"You can also use like below:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/v1/e&quot;)\r\npublic class EC {\r\n\r\n  @PostMapping\r\n  public ResponseEntity&lt;?&gt; createDocument(@RequestParam(&quot;document&quot;) String document){\r\n      //code\r\n  }\r\n\r\n}\r\n\r\n```\r\n\r\nAnd your ```POST REQUEST``` is ```http://localhost:8080/v1/e?document=E_PC```","title":"Postman :&quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;, &quot;message&quot;: &quot;Not Found&quot; in Java","body":"<p>You can also use like below:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/v1/e&quot;)\npublic class EC {\n\n  @PostMapping\n  public ResponseEntity&lt;?&gt; createDocument(@RequestParam(&quot;document&quot;) String document){\n      //code\n  }\n\n}\n\n</code></pre>\n<p>And your <code>POST REQUEST</code> is <code>http://localhost:8080/v1/e?document=E_PC</code></p>\n"},{"comments":[{"owner":{"account_id":19501442,"reputation":2332,"user_id":14267427,"display_name":"Tyler2P"},"score":0,"creation_date":1680114823,"post_id":75874356,"comment_id":133844350,"body_markdown":"Your answer could be improved by adding more information on what the code does and how it helps the OP.","body":"Your answer could be improved by adding more information on what the code does and how it helps the OP."}],"tags":[],"owner":{"account_id":27944401,"reputation":1,"user_id":21339692,"display_name":"Mohamed Hamras"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1680114815,"creation_date":1680075088,"answer_id":75874356,"question_id":63257605,"body_markdown":"This would work fine:\r\n\r\n    @RestController()\r\n    @RequestMapping(&quot;/v1/e/{document}&quot;)\r\n    public class EC {\r\n        @PostMapping\r\n        public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data) {\r\n            //code\r\n        }","title":"Postman :&quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;, &quot;message&quot;: &quot;Not Found&quot; in Java","body":"<p>This would work fine:</p>\n<pre><code>@RestController()\n@RequestMapping(&quot;/v1/e/{document}&quot;)\npublic class EC {\n    @PostMapping\n    public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data) {\n        //code\n    }\n</code></pre>\n"}],"owner":{"account_id":14540731,"reputation":43,"user_id":10502544,"display_name":"Athe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":12606,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1695751445,"creation_date":1596594785,"question_id":63257605,"body_markdown":"I have a Java program that uses Postman. I am trying to make a post request on Postman. My code:\r\n``` java\r\n@RestController()\r\n@RequestMapping(&quot;/v1/e&quot;)\r\npublic class EC {\r\n    @PostMapping(path = &quot;{document}&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\r\n    public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data){\r\n        //code\r\n    }\r\n```\r\n\r\nBelow is the URL I am using to post:\r\n\r\nhttp://localhost:8080/v1/e?document=E_PC\r\n\r\nHowever, I am getting the following error:\r\n```JSON\r\n{\r\n    &quot;timestamp&quot;: &quot;2020-08-05T02:22:03.008+0000&quot;,\r\n    &quot;status&quot;: 404,\r\n    &quot;error&quot;: &quot;Not Found&quot;,\r\n    &quot;message&quot;: &quot;Not Found&quot;,\r\n    &quot;path&quot;: &quot;/v1/e&quot;\r\n}\r\n```\r\n","title":"Postman :&quot;status&quot;: 404, &quot;error&quot;: &quot;Not Found&quot;, &quot;message&quot;: &quot;Not Found&quot; in Java","body":"<p>I have a Java program that uses Postman. I am trying to make a post request on Postman. My code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController()\n@RequestMapping(&quot;/v1/e&quot;)\npublic class EC {\n    @PostMapping(path = &quot;{document}&quot;, consumes = &quot;application/json&quot;, produces = &quot;application/json&quot;)\n    public ResponseEntity&lt;InputStreamResource&gt; createDocument(@PathVariable Dtype document,@RequestBody String data){\n        //code\n    }\n</code></pre>\n<p>Below is the URL I am using to post:</p>\n<p>http://localhost:8080/v1/e?document=E_PC</p>\n<p>However, I am getting the following error:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2020-08-05T02:22:03.008+0000&quot;,\n    &quot;status&quot;: 404,\n    &quot;error&quot;: &quot;Not Found&quot;,\n    &quot;message&quot;: &quot;Not Found&quot;,\n    &quot;path&quot;: &quot;/v1/e&quot;\n}\n</code></pre>\n"},{"tags":["java","jaxb","xjc","jakarta-migration"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1695225587,"post_id":77144131,"comment_id":135996977,"body_markdown":"&quot;we have a gradle script that uses xjc and is failing&quot; is not detailed enough so that anyonw knows whats going on.","body":"&quot;we have a gradle script that uses xjc and is failing&quot; is not detailed enough so that anyonw knows whats going on."},{"owner":{"account_id":1002576,"reputation":7185,"user_id":1017111,"accept_rate":94,"display_name":"WowBow"},"score":0,"creation_date":1695227745,"post_id":77144131,"comment_id":135997418,"body_markdown":"i added the code. Please re open.","body":"i added the code. Please re open."},{"owner":{"account_id":1002576,"reputation":7185,"user_id":1017111,"accept_rate":94,"display_name":"WowBow"},"score":0,"creation_date":1695231494,"post_id":77144131,"comment_id":135998136,"body_markdown":"@BalusC Can you please re open the question ?","body":"@BalusC Can you please re open the question ?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695375118,"post_id":77144131,"comment_id":136018971,"body_markdown":"Please provide a [mre], which includes the relevant Gradle plugins and dependencies.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, which includes the relevant Gradle plugins and dependencies."}],"answers":[{"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":0,"creation_date":1695226195,"post_id":77144195,"comment_id":135997106,"body_markdown":"Does that version of xjc generate source code with the jakarta classes?","body":"Does that version of xjc generate source code with the jakarta classes?"},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695375089,"post_id":77144195,"comment_id":136018963,"body_markdown":"Those are the wrong versions if the OP migrated to the jakarta versions.","body":"Those are the wrong versions if the OP migrated to the jakarta versions."}],"tags":[],"owner":{"account_id":1096470,"reputation":26066,"user_id":1089967,"accept_rate":59,"display_name":"lance-java"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1695225814,"creation_date":1695225814,"answer_id":77144195,"question_id":77144131,"body_markdown":"You&#39;ll need to add the following dependencies which used to be included in the standard JRE but are now third party jars\r\n\r\n```xml\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;jaxb-xjc&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.3.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n\t&lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\r\n\t&lt;version&gt;2.3.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```","title":"XJC throws java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException after migrating JAXB from javax to jakarta","body":"<p>You'll need to add the following dependencies which used to be included in the standard JRE but are now third party jars</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-xjc&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;com.sun.xml.bind&lt;/groupId&gt;\n    &lt;artifactId&gt;jaxb-impl&lt;/artifactId&gt;\n    &lt;version&gt;2.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":1002576,"reputation":7185,"user_id":1017111,"accept_rate":94,"display_name":"WowBow"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":95,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695750949,"creation_date":1695225154,"question_id":77144131,"body_markdown":"What I&#39;m trying to achieve\r\n\r\n - Move Spring application (not Spring boot) from Java 8 to 17 and Tomcat 8 to 10.\r\n\r\nIssues\r\n\r\n - After following this [question][1] I have replaced javax libraries(mostly for xml binding) with jakarta but we have a gradle script that uses **xjc** and is failing with the following exception and couldn&#39;t find how to fix it.\r\n \r\n\r\n \r\n\r\n    java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException\r\n\r\n```\r\nxjc(removeOldOutput:&quot;yes&quot;, target: sourcesDir, binding: ${&quot;schema&quot;}/processPaymentBindings.jaxb{ \r\n     schema(dir: schema, includes:&quot;provider/gpos/processPayment/*.xsd)\r\n    arg(value: &quot;-Xdefault-value&quot;\r\n    arg(value: &quot;-extension&quot;)\r\n    produces(dir: sourcesDir, includes: &quot;**/*.java Do&quot;)\r\n}\r\n```\r\n\r\nWe use the following JAXB dependencies for tasks on Gradle for your reference: \r\n\r\n - jaxb: jakarta activation\r\n - jaxb: xmlbind\r\n - jaxb: impl\r\n - jaxb1: impl\r\n - jaxb: xjc\r\n - jaxb2: common\r\n\r\n  [1]: https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception\r\n","title":"XJC throws java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException after migrating JAXB from javax to jakarta","body":"<p>What I'm trying to achieve</p>\n<ul>\n<li>Move Spring application (not Spring boot) from Java 8 to 17 and Tomcat 8 to 10.</li>\n</ul>\n<p>Issues</p>\n<ul>\n<li><p>After following this <a href=\"https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception\">question</a> I have replaced javax libraries(mostly for xml binding) with jakarta but we have a gradle script that uses <strong>xjc</strong> and is failing with the following exception and couldn't find how to fix it.</p>\n<p>java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException</p>\n</li>\n</ul>\n<pre><code>xjc(removeOldOutput:&quot;yes&quot;, target: sourcesDir, binding: ${&quot;schema&quot;}/processPaymentBindings.jaxb{ \n     schema(dir: schema, includes:&quot;provider/gpos/processPayment/*.xsd)\n    arg(value: &quot;-Xdefault-value&quot;\n    arg(value: &quot;-extension&quot;)\n    produces(dir: sourcesDir, includes: &quot;**/*.java Do&quot;)\n}\n</code></pre>\n<p>We use the following JAXB dependencies for tasks on Gradle for your reference:</p>\n<ul>\n<li>jaxb: jakarta activation</li>\n<li>jaxb: xmlbind</li>\n<li>jaxb: impl</li>\n<li>jaxb1: impl</li>\n<li>jaxb: xjc</li>\n<li>jaxb2: common</li>\n</ul>\n"},{"tags":["java","windows-10","jpackage"],"comments":[{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695685627,"post_id":77176003,"comment_id":136054650,"body_markdown":"How are you replacing the classpath?  Have you tried launching the program on the command line?  Side note:  Linux files should be in $HOME/.local/share/app.  (Or more formally, $XDG_DATA_HOME/app, and if XDG_DATA_HOME is undefined or its value is not an absolute path, fall back to using $HOME/.local/share/app.)","body":"How are you replacing the classpath?  Have you tried launching the program on the command line?  Side note:  Linux files should be in $HOME/.local/share/app.  (Or more formally, $XDG_DATA_HOME/app, and if XDG_DATA_HOME is undefined or its value is not an absolute path, fall back to using $HOME/.local/share/app.)"},{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695686253,"post_id":77176003,"comment_id":136054707,"body_markdown":"@VGR package-installed applications have an Application.cfg file that&#39;s in the installation directory.  That file has a listing of all the jar files that constitute the application - e.g.: under the [Application] section, you&#39;d see lines like:\n&quot;app.classpath=$APPDIR/app.jar&quot; and the jpackage provided launcher substitutes the variable $APPDIR with the actual installation directory.  When I make a local copy of the cfg file, I modify this line to point to the updated app.jar that the application downloaded.","body":"@VGR package-installed applications have an Application.cfg file that&#39;s in the installation directory.  That file has a listing of all the jar files that constitute the application - e.g.: under the [Application] section, you&#39;d see lines like: &quot;app.classpath=$APPDIR/app.jar&quot; and the jpackage provided launcher substitutes the variable $APPDIR with the actual installation directory.  When I make a local copy of the cfg file, I modify this line to point to the updated app.jar that the application downloaded."},{"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"score":0,"creation_date":1695686629,"post_id":77176003,"comment_id":136054739,"body_markdown":"So youre overwriting a file in the installation tree?  I suspect the application may not have permission to do that.","body":"So youre overwriting a file in the installation tree?  I suspect the application may not have permission to do that."},{"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"score":0,"creation_date":1695687561,"post_id":77176003,"comment_id":136054809,"body_markdown":"@VGR - no, I&#39;m not overwriting a file in the installation tree.  Starting with JDK 19, you&#39;re allowed to have a local copy of the file and the jpackage launcher will look there to see if there&#39;s one to override the default installation-tree based cfg file.\n\nBut I think you may have solved the problem for me anyway - why didn&#39;t I think of trying it on the command-line as you suggest???  I get a NullPointerException in my app code when I do it from the command-line!  Still not sure why I get a &quot;Failed to launch JVM&quot;.  I will check if fixing the app bug solves the above. THANKS either way!","body":"@VGR - no, I&#39;m not overwriting a file in the installation tree.  Starting with JDK 19, you&#39;re allowed to have a local copy of the file and the jpackage launcher will look there to see if there&#39;s one to override the default installation-tree based cfg file.  But I think you may have solved the problem for me anyway - why didn&#39;t I think of trying it on the command-line as you suggest???  I get a NullPointerException in my app code when I do it from the command-line!  Still not sure why I get a &quot;Failed to launch JVM&quot;.  I will check if fixing the app bug solves the above. THANKS either way!"}],"answers":[{"tags":[],"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695750916,"creation_date":1695750916,"answer_id":77182393,"question_id":77176003,"body_markdown":"The answer to the question is &quot;no&quot;.  It turns out (thanks to @VGR for suggesting I run the app from the command-line), that my application, in its main() function caught a NullPointerException and in its catch block wrote a log message and then did a System.exit(-1) to indicate the application ended abnormally.\r\n\r\nThe message the application wrapper put up &quot;Failed to launch JVM&quot; is simply wrong and misleading.: it DID NOT fail to launch the JVM - the JVM got launched and my application ran, and simply exited with a -1 exit code.  I will try to create a simple use case and file a bug report with OpenJDK.\r\n\r\nSorry for kind of wasting people&#39;s time.","title":"Do jpackage created apps have more security constraints on Windows?","body":"<p>The answer to the question is &quot;no&quot;.  It turns out (thanks to @VGR for suggesting I run the app from the command-line), that my application, in its main() function caught a NullPointerException and in its catch block wrote a log message and then did a System.exit(-1) to indicate the application ended abnormally.</p>\n<p>The message the application wrapper put up &quot;Failed to launch JVM&quot; is simply wrong and misleading.: it DID NOT fail to launch the JVM - the JVM got launched and my application ran, and simply exited with a -1 exit code.  I will try to create a simple use case and file a bug report with OpenJDK.</p>\n<p>Sorry for kind of wasting people's time.</p>\n"}],"owner":{"account_id":1620076,"reputation":135,"user_id":1496859,"display_name":"wolfman"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695750916,"creation_date":1695680494,"question_id":77176003,"body_markdown":"I have a jpackage-created application (OpenJDK 20.0.2) I deliver to macOS, Linux, and Windows.  It works on all 3.  I added an &#39;update&#39; feature, whereby the application checks a server for an updated main jar (e.g. app.jar) and, if one exists, downloads it into a user directory (e.g. $HOME/app/updates/app.jar) and makes a copy of the app&#39;s installer App.cfg file, replacing the classpath for the app.jar with where the new one is located, and puts the updated cfg file into the appropriate place for the platform.  E.g. on Linux it puts the cfg file into $HOME/.app/, on macOS, it puts it in $HOME/Library/Application Support/app/, and on Windows 10, it puts it into $HOME/AppData/roaming/app/.\r\n\r\nOn macOS and on Linux, everything works as expected - ie the application downloads a new jar and, the next time the application is started, it uses that new jar.  But on Windows, all I get is a small dialog that says &quot;Failed to launch JVM&quot;.  If I copy the original app.jar (the one put in C:\\Program Files\\App\\app\\ to the directory where the updated app.jar was downloaded, the application starts again.  If I do the reverse (putting my update app.jar into the installation directory), I see the &quot;Failed to launch JVM&quot; dialog.  The only guess I have is that in Windows, there is some sort of fingerprinting of the jars that prevents changed ones from executing?\r\n\r\nIs that, indeed, the case?  If not, is there a way to debug this situation?  I.e. is there some additional config info or environment variable I can provide to see more detailed information on why the application failed to launch the JVM?\r\n\r\nAny help appreciated.\r\n\r\nP.S.  Note: the ability to create a local CFG file wasn&#39;t added until JDK 19.  See [this issue][1] for details.\r\n\r\n\r\n  [1]: https://bugs.openjdk.org/browse/JDK-8250950","title":"Do jpackage created apps have more security constraints on Windows?","body":"<p>I have a jpackage-created application (OpenJDK 20.0.2) I deliver to macOS, Linux, and Windows.  It works on all 3.  I added an 'update' feature, whereby the application checks a server for an updated main jar (e.g. app.jar) and, if one exists, downloads it into a user directory (e.g. $HOME/app/updates/app.jar) and makes a copy of the app's installer App.cfg file, replacing the classpath for the app.jar with where the new one is located, and puts the updated cfg file into the appropriate place for the platform.  E.g. on Linux it puts the cfg file into $HOME/.app/, on macOS, it puts it in $HOME/Library/Application Support/app/, and on Windows 10, it puts it into $HOME/AppData/roaming/app/.</p>\n<p>On macOS and on Linux, everything works as expected - ie the application downloads a new jar and, the next time the application is started, it uses that new jar.  But on Windows, all I get is a small dialog that says &quot;Failed to launch JVM&quot;.  If I copy the original app.jar (the one put in C:\\Program Files\\App\\app\\ to the directory where the updated app.jar was downloaded, the application starts again.  If I do the reverse (putting my update app.jar into the installation directory), I see the &quot;Failed to launch JVM&quot; dialog.  The only guess I have is that in Windows, there is some sort of fingerprinting of the jars that prevents changed ones from executing?</p>\n<p>Is that, indeed, the case?  If not, is there a way to debug this situation?  I.e. is there some additional config info or environment variable I can provide to see more detailed information on why the application failed to launch the JVM?</p>\n<p>Any help appreciated.</p>\n<p>P.S.  Note: the ability to create a local CFG file wasn't added until JDK 19.  See <a href=\"https://bugs.openjdk.org/browse/JDK-8250950\" rel=\"nofollow noreferrer\">this issue</a> for details.</p>\n"},{"tags":["java","eclipse","wildfly"],"comments":[{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":2,"creation_date":1695750646,"post_id":77182339,"comment_id":136065323,"body_markdown":"Narrow it down and focus on the details. What exactly doesn&#39;t work that should? Pick one scenario and start from there. The only response to what you&#39;ve supplied so far is likely to be to recreate the web app from scratch so that the libraries *aren&#39;t* mistakenly configured.","body":"Narrow it down and focus on the details. What exactly doesn&#39;t work that should? Pick one scenario and start from there. The only response to what you&#39;ve supplied so far is likely to be to recreate the web app from scratch so that the libraries <i>aren&#39;t</i> mistakenly configured."},{"owner":{"account_id":29430081,"reputation":1,"user_id":22549959,"display_name":"Christian"},"score":0,"creation_date":1695821523,"post_id":77182339,"comment_id":136075321,"body_markdown":"I have already recreated the application, but it still doesn&#39;t start. I don&#39;t understand the error messages that Wildfly is returning to me: org.jboss.as.protocol] (management I/O-1) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 1,5,management-handler-thread]","body":"I have already recreated the application, but it still doesn&#39;t start. I don&#39;t understand the error messages that Wildfly is returning to me: org.jboss.as.protocol] (management I/O-1) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 1,5,management-handler-thread]"},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1695823151,"post_id":77182339,"comment_id":136075703,"body_markdown":"You have, again, not added included details about the 404 error. What the URL was. Why it *should* have worked. Log lines with actual ERROR severity.","body":"You have, again, not added included details about the 404 error. What the URL was. Why it <i>should</i> have worked. Log lines with actual ERROR severity."}],"owner":{"account_id":29430081,"reputation":1,"user_id":22549959,"display_name":"Christian"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695750865,"creation_date":1695750401,"question_id":77182339,"body_markdown":"I am creating a web app for a course, I have inserted the data from Eclipse into MySQL, but when I try to insert them via URL through a servlet, it returns error 404. I&#39;m using Eclipse. I might have made a mistake in configuring the various libraries. Help meeee! I&#39;ve tried everything, but the server doesn&#39;t work in any way. The server not work.  This is my code:\r\n\r\n```\r\npackage ctr;\r\n\r\nimport java.io.IOException;\r\nimport java.sql.SQLException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport jakarta.servlet.RequestDispatcher;\r\nimport jakarta.servlet.ServletException;\r\nimport jakarta.servlet.annotation.WebServlet;\r\nimport jakarta.servlet.http.HttpServlet;\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport jakarta.servlet.http.HttpServletResponse;\r\n\r\nimport model.Impiegato;\r\nimport dao.ImpiegatoDaoImpl;\r\n\r\n/**\r\n * Servlet implementation class ImpiegatoSrv\r\n */\r\n//@WebServlet(&quot;/ImpiegatoSrv&quot;)\r\npublic class ImpiegatoSrv extends jakarta.servlet.http.HttpServlet {\r\n\tprivate static final long serialVersionUID = 1L;\r\n       \r\n    /**\r\n     * @see HttpServlet#HttpServlet()\r\n     */\r\n    public ImpiegatoSrv() {\r\n        super();\r\n        // TODO Auto-generated constructor stub\r\n    }\r\n\r\n\t/**\r\n\t * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\r\n\t */\r\n\tprotected void doGet(HttpServletRequest request, HttpServletResponse response) \r\n\t\t\tthrows ServletException, IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\t\t\t\r\n\t\tSystem.out.println(&quot;Sono dentro&quot;);\r\n\t\t\r\n\t\tString operazione = request.getParameter(&quot;operazione&quot;);\t\t\r\n\t\tImpiegatoDaoImpl id = new ImpiegatoDaoImpl();\r\n\r\n        \t\r\n\t\tif (operazione.equals(&quot;inserimento&quot;)) {\r\n\r\n\r\n\t\t\tString nome = request.getParameter(&quot;nome&quot;);\r\n\t\t\tString cognome = request.getParameter(&quot;cognome&quot;);\r\n\t\t\tString codiceFiscale = request.getParameter(&quot;codiceFiscale&quot;);\r\n\t\t\tint matricola = Integer.parseInt(&quot;matricola&quot;);\r\n\t\t\t//int quantita = Integer.parseInt(quant);\r\n\r\n\t\t\tImpiegato i = new Impiegato();\r\n\t\t\ti.setNome(nome);\r\n\t\t\ti.setCognome(cognome);\r\n\t\t\ti.setCodiceFiscale(codiceFiscale);\r\n\t\t\ti.setMatricola(matricola);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tid.inserisci(nome, cognome, codiceFiscale, matricola);\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\r\n\t\tif (operazione.equals(&quot;elimina&quot;)) {\r\n\r\n\r\n\t\t\tString nome = request.getParameter(&quot;nome&quot;);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tid.delete(nome);\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\t\t\t\r\n\t\t\t\t}\r\n\t\t\r\n\t\tif (operazione.equals(&quot;aggiorna&quot;)) {\r\n\r\n\r\n\t\t\tString nome = request.getParameter(&quot;nome&quot;);\r\n\t\t\tString cognome = request.getParameter(&quot;cognome&quot;);\r\n\t\t\tString codiceFiscale = request.getParameter(&quot;codiceFiscale&quot;);\r\n\t\t\tint matricola = Integer.parseInt(&quot;matricola&quot;);\r\n\t\t\t//int quantita = Integer.parseInt(quant);\r\n\r\n\t\t\tImpiegato i = new Impiegato();\r\n\t\t\ti.setNome(nome);\r\n\t\t\ti.setCognome(cognome);\r\n\t\t\ti.setCodiceFiscale(codiceFiscale);\r\n\t\t\ti.setMatricola(matricola);\r\n\r\n\t\t\ttry {\r\n\t\t\t\tid.update(nome, cognome, codiceFiscale, matricola);\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\t// TODO Auto-generated catch block\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\t\t\t\r\n\t/*\tif (operazione.equals(&quot;findAll&quot;)) {\r\n\r\n\t\t\tList&lt;Impiegato&gt; listaImpiegati = iDao.getAll();\r\n\r\n\t\t\trequest.getSession().setAttribute(&quot;elencoImpiegati&quot;, listaImpiegati)\r\n\t\t\tString nome = request.getParameter(&quot;nome&quot;);\r\n\r\n\t\t\tid.getByCode(nome);\r\n\r\n\t\t\t}else\r\n\t\t\tresponse.getWriter().append(&quot;Served at: &quot;).append(request.getContextPath());\r\n\r\n\t}*/\r\n\t\t\r\n\t\t\r\n\r\n\t/**\r\n\t * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\r\n\t */\r\n\r\n\tprotected void doPost(HttpServletRequest request, HttpServletResponse response) \r\n\t\t\tthrows ServletException, IOException {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tdoGet(request, response);\r\n\t}\r\n```\r\n\r\nthis is answer of wildfly:\r\n```\r\n18:54:48,034 INFO  [org.jboss.modules] (main) JBoss Modules version 2.1.0.Final\r\n18:54:48,852 INFO  [org.jboss.msc] (main) JBoss MSC version 1.5.0.Final\r\n18:54:48,861 INFO  [org.jboss.threads] (main) JBoss Threads version 2.4.0.Final\r\n18:54:49,079 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Full 28.0.0.Final (WildFly Core 20.0.1.Final) starting\r\n18:54:50,746 INFO  [org.wildfly.security] (ServerService Thread Pool -- 28) ELY00001: WildFly Elytron version 2.1.0.Final\r\n18:54:51,664 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 3) WFLYCTL0028: Attribute &#39;cluster&#39; in the resource at address &#39;/subsystem=ejb3/service=remote&#39; is deprecated, and may be removed in a future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.\r\n18:54:51,747 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0004: Found Gestionale1.war in deployment directory. To trigger deployment create a file called Gestionale1.war.dodeploy\r\n18:54:51,929 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)\r\n18:54:51,954 INFO  [org.xnio] (MSC service thread 1-5) XNIO version 3.8.9.Final\r\n18:54:51,965 INFO  [org.xnio.nio] (MSC service thread 1-5) XNIO NIO Implementation Version 3.8.9.Final\r\n18:54:52,046 INFO  [org.jboss.as.jaxrs] (ServerService Thread Pool -- 57) WFLYRS0016: RESTEasy version 6.2.3.Final\r\n18:54:52,057 INFO  [org.wildfly.extension.health] (ServerService Thread Pool -- 54) WFLYHEALTH0001: Activating Base Health Subsystem\r\n18:54:52,058 INFO  [org.wildfly.extension.elytron.oidc._private] (ServerService Thread Pool -- 53) WFLYOIDC0001: Activating WildFly Elytron OIDC Subsystem\r\n18:54:52,061 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 55) WFLYCLINF0001: Activating Infinispan subsystem.\r\n18:54:52,081 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 44) WFLYJCA0004: Deploying JDBC-compliant driver class org.h2.Driver (version 2.1)\r\n18:54:52,102 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 74) WFLYTX0013: The node-identifier attribute on the /subsystem=transactions is set to the default value. This is a danger for environments running multiple servers. Please make sure the attribute value is unique.\r\n18:54:52,131 INFO  [org.wildfly.extension.microprofile.jwt.smallrye] (ServerService Thread Pool -- 66) WFLYJWT0001: Activating MicroProfile JWT Subsystem\r\n18:54:52,142 INFO  [org.wildfly.extension.microprofile.config.smallrye] (ServerService Thread Pool -- 65) WFLYCONF0001: Activating MicroProfile Config Subsystem\r\n18:54:52,159 INFO  [org.jboss.as.jsf] (ServerService Thread Pool -- 62) WFLYJSF0007: Activated the following Jakarta Server Faces Implementations: [main]\r\n18:54:52,179 INFO  [org.wildfly.extension.metrics] (ServerService Thread Pool -- 64) WFLYMETRICS0001: Activating Base Metrics Subsystem\r\n18:54:52,193 INFO  [org.jboss.as.connector] (MSC service thread 1-7) WFLYJCA0009: Starting Jakarta Connectors Subsystem (WildFly/IronJacamar 3.0.2.Final)\r\n18:54:52,201 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 67) WFLYNAM0001: Activating Naming Subsystem\r\n18:54:52,221 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 76) WFLYWS0002: Activating WebServices Extension\r\n18:54:52,249 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0027: Starting deployment of &quot;Gestionale1.war&quot; (runtime-name: &quot;Gestionale1.war&quot;)\r\n18:54:52,300 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0003: Undertow 2.3.5.Final starting\r\n18:54:52,303 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) WFLYJCA0018: Started Driver service with driver-name = h2\r\n18:54:52,368 INFO  [org.jboss.as.naming] (MSC service thread 1-7) WFLYNAM0003: Starting Naming Service\r\n18:54:52,412 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-4) WFLYELY00023: KeyStore file &#39;C:\\Users\\Utente\\wildfly-28.0.0.Final\\standalone\\configuration\\application.keystore&#39; does not exist. Used blank.\r\n18:54:52,478 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-6) WFLYELY01084: KeyStore C:\\Users\\Utente\\wildfly-28.0.0.Final\\standalone\\configuration\\application.keystore not found, it will be auto-generated on first use with a self-signed certificate for host localhost\r\n18:54:52,553 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 75) WFLYUT0014: Creating file handler for path &#39;C:\\Users\\Utente\\wildfly-28.0.0.Final/welcome-content&#39; with options [directory-listing: &#39;false&#39;, follow-symlink: &#39;false&#39;, case-sensitive: &#39;true&#39;, safe-symlink-paths: &#39;[]&#39;]\r\n18:54:53,300 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-3) WFLYMAIL0001: Bound mail session [java:jboss/mail/Default]\r\n18:54:53,348 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 56) WFLYIO001: Worker &#39;default&#39; has auto-configured to 8 IO threads with 64 max task threads based on your 4 available processors\r\n18:54:53,363 INFO  [org.jboss.as.ejb3] (MSC service thread 1-3) WFLYEJB0481: Strict pool slsb-strict-max-pool is using a max instance size of 64 (per class), which is derived from thread worker pool sizing.\r\n18:54:53,363 INFO  [org.jboss.as.ejb3] (MSC service thread 1-7) WFLYEJB0482: Strict pool mdb-strict-max-pool is using a max instance size of 16 (per class), which is derived from the number of CPUs on this host.\r\n18:54:53,415 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly Full cumulative patch ID is: base, one-off patches include: none\r\n18:54:53,435 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-6) WFLYDS0013: Started FileSystemDeploymentService for directory C:\\Users\\Utente\\wildfly-28.0.0.Final\\standalone\\deployments\r\n18:54:53,455 INFO  [org.jboss.remoting] (MSC service thread 1-4) JBoss Remoting version 5.0.27.Final\r\n18:54:53,510 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0012: Started server default-server.\r\n18:54:53,514 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) Queuing requests.\r\n18:54:53,520 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0018: Host default-host starting\r\n18:54:53,582 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0006: Undertow HTTP listener default listening on 127.0.0.1:8080\r\n18:54:53,584 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443\r\n18:54:53,650 INFO  [org.jboss.as.ejb3] (MSC service thread 1-4) WFLYEJB0493: Jakarta Enterprise Beans subsystem suspension complete\r\n18:54:53,777 INFO  [org.jboss.ws.common.management] (MSC service thread 1-8) JBWS022052: Starting JBossWS 6.2.0.Final (Apache CXF 4.0.0) \r\n18:54:53,793 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]\r\n18:54:54,576 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 79) WFLYUT0021: Registered web context: &#39;/Gestionale1&#39; for server &#39;default-server&#39;\r\n18:54:54,673 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 45) WFLYSRV0010: Deployed &quot;Gestionale1.war&quot; (runtime-name : &quot;Gestionale1.war&quot;)\r\n18:54:54,743 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0212: Resuming server\r\n18:54:54,753 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management\r\n18:54:54,755 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990\r\n18:54:54,760 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 28.0.0.Final (WildFly Core 20.0.1.Final) started in 7452ms - Started 365 of 587 services (321 services are lazy, passive or on-demand) - Server configuration file in use: standalone.xml\r\n18:54:55,177 INFO  [org.jboss.as.protocol] (management I/O-1) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 1,5,management-handler-thread]\r\n18:54:55,189 INFO  [org.jboss.as.protocol] (management I/O-2) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 2,5,management-handler-thread]\r\n18:54:55,246 INFO  [org.jboss.as.protocol] (management I/O-2) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 2,5,management-handler-thread]\r\n ```","title":"Problem with Wildfly and Eclipse and library?","body":"<p>I am creating a web app for a course, I have inserted the data from Eclipse into MySQL, but when I try to insert them via URL through a servlet, it returns error 404. I'm using Eclipse. I might have made a mistake in configuring the various libraries. Help meeee! I've tried everything, but the server doesn't work in any way. The server not work.  This is my code:</p>\n<pre><code>package ctr;\n\nimport java.io.IOException;\nimport java.sql.SQLException;\nimport java.util.ArrayList;\nimport java.util.List;\n\nimport jakarta.servlet.RequestDispatcher;\nimport jakarta.servlet.ServletException;\nimport jakarta.servlet.annotation.WebServlet;\nimport jakarta.servlet.http.HttpServlet;\nimport jakarta.servlet.http.HttpServletRequest;\nimport jakarta.servlet.http.HttpServletResponse;\n\nimport model.Impiegato;\nimport dao.ImpiegatoDaoImpl;\n\n/**\n * Servlet implementation class ImpiegatoSrv\n */\n//@WebServlet(&quot;/ImpiegatoSrv&quot;)\npublic class ImpiegatoSrv extends jakarta.servlet.http.HttpServlet {\n    private static final long serialVersionUID = 1L;\n       \n    /**\n     * @see HttpServlet#HttpServlet()\n     */\n    public ImpiegatoSrv() {\n        super();\n        // TODO Auto-generated constructor stub\n    }\n\n    /**\n     * @see HttpServlet#doGet(HttpServletRequest request, HttpServletResponse response)\n     */\n    protected void doGet(HttpServletRequest request, HttpServletResponse response) \n            throws ServletException, IOException {\n        // TODO Auto-generated method stub\n                \n        System.out.println(&quot;Sono dentro&quot;);\n        \n        String operazione = request.getParameter(&quot;operazione&quot;);     \n        ImpiegatoDaoImpl id = new ImpiegatoDaoImpl();\n\n            \n        if (operazione.equals(&quot;inserimento&quot;)) {\n\n\n            String nome = request.getParameter(&quot;nome&quot;);\n            String cognome = request.getParameter(&quot;cognome&quot;);\n            String codiceFiscale = request.getParameter(&quot;codiceFiscale&quot;);\n            int matricola = Integer.parseInt(&quot;matricola&quot;);\n            //int quantita = Integer.parseInt(quant);\n\n            Impiegato i = new Impiegato();\n            i.setNome(nome);\n            i.setCognome(cognome);\n            i.setCodiceFiscale(codiceFiscale);\n            i.setMatricola(matricola);\n\n            try {\n                id.inserisci(nome, cognome, codiceFiscale, matricola);\n            } catch (SQLException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n\n    \n        if (operazione.equals(&quot;elimina&quot;)) {\n\n\n            String nome = request.getParameter(&quot;nome&quot;);\n\n            try {\n                id.delete(nome);\n            } catch (SQLException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }           \n                }\n        \n        if (operazione.equals(&quot;aggiorna&quot;)) {\n\n\n            String nome = request.getParameter(&quot;nome&quot;);\n            String cognome = request.getParameter(&quot;cognome&quot;);\n            String codiceFiscale = request.getParameter(&quot;codiceFiscale&quot;);\n            int matricola = Integer.parseInt(&quot;matricola&quot;);\n            //int quantita = Integer.parseInt(quant);\n\n            Impiegato i = new Impiegato();\n            i.setNome(nome);\n            i.setCognome(cognome);\n            i.setCodiceFiscale(codiceFiscale);\n            i.setMatricola(matricola);\n\n            try {\n                id.update(nome, cognome, codiceFiscale, matricola);\n            } catch (SQLException e) {\n                // TODO Auto-generated catch block\n                e.printStackTrace();\n            }\n        }\n    }\n                \n    /*  if (operazione.equals(&quot;findAll&quot;)) {\n\n            List&lt;Impiegato&gt; listaImpiegati = iDao.getAll();\n\n            request.getSession().setAttribute(&quot;elencoImpiegati&quot;, listaImpiegati)\n            String nome = request.getParameter(&quot;nome&quot;);\n\n            id.getByCode(nome);\n\n            }else\n            response.getWriter().append(&quot;Served at: &quot;).append(request.getContextPath());\n\n    }*/\n        \n        \n\n    /**\n     * @see HttpServlet#doPost(HttpServletRequest request, HttpServletResponse response)\n     */\n\n    protected void doPost(HttpServletRequest request, HttpServletResponse response) \n            throws ServletException, IOException {\n        // TODO Auto-generated method stub\n        doGet(request, response);\n    }\n</code></pre>\n<p>this is answer of wildfly:</p>\n<pre><code>18:54:48,034 INFO  [org.jboss.modules] (main) JBoss Modules version 2.1.0.Final\n18:54:48,852 INFO  [org.jboss.msc] (main) JBoss MSC version 1.5.0.Final\n18:54:48,861 INFO  [org.jboss.threads] (main) JBoss Threads version 2.4.0.Final\n18:54:49,079 INFO  [org.jboss.as] (MSC service thread 1-2) WFLYSRV0049: WildFly Full 28.0.0.Final (WildFly Core 20.0.1.Final) starting\n18:54:50,746 INFO  [org.wildfly.security] (ServerService Thread Pool -- 28) ELY00001: WildFly Elytron version 2.1.0.Final\n18:54:51,664 INFO  [org.jboss.as.controller.management-deprecated] (ServerService Thread Pool -- 3) WFLYCTL0028: Attribute 'cluster' in the resource at address '/subsystem=ejb3/service=remote' is deprecated, and may be removed in a future version. See the attribute description in the output of the read-resource-description operation to learn more about the deprecation.\n18:54:51,747 INFO  [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 1) WFLYDS0004: Found Gestionale1.war in deployment directory. To trigger deployment create a file called Gestionale1.war.dodeploy\n18:54:51,929 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0039: Creating http management service using socket-binding (management-http)\n18:54:51,954 INFO  [org.xnio] (MSC service thread 1-5) XNIO version 3.8.9.Final\n18:54:51,965 INFO  [org.xnio.nio] (MSC service thread 1-5) XNIO NIO Implementation Version 3.8.9.Final\n18:54:52,046 INFO  [org.jboss.as.jaxrs] (ServerService Thread Pool -- 57) WFLYRS0016: RESTEasy version 6.2.3.Final\n18:54:52,057 INFO  [org.wildfly.extension.health] (ServerService Thread Pool -- 54) WFLYHEALTH0001: Activating Base Health Subsystem\n18:54:52,058 INFO  [org.wildfly.extension.elytron.oidc._private] (ServerService Thread Pool -- 53) WFLYOIDC0001: Activating WildFly Elytron OIDC Subsystem\n18:54:52,061 INFO  [org.jboss.as.clustering.infinispan] (ServerService Thread Pool -- 55) WFLYCLINF0001: Activating Infinispan subsystem.\n18:54:52,081 INFO  [org.jboss.as.connector.subsystems.datasources] (ServerService Thread Pool -- 44) WFLYJCA0004: Deploying JDBC-compliant driver class org.h2.Driver (version 2.1)\n18:54:52,102 WARN  [org.jboss.as.txn] (ServerService Thread Pool -- 74) WFLYTX0013: The node-identifier attribute on the /subsystem=transactions is set to the default value. This is a danger for environments running multiple servers. Please make sure the attribute value is unique.\n18:54:52,131 INFO  [org.wildfly.extension.microprofile.jwt.smallrye] (ServerService Thread Pool -- 66) WFLYJWT0001: Activating MicroProfile JWT Subsystem\n18:54:52,142 INFO  [org.wildfly.extension.microprofile.config.smallrye] (ServerService Thread Pool -- 65) WFLYCONF0001: Activating MicroProfile Config Subsystem\n18:54:52,159 INFO  [org.jboss.as.jsf] (ServerService Thread Pool -- 62) WFLYJSF0007: Activated the following Jakarta Server Faces Implementations: [main]\n18:54:52,179 INFO  [org.wildfly.extension.metrics] (ServerService Thread Pool -- 64) WFLYMETRICS0001: Activating Base Metrics Subsystem\n18:54:52,193 INFO  [org.jboss.as.connector] (MSC service thread 1-7) WFLYJCA0009: Starting Jakarta Connectors Subsystem (WildFly/IronJacamar 3.0.2.Final)\n18:54:52,201 INFO  [org.jboss.as.naming] (ServerService Thread Pool -- 67) WFLYNAM0001: Activating Naming Subsystem\n18:54:52,221 INFO  [org.jboss.as.webservices] (ServerService Thread Pool -- 76) WFLYWS0002: Activating WebServices Extension\n18:54:52,249 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-6) WFLYSRV0027: Starting deployment of &quot;Gestionale1.war&quot; (runtime-name: &quot;Gestionale1.war&quot;)\n18:54:52,300 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-3) WFLYUT0003: Undertow 2.3.5.Final starting\n18:54:52,303 INFO  [org.jboss.as.connector.deployers.jdbc] (MSC service thread 1-3) WFLYJCA0018: Started Driver service with driver-name = h2\n18:54:52,368 INFO  [org.jboss.as.naming] (MSC service thread 1-7) WFLYNAM0003: Starting Naming Service\n18:54:52,412 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-4) WFLYELY00023: KeyStore file 'C:\\Users\\Utente\\wildfly-28.0.0.Final\\standalone\\configuration\\application.keystore' does not exist. Used blank.\n18:54:52,478 WARN  [org.wildfly.extension.elytron] (MSC service thread 1-6) WFLYELY01084: KeyStore C:\\Users\\Utente\\wildfly-28.0.0.Final\\standalone\\configuration\\application.keystore not found, it will be auto-generated on first use with a self-signed certificate for host localhost\n18:54:52,553 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 75) WFLYUT0014: Creating file handler for path 'C:\\Users\\Utente\\wildfly-28.0.0.Final/welcome-content' with options [directory-listing: 'false', follow-symlink: 'false', case-sensitive: 'true', safe-symlink-paths: '[]']\n18:54:53,300 INFO  [org.jboss.as.mail.extension] (MSC service thread 1-3) WFLYMAIL0001: Bound mail session [java:jboss/mail/Default]\n18:54:53,348 INFO  [org.wildfly.extension.io] (ServerService Thread Pool -- 56) WFLYIO001: Worker 'default' has auto-configured to 8 IO threads with 64 max task threads based on your 4 available processors\n18:54:53,363 INFO  [org.jboss.as.ejb3] (MSC service thread 1-3) WFLYEJB0481: Strict pool slsb-strict-max-pool is using a max instance size of 64 (per class), which is derived from thread worker pool sizing.\n18:54:53,363 INFO  [org.jboss.as.ejb3] (MSC service thread 1-7) WFLYEJB0482: Strict pool mdb-strict-max-pool is using a max instance size of 16 (per class), which is derived from the number of CPUs on this host.\n18:54:53,415 INFO  [org.jboss.as.patching] (MSC service thread 1-1) WFLYPAT0050: WildFly Full cumulative patch ID is: base, one-off patches include: none\n18:54:53,435 INFO  [org.jboss.as.server.deployment.scanner] (MSC service thread 1-6) WFLYDS0013: Started FileSystemDeploymentService for directory C:\\Users\\Utente\\wildfly-28.0.0.Final\\standalone\\deployments\n18:54:53,455 INFO  [org.jboss.remoting] (MSC service thread 1-4) JBoss Remoting version 5.0.27.Final\n18:54:53,510 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0012: Started server default-server.\n18:54:53,514 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) Queuing requests.\n18:54:53,520 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-8) WFLYUT0018: Host default-host starting\n18:54:53,582 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-4) WFLYUT0006: Undertow HTTP listener default listening on 127.0.0.1:8080\n18:54:53,584 INFO  [org.wildfly.extension.undertow] (MSC service thread 1-1) WFLYUT0006: Undertow HTTPS listener https listening on 127.0.0.1:8443\n18:54:53,650 INFO  [org.jboss.as.ejb3] (MSC service thread 1-4) WFLYEJB0493: Jakarta Enterprise Beans subsystem suspension complete\n18:54:53,777 INFO  [org.jboss.ws.common.management] (MSC service thread 1-8) JBWS022052: Starting JBossWS 6.2.0.Final (Apache CXF 4.0.0) \n18:54:53,793 INFO  [org.jboss.as.connector.subsystems.datasources] (MSC service thread 1-6) WFLYJCA0001: Bound data source [java:jboss/datasources/ExampleDS]\n18:54:54,576 INFO  [org.wildfly.extension.undertow] (ServerService Thread Pool -- 79) WFLYUT0021: Registered web context: '/Gestionale1' for server 'default-server'\n18:54:54,673 INFO  [org.jboss.as.server] (ServerService Thread Pool -- 45) WFLYSRV0010: Deployed &quot;Gestionale1.war&quot; (runtime-name : &quot;Gestionale1.war&quot;)\n18:54:54,743 INFO  [org.jboss.as.server] (Controller Boot Thread) WFLYSRV0212: Resuming server\n18:54:54,753 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0060: Http management interface listening on http://127.0.0.1:9990/management\n18:54:54,755 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0051: Admin console listening on http://127.0.0.1:9990\n18:54:54,760 INFO  [org.jboss.as] (Controller Boot Thread) WFLYSRV0025: WildFly Full 28.0.0.Final (WildFly Core 20.0.1.Final) started in 7452ms - Started 365 of 587 services (321 services are lazy, passive or on-demand) - Server configuration file in use: standalone.xml\n18:54:55,177 INFO  [org.jboss.as.protocol] (management I/O-1) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 1,5,management-handler-thread]\n18:54:55,189 INFO  [org.jboss.as.protocol] (management I/O-2) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 2,5,management-handler-thread]\n18:54:55,246 INFO  [org.jboss.as.protocol] (management I/O-2) WFLYPRT0057:  cancelled task by interrupting thread Thread[management-handler-thread - 2,5,management-handler-thread]\n</code></pre>\n"},{"tags":["java","spring","amazon-web-services","amazon-s3"],"comments":[{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1692557650,"post_id":76940881,"comment_id":135636469,"body_markdown":"Are you using a `~/.aws/config` file to supply AWS credentials? Is it valid (at line 12)?","body":"Are you using a <code>~&#47;.aws&#47;config</code> file to supply AWS credentials? Is it valid (at line 12)?"},{"owner":{"account_id":16675767,"reputation":562,"user_id":12052235,"display_name":"Benjamin Barb&#233;"},"score":0,"creation_date":1692560612,"post_id":76940881,"comment_id":135636712,"body_markdown":"Hello @jarmod, Im using credentials provided by my cloud provider accessKey, secretKey, line 12 is in some Java file ( it part of my project)","body":"Hello @jarmod, Im using credentials provided by my cloud provider accessKey, secretKey, line 12 is in some Java file ( it part of my project)"},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":1,"creation_date":1692571606,"post_id":76940881,"comment_id":135637732,"body_markdown":"Maybe I&#39;m misreading this, but the stack trace appears to show the error happens during the AWS SDK&#39;s reading of a configuration profile.","body":"Maybe I&#39;m misreading this, but the stack trace appears to show the error happens during the AWS SDK&#39;s reading of a configuration profile."},{"owner":{"account_id":16675767,"reputation":562,"user_id":12052235,"display_name":"Benjamin Barb&#233;"},"score":0,"creation_date":1695145077,"post_id":76940881,"comment_id":135983833,"body_markdown":"I&#39;m using         var credentials = AwsBasicCredentials.create(&quot;xxx&quot;, &quot;xxx&quot;); to privide credentials @jarmod, using  software.amazon.awssdk, I may not need .aws/config no?","body":"I&#39;m using         var credentials = AwsBasicCredentials.create(&quot;xxx&quot;, &quot;xxx&quot;); to privide credentials @jarmod, using  software.amazon.awssdk, I may not need .aws/config no?"},{"owner":{"account_id":16675767,"reputation":562,"user_id":12052235,"display_name":"Benjamin Barb&#233;"},"score":0,"creation_date":1695146704,"post_id":76940881,"comment_id":135984081,"body_markdown":"And no, i&#39;m not using any ~/.aws/config so I don&#39;t know where this line 12 is referenced","body":"And no, i&#39;m not using any ~/.aws/config so I don&#39;t know where this line 12 is referenced"},{"owner":{"account_id":100740,"reputation":73227,"user_id":271415,"accept_rate":91,"display_name":"jarmod"},"score":0,"creation_date":1695148040,"post_id":76940881,"comment_id":135984273,"body_markdown":"The underlying code seems to be attempting to read an AWS config or credentials file. You can see that in the stack trace - the reference to [ProfileFileReader](https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/profiles/internal/ProfileFileReader.html). That&#39;s typically `~/.aws/config` or whatever the environment variable `AWS_CONFIG_FILE` points to. Do you use that env var, or do you actually have a `~/.aws/` folder with files in it?","body":"The underlying code seems to be attempting to read an AWS config or credentials file. You can see that in the stack trace - the reference to <a href=\"https://sdk.amazonaws.com/java/api/latest/software/amazon/awssdk/profiles/internal/ProfileFileReader.html\" rel=\"nofollow noreferrer\">ProfileFileReader</a>. That&#39;s typically <code>~&#47;.aws&#47;config</code> or whatever the environment variable <code>AWS_CONFIG_FILE</code> points to. Do you use that env var, or do you actually have a <code>~&#47;.aws&#47;</code> folder with files in it?"},{"owner":{"account_id":11377012,"reputation":12772,"user_id":8340997,"display_name":"Anish B."},"score":0,"creation_date":1695177684,"post_id":76940881,"comment_id":135987974,"body_markdown":"Can you pinpoint the code at line number `com.social420cloud.app.service.ScalewayStorageService.&lt;init&gt;(ScalewayStorageService.java:32)` and `com.social420cloud.app.web.rest.ObjectStorageResource.getDocument(ObjectStorageResource.java:35)`","body":"Can you pinpoint the code at line number <code>com.social420cloud.app.service.ScalewayStorageService.&lt;init&gt;&zwnj;&#8203;(ScalewayStorageServ&zwnj;&#8203;ice.java:32)</code> and <code>com.social420cloud.app.web.rest.ObjectStorageResource.getDoc&zwnj;&#8203;ument(ObjectStorageR&zwnj;&#8203;esource.java:35)</code>"},{"owner":{"account_id":6508597,"reputation":686,"user_id":5036698,"accept_rate":25,"display_name":"Asfar Irshad"},"score":0,"creation_date":1695200694,"post_id":76940881,"comment_id":135991088,"body_markdown":"Can you specify where this code is hosted? If aws then which service you are using ECS, EC2 etc?","body":"Can you specify where this code is hosted? If aws then which service you are using ECS, EC2 etc?"},{"owner":{"account_id":10247695,"reputation":64,"user_id":7562982,"display_name":"Jasvant Singh"},"score":0,"creation_date":1695314105,"post_id":76940881,"comment_id":136011054,"body_markdown":"Try deleting &quot;~/.aws&quot; folder and rerun the code. I tried running your code using my access and secret key and found it to be working.","body":"Try deleting &quot;~/.aws&quot; folder and rerun the code. I tried running your code using my access and secret key and found it to be working."},{"owner":{"account_id":4009180,"reputation":4758,"user_id":3303074,"display_name":"Prasanth Rajendran"},"score":0,"creation_date":1695728221,"post_id":76940881,"comment_id":136060476,"body_markdown":"If you are trying to access S3 from EC2/ECS, please don&#39;t use StaticCredentialsProvider for resource authentication, please follow the answer to use the proper AWS authentication https://stackoverflow.com/a/59781080/3303074","body":"If you are trying to access S3 from EC2/ECS, please don&#39;t use StaticCredentialsProvider for resource authentication, please follow the answer to use the proper AWS authentication <a href=\"https://stackoverflow.com/a/59781080/3303074\">stackoverflow.com/a/59781080/3303074</a>"}],"answers":[{"tags":[],"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695253730,"creation_date":1695253730,"answer_id":77146464,"question_id":76940881,"body_markdown":"The problem (as some Commentators have said) is that the fault occurs when the AWS client is being built and it parses a file that is somehow corrupt.\r\n\r\nThe normal behaviour, _even if you provide static credentials_, is for the Default Client to *merge* in settings that you may have set in the global files.  The are two files AWS expects - a configuration file (this is used, for example, to provide a default Region) and a credentials file.\r\n\r\nThe global files are located in well-known locations (see https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html) which are very likely to be in the home directory of the user process called `.aws/credentials` and `.aws/config`.  \r\n\r\nThe stack trace shows that the problem is the `.aws/config` file... and you must have some invalid syntax in the file.\r\n\r\nI was able to reproduce the problem exactly you had shown simply by editing this file to have a file like this:\r\n\r\n```\r\n[default]\r\nX\r\n```\r\nThe problem is line 2 which is expected to be of the form `X=Y`\r\n\r\n(Although in your case the fault is on line 12.)\r\n\r\nSo to fix the problem you have two options.  \r\n\r\n1) Track down that file and alter line 12 to make it parseable by the AWS client.  (Or delete the file)\r\n\r\n2) Provide a code workaround\r\n\r\nIf you cannot locate the file, don&#39;t have access to it, or the file is somehow injected, etc, then the following code will alter the Default Client&#39;s behaviour to look elsewhere for another file.  The only caveat is that this must be a readable file, but it can be entirely empty.  So I created an empty file at this location `/tmp/empty`, obviously you could make a file where ever possible, and then add the following lines to your code:\r\n\r\n```\r\npublic Main(final String accessKey, final String secretKey) {\r\n    this.client = S3Client.builder().region(Region.of(SCALEWAY_REGION))\r\n            \r\n            // workaround to misdirect AWS to avoid looking in the normal place for its configuration file\r\n            // ------------\r\n            .overrideConfiguration(\r\n                    ClientOverrideConfiguration.builder()\r\n                            .defaultProfileFile(ProfileFile.builder()\r\n                                    .content(FileSystems.getDefault().getPath(&quot;/tmp&quot;, &quot;empty&quot;))\r\n                                    .type(ProfileFile.Type.CONFIGURATION)\r\n                                    .build())\r\n                            .build()\r\n            )\r\n            // ------------\r\n            .endpointOverride(URI.create(SCALEWAY_ENDPOINT_URL))\r\n            .credentialsProvider(\r\n                    StaticCredentialsProvider.create(\r\n                            AwsBasicCredentials.create(accessKey, secretKey)))\r\n            .build();\r\n}\r\n```\r\n\r\n\r\n","title":"Error during AWS connection using S3Client Java spring &#39;Expected an &#39;=&#39; sign defining a property","body":"<p>The problem (as some Commentators have said) is that the fault occurs when the AWS client is being built and it parses a file that is somehow corrupt.</p>\n<p>The normal behaviour, <em>even if you provide static credentials</em>, is for the Default Client to <em>merge</em> in settings that you may have set in the global files.  The are two files AWS expects - a configuration file (this is used, for example, to provide a default Region) and a credentials file.</p>\n<p>The global files are located in well-known locations (see <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/credentials-chain.html</a>) which are very likely to be in the home directory of the user process called <code>.aws/credentials</code> and <code>.aws/config</code>.</p>\n<p>The stack trace shows that the problem is the <code>.aws/config</code> file... and you must have some invalid syntax in the file.</p>\n<p>I was able to reproduce the problem exactly you had shown simply by editing this file to have a file like this:</p>\n<pre><code>[default]\nX\n</code></pre>\n<p>The problem is line 2 which is expected to be of the form <code>X=Y</code></p>\n<p>(Although in your case the fault is on line 12.)</p>\n<p>So to fix the problem you have two options.</p>\n<ol>\n<li><p>Track down that file and alter line 12 to make it parseable by the AWS client.  (Or delete the file)</p>\n</li>\n<li><p>Provide a code workaround</p>\n</li>\n</ol>\n<p>If you cannot locate the file, don't have access to it, or the file is somehow injected, etc, then the following code will alter the Default Client's behaviour to look elsewhere for another file.  The only caveat is that this must be a readable file, but it can be entirely empty.  So I created an empty file at this location <code>/tmp/empty</code>, obviously you could make a file where ever possible, and then add the following lines to your code:</p>\n<pre><code>public Main(final String accessKey, final String secretKey) {\n    this.client = S3Client.builder().region(Region.of(SCALEWAY_REGION))\n            \n            // workaround to misdirect AWS to avoid looking in the normal place for its configuration file\n            // ------------\n            .overrideConfiguration(\n                    ClientOverrideConfiguration.builder()\n                            .defaultProfileFile(ProfileFile.builder()\n                                    .content(FileSystems.getDefault().getPath(&quot;/tmp&quot;, &quot;empty&quot;))\n                                    .type(ProfileFile.Type.CONFIGURATION)\n                                    .build())\n                            .build()\n            )\n            // ------------\n            .endpointOverride(URI.create(SCALEWAY_ENDPOINT_URL))\n            .credentialsProvider(\n                    StaticCredentialsProvider.create(\n                            AwsBasicCredentials.create(accessKey, secretKey)))\n            .build();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8317456,"reputation":1353,"user_id":6250244,"display_name":"0gam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695737802,"creation_date":1695709502,"answer_id":77177458,"question_id":76940881,"body_markdown":"Your error is `Expected an &#39;=&#39; sign defining a property on line, software.amazon.awssdk.profiles.internal.ProfileFileReader..`\r\n\r\n&gt; Profile module allows loading information from AWS configuration and\r\n&gt; credentials files.\r\n\r\n\r\nCheck `credentials` or `configurations`.\r\n\r\n&gt; Java SDK is pretty strict. It does not like the space before [default] in your config file.\r\n\r\n\r\n***~/.aws/credentials***\r\n    \r\n    [default]\r\n    aws_access_key_id =\r\n    aws_secret_access_key =\r\n\r\n***~/.aws/config***\r\n    \r\n    [default]\r\n    region =\r\n    output = \r\n\r\n***Test***\r\n   \r\n\r\n    private static AmazonS3 s3Client;\r\n\r\n    @BeforeAll\r\n    static void before() {\r\n        String accessKey = &quot;&quot;;\r\n        String secretKey = &quot;&quot;;\r\n    \r\n        AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\r\n    \r\n        s3Client = AmazonS3ClientBuilder.standard()\r\n                    .withCredentials(new AWSStaticCredentialsProvider(credentials))\r\n                    .withRegion(Regions.AP_EAST_1)\r\n                    .build();\r\n    }\r\n\r\n    // download test...","title":"Error during AWS connection using S3Client Java spring &#39;Expected an &#39;=&#39; sign defining a property","body":"<p>Your error is <code>Expected an '=' sign defining a property on line, software.amazon.awssdk.profiles.internal.ProfileFileReader..</code></p>\n<blockquote>\n<p>Profile module allows loading information from AWS configuration and\ncredentials files.</p>\n</blockquote>\n<p>Check <code>credentials</code> or <code>configurations</code>.</p>\n<blockquote>\n<p>Java SDK is pretty strict. It does not like the space before [default] in your config file.</p>\n</blockquote>\n<p><em><strong>~/.aws/credentials</strong></em></p>\n<pre><code>[default]\naws_access_key_id =\naws_secret_access_key =\n</code></pre>\n<p><em><strong>~/.aws/config</strong></em></p>\n<pre><code>[default]\nregion =\noutput = \n</code></pre>\n<p><em><strong>Test</strong></em></p>\n<pre><code>private static AmazonS3 s3Client;\n\n@BeforeAll\nstatic void before() {\n    String accessKey = &quot;&quot;;\n    String secretKey = &quot;&quot;;\n\n    AWSCredentials credentials = new BasicAWSCredentials(accessKey, secretKey);\n\n    s3Client = AmazonS3ClientBuilder.standard()\n                .withCredentials(new AWSStaticCredentialsProvider(credentials))\n                .withRegion(Regions.AP_EAST_1)\n                .build();\n}\n\n// download test...\n</code></pre>\n"}],"owner":{"account_id":16675767,"reputation":562,"user_id":12052235,"display_name":"Benjamin Barb&#233;"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":230,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1695750736,"creation_date":1692557201,"question_id":76940881,"body_markdown":"I&#39;m trying to use S3Client to initiate a connection to a S3 bucket hosted on a cloud provider to get and upload documents.\r\n\r\nI have a java spring boot application and I&#39;m using the following versions:\r\n\r\n - Java: 17 \r\n - Spring: 3.0.7 \r\n - software.amazon.awssdk: 2.20.127\r\n\r\nI implemented the following service: \r\n\r\n\r\n    imports...\r\n    \r\n    public class ScalewayStorageService {\r\n    \r\n        private final String SCALEWAY_ENDPOINT_URL = &quot;xx&quot;;\r\n    \r\n        private final String SCALEWAY_REGION = &quot;fr-par&quot;;\r\n    \r\n        private final String SCALEWAY_BUCKET_NAME = &quot;xx&quot;;\r\n    \r\n    \r\n        private final S3Client client;\r\n    \r\n    \r\n        public ScalewayStorageService(final String accessKey, final String secretKey) {\r\n            this.client = S3Client.builder().region(Region.of(SCALEWAY_REGION))\r\n                    .endpointOverride(URI.create(SCALEWAY_ENDPOINT_URL))\r\n                    .credentialsProvider(\r\n                            StaticCredentialsProvider.create(\r\n                                    AwsBasicCredentials.create(accessKey, secretKey)))\r\n                    .build();\r\n        }\r\n    \r\n        public ResponseInputStream&lt;GetObjectResponse&gt; download(final String path) {\r\n            final GetObjectRequest objectRequest =\r\n                    GetObjectRequest\r\n                            .builder()\r\n                            .key(path)\r\n                            .bucket(SCALEWAY_BUCKET_NAME)\r\n                            .build();\r\n    \r\n            return client.getObject(objectRequest);\r\n        }\r\n    \r\n        protected void shutdown() {\r\n            this.client.close();\r\n        }\r\n    \r\n    }\r\n\r\nThen I have this GetMapping in a ressource:\r\n\r\n \r\n\r\n       @GetMapping(&quot;/object-storage&quot;)\r\n        public ResponseEntity&lt;String&gt; getDocument() {\r\n            log.debug(&quot;REST request to get Document from object storage&quot;);\r\n            ScalewayStorageService scalewayStorageService = new ScalewayStorageService(accessKey, secretKey);\r\n            ResponseInputStream&lt;GetObjectResponse&gt; responseResponseInputStream = scalewayStorageService.download(imagepath);\r\n            log.debug(&quot;responseResponseInputStream : {}&quot;, responseResponseInputStream);\r\n            return ResponseEntity.of(Optional.of(&quot;Test&quot;));\r\n        }\r\n\r\n\r\nAnd I get the following error:\r\n\r\n    2023-08-20T20:34:46.690+02:00 ERROR 7721 --- [  XNIO-1 task-2] c.s.app.web.rest.ObjectStorageResource   : Exception in getDocument() with cause = &#39;NULL&#39; and exception = &#39;Expected an &#39;=&#39; sign defining a property on line 12&#39; \r\n    \r\n    java.lang.IllegalArgumentException: Expected an &#39;=&#39; sign defining a property on line 12\r\n    \tat software.amazon.awssdk.utils.Validate.isTrue(Validate.java:76)\r\n    \tat software.amazon.awssdk.profiles.internal.ProfileFileReader.parsePropertyDefinition(ProfileFileReader.java:243)\r\n    \tat software.amazon.awssdk.profiles.internal.ProfileFileReader.readPropertyContinuationLine(ProfileFileReader.java:173)\r\n    \tat software.amazon.awssdk.profiles.internal.ProfileFileReader.parseLine(ProfileFileReader.java:81)\r\n    \tat software.amazon.awssdk.profiles.internal.ProfileFileReader.lambda$parseFile$0(ProfileFileReader.java:59)\r\n    \tat java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\r\n    \tat java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845)\r\n    \tat java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\r\n    \tat software.amazon.awssdk.profiles.internal.ProfileFileReader.parseFile(ProfileFileReader.java:59)\r\n    \tat software.amazon.awssdk.profiles.ProfileFile$BuilderImpl.build(ProfileFile.java:309)\r\n    \tat software.amazon.awssdk.profiles.ProfileFile.lambda$addConfigFile$1(ProfileFile.java:160)\r\n    \tat java.base/java.util.Optional.ifPresent(Optional.java:178)\r\n    \tat software.amazon.awssdk.profiles.ProfileFile.addConfigFile(ProfileFile.java:157)\r\n    \tat software.amazon.awssdk.utils.builder.SdkBuilder.applyMutation(SdkBuilder.java:61)\r\n    \tat software.amazon.awssdk.profiles.ProfileFile.defaultProfileFile(ProfileFile.java:99)\r\n    \tat software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.lambda$mergeGlobalDefaults$2(SdkDefaultClientBuilder.java:267)\r\n    \tat java.base/java.util.Optional.orElseGet(Optional.java:364)\r\n    \tat software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.mergeGlobalDefaults(SdkDefaultClientBuilder.java:267)\r\n    \tat software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.syncClientConfiguration(SdkDefaultClientBuilder.java:177)\r\n    \tat software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:40)\r\n    \tat software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:29)\r\n    \tat software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.build(SdkDefaultClientBuilder.java:147)\r\n    \tat com.social420cloud.app.service.ScalewayStorageService.&lt;init&gt;(ScalewayStorageService.java:32)\r\n    \tat com.social420cloud.app.web.rest.ObjectStorageResource.getDocument(ObjectStorageResource.java:35)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n    \tat org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n    \tat org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)\r\n    \tat com.social420cloud.app.aop.logging.LoggingAspect.logAround(LoggingAspect.java:105)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)\r\n    \tat org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)\r\n    \tat org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n    \tat org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\r\n    \tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\r\n    \tat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\r\n    \tat com.social420cloud.app.web.rest.ObjectStorageResource$$SpringCGLIB$$0.getDocument(&lt;generated&gt;)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\r\n    \tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:527)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\r\n    \tat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)\r\n    \tat io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\r\n    \tat org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n    \tat org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:399)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:297)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:79)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:125)\r\n    \tat org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)\r\n    \tat org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)\r\n    \tat org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat com.social420cloud.app.web.filter.SpaWebFilter.doFilterInternal(SpaWebFilter.java:30)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)\r\n    \tat org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\r\n    \tat org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)\r\n    \tat org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:280)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:170)\r\n    \tat org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)\r\n    \tat org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)\r\n    \tat org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n    \tat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n    \tat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n    \tat org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n    \tat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\r\n    \tat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\r\n    \tat io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\r\n    \tat io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\r\n    \tat io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\r\n    \tat io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\r\n    \tat io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\r\n    \tat io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\r\n    \tat io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\r\n    \tat io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\r\n    \tat io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\r\n    \tat io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\r\n    \tat io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\r\n    \tat io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\r\n    \tat io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\r\n    \tat io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\r\n    \tat io.undertow.servlet.handlers.SessionRestoringHandler.handleRequest(SessionRestoringHandler.java:119)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:276)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:132)\r\n    \tat io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\r\n    \tat io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:256)\r\n    \tat io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:101)\r\n    \tat io.undertow.server.Connectors.executeRootHandler(Connectors.java:393)\r\n    \tat io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:859)\r\n    \tat org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\r\n    \tat org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\r\n    \tat org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1282)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    \r\n    2023-08-20T20:34:46.695+02:00 ERROR 7721 --- [  XNIO-1 task-2] c.s.app.web.rest.ObjectStorageResource   : Illegal argument: [] in getDocument() \r\n\r\n\r\nAny ideas how can I solve this issue ? ","title":"Error during AWS connection using S3Client Java spring &#39;Expected an &#39;=&#39; sign defining a property","body":"<p>I'm trying to use S3Client to initiate a connection to a S3 bucket hosted on a cloud provider to get and upload documents.</p>\n<p>I have a java spring boot application and I'm using the following versions:</p>\n<ul>\n<li>Java: 17</li>\n<li>Spring: 3.0.7</li>\n<li>software.amazon.awssdk: 2.20.127</li>\n</ul>\n<p>I implemented the following service:</p>\n<pre><code>imports...\n\npublic class ScalewayStorageService {\n\n    private final String SCALEWAY_ENDPOINT_URL = &quot;xx&quot;;\n\n    private final String SCALEWAY_REGION = &quot;fr-par&quot;;\n\n    private final String SCALEWAY_BUCKET_NAME = &quot;xx&quot;;\n\n\n    private final S3Client client;\n\n\n    public ScalewayStorageService(final String accessKey, final String secretKey) {\n        this.client = S3Client.builder().region(Region.of(SCALEWAY_REGION))\n                .endpointOverride(URI.create(SCALEWAY_ENDPOINT_URL))\n                .credentialsProvider(\n                        StaticCredentialsProvider.create(\n                                AwsBasicCredentials.create(accessKey, secretKey)))\n                .build();\n    }\n\n    public ResponseInputStream&lt;GetObjectResponse&gt; download(final String path) {\n        final GetObjectRequest objectRequest =\n                GetObjectRequest\n                        .builder()\n                        .key(path)\n                        .bucket(SCALEWAY_BUCKET_NAME)\n                        .build();\n\n        return client.getObject(objectRequest);\n    }\n\n    protected void shutdown() {\n        this.client.close();\n    }\n\n}\n</code></pre>\n<p>Then I have this GetMapping in a ressource:</p>\n<pre><code>   @GetMapping(&quot;/object-storage&quot;)\n    public ResponseEntity&lt;String&gt; getDocument() {\n        log.debug(&quot;REST request to get Document from object storage&quot;);\n        ScalewayStorageService scalewayStorageService = new ScalewayStorageService(accessKey, secretKey);\n        ResponseInputStream&lt;GetObjectResponse&gt; responseResponseInputStream = scalewayStorageService.download(imagepath);\n        log.debug(&quot;responseResponseInputStream : {}&quot;, responseResponseInputStream);\n        return ResponseEntity.of(Optional.of(&quot;Test&quot;));\n    }\n</code></pre>\n<p>And I get the following error:</p>\n<pre><code>2023-08-20T20:34:46.690+02:00 ERROR 7721 --- [  XNIO-1 task-2] c.s.app.web.rest.ObjectStorageResource   : Exception in getDocument() with cause = 'NULL' and exception = 'Expected an '=' sign defining a property on line 12' \n\njava.lang.IllegalArgumentException: Expected an '=' sign defining a property on line 12\n    at software.amazon.awssdk.utils.Validate.isTrue(Validate.java:76)\n    at software.amazon.awssdk.profiles.internal.ProfileFileReader.parsePropertyDefinition(ProfileFileReader.java:243)\n    at software.amazon.awssdk.profiles.internal.ProfileFileReader.readPropertyContinuationLine(ProfileFileReader.java:173)\n    at software.amazon.awssdk.profiles.internal.ProfileFileReader.parseLine(ProfileFileReader.java:81)\n    at software.amazon.awssdk.profiles.internal.ProfileFileReader.lambda$parseFile$0(ProfileFileReader.java:59)\n    at java.base/java.util.Iterator.forEachRemaining(Iterator.java:133)\n    at java.base/java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1845)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at software.amazon.awssdk.profiles.internal.ProfileFileReader.parseFile(ProfileFileReader.java:59)\n    at software.amazon.awssdk.profiles.ProfileFile$BuilderImpl.build(ProfileFile.java:309)\n    at software.amazon.awssdk.profiles.ProfileFile.lambda$addConfigFile$1(ProfileFile.java:160)\n    at java.base/java.util.Optional.ifPresent(Optional.java:178)\n    at software.amazon.awssdk.profiles.ProfileFile.addConfigFile(ProfileFile.java:157)\n    at software.amazon.awssdk.utils.builder.SdkBuilder.applyMutation(SdkBuilder.java:61)\n    at software.amazon.awssdk.profiles.ProfileFile.defaultProfileFile(ProfileFile.java:99)\n    at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.lambda$mergeGlobalDefaults$2(SdkDefaultClientBuilder.java:267)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.mergeGlobalDefaults(SdkDefaultClientBuilder.java:267)\n    at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.syncClientConfiguration(SdkDefaultClientBuilder.java:177)\n    at software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:40)\n    at software.amazon.awssdk.services.s3.DefaultS3ClientBuilder.buildClient(DefaultS3ClientBuilder.java:29)\n    at software.amazon.awssdk.core.client.builder.SdkDefaultClientBuilder.build(SdkDefaultClientBuilder.java:147)\n    at com.social420cloud.app.service.ScalewayStorageService.&lt;init&gt;(ScalewayStorageService.java:32)\n    at com.social420cloud.app.web.rest.ObjectStorageResource.getDocument(ObjectStorageResource.java:35)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.aspectj.AspectJAfterThrowingAdvice.invoke(AspectJAfterThrowingAdvice.java:64)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:89)\n    at com.social420cloud.app.aop.logging.LoggingAspect.logAround(LoggingAspect.java:105)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:637)\n    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:627)\n    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:71)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\n    at com.social420cloud.app.web.rest.ObjectStorageResource$$SpringCGLIB$$0.getDocument(&lt;generated&gt;)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1081)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:974)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:527)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614)\n    at io.undertow.servlet.handlers.ServletHandler.handleRequest(ServletHandler.java:74)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:129)\n    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)\n    at org.springframework.security.web.ObservationFilterChainDecorator$FilterObservation$SimpleFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:399)\n    at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$1(ObservationFilterChainDecorator.java:297)\n    at org.springframework.security.web.ObservationFilterChainDecorator.lambda$wrapSecured$0(ObservationFilterChainDecorator.java:79)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:125)\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at com.social420cloud.app.web.filter.SpaWebFilter.doFilterInternal(SpaWebFilter.java:30)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:145)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:173)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:186)\n    at org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:280)\n    at org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:170)\n    at org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:134)\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)\n    at io.undertow.servlet.core.ManagedFilter.doFilter(ManagedFilter.java:67)\n    at io.undertow.servlet.handlers.FilterHandler$FilterChainImpl.doFilter(FilterHandler.java:131)\n    at io.undertow.servlet.handlers.FilterHandler.handleRequest(FilterHandler.java:84)\n    at io.undertow.servlet.handlers.security.ServletSecurityRoleHandler.handleRequest(ServletSecurityRoleHandler.java:62)\n    at io.undertow.servlet.handlers.ServletChain$1.handleRequest(ServletChain.java:68)\n    at io.undertow.servlet.handlers.ServletDispatchingHandler.handleRequest(ServletDispatchingHandler.java:36)\n    at io.undertow.servlet.handlers.RedirectDirHandler.handleRequest(RedirectDirHandler.java:68)\n    at io.undertow.servlet.handlers.security.SSLInformationAssociationHandler.handleRequest(SSLInformationAssociationHandler.java:117)\n    at io.undertow.servlet.handlers.security.ServletAuthenticationCallHandler.handleRequest(ServletAuthenticationCallHandler.java:57)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.security.handlers.AbstractConfidentialityHandler.handleRequest(AbstractConfidentialityHandler.java:46)\n    at io.undertow.servlet.handlers.security.ServletConfidentialityConstraintHandler.handleRequest(ServletConfidentialityConstraintHandler.java:64)\n    at io.undertow.security.handlers.AuthenticationMechanismsHandler.handleRequest(AuthenticationMechanismsHandler.java:60)\n    at io.undertow.servlet.handlers.security.CachedAuthenticatedSessionHandler.handleRequest(CachedAuthenticatedSessionHandler.java:77)\n    at io.undertow.security.handlers.AbstractSecurityContextAssociationHandler.handleRequest(AbstractSecurityContextAssociationHandler.java:43)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.SendErrorPageHandler.handleRequest(SendErrorPageHandler.java:52)\n    at io.undertow.server.handlers.PredicateHandler.handleRequest(PredicateHandler.java:43)\n    at io.undertow.servlet.handlers.SessionRestoringHandler.handleRequest(SessionRestoringHandler.java:119)\n    at io.undertow.servlet.handlers.ServletInitialHandler.handleFirstRequest(ServletInitialHandler.java:276)\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:135)\n    at io.undertow.servlet.handlers.ServletInitialHandler$2.call(ServletInitialHandler.java:132)\n    at io.undertow.servlet.core.ServletRequestContextThreadSetupAction$1.call(ServletRequestContextThreadSetupAction.java:48)\n    at io.undertow.servlet.core.ContextClassLoaderSetupAction$1.call(ContextClassLoaderSetupAction.java:43)\n    at io.undertow.servlet.handlers.ServletInitialHandler.dispatchRequest(ServletInitialHandler.java:256)\n    at io.undertow.servlet.handlers.ServletInitialHandler$1.handleRequest(ServletInitialHandler.java:101)\n    at io.undertow.server.Connectors.executeRootHandler(Connectors.java:393)\n    at io.undertow.server.HttpServerExchange$1.run(HttpServerExchange.java:859)\n    at org.jboss.threads.ContextHandler$1.runWith(ContextHandler.java:18)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.xnio.XnioWorker$WorkerThreadFactory$1$1.run(XnioWorker.java:1282)\n    at java.base/java.lang.Thread.run(Thread.java:833)\n\n2023-08-20T20:34:46.695+02:00 ERROR 7721 --- [  XNIO-1 task-2] c.s.app.web.rest.ObjectStorageResource   : Illegal argument: [] in getDocument() \n</code></pre>\n<p>Any ideas how can I solve this issue ?</p>\n"},{"tags":["java","unit-testing","junit","junit5","jmockit"],"owner":{"account_id":21181428,"reputation":177,"user_id":15575750,"display_name":"Ruslan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":125,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1695750330,"creation_date":1634028004,"question_id":69537453,"body_markdown":"I&#39;m trying to mock OutputStream to throw an Exception while writing, but mocked object is not initialized, and that&#39;s why I got NPE.\r\nThe piece of code: \r\n\r\n    \r\n\r\n    @Mocked\r\n    OutputStreamWriter writer;\r\n\r\n    @Test\r\n    void testWriteFailureWithoutRetries() throws IOException {\r\n        new Expectations() {{\r\n           writer.write(anyString);\r\n           result = new IOException();\r\n        }};\r\n        ...\r\n    }\r\n\r\nIn Expectations block, the writer object is null. I use jMockit 1.44, jUnit 5.4.2\r\n\r\n\r\nUPD: problem was solved by rolling jUnit version back to 5.3.2, but probably there is a better solution?","title":"JMockit @Mocked object throws NPE","body":"<p>I'm trying to mock OutputStream to throw an Exception while writing, but mocked object is not initialized, and that's why I got NPE.\nThe piece of code:</p>\n<pre><code>@Mocked\nOutputStreamWriter writer;\n\n@Test\nvoid testWriteFailureWithoutRetries() throws IOException {\n    new Expectations() {{\n       writer.write(anyString);\n       result = new IOException();\n    }};\n    ...\n}\n</code></pre>\n<p>In Expectations block, the writer object is null. I use jMockit 1.44, jUnit 5.4.2</p>\n<p>UPD: problem was solved by rolling jUnit version back to 5.3.2, but probably there is a better solution?</p>\n"},{"tags":["java","itext7"],"answers":[{"tags":[],"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695736875,"creation_date":1695736875,"answer_id":77180748,"question_id":77180477,"body_markdown":"Don&#39;t know if this is the best way, but seems to work:\r\n\r\n            PdfArray byteRange = signature.getByteRange();\r\n            File signed = File.createTempFile(&quot;signed_&quot;, &quot;.bin&quot;);\r\n\r\n            RandomAccessFileOrArray rf = reader.getSafeFile();\r\n            try (InputStream rg = new RASInputStream(new RandomAccessSourceFactory().createRanged(rf.createSourceView(), byteRange.toLongArray()));\r\n                 OutputStream result = new FileOutputStream(signed)) {\r\n                byte[] buf = new byte[8192];\r\n                int rd;\r\n                while ((rd = rg.read(buf, 0, buf.length)) &gt; 0) {\r\n                    result.write(buf, 0, rd);\r\n                }\r\n            }\r\n","title":"itext7 - how to get document signed content?","body":"<p>Don't know if this is the best way, but seems to work:</p>\n<pre><code>        PdfArray byteRange = signature.getByteRange();\n        File signed = File.createTempFile(&quot;signed_&quot;, &quot;.bin&quot;);\n\n        RandomAccessFileOrArray rf = reader.getSafeFile();\n        try (InputStream rg = new RASInputStream(new RandomAccessSourceFactory().createRanged(rf.createSourceView(), byteRange.toLongArray()));\n             OutputStream result = new FileOutputStream(signed)) {\n            byte[] buf = new byte[8192];\n            int rd;\n            while ((rd = rg.read(buf, 0, buf.length)) &gt; 0) {\n                result.write(buf, 0, rd);\n            }\n        }\n</code></pre>\n"}],"owner":{"account_id":2142244,"reputation":2287,"user_id":1900620,"accept_rate":41,"display_name":"Thiago Say&#227;o"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1695749966,"creation_date":1695734891,"question_id":77180477,"body_markdown":"I&#39;m looking for something like `getSignedContent` on [PDFBox][1] to get the Signed content of the file (not the signature).\r\n\r\n&gt; Return the signed content of the document. This is not a PDF file, nor\r\n&gt; is it the PDF file before signing, it is the byte sequence made of the\r\n&gt; input minus the area where the signature bytes will be\r\n\r\nHow to do it with itext?\r\n\r\n\r\n  [1]: http://svn.apache.org/repos/asf/pdfbox/trunk/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/digitalsignature/PDSignature.java","title":"itext7 - how to get document signed content?","body":"<p>I'm looking for something like <code>getSignedContent</code> on <a href=\"http://svn.apache.org/repos/asf/pdfbox/trunk/pdfbox/src/main/java/org/apache/pdfbox/pdmodel/interactive/digitalsignature/PDSignature.java\" rel=\"nofollow noreferrer\">PDFBox</a> to get the Signed content of the file (not the signature).</p>\n<blockquote>\n<p>Return the signed content of the document. This is not a PDF file, nor\nis it the PDF file before signing, it is the byte sequence made of the\ninput minus the area where the signature bytes will be</p>\n</blockquote>\n<p>How to do it with itext?</p>\n"},{"tags":["java","amazon-elastic-beanstalk","profiling","visualvm","jprofiler"],"comments":[{"owner":{"account_id":1678069,"reputation":534,"user_id":1543107,"display_name":"thunk"},"score":0,"creation_date":1699470077,"post_id":77182271,"comment_id":136536978,"body_markdown":"did you ever get an answer to this @deathByChocolate?  I&#39;m in the same boat and getting out of memory heap space errors :-(","body":"did you ever get an answer to this @deathByChocolate?  I&#39;m in the same boat and getting out of memory heap space errors :-("},{"owner":{"account_id":25815055,"reputation":25,"user_id":19555159,"display_name":"deathByChocolate"},"score":0,"creation_date":1699982669,"post_id":77182271,"comment_id":136597984,"body_markdown":"Yes I was able to profile my remote server. However I did not run into memory heap space errors. Can you please paste the error here?","body":"Yes I was able to profile my remote server. However I did not run into memory heap space errors. Can you please paste the error here?"},{"owner":{"account_id":1678069,"reputation":534,"user_id":1543107,"display_name":"thunk"},"score":0,"creation_date":1700076645,"post_id":77182271,"comment_id":136611657,"body_markdown":"How did you end up profiling?","body":"How did you end up profiling?"},{"owner":{"account_id":25815055,"reputation":25,"user_id":19555159,"display_name":"deathByChocolate"},"score":0,"creation_date":1700078235,"post_id":77182271,"comment_id":136611905,"body_markdown":"I have shared the steps which I followed in this [doc](https://exclusive-cold-166.notion.site/profiling-in-remote-ec2-instance-using-VisualVM-1470cf3dbeca45f99beb5fda818db20f?pvs=4).","body":"I have shared the steps which I followed in this <a href=\"https://exclusive-cold-166.notion.site/profiling-in-remote-ec2-instance-using-VisualVM-1470cf3dbeca45f99beb5fda818db20f?pvs=4\" rel=\"nofollow noreferrer\">doc</a>."}],"owner":{"account_id":25815055,"reputation":25,"user_id":19555159,"display_name":"deathByChocolate"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":35,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695749808,"creation_date":1695749808,"question_id":77182271,"body_markdown":"I am trying to figure out some performance issues in my spring boot application. A code block is running within a for loop and taking a lot of time(there are no network calls). I want to identify the expensive lines of code within the block.\r\n\r\n\r\n\r\nThe war file is deployed on elastic beanstalk and is running in a tomcat web container. I am fairly new to profiling and unable to figure out where to start from. I have read about VisualVM and Jprofiler but not sure how to use them. It would be helpful if anyone can point me in the right direction.","title":"How to monitor elastic beanstalk tomcat instance using a profiler","body":"<p>I am trying to figure out some performance issues in my spring boot application. A code block is running within a for loop and taking a lot of time(there are no network calls). I want to identify the expensive lines of code within the block.</p>\n<p>The war file is deployed on elastic beanstalk and is running in a tomcat web container. I am fairly new to profiling and unable to figure out where to start from. I have read about VisualVM and Jprofiler but not sure how to use them. It would be helpful if anyone can point me in the right direction.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":183966,"reputation":14640,"user_id":419705,"accept_rate":67,"display_name":"Roddy of the Frozen Peas"},"score":0,"creation_date":1695748981,"post_id":77181663,"comment_id":136065013,"body_markdown":"I&#39;m presuming that import is supposed to be `java.util.Scanner`, not `until`. `String` should be capitalized in the main method. I copied your code into an IDE and do not reproduce the error mentioned -- is your code _exactly_ as indicated here?","body":"I&#39;m presuming that import is supposed to be <code>java.util.Scanner</code>, not <code>until</code>. <code>String</code> should be capitalized in the main method. I copied your code into an IDE and do not reproduce the error mentioned -- is your code <i>exactly</i> as indicated here?"}],"answers":[{"comments":[{"owner":{"account_id":29042067,"reputation":31,"user_id":22246732,"display_name":"Joshua Pelkey"},"score":0,"creation_date":1695745201,"post_id":77181765,"comment_id":136064342,"body_markdown":"oh. I should have caught that. I didn&#39;t see this nor was I getting an error for that.  no. I&#39;m not using an IDE. This is in the zybooks platform. Fixed that, but not the parsing error.","body":"oh. I should have caught that. I didn&#39;t see this nor was I getting an error for that.  no. I&#39;m not using an IDE. This is in the zybooks platform. Fixed that, but not the parsing error."},{"owner":{"account_id":11430291,"reputation":302,"user_id":8379190,"display_name":"amr ras"},"score":1,"creation_date":1695747273,"post_id":77181765,"comment_id":136064726,"body_markdown":"@JoshuaPelkey, yes","body":"@JoshuaPelkey, yes"},{"owner":{"account_id":29042067,"reputation":31,"user_id":22246732,"display_name":"Joshua Pelkey"},"score":0,"creation_date":1695747359,"post_id":77181765,"comment_id":136064742,"body_markdown":"so like this?\n`\n      System.out.println(&quot;Enter the item price: &quot;);\n      productPrice = scnr.nextInt();\n      item1.setPrice(productPrice);\n      scnr.nextLine();\n      \n      System.out.println(&quot;Enter the item quantity: &quot;);\n      productQuantity = scnr.nextInt();\n      item1.setQuantity(productQuantity);\n      scnr.nextLine();\n`","body":"so like this? `       System.out.println(&quot;Enter the item price: &quot;);       productPrice = scnr.nextInt();       item1.setPrice(productPrice);       scnr.nextLine();              System.out.println(&quot;Enter the item quantity: &quot;);       productQuantity = scnr.nextInt();       item1.setQuantity(productQuantity);       scnr.nextLine(); `"},{"owner":{"account_id":29042067,"reputation":31,"user_id":22246732,"display_name":"Joshua Pelkey"},"score":0,"creation_date":1695747428,"post_id":77181765,"comment_id":136064751,"body_markdown":"OK so I went through this and added scnr.nextLine(); after nextInt. still throwing a parsing error.","body":"OK so I went through this and added scnr.nextLine(); after nextInt. still throwing a parsing error."},{"owner":{"account_id":11430291,"reputation":302,"user_id":8379190,"display_name":"amr ras"},"score":0,"creation_date":1695748438,"post_id":77181765,"comment_id":136064916,"body_markdown":"@JoshuaPelkey, can you update your code in the post?","body":"@JoshuaPelkey, can you update your code in the post?"}],"tags":[],"owner":{"account_id":11430291,"reputation":302,"user_id":8379190,"display_name":"amr ras"},"comment_count":5,"down_vote_count":2,"up_vote_count":3,"is_accepted":false,"score":1,"last_activity_date":1695746741,"creation_date":1695744961,"answer_id":77181765,"question_id":77181663,"body_markdown":"You should use scnr.nextLine() after scnr.nextint(). When you enter a value and then press enter, a newline character is added after your value.\r\n\r\nWhen you use nextInt(), it reads only the integer input and leaves behind the &quot;newline&quot; (\\n) character in the input buffer. So, if you use nextLine() immediately after nextInt(), it will consume the leftover newline character, essentially reading an empty line.\r\n\r\nYou already had nextLine() after you inputted the name. Now you need it after each nextInt(). \r\n\r\n    System.out.println(&quot;Enter the item quantity: &quot;);\r\n    productQuantity = scnr.nextInt();\r\n    item1.setQuantity(productQuantity);\r\n    scnr.nextLine();  // Consuming leftover newline character","title":"online shopping cart parsing error in java","body":"<p>You should use scnr.nextLine() after scnr.nextint(). When you enter a value and then press enter, a newline character is added after your value.</p>\n<p>When you use nextInt(), it reads only the integer input and leaves behind the &quot;newline&quot; (\\n) character in the input buffer. So, if you use nextLine() immediately after nextInt(), it will consume the leftover newline character, essentially reading an empty line.</p>\n<p>You already had nextLine() after you inputted the name. Now you need it after each nextInt().</p>\n<pre><code>System.out.println(&quot;Enter the item quantity: &quot;);\nproductQuantity = scnr.nextInt();\nitem1.setQuantity(productQuantity);\nscnr.nextLine();  // Consuming leftover newline character\n</code></pre>\n"},{"comments":[{"owner":{"account_id":29042067,"reputation":31,"user_id":22246732,"display_name":"Joshua Pelkey"},"score":0,"creation_date":1695747990,"post_id":77182025,"comment_id":136064846,"body_markdown":"I don&#39;t see where I&#39;m assigning a string to an Int.  I&#39;m also not aware of what parseInt means and I&#39;m not sure that we have gone over that yet.","body":"I don&#39;t see where I&#39;m assigning a string to an Int.  I&#39;m also not aware of what parseInt means and I&#39;m not sure that we have gone over that yet."},{"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"score":0,"creation_date":1695748948,"post_id":77182025,"comment_id":136065009,"body_markdown":"@JoshuaPelkey see the edit","body":"@JoshuaPelkey see the edit"},{"owner":{"account_id":29042067,"reputation":31,"user_id":22246732,"display_name":"Joshua Pelkey"},"score":0,"creation_date":1695749191,"post_id":77182025,"comment_id":136065064,"body_markdown":"ok, This helped me a lot. Thank you. It seems like its always something small sometimes.","body":"ok, This helped me a lot. Thank you. It seems like its always something small sometimes."},{"owner":{"account_id":29042067,"reputation":31,"user_id":22246732,"display_name":"Joshua Pelkey"},"score":0,"creation_date":1695749585,"post_id":77182025,"comment_id":136065147,"body_markdown":"just marked it as answered.","body":"just marked it as answered."}],"tags":[],"owner":{"account_id":1090437,"reputation":6796,"user_id":1085186,"accept_rate":100,"display_name":"StackFlowed"},"comment_count":4,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1695748912,"creation_date":1695747288,"answer_id":77182025,"question_id":77181663,"body_markdown":"Problem 1: You problem is that the next int doesn&#39;t consider the new line character which goes in the input for your next read. Hence name is returned as blank.\r\n\r\n\r\n\r\nProblem 2: You are assigning String to a int. refer: https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\r\n\r\n\r\nThe following code works fine for me:\r\nShoppingCartPrinter.java\r\n\r\n      import java.util.Scanner;\r\n      \r\n      public class ShoppingCartPrinter{\r\n         //main method\r\n         public static void main(String[] args){\r\n            //create object of scanner\r\n            Scanner scnr = new Scanner(System.in);\r\n            //variable declaration\r\n            int i = 0;\r\n            String productName;\r\n            int productPrice = 0;\r\n            int productQuantity = 0;\r\n            int cartTotal = 0;\r\n            \r\n            ItemToPurchase item1 = new ItemToPurchase();\r\n            ItemToPurchase item2 = new ItemToPurchase();\r\n            \r\n            //get item 1 details\r\n            System.out.println(&quot;Item 1&quot;);\r\n            \r\n            System.out.println(&quot;Enter the item name: &quot;);\r\n            productName = scnr.nextLine();\r\n            item1.setName(productName);\r\n            \r\n            System.out.println(&quot;Enter the item price: &quot;);\r\n            productPrice = scnr.nextInt();\r\n            item1.setPrice(productPrice);\r\n            \r\n            System.out.println(&quot;Enter the item quantity: &quot;);\r\n            productQuantity = scnr.nextInt();\r\n            item1.setQuantity(productQuantity);\r\n            \r\n            scnr.nextLine();\r\n            System.out.println(&quot;&quot;);\r\n            \r\n            //get item 2 details\r\n            System.out.println(&quot;Item 2&quot;);\r\n            \r\n            System.out.println(&quot;Enter the item name: &quot;);\r\n            productName = scnr.nextLine();\r\n            item2.setName(productName);\r\n            \r\n            System.out.println(&quot;Enter the item price: &quot;);\r\n            productPrice = scnr.nextInt();\r\n            item2.setPrice(productPrice);\r\n            \r\n            System.out.println(&quot;Enter the item quantity: &quot;);\r\n            productQuantity = scnr.nextInt();\r\n            item2.setQuantity(productQuantity);\r\n            \r\n            System.out.println(&quot;&quot;);\r\n            \r\n            //add cost of item 1 and 2 and print total\r\n            cartTotal = (item1.getQuantity() * item1.getPrice()) + (item2.getQuantity() * item2.getPrice());\r\n            System.out.println(&quot;TOTAL COST&quot;);\r\n            //cart total is item 1 price * quantity + item 2 price * quantity\r\n            //item 1 info\r\n            int item1Total = item1.getPrice() * item1.getQuantity();\r\n            System.out.println(item1.getName() + &quot; &quot; + item1.getQuantity() + &quot; @ $&quot; + item1.getPrice() + &quot; = $&quot; + item1Total);\r\n            \r\n            //item 2 info\r\n            int item2Total = item2.getPrice() * item2.getQuantity();\r\n            System.out.println(item2.getName() + &quot; &quot; + item2.getQuantity() + &quot; @ $&quot; + item2.getPrice() + &quot; = $&quot; + item2Total);\r\n         \r\n            //output total\r\n            System.out.println(&quot;&quot;);\r\n            System.out.print(&quot;Total: $&quot; + cartTotal);\r\n            \r\n         }\r\n      }\r\n\r\nItemsToPruchase.java\r\n\r\n        public class ItemToPurchase {\r\n            //Private fields - itemName, itemPrice, and itemQuanity\r\n            private String itemName;\r\n            private int itemPrice;\r\n            private int itemQuantity;\r\n        \r\n            //Default Constructor\r\n            public ItemToPurchase() {\r\n                itemName = &quot;none&quot;;\r\n                itemPrice = 0;\r\n                itemQuantity = 0;\r\n            }\r\n        \r\n            //public member methods\r\n            public void setName(String itemName) {\r\n                this.itemName = itemName;\r\n            }\r\n        \r\n            public String getName() {\r\n                return itemName;\r\n            }\r\n        \r\n            public void setPrice(int itemPrice) {\r\n                this.itemPrice = itemPrice;\r\n            }\r\n        \r\n            public int getPrice() {\r\n                return itemPrice;\r\n            }\r\n        \r\n            public void setQuantity(int itemQuantity) {\r\n                this.itemQuantity = itemQuantity;\r\n            }\r\n        \r\n            public int getQuantity() {\r\n                return itemQuantity;\r\n            }\r\n        \r\n            public void printItemPurchase() {\r\n                System.out.println(itemQuantity + &quot; &quot; + itemName + &quot; $&quot; + itemPrice +\r\n                        &quot; = $&quot; + (itemPrice * itemQuantity));\r\n            }\r\n        }\r\n\r\nOutput : \r\n\r\n    Item 1\r\n    Enter the item name: \r\n    item 1\r\n    Enter the item price: \r\n    20\r\n    Enter the item quantity: \r\n    5\r\n    \r\n    Item 2\r\n    Enter the item name: \r\n    item 2\r\n    Enter the item price: \r\n    2\r\n    Enter the item quantity: \r\n    10\r\n    \r\n    TOTAL COST\r\n    item 1 5 @ $20 = $100\r\n    item 2 10 @ $2 = $20\r\n    \r\n    Total: $120\r\n\r\nYou had misplaced brackets. Once i fixed it this works. Please make sure you use an IDE and not zybooks \r\n\r\n    import java.util.Scanner;\r\n    \r\n    public class ShoppingCartPrinter {\r\n       //main method\r\n       public static void main(String[] args) {\r\n          //create object of scanner\r\n          Scanner scnr = new Scanner(System.in);\r\n          //variable declaration\r\n          int i = 0;\r\n          String productName;\r\n          int productPrice = 0;\r\n          int productQuantity = 0;\r\n          int cartTotal = 0;\r\n    \r\n          ItemToPurchase item1 = new ItemToPurchase();\r\n          ItemToPurchase item2 = new ItemToPurchase();\r\n    \r\n          //get item 1 details\r\n          System.out.println(&quot;Item 1&quot;);\r\n    \r\n          System.out.println(&quot;Enter the item name: &quot;);\r\n          productName = scnr.nextLine();\r\n          item1.setName(productName);\r\n    \r\n          System.out.println(&quot;Enter the item price: &quot;);\r\n          productPrice = scnr.nextInt();\r\n          item1.setPrice(productPrice);\r\n    \r\n          System.out.println(&quot;Enter the item quantity: &quot;);\r\n          productQuantity = scnr.nextInt();\r\n          item1.setQuantity(productQuantity);\r\n    \r\n          scnr.nextLine();\r\n          System.out.println(&quot;&quot;);\r\n    \r\n          //get item 2 details\r\n          System.out.println(&quot;Item 2&quot;);\r\n    \r\n          System.out.println(&quot;Enter the item name: &quot;);\r\n          productName = scnr.nextLine();\r\n          item2.setName(productName);\r\n    \r\n          System.out.println(&quot;Enter the item price: &quot;);\r\n          productPrice = scnr.nextInt();\r\n          item2.setPrice(productPrice);\r\n    \r\n          System.out.println(&quot;Enter the item quantity: &quot;);\r\n          productQuantity = scnr.nextInt();\r\n          item2.setQuantity(productQuantity);\r\n    \r\n          System.out.println(&quot;&quot;);\r\n    \r\n          //add cost of item 1 and 2 and print total\r\n          cartTotal = (item1.getQuantity() * item1.getPrice()) + (item2.getQuantity() * item2.getPrice());\r\n          System.out.println(&quot;TOTAL COST&quot;);\r\n          //cart total is item 1 price * quantity + item 2 price * quantity\r\n          //item 1 info\r\n          int item1Total = item1.getPrice() * item1.getQuantity();\r\n          System.out.println(item1.getName() + &quot; &quot; + item1.getQuantity() + &quot; @ $&quot; + item1.getPrice() + &quot; = $&quot; + item1Total);\r\n    \r\n          //item 2 info\r\n          int item2Total = item2.getPrice() * item2.getQuantity();\r\n          System.out.println(item2.getName() + &quot; &quot; + item2.getQuantity() + &quot; @ $&quot; + item2.getPrice() + &quot; = $&quot; + item2Total);\r\n    \r\n          //output total\r\n          System.out.println(&quot;&quot;);\r\n          System.out.print(&quot;Total: $&quot; + cartTotal);\r\n    \r\n       }\r\n    \r\n       public static class ItemToPurchase {\r\n          //Private fields - itemName, itemPrice, and itemQuanity\r\n          private String itemName;\r\n          private int itemPrice;\r\n          private int itemQuantity;\r\n    \r\n          //Default Constructor\r\n          public ItemToPurchase() {\r\n             itemName = &quot;none&quot;;\r\n             itemPrice = 0;\r\n             itemQuantity = 0;\r\n          }\r\n    \r\n          //public member methods\r\n          public void setName(String itemName) {\r\n             this.itemName = itemName;\r\n          }\r\n    \r\n          public String getName() {\r\n             return itemName;\r\n          }\r\n    \r\n          public void setPrice(int itemPrice) {\r\n             this.itemPrice = itemPrice;\r\n          }\r\n    \r\n          public int getPrice() {\r\n             return itemPrice;\r\n          }\r\n    \r\n          public void setQuantity(int itemQuantity) {\r\n             this.itemQuantity = itemQuantity;\r\n          }\r\n    \r\n          public int getQuantity() {\r\n             return itemQuantity;\r\n          }\r\n    \r\n          public void printItemPurchase() {\r\n             System.out.println(itemQuantity + &quot; &quot; + itemName + &quot; $&quot; + itemPrice +\r\n                     &quot; = $&quot; + (itemPrice * itemQuantity));\r\n          }\r\n       }\r\n    }","title":"online shopping cart parsing error in java","body":"<p>Problem 1: You problem is that the next int doesn't consider the new line character which goes in the input for your next read. Hence name is returned as blank.</p>\n<p>Problem 2: You are assigning String to a int. refer: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#parseInt-java.lang.String-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/lang/Integer.html#parseInt-java.lang.String-</a></p>\n<p>The following code works fine for me:\nShoppingCartPrinter.java</p>\n<pre><code>  import java.util.Scanner;\n  \n  public class ShoppingCartPrinter{\n     //main method\n     public static void main(String[] args){\n        //create object of scanner\n        Scanner scnr = new Scanner(System.in);\n        //variable declaration\n        int i = 0;\n        String productName;\n        int productPrice = 0;\n        int productQuantity = 0;\n        int cartTotal = 0;\n        \n        ItemToPurchase item1 = new ItemToPurchase();\n        ItemToPurchase item2 = new ItemToPurchase();\n        \n        //get item 1 details\n        System.out.println(&quot;Item 1&quot;);\n        \n        System.out.println(&quot;Enter the item name: &quot;);\n        productName = scnr.nextLine();\n        item1.setName(productName);\n        \n        System.out.println(&quot;Enter the item price: &quot;);\n        productPrice = scnr.nextInt();\n        item1.setPrice(productPrice);\n        \n        System.out.println(&quot;Enter the item quantity: &quot;);\n        productQuantity = scnr.nextInt();\n        item1.setQuantity(productQuantity);\n        \n        scnr.nextLine();\n        System.out.println(&quot;&quot;);\n        \n        //get item 2 details\n        System.out.println(&quot;Item 2&quot;);\n        \n        System.out.println(&quot;Enter the item name: &quot;);\n        productName = scnr.nextLine();\n        item2.setName(productName);\n        \n        System.out.println(&quot;Enter the item price: &quot;);\n        productPrice = scnr.nextInt();\n        item2.setPrice(productPrice);\n        \n        System.out.println(&quot;Enter the item quantity: &quot;);\n        productQuantity = scnr.nextInt();\n        item2.setQuantity(productQuantity);\n        \n        System.out.println(&quot;&quot;);\n        \n        //add cost of item 1 and 2 and print total\n        cartTotal = (item1.getQuantity() * item1.getPrice()) + (item2.getQuantity() * item2.getPrice());\n        System.out.println(&quot;TOTAL COST&quot;);\n        //cart total is item 1 price * quantity + item 2 price * quantity\n        //item 1 info\n        int item1Total = item1.getPrice() * item1.getQuantity();\n        System.out.println(item1.getName() + &quot; &quot; + item1.getQuantity() + &quot; @ $&quot; + item1.getPrice() + &quot; = $&quot; + item1Total);\n        \n        //item 2 info\n        int item2Total = item2.getPrice() * item2.getQuantity();\n        System.out.println(item2.getName() + &quot; &quot; + item2.getQuantity() + &quot; @ $&quot; + item2.getPrice() + &quot; = $&quot; + item2Total);\n     \n        //output total\n        System.out.println(&quot;&quot;);\n        System.out.print(&quot;Total: $&quot; + cartTotal);\n        \n     }\n  }\n</code></pre>\n<p>ItemsToPruchase.java</p>\n<pre><code>    public class ItemToPurchase {\n        //Private fields - itemName, itemPrice, and itemQuanity\n        private String itemName;\n        private int itemPrice;\n        private int itemQuantity;\n    \n        //Default Constructor\n        public ItemToPurchase() {\n            itemName = &quot;none&quot;;\n            itemPrice = 0;\n            itemQuantity = 0;\n        }\n    \n        //public member methods\n        public void setName(String itemName) {\n            this.itemName = itemName;\n        }\n    \n        public String getName() {\n            return itemName;\n        }\n    \n        public void setPrice(int itemPrice) {\n            this.itemPrice = itemPrice;\n        }\n    \n        public int getPrice() {\n            return itemPrice;\n        }\n    \n        public void setQuantity(int itemQuantity) {\n            this.itemQuantity = itemQuantity;\n        }\n    \n        public int getQuantity() {\n            return itemQuantity;\n        }\n    \n        public void printItemPurchase() {\n            System.out.println(itemQuantity + &quot; &quot; + itemName + &quot; $&quot; + itemPrice +\n                    &quot; = $&quot; + (itemPrice * itemQuantity));\n        }\n    }\n</code></pre>\n<p>Output :</p>\n<pre><code>Item 1\nEnter the item name: \nitem 1\nEnter the item price: \n20\nEnter the item quantity: \n5\n\nItem 2\nEnter the item name: \nitem 2\nEnter the item price: \n2\nEnter the item quantity: \n10\n\nTOTAL COST\nitem 1 5 @ $20 = $100\nitem 2 10 @ $2 = $20\n\nTotal: $120\n</code></pre>\n<p>You had misplaced brackets. Once i fixed it this works. Please make sure you use an IDE and not zybooks</p>\n<pre><code>import java.util.Scanner;\n\npublic class ShoppingCartPrinter {\n   //main method\n   public static void main(String[] args) {\n      //create object of scanner\n      Scanner scnr = new Scanner(System.in);\n      //variable declaration\n      int i = 0;\n      String productName;\n      int productPrice = 0;\n      int productQuantity = 0;\n      int cartTotal = 0;\n\n      ItemToPurchase item1 = new ItemToPurchase();\n      ItemToPurchase item2 = new ItemToPurchase();\n\n      //get item 1 details\n      System.out.println(&quot;Item 1&quot;);\n\n      System.out.println(&quot;Enter the item name: &quot;);\n      productName = scnr.nextLine();\n      item1.setName(productName);\n\n      System.out.println(&quot;Enter the item price: &quot;);\n      productPrice = scnr.nextInt();\n      item1.setPrice(productPrice);\n\n      System.out.println(&quot;Enter the item quantity: &quot;);\n      productQuantity = scnr.nextInt();\n      item1.setQuantity(productQuantity);\n\n      scnr.nextLine();\n      System.out.println(&quot;&quot;);\n\n      //get item 2 details\n      System.out.println(&quot;Item 2&quot;);\n\n      System.out.println(&quot;Enter the item name: &quot;);\n      productName = scnr.nextLine();\n      item2.setName(productName);\n\n      System.out.println(&quot;Enter the item price: &quot;);\n      productPrice = scnr.nextInt();\n      item2.setPrice(productPrice);\n\n      System.out.println(&quot;Enter the item quantity: &quot;);\n      productQuantity = scnr.nextInt();\n      item2.setQuantity(productQuantity);\n\n      System.out.println(&quot;&quot;);\n\n      //add cost of item 1 and 2 and print total\n      cartTotal = (item1.getQuantity() * item1.getPrice()) + (item2.getQuantity() * item2.getPrice());\n      System.out.println(&quot;TOTAL COST&quot;);\n      //cart total is item 1 price * quantity + item 2 price * quantity\n      //item 1 info\n      int item1Total = item1.getPrice() * item1.getQuantity();\n      System.out.println(item1.getName() + &quot; &quot; + item1.getQuantity() + &quot; @ $&quot; + item1.getPrice() + &quot; = $&quot; + item1Total);\n\n      //item 2 info\n      int item2Total = item2.getPrice() * item2.getQuantity();\n      System.out.println(item2.getName() + &quot; &quot; + item2.getQuantity() + &quot; @ $&quot; + item2.getPrice() + &quot; = $&quot; + item2Total);\n\n      //output total\n      System.out.println(&quot;&quot;);\n      System.out.print(&quot;Total: $&quot; + cartTotal);\n\n   }\n\n   public static class ItemToPurchase {\n      //Private fields - itemName, itemPrice, and itemQuanity\n      private String itemName;\n      private int itemPrice;\n      private int itemQuantity;\n\n      //Default Constructor\n      public ItemToPurchase() {\n         itemName = &quot;none&quot;;\n         itemPrice = 0;\n         itemQuantity = 0;\n      }\n\n      //public member methods\n      public void setName(String itemName) {\n         this.itemName = itemName;\n      }\n\n      public String getName() {\n         return itemName;\n      }\n\n      public void setPrice(int itemPrice) {\n         this.itemPrice = itemPrice;\n      }\n\n      public int getPrice() {\n         return itemPrice;\n      }\n\n      public void setQuantity(int itemQuantity) {\n         this.itemQuantity = itemQuantity;\n      }\n\n      public int getQuantity() {\n         return itemQuantity;\n      }\n\n      public void printItemPurchase() {\n         System.out.println(itemQuantity + &quot; &quot; + itemName + &quot; $&quot; + itemPrice +\n                 &quot; = $&quot; + (itemPrice * itemQuantity));\n      }\n   }\n}\n</code></pre>\n"}],"owner":{"account_id":29042067,"reputation":31,"user_id":22246732,"display_name":"Joshua Pelkey"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":154,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77182025,"answer_count":2,"score":2,"last_activity_date":1695749499,"creation_date":1695744169,"question_id":77181663,"body_markdown":"I&#39;m struggling with a lab in my school work. I keep getting an error: \r\nShoppingCartPrinter.java:29: error: reached end of file while parsing\r\n   }\r\n    ^\r\n1 error\r\n\r\nI have looked over my code and I don&#39;t see where I missed any curly brackets. \r\n\r\nHere is the lab details.\r\n\r\nCreate a program using classes that does the following in the zyLabs developer below. For this lab, you will be working with two different class files. To switch files, look for where it says &quot;Current File&quot; at the top of the developer window. Click the current file name, then select the file you need.\r\n\r\n(1) Create two files to submit:\r\n\r\nItemToPurchase.java - Class definition\r\nShoppingCartPrinter.java - Contains main() method\r\nBuild the ItemToPurchase class with the following specifications:\r\n\r\nPrivate fields\r\n- String itemName - Initialized in default constructor to &quot;none&quot;\r\n- int itemPrice - Initialized in default constructor to 0\r\n- int itemQuantity - Initialized in default constructor to 0\r\n\r\nDefault constructor\r\n\r\nPublic member methods (mutators &amp; accessors)\r\n- setName() &amp; getName() (2 pts)\r\n- setPrice() &amp; getPrice() (2 pts)\r\n- setQuantity() &amp; getQuantity() (2 pts)\r\n\r\n(2) In main(), prompt the user for two items and create two objects of the ItemToPurchase class. Before prompting for the second item, call scnr.nextLine(); to allow the user to input a new string. (2 pts)\r\n\r\nEx:\r\nItem 1\r\nEnter the item name: Chocolate Chips\r\nEnter the item price: 3\r\nEnter the item quantity: 1\r\n\r\nItem 2\r\nEnter the item name: Bottled Water\r\nEnter the item price: 1\r\nEnter the item quantity: 10\r\n(3) Add the costs of the two items together and output the total cost. (2 pts)\r\n\r\nEx:\r\n\r\nTOTAL COST\r\nChocolate Chips 1 @ $3 = $3\r\nBottled Water 10 @ $1 = $10\r\n\r\nTotal: $13\r\n\r\nHere is my code:\r\n\r\nShoppingCartPrinter\r\n```\r\nimport java.until.Scanner; \r\n\r\npublic class ShoppingCartPrinter{\r\n   //main method\r\n   public static void main(String[] args){\r\n      //create object of scanner\r\n      Scanner scnr = new Scanner(System.in);\r\n      //variable declaration\r\n      int i = 0;\r\n      String productName;\r\n      int productPrice = 0;\r\n      int productQuantity = 0;\r\n      int cartTotal = 0;\r\n      \r\n      ItemToPurchase item1 = new ItemToPurchase();\r\n      ItemToPurchase item2 = new ItemToPurchase();\r\n      \r\n      //get item 1 details\r\n      System.out.println(&quot;Item 1&quot;);\r\n      \r\n      System.out.println(&quot;Enter the item name: &quot;);\r\n      productName = scnr.nextLine();\r\n      item1.setName(productName);\r\n      \r\n      System.out.println(&quot;Enter the item price: &quot;);\r\n      productPrice = scnr.nextInt();\r\n      item1.setPrice(productPrice);\r\n      scnr.nextLine();\r\n      \r\n      System.out.println(&quot;Enter the item quantity: &quot;);\r\n      productQuantity = scnr.nextInt();\r\n      item1.setQuantity(productQuantity);\r\n      scnr.nextLine();\r\n      \r\n      scnr.nextLine();\r\n      System.out.println(&quot;&quot;);\r\n      \r\n      //get item 2 details\r\n      System.out.println(&quot;Item 2&quot;);\r\n      \r\n      System.out.println(&quot;Enter the item name: &quot;);\r\n      productName = scnr.nextLine();\r\n      item2.setName(productName);\r\n      \r\n      System.out.println(&quot;Enter the item price: &quot;);\r\n      productPrice = scnr.nextInt();\r\n      item2.setPrice(productPrice);\r\n      scnr.nextLine();\r\n      \r\n      System.out.println(&quot;Enter the item quantity: &quot;);\r\n      productQuantity = scnr.nextInt();\r\n      item2.setQuantity(productQuantity);\r\n      scnr.nextLine();\r\n      \r\n      System.out.println(&quot;&quot;);\r\n      \r\n      //add cost of item 1 and 2 and print total\r\n      cartTotal = (item1.getQuantity() * item1.getPrice()) + (item2.getQuantity() * item2.getPrice());\r\n      System.out.println(&quot;TOTAL COST&quot;);\r\n      //cart total is item 1 price * quantity + item 2 price * quantity\r\n      //item 1 info\r\n      int item1Total = item1.getPrice() * item1.getQuantity();\r\n      System.out.println(item1.getName() + &quot; &quot; + item1.getQuantity() + &quot; @ $&quot; + item1.getPrice() + &quot; = $&quot; + item1Total);\r\n      \r\n      //item 2 info\r\n      int item2Total = item2.getPrice() * item2.getQuantity();\r\n      System.out.println(item2.getName() + &quot; &quot; + item2.getQuantity() + &quot; @ $&quot; + item2.getPrice() + &quot; = $&quot; + item2Total);\r\n   \r\n      //output total\r\n      System.out.println(&quot;&quot;);\r\n      System.out.print(&quot;Total: $&quot; + cartTotal);\r\n      \r\n   }\r\n}\r\n```\r\nItemsToPurchase\r\n```\r\npublic class ItemToPurchase {\r\n   //Private fields - itemName, itemPrice, and itemQuanity\r\n   private String itemName;\r\n   private int itemPrice;\r\n   private int itemQuantity;\r\n   //Default Constructor\r\n   public ItemToPurchase(){\r\n      itemName = &quot;none&quot;;\r\n      itemPrice = 0;\r\n      itemQuantity = 0;\r\n   }       \r\n   //public member methods\r\n   public void setName(String itemName){\r\n      this.itemName = itemName;\r\n   }\r\n   public String getName(){\r\n      return itemName;\r\n   }\r\n   public void setPrice(int itemPrice){\r\n      this.itemPrice = itemPrice;\r\n   }\r\n   public int getPrice(){\r\n      return itemPrice;\r\n   }\r\n   public void setQuantity(int itemQuantity){\r\n      this.itemQuantity = itemQuantity;\r\n   }\r\n   public int getQuantity(){\r\n      return itemQuantity;\r\n   }\r\n   \r\n   public void printItemPurchase() {\r\n      System.out.println(itemQuantity + &quot; &quot; + itemName + &quot; $&quot; + itemPrice +  \r\n                         &quot; = $&quot; + (itemPrice * itemQuantity));\r\n   }\r\n}\r\n```","title":"online shopping cart parsing error in java","body":"<p>I'm struggling with a lab in my school work. I keep getting an error:\nShoppingCartPrinter.java:29: error: reached end of file while parsing\n}\n^\n1 error</p>\n<p>I have looked over my code and I don't see where I missed any curly brackets.</p>\n<p>Here is the lab details.</p>\n<p>Create a program using classes that does the following in the zyLabs developer below. For this lab, you will be working with two different class files. To switch files, look for where it says &quot;Current File&quot; at the top of the developer window. Click the current file name, then select the file you need.</p>\n<p>(1) Create two files to submit:</p>\n<p>ItemToPurchase.java - Class definition\nShoppingCartPrinter.java - Contains main() method\nBuild the ItemToPurchase class with the following specifications:</p>\n<p>Private fields</p>\n<ul>\n<li>String itemName - Initialized in default constructor to &quot;none&quot;</li>\n<li>int itemPrice - Initialized in default constructor to 0</li>\n<li>int itemQuantity - Initialized in default constructor to 0</li>\n</ul>\n<p>Default constructor</p>\n<p>Public member methods (mutators &amp; accessors)</p>\n<ul>\n<li>setName() &amp; getName() (2 pts)</li>\n<li>setPrice() &amp; getPrice() (2 pts)</li>\n<li>setQuantity() &amp; getQuantity() (2 pts)</li>\n</ul>\n<p>(2) In main(), prompt the user for two items and create two objects of the ItemToPurchase class. Before prompting for the second item, call scnr.nextLine(); to allow the user to input a new string. (2 pts)</p>\n<p>Ex:\nItem 1\nEnter the item name: Chocolate Chips\nEnter the item price: 3\nEnter the item quantity: 1</p>\n<p>Item 2\nEnter the item name: Bottled Water\nEnter the item price: 1\nEnter the item quantity: 10\n(3) Add the costs of the two items together and output the total cost. (2 pts)</p>\n<p>Ex:</p>\n<p>TOTAL COST\nChocolate Chips 1 @ $3 = $3\nBottled Water 10 @ $1 = $10</p>\n<p>Total: $13</p>\n<p>Here is my code:</p>\n<p>ShoppingCartPrinter</p>\n<pre><code>import java.until.Scanner; \n\npublic class ShoppingCartPrinter{\n   //main method\n   public static void main(String[] args){\n      //create object of scanner\n      Scanner scnr = new Scanner(System.in);\n      //variable declaration\n      int i = 0;\n      String productName;\n      int productPrice = 0;\n      int productQuantity = 0;\n      int cartTotal = 0;\n      \n      ItemToPurchase item1 = new ItemToPurchase();\n      ItemToPurchase item2 = new ItemToPurchase();\n      \n      //get item 1 details\n      System.out.println(&quot;Item 1&quot;);\n      \n      System.out.println(&quot;Enter the item name: &quot;);\n      productName = scnr.nextLine();\n      item1.setName(productName);\n      \n      System.out.println(&quot;Enter the item price: &quot;);\n      productPrice = scnr.nextInt();\n      item1.setPrice(productPrice);\n      scnr.nextLine();\n      \n      System.out.println(&quot;Enter the item quantity: &quot;);\n      productQuantity = scnr.nextInt();\n      item1.setQuantity(productQuantity);\n      scnr.nextLine();\n      \n      scnr.nextLine();\n      System.out.println(&quot;&quot;);\n      \n      //get item 2 details\n      System.out.println(&quot;Item 2&quot;);\n      \n      System.out.println(&quot;Enter the item name: &quot;);\n      productName = scnr.nextLine();\n      item2.setName(productName);\n      \n      System.out.println(&quot;Enter the item price: &quot;);\n      productPrice = scnr.nextInt();\n      item2.setPrice(productPrice);\n      scnr.nextLine();\n      \n      System.out.println(&quot;Enter the item quantity: &quot;);\n      productQuantity = scnr.nextInt();\n      item2.setQuantity(productQuantity);\n      scnr.nextLine();\n      \n      System.out.println(&quot;&quot;);\n      \n      //add cost of item 1 and 2 and print total\n      cartTotal = (item1.getQuantity() * item1.getPrice()) + (item2.getQuantity() * item2.getPrice());\n      System.out.println(&quot;TOTAL COST&quot;);\n      //cart total is item 1 price * quantity + item 2 price * quantity\n      //item 1 info\n      int item1Total = item1.getPrice() * item1.getQuantity();\n      System.out.println(item1.getName() + &quot; &quot; + item1.getQuantity() + &quot; @ $&quot; + item1.getPrice() + &quot; = $&quot; + item1Total);\n      \n      //item 2 info\n      int item2Total = item2.getPrice() * item2.getQuantity();\n      System.out.println(item2.getName() + &quot; &quot; + item2.getQuantity() + &quot; @ $&quot; + item2.getPrice() + &quot; = $&quot; + item2Total);\n   \n      //output total\n      System.out.println(&quot;&quot;);\n      System.out.print(&quot;Total: $&quot; + cartTotal);\n      \n   }\n}\n</code></pre>\n<p>ItemsToPurchase</p>\n<pre><code>public class ItemToPurchase {\n   //Private fields - itemName, itemPrice, and itemQuanity\n   private String itemName;\n   private int itemPrice;\n   private int itemQuantity;\n   //Default Constructor\n   public ItemToPurchase(){\n      itemName = &quot;none&quot;;\n      itemPrice = 0;\n      itemQuantity = 0;\n   }       \n   //public member methods\n   public void setName(String itemName){\n      this.itemName = itemName;\n   }\n   public String getName(){\n      return itemName;\n   }\n   public void setPrice(int itemPrice){\n      this.itemPrice = itemPrice;\n   }\n   public int getPrice(){\n      return itemPrice;\n   }\n   public void setQuantity(int itemQuantity){\n      this.itemQuantity = itemQuantity;\n   }\n   public int getQuantity(){\n      return itemQuantity;\n   }\n   \n   public void printItemPurchase() {\n      System.out.println(itemQuantity + &quot; &quot; + itemName + &quot; $&quot; + itemPrice +  \n                         &quot; = $&quot; + (itemPrice * itemQuantity));\n   }\n}\n</code></pre>\n"},{"tags":["java","qr-code","thermal-printer","escpos"],"owner":{"account_id":29539121,"reputation":1,"user_id":22638170,"display_name":"Douglas Caruso"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":66,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695749332,"creation_date":1695747363,"question_id":77182034,"body_markdown":"I need to print a QR code on a Bematech MP-4200 ADV printer using ESC/POS commands. When I print it from my system, the printing works correctly. However, when the client tries to use it, the QR code printing is flawed, even though they are using the same printer model and drivers.\r\n\r\nThe URL to be printed is something like this (I replaced some numbers with X for company data security), but it only encodes in the QR code up to the 60th character. After that, it appears as text:\r\n\r\n`http://nfce.set.rn.gov.br/consultarNFCe.aspx?p=242309XXXXX9040001XXXXXXXXXXXXXXXXXXXXXXXXXX|2|1|2|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`\r\n\r\nIncomplete QR code printed with the rest of the text at the top:\r\n[![Incomplete QR code printed with the rest of the text at the top][1]][1]\r\n\r\nHowever, if I print the URL:\r\n\r\n`http://nfce.set.rn.gov.br/consultarNFCe.aspx?p=242309XXXXX9040001XXXXXXXXXXXXXXXXXXXXXXXXXX|2|1|14|3.60|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|2|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX`\r\n\r\nwhich is longer, it prints correctly.\r\n\r\nMy code to generate the QR Code:\r\n\r\n```\r\nint qrLen = url.length() + 3;\r\n\r\nchar ph = (char) (qrLen / 256);\r\nchar pl = (char) (qrLen % 256);\r\n\r\nString qrCode = &quot;&quot; + (char) 29 + (char) 40 + (char) 107 + (char) 4 + (char) 0 + (char) 49 + (char) 65 + (char) 50 + (char) 0 +\r\n        (char) 29 + (char) 40 + (char) 107 + (char) 3 + (char) 0 + (char) 49 + (char) 67 + (char) size +\r\n        (char) 29 + (char) 40 + (char) 107 + (char) 3 + (char) 0 + (char) 49 + (char) 69 + (char) 49 +\r\n        (char) 29 + (char) 40 + (char) 107 + (char) pl + ph + (char) 49 + (char) 80 + (char) 48 + url +\r\n        (char) 29 + (char) 40 + (char) 107 + (char) 3 + (char) 0 + (char) 49 + (char) 81 + (char) 48;\r\nreturn qrCode;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/6a0Mw.png","title":"Printing a QRCode using ESC/POS - Bematech MP-4200","body":"<p>I need to print a QR code on a Bematech MP-4200 ADV printer using ESC/POS commands. When I print it from my system, the printing works correctly. However, when the client tries to use it, the QR code printing is flawed, even though they are using the same printer model and drivers.</p>\n<p>The URL to be printed is something like this (I replaced some numbers with X for company data security), but it only encodes in the QR code up to the 60th character. After that, it appears as text:</p>\n<p><code>http://nfce.set.rn.gov.br/consultarNFCe.aspx?p=242309XXXXX9040001XXXXXXXXXXXXXXXXXXXXXXXXXX|2|1|2|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</code></p>\n<p>Incomplete QR code printed with the rest of the text at the top:\n<a href=\"https://i.stack.imgur.com/6a0Mw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6a0Mw.png\" alt=\"Incomplete QR code printed with the rest of the text at the top\" /></a></p>\n<p>However, if I print the URL:</p>\n<p><code>http://nfce.set.rn.gov.br/consultarNFCe.aspx?p=242309XXXXX9040001XXXXXXXXXXXXXXXXXXXXXXXXXX|2|1|14|3.60|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX|2|XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX</code></p>\n<p>which is longer, it prints correctly.</p>\n<p>My code to generate the QR Code:</p>\n<pre><code>int qrLen = url.length() + 3;\n\nchar ph = (char) (qrLen / 256);\nchar pl = (char) (qrLen % 256);\n\nString qrCode = &quot;&quot; + (char) 29 + (char) 40 + (char) 107 + (char) 4 + (char) 0 + (char) 49 + (char) 65 + (char) 50 + (char) 0 +\n        (char) 29 + (char) 40 + (char) 107 + (char) 3 + (char) 0 + (char) 49 + (char) 67 + (char) size +\n        (char) 29 + (char) 40 + (char) 107 + (char) 3 + (char) 0 + (char) 49 + (char) 69 + (char) 49 +\n        (char) 29 + (char) 40 + (char) 107 + (char) pl + ph + (char) 49 + (char) 80 + (char) 48 + url +\n        (char) 29 + (char) 40 + (char) 107 + (char) 3 + (char) 0 + (char) 49 + (char) 81 + (char) 48;\nreturn qrCode;\n</code></pre>\n"},{"tags":["java","spring","spring-boot","unit-testing","mockito"],"comments":[{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695749475,"post_id":77182155,"comment_id":136065122,"body_markdown":"Stop using outdated classes like `SimpleDateFormat` or `java.util.Date`. move ower to the newer `java.time.*` API","body":"Stop using outdated classes like <code>SimpleDateFormat</code> or <code>java.util.Date</code>. move ower to the newer <code>java.time.*</code> API"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695749600,"post_id":77182155,"comment_id":136065154,"body_markdown":"Have you tried to print out the `currentTimeStamp to see what is wrong?","body":"Have you tried to print out the `currentTimeStamp to see what is wrong?"},{"owner":{"account_id":4470050,"reputation":68258,"user_id":3636601,"accept_rate":75,"display_name":"Jens"},"score":0,"creation_date":1695750012,"post_id":77182155,"comment_id":136065222,"body_markdown":"BTW: As I know the fixed clock only works with the `java.time` API","body":"BTW: As I know the fixed clock only works with the <code>java.time</code> API"},{"owner":{"account_id":7903652,"reputation":17,"user_id":5969902,"display_name":"Ahmed Tharwat"},"score":0,"creation_date":1695789920,"post_id":77182155,"comment_id":136069669,"body_markdown":"Hello @Jens, yes I did try to print the ```currentTimeStamp``` and it always returns the time that the test runs at. I&#39;ll try to apply your changes and see if it works. Thanks a lot!","body":"Hello @Jens, yes I did try to print the <code>currentTimeStamp</code> and it always returns the time that the test runs at. I&#39;ll try to apply your changes and see if it works. Thanks a lot!"}],"answers":[{"comments":[{"owner":{"account_id":7903652,"reputation":17,"user_id":5969902,"display_name":"Ahmed Tharwat"},"score":1,"creation_date":1695789985,"post_id":77182225,"comment_id":136069677,"body_markdown":"Hello @Dennis, \nThank you so much for your suggestion, I&#39;ll try to do so and see if that works. :)","body":"Hello @Dennis,  Thank you so much for your suggestion, I&#39;ll try to do so and see if that works. :)"}],"tags":[],"owner":{"account_id":1601811,"reputation":453,"user_id":1482699,"display_name":"Dennis"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695749316,"creation_date":1695749316,"answer_id":77182225,"question_id":77182155,"body_markdown":"While it&#39;s technically possible to change all ways the JVM retrieves time, I&#39;d advise against it. Altering such fundamental behavior can lead to unpredictable results, make your code harder to understand for others, and introduce potential bugs or issues in areas you might not expect. It&#39;s generally a good practice to avoid modifying global or static states, especially for something as universal as time retrieval.\r\n\r\nThat said, if you&#39;re curious about the concept, you might want to look into &quot;static method mocking&quot; for some examples. But remember, just because you can, doesn&#39;t always mean you should.\r\n\r\nRegarding your line `Instant.now(Clock.fixed(Instant.parse(expectedNow), ZoneOffset.UTC))`, it&#39;s essentially creating a new instance with the specified clock, but it doesn&#39;t alter the JVM&#39;s default behavior. A better approach might be to pass the clock to your `LogUtils.formatTimestamp()` method. If you&#39;re using Spring, you could create your own clock provider as a component. Alternatively, you could design a static class with a setter specifically for your tests.\r\n\r\nHope this helps and happy coding! &#128522;","title":"How to mock the system clock for tests in spring boot applications?","body":"<p>While it's technically possible to change all ways the JVM retrieves time, I'd advise against it. Altering such fundamental behavior can lead to unpredictable results, make your code harder to understand for others, and introduce potential bugs or issues in areas you might not expect. It's generally a good practice to avoid modifying global or static states, especially for something as universal as time retrieval.</p>\n<p>That said, if you're curious about the concept, you might want to look into &quot;static method mocking&quot; for some examples. But remember, just because you can, doesn't always mean you should.</p>\n<p>Regarding your line <code>Instant.now(Clock.fixed(Instant.parse(expectedNow), ZoneOffset.UTC))</code>, it's essentially creating a new instance with the specified clock, but it doesn't alter the JVM's default behavior. A better approach might be to pass the clock to your <code>LogUtils.formatTimestamp()</code> method. If you're using Spring, you could create your own clock provider as a component. Alternatively, you could design a static class with a setter specifically for your tests.</p>\n<p>Hope this helps and happy coding! </p>\n"}],"owner":{"account_id":7903652,"reputation":17,"user_id":5969902,"display_name":"Ahmed Tharwat"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":193,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695749316,"creation_date":1695748532,"question_id":77182155,"body_markdown":"I have the following static function:\r\n```\r\npublic static String formatTimestamp() {\r\n    TimeZone timeZone = TimeZone.getTimeZone(&quot;UTC&quot;);\r\n    DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd&#39;T&#39;HH:mm:ss.sss&#39;Z&#39;&quot;);\r\n    dateFormat.setTimeZone(timeZone);\r\n    return dateFormat.format(new Date());\r\n  }\r\n```\r\nI want to create a test that makes sure it works properly, and in order to do that, I believe I need to override the system&#39;s current time so that I can assert proper values.\r\n\r\nI created the following test class:\r\n```\r\n\r\nimport jakarta.servlet.http.HttpServletRequest;\r\nimport org.junit.jupiter.api.Test;\r\nimport org.junit.jupiter.api.extension.ExtendWith;\r\nimport org.mockito.Mock;\r\nimport org.mockito.junit.jupiter.MockitoExtension;\r\nimport org.slf4j.MDC;\r\n\r\n\r\nimport java.time.Clock;\r\nimport java.time.Instant;\r\nimport java.time.ZoneOffset;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n\r\nimport static org.junit.jupiter.api.Assertions.assertEquals;\r\nimport static org.mockito.Mockito.when;\r\n\r\n@ExtendWith(MockitoExtension.class)\r\nclass LogUtilsTest {\r\n\r\n  @Test\r\n  void test_Format_Timestamp_Success() {\r\n    String expectedNow = &quot;2023-09-26T12:00:00.000Z&quot;;\r\n    Instant.now(Clock.fixed(Instant.parse(expectedNow), ZoneOffset.UTC));\r\n\r\n    String currentTimeStamp = LogUtils.formatTimestamp();\r\n\r\n    assertEquals(expectedNow, currentTimeStamp);\r\n  }\r\n}\r\n```\r\nWhenever I run the test, it returns that the expected is not equal to the actual value, as the actual value equals the time when the test runs.\r\n\r\nI followed the following answers:\r\n\r\n - https://www.baeldung.com/java-override-system-time\r\n - https://stackoverflow.com/questions/2001671/override-java-system-currenttimemillis-for-testing-time-sensitive-code\r\n\r\nBut nothing works. Any idea what am I doing wrong?","title":"How to mock the system clock for tests in spring boot applications?","body":"<p>I have the following static function:</p>\n<pre><code>public static String formatTimestamp() {\n    TimeZone timeZone = TimeZone.getTimeZone(&quot;UTC&quot;);\n    DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy-MM-dd'T'HH:mm:ss.sss'Z'&quot;);\n    dateFormat.setTimeZone(timeZone);\n    return dateFormat.format(new Date());\n  }\n</code></pre>\n<p>I want to create a test that makes sure it works properly, and in order to do that, I believe I need to override the system's current time so that I can assert proper values.</p>\n<p>I created the following test class:</p>\n<pre><code>\nimport jakarta.servlet.http.HttpServletRequest;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.Mock;\nimport org.mockito.junit.jupiter.MockitoExtension;\nimport org.slf4j.MDC;\n\n\nimport java.time.Clock;\nimport java.time.Instant;\nimport java.time.ZoneOffset;\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.mockito.Mockito.when;\n\n@ExtendWith(MockitoExtension.class)\nclass LogUtilsTest {\n\n  @Test\n  void test_Format_Timestamp_Success() {\n    String expectedNow = &quot;2023-09-26T12:00:00.000Z&quot;;\n    Instant.now(Clock.fixed(Instant.parse(expectedNow), ZoneOffset.UTC));\n\n    String currentTimeStamp = LogUtils.formatTimestamp();\n\n    assertEquals(expectedNow, currentTimeStamp);\n  }\n}\n</code></pre>\n<p>Whenever I run the test, it returns that the expected is not equal to the actual value, as the actual value equals the time when the test runs.</p>\n<p>I followed the following answers:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/java-override-system-time\" rel=\"nofollow noreferrer\">https://www.baeldung.com/java-override-system-time</a></li>\n<li><a href=\"https://stackoverflow.com/questions/2001671/override-java-system-currenttimemillis-for-testing-time-sensitive-code\">Override Java System.currentTimeMillis for testing time sensitive code</a></li>\n</ul>\n<p>But nothing works. Any idea what am I doing wrong?</p>\n"},{"tags":["java","jdbc"],"comments":[{"owner":{"account_id":5964120,"reputation":4275,"user_id":4688321,"display_name":"kiner_shah"},"score":3,"creation_date":1695632004,"post_id":77171148,"comment_id":136045247,"body_markdown":"Typo: `if(status=false)` -&gt; `if(status == false)`","body":"Typo: <code>if(status=false)</code> -&gt; <code>if(status == false)</code>"},{"owner":{"account_id":19118721,"reputation":6319,"user_id":13963086,"display_name":"k314159"},"score":2,"creation_date":1695632334,"post_id":77171148,"comment_id":136045332,"body_markdown":"What kiner_shah said above is the cause of your problem. However, you also need to read about the dangers of [SQL Injection](https://owasp.org/www-community/attacks/SQL_Injection).","body":"What kiner_shah said above is the cause of your problem. However, you also need to read about the dangers of <a href=\"https://owasp.org/www-community/attacks/SQL_Injection\" rel=\"nofollow noreferrer\">SQL Injection</a>."},{"owner":{"account_id":29527850,"reputation":1,"user_id":22629083,"display_name":"Ninad Danane"},"score":0,"creation_date":1695633103,"post_id":77171148,"comment_id":136045489,"body_markdown":"Tried that still the same...","body":"Tried that still the same..."},{"owner":{"account_id":3837639,"reputation":56,"user_id":3181598,"display_name":"n-n-nebbl"},"score":0,"creation_date":1695634743,"post_id":77171148,"comment_id":136045791,"body_markdown":"this code is missing the handling of the open connection --&gt; you should use the try-with-resource java feature (https://stackoverflow.com/questions/8066501/how-should-i-use-try-with-resources-with-jdbc)\n\nThen also no transaction is in use which can also lead to the mentioned issue.\nIf it is not using auto-commit you are never persisting anything to the database.","body":"this code is missing the handling of the open connection --&gt; you should use the try-with-resource java feature (<a href=\"https://stackoverflow.com/questions/8066501/how-should-i-use-try-with-resources-with-jdbc\" title=\"how should i use try with resources with jdbc\">stackoverflow.com/questions/8066501/&hellip;</a>)  Then also no transaction is in use which can also lead to the mentioned issue. If it is not using auto-commit you are never persisting anything to the database."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1695638519,"post_id":77171148,"comment_id":136046551,"body_markdown":"@n-n-nebbl auto-commit mode is the default of new connections created through `DriverManager` (technically, it is supposed to be the default of any connection, but some `DataSource` implementations allow you to configure a different default).","body":"@n-n-nebbl auto-commit mode is the default of new connections created through <code>DriverManager</code> (technically, it is supposed to be the default of any connection, but some <code>DataSource</code> implementations allow you to configure a different default)."},{"owner":{"account_id":17972905,"reputation":5290,"user_id":13061224,"display_name":"siggemannen"},"score":0,"creation_date":1695652120,"post_id":77171148,"comment_id":136049470,"body_markdown":"This code doesn&#39;t handle when your login_details table is empty. tbh, it doesn&#39;t make sense even with that fixed, so you might wanna go back to the drawing board and think about what you want to do. You should probably check if the entered values exist and if not exist then create new rows, but i have no idea","body":"This code doesn&#39;t handle when your login_details table is empty. tbh, it doesn&#39;t make sense even with that fixed, so you might wanna go back to the drawing board and think about what you want to do. You should probably check if the entered values exist and if not exist then create new rows, but i have no idea"}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":1,"creation_date":1695636070,"post_id":77171443,"comment_id":136046082,"body_markdown":"Don&#39;t `select *` either. Select the unique criteria - probably username and password. Then you can do `if(!rs.next())`, making &#39;status&#39; redundant","body":"Don&#39;t <code>select *</code> either. Select the unique criteria - probably username and password. Then you can do <code>if(!rs.next())</code>, making &#39;status&#39; redundant"}],"tags":[],"owner":{"account_id":24764960,"reputation":11,"user_id":18648894,"display_name":"bebo969"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695634133,"creation_date":1695634133,"answer_id":77171443,"question_id":77171148,"body_markdown":"There are logic and safety problems in the code.\r\n\r\nYou give value to the variable in the condition, instead of checking it. You should use:\r\n\r\n    if (!status){...}\r\n\r\nThe other thing that you should use PreparedStatement instead of Statement if datas come from the user. It is against of the sql injection attack. ","title":"There is no error but the data is not getting inserted into the database","body":"<p>There are logic and safety problems in the code.</p>\n<p>You give value to the variable in the condition, instead of checking it. You should use:</p>\n<pre><code>if (!status){...}\n</code></pre>\n<p>The other thing that you should use PreparedStatement instead of Statement if datas come from the user. It is against of the sql injection attack.</p>\n"},{"tags":[],"owner":{"account_id":9524880,"reputation":458,"user_id":7078384,"accept_rate":75,"display_name":"Fredy Fischer"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695749055,"creation_date":1695749055,"answer_id":77182203,"question_id":77171148,"body_markdown":"When I look at this code, it will insert more doubled entries, the more entries are in the table.\r\n\r\nI do not know, what you want to achieve while looping the content of the table and inserting the values one typed in.\r\n\r\nWhen I assume, you want to check if a user already exists, it is worth to check if the user is there, before inserting it.\r\n\r\nAnd I agree with all to use prepared statements. Try something like this:\r\n\r\n    Connection conn=null;\r\n    PreparedStatement reader=null;\r\n\tPreparedStatement writer=null\r\n\tResultSet rs=null;\r\n\t\r\n\tboolean userExists = false;\r\n    Scanner sc=new Scanner (System.in);\r\n    System.out.println(&quot;Enter Username&quot;);\r\n    String username=sc.next();\r\n    System.out.println(&quot;Enter Email&quot;);\r\n    String email=sc.next();\r\n    System.out.println(&quot;Enter Phone Number&quot;);\r\n    int phno=sc.nextInt();\r\n    System.out.println(&quot;Create a Password&quot;);\r\n    String password=sc.next();\r\n    \r\n    \r\n    try {\r\n        conn=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/sample&quot;,&quot;root&quot;,&quot;abc&quot;);\r\n        reader=conn.prepareStatement(&quot;select count(*) NumberOfUsers from login_details where user_name = ?&quot; );\t\t\r\n\t\treader.setString(1,username);\r\n\t\trs = reder.executeQuery();\r\n\t\tif ( rs.next() ) {\r\n\t\t   if ( rs.getInt(1) &gt; 0 ) {\r\n\t\t     userExists = true;\r\n\t\t\t System.out.println(&quot;Username already exists&quot;);\r\n\t\t   }\t \r\n\t\t}\r\n\t\t\r\n\t\tif ( ! userExists ) {\r\n            writer = conn.prepareStatement(&quot;insert into login_details(user_name,user_email,user_phone,user_password)values(?,?,?,?)&quot;);\r\n\t\t\twriter.setString(1,username);\r\n\t\t\twriter.setString(2,email);\r\n\t\t\twriter.setInt(3,phno);  // is it really integer?\r\n\t\t\twriter.setString(4,password);\r\n\t\t\t\r\n\t\t\twriter.executeUpdate();\r\n\t\t        \r\n        }\r\n        \r\n    } catch (SQLException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    } finally {\r\n\t    if ( reader ! = null ) {\r\n\t\t   try {\r\n\t\t      reader.close();\r\n\t\t   } catch ( SQLException s ) {\r\n\t\t      System.out.println(&quot;Error while closing reader &quot; + s.getMessage());\r\n\t\t   }\r\n\t\t}  \r\n\t\tif ( writer ! = null ) {\r\n\t\t   try {\r\n\t\t      writer.close();\r\n\t\t   } catch ( SQLException s ) {\r\n\t\t      System.out.println(&quot;Error while closing writer &quot; + s.getMessage());\r\n\t\t   }\r\n\t\t} \r\n        if ( rs ! = null ) {\r\n\t\t   try {\r\n\t\t      rs.close();\r\n\t\t   } catch ( SQLException s ) {\r\n\t\t      System.out.println(&quot;Error while closing ResultSet &quot; + s.getMessage());\r\n\t\t   }\r\n\t\t}\t\t\r\n\t\tif ( conn ! = null ) {\r\n\t\t   try {\r\n\t\t      conn.close();\r\n\t\t   } catch ( SQLException s ) {\r\n\t\t      System.out.println(&quot;Error while closing Connection &quot; + s.getMessage());\r\n\t\t   }\r\n\t\t}\r\n\t\t\r\n\t\r\n\t}\r\n\r\n","title":"There is no error but the data is not getting inserted into the database","body":"<p>When I look at this code, it will insert more doubled entries, the more entries are in the table.</p>\n<p>I do not know, what you want to achieve while looping the content of the table and inserting the values one typed in.</p>\n<p>When I assume, you want to check if a user already exists, it is worth to check if the user is there, before inserting it.</p>\n<p>And I agree with all to use prepared statements. Try something like this:</p>\n<pre><code>Connection conn=null;\nPreparedStatement reader=null;\nPreparedStatement writer=null\nResultSet rs=null;\n\nboolean userExists = false;\nScanner sc=new Scanner (System.in);\nSystem.out.println(&quot;Enter Username&quot;);\nString username=sc.next();\nSystem.out.println(&quot;Enter Email&quot;);\nString email=sc.next();\nSystem.out.println(&quot;Enter Phone Number&quot;);\nint phno=sc.nextInt();\nSystem.out.println(&quot;Create a Password&quot;);\nString password=sc.next();\n\n\ntry {\n    conn=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/sample&quot;,&quot;root&quot;,&quot;abc&quot;);\n    reader=conn.prepareStatement(&quot;select count(*) NumberOfUsers from login_details where user_name = ?&quot; );      \n    reader.setString(1,username);\n    rs = reder.executeQuery();\n    if ( rs.next() ) {\n       if ( rs.getInt(1) &gt; 0 ) {\n         userExists = true;\n         System.out.println(&quot;Username already exists&quot;);\n       }     \n    }\n    \n    if ( ! userExists ) {\n        writer = conn.prepareStatement(&quot;insert into login_details(user_name,user_email,user_phone,user_password)values(?,?,?,?)&quot;);\n        writer.setString(1,username);\n        writer.setString(2,email);\n        writer.setInt(3,phno);  // is it really integer?\n        writer.setString(4,password);\n        \n        writer.executeUpdate();\n            \n    }\n    \n} catch (SQLException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n} finally {\n    if ( reader ! = null ) {\n       try {\n          reader.close();\n       } catch ( SQLException s ) {\n          System.out.println(&quot;Error while closing reader &quot; + s.getMessage());\n       }\n    }  \n    if ( writer ! = null ) {\n       try {\n          writer.close();\n       } catch ( SQLException s ) {\n          System.out.println(&quot;Error while closing writer &quot; + s.getMessage());\n       }\n    } \n    if ( rs ! = null ) {\n       try {\n          rs.close();\n       } catch ( SQLException s ) {\n          System.out.println(&quot;Error while closing ResultSet &quot; + s.getMessage());\n       }\n    }       \n    if ( conn ! = null ) {\n       try {\n          conn.close();\n       } catch ( SQLException s ) {\n          System.out.println(&quot;Error while closing Connection &quot; + s.getMessage());\n       }\n    }\n    \n\n}\n</code></pre>\n"}],"owner":{"account_id":29527850,"reputation":1,"user_id":22629083,"display_name":"Ninad Danane"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695749055,"creation_date":1695631607,"question_id":77171148,"body_markdown":"I have a sql database into which i want to insert data. Below is my code .After executing the java program data dosen&#39;t get inserted into the database and neither an error occurs.\r\n\r\n\tConnection conn=null;\r\n\t\tStatement stmt=null;\r\n\t\tScanner sc=new Scanner (System.in);\r\n\t\tSystem.out.println(&quot;Enter Username&quot;);\r\n\t\tString username=sc.next();\r\n\t\tSystem.out.println(&quot;Enter Email&quot;);\r\n\t\tString email=sc.next();\r\n\t\tSystem.out.println(&quot;Enter Phone Number&quot;);\r\n\t\tint phno=sc.nextInt();\r\n\t\tSystem.out.println(&quot;Create a Password&quot;);\r\n\t\tString password=sc.next();\r\n\t\t\r\n\t\t\r\n\t\ttry {\r\n\t\t\tconn=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/sample&quot;,&quot;root&quot;,&quot;abc&quot;);\r\n\t\t\tstmt=conn.createStatement();\r\n\t\t\tString query1=&quot;select * from login_details&quot;;\r\n\t\t\tString query2=&quot;insert into login_details(user_name,user_email,user_phone,user_password)values(&#39;&quot;+username+&quot;&#39;,&#39;&quot;+email+&quot;&#39;,&#39;&quot;+phno+&quot;&#39;,&#39;&quot;+password+&quot;&#39;)&quot;;\r\n\t\t\tResultSet rs=stmt.executeQuery(query1);\r\n\t\t\tboolean status=false;\r\n\t\t\t\r\n\t\t\twhile(rs.next()) {\r\n\t\t\t\tif(status=false) {\r\n\t\t\t\t\tstmt.executeUpdate(query2);\r\n\t\t\t\t\tSystem.out.println(&quot;Details Entered Successfully&quot;);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t} catch (SQLException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}","title":"There is no error but the data is not getting inserted into the database","body":"<p>I have a sql database into which i want to insert data. Below is my code .After executing the java program data dosen't get inserted into the database and neither an error occurs.</p>\n<pre><code>Connection conn=null;\n    Statement stmt=null;\n    Scanner sc=new Scanner (System.in);\n    System.out.println(&quot;Enter Username&quot;);\n    String username=sc.next();\n    System.out.println(&quot;Enter Email&quot;);\n    String email=sc.next();\n    System.out.println(&quot;Enter Phone Number&quot;);\n    int phno=sc.nextInt();\n    System.out.println(&quot;Create a Password&quot;);\n    String password=sc.next();\n    \n    \n    try {\n        conn=DriverManager.getConnection(&quot;jdbc:mysql://localhost:3306/sample&quot;,&quot;root&quot;,&quot;abc&quot;);\n        stmt=conn.createStatement();\n        String query1=&quot;select * from login_details&quot;;\n        String query2=&quot;insert into login_details(user_name,user_email,user_phone,user_password)values('&quot;+username+&quot;','&quot;+email+&quot;','&quot;+phno+&quot;','&quot;+password+&quot;')&quot;;\n        ResultSet rs=stmt.executeQuery(query1);\n        boolean status=false;\n        \n        while(rs.next()) {\n            if(status=false) {\n                stmt.executeUpdate(query2);\n                System.out.println(&quot;Details Entered Successfully&quot;);\n            }\n        }\n        \n    } catch (SQLException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n</code></pre>\n"},{"tags":["java","uri"],"answers":[{"comments":[{"owner":{"account_id":1121241,"reputation":4697,"user_id":1109519,"accept_rate":66,"display_name":"nablex"},"score":0,"creation_date":1695799223,"post_id":77182190,"comment_id":136070834,"body_markdown":"Thank you for the your detailed answer. In my opinion the URI class should detect this edge case and apply percent-escaping. The problem is occurring in a framework that has no control over the inputs. I have now refactored that part of the framework to no longer use the hierarchical constructor of URI but instead URI(string). I have added detection code to detect this particular edge case and apply custom encoding.","body":"Thank you for the your detailed answer. In my opinion the URI class should detect this edge case and apply percent-escaping. The problem is occurring in a framework that has no control over the inputs. I have now refactored that part of the framework to no longer use the hierarchical constructor of URI but instead URI(string). I have added detection code to detect this particular edge case and apply custom encoding."}],"tags":[],"owner":{"account_id":2053598,"reputation":41316,"user_id":1831987,"display_name":"VGR"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695748868,"creation_date":1695748868,"answer_id":77182190,"question_id":77181300,"body_markdown":"You have pretty much answered your own question by quoting the RFC:  the first path segment may not contain a colon.  Therefore, `&quot;test:this.pdf&quot;` cannot possibly be a valid path.\r\n\r\nThus, the URI class assumes you wanted a non-hierarchical URI, also known as an opaque URI.  You can see this if you add this line:\r\n\r\n    System.out.println(&quot;Opaque: &quot; + uri.isOpaque());\r\n\r\nI feel this is, in fact, a bug in java.net.URI.  The seven-argument constructor is documented as generating a hierarchical URI.  I would prefer that the constructor either percent-escapes the colon or throws a URISyntaxException.  However, some methods in that class have language that implies re-parsing happens internally and can change whether a resulting URI is opaque or not.\r\n\r\n`&quot;test /:this.pdf&quot;` does not have a colon in the first path segment, which is why it works.\r\n\r\nThis example is easier to explain:\r\n\r\n    URI uri = new URI(\r\n        &quot;example&quot;,\r\n        null,\r\n        null,\r\n        -1,\r\n        &quot;test :this.pdf&quot;,\r\n        null,\r\n        null\r\n    );\r\n\r\nThe [documentation for that constructor](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String,int,java.lang.String,java.lang.String,java.lang.String)) states:\r\n\r\n&gt;If a scheme is given then the path, if also given, must either be empty or begin with a slash character (`&#39;/&#39;`).\r\n\r\nAs for doing your own percent-escaping: do *not* do `replaceAll(&quot;:&quot;, &quot;%3A&quot;)`.  **The URI class already performs percent-escaping.**  If you try to do it yourself, youll only create double-escaping.  However the [single-argument constructor](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String)) is different and actually requires URI-unsafe characters to be percent-escaped beforehand.  All of this is documented in the [class documentation](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#escaped-octets-quotation-encoding-and-decoding-heading):\r\n\r\n&gt; The single-argument constructor requires any illegal characters in its argument to be quoted and preserves any escaped octets and *other* characters that are present.  \r\n&gt; The multi-argument constructors quote illegal characters as required by the components in which they appear. The percent character (`&#39;%&#39;`) is always quoted by these constructors. Any *other* characters are preserved. \r\n\r\nAs for this:\r\n\r\n    new URI(&quot;test :this.pdf&quot;.replaceAll(&quot;:&quot;, &quot;%3A&quot;).replaceAll(&quot; &quot;, &quot;%20&quot;))\r\n\r\nWell, okay, you can do that.  (Note:  regular expressions are expensive operations.  Use `replace(&quot;:&quot;, &quot;%3A&quot;)`, not replaceAll.)  Replacing all unsafe characters is a bit more involved;  see [RFC 3986](https://www.rfc-editor.org/rfc/rfc3986) for all the details.  It would be something like:\r\n\r\n    Formatter uriStr = new Formatter();\r\n    for (byte b : &quot;test :this.pdf&quot;.getBytes(StandardCharsets.UTF_8)) {\r\n        boolean unsafe = (b &lt;= 32 || b &gt;= 127 ||\r\n            &quot;\\&quot;#%/:&lt;&gt;[]\\\\`^{}|&quot;.indexOf(b) &gt;= 0);\r\n        uriStr.format(unsafe ? &quot;%%%02x&quot; : &quot;%c&quot;, b);\r\n    }\r\n    URI uri = new URI(uriStr.toString());\r\n\r\n(If the URI has a query, it gets a little more complicated, since `&amp;` and `=` also need to be escaped, but only in names and values, not in the entire URI.)\r\n\r\nRegarding the RFC, you mentioned:\r\n\r\n&gt;It does not specify further if an encoded variant is allowed, but clearly when getting the path from an URI in java, the encoded variant is allowed at that point.\r\n\r\nBy definition, a percent-escape is not a colon, its an escape sequence, so its allowed.\r\n\r\nIn fact, [the specification does define this](https://www.rfc-editor.org/rfc/rfc3986#section-3.3):\r\n\r\n&lt;pre&gt;\r\npath          = path-abempty    ; begins with &quot;/&quot; or is empty\r\n              / path-absolute   ; begins with &quot;/&quot; but not &quot;//&quot;\r\n              / &lt;strong&gt;path-noscheme&lt;/strong&gt;   ; begins with a non-colon segment\r\n              / path-rootless   ; begins with a segment\r\n              / path-empty      ; zero characters\r\n\r\npath-abempty  = *( &quot;/&quot; segment )\r\npath-absolute = &quot;/&quot; [ segment-nz *( &quot;/&quot; segment ) ]\r\n&lt;strong&gt;path-noscheme = segment-nz-nc&lt;/strong&gt; *( &quot;/&quot; segment )\r\npath-rootless = segment-nz *( &quot;/&quot; segment )\r\n\r\nsegment       = *pchar\r\nsegment-nz    = 1*pchar\r\n&lt;strong&gt;segment-nz-nc&lt;/strong&gt; = 1*( unreserved / pct-encoded / sub-delims / &quot;@&quot; )\r\n              ; non-zero-length segment without any colon &quot;:&quot;\r\n\r\npchar         = unreserved / pct-encoded / sub-delims / &quot;:&quot; / &quot;@&quot;\r\n&lt;/pre&gt;\r\n\r\n(Bold added by me.)\r\n\r\nsegment-nz-nc can contain any percent-escapes, but cannot contain a literal colon character.\r\n","title":"URI constructor bug?","body":"<p>You have pretty much answered your own question by quoting the RFC:  the first path segment may not contain a colon.  Therefore, <code>&quot;test:this.pdf&quot;</code> cannot possibly be a valid path.</p>\n<p>Thus, the URI class assumes you wanted a non-hierarchical URI, also known as an opaque URI.  You can see this if you add this line:</p>\n<pre><code>System.out.println(&quot;Opaque: &quot; + uri.isOpaque());\n</code></pre>\n<p>I feel this is, in fact, a bug in java.net.URI.  The seven-argument constructor is documented as generating a hierarchical URI.  I would prefer that the constructor either percent-escapes the colon or throws a URISyntaxException.  However, some methods in that class have language that implies re-parsing happens internally and can change whether a resulting URI is opaque or not.</p>\n<p><code>&quot;test /:this.pdf&quot;</code> does not have a colon in the first path segment, which is why it works.</p>\n<p>This example is easier to explain:</p>\n<pre><code>URI uri = new URI(\n    &quot;example&quot;,\n    null,\n    null,\n    -1,\n    &quot;test :this.pdf&quot;,\n    null,\n    null\n);\n</code></pre>\n<p>The <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String,java.lang.String,java.lang.String,int,java.lang.String,java.lang.String,java.lang.String)\" rel=\"nofollow noreferrer\">documentation for that constructor</a> states:</p>\n<blockquote>\n<p>If a scheme is given then the path, if also given, must either be empty or begin with a slash character (<code>'/'</code>).</p>\n</blockquote>\n<p>As for doing your own percent-escaping: do <em>not</em> do <code>replaceAll(&quot;:&quot;, &quot;%3A&quot;)</code>.  <strong>The URI class already performs percent-escaping.</strong>  If you try to do it yourself, youll only create double-escaping.  However the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#%3Cinit%3E(java.lang.String)\" rel=\"nofollow noreferrer\">single-argument constructor</a> is different and actually requires URI-unsafe characters to be percent-escaped beforehand.  All of this is documented in the <a href=\"https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/net/URI.html#escaped-octets-quotation-encoding-and-decoding-heading\" rel=\"nofollow noreferrer\">class documentation</a>:</p>\n<blockquote>\n<p> The single-argument constructor requires any illegal characters in its argument to be quoted and preserves any escaped octets and <em>other</em> characters that are present.<br />\n The multi-argument constructors quote illegal characters as required by the components in which they appear. The percent character (<code>'%'</code>) is always quoted by these constructors. Any <em>other</em> characters are preserved.</p>\n</blockquote>\n<p>As for this:</p>\n<pre><code>new URI(&quot;test :this.pdf&quot;.replaceAll(&quot;:&quot;, &quot;%3A&quot;).replaceAll(&quot; &quot;, &quot;%20&quot;))\n</code></pre>\n<p>Well, okay, you can do that.  (Note:  regular expressions are expensive operations.  Use <code>replace(&quot;:&quot;, &quot;%3A&quot;)</code>, not replaceAll.)  Replacing all unsafe characters is a bit more involved;  see <a href=\"https://www.rfc-editor.org/rfc/rfc3986\" rel=\"nofollow noreferrer\">RFC 3986</a> for all the details.  It would be something like:</p>\n<pre><code>Formatter uriStr = new Formatter();\nfor (byte b : &quot;test :this.pdf&quot;.getBytes(StandardCharsets.UTF_8)) {\n    boolean unsafe = (b &lt;= 32 || b &gt;= 127 ||\n        &quot;\\&quot;#%/:&lt;&gt;[]\\\\`^{}|&quot;.indexOf(b) &gt;= 0);\n    uriStr.format(unsafe ? &quot;%%%02x&quot; : &quot;%c&quot;, b);\n}\nURI uri = new URI(uriStr.toString());\n</code></pre>\n<p>(If the URI has a query, it gets a little more complicated, since <code>&amp;</code> and <code>=</code> also need to be escaped, but only in names and values, not in the entire URI.)</p>\n<p>Regarding the RFC, you mentioned:</p>\n<blockquote>\n<p>It does not specify further if an encoded variant is allowed, but clearly when getting the path from an URI in java, the encoded variant is allowed at that point.</p>\n</blockquote>\n<p>By definition, a percent-escape is not a colon, its an escape sequence, so its allowed.</p>\n<p>In fact, <a href=\"https://www.rfc-editor.org/rfc/rfc3986#section-3.3\" rel=\"nofollow noreferrer\">the specification does define this</a>:</p>\n<pre>\npath          = path-abempty    ; begins with \"/\" or is empty\n              / path-absolute   ; begins with \"/\" but not \"//\"\n              / <strong>path-noscheme</strong>   ; begins with a non-colon segment\n              / path-rootless   ; begins with a segment\n              / path-empty      ; zero characters\n\npath-abempty  = *( \"/\" segment )\npath-absolute = \"/\" [ segment-nz *( \"/\" segment ) ]\n<strong>path-noscheme = segment-nz-nc</strong> *( \"/\" segment )\npath-rootless = segment-nz *( \"/\" segment )\n\nsegment       = *pchar\nsegment-nz    = 1*pchar\n<strong>segment-nz-nc</strong> = 1*( unreserved / pct-encoded / sub-delims / \"@\" )\n              ; non-zero-length segment without any colon \":\"\n\npchar         = unreserved / pct-encoded / sub-delims / \":\" / \"@\"\n</pre>\n<p>(Bold added by me.)</p>\n<p>segment-nz-nc can contain any percent-escapes, but cannot contain a literal colon character.</p>\n"}],"owner":{"account_id":1121241,"reputation":4697,"user_id":1109519,"accept_rate":66,"display_name":"nablex"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77182190,"answer_count":1,"score":2,"last_activity_date":1695748868,"creation_date":1695741189,"question_id":77181300,"body_markdown":"I&#39;m wondering whether I&#39;m overlooking something or whether this is a bug in the java.net.URI class. Consider the following code:\r\n\r\n```java\r\n\t\tURI uri = new URI(\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\t-1,\r\n\t\t\t&quot;test:this.pdf&quot;,\r\n\t\t\tnull,\r\n\t\t\tnull\r\n\t\t);\r\n\t\tSystem.out.println(&quot;Scheme: &quot; + uri.getScheme());\r\n\t\tSystem.out.println(&quot;Path: &quot; + uri.getPath());\r\n\t\tSystem.out.println(&quot;URI: &quot; + uri);\r\n```\r\n\r\nI&#39;m explicitly only passing in a path. When inspecting the URI we get no path:\r\n\r\n```\r\nScheme: test\r\nPath: null\r\nURI: test:this.pdf\r\n```\r\n\r\nIf we add a space, we get an exception:\r\n\r\n```java\r\nURI uri = new URI(\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\t-1,\r\n\t\t\t&quot;test :this.pdf&quot;,\r\n\t\t\tnull,\r\n\t\t\tnull\r\n\t\t);\r\n```\r\n\r\nSaying: ``Illegal character in scheme name at index 4: test%20:this.pdf``\r\n\r\nIf however you add a strategically placed slash, it works again:\r\n\r\n```java\r\nURI uri = new URI(\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\t-1,\r\n\t\t\t&quot;test /:this.pdf&quot;,\r\n\t\t\tnull,\r\n\t\t\tnull\r\n\t\t);\r\n```\r\n\r\nIf you try to explicitly set a scheme, it fails for another reason:\r\n\r\n```java\r\nURI uri = new URI(\r\n\t\t\t&quot;example&quot;,\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\t-1,\r\n\t\t\t&quot;test :this.pdf&quot;,\r\n\t\t\tnull,\r\n\t\t\tnull\r\n\t\t);\r\n```\r\n\r\nSaying: ``Relative path in absolute URI: example:test%20:this.pdf``\r\n\r\nIt can not be fixed by explicitly encoding the character:\r\n\r\n```java\r\nURI uri = new URI(\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\tnull,\r\n\t\t\t-1,\r\n\t\t\t&quot;test :this.pdf&quot;.replaceAll(&quot;:&quot;, &quot;%3A&quot;),\r\n\t\t\tnull,\r\n\t\t\tnull\r\n\t\t);\r\n```\r\n\r\nBecause the encoding is then part of the path:\r\n\r\n```\r\nScheme: null\r\nPath: test %3Athis.pdf\r\nURI: test%20%253Athis.pdf\r\n```\r\n\r\nCurrently my only option seems to be to switch to the main constructor new URI(string) and explicitly determine the edge case myself and encode it:\r\n\r\n```\r\nuri = new URI(&quot;test :this.pdf&quot;.replaceAll(&quot;:&quot;, &quot;%3A&quot;).replaceAll(&quot; &quot;, &quot;%20&quot;));\r\n```\r\n\r\nThis outputs what I need:\r\n\r\n```\r\nScheme: null\r\nPath: test :this.pdf\r\nURI: test%20%3Athis.pdf\r\n```\r\n\r\nThe specification states:\r\n\r\n```\r\nIn addition, a URI reference\r\n   (Section 4.1) may be a relative-path reference, in which case the\r\n   first path segment cannot contain a colon (&quot;:&quot;) character.\r\n```\r\n\r\nIt does not specify further if an encoded variant is allowed, but clearly when getting the path from an URI in java, the encoded variant is allowed at that point.\r\n\r\nIn that light it seems the original constructor is flawed by not encoding the &quot;:&quot;.","title":"URI constructor bug?","body":"<p>I'm wondering whether I'm overlooking something or whether this is a bug in the java.net.URI class. Consider the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        URI uri = new URI(\n            null,\n            null,\n            null,\n            -1,\n            &quot;test:this.pdf&quot;,\n            null,\n            null\n        );\n        System.out.println(&quot;Scheme: &quot; + uri.getScheme());\n        System.out.println(&quot;Path: &quot; + uri.getPath());\n        System.out.println(&quot;URI: &quot; + uri);\n</code></pre>\n<p>I'm explicitly only passing in a path. When inspecting the URI we get no path:</p>\n<pre><code>Scheme: test\nPath: null\nURI: test:this.pdf\n</code></pre>\n<p>If we add a space, we get an exception:</p>\n<pre class=\"lang-java prettyprint-override\"><code>URI uri = new URI(\n            null,\n            null,\n            null,\n            -1,\n            &quot;test :this.pdf&quot;,\n            null,\n            null\n        );\n</code></pre>\n<p>Saying: <code>Illegal character in scheme name at index 4: test%20:this.pdf</code></p>\n<p>If however you add a strategically placed slash, it works again:</p>\n<pre class=\"lang-java prettyprint-override\"><code>URI uri = new URI(\n            null,\n            null,\n            null,\n            -1,\n            &quot;test /:this.pdf&quot;,\n            null,\n            null\n        );\n</code></pre>\n<p>If you try to explicitly set a scheme, it fails for another reason:</p>\n<pre class=\"lang-java prettyprint-override\"><code>URI uri = new URI(\n            &quot;example&quot;,\n            null,\n            null,\n            -1,\n            &quot;test :this.pdf&quot;,\n            null,\n            null\n        );\n</code></pre>\n<p>Saying: <code>Relative path in absolute URI: example:test%20:this.pdf</code></p>\n<p>It can not be fixed by explicitly encoding the character:</p>\n<pre class=\"lang-java prettyprint-override\"><code>URI uri = new URI(\n            null,\n            null,\n            null,\n            -1,\n            &quot;test :this.pdf&quot;.replaceAll(&quot;:&quot;, &quot;%3A&quot;),\n            null,\n            null\n        );\n</code></pre>\n<p>Because the encoding is then part of the path:</p>\n<pre><code>Scheme: null\nPath: test %3Athis.pdf\nURI: test%20%253Athis.pdf\n</code></pre>\n<p>Currently my only option seems to be to switch to the main constructor new URI(string) and explicitly determine the edge case myself and encode it:</p>\n<pre><code>uri = new URI(&quot;test :this.pdf&quot;.replaceAll(&quot;:&quot;, &quot;%3A&quot;).replaceAll(&quot; &quot;, &quot;%20&quot;));\n</code></pre>\n<p>This outputs what I need:</p>\n<pre><code>Scheme: null\nPath: test :this.pdf\nURI: test%20%3Athis.pdf\n</code></pre>\n<p>The specification states:</p>\n<pre><code>In addition, a URI reference\n   (Section 4.1) may be a relative-path reference, in which case the\n   first path segment cannot contain a colon (&quot;:&quot;) character.\n</code></pre>\n<p>It does not specify further if an encoded variant is allowed, but clearly when getting the path from an URI in java, the encoded variant is allowed at that point.</p>\n<p>In that light it seems the original constructor is flawed by not encoding the &quot;:&quot;.</p>\n"},{"tags":["java","php","android"],"answers":[{"comments":[{"owner":{"account_id":23434564,"reputation":21,"user_id":17492865,"display_name":"ALI EL BOUHALI"},"score":0,"creation_date":1695849728,"post_id":77182180,"comment_id":136080664,"body_markdown":"No, when i remove the _ the app don&#39;t do anything, the data is not uploaded and don&#39;t show any error","body":"No, when i remove the _ the app don&#39;t do anything, the data is not uploaded and don&#39;t show any error"}],"tags":[],"owner":{"account_id":7306791,"reputation":162,"user_id":5820400,"accept_rate":9,"display_name":"UM1979"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695748790,"creation_date":1695748790,"answer_id":77182180,"question_id":77181609,"body_markdown":"In getParams() method, can you remove the underscore (_) before the product_name and product_description and try? \r\n\r\nReplace the below one \r\n\r\n    @Override\r\n    protected Map&lt;String, String&gt; getParams() {\r\n        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n        params.put(&quot;_product_name&quot;, productName);\r\n        params.put(&quot;_product_description&quot;, productDescription);\r\n        // Add more parameters if needed\r\n        return params;\r\n    }\r\n\r\nto: \r\n \r\n    @Override\r\n    protected Map&lt;String, String&gt; getParams() {\r\n        Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n        params.put(&quot;product_name&quot;, productName);\r\n        params.put(&quot;product_description&quot;, productDescription);\r\n        // Add more parameters if needed\r\n        return params;\r\n    }","title":"how to upload data to my website database from an android app","body":"<p>In getParams() method, can you remove the underscore (_) before the product_name and product_description and try?</p>\n<p>Replace the below one</p>\n<pre><code>@Override\nprotected Map&lt;String, String&gt; getParams() {\n    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n    params.put(&quot;_product_name&quot;, productName);\n    params.put(&quot;_product_description&quot;, productDescription);\n    // Add more parameters if needed\n    return params;\n}\n</code></pre>\n<p>to:</p>\n<pre><code>@Override\nprotected Map&lt;String, String&gt; getParams() {\n    Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n    params.put(&quot;product_name&quot;, productName);\n    params.put(&quot;product_description&quot;, productDescription);\n    // Add more parameters if needed\n    return params;\n}\n</code></pre>\n"}],"owner":{"account_id":23434564,"reputation":21,"user_id":17492865,"display_name":"ALI EL BOUHALI"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":24,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695748790,"creation_date":1695743797,"question_id":77181609,"body_markdown":"I want to create an android app to upload products details to my website database, but the app don&#39;t send any data, please help me to fix the errors, those are all the codes i use :\r\n\r\nI use this void code in my android app , i use the Volley HTTP library : \r\n\r\n```\r\ndependencies {\r\n    implementation &#39;com.android.volley:volley:1.2.1&#39;\r\n}\r\n```\r\n\r\n```\r\npublic void _uploadProduct(final String _product_name, final String _product_description) {\r\n    url = &quot;https://www.mywebsite.com/add_product.php&quot;;\r\n\r\n    final String productName = _product_name;\r\n    final String productDescription = _product_description;\r\n\r\n    // Log the product name and description\r\n    Log.d(&quot;MyApp&quot;, &quot;Product Name: &quot; + productName);\r\n    Log.d(&quot;MyApp&quot;, &quot;Product Description: &quot; + productDescription);\r\n\r\n    StringRequest stringRequest = new StringRequest(Request.Method.POST, url,\r\n        new Response.Listener&lt;String&gt;() {\r\n            @Override\r\n            public void onResponse(String response) {\r\n                // Handle the response from the server\r\n                try {\r\n                    JSONObject jsonResponse = new JSONObject(response);\r\n                    String message = jsonResponse.getString(&quot;message&quot;);\r\n\r\n                    // Display a success message to the user\r\n                    Toast.makeText(UploadActivity.this, message, Toast.LENGTH_SHORT).show();\r\n\r\n                    // Clear input fields\r\n                    edittext1.setText(&quot;&quot;);\r\n                    edittext2.setText(&quot;&quot;);\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        },\r\n        new Response.ErrorListener() {\r\n            @Override\r\n            public void onErrorResponse(VolleyError error) {\r\n                // Handle error responses from the server\r\n                Toast.makeText(UploadActivity.this, &quot;Error uploading product&quot;, Toast.LENGTH_SHORT).show();\r\n                Log.e(&quot;Upload Error&quot;, error.toString());\r\n            }\r\n        }) {\r\n        // Define the parameters to be sent to the server\r\n        @Override\r\n        protected Map&lt;String, String&gt; getParams() {\r\n            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n            params.put(&quot;_product_name&quot;, productName);\r\n            params.put(&quot;_product_description&quot;, productDescription);\r\n            // Add more parameters if needed\r\n            return params;\r\n        }\r\n    };\r\n\r\n    // Add the request to the request queue\r\n    RequestQueue requestQueue = Volley.newRequestQueue(this);\r\n    requestQueue.add(stringRequest);\r\n}\r\n```\r\n\r\nand in the upload button i use this code :\r\n\r\n```\r\nproductName = edittext1.getText().toString();\r\nproductDescription = edittext2.getText().toString();\r\nif (!TextUtils.isEmpty(productName) &amp;&amp; !TextUtils.isEmpty(productDescription)) {\r\n\t    // Make the network request\r\n\t    \r\n\t_uploadProduct(productName, productDescription);\r\n\t\r\n} else {\r\n\t    // Handle the case where the values are empty\r\n\t    Toast.makeText(UploadActivity.this, &quot;Product name and description cannot be empty&quot;, Toast.LENGTH_SHORT).show();\r\n}\r\n```\r\n\r\nand i use this php code on my website code source :\r\n\r\n```\r\n&lt;?php\r\ninclude &quot;connect.php&quot;;\r\n\r\nif ($_SERVER[&#39;REQUEST_METHOD&#39;] === &#39;POST&#39;) {\r\n    // Check if the required POST fields exist\r\n    if (isset($_POST[&#39;product_name&#39;]) &amp;&amp; isset($_POST[&#39;product_description&#39;])) {\r\n        // Get the product data from the POST request\r\n        $productName = $_POST[&#39;product_name&#39;];\r\n        $productDescription = $_POST[&#39;product_description&#39;];\r\n\r\n        // Prepare and execute the database query to insert the product data\r\n        $stmt = $pdo-&gt;prepare(&quot;INSERT INTO products (product_name, description) VALUES (?, ?)&quot;);\r\n        if ($stmt-&gt;execute([$productName, $productDescription])) {\r\n            $response = [&quot;message&quot; =&gt; &quot;Product uploaded successfully&quot;];\r\n            echo json_encode($response);\r\n        } else {\r\n            $response = [&quot;message&quot; =&gt; &quot;Error uploading product&quot;];\r\n            echo json_encode($response);\r\n        }\r\n    } else {\r\n        $response = [&quot;message&quot; =&gt; &quot;Missing product_name or product_description&quot;];\r\n        echo json_encode($response);\r\n    }\r\n} else {\r\n    $response = [&quot;message&quot; =&gt; &quot;Invalid request method&quot;];\r\n    echo json_encode($response);\r\n}\r\n?&gt;\r\n```\r\n\r\nthe data is not uploaded, and the app show this error : &quot; missing product_name or product_description &quot;","title":"how to upload data to my website database from an android app","body":"<p>I want to create an android app to upload products details to my website database, but the app don't send any data, please help me to fix the errors, those are all the codes i use :</p>\n<p>I use this void code in my android app , i use the Volley HTTP library :</p>\n<pre><code>dependencies {\n    implementation 'com.android.volley:volley:1.2.1'\n}\n</code></pre>\n<pre><code>public void _uploadProduct(final String _product_name, final String _product_description) {\n    url = &quot;https://www.mywebsite.com/add_product.php&quot;;\n\n    final String productName = _product_name;\n    final String productDescription = _product_description;\n\n    // Log the product name and description\n    Log.d(&quot;MyApp&quot;, &quot;Product Name: &quot; + productName);\n    Log.d(&quot;MyApp&quot;, &quot;Product Description: &quot; + productDescription);\n\n    StringRequest stringRequest = new StringRequest(Request.Method.POST, url,\n        new Response.Listener&lt;String&gt;() {\n            @Override\n            public void onResponse(String response) {\n                // Handle the response from the server\n                try {\n                    JSONObject jsonResponse = new JSONObject(response);\n                    String message = jsonResponse.getString(&quot;message&quot;);\n\n                    // Display a success message to the user\n                    Toast.makeText(UploadActivity.this, message, Toast.LENGTH_SHORT).show();\n\n                    // Clear input fields\n                    edittext1.setText(&quot;&quot;);\n                    edittext2.setText(&quot;&quot;);\n                } catch (JSONException e) {\n                    e.printStackTrace();\n                }\n            }\n        },\n        new Response.ErrorListener() {\n            @Override\n            public void onErrorResponse(VolleyError error) {\n                // Handle error responses from the server\n                Toast.makeText(UploadActivity.this, &quot;Error uploading product&quot;, Toast.LENGTH_SHORT).show();\n                Log.e(&quot;Upload Error&quot;, error.toString());\n            }\n        }) {\n        // Define the parameters to be sent to the server\n        @Override\n        protected Map&lt;String, String&gt; getParams() {\n            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n            params.put(&quot;_product_name&quot;, productName);\n            params.put(&quot;_product_description&quot;, productDescription);\n            // Add more parameters if needed\n            return params;\n        }\n    };\n\n    // Add the request to the request queue\n    RequestQueue requestQueue = Volley.newRequestQueue(this);\n    requestQueue.add(stringRequest);\n}\n</code></pre>\n<p>and in the upload button i use this code :</p>\n<pre><code>productName = edittext1.getText().toString();\nproductDescription = edittext2.getText().toString();\nif (!TextUtils.isEmpty(productName) &amp;&amp; !TextUtils.isEmpty(productDescription)) {\n        // Make the network request\n        \n    _uploadProduct(productName, productDescription);\n    \n} else {\n        // Handle the case where the values are empty\n        Toast.makeText(UploadActivity.this, &quot;Product name and description cannot be empty&quot;, Toast.LENGTH_SHORT).show();\n}\n</code></pre>\n<p>and i use this php code on my website code source :</p>\n<pre><code>&lt;?php\ninclude &quot;connect.php&quot;;\n\nif ($_SERVER['REQUEST_METHOD'] === 'POST') {\n    // Check if the required POST fields exist\n    if (isset($_POST['product_name']) &amp;&amp; isset($_POST['product_description'])) {\n        // Get the product data from the POST request\n        $productName = $_POST['product_name'];\n        $productDescription = $_POST['product_description'];\n\n        // Prepare and execute the database query to insert the product data\n        $stmt = $pdo-&gt;prepare(&quot;INSERT INTO products (product_name, description) VALUES (?, ?)&quot;);\n        if ($stmt-&gt;execute([$productName, $productDescription])) {\n            $response = [&quot;message&quot; =&gt; &quot;Product uploaded successfully&quot;];\n            echo json_encode($response);\n        } else {\n            $response = [&quot;message&quot; =&gt; &quot;Error uploading product&quot;];\n            echo json_encode($response);\n        }\n    } else {\n        $response = [&quot;message&quot; =&gt; &quot;Missing product_name or product_description&quot;];\n        echo json_encode($response);\n    }\n} else {\n    $response = [&quot;message&quot; =&gt; &quot;Invalid request method&quot;];\n    echo json_encode($response);\n}\n?&gt;\n</code></pre>\n<p>the data is not uploaded, and the app show this error : &quot; missing product_name or product_description &quot;</p>\n"},{"tags":["java","interface"],"answers":[{"comments":[{"owner":{"account_id":12910,"reputation":2774,"user_id":25664,"accept_rate":100,"display_name":"Kyle Walsh"},"score":0,"creation_date":1252708373,"post_id":1413549,"comment_id":1256025,"body_markdown":"This answer is neither a statement for or against this methodology, FYI.","body":"This answer is neither a statement for or against this methodology, FYI."}],"tags":[],"owner":{"account_id":12910,"reputation":2774,"user_id":25664,"accept_rate":100,"display_name":"Kyle Walsh"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1252708055,"creation_date":1252708055,"answer_id":1413549,"question_id":1413543,"body_markdown":"An interface is like a contract between you and the person who made the interface that your code will carry out what they request. Furthermore, you want to code things in such a way that your solution can solve the problem many times over. Think code re-use. When you are coding to an implementation, you are thinking purely of the instance of a problem that you are trying to solve. So when under this influence, your solutions will be less generic and more focused. That will make writing a general solution that abides by an interface much more challenging.","title":"What does it mean to program to an interface?","body":"<p>An interface is like a contract between you and the person who made the interface that your code will carry out what they request. Furthermore, you want to code things in such a way that your solution can solve the problem many times over. Think code re-use. When you are coding to an implementation, you are thinking purely of the instance of a problem that you are trying to solve. So when under this influence, your solutions will be less generic and more focused. That will make writing a general solution that abides by an interface much more challenging.</p>\n"},{"tags":[],"owner":{"account_id":55645,"reputation":73532,"user_id":166686,"display_name":"mjv"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1252708910,"creation_date":1252708158,"answer_id":1413553,"question_id":1413543,"body_markdown":"It&#39;s a way to separate responsibilities / dependancies between modules.\r\nBy defining a particular Interface (an API), you ensure that the modules on either side of the interface won&#39;t &quot;bother&quot; one another.\r\n\r\nFor example, say module 1 will take care of displaying bank account info for a particular user, and module2 will fetch bank account info from &quot;whatever&quot; back-end is used.\r\n\r\nBy defining a few types and functions, along with the associated parameters, for example a structure defining a bank transaction, and a few methods (functions) like GetLastTransactions(AccountNumber, NbTransactionsWanted, ArrayToReturnTheseRec)  and GetBalance(AccountNumer),   the Module1 will be able to get the needed info, and not worry about how this info is stored or calculated or whatever.  Conversely, the Module2 will just respond to the methods call by providing the info as per the defined interface, but won&#39;t worry about where this info is to be displayed, printed or whatever...\r\n\r\nWhen a module is changed, the implementation of the interface may vary, but as long as the interface remains the same, the modules using the API may at worst need to be recompiled/rebuilt, but they do not need to have their logic modified in anyway.\r\n\r\nThat&#39;s the idea of an API.","title":"What does it mean to program to an interface?","body":"<p>It's a way to separate responsibilities / dependancies between modules.\nBy defining a particular Interface (an API), you ensure that the modules on either side of the interface won't \"bother\" one another.</p>\n\n<p>For example, say module 1 will take care of displaying bank account info for a particular user, and module2 will fetch bank account info from \"whatever\" back-end is used.</p>\n\n<p>By defining a few types and functions, along with the associated parameters, for example a structure defining a bank transaction, and a few methods (functions) like GetLastTransactions(AccountNumber, NbTransactionsWanted, ArrayToReturnTheseRec)  and GetBalance(AccountNumer),   the Module1 will be able to get the needed info, and not worry about how this info is stored or calculated or whatever.  Conversely, the Module2 will just respond to the methods call by providing the info as per the defined interface, but won't worry about where this info is to be displayed, printed or whatever...</p>\n\n<p>When a module is changed, the implementation of the interface may vary, but as long as the interface remains the same, the modules using the API may at worst need to be recompiled/rebuilt, but they do not need to have their logic modified in anyway.</p>\n\n<p>That's the idea of an API.</p>\n"},{"tags":[],"owner":{"account_id":49939,"reputation":511967,"user_id":148870,"display_name":"Amber"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252708298,"creation_date":1252708298,"answer_id":1413560,"question_id":1413543,"body_markdown":"Essentially, interfaces are the slightly more concrete representation of general concepts of interoperation - they provide the specification for what all the various options you might care to &quot;plug in&quot; for a particular function should do similarly so that code which uses them won&#39;t be dependent on one particular option.\r\n\r\nFor instance, many DB libraries act as interfaces in that they can operate with many different actual DBs (MSSQL, MySQL, PostgreSQL, SQLite, etc.) without the code that uses the DB library having to change at all.\r\n\r\nOverall, it allows you to create code that&#39;s more flexible - giving your clients more options on how they use it, and also potentially allowing you to more easily reuse code in multiple places instead of having to write new specialized code.","title":"What does it mean to program to an interface?","body":"<p>Essentially, interfaces are the slightly more concrete representation of general concepts of interoperation - they provide the specification for what all the various options you might care to \"plug in\" for a particular function should do similarly so that code which uses them won't be dependent on one particular option.</p>\n\n<p>For instance, many DB libraries act as interfaces in that they can operate with many different actual DBs (MSSQL, MySQL, PostgreSQL, SQLite, etc.) without the code that uses the DB library having to change at all.</p>\n\n<p>Overall, it allows you to create code that's more flexible - giving your clients more options on how they use it, and also potentially allowing you to more easily reuse code in multiple places instead of having to write new specialized code.</p>\n"},{"tags":[],"owner":{"account_id":19555,"reputation":237923,"user_id":45914,"accept_rate":68,"display_name":"jason"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1252708346,"creation_date":1252708346,"answer_id":1413562,"question_id":1413543,"body_markdown":"At its core, this statement is really about dependencies. If I code my class `Foo` to an implementation (`Bar` instead of `IBar`) then `Foo` is now dependent on `Bar`. But if I code my class `Foo` to an interface (`IBar` instead of `Bar`) then the implementation can vary and `Foo` is no longer dependent on a specific implementation. This approach gives a flexible, loosely-coupled code base that is more easily reused, refactored and unit tested.","title":"What does it mean to program to an interface?","body":"<p>At its core, this statement is really about dependencies. If I code my class <code>Foo</code> to an implementation (<code>Bar</code> instead of <code>IBar</code>) then <code>Foo</code> is now dependent on <code>Bar</code>. But if I code my class <code>Foo</code> to an interface (<code>IBar</code> instead of <code>Bar</code>) then the implementation can vary and <code>Foo</code> is no longer dependent on a specific implementation. This approach gives a flexible, loosely-coupled code base that is more easily reused, refactored and unit tested.</p>\n"},{"tags":[],"owner":{"account_id":22560,"reputation":56311,"user_id":55774,"accept_rate":62,"display_name":"Frederik Gheysels"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252708419,"creation_date":1252708419,"answer_id":1413565,"question_id":1413543,"body_markdown":"By programming to an interface, you are more likely to apply the low coupling / high cohesion principle.\r\nBy programming to an interface, you can easily switch the implementation of that interface (the specific class).\r\n\r\n\r\n","title":"What does it mean to program to an interface?","body":"<p>By programming to an interface, you are more likely to apply the low coupling / high cohesion principle.\nBy programming to an interface, you can easily switch the implementation of that interface (the specific class).</p>\n"},{"comments":[{"owner":{"account_id":47968,"reputation":12181,"user_id":142299,"accept_rate":85,"display_name":"Kevin Boyd"},"score":0,"creation_date":1252709220,"post_id":1413601,"comment_id":1256076,"body_markdown":"Wow! That&#39;s very well explained!","body":"Wow! That&#39;s very well explained!"},{"owner":{"account_id":7913,"reputation":33220,"user_id":13940,"accept_rate":58,"display_name":"Greg Mattes"},"score":2,"creation_date":1252710293,"post_id":1413601,"comment_id":1256137,"body_markdown":"Just keep in mind that this principle goes for types that you create as well as built-in abstractions like Set. For example, if you have a &quot;Foo&quot; in your project. Don&#39;t just make a &quot;class Foo,&quot; instead make &quot;interface Foo&quot; and then have some implementation like &quot;class MyFoo implements Foo&quot; You might even find that your project will have several classes that implement the &quot;Foo&quot; interface. By consistently writing the name of the interface instead of the implementation (except for constructor invocations) you can quickly change Foo implementations to fit your needs.","body":"Just keep in mind that this principle goes for types that you create as well as built-in abstractions like Set. For example, if you have a &quot;Foo&quot; in your project. Don&#39;t just make a &quot;class Foo,&quot; instead make &quot;interface Foo&quot; and then have some implementation like &quot;class MyFoo implements Foo&quot; You might even find that your project will have several classes that implement the &quot;Foo&quot; interface. By consistently writing the name of the interface instead of the implementation (except for constructor invocations) you can quickly change Foo implementations to fit your needs."},{"owner":{"account_id":8978,"reputation":121598,"user_id":16406,"accept_rate":77,"display_name":"Chris Dodd"},"score":4,"creation_date":1252711249,"post_id":1413601,"comment_id":1256167,"body_markdown":"Be very careful about OVERusing this principle for you code.  If every class has a corresponding interface that gets defined and there&#39;s always a 1-to-1 correspondence between thes classes and interfaces, then it just serves to obfuscate the code and make it harder to maintain.  Knowing WHEN to introduce interfaces because you might in the future want to introduce a different implementation is key.","body":"Be very careful about OVERusing this principle for you code.  If every class has a corresponding interface that gets defined and there&#39;s always a 1-to-1 correspondence between thes classes and interfaces, then it just serves to obfuscate the code and make it harder to maintain.  Knowing WHEN to introduce interfaces because you might in the future want to introduce a different implementation is key."},{"owner":{"account_id":9193,"reputation":343123,"user_id":16883,"accept_rate":83,"display_name":"Michael Borgwardt"},"score":2,"creation_date":1252711407,"post_id":1413601,"comment_id":1256171,"body_markdown":"I really don&#39;t like this standard example about declaring local variables. It&#39;s a very weak case for interfaces. Method parameters are a much stronger case - declare a HashSet parameter, and you force clients to use a HashSet. Declare a Set parameter, and they&#39;re free to use Collections.singleton(), Collections.emptySet(), or their own custom Set implementation.","body":"I really don&#39;t like this standard example about declaring local variables. It&#39;s a very weak case for interfaces. Method parameters are a much stronger case - declare a HashSet parameter, and you force clients to use a HashSet. Declare a Set parameter, and they&#39;re free to use Collections.singleton(), Collections.emptySet(), or their own custom Set implementation."},{"owner":{"account_id":53868,"reputation":1956,"user_id":161081,"accept_rate":25,"display_name":"weiji"},"score":0,"creation_date":1252715158,"post_id":1413601,"comment_id":1256355,"body_markdown":"Michael - You&#39;re right, method parameters would make a better example.  However, I purposely wanted to give something very simple for the questioner.  I start with constructors and move to return types; it would just be another small step to illustrate parameters.  I sort of thought he would be able to make that connection himself and so left it out due to brevity.","body":"Michael - You&#39;re right, method parameters would make a better example.  However, I purposely wanted to give something very simple for the questioner.  I start with constructors and move to return types; it would just be another small step to illustrate parameters.  I sort of thought he would be able to make that connection himself and so left it out due to brevity."},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1252762964,"post_id":1413601,"comment_id":1257861,"body_markdown":"In Swing it is common for interfaces to have an Adapter providing a dummy implementation.  It is then easy to extend the adapter to override a single method instead of providing a full set of dummy methods everytime.  Very nice for anonymous functions.","body":"In Swing it is common for interfaces to have an Adapter providing a dummy implementation.  It is then easy to extend the adapter to override a single method instead of providing a full set of dummy methods everytime.  Very nice for anonymous functions."}],"tags":[],"owner":{"account_id":53868,"reputation":1956,"user_id":161081,"accept_rate":25,"display_name":"weiji"},"comment_count":6,"down_vote_count":2,"up_vote_count":40,"is_accepted":true,"score":38,"last_activity_date":1252708922,"creation_date":1252708922,"answer_id":1413601,"question_id":1413543,"body_markdown":"You are probably looking for something like this:\r\n\r\n    public static void main(String... args) {\r\n      // do this - declare the variable to be of type Set, which is an interface\r\n      Set buddies = new HashSet();\r\n\r\n      // don&#39;t do this - you declare the variable to have a fixed type\r\n      HashSet buddies2 = new HashSet();\r\n    }\r\n\r\nWhy is it considered good to do it the first way?  Let&#39;s say later on you decide you need to use a different data structure, say a LinkedHashSet, in order to take advantage of the LinkedHashSet&#39;s functionality.  The code has to be changed like so:\r\n\r\n    public static void main(String... args) {\r\n      // do this - declare the variable to be of type Set, which is an interface\r\n      Set buddies = new LinkedHashSet();  // &lt;- change the constructor call\r\n\r\n      // don&#39;t do this - you declare the variable to have a fixed type\r\n      // this you have to change both the variable type and the constructor call\r\n      // HashSet buddies2 = new HashSet();  // old version\r\n      LinkedHashSet buddies2 = new LinkedHashSet();\r\n     }\r\n\r\nThis doesn&#39;t seem so bad, right?  But what if you wrote getters the same way?\r\n\r\n    public HashSet getBuddies() {\r\n      return buddies;\r\n    }\r\n\r\nThis would have to be changed, too!\r\n\r\n    public LinkedHashSet getBuddies() {\r\n      return buddies;\r\n    }\r\n\r\nHopefully you see, even with a small program like this you have far-reaching implications on what you declare the type of the variable to be.  With objects going back and forth so much it definitely helps make the program easier to code and maintain if you just rely on a variable being declared as an interface, not as a specific implementation of that interface (in this case, declare it to be a Set, not a LinkedHashSet or whatever).  It can be just this:\r\n\r\n    public Set getBuddies() {\r\n      return buddies;\r\n    }\r\n\r\nThere&#39;s another benefit too, in that (well at least for me) the difference helps me design a program better.  But hopefully my examples give you some idea... hope it helps.","title":"What does it mean to program to an interface?","body":"<p>You are probably looking for something like this:</p>\n\n<pre><code>public static void main(String... args) {\n  // do this - declare the variable to be of type Set, which is an interface\n  Set buddies = new HashSet();\n\n  // don't do this - you declare the variable to have a fixed type\n  HashSet buddies2 = new HashSet();\n}\n</code></pre>\n\n<p>Why is it considered good to do it the first way?  Let's say later on you decide you need to use a different data structure, say a LinkedHashSet, in order to take advantage of the LinkedHashSet's functionality.  The code has to be changed like so:</p>\n\n<pre><code>public static void main(String... args) {\n  // do this - declare the variable to be of type Set, which is an interface\n  Set buddies = new LinkedHashSet();  // &lt;- change the constructor call\n\n  // don't do this - you declare the variable to have a fixed type\n  // this you have to change both the variable type and the constructor call\n  // HashSet buddies2 = new HashSet();  // old version\n  LinkedHashSet buddies2 = new LinkedHashSet();\n }\n</code></pre>\n\n<p>This doesn't seem so bad, right?  But what if you wrote getters the same way?</p>\n\n<pre><code>public HashSet getBuddies() {\n  return buddies;\n}\n</code></pre>\n\n<p>This would have to be changed, too!</p>\n\n<pre><code>public LinkedHashSet getBuddies() {\n  return buddies;\n}\n</code></pre>\n\n<p>Hopefully you see, even with a small program like this you have far-reaching implications on what you declare the type of the variable to be.  With objects going back and forth so much it definitely helps make the program easier to code and maintain if you just rely on a variable being declared as an interface, not as a specific implementation of that interface (in this case, declare it to be a Set, not a LinkedHashSet or whatever).  It can be just this:</p>\n\n<pre><code>public Set getBuddies() {\n  return buddies;\n}\n</code></pre>\n\n<p>There's another benefit too, in that (well at least for me) the difference helps me design a program better.  But hopefully my examples give you some idea... hope it helps.</p>\n"},{"comments":[{"owner":{"account_id":6185192,"reputation":623,"user_id":4819504,"accept_rate":83,"display_name":"puerile"},"score":0,"creation_date":1591612239,"post_id":1413613,"comment_id":110111971,"body_markdown":"I like this analogy!","body":"I like this analogy!"}],"tags":[],"owner":{"account_id":56162,"reputation":18871,"user_id":168212,"accept_rate":79,"display_name":"SingleShot"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1252709081,"creation_date":1252709081,"answer_id":1413613,"question_id":1413543,"body_markdown":"Take a red 2x4 Lego block and attach it to a blue 2x4 Lego block so one sits atop the other. Now remove the blue block and replace it with a yellow 2x4 Lego block. Notice that the red block did not have to change even though the &quot;implementation&quot; of the attached block varied.\r\n\r\nNow go get some other kind of block that does not share the Lego &quot;interface&quot;. Try to attach it to the red 2x4 Lego. To make this happen, you will need to change either the Lego or the other block, perhaps by cutting away some plastic or adding new plastic or glue. Notice that by varying the &quot;implementation&quot; you are forced to change it or the client.\r\n\r\nBeing able to let implementations vary without changing the client or the server - that is what it means to program to interfaces.","title":"What does it mean to program to an interface?","body":"<p>Take a red 2x4 Lego block and attach it to a blue 2x4 Lego block so one sits atop the other. Now remove the blue block and replace it with a yellow 2x4 Lego block. Notice that the red block did not have to change even though the \"implementation\" of the attached block varied.</p>\n\n<p>Now go get some other kind of block that does not share the Lego \"interface\". Try to attach it to the red 2x4 Lego. To make this happen, you will need to change either the Lego or the other block, perhaps by cutting away some plastic or adding new plastic or glue. Notice that by varying the \"implementation\" you are forced to change it or the client.</p>\n\n<p>Being able to let implementations vary without changing the client or the server - that is what it means to program to interfaces.</p>\n"},{"tags":[],"owner":{"account_id":19245,"reputation":28749,"user_id":44952,"accept_rate":84,"display_name":"codymanix"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1252709086,"creation_date":1252709086,"answer_id":1413614,"question_id":1413543,"body_markdown":"It means that your variables, properties, parameters and return types should have an interface type instead of a concrete implementation.\r\n\r\nWhich means you use `IEnumerable&lt;T&gt; Foo(IList mylist)` instead of `ArrayList Foo(ArrayList myList)` for example.\r\n\r\nUse the implementation only when constructing the object:\r\n\r\n    IList list = new ArrayList();\r\n\r\nIf you have done this you can later change the object type maybe you want to use LinkedList instead of ArrayList later on, this is no problem since everywhere else you refer to it as just &quot;IList&quot;\r\n","title":"What does it mean to program to an interface?","body":"<p>It means that your variables, properties, parameters and return types should have an interface type instead of a concrete implementation.</p>\n\n<p>Which means you use <code>IEnumerable&lt;T&gt; Foo(IList mylist)</code> instead of <code>ArrayList Foo(ArrayList myList)</code> for example.</p>\n\n<p>Use the implementation only when constructing the object:</p>\n\n<pre><code>IList list = new ArrayList();\n</code></pre>\n\n<p>If you have done this you can later change the object type maybe you want to use LinkedList instead of ArrayList later on, this is no problem since everywhere else you refer to it as just \"IList\"</p>\n"},{"comments":[{"owner":{"display_name":"user8599"},"score":2,"creation_date":1252781799,"post_id":1413648,"comment_id":1258656,"body_markdown":"That&#39;s my understanding too - programming to an interface means to program to the documentation, the specification, or the protocol. So if you&#39;re programming to an interface, a discussion about &quot;does X work&quot; isn&#39;t &quot;I tried it and it works/doesn&#39;t work&quot;, it&#39;s more along the lines of &quot;I read the documentation, and it permits X/forbids X/doesn&#39;t mention X/is ambiguous about X&quot;.","body":"That&#39;s my understanding too - programming to an interface means to program to the documentation, the specification, or the protocol. So if you&#39;re programming to an interface, a discussion about &quot;does X work&quot; isn&#39;t &quot;I tried it and it works/doesn&#39;t work&quot;, it&#39;s more along the lines of &quot;I read the documentation, and it permits X/forbids X/doesn&#39;t mention X/is ambiguous about X&quot;."}],"tags":[],"owner":{"account_id":6454,"reputation":25554,"user_id":10861,"accept_rate":76,"display_name":"rmeador"},"comment_count":1,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1252709984,"creation_date":1252709984,"answer_id":1413648,"question_id":1413543,"body_markdown":"My initial read of that statement is very different than any answer I&#39;ve read yet.  I agree with all the people that say using interface types for your method params, etc are very important, but that&#39;s not what this statement means to me.\r\n\r\nMy take is that it&#39;s telling you to write code that only depends on what the interface (in this case, I&#39;m using &quot;interface&quot; to mean exposed methods of either a class or interface type) you&#39;re using says it does in the documentation.  This is the opposite of writing code that depends on the implementation details of the functions you&#39;re calling.  You should treat all function calls as black boxes (you can make exceptions to this if both functions are methods of the same class, but ideally it is maintained at all times).\r\n\r\nExample: suppose there is a `Screen` class that has `Draw(image)` and `Clear()` methods on it.  The documentation says something like &quot;the draw method draws the specified image on the screen&quot; and &quot;the clear method clears the screen&quot;.  If you wanted to display images sequentially, the correct way to do so would be to repeatedly call `Clear()` followed by `Draw()`.  That would be coding to the interface.  If you&#39;re coding to the implementation, you might do something like only calling the `Draw()` method because you know from looking at the implementation of `Draw()` that it internally calls `Clear()` before doing any drawing.  This is bad because you&#39;re now dependent on implementation details that you can&#39;t know from looking at the exposed interface.\r\n\r\nI look forward to seeing if anyone else shares this interpretation of the phrase in the OP&#39;s question, or if I&#39;m entirely off base...","title":"What does it mean to program to an interface?","body":"<p>My initial read of that statement is very different than any answer I've read yet.  I agree with all the people that say using interface types for your method params, etc are very important, but that's not what this statement means to me.</p>\n\n<p>My take is that it's telling you to write code that only depends on what the interface (in this case, I'm using \"interface\" to mean exposed methods of either a class or interface type) you're using says it does in the documentation.  This is the opposite of writing code that depends on the implementation details of the functions you're calling.  You should treat all function calls as black boxes (you can make exceptions to this if both functions are methods of the same class, but ideally it is maintained at all times).</p>\n\n<p>Example: suppose there is a <code>Screen</code> class that has <code>Draw(image)</code> and <code>Clear()</code> methods on it.  The documentation says something like \"the draw method draws the specified image on the screen\" and \"the clear method clears the screen\".  If you wanted to display images sequentially, the correct way to do so would be to repeatedly call <code>Clear()</code> followed by <code>Draw()</code>.  That would be coding to the interface.  If you're coding to the implementation, you might do something like only calling the <code>Draw()</code> method because you know from looking at the implementation of <code>Draw()</code> that it internally calls <code>Clear()</code> before doing any drawing.  This is bad because you're now dependent on implementation details that you can't know from looking at the exposed interface.</p>\n\n<p>I look forward to seeing if anyone else shares this interpretation of the phrase in the OP's question, or if I'm entirely off base...</p>\n"},{"comments":[{"owner":{"account_id":47968,"reputation":12181,"user_id":142299,"accept_rate":85,"display_name":"Kevin Boyd"},"score":0,"creation_date":1252859354,"post_id":1413650,"comment_id":1261139,"body_markdown":"As an example I had seen a class which had several private methods, and a couple of public methods which were internally calling these private methods. In this case we are exposing only a subset of the API. Is this good programming practice?","body":"As an example I had seen a class which had several private methods, and a couple of public methods which were internally calling these private methods. In this case we are exposing only a subset of the API. Is this good programming practice?"}],"tags":[],"owner":{"account_id":29108,"reputation":139857,"user_id":78374,"accept_rate":67,"display_name":"Stefano Borini"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1252834491,"creation_date":1252710030,"answer_id":1413650,"question_id":1413543,"body_markdown":"In addition to the other answers, I add more:\r\n\r\nYou program to an interface because it&#39;s easier to handle. The interface encapsulates the behavior of the underlying class. This way, the class is a blackbox. Your whole real life is programming to an interface. When you use a tv, a car, a stereo, you are acting on its interface, not on its implementation details, and you assume that if implementation changes (e.g. diesel engine or gas) the interface remains the same. Programming to an interface allows you to preserve your behavior when non-disruptive details are changed, optimized, or fixed. This simplifies also the task of documenting, learning, and using.\r\n\r\nAlso, programming to an interface allows you to delineate what is the behavior of your code before even writing it. You expect a class to do something. You can test this something even before you write the actual code that does it. When your interface is clean and done, and you like interacting with it, you can write the actual code that does things.\r\n\r\n","title":"What does it mean to program to an interface?","body":"<p>In addition to the other answers, I add more:</p>\n\n<p>You program to an interface because it's easier to handle. The interface encapsulates the behavior of the underlying class. This way, the class is a blackbox. Your whole real life is programming to an interface. When you use a tv, a car, a stereo, you are acting on its interface, not on its implementation details, and you assume that if implementation changes (e.g. diesel engine or gas) the interface remains the same. Programming to an interface allows you to preserve your behavior when non-disruptive details are changed, optimized, or fixed. This simplifies also the task of documenting, learning, and using.</p>\n\n<p>Also, programming to an interface allows you to delineate what is the behavior of your code before even writing it. You expect a class to do something. You can test this something even before you write the actual code that does it. When your interface is clean and done, and you like interacting with it, you can write the actual code that does things.</p>\n"},{"comments":[{"owner":{"account_id":47968,"reputation":12181,"user_id":142299,"accept_rate":85,"display_name":"Kevin Boyd"},"score":0,"creation_date":1252785898,"post_id":1413670,"comment_id":1258866,"body_markdown":"Fantastic! The books seem amazing too! Regarding the code, we have changed a line of code in the program from List items = new Vector();\nto  List items = new ArrayList(); so eventually we had to change some code in the client area so might as well change the remaining lines of code related to Vector that are going to break. I still dont understand the significance.","body":"Fantastic! The books seem amazing too! Regarding the code, we have changed a line of code in the program from List items = new Vector(); to  List items = new ArrayList(); so eventually we had to change some code in the client area so might as well change the remaining lines of code related to Vector that are going to break. I still dont understand the significance."},{"owner":{"account_id":53868,"reputation":1956,"user_id":161081,"accept_rate":25,"display_name":"weiji"},"score":1,"creation_date":1252824849,"post_id":1413670,"comment_id":1260024,"body_markdown":"It sounds like you have code which is expecting to use a Vector, which is exactly what is meant by &quot;programming to an implementation&quot;.  Your other code now expects to use Vector.  If, instead, you had your code expect the data structure to be a List (in other words, you declared items to be a List, so don&#39;t treat it like a specific subclass of List, and you thus &quot;program to an interface&quot;), then your other code wouldn&#39;t need modification later when you change the actual type by changing &quot;new Vector()&quot; to &quot;new ArrayList()&quot;.","body":"It sounds like you have code which is expecting to use a Vector, which is exactly what is meant by &quot;programming to an implementation&quot;.  Your other code now expects to use Vector.  If, instead, you had your code expect the data structure to be a List (in other words, you declared items to be a List, so don&#39;t treat it like a specific subclass of List, and you thus &quot;program to an interface&quot;), then your other code wouldn&#39;t need modification later when you change the actual type by changing &quot;new Vector()&quot; to &quot;new ArrayList()&quot;."}],"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1695748444,"creation_date":1252710474,"answer_id":1413670,"question_id":1413543,"body_markdown":"An interface defines the **methods** an object is commited to respond. \r\n\r\n\r\nWhen you code to the **interface**, you can change the underlying object and your code will **still work** ( because your code is agnostic of WHO do perform the job or HOW the job is performed )  You gain flexibility this way. \r\n\r\n\r\nWhen you code to a particular **implementation**, if you need to change the underlying object your code will **most likely break**, because the new object may not respond to the same methods. \r\n\r\n\r\nSo to put a clear example:\r\n\r\n\r\n   If you need to hold a number of objects you might have decided to use a [Vector][1]. \r\n\r\nIf you need to access the first object of the Vector you could write:\r\n\r\n     Vector items = new Vector(); \r\n     // fill it \r\n     Object first = items.firstElement();\r\n\r\nSo far so good.\r\n\r\n\r\nLater you decided that because for &quot;some&quot; reason you need to change the implementation ( let&#39;s say the Vector creates a bottleneck due to excessive synchronization) \r\n\r\nYou realize you need to use an [ArrayList][2] instad.\r\n\r\n\r\nWell, you code will break ... \r\n\r\n    ArrayList items = new ArrayList();\r\n    // fill it  \r\n    Object first = items.firstElement(); // compile time error. \r\n\r\n\r\nYou can&#39;t. This line and all those line who use the *firstElement()* method would break. \r\n\r\n\r\nIf you need specific behavior and you definitely need this method, it might be ok ( although you won&#39;t be able to change the implementation )  **But** if what you need is to simply retrieve the first element ( that is , there is nothing special with the Vector other that it has the firstElement() method )  then using the interface rather than the implementation would give you the flexibility to change.\r\n\r\n\r\n     List items = new Vector();\r\n     // fill it \r\n     Object first = items.get( 0 ); //\r\n\r\nIn this form you are not coding to the [get method of Vector][3], but to the [get method of List][4]. \r\n\r\n It does not matter how do the underlying object performs the method, as long as it respond to the contract of &quot;get the 0th element of the collection&quot; \r\n\r\n  This way you may later change it to any other implementation:\r\n\r\n     List items = new ArrayList(); // Or LinkedList or any other who implements List\r\n     // fill it \r\n     Object first = items.get( 0 ); // Doesn&#39;t break\r\n\r\nThis sample might look naive, but is the base on which OO technology is based ( even on those language which are not statically typed like Python, Ruby, Smalltalk, Objective-C etc ) \r\n\r\n\r\n  A more complex example is the way [JDBC][5] works.  You can change the driver, but most of your call will work the same way. For instance you could use the standard driver for oracle databases or you could use one more sophisticated like the ones Weblogic or Webpshere provide . Of course it isn&#39;t magical you still have to test your product before, but at least you don&#39;t have stuff like:\r\n\r\n\r\n\r\n     statement.executeOracle9iSomething();\r\n\r\nvs \r\n\r\n    statement.executeOracle11gSomething();\r\n\r\nSomething similar happens with Java Swing. \r\n\r\n \r\nAdditional reading:\r\n\r\n[Design Principles from Design Patterns][6]\r\n\r\n[Effective Java Item: Refer to objects by their interfaces][7]\r\n\r\n( Buying this book the one of the best things you could do in life - and read if of course - ) \r\n\r\n\r\n  [1]: http://java.sun.com/javase/6/docs/api/java/util/Vector.html\r\n  [2]: http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html\r\n  [3]: http://java.sun.com/javase/6/docs/api/java/util/Vector.html#get%28int%29\r\n  [4]: http://java.sun.com/javase/6/docs/api/java/util/List.html#get%28int%29\r\n  [5]: http://java.sun.com/javase/6/docs/api/java/sql/package-summary.html\r\n  [6]: http://www.artima.com/lejava/articles/designprinciplesP.html\r\n  [7]: https://books.google.de/books?id=ZZOiqZQIbRMC&amp;pg=PA156&amp;dq=Refer+to+objects+by+their+interfaces&amp;ei=39eqSpTuHZP4Nay7sLsN&amp;client=firefox-a&amp;redir_esc=y&amp;hl=de","title":"What does it mean to program to an interface?","body":"<p>An interface defines the <strong>methods</strong> an object is commited to respond.</p>\n<p>When you code to the <strong>interface</strong>, you can change the underlying object and your code will <strong>still work</strong> ( because your code is agnostic of WHO do perform the job or HOW the job is performed )  You gain flexibility this way.</p>\n<p>When you code to a particular <strong>implementation</strong>, if you need to change the underlying object your code will <strong>most likely break</strong>, because the new object may not respond to the same methods.</p>\n<p>So to put a clear example:</p>\n<p>If you need to hold a number of objects you might have decided to use a <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Vector.html\" rel=\"nofollow noreferrer\">Vector</a>.</p>\n<p>If you need to access the first object of the Vector you could write:</p>\n<pre><code> Vector items = new Vector(); \n // fill it \n Object first = items.firstElement();\n</code></pre>\n<p>So far so good.</p>\n<p>Later you decided that because for &quot;some&quot; reason you need to change the implementation ( let's say the Vector creates a bottleneck due to excessive synchronization)</p>\n<p>You realize you need to use an <a href=\"http://java.sun.com/javase/6/docs/api/java/util/ArrayList.html\" rel=\"nofollow noreferrer\">ArrayList</a> instad.</p>\n<p>Well, you code will break ...</p>\n<pre><code>ArrayList items = new ArrayList();\n// fill it  \nObject first = items.firstElement(); // compile time error. \n</code></pre>\n<p>You can't. This line and all those line who use the <em>firstElement()</em> method would break.</p>\n<p>If you need specific behavior and you definitely need this method, it might be ok ( although you won't be able to change the implementation )  <strong>But</strong> if what you need is to simply retrieve the first element ( that is , there is nothing special with the Vector other that it has the firstElement() method )  then using the interface rather than the implementation would give you the flexibility to change.</p>\n<pre><code> List items = new Vector();\n // fill it \n Object first = items.get( 0 ); //\n</code></pre>\n<p>In this form you are not coding to the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/Vector.html#get%28int%29\" rel=\"nofollow noreferrer\">get method of Vector</a>, but to the <a href=\"http://java.sun.com/javase/6/docs/api/java/util/List.html#get%28int%29\" rel=\"nofollow noreferrer\">get method of List</a>.</p>\n<p>It does not matter how do the underlying object performs the method, as long as it respond to the contract of &quot;get the 0th element of the collection&quot;</p>\n<p>This way you may later change it to any other implementation:</p>\n<pre><code> List items = new ArrayList(); // Or LinkedList or any other who implements List\n // fill it \n Object first = items.get( 0 ); // Doesn't break\n</code></pre>\n<p>This sample might look naive, but is the base on which OO technology is based ( even on those language which are not statically typed like Python, Ruby, Smalltalk, Objective-C etc )</p>\n<p>A more complex example is the way <a href=\"http://java.sun.com/javase/6/docs/api/java/sql/package-summary.html\" rel=\"nofollow noreferrer\">JDBC</a> works.  You can change the driver, but most of your call will work the same way. For instance you could use the standard driver for oracle databases or you could use one more sophisticated like the ones Weblogic or Webpshere provide . Of course it isn't magical you still have to test your product before, but at least you don't have stuff like:</p>\n<pre><code> statement.executeOracle9iSomething();\n</code></pre>\n<p>vs</p>\n<pre><code>statement.executeOracle11gSomething();\n</code></pre>\n<p>Something similar happens with Java Swing.</p>\n<p>Additional reading:</p>\n<p><a href=\"http://www.artima.com/lejava/articles/designprinciplesP.html\" rel=\"nofollow noreferrer\">Design Principles from Design Patterns</a></p>\n<p><a href=\"https://books.google.de/books?id=ZZOiqZQIbRMC&amp;pg=PA156&amp;dq=Refer+to+objects+by+their+interfaces&amp;ei=39eqSpTuHZP4Nay7sLsN&amp;client=firefox-a&amp;redir_esc=y&amp;hl=de\" rel=\"nofollow noreferrer\">Effective Java Item: Refer to objects by their interfaces</a></p>\n<p>( Buying this book the one of the best things you could do in life - and read if of course - )</p>\n"},{"comments":[{"owner":{"account_id":47968,"reputation":12181,"user_id":142299,"accept_rate":85,"display_name":"Kevin Boyd"},"score":1,"creation_date":1252784318,"post_id":1413766,"comment_id":1258771,"body_markdown":"Wonderful!.. Surely written by an Enlightened person!","body":"Wonderful!.. Surely written by an Enlightened person!"},{"owner":{"account_id":47968,"reputation":12181,"user_id":142299,"accept_rate":85,"display_name":"Kevin Boyd"},"score":1,"creation_date":1252784379,"post_id":1413766,"comment_id":1258773,"body_markdown":"Er!..But could you enlighten me!...What did the programmer do?","body":"Er!..But could you enlighten me!...What did the programmer do?"},{"owner":{"account_id":21605,"reputation":66264,"user_id":52626,"accept_rate":78,"display_name":"Wim Coenen"},"score":6,"creation_date":1252796814,"post_id":1413766,"comment_id":1259329,"body_markdown":"He realized he could make most code agnostic about the type of data source by programming against a single abstraction of the data source; an interface! Adding support for new data source types then becomes a matter of creating a new implementation of the interface. The rest of the code doesn&#39;t have to be touched. This is the **data mapper** pattern.","body":"He realized he could make most code agnostic about the type of data source by programming against a single abstraction of the data source; an interface! Adding support for new data source types then becomes a matter of creating a new implementation of the interface. The rest of the code doesn&#39;t have to be touched. This is the <b>data mapper</b> pattern."}],"tags":[],"owner":{"account_id":21605,"reputation":66264,"user_id":52626,"accept_rate":78,"display_name":"Wim Coenen"},"comment_count":3,"down_vote_count":0,"up_vote_count":19,"is_accepted":false,"score":19,"last_activity_date":1252796718,"creation_date":1252713092,"answer_id":1413766,"question_id":1413543,"body_markdown":"One day, a junior programmer was instructed by his boss to write an application to analyze business data and condense it all in pretty reports with metrics, graphs and all that stuff. The boss gave him an XML file with the remark &quot;here&#39;s some example business data&quot;.\r\n\r\nThe programmer started coding. A few weeks later he felt that the metrics and graphs and stuff were pretty enough to satisfy the boss, and he presented his work. &quot;That&#39;s great&quot; said the boss, &quot;but can it also show business data from this SQL database we have?&quot;.\r\n\r\nThe programmer went back to coding. There was code for reading business data from XML sprinkled throughout his application. He rewrote all those snippets, wrapping them with an &quot;if&quot; condition:\r\n\r\n    if (dataType == &quot;XML&quot;)\r\n    {\r\n       ... read a piece of XML data ...\r\n    }\r\n    else\r\n    {\r\n       .. query something from the SQL database ...\r\n    }\r\n\r\nWhen presented with the new iteration of the software, the boss replied: &quot;That&#39;s great, but can it also report on business data from this web service?&quot; Remembering all those tedious if statements he would have to rewrite AGAIN, the programmer became enraged. &quot;First xml, then SQL, now web services! What is the REAL source of business data?&quot;\r\n\r\nThe boss replied: &quot;Anything that can provide it&quot;\r\n\r\nAt that moment, the programmer was [enlightened][1].\r\n\r\n\r\n  [1]: http://martinfowler.com/eaaCatalog/dataMapper.html","title":"What does it mean to program to an interface?","body":"<p>One day, a junior programmer was instructed by his boss to write an application to analyze business data and condense it all in pretty reports with metrics, graphs and all that stuff. The boss gave him an XML file with the remark \"here's some example business data\".</p>\n\n<p>The programmer started coding. A few weeks later he felt that the metrics and graphs and stuff were pretty enough to satisfy the boss, and he presented his work. \"That's great\" said the boss, \"but can it also show business data from this SQL database we have?\".</p>\n\n<p>The programmer went back to coding. There was code for reading business data from XML sprinkled throughout his application. He rewrote all those snippets, wrapping them with an \"if\" condition:</p>\n\n<pre><code>if (dataType == \"XML\")\n{\n   ... read a piece of XML data ...\n}\nelse\n{\n   .. query something from the SQL database ...\n}\n</code></pre>\n\n<p>When presented with the new iteration of the software, the boss replied: \"That's great, but can it also report on business data from this web service?\" Remembering all those tedious if statements he would have to rewrite AGAIN, the programmer became enraged. \"First xml, then SQL, now web services! What is the REAL source of business data?\"</p>\n\n<p>The boss replied: \"Anything that can provide it\"</p>\n\n<p>At that moment, the programmer was <a href=\"http://martinfowler.com/eaaCatalog/dataMapper.html\" rel=\"noreferrer\">enlightened</a>.</p>\n"},{"comments":[{"owner":{"account_id":47968,"reputation":12181,"user_id":142299,"accept_rate":85,"display_name":"Kevin Boyd"},"score":0,"creation_date":1252760676,"post_id":1414156,"comment_id":1257772,"body_markdown":"No problem! regarding the language Java or C# as long as we get the understanding. Thanks!","body":"No problem! regarding the language Java or C# as long as we get the understanding. Thanks!"},{"owner":{"account_id":21994,"reputation":73808,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":0,"creation_date":1252763086,"post_id":1414156,"comment_id":1257866,"body_markdown":"In Java the convention is to use Door and not IDoor for the interface.","body":"In Java the convention is to use Door and not IDoor for the interface."}],"tags":[],"owner":{"account_id":22940,"reputation":1845,"user_id":57085,"accept_rate":70,"display_name":"CS."},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1252726151,"creation_date":1252725267,"answer_id":1414156,"question_id":1413543,"body_markdown":"**Look, I didn&#39;t realize this was for Java, and my code is based on C#, but I believe it provides the point.**\r\n\r\nEvery car have doors.\r\n\r\nBut not every door act the same, like in UK the taxi doors are backwards. One universal fact is that they &quot;Open&quot; and &quot;Close&quot;.\r\n\r\n\r\n\tinterface IDoor\r\n\t{\r\n\t\tvoid Open();\r\n\t\tvoid Close();\r\n\t}\r\n\r\n\tclass BackwardDoor : IDoor\r\n\t{\r\n\t\tpublic void Open()\r\n\t\t{\r\n\t\t   // code to make the door open the &quot;wrong way&quot;.\r\n\t\t}\r\n\r\n\t\tpublic void Close()\r\n\t\t{\r\n\t\t   // code to make the door close properly.\r\n\t\t}\r\n\t}\r\n\r\n\tclass RegularDoor : IDoor\r\n\t{\r\n\t\tpublic void Open()\r\n\t\t{\r\n\t\t\t// code to make the door open the &quot;proper way&quot;\r\n\t\t}\r\n\t\t\r\n\t\tpublic void Close()\r\n\t\t{\r\n\t\t\t// code to make the door close properly.\r\n\t\t}\r\n\t}\r\n\t\r\n\tclass RedUkTaxiDoor : BackwardDoor\r\n\t{\r\n\t\tpublic Color Color\r\n\t\t{\r\n\t\t\tget\r\n\t\t\t{\r\n\t\t\t\treturn Color.Red;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\nIf you are a car door repairer, you dont care how the door looks, or if it opens one way or the other way. Your only requirement is that the door acts like a door, such as IDoor.\r\n\r\n\tclass DoorRepairer\r\n\t{\r\n\t\tpublic void Repair(IDoor door)\r\n\t\t{\r\n\t\t\tdoor.Open();\r\n\t\t\t// Do stuff inside the car.\r\n\t\t\tdoor.Close();\r\n\t\t}\r\n\t}\r\n\r\n\r\nThe Repairer can handle RedUkTaxiDoor, RegularDoor and BackwardDoor. And any other type of doors, such as truck doors, limousine doors.\r\n\r\n\tDoorRepairer repairer = new DoorRepairer();\r\n\r\n\trepairer.Repair( new RegularDoor() );\r\n\trepairer.Repair( new BackwardDoor() );\r\n\trepairer.Repair( new RedUkTaxiDoor() );\r\n\r\nApply this for lists, you have LinkedList, Stack, Queue, the normal List, and if you want your own, MyList. They all implement the IList interface, which requires them to implement Add and Remove. So if your class add or remove items in any given list...\r\n\r\n\tclass ListAdder\r\n\t{\r\n\t\tpublic void PopulateWithSomething(IList list)\r\n\t\t{\r\n\t\t\t list.Add(&quot;one&quot;);\r\n\t\t\t list.Add(&quot;two&quot;);\r\n\t\t}\r\n\t}\r\n\r\n\tStack stack = new Stack();\r\n\tQueue queue = new Queue();\r\n\r\n\tListAdder la = new ListAdder()\r\n\tla.PopulateWithSomething(stack);\r\n\tla.PopulateWithSomething(queue);\r\n","title":"What does it mean to program to an interface?","body":"<p><strong>Look, I didn't realize this was for Java, and my code is based on C#, but I believe it provides the point.</strong></p>\n\n<p>Every car have doors.</p>\n\n<p>But not every door act the same, like in UK the taxi doors are backwards. One universal fact is that they \"Open\" and \"Close\".</p>\n\n<pre><code>interface IDoor\n{\n    void Open();\n    void Close();\n}\n\nclass BackwardDoor : IDoor\n{\n    public void Open()\n    {\n       // code to make the door open the \"wrong way\".\n    }\n\n    public void Close()\n    {\n       // code to make the door close properly.\n    }\n}\n\nclass RegularDoor : IDoor\n{\n    public void Open()\n    {\n        // code to make the door open the \"proper way\"\n    }\n\n    public void Close()\n    {\n        // code to make the door close properly.\n    }\n}\n\nclass RedUkTaxiDoor : BackwardDoor\n{\n    public Color Color\n    {\n        get\n        {\n            return Color.Red;\n        }\n    }\n}\n</code></pre>\n\n<p>If you are a car door repairer, you dont care how the door looks, or if it opens one way or the other way. Your only requirement is that the door acts like a door, such as IDoor.</p>\n\n<pre><code>class DoorRepairer\n{\n    public void Repair(IDoor door)\n    {\n        door.Open();\n        // Do stuff inside the car.\n        door.Close();\n    }\n}\n</code></pre>\n\n<p>The Repairer can handle RedUkTaxiDoor, RegularDoor and BackwardDoor. And any other type of doors, such as truck doors, limousine doors.</p>\n\n<pre><code>DoorRepairer repairer = new DoorRepairer();\n\nrepairer.Repair( new RegularDoor() );\nrepairer.Repair( new BackwardDoor() );\nrepairer.Repair( new RedUkTaxiDoor() );\n</code></pre>\n\n<p>Apply this for lists, you have LinkedList, Stack, Queue, the normal List, and if you want your own, MyList. They all implement the IList interface, which requires them to implement Add and Remove. So if your class add or remove items in any given list...</p>\n\n<pre><code>class ListAdder\n{\n    public void PopulateWithSomething(IList list)\n    {\n         list.Add(\"one\");\n         list.Add(\"two\");\n    }\n}\n\nStack stack = new Stack();\nQueue queue = new Queue();\n\nListAdder la = new ListAdder()\nla.PopulateWithSomething(stack);\nla.PopulateWithSomething(queue);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":36166,"reputation":38849,"user_id":103043,"display_name":"akf"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1252728793,"creation_date":1252728793,"answer_id":1414255,"question_id":1413543,"body_markdown":"Allen Holub wrote a great article for JavaWorld in 2003 on this topic called [Why extends is evil][1].  His take on the &quot;program to the interface&quot; statement, as you can gather from his title, is that you should happily implement interfaces, but very rarely use the `extends` keyword to subclass.  He points to, among other things, what is known as the [fragile base-class][2] problem.  From Wikipedia:\r\n\r\n&gt;a fundamental architectural problem of object-oriented programming systems where base classes (superclasses) are considered &quot;fragile&quot; because seemingly safe modifications to a base class, when inherited by the derived classes, may cause the derived classes to malfunction. The programmer cannot determine whether a base class change is safe simply by examining in isolation the methods of the base class. \r\n\r\n\r\n  [1]: http://www.javaworld.com/javaworld/jw-08-2003/jw-0801-toolbox.html\r\n  [2]: http://en.wikipedia.org/wiki/Fragile_base_class","title":"What does it mean to program to an interface?","body":"<p>Allen Holub wrote a great article for JavaWorld in 2003 on this topic called <a href=\"http://www.javaworld.com/javaworld/jw-08-2003/jw-0801-toolbox.html\" rel=\"nofollow noreferrer\">Why extends is evil</a>.  His take on the \"program to the interface\" statement, as you can gather from his title, is that you should happily implement interfaces, but very rarely use the <code>extends</code> keyword to subclass.  He points to, among other things, what is known as the <a href=\"http://en.wikipedia.org/wiki/Fragile_base_class\" rel=\"nofollow noreferrer\">fragile base-class</a> problem.  From Wikipedia:</p>\n\n<blockquote>\n  <p>a fundamental architectural problem of object-oriented programming systems where base classes (superclasses) are considered \"fragile\" because seemingly safe modifications to a base class, when inherited by the derived classes, may cause the derived classes to malfunction. The programmer cannot determine whether a base class change is safe simply by examining in isolation the methods of the base class. </p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":85265,"reputation":39803,"user_id":237838,"accept_rate":86,"display_name":"Andrew Barber"},"score":0,"creation_date":1354096115,"post_id":13601985,"comment_id":18646932,"body_markdown":"I can&#39;t even understand this answer... what is the point of it? And are you seriously saying that it&#39;s OK to write code that exposes 100 points of potential refactoring when you could (fairly easily) expose just one?","body":"I can&#39;t even understand this answer... what is the point of it? And are you seriously saying that it&#39;s OK to write code that exposes 100 points of potential refactoring when you could (fairly easily) expose just one?"},{"owner":{"account_id":1304828,"reputation":3423,"user_id":1254006,"accept_rate":40,"display_name":"rockXrock"},"score":0,"creation_date":1354116816,"post_id":13601985,"comment_id":18657447,"body_markdown":"thanks @Andrew, I have edited my post, hope this time it&#39;s better :). and also, weiji&#39;s example is good, my previous opinion was wrong, to keep code clear and refactor places less is always a good idea.","body":"thanks @Andrew, I have edited my post, hope this time it&#39;s better :). and also, weiji&#39;s example is good, my previous opinion was wrong, to keep code clear and refactor places less is always a good idea."}],"tags":[],"owner":{"account_id":1304828,"reputation":3423,"user_id":1254006,"accept_rate":40,"display_name":"rockXrock"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1354118674,"creation_date":1354095497,"answer_id":13601985,"question_id":1413543,"body_markdown":"&quot;Program to an interface&quot; can be more flexible. \r\n\r\nFor example, we are writing a class Printer which provides print service. currently there are 2 class (`Cat` and `Dog`) need to be printed. So we write code like below\r\n\r\n    class Printer\r\n    {\r\n        public void PrintCat(Cat cat)\r\n        {\r\n            ...\r\n        }\r\n\r\n        public void PrintDog(Dog dog)\r\n        {\r\n            ...\r\n        }\r\n        ...\r\n    }\r\n\r\nHow about if there is a new class `Bird` also needs this print service? We have to change `Printer` class to add a new method PrintBird(). In real case, when we develop Printer class, we  may have no idea about who will use it. So how to write `Printer`? Program to an interface can help, see below code\r\n\r\n\r\n    class Printer\r\n    {\r\n        public void Print(Printable p)\r\n        {\r\n            Bitmap bitmap = p.GetBitmap();\r\n            \r\n            // print bitmap ...\r\n        }\r\n    }\r\n\r\nWith this new Printer, everything can be printed as long as it implements Interface `Printable`. Here method GetBitmap() is just a example. The key thing is to expose an Interface not a implementation.\r\n\r\nHope it&#39;s helpful.\r\n\r\n","title":"What does it mean to program to an interface?","body":"<p>\"Program to an interface\" can be more flexible. </p>\n\n<p>For example, we are writing a class Printer which provides print service. currently there are 2 class (<code>Cat</code> and <code>Dog</code>) need to be printed. So we write code like below</p>\n\n<pre><code>class Printer\n{\n    public void PrintCat(Cat cat)\n    {\n        ...\n    }\n\n    public void PrintDog(Dog dog)\n    {\n        ...\n    }\n    ...\n}\n</code></pre>\n\n<p>How about if there is a new class <code>Bird</code> also needs this print service? We have to change <code>Printer</code> class to add a new method PrintBird(). In real case, when we develop Printer class, we  may have no idea about who will use it. So how to write <code>Printer</code>? Program to an interface can help, see below code</p>\n\n<pre><code>class Printer\n{\n    public void Print(Printable p)\n    {\n        Bitmap bitmap = p.GetBitmap();\n\n        // print bitmap ...\n    }\n}\n</code></pre>\n\n<p>With this new Printer, everything can be printed as long as it implements Interface <code>Printable</code>. Here method GetBitmap() is just a example. The key thing is to expose an Interface not a implementation.</p>\n\n<p>Hope it's helpful.</p>\n"},{"tags":[],"owner":{"account_id":2009968,"reputation":10226,"user_id":1798677,"accept_rate":77,"display_name":"Robert"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1423714322,"creation_date":1423713951,"answer_id":28469106,"question_id":1413543,"body_markdown":"It&#39;s basically where you make a method/interface like this: `create( &#39;apple&#39; )` where the method `create(param)` comes from an abstract class/interface `fruit` that is later implemented by concrete classes. This is different than subclassing. You are creating a contract that classes must fulfill. This also reduces coupling and making things more flexible where each concrete class implements it differently.\r\n\r\n The client code remains unaware of the specific types of objects used and remains unaware of the classes that implement these objects. Client code only knows about the interface `create(param)` and it uses it to make fruit objects. It&#39;s like saying, &quot;I don&#39;t care how you get it or make it I, just want you to give it to me.&quot;\r\n\r\n\r\nAn analogy to this is a set of on and off buttons. That is an interface `on()` and `off()`. You can use these buttons on several devices, a TV, radio, light. They all handle them differently but we don&#39;t care about that, all we care about is to turn it on or turn it off.","title":"What does it mean to program to an interface?","body":"<p>It's basically where you make a method/interface like this: <code>create( 'apple' )</code> where the method <code>create(param)</code> comes from an abstract class/interface <code>fruit</code> that is later implemented by concrete classes. This is different than subclassing. You are creating a contract that classes must fulfill. This also reduces coupling and making things more flexible where each concrete class implements it differently.</p>\n\n<p>The client code remains unaware of the specific types of objects used and remains unaware of the classes that implement these objects. Client code only knows about the interface <code>create(param)</code> and it uses it to make fruit objects. It's like saying, \"I don't care how you get it or make it I, just want you to give it to me.\"</p>\n\n<p>An analogy to this is a set of on and off buttons. That is an interface <code>on()</code> and <code>off()</code>. You can use these buttons on several devices, a TV, radio, light. They all handle them differently but we don't care about that, all we care about is to turn it on or turn it off.</p>\n"},{"tags":[],"owner":{"account_id":321889,"reputation":1214,"user_id":640989,"accept_rate":90,"display_name":"Israel"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653492196,"creation_date":1653492196,"answer_id":72380367,"question_id":1413543,"body_markdown":"**Coding to an interface** is a philosophy, rather than specific language constructs or design patterns - it instructs you what is the correct order of steps to follow in order to create **better software systems** (e.g. more resilient, more testable, more scalable, more extendible, and other nice traits). \r\n\r\n**What it actually means is:**   \r\n\r\n===  \r\n\r\n**Before jumping to implementations and coding (the HOW) - think of the WHAT:**  \r\n- What black boxes should make up your system, \r\n- What is each box&#39; responsibility, \r\n- What are the ways each &quot;client&quot; (that is, one of those other boxes, 3rd party &quot;boxes&quot;, or even humans) should communicate with it (the API of each box).   \r\n\r\n**After** you figure the above, go ahead and implement those boxes (the HOW).  \r\n   \r\nThinking first of what a box&#39; is and what its API, leads the developer to distil the box&#39; responsibility, and to mark for himself and future developers the difference between what is its exposed details (&quot;API&quot;) and it&#39;s hidden details (&quot;implementation details&quot;), which is a very important differentiation to have. \r\n\r\nOne immediate and easily noticeable gain is the team can then change and improve implementations without affecting the general architecture. It also makes the system MUCH more testable (it goes well with the TDD approach).\r\n\r\n===  \r\nBeyond the traits I&#39;ve mentioned above, you also save A LOT OF TIME going this direction. \r\n\r\nMicro Services and DDD, when done right, are great examples of &quot;Coding to an interface&quot;, however the concept wins in every pattern from monoliths to &quot;serverless&quot;, from BE to FE, from OOP to functional, etc.... \r\n\r\nI strongly recommend this approach for Software Engineering (and I basically believe it makes total sense in other fields as well).\r\n","title":"What does it mean to program to an interface?","body":"<p><strong>Coding to an interface</strong> is a philosophy, rather than specific language constructs or design patterns - it instructs you what is the correct order of steps to follow in order to create <strong>better software systems</strong> (e.g. more resilient, more testable, more scalable, more extendible, and other nice traits).</p>\n<p><strong>What it actually means is:</strong></p>\n<p>===</p>\n<p><strong>Before jumping to implementations and coding (the HOW) - think of the WHAT:</strong></p>\n<ul>\n<li>What black boxes should make up your system,</li>\n<li>What is each box' responsibility,</li>\n<li>What are the ways each &quot;client&quot; (that is, one of those other boxes, 3rd party &quot;boxes&quot;, or even humans) should communicate with it (the API of each box).</li>\n</ul>\n<p><strong>After</strong> you figure the above, go ahead and implement those boxes (the HOW).</p>\n<p>Thinking first of what a box' is and what its API, leads the developer to distil the box' responsibility, and to mark for himself and future developers the difference between what is its exposed details (&quot;API&quot;) and it's hidden details (&quot;implementation details&quot;), which is a very important differentiation to have.</p>\n<p>One immediate and easily noticeable gain is the team can then change and improve implementations without affecting the general architecture. It also makes the system MUCH more testable (it goes well with the TDD approach).</p>\n<p>===<br />\nBeyond the traits I've mentioned above, you also save A LOT OF TIME going this direction.</p>\n<p>Micro Services and DDD, when done right, are great examples of &quot;Coding to an interface&quot;, however the concept wins in every pattern from monoliths to &quot;serverless&quot;, from BE to FE, from OOP to functional, etc....</p>\n<p>I strongly recommend this approach for Software Engineering (and I basically believe it makes total sense in other fields as well).</p>\n"}],"owner":{"account_id":47968,"reputation":12181,"user_id":142299,"accept_rate":85,"display_name":"Kevin Boyd"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7240,"favorite_count":0,"down_vote_count":0,"up_vote_count":22,"accepted_answer_id":1413601,"answer_count":17,"score":22,"last_activity_date":1695748444,"creation_date":1252707928,"question_id":1413543,"body_markdown":"I keep hearing the statement on most programming related sites:  \r\n\r\n&gt; Program to an interface and not to an Implementation  \r\n\r\nHowever I don&#39;t understand the implications?  \r\nExamples would help.\r\n\r\nEDIT: I have received a lot of good answers even so could you&#39;ll supplement it with some snippets of code for a better understanding of the subject. Thanks!\r\n\r\n","title":"What does it mean to program to an interface?","body":"<p>I keep hearing the statement on most programming related sites:</p>\n<blockquote>\n<p>Program to an interface and not to an Implementation</p>\n</blockquote>\n<p>However I don't understand the implications?<br />\nExamples would help.</p>\n<p>EDIT: I have received a lot of good answers even so could you'll supplement it with some snippets of code for a better understanding of the subject. Thanks!</p>\n"},{"tags":["java","android","libgdx","sqliteopenhelper"],"answers":[{"tags":[],"owner":{"account_id":275938,"reputation":6148,"user_id":569085,"accept_rate":70,"display_name":"Rafay"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1695748277,"creation_date":1378136343,"answer_id":18576766,"question_id":15874824,"body_markdown":"There is an extension (called gdx-sqlite) that I wrote which will do most of the work you require. Latest build of this extension can be downloaded from [here][1]. The source code and read me are located at: https://github.com/mrafayaleem/gdx-sqlite\r\n\r\nThis extension currently supports Android and Desktop platforms. Also, there is no support to open databases located in the assets folder of the Android app. However, this is a pending feature and will be added soon.\r\n\r\nFollow the instructions in read me to setup your projects for database handling. Following is an example code:\r\n\r\n    package com.mrafayaleem.gdxsqlitetest;\r\n    \r\n    import com.badlogic.gdx.Gdx;\r\n    import com.badlogic.gdx.sql.Database;\r\n    import com.badlogic.gdx.sql.DatabaseCursor;\r\n    import com.badlogic.gdx.sql.DatabaseFactory;\r\n    import com.badlogic.gdx.sql.SQLiteGdxException;\r\n    \r\n    public class DatabaseTest {\r\n    \r\n        Database dbHandler;\r\n    \r\n        public static final String TABLE_COMMENTS = &quot;comments&quot;;\r\n        public static final String COLUMN_ID = &quot;_id&quot;;\r\n        public static final String COLUMN_COMMENT = &quot;comment&quot;;\r\n    \r\n        private static final String DATABASE_NAME = &quot;comments.db&quot;;\r\n        private static final int DATABASE_VERSION = 1;\r\n    \r\n        // Database creation sql statement\r\n        private static final String DATABASE_CREATE = &quot;create table if not exists &quot;\r\n                + TABLE_COMMENTS + &quot;(&quot; + COLUMN_ID\r\n                + &quot; integer primary key autoincrement, &quot; + COLUMN_COMMENT\r\n                + &quot; text not null);&quot;;\r\n    \r\n        public DatabaseTest() {\r\n            Gdx.app.log(&quot;DatabaseTest&quot;, &quot;creation started&quot;);\r\n            dbHandler = DatabaseFactory.getNewDatabase(DATABASE_NAME,\r\n                    DATABASE_VERSION, DATABASE_CREATE, null);\r\n    \r\n            dbHandler.setupDatabase();\r\n            try {\r\n                dbHandler.openOrCreateDatabase();\r\n                dbHandler.execSQL(DATABASE_CREATE);\r\n            } catch (SQLiteGdxException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            Gdx.app.log(&quot;DatabaseTest&quot;, &quot;created successfully&quot;);\r\n    \r\n            try {\r\n                dbHandler\r\n                        .execSQL(&quot;INSERT INTO comments (&#39;comment&#39;) VALUES (&#39;This is a test comment&#39;)&quot;);\r\n            } catch (SQLiteGdxException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            DatabaseCursor cursor = null;\r\n    \r\n            try {\r\n                cursor = dbHandler.rawQuery(&quot;SELECT * FROM comments&quot;);\r\n            } catch (SQLiteGdxException e) {\r\n                e.printStackTrace();\r\n            }\r\n            while (cursor.next()) {\r\n                Gdx.app.log(&quot;FromDb&quot;, String.valueOf(cursor.getString(1)));\r\n            }\r\n    \r\n            try {\r\n                dbHandler.closeDatabase();\r\n            } catch (SQLiteGdxException e) {\r\n                e.printStackTrace();\r\n            }\r\n            dbHandler = null;\r\n            Gdx.app.log(&quot;DatabaseTest&quot;, &quot;dispose&quot;);\r\n        }\r\n    }\r\n\r\n\r\n  [1]: https://support.google.com/drive/answer/6283888?visit_id=638313450462863169-4085271891&amp;p=unsupported_browser&amp;rd=1","title":"Using a SQLite database in Libgdx","body":"<p>There is an extension (called gdx-sqlite) that I wrote which will do most of the work you require. Latest build of this extension can be downloaded from <a href=\"https://support.google.com/drive/answer/6283888?visit_id=638313450462863169-4085271891&amp;p=unsupported_browser&amp;rd=1\" rel=\"nofollow noreferrer\">here</a>. The source code and read me are located at: <a href=\"https://github.com/mrafayaleem/gdx-sqlite\" rel=\"nofollow noreferrer\">https://github.com/mrafayaleem/gdx-sqlite</a></p>\n<p>This extension currently supports Android and Desktop platforms. Also, there is no support to open databases located in the assets folder of the Android app. However, this is a pending feature and will be added soon.</p>\n<p>Follow the instructions in read me to setup your projects for database handling. Following is an example code:</p>\n<pre><code>package com.mrafayaleem.gdxsqlitetest;\n\nimport com.badlogic.gdx.Gdx;\nimport com.badlogic.gdx.sql.Database;\nimport com.badlogic.gdx.sql.DatabaseCursor;\nimport com.badlogic.gdx.sql.DatabaseFactory;\nimport com.badlogic.gdx.sql.SQLiteGdxException;\n\npublic class DatabaseTest {\n\n    Database dbHandler;\n\n    public static final String TABLE_COMMENTS = &quot;comments&quot;;\n    public static final String COLUMN_ID = &quot;_id&quot;;\n    public static final String COLUMN_COMMENT = &quot;comment&quot;;\n\n    private static final String DATABASE_NAME = &quot;comments.db&quot;;\n    private static final int DATABASE_VERSION = 1;\n\n    // Database creation sql statement\n    private static final String DATABASE_CREATE = &quot;create table if not exists &quot;\n            + TABLE_COMMENTS + &quot;(&quot; + COLUMN_ID\n            + &quot; integer primary key autoincrement, &quot; + COLUMN_COMMENT\n            + &quot; text not null);&quot;;\n\n    public DatabaseTest() {\n        Gdx.app.log(&quot;DatabaseTest&quot;, &quot;creation started&quot;);\n        dbHandler = DatabaseFactory.getNewDatabase(DATABASE_NAME,\n                DATABASE_VERSION, DATABASE_CREATE, null);\n\n        dbHandler.setupDatabase();\n        try {\n            dbHandler.openOrCreateDatabase();\n            dbHandler.execSQL(DATABASE_CREATE);\n        } catch (SQLiteGdxException e) {\n            e.printStackTrace();\n        }\n\n        Gdx.app.log(&quot;DatabaseTest&quot;, &quot;created successfully&quot;);\n\n        try {\n            dbHandler\n                    .execSQL(&quot;INSERT INTO comments ('comment') VALUES ('This is a test comment')&quot;);\n        } catch (SQLiteGdxException e) {\n            e.printStackTrace();\n        }\n\n        DatabaseCursor cursor = null;\n\n        try {\n            cursor = dbHandler.rawQuery(&quot;SELECT * FROM comments&quot;);\n        } catch (SQLiteGdxException e) {\n            e.printStackTrace();\n        }\n        while (cursor.next()) {\n            Gdx.app.log(&quot;FromDb&quot;, String.valueOf(cursor.getString(1)));\n        }\n\n        try {\n            dbHandler.closeDatabase();\n        } catch (SQLiteGdxException e) {\n            e.printStackTrace();\n        }\n        dbHandler = null;\n        Gdx.app.log(&quot;DatabaseTest&quot;, &quot;dispose&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":746896,"reputation":2167,"user_id":736007,"accept_rate":96,"display_name":"Cristiano Santos"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":14668,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"answer_count":1,"score":18,"last_activity_date":1695748277,"creation_date":1365410694,"question_id":15874824,"body_markdown":"I&#39;m new in Libgdx and I&#39;m getting trouble on using a database on my game.\r\n\r\nI searched for a tutorial on how to make SQLite work on both Android and Desktop applications using Libgdx but I didn&#39;t found a easy one.\r\n\r\nThe last time I used a database in Android, I created a class that extends from `SQLiteOpenHelper`.\r\n\r\nIs there a simple way to do the same using Libgdx? Or at least, can anyone point me to a step-by-step tutorial or something similar?\r\n\r\n**EDIT**\r\n\r\nI forgot to say that I&#39;m looking for something that let me manage versions like `SQLiteOpenHelper`. In other words, I want to recreate my database in Android on apk installation, when I change the version of my DB on code.\r\n\r\n**SOLUTION**\r\n\r\nFollowing `@42n4` answer, I managed how to connect to SQLite Database using `SQLiteOpenHelper` on Android Application and `JDBC` on Desktop Application.\r\n\r\nFirst, I created a &quot;common class&quot; for both Desktop and Android Applications:\r\n\r\n\t//General class that needs to be implemented on Android and Desktop Applications\r\n\tpublic abstract class DataBase {\r\n\r\n\t\tprotected static String database_name=&quot;recycling_separation&quot;;\r\n\t\tprotected static DataBase instance = null;\r\n\t\tprotected static int version=1;\r\n\t\t\r\n\t\t//Runs a sql query like &quot;create&quot;.\r\n\t\tpublic abstract void execute(String sql);\r\n\t\t\r\n\t\t//Identical to execute but returns the number of rows affected (useful for updates)\r\n\t\tpublic abstract int executeUpdate(String sql);\r\n\t\t\r\n\t\t//Runs a query and returns an Object with all the results of the query. [Result Interface is defined below]\r\n\t\tpublic abstract Result query(String sql);\r\n\t\t\r\n\t\tpublic void onCreate(){\r\n\t\t\t//Example of Highscore table code (You should change this for your own DB code creation)\r\n\t\t\texecute(&quot;CREATE TABLE &#39;highscores&#39; (&#39;_id&#39; INTEGER PRIMARY KEY  NOT NULL , &#39;name&#39; VARCHAR NOT NULL , &#39;score&#39; INTEGER NOT NULL );&quot;);\r\n\t\t\texecute(&quot;INSERT INTO &#39;highscores&#39;(name,score) values (&#39;Cris&#39;,1234)&quot;);\r\n\t\t\t//Example of query to get DB data of Highscore table\r\n\t\t\tResult q=query(&quot;SELECT * FROM &#39;highscores&#39;&quot;);\r\n\t\t\tif (!q.isEmpty()){\r\n\t\t\t\tq.moveToNext();\r\n\t\t\t\tSystem.out.println(&quot;Highscore of &quot;+q.getString(q.getColumnIndex(&quot;name&quot;))+&quot;: &quot;+q.getString(q.getColumnIndex(&quot;score&quot;)));\r\n\t\t\t}\r\n\t\t}\r\n\t\t\t\r\n\t\tpublic void onUpgrade(){\r\n\t\t\t//Example code (You should change this for your own DB code)\r\n\t\t\texecute(&quot;DROP TABLE IF EXISTS &#39;highscores&#39;;&quot;);\r\n\t\t\tonCreate();\r\n\t\t\tSystem.out.println(&quot;DB Upgrade maded because I changed DataBase.version on code&quot;);\r\n\t\t}\r\n\t\t\r\n\t\t//Interface to be implemented on both Android and Desktop Applications\r\n\t\tpublic interface Result{\r\n\t\t\tpublic boolean isEmpty();\r\n\t\t\tpublic boolean moveToNext();\r\n\t\t\tpublic int getColumnIndex(String name);\r\n\t\t\tpublic float getFloat(int columnIndex);\r\n\t\t\t[...]\r\n\t\t}\r\n\t}\r\n\r\nThen, I created a `DatabaseDesktop` Class for Desktop Application:\r\n\r\n\t\tpublic class DatabaseDesktop extends DataBase{\r\n\t\tprotected Connection db_connection;\r\n\t\tprotected Statement stmt;\r\n\t\tprotected boolean nodatabase=false;\r\n\r\n\t\tpublic DatabaseDesktop() {\r\n\t\t\tloadDatabase();\r\n\t\t\tif (isNewDatabase()){\r\n\t\t\t\tonCreate();\r\n\t\t\t\tupgradeVersion();\r\n\t\t\t} else if (isVersionDifferent()){\r\n\t\t\t\tonUpgrade();\r\n\t\t\t\tupgradeVersion();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\r\n\t\tpublic void execute(String sql){\r\n\t\t\ttry {\r\n\t\t\t\tstmt.execute(sql);\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tpublic int executeUpdate(String sql){\r\n\t\t\ttry {\r\n\t\t\t\treturn stmt.executeUpdate(sql);\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t}\r\n\t\t\r\n\t\tpublic Result query(String sql) {\r\n\t\t\ttry {\r\n\t\t\t\treturn new ResultDesktop(stmt.executeQuery(sql));\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tprivate void loadDatabase(){\r\n\t\t\tFile file = new File (database_name+&quot;.db&quot;);\r\n\t\t\tif(!file.exists())\r\n\t\t\t\tnodatabase=true;\r\n\t\t\ttry {\r\n\t\t\t\tClass.forName(&quot;org.sqlite.JDBC&quot;);\r\n\t\t\t\tdb_connection = DriverManager.getConnection(&quot;jdbc:sqlite:&quot;+database_name+&quot;.db&quot;);\r\n\t\t\t\tstmt = db_connection.createStatement();\r\n\t\t\t} catch (ClassNotFoundException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t} catch (SQLException e) {\r\n\t\t\t\te.printStackTrace();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tprivate void upgradeVersion() {\r\n\t\t\texecute(&quot;PRAGMA user_version=&quot;+version);\r\n\t\t}\r\n\r\n\t\tprivate boolean isNewDatabase() {\r\n\t\t\treturn nodatabase;\r\n\t\t}\r\n\t\t\r\n\t\tprivate boolean isVersionDifferent(){\r\n\t\t\tResult q=query(&quot;PRAGMA user_version&quot;);\r\n\t\t\tif (!q.isEmpty())\r\n\t\t\t\treturn (q.getInt(1)!=version);\r\n\t\t\telse \r\n\t\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\tpublic class ResultDesktop implements Result{\r\n\t\t\t\r\n\t\t\tResultSet res;\r\n\t\t\tboolean called_is_empty=false;\r\n\r\n\t\t\tpublic ResultDesktop(ResultSet res) {\r\n\t\t\t\tthis.res = res;\r\n\t\t\t}\r\n\r\n\t\t\tpublic boolean isEmpty() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (res.getRow()==0){\r\n\t\t\t\t\t\tcalled_is_empty=true;\r\n\t\t\t\t\t\treturn !res.next();\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn res.getRow()==0;\r\n\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tpublic boolean moveToNext() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (called_is_empty){\r\n\t\t\t\t\t\tcalled_is_empty=false;\r\n\t\t\t\t\t\treturn true;\r\n\t\t\t\t\t} else\r\n\t\t\t\t\t\treturn res.next();\r\n\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tpublic int getColumnIndex(String name) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn res.findColumn(name);\r\n\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\r\n\t\t\tpublic float getFloat(int columnIndex) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\treturn res.getFloat(columnIndex);\r\n\t\t\t\t} catch (SQLException e) {\r\n\t\t\t\t\te.printStackTrace();\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t[...]\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\r\nAnd a `DatabaseAndroid` for Android Application\r\n\r\n\tpublic class DatabaseAndroid extends DataBase{\r\n\t\tprotected SQLiteOpenHelper db_connection;\r\n\t\tprotected SQLiteDatabase stmt;\r\n\r\n\t\tpublic DatabaseAndroid(Context context) {\r\n\t\t\tdb_connection = new AndroidDB(context, database_name, null, version);\r\n\t\t\tstmt=db_connection.getWritableDatabase();\r\n\t\t}\r\n\t\t\r\n\t\tpublic void execute(String sql){\r\n\t\t\tstmt.execSQL(sql);\r\n\t\t}\r\n\t\t\r\n\t\tpublic int executeUpdate(String sql){\r\n\t\t\tstmt.execSQL(sql);\r\n\t\t\tSQLiteStatement tmp = stmt.compileStatement(&quot;SELECT CHANGES()&quot;);\r\n\t\t\treturn (int) tmp.simpleQueryForLong();\r\n\t\t}\r\n\t\t\r\n\t\tpublic Result query(String sql) {\r\n\t\t\tResultAndroid result=new ResultAndroid(stmt.rawQuery(sql,null));\r\n\t\t\treturn result;\r\n\t\t}\r\n\t\t\r\n\t\tclass AndroidDB extends SQLiteOpenHelper {\r\n\r\n\t\t\tpublic AndroidDB(Context context, String name, CursorFactory factory,\r\n\t\t\t\t\tint version) {\r\n\t\t\t\tsuper(context, name, factory, version);\r\n\t\t\t}\r\n\r\n\t\t\tpublic void onCreate(SQLiteDatabase db) {\r\n\t\t\t\tstmt=db;\r\n\t\t\t\tDatabaseAndroid.this.onCreate();\r\n\t\t\t}\r\n\r\n\t\t\tpublic void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\r\n\t\t\t\tstmt=db;\r\n\t\t\t\tDatabaseAndroid.this.onUpgrade();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tpublic class ResultAndroid implements Result{\r\n\t\t\tCursor cursor;\r\n\t\t\t\r\n\t\t\tpublic ResultAndroid(Cursor cursor) {\r\n\t\t\t\tthis.cursor=cursor;\r\n\t\t\t}\r\n\r\n\t\t\tpublic boolean isEmpty() {\r\n\t\t\t\treturn cursor.getCount()==0;\r\n\t\t\t}\r\n\r\n\t\t\tpublic int getColumnIndex(String name) {\r\n\t\t\t\treturn cursor.getColumnIndex(name);\r\n\t\t\t}\r\n\r\n\t\t\tpublic String[] getColumnNames() {\r\n\t\t\t\treturn cursor.getColumnNames();\r\n\t\t\t}\r\n\r\n\t\t\tpublic float getFloat(int columnIndex) {\r\n\t\t\t\treturn cursor.getFloat(columnIndex);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t[...]\r\n\t\t\t\r\n\t\t}\r\n\r\n\t}\r\n\r\nFinally, I changed the Main Classes of both Android and Desktop Applications:\r\n\r\n\tpublic class Main extends AndroidApplication {\r\n\r\n\t\tpublic void onCreate(Bundle savedInstanceState) {\r\n\t\t\tsuper.onCreate(savedInstanceState);\r\n\t\t\tinitialize(new MyGame(new DatabaseAndroid(this.getBaseContext())), false);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic class Main {\r\n\r\n\t\tpublic static void main(String[] args) {\r\n\t\t\tnew LwjglApplication(new MyGame(new DatabaseDesktop()), &quot;Example&quot;, MyGame.SCREEN_WIDTH, MyGame.SCREEN_HEIGHT,false);\r\n\t\t}\r\n\r\n\t}\r\n\r\nNote that:\r\n\r\nI made a version management like the one that happens in `SQLiteOpenHelper` using the `PRAGMA user_version`. This way, I just change the version of the `DataBase` class when I need to upgrade it.\r\n\r\nI didn&#39;t put all the methods that I made on `Result` but, I put the ones that I think that are more important.that are more important.","title":"Using a SQLite database in Libgdx","body":"<p>I'm new in Libgdx and I'm getting trouble on using a database on my game.</p>\n\n<p>I searched for a tutorial on how to make SQLite work on both Android and Desktop applications using Libgdx but I didn't found a easy one.</p>\n\n<p>The last time I used a database in Android, I created a class that extends from <code>SQLiteOpenHelper</code>.</p>\n\n<p>Is there a simple way to do the same using Libgdx? Or at least, can anyone point me to a step-by-step tutorial or something similar?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I forgot to say that I'm looking for something that let me manage versions like <code>SQLiteOpenHelper</code>. In other words, I want to recreate my database in Android on apk installation, when I change the version of my DB on code.</p>\n\n<p><strong>SOLUTION</strong></p>\n\n<p>Following <code>@42n4</code> answer, I managed how to connect to SQLite Database using <code>SQLiteOpenHelper</code> on Android Application and <code>JDBC</code> on Desktop Application.</p>\n\n<p>First, I created a \"common class\" for both Desktop and Android Applications:</p>\n\n<pre><code>//General class that needs to be implemented on Android and Desktop Applications\npublic abstract class DataBase {\n\n    protected static String database_name=\"recycling_separation\";\n    protected static DataBase instance = null;\n    protected static int version=1;\n\n    //Runs a sql query like \"create\".\n    public abstract void execute(String sql);\n\n    //Identical to execute but returns the number of rows affected (useful for updates)\n    public abstract int executeUpdate(String sql);\n\n    //Runs a query and returns an Object with all the results of the query. [Result Interface is defined below]\n    public abstract Result query(String sql);\n\n    public void onCreate(){\n        //Example of Highscore table code (You should change this for your own DB code creation)\n        execute(\"CREATE TABLE 'highscores' ('_id' INTEGER PRIMARY KEY  NOT NULL , 'name' VARCHAR NOT NULL , 'score' INTEGER NOT NULL );\");\n        execute(\"INSERT INTO 'highscores'(name,score) values ('Cris',1234)\");\n        //Example of query to get DB data of Highscore table\n        Result q=query(\"SELECT * FROM 'highscores'\");\n        if (!q.isEmpty()){\n            q.moveToNext();\n            System.out.println(\"Highscore of \"+q.getString(q.getColumnIndex(\"name\"))+\": \"+q.getString(q.getColumnIndex(\"score\")));\n        }\n    }\n\n    public void onUpgrade(){\n        //Example code (You should change this for your own DB code)\n        execute(\"DROP TABLE IF EXISTS 'highscores';\");\n        onCreate();\n        System.out.println(\"DB Upgrade maded because I changed DataBase.version on code\");\n    }\n\n    //Interface to be implemented on both Android and Desktop Applications\n    public interface Result{\n        public boolean isEmpty();\n        public boolean moveToNext();\n        public int getColumnIndex(String name);\n        public float getFloat(int columnIndex);\n        [...]\n    }\n}\n</code></pre>\n\n<p>Then, I created a <code>DatabaseDesktop</code> Class for Desktop Application:</p>\n\n<pre><code>    public class DatabaseDesktop extends DataBase{\n    protected Connection db_connection;\n    protected Statement stmt;\n    protected boolean nodatabase=false;\n\n    public DatabaseDesktop() {\n        loadDatabase();\n        if (isNewDatabase()){\n            onCreate();\n            upgradeVersion();\n        } else if (isVersionDifferent()){\n            onUpgrade();\n            upgradeVersion();\n        }\n\n    }\n\n    public void execute(String sql){\n        try {\n            stmt.execute(sql);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public int executeUpdate(String sql){\n        try {\n            return stmt.executeUpdate(sql);\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        return 0;\n    }\n\n    public Result query(String sql) {\n        try {\n            return new ResultDesktop(stmt.executeQuery(sql));\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n        return null;\n    }\n\n    private void loadDatabase(){\n        File file = new File (database_name+\".db\");\n        if(!file.exists())\n            nodatabase=true;\n        try {\n            Class.forName(\"org.sqlite.JDBC\");\n            db_connection = DriverManager.getConnection(\"jdbc:sqlite:\"+database_name+\".db\");\n            stmt = db_connection.createStatement();\n        } catch (ClassNotFoundException e) {\n            e.printStackTrace();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n\n    private void upgradeVersion() {\n        execute(\"PRAGMA user_version=\"+version);\n    }\n\n    private boolean isNewDatabase() {\n        return nodatabase;\n    }\n\n    private boolean isVersionDifferent(){\n        Result q=query(\"PRAGMA user_version\");\n        if (!q.isEmpty())\n            return (q.getInt(1)!=version);\n        else \n            return true;\n    }\n\n    public class ResultDesktop implements Result{\n\n        ResultSet res;\n        boolean called_is_empty=false;\n\n        public ResultDesktop(ResultSet res) {\n            this.res = res;\n        }\n\n        public boolean isEmpty() {\n            try {\n                if (res.getRow()==0){\n                    called_is_empty=true;\n                    return !res.next();\n                }\n                return res.getRow()==0;\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            return false;\n        }\n\n        public boolean moveToNext() {\n            try {\n                if (called_is_empty){\n                    called_is_empty=false;\n                    return true;\n                } else\n                    return res.next();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            return false;\n        }\n\n        public int getColumnIndex(String name) {\n            try {\n                return res.findColumn(name);\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            return 0;\n        }\n\n        public float getFloat(int columnIndex) {\n            try {\n                return res.getFloat(columnIndex);\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n            return 0;\n        }\n\n        [...]\n\n    }\n\n}\n</code></pre>\n\n<p>And a <code>DatabaseAndroid</code> for Android Application</p>\n\n<pre><code>public class DatabaseAndroid extends DataBase{\n    protected SQLiteOpenHelper db_connection;\n    protected SQLiteDatabase stmt;\n\n    public DatabaseAndroid(Context context) {\n        db_connection = new AndroidDB(context, database_name, null, version);\n        stmt=db_connection.getWritableDatabase();\n    }\n\n    public void execute(String sql){\n        stmt.execSQL(sql);\n    }\n\n    public int executeUpdate(String sql){\n        stmt.execSQL(sql);\n        SQLiteStatement tmp = stmt.compileStatement(\"SELECT CHANGES()\");\n        return (int) tmp.simpleQueryForLong();\n    }\n\n    public Result query(String sql) {\n        ResultAndroid result=new ResultAndroid(stmt.rawQuery(sql,null));\n        return result;\n    }\n\n    class AndroidDB extends SQLiteOpenHelper {\n\n        public AndroidDB(Context context, String name, CursorFactory factory,\n                int version) {\n            super(context, name, factory, version);\n        }\n\n        public void onCreate(SQLiteDatabase db) {\n            stmt=db;\n            DatabaseAndroid.this.onCreate();\n        }\n\n        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {\n            stmt=db;\n            DatabaseAndroid.this.onUpgrade();\n        }\n\n    }\n\n    public class ResultAndroid implements Result{\n        Cursor cursor;\n\n        public ResultAndroid(Cursor cursor) {\n            this.cursor=cursor;\n        }\n\n        public boolean isEmpty() {\n            return cursor.getCount()==0;\n        }\n\n        public int getColumnIndex(String name) {\n            return cursor.getColumnIndex(name);\n        }\n\n        public String[] getColumnNames() {\n            return cursor.getColumnNames();\n        }\n\n        public float getFloat(int columnIndex) {\n            return cursor.getFloat(columnIndex);\n        }\n\n        [...]\n\n    }\n\n}\n</code></pre>\n\n<p>Finally, I changed the Main Classes of both Android and Desktop Applications:</p>\n\n<pre><code>public class Main extends AndroidApplication {\n\n    public void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        initialize(new MyGame(new DatabaseAndroid(this.getBaseContext())), false);\n    }\n}\n\npublic class Main {\n\n    public static void main(String[] args) {\n        new LwjglApplication(new MyGame(new DatabaseDesktop()), \"Example\", MyGame.SCREEN_WIDTH, MyGame.SCREEN_HEIGHT,false);\n    }\n\n}\n</code></pre>\n\n<p>Note that:</p>\n\n<p>I made a version management like the one that happens in <code>SQLiteOpenHelper</code> using the <code>PRAGMA user_version</code>. This way, I just change the version of the <code>DataBase</code> class when I need to upgrade it.</p>\n\n<p>I didn't put all the methods that I made on <code>Result</code> but, I put the ones that I think that are more important.that are more important.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695752385,"post_id":77182109,"comment_id":136065595,"body_markdown":"You shouldn&#39;t use this to pass information to an aspect. Especially if that gets invoked afterwards, as things get cleaned up. If you want more knowledge about those classes read the Servlet Specification that explains exactly what those are.","body":"You shouldn&#39;t use this to pass information to an aspect. Especially if that gets invoked afterwards, as things get cleaned up. If you want more knowledge about those classes read the Servlet Specification that explains exactly what those are."},{"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"score":0,"creation_date":1695784848,"post_id":77182109,"comment_id":136069290,"body_markdown":"It will be helpful if you provide more information. Can we use threads to store the data and get it in aspect classes?","body":"It will be helpful if you provide more information. Can we use threads to store the data and get it in aspect classes?"},{"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"score":0,"creation_date":1695791338,"post_id":77182109,"comment_id":136069807,"body_markdown":"Can I autowire HttpServletRequest in aspect class. Is this a good idea?","body":"Can I autowire HttpServletRequest in aspect class. Is this a good idea?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1695798000,"post_id":77182109,"comment_id":136070626,"body_markdown":"No it isn&#39;t (IMHO) as that ties your aspect to the web. Store the state in a thread local (like the SecurityContextHolder from Spring Security) and use that.","body":"No it isn&#39;t (IMHO) as that ties your aspect to the web. Store the state in a thread local (like the SecurityContextHolder from Spring Security) and use that."}],"owner":{"account_id":29104131,"reputation":25,"user_id":22295330,"display_name":"Iswarya Elango"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695748128,"creation_date":1695748128,"question_id":77182109,"body_markdown":"Here, in this code, when I get the request, it will get the intakeNumber from the header and set it into the servletcontext. I am trying to get this attribute from the aspect class. This aspect will be executed after returning the response from the controller.\r\n    \r\nWhen I am getting the attribute from the servlet context, sometimes value is there and sometimes value is not there in the servletcontext. so setting attribute in servletcontext works inconsistently.\r\n    \r\nI have replaced it with servletRequest, and then I can get the intakeNumber all the time.\r\n    \r\nThough I used the servletRequest, I am not sure about how internally it is working.\r\n    \r\n1. Kindly provide knowledge about servletContext and servletRequest.\r\n2. Please tell me when it should be used.\r\n3. Please tell me why this issue is occurring.    \r\n\r\nThank you!\r\n\r\n    @Component\r\n    public class APIAttributeInitializeFilter implements Filter{\r\n    \r\n    @Autowired\r\n    ServletContext servletContext;\r\n    \r\n    @Override\r\n    public void doFilter(ServletRequest servletRequest,ServletResponse ServletResponse, FilterChain filterChain){\r\n    \r\n    \r\n    HttpServletRequest httpReq=(HttpServletRequest)servletRequest;\r\n    servletContext.setAttribute(&quot;intakeNumber&quot;,httpReq.getHeader(&quot;intakeNumber&quot;);\r\n    }\r\n    }","title":"Servletcontext attribute works inconsistently","body":"<p>Here, in this code, when I get the request, it will get the intakeNumber from the header and set it into the servletcontext. I am trying to get this attribute from the aspect class. This aspect will be executed after returning the response from the controller.</p>\n<p>When I am getting the attribute from the servlet context, sometimes value is there and sometimes value is not there in the servletcontext. so setting attribute in servletcontext works inconsistently.</p>\n<p>I have replaced it with servletRequest, and then I can get the intakeNumber all the time.</p>\n<p>Though I used the servletRequest, I am not sure about how internally it is working.</p>\n<ol>\n<li>Kindly provide knowledge about servletContext and servletRequest.</li>\n<li>Please tell me when it should be used.</li>\n<li>Please tell me why this issue is occurring.</li>\n</ol>\n<p>Thank you!</p>\n<pre><code>@Component\npublic class APIAttributeInitializeFilter implements Filter{\n\n@Autowired\nServletContext servletContext;\n\n@Override\npublic void doFilter(ServletRequest servletRequest,ServletResponse ServletResponse, FilterChain filterChain){\n\n\nHttpServletRequest httpReq=(HttpServletRequest)servletRequest;\nservletContext.setAttribute(&quot;intakeNumber&quot;,httpReq.getHeader(&quot;intakeNumber&quot;);\n}\n}\n</code></pre>\n"},{"tags":["java","sql","spring","hibernate","database-schema"],"comments":[{"owner":{"account_id":22759914,"reputation":1,"user_id":16918907,"display_name":"Marcus Peterson "},"score":0,"creation_date":1695746911,"post_id":77181965,"comment_id":136064653,"body_markdown":"Just to be clear, I don&#39;t want to add this behavior in a SQL query, this should already be built into the java code. \n\nThe purpose of this database isn&#39;t so that I would need to do modifications inside of workbench or something similiar\n\nI know I can add ``` ALTER TABLE temp_table MODIFY id INT AUTO_INCREMENT PRIMARY KEY;\n````\n\nInto workbench, but then that would just make the Hibernate database useless","body":"Just to be clear, I don&#39;t want to add this behavior in a SQL query, this should already be built into the java code.   The purpose of this database isn&#39;t so that I would need to do modifications inside of workbench or something similiar  I know I can add ``` ALTER TABLE temp_table MODIFY id INT AUTO_INCREMENT PRIMARY KEY; ````  Into workbench, but then that would just make the Hibernate database useless"}],"answers":[{"comments":[{"owner":{"account_id":22759914,"reputation":1,"user_id":16918907,"display_name":"Marcus Peterson "},"score":1,"creation_date":1695748052,"post_id":77182017,"comment_id":136064854,"body_markdown":"EEEEHH AA! Thank you so much, it works now!!","body":"EEEEHH AA! Thank you so much, it works now!!"}],"tags":[],"owner":{"account_id":1601811,"reputation":453,"user_id":1482699,"display_name":"Dennis"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695747214,"creation_date":1695747214,"answer_id":77182017,"question_id":77181965,"body_markdown":"Just a heads up: when you use `GenerationType.AUTO` with Hibernate, it typically opts for a `SEQUENCE` in the database rather than the `AUTO_INCREMENT` feature. This means the default value for this column would be `null` in the database.\r\n\r\nIf you&#39;re looking to change this, consider using `GenerationType.IDENTITY` or `GenerationType.TABLE`. For instance, `GenerationType.TABLE` will leverage the `AUTO_INCREMENT` feature in databases like MariaDB.\r\n\r\nHope this helps!","title":"I am getting Field &#39;id&#39; doesn&#39;t have a default value in my Java Hibernate database","body":"<p>Just a heads up: when you use <code>GenerationType.AUTO</code> with Hibernate, it typically opts for a <code>SEQUENCE</code> in the database rather than the <code>AUTO_INCREMENT</code> feature. This means the default value for this column would be <code>null</code> in the database.</p>\n<p>If you're looking to change this, consider using <code>GenerationType.IDENTITY</code> or <code>GenerationType.TABLE</code>. For instance, <code>GenerationType.TABLE</code> will leverage the <code>AUTO_INCREMENT</code> feature in databases like MariaDB.</p>\n<p>Hope this helps!</p>\n"}],"owner":{"account_id":22759914,"reputation":1,"user_id":16918907,"display_name":"Marcus Peterson "},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":32,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1695747214,"creation_date":1695746633,"question_id":77181965,"body_markdown":"this is a database that is going to store Temperatures built using Hibernate:\r\n\r\n```package com.example.javabackend_dbms.models;\r\n\r\nimport jakarta.persistence.*;\r\nimport lombok.Data;\r\nimport lombok.NoArgsConstructor;\r\nimport org.springframework.data.annotation.CreatedDate;\r\nimport org.springframework.data.annotation.LastModifiedBy;\r\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\r\n\r\nimport java.time.LocalDateTime;\r\nimport java.time.format.DateTimeFormatter;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\n@Entity\r\n@NoArgsConstructor\r\n@EntityListeners(AuditingEntityListener.class)\r\n@Data\r\npublic class TempTable { //Den viktigaste tabellen i DBMS, h&#228;r lagras data r&#229;tt\r\n    @Id\r\n    @GeneratedValue (strategy = GenerationType.AUTO)\r\n    private Long Id;\r\n\r\n    private Float temperatures;\r\n\r\n    @CreatedDate\r\n    @LastModifiedBy\r\n    private LocalDateTime timestamp; // &#39; 2023-09-24T12:34:56.789 &#39;\r\n\r\n    @Transient\r\n    public String getFormattedTimestamp(){ //Denna metod p&#229;verkar inte data som finns i tabellerna, den &#228;r framtagen f&#246;r enkelt kunna formatera data\r\n        if (timestamp != null) {\r\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd &#39;hour&#39; HH : &#39;minute&#39; mm : &#39;seconds&#39; : ss.SSS&quot;);\r\n            return timestamp.format(formatter);\r\n        }\r\n        System.out.println(&quot;Could not format datetime&quot;);\r\n        return &quot;&quot;;\r\n    }\r\n\r\n    @OneToMany(mappedBy = &quot;tempTable&quot;, cascade = CascadeType.ALL)\r\n    private List&lt;WarningTable&gt; warningTables = new ArrayList&lt;&gt;();\r\n\r\n    public TempTable(Long Id, Float temperatures){\r\n        this.Id = Id;\r\n        this.temperatures = temperatures;\r\n    }\r\n}\r\n```\r\n\r\nWhen I try to run this SQL query in workbench: ```INSERT INTO temp_table (temperatures) VALUES (22.5);```\r\n\r\nI get this error\r\n```0\t16\t18:30:49\tINSERT INTO temp_table (temperatures) VALUES (22.5)\tError Code: 1364. Field &#39;id&#39; doesn&#39;t have a default value\t0.000 sec```\r\n\r\nThis is very strange? The id is supposed to auto-increment, I have put the correct annotations. So can anyone please point out any issues?\r\n\r\nOr is the problem due to the fact that my database is empty?\r\n\r\nThis is how the table looks at the moment:\r\n\r\n```Field,          Type,           Null,       Key,     Default,   Extra\r\n   id,             bigint,         NO,         PRI,     NULL,\r\n   temperatures,   float,          YES,,                NULL,\r\n   timestamp,      datetime(6),    YES,,                NULL,```\r\n\r\nI converted the table into a csv file so that I could gather information about the table\r\n","title":"I am getting Field &#39;id&#39; doesn&#39;t have a default value in my Java Hibernate database","body":"<p>this is a database that is going to store Temperatures built using Hibernate:</p>\n<pre><code>\nimport jakarta.persistence.*;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.springframework.data.annotation.CreatedDate;\nimport org.springframework.data.annotation.LastModifiedBy;\nimport org.springframework.data.jpa.domain.support.AuditingEntityListener;\n\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.util.ArrayList;\nimport java.util.List;\n\n@Entity\n@NoArgsConstructor\n@EntityListeners(AuditingEntityListener.class)\n@Data\npublic class TempTable { //Den viktigaste tabellen i DBMS, hr lagras data rtt\n    @Id\n    @GeneratedValue (strategy = GenerationType.AUTO)\n    private Long Id;\n\n    private Float temperatures;\n\n    @CreatedDate\n    @LastModifiedBy\n    private LocalDateTime timestamp; // ' 2023-09-24T12:34:56.789 '\n\n    @Transient\n    public String getFormattedTimestamp(){ //Denna metod pverkar inte data som finns i tabellerna, den r framtagen fr enkelt kunna formatera data\n        if (timestamp != null) {\n            DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd 'hour' HH : 'minute' mm : 'seconds' : ss.SSS&quot;);\n            return timestamp.format(formatter);\n        }\n        System.out.println(&quot;Could not format datetime&quot;);\n        return &quot;&quot;;\n    }\n\n    @OneToMany(mappedBy = &quot;tempTable&quot;, cascade = CascadeType.ALL)\n    private List&lt;WarningTable&gt; warningTables = new ArrayList&lt;&gt;();\n\n    public TempTable(Long Id, Float temperatures){\n        this.Id = Id;\n        this.temperatures = temperatures;\n    }\n}\n</code></pre>\n<p>When I try to run this SQL query in workbench: <code>INSERT INTO temp_table (temperatures) VALUES (22.5);</code></p>\n<p>I get this error\n<code>0    16  18:30:49    INSERT INTO temp_table (temperatures) VALUES (22.5) Error Code: 1364. Field 'id' doesn't have a default value   0.000 sec</code></p>\n<p>This is very strange? The id is supposed to auto-increment, I have put the correct annotations. So can anyone please point out any issues?</p>\n<p>Or is the problem due to the fact that my database is empty?</p>\n<p>This is how the table looks at the moment:</p>\n<pre><code>   id,             bigint,         NO,         PRI,     NULL,\n   temperatures,   float,          YES,,                NULL,\n   timestamp,      datetime(6),    YES,,                NULL,```\n\nI converted the table into a csv file so that I could gather information about the table\n</code></pre>\n"},{"tags":["java","docker","maven","tomcat","java-16"],"comments":[{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1627744818,"post_id":68603262,"comment_id":121240784,"body_markdown":"Can you provide the **fully stacktrace**?","body":"Can you provide the <b>fully stacktrace</b>?"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":2,"creation_date":1627746531,"post_id":68603262,"comment_id":121241195,"body_markdown":"*but when I run docker and I go on my project url I got an &quot;unsupported class file major version 60&quot;.* It will be running with a lower version than 1.16. Check what `java -version` gives you and then change your PATH so that &gt;= 1.16 is in it","body":"<i>but when I run docker and I go on my project url I got an &quot;unsupported class file major version 60&quot;.</i> It will be running with a lower version than 1.16. Check what <code>java -version</code> gives you and then change your PATH so that &gt;= 1.16 is in it"},{"owner":{"account_id":7199892,"reputation":43,"user_id":5497413,"display_name":"Vincent Moittie"},"score":0,"creation_date":1627804409,"post_id":68603262,"comment_id":121249849,"body_markdown":"Full stacktrace is provide @JoachimSauer.\nAnd I add the log when I run the `java -version` in docker container @g00se :)","body":"Full stacktrace is provide @JoachimSauer. And I add the log when I run the <code>java -version</code> in docker container @g00se :)"},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":0,"creation_date":1627805970,"post_id":68603262,"comment_id":121250144,"body_markdown":"@VincentMoittie: which version of Jersey are you using?","body":"@VincentMoittie: which version of Jersey are you using?"},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":3,"creation_date":1627810239,"post_id":68603262,"comment_id":121250932,"body_markdown":"The issue seems to be The Jersey library (or specifically: the ASM version that it includes): Both Maven and Tomcat are fine with Java 16, but that library doesn&#39;t support Java 16. Normally Java libraries tend to be upwards compatible (i.e. don&#39;t need extra support), but since ASM tries to read and interpret class files directly it needs to be fully updated to be able to work with classes compiled on later JDKs.. Try the latest release of your Jersey major version first and if that doesn&#39;t work you might need to file a bug and/or build it yourself with a newer ASM version.","body":"The issue seems to be The Jersey library (or specifically: the ASM version that it includes): Both Maven and Tomcat are fine with Java 16, but that library doesn&#39;t support Java 16. Normally Java libraries tend to be upwards compatible (i.e. don&#39;t need extra support), but since ASM tries to read and interpret class files directly it needs to be fully updated to be able to work with classes compiled on later JDKs.. Try the latest release of your Jersey major version first and if that doesn&#39;t work you might need to file a bug and/or build it yourself with a newer ASM version."},{"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":2,"creation_date":1627810343,"post_id":68603262,"comment_id":121250952,"body_markdown":"[This PR](https://github.com/eclipse-ee4j/jersey/pull/4754) should fix the issue, but I don&#39;t know if it&#39;s been released and if so in which versions.","body":"<a href=\"https://github.com/eclipse-ee4j/jersey/pull/4754\" rel=\"nofollow noreferrer\">This PR</a> should fix the issue, but I don&#39;t know if it&#39;s been released and if so in which versions."},{"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"score":1,"creation_date":1627810745,"post_id":68603262,"comment_id":121251045,"body_markdown":"@JoachimSauer: version 2.33 already supports Java 16 (cf. [source code](https://github.com/eclipse-ee4j/jersey/blob/c34ed1d947875dea0eb4f532181c53800bea3569/core-server/src/main/java/jersey/repackaged/org/objectweb/asm/ClassReader.java#L187)).","body":"@JoachimSauer: version 2.33 already supports Java 16 (cf. <a href=\"https://github.com/eclipse-ee4j/jersey/blob/c34ed1d947875dea0eb4f532181c53800bea3569/core-server/src/main/java/jersey/repackaged/org/objectweb/asm/ClassReader.java#L187\" rel=\"nofollow noreferrer\">source code</a>)."}],"answers":[{"comments":[{"owner":{"account_id":7199892,"reputation":43,"user_id":5497413,"display_name":"Vincent Moittie"},"score":0,"creation_date":1627821457,"post_id":68609231,"comment_id":121253439,"body_markdown":"Thanks a lot, I upgrade jersey version to 2.34 and it&#39;s working \\o/. You&#39;re my SuperHero!","body":"Thanks a lot, I upgrade jersey version to 2.34 and it&#39;s working \\o/. You&#39;re my SuperHero!"}],"tags":[],"owner":{"account_id":16269349,"reputation":13452,"user_id":11748454,"display_name":"Piotr P. Karwasz"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":true,"score":13,"last_activity_date":1695747033,"creation_date":1627811326,"answer_id":68609231,"question_id":68603262,"body_markdown":"As already remarked in the comments by [Joachim](https://stackoverflow.com/questions/68603262/how-to-fix-unsupported-class-file-major-version-60-in-tomcat9#comment121250932_68603262), your problem is due to the ASM version packaged by Jersey. It is similar to [this question](https://stackoverflow.com/q/66700334/11748454) regarding Spring.\r\n\r\nThe easiest way to find the highest version of Java supported by ASM is to look at the source code:\r\n\r\n * Jersey 2.40 supports up to Java 21,\r\n * Jersey 2.38 and 2.39.x support up to Java 20,\r\n * Jersey 2.36 and 2.37 support up to Java 19,\r\n * Jersey 2.35 supports up to Java 18,\r\n * Jersey 2.34 supports up to Java 17 (cf. [source code](https://github.com/eclipse-ee4j/jersey/blob/52c8aa4d57f35ae2f93b81225cf271864e7a91cd/core-server/src/main/java/jersey/repackaged/org/objectweb/asm/ClassReader.java#L194)),\r\n * Jersey 2.33 supports up to Java 16,\r\n * Jersey 2.30 supports up to Java 15 (with a warning for Java 15),\r\n * Jersey 2.29 supports up to Java 14 (with a warning for Java 14),\r\n * Jersey 2.28 (first EE4j version) supports up to Java 12.\r\n\r\nAs for the 3.x branch, all versions support Java 16, while the latest (3.0.2) supports also the upcoming Java 17.","title":"How to fix unsupported class file major version 60 in tomcat9?","body":"<p>As already remarked in the comments by <a href=\"https://stackoverflow.com/questions/68603262/how-to-fix-unsupported-class-file-major-version-60-in-tomcat9#comment121250932_68603262\">Joachim</a>, your problem is due to the ASM version packaged by Jersey. It is similar to <a href=\"https://stackoverflow.com/q/66700334/11748454\">this question</a> regarding Spring.</p>\n<p>The easiest way to find the highest version of Java supported by ASM is to look at the source code:</p>\n<ul>\n<li>Jersey 2.40 supports up to Java 21,</li>\n<li>Jersey 2.38 and 2.39.x support up to Java 20,</li>\n<li>Jersey 2.36 and 2.37 support up to Java 19,</li>\n<li>Jersey 2.35 supports up to Java 18,</li>\n<li>Jersey 2.34 supports up to Java 17 (cf. <a href=\"https://github.com/eclipse-ee4j/jersey/blob/52c8aa4d57f35ae2f93b81225cf271864e7a91cd/core-server/src/main/java/jersey/repackaged/org/objectweb/asm/ClassReader.java#L194\" rel=\"nofollow noreferrer\">source code</a>),</li>\n<li>Jersey 2.33 supports up to Java 16,</li>\n<li>Jersey 2.30 supports up to Java 15 (with a warning for Java 15),</li>\n<li>Jersey 2.29 supports up to Java 14 (with a warning for Java 14),</li>\n<li>Jersey 2.28 (first EE4j version) supports up to Java 12.</li>\n</ul>\n<p>As for the 3.x branch, all versions support Java 16, while the latest (3.0.2) supports also the upcoming Java 17.</p>\n"}],"owner":{"account_id":7199892,"reputation":43,"user_id":5497413,"display_name":"Vincent Moittie"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2506,"favorite_count":0,"down_vote_count":1,"up_vote_count":4,"accepted_answer_id":68609231,"answer_count":1,"score":3,"last_activity_date":1695747033,"creation_date":1627743867,"question_id":68603262,"body_markdown":"I have a maven project. It&#39;s written in Java 16. I have the Java 16 JDK installed. \r\n\r\nWhen I build it with dockerfile, everything works, but when I run docker and I go on my project url I got an &quot;unsupported class file major version 60&quot;.\r\n\r\nIs that possible to run java 16 project on tomcat or on something else ?\r\n\r\n\r\nThere is my some of my files:\r\n\r\nDockerFile:\r\n```\r\nFROM maven:3.8.1-openjdk-17 as builder\r\nRUN mkdir -p /root/.m2 &amp;&amp; mkdir /root/.m2/repository\r\nCOPY . /app/\r\nRUN cd /app &amp;&amp; mvn clean package -Dmaven.test.skip=true\r\n\r\nFROM tomcat:9.0-jdk16-openjdk\r\nCOPY --from=builder /app/target/demo.war /usr/local/tomcat/webapps\r\nENV CATALINA_OPTS=&quot;&quot;\r\nEXPOSE 8080\r\nCMD [&quot;catalina.sh&quot;, &quot;run&quot;]\r\n```\r\n\r\nAnd my pom.xml:\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n\txmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n\txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\r\n\t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\t&lt;groupId&gt;com.demo&lt;/groupId&gt;\r\n\t&lt;artifactId&gt;demo&lt;/artifactId&gt;\r\n\t&lt;packaging&gt;war&lt;/packaging&gt;\r\n\t&lt;version&gt;0.0.1&lt;/version&gt;\r\n\t&lt;name&gt;demo&lt;/name&gt;\r\n\t&lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n\t&lt;properties&gt;\r\n\t\t&lt;!-- Dependencies properties --&gt;\r\n            &lt;!-- ... --&gt;\r\n\t\t&lt;!-- Project build properties --&gt;\r\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n\t\t&lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\r\n\t\t&lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\r\n\t\t&lt;maven-dependency-plugin.version&gt;3.1.1&lt;/maven-dependency-plugin.version&gt;\r\n\t\t&lt;maven.resources.plugin&gt;3.0.1&lt;/maven.resources.plugin&gt;\r\n\t\t&lt;maven-war-plugin.version&gt;3.2.2&lt;/maven-war-plugin.version&gt;\r\n\t\t&lt;java.version&gt;16&lt;/java.version&gt;\r\n\t&lt;/properties&gt;\r\n\r\n\t&lt;dependencies&gt;\r\n        &lt;!-- ... --&gt;\r\n\t&lt;/dependencies&gt;\r\n\t&lt;build&gt;\r\n\t\t&lt;finalName&gt;demo&lt;/finalName&gt;\r\n\t\t&lt;plugins&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.8.1&lt;/version&gt;\r\n\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t&lt;release&gt;${java.version}&lt;/release&gt;\r\n\t\t\t\t\t&lt;source&gt;${maven.compiler.source}&lt;/source&gt;\r\n\t\t\t\t\t&lt;target&gt;${maven.compiler.target}&lt;/target&gt;\r\n\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n\t\t\t&lt;plugin&gt;\r\n\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n\t\t\t\t&lt;version&gt;3.0.0-M5&lt;/version&gt;\r\n\t\t\t&lt;/plugin&gt;\r\n            &lt;!-- ... --&gt;\r\n\t\t&lt;/plugins&gt;\r\n\t&lt;/build&gt;\r\n&lt;/project&gt;\r\n```\r\n \r\nTomcat log:\r\n\r\n```\r\nType Rapport d&#39;exception\r\n\r\nmessage Servlet.init() for servlet [demo-serlvet] threw exception\r\n\r\ndescription Le serveur a rencontr&#233; une erreur interne qui l&#39;a emp&#234;ch&#233; de satisfaire la requ&#234;te.\r\n\r\nexception\r\n\r\njavax.servlet.ServletException: Servlet.init() for servlet [demo-serlvet] threw exception\r\n\torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)\r\n\torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tjava.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\r\n\tjava.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n\torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tjava.base/java.lang.Thread.run(Thread.java:831)\r\ncause m&#232;re\r\n\r\njava.lang.IllegalArgumentException: Unsupported class file major version 60\r\n\tjersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:201)\r\n\tjersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:179)\r\n\tjersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:165)\r\n\tjersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:289)\r\n\torg.glassfish.jersey.server.internal.scanning.AnnotationAcceptingListener.process(AnnotationAcceptingListener.java:148)\r\n\torg.glassfish.jersey.server.ResourceConfig.scanClasses(ResourceConfig.java:888)\r\n\torg.glassfish.jersey.server.ResourceConfig._getClasses(ResourceConfig.java:842)\r\n\torg.glassfish.jersey.server.ResourceConfig.getClasses(ResourceConfig.java:751)\r\n\torg.glassfish.jersey.server.ResourceConfig$RuntimeConfig.&lt;init&gt;(ResourceConfig.java:1178)\r\n\torg.glassfish.jersey.server.ResourceConfig$RuntimeConfig.&lt;init&gt;(ResourceConfig.java:1151)\r\n\torg.glassfish.jersey.server.ResourceConfig.createRuntimeConfig(ResourceConfig.java:1147)\r\n\torg.glassfish.jersey.server.ApplicationHandler$RuntimeConfigConfigurator.init(ApplicationHandler.java:182)\r\n\torg.glassfish.jersey.server.ApplicationHandler.lambda$initialize$0(ApplicationHandler.java:290)\r\n\tjava.base/java.util.Arrays$ArrayList.forEach(Arrays.java:4203)\r\n\torg.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:290)\r\n\torg.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:259)\r\n\torg.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:311)\r\n\torg.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:154)\r\n\torg.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:346)\r\n\tjavax.servlet.GenericServlet.init(GenericServlet.java:158)\r\n\torg.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\r\n\torg.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\r\n\torg.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\r\n\torg.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\r\n\torg.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\r\n\torg.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\r\n\torg.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\r\n\torg.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)\r\n\torg.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\r\n\tjava.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\r\n\tjava.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\r\n\torg.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\r\n\tjava.base/java.lang.Thread.run(Thread.java:831)\r\nnote La trace compl&#232;te de la cause m&#232;re de cette erreur est disponible dans les fichiers journaux de ce serveur.\r\n```\r\n\r\nLog from api container after a docker exec:\r\n```\r\nroot@df012b95a989:/usr/local/tomcat# java -version\r\nopenjdk version &quot;16.0.2&quot; 2021-07-20\r\nOpenJDK Runtime Environment (build 16.0.2+7-67)\r\nOpenJDK 64-Bit Server VM (build 16.0.2+7-67, mixed mode, sharing)\r\n```","title":"How to fix unsupported class file major version 60 in tomcat9?","body":"<p>I have a maven project. It's written in Java 16. I have the Java 16 JDK installed.</p>\n<p>When I build it with dockerfile, everything works, but when I run docker and I go on my project url I got an &quot;unsupported class file major version 60&quot;.</p>\n<p>Is that possible to run java 16 project on tomcat or on something else ?</p>\n<p>There is my some of my files:</p>\n<p>DockerFile:</p>\n<pre><code>FROM maven:3.8.1-openjdk-17 as builder\nRUN mkdir -p /root/.m2 &amp;&amp; mkdir /root/.m2/repository\nCOPY . /app/\nRUN cd /app &amp;&amp; mvn clean package -Dmaven.test.skip=true\n\nFROM tomcat:9.0-jdk16-openjdk\nCOPY --from=builder /app/target/demo.war /usr/local/tomcat/webapps\nENV CATALINA_OPTS=&quot;&quot;\nEXPOSE 8080\nCMD [&quot;catalina.sh&quot;, &quot;run&quot;]\n</code></pre>\n<p>And my pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.demo&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;name&gt;demo&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;!-- Dependencies properties --&gt;\n            &lt;!-- ... --&gt;\n        &lt;!-- Project build properties --&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;maven.compiler.source&gt;16&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;16&lt;/maven.compiler.target&gt;\n        &lt;maven-dependency-plugin.version&gt;3.1.1&lt;/maven-dependency-plugin.version&gt;\n        &lt;maven.resources.plugin&gt;3.0.1&lt;/maven.resources.plugin&gt;\n        &lt;maven-war-plugin.version&gt;3.2.2&lt;/maven-war-plugin.version&gt;\n        &lt;java.version&gt;16&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;!-- ... --&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;finalName&gt;demo&lt;/finalName&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;release&gt;${java.version}&lt;/release&gt;\n                    &lt;source&gt;${maven.compiler.source}&lt;/source&gt;\n                    &lt;target&gt;${maven.compiler.target}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.0.0-M5&lt;/version&gt;\n            &lt;/plugin&gt;\n            &lt;!-- ... --&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Tomcat log:</p>\n<pre><code>Type Rapport d'exception\n\nmessage Servlet.init() for servlet [demo-serlvet] threw exception\n\ndescription Le serveur a rencontr une erreur interne qui l'a empch de satisfaire la requte.\n\nexception\n\njavax.servlet.ServletException: Servlet.init() for servlet [demo-serlvet] threw exception\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n    java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.base/java.lang.Thread.run(Thread.java:831)\ncause mre\n\njava.lang.IllegalArgumentException: Unsupported class file major version 60\n    jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:201)\n    jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:179)\n    jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:165)\n    jersey.repackaged.org.objectweb.asm.ClassReader.&lt;init&gt;(ClassReader.java:289)\n    org.glassfish.jersey.server.internal.scanning.AnnotationAcceptingListener.process(AnnotationAcceptingListener.java:148)\n    org.glassfish.jersey.server.ResourceConfig.scanClasses(ResourceConfig.java:888)\n    org.glassfish.jersey.server.ResourceConfig._getClasses(ResourceConfig.java:842)\n    org.glassfish.jersey.server.ResourceConfig.getClasses(ResourceConfig.java:751)\n    org.glassfish.jersey.server.ResourceConfig$RuntimeConfig.&lt;init&gt;(ResourceConfig.java:1178)\n    org.glassfish.jersey.server.ResourceConfig$RuntimeConfig.&lt;init&gt;(ResourceConfig.java:1151)\n    org.glassfish.jersey.server.ResourceConfig.createRuntimeConfig(ResourceConfig.java:1147)\n    org.glassfish.jersey.server.ApplicationHandler$RuntimeConfigConfigurator.init(ApplicationHandler.java:182)\n    org.glassfish.jersey.server.ApplicationHandler.lambda$initialize$0(ApplicationHandler.java:290)\n    java.base/java.util.Arrays$ArrayList.forEach(Arrays.java:4203)\n    org.glassfish.jersey.server.ApplicationHandler.initialize(ApplicationHandler.java:290)\n    org.glassfish.jersey.server.ApplicationHandler.&lt;init&gt;(ApplicationHandler.java:259)\n    org.glassfish.jersey.servlet.WebComponent.&lt;init&gt;(WebComponent.java:311)\n    org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:154)\n    org.glassfish.jersey.servlet.ServletContainer.init(ServletContainer.java:346)\n    javax.servlet.GenericServlet.init(GenericServlet.java:158)\n    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)\n    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)\n    org.apache.catalina.valves.AbstractAccessLogValve.invoke(AbstractAccessLogValve.java:687)\n    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)\n    org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:382)\n    org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)\n    org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:893)\n    org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1723)\n    org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:49)\n    java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)\n    java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:630)\n    org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)\n    java.base/java.lang.Thread.run(Thread.java:831)\nnote La trace complte de la cause mre de cette erreur est disponible dans les fichiers journaux de ce serveur.\n</code></pre>\n<p>Log from api container after a docker exec:</p>\n<pre><code>root@df012b95a989:/usr/local/tomcat# java -version\nopenjdk version &quot;16.0.2&quot; 2021-07-20\nOpenJDK Runtime Environment (build 16.0.2+7-67)\nOpenJDK 64-Bit Server VM (build 16.0.2+7-67, mixed mode, sharing)\n</code></pre>\n"},{"tags":["java","json","jackson-databind"],"comments":[{"owner":{"account_id":5084916,"reputation":303,"user_id":4079977,"accept_rate":50,"display_name":"MishraJi"},"score":1,"creation_date":1695747903,"post_id":77181984,"comment_id":136064829,"body_markdown":"Use ObjectMapper to deserialise it and add it to a Queue. What help you needed here ?","body":"Use ObjectMapper to deserialise it and add it to a Queue. What help you needed here ?"},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1695749763,"post_id":77181984,"comment_id":136065188,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":29540341,"reputation":1,"user_id":22639158,"display_name":"Michell179"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695746866,"creation_date":1695746866,"question_id":77181984,"body_markdown":"from a JSON file such as adding the attributes of the Actions class to a queue in order, to consume them in order. \r\n\r\nJSON PARSER: jackson-databind\r\n\r\n\r\nJSON FILE:\r\n\r\n\r\n```\r\n{\r\n  &quot;name&quot;: &quot;sampleName&quot;,\r\n  &quot;url&quot;: &quot;www.google.com&quot;,\r\n  &quot;dir&quot;: &quot;C:\\\\Users\\\\user\\\\Java\\\\project\\\\file.json&quot;,\r\n  &quot;actions&quot;: {\r\n    &quot;wait&quot;: 3,\r\n    &quot;click&quot;: &quot;route&quot;,\r\n    &quot;write&quot;: {\r\n      &quot;route&quot;: &quot;I&#39;m a Path HTML Example&quot;,\r\n      &quot;text&quot;: &quot;i&#39;m a example text&quot;\r\n    },\r\n    &quot;enter&quot;: &quot;enter&quot;,\r\n    &quot;tab&quot;: &quot;tab&quot;\r\n  }\r\n}\r\n```\r\n\r\nThis is my class, i need save in queue the actions for consume in order\r\n\r\nAction.Class\r\n\r\n```\r\npublic class Actions {\r\n\r\n    private int wait;\r\n    private String click;\r\n    private Map&lt;String, Object&gt; write;\r\n    private String enter;\r\n    private String tab;\r\n\r\n    @JsonProperty(&quot;wait&quot;)\r\n    public int getWait(){\r\n        return wait;\r\n    }\r\n\r\n    public void setWait(int wait) {\r\n        this.wait = wait;\r\n    }\r\n\r\n    @JsonProperty(&quot;click&quot;)\r\n    public String getClick() {\r\n        return click;\r\n    }\r\n\r\n    public void setClick(String click) {\r\n        this.click = click;\r\n    }\r\n\r\n    @JsonAnyGetter\r\n    public Map&lt;String, Object&gt; getWrite() {\r\n        return write;\r\n    }\r\n\r\n    @JsonAnySetter\r\n    public void setWrite(Map&lt;String, Object&gt; write) {\r\n        this.write = write;\r\n    }\r\n\r\n    @JsonProperty(&quot;enter&quot;)\r\n    public String getEnter() {\r\n        return enter;\r\n    }\r\n\r\n\r\n    public void setEnter(String enter) {\r\n        this.enter = enter;\r\n    }\r\n\r\n    @JsonProperty(&quot;tab&quot;)\r\n    public String getTab() {\r\n        return tab;\r\n    }\r\n\r\n    public void setTab(String tab) {\r\n        this.tab = tab;\r\n    }\r\n\r\n}\r\n```\r\n\r\n.............................................................\r\n\r\n \r\n\r\n...........................","title":"from a JSON file such as adding the attributes of the Actions class to a queue in order in JAVA using Jackson","body":"<p>from a JSON file such as adding the attributes of the Actions class to a queue in order, to consume them in order.</p>\n<p>JSON PARSER: jackson-databind</p>\n<p>JSON FILE:</p>\n<pre><code>{\n  &quot;name&quot;: &quot;sampleName&quot;,\n  &quot;url&quot;: &quot;www.google.com&quot;,\n  &quot;dir&quot;: &quot;C:\\\\Users\\\\user\\\\Java\\\\project\\\\file.json&quot;,\n  &quot;actions&quot;: {\n    &quot;wait&quot;: 3,\n    &quot;click&quot;: &quot;route&quot;,\n    &quot;write&quot;: {\n      &quot;route&quot;: &quot;I'm a Path HTML Example&quot;,\n      &quot;text&quot;: &quot;i'm a example text&quot;\n    },\n    &quot;enter&quot;: &quot;enter&quot;,\n    &quot;tab&quot;: &quot;tab&quot;\n  }\n}\n</code></pre>\n<p>This is my class, i need save in queue the actions for consume in order</p>\n<p>Action.Class</p>\n<pre><code>public class Actions {\n\n    private int wait;\n    private String click;\n    private Map&lt;String, Object&gt; write;\n    private String enter;\n    private String tab;\n\n    @JsonProperty(&quot;wait&quot;)\n    public int getWait(){\n        return wait;\n    }\n\n    public void setWait(int wait) {\n        this.wait = wait;\n    }\n\n    @JsonProperty(&quot;click&quot;)\n    public String getClick() {\n        return click;\n    }\n\n    public void setClick(String click) {\n        this.click = click;\n    }\n\n    @JsonAnyGetter\n    public Map&lt;String, Object&gt; getWrite() {\n        return write;\n    }\n\n    @JsonAnySetter\n    public void setWrite(Map&lt;String, Object&gt; write) {\n        this.write = write;\n    }\n\n    @JsonProperty(&quot;enter&quot;)\n    public String getEnter() {\n        return enter;\n    }\n\n\n    public void setEnter(String enter) {\n        this.enter = enter;\n    }\n\n    @JsonProperty(&quot;tab&quot;)\n    public String getTab() {\n        return tab;\n    }\n\n    public void setTab(String tab) {\n        this.tab = tab;\n    }\n\n}\n</code></pre>\n<p>.............................................................</p>\n<p>...........................</p>\n"},{"tags":["java","eclipse","ide"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":7,"creation_date":1655760205,"post_id":72692978,"comment_id":128403832,"body_markdown":"Selecting the warning in the _Problems_ view and hitting Ctrl+1 provides you a Quick Fix. Or change the project manually in _Project &gt; Properties: Resource_. For details see https://www.eclipse.org/eclipse/news/4.24/platform.php#no-explicit-encoding-project-warning and/or watch my video https://youtu.be/zDJtVYAJwyY?t=663","body":"Selecting the warning in the <i>Problems</i> view and hitting Ctrl+1 provides you a Quick Fix. Or change the project manually in <i>Project &gt; Properties: Resource</i>. For details see <a href=\"https://www.eclipse.org/eclipse/news/4.24/platform.php#no-explicit-encoding-project-warning\" rel=\"nofollow noreferrer\">eclipse.org/eclipse/news/4.24/&hellip;</a> and/or watch my video <a href=\"https://youtu.be/zDJtVYAJwyY?t=663\" rel=\"nofollow noreferrer\">youtu.be/zDJtVYAJwyY?t=663</a>"},{"owner":{"account_id":424804,"reputation":7765,"user_id":805007,"accept_rate":83,"display_name":"Phil Freihofner"},"score":1,"creation_date":1657557784,"post_id":72692978,"comment_id":128833882,"body_markdown":"The above from @howlger is an &quot;Answer&quot; not a question aimed at further clarification.","body":"The above from @howlger is an &quot;Answer&quot; not a question aimed at further clarification."},{"owner":{"account_id":1520694,"reputation":5745,"user_id":1420441,"accept_rate":100,"display_name":"Henrique de Sousa"},"score":0,"creation_date":1690392465,"post_id":72692978,"comment_id":135348529,"body_markdown":"Funny why you downgraded from W11 to W10. In my case I upgraded from Winblows to Linux =)","body":"Funny why you downgraded from W11 to W10. In my case I upgraded from Winblows to Linux =)"}],"answers":[{"comments":[{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":2,"creation_date":1666967430,"post_id":72947638,"comment_id":131066348,"body_markdown":"I have a Maven project and every time I run `Update Project` it gives me the encoding set message. Is there a way to specify it in the `pom.xml`?","body":"I have a Maven project and every time I run <code>Update Project</code> it gives me the encoding set message. Is there a way to specify it in the <code>pom.xml</code>?"},{"owner":{"account_id":1192795,"reputation":1367,"user_id":1165207,"display_name":"Jos&#233; Ernesto Lara Rodr&#237;guez"},"score":1,"creation_date":1688452767,"post_id":72947638,"comment_id":135072220,"body_markdown":"@CardinalSystem See the answer I just posted.","body":"@CardinalSystem See the answer I just posted."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1688459075,"post_id":72947638,"comment_id":135073397,"body_markdown":"@Jos&#233;ErnestoLaraRodr&#237;guez This would have been better a comment or an addition to an existing answer rather than another answer of its own.","body":"@Jos&#233;ErnestoLaraRodr&#237;guez This would have been better a comment or an addition to an existing answer rather than another answer of its own."},{"owner":{"account_id":1520694,"reputation":5745,"user_id":1420441,"accept_rate":100,"display_name":"Henrique de Sousa"},"score":0,"creation_date":1690392417,"post_id":72947638,"comment_id":135348518,"body_markdown":"Eclipse is dumb then, because I&#39;m inheriting that `compileJava` option from a higher-level gradle as in `apply from: &quot;$projectDir/settings.gradle&quot;` and it still cannot find it.","body":"Eclipse is dumb then, because I&#39;m inheriting that <code>compileJava</code> option from a higher-level gradle as in <code>apply from: &quot;$projectDir&#47;settings.gradle&quot;</code> and it still cannot find it."},{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1690392800,"post_id":72947638,"comment_id":135348595,"body_markdown":"@HenriquedeSousa Follow the link and provide a pull request.","body":"@HenriquedeSousa Follow the link and provide a pull request."},{"owner":{"account_id":484792,"reputation":910,"user_id":900693,"accept_rate":0,"display_name":"helioz"},"score":0,"creation_date":1692407705,"post_id":72947638,"comment_id":135623300,"body_markdown":"in macOS the quick fix is initiated with CMD-1 or CMD(right) click and select quick fix.","body":"in macOS the quick fix is initiated with CMD-1 or CMD(right) click and select quick fix."}],"tags":[],"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"comment_count":6,"down_vote_count":0,"up_vote_count":65,"is_accepted":true,"score":65,"last_activity_date":1688458913,"creation_date":1657605499,"answer_id":72947638,"question_id":72692978,"body_markdown":"Yes, the [**warning for projects with no explicit default encoding** is a **new** thing in **Eclipse 2022-06** (4.24)][1].\r\n\r\nTo set an explicit default encoding do one of the following:\r\n\r\n - In the ***Problems* view, select the warning**, hit **&lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;1&lt;/kbd&gt;** and apply the provided Quick Fix (sets the project encoding explicitly to the workspace encoding)\r\n - Change the project manually in ***Project &gt; Properties: Resource***\r\n\r\nSee also [my video showing and explaining this][2].\r\n\r\nWhen using a build system like Maven or Gradle, set the encoding as follows instead:\r\n\r\n**Maven**\r\n1. In `pom.xml` set the property `project.build.sourceEncoding` to `UTF-8`:&lt;pre&gt;&amp;lt;properties&gt;&lt;br&gt;    &amp;lt;project.build.sourceEncoding&gt;UTF-8&amp;lt;/project.build.sourceEncoding&gt;&lt;br&gt;&amp;lt;/properties&gt;&lt;/pre&gt;\r\n2. Right-click the project folder and choose ***Maven &gt; Update Project...***\r\n\r\n**Gradle**\r\n1. In `build.gradle` set `compileJava.options.encoding` to `UTF-8`:&lt;pre&gt;compileJava.options.encoding = &#39;UTF-8&#39;&lt;/pre&gt;\r\n2. Right-click the project folder and choose ***Gradle &gt; Refresh Gradel Project***\r\n3. As long as [Eclipse Buildship issue #344][3] is not fixed, change the encoding manually as described above\r\n\r\n\r\n  [1]: https://www.eclipse.org/eclipse/news/4.24/platform.php#no-explicit-encoding-project-warning\r\n  [2]: https://youtu.be/zDJtVYAJwyY?t=663\r\n  [3]: https://github.com/eclipse/buildship/issues/344","title":"Eclipse: Project &#39;PROJECT_NAME&#39; has no explicit encoding set","body":"<p>Yes, the <a href=\"https://www.eclipse.org/eclipse/news/4.24/platform.php#no-explicit-encoding-project-warning\" rel=\"noreferrer\"><strong>warning for projects with no explicit default encoding</strong> is a <strong>new</strong> thing in <strong>Eclipse 2022-06</strong> (4.24)</a>.</p>\n<p>To set an explicit default encoding do one of the following:</p>\n<ul>\n<li>In the <strong><em>Problems</em> view, select the warning</strong>, hit <strong><kbd>Ctrl</kbd>+<kbd>1</kbd></strong> and apply the provided Quick Fix (sets the project encoding explicitly to the workspace encoding)</li>\n<li>Change the project manually in <em><strong>Project &gt; Properties: Resource</strong></em></li>\n</ul>\n<p>See also <a href=\"https://youtu.be/zDJtVYAJwyY?t=663\" rel=\"noreferrer\">my video showing and explaining this</a>.</p>\n<p>When using a build system like Maven or Gradle, set the encoding as follows instead:</p>\n<p><strong>Maven</strong></p>\n<ol>\n<li>In <code>pom.xml</code> set the property <code>project.build.sourceEncoding</code> to <code>UTF-8</code>:<pre>&lt;properties&gt;<br>    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;<br>&lt;/properties&gt;</pre></li>\n<li>Right-click the project folder and choose <em><strong>Maven &gt; Update Project...</strong></em></li>\n</ol>\n<p><strong>Gradle</strong></p>\n<ol>\n<li>In <code>build.gradle</code> set <code>compileJava.options.encoding</code> to <code>UTF-8</code>:<pre>compileJava.options.encoding = 'UTF-8'</pre></li>\n<li>Right-click the project folder and choose <em><strong>Gradle &gt; Refresh Gradel Project</strong></em></li>\n<li>As long as <a href=\"https://github.com/eclipse/buildship/issues/344\" rel=\"noreferrer\">Eclipse Buildship issue #344</a> is not fixed, change the encoding manually as described above</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":2715546,"reputation":7607,"user_id":2343011,"accept_rate":64,"display_name":"flavio.donze"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1664811439,"creation_date":1664811439,"answer_id":73937700,"question_id":72692978,"body_markdown":"If you prefer to ignore this warning for all projects you can change the preferences:\r\n\r\n\r\n\r\n&gt; General -&gt; Workspace -&gt; Report missing project encoding as: **Ignore**\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dQlBy.png","title":"Eclipse: Project &#39;PROJECT_NAME&#39; has no explicit encoding set","body":"<p>If you prefer to ignore this warning for all projects you can change the preferences:</p>\n<blockquote>\n<p>General -&gt; Workspace -&gt; Report missing project encoding as: <strong>Ignore</strong></p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/dQlBy.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/dQlBy.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":1001793,"reputation":2131,"user_id":1016482,"accept_rate":50,"display_name":"rveach"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1684437142,"creation_date":1684437142,"answer_id":76283796,"question_id":72692978,"body_markdown":"If you are using Maven, add something similar to the following to your `pom.xml`:\r\n\r\n````\r\n\t&lt;build&gt;\r\n\t\t&lt;pluginManagement&gt;\r\n\t\t\t&lt;plugins&gt;\r\n\t\t\t\t&lt;plugin&gt;\r\n\t\t\t\t\t&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n\t\t\t\t\t&lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\r\n\t\t\t\t\t&lt;version&gt;${maven.resources.plugin.version}&lt;/version&gt;\r\n\t\t\t\t\t&lt;configuration&gt;\r\n\t\t\t\t\t\t&lt;encoding&gt;UTF-8&lt;/encoding&gt;\r\n\t\t\t\t\t&lt;/configuration&gt;\r\n\t\t\t\t&lt;/plugin&gt;\r\n````","title":"Eclipse: Project &#39;PROJECT_NAME&#39; has no explicit encoding set","body":"<p>If you are using Maven, add something similar to the following to your <code>pom.xml</code>:</p>\n<pre><code>    &lt;build&gt;\n        &lt;pluginManagement&gt;\n            &lt;plugins&gt;\n                &lt;plugin&gt;\n                    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                    &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n                    &lt;version&gt;${maven.resources.plugin.version}&lt;/version&gt;\n                    &lt;configuration&gt;\n                        &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n                    &lt;/configuration&gt;\n                &lt;/plugin&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1192795,"reputation":1367,"user_id":1165207,"display_name":"Jos&#233; Ernesto Lara Rodr&#237;guez"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1688452747,"creation_date":1688452747,"answer_id":76609932,"question_id":72692978,"body_markdown":"If you&#39;re using Maven, every time you run &quot;Update project&quot; the warning comes back, as the project configuration is re-created from the POM file. To get rid of this warning permanently, add this in your POM file:\r\n\r\n    &lt;properties&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n\r\nThen, run &quot;Update project&quot; and the warning is gone.\r\nYou can find more info here: https://maven.apache.org/plugins/maven-resources-plugin/examples/encoding.html","title":"Eclipse: Project &#39;PROJECT_NAME&#39; has no explicit encoding set","body":"<p>If you're using Maven, every time you run &quot;Update project&quot; the warning comes back, as the project configuration is re-created from the POM file. To get rid of this warning permanently, add this in your POM file:</p>\n<pre><code>&lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>Then, run &quot;Update project&quot; and the warning is gone.\nYou can find more info here: <a href=\"https://maven.apache.org/plugins/maven-resources-plugin/examples/encoding.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-resources-plugin/examples/encoding.html</a></p>\n"},{"tags":[],"owner":{"account_id":182665,"reputation":851,"user_id":417541,"accept_rate":42,"display_name":"Do Will"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695744830,"creation_date":1695744830,"answer_id":77181758,"question_id":72692978,"body_markdown":"If you want to make this part of Eclipse settings (through eclipse task in Gradle, for example), create a file named &quot;org.eclipse.core.resources.prefs&quot; in .settings folder with these contents - \r\n\r\n    eclipse.preferences.version=1\r\n    encoding/&lt;project&gt;=UTF-8\r\n\r\n\r\nThis would be the command in gradle&#39;s eclipse task - \r\n\r\n    new File(&quot;.settings&quot;, &quot;org.eclipse.core.resources.prefs&quot;).text = &quot;&quot;&quot;eclipse.preferences.version=1\r\n    encoding/&lt;project&gt;=UTF-8\r\n    &quot;&quot;&quot;\r\n\r\n","title":"Eclipse: Project &#39;PROJECT_NAME&#39; has no explicit encoding set","body":"<p>If you want to make this part of Eclipse settings (through eclipse task in Gradle, for example), create a file named &quot;org.eclipse.core.resources.prefs&quot; in .settings folder with these contents -</p>\n<pre><code>eclipse.preferences.version=1\nencoding/&lt;project&gt;=UTF-8\n</code></pre>\n<p>This would be the command in gradle's eclipse task -</p>\n<pre><code>new File(&quot;.settings&quot;, &quot;org.eclipse.core.resources.prefs&quot;).text = &quot;&quot;&quot;eclipse.preferences.version=1\nencoding/&lt;project&gt;=UTF-8\n&quot;&quot;&quot;\n</code></pre>\n"}],"owner":{"account_id":21717650,"reputation":455,"user_id":16028444,"display_name":"MomoTheDev"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57094,"favorite_count":0,"down_vote_count":0,"up_vote_count":33,"accepted_answer_id":72947638,"answer_count":5,"score":33,"last_activity_date":1695744830,"creation_date":1655759121,"question_id":72692978,"body_markdown":"I downgraded from Windows 11 to Windows 10 today and had to reinstall the Eclipse-IDE.&lt;br/&gt;\r\nAfter successfully importing my workspaces and fixing the projects, a warning appeared for every project saying &quot;Project XXX has no explicit encoding set&quot;. I&#39;ve already searched for a solution and only got some fixes for VSCode.\r\n\r\nI had **Eclipse 2021-6** and installed **Eclipse 2022-6**","title":"Eclipse: Project &#39;PROJECT_NAME&#39; has no explicit encoding set","body":"<p>I downgraded from Windows 11 to Windows 10 today and had to reinstall the Eclipse-IDE.<br/>\nAfter successfully importing my workspaces and fixing the projects, a warning appeared for every project saying &quot;Project XXX has no explicit encoding set&quot;. I've already searched for a solution and only got some fixes for VSCode.</p>\n<p>I had <strong>Eclipse 2021-6</strong> and installed <strong>Eclipse 2022-6</strong></p>\n"},{"tags":["java","duosecurity"],"owner":{"account_id":4933250,"reputation":4859,"user_id":3972291,"accept_rate":100,"display_name":"Enamul Haque"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695744464,"creation_date":1695744464,"question_id":77181712,"body_markdown":"I am trying to create using  /admin/v1/users it shows\r\n\r\n    {\r\n     &quot;code&quot;:40103,\r\n     &quot;message&quot;:&quot;Invalid signature in request credentials&quot;,\r\n     &quot;stat&quot;:&quot;FAIL&quot;\r\n      }\r\n\r\nHere is my Java Code:\r\n\r\n       public class DuoCreateUsers {\r\n    \r\n        private static SortedMap&lt;String, Object&gt; params = new TreeMap&lt;String, Object&gt;();\r\n    \r\n        public static void main(String[] args) throws IOException {\r\n            String ikey = &quot;x&quot;;\r\n            String skey = &quot;x&quot;;\r\n            String host = &quot;api-d221a358.duosecurity.com&quot;;\r\n            String httpMethod = &quot;POST&quot;;\r\n            String requestPath = &quot;/admin/v1/users&quot;;\r\n            String timestamp = OffsetDateTime.now().format(DateTimeFormatter.RFC_1123_DATE_TIME);\r\n    \r\n            String username = &quot;newuser&quot;;\r\n            String email = &quot;abc@example.com&quot;;\r\n    \r\n            params.put(&quot;username&quot;,username);\r\n            params.put(&quot;email&quot;,email);\r\n    \r\n            String queryString = canonQueryString();\r\n    \r\n            String canonicalRequest = timestamp + &quot;\\n&quot; + httpMethod + &quot;\\n&quot; + requestPath +  &quot;\\n&quot; + queryString;\r\n            System.out.println(&quot;canonicalRequest = &quot; + canonicalRequest);\r\n    \r\n            String signature = sign1(canonicalRequest, skey);\r\n          //  System.out.println(&quot;signature = &quot; + signature);\r\n    \r\n            String url = &quot;https://&quot; + host + requestPath+&quot;?&quot;+queryString;\r\n            System.out.println(&quot;url = &quot; + url);\r\n    \r\n            HttpClient httpClient = HttpClients.createDefault();\r\n            HttpPost httpPost = new HttpPost(url);\r\n            httpPost.setHeader(&quot;Date&quot;, timestamp);\r\n            httpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + Base64.getEncoder().encodeToString((ikey + &quot;:&quot; + signature).getBytes()));\r\n            httpPost.setHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\r\n    \r\n    \r\n            httpPost.setEntity(new StringEntity(params.toString()));\r\n            // Make the request\r\n            HttpResponse response = httpClient.execute(httpPost);\r\n            HttpEntity entity = response.getEntity();\r\n            String responseContent = entity != null ? EntityUtils.toString(entity) : &quot;&quot;;\r\n    \r\n            String rs =  &quot;Response Status Code: &quot; + response.getStatusLine().getStatusCode() + &quot;\\nResponse Content:\\n&quot; + responseContent;\r\n            System.out.println(&quot;rs = &quot; + rs);\r\n    \r\n        }\r\n    \r\n    \r\n        public static String canonQueryString()\r\n                throws UnsupportedEncodingException {\r\n            ArrayList&lt;String&gt; args = new ArrayList&lt;String&gt;();\r\n    \r\n            for (String key : params.keySet()) {\r\n                String name = URLEncoder\r\n                        .encode(key, &quot;UTF-8&quot;)\r\n                        .replace(&quot;+&quot;, &quot;%20&quot;)\r\n                        .replace(&quot;*&quot;, &quot;%2A&quot;)\r\n                        .replace(&quot;%7E&quot;, &quot;~&quot;);\r\n                String value = URLEncoder\r\n                        .encode(params.get(key).toString(), &quot;UTF-8&quot;)\r\n                        .replace(&quot;+&quot;, &quot;%20&quot;)\r\n                        .replace(&quot;*&quot;, &quot;%2A&quot;)\r\n                        .replace(&quot;%7E&quot;, &quot;~&quot;);\r\n                args.add(name + &quot;=&quot; + value);\r\n            }\r\n    \r\n            return com.duosecurity.client.Util.join(args.toArray(), &quot;&amp;&quot;);\r\n        }\r\n    \r\n        private static String sign1(String data, String secretKey) {\r\n            try {\r\n    \r\n                // Create an HMAC-SHA1 key from the secret key\r\n                SecretKeySpec secretKeySpec = new SecretKeySpec(secretKey.getBytes(StandardCharsets.UTF_8), &quot;HmacSHA1&quot;);\r\n    \r\n                // Initialize the HMAC-SHA1 algorithm\r\n                Mac mac = Mac.getInstance(&quot;HmacSHA1&quot;);\r\n                mac.init(secretKeySpec);\r\n    \r\n                // Calculate the HMAC-SHA1 hash\r\n                byte[] hmacSha1Bytes = mac.doFinal(data.getBytes(StandardCharsets.UTF_8));\r\n    \r\n                // Convert the result to a hexadecimal string\r\n                String hmacSha1Hex = bytesToHex(hmacSha1Bytes);\r\n    \r\n                // Print the HMAC-SHA1 hash\r\n                System.out.println(&quot;HMAC-SHA1: &quot; + hmacSha1Hex);\r\n    \r\n                return hmacSha1Hex;\r\n            } catch (NoSuchAlgorithmException | InvalidKeyException e) {\r\n                e.printStackTrace();\r\n            }\r\n    \r\n            return null;\r\n        }\r\n    \r\n        // Helper method to convert bytes to a hexadecimal string\r\n        private static String bytesToHex(byte[] bytes) {\r\n            StringBuilder hexStringBuilder = new StringBuilder();\r\n            for (byte b : bytes) {\r\n                hexStringBuilder.append(String.format(&quot;%02x&quot;, b));\r\n            }\r\n            return hexStringBuilder.toString();\r\n        }\r\n    }\r\nWhat is the wrong of my code?\r\n\r\nPlease help me...","title":"/admin/v1/users giving a 40103 in DUO Security Admin API","body":"<p>I am trying to create using  /admin/v1/users it shows</p>\n<pre><code>{\n &quot;code&quot;:40103,\n &quot;message&quot;:&quot;Invalid signature in request credentials&quot;,\n &quot;stat&quot;:&quot;FAIL&quot;\n  }\n</code></pre>\n<p>Here is my Java Code:</p>\n<pre><code>   public class DuoCreateUsers {\n\n    private static SortedMap&lt;String, Object&gt; params = new TreeMap&lt;String, Object&gt;();\n\n    public static void main(String[] args) throws IOException {\n        String ikey = &quot;x&quot;;\n        String skey = &quot;x&quot;;\n        String host = &quot;api-d221a358.duosecurity.com&quot;;\n        String httpMethod = &quot;POST&quot;;\n        String requestPath = &quot;/admin/v1/users&quot;;\n        String timestamp = OffsetDateTime.now().format(DateTimeFormatter.RFC_1123_DATE_TIME);\n\n        String username = &quot;newuser&quot;;\n        String email = &quot;abc@example.com&quot;;\n\n        params.put(&quot;username&quot;,username);\n        params.put(&quot;email&quot;,email);\n\n        String queryString = canonQueryString();\n\n        String canonicalRequest = timestamp + &quot;\\n&quot; + httpMethod + &quot;\\n&quot; + requestPath +  &quot;\\n&quot; + queryString;\n        System.out.println(&quot;canonicalRequest = &quot; + canonicalRequest);\n\n        String signature = sign1(canonicalRequest, skey);\n      //  System.out.println(&quot;signature = &quot; + signature);\n\n        String url = &quot;https://&quot; + host + requestPath+&quot;?&quot;+queryString;\n        System.out.println(&quot;url = &quot; + url);\n\n        HttpClient httpClient = HttpClients.createDefault();\n        HttpPost httpPost = new HttpPost(url);\n        httpPost.setHeader(&quot;Date&quot;, timestamp);\n        httpPost.setHeader(&quot;Authorization&quot;, &quot;Basic &quot; + Base64.getEncoder().encodeToString((ikey + &quot;:&quot; + signature).getBytes()));\n        httpPost.setHeader(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;);\n\n\n        httpPost.setEntity(new StringEntity(params.toString()));\n        // Make the request\n        HttpResponse response = httpClient.execute(httpPost);\n        HttpEntity entity = response.getEntity();\n        String responseContent = entity != null ? EntityUtils.toString(entity) : &quot;&quot;;\n\n        String rs =  &quot;Response Status Code: &quot; + response.getStatusLine().getStatusCode() + &quot;\\nResponse Content:\\n&quot; + responseContent;\n        System.out.println(&quot;rs = &quot; + rs);\n\n    }\n\n\n    public static String canonQueryString()\n            throws UnsupportedEncodingException {\n        ArrayList&lt;String&gt; args = new ArrayList&lt;String&gt;();\n\n        for (String key : params.keySet()) {\n            String name = URLEncoder\n                    .encode(key, &quot;UTF-8&quot;)\n                    .replace(&quot;+&quot;, &quot;%20&quot;)\n                    .replace(&quot;*&quot;, &quot;%2A&quot;)\n                    .replace(&quot;%7E&quot;, &quot;~&quot;);\n            String value = URLEncoder\n                    .encode(params.get(key).toString(), &quot;UTF-8&quot;)\n                    .replace(&quot;+&quot;, &quot;%20&quot;)\n                    .replace(&quot;*&quot;, &quot;%2A&quot;)\n                    .replace(&quot;%7E&quot;, &quot;~&quot;);\n            args.add(name + &quot;=&quot; + value);\n        }\n\n        return com.duosecurity.client.Util.join(args.toArray(), &quot;&amp;&quot;);\n    }\n\n    private static String sign1(String data, String secretKey) {\n        try {\n\n            // Create an HMAC-SHA1 key from the secret key\n            SecretKeySpec secretKeySpec = new SecretKeySpec(secretKey.getBytes(StandardCharsets.UTF_8), &quot;HmacSHA1&quot;);\n\n            // Initialize the HMAC-SHA1 algorithm\n            Mac mac = Mac.getInstance(&quot;HmacSHA1&quot;);\n            mac.init(secretKeySpec);\n\n            // Calculate the HMAC-SHA1 hash\n            byte[] hmacSha1Bytes = mac.doFinal(data.getBytes(StandardCharsets.UTF_8));\n\n            // Convert the result to a hexadecimal string\n            String hmacSha1Hex = bytesToHex(hmacSha1Bytes);\n\n            // Print the HMAC-SHA1 hash\n            System.out.println(&quot;HMAC-SHA1: &quot; + hmacSha1Hex);\n\n            return hmacSha1Hex;\n        } catch (NoSuchAlgorithmException | InvalidKeyException e) {\n            e.printStackTrace();\n        }\n\n        return null;\n    }\n\n    // Helper method to convert bytes to a hexadecimal string\n    private static String bytesToHex(byte[] bytes) {\n        StringBuilder hexStringBuilder = new StringBuilder();\n        for (byte b : bytes) {\n            hexStringBuilder.append(String.format(&quot;%02x&quot;, b));\n        }\n        return hexStringBuilder.toString();\n    }\n}\n</code></pre>\n<p>What is the wrong of my code?</p>\n<p>Please help me...</p>\n"},{"tags":["java","android","kotlin","menu","bottomnavigationview"],"comments":[{"owner":{"account_id":11129418,"reputation":542,"user_id":8169814,"display_name":"Malik Saifullah"},"score":1,"creation_date":1663524595,"post_id":73764708,"comment_id":130255417,"body_markdown":"[Accepted answer here](https://stackoverflow.com/questions/57861254/how-to-change-a-specific-icon-image-from-bottom-navigation-view) is what you are looking for.","body":"<a href=\"https://stackoverflow.com/questions/57861254/how-to-change-a-specific-icon-image-from-bottom-navigation-view\">Accepted answer here</a> is what you are looking for."},{"owner":{"account_id":5902254,"reputation":123,"user_id":4645357,"accept_rate":62,"display_name":"Zain"},"score":0,"creation_date":1682860905,"post_id":73764708,"comment_id":134278359,"body_markdown":"Did you find how to load it from a url dear?","body":"Did you find how to load it from a url dear?"}],"answers":[{"tags":[],"owner":{"account_id":59422,"reputation":3286,"user_id":177790,"accept_rate":80,"display_name":"slott"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695744389,"creation_date":1695744389,"answer_id":77181699,"question_id":73764708,"body_markdown":"I had a look at the proposed solutions and none of them worked that great. So here is how I solved the issue - by going straight for the icon view.\r\nSimply access the icon view - which is an image view - and let your favorit image SDK do the rest. This also bypasses the tint and renders the bitmap in full color.\r\n\r\n    \t\tfinal BottomNavigationMenuView mbottomNavigationMenuView =\r\n    \t\t\t\t(BottomNavigationMenuView) binding.navView.getChildAt(0);\r\n    \t\tfinal BottomNavigationItemView itemView = (BottomNavigationItemView)mbottomNavigationMenuView.getChildAt(3);\r\n    \t\tfinal ImageView profileItemIcon = (ImageView) ((ViewGroup)itemView.getChildAt(0)).getChildAt(1);\r\n    \t\tPicasso.get().load(sharedPreferences.getString(RestManager.LOGO, null)).transform(PicassoHelper.profileImageTransformation).fit()\r\n    \t\t\t\t.centerCrop().transform(PicassoHelper.borderedProfileImageTransformation)\r\n    \t\t\t\t.into(profileItemIcon);\r\n\r\n\r\n","title":"How to load image via URL into BottomNavigationView menu item icon","body":"<p>I had a look at the proposed solutions and none of them worked that great. So here is how I solved the issue - by going straight for the icon view.\nSimply access the icon view - which is an image view - and let your favorit image SDK do the rest. This also bypasses the tint and renders the bitmap in full color.</p>\n<pre><code>        final BottomNavigationMenuView mbottomNavigationMenuView =\n                (BottomNavigationMenuView) binding.navView.getChildAt(0);\n        final BottomNavigationItemView itemView = (BottomNavigationItemView)mbottomNavigationMenuView.getChildAt(3);\n        final ImageView profileItemIcon = (ImageView) ((ViewGroup)itemView.getChildAt(0)).getChildAt(1);\n        Picasso.get().load(sharedPreferences.getString(RestManager.LOGO, null)).transform(PicassoHelper.profileImageTransformation).fit()\n                .centerCrop().transform(PicassoHelper.borderedProfileImageTransformation)\n                .into(profileItemIcon);\n</code></pre>\n"}],"owner":{"account_id":14863530,"reputation":31,"user_id":10733439,"display_name":"Osama Sayed"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":254,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695744389,"creation_date":1663520035,"question_id":73764708,"body_markdown":"I followed [this][1] answer, But it showed up like this\r\n\r\n[![enter image description here][2]][2]\r\n\r\nand this is my code \r\n\r\n \r\n\r\n    String imageUrl = &quot;https://m.media-amazon.com/images/M/MV5BYjRjMTA5YjAtMTNjYy00M2E0LTk0YWEtMjE4ZDI3MTdlZmZjXkEyXkFqcGdeQTNwaW5nZXN0._V1_.jpg&quot;;\r\n            Glide.with(getApplicationContext())\r\n                    .asBitmap()\r\n                    .placeholder(R.drawable.ic_profile)\r\n                    .error(R.drawable.ic_profile)\r\n                    .load(imageUrl)\r\n                    .apply(\r\n                            RequestOptions.circleCropTransform().placeholder(R.drawable.profile)\r\n                    )\r\n                    .into(new CustomTarget&lt;Bitmap&gt;() {\r\n                        @Override\r\n                        public void onResourceReady(@NonNull Bitmap resource, @Nullable Transition&lt;? super Bitmap&gt; transition) {\r\n                            Drawable bitmapDrawable = new BitmapDrawable(getResources(), resource);\r\n                            mBinding.bottomNavigation.getMenu().findItem(R.id.nav_my_profile).setIcon(bitmapDrawable);\r\n                        }\r\n    \r\n                        @Override\r\n                        public void onLoadCleared(@Nullable Drawable placeholder) {\r\n                        }\r\n                    });\r\n\r\n&gt; note: my emulator is Android 7 and I tried it on a phone that contains Android 11, but it doesn&#39;t work\r\n\r\nHow can I create this feature?\r\n\r\n[![enter image description here][3]][3]\r\n\r\n&gt; note: I preferred `Java`, if it `kotlin` no problem \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/67667798/10733439\r\n  [2]: https://i.stack.imgur.com/talqa.png\r\n  [3]: https://i.stack.imgur.com/Xyz22.png","title":"How to load image via URL into BottomNavigationView menu item icon","body":"<p>I followed <a href=\"https://stackoverflow.com/a/67667798/10733439\">this</a> answer, But it showed up like this</p>\n<p><a href=\"https://i.stack.imgur.com/talqa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/talqa.png\" alt=\"enter image description here\" /></a></p>\n<p>and this is my code</p>\n<pre><code>String imageUrl = &quot;https://m.media-amazon.com/images/M/MV5BYjRjMTA5YjAtMTNjYy00M2E0LTk0YWEtMjE4ZDI3MTdlZmZjXkEyXkFqcGdeQTNwaW5nZXN0._V1_.jpg&quot;;\n        Glide.with(getApplicationContext())\n                .asBitmap()\n                .placeholder(R.drawable.ic_profile)\n                .error(R.drawable.ic_profile)\n                .load(imageUrl)\n                .apply(\n                        RequestOptions.circleCropTransform().placeholder(R.drawable.profile)\n                )\n                .into(new CustomTarget&lt;Bitmap&gt;() {\n                    @Override\n                    public void onResourceReady(@NonNull Bitmap resource, @Nullable Transition&lt;? super Bitmap&gt; transition) {\n                        Drawable bitmapDrawable = new BitmapDrawable(getResources(), resource);\n                        mBinding.bottomNavigation.getMenu().findItem(R.id.nav_my_profile).setIcon(bitmapDrawable);\n                    }\n\n                    @Override\n                    public void onLoadCleared(@Nullable Drawable placeholder) {\n                    }\n                });\n</code></pre>\n<blockquote>\n<p>note: my emulator is Android 7 and I tried it on a phone that contains Android 11, but it doesn't work</p>\n</blockquote>\n<p>How can I create this feature?</p>\n<p><a href=\"https://i.stack.imgur.com/Xyz22.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xyz22.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>note: I preferred <code>Java</code>, if it <code>kotlin</code> no problem</p>\n</blockquote>\n"},{"tags":["java","multithreading","thread-safety"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1695741481,"post_id":77181309,"comment_id":136063546,"body_markdown":"Did you attempt making `this.myList` a &quot;synchronized list&quot;?","body":"Did you attempt making <code>this.myList</code> a &quot;synchronized list&quot;?"},{"owner":{"account_id":9669917,"reputation":1002,"user_id":7175213,"accept_rate":53,"display_name":"Catarina Nogueira"},"score":0,"creation_date":1695741622,"post_id":77181309,"comment_id":136063577,"body_markdown":"This is what I am doing with Collections.synchronizedList(this.myList), no? The problem is I don&#39;t know if after I need the sort inside synchronized (myListToOrder) {} or not. And could not find my answer by reading the JavaDoc :)","body":"This is what I am doing with Collections.synchronizedList(this.myList), no? The problem is I don&#39;t know if after I need the sort inside synchronized (myListToOrder) {} or not. And could not find my answer by reading the JavaDoc :)"},{"owner":{"account_id":9669917,"reputation":1002,"user_id":7175213,"accept_rate":53,"display_name":"Catarina Nogueira"},"score":0,"creation_date":1695741700,"post_id":77181309,"comment_id":136063600,"body_markdown":"this.myList is an ArrayList(). I will adit on the post","body":"this.myList is an ArrayList(). I will adit on the post"},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":2,"creation_date":1695742072,"post_id":77181309,"comment_id":136063687,"body_markdown":"Wrapping it with `Collections.synchronizedList` like that will do absolutely nothing since anything else accessing it in parallel will be accessing the underlying list, not the wrapped list. Read the javadoc of [`Collections.synchronizedList`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collections.html#synchronizedList(java.util.List)).","body":"Wrapping it with <code>Collections.synchronizedList</code> like that will do absolutely nothing since anything else accessing it in parallel will be accessing the underlying list, not the wrapped list. Read the javadoc of <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Collections.html#synchronizedList(java.util.List)\" rel=\"nofollow noreferrer\"><code>Collections.synchronizedList</code></a>."},{"owner":{"account_id":9669917,"reputation":1002,"user_id":7175213,"accept_rate":53,"display_name":"Catarina Nogueira"},"score":0,"creation_date":1695809188,"post_id":77181309,"comment_id":136072801,"body_markdown":"Why the question was closed? Don&#39;t understand","body":"Why the question was closed? Don&#39;t understand"},{"owner":{"account_id":216950,"reputation":20103,"user_id":472495,"accept_rate":92,"display_name":"halfer"},"score":0,"creation_date":1699050651,"post_id":77181309,"comment_id":136487291,"body_markdown":"@CatarinaNogueira: the close reason is given in the blue box above. For me it says &quot;Closed. This question is opinion-based&quot;. Can you see that? If so, can you explain what you don&#39;t understand about that statement?","body":"@CatarinaNogueira: the close reason is given in the blue box above. For me it says &quot;Closed. This question is opinion-based&quot;. Can you see that? If so, can you explain what you don&#39;t understand about that statement?"},{"owner":{"account_id":9669917,"reputation":1002,"user_id":7175213,"accept_rate":53,"display_name":"Catarina Nogueira"},"score":0,"creation_date":1701165625,"post_id":77181309,"comment_id":136738677,"body_markdown":"Sure, my question was &quot;I am not sure the Collections.sort(myListToOrder); needs to be inside a synchronized block.&quot;. So this is a question with a defined answer, not an &quot;opinion&quot;. I guess the phrase I put in the end &quot;Any opinion on that?&quot; was misleading, but this is not an opinion-based question","body":"Sure, my question was &quot;I am not sure the Collections.sort(myListToOrder); needs to be inside a synchronized block.&quot;. So this is a question with a defined answer, not an &quot;opinion&quot;. I guess the phrase I put in the end &quot;Any opinion on that?&quot; was misleading, but this is not an opinion-based question"}],"answers":[{"comments":[{"owner":{"account_id":9669917,"reputation":1002,"user_id":7175213,"accept_rate":53,"display_name":"Catarina Nogueira"},"score":0,"creation_date":1695742032,"post_id":77181386,"comment_id":136063678,"body_markdown":"Got it! I would like to have a new instance sorted of my list and not Collection.sort() on the original myList because this have collateral effects. That&#39;s why I was creating a new synchronizedList from my list","body":"Got it! I would like to have a new instance sorted of my list and not Collection.sort() on the original myList because this have collateral effects. That&#39;s why I was creating a new synchronizedList from my list"},{"owner":{"account_id":9669917,"reputation":1002,"user_id":7175213,"accept_rate":53,"display_name":"Catarina Nogueira"},"score":0,"creation_date":1695742352,"post_id":77181386,"comment_id":136063757,"body_markdown":"On the second answer why Collections.sort(copy); is not inside    synchronized(myList){/} ?","body":"On the second answer why Collections.sort(copy); is not inside    synchronized(myList){/} ?"},{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1695743811,"post_id":77181386,"comment_id":136064069,"body_markdown":"Because you are operating on a copy - nothing can interfere with the copy as the copy is not published.","body":"Because you are operating on a copy - nothing can interfere with the copy as the copy is not published."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1695744610,"post_id":77181386,"comment_id":136064236,"body_markdown":"@CatarinaNogueira &quot;_That&#39;s why I was creating a new synchronizedList from my list_&quot;  Note that `synchronizedList` does **not** return a &quot;new&quot; list. It decorates the given list with a synchronized list. All actions on the synchronized **view** ultimately delegate to the given list.","body":"@CatarinaNogueira &quot;<i>That&#39;s why I was creating a new synchronizedList from my list</i>&quot;  Note that <code>synchronizedList</code> does <b>not</b> return a &quot;new&quot; list. It decorates the given list with a synchronized list. All actions on the synchronized <b>view</b> ultimately delegate to the given list."},{"owner":{"account_id":422870,"reputation":25925,"user_id":801894,"display_name":"Solomon Slow"},"score":0,"creation_date":1695761920,"post_id":77181386,"comment_id":136067213,"body_markdown":"D&#39;Oh! I did not read the documentation for `Collections.synchronizedList(...)`. I did not realize that the returned `List` object uses itself as the synchronization object. Comment withdrawn.","body":"D&#39;Oh! I did not read the documentation for <code>Collections.synchronizedList(...)</code>. I did not realize that the returned <code>List</code> object uses itself as the synchronization object. Comment withdrawn."}],"tags":[],"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"comment_count":5,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1695744065,"creation_date":1695741815,"answer_id":77181386,"question_id":77181309,"body_markdown":"You need to make sure that there is no access to the list while it is sorted (all accesses need to either &quot;happen before&quot; or &quot;happen after&quot; sorting).\r\n\r\nIn your case, you have a `List`, creating a `synchronized` _view_ on the `List` and `synchronize` on that view. However, other code can still access the original list in the meantime.\r\n\r\nYou can fix this issue by using the same `synchronizedList` for all operations:\r\n```java\r\n\r\nprivate final List&lt;String&gt; myList = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\n\r\nprivate List&lt;String&gt; sortSynchronized(){\r\n    synchronized (myList) {//no other access to myList is possible during this block\r\n        Collections.sort(myListToOrder);\r\n    }\r\n    return myListToOrder;\r\n}\r\n``` \r\nAlternatively, you can introduce your own synchronization strategy for that list and secure all access to the `List` that way, e.g. using `ReadWriteLock`.\r\n\r\nHowever, it should be noted that other accesses to the `List` can mess up sorting right after `sortSyncronized` finishes. Instead of returning the same `List`, you might want to (sort and) return a copy:\r\n```\r\nprivate final List&lt;String&gt; myList = Collections.synchronizedList(new ArrayList&lt;&gt;());\r\nprivate List&lt;String&gt; sortedCopy(){\r\n    List&lt;String&gt; copy;\r\n    synchronized(myList){//or however you want to secure access - elements being added to the list during copying might cause issues\r\n        copy = new ArrayList&lt;&gt;(myList);\r\n    }\r\n    Collections.sort(copy);\r\n    return copy;\r\n    //or if you want to have a synchronizedList\r\n    //return Collections.synchronizedList(copy); \r\n}\r\n```","title":"Collections.sort() Synchronized","body":"<p>You need to make sure that there is no access to the list while it is sorted (all accesses need to either &quot;happen before&quot; or &quot;happen after&quot; sorting).</p>\n<p>In your case, you have a <code>List</code>, creating a <code>synchronized</code> <em>view</em> on the <code>List</code> and <code>synchronize</code> on that view. However, other code can still access the original list in the meantime.</p>\n<p>You can fix this issue by using the same <code>synchronizedList</code> for all operations:</p>\n<pre class=\"lang-java prettyprint-override\"><code>\nprivate final List&lt;String&gt; myList = Collections.synchronizedList(new ArrayList&lt;&gt;());\n\nprivate List&lt;String&gt; sortSynchronized(){\n    synchronized (myList) {//no other access to myList is possible during this block\n        Collections.sort(myListToOrder);\n    }\n    return myListToOrder;\n}\n</code></pre>\n<p>Alternatively, you can introduce your own synchronization strategy for that list and secure all access to the <code>List</code> that way, e.g. using <code>ReadWriteLock</code>.</p>\n<p>However, it should be noted that other accesses to the <code>List</code> can mess up sorting right after <code>sortSyncronized</code> finishes. Instead of returning the same <code>List</code>, you might want to (sort and) return a copy:</p>\n<pre><code>private final List&lt;String&gt; myList = Collections.synchronizedList(new ArrayList&lt;&gt;());\nprivate List&lt;String&gt; sortedCopy(){\n    List&lt;String&gt; copy;\n    synchronized(myList){//or however you want to secure access - elements being added to the list during copying might cause issues\n        copy = new ArrayList&lt;&gt;(myList);\n    }\n    Collections.sort(copy);\n    return copy;\n    //or if you want to have a synchronizedList\n    //return Collections.synchronizedList(copy); \n}\n</code></pre>\n"}],"owner":{"account_id":9669917,"reputation":1002,"user_id":7175213,"accept_rate":53,"display_name":"Catarina Nogueira"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":95,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"closed_date":1695752079,"answer_count":1,"score":-2,"last_activity_date":1695744065,"creation_date":1695741258,"question_id":77181309,"body_markdown":"I have a list and I need to sort it, in a thread-safe way, in Java. I need the return to be a list. \r\n\r\n\r\nI wrote the code below but since `myListToOrder` is already a `synchronizedList` I am not sure the `Collections.sort(myListToOrder);` needs to be inside a `synchronized` block. \r\n\r\n    private  List&lt;String&gt; sortSynchronized(){\r\n        List&lt;String&gt; myListToOrder = Collections.synchronizedList(this.myList);\r\n                synchronized (myListToOrder) {\r\n                    Collections.sort(myListToOrder);\r\n                }\r\n    return myListToOrder;\r\n    }\r\n\r\nNote: `myList` is created as: `protected final List&lt;String&gt; myList = Lists.newArrayList();` \r\n\r\nAny opinion on that? ","title":"Collections.sort() Synchronized","body":"<p>I have a list and I need to sort it, in a thread-safe way, in Java. I need the return to be a list.</p>\n<p>I wrote the code below but since <code>myListToOrder</code> is already a <code>synchronizedList</code> I am not sure the <code>Collections.sort(myListToOrder);</code> needs to be inside a <code>synchronized</code> block.</p>\n<pre><code>private  List&lt;String&gt; sortSynchronized(){\n    List&lt;String&gt; myListToOrder = Collections.synchronizedList(this.myList);\n            synchronized (myListToOrder) {\n                Collections.sort(myListToOrder);\n            }\nreturn myListToOrder;\n}\n</code></pre>\n<p>Note: <code>myList</code> is created as: <code>protected final List&lt;String&gt; myList = Lists.newArrayList();</code></p>\n<p>Any opinion on that?</p>\n"},{"tags":["java"],"answers":[{"comments":[{"owner":{"account_id":9363938,"reputation":61,"user_id":6949452,"display_name":"ghanit"},"score":0,"creation_date":1697799955,"post_id":55219584,"comment_id":136328321,"body_markdown":"Can you explain why Milo/DigitalPetri is much better than Prosys other than the better performance in 2019? The Project does not seem to be as active anymore as it used to be and documentation looks thin on first glance.\n\nI have used Prosys Java SDK in a commercial project and while not perfect, their support has been amazing (fixing bugs over my lunch break).","body":"Can you explain why Milo/DigitalPetri is much better than Prosys other than the better performance in 2019? The Project does not seem to be as active anymore as it used to be and documentation looks thin on first glance.  I have used Prosys Java SDK in a commercial project and while not perfect, their support has been amazing (fixing bugs over my lunch break)."}],"tags":[],"owner":{"account_id":5870718,"reputation":3152,"user_id":4623129,"display_name":"Khalid Shah"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695743079,"creation_date":1552906124,"answer_id":55219584,"question_id":55219429,"body_markdown":"I have worked with two Libraries which gives SDK for OPC UA  Client and OPC  UA Server. \r\n\r\nThe first one is [Prosys][1] and it is not open source.\r\n\r\nAnd Second one is [DigitalPetri][2] which is now moved to under umbrella iot project and it is open source.\r\n\r\nI found digital petri is much better. i recommend you to use this.\r\nIt has all SDKs for \r\n\r\n**OPC UA Client SDK**\r\n\r\n**OPC UA Server SDK** and\r\n\r\n**OPC UA Stack**\r\n\r\nsee [Bench Marks][3] for OPC UA Sdks.\r\n\r\n\r\n  [1]: https://www.prosysopc.com/products/opc-ua-java-sdk/\r\n  [2]: https://github.com/eclipse/milo\r\n  [3]: https://github.com/kevinherron/stack-bench","title":"Create OPC UA client for JAVA","body":"<p>I have worked with two Libraries which gives SDK for OPC UA  Client and OPC  UA Server.</p>\n<p>The first one is <a href=\"https://www.prosysopc.com/products/opc-ua-java-sdk/\" rel=\"nofollow noreferrer\">Prosys</a> and it is not open source.</p>\n<p>And Second one is <a href=\"https://github.com/eclipse/milo\" rel=\"nofollow noreferrer\">DigitalPetri</a> which is now moved to under umbrella iot project and it is open source.</p>\n<p>I found digital petri is much better. i recommend you to use this.\nIt has all SDKs for</p>\n<p><strong>OPC UA Client SDK</strong></p>\n<p><strong>OPC UA Server SDK</strong> and</p>\n<p><strong>OPC UA Stack</strong></p>\n<p>see <a href=\"https://github.com/kevinherron/stack-bench\" rel=\"nofollow noreferrer\">Bench Marks</a> for OPC UA Sdks.</p>\n"}],"owner":{"account_id":9323261,"reputation":21,"user_id":6921396,"display_name":"R.Priego"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4339,"favorite_count":0,"down_vote_count":3,"up_vote_count":2,"answer_count":1,"score":-1,"last_activity_date":1695743079,"creation_date":1552905633,"question_id":55219429,"body_markdown":"I need to create an OPC UA client to connect to a PLC (server). I would need you to recommend me which library is better or use you and some example of Client to be able to connect and read and write variables.\r\n\r\nThanks","title":"Create OPC UA client for JAVA","body":"<p>I need to create an OPC UA client to connect to a PLC (server). I would need you to recommend me which library is better or use you and some example of Client to be able to connect and read and write variables.</p>\n\n<p>Thanks</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":1,"creation_date":1695737979,"post_id":77180781,"comment_id":136062681,"body_markdown":"Your example code is slightly broken, because you should only register list change listeners on the FX Application Thread. This doesn&#39;t change the behavior, however. I believe what is happening here (though I&#39;m not quite sure) is that the extractor works by registering a `WeakChangeListener` with the specified property, and that listener is getting garbage collected.","body":"Your example code is slightly broken, because you should only register list change listeners on the FX Application Thread. This doesn&#39;t change the behavior, however. I believe what is happening here (though I&#39;m not quite sure) is that the extractor works by registering a <code>WeakChangeListener</code> with the specified property, and that listener is getting garbage collected."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1695740179,"post_id":77180781,"comment_id":136063199,"body_markdown":"@James_D As far as I know, anything from the `javafx.base` module can be used on any thread, and is intentionally designed to allow use outside the context of a JavaFX application. Though nothing there is safe to be used by unsynchronized concurrent threads. Of course, once an observable is connected to the UI, then it should only be interacted with on the FX thread specifically.","body":"@James_D As far as I know, anything from the <code>javafx.base</code> module can be used on any thread, and is intentionally designed to allow use outside the context of a JavaFX application. Though nothing there is safe to be used by unsynchronized concurrent threads. Of course, once an observable is connected to the UI, then it should only be interacted with on the FX thread specifically."},{"owner":{"account_id":2518243,"reputation":203472,"user_id":2189127,"display_name":"James_D"},"score":0,"creation_date":1695740441,"post_id":77180781,"comment_id":136063270,"body_markdown":"@Slaw *&quot;anything from the `javafx.base` module can be used on any thread&quot;*. This is certainly true. But I *think* (I may be wrong) that a listener needs to be registered on the same thread as the one on which changes are made.","body":"@Slaw <i>&quot;anything from the <code>javafx.base</code> module can be used on any thread&quot;</i>. This is certainly true. But I <i>think</i> (I may be wrong) that a listener needs to be registered on the same thread as the one on which changes are made."},{"owner":{"account_id":4882335,"reputation":659,"user_id":10489834,"display_name":"Stefan Pfeifer"},"score":0,"creation_date":1695741781,"post_id":77180781,"comment_id":136063617,"body_markdown":"Thanks for the comments! I have changed the example so that the listeners are registered on the FX application thread too. The behaviour of the code is the same as before though.","body":"Thanks for the comments! I have changed the example so that the listeners are registered on the FX application thread too. The behaviour of the code is the same as before though."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":1,"creation_date":1695742083,"post_id":77180781,"comment_id":136063691,"body_markdown":"@James_D I think the more important thing is that a _happens-before_ relationship is established.","body":"@James_D I think the more important thing is that a <i>happens-before</i> relationship is established."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1695743195,"post_id":77180781,"comment_id":136063962,"body_markdown":"I am not sure what&#39;s going on but it appears that adding `c.getList().get(0).nameProperty().toString());` causes things to act as expected.  `System.out.println(&quot;List element was updated&quot; + c.getList().get(0).nameProperty().toString());`","body":"I am not sure what&#39;s going on but it appears that adding <code>c.getList().get(0).nameProperty().toString());</code> causes things to act as expected.  <code>System.out.println(&quot;List element was updated&quot; + c.getList().get(0).nameProperty().toString());</code>"},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1695743278,"post_id":77180781,"comment_id":136063982,"body_markdown":"`observableList.addListener((ListChangeListener&lt;TestClass&gt;) c -&gt; {\n                while(c.next()) {\n                    if(c.wasUpdated()) {\n                        System.out.println(&quot;List element was updated&quot; + c.getList().get(0).nameProperty());\n                    }\n                }\n            });`","body":"<code>observableList.addListener((ListChangeListener&lt;TestClass&gt;) c -&gt; {                 while(c.next()) {                     if(c.wasUpdated()) {                         System.out.println(&quot;List element was updated&quot; + c.getList().get(0).nameProperty());                     }                 }             });</code>"},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1695743396,"post_id":77180781,"comment_id":136064001,"body_markdown":"@SedJ601 Calling `toString()` has the side-effect of validating the property (because the implementation calls `get()`).","body":"@SedJ601 Calling <code>toString()</code> has the side-effect of validating the property (because the implementation calls <code>get()</code>)."}],"answers":[{"comments":[{"owner":{"account_id":4882335,"reputation":659,"user_id":10489834,"display_name":"Stefan Pfeifer"},"score":2,"creation_date":1695742975,"post_id":77181359,"comment_id":136063902,"body_markdown":"Oh, that&#39;s interesting. Didn&#39;t know that JavaFX properties are that clever. But it seems like you are right. Even just changing the action in the list&#39;s change listener to `System.out.println(&quot;List element was updated to &quot; + test.nameProperty().get());` solves the problem. Now the remaining question for me is why the property wasn&#39;t used/validated in my original code, but that&#39;s another topic.","body":"Oh, that&#39;s interesting. Didn&#39;t know that JavaFX properties are that clever. But it seems like you are right. Even just changing the action in the list&#39;s change listener to <code>System.out.println(&quot;List element was updated to &quot; + test.nameProperty().get());</code> solves the problem. Now the remaining question for me is why the property wasn&#39;t used/validated in my original code, but that&#39;s another topic."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":2,"creation_date":1695743716,"post_id":77181359,"comment_id":136064051,"body_markdown":"@Stefan If you find this is not the problem in your real code, I suggest checking to see if anything is being garbage collected prematurely (i.e., if you&#39;re not keeping a strong reference to objects you need).","body":"@Stefan If you find this is not the problem in your real code, I suggest checking to see if anything is being garbage collected prematurely (i.e., if you&#39;re not keeping a strong reference to objects you need)."}],"tags":[],"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"comment_count":2,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1695742792,"creation_date":1695741644,"answer_id":77181359,"question_id":77180781,"body_markdown":"Note the extractor returns an array of `Observable`, and if we look at the [documentation][1]:\r\n\r\n&gt; Implementations of this class should strive to generate as few events as possible to avoid wasting too much time in event handlers. Implementations in this library mark themselves as invalid when the first invalidation event occurs. They do not generate anymore invalidation events until their value is recomputed and valid again.\r\n\r\nThe `name` property starts off in a valid state. You set the property, it&#39;s invalidated, fires an invalidation event, and ultimately the list change listener is notified of an update. But then you never query the `name` property, meaning it is never validated. Thus, it remains in an invalid state and does not fire any more invalidation events despite it being set (to different values) over and over. You need to validate the observable(s) if you want to keep being notified of invalidation events.\r\n\r\nHere&#39;s an example showing the difference between validating the observable and not:\r\n\r\n```java\r\nimport javafx.beans.Observable;\r\nimport javafx.beans.property.SimpleStringProperty;\r\nimport javafx.beans.property.StringProperty;\r\nimport javafx.collections.FXCollections;\r\nimport javafx.collections.ListChangeListener;\r\nimport javafx.collections.ObservableList;\r\n\r\n\r\npublic class Main {\r\n\r\n    public static void main(String[] args) {\r\n        doTestWithoutValidation();\r\n        doTestWithValidation();\r\n    }\r\n\r\n    static void doTestWithoutValidation() {\r\n        StringProperty element = new SimpleStringProperty();\r\n\r\n        ObservableList&lt;Observable&gt; list = FXCollections.observableArrayList(e -&gt; new Observable[]{e});\r\n        list.add(element);\r\n\r\n        list.addListener((ListChangeListener.Change&lt;? extends Observable&gt; change) -&gt; {\r\n            while (change.next()) {\r\n                if (change.wasUpdated()) {\r\n                    System.out.println(&quot;List element updated&quot;);\r\n                }\r\n            }\r\n        });\r\n\r\n        System.out.println(&quot;Doing test WITHOUT validations...&quot;);\r\n\r\n        element.set(&quot;Foo&quot;);\r\n        element.set(&quot;Bar&quot;);\r\n        element.set(&quot;Baz&quot;);\r\n\r\n        System.out.println(&quot;DONE!&quot;);\r\n        System.out.println();\r\n    }\r\n\r\n    static void doTestWithValidation() {\r\n        StringProperty element = new SimpleStringProperty();\r\n\r\n        ObservableList&lt;Observable&gt; list = FXCollections.observableArrayList(e -&gt; new Observable[]{e});\r\n        list.add(element);\r\n\r\n        list.addListener((ListChangeListener.Change&lt;? extends Observable&gt; change) -&gt; {\r\n            while (change.next()) {\r\n                if (change.wasUpdated()) {\r\n                    System.out.println(&quot;List element updated&quot;);\r\n                }\r\n            }\r\n        });\r\n\r\n        System.out.println(&quot;Doing test WITH validations...&quot;);\r\n\r\n        element.set(&quot;Foo&quot;);\r\n        element.get(); // validate\r\n        element.set(&quot;Bar&quot;);\r\n        element.get(); // validate\r\n        element.set(&quot;Baz&quot;);\r\n\r\n        System.out.println(&quot;DONE!&quot;);\r\n        System.out.println();\r\n    }\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```none\r\nDoing test WITHOUT validations...\r\nList element updated\r\nDONE!\r\n\r\nDoing test WITH validations...  \r\nList element updated\r\nList element updated\r\nList element updated\r\nDONE!\r\n\r\n```\r\n\r\nYou also have to be careful of garbage collection. In your code, after updating it to solve the concurrency problems that were present, I believe it&#39;s possible the `ObservableList` itself becomes eligible for garbage collection after the `Runnable` (passed to `startup`) returns.\r\n\r\n\r\n\r\n  [1]: https://openjfx.io/javadoc/20/javafx.base/javafx/beans/Observable.html","title":"JavaFX ObservableList with extractor changes behaviour depending on the existence of a listener","body":"<p>Note the extractor returns an array of <code>Observable</code>, and if we look at the <a href=\"https://openjfx.io/javadoc/20/javafx.base/javafx/beans/Observable.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>Implementations of this class should strive to generate as few events as possible to avoid wasting too much time in event handlers. Implementations in this library mark themselves as invalid when the first invalidation event occurs. They do not generate anymore invalidation events until their value is recomputed and valid again.</p>\n</blockquote>\n<p>The <code>name</code> property starts off in a valid state. You set the property, it's invalidated, fires an invalidation event, and ultimately the list change listener is notified of an update. But then you never query the <code>name</code> property, meaning it is never validated. Thus, it remains in an invalid state and does not fire any more invalidation events despite it being set (to different values) over and over. You need to validate the observable(s) if you want to keep being notified of invalidation events.</p>\n<p>Here's an example showing the difference between validating the observable and not:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.beans.Observable;\nimport javafx.beans.property.SimpleStringProperty;\nimport javafx.beans.property.StringProperty;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ListChangeListener;\nimport javafx.collections.ObservableList;\n\n\npublic class Main {\n\n    public static void main(String[] args) {\n        doTestWithoutValidation();\n        doTestWithValidation();\n    }\n\n    static void doTestWithoutValidation() {\n        StringProperty element = new SimpleStringProperty();\n\n        ObservableList&lt;Observable&gt; list = FXCollections.observableArrayList(e -&gt; new Observable[]{e});\n        list.add(element);\n\n        list.addListener((ListChangeListener.Change&lt;? extends Observable&gt; change) -&gt; {\n            while (change.next()) {\n                if (change.wasUpdated()) {\n                    System.out.println(&quot;List element updated&quot;);\n                }\n            }\n        });\n\n        System.out.println(&quot;Doing test WITHOUT validations...&quot;);\n\n        element.set(&quot;Foo&quot;);\n        element.set(&quot;Bar&quot;);\n        element.set(&quot;Baz&quot;);\n\n        System.out.println(&quot;DONE!&quot;);\n        System.out.println();\n    }\n\n    static void doTestWithValidation() {\n        StringProperty element = new SimpleStringProperty();\n\n        ObservableList&lt;Observable&gt; list = FXCollections.observableArrayList(e -&gt; new Observable[]{e});\n        list.add(element);\n\n        list.addListener((ListChangeListener.Change&lt;? extends Observable&gt; change) -&gt; {\n            while (change.next()) {\n                if (change.wasUpdated()) {\n                    System.out.println(&quot;List element updated&quot;);\n                }\n            }\n        });\n\n        System.out.println(&quot;Doing test WITH validations...&quot;);\n\n        element.set(&quot;Foo&quot;);\n        element.get(); // validate\n        element.set(&quot;Bar&quot;);\n        element.get(); // validate\n        element.set(&quot;Baz&quot;);\n\n        System.out.println(&quot;DONE!&quot;);\n        System.out.println();\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Doing test WITHOUT validations...\nList element updated\nDONE!\n\nDoing test WITH validations...  \nList element updated\nList element updated\nList element updated\nDONE!\n\n</code></pre>\n<p>You also have to be careful of garbage collection. In your code, after updating it to solve the concurrency problems that were present, I believe it's possible the <code>ObservableList</code> itself becomes eligible for garbage collection after the <code>Runnable</code> (passed to <code>startup</code>) returns.</p>\n"}],"owner":{"account_id":4882335,"reputation":659,"user_id":10489834,"display_name":"Stefan Pfeifer"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":77181359,"answer_count":1,"score":2,"last_activity_date":1695742792,"creation_date":1695737144,"question_id":77180781,"body_markdown":"The following problem has been the source of a bug in my JavaFX application. The weird thing is that the behaviour depends on whether a specific JavaFX property has a listener attached to it or not. Everything works when the property is observed by a `ChangeListener`, otherwise not. It&#39;s starting to drive me crazy...\r\n\r\nI managed to break it down to a minimal code example. First we need a class that exposes a property that changes every now and then. Here it&#39;s called `nameProperty()`. In this example I chose to spawn a separate thread that continuously modifies the property, but in the real application it happens by user interaction.\r\n\r\n```\r\nclass TestClass {\r\n    private final SimpleObjectProperty&lt;String&gt; name = new SimpleObjectProperty&lt;&gt;();\r\n\r\n    public TestClass() {\r\n        new Thread(() -&gt; {\r\n            while(true) {\r\n                try {\r\n                    Thread.sleep(1000);\r\n                    Platform.runLater(() -&gt; name.set(&quot;A&quot;));\r\n                    Thread.sleep(1000);\r\n                    Platform.runLater(() -&gt; name.set(&quot;B&quot;));\r\n                }\r\n                catch(InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n            }\r\n        }).start();\r\n    }\r\n\r\n    public ReadOnlyObjectProperty&lt;String&gt; nameProperty() {\r\n        return name;\r\n    }\r\n}\r\n```\r\n\r\nIn the main method, on the FX application thread, an `ObservableList&lt;TestClass&gt;` is created with an extractor so that changes to the `nameProperty()` of list elements are reported by the `ListChangeListener`. We then create an instance of the test class, add it to the list and add a `ListChangeListener` to observe updates to the list.\r\n\r\n```\r\npublic static void main(String[] args) throws Exception {\r\n    Platform.startup(() -&gt; {\r\n        Callback&lt;TestClass, Observable[]&gt; extractor = obj -&gt; new Observable[]{ obj.nameProperty() };\r\n        ObservableList&lt;TestClass&gt; list = FXCollections.observableArrayList(extractor);\r\n\r\n        TestClass test = new TestClass();\r\n        list.add(test);\r\n\r\n        list.addListener((ListChangeListener&lt;TestClass&gt;) c -&gt; {\r\n            while(c.next()) {\r\n                if(c.wasUpdated()) {\r\n                    System.out.println(&quot;List element was updated&quot;);\r\n                }\r\n            }\r\n        });\r\n    });\r\n\r\n    Thread.sleep(60*60*1000);\r\n}\r\n```\r\n\r\nMy expectation for the output was that it would look like this, due to the list extractor and the property being continuously modified:\r\n\r\n```\r\nList element was updated\r\nList element was updated\r\nList element was updated\r\nList element was updated\r\nList element was updated\r\n...\r\n```\r\n\r\nBut instead it looks like this:\r\n\r\n```\r\nList element was updated\r\n*silence*\r\n```\r\n\r\nNow the weird part is that as soon as a `ChangeListener` is added to the `nameProperty()` anywhere in the code, for example\r\n\r\n```\r\ntest.nameProperty().addListener(((observable, oldValue, newValue) -&gt; {}));\r\n```\r\n\r\nit seems to work just as expected and the list produces change notifications continuously.\r\n\r\nJust observing a property should not change the behaviour of other things bound to that property, right? But if this were a bug in JavaFX, it would be a really obvious and fundamental one in my opinition. So maybe I did mess something up, even though the program seems very simple. I&#39;m using OpenJFX version 21 on Windows 10, by the way.","title":"JavaFX ObservableList with extractor changes behaviour depending on the existence of a listener","body":"<p>The following problem has been the source of a bug in my JavaFX application. The weird thing is that the behaviour depends on whether a specific JavaFX property has a listener attached to it or not. Everything works when the property is observed by a <code>ChangeListener</code>, otherwise not. It's starting to drive me crazy...</p>\n<p>I managed to break it down to a minimal code example. First we need a class that exposes a property that changes every now and then. Here it's called <code>nameProperty()</code>. In this example I chose to spawn a separate thread that continuously modifies the property, but in the real application it happens by user interaction.</p>\n<pre><code>class TestClass {\n    private final SimpleObjectProperty&lt;String&gt; name = new SimpleObjectProperty&lt;&gt;();\n\n    public TestClass() {\n        new Thread(() -&gt; {\n            while(true) {\n                try {\n                    Thread.sleep(1000);\n                    Platform.runLater(() -&gt; name.set(&quot;A&quot;));\n                    Thread.sleep(1000);\n                    Platform.runLater(() -&gt; name.set(&quot;B&quot;));\n                }\n                catch(InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        }).start();\n    }\n\n    public ReadOnlyObjectProperty&lt;String&gt; nameProperty() {\n        return name;\n    }\n}\n</code></pre>\n<p>In the main method, on the FX application thread, an <code>ObservableList&lt;TestClass&gt;</code> is created with an extractor so that changes to the <code>nameProperty()</code> of list elements are reported by the <code>ListChangeListener</code>. We then create an instance of the test class, add it to the list and add a <code>ListChangeListener</code> to observe updates to the list.</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    Platform.startup(() -&gt; {\n        Callback&lt;TestClass, Observable[]&gt; extractor = obj -&gt; new Observable[]{ obj.nameProperty() };\n        ObservableList&lt;TestClass&gt; list = FXCollections.observableArrayList(extractor);\n\n        TestClass test = new TestClass();\n        list.add(test);\n\n        list.addListener((ListChangeListener&lt;TestClass&gt;) c -&gt; {\n            while(c.next()) {\n                if(c.wasUpdated()) {\n                    System.out.println(&quot;List element was updated&quot;);\n                }\n            }\n        });\n    });\n\n    Thread.sleep(60*60*1000);\n}\n</code></pre>\n<p>My expectation for the output was that it would look like this, due to the list extractor and the property being continuously modified:</p>\n<pre><code>List element was updated\nList element was updated\nList element was updated\nList element was updated\nList element was updated\n...\n</code></pre>\n<p>But instead it looks like this:</p>\n<pre><code>List element was updated\n*silence*\n</code></pre>\n<p>Now the weird part is that as soon as a <code>ChangeListener</code> is added to the <code>nameProperty()</code> anywhere in the code, for example</p>\n<pre><code>test.nameProperty().addListener(((observable, oldValue, newValue) -&gt; {}));\n</code></pre>\n<p>it seems to work just as expected and the list produces change notifications continuously.</p>\n<p>Just observing a property should not change the behaviour of other things bound to that property, right? But if this were a bug in JavaFX, it would be a really obvious and fundamental one in my opinition. So maybe I did mess something up, even though the program seems very simple. I'm using OpenJFX version 21 on Windows 10, by the way.</p>\n"},{"tags":["java","android","sensors","android-sensors","sensormanager"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1695754475,"post_id":77181466,"comment_id":136065974,"body_markdown":"Are you sure that your physical phone really has this type of sensor? I am not sure if many phones have a second sensor except the batter ytemperature sensor accessible from within apps.","body":"Are you sure that your physical phone really has this type of sensor? I am not sure if many phones have a second sensor except the batter ytemperature sensor accessible from within apps."},{"owner":{"account_id":28728192,"reputation":1,"user_id":22000661,"display_name":"electric_eel23"},"score":0,"creation_date":1695815167,"post_id":77181466,"comment_id":136073943,"body_markdown":"My phone has the Android Version `11` and in the  [android documentation](https://apilevels.com/) I have read that my API Level is `30`. In the  [Sensor documentation](https://developer.android.com/guide/topics/sensors/sensors_overview#sensor-availability) it says that `TYPE_TEMPERATURE` is deprecated on API Level `14` and you should use the `TYPE_AMBIENT_TEMPERATURE` Sensor.","body":"My phone has the Android Version <code>11</code> and in the  <a href=\"https://apilevels.com/\" rel=\"nofollow noreferrer\">android documentation</a> I have read that my API Level is <code>30</code>. In the  <a href=\"https://developer.android.com/guide/topics/sensors/sensors_overview#sensor-availability\" rel=\"nofollow noreferrer\">Sensor documentation</a> it says that <code>TYPE_TEMPERATURE</code> is deprecated on API Level <code>14</code> and you should use the <code>TYPE_AMBIENT_TEMPERATURE</code> Sensor."},{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1695815579,"post_id":77181466,"comment_id":136074027,"body_markdown":"That is just the API which allows you to query a sensor. It will only work if the hardware contains it and exposes it to the Android API. So the actual question is if your phone has such a sensor and makes it accessible via Android API or not. So I would start by checking the result of `getDynamicSensorList(..)` what [temperature] sensors your device supports at all.","body":"That is just the API which allows you to query a sensor. It will only work if the hardware contains it and exposes it to the Android API. So the actual question is if your phone has such a sensor and makes it accessible via Android API or not. So I would start by checking the result of <code>getDynamicSensorList(..)</code> what [temperature] sensors your device supports at all."},{"owner":{"account_id":28728192,"reputation":1,"user_id":22000661,"display_name":"electric_eel23"},"score":0,"creation_date":1696349414,"post_id":77181466,"comment_id":136140125,"body_markdown":"@Robert, I have checked it and it returns on `TYPE_AMBIENT_TEMPERATURE`, `TYPE_TEMPERATURE` and `TYPE_ALL` only an empty list.","body":"@Robert, I have checked it and it returns on <code>TYPE_AMBIENT_TEMPERATURE</code>, <code>TYPE_TEMPERATURE</code> and <code>TYPE_ALL</code> only an empty list."}],"owner":{"account_id":28728192,"reputation":1,"user_id":22000661,"display_name":"electric_eel23"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":44,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695742572,"creation_date":1695742572,"question_id":77181466,"body_markdown":"I am building an app which shoud display all the values from all the sensors including the `TYPE_AMBIENT_TEMPERATURE` sensor. I am using the `SensorManager` class.\r\n\r\n\r\nI have written the code and tested it on the Emulator and it worked. But if I run the app on my phone (Galaxy A20e) it did not worked. It seems to not enter the `onSensorChanged` method. I have placed logs in the code and so I know, that the sensor is initialised an is activated. I have also installed the *Thermometer*-App and the App is working fine. So the physical Sensor is working. Does anyone know what is wrong with the code? My Code is the folowing:\r\n\r\n# MainActivity\r\n\r\n```\r\npackage com.blueapps.sensorstation;\r\n\r\nimport android.content.Context;\r\nimport android.hardware.SensorManager;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport com.blueapps.sensorstation.databinding.ActivityMainBinding;\r\n\r\npublic class MainActivity extends AppCompatActivity {\r\n\r\n    private ActivityMainBinding binding;\r\n\r\n    private setOnClickListener Listener;\r\n\r\n    private StartSensors startSensors;\r\n\r\n    private SensorManager sensorManager;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n\r\n        // init View\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        View view = binding.getRoot();\r\n        setContentView(view);\r\n\r\n\r\n        // adapt the Layout to the Screen\r\n        adaptLayout layoutAdapter = new adaptLayout(this.getWindowManager(), getResources(), binding);\r\n        layoutAdapter.adaptView();\r\n\r\n        // set OnCLickListener for components\r\n        Listener = new setOnClickListener(getApplicationContext(), view, binding);\r\n        Listener.setListener();\r\n\r\n\r\n        // Get the Sensor Manager\r\n        sensorManager = ( SensorManager) getSystemService(Context.SENSOR_SERVICE);\r\n\r\n        // init the start Sensors Class\r\n        startSensors = new StartSensors(getResources(), sensorManager, binding);\r\n\r\n    }\r\n\r\n    @Override\r\n    protected void onPause() {\r\n        super.onPause();\r\n        // Deactivate Sensors\r\n        startSensors.deactivate();\r\n\r\n        // Give the On Click Listener the information about the onPause Call\r\n        Listener.Pause();\r\n    }\r\n\r\n    @Override\r\n    protected void onResume() {\r\n        super.onResume();\r\n        // Activate Sensors\r\n        startSensors.activate();\r\n\r\n        // Give the On Click Listener the information about the onResume Call\r\n        Listener.Resume();\r\n    }\r\n\r\n    @Override\r\n    protected void onStop() {\r\n        super.onStop();\r\n        // Give the On Click Listener the information about the onPause Call\r\n        Listener.Pause();\r\n    }\r\n\r\n    @Override\r\n    protected void onRestart() {\r\n        super.onRestart();\r\n        // Give the On Click Listener the information about the onResume Call\r\n        Listener.Resume();\r\n    }\r\n}\r\n```\r\n\r\n# StartSensors\r\n```\r\npackage com.blueapps.sensorstation;\r\n\r\nimport android.content.res.Resources;\r\nimport android.hardware.SensorManager;\r\nimport android.widget.TextView;\r\n\r\nimport com.blueapps.sensorstation.databinding.ActivityMainBinding;\r\nimport com.blueapps.sensorstation.sensors.Temperature;\r\n\r\npublic class StartSensors {\r\n\r\n    private SensorManager sensorManager;\r\n\r\n    private Resources resources;\r\n\r\n    // Sensor Classes\r\n    Temperature temperature;\r\n\r\n\r\n    // TextViews\r\n    private TextView textTemp;\r\n\r\n\r\n    public StartSensors(Resources resources, SensorManager sensorManager, ActivityMainBinding binding){\r\n\r\n        this.sensorManager = sensorManager;\r\n        this.resources = resources;\r\n\r\n        // Bind the TextViews\r\n        textTemp = binding.temperatureText;\r\n\r\n        // Instance Sensor Classes\r\n        temperature = new Temperature(resources, sensorManager, textTemp);\r\n\r\n    }\r\n\r\n    public void activate(){\r\n\r\n        // Temperature\r\n        temperature.activate();\r\n\r\n    }\r\n\r\n    public void deactivate(){\r\n\r\n        // Temperature\r\n        temperature.deactivate();\r\n\r\n    }\r\n\r\n}\r\n```\r\n\r\n# Temperature\r\n\r\n```\r\npackage com.blueapps.sensorstation.sensors;\r\n\r\nimport android.annotation.SuppressLint;\r\nimport android.content.res.Resources;\r\nimport android.hardware.Sensor;\r\nimport android.hardware.SensorEvent;\r\nimport android.hardware.SensorEventListener;\r\nimport android.hardware.SensorManager;\r\nimport android.util.Log;\r\nimport android.widget.TextView;\r\n\r\nimport com.blueapps.sensorstation.R;\r\n\r\npublic class Temperature implements SensorEventListener {\r\n\r\n    private SensorManager sensorManager;\r\n\r\n    private TextView text;\r\n\r\n    private Resources resources;\r\n\r\n    private Sensor temperature;\r\n\r\n    public Temperature(Resources resources, SensorManager sensorManager, TextView text){\r\n\r\n        this.sensorManager = sensorManager;\r\n        this.text = text;\r\n        this.resources = resources;\r\n\r\n    }\r\n\r\n    public void activate(){\r\n\r\n        temperature = sensorManager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE);\r\n        sensorManager.registerListener(this, temperature, SensorManager.SENSOR_DELAY_UI);\r\n        Log.d(&quot;startSensors&quot;, &quot;Sensor Temperature is activated&quot;);\r\n\r\n    }\r\n\r\n    public void deactivate(){\r\n\r\n        sensorManager.unregisterListener(this, temperature);\r\n        Log.d(&quot;startSensors&quot;, &quot;Sensor Temperature is deactivated&quot;);\r\n\r\n    }\r\n\r\n    @SuppressLint(&quot;SetTextI18n&quot;)\r\n    @Override\r\n    public void onSensorChanged(SensorEvent sensorEvent) {\r\n\r\n        double degree = sensorEvent.values[0];\r\n        text.setText(String.format(&quot;%.1f&quot;, degree) + resources.getString(R.string.unit_temp));\r\n        Log.d(&quot;startSensors&quot;, &quot;Temperature is: &quot; + String.format(&quot;%.1f&quot;, degree) + &quot;&#176;C&quot;);\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onAccuracyChanged(Sensor sensor, int i) {}\r\n}\r\n```\r\n\r\n*The other Classes that are mentioned (setOnClickListener, adaptLayout) are not relevant for the Sensors.*","title":"I can&#39;t get the ambient temperature on my phone","body":"<p>I am building an app which shoud display all the values from all the sensors including the <code>TYPE_AMBIENT_TEMPERATURE</code> sensor. I am using the <code>SensorManager</code> class.</p>\n<p>I have written the code and tested it on the Emulator and it worked. But if I run the app on my phone (Galaxy A20e) it did not worked. It seems to not enter the <code>onSensorChanged</code> method. I have placed logs in the code and so I know, that the sensor is initialised an is activated. I have also installed the <em>Thermometer</em>-App and the App is working fine. So the physical Sensor is working. Does anyone know what is wrong with the code? My Code is the folowing:</p>\n<h1>MainActivity</h1>\n<pre><code>package com.blueapps.sensorstation;\n\nimport android.content.Context;\nimport android.hardware.SensorManager;\nimport android.os.Bundle;\nimport android.view.View;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport com.blueapps.sensorstation.databinding.ActivityMainBinding;\n\npublic class MainActivity extends AppCompatActivity {\n\n    private ActivityMainBinding binding;\n\n    private setOnClickListener Listener;\n\n    private StartSensors startSensors;\n\n    private SensorManager sensorManager;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n        // init View\n        super.onCreate(savedInstanceState);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        View view = binding.getRoot();\n        setContentView(view);\n\n\n        // adapt the Layout to the Screen\n        adaptLayout layoutAdapter = new adaptLayout(this.getWindowManager(), getResources(), binding);\n        layoutAdapter.adaptView();\n\n        // set OnCLickListener for components\n        Listener = new setOnClickListener(getApplicationContext(), view, binding);\n        Listener.setListener();\n\n\n        // Get the Sensor Manager\n        sensorManager = ( SensorManager) getSystemService(Context.SENSOR_SERVICE);\n\n        // init the start Sensors Class\n        startSensors = new StartSensors(getResources(), sensorManager, binding);\n\n    }\n\n    @Override\n    protected void onPause() {\n        super.onPause();\n        // Deactivate Sensors\n        startSensors.deactivate();\n\n        // Give the On Click Listener the information about the onPause Call\n        Listener.Pause();\n    }\n\n    @Override\n    protected void onResume() {\n        super.onResume();\n        // Activate Sensors\n        startSensors.activate();\n\n        // Give the On Click Listener the information about the onResume Call\n        Listener.Resume();\n    }\n\n    @Override\n    protected void onStop() {\n        super.onStop();\n        // Give the On Click Listener the information about the onPause Call\n        Listener.Pause();\n    }\n\n    @Override\n    protected void onRestart() {\n        super.onRestart();\n        // Give the On Click Listener the information about the onResume Call\n        Listener.Resume();\n    }\n}\n</code></pre>\n<h1>StartSensors</h1>\n<pre><code>package com.blueapps.sensorstation;\n\nimport android.content.res.Resources;\nimport android.hardware.SensorManager;\nimport android.widget.TextView;\n\nimport com.blueapps.sensorstation.databinding.ActivityMainBinding;\nimport com.blueapps.sensorstation.sensors.Temperature;\n\npublic class StartSensors {\n\n    private SensorManager sensorManager;\n\n    private Resources resources;\n\n    // Sensor Classes\n    Temperature temperature;\n\n\n    // TextViews\n    private TextView textTemp;\n\n\n    public StartSensors(Resources resources, SensorManager sensorManager, ActivityMainBinding binding){\n\n        this.sensorManager = sensorManager;\n        this.resources = resources;\n\n        // Bind the TextViews\n        textTemp = binding.temperatureText;\n\n        // Instance Sensor Classes\n        temperature = new Temperature(resources, sensorManager, textTemp);\n\n    }\n\n    public void activate(){\n\n        // Temperature\n        temperature.activate();\n\n    }\n\n    public void deactivate(){\n\n        // Temperature\n        temperature.deactivate();\n\n    }\n\n}\n</code></pre>\n<h1>Temperature</h1>\n<pre><code>package com.blueapps.sensorstation.sensors;\n\nimport android.annotation.SuppressLint;\nimport android.content.res.Resources;\nimport android.hardware.Sensor;\nimport android.hardware.SensorEvent;\nimport android.hardware.SensorEventListener;\nimport android.hardware.SensorManager;\nimport android.util.Log;\nimport android.widget.TextView;\n\nimport com.blueapps.sensorstation.R;\n\npublic class Temperature implements SensorEventListener {\n\n    private SensorManager sensorManager;\n\n    private TextView text;\n\n    private Resources resources;\n\n    private Sensor temperature;\n\n    public Temperature(Resources resources, SensorManager sensorManager, TextView text){\n\n        this.sensorManager = sensorManager;\n        this.text = text;\n        this.resources = resources;\n\n    }\n\n    public void activate(){\n\n        temperature = sensorManager.getDefaultSensor(Sensor.TYPE_AMBIENT_TEMPERATURE);\n        sensorManager.registerListener(this, temperature, SensorManager.SENSOR_DELAY_UI);\n        Log.d(&quot;startSensors&quot;, &quot;Sensor Temperature is activated&quot;);\n\n    }\n\n    public void deactivate(){\n\n        sensorManager.unregisterListener(this, temperature);\n        Log.d(&quot;startSensors&quot;, &quot;Sensor Temperature is deactivated&quot;);\n\n    }\n\n    @SuppressLint(&quot;SetTextI18n&quot;)\n    @Override\n    public void onSensorChanged(SensorEvent sensorEvent) {\n\n        double degree = sensorEvent.values[0];\n        text.setText(String.format(&quot;%.1f&quot;, degree) + resources.getString(R.string.unit_temp));\n        Log.d(&quot;startSensors&quot;, &quot;Temperature is: &quot; + String.format(&quot;%.1f&quot;, degree) + &quot;C&quot;);\n\n    }\n\n    @Override\n    public void onAccuracyChanged(Sensor sensor, int i) {}\n}\n</code></pre>\n<p><em>The other Classes that are mentioned (setOnClickListener, adaptLayout) are not relevant for the Sensors.</em></p>\n"},{"tags":["java","scheduling","quartz-scheduler","crontrigger"],"answers":[{"comments":[{"owner":{"account_id":128044,"reputation":1320,"user_id":325613,"accept_rate":44,"display_name":"a-sak"},"score":0,"creation_date":1272334892,"post_id":2711139,"comment_id":2744108,"body_markdown":"Hi Stephen, Thanks for your feedback. I have added a little more info in notes of my question to clear my problem.","body":"Hi Stephen, Thanks for your feedback. I have added a little more info in notes of my question to clear my problem."}],"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1272345011,"creation_date":1272255677,"answer_id":2711139,"question_id":2710883,"body_markdown":"First, I am not aware of an existing library that supports this.  Quartz might, but the standard Java class libraries certainly don&#39;t.\r\n\r\nSecond, strictly speaking what you &lt;strike&gt;are asking for&lt;/strike&gt; originally asked for is impossible.  The best that a library can tell you is that the cron expression *would have* or *should have* fired.  The only thing that could (theoretically) tell you the last time that a cron expression actually fired is the scheduler instance itself.","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>First, I am not aware of an existing library that supports this.  Quartz might, but the standard Java class libraries certainly don't.</p>\n\n<p>Second, strictly speaking what you <strike>are asking for</strike> originally asked for is impossible.  The best that a library can tell you is that the cron expression <em>would have</em> or <em>should have</em> fired.  The only thing that could (theoretically) tell you the last time that a cron expression actually fired is the scheduler instance itself.</p>\n"},{"comments":[{"owner":{"account_id":119671,"reputation":16761,"user_id":311525,"accept_rate":86,"display_name":"Scott"},"score":0,"creation_date":1630637726,"post_id":2718949,"comment_id":122016781,"body_markdown":"Answered in 2010, still returns null :(","body":"Answered in 2010, still returns null :("},{"owner":{"account_id":5172408,"reputation":184,"user_id":4140512,"display_name":"Domenico Campagnolo"},"score":0,"creation_date":1650498046,"post_id":2718949,"comment_id":127134150,"body_markdown":"today, it still returns null :(","body":"today, it still returns null :("}],"tags":[],"owner":{"account_id":32595,"reputation":18597,"user_id":90566,"accept_rate":84,"display_name":"waxwing"},"comment_count":2,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1584540566,"creation_date":1272346455,"answer_id":2718949,"question_id":2710883,"body_markdown":"Quartz seems to have some library support for cron expressions.\r\n\r\nSee [the Javadoc for the CronExpression class][1], which has a method called [`getTimeBefore`][2]. I.e.,\r\n\r\n    CronExpression cron = new CronExpression(&quot;0 15 10 ? * *&quot;);\r\n    Date today = new Date();\r\n    Date previousExecution = cron.getTimeBefore(today);\r\n\r\nIt might depend on the Quartz version whether this works. \r\n\r\nLooking at the latest source (version 2.3.0 at time of writing) this method has not been implemented and always returns null.\r\n\r\n  [1]: http://www.quartz-scheduler.org/api/2.3.0/index.html\r\n  [2]: http://www.quartz-scheduler.org/api/2.3.0/org/quartz/CronExpression.html#getTimeBefore-java.util.Date-","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>Quartz seems to have some library support for cron expressions.</p>\n\n<p>See <a href=\"http://www.quartz-scheduler.org/api/2.3.0/index.html\" rel=\"nofollow noreferrer\">the Javadoc for the CronExpression class</a>, which has a method called <a href=\"http://www.quartz-scheduler.org/api/2.3.0/org/quartz/CronExpression.html#getTimeBefore-java.util.Date-\" rel=\"nofollow noreferrer\"><code>getTimeBefore</code></a>. I.e.,</p>\n\n<pre><code>CronExpression cron = new CronExpression(\"0 15 10 ? * *\");\nDate today = new Date();\nDate previousExecution = cron.getTimeBefore(today);\n</code></pre>\n\n<p>It might depend on the Quartz version whether this works. </p>\n\n<p>Looking at the latest source (version 2.3.0 at time of writing) this method has not been implemented and always returns null.</p>\n"},{"comments":[{"owner":{"account_id":921513,"reputation":39385,"user_id":953140,"accept_rate":100,"display_name":"Ahamed"},"score":3,"creation_date":1387308225,"post_id":8929557,"comment_id":30901038,"body_markdown":"Difference between the subsequent fires will not be same always.","body":"Difference between the subsequent fires will not be same always."},{"owner":{"account_id":1865261,"reputation":805,"user_id":2843331,"accept_rate":70,"display_name":"Husain"},"score":0,"creation_date":1535743878,"post_id":8929557,"comment_id":91194615,"body_markdown":"Ahamed is correct. This code is incorrect generally and only correct in a small subset of cases.","body":"Ahamed is correct. This code is incorrect generally and only correct in a small subset of cases."}],"tags":[],"owner":{"account_id":329717,"reputation":1741,"user_id":653394,"accept_rate":100,"display_name":"darrenmc"},"comment_count":2,"down_vote_count":3,"up_vote_count":4,"is_accepted":false,"score":1,"last_activity_date":1327943341,"creation_date":1326990258,"answer_id":8929557,"question_id":2710883,"body_markdown":"A solution I have found with Quartz is to go back one time interval for the trigger and calculate what would have been the next firing time.  By iterating through all the triggers the most recent time that a trigger should have fired in the past can be determined.\r\n\r\n\r\n----------\r\n\r\n\r\nCalculate the interval between each firing:\r\n\r\n    Date nextFireTime = trigger.getNextFireTime();\r\n    Date subsequentFireTime = trigger.getFireTimeAfter(nextFireTime);\r\n    long interval = subsequentFireTime.getTime() - nextFireTime.getTime();\r\n\r\nFind the next firing time for one time until interval in the past:\r\n\r\n    Date previousPeriodTime = new Date(System.currentTimeMillis() - interval);\r\n    Date previousFireTime = trigger.getFireTimeAfter(previousPeriodTime);\r\n\r\nI have found that if you are using a `CronTrigger` this prevents you asking for a fire time in the past.  To work around this I modify the start time, so the above snippet becomes:\r\n\r\n    Date originalStartTime = trigger.getStartTime(); // save the start time\r\n    Date previousPeriodTime = new Date(originalStartTime.getTime() - interval);\r\n    trigger.setStartTime(previousPeriodTime);\r\n    Date previousFireTime = trigger.getFireTimeAfter(previousPeriodTime);\r\n    trigger.setStartTime(originalStartTime); // reset the start time to be nice\r\n\r\n\r\nIterate through all of the triggers and find the one that is most recently in the past:\r\n\r\n    for (String groupName : scheduler.getTriggerGroupNames()) {\r\n        for (String triggerName : scheduler.getTriggerNames(groupName)) {\r\n            Trigger trigger = scheduler.getTrigger(triggerName, groupName);\r\n            // code as detailed above...\r\n            interval = ...\r\n            previousFireTime = ...\r\n        }\r\n    }\r\n\r\nI&#39;ll leave it as an exercise to the reader to refactor this into helper methods or classes.  I actually use the above algorithm in a subclassed delegating trigger that I then place in a set sorted by previous firing times.\r\n","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>A solution I have found with Quartz is to go back one time interval for the trigger and calculate what would have been the next firing time.  By iterating through all the triggers the most recent time that a trigger should have fired in the past can be determined.</p>\n\n<hr>\n\n<p>Calculate the interval between each firing:</p>\n\n<pre><code>Date nextFireTime = trigger.getNextFireTime();\nDate subsequentFireTime = trigger.getFireTimeAfter(nextFireTime);\nlong interval = subsequentFireTime.getTime() - nextFireTime.getTime();\n</code></pre>\n\n<p>Find the next firing time for one time until interval in the past:</p>\n\n<pre><code>Date previousPeriodTime = new Date(System.currentTimeMillis() - interval);\nDate previousFireTime = trigger.getFireTimeAfter(previousPeriodTime);\n</code></pre>\n\n<p>I have found that if you are using a <code>CronTrigger</code> this prevents you asking for a fire time in the past.  To work around this I modify the start time, so the above snippet becomes:</p>\n\n<pre><code>Date originalStartTime = trigger.getStartTime(); // save the start time\nDate previousPeriodTime = new Date(originalStartTime.getTime() - interval);\ntrigger.setStartTime(previousPeriodTime);\nDate previousFireTime = trigger.getFireTimeAfter(previousPeriodTime);\ntrigger.setStartTime(originalStartTime); // reset the start time to be nice\n</code></pre>\n\n<p>Iterate through all of the triggers and find the one that is most recently in the past:</p>\n\n<pre><code>for (String groupName : scheduler.getTriggerGroupNames()) {\n    for (String triggerName : scheduler.getTriggerNames(groupName)) {\n        Trigger trigger = scheduler.getTrigger(triggerName, groupName);\n        // code as detailed above...\n        interval = ...\n        previousFireTime = ...\n    }\n}\n</code></pre>\n\n<p>I'll leave it as an exercise to the reader to refactor this into helper methods or classes.  I actually use the above algorithm in a subclassed delegating trigger that I then place in a set sorted by previous firing times.</p>\n"},{"comments":[{"owner":{"account_id":6933297,"reputation":982,"user_id":5322143,"display_name":"Jo&#227;o Neves"},"score":1,"creation_date":1452519335,"post_id":31238479,"comment_id":57191426,"body_markdown":"This will only work for periodic firings. What happens when there&#39;s no `subsequentNextValidTime` or when firings are irregular (e.g. fire at minutes 10, 12, 11, 17, 37)?","body":"This will only work for periodic firings. What happens when there&#39;s no <code>subsequentNextValidTime</code> or when firings are irregular (e.g. fire at minutes 10, 12, 11, 17, 37)?"}],"tags":[],"owner":{"account_id":3251293,"reputation":2956,"user_id":2741462,"accept_rate":75,"display_name":"Bhuwan Prasad Upadhyay"},"comment_count":1,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1436162237,"creation_date":1436161581,"answer_id":31238479,"question_id":2710883,"body_markdown":"    public class CronMircoUtils {\r\n    \r\n        /**\r\n         * Use this method to calculate previous valid date for cron\r\n         * @param ce CronExpression object with cron expression\r\n         * @param date Date for find previous valid date\r\n         * @return\r\n         */\r\n        public static Date getPreviousValidDate(CronExpression ce, Date date) {\r\n            try {\r\n                Date nextValidTime = ce.getNextValidTimeAfter(date);\r\n                Date subsequentNextValidTime = ce.getNextValidTimeAfter(nextValidTime);\r\n                long interval = subsequentNextValidTime.getTime() - nextValidTime.getTime();\r\n                return new Date(nextValidTime.getTime() - interval);\r\n            } catch (Exception e) {\r\n                throw new IllegalArgumentException(&quot;Unsupported cron or date&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\nSource Code in &lt;a href=&quot;https://github.com/devbhuwan/cron-micro-utils&quot;&gt;https://github.com/devbhuwan/cron-micro-utils&lt;/a&gt;","title":"Finding Last Fired time using a Cron Expression in Java","body":"<pre><code>public class CronMircoUtils {\n\n    /**\n     * Use this method to calculate previous valid date for cron\n     * @param ce CronExpression object with cron expression\n     * @param date Date for find previous valid date\n     * @return\n     */\n    public static Date getPreviousValidDate(CronExpression ce, Date date) {\n        try {\n            Date nextValidTime = ce.getNextValidTimeAfter(date);\n            Date subsequentNextValidTime = ce.getNextValidTimeAfter(nextValidTime);\n            long interval = subsequentNextValidTime.getTime() - nextValidTime.getTime();\n            return new Date(nextValidTime.getTime() - interval);\n        } catch (Exception e) {\n            throw new IllegalArgumentException(\"Unsupported cron or date\", e);\n        }\n    }\n}\n</code></pre>\n\n<p>Source Code in <a href=\"https://github.com/devbhuwan/cron-micro-utils\" rel=\"nofollow\"><a href=\"https://github.com/devbhuwan/cron-micro-utils\" rel=\"nofollow\">https://github.com/devbhuwan/cron-micro-utils</a></a></p>\n"},{"comments":[{"owner":{"account_id":4561073,"reputation":1010,"user_id":3703397,"accept_rate":71,"display_name":"Marin"},"score":0,"creation_date":1473857593,"post_id":34722770,"comment_id":66299392,"body_markdown":"hi Joao,\nThis works even if job dont run (example: server offline)?","body":"hi Joao, This works even if job dont run (example: server offline)?"},{"owner":{"account_id":6933297,"reputation":982,"user_id":5322143,"display_name":"Jo&#227;o Neves"},"score":1,"creation_date":1473858496,"post_id":34722770,"comment_id":66300051,"body_markdown":"@NunoMarinho Yes, this simply calculates the previous date from a cron expression. The library itself knows nothing of what you&#39;re doing with the cron expression. This library does not schedule actions or jobs to be executed it just calculates dates based on cron expressions. I haven&#39;t used this library in a long time though, make sure it suits your needs and thoroughly test your application after using it.","body":"@NunoMarinho Yes, this simply calculates the previous date from a cron expression. The library itself knows nothing of what you&#39;re doing with the cron expression. This library does not schedule actions or jobs to be executed it just calculates dates based on cron expressions. I haven&#39;t used this library in a long time though, make sure it suits your needs and thoroughly test your application after using it."}],"tags":[],"owner":{"account_id":6933297,"reputation":982,"user_id":5322143,"display_name":"Jo&#227;o Neves"},"comment_count":2,"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1452518968,"creation_date":1452518968,"answer_id":34722770,"question_id":2710883,"body_markdown":"[cron-utils][1] is an opensource Java library to parse, validate, migrate crons that supports the operation you need.\r\nTo get the previous date from a cron before a given time simply:\r\n\r\n    //Get date for last execution\r\n    DateTime now = DateTime.now();\r\n    ExecutionTime executionTime = ExecutionTime.forCron(parser.parse(&quot;* * * * * * *&quot;));\r\n    DateTime lastExecution = executionTime.lastExecution(now));\r\n\r\nBear in mind that in its current state it is a bit buggy and may not compute correctly for more complex cron expressions.\r\n\r\n  [1]: https://github.com/jmrozanec/cron-utils","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p><a href=\"https://github.com/jmrozanec/cron-utils\" rel=\"noreferrer\">cron-utils</a> is an opensource Java library to parse, validate, migrate crons that supports the operation you need.\nTo get the previous date from a cron before a given time simply:</p>\n\n<pre><code>//Get date for last execution\nDateTime now = DateTime.now();\nExecutionTime executionTime = ExecutionTime.forCron(parser.parse(\"* * * * * * *\"));\nDateTime lastExecution = executionTime.lastExecution(now));\n</code></pre>\n\n<p>Bear in mind that in its current state it is a bit buggy and may not compute correctly for more complex cron expressions.</p>\n"},{"tags":[],"owner":{"account_id":5702461,"reputation":1191,"user_id":4507034,"accept_rate":100,"display_name":"Radu Linu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1480066446,"creation_date":1480064140,"answer_id":40800995,"question_id":2710883,"body_markdown":"In case you are using org.quartz, is possible to use `context.getPreviousFireTime();`\r\n\r\nExample:\r\n\r\n    public class TestJob implements Job {\r\n        \r\n        @Override\r\n        public void execute(JobExecutionContext context) throws JobExecutionException {\r\n           \r\n            context.getPreviousFireTime(); \r\n        }\r\n    }\r\n\r\nIf you are using `context.getTrigger().getPreviousFireTime()`, you will have the triggered time of the Job that is running at the moment.","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>In case you are using org.quartz, is possible to use <code>context.getPreviousFireTime();</code></p>\n\n<p>Example:</p>\n\n<pre><code>public class TestJob implements Job {\n\n    @Override\n    public void execute(JobExecutionContext context) throws JobExecutionException {\n\n        context.getPreviousFireTime(); \n    }\n}\n</code></pre>\n\n<p>If you are using <code>context.getTrigger().getPreviousFireTime()</code>, you will have the triggered time of the Job that is running at the moment.</p>\n"},{"comments":[{"owner":{"account_id":7901311,"reputation":2381,"user_id":5968255,"display_name":"L_J"},"score":0,"creation_date":1531394514,"post_id":51303967,"comment_id":89585212,"body_markdown":"While this code may answer the question, providing information on how and why it solves the problem improves its long-term value.","body":"While this code may answer the question, providing information on how and why it solves the problem improves its long-term value."},{"owner":{"account_id":2628226,"reputation":851,"user_id":2274814,"display_name":"Jan Larsen"},"score":0,"creation_date":1552397761,"post_id":51303967,"comment_id":96987058,"body_markdown":"This code has all kinds of crazy assumptions; why would currentDate be exactly in the middle between two executions? Also, this is a good example of how NOT to manipulate dates. What about day time saving and leap seconds?","body":"This code has all kinds of crazy assumptions; why would currentDate be exactly in the middle between two executions? Also, this is a good example of how NOT to manipulate dates. What about day time saving and leap seconds?"},{"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"score":0,"creation_date":1695733044,"post_id":51303967,"comment_id":136061539,"body_markdown":"@JanLarsen I think the assumption here is that current time is exactly some execution time, and cron expression produces exactly equal intervals in milliseconds","body":"@JanLarsen I think the assumption here is that current time is exactly some execution time, and cron expression produces exactly equal intervals in milliseconds"}],"tags":[],"owner":{"account_id":7010028,"reputation":99,"user_id":5373257,"display_name":"ChandraPrakash"},"comment_count":3,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1534490264,"creation_date":1531393314,"answer_id":51303967,"question_id":2710883,"body_markdown":"Its working solution \r\n\r\n       pom :\r\n            &lt;dependency&gt;\r\n                &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\r\n                &lt;artifactId&gt;quartz&lt;/artifactId&gt;\r\n                &lt;version&gt;2.3.0&lt;/version&gt;\r\n            &lt;/dependency&gt;\r\n    \r\n       javaCode:\r\n            //Provide your format of date  want\r\n            String format=&quot;dd-MMM-YYYY hh:mm:ss&quot;;\r\n            //Provide your cron expression you want\r\n            String cronExpression=&quot;* * 12 ? * FRI *&quot;;\r\n            SimpleDateFormat sdf=new SimpleDateFormat(format);\r\n            CronExpression expression = new CronExpression(cronExpression);\r\n            Date  currentDate=new Date();\r\n            Date nextDate=expression.getNextValidTimeAfter(currentDate);\r\n            long interval = nextDate.getTime()-currentDate.getTime();\r\n            Date previousDate= new Date(currentDate.getTime() - interval);\r\n            System.out.Println(sdf.format(previousDate));\r\nHere im getting the difference between the current time and next fire time \r\nand exluding this difference time from current time so that we will get last fired time","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>Its working solution </p>\n\n<pre><code>   pom :\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.quartz-scheduler&lt;/groupId&gt;\n            &lt;artifactId&gt;quartz&lt;/artifactId&gt;\n            &lt;version&gt;2.3.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n   javaCode:\n        //Provide your format of date  want\n        String format=\"dd-MMM-YYYY hh:mm:ss\";\n        //Provide your cron expression you want\n        String cronExpression=\"* * 12 ? * FRI *\";\n        SimpleDateFormat sdf=new SimpleDateFormat(format);\n        CronExpression expression = new CronExpression(cronExpression);\n        Date  currentDate=new Date();\n        Date nextDate=expression.getNextValidTimeAfter(currentDate);\n        long interval = nextDate.getTime()-currentDate.getTime();\n        Date previousDate= new Date(currentDate.getTime() - interval);\n        System.out.Println(sdf.format(previousDate));\n</code></pre>\n\n<p>Here im getting the difference between the current time and next fire time \nand exluding this difference time from current time so that we will get last fired time</p>\n"},{"comments":[{"owner":{"account_id":10673018,"reputation":1174,"user_id":8156071,"display_name":"Baldeep Singh Kwatra"},"score":0,"creation_date":1587018693,"post_id":58025578,"comment_id":108344726,"body_markdown":"Code looks great but there is no definition to the subtract function you are using. Please add that.","body":"Code looks great but there is no definition to the subtract function you are using. Please add that."}],"tags":[],"owner":{"account_id":7652518,"reputation":21,"user_id":5800686,"display_name":"iPhrends"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1568971685,"creation_date":1568971685,"answer_id":58025578,"question_id":2710883,"body_markdown":"    import org.springframework.scheduling.support.CronSequenceGenerator;\r\n    \r\n    import java.text.ParseException;\r\n    import java.text.SimpleDateFormat;\r\n    import java.time.LocalDate;\r\n    import java.time.LocalDateTime;\r\n    import java.time.ZoneId;\r\n    import java.util.Calendar;\r\n    import java.util.Date;\r\n    import java.util.TimeZone;\r\n    import java.util.concurrent.TimeUnit;\r\n    \r\n    public class DateCalendarUtil {\r\n    \r\n        public static Date lastRunOn(String cronExpression) {\r\n            final Date nextExecution = fromLocalDateTime(toLocalDate(nextCronDate(cronExpression)).atTime(23, 59, 59));\r\n            return subtract(nextExecution, numberOfDays(nextExecution, nextCronDate(cronExpression, nextExecution)).intValue());\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link Date} to {@link LocalDate} with default system {@link ZoneId}\r\n         *\r\n         * @param date to be converted to {@link LocalDate}\r\n         * @return converted {@link Date}\r\n         */\r\n        public static LocalDate toLocalDate(Date date) {\r\n            return toLocalDate(date, ZoneId.systemDefault());\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link Date} to {@link LocalDate} with provided {@link ZoneId}\r\n         * @param date to be converted to {@link LocalDate}\r\n         * @param zoneId with which {@link Date} will be converted\r\n         * @return converted {@link Date}\r\n         */\r\n        public static LocalDate toLocalDate(Date date, ZoneId zoneId) {\r\n            return date.toInstant().atZone(zoneId).toLocalDate();\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link Date} to {@link LocalDateTime} with provided {@link ZoneId}\r\n         * @param date to be converted to {@link LocalDateTime} with provided {@link ZoneId}\r\n         * @param zoneId with which {@link Date} will be converted\r\n         * @return converted {@link Date}\r\n         */\r\n        public static LocalDateTime toLocalDateTime(Date date, ZoneId zoneId) {\r\n            return date.toInstant().atZone(zoneId).toLocalDateTime();\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link Date} to {@link LocalDateTime} with system default {@link ZoneId}\r\n         *\r\n         * @param date to be converted to {@link LocalDateTime}\r\n         * @return converted {@link Date}\r\n         */\r\n        public static LocalDateTime toLocalDateTime(Date date) {\r\n            return toLocalDateTime(date, ZoneId.systemDefault());\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link LocalDate} to {@link Date} with default system {@link ZoneId}\r\n         * @param localDate to be converted to {@link Date}\r\n         * @return converted {@link LocalDate}\r\n         */\r\n        public static Date fromLocalDate(LocalDate localDate) {\r\n            return fromLocalDate(localDate, ZoneId.systemDefault());\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link LocalDate} to {@link Date} with provided {@link ZoneId}\r\n         * @param localDate to be converted to {@link Date}\r\n         * @param zoneId with which {@link LocalDate} converted\r\n         * @return converted {@link LocalDate}\r\n         */\r\n        public static Date fromLocalDate(LocalDate localDate, ZoneId zoneId) {\r\n            return Date.from(localDate.atStartOfDay(zoneId).toInstant());\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link LocalDateTime} to {@link Date} with default system {@link ZoneId}\r\n         *\r\n         * @param localDateTime to be converted to {@link Date}\r\n         * @return converted {@link LocalDateTime}\r\n         */\r\n        public static Date fromLocalDateTime(LocalDateTime localDateTime) {\r\n            return fromLocalDateTime(localDateTime, ZoneId.systemDefault());\r\n        }\r\n    \r\n        /**\r\n         * Converts {@link LocalDateTime} to {@link Date} with provided {@link ZoneId}\r\n         *\r\n         * @param localDateTime to be converted to {@link Date}\r\n         * @param zoneId        with which localDateTime converted to {@link Date}\r\n         * @return converted {@link Date}\r\n         */\r\n        private static Date fromLocalDateTime(LocalDateTime localDateTime, ZoneId zoneId) {\r\n            return Date.from(localDateTime.atZone(zoneId).toInstant());\r\n        }\r\n    \r\n        public static Date yesterday() {\r\n            return yesterday(TimeZone.getDefault());\r\n        }\r\n    \r\n        public static Date yesterday(TimeZone timezone) {\r\n            return subtract(new Date(), 1, timezone);\r\n        }\r\n    \r\n        /**\r\n         * Generates start time of give date with system default {@link TimeZone}\r\n         * @param date Date of which start time to be generated\r\n         * @return Date with start time as 00:00:00\r\n         */\r\n        public static Date startTime(Date date) {\r\n            return startTime(date, TimeZone.getDefault());\r\n        }\r\n    \r\n        /**\r\n         * Generates start time of give date with provided {@link TimeZone}\r\n         * @param date Date of which start time to be generated\r\n         * @param timeZone with which {@link Calendar} created\r\n         * @return Date with start time as 00:00:00\r\n         */\r\n        public static Date startTime(Date date, TimeZone timeZone) {\r\n            Calendar calendar = Calendar.getInstance(timeZone);\r\n            calendar.setTime(date);\r\n            calendar.set(Calendar.HOUR_OF_DAY, 0);\r\n            calendar.set(Calendar.MINUTE, 0);\r\n            calendar.set(Calendar.SECOND, 0);\r\n            return calendar.getTime();\r\n        }\r\n    \r\n        /**\r\n         * Generates end time of give date with system default {@link TimeZone}\r\n         * @param date Date of which end time to be generated\r\n         * @return Date with end time as 23:59:59\r\n         */\r\n        public static Date endTime(Date date) {\r\n            return endTime(date, TimeZone.getDefault());\r\n        }\r\n    \r\n        /**\r\n         * Generates end time of give date with provided {@link TimeZone}\r\n         * @param date Date of which end time to be generated\r\n         * @param timeZone with which {@link Calendar} created\r\n         * @return Date with end time as 23:59:59\r\n         */\r\n        public static Date endTime(Date date, TimeZone timeZone) {\r\n            Calendar calendar = Calendar.getInstance(timeZone);\r\n            calendar.setTime(date);\r\n            calendar.set(Calendar.HOUR_OF_DAY, 23);\r\n            calendar.set(Calendar.MINUTE, 59);\r\n            calendar.set(Calendar.SECOND, 59);\r\n            return calendar.getTime();\r\n        }\r\n    \r\n        /**\r\n         * Calculates number of days between from and to\r\n         * @param from start Date\r\n         * @param to end date\r\n         * @return number of days including last date\r\n         */\r\n        public static Long numberOfDays(Date from, Date to) {\r\n            return TimeUnit.DAYS.convert(to.getTime() - from.getTime(), TimeUnit.MILLISECONDS) + 1;\r\n        }\r\n    \r\n        /**\r\n         * Gives next {@link Date} from given cron expression\r\n         * @param cronExpression cron expression\r\n         * @return next {@link Date}\r\n         */\r\n        public static Date nextCronDate(String cronExpression) {\r\n            return nextCronDate(cronExpression, new Date());\r\n        }\r\n    \r\n        public static Date nextCronDate(String cronExpression, Date date) {\r\n            CronSequenceGenerator generator = new CronSequenceGenerator(cronExpression, TimeZone.getTimeZone(&quot;IST&quot;));\r\n            return DateCalendarUtil.fromLocalDate(DateCalendarUtil.toLocalDate(generator.next(date)));\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n","title":"Finding Last Fired time using a Cron Expression in Java","body":"<pre><code>import org.springframework.scheduling.support.CronSequenceGenerator;\n\nimport java.text.ParseException;\nimport java.text.SimpleDateFormat;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.ZoneId;\nimport java.util.Calendar;\nimport java.util.Date;\nimport java.util.TimeZone;\nimport java.util.concurrent.TimeUnit;\n\npublic class DateCalendarUtil {\n\n    public static Date lastRunOn(String cronExpression) {\n        final Date nextExecution = fromLocalDateTime(toLocalDate(nextCronDate(cronExpression)).atTime(23, 59, 59));\n        return subtract(nextExecution, numberOfDays(nextExecution, nextCronDate(cronExpression, nextExecution)).intValue());\n    }\n\n    /**\n     * Converts {@link Date} to {@link LocalDate} with default system {@link ZoneId}\n     *\n     * @param date to be converted to {@link LocalDate}\n     * @return converted {@link Date}\n     */\n    public static LocalDate toLocalDate(Date date) {\n        return toLocalDate(date, ZoneId.systemDefault());\n    }\n\n    /**\n     * Converts {@link Date} to {@link LocalDate} with provided {@link ZoneId}\n     * @param date to be converted to {@link LocalDate}\n     * @param zoneId with which {@link Date} will be converted\n     * @return converted {@link Date}\n     */\n    public static LocalDate toLocalDate(Date date, ZoneId zoneId) {\n        return date.toInstant().atZone(zoneId).toLocalDate();\n    }\n\n    /**\n     * Converts {@link Date} to {@link LocalDateTime} with provided {@link ZoneId}\n     * @param date to be converted to {@link LocalDateTime} with provided {@link ZoneId}\n     * @param zoneId with which {@link Date} will be converted\n     * @return converted {@link Date}\n     */\n    public static LocalDateTime toLocalDateTime(Date date, ZoneId zoneId) {\n        return date.toInstant().atZone(zoneId).toLocalDateTime();\n    }\n\n    /**\n     * Converts {@link Date} to {@link LocalDateTime} with system default {@link ZoneId}\n     *\n     * @param date to be converted to {@link LocalDateTime}\n     * @return converted {@link Date}\n     */\n    public static LocalDateTime toLocalDateTime(Date date) {\n        return toLocalDateTime(date, ZoneId.systemDefault());\n    }\n\n    /**\n     * Converts {@link LocalDate} to {@link Date} with default system {@link ZoneId}\n     * @param localDate to be converted to {@link Date}\n     * @return converted {@link LocalDate}\n     */\n    public static Date fromLocalDate(LocalDate localDate) {\n        return fromLocalDate(localDate, ZoneId.systemDefault());\n    }\n\n    /**\n     * Converts {@link LocalDate} to {@link Date} with provided {@link ZoneId}\n     * @param localDate to be converted to {@link Date}\n     * @param zoneId with which {@link LocalDate} converted\n     * @return converted {@link LocalDate}\n     */\n    public static Date fromLocalDate(LocalDate localDate, ZoneId zoneId) {\n        return Date.from(localDate.atStartOfDay(zoneId).toInstant());\n    }\n\n    /**\n     * Converts {@link LocalDateTime} to {@link Date} with default system {@link ZoneId}\n     *\n     * @param localDateTime to be converted to {@link Date}\n     * @return converted {@link LocalDateTime}\n     */\n    public static Date fromLocalDateTime(LocalDateTime localDateTime) {\n        return fromLocalDateTime(localDateTime, ZoneId.systemDefault());\n    }\n\n    /**\n     * Converts {@link LocalDateTime} to {@link Date} with provided {@link ZoneId}\n     *\n     * @param localDateTime to be converted to {@link Date}\n     * @param zoneId        with which localDateTime converted to {@link Date}\n     * @return converted {@link Date}\n     */\n    private static Date fromLocalDateTime(LocalDateTime localDateTime, ZoneId zoneId) {\n        return Date.from(localDateTime.atZone(zoneId).toInstant());\n    }\n\n    public static Date yesterday() {\n        return yesterday(TimeZone.getDefault());\n    }\n\n    public static Date yesterday(TimeZone timezone) {\n        return subtract(new Date(), 1, timezone);\n    }\n\n    /**\n     * Generates start time of give date with system default {@link TimeZone}\n     * @param date Date of which start time to be generated\n     * @return Date with start time as 00:00:00\n     */\n    public static Date startTime(Date date) {\n        return startTime(date, TimeZone.getDefault());\n    }\n\n    /**\n     * Generates start time of give date with provided {@link TimeZone}\n     * @param date Date of which start time to be generated\n     * @param timeZone with which {@link Calendar} created\n     * @return Date with start time as 00:00:00\n     */\n    public static Date startTime(Date date, TimeZone timeZone) {\n        Calendar calendar = Calendar.getInstance(timeZone);\n        calendar.setTime(date);\n        calendar.set(Calendar.HOUR_OF_DAY, 0);\n        calendar.set(Calendar.MINUTE, 0);\n        calendar.set(Calendar.SECOND, 0);\n        return calendar.getTime();\n    }\n\n    /**\n     * Generates end time of give date with system default {@link TimeZone}\n     * @param date Date of which end time to be generated\n     * @return Date with end time as 23:59:59\n     */\n    public static Date endTime(Date date) {\n        return endTime(date, TimeZone.getDefault());\n    }\n\n    /**\n     * Generates end time of give date with provided {@link TimeZone}\n     * @param date Date of which end time to be generated\n     * @param timeZone with which {@link Calendar} created\n     * @return Date with end time as 23:59:59\n     */\n    public static Date endTime(Date date, TimeZone timeZone) {\n        Calendar calendar = Calendar.getInstance(timeZone);\n        calendar.setTime(date);\n        calendar.set(Calendar.HOUR_OF_DAY, 23);\n        calendar.set(Calendar.MINUTE, 59);\n        calendar.set(Calendar.SECOND, 59);\n        return calendar.getTime();\n    }\n\n    /**\n     * Calculates number of days between from and to\n     * @param from start Date\n     * @param to end date\n     * @return number of days including last date\n     */\n    public static Long numberOfDays(Date from, Date to) {\n        return TimeUnit.DAYS.convert(to.getTime() - from.getTime(), TimeUnit.MILLISECONDS) + 1;\n    }\n\n    /**\n     * Gives next {@link Date} from given cron expression\n     * @param cronExpression cron expression\n     * @return next {@link Date}\n     */\n    public static Date nextCronDate(String cronExpression) {\n        return nextCronDate(cronExpression, new Date());\n    }\n\n    public static Date nextCronDate(String cronExpression, Date date) {\n        CronSequenceGenerator generator = new CronSequenceGenerator(cronExpression, TimeZone.getTimeZone(\"IST\"));\n        return DateCalendarUtil.fromLocalDate(DateCalendarUtil.toLocalDate(generator.next(date)));\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13520631,"reputation":6485,"user_id":9753985,"display_name":"Emeric"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1573658756,"creation_date":1570094883,"answer_id":58216163,"question_id":2710883,"body_markdown":"It&#39;s amazing that there is still no quartz method for getting the previous fired time based on a CronExpression...\r\n\r\n**How to get last fired time ?**\r\n\r\nIf you are manipulating basic CRON like `0 0 0 * * ?` (At 00:00:00am every day) you can use Jo&#227;o Neves&#39; solution (using com.cronutils.model.time.ExecutionTime).\r\n\r\nOtherwise if you are manipulating complex CRON like `0 30 11 ? * MON,THU *` it will not works. You&#39;ll get random results (I had a Wednesday for this one...).\r\n\r\n**Edit**: I did other tests and it looks working better with the latest version (previous tests were made with version &lt; 3.1.6). Note: You need Java 8 if you want to use version &gt; 3.1.6.\r\n\r\nThe solution you can use is to **store** it when your job is triggered.\r\n\r\n___\r\n**How to verify that the job has been triggered ?**\r\n\r\nThe solution I found is to use `getNextValidTimeAfter` from Quartz (CronExpression). This one works fine.\r\nYou&#39;ll ask me what I&#39;m talking about as we are looking for the previous valid time ! You are right, give me one second !\r\n\r\nLet&#39;s imagine we have a once a month CRON (0 0 16 1 * ? = At 16:00:00pm, on the 1st day, every month) and we want to check everyday that the previous execution worked.\r\nYou&#39;ll have to store the getNextValidTime at each execution and compare this date with today&#39;s date. eg (format DD/MM/YYYY):\r\n\r\n 01/01/2019  job triggered, we store next fire time (let&#39;s call it `nextFireTime`):\r\n\r\n    CronExpression trigger = new CronExpression(&quot;0 0 16 1 * ?&quot;);\r\n    Date nextFireTime = trigger.getNextValidTimeAfter(new Date());\r\n    // = 01/02/2019\r\n\r\n 02/01/2019  verification of the day: 02/01/2019 &lt; 01/02/2019 OK\r\n\r\n...\r\n\r\n 01/02/2019  let&#39;s imagine server is down, the job is not triggered.\r\n\r\n 02/02/2019  server on, verification of the day: 02/02/2019 &gt; 01/02/2019 KO !\r\n\r\n We know the previous fire time hasn&#39;t worked. You can know do what you want (trigger the job and store the new nextFireTime).\r\n\r\n___\r\nAnother option that may interest you, see **MISFIRE_INSTRUCTION_FIRE_NOW**.\r\n\r\n&gt; The job is executed immediately after the scheduler discovers misfire\r\n&gt; situation. This is the smart policy. Example scenario: you have\r\n&gt; scheduled some system clean up at 2 AM. Unfortunately the application\r\n&gt; was down due to maintenance by that time and brought back on 3 AM. So\r\n&gt; the trigger misfired and the scheduler tries to save the situation by\r\n&gt; running it as soon as it can - at 3 AM.\r\n\r\nFrom (https://dzone.com/articles/quartz-scheduler-misfire)\r\n\r\ne.g.:\r\n\r\n    Trigger trigger = newTrigger().\r\n     withSchedule(\r\n      cronSchedule(&quot;0 0 9-17 ? * MON-FRI&quot;).\r\n       withMisfireHandlingInstructionFireAndProceed()\r\n     ).\r\n     build();\r\n\r\nOfficial doc: https://www.quartz-scheduler.org/api/2.1.7/org/quartz/CronTrigger.html\r\n","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>It's amazing that there is still no quartz method for getting the previous fired time based on a CronExpression...</p>\n\n<p><strong>How to get last fired time ?</strong></p>\n\n<p>If you are manipulating basic CRON like <code>0 0 0 * * ?</code> (At 00:00:00am every day) you can use Joo Neves' solution (using com.cronutils.model.time.ExecutionTime).</p>\n\n<p>Otherwise if you are manipulating complex CRON like <code>0 30 11 ? * MON,THU *</code> it will not works. You'll get random results (I had a Wednesday for this one...).</p>\n\n<p><strong>Edit</strong>: I did other tests and it looks working better with the latest version (previous tests were made with version &lt; 3.1.6). Note: You need Java 8 if you want to use version > 3.1.6.</p>\n\n<p>The solution you can use is to <strong>store</strong> it when your job is triggered.</p>\n\n<hr>\n\n<p><strong>How to verify that the job has been triggered ?</strong></p>\n\n<p>The solution I found is to use <code>getNextValidTimeAfter</code> from Quartz (CronExpression). This one works fine.\nYou'll ask me what I'm talking about as we are looking for the previous valid time ! You are right, give me one second !</p>\n\n<p>Let's imagine we have a once a month CRON (0 0 16 1 * ? = At 16:00:00pm, on the 1st day, every month) and we want to check everyday that the previous execution worked.\nYou'll have to store the getNextValidTime at each execution and compare this date with today's date. eg (format DD/MM/YYYY):</p>\n\n<p> 01/01/2019  job triggered, we store next fire time (let's call it <code>nextFireTime</code>):</p>\n\n<pre><code>CronExpression trigger = new CronExpression(\"0 0 16 1 * ?\");\nDate nextFireTime = trigger.getNextValidTimeAfter(new Date());\n// = 01/02/2019\n</code></pre>\n\n<p> 02/01/2019  verification of the day: 02/01/2019 &lt; 01/02/2019 OK</p>\n\n<p>...</p>\n\n<p> 01/02/2019  let's imagine server is down, the job is not triggered.</p>\n\n<p> 02/02/2019  server on, verification of the day: 02/02/2019 > 01/02/2019 KO !</p>\n\n<p> We know the previous fire time hasn't worked. You can know do what you want (trigger the job and store the new nextFireTime).</p>\n\n<hr>\n\n<p>Another option that may interest you, see <strong>MISFIRE_INSTRUCTION_FIRE_NOW</strong>.</p>\n\n<blockquote>\n  <p>The job is executed immediately after the scheduler discovers misfire\n  situation. This is the smart policy. Example scenario: you have\n  scheduled some system clean up at 2 AM. Unfortunately the application\n  was down due to maintenance by that time and brought back on 3 AM. So\n  the trigger misfired and the scheduler tries to save the situation by\n  running it as soon as it can - at 3 AM.</p>\n</blockquote>\n\n<p>From (<a href=\"https://dzone.com/articles/quartz-scheduler-misfire\" rel=\"nofollow noreferrer\">https://dzone.com/articles/quartz-scheduler-misfire</a>)</p>\n\n<p>e.g.:</p>\n\n<pre><code>Trigger trigger = newTrigger().\n withSchedule(\n  cronSchedule(\"0 0 9-17 ? * MON-FRI\").\n   withMisfireHandlingInstructionFireAndProceed()\n ).\n build();\n</code></pre>\n\n<p>Official doc: <a href=\"https://www.quartz-scheduler.org/api/2.1.7/org/quartz/CronTrigger.html\" rel=\"nofollow noreferrer\">https://www.quartz-scheduler.org/api/2.1.7/org/quartz/CronTrigger.html</a></p>\n"},{"tags":[],"owner":{"account_id":5172408,"reputation":184,"user_id":4140512,"display_name":"Domenico Campagnolo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1650504430,"creation_date":1650503405,"answer_id":71947841,"question_id":2710883,"body_markdown":"I am using [cron-utils][1] 9.1.6 to get the last execution time based on &#39;now&#39; and the &#39;cron expression&#39;, and the expected end time adding the expected duration in seconds.\r\n\r\nThe code&#39;s language is Scala.\r\n\r\n\r\n    import java.time.ZonedDateTime\r\n    import com.cronutils.model.definition.CronDefinitionBuilder\r\n    import com.cronutils.model.time.ExecutionTime\r\n    import com.cronutils.parser.CronParser\r\n    import com.cronutils.model.CronType.QUARTZ\r\n    import java.time.ZoneOffset.UTC\r\n\r\n    val parser = new CronParser(CronDefinitionBuilder.instanceDefinitionFor(QUARTZ))\r\n    val cronExpression = &quot;0 0 23 ? * *&quot;\r\n    val now = ZonedDateTime.now(UTC)\r\n    val expectedDurationSec = 1500\r\n    \r\n    println(s&quot;now: $now&quot;)\r\n    val executionTime = ExecutionTime.forCron(parser.parse(cronExpression))\r\n    val lastExecution = executionTime.lastExecution(now)\r\n    println(s&quot;lastExecution: ${lastExecution.get()}&quot;)\r\n    val expectedEnd = lastExecution.get().plusSeconds(expectedDurationSec)\r\n    println(s&quot;expectedEnd: $expectedEnd&quot;)\r\n\r\nthe output is:\r\n\r\n    now: 2022-04-21T01:08:27.499Z\r\n    lastExecution: 2022-04-20T23:00Z\r\n    expectedEnd: 2022-04-20T23:25Z\r\n\r\n\r\n\r\n  [1]: https://github.com/jmrozanec/cron-utils","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>I am using <a href=\"https://github.com/jmrozanec/cron-utils\" rel=\"nofollow noreferrer\">cron-utils</a> 9.1.6 to get the last execution time based on 'now' and the 'cron expression', and the expected end time adding the expected duration in seconds.</p>\n<p>The code's language is Scala.</p>\n<pre><code>import java.time.ZonedDateTime\nimport com.cronutils.model.definition.CronDefinitionBuilder\nimport com.cronutils.model.time.ExecutionTime\nimport com.cronutils.parser.CronParser\nimport com.cronutils.model.CronType.QUARTZ\nimport java.time.ZoneOffset.UTC\n\nval parser = new CronParser(CronDefinitionBuilder.instanceDefinitionFor(QUARTZ))\nval cronExpression = &quot;0 0 23 ? * *&quot;\nval now = ZonedDateTime.now(UTC)\nval expectedDurationSec = 1500\n\nprintln(s&quot;now: $now&quot;)\nval executionTime = ExecutionTime.forCron(parser.parse(cronExpression))\nval lastExecution = executionTime.lastExecution(now)\nprintln(s&quot;lastExecution: ${lastExecution.get()}&quot;)\nval expectedEnd = lastExecution.get().plusSeconds(expectedDurationSec)\nprintln(s&quot;expectedEnd: $expectedEnd&quot;)\n</code></pre>\n<p>the output is:</p>\n<pre><code>now: 2022-04-21T01:08:27.499Z\nlastExecution: 2022-04-20T23:00Z\nexpectedEnd: 2022-04-20T23:25Z\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4225608,"reputation":14192,"user_id":3459206,"accept_rate":90,"display_name":"Alex Salauyou"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695741811,"creation_date":1695724358,"answer_id":77179174,"question_id":2710883,"body_markdown":"There is Spring&#39;s [`org.springframework.scheduling.support.CronSequenceGenerator`][1] which computes `next()` time of cron execution relative to arbitrary time. Assuming that &quot;last fired time&quot; means the earliest time _t_ for which holds _next(t) &amp;ge; now_, it can be found by simple iteration algorithm:\r\n\r\n 1. Starting from given time, walk back to find some moment _t_ where _next(t) &lt; now_ (meaning that _t_ belongs to some previous interval). This can be done by e.g. step doubling, taking some arbitrary initial step size. Assuming that many real-life cron expressions produce roughly equal intervals, reasonable guess for initial step size is _next(now) &amp;ndash; now + &amp;epsilon;_, or _next(next(now)) &amp;ndash; next(now) + &amp;epsilon;_ when _now_ is expected between executions, which is by contract _&gt; 0_;\r\n2. Starting from  _t_, walk forward iterating _t := next(t)_ until _next(t) &amp;ge; now_.\r\n---\r\n\r\n    static long previous(String cron, TimeZone timezone, long ms) {\r\n        var generator = new CronSequenceGenerator(cron, timezone);\r\n\r\n        // 1. Walk back to find some moment where t.next() &lt; ms\r\n        long t1 = generator.next(new Date(ms)).getTime() - ms;  // initial step\r\n        long t;\r\n        do {\r\n            if (t1 &lt;= 0) {      // overflow or negative initial step\r\n                throw new IllegalArgumentException(&quot;Failed to find previous time&quot;);\r\n            }\r\n            t = ms - t1 - 1;    // next try for t\r\n            t1 *= 2;            // double step size\r\n        } while (generator.next(new Date(t)).getTime() &gt;= ms);\r\n\r\n        // 2. Walk forward through next().next()... chain to find\r\n        // the earliest moment where t1.next() &gt;= ms\r\n        while (t &lt; ms) {\r\n            t1 = t;\r\n            t = generator.next(new Date(t)).getTime();\r\n        }\r\n        return t1;\r\n    }\r\n\r\nThe `CronSequenceGenerator` can be replaced by `CronExpression` or whatever having similar to `next()` function&amp;mdash;the code just demonstrates approach to find &quot;previous&quot; using only &quot;next&quot;.\r\n\r\n  [1]: https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>There is Spring's <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/scheduling/support/CronSequenceGenerator.html\" rel=\"nofollow noreferrer\"><code>org.springframework.scheduling.support.CronSequenceGenerator</code></a> which computes <code>next()</code> time of cron execution relative to arbitrary time. Assuming that &quot;last fired time&quot; means the earliest time <em>t</em> for which holds <em>next(t)  now</em>, it can be found by simple iteration algorithm:</p>\n<ol>\n<li>Starting from given time, walk back to find some moment <em>t</em> where <em>next(t) &lt; now</em> (meaning that <em>t</em> belongs to some previous interval). This can be done by e.g. step doubling, taking some arbitrary initial step size. Assuming that many real-life cron expressions produce roughly equal intervals, reasonable guess for initial step size is <em>next(now)  now + </em>, or <em>next(next(now))  next(now) + </em> when <em>now</em> is expected between executions, which is by contract <em>&gt; 0</em>;</li>\n<li>Starting from  <em>t</em>, walk forward iterating <em>t := next(t)</em> until <em>next(t)  now</em>.</li>\n</ol>\n<hr />\n<pre><code>static long previous(String cron, TimeZone timezone, long ms) {\n    var generator = new CronSequenceGenerator(cron, timezone);\n\n    // 1. Walk back to find some moment where t.next() &lt; ms\n    long t1 = generator.next(new Date(ms)).getTime() - ms;  // initial step\n    long t;\n    do {\n        if (t1 &lt;= 0) {      // overflow or negative initial step\n            throw new IllegalArgumentException(&quot;Failed to find previous time&quot;);\n        }\n        t = ms - t1 - 1;    // next try for t\n        t1 *= 2;            // double step size\n    } while (generator.next(new Date(t)).getTime() &gt;= ms);\n\n    // 2. Walk forward through next().next()... chain to find\n    // the earliest moment where t1.next() &gt;= ms\n    while (t &lt; ms) {\n        t1 = t;\n        t = generator.next(new Date(t)).getTime();\n    }\n    return t1;\n}\n</code></pre>\n<p>The <code>CronSequenceGenerator</code> can be replaced by <code>CronExpression</code> or whatever having similar to <code>next()</code> functionthe code just demonstrates approach to find &quot;previous&quot; using only &quot;next&quot;.</p>\n"}],"owner":{"account_id":128044,"reputation":1320,"user_id":325613,"accept_rate":44,"display_name":"a-sak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25682,"favorite_count":0,"down_vote_count":0,"up_vote_count":14,"answer_count":11,"score":14,"last_activity_date":1695741811,"creation_date":1272250268,"question_id":2710883,"body_markdown":"Is there a way in Java to find the &quot;Last Fired Time&quot; from a Cron Expression?\r\n\r\nE.g. If `now = 25-Apr-2010 10PM`, and the cron expression is `0 15 10 ? * *` (quartz), it should return `25-Apr-2010 10:15AM`.\r\n\r\nNote:\r\n\r\n 1. I do not care if we use standard cron expressions (like Unix and Quartz) or less popular ones if they can fetch me the correct &quot;Last Fired Time&quot;\r\n 2. Also it is not literally &quot;Last Fire time&quot; as the trigger may not have fired, but logically there should be a way of telling when it (would have) fired last.","title":"Finding Last Fired time using a Cron Expression in Java","body":"<p>Is there a way in Java to find the &quot;Last Fired Time&quot; from a Cron Expression?</p>\n<p>E.g. If <code>now = 25-Apr-2010 10PM</code>, and the cron expression is <code>0 15 10 ? * *</code> (quartz), it should return <code>25-Apr-2010 10:15AM</code>.</p>\n<p>Note:</p>\n<ol>\n<li>I do not care if we use standard cron expressions (like Unix and Quartz) or less popular ones if they can fetch me the correct &quot;Last Fired Time&quot;</li>\n<li>Also it is not literally &quot;Last Fire time&quot; as the trigger may not have fired, but logically there should be a way of telling when it (would have) fired last.</li>\n</ol>\n"},{"tags":["java","spring-boot","amazon-s3"],"comments":[{"owner":{"account_id":27832325,"reputation":2020,"user_id":21250520,"display_name":"Filippo Testini"},"score":1,"creation_date":1695742591,"post_id":77181275,"comment_id":136063805,"body_markdown":"Why don&#39;t you use S3 Lifecycle Policies to delete the files older than X days?","body":"Why don&#39;t you use S3 Lifecycle Policies to delete the files older than X days?"},{"owner":{"account_id":303420,"reputation":10129,"user_id":2378643,"display_name":"Anon Coward"},"score":1,"creation_date":1695761760,"post_id":77181275,"comment_id":136067183,"body_markdown":"The [underlying API](https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjectsV2.html) does not support any sort order other than by key name.  The only option is to list all objects and sort/filter on the client side, or as mentioned, use a [S3 Lifecycle Policy](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html) to automate this on the backend.","body":"The <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/API/API_ListObjectsV2.html\" rel=\"nofollow noreferrer\">underlying API</a> does not support any sort order other than by key name.  The only option is to list all objects and sort/filter on the client side, or as mentioned, use a <a href=\"https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html\" rel=\"nofollow noreferrer\">S3 Lifecycle Policy</a> to automate this on the backend."},{"owner":{"account_id":13612699,"reputation":50,"user_id":9819641,"display_name":"Srinivas Renduchinthala"},"score":0,"creation_date":1695806409,"post_id":77181275,"comment_id":136072208,"body_markdown":"Thank you, issue got resolved with life cycle policy.","body":"Thank you, issue got resolved with life cycle policy."}],"owner":{"account_id":13612699,"reputation":50,"user_id":9819641,"display_name":"Srinivas Renduchinthala"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695741777,"creation_date":1695741041,"question_id":77181275,"body_markdown":"I want to delete the files in the s3 where file last modified date is greater than our retention policy. When am trying to list the Object Summaries it is giving in lexicographic order because of this my top 1000 files last modified date is less than our retention policy and not able to delete till it exceeds that date. So is there any method or process for Object Listing with ascending order of last modified date in Java?","title":"How to fetch list of files from S3 without lexicographic order","body":"<p>I want to delete the files in the s3 where file last modified date is greater than our retention policy. When am trying to list the Object Summaries it is giving in lexicographic order because of this my top 1000 files last modified date is less than our retention policy and not able to delete till it exceeds that date. So is there any method or process for Object Listing with ascending order of last modified date in Java?</p>\n"},{"tags":["java","gradle","groovy","build","lombok"],"answers":[{"comments":[{"owner":{"account_id":3837378,"reputation":35488,"user_id":3181392,"display_name":"cfrick"},"score":0,"creation_date":1552979591,"post_id":55227788,"comment_id":97204062,"body_markdown":"Are you sure the fix or rather workaround isn&#39;t just using the snapshot repo (`edge-releases`) where this bug is already fixed?","body":"Are you sure the fix or rather workaround isn&#39;t just using the snapshot repo (<code>edge-releases</code>) where this bug is already fixed?"},{"owner":{"account_id":5835334,"reputation":591,"user_id":4598590,"accept_rate":57,"display_name":"sbsatter"},"score":0,"creation_date":1554964640,"post_id":55227788,"comment_id":97944235,"body_markdown":"This workaround does not fix this issue unfortunately. Updating IntelliJ to 2019.1 helped.","body":"This workaround does not fix this issue unfortunately. Updating IntelliJ to 2019.1 helped."},{"owner":{"account_id":8235,"reputation":87020,"user_id":14731,"accept_rate":89,"display_name":"Gili"},"score":0,"creation_date":1560953291,"post_id":55227788,"comment_id":99906859,"body_markdown":"Can you please post or link to a full `bundle.gradle` file? I am getting build errors about method `apt()` not being defined.","body":"Can you please post or link to a full <code>bundle.gradle</code> file? I am getting build errors about method <code>apt()</code> not being defined."},{"owner":{"account_id":19179,"reputation":4543,"user_id":44715,"accept_rate":81,"display_name":"Riho"},"score":0,"creation_date":1612878438,"post_id":55227788,"comment_id":116899158,"body_markdown":"annotationProcessor &#39;org.projectlombok:lombok:1.18:6&#39;\nThis was the only line that I needed to add.","body":"annotationProcessor &#39;org.projectlombok:lombok:1.18:6&#39; This was the only line that I needed to add."}],"tags":[],"owner":{"account_id":4842240,"reputation":805,"user_id":3906969,"accept_rate":20,"display_name":"ap6491"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1555882237,"creation_date":1552933360,"answer_id":55227788,"question_id":55227728,"body_markdown":"I found the following work around for this issue using a plugin for processing Lombok annotation in compile time. \r\n\r\nI had to perform the following steps in build.gradle:\r\n\r\n1) Add `id &quot;net.ltgt.apt&quot; version &quot;0.15&quot;` to plugins section.\r\n\r\n2) Add `maven { url &#39;https://projectlombok.org/edge-releases&#39; }` to repositories section.\r\n\r\n3) Add the following to dependencies section:\r\n\r\n    compileOnly &#39;org.projectlombok:lombok:edge-SNAPSHOT&#39;\r\n    apt &#39;org.projectlombok:lombok:edge-SNAPSHOT&#39;\r\n        \r\n    compileOnly &#39;org.projectlombok:lombok:1.18:6&#39;\r\n    annotationProcessor &#39;org.projectlombok:lombok:1.18:6&#39;\r\n\r\n4) Add a task:\r\n\r\n    tasks.withType(JavaCompile) {\r\n      options.annotationProcessorPath = configurations.apt\r\n    }\r\n\r\n \r\n\r\nThis lets your build complete successfully.\r\n\r\nUpdate 03/29/2019: This workaround also works with Gradle 5.3, Java JDK 10\r\n\r\nThanks.","title":"Cannot find symbol error: Lombok 1.18.6 does not work with Gradle 5.2.1, JDK 10","body":"<p>I found the following work around for this issue using a plugin for processing Lombok annotation in compile time. </p>\n\n<p>I had to perform the following steps in build.gradle:</p>\n\n<p>1) Add <code>id \"net.ltgt.apt\" version \"0.15\"</code> to plugins section.</p>\n\n<p>2) Add <code>maven { url 'https://projectlombok.org/edge-releases' }</code> to repositories section.</p>\n\n<p>3) Add the following to dependencies section:</p>\n\n<pre><code>compileOnly 'org.projectlombok:lombok:edge-SNAPSHOT'\napt 'org.projectlombok:lombok:edge-SNAPSHOT'\n\ncompileOnly 'org.projectlombok:lombok:1.18:6'\nannotationProcessor 'org.projectlombok:lombok:1.18:6'\n</code></pre>\n\n<p>4) Add a task:</p>\n\n<pre><code>tasks.withType(JavaCompile) {\n  options.annotationProcessorPath = configurations.apt\n}\n</code></pre>\n\n<p>This lets your build complete successfully.</p>\n\n<p>Update 03/29/2019: This workaround also works with Gradle 5.3, Java JDK 10</p>\n\n<p>Thanks.</p>\n"}],"owner":{"account_id":4842240,"reputation":805,"user_id":3906969,"accept_rate":20,"display_name":"ap6491"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4890,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":1,"score":5,"last_activity_date":1695741775,"creation_date":1552933109,"question_id":55227728,"body_markdown":"Builds with Gradle 5.2.1 and Lombok 1.18.6 dependency are failing with JDK 10. It seems Lombok annotation are not being processed appropriately. I keep getting &quot;cannot find symbol&quot; error across various Java files in my source. Any thoughts on why this might be happening? I found that a defect has already been created: https://github.com/rzwitserloot/lombok/issues/1572\r\n\r\nI am using:\r\n\r\nJava JDK 10\r\n\r\nGradle 5.2.1\r\n\r\nLombok 1.18.6\r\n\r\nThanks.","title":"Cannot find symbol error: Lombok 1.18.6 does not work with Gradle 5.2.1, JDK 10","body":"<p>Builds with Gradle 5.2.1 and Lombok 1.18.6 dependency are failing with JDK 10. It seems Lombok annotation are not being processed appropriately. I keep getting \"cannot find symbol\" error across various Java files in my source. Any thoughts on why this might be happening? I found that a defect has already been created: <a href=\"https://github.com/rzwitserloot/lombok/issues/1572\" rel=\"noreferrer\">https://github.com/rzwitserloot/lombok/issues/1572</a></p>\n\n<p>I am using:</p>\n\n<p>Java JDK 10</p>\n\n<p>Gradle 5.2.1</p>\n\n<p>Lombok 1.18.6</p>\n\n<p>Thanks.</p>\n"},{"tags":["java","web-services","xss","antivirus-integration"],"comments":[{"owner":{"account_id":107389,"reputation":157578,"user_id":285587,"accept_rate":61,"display_name":"Your Common Sense"},"score":0,"creation_date":1694665349,"post_id":77098713,"comment_id":135921766,"body_markdown":"This question is too broad to be answerable as is, and seeking a service recommendation is also a distinct off topic. It seems some antivirus is closer to your demands but you must remember that a magic wand doesn&#39;t exist","body":"This question is too broad to be answerable as is, and seeking a service recommendation is also a distinct off topic. It seems some antivirus is closer to your demands but you must remember that a magic wand doesn&#39;t exist"},{"owner":{"account_id":107389,"reputation":157578,"user_id":285587,"accept_rate":61,"display_name":"Your Common Sense"},"score":0,"creation_date":1694665429,"post_id":77098713,"comment_id":135921772,"body_markdown":"Also, sql injection seems unrelated here","body":"Also, sql injection seems unrelated here"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1694692813,"post_id":77098713,"comment_id":135926406,"body_markdown":"I&#39;m not looking for a magic wand; I just want to know if there&#39;s any antivirus system, for instance, that offers runtime scanning of files uploaded through a web service. I consider this to be related to XSS and SQL injections because depending on where the user input is interpreted, one or the other could occur.","body":"I&#39;m not looking for a magic wand; I just want to know if there&#39;s any antivirus system, for instance, that offers runtime scanning of files uploaded through a web service. I consider this to be related to XSS and SQL injections because depending on where the user input is interpreted, one or the other could occur."},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1694693451,"post_id":77098713,"comment_id":135926552,"body_markdown":"For example, if we have a field where the user insert =CMD|&#39;/C NOTEPAD&#39;!&#39;A1&#39;, and then this object is exported to excel, it could be possible to open a notepad when excel is opened. This should be the first step at privilege escalation on the client pc.","body":"For example, if we have a field where the user insert =CMD|&#39;/C NOTEPAD&#39;!&#39;A1&#39;, and then this object is exported to excel, it could be possible to open a notepad when excel is opened. This should be the first step at privilege escalation on the client pc."},{"owner":{"account_id":107389,"reputation":157578,"user_id":285587,"accept_rate":61,"display_name":"Your Common Sense"},"score":0,"creation_date":1694693732,"post_id":77098713,"comment_id":135926622,"body_markdown":"in your place, I would rather validate your data. For example, if you prohibit = character, or format a cell as a text, that CMD will be harmless","body":"in your place, I would rather validate your data. For example, if you prohibit = character, or format a cell as a text, that CMD will be harmless"},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1694694077,"post_id":77098713,"comment_id":135926708,"body_markdown":"Those could be an option, however we are able to define macros without using = character. Besides, there are multiple ways to open  a prompt, not just cmd.","body":"Those could be an option, however we are able to define macros without using = character. Besides, there are multiple ways to open  a prompt, not just cmd."},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1694694488,"post_id":77098713,"comment_id":135926818,"body_markdown":"I am thinking that I could prevent pipes (|). But in my humble opinion this is not a strong solution.","body":"I am thinking that I could prevent pipes (|). But in my humble opinion this is not a strong solution."},{"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"score":0,"creation_date":1694708907,"post_id":77098713,"comment_id":135930224,"body_markdown":"I used this to try to identify a possible privilege scaling script. I know it&#39;s not perfect, but I still looking for a better solution: \nregex = &quot;=.*\\\\|&#39;.*|\\\\s+/[A-Za-z0-9._-]+(\\\\s+\\\\w+)*\\\\s+&quot;","body":"I used this to try to identify a possible privilege scaling script. I know it&#39;s not perfect, but I still looking for a better solution:  regex = &quot;=.*\\\\|&#39;.*|\\\\s+/[A-Za-z0-9._-]+(\\\\s+\\\\w+)*\\\\s+&quot;"}],"answers":[{"tags":[],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695741562,"creation_date":1695741562,"answer_id":77181349,"question_id":77098713,"body_markdown":"what I did was: \r\n```\r\n//PDFValidator.java\r\npublic class PdfValidator implements FileValidator {\r\n\r\n\t@Override\r\n\tpublic void validate(File file)\r\n\t\t\tthrows EncryptedDocumentException, InvalidFormatException, IOException, PossibleXSSException {\r\n\t\ttry (FileInputStream fis = new FileInputStream(file)) {\r\n\t\t\tbyte[] contents = new byte[(int) file.length()];\r\n\t\t\tfis.read(contents);\r\n\t\t\tpdfJavascriptCodeCheck(contents);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static void pdfJavascriptCodeCheck(final byte[] contents) throws PossibleXSSException {\r\n\t\ttry (PDDocument document = PDDocument.load(new ByteArrayInputStream(contents))) {\r\n\t\t\tif (document.getDocumentCatalog().getOpenAction() instanceof PDActionJavaScript) {\r\n\t\t\t\tPDActionJavaScript docLevelJS = (PDActionJavaScript) document.getDocumentCatalog().getOpenAction();\r\n\t\t\t\tif (null != docLevelJS)\r\n\t\t\t\t\tthrow new PossibleXSSException(&quot;error message&quot;);\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\n}\r\n\r\n//ExcelValidator.java\r\npublic class ExcelValidator implements FileValidator {\r\n\r\n\t@Override\r\n\tpublic void validate(File file) throws EncryptedDocumentException, InvalidFormatException, IOException, PossiblePrivilegeScalingException{\r\n\t\tcheckPrivilegeScalingAttempting(file);\r\n\t}\r\n\r\n\tprivate void checkPrivilegeScalingAttempting(File file) throws EncryptedDocumentException, InvalidFormatException, IOException, PossiblePrivilegeScalingException {\r\n\t\ttry (FileInputStream fis = new FileInputStream(file); Workbook workbook = WorkbookFactory.create(fis)) {\r\n\t\t\tfor (int i = 0; i &lt; workbook.getNumberOfSheets(); i++) {\r\n\t\t\t\tSheet sheet = workbook.getSheetAt(i);\r\n\t\t\t\tcheckJavaScriptCodeOnSheet(sheet);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate void checkJavaScriptCodeOnSheet(Sheet sheet) throws PossiblePrivilegeScalingException {\r\n\t\tfor (Row row : sheet)\r\n\t\t\tcheckJavaScriptCodeOnRow(row);\r\n\t}\r\n\r\n\tprivate void checkJavaScriptCodeOnRow(Row row) throws PossiblePrivilegeScalingException {\r\n\t\tfor (Cell cell : row)\r\n\t\t\tif (PrivilegeScalingRegexValidator.isPrivilegeScaling(cell.getStringCellValue()))\r\n\t\t\t\tthrow new PossiblePrivilegeScalingException(&quot;error message2&quot;);\r\n\t}\r\n\t\r\n}\r\n\r\npublic class PrivilegeScalingRegexValidator {\r\n\tfinal static String regex = &quot;=.*\\\\|&#39;.*|\\\\s+/[A-Za-z0-9._-]+(\\\\s+\\\\w+)*\\\\s+&quot;;\r\n\t\r\n\tpublic static boolean isPrivilegeScaling(final String input) {\r\n\t\tPattern pattern = Pattern.compile(regex);\r\n        Matcher matcher = pattern.matcher(input);\r\n        return matcher.matches();\t\t\r\n\t}\r\n}\r\n```\r\nI am currently integrating it with an antivirus to be able scan file in execution time.","title":"Validate file content before upload","body":"<p>what I did was:</p>\n<pre><code>//PDFValidator.java\npublic class PdfValidator implements FileValidator {\n\n    @Override\n    public void validate(File file)\n            throws EncryptedDocumentException, InvalidFormatException, IOException, PossibleXSSException {\n        try (FileInputStream fis = new FileInputStream(file)) {\n            byte[] contents = new byte[(int) file.length()];\n            fis.read(contents);\n            pdfJavascriptCodeCheck(contents);\n        }\n    }\n\n    public static void pdfJavascriptCodeCheck(final byte[] contents) throws PossibleXSSException {\n        try (PDDocument document = PDDocument.load(new ByteArrayInputStream(contents))) {\n            if (document.getDocumentCatalog().getOpenAction() instanceof PDActionJavaScript) {\n                PDActionJavaScript docLevelJS = (PDActionJavaScript) document.getDocumentCatalog().getOpenAction();\n                if (null != docLevelJS)\n                    throw new PossibleXSSException(&quot;error message&quot;);\n            }\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n\n    }\n}\n\n//ExcelValidator.java\npublic class ExcelValidator implements FileValidator {\n\n    @Override\n    public void validate(File file) throws EncryptedDocumentException, InvalidFormatException, IOException, PossiblePrivilegeScalingException{\n        checkPrivilegeScalingAttempting(file);\n    }\n\n    private void checkPrivilegeScalingAttempting(File file) throws EncryptedDocumentException, InvalidFormatException, IOException, PossiblePrivilegeScalingException {\n        try (FileInputStream fis = new FileInputStream(file); Workbook workbook = WorkbookFactory.create(fis)) {\n            for (int i = 0; i &lt; workbook.getNumberOfSheets(); i++) {\n                Sheet sheet = workbook.getSheetAt(i);\n                checkJavaScriptCodeOnSheet(sheet);\n            }\n        }\n    }\n    \n    private void checkJavaScriptCodeOnSheet(Sheet sheet) throws PossiblePrivilegeScalingException {\n        for (Row row : sheet)\n            checkJavaScriptCodeOnRow(row);\n    }\n\n    private void checkJavaScriptCodeOnRow(Row row) throws PossiblePrivilegeScalingException {\n        for (Cell cell : row)\n            if (PrivilegeScalingRegexValidator.isPrivilegeScaling(cell.getStringCellValue()))\n                throw new PossiblePrivilegeScalingException(&quot;error message2&quot;);\n    }\n    \n}\n\npublic class PrivilegeScalingRegexValidator {\n    final static String regex = &quot;=.*\\\\|'.*|\\\\s+/[A-Za-z0-9._-]+(\\\\s+\\\\w+)*\\\\s+&quot;;\n    \n    public static boolean isPrivilegeScaling(final String input) {\n        Pattern pattern = Pattern.compile(regex);\n        Matcher matcher = pattern.matcher(input);\n        return matcher.matches();       \n    }\n}\n</code></pre>\n<p>I am currently integrating it with an antivirus to be able scan file in execution time.</p>\n"}],"owner":{"account_id":28404101,"reputation":111,"user_id":21728438,"display_name":"Eduardo Roque"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77181349,"answer_count":1,"score":0,"last_activity_date":1695741562,"creation_date":1694620764,"question_id":77098713,"body_markdown":"I&#39;m developing a web application in Java, and I want to scan files uploaded to it at runtime for any type of injection, whether it&#39;s XSS, SQL, or malware. Besides, I have text fields in which users can directly input data, and from there, I generate Excel files. I want to identify if I&#39;m able to execute code on the frontend by defining XSS injections in these fields. Additionally, through injections in Excel files, I can perform actions like opening the command prompt (cmd) on the client&#39;s PC that runs the Excel file. Is there any service I can consume to perform this task at runtime?","title":"Validate file content before upload","body":"<p>I'm developing a web application in Java, and I want to scan files uploaded to it at runtime for any type of injection, whether it's XSS, SQL, or malware. Besides, I have text fields in which users can directly input data, and from there, I generate Excel files. I want to identify if I'm able to execute code on the frontend by defining XSS injections in these fields. Additionally, through injections in Excel files, I can perform actions like opening the command prompt (cmd) on the client's PC that runs the Excel file. Is there any service I can consume to perform this task at runtime?</p>\n"},{"tags":["java","amazon-web-services","curl","https","amazon-cloudfront"],"owner":{"account_id":25826069,"reputation":21,"user_id":19564201,"display_name":"TcsssT"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695741555,"creation_date":1695741555,"question_id":77181347,"body_markdown":"I&#39;m trying to integrate an external API that seems to be hosted in AWS, and so far I&#39;ve experienced different overall responses depending from where I make the request. Locally it works fine, but when I try it in production I always get the same response: `{ &quot;message&quot;: &quot;Forbidden&quot; }`.\r\n\r\nI&#39;ve tried hitting the API usign CURLs from different places and the results are arbitrary:\r\n\r\n- Making the request from 2 different servers that run the same OS, one works and the other one doesn&#39;t.\r\n- Making the request from Google Cloud doesn&#39;t work, from GitHub actions doesn&#39;t work, from AWS it does work.\r\n\r\nThis is my first time experiencing something like this so I&#39;m open to giving any useful information to find the solution.\r\n\r\nIt&#39;s worth noting that I don&#39;t have any administrative permissions on the API, I&#39;m just a consumer.\r\n\r\nHere&#39;s some CURLs responses I got:\r\n\r\n**Valid**\r\n\r\n```\r\ncurl --verbose --location &#39;https://external-api.com/endpointpath&#39; --header &#39;User-Agent: PostmanRuntime/7.32.2&#39; --header &#39;x-api-key: apikey&#39; --header &#39;Content-Type: application/json&#39; --data &#39;{}&#39;\r\n*   Trying xx.xx.xx.xx:xxx...\r\n* TCP_NODELAY set\r\n* Connected to external-api.com (xx.xx.xx.xx) port xxx (#0)\r\n* ALPN, offering h2\r\n* ALPN, offering http/1.1\r\n* successfully set certificate verify locations:\r\n*   CAfile: /etc/ssl/certs/ca-certificates.crt\r\n  CApath: /etc/ssl/certs\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_128_GCM_SHA256\r\n* ALPN, server accepted to use h2\r\n* Server certificate:\r\n*  subject: CN=external-api.com\r\n*  start date: May  7 00:00:00 2023 GMT\r\n*  expire date: Jun  4 23:59:59 2024 GMT\r\n*  subjectAltName: host &quot;external-api.com&quot; matched cert&#39;s &quot;external-api.com&quot;\r\n*  issuer: C=US; O=Amazon; CN=Amazon RSA 2048 M02\r\n*  SSL certificate verify ok.\r\n* Using HTTP2, server supports multi-use\r\n* Connection state changed (HTTP/2 confirmed)\r\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\r\n* Using Stream ID: 1 (easy handle 0xxxxxxxxxxxxx)\r\n&gt; POST /endpointpath HTTP/2\r\n&gt; Host: external-api.com\r\n&gt; accept: */*\r\n&gt; user-agent: PostmanRuntime/7.32.2\r\n&gt; x-api-key: apikey\r\n&gt; content-type: application/json\r\n&gt; content-length: 2\r\n&gt;\r\n* We are completely uploaded and fine\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* Connection state changed (MAX_CONCURRENT_STREAMS == 128)!\r\n&lt; HTTP/2 200\r\n&lt; content-type: application/json\r\n&lt; content-length: 345\r\n&lt; date: Tue, 26 Sep 2023 14:20:19 GMT\r\n&lt; x-amzn-requestid: requestid\r\n&lt; x-amz-apigw-id: apigw-id\r\n&lt; x-amzn-trace-id: traceid\r\n&lt; x-cache: Miss from cloudfront\r\n&lt; via: 1.1 3.cloudfront.net (CloudFront)\r\n&lt; x-amz-cf-pop: cfpop\r\n&lt; x-amz-cf-id: amzcfid\r\n&lt;\r\n* Connection #0 to host external-api.com left intact\r\n```\r\n\r\n**Invalid**\r\n\r\n```\r\ncurl --verbose --location &#39;https://external-api.com/endpointpath&#39; --header &#39;User-Agent: PostmanRuntime/7.32.2&#39; --header &#39;x-api-key: apikey&#39; --header &#39;Content-Type: application/json&#39; --header &#39;Accept: */*&#39; --header &#39;Accept-Encoding: gzip, deflate, br&#39; --header &#39;Connection: keep-alive&#39; --header &#39;Cache-Control: no-cache&#39; --data &#39;{}&#39;\r\n*   Trying xxx.xx.xx.xx...\r\n* TCP_NODELAY set\r\n* Connected to external-api.com (xxx.xx.xx.xx) port xxx (#0)\r\n* ALPN, offering h2\r\n* ALPN, offering http/1.1\r\n* successfully set certificate verify locations:\r\n*   CAfile: /etc/ssl/certs/ca-certificates.crt\r\n  CApath: /etc/ssl/certs\r\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\r\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\r\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (IN), TLS handshake, Unknown (8):\r\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\r\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\r\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (IN), TLS handshake, Finished (20):\r\n* TLSv1.3 (OUT), TLS change cipher, Client hello (1):\r\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\r\n* SSL connection using TLSv1.3 / TLS_AES_128_GCM_SHA256\r\n* ALPN, server accepted to use h2\r\n* Server certificate:\r\n*  subject: CN=external-api.com\r\n*  start date: May  7 00:00:00 2023 GMT\r\n*  expire date: Jun  4 23:59:59 2024 GMT\r\n*  subjectAltName: host &quot;external-api.com&quot; matched cert&#39;s &quot;external-api.com&quot;\r\n*  issuer: C=US; O=Amazon; CN=Amazon RSA 2048 M02\r\n*  SSL certificate verify ok.\r\n* Using HTTP2, server supports multi-use\r\n* Connection state changed (HTTP/2 confirmed)\r\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\r\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\r\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\r\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\r\n* Using Stream ID: 1 (easy handle 0xxxxxxxxxxxxx)\r\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\r\n&gt; POST /endpointpath HTTP/2\r\n&gt; Host: external-api.com\r\n&gt; User-Agent: PostmanRuntime/7.32.2\r\n&gt; x-api-key: apikey\r\n&gt; Content-Type: application/json\r\n&gt; Accept: */*\r\n&gt; Accept-Encoding: gzip, deflate, br\r\n&gt; Connection: keep-alive\r\n&gt; Cache-Control: no-cache\r\n&gt; Content-Length: 2\r\n&gt;\r\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\r\n* We are completely uploaded and fine\r\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\r\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\r\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\r\n* Connection state changed (MAX_CONCURRENT_STREAMS updated)!\r\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\r\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\r\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\r\n&lt; HTTP/2 403\r\n&lt; content-type: application/json\r\n&lt; content-length: 23\r\n&lt; date: Mon, 25 Sep 2023 18:42:03 GMT\r\n&lt; x-amzn-requestid: requestid\r\n&lt; x-amzn-errortype: ForbiddenException\r\n&lt; x-amz-apigw-id: apigw-id\r\n&lt; x-cache: Error from cloudfront\r\n&lt; via: 1.1 a.cloudfront.net (CloudFront)\r\n&lt; x-amz-cf-pop: cfpop\r\n&lt; x-amz-cf-id: amzcfid\r\n&lt;\r\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\r\n* Connection #0 to host external-api.com left intact\r\n```\r\n\r\nI&#39;ve checked that timdatectl are the same between servers that work and others that doesn&#39;t work.\r\nThose two examples have different ip/port, but I have confirmed that depending on the location hitting the exact same ip/port from different locations has the exact same behaviour, sometimes it just works or I get Forbidden.","title":"Why does external API using CloudFront returns status code 403 on different locations","body":"<p>I'm trying to integrate an external API that seems to be hosted in AWS, and so far I've experienced different overall responses depending from where I make the request. Locally it works fine, but when I try it in production I always get the same response: <code>{ &quot;message&quot;: &quot;Forbidden&quot; }</code>.</p>\n<p>I've tried hitting the API usign CURLs from different places and the results are arbitrary:</p>\n<ul>\n<li>Making the request from 2 different servers that run the same OS, one works and the other one doesn't.</li>\n<li>Making the request from Google Cloud doesn't work, from GitHub actions doesn't work, from AWS it does work.</li>\n</ul>\n<p>This is my first time experiencing something like this so I'm open to giving any useful information to find the solution.</p>\n<p>It's worth noting that I don't have any administrative permissions on the API, I'm just a consumer.</p>\n<p>Here's some CURLs responses I got:</p>\n<p><strong>Valid</strong></p>\n<pre><code>curl --verbose --location 'https://external-api.com/endpointpath' --header 'User-Agent: PostmanRuntime/7.32.2' --header 'x-api-key: apikey' --header 'Content-Type: application/json' --data '{}'\n*   Trying xx.xx.xx.xx:xxx...\n* TCP_NODELAY set\n* Connected to external-api.com (xx.xx.xx.xx) port xxx (#0)\n* ALPN, offering h2\n* ALPN, offering http/1.1\n* successfully set certificate verify locations:\n*   CAfile: /etc/ssl/certs/ca-certificates.crt\n  CApath: /etc/ssl/certs\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\n* TLSv1.3 (IN), TLS handshake, Encrypted Extensions (8):\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\n* TLSv1.3 (IN), TLS handshake, Finished (20):\n* TLSv1.3 (OUT), TLS change cipher, Change cipher spec (1):\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\n* SSL connection using TLSv1.3 / TLS_AES_128_GCM_SHA256\n* ALPN, server accepted to use h2\n* Server certificate:\n*  subject: CN=external-api.com\n*  start date: May  7 00:00:00 2023 GMT\n*  expire date: Jun  4 23:59:59 2024 GMT\n*  subjectAltName: host &quot;external-api.com&quot; matched cert's &quot;external-api.com&quot;\n*  issuer: C=US; O=Amazon; CN=Amazon RSA 2048 M02\n*  SSL certificate verify ok.\n* Using HTTP2, server supports multi-use\n* Connection state changed (HTTP/2 confirmed)\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\n* Using Stream ID: 1 (easy handle 0xxxxxxxxxxxxx)\n&gt; POST /endpointpath HTTP/2\n&gt; Host: external-api.com\n&gt; accept: */*\n&gt; user-agent: PostmanRuntime/7.32.2\n&gt; x-api-key: apikey\n&gt; content-type: application/json\n&gt; content-length: 2\n&gt;\n* We are completely uploaded and fine\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\n* Connection state changed (MAX_CONCURRENT_STREAMS == 128)!\n&lt; HTTP/2 200\n&lt; content-type: application/json\n&lt; content-length: 345\n&lt; date: Tue, 26 Sep 2023 14:20:19 GMT\n&lt; x-amzn-requestid: requestid\n&lt; x-amz-apigw-id: apigw-id\n&lt; x-amzn-trace-id: traceid\n&lt; x-cache: Miss from cloudfront\n&lt; via: 1.1 3.cloudfront.net (CloudFront)\n&lt; x-amz-cf-pop: cfpop\n&lt; x-amz-cf-id: amzcfid\n&lt;\n* Connection #0 to host external-api.com left intact\n</code></pre>\n<p><strong>Invalid</strong></p>\n<pre><code>curl --verbose --location 'https://external-api.com/endpointpath' --header 'User-Agent: PostmanRuntime/7.32.2' --header 'x-api-key: apikey' --header 'Content-Type: application/json' --header 'Accept: */*' --header 'Accept-Encoding: gzip, deflate, br' --header 'Connection: keep-alive' --header 'Cache-Control: no-cache' --data '{}'\n*   Trying xxx.xx.xx.xx...\n* TCP_NODELAY set\n* Connected to external-api.com (xxx.xx.xx.xx) port xxx (#0)\n* ALPN, offering h2\n* ALPN, offering http/1.1\n* successfully set certificate verify locations:\n*   CAfile: /etc/ssl/certs/ca-certificates.crt\n  CApath: /etc/ssl/certs\n* TLSv1.3 (OUT), TLS handshake, Client hello (1):\n* TLSv1.3 (IN), TLS handshake, Server hello (2):\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (IN), TLS handshake, Unknown (8):\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (IN), TLS handshake, Certificate (11):\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (IN), TLS handshake, CERT verify (15):\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (IN), TLS handshake, Finished (20):\n* TLSv1.3 (OUT), TLS change cipher, Client hello (1):\n* TLSv1.3 (OUT), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (OUT), TLS handshake, Finished (20):\n* SSL connection using TLSv1.3 / TLS_AES_128_GCM_SHA256\n* ALPN, server accepted to use h2\n* Server certificate:\n*  subject: CN=external-api.com\n*  start date: May  7 00:00:00 2023 GMT\n*  expire date: Jun  4 23:59:59 2024 GMT\n*  subjectAltName: host &quot;external-api.com&quot; matched cert's &quot;external-api.com&quot;\n*  issuer: C=US; O=Amazon; CN=Amazon RSA 2048 M02\n*  SSL certificate verify ok.\n* Using HTTP2, server supports multi-use\n* Connection state changed (HTTP/2 confirmed)\n* Copying HTTP/2 data in stream buffer to connection buffer after upgrade: len=0\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\n* Using Stream ID: 1 (easy handle 0xxxxxxxxxxxxx)\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\n&gt; POST /endpointpath HTTP/2\n&gt; Host: external-api.com\n&gt; User-Agent: PostmanRuntime/7.32.2\n&gt; x-api-key: apikey\n&gt; Content-Type: application/json\n&gt; Accept: */*\n&gt; Accept-Encoding: gzip, deflate, br\n&gt; Connection: keep-alive\n&gt; Cache-Control: no-cache\n&gt; Content-Length: 2\n&gt;\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\n* We are completely uploaded and fine\n* TLSv1.3 (IN), TLS Unknown, Certificate Status (22):\n* TLSv1.3 (IN), TLS handshake, Newsession Ticket (4):\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\n* Connection state changed (MAX_CONCURRENT_STREAMS updated)!\n* TLSv1.3 (OUT), TLS Unknown, Unknown (23):\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\n&lt; HTTP/2 403\n&lt; content-type: application/json\n&lt; content-length: 23\n&lt; date: Mon, 25 Sep 2023 18:42:03 GMT\n&lt; x-amzn-requestid: requestid\n&lt; x-amzn-errortype: ForbiddenException\n&lt; x-amz-apigw-id: apigw-id\n&lt; x-cache: Error from cloudfront\n&lt; via: 1.1 a.cloudfront.net (CloudFront)\n&lt; x-amz-cf-pop: cfpop\n&lt; x-amz-cf-id: amzcfid\n&lt;\n* TLSv1.3 (IN), TLS Unknown, Unknown (23):\n* Connection #0 to host external-api.com left intact\n</code></pre>\n<p>I've checked that timdatectl are the same between servers that work and others that doesn't work.\nThose two examples have different ip/port, but I have confirmed that depending on the location hitting the exact same ip/port from different locations has the exact same behaviour, sometimes it just works or I get Forbidden.</p>\n"},{"tags":["java","filter","java-8","predicate","steam"],"comments":[{"owner":{"account_id":1888781,"reputation":2007,"user_id":1707427,"display_name":"S&#246;ren"},"score":0,"creation_date":1695320305,"post_id":77152607,"comment_id":136012254,"body_markdown":"What do you mean by &quot;find number matching with 1 each number.&quot;?","body":"What do you mean by &quot;find number matching with 1 each number.&quot;?"},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695331032,"post_id":77152607,"comment_id":136013963,"body_markdown":"`001` means octal number, not decimal.","body":"<code>001</code> means octal number, not decimal."},{"owner":{"account_id":1939636,"reputation":28467,"user_id":1746118,"accept_rate":95,"display_name":"Naman"},"score":0,"creation_date":1695350494,"post_id":77152607,"comment_id":136015810,"body_markdown":"did you mean, that string representation contains `1`?","body":"did you mean, that string representation contains <code>1</code>?"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695640374,"post_id":77152721,"comment_id":136046895,"body_markdown":"Why dont you use just `&#39;1&#39;`? Then, you dont need to explain where the `49` comes from.","body":"Why dont you use just <code>&#39;1&#39;</code>? Then, you dont need to explain where the <code>49</code> comes from."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1695657148,"post_id":77152721,"comment_id":136050626,"body_markdown":"@Holger Because I am deliberately teaching the use of  code point integers, and avoiding the `char` type.","body":"@Holger Because I am deliberately teaching the use of  code point integers, and avoiding the <code>char</code> type."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1695657966,"post_id":77152721,"comment_id":136050797,"body_markdown":"For any printable character expressible as `char` literal, the char literal is equal to the codepoint. Theres no reason no to use them. Writing `49` instead, will not create codepoint awareness. Or just use `integer.toString().contains(&quot;1&quot;)`. That idiom will even work with characters spanning multiple codepoints.","body":"For any printable character expressible as <code>char</code> literal, the char literal is equal to the codepoint. Theres no reason no to use them. Writing <code>49</code> instead, will not create codepoint awareness. Or just use <code>integer.toString().contains(&quot;1&quot;)</code>. That idiom will even work with characters spanning multiple codepoints."}],"tags":[],"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695668476,"creation_date":1695320447,"answer_id":77152721,"question_id":77152607,"body_markdown":"# tl;dr\r\n\r\nConvert each number to text. Examine the code point of each character in that text. Look for any match to 49, the code point of the character of the digit 1. \r\n\r\n```java\r\nList.of ( 10 , 15 , 8 , 49 , 25 , 98 , 98 , 32 , 15 , 212 , 401 , 8 , 1 )\r\n        .stream ( )\r\n        .filter (\r\n                ( Integer integer ) -&gt; integer.toString ( ).codePoints ( ).anyMatch ( ( int codePoint ) -&gt; codePoint == 49 )  // 49 is the code point for the character of the digit one, 1. \r\n        )\r\n        .toList ( )\r\n        .toString ( )\r\n```\r\n\r\nSee this [run at Ideone.com][1].\r\n\r\n&gt;[10, 15, 15, 212, 401, 1]\r\n\r\n# Filtering for digit `1` \r\n\r\nApparently you want to filter for numbers which contain `1` as a digit in any position.\r\n\r\nConvert each number to text. Examine each character by inspecting its Unicode [code point][2] number. If that code point is the code point for the digit 1s character, we have a hit.\r\n\r\nThe character for digit `1` is [code point 49][3] decimal, U+0031 [hex][4], named DIGIT ONE. See [official Unicode chart](https://www.unicode.org/Public/UCD/latest/charts/CodeCharts.pdf). \r\n\r\n    &quot;1&quot;.codePointAt ( 0 )  49\r\n\r\nYour last value `001` must be a typo. Leading zero means an octal number rather than decimal number in Java syntax.\r\n\r\n```java\r\nList &lt; Integer &gt; inputs = List.of ( 10 , 15 , 8 , 49 , 25 , 98 , 98 , 32 , 15 , 212 , 401 , 8 , 1 );\r\n\r\nList &lt; Integer &gt; containsDigitOne =\r\n        inputs\r\n                .stream ( )\r\n                .filter (\r\n                        ( Integer integer ) -&gt;\r\n                                integer\r\n                                        .toString ( )\r\n                                        .codePoints ( )\r\n                                        .anyMatch ( ( int codePoint ) -&gt; codePoint == 49 )  // 49 is the code point for the character of the digit one, 1. \r\n                )\r\n                .toList ( );\r\n```\r\n\r\n&gt;containsDigitOne.toString() = [10, 15, 15, 212, 401, 1]\r\n\r\n\r\n  [1]: https://ideone.com/j8j1QA\r\n  [2]: https://en.wikipedia.org/wiki/Code_point\r\n  [3]: https://en.wikipedia.org/wiki/List_of_Unicode_characters#Basic_Latin\r\n  [4]: https://en.wikipedia.org/wiki/Hexadecimal","title":"Java8 - List of Integer values print Matching with 1 result showing 1 matching values","body":"<h1>tl;dr</h1>\n<p>Convert each number to text. Examine the code point of each character in that text. Look for any match to 49, the code point of the character of the digit 1.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List.of ( 10 , 15 , 8 , 49 , 25 , 98 , 98 , 32 , 15 , 212 , 401 , 8 , 1 )\n        .stream ( )\n        .filter (\n                ( Integer integer ) -&gt; integer.toString ( ).codePoints ( ).anyMatch ( ( int codePoint ) -&gt; codePoint == 49 )  // 49 is the code point for the character of the digit one, 1. \n        )\n        .toList ( )\n        .toString ( )\n</code></pre>\n<p>See this <a href=\"https://ideone.com/j8j1QA\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<blockquote>\n<p>[10, 15, 15, 212, 401, 1]</p>\n</blockquote>\n<h1>Filtering for digit <code>1</code></h1>\n<p>Apparently you want to filter for numbers which contain <code>1</code> as a digit in any position.</p>\n<p>Convert each number to text. Examine each character by inspecting its Unicode <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> number. If that code point is the code point for the digit 1s character, we have a hit.</p>\n<p>The character for digit <code>1</code> is <a href=\"https://en.wikipedia.org/wiki/List_of_Unicode_characters#Basic_Latin\" rel=\"nofollow noreferrer\">code point 49</a> decimal, U+0031 <a href=\"https://en.wikipedia.org/wiki/Hexadecimal\" rel=\"nofollow noreferrer\">hex</a>, named DIGIT ONE. See <a href=\"https://www.unicode.org/Public/UCD/latest/charts/CodeCharts.pdf\" rel=\"nofollow noreferrer\">official Unicode chart</a>.</p>\n<pre><code>&quot;1&quot;.codePointAt ( 0 )  49\n</code></pre>\n<p>Your last value <code>001</code> must be a typo. Leading zero means an octal number rather than decimal number in Java syntax.</p>\n<pre class=\"lang-java prettyprint-override\"><code>List &lt; Integer &gt; inputs = List.of ( 10 , 15 , 8 , 49 , 25 , 98 , 98 , 32 , 15 , 212 , 401 , 8 , 1 );\n\nList &lt; Integer &gt; containsDigitOne =\n        inputs\n                .stream ( )\n                .filter (\n                        ( Integer integer ) -&gt;\n                                integer\n                                        .toString ( )\n                                        .codePoints ( )\n                                        .anyMatch ( ( int codePoint ) -&gt; codePoint == 49 )  // 49 is the code point for the character of the digit one, 1. \n                )\n                .toList ( );\n</code></pre>\n<blockquote>\n<p>containsDigitOne.toString() = [10, 15, 15, 212, 401, 1]</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":29539780,"reputation":1,"user_id":22638714,"display_name":"Siddharth Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695741453,"creation_date":1695741453,"answer_id":77181337,"question_id":77152607,"body_markdown":"1. Create a `Predicate&lt;Integer&gt;`\r\n\r\n`Predicate&lt;Integer&gt; containsOne = (integer) -&gt; integer.toString().contains(&quot;1&quot;);`\r\n\r\n2. Filter the stream based on the predicate, and use print as a terminal operation to kick off the stream.\r\n`myList.stream.filter(containsOne).forEach(System.out::println);`","title":"Java8 - List of Integer values print Matching with 1 result showing 1 matching values","body":"<ol>\n<li>Create a <code>Predicate&lt;Integer&gt;</code></li>\n</ol>\n<p><code>Predicate&lt;Integer&gt; containsOne = (integer) -&gt; integer.toString().contains(&quot;1&quot;);</code></p>\n<ol start=\"2\">\n<li>Filter the stream based on the predicate, and use print as a terminal operation to kick off the stream.\n<code>myList.stream.filter(containsOne).forEach(System.out::println);</code></li>\n</ol>\n"}],"owner":{"account_id":29503083,"reputation":1,"user_id":22609658,"display_name":"ganeshan P"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1695741453,"creation_date":1695319218,"question_id":77152607,"body_markdown":"    List&lt;Integer&gt; myList = Arrays.asList(10,15,8,49,25,98,98,32,15,212,401,8,001);\r\n\r\nOutput:-\r\n10,15,15,212,401,001\r\n\r\nUsing java 8 stream api find number matching with 1 each number.\r\n\r\nAny one answering the question.\r\n\r\n    List&lt;Integer&gt; result =\tmyList.stream().filter(e -&gt; e == 1).collect(Collectors.toList());\r\n    \r\n    System.out.println(result);","title":"Java8 - List of Integer values print Matching with 1 result showing 1 matching values","body":"<pre><code>List&lt;Integer&gt; myList = Arrays.asList(10,15,8,49,25,98,98,32,15,212,401,8,001);\n</code></pre>\n<p>Output:-\n10,15,15,212,401,001</p>\n<p>Using java 8 stream api find number matching with 1 each number.</p>\n<p>Any one answering the question.</p>\n<pre><code>List&lt;Integer&gt; result =  myList.stream().filter(e -&gt; e == 1).collect(Collectors.toList());\n\nSystem.out.println(result);\n</code></pre>\n"},{"tags":["java","maven","build","launch4j"],"answers":[{"comments":[{"owner":{"account_id":22496248,"reputation":65,"user_id":16693183,"display_name":"GarySailor34"},"score":0,"creation_date":1695741502,"post_id":77181168,"comment_id":136063551,"body_markdown":"It is old version issue. My bad, thanks for help","body":"It is old version issue. My bad, thanks for help"}],"tags":[],"owner":{"account_id":22513336,"reputation":66,"user_id":16707945,"display_name":"Kamil Krzywaski"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695740276,"creation_date":1695740216,"answer_id":77181168,"question_id":77180897,"body_markdown":"Update launch4j-maven-plugin to the lastest version 2.4.1 and maven-shade-plugin to 3.5.1 this are so old versions from 2012 and might be not compatible with java 17 ","title":"&quot;Cannot access defaults field of Properties&quot; when using maven with launch4j build window exe from jar","body":"<p>Update launch4j-maven-plugin to the lastest version 2.4.1 and maven-shade-plugin to 3.5.1 this are so old versions from 2012 and might be not compatible with java 17</p>\n"}],"owner":{"account_id":22496248,"reputation":65,"user_id":16693183,"display_name":"GarySailor34"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":77181168,"answer_count":1,"score":0,"last_activity_date":1695740276,"creation_date":1695738032,"question_id":77180897,"body_markdown":"I have wrote a cmd program of editing excel file by java 17. Then, I want to build it to a windows executable exe file. By reading a post of below, trying to build with maven plug-in shade and launch4j but keep showing &quot;Cannot access defaults field of Properties&quot; error in launch4j. Wonder why?\r\n\r\n[This is the post I reference](https://www.hascode.com/2012/08/creating-a-windows-executable-from-a-jar-using-maven/)\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\r\n    &lt;artifactId&gt;combine_excel&lt;/artifactId&gt;\r\n    &lt;packaging&gt;jar&lt;/packaging&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n    &lt;name&gt;combine_excel&lt;/name&gt;\r\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;3.8.1&lt;/version&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;source&gt;17&lt;/source&gt;\r\n                    &lt;target&gt;17&lt;/target&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.7.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;shade&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\r\n                    &lt;shadedClassifierName&gt;shaded&lt;/shadedClassifierName&gt;\r\n                    &lt;transformers&gt;\r\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\r\n                            &lt;mainClass&gt;org.example.Main&lt;/mainClass&gt;\r\n                        &lt;/transformer&gt;\r\n                    &lt;/transformers&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n            &lt;plugin&gt;\r\n                &lt;groupId&gt;com.akathist.maven.plugins.launch4j&lt;/groupId&gt;\r\n                &lt;artifactId&gt;launch4j-maven-plugin&lt;/artifactId&gt;\r\n                &lt;version&gt;1.5.1&lt;/version&gt;\r\n                &lt;executions&gt;\r\n                    &lt;execution&gt;\r\n                        &lt;id&gt;l4j-clui&lt;/id&gt;\r\n                        &lt;phase&gt;package&lt;/phase&gt;\r\n                        &lt;goals&gt;\r\n                            &lt;goal&gt;launch4j&lt;/goal&gt;\r\n                        &lt;/goals&gt;\r\n                        &lt;configuration&gt;\r\n                            &lt;headerType&gt;console&lt;/headerType&gt;\r\n                            &lt;jar&gt;target/${artifactId}-${version}-shaded.jar&lt;/jar&gt;\r\n                            &lt;outfile&gt;target/combine_excel.exe&lt;/outfile&gt;\r\n&lt;!--                            &lt;downloadUrl&gt;http://java.com/download&lt;/downloadUrl&gt;--&gt;\r\n                            &lt;classPath&gt;\r\n                                &lt;mainClass&gt;org.example.Main&lt;/mainClass&gt;\r\n                                &lt;preCp&gt;anything&lt;/preCp&gt;\r\n                            &lt;/classPath&gt;\r\n&lt;!--                            &lt;icon&gt;application.ico&lt;/icon&gt;--&gt;\r\n                            &lt;jre&gt;\r\n                                &lt;minVersion&gt;1.6.0&lt;/minVersion&gt;\r\n                                &lt;jdkPreference&gt;preferJre&lt;/jdkPreference&gt;\r\n                            &lt;/jre&gt;\r\n                            &lt;versionInfo&gt;\r\n                                &lt;fileVersion&gt;1.0.0.0&lt;/fileVersion&gt;\r\n                                &lt;txtFileVersion&gt;${project.version}&lt;/txtFileVersion&gt;\r\n                                &lt;fileDescription&gt;${project.name}&lt;/fileDescription&gt;\r\n                                &lt;copyright&gt;2012 combine_excel.com&lt;/copyright&gt;\r\n                                &lt;productVersion&gt;1.0.0.0&lt;/productVersion&gt;\r\n                                &lt;txtProductVersion&gt;1.0.0.0&lt;/txtProductVersion&gt;\r\n                                &lt;productName&gt;${project.name}&lt;/productName&gt;\r\n                                &lt;companyName&gt;combine_excel.com&lt;/companyName&gt;\r\n                                &lt;internalName&gt;combine_excel&lt;/internalName&gt;\r\n                                &lt;originalFilename&gt;combine_excel.exe&lt;/originalFilename&gt;\r\n                            &lt;/versionInfo&gt;\r\n                        &lt;/configuration&gt;\r\n                    &lt;/execution&gt;\r\n                &lt;/executions&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;AsposeJavaAPI&lt;/id&gt;\r\n            &lt;name&gt;Aspose Java API&lt;/name&gt;\r\n            &lt;url&gt;https://repository.aspose.com/repo/&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.aspose&lt;/groupId&gt;\r\n            &lt;artifactId&gt;aspose-cells&lt;/artifactId&gt;\r\n            &lt;version&gt;21.6&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\nThis is the error log.\r\n```\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  2.091 s\r\n[INFO] Finished at: 2023-09-26T22:21:33+08:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1:launch4j (l4j-clui) on project combine_excel: Execution l4j-clui of goal com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1:launch4j failed: An API incompatibility was encountered while executing com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1:launch4j: java.lang.ExceptionInInitializerError: Cannot access defaults field of Properties\r\n[ERROR] -----------------------------------------------------\r\n[ERROR] realm =    plugin&gt;com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1\r\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\r\n[ERROR] urls[0] = file:/C:/Users/gary6/.m2/repository/com/akathist/maven/plugins/launch4j/launch4j-maven-plugin/1.5.1/launch4j-maven-plugin-1.5.1.jar\r\n[ERROR] urls[1] = file:/C:/Users/gary6/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.4/plexus-component-annotations-1.5.4.jar\r\n[ERROR] urls[2] = file:/C:/Users/gary6/.m2/repository/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.jar\r\n[ERROR] urls[3] = file:/C:/Users/gary6/.m2/repository/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7-noaop.jar\r\n[ERROR] urls[4] = file:/C:/Users/gary6/.m2/repository/org/codehaus/plexus/plexus-utils/1.5.15/plexus-utils-1.5.15.jar\r\n[ERROR] urls[5] = file:/C:/Users/gary6/.m2/repository/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar\r\n[ERROR] urls[6] = file:/C:/Users/gary6/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.11/plexus-interpolation-1.11.jar\r\n[ERROR] urls[7] = file:/C:/Users/gary6/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar\r\n[ERROR] urls[8] = file:/C:/Users/gary6/.m2/repository/commons-beanutils/commons-beanutils/1.8.3/commons-beanutils-1.8.3.jar\r\n[ERROR] urls[9] = file:/C:/Users/gary6/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar\r\n[ERROR] urls[10] = file:/C:/Users/gary6/.m2/repository/org/apache/ant/ant/1.7.0/ant-1.7.0.jar\r\n[ERROR] urls[11] = file:/C:/Users/gary6/.m2/repository/org/apache/ant/ant-launcher/1.7.0/ant-launcher-1.7.0.jar\r\n[ERROR] urls[12] = file:/C:/Users/gary6/.m2/repository/foxtrot/foxtrot/2.0/foxtrot-2.0.jar\r\n[ERROR] urls[13] = file:/C:/Users/gary6/.m2/repository/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar\r\n[ERROR] urls[14] = file:/C:/Users/gary6/.m2/repository/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar\r\n[ERROR] Number of foreign imports: 1\r\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\r\n[ERROR]\r\n[ERROR] -----------------------------------------------------\r\n[ERROR]\r\n[ERROR] -&gt; [Help 1]\r\n[ERROR]\r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR]\r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\r\n\r\n```\r\n\r\nI think is the launch4j config value was wrong at first. I add all missing parameter that refer inside the \\&lt;project\\&gt; tag and comment the icon photo but it didnt work any way. Moreover, I have tried build with war but failed.","title":"&quot;Cannot access defaults field of Properties&quot; when using maven with launch4j build window exe from jar","body":"<p>I have wrote a cmd program of editing excel file by java 17. Then, I want to build it to a windows executable exe file. By reading a post of below, trying to build with maven plug-in shade and launch4j but keep showing &quot;Cannot access defaults field of Properties&quot; error in launch4j. Wonder why?</p>\n<p><a href=\"https://www.hascode.com/2012/08/creating-a-windows-executable-from-a-jar-using-maven/\" rel=\"nofollow noreferrer\">This is the post I reference</a></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;org.example&lt;/groupId&gt;\n    &lt;artifactId&gt;combine_excel&lt;/artifactId&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;combine_excel&lt;/name&gt;\n    &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.8.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;17&lt;/source&gt;\n                    &lt;target&gt;17&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-shade-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.7.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;shade&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n                &lt;configuration&gt;\n                    &lt;shadedArtifactAttached&gt;true&lt;/shadedArtifactAttached&gt;\n                    &lt;shadedClassifierName&gt;shaded&lt;/shadedClassifierName&gt;\n                    &lt;transformers&gt;\n                        &lt;transformer implementation=&quot;org.apache.maven.plugins.shade.resource.ManifestResourceTransformer&quot;&gt;\n                            &lt;mainClass&gt;org.example.Main&lt;/mainClass&gt;\n                        &lt;/transformer&gt;\n                    &lt;/transformers&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;com.akathist.maven.plugins.launch4j&lt;/groupId&gt;\n                &lt;artifactId&gt;launch4j-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.5.1&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;l4j-clui&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;launch4j&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;headerType&gt;console&lt;/headerType&gt;\n                            &lt;jar&gt;target/${artifactId}-${version}-shaded.jar&lt;/jar&gt;\n                            &lt;outfile&gt;target/combine_excel.exe&lt;/outfile&gt;\n&lt;!--                            &lt;downloadUrl&gt;http://java.com/download&lt;/downloadUrl&gt;--&gt;\n                            &lt;classPath&gt;\n                                &lt;mainClass&gt;org.example.Main&lt;/mainClass&gt;\n                                &lt;preCp&gt;anything&lt;/preCp&gt;\n                            &lt;/classPath&gt;\n&lt;!--                            &lt;icon&gt;application.ico&lt;/icon&gt;--&gt;\n                            &lt;jre&gt;\n                                &lt;minVersion&gt;1.6.0&lt;/minVersion&gt;\n                                &lt;jdkPreference&gt;preferJre&lt;/jdkPreference&gt;\n                            &lt;/jre&gt;\n                            &lt;versionInfo&gt;\n                                &lt;fileVersion&gt;1.0.0.0&lt;/fileVersion&gt;\n                                &lt;txtFileVersion&gt;${project.version}&lt;/txtFileVersion&gt;\n                                &lt;fileDescription&gt;${project.name}&lt;/fileDescription&gt;\n                                &lt;copyright&gt;2012 combine_excel.com&lt;/copyright&gt;\n                                &lt;productVersion&gt;1.0.0.0&lt;/productVersion&gt;\n                                &lt;txtProductVersion&gt;1.0.0.0&lt;/txtProductVersion&gt;\n                                &lt;productName&gt;${project.name}&lt;/productName&gt;\n                                &lt;companyName&gt;combine_excel.com&lt;/companyName&gt;\n                                &lt;internalName&gt;combine_excel&lt;/internalName&gt;\n                                &lt;originalFilename&gt;combine_excel.exe&lt;/originalFilename&gt;\n                            &lt;/versionInfo&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;AsposeJavaAPI&lt;/id&gt;\n            &lt;name&gt;Aspose Java API&lt;/name&gt;\n            &lt;url&gt;https://repository.aspose.com/repo/&lt;/url&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.aspose&lt;/groupId&gt;\n            &lt;artifactId&gt;aspose-cells&lt;/artifactId&gt;\n            &lt;version&gt;21.6&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>This is the error log.</p>\n<pre><code>[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.091 s\n[INFO] Finished at: 2023-09-26T22:21:33+08:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1:launch4j (l4j-clui) on project combine_excel: Execution l4j-clui of goal com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1:launch4j failed: An API incompatibility was encountered while executing com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1:launch4j: java.lang.ExceptionInInitializerError: Cannot access defaults field of Properties\n[ERROR] -----------------------------------------------------\n[ERROR] realm =    plugin&gt;com.akathist.maven.plugins.launch4j:launch4j-maven-plugin:1.5.1\n[ERROR] strategy = org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy\n[ERROR] urls[0] = file:/C:/Users/gary6/.m2/repository/com/akathist/maven/plugins/launch4j/launch4j-maven-plugin/1.5.1/launch4j-maven-plugin-1.5.1.jar\n[ERROR] urls[1] = file:/C:/Users/gary6/.m2/repository/org/codehaus/plexus/plexus-component-annotations/1.5.4/plexus-component-annotations-1.5.4.jar\n[ERROR] urls[2] = file:/C:/Users/gary6/.m2/repository/org/sonatype/sisu/sisu-inject-bean/1.4.2/sisu-inject-bean-1.4.2.jar\n[ERROR] urls[3] = file:/C:/Users/gary6/.m2/repository/org/sonatype/sisu/sisu-guice/2.1.7/sisu-guice-2.1.7-noaop.jar\n[ERROR] urls[4] = file:/C:/Users/gary6/.m2/repository/org/codehaus/plexus/plexus-utils/1.5.15/plexus-utils-1.5.15.jar\n[ERROR] urls[5] = file:/C:/Users/gary6/.m2/repository/backport-util-concurrent/backport-util-concurrent/3.1/backport-util-concurrent-3.1.jar\n[ERROR] urls[6] = file:/C:/Users/gary6/.m2/repository/org/codehaus/plexus/plexus-interpolation/1.11/plexus-interpolation-1.11.jar\n[ERROR] urls[7] = file:/C:/Users/gary6/.m2/repository/junit/junit/3.8.1/junit-3.8.1.jar\n[ERROR] urls[8] = file:/C:/Users/gary6/.m2/repository/commons-beanutils/commons-beanutils/1.8.3/commons-beanutils-1.8.3.jar\n[ERROR] urls[9] = file:/C:/Users/gary6/.m2/repository/commons-logging/commons-logging/1.1.1/commons-logging-1.1.1.jar\n[ERROR] urls[10] = file:/C:/Users/gary6/.m2/repository/org/apache/ant/ant/1.7.0/ant-1.7.0.jar\n[ERROR] urls[11] = file:/C:/Users/gary6/.m2/repository/org/apache/ant/ant-launcher/1.7.0/ant-launcher-1.7.0.jar\n[ERROR] urls[12] = file:/C:/Users/gary6/.m2/repository/foxtrot/foxtrot/2.0/foxtrot-2.0.jar\n[ERROR] urls[13] = file:/C:/Users/gary6/.m2/repository/com/thoughtworks/xstream/xstream/1.3.1/xstream-1.3.1.jar\n[ERROR] urls[14] = file:/C:/Users/gary6/.m2/repository/xpp3/xpp3_min/1.1.4c/xpp3_min-1.1.4c.jar\n[ERROR] Number of foreign imports: 1\n[ERROR] import: Entry[import  from realm ClassRealm[maven.api, parent: null]]\n[ERROR]\n[ERROR] -----------------------------------------------------\n[ERROR]\n[ERROR] -&gt; [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/PluginContainerException\n\n</code></pre>\n<p>I think is the launch4j config value was wrong at first. I add all missing parameter that refer inside the &lt;project&gt; tag and comment the icon photo but it didnt work any way. Moreover, I have tried build with war but failed.</p>\n"},{"tags":["java","sockets","networking","protocols"],"answers":[{"comments":[{"owner":{"account_id":146280,"reputation":61587,"user_id":356635,"accept_rate":86,"display_name":"Tom Gullen"},"score":0,"creation_date":1281012210,"post_id":3414525,"comment_id":3553683,"body_markdown":"http(s) is awful at sending large files/audio etc etc.  It&#39;s also stateless so it would be harder to build login stuff.","body":"http(s) is awful at sending large files/audio etc etc.  It&#39;s also stateless so it would be harder to build login stuff."}],"tags":[],"owner":{"account_id":27505,"reputation":32693,"user_id":72673,"accept_rate":72,"display_name":"Maurice Perry"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1281010370,"creation_date":1281010370,"answer_id":3414525,"question_id":3414407,"body_markdown":"You could use http or https. The java media framework contains an implementation of rtp.","title":"Tips about design/implementation of own protocol","body":"<p>You could use http or https. The java media framework contains an implementation of rtp.</p>\n"},{"comments":[{"owner":{"account_id":100898,"reputation":4168,"user_id":271746,"accept_rate":78,"display_name":"wasatz"},"score":0,"creation_date":1281011433,"post_id":3414613,"comment_id":3553563,"body_markdown":"+1, that was a really interesting project I&#39;ve never heard about before. I also rolled an entire own message codec with bytebuffers a couple of years ago (and it was quite annoying at times), if I had had something like this I could have cut development times significantly (but hey, it worked!). I&#39;ll definitively have a look at this when I get some spare time. Just too bad that I won&#39;t have much use for it in my current job (C# and WCF...).","body":"+1, that was a really interesting project I&#39;ve never heard about before. I also rolled an entire own message codec with bytebuffers a couple of years ago (and it was quite annoying at times), if I had had something like this I could have cut development times significantly (but hey, it worked!). I&#39;ll definitively have a look at this when I get some spare time. Just too bad that I won&#39;t have much use for it in my current job (C# and WCF...)."},{"owner":{"account_id":15141,"reputation":33502,"user_id":31667,"accept_rate":75,"display_name":"viraptor"},"score":3,"creation_date":1281013058,"post_id":3414613,"comment_id":3553812,"body_markdown":"Just keep in mind that even though it&#39;s got &quot;protocol&quot; in the name, it&#39;s really just a way of (de)serialising messages into a binary format. This is only one small step in designing a your own message exchange. You&#39;ll need to think about the states, the error recovery, dealing with potential conflicts / message races, etc. etc.","body":"Just keep in mind that even though it&#39;s got &quot;protocol&quot; in the name, it&#39;s really just a way of (de)serialising messages into a binary format. This is only one small step in designing a your own message exchange. You&#39;ll need to think about the states, the error recovery, dealing with potential conflicts / message races, etc. etc."}],"tags":[],"owner":{"account_id":43577,"reputation":54129,"user_id":127479,"accept_rate":95,"display_name":"Adamski"},"comment_count":2,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1281010997,"creation_date":1281010997,"answer_id":3414613,"question_id":3414407,"body_markdown":"Take a look a [Google Protocol Buffers][1], which will generate a compact wire protocol as well as autogenerating Java message classes.  I wish I&#39;d heard of it before rolling my own message codec using Java NIO `ByteBuffer`s.\r\n\r\n\r\n  [1]: http://code.google.com/p/protobuf/","title":"Tips about design/implementation of own protocol","body":"<p>Take a look a <a href=\"http://code.google.com/p/protobuf/\" rel=\"nofollow noreferrer\">Google Protocol Buffers</a>, which will generate a compact wire protocol as well as autogenerating Java message classes.  I wish I'd heard of it before rolling my own message codec using Java NIO <code>ByteBuffer</code>s.</p>\n"},{"comments":[{"owner":{"account_id":158625,"reputation":3575,"user_id":377398,"accept_rate":95,"display_name":"fredcrs"},"score":0,"creation_date":1281050903,"post_id":3414670,"comment_id":3559981,"body_markdown":"I read about and looks like Smack could be used to make my client...And I should use openfire as a server.\nBut I dont know if Smack support streaming, I googled for it with no success. Should this be the best way?","body":"I read about and looks like Smack could be used to make my client...And I should use openfire as a server. But I dont know if Smack support streaming, I googled for it with no success. Should this be the best way?"},{"owner":{"account_id":158625,"reputation":3575,"user_id":377398,"accept_rate":95,"display_name":"fredcrs"},"score":0,"creation_date":1281050951,"post_id":3414670,"comment_id":3559986,"body_markdown":"I mean&#39;t audio streaming sorry.","body":"I mean&#39;t audio streaming sorry."}],"tags":[],"owner":{"account_id":15141,"reputation":33502,"user_id":31667,"accept_rate":75,"display_name":"viraptor"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1281012106,"creation_date":1281011495,"answer_id":3414670,"question_id":3414407,"body_markdown":"I&#39;ve got a feeling you&#39;re trying to reinvent either SIP (if your packet processing is mostly stateless and XML is small enough to go into &lt;3k packets), or XMPP.\r\n\r\nIf you need a connection oriented login/logout, and stateful commands/instructions, then XMPP is probably closer to the requirements. Also, [Jingle extension](http://en.wikipedia.org/wiki/Jingle_%28protocol%29) to XMPP already deals with RTP setup and teardown. XML messages are trivial to embed into custom XMPP packets (which themselves are XML) and there are known XMPP solutions for proxying a file transfer.\r\n\r\nI&#39;m pretty sure it meets your requirements quite well (at least the way they&#39;re presented here). If you don&#39;t have to design a completely new protocol, it&#39;s probably easier if you don&#39;t. Also reusing an existing XMPP server will allow you to solve the pain of creating your own message broker. There&#39;s OpenFire server, which is written in Java.","title":"Tips about design/implementation of own protocol","body":"<p>I've got a feeling you're trying to reinvent either SIP (if your packet processing is mostly stateless and XML is small enough to go into &lt;3k packets), or XMPP.</p>\n\n<p>If you need a connection oriented login/logout, and stateful commands/instructions, then XMPP is probably closer to the requirements. Also, <a href=\"http://en.wikipedia.org/wiki/Jingle_%28protocol%29\" rel=\"nofollow noreferrer\">Jingle extension</a> to XMPP already deals with RTP setup and teardown. XML messages are trivial to embed into custom XMPP packets (which themselves are XML) and there are known XMPP solutions for proxying a file transfer.</p>\n\n<p>I'm pretty sure it meets your requirements quite well (at least the way they're presented here). If you don't have to design a completely new protocol, it's probably easier if you don't. Also reusing an existing XMPP server will allow you to solve the pain of creating your own message broker. There's OpenFire server, which is written in Java.</p>\n"},{"tags":[],"owner":{"account_id":72122,"reputation":2758,"user_id":208344,"display_name":"Jes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1281039066,"creation_date":1281039066,"answer_id":3418777,"question_id":3414407,"body_markdown":"Writing the protocol from scratch may require a lot of work. Take a look at XMPP.\r\n\r\nIf you want to write your own protocol, start with learning a form of RPC like JSON or similar, which will make your life a lot easier.","title":"Tips about design/implementation of own protocol","body":"<p>Writing the protocol from scratch may require a lot of work. Take a look at XMPP.</p>\n\n<p>If you want to write your own protocol, start with learning a form of RPC like JSON or similar, which will make your life a lot easier.</p>\n"},{"comments":[{"owner":{"account_id":10296808,"reputation":695,"user_id":7596696,"accept_rate":78,"display_name":"Iqra."},"score":0,"creation_date":1499232406,"post_id":19026753,"comment_id":76811138,"body_markdown":"Thanks for sharing your approach! It signaled I am in the right direction.","body":"Thanks for sharing your approach! It signaled I am in the right direction."}],"tags":[],"owner":{"account_id":3318843,"reputation":1818,"user_id":2790482,"display_name":"Reasurria"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1380194580,"creation_date":1380194232,"answer_id":19026753,"question_id":3414407,"body_markdown":"I dont know if this is bad advice or not, but what I usually do for my networking applications is to make a Message object that holds a TAG string and CONTENT string. The CONTENT part is usually a JSON string and the message itself is also sent to/from the server as a json string.\r\n\r\nWhen the server or client receives a message, it parses the json into a Message object. You can then check the TAG part of the message to see what type of content is held in the CONTENT part of the message and decide what to do with it.\r\n\r\nFor example, if TAG==&quot;LOGIN&quot; then the CONTENT may be login details or similar. And when the TAG==&quot;MESSAGE&quot; then the CONTENT will perhaps be a json string representing your parameters, for example, who is the recipient/s and what is the content of the message, etc.\r\n\r\nYou can then do you encryption and decryption on the strings. If this is a stupid way of doing it, please tell me so in a comment so i can learn :)\r\n\r\nI also usually implement a state design pattern on both sides, but at least on the server side. For example, the server starts out in a WaitingForLogin state. When the client logs in it switches to a different state that only listens for files and chat messages as an example. In this way I found it is a bit easier to manage. \r\n","title":"Tips about design/implementation of own protocol","body":"<p>I dont know if this is bad advice or not, but what I usually do for my networking applications is to make a Message object that holds a TAG string and CONTENT string. The CONTENT part is usually a JSON string and the message itself is also sent to/from the server as a json string.</p>\n\n<p>When the server or client receives a message, it parses the json into a Message object. You can then check the TAG part of the message to see what type of content is held in the CONTENT part of the message and decide what to do with it.</p>\n\n<p>For example, if TAG==\"LOGIN\" then the CONTENT may be login details or similar. And when the TAG==\"MESSAGE\" then the CONTENT will perhaps be a json string representing your parameters, for example, who is the recipient/s and what is the content of the message, etc.</p>\n\n<p>You can then do you encryption and decryption on the strings. If this is a stupid way of doing it, please tell me so in a comment so i can learn :)</p>\n\n<p>I also usually implement a state design pattern on both sides, but at least on the server side. For example, the server starts out in a WaitingForLogin state. When the client logs in it switches to a different state that only listens for files and chat messages as an example. In this way I found it is a bit easier to manage. </p>\n"}],"owner":{"account_id":158625,"reputation":3575,"user_id":377398,"accept_rate":95,"display_name":"fredcrs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4354,"favorite_count":0,"down_vote_count":1,"up_vote_count":6,"accepted_answer_id":3414670,"answer_count":5,"score":5,"last_activity_date":1695740215,"creation_date":1281009402,"question_id":3414407,"body_markdown":"Where I work we are in need of a protocol capable of:\r\n\r\n - User login/logout\r\n - Send/Receive instructions\r\n - Send/Receive files\r\n - Send/Receive audio stream(could use RTP)\r\n - Send/Receive small XML files Use\r\n - cryptography for all those.\r\n\r\nIt will be implemented in java. So I have some questions, since I&#39;ve never implemented a network protocol yet.\r\n\r\n 1. Is it possible to use existing protocols to build this one?\r\n 2. What tool can I use to help me design the protocol? For &quot;Modeling&quot;\r\n 3. Is it possible to accomplish all this, doing it alone? I have as much time as I need for this.\r\n\r\nI have a pretty good background in Java and C++, but not yet with sockets/networking programming.\r\n\r\n\r\nThanks!","title":"Tips about design/implementation of own protocol","body":"<p>Where I work we are in need of a protocol capable of:</p>\n<ul>\n<li>User login/logout</li>\n<li>Send/Receive instructions</li>\n<li>Send/Receive files</li>\n<li>Send/Receive audio stream(could use RTP)</li>\n<li>Send/Receive small XML files Use</li>\n<li>cryptography for all those.</li>\n</ul>\n<p>It will be implemented in java. So I have some questions, since I've never implemented a network protocol yet.</p>\n<ol>\n<li>Is it possible to use existing protocols to build this one?</li>\n<li>What tool can I use to help me design the protocol? For &quot;Modeling&quot;</li>\n<li>Is it possible to accomplish all this, doing it alone? I have as much time as I need for this.</li>\n</ol>\n<p>I have a pretty good background in Java and C++, but not yet with sockets/networking programming.</p>\n<p>Thanks!</p>\n"},{"tags":["java","exception","compiler-errors","jvm","runtime"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":3,"creation_date":1695738366,"post_id":77180923,"comment_id":136062761,"body_markdown":"It&#39;s part of the spec and as such hardcoded into all compilers. Note that there is nothing special to do at runtime. Checked exceptions are a compiler-level feature only.","body":"It&#39;s part of the spec and as such hardcoded into all compilers. Note that there is nothing special to do at runtime. Checked exceptions are a compiler-level feature only."},{"owner":{"account_id":318670,"reputation":15681,"user_id":636009,"display_name":"David Conrad"},"score":3,"creation_date":1695739699,"post_id":77180923,"comment_id":136063070,"body_markdown":"The JVM doesn&#39;t. (Un)checked is purely a Java language concept enforced by the compiler.","body":"The JVM doesn&#39;t. (Un)checked is purely a Java language concept enforced by the compiler."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1695739884,"creation_date":1695739884,"answer_id":77181117,"question_id":77180923,"body_markdown":"The word, &quot;checked&quot; in the term &quot;checked exception&quot; refers to the exceptions that are checked during compilation time. JVM does not know anything about a checked exception. It&#39;s analogous to generics which is there to assist you in catching potential problems during compilation itself; the Type Erasure replaces all type parameters in generic types with their bounds or `Object` if the type parameters are unbounded. The produced bytecode, therefore, contains only ordinary classes, interfaces, and methods. So, JVM does not know anything about generics.\r\n\r\nBy the way, the checked exception classes are all subclasses of `Throwable` other than `RuntimeException` and its subclasses and `Error` and its subclasses.","title":"How do the compiler and JVM establish and recognize a RuntimeException as a starting point as unchecked type?","body":"<p>The word, &quot;checked&quot; in the term &quot;checked exception&quot; refers to the exceptions that are checked during compilation time. JVM does not know anything about a checked exception. It's analogous to generics which is there to assist you in catching potential problems during compilation itself; the Type Erasure replaces all type parameters in generic types with their bounds or <code>Object</code> if the type parameters are unbounded. The produced bytecode, therefore, contains only ordinary classes, interfaces, and methods. So, JVM does not know anything about generics.</p>\n<p>By the way, the checked exception classes are all subclasses of <code>Throwable</code> other than <code>RuntimeException</code> and its subclasses and <code>Error</code> and its subclasses.</p>\n"}],"owner":{"account_id":4508336,"reputation":15533,"user_id":3665178,"accept_rate":73,"display_name":"Manuel Jordan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":52,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1695739884,"creation_date":1695738209,"question_id":77180923,"body_markdown":"In Java, according with the following class hierarchy\r\n\r\n    Object\r\n     Throwable\r\n      Error\r\n       Abort\r\n       ...\r\n      Exception\r\n       AbortException\r\n       ...\r\n       RuntimeException\r\n        ...\r\n\r\nI know the concept and difference between a _checked_ and _unchecked_ terms, where the former is all the subclasses from `Exception` and the latter for all the subclasses from `RuntimeException`. Of course, and the constraints about `try/catch` and `throws` syntaxes.\r\n\r\nNow because `RuntimeException` is a _subclass_ of `Exception` **too**. \r\n\r\n**Question**\r\n\r\n* How do the compiler and JVM establish and recognize a `RuntimeException` as a starting point as unchecked type?\r\n\r\nOr in other words: \r\n\r\n* How both establish/recognize that the `RuntimeException` hierarchy must be _not_ treat it as checked?  \r\n\r\nHow **Java** itself implement this _specification_ through its own code?\r\n","title":"How do the compiler and JVM establish and recognize a RuntimeException as a starting point as unchecked type?","body":"<p>In Java, according with the following class hierarchy</p>\n<pre><code>Object\n Throwable\n  Error\n   Abort\n   ...\n  Exception\n   AbortException\n   ...\n   RuntimeException\n    ...\n</code></pre>\n<p>I know the concept and difference between a <em>checked</em> and <em>unchecked</em> terms, where the former is all the subclasses from <code>Exception</code> and the latter for all the subclasses from <code>RuntimeException</code>. Of course, and the constraints about <code>try/catch</code> and <code>throws</code> syntaxes.</p>\n<p>Now because <code>RuntimeException</code> is a <em>subclass</em> of <code>Exception</code> <strong>too</strong>.</p>\n<p><strong>Question</strong></p>\n<ul>\n<li>How do the compiler and JVM establish and recognize a <code>RuntimeException</code> as a starting point as unchecked type?</li>\n</ul>\n<p>Or in other words:</p>\n<ul>\n<li>How both establish/recognize that the <code>RuntimeException</code> hierarchy must be <em>not</em> treat it as checked?</li>\n</ul>\n<p>How <strong>Java</strong> itself implement this <em>specification</em> through its own code?</p>\n"},{"tags":["java","spring","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":6810032,"reputation":595,"user_id":6837405,"accept_rate":73,"display_name":"Busman"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695739262,"creation_date":1628617993,"answer_id":68731486,"question_id":68729380,"body_markdown":"Well, I actually figured it out. The count query generated by returning Page from the repository method can be avoided by supplying your own via the following conversion:\r\n\r\nConvert this:\r\n\r\n    @Entity\r\n    @Table(name=`order`)\r\n    @SqlResultSetMapping(\r\n\t\tname=&quot;myDtoMapping&quot;,\r\n\t\tclasses={\r\n\t\t\t\t@ConstructorResult(\r\n\t\t\t\t\t\ttargetClass=MyDto.class,\r\n\t\t\t\t\t\tcolumns={\r\n\t\t\t\t\t\t\t\t@ColumnResult(name=&quot;id&quot;, type=Long.class),\r\n\t\t\t\t\t\t\t\t//Other columns...\r\n\t\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t}\r\n    )\r\n    @NamedNativeQuery(name=&quot;Order.findResults&quot;, query=myVariablePointingToQuery, resultSetMapping=&quot;myDtoMapping&quot;)\r\n    public class Order{\r\n    ...\r\n\r\nTo this:\r\n\r\n    @Entity\r\n    @Table(name=`order`)\r\n    @SqlResultSetMappings({\r\n        @SqlResultSetMapping(\r\n                name=&quot;myDtoMapping&quot;,\r\n                classes={\r\n                        @ConstructorResult(\r\n                                targetClass=MyDto.class,\r\n                                columns={\r\n                                        @ColumnResult(name=&quot;id&quot;, type=Long.class),\r\n                                        //Other columns...\r\n                                }\r\n                        )\r\n                }\r\n        ),\r\n        @SqlResultSetMapping(name=&quot;myDtoMapping.count&quot;, columns=@ColumnResult(name=&quot;cnt&quot;))}\r\n    )\r\n    @NamedNativeQueries({\r\n        @NamedNativeQuery(name=&quot;Order.findResults&quot;, query=myVariablePointingToQuery, resultSetMapping=&quot;myDtoMapping&quot;),\r\n        @NamedNativeQuery(name = &quot;Order.findResults.count&quot;, query=myVariablePointingToCOUNTINGQuery, resultSetMapping = &quot;myDtoMapping.count&quot;)\r\n    })\r\n\r\nNote that there is a `SqlResultSetMapping` and `@NamedNativeQuery` for count now, as well as a custom count query, which **by the way is defined as**\r\n\r\n    &quot;select count(*) as cnt \\n&quot; //newline is important!\r\n**because even with a trailing space, the query comes out to &quot;select count(*) as cntfrom&quot;. A bug.**\r\n\r\nBut now everything works!","title":"Count query generated by returning Page&lt;&gt; from Repository method crashes on org.hibernate.QueryException: unexpected char: &#39;`&#39;","body":"<p>Well, I actually figured it out. The count query generated by returning Page from the repository method can be avoided by supplying your own via the following conversion:</p>\n<p>Convert this:</p>\n<pre><code>@Entity\n@Table(name=`order`)\n@SqlResultSetMapping(\n    name=&quot;myDtoMapping&quot;,\n    classes={\n            @ConstructorResult(\n                    targetClass=MyDto.class,\n                    columns={\n                            @ColumnResult(name=&quot;id&quot;, type=Long.class),\n                            //Other columns...\n                    }\n            )\n    }\n)\n@NamedNativeQuery(name=&quot;Order.findResults&quot;, query=myVariablePointingToQuery, resultSetMapping=&quot;myDtoMapping&quot;)\npublic class Order{\n...\n</code></pre>\n<p>To this:</p>\n<pre><code>@Entity\n@Table(name=`order`)\n@SqlResultSetMappings({\n    @SqlResultSetMapping(\n            name=&quot;myDtoMapping&quot;,\n            classes={\n                    @ConstructorResult(\n                            targetClass=MyDto.class,\n                            columns={\n                                    @ColumnResult(name=&quot;id&quot;, type=Long.class),\n                                    //Other columns...\n                            }\n                    )\n            }\n    ),\n    @SqlResultSetMapping(name=&quot;myDtoMapping.count&quot;, columns=@ColumnResult(name=&quot;cnt&quot;))}\n)\n@NamedNativeQueries({\n    @NamedNativeQuery(name=&quot;Order.findResults&quot;, query=myVariablePointingToQuery, resultSetMapping=&quot;myDtoMapping&quot;),\n    @NamedNativeQuery(name = &quot;Order.findResults.count&quot;, query=myVariablePointingToCOUNTINGQuery, resultSetMapping = &quot;myDtoMapping.count&quot;)\n})\n</code></pre>\n<p>Note that there is a <code>SqlResultSetMapping</code> and <code>@NamedNativeQuery</code> for count now, as well as a custom count query, which <strong>by the way is defined as</strong></p>\n<pre><code>&quot;select count(*) as cnt \\n&quot; //newline is important!\n</code></pre>\n<p><strong>because even with a trailing space, the query comes out to &quot;select count(*) as cntfrom&quot;. A bug.</strong></p>\n<p>But now everything works!</p>\n"}],"owner":{"account_id":6810032,"reputation":595,"user_id":6837405,"accept_rate":73,"display_name":"Busman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":387,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":68731486,"answer_count":1,"score":1,"last_activity_date":1695739262,"creation_date":1628608479,"question_id":68729380,"body_markdown":"At great peril, I am trying to combine the use of a native query, @SqlResultSetMapper + non-entity POJO (MyDto), and a repository method that takes a Pageable as a param and returns Page&lt;MyDto&gt;. After overcoming a number of hurdles, it&#39;s almost working:\r\n\r\n - My entity class is called `Order`, as is the database table \r\n - My DTO class, to which I am mapping the results of the query, is `MyDto`\r\n - My repository is defined as `public interface MyRepository extends JpaRepository&lt;Order, Long&gt;`\r\n \r\nIn my repository, if I use:\r\n`List&lt;MyDto&gt; findResults(Pageable page)` I get a list of 1 page of results; everything works fine.\r\n\r\nHowever, if I use:\r\n`Page&lt;MyDto&gt; findResults(Pageable page)`, this happens:\r\n\r\n     Error occurred while processing the request: org.springframework.dao.InvalidDataAccessApiUsageException: \r\n    org.hibernate.QueryException: unexpected char: &#39;`&#39; [select count(o) from `order` o ...\r\n\r\n(the query continues after &quot;...&quot; and there are no backticks anywhere else in it)\r\n\r\n**Returning `Page` causes Hibernate to generate a query it can&#39;t parse\r\n   (but should be able to)**\r\n\r\nI don&#39;t think it&#39;s worth it to supply the @NamedNativeQuery stuff because it works and doesn&#39;t impact how returning Page causes this count query to generate. I&#39;m inclined to think this a Hibernate bug, but am hoping there is a work-around.\r\n\r\nHow can I fix this? The backticks are *necessary*, as `order` is a MySQL keyword, and even if they weren&#39;t, I fail to see why it can&#39;t parse it (especially **because it generated it**).","title":"Count query generated by returning Page&lt;&gt; from Repository method crashes on org.hibernate.QueryException: unexpected char: &#39;`&#39;","body":"<p>At great peril, I am trying to combine the use of a native query, @SqlResultSetMapper + non-entity POJO (MyDto), and a repository method that takes a Pageable as a param and returns Page. After overcoming a number of hurdles, it's almost working:</p>\n<ul>\n<li>My entity class is called <code>Order</code>, as is the database table</li>\n<li>My DTO class, to which I am mapping the results of the query, is <code>MyDto</code></li>\n<li>My repository is defined as <code>public interface MyRepository extends JpaRepository&lt;Order, Long&gt;</code></li>\n</ul>\n<p>In my repository, if I use:\n<code>List&lt;MyDto&gt; findResults(Pageable page)</code> I get a list of 1 page of results; everything works fine.</p>\n<p>However, if I use:\n<code>Page&lt;MyDto&gt; findResults(Pageable page)</code>, this happens:</p>\n<pre><code> Error occurred while processing the request: org.springframework.dao.InvalidDataAccessApiUsageException: \norg.hibernate.QueryException: unexpected char: '`' [select count(o) from `order` o ...\n</code></pre>\n<p>(the query continues after &quot;...&quot; and there are no backticks anywhere else in it)</p>\n<p><strong>Returning <code>Page</code> causes Hibernate to generate a query it can't parse\n(but should be able to)</strong></p>\n<p>I don't think it's worth it to supply the @NamedNativeQuery stuff because it works and doesn't impact how returning Page causes this count query to generate. I'm inclined to think this a Hibernate bug, but am hoping there is a work-around.</p>\n<p>How can I fix this? The backticks are <em>necessary</em>, as <code>order</code> is a MySQL keyword, and even if they weren't, I fail to see why it can't parse it (especially <strong>because it generated it</strong>).</p>\n"},{"tags":["java","intellij-idea","intellij-13","lombok"],"comments":[{"owner":{"account_id":1522669,"reputation":11674,"user_id":1421925,"accept_rate":90,"display_name":"Magnilex"},"score":0,"creation_date":1429256715,"post_id":29692777,"comment_id":47522849,"body_markdown":"Have you installed the lombok plugin for IDEA? https://plugins.jetbrains.com/plugin/6317","body":"Have you installed the lombok plugin for IDEA? <a href=\"https://plugins.jetbrains.com/plugin/6317\" rel=\"nofollow noreferrer\">plugins.jetbrains.com/plugin/6317</a>"},{"owner":{"account_id":1484020,"reputation":1311,"user_id":1392655,"accept_rate":69,"display_name":"Khiem-Kim Ho Xuan"},"score":1,"creation_date":1429258311,"post_id":29692777,"comment_id":47523830,"body_markdown":"jupp. the latest one","body":"jupp. the latest one"},{"owner":{"account_id":1522669,"reputation":11674,"user_id":1421925,"accept_rate":90,"display_name":"Magnilex"},"score":0,"creation_date":1429258634,"post_id":29692777,"comment_id":47524031,"body_markdown":"Are you using Maven? Have you made sure that the jar is on the classpath?","body":"Are you using Maven? Have you made sure that the jar is on the classpath?"},{"owner":{"account_id":1591602,"reputation":3575,"user_id":1474815,"accept_rate":0,"display_name":"Paulo Pedroso"},"score":1,"creation_date":1439582094,"post_id":29692777,"comment_id":51937910,"body_markdown":"Have you solved it already? It&#39;s happening to me too.","body":"Have you solved it already? It&#39;s happening to me too."}],"answers":[{"tags":[],"owner":{"account_id":373461,"reputation":129,"user_id":3485639,"display_name":"dugsmith"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1451428828,"creation_date":1451428828,"answer_id":34520234,"question_id":29692777,"body_markdown":"I was having a similar issue, but resolved it by upgrading to IDEA 15.0.2 and Lombok plugin 0.9.6.14. I had to restart IDEA several times before all of the getters/setters generated by Lombok were resolved. \r\n\r\nI also found [this related answer](https://stackoverflow.com/a/27430992/3485639), but it didn&#39;t seem to help my problem. It may help you if upgrading does not.","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>I was having a similar issue, but resolved it by upgrading to IDEA 15.0.2 and Lombok plugin 0.9.6.14. I had to restart IDEA several times before all of the getters/setters generated by Lombok were resolved. </p>\n\n<p>I also found <a href=\"https://stackoverflow.com/a/27430992/3485639\">this related answer</a>, but it didn't seem to help my problem. It may help you if upgrading does not.</p>\n"},{"comments":[{"owner":{"account_id":3119220,"reputation":521,"user_id":2639357,"accept_rate":40,"display_name":"Chry007"},"score":0,"creation_date":1538032998,"post_id":36188028,"comment_id":92002421,"body_markdown":"If i do this, Lombok works, but aspectJ doesn&#39;t. Am I missing something?","body":"If i do this, Lombok works, but aspectJ doesn&#39;t. Am I missing something?"},{"owner":{"account_id":6806166,"reputation":5412,"user_id":5237806,"accept_rate":24,"display_name":"chenchuk"},"score":0,"creation_date":1565463189,"post_id":36188028,"comment_id":101365763,"body_markdown":"did that, but i also had to (obviously) install lombok plugin.","body":"did that, but i also had to (obviously) install lombok plugin."},{"owner":{"account_id":6586753,"reputation":333,"user_id":5089312,"display_name":"prashant kute"},"score":3,"creation_date":1636542165,"post_id":36188028,"comment_id":123582936,"body_markdown":"not working for me , having same error :java: cannot find symbol\n  symbol: class __","body":"not working for me , having same error :java: cannot find symbol   symbol: class __"},{"owner":{"account_id":12232652,"reputation":4002,"user_id":8930395,"display_name":"LOrD_ARaGOrN"},"score":0,"creation_date":1653051142,"post_id":36188028,"comment_id":127762780,"body_markdown":"@prashantkute are you able to fix your issue. i am also facing the same","body":"@prashantkute are you able to fix your issue. i am also facing the same"}],"tags":[],"owner":{"account_id":2567388,"reputation":1842,"user_id":2227064,"accept_rate":50,"display_name":"Vegard"},"comment_count":4,"down_vote_count":0,"up_vote_count":11,"is_accepted":true,"score":11,"last_activity_date":1458764692,"creation_date":1458764692,"answer_id":36188028,"question_id":29692777,"body_markdown":"Kind of old question here, but I came across the same problem today. I had to do two things to make it work:\r\n\r\n 1. Set annotation processing on: `Settings -&gt; Compiler -&gt; Annotation\r\n    Processors`  \r\n 2. Change from ajc to javac for the project: `Compiler -&gt; Java Compiler`\r\n\r\nyou of course also need the Lombok plugin.","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>Kind of old question here, but I came across the same problem today. I had to do two things to make it work:</p>\n\n<ol>\n<li>Set annotation processing on: <code>Settings -&gt; Compiler -&gt; Annotation\nProcessors</code>  </li>\n<li>Change from ajc to javac for the project: <code>Compiler -&gt; Java Compiler</code></li>\n</ol>\n\n<p>you of course also need the Lombok plugin.</p>\n"},{"tags":[],"owner":{"account_id":14814685,"reputation":406,"user_id":10699128,"display_name":"komidawi"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1608218093,"creation_date":1608218093,"answer_id":65343407,"question_id":29692777,"body_markdown":"In my case apart from enabling Annotation Processing and installing Lombok Plugin I had to rebuild project by **Build -&gt; Rebuild Project**","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>In my case apart from enabling Annotation Processing and installing Lombok Plugin I had to rebuild project by <strong>Build -&gt; Rebuild Project</strong></p>\n"},{"tags":[],"owner":{"account_id":14493854,"reputation":859,"user_id":10529573,"display_name":"Mike Menko"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1643482798,"creation_date":1643482798,"answer_id":70908761,"question_id":29692777,"body_markdown":"In my case non of methods works. But I found solution for my case.\r\nI needed to add to my Gradle dependencies list of\r\n\r\n    dependencies {\r\n        compileOnly &#39;org.projectlombok:lombok:1.18.22&#39;\r\n    }\r\none more line \r\n\r\n    dependencies {\r\n        compileOnly &#39;org.projectlombok:lombok:1.18.22&#39;\r\n        annotationProcessor &#39;org.projectlombok:lombok:1.18.22&#39;\r\n    }\r\n\r\nWith such combination you even don&#39;t need enabling *Annotation Processors* from @Vegard answer.","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>In my case non of methods works. But I found solution for my case.\nI needed to add to my Gradle dependencies list of</p>\n<pre><code>dependencies {\n    compileOnly 'org.projectlombok:lombok:1.18.22'\n}\n</code></pre>\n<p>one more line</p>\n<pre><code>dependencies {\n    compileOnly 'org.projectlombok:lombok:1.18.22'\n    annotationProcessor 'org.projectlombok:lombok:1.18.22'\n}\n</code></pre>\n<p>With such combination you even don't need enabling <em>Annotation Processors</em> from @Vegard answer.</p>\n"},{"tags":[],"owner":{"account_id":7673063,"reputation":1,"user_id":5814679,"display_name":"Lotes Silva"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1658425584,"creation_date":1658425584,"answer_id":73070641,"question_id":29692777,"body_markdown":"If you use intellij Idea go to setting and add Lombok plugin to your intellij idea\r\n\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/0QdZn.png","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>If you use intellij Idea go to setting and add Lombok plugin to your intellij idea</p>\n<p><a href=\"https://i.stack.imgur.com/0QdZn.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":[],"owner":{"account_id":19097304,"reputation":11,"user_id":13946305,"display_name":"Jack.Li"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659235505,"creation_date":1659235505,"answer_id":73180344,"question_id":29692777,"body_markdown":"Tried with the @Mike&#39;s solution above, and it works.\r\nFor your information, even though I enabled the **Annotation Processors** , but it seems like not working.\r\nAfter I added the **annotationProcessor &#39;org.projectlombok:lombok:1.18.22&#39;**\r\nit was built successfully.","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>Tried with the @Mike's solution above, and it works.\nFor your information, even though I enabled the <strong>Annotation Processors</strong> , but it seems like not working.\nAfter I added the <strong>annotationProcessor 'org.projectlombok:lombok:1.18.22'</strong>\nit was built successfully.</p>\n"},{"comments":[{"owner":{"account_id":26149544,"reputation":31,"user_id":19837698,"display_name":"howgenius"},"score":0,"creation_date":1661346808,"post_id":73473329,"comment_id":129750232,"body_markdown":"Gracias, I won it&#39;s troubble with replaced my project at Default in Settings -&gt; Build -&gt; Annotation Processors and it works. Thanks!","body":"Gracias, I won it&#39;s troubble with replaced my project at Default in Settings -&gt; Build -&gt; Annotation Processors and it works. Thanks!"}],"tags":[],"owner":{"account_id":26149544,"reputation":31,"user_id":19837698,"display_name":"howgenius"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1661344713,"creation_date":1661344681,"answer_id":73473329,"question_id":29692777,"body_markdown":"I have the same problem. Using **maven**, after I add at to my pom.xml  **annotationProcessor** nothing changed. Also I&#39;m installed Lombok plugin at Intelij IDEA. \r\n\r\n    &lt;annotationProcessorPaths&gt;\r\n        &lt;path&gt;\r\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n            &lt;version&gt;1.18.20&lt;/version&gt;\r\n        &lt;/path&gt;\r\n    &lt;/annotationProcessorPaths&gt;","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>I have the same problem. Using <strong>maven</strong>, after I add at to my pom.xml  <strong>annotationProcessor</strong> nothing changed. Also I'm installed Lombok plugin at Intelij IDEA.</p>\n<pre><code>&lt;annotationProcessorPaths&gt;\n    &lt;path&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;version&gt;1.18.20&lt;/version&gt;\n    &lt;/path&gt;\n&lt;/annotationProcessorPaths&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8497210,"reputation":173,"user_id":6371453,"display_name":"Caranown"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1665257480,"creation_date":1665257480,"answer_id":73999985,"question_id":29692777,"body_markdown":"I solved this in my Gradle project by including the Lombok plugin. \r\nNo dependencies or annotationProcessor needed (nor did those work for me).\r\n\r\nFor example in your `build.gradle.kts`:\r\n```kotlin\r\nplugins {\r\n    id(&quot;io.freefair.lombok&quot;) version &quot;6.5.1&quot;\r\n}\r\n```\r\n\r\nhttps://plugins.gradle.org/plugin/io.freefair.lombok","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>I solved this in my Gradle project by including the Lombok plugin.\nNo dependencies or annotationProcessor needed (nor did those work for me).</p>\n<p>For example in your <code>build.gradle.kts</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;io.freefair.lombok&quot;) version &quot;6.5.1&quot;\n}\n</code></pre>\n<p><a href=\"https://plugins.gradle.org/plugin/io.freefair.lombok\" rel=\"nofollow noreferrer\">https://plugins.gradle.org/plugin/io.freefair.lombok</a></p>\n"},{"tags":[],"owner":{"account_id":7929817,"reputation":46,"user_id":17205238,"display_name":"manrodriguezf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1695739091,"creation_date":1695739091,"answer_id":77181026,"question_id":29692777,"body_markdown":"The aforementioned solutions work perfectly, although there&#39;s another instance where Lombok annotation processing can fail:\r\n\r\nIn Gradle or Maven you can pass an argument/flag to prevent annotation processing:\r\n```\r\n-proc:none\r\n```\r\nHope this helps someone.\r\n\r\nReference: https://github.com/projectlombok/lombok/issues/1449","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>The aforementioned solutions work perfectly, although there's another instance where Lombok annotation processing can fail:</p>\n<p>In Gradle or Maven you can pass an argument/flag to prevent annotation processing:</p>\n<pre><code>-proc:none\n</code></pre>\n<p>Hope this helps someone.</p>\n<p>Reference: <a href=\"https://github.com/projectlombok/lombok/issues/1449\" rel=\"nofollow noreferrer\">https://github.com/projectlombok/lombok/issues/1449</a></p>\n"}],"owner":{"account_id":1484020,"reputation":1311,"user_id":1392655,"accept_rate":69,"display_name":"Khiem-Kim Ho Xuan"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36003,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":36188028,"answer_count":9,"score":18,"last_activity_date":1695739091,"creation_date":1429255307,"question_id":29692777,"body_markdown":"I have tried using Lombok on Intellij IDEA 13 Ultimate.\r\nHowever. I get the famous error &quot;cannot find symbol&quot; for all the methods that should have been available when I am using specific annotations for example the once I use as annotations are `@Builder`, `@AllArgsConstructor` and `@Data`.\r\n\r\n\r\nI have already set my compiler to enable annotation processing and I have looked deeply into it, but with no solution of how to solve it.\r\n\r\nAny advice or tips would be nice.","title":"Lombok with IDEA 13: Cannot find symbol","body":"<p>I have tried using Lombok on Intellij IDEA 13 Ultimate.\nHowever. I get the famous error \"cannot find symbol\" for all the methods that should have been available when I am using specific annotations for example the once I use as annotations are <code>@Builder</code>, <code>@AllArgsConstructor</code> and <code>@Data</code>.</p>\n\n<p>I have already set my compiler to enable annotation processing and I have looked deeply into it, but with no solution of how to solve it.</p>\n\n<p>Any advice or tips would be nice.</p>\n"},{"tags":["java","random","arraylist"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1695737894,"post_id":77180857,"comment_id":136062661,"body_markdown":"Please, [post your code as well formatted text, not as an image](https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors).","body":"Please, <a href=\"https://meta.stackoverflow.com/questions/285551/why-should-i-not-upload-images-of-code-data-errors\">post your code as well formatted text, not as an image</a>."},{"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"score":0,"creation_date":1695752401,"post_id":77180857,"comment_id":136065601,"body_markdown":"just do `Collections.shuffle(list)` once.  Then iterate thru the list.  No need to keep shuffling.  Note that doing it this way will not repeat previous shown elements.","body":"just do <code>Collections.shuffle(list)</code> once.  Then iterate thru the list.  No need to keep shuffling.  Note that doing it this way will not repeat previous shown elements."}],"answers":[{"tags":[],"owner":{"account_id":23220522,"reputation":28,"user_id":17312822,"display_name":"Romario"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1695738510,"creation_date":1695738022,"answer_id":77180894,"question_id":77180857,"body_markdown":"You need to obtain random integer number and then use it as an index to get from list.\r\n\r\nTry this sample:\r\n\r\n    int randomIndex = rand.nextInt(0, list.size());\r\n    System.out.println(list.get(randomIndex));\r\n\r\ninstead of your &quot;for&quot; cycle\r\n\r\nSome explanation for newcomer:\r\n***nextInt*** method will return some random integer number from 0 (index cannot be less then 0) to ***list.size()*** number exclusively (counting starts with 0, so if you have 3 elements, the third element will be at index 2) to prevent IndexOutOfBoundException.\r\n","title":"how do i change this to be able to generate a random item from my list?","body":"<p>You need to obtain random integer number and then use it as an index to get from list.</p>\n<p>Try this sample:</p>\n<pre><code>int randomIndex = rand.nextInt(0, list.size());\nSystem.out.println(list.get(randomIndex));\n</code></pre>\n<p>instead of your &quot;for&quot; cycle</p>\n<p>Some explanation for newcomer:\n<em><strong>nextInt</strong></em> method will return some random integer number from 0 (index cannot be less then 0) to <em><strong>list.size()</strong></em> number exclusively (counting starts with 0, so if you have 3 elements, the third element will be at index 2) to prevent IndexOutOfBoundException.</p>\n"}],"owner":{"account_id":29539294,"reputation":3,"user_id":22638313,"display_name":"jensennaa"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":4,"up_vote_count":0,"closed_date":1695738077,"accepted_answer_id":77180894,"answer_count":1,"score":-4,"last_activity_date":1695738510,"creation_date":1695737746,"question_id":77180857,"body_markdown":"[my list containing fruits](https://i.stack.imgur.com/7D4AR.png)\r\n\r\n\r\ni&#39;d like for the code to pick (At random) a fruit from my list and then display it.\r\n\r\n\r\nthe code works currently but doesn&#39;t have the random function i&#39;d like for it to have. \r\nThis is a school project so any help is appreciated","title":"how do i change this to be able to generate a random item from my list?","body":"<p><a href=\"https://i.stack.imgur.com/7D4AR.png\" rel=\"nofollow noreferrer\">my list containing fruits</a></p>\n<p>i'd like for the code to pick (At random) a fruit from my list and then display it.</p>\n<p>the code works currently but doesn't have the random function i'd like for it to have.\nThis is a school project so any help is appreciated</p>\n"},{"tags":["java","callback"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":5,"creation_date":1695678107,"post_id":77175832,"comment_id":136053936,"body_markdown":"It does&#39;t matter, so long as it&#39;s documented - the recipient then becomes responsible for managing it based on their needs and context","body":"It does&#39;t matter, so long as it&#39;s documented - the recipient then becomes responsible for managing it based on their needs and context"},{"owner":{"account_id":1404803,"reputation":573,"user_id":1332811,"display_name":"leros"},"score":0,"creation_date":1695758742,"post_id":77175832,"comment_id":136066683,"body_markdown":"That makes sense. I&#39;ve decided for now to have a separate ExcutorService for handling the callbacks.","body":"That makes sense. I&#39;ve decided for now to have a separate ExcutorService for handling the callbacks."}],"answers":[{"comments":[{"owner":{"account_id":1404803,"reputation":573,"user_id":1332811,"display_name":"leros"},"score":0,"creation_date":1695765751,"post_id":77180114,"comment_id":136067684,"body_markdown":"That makes sense for complete flexibility. For now, I&#39;m going to have a separate ExecutorService for callbacks to execute on.","body":"That makes sense for complete flexibility. For now, I&#39;m going to have a separate ExecutorService for callbacks to execute on."}],"tags":[],"owner":{"account_id":9376049,"reputation":3355,"user_id":7643517,"display_name":"Nolequen"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1695738348,"creation_date":1695731980,"answer_id":77180114,"question_id":77175832,"body_markdown":"In my opinion, the best approach would be to provide the client with both options: with an Executor specified for the callback and without it, similar to how it&#39;s done in [CompletableStage][1]:\r\n\r\n    public CompletionStage&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action); // executes action on internal default executor\r\n\r\n    public CompletionStage&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action, Executor executor); // executes action on provided executor\r\n\r\nThis way, the client can choose which approach is more convenient for their use case.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html","title":"What thread should callbacks occur on in Java?","body":"<p>In my opinion, the best approach would be to provide the client with both options: with an Executor specified for the callback and without it, similar to how it's done in <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/CompletionStage.html\" rel=\"nofollow noreferrer\">CompletableStage</a>:</p>\n<pre><code>public CompletionStage&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action); // executes action on internal default executor\n\npublic CompletionStage&lt;Void&gt; thenAcceptAsync(Consumer&lt;? super T&gt; action, Executor executor); // executes action on provided executor\n</code></pre>\n<p>This way, the client can choose which approach is more convenient for their use case.</p>\n"}],"owner":{"account_id":1404803,"reputation":573,"user_id":1332811,"display_name":"leros"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":43,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1695738348,"creation_date":1695677747,"question_id":77175832,"body_markdown":"I&#39;m developing a Java library that runs a scheduled task in a ScheduledExecutorService. If the user specifies callback(s), then after that task, those callback(s) will be invoked. \r\n\r\nRight now I just have the scheduler thread invoking the callbacks. Should those callbacks execute in their own ExecutorService in their own thread pool? ","title":"What thread should callbacks occur on in Java?","body":"<p>I'm developing a Java library that runs a scheduled task in a ScheduledExecutorService. If the user specifies callback(s), then after that task, those callback(s) will be invoked.</p>\n<p>Right now I just have the scheduler thread invoking the callbacks. Should those callbacks execute in their own ExecutorService in their own thread pool?</p>\n"},{"tags":["java","spring-boot","jackson","gson"],"comments":[{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":1,"creation_date":1695654438,"post_id":77173564,"comment_id":136050031,"body_markdown":"No annotation needed, this generally works out of the box. When you say &quot;but as regards the contained fields, for obvious reasons, I do not obtain the respective subclasses&quot;, what *exactly* happens? Error message? No value? Something else?","body":"No annotation needed, this generally works out of the box. When you say &quot;but as regards the contained fields, for obvious reasons, I do not obtain the respective subclasses&quot;, what <i>exactly</i> happens? Error message? No value? Something else?"},{"owner":{"account_id":18576326,"reputation":309,"user_id":13536910,"display_name":"Luca Scandroglio"},"score":0,"creation_date":1695654869,"post_id":77173564,"comment_id":136050124,"body_markdown":"i get a LinkedHashMap instead my CustomClass, and then i get error 500 when i try to invoke his methods.","body":"i get a LinkedHashMap instead my CustomClass, and then i get error 500 when i try to invoke his methods."},{"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"score":0,"creation_date":1695655019,"post_id":77173564,"comment_id":136050163,"body_markdown":"What are you talking about? I don&#39;t see a `CustomClass` in your example. And you *can&#39;t* get a `Map`, because that doesn&#39;t fit in the `CustomForm` class. Please add the code that does the deserialization and add details about what actually happens when you run it.","body":"What are you talking about? I don&#39;t see a <code>CustomClass</code> in your example. And you <i>can&#39;t</i> get a <code>Map</code>, because that doesn&#39;t fit in the <code>CustomForm</code> class. Please add the code that does the deserialization and add details about what actually happens when you run it."},{"owner":{"account_id":18576326,"reputation":309,"user_id":13536910,"display_name":"Luca Scandroglio"},"score":0,"creation_date":1695655737,"post_id":77173564,"comment_id":136050327,"body_markdown":"Sorry, I didn&#39;t explain well. When I invoke the getter method of the `CustomInfo info` property, I get `null`, but in the request that property is set.","body":"Sorry, I didn&#39;t explain well. When I invoke the getter method of the <code>CustomInfo info</code> property, I get <code>null</code>, but in the request that property is set."},{"owner":{"account_id":2073393,"reputation":2457,"user_id":1847378,"display_name":"AndrewL"},"score":1,"creation_date":1695684667,"post_id":77173564,"comment_id":136054562,"body_markdown":"What serialization library are you using? You have tagged your question with both Jackson and Gson.  If you are using Jackson then take a look at @JsonTypeInfo e.g. here https://www.baeldung.com/java-jackson-polymorphic-deserialization","body":"What serialization library are you using? You have tagged your question with both Jackson and Gson.  If you are using Jackson then take a look at @JsonTypeInfo e.g. here <a href=\"https://www.baeldung.com/java-jackson-polymorphic-deserialization\" rel=\"nofollow noreferrer\">baeldung.com/java-jackson-polymorphic-deserialization</a>"}],"answers":[{"tags":[],"owner":{"account_id":18576326,"reputation":309,"user_id":13536910,"display_name":"Luca Scandroglio"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1695738282,"creation_date":1695738282,"answer_id":77180933,"question_id":77173564,"body_markdown":"Solved.\r\n\r\nThis constructor do the trick.\r\n\r\n    @JsonCreator\r\n    public CustomForm(\r\n            @JsonProperty(&quot;formid&quot;) String formId,\r\n            @JsonProperty(&quot;info&quot;) CustomInfo info,\r\n            @JsonProperty(&quot;items&quot;) List&lt;CustomItem&gt; items,\r\n            @JsonProperty(&quot;linkedSheetId&quot;) String linkedSheetId,\r\n            @JsonProperty(&quot;responderUri&quot;) String responderUri,\r\n            @JsonProperty(&quot;revisionId&quot;) String revisionId,\r\n            @JsonProperty(&quot;settings&quot;) FormSettings settings\r\n    ){\r\n        this.formId = formId;\r\n        this.info = info;\r\n        this.items = items;\r\n        this.linkedSheetId = linkedSheetId;\r\n        this.responderUri = responderUri;\r\n        this.revisionId = revisionId;\r\n        this.settings = settings;\r\n    }","title":"Deserialize nested classes of a request in Spring Boot","body":"<p>Solved.</p>\n<p>This constructor do the trick.</p>\n<pre><code>@JsonCreator\npublic CustomForm(\n        @JsonProperty(&quot;formid&quot;) String formId,\n        @JsonProperty(&quot;info&quot;) CustomInfo info,\n        @JsonProperty(&quot;items&quot;) List&lt;CustomItem&gt; items,\n        @JsonProperty(&quot;linkedSheetId&quot;) String linkedSheetId,\n        @JsonProperty(&quot;responderUri&quot;) String responderUri,\n        @JsonProperty(&quot;revisionId&quot;) String revisionId,\n        @JsonProperty(&quot;settings&quot;) FormSettings settings\n){\n    this.formId = formId;\n    this.info = info;\n    this.items = items;\n    this.linkedSheetId = linkedSheetId;\n    this.responderUri = responderUri;\n    this.revisionId = revisionId;\n    this.settings = settings;\n}\n</code></pre>\n"}],"owner":{"account_id":18576326,"reputation":309,"user_id":13536910,"display_name":"Luca Scandroglio"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":44,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":77180933,"answer_count":1,"score":-1,"last_activity_date":1695738282,"creation_date":1695652375,"question_id":77173564,"body_markdown":"I have a problem with the deserialization of a request, which should translate into a java class with properties inside which are themselves other classes. The first level of deserialization works, but as regards the contained fields, for obvious reasons, I do not obtain the respective subclasses.\r\n\r\nThis is my code:\r\n\r\n    @Getter\r\n    @Setter\r\n    @NoArgsConstructor\r\n    @AllArgsConstructor\r\n    \r\n    public class CustomForm extends GenericJson {\r\n    \r\n        private String formId;\r\n    \r\n        private CustomInfo info;\r\n    \r\n    \r\n        private List&lt;CustomItem&gt; items = new ArrayList&lt;&gt;();\r\n        \r\n        \r\n        private String linkedSheetId;\r\n        \r\n        \r\n        private String responderUri;\r\n        \r\n        \r\n        private String revisionId;\r\n        \r\n        \r\n        private FormSettings settings;\r\n    \r\n        public CustomForm(Form form){\r\n            BeanUtils.copyProperties(form, this);\r\n            if(form.getInfo() != null){\r\n                this.info = new CustomInfo(form.getInfo());\r\n            }\r\n            if(form.getItems() != null){\r\n                for(Item item:form.getItems()){\r\n                    this.items.add(new CustomItem(item));\r\n                }\r\n            }\r\n        }\r\n    \r\n        public Form getForm(){\r\n            Form form = new Form();\r\n            BeanUtils.copyProperties(this, form);\r\n            List&lt;Item&gt; items = new ArrayList&lt;&gt;();\r\n            for(CustomItem item:this.items){\r\n                items.add(item.getItem());\r\n            }\r\n            form.setItems(items);\r\n            if(!this.info.isEmpty()) {\r\n                form.setInfo(this.info.getInfo());\r\n            }\r\n            return form;\r\n        }\r\n    }\r\n\r\nand this is my request:\r\n\r\n    {\r\n        &quot;formId&quot;: &quot;1234&quot;,\r\n        &quot;info&quot;: {\r\n            &quot;documentTitle&quot;: &quot;Untitled form&quot;,\r\n            &quot;title&quot;: &quot;prova&quot;\r\n        },\r\n        &quot;items&quot;: [\r\n            {\r\n                &quot;itemId&quot;: &quot;123&quot;,\r\n                &quot;questionItem&quot;: {\r\n                    &quot;question&quot;: {\r\n                        &quot;choiceQuestion&quot;: {\r\n                            &quot;options&quot;: [\r\n                                {\r\n                                    &quot;value&quot;: &quot;Newsletter&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;Magazine&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;Social Network&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;Siti&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;Associazioni di categoria&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;Aziende partner&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;Comunicazione interna all\\u0027azienda&quot;\r\n                                }\r\n                            ],\r\n                            &quot;type&quot;: &quot;DROP_DOWN&quot;\r\n                        },\r\n                        &quot;questionId&quot;: &quot;123&quot;\r\n                    }\r\n                },\r\n                &quot;title&quot;: &quot;Come sei venuto a conoscenza di questo Corso?&quot;\r\n            },\r\n            {\r\n                &quot;itemId&quot;: &quot;123&quot;,\r\n                &quot;questionGroupItem&quot;: {\r\n                    &quot;grid&quot;: {\r\n                        &quot;columns&quot;: {\r\n                            &quot;options&quot;: [\r\n                                {\r\n                                    &quot;value&quot;: &quot;PESSIMO&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;MEDIOCRE&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;SUFFICIENTE&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;BUONO&quot;\r\n                                },\r\n                                {\r\n                                    &quot;value&quot;: &quot;OTTIMO&quot;\r\n                                }\r\n                            ],\r\n                            &quot;type&quot;: &quot;RADIO&quot;\r\n                        }\r\n                    },\r\n                    &quot;questions&quot;: [\r\n                        {\r\n                            &quot;questionId&quot;: &quot;123&quot;,\r\n                            &quot;rowQuestion&quot;: {\r\n                                &quot;title&quot;: &quot;Pulizia delle aule&quot;\r\n                            }\r\n                        },\r\n                        {\r\n                            &quot;questionId&quot;: &quot;123&quot;,\r\n                            &quot;rowQuestion&quot;: {\r\n                                &quot;title&quot;: &quot;Materiale fornito&quot;\r\n                            }\r\n                        },\r\n                        {\r\n                            &quot;questionId&quot;: &quot;123&quot;,\r\n                            &quot;rowQuestion&quot;: {\r\n                                &quot;title&quot;: &quot;Competenza docente&quot;\r\n                            }\r\n                        },\r\n                        {\r\n                            &quot;questionId&quot;: &quot;123&quot;,\r\n                            &quot;rowQuestion&quot;: {\r\n                                &quot;title&quot;: &quot;Completezza contenuti&quot;\r\n                            }\r\n                        },\r\n                        {\r\n                            &quot;questionId&quot;: &quot;123&quot;,\r\n                            &quot;rowQuestion&quot;: {\r\n                                &quot;title&quot;: &quot;Applicabilit&#224; delle nozioni&quot;\r\n                            }\r\n                        },\r\n                        {\r\n                            &quot;questionId&quot;: &quot;123&quot;,\r\n                            &quot;rowQuestion&quot;: {\r\n                                &quot;title&quot;: &quot;Rispondenza ad aspettative&quot;\r\n                            }\r\n                        },\r\n                        {\r\n                            &quot;questionId&quot;: &quot;123&quot;,\r\n                            &quot;rowQuestion&quot;: {\r\n                                &quot;title&quot;: &quot;Gentilezza del personale&quot;\r\n                            }\r\n                        }\r\n                    ]\r\n                }\r\n            }\r\n        ],\r\n        &quot;responderUri&quot;: &quot;https://example.om&quot;,\r\n        &quot;revisionId&quot;: &quot;00000005&quot;\r\n    }\r\n\r\nThe question is: is there any annotation that allows me to associate the request fields with their respective nested classes?","title":"Deserialize nested classes of a request in Spring Boot","body":"<p>I have a problem with the deserialization of a request, which should translate into a java class with properties inside which are themselves other classes. The first level of deserialization works, but as regards the contained fields, for obvious reasons, I do not obtain the respective subclasses.</p>\n<p>This is my code:</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\n\npublic class CustomForm extends GenericJson {\n\n    private String formId;\n\n    private CustomInfo info;\n\n\n    private List&lt;CustomItem&gt; items = new ArrayList&lt;&gt;();\n    \n    \n    private String linkedSheetId;\n    \n    \n    private String responderUri;\n    \n    \n    private String revisionId;\n    \n    \n    private FormSettings settings;\n\n    public CustomForm(Form form){\n        BeanUtils.copyProperties(form, this);\n        if(form.getInfo() != null){\n            this.info = new CustomInfo(form.getInfo());\n        }\n        if(form.getItems() != null){\n            for(Item item:form.getItems()){\n                this.items.add(new CustomItem(item));\n            }\n        }\n    }\n\n    public Form getForm(){\n        Form form = new Form();\n        BeanUtils.copyProperties(this, form);\n        List&lt;Item&gt; items = new ArrayList&lt;&gt;();\n        for(CustomItem item:this.items){\n            items.add(item.getItem());\n        }\n        form.setItems(items);\n        if(!this.info.isEmpty()) {\n            form.setInfo(this.info.getInfo());\n        }\n        return form;\n    }\n}\n</code></pre>\n<p>and this is my request:</p>\n<pre><code>{\n    &quot;formId&quot;: &quot;1234&quot;,\n    &quot;info&quot;: {\n        &quot;documentTitle&quot;: &quot;Untitled form&quot;,\n        &quot;title&quot;: &quot;prova&quot;\n    },\n    &quot;items&quot;: [\n        {\n            &quot;itemId&quot;: &quot;123&quot;,\n            &quot;questionItem&quot;: {\n                &quot;question&quot;: {\n                    &quot;choiceQuestion&quot;: {\n                        &quot;options&quot;: [\n                            {\n                                &quot;value&quot;: &quot;Newsletter&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;Magazine&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;Social Network&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;Siti&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;Associazioni di categoria&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;Aziende partner&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;Comunicazione interna all\\u0027azienda&quot;\n                            }\n                        ],\n                        &quot;type&quot;: &quot;DROP_DOWN&quot;\n                    },\n                    &quot;questionId&quot;: &quot;123&quot;\n                }\n            },\n            &quot;title&quot;: &quot;Come sei venuto a conoscenza di questo Corso?&quot;\n        },\n        {\n            &quot;itemId&quot;: &quot;123&quot;,\n            &quot;questionGroupItem&quot;: {\n                &quot;grid&quot;: {\n                    &quot;columns&quot;: {\n                        &quot;options&quot;: [\n                            {\n                                &quot;value&quot;: &quot;PESSIMO&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;MEDIOCRE&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;SUFFICIENTE&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;BUONO&quot;\n                            },\n                            {\n                                &quot;value&quot;: &quot;OTTIMO&quot;\n                            }\n                        ],\n                        &quot;type&quot;: &quot;RADIO&quot;\n                    }\n                },\n                &quot;questions&quot;: [\n                    {\n                        &quot;questionId&quot;: &quot;123&quot;,\n                        &quot;rowQuestion&quot;: {\n                            &quot;title&quot;: &quot;Pulizia delle aule&quot;\n                        }\n                    },\n                    {\n                        &quot;questionId&quot;: &quot;123&quot;,\n                        &quot;rowQuestion&quot;: {\n                            &quot;title&quot;: &quot;Materiale fornito&quot;\n                        }\n                    },\n                    {\n                        &quot;questionId&quot;: &quot;123&quot;,\n                        &quot;rowQuestion&quot;: {\n                            &quot;title&quot;: &quot;Competenza docente&quot;\n                        }\n                    },\n                    {\n                        &quot;questionId&quot;: &quot;123&quot;,\n                        &quot;rowQuestion&quot;: {\n                            &quot;title&quot;: &quot;Completezza contenuti&quot;\n                        }\n                    },\n                    {\n                        &quot;questionId&quot;: &quot;123&quot;,\n                        &quot;rowQuestion&quot;: {\n                            &quot;title&quot;: &quot;Applicabilit delle nozioni&quot;\n                        }\n                    },\n                    {\n                        &quot;questionId&quot;: &quot;123&quot;,\n                        &quot;rowQuestion&quot;: {\n                            &quot;title&quot;: &quot;Rispondenza ad aspettative&quot;\n                        }\n                    },\n                    {\n                        &quot;questionId&quot;: &quot;123&quot;,\n                        &quot;rowQuestion&quot;: {\n                            &quot;title&quot;: &quot;Gentilezza del personale&quot;\n                        }\n                    }\n                ]\n            }\n        }\n    ],\n    &quot;responderUri&quot;: &quot;https://example.om&quot;,\n    &quot;revisionId&quot;: &quot;00000005&quot;\n}\n</code></pre>\n<p>The question is: is there any annotation that allows me to associate the request fields with their respective nested classes?</p>\n"},{"tags":["java","html","swing","jtable"],"comments":[{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695703740,"post_id":77177078,"comment_id":136056073,"body_markdown":"Swing&#39;s html rendering support is stuck a html 3.2(?) or there abouts, so it may simply not support the styles you&#39;re trying to apply","body":"Swing&#39;s html rendering support is stuck a html 3.2(?) or there abouts, so it may simply not support the styles you&#39;re trying to apply"},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1695703940,"post_id":77177078,"comment_id":136056089,"body_markdown":"You might like to also explain why the default behaviour doesn&#39;t work for you, as it seems to produce `...` just fine for me without an additional configuration","body":"You might like to also explain why the default behaviour doesn&#39;t work for you, as it seems to produce <code>...</code> just fine for me without an additional configuration"},{"owner":{"account_id":2281720,"reputation":735,"user_id":2006640,"accept_rate":40,"display_name":"Cherple"},"score":0,"creation_date":1695704511,"post_id":77177078,"comment_id":136056156,"body_markdown":"Hi @MadProgrammer, my code works for you? You&#39;re able to have the header with icon, 2 rows, and ellipsis? When i reduce my column width, instead of ellipsis appearing, it simply clips my text. I&#39;m not sure why either.","body":"Hi @MadProgrammer, my code works for you? You&#39;re able to have the header with icon, 2 rows, and ellipsis? When i reduce my column width, instead of ellipsis appearing, it simply clips my text. I&#39;m not sure why either."},{"owner":{"account_id":969721,"reputation":344527,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":2,"creation_date":1695706073,"post_id":77177078,"comment_id":136056299,"body_markdown":"No, doing nothing works for me - if just use `new JTable(new DefaultTableModel(...))` with no custom renders, when I reduce the column size, the text gets appended with `...` until there&#39;s nothing left but `...`","body":"No, doing nothing works for me - if just use <code>new JTable(new DefaultTableModel(...))</code> with no custom renders, when I reduce the column size, the text gets appended with <code>...</code> until there&#39;s nothing left but <code>...</code>"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":2,"creation_date":1695738110,"post_id":77177078,"comment_id":136062712,"body_markdown":"1) Post an [mre] demonstrating the problem. 2) Maybe use a JPanel as the renderer. You could then created multiple labels to display the text so you don&#39;t need to use HTML.","body":"1) Post an <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> demonstrating the problem. 2) Maybe use a JPanel as the renderer. You could then created multiple labels to display the text so you don&#39;t need to use HTML."}],"owner":{"account_id":2281720,"reputation":735,"user_id":2006640,"accept_rate":40,"display_name":"Cherple"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":33,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1695738124,"creation_date":1695703531,"question_id":77177078,"body_markdown":"I have the following TableCellRenderer, it is able to display the icon and table header in 2 rows, but the problem is when i resize the column smaller, instead of displaying &quot;...&quot; ellipsis, the words simply gets clipped. Is there any way i can have the multi-line and ellipsis at the same time? I set nowrap because if the column becomes too small, the header gets wrapped into 4 or 5 rows which my header is only rendering 2 rows of text.\r\n\r\n    @Override\r\n    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int col) {\r\n    \tif (value instanceof JLabel){\r\n    \t\tJLabel l = (JLabel) value;\r\n    \t\tl.setIcon(icon);\r\n    \t\tl.setText(&quot;&lt;html&gt;&lt;div style=&#39;white-space: nowrap; text-overflow: ellipsis; overflow: hidden;&#39;&gt;My header text &lt;br&gt;is quite long&lt;/div&gt;&lt;html&gt;&quot;);\r\n    \r\n    \t\treturn l;\r\n    \t}\r\n    \treturn value;\r\n    }","title":"JTable header using &lt;html&gt; and &lt;br&gt; tag to show ellipsis when column too small","body":"<p>I have the following TableCellRenderer, it is able to display the icon and table header in 2 rows, but the problem is when i resize the column smaller, instead of displaying &quot;...&quot; ellipsis, the words simply gets clipped. Is there any way i can have the multi-line and ellipsis at the same time? I set nowrap because if the column becomes too small, the header gets wrapped into 4 or 5 rows which my header is only rendering 2 rows of text.</p>\n<pre><code>@Override\npublic Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int col) {\n    if (value instanceof JLabel){\n        JLabel l = (JLabel) value;\n        l.setIcon(icon);\n        l.setText(&quot;&lt;html&gt;&lt;div style='white-space: nowrap; text-overflow: ellipsis; overflow: hidden;'&gt;My header text &lt;br&gt;is quite long&lt;/div&gt;&lt;html&gt;&quot;);\n\n        return l;\n    }\n    return value;\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9973,"page":161,"page_size":100}
