{"items":[{"tags":["java","json","jackson","deserialization"],"comments":[{"owner":{"account_id":2007569,"reputation":8114,"user_id":1797006,"accept_rate":63,"display_name":"Kalle Richter"},"score":0,"creation_date":1520772849,"post_id":6371092,"comment_id":85443981,"body_markdown":"Regarding 2.9 and potentially other versions: I understand the issue https://github.com/FasterXML/jackson-databind/issues/1419 like `Map` serialization with annotated properties simply doesn&#39;t work and Jackson fails with an unrelated error message.","body":"Regarding 2.9 and potentially other versions: I understand the issue <a href=\"https://github.com/FasterXML/jackson-databind/issues/1419\" rel=\"nofollow noreferrer\">github.com/FasterXML/jackson-databind/issues/1419</a> like <code>Map</code> serialization with annotated properties simply doesn&#39;t work and Jackson fails with an unrelated error message."}],"answers":[{"tags":[],"owner":{"account_id":23674,"reputation":114076,"user_id":59501,"accept_rate":75,"display_name":"StaxMan"},"down_vote_count":1,"up_vote_count":33,"is_accepted":true,"score":32,"last_activity_date":1381881699,"creation_date":1308238758,"answer_id":6374578,"question_id":6371092,"body_markdown":"By default, Jackson tries to serialize Java Maps as JSON Objects (key/value pairs), so Map key object must be somehow serialized as a String; and there must be matching (and registered) key deserializer. Default configuration only supports a small set of JDK types (String, numbers, enum).\r\nSo mapper has no idea as to how to take a String and create AutoHandlingSlotKey out of it.\r\n(in fact I am surprised that serializer did not fail for same reason)\r\n\r\nTwo obvious ways to solve this are:\r\n\r\n* Implement and register a &quot;key deserializer&quot;\r\n* Implement and register a custom deserializer for Maps.\r\n\r\nIn your case it is probably easier to do former. You may also want to implement custom key serializer, to ensure keys are serializer in proper format.\r\n\r\nThe easiest way to register serializers and deserializers is by [Module interface][1] that was added in Jackson 1.7 (and extended in 1.8 to support key serializers/deserializers).\r\n\r\n\r\n  [1]: http://wiki.fasterxml.com/JacksonFeatureModules","title":"Can not find a (Map) Key deserializer for type [simple type, class ...]","body":"<p>By default, Jackson tries to serialize Java Maps as JSON Objects (key/value pairs), so Map key object must be somehow serialized as a String; and there must be matching (and registered) key deserializer. Default configuration only supports a small set of JDK types (String, numbers, enum).\nSo mapper has no idea as to how to take a String and create AutoHandlingSlotKey out of it.\n(in fact I am surprised that serializer did not fail for same reason)</p>\n\n<p>Two obvious ways to solve this are:</p>\n\n<ul>\n<li>Implement and register a \"key deserializer\"</li>\n<li>Implement and register a custom deserializer for Maps.</li>\n</ul>\n\n<p>In your case it is probably easier to do former. You may also want to implement custom key serializer, to ensure keys are serializer in proper format.</p>\n\n<p>The easiest way to register serializers and deserializers is by <a href=\"http://wiki.fasterxml.com/JacksonFeatureModules\" rel=\"noreferrer\">Module interface</a> that was added in Jackson 1.7 (and extended in 1.8 to support key serializers/deserializers).</p>\n"},{"tags":[],"owner":{"account_id":3909348,"reputation":693,"user_id":3238681,"display_name":"estebanrv"},"down_vote_count":0,"up_vote_count":50,"is_accepted":false,"score":50,"last_activity_date":1495832239,"creation_date":1495832239,"answer_id":44210009,"question_id":6371092,"body_markdown":"This was asked a long time ago, and is the first google result when looking up the error, but the accepted answer has no code and might be confusing for a jackson beginner (me). I eventually found [this answer][1] that helped.\r\n\r\nSo, as stated in accepted answer, Implementing and register a &quot;key deserializer&quot; is the way to go. You can do this like this.\r\n\r\n    SimpleModule simpleModule = new SimpleModule();\r\n    simpleModule.addKeyDeserializer(YourClass.class, new YourClassKeyDeserializer());\r\n    objectMapper.registerModule(simpleModule);\r\n\r\nAnd for the class, all you have to do is:\r\n\r\n    class YourClassKeyDeserializer extends KeyDeserializer\r\n    {\r\n        @Override\r\n        public Object deserializeKey(final String key, final DeserializationContext ctxt ) throws IOException, JsonProcessingException\r\n        {\r\n            return null; // replace null with your logic\r\n        }\r\n    }\r\n\r\nThat&#39;s it! No annotation on classes, not custom deserializer for maps, etc.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/11246748/deserializing-non-string-map-keys-with-jackson","title":"Can not find a (Map) Key deserializer for type [simple type, class ...]","body":"<p>This was asked a long time ago, and is the first google result when looking up the error, but the accepted answer has no code and might be confusing for a jackson beginner (me). I eventually found <a href=\"https://stackoverflow.com/questions/11246748/deserializing-non-string-map-keys-with-jackson\">this answer</a> that helped.</p>\n\n<p>So, as stated in accepted answer, Implementing and register a \"key deserializer\" is the way to go. You can do this like this.</p>\n\n<pre><code>SimpleModule simpleModule = new SimpleModule();\nsimpleModule.addKeyDeserializer(YourClass.class, new YourClassKeyDeserializer());\nobjectMapper.registerModule(simpleModule);\n</code></pre>\n\n<p>And for the class, all you have to do is:</p>\n\n<pre><code>class YourClassKeyDeserializer extends KeyDeserializer\n{\n    @Override\n    public Object deserializeKey(final String key, final DeserializationContext ctxt ) throws IOException, JsonProcessingException\n    {\n        return null; // replace null with your logic\n    }\n}\n</code></pre>\n\n<p>That's it! No annotation on classes, not custom deserializer for maps, etc.</p>\n"},{"tags":[],"owner":{"account_id":4779952,"reputation":1434,"user_id":3862024,"accept_rate":100,"display_name":"gagarwa"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1631171511,"creation_date":1631171511,"answer_id":69113748,"question_id":6371092,"body_markdown":"Here is a generic Map serializer and deserializer that uses a list of key-value pairs, instead of JSON key-value pairs.\r\n\r\n    [\r\n        {\r\n            &quot;key&quot;: Object,\r\n            &quot;value&quot;: Object\r\n        }...\r\n    ]\r\n\r\n----\r\n    package default;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    import java.util.stream.Collectors;\r\n    \r\n    import com.fasterxml.jackson.core.JsonGenerator;\r\n    import com.fasterxml.jackson.databind.SerializerProvider;\r\n    import com.fasterxml.jackson.databind.ser.impl.MapEntrySerializer;\r\n    import com.fasterxml.jackson.databind.ser.std.MapSerializer;\r\n    import com.fasterxml.jackson.databind.ser.std.StdSerializer;\r\n    \r\n    /**\r\n     * Simple Map Serializer&lt;br&gt;\r\n     * &lt;br&gt;\r\n     * Serializes the map as a list of key-value pairs, instead of as a list of JSON\r\n     * key-value pairs (using the default serializer {@link MapSerializer}).\r\n     *\r\n     * @param &lt;K&gt; the type of keys maintained by the map\r\n     * @param &lt;V&gt; the type of mapped values\r\n     * @author Gitesh Agarwal (gagarwa)\r\n     */\r\n    public class SimpleMapSerializer&lt;K, V&gt; extends StdSerializer&lt;Map&lt;K, V&gt;&gt; {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \t/**\r\n    \t * Default Constructor\r\n    \t */\r\n    \tpublic SimpleMapSerializer() {\r\n    \t\tsuper(Map.class, true);\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic void serialize(Map&lt;K, V&gt; value, JsonGenerator gen, SerializerProvider provider) throws IOException {\r\n    \t\tList&lt;SimpleEntry&lt;K, V&gt;&gt; listValues = value.entrySet()\r\n    \t\t\t\t.stream()\r\n    \t\t\t\t.map(SimpleEntry::new)\r\n    \t\t\t\t.collect(Collectors.toList());\r\n    \r\n    \t\tprovider.defaultSerializeValue(listValues, gen);\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Simple Entry&lt;br&gt;\r\n    \t * &lt;br&gt;\r\n    \t * Intentionally does not implement the {@link Map.Entry} interface, so as not\r\n    \t * to invoke the default serializer {@link MapEntrySerializer}.\r\n    \t *\r\n    \t * @author Gitesh Agarwal (gagarwa)\r\n    \t */\r\n    \tprotected static class SimpleEntry&lt;K, V&gt; {\r\n    \r\n    \t\tprivate K key;\r\n    \r\n    \t\tprivate V value;\r\n    \r\n    \t\t/**\r\n    \t\t * Default Constructor\r\n    \t\t * \r\n    \t\t * @param entry the map entry\r\n    \t\t */\r\n    \t\tpublic SimpleEntry(Map.Entry&lt;K, V&gt; entry) {\r\n    \t\t\tkey = entry.getKey();\r\n    \t\t\tvalue = entry.getValue();\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * @return the key\r\n    \t\t */\r\n    \t\tpublic K getKey() {\r\n    \t\t\treturn key;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * @return the value\r\n    \t\t */\r\n    \t\tpublic V getValue() {\r\n    \t\t\treturn value;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\nIf you don&#39;t want to define a custom serializer everytime.\r\n\r\n    package default;\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import com.fasterxml.jackson.databind.BeanDescription;\r\n    import com.fasterxml.jackson.databind.JsonSerializer;\r\n    import com.fasterxml.jackson.databind.Module;\r\n    import com.fasterxml.jackson.databind.SerializationConfig;\r\n    import com.fasterxml.jackson.databind.module.SimpleModule;\r\n    import com.fasterxml.jackson.databind.ser.BeanSerializerModifier;\r\n    import com.fasterxml.jackson.databind.ser.std.StdKeySerializers;\r\n    import com.fasterxml.jackson.databind.type.MapType;\r\n    import com.ibm.response.SimpleMapSerializer;\r\n    \r\n    /**\r\n     * Map Serializer Modifier\r\n     *\r\n     * @author Gitesh Agarwal (gagarwa)\r\n     */\r\n    @Configuration\r\n    public class MapSerializerModifier extends BeanSerializerModifier {\r\n    \r\n    \t@Override\r\n    \t@SuppressWarnings(&quot;rawtypes&quot;)\r\n    \tpublic JsonSerializer&lt;?&gt; modifyMapSerializer(SerializationConfig config, MapType valueType,\r\n    \t\t\tBeanDescription beanDesc, JsonSerializer&lt;?&gt; serializer) {\r\n    \r\n    \t\tJsonSerializer keySerializer = StdKeySerializers.getStdKeySerializer(config,\r\n    \t\t\t\tvalueType.getKeyType().getRawClass(), false);\r\n    \r\n    \t\tif (keySerializer == null)\r\n    \t\t\treturn new SimpleMapSerializer();\r\n    \r\n    \t\treturn serializer;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Simple Module Builder, including the map serializer modifier.\r\n    \t * \r\n    \t * @return the module\r\n    \t */\r\n    \t@Bean\r\n    \tpublic Module module() {\r\n    \t\tSimpleModule module = new SimpleModule();\r\n    \t\tmodule.setSerializerModifier(new MapSerializerModifier());\r\n    \t\treturn module;\r\n    \t}\r\n    \r\n    }\r\n\r\n------\r\n------\r\nThe deserializer is a little more tricky, because you need to maintain type information for a generic version.\r\n\r\n    package default;\r\n    \r\n    import org.springframework.context.annotation.Bean;\r\n    import org.springframework.context.annotation.Configuration;\r\n    \r\n    import com.fasterxml.jackson.databind.BeanDescription;\r\n    import com.fasterxml.jackson.databind.DeserializationConfig;\r\n    import com.fasterxml.jackson.databind.JsonDeserializer;\r\n    import com.fasterxml.jackson.databind.KeyDeserializer;\r\n    import com.fasterxml.jackson.databind.Module;\r\n    import com.fasterxml.jackson.databind.deser.BeanDeserializerModifier;\r\n    import com.fasterxml.jackson.databind.deser.std.StdKeyDeserializer;\r\n    import com.fasterxml.jackson.databind.module.SimpleModule;\r\n    import com.fasterxml.jackson.databind.type.MapType;\r\n    import com.ibm.request.action.SimpleMapDeserializer;\r\n    \r\n    /**\r\n     * Map Deserializer Modifier\r\n     *\r\n     * @author Gitesh Agarwal (gagarwa)\r\n     */\r\n    @Configuration\r\n    public class MapDeserializerModifier extends BeanDeserializerModifier {\r\n    \r\n    \t@Override\r\n    \t@SuppressWarnings(&quot;rawtypes&quot;)\r\n    \tpublic JsonDeserializer&lt;?&gt; modifyMapDeserializer(DeserializationConfig config, MapType type,\r\n    \t\t\tBeanDescription beanDesc, JsonDeserializer&lt;?&gt; deserializer) {\r\n    \r\n    \t\tKeyDeserializer keyDeserializer = StdKeyDeserializer.forType(type.getKeyType().getRawClass());\r\n    \r\n    \t\tif (keyDeserializer == null)\r\n    \t\t\treturn new SimpleMapDeserializer(type, config.getTypeFactory());\r\n    \r\n    \t\treturn deserializer;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Simple Module Builder, including the map deserializer modifier.\r\n    \t * \r\n    \t * @return the module\r\n    \t */\r\n    \t@Bean\r\n    \tpublic Module module() {\r\n    \t\tSimpleModule module = new SimpleModule();\r\n    \t\tmodule.setDeserializerModifier(new MapDeserializerModifier());\r\n    \t\treturn module;\r\n    \t}\r\n    \r\n    }\r\n-----\r\n\r\n    package default;\r\n    \r\n    package com.ibm.request.action;\r\n\r\n    import java.io.IOException;\r\n    import java.util.HashMap;\r\n    import java.util.List;\r\n    import java.util.Map;\r\n    \r\n    import com.fasterxml.jackson.core.JsonParser;\r\n    import com.fasterxml.jackson.core.JsonProcessingException;\r\n    import com.fasterxml.jackson.databind.DeserializationContext;\r\n    import com.fasterxml.jackson.databind.deser.std.MapDeserializer;\r\n    import com.fasterxml.jackson.databind.deser.std.MapEntryDeserializer;\r\n    import com.fasterxml.jackson.databind.deser.std.StdDeserializer;\r\n    import com.fasterxml.jackson.databind.type.CollectionType;\r\n    import com.fasterxml.jackson.databind.type.MapType;\r\n    import com.fasterxml.jackson.databind.type.TypeFactory;\r\n    \r\n    /**\r\n     * Simple Map Deserializer&lt;br&gt;\r\n     * &lt;br&gt;\r\n     * Deserializes the map from a list of key-value pairs, instead of from a list\r\n     * of JSON key-value pairs (using the default deserializer\r\n     * {@link MapDeserializer}).\r\n     *\r\n     * @param &lt;K&gt; the type of keys maintained by the map\r\n     * @param &lt;V&gt; the type of mapped values\r\n     * @author Gitesh Agarwal (gagarwa)\r\n     */\r\n    public class SimpleMapDeserializer&lt;K, V&gt; extends StdDeserializer&lt;Map&lt;K, V&gt;&gt; {\r\n    \r\n    \tprivate static final long serialVersionUID = 1L;\r\n    \r\n    \tprivate final CollectionType type;\r\n    \r\n    \t/**\r\n    \t * Default Constructor\r\n    \t * \r\n    \t * @param type    the map type (key, value)\r\n    \t * @param factory the type factory, to create the collection type\r\n    \t */\r\n    \tpublic SimpleMapDeserializer(MapType type, TypeFactory factory) {\r\n    \t\tsuper(Map.class);\r\n    \t\tthis.type = factory.constructCollectionType(List.class,\r\n    \t\t\t\tfactory.constructParametricType(SimpleEntry.class, type.getKeyType(), type.getContentType()));\r\n    \t}\r\n    \r\n    \t@Override\r\n    \tpublic Map&lt;K, V&gt; deserialize(JsonParser p, DeserializationContext ctxt)\r\n    \t\t\tthrows IOException, JsonProcessingException {\r\n    \r\n    \t\tList&lt;SimpleEntry&lt;K, V&gt;&gt; listValues = ctxt.readValue(p, type);\r\n    \t\tHashMap&lt;K, V&gt; value = new HashMap&lt;&gt;();\r\n    \r\n    \t\tlistValues.forEach(e -&gt; value.put(e.key, e.value));\r\n    \t\treturn value;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Simple Entry&lt;br&gt;\r\n    \t * &lt;br&gt;\r\n    \t * Intentionally does not implement the {@link Map.Entry} interface, so as not\r\n    \t * to invoke the default deserializer {@link MapEntryDeserializer}.\r\n    \t *\r\n    \t * @author Gitesh Agarwal (gagarwa)\r\n    \t */\r\n    \tprotected static class SimpleEntry&lt;K, V&gt; {\r\n    \r\n    \t\tprivate K key;\r\n    \r\n    \t\tprivate V value;\r\n    \r\n    \t\t/**\r\n    \t\t * Default Constructor\r\n    \t\t */\r\n    \t\tpublic SimpleEntry() {\r\n    \r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * @param key the key\r\n    \t\t */\r\n    \t\tpublic void setKey(K key) {\r\n    \t\t\tthis.key = key;\r\n    \t\t}\r\n    \r\n    \t\t/**\r\n    \t\t * @param value the value\r\n    \t\t */\r\n    \t\tpublic void setValue(V value) {\r\n    \t\t\tthis.value = value;\r\n    \t\t}\r\n    \r\n    \t}\r\n    \r\n    }\r\n\r\n\r\n","title":"Can not find a (Map) Key deserializer for type [simple type, class ...]","body":"<p>Here is a generic Map serializer and deserializer that uses a list of key-value pairs, instead of JSON key-value pairs.</p>\n<pre><code>[\n    {\n        &quot;key&quot;: Object,\n        &quot;value&quot;: Object\n    }...\n]\n</code></pre>\n<hr />\n<pre><code>package default;\n\nimport java.io.IOException;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.stream.Collectors;\n\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.ser.impl.MapEntrySerializer;\nimport com.fasterxml.jackson.databind.ser.std.MapSerializer;\nimport com.fasterxml.jackson.databind.ser.std.StdSerializer;\n\n/**\n * Simple Map Serializer&lt;br&gt;\n * &lt;br&gt;\n * Serializes the map as a list of key-value pairs, instead of as a list of JSON\n * key-value pairs (using the default serializer {@link MapSerializer}).\n *\n * @param &lt;K&gt; the type of keys maintained by the map\n * @param &lt;V&gt; the type of mapped values\n * @author Gitesh Agarwal (gagarwa)\n */\npublic class SimpleMapSerializer&lt;K, V&gt; extends StdSerializer&lt;Map&lt;K, V&gt;&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    /**\n     * Default Constructor\n     */\n    public SimpleMapSerializer() {\n        super(Map.class, true);\n    }\n\n    @Override\n    public void serialize(Map&lt;K, V&gt; value, JsonGenerator gen, SerializerProvider provider) throws IOException {\n        List&lt;SimpleEntry&lt;K, V&gt;&gt; listValues = value.entrySet()\n                .stream()\n                .map(SimpleEntry::new)\n                .collect(Collectors.toList());\n\n        provider.defaultSerializeValue(listValues, gen);\n    }\n\n    /**\n     * Simple Entry&lt;br&gt;\n     * &lt;br&gt;\n     * Intentionally does not implement the {@link Map.Entry} interface, so as not\n     * to invoke the default serializer {@link MapEntrySerializer}.\n     *\n     * @author Gitesh Agarwal (gagarwa)\n     */\n    protected static class SimpleEntry&lt;K, V&gt; {\n\n        private K key;\n\n        private V value;\n\n        /**\n         * Default Constructor\n         * \n         * @param entry the map entry\n         */\n        public SimpleEntry(Map.Entry&lt;K, V&gt; entry) {\n            key = entry.getKey();\n            value = entry.getValue();\n        }\n\n        /**\n         * @return the key\n         */\n        public K getKey() {\n            return key;\n        }\n\n        /**\n         * @return the value\n         */\n        public V getValue() {\n            return value;\n        }\n\n    }\n\n}\n</code></pre>\n<p>If you don't want to define a custom serializer everytime.</p>\n<pre><code>package default;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport com.fasterxml.jackson.databind.BeanDescription;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.Module;\nimport com.fasterxml.jackson.databind.SerializationConfig;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport com.fasterxml.jackson.databind.ser.BeanSerializerModifier;\nimport com.fasterxml.jackson.databind.ser.std.StdKeySerializers;\nimport com.fasterxml.jackson.databind.type.MapType;\nimport com.ibm.response.SimpleMapSerializer;\n\n/**\n * Map Serializer Modifier\n *\n * @author Gitesh Agarwal (gagarwa)\n */\n@Configuration\npublic class MapSerializerModifier extends BeanSerializerModifier {\n\n    @Override\n    @SuppressWarnings(&quot;rawtypes&quot;)\n    public JsonSerializer&lt;?&gt; modifyMapSerializer(SerializationConfig config, MapType valueType,\n            BeanDescription beanDesc, JsonSerializer&lt;?&gt; serializer) {\n\n        JsonSerializer keySerializer = StdKeySerializers.getStdKeySerializer(config,\n                valueType.getKeyType().getRawClass(), false);\n\n        if (keySerializer == null)\n            return new SimpleMapSerializer();\n\n        return serializer;\n    }\n\n    /**\n     * Simple Module Builder, including the map serializer modifier.\n     * \n     * @return the module\n     */\n    @Bean\n    public Module module() {\n        SimpleModule module = new SimpleModule();\n        module.setSerializerModifier(new MapSerializerModifier());\n        return module;\n    }\n\n}\n</code></pre>\n<hr />\n<hr />\n<p>The deserializer is a little more tricky, because you need to maintain type information for a generic version.</p>\n<pre><code>package default;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport com.fasterxml.jackson.databind.BeanDescription;\nimport com.fasterxml.jackson.databind.DeserializationConfig;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport com.fasterxml.jackson.databind.KeyDeserializer;\nimport com.fasterxml.jackson.databind.Module;\nimport com.fasterxml.jackson.databind.deser.BeanDeserializerModifier;\nimport com.fasterxml.jackson.databind.deser.std.StdKeyDeserializer;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport com.fasterxml.jackson.databind.type.MapType;\nimport com.ibm.request.action.SimpleMapDeserializer;\n\n/**\n * Map Deserializer Modifier\n *\n * @author Gitesh Agarwal (gagarwa)\n */\n@Configuration\npublic class MapDeserializerModifier extends BeanDeserializerModifier {\n\n    @Override\n    @SuppressWarnings(&quot;rawtypes&quot;)\n    public JsonDeserializer&lt;?&gt; modifyMapDeserializer(DeserializationConfig config, MapType type,\n            BeanDescription beanDesc, JsonDeserializer&lt;?&gt; deserializer) {\n\n        KeyDeserializer keyDeserializer = StdKeyDeserializer.forType(type.getKeyType().getRawClass());\n\n        if (keyDeserializer == null)\n            return new SimpleMapDeserializer(type, config.getTypeFactory());\n\n        return deserializer;\n    }\n\n    /**\n     * Simple Module Builder, including the map deserializer modifier.\n     * \n     * @return the module\n     */\n    @Bean\n    public Module module() {\n        SimpleModule module = new SimpleModule();\n        module.setDeserializerModifier(new MapDeserializerModifier());\n        return module;\n    }\n\n}\n</code></pre>\n<hr />\n<pre><code>package default;\n\npackage com.ibm.request.action;\n\nimport java.io.IOException;\nimport java.util.HashMap;\nimport java.util.List;\nimport java.util.Map;\n\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.deser.std.MapDeserializer;\nimport com.fasterxml.jackson.databind.deser.std.MapEntryDeserializer;\nimport com.fasterxml.jackson.databind.deser.std.StdDeserializer;\nimport com.fasterxml.jackson.databind.type.CollectionType;\nimport com.fasterxml.jackson.databind.type.MapType;\nimport com.fasterxml.jackson.databind.type.TypeFactory;\n\n/**\n * Simple Map Deserializer&lt;br&gt;\n * &lt;br&gt;\n * Deserializes the map from a list of key-value pairs, instead of from a list\n * of JSON key-value pairs (using the default deserializer\n * {@link MapDeserializer}).\n *\n * @param &lt;K&gt; the type of keys maintained by the map\n * @param &lt;V&gt; the type of mapped values\n * @author Gitesh Agarwal (gagarwa)\n */\npublic class SimpleMapDeserializer&lt;K, V&gt; extends StdDeserializer&lt;Map&lt;K, V&gt;&gt; {\n\n    private static final long serialVersionUID = 1L;\n\n    private final CollectionType type;\n\n    /**\n     * Default Constructor\n     * \n     * @param type    the map type (key, value)\n     * @param factory the type factory, to create the collection type\n     */\n    public SimpleMapDeserializer(MapType type, TypeFactory factory) {\n        super(Map.class);\n        this.type = factory.constructCollectionType(List.class,\n                factory.constructParametricType(SimpleEntry.class, type.getKeyType(), type.getContentType()));\n    }\n\n    @Override\n    public Map&lt;K, V&gt; deserialize(JsonParser p, DeserializationContext ctxt)\n            throws IOException, JsonProcessingException {\n\n        List&lt;SimpleEntry&lt;K, V&gt;&gt; listValues = ctxt.readValue(p, type);\n        HashMap&lt;K, V&gt; value = new HashMap&lt;&gt;();\n\n        listValues.forEach(e -&gt; value.put(e.key, e.value));\n        return value;\n    }\n\n    /**\n     * Simple Entry&lt;br&gt;\n     * &lt;br&gt;\n     * Intentionally does not implement the {@link Map.Entry} interface, so as not\n     * to invoke the default deserializer {@link MapEntryDeserializer}.\n     *\n     * @author Gitesh Agarwal (gagarwa)\n     */\n    protected static class SimpleEntry&lt;K, V&gt; {\n\n        private K key;\n\n        private V value;\n\n        /**\n         * Default Constructor\n         */\n        public SimpleEntry() {\n\n        }\n\n        /**\n         * @param key the key\n         */\n        public void setKey(K key) {\n            this.key = key;\n        }\n\n        /**\n         * @param value the value\n         */\n        public void setValue(V value) {\n            this.value = value;\n        }\n\n    }\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22332834,"reputation":1,"user_id":16553874,"display_name":"Redshift"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1655391029,"creation_date":1655356086,"answer_id":72640741,"question_id":6371092,"body_markdown":"Implementing a String constructor that is compatible with the toString() method is possible as well (optionally @JsonValue on it), although that is only viable for simple classes. That way a local solution can be chosen instead of adding several more classes for (de)serialising.","title":"Can not find a (Map) Key deserializer for type [simple type, class ...]","body":"<p>Implementing a String constructor that is compatible with the toString() method is possible as well (optionally @JsonValue on it), although that is only viable for simple classes. That way a local solution can be chosen instead of adding several more classes for (de)serialising.</p>\n"},{"tags":[],"owner":{"account_id":26105306,"reputation":1,"user_id":19800096,"display_name":"Matrix"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660894898,"creation_date":1660894848,"answer_id":73413380,"question_id":6371092,"body_markdown":"Just override toString() and the constructor。For example:\r\n\r\n    public SysUser(String both) {\r\n        SysUser user = JSONUtil.toBean(both, SysUser.class);\r\n        BeanUtil.copyProperties(user, this); \r\n    }\r\n    \r\n    @Override \r\n    public String toString() {\r\n        return JSONUtil.toJsonStr(this); \r\n    }","title":"Can not find a (Map) Key deserializer for type [simple type, class ...]","body":"<p>Just override toString() and the constructor。For example:</p>\n<pre><code>public SysUser(String both) {\n    SysUser user = JSONUtil.toBean(both, SysUser.class);\n    BeanUtil.copyProperties(user, this); \n}\n\n@Override \npublic String toString() {\n    return JSONUtil.toJsonStr(this); \n}\n</code></pre>\n"}],"owner":{"account_id":124022,"reputation":2327,"user_id":318852,"accept_rate":66,"display_name":"Mick Knutson"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":79931,"favorite_count":0,"down_vote_count":0,"up_vote_count":72,"accepted_answer_id":6374578,"answer_count":5,"score":72,"last_activity_date":1660894898,"creation_date":1308223816,"question_id":6371092,"body_markdown":"I have a domain object that has a Map:\r\n\r\n    private Map&lt;AutoHandlingSlotKey, LinkedHashSet&lt;AutoFunction&gt;&gt; autoHandling;\r\n\r\nWhen I serialize the object, I get this:\r\n\r\n    &quot;autoHandling&quot; : [ &quot;java.util.HashMap&quot;, {\r\n    } ],\r\n\r\n\r\nThis Map&#39;s key is a custom Object:\r\n\r\n    public class AutoHandlingSlotKey implements Serializable {\r\n        private FunctionalArea slot; // ENUM\r\n        private String returnView;   // ENUM\r\n\r\nSo, I am not sure how to correct this exception I keep getting when I deserialize the object:\r\n\r\n    org.codehaus.jackson.map.JsonMappingException: Can not find a (Map) Key deserializer for type [simple type, class com.comcast.ivr.core.domain.AutoHandlingSlotKey]\r\n\r\nHow to correct this issue? I do *not* have access to the domain object to modify.\r\n","title":"Can not find a (Map) Key deserializer for type [simple type, class ...]","body":"<p>I have a domain object that has a Map:</p>\n<pre><code>private Map&lt;AutoHandlingSlotKey, LinkedHashSet&lt;AutoFunction&gt;&gt; autoHandling;\n</code></pre>\n<p>When I serialize the object, I get this:</p>\n<pre><code>&quot;autoHandling&quot; : [ &quot;java.util.HashMap&quot;, {\n} ],\n</code></pre>\n<p>This Map's key is a custom Object:</p>\n<pre><code>public class AutoHandlingSlotKey implements Serializable {\n    private FunctionalArea slot; // ENUM\n    private String returnView;   // ENUM\n</code></pre>\n<p>So, I am not sure how to correct this exception I keep getting when I deserialize the object:</p>\n<pre><code>org.codehaus.jackson.map.JsonMappingException: Can not find a (Map) Key deserializer for type [simple type, class com.comcast.ivr.core.domain.AutoHandlingSlotKey]\n</code></pre>\n<p>How to correct this issue? I do <em>not</em> have access to the domain object to modify.</p>\n"},{"tags":["javascript","java","pdf","xfa"],"owner":{"account_id":23161029,"reputation":67,"user_id":17261677,"display_name":"AurysVrV"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":143,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660894681,"creation_date":1660893337,"question_id":73413128,"body_markdown":"I&#39;m trying to fill a `XFA PDF` using `JavaScript`/`Java`. The PDF is not made by me; I need to download it, fill it and upload back. \r\n\r\nThe PDF has a button for Import XML which does the work just fine, but I want to do it programmatically for my clients. \r\n\r\nIs there any way to execute a JavaScript function inside the PDF or trigger the button event? I&#39;ve tried to embed the `XML` as an attachment, but it doesn&#39;t trigger anything and the data is unchanged…\r\n\r\nThe PDF can be found here: &lt;https://mfinante.gov.ro/documents/2552173/2552377/02_F1103_Buget_individual_2022_07_07_A2.0.125.pdf/ee988bfb-b7bc-8774-29b5-95b0dc94df7e?t=1657200566548&gt;\r\n\r\nAnd a XML example would be: \r\n\r\n    &lt;f1103 d_rec=&quot;0&quot; suma_control=&quot;18332934&quot; luna_r=&quot;01&quot; an=&quot;2025&quot; nume_ip=&quot;dsadsadasd&quot; cui_ip=&quot;17460640&quot; special=&quot;0&quot; tip_bug=&quot;I&quot; an_apr=&quot;2025&quot;&gt;\r\n    \t&lt;f1103_buget cod_sec_bug=&quot;02&quot; cod_prog_bug=&quot;0000000000&quot; cod_sfin=&quot;A&quot; sect=&quot;F&quot;&gt;\r\n    \t\t&lt;f1103_indicator cf_cap=&quot;11&quot; cf_scap=&quot;05&quot; cf_par=&quot;00&quot; ce_titlu=&quot;00&quot; ce_art=&quot;00&quot; ce_alin=&quot;00&quot; cb_an_0=&quot;12312&quot; cb_an_1=&quot;124124&quot; cb_an_2=&quot;423423&quot; cb_an_3=&quot;123&quot; cb_an_ult=&quot;312312&quot; ca_an_0=&quot;0&quot; limita_ca_an_0=&quot;0&quot;/&gt;\r\n    \t&lt;/f1103_buget&gt;\r\n    &lt;/f1103&gt;","title":"Trigger javascript function or event inside a PDF","body":"<p>I'm trying to fill a <code>XFA PDF</code> using <code>JavaScript</code>/<code>Java</code>. The PDF is not made by me; I need to download it, fill it and upload back.</p>\n<p>The PDF has a button for Import XML which does the work just fine, but I want to do it programmatically for my clients.</p>\n<p>Is there any way to execute a JavaScript function inside the PDF or trigger the button event? I've tried to embed the <code>XML</code> as an attachment, but it doesn't trigger anything and the data is unchanged…</p>\n<p>The PDF can be found here: <a href=\"https://mfinante.gov.ro/documents/2552173/2552377/02_F1103_Buget_individual_2022_07_07_A2.0.125.pdf/ee988bfb-b7bc-8774-29b5-95b0dc94df7e?t=1657200566548\" rel=\"nofollow noreferrer\">https://mfinante.gov.ro/documents/2552173/2552377/02_F1103_Buget_individual_2022_07_07_A2.0.125.pdf/ee988bfb-b7bc-8774-29b5-95b0dc94df7e?t=1657200566548</a></p>\n<p>And a XML example would be:</p>\n<pre><code>&lt;f1103 d_rec=&quot;0&quot; suma_control=&quot;18332934&quot; luna_r=&quot;01&quot; an=&quot;2025&quot; nume_ip=&quot;dsadsadasd&quot; cui_ip=&quot;17460640&quot; special=&quot;0&quot; tip_bug=&quot;I&quot; an_apr=&quot;2025&quot;&gt;\n    &lt;f1103_buget cod_sec_bug=&quot;02&quot; cod_prog_bug=&quot;0000000000&quot; cod_sfin=&quot;A&quot; sect=&quot;F&quot;&gt;\n        &lt;f1103_indicator cf_cap=&quot;11&quot; cf_scap=&quot;05&quot; cf_par=&quot;00&quot; ce_titlu=&quot;00&quot; ce_art=&quot;00&quot; ce_alin=&quot;00&quot; cb_an_0=&quot;12312&quot; cb_an_1=&quot;124124&quot; cb_an_2=&quot;423423&quot; cb_an_3=&quot;123&quot; cb_an_ult=&quot;312312&quot; ca_an_0=&quot;0&quot; limita_ca_an_0=&quot;0&quot;/&gt;\n    &lt;/f1103_buget&gt;\n&lt;/f1103&gt;\n</code></pre>\n"},{"tags":["java","mysql","sql","database","hibernate"],"answers":[{"tags":[],"owner":{"account_id":8581686,"reputation":12877,"user_id":6429072,"display_name":"Ed Bangga"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660894527,"creation_date":1660894527,"answer_id":73413325,"question_id":73413253,"body_markdown":"use **EXISTS** keyword\r\n\r\n    SELECT *\r\n    FROM blind b\r\n    LEFT JOIN post_blind pb ON b.id = pb.id\r\n    LEFT JOIN comment_blind cb ON b.id = cb.id\r\n    WHERE b.account_id = 2\r\n    \t and (b.type = &#39;POST&#39; and EXISTS\r\n    \t\t(select is_blind\r\n    \t\tfrom post p\r\n    \t\tright join post_blind pb on p.id = pb.post_id) is true)\r\n    \t\t\tOR (b.type = &#39;COMMENT&#39; \r\n    \t\t\t\tand EXISTS (select is_blind\r\n    \t\t\t\t\t\t\tfrom comment c\r\n    \t\t\t\t\t\t\tright join comment_blind cb on c.id = cb.comment_id)\r\n    \t\t\t\t);","title":"Subquery returns more than 1 row when join","body":"<p>use <strong>EXISTS</strong> keyword</p>\n<pre><code>SELECT *\nFROM blind b\nLEFT JOIN post_blind pb ON b.id = pb.id\nLEFT JOIN comment_blind cb ON b.id = cb.id\nWHERE b.account_id = 2\n     and (b.type = 'POST' and EXISTS\n        (select is_blind\n        from post p\n        right join post_blind pb on p.id = pb.post_id) is true)\n            OR (b.type = 'COMMENT' \n                and EXISTS (select is_blind\n                            from comment c\n                            right join comment_blind cb on c.id = cb.comment_id)\n                );\n</code></pre>\n"}],"owner":{"account_id":22850590,"reputation":29,"user_id":16996269,"display_name":"chaewss"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":1,"up_vote_count":3,"answer_count":1,"score":2,"last_activity_date":1660894527,"creation_date":1660894182,"question_id":73413253,"body_markdown":"class structure inheritancetype.joined jpa  \r\nI want to join different table on case.\r\n\r\n[blind DB][1]  \r\n```\r\n╔════╦══════════════╦════════════╦\r\n║ id ║ account_id   ║ type       ║ \r\n╠════╬══════════════╬════════════╬\r\n║  1 ║ 1            ║  POST      ║\r\n║  2 ║ 2            ║  COMMENT   ║\r\n║  3 ║ 1            ║  POST      ║\r\n║  4 ║ 2            ║  POST      ║\r\n║  5 ║ 2            ║  BOARD     ║\r\n╚════╩══════════════╩════════════╩\r\n```\r\n\r\n\r\n[post_blind DB][2]  \r\n```\r\n╔════╦══════════════╦\r\n║ id ║ post_id      ║\r\n╠════╬══════════════╬\r\n║  1 ║ 1            ║\r\n║  3 ║ 3            ║\r\n║  4 ║ 2            ║\r\n╚════╩══════════════╩\r\n```\r\n\r\n[post DB][3]  \r\n```\r\n╔════╦══════════════╦════════════╦\r\n║ id ║ is_blind     ║ account_id ║\r\n╠════╬══════════════╬════════════╬\r\n║  1 ║ 1            ║  1         ║\r\n║  2 ║ 0            ║  1         ║\r\n║  3 ║ 0            ║  2         ║\r\n╚════╩══════════════╩════════════╩\r\n```\r\n\r\nBlind has two status. `blind` and `blind waiting`\r\nWhen post or comment blinded, blind object created and after 6 hours later, post is_blind or comment is_blind column turns true so users can&#39;t watch that content.\r\n\r\nwhen type is &#39;POST&#39;\r\n: blind -&gt;  post_blind -&gt; post  \r\nand select blind that `post` is_blind column is false and `blind` account_id = :account_id\r\n\r\n\r\n```\r\nSELECT *\r\nFROM blind b\r\n         LEFT JOIN post_blind pb ON b.id = pb.id\r\n         LEFT JOIN comment_blind cb ON b.id = cb.id\r\nWHERE b.account_id = 2\r\n          and (b.type = &#39;POST&#39; AND (select is_blind\r\n                                    from post p\r\n                                    right join post_blind pb on p.id = pb.post_id) is true)\r\n   OR (b.type = &#39;COMMENT&#39; AND (select is_blind\r\n                               from comment c\r\n                                right join comment_blind cb on c.id = cb.comment_id) is true);\r\n```\r\n\r\nIt works if account has one blind post and one blind comment.  \r\nHowever, if the account has more than one blind post, `Subquery will return more than one row` return.\r\n\r\nI have already looked at other question and answer but still don&#39;t understand.\r\nanyone can help me solve this problem?\r\n\r\n  [1]: https://i.stack.imgur.com/uiz0i.png\r\n  [2]: https://i.stack.imgur.com/5PfXh.png\r\n  [3]: https://i.stack.imgur.com/6YqRj.png","title":"Subquery returns more than 1 row when join","body":"<p>class structure inheritancetype.joined jpa<br />\nI want to join different table on case.</p>\n<p><a href=\"https://i.stack.imgur.com/uiz0i.png\" rel=\"nofollow noreferrer\">blind DB</a></p>\n<pre><code>╔════╦══════════════╦════════════╦\n║ id ║ account_id   ║ type       ║ \n╠════╬══════════════╬════════════╬\n║  1 ║ 1            ║  POST      ║\n║  2 ║ 2            ║  COMMENT   ║\n║  3 ║ 1            ║  POST      ║\n║  4 ║ 2            ║  POST      ║\n║  5 ║ 2            ║  BOARD     ║\n╚════╩══════════════╩════════════╩\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/5PfXh.png\" rel=\"nofollow noreferrer\">post_blind DB</a></p>\n<pre><code>╔════╦══════════════╦\n║ id ║ post_id      ║\n╠════╬══════════════╬\n║  1 ║ 1            ║\n║  3 ║ 3            ║\n║  4 ║ 2            ║\n╚════╩══════════════╩\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/6YqRj.png\" rel=\"nofollow noreferrer\">post DB</a></p>\n<pre><code>╔════╦══════════════╦════════════╦\n║ id ║ is_blind     ║ account_id ║\n╠════╬══════════════╬════════════╬\n║  1 ║ 1            ║  1         ║\n║  2 ║ 0            ║  1         ║\n║  3 ║ 0            ║  2         ║\n╚════╩══════════════╩════════════╩\n</code></pre>\n<p>Blind has two status. <code>blind</code> and <code>blind waiting</code>\nWhen post or comment blinded, blind object created and after 6 hours later, post is_blind or comment is_blind column turns true so users can't watch that content.</p>\n<p>when type is 'POST'\n: blind -&gt;  post_blind -&gt; post<br />\nand select blind that <code>post</code> is_blind column is false and <code>blind</code> account_id = :account_id</p>\n<pre><code>SELECT *\nFROM blind b\n         LEFT JOIN post_blind pb ON b.id = pb.id\n         LEFT JOIN comment_blind cb ON b.id = cb.id\nWHERE b.account_id = 2\n          and (b.type = 'POST' AND (select is_blind\n                                    from post p\n                                    right join post_blind pb on p.id = pb.post_id) is true)\n   OR (b.type = 'COMMENT' AND (select is_blind\n                               from comment c\n                                right join comment_blind cb on c.id = cb.comment_id) is true);\n</code></pre>\n<p>It works if account has one blind post and one blind comment.<br />\nHowever, if the account has more than one blind post, <code>Subquery will return more than one row</code> return.</p>\n<p>I have already looked at other question and answer but still don't understand.\nanyone can help me solve this problem?</p>\n"},{"tags":["java","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":8357383,"reputation":11939,"user_id":6277104,"display_name":"SternK"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603012144,"creation_date":1602695293,"answer_id":64358285,"question_id":64336648,"body_markdown":"As it stated in the JPA specification (see **2.5 Embeddable Classes** section):\r\n\r\n&gt; An embeddable class (including an embeddable class within another embeddable class) may contain a collection of a basic type or other embeddable class. Direct or indirect circular containment dependencies among embeddable classes are not permitted.\r\n\r\nAnd simple example (based on Hibernate 5.4.21).\r\n\r\nAssuming that we have the following schema:\r\n``` sql\r\ncreate table T1_MY_ENTITY\r\n(\r\n   tm_id int not null,\r\n\r\n   primary key (tm_id)\r\n);\r\n\r\ninsert into T1_MY_ENTITY values (1);\r\n\r\ncreate table T1_MY_COLL\r\n(\r\n   tc_tm_id int not null,\r\n   tc_ord_id int not null,\r\n   tc_code varchar(100),\r\n\r\n   foreign key (tc_tm_id) references T1_MY_ENTITY(tm_id)\r\n);\r\n\r\ninsert into T1_MY_COLL values (1, 1, &#39;CL1&#39;), (1, 0, &#39;CL2&#39;);\r\n```\r\n\r\nand the following mapping:\r\n``` java\r\n@Entity\r\n@Table(name = &quot;T1_MY_ENTITY&quot;)\r\npublic class MyEntity\r\n{\r\n   @Id\r\n   @Column(name = &quot;tm_id&quot;)\r\n   private Long id;\r\n\r\n   @Embedded\r\n   private Doubles dou;\r\n   \r\n   // constructor, getters, setters\r\n}\r\n\r\n@Embeddable\r\npublic class Doubles\r\n{\r\n   @OrderColumn(name = &quot;tc_ord_id&quot;)\r\n   @ElementCollection\r\n   @CollectionTable(name = &quot;T1_MY_COLL&quot;, joinColumns = @JoinColumn(name = &quot;tc_tm_id&quot;))\r\n   @Column(name = &quot;tc_code&quot;)\r\n   private List&lt;String&gt; colls;\r\n\r\n   // constructor, getters, setters\r\n}\r\n```\r\n\r\nthe following code:\r\n``` java\r\nMyEntity myEntity =  entityManager.find(MyEntity.class, 1L);\r\nmyEntity.getDou().getColls().add(&quot;CL5&quot;);\r\nentityManager.merge(myEntity);\r\n```\r\n\r\nwill generate insert:\r\n```\r\n19:51:29,612 DEBUG SQL:128 - \r\n    /* insert collection\r\n        row com.my.hibernate.entities.MyEntity.dou.colls */ insert \r\n        into\r\n            TEST_SCHEMA.T1_MY_COLL\r\n            (tc_tm_id, tc_ord_id, tc_code) \r\n        values\r\n            (?, ?, ?)\r\nHibernate: \r\n    /* insert collection\r\n        row com.my.hibernate.entities.MyEntity.dou.colls */ insert \r\n        into\r\n            TEST_SCHEMA.T1_MY_COLL\r\n            (tc_tm_id, tc_ord_id, tc_code) \r\n        values\r\n            (?, ?, ?)\r\n19:51:29,612 TRACE ResourceRegistryStandardImpl:83 - Registering statement [/* insert collection row com.my.hibernate.entities.MyEntity.dou.colls */ insert into TEST_SCHEMA.T1_MY_COLL (tc_tm_id, tc_ord_id, tc_code) values (?, ?, ?)]\r\n19:51:29,612 TRACE BasicBinder:64 - binding parameter [1] as [BIGINT] - [1]\r\n19:51:29,613 TRACE BasicBinder:64 - binding parameter [2] as [INTEGER] - [2]\r\n19:51:29,613 TRACE BasicBinder:64 - binding parameter [3] as [VARCHAR] - [CL5]\r\n```\r\n\r\nSo, It looks like your problem lies in the other plane.\r\n\r\n**UPDATE**: As for your [test case](https://github.com/wimdeblauwe/so-64336648/blob/main/src/test/java/com/wimdeblauwe/so/embeddableelementcollection/MyEntity2RepositoryTest.java#L44), please try to correct it in the following way:\r\n\r\n``` java\r\n@Test\r\nvoid test() {\r\n   MyEntity2 entity = new MyEntity2();\r\n   Doubles doubles = new Doubles();\r\n   doubles.setDoubles(List.of(1.0, 1.5));\r\n\r\n   entity.setDoubles(doubles); // It was absent !!!\r\n\r\n   repository.save(entity);\r\n\r\n   entityManager.flush();\r\n\r\n   assertThat(jdbcTemplate.queryForObject(&quot;SELECT count(*) FROM my_entity2_doubles&quot;, Long.class)).isEqualTo(2);\r\n}\r\n```\r\n\r\n","title":"Moving @ElementCollection to @Embeddable class not working","body":"<p>As it stated in the JPA specification (see <strong>2.5 Embeddable Classes</strong> section):</p>\n<blockquote>\n<p>An embeddable class (including an embeddable class within another embeddable class) may contain a collection of a basic type or other embeddable class. Direct or indirect circular containment dependencies among embeddable classes are not permitted.</p>\n</blockquote>\n<p>And simple example (based on Hibernate 5.4.21).</p>\n<p>Assuming that we have the following schema:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table T1_MY_ENTITY\n(\n   tm_id int not null,\n\n   primary key (tm_id)\n);\n\ninsert into T1_MY_ENTITY values (1);\n\ncreate table T1_MY_COLL\n(\n   tc_tm_id int not null,\n   tc_ord_id int not null,\n   tc_code varchar(100),\n\n   foreign key (tc_tm_id) references T1_MY_ENTITY(tm_id)\n);\n\ninsert into T1_MY_COLL values (1, 1, 'CL1'), (1, 0, 'CL2');\n</code></pre>\n<p>and the following mapping:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;T1_MY_ENTITY&quot;)\npublic class MyEntity\n{\n   @Id\n   @Column(name = &quot;tm_id&quot;)\n   private Long id;\n\n   @Embedded\n   private Doubles dou;\n   \n   // constructor, getters, setters\n}\n\n@Embeddable\npublic class Doubles\n{\n   @OrderColumn(name = &quot;tc_ord_id&quot;)\n   @ElementCollection\n   @CollectionTable(name = &quot;T1_MY_COLL&quot;, joinColumns = @JoinColumn(name = &quot;tc_tm_id&quot;))\n   @Column(name = &quot;tc_code&quot;)\n   private List&lt;String&gt; colls;\n\n   // constructor, getters, setters\n}\n</code></pre>\n<p>the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>MyEntity myEntity =  entityManager.find(MyEntity.class, 1L);\nmyEntity.getDou().getColls().add(&quot;CL5&quot;);\nentityManager.merge(myEntity);\n</code></pre>\n<p>will generate insert:</p>\n<pre><code>19:51:29,612 DEBUG SQL:128 - \n    /* insert collection\n        row com.my.hibernate.entities.MyEntity.dou.colls */ insert \n        into\n            TEST_SCHEMA.T1_MY_COLL\n            (tc_tm_id, tc_ord_id, tc_code) \n        values\n            (?, ?, ?)\nHibernate: \n    /* insert collection\n        row com.my.hibernate.entities.MyEntity.dou.colls */ insert \n        into\n            TEST_SCHEMA.T1_MY_COLL\n            (tc_tm_id, tc_ord_id, tc_code) \n        values\n            (?, ?, ?)\n19:51:29,612 TRACE ResourceRegistryStandardImpl:83 - Registering statement [/* insert collection row com.my.hibernate.entities.MyEntity.dou.colls */ insert into TEST_SCHEMA.T1_MY_COLL (tc_tm_id, tc_ord_id, tc_code) values (?, ?, ?)]\n19:51:29,612 TRACE BasicBinder:64 - binding parameter [1] as [BIGINT] - [1]\n19:51:29,613 TRACE BasicBinder:64 - binding parameter [2] as [INTEGER] - [2]\n19:51:29,613 TRACE BasicBinder:64 - binding parameter [3] as [VARCHAR] - [CL5]\n</code></pre>\n<p>So, It looks like your problem lies in the other plane.</p>\n<p><strong>UPDATE</strong>: As for your <a href=\"https://github.com/wimdeblauwe/so-64336648/blob/main/src/test/java/com/wimdeblauwe/so/embeddableelementcollection/MyEntity2RepositoryTest.java#L44\" rel=\"nofollow noreferrer\">test case</a>, please try to correct it in the following way:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid test() {\n   MyEntity2 entity = new MyEntity2();\n   Doubles doubles = new Doubles();\n   doubles.setDoubles(List.of(1.0, 1.5));\n\n   entity.setDoubles(doubles); // It was absent !!!\n\n   repository.save(entity);\n\n   entityManager.flush();\n\n   assertThat(jdbcTemplate.queryForObject(&quot;SELECT count(*) FROM my_entity2_doubles&quot;, Long.class)).isEqualTo(2);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":17294607,"reputation":11,"user_id":12525547,"display_name":"everbef0re"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660894268,"creation_date":1660894268,"answer_id":73413274,"question_id":64336648,"body_markdown":"I don&#39;t know why. But assigning with a collection works.\r\n\r\n    @Embeddable\r\n    public class Doubles {\r\n      @ElementCollection\r\n      private List&lt;Double&gt; doubles = new ArrayList&lt;&gt;();\r\n    }","title":"Moving @ElementCollection to @Embeddable class not working","body":"<p>I don't know why. But assigning with a collection works.</p>\n<pre><code>@Embeddable\npublic class Doubles {\n  @ElementCollection\n  private List&lt;Double&gt; doubles = new ArrayList&lt;&gt;();\n}\n</code></pre>\n"}],"owner":{"account_id":17750,"reputation":25470,"user_id":40064,"accept_rate":69,"display_name":"Wim Deblauwe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":391,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":2,"score":1,"last_activity_date":1660894268,"creation_date":1602597447,"question_id":64336648,"body_markdown":"I am trying to move an `@ElementCollection` annotated field from my `@Entity` class into a different class that I annotated with `@Embeddable`. When the field is in the entity, Hibernate will issue the proper INSERT statements. When the field is moved to the `@Embeddable` class, no INSERT statements are generated.\r\n\r\n\r\nSo this works:\r\n\r\n```\r\n@Entity\r\npublic class MyEntity extends AbstractEntity&lt;MyEntityId&gt; {\r\n  @ElementCollection\r\n  @OrderColumn\r\n  private List&lt;Double&gt; doubles;\r\n}\r\n```\r\n\r\nBut this does not:\r\n\r\n```\r\n@Entity\r\npublic class MyEntity extends AbstractEntity&lt;MyEntityId&gt; {\r\n  @Embedded\r\n  private Doubles doubles;\r\n}\r\n\r\n@Embeddable\r\npublic class Doubles {\r\n  @ElementCollection\r\n  @OrderColumn\r\n  private List&lt;Double&gt; doubles;\r\n}\r\n```\r\n\r\nThere is no exception when saving a `MyEntity` instance (and flushing the EntityManager). If I disable creating the appropriate table in Flyway, the Hibernate validation does trigger a &quot;missing table [my_entity_doubles]&quot; error, so Hibernate does seem to correct interpret the setup.\r\n\r\nUsing Spring Boot 2.3.4 that uses Hibernate 5.4.21.\r\n\r\nUPDATE: There is a reproducible testcase at https://github.com/wimdeblauwe/so-64336648","title":"Moving @ElementCollection to @Embeddable class not working","body":"<p>I am trying to move an <code>@ElementCollection</code> annotated field from my <code>@Entity</code> class into a different class that I annotated with <code>@Embeddable</code>. When the field is in the entity, Hibernate will issue the proper INSERT statements. When the field is moved to the <code>@Embeddable</code> class, no INSERT statements are generated.</p>\n<p>So this works:</p>\n<pre><code>@Entity\npublic class MyEntity extends AbstractEntity&lt;MyEntityId&gt; {\n  @ElementCollection\n  @OrderColumn\n  private List&lt;Double&gt; doubles;\n}\n</code></pre>\n<p>But this does not:</p>\n<pre><code>@Entity\npublic class MyEntity extends AbstractEntity&lt;MyEntityId&gt; {\n  @Embedded\n  private Doubles doubles;\n}\n\n@Embeddable\npublic class Doubles {\n  @ElementCollection\n  @OrderColumn\n  private List&lt;Double&gt; doubles;\n}\n</code></pre>\n<p>There is no exception when saving a <code>MyEntity</code> instance (and flushing the EntityManager). If I disable creating the appropriate table in Flyway, the Hibernate validation does trigger a &quot;missing table [my_entity_doubles]&quot; error, so Hibernate does seem to correct interpret the setup.</p>\n<p>Using Spring Boot 2.3.4 that uses Hibernate 5.4.21.</p>\n<p>UPDATE: There is a reproducible testcase at <a href=\"https://github.com/wimdeblauwe/so-64336648\" rel=\"nofollow noreferrer\">https://github.com/wimdeblauwe/so-64336648</a></p>\n"},{"tags":["java","arrays","kotlin","plugins","compiler-errors"],"owner":{"account_id":26104640,"reputation":1,"user_id":19799513,"display_name":"Katiyar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":889,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660894094,"creation_date":1660890399,"question_id":73412632,"body_markdown":"I wrote a simple java code for a jagged array on Intellij IDEA (2022 Edition) and when I built that, I got an error on the console \r\n\r\nHere is the code: \r\n\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n\r\n        Scanner sc =new Scanner(System.in);\r\n\r\n        int [][][]arr=new int[3][2][3];\r\n\r\n        for(int i=0;i&lt;arr.length;i++)\r\n        {\r\n            for(int j=0;j&lt;arr[i].length;j++)\r\n            {\r\n                for(int k=0;k&lt;arr[i][j].length;k++)\r\n\r\n                {\r\n                    System.out.println(&quot;Enter marks of School &quot;+ i +&quot; class &quot;+ j +&quot; Student &quot;+ k);\r\n                    arr[i][j][k]=sc.nextInt();\r\n                }\r\n            }\r\n        }\r\n\r\n        for(int i=0;i&lt;arr.length;i++)\r\n        {\r\n            for(int j=0;j&lt;arr[i].length;j++)\r\n            {\r\n                for(int k=0;k&lt;arr[i][j].length;k++)\r\n\r\n                {\r\n                    System.out.println(arr[i][j][k]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n  \r\nThe error I got -&gt;\r\n\r\n    Could not initialize class org.jetbrains.kotlin.idea.compiler.configuration.KotlinJpsPluginSettings\r\n\r\n  \r\n\r\n  \r\n\r\n\r\n","title":"Could not initialize class org.jetbrains.kotlin.idea.compiler.configuration.KotlinJpsPluginSettings resolve this error","body":"<p>I wrote a simple java code for a jagged array on Intellij IDEA (2022 Edition) and when I built that, I got an error on the console</p>\n<p>Here is the code:</p>\n<p>public class Main {\npublic static void main(String[] args) {</p>\n<pre><code>    Scanner sc =new Scanner(System.in);\n\n    int [][][]arr=new int[3][2][3];\n\n    for(int i=0;i&lt;arr.length;i++)\n    {\n        for(int j=0;j&lt;arr[i].length;j++)\n        {\n            for(int k=0;k&lt;arr[i][j].length;k++)\n\n            {\n                System.out.println(&quot;Enter marks of School &quot;+ i +&quot; class &quot;+ j +&quot; Student &quot;+ k);\n                arr[i][j][k]=sc.nextInt();\n            }\n        }\n    }\n\n    for(int i=0;i&lt;arr.length;i++)\n    {\n        for(int j=0;j&lt;arr[i].length;j++)\n        {\n            for(int k=0;k&lt;arr[i][j].length;k++)\n\n            {\n                System.out.println(arr[i][j][k]);\n            }\n        }\n    }\n}\n</code></pre>\n<p>}</p>\n<p>The error I got -&gt;</p>\n<pre><code>Could not initialize class org.jetbrains.kotlin.idea.compiler.configuration.KotlinJpsPluginSettings\n</code></pre>\n"},{"tags":["java","multithreading","amazon-sqs","producer-consumer"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":0,"creation_date":1660894490,"post_id":73413206,"comment_id":129645831,"body_markdown":"Why doesn&#39;t your `!= null` check work? Shouldn&#39;t the `while (true)` be *inside* the executor? Instead of submitting an endless number of execution tasks to the executor have just three long running executors!? What blocking queue are you referring to?","body":"Why doesn&#39;t your <code>!= null</code> check work? Shouldn&#39;t the <code>while (true)</code> be <i>inside</i> the executor? Instead of submitting an endless number of execution tasks to the executor have just three long running executors!? What blocking queue are you referring to?"},{"owner":{"account_id":9260958,"reputation":2254,"user_id":6878060,"accept_rate":80,"display_name":"log0"},"score":0,"creation_date":1660894815,"post_id":73413206,"comment_id":129645924,"body_markdown":"`!=null` is preventing from inserting `null` data in the DB. `while(true)` inside the executor will make it a single threaded consumer and there would not benefit of using a thread pool. `BlockingQueue`  is used by the thread pool to make worker threads blocked/wait until the data /space is available","body":"<code>!=null</code> is preventing from inserting <code>null</code> data in the DB. <code>while(true)</code> inside the executor will make it a single threaded consumer and there would not benefit of using a thread pool. <code>BlockingQueue</code>  is used by the thread pool to make worker threads blocked/wait until the data /space is available"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1660895095,"post_id":73413206,"comment_id":129646006,"body_markdown":"!=null is preventing from inserting null data in the DB - then what is the actual problem? I do not see how multithreading is helping you at all here - just having a single thread would probably make everything easier. Submitting an infinite number of tasks all just querying SQS only once is certainly worse performance than having one or three tasks listening to the queue continously.","body":"!=null is preventing from inserting null data in the DB - then what is the actual problem? I do not see how multithreading is helping you at all here - just having a single thread would probably make everything easier. Submitting an infinite number of tasks all just querying SQS only once is certainly worse performance than having one or three tasks listening to the queue continously."},{"owner":{"account_id":9260958,"reputation":2254,"user_id":6878060,"accept_rate":80,"display_name":"log0"},"score":0,"creation_date":1660897776,"post_id":73413206,"comment_id":129646875,"body_markdown":"@luk2302   I want to listen to the queue through multiple threads and to achieve that I am submitting `reading from queue` tasks to the executor. How can I improve this? I am looking for something like, as you mentioend, - `..having one or three tasks listening to the queue continously`","body":"@luk2302   I want to listen to the queue through multiple threads and to achieve that I am submitting <code>reading from queue</code> tasks to the executor. How can I improve this? I am looking for something like, as you mentioend, - <code>..having one or three tasks listening to the queue continously</code>"},{"owner":{"account_id":9260958,"reputation":2254,"user_id":6878060,"accept_rate":80,"display_name":"log0"},"score":0,"creation_date":1660898516,"post_id":73413206,"comment_id":129647113,"body_markdown":"@luk2302 basically, you are saying that,  I should call `exService.execute( ()-&gt; {} ) ` 2 or 3 times and keeping the while loop inside them?","body":"@luk2302 basically, you are saying that,  I should call <code>exService.execute( ()-&gt; {} ) </code> 2 or 3 times and keeping the while loop inside them?"}],"owner":{"account_id":9260958,"reputation":2254,"user_id":6878060,"accept_rate":80,"display_name":"log0"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":251,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660893938,"creation_date":1660893938,"question_id":73413206,"body_markdown":"I have a standard SQS and I need to read data from it using multiple consumer threads. &lt;br&gt;\r\nTo achieve the same, I have written the following method ( in Java): &lt;br&gt;\r\n  ```\r\n   public void consume() {\r\n\t\tExecutorService exService = Executors.newFixedThreadPool(3);\r\n\t\t\r\n\t\twhile(true) {\r\n\t\t\texService.execute(()-&gt;{\r\n\t\t\t\ttry {\r\n                /* the following code submits a null data to the blocking queue when the queue(sqs) is empty*/\r\n\t\t\t\tOrderQ order = queueMessagingTemplate.receiveAndConvert(StringConstants.QUEUE_NAME\r\n\t\t\t\t\t\t, OrderQ.class);\r\n\t\t\t\tif(order!=null)\r\n\t\t\t\t    repstiory.saveOrder(order);\r\n\t\t\t\tlog.debug(&quot;Received from queue:&quot;+ order);\r\n\t\t\t\t}catch(Exception exc) {\r\n\t\t\t\t\tlog.error(&quot;couldn&#39;t read msg from queue&quot;);\r\n\t\t\t\t\tthrow new CouldNotReadMessageFromSQSException(&quot;couldn&#39;t read msg from queue&quot;);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n  ```\r\n\r\nand, as of now, I have two approaches to call the above method and start consuming the messages &lt;br&gt;from the queue  stated as follows along with the issues associated with them: &lt;br&gt;\r\nApproach-1 : &lt;br&gt;\r\n create a rest api and call this method. This approach won&#39;t work in production and also when&lt;br&gt; the queue is empty, `null` will keep getting populated in the blocking queue of the thread pool.&lt;br&gt; So, this is clearly not a good approach.&lt;br&gt; **Question**-How can I ensure that only &#39;not null&#39; data is submitted to the blocking queue?\r\n\r\nApproach-2: &lt;br&gt;\r\n calling the consume method from `CommandLineRunner` but the issue is, the queue, most probably,&lt;br&gt; won&#39;t have data as soon as the application starts and will run into the same problem as described in the 1st approach. &lt;br&gt;\r\n\r\n\r\n**Problem-1**:What can be a better solution to handle the null data problem? &lt;br&gt;\r\n**problem-2**:what can be better way to call the `consume` method, considering the production environment?\r\n\r\nKindly suggest solutions and best practices to achieve the same.","title":"Consumer Thread and SQS - Preventing from submitting null data to the blocking queue and finding a better way to call the consumer threads at runtime","body":"<p>I have a standard SQS and I need to read data from it using multiple consumer threads. <br>\nTo achieve the same, I have written the following method ( in Java): <br></p>\n<pre><code> public void consume() {\n      ExecutorService exService = Executors.newFixedThreadPool(3);\n      \n      while(true) {\n          exService.execute(()-&gt;{\n              try {\n              /* the following code submits a null data to the blocking queue when the queue(sqs) is empty*/\n              OrderQ order = queueMessagingTemplate.receiveAndConvert(StringConstants.QUEUE_NAME\n                      , OrderQ.class);\n              if(order!=null)\n                  repstiory.saveOrder(order);\n              log.debug(&quot;Received from queue:&quot;+ order);\n              }catch(Exception exc) {\n                  log.error(&quot;couldn't read msg from queue&quot;);\n                  throw new CouldNotReadMessageFromSQSException(&quot;couldn't read msg from queue&quot;);\n              }\n          });\n      }\n  }\n\n</code></pre>\n<p>and, as of now, I have two approaches to call the above method and start consuming the messages <br>from the queue  stated as follows along with the issues associated with them: <br>\nApproach-1 : <br>\ncreate a rest api and call this method. This approach won't work in production and also when<br> the queue is empty, <code>null</code> will keep getting populated in the blocking queue of the thread pool.<br> So, this is clearly not a good approach.<br> <strong>Question</strong>-How can I ensure that only 'not null' data is submitted to the blocking queue?</p>\n<p>Approach-2: <br>\ncalling the consume method from <code>CommandLineRunner</code> but the issue is, the queue, most probably,<br> won't have data as soon as the application starts and will run into the same problem as described in the 1st approach. <br></p>\n<p><strong>Problem-1</strong>:What can be a better solution to handle the null data problem? <br>\n<strong>problem-2</strong>:what can be better way to call the <code>consume</code> method, considering the production environment?</p>\n<p>Kindly suggest solutions and best practices to achieve the same.</p>\n"},{"tags":["java","algorithm","data-structures","singly-linked-list"],"comments":[{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1660889385,"post_id":73412432,"comment_id":129644441,"body_markdown":"`head.next = newNode;` = NPE","body":"<code>head.next = newNode;</code> = NPE"},{"owner":{"account_id":18278479,"reputation":11,"user_id":13307740,"display_name":"Skillkrio"},"score":0,"creation_date":1660889546,"post_id":73412432,"comment_id":129644472,"body_markdown":"I know that head.next will point to the new Node. my question is using Node field using call by value and call by reference both will work?","body":"I know that head.next will point to the new Node. my question is using Node field using call by value and call by reference both will work?"},{"owner":{"account_id":2673407,"reputation":44640,"user_id":2310289,"display_name":"Scary Wombat"},"score":1,"creation_date":1660889763,"post_id":73412432,"comment_id":129644522,"body_markdown":"No, it will throw a NullPointerException.  Java does not have pointers. You question is meaningless.","body":"No, it will throw a NullPointerException.  Java does not have pointers. You question is meaningless."},{"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"score":0,"creation_date":1660889852,"post_id":73412432,"comment_id":129644539,"body_markdown":"What @ScaryWombat wanted to point out is, that your code will throw a NullPointerException because you want to set the `next` field of a `null` object. Instead your newNode should reference to the head like this: `newNode.next = null` so you get a list structure like this: 7 -&gt; 3 -&gt; 6 -&gt; null.","body":"What @ScaryWombat wanted to point out is, that your code will throw a NullPointerException because you want to set the <code>next</code> field of a <code>null</code> object. Instead your newNode should reference to the head like this: <code>newNode.next = null</code> so you get a list structure like this: 7 -&gt; 3 -&gt; 6 -&gt; null."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1660890924,"post_id":73412432,"comment_id":129644818,"body_markdown":"What is the question? It is not clear - mentioning Dart; not-working example; including &quot;call by value&quot; despite there is no method call involved. Is the question somehow like &quot;can `Node next;` be used (for this use case) in C++?&quot; ?","body":"What is the question? It is not clear - mentioning Dart; not-working example; including &quot;call by value&quot; despite there is no method call involved. Is the question somehow like &quot;can <code>Node next;</code> be used (for this use case) in C++?&quot; ?"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1660894432,"post_id":73412432,"comment_id":129645815,"body_markdown":"`can we implement the Node field inside the Node class with either by reference or value` -  See [Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?](https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value)","body":"<code>can we implement the Node field inside the Node class with either by reference or value</code> -  See <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a>"}],"answers":[{"tags":[],"owner":{"account_id":26104660,"reputation":96,"user_id":19799529,"display_name":"Rutra87"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660890486,"creation_date":1660890281,"answer_id":73412615,"question_id":73412432,"body_markdown":"As stated by the other answers, your code wont work since your head variable is null and thus would throw a NullPointerException. \r\nYour main method should like this:\r\n\r\n    Node head = new Node(0);\r\n    Node newNode = new Node(1);\r\n    head.next = newNode;\r\n\r\nJava is always passing references by value. For a comprehensive answer see https://stackoverflow.com/a/40523/19799529","title":"Singly Linked List pass by value","body":"<p>As stated by the other answers, your code wont work since your head variable is null and thus would throw a NullPointerException.\nYour main method should like this:</p>\n<pre><code>Node head = new Node(0);\nNode newNode = new Node(1);\nhead.next = newNode;\n</code></pre>\n<p>Java is always passing references by value. For a comprehensive answer see <a href=\"https://stackoverflow.com/a/40523/19799529\">https://stackoverflow.com/a/40523/19799529</a></p>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660891936,"creation_date":1660891936,"answer_id":73412864,"question_id":73412432,"body_markdown":"### Pass-by-value\r\n\r\nJava is always passing by value (as you are accustomed to):\r\n\r\n    int x = 3; f(x);\r\n    Object y = new Object(); g(y);\r\n\r\nAbove neither `f` nor `g` can alter the passed _variables_ `x` and `y`.\r\nThe variables are just memory slots in which the value is stored, and that value is passed (not which memory slot), whether primitive type (int) or class instance (Object).\r\n\r\n### Linked list\r\n\r\nYour Node class is fine.\r\n\r\n    public class SingleLinkedList {\r\n        Node head;\r\n        int count;\r\n\r\n        public int size() {\r\n            return count;\r\n        }\r\n\r\nIt is worth holding the `Node` inside a list class, possibly with a field for the number of elements. You could use that for index checking.\r\n\r\n        public void add(int i, int data) {\r\n            head = addToNodes(head, i, data);\r\n            ++count;\r\n        }\r\n\r\n        private Node addToNodes(Node link, int i, int data) {\r\n            if (i &lt;= 0 || link == null) {\r\n                Node node = new Node(data);\r\n                node.next = link;\r\n                return node;\r\n            }\r\n            link.next = addToNodes(link.next, i - 1, data);\r\n            return link;\r\n        }\r\n\r\nAbove I have used a recursive method. It shows that as the passed variable (`head` or some node&#39;s `next` field) cannot be changed in java, one has to return it assigning it to the same variable.\r\n\r\nThe code above is not very nicely formulated; write your own logic. ","title":"Singly Linked List pass by value","body":"<h3>Pass-by-value</h3>\n<p>Java is always passing by value (as you are accustomed to):</p>\n<pre><code>int x = 3; f(x);\nObject y = new Object(); g(y);\n</code></pre>\n<p>Above neither <code>f</code> nor <code>g</code> can alter the passed <em>variables</em> <code>x</code> and <code>y</code>.\nThe variables are just memory slots in which the value is stored, and that value is passed (not which memory slot), whether primitive type (int) or class instance (Object).</p>\n<h3>Linked list</h3>\n<p>Your Node class is fine.</p>\n<pre><code>public class SingleLinkedList {\n    Node head;\n    int count;\n\n    public int size() {\n        return count;\n    }\n</code></pre>\n<p>It is worth holding the <code>Node</code> inside a list class, possibly with a field for the number of elements. You could use that for index checking.</p>\n<pre><code>    public void add(int i, int data) {\n        head = addToNodes(head, i, data);\n        ++count;\n    }\n\n    private Node addToNodes(Node link, int i, int data) {\n        if (i &lt;= 0 || link == null) {\n            Node node = new Node(data);\n            node.next = link;\n            return node;\n        }\n        link.next = addToNodes(link.next, i - 1, data);\n        return link;\n    }\n</code></pre>\n<p>Above I have used a recursive method. It shows that as the passed variable (<code>head</code> or some node's <code>next</code> field) cannot be changed in java, one has to return it assigning it to the same variable.</p>\n<p>The code above is not very nicely formulated; write your own logic.</p>\n"}],"owner":{"account_id":18278479,"reputation":11,"user_id":13307740,"display_name":"Skillkrio"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1660893871,"creation_date":1660888802,"question_id":73412432,"body_markdown":"Hi i am learning linked list in java. Its a simple doubt but couldn&#39;t figure out.\r\n\r\n    class Node{\r\n    int data;\r\n    Node next;\r\n    Node(int data){\r\n    this.data = data;\r\n    this.next = null;\r\n    }\r\n\r\n**//java main method**\r\n\r\n    Node head = null;\r\n    Node newNode = new Node(1);\r\n    head.next = newNode;\r\n\r\nHere i am passing the reference of the newNode to the next field in the Node class. The next is holding the reference of the newNode.\r\n\r\nIn dart programming languages objects are passed via call by value. By doing the above code is also working fine. My question is can we implement the Node field inside the Node class with either by reference or value.\r\n\r\nIn the context of c++, I don&#39;t know much c++ syntax but roughly it looks like this\r\n**//with pointer**\r\n\r\n    class Node{\r\n    public:\r\n    int data;\r\n    Node* next;\r\n    }\r\n\r\nIt is possible to implement the above code like this one\r\n\r\n**//without pointer**\r\n\r\n    class Node{\r\n    public:\r\n    int data;\r\n    Node next;\r\n    }","title":"Singly Linked List pass by value","body":"<p>Hi i am learning linked list in java. Its a simple doubt but couldn't figure out.</p>\n<pre><code>class Node{\nint data;\nNode next;\nNode(int data){\nthis.data = data;\nthis.next = null;\n}\n</code></pre>\n<p><strong>//java main method</strong></p>\n<pre><code>Node head = null;\nNode newNode = new Node(1);\nhead.next = newNode;\n</code></pre>\n<p>Here i am passing the reference of the newNode to the next field in the Node class. The next is holding the reference of the newNode.</p>\n<p>In dart programming languages objects are passed via call by value. By doing the above code is also working fine. My question is can we implement the Node field inside the Node class with either by reference or value.</p>\n<p>In the context of c++, I don't know much c++ syntax but roughly it looks like this\n<strong>//with pointer</strong></p>\n<pre><code>class Node{\npublic:\nint data;\nNode* next;\n}\n</code></pre>\n<p>It is possible to implement the above code like this one</p>\n<p><strong>//without pointer</strong></p>\n<pre><code>class Node{\npublic:\nint data;\nNode next;\n}\n</code></pre>\n"},{"tags":["java","selenium","jenkins","screenshot"],"comments":[{"owner":{"account_id":23786211,"reputation":2038,"user_id":17798239,"display_name":"Anand Gautam"},"score":0,"creation_date":1660737728,"post_id":73387353,"comment_id":129602439,"body_markdown":"You may try adjusting your screen resolution to fit the application in window. This could work. But Ideally, the application should be responsive, i;e., it should auto-adjust according to the screen-size","body":"You may try adjusting your screen resolution to fit the application in window. This could work. But Ideally, the application should be responsive, i;e., it should auto-adjust according to the screen-size"},{"owner":{"account_id":12571734,"reputation":147,"user_id":9145612,"display_name":"123josh123"},"score":0,"creation_date":1660738698,"post_id":73387353,"comment_id":129602811,"body_markdown":"The problem is that, the specific element for example is long, so need to scroll down even on regular sized monitor. So in this case, the element is not being captured to its fullest form","body":"The problem is that, the specific element for example is long, so need to scroll down even on regular sized monitor. So in this case, the element is not being captured to its fullest form"},{"owner":{"account_id":9472425,"reputation":582,"user_id":9741277,"display_name":"leun4m"},"score":1,"creation_date":1660738957,"post_id":73387353,"comment_id":129602891,"body_markdown":"Maybe try to scroll to the element via `moveToElement()` (https://stackoverflow.com/a/27386399/9741277)","body":"Maybe try to scroll to the element via <code>moveToElement()</code> (<a href=\"https://stackoverflow.com/a/27386399/9741277\">stackoverflow.com/a/27386399/9741277</a>)"},{"owner":{"account_id":12571734,"reputation":147,"user_id":9145612,"display_name":"123josh123"},"score":0,"creation_date":1660743896,"post_id":73387353,"comment_id":129604879,"body_markdown":"Yea that&#39;s what I&#39;m trying, hope that it will help capture the whole element","body":"Yea that&#39;s what I&#39;m trying, hope that it will help capture the whole element"},{"owner":{"account_id":5889510,"reputation":119,"user_id":4636563,"accept_rate":22,"display_name":"DeltaRage"},"score":0,"creation_date":1660745478,"post_id":73387353,"comment_id":129605523,"body_markdown":"Try checking this post out: https://stackoverflow.com/questions/3401343/scroll-element-into-view-with-selenium","body":"Try checking this post out: <a href=\"https://stackoverflow.com/questions/3401343/scroll-element-into-view-with-selenium\" title=\"scroll element into view with selenium\">stackoverflow.com/questions/3401343/&hellip;</a>"}],"answers":[{"tags":[],"owner":{"account_id":4046845,"reputation":148,"user_id":3327823,"display_name":"Rakesh"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660893181,"creation_date":1660893181,"answer_id":73413094,"question_id":73387353,"body_markdown":"You can increase the Set the Browser resolution to bigger size and pass it in chrome options.  that wil increase the browser window size and then scrollinto that element and continue with it. \r\n\r\n        ChromeOptions options = new ChromeOptions();\r\n        options.addArguments(&quot;--window-size=1920,1200&quot;);\r\n        WebDriver driver = new ChromeDriver(options);","title":"Selenium can&#39;t capture the whole element because of monitor size","body":"<p>You can increase the Set the Browser resolution to bigger size and pass it in chrome options.  that wil increase the browser window size and then scrollinto that element and continue with it.</p>\n<pre><code>    ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--window-size=1920,1200&quot;);\n    WebDriver driver = new ChromeDriver(options);\n</code></pre>\n"}],"owner":{"account_id":12571734,"reputation":147,"user_id":9145612,"display_name":"123josh123"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":583,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660893181,"creation_date":1660734243,"question_id":73387353,"body_markdown":"When using a website and capturing pictures of specific elements on screen, \r\nSometimes we encounter a problem in which the element is not captured in its fullest form.\r\nAfter investigating the issue I understand it happens when the Chrome browser opens on laptop screen, which is smaller and that&#39;s why the elements are not shown completely.\r\nHow can I solve this issue? It also happens on Jenkins sometimes, how is that?\r\n\r\nHere is my code snippet:\r\n\r\n        byte[] imageResult = element.getScreenshotAs(OutputType.BYTES);\r\n        BufferedImage imageSnapshot = ImageIO.read(new ByteArrayInputStream(imageResult));\r\n\r\n     ","title":"Selenium can&#39;t capture the whole element because of monitor size","body":"<p>When using a website and capturing pictures of specific elements on screen,\nSometimes we encounter a problem in which the element is not captured in its fullest form.\nAfter investigating the issue I understand it happens when the Chrome browser opens on laptop screen, which is smaller and that's why the elements are not shown completely.\nHow can I solve this issue? It also happens on Jenkins sometimes, how is that?</p>\n<p>Here is my code snippet:</p>\n<pre><code>    byte[] imageResult = element.getScreenshotAs(OutputType.BYTES);\n    BufferedImage imageSnapshot = ImageIO.read(new ByteArrayInputStream(imageResult));\n\n \n</code></pre>\n"},{"tags":["java","tomcat","out-of-memory","tomcat8"],"comments":[{"owner":{"account_id":3421244,"reputation":35863,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1660892833,"post_id":73412601,"comment_id":129645350,"body_markdown":"You didn&#39;t actually try them with the `rem` did you? `rem` is ALWAYS ignored; that&#39;s its purpose. `export` would not be valid CMD syntax; it is used for (most) Unix shells, not CMD. Your second line but with `rem` deleted is good syntax, but whether those numbers are right for your case is up to you. The `-server` probably isn&#39;t needed, but should do no harm.","body":"You didn&#39;t actually try them with the <code>rem</code> did you? <code>rem</code> is ALWAYS ignored; that&#39;s its purpose. <code>export</code> would not be valid CMD syntax; it is used for (most) Unix shells, not CMD. Your second line but with <code>rem</code> deleted is good syntax, but whether those numbers are right for your case is up to you. The <code>-server</code> probably isn&#39;t needed, but should do no harm."},{"owner":{"account_id":12454235,"reputation":95,"user_id":9067963,"display_name":"Mahmud Mridul"},"score":0,"creation_date":1660898182,"post_id":73412601,"comment_id":129646997,"body_markdown":"No I didn&#39;t had rem when I was actually using those commands.","body":"No I didn&#39;t had rem when I was actually using those commands."}],"answers":[{"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"down_vote_count":1,"up_vote_count":2,"is_accepted":true,"score":1,"last_activity_date":1660892216,"creation_date":1660892216,"answer_id":73412909,"question_id":73412601,"body_markdown":"As you experienced, your tomcat service does not make use of setenv.bat at all. According to [the documentation][1] you have to invoke `tomcat8 //US//` to update service definitions. The settings are stored somewhere in the Windows registry.\r\n\r\nSo the command you need might look like\r\n\r\n    tomcat8 //US//Tomcat8 --JvmMx 2048m\r\n\r\nAlternatively it is perfectly ok to use the GUI version `tomcat8w`as you described you have done anyway.\r\n\r\nIn a nutshell: You cannot use setenv.bat to configure Tomcats running as service.\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-8.5-doc/windows-service-howto.html#Updating_services","title":"Increasing allocated memory for tomcat didn&#39;t work using setenv.bat","body":"<p>As you experienced, your tomcat service does not make use of setenv.bat at all. According to <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/windows-service-howto.html#Updating_services\" rel=\"nofollow noreferrer\">the documentation</a> you have to invoke <code>tomcat8 //US//</code> to update service definitions. The settings are stored somewhere in the Windows registry.</p>\n<p>So the command you need might look like</p>\n<pre><code>tomcat8 //US//Tomcat8 --JvmMx 2048m\n</code></pre>\n<p>Alternatively it is perfectly ok to use the GUI version <code>tomcat8w</code>as you described you have done anyway.</p>\n<p>In a nutshell: You cannot use setenv.bat to configure Tomcats running as service.</p>\n"}],"owner":{"account_id":12454235,"reputation":95,"user_id":9067963,"display_name":"Mahmud Mridul"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":344,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73412909,"answer_count":1,"score":1,"last_activity_date":1660892216,"creation_date":1660890204,"question_id":73412601,"body_markdown":"I have a java web app which runs on tomcat (tomcat is installed as a windows service) and I was getting &lt;br&gt;\r\n```Exception in thread &quot;Thread-7&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded```&lt;br&gt;\r\n while trying to process files using the web app. So I tried to increase allocated memory for tomcat. I checked the solutions in [Increase Tomcat memory settings](https://stackoverflow.com/questions/12688778/increase-tomcat-memory-settings), [Dealing with &quot;java.lang.OutOfMemoryError: PermGen space&quot; error](https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error) and some other blogs. Here are the commands that I tried in setenv.bat file. \r\n```\r\nrem export JAVA_OPTS=&quot;-Dfile.encoding=UTF-8 -Xms256m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=1024m&quot;\r\nrem set &quot;JAVA_OPTS=%JAVA_OPTS% -Xms512m -Xmx8192m -XX:MaxPermSize=256m -server&quot;\r\nrem set JAVA_OPTS=&quot;-Xms256m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=1024m&quot;\r\nrem set JAVA_OPTS=%JAVA_OPTS% -Xms256m  -Xmx2048m\r\nrem set JAVA_OPTS=-Dfile.encoding=UTF-8 -Xms256m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=1024m\r\n```\r\nI tried these command one by one. Each time I added a new command I restarted tomcat. None of these commands worked and tomcat was using its default configuration. So I changed **Initial Memory Pool** and **Maximum Memory Pool** from tomcat8w.exe -&gt; java tab. And that worked. But I want to change the configuration using setenv.bat. How can I do that?","title":"Increasing allocated memory for tomcat didn&#39;t work using setenv.bat","body":"<p>I have a java web app which runs on tomcat (tomcat is installed as a windows service) and I was getting <br>\n<code>Exception in thread &quot;Thread-7&quot; java.lang.OutOfMemoryError: GC overhead limit exceeded</code><br>\nwhile trying to process files using the web app. So I tried to increase allocated memory for tomcat. I checked the solutions in <a href=\"https://stackoverflow.com/questions/12688778/increase-tomcat-memory-settings\">Increase Tomcat memory settings</a>, <a href=\"https://stackoverflow.com/questions/88235/dealing-with-java-lang-outofmemoryerror-permgen-space-error\">Dealing with &quot;java.lang.OutOfMemoryError: PermGen space&quot; error</a> and some other blogs. Here are the commands that I tried in setenv.bat file.</p>\n<pre><code>rem export JAVA_OPTS=&quot;-Dfile.encoding=UTF-8 -Xms256m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=1024m&quot;\nrem set &quot;JAVA_OPTS=%JAVA_OPTS% -Xms512m -Xmx8192m -XX:MaxPermSize=256m -server&quot;\nrem set JAVA_OPTS=&quot;-Xms256m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=1024m&quot;\nrem set JAVA_OPTS=%JAVA_OPTS% -Xms256m  -Xmx2048m\nrem set JAVA_OPTS=-Dfile.encoding=UTF-8 -Xms256m -Xmx2048m -XX:PermSize=256m -XX:MaxPermSize=1024m\n</code></pre>\n<p>I tried these command one by one. Each time I added a new command I restarted tomcat. None of these commands worked and tomcat was using its default configuration. So I changed <strong>Initial Memory Pool</strong> and <strong>Maximum Memory Pool</strong> from tomcat8w.exe -&gt; java tab. And that worked. But I want to change the configuration using setenv.bat. How can I do that?</p>\n"},{"tags":["java","android","json","android-volley"],"comments":[{"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"score":0,"creation_date":1660894702,"post_id":73412704,"comment_id":129645897,"body_markdown":"if it&#39;s string use `myString.replace(STRING_TO_BE_REMOVED, &quot;&quot;)`","body":"if it&#39;s string use <code>myString.replace(STRING_TO_BE_REMOVED, &quot;&quot;)</code>"},{"owner":{"account_id":14021554,"reputation":11,"user_id":10127667,"display_name":"kavya"},"score":0,"creation_date":1660894771,"post_id":73412704,"comment_id":129645915,"body_markdown":"not working in that way","body":"not working in that way"},{"owner":{"account_id":17945478,"reputation":1363,"user_id":16177121,"display_name":"Sidharth Mudgil"},"score":0,"creation_date":1660895668,"post_id":73412704,"comment_id":129646209,"body_markdown":"try converting the response to string and remove that and convert again to json","body":"try converting the response to string and remove that and convert again to json"}],"owner":{"account_id":14021554,"reputation":11,"user_id":10127667,"display_name":"kavya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660892058,"creation_date":1660890835,"question_id":73412704,"body_markdown":"I&#39;m getting this response from api:\r\n\r\n```xml\r\n&lt;string xmlns=&quot;http://schemas.microsoft.com/2003/10/Serialization/&quot;&gt;\r\n[{&quot;ActID&quot;:845,&quot;ActName&quot;:&quot;Current Liabilities&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:387,&quot;ActName&quot;:&quot;K.Ramalinga Raju - Capital&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:728,&quot;ActName&quot;:&quot;Krlr - Airport Land&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:746,&quot;ActName&quot;:&quot;Krlr - Airport Land Polls&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:842,&quot;ActName&quot;:&quot;kRLR - AMLPM-Kom Prawns ponds&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:763,&quot;ActName&quot;:&quot;Krlr - Giet Land Cement Polls&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:770,&quot;ActName&quot;:&quot;krlr - Matha Projects Llp&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:490,&quot;ActName&quot;:&quot;KRLR - Tadipudi Fish Ponds&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:586,&quot;ActName&quot;:&quot;Krlr Palm Oil Plantation&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:493,&quot;ActName&quot;:&quot;Krlr Travelling&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:805,&quot;ActName&quot;:&quot;KRLR-DRAWINGS&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:821,&quot;ActName&quot;:&quot;KRLR-Petty Expenses&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:401,&quot;ActName&quot;:&quot;Kvsn Raju&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:7,&quot;ActName&quot;:&quot;Profit &amp; Loss - Current Year&quot;,&quot;amount&quot;:0.0},\r\n{&quot;ActID&quot;:8,&quot;ActName&quot;:&quot;Profit &amp; Loss - Previous Year&quot;,&quot;amount&quot;:0.0}\r\n]&lt;/string&gt;\r\n```\r\n\r\nHow to parse this json in volley in android studio","title":"remove &lt;string xmlns=&quot;http://schemas.microsoft.com/2003/10/Serialization/&quot;&gt; from json response in java android studio","body":"<p>I'm getting this response from api:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;string xmlns=&quot;http://schemas.microsoft.com/2003/10/Serialization/&quot;&gt;\n[{&quot;ActID&quot;:845,&quot;ActName&quot;:&quot;Current Liabilities&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:387,&quot;ActName&quot;:&quot;K.Ramalinga Raju - Capital&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:728,&quot;ActName&quot;:&quot;Krlr - Airport Land&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:746,&quot;ActName&quot;:&quot;Krlr - Airport Land Polls&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:842,&quot;ActName&quot;:&quot;kRLR - AMLPM-Kom Prawns ponds&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:763,&quot;ActName&quot;:&quot;Krlr - Giet Land Cement Polls&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:770,&quot;ActName&quot;:&quot;krlr - Matha Projects Llp&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:490,&quot;ActName&quot;:&quot;KRLR - Tadipudi Fish Ponds&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:586,&quot;ActName&quot;:&quot;Krlr Palm Oil Plantation&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:493,&quot;ActName&quot;:&quot;Krlr Travelling&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:805,&quot;ActName&quot;:&quot;KRLR-DRAWINGS&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:821,&quot;ActName&quot;:&quot;KRLR-Petty Expenses&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:401,&quot;ActName&quot;:&quot;Kvsn Raju&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:7,&quot;ActName&quot;:&quot;Profit &amp; Loss - Current Year&quot;,&quot;amount&quot;:0.0},\n{&quot;ActID&quot;:8,&quot;ActName&quot;:&quot;Profit &amp; Loss - Previous Year&quot;,&quot;amount&quot;:0.0}\n]&lt;/string&gt;\n</code></pre>\n<p>How to parse this json in volley in android studio</p>\n"},{"tags":["java","reactive-programming","spring-webflux"],"comments":[{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660896067,"post_id":73412883,"comment_id":129646344,"body_markdown":"im not going to answer your question, but im going to tell you that you are coding imperative (regular java) using for-loops etc. in a reactive environment. And your dto calls are not returning Monos or Fluxes which tells me that they probably are blocking calls. Just placing things in `Mono.just` doesn&#39;t make things reactive. Also your code is way too abstract for us to know or even run your code, you should instead produce a minimal example that demonstrates your problem.","body":"im not going to answer your question, but im going to tell you that you are coding imperative (regular java) using for-loops etc. in a reactive environment. And your dto calls are not returning Monos or Fluxes which tells me that they probably are blocking calls. Just placing things in <code>Mono.just</code> doesn&#39;t make things reactive. Also your code is way too abstract for us to know or even run your code, you should instead produce a minimal example that demonstrates your problem."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660896134,"post_id":73412883,"comment_id":129646365,"body_markdown":"we have no idea what your `processors` do or your `util` classes do or what your `dto` classes do etc etc.","body":"we have no idea what your <code>processors</code> do or your <code>util</code> classes do or what your <code>dto</code> classes do etc etc."},{"owner":{"account_id":23977161,"reputation":11,"user_id":17965108,"display_name":"Konstantin Goncharenko"},"score":0,"creation_date":1660897453,"post_id":73412883,"comment_id":129646784,"body_markdown":"I believe that the code is completely non-blocking, except of the DAO layer, as I wrote, it is implemented on JDBC, not on R2DBC. Not returning mono or flux on dto calls does not make the code blocking.","body":"I believe that the code is completely non-blocking, except of the DAO layer, as I wrote, it is implemented on JDBC, not on R2DBC. Not returning mono or flux on dto calls does not make the code blocking."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660899341,"post_id":73412883,"comment_id":129647400,"body_markdown":"You are aware that JDBC is blocking? And that when performing things outside the reactive context doesn’t allow the reactive framework to optimize its thread usage to give you fully reactive behaviour. Just one single blocking call in a non-blocking application can seriously cripple your entire application. So your belief is faulty and you should read up on the reactor architecture and why blocking is bad.","body":"You are aware that JDBC is blocking? And that when performing things outside the reactive context doesn’t allow the reactive framework to optimize its thread usage to give you fully reactive behaviour. Just one single blocking call in a non-blocking application can seriously cripple your entire application. So your belief is faulty and you should read up on the reactor architecture and why blocking is bad."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660899668,"post_id":73412883,"comment_id":129647522,"body_markdown":"`Not returning mono or flux on dto calls does not make the code blocking.` is completely wrong, because every call needs to wait until the concrete value is returned. We cant return a value if it doesnt exist. Thats what Mono and Fluxes are for to, to return ”something” and signal when the value is available","body":"<code>Not returning mono or flux on dto calls does not make the code blocking.</code> is completely wrong, because every call needs to wait until the concrete value is returned. We cant return a value if it doesnt exist. Thats what Mono and Fluxes are for to, to return ”something” and signal when the value is available"},{"owner":{"account_id":23977161,"reputation":11,"user_id":17965108,"display_name":"Konstantin Goncharenko"},"score":0,"creation_date":1660899767,"post_id":73412883,"comment_id":129647550,"body_markdown":"Of course. But my question is why is the LoggingIncomingMessageProcessor.processMessage code inside the flatMap body being run twice. If this behavior is due to the blocking nature of JDBC, I&#39;d like to understand why.","body":"Of course. But my question is why is the LoggingIncomingMessageProcessor.processMessage code inside the flatMap body being run twice. If this behavior is due to the blocking nature of JDBC, I&#39;d like to understand why."},{"owner":{"account_id":2064278,"reputation":13129,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1660901140,"post_id":73412883,"comment_id":129647984,"body_markdown":"and as i wrote above, your code is way too abstract, i cant run your code.","body":"and as i wrote above, your code is way too abstract, i cant run your code."},{"owner":{"account_id":8023174,"reputation":9194,"user_id":6051176,"display_name":"Martin Tarj&#225;nyi"},"score":0,"creation_date":1661072744,"post_id":73412883,"comment_id":129680270,"body_markdown":"I can&#39;t see any obvious reason why it could run twice but I&#39;d suggest not to pass Mono objects as method parameters, rather just pass around the dto object as it is. Passing around a Mono can easily lead to multiple subscriptions and multiple unintended executions.","body":"I can&#39;t see any obvious reason why it could run twice but I&#39;d suggest not to pass Mono objects as method parameters, rather just pass around the dto object as it is. Passing around a Mono can easily lead to multiple subscriptions and multiple unintended executions."}],"owner":{"account_id":23977161,"reputation":11,"user_id":17965108,"display_name":"Konstantin Goncharenko"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":402,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660892038,"creation_date":1660892038,"question_id":73412883,"body_markdown":"I have a java service. \r\nService receives a message, enriches it, stores it in a database, and sends it to kafka. \r\n\r\nThe service is made of reactive streams, DAO layer made of jdbc.\r\n\r\n**Controller:**\r\n```\r\n@Api @Slf4j @Validated\r\n@RestController\r\n@ParametersAreNonnullByDefault\r\n@RequiredArgsConstructor\r\npublic class IncomingMessageController {\r\n\r\n    private final IncomingMessageProcessingService processingService;\r\n\r\n    @PostMapping(value = &quot;/incoming&quot;)\r\n    public Mono&lt;ResponseEntity&lt;String&gt;&gt; handleIncomingMessages(\r\n            @RequestBody VkIncomingMessage message\r\n    ) {\r\n        \r\n         return processingService.processMessage(message)\r\n                .then(Mono.just(ResponseEntity\r\n                .status(HttpStatus.OK)\r\n                .body(&quot;ok&quot;)));\r\n    }\r\n}\r\n```\r\n\r\n**Processing Service:**\r\n```\r\n@Slf4j\r\n@Service\r\n@ParametersAreNonnullByDefault\r\npublic class IncomingMessageProcessingService {\r\n\r\n    private final List&lt;IncomingMessageProcessor&gt; incomingMessageProcessors;\r\n\r\n    public IncomingMessageProcessingService(\r\n            Optional&lt;LoggingIncomingMessageProcessor&gt; loggingIncomingMessageProcessor,\r\n            Optional&lt;SendToKafkaIncomingMessageProcessor&gt; kafkaIncomingMessageProcessor\r\n    ) {\r\n        incomingMessageProcessors = new ArrayList&lt;&gt;();\r\n        loggingIncomingMessageProcessor.ifPresent(this.incomingMessageProcessors::add);\r\n        kafkaIncomingMessageProcessor.ifPresent(this.incomingMessageProcessors::add);\r\n    }\r\n\r\n    public Mono&lt;VkIncomingDto&gt; processMessage(VkIncomingMessage vkIncomingMessage) {\r\n\r\n        var vkIncomingDto = MessageMappingUtils.toVkIncomingDto(vkIncomingMessage);\r\n        var vkIncomingDtoMono = Mono.just(vkIncomingDto);\r\n        for (var processor : incomingMessageProcessors) {\r\n            vkIncomingDtoMono = processor.processIncomingMessage(vkIncomingDtoMono);\r\n        }\r\n        return vkIncomingDtoMono;\r\n    }\r\n}\r\n```\r\n\r\n**LoggingIncomingMessageProcessor:**\r\n```\r\n@Slf4j\r\n@Service\r\n@RequiredArgsConstructor\r\n@ParametersAreNonnullByDefault\r\n@ConditionalOnProperty(\r\n        name = {&quot;toggle.logging-incoming-processor&quot;},\r\n        havingValue = &quot;true&quot;,\r\n        matchIfMissing = true)\r\npublic class LoggingIncomingMessageProcessor\r\n        implements IncomingMessageProcessor {\r\n\r\n    private final IncomingMessagesDao incomingMessagesDao;\r\n    private final MessagesDao messagesDao;\r\n    private final IdGenerator idGenerator;\r\n\r\n    @Override\r\n    public Mono&lt;VkIncomingDto&gt; processIncomingMessage(Mono&lt;VkIncomingDto&gt; vkIncomingDtoMono) {\r\n        return vkIncomingDtoMono\r\n                .flatMap(vkIncomingDto -&gt; {\r\n\r\n                    var originalMsgOutLogin = getOriginalMsgOutLogin(Long.parseLong(vkIncomingDto.vkIncoming.getObject()\r\n                            .getMessage()\r\n                            .getMessageTag()));\r\n\r\n                    var enrichedIncomingMessage = enrichVkIncomingMessages(vkIncomingDto, originalMsgOutLogin);\r\n                    incomingMessagesDao.insert(enrichedIncomingMessage);\r\n                    return Mono.just(enrichedIncomingMessage);\r\n                });\r\n    }\r\n\r\n    private VkIncomingDto enrichVkIncomingMessages(VkIncomingDto vkIncomingDto, String login) {\r\n        return vkIncomingDto.toBuilder()\r\n                .id(idGenerator.getNext())\r\n                .vkMessageId(Long.parseLong(Objects.requireNonNull(\r\n                        vkIncomingDto.vkIncoming.getObject().getMessage().getMessageTag())))\r\n                .login(login)\r\n                .build();\r\n    }\r\n\r\n    private String getOriginalMsgOutLogin(Long originalMsgOutId) {\r\n        return messagesDao.getLoginToIdMap(Set.of(originalMsgOutId)).get(originalMsgOutId);\r\n    }\r\n}\r\n```\r\n\r\n**SendToKafkaIncomingMessageProcessor:**\r\n```\r\n@Slf4j\r\n@RequiredArgsConstructor\r\n@Repository\r\n@ParametersAreNonnullByDefault\r\n@ConditionalOnProperty(\r\n        name = {&quot;toggle.kafka-incoming-processor&quot;, &quot;server.providermode&quot;},\r\n        havingValue = &quot;true&quot;,\r\n        matchIfMissing = true)\r\npublic class SendToKafkaIncomingMessageProcessor implements IncomingMessageProcessor {\r\n\r\n    private final VkIncomingMessageProducer messageProducer;\r\n\r\n    @Override\r\n    public Mono&lt;VkIncomingDto&gt; processIncomingMessage(Mono&lt;VkIncomingDto&gt; vkIncomingDtoMono) {\r\n\r\n        return vkIncomingDtoMono\r\n                .flatMap(vkIncomingDto -&gt; messageProducer.sendMessage(MessageMappingUtils.toIncomingMessage(vkIncomingDto)))\r\n                .then(vkIncomingDtoMono);\r\n    }\r\n}\r\n```\r\n\r\nI need to return an enriched message from LoggingIncomingMessageProcessor in order to send this information to Kafka. \r\nThe problem is that the code inside flatMap is run twice, resulting in 2 records being saved to the database and 1 message being sent to kafka.\r\n","title":"Mono flatmap body runs twice","body":"<p>I have a java service.\nService receives a message, enriches it, stores it in a database, and sends it to kafka.</p>\n<p>The service is made of reactive streams, DAO layer made of jdbc.</p>\n<p><strong>Controller:</strong></p>\n<pre><code>@Api @Slf4j @Validated\n@RestController\n@ParametersAreNonnullByDefault\n@RequiredArgsConstructor\npublic class IncomingMessageController {\n\n    private final IncomingMessageProcessingService processingService;\n\n    @PostMapping(value = &quot;/incoming&quot;)\n    public Mono&lt;ResponseEntity&lt;String&gt;&gt; handleIncomingMessages(\n            @RequestBody VkIncomingMessage message\n    ) {\n        \n         return processingService.processMessage(message)\n                .then(Mono.just(ResponseEntity\n                .status(HttpStatus.OK)\n                .body(&quot;ok&quot;)));\n    }\n}\n</code></pre>\n<p><strong>Processing Service:</strong></p>\n<pre><code>@Slf4j\n@Service\n@ParametersAreNonnullByDefault\npublic class IncomingMessageProcessingService {\n\n    private final List&lt;IncomingMessageProcessor&gt; incomingMessageProcessors;\n\n    public IncomingMessageProcessingService(\n            Optional&lt;LoggingIncomingMessageProcessor&gt; loggingIncomingMessageProcessor,\n            Optional&lt;SendToKafkaIncomingMessageProcessor&gt; kafkaIncomingMessageProcessor\n    ) {\n        incomingMessageProcessors = new ArrayList&lt;&gt;();\n        loggingIncomingMessageProcessor.ifPresent(this.incomingMessageProcessors::add);\n        kafkaIncomingMessageProcessor.ifPresent(this.incomingMessageProcessors::add);\n    }\n\n    public Mono&lt;VkIncomingDto&gt; processMessage(VkIncomingMessage vkIncomingMessage) {\n\n        var vkIncomingDto = MessageMappingUtils.toVkIncomingDto(vkIncomingMessage);\n        var vkIncomingDtoMono = Mono.just(vkIncomingDto);\n        for (var processor : incomingMessageProcessors) {\n            vkIncomingDtoMono = processor.processIncomingMessage(vkIncomingDtoMono);\n        }\n        return vkIncomingDtoMono;\n    }\n}\n</code></pre>\n<p><strong>LoggingIncomingMessageProcessor:</strong></p>\n<pre><code>@Slf4j\n@Service\n@RequiredArgsConstructor\n@ParametersAreNonnullByDefault\n@ConditionalOnProperty(\n        name = {&quot;toggle.logging-incoming-processor&quot;},\n        havingValue = &quot;true&quot;,\n        matchIfMissing = true)\npublic class LoggingIncomingMessageProcessor\n        implements IncomingMessageProcessor {\n\n    private final IncomingMessagesDao incomingMessagesDao;\n    private final MessagesDao messagesDao;\n    private final IdGenerator idGenerator;\n\n    @Override\n    public Mono&lt;VkIncomingDto&gt; processIncomingMessage(Mono&lt;VkIncomingDto&gt; vkIncomingDtoMono) {\n        return vkIncomingDtoMono\n                .flatMap(vkIncomingDto -&gt; {\n\n                    var originalMsgOutLogin = getOriginalMsgOutLogin(Long.parseLong(vkIncomingDto.vkIncoming.getObject()\n                            .getMessage()\n                            .getMessageTag()));\n\n                    var enrichedIncomingMessage = enrichVkIncomingMessages(vkIncomingDto, originalMsgOutLogin);\n                    incomingMessagesDao.insert(enrichedIncomingMessage);\n                    return Mono.just(enrichedIncomingMessage);\n                });\n    }\n\n    private VkIncomingDto enrichVkIncomingMessages(VkIncomingDto vkIncomingDto, String login) {\n        return vkIncomingDto.toBuilder()\n                .id(idGenerator.getNext())\n                .vkMessageId(Long.parseLong(Objects.requireNonNull(\n                        vkIncomingDto.vkIncoming.getObject().getMessage().getMessageTag())))\n                .login(login)\n                .build();\n    }\n\n    private String getOriginalMsgOutLogin(Long originalMsgOutId) {\n        return messagesDao.getLoginToIdMap(Set.of(originalMsgOutId)).get(originalMsgOutId);\n    }\n}\n</code></pre>\n<p><strong>SendToKafkaIncomingMessageProcessor:</strong></p>\n<pre><code>@Slf4j\n@RequiredArgsConstructor\n@Repository\n@ParametersAreNonnullByDefault\n@ConditionalOnProperty(\n        name = {&quot;toggle.kafka-incoming-processor&quot;, &quot;server.providermode&quot;},\n        havingValue = &quot;true&quot;,\n        matchIfMissing = true)\npublic class SendToKafkaIncomingMessageProcessor implements IncomingMessageProcessor {\n\n    private final VkIncomingMessageProducer messageProducer;\n\n    @Override\n    public Mono&lt;VkIncomingDto&gt; processIncomingMessage(Mono&lt;VkIncomingDto&gt; vkIncomingDtoMono) {\n\n        return vkIncomingDtoMono\n                .flatMap(vkIncomingDto -&gt; messageProducer.sendMessage(MessageMappingUtils.toIncomingMessage(vkIncomingDto)))\n                .then(vkIncomingDtoMono);\n    }\n}\n</code></pre>\n<p>I need to return an enriched message from LoggingIncomingMessageProcessor in order to send this information to Kafka.\nThe problem is that the code inside flatMap is run twice, resulting in 2 records being saved to the database and 1 message being sent to kafka.</p>\n"},{"tags":["java","spring","weblogic","datasource"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660896776,"post_id":73411379,"comment_id":129646578,"body_markdown":"Don&#39;t do a try/catch in a bean method and return `null`. Do the lookup (I suggest using the `JndiDataSourceLookup` class and if an exception occurs during lookup you will see the exception properly being logged. I suspect there is an exception during startup whichyou swallow, hence the error.","body":"Don&#39;t do a try/catch in a bean method and return <code>null</code>. Do the lookup (I suggest using the <code>JndiDataSourceLookup</code> class and if an exception occurs during lookup you will see the exception properly being logged. I suspect there is an exception during startup whichyou swallow, hence the error."}],"answers":[{"tags":[],"owner":{"account_id":384402,"reputation":1902,"user_id":740888,"display_name":"httPants"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660891801,"creation_date":1660891801,"answer_id":73412845,"question_id":73411379,"body_markdown":"We have many spring boot apps deployed in weblogic that lookup datasources using jndi.  Below is an example of how we do it.  We explicitly specify to use weblogic.jndi.WLInitialContextFactory and also make sure the destroy method of your datasource beans is blank, otherwise undeploying your app can remove the datasource from weblogic. \r\n\r\n    @Configuration\r\n    public class DataSourceConfig {\r\n    \r\n    \t@Autowired\r\n    \tprivate Environment env;\r\n    \r\n    \t@Bean\r\n    \tpublic JndiTemplate jndiTemplate() {\r\n    \t\tProperties props = new Properties();\r\n    \t\tprops.put(Context.INITIAL_CONTEXT_FACTORY, &quot;weblogic.jndi.WLInitialContextFactory&quot;);\r\n    \t\treturn new JndiTemplate(props);\r\n    \t}\r\n    \r\n    \r\n    \t// destroyMethod MUST be blank or datasource is removed from jndi tree on\r\n    \t// see https://github.com/spring-projects/spring-framework/issues/17153\r\n    \t@Bean(destroyMethod = &quot;&quot;)\r\n    \t@Primary\r\n    \tpublic DataSource batchDataSource() throws NamingException {\r\n    \t\treturn (DataSource) jndiTemplate().lookup(env.getProperty(&quot;dms-geo-sync.batch-datasource-jndi-name&quot;));\r\n    \t}\r\n    \r\n    \r\n    }\r\n\r\n","title":"No qualifying bean of type &#39;javax.sql.DataSource&#39; available: expected at least 1 bean which qualifies as autowire candidate","body":"<p>We have many spring boot apps deployed in weblogic that lookup datasources using jndi.  Below is an example of how we do it.  We explicitly specify to use weblogic.jndi.WLInitialContextFactory and also make sure the destroy method of your datasource beans is blank, otherwise undeploying your app can remove the datasource from weblogic.</p>\n<pre><code>@Configuration\npublic class DataSourceConfig {\n\n    @Autowired\n    private Environment env;\n\n    @Bean\n    public JndiTemplate jndiTemplate() {\n        Properties props = new Properties();\n        props.put(Context.INITIAL_CONTEXT_FACTORY, &quot;weblogic.jndi.WLInitialContextFactory&quot;);\n        return new JndiTemplate(props);\n    }\n\n\n    // destroyMethod MUST be blank or datasource is removed from jndi tree on\n    // see https://github.com/spring-projects/spring-framework/issues/17153\n    @Bean(destroyMethod = &quot;&quot;)\n    @Primary\n    public DataSource batchDataSource() throws NamingException {\n        return (DataSource) jndiTemplate().lookup(env.getProperty(&quot;dms-geo-sync.batch-datasource-jndi-name&quot;));\n    }\n\n\n}\n</code></pre>\n"}],"owner":{"account_id":1000404,"reputation":1347,"user_id":1015388,"accept_rate":15,"display_name":"user1015388"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":266,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1660891801,"creation_date":1660877278,"question_id":73411379,"body_markdown":"I am getting the following exception when I try to use DataSource created in web logic and trying to use in my application:\r\n\r\n\r\nweblogic.application.ModuleException: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;javax.sql.DataSource&#39; available: expected at least \r\n1 bean which qualifies as autowire candidate. Dependency annotations: {}\r\n        at weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:140)\r\n        at weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\r\n        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:233)\r\n        at weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:228)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:78)\r\n        at weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:752)\r\n        at weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\r\n        at weblogic.application.internal.B\r\n\r\nFollowing is the java code:\r\n\r\n    @Configuration\r\n    @ConfigurationProperties(&quot;my.oracle&quot;)\r\n    public class MyDBConfiguration {\r\n    \r\n    \t@NotNull\r\n    \tprivate String jndiname;\r\n    \t\r\n    \t\tpublic void setJndiname(String jndiname) {\r\n    \t\tthis.jndiname = jndiname;\r\n    \t}\r\n    \t\r\n    \t@Bean(name = &quot;testA&quot;)\r\n    \t@Primary\r\n    \tpublic DataSource dataSource() throws SQLException{\t\t  \r\n    \t    \r\n    \t      DataSource dataSource;\r\n    \t\t\r\n    \t      try {\r\n    \t    \t  Context ctx = new InitialContext();\r\n    \t          dataSource = (DataSource) ctx.lookup(this.jndiname);  // i can clearly see that this matches with the jndi name(jdbc/myOracleDataSource) created in weblogic.\r\n    \t          return dataSource;\r\n    \t         \r\n    \t        }catch(Exception e) {\r\n    \t\t\t\te.printStackTrace();\r\n    \t\t\t\treturn null;\r\n    \t        }\r\n    \t}\r\n    }\r\n\r\napplication.local.properties\r\n\r\nmy.oracle.jndiname=jdbc/myOracleDataSource","title":"No qualifying bean of type &#39;javax.sql.DataSource&#39; available: expected at least 1 bean which qualifies as autowire candidate","body":"<p>I am getting the following exception when I try to use DataSource created in web logic and trying to use in my application:</p>\n<p>weblogic.application.ModuleException: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'javax.sql.DataSource' available: expected at least\n1 bean which qualifies as autowire candidate. Dependency annotations: {}\nat weblogic.application.internal.ExtensibleModuleWrapper.start(ExtensibleModuleWrapper.java:140)\nat weblogic.application.internal.flow.ModuleListenerInvoker.start(ModuleListenerInvoker.java:124)\nat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:233)\nat weblogic.application.internal.flow.ModuleStateDriver$3.next(ModuleStateDriver.java:228)\nat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\nat weblogic.application.internal.flow.ModuleStateDriver.start(ModuleStateDriver.java:78)\nat weblogic.application.internal.BaseDeployment$2.next(BaseDeployment.java:752)\nat weblogic.application.utils.StateMachineDriver.nextState(StateMachineDriver.java:45)\nat weblogic.application.internal.B</p>\n<p>Following is the java code:</p>\n<pre><code>@Configuration\n@ConfigurationProperties(&quot;my.oracle&quot;)\npublic class MyDBConfiguration {\n\n    @NotNull\n    private String jndiname;\n    \n        public void setJndiname(String jndiname) {\n        this.jndiname = jndiname;\n    }\n    \n    @Bean(name = &quot;testA&quot;)\n    @Primary\n    public DataSource dataSource() throws SQLException{       \n        \n          DataSource dataSource;\n        \n          try {\n              Context ctx = new InitialContext();\n              dataSource = (DataSource) ctx.lookup(this.jndiname);  // i can clearly see that this matches with the jndi name(jdbc/myOracleDataSource) created in weblogic.\n              return dataSource;\n             \n            }catch(Exception e) {\n                e.printStackTrace();\n                return null;\n            }\n    }\n}\n</code></pre>\n<p>application.local.properties</p>\n<p>my.oracle.jndiname=jdbc/myOracleDataSource</p>\n"},{"tags":["java","spring-boot","apache-camel"],"answers":[{"tags":[],"owner":{"account_id":12216169,"reputation":775,"user_id":8916556,"display_name":"erayerdem"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1659550905,"creation_date":1659550905,"answer_id":73226082,"question_id":73225256,"body_markdown":"I dont understand your question bu I think this code examples solves your problem . split behaviour in Map is Map.Entry .  and this returns Node.class and you can get this value with .value \r\n\r\n            from(&quot;timer:test?repeatCount=1&quot;)\r\n                .process(e -&gt; {\r\n                    Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n                    map.put(&quot;name&quot;, List.of(&quot;name&quot;, &quot;name1&quot;,&quot;namo&quot;));\r\n                    map.put(&quot;surname&quot;, List.of(&quot;surname&quot;));\r\n                    map.put(&quot;age&quot;, List.of(&quot;age&quot;, &quot;age1&quot;));\r\n                    e.getIn().setBody(map);\r\n                })\r\n                .split(body())\r\n                .setBody(simple(&quot;${body.value}&quot;))\r\n                .log(&quot;${body.class} ${body.size} ${body}&quot;);\r\n\r\noutput \r\n\r\n    :class java.util.ImmutableCollections$List12 1 surname\r\n    :class java.util.ImmutableCollections$ListN 3 name,name1,namo\r\n    :class java.util.ImmutableCollections$List12 2 age,age1\r\n\r\nor more complicated example. u can split every list field to a body \r\n\r\n\r\n    from(&quot;timer:test?repeatCount=1&quot;)\r\n            .log(&quot;its works&quot;)\r\n            .process(e -&gt; {\r\n                Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n                map.put(&quot;name&quot;, List.of(&quot;name&quot;, &quot;name1&quot;));\r\n                map.put(&quot;surname&quot;, List.of(&quot;surname&quot;, &quot;surname1&quot;));\r\n                map.put(&quot;age&quot;, List.of(&quot;age&quot;, &quot;age1&quot;));\r\n                e.getIn().setBody(map);\r\n            })\r\n            .split(body(), new GroupedBodyAggregationStrategy())\r\n            .setBody(simple(&quot;${body.value}&quot;))\r\n            .split(body(), new GroupedBodyAggregationStrategy())\r\n            .log(&quot;${body}&quot;);\r\n\r\n","title":"How to split a HashMap in Apache Camel?","body":"<p>I dont understand your question bu I think this code examples solves your problem . split behaviour in Map is Map.Entry .  and this returns Node.class and you can get this value with .value</p>\n<pre><code>        from(&quot;timer:test?repeatCount=1&quot;)\n            .process(e -&gt; {\n                Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n                map.put(&quot;name&quot;, List.of(&quot;name&quot;, &quot;name1&quot;,&quot;namo&quot;));\n                map.put(&quot;surname&quot;, List.of(&quot;surname&quot;));\n                map.put(&quot;age&quot;, List.of(&quot;age&quot;, &quot;age1&quot;));\n                e.getIn().setBody(map);\n            })\n            .split(body())\n            .setBody(simple(&quot;${body.value}&quot;))\n            .log(&quot;${body.class} ${body.size} ${body}&quot;);\n</code></pre>\n<p>output</p>\n<pre><code>:class java.util.ImmutableCollections$List12 1 surname\n:class java.util.ImmutableCollections$ListN 3 name,name1,namo\n:class java.util.ImmutableCollections$List12 2 age,age1\n</code></pre>\n<p>or more complicated example. u can split every list field to a body</p>\n<pre><code>from(&quot;timer:test?repeatCount=1&quot;)\n        .log(&quot;its works&quot;)\n        .process(e -&gt; {\n            Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n            map.put(&quot;name&quot;, List.of(&quot;name&quot;, &quot;name1&quot;));\n            map.put(&quot;surname&quot;, List.of(&quot;surname&quot;, &quot;surname1&quot;));\n            map.put(&quot;age&quot;, List.of(&quot;age&quot;, &quot;age1&quot;));\n            e.getIn().setBody(map);\n        })\n        .split(body(), new GroupedBodyAggregationStrategy())\n        .setBody(simple(&quot;${body.value}&quot;))\n        .split(body(), new GroupedBodyAggregationStrategy())\n        .log(&quot;${body}&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1832,"reputation":11572,"user_id":2517,"accept_rate":82,"display_name":"Jeremy Ross"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1659550996,"creation_date":1659550996,"answer_id":73226106,"question_id":73225256,"body_markdown":"Sounds like maybe you just want iterate on the map entries:\r\n\r\n```lang-java\r\n.split(simple(&quot;${body.entrySet()}&quot;))\r\n    .log(&quot;${body.key}&quot;) // key is a String\r\n    .log(&quot;${body.value}&quot;) // value is List&lt;String&gt; \r\n```\r\n\r\n","title":"How to split a HashMap in Apache Camel?","body":"<p>Sounds like maybe you just want iterate on the map entries:</p>\n<pre class=\"lang-java prettyprint-override\"><code>.split(simple(&quot;${body.entrySet()}&quot;))\n    .log(&quot;${body.key}&quot;) // key is a String\n    .log(&quot;${body.value}&quot;) // value is List&lt;String&gt; \n</code></pre>\n"},{"tags":[],"owner":{"account_id":5076288,"reputation":27,"user_id":16287503,"display_name":"Mihail Stoyanov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660891430,"creation_date":1660891430,"answer_id":73412797,"question_id":73225256,"body_markdown":"Camel split EIP does not support maps. You can define your custom splitter bean if you want to iterate over the map, like shown here:\r\nhttps://stackoverflow.com/questions/57810028/can-the-splitter-eip-split-a-hashmap-or-does-it-have-to-be-a-list\r\n","title":"How to split a HashMap in Apache Camel?","body":"<p>Camel split EIP does not support maps. You can define your custom splitter bean if you want to iterate over the map, like shown here:\n<a href=\"https://stackoverflow.com/questions/57810028/can-the-splitter-eip-split-a-hashmap-or-does-it-have-to-be-a-list\">can the Splitter EIP split a HashMap or does it have to be a List</a></p>\n"}],"owner":{"account_id":19925567,"reputation":73,"user_id":14600347,"display_name":"Aleksandar Grujic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":752,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1660891430,"creation_date":1659546630,"question_id":73225256,"body_markdown":"I have a `Map&lt;String, List&lt;String&gt;&gt;` with size 14. I need to split the map so that I can get 14 maps of 1 size.\r\nI&#39;ve tried the following code, but the split is not working: the size after the split is still 14.\r\n```\r\nfrom(&quot;direct:receive-the-list&quot;)\r\n\t.errorHandler(defaultErrorHandler())\r\n\t.bean(new ListToMapTransformer()) // aggregate list of strings into a Map of strings based on some prefix\r\n    .log(&quot;Size of the body BEFORE SPLIT: ${body.size}&quot;);\t\r\n    .split(body())\r\n    .log(&quot;Size of the body AFTER SPLIT: ${body.size}&quot;);\r\n```\r\n\r\nDoes anyone know how I can get it to work?","title":"How to split a HashMap in Apache Camel?","body":"<p>I have a <code>Map&lt;String, List&lt;String&gt;&gt;</code> with size 14. I need to split the map so that I can get 14 maps of 1 size.\nI've tried the following code, but the split is not working: the size after the split is still 14.</p>\n<pre><code>from(&quot;direct:receive-the-list&quot;)\n    .errorHandler(defaultErrorHandler())\n    .bean(new ListToMapTransformer()) // aggregate list of strings into a Map of strings based on some prefix\n    .log(&quot;Size of the body BEFORE SPLIT: ${body.size}&quot;);    \n    .split(body())\n    .log(&quot;Size of the body AFTER SPLIT: ${body.size}&quot;);\n</code></pre>\n<p>Does anyone know how I can get it to work?</p>\n"},{"tags":["java","spring","spring-batch"],"answers":[{"tags":[],"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1586947503,"creation_date":1551179119,"answer_id":54884088,"question_id":54782690,"body_markdown":"The `ListPreparedStatementSetter` is not aware of parameters types. If a parameter is an array or a collection, it will set it as is to the first placeholder, leaving other placeholders unset. Hence the error. In your example, if `List&lt;Long&gt; keys = Arrays.asList(1, 2)`, your sql statement will be:\r\n\r\n    SELECT A FROM MYTABLE WHERE KEY IN (?, ?)\r\n\r\nIf you pass your `singletonMap` to the `ListPreparedStatementSetter`, it will set the value of `keys` (which is of type `List`) to the first placeholder and that&#39;s it. The second placeholder will still be unset and the preparation of the statement will fail.\r\n\r\nYou can flatten parameters before passing them to the `ListPreparedStatementSetter` and it should work fine. I added a sample with how to flatten parameters before passing them to the prepared statement setter [here](https://github.com/benas/spring-batch-lab/blob/master/issues/batch2521/src/test/java/com/example/demo/NamedParametersJdbcCursorItemReaderAsListTest.java) (See `flatten` method).\r\n\r\nHope this helps.","title":"Using SpringBatch JdbcCursorItemReader with List as NamedParameters","body":"<p>The <code>ListPreparedStatementSetter</code> is not aware of parameters types. If a parameter is an array or a collection, it will set it as is to the first placeholder, leaving other placeholders unset. Hence the error. In your example, if <code>List&lt;Long&gt; keys = Arrays.asList(1, 2)</code>, your sql statement will be:</p>\n\n<pre><code>SELECT A FROM MYTABLE WHERE KEY IN (?, ?)\n</code></pre>\n\n<p>If you pass your <code>singletonMap</code> to the <code>ListPreparedStatementSetter</code>, it will set the value of <code>keys</code> (which is of type <code>List</code>) to the first placeholder and that's it. The second placeholder will still be unset and the preparation of the statement will fail.</p>\n\n<p>You can flatten parameters before passing them to the <code>ListPreparedStatementSetter</code> and it should work fine. I added a sample with how to flatten parameters before passing them to the prepared statement setter <a href=\"https://github.com/benas/spring-batch-lab/blob/master/issues/batch2521/src/test/java/com/example/demo/NamedParametersJdbcCursorItemReaderAsListTest.java\" rel=\"nofollow noreferrer\">here</a> (See <code>flatten</code> method).</p>\n\n<p>Hope this helps.</p>\n"}],"owner":{"account_id":2252370,"reputation":457,"user_id":1984342,"display_name":"Neeraj Singh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4426,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54884088,"answer_count":1,"score":0,"last_activity_date":1660890688,"creation_date":1550654250,"question_id":54782690,"body_markdown":"I am using below bean definition to configure a reader to read some data from the database table in a Spring Batch project. It is using a named param in SQL. I am passing A java.util.List as a parameter. However, I am getting Invalid Column type error when it tries to run the SQL.\r\n\r\nIf I just hard code one single value (`namedParameters.put(&quot;keys&quot;, &quot;138219&quot;); `) instead of passing a list, it works.\r\n\r\n   \r\n    @Bean\r\n    public JdbcCursorItemReader&lt;MyDTO&gt; myReader() {\r\n    JdbcCursorItemReader&lt;MyDTO&gt; itemReader = new JdbcCursorItemReader&lt;&gt;();\r\n    itemReader.setDataSource(myDatasource);\r\n\titemReader.setRowMapper(return new RowMapper&lt;MyDTO&gt;() {\r\n\t    @Override\r\n\t    public MyDTO mapRow(ResultSet resultSet, int rowNum) throws SQLException {\r\n\t\t   return toMyDto(resultSet);\r\n\t    }\r\n\t};);\r\n\r\n\r\n    Map&lt;String, Object&gt; namedParameters = new HashMap&lt;&gt;();\r\n    List&lt;Long&gt; keys= //Some List\r\n    Map&lt;String, List&lt;Long&gt;&gt; singletonMap = Collections.singletonMap(&quot;keys&quot;, keys);\r\n    namedParameters.putAll(singletonMap);\r\n\r\n    itemReader.setSql(NamedParameterUtils.substituteNamedParameters(&quot;SELECT A FROM MYTABLE WHERE KEY IN (:keys)&quot;,new MapSqlParameterSource(namedParameters)));\r\n\r\n    ListPreparedStatementSetter listPreparedStatementSetter = new ListPreparedStatementSetter();\r\n\tlistPreparedStatementSetter.setParameters(\r\n\t\tArrays.asList(NamedParameterUtils.buildValueArray(&quot;SELECT A FROM MYTABLE WHERE KEY IN (:keys)&quot;, namedParameters)));\r\n\r\n    itemReader.setPreparedStatementSetter(listPreparedStatementSetter);\r\n    return itemReader;\r\n    }\r\n\r\n\r\nI referred [sample code snippet here][1] as a response to one of the [questions][2] asked - it is what seems to be working when we pass one value. However, my issue is with passing a list instead of one value in the param. This is where it seems to fail. \r\n\r\n\r\n  [1]: https://github.com/benas/sandbox/blob/master/batch2521/src/test/java/com/example/demo/NamedParametersJdbcCursorItemReaderTest.java\r\n  [2]: https://stackoverflow.com/questions/23222353/using-spring-batch-jdbccursoritemreader-with-namedparameters","title":"Using SpringBatch JdbcCursorItemReader with List as NamedParameters","body":"<p>I am using below bean definition to configure a reader to read some data from the database table in a Spring Batch project. It is using a named param in SQL. I am passing A java.util.List as a parameter. However, I am getting Invalid Column type error when it tries to run the SQL.</p>\n<p>If I just hard code one single value (<code>namedParameters.put(&quot;keys&quot;, &quot;138219&quot;); </code>) instead of passing a list, it works.</p>\n<pre><code>@Bean\npublic JdbcCursorItemReader&lt;MyDTO&gt; myReader() {\nJdbcCursorItemReader&lt;MyDTO&gt; itemReader = new JdbcCursorItemReader&lt;&gt;();\nitemReader.setDataSource(myDatasource);\nitemReader.setRowMapper(return new RowMapper&lt;MyDTO&gt;() {\n    @Override\n    public MyDTO mapRow(ResultSet resultSet, int rowNum) throws SQLException {\n       return toMyDto(resultSet);\n    }\n};);\n\n\nMap&lt;String, Object&gt; namedParameters = new HashMap&lt;&gt;();\nList&lt;Long&gt; keys= //Some List\nMap&lt;String, List&lt;Long&gt;&gt; singletonMap = Collections.singletonMap(&quot;keys&quot;, keys);\nnamedParameters.putAll(singletonMap);\n\nitemReader.setSql(NamedParameterUtils.substituteNamedParameters(&quot;SELECT A FROM MYTABLE WHERE KEY IN (:keys)&quot;,new MapSqlParameterSource(namedParameters)));\n\nListPreparedStatementSetter listPreparedStatementSetter = new ListPreparedStatementSetter();\nlistPreparedStatementSetter.setParameters(\n    Arrays.asList(NamedParameterUtils.buildValueArray(&quot;SELECT A FROM MYTABLE WHERE KEY IN (:keys)&quot;, namedParameters)));\n\nitemReader.setPreparedStatementSetter(listPreparedStatementSetter);\nreturn itemReader;\n}\n</code></pre>\n<p>I referred <a href=\"https://github.com/benas/sandbox/blob/master/batch2521/src/test/java/com/example/demo/NamedParametersJdbcCursorItemReaderTest.java\" rel=\"nofollow noreferrer\">sample code snippet here</a> as a response to one of the <a href=\"https://stackoverflow.com/questions/23222353/using-spring-batch-jdbccursoritemreader-with-namedparameters\">questions</a> asked - it is what seems to be working when we pass one value. However, my issue is with passing a list instead of one value in the param. This is where it seems to fail.</p>\n"},{"tags":["java","generics","callback"],"comments":[{"owner":{"account_id":115344,"reputation":76329,"user_id":302916,"display_name":"Brian Roach"},"score":4,"creation_date":1362614450,"post_id":15260596,"comment_id":21524883,"body_markdown":"Erm, how about `Observer` http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html and `Observable` http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html","body":"Erm, how about <code>Observer</code> <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/Observer.html</a> and <code>Observable</code> <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/util/Observable.html</a>"},{"owner":{"account_id":31622,"reputation":120341,"user_id":86989,"display_name":"newacct"},"score":0,"creation_date":1362616878,"post_id":15260596,"comment_id":21525748,"body_markdown":"&quot;The ID would be needed for cases of overriden hashCode() methods so that the callee identifies the caller.&quot; I don&#39;t get this part","body":"&quot;The ID would be needed for cases of overriden hashCode() methods so that the callee identifies the caller.&quot; I don&#39;t get this part"},{"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"score":0,"creation_date":1362617533,"post_id":15260596,"comment_id":21525954,"body_markdown":"If you have an &quot;observable&quot; object with a hashCode() method that changes its return value based on the object state, and you keep track of all the observable objects in a HashMap (e.g., to be able to assert when all these objects have finished executing), then you cannot match any tracked observable.","body":"If you have an &quot;observable&quot; object with a hashCode() method that changes its return value based on the object state, and you keep track of all the observable objects in a HashMap (e.g., to be able to assert when all these objects have finished executing), then you cannot match any tracked observable."},{"owner":{"account_id":3282,"reputation":146296,"user_id":4725,"accept_rate":100,"display_name":"Tom Hawtin - tackline"},"score":0,"creation_date":1362620530,"post_id":15260596,"comment_id":21526677,"body_markdown":"It&#39;s better to use specific, meaningful types rather than general, meaningless types.","body":"It&#39;s better to use specific, meaningful types rather than general, meaningless types."}],"answers":[{"tags":[],"owner":{"account_id":96329,"reputation":341,"user_id":2138004,"display_name":"lemil77"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1362615039,"creation_date":1362615039,"answer_id":15260723,"question_id":15260596,"body_markdown":"looks like you want to implement the Observer pattern. In [this url](http://javarevisited.blogspot.com.ar/2011/12/observer-design-pattern-java-example.html) is a complete implementation for the observer pattern in Java. In your case the observer will be the callback.\r\n\r\nAlso If you need to implement something more complex, you will end up doing an event/notifier pattern. Take a look at this other pattern [here](http://www.marco.panizza.name/dispenseTM/slides/exerc/eventNotifier/eventNotifier.html).\r\n\r\nThanks,\r\n@leo.","title":"Generic callback in Java","body":"<p>looks like you want to implement the Observer pattern. In <a href=\"http://javarevisited.blogspot.com.ar/2011/12/observer-design-pattern-java-example.html\" rel=\"nofollow\">this url</a> is a complete implementation for the observer pattern in Java. In your case the observer will be the callback.</p>\n\n<p>Also If you need to implement something more complex, you will end up doing an event/notifier pattern. Take a look at this other pattern <a href=\"http://www.marco.panizza.name/dispenseTM/slides/exerc/eventNotifier/eventNotifier.html\" rel=\"nofollow\">here</a>.</p>\n\n<p>Thanks,\n@leo.</p>\n"},{"tags":[],"owner":{"account_id":916642,"reputation":15473,"user_id":949300,"accept_rate":65,"display_name":"user949300"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1362616618,"creation_date":1362616618,"answer_id":15260988,"question_id":15260596,"body_markdown":"I would genericize the callback, based upon the type of Object passed.  This is particularly useful for EventListeners listening for different classes of events.  e.g.\r\n\r\n    public interface Callback&lt;T&gt; {\r\n       public void callback(T t);\r\n    }\r\n\r\nYou *may* be able to use the type T as the key in a Map.  Of course, if you want to differentiate between two callbacks that take the same argument, like a String, then you&#39;d need something like your `getID()`.\r\n\r\n[Here my old blog about using this for Event Listeners][1]  The interface [Events.Listener&lt;T&gt;][2] corresponds to `Callback&lt;T&gt;` above.  And [Broadcasters][3] uses a Map to keep track of multiple listeners based upon the class they accept as the argument.\r\n\r\n\r\n  [1]: http://flyingspaniel.blogspot.com/2012/07/java-event-handling-revisited.html\r\n  [2]: https://www.assembla.com/code/hastur/subversion/nodes/trunk/Hastur_A22/src/com/flyingspaniel/event/Events.java\r\n  [3]: https://www.assembla.com/code/hastur/subversion/nodes/trunk/Hastur_A22/src/com/flyingspaniel/event/Broadcasters.java","title":"Generic callback in Java","body":"<p>I would genericize the callback, based upon the type of Object passed.  This is particularly useful for EventListeners listening for different classes of events.  e.g.</p>\n\n<pre><code>public interface Callback&lt;T&gt; {\n   public void callback(T t);\n}\n</code></pre>\n\n<p>You <em>may</em> be able to use the type T as the key in a Map.  Of course, if you want to differentiate between two callbacks that take the same argument, like a String, then you'd need something like your <code>getID()</code>.</p>\n\n<p><a href=\"http://flyingspaniel.blogspot.com/2012/07/java-event-handling-revisited.html\">Here my old blog about using this for Event Listeners</a>  The interface <a href=\"https://www.assembla.com/code/hastur/subversion/nodes/trunk/Hastur_A22/src/com/flyingspaniel/event/Events.java\">Events.Listener</a> corresponds to <code>Callback&lt;T&gt;</code> above.  And <a href=\"https://www.assembla.com/code/hastur/subversion/nodes/trunk/Hastur_A22/src/com/flyingspaniel/event/Broadcasters.java\">Broadcasters</a> uses a Map to keep track of multiple listeners based upon the class they accept as the argument.</p>\n"},{"tags":[],"owner":{"account_id":369271,"reputation":98,"user_id":716552,"display_name":"Jeff"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1362620470,"creation_date":1362617137,"answer_id":15261075,"question_id":15260596,"body_markdown":"I&#39;d recommend using **Observer pattern** since the Observer pattern is the gold standard in decoupling - the separation of objects that depend on each other.\r\n\r\nBut I&#39;d recommend avoiding using the **Java.util.Observable class** if you are looking for a generic callback mechanism. Because Observable has a couple of weaknesses: it&#39;s not an interface, and forces you to use Object to represent events.\r\n\r\nYou can define your own event listener like this:\r\n\r\n    public class MyEvent extends EventObject {\r\n        public MyEvent(Object source) {\r\n            super(source);\r\n        }\r\n    }\r\n\r\n    public interface MyEventListener {\r\n        void handleEvent(EventObject event);\r\n    }\r\n\r\n    public class MyEventSource {\r\n        private final List&lt;MyEventListener&gt; listeners;\r\n        public MyEventSource() {\r\n            listeners = new CopyOnWriteArrayList&lt;MyEventListener&gt;();\r\n        }\r\n        public void addMyEventListener(MyEventListener listener) {\r\n            listeners.add(listener);\r\n        }\r\n        public void removeMyEventListener(MyEventListener listener) {\r\n            listeners.remove(listener);\r\n        }\r\n        void fireEvent() {\r\n            MyEvent event = new MyEvent(this);\r\n            for (MyEventListener listener : listeners) {\r\n                listener.handleEvent(event);\r\n            }\r\n        }\r\n    }\r\n","title":"Generic callback in Java","body":"<p>I'd recommend using <strong>Observer pattern</strong> since the Observer pattern is the gold standard in decoupling - the separation of objects that depend on each other.</p>\n\n<p>But I'd recommend avoiding using the <strong>Java.util.Observable class</strong> if you are looking for a generic callback mechanism. Because Observable has a couple of weaknesses: it's not an interface, and forces you to use Object to represent events.</p>\n\n<p>You can define your own event listener like this:</p>\n\n<pre><code>public class MyEvent extends EventObject {\n    public MyEvent(Object source) {\n        super(source);\n    }\n}\n\npublic interface MyEventListener {\n    void handleEvent(EventObject event);\n}\n\npublic class MyEventSource {\n    private final List&lt;MyEventListener&gt; listeners;\n    public MyEventSource() {\n        listeners = new CopyOnWriteArrayList&lt;MyEventListener&gt;();\n    }\n    public void addMyEventListener(MyEventListener listener) {\n        listeners.add(listener);\n    }\n    public void removeMyEventListener(MyEventListener listener) {\n        listeners.remove(listener);\n    }\n    void fireEvent() {\n        MyEvent event = new MyEvent(this);\n        for (MyEventListener listener : listeners) {\n            listener.handleEvent(event);\n        }\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":182970,"reputation":3454,"user_id":418057,"display_name":"Craigo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660890516,"creation_date":1660890516,"answer_id":73412652,"question_id":15260596,"body_markdown":"Callbacks in Java8 can now be done with the [java.util.function][1] package.\r\n\r\nSee https://stackoverflow.com/q/29945627/418057 for more information.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html","title":"Generic callback in Java","body":"<p>Callbacks in Java8 can now be done with the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html\" rel=\"nofollow noreferrer\">java.util.function</a> package.</p>\n<p>See <a href=\"https://stackoverflow.com/q/29945627/418057\">Java 8 lambda Void argument</a> for more information.</p>\n"}],"owner":{"account_id":378959,"reputation":19465,"user_id":834316,"accept_rate":82,"display_name":"PNS"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":19694,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":15261075,"answer_count":4,"score":4,"last_activity_date":1660890516,"creation_date":1362614335,"question_id":15260596,"body_markdown":"What should be the preferable `Java` interface or similar pattern that could be used as a **generic callback mechanism**?\r\n\r\nFor example it could be something like\r\n\r\n    public interface GenericCallback\r\n    {\r\n    \tpublic String getID();\r\n    \tpublic void callback(Object notification);\r\n    \t// or public void callback(String id, Object notification);\r\n    }\r\n\r\nThe ID would be needed for cases of overriden `hashCode()` methods so that the callee identifies the caller.\r\n\r\nA pattern like the above is useful for objects that needs to report back to the class they were spawned from a condition (e.g., end of processing).\r\n\r\nIn this scenario, the &quot;parent&quot; class would use the `getID()` method of each of these `GenericCallback` objects to keep a track of them in a `Map&lt;String, GenericCallable&gt;` and add or remove them according to the notification received.\r\n\r\nAlso, how should such an interface be actually named?\r\n\r\nMany people seem to prefer the [Java Observer pattern][1], but the [Observable class][2] defined there is not convenient, since it not an interface to circumvent single inheritance and it carries more functionality than actually needed in the above, simple scenario.\r\n\r\n  [1]: http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html\r\n  [2]: http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html","title":"Generic callback in Java","body":"<p>What should be the preferable <code>Java</code> interface or similar pattern that could be used as a <strong>generic callback mechanism</strong>?</p>\n\n<p>For example it could be something like</p>\n\n<pre><code>public interface GenericCallback\n{\n    public String getID();\n    public void callback(Object notification);\n    // or public void callback(String id, Object notification);\n}\n</code></pre>\n\n<p>The ID would be needed for cases of overriden <code>hashCode()</code> methods so that the callee identifies the caller.</p>\n\n<p>A pattern like the above is useful for objects that needs to report back to the class they were spawned from a condition (e.g., end of processing).</p>\n\n<p>In this scenario, the \"parent\" class would use the <code>getID()</code> method of each of these <code>GenericCallback</code> objects to keep a track of them in a <code>Map&lt;String, GenericCallable&gt;</code> and add or remove them according to the notification received.</p>\n\n<p>Also, how should such an interface be actually named?</p>\n\n<p>Many people seem to prefer the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Observer.html\" rel=\"nofollow\">Java Observer pattern</a>, but the <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/Observable.html\" rel=\"nofollow\">Observable class</a> defined there is not convenient, since it not an interface to circumvent single inheritance and it carries more functionality than actually needed in the above, simple scenario.</p>\n"},{"tags":["java","c++","spring-boot","yaml","metaprogramming"],"owner":{"account_id":15424529,"reputation":474,"user_id":11127623,"display_name":"Guilty"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660890266,"creation_date":1660839418,"question_id":73406418,"body_markdown":"I used to work with the Java framework spring boot which has this neat functionality where\r\nyou can have an yaml file like this:\r\n```\r\nconfig:\r\n  example_int: 17\r\n```\r\nAnd a java class like this:\r\n```\r\npublic class Config {\r\n  int example_int;\r\n  config(example_int) {\r\n    this.example_int = example_int;\r\n  }\r\n}\r\n```\r\nThe framework would then (if I remember correctly) inject into the runtime\r\nan instance of class `Config` with `example_int` data member initialized to 17.\r\n\r\nI&#39;m looking to implement a similar functionality in C++\r\ni.e. parse a yaml file and then construct a c++ object based on the files contents.\r\n\r\nWhile (I think) Spring uses runtime injection I think I could do this via meta programming to\r\nreduce complexity.\r\nTLDR:\r\n  1. Parse yaml with C++\r\n  2. Based on yaml configs inject an object into the runtime, or generate code via \r\n     metaprogramming, which has the characteristics defined in the yaml file.","title":"C++ Representing Objects in a YAML file","body":"<p>I used to work with the Java framework spring boot which has this neat functionality where\nyou can have an yaml file like this:</p>\n<pre><code>config:\n  example_int: 17\n</code></pre>\n<p>And a java class like this:</p>\n<pre><code>public class Config {\n  int example_int;\n  config(example_int) {\n    this.example_int = example_int;\n  }\n}\n</code></pre>\n<p>The framework would then (if I remember correctly) inject into the runtime\nan instance of class <code>Config</code> with <code>example_int</code> data member initialized to 17.</p>\n<p>I'm looking to implement a similar functionality in C++\ni.e. parse a yaml file and then construct a c++ object based on the files contents.</p>\n<p>While (I think) Spring uses runtime injection I think I could do this via meta programming to\nreduce complexity.\nTLDR:</p>\n<ol>\n<li>Parse yaml with C++</li>\n<li>Based on yaml configs inject an object into the runtime, or generate code via\nmetaprogramming, which has the characteristics defined in the yaml file.</li>\n</ol>\n"},{"tags":["java","android","android-studio","internationalization","android-locale"],"comments":[{"owner":{"account_id":2197099,"reputation":2498,"user_id":1942463,"display_name":"Rajasekaran M"},"score":0,"creation_date":1660889553,"post_id":73412211,"comment_id":129644474,"body_markdown":"can you add screenshot your resource folder? and do you used values-hu folder for Hungarian language strings.xml?","body":"can you add screenshot your resource folder? and do you used values-hu folder for Hungarian language strings.xml?"},{"owner":{"account_id":18416481,"reputation":51,"user_id":13415221,"display_name":"chutwik"},"score":0,"creation_date":1660890100,"post_id":73412211,"comment_id":129644591,"body_markdown":"Hi @RajasekaranM thank you for responding. Please find the screenshot of the res directory in the post.","body":"Hi @RajasekaranM thank you for responding. Please find the screenshot of the res directory in the post."},{"owner":{"account_id":12438275,"reputation":1057,"user_id":9057721,"display_name":"Style-7"},"score":0,"creation_date":1660891568,"post_id":73412211,"comment_id":129644985,"body_markdown":"You can get names of month and days of the week programmatically","body":"You can get names of month and days of the week programmatically"},{"owner":{"account_id":18416481,"reputation":51,"user_id":13415221,"display_name":"chutwik"},"score":0,"creation_date":1660893538,"post_id":73412211,"comment_id":129645534,"body_markdown":"In Hungarian Language?.. I don&#39;t know that @Style-7. Could you please help me with an example as to how we can do that?","body":"In Hungarian Language?.. I don&#39;t know that @Style-7. Could you please help me with an example as to how we can do that?"},{"owner":{"account_id":12438275,"reputation":1057,"user_id":9057721,"display_name":"Style-7"},"score":0,"creation_date":1660898630,"post_id":73412211,"comment_id":129647152,"body_markdown":"sure, any language, see SimpleDateFormat","body":"sure, any language, see SimpleDateFormat"}],"owner":{"account_id":18416481,"reputation":51,"user_id":13415221,"display_name":"chutwik"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660890041,"creation_date":1660887136,"question_id":73412211,"body_markdown":"I am facing a weird issue where there are only few strings appearing in english when the locale is set to hungary. This is happening on very few devices of various OS versions. \r\n\r\nHere are few devices I&#39;ve tried on: \r\n\r\nOne Plus 8 running Android 12 (works perfectly fine)\r\nGoogle Pixel 5 running Android 12 (works well)\r\nGalaxy S10 running Android 12 (date strings appear in english when locale is HU)\r\nOne Plus 5t running Android 10 (date strings appear in english when locale is HU)\r\nanother One Plus 5t running Android 10 (works well)\r\n\r\nand emulators of various android versions shows all the strings the way it should. i.e. all strings appear in hungary.\r\n\r\nHere&#39;s the code:\r\n\r\n**strings.xml:**\r\n   ``` \r\n&lt;string-array name=&quot;months_name&quot;&gt;\r\n        &lt;item&gt;Jan&lt;/item&gt;\r\n        &lt;item&gt;Feb&lt;/item&gt;\r\n        &lt;item&gt;Mar&lt;/item&gt;\r\n        &lt;item&gt;Apr&lt;/item&gt;\r\n        &lt;item&gt;May&lt;/item&gt;\r\n        &lt;item&gt;Jun&lt;/item&gt;\r\n        &lt;item&gt;Jul&lt;/item&gt;\r\n        &lt;item&gt;Aug&lt;/item&gt;\r\n        &lt;item&gt;Sep&lt;/item&gt;\r\n        &lt;item&gt;Oct&lt;/item&gt;\r\n        &lt;item&gt;Nov&lt;/item&gt;\r\n        &lt;item&gt;Dec&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n    &lt;string-array name=&quot;full_months_name&quot;&gt;\r\n        &lt;item&gt;January&lt;/item&gt;\r\n        &lt;item&gt;February&lt;/item&gt;\r\n        &lt;item&gt;March&lt;/item&gt;\r\n        &lt;item&gt;April&lt;/item&gt;\r\n        &lt;item&gt;May&lt;/item&gt;\r\n        &lt;item&gt;June&lt;/item&gt;\r\n        &lt;item&gt;July&lt;/item&gt;\r\n        &lt;item&gt;August&lt;/item&gt;\r\n        &lt;item&gt;September&lt;/item&gt;\r\n        &lt;item&gt;October&lt;/item&gt;\r\n        &lt;item&gt;November&lt;/item&gt;\r\n        &lt;item&gt;December&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n\r\n&lt;string name=&quot;st&quot;&gt;st&lt;/string&gt;\r\n    &lt;string name=&quot;nd&quot;&gt;nd&lt;/string&gt;\r\n    &lt;string name=&quot;rd&quot;&gt;rd&lt;/string&gt;\r\n    &lt;string name=&quot;th&quot;&gt;th&lt;/string&gt;\r\n\r\n```\r\n**strings-hu.xml:**\r\n```\r\n &lt;string-array name=&quot;months_name&quot;&gt;\r\n        &lt;item&gt;Jan&lt;/item&gt;\r\n        &lt;item&gt;Febr&lt;/item&gt;\r\n        &lt;item&gt;M&#225;rc&lt;/item&gt;\r\n        &lt;item&gt;&#193;pr&lt;/item&gt;\r\n        &lt;item&gt;M&#225;j&lt;/item&gt;\r\n        &lt;item&gt;J&#250;n&lt;/item&gt;\r\n        &lt;item&gt;J&#250;l&lt;/item&gt;\r\n        &lt;item&gt;Aug&lt;/item&gt;\r\n        &lt;item&gt;Szept&lt;/item&gt;\r\n        &lt;item&gt;Okt&lt;/item&gt;\r\n        &lt;item&gt;Nov&lt;/item&gt;\r\n        &lt;item&gt;Dec&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n    &lt;string-array name=&quot;full_months_name&quot;&gt;\r\n        &lt;item&gt;janu&#225;r&lt;/item&gt;\r\n        &lt;item&gt;febru&#225;r&lt;/item&gt;\r\n        &lt;item&gt;m&#225;rcius&lt;/item&gt;\r\n        &lt;item&gt;&#225;prilis&lt;/item&gt;\r\n        &lt;item&gt;Lehet&lt;/item&gt;\r\n        &lt;item&gt;j&#250;nius&lt;/item&gt;\r\n        &lt;item&gt;j&#250;lius&lt;/item&gt;\r\n        &lt;item&gt;augusztus&lt;/item&gt;\r\n        &lt;item&gt;szeptember&lt;/item&gt;\r\n        &lt;item&gt;okt&#243;ber&lt;/item&gt;\r\n        &lt;item&gt;November&lt;/item&gt;\r\n        &lt;item&gt;December&lt;/item&gt;\r\n    &lt;/string-array&gt;\r\n    \r\n    \r\n    &lt;string name=&quot;st&quot;&gt;&lt;/string&gt;\r\n    &lt;string name=&quot;nd&quot;&gt;&lt;/string&gt;\r\n    &lt;string name=&quot;rd&quot;&gt;&lt;/string&gt;\r\n    &lt;string name=&quot;th&quot;&gt;&lt;/string&gt;\r\n```\r\n\r\n**DateFormatter.java:**\r\n```\r\npackage app.util;\r\n\r\nimport android.content.Context;\r\n\r\nimport java.text.NumberFormat;\r\nimport java.util.Calendar;\r\nimport java.util.Locale;\r\n\r\npublic class DateFormatter {\r\n\r\n\tprivate static Integer date;\r\n\tprivate static Integer month;\r\n\tprivate static Integer year;\r\n\tprivate static String[] monthArray;\r\n\tprivate static String[] shortMonthArray;\r\n\r\n\tpublic static String formatDate(long milliseconds, Context context) {\r\n\t\tinit(milliseconds, context);\r\n\r\n\t\tif (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\r\n\t\t\treturn getDateString(date, context) + &quot; &quot; + getMonth(month, true) + &quot; &quot; + numberFormatBasedOnLanguage(year);\r\n\t\t} else {\r\n\t\t\treturn numberFormatBasedOnLanguage(year) + &quot; &quot; + getMonth(month, true) + &quot; &quot; + getDateString(date, context);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static String formatDateMonthAndYear(long milliseconds, Context context) {\r\n\t\tinit(milliseconds, context);\r\n\r\n\t\tif (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\r\n\t\t\treturn getDateString(date, context) + &quot;-&quot; + getMonth(month, true) + &quot;-&quot; + numberFormatBasedOnLanguage(year);\r\n\t\t} else {\r\n\t\t\treturn numberFormatBasedOnLanguage(year) + &quot;. &quot; + getMonth(month, true) + &quot; &quot; + getDateString(date, context);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tpublic static String formatDateAndMonth(long milliseconds, Context context,\r\n\t\t\tboolean suffixRequired) {\r\n\t\tinit(milliseconds, context);\r\n\t\tif (suffixRequired) {\r\n\t\t\tif (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\r\n\t\t\t\treturn getDateString(date, context) + &quot; &quot; + getMonth(month, true);\r\n\t\t\t} else {\r\n\t\t\t\treturn  getMonth(month, true) + &quot; &quot; + numberFormatBasedOnLanguage(date);\r\n\t\t\t}\r\n\t\t} else if (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\r\n\t\t\treturn numberFormatBasedOnLanguage(date) + &quot; &quot; + getMonth(month, true);\r\n\t\t} else {\r\n\t\t\treturn getMonth(month, true) + &quot; &quot; + numberFormatBasedOnLanguage(date);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static String formatToDDMMMY(long milliseconds, Context context) {\r\n\t\tinit(milliseconds, context);\r\n\r\n\t\tif (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\r\n\t\t\treturn numberFormatBasedOnLanguage(date) + &quot; &quot; + getMonth(month, false) + &quot; &quot; + numberFormatBasedOnLanguage(year);\r\n\t\t} else {\r\n\t\t\treturn numberFormatBasedOnLanguage(year) + &quot;. &quot; + getMonth(month, true) + &quot; &quot; + getDateString(date, context);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static String formatToDDMMMYYYY(long milliseconds, Context context) {\r\n\t\tinit(milliseconds, context);\r\n\t\treturn numberFormatBasedOnLanguage(date) + &quot;-&quot;\r\n\t\t\t\t+ (getMonth(month, false)).toUpperCase(Constants.LANGUAGE)\r\n\t\t\t\t+ &quot;-&quot; + numberFormatBasedOnLanguage(year);\r\n\t}\r\n\tpublic static String numberFormatBasedOnLanguage(long value){\r\n\t\tif(BuildConfig.IS_NUMBER_FORMAT_ENABLED){\r\n\t\t\tNumberFormat nf= NumberFormat.getInstance(new Locale(Locale.getDefault().getLanguage()));\r\n\t\t\tnf.setGroupingUsed(false);\r\n\t\t\treturn nf.format(value);\r\n\t\t}else{\r\n\t\t\treturn &quot;&quot;+value;\r\n\t\t}\r\n\t}\r\n\tpublic static String numberFormatBasedOnLanguage(String value){\r\n\t\tif(BuildConfig.IS_NUMBER_FORMAT_ENABLED){\r\n\t\tNumberFormat nf= NumberFormat.getInstance(new Locale(Locale.getDefault().getLanguage()));\r\n\t\t\tnf.setGroupingUsed(false);\r\n\t\treturn nf.format(Integer.parseInt(value));\r\n\t\t}else{\r\n\t\t\treturn &quot;&quot;+value;\r\n\t\t}\r\n\t}\r\n\tpublic static String numberFormatGlobalBasedOn(String value){\r\n\t\tif(BuildConfig.IS_NUMBER_FORMAT_ENABLED){\r\n\t\t\tNumberFormat nf= NumberFormat.getInstance(new Locale(Constants.GLOBAL));\r\n\t\t\tnf.setGroupingUsed(false);\r\n\t\t\treturn nf.format(Integer.parseInt(value));\r\n\t\t}else{\r\n\t\t\treturn &quot;&quot;+value;\r\n\t\t}\r\n\t}\r\n\tprivate static void init(long milliseconds, Context context) {\r\n\t\tmonthArray = context.getResources().getStringArray(\r\n\t\t\t\tR.array.full_months_name);\r\n\t\tshortMonthArray = context.getResources().getStringArray(\r\n\t\t\t\tR.array.months_name);\r\n\t\tCalendar cal = Calendar.getInstance();\r\n\t\tcal.setTimeInMillis(milliseconds);\r\n\t\tdate = cal.get(Calendar.DATE);\r\n\t\tmonth = cal.get(Calendar.MONTH);\r\n\t\tyear = cal.get(Calendar.YEAR);\r\n\t\tLog.d(&quot;DateFormatter&quot;, &quot;date:&quot; + date + &quot; month:&quot; + month + &quot; year&quot;\r\n\t\t\t\t+ year);\r\n\t}\r\n\r\n\tprivate static String getDateString(Integer date, Context context) {\r\n\t\tString extension = &quot;&quot;;\r\n\t\tif (BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\r\n\t\t\treturn DateFormatter.numberFormatBasedOnLanguage(date) + extension;\r\n\t\t}\r\n\t\tif (date == 1 || date == 21 || date == 31) {\r\n\t\t\textension = context.getString(R.string.st);\r\n\t\t} else if (date == 2 || date == 22) {\r\n\t\t\textension = context.getString(R.string.nd);\r\n\t\t} else if (date == 3 || date == 23) {\r\n\t\t\textension = context.getString(R.string.rd);\r\n\t\t} else if (date == 4 || (date &gt; 4 &amp;&amp; date &lt; 21)\r\n\t\t\t\t|| (date &gt; 23 &amp;&amp; date &lt; 31)) {\r\n\t\t\textension = context.getString(R.string.th);\r\n\t\t}\r\n\t\treturn DateFormatter.numberFormatBasedOnLanguage(date) + extension;\r\n\t}\r\n\r\n\tprivate static String getMonth(Integer month, boolean fullMonth) {\r\n\t\tif (fullMonth) {\r\n\t\t\treturn monthArray[month];\r\n\t\t}\r\n\t\treturn shortMonthArray[month];\r\n\t}\r\n}\r\n\r\n```\r\nHere we&#39;re setting the language for the whole application:\r\n\r\n**SplashScreenActivity.java:**\r\n```\r\n\t/**\r\n\t * This method is to set the locale language.\r\n\t */\r\n\tprivate void setLocale(String language) {\r\n\t\tLocale locale = new Locale(language);\r\n\t\tLocale.setDefault(locale);\r\n\t\tConfiguration config = new Configuration();\r\n\t\tconfig.locale = locale;\r\n\t\tgetBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());\r\n\t}\r\n\r\n```\r\n\r\nThe above code works perfect in most of the devices. But on few devices it fails to show the date in hungarian language. It&#39;s happening on various android OS versions, so I&#39;m not able to pinpoint where exactly the problem is.\r\n\r\nAlso, I&#39;ve tried setting the device language to hungarian language but still the date appears in english in spite of that.\r\n\r\nCan anyone please help me with this problem?\r\n\r\nScreenshot of res folder:\r\n\r\n[res folder][1]\r\n\r\nThank you.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/A8dfP.png","title":"only few localisation strings not working on few android devices","body":"<p>I am facing a weird issue where there are only few strings appearing in english when the locale is set to hungary. This is happening on very few devices of various OS versions.</p>\n<p>Here are few devices I've tried on:</p>\n<p>One Plus 8 running Android 12 (works perfectly fine)\nGoogle Pixel 5 running Android 12 (works well)\nGalaxy S10 running Android 12 (date strings appear in english when locale is HU)\nOne Plus 5t running Android 10 (date strings appear in english when locale is HU)\nanother One Plus 5t running Android 10 (works well)</p>\n<p>and emulators of various android versions shows all the strings the way it should. i.e. all strings appear in hungary.</p>\n<p>Here's the code:</p>\n<p><strong>strings.xml:</strong></p>\n<pre><code>&lt;string-array name=&quot;months_name&quot;&gt;\n     &lt;item&gt;Jan&lt;/item&gt;\n     &lt;item&gt;Feb&lt;/item&gt;\n     &lt;item&gt;Mar&lt;/item&gt;\n     &lt;item&gt;Apr&lt;/item&gt;\n     &lt;item&gt;May&lt;/item&gt;\n     &lt;item&gt;Jun&lt;/item&gt;\n     &lt;item&gt;Jul&lt;/item&gt;\n     &lt;item&gt;Aug&lt;/item&gt;\n     &lt;item&gt;Sep&lt;/item&gt;\n     &lt;item&gt;Oct&lt;/item&gt;\n     &lt;item&gt;Nov&lt;/item&gt;\n     &lt;item&gt;Dec&lt;/item&gt;\n &lt;/string-array&gt;\n &lt;string-array name=&quot;full_months_name&quot;&gt;\n     &lt;item&gt;January&lt;/item&gt;\n     &lt;item&gt;February&lt;/item&gt;\n     &lt;item&gt;March&lt;/item&gt;\n     &lt;item&gt;April&lt;/item&gt;\n     &lt;item&gt;May&lt;/item&gt;\n     &lt;item&gt;June&lt;/item&gt;\n     &lt;item&gt;July&lt;/item&gt;\n     &lt;item&gt;August&lt;/item&gt;\n     &lt;item&gt;September&lt;/item&gt;\n     &lt;item&gt;October&lt;/item&gt;\n     &lt;item&gt;November&lt;/item&gt;\n     &lt;item&gt;December&lt;/item&gt;\n &lt;/string-array&gt;\n\n&lt;string name=&quot;st&quot;&gt;st&lt;/string&gt;\n &lt;string name=&quot;nd&quot;&gt;nd&lt;/string&gt;\n &lt;string name=&quot;rd&quot;&gt;rd&lt;/string&gt;\n &lt;string name=&quot;th&quot;&gt;th&lt;/string&gt;\n\n</code></pre>\n<p><strong>strings-hu.xml:</strong></p>\n<pre><code> &lt;string-array name=&quot;months_name&quot;&gt;\n        &lt;item&gt;Jan&lt;/item&gt;\n        &lt;item&gt;Febr&lt;/item&gt;\n        &lt;item&gt;Márc&lt;/item&gt;\n        &lt;item&gt;Ápr&lt;/item&gt;\n        &lt;item&gt;Máj&lt;/item&gt;\n        &lt;item&gt;Jún&lt;/item&gt;\n        &lt;item&gt;Júl&lt;/item&gt;\n        &lt;item&gt;Aug&lt;/item&gt;\n        &lt;item&gt;Szept&lt;/item&gt;\n        &lt;item&gt;Okt&lt;/item&gt;\n        &lt;item&gt;Nov&lt;/item&gt;\n        &lt;item&gt;Dec&lt;/item&gt;\n    &lt;/string-array&gt;\n    &lt;string-array name=&quot;full_months_name&quot;&gt;\n        &lt;item&gt;január&lt;/item&gt;\n        &lt;item&gt;február&lt;/item&gt;\n        &lt;item&gt;március&lt;/item&gt;\n        &lt;item&gt;április&lt;/item&gt;\n        &lt;item&gt;Lehet&lt;/item&gt;\n        &lt;item&gt;június&lt;/item&gt;\n        &lt;item&gt;július&lt;/item&gt;\n        &lt;item&gt;augusztus&lt;/item&gt;\n        &lt;item&gt;szeptember&lt;/item&gt;\n        &lt;item&gt;október&lt;/item&gt;\n        &lt;item&gt;November&lt;/item&gt;\n        &lt;item&gt;December&lt;/item&gt;\n    &lt;/string-array&gt;\n    \n    \n    &lt;string name=&quot;st&quot;&gt;&lt;/string&gt;\n    &lt;string name=&quot;nd&quot;&gt;&lt;/string&gt;\n    &lt;string name=&quot;rd&quot;&gt;&lt;/string&gt;\n    &lt;string name=&quot;th&quot;&gt;&lt;/string&gt;\n</code></pre>\n<p><strong>DateFormatter.java:</strong></p>\n<pre><code>package app.util;\n\nimport android.content.Context;\n\nimport java.text.NumberFormat;\nimport java.util.Calendar;\nimport java.util.Locale;\n\npublic class DateFormatter {\n\n    private static Integer date;\n    private static Integer month;\n    private static Integer year;\n    private static String[] monthArray;\n    private static String[] shortMonthArray;\n\n    public static String formatDate(long milliseconds, Context context) {\n        init(milliseconds, context);\n\n        if (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\n            return getDateString(date, context) + &quot; &quot; + getMonth(month, true) + &quot; &quot; + numberFormatBasedOnLanguage(year);\n        } else {\n            return numberFormatBasedOnLanguage(year) + &quot; &quot; + getMonth(month, true) + &quot; &quot; + getDateString(date, context);\n        }\n    }\n\n    public static String formatDateMonthAndYear(long milliseconds, Context context) {\n        init(milliseconds, context);\n\n        if (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\n            return getDateString(date, context) + &quot;-&quot; + getMonth(month, true) + &quot;-&quot; + numberFormatBasedOnLanguage(year);\n        } else {\n            return numberFormatBasedOnLanguage(year) + &quot;. &quot; + getMonth(month, true) + &quot; &quot; + getDateString(date, context);\n        }\n    }\n\n\n    public static String formatDateAndMonth(long milliseconds, Context context,\n            boolean suffixRequired) {\n        init(milliseconds, context);\n        if (suffixRequired) {\n            if (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\n                return getDateString(date, context) + &quot; &quot; + getMonth(month, true);\n            } else {\n                return  getMonth(month, true) + &quot; &quot; + numberFormatBasedOnLanguage(date);\n            }\n        } else if (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\n            return numberFormatBasedOnLanguage(date) + &quot; &quot; + getMonth(month, true);\n        } else {\n            return getMonth(month, true) + &quot; &quot; + numberFormatBasedOnLanguage(date);\n        }\n    }\n\n    public static String formatToDDMMMY(long milliseconds, Context context) {\n        init(milliseconds, context);\n\n        if (!BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\n            return numberFormatBasedOnLanguage(date) + &quot; &quot; + getMonth(month, false) + &quot; &quot; + numberFormatBasedOnLanguage(year);\n        } else {\n            return numberFormatBasedOnLanguage(year) + &quot;. &quot; + getMonth(month, true) + &quot; &quot; + getDateString(date, context);\n        }\n    }\n\n    public static String formatToDDMMMYYYY(long milliseconds, Context context) {\n        init(milliseconds, context);\n        return numberFormatBasedOnLanguage(date) + &quot;-&quot;\n                + (getMonth(month, false)).toUpperCase(Constants.LANGUAGE)\n                + &quot;-&quot; + numberFormatBasedOnLanguage(year);\n    }\n    public static String numberFormatBasedOnLanguage(long value){\n        if(BuildConfig.IS_NUMBER_FORMAT_ENABLED){\n            NumberFormat nf= NumberFormat.getInstance(new Locale(Locale.getDefault().getLanguage()));\n            nf.setGroupingUsed(false);\n            return nf.format(value);\n        }else{\n            return &quot;&quot;+value;\n        }\n    }\n    public static String numberFormatBasedOnLanguage(String value){\n        if(BuildConfig.IS_NUMBER_FORMAT_ENABLED){\n        NumberFormat nf= NumberFormat.getInstance(new Locale(Locale.getDefault().getLanguage()));\n            nf.setGroupingUsed(false);\n        return nf.format(Integer.parseInt(value));\n        }else{\n            return &quot;&quot;+value;\n        }\n    }\n    public static String numberFormatGlobalBasedOn(String value){\n        if(BuildConfig.IS_NUMBER_FORMAT_ENABLED){\n            NumberFormat nf= NumberFormat.getInstance(new Locale(Constants.GLOBAL));\n            nf.setGroupingUsed(false);\n            return nf.format(Integer.parseInt(value));\n        }else{\n            return &quot;&quot;+value;\n        }\n    }\n    private static void init(long milliseconds, Context context) {\n        monthArray = context.getResources().getStringArray(\n                R.array.full_months_name);\n        shortMonthArray = context.getResources().getStringArray(\n                R.array.months_name);\n        Calendar cal = Calendar.getInstance();\n        cal.setTimeInMillis(milliseconds);\n        date = cal.get(Calendar.DATE);\n        month = cal.get(Calendar.MONTH);\n        year = cal.get(Calendar.YEAR);\n        Log.d(&quot;DateFormatter&quot;, &quot;date:&quot; + date + &quot; month:&quot; + month + &quot; year&quot;\n                + year);\n    }\n\n    private static String getDateString(Integer date, Context context) {\n        String extension = &quot;&quot;;\n        if (BuildConfig.FLAVOR.equals(BuildConfig.Flavor_Hungarian)) {\n            return DateFormatter.numberFormatBasedOnLanguage(date) + extension;\n        }\n        if (date == 1 || date == 21 || date == 31) {\n            extension = context.getString(R.string.st);\n        } else if (date == 2 || date == 22) {\n            extension = context.getString(R.string.nd);\n        } else if (date == 3 || date == 23) {\n            extension = context.getString(R.string.rd);\n        } else if (date == 4 || (date &gt; 4 &amp;&amp; date &lt; 21)\n                || (date &gt; 23 &amp;&amp; date &lt; 31)) {\n            extension = context.getString(R.string.th);\n        }\n        return DateFormatter.numberFormatBasedOnLanguage(date) + extension;\n    }\n\n    private static String getMonth(Integer month, boolean fullMonth) {\n        if (fullMonth) {\n            return monthArray[month];\n        }\n        return shortMonthArray[month];\n    }\n}\n\n</code></pre>\n<p>Here we're setting the language for the whole application:</p>\n<p><strong>SplashScreenActivity.java:</strong></p>\n<pre><code>    /**\n     * This method is to set the locale language.\n     */\n    private void setLocale(String language) {\n        Locale locale = new Locale(language);\n        Locale.setDefault(locale);\n        Configuration config = new Configuration();\n        config.locale = locale;\n        getBaseContext().getResources().updateConfiguration(config, getBaseContext().getResources().getDisplayMetrics());\n    }\n\n</code></pre>\n<p>The above code works perfect in most of the devices. But on few devices it fails to show the date in hungarian language. It's happening on various android OS versions, so I'm not able to pinpoint where exactly the problem is.</p>\n<p>Also, I've tried setting the device language to hungarian language but still the date appears in english in spite of that.</p>\n<p>Can anyone please help me with this problem?</p>\n<p>Screenshot of res folder:</p>\n<p><a href=\"https://i.stack.imgur.com/A8dfP.png\" rel=\"nofollow noreferrer\">res folder</a></p>\n<p>Thank you.</p>\n"},{"tags":["java","reflect"],"comments":[{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1660889762,"post_id":73412525,"comment_id":129644521,"body_markdown":"You want to find out which method Java would call, given a list of arguments?","body":"You want to find out which method Java would call, given a list of arguments?"},{"owner":{"account_id":20178095,"reputation":1,"user_id":14799256,"display_name":"王志英"},"score":0,"creation_date":1660890883,"post_id":73412525,"comment_id":129644804,"body_markdown":"yes, I want that","body":"yes, I want that"}],"owner":{"account_id":20178095,"reputation":1,"user_id":14799256,"display_name":"王志英"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660889627,"creation_date":1660889627,"question_id":73412525,"body_markdown":"el:\r\ndefined some method such as:\r\n```\r\n  class AClass {\r\n    public void dynamicMethod(String a, String... b) {\r\n      log.info(&quot;dynamic String arg:&quot; + a);\r\n    }\r\n\r\n    public void dynamicMethod(String a, Integer... b) {\r\n      log.info(&quot;dynamic Integer arg:&quot; + a);\r\n    }\r\n\r\n    public void dynamicMethod(String a, Object... b) {\r\n      log.info(&quot;dynamic Object arg:&quot; + a);\r\n    }\r\n  }\r\n```\r\nJVM can execute correctly:\r\n```\r\n    @Test\r\n    public void testDynamicArgs() throws Exception {\r\n        this.dynamicMethod(&quot;String&quot;, &quot;s1&quot;, &quot;s2&quot;);\r\n        this.dynamicMethod(&quot;Integer&quot;, 1, 2);\r\n        this.dynamicMethod(&quot;Object&quot;, &quot;1&quot;, null, 2);\r\n    }\r\n```\r\nconsole:\r\n```\r\ndynamic String arg:String\r\ndynamic Integer arg:Integer\r\ndynamic Object arg:Object\r\n```\r\nso when have class `this.getClass()`,method name `dynamicMethod`,args `&quot;1&quot;, null, 2`;how to determine the right Method.Because arguments maybe contain `null` variable number or even both.Determine the parameter type in turn is not an efficient way.Is there a tool method provided in the JVM or other open source projects.\r\n```\r\n  public Method getMethod(Class&lt;?&gt; clazz, String methodName, Object[] args) {\r\n    // TODO how write there;\r\n  }\r\n```","title":"Method Reflect - When have class,method name and args;how to reflect a method","body":"<p>el:\ndefined some method such as:</p>\n<pre><code>  class AClass {\n    public void dynamicMethod(String a, String... b) {\n      log.info(&quot;dynamic String arg:&quot; + a);\n    }\n\n    public void dynamicMethod(String a, Integer... b) {\n      log.info(&quot;dynamic Integer arg:&quot; + a);\n    }\n\n    public void dynamicMethod(String a, Object... b) {\n      log.info(&quot;dynamic Object arg:&quot; + a);\n    }\n  }\n</code></pre>\n<p>JVM can execute correctly:</p>\n<pre><code>    @Test\n    public void testDynamicArgs() throws Exception {\n        this.dynamicMethod(&quot;String&quot;, &quot;s1&quot;, &quot;s2&quot;);\n        this.dynamicMethod(&quot;Integer&quot;, 1, 2);\n        this.dynamicMethod(&quot;Object&quot;, &quot;1&quot;, null, 2);\n    }\n</code></pre>\n<p>console:</p>\n<pre><code>dynamic String arg:String\ndynamic Integer arg:Integer\ndynamic Object arg:Object\n</code></pre>\n<p>so when have class <code>this.getClass()</code>,method name <code>dynamicMethod</code>,args <code>&quot;1&quot;, null, 2</code>;how to determine the right Method.Because arguments maybe contain <code>null</code> variable number or even both.Determine the parameter type in turn is not an efficient way.Is there a tool method provided in the JVM or other open source projects.</p>\n<pre><code>  public Method getMethod(Class&lt;?&gt; clazz, String methodName, Object[] args) {\n    // TODO how write there;\n  }\n</code></pre>\n"},{"tags":["java","visual-studio-code"],"answers":[{"tags":[],"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660889548,"creation_date":1660889548,"answer_id":73412516,"question_id":73407788,"body_markdown":"Open the command palette with &lt;kbd&gt;Ctrl&lt;/kbd&gt;+&lt;kbd&gt;Shift&lt;/kbd&gt;+&lt;kbd&gt;P&lt;/kbd&gt; and select **Java: Clean Java Language Server Workspace**. \r\n\r\nGenerally this will solve your problem.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/InEBU.png","title":"The language support for Java crashed 5 times on the last 3 minutes","body":"<p>Open the command palette with <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>P</kbd> and select <strong>Java: Clean Java Language Server Workspace</strong>.</p>\n<p>Generally this will solve your problem.</p>\n<p><a href=\"https://i.stack.imgur.com/InEBU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/InEBU.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":16909292,"reputation":385,"user_id":12228795,"display_name":"Ot&#225;vio Augusto Silva"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":525,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660889548,"creation_date":1660846932,"question_id":73407788,"body_markdown":"I&#39;m trying to use the Extension Pack for Java by Microsoft. I have a file called `main.java` that has the following code:\r\n```\r\nclass Main {\r\n\tpublic static void main(String[] args) {\r\n\t\tSystem.out.println(&quot;Hello World!&quot;);\r\n\t}\r\n}\r\n```\r\nBut when I open the file in Visual Studio Code, I receive the infamous message &quot;The Language Support for Java server crashed 5 times in the last 3 minutes. The server will not be restarted.&quot;. I checked the logs and this is what in them:\r\n```\r\n{\r\n  message: &quot;Use the JDK from &#39;JAVA_HOME,PATH&#39; as the initial default project JDK.&quot;,\r\n  level: &#39;info&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:02.759&#39;\r\n}\r\n{\r\n  message: &#39;Starting Java server with: c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\jre\\\\17.0.3-win32-x86_64\\\\bin\\\\java --add-modules=ALL-SYSTEM --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/sun.nio.fs=ALL-UNNAMED -Declipse.application=org.eclipse.jdt.ls.core.id1 -Dosgi.bundles.defaultStartLevel=4 -Declipse.product=org.eclipse.jdt.ls.core.product -Djava.import.generatesMetadataFilesAtProjectRoot=false -Dfile.encoding=utf8 -DwatchParentProcess=false -XX:+UseParallelGC -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90 -Dsun.zip.disableMemoryMapping=true -Xmx1G -Xms100m -javaagent:c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\lombok\\\\lombok-1.18.24.jar -jar c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\server\\\\plugins\\\\org.eclipse.equinox.launcher_1.6.400.v20210924-0641.jar -configuration c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\globalStorage\\\\redhat.java\\\\1.9.0\\\\config_ss_win -data c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\workspaceStorage\\\\092e9f14627920ce78f64c2dbd9c572e\\\\redhat.java\\\\ss_ws&#39;,\r\n  level: &#39;info&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:02.811&#39;\r\n}\r\n{\r\n  message: &#39;Starting Java server with: c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\jre\\\\17.0.3-win32-x86_64\\\\bin\\\\java --add-modules=ALL-SYSTEM --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/sun.nio.fs=ALL-UNNAMED -Declipse.application=org.eclipse.jdt.ls.core.id1 -Dosgi.bundles.defaultStartLevel=4 -Declipse.product=org.eclipse.jdt.ls.core.product -Djava.import.generatesMetadataFilesAtProjectRoot=false -Dfile.encoding=utf8 -DwatchParentProcess=false -XX:+UseParallelGC -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90 -Dsun.zip.disableMemoryMapping=true -Xmx1G -Xms100m -javaagent:c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\lombok\\\\lombok-1.18.24.jar -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\workspaceStorage\\\\092e9f14627920ce78f64c2dbd9c572e\\\\redhat.java -jar c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\server\\\\plugins\\\\org.eclipse.equinox.launcher_1.6.400.v20210924-0641.jar -configuration c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\globalStorage\\\\redhat.java\\\\1.9.0\\\\config_win -data c:\\\\Users\\\\Ot&#225;vio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\workspaceStorage\\\\092e9f14627920ce78f64c2dbd9c572e\\\\redhat.java\\\\jdt_ws&#39;,\r\n  level: &#39;info&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:03.025&#39;\r\n}\r\n{\r\n  message: &#39;*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message find class on InstrumentationImpl failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 494\\n&#39; +\r\n    &#39;*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message instrumentation instance creation failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 402\\n&#39;,\r\n  level: &#39;info&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:03.219&#39;\r\n}\r\n{\r\n  message: &#39;*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message find class on InstrumentationImpl failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 494\\n&#39; +\r\n    &#39;*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message instrumentation instance creation failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 402\\n&#39;,\r\n  level: &#39;info&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:03.220&#39;\r\n}\r\n{\r\n  message: &#39;The Language Support for Java server crashed and will restart.&#39;,\r\n  level: &#39;error&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:03.222&#39;\r\n}\r\n{\r\n  message: &#39;[Info  - 15:10:03] Connection to server got closed. Server will restart.&#39;,\r\n  level: &#39;info&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:03.222&#39;\r\n}\r\n{\r\n  message: &#39;The Language Support for Java (Syntax Server) server crashed and will restart.&#39;,\r\n  level: &#39;error&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:03.223&#39;\r\n}\r\n{\r\n  message: &#39;[Info  - 15:10:03] Connection to server got closed. Server will restart.&#39;,\r\n  level: &#39;info&#39;,\r\n  timestamp: &#39;2022-08-18 15:10:03.223&#39;\r\n}\r\n```\r\nHow can I fix this and make the extensions work?","title":"The language support for Java crashed 5 times on the last 3 minutes","body":"<p>I'm trying to use the Extension Pack for Java by Microsoft. I have a file called <code>main.java</code> that has the following code:</p>\n<pre><code>class Main {\n    public static void main(String[] args) {\n        System.out.println(&quot;Hello World!&quot;);\n    }\n}\n</code></pre>\n<p>But when I open the file in Visual Studio Code, I receive the infamous message &quot;The Language Support for Java server crashed 5 times in the last 3 minutes. The server will not be restarted.&quot;. I checked the logs and this is what in them:</p>\n<pre><code>{\n  message: &quot;Use the JDK from 'JAVA_HOME,PATH' as the initial default project JDK.&quot;,\n  level: 'info',\n  timestamp: '2022-08-18 15:10:02.759'\n}\n{\n  message: 'Starting Java server with: c:\\\\Users\\\\Otávio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\jre\\\\17.0.3-win32-x86_64\\\\bin\\\\java --add-modules=ALL-SYSTEM --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/sun.nio.fs=ALL-UNNAMED -Declipse.application=org.eclipse.jdt.ls.core.id1 -Dosgi.bundles.defaultStartLevel=4 -Declipse.product=org.eclipse.jdt.ls.core.product -Djava.import.generatesMetadataFilesAtProjectRoot=false -Dfile.encoding=utf8 -DwatchParentProcess=false -XX:+UseParallelGC -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90 -Dsun.zip.disableMemoryMapping=true -Xmx1G -Xms100m -javaagent:c:\\\\Users\\\\Otávio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\lombok\\\\lombok-1.18.24.jar -jar c:\\\\Users\\\\Otávio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\server\\\\plugins\\\\org.eclipse.equinox.launcher_1.6.400.v20210924-0641.jar -configuration c:\\\\Users\\\\Otávio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\globalStorage\\\\redhat.java\\\\1.9.0\\\\config_ss_win -data c:\\\\Users\\\\Otávio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\workspaceStorage\\\\092e9f14627920ce78f64c2dbd9c572e\\\\redhat.java\\\\ss_ws',\n  level: 'info',\n  timestamp: '2022-08-18 15:10:02.811'\n}\n{\n  message: 'Starting Java server with: c:\\\\Users\\\\Otávio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\jre\\\\17.0.3-win32-x86_64\\\\bin\\\\java --add-modules=ALL-SYSTEM --add-opens java.base/java.util=ALL-UNNAMED --add-opens java.base/java.lang=ALL-UNNAMED --add-opens java.base/sun.nio.fs=ALL-UNNAMED -Declipse.application=org.eclipse.jdt.ls.core.id1 -Dosgi.bundles.defaultStartLevel=4 -Declipse.product=org.eclipse.jdt.ls.core.product -Djava.import.generatesMetadataFilesAtProjectRoot=false -Dfile.encoding=utf8 -DwatchParentProcess=false -XX:+UseParallelGC -XX:GCTimeRatio=4 -XX:AdaptiveSizePolicyWeight=90 -Dsun.zip.disableMemoryMapping=true -Xmx1G -Xms100m -javaagent:c:\\\\Users\\\\Otávio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\lombok\\\\lombok-1.18.24.jar -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath=c:\\\\Users\\\\Otávio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\workspaceStorage\\\\092e9f14627920ce78f64c2dbd9c572e\\\\redhat.java -jar c:\\\\Users\\\\Otávio Augusto Silva\\\\.vscode\\\\extensions\\\\redhat.java-1.9.0-win32-x64\\\\server\\\\plugins\\\\org.eclipse.equinox.launcher_1.6.400.v20210924-0641.jar -configuration c:\\\\Users\\\\Otávio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\globalStorage\\\\redhat.java\\\\1.9.0\\\\config_win -data c:\\\\Users\\\\Otávio Augusto Silva\\\\AppData\\\\Roaming\\\\Code\\\\User\\\\workspaceStorage\\\\092e9f14627920ce78f64c2dbd9c572e\\\\redhat.java\\\\jdt_ws',\n  level: 'info',\n  timestamp: '2022-08-18 15:10:03.025'\n}\n{\n  message: '*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message find class on InstrumentationImpl failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 494\\n' +\n    '*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message instrumentation instance creation failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 402\\n',\n  level: 'info',\n  timestamp: '2022-08-18 15:10:03.219'\n}\n{\n  message: '*** java.lang.instrument ASSERTION FAILED ***: &quot;!errorOutstanding&quot; with message find class on InstrumentationImpl failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 494\\n' +\n    '*** java.lang.instrument ASSERTION FAILED ***: &quot;result&quot; with message instrumentation instance creation failed at e:\\\\jenkins\\\\tmp\\\\workspace\\\\build\\\\src\\\\src\\\\java.instrument\\\\share\\\\native\\\\libinstrument\\\\JPLISAgent.c line: 402\\n',\n  level: 'info',\n  timestamp: '2022-08-18 15:10:03.220'\n}\n{\n  message: 'The Language Support for Java server crashed and will restart.',\n  level: 'error',\n  timestamp: '2022-08-18 15:10:03.222'\n}\n{\n  message: '[Info  - 15:10:03] Connection to server got closed. Server will restart.',\n  level: 'info',\n  timestamp: '2022-08-18 15:10:03.222'\n}\n{\n  message: 'The Language Support for Java (Syntax Server) server crashed and will restart.',\n  level: 'error',\n  timestamp: '2022-08-18 15:10:03.223'\n}\n{\n  message: '[Info  - 15:10:03] Connection to server got closed. Server will restart.',\n  level: 'info',\n  timestamp: '2022-08-18 15:10:03.223'\n}\n</code></pre>\n<p>How can I fix this and make the extensions work?</p>\n"},{"tags":["java","android","unit-testing","kotlin","mockk"],"answers":[{"tags":[],"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660889499,"creation_date":1660331967,"answer_id":73338831,"question_id":73329861,"body_markdown":"It is not really clear to me what you are trying to achieve, but I can try to help you with what I think I understand.\r\n\r\nLet&#39;s start with your test-case `testCreateData1`:\r\n\r\n* A relaxed mock in MockK tries to return a &quot;simple value&quot; (mostly &quot;default&quot; values or null if possible) for each function call of the mock. \r\n* Therefore, your relaxed mock of `MyHelper` returns `AndroidData(0.0)` which does not satisfy your assertion.\r\n\r\nRegarding test-case `testCreateData2`:\r\n\r\n* `every { ... }` alone is not a proper expression, but it is intended to specify what should happen on every `...`. For instance, if you have a mock `m` with a function `f` you could write something like the following:\r\n\r\n```kotlin\r\nevery { m.f() } returns 42\r\nevery { m.f() } answers { callOriginal() }\r\n```\r\n* In pretty much the same way, `constructedWith&lt;AndroidData&gt;(LargerThan15Matcher())` is not a proper expression, because it is intended to specify what should happen with an AndroidData constructed with an argument matched by the `LargerThan15Matcher`. For instance, if you want to say that the `value` of such an object should always return 1 you could write\r\n```kotlin\r\n every { constructedWith&lt;AndroidData&gt;(LargerThan15Matcher()).value } returns 1f\r\n```\r\n\r\n### Update 0815\r\n\r\nYour updated test does not work due to an unfortunate combination of mocking:\r\n* You mock each constructed element of `AndroidData`.\r\n* But at the same time you also have a (relaxed) mock of `MyHelper` which does not call the constructor of `AndroidData`, but instead it gives you some mock of `AndroidData`.\r\n\r\nThere are (at least) two possibilities to solve this:\r\n\r\n1. You do not mock `MyHelper` but only constructed values of `AndroidData`:\r\n```kotlin\r\nmockkConstructor(AndroidData::class)\r\nevery {\r\n    constructedWith&lt;AndroidData&gt;(LargerThan15Matcher()).value\r\n} returns 20f\r\n\r\nval helper = MyHelper()\r\nval createdData = helper.createData(true)\r\n\r\nassertTrue(createdData.value &gt;= 15f)\r\n```\r\n\r\n2. You mock `MyHelper` and you explicitly define how your mock should work:\r\n```kotlin\r\nval helper = mockk&lt;MyHelper&gt; {\r\n    every { createData(true) } returns AndroidData(20f)\r\n}\r\n\r\nval createdData = helper.createData(true)\r\n\r\n// test if the argument in AndroidData&#39;s constructor was larger than 15\r\nassertTrue(createdData.value &gt;= 15f)\r\n```\r\nor\r\n```kotlin\r\nval helper = mockk&lt;MyHelper&gt; {\r\n    every { createData(true) } returns mockk {\r\n        every { value } returns 20f\r\n    }\r\n}\r\n\r\nval createdData = helper.createData(true)\r\n\r\nassertTrue(createdData.value &gt;= 15f)\r\n```","title":"Is it possible to test arguments in mocked constructor with mockk?","body":"<p>It is not really clear to me what you are trying to achieve, but I can try to help you with what I think I understand.</p>\n<p>Let's start with your test-case <code>testCreateData1</code>:</p>\n<ul>\n<li>A relaxed mock in MockK tries to return a &quot;simple value&quot; (mostly &quot;default&quot; values or null if possible) for each function call of the mock.</li>\n<li>Therefore, your relaxed mock of <code>MyHelper</code> returns <code>AndroidData(0.0)</code> which does not satisfy your assertion.</li>\n</ul>\n<p>Regarding test-case <code>testCreateData2</code>:</p>\n<ul>\n<li><code>every { ... }</code> alone is not a proper expression, but it is intended to specify what should happen on every <code>...</code>. For instance, if you have a mock <code>m</code> with a function <code>f</code> you could write something like the following:</li>\n</ul>\n<pre class=\"lang-kotlin prettyprint-override\"><code>every { m.f() } returns 42\nevery { m.f() } answers { callOriginal() }\n</code></pre>\n<ul>\n<li>In pretty much the same way, <code>constructedWith&lt;AndroidData&gt;(LargerThan15Matcher())</code> is not a proper expression, because it is intended to specify what should happen with an AndroidData constructed with an argument matched by the <code>LargerThan15Matcher</code>. For instance, if you want to say that the <code>value</code> of such an object should always return 1 you could write</li>\n</ul>\n<pre class=\"lang-kotlin prettyprint-override\"><code> every { constructedWith&lt;AndroidData&gt;(LargerThan15Matcher()).value } returns 1f\n</code></pre>\n<h3>Update 0815</h3>\n<p>Your updated test does not work due to an unfortunate combination of mocking:</p>\n<ul>\n<li>You mock each constructed element of <code>AndroidData</code>.</li>\n<li>But at the same time you also have a (relaxed) mock of <code>MyHelper</code> which does not call the constructor of <code>AndroidData</code>, but instead it gives you some mock of <code>AndroidData</code>.</li>\n</ul>\n<p>There are (at least) two possibilities to solve this:</p>\n<ol>\n<li>You do not mock <code>MyHelper</code> but only constructed values of <code>AndroidData</code>:</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>mockkConstructor(AndroidData::class)\nevery {\n    constructedWith&lt;AndroidData&gt;(LargerThan15Matcher()).value\n} returns 20f\n\nval helper = MyHelper()\nval createdData = helper.createData(true)\n\nassertTrue(createdData.value &gt;= 15f)\n</code></pre>\n<ol start=\"2\">\n<li>You mock <code>MyHelper</code> and you explicitly define how your mock should work:</li>\n</ol>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val helper = mockk&lt;MyHelper&gt; {\n    every { createData(true) } returns AndroidData(20f)\n}\n\nval createdData = helper.createData(true)\n\n// test if the argument in AndroidData's constructor was larger than 15\nassertTrue(createdData.value &gt;= 15f)\n</code></pre>\n<p>or</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>val helper = mockk&lt;MyHelper&gt; {\n    every { createData(true) } returns mockk {\n        every { value } returns 20f\n    }\n}\n\nval createdData = helper.createData(true)\n\nassertTrue(createdData.value &gt;= 15f)\n</code></pre>\n"}],"owner":{"account_id":10283951,"reputation":3,"user_id":7587958,"display_name":"Joy Wen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1797,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73338831,"answer_count":1,"score":0,"last_activity_date":1660889499,"creation_date":1660284577,"question_id":73329861,"body_markdown":"#### Purpose\r\nI want to test the result of a function of a class. And it returns an instance of an Android class, which should be mocked in a unit test since it seems to be stubbed in any unit test.\r\n\r\n#### Example code\r\nHere&#39;s a minimized example code of the simulated android class, `AndroidData`, and the class to be tested, `MyHelper`.\r\n\r\n```\r\n/**\r\n * Should be mocked in a unit test.\r\n */\r\nclass AndroidData(val value: Float)\r\n\r\n/**\r\n * Target class to be tested.\r\n */\r\nclass MyHelper() {\r\n    fun createData(flag: Boolean): AndroidData {\r\n        // simplified logic\r\n        return if (flag) AndroidData(20f) else AndroidData(10f)\r\n    }\r\n}\r\n```\r\n\r\nWhat I want to achieve is something like this(**note that this is incorrect code**):\r\n```\r\nclass MyHelperTest : TestCase() {\r\n    @Test\r\n    fun testCreateData() {\r\n        mockkConstructor(AndroidData::class)\r\n        val valueSlot = slot&lt;Float&gt;()\r\n        every { constructedWith&lt;AndroidData&gt;(capture(valueSlot)) }  // Type mismatch in IDE\r\n        val helper = MyHelper()\r\n        \r\n        val returnedData = helper.createData(true)\r\n        assertTrue(returnedData.value &gt;= 15f)\r\n    }\r\n}\r\n```\r\n\r\nI want to test that returned `AndroidData` instance has a correct `value`, or matches some conditions. I cannot find any tutorial about this case or any correct way to implement it.\r\n\r\n#### What I tried\r\nThese 2 test cases would both fail.\r\n```\r\n    @Test\r\n    fun testCreateData1() {\r\n        mockkConstructor(AndroidData::class)\r\n\r\n        val helper = mockk&lt;MyHelper&gt;(relaxed = true)\r\n        val createdData = helper.createData(true)\r\n\r\n        println(&quot;createdData=$createdData&quot;)  // AndroidData(child of #1#2)\r\n        println(&quot;createdData.value=${createdData.value}&quot;)  // 0.0\r\n\r\n        // test if the argument in AndroidData&#39;s constructor was larger than 15\r\n        assertTrue(createdData.value &gt;= 15f)  // assertion failed\r\n    }\r\n\r\n    @Test\r\n    fun testCreateData2() {\r\n        mockkConstructor(AndroidData::class)\r\n        // raise error: Missing mocked calls inside every { ... } block: make sure the object inside the block is a mock\r\n        every {\r\n            constructedWith&lt;AndroidData&gt;(LargerThan15Matcher())\r\n        }\r\n\r\n        val helper = mockk&lt;MyHelper&gt;(relaxed = true)\r\n        val createdData = helper.createData(true)\r\n\r\n        println(&quot;createdData=$createdData&quot;)  // AndroidData(child of #1#2)\r\n        println(&quot;createdData.value=${createdData.value}&quot;)  // 0.0\r\n\r\n        // test if the argument in AndroidData&#39;s constructor was larger than 15\r\n        assertTrue(createdData.value &gt;= 15f)\r\n    }\r\n```\r\n\r\nThe testing idea was pretty easy and intuitive for Python unittest in my experience. Yet it seems impossible in Java or Android? I haven&#39;t tried the `mockito` and `roboletric` library because I was told that `mockk` provides support on Android projects. Or I just haven&#39;t found the correct way to do this, or the whole testing idea is completely wrong? Please end my days of searching and struggle.\r\n\r\n### Update 0815\r\nWith @Karsten Gabriel &#39;s suggestion, I made a bit of mod on the `testCreateData2()` test case, but still it doesn&#39;t work. The `createdData` seems not really an `AndroidData` instance and has `value` 0.0.\r\n```\r\n    @Test\r\n    fun testCreateData2() {\r\n        mockkConstructor(AndroidData::class)\r\n        // Missing mocked calls inside every { ... } block: make sure the object inside the block is a mock\r\n        every {\r\n            constructedWith&lt;AndroidData&gt;(LargerThan15Matcher()).value\r\n        } returns 1f\r\n\r\n        val helper = mockk&lt;MyHelper&gt;(relaxed = true)\r\n        val createdData = helper.createData(true)\r\n\r\n        println(&quot;createdData=$createdData&quot;)  // AndroidData(child of #1#2)\r\n        println(&quot;createdData.value=${createdData.value}&quot;)  // 0.0\r\n\r\n        // test if the argument in AndroidData&#39;s constructor was larger than 15\r\n        assertTrue(createdData.value &gt;= 15f)\r\n    }\r\n```\r\nBTW, the `LargerThan15Matcher`:\r\n```\r\nclass LargerThan15Matcher : Matcher&lt;Float&gt; {\r\n    override fun match(arg: Float?): Boolean {\r\n        return if (arg == null) false else arg &gt;= 15f\r\n    }\r\n}\r\n```","title":"Is it possible to test arguments in mocked constructor with mockk?","body":"<h4>Purpose</h4>\n<p>I want to test the result of a function of a class. And it returns an instance of an Android class, which should be mocked in a unit test since it seems to be stubbed in any unit test.</p>\n<h4>Example code</h4>\n<p>Here's a minimized example code of the simulated android class, <code>AndroidData</code>, and the class to be tested, <code>MyHelper</code>.</p>\n<pre><code>/**\n * Should be mocked in a unit test.\n */\nclass AndroidData(val value: Float)\n\n/**\n * Target class to be tested.\n */\nclass MyHelper() {\n    fun createData(flag: Boolean): AndroidData {\n        // simplified logic\n        return if (flag) AndroidData(20f) else AndroidData(10f)\n    }\n}\n</code></pre>\n<p>What I want to achieve is something like this(<strong>note that this is incorrect code</strong>):</p>\n<pre><code>class MyHelperTest : TestCase() {\n    @Test\n    fun testCreateData() {\n        mockkConstructor(AndroidData::class)\n        val valueSlot = slot&lt;Float&gt;()\n        every { constructedWith&lt;AndroidData&gt;(capture(valueSlot)) }  // Type mismatch in IDE\n        val helper = MyHelper()\n        \n        val returnedData = helper.createData(true)\n        assertTrue(returnedData.value &gt;= 15f)\n    }\n}\n</code></pre>\n<p>I want to test that returned <code>AndroidData</code> instance has a correct <code>value</code>, or matches some conditions. I cannot find any tutorial about this case or any correct way to implement it.</p>\n<h4>What I tried</h4>\n<p>These 2 test cases would both fail.</p>\n<pre><code>    @Test\n    fun testCreateData1() {\n        mockkConstructor(AndroidData::class)\n\n        val helper = mockk&lt;MyHelper&gt;(relaxed = true)\n        val createdData = helper.createData(true)\n\n        println(&quot;createdData=$createdData&quot;)  // AndroidData(child of #1#2)\n        println(&quot;createdData.value=${createdData.value}&quot;)  // 0.0\n\n        // test if the argument in AndroidData's constructor was larger than 15\n        assertTrue(createdData.value &gt;= 15f)  // assertion failed\n    }\n\n    @Test\n    fun testCreateData2() {\n        mockkConstructor(AndroidData::class)\n        // raise error: Missing mocked calls inside every { ... } block: make sure the object inside the block is a mock\n        every {\n            constructedWith&lt;AndroidData&gt;(LargerThan15Matcher())\n        }\n\n        val helper = mockk&lt;MyHelper&gt;(relaxed = true)\n        val createdData = helper.createData(true)\n\n        println(&quot;createdData=$createdData&quot;)  // AndroidData(child of #1#2)\n        println(&quot;createdData.value=${createdData.value}&quot;)  // 0.0\n\n        // test if the argument in AndroidData's constructor was larger than 15\n        assertTrue(createdData.value &gt;= 15f)\n    }\n</code></pre>\n<p>The testing idea was pretty easy and intuitive for Python unittest in my experience. Yet it seems impossible in Java or Android? I haven't tried the <code>mockito</code> and <code>roboletric</code> library because I was told that <code>mockk</code> provides support on Android projects. Or I just haven't found the correct way to do this, or the whole testing idea is completely wrong? Please end my days of searching and struggle.</p>\n<h3>Update 0815</h3>\n<p>With @Karsten Gabriel 's suggestion, I made a bit of mod on the <code>testCreateData2()</code> test case, but still it doesn't work. The <code>createdData</code> seems not really an <code>AndroidData</code> instance and has <code>value</code> 0.0.</p>\n<pre><code>    @Test\n    fun testCreateData2() {\n        mockkConstructor(AndroidData::class)\n        // Missing mocked calls inside every { ... } block: make sure the object inside the block is a mock\n        every {\n            constructedWith&lt;AndroidData&gt;(LargerThan15Matcher()).value\n        } returns 1f\n\n        val helper = mockk&lt;MyHelper&gt;(relaxed = true)\n        val createdData = helper.createData(true)\n\n        println(&quot;createdData=$createdData&quot;)  // AndroidData(child of #1#2)\n        println(&quot;createdData.value=${createdData.value}&quot;)  // 0.0\n\n        // test if the argument in AndroidData's constructor was larger than 15\n        assertTrue(createdData.value &gt;= 15f)\n    }\n</code></pre>\n<p>BTW, the <code>LargerThan15Matcher</code>:</p>\n<pre><code>class LargerThan15Matcher : Matcher&lt;Float&gt; {\n    override fun match(arg: Float?): Boolean {\n        return if (arg == null) false else arg &gt;= 15f\n    }\n}\n</code></pre>\n"},{"tags":["java","eclipse","windowbuilder"],"comments":[{"owner":{"account_id":8692823,"reputation":31810,"user_id":6505250,"display_name":"howlger"},"score":1,"creation_date":1660829055,"post_id":73402854,"comment_id":129629241,"body_markdown":"That doesn&#39;t sound like you installed WindowBuilder successfully. Check _Help &gt; About Eclipse IDE: Installation Details_ if you really have installed it. But as first thing, you should update your pretty old Eclipse.","body":"That doesn&#39;t sound like you installed WindowBuilder successfully. Check <i>Help &gt; About Eclipse IDE: Installation Details</i> if you really have installed it. But as first thing, you should update your pretty old Eclipse."},{"owner":{"account_id":13796,"reputation":19353,"user_id":27905,"display_name":"nitind"},"score":0,"creation_date":1660837537,"post_id":73402854,"comment_id":129632967,"body_markdown":"Open what kind of file?","body":"Open what kind of file?"},{"owner":{"account_id":10681332,"reputation":61,"user_id":9470836,"display_name":"dipesh patidar"},"score":0,"creation_date":1660888085,"post_id":73402854,"comment_id":129644182,"body_markdown":"Swing files, but i can not find option of opening the file with window builder.","body":"Swing files, but i can not find option of opening the file with window builder."},{"owner":{"account_id":10681332,"reputation":61,"user_id":9470836,"display_name":"dipesh patidar"},"score":0,"creation_date":1660888469,"post_id":73402854,"comment_id":129644252,"body_markdown":"@howlger to what version i should update eclipse","body":"@howlger to what version i should update eclipse"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":1,"creation_date":1660890821,"post_id":73402854,"comment_id":129644777,"body_markdown":"Latest version of Eclipse is 2022-06. Next version is due to be released next month, i.e. September 2022. You can download latest Eclipse from here: https://www.eclipse.org/downloads/packages/ And you can download WindowBuilder from here: https://www.eclipse.org/windowbuilder/download.php I suggest that you remove your current Eclipse installation and install the latest version. After you install the latest version, then install the latest WindowBuilder. Note that Eclipse 2022-06 comes with JDK 17 as part of the distribution.","body":"Latest version of Eclipse is 2022-06. Next version is due to be released next month, i.e. September 2022. You can download latest Eclipse from here: <a href=\"https://www.eclipse.org/downloads/packages/\" rel=\"nofollow noreferrer\">eclipse.org/downloads/packages</a> And you can download WindowBuilder from here: <a href=\"https://www.eclipse.org/windowbuilder/download.php\" rel=\"nofollow noreferrer\">eclipse.org/windowbuilder/download.php</a> I suggest that you remove your current Eclipse installation and install the latest version. After you install the latest version, then install the latest WindowBuilder. Note that Eclipse 2022-06 comes with JDK 17 as part of the distribution."}],"owner":{"account_id":10681332,"reputation":61,"user_id":9470836,"display_name":"dipesh patidar"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1660889229,"creation_date":1660824604,"question_id":73402854,"body_markdown":"I have installed window builder in eclipse 2019-12 but unable to find it whenever i try to open a file with open with or whenever i try to create new project from file wizard. So how can i launch window builder in eclipse 2019-12 after installation?\r\n\r\nplease find the screenshot of Help &gt; About Eclipse IDE: Installation Details [![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/N2oHY.png","title":"Installed window builder in eclipse 2019-12 but unable to find it","body":"<p>I have installed window builder in eclipse 2019-12 but unable to find it whenever i try to open a file with open with or whenever i try to create new project from file wizard. So how can i launch window builder in eclipse 2019-12 after installation?</p>\n<p>please find the screenshot of Help &gt; About Eclipse IDE: Installation Details <a href=\"https://i.stack.imgur.com/N2oHY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/N2oHY.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","junit"],"comments":[{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":0,"creation_date":1660843393,"post_id":73407107,"comment_id":129635078,"body_markdown":"What is `lastPlayerCheck`?","body":"What is <code>lastPlayerCheck</code>?"},{"owner":{"account_id":23736563,"reputation":93,"user_id":17755181,"display_name":"djasyfuj"},"score":0,"creation_date":1660843428,"post_id":73407107,"comment_id":129635087,"body_markdown":"It is a function that checks if currentPlayer was the last one on the list:","body":"It is a function that checks if currentPlayer was the last one on the list:"}],"answers":[{"tags":[],"owner":{"account_id":22341068,"reputation":692,"user_id":16560836,"display_name":"yezper"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660889104,"creation_date":1660844100,"answer_id":73407286,"question_id":73407107,"body_markdown":"As far as I can tell the `currentPlayer` field in the `TableService` was never assigned a different value other than being initialized with `Optional.empty()`. Therefore, your `TableService` maybe needs a method like `setCurrentPlayer(Player player)` so you can manually configure the `currentPlayer` field. Note: The way you try to assign a value to the `currentPlayer` field in the test does not work!\r\n\r\n    // here you only get a reference to the currently empty Optional object\r\n    Optional&lt;Player&gt; currentPlayer = tableService.getCurrentPlayer();\r\n    // here you just assign the variable (which is only visible in the context of this test)\r\n    // to a fresh Optional holding an actual player object - this has no effect on the\r\n    // currentPlayer field inside the TableService \r\n    currentPlayer = Optional.of(players.get(0));\r\n\r\nMaybe your next thought is to do something like this:\r\n\r\n    Optional&lt;Player&gt; currentPlayer = tableService.getCurrentPlayer();\r\n    currentPlayer.setValue(players.get(0)) // WILL NOT COMPILE\r\n\r\nBut Java Optionals are IMMUTABLE meaning that you can not assign a new value to an Optional Object, but instead you have to create a new `Optional` object with the value you want to assign. This is why there is no method such as `setValue()` in the `Optional` class.\r\n\r\n**UPDATE:**\r\nI think you are not yet fully understanding how [method parameters][1] function. What you are basically trying to do is:\r\n\r\n    void updateString(String: someString){\r\n      someString = &quot;updated string value&quot;\r\n    }\r\n    \r\n    String someString = &quot;initial string value&quot;\r\n    updateString(someString)\r\n    println(someString) // =&gt; will still be &quot;initial string value&quot;\r\n\r\nWhen you pass a **variable** as an **argument** to a **method** you can not reassign that variable in the context of the method, so that the variable outside the method (from where this method was invoked) is also reassigned! Actually the `someString` parameter in the `updateString(String: someString)` method is a different variable than the `someString` variable in the outer scope (from where the method was invoked) but only holds the reference to the same value (&quot;updated string value&quot; in this case). So when you reassign that variable in the inner method you are not updating the variable (in the outer scopee) that has been passed into the method! \r\n \r\n  [1]: https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html","title":"Testing function","body":"<p>As far as I can tell the <code>currentPlayer</code> field in the <code>TableService</code> was never assigned a different value other than being initialized with <code>Optional.empty()</code>. Therefore, your <code>TableService</code> maybe needs a method like <code>setCurrentPlayer(Player player)</code> so you can manually configure the <code>currentPlayer</code> field. Note: The way you try to assign a value to the <code>currentPlayer</code> field in the test does not work!</p>\n<pre><code>// here you only get a reference to the currently empty Optional object\nOptional&lt;Player&gt; currentPlayer = tableService.getCurrentPlayer();\n// here you just assign the variable (which is only visible in the context of this test)\n// to a fresh Optional holding an actual player object - this has no effect on the\n// currentPlayer field inside the TableService \ncurrentPlayer = Optional.of(players.get(0));\n</code></pre>\n<p>Maybe your next thought is to do something like this:</p>\n<pre><code>Optional&lt;Player&gt; currentPlayer = tableService.getCurrentPlayer();\ncurrentPlayer.setValue(players.get(0)) // WILL NOT COMPILE\n</code></pre>\n<p>But Java Optionals are IMMUTABLE meaning that you can not assign a new value to an Optional Object, but instead you have to create a new <code>Optional</code> object with the value you want to assign. This is why there is no method such as <code>setValue()</code> in the <code>Optional</code> class.</p>\n<p><strong>UPDATE:</strong>\nI think you are not yet fully understanding how <a href=\"https://docs.oracle.com/javase/tutorial/java/javaOO/arguments.html\" rel=\"nofollow noreferrer\">method parameters</a> function. What you are basically trying to do is:</p>\n<pre><code>void updateString(String: someString){\n  someString = &quot;updated string value&quot;\n}\n\nString someString = &quot;initial string value&quot;\nupdateString(someString)\nprintln(someString) // =&gt; will still be &quot;initial string value&quot;\n</code></pre>\n<p>When you pass a <strong>variable</strong> as an <strong>argument</strong> to a <strong>method</strong> you can not reassign that variable in the context of the method, so that the variable outside the method (from where this method was invoked) is also reassigned! Actually the <code>someString</code> parameter in the <code>updateString(String: someString)</code> method is a different variable than the <code>someString</code> variable in the outer scope (from where the method was invoked) but only holds the reference to the same value (&quot;updated string value&quot; in this case). So when you reassign that variable in the inner method you are not updating the variable (in the outer scopee) that has been passed into the method!</p>\n"}],"owner":{"account_id":23736563,"reputation":93,"user_id":17755181,"display_name":"djasyfuj"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":51,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73407286,"answer_count":1,"score":0,"last_activity_date":1660889104,"creation_date":1660843147,"question_id":73407107,"body_markdown":"I have the following variables in a *TableService* class and a function which takes currentPlayer index on the list, adds +1 and make currentPlayer the one with this incremented index.\r\n*currentPlayer* is assigned as `currentPlayer = Optional.of(players.get(0));` earlier in different method.\r\n\r\n    private ArrayList&lt;Player&gt; players = new ArrayList&lt;&gt;();\r\n    private Optional&lt;Player&gt; currentPlayer = Optional.empty();        \r\n    \r\n    public void setNextPlayerCurrent() {\r\n        int currentPlayerIndex = players.indexOf(currentPlayer.get());\r\n        if (!lastPlayerCheck(currentPlayerIndex)) {\r\n            currentPlayer = Optional.of(players.get(currentPlayerIndex + 1));\r\n        }\r\n        else {\r\n            currentPlayer = Optional.of(players.get(0));\r\n        }\r\n    }\r\n\r\nI want to test this and I wrote the following function: \r\n\r\n        @Test\r\n    void checkCurrentPlayerSetting() {\r\n        List&lt;Player&gt; players = tableService.getPlayers();\r\n        Optional&lt;Player&gt; currentPlayer = tableService.getCurrentPlayer();\r\n        Player player1 = new Player(&quot;A&quot;, &quot;Adam&quot;, 100);\r\n        Player player2 = new Player(&quot;B&quot;, &quot;Bella&quot;, 100);\r\n        players.add(player1);\r\n        players.add(player2);\r\n        currentPlayer = Optional.of(players.get(0));\r\n\r\n        int player1Index = players.indexOf(player1);\r\n        int player2Index = players.indexOf(player2);\r\n        System.out.println(player1Index); // prints 0\r\n        System.out.println(player2Index); / prints 1\r\n        System.out.println(players.indexOf(currentPlayer.get())); // prints 0\r\n\r\n        tableService.setNextPlayerCurrent(); // java.util.NoSuchElementException: No value present!!!\r\n\r\n        //assertEquals(player2.getId(), currentPlayer.get().getId());\r\n    }\r\n\r\nI want to assert that after execution of *setNextPlayerCurrent()* player2 will match currentPlayer.\r\nWhat should I do with the exception?\r\n\r\nEDIT: lastPlayerCheck() also in the TableService class:\r\n\r\n        public boolean lastPlayerCheck(int currentPlayerIndex) {\r\n        if (currentPlayerIndex == (players.size() - 1)) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }","title":"Testing function","body":"<p>I have the following variables in a <em>TableService</em> class and a function which takes currentPlayer index on the list, adds +1 and make currentPlayer the one with this incremented index.\n<em>currentPlayer</em> is assigned as <code>currentPlayer = Optional.of(players.get(0));</code> earlier in different method.</p>\n<pre><code>private ArrayList&lt;Player&gt; players = new ArrayList&lt;&gt;();\nprivate Optional&lt;Player&gt; currentPlayer = Optional.empty();        \n\npublic void setNextPlayerCurrent() {\n    int currentPlayerIndex = players.indexOf(currentPlayer.get());\n    if (!lastPlayerCheck(currentPlayerIndex)) {\n        currentPlayer = Optional.of(players.get(currentPlayerIndex + 1));\n    }\n    else {\n        currentPlayer = Optional.of(players.get(0));\n    }\n}\n</code></pre>\n<p>I want to test this and I wrote the following function:</p>\n<pre><code>    @Test\nvoid checkCurrentPlayerSetting() {\n    List&lt;Player&gt; players = tableService.getPlayers();\n    Optional&lt;Player&gt; currentPlayer = tableService.getCurrentPlayer();\n    Player player1 = new Player(&quot;A&quot;, &quot;Adam&quot;, 100);\n    Player player2 = new Player(&quot;B&quot;, &quot;Bella&quot;, 100);\n    players.add(player1);\n    players.add(player2);\n    currentPlayer = Optional.of(players.get(0));\n\n    int player1Index = players.indexOf(player1);\n    int player2Index = players.indexOf(player2);\n    System.out.println(player1Index); // prints 0\n    System.out.println(player2Index); / prints 1\n    System.out.println(players.indexOf(currentPlayer.get())); // prints 0\n\n    tableService.setNextPlayerCurrent(); // java.util.NoSuchElementException: No value present!!!\n\n    //assertEquals(player2.getId(), currentPlayer.get().getId());\n}\n</code></pre>\n<p>I want to assert that after execution of <em>setNextPlayerCurrent()</em> player2 will match currentPlayer.\nWhat should I do with the exception?</p>\n<p>EDIT: lastPlayerCheck() also in the TableService class:</p>\n<pre><code>    public boolean lastPlayerCheck(int currentPlayerIndex) {\n    if (currentPlayerIndex == (players.size() - 1)) {\n        return true;\n    }\n    return false;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","timestamp","rfc3986"],"comments":[{"owner":{"account_id":15387,"reputation":63718,"user_id":32453,"accept_rate":92,"display_name":"rogerdpack"},"score":0,"creation_date":1558540533,"post_id":54294843,"comment_id":99138023,"body_markdown":"I assume this was an expected change?","body":"I assume this was an expected change?"},{"owner":{"account_id":5643857,"reputation":1206,"user_id":4466695,"accept_rate":75,"display_name":"Gregor Eesmaa"},"score":1,"creation_date":1558597530,"post_id":54294843,"comment_id":99155589,"body_markdown":"If leaving the `+` (plus) sign as is were expected, then a receiving Spring Boot endpoint should not attempt to decode the `+` (plus) as a ` ` (space). Unfortunately, that is not the case due to seemingly conflicting standards.","body":"If leaving the <code>+</code> (plus) sign as is were expected, then a receiving Spring Boot endpoint should not attempt to decode the <code>+</code> (plus) as a ` ` (space). Unfortunately, that is not the case due to seemingly conflicting standards."},{"owner":{"account_id":1168998,"reputation":10625,"user_id":1146608,"accept_rate":88,"display_name":"Patrick M"},"score":0,"creation_date":1579107370,"post_id":54294843,"comment_id":105658394,"body_markdown":"I was having the same problem but I had started with a templated URL. The success of Option 2 seems to hinge on setting the `uriTemplateHandler` as you do... but why? I&#39;m not grasping the difference between the `DefaultUriBuilderFactor` that you use and the `DefaultUriTemplateHandler` that would otherwise be used.","body":"I was having the same problem but I had started with a templated URL. The success of Option 2 seems to hinge on setting the <code>uriTemplateHandler</code> as you do... but why? I&#39;m not grasping the difference between the <code>DefaultUriBuilderFactor</code> that you use and the <code>DefaultUriTemplateHandler</code> that would otherwise be used."},{"owner":{"account_id":5643857,"reputation":1206,"user_id":4466695,"accept_rate":75,"display_name":"Gregor Eesmaa"},"score":1,"creation_date":1579164168,"post_id":54294843,"comment_id":105675795,"body_markdown":"@PatrickM `DefaultUriTemplateHandler` seems to be deprecated, but the docs indicate the difference might be, that &quot;DefaultUriBuilderFactory has a different default for the parsePath property (from false to true).&quot;","body":"@PatrickM <code>DefaultUriTemplateHandler</code> seems to be deprecated, but the docs indicate the difference might be, that &quot;DefaultUriBuilderFactory has a different default for the parsePath property (from false to true).&quot;"}],"answers":[{"tags":[],"owner":{"account_id":5643857,"reputation":1206,"user_id":4466695,"accept_rate":75,"display_name":"Gregor Eesmaa"},"down_vote_count":0,"up_vote_count":37,"is_accepted":true,"score":37,"last_activity_date":1548331118,"creation_date":1548323388,"answer_id":54343680,"question_id":54294843,"body_markdown":"We realized the URL can be modified in an interceptor after the encoding is done. So a solution would be to use an interceptor, that encodes the plus sign in the query params. \r\n\r\n    RestTemplate restTemplate = new RestTemplateBuilder()\r\n            .rootUri(&quot;http://localhost:8080&quot;)\r\n            .interceptors(new PlusEncoderInterceptor())\r\n            .build();\r\n\r\nA shortened example:\r\n\r\n    public class PlusEncoderInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n        @Override\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\r\n            return execution.execute(new HttpRequestWrapper(request) {\r\n                @Override\r\n                public URI getURI() {\r\n                    URI u = super.getURI();\r\n                    String strictlyEscapedQuery = StringUtils.replace(u.getRawQuery(), &quot;+&quot;, &quot;%2B&quot;);\r\n                    return UriComponentsBuilder.fromUri(u)\r\n                            .replaceQuery(strictlyEscapedQuery)\r\n                            .build(true).toUri();\r\n                }\r\n            }, body);\r\n        }\r\n    }\r\n","title":"&#39;+&#39; (plus sign) not encoded with RestTemplate using String url, but interpreted as &#39; &#39; (space)","body":"<p>We realized the URL can be modified in an interceptor after the encoding is done. So a solution would be to use an interceptor, that encodes the plus sign in the query params. </p>\n\n<pre><code>RestTemplate restTemplate = new RestTemplateBuilder()\n        .rootUri(\"http://localhost:8080\")\n        .interceptors(new PlusEncoderInterceptor())\n        .build();\n</code></pre>\n\n<p>A shortened example:</p>\n\n<pre><code>public class PlusEncoderInterceptor implements ClientHttpRequestInterceptor {\n\n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException {\n        return execution.execute(new HttpRequestWrapper(request) {\n            @Override\n            public URI getURI() {\n                URI u = super.getURI();\n                String strictlyEscapedQuery = StringUtils.replace(u.getRawQuery(), \"+\", \"%2B\");\n                return UriComponentsBuilder.fromUri(u)\n                        .replaceQuery(strictlyEscapedQuery)\n                        .build(true).toUri();\n            }\n        }, body);\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6196424,"reputation":135,"user_id":4827572,"display_name":"Matt Garner"},"down_vote_count":2,"up_vote_count":6,"is_accepted":false,"score":4,"last_activity_date":1573743581,"creation_date":1573743581,"answer_id":58859769,"question_id":54294843,"body_markdown":"The issue has been discussed here as well. \r\n\r\n\r\n[Encoding of URI Variables on RestTemplate [SPR-16202]][1]\r\n\r\nA simpler solution is to set the encoding mode on the URI builder to VALUES_ONLY.\r\n\r\n        DefaultUriBuilderFactory builderFactory = new DefaultUriBuilderFactory();\r\n        builderFactory.setEncodingMode(DefaultUriBuilderFactory.EncodingMode.VALUES_ONLY);\r\n        RestTemplate restTemplate = new RestTemplateBuilder()\r\n                .rootUri(&quot;http://localhost:8080&quot;)\r\n                .uriTemplateHandler(builderFactory)\r\n                .build();\r\n\r\nThis achieved the same result as using the PlusEncodingInterceptor when using query parameters.\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/issues/20750","title":"&#39;+&#39; (plus sign) not encoded with RestTemplate using String url, but interpreted as &#39; &#39; (space)","body":"<p>The issue has been discussed here as well. </p>\n\n<p><a href=\"https://github.com/spring-projects/spring-framework/issues/20750\" rel=\"nofollow noreferrer\">Encoding of URI Variables on RestTemplate [SPR-16202]</a></p>\n\n<p>A simpler solution is to set the encoding mode on the URI builder to VALUES_ONLY.</p>\n\n<pre><code>    DefaultUriBuilderFactory builderFactory = new DefaultUriBuilderFactory();\n    builderFactory.setEncodingMode(DefaultUriBuilderFactory.EncodingMode.VALUES_ONLY);\n    RestTemplate restTemplate = new RestTemplateBuilder()\n            .rootUri(\"http://localhost:8080\")\n            .uriTemplateHandler(builderFactory)\n            .build();\n</code></pre>\n\n<p>This achieved the same result as using the PlusEncodingInterceptor when using query parameters.</p>\n"},{"tags":[],"owner":{"account_id":4238302,"reputation":443,"user_id":3468905,"display_name":"seregamorph"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1608801216,"creation_date":1608801216,"answer_id":65436247,"question_id":54294843,"body_markdown":"Thanks https://stackoverflow.com/users/4466695/gregor-eesmaa, it solved my issue. Just wanted to add that in case if you can format URL before calling `RestTemplate`, you can fix the URL at once (instead of replacing it in `PlusEncoderInterceptor`):\r\n```java\r\nUriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUriString(&quot;/search&quot;);\r\nuriBuilder.queryParam(&quot;beforeTimestamp&quot;, &quot;2019-01-21T14:56:50+00:00&quot;);\r\nURI uriPlus = uriBuilder.encode().build(false).toUri();\r\n\r\n// import org.springframework.util.StringUtils;\r\nString strictlyEscapedQuery = StringUtils.replace(uriPlus.getRawQuery(), &quot;+&quot;, &quot;%2B&quot;);\r\nURI uri = UriComponentsBuilder.fromUri(uriPlus)\r\n        .replaceQuery(strictlyEscapedQuery)\r\n        .build(true).toUri();\r\n\r\n// prints &quot;/search?beforeTimestamp=2019-01-21T14:56:50%2B00:00&quot;\r\nSystem.out.println(uri);\r\n```\r\n\r\nThen you can use in `RestTemplate` call:\r\n```java\r\nRequestEntity&lt;?&gt; requestEntity = RequestEntity.get(uri).build();\r\nResponseEntity&lt;String&gt; responseEntity = restTemplate.exchange(requestEntity, String.class);\r\n```","title":"&#39;+&#39; (plus sign) not encoded with RestTemplate using String url, but interpreted as &#39; &#39; (space)","body":"<p>Thanks <a href=\"https://stackoverflow.com/users/4466695/gregor-eesmaa\">https://stackoverflow.com/users/4466695/gregor-eesmaa</a>, it solved my issue. Just wanted to add that in case if you can format URL before calling <code>RestTemplate</code>, you can fix the URL at once (instead of replacing it in <code>PlusEncoderInterceptor</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>UriComponentsBuilder uriBuilder = UriComponentsBuilder.fromUriString(&quot;/search&quot;);\nuriBuilder.queryParam(&quot;beforeTimestamp&quot;, &quot;2019-01-21T14:56:50+00:00&quot;);\nURI uriPlus = uriBuilder.encode().build(false).toUri();\n\n// import org.springframework.util.StringUtils;\nString strictlyEscapedQuery = StringUtils.replace(uriPlus.getRawQuery(), &quot;+&quot;, &quot;%2B&quot;);\nURI uri = UriComponentsBuilder.fromUri(uriPlus)\n        .replaceQuery(strictlyEscapedQuery)\n        .build(true).toUri();\n\n// prints &quot;/search?beforeTimestamp=2019-01-21T14:56:50%2B00:00&quot;\nSystem.out.println(uri);\n</code></pre>\n<p>Then you can use in <code>RestTemplate</code> call:</p>\n<pre class=\"lang-java prettyprint-override\"><code>RequestEntity&lt;?&gt; requestEntity = RequestEntity.get(uri).build();\nResponseEntity&lt;String&gt; responseEntity = restTemplate.exchange(requestEntity, String.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3617951,"reputation":628,"user_id":3017375,"accept_rate":100,"display_name":"Alfredo Diaz"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1625900883,"creation_date":1625900883,"answer_id":68325513,"question_id":54294843,"body_markdown":"To get around this kind of issue, I found it easier to build the URI by hand.\r\n\r\n    URI uri = new URI(siteProperties.getBaseUrl()\r\n      + &quot;v3/elements/&quot;\r\n      + URLEncoder.encode(&quot;user/&quot; + user + &quot;/type/&quot; + type, UTF_8)\r\n      + &quot;/&quot;\r\n      + URLEncoder.encode(id, UTF_8)\r\n    );\r\n    \r\n    restTemplate.exchange(uri, DELETE, new HttpEntity&lt;&gt;(httpHeaders), Void.class);","title":"&#39;+&#39; (plus sign) not encoded with RestTemplate using String url, but interpreted as &#39; &#39; (space)","body":"<p>To get around this kind of issue, I found it easier to build the URI by hand.</p>\n<pre><code>URI uri = new URI(siteProperties.getBaseUrl()\n  + &quot;v3/elements/&quot;\n  + URLEncoder.encode(&quot;user/&quot; + user + &quot;/type/&quot; + type, UTF_8)\n  + &quot;/&quot;\n  + URLEncoder.encode(id, UTF_8)\n);\n\nrestTemplate.exchange(uri, DELETE, new HttpEntity&lt;&gt;(httpHeaders), Void.class);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11957608,"reputation":11,"user_id":8749483,"display_name":"vibol rim"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660888469,"creation_date":1660564049,"answer_id":73360590,"question_id":54294843,"body_markdown":"Just want to add on!, You can try with this without configure every where u used RestTemplate in your project, config also support UTF-8 encoding respons:\r\n    \r\n    public class PlusEncoderInterceptor implements ClientHttpRequestInterceptor {\r\n\r\n\t@Override\r\n\tpublic ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\r\n\t\t\tthrows IOException {\r\n\t\treturn execution.execute(new HttpRequestWrapper(request) {\r\n\t\t\t@NotNull\r\n\t\t\t@Override\r\n\t\t\tpublic URI getURI() {\r\n\t\t\t\tURI u = super.getURI();\r\n\t\t\t\tString strictlyEscapedQuery = StringUtils.replace(u.getRawQuery(), &quot;+&quot;, &quot;%2B&quot;);\r\n\t\t\t\treturn UriComponentsBuilder.fromUri(u).replaceQuery(strictlyEscapedQuery).build(true).toUri();\r\n\t\t\t}\r\n\t\t}, body);\r\n\t}\r\n    }\r\n\r\n    @Configuration\r\n    public class RestTemplateConfig {\r\n\t@Bean\r\n\tpublic RestTemplate restTemplate() {\r\n\t\tRestTemplate restTemplate = new RestTemplateBuilder().interceptors(new PlusEncoderInterceptor()).build();\r\n\t\trestTemplate.getMessageConverters().add(0, new StringHttpMessageConverter(StandardCharsets.UTF_8));\r\n\t\treturn restTemplate;\r\n\t}\r\n    }","title":"&#39;+&#39; (plus sign) not encoded with RestTemplate using String url, but interpreted as &#39; &#39; (space)","body":"<p>Just want to add on!, You can try with this without configure every where u used RestTemplate in your project, config also support UTF-8 encoding respons:</p>\n<pre><code>public class PlusEncoderInterceptor implements ClientHttpRequestInterceptor {\n\n@Override\npublic ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution)\n        throws IOException {\n    return execution.execute(new HttpRequestWrapper(request) {\n        @NotNull\n        @Override\n        public URI getURI() {\n            URI u = super.getURI();\n            String strictlyEscapedQuery = StringUtils.replace(u.getRawQuery(), &quot;+&quot;, &quot;%2B&quot;);\n            return UriComponentsBuilder.fromUri(u).replaceQuery(strictlyEscapedQuery).build(true).toUri();\n        }\n    }, body);\n}\n}\n\n@Configuration\npublic class RestTemplateConfig {\n@Bean\npublic RestTemplate restTemplate() {\n    RestTemplate restTemplate = new RestTemplateBuilder().interceptors(new PlusEncoderInterceptor()).build();\n    restTemplate.getMessageConverters().add(0, new StringHttpMessageConverter(StandardCharsets.UTF_8));\n    return restTemplate;\n}\n}\n</code></pre>\n"}],"owner":{"account_id":5643857,"reputation":1206,"user_id":4466695,"accept_rate":75,"display_name":"Gregor Eesmaa"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":17842,"favorite_count":0,"down_vote_count":0,"up_vote_count":44,"accepted_answer_id":54343680,"answer_count":5,"score":44,"last_activity_date":1660888469,"creation_date":1548090891,"question_id":54294843,"body_markdown":"We are moving from Java 8 to Java 11, and thus, from Spring Boot 1.5.6 to 2.1.2. We noticed, that when using RestTemplate, the &#39;+&#39; sign is not encoded to &#39;%2B&#39; anymore (changes by SPR-14828). This would be okay, because RFC3986 doesn&#39;t list &#39;+&#39; as a reserved character, but it is still interpreted as a &#39; &#39; (space) when received in a Spring Boot endpoint.\r\n\r\nWe have a search query which can take optional timestamps as query parameters. The query looks something like `http://example.com/search?beforeTimestamp=2019-01-21T14:56:50%2B00:00`. \r\n\r\nWe can&#39;t figure out how to send an encoded plus sign, without it being double-encoded. Query parameter `2019-01-21T14:56:50+00:00` would be interpreted as `2019-01-21T14:56:50 00:00`. If we were to encode the parameter ourselves (`2019-01-21T14:56:50%2B00:00`), then it would be received and interpreted as `2019-01-21T14:56:50%252B00:00`.\r\n\r\nAn additional constraint is, that we want to set the base url elsewhere, when setting up the restTemplate, not where the query is being executed.\r\n\r\nAlternatively, is there a way to force &#39;+&#39; not to be interpreted as &#39; &#39; by the endpoint? \r\n\r\nI have written a short example demonstrating some ways of achieving stricter encoding with their drawbacks explained as comments:\r\n\r\n    package com.example.clientandserver;\r\n    \r\n    import org.springframework.boot.CommandLineRunner;\r\n    import org.springframework.boot.SpringApplication;\r\n    import org.springframework.boot.autoconfigure.SpringBootApplication;\r\n    import org.springframework.boot.web.client.RestTemplateBuilder;\r\n    import org.springframework.web.bind.annotation.GetMapping;\r\n    import org.springframework.web.bind.annotation.RequestParam;\r\n    import org.springframework.web.bind.annotation.RestController;\r\n    import org.springframework.web.client.RestTemplate;\r\n    import org.springframework.web.util.DefaultUriBuilderFactory;\r\n    import org.springframework.web.util.UriComponentsBuilder;\r\n    import org.springframework.web.util.UriUtils;\r\n    \r\n    import java.nio.charset.StandardCharsets;\r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    @SpringBootApplication\r\n    @RestController\r\n    public class ClientAndServerApp implements CommandLineRunner {\r\n    \r\n        public static void main(String[] args) {\r\n            SpringApplication.run(ClientAndServerApp.class, args);\r\n        }\r\n    \r\n        @Override\r\n        public void run(String... args) {\r\n            String beforeTimestamp = &quot;2019-01-21T14:56:50+00:00&quot;;\r\n    \r\n            // Previously - base url and raw params (encoded automatically). \r\n            // This worked in the earlier version of Spring Boot\r\n            {\r\n                RestTemplate restTemplate = new RestTemplateBuilder()\r\n                   .rootUri(&quot;http://localhost:8080&quot;).build();\r\n                UriComponentsBuilder b = UriComponentsBuilder.fromPath(&quot;/search&quot;);\r\n                if (beforeTimestamp != null) {\r\n                    b.queryParam(&quot;beforeTimestamp&quot;, beforeTimestamp);\r\n                }\r\n                restTemplate.getForEntity(b.toUriString(), Object.class);\r\n                // Received: 2019-01-21T14:56:50 00:00\r\n                //       Plus sign missing here ^\r\n            }\r\n    \r\n            // Option 1 - no base url and encoding the param ourselves.\r\n            {\r\n                RestTemplate restTemplate = new RestTemplate();\r\n                UriComponentsBuilder b = UriComponentsBuilder\r\n                    .fromHttpUrl(&quot;http://localhost:8080/search&quot;);\r\n                if (beforeTimestamp != null) {\r\n                    b.queryParam(\r\n                        &quot;beforeTimestamp&quot;,\r\n                        UriUtils.encode(beforeTimestamp, StandardCharsets.UTF_8)\r\n                    );\r\n                }\r\n                restTemplate.getForEntity(\r\n                    b.build(true).toUri(), Object.class\r\n                ).getBody();\r\n                // Received: 2019-01-21T14:56:50+00:00\r\n            }\r\n    \r\n            // Option 2 - with templated base url, query parameter is not optional.\r\n            {\r\n                RestTemplate restTemplate = new RestTemplateBuilder()\r\n                    .rootUri(&quot;http://localhost:8080&quot;)\r\n                    .uriTemplateHandler(new DefaultUriBuilderFactory())\r\n                    .build();\r\n                Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\r\n                params.put(&quot;beforeTimestamp&quot;, beforeTimestamp);\r\n                restTemplate.getForEntity(\r\n                    &quot;/search?beforeTimestamp={beforeTimestamp}&quot;,\r\n                    Object.class,\r\n                    params);\r\n                // Received: 2019-01-21T14:56:50+00:00\r\n            }\r\n        }\r\n    \r\n        @GetMapping(&quot;/search&quot;)\r\n        public void search(@RequestParam String beforeTimestamp) {\r\n            System.out.println(&quot;Received: &quot; + beforeTimestamp);\r\n        }\r\n    }\r\n\r\n","title":"&#39;+&#39; (plus sign) not encoded with RestTemplate using String url, but interpreted as &#39; &#39; (space)","body":"<p>We are moving from Java 8 to Java 11, and thus, from Spring Boot 1.5.6 to 2.1.2. We noticed, that when using RestTemplate, the '+' sign is not encoded to '%2B' anymore (changes by SPR-14828). This would be okay, because RFC3986 doesn't list '+' as a reserved character, but it is still interpreted as a ' ' (space) when received in a Spring Boot endpoint.</p>\n\n<p>We have a search query which can take optional timestamps as query parameters. The query looks something like <code>http://example.com/search?beforeTimestamp=2019-01-21T14:56:50%2B00:00</code>. </p>\n\n<p>We can't figure out how to send an encoded plus sign, without it being double-encoded. Query parameter <code>2019-01-21T14:56:50+00:00</code> would be interpreted as <code>2019-01-21T14:56:50 00:00</code>. If we were to encode the parameter ourselves (<code>2019-01-21T14:56:50%2B00:00</code>), then it would be received and interpreted as <code>2019-01-21T14:56:50%252B00:00</code>.</p>\n\n<p>An additional constraint is, that we want to set the base url elsewhere, when setting up the restTemplate, not where the query is being executed.</p>\n\n<p>Alternatively, is there a way to force '+' not to be interpreted as ' ' by the endpoint? </p>\n\n<p>I have written a short example demonstrating some ways of achieving stricter encoding with their drawbacks explained as comments:</p>\n\n<pre><code>package com.example.clientandserver;\n\nimport org.springframework.boot.CommandLineRunner;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.boot.web.client.RestTemplateBuilder;\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RequestParam;\nimport org.springframework.web.bind.annotation.RestController;\nimport org.springframework.web.client.RestTemplate;\nimport org.springframework.web.util.DefaultUriBuilderFactory;\nimport org.springframework.web.util.UriComponentsBuilder;\nimport org.springframework.web.util.UriUtils;\n\nimport java.nio.charset.StandardCharsets;\nimport java.util.HashMap;\nimport java.util.Map;\n\n@SpringBootApplication\n@RestController\npublic class ClientAndServerApp implements CommandLineRunner {\n\n    public static void main(String[] args) {\n        SpringApplication.run(ClientAndServerApp.class, args);\n    }\n\n    @Override\n    public void run(String... args) {\n        String beforeTimestamp = \"2019-01-21T14:56:50+00:00\";\n\n        // Previously - base url and raw params (encoded automatically). \n        // This worked in the earlier version of Spring Boot\n        {\n            RestTemplate restTemplate = new RestTemplateBuilder()\n               .rootUri(\"http://localhost:8080\").build();\n            UriComponentsBuilder b = UriComponentsBuilder.fromPath(\"/search\");\n            if (beforeTimestamp != null) {\n                b.queryParam(\"beforeTimestamp\", beforeTimestamp);\n            }\n            restTemplate.getForEntity(b.toUriString(), Object.class);\n            // Received: 2019-01-21T14:56:50 00:00\n            //       Plus sign missing here ^\n        }\n\n        // Option 1 - no base url and encoding the param ourselves.\n        {\n            RestTemplate restTemplate = new RestTemplate();\n            UriComponentsBuilder b = UriComponentsBuilder\n                .fromHttpUrl(\"http://localhost:8080/search\");\n            if (beforeTimestamp != null) {\n                b.queryParam(\n                    \"beforeTimestamp\",\n                    UriUtils.encode(beforeTimestamp, StandardCharsets.UTF_8)\n                );\n            }\n            restTemplate.getForEntity(\n                b.build(true).toUri(), Object.class\n            ).getBody();\n            // Received: 2019-01-21T14:56:50+00:00\n        }\n\n        // Option 2 - with templated base url, query parameter is not optional.\n        {\n            RestTemplate restTemplate = new RestTemplateBuilder()\n                .rootUri(\"http://localhost:8080\")\n                .uriTemplateHandler(new DefaultUriBuilderFactory())\n                .build();\n            Map&lt;String, String&gt; params = new HashMap&lt;&gt;();\n            params.put(\"beforeTimestamp\", beforeTimestamp);\n            restTemplate.getForEntity(\n                \"/search?beforeTimestamp={beforeTimestamp}\",\n                Object.class,\n                params);\n            // Received: 2019-01-21T14:56:50+00:00\n        }\n    }\n\n    @GetMapping(\"/search\")\n    public void search(@RequestParam String beforeTimestamp) {\n        System.out.println(\"Received: \" + beforeTimestamp);\n    }\n}\n</code></pre>\n"},{"tags":["java","consumer","apache-pulsar","pulsar"],"comments":[{"owner":{"account_id":13047412,"reputation":2792,"user_id":9428851,"display_name":"Victor Gubin"},"score":0,"creation_date":1660158877,"post_id":73310425,"comment_id":129469581,"body_markdown":"Have you tried to use non persistent topic, and shared subscription as described in documentation ?","body":"Have you tried to use non persistent topic, and shared subscription as described in documentation ?"},{"owner":{"account_id":18819196,"reputation":3,"user_id":13725544,"display_name":"Aranya Das"},"score":0,"creation_date":1660311912,"post_id":73310425,"comment_id":129509745,"body_markdown":"@VictorGubin Yes, I did.But it&#39;s showing same behavior. The messages are piling up in the topic.","body":"@VictorGubin Yes, I did.But it&#39;s showing same behavior. The messages are piling up in the topic."}],"answers":[{"tags":[],"owner":{"account_id":26102991,"reputation":101,"user_id":19798114,"display_name":"Penghui Li"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660887959,"creation_date":1660887959,"answer_id":73412309,"question_id":73310425,"body_markdown":"Which version are you using?\r\n\r\nIf you are using Java Client 2.8.3, 2.9.1, or 2.10.0\r\nIt might be related to this one https://github.com/apache/pulsar/pull/15162\r\nThis is a performance regression and fixed in 2.10.1 and 2.9.3.\r\nFor the 2.8.x version, 2.8.4 is in the release process, it will be available in 2 ~ 3 weeks.\r\n\r\nIf not the above problem. It&#39;s better to provide more context about how high throughput of the topic.","title":"Pulsar Consumer is not consuming fast enough","body":"<p>Which version are you using?</p>\n<p>If you are using Java Client 2.8.3, 2.9.1, or 2.10.0\nIt might be related to this one <a href=\"https://github.com/apache/pulsar/pull/15162\" rel=\"nofollow noreferrer\">https://github.com/apache/pulsar/pull/15162</a>\nThis is a performance regression and fixed in 2.10.1 and 2.9.3.\nFor the 2.8.x version, 2.8.4 is in the release process, it will be available in 2 ~ 3 weeks.</p>\n<p>If not the above problem. It's better to provide more context about how high throughput of the topic.</p>\n"}],"owner":{"account_id":18819196,"reputation":3,"user_id":13725544,"display_name":"Aranya Das"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":604,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73412309,"answer_count":1,"score":0,"last_activity_date":1660887959,"creation_date":1660152354,"question_id":73310425,"body_markdown":"I have a pulsar client and consumer code as below.\r\n\r\n    PulsarClient client = PulsarClient.builder()\r\n                .serviceUrl(pulsarServerUrl).enableTlsHostnameVerification(false)\r\n                .listenerThreads(1).ioThreads(1)\r\n                .build();\r\n\r\n        BatchReceivePolicy batchReceivePolicy\r\n                        = BatchReceivePolicy.builder().maxNumBytes(10 *\r\n                1024 * 1024).maxNumMessages(100000).timeout(-1, TimeUnit.SECONDS).build();\r\n        consumer = client.newConsumer()\r\n                .topic(topicName)\r\n                .subscriptionType(SubscriptionType.Shared)\r\n                .subscriptionName(subscriptionName)\r\n                .subscriptionInitialPosition(SubscriptionInitialPosition.Latest)\r\n                .batchReceivePolicy(batchReceivePolicy)\r\n\r\n                .messageListener((consumer1, msg) -&gt; {\r\n                    LOG.info(&quot;Message Received from Pulsar : &quot; + new String(msg.getData()));\r\n                   \r\n                    consumer1.acknowledgeAsync(msg);\r\n                })\r\n                .subscribe();\r\n\r\nBut with this code, there is a huge backlog in pulsar topic. Its around 12 million. My question is how to make pulsar consumer consume more faster? So that the backlog will be 0. BTW, I have tried batch receive as well, but no luck.","title":"Pulsar Consumer is not consuming fast enough","body":"<p>I have a pulsar client and consumer code as below.</p>\n<pre><code>PulsarClient client = PulsarClient.builder()\n            .serviceUrl(pulsarServerUrl).enableTlsHostnameVerification(false)\n            .listenerThreads(1).ioThreads(1)\n            .build();\n\n    BatchReceivePolicy batchReceivePolicy\n                    = BatchReceivePolicy.builder().maxNumBytes(10 *\n            1024 * 1024).maxNumMessages(100000).timeout(-1, TimeUnit.SECONDS).build();\n    consumer = client.newConsumer()\n            .topic(topicName)\n            .subscriptionType(SubscriptionType.Shared)\n            .subscriptionName(subscriptionName)\n            .subscriptionInitialPosition(SubscriptionInitialPosition.Latest)\n            .batchReceivePolicy(batchReceivePolicy)\n\n            .messageListener((consumer1, msg) -&gt; {\n                LOG.info(&quot;Message Received from Pulsar : &quot; + new String(msg.getData()));\n               \n                consumer1.acknowledgeAsync(msg);\n            })\n            .subscribe();\n</code></pre>\n<p>But with this code, there is a huge backlog in pulsar topic. Its around 12 million. My question is how to make pulsar consumer consume more faster? So that the backlog will be 0. BTW, I have tried batch receive as well, but no luck.</p>\n"},{"tags":["java","amazon-web-services","spring-boot","amazon-s3","amazon-kinesis"],"comments":[{"owner":{"account_id":3695522,"reputation":561,"user_id":3076981,"accept_rate":73,"display_name":"Arpit"},"score":0,"creation_date":1660887322,"post_id":73412176,"comment_id":129644058,"body_markdown":"which aws service are you trying to connect with Spring boot application?","body":"which aws service are you trying to connect with Spring boot application?"},{"owner":{"account_id":19455670,"reputation":3,"user_id":14231053,"display_name":"Mahesh Thorat"},"score":0,"creation_date":1661146313,"post_id":73412176,"comment_id":129693267,"body_markdown":"I tried connecting kinesis and s3","body":"I tried connecting kinesis and s3"}],"answers":[{"tags":[],"owner":{"account_id":8704066,"reputation":812,"user_id":6512807,"display_name":"Vikram S"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660887891,"creation_date":1660887891,"answer_id":73412300,"question_id":73412176,"body_markdown":"You can use https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html\r\n\r\ndefault credentials provider chain that looks for credentials in this order:\r\n\r\n- Environment Variables - AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY\r\n- Java System Properties - aws.accessKeyId and aws.secretKey\r\n- Web Identity Token credentials from the environment or container\r\n- Credential profiles file at the default location (~/.aws/credentials) shared by all AWS SDKs and the AWS CLI\r\n- Credentials delivered through the Amazon EC2 container service \r\n- Instance profile credentials delivered through the Amazon EC2 metadata service\r\n\r\n```\r\n@Bean\r\n\tpublic AWSCredentialsProvider amazonAWSCredentialsProvider() {\r\n\t\t\r\n\t\treturn DefaultAWSCredentialsProviderChain.getInstance();\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic AmazonS3 amazonS3() {\r\n\t\treturn AmazonS3ClientBuilder\r\n\t\t  .standard()\r\n\t\t  .withCredentials(amazonAWSCredentialsProvider())\r\n\t\t  .withRegion(Regions.US_WEST_2)\r\n\t\t  .build();\r\n\t}\r\n```","title":"How to consume temporary AWS credentials in spring boot?","body":"<p>You can use <a href=\"https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/AWSJavaSDK/latest/javadoc/com/amazonaws/auth/DefaultAWSCredentialsProviderChain.html</a></p>\n<p>default credentials provider chain that looks for credentials in this order:</p>\n<ul>\n<li>Environment Variables - AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY</li>\n<li>Java System Properties - aws.accessKeyId and aws.secretKey</li>\n<li>Web Identity Token credentials from the environment or container</li>\n<li>Credential profiles file at the default location (~/.aws/credentials) shared by all AWS SDKs and the AWS CLI</li>\n<li>Credentials delivered through the Amazon EC2 container service</li>\n<li>Instance profile credentials delivered through the Amazon EC2 metadata service</li>\n</ul>\n<pre><code>@Bean\n    public AWSCredentialsProvider amazonAWSCredentialsProvider() {\n        \n        return DefaultAWSCredentialsProviderChain.getInstance();\n    }\n    \n    @Bean\n    public AmazonS3 amazonS3() {\n        return AmazonS3ClientBuilder\n          .standard()\n          .withCredentials(amazonAWSCredentialsProvider())\n          .withRegion(Regions.US_WEST_2)\n          .build();\n    }\n</code></pre>\n"}],"owner":{"account_id":19455670,"reputation":3,"user_id":14231053,"display_name":"Mahesh Thorat"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1867,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660887891,"creation_date":1660886734,"question_id":73412176,"body_markdown":"So I am working on spring boot application from which I am expected to access AWS resources, I know how to access the AWS resources via IAM credentials and STS credentials, I am looking for an example or way to consume following temporary AWS credentials via spring boot application.\r\n\r\n 1. AWS_SECRET_ACCESS_KEY\r\n 2. AWS_ACCESS_KEY\r\n 3. AWS_SESSION_TOKEN\r\n 4. AWS_SESSION_ID\r\n\r\nNote: I have tried accessing via BasicSessionCredentials and BasicAWSCredentials but no luck with the same getting error **Unable to execute Http request** \r\n\r\nSo any reference or example to set all four properties using java would help a lot, thanks!!","title":"How to consume temporary AWS credentials in spring boot?","body":"<p>So I am working on spring boot application from which I am expected to access AWS resources, I know how to access the AWS resources via IAM credentials and STS credentials, I am looking for an example or way to consume following temporary AWS credentials via spring boot application.</p>\n<ol>\n<li>AWS_SECRET_ACCESS_KEY</li>\n<li>AWS_ACCESS_KEY</li>\n<li>AWS_SESSION_TOKEN</li>\n<li>AWS_SESSION_ID</li>\n</ol>\n<p>Note: I have tried accessing via BasicSessionCredentials and BasicAWSCredentials but no luck with the same getting error <strong>Unable to execute Http request</strong></p>\n<p>So any reference or example to set all four properties using java would help a lot, thanks!!</p>\n"},{"tags":["java","yaml","charset"],"owner":{"account_id":19761741,"reputation":68,"user_id":14470687,"display_name":"CHUANWISE"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1098,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660887606,"creation_date":1660887606,"question_id":73412262,"body_markdown":"The majority of my users don&#39;t know how to solve the charset error, they always ask this question in user groups. So I want to find a solution choosing proper charset automatically.\r\n\r\nThe first solution is fixed charset property in configuration file. For example, program will load the yaml file in any charset, and read the property `metadata.charset`, then reload it in this charset. \r\n\r\nThis is my code choosing property charset:\r\n\r\n```java\r\nif (Objects.isNull(charset)) {\r\n  if (getInputFile().exists()) {\r\n\r\n    final InputStream inputStream = getInputStream();\r\n    final Object object = yaml.load(inputStream);  // line 85\r\n\r\n    if (object instanceof Map) {\r\n      try {\r\n        @SuppressWarnings(&quot;unchecked&quot;)\r\n        final String charsetName = Structure.of((Map&lt;String, Object&gt;) object).getStringOrFail(charsetPath);\r\n        charset = Charset.forName(charsetName);\r\n      } catch (Throwable throwable) {\r\n        throw new IOException(&quot;can not find the charset in auto charset yaml file: &quot; + getInputFile(), throwable);\r\n      }\r\n    } else {\r\n      throw new IOException(&quot;yaml value is an instance of type &#39;&quot; + object.getClass().getName() + &quot;&#39;, not required &#39;Map&lt;String, Object&gt;&#39;!&quot;);\r\n    }\r\n  } else {\r\n    charset = defaultCharset;\r\n  }\r\n}\r\n```\r\n\r\nThe charset of my users&#39; device are inconsistent, and they maybe share configuration file to each other. Consider following situation: If the shared configuration, includes characters can not load in UTF-8, is saved in GBK, and is loading in a device which charset defaults UTF-8, we will get a exception:\r\n\r\n```\r\njava.nio.charset.MalformedInputException: Input length = 1\r\norg.yaml.snakeyaml.error.YAMLException: java.nio.charset.MalformedInputException: Input length = 1\r\n\tat org.yaml.snakeyaml.reader.StreamReader.update(StreamReader.java:218)\r\n\tat org.yaml.snakeyaml.reader.StreamReader.ensureEnoughData(StreamReader.java:176)\r\n\tat org.yaml.snakeyaml.reader.StreamReader.ensureEnoughData(StreamReader.java:171)\r\n\tat org.yaml.snakeyaml.reader.StreamReader.peek(StreamReader.java:126)\r\n\tat org.yaml.snakeyaml.scanner.ScannerImpl.scanToNextToken(ScannerImpl.java:1218)\r\n\tat org.yaml.snakeyaml.scanner.ScannerImpl.fetchMoreTokens(ScannerImpl.java:329)\r\n\tat org.yaml.snakeyaml.scanner.ScannerImpl.checkToken(ScannerImpl.java:251)\r\n\tat org.yaml.snakeyaml.parser.ParserImpl$ParseImplicitDocumentStart.produce(ParserImpl.java:214)\r\n\tat org.yaml.snakeyaml.parser.ParserImpl.peekEvent(ParserImpl.java:166)\r\n\tat org.yaml.snakeyaml.parser.ParserImpl.checkEvent(ParserImpl.java:156)\r\n\tat org.yaml.snakeyaml.composer.Composer.getSingleNode(Composer.java:141)\r\n\tat org.yaml.snakeyaml.constructor.BaseConstructor.getSingleData(BaseConstructor.java:151)\r\n\tat org.yaml.snakeyaml.Yaml.loadFromReader(Yaml.java:491)\r\n\tat org.yaml.snakeyaml.Yaml.load(Yaml.java:429)\r\n\tat cn.codethink.xiaoming.platform.configuration.io.AutoCharsetYamlFileInputOutputImpl.getCharset(AutoCharsetYamlFileInputOutputImpl.java:85)\r\n\tat cn.codethink.xiaoming.platform.configuration.io.AutoCharsetYamlFileInputOutputImpl.getReader(AutoCharsetYamlFileInputOutputImpl.java:70)\r\n\tat cn.codethink.xiaoming.platform.configuration.AbstractTextConfiguration.load(AbstractTextConfiguration.java:37)\r\n\tat cn.codethink.xiaoming.platform.configuration.AbstractTextConfiguration.load(AbstractTextConfiguration.java:87)\r\n\tat cn.codethink.xiaoming.platform.configuration.ConfigurationTest.testAutoCharsetYamlFile(ConfigurationTest.java:54)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\r\n\tat org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\r\n\tat org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\r\n\tat org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\r\n\tat org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\r\n\tat org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat java.util.ArrayList.forEach(ArrayList.java:1259)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\r\n\tat org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\r\n\tat org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\r\n\tat org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\r\n\tat org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\r\n\tat org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\r\n\tat org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\r\n\tat org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\r\n\tat org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\r\n\tat org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\r\n\tat org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\r\n\tat com.sun.proxy.$Proxy2.stop(Unknown Source)\r\n\tat org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:135)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat java.lang.reflect.Method.invoke(Method.java:498)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\r\n\tat org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\r\n\tat org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)\r\n\tat org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\r\n\tat org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\r\n\tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\r\n\tat org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\nCaused by: java.nio.charset.MalformedInputException: Input length = 1\r\n\tat java.nio.charset.CoderResult.throwException(CoderResult.java:281)\r\n\tat sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:339)\r\n\tat sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\r\n\tat java.io.InputStreamReader.read(InputStreamReader.java:184)\r\n\tat org.yaml.snakeyaml.reader.UnicodeReader.read(UnicodeReader.java:125)\r\n\tat org.yaml.snakeyaml.reader.StreamReader.update(StreamReader.java:183)\r\n\t... 108 more\r\n```\r\n\r\nHow to ignore it and replace wrong characters to anything else **temporarily** (only in this context, the exception will be thrown at other codes in same program)?\r\n\r\nI found solutions choosing property charset: use head charset comments like Python, and just read a few characters by `InputStream` (but I don&#39;t think it&#39;s graceful enough), or use BOM. But I still want to know how to solve the problem.","title":"How to ignore `java.nio.charset.MalformedInputException` and replace wrong characters to anything else temporarily?","body":"<p>The majority of my users don't know how to solve the charset error, they always ask this question in user groups. So I want to find a solution choosing proper charset automatically.</p>\n<p>The first solution is fixed charset property in configuration file. For example, program will load the yaml file in any charset, and read the property <code>metadata.charset</code>, then reload it in this charset.</p>\n<p>This is my code choosing property charset:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (Objects.isNull(charset)) {\n  if (getInputFile().exists()) {\n\n    final InputStream inputStream = getInputStream();\n    final Object object = yaml.load(inputStream);  // line 85\n\n    if (object instanceof Map) {\n      try {\n        @SuppressWarnings(&quot;unchecked&quot;)\n        final String charsetName = Structure.of((Map&lt;String, Object&gt;) object).getStringOrFail(charsetPath);\n        charset = Charset.forName(charsetName);\n      } catch (Throwable throwable) {\n        throw new IOException(&quot;can not find the charset in auto charset yaml file: &quot; + getInputFile(), throwable);\n      }\n    } else {\n      throw new IOException(&quot;yaml value is an instance of type '&quot; + object.getClass().getName() + &quot;', not required 'Map&lt;String, Object&gt;'!&quot;);\n    }\n  } else {\n    charset = defaultCharset;\n  }\n}\n</code></pre>\n<p>The charset of my users' device are inconsistent, and they maybe share configuration file to each other. Consider following situation: If the shared configuration, includes characters can not load in UTF-8, is saved in GBK, and is loading in a device which charset defaults UTF-8, we will get a exception:</p>\n<pre><code>java.nio.charset.MalformedInputException: Input length = 1\norg.yaml.snakeyaml.error.YAMLException: java.nio.charset.MalformedInputException: Input length = 1\n    at org.yaml.snakeyaml.reader.StreamReader.update(StreamReader.java:218)\n    at org.yaml.snakeyaml.reader.StreamReader.ensureEnoughData(StreamReader.java:176)\n    at org.yaml.snakeyaml.reader.StreamReader.ensureEnoughData(StreamReader.java:171)\n    at org.yaml.snakeyaml.reader.StreamReader.peek(StreamReader.java:126)\n    at org.yaml.snakeyaml.scanner.ScannerImpl.scanToNextToken(ScannerImpl.java:1218)\n    at org.yaml.snakeyaml.scanner.ScannerImpl.fetchMoreTokens(ScannerImpl.java:329)\n    at org.yaml.snakeyaml.scanner.ScannerImpl.checkToken(ScannerImpl.java:251)\n    at org.yaml.snakeyaml.parser.ParserImpl$ParseImplicitDocumentStart.produce(ParserImpl.java:214)\n    at org.yaml.snakeyaml.parser.ParserImpl.peekEvent(ParserImpl.java:166)\n    at org.yaml.snakeyaml.parser.ParserImpl.checkEvent(ParserImpl.java:156)\n    at org.yaml.snakeyaml.composer.Composer.getSingleNode(Composer.java:141)\n    at org.yaml.snakeyaml.constructor.BaseConstructor.getSingleData(BaseConstructor.java:151)\n    at org.yaml.snakeyaml.Yaml.loadFromReader(Yaml.java:491)\n    at org.yaml.snakeyaml.Yaml.load(Yaml.java:429)\n    at cn.codethink.xiaoming.platform.configuration.io.AutoCharsetYamlFileInputOutputImpl.getCharset(AutoCharsetYamlFileInputOutputImpl.java:85)\n    at cn.codethink.xiaoming.platform.configuration.io.AutoCharsetYamlFileInputOutputImpl.getReader(AutoCharsetYamlFileInputOutputImpl.java:70)\n    at cn.codethink.xiaoming.platform.configuration.AbstractTextConfiguration.load(AbstractTextConfiguration.java:37)\n    at cn.codethink.xiaoming.platform.configuration.AbstractTextConfiguration.load(AbstractTextConfiguration.java:87)\n    at cn.codethink.xiaoming.platform.configuration.ConfigurationTest.testAutoCharsetYamlFile(ConfigurationTest.java:54)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.util.ArrayList.forEach(ArrayList.java:1259)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.util.ArrayList.forEach(ArrayList.java:1259)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:108)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:96)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:75)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.processAllTestClasses(JUnitPlatformTestClassProcessor.java:99)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor$CollectAllTestClassesExecutor.access$000(JUnitPlatformTestClassProcessor.java:79)\n    at org.gradle.api.internal.tasks.testing.junitplatform.JUnitPlatformTestClassProcessor.stop(JUnitPlatformTestClassProcessor.java:75)\n    at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.stop(SuiteTestClassProcessor.java:61)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:33)\n    at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:94)\n    at com.sun.proxy.$Proxy2.stop(Unknown Source)\n    at org.gradle.api.internal.tasks.testing.worker.TestWorker.stop(TestWorker.java:135)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:36)\n    at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:182)\n    at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:164)\n    at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:414)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:56)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.nio.charset.MalformedInputException: Input length = 1\n    at java.nio.charset.CoderResult.throwException(CoderResult.java:281)\n    at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:339)\n    at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:178)\n    at java.io.InputStreamReader.read(InputStreamReader.java:184)\n    at org.yaml.snakeyaml.reader.UnicodeReader.read(UnicodeReader.java:125)\n    at org.yaml.snakeyaml.reader.StreamReader.update(StreamReader.java:183)\n    ... 108 more\n</code></pre>\n<p>How to ignore it and replace wrong characters to anything else <strong>temporarily</strong> (only in this context, the exception will be thrown at other codes in same program)?</p>\n<p>I found solutions choosing property charset: use head charset comments like Python, and just read a few characters by <code>InputStream</code> (but I don't think it's graceful enough), or use BOM. But I still want to know how to solve the problem.</p>\n"},{"tags":["java","list","sorting"],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660887335,"creation_date":1660852790,"answer_id":73408776,"question_id":73408706,"body_markdown":"You might want to get familiar with Java 8 static methods of the [`Comparator`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html#method-summary) interface like `comparing()`, `comparingInt()`, etc.\r\n\r\n```\r\nList&lt;Employee&gt; sortedEmployees = employees.stream()\r\n    .sorted(Comparator.comparingInt(employee -&gt; employee.getLastName().length()))\r\n    .collect(Collectors.toList());\r\n```\r\n\r\nAlso, **don&#39;t** sort the data multiple times (i.e. avoid applying `sorted()` more than once), instead you can chain the *comparators* by using different flavors of the method [`thenComparing()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html#thenComparing(java.util.Comparator)).\r\n\r\nNote, that if you don&#39;t need to create a copy of the list, then there&#39;s no point in utilizing streams. Instead, you can sort the source list by using [`List.sort()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)).","title":"Sorting of List of Objects based on Custom parameter Java","body":"<p>You might want to get familiar with Java 8 static methods of the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html#method-summary\" rel=\"nofollow noreferrer\"><code>Comparator</code></a> interface like <code>comparing()</code>, <code>comparingInt()</code>, etc.</p>\n<pre><code>List&lt;Employee&gt; sortedEmployees = employees.stream()\n    .sorted(Comparator.comparingInt(employee -&gt; employee.getLastName().length()))\n    .collect(Collectors.toList());\n</code></pre>\n<p>Also, <strong>don't</strong> sort the data multiple times (i.e. avoid applying <code>sorted()</code> more than once), instead you can chain the <em>comparators</em> by using different flavors of the method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Comparator.html#thenComparing(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>thenComparing()</code></a>.</p>\n<p>Note, that if you don't need to create a copy of the list, then there's no point in utilizing streams. Instead, you can sort the source list by using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/List.html#sort(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>List.sort()</code></a>.</p>\n"}],"owner":{"account_id":15576095,"reputation":21,"user_id":11237182,"display_name":"Mahidhar Gadi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660887335,"creation_date":1660852324,"question_id":73408706,"body_markdown":"I am writing a component where it requires to sort upon Object variable parameter . For example : Employee has variable lastName.\r\nI want to sort the employees by the lastName.lenght()\r\nI have seen many examples,but i could not find an answer\r\nCan I achieve the result in this way or do we need a different approach.\r\n\r\nI am giving the example\r\n```\r\npublic class Employee {\r\n    private int Id;\r\n    private String firstName;\r\n    private String lastName;\r\n    private String department;\r\n\r\n    public Employee(int id, String firstName, String lastName, String department) {\r\n        Id = id;\r\n        this.firstName = firstName;\r\n        this.lastName = lastName;\r\n        this.department = department;\r\n    }\r\n\r\n    public Employee() {\r\n    }\r\n\r\n    public int getId() {\r\n        return Id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        Id = id;\r\n    }\r\n\r\n    public String getFirstName() {\r\n        return firstName;\r\n    }\r\n\r\n    public void setFirstName(String firstName) {\r\n        this.firstName = firstName;\r\n    }\r\n\r\n    public String getLastName() {\r\n        return lastName;\r\n    }\r\n\r\n    public void setLastName(String lastName) {\r\n        this.lastName = lastName;\r\n    }\r\n\r\n    public String getDepartment() {\r\n        return department;\r\n    }\r\n\r\n    public void setDepartment(String department) {\r\n        this.department = department;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;Employee{&quot; +\r\n                &quot;Id=&quot; + Id +\r\n                &quot;, firstName=&#39;&quot; + firstName + &#39;\\&#39;&#39; +\r\n                &quot;, lastName=&#39;&quot; + lastName + &#39;\\&#39;&#39; +\r\n                &quot;, department=&#39;&quot; + department + &#39;\\&#39;&#39; +\r\n                &#39;}&#39;;\r\n    }\r\n}\r\n```\r\n\r\n```\r\nimport java.util.ArrayList;\r\nimport java.util.Comparator;\r\nimport java.util.List;\r\nimport java.util.stream.Collectors;\r\n\r\npublic class SortExample\r\n{\r\n    public static void main(String[] args)\r\n    {\r\n        ArrayList&lt;Employee&gt; employees = getUnsortedEmployeeList();\r\n        Comparator&lt;Employee&gt; compareByName = Comparator\r\n                .comparing(Employee::getFirstName).reversed();\r\n\r\n        Comparator&lt;Employee&gt; compareByLastName = Comparator\r\n                .comparing(Employee::getLastName).reversed();\r\n\r\n\r\n        \r\n        List&lt;Employee&gt; sortedEmployees = employees.stream()\r\n                .sorted(compareByName)\r\n                .sorted(compareByLastName)\r\n\t\t//I have commented the code\r\n        //.sorted((e1,e2) -&gt;e1.getLastName().length().compareTo(e2.getLastName().length()))\r\n                .collect(Collectors.toList());\r\n\r\n        System.out.println(sortedEmployees);\r\n    }\r\n\r\n    private static ArrayList&lt;Employee&gt; getUnsortedEmployeeList()\r\n    {\r\n        ArrayList&lt;Employee&gt; list = new ArrayList&lt;&gt;();\r\n        list.add( new Employee(2, &quot;Irene&quot;, &quot;Parr&quot;,&quot;programming&quot;) );\r\n        list.add( new Employee(1, &quot;Nicola&quot;, &quot;Mitchell&quot;,&quot;programming&quot;) );\r\n        list.add( new Employee(4, &quot;Emily&quot;, &quot;Carr&quot;,&quot;finance&quot;) );\r\n        list.add( new Employee(5, &quot;Blake&quot;, &quot;Baker&quot;,&quot;finance&quot;) );\r\n        list.add( new Employee(3, &quot;Natalie&quot;, &quot;Parsons&quot;,&quot;marketing&quot;) );\r\n        list.add( new Employee(7, &quot;Olivia&quot;, &quot;Clarkson&quot;,&quot;marketing&quot;) );\r\n        list.add( new Employee(6, &quot;Justin&quot;, &quot;Scott&quot;,&quot;marketing&quot;) );\r\n\r\n        return list;\r\n    }\r\n}\r\n```\r\n\r\nAny help would be appreciated.","title":"Sorting of List of Objects based on Custom parameter Java","body":"<p>I am writing a component where it requires to sort upon Object variable parameter . For example : Employee has variable lastName.\nI want to sort the employees by the lastName.lenght()\nI have seen many examples,but i could not find an answer\nCan I achieve the result in this way or do we need a different approach.</p>\n<p>I am giving the example</p>\n<pre><code>public class Employee {\n    private int Id;\n    private String firstName;\n    private String lastName;\n    private String department;\n\n    public Employee(int id, String firstName, String lastName, String department) {\n        Id = id;\n        this.firstName = firstName;\n        this.lastName = lastName;\n        this.department = department;\n    }\n\n    public Employee() {\n    }\n\n    public int getId() {\n        return Id;\n    }\n\n    public void setId(int id) {\n        Id = id;\n    }\n\n    public String getFirstName() {\n        return firstName;\n    }\n\n    public void setFirstName(String firstName) {\n        this.firstName = firstName;\n    }\n\n    public String getLastName() {\n        return lastName;\n    }\n\n    public void setLastName(String lastName) {\n        this.lastName = lastName;\n    }\n\n    public String getDepartment() {\n        return department;\n    }\n\n    public void setDepartment(String department) {\n        this.department = department;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;Employee{&quot; +\n                &quot;Id=&quot; + Id +\n                &quot;, firstName='&quot; + firstName + '\\'' +\n                &quot;, lastName='&quot; + lastName + '\\'' +\n                &quot;, department='&quot; + department + '\\'' +\n                '}';\n    }\n}\n</code></pre>\n<pre><code>import java.util.ArrayList;\nimport java.util.Comparator;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class SortExample\n{\n    public static void main(String[] args)\n    {\n        ArrayList&lt;Employee&gt; employees = getUnsortedEmployeeList();\n        Comparator&lt;Employee&gt; compareByName = Comparator\n                .comparing(Employee::getFirstName).reversed();\n\n        Comparator&lt;Employee&gt; compareByLastName = Comparator\n                .comparing(Employee::getLastName).reversed();\n\n\n        \n        List&lt;Employee&gt; sortedEmployees = employees.stream()\n                .sorted(compareByName)\n                .sorted(compareByLastName)\n        //I have commented the code\n        //.sorted((e1,e2) -&gt;e1.getLastName().length().compareTo(e2.getLastName().length()))\n                .collect(Collectors.toList());\n\n        System.out.println(sortedEmployees);\n    }\n\n    private static ArrayList&lt;Employee&gt; getUnsortedEmployeeList()\n    {\n        ArrayList&lt;Employee&gt; list = new ArrayList&lt;&gt;();\n        list.add( new Employee(2, &quot;Irene&quot;, &quot;Parr&quot;,&quot;programming&quot;) );\n        list.add( new Employee(1, &quot;Nicola&quot;, &quot;Mitchell&quot;,&quot;programming&quot;) );\n        list.add( new Employee(4, &quot;Emily&quot;, &quot;Carr&quot;,&quot;finance&quot;) );\n        list.add( new Employee(5, &quot;Blake&quot;, &quot;Baker&quot;,&quot;finance&quot;) );\n        list.add( new Employee(3, &quot;Natalie&quot;, &quot;Parsons&quot;,&quot;marketing&quot;) );\n        list.add( new Employee(7, &quot;Olivia&quot;, &quot;Clarkson&quot;,&quot;marketing&quot;) );\n        list.add( new Employee(6, &quot;Justin&quot;, &quot;Scott&quot;,&quot;marketing&quot;) );\n\n        return list;\n    }\n}\n</code></pre>\n<p>Any help would be appreciated.</p>\n"},{"tags":["java","android","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660894839,"post_id":73412111,"comment_id":129645932,"body_markdown":"If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question.","body":"If the app crashes, there is a stack trace. Please look that up on logcat, and add it to your question."}],"answers":[{"tags":[],"owner":{"account_id":25916347,"reputation":1,"user_id":19639690,"display_name":"Jeffin Pulsator"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660887226,"creation_date":1660887226,"answer_id":73412222,"question_id":73412111,"body_markdown":"i think your app crashes when you call finish().\r\njust remove that finish() and check if its getting updated in the database","title":"Adding data in Firebase realtime database using push() in Android Studio","body":"<p>i think your app crashes when you call finish().\njust remove that finish() and check if its getting updated in the database</p>\n"}],"owner":{"account_id":25882825,"reputation":9,"user_id":19611563,"display_name":"New"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":386,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660887226,"creation_date":1660886133,"question_id":73412111,"body_markdown":"I&#39;m trying to make a feature in my hospital app which allows users to book appointment with doctor. So when they book appointments, the details such as date of appointment, patient email, doctor email, etc should get stored in both parent nodes named &quot;Doctor Schedule&quot; and &quot;Patient Appointments&quot;. I&#39;m trying to do this using push() in Firebase, but my app keeps crashing. Please help me fix it. \r\n\r\n    public class Book extends AppCompatActivity {\r\n    \r\n        TextView selectedDate;\r\n        Button calenderButton,ok;\r\n        FirebaseAuth mAuth;\r\n        DatabaseReference docUser, patRef;\r\n        ProgressDialog loader;\r\n        FirebaseDatabase database= FirebaseDatabase.getInstance();\r\n        String Date;\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_book);\r\n    \r\n            Intent intent = getIntent();\r\n    \r\n            // receive the value by getStringExtra() method\r\n            // and key must be same which is send by first\r\n            // activity\r\n            String docEmail = intent.getStringExtra(&quot;message_key1&quot;);\r\n            String patEmail = intent.getStringExtra(&quot;message_key2&quot;);\r\n            String patname = intent.getStringExtra(&quot;message_key2.1&quot;);\r\n            String docname = intent.getStringExtra(&quot;message_key2.2&quot;);\r\n            String dphone = intent.getStringExtra(&quot;message_key2.3&quot;);\r\n    \r\n            //Toast.makeText(Book.this, patname, Toast.LENGTH_SHORT).show();\r\n    \r\n            selectedDate=findViewById(R.id.text);\r\n            calenderButton=findViewById(R.id.calender);\r\n            ok=findViewById(R.id.ok);\r\n    \r\n            loader = new ProgressDialog(this);\r\n            mAuth = FirebaseAuth.getInstance();\r\n    \r\n            FirebaseUser user= mAuth.getInstance().getCurrentUser();\r\n            //docUser= database.getReference().child(&quot;Doctor Schedule&quot;);\r\n    \r\n            MaterialDatePicker materialDatePicker=MaterialDatePicker.Builder.datePicker().\r\n                    setTitleText(&quot;Select date&quot;).setSelection(MaterialDatePicker.todayInUtcMilliseconds()).build();\r\n    \r\n            calenderButton.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n                    materialDatePicker.show(getSupportFragmentManager(),&quot;Tag_Picker&quot;);\r\n                    materialDatePicker.addOnPositiveButtonClickListener(new MaterialPickerOnPositiveButtonClickListener() {\r\n                        @Override\r\n                        public void onPositiveButtonClick(Object selection) {\r\n                            selectedDate.setText(materialDatePicker.getHeaderText());\r\n                            Date=materialDatePicker.getHeaderText();\r\n                        }\r\n                    });\r\n                }\r\n            });\r\n    \r\n              class Post {\r\n    \r\n                  public Post(String Date, String Patient,String Email,String Doctor,String Status) {\r\n                    // ...\r\n                }\r\n    \r\n            }\r\n    \r\n            class Post1 {\r\n    \r\n                public Post1(String Date, String Patient,String Doctor,String Email,String Phone,String Status) {\r\n                    // ...\r\n                }\r\n    \r\n            }\r\n    \r\n            ok.setOnClickListener(new View.OnClickListener() {\r\n                @Override\r\n                public void onClick(View view) {\r\n    \r\n                    if (Date != null) {\r\n    \r\n                        docUser = database.getReference().child(&quot;Doctor Schedule&quot;);\r\n                        DatabaseReference newdocUser = docUser.push();\r\n    \r\n                        newdocUser.setValue(new Post(Date, patname,patEmail,docEmail,&quot;Pending&quot;));\r\n \r\n    \r\n                        patRef= database.getReference().child(&quot;Patient Appointments&quot;);\r\n                        DatabaseReference newpatRef = patRef.push();\r\n    \r\n                        newpatRef.setValue(new Post1(Date,patEmail,docname,docEmail,dphone,&quot;Pending&quot;));\r\n    \r\n                  \r\n                    }\r\n    \r\n                    else {\r\n                        Toast.makeText(Book.this, &quot;Select date!&quot;, Toast.LENGTH_SHORT).show();\r\n    \r\n                    }\r\n    \r\n                    finish();\r\n    \r\n                }\r\n            });\r\n        }\r\n    }","title":"Adding data in Firebase realtime database using push() in Android Studio","body":"<p>I'm trying to make a feature in my hospital app which allows users to book appointment with doctor. So when they book appointments, the details such as date of appointment, patient email, doctor email, etc should get stored in both parent nodes named &quot;Doctor Schedule&quot; and &quot;Patient Appointments&quot;. I'm trying to do this using push() in Firebase, but my app keeps crashing. Please help me fix it.</p>\n<pre><code>public class Book extends AppCompatActivity {\n\n    TextView selectedDate;\n    Button calenderButton,ok;\n    FirebaseAuth mAuth;\n    DatabaseReference docUser, patRef;\n    ProgressDialog loader;\n    FirebaseDatabase database= FirebaseDatabase.getInstance();\n    String Date;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_book);\n\n        Intent intent = getIntent();\n\n        // receive the value by getStringExtra() method\n        // and key must be same which is send by first\n        // activity\n        String docEmail = intent.getStringExtra(&quot;message_key1&quot;);\n        String patEmail = intent.getStringExtra(&quot;message_key2&quot;);\n        String patname = intent.getStringExtra(&quot;message_key2.1&quot;);\n        String docname = intent.getStringExtra(&quot;message_key2.2&quot;);\n        String dphone = intent.getStringExtra(&quot;message_key2.3&quot;);\n\n        //Toast.makeText(Book.this, patname, Toast.LENGTH_SHORT).show();\n\n        selectedDate=findViewById(R.id.text);\n        calenderButton=findViewById(R.id.calender);\n        ok=findViewById(R.id.ok);\n\n        loader = new ProgressDialog(this);\n        mAuth = FirebaseAuth.getInstance();\n\n        FirebaseUser user= mAuth.getInstance().getCurrentUser();\n        //docUser= database.getReference().child(&quot;Doctor Schedule&quot;);\n\n        MaterialDatePicker materialDatePicker=MaterialDatePicker.Builder.datePicker().\n                setTitleText(&quot;Select date&quot;).setSelection(MaterialDatePicker.todayInUtcMilliseconds()).build();\n\n        calenderButton.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n                materialDatePicker.show(getSupportFragmentManager(),&quot;Tag_Picker&quot;);\n                materialDatePicker.addOnPositiveButtonClickListener(new MaterialPickerOnPositiveButtonClickListener() {\n                    @Override\n                    public void onPositiveButtonClick(Object selection) {\n                        selectedDate.setText(materialDatePicker.getHeaderText());\n                        Date=materialDatePicker.getHeaderText();\n                    }\n                });\n            }\n        });\n\n          class Post {\n\n              public Post(String Date, String Patient,String Email,String Doctor,String Status) {\n                // ...\n            }\n\n        }\n\n        class Post1 {\n\n            public Post1(String Date, String Patient,String Doctor,String Email,String Phone,String Status) {\n                // ...\n            }\n\n        }\n\n        ok.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View view) {\n\n                if (Date != null) {\n\n                    docUser = database.getReference().child(&quot;Doctor Schedule&quot;);\n                    DatabaseReference newdocUser = docUser.push();\n\n                    newdocUser.setValue(new Post(Date, patname,patEmail,docEmail,&quot;Pending&quot;));\n\n\n                    patRef= database.getReference().child(&quot;Patient Appointments&quot;);\n                    DatabaseReference newpatRef = patRef.push();\n\n                    newpatRef.setValue(new Post1(Date,patEmail,docname,docEmail,dphone,&quot;Pending&quot;));\n\n              \n                }\n\n                else {\n                    Toast.makeText(Book.this, &quot;Select date!&quot;, Toast.LENGTH_SHORT).show();\n\n                }\n\n                finish();\n\n            }\n        });\n    }\n}\n</code></pre>\n"},{"tags":["java","copy","opengl-es-2.0","lwjgl","vbo"],"comments":[{"owner":{"account_id":5046303,"reputation":6678,"user_id":4052193,"accept_rate":50,"display_name":"Columbo"},"score":3,"creation_date":1661007362,"post_id":73412194,"comment_id":129670719,"body_markdown":"Could you keep the data client-side and render using client arrays instead of with VBOs? Never ideal, but at least means you don&#39;t duplicate the data if memory is a top concern.","body":"Could you keep the data client-side and render using client arrays instead of with VBOs? Never ideal, but at least means you don&#39;t duplicate the data if memory is a top concern."},{"owner":{"account_id":14864245,"reputation":540,"user_id":10733903,"display_name":"Vlad Vyatkin"},"score":0,"creation_date":1661145348,"post_id":73412194,"comment_id":129693125,"body_markdown":"no, CPU is a huge bottleneck too, unfortunately. I am leaning towards duplication after all, but I wanted to know if anyone knows a better way.","body":"no, CPU is a huge bottleneck too, unfortunately. I am leaning towards duplication after all, but I wanted to know if anyone knows a better way."}],"owner":{"account_id":14864245,"reputation":540,"user_id":10733903,"display_name":"Vlad Vyatkin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":73,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660886946,"creation_date":1660886946,"question_id":73412194,"body_markdown":"Due to a downgrade in my project&#39;s hardware I need to switch from OpenGL-ES 3.2 to OpenGL 2.0.\r\n\r\nThe feature that I&#39;m struggling with is glCopyBufferSubData, which allows you to copy data between 2 VBO&#39;s.\r\n\r\nThe problem that I&#39;m facing is that I have meshes that dynamically grow, and it&#39;s impossible to tell how big they will get from the start. So I have to sometimes expand the VBO buffers in increments, for example once every 100 vertexes I would allocate space for another 100.\r\n\r\nHere&#39;s how I used to do that (Java LWJGL code):\r\n```\r\n// Input:\r\n// buffer - an empty buffer object of new expanded size\r\n// vertexCount - number of vertexes currently written into the old buffer\r\npublic void reCreate(FloatBuffer buffer, int vertexCount)\r\n    {\r\n        glBindBuffer(GL_COPY_READ_BUFFER, ID);\r\n\r\n        int newVboID = glGenBuffers();\r\n        glBindBuffer(GL_ARRAY_BUFFER, newVboID);\r\n\r\n        // allocates new memory for the new VBO\r\n        glBufferData(GL_ARRAY_BUFFER, buffer, GL_STATIC_DRAW);\r\n\r\n        // copy data from old VBO to new\r\n        glCopyBufferSubData(GL_COPY_READ_BUFFER, GL_ARRAY_BUFFER, 0, 0, vertexCount * FLOAT_SIZE);\r\n\r\n        // replace VBO ID and delete the old VBO\r\n        glDeleteBuffers(ID);\r\n        ID = newVboID;\r\n\r\n        // unbind buffers\r\n        glBindBuffer(GL_COPY_READ_BUFFER, 0);\r\n        glBindBuffer(GL_ARRAY_BUFFER, 0);\r\n    }\r\n```\r\n\r\nHow can I achieve the same goal in 2.0? I.e. basically allocating more memory for VBO data array?\r\nThe only way I can think of is to read data from VBO into the client application and then just create a new VBO with that data. But that&#39;s gonna be very slow.\r\n\r\nOh, I also can&#39;t keep the data client-side (to avoid reading from VBO) because of memory concerns. It&#39;s too much.","title":"OpenGL-ES 2.0 glCopyBufferSubData alternative","body":"<p>Due to a downgrade in my project's hardware I need to switch from OpenGL-ES 3.2 to OpenGL 2.0.</p>\n<p>The feature that I'm struggling with is glCopyBufferSubData, which allows you to copy data between 2 VBO's.</p>\n<p>The problem that I'm facing is that I have meshes that dynamically grow, and it's impossible to tell how big they will get from the start. So I have to sometimes expand the VBO buffers in increments, for example once every 100 vertexes I would allocate space for another 100.</p>\n<p>Here's how I used to do that (Java LWJGL code):</p>\n<pre><code>// Input:\n// buffer - an empty buffer object of new expanded size\n// vertexCount - number of vertexes currently written into the old buffer\npublic void reCreate(FloatBuffer buffer, int vertexCount)\n    {\n        glBindBuffer(GL_COPY_READ_BUFFER, ID);\n\n        int newVboID = glGenBuffers();\n        glBindBuffer(GL_ARRAY_BUFFER, newVboID);\n\n        // allocates new memory for the new VBO\n        glBufferData(GL_ARRAY_BUFFER, buffer, GL_STATIC_DRAW);\n\n        // copy data from old VBO to new\n        glCopyBufferSubData(GL_COPY_READ_BUFFER, GL_ARRAY_BUFFER, 0, 0, vertexCount * FLOAT_SIZE);\n\n        // replace VBO ID and delete the old VBO\n        glDeleteBuffers(ID);\n        ID = newVboID;\n\n        // unbind buffers\n        glBindBuffer(GL_COPY_READ_BUFFER, 0);\n        glBindBuffer(GL_ARRAY_BUFFER, 0);\n    }\n</code></pre>\n<p>How can I achieve the same goal in 2.0? I.e. basically allocating more memory for VBO data array?\nThe only way I can think of is to read data from VBO into the client application and then just create a new VBO with that data. But that's gonna be very slow.</p>\n<p>Oh, I also can't keep the data client-side (to avoid reading from VBO) because of memory concerns. It's too much.</p>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":24239813,"reputation":56,"user_id":18192360,"display_name":"Breno"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656105385,"creation_date":1656105385,"answer_id":72749483,"question_id":72377943,"body_markdown":"In NSA mode, many operators show the 5G icon even though there is no 5G bearer in use, and only the 4G anchor cell is indicating that it supports 5G aggregation via upperLayerIndication.\r\n\r\nSo in your case you might not even have a 5G cell configured, and there is no way to force the phone to acquire a 5G bearer (it&#39;s up to the network to reconfigure you to the 5G cell). If you&#39;re not using mobile data, it is very that likely there is no 5G bearer in use. \r\n\r\nBut it is usually configured when you start a data session. So make sure to have a speedtest running, or some kind of download session when accessing CellIdentityNr/CellInfoNr.\r\n\r\nThe only API provided by Android Telephony to retrieve the NR-ARFCN is [`getNrarfcn()`][1].\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/telephony/CellIdentityNr#getNrarfcn()","title":"Retrieving ARFCN in a 5G NR NSA network","body":"<p>In NSA mode, many operators show the 5G icon even though there is no 5G bearer in use, and only the 4G anchor cell is indicating that it supports 5G aggregation via upperLayerIndication.</p>\n<p>So in your case you might not even have a 5G cell configured, and there is no way to force the phone to acquire a 5G bearer (it's up to the network to reconfigure you to the 5G cell). If you're not using mobile data, it is very that likely there is no 5G bearer in use.</p>\n<p>But it is usually configured when you start a data session. So make sure to have a speedtest running, or some kind of download session when accessing CellIdentityNr/CellInfoNr.</p>\n<p>The only API provided by Android Telephony to retrieve the NR-ARFCN is <a href=\"https://developer.android.com/reference/android/telephony/CellIdentityNr#getNrarfcn()\" rel=\"nofollow noreferrer\"><code>getNrarfcn()</code></a>.</p>\n"}],"owner":{"account_id":15918260,"reputation":33,"user_id":11486145,"display_name":"Diego S&#225;nchez"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":510,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1660886316,"creation_date":1653482831,"question_id":72377943,"body_markdown":"I&#39;m trying to retrieve the ARFCN (Frequency Channel Number) that a device in a 5G network is currently using. The thing is that the 5G all the operators in my city offer is of the NSA type, thus meaning that the phone will always be registered to a 4G LTE network as a primary cell and will use a 5G NR cell as a secondary one.\r\n\r\nTo get the mentioned ARFCN one will normally use the [PhoneStateListener.onCellInfoChanged(List&lt;CellInfo&gt; cellInfo)][1] method and check from the list which [CellInfo][2] is that one the device is registered on, get the [CellIdentity][3] attached to it and then get the ARFCN. **The problem is that, aside from being only registerd to a CellInfoLTE (4G) there&#39;s no trace of any CellInfoNR (5G), registered or not.** Weird thing is I can get the 5G signal intensity through [PhoneStateListener.onSignalStrengthsChanged(SignalStrength signalStrength)][4]. The phone is always displaying the 5G logo on the top-right corner too.\r\n\r\nAny help would be appreciated\r\n\r\n\r\n  [1]: https://developer.android.com/reference/android/telephony/PhoneStateListener#onCellInfoChanged(java.util.List%3Candroid.telephony.CellInfo%3E)\r\n  [2]: https://developer.android.com/reference/android/telephony/CellInfo\r\n  [3]: https://developer.android.com/reference/android/telephony/CellIdentityNr\r\n  [4]: https://developer.android.com/reference/android/telephony/PhoneStateListener#onSignalStrengthsChanged(android.telephony.SignalStrength)","title":"Retrieving ARFCN in a 5G NR NSA network","body":"<p>I'm trying to retrieve the ARFCN (Frequency Channel Number) that a device in a 5G network is currently using. The thing is that the 5G all the operators in my city offer is of the NSA type, thus meaning that the phone will always be registered to a 4G LTE network as a primary cell and will use a 5G NR cell as a secondary one.</p>\n<p>To get the mentioned ARFCN one will normally use the <a href=\"https://developer.android.com/reference/android/telephony/PhoneStateListener#onCellInfoChanged(java.util.List%3Candroid.telephony.CellInfo%3E)\" rel=\"nofollow noreferrer\">PhoneStateListener.onCellInfoChanged(List cellInfo)</a> method and check from the list which <a href=\"https://developer.android.com/reference/android/telephony/CellInfo\" rel=\"nofollow noreferrer\">CellInfo</a> is that one the device is registered on, get the <a href=\"https://developer.android.com/reference/android/telephony/CellIdentityNr\" rel=\"nofollow noreferrer\">CellIdentity</a> attached to it and then get the ARFCN. <strong>The problem is that, aside from being only registerd to a CellInfoLTE (4G) there's no trace of any CellInfoNR (5G), registered or not.</strong> Weird thing is I can get the 5G signal intensity through <a href=\"https://developer.android.com/reference/android/telephony/PhoneStateListener#onSignalStrengthsChanged(android.telephony.SignalStrength)\" rel=\"nofollow noreferrer\">PhoneStateListener.onSignalStrengthsChanged(SignalStrength signalStrength)</a>. The phone is always displaying the 5G logo on the top-right corner too.</p>\n<p>Any help would be appreciated</p>\n"},{"tags":["java","spring","code-injection"],"comments":[{"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"score":0,"creation_date":1660835431,"post_id":73405414,"comment_id":129632098,"body_markdown":"Do you have an exception? Can you post it?","body":"Do you have an exception? Can you post it?"},{"owner":{"account_id":15910041,"reputation":592,"user_id":11480221,"display_name":"AddeusExMachina"},"score":0,"creation_date":1660835468,"post_id":73405414,"comment_id":129632123,"body_markdown":"Where is your properties file located? Is is it under ```src/main/resources``` and named ```application.properties```?","body":"Where is your properties file located? Is is it under <code>src&#47;main&#47;resources</code> and named <code>application.properties</code>?"},{"owner":{"account_id":2386002,"reputation":5151,"user_id":2086966,"accept_rate":73,"display_name":"smilyface"},"score":0,"creation_date":1660835607,"post_id":73405414,"comment_id":129632187,"body_markdown":"Also, confirm that the local.address is under right spirng profile inside application.properties. Another thing is, if the properties file name is `application.yml` the format is different.","body":"Also, confirm that the local.address is under right spirng profile inside application.properties. Another thing is, if the properties file name is <code>application.yml</code> the format is different."},{"owner":{"account_id":195331,"reputation":275408,"user_id":438154,"accept_rate":98,"display_name":"Sotirios Delimanolis"},"score":0,"creation_date":1660836511,"post_id":73405414,"comment_id":129632531,"body_markdown":"How can you tell it didn&#39;t work? How do you use `AuthorizationServiceImpl`?","body":"How can you tell it didn&#39;t work? How do you use <code>AuthorizationServiceImpl</code>?"},{"owner":{"account_id":16000784,"reputation":301,"user_id":11547512,"display_name":"Anthony Cathers"},"score":0,"creation_date":1660838010,"post_id":73405414,"comment_id":129633136,"body_markdown":"Is this a Spring managed bean?","body":"Is this a Spring managed bean?"}],"owner":{"account_id":18525912,"reputation":53,"user_id":14426675,"display_name":"LordCommander"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":270,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1660885719,"creation_date":1660835212,"question_id":73405414,"body_markdown":"I have a spring service:\r\n\r\n    @Service\r\n    public class AuthorizationServiceImpl implements AuthorizationService {\r\n\r\n    @Value(&quot;${local.address}&quot;)\r\n    private String localIP;\r\n\r\n    private final String LOCALHOST_IPV4 = &quot;127.0.0.1&quot;;\r\n    private final String LOCALHOST_IPV6 = &quot;0:0:0:0:0:0:0:1&quot;;\r\n\r\n    @CrossOrigin(origins = &quot;*&quot;)\r\n    @Override\r\n    public boolean isAuthorized(String token, HttpServletRequest request) {\r\n        try {\r\n            TokenUserModel user = new TokenUserModel();\r\n            user.setSessionID(&quot;&quot;);\r\n            user = getTokenUserModel(token);\r\n            IServiceAAA client = new ServiceAAA().getBasicHttpBindingIServiceAAA();\r\n            int systemId = client.getUserSystemId(&quot;InvoiceAdmin&quot;);\r\n\r\n            String xRealIP = request.getRemoteAddr();\r\n            String ipAddress = xRealIP.equals(LOCALHOST_IPV4) || xRealIP.equals(LOCALHOST_IPV6) ? localIP : xRealIP;\r\n            String userAgent = request.getHeader(&quot;User-Agent&quot;);\r\n            int response = client.checkPermissionAndUserData(user.getSessionID(), &quot;Admin&quot;,\r\n                    userAgent,\r\n                    ipAddress, systemId, systemId, &quot;&quot;);\r\n            return response == 0;\r\n        } catch (Exception ex) {\r\n            throw new AuthorizationException(AuthorizationError.ERR_WHILE_AUTHORISATION);\r\n        }\r\n    }\r\n}\r\n\r\n`@Value(&quot;${local.address}&quot;)`&lt;br&gt;\r\n`private String localIP;` - this line of code didn&#39;t working, not populating local.address field from application.properties:\r\n\r\n    local.address=10.10.16.13\r\n\r\nUpdate: \r\n\r\n 1. I have 3 application properties file for spring profiles, named:\r\n    **application.properties**,**application-dev.properties**,**application-prod.properties**,\r\n    my current active profile is **application-dev.properties**\r\n    (&#39;spring.profiles.active=dev&#39; - it&#39;s inside of my\r\n    application.properties file). \r\n 2. I&#39;m sure that &#39;local.address&#39;\r\n        property is defined in application-dev.properties\r\n        \r\n            local.address=10.10.16.13\r\n 3. **AuthorizationService** is a just interface that **AutheroziationServiceImpl** impliments.\r\n```\r\npublic interface AuthorizationService {\r\n    boolean isAuthorized(String token, HttpServletRequest request) throws UnsupportedEncodingException;\r\n\r\n    void logout(String token) throws UnsupportedEncodingException;\r\n\r\n    TokenUserModel getTokenUserModel(String token) throws UnsupportedEncodingException;\r\n}\r\n```\r\nI&#39;m using it in constructor of one of controllers:\r\n```\r\n@Autowired\r\n    public AuthorizationController(AuthorizationService authorizationService) {\r\n        this.authorizationService = authorizationService;\r\n    }\r\n    private final AuthorizationService authorizationService;\r\n\r\n```\r\n 4. Yes, it&#39;s spring managed bean annotated as ```@Service```","title":"why spring boot @Value populating not working","body":"<p>I have a spring service:</p>\n<pre><code>@Service\npublic class AuthorizationServiceImpl implements AuthorizationService {\n\n@Value(&quot;${local.address}&quot;)\nprivate String localIP;\n\nprivate final String LOCALHOST_IPV4 = &quot;127.0.0.1&quot;;\nprivate final String LOCALHOST_IPV6 = &quot;0:0:0:0:0:0:0:1&quot;;\n\n@CrossOrigin(origins = &quot;*&quot;)\n@Override\npublic boolean isAuthorized(String token, HttpServletRequest request) {\n    try {\n        TokenUserModel user = new TokenUserModel();\n        user.setSessionID(&quot;&quot;);\n        user = getTokenUserModel(token);\n        IServiceAAA client = new ServiceAAA().getBasicHttpBindingIServiceAAA();\n        int systemId = client.getUserSystemId(&quot;InvoiceAdmin&quot;);\n\n        String xRealIP = request.getRemoteAddr();\n        String ipAddress = xRealIP.equals(LOCALHOST_IPV4) || xRealIP.equals(LOCALHOST_IPV6) ? localIP : xRealIP;\n        String userAgent = request.getHeader(&quot;User-Agent&quot;);\n        int response = client.checkPermissionAndUserData(user.getSessionID(), &quot;Admin&quot;,\n                userAgent,\n                ipAddress, systemId, systemId, &quot;&quot;);\n        return response == 0;\n    } catch (Exception ex) {\n        throw new AuthorizationException(AuthorizationError.ERR_WHILE_AUTHORISATION);\n    }\n}\n</code></pre>\n<p>}</p>\n<p><code>@Value(&quot;${local.address}&quot;)</code><br>\n<code>private String localIP;</code> - this line of code didn't working, not populating local.address field from application.properties:</p>\n<pre><code>local.address=10.10.16.13\n</code></pre>\n<p>Update:</p>\n<ol>\n<li><p>I have 3 application properties file for spring profiles, named:\n<strong>application.properties</strong>,<strong>application-dev.properties</strong>,<strong>application-prod.properties</strong>,\nmy current active profile is <strong>application-dev.properties</strong>\n('spring.profiles.active=dev' - it's inside of my\napplication.properties file).</p>\n</li>\n<li><p>I'm sure that 'local.address'\nproperty is defined in application-dev.properties</p>\n<pre><code>    local.address=10.10.16.13\n</code></pre>\n</li>\n<li><p><strong>AuthorizationService</strong> is a just interface that <strong>AutheroziationServiceImpl</strong> impliments.</p>\n</li>\n</ol>\n<pre><code>public interface AuthorizationService {\n    boolean isAuthorized(String token, HttpServletRequest request) throws UnsupportedEncodingException;\n\n    void logout(String token) throws UnsupportedEncodingException;\n\n    TokenUserModel getTokenUserModel(String token) throws UnsupportedEncodingException;\n}\n</code></pre>\n<p>I'm using it in constructor of one of controllers:</p>\n<pre><code>@Autowired\n    public AuthorizationController(AuthorizationService authorizationService) {\n        this.authorizationService = authorizationService;\n    }\n    private final AuthorizationService authorizationService;\n\n</code></pre>\n<ol start=\"4\">\n<li>Yes, it's spring managed bean annotated as <code>@Service</code></li>\n</ol>\n"},{"tags":["java","android","jsoup"],"comments":[{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1660884236,"post_id":73411735,"comment_id":129643595,"body_markdown":"Its just a Url string no matter from where you get it .. the jsoup part will be same .. Please edit your question with the exact problem you are facing . is in parsing or in intent its not clear right now .","body":"Its just a Url string no matter from where you get it .. the jsoup part will be same .. Please edit your question with the exact problem you are facing . is in parsing or in intent its not clear right now ."},{"owner":{"account_id":5212777,"reputation":20542,"user_id":4168607,"accept_rate":28,"display_name":"ADM"},"score":0,"creation_date":1660887029,"post_id":73411735,"comment_id":129644007,"body_markdown":"Move all `getIntent()` code inside `onCreate()` just before `new MyAsynTask().execute()` and make sure you are passing `Author` key in the Intent from Previous `Activity` .. Also you shouldn&#39;t be using `AsyncTask` anymore its [deprecated](https://stackoverflow.com/questions/58767733/the-asynctask-api-is-deprecated-in-android-11-what-are-the-alternatives) long ago .","body":"Move all <code>getIntent()</code> code inside <code>onCreate()</code> just before <code>new MyAsynTask().execute()</code> and make sure you are passing <code>Author</code> key in the Intent from Previous <code>Activity</code> .. Also you shouldn&#39;t be using <code>AsyncTask</code> anymore its <a href=\"https://stackoverflow.com/questions/58767733/the-asynctask-api-is-deprecated-in-android-11-what-are-the-alternatives\">deprecated</a> long ago ."}],"owner":{"account_id":23487515,"reputation":11,"user_id":17538894,"display_name":"RadioTracer"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1660885431,"creation_date":1660882147,"question_id":73411735,"body_markdown":"    public class MainActivity extends AppCompatActivity {\r\n    WebView webview;\r\n    //I did this &#128071;\r\n    Intent intent = getIntent();\r\n        String I = intent.getStringExtra( &quot;Author&quot; );\r\n    // and removed this &#128071;\r\n    String url=&quot;http://pixelay.com/&quot;;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n    super.onCreate(savedInstanceState);\r\n    setContentView(R.layout.activity_main);\r\n\r\n\r\n    webview= (WebView) findViewById(R.id.webview);\r\n    new MyAsynTask().execute();\r\n    }\r\n\r\n    private class MyAsynTask extends AsyncTask&lt;Void, Void, Document&gt; {\r\n    @Override\r\n    protected Document doInBackground(Void... voids) {\r\n\r\n        Document document = null;\r\n        try {\r\n                             // Here&#128071;\r\n            document= Jsoup.connect(I).get();\r\n            document.getElementsByClass(&quot;main-navigation&quot;).remove();\r\n            document.getElementsByClass(&quot;custom-header-image&quot;).remove();\r\n\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return document;\r\n    }\r\n\r\n    @Override\r\n    protected void onPostExecute(Document document) {\r\n        super.onPostExecute(document);\r\n                          //Here&#128071;\r\n    webview.loadDataWithBaseURL(I,document.toString(),&quot;text/html&quot;,&quot;utf-8&quot;,&quot;&quot;);\r\n        webview.getSettings().setCacheMode( \r\n    WebSettings.LOAD_CACHE_ELSE_NETWORK );\r\n\r\n        webview.setWebViewClient(new WebViewClient(){\r\n            @Override\r\n            public boolean shouldOverrideUrlLoading(WebView view, \r\n    WebResourceRequest request) {\r\n                      //Here &#128071;\r\n                view.loadUrl(I);\r\n                return super.shouldOverrideUrlLoading(view, request);\r\n            }\r\n        });\r\n     }\r\n    }\r\n\r\nBut it does not work\r\n\r\nLogcat shows this\r\n\r\n java.lang.RuntimeException: Unable to instantiate activity ComponentInfo \r\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method &#39;java.lang.String android.content.Intent.getStringExtra(java.lang.String)&#39; on a null object\r\n\r\n\r\nHow can I can do that? Please help me","title":"Get string URL from intent.getStringExtra to parse using Jsoup","body":"<pre><code>public class MainActivity extends AppCompatActivity {\nWebView webview;\n//I did this 👇\nIntent intent = getIntent();\n    String I = intent.getStringExtra( &quot;Author&quot; );\n// and removed this 👇\nString url=&quot;http://pixelay.com/&quot;;\n\n@Override\nprotected void onCreate(Bundle savedInstanceState) {\nsuper.onCreate(savedInstanceState);\nsetContentView(R.layout.activity_main);\n\n\nwebview= (WebView) findViewById(R.id.webview);\nnew MyAsynTask().execute();\n}\n\nprivate class MyAsynTask extends AsyncTask&lt;Void, Void, Document&gt; {\n@Override\nprotected Document doInBackground(Void... voids) {\n\n    Document document = null;\n    try {\n                         // Here👇\n        document= Jsoup.connect(I).get();\n        document.getElementsByClass(&quot;main-navigation&quot;).remove();\n        document.getElementsByClass(&quot;custom-header-image&quot;).remove();\n\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return document;\n}\n\n@Override\nprotected void onPostExecute(Document document) {\n    super.onPostExecute(document);\n                      //Here👇\nwebview.loadDataWithBaseURL(I,document.toString(),&quot;text/html&quot;,&quot;utf-8&quot;,&quot;&quot;);\n    webview.getSettings().setCacheMode( \nWebSettings.LOAD_CACHE_ELSE_NETWORK );\n\n    webview.setWebViewClient(new WebViewClient(){\n        @Override\n        public boolean shouldOverrideUrlLoading(WebView view, \nWebResourceRequest request) {\n                  //Here 👇\n            view.loadUrl(I);\n            return super.shouldOverrideUrlLoading(view, request);\n        }\n    });\n }\n}\n</code></pre>\n<p>But it does not work</p>\n<p>Logcat shows this</p>\n<p>java.lang.RuntimeException: Unable to instantiate activity ComponentInfo\nCaused by: java.lang.NullPointerException: Attempt to invoke virtual method 'java.lang.String android.content.Intent.getStringExtra(java.lang.String)' on a null object</p>\n<p>How can I can do that? Please help me</p>\n"},{"tags":["java","multithreading","memory-fences"],"answers":[{"tags":[],"owner":{"account_id":45983,"reputation":1557,"user_id":135740,"accept_rate":74,"display_name":"CaptainHastings"},"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1465609475,"creation_date":1465609475,"answer_id":37759183,"question_id":34542604,"body_markdown":"What are you trying to achieve. Are you simply trying to prevent reordering of your &quot;before&quot; and &quot;after&quot; operations? Do you need your operations to be atomic?\r\n\r\nTo answer the question, Yes, locking will have the same effect of a full memory fence **and more**. It will ensure that your Before and After operations are not re-ordered. It will also ensure that all your writes within the synchronized block are visible to other threads. Further, all your operations done while holding the lock will happen atomically. Something that just adding a full fence wouldn&#39;t have accomplished.\r\n\r\nOther way to trigger a full fence in java is to write to a volatile variable.\r\n","title":"How to trigger a full memory fence without using sun.misc.Unsafe?","body":"<p>What are you trying to achieve. Are you simply trying to prevent reordering of your \"before\" and \"after\" operations? Do you need your operations to be atomic?</p>\n\n<p>To answer the question, Yes, locking will have the same effect of a full memory fence <strong>and more</strong>. It will ensure that your Before and After operations are not re-ordered. It will also ensure that all your writes within the synchronized block are visible to other threads. Further, all your operations done while holding the lock will happen atomically. Something that just adding a full fence wouldn't have accomplished.</p>\n\n<p>Other way to trigger a full fence in java is to write to a volatile variable.</p>\n"},{"tags":[],"owner":{"account_id":292208,"reputation":10665,"user_id":2245707,"accept_rate":17,"display_name":"pveentjer"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660885024,"creation_date":1660884610,"answer_id":73411955,"question_id":34542604,"body_markdown":"If you want to trigger a full fence manually, you need to have a look at the [VarHandle][1]. It has various fences.\r\n\r\nRelying on synchronized blocks or volatiles purely for fencing behavior is very unreliable. \r\n\r\nFor example:\r\n\r\n```\r\nint a=0\r\n\r\nthread1:\r\n   a=1\r\n   synchronized(this){}\r\n\r\nthread2:\r\n   synchronized(this){}\r\n   r1=a\r\n```\r\n\r\nThere is a data race on &#39;a&#39; because &#39;a=1&#39; could be read after the thread1 has updated a=1 and before it has released the lock. So there is no synchronizes-with edge that connects the write of a with the read of 1.\r\n\r\nThe JVM is free to produce a subset of all possible and valid executions and it could choose to only produce executions whereby &#39;a&#39; remains zero and the new value will never be seen (since there is a data race). So the whole fence isn&#39;t taken into consideration.\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/docs/api/java/lang/invoke/VarHandle.html","title":"How to trigger a full memory fence without using sun.misc.Unsafe?","body":"<p>If you want to trigger a full fence manually, you need to have a look at the <a href=\"https://docs.oracle.com/javase/9/docs/api/java/lang/invoke/VarHandle.html\" rel=\"nofollow noreferrer\">VarHandle</a>. It has various fences.</p>\n<p>Relying on synchronized blocks or volatiles purely for fencing behavior is very unreliable.</p>\n<p>For example:</p>\n<pre><code>int a=0\n\nthread1:\n   a=1\n   synchronized(this){}\n\nthread2:\n   synchronized(this){}\n   r1=a\n</code></pre>\n<p>There is a data race on 'a' because 'a=1' could be read after the thread1 has updated a=1 and before it has released the lock. So there is no synchronizes-with edge that connects the write of a with the read of 1.</p>\n<p>The JVM is free to produce a subset of all possible and valid executions and it could choose to only produce executions whereby 'a' remains zero and the new value will never be seen (since there is a data race). So the whole fence isn't taken into consideration.</p>\n"}],"owner":{"account_id":94193,"reputation":20589,"user_id":257299,"accept_rate":64,"display_name":"kevinarpe"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":211,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":2,"score":3,"last_activity_date":1660885024,"creation_date":1451545720,"question_id":34542604,"body_markdown":"I am interested to trigger a full memory fence without using `sun.misc.Unsafe`.\r\n\r\nDoes the following Java code trigger a full memory fence?\r\n\r\n    public final class Foo {\r\n        public void bar() {\r\n            // Before memory fence?\r\n            synchronized(this) {\r\n                // After memory fence?\r\n            }\r\n        }\r\n    }\r\n\r\nDoes the following Java code **also** trigger a full memory fence?\r\n\r\n    public final class Foo {\r\n        private final Object monitor = new Object();\r\n        public void bar() {\r\n            // Before memory fence?\r\n            synchronized(monitor) {\r\n                // After memory fence?\r\n            }\r\n        }\r\n    }\r\n\r\n - Ref: https://stackoverflow.com/questions/23603304/java-8-unsafe-xxxfence-instructions\r\n - Ref: http://openjdk.java.net/jeps/171","title":"How to trigger a full memory fence without using sun.misc.Unsafe?","body":"<p>I am interested to trigger a full memory fence without using <code>sun.misc.Unsafe</code>.</p>\n\n<p>Does the following Java code trigger a full memory fence?</p>\n\n<pre><code>public final class Foo {\n    public void bar() {\n        // Before memory fence?\n        synchronized(this) {\n            // After memory fence?\n        }\n    }\n}\n</code></pre>\n\n<p>Does the following Java code <strong>also</strong> trigger a full memory fence?</p>\n\n<pre><code>public final class Foo {\n    private final Object monitor = new Object();\n    public void bar() {\n        // Before memory fence?\n        synchronized(monitor) {\n            // After memory fence?\n        }\n    }\n}\n</code></pre>\n\n<ul>\n<li>Ref: <a href=\"https://stackoverflow.com/questions/23603304/java-8-unsafe-xxxfence-instructions\">Java 8 Unsafe: xxxFence() instructions</a></li>\n<li>Ref: <a href=\"http://openjdk.java.net/jeps/171\" rel=\"nofollow noreferrer\">http://openjdk.java.net/jeps/171</a></li>\n</ul>\n"},{"tags":["java","performance","algorithm","min"],"comments":[{"owner":{"account_id":279769,"reputation":6517,"user_id":575111,"accept_rate":96,"display_name":"debracey"},"score":22,"creation_date":1330996869,"post_id":9576557,"comment_id":12142904,"body_markdown":"Expecting to get any kind of meaningful performance impact from basic numeric comparisons is jumping too far down the rabbit hole.","body":"Expecting to get any kind of meaningful performance impact from basic numeric comparisons is jumping too far down the rabbit hole."},{"owner":{"account_id":103729,"reputation":3046,"user_id":277671,"accept_rate":68,"display_name":"Chris"},"score":1,"creation_date":1330997049,"post_id":9576557,"comment_id":12142936,"body_markdown":"@debracey is it when my algorithm has been running for almost 23 hours so far? :P","body":"@debracey is it when my algorithm has been running for almost 23 hours so far? :P"},{"owner":{"account_id":300291,"reputation":3703,"user_id":1229683,"display_name":"cjm"},"score":7,"creation_date":1330997088,"post_id":9576557,"comment_id":12142948,"body_markdown":"Yeah, this is pointless optimization. The cost of this kind of operation is infinitesimal. That being said, I would probably stick with your Math.min construction.","body":"Yeah, this is pointless optimization. The cost of this kind of operation is infinitesimal. That being said, I would probably stick with your Math.min construction."},{"owner":{"account_id":279769,"reputation":6517,"user_id":575111,"accept_rate":96,"display_name":"debracey"},"score":1,"creation_date":1330997162,"post_id":9576557,"comment_id":12142964,"body_markdown":"That one little function is not hanging your code for 23 hours, what&#39;s calling it?","body":"That one little function is not hanging your code for 23 hours, what&#39;s calling it?"},{"owner":{"account_id":103729,"reputation":3046,"user_id":277671,"accept_rate":68,"display_name":"Chris"},"score":0,"creation_date":1330997181,"post_id":9576557,"comment_id":12142968,"body_markdown":"Main reason I&#39;m asking is I got a significant speed improvement from not using Math.pow","body":"Main reason I&#39;m asking is I got a significant speed improvement from not using Math.pow"},{"owner":{"account_id":103729,"reputation":3046,"user_id":277671,"accept_rate":68,"display_name":"Chris"},"score":1,"creation_date":1330997267,"post_id":9576557,"comment_id":12142988,"body_markdown":"@debracey well I&#39;m doing dynamic time warping on about 80,000 instances of data that each have 96 attributes and I&#39;m doing this 10 times for cross validation purposes. So I&#39;m expecting it to take a long time","body":"@debracey well I&#39;m doing dynamic time warping on about 80,000 instances of data that each have 96 attributes and I&#39;m doing this 10 times for cross validation purposes. So I&#39;m expecting it to take a long time"},{"owner":{"account_id":382548,"reputation":4765,"user_id":737842,"accept_rate":90,"display_name":"Stas Jaro"},"score":2,"creation_date":1330997409,"post_id":9576557,"comment_id":12143015,"body_markdown":"Math.pow uses a for loop. so say you did math.pow(4,3), you would be saying {double result = 4;for (int i = 0; i &lt; 3 - 1; i++) {result *= 4;}return result;}. This creates a double variable which might not be necessary and the for loop slows it down.","body":"Math.pow uses a for loop. so say you did math.pow(4,3), you would be saying {double result = 4;for (int i = 0; i &lt; 3 - 1; i++) {result *= 4;}return result;}. This creates a double variable which might not be necessary and the for loop slows it down."},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":3,"creation_date":1330997530,"post_id":9576557,"comment_id":12143039,"body_markdown":"HotSpot will inline your calls to Math.min() if they get hot enough, but for completeness it should be mentioned that in your suggested code &lt;= would be more efficient than &lt; as it will save some redundant comparisons and jumps.","body":"HotSpot will inline your calls to Math.min() if they get hot enough, but for completeness it should be mentioned that in your suggested code &lt;= would be more efficient than &lt; as it will save some redundant comparisons and jumps."},{"owner":{"account_id":9378,"reputation":14558,"user_id":17300,"display_name":"Stephen P"},"score":5,"creation_date":1330998626,"post_id":9576557,"comment_id":12143243,"body_markdown":"Google for `premature optimization`, and then profile your code.","body":"Google for <code>premature optimization</code>, and then profile your code."}],"answers":[{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1330996891,"creation_date":1330996891,"answer_id":9576582,"question_id":9576557,"body_markdown":"    double smallest = a;\r\n    if (smallest &gt; b) smallest = b;\r\n    if (smallest &gt; c) smallest = c;\r\n\r\nNot necessarily faster than your code.","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<pre><code>double smallest = a;\nif (smallest &gt; b) smallest = b;\nif (smallest &gt; c) smallest = c;\n</code></pre>\n\n<p>Not necessarily faster than your code.</p>\n"},{"tags":[],"owner":{"account_id":1267837,"reputation":9823,"user_id":1224741,"accept_rate":91,"display_name":"QED"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1330996948,"creation_date":1330996948,"answer_id":9576591,"question_id":9576557,"body_markdown":"It all looks ok, your code will be fine, unless you&#39;re doing this in a tight loop. I also would consider\r\n\r\n    double min;\r\n    min = (a&lt;b) ? a : b;\r\n    min = (min&lt;c) ? min : c;\r\n\r\n","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>It all looks ok, your code will be fine, unless you're doing this in a tight loop. I also would consider</p>\n\n<pre><code>double min;\nmin = (a&lt;b) ? a : b;\nmin = (min&lt;c) ? min : c;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":91853,"reputation":1679,"user_id":252022,"display_name":"wpgreenway"},"down_vote_count":0,"up_vote_count":42,"is_accepted":false,"score":42,"last_activity_date":1330997498,"creation_date":1330997498,"answer_id":9576656,"question_id":9576557,"body_markdown":"For a lot of utility-type methods, the apache commons libraries have solid implementations that you can either leverage or get additional insight from. In this case, there is a method for finding the smallest of three doubles available in org.apache.commons.lang.math.NumberUtils. Their implementation is actually nearly identical to your initial thought:\r\n\r\n    public static double min(double a, double b, double c) {\r\n        return Math.min(Math.min(a, b), c);\r\n    }\r\n\r\n","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>For a lot of utility-type methods, the apache commons libraries have solid implementations that you can either leverage or get additional insight from. In this case, there is a method for finding the smallest of three doubles available in org.apache.commons.lang.math.NumberUtils. Their implementation is actually nearly identical to your initial thought:</p>\n\n<pre><code>public static double min(double a, double b, double c) {\n    return Math.min(Math.min(a, b), c);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8291,"reputation":860437,"user_id":14860,"accept_rate":100,"display_name":"paxdiablo"},"down_vote_count":2,"up_vote_count":35,"is_accepted":true,"score":33,"last_activity_date":1330997806,"creation_date":1330997806,"answer_id":9576704,"question_id":9576557,"body_markdown":"No, it&#39;s seriously _not_ worth changing. The sort of improvements you&#39;re going to get when fiddling with micro-optimisations like this will not be worth it. Even the method call cost will be removed if the `min` function is called enough.\r\n\r\nIf you have a problem with your algorithm, your best bet is to look into macro-optimisations (&quot;big picture&quot; stuff like algorithm selection or tuning) - you&#39;ll generally get _much_ better performance improvements there.\r\n\r\nAnd your comment that removing `Math.pow` gave improvements may well be correct but that&#39;s because it&#39;s a relatively expensive operation. `Math.min` will not even be close to that in terms of cost.\r\n","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>No, it's seriously <em>not</em> worth changing. The sort of improvements you're going to get when fiddling with micro-optimisations like this will not be worth it. Even the method call cost will be removed if the <code>min</code> function is called enough.</p>\n\n<p>If you have a problem with your algorithm, your best bet is to look into macro-optimisations (\"big picture\" stuff like algorithm selection or tuning) - you'll generally get <em>much</em> better performance improvements there.</p>\n\n<p>And your comment that removing <code>Math.pow</code> gave improvements may well be correct but that's because it's a relatively expensive operation. <code>Math.min</code> will not even be close to that in terms of cost.</p>\n"},{"tags":[],"owner":{"account_id":1278534,"reputation":516,"user_id":1233211,"accept_rate":71,"display_name":"Abhishek"},"down_vote_count":1,"up_vote_count":7,"is_accepted":false,"score":6,"last_activity_date":1443064747,"creation_date":1330997868,"answer_id":9576711,"question_id":9576557,"body_markdown":"You can use ternary operator as follows:\r\n\r\n    smallest=(a&lt;b)?((a&lt;c)?a:c):((b&lt;c)?b:c);\r\n\r\nWhich takes only one assignment and minimum two comparisons.\r\n\r\nBut I think that these statements would not have any effect on execution time, your initial logic will take same time as of mine and all of others.","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>You can use ternary operator as follows:</p>\n\n<pre><code>smallest=(a&lt;b)?((a&lt;c)?a:c):((b&lt;c)?b:c);\n</code></pre>\n\n<p>Which takes only one assignment and minimum two comparisons.</p>\n\n<p>But I think that these statements would not have any effect on execution time, your initial logic will take same time as of mine and all of others.</p>\n"},{"tags":[],"owner":{"display_name":"user166390"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1330998184,"creation_date":1330998184,"answer_id":9576761,"question_id":9576557,"body_markdown":"I would use `min/max` (and not worry otherwise) ... however, here is another &quot;long hand&quot; approach which may or may not be easier for some people to understand. (I would *not* expect it to be faster or slower than the code in the post.)\r\n\r\n    int smallest;\r\n    if (a &lt; b) {\r\n      if (a &gt; c) {\r\n        smallest = c;\r\n      } else { // a &lt;= c\r\n        smallest = a;\r\n      }\r\n    } else { // a &gt;= b\r\n      if (b &gt; c) {\r\n        smallest = c;\r\n      } else { // b &lt;= c\r\n        smallest = b;\r\n      }\r\n    }\r\n\r\nJust throwing it into the mix.\r\n\r\nNote that this is just the side-effecting variant of Abhishek&#39;s answer.","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>I would use <code>min/max</code> (and not worry otherwise) ... however, here is another \"long hand\" approach which may or may not be easier for some people to understand. (I would <em>not</em> expect it to be faster or slower than the code in the post.)</p>\n\n<pre><code>int smallest;\nif (a &lt; b) {\n  if (a &gt; c) {\n    smallest = c;\n  } else { // a &lt;= c\n    smallest = a;\n  }\n} else { // a &gt;= b\n  if (b &gt; c) {\n    smallest = c;\n  } else { // b &lt;= c\n    smallest = b;\n  }\n}\n</code></pre>\n\n<p>Just throwing it into the mix.</p>\n\n<p>Note that this is just the side-effecting variant of Abhishek's answer.</p>\n"},{"tags":[],"owner":{"account_id":27776,"reputation":14436,"user_id":73652,"accept_rate":88,"display_name":"Kris"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1349436681,"creation_date":1349436681,"answer_id":12745375,"question_id":9576557,"body_markdown":"`Math.min` uses a simple comparison to do its thing. The only advantage to not using Math.min is to save the extra function calls, but that is a negligible saving.\r\n\r\nIf you have more than just three numbers, having a `minimum` method for any number of `double`s might be valuable and would look something like:\r\n\r\n    public static double min(double ... numbers) {\r\n        double min = numbers[0];\r\n        for (int i=1 ; i&lt;numbers.length ; i++) {\r\n            min = (min &lt;= numbers[i]) ? min : numbers[i];\r\n        }\r\n        return min;\r\n    }\r\n\r\nFor three numbers this is the functional equivalent of `Math.min(a, Math.min(b, c));` but you save one method invocation.\r\n","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p><code>Math.min</code> uses a simple comparison to do its thing. The only advantage to not using Math.min is to save the extra function calls, but that is a negligible saving.</p>\n\n<p>If you have more than just three numbers, having a <code>minimum</code> method for any number of <code>double</code>s might be valuable and would look something like:</p>\n\n<pre><code>public static double min(double ... numbers) {\n    double min = numbers[0];\n    for (int i=1 ; i&lt;numbers.length ; i++) {\n        min = (min &lt;= numbers[i]) ? min : numbers[i];\n    }\n    return min;\n}\n</code></pre>\n\n<p>For three numbers this is the functional equivalent of <code>Math.min(a, Math.min(b, c));</code> but you save one method invocation.</p>\n"},{"tags":[],"owner":{"account_id":2898048,"reputation":21,"user_id":2485377,"display_name":"Maximus Ali"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1371200144,"creation_date":1371200144,"answer_id":17104728,"question_id":9576557,"body_markdown":"    double smallest;\r\n    if(a&lt;b &amp;&amp; a&lt;c){\r\n        smallest = a;\r\n    }else if(b&lt;c &amp;&amp; b&lt;a){\r\n        smallest = b;\r\n    }else{\r\n        smallest = c;\r\n    }\r\n\r\n\r\ncan be improved to:\r\n\r\n    double smallest;\r\n    if(a&lt;b &amp;&amp; a&lt;c){\r\n    smallest = a;\r\n    }else if(b&lt;c){\r\n        smallest = b;\r\n    }else{\r\n        smallest = c;\r\n    }","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<pre><code>double smallest;\nif(a&lt;b &amp;&amp; a&lt;c){\n    smallest = a;\n}else if(b&lt;c &amp;&amp; b&lt;a){\n    smallest = b;\n}else{\n    smallest = c;\n}\n</code></pre>\n\n<p>can be improved to:</p>\n\n<pre><code>double smallest;\nif(a&lt;b &amp;&amp; a&lt;c){\nsmallest = a;\n}else if(b&lt;c){\n    smallest = b;\n}else{\n    smallest = c;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5560053,"reputation":1,"user_id":4409717,"display_name":"rakesh"},"down_vote_count":8,"up_vote_count":0,"is_accepted":false,"score":-8,"last_activity_date":1420098505,"creation_date":1420096720,"answer_id":27728998,"question_id":9576557,"body_markdown":"Simply use this math function \r\n\r\n    System.out.println(Math.min(a,b,c));\r\n\r\nYou will get the answer in single line. ","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>Simply use this math function </p>\n\n<pre><code>System.out.println(Math.min(a,b,c));\n</code></pre>\n\n<p>You will get the answer in single line. </p>\n"},{"tags":[],"owner":{"account_id":3093821,"reputation":53931,"user_id":3182664,"accept_rate":55,"display_name":"Marco13"},"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1602930477,"creation_date":1422641134,"answer_id":28241992,"question_id":9576557,"body_markdown":"Let me first repeat what others already said, by quoting from the article &quot;Structured Programming with go to Statements&quot; by Donald Knuth:\r\n\r\n&gt; We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil.\r\n&gt;\r\n&gt; **Yet we should not pass up our opportunities in that critical 3%. A good programmer will not be lulled into complacency by such reasoning, he will be wise to look carefully at the critical code; but only after that code has been identified.**\r\n\r\n(emphasis by me)\r\n\r\nSo if you have identified that a seemingly trivial operation like the computation of the minimum of three numbers **is** the actual bottleneck (that is, the &quot;critical 3%&quot;) in your application, then you may consider optimizing it.\r\n\r\nAnd in this case, this is actually possible: The [`Math#min(double,double)`][1] method in Java has very special semantics:\r\n\r\n&gt; Returns the smaller of two double values. That is, the result is the value closer to negative infinity. If the arguments have the same value, the result is that same value. If either value is NaN, then the result is NaN. Unlike the numerical comparison operators, this method considers negative zero to be strictly smaller than positive zero. If one argument is positive zero and the other is negative zero, the result is negative zero.\r\n\r\nOne can have a look at the implementation, and see that it&#39;s actually rather complex:\r\n\r\n    public static double min(double a, double b) {\r\n        if (a != a)\r\n            return a;   // a is NaN\r\n        if ((a == 0.0d) &amp;&amp;\r\n            (b == 0.0d) &amp;&amp;\r\n            (Double.doubleToRawLongBits(b) == negativeZeroDoubleBits)) {\r\n            // Raw conversion ok since NaN can&#39;t map to -0.0.\r\n            return b;\r\n        }\r\n        return (a &lt;= b) ? a : b;\r\n    }\r\n\r\n\r\n----------\r\n\r\nNow, it may be important to point out that this behavior is *different* from a simple comparison. This can easily be examined with the following example:\r\n\r\n    public class MinExample\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            test(0.0, 1.0);\r\n            test(1.0, 0.0);\r\n            test(-0.0, 0.0);\r\n            test(Double.NaN, 1.0);\r\n            test(1.0, Double.NaN);\r\n        }\r\n\r\n        private static void test(double a, double b)\r\n        {\r\n            double minA = Math.min(a, b);\r\n            double minB = a &lt; b ? a : b;\r\n            System.out.println(&quot;a: &quot;+a);\r\n            System.out.println(&quot;b: &quot;+b);\r\n            System.out.println(&quot;minA &quot;+minA);\r\n            System.out.println(&quot;minB &quot;+minB);\r\n            if (Double.doubleToRawLongBits(minA) !=\r\n                Double.doubleToRawLongBits(minB))\r\n            {\r\n                System.out.println(&quot; -&gt; Different results!&quot;);\r\n            }\r\n            System.out.println();\r\n        }\r\n    }\r\n\r\n\r\n----------\r\n\r\nHowever: If the treatment of `NaN` and positive/negative zero is not relevant for your application, you can replace the solution that is based on `Math.min` with a solution that is based on a simple comparison, and see whether it makes a difference.\r\n\r\nThis will, of course, be application dependent. Here is a simple, artificial microbenchmark (**to be taken with a grain of salt!**)\r\n\r\n    import java.util.Random;\r\n\r\n    public class MinPerformance\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            bench();\r\n        }\r\n\r\n        private static void bench()\r\n        {\r\n            int runs = 1000;\r\n            for (int size=10000; size&lt;=100000; size+=10000)\r\n            {\r\n                Random random = new Random(0);\r\n                double data[] = new double[size];\r\n                for (int i=0; i&lt;size; i++)\r\n                {\r\n                    data[i] = random.nextDouble();\r\n                }\r\n                benchA(data, runs);\r\n                benchB(data, runs);\r\n            }\r\n        }\r\n\r\n        private static void benchA(double data[], int runs)\r\n        {\r\n            long before = System.nanoTime();\r\n            double sum = 0;\r\n            for (int r=0; r&lt;runs; r++)\r\n            {\r\n                for (int i=0; i&lt;data.length-3; i++)\r\n                {\r\n                    sum += minA(data[i], data[i+1], data[i+2]);\r\n                }\r\n            }\r\n            long after = System.nanoTime();\r\n            System.out.println(&quot;A: length &quot;+data.length+&quot;, time &quot;+(after-before)/1e6+&quot;, result &quot;+sum);\r\n        }\r\n\r\n        private static void benchB(double data[], int runs)\r\n        {\r\n            long before = System.nanoTime();\r\n            double sum = 0;\r\n            for (int r=0; r&lt;runs; r++)\r\n            {\r\n                for (int i=0; i&lt;data.length-3; i++)\r\n                {\r\n                    sum += minB(data[i], data[i+1], data[i+2]);\r\n                }\r\n            }\r\n            long after = System.nanoTime();\r\n            System.out.println(&quot;B: length &quot;+data.length+&quot;, time &quot;+(after-before)/1e6+&quot;, result &quot;+sum);\r\n        }\r\n\r\n        private static double minA(double a, double b, double c)\r\n        {\r\n            return Math.min(a, Math.min(b, c));\r\n        }\r\n\r\n        private static double minB(double a, double b, double c)\r\n        {\r\n            if (a &lt; b)\r\n            {\r\n                if (a &lt; c)\r\n                {\r\n                    return a;\r\n                }\r\n                return c;\r\n            }\r\n            if (b &lt; c)\r\n            {\r\n                return b;\r\n            }\r\n            return c;\r\n        }\r\n    }\r\n\r\n(Disclaimer: Microbenchmarking in Java is an art, and for more reliable results, one should consider using [JMH][2] or [Caliper][3]).\r\n\r\nRunning this with JRE 1.8.0_31 may result in something like\r\n\r\n    ....\r\n    A: length 90000, time 545.929078, result 2.247805342620906E7\r\n    B: length 90000, time 441.999193, result 2.247805342620906E7\r\n    A: length 100000, time 608.046928, result 2.5032781001456387E7\r\n    B: length 100000, time 493.747898, result 2.5032781001456387E7\r\n\r\nThis at least *suggests* that it might be possible to squeeze out a few percent here (again, in a very artifical example).\r\n\r\n\r\n----------\r\n\r\nAnalyzing this further, by looking at the hotspot disassembly output created with\r\n\r\n    java -server -XX:+UnlockDiagnosticVMOptions -XX:+TraceClassLoading -XX:+LogCompilation -XX:+PrintAssembly MinPerformance\r\n\r\none can see the optimized versions of both methods, `minA` and `minB`.\r\n\r\nFirst, the output for the method that uses `Math.min`:\r\n\r\n    Decoding compiled method 0x0000000002992310:\r\n    Code:\r\n    [Entry Point]\r\n    [Verified Entry Point]\r\n    [Constants]\r\n      # {method} {0x000000001c010910} &amp;apos;minA&amp;apos; &amp;apos;(DDD)D&amp;apos; in &amp;apos;MinPerformance&amp;apos;\r\n      # parm0:    xmm0:xmm0   = double\r\n      # parm1:    xmm1:xmm1   = double\r\n      # parm2:    xmm2:xmm2   = double\r\n      #           [sp+0x60]  (sp of caller)\r\n      0x0000000002992480: mov    %eax,-0x6000(%rsp)\r\n      0x0000000002992487: push   %rbp\r\n      0x0000000002992488: sub    $0x50,%rsp\r\n      0x000000000299248c: movabs $0x1c010cd0,%rsi\r\n      0x0000000002992496: mov    0x8(%rsi),%edi\r\n      0x0000000002992499: add    $0x8,%edi\r\n      0x000000000299249c: mov    %edi,0x8(%rsi)\r\n      0x000000000299249f: movabs $0x1c010908,%rsi   ; {metadata({method} {0x000000001c010910} &amp;apos;minA&amp;apos; &amp;apos;(DDD)D&amp;apos; in &amp;apos;MinPerformance&amp;apos;)}\r\n      0x00000000029924a9: and    $0x3ff8,%edi\r\n      0x00000000029924af: cmp    $0x0,%edi\r\n      0x00000000029924b2: je     0x00000000029924e8  ;*dload_0\r\n                            ; - MinPerformance::minA@0 (line 58)\r\n\r\n      0x00000000029924b8: vmovsd %xmm0,0x38(%rsp)\r\n      0x00000000029924be: vmovapd %xmm1,%xmm0\r\n      0x00000000029924c2: vmovapd %xmm2,%xmm1       ;*invokestatic min\r\n                            ; - MinPerformance::minA@4 (line 58)\r\n\r\n      0x00000000029924c6: nop\r\n      0x00000000029924c7: callq  0x00000000028c6360  ; OopMap{off=76}\r\n                            ;*invokestatic min\r\n                            ; - MinPerformance::minA@4 (line 58)\r\n                            ;   {static_call}\r\n      0x00000000029924cc: vmovapd %xmm0,%xmm1       ;*invokestatic min\r\n                            ; - MinPerformance::minA@4 (line 58)\r\n\r\n      0x00000000029924d0: vmovsd 0x38(%rsp),%xmm0   ;*invokestatic min\r\n                            ; - MinPerformance::minA@7 (line 58)\r\n\r\n      0x00000000029924d6: nop\r\n      0x00000000029924d7: callq  0x00000000028c6360  ; OopMap{off=92}\r\n                            ;*invokestatic min\r\n                            ; - MinPerformance::minA@7 (line 58)\r\n                            ;   {static_call}\r\n      0x00000000029924dc: add    $0x50,%rsp\r\n      0x00000000029924e0: pop    %rbp\r\n      0x00000000029924e1: test   %eax,-0x27623e7(%rip)        # 0x0000000000230100\r\n                            ;   {poll_return}\r\n      0x00000000029924e7: retq\r\n      0x00000000029924e8: mov    %rsi,0x8(%rsp)\r\n      0x00000000029924ed: movq   $0xffffffffffffffff,(%rsp)\r\n      0x00000000029924f5: callq  0x000000000297e260  ; OopMap{off=122}\r\n                            ;*synchronization entry\r\n                            ; - MinPerformance::minA@-1 (line 58)\r\n                            ;   {runtime_call}\r\n      0x00000000029924fa: jmp    0x00000000029924b8\r\n      0x00000000029924fc: nop\r\n      0x00000000029924fd: nop\r\n      0x00000000029924fe: mov    0x298(%r15),%rax\r\n      0x0000000002992505: movabs $0x0,%r10\r\n      0x000000000299250f: mov    %r10,0x298(%r15)\r\n      0x0000000002992516: movabs $0x0,%r10\r\n      0x0000000002992520: mov    %r10,0x2a0(%r15)\r\n      0x0000000002992527: add    $0x50,%rsp\r\n      0x000000000299252b: pop    %rbp\r\n      0x000000000299252c: jmpq   0x00000000028ec620  ; {runtime_call}\r\n      0x0000000002992531: hlt\r\n      0x0000000002992532: hlt\r\n      0x0000000002992533: hlt\r\n      0x0000000002992534: hlt\r\n      0x0000000002992535: hlt\r\n      0x0000000002992536: hlt\r\n      0x0000000002992537: hlt\r\n      0x0000000002992538: hlt\r\n      0x0000000002992539: hlt\r\n      0x000000000299253a: hlt\r\n      0x000000000299253b: hlt\r\n      0x000000000299253c: hlt\r\n      0x000000000299253d: hlt\r\n      0x000000000299253e: hlt\r\n      0x000000000299253f: hlt\r\n    [Stub Code]\r\n      0x0000000002992540: nop                       ;   {no_reloc}\r\n      0x0000000002992541: nop\r\n      0x0000000002992542: nop\r\n      0x0000000002992543: nop\r\n      0x0000000002992544: nop\r\n      0x0000000002992545: movabs $0x0,%rbx          ; {static_stub}\r\n      0x000000000299254f: jmpq   0x000000000299254f  ; {runtime_call}\r\n      0x0000000002992554: nop\r\n      0x0000000002992555: movabs $0x0,%rbx          ; {static_stub}\r\n      0x000000000299255f: jmpq   0x000000000299255f  ; {runtime_call}\r\n    [Exception Handler]\r\n      0x0000000002992564: callq  0x000000000297b9e0  ; {runtime_call}\r\n      0x0000000002992569: mov    %rsp,-0x28(%rsp)\r\n      0x000000000299256e: sub    $0x80,%rsp\r\n      0x0000000002992575: mov    %rax,0x78(%rsp)\r\n      0x000000000299257a: mov    %rcx,0x70(%rsp)\r\n      0x000000000299257f: mov    %rdx,0x68(%rsp)\r\n      0x0000000002992584: mov    %rbx,0x60(%rsp)\r\n      0x0000000002992589: mov    %rbp,0x50(%rsp)\r\n      0x000000000299258e: mov    %rsi,0x48(%rsp)\r\n      0x0000000002992593: mov    %rdi,0x40(%rsp)\r\n      0x0000000002992598: mov    %r8,0x38(%rsp)\r\n      0x000000000299259d: mov    %r9,0x30(%rsp)\r\n      0x00000000029925a2: mov    %r10,0x28(%rsp)\r\n      0x00000000029925a7: mov    %r11,0x20(%rsp)\r\n      0x00000000029925ac: mov    %r12,0x18(%rsp)\r\n      0x00000000029925b1: mov    %r13,0x10(%rsp)\r\n      0x00000000029925b6: mov    %r14,0x8(%rsp)\r\n      0x00000000029925bb: mov    %r15,(%rsp)\r\n      0x00000000029925bf: movabs $0x515db148,%rcx   ; {external_word}\r\n      0x00000000029925c9: movabs $0x2992569,%rdx    ; {internal_word}\r\n      0x00000000029925d3: mov    %rsp,%r8\r\n      0x00000000029925d6: and    $0xfffffffffffffff0,%rsp\r\n      0x00000000029925da: callq  0x00000000512a9020  ; {runtime_call}\r\n      0x00000000029925df: hlt\r\n    [Deopt Handler Code]\r\n      0x00000000029925e0: movabs $0x29925e0,%r10    ; {section_word}\r\n      0x00000000029925ea: push   %r10\r\n      0x00000000029925ec: jmpq   0x00000000028c7340  ; {runtime_call}\r\n      0x00000000029925f1: hlt\r\n      0x00000000029925f2: hlt\r\n      0x00000000029925f3: hlt\r\n      0x00000000029925f4: hlt\r\n      0x00000000029925f5: hlt\r\n      0x00000000029925f6: hlt\r\n      0x00000000029925f7: hlt\r\n\r\nOne can see that the treatment of special cases involves some effort - compared to the output that uses simple comparisons, which is rather straightforward:\r\n\r\n    Decoding compiled method 0x0000000002998790:\r\n    Code:\r\n    [Entry Point]\r\n    [Verified Entry Point]\r\n    [Constants]\r\n      # {method} {0x000000001c0109c0} &amp;apos;minB&amp;apos; &amp;apos;(DDD)D&amp;apos; in &amp;apos;MinPerformance&amp;apos;\r\n      # parm0:    xmm0:xmm0   = double\r\n      # parm1:    xmm1:xmm1   = double\r\n      # parm2:    xmm2:xmm2   = double\r\n      #           [sp+0x20]  (sp of caller)\r\n      0x00000000029988c0: sub    $0x18,%rsp\r\n      0x00000000029988c7: mov    %rbp,0x10(%rsp) ;*synchronization entry\r\n                            ; - MinPerformance::minB@-1 (line 63)\r\n\r\n      0x00000000029988cc: vucomisd %xmm0,%xmm1\r\n      0x00000000029988d0: ja     0x00000000029988ee  ;*ifge\r\n                            ; - MinPerformance::minB@3 (line 63)\r\n\r\n      0x00000000029988d2: vucomisd %xmm1,%xmm2\r\n      0x00000000029988d6: ja     0x00000000029988de  ;*ifge\r\n                            ; - MinPerformance::minB@22 (line 71)\r\n\r\n      0x00000000029988d8: vmovapd %xmm2,%xmm0\r\n      0x00000000029988dc: jmp    0x00000000029988e2\r\n      0x00000000029988de: vmovapd %xmm1,%xmm0 ;*synchronization entry\r\n                            ; - MinPerformance::minB@-1 (line 63)\r\n\r\n      0x00000000029988e2: add    $0x10,%rsp\r\n      0x00000000029988e6: pop    %rbp\r\n      0x00000000029988e7: test   %eax,-0x27688ed(%rip)        # 0x0000000000230000\r\n                            ;   {poll_return}\r\n      0x00000000029988ed: retq\r\n      0x00000000029988ee: vucomisd %xmm0,%xmm2\r\n      0x00000000029988f2: ja     0x00000000029988e2  ;*ifge\r\n                            ; - MinPerformance::minB@10 (line 65)\r\n\r\n      0x00000000029988f4: vmovapd %xmm2,%xmm0\r\n      0x00000000029988f8: jmp    0x00000000029988e2\r\n      0x00000000029988fa: hlt\r\n      0x00000000029988fb: hlt\r\n      0x00000000029988fc: hlt\r\n      0x00000000029988fd: hlt\r\n      0x00000000029988fe: hlt\r\n      0x00000000029988ff: hlt\r\n    [Exception Handler]\r\n    [Stub Code]\r\n      0x0000000002998900: jmpq   0x00000000028ec920  ;   {no_reloc}\r\n    [Deopt Handler Code]\r\n      0x0000000002998905: callq  0x000000000299890a\r\n      0x000000000299890a: subq   $0x5,(%rsp)\r\n      0x000000000299890f: jmpq   0x00000000028c7340  ; {runtime_call}\r\n      0x0000000002998914: hlt\r\n      0x0000000002998915: hlt\r\n      0x0000000002998916: hlt\r\n      0x0000000002998917: hlt\r\n\r\n\r\n----------\r\n\r\nWhether or not there are cases where such an optimization really makes a difference in an application is hard to tell. But at least, the bottom line is:\r\n\r\n - The `Math#min(double,double)` method is **not** the same as a simple comparison, and the treatment of the special cases does not come for free\r\n - There are cases where the special case treatment that is done by `Math#min` is not necessary, and then a comparison-based approach **may** be more efficient\r\n - As already pointed out in other answers: In most cases, the performance difference will not matter. However, for this particular example, one should probably create a utility method `min(double,double,double)` anyhow, for better convenience and readability, and then it would be easy to do two runs with the different implementations, and see whether it really affects the performance.\r\n\r\n\r\n----------\r\n\r\n(Side note: The integer type methods, like `Math.min(int,int)` actually *are* a simple comparison - so I would expect **no** difference for these).\r\n\r\n  [1]: http://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#min-double-double-\r\n  [2]: http://openjdk.java.net/projects/code-tools/jmh/\r\n  [3]: https://code.google.com/p/caliper/\r\n","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>Let me first repeat what others already said, by quoting from the article &quot;Structured Programming with go to Statements&quot; by Donald Knuth:</p>\n<blockquote>\n<p>We should forget about small efficiencies, say about 97% of the time: premature optimization is the root of all evil.</p>\n<p><strong>Yet we should not pass up our opportunities in that critical 3%. A good programmer will not be lulled into complacency by such reasoning, he will be wise to look carefully at the critical code; but only after that code has been identified.</strong></p>\n</blockquote>\n<p>(emphasis by me)</p>\n<p>So if you have identified that a seemingly trivial operation like the computation of the minimum of three numbers <strong>is</strong> the actual bottleneck (that is, the &quot;critical 3%&quot;) in your application, then you may consider optimizing it.</p>\n<p>And in this case, this is actually possible: The <a href=\"http://docs.oracle.com/javase/8/docs/api/java/lang/Math.html#min-double-double-\" rel=\"nofollow noreferrer\"><code>Math#min(double,double)</code></a> method in Java has very special semantics:</p>\n<blockquote>\n<p>Returns the smaller of two double values. That is, the result is the value closer to negative infinity. If the arguments have the same value, the result is that same value. If either value is NaN, then the result is NaN. Unlike the numerical comparison operators, this method considers negative zero to be strictly smaller than positive zero. If one argument is positive zero and the other is negative zero, the result is negative zero.</p>\n</blockquote>\n<p>One can have a look at the implementation, and see that it's actually rather complex:</p>\n<pre><code>public static double min(double a, double b) {\n    if (a != a)\n        return a;   // a is NaN\n    if ((a == 0.0d) &amp;&amp;\n        (b == 0.0d) &amp;&amp;\n        (Double.doubleToRawLongBits(b) == negativeZeroDoubleBits)) {\n        // Raw conversion ok since NaN can't map to -0.0.\n        return b;\n    }\n    return (a &lt;= b) ? a : b;\n}\n</code></pre>\n<hr />\n<p>Now, it may be important to point out that this behavior is <em>different</em> from a simple comparison. This can easily be examined with the following example:</p>\n<pre><code>public class MinExample\n{\n    public static void main(String[] args)\n    {\n        test(0.0, 1.0);\n        test(1.0, 0.0);\n        test(-0.0, 0.0);\n        test(Double.NaN, 1.0);\n        test(1.0, Double.NaN);\n    }\n\n    private static void test(double a, double b)\n    {\n        double minA = Math.min(a, b);\n        double minB = a &lt; b ? a : b;\n        System.out.println(&quot;a: &quot;+a);\n        System.out.println(&quot;b: &quot;+b);\n        System.out.println(&quot;minA &quot;+minA);\n        System.out.println(&quot;minB &quot;+minB);\n        if (Double.doubleToRawLongBits(minA) !=\n            Double.doubleToRawLongBits(minB))\n        {\n            System.out.println(&quot; -&gt; Different results!&quot;);\n        }\n        System.out.println();\n    }\n}\n</code></pre>\n<hr />\n<p>However: If the treatment of <code>NaN</code> and positive/negative zero is not relevant for your application, you can replace the solution that is based on <code>Math.min</code> with a solution that is based on a simple comparison, and see whether it makes a difference.</p>\n<p>This will, of course, be application dependent. Here is a simple, artificial microbenchmark (<strong>to be taken with a grain of salt!</strong>)</p>\n<pre><code>import java.util.Random;\n\npublic class MinPerformance\n{\n    public static void main(String[] args)\n    {\n        bench();\n    }\n\n    private static void bench()\n    {\n        int runs = 1000;\n        for (int size=10000; size&lt;=100000; size+=10000)\n        {\n            Random random = new Random(0);\n            double data[] = new double[size];\n            for (int i=0; i&lt;size; i++)\n            {\n                data[i] = random.nextDouble();\n            }\n            benchA(data, runs);\n            benchB(data, runs);\n        }\n    }\n\n    private static void benchA(double data[], int runs)\n    {\n        long before = System.nanoTime();\n        double sum = 0;\n        for (int r=0; r&lt;runs; r++)\n        {\n            for (int i=0; i&lt;data.length-3; i++)\n            {\n                sum += minA(data[i], data[i+1], data[i+2]);\n            }\n        }\n        long after = System.nanoTime();\n        System.out.println(&quot;A: length &quot;+data.length+&quot;, time &quot;+(after-before)/1e6+&quot;, result &quot;+sum);\n    }\n\n    private static void benchB(double data[], int runs)\n    {\n        long before = System.nanoTime();\n        double sum = 0;\n        for (int r=0; r&lt;runs; r++)\n        {\n            for (int i=0; i&lt;data.length-3; i++)\n            {\n                sum += minB(data[i], data[i+1], data[i+2]);\n            }\n        }\n        long after = System.nanoTime();\n        System.out.println(&quot;B: length &quot;+data.length+&quot;, time &quot;+(after-before)/1e6+&quot;, result &quot;+sum);\n    }\n\n    private static double minA(double a, double b, double c)\n    {\n        return Math.min(a, Math.min(b, c));\n    }\n\n    private static double minB(double a, double b, double c)\n    {\n        if (a &lt; b)\n        {\n            if (a &lt; c)\n            {\n                return a;\n            }\n            return c;\n        }\n        if (b &lt; c)\n        {\n            return b;\n        }\n        return c;\n    }\n}\n</code></pre>\n<p>(Disclaimer: Microbenchmarking in Java is an art, and for more reliable results, one should consider using <a href=\"http://openjdk.java.net/projects/code-tools/jmh/\" rel=\"nofollow noreferrer\">JMH</a> or <a href=\"https://code.google.com/p/caliper/\" rel=\"nofollow noreferrer\">Caliper</a>).</p>\n<p>Running this with JRE 1.8.0_31 may result in something like</p>\n<pre><code>....\nA: length 90000, time 545.929078, result 2.247805342620906E7\nB: length 90000, time 441.999193, result 2.247805342620906E7\nA: length 100000, time 608.046928, result 2.5032781001456387E7\nB: length 100000, time 493.747898, result 2.5032781001456387E7\n</code></pre>\n<p>This at least <em>suggests</em> that it might be possible to squeeze out a few percent here (again, in a very artifical example).</p>\n<hr />\n<p>Analyzing this further, by looking at the hotspot disassembly output created with</p>\n<pre><code>java -server -XX:+UnlockDiagnosticVMOptions -XX:+TraceClassLoading -XX:+LogCompilation -XX:+PrintAssembly MinPerformance\n</code></pre>\n<p>one can see the optimized versions of both methods, <code>minA</code> and <code>minB</code>.</p>\n<p>First, the output for the method that uses <code>Math.min</code>:</p>\n<pre><code>Decoding compiled method 0x0000000002992310:\nCode:\n[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} {0x000000001c010910} &amp;apos;minA&amp;apos; &amp;apos;(DDD)D&amp;apos; in &amp;apos;MinPerformance&amp;apos;\n  # parm0:    xmm0:xmm0   = double\n  # parm1:    xmm1:xmm1   = double\n  # parm2:    xmm2:xmm2   = double\n  #           [sp+0x60]  (sp of caller)\n  0x0000000002992480: mov    %eax,-0x6000(%rsp)\n  0x0000000002992487: push   %rbp\n  0x0000000002992488: sub    $0x50,%rsp\n  0x000000000299248c: movabs $0x1c010cd0,%rsi\n  0x0000000002992496: mov    0x8(%rsi),%edi\n  0x0000000002992499: add    $0x8,%edi\n  0x000000000299249c: mov    %edi,0x8(%rsi)\n  0x000000000299249f: movabs $0x1c010908,%rsi   ; {metadata({method} {0x000000001c010910} &amp;apos;minA&amp;apos; &amp;apos;(DDD)D&amp;apos; in &amp;apos;MinPerformance&amp;apos;)}\n  0x00000000029924a9: and    $0x3ff8,%edi\n  0x00000000029924af: cmp    $0x0,%edi\n  0x00000000029924b2: je     0x00000000029924e8  ;*dload_0\n                        ; - MinPerformance::minA@0 (line 58)\n\n  0x00000000029924b8: vmovsd %xmm0,0x38(%rsp)\n  0x00000000029924be: vmovapd %xmm1,%xmm0\n  0x00000000029924c2: vmovapd %xmm2,%xmm1       ;*invokestatic min\n                        ; - MinPerformance::minA@4 (line 58)\n\n  0x00000000029924c6: nop\n  0x00000000029924c7: callq  0x00000000028c6360  ; OopMap{off=76}\n                        ;*invokestatic min\n                        ; - MinPerformance::minA@4 (line 58)\n                        ;   {static_call}\n  0x00000000029924cc: vmovapd %xmm0,%xmm1       ;*invokestatic min\n                        ; - MinPerformance::minA@4 (line 58)\n\n  0x00000000029924d0: vmovsd 0x38(%rsp),%xmm0   ;*invokestatic min\n                        ; - MinPerformance::minA@7 (line 58)\n\n  0x00000000029924d6: nop\n  0x00000000029924d7: callq  0x00000000028c6360  ; OopMap{off=92}\n                        ;*invokestatic min\n                        ; - MinPerformance::minA@7 (line 58)\n                        ;   {static_call}\n  0x00000000029924dc: add    $0x50,%rsp\n  0x00000000029924e0: pop    %rbp\n  0x00000000029924e1: test   %eax,-0x27623e7(%rip)        # 0x0000000000230100\n                        ;   {poll_return}\n  0x00000000029924e7: retq\n  0x00000000029924e8: mov    %rsi,0x8(%rsp)\n  0x00000000029924ed: movq   $0xffffffffffffffff,(%rsp)\n  0x00000000029924f5: callq  0x000000000297e260  ; OopMap{off=122}\n                        ;*synchronization entry\n                        ; - MinPerformance::minA@-1 (line 58)\n                        ;   {runtime_call}\n  0x00000000029924fa: jmp    0x00000000029924b8\n  0x00000000029924fc: nop\n  0x00000000029924fd: nop\n  0x00000000029924fe: mov    0x298(%r15),%rax\n  0x0000000002992505: movabs $0x0,%r10\n  0x000000000299250f: mov    %r10,0x298(%r15)\n  0x0000000002992516: movabs $0x0,%r10\n  0x0000000002992520: mov    %r10,0x2a0(%r15)\n  0x0000000002992527: add    $0x50,%rsp\n  0x000000000299252b: pop    %rbp\n  0x000000000299252c: jmpq   0x00000000028ec620  ; {runtime_call}\n  0x0000000002992531: hlt\n  0x0000000002992532: hlt\n  0x0000000002992533: hlt\n  0x0000000002992534: hlt\n  0x0000000002992535: hlt\n  0x0000000002992536: hlt\n  0x0000000002992537: hlt\n  0x0000000002992538: hlt\n  0x0000000002992539: hlt\n  0x000000000299253a: hlt\n  0x000000000299253b: hlt\n  0x000000000299253c: hlt\n  0x000000000299253d: hlt\n  0x000000000299253e: hlt\n  0x000000000299253f: hlt\n[Stub Code]\n  0x0000000002992540: nop                       ;   {no_reloc}\n  0x0000000002992541: nop\n  0x0000000002992542: nop\n  0x0000000002992543: nop\n  0x0000000002992544: nop\n  0x0000000002992545: movabs $0x0,%rbx          ; {static_stub}\n  0x000000000299254f: jmpq   0x000000000299254f  ; {runtime_call}\n  0x0000000002992554: nop\n  0x0000000002992555: movabs $0x0,%rbx          ; {static_stub}\n  0x000000000299255f: jmpq   0x000000000299255f  ; {runtime_call}\n[Exception Handler]\n  0x0000000002992564: callq  0x000000000297b9e0  ; {runtime_call}\n  0x0000000002992569: mov    %rsp,-0x28(%rsp)\n  0x000000000299256e: sub    $0x80,%rsp\n  0x0000000002992575: mov    %rax,0x78(%rsp)\n  0x000000000299257a: mov    %rcx,0x70(%rsp)\n  0x000000000299257f: mov    %rdx,0x68(%rsp)\n  0x0000000002992584: mov    %rbx,0x60(%rsp)\n  0x0000000002992589: mov    %rbp,0x50(%rsp)\n  0x000000000299258e: mov    %rsi,0x48(%rsp)\n  0x0000000002992593: mov    %rdi,0x40(%rsp)\n  0x0000000002992598: mov    %r8,0x38(%rsp)\n  0x000000000299259d: mov    %r9,0x30(%rsp)\n  0x00000000029925a2: mov    %r10,0x28(%rsp)\n  0x00000000029925a7: mov    %r11,0x20(%rsp)\n  0x00000000029925ac: mov    %r12,0x18(%rsp)\n  0x00000000029925b1: mov    %r13,0x10(%rsp)\n  0x00000000029925b6: mov    %r14,0x8(%rsp)\n  0x00000000029925bb: mov    %r15,(%rsp)\n  0x00000000029925bf: movabs $0x515db148,%rcx   ; {external_word}\n  0x00000000029925c9: movabs $0x2992569,%rdx    ; {internal_word}\n  0x00000000029925d3: mov    %rsp,%r8\n  0x00000000029925d6: and    $0xfffffffffffffff0,%rsp\n  0x00000000029925da: callq  0x00000000512a9020  ; {runtime_call}\n  0x00000000029925df: hlt\n[Deopt Handler Code]\n  0x00000000029925e0: movabs $0x29925e0,%r10    ; {section_word}\n  0x00000000029925ea: push   %r10\n  0x00000000029925ec: jmpq   0x00000000028c7340  ; {runtime_call}\n  0x00000000029925f1: hlt\n  0x00000000029925f2: hlt\n  0x00000000029925f3: hlt\n  0x00000000029925f4: hlt\n  0x00000000029925f5: hlt\n  0x00000000029925f6: hlt\n  0x00000000029925f7: hlt\n</code></pre>\n<p>One can see that the treatment of special cases involves some effort - compared to the output that uses simple comparisons, which is rather straightforward:</p>\n<pre><code>Decoding compiled method 0x0000000002998790:\nCode:\n[Entry Point]\n[Verified Entry Point]\n[Constants]\n  # {method} {0x000000001c0109c0} &amp;apos;minB&amp;apos; &amp;apos;(DDD)D&amp;apos; in &amp;apos;MinPerformance&amp;apos;\n  # parm0:    xmm0:xmm0   = double\n  # parm1:    xmm1:xmm1   = double\n  # parm2:    xmm2:xmm2   = double\n  #           [sp+0x20]  (sp of caller)\n  0x00000000029988c0: sub    $0x18,%rsp\n  0x00000000029988c7: mov    %rbp,0x10(%rsp) ;*synchronization entry\n                        ; - MinPerformance::minB@-1 (line 63)\n\n  0x00000000029988cc: vucomisd %xmm0,%xmm1\n  0x00000000029988d0: ja     0x00000000029988ee  ;*ifge\n                        ; - MinPerformance::minB@3 (line 63)\n\n  0x00000000029988d2: vucomisd %xmm1,%xmm2\n  0x00000000029988d6: ja     0x00000000029988de  ;*ifge\n                        ; - MinPerformance::minB@22 (line 71)\n\n  0x00000000029988d8: vmovapd %xmm2,%xmm0\n  0x00000000029988dc: jmp    0x00000000029988e2\n  0x00000000029988de: vmovapd %xmm1,%xmm0 ;*synchronization entry\n                        ; - MinPerformance::minB@-1 (line 63)\n\n  0x00000000029988e2: add    $0x10,%rsp\n  0x00000000029988e6: pop    %rbp\n  0x00000000029988e7: test   %eax,-0x27688ed(%rip)        # 0x0000000000230000\n                        ;   {poll_return}\n  0x00000000029988ed: retq\n  0x00000000029988ee: vucomisd %xmm0,%xmm2\n  0x00000000029988f2: ja     0x00000000029988e2  ;*ifge\n                        ; - MinPerformance::minB@10 (line 65)\n\n  0x00000000029988f4: vmovapd %xmm2,%xmm0\n  0x00000000029988f8: jmp    0x00000000029988e2\n  0x00000000029988fa: hlt\n  0x00000000029988fb: hlt\n  0x00000000029988fc: hlt\n  0x00000000029988fd: hlt\n  0x00000000029988fe: hlt\n  0x00000000029988ff: hlt\n[Exception Handler]\n[Stub Code]\n  0x0000000002998900: jmpq   0x00000000028ec920  ;   {no_reloc}\n[Deopt Handler Code]\n  0x0000000002998905: callq  0x000000000299890a\n  0x000000000299890a: subq   $0x5,(%rsp)\n  0x000000000299890f: jmpq   0x00000000028c7340  ; {runtime_call}\n  0x0000000002998914: hlt\n  0x0000000002998915: hlt\n  0x0000000002998916: hlt\n  0x0000000002998917: hlt\n</code></pre>\n<hr />\n<p>Whether or not there are cases where such an optimization really makes a difference in an application is hard to tell. But at least, the bottom line is:</p>\n<ul>\n<li>The <code>Math#min(double,double)</code> method is <strong>not</strong> the same as a simple comparison, and the treatment of the special cases does not come for free</li>\n<li>There are cases where the special case treatment that is done by <code>Math#min</code> is not necessary, and then a comparison-based approach <strong>may</strong> be more efficient</li>\n<li>As already pointed out in other answers: In most cases, the performance difference will not matter. However, for this particular example, one should probably create a utility method <code>min(double,double,double)</code> anyhow, for better convenience and readability, and then it would be easy to do two runs with the different implementations, and see whether it really affects the performance.</li>\n</ul>\n<hr />\n<p>(Side note: The integer type methods, like <code>Math.min(int,int)</code> actually <em>are</em> a simple comparison - so I would expect <strong>no</strong> difference for these).</p>\n"},{"tags":[],"owner":{"account_id":3389813,"reputation":2142,"user_id":2844907,"accept_rate":44,"display_name":"Alexander Cyberman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1492910607,"creation_date":1492910607,"answer_id":43566448,"question_id":9576557,"body_markdown":"If you will call min() around 1kk times with different a, b, c, then use my method:\r\n\r\nHere only two comparisons. There is no way to calc faster :P\r\n    \r\n    public static double min(double a, double b, double c) {\r\n        if (a &gt; b) {     //if true, min = b\r\n            if (b &gt; c) { //if true, min = c\r\n                return c;\r\n            } else {     //else min = b\r\n                return b; \r\n            }\r\n        }          //else min = a\r\n        if (a &gt; c) {  // if true, min=c\r\n            return c;\r\n        } else {\r\n            return a;\r\n        }\r\n    }","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>If you will call min() around 1kk times with different a, b, c, then use my method:</p>\n\n<p>Here only two comparisons. There is no way to calc faster :P</p>\n\n<pre><code>public static double min(double a, double b, double c) {\n    if (a &gt; b) {     //if true, min = b\n        if (b &gt; c) { //if true, min = c\n            return c;\n        } else {     //else min = b\n            return b; \n        }\n    }          //else min = a\n    if (a &gt; c) {  // if true, min=c\n        return c;\n    } else {\n        return a;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9247027,"reputation":39,"user_id":6868576,"display_name":"Thomas Allenbaugh"},"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1503505367,"creation_date":1503505367,"answer_id":45844897,"question_id":9576557,"body_markdown":"For pure characters-of-code efficiency, I can&#39;t find anything better than\r\n\r\n    smallest = a&lt;b&amp;&amp;a&lt;c?a:b&lt;c?b:c;","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>For pure characters-of-code efficiency, I can't find anything better than</p>\n\n<pre><code>smallest = a&lt;b&amp;&amp;a&lt;c?a:b&lt;c?b:c;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11926946,"reputation":45,"user_id":8727979,"display_name":"Sinisa"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1509295993,"creation_date":1509295993,"answer_id":47002789,"question_id":9576557,"body_markdown":"For those who find this topic much later:\r\n\r\nIf you have just three values to compare there is no significant difference. But if you have to find min of, say, thirty or sixty values, &quot;min&quot; could be easier for anyone to read in the code next year:\r\n\r\n    int smallest;\r\n    \r\n    smallest = min(a1, a2);\r\n    smallest = min(smallest, a3);\r\n    smallest = min(smallest, a4);\r\n    ...\r\n    smallest = min(smallest, a37);\r\n\r\nBut if you think of speed, maybe better way would be to put values into list, and then find min of that:\r\n\r\n    List&lt;Integer&gt; mySet = Arrays.asList(a1, a2, a3, ..., a37);\r\n    \r\n    int smallest = Collections.min(mySet);\r\n\r\nWould you agree?","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>For those who find this topic much later:</p>\n\n<p>If you have just three values to compare there is no significant difference. But if you have to find min of, say, thirty or sixty values, \"min\" could be easier for anyone to read in the code next year:</p>\n\n<pre><code>int smallest;\n\nsmallest = min(a1, a2);\nsmallest = min(smallest, a3);\nsmallest = min(smallest, a4);\n...\nsmallest = min(smallest, a37);\n</code></pre>\n\n<p>But if you think of speed, maybe better way would be to put values into list, and then find min of that:</p>\n\n<pre><code>List&lt;Integer&gt; mySet = Arrays.asList(a1, a2, a3, ..., a37);\n\nint smallest = Collections.min(mySet);\n</code></pre>\n\n<p>Would you agree?</p>\n"},{"tags":[],"owner":{"account_id":13445974,"reputation":51,"user_id":9701908,"display_name":"newbie"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1524724673,"creation_date":1524720226,"answer_id":50035387,"question_id":9576557,"body_markdown":"OP&#39;s efficient code has a bug: \r\n\r\nwhen `a == b`, and `a (or b) &lt; c`, the code will pick c instead of a or b.","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>OP's efficient code has a bug: </p>\n\n<p>when <code>a == b</code>, and <code>a (or b) &lt; c</code>, the code will pick c instead of a or b.</p>\n"},{"tags":[],"owner":{"account_id":3557255,"reputation":5214,"user_id":2970705,"display_name":"JavAlex"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1599903148,"creation_date":1599903148,"answer_id":63858873,"question_id":9576557,"body_markdown":"Works with an arbitrary number of input values:\r\n\r\n     public static double min(double... doubles) {\r\n        double m = Double.MAX_VALUE;\r\n        for (double d : doubles) {\r\n            m = Math.min(m, d);\r\n        }\r\n        return m;\r\n    }","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>Works with an arbitrary number of input values:</p>\n<pre><code> public static double min(double... doubles) {\n    double m = Double.MAX_VALUE;\n    for (double d : doubles) {\n        m = Math.min(m, d);\n    }\n    return m;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18338014,"reputation":59,"user_id":13354986,"display_name":"james"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1605105739,"creation_date":1605052404,"answer_id":64778512,"question_id":9576557,"body_markdown":"Use the Arrays.sort() method, the lowest value will be element0. \r\n\r\nIn terms of performance, this should not be expensive since the sort operation is\r\nalready optimised. Also has the advantage of being concise. \r\n\r\n    private int min(int ... value) {\r\n        Arrays.sort(value);\r\n        return value[0];\r\n    }\r\n\r\n\r\n\r\nProof of concept\r\n\r\n        int[] intArr = {12, 5, 6, 9, 44, 28, 1, 4, 18, 2, 66, 13, 1, 33, 74, 12, \r\n        5, 6, 9, 44, 28, 1, 4, 18, 2, 66, 13};\r\n\r\n        // Sorting approach\r\n        long startTime = System.currentTimeMillis();\r\n        int minVal = min(intArr);\r\n        long endTime = System.currentTimeMillis();\r\n        System.out.println(&quot;Sorting: Min =&gt; &quot; + minVal + &quot; took =&gt; &quot; + (endTime - \r\n        startTime));\r\n        System.out.println(startTime + &quot;   &quot;  + endTime);\r\n        System.out.println(&quot; &quot;);\r\n\r\n        // Scanning approach\r\n        minVal = 100;\r\n        startTime = System.currentTimeMillis();\r\n        for(int val : intArr) {\r\n            if (val &lt; minVal)\r\n                minVal = val;\r\n        }\r\n        endTime = System.currentTimeMillis();\r\n        System.out.println(&quot;Iterating: Min =&gt; &quot; + minVal + &quot; took =&gt; &quot; + (endTime \r\n        - startTime));\r\n        System.out.println(startTime + &quot;   &quot;  + endTime);\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/PfDYY.png","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>Use the Arrays.sort() method, the lowest value will be element0.</p>\n<p>In terms of performance, this should not be expensive since the sort operation is\nalready optimised. Also has the advantage of being concise.</p>\n<pre><code>private int min(int ... value) {\n    Arrays.sort(value);\n    return value[0];\n}\n</code></pre>\n<p>Proof of concept</p>\n<pre><code>    int[] intArr = {12, 5, 6, 9, 44, 28, 1, 4, 18, 2, 66, 13, 1, 33, 74, 12, \n    5, 6, 9, 44, 28, 1, 4, 18, 2, 66, 13};\n\n    // Sorting approach\n    long startTime = System.currentTimeMillis();\n    int minVal = min(intArr);\n    long endTime = System.currentTimeMillis();\n    System.out.println(&quot;Sorting: Min =&gt; &quot; + minVal + &quot; took =&gt; &quot; + (endTime - \n    startTime));\n    System.out.println(startTime + &quot;   &quot;  + endTime);\n    System.out.println(&quot; &quot;);\n\n    // Scanning approach\n    minVal = 100;\n    startTime = System.currentTimeMillis();\n    for(int val : intArr) {\n        if (val &lt; minVal)\n            minVal = val;\n    }\n    endTime = System.currentTimeMillis();\n    System.out.println(&quot;Iterating: Min =&gt; &quot; + minVal + &quot; took =&gt; &quot; + (endTime \n    - startTime));\n    System.out.println(startTime + &quot;   &quot;  + endTime);\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/PfDYY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PfDYY.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":103729,"reputation":3046,"user_id":277671,"accept_rate":68,"display_name":"Chris"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195793,"favorite_count":0,"down_vote_count":1,"up_vote_count":61,"accepted_answer_id":9576704,"answer_count":16,"score":60,"last_activity_date":1660885019,"creation_date":1330996742,"question_id":9576557,"body_markdown":"I have an algorithm written in Java that I would like to make more efficient. A part that I think could be made more efficient is finding the smallest of 3 numbers. Currently I&#39;m using the `Math.min` method as below:\r\n\r\n    double smallest = Math.min(a, Math.min(b, c));\r\n\r\nHow efficient is this? Would it be more efficient to replace with if statements like below:\r\n\r\n    double smallest;\r\n    if (a &lt;= b &amp;&amp; a &lt;= c) {\r\n        smallest = a;\r\n    } else if (b &lt;= c &amp;&amp; b &lt;= a) {\r\n        smallest = b;\r\n    } else {\r\n        smallest = c;\r\n    }\r\n\r\nOr if any other way is more efficient\r\n\r\nI&#39;m wondering if it is worth changing what I&#39;m currently using?\r\n\r\nAny speed increase would be greatly helpful","title":"Most efficient way to find smallest of 3 numbers Java?","body":"<p>I have an algorithm written in Java that I would like to make more efficient. A part that I think could be made more efficient is finding the smallest of 3 numbers. Currently I'm using the <code>Math.min</code> method as below:</p>\n\n<pre><code>double smallest = Math.min(a, Math.min(b, c));\n</code></pre>\n\n<p>How efficient is this? Would it be more efficient to replace with if statements like below:</p>\n\n<pre><code>double smallest;\nif (a &lt;= b &amp;&amp; a &lt;= c) {\n    smallest = a;\n} else if (b &lt;= c &amp;&amp; b &lt;= a) {\n    smallest = b;\n} else {\n    smallest = c;\n}\n</code></pre>\n\n<p>Or if any other way is more efficient</p>\n\n<p>I'm wondering if it is worth changing what I'm currently using?</p>\n\n<p>Any speed increase would be greatly helpful</p>\n"},{"tags":["java","spring-boot","hibernate","jpa","connection-pooling"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1625566004,"post_id":68268496,"comment_id":120654361,"body_markdown":"There is already a connection pool so no you don&#39;t need to add one (this is also explained in the reference guide). You can still configure it by increasing the max connections (the default is 10 for instance).","body":"There is already a connection pool so no you don&#39;t need to add one (this is also explained in the reference guide). You can still configure it by increasing the max connections (the default is 10 for instance)."},{"owner":{"account_id":254664,"reputation":11551,"user_id":534218,"accept_rate":54,"display_name":"Safari"},"score":0,"creation_date":1625566165,"post_id":68268496,"comment_id":120654442,"body_markdown":"ok, thanks ... can you give me the link to the reference guide please?","body":"ok, thanks ... can you give me the link to the reference guide please?"}],"answers":[{"tags":[],"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1625572270,"creation_date":1625572270,"answer_id":68270053,"question_id":68268496,"body_markdown":"Hikari is the default DataSource implementation with Spring Boot 2. This means we need not add explicit dependency in the pom.xml. The spring-boot-starter-jdbc and spring-boot-starter-data-jpa resolve it by default. To sum up, you require no other steps with Spring Boot 2.\r\n&lt;br/&gt;\r\nLink for Documentation : [Spring Documentation for Connection pools][1]\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.sql.datasource.connection-pool\r\n\r\nAlthough you modify the default properties of HikariCP\r\n\r\n    spring.datasource.hikari.connection-timeout = 20000 #maximum number of milliseconds that a client will wait for a connection\r\n\r\n    spring.datasource.hikari.minimum-idle= 10 #minimum number of idle connections maintained by HikariCP in a connection pool\r\n\r\n    spring.datasource.hikari.maximum-pool-size= 10 #maximum pool size\r\n\r\n    spring.datasource.hikari.idle-timeout=10000 #maximum idle time for connection\r\n\r\n    spring.datasource.hikari.max-lifetime= 1000 # maximum lifetime in milliseconds of a connection in the pool after it is closed.\r\n\r\n    spring.datasource.hikari.auto-commit =true #default auto-commit behavior.","title":"Spring Boot with default connection-pool","body":"<p>Hikari is the default DataSource implementation with Spring Boot 2. This means we need not add explicit dependency in the pom.xml. The spring-boot-starter-jdbc and spring-boot-starter-data-jpa resolve it by default. To sum up, you require no other steps with Spring Boot 2.\n<br/>\nLink for Documentation : <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.sql.datasource.connection-pool\" rel=\"noreferrer\">Spring Documentation for Connection pools</a></p>\n<p>Although you modify the default properties of HikariCP</p>\n<pre><code>spring.datasource.hikari.connection-timeout = 20000 #maximum number of milliseconds that a client will wait for a connection\n\nspring.datasource.hikari.minimum-idle= 10 #minimum number of idle connections maintained by HikariCP in a connection pool\n\nspring.datasource.hikari.maximum-pool-size= 10 #maximum pool size\n\nspring.datasource.hikari.idle-timeout=10000 #maximum idle time for connection\n\nspring.datasource.hikari.max-lifetime= 1000 # maximum lifetime in milliseconds of a connection in the pool after it is closed.\n\nspring.datasource.hikari.auto-commit =true #default auto-commit behavior.\n</code></pre>\n"},{"tags":[],"owner":{"account_id":21647082,"reputation":51,"user_id":15968258,"display_name":"Bhabani Prasad Patel"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1625592524,"creation_date":1625573414,"answer_id":68270301,"question_id":68268496,"body_markdown":"***As per Spring Boot Documentation:***\r\n\r\nSupported Connection Pools:-\r\n\r\nSpring Boot uses the following algorithm for choosing a specific implementation:\r\n\r\n 1. We prefer HikariCP for its performance and concurrency. If HikariCP is available, we always choose it.\r\n 2. Otherwise, if the Tomcat pooling DataSource is available, we use it.\r\n 3. Otherwise, if Commons DBCP2 is available, we use it.\r\n 4. If none of HikariCP, Tomcat, and DBCP2 are available and if Oracle UCP is available, we use it.\r\n\r\n*If you use the spring-boot-starter-jdbc or spring-boot-starter-data-jpa “starters”, you automatically get a dependency to HikariCP.*\r\n\r\n[Spring documentation][1]\r\n\r\nHave a look into HikariCP: https://github.com/brettwooldridge/HikariCP\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.sql.datasource.connection-pool","title":"Spring Boot with default connection-pool","body":"<p><em><strong>As per Spring Boot Documentation:</strong></em></p>\n<p>Supported Connection Pools:-</p>\n<p>Spring Boot uses the following algorithm for choosing a specific implementation:</p>\n<ol>\n<li>We prefer HikariCP for its performance and concurrency. If HikariCP is available, we always choose it.</li>\n<li>Otherwise, if the Tomcat pooling DataSource is available, we use it.</li>\n<li>Otherwise, if Commons DBCP2 is available, we use it.</li>\n<li>If none of HikariCP, Tomcat, and DBCP2 are available and if Oracle UCP is available, we use it.</li>\n</ol>\n<p><em>If you use the spring-boot-starter-jdbc or spring-boot-starter-data-jpa “starters”, you automatically get a dependency to HikariCP.</em></p>\n<p><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#features.sql.datasource.connection-pool\" rel=\"noreferrer\">Spring documentation</a></p>\n<p>Have a look into HikariCP: <a href=\"https://github.com/brettwooldridge/HikariCP\" rel=\"noreferrer\">https://github.com/brettwooldridge/HikariCP</a></p>\n"}],"owner":{"account_id":254664,"reputation":11551,"user_id":534218,"accept_rate":54,"display_name":"Safari"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50840,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"accepted_answer_id":68270053,"answer_count":2,"score":10,"last_activity_date":1660884608,"creation_date":1625565845,"question_id":68268496,"body_markdown":"I&#39;m using SpringBoot (v2.3.0.RELEASE), JPA and Hibernate (with a MySQL database).\r\nI need to try to improve, in general, the performances.\r\n\r\nIt&#39;s not completely clear for me if, into the default configuration, is already there a Database Connection Pool.\r\n\r\nI didn&#39;t add any specific dependencies into my pom about a connection pool but when I try to run my service I read:\r\n\r\n    2021-07-01 13:53:04.065  INFO  HikariDataSource-getConnection():110 - [ HikariPool-1 - Starting... ]\r\n    2021-07-01 13:53:04.499  INFO  HikariDataSource-getConnection():123 - [ HikariPool-1 - Start completed. ]\r\n\r\ncan you give me some info about this?\r\n\r\nDo I need to configure (adding the dependency also) a connection pool manually?","title":"Spring Boot with default connection-pool","body":"<p>I'm using SpringBoot (v2.3.0.RELEASE), JPA and Hibernate (with a MySQL database).\nI need to try to improve, in general, the performances.</p>\n<p>It's not completely clear for me if, into the default configuration, is already there a Database Connection Pool.</p>\n<p>I didn't add any specific dependencies into my pom about a connection pool but when I try to run my service I read:</p>\n<pre><code>2021-07-01 13:53:04.065  INFO  HikariDataSource-getConnection():110 - [ HikariPool-1 - Starting... ]\n2021-07-01 13:53:04.499  INFO  HikariDataSource-getConnection():123 - [ HikariPool-1 - Start completed. ]\n</code></pre>\n<p>can you give me some info about this?</p>\n<p>Do I need to configure (adding the dependency also) a connection pool manually?</p>\n"},{"tags":["java","maven","dependency-management"],"comments":[{"owner":{"account_id":3968852,"reputation":1559,"user_id":3273929,"accept_rate":84,"display_name":"Mark VY"},"score":0,"creation_date":1660844846,"post_id":73406948,"comment_id":129635594,"body_markdown":"note: on further reflection, I think this question is poorly titled; if anyone has suggestions for better title I&#39;m eager to hear them","body":"note: on further reflection, I think this question is poorly titled; if anyone has suggestions for better title I&#39;m eager to hear them"},{"owner":{"account_id":112317,"reputation":93939,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1660846217,"post_id":73406948,"comment_id":129636032,"body_markdown":"Before you can run your build all dependencies (incl. plugins + deps) have to be downloaded...","body":"Before you can run your build all dependencies (incl. plugins + deps) have to be downloaded..."},{"owner":{"account_id":3968852,"reputation":1559,"user_id":3273929,"accept_rate":84,"display_name":"Mark VY"},"score":0,"creation_date":1660846984,"post_id":73406948,"comment_id":129636306,"body_markdown":"I&#39;m not trying to do a &quot;real&quot; build.  I&#39;m just trying to find a way to ask maven &quot;why do you claim that I depend on module ABC, even though ABC is not in my pom file&quot;.","body":"I&#39;m not trying to do a &quot;real&quot; build.  I&#39;m just trying to find a way to ask maven &quot;why do you claim that I depend on module ABC, even though ABC is not in my pom file&quot;."}],"answers":[{"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660843665,"creation_date":1660843665,"answer_id":73407208,"question_id":73406948,"body_markdown":"How exactly would you think that maven could resolve transitive dependencies (= dependencies of dependencies) without resolving the dependencies first? Escpecially for the goal &quot;test&quot; also the dependency scope &quot;test&quot; has to be used, which is more then the default scope &quot;compile&quot;.\r\n\r\nYou can use the goal `dependency:go-offline` to prepare for the offline mode. Maven downloads then all required dependencies. Find the detailed docs for that on https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html\r\n\r\nYou could also have a look at [this answer](https://stackoverflow.com/a/7233762/2846138) to get another opinion on going online.","title":"get partial maven dependency tree in offline mode","body":"<p>How exactly would you think that maven could resolve transitive dependencies (= dependencies of dependencies) without resolving the dependencies first? Escpecially for the goal &quot;test&quot; also the dependency scope &quot;test&quot; has to be used, which is more then the default scope &quot;compile&quot;.</p>\n<p>You can use the goal <code>dependency:go-offline</code> to prepare for the offline mode. Maven downloads then all required dependencies. Find the detailed docs for that on <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html\" rel=\"nofollow noreferrer\">https://maven.apache.org/plugins/maven-dependency-plugin/go-offline-mojo.html</a></p>\n<p>You could also have a look at <a href=\"https://stackoverflow.com/a/7233762/2846138\">this answer</a> to get another opinion on going online.</p>\n"},{"tags":[],"owner":{"account_id":4181375,"reputation":5091,"user_id":3426309,"display_name":"Andrey B. Panfilov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660884169,"creation_date":1660884169,"answer_id":73411918,"question_id":73406948,"body_markdown":"The main problem is maven downloads dependencies by demand, you may just check that by triggering different lifecycle phases like `mvn initialize`, `mvn validate`, `mvn compile`, `mvn package` and checking what maven is trying to download. Sometimes it is possible to figure out project dependencies via analysing project object model (`pom`), sometimes it is not, especially when plugins define their own dependencies either implicitly or explicitly, some examples below:\r\n- we may ask `maven-dependency-plugin` to download something via [`dependency:copy-dependencies`](https://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html)\r\n- `exec-maven-plugin` has similar functionality: [Running Java programs with the exec goal](https://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html)\r\n- [`maven-invoker-plugin`](https://maven.apache.org/plugins/maven-invoker-plugin/) may run poms which are part of project but not a part of reactor.\r\n\r\n**In short**: neither maven plugin will able to download all required dependencies. The only &quot;reliable&quot; way to go offline is to run target goal and only then go offline, unfortunately even in this cases some weird things may happen, especially when you or dependency authors are using snapshot versions, version ranges, third-party repositories, etc (my own preference is to run maven with `-llr` flag to make it more reliable). ","title":"get partial maven dependency tree in offline mode","body":"<p>The main problem is maven downloads dependencies by demand, you may just check that by triggering different lifecycle phases like <code>mvn initialize</code>, <code>mvn validate</code>, <code>mvn compile</code>, <code>mvn package</code> and checking what maven is trying to download. Sometimes it is possible to figure out project dependencies via analysing project object model (<code>pom</code>), sometimes it is not, especially when plugins define their own dependencies either implicitly or explicitly, some examples below:</p>\n<ul>\n<li>we may ask <code>maven-dependency-plugin</code> to download something via <a href=\"https://maven.apache.org/plugins/maven-dependency-plugin/copy-dependencies-mojo.html\" rel=\"nofollow noreferrer\"><code>dependency:copy-dependencies</code></a></li>\n<li><code>exec-maven-plugin</code> has similar functionality: <a href=\"https://www.mojohaus.org/exec-maven-plugin/examples/example-exec-for-java-programs.html\" rel=\"nofollow noreferrer\">Running Java programs with the exec goal</a></li>\n<li><a href=\"https://maven.apache.org/plugins/maven-invoker-plugin/\" rel=\"nofollow noreferrer\"><code>maven-invoker-plugin</code></a> may run poms which are part of project but not a part of reactor.</li>\n</ul>\n<p><strong>In short</strong>: neither maven plugin will able to download all required dependencies. The only &quot;reliable&quot; way to go offline is to run target goal and only then go offline, unfortunately even in this cases some weird things may happen, especially when you or dependency authors are using snapshot versions, version ranges, third-party repositories, etc (my own preference is to run maven with <code>-llr</code> flag to make it more reliable).</p>\n"}],"owner":{"account_id":3968852,"reputation":1559,"user_id":3273929,"accept_rate":84,"display_name":"Mark VY"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":252,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660884169,"creation_date":1660842346,"question_id":73406948,"body_markdown":"I&#39;m trying to run some unit tests with Apache Maven.  I hoped this would be as simple as running the `test` &quot;goal&quot;.  But when I did that, maven complained that it could not download some dependencies and thus can&#39;t run my tests.  This sounds fine, except that I have no idea why it decided I need those dependencies; they are not in my pom.xml, and I doubt they&#39;re in my transitive dependencies either.  (I&#39;m not sure about that last part; they very well might be in my transitive dependencies.)\r\n\r\nLuckily, maven has the perfect tool for this: `dependency:tree` will tell us exactly which dependency is getting pulled in by what.  Except for the small problem that maven thinks to itself &quot;in order to build the tree, I have to resolve the dependencies first&quot; so it tries (and fails) to download those very same dependencies so that it can build the part of the tree that&#39;s under them.\r\n\r\nSo now I don&#39;t have a tree, and I have no idea how to proceed from here.","title":"get partial maven dependency tree in offline mode","body":"<p>I'm trying to run some unit tests with Apache Maven.  I hoped this would be as simple as running the <code>test</code> &quot;goal&quot;.  But when I did that, maven complained that it could not download some dependencies and thus can't run my tests.  This sounds fine, except that I have no idea why it decided I need those dependencies; they are not in my pom.xml, and I doubt they're in my transitive dependencies either.  (I'm not sure about that last part; they very well might be in my transitive dependencies.)</p>\n<p>Luckily, maven has the perfect tool for this: <code>dependency:tree</code> will tell us exactly which dependency is getting pulled in by what.  Except for the small problem that maven thinks to itself &quot;in order to build the tree, I have to resolve the dependencies first&quot; so it tries (and fails) to download those very same dependencies so that it can build the part of the tree that's under them.</p>\n<p>So now I don't have a tree, and I have no idea how to proceed from here.</p>\n"},{"tags":["java","spring","spring-boot","resttemplate","spring-cloud-sleuth"],"answers":[{"tags":[],"owner":{"account_id":7768515,"reputation":1636,"user_id":7972621,"display_name":"Ankit Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660671682,"creation_date":1660671682,"answer_id":73378130,"question_id":73377655,"body_markdown":"I&#39;ve not worked a lot with Sleuth but I have great suspicion over the creating of a new RestTemplate each time.\r\n\r\nTry defining it as a bean with a singleton scope and then Autowire the RestTemplate.","title":"Not able to pass Sleuth traceid and spanid to downstream services while making API calls using resttemplate with new keyword","body":"<p>I've not worked a lot with Sleuth but I have great suspicion over the creating of a new RestTemplate each time.</p>\n<p>Try defining it as a bean with a singleton scope and then Autowire the RestTemplate.</p>\n"},{"tags":[],"owner":{"account_id":1976110,"reputation":10792,"user_id":1773866,"display_name":"Marcin Grzejszczak"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660739047,"creation_date":1660739047,"answer_id":73388438,"question_id":73377655,"body_markdown":"You need to inject `TracingClientHttpRequestInterceptor` bean to your rest template and it will take care of passing the tracing context.","title":"Not able to pass Sleuth traceid and spanid to downstream services while making API calls using resttemplate with new keyword","body":"<p>You need to inject <code>TracingClientHttpRequestInterceptor</code> bean to your rest template and it will take care of passing the tracing context.</p>\n"}],"owner":{"account_id":10685095,"reputation":283,"user_id":7865867,"accept_rate":100,"display_name":"New2Java"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1113,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73388438,"answer_count":2,"score":0,"last_activity_date":1660884077,"creation_date":1660669233,"question_id":73377655,"body_markdown":"Currently, I am integrating Sleuth into our existing Microservices to enhance the logging mechanism. The MS is using Spring Cloud Sleuth 3.0.6\r\n\r\nThe challenge that I am trying to solve is while making outbound API calls, we are creating RestTemplate using new() keyword instead of managing RestTemplate as Bean. Due to this, the traceids vary in the MS1 and MS2 logs, which makes the tracing difficult. \r\n\r\nAs I understand from the official doc, Brave registers interceptors to like LazyTraceClientHttpRequestInterceptor &amp; TracingClientHttpRequestInterceptor to add headers like X-B3-Traceid, X-B3-SpanId to the outbound request, I tried to do something similar. \r\n\r\nHere is the code for my custom Interceptor:\r\n\r\n    import java.io.IOException;\r\n    \r\n    import org.slf4j.Logger;\r\n    import org.slf4j.LoggerFactory;\r\n    import org.springframework.cloud.sleuth.Span;\r\n    import org.springframework.cloud.sleuth.Tracer;\r\n    import org.springframework.http.HttpHeaders;\r\n    import org.springframework.http.HttpRequest;\r\n    import org.springframework.http.client.ClientHttpRequestExecution;\r\n    import org.springframework.http.client.ClientHttpRequestInterceptor;\r\n    import org.springframework.http.client.ClientHttpResponse;\r\n    import org.springframework.stereotype.Component;\r\n     \r\n    @Component\r\n    public class RequestResponseLoggingInterceptor implements ClientHttpRequestInterceptor {\r\n        \r\n        private final Logger log = LoggerFactory.getLogger(this.getClass());\r\n        \r\n        private Tracer tracer;\r\n        \r\n        RequestResponseLoggingInterceptor(Tracer tracer){\r\n        \tthis.tracer = tracer;\r\n        }\r\n      \r\n        @Override\r\n        public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException \r\n        {\r\n            Span span = tracer.currentSpan();\r\n            \r\n            HttpHeaders headers = new HttpHeaders();\r\n        \theaders.set(&quot;X-B3-Traceid&quot;, span.context().traceId());\r\n        \theaders.set(&quot;X-B3-SpanId&quot;, span.context().spanId());\r\n        \theaders.set(&quot;X-B3-ParentSpanId&quot;, span.context().parentId());\r\n        \trequest.getHeaders().addAll(headers);\r\n        \t\r\n        \tClientHttpResponse response = execution.execute(request, body);\r\n            return response;\r\n        }\r\n    }\r\n\r\nAnd In my controller class, I have autowired this interceptor. And using this interceptor for the resttemplate call.\r\n\r\nWhen I am comparing the MS1 and MS2 logs for this API call, the traceids are different.\r\n\r\nCan anyone help me what am I doing wrong here? And how can I achieve this traceid propagation to downstream service By Creating RestTemplate with New() keyword.","title":"Not able to pass Sleuth traceid and spanid to downstream services while making API calls using resttemplate with new keyword","body":"<p>Currently, I am integrating Sleuth into our existing Microservices to enhance the logging mechanism. The MS is using Spring Cloud Sleuth 3.0.6</p>\n<p>The challenge that I am trying to solve is while making outbound API calls, we are creating RestTemplate using new() keyword instead of managing RestTemplate as Bean. Due to this, the traceids vary in the MS1 and MS2 logs, which makes the tracing difficult.</p>\n<p>As I understand from the official doc, Brave registers interceptors to like LazyTraceClientHttpRequestInterceptor &amp; TracingClientHttpRequestInterceptor to add headers like X-B3-Traceid, X-B3-SpanId to the outbound request, I tried to do something similar.</p>\n<p>Here is the code for my custom Interceptor:</p>\n<pre><code>import java.io.IOException;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.cloud.sleuth.Span;\nimport org.springframework.cloud.sleuth.Tracer;\nimport org.springframework.http.HttpHeaders;\nimport org.springframework.http.HttpRequest;\nimport org.springframework.http.client.ClientHttpRequestExecution;\nimport org.springframework.http.client.ClientHttpRequestInterceptor;\nimport org.springframework.http.client.ClientHttpResponse;\nimport org.springframework.stereotype.Component;\n \n@Component\npublic class RequestResponseLoggingInterceptor implements ClientHttpRequestInterceptor {\n    \n    private final Logger log = LoggerFactory.getLogger(this.getClass());\n    \n    private Tracer tracer;\n    \n    RequestResponseLoggingInterceptor(Tracer tracer){\n        this.tracer = tracer;\n    }\n  \n    @Override\n    public ClientHttpResponse intercept(HttpRequest request, byte[] body, ClientHttpRequestExecution execution) throws IOException \n    {\n        Span span = tracer.currentSpan();\n        \n        HttpHeaders headers = new HttpHeaders();\n        headers.set(&quot;X-B3-Traceid&quot;, span.context().traceId());\n        headers.set(&quot;X-B3-SpanId&quot;, span.context().spanId());\n        headers.set(&quot;X-B3-ParentSpanId&quot;, span.context().parentId());\n        request.getHeaders().addAll(headers);\n        \n        ClientHttpResponse response = execution.execute(request, body);\n        return response;\n    }\n}\n</code></pre>\n<p>And In my controller class, I have autowired this interceptor. And using this interceptor for the resttemplate call.</p>\n<p>When I am comparing the MS1 and MS2 logs for this API call, the traceids are different.</p>\n<p>Can anyone help me what am I doing wrong here? And how can I achieve this traceid propagation to downstream service By Creating RestTemplate with New() keyword.</p>\n"},{"tags":["java","jboss","wildfly","xerces"],"comments":[{"owner":{"account_id":25189247,"reputation":25,"user_id":19029638,"display_name":"Qwerty"},"score":0,"creation_date":1660835429,"post_id":73399695,"comment_id":129632096,"body_markdown":"It is for tomcat.","body":"It is for tomcat."},{"owner":{"account_id":3509196,"reputation":16483,"user_id":2933977,"display_name":"stdunbar"},"score":0,"creation_date":1660835510,"post_id":73399695,"comment_id":129632139,"body_markdown":"You&#39;re correct and you have `xercesImpl.jar` already.  Retracted.","body":"You&#39;re correct and you have <code>xercesImpl.jar</code> already.  Retracted."},{"owner":{"account_id":51161,"reputation":17015,"user_id":152794,"display_name":"James R. Perkins"},"score":0,"creation_date":1660842507,"post_id":73399695,"comment_id":129634798,"body_markdown":"What version of WildFly are you using?","body":"What version of WildFly are you using?"},{"owner":{"account_id":25189247,"reputation":25,"user_id":19029638,"display_name":"Qwerty"},"score":0,"creation_date":1660883412,"post_id":73399695,"comment_id":129643499,"body_markdown":"@JamesR.Perkins Xerces version is 2.6.1\nJboos Module version 1.9.1\nWildFly version 17.0.1","body":"@JamesR.Perkins Xerces version is 2.6.1 Jboos Module version 1.9.1 WildFly version 17.0.1"}],"owner":{"account_id":25189247,"reputation":25,"user_id":19029638,"display_name":"Qwerty"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":636,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660883724,"creation_date":1660810956,"question_id":73399695,"body_markdown":"I&#39;m using WildFly and Jboss for API deployment.\r\nBelow code throwing exception when I&#39;m hitting one of the API.\r\n\r\n    System.setProperty(&quot;javax.xml.parsers.DocumentBuilderFactory&quot;, &quot;org.apache.xerces.jaxp.DocumentBuilderFactoryImpl&quot;);\r\n    // Here the exception is occurring\r\n    DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance(&quot;org.apache.xerces.jaxp.DocumentBuilderFactoryImpl&quot;, ClassLoader.getSystemClassLoader());\r\n    dbFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\r\n    dbFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\r\n\r\nException:\r\n\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\r\n    ERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\r\n    ERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.stream.XMLOutputFactory\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\r\n    ERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\r\n    ERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.parsers.SAXParserFactory\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.parsers.SAXParserFactory\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\r\n    ERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\r\n    ERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\r\n    ERROR [stderr] JAXP: Looking up system property &#39;javax.xml.xpath.XPathFactory:http://java.sun.com/jaxp/xpath/dom&#39;\r\n    ERROR [stderr] JAXP: The property is undefined.\r\n    ERROR [stderr] JAXP: found null in $java.home/conf/jaxp.properties\r\n    ERROR [stderr] JAXP: factory &#39;org.apache.xpath.jaxp.XPathFactoryImpl&#39; was found for http://java.sun.com/jaxp/xpath/dom\r\n    ERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\r\n    ERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\r\n    ERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\r\n    ERROR [stderr] (Exception Multicaster Thread15) com.blazesoft.server.base.NdServiceSessionException: Service session Id number 1.\r\n    ERROR [stderr] (Exception Multicaster Thread15) java.lang.ClassNotFoundException: org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\r\n                    SEVERE [com.sun.xml.ws.server.sei.EndpointMethodHandler] (default task-1) com.blazesoft.server.base.NdServiceSessionException: Service session Id number 1.\r\n                    Class &#39;org.apache.xerces.jaxp.DocumentBuilderFactoryImpl&#39; could not be found. Please verify it is on the classpath. while evaluating &quot;XYZ&quot; in function ABC\r\n                            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n                            at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n                            at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n                            at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n                            ...\r\n\r\nI have added a jars file in build.xml of ant build. So in my jar, I have below jars in the \\WEB-INF\\lib\\.\r\n\r\n    &lt;fileset id=&quot;required-jars&quot; dir=&quot;${product.lib}&quot;&gt;\r\n    \t&lt;include name=&quot;xerces.jar&quot;/&gt;\r\n    \t&lt;include name=&quot;resolver.jar&quot;/&gt;\r\n    \t&lt;include name=&quot;serializer.jar&quot;/&gt;\r\n    \t&lt;include name=&quot;xalan.jar&quot;/&gt;\r\n    \t&lt;include name=&quot;xercesImpl.jar&quot;/&gt;\r\n    \t&lt;include name=&quot;xml-apis.jar&quot;/&gt;\r\n    &lt;/fileset&gt;\r\n\r\nXerces version is 2.6.1 &lt;br&gt;\r\nJBoss Module version 1.9.1 &lt;br&gt;\r\nWildFly version 17.0.1","title":"Class &#39;org.apache.xerces.jaxp.DocumentBuilderFactoryImpl&#39; could not be found. Please verify it is on the classpath","body":"<p>I'm using WildFly and Jboss for API deployment.\nBelow code throwing exception when I'm hitting one of the API.</p>\n<pre><code>System.setProperty(&quot;javax.xml.parsers.DocumentBuilderFactory&quot;, &quot;org.apache.xerces.jaxp.DocumentBuilderFactoryImpl&quot;);\n// Here the exception is occurring\nDocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance(&quot;org.apache.xerces.jaxp.DocumentBuilderFactoryImpl&quot;, ClassLoader.getSystemClassLoader());\ndbFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\ndbFactory.setAttribute(XMLConstants.ACCESS_EXTERNAL_STYLESHEET, &quot;&quot;);\n</code></pre>\n<p>Exception:</p>\n<pre><code>ERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\nERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\nERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\nERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\nERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\nERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\nERROR [stderr] JAXP: find factoryId =javax.xml.stream.XMLOutputFactory\nERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\nERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\nERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\nERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\nERROR [stderr] JAXP: find factoryId =javax.xml.parsers.SAXParserFactory\nERROR [stderr] JAXP: find factoryId =javax.xml.parsers.SAXParserFactory\nERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\nERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\nERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\nERROR [stderr] JAXP: find factoryId =javax.xml.transform.TransformerFactory\nERROR [stderr] JAXP: Looking up system property 'javax.xml.xpath.XPathFactory:http://java.sun.com/jaxp/xpath/dom'\nERROR [stderr] JAXP: The property is undefined.\nERROR [stderr] JAXP: found null in $java.home/conf/jaxp.properties\nERROR [stderr] JAXP: factory 'org.apache.xpath.jaxp.XPathFactoryImpl' was found for http://java.sun.com/jaxp/xpath/dom\nERROR [stderr] JAXP: find factoryId =javax.xml.parsers.DocumentBuilderFactory\nERROR [stderr] JAXP: found system property, value=org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\nERROR [stderr] JAXP: created new instance of class org.apache.xerces.jaxp.DocumentBuilderFactoryImpl using ClassLoader: null\nERROR [stderr] (Exception Multicaster Thread15) com.blazesoft.server.base.NdServiceSessionException: Service session Id number 1.\nERROR [stderr] (Exception Multicaster Thread15) java.lang.ClassNotFoundException: org.apache.xerces.jaxp.DocumentBuilderFactoryImpl\n                SEVERE [com.sun.xml.ws.server.sei.EndpointMethodHandler] (default task-1) com.blazesoft.server.base.NdServiceSessionException: Service session Id number 1.\n                Class 'org.apache.xerces.jaxp.DocumentBuilderFactoryImpl' could not be found. Please verify it is on the classpath. while evaluating &quot;XYZ&quot; in function ABC\n                        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n                        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n                        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n                        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n                        ...\n</code></pre>\n<p>I have added a jars file in build.xml of ant build. So in my jar, I have below jars in the \\WEB-INF\\lib.</p>\n<pre><code>&lt;fileset id=&quot;required-jars&quot; dir=&quot;${product.lib}&quot;&gt;\n    &lt;include name=&quot;xerces.jar&quot;/&gt;\n    &lt;include name=&quot;resolver.jar&quot;/&gt;\n    &lt;include name=&quot;serializer.jar&quot;/&gt;\n    &lt;include name=&quot;xalan.jar&quot;/&gt;\n    &lt;include name=&quot;xercesImpl.jar&quot;/&gt;\n    &lt;include name=&quot;xml-apis.jar&quot;/&gt;\n&lt;/fileset&gt;\n</code></pre>\n<p>Xerces version is 2.6.1 <br>\nJBoss Module version 1.9.1 <br>\nWildFly version 17.0.1</p>\n"},{"tags":["java","option-type"],"comments":[{"owner":{"account_id":1118152,"reputation":1791,"user_id":1107013,"accept_rate":50,"display_name":"Gavin Haynes"},"score":0,"creation_date":1660876772,"post_id":73411314,"comment_id":129642645,"body_markdown":"You want to use `Optional.flatMap`. I think this function is not available in java 8 so you need to write some ugly code.","body":"You want to use <code>Optional.flatMap</code>. I think this function is not available in java 8 so you need to write some ugly code."},{"owner":{"account_id":1118152,"reputation":1791,"user_id":1107013,"accept_rate":50,"display_name":"Gavin Haynes"},"score":1,"creation_date":1660876861,"post_id":73411314,"comment_id":129642657,"body_markdown":"Actually, `Optional.map` will automaticall convert `null` to `Optional.empty` so you can use that","body":"Actually, <code>Optional.map</code> will automaticall convert <code>null</code> to <code>Optional.empty</code> so you can use that"}],"answers":[{"tags":[],"owner":{"account_id":1118152,"reputation":1791,"user_id":1107013,"accept_rate":50,"display_name":"Gavin Haynes"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660876938,"creation_date":1660876938,"answer_id":73411343,"question_id":73411314,"body_markdown":"This is probably what you want\r\n```\r\nOptional.ofNullable(emp).map(Employee::getName).ifPresent(System.out::println);\r\n```","title":"Java Optional check for object and its property","body":"<p>This is probably what you want</p>\n<pre><code>Optional.ofNullable(emp).map(Employee::getName).ifPresent(System.out::println);\n</code></pre>\n"}],"owner":{"account_id":325224,"reputation":34820,"user_id":646276,"accept_rate":61,"display_name":"Lolly"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":968,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660883326,"creation_date":1660876560,"question_id":73411314,"body_markdown":"I wanted to check if object is not null and its property is not null then call another function. I am trying to do this with Optional.\r\n\r\nEmployee is a class with a string property name. So I wanted to check if employee object is not null and name property in it is not null then call a method.\r\n\r\nI tried some thing like below, but is this right approach, please correct me.\r\n\r\n       //Employee emp; // comes from another function\r\n        Optional.ofNullable(emp).ifPresent(obj -&gt; Optional.ofNullable(obj.getName()).ifPresent(name -&gt;System.out.println(name)));","title":"Java Optional check for object and its property","body":"<p>I wanted to check if object is not null and its property is not null then call another function. I am trying to do this with Optional.</p>\n<p>Employee is a class with a string property name. So I wanted to check if employee object is not null and name property in it is not null then call a method.</p>\n<p>I tried some thing like below, but is this right approach, please correct me.</p>\n<pre><code>   //Employee emp; // comes from another function\n    Optional.ofNullable(emp).ifPresent(obj -&gt; Optional.ofNullable(obj.getName()).ifPresent(name -&gt;System.out.println(name)));\n</code></pre>\n"},{"tags":["java","linked-list","scope","null"],"comments":[{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1660878691,"post_id":73411466,"comment_id":129642920,"body_markdown":"Is `current` null or is `current.item` null? They are different things, and it might be an issue with the inner `item` variable not being set correctly somewhere. If you want more help please include the full error in your question, and include the relevant code in the question.","body":"Is <code>current</code> null or is <code>current.item</code> null? They are different things, and it might be an issue with the inner <code>item</code> variable not being set correctly somewhere. If you want more help please include the full error in your question, and include the relevant code in the question."},{"owner":{"account_id":20933783,"reputation":13,"user_id":15379465,"display_name":"rodew"},"score":0,"creation_date":1660878807,"post_id":73411466,"comment_id":129642938,"body_markdown":"`current` is null.\nI do not need the `current.item`, so I do not assign it to a variable.\nI am only using `MyLinkedList.first()` to iterate through the list to a certain node.","body":"<code>current</code> is null. I do not need the <code>current.item</code>, so I do not assign it to a variable. I am only using <code>MyLinkedList.first()</code> to iterate through the list to a certain node."},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1660878982,"post_id":73411466,"comment_id":129642961,"body_markdown":"The value of `current` is set to the non null value of `first`, it will not be null unless there is relevant code that you have not shown us. Please edit your question to show the error and the code as noted above.","body":"The value of <code>current</code> is set to the non null value of <code>first</code>, it will not be null unless there is relevant code that you have not shown us. Please edit your question to show the error and the code as noted above."},{"owner":{"account_id":20933783,"reputation":13,"user_id":15379465,"display_name":"rodew"},"score":0,"creation_date":1660879298,"post_id":73411466,"comment_id":129643012,"body_markdown":"The error is that `current` is only equal to the first item in the list inside the method call. As soon as `first()` returns to `Population`, `current` is null.\nThat is what I don&#39;t understand. There is no way that I know of that `current` can be equal to anything but what it was set to inside `first()` unless some other method changes it.\nI will include the surrounding code in the question.","body":"The error is that <code>current</code> is only equal to the first item in the list inside the method call. As soon as <code>first()</code> returns to <code>Population</code>, <code>current</code> is null. That is what I don&#39;t understand. There is no way that I know of that <code>current</code> can be equal to anything but what it was set to inside <code>first()</code> unless some other method changes it. I will include the surrounding code in the question."}],"answers":[{"tags":[],"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660883034,"creation_date":1660883034,"answer_id":73411814,"question_id":73411466,"body_markdown":"Let&#39;s add some debugging to your `nextGeneration()` method to see if current is null or not. We can do this with the following:\r\n\r\n\tSystem.out.println(&quot;Before: &quot;+population.current.toString());\r\n    population.first();\r\n\tSystem.out.println(&quot;After: &quot;+population.current.toString());\r\n\r\nAnd the results are:\r\n\r\n    Before: (&quot;&quot;, -50)\r\n    After: (&quot;&quot;, -50)\r\n\r\nAs we can see, `current` is not null, it is returning results both before and after calling `population.first();`. Instead your issue is that the values of `current` and `first` are never updated.\r\n\r\nYou have far too much code for any of us to sort through, so you will need to do some of your own debugging to work out why the values are not being updated.\r\n\r\nHint 1: Inside your `mutate()` method the statement `if (mutationSuccess() &amp; genes.first() != null) {` is NEVER true, so the following line in NEVER called `genes.addBefore(gene);` which may be one of the causes why `current` and `first` never change.\r\n\r\nHint 2: Find all locations in your code where a new Node is created and assigned to `first` or `current`, and check the values that are being inserted.","title":"MyLinkedList current node is only not-null within the structure. When method MyLinkedList.first() returns, current is reset to null","body":"<p>Let's add some debugging to your <code>nextGeneration()</code> method to see if current is null or not. We can do this with the following:</p>\n<pre><code>System.out.println(&quot;Before: &quot;+population.current.toString());\npopulation.first();\nSystem.out.println(&quot;After: &quot;+population.current.toString());\n</code></pre>\n<p>And the results are:</p>\n<pre><code>Before: (&quot;&quot;, -50)\nAfter: (&quot;&quot;, -50)\n</code></pre>\n<p>As we can see, <code>current</code> is not null, it is returning results both before and after calling <code>population.first();</code>. Instead your issue is that the values of <code>current</code> and <code>first</code> are never updated.</p>\n<p>You have far too much code for any of us to sort through, so you will need to do some of your own debugging to work out why the values are not being updated.</p>\n<p>Hint 1: Inside your <code>mutate()</code> method the statement <code>if (mutationSuccess() &amp; genes.first() != null) {</code> is NEVER true, so the following line in NEVER called <code>genes.addBefore(gene);</code> which may be one of the causes why <code>current</code> and <code>first</code> never change.</p>\n<p>Hint 2: Find all locations in your code where a new Node is created and assigned to <code>first</code> or <code>current</code>, and check the values that are being inserted.</p>\n"}],"owner":{"account_id":20933783,"reputation":13,"user_id":15379465,"display_name":"rodew"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":156,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660883034,"creation_date":1660878433,"question_id":73411466,"body_markdown":"I apologize in advance if I break any etiquette. I have never posted a question before.\r\nI was unable to find advice for my problem elsewhere online.\r\nI am writing an `EvolvingStrings` program in Java and I am running into issues when using `MyLinkedList.first()`. `Current` is set to the `first` node within the method call, but on return `current` is reset to null. The linked list is of a user defined type `Genome`.\r\nWhen running my test class `EvolutionTest.java`, my program runs infinitely because my Strings are never evolved, and therefore never reach their target. I have traced a bug to `Population.nextGeneration()`. Specifically, line 127 in the class `Population`.\r\nThe method should set population&#39;s current node to first. It does do this, however, only inside the method call. On return, current is reset to null.\r\nIf anyone has any advice as to the problem, I would greatly appreciate it.\r\n\r\nThis is my population class.\r\n```\r\n/**\r\n * FileName: Population.java\r\n * CreatedOn: August 17, 2022\r\n *\r\n * @author rodew\r\n * @version 1.0.081722\r\n */\r\n\r\n/**\r\n * A class that contains a list of Genomes\r\n * representing all the Strings in a virtual world.\r\n * In this world, all that exists are strings of\r\n * characters from the set: {A,B,C,D,E,F,G,H,I,J,\r\n * K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,&#39; &#39;,-,&#39;}\r\n * Strings in this world can reproduce new strings\r\n * and die if they are not fit enough.\r\n */\r\npublic class Population {\r\n\r\n    /**\r\n     * The number of genomes in the population.\r\n     * For this assignment, population size is 100.\r\n     */\r\n    protected final int SIZE;\r\n\r\n    /**\r\n     * The number of times nextGeneration\r\n     * has been called.\r\n     */\r\n    public int generation;\r\n\r\n    /**\r\n     * This stores the most fit genome, which\r\n     * is the genome with the highest fitness\r\n     * level.\r\n     */\r\n    public Genome mostFit;\r\n\r\n    /**\r\n     * This stores the Genomes in the population.\r\n     * The initial population of size SIZE is\r\n     * created in the constructor. The population\r\n     * is updated every time nextGeneration is\r\n     * called.\r\n     */\r\n    public MyLinkedList&lt;Genome&gt; population;\r\n\r\n    /**\r\n     * Default Constructor.\r\n     * Calls the main constructor with\r\n     * String &quot;FIRST MIDDLE LAST&quot; and\r\n     * integer 100.\r\n     */\r\n    public Population() {   this(&quot;FIRST MIDDLE LAST&quot;, 100);    }\r\n\r\n    /**\r\n     * Constructor.\r\n     * Initializes SIZE to populationSize.\r\n     * Initializes generation to zero.\r\n     * Initializes population to a linkedList with\r\n     * 100 baby (Empty) Genomes.\r\n     * Initializes Genome.Target to a linkedList\r\n     * consisting of the characters from the target\r\n     * String.\r\n     * Initializes mostFit to the first Genome in the\r\n     * population.\r\n     * @param target the target Genome for evolution.\r\n     * @param populationSize the number of Genomes in the\r\n     * population.\r\n     */\r\n    public Population(String target, int populationSize) {\r\n\r\n        SIZE = populationSize;\r\n        generation = 0;\r\n        population = new MyLinkedList&lt;&gt;();\r\n        Genome.target = createTarget(target);\r\n\r\n        for(int n = 0; n &lt; SIZE; n++) population.addToEnd(new Genome());\r\n\r\n        mostFit = population.first();\r\n\r\n    }\r\n\r\n    /**\r\n     * Creates a MyLinkedList from passed String.\r\n     * @param str the String from which the list is created.\r\n     * @return the target linkedList.\r\n     */\r\n    public MyLinkedList&lt;Character&gt; createTarget(String str) {\r\n\r\n        MyLinkedList&lt;Character&gt; target = new MyLinkedList&lt;&gt;();\r\n\r\n        for(int i = 0; i &lt; str.length(); i++) {\r\n\r\n            char ch = str.charAt(i);\r\n\r\n            target.addToEnd(ch);\r\n\r\n        }\r\n\r\n        return target;\r\n\r\n    }\r\n\r\n    /**\r\n     * Updates the population with the next\r\n     * generation. First, half the population\r\n     * with the lowest fitness levels are deleted.\r\n     * Second, new Genomes are created from the\r\n     * remaining population. There is equal chance\r\n     * that (1) a random remaining Genome will be\r\n     * cloned and the clone mutated or (2) a random\r\n     * remaining Genome will be cloned, the clone\r\n     * crossed with another Genome, and then finally\r\n     * mutated. Third, the population will be sorted\r\n     * by fitness level. Last, the mostFit Genome will\r\n     * be updated to the Genome with the highest fitness\r\n     * level.\r\n     */\r\n    public void nextGeneration() {\r\n\r\n        int select;\r\n        int half = SIZE / 2;\r\n        Genome adult;\r\n        Genome offspring;\r\n\r\n        population.first();\r\n\r\n        for(int i = 0; i &lt; half; i++) population.next();\r\n\r\n        while (population.current() != null) population.remove();\r\n\r\n        for(int n = 0; n &lt; half; n++) {\r\n\r\n            select = Genome.random() % half;\r\n            adult = population.first();\r\n\r\n            for (int i = 0; i &lt; select; i++) adult = population.next();\r\n\r\n            offspring = new Genome(adult);\r\n\r\n            if (Genome.random() % 2 == 0) {\r\n\r\n                select = Genome.random() % half;\r\n                adult = population.first();\r\n\r\n                for (int i = 0; i &lt; select; i++) adult = population.next();\r\n\r\n                offspring.crossover(adult);\r\n\r\n            }\r\n\r\n            offspring.mutate();\r\n            population.addToEnd(offspring);\r\n\r\n        }\r\n\r\n        population.sort(true);\r\n        generation++;\r\n\r\n        mostFit = population.first();\r\n\r\n    }\r\n\r\n    public String toString() {\r\n\r\n        StringBuilder str = new StringBuilder(&quot;[\\n&quot;);\r\n        Genome current = population.first();\r\n\r\n        while (current != null) {\r\n\r\n            str.append(current).append(&quot;\\n&quot;);\r\n\r\n            current = population.next();\r\n\r\n        }\r\n\r\n//        str = new StringBuilder(str.substring(0, str.length() - 2));\r\n\r\n\r\n        return str.append(&quot;]&quot;).toString();\r\n\r\n    }\r\n}\r\n\r\n```\r\nThis is my linked list class.\r\n```\r\n/**\r\n * FileName: MyLinkedList.java\r\n * CreatedOn: July 8, 2022\r\n * @author rodew\r\n * @version 4.0.081722\r\n */\r\n\r\n/**\r\n * Processes a generic list of elements by implementing a Linked List.\r\n */\r\n@SuppressWarnings(&quot;unused&quot;)\r\npublic class MyLinkedList&lt;Type extends Comparable&lt;Type&gt;&gt; {\r\n    /**\r\n     * A reference to the first node in the list.\r\n     * Is null if the list is empty.\r\n     */\r\n    protected Node first;\r\n\r\n    /**\r\n     * A reference to the last node in the list.\r\n     * Is null if the list is empty.\r\n     */\r\n    protected Node last;\r\n\r\n    /**\r\n     * A reference to the current node in the list.\r\n     * Initialized to null.\r\n     * When this node is null, the current node has fallen off the end of the list.\r\n     */\r\n    protected Node current;\r\n\r\n    /**\r\n     * A reference to the previous node in the list.\r\n     * Is null if current is equal to first.\r\n     */\r\n    protected Node previous;\r\n\r\n    /**\r\n     * The number of elements stored in the list.\r\n     */\r\n    protected int size;\r\n\r\n    /**\r\n     * The total number of comparisons made with the list.\r\n     */\r\n    public long comparisons;\r\n\r\n    /**\r\n     * Default constructor.\r\n     * Initializes first, current, and previous to null.\r\n     * Initializes size to zero.\r\n     * Initializes comparisons to zero.\r\n     */\r\n    public MyLinkedList() {\r\n\r\n        first       = null;\r\n        last        = null;\r\n        current     = null;\r\n        previous    = null;\r\n        size        = 0;\r\n        comparisons = 0;\r\n\r\n    }\r\n\r\n    /**\r\n     * Inserts the passed item before the current node.\r\n     * Runtime: O(1).\r\n     * @param item the element to be inserted.\r\n     */\r\n    public void addBefore(Type item) {\r\n\r\n        // Try to get two cases\r\n        // 1: previous != null\r\n        // else\r\n        if (first == null) {            //  Case is only true once\r\n\r\n            first       = new Node(item, current);\r\n            last        = first;\r\n            previous    = first;\r\n\r\n        } else if (current == first) {\r\n\r\n            first       = new Node(item, current);\r\n\r\n        } else if (current == null) {\r\n\r\n            last.next = new Node(item, null);\r\n            last = last.next;\r\n            previous = last;\r\n\r\n        } else {\r\n\r\n            Node temp   = previous;\r\n\r\n            previous    = new Node(item, current);\r\n            temp.next   = previous;\r\n\r\n        }\r\n\r\n        size++;\r\n\r\n    }\r\n\r\n    /**\r\n     * Inserts the passed item after the current node.\r\n     * Does nothing if the current node is null.\r\n     * Runtime: O(1).\r\n     * @param item the element to be inserted.\r\n     */\r\n    public void addAfter(Type item) {\r\n\r\n        if (current == null) return;\r\n\r\n        current.next    = new Node(item, current.next);\r\n\r\n        if (current == last) last = current.next;\r\n\r\n        size++;\r\n\r\n    }\r\n\r\n    /**\r\n     * Adds the item to the front of the list.\r\n     * Runtime: O(1)\r\n     * @param item the element to be added to the front of the list.\r\n     */\r\n    public void addToFront(Type item) {\r\n\r\n        if (first == null || current == first) {\r\n\r\n            first = new Node(item, first);\r\n            last = first;\r\n            previous = first;\r\n\r\n        } else first = new Node(item, first);\r\n\r\n        size++;\r\n    }\r\n\r\n    /**\r\n     * Adds the item to the end of the list.\r\n     * Runtime: O(1)\r\n     * @param item the element to be added to the end of the list.\r\n     */\r\n    public void addToEnd(Type item) {\r\n\r\n        if (first == null) {\r\n\r\n            first = new Node(item, null);\r\n            last = first;\r\n            previous = first;\r\n\r\n        } else {\r\n\r\n            last.next = new Node(item, null);\r\n            last = last.next;\r\n\r\n            if (current == null) previous = last;\r\n\r\n        }\r\n\r\n        size++;\r\n    }\r\n\r\n    /**\r\n     * Returns the item stored in the current node.\r\n     * Returns null if the current node is null.\r\n     * Runtime: O(1).\r\n     * @return the item in the current node.\r\n     */\r\n    public Type current() {\r\n\r\n        if (current == null) { return null; }\r\n\r\n        return current.item;\r\n\r\n    }\r\n\r\n    /**\r\n     * Sets the current node to be the first node.\r\n     * Returns null if the first node is null.\r\n     * Runtime: O(1).\r\n     * @return the item stored in the current node after the update.\r\n     */\r\n    public Type first() {\r\n\r\n        if (first == null) { return null; }\r\n\r\n        current = first;\r\n        previous = null;\r\n\r\n        return current.item;\r\n\r\n    }\r\n\r\n    /**\r\n     * Sets the previous node to be the current node and then sets the current node\r\n     * to be the next node in the list.\r\n     * Returns null if the current node is null.\r\n     * Runtime: O(1).\r\n     * @return the item stored in the current node after the update.\r\n     */\r\n    public Type next() {\r\n\r\n        if (current == null) { return null; }\r\n\r\n        previous    = current;\r\n        current     = current.next;\r\n\r\n        if (current == null) { return null; }\r\n\r\n        return current.item;\r\n\r\n    }\r\n\r\n    /**\r\n     * Removes the current node.\r\n     * If current is null, does nothing but return null.\r\n     * Runtime: O(1).\r\n     * @return the item removed.\r\n     */\r\n    public Type remove() {\r\n\r\n        if (current == null) return null;\r\n\r\n        Node temp       = current;\r\n\r\n        if (current == first) {\r\n\r\n            first = first.next;\r\n\r\n        } else {\r\n\r\n            previous.next   = current.next;\r\n\r\n        }\r\n\r\n        if (current == last) last = previous;\r\n\r\n        current         = current.next;\r\n        size--;\r\n\r\n        return temp.item;\r\n\r\n    }\r\n\r\n    /**\r\n     * Backwards compatible (Ascending) Bubble Sort.\r\n     * Calls sort(descending) by passing\r\n     * false value as boolean.\r\n     * Runtime: 0(n^2)\r\n     */\r\n    public void sort() {    sort(false);    }\r\n\r\n    /**\r\n     * Bubble Sort Algorithm.\r\n     * Allows sorting the list in\r\n     * ascending or descending order.\r\n     * Runtime: O(n^2)\r\n     * @param descending if true, sort order is descending;\r\n     * otherwise, sort order is ascending.\r\n     */\r\n    public void sort(boolean descending) {\r\n\r\n        Node current = first;\r\n\r\n        while (current != null ) {\r\n\r\n            Node next = current.next;\r\n\r\n            while(next != null ) {\r\n\r\n                if (descending) {\r\n\r\n                    if (current.item.compareTo(next.item) &lt; 0) {\r\n\r\n                        Type temp = current.item;\r\n\r\n                        current.item = next.item;\r\n                        next.item = temp;\r\n\r\n                    }\r\n\r\n                } else {\r\n\r\n                    if (current.item.compareTo(next.item) &gt; 0) {\r\n\r\n                        Type temp = current.item;\r\n\r\n                        current.item = next.item;\r\n                        next.item = temp;\r\n\r\n                    }\r\n                }\r\n\r\n                next = next.next;\r\n\r\n            }\r\n\r\n            current = current.next;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Moves the current node to the front of the list.\r\n     * Runtime: O(1)\r\n     * @return the item inside the node moved.\r\n     */\r\n    public Type moveToFront() {\r\n\r\n        if (current == null) return null;\r\n\r\n        addToFront(remove());\r\n\r\n        current = first;\r\n\r\n        return current.item;\r\n\r\n    }\r\n\r\n    /**\r\n     * Swaps the current node with the previous node.\r\n     * Runtime: O(1)\r\n     * @return the item swapped closer to the front of the list.\r\n     */\r\n    public Type swap() {\r\n\r\n        if (current == null) return null;\r\n        else if (current == first) return current.item;\r\n\r\n        Type temp = current.item;\r\n        current.item = previous.item;\r\n        previous.item = temp;\r\n\r\n        return temp;\r\n\r\n    }\r\n\r\n    /**\r\n     * Searches the nodes for the passed item.\r\n     * Runtime: O(n).\r\n     * @param item the element to be searched for.\r\n     * @return true if item is found, false otherwise.\r\n     */\r\n    public boolean contains(Type item) {\r\n\r\n        Node temp       = first;\r\n\r\n        while (temp != null) {\r\n\r\n            comparisons++;\r\n\r\n            if (temp.item.compareTo(item) == 0) { return true; }\r\n\r\n            temp = temp.next;\r\n\r\n        }\r\n\r\n        return false;\r\n\r\n    }\r\n\r\n    /**\r\n     * Returns the number of elements in the list.\r\n     * Runtime: O(1).\r\n     * @return the number of elements in the list.\r\n     */\r\n    public int size() { return size; }\r\n\r\n    /**\r\n     * Returns true if size is zero.\r\n     * Runtime: O(1).\r\n     * @return true if size is zero, false otherwise.\r\n     */\r\n    public boolean isEmpty() { return size == 0; }\r\n\r\n    /**\r\n     * Displays the contents of the list.\r\n     * Runtime: O(n).\r\n     * @return the string representation of the list of items.\r\n     */\r\n    public String toString() {\r\n\r\n        if (isEmpty()) { return &quot;[]&quot;; }         // Only true in one situation\r\n\r\n        Node temp       = first;\r\n\r\n        StringBuilder listString = new StringBuilder(&quot;[&quot; + temp.toString());\r\n\r\n        for (int i = 1; i &lt; size; i++) {        // while loops are usually more efficient\r\n\r\n            temp = temp.next;\r\n\r\n            listString.append(&quot;, &quot;).append(temp.toString());\r\n\r\n        }\r\n\r\n        listString.append(&quot;]&quot;);\r\n\r\n        return listString.toString();\r\n\r\n    }\r\n\r\n    protected class Node {\r\n\r\n        /**\r\n         * The item stored in this node.\r\n         */\r\n        Type item;\r\n\r\n        /**\r\n         * A reference to the next node in the list.\r\n         * Is null if there is no next node.\r\n         */\r\n        Node next;\r\n\r\n        /**\r\n         * Default Constructor.\r\n         * Instantiates item to the passed element.\r\n         * Instantiates the next node reference to the passed node.\r\n         * @param item the element to be stored.\r\n         * @param next the reference to the next node in the list.\r\n         */\r\n        public Node(Type item, Node next) {\r\n\r\n            this.item = item;\r\n            this.next = next;\r\n\r\n        }\r\n\r\n        /**\r\n         * Returns the toString of item.\r\n         * @return the toString of item.\r\n         */\r\n        public String toString() {\r\n\r\n            return item.toString();\r\n\r\n        }\r\n    }\r\n}\r\n\r\n```\r\nThis is my Genome class\r\n```\r\n/**\r\n * FileName: Genome.java\r\n * CreatedOn: August 17, 2022\r\n *\r\n * @author rodew\r\n * @version 1.0.081722\r\n */\r\n\r\n/**\r\n * A class that contains a list of characters\r\n * representing a String in a virtual world.\r\n * In this world, all that exists are strings of\r\n * characters from the set: {A,B,C,D,E,F,G,H,I,J,\r\n * K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,&#39; &#39;,-,&#39;}\r\n * Strings in this world can reproduce new strings\r\n * and die if they are not fit enough.\r\n */\r\npublic class Genome implements Comparable&lt;Genome&gt;{\r\n\r\n    /**\r\n     * Seed for random().\r\n     */\r\n    protected static Integer seed = 2067734636;\r\n\r\n    /**\r\n     * A list of characters representing the string\r\n     * encoded by the genome.\r\n     */\r\n    protected MyLinkedList&lt;Character&gt; genes;\r\n\r\n    /**\r\n     * The population&#39;s mutation rate.\r\n     * Accurate only to two decimal places.\r\n     * Default: 5% chance of mutation.\r\n     */\r\n    protected static double mutationRate = 0.05;\r\n\r\n    /**\r\n     * The target string.\r\n     */\r\n    protected static MyLinkedList&lt;Character&gt; target = new MyLinkedList&lt;&gt;();\r\n\r\n    /**\r\n     * The set of characters all strings are made from.\r\n     */\r\n    protected static final MyLinkedList&lt;Character&gt; genePool = getDNA();\r\n\r\n    /**\r\n     * Constructor\r\n     * Initializes genes to an empty list.\r\n     */\r\n    public Genome() {   genes = new MyLinkedList&lt;&gt;();       }\r\n\r\n    /**\r\n     * Copy constructor.\r\n     * Initializes genes to the passed genome&#39;s genes.\r\n     * @param genome the list of characters to be copied.\r\n     */\r\n    public Genome(Genome genome) {  genes = genome.genes;       }\r\n\r\n    /**\r\n     * My random number generator.\r\n     * @return a random 32 bit integer.\r\n     */\r\n    protected static int random() {\r\n\r\n        int a = 923743637;\r\n        int b = 3;\r\n        long c = (long) Math.pow(2, 48);\r\n\r\n        seed = (int) ((a * seed + b) % c);\r\n\r\n        return seed;\r\n    }\r\n\r\n    /**\r\n     * Initializes the genePool with characters:\r\n     * {A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,\r\n     * U,V,W,X,Y,Z,&#39; &#39;,-,&#39;}\r\n     * @return the genePool\r\n     */\r\n    protected static MyLinkedList&lt;Character&gt; getDNA() {\r\n\r\n        MyLinkedList&lt;Character&gt; characters = new MyLinkedList&lt;&gt;();\r\n        int index = 65;\r\n\r\n        while (index &lt; 91) characters.addToEnd((char) index++);       // Characters &#39;A&#39;-&#39;Z&#39;\r\n\r\n        characters.addToEnd((char) 32);         //  &#39; &#39; character\r\n        characters.addToEnd((char) 45);         //  &#39;-&#39; character\r\n        characters.addToEnd((char) 39);         //  &#39;&#39;&#39; character\r\n\r\n        return characters;\r\n    }\r\n\r\n    /**\r\n     * Mutation chance simulator.\r\n     * @return true if successful; false otherwise.\r\n     */\r\n    protected static boolean mutationSuccess() {\r\n\r\n        double threshold = mutationRate * 100;\r\n\r\n        return (random() % 100) &lt;= threshold;\r\n\r\n    }\r\n\r\n    /**\r\n     * Mutates the genes.\r\n     * With mutationRate chance, add a randomly selected\r\n     * character to a randomly selected position in genes.\r\n     * With mutationRate chance, delete a single character\r\n     * from a randomly selected position in genes; only\r\n     * if genes.size() &gt;= 1.\r\n     * Each character in genes, with mutationRate chance\r\n     * is replaced by a random character.\r\n     */\r\n    public void mutate() {\r\n\r\n        int select;\r\n        char gene;\r\n\r\n        if (mutationSuccess() &amp; genes.first() != null) {\r\n\r\n            select = random() % 29;\r\n            gene = genePool.first();\r\n\r\n            genes.first();\r\n\r\n            for (int i = 0; i &lt; select; i++) gene = genePool.next();\r\n\r\n            select = random() % genes.size();\r\n\r\n            for (int i = 0; i &lt; select; i++) genes.next();\r\n\r\n            genes.remove();\r\n            genes.addBefore(gene);\r\n\r\n        }\r\n\r\n        if (mutationSuccess() &amp; genes.first() != null) {\r\n\r\n            select = random() % genes.size();\r\n\r\n            for (int i = 0; i &lt; select; i++) genes.next();\r\n\r\n            genes.remove();\r\n\r\n        }\r\n\r\n        genes.first();\r\n\r\n        while (genes.current() != null) {\r\n\r\n            if(mutationSuccess()) {\r\n\r\n                genes.remove();\r\n\r\n                select = random() % 29;\r\n                gene = genePool.first();\r\n\r\n                for (int i = 0; i &lt; select; i++) gene = genePool.next();\r\n\r\n                genes.addBefore(gene);\r\n\r\n            } else genes.next();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * This updates genes by crossing it with the passed genome.\r\n     * The new genes list is created by randomly selecting one\r\n     * of the parent genomes and adding that character to the\r\n     * new genes list; if the position does not exist in the\r\n     * parent, the new list will end at that position.\r\n     * @param parent the genome to be crossed with.\r\n     */\r\n    public void crossover(Genome parent) {\r\n\r\n        MyLinkedList&lt;Character&gt; child = new MyLinkedList&lt;&gt;();\r\n        Character mother = genes.first();\r\n        Character father = parent.genes.first();\r\n\r\n        while (mother != null) {\r\n\r\n            if (random() % 2 == 0) child.addToEnd(mother);\r\n\r\n            else if (father != null) child.addToEnd(father);\r\n\r\n            else break;\r\n\r\n            mother = genes.next();\r\n            father = parent.genes.next();\r\n\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * Returns the fitness level of the genome using\r\n     * the following formula: -(l + d), where l is the\r\n     * difference in length between the target and the\r\n     * genes and d is the number of characters that\r\n     * are incorrect.\r\n     * @return the fitness level.\r\n     */\r\n    public int fitness() {\r\n\r\n        int d = 25;\r\n        int l = target.size() - genes.size();\r\n\r\n        Character self = genes.first();\r\n        Character other = target.first();\r\n\r\n        while (self != null &amp; other != null) {\r\n\r\n            if (self.compareTo(other) == 0) d--;\r\n\r\n            self = genes.next();\r\n            other = target.next();\r\n\r\n        }\r\n\r\n        while (self != null) {\r\n\r\n            d++;\r\n            self = genes.next();\r\n\r\n        }\r\n\r\n       return -(l + d);\r\n    }\r\n\r\n    /**\r\n     * Compares the fitness level of the genome with\r\n     * the fitness level of the other genome.\r\n     * @param other the genome to be compared with.\r\n     * @return a negative integer, zero, or a positive\r\n     * integer as this genome&#39;s fitness level is less\r\n     * than, equal to, or greater than the specified\r\n     * genome&#39;s fitness level.\r\n     */\r\n    public int compareTo(Genome other) {    return this.fitness() - other.fitness();        }\r\n\r\n    /**\r\n     * Displays the genome and its fitness level\r\n     * in this format: (&quot;genes&quot;, fitness)\r\n     * @return the string format of the genome.\r\n     */\r\n    public String toString() {\r\n\r\n        if (genes.isEmpty()) return &quot;(\\&quot;\\&quot;, -50)&quot;;\r\n\r\n        StringBuilder string = new StringBuilder(&quot;(&quot;);\r\n        String genome = genes.toString();\r\n\r\n        genome = genome.replace(&#39;[&#39;, &#39;&quot;&#39;);\r\n        genome = genome.replace(&#39;]&#39;, &#39;&quot;&#39;);\r\n        genome = genome.replaceAll(&quot;,&quot;, &quot;&quot;);\r\n\r\n        string.append(genome).append(&quot;, &quot;).append(this.fitness()).append(&#39;)&#39;);\r\n\r\n        return string.toString();\r\n\r\n    }\r\n}\r\n```\r\nThis is the test class.\r\n```\r\n/**\r\n * FileName: EvolutionTest.java\r\n * CreatedOn: August 18, 2022\r\n *\r\n * @author rodew\r\n * @version 1.0.081822\r\n */\r\n\r\nimport org.junit.Test;\r\n/**\r\n * JUnit test for my Population and Genome Classes\r\n */\r\npublic class EvolutionTest {\r\n\r\n    @Test\r\n    public final void construct() {\r\n\r\n        System.out.println(&quot;Strings are now evolving...&quot;);\r\n\r\n        long delta, startTime = System.currentTimeMillis();\r\n\r\n        Population pop = new Population(&quot;FIRST MIDDLE LAST&quot;, 100);\r\n\r\n        while(pop.mostFit.fitness() &lt; 0) {\r\n\r\n            System.out.print(&quot;... Generation &quot; + pop.generation + &quot; &quot;);\r\n            System.out.println(pop.mostFit);\r\n\r\n            pop.nextGeneration();\r\n\r\n        }\r\n\r\n        delta = System.currentTimeMillis() - startTime;\r\n\r\n        System.out.println(&quot;Evolution took &quot; + delta + &quot; milliseconds.&quot;);\r\n        System.out.println();\r\n    }\r\n}\r\n\r\n```\r\n\r\nMy code is on gitHub: https://github.com/rodew374/EvolvingStrings.\r\n\r\n","title":"MyLinkedList current node is only not-null within the structure. When method MyLinkedList.first() returns, current is reset to null","body":"<p>I apologize in advance if I break any etiquette. I have never posted a question before.\nI was unable to find advice for my problem elsewhere online.\nI am writing an <code>EvolvingStrings</code> program in Java and I am running into issues when using <code>MyLinkedList.first()</code>. <code>Current</code> is set to the <code>first</code> node within the method call, but on return <code>current</code> is reset to null. The linked list is of a user defined type <code>Genome</code>.\nWhen running my test class <code>EvolutionTest.java</code>, my program runs infinitely because my Strings are never evolved, and therefore never reach their target. I have traced a bug to <code>Population.nextGeneration()</code>. Specifically, line 127 in the class <code>Population</code>.\nThe method should set population's current node to first. It does do this, however, only inside the method call. On return, current is reset to null.\nIf anyone has any advice as to the problem, I would greatly appreciate it.</p>\n<p>This is my population class.</p>\n<pre><code>/**\n * FileName: Population.java\n * CreatedOn: August 17, 2022\n *\n * @author rodew\n * @version 1.0.081722\n */\n\n/**\n * A class that contains a list of Genomes\n * representing all the Strings in a virtual world.\n * In this world, all that exists are strings of\n * characters from the set: {A,B,C,D,E,F,G,H,I,J,\n * K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,' ',-,'}\n * Strings in this world can reproduce new strings\n * and die if they are not fit enough.\n */\npublic class Population {\n\n    /**\n     * The number of genomes in the population.\n     * For this assignment, population size is 100.\n     */\n    protected final int SIZE;\n\n    /**\n     * The number of times nextGeneration\n     * has been called.\n     */\n    public int generation;\n\n    /**\n     * This stores the most fit genome, which\n     * is the genome with the highest fitness\n     * level.\n     */\n    public Genome mostFit;\n\n    /**\n     * This stores the Genomes in the population.\n     * The initial population of size SIZE is\n     * created in the constructor. The population\n     * is updated every time nextGeneration is\n     * called.\n     */\n    public MyLinkedList&lt;Genome&gt; population;\n\n    /**\n     * Default Constructor.\n     * Calls the main constructor with\n     * String &quot;FIRST MIDDLE LAST&quot; and\n     * integer 100.\n     */\n    public Population() {   this(&quot;FIRST MIDDLE LAST&quot;, 100);    }\n\n    /**\n     * Constructor.\n     * Initializes SIZE to populationSize.\n     * Initializes generation to zero.\n     * Initializes population to a linkedList with\n     * 100 baby (Empty) Genomes.\n     * Initializes Genome.Target to a linkedList\n     * consisting of the characters from the target\n     * String.\n     * Initializes mostFit to the first Genome in the\n     * population.\n     * @param target the target Genome for evolution.\n     * @param populationSize the number of Genomes in the\n     * population.\n     */\n    public Population(String target, int populationSize) {\n\n        SIZE = populationSize;\n        generation = 0;\n        population = new MyLinkedList&lt;&gt;();\n        Genome.target = createTarget(target);\n\n        for(int n = 0; n &lt; SIZE; n++) population.addToEnd(new Genome());\n\n        mostFit = population.first();\n\n    }\n\n    /**\n     * Creates a MyLinkedList from passed String.\n     * @param str the String from which the list is created.\n     * @return the target linkedList.\n     */\n    public MyLinkedList&lt;Character&gt; createTarget(String str) {\n\n        MyLinkedList&lt;Character&gt; target = new MyLinkedList&lt;&gt;();\n\n        for(int i = 0; i &lt; str.length(); i++) {\n\n            char ch = str.charAt(i);\n\n            target.addToEnd(ch);\n\n        }\n\n        return target;\n\n    }\n\n    /**\n     * Updates the population with the next\n     * generation. First, half the population\n     * with the lowest fitness levels are deleted.\n     * Second, new Genomes are created from the\n     * remaining population. There is equal chance\n     * that (1) a random remaining Genome will be\n     * cloned and the clone mutated or (2) a random\n     * remaining Genome will be cloned, the clone\n     * crossed with another Genome, and then finally\n     * mutated. Third, the population will be sorted\n     * by fitness level. Last, the mostFit Genome will\n     * be updated to the Genome with the highest fitness\n     * level.\n     */\n    public void nextGeneration() {\n\n        int select;\n        int half = SIZE / 2;\n        Genome adult;\n        Genome offspring;\n\n        population.first();\n\n        for(int i = 0; i &lt; half; i++) population.next();\n\n        while (population.current() != null) population.remove();\n\n        for(int n = 0; n &lt; half; n++) {\n\n            select = Genome.random() % half;\n            adult = population.first();\n\n            for (int i = 0; i &lt; select; i++) adult = population.next();\n\n            offspring = new Genome(adult);\n\n            if (Genome.random() % 2 == 0) {\n\n                select = Genome.random() % half;\n                adult = population.first();\n\n                for (int i = 0; i &lt; select; i++) adult = population.next();\n\n                offspring.crossover(adult);\n\n            }\n\n            offspring.mutate();\n            population.addToEnd(offspring);\n\n        }\n\n        population.sort(true);\n        generation++;\n\n        mostFit = population.first();\n\n    }\n\n    public String toString() {\n\n        StringBuilder str = new StringBuilder(&quot;[\\n&quot;);\n        Genome current = population.first();\n\n        while (current != null) {\n\n            str.append(current).append(&quot;\\n&quot;);\n\n            current = population.next();\n\n        }\n\n//        str = new StringBuilder(str.substring(0, str.length() - 2));\n\n\n        return str.append(&quot;]&quot;).toString();\n\n    }\n}\n\n</code></pre>\n<p>This is my linked list class.</p>\n<pre><code>/**\n * FileName: MyLinkedList.java\n * CreatedOn: July 8, 2022\n * @author rodew\n * @version 4.0.081722\n */\n\n/**\n * Processes a generic list of elements by implementing a Linked List.\n */\n@SuppressWarnings(&quot;unused&quot;)\npublic class MyLinkedList&lt;Type extends Comparable&lt;Type&gt;&gt; {\n    /**\n     * A reference to the first node in the list.\n     * Is null if the list is empty.\n     */\n    protected Node first;\n\n    /**\n     * A reference to the last node in the list.\n     * Is null if the list is empty.\n     */\n    protected Node last;\n\n    /**\n     * A reference to the current node in the list.\n     * Initialized to null.\n     * When this node is null, the current node has fallen off the end of the list.\n     */\n    protected Node current;\n\n    /**\n     * A reference to the previous node in the list.\n     * Is null if current is equal to first.\n     */\n    protected Node previous;\n\n    /**\n     * The number of elements stored in the list.\n     */\n    protected int size;\n\n    /**\n     * The total number of comparisons made with the list.\n     */\n    public long comparisons;\n\n    /**\n     * Default constructor.\n     * Initializes first, current, and previous to null.\n     * Initializes size to zero.\n     * Initializes comparisons to zero.\n     */\n    public MyLinkedList() {\n\n        first       = null;\n        last        = null;\n        current     = null;\n        previous    = null;\n        size        = 0;\n        comparisons = 0;\n\n    }\n\n    /**\n     * Inserts the passed item before the current node.\n     * Runtime: O(1).\n     * @param item the element to be inserted.\n     */\n    public void addBefore(Type item) {\n\n        // Try to get two cases\n        // 1: previous != null\n        // else\n        if (first == null) {            //  Case is only true once\n\n            first       = new Node(item, current);\n            last        = first;\n            previous    = first;\n\n        } else if (current == first) {\n\n            first       = new Node(item, current);\n\n        } else if (current == null) {\n\n            last.next = new Node(item, null);\n            last = last.next;\n            previous = last;\n\n        } else {\n\n            Node temp   = previous;\n\n            previous    = new Node(item, current);\n            temp.next   = previous;\n\n        }\n\n        size++;\n\n    }\n\n    /**\n     * Inserts the passed item after the current node.\n     * Does nothing if the current node is null.\n     * Runtime: O(1).\n     * @param item the element to be inserted.\n     */\n    public void addAfter(Type item) {\n\n        if (current == null) return;\n\n        current.next    = new Node(item, current.next);\n\n        if (current == last) last = current.next;\n\n        size++;\n\n    }\n\n    /**\n     * Adds the item to the front of the list.\n     * Runtime: O(1)\n     * @param item the element to be added to the front of the list.\n     */\n    public void addToFront(Type item) {\n\n        if (first == null || current == first) {\n\n            first = new Node(item, first);\n            last = first;\n            previous = first;\n\n        } else first = new Node(item, first);\n\n        size++;\n    }\n\n    /**\n     * Adds the item to the end of the list.\n     * Runtime: O(1)\n     * @param item the element to be added to the end of the list.\n     */\n    public void addToEnd(Type item) {\n\n        if (first == null) {\n\n            first = new Node(item, null);\n            last = first;\n            previous = first;\n\n        } else {\n\n            last.next = new Node(item, null);\n            last = last.next;\n\n            if (current == null) previous = last;\n\n        }\n\n        size++;\n    }\n\n    /**\n     * Returns the item stored in the current node.\n     * Returns null if the current node is null.\n     * Runtime: O(1).\n     * @return the item in the current node.\n     */\n    public Type current() {\n\n        if (current == null) { return null; }\n\n        return current.item;\n\n    }\n\n    /**\n     * Sets the current node to be the first node.\n     * Returns null if the first node is null.\n     * Runtime: O(1).\n     * @return the item stored in the current node after the update.\n     */\n    public Type first() {\n\n        if (first == null) { return null; }\n\n        current = first;\n        previous = null;\n\n        return current.item;\n\n    }\n\n    /**\n     * Sets the previous node to be the current node and then sets the current node\n     * to be the next node in the list.\n     * Returns null if the current node is null.\n     * Runtime: O(1).\n     * @return the item stored in the current node after the update.\n     */\n    public Type next() {\n\n        if (current == null) { return null; }\n\n        previous    = current;\n        current     = current.next;\n\n        if (current == null) { return null; }\n\n        return current.item;\n\n    }\n\n    /**\n     * Removes the current node.\n     * If current is null, does nothing but return null.\n     * Runtime: O(1).\n     * @return the item removed.\n     */\n    public Type remove() {\n\n        if (current == null) return null;\n\n        Node temp       = current;\n\n        if (current == first) {\n\n            first = first.next;\n\n        } else {\n\n            previous.next   = current.next;\n\n        }\n\n        if (current == last) last = previous;\n\n        current         = current.next;\n        size--;\n\n        return temp.item;\n\n    }\n\n    /**\n     * Backwards compatible (Ascending) Bubble Sort.\n     * Calls sort(descending) by passing\n     * false value as boolean.\n     * Runtime: 0(n^2)\n     */\n    public void sort() {    sort(false);    }\n\n    /**\n     * Bubble Sort Algorithm.\n     * Allows sorting the list in\n     * ascending or descending order.\n     * Runtime: O(n^2)\n     * @param descending if true, sort order is descending;\n     * otherwise, sort order is ascending.\n     */\n    public void sort(boolean descending) {\n\n        Node current = first;\n\n        while (current != null ) {\n\n            Node next = current.next;\n\n            while(next != null ) {\n\n                if (descending) {\n\n                    if (current.item.compareTo(next.item) &lt; 0) {\n\n                        Type temp = current.item;\n\n                        current.item = next.item;\n                        next.item = temp;\n\n                    }\n\n                } else {\n\n                    if (current.item.compareTo(next.item) &gt; 0) {\n\n                        Type temp = current.item;\n\n                        current.item = next.item;\n                        next.item = temp;\n\n                    }\n                }\n\n                next = next.next;\n\n            }\n\n            current = current.next;\n        }\n    }\n\n    /**\n     * Moves the current node to the front of the list.\n     * Runtime: O(1)\n     * @return the item inside the node moved.\n     */\n    public Type moveToFront() {\n\n        if (current == null) return null;\n\n        addToFront(remove());\n\n        current = first;\n\n        return current.item;\n\n    }\n\n    /**\n     * Swaps the current node with the previous node.\n     * Runtime: O(1)\n     * @return the item swapped closer to the front of the list.\n     */\n    public Type swap() {\n\n        if (current == null) return null;\n        else if (current == first) return current.item;\n\n        Type temp = current.item;\n        current.item = previous.item;\n        previous.item = temp;\n\n        return temp;\n\n    }\n\n    /**\n     * Searches the nodes for the passed item.\n     * Runtime: O(n).\n     * @param item the element to be searched for.\n     * @return true if item is found, false otherwise.\n     */\n    public boolean contains(Type item) {\n\n        Node temp       = first;\n\n        while (temp != null) {\n\n            comparisons++;\n\n            if (temp.item.compareTo(item) == 0) { return true; }\n\n            temp = temp.next;\n\n        }\n\n        return false;\n\n    }\n\n    /**\n     * Returns the number of elements in the list.\n     * Runtime: O(1).\n     * @return the number of elements in the list.\n     */\n    public int size() { return size; }\n\n    /**\n     * Returns true if size is zero.\n     * Runtime: O(1).\n     * @return true if size is zero, false otherwise.\n     */\n    public boolean isEmpty() { return size == 0; }\n\n    /**\n     * Displays the contents of the list.\n     * Runtime: O(n).\n     * @return the string representation of the list of items.\n     */\n    public String toString() {\n\n        if (isEmpty()) { return &quot;[]&quot;; }         // Only true in one situation\n\n        Node temp       = first;\n\n        StringBuilder listString = new StringBuilder(&quot;[&quot; + temp.toString());\n\n        for (int i = 1; i &lt; size; i++) {        // while loops are usually more efficient\n\n            temp = temp.next;\n\n            listString.append(&quot;, &quot;).append(temp.toString());\n\n        }\n\n        listString.append(&quot;]&quot;);\n\n        return listString.toString();\n\n    }\n\n    protected class Node {\n\n        /**\n         * The item stored in this node.\n         */\n        Type item;\n\n        /**\n         * A reference to the next node in the list.\n         * Is null if there is no next node.\n         */\n        Node next;\n\n        /**\n         * Default Constructor.\n         * Instantiates item to the passed element.\n         * Instantiates the next node reference to the passed node.\n         * @param item the element to be stored.\n         * @param next the reference to the next node in the list.\n         */\n        public Node(Type item, Node next) {\n\n            this.item = item;\n            this.next = next;\n\n        }\n\n        /**\n         * Returns the toString of item.\n         * @return the toString of item.\n         */\n        public String toString() {\n\n            return item.toString();\n\n        }\n    }\n}\n\n</code></pre>\n<p>This is my Genome class</p>\n<pre><code>/**\n * FileName: Genome.java\n * CreatedOn: August 17, 2022\n *\n * @author rodew\n * @version 1.0.081722\n */\n\n/**\n * A class that contains a list of characters\n * representing a String in a virtual world.\n * In this world, all that exists are strings of\n * characters from the set: {A,B,C,D,E,F,G,H,I,J,\n * K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,' ',-,'}\n * Strings in this world can reproduce new strings\n * and die if they are not fit enough.\n */\npublic class Genome implements Comparable&lt;Genome&gt;{\n\n    /**\n     * Seed for random().\n     */\n    protected static Integer seed = 2067734636;\n\n    /**\n     * A list of characters representing the string\n     * encoded by the genome.\n     */\n    protected MyLinkedList&lt;Character&gt; genes;\n\n    /**\n     * The population's mutation rate.\n     * Accurate only to two decimal places.\n     * Default: 5% chance of mutation.\n     */\n    protected static double mutationRate = 0.05;\n\n    /**\n     * The target string.\n     */\n    protected static MyLinkedList&lt;Character&gt; target = new MyLinkedList&lt;&gt;();\n\n    /**\n     * The set of characters all strings are made from.\n     */\n    protected static final MyLinkedList&lt;Character&gt; genePool = getDNA();\n\n    /**\n     * Constructor\n     * Initializes genes to an empty list.\n     */\n    public Genome() {   genes = new MyLinkedList&lt;&gt;();       }\n\n    /**\n     * Copy constructor.\n     * Initializes genes to the passed genome's genes.\n     * @param genome the list of characters to be copied.\n     */\n    public Genome(Genome genome) {  genes = genome.genes;       }\n\n    /**\n     * My random number generator.\n     * @return a random 32 bit integer.\n     */\n    protected static int random() {\n\n        int a = 923743637;\n        int b = 3;\n        long c = (long) Math.pow(2, 48);\n\n        seed = (int) ((a * seed + b) % c);\n\n        return seed;\n    }\n\n    /**\n     * Initializes the genePool with characters:\n     * {A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,\n     * U,V,W,X,Y,Z,' ',-,'}\n     * @return the genePool\n     */\n    protected static MyLinkedList&lt;Character&gt; getDNA() {\n\n        MyLinkedList&lt;Character&gt; characters = new MyLinkedList&lt;&gt;();\n        int index = 65;\n\n        while (index &lt; 91) characters.addToEnd((char) index++);       // Characters 'A'-'Z'\n\n        characters.addToEnd((char) 32);         //  ' ' character\n        characters.addToEnd((char) 45);         //  '-' character\n        characters.addToEnd((char) 39);         //  ''' character\n\n        return characters;\n    }\n\n    /**\n     * Mutation chance simulator.\n     * @return true if successful; false otherwise.\n     */\n    protected static boolean mutationSuccess() {\n\n        double threshold = mutationRate * 100;\n\n        return (random() % 100) &lt;= threshold;\n\n    }\n\n    /**\n     * Mutates the genes.\n     * With mutationRate chance, add a randomly selected\n     * character to a randomly selected position in genes.\n     * With mutationRate chance, delete a single character\n     * from a randomly selected position in genes; only\n     * if genes.size() &gt;= 1.\n     * Each character in genes, with mutationRate chance\n     * is replaced by a random character.\n     */\n    public void mutate() {\n\n        int select;\n        char gene;\n\n        if (mutationSuccess() &amp; genes.first() != null) {\n\n            select = random() % 29;\n            gene = genePool.first();\n\n            genes.first();\n\n            for (int i = 0; i &lt; select; i++) gene = genePool.next();\n\n            select = random() % genes.size();\n\n            for (int i = 0; i &lt; select; i++) genes.next();\n\n            genes.remove();\n            genes.addBefore(gene);\n\n        }\n\n        if (mutationSuccess() &amp; genes.first() != null) {\n\n            select = random() % genes.size();\n\n            for (int i = 0; i &lt; select; i++) genes.next();\n\n            genes.remove();\n\n        }\n\n        genes.first();\n\n        while (genes.current() != null) {\n\n            if(mutationSuccess()) {\n\n                genes.remove();\n\n                select = random() % 29;\n                gene = genePool.first();\n\n                for (int i = 0; i &lt; select; i++) gene = genePool.next();\n\n                genes.addBefore(gene);\n\n            } else genes.next();\n        }\n    }\n\n    /**\n     * This updates genes by crossing it with the passed genome.\n     * The new genes list is created by randomly selecting one\n     * of the parent genomes and adding that character to the\n     * new genes list; if the position does not exist in the\n     * parent, the new list will end at that position.\n     * @param parent the genome to be crossed with.\n     */\n    public void crossover(Genome parent) {\n\n        MyLinkedList&lt;Character&gt; child = new MyLinkedList&lt;&gt;();\n        Character mother = genes.first();\n        Character father = parent.genes.first();\n\n        while (mother != null) {\n\n            if (random() % 2 == 0) child.addToEnd(mother);\n\n            else if (father != null) child.addToEnd(father);\n\n            else break;\n\n            mother = genes.next();\n            father = parent.genes.next();\n\n        }\n\n    }\n\n    /**\n     * Returns the fitness level of the genome using\n     * the following formula: -(l + d), where l is the\n     * difference in length between the target and the\n     * genes and d is the number of characters that\n     * are incorrect.\n     * @return the fitness level.\n     */\n    public int fitness() {\n\n        int d = 25;\n        int l = target.size() - genes.size();\n\n        Character self = genes.first();\n        Character other = target.first();\n\n        while (self != null &amp; other != null) {\n\n            if (self.compareTo(other) == 0) d--;\n\n            self = genes.next();\n            other = target.next();\n\n        }\n\n        while (self != null) {\n\n            d++;\n            self = genes.next();\n\n        }\n\n       return -(l + d);\n    }\n\n    /**\n     * Compares the fitness level of the genome with\n     * the fitness level of the other genome.\n     * @param other the genome to be compared with.\n     * @return a negative integer, zero, or a positive\n     * integer as this genome's fitness level is less\n     * than, equal to, or greater than the specified\n     * genome's fitness level.\n     */\n    public int compareTo(Genome other) {    return this.fitness() - other.fitness();        }\n\n    /**\n     * Displays the genome and its fitness level\n     * in this format: (&quot;genes&quot;, fitness)\n     * @return the string format of the genome.\n     */\n    public String toString() {\n\n        if (genes.isEmpty()) return &quot;(\\&quot;\\&quot;, -50)&quot;;\n\n        StringBuilder string = new StringBuilder(&quot;(&quot;);\n        String genome = genes.toString();\n\n        genome = genome.replace('[', '&quot;');\n        genome = genome.replace(']', '&quot;');\n        genome = genome.replaceAll(&quot;,&quot;, &quot;&quot;);\n\n        string.append(genome).append(&quot;, &quot;).append(this.fitness()).append(')');\n\n        return string.toString();\n\n    }\n}\n</code></pre>\n<p>This is the test class.</p>\n<pre><code>/**\n * FileName: EvolutionTest.java\n * CreatedOn: August 18, 2022\n *\n * @author rodew\n * @version 1.0.081822\n */\n\nimport org.junit.Test;\n/**\n * JUnit test for my Population and Genome Classes\n */\npublic class EvolutionTest {\n\n    @Test\n    public final void construct() {\n\n        System.out.println(&quot;Strings are now evolving...&quot;);\n\n        long delta, startTime = System.currentTimeMillis();\n\n        Population pop = new Population(&quot;FIRST MIDDLE LAST&quot;, 100);\n\n        while(pop.mostFit.fitness() &lt; 0) {\n\n            System.out.print(&quot;... Generation &quot; + pop.generation + &quot; &quot;);\n            System.out.println(pop.mostFit);\n\n            pop.nextGeneration();\n\n        }\n\n        delta = System.currentTimeMillis() - startTime;\n\n        System.out.println(&quot;Evolution took &quot; + delta + &quot; milliseconds.&quot;);\n        System.out.println();\n    }\n}\n\n</code></pre>\n<p>My code is on gitHub: <a href=\"https://github.com/rodew374/EvolvingStrings\" rel=\"nofollow noreferrer\">https://github.com/rodew374/EvolvingStrings</a>.</p>\n"},{"tags":["java","spring","apache-flink","amazon-kinesis","amazon-kinesis-analytics"],"answers":[{"tags":[],"owner":{"account_id":942897,"reputation":2171,"user_id":970673,"accept_rate":69,"display_name":"Jordan Morris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660882723,"creation_date":1660882723,"answer_id":73411792,"question_id":72406279,"body_markdown":"Is this because you&#39;re attempting to use dependencies for flink 1.15? AFAIK, 1.13 is the latest version supported. You need to choose which flink version you intend to use when creating the streaming application.","title":"ClassNotFoundException while running jar on Amazon Kinesis Streaming Analytics app","body":"<p>Is this because you're attempting to use dependencies for flink 1.15? AFAIK, 1.13 is the latest version supported. You need to choose which flink version you intend to use when creating the streaming application.</p>\n"}],"owner":{"account_id":7042332,"reputation":121,"user_id":5394411,"accept_rate":29,"display_name":"Jay"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":213,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660882723,"creation_date":1653658423,"question_id":72406279,"body_markdown":"I have created a Kinesis Analytics Streaming Application in SpringBoot which will consume messages from the AmazonKinesis input stream and will do some operations on top of it using the Apache Flink DataStream library.\r\n\r\nWhen, I am uploading the application jar to S3 and trying to run this application on Streaming App it is throwing **ClassNotFoundException** for one of the files which is the **ApplicationConfiguration** file. Also, when I am running this application locally, it is running fine without any errors and I am able to consume the messages.\r\n\r\nBelow are some of the code files.\r\n\r\n**ApplicationConfiguration.java**\r\n```\r\nimport java.util.Properties;\r\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\r\nimport org.apache.flink.streaming.api.datastream.DataStream;\r\nimport org.apache.flink.streaming.connectors.kinesis.FlinkKinesisConsumer;\r\nimport org.apache.flink.streaming.connectors.kinesis.FlinkKinesisProducer;\r\nimport org.apache.flink.streaming.connectors.kinesis.config.ConsumerConfigConstants;\r\nimport org.springframework.beans.factory.annotation.Value;\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\n\r\n@Configuration\r\npublic class ApplicationConfiguration {\r\n\r\n  @Value(&quot;${oe.metric.input.stream}&quot;)\r\n  private String inputStreamName;\r\n  @Value(&quot;${oe.metric.output.stream}&quot;)\r\n  private String outputStreamName;\r\n  @Value(&quot;${aws.region}&quot;)\r\n  private String region;\r\n  @Value(&quot;${stream.initial.position}&quot;)\r\n  private String position;\r\n\r\n  @Bean\r\n  public FlinkKinesisProducer&lt;String&gt; createSinkFromStaticConfig() {\r\n    Properties outputProperties = new Properties();\r\n    outputProperties.setProperty(ConsumerConfigConstants.AWS_REGION, region);\r\n    outputProperties.setProperty(&quot;AggregationEnabled&quot;, &quot;false&quot;);\r\n\r\n    FlinkKinesisProducer&lt;String&gt; sink = new FlinkKinesisProducer&lt;&gt;(new SimpleStringSchema(),\r\n        outputProperties);\r\n    sink.setDefaultStream(outputStreamName);\r\n    sink.setDefaultPartition(&quot;0&quot;);\r\n    return sink;\r\n  }\r\n\r\n  @Bean\r\n  public DataStream&lt;String&gt; createSourceFromConfig() {\r\n    Properties inputProperties = new Properties();\r\n    inputProperties.setProperty(ConsumerConfigConstants.AWS_REGION, region);\r\n    inputProperties.setProperty(ConsumerConfigConstants.STREAM_INITIAL_POSITION, position);\r\n\r\n    return ApplicationConstants.streamExecutionEnvironment.addSource(\r\n        new FlinkKinesisConsumer&lt;&gt;(inputStreamName, new SimpleStringSchema(), inputProperties));\r\n  }\r\n\r\n```\r\n\r\n**Error**:\r\n\r\n```\r\nCaused by: java.lang.IllegalStateException: Cannot load configuration class: com.pkg.config.ApplicationConfiguration\r\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:415)\r\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:268)\r\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:325)\r\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:147)\r\nat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)\r\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)\r\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\r\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\r\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\r\nat com.pkg.KinesisConsumerApplication.main(KinesisConsumerApplication.java:18)\r\n... 25 more\r\nCaused by: java.lang.ClassNotFoundException: com.pkg.config.ApplicationConfiguration\r\nat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:476)\r\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:589)\r\nat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\r\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\r\nat java.base/java.lang.Class.forName0(Native Method)\r\nat java.base/java.lang.Class.forName(Class.java:398)\r\n```\r\n\r\n**KinesisConsumerApplication.java**\r\n```\r\n@SpringBootApplication\r\n@EnableAutoConfiguration\r\n@ComponentScan(basePackages = &quot;com.pkg&quot;)\r\npublic class KinesisConsumerApplication implements CommandLineRunner {\r\n\r\n  @Autowired\r\n  ApplicationContext ctx;\r\n\r\n  public static void main(String[] args) {\r\n    SpringApplication.run(KinesisConsumerApplication.class, args);\r\n  }\r\n\r\n  @Override\r\n  public void run(String... args) throws Exception {\r\n    GetKinesisRecords getKinesisRecords = ctx.getBean(GetKinesisRecords.class);\r\n    getKinesisRecords.getDataFromStream();\r\n  }\r\n}\r\n```\r\n\r\nMaven **pom.xml** file\r\n\r\n```\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;artifactId&gt;kinesis-consumer&lt;/artifactId&gt;\r\n  &lt;build&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n        &lt;configuration&gt;\r\n          &lt;excludes&gt;\r\n            &lt;exclude&gt;\r\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n            &lt;/exclude&gt;\r\n          &lt;/excludes&gt;\r\n        &lt;/configuration&gt;\r\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  &lt;dependencies&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n          &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n      &lt;/exclusions&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;flink-connector-kinesis_${scala.binary.version}&lt;/artifactId&gt;\r\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n      &lt;version&gt;1.13.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n      &lt;artifactId&gt;flink-streaming-java_${scala.binary.version}&lt;/artifactId&gt;\r\n      &lt;version&gt;1.13.2&lt;/version&gt;\r\n      &lt;scope&gt;compile&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;flink-core&lt;/artifactId&gt;\r\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n      &lt;version&gt;1.13.2&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\r\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n      &lt;groupId&gt;junit&lt;/groupId&gt;\r\n      &lt;scope&gt;test&lt;/scope&gt;\r\n      &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;ssai-common&lt;/artifactId&gt;\r\n      &lt;groupId&gt;com.adsparx.phoenix&lt;/groupId&gt;\r\n      &lt;version&gt;1.2.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;flink-clients&lt;/artifactId&gt;\r\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\r\n      &lt;version&gt;1.15.0&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;dependency&gt;\r\n      &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\r\n      &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n    &lt;!-- Logging --&gt;\r\n    &lt;dependency&gt;\r\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\r\n    &lt;/dependency&gt;\r\n\r\n  &lt;/dependencies&gt;\r\n\r\n  &lt;description&gt;Apache Kinesis Consumer&lt;/description&gt;\r\n  &lt;groupId&gt;com.pkg&lt;/groupId&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;name&gt;kinesis-consumer&lt;/name&gt;\r\n  &lt;parent&gt;\r\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    &lt;relativePath/&gt;\r\n    &lt;version&gt;2.4.0&lt;/version&gt;\r\n  &lt;/parent&gt;\r\n  &lt;properties&gt;\r\n    &lt;java.version&gt;11&lt;/java.version&gt;\r\n    &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n  &lt;/properties&gt;\r\n\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n\r\n&lt;/project&gt;\r\n\r\n```\r\n\r\nThings that I have tried on my end:\r\n\r\n - Clean build the project a couple of times.\r\n - Checked Java and Spring version in pom, as suggested in one of the\r\n   StackOverflow post. \r\n - Downgraded SpringBoot version from &quot;2.7.0&quot; to &quot;2.4.0&quot;. \r\n - Added ComponentScan annotation in main class.\r\n - Tried changing the annotation from @Configuration to @Component.\r\n - Last but not least, tried google and stackoverflow.\r\n\r\n&gt; Can someone please help me identify the error? ","title":"ClassNotFoundException while running jar on Amazon Kinesis Streaming Analytics app","body":"<p>I have created a Kinesis Analytics Streaming Application in SpringBoot which will consume messages from the AmazonKinesis input stream and will do some operations on top of it using the Apache Flink DataStream library.</p>\n<p>When, I am uploading the application jar to S3 and trying to run this application on Streaming App it is throwing <strong>ClassNotFoundException</strong> for one of the files which is the <strong>ApplicationConfiguration</strong> file. Also, when I am running this application locally, it is running fine without any errors and I am able to consume the messages.</p>\n<p>Below are some of the code files.</p>\n<p><strong>ApplicationConfiguration.java</strong></p>\n<pre><code>import java.util.Properties;\nimport org.apache.flink.api.common.serialization.SimpleStringSchema;\nimport org.apache.flink.streaming.api.datastream.DataStream;\nimport org.apache.flink.streaming.connectors.kinesis.FlinkKinesisConsumer;\nimport org.apache.flink.streaming.connectors.kinesis.FlinkKinesisProducer;\nimport org.apache.flink.streaming.connectors.kinesis.config.ConsumerConfigConstants;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\npublic class ApplicationConfiguration {\n\n  @Value(&quot;${oe.metric.input.stream}&quot;)\n  private String inputStreamName;\n  @Value(&quot;${oe.metric.output.stream}&quot;)\n  private String outputStreamName;\n  @Value(&quot;${aws.region}&quot;)\n  private String region;\n  @Value(&quot;${stream.initial.position}&quot;)\n  private String position;\n\n  @Bean\n  public FlinkKinesisProducer&lt;String&gt; createSinkFromStaticConfig() {\n    Properties outputProperties = new Properties();\n    outputProperties.setProperty(ConsumerConfigConstants.AWS_REGION, region);\n    outputProperties.setProperty(&quot;AggregationEnabled&quot;, &quot;false&quot;);\n\n    FlinkKinesisProducer&lt;String&gt; sink = new FlinkKinesisProducer&lt;&gt;(new SimpleStringSchema(),\n        outputProperties);\n    sink.setDefaultStream(outputStreamName);\n    sink.setDefaultPartition(&quot;0&quot;);\n    return sink;\n  }\n\n  @Bean\n  public DataStream&lt;String&gt; createSourceFromConfig() {\n    Properties inputProperties = new Properties();\n    inputProperties.setProperty(ConsumerConfigConstants.AWS_REGION, region);\n    inputProperties.setProperty(ConsumerConfigConstants.STREAM_INITIAL_POSITION, position);\n\n    return ApplicationConstants.streamExecutionEnvironment.addSource(\n        new FlinkKinesisConsumer&lt;&gt;(inputStreamName, new SimpleStringSchema(), inputProperties));\n  }\n\n</code></pre>\n<p><strong>Error</strong>:</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Cannot load configuration class: com.pkg.config.ApplicationConfiguration\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.enhanceConfigurationClasses(ConfigurationClassPostProcessor.java:415)\nat org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanFactory(ConfigurationClassPostProcessor.java:268)\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:325)\nat org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:147)\nat org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:746)\nat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:564)\nat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\nat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\nat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\nat com.pkg.KinesisConsumerApplication.main(KinesisConsumerApplication.java:18)\n... 25 more\nCaused by: java.lang.ClassNotFoundException: com.pkg.config.ApplicationConfiguration\nat java.base/java.net.URLClassLoader.findClass(URLClassLoader.java:476)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:589)\nat org.springframework.boot.loader.LaunchedURLClassLoader.loadClass(LaunchedURLClassLoader.java:151)\nat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:522)\nat java.base/java.lang.Class.forName0(Native Method)\nat java.base/java.lang.Class.forName(Class.java:398)\n</code></pre>\n<p><strong>KinesisConsumerApplication.java</strong></p>\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration\n@ComponentScan(basePackages = &quot;com.pkg&quot;)\npublic class KinesisConsumerApplication implements CommandLineRunner {\n\n  @Autowired\n  ApplicationContext ctx;\n\n  public static void main(String[] args) {\n    SpringApplication.run(KinesisConsumerApplication.class, args);\n  }\n\n  @Override\n  public void run(String... args) throws Exception {\n    GetKinesisRecords getKinesisRecords = ctx.getBean(GetKinesisRecords.class);\n    getKinesisRecords.getDataFromStream();\n  }\n}\n</code></pre>\n<p>Maven <strong>pom.xml</strong> file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;artifactId&gt;kinesis-consumer&lt;/artifactId&gt;\n  &lt;build&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n        &lt;configuration&gt;\n          &lt;excludes&gt;\n            &lt;exclude&gt;\n              &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n              &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;/exclude&gt;\n          &lt;/excludes&gt;\n        &lt;/configuration&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  &lt;dependencies&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;exclusions&gt;\n        &lt;exclusion&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n      &lt;/exclusions&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;flink-connector-kinesis_${scala.binary.version}&lt;/artifactId&gt;\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n      &lt;version&gt;1.13.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n      &lt;artifactId&gt;flink-streaming-java_${scala.binary.version}&lt;/artifactId&gt;\n      &lt;version&gt;1.13.2&lt;/version&gt;\n      &lt;scope&gt;compile&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;flink-core&lt;/artifactId&gt;\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n      &lt;version&gt;1.13.2&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n      &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n      &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;ssai-common&lt;/artifactId&gt;\n      &lt;groupId&gt;com.adsparx.phoenix&lt;/groupId&gt;\n      &lt;version&gt;1.2.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;flink-clients&lt;/artifactId&gt;\n      &lt;groupId&gt;org.apache.flink&lt;/groupId&gt;\n      &lt;version&gt;1.15.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n      &lt;artifactId&gt;jakarta.xml.bind-api&lt;/artifactId&gt;\n      &lt;groupId&gt;jakarta.xml.bind&lt;/groupId&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- Logging --&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n  &lt;/dependencies&gt;\n\n  &lt;description&gt;Apache Kinesis Consumer&lt;/description&gt;\n  &lt;groupId&gt;com.pkg&lt;/groupId&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;name&gt;kinesis-consumer&lt;/name&gt;\n  &lt;parent&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;relativePath/&gt;\n    &lt;version&gt;2.4.0&lt;/version&gt;\n  &lt;/parent&gt;\n  &lt;properties&gt;\n    &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;scala.binary.version&gt;2.12&lt;/scala.binary.version&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n  &lt;/properties&gt;\n\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>Things that I have tried on my end:</p>\n<ul>\n<li>Clean build the project a couple of times.</li>\n<li>Checked Java and Spring version in pom, as suggested in one of the\nStackOverflow post.</li>\n<li>Downgraded SpringBoot version from &quot;2.7.0&quot; to &quot;2.4.0&quot;.</li>\n<li>Added ComponentScan annotation in main class.</li>\n<li>Tried changing the annotation from @Configuration to @Component.</li>\n<li>Last but not least, tried google and stackoverflow.</li>\n</ul>\n<blockquote>\n<p>Can someone please help me identify the error?</p>\n</blockquote>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector"],"comments":[{"owner":{"account_id":4033122,"reputation":27140,"user_id":3318517,"accept_rate":67,"display_name":"Daniel Darabos"},"score":0,"creation_date":1457545664,"post_id":35898598,"comment_id":59458269,"body_markdown":"Can you please fix the code formatting? Thanks!","body":"Can you please fix the code formatting? Thanks!"},{"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"score":0,"creation_date":1457546039,"post_id":35898598,"comment_id":59458533,"body_markdown":"Sorry about that Daniel","body":"Sorry about that Daniel"}],"answers":[{"tags":[],"owner":{"account_id":4033122,"reputation":27140,"user_id":3318517,"accept_rate":67,"display_name":"Daniel Darabos"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1457545622,"creation_date":1457545622,"answer_id":35898900,"question_id":35898598,"body_markdown":"`app1.run1` puts the RDD contents into `app1.ListFromS3`. Then you look at `app.ListFromS3`, which is empty. `app1.ListFromS3` and `app.ListFromS3` are fields on two different objects. Setting one does not set the other.\r\n\r\nI think you meant `ListFromS3` to be `static`, meaning it belongs to the `Query5kPids` class, not to a particular instance. Like this:\r\n\r\n    static List&lt;String&gt; ListFromS3 = new ArrayList&lt;String&gt;();\r\n","title":"Getting empty Java List after converting from RDD","body":"<p><code>app1.run1</code> puts the RDD contents into <code>app1.ListFromS3</code>. Then you look at <code>app.ListFromS3</code>, which is empty. <code>app1.ListFromS3</code> and <code>app.ListFromS3</code> are fields on two different objects. Setting one does not set the other.</p>\n\n<p>I think you meant <code>ListFromS3</code> to be <code>static</code>, meaning it belongs to the <code>Query5kPids</code> class, not to a particular instance. Like this:</p>\n\n<pre><code>static List&lt;String&gt; ListFromS3 = new ArrayList&lt;String&gt;();\n</code></pre>\n"}],"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":217,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":35898900,"answer_count":1,"score":0,"last_activity_date":1660882498,"creation_date":1457544739,"question_id":35898598,"body_markdown":" I&#39;m creating a RDD in 1st part of the application, then converting it to a list using rdd.collect().\r\n\r\nBut for some reason the list size is coming as 0 in the second part of the application , while the RDD from which I&#39;m creating the list is not empty.Even rdd.toArray() is giving empty list.\r\n\r\nBelow is my program.\r\n\r\n     public class Query5kPids implements Serializable{\r\n\r\n     List&lt;String&gt; ListFromS3 = new ArrayList&lt;String&gt;();\r\n\r\n     public static void main(String[] args) throws JSONException, IOException, InterruptedException, URISyntaxException {\r\n\t\t\r\n\t\t\r\n\t\t    SparkConf conf = new SparkConf();\r\n\t\t    conf.setAppName(&quot;Spark-Cassandra Integration&quot;);\r\n            conf.set(&quot;spark.cassandra.connection.host&quot;, &quot;12.16.193.19&quot;);\r\n\t\t    conf.setMaster(&quot;yarn-cluster&quot;);\r\n\r\n            SparkConf conf1 = new SparkConf().setAppName(&quot;SparkAutomation&quot;).setMaster(&quot;yarn-cluster&quot;);\r\n\r\n            Query5kPids app1 = new Query5kPids(conf1);\r\n\t    \tapp1.run1(file);\r\n\t    \t\r\n\t    \tQuery5kPids app = new Query5kPids(conf);\r\n\t    \tSystem.out.println(&quot;Both RDD has been generated&quot;);\r\n\t\t    app.run();\r\n\r\n    }\r\n\r\n\tprivate void run() throws JSONException, IOException, InterruptedException {\r\n\t\t\r\n\t\t    JavaSparkContext sc = new JavaSparkContext(conf);\r\n\t\t    query(sc);\r\n\t\t    sc.stop();\r\n\t}\r\n\t\r\n\tprivate void run1(File file) throws JSONException, IOException, InterruptedException {\r\n\t\t     JavaSparkContext sc = new JavaSparkContext(conf);\r\n\t\t     getData(sc,file);\r\n\t\t     sc.stop();\r\n\r\n\t}\r\n\r\n        private void getData(JavaSparkContext sc, File file) {\r\n\t\t\r\n\t\t     JavaRDD&lt;String&gt; Data = sc.textFile(file.toString());\r\n             System.out.println(&quot;RDD Count is &quot; + Data.count());\r\n             // here it prints some count value\r\n             ListFromS3 = Data.collect();\r\n             // ListFromS3 = Data.toArray();\r\n\r\n        }\r\n         private void query(JavaSparkContext sc) {\r\n             \r\n             System.out.println(&quot;RDD Count is &quot; + ListFromS3.size());\r\n             // Prints 0\r\n             // So cant convert the list to RDD\r\n             JavaRDD&lt;String&gt; rddFromGz = sc.parallelize(ListFromS3);\r\n\r\n        }\r\n\r\n\r\n      }\r\n\r\nNOTE -&gt; In the actual program , the RDD and List is of type.\r\n\r\n    List&lt;UserSetGet&gt; ListFromS3 = new ArrayList&lt;UserSetGet&gt;();\r\n    JavaRDD&lt;UserSetGet&gt; Data = new ....\r\n\r\nwhere UserSetGet is a Pojo , With Setter and getter methods, and its Serializable.","title":"Getting empty Java List after converting from RDD","body":"<p>I'm creating a RDD in 1st part of the application, then converting it to a list using rdd.collect().</p>\n\n<p>But for some reason the list size is coming as 0 in the second part of the application , while the RDD from which I'm creating the list is not empty.Even rdd.toArray() is giving empty list.</p>\n\n<p>Below is my program.</p>\n\n<pre><code> public class Query5kPids implements Serializable{\n\n List&lt;String&gt; ListFromS3 = new ArrayList&lt;String&gt;();\n\n public static void main(String[] args) throws JSONException, IOException, InterruptedException, URISyntaxException {\n\n\n        SparkConf conf = new SparkConf();\n        conf.setAppName(\"Spark-Cassandra Integration\");\n        conf.set(\"spark.cassandra.connection.host\", \"12.16.193.19\");\n        conf.setMaster(\"yarn-cluster\");\n\n        SparkConf conf1 = new SparkConf().setAppName(\"SparkAutomation\").setMaster(\"yarn-cluster\");\n\n        Query5kPids app1 = new Query5kPids(conf1);\n        app1.run1(file);\n\n        Query5kPids app = new Query5kPids(conf);\n        System.out.println(\"Both RDD has been generated\");\n        app.run();\n\n}\n\nprivate void run() throws JSONException, IOException, InterruptedException {\n\n        JavaSparkContext sc = new JavaSparkContext(conf);\n        query(sc);\n        sc.stop();\n}\n\nprivate void run1(File file) throws JSONException, IOException, InterruptedException {\n         JavaSparkContext sc = new JavaSparkContext(conf);\n         getData(sc,file);\n         sc.stop();\n\n}\n\n    private void getData(JavaSparkContext sc, File file) {\n\n         JavaRDD&lt;String&gt; Data = sc.textFile(file.toString());\n         System.out.println(\"RDD Count is \" + Data.count());\n         // here it prints some count value\n         ListFromS3 = Data.collect();\n         // ListFromS3 = Data.toArray();\n\n    }\n     private void query(JavaSparkContext sc) {\n\n         System.out.println(\"RDD Count is \" + ListFromS3.size());\n         // Prints 0\n         // So cant convert the list to RDD\n         JavaRDD&lt;String&gt; rddFromGz = sc.parallelize(ListFromS3);\n\n    }\n\n\n  }\n</code></pre>\n\n<p>NOTE -> In the actual program , the RDD and List is of type.</p>\n\n<pre><code>List&lt;UserSetGet&gt; ListFromS3 = new ArrayList&lt;UserSetGet&gt;();\nJavaRDD&lt;UserSetGet&gt; Data = new ....\n</code></pre>\n\n<p>where UserSetGet is a Pojo , With Setter and getter methods, and its Serializable.</p>\n"},{"tags":["java","apache-spark","cassandra","amazon-emr","spark-cassandra-connector"],"answers":[{"tags":[],"owner":{"account_id":2882984,"reputation":1522,"user_id":2473417,"display_name":"Igor Berman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1570624160,"creation_date":1457697551,"answer_id":35939730,"question_id":35936497,"body_markdown":"We are running tests with local spark context and are using following &quot;hack&quot; to solve collision problems:\r\n\r\n    sc.stop()\r\n    // To avoid Akka rebinding to the same port, since it doesn&#39;t unbind \r\n    // immediately on shutdown\r\n    \r\n    System.clearProperty(&quot;spark.driver.port&quot;)\r\n\r\nAny reason you are using 2 different spark contexts? Why can&#39;t you use only 1?\r\n","title":"Spark Job with Multiple Contexts is failing","body":"<p>We are running tests with local spark context and are using following \"hack\" to solve collision problems:</p>\n\n<pre><code>sc.stop()\n// To avoid Akka rebinding to the same port, since it doesn't unbind \n// immediately on shutdown\n\nSystem.clearProperty(\"spark.driver.port\")\n</code></pre>\n\n<p>Any reason you are using 2 different spark contexts? Why can't you use only 1?</p>\n"}],"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":6923,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":35939730,"answer_count":1,"score":2,"last_activity_date":1660882486,"creation_date":1457688681,"question_id":35936497,"body_markdown":"In the spark application we are making two spark contexts, \r\n\r\n1) For reading data from file system.\r\n\r\n2) For connecting and loading data to Cassandra.\r\n\r\nIn one app we can run only one spark spark context, so we are stopping 1st then starting second.\r\n\r\nI was getting the following error.\r\n\r\n    Error 1) 16/03/10 05:40:44 ERROR Utils: Uncaught exception in thread      Thread-2\r\n    java.io.IOException: Target log file already exists        (hdfs:///var/log/spark/apps/application_1457586850134_0001_2)\r\n        at `org.apache.spark.scheduler.EventLoggingListener.stop(EventLoggingListener.scala:225)`\r\n\r\nIt was because , in hadoop the directory/file need not be present when running the job (1st context), so for running 2nd context the log direcory/log file was present \r\nI So was the above error.\r\n\r\nI solved the issue by setting spark.eventLog.overwrite=true\r\n\r\n__________________________________________________\r\n\r\n  \r\n\r\n    Error 2) WARN executor.CoarseGrainedExecutorBackend: An unknown (ip-10-93-141-13.ec2.internal:48849) driver disconnected. 16/03/10 06:47:37                                                            ERROR executor.CoarseGrainedExecutorBackend: Driver 10.93.141.13:48849disassociated! Shutting down.\r\n\r\nI tried increasing the \r\n\r\n&gt; spark.yarn.driver.memoryOverhead=1024\r\n&gt; \r\n&gt; spark.yarn.executor.memoryOverhead=1024\r\n\r\nBut the problem is still there.\r\n_____________________________________________________\r\nError 3) \r\n\r\n  \r\n\r\n    Exception in thread &quot;main&quot; java.io.IOException: Failed to connect to /10.93.141.13:46008\r\n        at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:216)\r\n        at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:167)\r\n        at org.apache.spark.rpc.netty.NettyRpcEnv.createClient(NettyRpcEnv.scala:200)\r\n        at org.apache.spark.rpc.netty.Outbox$$anon$1.call(Outbox.scala:187)\r\n        at org.apache.spark.rpc.netty.Outbox$$anon$1.call(Outbox.scala:183)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n        at java.lang.Thread.run(Thread.java:745)\r\n\r\nI have checked in in the core node , it is not listening on port 46008.\r\n\r\n___________________________________________________________\r\n\r\nError 4 )\r\n\r\n    WARN YarnAllocator: Container marked as failed:              container_1457586850134_0006_01_000006 on host: ip-10-164-169-         46.ec2.internal. Exit status: 1. Diagnostics: Exception from container-   launch.\r\n    Container id: container_1457586850134_0006_01_000006\r\n    Exit code: 1\r\n    Stack trace: ExitCodeException exitCode=1:\r\n    at org.apache.hadoop.util.Shell.runCommand(Shell.java:545)\r\n    at org.apache.hadoop.util.Shell.run(Shell.java:456)\r\n    at   org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:722)\r\n    at org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:211)\r\n    at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:302)\r\n    at org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:82)\r\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\r\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n    at java.lang.Thread.run(Thread.java:745)\r\n\r\n\r\n    Container exited with a non-zero exit code 1\r\n\r\n    16/03/10 06:47:17 WARN ApplicationMaster: Reporter thread fails 1 time(s) in a row.\r\n    java.lang.IllegalStateException: RpcEnv already stopped.\r\n    at org.apache.spark.rpc.netty.Dispatcher.postMessage(Dispatcher.scala:159)\r\n        at org.apache.spark.rpc.netty.Dispatcher.postOneWayMessage(Dispatcher.scala:131)\r\n        at org.apache.spark.rpc.netty.NettyRpcEnv.send(NettyRpcEnv.scala:192)\r\n        at org.apache.spark.rpc.netty.NettyRpcEndpointRef.send(NettyRpcEnv.scala:516)\r\n        at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1$$anonfun$apply$7.apply(YarnAllocator.scala:531)\r\n        at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1$$anonfun$apply$7.apply(YarnAllocator.scala:512)\r\n        at scala.Option.foreach(Option.scala:236)\r\n        at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1.apply(YarnAllocator.scala:512)\r\n        at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1.apply(YarnAllocator.scala:442)\r\n        at scala.collection.Iterator$class.foreach(Iterator.scala:727)\r\n        at scala.collection.AbstractIterator.foreach(Iterator.scala:1157)\r\n        at scala.collection.IterableLike$class.foreach(IterableLike.scala:72)\r\n        at scala.collection.AbstractIterable.foreach(Iterable.scala:54)\r\n        at org.apache.spark.deploy.yarn.YarnAllocator.processCompletedContainers(YarnAllocator.scala:442)\r\n        at org.apache.spark.deploy.yarn.YarnAllocator.allocateResources(YarnAllocator.scala:242)\r\n        at org.apache.spark.deploy.yarn.ApplicationMaster$$anon$1.run(ApplicationMaster.scala:368)\r\n\r\n\r\nThe above error is since the container is failing continously.\r\n\r\n____________________________________________________________________\r\n\r\nIt seems the above  spark issue&#39;s due to  multiple contexts, as raised in the mailing list.\r\n\r\nhttps://mail-archives.apache.org/mod_mbox/spark-issues/201602.mbox/%3CJIRA.12936774.1454603470000.316442.1454707659978@Atlassian.JIRA%3E\r\n\r\nsparkContext.stop() is not able to free up the resources.\r\n\r\n_______________________________________________________\r\n\r\nI&#39;m running the using the following options\r\n\r\n  \r\n\r\n    --class com.mobi.vserv.driver.Query5kPids                            \r\n      --conf spark.eventLog.overwrite=true  \r\n      --conf spark.yarn.executor.memoryOverhead=1024                       \r\n      --conf spark.yarn.driver.memoryOverhead=1024                             \r\n      --num-executors 4                \r\n      --executor-memory 3g            \r\n      --executor-cores 2                  \r\n      --driver-memory 3g\r\n\r\nI&#39;m running on EMR , with a master and 2 slave nodes, master has 8 core and 16GB memory and each slave has 4 core 5120 MB available memory.\r\n\r\nBelow is my code.\r\n\r\n        public class Query5kPids implements Serializable{\r\n\r\n        static List&lt;UserSetGet&gt; ListFromS3 = new ArrayList&lt;UserSetGet&gt;();\r\n\r\n        public static void main(String[] args) throws JSONException, IOException, InterruptedException, URISyntaxException {\r\n\r\n\r\n        SparkConf conf = new SparkConf();\r\n        conf.setAppName(&quot;Spark-Cassandra Integration&quot;);\r\n        conf.setMaster(&quot;yarn-cluster&quot;);\r\n        conf.set(&quot;spark.cassandra.connection.host&quot;, &quot;12.16.193.19&quot;);\r\n        conf.set(&quot;spark.cassandra.connection.port&quot;, &quot;9042&quot;);\r\n        \r\n\r\n        SparkConf conf1 = new SparkConf().setAppName(&quot;SparkAutomation&quot;).setMaster(&quot;yarn-cluster&quot;);\r\n\r\n        Query5kPids app1 = new Query5kPids(conf1);\r\n        app1.run1(file);\r\n\r\n        Query5kPids app = new Query5kPids(conf);\r\n        System.out.println(&quot;Both RDD has been generated&quot;);\r\n        app.run();\r\n\r\n       }\r\n\r\n       private void run() throws JSONException, IOException, InterruptedException {\r\n\r\n       JavaSparkContext sc = new JavaSparkContext(conf);\r\n       query(sc);\r\n       sc.stop();\r\n       }\r\n\r\n       private void run1(File file) throws JSONException, IOException,     InterruptedException {\r\n       JavaSparkContext sc = new JavaSparkContext(conf);\r\n       getData(sc,file);\r\n       sc.stop();\r\n\r\n      }\r\n\r\n       private void getData(JavaSparkContext sc, File file) {\r\n\r\n       JavaRDD&lt;String&gt; Data = sc.textFile(file.toString());\r\n       System.out.println(&quot;RDD Count is &quot; + Data.count());\r\n         \r\n       // Other map opetations to convert to UserSetGet RDD.\r\n       ListFromS3 = Data.collect();\r\n     \r\n       }\r\n       private void query(JavaSparkContext sc) {\r\n\r\n       System.out.prin`enter code here`tln(&quot;RDD Count is &quot; +  ListFromS3.size());\r\n       //This gets printed. \r\n       //Which means it application is coming to the second part of the program.\r\n         \r\n       for (int i = 0; i &lt; ListFromS3.size(); i++) {\r\n\t\t\t\r\n\t   sb.append(ListFromS3.get(i).getApnid());\r\n\t   sb.append(&#39;,&#39;);\r\n\t   }\r\n\t   sb.setLength(sb.length() - 3);\r\n\t\t\r\n       JavaRDD&lt;CassandraRow&gt; cassandraRDD = CassandraJavaUtil.javaFunctions(sc).cassandraTable(&quot;dmp&quot;, &quot;user_profile_spark_test&quot;).select       (&quot;app_day_count&quot;, &quot;app_first_seen&quot;,&quot;app_last_seen&quot;, &quot;app_usage_count&quot;, &quot;total_day_count&quot;, &quot;total_usage_count&quot;)\r\n     .where(&quot;apnid IN (&#39;&quot; + sb + &quot;&#39;)&quot;);\r\n        \r\n       if(cassandraRDD.isEmpty()){\r\n         \r\n       JavaRDD&lt;UserSetGet&gt; rddFromGz = sc.parallelize(ListFromS3);\r\n         \r\n       CassandraJavaUtil.javaFunctions(rddFromGz).writerBuilder(&quot;dmp&quot;, &quot;user_profile_spark_test&quot;, mapToRow(UserSetGet.class)).saveToCassand();\r\n\t\t\tlogger.info(&quot;DataSaved&quot;);\r\n       }\r\n       }\r\n\r\n       }\r\n\r\n Below is my POM\r\n\r\n       &lt;dependencies&gt;\r\n       &lt;dependency&gt;\r\n       &lt;groupId&gt;org.apache-extras.cassandra-jdbc&lt;/groupId&gt;\r\n       &lt;artifactId&gt;cassandra-jdbc&lt;/artifactId&gt;\r\n       &lt;version&gt;1.2.5&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;dependency&gt;\r\n\t   &lt;groupId&gt;junit&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;junit&lt;/artifactId&gt;\r\n\t   &lt;version&gt;3.8.1&lt;/version&gt;\r\n\t   &lt;scope&gt;test&lt;/scope&gt;\r\n       &lt;/dependency&gt;\r\n\t   &lt;dependency&gt;\r\n\t   &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;jettison&lt;/artifactId&gt;\r\n\t   &lt;version&gt;1.3.7&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n       &lt;dependency&gt;\r\n\t   &lt;groupId&gt;log4j&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;log4j&lt;/artifactId&gt;\r\n\t   &lt;version&gt;1.2.17&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n\t\r\n       &lt;dependency&gt;\r\n\t   &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;spark-core_2.10&lt;/artifactId&gt;\r\n\t   &lt;version&gt;1.6.0&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\t\r\n       &lt;dependency&gt;\r\n\t   &lt;groupId&gt;com.datastax.spark&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;spark-cassandra-connector_2.10&lt;/artifactId&gt;\r\n\t   &lt;version&gt;1.5.0-M1&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;dependency&gt;\r\n\t   &lt;groupId&gt;com.datastax.cassandra&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;cassandra-driver-core&lt;/artifactId&gt;\r\n\t   &lt;version&gt;2.1.6&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;dependency&gt;\r\n\t   &lt;groupId&gt;com.datastax.spark&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;spark-cassandra-connector-java_2.10&lt;/artifactId&gt;\r\n\t   &lt;version&gt;1.5.0-M3&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n\r\n       &lt;dependency&gt;\r\n\t   &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\r\n\t   &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\r\n\t   &lt;version&gt;4.1&lt;/version&gt;\r\n       &lt;/dependency&gt;\r\n       &lt;/dependencies&gt;","title":"Spark Job with Multiple Contexts is failing","body":"<p>In the spark application we are making two spark contexts, </p>\n\n<p>1) For reading data from file system.</p>\n\n<p>2) For connecting and loading data to Cassandra.</p>\n\n<p>In one app we can run only one spark spark context, so we are stopping 1st then starting second.</p>\n\n<p>I was getting the following error.</p>\n\n<pre><code>Error 1) 16/03/10 05:40:44 ERROR Utils: Uncaught exception in thread      Thread-2\njava.io.IOException: Target log file already exists        (hdfs:///var/log/spark/apps/application_1457586850134_0001_2)\n    at `org.apache.spark.scheduler.EventLoggingListener.stop(EventLoggingListener.scala:225)`\n</code></pre>\n\n<p>It was because , in hadoop the directory/file need not be present when running the job (1st context), so for running 2nd context the log direcory/log file was present \nI So was the above error.</p>\n\n<p>I solved the issue by setting spark.eventLog.overwrite=true</p>\n\n<hr>\n\n<pre><code>Error 2) WARN executor.CoarseGrainedExecutorBackend: An unknown (ip-10-93-141-13.ec2.internal:48849) driver disconnected. 16/03/10 06:47:37                                                            ERROR executor.CoarseGrainedExecutorBackend: Driver 10.93.141.13:48849disassociated! Shutting down.\n</code></pre>\n\n<p>I tried increasing the </p>\n\n<blockquote>\n  <p>spark.yarn.driver.memoryOverhead=1024</p>\n  \n  <p>spark.yarn.executor.memoryOverhead=1024</p>\n</blockquote>\n\n<p>But the problem is still there.</p>\n\n<hr>\n\n<p>Error 3) </p>\n\n<pre><code>Exception in thread \"main\" java.io.IOException: Failed to connect to /10.93.141.13:46008\n    at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:216)\n    at org.apache.spark.network.client.TransportClientFactory.createClient(TransportClientFactory.java:167)\n    at org.apache.spark.rpc.netty.NettyRpcEnv.createClient(NettyRpcEnv.scala:200)\n    at org.apache.spark.rpc.netty.Outbox$$anon$1.call(Outbox.scala:187)\n    at org.apache.spark.rpc.netty.Outbox$$anon$1.call(Outbox.scala:183)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:262)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n    at java.lang.Thread.run(Thread.java:745)\n</code></pre>\n\n<p>I have checked in in the core node , it is not listening on port 46008.</p>\n\n<hr>\n\n<p>Error 4 )</p>\n\n<pre><code>WARN YarnAllocator: Container marked as failed:              container_1457586850134_0006_01_000006 on host: ip-10-164-169-         46.ec2.internal. Exit status: 1. Diagnostics: Exception from container-   launch.\nContainer id: container_1457586850134_0006_01_000006\nExit code: 1\nStack trace: ExitCodeException exitCode=1:\nat org.apache.hadoop.util.Shell.runCommand(Shell.java:545)\nat org.apache.hadoop.util.Shell.run(Shell.java:456)\nat   org.apache.hadoop.util.Shell$ShellCommandExecutor.execute(Shell.java:722)\nat org.apache.hadoop.yarn.server.nodemanager.DefaultContainerExecutor.launchContainer(DefaultContainerExecutor.java:211)\nat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:302)\nat org.apache.hadoop.yarn.server.nodemanager.containermanager.launcher.ContainerLaunch.call(ContainerLaunch.java:82)\nat java.util.concurrent.FutureTask.run(FutureTask.java:262)\nat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\nat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\nat java.lang.Thread.run(Thread.java:745)\n\n\nContainer exited with a non-zero exit code 1\n\n16/03/10 06:47:17 WARN ApplicationMaster: Reporter thread fails 1 time(s) in a row.\njava.lang.IllegalStateException: RpcEnv already stopped.\nat org.apache.spark.rpc.netty.Dispatcher.postMessage(Dispatcher.scala:159)\n    at org.apache.spark.rpc.netty.Dispatcher.postOneWayMessage(Dispatcher.scala:131)\n    at org.apache.spark.rpc.netty.NettyRpcEnv.send(NettyRpcEnv.scala:192)\n    at org.apache.spark.rpc.netty.NettyRpcEndpointRef.send(NettyRpcEnv.scala:516)\n    at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1$$anonfun$apply$7.apply(YarnAllocator.scala:531)\n    at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1$$anonfun$apply$7.apply(YarnAllocator.scala:512)\n    at scala.Option.foreach(Option.scala:236)\n    at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1.apply(YarnAllocator.scala:512)\n    at org.apache.spark.deploy.yarn.YarnAllocator$$anonfun$processCompletedContainers$1.apply(YarnAllocator.scala:442)\n    at scala.collection.Iterator$class.foreach(Iterator.scala:727)\n    at scala.collection.AbstractIterator.foreach(Iterator.scala:1157)\n    at scala.collection.IterableLike$class.foreach(IterableLike.scala:72)\n    at scala.collection.AbstractIterable.foreach(Iterable.scala:54)\n    at org.apache.spark.deploy.yarn.YarnAllocator.processCompletedContainers(YarnAllocator.scala:442)\n    at org.apache.spark.deploy.yarn.YarnAllocator.allocateResources(YarnAllocator.scala:242)\n    at org.apache.spark.deploy.yarn.ApplicationMaster$$anon$1.run(ApplicationMaster.scala:368)\n</code></pre>\n\n<p>The above error is since the container is failing continously.</p>\n\n<hr>\n\n<p>It seems the above  spark issue's due to  multiple contexts, as raised in the mailing list.</p>\n\n<p><a href=\"https://mail-archives.apache.org/mod_mbox/spark-issues/201602.mbox/%3CJIRA.12936774.1454603470000.316442.1454707659978@Atlassian.JIRA%3E\" rel=\"nofollow\">https://mail-archives.apache.org/mod_mbox/spark-issues/201602.mbox/%3CJIRA.12936774.1454603470000.316442.1454707659978@Atlassian.JIRA%3E</a></p>\n\n<p>sparkContext.stop() is not able to free up the resources.</p>\n\n<hr>\n\n<p>I'm running the using the following options</p>\n\n<pre><code>--class com.mobi.vserv.driver.Query5kPids                            \n  --conf spark.eventLog.overwrite=true  \n  --conf spark.yarn.executor.memoryOverhead=1024                       \n  --conf spark.yarn.driver.memoryOverhead=1024                             \n  --num-executors 4                \n  --executor-memory 3g            \n  --executor-cores 2                  \n  --driver-memory 3g\n</code></pre>\n\n<p>I'm running on EMR , with a master and 2 slave nodes, master has 8 core and 16GB memory and each slave has 4 core 5120 MB available memory.</p>\n\n<p>Below is my code.</p>\n\n<pre><code>    public class Query5kPids implements Serializable{\n\n    static List&lt;UserSetGet&gt; ListFromS3 = new ArrayList&lt;UserSetGet&gt;();\n\n    public static void main(String[] args) throws JSONException, IOException, InterruptedException, URISyntaxException {\n\n\n    SparkConf conf = new SparkConf();\n    conf.setAppName(\"Spark-Cassandra Integration\");\n    conf.setMaster(\"yarn-cluster\");\n    conf.set(\"spark.cassandra.connection.host\", \"12.16.193.19\");\n    conf.set(\"spark.cassandra.connection.port\", \"9042\");\n\n\n    SparkConf conf1 = new SparkConf().setAppName(\"SparkAutomation\").setMaster(\"yarn-cluster\");\n\n    Query5kPids app1 = new Query5kPids(conf1);\n    app1.run1(file);\n\n    Query5kPids app = new Query5kPids(conf);\n    System.out.println(\"Both RDD has been generated\");\n    app.run();\n\n   }\n\n   private void run() throws JSONException, IOException, InterruptedException {\n\n   JavaSparkContext sc = new JavaSparkContext(conf);\n   query(sc);\n   sc.stop();\n   }\n\n   private void run1(File file) throws JSONException, IOException,     InterruptedException {\n   JavaSparkContext sc = new JavaSparkContext(conf);\n   getData(sc,file);\n   sc.stop();\n\n  }\n\n   private void getData(JavaSparkContext sc, File file) {\n\n   JavaRDD&lt;String&gt; Data = sc.textFile(file.toString());\n   System.out.println(\"RDD Count is \" + Data.count());\n\n   // Other map opetations to convert to UserSetGet RDD.\n   ListFromS3 = Data.collect();\n\n   }\n   private void query(JavaSparkContext sc) {\n\n   System.out.prin`enter code here`tln(\"RDD Count is \" +  ListFromS3.size());\n   //This gets printed. \n   //Which means it application is coming to the second part of the program.\n\n   for (int i = 0; i &lt; ListFromS3.size(); i++) {\n\n   sb.append(ListFromS3.get(i).getApnid());\n   sb.append(',');\n   }\n   sb.setLength(sb.length() - 3);\n\n   JavaRDD&lt;CassandraRow&gt; cassandraRDD = CassandraJavaUtil.javaFunctions(sc).cassandraTable(\"dmp\", \"user_profile_spark_test\").select       (\"app_day_count\", \"app_first_seen\",\"app_last_seen\", \"app_usage_count\", \"total_day_count\", \"total_usage_count\")\n .where(\"apnid IN ('\" + sb + \"')\");\n\n   if(cassandraRDD.isEmpty()){\n\n   JavaRDD&lt;UserSetGet&gt; rddFromGz = sc.parallelize(ListFromS3);\n\n   CassandraJavaUtil.javaFunctions(rddFromGz).writerBuilder(\"dmp\", \"user_profile_spark_test\", mapToRow(UserSetGet.class)).saveToCassand();\n        logger.info(\"DataSaved\");\n   }\n   }\n\n   }\n</code></pre>\n\n<p>Below is my POM</p>\n\n<pre><code>   &lt;dependencies&gt;\n   &lt;dependency&gt;\n   &lt;groupId&gt;org.apache-extras.cassandra-jdbc&lt;/groupId&gt;\n   &lt;artifactId&gt;cassandra-jdbc&lt;/artifactId&gt;\n   &lt;version&gt;1.2.5&lt;/version&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n   &lt;groupId&gt;junit&lt;/groupId&gt;\n   &lt;artifactId&gt;junit&lt;/artifactId&gt;\n   &lt;version&gt;3.8.1&lt;/version&gt;\n   &lt;scope&gt;test&lt;/scope&gt;\n   &lt;/dependency&gt;\n   &lt;dependency&gt;\n   &lt;groupId&gt;org.codehaus.jettison&lt;/groupId&gt;\n   &lt;artifactId&gt;jettison&lt;/artifactId&gt;\n   &lt;version&gt;1.3.7&lt;/version&gt;\n   &lt;/dependency&gt;\n   &lt;dependency&gt;\n   &lt;groupId&gt;log4j&lt;/groupId&gt;\n   &lt;artifactId&gt;log4j&lt;/artifactId&gt;\n   &lt;version&gt;1.2.17&lt;/version&gt;\n   &lt;/dependency&gt;\n\n\n   &lt;dependency&gt;\n   &lt;groupId&gt;org.apache.spark&lt;/groupId&gt;\n   &lt;artifactId&gt;spark-core_2.10&lt;/artifactId&gt;\n   &lt;version&gt;1.6.0&lt;/version&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n   &lt;groupId&gt;com.datastax.spark&lt;/groupId&gt;\n   &lt;artifactId&gt;spark-cassandra-connector_2.10&lt;/artifactId&gt;\n   &lt;version&gt;1.5.0-M1&lt;/version&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n   &lt;groupId&gt;com.datastax.cassandra&lt;/groupId&gt;\n   &lt;artifactId&gt;cassandra-driver-core&lt;/artifactId&gt;\n   &lt;version&gt;2.1.6&lt;/version&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n   &lt;groupId&gt;com.datastax.spark&lt;/groupId&gt;\n   &lt;artifactId&gt;spark-cassandra-connector-java_2.10&lt;/artifactId&gt;\n   &lt;version&gt;1.5.0-M3&lt;/version&gt;\n   &lt;/dependency&gt;\n\n   &lt;dependency&gt;\n   &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n   &lt;artifactId&gt;commons-collections4&lt;/artifactId&gt;\n   &lt;version&gt;4.1&lt;/version&gt;\n   &lt;/dependency&gt;\n   &lt;/dependencies&gt;\n</code></pre>\n"},{"tags":["java","apache-spark","cassandra","spark-cassandra-connector"],"answers":[{"tags":[],"owner":{"account_id":6244483,"reputation":13767,"user_id":4856939,"accept_rate":82,"display_name":"David Griffin"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1458213595,"creation_date":1458213595,"answer_id":36059024,"question_id":36055542,"body_markdown":"You can add an auto-incrementing ID coloumn -- see my **[DataFrame-ified Zip With Index][1]** solution. Then you can query by the newly-created `id` column:\r\n\r\n    SELECT ... WHERE id &gt;= 0 and id &lt; 10;\r\n\r\nEtc.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/30304810/dataframe-ified-zipwithindex","title":"How to get range of rows using spark in Cassandra","body":"<p>You can add an auto-incrementing ID coloumn -- see my <strong><a href=\"https://stackoverflow.com/questions/30304810/dataframe-ified-zipwithindex\">DataFrame-ified Zip With Index</a></strong> solution. Then you can query by the newly-created <code>id</code> column:</p>\n\n<pre><code>SELECT ... WHERE id &gt;= 0 and id &lt; 10;\n</code></pre>\n\n<p>Etc.</p>\n"}],"owner":{"account_id":7891616,"reputation":201,"user_id":5961575,"accept_rate":50,"display_name":"Rahul Koshaley"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":522,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":36059024,"answer_count":1,"score":0,"last_activity_date":1660882370,"creation_date":1458204597,"question_id":36055542,"body_markdown":"I have a table in cassandra whose structure is like this \r\n\r\n    CREATE TABLE dmp.Table (\r\n\t\r\n    pid text PRIMARY KEY,\r\n\tday_count map&lt;text, int&gt;, \r\n\tfirst_seen map&lt;text, timestamp&gt;, \r\n\tlast_seen map&lt;text, timestamp&gt;, \r\n\tusage_count map&lt;text, int&gt;\r\n    }\r\n\r\nNow I&#39;m trying to query it using spark-cassandra driver , So is there any where I can get the chunks of data.\r\nAs in if I have 100 rows , I should be able to get 0-10 rows then 10 -20 and so on.\r\n\r\n     CassandraJavaRDD&lt;CassandraRow&gt; cassandraRDD = CassandraJavaUtil.javaFunctions(javaSparkContext).cassandraTable(keySpaceName, tableName);\r\n\r\n I&#39;m asking this as there is no column in my table where I can Query using IN clause to get range of rows.\r\n","title":"How to get range of rows using spark in Cassandra","body":"<p>I have a table in cassandra whose structure is like this </p>\n\n<pre><code>CREATE TABLE dmp.Table (\n\npid text PRIMARY KEY,\nday_count map&lt;text, int&gt;, \nfirst_seen map&lt;text, timestamp&gt;, \nlast_seen map&lt;text, timestamp&gt;, \nusage_count map&lt;text, int&gt;\n}\n</code></pre>\n\n<p>Now I'm trying to query it using spark-cassandra driver , So is there any where I can get the chunks of data.\nAs in if I have 100 rows , I should be able to get 0-10 rows then 10 -20 and so on.</p>\n\n<pre><code> CassandraJavaRDD&lt;CassandraRow&gt; cassandraRDD = CassandraJavaUtil.javaFunctions(javaSparkContext).cassandraTable(keySpaceName, tableName);\n</code></pre>\n\n<p>I'm asking this as there is no column in my table where I can Query using IN clause to get range of rows.</p>\n"},{"tags":["java","mysql","database","spring-boot","mysql-connector"],"comments":[{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1656000915,"post_id":72601204,"comment_id":128470998,"body_markdown":"Show us the connection parameters.  Verify that the encoding in the client is UTF-8.","body":"Show us the connection parameters.  Verify that the encoding in the client is UTF-8."},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660668703,"post_id":72601204,"comment_id":129584725,"body_markdown":"I did not set character encoding in application.properties, it uses default, which is UTF-8","body":"I did not set character encoding in application.properties, it uses default, which is UTF-8"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660668852,"post_id":72601204,"comment_id":129584782,"body_markdown":"mysql connector/j 8.0.29 has this change in its release https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-29.html#mysqld-8-0-29-charset","body":"mysql connector/j 8.0.29 has this change in its release <a href=\"https://dev.mysql.com/doc/relnotes/mysql/8.0/en/news-8-0-29.html#mysqld-8-0-29-charset\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/relnotes/mysql/8.0/en/&hellip;</a>"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660669072,"post_id":72601204,"comment_id":129584852,"body_markdown":"anybody encounter this problem?","body":"anybody encounter this problem?"},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1660669503,"post_id":72601204,"comment_id":129584989,"body_markdown":"&quot;UTF-8&quot; is not a MySQL Character Set.  Please provide the exact text of the connection.  To check the client encoding, can you display the HEX of what is about to be inserted.","body":"&quot;UTF-8&quot; is not a MySQL Character Set.  Please provide the exact text of the connection.  To check the client encoding, can you display the HEX of what is about to be inserted."},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660697469,"post_id":72601204,"comment_id":129592032,"body_markdown":"this is the connection string:\n\nspring.datasource.url=jdbc:mysql://localhost/${xpac.sql-database-name}?serverTimezone=Asia/Tokyo","body":"this is the connection string:  spring.datasource.url=jdbc:mysql://localhost/${xpac.sql-data&zwnj;&#8203;base-name}?serverTim&zwnj;&#8203;ezone=Asia/Tokyo"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660697564,"post_id":72601204,"comment_id":129592047,"body_markdown":"I edit my post and included information regarding connection string at the bottom","body":"I edit my post and included information regarding connection string at the bottom"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660697617,"post_id":72601204,"comment_id":129592061,"body_markdown":"This problem happens when I upgraded mysql connection/j version from 8.0.27 to 8.0.29","body":"This problem happens when I upgraded mysql connection/j version from 8.0.27 to 8.0.29"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660697643,"post_id":72601204,"comment_id":129592065,"body_markdown":"In mysql connection/j version from 8.0.27, this problem does not happen","body":"In mysql connection/j version from 8.0.27, this problem does not happen"},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1660711640,"post_id":72601204,"comment_id":129594074,"body_markdown":"`dirpath` is in the error message; `path` is in the image.","body":"<code>dirpath</code> is in the error message; <code>path</code> is in the image."},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660714381,"post_id":72601204,"comment_id":129594597,"body_markdown":"its `path`....not `dirpath`","body":"its <code>path</code>....not <code>dirpath</code>"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660714436,"post_id":72601204,"comment_id":129594614,"body_markdown":"I tried to use the connection string `&amp;useUnicode=yes&amp;characterEncoding=UTF-8`...but the error still happens","body":"I tried to use the connection string <code>&amp;useUnicode=yes&amp;characterEncoding=UTF-8</code>...but the error still happens"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660714512,"post_id":72601204,"comment_id":129594636,"body_markdown":"I also tried to change server settings, `my.ini` ...default-character-set = utf8mb4, character-set-server = utf8mb4....but still the error happens","body":"I also tried to change server settings, <code>my.ini</code> ...default-character-set = utf8mb4, character-set-server = utf8mb4....but still the error happens"},{"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"score":0,"creation_date":1660714572,"post_id":72601204,"comment_id":129594648,"body_markdown":"The server itself when I tried to insert string in the table, there is no problem...seems its the mysql connector/j for ver 8.0.29 is causing the problem....","body":"The server itself when I tried to insert string in the table, there is no problem...seems its the mysql connector/j for ver 8.0.29 is causing the problem...."},{"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"score":0,"creation_date":1660754690,"post_id":72601204,"comment_id":129609331,"body_markdown":"If possible, dump a string from Java in hex.  (I agree that the minor upgrade should not have led to the error; I am trying to figure out what is wrong now, then work backward.)","body":"If possible, dump a string from Java in hex.  (I agree that the minor upgrade should not have led to the error; I am trying to figure out what is wrong now, then work backward.)"}],"answers":[{"tags":[],"owner":{"account_id":529143,"reputation":136619,"user_id":1766831,"display_name":"Rick James"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660755041,"creation_date":1660755041,"answer_id":73392230,"question_id":72601204,"body_markdown":"Somewhere in the processing, either cp932 or sjis was used.\r\n\r\n&#39;Proof&#39; -- Using either `CHARACTER SET` `cp932` or `sjis` in\r\n\r\n    HEX(CONVERT(&#39;怖い話&#39; USING ...)) =&gt; &#39;957C82A29862&#39;\r\n\r\nBased on your comments it seems to be caused by a change in Connector/J\r\n\r\n(No, I don&#39;t know how to fix it; but this might help in chasing it down.)","title":"Mysql connector/j 8.0.29 causes incorrect string exception","body":"<p>Somewhere in the processing, either cp932 or sjis was used.</p>\n<p>'Proof' -- Using either <code>CHARACTER SET</code> <code>cp932</code> or <code>sjis</code> in</p>\n<pre><code>HEX(CONVERT('怖い話' USING ...)) =&gt; '957C82A29862'\n</code></pre>\n<p>Based on your comments it seems to be caused by a change in Connector/J</p>\n<p>(No, I don't know how to fix it; but this might help in chasing it down.)</p>\n"},{"tags":[],"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660882346,"creation_date":1660882346,"answer_id":73411756,"question_id":72601204,"body_markdown":"Found the cause.\r\n\r\nThe java application itself when run as service uses the OS default character encoding. Which is obviously not UTF-8. This causes unexpected errors when the application is interacting with a database.\r\n\r\nWhen running the application, it is advisable to explicitly specify that it should use UTF-8. And this is done by specifying the java option `Dfile.encoding=utf-8`\r\n\r\nPerhaps in mysql ver 8.0.27, it forces data to be saved to use UTF-8.\r\nThen when it was updated to mysql ver 8.0.29 this was removed and you have to specify explicitly that you will use UTF-8 encoding.\r\n\r\n\r\n","title":"Mysql connector/j 8.0.29 causes incorrect string exception","body":"<p>Found the cause.</p>\n<p>The java application itself when run as service uses the OS default character encoding. Which is obviously not UTF-8. This causes unexpected errors when the application is interacting with a database.</p>\n<p>When running the application, it is advisable to explicitly specify that it should use UTF-8. And this is done by specifying the java option <code>Dfile.encoding=utf-8</code></p>\n<p>Perhaps in mysql ver 8.0.27, it forces data to be saved to use UTF-8.\nThen when it was updated to mysql ver 8.0.29 this was removed and you have to specify explicitly that you will use UTF-8 encoding.</p>\n"}],"owner":{"account_id":3106235,"reputation":199,"user_id":2628944,"display_name":"jetpack"},"comment_count":15,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":444,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660882346,"creation_date":1655115475,"question_id":72601204,"body_markdown":"I am having trouble inserting utf8 string into a mysql database using ‘mysql connector/j ver 8.0.29’ \r\n\r\nI am working on a java springboot application.\r\n\r\nThis problem does not happen in ‘mysql connector/j ver 8.0.27’\r\n\r\nAnybody encounter this problem?\r\n\r\n—-\r\nMysql server is also 8.0.29 but there is no problem since I can successfully execute ‘INSERT’ sql command using UTF-8 on the server itself\r\n\r\nIt is only when sending ‘INSERT’ sql command via client pc using springboot that this problem happen\r\n\r\nServer pc OS is windows10, client pc is Windows11\r\n\r\n\r\nThis is my table.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nThis is the error.\r\n\r\n```\r\nCaused by: java.sql.SQLException: Incorrect string value: &#39;\\x95|\\x82\\xA2\\x98b&#39; for column &#39;path&#39; at row 1\r\n\tat com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\r\n\tat com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\r\n\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/vSTCT.png\r\n\r\n\r\n\r\n----------\r\n\r\nthis is the connection string:\r\n\r\nspring.datasource.url=jdbc:mysql://localhost/${xpac.sql-database-name}?serverTimezone=Asia/Tokyo\r\n\r\n\r\nthis is the error:\r\n\r\n```\r\nCaused by: java.sql.SQLException: Incorrect string value: &#39;\\x95|\\x82\\xA2\\x98b&#39; for column &#39;path&#39; at row 1 at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\r\n```\r\n\r\n怖い話 ---&gt; &#39;\\x95|\\x82\\xA2\\x98b&#39; ","title":"Mysql connector/j 8.0.29 causes incorrect string exception","body":"<p>I am having trouble inserting utf8 string into a mysql database using ‘mysql connector/j ver 8.0.29’</p>\n<p>I am working on a java springboot application.</p>\n<p>This problem does not happen in ‘mysql connector/j ver 8.0.27’</p>\n<p>Anybody encounter this problem?</p>\n<p>—-\nMysql server is also 8.0.29 but there is no problem since I can successfully execute ‘INSERT’ sql command using UTF-8 on the server itself</p>\n<p>It is only when sending ‘INSERT’ sql command via client pc using springboot that this problem happen</p>\n<p>Server pc OS is windows10, client pc is Windows11</p>\n<p>This is my table.</p>\n<p><a href=\"https://i.stack.imgur.com/vSTCT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vSTCT.png\" alt=\"enter image description here\" /></a></p>\n<p>This is the error.</p>\n<pre><code>Caused by: java.sql.SQLException: Incorrect string value: '\\x95|\\x82\\xA2\\x98b' for column 'path' at row 1\n    at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\n    at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)\n\n</code></pre>\n<hr />\n<p>this is the connection string:</p>\n<p>spring.datasource.url=jdbc:mysql://localhost/${xpac.sql-database-name}?serverTimezone=Asia/Tokyo</p>\n<p>this is the error:</p>\n<pre><code>Caused by: java.sql.SQLException: Incorrect string value: '\\x95|\\x82\\xA2\\x98b' for column 'path' at row 1 at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:129)\n</code></pre>\n<p>怖い話 ---&gt; '\\x95|\\x82\\xA2\\x98b'</p>\n"},{"tags":["java","aspose","aspose.words"],"answers":[{"tags":[],"owner":{"account_id":11398698,"reputation":1809,"user_id":8356224,"display_name":"Alexey Noskov"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1660882318,"creation_date":1660882318,"answer_id":73411752,"question_id":73411549,"body_markdown":"You should simply set line style of the cell borders to none:\r\n``` java\r\nbuilder.getCellFormat().getBorders().setLineStyle(LineStyle.NONE);\r\n```\r\nIn this case borders will not be visible.","title":"Hide the border for cell in table using Aspose java","body":"<p>You should simply set line style of the cell borders to none:</p>\n<pre class=\"lang-java prettyprint-override\"><code>builder.getCellFormat().getBorders().setLineStyle(LineStyle.NONE);\n</code></pre>\n<p>In this case borders will not be visible.</p>\n"}],"owner":{"account_id":7038407,"reputation":35,"user_id":5391609,"display_name":"suresh sadanala"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":346,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73411752,"answer_count":1,"score":0,"last_activity_date":1660882318,"creation_date":1660879608,"question_id":73411549,"body_markdown":"We have inserted the page numbers and footer text in the Footer using table but we want to hide the  cell border for the table.\r\n\r\n[enter link description here][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/43094465/insert-page-number-with-text-in-footer-aspose-word-java","title":"Hide the border for cell in table using Aspose java","body":"<p>We have inserted the page numbers and footer text in the Footer using table but we want to hide the  cell border for the table.</p>\n<p><a href=\"https://stackoverflow.com/questions/43094465/insert-page-number-with-text-in-footer-aspose-word-java\">enter link description here</a></p>\n"},{"tags":["java","javafx","nullpointerexception"],"comments":[{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1660884853,"post_id":73411513,"comment_id":129643699,"body_markdown":"Follow the appropriate instructions from https://openjfx.io/openjfx-docs/.","body":"Follow the appropriate instructions from <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs</a>."}],"answers":[{"tags":[],"owner":{"account_id":9298667,"reputation":152,"user_id":6904872,"display_name":"Naresh Sharma"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660882008,"creation_date":1660882008,"answer_id":73411723,"question_id":73411513,"body_markdown":"Just prefix `/` to the name of your fxml file \r\n```\r\nFXMLLoader(getClass().getResource(&quot;/main.fxml&quot;))\r\n```\r\nWhen you dont put a forward slash your URL is being formed as `testify/Runtime/main.fxml`\r\nWhereas your resource is inside the resource folder ","title":"JavaFX cannot load my FXML, returning null pointer exception","body":"<p>Just prefix <code>/</code> to the name of your fxml file</p>\n<pre><code>FXMLLoader(getClass().getResource(&quot;/main.fxml&quot;))\n</code></pre>\n<p>When you dont put a forward slash your URL is being formed as <code>testify/Runtime/main.fxml</code>\nWhereas your resource is inside the resource folder</p>\n"}],"owner":{"account_id":5013344,"reputation":129,"user_id":4028899,"display_name":"Hopelessdecoy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1660891191,"accepted_answer_id":73411723,"answer_count":1,"score":0,"last_activity_date":1660882008,"creation_date":1660878998,"question_id":73411513,"body_markdown":"I am not sure what the error is I am converting a home project from Swing GUI to JavaFX, using scenebuilder and having a hard time. Please help?\r\nDetails on my error and project structure below:\r\n\r\n    Exception in Application start method\r\n    java.lang.reflect.InvocationTargetException\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\r\n    \tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.base/java.lang.reflect.Method.invoke(Method.java:568)\r\n    \tat java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\r\n    Caused by: java.lang.RuntimeException: Exception in Application start method\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\r\n    \tat java.base/java.lang.Thread.run(Thread.java:833)\r\n    Caused by: java.lang.IllegalStateException: Location is not set.\r\n    \tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2541)\r\n    \tat javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\r\n    \tat testify.Runtime.App.start(App.java:22)\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\r\n    \tat java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\r\n    \tat javafx.graphics@18.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\r\n    \tat javafx.graphics@18.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\r\n    \tat javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n    \tat javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\r\n    \t... 1 more\r\n    Exception running application testify.Runtime.App\r\n    \r\n    Process finished with exit code 1\r\n\r\nhere is my project tree:\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/vWpbd.png\r\n\r\nHere is my main code:\r\n\r\n    package testify.Runtime;\r\n    \r\n    import javafx.application.Application;\r\n    import javafx.fxml.FXMLLoader;\r\n    import javafx.scene.Parent;\r\n    import javafx.scene.Scene;\r\n    import javafx.stage.Stage;\r\n    \r\n    import java.io.IOException;\r\n    \r\n    public class App extends Application {\r\n    \r\n     public static void main(String[] args) {\r\n        launch(args);\r\n     }\r\n    \r\n     @Override\r\n     public void start(Stage primaryStage) throws IOException {\r\n        FXMLLoader loader= new FXMLLoader(getClass().getResource(&quot;main.fxml&quot;));\r\n        Parent root = (Parent) loader.load();\r\n        Scene home = new Scene(root);\r\n    \r\n         primaryStage.setTitle(&quot;Testify&quot;);\r\n         primaryStage.setScene(home); \r\n             primaryStage.show();\r\n        }\r\n    }\r\n\r\nIgnore this line for some reason I cannot post a &quot;mostly code&quot; question without having a paragraph written about it on stack overflow and I am not sure why.... never had this issue before on here.","title":"JavaFX cannot load my FXML, returning null pointer exception","body":"<p>I am not sure what the error is I am converting a home project from Swing GUI to JavaFX, using scenebuilder and having a hard time. Please help?\nDetails on my error and project structure below:</p>\n<pre><code>Exception in Application start method\njava.lang.reflect.InvocationTargetException\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.launchApplicationWithArgs(LauncherImpl.java:465)\n    at javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.launchApplication(LauncherImpl.java:364)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at java.base/sun.launcher.LauncherHelper$FXHelper.main(LauncherHelper.java:1071)\nCaused by: java.lang.RuntimeException: Exception in Application start method\n    at javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:901)\n    at javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.IllegalStateException: Location is not set.\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.loadImpl(FXMLLoader.java:2541)\n    at javafx.fxml@18.0.1/javafx.fxml.FXMLLoader.load(FXMLLoader.java:2516)\n    at testify.Runtime.App.start(App.java:22)\n    at javafx.graphics@18.0.1/com.sun.javafx.application.LauncherImpl.lambda$launchApplication1$9(LauncherImpl.java:847)\n    at javafx.graphics@18.0.1/com.sun.javafx.application.PlatformImpl.lambda$runAndWait$12(PlatformImpl.java:484)\n    at javafx.graphics@18.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$10(PlatformImpl.java:457)\n    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399)\n    at javafx.graphics@18.0.1/com.sun.javafx.application.PlatformImpl.lambda$runLater$11(PlatformImpl.java:456)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:96)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at javafx.graphics@18.0.1/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:184)\n    ... 1 more\nException running application testify.Runtime.App\n\nProcess finished with exit code 1\n</code></pre>\n<p>here is my project tree:</p>\n<p><a href=\"https://i.stack.imgur.com/vWpbd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vWpbd.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is my main code:</p>\n<pre><code>package testify.Runtime;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\nimport java.io.IOException;\n\npublic class App extends Application {\n\n public static void main(String[] args) {\n    launch(args);\n }\n\n @Override\n public void start(Stage primaryStage) throws IOException {\n    FXMLLoader loader= new FXMLLoader(getClass().getResource(&quot;main.fxml&quot;));\n    Parent root = (Parent) loader.load();\n    Scene home = new Scene(root);\n\n     primaryStage.setTitle(&quot;Testify&quot;);\n     primaryStage.setScene(home); \n         primaryStage.show();\n    }\n}\n</code></pre>\n<p>Ignore this line for some reason I cannot post a &quot;mostly code&quot; question without having a paragraph written about it on stack overflow and I am not sure why.... never had this issue before on here.</p>\n"},{"tags":["java","jboss","wildfly","metrics","wildfly-26"],"answers":[{"tags":[],"owner":{"account_id":24154839,"reputation":31,"user_id":18119206,"display_name":"CNC-Parade"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1645607055,"creation_date":1645446824,"answer_id":71206383,"question_id":71206212,"body_markdown":"Oh i spend a couple of hours to get rid of this problem.. but only minutes after writing this post, i found the &quot;bad guy&quot;.\r\nThe Microprofile Version 3.3 (on Wildfly 20) ignored annotations (like `@Timed`) at interface-methods. The new Version 4.1 (Wildfly 26) regards them..\r\n\r\npretty easy, afterwards :)\r\n\r\n-----------------\r\n\r\n**marginal note:**\r\nIf you have more than one WAR deployed on your Wildfly and one of them is using the public API of an other one, then you&#39;ll run into *problems with hot-deployments*.\r\nI assume, in my case it occurs because i have placed the `Timed`-annotation at the implementation-class and not at the interface, that is used as ResteasyClient-proxy. Every time i deploy the depending WAR **after** the rest-api-defining WAR, i got an exception: `no metric mapped`.\r\nA redeployment of the rest-api-defining WAR fixes this issue :)","title":"Problem with Microprofile Metrics on Wildfly 26","body":"<p>Oh i spend a couple of hours to get rid of this problem.. but only minutes after writing this post, i found the &quot;bad guy&quot;.\nThe Microprofile Version 3.3 (on Wildfly 20) ignored annotations (like <code>@Timed</code>) at interface-methods. The new Version 4.1 (Wildfly 26) regards them..</p>\n<p>pretty easy, afterwards :)</p>\n<hr />\n<p><strong>marginal note:</strong>\nIf you have more than one WAR deployed on your Wildfly and one of them is using the public API of an other one, then you'll run into <em>problems with hot-deployments</em>.\nI assume, in my case it occurs because i have placed the <code>Timed</code>-annotation at the implementation-class and not at the interface, that is used as ResteasyClient-proxy. Every time i deploy the depending WAR <strong>after</strong> the rest-api-defining WAR, i got an exception: <code>no metric mapped</code>.\nA redeployment of the rest-api-defining WAR fixes this issue :)</p>\n"},{"tags":[],"owner":{"account_id":3360693,"reputation":3,"user_id":2822536,"display_name":"Jakkalas"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1648046176,"creation_date":1648046176,"answer_id":71589086,"question_id":71206212,"body_markdown":"The /metrics endpoint is queried using an anonymous user usually(prometheus scraper), this means you may have to enable the MONITOR role to include all. That way the anonymous access to /metrics will be able to read the additional thread data.\r\n\r\n^^The security impact of this config I&#39;m not sure of.\r\n","title":"Problem with Microprofile Metrics on Wildfly 26","body":"<p>The /metrics endpoint is queried using an anonymous user usually(prometheus scraper), this means you may have to enable the MONITOR role to include all. That way the anonymous access to /metrics will be able to read the additional thread data.</p>\n<p>^^The security impact of this config I'm not sure of.</p>\n"},{"tags":[],"owner":{"account_id":997845,"reputation":111,"user_id":1013375,"display_name":"Miguel Becerra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660881168,"creation_date":1660881168,"answer_id":73411675,"question_id":71206212,"body_markdown":"in my case was that I had duplicated the name with other method in @Timed(name=&quot;&quot;)...","title":"Problem with Microprofile Metrics on Wildfly 26","body":"<p>in my case was that I had duplicated the name with other method in @Timed(name=&quot;&quot;)...</p>\n"}],"owner":{"account_id":24154839,"reputation":31,"user_id":18119206,"display_name":"CNC-Parade"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1246,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":71206383,"answer_count":3,"score":0,"last_activity_date":1660881168,"creation_date":1645446054,"question_id":71206212,"body_markdown":"i&#39;m currently upgrading from Wildfly 20 to Wildfly 26. The `standalone.xml` doesn&#39;t start, because of an Injection of `MetricRegistry` and the newly missing `microprofile.metrics-smallrye`-extension (already described under: https://stackoverflow.com/questions/69479379/microprofile-metrics-do-not-show-custom-metrics-on-wildfly-25).\r\nBut if i start the `standalone-microprofile.xml` or add the extensions (see CLI-commands below), i ran into the same error.\r\n\r\nMaybe the Keycloak-Integration-Workaround is conflicting. The Wildfly-internal OIDC adapter is actualy not working in bearer-only-mode. So i installed the current keycloak-client (`keycloak-oidc-wildfly-adapter-16.1.1`) an the workaround (see as last code-template).\r\n\r\n\r\n```\r\n2022-02-21 12:44:09,176 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.deployment.unit.&quot;xyz.war&quot;.WeldStartService: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;xyz.war&quot;.WeldStartService: Failed to start service\r\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1731)\r\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\r\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\r\n        at java.base/java.lang.Thread.run(Thread.java:834)\r\nCaused by: org.jboss.weld.exceptions.DeploymentException: SRMET00013: Description is different from the description in previous usage\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AbstractDeploymentContainerEvent.fire(AbstractDeploymentContainerEvent.java:38)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AfterDeploymentValidationImpl.fire(AfterDeploymentValidationImpl.java:28)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.WeldStartup.validateBeans(WeldStartup.java:510)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:93)\r\n        at org.jboss.as.weld@26.0.1.Final//org.jboss.as.weld.WeldStartService.start(WeldStartService.java:98)\r\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\r\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\r\n        ... 6 more\r\nCaused by: java.lang.IllegalStateException: SRMET00013: Description is different from the description in previous usage\r\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.verifyMetadataEquality(MetricsRegistryImpl.java:188)\r\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.get(MetricsRegistryImpl.java:459)\r\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.get(MetricsRegistryImpl.java:402)\r\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.timer(MetricsRegistryImpl.java:371)\r\n        at io.smallrye.metrics//io.smallrye.metrics.setup.MetricsMetadata.registerMetrics(MetricsMetadata.java:111)\r\n        at io.smallrye.metrics//io.smallrye.metrics.setup.MetricCdiInjectionExtension.registerMetrics(MetricCdiInjectionExtension.java:186)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.injection.MethodInvocationStrategy$SpecialParamPlusBeanManagerStrategy.invoke(MethodInvocationStrategy.java:187)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\r\n        at javax.enterprise.api//javax.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:124)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.util.Observers.notify(Observers.java:166)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\r\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AbstractDeploymentContainerEvent.fire(AbstractDeploymentContainerEvent.java:35)\r\n```\r\n\r\nCLI-Commands to extend the standalone.xml\r\n```\r\nwildfly/bin/jboss-cli.sh -c &quot;/extension=org.wildfly.extension.microprofile.metrics-smallrye:add()&quot;\r\nwildfly/bin/jboss-cli.sh -c &quot;/subsystem=microprofile-metrics-smallrye:add()&quot;\r\n\r\nwildfly/bin/jboss-cli.sh -c &quot;/extension=org.wildfly.extension.microprofile.fault-tolerance-smallrye:add()&quot;\r\nwildfly/bin/jboss-cli.sh -c &quot;/subsystem=microprofile-fault-tolerance-smallrye:add()&quot;\r\n```\r\n\r\n\r\nOIDC-Workaround (installation of keycloak client)\r\n```\r\nembed-server --server-config=${server.config:standalone.xml}\r\n\r\nbatch\r\n/subsystem=undertow/application-security-domain=other:undefine-attribute(name=security-domain)\r\n/subsystem=undertow/application-security-domain=other:write-attribute(name=http-authentication-factory,value=keycloak-http-authentication)\r\nrun-batch\r\n\r\n/subsystem=ejb3/application-security-domain=other:write-attribute(name=security-domain,value=KeycloakDomain)\r\n\r\nreload\r\n\r\n```","title":"Problem with Microprofile Metrics on Wildfly 26","body":"<p>i'm currently upgrading from Wildfly 20 to Wildfly 26. The <code>standalone.xml</code> doesn't start, because of an Injection of <code>MetricRegistry</code> and the newly missing <code>microprofile.metrics-smallrye</code>-extension (already described under: <a href=\"https://stackoverflow.com/questions/69479379/microprofile-metrics-do-not-show-custom-metrics-on-wildfly-25\">MicroProfile Metrics do not show custom metrics on Wildfly 25</a>).\nBut if i start the <code>standalone-microprofile.xml</code> or add the extensions (see CLI-commands below), i ran into the same error.</p>\n<p>Maybe the Keycloak-Integration-Workaround is conflicting. The Wildfly-internal OIDC adapter is actualy not working in bearer-only-mode. So i installed the current keycloak-client (<code>keycloak-oidc-wildfly-adapter-16.1.1</code>) an the workaround (see as last code-template).</p>\n<pre><code>2022-02-21 12:44:09,176 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-8) MSC000001: Failed to start service jboss.deployment.unit.&quot;xyz.war&quot;.WeldStartService: org.jboss.msc.service.StartException in service jboss.deployment.unit.&quot;xyz.war&quot;.WeldStartService: Failed to start service\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1731)\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$ControllerTask.run(ServiceControllerImpl.java:1559)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.ContextClassLoaderSavingRunnable.run(ContextClassLoaderSavingRunnable.java:35)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor.safeRun(EnhancedQueueExecutor.java:1990)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.doRunTask(EnhancedQueueExecutor.java:1486)\n        at org.jboss.threads@2.4.0.Final//org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1377)\n        at java.base/java.lang.Thread.run(Thread.java:834)\nCaused by: org.jboss.weld.exceptions.DeploymentException: SRMET00013: Description is different from the description in previous usage\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AbstractDeploymentContainerEvent.fire(AbstractDeploymentContainerEvent.java:38)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AfterDeploymentValidationImpl.fire(AfterDeploymentValidationImpl.java:28)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.WeldStartup.validateBeans(WeldStartup.java:510)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.WeldBootstrap.validateBeans(WeldBootstrap.java:93)\n        at org.jboss.as.weld@26.0.1.Final//org.jboss.as.weld.WeldStartService.start(WeldStartService.java:98)\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1739)\n        at org.jboss.msc@1.4.13.Final//org.jboss.msc.service.ServiceControllerImpl$StartTask.execute(ServiceControllerImpl.java:1701)\n        ... 6 more\nCaused by: java.lang.IllegalStateException: SRMET00013: Description is different from the description in previous usage\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.verifyMetadataEquality(MetricsRegistryImpl.java:188)\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.get(MetricsRegistryImpl.java:459)\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.get(MetricsRegistryImpl.java:402)\n        at io.smallrye.metrics//io.smallrye.metrics.MetricsRegistryImpl.timer(MetricsRegistryImpl.java:371)\n        at io.smallrye.metrics//io.smallrye.metrics.setup.MetricsMetadata.registerMetrics(MetricsMetadata.java:111)\n        at io.smallrye.metrics//io.smallrye.metrics.setup.MetricCdiInjectionExtension.registerMetrics(MetricCdiInjectionExtension.java:186)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.injection.StaticMethodInjectionPoint.invoke(StaticMethodInjectionPoint.java:95)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.injection.MethodInvocationStrategy$SpecialParamPlusBeanManagerStrategy.invoke(MethodInvocationStrategy.java:187)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:330)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ExtensionObserverMethodImpl.sendEvent(ExtensionObserverMethodImpl.java:123)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverMethodImpl.sendEvent(ObserverMethodImpl.java:308)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverMethodImpl.notify(ObserverMethodImpl.java:286)\n        at javax.enterprise.api//javax.enterprise.inject.spi.ObserverMethod.notify(ObserverMethod.java:124)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.util.Observers.notify(Observers.java:166)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.notifySyncObservers(ObserverNotifier.java:285)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.notify(ObserverNotifier.java:273)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:177)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.event.ObserverNotifier.fireEvent(ObserverNotifier.java:171)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AbstractContainerEvent.fire(AbstractContainerEvent.java:53)\n        at org.jboss.weld.core@3.1.8.Final//org.jboss.weld.bootstrap.events.AbstractDeploymentContainerEvent.fire(AbstractDeploymentContainerEvent.java:35)\n</code></pre>\n<p>CLI-Commands to extend the standalone.xml</p>\n<pre><code>wildfly/bin/jboss-cli.sh -c &quot;/extension=org.wildfly.extension.microprofile.metrics-smallrye:add()&quot;\nwildfly/bin/jboss-cli.sh -c &quot;/subsystem=microprofile-metrics-smallrye:add()&quot;\n\nwildfly/bin/jboss-cli.sh -c &quot;/extension=org.wildfly.extension.microprofile.fault-tolerance-smallrye:add()&quot;\nwildfly/bin/jboss-cli.sh -c &quot;/subsystem=microprofile-fault-tolerance-smallrye:add()&quot;\n</code></pre>\n<p>OIDC-Workaround (installation of keycloak client)</p>\n<pre><code>embed-server --server-config=${server.config:standalone.xml}\n\nbatch\n/subsystem=undertow/application-security-domain=other:undefine-attribute(name=security-domain)\n/subsystem=undertow/application-security-domain=other:write-attribute(name=http-authentication-factory,value=keycloak-http-authentication)\nrun-batch\n\n/subsystem=ejb3/application-security-domain=other:write-attribute(name=security-domain,value=KeycloakDomain)\n\nreload\n\n</code></pre>\n"},{"tags":["java","spring","redis","wicket"],"comments":[{"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"score":0,"creation_date":1638343995,"post_id":70176688,"comment_id":124060181,"body_markdown":"Does the application work correctly if you use the default session store (HttpSession+DiskPageStore) ? If it works then the problem must be in the (Spring) Redis integration. If it still redirects to a new page then we can exclude Redis, so it is either Wicket or your application.","body":"Does the application work correctly if you use the default session store (HttpSession+DiskPageStore) ? If it works then the problem must be in the (Spring) Redis integration. If it still redirects to a new page then we can exclude Redis, so it is either Wicket or your application."},{"owner":{"account_id":23321360,"reputation":11,"user_id":17399201,"display_name":"Diane Megan Harris"},"score":0,"creation_date":1638458108,"post_id":70176688,"comment_id":124098348,"body_markdown":"Yes, the app works correctly with the default session store, and you make a good point that that means the problem is the spring-session redis integration.","body":"Yes, the app works correctly with the default session store, and you make a good point that that means the problem is the spring-session redis integration."},{"owner":{"account_id":232499,"reputation":17233,"user_id":497381,"display_name":"martin-g"},"score":0,"creation_date":1638774722,"post_id":70176688,"comment_id":124168596,"body_markdown":"Wicket stores the page&#39;s data with a key of sessionId+pageId and value of the serialized page (i.e. as bytes). In case of Ajax requests the pageId does not change and Wicket overrides the old entry in the store. Look in this direction.","body":"Wicket stores the page&#39;s data with a key of sessionId+pageId and value of the serialized page (i.e. as bytes). In case of Ajax requests the pageId does not change and Wicket overrides the old entry in the store. Look in this direction."}],"answers":[{"tags":[],"owner":{"account_id":23321360,"reputation":11,"user_id":17399201,"display_name":"Diane Megan Harris"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660879693,"creation_date":1660879693,"answer_id":73411554,"question_id":70176688,"body_markdown":"This turned out to be caused by a custom org.apache.wicket.IPageManagerProvider implementation which needed to be replaced with a version that was compatible with redis.","title":"redis-backed spring-session in wicket app, problem with ajax calls resulting in full page redirect","body":"<p>This turned out to be caused by a custom org.apache.wicket.IPageManagerProvider implementation which needed to be replaced with a version that was compatible with redis.</p>\n"}],"owner":{"account_id":23321360,"reputation":11,"user_id":17399201,"display_name":"Diane Megan Harris"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":319,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":73411554,"answer_count":1,"score":1,"last_activity_date":1660879693,"creation_date":1638309739,"question_id":70176688,"body_markdown":"I&#39;m trying to modify a wicket application to store the session in redis via spring-session.  The session is showing up in redis, but I&#39;ve run into a problem that whenever the application makes a standard wicket ajax call, the response from wicket includes an Ajax-Location header that is interpreted by wicket-ajax-jquery.js triggering a page redirect.  But this only happens AFTER the first ajax call has been successful.  For example, the first ajax call may look like this:\r\n\r\nhttp://host:port/context/help/admin?0-1.IBehaviorListener.0-smartTable-tableArea-records-0-row-detailToggleCell-detailToggleLink&amp;_=1636756805561\r\n\r\nand the response headers do NOT include Ajax-Location.  And then later, the next ajax call may look like this:\r\n\r\nhttp://host:port/context/help/admin?1-1.IBehaviorListener.0-smartTable-tableArea-records-0-row-detailToggleCell-detailToggleLink&amp;_=1636756906417\r\n\r\nBut the response header now includes this:\r\n\r\n`Ajax-Location: ./admin?2`\r\n\r\nand instead of just doing the ajax update to the page, the entire page redirects to the URL specified in that header because of code in src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js\r\n\r\nDigging down into the wicket-core code using the debugger, consider this where it doesn&#39;t produce the Ajax-Location header and works properly:\r\n\r\n```\r\nStep completed: &quot;thread=ba6f07:3&quot;, org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.respond(), line=197 bci=169\r\nba6f07:3[1] print canCallListenerInterfaceAfterExpiry\r\n canCallListenerInterfaceAfterExpiry = false\r\nba6f07:3[1] print freshPage\r\n freshPage = false\r\nba6f07:3[1] print isStateless\r\n isStateless = false\r\nba6f07:3[1] print component\r\n component = &quot;[AjaxLink [Component id = detailToggleLink]]&quot;\r\n```\r\n\r\nand then compare with this where it DOES produce an Ajax-Location header and doesn&#39;t work properly:\r\n\r\n```\r\nBreakpoint hit: &quot;thread=ba6f07:7&quot;, org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.respond(), line=197 bci=169\r\nba6f07:7[1] print canCallListenerInterfaceAfterExpiry\r\n canCallListenerInterfaceAfterExpiry = false\r\nba6f07:7[1] print freshPage\r\n freshPage = true\r\nba6f07:7[1] print isStateless\r\n isStateless = false\r\nba6f07:7[1] print component\r\n component = null\r\n```\r\n\r\nThe difference being that when it doesn&#39;t work, freshPage is true and component is null.\r\n\r\n*Note: this pattern is fully functional in another similar application that I have and I’ve spent some time comparing the two.  Clearly, something is missing from the original application in the app that I’m working on but I haven’t been able to identify it yet.*\r\n\r\nMy redis http session config class looks like this:\r\n\r\n```\r\nimport javax.annotation.PostConstruct;\r\n\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.data.redis.connection.jedis.JedisConnectionFactory;\r\nimport org.springframework.session.data.redis.config.annotation.web.http.EnableRedisHttpSession;\r\nimport org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration;\r\nimport org.springframework.session.web.http.CookieHttpSessionStrategy;\r\nimport org.springframework.session.web.http.DefaultCookieSerializer;\r\n\r\n@Configuration\r\n@EnableRedisHttpSession\r\npublic class MyRedisHttpSessionConfig extends RedisHttpSessionConfiguration\r\n{\r\n  private JedisConnectionFactory connectionFactory;\r\n\r\n  @PostConstruct\r\n  public void init()\r\n  {\r\n    CookieHttpSessionStrategy strategy = new CookieHttpSessionStrategy();\r\n    DefaultCookieSerializer cookieSerializer = new DefaultCookieSerializer();\r\n    cookieSerializer.setCookieName( &quot;SESSION&quot; );\r\n    strategy.setCookieSerializer(cookieSerializer);\r\n    setHttpSessionStrategy( strategy );\r\n  }\r\n  \r\n  @Bean\r\n  public JedisConnectionFactory connectionFactory() throws Exception\r\n  {\r\n    return connectionFactory;\r\n  }\r\n\r\n  public void setConnectionFactory( JedisConnectionFactory connectionFactory )\r\n  {\r\n    this.connectionFactory = connectionFactory;\r\n  }\r\n\r\n}\r\n```\r\n\r\nmy web.xml has this:\r\n\r\n```\r\n...\r\n  &lt;filter&gt;\r\n    &lt;filter-name&gt;requestLoggingFilter&lt;/filter-name&gt;\r\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\r\n  &lt;/filter&gt;\r\n\r\n  &lt;filter&gt;\r\n    &lt;filter-name&gt;springSessionRepositoryFilter&lt;/filter-name&gt;\r\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\r\n  &lt;/filter&gt;\r\n\r\n  &lt;filter&gt;\r\n    &lt;filter-name&gt;myApplicationWicketFilter&lt;/filter-name&gt;\r\n    &lt;filter-class&gt;org.apache.wicket.protocol.http.WicketFilter&lt;/filter-class&gt;\r\n    &lt;init-param&gt;\r\n      &lt;param-name&gt;applicationFactoryClassName&lt;/param-name&gt;\r\n      &lt;param-value&gt;org.apache.wicket.spring.SpringWebApplicationFactory&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n    &lt;init-param&gt;\r\n      &lt;param-name&gt;filterMappingUrlPattern&lt;/param-name&gt;\r\n      &lt;param-value&gt;/*&lt;/param-value&gt;\r\n    &lt;/init-param&gt;\r\n  &lt;/filter&gt;\r\n...\r\n  &lt;filter-mapping&gt;\r\n    &lt;filter-name&gt;springSessionRepositoryFilter&lt;/filter-name&gt;\r\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n  &lt;/filter-mapping&gt; \r\n...\r\n  &lt;filter-mapping&gt;\r\n    &lt;filter-name&gt;ariesApplicationWicketFilter&lt;/filter-name&gt;\r\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\r\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\r\n    &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;\r\n  &lt;/filter-mapping&gt;\r\n...\r\n```\r\n\r\nand my spring beans config file has this:\r\n\r\n```\r\n...\r\n&lt;!-- The RedisHttpSessionConfiguration creates an http Filter bean with name &quot;springSessionRepositoryFilter&quot; which is referenced in web.xml --&gt;\r\n  &lt;context:annotation-config/&gt;\r\n\r\n  &lt;util:constant static-field=&quot;org.springframework.session.data.redis.config.ConfigureRedisAction.NO_OP&quot;/&gt;\r\n  &lt;bean class=&quot;MyRedisHttpSessionConfig&quot;&gt;\r\n    &lt;property name=&quot;connectionFactory&quot; ref=&quot;webTierRedisConnectionFactory&quot;/&gt;\r\n  &lt;/bean&gt;\r\n\r\n  &lt;bean id=&quot;webTierRedisConnectionFactory&quot; class=&quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&quot;&gt;\r\n    &lt;property name=&quot;hostName&quot; value=&quot;${service-tier:redisSentinelMasterName}&quot;/&gt;\r\n    &lt;property name=&quot;port&quot; value=&quot;${service-tier:redisSentinelHostPortCsv}&quot;/&gt;\r\n    &lt;property name=&quot;usePool&quot; value=&quot;true&quot;/&gt;\r\n    &lt;property name=&quot;poolConfig&quot;&gt;\r\n      &lt;bean class=&quot;redis.clients.jedis.JedisPoolConfig&quot;&gt;\r\n        &lt;property name=&quot;maxWaitMillis&quot; value=&quot;5000&quot;/&gt;\r\n        &lt;property name=&quot;maxTotal&quot; value=&quot;50&quot;/&gt;\r\n        &lt;property name=&quot;maxIdle&quot; value=&quot;5&quot;/&gt;\r\n        &lt;property name=&quot;minIdle&quot; value=&quot;1&quot;/&gt;\r\n        &lt;property name=&quot;testWhileIdle&quot; value=&quot;true&quot;/&gt;\r\n        &lt;property name=&quot;timeBetweenEvictionRunsMillis&quot; value=&quot;60000&quot;/&gt;\r\n        &lt;property name=&quot;numTestsPerEvictionRun&quot; value=&quot;10&quot;/&gt;\r\n      &lt;/bean&gt;\r\n    &lt;/property&gt;\r\n  &lt;/bean&gt;\r\n...\r\n```\r\n\r\nIvy Dependencies include:\r\n\r\n```\r\n    &lt;!-- these are for redis httpsession --&gt;\r\n    &lt;dependency org=&quot;redis.clients&quot; name=&quot;jedis&quot; rev=&quot;2.8.1&quot;/&gt;\r\n    &lt;dependency org=&quot;org.springframework.data&quot; name=&quot;spring-data-redis&quot; rev=&quot;1.7.4.RELEASE&quot;/&gt;\r\n    &lt;dependency org=&quot;org.springframework.data&quot; name=&quot;spring-data-keyvalue&quot; rev=&quot;1.1.4.RELEASE&quot;/&gt;\r\n    &lt;dependency org=&quot;org.springframework.session&quot; name=&quot;spring-session&quot; rev=&quot;1.2.2.RELEASE&quot;/&gt;\r\n```\r\n\r\nand wicket 7.5.0 and spring 4.2.8 stuff.\r\n\r\nAnybody have any insights on what might be going on?  Why after putting the session into redis (which it is showing up there, I see it (via redis-cli and keys and dump commands), most ajax calls are triggering full page redirects due to response headers from the ajax call including Ajax-Location?\r\n\r\n","title":"redis-backed spring-session in wicket app, problem with ajax calls resulting in full page redirect","body":"<p>I'm trying to modify a wicket application to store the session in redis via spring-session.  The session is showing up in redis, but I've run into a problem that whenever the application makes a standard wicket ajax call, the response from wicket includes an Ajax-Location header that is interpreted by wicket-ajax-jquery.js triggering a page redirect.  But this only happens AFTER the first ajax call has been successful.  For example, the first ajax call may look like this:</p>\n<p>http://host:port/context/help/admin?0-1.IBehaviorListener.0-smartTable-tableArea-records-0-row-detailToggleCell-detailToggleLink&amp;_=1636756805561</p>\n<p>and the response headers do NOT include Ajax-Location.  And then later, the next ajax call may look like this:</p>\n<p>http://host:port/context/help/admin?1-1.IBehaviorListener.0-smartTable-tableArea-records-0-row-detailToggleCell-detailToggleLink&amp;_=1636756906417</p>\n<p>But the response header now includes this:</p>\n<p><code>Ajax-Location: ./admin?2</code></p>\n<p>and instead of just doing the ajax update to the page, the entire page redirects to the URL specified in that header because of code in src/main/java/org/apache/wicket/ajax/res/js/wicket-ajax-jquery.js</p>\n<p>Digging down into the wicket-core code using the debugger, consider this where it doesn't produce the Ajax-Location header and works properly:</p>\n<pre><code>Step completed: &quot;thread=ba6f07:3&quot;, org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.respond(), line=197 bci=169\nba6f07:3[1] print canCallListenerInterfaceAfterExpiry\n canCallListenerInterfaceAfterExpiry = false\nba6f07:3[1] print freshPage\n freshPage = false\nba6f07:3[1] print isStateless\n isStateless = false\nba6f07:3[1] print component\n component = &quot;[AjaxLink [Component id = detailToggleLink]]&quot;\n</code></pre>\n<p>and then compare with this where it DOES produce an Ajax-Location header and doesn't work properly:</p>\n<pre><code>Breakpoint hit: &quot;thread=ba6f07:7&quot;, org.apache.wicket.core.request.handler.ListenerInterfaceRequestHandler.respond(), line=197 bci=169\nba6f07:7[1] print canCallListenerInterfaceAfterExpiry\n canCallListenerInterfaceAfterExpiry = false\nba6f07:7[1] print freshPage\n freshPage = true\nba6f07:7[1] print isStateless\n isStateless = false\nba6f07:7[1] print component\n component = null\n</code></pre>\n<p>The difference being that when it doesn't work, freshPage is true and component is null.</p>\n<p><em>Note: this pattern is fully functional in another similar application that I have and I’ve spent some time comparing the two.  Clearly, something is missing from the original application in the app that I’m working on but I haven’t been able to identify it yet.</em></p>\n<p>My redis http session config class looks like this:</p>\n<pre><code>import javax.annotation.PostConstruct;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.data.redis.connection.jedis.JedisConnectionFactory;\nimport org.springframework.session.data.redis.config.annotation.web.http.EnableRedisHttpSession;\nimport org.springframework.session.data.redis.config.annotation.web.http.RedisHttpSessionConfiguration;\nimport org.springframework.session.web.http.CookieHttpSessionStrategy;\nimport org.springframework.session.web.http.DefaultCookieSerializer;\n\n@Configuration\n@EnableRedisHttpSession\npublic class MyRedisHttpSessionConfig extends RedisHttpSessionConfiguration\n{\n  private JedisConnectionFactory connectionFactory;\n\n  @PostConstruct\n  public void init()\n  {\n    CookieHttpSessionStrategy strategy = new CookieHttpSessionStrategy();\n    DefaultCookieSerializer cookieSerializer = new DefaultCookieSerializer();\n    cookieSerializer.setCookieName( &quot;SESSION&quot; );\n    strategy.setCookieSerializer(cookieSerializer);\n    setHttpSessionStrategy( strategy );\n  }\n  \n  @Bean\n  public JedisConnectionFactory connectionFactory() throws Exception\n  {\n    return connectionFactory;\n  }\n\n  public void setConnectionFactory( JedisConnectionFactory connectionFactory )\n  {\n    this.connectionFactory = connectionFactory;\n  }\n\n}\n</code></pre>\n<p>my web.xml has this:</p>\n<pre><code>...\n  &lt;filter&gt;\n    &lt;filter-name&gt;requestLoggingFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n  &lt;/filter&gt;\n\n  &lt;filter&gt;\n    &lt;filter-name&gt;springSessionRepositoryFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.springframework.web.filter.DelegatingFilterProxy&lt;/filter-class&gt;\n  &lt;/filter&gt;\n\n  &lt;filter&gt;\n    &lt;filter-name&gt;myApplicationWicketFilter&lt;/filter-name&gt;\n    &lt;filter-class&gt;org.apache.wicket.protocol.http.WicketFilter&lt;/filter-class&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;applicationFactoryClassName&lt;/param-name&gt;\n      &lt;param-value&gt;org.apache.wicket.spring.SpringWebApplicationFactory&lt;/param-value&gt;\n    &lt;/init-param&gt;\n    &lt;init-param&gt;\n      &lt;param-name&gt;filterMappingUrlPattern&lt;/param-name&gt;\n      &lt;param-value&gt;/*&lt;/param-value&gt;\n    &lt;/init-param&gt;\n  &lt;/filter&gt;\n...\n  &lt;filter-mapping&gt;\n    &lt;filter-name&gt;springSessionRepositoryFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n  &lt;/filter-mapping&gt; \n...\n  &lt;filter-mapping&gt;\n    &lt;filter-name&gt;ariesApplicationWicketFilter&lt;/filter-name&gt;\n    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;\n    &lt;dispatcher&gt;REQUEST&lt;/dispatcher&gt;\n    &lt;dispatcher&gt;ERROR&lt;/dispatcher&gt;\n  &lt;/filter-mapping&gt;\n...\n</code></pre>\n<p>and my spring beans config file has this:</p>\n<pre><code>...\n&lt;!-- The RedisHttpSessionConfiguration creates an http Filter bean with name &quot;springSessionRepositoryFilter&quot; which is referenced in web.xml --&gt;\n  &lt;context:annotation-config/&gt;\n\n  &lt;util:constant static-field=&quot;org.springframework.session.data.redis.config.ConfigureRedisAction.NO_OP&quot;/&gt;\n  &lt;bean class=&quot;MyRedisHttpSessionConfig&quot;&gt;\n    &lt;property name=&quot;connectionFactory&quot; ref=&quot;webTierRedisConnectionFactory&quot;/&gt;\n  &lt;/bean&gt;\n\n  &lt;bean id=&quot;webTierRedisConnectionFactory&quot; class=&quot;org.springframework.data.redis.connection.jedis.JedisConnectionFactory&quot;&gt;\n    &lt;property name=&quot;hostName&quot; value=&quot;${service-tier:redisSentinelMasterName}&quot;/&gt;\n    &lt;property name=&quot;port&quot; value=&quot;${service-tier:redisSentinelHostPortCsv}&quot;/&gt;\n    &lt;property name=&quot;usePool&quot; value=&quot;true&quot;/&gt;\n    &lt;property name=&quot;poolConfig&quot;&gt;\n      &lt;bean class=&quot;redis.clients.jedis.JedisPoolConfig&quot;&gt;\n        &lt;property name=&quot;maxWaitMillis&quot; value=&quot;5000&quot;/&gt;\n        &lt;property name=&quot;maxTotal&quot; value=&quot;50&quot;/&gt;\n        &lt;property name=&quot;maxIdle&quot; value=&quot;5&quot;/&gt;\n        &lt;property name=&quot;minIdle&quot; value=&quot;1&quot;/&gt;\n        &lt;property name=&quot;testWhileIdle&quot; value=&quot;true&quot;/&gt;\n        &lt;property name=&quot;timeBetweenEvictionRunsMillis&quot; value=&quot;60000&quot;/&gt;\n        &lt;property name=&quot;numTestsPerEvictionRun&quot; value=&quot;10&quot;/&gt;\n      &lt;/bean&gt;\n    &lt;/property&gt;\n  &lt;/bean&gt;\n...\n</code></pre>\n<p>Ivy Dependencies include:</p>\n<pre><code>    &lt;!-- these are for redis httpsession --&gt;\n    &lt;dependency org=&quot;redis.clients&quot; name=&quot;jedis&quot; rev=&quot;2.8.1&quot;/&gt;\n    &lt;dependency org=&quot;org.springframework.data&quot; name=&quot;spring-data-redis&quot; rev=&quot;1.7.4.RELEASE&quot;/&gt;\n    &lt;dependency org=&quot;org.springframework.data&quot; name=&quot;spring-data-keyvalue&quot; rev=&quot;1.1.4.RELEASE&quot;/&gt;\n    &lt;dependency org=&quot;org.springframework.session&quot; name=&quot;spring-session&quot; rev=&quot;1.2.2.RELEASE&quot;/&gt;\n</code></pre>\n<p>and wicket 7.5.0 and spring 4.2.8 stuff.</p>\n<p>Anybody have any insights on what might be going on?  Why after putting the session into redis (which it is showing up there, I see it (via redis-cli and keys and dump commands), most ajax calls are triggering full page redirects due to response headers from the ajax call including Ajax-Location?</p>\n"},{"tags":["java","android","sharedpreferences","android-night-mode"],"comments":[{"owner":{"account_id":6576425,"reputation":3053,"user_id":5082285,"display_name":"Markus Kauppinen"},"score":1,"creation_date":1547720933,"post_id":54185802,"comment_id":95292470,"body_markdown":"In the Settings activity you save the switch state to SharedPrefences and in other activities you read it from SharedPreferences as in [How to use SharedPreferences in Android to store, fetch and edit values](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values).","body":"In the Settings activity you save the switch state to SharedPrefences and in other activities you read it from SharedPreferences as in <a href=\"https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values\">How to use SharedPreferences in Android to store, fetch and edit values</a>."},{"owner":{"account_id":15050798,"reputation":19,"user_id":10862565,"display_name":"VISCREO"},"score":0,"creation_date":1547741982,"post_id":54185802,"comment_id":95304734,"body_markdown":"@MarkusKauppinen that link was actually super helpful for getting an understanding of how it all works thanks! But how would I get it working with Boolean? I checked some of the answers further down but non of them worked for me :( Am I being dumb with this? I&#39;ve also added the &quot;SharedPref&quot; file.","body":"@MarkusKauppinen that link was actually super helpful for getting an understanding of how it all works thanks! But how would I get it working with Boolean? I checked some of the answers further down but non of them worked for me :( Am I being dumb with this? I&#39;ve also added the &quot;SharedPref&quot; file."},{"owner":{"account_id":15050798,"reputation":19,"user_id":10862565,"display_name":"VISCREO"},"score":0,"creation_date":1547810640,"post_id":54185802,"comment_id":95329943,"body_markdown":"@MarkusKauppinen can you put this as an answer so that I can mark it as correct? It didn&#39;t work but it put it all into perspective for me and thanks to that I figured it out!","body":"@MarkusKauppinen can you put this as an answer so that I can mark it as correct? It didn&#39;t work but it put it all into perspective for me and thanks to that I figured it out!"}],"answers":[{"tags":[],"owner":{"account_id":1034461,"reputation":4779,"user_id":1042124,"accept_rate":70,"display_name":"Rahul"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1547744058,"creation_date":1547744058,"answer_id":54240731,"question_id":54185802,"body_markdown":"In you application class inside `onCreate`\r\n\r\n    SharedPreferences sharedPreferences = getSharedPreferences(&quot;Your_Shared_pref&quot;, Context.MODE_PRIVATE);\r\n    boolean nightMode = sharedPreferences.getBoolean(SettingsActivity.DARK_THEME_PREFERENCE_KEY, false);\r\n\r\n    AppCompatDelegate.setDefaultNightMode(nightMode ? MODE_NIGHT_YES : MODE_NIGHT_NO);\r\n\r\nThan in your activity, do this:\r\n\r\n     switchCompat.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n        @Override\r\n        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n            AppCompatDelegate.setDefaultNightMode(isChecked ? MODE_NIGHT_YES : MODE_NIGHT_NO);\r\n            if (isChecked) {\r\n               sharedPref.setNightModeState(true);\r\n                recreate();\r\n            } else {\r\n                sharedPref.setNightModeState(false);\r\n                recreate();\r\n            }\r\n        }\r\n    });\r\n\r\n    @Override\r\n    public void recreate() {\r\n        finish();\r\n        overridePendingTransition(R.anim.anime_fade_in,\r\n                R.anim.anime_fade_out);\r\n        startActivity(getIntent());\r\n        overridePendingTransition(R.anim.anime_fade_in,\r\n                R.anim.anime_fade_out);\r\n    }\r\n\r\n\r\nyou can find the animation xml online.","title":"How do I get my theme to programmatically get carried over into other activities?","body":"<p>In you application class inside <code>onCreate</code></p>\n\n<pre><code>SharedPreferences sharedPreferences = getSharedPreferences(\"Your_Shared_pref\", Context.MODE_PRIVATE);\nboolean nightMode = sharedPreferences.getBoolean(SettingsActivity.DARK_THEME_PREFERENCE_KEY, false);\n\nAppCompatDelegate.setDefaultNightMode(nightMode ? MODE_NIGHT_YES : MODE_NIGHT_NO);\n</code></pre>\n\n<p>Than in your activity, do this:</p>\n\n<pre><code> switchCompat.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n    @Override\n    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n        AppCompatDelegate.setDefaultNightMode(isChecked ? MODE_NIGHT_YES : MODE_NIGHT_NO);\n        if (isChecked) {\n           sharedPref.setNightModeState(true);\n            recreate();\n        } else {\n            sharedPref.setNightModeState(false);\n            recreate();\n        }\n    }\n});\n\n@Override\npublic void recreate() {\n    finish();\n    overridePendingTransition(R.anim.anime_fade_in,\n            R.anim.anime_fade_out);\n    startActivity(getIntent());\n    overridePendingTransition(R.anim.anime_fade_in,\n            R.anim.anime_fade_out);\n}\n</code></pre>\n\n<p>you can find the animation xml online.</p>\n"},{"tags":[],"owner":{"account_id":15050798,"reputation":19,"user_id":10862565,"display_name":"VISCREO"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1547810875,"creation_date":1547810875,"answer_id":54253045,"question_id":54185802,"body_markdown":"I put this between my onCreate and my super.onCreate. The code I used was taken from my settings java page. It turns out that it was pretty easy to figure, I just needed someone to put it into perspective!\r\n\r\n     @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n    \r\n    \r\n            final SharedPref sharedPref;\r\n            sharedPref = new SharedPref(this);\r\n    \r\n            if (sharedPref.loadNightModeState()) {\r\n                setTheme(R.style.AppTheme_Night);\r\n                //restartApp();\r\n                //getSupportActionBar().setBackgroundDrawable(getDrawable(R.drawable.actionbar));\r\n                //actionBarDrawerToggle.getDrawerArrowDrawable().setColor(getResources().getColor(R.color.BackgroundLight));\r\n            } else setTheme(R.style.AppTheme);\r\n            //restartApp();\r\n    \r\n    \r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);","title":"How do I get my theme to programmatically get carried over into other activities?","body":"<p>I put this between my onCreate and my super.onCreate. The code I used was taken from my settings java page. It turns out that it was pretty easy to figure, I just needed someone to put it into perspective!</p>\n\n<pre><code> @Override\n    protected void onCreate(Bundle savedInstanceState) {\n\n\n        final SharedPref sharedPref;\n        sharedPref = new SharedPref(this);\n\n        if (sharedPref.loadNightModeState()) {\n            setTheme(R.style.AppTheme_Night);\n            //restartApp();\n            //getSupportActionBar().setBackgroundDrawable(getDrawable(R.drawable.actionbar));\n            //actionBarDrawerToggle.getDrawerArrowDrawable().setColor(getResources().getColor(R.color.BackgroundLight));\n        } else setTheme(R.style.AppTheme);\n        //restartApp();\n\n\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n</code></pre>\n"}],"owner":{"account_id":15050798,"reputation":19,"user_id":10862565,"display_name":"VISCREO"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":353,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":54253045,"answer_count":2,"score":0,"last_activity_date":1660878590,"creation_date":1547484530,"question_id":54185802,"body_markdown":"I&#39;ve created a function in the settings page of my app which contains a switch - that when pressed - switches to a secondary &quot;Night&quot; theme. I followed [this tutorial][1] for the most part. However, I don&#39;t know how to carry this night mode into my other activities? I&#39;ve tried calling the &quot;if switch checked&quot; in my main activity, but it obviously doesn&#39;t see that switch. What I mainly need to know is, how do I check a switch state in another activity? And is this even the right way of doing it? Let me know if I&#39;ve missed anything else in this question.\r\n\r\n// ======== CODE FOR THE SETTINGS PAGE ======== //\r\n\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_settings);\r\n\r\n\r\n        // ======== Night Mode ======== //\r\n        SwitchCompat switchCompat;\r\n        final SharedPref sharedPref;\r\n\r\n        sharedPref = new SharedPref(this);\r\n\r\n        if (sharedPref.loadNightModeState()) {\r\n            setTheme(R.style.AppTheme_Night);\r\n            getSupportActionBar().setBackgroundDrawable(getDrawable(R.drawable.actionbar));\r\n            actionBarDrawerToggle.getDrawerArrowDrawable().setColor(getResources().getColor(R.color.BackgroundLight));\r\n        } else setTheme(R.style.AppTheme);\r\n\r\n        setContentView(R.layout.activity_settings);\r\n        switchCompat = (SwitchCompat) findViewById(R.id.night_switch);\r\n        if (sharedPref.loadNightModeState()) {\r\n            switchCompat.setChecked(true);\r\n        }\r\n\r\n        switchCompat.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\r\n            @Override\r\n            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\r\n                if (isChecked) {\r\n                   sharedPref.setNightModeState(true);\r\n                    restartApp();\r\n                } else {\r\n                    sharedPref.setNightModeState(false);\r\n                    restartApp();\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n\r\n\r\n    private void restartApp() {\r\n        Intent intent = new Intent(getApplicationContext(), SettingsActivity.class);\r\n        startActivity(intent);\r\n        finish();\r\n    }\r\n\r\n  [1]: https://www.youtube.com/watch?v=xqY7Yu5C8pg\r\n\r\n\r\n\r\n// ======== SharedPref CODE ======== //\r\n\r\n    public class SharedPref {\r\n\r\n    private SharedPreferences sharedPreferences;\r\n\r\n\r\n    public SharedPref(Context context) {\r\n        sharedPreferences = context.getSharedPreferences(&quot;filename&quot;, Context.MODE_PRIVATE);\r\n    }\r\n\r\n\r\n    public void setNightModeState(Boolean state) {\r\n        SharedPreferences.Editor editor = sharedPreferences.edit();\r\n        editor.putBoolean(&quot;NightMode&quot;,state);\r\n        editor.apply();\r\n    }\r\n\r\n    public Boolean loadNightModeState (){\r\n        Boolean state = sharedPreferences.getBoolean(&quot;NightMode&quot;, false);\r\n        return state;\r\n    }\r\n\r\n","title":"How do I get my theme to programmatically get carried over into other activities?","body":"<p>I've created a function in the settings page of my app which contains a switch - that when pressed - switches to a secondary \"Night\" theme. I followed <a href=\"https://www.youtube.com/watch?v=xqY7Yu5C8pg\" rel=\"nofollow noreferrer\">this tutorial</a> for the most part. However, I don't know how to carry this night mode into my other activities? I've tried calling the \"if switch checked\" in my main activity, but it obviously doesn't see that switch. What I mainly need to know is, how do I check a switch state in another activity? And is this even the right way of doing it? Let me know if I've missed anything else in this question.</p>\n\n<p>// ======== CODE FOR THE SETTINGS PAGE ======== //</p>\n\n<pre><code>protected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.activity_settings);\n\n\n    // ======== Night Mode ======== //\n    SwitchCompat switchCompat;\n    final SharedPref sharedPref;\n\n    sharedPref = new SharedPref(this);\n\n    if (sharedPref.loadNightModeState()) {\n        setTheme(R.style.AppTheme_Night);\n        getSupportActionBar().setBackgroundDrawable(getDrawable(R.drawable.actionbar));\n        actionBarDrawerToggle.getDrawerArrowDrawable().setColor(getResources().getColor(R.color.BackgroundLight));\n    } else setTheme(R.style.AppTheme);\n\n    setContentView(R.layout.activity_settings);\n    switchCompat = (SwitchCompat) findViewById(R.id.night_switch);\n    if (sharedPref.loadNightModeState()) {\n        switchCompat.setChecked(true);\n    }\n\n    switchCompat.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() {\n        @Override\n        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {\n            if (isChecked) {\n               sharedPref.setNightModeState(true);\n                restartApp();\n            } else {\n                sharedPref.setNightModeState(false);\n                restartApp();\n            }\n        }\n    });\n}\n\n\n\n\nprivate void restartApp() {\n    Intent intent = new Intent(getApplicationContext(), SettingsActivity.class);\n    startActivity(intent);\n    finish();\n}\n</code></pre>\n\n<p>// ======== SharedPref CODE ======== //</p>\n\n<pre><code>public class SharedPref {\n\nprivate SharedPreferences sharedPreferences;\n\n\npublic SharedPref(Context context) {\n    sharedPreferences = context.getSharedPreferences(\"filename\", Context.MODE_PRIVATE);\n}\n\n\npublic void setNightModeState(Boolean state) {\n    SharedPreferences.Editor editor = sharedPreferences.edit();\n    editor.putBoolean(\"NightMode\",state);\n    editor.apply();\n}\n\npublic Boolean loadNightModeState (){\n    Boolean state = sharedPreferences.getBoolean(\"NightMode\", false);\n    return state;\n}\n</code></pre>\n"},{"tags":["java","spring-boot","jpa","spring-security","spring-data-jpa"],"comments":[{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":2,"creation_date":1660859415,"post_id":73409729,"comment_id":129639794,"body_markdown":"Instead of trying to do this all manually (writing code to let users log in, adding lots of checks if the user is allowed to do this or that) this might be a good idea to learn [Spring Security](https://spring.io/projects/spring-security).","body":"Instead of trying to do this all manually (writing code to let users log in, adding lots of checks if the user is allowed to do this or that) this might be a good idea to learn <a href=\"https://spring.io/projects/spring-security\" rel=\"nofollow noreferrer\">Spring Security</a>."}],"answers":[{"tags":[],"owner":{"account_id":9298667,"reputation":152,"user_id":6904872,"display_name":"Naresh Sharma"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1660878280,"creation_date":1660878280,"answer_id":73411459,"question_id":73409729,"body_markdown":"you can modify `validateLogin` like\r\n```\r\n @PostMapping(value = &quot;/validateLogin&quot;)\r\n        public ResponseEntity&lt;Object&gt; validateLogin(@RequestBody Map&lt;String, String&gt; user,HttpServletRequest request) {\r\n            try {\r\n                Teacher t = teacherRepository.findUser(user.get(&quot;name&quot;), user.get(&quot;email&quot;));\r\n                if (t != null &amp;&amp; encoder.matches(user.get(&quot;password&quot;), t.getPassword())) {\r\n                    //\r\n                    //I WANT TO STORE THE ENTITY HERE BUT I DON&#39;T KNOW HOW\r\n                    //store the object in session\r\n                    request.getSession().setAttribute(&quot;teacher&quot;, t);\r\n                    return ResponseEntity.status(HttpStatus.OK)\r\n                            .body(Map.of(&quot;result&quot;, &quot;ok&quot;, &quot;details&quot;, &quot;login approved&quot;));\r\n                } else {\r\n                    return ResponseEntity.status(HttpStatus.UNAUTHORIZED)\r\n                            .body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, &quot;login denied&quot;));\r\n                }\r\n            } catch (Exception e) {\r\n                return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n                        .body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, e.getMessage()));\r\n            }\r\n        }\r\n```\r\nand `mainPage` like\r\n```\r\n@GetMapping(&quot;/mainPage&quot;)\r\n    public String mainPage(HttpServletRequest request) {\r\n        //\r\n        //IF USER IN HTTP SESSION{\r\n        //\r\n    if(request.getSession()!=null){\r\n//access from session\r\n         Teacher t=(Teacher)request.getSession().getAttribute(&quot;teacher&quot;);\r\n//your logic to validate can come here\r\n    }\r\n\r\n        return &quot;mainPage&quot;;\r\n        //ELSE RETURN YOU ARE NOT LOGGED IN!\r\n    }\r\n```","title":"How do i store users in Http sessions with java spring boot and JPA","body":"<p>you can modify <code>validateLogin</code> like</p>\n<pre><code> @PostMapping(value = &quot;/validateLogin&quot;)\n        public ResponseEntity&lt;Object&gt; validateLogin(@RequestBody Map&lt;String, String&gt; user,HttpServletRequest request) {\n            try {\n                Teacher t = teacherRepository.findUser(user.get(&quot;name&quot;), user.get(&quot;email&quot;));\n                if (t != null &amp;&amp; encoder.matches(user.get(&quot;password&quot;), t.getPassword())) {\n                    //\n                    //I WANT TO STORE THE ENTITY HERE BUT I DON'T KNOW HOW\n                    //store the object in session\n                    request.getSession().setAttribute(&quot;teacher&quot;, t);\n                    return ResponseEntity.status(HttpStatus.OK)\n                            .body(Map.of(&quot;result&quot;, &quot;ok&quot;, &quot;details&quot;, &quot;login approved&quot;));\n                } else {\n                    return ResponseEntity.status(HttpStatus.UNAUTHORIZED)\n                            .body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, &quot;login denied&quot;));\n                }\n            } catch (Exception e) {\n                return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                        .body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, e.getMessage()));\n            }\n        }\n</code></pre>\n<p>and <code>mainPage</code> like</p>\n<pre><code>@GetMapping(&quot;/mainPage&quot;)\n    public String mainPage(HttpServletRequest request) {\n        //\n        //IF USER IN HTTP SESSION{\n        //\n    if(request.getSession()!=null){\n//access from session\n         Teacher t=(Teacher)request.getSession().getAttribute(&quot;teacher&quot;);\n//your logic to validate can come here\n    }\n\n        return &quot;mainPage&quot;;\n        //ELSE RETURN YOU ARE NOT LOGGED IN!\n    }\n</code></pre>\n"}],"owner":{"account_id":20904920,"reputation":69,"user_id":17512245,"display_name":"Nikolas Trapp"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":674,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":73411459,"answer_count":1,"score":-1,"last_activity_date":1660878280,"creation_date":1660858825,"question_id":73409729,"body_markdown":"I will be glad to know how do i store a user in http session after his login using spring boot.\r\n\r\nbasicly i want to store the entity &quot;Teacher&quot; in my session to control the pages that the user can access if he is logged in or not.\r\n\r\nThis is my entity that i want to store in http session:\r\n```\r\n@Entity\r\npublic class Teacher implements Serializable {\r\n\tprivate static final long serialVersionUID = 1L;\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\t@Column(nullable = false, length = 254)\r\n\tprivate String name;\r\n\t@Column(nullable = false, length = 254, unique = true)\r\n\tprivate String email;\r\n\t@Column(nullable = false, length = 254, unique = true)\r\n\tprivate String password;\r\n\t@Column(nullable = false, length = 20)\r\n\t@Enumerated(EnumType.STRING)\r\n\tprivate Role role;\r\n\r\n\t@JsonIgnore\r\n\t@OneToMany(mappedBy = &quot;teacher&quot;)\r\n\tprivate List&lt;Scheduling&gt; schedulings = new ArrayList&lt;&gt;(); \r\n```\r\nand this is my login verifier:\r\n```\r\n@PostMapping(value = &quot;/validateLogin&quot;)\r\n\tpublic ResponseEntity&lt;Object&gt; validateLogin(@RequestBody Map&lt;String, String&gt; user) {\r\n\t\ttry {\r\n\t\t\tTeacher t = teacherRepository.findUser(user.get(&quot;name&quot;), user.get(&quot;email&quot;));\r\n\t\t\tif (t != null &amp;&amp; encoder.matches(user.get(&quot;password&quot;), t.getPassword())) {\r\n                //\r\n                //I WANT TO STORE THE ENTITY HERE BUT I DON&#39;T KNOW HOW\r\n                //\r\n\t\t\t\treturn ResponseEntity.status(HttpStatus.OK)\r\n\t\t\t\t\t\t.body(Map.of(&quot;result&quot;, &quot;ok&quot;, &quot;details&quot;, &quot;login approved&quot;));\r\n\t\t\t} else {\r\n\t\t\t\treturn ResponseEntity.status(HttpStatus.UNAUTHORIZED)\r\n\t\t\t\t\t\t.body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, &quot;login denied&quot;));\r\n\t\t\t}\r\n\t\t} catch (Exception e) {\r\n\t\t\treturn ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\r\n\t\t\t\t\t.body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, e.getMessage()));\r\n\t\t}\r\n\t}\r\n```\r\n\r\nand i want verify if the user is logged here:\r\n```\r\n@GetMapping(&quot;/mainPage&quot;)\r\n\tpublic String mainPage() {\r\n        //\r\n        //IF USER IN HTTP SESSION{\r\n        //\r\n\t\treturn &quot;mainPage&quot;;\r\n        //ELSE RETURN YOU ARE NOT LOGGED IN!\r\n\t}\r\n```\r\n\r\n","title":"How do i store users in Http sessions with java spring boot and JPA","body":"<p>I will be glad to know how do i store a user in http session after his login using spring boot.</p>\n<p>basicly i want to store the entity &quot;Teacher&quot; in my session to control the pages that the user can access if he is logged in or not.</p>\n<p>This is my entity that i want to store in http session:</p>\n<pre><code>@Entity\npublic class Teacher implements Serializable {\n    private static final long serialVersionUID = 1L;\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n    @Column(nullable = false, length = 254)\n    private String name;\n    @Column(nullable = false, length = 254, unique = true)\n    private String email;\n    @Column(nullable = false, length = 254, unique = true)\n    private String password;\n    @Column(nullable = false, length = 20)\n    @Enumerated(EnumType.STRING)\n    private Role role;\n\n    @JsonIgnore\n    @OneToMany(mappedBy = &quot;teacher&quot;)\n    private List&lt;Scheduling&gt; schedulings = new ArrayList&lt;&gt;(); \n</code></pre>\n<p>and this is my login verifier:</p>\n<pre><code>@PostMapping(value = &quot;/validateLogin&quot;)\n    public ResponseEntity&lt;Object&gt; validateLogin(@RequestBody Map&lt;String, String&gt; user) {\n        try {\n            Teacher t = teacherRepository.findUser(user.get(&quot;name&quot;), user.get(&quot;email&quot;));\n            if (t != null &amp;&amp; encoder.matches(user.get(&quot;password&quot;), t.getPassword())) {\n                //\n                //I WANT TO STORE THE ENTITY HERE BUT I DON'T KNOW HOW\n                //\n                return ResponseEntity.status(HttpStatus.OK)\n                        .body(Map.of(&quot;result&quot;, &quot;ok&quot;, &quot;details&quot;, &quot;login approved&quot;));\n            } else {\n                return ResponseEntity.status(HttpStatus.UNAUTHORIZED)\n                        .body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, &quot;login denied&quot;));\n            }\n        } catch (Exception e) {\n            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)\n                    .body(Map.of(&quot;result&quot;, &quot;error&quot;, &quot;details&quot;, e.getMessage()));\n        }\n    }\n</code></pre>\n<p>and i want verify if the user is logged here:</p>\n<pre><code>@GetMapping(&quot;/mainPage&quot;)\n    public String mainPage() {\n        //\n        //IF USER IN HTTP SESSION{\n        //\n        return &quot;mainPage&quot;;\n        //ELSE RETURN YOU ARE NOT LOGGED IN!\n    }\n</code></pre>\n"},{"tags":["java","protocol-buffers","grpc"],"answers":[{"tags":[],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660877148,"creation_date":1660877148,"answer_id":73411361,"question_id":73382777,"body_markdown":"It&#39;s a bit awkward but it seems to do the first part of what I need to do which is get the reflection data\r\n\r\n```java\r\n    managedChannel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 50000).usePlaintext().build();\r\n    final var serverReflectionBlockingStub = ServerReflectionGrpc.newStub(managedChannel);\r\n\r\n    final var serviceListLatch = new CountDownLatch(1);\r\n    final Set&lt;String&gt; serviceNames = new HashSet&lt;&gt;();\r\n    final var errorRef = new AtomicReference&lt;Throwable&gt;();\r\n    final var serviceListObserver =\r\n        serverReflectionBlockingStub.serverReflectionInfo(\r\n            new StreamObserver&lt;&gt;() {\r\n              @Override\r\n              public void onNext(ServerReflectionResponse value) {\r\n\r\n                value.getListServicesResponse().getServiceList().stream()\r\n                    .map(ServiceResponse::getName)\r\n                    .forEach(serviceNames::add);\r\n              }\r\n\r\n              @Override\r\n              public void onError(Throwable t) {\r\n\r\n                errorRef.set(t);\r\n                serviceListLatch.countDown();\r\n              }\r\n\r\n              @Override\r\n              public void onCompleted() {\r\n\r\n                serviceListLatch.countDown();\r\n              }\r\n            });\r\n    serviceListObserver.onNext(ServerReflectionRequest.newBuilder().setListServices(&quot;*&quot;).build());\r\n    serviceListObserver.onCompleted();\r\n    serviceListLatch.await();\r\n    if (errorRef.get() != null) {\r\n      throw new IllegalStateException(errorRef.get());\r\n    }\r\n\r\n    final var serviceFileLatch = new CountDownLatch(1);\r\n    final var serviceFileProtoObserver =\r\n        serverReflectionBlockingStub.serverReflectionInfo(\r\n            new StreamObserver&lt;&gt;() {\r\n              @Override\r\n              public void onNext(ServerReflectionResponse value) {\r\n\r\n                try {\r\n                  var fileDescriptorProto =\r\n                      DescriptorProtos.FileDescriptorProto.parseFrom(\r\n                          value.getFileDescriptorResponse().getFileDescriptorProto(0));\r\n                  for (var serviceDescriptorProto : fileDescriptorProto.getServiceList()) {\r\n                    for (var methodDescriptorProto : serviceDescriptorProto.getMethodList()) {\r\n\r\n\r\n                      // it is at this point I have the methods already\r\n   \r\n                      var methodDescriptor =\r\n                          methodDescriptorFromProto(\r\n                              fileDescriptorProto, serviceDescriptorProto, methodDescriptorProto);\r\n                      methods.put(\r\n                          new GrpcServiceMethod(\r\n                              serviceDescriptorProto.getName(), methodDescriptorProto.getName()),\r\n                          methodDescriptor);\r\n                    }\r\n                  }\r\n\r\n                } catch (Exception e) {\r\n                  errorRef.set(e);\r\n                  serviceFileLatch.countDown();\r\n                }\r\n              }\r\n\r\n              @Override\r\n              public void onError(Throwable t) {\r\n\r\n                errorRef.set(t);\r\n                serviceFileLatch.countDown();\r\n              }\r\n\r\n              @Override\r\n              public void onCompleted() {\r\n\r\n                serviceFileLatch.countDown();\r\n              }\r\n            });\r\n    serviceNames.stream()\r\n        .map(name -&gt; ServerReflectionRequest.newBuilder().setFileContainingSymbol(name).build())\r\n        .forEach(serviceFileProtoObserver::onNext);\r\n    serviceFileProtoObserver.onCompleted();\r\n    serviceFileLatch.await();\r\n    System.out.println(methods);\r\n```\r\n\r\nThe follow up question would be given that I have this info, how do I make the call building from JSON input that is to be parsed to a format used by the GRPC server?","title":"How do I get a list of service method descriptors from a GRPC server given a ManagedChannel?","body":"<p>It's a bit awkward but it seems to do the first part of what I need to do which is get the reflection data</p>\n<pre class=\"lang-java prettyprint-override\"><code>    managedChannel = ManagedChannelBuilder.forAddress(&quot;localhost&quot;, 50000).usePlaintext().build();\n    final var serverReflectionBlockingStub = ServerReflectionGrpc.newStub(managedChannel);\n\n    final var serviceListLatch = new CountDownLatch(1);\n    final Set&lt;String&gt; serviceNames = new HashSet&lt;&gt;();\n    final var errorRef = new AtomicReference&lt;Throwable&gt;();\n    final var serviceListObserver =\n        serverReflectionBlockingStub.serverReflectionInfo(\n            new StreamObserver&lt;&gt;() {\n              @Override\n              public void onNext(ServerReflectionResponse value) {\n\n                value.getListServicesResponse().getServiceList().stream()\n                    .map(ServiceResponse::getName)\n                    .forEach(serviceNames::add);\n              }\n\n              @Override\n              public void onError(Throwable t) {\n\n                errorRef.set(t);\n                serviceListLatch.countDown();\n              }\n\n              @Override\n              public void onCompleted() {\n\n                serviceListLatch.countDown();\n              }\n            });\n    serviceListObserver.onNext(ServerReflectionRequest.newBuilder().setListServices(&quot;*&quot;).build());\n    serviceListObserver.onCompleted();\n    serviceListLatch.await();\n    if (errorRef.get() != null) {\n      throw new IllegalStateException(errorRef.get());\n    }\n\n    final var serviceFileLatch = new CountDownLatch(1);\n    final var serviceFileProtoObserver =\n        serverReflectionBlockingStub.serverReflectionInfo(\n            new StreamObserver&lt;&gt;() {\n              @Override\n              public void onNext(ServerReflectionResponse value) {\n\n                try {\n                  var fileDescriptorProto =\n                      DescriptorProtos.FileDescriptorProto.parseFrom(\n                          value.getFileDescriptorResponse().getFileDescriptorProto(0));\n                  for (var serviceDescriptorProto : fileDescriptorProto.getServiceList()) {\n                    for (var methodDescriptorProto : serviceDescriptorProto.getMethodList()) {\n\n\n                      // it is at this point I have the methods already\n   \n                      var methodDescriptor =\n                          methodDescriptorFromProto(\n                              fileDescriptorProto, serviceDescriptorProto, methodDescriptorProto);\n                      methods.put(\n                          new GrpcServiceMethod(\n                              serviceDescriptorProto.getName(), methodDescriptorProto.getName()),\n                          methodDescriptor);\n                    }\n                  }\n\n                } catch (Exception e) {\n                  errorRef.set(e);\n                  serviceFileLatch.countDown();\n                }\n              }\n\n              @Override\n              public void onError(Throwable t) {\n\n                errorRef.set(t);\n                serviceFileLatch.countDown();\n              }\n\n              @Override\n              public void onCompleted() {\n\n                serviceFileLatch.countDown();\n              }\n            });\n    serviceNames.stream()\n        .map(name -&gt; ServerReflectionRequest.newBuilder().setFileContainingSymbol(name).build())\n        .forEach(serviceFileProtoObserver::onNext);\n    serviceFileProtoObserver.onCompleted();\n    serviceFileLatch.await();\n    System.out.println(methods);\n</code></pre>\n<p>The follow up question would be given that I have this info, how do I make the call building from JSON input that is to be parsed to a format used by the GRPC server?</p>\n"}],"owner":{"account_id":87230,"reputation":36816,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":750,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660877148,"creation_date":1660709449,"question_id":73382777,"body_markdown":"This is sort of the reverse of https://stackoverflow.com/questions/63624473/get-the-list-of-registered-grpc-service-name-and-methods-in-python in that I am trying to pull the list of services and their descriptors from the client side i.e. `ManagedChannel`\r\n\r\nWhat I am trying to do is something like\r\n\r\n```java\r\nvar c = ManagedChannelBuilder.forTarget(&quot;foo&quot;).build();\r\nCollection&lt;ServerServiceDefinition&gt; defs = c.listServices();\r\n```\r\n\r\nBut `ManagedChannel` does not hava a method like that and rightfully so since GRPC I don&#39;t think should expose that list by default, but I want to expose it for my use case in which I want to dynamically call an artbitrary service/method without the original PROTO file.\r\n\r\nI am thinking there&#39;s something called Server Reflection, that provides a low level API from what I can tell and does not provide a specific example to get the information I am looking for.  Also most of the examples for the API shows how to enable it on the server but not provide the client side.","title":"How do I get a list of service method descriptors from a GRPC server given a ManagedChannel?","body":"<p>This is sort of the reverse of <a href=\"https://stackoverflow.com/questions/63624473/get-the-list-of-registered-grpc-service-name-and-methods-in-python\">Get the list of registered gRPC service name and methods in python</a> in that I am trying to pull the list of services and their descriptors from the client side i.e. <code>ManagedChannel</code></p>\n<p>What I am trying to do is something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>var c = ManagedChannelBuilder.forTarget(&quot;foo&quot;).build();\nCollection&lt;ServerServiceDefinition&gt; defs = c.listServices();\n</code></pre>\n<p>But <code>ManagedChannel</code> does not hava a method like that and rightfully so since GRPC I don't think should expose that list by default, but I want to expose it for my use case in which I want to dynamically call an artbitrary service/method without the original PROTO file.</p>\n<p>I am thinking there's something called Server Reflection, that provides a low level API from what I can tell and does not provide a specific example to get the information I am looking for.  Also most of the examples for the API shows how to enable it on the server but not provide the client side.</p>\n"},{"tags":["java","android","http-headers","retrofit","okhttp"],"comments":[{"owner":{"account_id":17735,"reputation":39493,"user_id":40013,"accept_rate":75,"display_name":"Jesse Wilson"},"score":1,"creation_date":1440483730,"post_id":32196424,"comment_id":52278443,"body_markdown":"Your interceptor looks right. What&#39;s not working with it?","body":"Your interceptor looks right. What&#39;s not working with it?"}],"answers":[{"tags":[],"owner":{"account_id":4560329,"reputation":12811,"user_id":3702862,"accept_rate":84,"display_name":"Rajesh Jadav"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1440482431,"creation_date":1440482431,"answer_id":32196560,"question_id":32196424,"body_markdown":"If you are using Retrofit library then you can directly pass header to api request using `@Header` annotation without use of Interceptor. Here is example that shows how to add header to Retrofit api request.\r\n\r\n    @POST(apiURL)\r\n    void methodName(\r\n            @Header(HeadersContract.HEADER_AUTHONRIZATION) String token,\r\n            @Header(HeadersContract.HEADER_CLIENT_ID) String token,\r\n            @Body TypedInput body,\r\n            Callback&lt;String&gt; callback);\r\n\r\nHope it helps!","title":"How to add headers to OkHttp request interceptor?","body":"<p>If you are using Retrofit library then you can directly pass header to api request using <code>@Header</code> annotation without use of Interceptor. Here is example that shows how to add header to Retrofit api request.</p>\n\n<pre><code>@POST(apiURL)\nvoid methodName(\n        @Header(HeadersContract.HEADER_AUTHONRIZATION) String token,\n        @Header(HeadersContract.HEADER_CLIENT_ID) String token,\n        @Body TypedInput body,\n        Callback&lt;String&gt; callback);\n</code></pre>\n\n<p>Hope it helps!</p>\n"},{"tags":[],"owner":{"account_id":3908906,"reputation":6832,"user_id":3248593,"accept_rate":52,"display_name":"Morteza Rastgoo"},"down_vote_count":0,"up_vote_count":180,"is_accepted":true,"score":180,"last_activity_date":1440824486,"creation_date":1440824486,"answer_id":32282876,"question_id":32196424,"body_markdown":"Finally, I added the headers this way:\r\n\r\n    @Override\r\n        public Response intercept(Interceptor.Chain chain) throws IOException {\r\n            Request request = chain.request();\r\n            Request newRequest;\r\n\r\n            newRequest = request.newBuilder()\r\n                    .addHeader(HeadersContract.HEADER_AUTHONRIZATION, O_AUTH_AUTHENTICATION)\r\n                    .addHeader(HeadersContract.HEADER_X_CLIENT_ID, CLIENT_ID)\r\n                    .build();\r\n            return chain.proceed(newRequest);\r\n        }","title":"How to add headers to OkHttp request interceptor?","body":"<p>Finally, I added the headers this way:</p>\n\n<pre><code>@Override\n    public Response intercept(Interceptor.Chain chain) throws IOException {\n        Request request = chain.request();\n        Request newRequest;\n\n        newRequest = request.newBuilder()\n                .addHeader(HeadersContract.HEADER_AUTHONRIZATION, O_AUTH_AUTHENTICATION)\n                .addHeader(HeadersContract.HEADER_X_CLIENT_ID, CLIENT_ID)\n                .build();\n        return chain.proceed(newRequest);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1690013,"reputation":117,"user_id":1552567,"display_name":"Kushagar Lall"},"down_vote_count":1,"up_vote_count":8,"is_accepted":false,"score":7,"last_activity_date":1455712170,"creation_date":1455712170,"answer_id":35456772,"question_id":32196424,"body_markdown":"There is yet an another way to add interceptors in your OkHttp3 (latest version as of now) , that is you add the interceptors to your Okhttp builder\r\n\r\n    okhttpBuilder.networkInterceptors().add(chain -&gt; {\r\n     //todo add headers etc to your AuthorisedRequest\r\n       \r\n      return chain.proceed(yourAuthorisedRequest);\r\n    });\r\n\r\nand finally build your okHttpClient from this builder\r\n\r\n    OkHttpClient client = builder.build();","title":"How to add headers to OkHttp request interceptor?","body":"<p>There is yet an another way to add interceptors in your OkHttp3 (latest version as of now) , that is you add the interceptors to your Okhttp builder</p>\n\n<pre><code>okhttpBuilder.networkInterceptors().add(chain -&gt; {\n //todo add headers etc to your AuthorisedRequest\n\n  return chain.proceed(yourAuthorisedRequest);\n});\n</code></pre>\n\n<p>and finally build your okHttpClient from this builder</p>\n\n<pre><code>OkHttpClient client = builder.build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6937328,"reputation":2240,"user_id":5324829,"accept_rate":60,"display_name":"gaurang"},"down_vote_count":5,"up_vote_count":39,"is_accepted":false,"score":34,"last_activity_date":1492236024,"creation_date":1492236024,"answer_id":43422769,"question_id":32196424,"body_markdown":"you can do it this way\r\n\r\n    private String GET(String url, Map&lt;String, String&gt; header) throws IOException {\r\n            Headers headerbuild = Headers.of(header);\r\n            Request request = new Request.Builder().url(url).headers(headerbuild).\r\n                            build();\r\n    \r\n            Response response = client.newCall(request).execute();\r\n            return response.body().string();\r\n        }","title":"How to add headers to OkHttp request interceptor?","body":"<p>you can do it this way</p>\n\n<pre><code>private String GET(String url, Map&lt;String, String&gt; header) throws IOException {\n        Headers headerbuild = Headers.of(header);\n        Request request = new Request.Builder().url(url).headers(headerbuild).\n                        build();\n\n        Response response = client.newCall(request).execute();\n        return response.body().string();\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5435375,"reputation":7470,"user_id":4325011,"accept_rate":75,"display_name":"chebaby"},"down_vote_count":0,"up_vote_count":29,"is_accepted":false,"score":29,"last_activity_date":1529511565,"creation_date":1529511565,"answer_id":50952871,"question_id":32196424,"body_markdown":"here is a useful [gist][1] from [lfmingo][2]\r\n\r\n\r\n    OkHttpClient.Builder httpClient = new OkHttpClient.Builder();\r\n    \r\n    httpClient.addInterceptor(new Interceptor() {\r\n    \r\n        @Override\r\n        public Response intercept(Interceptor.Chain chain) throws IOException {\r\n            Request original = chain.request();\r\n    \r\n            Request request = original.newBuilder()\r\n                .header(&quot;User-Agent&quot;, &quot;Your-App-Name&quot;)\r\n                .header(&quot;Accept&quot;, &quot;application/vnd.yourapi.v1.full+json&quot;)\r\n                .method(original.method(), original.body())\r\n                .build();\r\n    \r\n            return chain.proceed(request);\r\n        }\r\n    }\r\n    \r\n    OkHttpClient client = httpClient.build();\r\n    \r\n    Retrofit retrofit = new Retrofit.Builder()  \r\n        .baseUrl(API_BASE_URL)\r\n        .addConverterFactory(GsonConverterFactory.create())\r\n        .client(client)\r\n        .build();\r\n\r\n\r\n  [1]: https://gist.github.com/lfmingo/768a29eafc4a9d25d75ef31e2be506f7\r\n  [2]: https://github.com/lfmingo","title":"How to add headers to OkHttp request interceptor?","body":"<p>here is a useful <a href=\"https://gist.github.com/lfmingo/768a29eafc4a9d25d75ef31e2be506f7\" rel=\"noreferrer\">gist</a> from <a href=\"https://github.com/lfmingo\" rel=\"noreferrer\">lfmingo</a></p>\n\n<pre><code>OkHttpClient.Builder httpClient = new OkHttpClient.Builder();\n\nhttpClient.addInterceptor(new Interceptor() {\n\n    @Override\n    public Response intercept(Interceptor.Chain chain) throws IOException {\n        Request original = chain.request();\n\n        Request request = original.newBuilder()\n            .header(\"User-Agent\", \"Your-App-Name\")\n            .header(\"Accept\", \"application/vnd.yourapi.v1.full+json\")\n            .method(original.method(), original.body())\n            .build();\n\n        return chain.proceed(request);\n    }\n}\n\nOkHttpClient client = httpClient.build();\n\nRetrofit retrofit = new Retrofit.Builder()  \n    .baseUrl(API_BASE_URL)\n    .addConverterFactory(GsonConverterFactory.create())\n    .client(client)\n    .build();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25541,"reputation":18880,"user_id":65694,"accept_rate":46,"display_name":"Alex Nolasco"},"down_vote_count":0,"up_vote_count":14,"is_accepted":false,"score":14,"last_activity_date":1558013134,"creation_date":1558013134,"answer_id":56169720,"question_id":32196424,"body_markdown":"Faced similar issue with other samples, this Kotlin class worked for me\r\n\r\n    import okhttp3.Interceptor\r\n    import okhttp3.Response\r\n\r\n    class CustomInterceptor : Interceptor {\r\n        override fun intercept(chain: Interceptor.Chain) : Response {               \r\n            val request = chain.request().newBuilder()\r\n                .header(&quot;x-custom-header&quot;, &quot;my-value&quot;)\r\n                .build()\r\n            return chain.proceed(request)\r\n        }\r\n    }","title":"How to add headers to OkHttp request interceptor?","body":"<p>Faced similar issue with other samples, this Kotlin class worked for me</p>\n\n<pre><code>import okhttp3.Interceptor\nimport okhttp3.Response\n\nclass CustomInterceptor : Interceptor {\n    override fun intercept(chain: Interceptor.Chain) : Response {               \n        val request = chain.request().newBuilder()\n            .header(\"x-custom-header\", \"my-value\")\n            .build()\n        return chain.proceed(request)\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1040854,"reputation":1857,"user_id":1046909,"display_name":"MingalevME"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1586619749,"creation_date":1586619314,"answer_id":61159366,"question_id":32196424,"body_markdown":"    package com.example.network.interceptors;\r\n    \r\n    import androidx.annotation.NonNull;\r\n    \r\n    import java.io.IOException;\r\n    import java.util.Map;\r\n    \r\n    import okhttp3.Interceptor;\r\n    import okhttp3.Request;\r\n    import okhttp3.Response;\r\n    \r\n    public class RequestHeadersNetworkInterceptor implements Interceptor {\r\n    \r\n        private final Map&lt;String, String&gt; headers;\r\n    \r\n        public RequestHeadersNetworkInterceptor(@NonNull Map&lt;String, String&gt; headers) {\r\n            this.headers = headers;\r\n        }\r\n    \r\n        @NonNull\r\n        @Override\r\n        public Response intercept(Chain chain) throws IOException {\r\n            Request.Builder builder = chain.request().newBuilder();\r\n            for (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\r\n                if (header.getKey() == null || header.getKey().trim().isEmpty()) {\r\n                    continue;\r\n                }\r\n                if (header.getValue() == null || header.getValue().trim().isEmpty()) {\r\n                    builder.removeHeader(header.getKey());\r\n                } else {\r\n                    builder.header(header.getKey(), header.getValue());\r\n                }\r\n            }\r\n            return chain.proceed(builder.build());\r\n        }\r\n    \r\n    }\r\n\r\nExample of usage:\r\n\r\n    httpClientBuilder.networkInterceptors().add(new RequestHeadersNetworkInterceptor(new HashMap&lt;String, String&gt;()\r\n    {\r\n        {\r\n            put(&quot;User-Agent&quot;, getUserAgent());\r\n            put(&quot;Accept&quot;, &quot;application/json&quot;);\r\n        }\r\n    }));","title":"How to add headers to OkHttp request interceptor?","body":"<pre><code>package com.example.network.interceptors;\n\nimport androidx.annotation.NonNull;\n\nimport java.io.IOException;\nimport java.util.Map;\n\nimport okhttp3.Interceptor;\nimport okhttp3.Request;\nimport okhttp3.Response;\n\npublic class RequestHeadersNetworkInterceptor implements Interceptor {\n\n    private final Map&lt;String, String&gt; headers;\n\n    public RequestHeadersNetworkInterceptor(@NonNull Map&lt;String, String&gt; headers) {\n        this.headers = headers;\n    }\n\n    @NonNull\n    @Override\n    public Response intercept(Chain chain) throws IOException {\n        Request.Builder builder = chain.request().newBuilder();\n        for (Map.Entry&lt;String, String&gt; header : headers.entrySet()) {\n            if (header.getKey() == null || header.getKey().trim().isEmpty()) {\n                continue;\n            }\n            if (header.getValue() == null || header.getValue().trim().isEmpty()) {\n                builder.removeHeader(header.getKey());\n            } else {\n                builder.header(header.getKey(), header.getValue());\n            }\n        }\n        return chain.proceed(builder.build());\n    }\n\n}\n</code></pre>\n\n<p>Example of usage:</p>\n\n<pre><code>httpClientBuilder.networkInterceptors().add(new RequestHeadersNetworkInterceptor(new HashMap&lt;String, String&gt;()\n{\n    {\n        put(\"User-Agent\", getUserAgent());\n        put(\"Accept\", \"application/json\");\n    }\n}));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12563685,"reputation":2227,"user_id":9140438,"accept_rate":33,"display_name":"Pankaj Sharma"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1591068073,"creation_date":1591030934,"answer_id":62137194,"question_id":32196424,"body_markdown":"    client = new OkHttpClient();\r\n    \r\n            Request request = new Request.Builder().header(&quot;authorization&quot;, token).url(url).build();\r\n            MyWebSocketListener wsListener = new MyWebSocketListener(LudoRoomActivity.this);\r\n            client.newWebSocket(request, wsListener);\r\n            client.dispatcher().executorService().shutdown();","title":"How to add headers to OkHttp request interceptor?","body":"<pre><code>client = new OkHttpClient();\n\n        Request request = new Request.Builder().header(\"authorization\", token).url(url).build();\n        MyWebSocketListener wsListener = new MyWebSocketListener(LudoRoomActivity.this);\n        client.newWebSocket(request, wsListener);\n        client.dispatcher().executorService().shutdown();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":119225,"reputation":2611,"user_id":310783,"accept_rate":100,"display_name":"patrick-fitzgerald"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1593563849,"creation_date":1593563849,"answer_id":62668014,"question_id":32196424,"body_markdown":"This worked for me: \r\n\r\n```\r\nclass JSONHeaderInterceptor : Interceptor {\r\n    override fun intercept(chain: Interceptor.Chain) : Response {\r\n        val request = chain.request().newBuilder()\r\n            .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\r\n            .build()\r\n        return chain.proceed(request)\r\n    }\r\n}\r\n```\r\n\r\n```\r\nfun provideHttpClient(): OkHttpClient {\r\n    val okHttpClientBuilder = OkHttpClient.Builder()\r\n    okHttpClientBuilder.addInterceptor(JSONHeaderInterceptor())\r\n    return okHttpClientBuilder.build()\r\n}\r\n```\t","title":"How to add headers to OkHttp request interceptor?","body":"<p>This worked for me:</p>\n<pre><code>class JSONHeaderInterceptor : Interceptor {\n    override fun intercept(chain: Interceptor.Chain) : Response {\n        val request = chain.request().newBuilder()\n            .header(&quot;Content-Type&quot;, &quot;application/json&quot;)\n            .build()\n        return chain.proceed(request)\n    }\n}\n</code></pre>\n<pre><code>fun provideHttpClient(): OkHttpClient {\n    val okHttpClientBuilder = OkHttpClient.Builder()\n    okHttpClientBuilder.addInterceptor(JSONHeaderInterceptor())\n    return okHttpClientBuilder.build()\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":325908,"reputation":7254,"user_id":647381,"accept_rate":86,"display_name":"ruX"},"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1606652356,"creation_date":1606652356,"answer_id":65059997,"question_id":32196424,"body_markdown":"Kotlin version: \r\n\r\n```kotlin\r\nfun okHttpClientFactory(): OkHttpClient {\r\n    return OkHttpClient().newBuilder()\r\n        .addInterceptor { chain -&gt;\r\n            chain.request().newBuilder()\r\n                .addHeader(HEADER_AUTHONRIZATION, O_AUTH_AUTHENTICATION)\r\n                .build()\r\n                .let(chain::proceed)\r\n        }\r\n        .build()\r\n}\r\n\r\n```","title":"How to add headers to OkHttp request interceptor?","body":"<p>Kotlin version:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun okHttpClientFactory(): OkHttpClient {\n    return OkHttpClient().newBuilder()\n        .addInterceptor { chain -&gt;\n            chain.request().newBuilder()\n                .addHeader(HEADER_AUTHONRIZATION, O_AUTH_AUTHENTICATION)\n                .build()\n                .let(chain::proceed)\n        }\n        .build()\n}\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6657167,"reputation":53,"user_id":5137320,"accept_rate":80,"display_name":"Yevgen Arkhypov"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660874938,"creation_date":1660874938,"answer_id":73411181,"question_id":32196424,"body_markdown":"For those to whom okhttp3 interceptor still does not work. **Consequence of adding interceptors is make sense!** Kotlin example\r\n\r\n\r\nMy interceptor:\r\n\r\n    class MyOkHttpInterceptor : Interceptor, Logging {\r\n    \t\r\n    \t@Throws(IOException::class)\r\n    \toverride fun intercept(chain: Interceptor.Chain): Response {\r\n    \t\tval mdc = MDC.getCopyOfContextMap()\r\n    \t\tvar request = chain.request().newBuilder()\r\n    \t\t\t\t.header(CommonConstants.WS_USER_AGENT, CommonConstants.WS_USER_AGENT_SEARCH)\r\n    \t\t\t\t.header(CommonConstants.WS_HEADER_TRACED_ID, mdc[CommonConstants.WS_HEADER_TRACED_ID]!!)\r\n    \t\t\t\t.header(CommonConstants.WS_HEADER_ACCEPT, MediaType.APPLICATION_JSON_VALUE)\r\n    \t\t\t\t.method(chain.request().method, chain.request().body)\r\n    \t\t\t\t.build()\r\n    \r\n    \t\treturn chain.proceed(request)\r\n    \r\n    \t}\r\n    }\r\n\r\nMy logging interceptor:\r\n\r\n    val interceptor = HttpLoggingInterceptor()\r\n    interceptor.level = HttpLoggingInterceptor.Level.BASIC\r\n\r\n\r\n1) I am adding header interceptor\r\n2) I am adding logging interceptor\r\n3) **Do not use network interceptors!!!**\r\n\r\n&gt; \r\n\r\n    val client = OkHttpClient.Builder()\r\n                .connectTimeout(httpConnectTimeOut, TimeUnit.SECONDS)\r\n            \t.writeTimeout(httpConnectTimeOut, TimeUnit.SECONDS)\r\n            \t.readTimeout(readTimeOut, TimeUnit.SECONDS)\r\n            \t.addInterceptor(MyOkHttpInterceptor())\r\n            \t.addInterceptor(interceptor)\r\n            \t.build()","title":"How to add headers to OkHttp request interceptor?","body":"<p>For those to whom okhttp3 interceptor still does not work. <strong>Consequence of adding interceptors is make sense!</strong> Kotlin example</p>\n<p>My interceptor:</p>\n<pre><code>class MyOkHttpInterceptor : Interceptor, Logging {\n    \n    @Throws(IOException::class)\n    override fun intercept(chain: Interceptor.Chain): Response {\n        val mdc = MDC.getCopyOfContextMap()\n        var request = chain.request().newBuilder()\n                .header(CommonConstants.WS_USER_AGENT, CommonConstants.WS_USER_AGENT_SEARCH)\n                .header(CommonConstants.WS_HEADER_TRACED_ID, mdc[CommonConstants.WS_HEADER_TRACED_ID]!!)\n                .header(CommonConstants.WS_HEADER_ACCEPT, MediaType.APPLICATION_JSON_VALUE)\n                .method(chain.request().method, chain.request().body)\n                .build()\n\n        return chain.proceed(request)\n\n    }\n}\n</code></pre>\n<p>My logging interceptor:</p>\n<pre><code>val interceptor = HttpLoggingInterceptor()\ninterceptor.level = HttpLoggingInterceptor.Level.BASIC\n</code></pre>\n<ol>\n<li>I am adding header interceptor</li>\n<li>I am adding logging interceptor</li>\n<li><strong>Do not use network interceptors!!!</strong></li>\n</ol>\n<blockquote>\n</blockquote>\n<pre><code>val client = OkHttpClient.Builder()\n            .connectTimeout(httpConnectTimeOut, TimeUnit.SECONDS)\n            .writeTimeout(httpConnectTimeOut, TimeUnit.SECONDS)\n            .readTimeout(readTimeOut, TimeUnit.SECONDS)\n            .addInterceptor(MyOkHttpInterceptor())\n            .addInterceptor(interceptor)\n            .build()\n</code></pre>\n"}],"owner":{"account_id":3908906,"reputation":6832,"user_id":3248593,"accept_rate":52,"display_name":"Morteza Rastgoo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":153530,"favorite_count":0,"down_vote_count":0,"up_vote_count":126,"accepted_answer_id":32282876,"answer_count":11,"score":126,"last_activity_date":1660874938,"creation_date":1440481829,"question_id":32196424,"body_markdown":"I have this interceptor that i add to my OkHttp client:\r\n\r\n    public class RequestTokenInterceptor implements Interceptor {\r\n    @Override\r\n    public Response intercept(Chain chain) throws IOException {\r\n      Request request = chain.request();\r\n      // Here where we&#39;ll try to refresh token.\r\n      // with an retrofit call\r\n      // After we succeed we&#39;ll proceed our request\r\n      Response response = chain.proceed(request);\r\n      return response;\r\n    }\r\n    }\r\n\r\nHow can i add headers to request in my interceptor?\r\n\r\nI tried this but i am making mistake and i lose my request when creating new request:\r\n\r\n        public class RequestTokenInterceptor implements Interceptor {\r\n        @Override\r\n        public Response intercept(Interceptor.Chain chain) throws IOException {\r\n            Request request = chain.request();\r\n            Request newRequest;\r\n\r\n            try {\r\n                Log.d(&quot;addHeader&quot;, &quot;Before&quot;);\r\n                String token = TokenProvider.getInstance(mContext).getToken();\r\n                newRequest = request.newBuilder()\r\n                        .addHeader(HeadersContract.HEADER_AUTHONRIZATION, O_AUTH_AUTHENTICATION + token)\r\n                        .addHeader(HeadersContract.HEADER_CLIENT_ID, CLIENT_ID)\r\n                        .build();\r\n            } catch (Exception e) {\r\n                Log.d(&quot;addHeader&quot;, &quot;Error&quot;);\r\n                e.printStackTrace();\r\n                return chain.proceed(request);\r\n            }\r\n\r\n            Log.d(&quot;addHeader&quot;, &quot;after&quot;);\r\n            return chain.proceed(newRequest);\r\n        }\r\n    }\r\n\r\nNote that, i know i can add header when creating request like this:\r\n\r\n    Request request = new Request.Builder()\r\n        .url(&quot;https://api.github.com/repos/square/okhttp/issues&quot;)\r\n        .header(&quot;User-Agent&quot;, &quot;OkHttp Headers.java&quot;)\r\n        .addHeader(&quot;Accept&quot;, &quot;application/json; q=0.5&quot;)\r\n        .addHeader(&quot;Accept&quot;, &quot;application/vnd.github.v3+json&quot;)\r\n        .build();\r\n\r\nBut it doesn&#39;t fit my needs. I need it in interceptor.","title":"How to add headers to OkHttp request interceptor?","body":"<p>I have this interceptor that i add to my OkHttp client:</p>\n\n<pre><code>public class RequestTokenInterceptor implements Interceptor {\n@Override\npublic Response intercept(Chain chain) throws IOException {\n  Request request = chain.request();\n  // Here where we'll try to refresh token.\n  // with an retrofit call\n  // After we succeed we'll proceed our request\n  Response response = chain.proceed(request);\n  return response;\n}\n}\n</code></pre>\n\n<p>How can i add headers to request in my interceptor?</p>\n\n<p>I tried this but i am making mistake and i lose my request when creating new request:</p>\n\n<pre><code>    public class RequestTokenInterceptor implements Interceptor {\n    @Override\n    public Response intercept(Interceptor.Chain chain) throws IOException {\n        Request request = chain.request();\n        Request newRequest;\n\n        try {\n            Log.d(\"addHeader\", \"Before\");\n            String token = TokenProvider.getInstance(mContext).getToken();\n            newRequest = request.newBuilder()\n                    .addHeader(HeadersContract.HEADER_AUTHONRIZATION, O_AUTH_AUTHENTICATION + token)\n                    .addHeader(HeadersContract.HEADER_CLIENT_ID, CLIENT_ID)\n                    .build();\n        } catch (Exception e) {\n            Log.d(\"addHeader\", \"Error\");\n            e.printStackTrace();\n            return chain.proceed(request);\n        }\n\n        Log.d(\"addHeader\", \"after\");\n        return chain.proceed(newRequest);\n    }\n}\n</code></pre>\n\n<p>Note that, i know i can add header when creating request like this:</p>\n\n<pre><code>Request request = new Request.Builder()\n    .url(\"https://api.github.com/repos/square/okhttp/issues\")\n    .header(\"User-Agent\", \"OkHttp Headers.java\")\n    .addHeader(\"Accept\", \"application/json; q=0.5\")\n    .addHeader(\"Accept\", \"application/vnd.github.v3+json\")\n    .build();\n</code></pre>\n\n<p>But it doesn't fit my needs. I need it in interceptor.</p>\n"},{"tags":["java","servlets","httprequest"],"comments":[{"owner":{"account_id":2750825,"reputation":646,"user_id":2370265,"display_name":"parsifal"},"score":3,"creation_date":1369154913,"post_id":16675191,"comment_id":23994052,"body_markdown":"I think it&#39;s most likely that whatever &quot;other functions&quot; that you call to construct the `HttpServletRequest` are constructing it incorrectly. Perhaps you can create a [SSCCE](http://sscce.org/) that demonstrates the exact problem?","body":"I think it&#39;s most likely that whatever &quot;other functions&quot; that you call to construct the <code>HttpServletRequest</code> are constructing it incorrectly. Perhaps you can create a <a href=\"http://sscce.org/\" rel=\"nofollow noreferrer\">SSCCE</a> that demonstrates the exact problem?"}],"answers":[{"tags":[],"owner":{"account_id":2077773,"reputation":133288,"user_id":1850609,"display_name":"acdcjunior"},"down_vote_count":0,"up_vote_count":182,"is_accepted":true,"score":182,"last_activity_date":1502454906,"creation_date":1369155134,"answer_id":16675399,"question_id":16675191,"body_markdown":"By design, [`getRequestURL()`][1] gives you the full URL, missing only the query string.\n\nIn [`HttpServletRequest`][2], you can get individual parts of the URI using the methods below:\n\n    // Example: http://myhost:8080/people?lastname=Fox&amp;age=30\n\n    String uri = request.getScheme() + &quot;://&quot; +   // &quot;http&quot; + &quot;://\n                 request.getServerName() +       // &quot;myhost&quot;\n                 &quot;:&quot; +                           // &quot;:&quot;\n                 request.getServerPort() +       // &quot;8080&quot;\n                 request.getRequestURI() +       // &quot;/people&quot;\n                 &quot;?&quot; +                           // &quot;?&quot;\n                 request.getQueryString();       // &quot;lastname=Fox&amp;age=30&quot;\n\n- `.getScheme()` will give you `&quot;https&quot;` if it was a `https://domain` request.\n- `.getServerName()` gives `domain` on `http(s)://domain`.\n- `.getServerPort()` will give you the port.\n\n## Use the snippet below:\n\n    String uri = request.getScheme() + &quot;://&quot; +\n                 request.getServerName() + \n                 (&quot;http&quot;.equals(request.getScheme()) &amp;&amp; request.getServerPort() == 80 || &quot;https&quot;.equals(request.getScheme()) &amp;&amp; request.getServerPort() == 443 ? &quot;&quot; : &quot;:&quot; + request.getServerPort() ) +\n                 request.getRequestURI() +\n                (request.getQueryString() != null ? &quot;?&quot; + request.getQueryString() : &quot;&quot;);\n\nThis snippet above will get the full URI, hiding the port if the default one was used, and not adding the `&quot;?&quot;` and the query string if the latter was not provided.\n\n&lt;br&gt;\n\n## Proxied requests\n\nNote, that if your request passes through a proxy, you need to look at the `X-Forwarded-Proto` header since the scheme might be altered:\n\n    request.getHeader(&quot;X-Forwarded-Proto&quot;)\n\nAlso, a common header is `X-Forwarded-For`, which show the original request IP instead of the proxys IP.\n\n    request.getHeader(&quot;X-Forwarded-For&quot;)\n\nIf you are responsible for the configuration of the proxy/load balancer yourself, you need to ensure that these headers are set upon forwarding.\n\n  [1]: http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL%28%29\n  [2]: http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html","title":"Get full URL and query string in Servlet for both HTTP and HTTPS requests","body":"<p>By design, <a href=\"http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL%28%29\" rel=\"noreferrer\"><code>getRequestURL()</code></a> gives you the full URL, missing only the query string.</p>\n<p>In <a href=\"http://download.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html\" rel=\"noreferrer\"><code>HttpServletRequest</code></a>, you can get individual parts of the URI using the methods below:</p>\n<pre><code>// Example: http://myhost:8080/people?lastname=Fox&amp;age=30\n\nString uri = request.getScheme() + &quot;://&quot; +   // &quot;http&quot; + &quot;://\n             request.getServerName() +       // &quot;myhost&quot;\n             &quot;:&quot; +                           // &quot;:&quot;\n             request.getServerPort() +       // &quot;8080&quot;\n             request.getRequestURI() +       // &quot;/people&quot;\n             &quot;?&quot; +                           // &quot;?&quot;\n             request.getQueryString();       // &quot;lastname=Fox&amp;age=30&quot;\n</code></pre>\n<ul>\n<li><code>.getScheme()</code> will give you <code>&quot;https&quot;</code> if it was a <code>https://domain</code> request.</li>\n<li><code>.getServerName()</code> gives <code>domain</code> on <code>http(s)://domain</code>.</li>\n<li><code>.getServerPort()</code> will give you the port.</li>\n</ul>\n<h2>Use the snippet below:</h2>\n<pre><code>String uri = request.getScheme() + &quot;://&quot; +\n             request.getServerName() + \n             (&quot;http&quot;.equals(request.getScheme()) &amp;&amp; request.getServerPort() == 80 || &quot;https&quot;.equals(request.getScheme()) &amp;&amp; request.getServerPort() == 443 ? &quot;&quot; : &quot;:&quot; + request.getServerPort() ) +\n             request.getRequestURI() +\n            (request.getQueryString() != null ? &quot;?&quot; + request.getQueryString() : &quot;&quot;);\n</code></pre>\n<p>This snippet above will get the full URI, hiding the port if the default one was used, and not adding the <code>&quot;?&quot;</code> and the query string if the latter was not provided.</p>\n<br>\n<h2>Proxied requests</h2>\n<p>Note, that if your request passes through a proxy, you need to look at the <code>X-Forwarded-Proto</code> header since the scheme might be altered:</p>\n<pre><code>request.getHeader(&quot;X-Forwarded-Proto&quot;)\n</code></pre>\n<p>Also, a common header is <code>X-Forwarded-For</code>, which show the original request IP instead of the proxys IP.</p>\n<pre><code>request.getHeader(&quot;X-Forwarded-For&quot;)\n</code></pre>\n<p>If you are responsible for the configuration of the proxy/load balancer yourself, you need to ensure that these headers are set upon forwarding.</p>\n"},{"tags":[],"owner":{"account_id":1332657,"reputation":1217,"user_id":1276179,"display_name":"sumitkanoje"},"down_vote_count":1,"up_vote_count":11,"is_accepted":false,"score":10,"last_activity_date":1450524944,"creation_date":1450524944,"answer_id":34370227,"question_id":16675191,"body_markdown":"## Simply Use:\n\n    String Uri = request.getRequestURL()+&quot;?&quot;+request.getQueryString();","title":"Get full URL and query string in Servlet for both HTTP and HTTPS requests","body":"<h2>Simply Use:</h2>\n<pre><code>String Uri = request.getRequestURL()+&quot;?&quot;+request.getQueryString();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8089670,"reputation":380,"user_id":6096015,"display_name":"dancnfoo"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1507246756,"creation_date":1507246756,"answer_id":46596276,"question_id":16675191,"body_markdown":"The fact that a `HTTPS` request becomes `HTTP` when you tried to construct the URL on server side indicates that you might have a proxy/load balancer (`nginx`, `pound`, etc.) offloading SSL encryption in front and forward to your back end service in plain `HTTP`.\r\n\r\nIf that&#39;s case, check,\r\n\r\n 1. whether your proxy has been set up to forward headers correctly (`Host`, `X-forwarded-proto`, `X-forwarded-for`, etc).  \r\n 2. whether your service container (E.g. `Tomcat`) is set up to recognize the proxy in front. For example, `Tomcat` requires adding `secure=&quot;true&quot; scheme=&quot;https&quot; proxyPort=&quot;443&quot;` attributes to its `Connector`\r\n 3. whether your code, or service container is processing the headers correctly. For example, `Tomcat` automatically replaces `scheme`, `remoteAddr`, etc. values when you add `RemoteIpValve` to its `Engine`. (see [Configuration guide][1], [JavaDoc][2]) so  you don&#39;t have to process these headers in your code manually.\r\n\r\nIncorrect proxy header values could result in incorrect output when `request.getRequestURI()` or `request.getRequestURL()` attempts to construct the originating URL.\r\n\r\n\r\n  [1]: https://tomcat.apache.org/tomcat-8.5-doc/config/valve.html#Remote_Address_Valve\r\n  [2]: https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/valves/RemoteIpValve.html &quot;JavaDoc&quot;","title":"Get full URL and query string in Servlet for both HTTP and HTTPS requests","body":"<p>The fact that a <code>HTTPS</code> request becomes <code>HTTP</code> when you tried to construct the URL on server side indicates that you might have a proxy/load balancer (<code>nginx</code>, <code>pound</code>, etc.) offloading SSL encryption in front and forward to your back end service in plain <code>HTTP</code>.</p>\n\n<p>If that's case, check,</p>\n\n<ol>\n<li>whether your proxy has been set up to forward headers correctly (<code>Host</code>, <code>X-forwarded-proto</code>, <code>X-forwarded-for</code>, etc).  </li>\n<li>whether your service container (E.g. <code>Tomcat</code>) is set up to recognize the proxy in front. For example, <code>Tomcat</code> requires adding <code>secure=\"true\" scheme=\"https\" proxyPort=\"443\"</code> attributes to its <code>Connector</code></li>\n<li>whether your code, or service container is processing the headers correctly. For example, <code>Tomcat</code> automatically replaces <code>scheme</code>, <code>remoteAddr</code>, etc. values when you add <code>RemoteIpValve</code> to its <code>Engine</code>. (see <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/config/valve.html#Remote_Address_Valve\" rel=\"nofollow noreferrer\">Configuration guide</a>, <a href=\"https://tomcat.apache.org/tomcat-8.5-doc/api/org/apache/catalina/valves/RemoteIpValve.html\" rel=\"nofollow noreferrer\" title=\"JavaDoc\">JavaDoc</a>) so  you don't have to process these headers in your code manually.</li>\n</ol>\n\n<p>Incorrect proxy header values could result in incorrect output when <code>request.getRequestURI()</code> or <code>request.getRequestURL()</code> attempts to construct the originating URL.</p>\n"},{"tags":[],"owner":{"account_id":1268903,"reputation":21449,"user_id":1225617,"accept_rate":44,"display_name":"Adam Millerchip"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1583817667,"creation_date":1583817667,"answer_id":60611946,"question_id":16675191,"body_markdown":"I know this is a Java question, but if you&#39;re using Kotlin you can do this quite nicely:\r\n\r\n```kotlin\r\nval uri = request.run {\r\n    if (queryString.isNullOrBlank()) requestURI else &quot;$requestURI?$queryString&quot;\r\n}\r\n```","title":"Get full URL and query string in Servlet for both HTTP and HTTPS requests","body":"<p>I know this is a Java question, but if you're using Kotlin you can do this quite nicely:</p>\n\n<pre class=\"lang-kotlin prettyprint-override\"><code>val uri = request.run {\n    if (queryString.isNullOrBlank()) requestURI else \"$requestURI?$queryString\"\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13170666,"reputation":78669,"user_id":9513184,"display_name":"Unmitigated"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660874709,"creation_date":1660874709,"answer_id":73411161,"question_id":16675191,"body_markdown":"For Spring users, [`ServletUriComponentsBuilder`](https://docs.spring.io/spring-framework/docs/5.3.22/javadoc-api/org/springframework/web/servlet/support/ServletUriComponentsBuilder.html) handles this.\r\n\r\n```java\r\n// autowire HttpServletRequest to use here\r\nString fullURL = ServletUriComponentsBuilder.fromRequest(request).build().toString();\r\n// or use current request\r\nString fullURL = ServletUriComponentsBuilder.fromCurrentRequest().build().toString();\r\n```","title":"Get full URL and query string in Servlet for both HTTP and HTTPS requests","body":"<p>For Spring users, <a href=\"https://docs.spring.io/spring-framework/docs/5.3.22/javadoc-api/org/springframework/web/servlet/support/ServletUriComponentsBuilder.html\" rel=\"nofollow noreferrer\"><code>ServletUriComponentsBuilder</code></a> handles this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>// autowire HttpServletRequest to use here\nString fullURL = ServletUriComponentsBuilder.fromRequest(request).build().toString();\n// or use current request\nString fullURL = ServletUriComponentsBuilder.fromCurrentRequest().build().toString();\n</code></pre>\n"}],"owner":{"account_id":481962,"reputation":4475,"user_id":896062,"accept_rate":67,"display_name":"progrrammer"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":262836,"favorite_count":0,"down_vote_count":0,"up_vote_count":82,"accepted_answer_id":16675399,"answer_count":5,"score":82,"last_activity_date":1660874709,"creation_date":1369154465,"question_id":16675191,"body_markdown":"I am writing a code which task is to retrieve a requested URL or full path. I&#39;ve written this code: \r\n     \r\n\r\n    HttpServletRequest request;//obtained from other functions\r\n    String uri = request.getRequestURI();\r\n    if (request.getQueryString() != null)\r\n        uri += &quot;?&quot; + request.getQueryString();\r\n         \r\nSo, when I browse `http://google.com?q=abc` it is OK (correct).\r\nBut there is problem when I browse `https://google.com`. The value of `uri` is `http://google.com:443google.com:443`, So the program doesn&#39;t only when `HTTPS` is used.\r\n\r\nAnd the output is same for `request.getRequestURL().toString()`. \r\n\r\nWhat is the solution?   \r\n","title":"Get full URL and query string in Servlet for both HTTP and HTTPS requests","body":"<p>I am writing a code which task is to retrieve a requested URL or full path. I've written this code: </p>\n\n<pre><code>HttpServletRequest request;//obtained from other functions\nString uri = request.getRequestURI();\nif (request.getQueryString() != null)\n    uri += \"?\" + request.getQueryString();\n</code></pre>\n\n<p>So, when I browse <code>http://google.com?q=abc</code> it is OK (correct).\nBut there is problem when I browse <code>https://google.com</code>. The value of <code>uri</code> is <code>http://google.com:443google.com:443</code>, So the program doesn't only when <code>HTTPS</code> is used.</p>\n\n<p>And the output is same for <code>request.getRequestURL().toString()</code>. </p>\n\n<p>What is the solution?   </p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":7344646,"reputation":33,"user_id":5592795,"display_name":"Valentin Suruceanu"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660639145,"creation_date":1660639145,"answer_id":73371123,"question_id":73370970,"body_markdown":"Not sure if that answer your question but you can check [this link][1], maybe you need to configure your dev profile if you have more profiles, if not to create them.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/35651241/configure-logback-using-several-profiles","title":"spring boot How to turn off the use of log back","body":"<p>Not sure if that answer your question but you can check <a href=\"https://stackoverflow.com/questions/35651241/configure-logback-using-several-profiles\">this link</a>, maybe you need to configure your dev profile if you have more profiles, if not to create them.</p>\n"},{"tags":[],"owner":{"account_id":1656890,"reputation":8197,"user_id":1526192,"display_name":"Phil Webb"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660873704,"creation_date":1660873704,"answer_id":73411075,"question_id":73370970,"body_markdown":"To disable logging you can set the root logger to `off`. Add the following to your `application.properties`:\r\n\r\n    logging.level.root=off\r\n\r\nSee [this section of the reference docs](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.logging.log-levels).\r\n\r\nIf you want completely silent output you can also set:\r\n\r\n    spring.main.banner-mode=off\r\n\r\nThis is covered in [this section of the documentation](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.spring-application.banner).\r\n\r\nIf you want this setting only in certain you can use [profile specific property files](https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.profile-specific).\r\n","title":"spring boot How to turn off the use of log back","body":"<p>To disable logging you can set the root logger to <code>off</code>. Add the following to your <code>application.properties</code>:</p>\n<pre><code>logging.level.root=off\n</code></pre>\n<p>See <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.logging.log-levels\" rel=\"nofollow noreferrer\">this section of the reference docs</a>.</p>\n<p>If you want completely silent output you can also set:</p>\n<pre><code>spring.main.banner-mode=off\n</code></pre>\n<p>This is covered in <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.spring-application.banner\" rel=\"nofollow noreferrer\">this section of the documentation</a>.</p>\n<p>If you want this setting only in certain you can use <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.files.profile-specific\" rel=\"nofollow noreferrer\">profile specific property files</a>.</p>\n"}],"owner":{"account_id":26074932,"reputation":9,"user_id":19774005,"display_name":"user19774005"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":405,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660873704,"creation_date":1660638402,"question_id":73370970,"body_markdown":"It is often not necessary to use logback printing during dev development. How to turn off logback printing logs while in dev environment.\r\nTurn on log back log printing in production environment.\r\n[enter image description here][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/2sqS1.png","title":"spring boot How to turn off the use of log back","body":"<p>It is often not necessary to use logback printing during dev development. How to turn off logback printing logs while in dev environment.\nTurn on log back log printing in production environment.\n<a href=\"https://i.stack.imgur.com/2sqS1.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring","spring-cloud-aws"],"answers":[{"tags":[],"owner":{"account_id":26091633,"reputation":1,"user_id":19788429,"display_name":"user19788429"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660868632,"creation_date":1660868632,"answer_id":73410693,"question_id":73394319,"body_markdown":"Looks like it was an error with configuration. I had mistakenly left the xml configuration `&lt;aws-messaging:annotation-driven-queue-listener /&gt;` active which was the source of the erroneous SQS client. Removing that xml configuration and including an override of the `amazonSQS` bean (bean name must match exactly) with an instance of `AmazonSQSAsync` solved the issue.","title":"How To Override Default SQS Configurations For Spring Cloud AWS Messaging","body":"<p>Looks like it was an error with configuration. I had mistakenly left the xml configuration <code>&lt;aws-messaging:annotation-driven-queue-listener /&gt;</code> active which was the source of the erroneous SQS client. Removing that xml configuration and including an override of the <code>amazonSQS</code> bean (bean name must match exactly) with an instance of <code>AmazonSQSAsync</code> solved the issue.</p>\n"}],"owner":{"account_id":26091633,"reputation":1,"user_id":19788429,"display_name":"user19788429"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":817,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73410693,"answer_count":1,"score":0,"last_activity_date":1660868632,"creation_date":1660766601,"question_id":73394319,"body_markdown":"Specifically looking to override the default `AmazonSQSAsync` client in order to ensure that the client is compatible with FIFO queues as mentioned in the version 2.4.2 documentation [here](https://docs.awspring.io/spring-cloud-aws/docs/2.4.2/reference/html/index.html#fifo-queue-support) . Defining a bean in my application in a `@Configuration` class similar to the documentation (as shown below) still results in the warning `AmazonSQSBufferedAsyncClient that Spring Cloud AWS uses by default to communicate with SQS is not compatible with FIFO queues. Consider registering non-buffered AmazonSQSAsyncClient bean.` Although, requests do seem to work I have not yet been able to determine if the correct `AmazonSQSAsync` client is being used. I&#39;m looking for either a way to adjust my configuration that removes this warning (because my \r\n`AmazonSQSAsync` bean is being used) or way to confirm that the message is actually a red herring. The dependency I&#39;m using is `spring-cloud-aws-messaging` version 2.4.2\r\n\r\n```\r\n@Configuration\r\npublic class SQSConfig {\r\n\r\n\t@Bean\r\n\tpublic AmazonSQSAsync amazonSQS(@Value(&quot;${aws.region}&quot;) String awsRegion) {\r\n\t\treturn AmazonSQSAsyncClientBuilder.standard()\r\n\t\t\t\t.withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\r\n\t\t\t\t.withRegion(awsRegion)\r\n\t\t\t\t.build();\r\n\t}\r\n}\r\n\r\n```","title":"How To Override Default SQS Configurations For Spring Cloud AWS Messaging","body":"<p>Specifically looking to override the default <code>AmazonSQSAsync</code> client in order to ensure that the client is compatible with FIFO queues as mentioned in the version 2.4.2 documentation <a href=\"https://docs.awspring.io/spring-cloud-aws/docs/2.4.2/reference/html/index.html#fifo-queue-support\" rel=\"nofollow noreferrer\">here</a> . Defining a bean in my application in a <code>@Configuration</code> class similar to the documentation (as shown below) still results in the warning <code>AmazonSQSBufferedAsyncClient that Spring Cloud AWS uses by default to communicate with SQS is not compatible with FIFO queues. Consider registering non-buffered AmazonSQSAsyncClient bean.</code> Although, requests do seem to work I have not yet been able to determine if the correct <code>AmazonSQSAsync</code> client is being used. I'm looking for either a way to adjust my configuration that removes this warning (because my\n<code>AmazonSQSAsync</code> bean is being used) or way to confirm that the message is actually a red herring. The dependency I'm using is <code>spring-cloud-aws-messaging</code> version 2.4.2</p>\n<pre><code>@Configuration\npublic class SQSConfig {\n\n    @Bean\n    public AmazonSQSAsync amazonSQS(@Value(&quot;${aws.region}&quot;) String awsRegion) {\n        return AmazonSQSAsyncClientBuilder.standard()\n                .withCredentials(DefaultAWSCredentialsProviderChain.getInstance())\n                .withRegion(awsRegion)\n                .build();\n    }\n}\n\n</code></pre>\n"},{"tags":["java","apache-spark","cassandra","datastax-enterprise","spark-cassandra-connector"],"comments":[{"owner":{"account_id":1369786,"reputation":73221,"user_id":1305344,"accept_rate":70,"display_name":"Jacek Laskowski"},"score":0,"creation_date":1481471905,"post_id":36298655,"comment_id":69380961,"body_markdown":"Have you sorted it out? What was the real cause(s) of the issue?","body":"Have you sorted it out? What was the real cause(s) of the issue?"}],"answers":[{"tags":[],"owner":{"account_id":2370892,"reputation":468,"user_id":2075542,"display_name":"cyber4ron"},"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1481472103,"creation_date":1459341722,"answer_id":36309216,"question_id":36298655,"body_markdown":"I&#39;ve been encountering the similar problem recently due to\r\n`--conf spark.executor.userClassPathFirst=true`.\r\n\r\nQuoting [Spark&#39;s official documentation][1]:\r\n\r\n&gt; **spark.executor.userClassPathFirst** (Experimental) Same functionality as `spark.driver.userClassPathFirst`, but applied to executor instances.\r\n\r\nI think those exceptions were due to some jar version conflict, and by the spark document, &quot;The user&#39;s jar should never include Hadoop or Spark libraries, however, these will be added at runtime.&quot; \r\n\r\n\r\n  [1]: http://spark.apache.org/docs/latest/configuration.html#runtime-environment","title":"How to find the root cause for Spark job aborts with Cassandra (that leads to ClassCastException - ShuffleMapTask to Task)?","body":"<p>I've been encountering the similar problem recently due to\n<code>--conf spark.executor.userClassPathFirst=true</code>.</p>\n\n<p>Quoting <a href=\"http://spark.apache.org/docs/latest/configuration.html#runtime-environment\" rel=\"nofollow noreferrer\">Spark's official documentation</a>:</p>\n\n<blockquote>\n  <p><strong>spark.executor.userClassPathFirst</strong> (Experimental) Same functionality as <code>spark.driver.userClassPathFirst</code>, but applied to executor instances.</p>\n</blockquote>\n\n<p>I think those exceptions were due to some jar version conflict, and by the spark document, \"The user's jar should never include Hadoop or Spark libraries, however, these will be added at runtime.\" </p>\n"},{"tags":[],"owner":{"account_id":12869220,"reputation":46,"user_id":9308300,"display_name":"Biswabhusan Pradhan"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1544177231,"creation_date":1544177231,"answer_id":53667303,"question_id":36298655,"body_markdown":"I was also struggling with the same error. But setting userClassPathFirst=true doesn&#39;t help me. I set &quot;spark.driver.userClassPathFirst=false&quot; and &quot;spark.executor.userClassPathFirst=false&quot;. It solved my ClassCastException problem. Here is my command.\r\n\r\nspark-submit --conf &quot;spark.driver.userClassPathFirst=false&quot; --conf &quot;spark.executor.userClassPathFirst=false&quot; --deploy-mode client --class org.sdrc.kspmis.dashboardservice.KspDashboardServiceApplication --master spark://192.168.1.95:7077 dashboard-0.0.1-SNAPSHOT-shaded.jar\r\n","title":"How to find the root cause for Spark job aborts with Cassandra (that leads to ClassCastException - ShuffleMapTask to Task)?","body":"<p>I was also struggling with the same error. But setting userClassPathFirst=true doesn't help me. I set \"spark.driver.userClassPathFirst=false\" and \"spark.executor.userClassPathFirst=false\". It solved my ClassCastException problem. Here is my command.</p>\n\n<p>spark-submit --conf \"spark.driver.userClassPathFirst=false\" --conf \"spark.executor.userClassPathFirst=false\" --deploy-mode client --class org.sdrc.kspmis.dashboardservice.KspDashboardServiceApplication --master spark://192.168.1.95:7077 dashboard-0.0.1-SNAPSHOT-shaded.jar</p>\n"}],"owner":{"account_id":185347,"reputation":1091,"user_id":421989,"accept_rate":62,"display_name":"lazywiz"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1007,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1660868124,"creation_date":1459305340,"question_id":36298655,"body_markdown":"I am trying to read data from Cassandra using Spark. \r\n\r\n        DataFrame rdf = sqlContext.read().option(&quot;keyspace&quot;, &quot;readypulse&quot;)\r\n                .option(&quot;table&quot;, &quot;ig_posts&quot;)\r\n                .format(&quot;org.apache.spark.sql.cassandra&quot;).load();\r\n\r\n        rdf.registerTempTable(&quot;cassandra_table&quot;);\r\n        System.out.println(sqlContext.sql(&quot;select count(external_id) from cassandra_table&quot;).collect()[0].getLong(0));\r\n        \r\nThe task fails with the following error. I am not able to understand why the ShuffleMaptask is being called and why it is a problem to cast it to Task.\r\n\r\n    16/03/30 02:27:15 WARN TaskSetManager: Lost task 1.0 in stage 0.0 (TID 1, ip-10-165-180-22.ec2.internal): \r\n                java.lang.ClassCastException: \r\n                org.apache.spark.scheduler.ShuffleMapTask \r\n                    cannot be cast to org.apache.spark.scheduler.Task\r\n                            at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:193)\r\n                            at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\r\n                            at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\r\n                            at java.lang.Thread.run(Thread.java:745)\r\n    16/03/30 02:27:15 INFO TaskSetManager: Lost task 0.0 in stage 0.0 (TID 0) on executor ip-10-165-180-22.ec2.internal: \r\n                java.lang.ClassCastException (org.apache.spark.scheduler.Shuf\r\n                    fleMapTask \r\n                cannot be cast to org.apache.spark.scheduler.Task) [duplicate 1]\r\n                    \r\n    16/03/30 02:27:15 ERROR TaskSetManager: Task 0 in stage 0.0 failed 4 times; aborting job\r\n\r\nI am using EMR 4.4, Spark 1.6, Cassandra 2.2 (Datastax Community), and spark-cassandra-connector-java_2.10 1.6.0-M1 (also tried 1.5.0)\r\n\r\nI also tried the same with following code, but got same error.\r\n\r\n        CassandraJavaRDD&lt;CassandraRow&gt; cjrdd = functions.cassandraTable(\r\n                KEYSPACE, tableName).select(columns);\r\n        logger.info(&quot;Got rows from cassandra &quot; + cjrdd.count());\r\n\r\n        JavaRDD&lt;Double&gt; jrdd2 = cjrdd.map(new Function&lt;CassandraRow, Double&gt;() {\r\n            @Override\r\n            public Double call(CassandraRow trainingRow) throws Exception {\r\n                Object fCount = trainingRow.getRaw(&quot;follower_count&quot;);\r\n                double count = 0;\r\n                if (fCount != null) {\r\n                    count = (Long) fCount;\r\n                }\r\n                return count;\r\n            }\r\n        });\r\n        logger.info(&quot;Mapper done : &quot; + jrdd2.count());\r\n        logger.info(&quot;Mapper done values : &quot; + jrdd2.collect());\r\n","title":"How to find the root cause for Spark job aborts with Cassandra (that leads to ClassCastException - ShuffleMapTask to Task)?","body":"<p>I am trying to read data from Cassandra using Spark. </p>\n\n<pre><code>    DataFrame rdf = sqlContext.read().option(\"keyspace\", \"readypulse\")\n            .option(\"table\", \"ig_posts\")\n            .format(\"org.apache.spark.sql.cassandra\").load();\n\n    rdf.registerTempTable(\"cassandra_table\");\n    System.out.println(sqlContext.sql(\"select count(external_id) from cassandra_table\").collect()[0].getLong(0));\n</code></pre>\n\n<p>The task fails with the following error. I am not able to understand why the ShuffleMaptask is being called and why it is a problem to cast it to Task.</p>\n\n<pre><code>16/03/30 02:27:15 WARN TaskSetManager: Lost task 1.0 in stage 0.0 (TID 1, ip-10-165-180-22.ec2.internal): \n            java.lang.ClassCastException: \n            org.apache.spark.scheduler.ShuffleMapTask \n                cannot be cast to org.apache.spark.scheduler.Task\n                        at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:193)\n                        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)\n                        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)\n                        at java.lang.Thread.run(Thread.java:745)\n16/03/30 02:27:15 INFO TaskSetManager: Lost task 0.0 in stage 0.0 (TID 0) on executor ip-10-165-180-22.ec2.internal: \n            java.lang.ClassCastException (org.apache.spark.scheduler.Shuf\n                fleMapTask \n            cannot be cast to org.apache.spark.scheduler.Task) [duplicate 1]\n\n16/03/30 02:27:15 ERROR TaskSetManager: Task 0 in stage 0.0 failed 4 times; aborting job\n</code></pre>\n\n<p>I am using EMR 4.4, Spark 1.6, Cassandra 2.2 (Datastax Community), and spark-cassandra-connector-java_2.10 1.6.0-M1 (also tried 1.5.0)</p>\n\n<p>I also tried the same with following code, but got same error.</p>\n\n<pre><code>    CassandraJavaRDD&lt;CassandraRow&gt; cjrdd = functions.cassandraTable(\n            KEYSPACE, tableName).select(columns);\n    logger.info(\"Got rows from cassandra \" + cjrdd.count());\n\n    JavaRDD&lt;Double&gt; jrdd2 = cjrdd.map(new Function&lt;CassandraRow, Double&gt;() {\n        @Override\n        public Double call(CassandraRow trainingRow) throws Exception {\n            Object fCount = trainingRow.getRaw(\"follower_count\");\n            double count = 0;\n            if (fCount != null) {\n                count = (Long) fCount;\n            }\n            return count;\n        }\n    });\n    logger.info(\"Mapper done : \" + jrdd2.count());\n    logger.info(\"Mapper done values : \" + jrdd2.collect());\n</code></pre>\n"},{"tags":["java","android","android-studio"],"answers":[{"tags":[],"owner":{"account_id":365313,"reputation":2251,"user_id":710162,"accept_rate":62,"display_name":"Daniel Arg&#252;elles"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624984913,"creation_date":1624984913,"answer_id":68182663,"question_id":68182596,"body_markdown":"As [documentation][1] says you need to ask permission to the user. [Here][2] you have some Kotlin and Java code with examples to request permission.\r\n\r\n\r\n  [1]: https://developer.android.com/guide/topics/permissions/overview\r\n  [2]: https://developer.android.com/training/permissions/requesting","title":"&quot;Operation not permitted&quot; when trying to save file to internal storage","body":"<p>As <a href=\"https://developer.android.com/guide/topics/permissions/overview\" rel=\"nofollow noreferrer\">documentation</a> says you need to ask permission to the user. <a href=\"https://developer.android.com/training/permissions/requesting\" rel=\"nofollow noreferrer\">Here</a> you have some Kotlin and Java code with examples to request permission.</p>\n"},{"tags":[],"owner":{"account_id":5940259,"reputation":11,"user_id":4671779,"display_name":"DaMat"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1633097601,"creation_date":1633097601,"answer_id":69407350,"question_id":68182596,"body_markdown":"Probably a bit too late, but the cause is a &quot;:&quot; char (from the timestamp) in the name of the created file. Android 11 (unlike older Android versions) does not allow that.","title":"&quot;Operation not permitted&quot; when trying to save file to internal storage","body":"<p>Probably a bit too late, but the cause is a &quot;:&quot; char (from the timestamp) in the name of the created file. Android 11 (unlike older Android versions) does not allow that.</p>\n"}],"owner":{"account_id":15066310,"reputation":45,"user_id":10873338,"display_name":"W Simm"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1591,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":2,"score":0,"last_activity_date":1660868064,"creation_date":1624984549,"question_id":68182596,"body_markdown":"I want to save a file to internal storage on android so it will be visible in the file manager on the phone. When I try to save it I get &quot;Operation not permitted&quot; error, guessing it has something to do with permissions but not sure what to do. I have added permissions to the android_manifest file but it still doesn&#39;t work.\r\n\r\n   \r\n    import androidx.appcompat.app.AppCompatActivity;\r\n    \r\n    import android.os.Bundle;\r\n    import android.os.Environment;\r\n    import android.util.Log;\r\n    import android.view.View;\r\n    import android.widget.Toast;\r\n    \r\n    import java.io.File;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    \r\n    public class MainActivity extends AppCompatActivity {\r\n    \r\n        @Override\r\n        protected void onCreate(Bundle savedInstanceState) {\r\n            super.onCreate(savedInstanceState);\r\n            setContentView(R.layout.activity_main);\r\n        }\r\n    \r\n        public void gen(View view){\r\n            Log.i(&quot;CLICKED&quot;, &quot;CLICKED&quot;);\r\n            Date date = new Date();\r\n            SimpleDateFormat sdf = new SimpleDateFormat(&quot;ddMMyyyy HH:mm:ss&quot;);\r\n            String dateTime = sdf.format(date);\r\n            Log.i(&quot;DATE&quot;, dateTime);\r\n    \r\n            String dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).getAbsolutePath();\r\n            Log.i(&quot;DIR4&quot;, dir);\r\n    \r\n            File file = new File(dir, &quot;TEXT&quot;+dateTime+&quot;.txt&quot;);\r\n            try{\r\n                file.createNewFile();\r\n            }catch(Exception e){\r\n                e.printStackTrace();\r\n            }\r\n            Toast.makeText(getApplicationContext(), &quot;file created&quot;, Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\nAnd in the android_manifest.xml\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\r\n    &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\r\n        package=&quot;com.example.x_gen_15&quot;&gt;\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\r\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\r\n\r\n    &lt;application\r\n        android:allowBackup=&quot;true&quot;\r\n        android:icon=&quot;@mipmap/ic_launcher&quot;\r\n        android:label=&quot;@string/app_name&quot;\r\n        android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\r\n        android:supportsRtl=&quot;true&quot;\r\n        android:theme=&quot;@style/Theme.x_gen_15&quot;&gt;\r\n        &lt;activity android:name=&quot;.MainActivity&quot;&gt;\r\n            &lt;intent-filter&gt;\r\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\r\n\r\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\r\n            &lt;/intent-filter&gt;\r\n        &lt;/activity&gt;\r\n    &lt;/application&gt;\r\n\r\n&lt;/manifest&gt;\r\n\r\nThe error shows:\r\n\r\n    2021-06-29 17:21:37.656 11189-11189/com.example.x_gen_15 W/System.err: java.io.IOException: Operation not permitted\r\n    2021-06-29 17:21:37.656 11189-11189/com.example.x_gen_15 W/System.err:     at java.io.UnixFileSystem.createFileExclusively0(Native Method)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at java.io.UnixFileSystem.createFileExclusively(UnixFileSystem.java:317)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at java.io.File.createNewFile(File.java:1008)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at com.example.pdf_gen_15.MainActivity.gen(MainActivity.java:41)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:409)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View.performClick(View.java:7448)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View.performClickInternal(View.java:7425)\r\n    2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View.access$3600(View.java:810)\r\n    2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View$PerformClick.run(View.java:28305)\r\n    2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.os.Handler.handleCallback(Handler.java:938)\r\n    2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:99)\r\n    2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.os.Looper.loop(Looper.java:223)\r\n    2021-06-29 17:21:37.660 11189-11189/com.example.x_gen_15 W/System.err:     at android.app.ActivityThread.main(ActivityThread.java:7656)\r\n    2021-06-29 17:21:37.660 11189-11189/com.example.x_gen_15 W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\r\n    2021-06-29 17:21:37.661 11189-11189/com.example.x_gen_15 W/System.err:     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\r\n    2021-06-29 17:21:37.661 11189-11189/com.example.x_gen_15 W/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\r\n    2021-06-29 17:21:37.662 11189-11189/com.example.x_gen_15 D/CompatibilityChangeReporter: Compat change id reported: 147798919; UID 10154; state: ENABLED\r\n\r\n***UPDATE***\r\n\r\nSomeone suggested requesting permission at run time, which I did with code below, but it still shows same error:\r\n\r\n    if(ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED){\r\n                ActivityCompat.requestPermissions(MainActivity.this, new String[] {Manifest.permission.WRITE_EXTERNAL_STORAGE}, 411);\r\n            }else{\r\n                Toast.makeText(getApplicationContext(), &quot;permission granted&quot;, Toast.LENGTH_LONG).show();\r\n            }\r\n\r\n","title":"&quot;Operation not permitted&quot; when trying to save file to internal storage","body":"<p>I want to save a file to internal storage on android so it will be visible in the file manager on the phone. When I try to save it I get &quot;Operation not permitted&quot; error, guessing it has something to do with permissions but not sure what to do. I have added permissions to the android_manifest file but it still doesn't work.</p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\nimport android.os.Environment;\nimport android.util.Log;\nimport android.view.View;\nimport android.widget.Toast;\n\nimport java.io.File;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n    }\n\n    public void gen(View view){\n        Log.i(&quot;CLICKED&quot;, &quot;CLICKED&quot;);\n        Date date = new Date();\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;ddMMyyyy HH:mm:ss&quot;);\n        String dateTime = sdf.format(date);\n        Log.i(&quot;DATE&quot;, dateTime);\n\n        String dir = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS).getAbsolutePath();\n        Log.i(&quot;DIR4&quot;, dir);\n\n        File file = new File(dir, &quot;TEXT&quot;+dateTime+&quot;.txt&quot;);\n        try{\n            file.createNewFile();\n        }catch(Exception e){\n            e.printStackTrace();\n        }\n        Toast.makeText(getApplicationContext(), &quot;file created&quot;, Toast.LENGTH_LONG).show();\n    }\n}\n</code></pre>\n<p>And in the android_manifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    package=&quot;com.example.x_gen_15&quot;&gt;\n\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n\n&lt;application\n    android:allowBackup=&quot;true&quot;\n    android:icon=&quot;@mipmap/ic_launcher&quot;\n    android:label=&quot;@string/app_name&quot;\n    android:roundIcon=&quot;@mipmap/ic_launcher_round&quot;\n    android:supportsRtl=&quot;true&quot;\n    android:theme=&quot;@style/Theme.x_gen_15&quot;&gt;\n    &lt;activity android:name=&quot;.MainActivity&quot;&gt;\n        &lt;intent-filter&gt;\n            &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n            &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n        &lt;/intent-filter&gt;\n    &lt;/activity&gt;\n&lt;/application&gt;\n</code></pre>\n\n<p>The error shows:</p>\n<pre><code>2021-06-29 17:21:37.656 11189-11189/com.example.x_gen_15 W/System.err: java.io.IOException: Operation not permitted\n2021-06-29 17:21:37.656 11189-11189/com.example.x_gen_15 W/System.err:     at java.io.UnixFileSystem.createFileExclusively0(Native Method)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at java.io.UnixFileSystem.createFileExclusively(UnixFileSystem.java:317)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at java.io.File.createNewFile(File.java:1008)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at com.example.pdf_gen_15.MainActivity.gen(MainActivity.java:41)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at androidx.appcompat.app.AppCompatViewInflater$DeclaredOnClickListener.onClick(AppCompatViewInflater.java:409)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View.performClick(View.java:7448)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at com.google.android.material.button.MaterialButton.performClick(MaterialButton.java:1119)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View.performClickInternal(View.java:7425)\n2021-06-29 17:21:37.657 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View.access$3600(View.java:810)\n2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.view.View$PerformClick.run(View.java:28305)\n2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.os.Handler.handleCallback(Handler.java:938)\n2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.os.Handler.dispatchMessage(Handler.java:99)\n2021-06-29 17:21:37.659 11189-11189/com.example.x_gen_15 W/System.err:     at android.os.Looper.loop(Looper.java:223)\n2021-06-29 17:21:37.660 11189-11189/com.example.x_gen_15 W/System.err:     at android.app.ActivityThread.main(ActivityThread.java:7656)\n2021-06-29 17:21:37.660 11189-11189/com.example.x_gen_15 W/System.err:     at java.lang.reflect.Method.invoke(Native Method)\n2021-06-29 17:21:37.661 11189-11189/com.example.x_gen_15 W/System.err:     at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:592)\n2021-06-29 17:21:37.661 11189-11189/com.example.x_gen_15 W/System.err:     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:947)\n2021-06-29 17:21:37.662 11189-11189/com.example.x_gen_15 D/CompatibilityChangeReporter: Compat change id reported: 147798919; UID 10154; state: ENABLED\n</code></pre>\n<p><em><strong>UPDATE</strong></em></p>\n<p>Someone suggested requesting permission at run time, which I did with code below, but it still shows same error:</p>\n<pre><code>if(ContextCompat.checkSelfPermission(getApplicationContext(), Manifest.permission.WRITE_EXTERNAL_STORAGE) != PackageManager.PERMISSION_GRANTED){\n            ActivityCompat.requestPermissions(MainActivity.this, new String[] {Manifest.permission.WRITE_EXTERNAL_STORAGE}, 411);\n        }else{\n            Toast.makeText(getApplicationContext(), &quot;permission granted&quot;, Toast.LENGTH_LONG).show();\n        }\n</code></pre>\n"},{"tags":["java","amazon-web-services","cassandra","spark-cassandra-connector"],"answers":[{"tags":[],"owner":{"account_id":8344967,"reputation":2906,"user_id":6269050,"display_name":"Christophe Schmitz"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1462589379,"creation_date":1462589379,"answer_id":37083985,"question_id":36891273,"body_markdown":"There is a known conflict between the Guava version shipped with the connector, and the one shipped with spark. How did you try to shade the Guava library?\r\n\r\nTry to add this to your build.sbt file:\r\n\r\n    assemblyShadeRules in assembly := Seq(\r\n      ShadeRule.rename(&quot;com.google.**&quot; -&gt; &quot;shadeio.@1&quot;).inAll\r\n    )","title":"Unable to connect Cassandra 3.0 using Spark cassandra connector 1.5.0","body":"<p>There is a known conflict between the Guava version shipped with the connector, and the one shipped with spark. How did you try to shade the Guava library?</p>\n\n<p>Try to add this to your build.sbt file:</p>\n\n<pre><code>assemblyShadeRules in assembly := Seq(\n  ShadeRule.rename(\"com.google.**\" -&gt; \"shadeio.@1\").inAll\n)\n</code></pre>\n"}],"owner":{"account_id":8334137,"reputation":37,"user_id":6261658,"display_name":"PrafullaN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":406,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1660867863,"creation_date":1461763732,"question_id":36891273,"body_markdown":"**Issue** - Unable to connect Cassandra 3.0 using Spark Cassandra connector 1.5.0\r\n\r\n**Background** - I tried to connect Cassandra 3.0 using from Spark 1.5.0\r\nby using provided Spark cassandra connector 1.5.0 but I am getting below error -\r\n\r\nAs per the DataStax Spark Cassandra Connector [document](https://github.com/datastax/spark-cassandra-connector), it says that Spark connector 1.5 can be used to Cassandra 3.0 from Spark 1.5.0/1.6.0.\r\n\r\nCould you please suggest me is I am missing any step here?\r\n\r\n**Tried approach**\r\n\r\n1. I tried to exclude Guava dependency from Spark streaming and core jar\r\n\r\n2. Added the separate Guava dependency in &quot;pom.xml&quot;\r\n\r\nThanks in advance.        \r\n\r\n----------------------------------------------------------------------------\r\n    16/04/26 09:45:07 WARN TaskSetManager: Lost task 4.0 in stage 1.0 (TID 16, ip-172-31-23-23.ec2.internal): java.lang.ExceptionInInitializerError\r\n        at  com.datastax.spark.connector.cql.DefaultConnectionFactory$.clusterBuilder(CassandraConnectionFactory.scala:35)\r\n        at com.datastax.spark.connector.cql.DefaultConnectionFactory$.createCluster(CassandraConnectionFactory.scala:87)\r\n        at \r\n    ---\r\n    --\r\n    Caused by: java.lang.IllegalStateException: Detected Guava issue #1635 which indicates that a version of Guava less than 16.01 is in use.  This introduces codec resolution issues and potentially other incompatibility issues in the driver.  Please upgrade to Guava 16.01 or later.\r\n        at com.datastax.driver.core.SanityChecks.checkGuava(SanityChecks.java:62)\r\n        at com.datastax.driver.core.SanityChecks.check(SanityChecks.java:36)\r\n        at com.datastax.driver.core.Cluster.&lt;clinit&gt;(Cluster.java:67)\r\n        ... 23 more16/04/26 09:45:07 WARN TaskSetManager: Lost task 4.0 in stage 1.0 (TID 16, ip-172-31-23-23.ec2.internal): java.lang.ExceptionInInitializerError\r\n        at com.datastax.spark.connector.cql.DefaultConnectionFactory$.clusterBuilder(CassandraConnectionFactory.scala:35)\r\n        at com.datastax.spark.connector.cql.DefaultConnectionFactory$.createCluster(CassandraConnectionFactory.scala:87)\r\n        at com.datastax.spark.connector.cql.CassandraConnector$.com$datastax$spark$connector$cql$CassandraConnector$$createSession(CassandraConnector.scala:153)\r\n        at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:148)\r\n        at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:148)\r\n        at com.datastax.spark.connector.cql.RefCountedCache.createNewValueAndKeys(RefCountedCache.scala:31)\r\n       \r\n---------------------------------------------------------------------------      ","title":"Unable to connect Cassandra 3.0 using Spark cassandra connector 1.5.0","body":"<p><strong>Issue</strong> - Unable to connect Cassandra 3.0 using Spark Cassandra connector 1.5.0</p>\n\n<p><strong>Background</strong> - I tried to connect Cassandra 3.0 using from Spark 1.5.0\nby using provided Spark cassandra connector 1.5.0 but I am getting below error -</p>\n\n<p>As per the DataStax Spark Cassandra Connector <a href=\"https://github.com/datastax/spark-cassandra-connector\" rel=\"nofollow\">document</a>, it says that Spark connector 1.5 can be used to Cassandra 3.0 from Spark 1.5.0/1.6.0.</p>\n\n<p>Could you please suggest me is I am missing any step here?</p>\n\n<p><strong>Tried approach</strong></p>\n\n<ol>\n<li><p>I tried to exclude Guava dependency from Spark streaming and core jar</p></li>\n<li><p>Added the separate Guava dependency in \"pom.xml\"</p></li>\n</ol>\n\n<p>Thanks in advance.        </p>\n\n<hr>\n\n<pre><code>16/04/26 09:45:07 WARN TaskSetManager: Lost task 4.0 in stage 1.0 (TID 16, ip-172-31-23-23.ec2.internal): java.lang.ExceptionInInitializerError\n    at  com.datastax.spark.connector.cql.DefaultConnectionFactory$.clusterBuilder(CassandraConnectionFactory.scala:35)\n    at com.datastax.spark.connector.cql.DefaultConnectionFactory$.createCluster(CassandraConnectionFactory.scala:87)\n    at \n---\n--\nCaused by: java.lang.IllegalStateException: Detected Guava issue #1635 which indicates that a version of Guava less than 16.01 is in use.  This introduces codec resolution issues and potentially other incompatibility issues in the driver.  Please upgrade to Guava 16.01 or later.\n    at com.datastax.driver.core.SanityChecks.checkGuava(SanityChecks.java:62)\n    at com.datastax.driver.core.SanityChecks.check(SanityChecks.java:36)\n    at com.datastax.driver.core.Cluster.&lt;clinit&gt;(Cluster.java:67)\n    ... 23 more16/04/26 09:45:07 WARN TaskSetManager: Lost task 4.0 in stage 1.0 (TID 16, ip-172-31-23-23.ec2.internal): java.lang.ExceptionInInitializerError\n    at com.datastax.spark.connector.cql.DefaultConnectionFactory$.clusterBuilder(CassandraConnectionFactory.scala:35)\n    at com.datastax.spark.connector.cql.DefaultConnectionFactory$.createCluster(CassandraConnectionFactory.scala:87)\n    at com.datastax.spark.connector.cql.CassandraConnector$.com$datastax$spark$connector$cql$CassandraConnector$$createSession(CassandraConnector.scala:153)\n    at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:148)\n    at com.datastax.spark.connector.cql.CassandraConnector$$anonfun$2.apply(CassandraConnector.scala:148)\n    at com.datastax.spark.connector.cql.RefCountedCache.createNewValueAndKeys(RefCountedCache.scala:31)\n</code></pre>\n\n<hr>\n"},{"tags":["java","postgresql","maven"],"comments":[{"owner":{"account_id":21994,"reputation":73798,"user_id":53897,"accept_rate":56,"display_name":"Thorbj&#248;rn Ravn Andersen"},"score":3,"creation_date":1660693375,"post_id":73381402,"comment_id":129591471,"body_markdown":"The class is not on your classpath.","body":"The class is not on your classpath."},{"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"score":0,"creation_date":1660697012,"post_id":73381402,"comment_id":129591960,"body_markdown":"I tried this, but it did not work:\njava -classpath org.postgresql:postgresql:42.3.1 -jar target/posthogdata-1.0-SNAPSHOT.jar","body":"I tried this, but it did not work: java -classpath org.postgresql:postgresql:42.3.1 -jar target/posthogdata-1.0-SNAPSHOT.jar"},{"owner":{"account_id":1324952,"reputation":5977,"user_id":1270000,"accept_rate":100,"display_name":"sorifiend"},"score":0,"creation_date":1660705202,"post_id":73381402,"comment_id":129593197,"body_markdown":"That does not look like correct usage of `-cp` to me. From the [Java spec](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html) usage of -cp or -classpath is as follaws `-cp classpath Specifies a list of directories, JAR files, and ZIP archives to search for class files. Separate class path entries with semicolons (;). Specifying -classpath or -cp overrides any setting of the CLASSPATH environment variable.` Do you really have a file named `org.postgresql:postgresql:42.3.1`? If so then it is not in the correct location relative to where the command is being run from.","body":"That does not look like correct usage of <code>-cp</code> to me. From the <a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\" rel=\"nofollow noreferrer\">Java spec</a> usage of -cp or -classpath is as follaws <code>-cp classpath Specifies a list of directories, JAR files, and ZIP archives to search for class files. Separate class path entries with semicolons (;). Specifying -classpath or -cp overrides any setting of the CLASSPATH environment variable.</code> Do you really have a file named <code>org.postgresql:postgresql:42.3.1</code>? If so then it is not in the correct location relative to where the command is being run from."},{"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"score":0,"creation_date":1660706890,"post_id":73381402,"comment_id":129593426,"body_markdown":"@sorifiend I have org.postgresql:postgresql:42.3.1 jar in the pom and therefore in the External Libraries. I fail to understand why this is not part of the classpath automatically.","body":"@sorifiend I have org.postgresql:postgresql:42.3.1 jar in the pom and therefore in the External Libraries. I fail to understand why this is not part of the classpath automatically."},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1660709767,"post_id":73381402,"comment_id":129593770,"body_markdown":"The name of the JAR file is `postgresql-jdbc-42.3.1.jar` so the beginning of the _java_ command should be: `java -cp postgresql-jdbc-42.3.1.jar ` (assuming that the JAR file is in the same directory that you are issuing the command from)","body":"The name of the JAR file is <code>postgresql-jdbc-42.3.1.jar</code> so the beginning of the <i>java</i> command should be: <code>java -cp postgresql-jdbc-42.3.1.jar </code> (assuming that the JAR file is in the same directory that you are issuing the command from)"},{"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"score":0,"creation_date":1660709942,"post_id":73381402,"comment_id":129593802,"body_markdown":"@Abra I used this like you suggested `java -cp postgresql-jdbc-42.3.1.jar -jar target/posthogdata-1.0-SNAPSHOT.jar` same error. How do I check the directory of a dependent jar?","body":"@Abra I used this like you suggested <code>java -cp postgresql-jdbc-42.3.1.jar -jar target&#47;posthogdata-1.0-SNAPSHOT.jar</code> same error. How do I check the directory of a dependent jar?"},{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1660710183,"post_id":73381402,"comment_id":129593838,"body_markdown":"Just search for the file `postgresql-jdbc-42.3.1.jar` on your computer. Or is that file not on your computer?","body":"Just search for the file <code>postgresql-jdbc-42.3.1.jar</code> on your computer. Or is that file not on your computer?"},{"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"score":0,"creation_date":1660710414,"post_id":73381402,"comment_id":129593865,"body_markdown":"Its here: `/Users/meuser/.m2/repository/org/postgresql/postgresql/42.3.1`. I am so confused why is java not picking this up? Other dependencies are there as well.\n\nTried this as well, same error:\n`java -cp /Users/meuser/.m2/repository/org/postgresql/postgresql/42.3.1/postgresql-42.3.1.jar -jar -jar target/posthogdata-1.0-SNAPSHOT.jar `","body":"Its here: <code>&#47;Users&#47;meuser&#47;.m2&#47;repository&#47;org&#47;postgresql&#47;postgresql&#47;42.3.&zwnj;&#8203;1</code>. I am so confused why is java not picking this up? Other dependencies are there as well.  Tried this as well, same error: <code>java -cp &#47;Users&#47;meuser&#47;.m2&#47;repository&#47;org&#47;postgresql&#47;postgresql&#47;42.3.&zwnj;&#8203;1&#47;postgresql-42.3.1.&zwnj;&#8203;jar -jar -jar target&#47;posthogdata-1.0-SNAPSHOT.jar </code>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1660713025,"post_id":73381402,"comment_id":129594334,"body_markdown":"If you use `java -jar` the `-cp` option is ignored. This is documented. Your .jar file needs to mention a relative path to the Postgres driver jar in the Class-Path entry in its manifest. NB The `Class.forName()` line hasn&#39;t been needed since 2006.","body":"If you use <code>java -jar</code> the <code>-cp</code> option is ignored. This is documented. Your .jar file needs to mention a relative path to the Postgres driver jar in the Class-Path entry in its manifest. NB The <code>Class.forName()</code> line hasn&#39;t been needed since 2006."},{"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"score":0,"creation_date":1660715135,"post_id":73381402,"comment_id":129594766,"body_markdown":"@user207421 [Here](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html) it says you can use -cp with -jar.\nI do not have a manifest file for the jar, where does it go in the project structure?","body":"@user207421 <a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\" rel=\"nofollow noreferrer\">Here</a> it says you can use -cp with -jar. I do not have a manifest file for the jar, where does it go in the project structure?"},{"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"score":0,"creation_date":1660716522,"post_id":73381402,"comment_id":129595070,"body_markdown":"Okay, so maven would not create the manifest for me so I went ahead and created it using IntelliJ I added the following, but still same error:\n`Manifest-Version: 1.0\nClass-Path: postgresql-42.3.1.jar\nMain-Class: luminai.data.DataProcessor`","body":"Okay, so maven would not create the manifest for me so I went ahead and created it using IntelliJ I added the following, but still same error: <code>Manifest-Version: 1.0 Class-Path: postgresql-42.3.1.jar Main-Class: luminai.data.DataProcessor</code>"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1660716658,"post_id":73381402,"comment_id":129595116,"body_markdown":"No it doesn&#39;t. [Here](https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html) it *says exactly the opposite*: &quot;when you use this option, the JAR file is the source of all user classes, and other user class path settings are ignored&quot;. Re your new manifest, is `postgresql-32.3.1.jar` in the same directory as your JAR file? Because that&#39;s what your manifest entry says. If it is say in a `lib` subdirectory the manifest entry for it needs to say so.","body":"No it doesn&#39;t. <a href=\"https://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html\" rel=\"nofollow noreferrer\">Here</a> it <i>says exactly the opposite</i>: &quot;when you use this option, the JAR file is the source of all user classes, and other user class path settings are ignored&quot;. Re your new manifest, is <code>postgresql-32.3.1.jar</code> in the same directory as your JAR file? Because that&#39;s what your manifest entry says. If it is say in a <code>lib</code> subdirectory the manifest entry for it needs to say so."},{"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"score":0,"creation_date":1660717009,"post_id":73381402,"comment_id":129595216,"body_markdown":"Thanks for quoting! Makes sense, don&#39;t know then why it&#39;s being used all over StackOveflow. Re the JAR file it&#39;s a dependency that is part of my pom.xml. It&#39;s definitely not there in any of my project folders, but on my local machine here: `/Users/meuser/.m2/repository/org/postgresql/postgresql/42.3.1` How do I get a dependent jar file to a directory in my project?\nWhile my jar file is in the `target` folder","body":"Thanks for quoting! Makes sense, don&#39;t know then why it&#39;s being used all over StackOveflow. Re the JAR file it&#39;s a dependency that is part of my pom.xml. It&#39;s definitely not there in any of my project folders, but on my local machine here: <code>&#47;Users&#47;meuser&#47;.m2&#47;repository&#47;org&#47;postgresql&#47;postgresql&#47;42.3.&zwnj;&#8203;1</code> How do I get a dependent jar file to a directory in my project? While my jar file is in the <code>target</code> folder"},{"owner":{"account_id":71739,"reputation":307142,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1660719856,"post_id":73381402,"comment_id":129596009,"body_markdown":"Because people apparently cannot read, even when they find the correct place, and cite things that don&#39;t say what they are claimed to say. I have no idea about Maven but it&#39;s doable. In one of my few Maven projects I have `&lt;dependency&gt;&lt;groupId&gt;mysql&lt;/groupId&gt;&lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;&lt;version&gt;8.0.11&lt;/version&gt;&lt;type&gt;jar&lt;/type&gt;&lt;/dependency&gt;`.","body":"Because people apparently cannot read, even when they find the correct place, and cite things that don&#39;t say what they are claimed to say. I have no idea about Maven but it&#39;s doable. In one of my few Maven projects I have <code>&lt;dependency&gt;&lt;groupId&gt;mysql&lt;&#47;groupId&gt;&lt;artifactId&gt;mysql-connec&zwnj;&#8203;tor-java&lt;&#47;artifactId&zwnj;&#8203;&gt;&lt;version&gt;8.0.11&lt;&#47;ve&zwnj;&#8203;rsion&gt;&lt;type&gt;jar&lt;&#47;typ&zwnj;&#8203;e&gt;&lt;&#47;dependency&gt;</code>."}],"answers":[{"tags":[],"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660867269,"creation_date":1660778823,"answer_id":73395907,"question_id":73381402,"body_markdown":"I found the fix. As per the comments and the error itself, the Postgres driver jar was not in the classpath. After certain tries, I changed my pom plugin to include my project&#39;s jar in a way that combines all the other dependent jars into it. I guess IntelliJ was doing that for me out of the box.\r\n\r\nChanged plugin to:\r\n```\r\n    &lt;build&gt;\r\n        &lt;plugins&gt;\r\n            &lt;plugin&gt;\r\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\r\n                &lt;configuration&gt;\r\n                    &lt;archive&gt;\r\n                        &lt;manifest&gt;\r\n                            &lt;mainClass&gt;luminai.data.Main&lt;/mainClass&gt;\r\n                        &lt;/manifest&gt;\r\n                    &lt;/archive&gt;\r\n                    &lt;descriptorRefs&gt;\r\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\r\n                    &lt;/descriptorRefs&gt;\r\n                &lt;/configuration&gt;\r\n            &lt;/plugin&gt;\r\n        &lt;/plugins&gt;\r\n    &lt;/build&gt;\r\n```\r\nAnd ran the following commands:\r\n```\r\n$ mvn clean compile assembly:single\r\n$ java -jar target/posthogdata-1.0-SNAPSHOT-jar-with-dependencies.jar\r\n```","title":"java.lang.ClassNotFoundException: org.postgresql.Driver in Terminal","body":"<p>I found the fix. As per the comments and the error itself, the Postgres driver jar was not in the classpath. After certain tries, I changed my pom plugin to include my project's jar in a way that combines all the other dependent jars into it. I guess IntelliJ was doing that for me out of the box.</p>\n<p>Changed plugin to:</p>\n<pre><code>    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;luminai.data.Main&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n</code></pre>\n<p>And ran the following commands:</p>\n<pre><code>$ mvn clean compile assembly:single\n$ java -jar target/posthogdata-1.0-SNAPSHOT-jar-with-dependencies.jar\n</code></pre>\n"}],"owner":{"account_id":5638663,"reputation":555,"user_id":4463330,"accept_rate":100,"display_name":"ASR4"},"comment_count":14,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3766,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73395907,"answer_count":1,"score":0,"last_activity_date":1660867269,"creation_date":1660693040,"question_id":73381402,"body_markdown":"I have seen a LOT of questions on the same topic, but honestly nothing has worked after few hours of debugging here.\r\nI have a java with maven project that calls postgres DB to read and write data. The code builds and runs fine on IntelliJ. I am trying to run it on terminal (so that I can use determine the command that works and use it for my dockerfile). \r\nFor compiling:\r\n```\r\n$mvn clean install\r\n```\r\nFor running:\r\n```\r\n$java -jar target/posthogdata-1.0-SNAPSHOT.jar  \r\n```\r\n\r\nI see the following error:\r\n\r\n```                    \r\njava.lang.ClassNotFoundException: org.postgresql.Driver\r\n\tat java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\r\n\tat java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\r\n\tat java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\r\n\tat java.base/java.lang.Class.forName0(Native Method)\r\n\tat java.base/java.lang.Class.forName(Class.java:383)\r\n\tat java.base/java.lang.Class.forName(Class.java:376)\r\n\tat luminai.data.PostgresClient.createConnection(PostgresClient.java:19)\r\n\tat luminai.data.DataProcessor.main(DataProcessor.java:38)\r\n```\r\n\r\nThe code is breaking at this line:\r\n```\r\nClass.forName(&quot;org.postgresql.Driver&quot;);\r\n```\r\nI am confused as to whats the problem at this point. I have the right dependency:\r\n```\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\r\n   &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\r\n   &lt;version&gt;42.3.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAnd this is my plugin:\r\n```\r\n&lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;plugin&gt;\r\n            &lt;!-- Build an executable JAR --&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.1.0&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n                &lt;archive&gt;\r\n                   &lt;manifest&gt;\r\n                      &lt;addClasspath&gt;true&lt;/addClasspath&gt;\r\n                      &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\r\n                      &lt;mainClass&gt;luminai.data.DataProcessor&lt;/mainClass&gt;\r\n                   &lt;/manifest&gt;\r\n                &lt;/archive&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\nEDIT:\r\n\r\nCommands I have tried:\r\n```\r\n$java -classpath org.postgresql:postgresql:42.3.1 -jar target/posthogdata-1.0-SNAPSHOT.jar\r\n\r\n$java -classpath org.postgresql:postgresql:42.3.1:* -jar target/posthogdata-1.0-SNAPSHOT.jar\r\n\r\n$java -cp .:org.postgresql:postgresql:42.3.1 -jar target/posthogdata-1.0-SNAPSHOT.jar\r\n```\r\n\r\nWhy is the postgres jar not part of the classpath automatically, when it is there in the pom and list of External Libraries?\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nHere is the structure of my project, I am running the command from &gt;posthogdata\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/TrhB0.png\r\n  [2]: https://i.stack.imgur.com/BQrD8.png","title":"java.lang.ClassNotFoundException: org.postgresql.Driver in Terminal","body":"<p>I have seen a LOT of questions on the same topic, but honestly nothing has worked after few hours of debugging here.\nI have a java with maven project that calls postgres DB to read and write data. The code builds and runs fine on IntelliJ. I am trying to run it on terminal (so that I can use determine the command that works and use it for my dockerfile).\nFor compiling:</p>\n<pre><code>$mvn clean install\n</code></pre>\n<p>For running:</p>\n<pre><code>$java -jar target/posthogdata-1.0-SNAPSHOT.jar  \n</code></pre>\n<p>I see the following error:</p>\n<pre><code>java.lang.ClassNotFoundException: org.postgresql.Driver\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n    at java.base/java.lang.Class.forName0(Native Method)\n    at java.base/java.lang.Class.forName(Class.java:383)\n    at java.base/java.lang.Class.forName(Class.java:376)\n    at luminai.data.PostgresClient.createConnection(PostgresClient.java:19)\n    at luminai.data.DataProcessor.main(DataProcessor.java:38)\n</code></pre>\n<p>The code is breaking at this line:</p>\n<pre><code>Class.forName(&quot;org.postgresql.Driver&quot;);\n</code></pre>\n<p>I am confused as to whats the problem at this point. I have the right dependency:</p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n   &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n   &lt;version&gt;42.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And this is my plugin:</p>\n<pre><code>&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;!-- Build an executable JAR --&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.1.0&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;archive&gt;\n                   &lt;manifest&gt;\n                      &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n                      &lt;classpathPrefix&gt;lib/&lt;/classpathPrefix&gt;\n                      &lt;mainClass&gt;luminai.data.DataProcessor&lt;/mainClass&gt;\n                   &lt;/manifest&gt;\n                &lt;/archive&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<p>EDIT:</p>\n<p>Commands I have tried:</p>\n<pre><code>$java -classpath org.postgresql:postgresql:42.3.1 -jar target/posthogdata-1.0-SNAPSHOT.jar\n\n$java -classpath org.postgresql:postgresql:42.3.1:* -jar target/posthogdata-1.0-SNAPSHOT.jar\n\n$java -cp .:org.postgresql:postgresql:42.3.1 -jar target/posthogdata-1.0-SNAPSHOT.jar\n</code></pre>\n<p>Why is the postgres jar not part of the classpath automatically, when it is there in the pom and list of External Libraries?</p>\n<p><a href=\"https://i.stack.imgur.com/TrhB0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TrhB0.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the structure of my project, I am running the command from &gt;posthogdata\n<a href=\"https://i.stack.imgur.com/BQrD8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BQrD8.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring","spring-boot","rest","http"],"answers":[{"tags":[],"owner":{"account_id":18264392,"reputation":11,"user_id":13296486,"display_name":"Pasha"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660846031,"creation_date":1660846031,"answer_id":73407610,"question_id":73407411,"body_markdown":"add to application.properties\r\n\r\n    server.shutdown=graceful \r\n\r\nor that one:\r\n\r\n    management.endpoints.web.exposure.include=*\r\n    management.endpoint.shutdown.enabled=true\r\n    endpoints.shutdown.enabled=true","title":"Spring boot - Close connection","body":"<p>add to application.properties</p>\n<pre><code>server.shutdown=graceful \n</code></pre>\n<p>or that one:</p>\n<pre><code>management.endpoints.web.exposure.include=*\nmanagement.endpoint.shutdown.enabled=true\nendpoints.shutdown.enabled=true\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25228306,"reputation":35,"user_id":19119664,"display_name":"Ensei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660856598,"creation_date":1660856598,"answer_id":73409410,"question_id":73407411,"body_markdown":"You should create `ConfigurableApplicationContext` in main class and create method that closes it, e.g.:\r\n```\r\npublic class SpringBootApplication {\r\n\tprivate static ConfigurableApplicationContext context;\r\n\tpublic static void main(String[] args) {\r\n\t\tcontext = SpringApplication.run(SpringBootApplication.class, args);\r\n\t}\r\n\r\n\tpublic static void finish(){\r\n\t\tcontext.close();\r\n\t}\r\n\r\n}\r\n```\r\n\r\nAnd your code in controller should be next:\r\n```\r\n@GetMapping(&quot;/exit&quot;)\r\n    public void exit(){\r\n        SpringBootApplication.finish();\r\n    }\r\n```","title":"Spring boot - Close connection","body":"<p>You should create <code>ConfigurableApplicationContext</code> in main class and create method that closes it, e.g.:</p>\n<pre><code>public class SpringBootApplication {\n    private static ConfigurableApplicationContext context;\n    public static void main(String[] args) {\n        context = SpringApplication.run(SpringBootApplication.class, args);\n    }\n\n    public static void finish(){\n        context.close();\n    }\n\n}\n</code></pre>\n<p>And your code in controller should be next:</p>\n<pre><code>@GetMapping(&quot;/exit&quot;)\n    public void exit(){\n        SpringBootApplication.finish();\n    }\n</code></pre>\n"}],"owner":{"account_id":13522174,"reputation":151,"user_id":9755070,"display_name":"a1a1a1a1a1"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1550,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1660867002,"creation_date":1660844845,"question_id":73407411,"body_markdown":"Is it possible for a spring endpoint to abruptly close connection ?\r\n\r\nEx : \r\n\r\n      @GetMapping(/connectionClosedByPeerEndPoint)\r\n      String foo(){\r\n        //Close connection, and send no http response at all\r\n      }\r\n\r\nor simply to close connection abrupltly even before reaching the endpoint, like mid http handshake(without FIN signal ?). What conf one would one need to do in order to achieve that.\r\n\r\nThe purpose of this is nothing.\r\n\r\nThanks in advance.","title":"Spring boot - Close connection","body":"<p>Is it possible for a spring endpoint to abruptly close connection ?</p>\n<p>Ex :</p>\n<pre><code>  @GetMapping(/connectionClosedByPeerEndPoint)\n  String foo(){\n    //Close connection, and send no http response at all\n  }\n</code></pre>\n<p>or simply to close connection abrupltly even before reaching the endpoint, like mid http handshake(without FIN signal ?). What conf one would one need to do in order to achieve that.</p>\n<p>The purpose of this is nothing.</p>\n<p>Thanks in advance.</p>\n"},{"tags":["java","android","android-studio","android-databinding"],"answers":[{"tags":[],"owner":{"account_id":17445070,"reputation":317,"user_id":12646287,"display_name":"Dragan.T"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660864968,"creation_date":1660864968,"answer_id":73410383,"question_id":73410238,"body_markdown":"This approach is not ideomatic, but you can try something like this:\r\n `String currentBalance= ((Main) requireActivity()).getBinding().userBalance.getText().toString();`.","title":"Android retrieve values ​from other class using Binding","body":"<p>This approach is not ideomatic, but you can try something like this:\n<code>String currentBalance= ((Main) requireActivity()).getBinding().userBalance.getText().toString();</code>.</p>\n"}],"owner":{"account_id":19889029,"reputation":1,"user_id":14571489,"display_name":"Bulldogzer"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":185,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660864968,"creation_date":1660863390,"question_id":73410238,"body_markdown":"Hello everyone I have a main activity that displays several Fragments\r\n\r\nI add a value of type ```int``` to a TextView and I want to retrieve it in my Fragment\r\n\r\nMainActivity :\r\n\r\n```\r\npublic class Main extends AppCompatActivity {\r\n    ActivityMainBinding binding;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\r\n        View view = binding.getRoot();\r\n        setContentView(view);\r\n\r\n        binding.userBalance.setText(String.valueOf(1000));\r\n    }\r\n}\r\n```\r\n\r\nHomeFragment :\r\n\r\n```\r\npublic class HomeFragment extends Fragment {\r\n\r\n    FragmentHomeBinding binding;\r\n\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        binding = FragmentHomeBinding.inflate(inflater, container, false);\r\n\r\n        String currentBalance = ActivityMainBinding.inflate(getLayoutInflater()).userBalance.getText().toString();\r\n        int currentBalanceInteger = Integer.parseInt(currentBalance);\r\n        Log.d(&quot;Value&quot;, &quot;Value of user : &quot; + currentBalanceInteger);\r\n\r\n        return binding.getRoot();\r\n    }\r\n}\r\n```\r\n\r\nAs you can see I am doing a ```Log.d```, I could notice that nothing was displayed in the console the value is non-existent.\r\n\r\nI imagine that the problem comes from the fact that the value is not added in the xml but in the Java, but I have no choice to go through Java.\r\n\r\n**How can I retrieve a value using Binding?**","title":"Android retrieve values ​from other class using Binding","body":"<p>Hello everyone I have a main activity that displays several Fragments</p>\n<p>I add a value of type <code>int</code> to a TextView and I want to retrieve it in my Fragment</p>\n<p>MainActivity :</p>\n<pre><code>public class Main extends AppCompatActivity {\n    ActivityMainBinding binding;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        binding = ActivityMainBinding.inflate(getLayoutInflater());\n        View view = binding.getRoot();\n        setContentView(view);\n\n        binding.userBalance.setText(String.valueOf(1000));\n    }\n}\n</code></pre>\n<p>HomeFragment :</p>\n<pre><code>public class HomeFragment extends Fragment {\n\n    FragmentHomeBinding binding;\n\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        binding = FragmentHomeBinding.inflate(inflater, container, false);\n\n        String currentBalance = ActivityMainBinding.inflate(getLayoutInflater()).userBalance.getText().toString();\n        int currentBalanceInteger = Integer.parseInt(currentBalance);\n        Log.d(&quot;Value&quot;, &quot;Value of user : &quot; + currentBalanceInteger);\n\n        return binding.getRoot();\n    }\n}\n</code></pre>\n<p>As you can see I am doing a <code>Log.d</code>, I could notice that nothing was displayed in the console the value is non-existent.</p>\n<p>I imagine that the problem comes from the fact that the value is not added in the xml but in the Java, but I have no choice to go through Java.</p>\n<p><strong>How can I retrieve a value using Binding?</strong></p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660236836,"creation_date":1660235643,"answer_id":73324137,"question_id":73324107,"body_markdown":"2971215073 is too big to be represented as an int at all.  The maximum value of an `int` -- `Integer.MAX_VALUE` -- is 2^31 - 1, or 2147483647.","title":"Java double to int convertion changes sign of result","body":"<p>2971215073 is too big to be represented as an int at all.  The maximum value of an <code>int</code> -- <code>Integer.MAX_VALUE</code> -- is 2^31 - 1, or 2147483647.</p>\n"},{"tags":[],"owner":{"account_id":23568015,"reputation":136,"user_id":17608510,"display_name":"John"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660235908,"creation_date":1660235908,"answer_id":73324194,"question_id":73324107,"body_markdown":"I think that the problem does not have something to do with the double conversion.\r\n\r\n**int** can store numbers that can be represented by 32 bits. This means the highest number integer can represents is 2.147.483.647.\r\n\r\nThe F47 is breaking this limit and results in an bit-overflow, so it starts at -2.147.483.68 and adds the rest of your 2971215073 - 2147483647 to it. -1323752223 is the outcome.\r\n\r\nUse a **long** (64bit) instead of an int and you should be good :)\r\n","title":"Java double to int convertion changes sign of result","body":"<p>I think that the problem does not have something to do with the double conversion.</p>\n<p><strong>int</strong> can store numbers that can be represented by 32 bits. This means the highest number integer can represents is 2.147.483.647.</p>\n<p>The F47 is breaking this limit and results in an bit-overflow, so it starts at -2.147.483.68 and adds the rest of your 2971215073 - 2147483647 to it. -1323752223 is the outcome.</p>\n<p>Use a <strong>long</strong> (64bit) instead of an int and you should be good :)</p>\n"},{"tags":[],"owner":{"account_id":23587351,"reputation":60,"user_id":17625629,"display_name":"Vled"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660297255,"creation_date":1660297255,"answer_id":73332164,"question_id":73324107,"body_markdown":"Ok so i found a decent fix.\r\n\r\nI used a Geometrical version of Binets rule which you can find here : [Binets Geometrical Rule][1]\r\n\r\n\r\n  [1]: https://www.cut-the-knot.org/pythagoras/FibonacciCos.shtml\r\n\r\nI also used **long** instead of int so now I can accurately calculate **up to F70**. F71 is wrong by a digit and after that it just builds up.\r\n\r\n**New Source Code :** \r\n\r\n    import java.lang.Math;\r\n    \r\n    class fibonacci{\r\n      public static long NthFibonacci(int n){\r\n        double a = (1/Math.sqrt(5))*Math.pow(2, n);\r\n       \r\n        double radians1 = Math.toRadians(36.0);\r\n        double radians2 = Math.toRadians(108.0);\r\n        \r\n        double b = Math.pow(Math.cos(radians1), n) - Math.pow(Math.cos(radians2), n);\r\n    \r\n        long fb = (long) Math.round(a*b);\r\n        return fb;\r\n      }\r\n    \r\n      public static void FibonacciSeries(int n){\r\n        for(int i = 0; i &lt; n; i++){\r\n          System.out.println( i + &quot; : &quot; +  NthFibonacci(i));\r\n        }\r\n      }  \r\n      public static void main(String[] args) {\r\n        FibonacciSeries(100);\r\n    \r\n      }\r\n    }\r\n\r\n","title":"Java double to int convertion changes sign of result","body":"<p>Ok so i found a decent fix.</p>\n<p>I used a Geometrical version of Binets rule which you can find here : <a href=\"https://www.cut-the-knot.org/pythagoras/FibonacciCos.shtml\" rel=\"nofollow noreferrer\">Binets Geometrical Rule</a></p>\n<p>I also used <strong>long</strong> instead of int so now I can accurately calculate <strong>up to F70</strong>. F71 is wrong by a digit and after that it just builds up.</p>\n<p><strong>New Source Code :</strong></p>\n<pre><code>import java.lang.Math;\n\nclass fibonacci{\n  public static long NthFibonacci(int n){\n    double a = (1/Math.sqrt(5))*Math.pow(2, n);\n   \n    double radians1 = Math.toRadians(36.0);\n    double radians2 = Math.toRadians(108.0);\n    \n    double b = Math.pow(Math.cos(radians1), n) - Math.pow(Math.cos(radians2), n);\n\n    long fb = (long) Math.round(a*b);\n    return fb;\n  }\n\n  public static void FibonacciSeries(int n){\n    for(int i = 0; i &lt; n; i++){\n      System.out.println( i + &quot; : &quot; +  NthFibonacci(i));\n    }\n  }  \n  public static void main(String[] args) {\n    FibonacciSeries(100);\n\n  }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":47283,"reputation":703817,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660864099,"creation_date":1660301082,"answer_id":73332929,"question_id":73324107,"body_markdown":"The real explanation for the behavior of the version in your question giving a negative number is a bit subtle.\r\n\r\nAt F47, this expression \r\n    \r\n    (Math.pow(fi, n) - Math.pow(1 - fi, n)) / Math.sqrt(5)\r\n\r\nwill give you `2.971215073009069E9` ... which is close to the desired `2971215073`.\r\n\r\nThe problem arises when you call `Math.round(2.971215073009069E9)`.  This returns a `long` - `2971215073L`.  But then you cast the result of the `round` call to an `int`, and it all goes pear-shaped.  \r\n\r\nCasting a `long` to an `int` will just lop off the top 32 bits ... and that results in a meaningless number.\r\n\r\n----------------------\r\n\r\nIf we modify `fibonacci` to return a `long` instead of an `int`, we get correct results up to F55.  F56 and F57 are off by 1.  F58 is off by 2.\r\n\r\nWhat is happening now is that we are running into the problem that `double` (64-bit IEEE floating point) has only about 13.5 decimal digits of precision.  The rounding error incurred in the computation of the intermediate floating point value for F56 larger that 0.5 ... so the rounded value is then incorrect.\r\n\r\nThe computed fibonacci numbers continue to get increasingly inaccurate until you get to F93, where the (modified) `fibonacci` method returns `Long.MAX_VALUE`.\r\n\r\nTo get correct values for very large Fibonacci numbers:\r\n\r\n  - we need to use `BigInteger` to represent the numbers,\r\n  - we need to do the computations using `BigDecimal` with sufficient precision, and (maybe)\r\n  - we need to use a more accurate value for phi.\r\n\r\nOr we need to use the recurrence relationship to compute the numbers.\r\n\r\n----------------------\r\n\r\nThe 2 take-aways from all of this are:\r\n\r\n  - casting a `long` to an `int` is a **lossy** conversion, and\r\n  - floating point arithmetic is inexact and ... tricky.","title":"Java double to int convertion changes sign of result","body":"<p>The real explanation for the behavior of the version in your question giving a negative number is a bit subtle.</p>\n<p>At F47, this expression</p>\n<pre><code>(Math.pow(fi, n) - Math.pow(1 - fi, n)) / Math.sqrt(5)\n</code></pre>\n<p>will give you <code>2.971215073009069E9</code> ... which is close to the desired <code>2971215073</code>.</p>\n<p>The problem arises when you call <code>Math.round(2.971215073009069E9)</code>.  This returns a <code>long</code> - <code>2971215073L</code>.  But then you cast the result of the <code>round</code> call to an <code>int</code>, and it all goes pear-shaped.</p>\n<p>Casting a <code>long</code> to an <code>int</code> will just lop off the top 32 bits ... and that results in a meaningless number.</p>\n<hr />\n<p>If we modify <code>fibonacci</code> to return a <code>long</code> instead of an <code>int</code>, we get correct results up to F55.  F56 and F57 are off by 1.  F58 is off by 2.</p>\n<p>What is happening now is that we are running into the problem that <code>double</code> (64-bit IEEE floating point) has only about 13.5 decimal digits of precision.  The rounding error incurred in the computation of the intermediate floating point value for F56 larger that 0.5 ... so the rounded value is then incorrect.</p>\n<p>The computed fibonacci numbers continue to get increasingly inaccurate until you get to F93, where the (modified) <code>fibonacci</code> method returns <code>Long.MAX_VALUE</code>.</p>\n<p>To get correct values for very large Fibonacci numbers:</p>\n<ul>\n<li>we need to use <code>BigInteger</code> to represent the numbers,</li>\n<li>we need to do the computations using <code>BigDecimal</code> with sufficient precision, and (maybe)</li>\n<li>we need to use a more accurate value for phi.</li>\n</ul>\n<p>Or we need to use the recurrence relationship to compute the numbers.</p>\n<hr />\n<p>The 2 take-aways from all of this are:</p>\n<ul>\n<li>casting a <code>long</code> to an <code>int</code> is a <strong>lossy</strong> conversion, and</li>\n<li>floating point arithmetic is inexact and ... tricky.</li>\n</ul>\n"}],"owner":{"account_id":23587351,"reputation":60,"user_id":17625629,"display_name":"Vled"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73332929,"answer_count":4,"score":0,"last_activity_date":1660864099,"creation_date":1660235461,"question_id":73324107,"body_markdown":"\r\nI tried to calculate a series of the N first fibonacci numbers using Binets Formula.\r\n\r\n\r\nEvery result i get is correct until F47 where the result is NEGATIVE.\r\n\r\nThis is my result : -1323752223\r\n&lt;br&gt;\r\nAnd heres the expected result : 2971215073\r\n\r\nI really think the problem occures during the double to int conversion\r\n\r\nSource Code:\r\n\r\n\r\n     import java.lang.Math;\r\n    \r\n    class fibonacci{\r\n      public static int NthFibonacci(int n){\r\n        double fi = 1.61803398875;\r\n        int fb = (int)Math.round((Math.pow(fi,n) - Math.pow(1-fi,n))/Math.sqrt(5));\r\n        return fb;\r\n      }\r\n    \r\n      public static void FibonacciSeries(Integer n){\r\n        for(int i = 0; i &lt; n; i++){\r\n          System.out.println(NthFibonacci(i) + &quot; &quot;);\r\n        }\r\n      }  \r\n      public static void main(String[] args) {\r\n        FibonacciSeries(50);\r\n      }\r\n    }\r\n\r\n","title":"Java double to int convertion changes sign of result","body":"<p>I tried to calculate a series of the N first fibonacci numbers using Binets Formula.</p>\n<p>Every result i get is correct until F47 where the result is NEGATIVE.</p>\n<p>This is my result : -1323752223\n<br>\nAnd heres the expected result : 2971215073</p>\n<p>I really think the problem occures during the double to int conversion</p>\n<p>Source Code:</p>\n<pre><code> import java.lang.Math;\n\nclass fibonacci{\n  public static int NthFibonacci(int n){\n    double fi = 1.61803398875;\n    int fb = (int)Math.round((Math.pow(fi,n) - Math.pow(1-fi,n))/Math.sqrt(5));\n    return fb;\n  }\n\n  public static void FibonacciSeries(Integer n){\n    for(int i = 0; i &lt; n; i++){\n      System.out.println(NthFibonacci(i) + &quot; &quot;);\n    }\n  }  \n  public static void main(String[] args) {\n    FibonacciSeries(50);\n  }\n}\n</code></pre>\n"},{"tags":["java","spring","transactions"],"comments":[{"owner":{"account_id":3192259,"reputation":117599,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1660897253,"post_id":73408462,"comment_id":129646721,"body_markdown":"*maybe i should add the @Transactional annotation? * not maybe... YOu should add the `@Transactional` to your service layer to make operations atomic. Also why the find and delete? Why not just call `delete` which basically does all of this for you already? You can convert the `EmptyResultSetException` into your `EntityNotFoundException`.","body":"*maybe i should add the @Transactional annotation? * not maybe... YOu should add the <code>@Transactional</code> to your service layer to make operations atomic. Also why the find and delete? Why not just call <code>delete</code> which basically does all of this for you already? You can convert the <code>EmptyResultSetException</code> into your <code>EntityNotFoundException</code>."}],"answers":[{"tags":[],"owner":{"account_id":25607850,"reputation":1,"user_id":19381674,"display_name":"Hicham ALAGAD"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660864091,"creation_date":1660863490,"answer_id":73410249,"question_id":73408462,"body_markdown":"you can test if your object needed, exist or not by autowiring the repository injected (in your case is RoomRepository e.g) and (insted User in my exmaple you can use Room): for example:\r\n\r\n\tpublic ResponseEntity&lt;Object&gt; deletUserById(Long id) {\r\n\t\tif (userrRepository.findById(id).isPresent()) {\r\n\t\t\tuserrRepository.deleteById(id);\r\n\t\t\treturn ResponseEntity.ok().body(&quot;User deleted with success&quot;);\r\n\t\t} else {\r\n\t\t\treturn ResponseEntity.unprocessableEntity().body(&quot;user to be deleted not exist&quot;);\r\n\t\t}\r\n\t}\r\n\r\n","title":"check if entity exist and then delete it in one transaction in spring app","body":"<p>you can test if your object needed, exist or not by autowiring the repository injected (in your case is RoomRepository e.g) and (insted User in my exmaple you can use Room): for example:</p>\n<pre><code>public ResponseEntity&lt;Object&gt; deletUserById(Long id) {\n    if (userrRepository.findById(id).isPresent()) {\n        userrRepository.deleteById(id);\n        return ResponseEntity.ok().body(&quot;User deleted with success&quot;);\n    } else {\n        return ResponseEntity.unprocessableEntity().body(&quot;user to be deleted not exist&quot;);\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":20725395,"reputation":53,"user_id":15218846,"display_name":"WantBecomeJavaCoder"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1197,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660864091,"creation_date":1660850785,"question_id":73408462,"body_markdown":"i have a services layer and a repository layer in my spring boot application (i use also spring data, mvc etc) \r\n\r\nbefore deleting an entity from the database, I want to check if such an entity exists and if not, then throw an EntityNotFoundException\r\n\r\nfor example my repository:\r\n\r\n    public interface RoomRepository extends CrudRepository&lt;Room, Long&gt; {\r\n    \r\n        @Query(&quot;from Room r left join fetch r.messages where r.id = :rId&quot;)\r\n        Optional&lt;Room&gt; findByIdWithMessages(@Param(&quot;rId&quot;) long id);\r\n    \r\n        @Override\r\n        List&lt;Room&gt; findAll();\r\n    }\r\n\r\nand service:\r\n\r\n    @Service\r\n    @Loggable\r\n    public class RoomService implements GenericService&lt;Room&gt; {\r\n    \r\n        private final RoomRepository roomRepository;\r\n        private final RoomDtoMapper roomMapper;\r\n    \r\n        public RoomService(RoomRepository roomRepository, RoomDtoMapper roomMapper) {\r\n            this.roomRepository = roomRepository;\r\n            this.roomMapper = roomMapper;\r\n        }\r\n    \r\n        @Override\r\n        public Room getById(long id) {\r\n            return roomRepository.findById(id).orElseThrow(\r\n                    () -&gt; new EntityNotFoundException(String.format(&quot;room with id = %d wasn&#39;t found&quot;, id)));\r\n        }\r\n    \r\n        @Override\r\n        public void delete(Room room) {\r\n            getById(room.getId());\r\n            roomRepository.delete(room);\r\n        }\r\n    }\r\n\r\nIn this example in the delete method, I call the \r\n\r\n&gt; getById(room.getId())\r\n\r\n (so that it throws an EntityNotFoundException if the entity does not exist.)\r\n\r\n before \r\n\r\n&gt; roomRepository.delete(room);\r\n\r\nit seems to me that such code is not thread-safe and the operation is not atomic\r\n(because at the moment when in this thread at the moment of checking another request from another thread may already delete the same entity)\r\nand I don&#39;t know if I&#39;m doing the right thing\r\n\r\nmaybe i should add the @Transactional annotation? \r\nwould it allow me to make the method atomic?\r\nlike this:\r\n\r\n    @Override\r\n    @Transactional\r\n    public void delete(Room room) {\r\n        getById(room.getId());\r\n        roomRepository.delete(room);\r\n    }\r\nmaybe i should set some kind of isolation level?\r\n","title":"check if entity exist and then delete it in one transaction in spring app","body":"<p>i have a services layer and a repository layer in my spring boot application (i use also spring data, mvc etc)</p>\n<p>before deleting an entity from the database, I want to check if such an entity exists and if not, then throw an EntityNotFoundException</p>\n<p>for example my repository:</p>\n<pre><code>public interface RoomRepository extends CrudRepository&lt;Room, Long&gt; {\n\n    @Query(&quot;from Room r left join fetch r.messages where r.id = :rId&quot;)\n    Optional&lt;Room&gt; findByIdWithMessages(@Param(&quot;rId&quot;) long id);\n\n    @Override\n    List&lt;Room&gt; findAll();\n}\n</code></pre>\n<p>and service:</p>\n<pre><code>@Service\n@Loggable\npublic class RoomService implements GenericService&lt;Room&gt; {\n\n    private final RoomRepository roomRepository;\n    private final RoomDtoMapper roomMapper;\n\n    public RoomService(RoomRepository roomRepository, RoomDtoMapper roomMapper) {\n        this.roomRepository = roomRepository;\n        this.roomMapper = roomMapper;\n    }\n\n    @Override\n    public Room getById(long id) {\n        return roomRepository.findById(id).orElseThrow(\n                () -&gt; new EntityNotFoundException(String.format(&quot;room with id = %d wasn't found&quot;, id)));\n    }\n\n    @Override\n    public void delete(Room room) {\n        getById(room.getId());\n        roomRepository.delete(room);\n    }\n}\n</code></pre>\n<p>In this example in the delete method, I call the</p>\n<blockquote>\n<p>getById(room.getId())</p>\n</blockquote>\n<p>(so that it throws an EntityNotFoundException if the entity does not exist.)</p>\n<p>before</p>\n<blockquote>\n<p>roomRepository.delete(room);</p>\n</blockquote>\n<p>it seems to me that such code is not thread-safe and the operation is not atomic\n(because at the moment when in this thread at the moment of checking another request from another thread may already delete the same entity)\nand I don't know if I'm doing the right thing</p>\n<p>maybe i should add the @Transactional annotation?\nwould it allow me to make the method atomic?\nlike this:</p>\n<pre><code>@Override\n@Transactional\npublic void delete(Room room) {\n    getById(room.getId());\n    roomRepository.delete(room);\n}\n</code></pre>\n<p>maybe i should set some kind of isolation level?</p>\n"},{"tags":["java","rest","jax-rs","backend","sendgrid"],"comments":[{"owner":{"account_id":13978,"reputation":71446,"user_id":28376,"accept_rate":86,"display_name":"philnash"},"score":0,"creation_date":1660863627,"post_id":73402397,"comment_id":129640676,"body_markdown":"Have you imported the SendGrid library with `import com.sendgrid.*;`?","body":"Have you imported the SendGrid library with <code>import com.sendgrid.*;</code>?"},{"owner":{"account_id":22674849,"reputation":105,"user_id":16846075,"display_name":"bugesz"},"score":0,"creation_date":1660892077,"post_id":73402397,"comment_id":129645122,"body_markdown":"Yes, I have these imports:                                                                                       import com.sendgrid.*;\nimport com.sendgrid.helpers.mail.Mail;\nimport com.sendgrid.helpers.mail.objects.Content;\nimport com.sendgrid.helpers.mail.objects.Email;","body":"Yes, I have these imports:                                                                                       import com.sendgrid.*; import com.sendgrid.helpers.mail.Mail; import com.sendgrid.helpers.mail.objects.Content; import com.sendgrid.helpers.mail.objects.Email;"},{"owner":{"account_id":13978,"reputation":71446,"user_id":28376,"accept_rate":86,"display_name":"philnash"},"score":0,"creation_date":1660957334,"post_id":73402397,"comment_id":129663678,"body_markdown":"You should only need `import com.sendgrid.*`, can you remove the other imports. Also, are those imports in the same file that this `sendEmail` method is defined? Is there more code from this file that you can share?","body":"You should only need <code>import com.sendgrid.*</code>, can you remove the other imports. Also, are those imports in the same file that this <code>sendEmail</code> method is defined? Is there more code from this file that you can share?"}],"owner":{"account_id":22674849,"reputation":105,"user_id":16846075,"display_name":"bugesz"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660863556,"creation_date":1660822532,"question_id":73402397,"body_markdown":"I&#39;m working on a fullstack app (confluence macro), with java backend where i use jax-rs rest endpoints. I would like to fetch the email sender endpoint from javascript this way:\r\n\r\n    async function sendemail() {\r\n        let response = await fetch(&#39;/rest/documentApprove/latest/connection/mail&#39;,{\r\n            method: &#39;GET&#39;,\r\n            headers: {\r\n                &#39;X-Atlassian-Token&#39;: &#39;no-check&#39;,\r\n                &#39;Accept&#39;: &#39;application/json&#39;\r\n            },\r\n        });\r\n    }\r\n\r\nThis is the endpoint in Java:\r\n\r\n    @GET\r\n    @Path(&quot;/email&quot;)\r\n    public void sendEmail() throws IOException {\r\n\r\n        Email from = new Email(&quot;example@email.com&quot;);\r\n        String subject = &quot;Sending with SendGrid is Fun&quot;;\r\n        Email to = new Email(&quot;example1@email.com&quot;);\r\n        Content content = new Content(&quot;text/plain&quot;, &quot;and easy to do anywhere, even with Java&quot;);\r\n        Mail mail = new Mail(from, subject, to, content);\r\n\r\n        SendGrid sg = new SendGrid(&quot;MYAPIKEY&quot;);\r\n        Request request = new Request();\r\n        try {\r\n            request.setMethod(Method.POST);\r\n            request.setEndpoint(&quot;mail/send&quot;);\r\n            request.setBody(mail.build());\r\n            com.sendgrid.Response response = sg.api(request);\r\n            System.out.println(response.getStatusCode());\r\n            System.out.println(response.getBody());\r\n            System.out.println(response.getHeaders());\r\n        } catch (IOException ex) {\r\n            throw ex;\r\n        };\r\n    }\r\n\r\nWhen I call this endpoint i get this error message: \r\n\r\n```xml\r\n&lt;status-code&gt;500&lt;/status-code&gt;\r\n&lt;message&gt;com/sendgrid/helpers/mail/objects/Email&lt;/message&gt;\r\n&lt;stack-trace&gt;java.lang.NoClassDefFoundError: com/sendgrid/helpers/mail/objects/Email\r\n```\r\n\r\nIf I try inside a simple public static void main method the email sender part it works properly","title":"JAX-RS Rest endpoint with sendgrid email sender method error","body":"<p>I'm working on a fullstack app (confluence macro), with java backend where i use jax-rs rest endpoints. I would like to fetch the email sender endpoint from javascript this way:</p>\n<pre><code>async function sendemail() {\n    let response = await fetch('/rest/documentApprove/latest/connection/mail',{\n        method: 'GET',\n        headers: {\n            'X-Atlassian-Token': 'no-check',\n            'Accept': 'application/json'\n        },\n    });\n}\n</code></pre>\n<p>This is the endpoint in Java:</p>\n<pre><code>@GET\n@Path(&quot;/email&quot;)\npublic void sendEmail() throws IOException {\n\n    Email from = new Email(&quot;example@email.com&quot;);\n    String subject = &quot;Sending with SendGrid is Fun&quot;;\n    Email to = new Email(&quot;example1@email.com&quot;);\n    Content content = new Content(&quot;text/plain&quot;, &quot;and easy to do anywhere, even with Java&quot;);\n    Mail mail = new Mail(from, subject, to, content);\n\n    SendGrid sg = new SendGrid(&quot;MYAPIKEY&quot;);\n    Request request = new Request();\n    try {\n        request.setMethod(Method.POST);\n        request.setEndpoint(&quot;mail/send&quot;);\n        request.setBody(mail.build());\n        com.sendgrid.Response response = sg.api(request);\n        System.out.println(response.getStatusCode());\n        System.out.println(response.getBody());\n        System.out.println(response.getHeaders());\n    } catch (IOException ex) {\n        throw ex;\n    };\n}\n</code></pre>\n<p>When I call this endpoint i get this error message:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;status-code&gt;500&lt;/status-code&gt;\n&lt;message&gt;com/sendgrid/helpers/mail/objects/Email&lt;/message&gt;\n&lt;stack-trace&gt;java.lang.NoClassDefFoundError: com/sendgrid/helpers/mail/objects/Email\n</code></pre>\n<p>If I try inside a simple public static void main method the email sender part it works properly</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":16134842,"reputation":181,"user_id":11647547,"display_name":"MSDeen"},"score":0,"creation_date":1660413488,"post_id":73346494,"comment_id":129529599,"body_markdown":"You are trying to achieve pagination but the issue is HTTP is a stateless protocol and you are incrementing the variable in the backend, rather I suggest you move the logic to the frontend (i.e) send the number of the element trying to access and return the corresponding element, if it goes beyond then return &quot;noMoreDoc&quot; in that way even if the page refreshes it will be set to zero in the frontend.","body":"You are trying to achieve pagination but the issue is HTTP is a stateless protocol and you are incrementing the variable in the backend, rather I suggest you move the logic to the frontend (i.e) send the number of the element trying to access and return the corresponding element, if it goes beyond then return &quot;noMoreDoc&quot; in that way even if the page refreshes it will be set to zero in the frontend."},{"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"score":0,"creation_date":1660413639,"post_id":73346494,"comment_id":129529630,"body_markdown":"How I can consume this in front? `adventureHolidaysService.countAdventureHolidays(&quot;summerCamps&quot;)) {` here I call method that count how many elements are in collection","body":"How I can consume this in front? <code>adventureHolidaysService.countAdventureHolidays(&quot;summerCamps&zwnj;&#8203;&quot;)) {</code> here I call method that count how many elements are in collection"}],"answers":[{"tags":[],"owner":{"account_id":26056137,"reputation":36,"user_id":19758437,"display_name":"ARPAN NANDI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660861745,"creation_date":1660415687,"answer_id":73346794,"question_id":73346494,"body_markdown":"If you call `counterSummerCamps.set(0)` after the return statement of else, you will get unreachable code. Try to set it before the return statement.","title":"How to reset counter on zero on API controller","body":"<p>If you call <code>counterSummerCamps.set(0)</code> after the return statement of else, you will get unreachable code. Try to set it before the return statement.</p>\n"}],"owner":{"account_id":26021002,"reputation":33,"user_id":19728708,"display_name":"Stefan Jankovic"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660862133,"creation_date":1660412914,"question_id":73346494,"body_markdown":"I have an API that on each call return me a random document from MongoDB collection.\r\n\r\nThis is code:\r\n\r\n    AtomicInteger countSummerCamps = new AtomicInteger();\r\n\r\n    @GetMapping(&quot;/getRandomSummerCamps&quot;)\r\n    public String getRandomSummerCamps(Model model) {\r\n\r\n        countSummerCamps.incrementAndGet();\r\n\r\n        if (getCountSummerCamps() &lt;= adventureHolidaysService.countAdventureHolidays(&quot;summerCamps&quot;)) {\r\n            model.addAttribute(&quot;randomSummerCamps&quot;, adventureHolidaysService.findRandomAdventureHolidays(&quot;summerCamps&quot;));\r\n\r\n            return &quot;randomSummerCamps&quot;;\r\n\r\n        } else {\r\n\r\n            return &quot;noMoreDoc&quot;;\r\n        }\r\n    }\r\n\r\nWhat is my problem and how I tried.\r\n\r\nSo in this situation the program will return me four elements in HTML. And after that the program will show me a `noMoreDoc` page. That works fine. But the problem is when I refresh the page. It’s still page `noMoreDoc` even if I go on the home page and hit the API again. It’s still the `noMoreDoc` page. I want to avoid that and after the user refreshes the page and get back on `/getRandomSummerCamps` show the user random documents again on every call.\r\n\r\nI tried to set `counterSummerCamps.set(0)` inside `}else{`, but I got *&quot;Unreachable statement&quot;*.\r\n\r\nIs there a way to fix this, so after the user got the `noMoreDoc` page and after the user get back on, to `/getRandomSummerCamps` show the user random documents again on each call?\r\n\r\n\r\n\r\n\r\n","title":"How to reset counter on zero on API controller","body":"<p>I have an API that on each call return me a random document from MongoDB collection.</p>\n<p>This is code:</p>\n<pre><code>AtomicInteger countSummerCamps = new AtomicInteger();\n\n@GetMapping(&quot;/getRandomSummerCamps&quot;)\npublic String getRandomSummerCamps(Model model) {\n\n    countSummerCamps.incrementAndGet();\n\n    if (getCountSummerCamps() &lt;= adventureHolidaysService.countAdventureHolidays(&quot;summerCamps&quot;)) {\n        model.addAttribute(&quot;randomSummerCamps&quot;, adventureHolidaysService.findRandomAdventureHolidays(&quot;summerCamps&quot;));\n\n        return &quot;randomSummerCamps&quot;;\n\n    } else {\n\n        return &quot;noMoreDoc&quot;;\n    }\n}\n</code></pre>\n<p>What is my problem and how I tried.</p>\n<p>So in this situation the program will return me four elements in HTML. And after that the program will show me a <code>noMoreDoc</code> page. That works fine. But the problem is when I refresh the page. It’s still page <code>noMoreDoc</code> even if I go on the home page and hit the API again. It’s still the <code>noMoreDoc</code> page. I want to avoid that and after the user refreshes the page and get back on <code>/getRandomSummerCamps</code> show the user random documents again on every call.</p>\n<p>I tried to set <code>counterSummerCamps.set(0)</code> inside <code>}else{</code>, but I got <em>&quot;Unreachable statement&quot;</em>.</p>\n<p>Is there a way to fix this, so after the user got the <code>noMoreDoc</code> page and after the user get back on, to <code>/getRandomSummerCamps</code> show the user random documents again on each call?</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1660819807,"post_id":73401715,"comment_id":129625449,"body_markdown":"It is always much appreciated if you take the time to format your code well when presenting it on this, or on any question and answer site. Your small effort can help others better understand your code and your problem much more easily if you do this. Also, please show and tell what steps you&#39;ve taken to debug your misbehaving code.","body":"It is always much appreciated if you take the time to format your code well when presenting it on this, or on any question and answer site. Your small effort can help others better understand your code and your problem much more easily if you do this. Also, please show and tell what steps you&#39;ve taken to debug your misbehaving code."},{"owner":{"account_id":25052043,"reputation":7,"user_id":18907837,"display_name":"prasobh pinku"},"score":0,"creation_date":1660819972,"post_id":73401715,"comment_id":129625499,"body_markdown":"i have edited it. now take a look","body":"i have edited it. now take a look"},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":1,"creation_date":1660819973,"post_id":73401715,"comment_id":129625500,"body_markdown":"I have formatted your code for you, please see how it differs from your own attempts to do this as your edits really didn&#39;t work. Again, though, what have you done to debug the problem? That is the crux of the issue, learning how to debug code, and applying those techniques to your own code.","body":"I have formatted your code for you, please see how it differs from your own attempts to do this as your edits really didn&#39;t work. Again, though, what have you done to debug the problem? That is the crux of the issue, learning how to debug code, and applying those techniques to your own code."},{"owner":{"account_id":247613,"reputation":284089,"user_id":522444,"accept_rate":100,"display_name":"Hovercraft Full Of Eels"},"score":0,"creation_date":1660820040,"post_id":73401715,"comment_id":129625525,"body_markdown":"If you&#39;re not sure how to go about doing this, then please check out [How to debug small programs](https://ericlippert.com/2014/03/05/how-to-debug-small-programs/). It won&#39;t solve your direct problem, but it will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer.","body":"If you&#39;re not sure how to go about doing this, then please check out <a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">How to debug small programs</a>. It won&#39;t solve your direct problem, but it will give you steps that you can follow that should help you solve it yourself, or even if that is not successful, then at least help you to better isolate your problem so that your question can be more focused and easier to answer."}],"answers":[{"tags":[],"owner":{"account_id":6234983,"reputation":159,"user_id":4850577,"display_name":"Vavaste"},"down_vote_count":1,"up_vote_count":0,"is_accepted":true,"score":-1,"last_activity_date":1660823059,"creation_date":1660820298,"answer_id":73401875,"question_id":73401715,"body_markdown":"    class GFG {\r\n        static String censor(String text,\r\n                             String word) {\r\n            String stars = &quot;&quot;;\r\n            for (int i = 0; i &lt; word.length(); i++)\r\n                if (word.charAt(i) != &#39; &#39;){\r\n                    stars += &#39;#&#39;;\r\n                }else {\r\n                    stars += &#39; &#39;;\r\n                }\r\n            text = text.replaceAll(word,stars);\r\n            return text;\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            String extract = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit , sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot; + &quot;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&quot; + &quot;Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.&quot; + &quot;Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum&quot;;\r\n            String cen = &quot;consectetur adipiscing elit&quot;;\r\n            System.out.println(censor(extract, cen));\r\n        }\r\n    }\r\n\r\nI tried to keep the code similar to yours, i kept the building part of the * strings (it can be done better) and just used text.replaceAll(&#39;String to be replaced&#39;,&#39;* string&#39;) that change all the occurencies with the first argument with the second.\r\n\r\nlet me know if this works for you.\r\n\r\nBtw the problem in your code was that you were splitting on the words but you wanted to change a whole substring. \r\nIf your need was to change the single occurrencies of the words that you are giving you should&#39;ve splitted the words in an array, then you had to cycle on the array and do a replace for each word.\r\n\r\n","title":"Write a Java program that takes two inputs: 1. text 2. a word or a phrase","body":"<pre><code>class GFG {\n    static String censor(String text,\n                         String word) {\n        String stars = &quot;&quot;;\n        for (int i = 0; i &lt; word.length(); i++)\n            if (word.charAt(i) != ' '){\n                stars += '#';\n            }else {\n                stars += ' ';\n            }\n        text = text.replaceAll(word,stars);\n        return text;\n    }\n\n    public static void main(String[] args) {\n        String extract = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit , sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot; + &quot;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&quot; + &quot;Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.&quot; + &quot;Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum&quot;;\n        String cen = &quot;consectetur adipiscing elit&quot;;\n        System.out.println(censor(extract, cen));\n    }\n}\n</code></pre>\n<p>I tried to keep the code similar to yours, i kept the building part of the * strings (it can be done better) and just used text.replaceAll('String to be replaced','* string') that change all the occurencies with the first argument with the second.</p>\n<p>let me know if this works for you.</p>\n<p>Btw the problem in your code was that you were splitting on the words but you wanted to change a whole substring.\nIf your need was to change the single occurrencies of the words that you are giving you should've splitted the words in an array, then you had to cycle on the array and do a replace for each word.</p>\n"}],"owner":{"account_id":25052043,"reputation":7,"user_id":18907837,"display_name":"prasobh pinku"},"comment_count":4,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":80,"favorite_count":0,"down_vote_count":6,"up_vote_count":1,"closed_date":1660820432,"accepted_answer_id":73401875,"answer_count":1,"score":-5,"last_activity_date":1660861784,"creation_date":1660819617,"question_id":73401715,"body_markdown":"&gt; Write a Java program that takes two inputs: \r\n&gt; \r\n&gt; 1. text\r\n&gt; 2. a word or a phrase \r\n&gt; \r\n&gt; The program will read the contents text and search for occurrences of the search phrase in the file. The program should then replace all characters of matching occurrences of the search phrase with #.\r\n&gt;  \r\n&gt; The modified file should be saved to a file in the \r\nsame folder as the input file. \r\n&gt; \r\n&gt; Example: Search Phrase: &quot;consectetur adipiscing elit&quot;\r\n&gt; \r\n&gt; If the input file contains the following text \r\n&gt; \r\n&gt; Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cilium dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum \r\nLorem ipsum dolor sit amet,\r\n&gt; \r\n&gt; then the output should be\r\n&gt; \r\n&gt; Lorem ipsum dolor sit amet, ########### ########## ####, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cilium dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum \r\nLorem ipsum dolor sit amet,\r\n\r\nThe code I wrote is given below. it does not changing the text with #\r\n\r\n```\r\nclass GFG {\r\n    static String censor(String text, String word) {\r\n        String[] word_list = text.split(&quot;\\\\s+&quot;);\r\n        String result = &quot;&quot;;\r\n        String stars = &quot;&quot;;\r\n        for (int i = 0; i &lt; word.length(); i++)\r\n            stars += &#39;#&#39;;\r\n        int index = 0;\r\n        for (String i : word_list) {\r\n            if (i.compareTo(word) == 0)\r\n                word_list[index] = stars;\r\n            index++;\r\n        }\r\n        for (String i : word_list)\r\n            result += i + &#39; &#39;;\r\n\r\n        return result;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        String extract = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit , sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;\r\n                + &quot;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&quot;\r\n                + &quot;Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.&quot;\r\n                + &quot;Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum&quot;;\r\n        String cen = &quot;consectetur adipiscing elit&quot;;\r\n        System.out.println(censor(extract, cen));\r\n    }\r\n}\r\n```","title":"Write a Java program that takes two inputs: 1. text 2. a word or a phrase","body":"<blockquote>\n<p>Write a Java program that takes two inputs:</p>\n<ol>\n<li>text</li>\n<li>a word or a phrase</li>\n</ol>\n<p>The program will read the contents text and search for occurrences of the search phrase in the file. The program should then replace all characters of matching occurrences of the search phrase with #.</p>\n<p>The modified file should be saved to a file in the\nsame folder as the input file.</p>\n<p>Example: Search Phrase: &quot;consectetur adipiscing elit&quot;</p>\n<p>If the input file contains the following text</p>\n<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cilium dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum\nLorem ipsum dolor sit amet,</p>\n<p>then the output should be</p>\n<p>Lorem ipsum dolor sit amet, ########### ########## ####, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cilium dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum\nLorem ipsum dolor sit amet,</p>\n</blockquote>\n<p>The code I wrote is given below. it does not changing the text with #</p>\n<pre><code>class GFG {\n    static String censor(String text, String word) {\n        String[] word_list = text.split(&quot;\\\\s+&quot;);\n        String result = &quot;&quot;;\n        String stars = &quot;&quot;;\n        for (int i = 0; i &lt; word.length(); i++)\n            stars += '#';\n        int index = 0;\n        for (String i : word_list) {\n            if (i.compareTo(word) == 0)\n                word_list[index] = stars;\n            index++;\n        }\n        for (String i : word_list)\n            result += i + ' ';\n\n        return result;\n    }\n\n    public static void main(String[] args) {\n        String extract = &quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit , sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.&quot;\n                + &quot;Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.&quot;\n                + &quot;Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.&quot;\n                + &quot;Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum&quot;;\n        String cen = &quot;consectetur adipiscing elit&quot;;\n        System.out.println(censor(extract, cen));\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","docker","spring-cloud"],"comments":[{"owner":{"account_id":13863020,"reputation":137023,"user_id":10008173,"display_name":"David Maze"},"score":1,"creation_date":1660858580,"post_id":73409264,"comment_id":129639597,"body_markdown":"Which service(s) are having a problem; can you reduce the configuration to the minimum necessary to demonstrate the issue?  What is the `spring.datasource.url` property set to?  (See, for example, [Docker Compose + Spring Boot + Postgres connection](https://stackoverflow.com/questions/44790923/docker-compose-spring-boot-postgres-connection).)","body":"Which service(s) are having a problem; can you reduce the configuration to the minimum necessary to demonstrate the issue?  What is the <code>spring.datasource.url</code> property set to?  (See, for example, <a href=\"https://stackoverflow.com/questions/44790923/docker-compose-spring-boot-postgres-connection\">Docker Compose + Spring Boot + Postgres connection</a>.)"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1660864381,"post_id":73409264,"comment_id":129640803,"body_markdown":"@DavidMaze I already defined them( user service, advertisement service and report service) in post.","body":"@DavidMaze I already defined them( user service, advertisement service and report service) in post."},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1660999654,"post_id":73409264,"comment_id":129669070,"body_markdown":"@DavidMaze I might find the conneciton refused issue. Is it possible to look through this link which I asked. https://stackoverflow.com/questions/73415922/spring-cloud-docker-config-server-cannot-fetch-properties-file-as-the-usage-of","body":"@DavidMaze I might find the conneciton refused issue. Is it possible to look through this link which I asked. <a href=\"https://stackoverflow.com/questions/73415922/spring-cloud-docker-config-server-cannot-fetch-properties-file-as-the-usage-of\" title=\"spring cloud docker config server cannot fetch properties file as the usage of\">stackoverflow.com/questions/73415922/&hellip;</a>"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1661460291,"post_id":73409264,"comment_id":129784648,"body_markdown":"@DavidMaze Can you look through my another question if you have any idea about it? Here is the link : https://stackoverflow.com/questions/73472367/spring-cloud-keycloak-javax-ws-rs-notauthorizedexception-http-401-unauthorized","body":"@DavidMaze Can you look through my another question if you have any idea about it? Here is the link : <a href=\"https://stackoverflow.com/questions/73472367/spring-cloud-keycloak-javax-ws-rs-notauthorizedexception-http-401-unauthorized\" title=\"spring cloud keycloak javax ws rs notauthorizedexception http 401 unauthorized\">stackoverflow.com/questions/73472367/&hellip;</a>"},{"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"score":0,"creation_date":1661714064,"post_id":73409264,"comment_id":129832056,"body_markdown":"@DavidMaze I couldn&#39;t fix the issue.","body":"@DavidMaze I couldn&#39;t fix the issue."}],"owner":{"account_id":7531034,"reputation":1,"user_id":5719229,"display_name":"S.N"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":178,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660860375,"creation_date":1660855721,"question_id":73409264,"body_markdown":"I have a problem about connecting mysql database to services in my Spring Cloud Project.\r\nAll these services are **user service**, **advertisement service** and lastly **report service**\r\n\r\nHere is my error when I show logs of user service, advertisement service and lastly report service.\r\n\r\n    Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\r\n    The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\r\n    Caused by: java.net.ConnectException: Connection refused (Connection refused)\r\n\r\nHow can I fix it?\r\n\r\nHere is my docker-compose.yml shown below.\r\n\r\n    services:\r\n    \r\n      database:\r\n        container_name: mysql-database\r\n        image: &#39;mysql:latest&#39;\r\n        ports:\r\n          - &quot;3366:3306&quot;\r\n        restart: always\r\n        environment:\r\n          #MYSQL_DATABASE: &quot;springbootuser&quot;\r\n          MYSQL_USER: &quot;springmicroserviceuser&quot;\r\n          MYSQL_PASSWORD: &quot;111111&quot;\r\n          MYSQL_ROOT_PASSWORD: &quot;111111&quot;\r\n        volumes:\r\n          - db-data:/var/lib/mysql\r\n        networks:\r\n          - backend\r\n        healthcheck:\r\n          test: [&quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot;]\r\n          timeout: 20s\r\n          retries: 10\r\n    \r\n      keycloak:\r\n        image: quay.io/keycloak/keycloak:18.0.2\r\n        environment:\r\n          - KEYCLOAK_ADMIN=admin\r\n          - KEYCLOAK_ADMIN_PASSWORD=admin\r\n        ports:\r\n          - &quot;8181:8080&quot;\r\n        networks:\r\n          - backend\r\n        command:\r\n          - start-dev\r\n    \r\n      rabbitmq:\r\n        image: &quot;rabbitmq:3-management&quot;\r\n        container_name: &quot;rmq3&quot;\r\n        environment:\r\n          RABBITMQ_DEFAULT_USER: &quot;rabbitmq&quot;\r\n          RABBITMQ_DEFAULT_PASS: &quot;123456&quot;\r\n        ports:\r\n          - &quot;5672:5672&quot;\r\n          - &quot;15672:15672&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      configserver:\r\n        image: configserver\r\n        container_name: configServer\r\n        build:\r\n          context: ./configserver\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n        ports:\r\n          - &quot;9191:9191&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      eurekaserver:\r\n        image: eurekaserver\r\n        ports:\r\n          - &quot;8761:8761&quot;\r\n        build:\r\n          context: ./discoveryserver\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n        depends_on:\r\n          configserver:\r\n            condition: service_started\r\n        networks:\r\n          - backend\r\n    \r\n    \r\n      gatewayserver:\r\n        image: gatewayserver\r\n        ports:\r\n          - &quot;8600:8600&quot;\r\n        build:\r\n          context: ./api-gateway\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          PROFILE: &quot;default&quot;\r\n          SERVER_PORT: &quot;8600&quot;\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n        depends_on:\r\n          configserver:\r\n            condition: service_started\r\n          eurekaserver:\r\n            condition: service_started\r\n        networks:\r\n          - backend\r\n    \r\n      userservice:\r\n        image: user-service\r\n        build:\r\n          context: ./user-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9000&quot;\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n          DATABASE_HOST: database\r\n          DATABASE_USER: springmicroserviceuser\r\n          DATABASE_PASSWORD: 111111\r\n          DATABASE_NAME: springbootuser\r\n          DATABASE_PORT: 3306\r\n          SPRING_APPLICATION_JSON: &#39;{\r\n                  &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\r\n          }&#39;\r\n        depends_on:\r\n          database:\r\n            condition: service_healthy\r\n          configserver:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9000:9000&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      managementservice:\r\n        image: management-service\r\n        build:\r\n          context: ./management-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9002&quot;\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n        depends_on:\r\n          configserver:\r\n            condition: service_started\r\n          advertisementservice:\r\n            condition: service_started\r\n          reportservice:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9002:9002&quot;\r\n        networks:\r\n          - backend\r\n    \r\n      advertisementservice:\r\n        image: advertisement-service\r\n        build:\r\n          context: ./advertisement-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9001&quot;\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n          DATABASE_HOST: database\r\n          DATABASE_USER: springmicroserviceuser\r\n          DATABASE_PASSWORD: 111111\r\n          DATABASE_NAME: springbootadvertisement\r\n          DATABASE_PORT: 3306\r\n          SPRING_APPLICATION_JSON: &#39;{\r\n                      &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\r\n          }&#39;\r\n        depends_on:\r\n          database:\r\n            condition: service_healthy\r\n          configserver:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9001:9001&quot;\r\n        networks:\r\n          - backend\r\n    \r\n    \r\n      reportservice:\r\n        image: report-service\r\n        build:\r\n          context: ./report-service\r\n          dockerfile: Dockerfile\r\n        environment:\r\n          SERVER_PORT: &quot;9003&quot;\r\n          CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\r\n          CONFIGSERVER_PORT: &quot;9191&quot;\r\n          EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\r\n          EUREKASERVER_PORT: &quot;8761&quot;\r\n          WAIT_HOSTS: configserver:9191\r\n          DATABASE_HOST: database\r\n          DATABASE_USER: springmicroserviceuser\r\n          DATABASE_PASSWORD: 111111\r\n          DATABASE_NAME: springbootreport\r\n          DATABASE_PORT: 3306\r\n          SPRING_APPLICATION_JSON: &#39;{\r\n                          &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\r\n          }&#39;\r\n        depends_on:\r\n          database:\r\n            condition: service_healthy\r\n          configserver:\r\n            condition: service_started\r\n        ports:\r\n          - &quot;9003:9003&quot;\r\n        networks:\r\n          - backend\r\n    \r\n    networks:\r\n      backend:\r\n        driver: bridge\r\n    \r\n    \r\n    volumes:\r\n      db-data:\r\n\r\n\r\nHere is my project link : [Link][1]\r\n\r\nHere are all properties file of services under config server : [Link][2]\r\n\r\n\r\n  [1]: https://github.com/Rapter1990/SpringBootMicroservices\r\n  [2]: https://github.com/Rapter1990/SpringBootMicroservices/tree/master/configserver/src/main/resources/configurations","title":"Spring Cloud Service cannot connect to Mysql Database in Docker","body":"<p>I have a problem about connecting mysql database to services in my Spring Cloud Project.\nAll these services are <strong>user service</strong>, <strong>advertisement service</strong> and lastly <strong>report service</strong></p>\n<p>Here is my error when I show logs of user service, advertisement service and lastly report service.</p>\n<pre><code>Caused by: com.mysql.cj.exceptions.CJCommunicationsException: Communications link failure\nThe last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.\nCaused by: java.net.ConnectException: Connection refused (Connection refused)\n</code></pre>\n<p>How can I fix it?</p>\n<p>Here is my docker-compose.yml shown below.</p>\n<pre><code>services:\n\n  database:\n    container_name: mysql-database\n    image: 'mysql:latest'\n    ports:\n      - &quot;3366:3306&quot;\n    restart: always\n    environment:\n      #MYSQL_DATABASE: &quot;springbootuser&quot;\n      MYSQL_USER: &quot;springmicroserviceuser&quot;\n      MYSQL_PASSWORD: &quot;111111&quot;\n      MYSQL_ROOT_PASSWORD: &quot;111111&quot;\n    volumes:\n      - db-data:/var/lib/mysql\n    networks:\n      - backend\n    healthcheck:\n      test: [&quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot;]\n      timeout: 20s\n      retries: 10\n\n  keycloak:\n    image: quay.io/keycloak/keycloak:18.0.2\n    environment:\n      - KEYCLOAK_ADMIN=admin\n      - KEYCLOAK_ADMIN_PASSWORD=admin\n    ports:\n      - &quot;8181:8080&quot;\n    networks:\n      - backend\n    command:\n      - start-dev\n\n  rabbitmq:\n    image: &quot;rabbitmq:3-management&quot;\n    container_name: &quot;rmq3&quot;\n    environment:\n      RABBITMQ_DEFAULT_USER: &quot;rabbitmq&quot;\n      RABBITMQ_DEFAULT_PASS: &quot;123456&quot;\n    ports:\n      - &quot;5672:5672&quot;\n      - &quot;15672:15672&quot;\n    networks:\n      - backend\n\n  configserver:\n    image: configserver\n    container_name: configServer\n    build:\n      context: ./configserver\n      dockerfile: Dockerfile\n    environment:\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n    ports:\n      - &quot;9191:9191&quot;\n    networks:\n      - backend\n\n  eurekaserver:\n    image: eurekaserver\n    ports:\n      - &quot;8761:8761&quot;\n    build:\n      context: ./discoveryserver\n      dockerfile: Dockerfile\n    environment:\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n    depends_on:\n      configserver:\n        condition: service_started\n    networks:\n      - backend\n\n\n  gatewayserver:\n    image: gatewayserver\n    ports:\n      - &quot;8600:8600&quot;\n    build:\n      context: ./api-gateway\n      dockerfile: Dockerfile\n    environment:\n      PROFILE: &quot;default&quot;\n      SERVER_PORT: &quot;8600&quot;\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      WAIT_HOSTS: configserver:9191\n    depends_on:\n      configserver:\n        condition: service_started\n      eurekaserver:\n        condition: service_started\n    networks:\n      - backend\n\n  userservice:\n    image: user-service\n    build:\n      context: ./user-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9000&quot;\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n      DATABASE_HOST: database\n      DATABASE_USER: springmicroserviceuser\n      DATABASE_PASSWORD: 111111\n      DATABASE_NAME: springbootuser\n      DATABASE_PORT: 3306\n      SPRING_APPLICATION_JSON: '{\n              &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\n      }'\n    depends_on:\n      database:\n        condition: service_healthy\n      configserver:\n        condition: service_started\n    ports:\n      - &quot;9000:9000&quot;\n    networks:\n      - backend\n\n  managementservice:\n    image: management-service\n    build:\n      context: ./management-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9002&quot;\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n    depends_on:\n      configserver:\n        condition: service_started\n      advertisementservice:\n        condition: service_started\n      reportservice:\n        condition: service_started\n    ports:\n      - &quot;9002:9002&quot;\n    networks:\n      - backend\n\n  advertisementservice:\n    image: advertisement-service\n    build:\n      context: ./advertisement-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9001&quot;\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n      DATABASE_HOST: database\n      DATABASE_USER: springmicroserviceuser\n      DATABASE_PASSWORD: 111111\n      DATABASE_NAME: springbootadvertisement\n      DATABASE_PORT: 3306\n      SPRING_APPLICATION_JSON: '{\n                  &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\n      }'\n    depends_on:\n      database:\n        condition: service_healthy\n      configserver:\n        condition: service_started\n    ports:\n      - &quot;9001:9001&quot;\n    networks:\n      - backend\n\n\n  reportservice:\n    image: report-service\n    build:\n      context: ./report-service\n      dockerfile: Dockerfile\n    environment:\n      SERVER_PORT: &quot;9003&quot;\n      CONFIGSERVER_URI: &quot;http://configserver:9191&quot;\n      CONFIGSERVER_PORT: &quot;9191&quot;\n      EUREKASERVER_URI: &quot;http://eurekaserver:8761/eureka/&quot;\n      EUREKASERVER_PORT: &quot;8761&quot;\n      WAIT_HOSTS: configserver:9191\n      DATABASE_HOST: database\n      DATABASE_USER: springmicroserviceuser\n      DATABASE_PASSWORD: 111111\n      DATABASE_NAME: springbootreport\n      DATABASE_PORT: 3306\n      SPRING_APPLICATION_JSON: '{\n                      &quot;spring.jpa.hibernate.ddl-auto&quot; : &quot;update&quot;\n      }'\n    depends_on:\n      database:\n        condition: service_healthy\n      configserver:\n        condition: service_started\n    ports:\n      - &quot;9003:9003&quot;\n    networks:\n      - backend\n\nnetworks:\n  backend:\n    driver: bridge\n\n\nvolumes:\n  db-data:\n</code></pre>\n<p>Here is my project link : <a href=\"https://github.com/Rapter1990/SpringBootMicroservices\" rel=\"nofollow noreferrer\">Link</a></p>\n<p>Here are all properties file of services under config server : <a href=\"https://github.com/Rapter1990/SpringBootMicroservices/tree/master/configserver/src/main/resources/configurations\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":2645973,"reputation":65777,"user_id":2288659,"accept_rate":90,"display_name":"Silvio Mayolo"},"score":10,"creation_date":1660836899,"post_id":73405802,"comment_id":129632707,"body_markdown":"The Java stream interface is convenient, but it doesn&#39;t have to consume your entire program. Sometimes the most readable thing is a good old-fashioned `if (list == null) { throw blah; }` at the start of your loop.","body":"The Java stream interface is convenient, but it doesn&#39;t have to consume your entire program. Sometimes the most readable thing is a good old-fashioned <code>if (list == null) { throw blah; }</code> at the start of your loop."},{"owner":{"account_id":268201,"reputation":419,"user_id":1573368,"display_name":"Sheel Prabhakar"},"score":0,"creation_date":1660837063,"post_id":73405802,"comment_id":129632764,"body_markdown":"Just use CollectionUtils.isEmpty and MapUtils.isEmpty()","body":"Just use CollectionUtils.isEmpty and MapUtils.isEmpty()"},{"owner":{"account_id":238684,"reputation":22543,"user_id":507738,"accept_rate":71,"display_name":"MC Emperor"},"score":0,"creation_date":1660837232,"post_id":73405802,"comment_id":129632828,"body_markdown":"And for starters, a `List` shouldn&#39;t be `null`, it should be empty instead.","body":"And for starters, a <code>List</code> shouldn&#39;t be <code>null</code>, it should be empty instead."},{"owner":{"account_id":7980951,"reputation":2013,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1660837293,"post_id":73405802,"comment_id":129632851,"body_markdown":"OK, thanks maybe I tried to use Streams by force :)","body":"OK, thanks maybe I tried to use Streams by force :)"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1660837335,"post_id":73405802,"comment_id":129632880,"body_markdown":"BTW you can remove first exception throwing. Instead of `.orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;)).stream()` use `.stream().flatMap(List::stream)` which in case of null list (so empty Optional) will create empty stream. So since no value will be found it will be indicated by last `orElseThrow`.","body":"BTW you can remove first exception throwing. Instead of <code>.orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;)).stream()</code> use <code>.stream().flatMap(List::stream)</code> which in case of null list (so empty Optional) will create empty stream. So since no value will be found it will be indicated by last <code>orElseThrow</code>."},{"owner":{"account_id":7980951,"reputation":2013,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"score":0,"creation_date":1660837376,"post_id":73405802,"comment_id":129632897,"body_markdown":"Yeah, after change I have if else that check for null and then Stream without Optional","body":"Yeah, after change I have if else that check for null and then Stream without Optional"}],"answers":[{"tags":[],"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1660837098,"creation_date":1660837098,"answer_id":73405876,"question_id":73405802,"body_markdown":"Just check if the list is null directly.  Streaming elements from a list only makes sense if the list exists in the first place.\r\n\r\n```\r\nif(null != listCanBeNull) {\r\n    // stream things from here\r\n}\r\n```","title":"Java Streams - check if list is null","body":"<p>Just check if the list is null directly.  Streaming elements from a list only makes sense if the list exists in the first place.</p>\n<pre><code>if(null != listCanBeNull) {\n    // stream things from here\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660838366,"creation_date":1660837397,"answer_id":73405963,"question_id":73405802,"body_markdown":"An Optional.ofNullable can be turned into a (possibly empty) Stream, or you can immediately use Stream.ofNullable. And do a flatMap.\r\n\r\n    Stream.ofNullable(listCanBeNull)\r\n            .stream()\r\n            .flatMap()\r\n            .filter(configuration -&gt; couration.getId().equals(warehouseConfigurationId))\r\n            .findAny()\r\n            .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;));","title":"Java Streams - check if list is null","body":"<p>An Optional.ofNullable can be turned into a (possibly empty) Stream, or you can immediately use Stream.ofNullable. And do a flatMap.</p>\n<pre><code>Stream.ofNullable(listCanBeNull)\n        .stream()\n        .flatMap()\n        .filter(configuration -&gt; couration.getId().equals(warehouseConfigurationId))\n        .findAny()\n        .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660860184,"creation_date":1660859823,"answer_id":73409860,"question_id":73405802,"body_markdown":"# tl;dr\r\n\r\n    Objects.requireNonNull( list , &quot;error message&quot; ).stream() …  // Throws NullPointerException if null.\r\n\r\n# Details\r\n\r\nIf you choose to go with a simple null check before streaming, here is an alternative to the null check shown in correct [Answer by Makoto][1].\r\n\r\n# `Objects.nonNull`\r\n\r\nI find a call to [`Objects.nonNull`][2] to be more readable than `null != list`.\r\n\r\n    if ( Objects.nonNull( list ) ) { list.stream() … }\r\n\r\n# `Objects.requireNonNull`\r\n\r\nOr automatically throw an exception if the object reference should never be null, with a call to [`Objects.requireNonNull`][3].\r\n\r\n     Objects.requireNonNull( list )  // Throws NullPointerException if null.\r\n\r\nThis method returns the object you pass (your list), providing for convenient [method-chaining][4].  \r\n\r\n    Objects.requireNonNull( list ).stream() … \r\n\r\nYou can optionally pass a message to be used in the exception if thrown.\r\n\r\n    Objects.requireNonNull( list , &quot;message goes here&quot; ).stream() … \r\n\r\n\r\n  [1]: https://stackoverflow.com/a/73405876/642706\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#nonNull(java.lang.Object)\r\n  [3]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\r\n  [4]: https://en.wikipedia.org/wiki/Method_chaining","title":"Java Streams - check if list is null","body":"<h1>tl;dr</h1>\n<pre><code>Objects.requireNonNull( list , &quot;error message&quot; ).stream() …  // Throws NullPointerException if null.\n</code></pre>\n<h1>Details</h1>\n<p>If you choose to go with a simple null check before streaming, here is an alternative to the null check shown in correct <a href=\"https://stackoverflow.com/a/73405876/642706\">Answer by Makoto</a>.</p>\n<h1><code>Objects.nonNull</code></h1>\n<p>I find a call to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#nonNull(java.lang.Object)\" rel=\"nofollow noreferrer\"><code>Objects.nonNull</code></a> to be more readable than <code>null != list</code>.</p>\n<pre><code>if ( Objects.nonNull( list ) ) { list.stream() … }\n</code></pre>\n<h1><code>Objects.requireNonNull</code></h1>\n<p>Or automatically throw an exception if the object reference should never be null, with a call to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Objects.html#requireNonNull(T)\" rel=\"nofollow noreferrer\"><code>Objects.requireNonNull</code></a>.</p>\n<pre><code> Objects.requireNonNull( list )  // Throws NullPointerException if null.\n</code></pre>\n<p>This method returns the object you pass (your list), providing for convenient <a href=\"https://en.wikipedia.org/wiki/Method_chaining\" rel=\"nofollow noreferrer\">method-chaining</a>.</p>\n<pre><code>Objects.requireNonNull( list ).stream() … \n</code></pre>\n<p>You can optionally pass a message to be used in the exception if thrown.</p>\n<pre><code>Objects.requireNonNull( list , &quot;message goes here&quot; ).stream() … \n</code></pre>\n"}],"owner":{"account_id":7980951,"reputation":2013,"user_id":6022333,"accept_rate":100,"display_name":"Matley"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1313,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73405963,"answer_count":3,"score":0,"last_activity_date":1660860184,"creation_date":1660836796,"question_id":73405802,"body_markdown":"I wonder what&#39;s teh best approach to check if list is null. In my Stream I call `orElseThrow` twice. It works but I don;t know if its correct? It looks a little bit ugly:\r\n\r\n    Optional.ofNullable(listCanBeNull)\r\n                    .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;))\r\n                    .stream()\r\n                    .filter(configuration -&gt; configuration.getId().equals(warehouseConfigurationId))\r\n                    .findAny()\r\n                    .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;));\r\n\r\n\r\nI have to throw error when list is null and when no item was found","title":"Java Streams - check if list is null","body":"<p>I wonder what's teh best approach to check if list is null. In my Stream I call <code>orElseThrow</code> twice. It works but I don;t know if its correct? It looks a little bit ugly:</p>\n<pre><code>Optional.ofNullable(listCanBeNull)\n                .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;))\n                .stream()\n                .filter(configuration -&gt; configuration.getId().equals(warehouseConfigurationId))\n                .findAny()\n                .orElseThrow(() -&gt; new ResourceNotFoundException(&quot;the same error message&quot;));\n</code></pre>\n<p>I have to throw error when list is null and when no item was found</p>\n"},{"tags":["java","spring"],"answers":[{"tags":[],"owner":{"account_id":477214,"reputation":5260,"user_id":888580,"display_name":"lane.maxwell"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660858583,"creation_date":1660768162,"answer_id":73394564,"question_id":73393836,"body_markdown":"Adding `@ExtendWith(SpringExtension.class)` is not enough to create the Spring context.  You need to add `@SpringBootTest` to your `MyNewClassTest`.  Per the appropriate comment, you can drop `@ExtendWith(SpringExtension.class)`\r\n\r\n    @SpringBootTest\r\n    class MyNewClassTest {\r\n\r\n      @Autowired private MyNewClass sut;\r\n    }","title":"@Component not being read in Spring test","body":"<p>Adding <code>@ExtendWith(SpringExtension.class)</code> is not enough to create the Spring context.  You need to add <code>@SpringBootTest</code> to your <code>MyNewClassTest</code>.  Per the appropriate comment, you can drop <code>@ExtendWith(SpringExtension.class)</code></p>\n<pre><code>@SpringBootTest\nclass MyNewClassTest {\n\n  @Autowired private MyNewClass sut;\n}\n</code></pre>\n"}],"owner":{"account_id":19485923,"reputation":61,"user_id":14255305,"display_name":"rbrewster"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":65,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":73394564,"answer_count":1,"score":2,"last_activity_date":1660858583,"creation_date":1660763670,"question_id":73393836,"body_markdown":"I created an Integration test to test the new feature I just added but the Spring wiring is not working. The unit tests all work and the existing Spring integration tests still work but I am unable to Autowire my new class\r\n\r\nHere is the error message –\r\n\r\n```org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;com.xxx.xxx.etc.MyNewClassTest’: Unsatisfied dependency expressed through field &#39;sut&#39;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &#39;com.xxx.xxx.etc.MyNewClass &#39; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}```\r\n\r\nThe new class –\r\n```\r\n@Slf4j\r\n@Component\r\npublic class MyNewClass extends AbstractRetryJob&lt;Event&gt; {\r\n```\r\nMy test -\r\n```\r\n@ExtendWith(SpringExtension.class)\r\nclass MyNewClassTest {\r\n  @Autowired private MyNewClass sut;\r\n```\r\n\r\nAny idea on what is going wrong? ","title":"@Component not being read in Spring test","body":"<p>I created an Integration test to test the new feature I just added but the Spring wiring is not working. The unit tests all work and the existing Spring integration tests still work but I am unable to Autowire my new class</p>\n<p>Here is the error message –</p>\n<p><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'com.xxx.xxx.etc.MyNewClassTest’: Unsatisfied dependency expressed through field 'sut'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.xxx.xxx.etc.MyNewClass ' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</code></p>\n<p>The new class –</p>\n<pre><code>@Slf4j\n@Component\npublic class MyNewClass extends AbstractRetryJob&lt;Event&gt; {\n</code></pre>\n<p>My test -</p>\n<pre><code>@ExtendWith(SpringExtension.class)\nclass MyNewClassTest {\n  @Autowired private MyNewClass sut;\n</code></pre>\n<p>Any idea on what is going wrong?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660635752,"post_id":73366074,"comment_id":129572105,"body_markdown":"What exactly in this code doesn&#39;t work the way you expect?\nTell us what is wrong with shared code. Do you have any errors?","body":"What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"account_id":20294412,"reputation":115,"user_id":14885335,"display_name":"Droidbane"},"score":0,"creation_date":1660650653,"post_id":73366074,"comment_id":129577238,"body_markdown":"I want my Translations and Categories table to be combined with my model after being queried one by one.\nSince you made this comment, I decided to add the methods I&#39;ve tried and failed before to this question.\n\nTo add to my question, I noticed it working while rewriting the code I tried yesterday. I&#39;ve added this code as an answer below.","body":"I want my Translations and Categories table to be combined with my model after being queried one by one. Since you made this comment, I decided to add the methods I&#39;ve tried and failed before to this question.  To add to my question, I noticed it working while rewriting the code I tried yesterday. I&#39;ve added this code as an answer below."},{"owner":{"account_id":20294412,"reputation":115,"user_id":14885335,"display_name":"Droidbane"},"score":0,"creation_date":1660650755,"post_id":73366074,"comment_id":129577272,"body_markdown":"Is there a document that I can reference so that the use of Firebase Realtime Database can be more efficient, @AlexMamo?","body":"Is there a document that I can reference so that the use of Firebase Realtime Database can be more efficient, @AlexMamo?"},{"owner":{"account_id":6819231,"reputation":132841,"user_id":5246885,"accept_rate":78,"display_name":"Alex Mamo"},"score":0,"creation_date":1660650886,"post_id":73366074,"comment_id":129577321,"body_markdown":"What exactly is not efficient in this code?","body":"What exactly is not efficient in this code?"}],"answers":[{"tags":[],"owner":{"account_id":20294412,"reputation":115,"user_id":14885335,"display_name":"Droidbane"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660650206,"creation_date":1660650206,"answer_id":73373440,"question_id":73366074,"body_markdown":"## As it is difficult to use a common pattern, after fetching my entire Categories table, I tried to replace the textContentIDForName with the translation in my Translations table. ##\r\n\r\n\r\n```java\r\npublic void getAllCategories() {\r\n        FirebaseDatabase db = FirebaseDatabase.getInstance();\r\n        DatabaseReference categoriesRef = db.getReference(&quot;categories&quot;);\r\n        DatabaseReference TranslationsRef = db.getReference(&quot;translations&quot;);\r\n\r\n        Query query = categoriesRef.orderByChild(&quot;parentID&quot;).equalTo(&quot;categories&quot;);\r\n        query.addValueEventListener(new ValueEventListener() {\r\n\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                categoriesArrayList.clear();\r\n                for (DataSnapshot data : snapshot.getChildren()) {\r\n\r\n                    Categories categories = data\r\n                            .getValue(Categories.class);\r\n                    assert categories != null;\r\n\r\n                    categories.setKey(data.getKey());\r\n\r\n                    categoriesArrayList.add(categories);\r\n                    System.out.println(&quot;1234&quot; + categories);\r\n\r\n                    String textContentID = categories.getTextContentIDForName();\r\n\r\n                    Query query = TranslationsRef.orderByChild(&quot;textContentID&quot;)\r\n                            .equalTo(textContentID);\r\n                    query.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                            for (DataSnapshot data : snapshot.getChildren()) {\r\n\r\n                                Translations translations = data.getValue(Translations.class);\r\n\r\n                                System.out.println(&quot;123&quot; + translations);\r\n                                categories.setTextContentIDForName(translations.getTranslation());\r\n\r\n                            }\r\n                            categoriesAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n```\r\n**This method is a solution** and it works well.\r\n\r\n\r\n[![enter image description here][1]][1]\r\n\r\nNow the textContentIDForName value has been replaced with the Translation value from Translations. This way i was able to fetch the translation text.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/zbpSe.png","title":"replacing data from one table with data from another model","body":"<h2>As it is difficult to use a common pattern, after fetching my entire Categories table, I tried to replace the textContentIDForName with the translation in my Translations table.</h2>\n<pre class=\"lang-java prettyprint-override\"><code>public void getAllCategories() {\n        FirebaseDatabase db = FirebaseDatabase.getInstance();\n        DatabaseReference categoriesRef = db.getReference(&quot;categories&quot;);\n        DatabaseReference TranslationsRef = db.getReference(&quot;translations&quot;);\n\n        Query query = categoriesRef.orderByChild(&quot;parentID&quot;).equalTo(&quot;categories&quot;);\n        query.addValueEventListener(new ValueEventListener() {\n\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                categoriesArrayList.clear();\n                for (DataSnapshot data : snapshot.getChildren()) {\n\n                    Categories categories = data\n                            .getValue(Categories.class);\n                    assert categories != null;\n\n                    categories.setKey(data.getKey());\n\n                    categoriesArrayList.add(categories);\n                    System.out.println(&quot;1234&quot; + categories);\n\n                    String textContentID = categories.getTextContentIDForName();\n\n                    Query query = TranslationsRef.orderByChild(&quot;textContentID&quot;)\n                            .equalTo(textContentID);\n                    query.addValueEventListener(new ValueEventListener() {\n                        @Override\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\n                            for (DataSnapshot data : snapshot.getChildren()) {\n\n                                Translations translations = data.getValue(Translations.class);\n\n                                System.out.println(&quot;123&quot; + translations);\n                                categories.setTextContentIDForName(translations.getTranslation());\n\n                            }\n                            categoriesAdapter.notifyDataSetChanged();\n                        }\n\n                        @Override\n                        public void onCancelled(@NonNull DatabaseError error) {\n\n                        }\n                    });\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n</code></pre>\n<p><strong>This method is a solution</strong> and it works well.</p>\n<p><a href=\"https://i.stack.imgur.com/zbpSe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zbpSe.png\" alt=\"enter image description here\" /></a></p>\n<p>Now the textContentIDForName value has been replaced with the Translation value from Translations. This way i was able to fetch the translation text.</p>\n"}],"owner":{"account_id":20294412,"reputation":115,"user_id":14885335,"display_name":"Droidbane"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73373440,"answer_count":1,"score":0,"last_activity_date":1660857693,"creation_date":1660594917,"question_id":73366074,"body_markdown":"[![enter image description here][1]][1]\r\n[![enter image description here][2]][2]\r\n[![enter image description here][3]][3]\r\n\r\nWhat I want is to combine my Categories and Translations tables while creating a data request from the database. or just to write the TextContentIDForName value with the Translation value in my Categories table.\r\n\r\nI never want to make any changes in my database. I just want to have it show me the translation texts when I want to write my categories on my page. I designed my database schema in this way, as I knew that the translated texts should be kept in a separate table.\r\n\r\nFirst of all I can&#39;t find any property that joins these two tables or looks like this property.\r\n\r\n\r\nIn short, I have a table for my categories and a translation table holding each language. Apart from these two tables, I have a TextContent table that I created to give IDs to the posts.\r\n\r\n## My query to pull all categories looks like this. #\r\n\r\n    public void getAllCategories() {\r\n        FirebaseDatabase db = FirebaseDatabase.getInstance();\r\n        DatabaseReference categoriesRef = db.getReference(&quot;categories&quot;);\r\n        DatabaseReference TranslationsRef = db.getReference(&quot;translations&quot;);\r\n\r\n        ArrayList&lt;Categories&gt; categoriesArrayList = new ArrayList&lt;&gt;();\r\n\r\n        Query query = categoriesRef.orderByChild(&quot;parentID&quot;).equalTo(&quot;categories&quot;);\r\n        query.addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                categoriesArrayList.clear();\r\n                for (DataSnapshot data : snapshot.getChildren()) {\r\n                    Categories categories = data.getValue(Categories.class);\r\n                    assert categories != null;\r\n\r\n                    categories.setKey(data.getKey());\r\n                    categoriesArrayList.add(categories);\r\n                }\r\n                categoriesAdapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n## If I want to add translation texts to my query of all categories. ##\r\n\r\nCreating two queries for the two tables and copying them into a common model would have helped me see all the information, but it&#39;s not very flexible. I need to create an extra model to join two tables.\r\n\r\n```java\r\npublic void getAllCategories() {\r\n        FirebaseDatabase db = FirebaseDatabase.getInstance();\r\n        DatabaseReference categoriesRef = db.getReference(&quot;categories&quot;);\r\n        DatabaseReference TranslationsRef = db.getReference(&quot;translations&quot;);\r\n\r\n        Query query = categoriesRef.orderByChild(&quot;parentID&quot;).equalTo(&quot;categories&quot;);\r\n        query.addValueEventListener(new ValueEventListener() {\r\n\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                categoriesArrayList.clear();\r\n                for (DataSnapshot data : snapshot.getChildren()) {\r\n\r\n                    CategoriesAndTranslations categoriesAndTranslations = data\r\n                            .getValue(CategoriesAndTranslations.class);\r\n                    assert categoriesAndTranslations != null;\r\n\r\n                    categoriesAndTranslations.setKey(data.getKey());\r\n\r\n                    categoriesArrayList.add(categoriesAndTranslations);\r\n                    System.out.println(&quot;1234&quot; + categoriesAndTranslations);\r\n\r\n                    String textContentID = categoriesAndTranslations.getTextContentID();\r\n\r\n                    Query query = TranslationsRef.orderByChild(&quot;textContentID&quot;)\r\n                            .equalTo(textContentID);\r\n                    query.addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                            for (DataSnapshot data : snapshot.getChildren()) {\r\n\r\n                                CategoriesAndTranslations categoriesAndTranslations = data\r\n                                        .getValue(CategoriesAndTranslations.class);\r\n                                System.out.println(&quot;123&quot; + categoriesAndTranslations);\r\n                                categoriesArrayList.add(categoriesAndTranslations);\r\n\r\n                            }\r\n                            categoriesAdapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                        }\r\n                    });\r\n                    categoriesAdapter.notifyDataSetChanged();\r\n\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n```\r\nAll data modeled by this method **will have a null value.** I do not know why it happened.\r\n\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/v4yBh.png\r\n  [2]: https://i.stack.imgur.com/sHeZT.png\r\n  [3]: https://i.stack.imgur.com/T0zCW.png","title":"replacing data from one table with data from another model","body":"<p><a href=\"https://i.stack.imgur.com/v4yBh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v4yBh.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/sHeZT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sHeZT.png\" alt=\"enter image description here\" /></a>\n<a href=\"https://i.stack.imgur.com/T0zCW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T0zCW.png\" alt=\"enter image description here\" /></a></p>\n<p>What I want is to combine my Categories and Translations tables while creating a data request from the database. or just to write the TextContentIDForName value with the Translation value in my Categories table.</p>\n<p>I never want to make any changes in my database. I just want to have it show me the translation texts when I want to write my categories on my page. I designed my database schema in this way, as I knew that the translated texts should be kept in a separate table.</p>\n<p>First of all I can't find any property that joins these two tables or looks like this property.</p>\n<p>In short, I have a table for my categories and a translation table holding each language. Apart from these two tables, I have a TextContent table that I created to give IDs to the posts.</p>\n<h2>My query to pull all categories looks like this.</h2>\n<pre><code>public void getAllCategories() {\n    FirebaseDatabase db = FirebaseDatabase.getInstance();\n    DatabaseReference categoriesRef = db.getReference(&quot;categories&quot;);\n    DatabaseReference TranslationsRef = db.getReference(&quot;translations&quot;);\n\n    ArrayList&lt;Categories&gt; categoriesArrayList = new ArrayList&lt;&gt;();\n\n    Query query = categoriesRef.orderByChild(&quot;parentID&quot;).equalTo(&quot;categories&quot;);\n    query.addValueEventListener(new ValueEventListener() {\n        @Override\n        public void onDataChange(@NonNull DataSnapshot snapshot) {\n            categoriesArrayList.clear();\n            for (DataSnapshot data : snapshot.getChildren()) {\n                Categories categories = data.getValue(Categories.class);\n                assert categories != null;\n\n                categories.setKey(data.getKey());\n                categoriesArrayList.add(categories);\n            }\n            categoriesAdapter.notifyDataSetChanged();\n        }\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n\n        }\n    });\n}\n</code></pre>\n<h2>If I want to add translation texts to my query of all categories.</h2>\n<p>Creating two queries for the two tables and copying them into a common model would have helped me see all the information, but it's not very flexible. I need to create an extra model to join two tables.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void getAllCategories() {\n        FirebaseDatabase db = FirebaseDatabase.getInstance();\n        DatabaseReference categoriesRef = db.getReference(&quot;categories&quot;);\n        DatabaseReference TranslationsRef = db.getReference(&quot;translations&quot;);\n\n        Query query = categoriesRef.orderByChild(&quot;parentID&quot;).equalTo(&quot;categories&quot;);\n        query.addValueEventListener(new ValueEventListener() {\n\n            @Override\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\n                categoriesArrayList.clear();\n                for (DataSnapshot data : snapshot.getChildren()) {\n\n                    CategoriesAndTranslations categoriesAndTranslations = data\n                            .getValue(CategoriesAndTranslations.class);\n                    assert categoriesAndTranslations != null;\n\n                    categoriesAndTranslations.setKey(data.getKey());\n\n                    categoriesArrayList.add(categoriesAndTranslations);\n                    System.out.println(&quot;1234&quot; + categoriesAndTranslations);\n\n                    String textContentID = categoriesAndTranslations.getTextContentID();\n\n                    Query query = TranslationsRef.orderByChild(&quot;textContentID&quot;)\n                            .equalTo(textContentID);\n                    query.addValueEventListener(new ValueEventListener() {\n                        @Override\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\n                            for (DataSnapshot data : snapshot.getChildren()) {\n\n                                CategoriesAndTranslations categoriesAndTranslations = data\n                                        .getValue(CategoriesAndTranslations.class);\n                                System.out.println(&quot;123&quot; + categoriesAndTranslations);\n                                categoriesArrayList.add(categoriesAndTranslations);\n\n                            }\n                            categoriesAdapter.notifyDataSetChanged();\n                        }\n\n                        @Override\n                        public void onCancelled(@NonNull DatabaseError error) {\n\n                        }\n                    });\n                    categoriesAdapter.notifyDataSetChanged();\n\n                }\n            }\n\n            @Override\n            public void onCancelled(@NonNull DatabaseError error) {\n\n            }\n        });\n    }\n</code></pre>\n<p>All data modeled by this method <strong>will have a null value.</strong> I do not know why it happened.</p>\n"},{"tags":["java","arraylist","binary-tree","breadth-first-search","tree-traversal"],"answers":[{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660857394,"creation_date":1660856993,"answer_id":73409470,"question_id":73408309,"body_markdown":"&gt;  I wonder why do we need a temporary ArrayList, since we can just add the head.val to the result list? It should be the same? \r\n\r\nYou could, but the result would be different.\r\n\r\nWith the current code, the returned array is a nested array, where node values are grouped per level in their own subarray. Note that `result.add(level)` adds *one* entry in the `result` array, which itself is an array.\r\n\r\nIf you would add the node&#39;s value directly to the result list, the returned array would be a flat array.","title":"traversal of binary tree using one single queue","body":"<blockquote>\n<p>I wonder why do we need a temporary ArrayList, since we can just add the head.val to the result list? It should be the same?</p>\n</blockquote>\n<p>You could, but the result would be different.</p>\n<p>With the current code, the returned array is a nested array, where node values are grouped per level in their own subarray. Note that <code>result.add(level)</code> adds <em>one</em> entry in the <code>result</code> array, which itself is an array.</p>\n<p>If you would add the node's value directly to the result list, the returned array would be a flat array.</p>\n"}],"owner":{"account_id":24054380,"reputation":11,"user_id":18032417,"display_name":"Mr.Frog"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":70,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660857503,"creation_date":1660849956,"question_id":73408309,"body_markdown":"The code below is one way to traverse the binary tree using one queue\r\n\r\n```\r\npublic List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root){\r\n    List result = new ArrayList();\r\n    \r\n    if(root == null){\r\n        return result; \r\n    }    \r\n    Queue&lt;TreeNode&gt; queue = new LinkedList&lt;TreeNode&gt;();\r\n    queue.offer(root);\r\n    \r\n    while(!queue.isEmpty()){\r\n        ArrayList&lt;Integer&gt; level = new ArrayList&lt;Integer&gt;();\r\n        \r\n        int size = queue.size();\r\n        for(int i=0; i&lt;size; i++){\r\n            TreeNode head = queue.poll();\r\n            level.add(head.val);            \r\n            if(head.left != null){\r\n                queue.offer(head.left);\r\n            }\r\n            if(head.right != null){\r\n                queue.offer(head.right);\r\n            }\r\n        }\r\n        result.add(level);\r\n    }\r\n    return result; \r\n}\r\n``` \r\n\r\nI understand the logic but I wonder why do we need a temporary ArrayList, since we can just add the head.val to the result list? It should be the same? Could anyone explain why we still add:\r\n  \r\n     ArrayList&lt;Integer&gt; level = new ArrayList&lt;Integer&gt;();\r\n","title":"traversal of binary tree using one single queue","body":"<p>The code below is one way to traverse the binary tree using one queue</p>\n<pre><code>public List&lt;List&lt;Integer&gt;&gt; levelOrder(TreeNode root){\n    List result = new ArrayList();\n    \n    if(root == null){\n        return result; \n    }    \n    Queue&lt;TreeNode&gt; queue = new LinkedList&lt;TreeNode&gt;();\n    queue.offer(root);\n    \n    while(!queue.isEmpty()){\n        ArrayList&lt;Integer&gt; level = new ArrayList&lt;Integer&gt;();\n        \n        int size = queue.size();\n        for(int i=0; i&lt;size; i++){\n            TreeNode head = queue.poll();\n            level.add(head.val);            \n            if(head.left != null){\n                queue.offer(head.left);\n            }\n            if(head.right != null){\n                queue.offer(head.right);\n            }\n        }\n        result.add(level);\n    }\n    return result; \n}\n</code></pre>\n<p>I understand the logic but I wonder why do we need a temporary ArrayList, since we can just add the head.val to the result list? It should be the same? Could anyone explain why we still add:</p>\n<pre><code> ArrayList&lt;Integer&gt; level = new ArrayList&lt;Integer&gt;();\n</code></pre>\n"},{"tags":["java","sql","oracle","jpa","jdbc"],"answers":[{"tags":[],"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660857150,"creation_date":1660857150,"answer_id":73409493,"question_id":73401951,"body_markdown":"It seems there are a couple of odd things going on here.\r\n\r\nFirstly, your stored procedure is odd in that it attempts to return the data from the cursor as both an `OUT` parameter and an implicit result. I don&#39;t know whether you have control over this stored procedure, but if you do, I suggest you modify the stored procedure to return the cursor either (a) via the `OUT` parameter or (b) via an implicit result, but not both. (My recommendation would be to return it via the `OUT` parameter, by removing the call to `DBMS_SQL.RETURN_RESULT`.)\r\n\r\nHowever, if you don&#39;t have the option to change the stored procedure, then you&#39;ll have to live with it returning an implicit result. It seems that returning the cursor via the implicit result overrides returning it via the `OUT` parameter.\r\n\r\nThe second odd thing is that it seems that the Oracle JDBC driver doesn&#39;t quite follow the JDBC standard for implicit results. The Oracle JDBC driver requires you to call `.getMoreResults()` before returning the first implicit result (Oracle provide example code &lt;a href=&quot;https://docs.oracle.com/database/121/JJDBC/getsta.htm#JJDBC29004&quot;&gt;here&lt;/a&gt;), whereas the JDBC standard states that &lt;a href=&quot;https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#execute-java.lang.String-&quot;&gt;you use `.getMoreResults()` to return subsequent results&lt;/a&gt;, suggesting that the first result should be available before you call `.getMoreResults()`. There&#39;s a discussion on this at the Oracle forums &lt;a href=&quot;https://community.oracle.com/tech/developers/discussion/3954915/oracle-12-1-jdbc-driver-doesnt-work-properly-with-dbms-sql-return-result&quot;&gt;here&lt;/a&gt;.\r\n\r\nTry calling `st.getMoreResults()`, check that this returns `true`, and then obtain the result set by calling `st.getResultSet()`. The following worked for me:\r\n```java\r\n    Connection conn = DataSourceUtils.getConnection(dataSource);\r\n    CallableStatement st = null;\r\n    ResultSet rs = null;\r\n    try {\r\n        st = conn.prepareCall( &quot;{call test_proc(?,?)}&quot; );\r\n        st.setString(1, &quot;test&quot;);\r\n        st.registerOutParameter( 2, OracleTypes.CURSOR );\r\n        boolean hadResults = st.execute();\r\n        System.out.println( hadResults ); // --&gt; always false\r\n        \r\n        System.out.println(st.getMoreResults()); // printed &#39;true&#39; for me.\r\n        rs = st.getResultSet();\r\n        while ( rs.next() )\r\n        {        \r\n            System.out.println( rs.getInt(1) );\r\n        }\r\n        st.close();\r\n    } catch (SQLException e) {\r\n        // TODO Auto-generated catch block\r\n        e.printStackTrace();\r\n    }\r\n```","title":"Why is my result of a java call to stored procedure in oracle null?","body":"<p>It seems there are a couple of odd things going on here.</p>\n<p>Firstly, your stored procedure is odd in that it attempts to return the data from the cursor as both an <code>OUT</code> parameter and an implicit result. I don't know whether you have control over this stored procedure, but if you do, I suggest you modify the stored procedure to return the cursor either (a) via the <code>OUT</code> parameter or (b) via an implicit result, but not both. (My recommendation would be to return it via the <code>OUT</code> parameter, by removing the call to <code>DBMS_SQL.RETURN_RESULT</code>.)</p>\n<p>However, if you don't have the option to change the stored procedure, then you'll have to live with it returning an implicit result. It seems that returning the cursor via the implicit result overrides returning it via the <code>OUT</code> parameter.</p>\n<p>The second odd thing is that it seems that the Oracle JDBC driver doesn't quite follow the JDBC standard for implicit results. The Oracle JDBC driver requires you to call <code>.getMoreResults()</code> before returning the first implicit result (Oracle provide example code <a href=\"https://docs.oracle.com/database/121/JJDBC/getsta.htm#JJDBC29004\" rel=\"nofollow noreferrer\">here</a>), whereas the JDBC standard states that <a href=\"https://docs.oracle.com/javase/8/docs/api/java/sql/Statement.html#execute-java.lang.String-\" rel=\"nofollow noreferrer\">you use <code>.getMoreResults()</code> to return subsequent results</a>, suggesting that the first result should be available before you call <code>.getMoreResults()</code>. There's a discussion on this at the Oracle forums <a href=\"https://community.oracle.com/tech/developers/discussion/3954915/oracle-12-1-jdbc-driver-doesnt-work-properly-with-dbms-sql-return-result\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>Try calling <code>st.getMoreResults()</code>, check that this returns <code>true</code>, and then obtain the result set by calling <code>st.getResultSet()</code>. The following worked for me:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Connection conn = DataSourceUtils.getConnection(dataSource);\n    CallableStatement st = null;\n    ResultSet rs = null;\n    try {\n        st = conn.prepareCall( &quot;{call test_proc(?,?)}&quot; );\n        st.setString(1, &quot;test&quot;);\n        st.registerOutParameter( 2, OracleTypes.CURSOR );\n        boolean hadResults = st.execute();\n        System.out.println( hadResults ); // --&gt; always false\n        \n        System.out.println(st.getMoreResults()); // printed 'true' for me.\n        rs = st.getResultSet();\n        while ( rs.next() )\n        {        \n            System.out.println( rs.getInt(1) );\n        }\n        st.close();\n    } catch (SQLException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n</code></pre>\n"}],"owner":{"account_id":25985512,"reputation":87,"user_id":19698558,"display_name":"Tennie"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":202,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73409493,"answer_count":1,"score":0,"last_activity_date":1660857150,"creation_date":1660820622,"question_id":73401951,"body_markdown":"I have following procedure that, when called with sqlplus:\r\n    \r\n    SQL&gt; exec test_proc(&#39;test_search&#39;, :varcursor);\r\nworks just fine and gives me the expected results (a list of ids from the table).\r\n\r\n    CREATE OR REPLACE PROCEDURE test_proc\r\n    \t(search_term IN varchar2,\r\n    \tc1 OUT SYS_REFCURSOR)\r\n    AS\r\n    BEGIN\r\n    \tOPEN c1 for\r\n    \tselect test.id \r\n    \t\tfrom test_table t\r\n    \t\tWHERE JSON_TEXTCONTAINS(t.test_col, &#39;$&#39;, search_term);\r\n    \tDBMS_SQL.RETURN_RESULT(c1);\r\n    END test_proc;\r\n\r\nHowever if called from my spring application with JPA/eclipselink the result is always null. \r\n\r\n    StoredProcedureQuery storedProcedure = em.createStoredProcedureQuery(&quot;test_proc&quot;)\r\n                .registerStoredProcedureParameter(1, String.class, ParameterMode.IN)\r\n                .registerStoredProcedureParameter(2, Class.class, ParameterMode.REF_CURSOR)\r\n                .setParameter(1, &quot;test&quot;);\r\n        // execute SP\r\n        storedProcedure.execute(); --&gt; true\r\n        List&lt;Object[]&gt; res = storedProcedure.getResultList();\r\n\r\nAnd directly over the jdbc driver it&#39;s also null.\r\n\r\n    Connection conn = DataSourceUtils.getConnection(dataSource);\r\n        CallableStatement st = null;\r\n        ResultSet rs = null;\r\n        try {\r\n            st = conn.prepareCall( &quot;{call test_proc(?,?)}&quot; );\r\n            st.setString(1, &quot;test&quot;);\r\n            st.registerOutParameter( 2, OracleTypes.CURSOR );\r\n            boolean hadResults = st.execute();\r\n            System.out.println( hadResults ); --&gt; always false\r\n            \r\n            rs = (ResultSet) st.getObject(2);\r\n            while ( rs.next() )\r\n            {        \r\n                System.out.println( rs.getInt(1) );\r\n            }\r\n            st.close();\r\n        } catch (SQLException e) {\r\n                // TODO Auto-generated catch block\r\n                e.printStackTrace();\r\n            }","title":"Why is my result of a java call to stored procedure in oracle null?","body":"<p>I have following procedure that, when called with sqlplus:</p>\n<pre><code>SQL&gt; exec test_proc('test_search', :varcursor);\n</code></pre>\n<p>works just fine and gives me the expected results (a list of ids from the table).</p>\n<pre><code>CREATE OR REPLACE PROCEDURE test_proc\n    (search_term IN varchar2,\n    c1 OUT SYS_REFCURSOR)\nAS\nBEGIN\n    OPEN c1 for\n    select test.id \n        from test_table t\n        WHERE JSON_TEXTCONTAINS(t.test_col, '$', search_term);\n    DBMS_SQL.RETURN_RESULT(c1);\nEND test_proc;\n</code></pre>\n<p>However if called from my spring application with JPA/eclipselink the result is always null.</p>\n<pre><code>StoredProcedureQuery storedProcedure = em.createStoredProcedureQuery(&quot;test_proc&quot;)\n            .registerStoredProcedureParameter(1, String.class, ParameterMode.IN)\n            .registerStoredProcedureParameter(2, Class.class, ParameterMode.REF_CURSOR)\n            .setParameter(1, &quot;test&quot;);\n    // execute SP\n    storedProcedure.execute(); --&gt; true\n    List&lt;Object[]&gt; res = storedProcedure.getResultList();\n</code></pre>\n<p>And directly over the jdbc driver it's also null.</p>\n<pre><code>Connection conn = DataSourceUtils.getConnection(dataSource);\n    CallableStatement st = null;\n    ResultSet rs = null;\n    try {\n        st = conn.prepareCall( &quot;{call test_proc(?,?)}&quot; );\n        st.setString(1, &quot;test&quot;);\n        st.registerOutParameter( 2, OracleTypes.CURSOR );\n        boolean hadResults = st.execute();\n        System.out.println( hadResults ); --&gt; always false\n        \n        rs = (ResultSet) st.getObject(2);\n        while ( rs.next() )\n        {        \n            System.out.println( rs.getInt(1) );\n        }\n        st.close();\n    } catch (SQLException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n</code></pre>\n"},{"tags":["java","spring-boot","junit","mockito","mockmvc"],"comments":[{"owner":{"account_id":9586004,"reputation":589,"user_id":7118750,"display_name":"Tim"},"score":1,"creation_date":1660857294,"post_id":73409429,"comment_id":129639303,"body_markdown":"This seems like the wrong usage of `HttpServletRequest` to me. Your controller constructor should not take in the `HttpServletRequest`, instead it should be your API method `getHappyBirthday` that accepts it.","body":"This seems like the wrong usage of <code>HttpServletRequest</code> to me. Your controller constructor should not take in the <code>HttpServletRequest</code>, instead it should be your API method <code>getHappyBirthday</code> that accepts it."},{"owner":{"account_id":3359594,"reputation":27,"user_id":2821694,"display_name":"user2821694"},"score":0,"creation_date":1660923433,"post_id":73409429,"comment_id":129656144,"body_markdown":"The classes were generated with swagger-codegen and that is how the classes were generated. Why do you think that is the wrong usage?","body":"The classes were generated with swagger-codegen and that is how the classes were generated. Why do you think that is the wrong usage?"},{"owner":{"account_id":9586004,"reputation":589,"user_id":7118750,"display_name":"Tim"},"score":0,"creation_date":1660927030,"post_id":73409429,"comment_id":129657212,"body_markdown":"Did some digging, and not really a wrong usage of it [link to other post](https://stackoverflow.com/questions/49680692/spring-mvc-can-i-autowire-httpservletrequest-in-restcontroller). I suppose it&#39;s just a way I was not familiar with, the more you know.","body":"Did some digging, and not really a wrong usage of it <a href=\"https://stackoverflow.com/questions/49680692/spring-mvc-can-i-autowire-httpservletrequest-in-restcontroller\">link to other post</a>. I suppose it&#39;s just a way I was not familiar with, the more you know."}],"owner":{"account_id":3359594,"reputation":27,"user_id":2821694,"display_name":"user2821694"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660856743,"creation_date":1660856743,"question_id":73409429,"body_markdown":"I am using MockMvc to test a controller. The controller has an ObjectMapper and HttpServletRequest as arguments. I instantiate the controller in my test class with these arguments. When  I use MockMvc to make the request, the Name @RequestParam is successfully passed to the controller. However outside of this, the request is null. The accept header is set on the MockMvc request as: \r\n```        \r\nmockMvc.perform(get(&quot;/birthday-cards?name=Jack&quot;).accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk()).andDo(print());\r\n```\r\nwhen the request is accessed in the controller, the request header is null. \r\n```\r\nString accept = request.getHeader(&quot;Accept&quot;); \r\n```\r\nI believe this is because once I get into the controller method body, the request is using the MockHttpServletRequest created when initializing the Controller in the test class. \r\n\r\nThe full code of the controller:\r\n\r\n```\r\n@Controller\r\npublic class HappyBirthdayApiController implements HappyBirthdayApi {\r\n\r\n    private final ObjectMapper objectMapper;\r\n\r\n    private final HttpServletRequest request;\r\n\r\n    @Autowired\r\n    public HappyBirthdayController(ObjectMapper objectMapper, HttpServletRequest request) {\r\n        this.objectMapper = objectMapper;\r\n        this.request = request;\r\n    }\r\n\r\n    @Override\r\n    public Optional&lt;ObjectMapper&gt; getObjectMapper() {\r\n        return Optional.ofNullable(objectMapper);\r\n    }\r\n\r\n    @Override\r\n    public Optional&lt;HttpServletRequest&gt; getRequest() {\r\n        return Optional.ofNullable(request);\r\n    }\r\n\r\n    @Override\r\n\tpublic ResponseEntity&lt;String&gt; getHappyBirthday(@ApiParam(value = &quot;Filter by name&quot;) @Valid @RequestParam(value = &quot;name&quot;, required = false) String name) {\r\n\t\t//Request is null!\r\n\t\tString accept = request.getHeader(&quot;Accept&quot;);\r\n\t\tif (accept == null || !accept.equals(MediaType.APPLICATION_JSON_VALUE))\r\n\t\t\tthrow new UnsupportedMediaTypeException(&quot;Accept header must be &quot; + MediaType.APPLICATION_JSON_VALUE);\r\n\t\t);\r\n\t\tString message = &quot;Happy Birthday &quot; + name; \r\n\t\treturn new ResponseEntity&lt;&gt;(message, HttpStatus.OK);\r\n\t}\r\n}\r\n```\r\n\r\nThe test class:\r\n```\r\npublic class BirthdayCardsApiControllerTest{\r\n    private MockMvc mockMvc;\r\n    private final MockHttpServletRequest mockHttpServletRequest = new MockHttpServletRequest();\r\n\r\n    @InjectMocks\r\n    private BirthdayCardsApiController controller;\r\n\r\n    @Before\r\n    public void setUp(){\r\n        controller = new BirthdayCardsApiController(new ObjectMapper(), mockHttpServletRequest);\r\n        MockitoAnnotations.initMocks(this);\r\n\r\n        mockMvc = MockMvcBuilders.standaloneSetup(controller).build();\r\n    }\r\n\r\n    @Test\r\n    public void getHappyBirthdayTest() throws Exception{\r\n        mockMvc.perform(get(&quot;/birthday-cards?name=Jack&quot;).accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk()).andDo(print());\r\n    }\r\n}\r\n```\r\n\r\n**Is there a way to share the same HttpServletRequest used by MockMvc and when instantiating the controller under test?**","title":"How to have MockMvc use the same HttpServletRequest as the Controller when HttpServletRequest is part of the constructor?","body":"<p>I am using MockMvc to test a controller. The controller has an ObjectMapper and HttpServletRequest as arguments. I instantiate the controller in my test class with these arguments. When  I use MockMvc to make the request, the Name @RequestParam is successfully passed to the controller. However outside of this, the request is null. The accept header is set on the MockMvc request as:</p>\n<pre><code>mockMvc.perform(get(&quot;/birthday-cards?name=Jack&quot;).accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk()).andDo(print());\n</code></pre>\n<p>when the request is accessed in the controller, the request header is null.</p>\n<pre><code>String accept = request.getHeader(&quot;Accept&quot;); \n</code></pre>\n<p>I believe this is because once I get into the controller method body, the request is using the MockHttpServletRequest created when initializing the Controller in the test class.</p>\n<p>The full code of the controller:</p>\n<pre><code>@Controller\npublic class HappyBirthdayApiController implements HappyBirthdayApi {\n\n    private final ObjectMapper objectMapper;\n\n    private final HttpServletRequest request;\n\n    @Autowired\n    public HappyBirthdayController(ObjectMapper objectMapper, HttpServletRequest request) {\n        this.objectMapper = objectMapper;\n        this.request = request;\n    }\n\n    @Override\n    public Optional&lt;ObjectMapper&gt; getObjectMapper() {\n        return Optional.ofNullable(objectMapper);\n    }\n\n    @Override\n    public Optional&lt;HttpServletRequest&gt; getRequest() {\n        return Optional.ofNullable(request);\n    }\n\n    @Override\n    public ResponseEntity&lt;String&gt; getHappyBirthday(@ApiParam(value = &quot;Filter by name&quot;) @Valid @RequestParam(value = &quot;name&quot;, required = false) String name) {\n        //Request is null!\n        String accept = request.getHeader(&quot;Accept&quot;);\n        if (accept == null || !accept.equals(MediaType.APPLICATION_JSON_VALUE))\n            throw new UnsupportedMediaTypeException(&quot;Accept header must be &quot; + MediaType.APPLICATION_JSON_VALUE);\n        );\n        String message = &quot;Happy Birthday &quot; + name; \n        return new ResponseEntity&lt;&gt;(message, HttpStatus.OK);\n    }\n}\n</code></pre>\n<p>The test class:</p>\n<pre><code>public class BirthdayCardsApiControllerTest{\n    private MockMvc mockMvc;\n    private final MockHttpServletRequest mockHttpServletRequest = new MockHttpServletRequest();\n\n    @InjectMocks\n    private BirthdayCardsApiController controller;\n\n    @Before\n    public void setUp(){\n        controller = new BirthdayCardsApiController(new ObjectMapper(), mockHttpServletRequest);\n        MockitoAnnotations.initMocks(this);\n\n        mockMvc = MockMvcBuilders.standaloneSetup(controller).build();\n    }\n\n    @Test\n    public void getHappyBirthdayTest() throws Exception{\n        mockMvc.perform(get(&quot;/birthday-cards?name=Jack&quot;).accept(MediaType.APPLICATION_JSON)).andExpect(status().isOk()).andDo(print());\n    }\n}\n</code></pre>\n<p><strong>Is there a way to share the same HttpServletRequest used by MockMvc and when instantiating the controller under test?</strong></p>\n"},{"tags":["java","spring","spring-mvc","model-view-controller"],"answers":[{"tags":[],"owner":{"account_id":222568,"reputation":11754,"user_id":481248,"display_name":"Jason"},"down_vote_count":1,"up_vote_count":84,"is_accepted":true,"score":83,"last_activity_date":1455225373,"creation_date":1383706221,"answer_id":19803181,"question_id":19803117,"body_markdown":"`@PathVariable` is used to tell Spring that part of the URI path is a value you want passed to your method. Is this what you want, or are the variables supposed to be form data posted to the URI?\r\n\r\nIf you want form data, use `@RequestParam` instead of `@PathVariable`.\r\n\r\nIf you want `@PathVariable`, you need to specify placeholders in the `@RequestMapping` entry to tell Spring where the path variables fit in the URI. For example, if you want to extract a path variable called `contentId`, you would use:\r\n\r\n`@RequestMapping(value = &quot;/whatever/{contentId}&quot;, method = RequestMethod.POST)`\r\n\r\n**Edit**: Additionally, if your path variable could contain a &#39;.&#39; and you want that part of the data, then you will need to tell Spring to grab everything, not just the stuff before the &#39;.&#39;:\r\n\r\n`@RequestMapping(value = &quot;/whatever/{contentId:.*}&quot;, method = RequestMethod.POST)`\r\n\r\nThis is because the default behaviour of Spring is to treat that part of the URL as if it is a file extension, and excludes it from variable extraction.","title":"Spring MVC Missing URI template variable","body":"<p><code>@PathVariable</code> is used to tell Spring that part of the URI path is a value you want passed to your method. Is this what you want, or are the variables supposed to be form data posted to the URI?</p>\n\n<p>If you want form data, use <code>@RequestParam</code> instead of <code>@PathVariable</code>.</p>\n\n<p>If you want <code>@PathVariable</code>, you need to specify placeholders in the <code>@RequestMapping</code> entry to tell Spring where the path variables fit in the URI. For example, if you want to extract a path variable called <code>contentId</code>, you would use:</p>\n\n<p><code>@RequestMapping(value = \"/whatever/{contentId}\", method = RequestMethod.POST)</code></p>\n\n<p><strong>Edit</strong>: Additionally, if your path variable could contain a '.' and you want that part of the data, then you will need to tell Spring to grab everything, not just the stuff before the '.':</p>\n\n<p><code>@RequestMapping(value = \"/whatever/{contentId:.*}\", method = RequestMethod.POST)</code></p>\n\n<p>This is because the default behaviour of Spring is to treat that part of the URL as if it is a file extension, and excludes it from variable extraction.</p>\n"},{"tags":[],"owner":{"account_id":5865743,"reputation":2651,"user_id":4619784,"display_name":"Hany Sakr"},"down_vote_count":0,"up_vote_count":36,"is_accepted":false,"score":36,"last_activity_date":1580709309,"creation_date":1580655205,"answer_id":60027279,"question_id":19803117,"body_markdown":"I got this error for a stupid mistake, the variable name in the @PathVariable wasn&#39;t matching the one in the @RequestMapping\r\n\r\nFor example\r\n\r\n    @RequestMapping(value = &quot;/whatever/{**contentId**}&quot;, method = RequestMethod.POST)\r\n    public … method(@PathVariable Integer **contentID**){\r\n    }\r\n\r\nIt may help others\r\n","title":"Spring MVC Missing URI template variable","body":"<p>I got this error for a stupid mistake, the variable name in the @PathVariable wasn't matching the one in the @RequestMapping</p>\n\n<p>For example</p>\n\n<pre><code>@RequestMapping(value = \"/whatever/{**contentId**}\", method = RequestMethod.POST)\npublic … method(@PathVariable Integer **contentID**){\n}\n</code></pre>\n\n<p>It may help others</p>\n"},{"tags":[],"owner":{"account_id":11204140,"reputation":387,"user_id":8220268,"display_name":"Abhilash Ramteke"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1611538612,"creation_date":1611538612,"answer_id":65877888,"question_id":19803117,"body_markdown":"This error may happen when mapping variables you defined in REST definition do not match with @PathVariable names.\r\n\r\nExample:\r\nSuppose you defined in the REST definition\r\n\r\n    @GetMapping(value = &quot;/{appId}&quot;, produces = &quot;application/json&quot;, consumes = &quot;application/json&quot;)\r\n\r\nThen during the definition of the function, it should be\r\n\r\n    public ResponseEntity&lt;List&gt; getData(@PathVariable String appId)\r\n\r\nThis error may occur when you use any other variable other than defined in the REST controller definition with @PathVariable. \r\nLike, the below code will raise the error as ID is different than appId variable name:\r\n\r\n    public ResponseEntity&lt;List&gt; getData(@PathVariable String ID)\r\n\r\n ","title":"Spring MVC Missing URI template variable","body":"<p>This error may happen when mapping variables you defined in REST definition do not match with @PathVariable names.</p>\n<p>Example:\nSuppose you defined in the REST definition</p>\n<pre><code>@GetMapping(value = &quot;/{appId}&quot;, produces = &quot;application/json&quot;, consumes = &quot;application/json&quot;)\n</code></pre>\n<p>Then during the definition of the function, it should be</p>\n<pre><code>public ResponseEntity&lt;List&gt; getData(@PathVariable String appId)\n</code></pre>\n<p>This error may occur when you use any other variable other than defined in the REST controller definition with @PathVariable.\nLike, the below code will raise the error as ID is different than appId variable name:</p>\n<pre><code>public ResponseEntity&lt;List&gt; getData(@PathVariable String ID)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18116253,"reputation":458,"user_id":13172872,"display_name":"Olaru Alina"},"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1660856089,"creation_date":1648371381,"answer_id":71634950,"question_id":19803117,"body_markdown":"My problem was that the name of the **parameter** from the method was **different** from the one passed **in @GetMapping**.\r\nThose should be **identical**, otherwise there will be this kind of silent error.\r\n\r\n```java\r\n@GetMapping(&quot;/{formId}&quot;) // Must be the same as the PathVariable\r\n    public ResponseEntity&lt;Form&gt; getFormById(@PathVariable Long formId){\r\n        return new ResponseEntity&lt;Form&gt;(this.formsService.getById(formId), HttpStatus.OK);\r\n    }\r\n```","title":"Spring MVC Missing URI template variable","body":"<p>My problem was that the name of the <strong>parameter</strong> from the method was <strong>different</strong> from the one passed <strong>in @GetMapping</strong>.\nThose should be <strong>identical</strong>, otherwise there will be this kind of silent error.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/{formId}&quot;) // Must be the same as the PathVariable\n    public ResponseEntity&lt;Form&gt; getFormById(@PathVariable Long formId){\n        return new ResponseEntity&lt;Form&gt;(this.formsService.getById(formId), HttpStatus.OK);\n    }\n</code></pre>\n"}],"owner":{"account_id":287105,"reputation":5584,"user_id":586731,"accept_rate":89,"display_name":"devdar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":174762,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"accepted_answer_id":19803181,"answer_count":4,"score":34,"last_activity_date":1660856089,"creation_date":1383705812,"question_id":19803117,"body_markdown":"I have a `Controller` class with a function that saves a record to the Database. I am passing several parameters to the `Controller` function however i think i may be writing the `@RequestMapping` incorrectly. Under is the code\r\n\r\n**Controller**\r\n\r\n     @RequestMapping(value=&quot;createRoadBlock.htm&quot;, method = RequestMethod.POST)\r\n\t public @ResponseBody Integer createRoadBlock(@RequestParam String purpose, @RequestParam String userName,\r\n\t\t\t\t\t\t\t\t\t\t\t\t  @RequestParam  int status, @RequestParam double latAdd,\r\n\t\t\t\t\t\t\t\t\t\t\t\t  @RequestParam double longAdd, HttpServletRequest request,  \r\n\t\t\t\t\t\t\t\t\t\t\t\t  HttpServletResponse response) {\r\n\t\t \r\n    \t\t int roadBlockId = 0;\r\n    \t\ttry{\r\n    \t\t\t\r\n    \t\t\troadBlockId = roadBlockManager.saveRoadBlock(purpose, userName, status,latAdd,longAdd);\r\n    \t\t\tlogger.info(&quot;Create Road Block Successful roadBlockId &quot;+ roadBlockId);\r\n    \t\t\t\r\n    \t\t\treturn roadBlockId;\r\n    \t\t\t\r\n    \t\t}catch(Exception e){\r\n    \t\t\tlogger.error(&quot;Exception Occured In Road Block Controller &quot;+e.getMessage());\r\n    \t\t\treturn roadBlockId;\r\n    \t\t\t\r\n    \t\t} \r\n    \t\t \r\n    \t }\r\n\r\n**Ajax Request**\r\n\r\n    $.ajax({\r\n    \ttype:&#39;POST&#39;,\r\n    \turl:&#39;createRoadBlock.htm&#39;,\r\n    \tcontentType:&quot;application/json&quot;,\r\n    \tasync:false,\r\n    \tcache:false,\r\n            data:{purpose:f_purpose, userName:f_userName,status: f_status,latAdd: f_latAdd, longAdd:f_lngAdd},\r\n    \tdataType:&#39;json&#39;\r\n    \t\t\r\n    \t}).success(function(recordId){ \r\n    \t            console.log(&#39;Road Block created with id &#39; + recordId);\r\n    \t});\r\n\r\n\r\n\r\n**Error Log**\r\n\r\n    Controller [com.crimetrack.web.RoadBlockController]\r\n    Method [public java.lang.Integer com.crimetrack.web.RoadBlockController.createRoadBlock(java.lang.String,java.lang.String,int,double,double,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)]\r\n    \r\n    org.springframework.web.bind.MissingServletRequestParameterException: Required String parameter &#39;purpose&#39; is not present\r\n    \tat org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:201)\r\n    \tat org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:90)\r\n    \tat org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)\r\n    \tat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\r\n    \tat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\r\n    \tat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\r\n    \tat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\r\n    \tat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\r\n    \tat javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\r\n    \tat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\r\n    \tat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\r\n    \tat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\r\n    \tat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\r\n    \tat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\r\n    \tat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)","title":"Spring MVC Missing URI template variable","body":"<p>I have a <code>Controller</code> class with a function that saves a record to the Database. I am passing several parameters to the <code>Controller</code> function however i think i may be writing the <code>@RequestMapping</code> incorrectly. Under is the code</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code> @RequestMapping(value=\"createRoadBlock.htm\", method = RequestMethod.POST)\n public @ResponseBody Integer createRoadBlock(@RequestParam String purpose, @RequestParam String userName,\n                                              @RequestParam  int status, @RequestParam double latAdd,\n                                              @RequestParam double longAdd, HttpServletRequest request,  \n                                              HttpServletResponse response) {\n\n         int roadBlockId = 0;\n        try{\n\n            roadBlockId = roadBlockManager.saveRoadBlock(purpose, userName, status,latAdd,longAdd);\n            logger.info(\"Create Road Block Successful roadBlockId \"+ roadBlockId);\n\n            return roadBlockId;\n\n        }catch(Exception e){\n            logger.error(\"Exception Occured In Road Block Controller \"+e.getMessage());\n            return roadBlockId;\n\n        } \n\n     }\n</code></pre>\n\n<p><strong>Ajax Request</strong></p>\n\n<pre><code>$.ajax({\n    type:'POST',\n    url:'createRoadBlock.htm',\n    contentType:\"application/json\",\n    async:false,\n    cache:false,\n        data:{purpose:f_purpose, userName:f_userName,status: f_status,latAdd: f_latAdd, longAdd:f_lngAdd},\n    dataType:'json'\n\n    }).success(function(recordId){ \n                console.log('Road Block created with id ' + recordId);\n    });\n</code></pre>\n\n<p><strong>Error Log</strong></p>\n\n<pre><code>Controller [com.crimetrack.web.RoadBlockController]\nMethod [public java.lang.Integer com.crimetrack.web.RoadBlockController.createRoadBlock(java.lang.String,java.lang.String,int,double,double,javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)]\n\norg.springframework.web.bind.MissingServletRequestParameterException: Required String parameter 'purpose' is not present\n    at org.springframework.web.method.annotation.RequestParamMethodArgumentResolver.handleMissingValue(RequestParamMethodArgumentResolver.java:201)\n    at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:90)\n    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)\n    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:728)\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:171)\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":1,"creation_date":1660852445,"post_id":73408702,"comment_id":129637962,"body_markdown":"One single iteration does not require any loop. Just run your code.\nSo omit the for, just have the o stuff`","body":"One single iteration does not require any loop. Just run your code. So omit the for, just have the o stuff`"},{"owner":{"account_id":6358642,"reputation":6528,"user_id":4934937,"display_name":"maio290"},"score":0,"creation_date":1660852460,"post_id":73408702,"comment_id":129637965,"body_markdown":"So you want every element to be accessible only once using your iterate method? Just store a boolean into your interface and set it to true after iterating over it?","body":"So you want every element to be accessible only once using your iterate method? Just store a boolean into your interface and set it to true after iterating over it?"},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1660852704,"post_id":73408702,"comment_id":129638044,"body_markdown":"Or you might be thinking about either a Stream or an Iterator?\nhttps://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Iterator.html","body":"Or you might be thinking about either a Stream or an Iterator? <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/Iterator.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/17/docs/api/java.base/java/ut&zwnj;&#8203;il/&hellip;</a>"},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1660858411,"post_id":73408702,"comment_id":129639555,"body_markdown":"If you want to iterate over the thing with an [enhanced `for` loop](https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.14.2) (as you are doing in the method `oneShotIterate`) then it has to be `Iterable`. There is no &quot;one-shot iterable&quot; interface or other more general interface than `Iterable` in Java&#39;s standard library.","body":"If you want to iterate over the thing with an <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.14.2\" rel=\"nofollow noreferrer\">enhanced <code>for</code> loop</a> (as you are doing in the method <code>oneShotIterate</code>) then it has to be <code>Iterable</code>. There is no &quot;one-shot iterable&quot; interface or other more general interface than <code>Iterable</code> in Java&#39;s standard library."}],"answers":[{"tags":[],"owner":{"account_id":465573,"reputation":192694,"user_id":869736,"accept_rate":82,"display_name":"Louis Wasserman"},"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1660855624,"creation_date":1660853618,"answer_id":73408917,"question_id":73408702,"body_markdown":"The specific interface you desire, that supports a `for` loop and does not carry an implication of supporting multiple iterations, does _not exist_ in Java.\r\n\r\n`Iterator` and `Stream` are each single-use, but you must do some work to get them from an `Iterable`.\r\n\r\nI am sorry if this is not the answer you hoped for, but it&#39;s the true answer.","title":"OneShot Iterable in Java","body":"<p>The specific interface you desire, that supports a <code>for</code> loop and does not carry an implication of supporting multiple iterations, does <em>not exist</em> in Java.</p>\n<p><code>Iterator</code> and <code>Stream</code> are each single-use, but you must do some work to get them from an <code>Iterable</code>.</p>\n<p>I am sorry if this is not the answer you hoped for, but it's the true answer.</p>\n"},{"tags":[],"owner":{"account_id":55989,"reputation":17809,"user_id":167745,"accept_rate":76,"display_name":"Stewart"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660855934,"creation_date":1660855934,"answer_id":73409302,"question_id":73408702,"body_markdown":"Do you mean something like this - an `Iterable` with only one item?\r\n\r\n    Iterable&lt;Thing&gt; iterable = java.util.Collections.singleton( myThing );\r\n\r\nIf you mean, you want an `Iterable` to only be iterated once, then what behaviour are you expecting upon a second iteration? An `OnlyOnceException` to be thrown?","title":"OneShot Iterable in Java","body":"<p>Do you mean something like this - an <code>Iterable</code> with only one item?</p>\n<pre><code>Iterable&lt;Thing&gt; iterable = java.util.Collections.singleton( myThing );\n</code></pre>\n<p>If you mean, you want an <code>Iterable</code> to only be iterated once, then what behaviour are you expecting upon a second iteration? An <code>OnlyOnceException</code> to be thrown?</p>\n"}],"owner":{"account_id":12069042,"reputation":3,"user_id":8825032,"display_name":"Vasily Ilin"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73408917,"answer_count":2,"score":0,"last_activity_date":1660855934,"creation_date":1660852270,"question_id":73408702,"body_markdown":"What is the name of the interface in Java that allows a single iteration? `Iterable` allows  multiple iterations AFAIK. My use case is below.\r\n\r\n```\r\nprivate static void iterateOverArray(double[] values) {\r\n    OneShotIterable&lt;Double&gt; valuesIterable = Arrays.stream(values);\r\n    oneShotIterate(valuesIterable);\r\n}\r\n\r\nprivate static void oneShotIterate(OneShotIterable&lt;Double&gt; valuesIterable) {\r\n    for (double value : valuesIterable) {\r\n        // do stuff\r\n    }\r\n}\r\n```\r\n\r\nI know I can iterate over `double[] values` but I want to accept the most general input I can.","title":"OneShot Iterable in Java","body":"<p>What is the name of the interface in Java that allows a single iteration? <code>Iterable</code> allows  multiple iterations AFAIK. My use case is below.</p>\n<pre><code>private static void iterateOverArray(double[] values) {\n    OneShotIterable&lt;Double&gt; valuesIterable = Arrays.stream(values);\n    oneShotIterate(valuesIterable);\n}\n\nprivate static void oneShotIterate(OneShotIterable&lt;Double&gt; valuesIterable) {\n    for (double value : valuesIterable) {\n        // do stuff\n    }\n}\n</code></pre>\n<p>I know I can iterate over <code>double[] values</code> but I want to accept the most general input I can.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":39574,"reputation":24267,"user_id":114226,"accept_rate":79,"display_name":"PeterMmm"},"score":3,"creation_date":1660240705,"post_id":73324914,"comment_id":129492286,"body_markdown":"`@Transactional` on `private` methods has no effect. Good reading here https://codete.com/blog/5-common-spring-transactional-pitfalls .","body":"<code>@Transactional</code> on <code>private</code> methods has no effect. Good reading here <a href=\"https://codete.com/blog/5-common-spring-transactional-pitfalls\" rel=\"nofollow noreferrer\">codete.com/blog/5-common-spring-transactional-pitfalls</a> ."},{"owner":{"account_id":7119515,"reputation":6055,"user_id":5444618,"accept_rate":83,"display_name":"Guillaume F."},"score":0,"creation_date":1660867930,"post_id":73324914,"comment_id":129641364,"body_markdown":"In addition, `@Transactional` already rollback if an exception is thrown through the transaction proxy. There is actually a parameter to **not** rollback, but this is not the default behavior.","body":"In addition, <code>@Transactional</code> already rollback if an exception is thrown through the transaction proxy. There is actually a parameter to <b>not</b> rollback, but this is not the default behavior."}],"owner":{"account_id":964015,"reputation":2235,"user_id":987795,"accept_rate":82,"display_name":"haydnD"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":31,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1660855786,"creation_date":1660240083,"question_id":73324914,"body_markdown":"I&#39;m trying to use the **@transactional** feature from **Spring Boot** for rollbacks.\r\n\r\nI have a controller that calls a method which has a few sub methods it calls before inserting records into db. I&#39;m putting the `**@transactional**` declaration above a parent method like the *sudo codebelow*. \r\n\r\nMy expectation is that the db inserts from `processAB()` method (*sudo code below*) would be reverted upon exception. \r\n\r\n    //controller\r\n    public StuffEntity&lt;List&lt;string&gt;&gt; processLogic(param1, param2){\r\n       parentMethod(param1,param2);\r\n    }\r\n\r\n    @Transactional\r\n    private void parentMethod(Date processD, String processS){\r\n       // some business logic code\r\n       processE(processD, processS);\r\n    }\r\n    \r\n    private void processE(Date processingD, String processingS){\r\n       // additional business logic \r\n       try{\r\n         if(noProcessErrors){\r\n       handleSuccess(a, b);\r\n       }else{\r\n       // handles error\r\n       handleProcessErrors(a,b);\r\n       }catch (Exception e){\r\n       Log(e);}\r\n    }\r\n    \r\n    public void handleSuccess(a,b) throws CustomException {\r\n       // success logic\r\n       processAB();\r\n    }\r\n\r\n    public void processAB() throws CustomException {\r\n       // update db\r\n       throw exception;  // for test\r\n    }","title":"How do I get Java Spring Boot @transactional to work with rollbacks?","body":"<p>I'm trying to use the <strong>@transactional</strong> feature from <strong>Spring Boot</strong> for rollbacks.</p>\n<p>I have a controller that calls a method which has a few sub methods it calls before inserting records into db. I'm putting the <code>**@transactional**</code> declaration above a parent method like the <em>sudo codebelow</em>.</p>\n<p>My expectation is that the db inserts from <code>processAB()</code> method (<em>sudo code below</em>) would be reverted upon exception.</p>\n<pre><code>//controller\npublic StuffEntity&lt;List&lt;string&gt;&gt; processLogic(param1, param2){\n   parentMethod(param1,param2);\n}\n\n@Transactional\nprivate void parentMethod(Date processD, String processS){\n   // some business logic code\n   processE(processD, processS);\n}\n\nprivate void processE(Date processingD, String processingS){\n   // additional business logic \n   try{\n     if(noProcessErrors){\n   handleSuccess(a, b);\n   }else{\n   // handles error\n   handleProcessErrors(a,b);\n   }catch (Exception e){\n   Log(e);}\n}\n\npublic void handleSuccess(a,b) throws CustomException {\n   // success logic\n   processAB();\n}\n\npublic void processAB() throws CustomException {\n   // update db\n   throw exception;  // for test\n}\n</code></pre>\n"},{"tags":["java","data-structures","linked-list"],"comments":[{"owner":{"account_id":9586004,"reputation":589,"user_id":7118750,"display_name":"Tim"},"score":0,"creation_date":1660850284,"post_id":73408273,"comment_id":129637358,"body_markdown":"How did you try to debug the issue?\n Put some breakpoints in places while stepping through the code and have a look at the values that are in the variables and what the code is actually doing.","body":"How did you try to debug the issue?  Put some breakpoints in places while stepping through the code and have a look at the values that are in the variables and what the code is actually doing."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1660852342,"post_id":73408273,"comment_id":129637935,"body_markdown":"Problem is in `deleteFirst` - so even though the output shows `2 7` which seems correct, in fact the `2` element has a `next` of null so your list is corrupt.  Subsequent operations would yield unexpected results.  In `deleteFirst` the last line is suspect `temp.next = null;` when `temp` is already set to the next node (2).  Better diagnostics would include &quot;walking&quot; the list.","body":"Problem is in <code>deleteFirst</code> - so even though the output shows <code>2 7</code> which seems correct, in fact the <code>2</code> element has a <code>next</code> of null so your list is corrupt.  Subsequent operations would yield unexpected results.  In <code>deleteFirst</code> the last line is suspect <code>temp.next = null;</code> when <code>temp</code> is already set to the next node (2).  Better diagnostics would include &quot;walking&quot; the list."}],"answers":[{"tags":[],"owner":{"account_id":26043497,"reputation":1,"user_id":19747838,"display_name":"Jeffrey Luo"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660850766,"creation_date":1660850512,"answer_id":73408418,"question_id":73408273,"body_markdown":"While I&#39;m not sure if you&#39;ve kept track of `last` properly, your logic in `deleteLast()` is unnecessarily complicated. You could easily just loop until `curr.next.next` is null then set `curr.next` to null and set `last` to `curr`.\r\n\r\nSomething like this:\r\n\r\n    public static void deleteLast() {\r\n        node curr = first;\r\n        while (curr.next.next != null) {\r\n            curr = curr.next;\r\n        }\r\n        curr.next = null;\r\n        last = curr;\r\n    }\r\n\r\nSince you haven&#39;t shared exactly what the error is, there could be other reasons why your code doesn&#39;t work.","title":"LinkedList implementation, where&#39;s the wrong in deleteLast() method","body":"<p>While I'm not sure if you've kept track of <code>last</code> properly, your logic in <code>deleteLast()</code> is unnecessarily complicated. You could easily just loop until <code>curr.next.next</code> is null then set <code>curr.next</code> to null and set <code>last</code> to <code>curr</code>.</p>\n<p>Something like this:</p>\n<pre><code>public static void deleteLast() {\n    node curr = first;\n    while (curr.next.next != null) {\n        curr = curr.next;\n    }\n    curr.next = null;\n    last = curr;\n}\n</code></pre>\n<p>Since you haven't shared exactly what the error is, there could be other reasons why your code doesn't work.</p>\n"},{"tags":[],"owner":{"account_id":7142980,"reputation":323253,"user_id":5459839,"display_name":"trincot"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1660852782,"creation_date":1660852782,"answer_id":73408774,"question_id":73408273,"body_markdown":"The problem is in `deleteFirst`: it always truncates the list to be at most one node.\r\n\r\nThe final statement `temp.next = null` should be removed, as it is identical to doing `first.next = null`. This is the correction:\r\n\r\n```\r\n    public static void deleteFirst() {\r\n        Node temp = first.next;\r\n        first.next = null;\r\n        first = temp;\r\n    }\r\n```\r\n\r\nBut there should be no need to set the `next` member to `null` of the node that is being removed. It could just be:\r\n\r\n```\r\n    public static void deleteFirst() {\r\n        first = first.next;\r\n    }\r\n```","title":"LinkedList implementation, where&#39;s the wrong in deleteLast() method","body":"<p>The problem is in <code>deleteFirst</code>: it always truncates the list to be at most one node.</p>\n<p>The final statement <code>temp.next = null</code> should be removed, as it is identical to doing <code>first.next = null</code>. This is the correction:</p>\n<pre><code>    public static void deleteFirst() {\n        Node temp = first.next;\n        first.next = null;\n        first = temp;\n    }\n</code></pre>\n<p>But there should be no need to set the <code>next</code> member to <code>null</code> of the node that is being removed. It could just be:</p>\n<pre><code>    public static void deleteFirst() {\n        first = first.next;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660853271,"creation_date":1660853271,"answer_id":73408864,"question_id":73408273,"body_markdown":"@trincot has the correct answer - in my testing it seemed helpful to add a &quot;walk the list&quot; to uncover issues which you had.  So here&#39;s that method:\r\n\r\n    public static void walkList() {\r\n        Node n = first;\r\n        System.out.print(&quot;Walk: &quot;);\r\n        while (n != null) {\r\n            System.out.print(n.value+&quot; &quot;);\r\n            n = n.next;\r\n        }\r\n        System.out.println();\r\n    }\r\n\r\nAdding a call to `walkList` after each operation yields a &quot;before fix&quot; and &quot;after fix&quot;:\r\n\r\nBefore Fix\r\n----------\r\n\r\n\t-----First And Last Node-----\r\n\t1\r\n\t7\r\n\tWalk: 1 2 3 4 5 6 7 \r\n\t----After Deleting 1st Node------\r\n\t2\r\n\t7\r\n\tWalk: 2 \r\n\t-----After Deleting Last Node-----\r\n\t2\r\n\t2\r\n\tWalk: 2 \r\n\t-----After Deleting Last Node-----\r\n\t2\r\n\t2\r\n\tWalk: 2 \r\n\r\n\r\nAfter Fix\r\n---------\r\n\r\n\t-----First And Last Node-----\r\n\t1\r\n\t7\r\n\tWalk: 1 2 3 4 5 6 7 \r\n\t----After Deleting 1st Node------\r\n\t2\r\n\t7\r\n\tWalk: 2 3 4 5 6 7 \r\n\t-----After Deleting Last Node-----\r\n\t2\r\n\t6\r\n\tWalk: 2 3 4 5 6 \r\n\t-----After Deleting Last Node-----\r\n\t2\r\n\t5\r\n\tWalk: 2 3 4 5 \r\n\r\n\r\n","title":"LinkedList implementation, where&#39;s the wrong in deleteLast() method","body":"<p>@trincot has the correct answer - in my testing it seemed helpful to add a &quot;walk the list&quot; to uncover issues which you had.  So here's that method:</p>\n<pre><code>public static void walkList() {\n    Node n = first;\n    System.out.print(&quot;Walk: &quot;);\n    while (n != null) {\n        System.out.print(n.value+&quot; &quot;);\n        n = n.next;\n    }\n    System.out.println();\n}\n</code></pre>\n<p>Adding a call to <code>walkList</code> after each operation yields a &quot;before fix&quot; and &quot;after fix&quot;:</p>\n<h2>Before Fix</h2>\n<pre><code>-----First And Last Node-----\n1\n7\nWalk: 1 2 3 4 5 6 7 \n----After Deleting 1st Node------\n2\n7\nWalk: 2 \n-----After Deleting Last Node-----\n2\n2\nWalk: 2 \n-----After Deleting Last Node-----\n2\n2\nWalk: 2 \n</code></pre>\n<h2>After Fix</h2>\n<pre><code>-----First And Last Node-----\n1\n7\nWalk: 1 2 3 4 5 6 7 \n----After Deleting 1st Node------\n2\n7\nWalk: 2 3 4 5 6 7 \n-----After Deleting Last Node-----\n2\n6\nWalk: 2 3 4 5 6 \n-----After Deleting Last Node-----\n2\n5\nWalk: 2 3 4 5 \n</code></pre>\n"}],"owner":{"account_id":17932865,"reputation":323,"user_id":13029824,"display_name":"piedpipr"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":89,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":3,"score":0,"last_activity_date":1660853271,"creation_date":1660849725,"question_id":73408273,"body_markdown":"I implemented LikedList in Java, everything working fine except deleteLast() method. I am relatively new, so failed debugging the issue despite being so trivial a problem\r\n\r\nThis is my implementation code in Java\r\nWhere did I make the mistake?\r\n```\r\npackage linkedlist;\r\n\r\npublic class LinkedList {\r\n    private static Node first;\r\n    private static Node last;\r\n\r\n    private static class Node {\r\n        private int value;\r\n        private Node next;\r\n\r\n\r\n        public Node(int val, Node nxt) {\r\n            this.value = val;\r\n            this.next = nxt;\r\n        }\r\n\r\n        public Node(int val) {\r\n            this.value = val;\r\n        }\r\n\r\n\r\n        public static void main(String[] args) {\r\n            addFirst(7);\r\n            addFirst(6);\r\n            addFirst(5);\r\n            addFirst(4);\r\n            addFirst(3);\r\n            addFirst(2);\r\n            addFirst(1);\r\n            System.out.println(&quot;-----First And Last Node-----&quot;);\r\n            System.out.println(first.value);\r\n            System.out.println(last.value);\r\n            deleteFirst();\r\n            System.out.println(&quot;----After Deleting 1st Node------&quot;);\r\n            System.out.println(first.value);\r\n            System.out.println(last.value);\r\n            deleteLast();\r\n            System.out.println(&quot;-----After Deleting Last Node-----&quot;);\r\n            System.out.println(first.value);\r\n            System.out.println(last.value);\r\n            deleteLast();\r\n            System.out.println(&quot;-----After Deleting Last Node-----&quot;);\r\n            System.out.println(first.value);\r\n            System.out.println(last.value);\r\n        }\r\n\r\n        public static void addFirst(int val) {\r\n            if (first == null) {\r\n                first = last = new Node(val, null);\r\n            } else {\r\n                first = new Node(val, first);\r\n            }\r\n        }\r\n        public static void addLast(int val) {\r\n            if (first == null) {\r\n                first = last = new Node(val, null);\r\n            } else {\r\n                last.next = new Node(val, null);\r\n                last = last.next;\r\n            }\r\n        }\r\n\r\n        public static void deleteFirst() {\r\n            Node temp = first.next;\r\n            first.next = null;\r\n            first = temp;\r\n            temp.next = null;\r\n        }\r\n\r\n        public static void deleteLast() {\r\n            Node current = first;\r\n            Node newLast = first;\r\n            while (current != null) {\r\n                if(current == last) break;\r\n                newLast = current;\r\n                current = current.next;\r\n            }\r\n            newLast.next = null;\r\n            last = newLast;\r\n\r\n        }\r\n\r\n        public static int indexOf(int val) {\r\n            Node current = first;\r\n            int index = 0;\r\n            while (current.value != val) {\r\n                current = current.next;\r\n                index++;\r\n            }\r\n            return index;\r\n        }\r\n    }\r\n}\r\n\r\n\r\n```\r\n\r\n------------------------------------------------------------------------------------------\r\nThe way the code is, whenever I run it the 1st and last node becomes of the same value, like for the above example code, after deleteLast() method 1st and last both nodes become 2 or having the value 2, which essentially means they are the same exact nodes\r\n\r\nOutput\r\n\r\n```\r\n-----First And Last Node-----\r\n1\r\n7\r\n----After Deleting 1st Node------\r\n2\r\n7\r\n-----After Deleting Last Node-----\r\n2\r\n2\r\n-----After Deleting Last Node-----\r\n2\r\n2\r\n```","title":"LinkedList implementation, where&#39;s the wrong in deleteLast() method","body":"<p>I implemented LikedList in Java, everything working fine except deleteLast() method. I am relatively new, so failed debugging the issue despite being so trivial a problem</p>\n<p>This is my implementation code in Java\nWhere did I make the mistake?</p>\n<pre><code>package linkedlist;\n\npublic class LinkedList {\n    private static Node first;\n    private static Node last;\n\n    private static class Node {\n        private int value;\n        private Node next;\n\n\n        public Node(int val, Node nxt) {\n            this.value = val;\n            this.next = nxt;\n        }\n\n        public Node(int val) {\n            this.value = val;\n        }\n\n\n        public static void main(String[] args) {\n            addFirst(7);\n            addFirst(6);\n            addFirst(5);\n            addFirst(4);\n            addFirst(3);\n            addFirst(2);\n            addFirst(1);\n            System.out.println(&quot;-----First And Last Node-----&quot;);\n            System.out.println(first.value);\n            System.out.println(last.value);\n            deleteFirst();\n            System.out.println(&quot;----After Deleting 1st Node------&quot;);\n            System.out.println(first.value);\n            System.out.println(last.value);\n            deleteLast();\n            System.out.println(&quot;-----After Deleting Last Node-----&quot;);\n            System.out.println(first.value);\n            System.out.println(last.value);\n            deleteLast();\n            System.out.println(&quot;-----After Deleting Last Node-----&quot;);\n            System.out.println(first.value);\n            System.out.println(last.value);\n        }\n\n        public static void addFirst(int val) {\n            if (first == null) {\n                first = last = new Node(val, null);\n            } else {\n                first = new Node(val, first);\n            }\n        }\n        public static void addLast(int val) {\n            if (first == null) {\n                first = last = new Node(val, null);\n            } else {\n                last.next = new Node(val, null);\n                last = last.next;\n            }\n        }\n\n        public static void deleteFirst() {\n            Node temp = first.next;\n            first.next = null;\n            first = temp;\n            temp.next = null;\n        }\n\n        public static void deleteLast() {\n            Node current = first;\n            Node newLast = first;\n            while (current != null) {\n                if(current == last) break;\n                newLast = current;\n                current = current.next;\n            }\n            newLast.next = null;\n            last = newLast;\n\n        }\n\n        public static int indexOf(int val) {\n            Node current = first;\n            int index = 0;\n            while (current.value != val) {\n                current = current.next;\n                index++;\n            }\n            return index;\n        }\n    }\n}\n\n\n</code></pre>\n<hr />\n<p>The way the code is, whenever I run it the 1st and last node becomes of the same value, like for the above example code, after deleteLast() method 1st and last both nodes become 2 or having the value 2, which essentially means they are the same exact nodes</p>\n<p>Output</p>\n<pre><code>-----First And Last Node-----\n1\n7\n----After Deleting 1st Node------\n2\n7\n-----After Deleting Last Node-----\n2\n2\n-----After Deleting Last Node-----\n2\n2\n</code></pre>\n"},{"tags":["java","object","binary-tree"],"comments":[{"owner":{"account_id":17033694,"reputation":4572,"user_id":12323248,"display_name":"akuzminykh"},"score":0,"creation_date":1595445405,"post_id":63041303,"comment_id":111480670,"body_markdown":"Have you researched how an insertion in a binary tree works? It&#39;s pretty straightforward.","body":"Have you researched how an insertion in a binary tree works? It&#39;s pretty straightforward."},{"owner":{"account_id":13014309,"reputation":467,"user_id":9406165,"display_name":"CodingTil"},"score":0,"creation_date":1595445530,"post_id":63041303,"comment_id":111480735,"body_markdown":"Do you have to implement your own Binary Search Tree? If not, I would suggest you go with java&#39;s TreeMap or TreeList. Both use an optimization to the Binary Search Tree - the Red-Black Tree. Those trees are self-balancing, like AVL trees, but not as strict. This results in an performance improvement to O(log(n)) for all insertions, removals, and searches.","body":"Do you have to implement your own Binary Search Tree? If not, I would suggest you go with java&#39;s TreeMap or TreeList. Both use an optimization to the Binary Search Tree - the Red-Black Tree. Those trees are self-balancing, like AVL trees, but not as strict. This results in an performance improvement to O(log(n)) for all insertions, removals, and searches."}],"answers":[{"tags":[],"owner":{"account_id":18998414,"reputation":254,"user_id":13866276,"display_name":"3asyPe"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1595450539,"creation_date":1595448657,"answer_id":63042424,"question_id":63041303,"body_markdown":"I recommend you not to use your own trees in production, but if you are just learn, then that&#39;s fine. To add a new entity to your tree, you have to find a place for it. In this code we search for it by comparing scores of players.\r\n\r\n    public void add(final Player player){\r\n    \tif (isEmpty()){\r\n    \t\troot = new BinNode(player);\r\n        }\r\n        else{\r\n            BinNode node = root;\r\n            while (true){\r\n                if (player.getScore() &lt;= node.getPlayer().getScore()){\r\n                    if (node.getLeft() == null){\r\n                        node.getLeft() = new BinNode(player);\r\n                        return;\r\n                    }\r\n                    else{\r\n                        node = node.getLeft();\r\n                    }\r\n                }\r\n                else{\r\n                    if (node.getRight() == null){\r\n                        node.getRight() = new BinNode(player);\r\n                        return;\r\n                    }\r\n                    else {\r\n                        node = node.getRight();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }","title":"Add Specific Object to a Binary Search Tree","body":"<p>I recommend you not to use your own trees in production, but if you are just learn, then that's fine. To add a new entity to your tree, you have to find a place for it. In this code we search for it by comparing scores of players.</p>\n<pre><code>public void add(final Player player){\n    if (isEmpty()){\n        root = new BinNode(player);\n    }\n    else{\n        BinNode node = root;\n        while (true){\n            if (player.getScore() &lt;= node.getPlayer().getScore()){\n                if (node.getLeft() == null){\n                    node.getLeft() = new BinNode(player);\n                    return;\n                }\n                else{\n                    node = node.getLeft();\n                }\n            }\n            else{\n                if (node.getRight() == null){\n                    node.getRight() = new BinNode(player);\n                    return;\n                }\n                else {\n                    node = node.getRight();\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":18862310,"reputation":9,"user_id":13758882,"display_name":"bruhHelp"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":486,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":63042424,"answer_count":1,"score":0,"last_activity_date":1660853258,"creation_date":1595444069,"question_id":63041303,"body_markdown":"I&#39;m looking to add an object called &quot;player&quot; to a binary search tree based on how high the score of the player is, essentially like a scoreboard, but I&#39;m not entirely certain how to add players to the binary tree; I&#39;m curious how to go about writing the method, so I hope this question makes sense.\r\n\r\nHere&#39;s a part of my BinaryTree class:\r\n\r\n  \r\n\r\n    import java.util.Iterator;\r\n\r\n    public class BinaryTree implements Iterable&lt;Player&gt; {\r\n\r\n    private BinNode root;\r\n\r\n    public BinaryTree() {\r\n        root = null;\r\n    }\r\n\r\n    public boolean isEmpty() {\r\n        return root == null;\r\n    }\r\n\r\n    // TODO: add the given player to the binary tree based on the player&#39;s game score\r\n    public void add(final Player player) {\r\n\r\n        if (isEmpty())\r\n            root = new BinNode(player);\r\n        // this is SUUUPER placeholder\r\n\r\n    } ...\r\n\r\nHere&#39;s the player class, :\r\n\r\n    public class Player implements Comparable&lt;Player&gt; {\r\n\r\n    private String name;\r\n    private int    score;\r\n    private static final int MIN_SCORE = 0;\r\n\r\n    public Player(final String name, int score) {\r\n        this.name = name;\r\n        if (score &lt; MIN_SCORE)\r\n            this.score = 0;\r\n        else\r\n            this.score = score;\r\n    }\r\n\r\n    public Player(final String name) {\r\n        this(name, MIN_SCORE);\r\n    }\r\n\r\n    public String getName() {\r\n        return name;\r\n    }\r\n\r\n    public int getScore() {\r\n        return score;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return name + &quot;: &quot; + score;\r\n    }\r\n\r\n    // TODO: compare player objects based on their scores\r\n    @Override\r\n    public int compareTo(Player other) {\r\n\r\n        return score - other.score;// I think this is a step in the right direction???\r\n    }\r\n}\r\n\r\nHere&#39;s my Binary Node class: \r\n\r\n    public class BinNode {\r\n\r\n    private Player player;\r\n    private BinNode left, right;\r\n\r\n    public BinNode() {\r\n        player = null;\r\n        left = right = null;\r\n    }\r\n\r\n    public BinNode(final Player player) {\r\n        this.player = player;\r\n        left = right = null;\r\n    }\r\n\r\n    public Player getPlayer() {\r\n        return player;\r\n    }\r\n\r\n    public BinNode getLeft() {\r\n        return left;\r\n    }\r\n\r\n    public BinNode getRight() {\r\n        return right;\r\n    }\r\n\r\n    public void setPlayer(final Player data) {\r\n        this.player = player;\r\n    }\r\n\r\n    public void setLeft(BinNode left) {\r\n        this.left = left;\r\n    }\r\n\r\n    public void setRight(BinNode right) {\r\n        this.right = right;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return player.toString();\r\n    }\r\n}\r\n","title":"Add Specific Object to a Binary Search Tree","body":"<p>I'm looking to add an object called &quot;player&quot; to a binary search tree based on how high the score of the player is, essentially like a scoreboard, but I'm not entirely certain how to add players to the binary tree; I'm curious how to go about writing the method, so I hope this question makes sense.</p>\n<p>Here's a part of my BinaryTree class:</p>\n<pre><code>import java.util.Iterator;\n\npublic class BinaryTree implements Iterable&lt;Player&gt; {\n\nprivate BinNode root;\n\npublic BinaryTree() {\n    root = null;\n}\n\npublic boolean isEmpty() {\n    return root == null;\n}\n\n// TODO: add the given player to the binary tree based on the player's game score\npublic void add(final Player player) {\n\n    if (isEmpty())\n        root = new BinNode(player);\n    // this is SUUUPER placeholder\n\n} ...\n</code></pre>\n<p>Here's the player class, :</p>\n<pre><code>public class Player implements Comparable&lt;Player&gt; {\n\nprivate String name;\nprivate int    score;\nprivate static final int MIN_SCORE = 0;\n\npublic Player(final String name, int score) {\n    this.name = name;\n    if (score &lt; MIN_SCORE)\n        this.score = 0;\n    else\n        this.score = score;\n}\n\npublic Player(final String name) {\n    this(name, MIN_SCORE);\n}\n\npublic String getName() {\n    return name;\n}\n\npublic int getScore() {\n    return score;\n}\n\n@Override\npublic String toString() {\n    return name + &quot;: &quot; + score;\n}\n\n// TODO: compare player objects based on their scores\n@Override\npublic int compareTo(Player other) {\n\n    return score - other.score;// I think this is a step in the right direction???\n}\n</code></pre>\n<p>}</p>\n<p>Here's my Binary Node class:</p>\n<pre><code>public class BinNode {\n\nprivate Player player;\nprivate BinNode left, right;\n\npublic BinNode() {\n    player = null;\n    left = right = null;\n}\n\npublic BinNode(final Player player) {\n    this.player = player;\n    left = right = null;\n}\n\npublic Player getPlayer() {\n    return player;\n}\n\npublic BinNode getLeft() {\n    return left;\n}\n\npublic BinNode getRight() {\n    return right;\n}\n\npublic void setPlayer(final Player data) {\n    this.player = player;\n}\n\npublic void setLeft(BinNode left) {\n    this.left = left;\n}\n\npublic void setRight(BinNode right) {\n    this.right = right;\n}\n\n@Override\npublic String toString() {\n    return player.toString();\n}\n</code></pre>\n<p>}</p>\n"},{"tags":["java","unit-testing","testing","integration-testing","connection-pooling"],"comments":[{"owner":{"account_id":265649,"reputation":53086,"user_id":552759,"display_name":"jtahlborn"},"score":0,"creation_date":1298837084,"post_id":5134515,"comment_id":5762024,"body_markdown":"fyi, you have a bug.  when you create and return a new connection, you are not marking it as used.","body":"fyi, you have a bug.  when you create and return a new connection, you are not marking it as used."},{"owner":{"account_id":226808,"reputation":9956,"user_id":488054,"accept_rate":85,"display_name":"nbarraille"},"score":0,"creation_date":1298841607,"post_id":5134515,"comment_id":5762662,"body_markdown":"@jtahlborn: Oops, you&#39;re right. I corrected this one in the edit. Thanks.","body":"@jtahlborn: Oops, you&#39;re right. I corrected this one in the edit. Thanks."}],"answers":[{"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1298826982,"creation_date":1298826982,"answer_id":5134611,"question_id":5134515,"body_markdown":"Industrial strength connection pools have the ability to check connections by making a connection and executing a simple SQL query (e.g. &quot;SELECT 1&quot;) to ensure that connection is viable before giving it out.  Yours does not.\r\n\r\nI don&#39;t see where you can initialize the connection pool with a fixed number of connections.  The whole point of a connection pool is to amortize the cost of creating a connection over all clients.\r\n\r\nI&#39;d worry about the design of your connection pool.\r\n\r\nAs for testing, just start writing unit tests.  Since your pool will be shared, be sure to write some multi-threaded tests to make sure that it&#39;s really thread safe.\r\n","title":"How would you test a Connection Pool","body":"<p>Industrial strength connection pools have the ability to check connections by making a connection and executing a simple SQL query (e.g. \"SELECT 1\") to ensure that connection is viable before giving it out.  Yours does not.</p>\n\n<p>I don't see where you can initialize the connection pool with a fixed number of connections.  The whole point of a connection pool is to amortize the cost of creating a connection over all clients.</p>\n\n<p>I'd worry about the design of your connection pool.</p>\n\n<p>As for testing, just start writing unit tests.  Since your pool will be shared, be sure to write some multi-threaded tests to make sure that it's really thread safe.</p>\n"},{"tags":[],"owner":{"account_id":277416,"reputation":681848,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1298827371,"creation_date":1298827371,"answer_id":5134640,"question_id":5134515,"body_markdown":"You could test that \r\n\r\n - getting a connection when the pool is empty gives you a connection\r\n - getting a connection when a connection has already been got and not released gives you another, different connection\r\n - releasing a connection doesn&#39;t throw any exception\r\n - getting a connection after one has been released gives you the same connection\r\n\r\nNote that such a unit test would need a real database, with a real user and password to test. You could make your connection pool depend on a DataSource, and build your ConnectionPool using a mock DataSource returning mock Connections, in order to be able to test the class without depending on a real database.","title":"How would you test a Connection Pool","body":"<p>You could test that </p>\n\n<ul>\n<li>getting a connection when the pool is empty gives you a connection</li>\n<li>getting a connection when a connection has already been got and not released gives you another, different connection</li>\n<li>releasing a connection doesn't throw any exception</li>\n<li>getting a connection after one has been released gives you the same connection</li>\n</ul>\n\n<p>Note that such a unit test would need a real database, with a real user and password to test. You could make your connection pool depend on a DataSource, and build your ConnectionPool using a mock DataSource returning mock Connections, in order to be able to test the class without depending on a real database.</p>\n"},{"tags":[],"owner":{"account_id":7332,"reputation":23983,"user_id":12704,"accept_rate":75,"display_name":"Michael Easter"},"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1298828811,"creation_date":1298827680,"answer_id":5134680,"question_id":5134515,"body_markdown":"For an integration test, you could use [dbUnit][1] to load the database with prepared data and then write tests that query the database.\r\n\r\nFor an unit test, you might consider using a mocking library such as [Mockito][2] to ensure that you get the behaviour you expect. No database necessary in this case. [EDIT: However, due to the static method calls like DriverManager.getConnection(), this will require some refactoring and/or dependency injection.]\r\n\r\nBy combining both the unit tests and integration tests (and mix in some multi-threaded unit tests), you can go a long way towards testing your work. \r\n\r\n  [1]: http://www.dbunit.org/\r\n  [2]: http://mockito.org/","title":"How would you test a Connection Pool","body":"<p>For an integration test, you could use <a href=\"http://www.dbunit.org/\" rel=\"nofollow\">dbUnit</a> to load the database with prepared data and then write tests that query the database.</p>\n\n<p>For an unit test, you might consider using a mocking library such as <a href=\"http://mockito.org/\" rel=\"nofollow\">Mockito</a> to ensure that you get the behaviour you expect. No database necessary in this case. [EDIT: However, due to the static method calls like DriverManager.getConnection(), this will require some refactoring and/or dependency injection.]</p>\n\n<p>By combining both the unit tests and integration tests (and mix in some multi-threaded unit tests), you can go a long way towards testing your work. </p>\n"},{"tags":[],"owner":{"account_id":127164,"reputation":15713,"user_id":324152,"accept_rate":63,"display_name":"MRalwasser"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1298841817,"creation_date":1298841817,"answer_id":5136091,"question_id":5134515,"body_markdown":"You should also test concurrency/scalability under load using multiple threads.","title":"How would you test a Connection Pool","body":"<p>You should also test concurrency/scalability under load using multiple threads.</p>\n"},{"tags":[],"owner":{"account_id":17330117,"reputation":3251,"user_id":12553450,"display_name":"Mafei"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660852921,"creation_date":1660852921,"answer_id":73408795,"question_id":5134515,"body_markdown":"\r\nsometimes you might have configured the connection pool and the connections got created successfully. \r\n# but \r\nhow do you say all the connections are being accessed? sometimes only one connection may be being used repeatedly due to a configuration issue. therefore, you can clarify that by executing this query in a loop (it is better if you can use a parallel process) ```select connection_id();```  with connections that you created. if you have successfully configured the pool, you can see the different ids as the output. ","title":"How would you test a Connection Pool","body":"<p>sometimes you might have configured the connection pool and the connections got created successfully.</p>\n<h1>but</h1>\n<p>how do you say all the connections are being accessed? sometimes only one connection may be being used repeatedly due to a configuration issue. therefore, you can clarify that by executing this query in a loop (it is better if you can use a parallel process) <code>select connection_id();</code>  with connections that you created. if you have successfully configured the pool, you can see the different ids as the output.</p>\n"}],"owner":{"account_id":226808,"reputation":9956,"user_id":488054,"accept_rate":85,"display_name":"nbarraille"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20986,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"accepted_answer_id":5134640,"answer_count":5,"score":12,"last_activity_date":1660852921,"creation_date":1298825834,"question_id":5134515,"body_markdown":"I have implemented a very simple ConnectionPool in Java.\r\nIt has no fancy features, just get/release connection methods.\r\n\r\nHow can I test it is working?\r\n\r\nI know there are plenty of connection Pools ready to use out there, which are much more reliable than what I&#39;ll do, but I am just trying to practice to understand how connections Pool work.\r\n\r\n\r\nThank you!\r\n\r\n\r\nHere is the code in case it helps:\r\n\r\n    public class ConnectionPoolImpl implements ConnectionPool {\r\n    \tprivate Vector&lt;PooledConnection&gt; connections; // The connections container\r\n    \tString url;\r\n        String username; \r\n        String password;\r\n    \t\r\n        /**\r\n         * Instanciates a new MySQLConnectionPool\r\n         * @param nbConnectionsMax\r\n         */\r\n    \tpublic ConnectionPoolImpl(String DBUrl, String username, String password){\r\n    \t\tthis.connections = new Vector&lt;PooledConnection&gt;();\r\n    \t\tthis.url = DBUrl;\r\n    \t\tthis.username = username;\r\n    \t\tthis.password = password;\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Returns a connection from the pool, if some are available, or create a new one.\r\n    \t * \r\n    \t * @return the connection.\r\n    \t */\r\n    \tpublic Connection getConnection() throws SQLException {\r\n    \t\tsynchronized(this.connections){\r\n    \t\t\t// Checking if there is an available connection to return\r\n    \t\t\tfor(PooledConnection c : this.connections){\r\n    \t\t\t\tif(!c.isUsed()){\r\n    \t\t\t\t\tc.setUsed();\r\n    \t\t\t\t\treturn c.getConnection();\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t\t\r\n    \t\t\t// If there are none, open a new one and return it\r\n    \t\t    Connection conn = DriverManager.getConnection(url, username, password);\r\n\t\t\tPooledConnection pConn = new PooledConnection(conn);\r\n\t\t\tpConn.setUsed();\r\n\t\t\tconnections.add(pConn);\r\n\t\t\treturn pConn.getConnection();\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t/**\r\n    \t * Releases a connection to the pool.\r\n    \t * \r\n    \t * @param con the connection to release.\r\n    \t */\r\n    \tpublic void releaseConnection(Connection con) throws SQLException {\r\n    \t\tsynchronized(this.connections){\r\n    \t\t\tfor(PooledConnection c : this.connections){\r\n    \t\t\t\tif(c.getConnection().equals(con)){\r\n    \t\t\t\t\tc.setFree();\r\n    \t\t\t\t\treturn;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n    \t\t}\r\n          }\r\n    }\r\n\r\n\r\nAnd my PooledConnection.java:\r\n\r\n    public class PooledConnection {\r\n    \tprivate Connection conn;\r\n    \tprivate boolean used;\r\n    \t\r\n    \tpublic PooledConnection(Connection conn){\r\n    \t\tthis.conn = conn;\r\n    \t\tthis.used = false;\r\n    \t}\r\n    \t\r\n    \tpublic void setUsed(){\r\n    \t\tthis.used = true;\r\n    \t}\r\n    \t\r\n    \tpublic void setFree(){\r\n    \t\tthis.used = false;\r\n    \t}\r\n    \t\r\n    \tpublic boolean isUsed(){\r\n    \t\treturn this.used;\r\n    \t}\r\n    \t\r\n    \tpublic Connection getConnection(){\r\n    \t\treturn this.conn;\r\n    \t}\r\n    }","title":"How would you test a Connection Pool","body":"<p>I have implemented a very simple ConnectionPool in Java.\nIt has no fancy features, just get/release connection methods.</p>\n\n<p>How can I test it is working?</p>\n\n<p>I know there are plenty of connection Pools ready to use out there, which are much more reliable than what I'll do, but I am just trying to practice to understand how connections Pool work.</p>\n\n<p>Thank you!</p>\n\n<p>Here is the code in case it helps:</p>\n\n<pre><code>public class ConnectionPoolImpl implements ConnectionPool {\n    private Vector&lt;PooledConnection&gt; connections; // The connections container\n    String url;\n    String username; \n    String password;\n\n    /**\n     * Instanciates a new MySQLConnectionPool\n     * @param nbConnectionsMax\n     */\n    public ConnectionPoolImpl(String DBUrl, String username, String password){\n        this.connections = new Vector&lt;PooledConnection&gt;();\n        this.url = DBUrl;\n        this.username = username;\n        this.password = password;\n    }\n\n    /**\n     * Returns a connection from the pool, if some are available, or create a new one.\n     * \n     * @return the connection.\n     */\n    public Connection getConnection() throws SQLException {\n        synchronized(this.connections){\n            // Checking if there is an available connection to return\n            for(PooledConnection c : this.connections){\n                if(!c.isUsed()){\n                    c.setUsed();\n                    return c.getConnection();\n                }\n            }\n\n            // If there are none, open a new one and return it\n            Connection conn = DriverManager.getConnection(url, username, password);\n        PooledConnection pConn = new PooledConnection(conn);\n        pConn.setUsed();\n        connections.add(pConn);\n        return pConn.getConnection();\n        }\n    }\n\n    /**\n     * Releases a connection to the pool.\n     * \n     * @param con the connection to release.\n     */\n    public void releaseConnection(Connection con) throws SQLException {\n        synchronized(this.connections){\n            for(PooledConnection c : this.connections){\n                if(c.getConnection().equals(con)){\n                    c.setFree();\n                    return;\n                }\n            }\n        }\n      }\n}\n</code></pre>\n\n<p>And my PooledConnection.java:</p>\n\n<pre><code>public class PooledConnection {\n    private Connection conn;\n    private boolean used;\n\n    public PooledConnection(Connection conn){\n        this.conn = conn;\n        this.used = false;\n    }\n\n    public void setUsed(){\n        this.used = true;\n    }\n\n    public void setFree(){\n        this.used = false;\n    }\n\n    public boolean isUsed(){\n        return this.used;\n    }\n\n    public Connection getConnection(){\n        return this.conn;\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jackson","jsonschema","jsonpointer"],"comments":[{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1660853343,"post_id":73408713,"comment_id":129638239,"body_markdown":"Why do you want to validate the JSON against the schemas yourself instead of using a JSON schema validation library that would do the job for you?","body":"Why do you want to validate the JSON against the schemas yourself instead of using a JSON schema validation library that would do the job for you?"},{"owner":{"account_id":26101244,"reputation":21,"user_id":19796635,"display_name":"Juan Rodriguez"},"score":0,"creation_date":1660854192,"post_id":73408713,"comment_id":129638464,"body_markdown":"@MatteoNNZ It&#39;s a little more complicated but basically I need to allow users of the schema to attach a list of JsonPointerExpressions that will be used to carry out a function on JsonData that reflects the JsonSchema, but I need to prevalidate that the JsonPointerExpressions are valid properties defined by the JsonSchema, does that make sense?","body":"@MatteoNNZ It&#39;s a little more complicated but basically I need to allow users of the schema to attach a list of JsonPointerExpressions that will be used to carry out a function on JsonData that reflects the JsonSchema, but I need to prevalidate that the JsonPointerExpressions are valid properties defined by the JsonSchema, does that make sense?"},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1660855201,"post_id":73408713,"comment_id":129638738,"body_markdown":"Not entirely, but in that case wouldn&#39;t you simply want to parse the JSON schema as a simple JSON node and validate the paths as if they were standard JSON paths?","body":"Not entirely, but in that case wouldn&#39;t you simply want to parse the JSON schema as a simple JSON node and validate the paths as if they were standard JSON paths?"},{"owner":{"account_id":26101244,"reputation":21,"user_id":19796635,"display_name":"Juan Rodriguez"},"score":0,"creation_date":1660855345,"post_id":73408713,"comment_id":129638773,"body_markdown":"Yes but the obstacle is dealing with $ref cases.","body":"Yes but the obstacle is dealing with $ref cases."},{"owner":{"account_id":471114,"reputation":7423,"user_id":878701,"accept_rate":86,"display_name":"gregsdennis"},"score":0,"creation_date":1660855401,"post_id":73408713,"comment_id":129638779,"body_markdown":"JSON Schemas are (as you have shown) generally represented simply in JSON.  Evaluating a JSON Pointer against a JSON blob shouldn&#39;t be a great exercise.  There are probably libraries in Java that do this for you.  For example, [here&#39;s mine in .Net](https://www.nuget.org/packages/JsonPointer.Net) and [Microsoft&#39;s](https://www.nuget.org/packages/Microsoft.Json.Pointer).","body":"JSON Schemas are (as you have shown) generally represented simply in JSON.  Evaluating a JSON Pointer against a JSON blob shouldn&#39;t be a great exercise.  There are probably libraries in Java that do this for you.  For example, <a href=\"https://www.nuget.org/packages/JsonPointer.Net\" rel=\"nofollow noreferrer\">here&#39;s mine in .Net</a> and <a href=\"https://www.nuget.org/packages/Microsoft.Json.Pointer\" rel=\"nofollow noreferrer\">Microsoft&#39;s</a>."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1660855407,"post_id":73408713,"comment_id":129638782,"body_markdown":"Okay I kind of see. And how you want to handle the refs? I guess you want to load the referenced JSON schema and apply the paths there?","body":"Okay I kind of see. And how you want to handle the refs? I guess you want to load the referenced JSON schema and apply the paths there?"},{"owner":{"account_id":471114,"reputation":7423,"user_id":878701,"accept_rate":86,"display_name":"gregsdennis"},"score":0,"creation_date":1660855444,"post_id":73408713,"comment_id":129638795,"body_markdown":"JSON Pointers, even during evaluation of a schema, can&#39;t see through `$ref`s.  They&#39;re just location identifiers in the raw JSON structure.","body":"JSON Pointers, even during evaluation of a schema, can&#39;t see through <code>$ref</code>s.  They&#39;re just location identifiers in the raw JSON structure."},{"owner":{"account_id":26101244,"reputation":21,"user_id":19796635,"display_name":"Juan Rodriguez"},"score":0,"creation_date":1660861008,"post_id":73408713,"comment_id":129640175,"body_markdown":"I am thinking of writing some logic to just manually check through $ref, I just need to find out how json validation does that","body":"I am thinking of writing some logic to just manually check through $ref, I just need to find out how json validation does that"},{"owner":{"account_id":32232,"reputation":11789,"user_id":89211,"accept_rate":90,"display_name":"Relequestual"},"score":0,"creation_date":1662021329,"post_id":73408713,"comment_id":129911148,"body_markdown":"Are you expecting users to provide JSON Pointers which point through references as if the references had been in-lined? If so, this is not good. It&#39;s not always possible to in-line references, for example if they are recurisve.","body":"Are you expecting users to provide JSON Pointers which point through references as if the references had been in-lined? If so, this is not good. It&#39;s not always possible to in-line references, for example if they are recurisve."},{"owner":{"account_id":32232,"reputation":11789,"user_id":89211,"accept_rate":90,"display_name":"Relequestual"},"score":0,"creation_date":1662021495,"post_id":73408713,"comment_id":129911212,"body_markdown":"Oh, you want to run the validate the JSON Pointers might be valid against the data validated by the JSON Schema? Interesting. Unless your schema is a lot more locked down (requires properties, prevents additional properties), you&#39;ll only be guessing. I&#39;ve never seen anyone ask for such a tool, but you&#39;d probably want to start by using a tool which creates an AST from the schema. You may find this to be a complex task.","body":"Oh, you want to run the validate the JSON Pointers might be valid against the data validated by the JSON Schema? Interesting. Unless your schema is a lot more locked down (requires properties, prevents additional properties), you&#39;ll only be guessing. I&#39;ve never seen anyone ask for such a tool, but you&#39;d probably want to start by using a tool which creates an AST from the schema. You may find this to be a complex task."}],"owner":{"account_id":26101244,"reputation":21,"user_id":19796635,"display_name":"Juan Rodriguez"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":653,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660852356,"creation_date":1660852356,"question_id":73408713,"body_markdown":"I am working with a JsonSchema that utilizes nested data structures where I use $ref for some properties and for others I just write in the data structures (no $ref). Basically I have to consider many types of JsonSchema Structures.\r\n\r\nWhat I am trying to do is, given a list of Json Pointers, I want to validate that all the Json Pointer Expressions are valid properties existing in the Schema. The Json Pointer Expressions can be nested as well. Here is an example:\r\n\r\n\r\n***product.schema.json***\r\n``` \r\n{\r\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\r\n  &quot;$id&quot;: &quot;https://example.com/product.schema.json&quot;,\r\n  &quot;title&quot;: &quot;Product&quot;,\r\n  &quot;description&quot;: &quot;A product from Acme&#39;s catalog&quot;,\r\n  &quot;type&quot;: &quot;object&quot;,\r\n  &quot;properties&quot;: \r\n    &quot;dimensions&quot;: {\r\n      &quot;type&quot;: &quot;object&quot;,\r\n      &quot;properties&quot;: {\r\n        &quot;length&quot;: {\r\n          &quot;type&quot;: &quot;number&quot;\r\n        },\r\n        &quot;width&quot;: {\r\n          &quot;type&quot;: &quot;number&quot;\r\n        },\r\n        &quot;height&quot;: {\r\n          &quot;type&quot;: &quot;number&quot;\r\n        }\r\n      }\r\n    },\r\n    {\r\n    &quot;warehouseLocation&quot;: {\r\n      &quot;description&quot;: &quot;Coordinates of the warehouse where the product is located.&quot;,\r\n      &quot;$ref&quot;: &quot;https://example.com/geographical-location.schema.json&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n***geographical-location.schema.json***\r\n```\r\n{\r\n  &quot;$id&quot;: &quot;https://example.com/geographical-location.schema.json&quot;,\r\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\r\n  &quot;title&quot;: &quot;Longitude and Latitude&quot;,\r\n  &quot;description&quot;: &quot;A geographical coordinate on a planet (most commonly Earth).&quot;,\r\n  &quot;type&quot;: &quot;object&quot;,\r\n  &quot;properties&quot;: {\r\n    &quot;latitude&quot;: {\r\n      &quot;type&quot;: &quot;number&quot;\r\n    },\r\n    &quot;longitude&quot;: {\r\n      &quot;type&quot;: &quot;number&quot;\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe above JsonSchema has the two types of nested schema structures. Lets say give these Schema, I also am give a list of JsonPtrExps:\r\n```\r\n[&quot;/dimensions/length&quot;, &quot;/warehouseLocation/longitude&quot;, &quot;/dimensions/mass&quot;]\r\n```\r\n\r\nI am trying to find a way to use the schema to predict and validate which of the JsonPointerExpressions would return a valid property. \r\n```&quot;/dimensions/length&quot;, &quot;/warehouseLocation/longitude&quot;``` would pass this validation but ```&quot;/dimensions/mass&quot;``` would not.\r\n\r\nAlso I would like to be able to make this decisions went I am only reading the ***product.schema.json*** even though I can access ***geographical-location.schema.json*** by using the $ref field.\r\n\r\nAny thoughts?\r\n","title":"How can I validate a json pointer for a given Json Schema (even with $ref fields)?","body":"<p>I am working with a JsonSchema that utilizes nested data structures where I use $ref for some properties and for others I just write in the data structures (no $ref). Basically I have to consider many types of JsonSchema Structures.</p>\n<p>What I am trying to do is, given a list of Json Pointers, I want to validate that all the Json Pointer Expressions are valid properties existing in the Schema. The Json Pointer Expressions can be nested as well. Here is an example:</p>\n<p><em><strong>product.schema.json</strong></em></p>\n<pre><code>{\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n  &quot;$id&quot;: &quot;https://example.com/product.schema.json&quot;,\n  &quot;title&quot;: &quot;Product&quot;,\n  &quot;description&quot;: &quot;A product from Acme's catalog&quot;,\n  &quot;type&quot;: &quot;object&quot;,\n  &quot;properties&quot;: \n    &quot;dimensions&quot;: {\n      &quot;type&quot;: &quot;object&quot;,\n      &quot;properties&quot;: {\n        &quot;length&quot;: {\n          &quot;type&quot;: &quot;number&quot;\n        },\n        &quot;width&quot;: {\n          &quot;type&quot;: &quot;number&quot;\n        },\n        &quot;height&quot;: {\n          &quot;type&quot;: &quot;number&quot;\n        }\n      }\n    },\n    {\n    &quot;warehouseLocation&quot;: {\n      &quot;description&quot;: &quot;Coordinates of the warehouse where the product is located.&quot;,\n      &quot;$ref&quot;: &quot;https://example.com/geographical-location.schema.json&quot;\n    }\n  }\n}\n</code></pre>\n<p><em><strong>geographical-location.schema.json</strong></em></p>\n<pre><code>{\n  &quot;$id&quot;: &quot;https://example.com/geographical-location.schema.json&quot;,\n  &quot;$schema&quot;: &quot;https://json-schema.org/draft/2020-12/schema&quot;,\n  &quot;title&quot;: &quot;Longitude and Latitude&quot;,\n  &quot;description&quot;: &quot;A geographical coordinate on a planet (most commonly Earth).&quot;,\n  &quot;type&quot;: &quot;object&quot;,\n  &quot;properties&quot;: {\n    &quot;latitude&quot;: {\n      &quot;type&quot;: &quot;number&quot;\n    },\n    &quot;longitude&quot;: {\n      &quot;type&quot;: &quot;number&quot;\n    }\n  }\n}\n</code></pre>\n<p>The above JsonSchema has the two types of nested schema structures. Lets say give these Schema, I also am give a list of JsonPtrExps:</p>\n<pre><code>[&quot;/dimensions/length&quot;, &quot;/warehouseLocation/longitude&quot;, &quot;/dimensions/mass&quot;]\n</code></pre>\n<p>I am trying to find a way to use the schema to predict and validate which of the JsonPointerExpressions would return a valid property.\n<code>&quot;/dimensions/length&quot;, &quot;/warehouseLocation/longitude&quot;</code> would pass this validation but <code>&quot;/dimensions/mass&quot;</code> would not.</p>\n<p>Also I would like to be able to make this decisions went I am only reading the <em><strong>product.schema.json</strong></em> even though I can access <em><strong>geographical-location.schema.json</strong></em> by using the $ref field.</p>\n<p>Any thoughts?</p>\n"},{"tags":["java","rotation","collision-detection","automatic-ref-counting"],"answers":[{"tags":[],"owner":{"account_id":15592814,"reputation":3,"user_id":11249303,"display_name":"StormyFrolic"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660852340,"creation_date":1660627327,"answer_id":73369081,"question_id":73315505,"body_markdown":"After a few days of coding and learning and testing new ideas I came back to this program and implemented the collision detection using my original idea (ray casting) and have created the equivalent with rays! \r\n[Screenshot of the new product][1]\r\n[Github link to the project that taught me the solution][2]\r\n- Here&#39;s the new math\r\n\r\n```java\r\npublic void setRays() {\r\n    for (int i = 0; i &lt; rays.length; i++) {\r\n\t    double rayStartAngleX = Math.sin(Math.toRadians((startAngle - angle) + i));\r\n        double rayStartAngleY = Math.cos(Math.toRadians((startAngle - angle) + i));\r\n\t\trays[i].setLine(cx, cy, cx + visionDistance * rayStartAngleX, cy + visionDistance * rayStartAngleY);\r\n    }\r\n}\r\n```\r\n\r\n- Here is a link the the program I started after I asked this question and moved on to learn more, and an image to what the new product looks like\r\n(The original github page has been updated with a new branch :) I&#39;m learning git hub right now too\r\n\r\n- I do not believe that using Arc2D in the way I intended is possible, however there is .setArcByTangent method, it may be possible to use that but I wasn&#39;t going to get into that. Rays are cooler.\r\n\r\n  [1]: https://i.stack.imgur.com/2q06K.png\r\n[2]: https://github.com/ShadowDraco/RayCastingTest\r\n","title":"Java Arc2D Collision detection (With Rotation)","body":"<p>After a few days of coding and learning and testing new ideas I came back to this program and implemented the collision detection using my original idea (ray casting) and have created the equivalent with rays!\n<a href=\"https://i.stack.imgur.com/2q06K.png\" rel=\"nofollow noreferrer\">Screenshot of the new product</a>\n<a href=\"https://github.com/ShadowDraco/RayCastingTest\" rel=\"nofollow noreferrer\">Github link to the project that taught me the solution</a></p>\n<ul>\n<li>Here's the new math</li>\n</ul>\n<pre class=\"lang-java prettyprint-override\"><code>public void setRays() {\n    for (int i = 0; i &lt; rays.length; i++) {\n        double rayStartAngleX = Math.sin(Math.toRadians((startAngle - angle) + i));\n        double rayStartAngleY = Math.cos(Math.toRadians((startAngle - angle) + i));\n        rays[i].setLine(cx, cy, cx + visionDistance * rayStartAngleX, cy + visionDistance * rayStartAngleY);\n    }\n}\n</code></pre>\n<ul>\n<li><p>Here is a link the the program I started after I asked this question and moved on to learn more, and an image to what the new product looks like\n(The original github page has been updated with a new branch :) I'm learning git hub right now too</p>\n</li>\n<li><p>I do not believe that using Arc2D in the way I intended is possible, however there is .setArcByTangent method, it may be possible to use that but I wasn't going to get into that. Rays are cooler.</p>\n</li>\n</ul>\n"}],"owner":{"account_id":15592814,"reputation":3,"user_id":11249303,"display_name":"StormyFrolic"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73369081,"answer_count":1,"score":0,"last_activity_date":1660852340,"creation_date":1660194395,"question_id":73315505,"body_markdown":"I have tried to create NPC character that can &quot;see&quot; the player by using cones of vision. \r\nThe NPC will rotate back and forth at all times.\r\n\r\nMy problem is that the arc has a generic and unchanging position, but when its drawn to the screen it *looks* correct.\r\n[Screenshots of the collisions in action][1]\r\n[GitHub link for java files][2]\r\n\r\nI&#39;m using Arc2D to draw the shape like this in my NPC class\r\n\r\n\r\n    // Update the shapes used in the npc\r\n\t\trect.setRect(x, y, w, h);\r\n\t\tellipse.setFrame(rect);\r\n\t\tvisionArc.setArcByCenter(cx, cy, visionDistance, visionAngle, visionAngle * 2, Arc2D.PIE); \r\n/ CenterX, CenterY (of the npc), \r\n/ the distance from the arc to the npc\r\n/ a constant value around 45 degrees and a constant value around 90 degress (to make a pie shape)\r\n \r\nI&#39;ve tried multiplying the position and the angles by the sin and cosine of the NPC&#39;s current angle \r\n- something like these\r\n- visionArc.setArcByCenter(cx * (Math.cos(Math.toRadians(angle))), cy (Math.sin(Math.toRadians(angle)), visionDistance, visionAngle, visionAngle * 2, Arc2D.PIE);\r\n- or \r\n- visionArc.setArcByCenter(cx, cy, visionDistance, visionAngle - angle, (visionAngle + angle) * 2, Arc2D.PIE);\r\n- or\r\n- visionArc.setArcByCenter(cx, cy, visionDistance, visionAngle * (Math.cos(Math.toRadians(angle))), visionAngle * 2, Arc2D.PIE);\r\n- I&#39;ve tried a lot but can&#39;t seem to find what works. Making the vision angles *not* constant makes an arc that expands and contracts, and multiplying the position by the sin or cosine of the angle will make the arc fly around the screen, which doesn&#39;t really work either.\r\n\r\n-\r\n- This is the function that draws the given NPC \r\n    public void drawNPC(NPC npc, Graphics2D g2, AffineTransform old) {\r\n\r\n\t\t// translate to the position of the npc and rotate\r\n\t\tAffineTransform npcTransform = AffineTransform.getRotateInstance(Math.toRadians(npc.angle), npc.x, npc.y);\r\n\t\t// Translate back a few units to keep the npc rotating about its own center\r\n\t\t// point\r\n\t\tnpcTransform.translate(-npc.halfWidth, -npc.halfHeight);\r\n\t\tg2.setTransform(npcTransform);\r\n\r\n\t\t// g2.draw(npc.rect); //&lt;-- show bounding box if you want \r\n\t\tg2.setColor(npc.outlineColor);\r\n\t\tg2.draw(npc.visionArc);\r\n\t\tg2.setColor(Color.BLACK);\r\n\t\tg2.draw(npc.ellipse);\r\n\r\n\t\tg2.setTransform(old);\r\n\t}\r\n- This is my collision detection algorithim - NPC is a superclass to ninja (Shorter range, higher peripheral)\r\n\r\n    public void checkNinjas(Level level) {\r\n    \tfor (int i = 0; i &lt; level.ninjas.size(); i++) {\r\n    \t\tNinja ninja = level.ninjas.get(i);\r\n    \t\tplayerRect = level.player.rect;\r\n    \r\n    \t\t// Check collision\r\n    \t\tif (playerRect.getBounds2D().intersects(ninja.visionArc.getBounds2D())) {\r\n    \t\t\t// Create an area of the object for greater precision\r\n    \t\t\tArea area = new Area(playerRect);\r\n    \t\t\tarea.intersect(new Area(ninja.visionArc));\r\n    \t\t\t// After checking if the area intersects a second time make the NPC &quot;See&quot; the player\r\n    \t\t\tif (!area.isEmpty()) {\r\n    \t\t\t\tninja.seesPlayer = true;\r\n    \t\t\t}\r\n    \t\t\telse {\r\n    \t\t\t\tninja.seesPlayer = false;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nCan you help me correct the actual positions of the arcs for my collision detection? I have tried creating new shapes so I can have one to do math on and one to draw to the screen but I scrapped that and am starting again from here.\r\n    [1]: https://i.stack.imgur.com/rUvTM.png\r\n    [2]: https://github.com/ShadowDraco/ArcCollisionDetection","title":"Java Arc2D Collision detection (With Rotation)","body":"<p>I have tried to create NPC character that can &quot;see&quot; the player by using cones of vision.\nThe NPC will rotate back and forth at all times.</p>\n<p>My problem is that the arc has a generic and unchanging position, but when its drawn to the screen it <em>looks</em> correct.\n[Screenshots of the collisions in action][1]\n[GitHub link for java files][2]</p>\n<p>I'm using Arc2D to draw the shape like this in my NPC class</p>\n<pre><code>// Update the shapes used in the npc\n    rect.setRect(x, y, w, h);\n    ellipse.setFrame(rect);\n    visionArc.setArcByCenter(cx, cy, visionDistance, visionAngle, visionAngle * 2, Arc2D.PIE); \n</code></pre>\n<p>/ CenterX, CenterY (of the npc),\n/ the distance from the arc to the npc\n/ a constant value around 45 degrees and a constant value around 90 degress (to make a pie shape)</p>\n<p>I've tried multiplying the position and the angles by the sin and cosine of the NPC's current angle</p>\n<ul>\n<li><p>something like these</p>\n</li>\n<li><p>visionArc.setArcByCenter(cx * (Math.cos(Math.toRadians(angle))), cy (Math.sin(Math.toRadians(angle)), visionDistance, visionAngle, visionAngle * 2, Arc2D.PIE);</p>\n</li>\n<li><p>or</p>\n</li>\n<li><p>visionArc.setArcByCenter(cx, cy, visionDistance, visionAngle - angle, (visionAngle + angle) * 2, Arc2D.PIE);</p>\n</li>\n<li><p>or</p>\n</li>\n<li><p>visionArc.setArcByCenter(cx, cy, visionDistance, visionAngle * (Math.cos(Math.toRadians(angle))), visionAngle * 2, Arc2D.PIE);</p>\n</li>\n<li><p>I've tried a lot but can't seem to find what works. Making the vision angles <em>not</em> constant makes an arc that expands and contracts, and multiplying the position by the sin or cosine of the angle will make the arc fly around the screen, which doesn't really work either.</p>\n</li>\n<li></li>\n<li><p>This is the function that draws the given NPC\npublic void drawNPC(NPC npc, Graphics2D g2, AffineTransform old) {</p>\n<pre><code>  // translate to the position of the npc and rotate\n  AffineTransform npcTransform = AffineTransform.getRotateInstance(Math.toRadians(npc.angle), npc.x, npc.y);\n  // Translate back a few units to keep the npc rotating about its own center\n  // point\n  npcTransform.translate(-npc.halfWidth, -npc.halfHeight);\n  g2.setTransform(npcTransform);\n\n  // g2.draw(npc.rect); //&lt;-- show bounding box if you want \n  g2.setColor(npc.outlineColor);\n  g2.draw(npc.visionArc);\n  g2.setColor(Color.BLACK);\n  g2.draw(npc.ellipse);\n\n  g2.setTransform(old);\n</code></pre>\n<p>}</p>\n</li>\n<li><p>This is my collision detection algorithim - NPC is a superclass to ninja (Shorter range, higher peripheral)</p>\n<p>public void checkNinjas(Level level) {\nfor (int i = 0; i &lt; level.ninjas.size(); i++) {\nNinja ninja = level.ninjas.get(i);\nplayerRect = level.player.rect;</p>\n<pre><code>      // Check collision\n      if (playerRect.getBounds2D().intersects(ninja.visionArc.getBounds2D())) {\n          // Create an area of the object for greater precision\n          Area area = new Area(playerRect);\n          area.intersect(new Area(ninja.visionArc));\n          // After checking if the area intersects a second time make the NPC &quot;See&quot; the player\n          if (!area.isEmpty()) {\n              ninja.seesPlayer = true;\n          }\n          else {\n              ninja.seesPlayer = false;\n          }\n      }\n  }\n</code></pre>\n<p>}</p>\n</li>\n</ul>\n<p>Can you help me correct the actual positions of the arcs for my collision detection? I have tried creating new shapes so I can have one to do math on and one to draw to the screen but I scrapped that and am starting again from here.\n[1]: <a href=\"https://i.stack.imgur.com/rUvTM.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/rUvTM.png</a>\n[2]: <a href=\"https://github.com/ShadowDraco/ArcCollisionDetection\" rel=\"nofollow noreferrer\">https://github.com/ShadowDraco/ArcCollisionDetection</a></p>\n"},{"tags":["java","scala","arraylist"],"answers":[{"tags":[],"owner":{"account_id":5619892,"reputation":2614,"user_id":4450090,"accept_rate":69,"display_name":"Dariusz Krynicki"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590050351,"creation_date":1590050351,"answer_id":61930514,"question_id":61928886,"body_markdown":"```import scala.collection.JavaConversions._;```\r\n\r\n```x.toSeq``` solves the problem.","title":"Pyspark list to Scala Sequence","body":"<p><code>import scala.collection.JavaConversions._;</code></p>\n\n<p><code>x.toSeq</code> solves the problem.</p>\n"}],"owner":{"account_id":5619892,"reputation":2614,"user_id":4450090,"accept_rate":69,"display_name":"Dariusz Krynicki"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":641,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660851895,"creation_date":1590043878,"question_id":61928886,"body_markdown":"I have scala class that accepts one argument that is Pyspark List.\r\n\r\nIt works with ArrayList but it does not with Sequence.\r\n\r\nMy code is:\r\n\r\n    class HelloWorld(x: Seq[String]) {\r\n        val elo = x\r\n        ...\r\n\r\nIn Pyspark I do:\r\nelo = sc._jvm.HelloWorld([&quot;A&quot;, &quot;B&quot;]).someMethod()\r\n\r\nThe error i get is \r\n\r\n    py4j.Py4JException: Constructor com.matching.HelloWorld([class java.util.ArrayList]) does not exist\r\n\r\nSo, I do in Scala `import java.util.ArrayList` and it works but I want to avoid Scala type: Sequence and avoid Java imports.\r\n\r\nEDIT:\r\nI see this:\r\nhttps://www.py4j.org/advanced_topics.html\r\n\r\nI know Pyspark uses Py4J to allow use Python wrappers around Java so it can use JVM...but I would expect Scala collections to be able to use ...\r\n\r\nSo, I can not use Scala Sequence?","title":"Pyspark list to Scala Sequence","body":"<p>I have scala class that accepts one argument that is Pyspark List.</p>\n\n<p>It works with ArrayList but it does not with Sequence.</p>\n\n<p>My code is:</p>\n\n<pre><code>class HelloWorld(x: Seq[String]) {\n    val elo = x\n    ...\n</code></pre>\n\n<p>In Pyspark I do:\nelo = sc._jvm.HelloWorld([\"A\", \"B\"]).someMethod()</p>\n\n<p>The error i get is </p>\n\n<pre><code>py4j.Py4JException: Constructor com.matching.HelloWorld([class java.util.ArrayList]) does not exist\n</code></pre>\n\n<p>So, I do in Scala <code>import java.util.ArrayList</code> and it works but I want to avoid Scala type: Sequence and avoid Java imports.</p>\n\n<p>EDIT:\nI see this:\n<a href=\"https://www.py4j.org/advanced_topics.html\" rel=\"nofollow noreferrer\">https://www.py4j.org/advanced_topics.html</a></p>\n\n<p>I know Pyspark uses Py4J to allow use Python wrappers around Java so it can use JVM...but I would expect Scala collections to be able to use ...</p>\n\n<p>So, I can not use Scala Sequence?</p>\n"},{"tags":["java","android","postgresql","heroku","heroku-postgres"],"answers":[{"tags":[],"owner":{"account_id":25229135,"reputation":556,"user_id":19064525,"display_name":"SeanH"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1656800256,"creation_date":1656800256,"answer_id":72842766,"question_id":72842455,"body_markdown":"The url : url = &quot;jdbc:postgresql://username:password@host:port/database&quot; is not correct.\r\nThe correct format is: \r\n`jdbc:postgresql://{host}[:{port}]/[{database}]`\r\nYou can use: \r\n\r\n        private String url = &quot;jdbc:postgresql://host:port/database&quot;;\r\n    private Connection connection;\r\n    private void connect() {\r\n        try {\r\n            DriverManager.registerDriver(new org.postgresql.Driver());\r\n            connection = DriverManager.getConnection(url, username, password);\r\n        } catch (Exception e) {\r\n            System.out.print(e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }","title":"org.postgresql.util.PSQLException: The connection attempt failed. Caused by: java.net.UnknownHostException","body":"<p>The url : url = &quot;jdbc:postgresql://username:password@host:port/database&quot; is not correct.\nThe correct format is:\n<code>jdbc:postgresql://{host}[:{port}]/[{database}]</code>\nYou can use:</p>\n<pre><code>    private String url = &quot;jdbc:postgresql://host:port/database&quot;;\nprivate Connection connection;\nprivate void connect() {\n    try {\n        DriverManager.registerDriver(new org.postgresql.Driver());\n        connection = DriverManager.getConnection(url, username, password);\n    } catch (Exception e) {\n        System.out.print(e.getMessage());\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":23149464,"reputation":23,"user_id":17251730,"display_name":"SpacemanSps"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1851,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660850383,"creation_date":1656796407,"question_id":72842455,"body_markdown":"I&#39;m trying to connect to postgresql from Heroku (DB is by amazon aws) in Android java\r\n\r\nIn my host url address is like this \r\n\r\n    postgres://username:password@host:port/database\r\n\r\nbut with jdbc connect I&#39;m using \r\n\r\n    jdbc:postgresql://username:password@host:port/database\r\n\r\nI&#39;m not sure if that&#39;s the problem because I couldn&#39;t find any gradle dependency for that\r\n\r\nThis is my build.gradle\r\n`implementation group: &#39;org.postgresql&#39;, name: &#39;postgresql&#39;, version: &#39;42.4.0&#39;`\r\n\r\nThis is my Java code\r\n\r\n    \tprivate String url = &quot;jdbc:postgresql://username:password@host:port/database&quot;;\r\n    private Connection connection;\r\n\tprivate void connect() {\r\n        try {\r\n            DriverManager.registerDriver(new org.postgresql.Driver());\r\n            connection = DriverManager.getConnection(url);\r\n        } catch (Exception e) {\r\n            System.out.print(e.getMessage());\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\nand when I run the program I get this error\r\n\r\n    W/System.err: org.postgresql.util.PSQLException: The connection attempt failed.\r\n        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:331)\r\n        at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\r\n        at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223)\r\n        at org.postgresql.Driver.makeConnection(Driver.java:402)\r\n        at org.postgresql.Driver.connect(Driver.java:261)\r\n        W/System.err:     at java.sql.DriverManager.getConnection(DriverManager.java:580)\r\n        at java.sql.DriverManager.getConnection(DriverManager.java:236)\r\n        at com.example.myapplication.Database$1.run(Database.java:33)\r\n        at java.lang.Thread.run(Thread.java:929)\r\n    Caused by: java.net.UnknownHostException: username:password@host\r\n        W/System.err:     at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:208)\r\n        at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\r\n        at java.net.Socket.connect(Socket.java:621)\r\n        at org.postgresql.core.PGStream.createSocket(PGStream.java:241)\r\n        at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:98)\r\n        at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:109)\r\n        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235)\r\n    \t... 8 more\r\n\r\nCan anyone help me please to solve this?\r\n\r\n","title":"org.postgresql.util.PSQLException: The connection attempt failed. Caused by: java.net.UnknownHostException","body":"<p>I'm trying to connect to postgresql from Heroku (DB is by amazon aws) in Android java</p>\n<p>In my host url address is like this</p>\n<pre><code>postgres://username:password@host:port/database\n</code></pre>\n<p>but with jdbc connect I'm using</p>\n<pre><code>jdbc:postgresql://username:password@host:port/database\n</code></pre>\n<p>I'm not sure if that's the problem because I couldn't find any gradle dependency for that</p>\n<p>This is my build.gradle\n<code>implementation group: 'org.postgresql', name: 'postgresql', version: '42.4.0'</code></p>\n<p>This is my Java code</p>\n<pre><code>    private String url = &quot;jdbc:postgresql://username:password@host:port/database&quot;;\nprivate Connection connection;\nprivate void connect() {\n    try {\n        DriverManager.registerDriver(new org.postgresql.Driver());\n        connection = DriverManager.getConnection(url);\n    } catch (Exception e) {\n        System.out.print(e.getMessage());\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>and when I run the program I get this error</p>\n<pre><code>W/System.err: org.postgresql.util.PSQLException: The connection attempt failed.\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:331)\n    at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\n    at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:223)\n    at org.postgresql.Driver.makeConnection(Driver.java:402)\n    at org.postgresql.Driver.connect(Driver.java:261)\n    W/System.err:     at java.sql.DriverManager.getConnection(DriverManager.java:580)\n    at java.sql.DriverManager.getConnection(DriverManager.java:236)\n    at com.example.myapplication.Database$1.run(Database.java:33)\n    at java.lang.Thread.run(Thread.java:929)\nCaused by: java.net.UnknownHostException: username:password@host\n    W/System.err:     at java.net.AbstractPlainSocketImpl.connect(AbstractPlainSocketImpl.java:208)\n    at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:436)\n    at java.net.Socket.connect(Socket.java:621)\n    at org.postgresql.core.PGStream.createSocket(PGStream.java:241)\n    at org.postgresql.core.PGStream.&lt;init&gt;(PGStream.java:98)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:109)\n    at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:235)\n    ... 8 more\n</code></pre>\n<p>Can anyone help me please to solve this?</p>\n"},{"tags":["java","android","android-edittext","number-formatting","textwatcher"],"answers":[{"tags":[],"owner":{"account_id":11606219,"reputation":53,"user_id":8501855,"display_name":"TechVINO"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1521351459,"creation_date":1521351459,"answer_id":49344802,"question_id":28757931,"body_markdown":"add this into your app&#39;s Gradle \r\ncompile &#39;com.aldoapps:autoformatedittext:0.9.3&#39;\r\nin XML\r\nxmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\r\n\r\n    &lt;com.aldoapps.autoformatedittext.AutoFormatEditText\r\n        android:layout_width=&quot;match_parent&quot;\r\n        android:layout_height=&quot;wrap_content&quot;\r\n        app:isDecimal=&quot;true&quot;\r\n        android:maxLength=&quot;8&quot;\r\n        android:id=&quot;@+id/number&quot;/&gt;\r\n\r\nThis lib automatically add (,) (.)","title":"How to format the input of EditText when typing with thousands separators (,) in Android?","body":"<p>add this into your app's Gradle \ncompile 'com.aldoapps:autoformatedittext:0.9.3'\nin XML\nxmlns:app=\"http://schemas.android.com/apk/res-auto\"</p>\n\n<pre><code>&lt;com.aldoapps.autoformatedittext.AutoFormatEditText\n    android:layout_width=\"match_parent\"\n    android:layout_height=\"wrap_content\"\n    app:isDecimal=\"true\"\n    android:maxLength=\"8\"\n    android:id=\"@+id/number\"/&gt;\n</code></pre>\n\n<p>This lib automatically add (,) (.)</p>\n"},{"tags":[],"owner":{"account_id":12692805,"reputation":1,"user_id":9222219,"display_name":"Somnath Lenka"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1521352779,"creation_date":1521352779,"answer_id":49344918,"question_id":28757931,"body_markdown":"    DecimalFormat formatter = new DecimalFormat(&quot;#,###,###&quot;);\r\n    String yourFormattedString = formatter.format(100000);\r\n\r\nUse DecimalFormat \r\n","title":"How to format the input of EditText when typing with thousands separators (,) in Android?","body":"<pre><code>DecimalFormat formatter = new DecimalFormat(\"#,###,###\");\nString yourFormattedString = formatter.format(100000);\n</code></pre>\n\n<p>Use DecimalFormat </p>\n"},{"tags":[],"owner":{"account_id":12112213,"reputation":314,"user_id":8848409,"display_name":"Sava Dimitrijević"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1635720663,"creation_date":1635720663,"answer_id":69791174,"question_id":28757931,"body_markdown":"Kotlin version of [Adrian Cid Almageur&#39;s comment][1]\r\n\r\n```\r\nimport android.text.Editable\r\nimport android.text.TextWatcher\r\nimport android.widget.EditText\r\nimport java.text.DecimalFormat\r\nimport java.text.ParseException\r\n\r\nclass NumberTextWatcher(private val editText: EditText) : TextWatcher {\r\n\r\n    private val decimalFormat = DecimalFormat(&quot;#,###.##&quot;)\r\n    private val decimalFormatNoFrac = DecimalFormat(&quot;#,###&quot;)\r\n\r\n    private var hasFractionalPart = false\r\n\r\n    init {\r\n        decimalFormat.isDecimalSeparatorAlwaysShown = true\r\n    }\r\n\r\n    override fun afterTextChanged(s: Editable?) {\r\n        editText.removeTextChangedListener(this)\r\n\r\n        try {\r\n            val initialLength = editText.text.length\r\n\r\n            val v = s.toString()\r\n                .replace(decimalFormat.decimalFormatSymbols.groupingSeparator.toString(), &quot;&quot;)\r\n            val number = decimalFormat.parse(v)\r\n\r\n            val cp = editText.selectionStart\r\n            if (hasFractionalPart) {\r\n                editText.setText(decimalFormat.format(number))\r\n            } else {\r\n                editText.setText(decimalFormatNoFrac.format(number))\r\n            }\r\n            val endLength = editText.length()\r\n            val selection = (cp + (endLength - initialLength))\r\n            if (selection &gt; 0 &amp;&amp; selection &lt;= editText.text.length) {\r\n                editText.setSelection(selection)\r\n            } else {\r\n                editText.setSelection(editText.text.length - 1)\r\n            }\r\n        } catch (nfe: NumberFormatException) {\r\n\r\n        } catch (ex: ParseException) {\r\n\r\n        }\r\n\r\n        editText.addTextChangedListener(this)\r\n    }\r\n\r\n    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\r\n        hasFractionalPart =\r\n            s.toString().contains(decimalFormat.decimalFormatSymbols.decimalSeparator)\r\n    }\r\n\r\n    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}\r\n}\r\n```\r\n\r\n  [1]: https://stackoverflow.com/a/28758064/8848409","title":"How to format the input of EditText when typing with thousands separators (,) in Android?","body":"<p>Kotlin version of <a href=\"https://stackoverflow.com/a/28758064/8848409\">Adrian Cid Almageur's comment</a></p>\n<pre><code>import android.text.Editable\nimport android.text.TextWatcher\nimport android.widget.EditText\nimport java.text.DecimalFormat\nimport java.text.ParseException\n\nclass NumberTextWatcher(private val editText: EditText) : TextWatcher {\n\n    private val decimalFormat = DecimalFormat(&quot;#,###.##&quot;)\n    private val decimalFormatNoFrac = DecimalFormat(&quot;#,###&quot;)\n\n    private var hasFractionalPart = false\n\n    init {\n        decimalFormat.isDecimalSeparatorAlwaysShown = true\n    }\n\n    override fun afterTextChanged(s: Editable?) {\n        editText.removeTextChangedListener(this)\n\n        try {\n            val initialLength = editText.text.length\n\n            val v = s.toString()\n                .replace(decimalFormat.decimalFormatSymbols.groupingSeparator.toString(), &quot;&quot;)\n            val number = decimalFormat.parse(v)\n\n            val cp = editText.selectionStart\n            if (hasFractionalPart) {\n                editText.setText(decimalFormat.format(number))\n            } else {\n                editText.setText(decimalFormatNoFrac.format(number))\n            }\n            val endLength = editText.length()\n            val selection = (cp + (endLength - initialLength))\n            if (selection &gt; 0 &amp;&amp; selection &lt;= editText.text.length) {\n                editText.setSelection(selection)\n            } else {\n                editText.setSelection(editText.text.length - 1)\n            }\n        } catch (nfe: NumberFormatException) {\n\n        } catch (ex: ParseException) {\n\n        }\n\n        editText.addTextChangedListener(this)\n    }\n\n    override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {\n        hasFractionalPart =\n            s.toString().contains(decimalFormat.decimalFormatSymbols.decimalSeparator)\n    }\n\n    override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}\n}\n</code></pre>\n"}],"owner":{"account_id":5432839,"reputation":923,"user_id":4323139,"accept_rate":24,"display_name":"mahdi yamani"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":20135,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":3,"score":12,"last_activity_date":1660850372,"creation_date":1425013698,"question_id":28757931,"body_markdown":"I&#39;ve an `edittext` , it only gets numeric without decimal numbers. \r\n\r\n    android:inputType=&quot;number&quot;\r\n\r\nI want to separate thousands while I&#39;m typing . For example 25,000 . \r\n\r\nI know I should use `TextWatcher` and I&#39;ve used this code but I couldn&#39;t make it work :\r\n\r\n    @Override\r\n\t\t\tpublic void afterTextChanged(Editable viewss) {\r\n\t\t\t\tString s = null;\r\n\t\t\t    try {\r\n\t\t\t        // The comma in the format specifier does the trick\r\n\t\t\t        s = String.format(&quot;%,d&quot;, Long.parseLong(viewss.toString()));\r\n\t\t\t    } catch (NumberFormatException e) {\r\n\t\t\t    }\r\n\t\t\t   \r\n\t\t\t}\r\n\r\nCould you help me to do so ?","title":"How to format the input of EditText when typing with thousands separators (,) in Android?","body":"<p>I've an <code>edittext</code> , it only gets numeric without decimal numbers. </p>\n\n<pre><code>android:inputType=\"number\"\n</code></pre>\n\n<p>I want to separate thousands while I'm typing . For example 25,000 . </p>\n\n<p>I know I should use <code>TextWatcher</code> and I've used this code but I couldn't make it work :</p>\n\n<pre><code>@Override\n        public void afterTextChanged(Editable viewss) {\n            String s = null;\n            try {\n                // The comma in the format specifier does the trick\n                s = String.format(\"%,d\", Long.parseLong(viewss.toString()));\n            } catch (NumberFormatException e) {\n            }\n\n        }\n</code></pre>\n\n<p>Could you help me to do so ?</p>\n"},{"tags":["java","list","random"],"comments":[{"owner":{"account_id":1938802,"reputation":12091,"user_id":1745544,"accept_rate":23,"display_name":"OldProgrammer"},"score":0,"creation_date":1660847883,"post_id":73407945,"comment_id":129636620,"body_markdown":"you need to post a [mcve]","body":"you need to post a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"account_id":1681237,"reputation":1779,"user_id":1545425,"display_name":"Luca Tampellini"},"score":0,"creation_date":1660848851,"post_id":73407945,"comment_id":129636948,"body_markdown":"What does &quot;Based on user input the picked item will be removed from the list and then goes back into one of the three lists&quot; mean? Does that mean that you want the user to specify in which list the item must be re-inserted?","body":"What does &quot;Based on user input the picked item will be removed from the list and then goes back into one of the three lists&quot; mean? Does that mean that you want the user to specify in which list the item must be re-inserted?"},{"owner":{"account_id":20552401,"reputation":13,"user_id":15084808,"display_name":"notmyname"},"score":0,"creation_date":1660849052,"post_id":73407945,"comment_id":129637013,"body_markdown":"@LucaTampellini yes, it means that the user picks one of three categories and based on that, the item will be moved into the list with that category.","body":"@LucaTampellini yes, it means that the user picks one of three categories and based on that, the item will be moved into the list with that category."},{"owner":{"account_id":3212023,"reputation":1016,"user_id":17856705,"display_name":"Computable"},"score":0,"creation_date":1660849639,"post_id":73407945,"comment_id":129637173,"body_markdown":"If one or two of the lists are allowed to go empty and the solution must then pick from a list not empty, that would seem to potentially skew the expected probability outcomes.  You would need to refine the specification to indicate what are the expected probabilities in the case of two non-empty list.  One remaining list is obvious.","body":"If one or two of the lists are allowed to go empty and the solution must then pick from a list not empty, that would seem to potentially skew the expected probability outcomes.  You would need to refine the specification to indicate what are the expected probabilities in the case of two non-empty list.  One remaining list is obvious."},{"owner":{"account_id":20552401,"reputation":13,"user_id":15084808,"display_name":"notmyname"},"score":0,"creation_date":1660851765,"post_id":73407945,"comment_id":129637784,"body_markdown":"@Gardener Yes I thought so, but how can I deal with that? Let&#39;s say if list 1 is emtpy I want to have 65% for list 2 and 35% for list 3? So I know I would have to redefine all cases but one example would help me already..","body":"@Gardener Yes I thought so, but how can I deal with that? Let&#39;s say if list 1 is emtpy I want to have 65% for list 2 and 35% for list 3? So I know I would have to redefine all cases but one example would help me already.."},{"owner":{"account_id":3741438,"reputation":12025,"user_id":3111149,"accept_rate":87,"display_name":"Matteo NNZ"},"score":0,"creation_date":1660853853,"post_id":73407945,"comment_id":129638362,"body_markdown":"Create one list of lists and put inside all the lists from which you want to pick the elements randomly. Define the probability ranges based on the size of that list (if you have 3 elements you create 3 probability ranges like you have now, if you have two you create two etc.). Then at each input you borrow the list from that big list and pick the element. Before putting it back, check if it&#39;s empty and if it is, then don&#39;t put the list back into the big list. Like that, you&#39;re always sure both probabilities are well distributed and lists are always full when you fish from them","body":"Create one list of lists and put inside all the lists from which you want to pick the elements randomly. Define the probability ranges based on the size of that list (if you have 3 elements you create 3 probability ranges like you have now, if you have two you create two etc.). Then at each input you borrow the list from that big list and pick the element. Before putting it back, check if it&#39;s empty and if it is, then don&#39;t put the list back into the big list. Like that, you&#39;re always sure both probabilities are well distributed and lists are always full when you fish from them"},{"owner":{"account_id":20552401,"reputation":13,"user_id":15084808,"display_name":"notmyname"},"score":0,"creation_date":1660860072,"post_id":73407945,"comment_id":129639950,"body_markdown":"@MatteoNNZ thanks, thats an awesome idea, im gonna implement it like that! Thanks!","body":"@MatteoNNZ thanks, thats an awesome idea, im gonna implement it like that! Thanks!"}],"answers":[{"tags":[],"owner":{"account_id":23662754,"reputation":19,"user_id":17690611,"display_name":"PastaLaPate"},"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1660849367,"creation_date":1660848827,"answer_id":73408140,"question_id":73407945,"body_markdown":"```java\r\n    private static List&lt;String&gt; list1;\r\n    private static List&lt;String&gt; list2;\r\n    private static List&lt;String&gt; list3;\r\n\r\n    public static void main(String[] args) {\r\n\r\n        list1 = new ArrayList&lt;&gt;();\r\n        list1.add(&quot;1&quot;);\r\n        list1.add(&quot;2&quot;);\r\n        list2 = new ArrayList&lt;&gt;();\r\n        list2.add(&quot;3&quot;);\r\n        list2.add(&quot;4&quot;);\r\n        list2.add(&quot;5&quot;);\r\n        list3 = new ArrayList&lt;&gt;();\r\n        list3.add(&quot;6&quot;);\r\n        list3.add(&quot;7&quot;);\r\n        list3.add(&quot;8&quot;);\r\n        list3.add(&quot;9&quot;);\r\n\r\n        Random r = new Random();\r\n        int p = r.nextInt(100);\r\n\r\n        if (p &lt; 50){ // 50%\r\n            p = r.nextInt(list1.size());\r\n            System.out.println(&quot;list 1 : &quot; + list1.get(p));\r\n            addToAnotherList(list1, p);\r\n        }\r\n        else if (p &lt; 85){ // 35%\r\n            p = r.nextInt(list2.size());\r\n            System.out.println(&quot;list 2 : &quot; + list2.get(p));\r\n            addToAnotherList(list2, p);\r\n        } else { // 15%\r\n            p = r.nextInt(list3.size());\r\n            System.out.println(&quot;list 3 : &quot; + list3.get(p));\r\n            addToAnotherList(list3, p);\r\n        }\r\n    }\r\n\r\n    private static void addToAnotherList(List&lt;String&gt; originalList, int i) {\r\n        if (originalList.size() != 1) {\r\n            String toAdd = originalList.get(i);\r\n            originalList.remove(i);\r\n            Random r = new Random();\r\n            int p = r.nextInt(2);\r\n            if (p == 0) {\r\n                list1.add(toAdd);\r\n            } else if (p == 1) {\r\n                list2.add(toAdd);\r\n            } else {\r\n                list3.add(toAdd);\r\n            }\r\n        }\r\n    }\r\n```","title":"Random element from different lists","body":"<pre class=\"lang-java prettyprint-override\"><code>    private static List&lt;String&gt; list1;\n    private static List&lt;String&gt; list2;\n    private static List&lt;String&gt; list3;\n\n    public static void main(String[] args) {\n\n        list1 = new ArrayList&lt;&gt;();\n        list1.add(&quot;1&quot;);\n        list1.add(&quot;2&quot;);\n        list2 = new ArrayList&lt;&gt;();\n        list2.add(&quot;3&quot;);\n        list2.add(&quot;4&quot;);\n        list2.add(&quot;5&quot;);\n        list3 = new ArrayList&lt;&gt;();\n        list3.add(&quot;6&quot;);\n        list3.add(&quot;7&quot;);\n        list3.add(&quot;8&quot;);\n        list3.add(&quot;9&quot;);\n\n        Random r = new Random();\n        int p = r.nextInt(100);\n\n        if (p &lt; 50){ // 50%\n            p = r.nextInt(list1.size());\n            System.out.println(&quot;list 1 : &quot; + list1.get(p));\n            addToAnotherList(list1, p);\n        }\n        else if (p &lt; 85){ // 35%\n            p = r.nextInt(list2.size());\n            System.out.println(&quot;list 2 : &quot; + list2.get(p));\n            addToAnotherList(list2, p);\n        } else { // 15%\n            p = r.nextInt(list3.size());\n            System.out.println(&quot;list 3 : &quot; + list3.get(p));\n            addToAnotherList(list3, p);\n        }\n    }\n\n    private static void addToAnotherList(List&lt;String&gt; originalList, int i) {\n        if (originalList.size() != 1) {\n            String toAdd = originalList.get(i);\n            originalList.remove(i);\n            Random r = new Random();\n            int p = r.nextInt(2);\n            if (p == 0) {\n                list1.add(toAdd);\n            } else if (p == 1) {\n                list2.add(toAdd);\n            } else {\n                list3.add(toAdd);\n            }\n        }\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1681237,"reputation":1779,"user_id":1545425,"display_name":"Luca Tampellini"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660849661,"creation_date":1660849661,"answer_id":73408263,"question_id":73407945,"body_markdown":"Add these 2 private static methods:\r\n\r\n    private static List getOrGiveAnother(final List... lists) throws NoSuchElementException {\r\n        for (var list : lists) {\r\n            if(!list.isEmpty()) return list;\r\n        }\r\n        throw new NoSuchElementException();\r\n    }\r\n\r\n    private static Object randomValueFromList(final List list, final Random randomizer) {\r\n        return list.get(randomizer.nextInt(list.size()));\r\n    }\r\n\r\nUse them like this:\r\n\r\n    Random random = new Random();\r\n        double number = Math.random();\r\n        try {\r\n            if (number &lt;= 0.5) {\r\n                randomValueFromList(getOrGiveAnother(list1, list2, list3), random);\r\n            } else if (number &gt; 0.5 &amp;&amp; number &lt;= 0.85) {\r\n                randomValueFromList(getOrGiveAnother(list2, list3, list1), random);\r\n            } else if (number &gt; 0.85 &amp;&amp; number &lt;= 1) {\r\n                randomValueFromList(getOrGiveAnother(list3, list1, list2), random);\r\n            }\r\n        } catch (NoSuchElementException e) {\r\n            //if you fall here all lists were empty : do something to handle this case\r\n        }","title":"Random element from different lists","body":"<p>Add these 2 private static methods:</p>\n<pre><code>private static List getOrGiveAnother(final List... lists) throws NoSuchElementException {\n    for (var list : lists) {\n        if(!list.isEmpty()) return list;\n    }\n    throw new NoSuchElementException();\n}\n\nprivate static Object randomValueFromList(final List list, final Random randomizer) {\n    return list.get(randomizer.nextInt(list.size()));\n}\n</code></pre>\n<p>Use them like this:</p>\n<pre><code>Random random = new Random();\n    double number = Math.random();\n    try {\n        if (number &lt;= 0.5) {\n            randomValueFromList(getOrGiveAnother(list1, list2, list3), random);\n        } else if (number &gt; 0.5 &amp;&amp; number &lt;= 0.85) {\n            randomValueFromList(getOrGiveAnother(list2, list3, list1), random);\n        } else if (number &gt; 0.85 &amp;&amp; number &lt;= 1) {\n            randomValueFromList(getOrGiveAnother(list3, list1, list2), random);\n        }\n    } catch (NoSuchElementException e) {\n        //if you fall here all lists were empty : do something to handle this case\n    }\n</code></pre>\n"}],"owner":{"account_id":20552401,"reputation":13,"user_id":15084808,"display_name":"notmyname"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":73408263,"answer_count":2,"score":0,"last_activity_date":1660849661,"creation_date":1660847741,"question_id":73407945,"body_markdown":"I want to pick a random element from three different lists. But I want to pick it with different probabilities. I want to have these probabilites:\r\n```\r\n50% for `list_1`\r\n35% for `list_2`\r\n15% for `list_3`\r\n```\r\nBased on user input the picked item will be removed from the list and then goes back into one of the three lists. Then a new item gets picked. The problem is, that one or two of these lists can be empty and then it should just pick an element from the lists that are not empty. And I don&#39;t want to have the same item picked twice in a row.\r\nI tried it with generating a random number between 0 and 1 and based on the result I pick an item from one of the lists, but I always had to check if the list was empty and if so I had to call the method again. I guess there is a better way to do this. Can somebody help me?\r\n\r\nHere is my code:\r\n```java\r\nRandom random = new Random();\r\n        double number = Math.random();\r\n        if (number &lt;= 0.5) {\r\n            if (!list1.isEmpty()) {\r\n                item = list1.get(random.nextInt(list1.size()));\r\n            }\r\n        } else if (number &gt; 0.5 &amp;&amp; number &lt;= 0.85) {\r\n            if (!list2.isEmpty()) {\r\n                item = list2.get(random.nextInt(list2.size()));\r\n            }\r\n        } else if (number &gt; 0.85 &amp;&amp; number &lt;= 1) {\r\n            if (!list3.isEmpty()) {\r\n                item = list3.get(random.nextInt(list3.size()));\r\n            }\r\n        }\r\n```\r\nBut the problem  here is, that if the list which would be selected is empty, I get no item and I need to recall that method (multiple times).","title":"Random element from different lists","body":"<p>I want to pick a random element from three different lists. But I want to pick it with different probabilities. I want to have these probabilites:</p>\n<pre><code>50% for `list_1`\n35% for `list_2`\n15% for `list_3`\n</code></pre>\n<p>Based on user input the picked item will be removed from the list and then goes back into one of the three lists. Then a new item gets picked. The problem is, that one or two of these lists can be empty and then it should just pick an element from the lists that are not empty. And I don't want to have the same item picked twice in a row.\nI tried it with generating a random number between 0 and 1 and based on the result I pick an item from one of the lists, but I always had to check if the list was empty and if so I had to call the method again. I guess there is a better way to do this. Can somebody help me?</p>\n<p>Here is my code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Random random = new Random();\n        double number = Math.random();\n        if (number &lt;= 0.5) {\n            if (!list1.isEmpty()) {\n                item = list1.get(random.nextInt(list1.size()));\n            }\n        } else if (number &gt; 0.5 &amp;&amp; number &lt;= 0.85) {\n            if (!list2.isEmpty()) {\n                item = list2.get(random.nextInt(list2.size()));\n            }\n        } else if (number &gt; 0.85 &amp;&amp; number &lt;= 1) {\n            if (!list3.isEmpty()) {\n                item = list3.get(random.nextInt(list3.size()));\n            }\n        }\n</code></pre>\n<p>But the problem  here is, that if the list which would be selected is empty, I get no item and I need to recall that method (multiple times).</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":2,"creation_date":1660844926,"post_id":73407398,"comment_id":129635623,"body_markdown":"Once you have them inside a list check [`allMatch`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#allMatch(java.util.function.Predicate))","body":"Once you have them inside a list check <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Stream.html#allMatch(java.util.function.Predicate)\" rel=\"nofollow noreferrer\"><code>allMatch</code></a>"},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":0,"creation_date":1660844958,"post_id":73407398,"comment_id":129635635,"body_markdown":"What is CA1 and friends?  Can you share your declarations?  If CA1 has a type (i.e. a class), you should share that also.","body":"What is CA1 and friends?  Can you share your declarations?  If CA1 has a type (i.e. a class), you should share that also."},{"owner":{"account_id":36137,"reputation":178789,"user_id":102937,"accept_rate":90,"display_name":"Robert Harvey"},"score":1,"creation_date":1660845019,"post_id":73407398,"comment_id":129635649,"body_markdown":"But Federico has the right idea.  Make a list or array of your objects, and you can loop over that.","body":"But Federico has the right idea.  Make a list or array of your objects, and you can loop over that."},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":6,"creation_date":1660845131,"post_id":73407398,"comment_id":129635691,"body_markdown":"When you find yourself naming variables or fields with sequential numbers, think about using [collections](https://en.wikipedia.org/wiki/Java_collections_framework) instead. Likely a `List` or a `Set`.","body":"When you find yourself naming variables or fields with sequential numbers, think about using <a href=\"https://en.wikipedia.org/wiki/Java_collections_framework\" rel=\"nofollow noreferrer\">collections</a> instead. Likely a <code>List</code> or a <code>Set</code>."},{"owner":{"account_id":1937019,"reputation":4428,"user_id":1744230,"accept_rate":100,"display_name":"QBrute"},"score":2,"creation_date":1660845872,"post_id":73407398,"comment_id":129635934,"body_markdown":"Also `if(someVariable == true)` can be simplified to `if(someVariable)`","body":"Also <code>if(someVariable == true)</code> can be simplified to <code>if(someVariable)</code>"},{"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1660846050,"post_id":73407398,"comment_id":129635975,"body_markdown":"I see the logic here is a little different. Adding the objects to a `List`, like others have suggested, is still definitely the place to start, but there&#39;s more to it than that.","body":"I see the logic here is a little different. Adding the objects to a <code>List</code>, like others have suggested, is still definitely the place to start, but there&#39;s more to it than that."},{"owner":{"account_id":26048869,"reputation":59,"user_id":19752467,"display_name":"Gareth"},"score":0,"creation_date":1660846471,"post_id":73407398,"comment_id":129636126,"body_markdown":"@RobertHarvey CA1 - CA57 are instances of a class, It&#39;s the class that has all the attribute states for the custom product. the CA1.generate and others are booleans checking to see if there are any compatibility issues within each of the products being designed. If all are without issue, the quote is generated. I have all the CA1 - CA57 instances in a list, I&#39;ve used that to loop them for other similar function, but I&#39;m struggling with the logic at checking each generate boolean based on which # button is being clicked.","body":"@RobertHarvey CA1 - CA57 are instances of a class, It&#39;s the class that has all the attribute states for the custom product. the CA1.generate and others are booleans checking to see if there are any compatibility issues within each of the products being designed. If all are without issue, the quote is generated. I have all the CA1 - CA57 instances in a list, I&#39;ve used that to loop them for other similar function, but I&#39;m struggling with the logic at checking each generate boolean based on which # button is being clicked."},{"owner":{"account_id":45934,"reputation":203659,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1660848571,"post_id":73407398,"comment_id":129636858,"body_markdown":"You should really rethink the design of your program. Why do you need to have those variables `CA1` to `CA57`? Get rid of them, keep track of the objects in a collection or array.","body":"You should really rethink the design of your program. Why do you need to have those variables <code>CA1</code> to <code>CA57</code>? Get rid of them, keep track of the objects in a collection or array."}],"answers":[{"tags":[],"owner":{"account_id":2496,"reputation":266234,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1660847056,"creation_date":1660847056,"answer_id":73407813,"question_id":73407398,"body_markdown":"\r\n```java\r\n/* Create a list to hold CA1..CA57 */\r\nList&lt;MyClass&gt; allCas = new ArrayList&lt;&gt;();\r\n/* As you create CA1..CA57, whether in a loop or hardcoded, add them to your list, in order*/\r\n...\r\nallCas.add(CA1);\r\n...\r\nallCas.add(CA31);\r\n...\r\nallCas.add(CA57);\r\n\r\n/* When button is clicked, find the related CA instance and check the preceding objects too. */\r\nint selected = IntStream.range(0, allCas.size())\r\n    .filter(idx -&gt; e.getSource() == allCas.get(idx))\r\n    .findFirst().getAsInt() + 1;\r\nif (allCas.stream().limit(selected).allMatch(ca -&gt; ca.generateCA1)) {\r\n    /* Fill quote and stuff. */\r\n    ...\r\n}\r\n```","title":"Is there a way to loop this is I don&#39;t have to write it out 57 times?","body":"<pre class=\"lang-java prettyprint-override\"><code>/* Create a list to hold CA1..CA57 */\nList&lt;MyClass&gt; allCas = new ArrayList&lt;&gt;();\n/* As you create CA1..CA57, whether in a loop or hardcoded, add them to your list, in order*/\n...\nallCas.add(CA1);\n...\nallCas.add(CA31);\n...\nallCas.add(CA57);\n\n/* When button is clicked, find the related CA instance and check the preceding objects too. */\nint selected = IntStream.range(0, allCas.size())\n    .filter(idx -&gt; e.getSource() == allCas.get(idx))\n    .findFirst().getAsInt() + 1;\nif (allCas.stream().limit(selected).allMatch(ca -&gt; ca.generateCA1)) {\n    /* Fill quote and stuff. */\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":26048869,"reputation":59,"user_id":19752467,"display_name":"Gareth"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":93,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"accepted_answer_id":73407813,"answer_count":1,"score":1,"last_activity_date":1660848495,"creation_date":1660844787,"question_id":73407398,"body_markdown":"I have a program that quotes up to 57 customizable products at one time. If there is a compatibility issue within one of the products the customer designs, an error pops up and a quote is not generated. I have it so if the generate button on line 57 is clicked, the program will check if lines 57, 56, 55... down to 1 are correct, then it will generate if they are. If line 56 is clicked, it checks 56 down to 1.\r\n\r\nIs there a ways to loop is so that I only have to write it out once?\r\n\r\nHere is my code:\r\n\r\n    if(e.getSource() == CA1.BTNgeneratequoteCA1)\r\n         {         \r\n            if(CA1.generateCA1 == true)\r\n            {\r\n               try\r\n               {\r\n               FillAllKIS();\r\n               E2fill();\r\n               FillQuote();\r\n               }\r\n               catch(IOException y)\r\n               {\r\n                  Logger.severe(y.getMessage());\r\n               }\r\n               RecordAllLines();\r\n            }\r\n             }\r\n             \r\n       // if statments for lines 2 to 56 here\r\n    \r\n       if(e.getSource() == CA57.BTNgeneratequoteCA1)\r\n             {         \r\n                if(CA1.generateCA1 == true &amp;&amp; CA2.generateCA1 == true &amp;&amp; CA3.generateCA1 == true &amp;&amp; CA4.generateCA1 == true &amp;&amp; CA5.generateCA1 == true &amp;&amp;\r\n                   CA6.generateCA1 == true &amp;&amp; CA7.generateCA1 == true &amp;&amp; CA8.generateCA1 == true &amp;&amp; CA9.generateCA1 == true &amp;&amp; CA10.generateCA1 == true &amp;&amp;\r\n                   CA11.generateCA1 == true &amp;&amp; CA12.generateCA1 == true &amp;&amp; CA13.generateCA1 == true &amp;&amp; CA14.generateCA1 == true &amp;&amp; CA15.generateCA1 == true &amp;&amp;\r\n                   CA16.generateCA1 == true &amp;&amp; CA17.generateCA1 == true &amp;&amp; CA18.generateCA1 == true &amp;&amp; CA19.generateCA1 == true &amp;&amp; CA20.generateCA1 == true &amp;&amp;\r\n                   CA21.generateCA1 == true &amp;&amp; CA22.generateCA1 == true &amp;&amp; CA23.generateCA1 == true &amp;&amp; CA24.generateCA1 == true &amp;&amp; CA25.generateCA1 == true &amp;&amp;\r\n                   CA26.generateCA1 == true &amp;&amp; CA27.generateCA1 == true &amp;&amp; CA28.generateCA1 == true &amp;&amp; CA29.generateCA1 == true &amp;&amp; CA30.generateCA1 == true &amp;&amp;\r\n                   CA31.generateCA1 == true &amp;&amp; CA32.generateCA1 == true &amp;&amp; CA33.generateCA1 == true &amp;&amp; CA34.generateCA1 == true &amp;&amp; CA35.generateCA1 == true &amp;&amp;\r\n                   CA36.generateCA1 == true &amp;&amp; CA37.generateCA1 == true &amp;&amp; CA38.generateCA1 == true &amp;&amp; CA39.generateCA1 == true &amp;&amp; CA40.generateCA1 == true &amp;&amp;\r\n                   CA41.generateCA1 == true &amp;&amp; CA42.generateCA1 == true &amp;&amp; CA43.generateCA1 == true &amp;&amp; CA44.generateCA1 == true &amp;&amp; CA45.generateCA1 == true &amp;&amp;\r\n                   CA46.generateCA1 == true &amp;&amp; CA47.generateCA1 == true &amp;&amp; CA48.generateCA1 == true &amp;&amp; CA49.generateCA1 == true &amp;&amp; CA50.generateCA1 == true &amp;&amp;\r\n                   CA51.generateCA1 == true &amp;&amp; CA52.generateCA1 == true &amp;&amp; CA53.generateCA1 == true &amp;&amp; CA54.generateCA1 == true &amp;&amp; CA55.generateCA1 == true &amp;&amp;\r\n                   CA56.generateCA1 == true &amp;&amp; CA57.generateCA1 == true)\r\n                {\r\n                   try\r\n                   {\r\n                   FillAllKIS();\r\n                   E2fill();\r\n                   FillQuote();\r\n                   }\r\n                   catch(IOException y)\r\n                   {\r\n                      Logger.severe(y.getMessage());\r\n                   }\r\n                   RecordAllLines();\r\n                }\r\n\r\nI thought about doing it with a list filled with the instances of the classes but I&#39;m struggling to think of how the logic would work for checking the `boolean` of each line, since there is another one to check with each added line item.","title":"Is there a way to loop this is I don&#39;t have to write it out 57 times?","body":"<p>I have a program that quotes up to 57 customizable products at one time. If there is a compatibility issue within one of the products the customer designs, an error pops up and a quote is not generated. I have it so if the generate button on line 57 is clicked, the program will check if lines 57, 56, 55... down to 1 are correct, then it will generate if they are. If line 56 is clicked, it checks 56 down to 1.</p>\n<p>Is there a ways to loop is so that I only have to write it out once?</p>\n<p>Here is my code:</p>\n<pre><code>if(e.getSource() == CA1.BTNgeneratequoteCA1)\n     {         \n        if(CA1.generateCA1 == true)\n        {\n           try\n           {\n           FillAllKIS();\n           E2fill();\n           FillQuote();\n           }\n           catch(IOException y)\n           {\n              Logger.severe(y.getMessage());\n           }\n           RecordAllLines();\n        }\n         }\n         \n   // if statments for lines 2 to 56 here\n\n   if(e.getSource() == CA57.BTNgeneratequoteCA1)\n         {         \n            if(CA1.generateCA1 == true &amp;&amp; CA2.generateCA1 == true &amp;&amp; CA3.generateCA1 == true &amp;&amp; CA4.generateCA1 == true &amp;&amp; CA5.generateCA1 == true &amp;&amp;\n               CA6.generateCA1 == true &amp;&amp; CA7.generateCA1 == true &amp;&amp; CA8.generateCA1 == true &amp;&amp; CA9.generateCA1 == true &amp;&amp; CA10.generateCA1 == true &amp;&amp;\n               CA11.generateCA1 == true &amp;&amp; CA12.generateCA1 == true &amp;&amp; CA13.generateCA1 == true &amp;&amp; CA14.generateCA1 == true &amp;&amp; CA15.generateCA1 == true &amp;&amp;\n               CA16.generateCA1 == true &amp;&amp; CA17.generateCA1 == true &amp;&amp; CA18.generateCA1 == true &amp;&amp; CA19.generateCA1 == true &amp;&amp; CA20.generateCA1 == true &amp;&amp;\n               CA21.generateCA1 == true &amp;&amp; CA22.generateCA1 == true &amp;&amp; CA23.generateCA1 == true &amp;&amp; CA24.generateCA1 == true &amp;&amp; CA25.generateCA1 == true &amp;&amp;\n               CA26.generateCA1 == true &amp;&amp; CA27.generateCA1 == true &amp;&amp; CA28.generateCA1 == true &amp;&amp; CA29.generateCA1 == true &amp;&amp; CA30.generateCA1 == true &amp;&amp;\n               CA31.generateCA1 == true &amp;&amp; CA32.generateCA1 == true &amp;&amp; CA33.generateCA1 == true &amp;&amp; CA34.generateCA1 == true &amp;&amp; CA35.generateCA1 == true &amp;&amp;\n               CA36.generateCA1 == true &amp;&amp; CA37.generateCA1 == true &amp;&amp; CA38.generateCA1 == true &amp;&amp; CA39.generateCA1 == true &amp;&amp; CA40.generateCA1 == true &amp;&amp;\n               CA41.generateCA1 == true &amp;&amp; CA42.generateCA1 == true &amp;&amp; CA43.generateCA1 == true &amp;&amp; CA44.generateCA1 == true &amp;&amp; CA45.generateCA1 == true &amp;&amp;\n               CA46.generateCA1 == true &amp;&amp; CA47.generateCA1 == true &amp;&amp; CA48.generateCA1 == true &amp;&amp; CA49.generateCA1 == true &amp;&amp; CA50.generateCA1 == true &amp;&amp;\n               CA51.generateCA1 == true &amp;&amp; CA52.generateCA1 == true &amp;&amp; CA53.generateCA1 == true &amp;&amp; CA54.generateCA1 == true &amp;&amp; CA55.generateCA1 == true &amp;&amp;\n               CA56.generateCA1 == true &amp;&amp; CA57.generateCA1 == true)\n            {\n               try\n               {\n               FillAllKIS();\n               E2fill();\n               FillQuote();\n               }\n               catch(IOException y)\n               {\n                  Logger.severe(y.getMessage());\n               }\n               RecordAllLines();\n            }\n</code></pre>\n<p>I thought about doing it with a list filled with the instances of the classes but I'm struggling to think of how the logic would work for checking the <code>boolean</code> of each line, since there is another one to check with each added line item.</p>\n"},{"tags":["java","java.util.date","java-17"],"comments":[{"owner":{"account_id":15064163,"reputation":13519,"user_id":10871900,"display_name":"dan1st is crying"},"score":2,"creation_date":1660195960,"post_id":73315645,"comment_id":129476566,"body_markdown":"What if you use `LocalDate`/the `java.time` API instead?","body":"What if you use <code>LocalDate</code>/the <code>java.time</code> API instead?"},{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":6,"creation_date":1660196262,"post_id":73315645,"comment_id":129476636,"body_markdown":"And what is the question now? What do you think is the right answer and why? What do you want to happen and why?","body":"And what is the question now? What do you think is the right answer and why? What do you want to happen and why?"},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660197640,"post_id":73315645,"comment_id":129476952,"body_markdown":"The question is why this happens and if there is a possibility to get correct date (with hour 0)","body":"The question is why this happens and if there is a possibility to get correct date (with hour 0)"},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1660198353,"post_id":73315645,"comment_id":129477132,"body_markdown":"I think you misunderstood `java.util.Date` - it does not have an &quot;hour&quot;. It represents an instant in time. The &quot;hour&quot; you see depends on how you print it out.","body":"I think you misunderstood <code>java.util.Date</code> - it does not have an &quot;hour&quot;. It represents an instant in time. The &quot;hour&quot; you see depends on how you print it out."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660198478,"post_id":73315645,"comment_id":129477163,"body_markdown":"I know java.util.Date well. But if the representation of instant has the wrong value after parsing, there is something wrong. Especially when java 11 does it - imho - correct.","body":"I know java.util.Date well. But if the representation of instant has the wrong value after parsing, there is something wrong. Especially when java 11 does it - imho - correct."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":1,"creation_date":1660200612,"post_id":73315645,"comment_id":129477740,"body_markdown":"No, I would say that the java 11 output is even more wrong. &quot;Sun Apr 06 00:00:00 CEST 1980&quot; doesn&#39;t even represent the same instant as &quot;1980-04-06T00:00:00+01:00&quot;. The latter appears to be the instant that you are trying to represent? Actually, *which instant are you trying to represent?* It would be very helpful if you can tell me the date, time, and timezone in [ISO 8601 format](https://en.wikipedia.org/wiki/ISO_8601), or the number of seconds since unix epoch.","body":"No, I would say that the java 11 output is even more wrong. &quot;Sun Apr 06 00:00:00 CEST 1980&quot; doesn&#39;t even represent the same instant as &quot;1980-04-06T00:00:00+01:00&quot;. The latter appears to be the instant that you are trying to represent? Actually, <i>which instant are you trying to represent?</i> It would be very helpful if you can tell me the date, time, and timezone in <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601 format</a>, or the number of seconds since unix epoch."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660201462,"post_id":73315645,"comment_id":129477990,"body_markdown":"If java 17 output is more correct it would be great if there is an explanation what the change was and why. Because this date differs from old ones in our database - so old dates could not be found. And why is there only a problem with THIS date? Other dates do NOT have this &quot;offset&quot;.\n\nFor example: 1980-04-07 has hour 0.","body":"If java 17 output is more correct it would be great if there is an explanation what the change was and why. Because this date differs from old ones in our database - so old dates could not be found. And why is there only a problem with THIS date? Other dates do NOT have this &quot;offset&quot;.  For example: 1980-04-07 has hour 0."},{"owner":{"account_id":70123,"reputation":51175,"user_id":203657,"accept_rate":53,"display_name":"kleopatra"},"score":2,"creation_date":1660214327,"post_id":73315645,"comment_id":129482347,"body_markdown":"Don&#39;t quite understand your setup -  [mcve] please, demonstrating the _Because this date differs from old ones in our database - so old dates could not be found_","body":"Don&#39;t quite understand your setup -  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please, demonstrating the <i>Because this date differs from old ones in our database - so old dates could not be found</i>"},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660218590,"post_id":73315645,"comment_id":129483811,"body_markdown":"I added an example - please try if it is reproducible on your side.","body":"I added an example - please try if it is reproducible on your side."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660220956,"post_id":73315645,"comment_id":129484656,"body_markdown":"Summer time began at 02:00 (AM) on that day, so the time 00:00 did exist. Also on my Java 18 I get `Sun Apr 06 00:00:00 CET 1980` (same as on your Java 11). What goes wrong on your Java 17 I can&#39;t tell.","body":"Summer time began at 02:00 (AM) on that day, so the time 00:00 did exist. Also on my Java 18 I get <code>Sun Apr 06 00:00:00 CET 1980</code> (same as on your Java 11). What goes wrong on your Java 17 I can&#39;t tell."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660225201,"post_id":73315645,"comment_id":129486351,"body_markdown":"There was a german law which said 0:00. https://www.ris.bka.gv.at/Dokumente/BgblPdf/1979_490_0/1979_490_0.pdf, it says: &quot;In the 1980 calendar year, daylight saving time begins on Sunday, April 6, 1980 at 00:00 and ends on Saturday September 27, 1980 24:00.&quot;\n\n\nI tried in java 17 and java 11 facing problems mentioned above.","body":"There was a german law which said 0:00. <a href=\"https://www.ris.bka.gv.at/Dokumente/BgblPdf/1979_490_0/1979_490_0.pdf\" rel=\"nofollow noreferrer\">ris.bka.gv.at/Dokumente/BgblPdf/1979_490_0/1979_490_0.pdf</a>, it says: &quot;In the 1980 calendar year, daylight saving time begins on Sunday, April 6, 1980 at 00:00 and ends on Saturday September 27, 1980 24:00.&quot;   I tried in java 17 and java 11 facing problems mentioned above."},{"owner":{"account_id":6651855,"reputation":224830,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":2,"creation_date":1660273658,"post_id":73315645,"comment_id":129498985,"body_markdown":"If I understand correctly, that law is for Austria, not Germany...? &quot;&#214;sterreich&quot; means Austria, right?","body":"If I understand correctly, that law is for Austria, not Germany...? &quot;&#214;sterreich&quot; means Austria, right?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660281734,"post_id":73315645,"comment_id":129500081,"body_markdown":"Correct, @Sweeper, “die Republik &#214;sterreich” refers to Austria, not Germany. And indeed `LocalDate.of(1980, Month.APRIL, 6).atStartOfDay(ZoneId.of(&quot;Europe/Vienna&quot;))` returns `1980-04-06T01:00+02:00[Europe/Vienna]`, so not 00:00. Seen on Java 11. Voting to close as “Not reproducible or was caused by a typo”.","body":"Correct, @Sweeper, “die Republik &#214;sterreich” refers to Austria, not Germany. And indeed <code>LocalDate.of(1980, Month.APRIL, 6).atStartOfDay(ZoneId.of(&quot;Europe&#47;Vienna&quot;))</code> returns <code>1980-04-06T01:00+02:00[Europe&#47;Vienna]</code>, so not 00:00. Seen on Java 11. Voting to close as “Not reproducible or was caused by a typo”."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660283450,"post_id":73315645,"comment_id":129500379,"body_markdown":"Thank you for the complete and reproducible example using Austrian time (not German). My results on Java 11 and Java 17 are the same: Up to year 1893 I get hour 23 for a lot of dates (could easily be a bug in the old `GregorianCalendar` class). And then I finally get `06.04.1980 &gt; 1`, so hour 1 for the date you mentioned from the outset.","body":"Thank you for the complete and reproducible example using Austrian time (not German). My results on Java 11 and Java 17 are the same: Up to year 1893 I get hour 23 for a lot of dates (could easily be a bug in the old <code>GregorianCalendar</code> class). And then I finally get <code>06.04.1980 &gt; 1</code>, so hour 1 for the date you mentioned from the outset."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660293282,"post_id":73315645,"comment_id":129503320,"body_markdown":"Sorrym of course Austrian law. My fault. Any ideas for this strange behaviour?","body":"Sorrym of course Austrian law. My fault. Any ideas for this strange behaviour?"},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":3,"creation_date":1660296881,"post_id":73315645,"comment_id":129504474,"body_markdown":"A guess, by mistake you have your Java 11 use Europe/Berlin time zone as its default and your Java 17 use Europe/Vienna. As I said, I have not been able to reproduce. Also if you are using Europe/Vienna, then as I read the error was on Java 11, so if you move on to Java 17, it&#39;s gone and the problem is solved, is this correct?","body":"A guess, by mistake you have your Java 11 use Europe/Berlin time zone as its default and your Java 17 use Europe/Vienna. As I said, I have not been able to reproduce. Also if you are using Europe/Vienna, then as I read the error was on Java 11, so if you move on to Java 17, it&#39;s gone and the problem is solved, is this correct?"},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660626335,"post_id":73315645,"comment_id":129569816,"body_markdown":"@Ole V.V. thats not correct. Java 11 does is right, Java 17 I faced this problem...","body":"@Ole V.V. thats not correct. Java 11 does is right, Java 17 I faced this problem..."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660663561,"post_id":73315645,"comment_id":129582746,"body_markdown":"Now I am completely confused. You say that in Austria summer time was introduced at midnight on 6 April 1980. This would mean that that day began at 01:00 (not 00:00). You say that Java 11 gave `Sun Apr 06 00:00:00 CEST 1980` and that this is correct?? And that Java 17 gave `Sun Apr 06 01:00:00 CEST 1980` and this is incorrect?? Could you please rewrite your question to clarify? Until then upholding my close vote.","body":"Now I am completely confused. You say that in Austria summer time was introduced at midnight on 6 April 1980. This would mean that that day began at 01:00 (not 00:00). You say that Java 11 gave <code>Sun Apr 06 00:00:00 CEST 1980</code> and that this is correct?? And that Java 17 gave <code>Sun Apr 06 01:00:00 CEST 1980</code> and this is incorrect?? Could you please rewrite your question to clarify? Until then upholding my close vote."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660712478,"post_id":73315645,"comment_id":129594225,"body_markdown":"For me a Date would be correct with 00:00 Time if not specified. Somehow it changed at special dates (e.g. 1980-04-06) and so there is a problem regarding old dates in database - so it would be &quot;correct&quot; for me, if there is always a 00:00 time component. I don&#39;t know exactly, if the summer time on 1980-04-06 was changed at midnight or not - that&#39;s only one thing I found out about this. The problem is the change of the Date - so old ones could not be found any more, therefore it would be &quot;correct&quot; for me with 00:00.","body":"For me a Date would be correct with 00:00 Time if not specified. Somehow it changed at special dates (e.g. 1980-04-06) and so there is a problem regarding old dates in database - so it would be &quot;correct&quot; for me, if there is always a 00:00 time component. I don&#39;t know exactly, if the summer time on 1980-04-06 was changed at midnight or not - that&#39;s only one thing I found out about this. The problem is the change of the Date - so old ones could not be found any more, therefore it would be &quot;correct&quot; for me with 00:00."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660715036,"post_id":73315645,"comment_id":129594741,"body_markdown":"I tried other ZoneId now -&gt; Berlin or Paris does not have this issues. Only facing it using Vienna.","body":"I tried other ZoneId now -&gt; Berlin or Paris does not have this issues. Only facing it using Vienna."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":1,"creation_date":1660715357,"post_id":73315645,"comment_id":129594814,"body_markdown":"I checked in Java 11 - there is Europe/Berlin set as default! So that&#39;s the problem. Thanks @Ole V.V.","body":"I checked in Java 11 - there is Europe/Berlin set as default! So that&#39;s the problem. Thanks @Ole V.V."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660718037,"post_id":73315645,"comment_id":129595450,"body_markdown":"Glad you found out! I wonder whether this question will be useful for future readers, or it’s better that you delete it? You have a delete link under it. If all your database dates have time 00:00, then maybe you should rather store them without time and retrieve them into `LocalDate` in Java. If you can’t change the database, then into `LocalDateTime`. Here *local* means without time zone, so `LocalDateTime` is guaranteed not to make any trouble over summer time no matter which time zone is your default.","body":"Glad you found out! I wonder whether this question will be useful for future readers, or it’s better that you delete it? You have a delete link under it. If all your database dates have time 00:00, then maybe you should rather store them without time and retrieve them into <code>LocalDate</code> in Java. If you can’t change the database, then into <code>LocalDateTime</code>. Here <i>local</i> means without time zone, so <code>LocalDateTime</code> is guaranteed not to make any trouble over summer time no matter which time zone is your default."},{"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"score":0,"creation_date":1660721799,"post_id":73315645,"comment_id":129596664,"body_markdown":"I will edit it, so that others can find it regarding time zones. Information is useful for others facing same problem in Austria.","body":"I will edit it, so that others can find it regarding time zones. Information is useful for others facing same problem in Austria."},{"owner":{"account_id":7612423,"reputation":82486,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1660848690,"post_id":73315645,"comment_id":129636890,"body_markdown":"Thanks for editing. I still cannot reproduce exactly. Running your coide in Europe/Berlin time zone I get `Sun Apr 06 00:00:00 CET 1980`, not CEST.","body":"Thanks for editing. I still cannot reproduce exactly. Running your coide in Europe/Berlin time zone I get <code>Sun Apr 06 00:00:00 CET 1980</code>, not CEST."}],"answers":[{"tags":[],"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660204475,"creation_date":1660204475,"answer_id":73317164,"question_id":73315645,"body_markdown":"I am in Israel, so in order to simulate the time zone of central Europe (using Java 17), I set the [System] property *user.timezone* to CET using the `-D` option of the [java][1] command. Then I ran the following code:\r\n```java\r\n/*\r\n * import java.time.ZoneId;\r\n * import java.time.ZonedDateTime;\r\n * import java.util.Date;\r\n */\r\nZonedDateTime zdt = ZonedDateTime.of(1980, 4, 6, 0, 0, 0, 0, ZoneId.systemDefault());\r\nSystem.out.println(Date.from(zdt.toInstant()));\r\n```\r\nThe result I got was:\r\n```none\r\nSun Apr 06 00:00:00 CET 1980\r\n```\r\nThis is the result that you want, correct?\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html","title":"java.util.Date special date 1980-04-06: wrong hour","body":"<p>I am in Israel, so in order to simulate the time zone of central Europe (using Java 17), I set the [System] property <em>user.timezone</em> to CET using the <code>-D</code> option of the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/specs/man/java.html\" rel=\"nofollow noreferrer\">java</a> command. Then I ran the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n * import java.time.ZoneId;\n * import java.time.ZonedDateTime;\n * import java.util.Date;\n */\nZonedDateTime zdt = ZonedDateTime.of(1980, 4, 6, 0, 0, 0, 0, ZoneId.systemDefault());\nSystem.out.println(Date.from(zdt.toInstant()));\n</code></pre>\n<p>The result I got was:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Sun Apr 06 00:00:00 CET 1980\n</code></pre>\n<p>This is the result that you want, correct?</p>\n"},{"tags":[],"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660848481,"creation_date":1660803960,"answer_id":73398333,"question_id":73315645,"body_markdown":"It&#39;s not really a problem, it&#39;s a special thing about timezone &quot;Europe/Vienna&quot; which was changed in our system. If you get this problem, check your timezone, maybe it was changed by some other properties.\r\n\r\nWhile summer time (DST) started at 02:00 o’clock in Germany on that date, it started already at midnight in Austria (Europe/Vienna time zone), so the time 00:00 did not exist, which is why we suddenly got 01:00. Both time zones are printed as CEST (Central European Summer Time), so the abbreviation does not allow us to distinguish.","title":"java.util.Date special date 1980-04-06: wrong hour","body":"<p>It's not really a problem, it's a special thing about timezone &quot;Europe/Vienna&quot; which was changed in our system. If you get this problem, check your timezone, maybe it was changed by some other properties.</p>\n<p>While summer time (DST) started at 02:00 o’clock in Germany on that date, it started already at midnight in Austria (Europe/Vienna time zone), so the time 00:00 did not exist, which is why we suddenly got 01:00. Both time zones are printed as CEST (Central European Summer Time), so the abbreviation does not allow us to distinguish.</p>\n"}],"owner":{"account_id":2519223,"reputation":545,"user_id":2189916,"accept_rate":100,"display_name":"anm"},"comment_count":24,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":429,"favorite_count":0,"down_vote_count":3,"up_vote_count":6,"accepted_answer_id":73398333,"answer_count":2,"score":3,"last_activity_date":1660848481,"creation_date":1660195650,"question_id":73315645,"body_markdown":"We faced following problem:\r\n\r\n    \tSimpleDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, java.util.Locale.GERMAN);\r\n\t\tString dateInString = &quot;06-04-1980&quot;;\r\n\t\tDate date = formatter.parse(dateInString);\r\n\r\nbefore: Sun Apr 06 00:00:00 CEST 1980\r\n\r\nafter: Sun Apr 06 01:00:00 CEST 1980\r\n\r\nAnother example:\r\n\r\n    Date date = Date.from(LocalDate.of(1980, 4, 6).atStartOfDay(ZoneId.systemDefault()).toInstant());\r\n\r\nFacing the same problem.\r\n\r\nWe thought change of java11 to java17 is the problem, but it wasn&#39;t. It was the change of the timezone from Europe/Berlin to Europe Vienna. On 1980-04-06 the daylight saving time was established in Austria and the change of the hour was at 00:00. So there was no 00:00 at this date.\r\n\r\n\r\nReproduceable example - changing timezone to &quot;Europe/Berlin&quot; results in 0 hour.\r\n\r\n    DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;);\r\n\t\tfor (LocalDate date = LocalDate.of(1500, 04, 01); date.isBefore(LocalDate.of(9999, 1, 1)); date = date.plusDays(1)) {\r\n\t\t\tDate out = Date.from(date.atStartOfDay(ZoneId.of(&quot;Europe/Vienna&quot;)).toInstant());\r\n\t\t\tCalendar cal = Calendar.getInstance();\r\n\t\t\tcal.setTimeZone(TimeZone.getTimeZone(ZoneId.of(&quot;Europe/Vienna&quot;)));\r\n\t\t\tcal.setTime(out);\r\n\t\t\tif (cal.get(Calendar.HOUR_OF_DAY) &gt; 0) {\r\n\t\t\t\tSystem.out.println(date.format(formatter) + &quot; &gt; &quot; + cal.get(Calendar.HOUR_OF_DAY));\r\n\t\t\t}\r\n\t\t}\r\n\t\tSystem.out.println(&quot;done&quot;);\r\n\r\n\r\nAll dates before 1893-03-31 have 23 as hour in timezone &quot;Europe/Vienna&quot;, in &quot;Europe/Berlin&quot; its also 0.","title":"java.util.Date special date 1980-04-06: wrong hour","body":"<p>We faced following problem:</p>\n<pre><code>    SimpleDateFormat formatter = new SimpleDateFormat(&quot;dd-MM-yyyy&quot;, java.util.Locale.GERMAN);\n    String dateInString = &quot;06-04-1980&quot;;\n    Date date = formatter.parse(dateInString);\n</code></pre>\n<p>before: Sun Apr 06 00:00:00 CEST 1980</p>\n<p>after: Sun Apr 06 01:00:00 CEST 1980</p>\n<p>Another example:</p>\n<pre><code>Date date = Date.from(LocalDate.of(1980, 4, 6).atStartOfDay(ZoneId.systemDefault()).toInstant());\n</code></pre>\n<p>Facing the same problem.</p>\n<p>We thought change of java11 to java17 is the problem, but it wasn't. It was the change of the timezone from Europe/Berlin to Europe Vienna. On 1980-04-06 the daylight saving time was established in Austria and the change of the hour was at 00:00. So there was no 00:00 at this date.</p>\n<p>Reproduceable example - changing timezone to &quot;Europe/Berlin&quot; results in 0 hour.</p>\n<pre><code>DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;dd.MM.yyyy&quot;);\n    for (LocalDate date = LocalDate.of(1500, 04, 01); date.isBefore(LocalDate.of(9999, 1, 1)); date = date.plusDays(1)) {\n        Date out = Date.from(date.atStartOfDay(ZoneId.of(&quot;Europe/Vienna&quot;)).toInstant());\n        Calendar cal = Calendar.getInstance();\n        cal.setTimeZone(TimeZone.getTimeZone(ZoneId.of(&quot;Europe/Vienna&quot;)));\n        cal.setTime(out);\n        if (cal.get(Calendar.HOUR_OF_DAY) &gt; 0) {\n            System.out.println(date.format(formatter) + &quot; &gt; &quot; + cal.get(Calendar.HOUR_OF_DAY));\n        }\n    }\n    System.out.println(&quot;done&quot;);\n</code></pre>\n<p>All dates before 1893-03-31 have 23 as hour in timezone &quot;Europe/Vienna&quot;, in &quot;Europe/Berlin&quot; its also 0.</p>\n"},{"tags":["java","layout","fonts","applet","italic"],"comments":[{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":1,"creation_date":1416371624,"post_id":27008928,"comment_id":42545937,"body_markdown":"Don&#39;t dispose of a `Graphics` context you didn&#39;t create, that `Graphics` context is used to paint other aspects of your component as well as other components on the screen","body":"Don&#39;t dispose of a <code>Graphics</code> context you didn&#39;t create, that <code>Graphics</code> context is used to paint other aspects of your component as well as other components on the screen"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416371939,"post_id":27008928,"comment_id":42546027,"body_markdown":"Unless you&#39;re doing something screwy, `paintComponent` doesn&#39;t need to synchronised (nor should it be `public`)","body":"Unless you&#39;re doing something screwy, <code>paintComponent</code> doesn&#39;t need to synchronised (nor should it be <code>public</code>)"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416372125,"post_id":27008928,"comment_id":42546082,"body_markdown":"The first thing I did was to remove `java.awt.Font graphicsFont = new java.awt.Font(&quot;Arial&quot;, Font.BOLD, 15);` and rely on the `Font` that was supplied by the `Graphics` context, as this should be the components `Font`.  Next, I removed the reference to `Arial` in the `GraphViewer` and found the resulting rendering to be just about the same, so the issue has to do with the font, probably a variable width font...","body":"The first thing I did was to remove <code>java.awt.Font graphicsFont = new java.awt.Font(&quot;Arial&quot;, Font.BOLD, 15);</code> and rely on the <code>Font</code> that was supplied by the <code>Graphics</code> context, as this should be the components <code>Font</code>.  Next, I removed the reference to <code>Arial</code> in the <code>GraphViewer</code> and found the resulting rendering to be just about the same, so the issue has to do with the font, probably a variable width font..."},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416372585,"post_id":27008928,"comment_id":42546201,"body_markdown":"Next I did something like `setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 24));` within the applets and panels constructors and got the same result, for each, but yes, the spacing between characters is different.  Again, I assume that this is the difference between fixed and variable width fonts...","body":"Next I did something like <code>setFont(new Font(&quot;Arial&quot;, Font.PLAIN, 24));</code> within the applets and panels constructors and got the same result, for each, but yes, the spacing between characters is different.  Again, I assume that this is the difference between fixed and variable width fonts..."},{"owner":{"account_id":2066056,"reputation":39,"user_id":1841548,"accept_rate":0,"display_name":"HarshaSK"},"score":0,"creation_date":1416451368,"post_id":27008928,"comment_id":42583786,"body_markdown":"@MadProgrammer Thanks a lot for the quick response. What do u think? is this extra space a bug in text layout? Is there a way to resolve this?","body":"@MadProgrammer Thanks a lot for the quick response. What do u think? is this extra space a bug in text layout? Is there a way to resolve this?"},{"owner":{"account_id":969721,"reputation":344518,"user_id":992484,"accept_rate":60,"display_name":"MadProgrammer"},"score":0,"creation_date":1416457170,"post_id":27008928,"comment_id":42585240,"body_markdown":"I don&#39;t think it&#39;s a bug, more an assumption on the part of the developers, they deliberately focused on fixed width fonts","body":"I don&#39;t think it&#39;s a bug, more an assumption on the part of the developers, they deliberately focused on fixed width fonts"}],"answers":[{"tags":[],"owner":{"account_id":8288434,"reputation":1,"user_id":6230901,"display_name":"Darren"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660847590,"creation_date":1660847590,"answer_id":73407915,"question_id":27008928,"body_markdown":"I know this is an old post but nobody ever answered the question and I know the answer. The answer is yes, there definitely was such a bug with padding being incorrectly added to italic TextLines (inside the TextLayout).\r\nI know the bug was still around as of 1.8 at least but it was fixed at some point. I don&#39;t know what version, I couldn&#39;t find the bug report online, but certainly by Java 17.\r\n\r\nIt didn&#39;t seem to affect fonts where the italicization was being simulated by Java, but it certainly occurred with true italic faces such as Arial Italic for example.","title":"Why does java.awt.font.TextLayout.draw() result into incorrect spacing between Words/Characters when oblique(Italic/Bold Italic) fonts are used?","body":"<p>I know this is an old post but nobody ever answered the question and I know the answer. The answer is yes, there definitely was such a bug with padding being incorrectly added to italic TextLines (inside the TextLayout).\nI know the bug was still around as of 1.8 at least but it was fixed at some point. I don't know what version, I couldn't find the bug report online, but certainly by Java 17.</p>\n<p>It didn't seem to affect fonts where the italicization was being simulated by Java, but it certainly occurred with true italic faces such as Arial Italic for example.</p>\n"}],"owner":{"account_id":2066056,"reputation":39,"user_id":1841548,"accept_rate":0,"display_name":"HarshaSK"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1008,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1660847590,"creation_date":1416371136,"question_id":27008928,"body_markdown":"I am writing the same Attributed String using TextLayout.draw() on an Applet as well as on a Frame\r\n \r\nIn TextLayout, incorrect spacing between Words/Characters are observed when oblique(Italic/Bold Italic) fonts are used on an Applet, while the same Attributed String is rendered correctly on a Frame\r\n \r\nBelow is a stand alone code to demonstrate the difference between writing an AttributedString using java.awt.font.TextLayout on an Applet as well on a Frame\r\n \r\nBelow code is for demonstrating TextLayout on a Frame. This works Fine.\r\n \r\n    import java.awt.BorderLayout;  \r\n    import java.awt.Component;  \r\n    import java.awt.Font;  \r\n    import java.awt.Frame;  \r\n    import java.awt.Graphics;  \r\n    import java.awt.Graphics2D;  \r\n    import java.awt.event.ComponentEvent;  \r\n    import java.awt.font.FontRenderContext;  \r\n    import java.awt.font.TextAttribute;  \r\n    import java.awt.font.TextLayout;  \r\n  \r\n  \r\n    import java.text.AttributedString;  \r\n  \r\n  \r\n    import javax.swing.JPanel;  \r\n  \r\n  \r\n    public class GraphViewer extends Frame  \r\n    {  \r\n     public static void main(String[] args)  \r\n      {  \r\n          Component viewer = new GraphViewer(new test());  \r\n          viewer.show();  \r\n           \r\n      }  \r\n  \r\n     public GraphViewer( Component component)  \r\n     {  \r\n         setLayout(new BorderLayout(0,0));  \r\n         setVisible(true);  \r\n         setSize(800,600);  \r\n         setTitle(&quot;Viewer&quot;);  \r\n         add(&quot;Center&quot;, component);  \r\n         addWindowListener(new SymWindow());  \r\n     }  \r\n      \r\n     public void paint(Graphics2D graphics)  \r\n     {  \r\n         graphics.clearRect(0,0,800, 600);  \r\n         super.paint(graphics);  \r\n     }  \r\n  \r\n     public class SymComponent extends java.awt.event.ComponentAdapter  \r\n     {  \r\n         public void ComponentResized(ComponentEvent event)  \r\n         {  \r\n             Object object = event.getSource();  \r\n             if(object == GraphViewer.this)  \r\n             {  \r\n                     \r\n             }  \r\n         }  \r\n          \r\n     }  \r\n  \r\n  \r\n     public class SymWindow extends java.awt.event.WindowAdapter  \r\n     {  \r\n  \r\n  \r\n         public void windowClosing(java.awt.event.WindowEvent event)  \r\n         {  \r\n             Object object = event.getSource();  \r\n             if (object == GraphViewer.this)  \r\n                 FrameApp_WindowClosing(event);  \r\n         }  \r\n  \r\n  \r\n         void FrameApp_WindowClosing(java.awt.event.WindowEvent event)  \r\n         {  \r\n  \r\n  \r\n             setVisible(false); // hide the Frame  \r\n             dispose(); // free the system resources  \r\n             System.exit(0); // close the application  \r\n         }  \r\n     }  \r\n      \r\n    }  \r\n    class test extends JPanel  \r\n    {  \r\n  \r\n     public Font getFont()  \r\n     {  \r\n         return new Font(&quot;Arial&quot;, Font.BOLD, 15);  \r\n     }  \r\n          \r\n       \r\n     synchronized public void paintComponent(Graphics g)  \r\n     {  \r\n         test1(g);  \r\n     }  \r\n          \r\n     void test1(Graphics g)  \r\n     {  \r\n         Graphics2D g2 = (Graphics2D)g;  \r\n         FontRenderContext frc = g2.getFontRenderContext();  \r\n         java.awt.Font graphicsFont = new java.awt.Font(&quot;Arial&quot;, Font.PLAIN, 15);  \r\n         AttributedString result = new AttributedString (&quot;This is a test to check partial text formatting.&quot;);  \r\n         graphicsFont  = graphicsFont.deriveFont(java.awt.Font.ITALIC);  \r\n          \r\n         result.addAttribute(TextAttribute.FONT, graphicsFont, 1, 10);  \r\n         result.addAttribute(TextAttribute.FONT, graphicsFont, 15, 22);  \r\n         result.addAttribute(TextAttribute.FONT, graphicsFont, 25, 31);  \r\n         result.addAttribute(TextAttribute.WEIGHT, TextAttribute.WEIGHT_BOLD);  \r\n          \r\n         TextLayout layout = new TextLayout(result.getIterator(),g2.getFontRenderContext());  \r\n         layout.draw(g2, 100,100);  \r\n     }        \r\n}  \r\n \r\nBelow is the code to demonstrate TextLayout on Applet. This gives more space after italic charaters. Is this a bug in TextLayout?\r\n \r\n    import java.awt.Color;  \r\n    import java.awt.Font;  \r\n    import java.awt.Graphics;  \r\n    import java.awt.Graphics2D;  \r\n    import java.awt.font.TextAttribute;  \r\n    import java.awt.font.TextLayout;  \r\n  \r\n  \r\n    import java.text.AttributedString;  \r\n  \r\n  \r\n    import java.util.StringTokenizer;  \r\n  \r\n  \r\n    import javax.swing.JApplet;  \r\n  \r\n  \r\n  \r\n  \r\n    public class TestTextLayoutApplet extends JApplet {  \r\n    public TestTextLayoutApplet() {  \r\n        super();  \r\n    }  \r\n  \r\n  \r\n    public void init(){  \r\n        System.out.println(&quot;In TestTextLayout Init&quot;);  \r\n    }  \r\n  \r\n  \r\n    public void paint(Graphics g) {  \r\n        Graphics2D g2 = (Graphics2D)g;  \r\n         \r\n        java.awt.Font graphicsFont = new java.awt.Font(&quot;Arial&quot;, Font.BOLD, 15);  \r\n        g2.setFont(graphicsFont);  \r\n  \r\n  \r\n        AttributedString attStr = new AttributedString(&quot;This is a test to check partial text formatting.&quot;);  \r\n        attStr.addAttribute(TextAttribute.FONT, g2.getFont());  \r\n         \r\n        graphicsFont = graphicsFont.deriveFont(java.awt.Font.ITALIC);  \r\n         \r\n        attStr.addAttribute(TextAttribute.FONT, graphicsFont, 1, 10);  \r\n        attStr.addAttribute(TextAttribute.FONT, graphicsFont, 15, 22);  \r\n        attStr.addAttribute(TextAttribute.FONT, graphicsFont, 25, 31);  \r\n        attStr.addAttribute(TextAttribute.WEIGHT, TextAttribute.WEIGHT_BOLD);  \r\n  \r\n  \r\n        /** Writing with TextLayout */  \r\n        TextLayout textLayout = new TextLayout(attStr.getIterator(), g2.getFontRenderContext());  \r\n        g2.setColor(Color.BLUE);  \r\n        textLayout.draw(g2, 20, 100);  \r\n         \r\n        g2.dispose();  \r\n    }  \r\n  \r\n  \r\n    }  ","title":"Why does java.awt.font.TextLayout.draw() result into incorrect spacing between Words/Characters when oblique(Italic/Bold Italic) fonts are used?","body":"<p>I am writing the same Attributed String using TextLayout.draw() on an Applet as well as on a Frame</p>\n\n<p>In TextLayout, incorrect spacing between Words/Characters are observed when oblique(Italic/Bold Italic) fonts are used on an Applet, while the same Attributed String is rendered correctly on a Frame</p>\n\n<p>Below is a stand alone code to demonstrate the difference between writing an AttributedString using java.awt.font.TextLayout on an Applet as well on a Frame</p>\n\n<p>Below code is for demonstrating TextLayout on a Frame. This works Fine.</p>\n\n<pre><code>import java.awt.BorderLayout;  \nimport java.awt.Component;  \nimport java.awt.Font;  \nimport java.awt.Frame;  \nimport java.awt.Graphics;  \nimport java.awt.Graphics2D;  \nimport java.awt.event.ComponentEvent;  \nimport java.awt.font.FontRenderContext;  \nimport java.awt.font.TextAttribute;  \nimport java.awt.font.TextLayout;  \n\n\nimport java.text.AttributedString;  \n\n\nimport javax.swing.JPanel;  \n\n\npublic class GraphViewer extends Frame  \n{  \n public static void main(String[] args)  \n  {  \n      Component viewer = new GraphViewer(new test());  \n      viewer.show();  \n\n  }  \n\n public GraphViewer( Component component)  \n {  \n     setLayout(new BorderLayout(0,0));  \n     setVisible(true);  \n     setSize(800,600);  \n     setTitle(\"Viewer\");  \n     add(\"Center\", component);  \n     addWindowListener(new SymWindow());  \n }  \n\n public void paint(Graphics2D graphics)  \n {  \n     graphics.clearRect(0,0,800, 600);  \n     super.paint(graphics);  \n }  \n\n public class SymComponent extends java.awt.event.ComponentAdapter  \n {  \n     public void ComponentResized(ComponentEvent event)  \n     {  \n         Object object = event.getSource();  \n         if(object == GraphViewer.this)  \n         {  \n\n         }  \n     }  \n\n }  \n\n\n public class SymWindow extends java.awt.event.WindowAdapter  \n {  \n\n\n     public void windowClosing(java.awt.event.WindowEvent event)  \n     {  \n         Object object = event.getSource();  \n         if (object == GraphViewer.this)  \n             FrameApp_WindowClosing(event);  \n     }  \n\n\n     void FrameApp_WindowClosing(java.awt.event.WindowEvent event)  \n     {  \n\n\n         setVisible(false); // hide the Frame  \n         dispose(); // free the system resources  \n         System.exit(0); // close the application  \n     }  \n }  \n\n}  \nclass test extends JPanel  \n{  \n\n public Font getFont()  \n {  \n     return new Font(\"Arial\", Font.BOLD, 15);  \n }  \n\n\n synchronized public void paintComponent(Graphics g)  \n {  \n     test1(g);  \n }  \n\n void test1(Graphics g)  \n {  \n     Graphics2D g2 = (Graphics2D)g;  \n     FontRenderContext frc = g2.getFontRenderContext();  \n     java.awt.Font graphicsFont = new java.awt.Font(\"Arial\", Font.PLAIN, 15);  \n     AttributedString result = new AttributedString (\"This is a test to check partial text formatting.\");  \n     graphicsFont  = graphicsFont.deriveFont(java.awt.Font.ITALIC);  \n\n     result.addAttribute(TextAttribute.FONT, graphicsFont, 1, 10);  \n     result.addAttribute(TextAttribute.FONT, graphicsFont, 15, 22);  \n     result.addAttribute(TextAttribute.FONT, graphicsFont, 25, 31);  \n     result.addAttribute(TextAttribute.WEIGHT, TextAttribute.WEIGHT_BOLD);  \n\n     TextLayout layout = new TextLayout(result.getIterator(),g2.getFontRenderContext());  \n     layout.draw(g2, 100,100);  \n }        \n</code></pre>\n\n<p>}  </p>\n\n<p>Below is the code to demonstrate TextLayout on Applet. This gives more space after italic charaters. Is this a bug in TextLayout?</p>\n\n<pre><code>import java.awt.Color;  \nimport java.awt.Font;  \nimport java.awt.Graphics;  \nimport java.awt.Graphics2D;  \nimport java.awt.font.TextAttribute;  \nimport java.awt.font.TextLayout;  \n\n\nimport java.text.AttributedString;  \n\n\nimport java.util.StringTokenizer;  \n\n\nimport javax.swing.JApplet;  \n\n\n\n\npublic class TestTextLayoutApplet extends JApplet {  \npublic TestTextLayoutApplet() {  \n    super();  \n}  \n\n\npublic void init(){  \n    System.out.println(\"In TestTextLayout Init\");  \n}  \n\n\npublic void paint(Graphics g) {  \n    Graphics2D g2 = (Graphics2D)g;  \n\n    java.awt.Font graphicsFont = new java.awt.Font(\"Arial\", Font.BOLD, 15);  \n    g2.setFont(graphicsFont);  \n\n\n    AttributedString attStr = new AttributedString(\"This is a test to check partial text formatting.\");  \n    attStr.addAttribute(TextAttribute.FONT, g2.getFont());  \n\n    graphicsFont = graphicsFont.deriveFont(java.awt.Font.ITALIC);  \n\n    attStr.addAttribute(TextAttribute.FONT, graphicsFont, 1, 10);  \n    attStr.addAttribute(TextAttribute.FONT, graphicsFont, 15, 22);  \n    attStr.addAttribute(TextAttribute.FONT, graphicsFont, 25, 31);  \n    attStr.addAttribute(TextAttribute.WEIGHT, TextAttribute.WEIGHT_BOLD);  \n\n\n    /** Writing with TextLayout */  \n    TextLayout textLayout = new TextLayout(attStr.getIterator(), g2.getFontRenderContext());  \n    g2.setColor(Color.BLUE);  \n    textLayout.draw(g2, 20, 100);  \n\n    g2.dispose();  \n}  \n\n\n}  \n</code></pre>\n"},{"tags":["java","spring","lombok"],"answers":[{"tags":[],"owner":{"account_id":4668137,"reputation":6228,"user_id":9681755,"display_name":"Dirk Deyne"},"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1660847465,"creation_date":1660843705,"answer_id":73407212,"question_id":73407009,"body_markdown":"You should have a prefix to group your config properties.\r\nUse `CamelCase` to convert properties that include a hyphen\r\nCreate extra classes for nested properties\r\n\r\nexample:\r\n```properties\r\nprefix.logs.import-data.dir = some directory\r\nprefix.logs.site.location = some location\r\n```\r\n\r\n```java\r\n@Data\r\n@Configuration\r\n@ConfigurationProperties(prefix = &quot;prefix&quot;) // must have a prefix\r\nclass LogProperties {\r\n\r\n\tprivate Logs logs = new Logs();\r\n\r\n\t@Data\r\n\tclass Logs {\r\n\t\tprivate Site site = new Site();\r\n\t\tprivate ImportData importData= new ImportData();\r\n\t}\r\n\r\n\t@Data\r\n\tclass ImportData {\r\n\t\tprivate String dir;\r\n\t}\r\n\r\n\t@Data\r\n\tclass Site {\r\n\t\tString location;\r\n\t}\r\n\t\r\n}\r\n```","title":"How can I map properties from spring application.properties to java object using lombok, when multiple dot(.) and hyphen(-) is there?","body":"<p>You should have a prefix to group your config properties.\nUse <code>CamelCase</code> to convert properties that include a hyphen\nCreate extra classes for nested properties</p>\n<p>example:</p>\n<pre><code>prefix.logs.import-data.dir = some directory\nprefix.logs.site.location = some location\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@Configuration\n@ConfigurationProperties(prefix = &quot;prefix&quot;) // must have a prefix\nclass LogProperties {\n\n    private Logs logs = new Logs();\n\n    @Data\n    class Logs {\n        private Site site = new Site();\n        private ImportData importData= new ImportData();\n    }\n\n    @Data\n    class ImportData {\n        private String dir;\n    }\n\n    @Data\n    class Site {\n        String location;\n    }\n    \n}\n</code></pre>\n"}],"owner":{"account_id":7747056,"reputation":5,"user_id":5864411,"display_name":"Mohammad Ali"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":547,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73407212,"answer_count":1,"score":0,"last_activity_date":1660847465,"creation_date":1660842603,"question_id":73407009,"body_markdown":"In application.properties,we have something like below property\r\n  \r\n\r\n&gt; logs.dir = d://log\r\n\r\nAnd using java object, we can get the application property value like below:\r\n```\r\n@Data\r\n@NoArgsConstructor\r\n@AllArgsConstructor\r\n@ConfigurationProperties\r\npublic class ApplicationBean {\r\n    private Logs logs = new Logs();\r\n\t\r\n\t@Data\r\n    public class Logs {\r\n\tprivate String dir;\r\n    }\r\n}\r\n```\r\n\r\nbut when we have multiple dots(.) and hyphen(-) in property name like\r\n\r\n&gt; log.import-data.dir = d:\\import\r\n\r\ni can&#39;t able to map it with java object.\r\n\r\nAny suggestion?\r\n \r\n \t \r\n\t","title":"How can I map properties from spring application.properties to java object using lombok, when multiple dot(.) and hyphen(-) is there?","body":"<p>In application.properties,we have something like below property</p>\n<blockquote>\n<p>logs.dir = d://log</p>\n</blockquote>\n<p>And using java object, we can get the application property value like below:</p>\n<pre><code>@Data\n@NoArgsConstructor\n@AllArgsConstructor\n@ConfigurationProperties\npublic class ApplicationBean {\n    private Logs logs = new Logs();\n    \n    @Data\n    public class Logs {\n    private String dir;\n    }\n}\n</code></pre>\n<p>but when we have multiple dots(.) and hyphen(-) in property name like</p>\n<blockquote>\n<p>log.import-data.dir = d:\\import</p>\n</blockquote>\n<p>i can't able to map it with java object.</p>\n<p>Any suggestion?</p>\n"},{"tags":["java","swing","awt","jtextarea","jdialog"],"comments":[{"owner":{"account_id":9722462,"reputation":4365,"user_id":7210739,"display_name":"DontKnowMuchBut Getting Better"},"score":2,"creation_date":1590954819,"post_id":62121651,"comment_id":109870150,"body_markdown":"You should be setting your JTextArea&#39;s row and column properties to size it best, usually done in the constructor: `new JTextArea(rowCount, columnCount);`. Usually JTextAreas are themselves placed into JScrollPanes before placing the JScrollPane into the GUI.","body":"You should be setting your JTextArea&#39;s row and column properties to size it best, usually done in the constructor: <code>new JTextArea(rowCount, columnCount);</code>. Usually JTextAreas are themselves placed into JScrollPanes before placing the JScrollPane into the GUI."},{"owner":{"account_id":18728180,"reputation":33,"user_id":13654274,"display_name":"kennetek"},"score":0,"creation_date":1590961456,"post_id":62121651,"comment_id":109872232,"body_markdown":"@DontKnowMuchButGettingBetter Setting the row and columns does make it fit a certain size. But how do I determine what the correct row/col values are if I don&#39;t know how many lines there are? And yes, I know it is common to put each JTextArea into its own JScrollPane, but I don&#39;t want each individual text area to scroll, but the overall panel containing all the text areas.","body":"@DontKnowMuchButGettingBetter Setting the row and columns does make it fit a certain size. But how do I determine what the correct row/col values are if I don&#39;t know how many lines there are? And yes, I know it is common to put each JTextArea into its own JScrollPane, but I don&#39;t want each individual text area to scroll, but the overall panel containing all the text areas."}],"answers":[{"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1590961894,"creation_date":1590961461,"answer_id":62122868,"question_id":62121651,"body_markdown":"Made a couple of changes and I see the text displayed on 3 lines:\r\n\r\n    pack();\r\n    pack();\r\n\r\nYes that is correct I added a second pack(). First pack seems to recognize the width and the second pack causes the text to be wrapped.\r\n\r\nHowever, I also had to change:\r\n\r\n    //actual.setLayout(new BoxLayout(actual, BoxLayout.Y_AXIS));\r\n    actual.setLayout(new BorderLayout());\r\n\r\nI know you don&#39;t really want to use a BorderLayout (since you want multiple components aligned vertically), but somehow its preferred size calculation seems to work.\r\n\r\nInstead of the BoxLayout, you might be able to use a `GridBagLayout`. It allows you to specify the &quot;fill&quot; constraints. I would guess you would try with just the horizontal fill.\r\n\r\nOr another option is to use the [Relative Layout](https://tips4java.wordpress.com/2008/11/02/relative-layout/). I would be easier than the GridBagLayout since you don&#39;t need to worry about any constraint. The code to use it would be:\r\n\r\n    //actual.setLayout(new BoxLayout(actual, BoxLayout.Y_AXIS));\r\n    RelativeLayout rl = new RelativeLayout(RelativeLayout.Y_AXIS);\r\n    rl.setFill( true );\r\n    actual.setLayout( rl );\r\n\r\n\r\n","title":"JTextArea with line wrap reports incorrect preferred size to JDialog pack?","body":"<p>Made a couple of changes and I see the text displayed on 3 lines:</p>\n\n<pre><code>pack();\npack();\n</code></pre>\n\n<p>Yes that is correct I added a second pack(). First pack seems to recognize the width and the second pack causes the text to be wrapped.</p>\n\n<p>However, I also had to change:</p>\n\n<pre><code>//actual.setLayout(new BoxLayout(actual, BoxLayout.Y_AXIS));\nactual.setLayout(new BorderLayout());\n</code></pre>\n\n<p>I know you don't really want to use a BorderLayout (since you want multiple components aligned vertically), but somehow its preferred size calculation seems to work.</p>\n\n<p>Instead of the BoxLayout, you might be able to use a <code>GridBagLayout</code>. It allows you to specify the \"fill\" constraints. I would guess you would try with just the horizontal fill.</p>\n\n<p>Or another option is to use the <a href=\"https://tips4java.wordpress.com/2008/11/02/relative-layout/\" rel=\"nofollow noreferrer\">Relative Layout</a>. I would be easier than the GridBagLayout since you don't need to worry about any constraint. The code to use it would be:</p>\n\n<pre><code>//actual.setLayout(new BoxLayout(actual, BoxLayout.Y_AXIS));\nRelativeLayout rl = new RelativeLayout(RelativeLayout.Y_AXIS);\nrl.setFill( true );\nactual.setLayout( rl );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2055641,"reputation":504,"user_id":1833472,"display_name":"dpolivaev"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660847371,"creation_date":1660847371,"answer_id":73407870,"question_id":62121651,"body_markdown":"Insert  line \r\n```\r\njta.setSize(jta.getPreferredSize());\r\n```\r\nbefore line \r\n```\r\nactual.add(jta);\r\n``` \r\n\r\n","title":"JTextArea with line wrap reports incorrect preferred size to JDialog pack?","body":"<p>Insert  line</p>\n<pre><code>jta.setSize(jta.getPreferredSize());\n</code></pre>\n<p>before line</p>\n<pre><code>actual.add(jta);\n</code></pre>\n"}],"owner":{"account_id":18728180,"reputation":33,"user_id":13654274,"display_name":"kennetek"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":471,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":62122868,"answer_count":2,"score":3,"last_activity_date":1660847371,"creation_date":1590954497,"question_id":62121651,"body_markdown":"I am using multiple JTextAreas to display variable sized amounts of text, with LineWrap and WrapStyleWord both true. One application of this is displaying a JDialog with multiple of these text areas inside a JScrollPane. The panel that contains all of these text areas implements Scrollable (as explained [here](https://stackoverflow.com/questions/5759131/setting-the-maximum-size-of-a-jdialog)) allowing the JDialog to have a maximum size, but still shrink. The JDialog has a set horizontal size, however. The horizontal scroll bar is forced to never appear, and the vertical scrollbar should not appear unless the dialog reaches its maximum size. However, in cases where the JTextArea wraps its lines, the vertical scroll bar appears while the JDialog&#39;s height is smaller than its maximum. The issue seems to be that the JTextArea reports a preferred height of one row when the JDialog is packed, causing the height of the dialog to be smaller than the height of the panel as the text area takes up more than one row. \r\n\r\nIt seems to be a catch-22, as to get the proper height of the text area it needs to be added to a panel with the desired width to calculate line wrap, which would allow the actual lines to be counted (using a method found [here](https://stackoverflow.com/questions/23260894/jdialog-doesnt-size-correctly-with-wrapped-jtextarea)). But the JDialog requires a preferred size before pack is called (from what I understand), causing the issue. To demonstrate the problem:\r\n\r\n```\r\nimport java.awt.BorderLayout;\r\nimport java.awt.Color;\r\nimport java.awt.Dimension;\r\nimport java.awt.Rectangle;\r\nimport javax.swing.BoxLayout;\r\nimport javax.swing.JDialog;\r\nimport javax.swing.JPanel;\r\nimport javax.swing.JScrollPane;\r\nimport javax.swing.JTextArea;\r\nimport javax.swing.Scrollable;\r\n\r\npublic class DisplayPopup extends JDialog {\r\n    \r\n    public DisplayPopup() {\r\n        \r\n        JPanel actual = new JPanel(); \r\n        actual.setLayout(new BoxLayout(actual, BoxLayout.Y_AXIS));\r\n        actual.setOpaque(false);\r\n        \r\n        JTextArea jta = new JTextArea();\r\n        jta.setText(&quot;Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ac dictum magna. Nam sed mattis sem. Donec tortor felis, finibus in lectus fringilla, semper finibus turpis. &quot;);\r\n        jta.setFont(new java.awt.Font(&quot;Arial&quot;, 0, 18));\r\n        jta.setForeground(new java.awt.Color(204, 204, 204));\r\n        jta.setLineWrap(true);\r\n        jta.setWrapStyleWord(true);\r\n        jta.setEditable(false);\r\n        jta.setBackground(new Color(45,45,45));\r\n        jta.setHighlighter(null);\r\n        actual.add(jta);\r\n        \r\n        PopupScroll ps = new PopupScroll(actual);\r\n        \r\n        JScrollPane scroll = new JScrollPane(); \r\n        scroll.getViewport().add(ps);\r\n        \r\n        setModalityType(java.awt.Dialog.ModalityType.MODELESS);\r\n        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);\r\n        setResizable(false);\r\n        setLocationRelativeTo(null);\r\n        getContentPane().setLayout(new BorderLayout());\r\n        getContentPane().add(scroll);\r\n        \r\n        pack();\r\n    }\r\n    \r\n    public static void launch() {\r\n        DisplayPopup dp = new DisplayPopup();\r\n        dp.setVisible(true);\r\n    }\r\n    \r\n    public static void main(String[] args) {                                                    \r\n        javax.swing.SwingUtilities.invokeLater(DisplayPopup::launch);                                                                                       \r\n    } \r\n    \r\n    private class PopupScroll extends JPanel implements Scrollable {\r\n        \r\n        public PopupScroll(JPanel jp) {\r\n            setBackground(Color.PINK);\r\n            setLayout(new BorderLayout());\r\n            add(jp);\r\n        }\r\n        \r\n        @Override\r\n        public Dimension getPreferredScrollableViewportSize() {\r\n            return new Dimension(500,Math.min((int)getPreferredSize().getHeight(),700));\r\n        }\r\n\r\n        @Override\r\n        public int getScrollableUnitIncrement(Rectangle arg0, int arg1, int arg2) {\r\n            return 1;\r\n        }\r\n\r\n        @Override\r\n        public int getScrollableBlockIncrement(Rectangle arg0, int arg1, int arg2) {\r\n            return 1;\r\n        }\r\n\r\n        @Override\r\n        public boolean getScrollableTracksViewportWidth() {\r\n            return true; \r\n        }\r\n\r\n        @Override\r\n        public boolean getScrollableTracksViewportHeight() {\r\n            return false;\r\n        }\r\n        \r\n    }\r\n    \r\n}\r\n```\r\nThe dialog does not size to include all lines of text. Unlike [this](https://stackoverflow.com/questions/23260894/jdialog-doesnt-size-correctly-with-wrapped-jtextarea) solution to a similar issue, calling pack does not solve the problem. I have a few guesses about the solution, maybe using something besides a JTextArea (because I am only trying to display text...?), but I don&#39;t know what that would be. I&#39;ve tried putting a hierarchy listener on the vertical scroll bar so I could detect when it is active without making the dialog visible, but that did not work. Is this a hard problem or am I missing something obvious?","title":"JTextArea with line wrap reports incorrect preferred size to JDialog pack?","body":"<p>I am using multiple JTextAreas to display variable sized amounts of text, with LineWrap and WrapStyleWord both true. One application of this is displaying a JDialog with multiple of these text areas inside a JScrollPane. The panel that contains all of these text areas implements Scrollable (as explained <a href=\"https://stackoverflow.com/questions/5759131/setting-the-maximum-size-of-a-jdialog\">here</a>) allowing the JDialog to have a maximum size, but still shrink. The JDialog has a set horizontal size, however. The horizontal scroll bar is forced to never appear, and the vertical scrollbar should not appear unless the dialog reaches its maximum size. However, in cases where the JTextArea wraps its lines, the vertical scroll bar appears while the JDialog's height is smaller than its maximum. The issue seems to be that the JTextArea reports a preferred height of one row when the JDialog is packed, causing the height of the dialog to be smaller than the height of the panel as the text area takes up more than one row. </p>\n\n<p>It seems to be a catch-22, as to get the proper height of the text area it needs to be added to a panel with the desired width to calculate line wrap, which would allow the actual lines to be counted (using a method found <a href=\"https://stackoverflow.com/questions/23260894/jdialog-doesnt-size-correctly-with-wrapped-jtextarea\">here</a>). But the JDialog requires a preferred size before pack is called (from what I understand), causing the issue. To demonstrate the problem:</p>\n\n<pre><code>import java.awt.BorderLayout;\nimport java.awt.Color;\nimport java.awt.Dimension;\nimport java.awt.Rectangle;\nimport javax.swing.BoxLayout;\nimport javax.swing.JDialog;\nimport javax.swing.JPanel;\nimport javax.swing.JScrollPane;\nimport javax.swing.JTextArea;\nimport javax.swing.Scrollable;\n\npublic class DisplayPopup extends JDialog {\n\n    public DisplayPopup() {\n\n        JPanel actual = new JPanel(); \n        actual.setLayout(new BoxLayout(actual, BoxLayout.Y_AXIS));\n        actual.setOpaque(false);\n\n        JTextArea jta = new JTextArea();\n        jta.setText(\"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed ac dictum magna. Nam sed mattis sem. Donec tortor felis, finibus in lectus fringilla, semper finibus turpis. \");\n        jta.setFont(new java.awt.Font(\"Arial\", 0, 18));\n        jta.setForeground(new java.awt.Color(204, 204, 204));\n        jta.setLineWrap(true);\n        jta.setWrapStyleWord(true);\n        jta.setEditable(false);\n        jta.setBackground(new Color(45,45,45));\n        jta.setHighlighter(null);\n        actual.add(jta);\n\n        PopupScroll ps = new PopupScroll(actual);\n\n        JScrollPane scroll = new JScrollPane(); \n        scroll.getViewport().add(ps);\n\n        setModalityType(java.awt.Dialog.ModalityType.MODELESS);\n        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);\n        setResizable(false);\n        setLocationRelativeTo(null);\n        getContentPane().setLayout(new BorderLayout());\n        getContentPane().add(scroll);\n\n        pack();\n    }\n\n    public static void launch() {\n        DisplayPopup dp = new DisplayPopup();\n        dp.setVisible(true);\n    }\n\n    public static void main(String[] args) {                                                    \n        javax.swing.SwingUtilities.invokeLater(DisplayPopup::launch);                                                                                       \n    } \n\n    private class PopupScroll extends JPanel implements Scrollable {\n\n        public PopupScroll(JPanel jp) {\n            setBackground(Color.PINK);\n            setLayout(new BorderLayout());\n            add(jp);\n        }\n\n        @Override\n        public Dimension getPreferredScrollableViewportSize() {\n            return new Dimension(500,Math.min((int)getPreferredSize().getHeight(),700));\n        }\n\n        @Override\n        public int getScrollableUnitIncrement(Rectangle arg0, int arg1, int arg2) {\n            return 1;\n        }\n\n        @Override\n        public int getScrollableBlockIncrement(Rectangle arg0, int arg1, int arg2) {\n            return 1;\n        }\n\n        @Override\n        public boolean getScrollableTracksViewportWidth() {\n            return true; \n        }\n\n        @Override\n        public boolean getScrollableTracksViewportHeight() {\n            return false;\n        }\n\n    }\n\n}\n</code></pre>\n\n<p>The dialog does not size to include all lines of text. Unlike <a href=\"https://stackoverflow.com/questions/23260894/jdialog-doesnt-size-correctly-with-wrapped-jtextarea\">this</a> solution to a similar issue, calling pack does not solve the problem. I have a few guesses about the solution, maybe using something besides a JTextArea (because I am only trying to display text...?), but I don't know what that would be. I've tried putting a hierarchy listener on the vertical scroll bar so I could detect when it is active without making the dialog visible, but that did not work. Is this a hard problem or am I missing something obvious?</p>\n"},{"tags":["java","spring-boot","eclipse","hibernate","jpa"],"answers":[{"tags":[],"owner":{"account_id":26056137,"reputation":36,"user_id":19758437,"display_name":"ARPAN NANDI"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660846758,"creation_date":1660846758,"answer_id":73407748,"question_id":73407349,"body_markdown":"Create the third entity for the third table, create the student object and the subject object . put it in the third entity object, create the third repository and save that, all three tables will be updated together. Just make sure your relationships are correctly mentioned and you are done. ","title":"Spring data JPA save and updating parent entity","body":"<p>Create the third entity for the third table, create the student object and the subject object . put it in the third entity object, create the third repository and save that, all three tables will be updated together. Just make sure your relationships are correctly mentioned and you are done.</p>\n"},{"tags":[],"owner":{"account_id":3032783,"reputation":5092,"user_id":2571455,"display_name":"Rambler"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660847201,"creation_date":1660847201,"answer_id":73407840,"question_id":73407349,"body_markdown":"Update your Student entity to encapsulate Subject.\r\nThe idea is to explicitly define relationship between Student and Subject , and further leverag `Cascade` to propagate changes : \r\n\r\n````\r\n@Table(name = &quot;student&quot;)\r\n@Data\r\npublic class Student {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;grade&quot;)\r\n    private int grade;\r\n\r\n    @OneToOne(cascade = {CascadeType.PERSIST, CascadeType.REMOVE, CascadeType.MERGE}, orphanRemoval = true)\r\n    @JoinColumn(name = &quot;SUBJECT_ID&quot;)\r\n    Subject subject;\r\n}\r\n````\r\n\r\nNote : You  need to make sure that you populate Subject when storing Student.\r\n\r\n\r\nFor more clarity , explore the examples presented here : https://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/\r\n\r\n\r\n","title":"Spring data JPA save and updating parent entity","body":"<p>Update your Student entity to encapsulate Subject.\nThe idea is to explicitly define relationship between Student and Subject , and further leverag <code>Cascade</code> to propagate changes :</p>\n<pre><code>@Table(name = &quot;student&quot;)\n@Data\npublic class Student {\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;grade&quot;)\n    private int grade;\n\n    @OneToOne(cascade = {CascadeType.PERSIST, CascadeType.REMOVE, CascadeType.MERGE}, orphanRemoval = true)\n    @JoinColumn(name = &quot;SUBJECT_ID&quot;)\n    Subject subject;\n}\n</code></pre>\n<p>Note : You  need to make sure that you populate Subject when storing Student.</p>\n<p>For more clarity , explore the examples presented here : <a href=\"https://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/a-beginners-guide-to-jpa-and-hibernate-cascade-types/</a></p>\n"}],"owner":{"account_id":26099738,"reputation":1,"user_id":19795356,"display_name":"Daniel Pads"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":443,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1660847201,"creation_date":1660844459,"question_id":73407349,"body_markdown":"I have two entities called Student and Subject. They are stored in tables in the following format\r\n\r\n\r\n\r\n|student_id| name | grade |\r\n|:--------:|:----:|:-----:|\r\n|1         | John |   1   |\r\n\r\n|subject_id|name|\r\n|:----:|:------:|\r\n|1|English|\r\n|2|Math| \r\n\r\n\r\n|subject_id|student_id|mark|\r\n|:----:|:------:|:------:|\r\n|1|1|75|\r\n|2|1|75|\r\n\r\n```\r\n**Student:**\r\n\r\n@Table(name = &quot;student&quot;)\r\n@Data\r\npublic class Student {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    @Column(name = &quot;grade&quot;)\r\n    private int grade;\r\n\r\n    //getters and setters left out for this example\r\n}\r\n\r\n**Subject:**\r\n\r\n@Table(name = &quot;subject&quot;)\r\n@Data\r\npublic class Subject {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = IDENTITY)\r\n    private Long id;\r\n\r\n    @Column(name = &quot;name&quot;)\r\n    private String name;\r\n\r\n    //getters and setters left out for this example\r\n}\r\n\r\n**StudentRepository:**\r\n\r\npublic interface StudentRepository extends JpaRepository&lt;Student, Long&gt; {\r\n}\r\n\r\n\r\n```\r\n\r\nHow do I make it so that everytime I add a student using a StudentController, the subjects are automatically added to the student.","title":"Spring data JPA save and updating parent entity","body":"<p>I have two entities called Student and Subject. They are stored in tables in the following format</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">student_id</th>\n<th style=\"text-align: center;\">name</th>\n<th style=\"text-align: center;\">grade</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: center;\">John</td>\n<td style=\"text-align: center;\">1</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">subject_id</th>\n<th style=\"text-align: center;\">name</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: center;\">English</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">2</td>\n<td style=\"text-align: center;\">Math</td>\n</tr>\n</tbody>\n</table>\n</div><div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">subject_id</th>\n<th style=\"text-align: center;\">student_id</th>\n<th style=\"text-align: center;\">mark</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: center;\">75</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">2</td>\n<td style=\"text-align: center;\">1</td>\n<td style=\"text-align: center;\">75</td>\n</tr>\n</tbody>\n</table>\n</div>\n<pre><code>**Student:**\n\n@Table(name = &quot;student&quot;)\n@Data\npublic class Student {\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    @Column(name = &quot;grade&quot;)\n    private int grade;\n\n    //getters and setters left out for this example\n}\n\n**Subject:**\n\n@Table(name = &quot;subject&quot;)\n@Data\npublic class Subject {\n\n    @Id\n    @GeneratedValue(strategy = IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;name&quot;)\n    private String name;\n\n    //getters and setters left out for this example\n}\n\n**StudentRepository:**\n\npublic interface StudentRepository extends JpaRepository&lt;Student, Long&gt; {\n}\n\n\n</code></pre>\n<p>How do I make it so that everytime I add a student using a StudentController, the subjects are automatically added to the student.</p>\n"},{"tags":["java","hadoop"],"answers":[{"tags":[],"owner":{"account_id":1920143,"reputation":7756,"user_id":1731862,"accept_rate":71,"display_name":"Ankur Shanbhag"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1390374990,"creation_date":1390374514,"answer_id":21276396,"question_id":21276134,"body_markdown":"&gt; Job.getInstance cannot be resolved to a type.\r\n\r\nYou get the error message because, **required libraries are not present on your application class-path.** You need `hadoop-core*.jar` file present on your class-path to resolve this issue.\r\n&gt; \r\n&gt; By the way which jar contains this new Job class with\r\n&gt; Job.getInstance(Configuratio,String) method\r\n\r\nThe `org.apache.hadoop.mapreduce.Job` class contained within `hadoop-core-*.jar` file. The jar file name will be appended by the hadoop version and vendor name (cdh - Cloudera, hdf - hortenworks etc.)\r\n\r\nSuggestion:\r\n\r\n`Job.getInstance()` is a static API, and you need not create an instance of the Job class to access it. Interestingly, `getInstance()` is used to create a new instance of the Job class, and if you already have one created using `new` keyword, you are not required to call `getInstance` again.\r\n\r\nReplace `Job job = new Job.getInstance(conf, &quot;word count&quot;);` with \r\n`Job job =  Job.getInstance(conf, &quot;word count&quot;);`\r\n\r\n\r\n\r\n\r\n","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<blockquote>\n  <p>Job.getInstance cannot be resolved to a type.</p>\n</blockquote>\n\n<p>You get the error message because, <strong>required libraries are not present on your application class-path.</strong> You need <code>hadoop-core*.jar</code> file present on your class-path to resolve this issue.</p>\n\n<blockquote>\n  <p>By the way which jar contains this new Job class with\n  Job.getInstance(Configuratio,String) method</p>\n</blockquote>\n\n<p>The <code>org.apache.hadoop.mapreduce.Job</code> class contained within <code>hadoop-core-*.jar</code> file. The jar file name will be appended by the hadoop version and vendor name (cdh - Cloudera, hdf - hortenworks etc.)</p>\n\n<p>Suggestion:</p>\n\n<p><code>Job.getInstance()</code> is a static API, and you need not create an instance of the Job class to access it. Interestingly, <code>getInstance()</code> is used to create a new instance of the Job class, and if you already have one created using <code>new</code> keyword, you are not required to call <code>getInstance</code> again.</p>\n\n<p>Replace <code>Job job = new Job.getInstance(conf, \"word count\");</code> with \n<code>Job job =  Job.getInstance(conf, \"word count\");</code></p>\n"},{"tags":[],"owner":{"account_id":216239,"reputation":145,"user_id":471355,"display_name":"Arunraj Nair"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1390566289,"creation_date":1390566289,"answer_id":21332673,"question_id":21276134,"body_markdown":"If you are using the old MapReduce API, continue using `new Job()` to create the instance. If you have migrated to the new API, use `Job job = Job.getInstance(conf, &quot;word count&quot;);`","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<p>If you are using the old MapReduce API, continue using <code>new Job()</code> to create the instance. If you have migrated to the new API, use <code>Job job = Job.getInstance(conf, \"word count\");</code></p>\n"},{"tags":[],"owner":{"account_id":1763598,"reputation":81,"user_id":1610023,"display_name":"bigmakers"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1458718020,"creation_date":1458718020,"answer_id":36172077,"question_id":21276134,"body_markdown":"Try that\r\nJob job = Job.getInstance(conf, &quot;word count&quot;);\r\nchange to\r\nJob job = new Job(conf);","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<p>Try that\nJob job = Job.getInstance(conf, \"word count\");\nchange to\nJob job = new Job(conf);</p>\n"},{"tags":[],"owner":{"account_id":1145300,"reputation":3158,"user_id":1128216,"accept_rate":20,"display_name":"Jonathan Morales V&#233;lez"},"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1459866107,"creation_date":1459866107,"answer_id":36429113,"question_id":21276134,"body_markdown":"How I solved this issue was by adding [hadoop-core][1] as dependency. I had specified only [hadoop-common][2].\r\n\r\n    &lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;hadoop-core&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;1.2.1&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n\t&lt;dependency&gt;\r\n\t\t&lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n\t\t&lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\r\n\t\t&lt;version&gt;2.7.2&lt;/version&gt;\r\n\t&lt;/dependency&gt;\r\n  &lt;/dependencies&gt;\r\n\r\n\r\n  [1]: http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core\r\n  [2]: http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<p>How I solved this issue was by adding <a href=\"http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core\" rel=\"nofollow\">hadoop-core</a> as dependency. I had specified only <a href=\"http://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common\" rel=\"nofollow\">hadoop-common</a>.</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n    &lt;artifactId&gt;hadoop-core&lt;/artifactId&gt;\n    &lt;version&gt;1.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n    &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\n    &lt;version&gt;2.7.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p></p>\n"},{"tags":[],"owner":{"account_id":5346693,"reputation":2655,"user_id":4262053,"accept_rate":78,"display_name":"Reihan_amn"},"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1506316211,"creation_date":1506192552,"answer_id":46383150,"question_id":21276134,"body_markdown":"Change it with this\r\n   \r\n            Configuration conf = new Configuration();\r\n            Job job = new Job(conf);  \r\nor \r\n\r\n            Job job = new Job(new Configuration());\r\n","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<p>Change it with this</p>\n\n<pre><code>        Configuration conf = new Configuration();\n        Job job = new Job(conf);  \n</code></pre>\n\n<p>or </p>\n\n<pre><code>        Job job = new Job(new Configuration());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5371081,"reputation":903,"user_id":4279598,"accept_rate":82,"display_name":"0014"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1570562675,"creation_date":1570562675,"answer_id":58292833,"question_id":21276134,"body_markdown":"In my case, I was using the wrong import statement for the Job class.\r\n\r\nMake sure you are using `import org.apache.hadoop.mapreduce.Job;`","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<p>In my case, I was using the wrong import statement for the Job class.</p>\n\n<p>Make sure you are using <code>import org.apache.hadoop.mapreduce.Job;</code></p>\n"},{"tags":[],"owner":{"account_id":23052176,"reputation":3,"user_id":17168823,"display_name":"MAGistr"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660847084,"creation_date":1660847084,"answer_id":73407820,"question_id":21276134,"body_markdown":"I want to share my experience.\r\n\r\nMy **pom.xml** it looks like this:\r\n\r\n   \r\n    &lt;repositories&gt;\r\n        &lt;repository&gt;\r\n            &lt;id&gt;apache&lt;/id&gt;\r\n            &lt;url&gt;http://maven.apache.org&lt;/url&gt;\r\n        &lt;/repository&gt;\r\n    &lt;/repositories&gt;\r\n\r\n    &lt;dependencies&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-core&lt;/artifactId&gt;\r\n            &lt;version&gt;1.2.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\r\n            &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\r\n            &lt;version&gt;3.2.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n\r\n    &lt;/dependencies&gt;\r\n\r\n\r\nProgram code (**public static void main(String[] args)**): \r\n\r\n            Job job = new Job();\r\n            job.setJarByClass(YOUR_CLASS_NAME.class);\r\n            job.setJobName(&quot;Word count&quot;);\r\n\r\nImport instruction: `import org.apache.hadoop.mapreduce.Job;`\r\n\r\nI hope my answer will be useful. I wish you success!","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<p>I want to share my experience.</p>\n<p>My <strong>pom.xml</strong> it looks like this:</p>\n<pre><code>&lt;repositories&gt;\n    &lt;repository&gt;\n        &lt;id&gt;apache&lt;/id&gt;\n        &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n    &lt;/repository&gt;\n&lt;/repositories&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-core --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n        &lt;artifactId&gt;hadoop-core&lt;/artifactId&gt;\n        &lt;version&gt;1.2.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;!-- https://mvnrepository.com/artifact/org.apache.hadoop/hadoop-common --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;\n        &lt;artifactId&gt;hadoop-common&lt;/artifactId&gt;\n        &lt;version&gt;3.2.4&lt;/version&gt;\n    &lt;/dependency&gt;\n\n&lt;/dependencies&gt;\n</code></pre>\n<p>Program code (<strong>public static void main(String[] args)</strong>):</p>\n<pre><code>        Job job = new Job();\n        job.setJarByClass(YOUR_CLASS_NAME.class);\n        job.setJobName(&quot;Word count&quot;);\n</code></pre>\n<p>Import instruction: <code>import org.apache.hadoop.mapreduce.Job;</code></p>\n<p>I hope my answer will be useful. I wish you success!</p>\n"}],"owner":{"account_id":2474737,"reputation":113,"user_id":2155595,"accept_rate":20,"display_name":"sio2deep"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":10246,"favorite_count":0,"down_vote_count":0,"up_vote_count":5,"answer_count":7,"score":5,"last_activity_date":1660847084,"creation_date":1390373606,"question_id":21276134,"body_markdown":"Have setup Hadoop 2.2 .Trying to remove the deprecated API \r\n\r\n        Job job = new Job(conf, &quot;word count&quot;);\r\n\r\nfrom example Wordcount (which comes with Hadoop ) [here][1]\r\n\r\nReplaced the deprecated API with\r\n\r\nEDIT:\r\n\r\n        Job job = Job.getInstance(conf, &quot;word count&quot;);\r\n\r\ncompile error is \r\n\r\n&gt; Job.getInstance cannot be resolved to a type.\r\n\r\nThe Job class which is already imported(old API or MR1) seems doesn&#39;t have this method.\r\n\r\nWhich jar contains this new Job class with `Job.getInstance(Configuratio,String)` method\r\n\r\nHow to resolve this? Are there any additional changes to the example to migrate to MapReduce v2?\r\n\r\n  [1]: http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-examples/0.20.2-320/org/apache/hadoop/examples/WordCount.java","title":"Jar file for MapReduce new API Job.getInstance(Configuration, String)","body":"<p>Have setup Hadoop 2.2 .Trying to remove the deprecated API </p>\n\n<pre><code>    Job job = new Job(conf, \"word count\");\n</code></pre>\n\n<p>from example Wordcount (which comes with Hadoop ) <a href=\"http://grepcode.com/file/repository.cloudera.com/content/repositories/releases/com.cloudera.hadoop/hadoop-examples/0.20.2-320/org/apache/hadoop/examples/WordCount.java\" rel=\"noreferrer\">here</a></p>\n\n<p>Replaced the deprecated API with</p>\n\n<p>EDIT:</p>\n\n<pre><code>    Job job = Job.getInstance(conf, \"word count\");\n</code></pre>\n\n<p>compile error is </p>\n\n<blockquote>\n  <p>Job.getInstance cannot be resolved to a type.</p>\n</blockquote>\n\n<p>The Job class which is already imported(old API or MR1) seems doesn't have this method.</p>\n\n<p>Which jar contains this new Job class with <code>Job.getInstance(Configuratio,String)</code> method</p>\n\n<p>How to resolve this? Are there any additional changes to the example to migrate to MapReduce v2?</p>\n"},{"tags":["java","selenium","selenium-webdriver","webdriver"],"comments":[{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":1,"creation_date":1593641408,"post_id":62685372,"comment_id":110855763,"body_markdown":"I think you want to set Selenium to use a profile that is already logged-in/remembered.  It&#39;s going to depend on the site&#39;s authorization, but some will use sessions cookies which are tied to a profile.","body":"I think you want to set Selenium to use a profile that is already logged-in/remembered.  It&#39;s going to depend on the site&#39;s authorization, but some will use sessions cookies which are tied to a profile."},{"owner":{"account_id":1648353,"reputation":630,"user_id":1519417,"accept_rate":62,"display_name":"Vladimir"},"score":0,"creation_date":1593643492,"post_id":62685372,"comment_id":110856322,"body_markdown":"@pcalkins Could you provide a code sample? Thanks","body":"@pcalkins Could you provide a code sample? Thanks"},{"owner":{"account_id":6077817,"reputation":1213,"user_id":4744568,"display_name":"pcalkins"},"score":1,"creation_date":1593643836,"post_id":62685372,"comment_id":110856406,"body_markdown":"There&#39;s a post here about Chromedriver: https://stackoverflow.com/questions/14480717/load-chrome-profile-using-selenium-webdriver-using-java  And Firefox here: https://stackoverflow.com/questions/52464598/how-can-i-set-a-default-profile-for-the-firefox-driver-in-selenium-webdriver-3  I don&#39;t think you can set one for IE/Edge.","body":"There&#39;s a post here about Chromedriver: <a href=\"https://stackoverflow.com/questions/14480717/load-chrome-profile-using-selenium-webdriver-using-java\" title=\"load chrome profile using selenium webdriver using java\">stackoverflow.com/questions/14480717/&hellip;</a>  And Firefox here: <a href=\"https://stackoverflow.com/questions/52464598/how-can-i-set-a-default-profile-for-the-firefox-driver-in-selenium-webdriver-3\" title=\"how can i set a default profile for the firefox driver in selenium webdriver 3\">stackoverflow.com/questions/52464598/&hellip;</a>  I don&#39;t think you can set one for IE/Edge."},{"owner":{"account_id":1648353,"reputation":630,"user_id":1519417,"accept_rate":62,"display_name":"Vladimir"},"score":0,"creation_date":1593645854,"post_id":62685372,"comment_id":110856795,"body_markdown":"@pcalkins, I could not find anything about adding cookies to ChromeOptions to bypass login in the links you provided. Could you please elaborate?","body":"@pcalkins, I could not find anything about adding cookies to ChromeOptions to bypass login in the links you provided. Could you please elaborate?"},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1593667425,"post_id":62685372,"comment_id":110861450,"body_markdown":"@Vladimir, the point is: 1. create manualy new browser profile 2. open browser manualy and perform login 3. load driver with the new profile.","body":"@Vladimir, the point is: 1. create manualy new browser profile 2. open browser manualy and perform login 3. load driver with the new profile."},{"owner":{"account_id":1648353,"reputation":630,"user_id":1519417,"accept_rate":62,"display_name":"Vladimir"},"score":0,"creation_date":1593720315,"post_id":62685372,"comment_id":110886875,"body_markdown":"@pburgr 1. I created a new profile manually in Chrome Version 83.0.4103.116.2. Logged in to the page. 3. Added the new profile to the script. Still stay on the login page. String chromeProfilePath = &quot;C:\\\\Users\\\\vladi\\\\AppData\\\\Local\\\\Google\\\\Chrome\\\\User Data\\\\Profile 1&quot;;\n    \tWebDriverManager.chromedriver().setup();\n    \tChromeOptions options = new ChromeOptions();\n    \toptions.addArguments(&quot;user-data-dir=&quot; + chromeProfilePath);\n\t\tWebDriver driver=new ChromeDriver(options);        \n\t\tdriver.get(&quot;http://demo.guru99.com/test/cookie/selenium_aut.php&quot;);","body":"@pburgr 1. I created a new profile manually in Chrome Version 83.0.4103.116.2. Logged in to the page. 3. Added the new profile to the script. Still stay on the login page. String chromeProfilePath = &quot;C:\\\\Users\\\\vladi\\\\AppData\\\\Local\\\\Google\\\\Chrome\\\\User Data\\\\Profile 1&quot;;     \tWebDriverManager.chromedriver().setup();     \tChromeOptions options = new ChromeOptions();     \toptions.addArguments(&quot;user-data-dir=&quot; + chromeProfilePath); \t\tWebDriver driver=new ChromeDriver(options);         \t\tdriver.get(&quot;<a href=\"http://demo.guru99.com/test/cookie/selenium_aut.php&quot;\" rel=\"nofollow noreferrer\">demo.guru99.com/test/cookie/selenium_aut.php&quot;</a>)&zwnj;&#8203;;"},{"owner":{"account_id":1648353,"reputation":630,"user_id":1519417,"accept_rate":62,"display_name":"Vladimir"},"score":0,"creation_date":1593723079,"post_id":62685372,"comment_id":110887952,"body_markdown":"I created an avatar Tester for the new profile. But when the script opens the login page I see Not Signed In icon. Is that the correct behavior?","body":"I created an avatar Tester for the new profile. But when the script opens the login page I see Not Signed In icon. Is that the correct behavior?"},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":1,"creation_date":1593758543,"post_id":62685372,"comment_id":110896069,"body_markdown":"You have to navigate the driver to http://demo.guru99.com/test/cookie/selenium_cookie.php to check the cookie.","body":"You have to navigate the driver to <a href=\"http://demo.guru99.com/test/cookie/selenium_cookie.php\" rel=\"nofollow noreferrer\">demo.guru99.com/test/cookie/selenium_cookie.php</a> to check the cookie."}],"answers":[{"tags":[],"owner":{"account_id":1648353,"reputation":630,"user_id":1519417,"accept_rate":62,"display_name":"Vladimir"},"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1593932810,"creation_date":1593932810,"answer_id":62737795,"question_id":62685372,"body_markdown":"I misunderstood the process. The sources I used all copy the same error. Thank you to @pburgr for the hint. The correct process is\r\n\r\n 1. Login to the site with your username and password to record the cookies into the file.\r\n 2. Open login page to get the domain cookies.\r\n 3. Add cookies from the file to your request and go to the home page bypassing login process.\r\nIn the code that is available on the web, they go to the login page in step 3 instead of the home page. ","title":"How to bypass login using cookie in Selenium Java?","body":"<p>I misunderstood the process. The sources I used all copy the same error. Thank you to @pburgr for the hint. The correct process is</p>\n<ol>\n<li>Login to the site with your username and password to record the cookies into the file.</li>\n<li>Open login page to get the domain cookies.</li>\n<li>Add cookies from the file to your request and go to the home page bypassing login process.\nIn the code that is available on the web, they go to the login page in step 3 instead of the home page.</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":8801321,"reputation":43,"user_id":9092606,"display_name":"Brizz009"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1625704044,"creation_date":1625657001,"answer_id":68285081,"question_id":62685372,"body_markdown":"as Vladimir said: \r\n```lang.java\r\ndriver.get(&quot;http://demo.guru99.com/test/cookie/selenium_aut.php&quot;);\r\n//read cookies from file and add it to browser \r\ndriver.manage().addCookie(cookie);\r\ndriver.navigate().refresh();\r\n```\r\n","title":"How to bypass login using cookie in Selenium Java?","body":"<p>as Vladimir said:</p>\n<pre><code>driver.get(&quot;http://demo.guru99.com/test/cookie/selenium_aut.php&quot;);\n//read cookies from file and add it to browser \ndriver.manage().addCookie(cookie);\ndriver.navigate().refresh();\n</code></pre>\n"}],"owner":{"account_id":1648353,"reputation":630,"user_id":1519417,"accept_rate":62,"display_name":"Vladimir"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4509,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":62737795,"answer_count":2,"score":1,"last_activity_date":1660846917,"creation_date":1593637731,"question_id":62685372,"body_markdown":"I looked at multiple sources on the web. For example, [https://www.guru99.com/handling-cookies-selenium-webdriver.html][1]\r\nNothing works as they describe. After adding cookies with `driver.manage().addCookie(ck)`, you still stay on the login page.\r\nCould you, please provide, at least one **working** example on how to bypass the login screen to speed up the test execution suite in WebDriver Java?\r\n\r\n  [1]: https://www.guru99.com/handling-cookies-selenium-webdriver.html","title":"How to bypass login using cookie in Selenium Java?","body":"<p>I looked at multiple sources on the web. For example, <a href=\"https://www.guru99.com/handling-cookies-selenium-webdriver.html\" rel=\"nofollow noreferrer\">https://www.guru99.com/handling-cookies-selenium-webdriver.html</a>\nNothing works as they describe. After adding cookies with <code>driver.manage().addCookie(ck)</code>, you still stay on the login page.\nCould you, please provide, at least one <strong>working</strong> example on how to bypass the login screen to speed up the test execution suite in WebDriver Java?</p>\n"},{"tags":["java","arrays","indexoutofboundsexception"],"comments":[{"owner":{"account_id":944628,"reputation":5058,"user_id":972121,"accept_rate":71,"display_name":"mclaassen"},"score":1,"creation_date":1370047252,"post_id":16867875,"comment_id":24331544,"body_markdown":"Why bother converting to long and then trying to extract digits? Just use substring().","body":"Why bother converting to long and then trying to extract digits? Just use substring()."},{"owner":{"account_id":2316842,"reputation":7874,"user_id":2033703,"display_name":"Eric Jablow"},"score":0,"creation_date":1370047464,"post_id":16867875,"comment_id":24331576,"body_markdown":"When do you create phoneArray?  Also, why so many phone variables?  Mclaassen is right.  In any case, you&#39;re being North American Numbering Plan-centric.  And, where does the input come from in here?","body":"When do you create phoneArray?  Also, why so many phone variables?  Mclaassen is right.  In any case, you&#39;re being North American Numbering Plan-centric.  And, where does the input come from in here?"},{"owner":{"account_id":77350,"reputation":40747,"user_id":220834,"accept_rate":50,"display_name":"Don Roby"},"score":0,"creation_date":1370047838,"post_id":16867875,"comment_id":24331636,"body_markdown":"Phone numbers should be treated as strings and not numbers.","body":"Phone numbers should be treated as strings and not numbers."},{"owner":{"account_id":162781,"reputation":9602,"user_id":384464,"display_name":"xagyg"},"score":0,"creation_date":1370052324,"post_id":16867875,"comment_id":24332282,"body_markdown":"Show these declarations - `phonelength`, `initialphone`, `phonearray`. You are only giving us partial information.","body":"Show these declarations - <code>phonelength</code>, <code>initialphone</code>, <code>phonearray</code>. You are only giving us partial information."},{"owner":{"account_id":8546,"reputation":17688,"user_id":15472,"accept_rate":87,"display_name":"tucuxi"},"score":0,"creation_date":1619000056,"post_id":16867875,"comment_id":118770511,"body_markdown":"You should provide the full code, including *the input that causes the error*, and (while you are at it) the error itself. Asking &quot;what is going wrong&quot; without showing what wrong is makes it unnecessarily hard to answer.","body":"You should provide the full code, including <i>the input that causes the error</i>, and (while you are at it) the error itself. Asking &quot;what is going wrong&quot; without showing what wrong is makes it unnecessarily hard to answer."}],"answers":[{"tags":[],"owner":{"account_id":134022,"reputation":717183,"user_id":335858,"accept_rate":81,"display_name":"Sergey Kalinichenko"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1370047565,"creation_date":1370047565,"answer_id":16867924,"question_id":16867875,"body_markdown":"Your `phonearray` does not have enough space: you are accessing index `9`, but `phonearray` has fewer than ten elements.\r\n\r\nYou need to allocate the array like this:\r\n\r\n    phonearray = new int[10];\r\n\r\nOnce you fix this problem, change the loop to avoid accessing index `-1` (that&#39;s what is going to happen when `i` reaches zero).\r\n\r\nFinally, there is no need to subtract `phonetemp1%10` from `phonetemp1`: integer division drops the fraction, so you could do this:\r\n\r\n    phonearray[i-1] = phonetemp1%10;\r\n    phonetemp1 /= 10;","title":"Array Problems java.lang.ArrayIndexOutOfBoundsException: 9","body":"<p>Your <code>phonearray</code> does not have enough space: you are accessing index <code>9</code>, but <code>phonearray</code> has fewer than ten elements.</p>\n\n<p>You need to allocate the array like this:</p>\n\n<pre><code>phonearray = new int[10];\n</code></pre>\n\n<p>Once you fix this problem, change the loop to avoid accessing index <code>-1</code> (that's what is going to happen when <code>i</code> reaches zero).</p>\n\n<p>Finally, there is no need to subtract <code>phonetemp1%10</code> from <code>phonetemp1</code>: integer division drops the fraction, so you could do this:</p>\n\n<pre><code>phonearray[i-1] = phonetemp1%10;\nphonetemp1 /= 10;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3470668,"reputation":541,"user_id":2905072,"display_name":"moonlighter"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1540868083,"creation_date":1540868083,"answer_id":53056723,"question_id":16867875,"body_markdown":"If you have initialized the array correctly with the size same as the length of the initialPhone, you should not see this exception. Your code would rather produce ArrayIndexOutOfBoundException: -1\r\nRewrote your code a bit, and works as expected:\r\n\r\n    import java.util.Arrays;\r\n    \r\n    public class TestMain {\r\n    \r\n      public static void main(String[] args) {\r\n    \r\n        String initialPhone = &quot;4158884532&quot;;\r\n        int phoneLength = initialPhone.length();\r\n        long[] phoneArray = new long[phoneLength];\r\n    \r\n        Long phoneNum = Long.parseLong(initialPhone);\r\n        Long phonetemp1 = phoneNum;\r\n        for (int i = phoneLength; i &gt; 0; i--) {\r\n          phoneArray[i - 1] = phonetemp1 % 10;\r\n          Long phonetemp2 = phonetemp1 - phonetemp1 % 10;\r\n          phonetemp1 = phonetemp2 / 10;\r\n          System.out.println(&quot;Phone temp 2 --&gt; &quot; + phonetemp2 + phonetemp1);\r\n        }\r\n        System.out.println(Arrays.toString(phoneArray));\r\n      }\r\n    }\r\n\r\nEnjoy!","title":"Array Problems java.lang.ArrayIndexOutOfBoundsException: 9","body":"<p>If you have initialized the array correctly with the size same as the length of the initialPhone, you should not see this exception. Your code would rather produce ArrayIndexOutOfBoundException: -1\nRewrote your code a bit, and works as expected:</p>\n\n<pre><code>import java.util.Arrays;\n\npublic class TestMain {\n\n  public static void main(String[] args) {\n\n    String initialPhone = \"4158884532\";\n    int phoneLength = initialPhone.length();\n    long[] phoneArray = new long[phoneLength];\n\n    Long phoneNum = Long.parseLong(initialPhone);\n    Long phonetemp1 = phoneNum;\n    for (int i = phoneLength; i &gt; 0; i--) {\n      phoneArray[i - 1] = phonetemp1 % 10;\n      Long phonetemp2 = phonetemp1 - phonetemp1 % 10;\n      phonetemp1 = phonetemp2 / 10;\n      System.out.println(\"Phone temp 2 --&gt; \" + phonetemp2 + phonetemp1);\n    }\n    System.out.println(Arrays.toString(phoneArray));\n  }\n}\n</code></pre>\n\n<p>Enjoy!</p>\n"}],"owner":{"account_id":2837005,"reputation":847,"user_id":2437416,"accept_rate":62,"display_name":"Max"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11887,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"closed_date":1660846739,"answer_count":2,"score":-1,"last_activity_date":1660846140,"creation_date":1370047000,"question_id":16867875,"body_markdown":"I am trying to write a class that takes a phone number that the user inputs as a string, then stores each digit in an array. I converted the string to a long using Long.parseLong. Here is the function that is supposed to store each individual digit in an array. \r\n\r\n    public void storetoarray()\r\n            //Turn the strings to longs\r\n            //A loop chops of the last digit and stores in an array\r\n    {\r\n        phonelong = Long.parseLong(initialphone);\r\n        phonetemp1 = phonelong;\r\n        for (int i = phonelength; i&gt;=0; i--)\r\n        {\r\n            phonearray[i-1] = phonetemp1%10;\r\n            phonetemp2 = phonetemp1 - phonetemp1%10;\r\n            phonetemp1 = phonetemp2/10;\r\n            System.out.print(&quot;Phone temp 2&quot; + phonetemp2 + phonetemp1);\r\n        }\r\n    }\r\n\r\nThe logic of that loop is to find the last digit of the phone number using a %10, then subtract that number from the original phone number. That new difference is then set to be phonetemp1/10.\r\n\r\nExample 4158884532%10 = 2. That is stored in phonearray[9]. Then phonetemp2 is subtracted giving us 4158884530. Divide that by 10 and you get 415888453. Should be ready to store the next digit. \r\n\r\nWhat is going wrong? Thanks for the help!","title":"Array Problems java.lang.ArrayIndexOutOfBoundsException: 9","body":"<p>I am trying to write a class that takes a phone number that the user inputs as a string, then stores each digit in an array. I converted the string to a long using Long.parseLong. Here is the function that is supposed to store each individual digit in an array. </p>\n\n<pre><code>public void storetoarray()\n        //Turn the strings to longs\n        //A loop chops of the last digit and stores in an array\n{\n    phonelong = Long.parseLong(initialphone);\n    phonetemp1 = phonelong;\n    for (int i = phonelength; i&gt;=0; i--)\n    {\n        phonearray[i-1] = phonetemp1%10;\n        phonetemp2 = phonetemp1 - phonetemp1%10;\n        phonetemp1 = phonetemp2/10;\n        System.out.print(\"Phone temp 2\" + phonetemp2 + phonetemp1);\n    }\n}\n</code></pre>\n\n<p>The logic of that loop is to find the last digit of the phone number using a %10, then subtract that number from the original phone number. That new difference is then set to be phonetemp1/10.</p>\n\n<p>Example 4158884532%10 = 2. That is stored in phonearray[9]. Then phonetemp2 is subtracted giving us 4158884530. Divide that by 10 and you get 415888453. Should be ready to store the next digit. </p>\n\n<p>What is going wrong? Thanks for the help!</p>\n"},{"tags":["java","jenkins"],"comments":[{"owner":{"account_id":1992310,"reputation":11172,"user_id":1786065,"accept_rate":91,"display_name":"Rogue"},"score":0,"creation_date":1660840128,"post_id":73406426,"comment_id":129633971,"body_markdown":"This makes me wonder what job you&#39;re running which is consuming ~6gb of space, and perhaps that the issue resides there (and not with jenkins)","body":"This makes me wonder what job you&#39;re running which is consuming ~6gb of space, and perhaps that the issue resides there (and not with jenkins)"},{"owner":{"account_id":18823848,"reputation":149,"user_id":19192101,"display_name":"Patrick"},"score":0,"creation_date":1660840700,"post_id":73406426,"comment_id":129634180,"body_markdown":"what is your job doing?","body":"what is your job doing?"},{"owner":{"account_id":7544897,"reputation":51,"user_id":5728331,"display_name":"Kamal Baldawa"},"score":0,"creation_date":1660845665,"post_id":73406426,"comment_id":129635864,"body_markdown":"Jobs are just running a batch file, python scripts etc. Around 20 jobs in a day","body":"Jobs are just running a batch file, python scripts etc. Around 20 jobs in a day"}],"owner":{"account_id":7544897,"reputation":51,"user_id":5728331,"display_name":"Kamal Baldawa"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":490,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1660845608,"creation_date":1660839450,"question_id":73406426,"body_markdown":"I am constantly getting OutofMemory Error. Any idea how to resolve this? Jenkins current version 2.361. Jenkins server have 4 CPU @ 2.40GHZ. RAM 16 GB\r\n\r\nEntry in jenkins.xml for heap size is as below. \r\n \r\n\r\n    &lt;arguments&gt;-Dpermissive-script-security.enabled=no_security -Xss16m -Xms1024m -Xmx6144m \r\n\r\n\r\n    Jenkins is configured for JDK 11 from IBM Semeru (see below).\r\n    IMPLEMENTOR=&quot;International Business Machines Corporation&quot;\r\n    IMPLEMENTOR_VERSION=&quot;11.0.14.1&quot;\r\n    JAVA_VERSION=&quot;11.0.14.1&quot;\r\n    JAVA_VERSION_DATE=&quot;2022-02-08&quot;\r\n\r\n\r\n    Error message on jobs \r\n    \r\n        Started by timer\r\n        java.lang.OutOfMemoryError: Java heap space\r\n    \tat java.base/java.lang.StackWalker.getImpl(Native Method)\r\n    \t","title":"Jenkins - java.lang.OutOfMemoryError: Java heap space","body":"<p>I am constantly getting OutofMemory Error. Any idea how to resolve this? Jenkins current version 2.361. Jenkins server have 4 CPU @ 2.40GHZ. RAM 16 GB</p>\n<p>Entry in jenkins.xml for heap size is as below.</p>\n<pre><code>&lt;arguments&gt;-Dpermissive-script-security.enabled=no_security -Xss16m -Xms1024m -Xmx6144m \n\n\nJenkins is configured for JDK 11 from IBM Semeru (see below).\nIMPLEMENTOR=&quot;International Business Machines Corporation&quot;\nIMPLEMENTOR_VERSION=&quot;11.0.14.1&quot;\nJAVA_VERSION=&quot;11.0.14.1&quot;\nJAVA_VERSION_DATE=&quot;2022-02-08&quot;\n\n\nError message on jobs \n\n    Started by timer\n    java.lang.OutOfMemoryError: Java heap space\n    at java.base/java.lang.StackWalker.getImpl(Native Method)\n    \n</code></pre>\n"},{"tags":["java","spring","junit","mockito","verify"],"answers":[{"tags":[],"owner":{"account_id":9586004,"reputation":589,"user_id":7118750,"display_name":"Tim"},"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1660844997,"creation_date":1660844997,"answer_id":73407437,"question_id":73407281,"body_markdown":"You can either ignore it using `Mockito.any(User.class)` \r\n\r\n```\r\nMockito.verify(userRepo).save(Mockito.any(User.class));\r\n```\r\n\r\nor make use of Argument Captor to capture what was passed in and further assert that value if you want.\r\n\r\nSomething like so:\r\n\r\n```  \r\n  @Captor\r\n  private ArgumentCaptor&lt;User&gt; userArgumentCaptor;\r\n\r\n  @Test\r\n  void saveUserTest(){\r\n    //Given\r\n    User userTest = new User(&quot;123&quot;);\r\n\r\n    //When\r\n    userService.saveUser(&quot;123&quot;);\r\n\r\n    //Then\r\n    Mockito.verify(userRepo).save(userArgumentCaptor.capture());\r\n    assert(userArgumentCaptor.getValue().getId()).equals(&quot;123&quot;);\r\n  }","title":"How to use Mockito.verify with ignore one field?","body":"<p>You can either ignore it using <code>Mockito.any(User.class)</code></p>\n<pre><code>Mockito.verify(userRepo).save(Mockito.any(User.class));\n</code></pre>\n<p>or make use of Argument Captor to capture what was passed in and further assert that value if you want.</p>\n<p>Something like so:</p>\n<pre><code>  @Captor\n  private ArgumentCaptor&lt;User&gt; userArgumentCaptor;\n\n  @Test\n  void saveUserTest(){\n    //Given\n    User userTest = new User(&quot;123&quot;);\n\n    //When\n    userService.saveUser(&quot;123&quot;);\n\n    //Then\n    Mockito.verify(userRepo).save(userArgumentCaptor.capture());\n    assert(userArgumentCaptor.getValue().getId()).equals(&quot;123&quot;);\n  }\n</code></pre>\n"}],"owner":{"account_id":8816864,"reputation":199,"user_id":6588243,"accept_rate":20,"display_name":"Taron"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1400,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":73407437,"answer_count":1,"score":0,"last_activity_date":1660844997,"creation_date":1660844073,"question_id":73407281,"body_markdown":"I have a module:\r\n\r\n    class User {\r\n       String id;\r\n       double text;\r\n\r\n       constructor (String id){\r\n           this.id = id;\r\n           this.text = Math.random();\r\n       }\r\n    }\r\nAnd a method:\r\n\r\n    class UserService{\r\n        void saveUser(String id){\r\n            User user = new User(id);\r\n            userRepository.save(user);\r\n        }\r\n    }\r\n\r\nAnd for this code I want to make a Unit test:\r\n\r\n    @Test\r\n    void saveUserTest(){\r\n        //Given\r\n        User userTest = new User(&quot;123&quot;);\r\n\r\n        //When\r\n        UserService.saveUser(&quot;123&quot;);\r\n\r\n        //Then\r\n        Mockito.verify(userRepository).save(userTest);\r\n    }\r\n\r\nand here I got a difference because User text was randomly generated.\r\n\r\nSo, how can I ignore the field text?","title":"How to use Mockito.verify with ignore one field?","body":"<p>I have a module:</p>\n<pre><code>class User {\n   String id;\n   double text;\n\n   constructor (String id){\n       this.id = id;\n       this.text = Math.random();\n   }\n}\n</code></pre>\n<p>And a method:</p>\n<pre><code>class UserService{\n    void saveUser(String id){\n        User user = new User(id);\n        userRepository.save(user);\n    }\n}\n</code></pre>\n<p>And for this code I want to make a Unit test:</p>\n<pre><code>@Test\nvoid saveUserTest(){\n    //Given\n    User userTest = new User(&quot;123&quot;);\n\n    //When\n    UserService.saveUser(&quot;123&quot;);\n\n    //Then\n    Mockito.verify(userRepository).save(userTest);\n}\n</code></pre>\n<p>and here I got a difference because User text was randomly generated.</p>\n<p>So, how can I ignore the field text?</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":4,"creation_date":1563555386,"post_id":57116629,"comment_id":100752088,"body_markdown":"There&#39;s a difference between an _IntelliJ IDEA Module_ and a _Java Module_.","body":"There&#39;s a difference between an <i>IntelliJ IDEA Module</i> and a <i>Java Module</i>."},{"owner":{"account_id":8532578,"reputation":39898,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1563556333,"post_id":57116629,"comment_id":100752463,"body_markdown":"Check out [Modules - Help | IntelliJ IDEA](https://www.jetbrains.com/help/idea/creating-and-managing-modules.html). The `src` directory is a [content root](https://www.jetbrains.com/help/idea/content-roots.html). Both of those are related to IntelliJ specifically. The module system added in Java 9 is part of Java itself; an IntelliJ module may contain a Java 9 module.","body":"Check out <a href=\"https://www.jetbrains.com/help/idea/creating-and-managing-modules.html\" rel=\"nofollow noreferrer\">Modules - Help | IntelliJ IDEA</a>. The <code>src</code> directory is a <a href=\"https://www.jetbrains.com/help/idea/content-roots.html\" rel=\"nofollow noreferrer\">content root</a>. Both of those are related to IntelliJ specifically. The module system added in Java 9 is part of Java itself; an IntelliJ module may contain a Java 9 module."},{"owner":{"account_id":16350694,"reputation":97,"user_id":11809318,"display_name":"Faiz Ahmed"},"score":0,"creation_date":1563557762,"post_id":57116629,"comment_id":100753044,"body_markdown":"@Slaw Appreciate the link, it clarified the confusion. Thank you","body":"@Slaw Appreciate the link, it clarified the confusion. Thank you"},{"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1563559228,"post_id":57116629,"comment_id":100753575,"body_markdown":"I suggest you rework the title of this Question to focus on the word “module” rather than “src”. This might avoid down-votes, and would help future people new to Java.","body":"I suggest you rework the title of this Question to focus on the word “module” rather than “src”. This might avoid down-votes, and would help future people new to Java."}],"answers":[{"tags":[],"owner":{"account_id":322981,"reputation":310745,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1660844380,"creation_date":1563556243,"answer_id":57116944,"question_id":57116629,"body_markdown":"You are conflating two or three different kinds of “module”. \r\n\r\n# Maven modules \r\n\r\nIn a Maven-driven project, quite common among Java developers, a project can be built up from multiple sub-projects each separately compiled. These sub-projects are called [modules in Maven](https://maven.apache.org/guides/mini/guide-multiple-modules.html). \r\n\r\n# IntelliJ project modules\r\n\r\nYears before the rise of open source code manage,ent tools &amp; dependencies project management tools like [Maven][1], [Gradle][2], and [Ivy][3], IDEs each had their own proprietary project management systems and file formats for metadata. \r\n\r\nIf I recall correctly, IntelliJ’s proprietary system for defining a project included “modules”. \r\n\r\nIf you are using a proprietary project tool for your project, I strongly suggest starting over with a new Maven-driven project, or Gradle-driven project. Both Maven and Gradle bring a bit of a learning curve. The learning is well worth the effort as either tool saves much time and trouble later. Also, a Maven or Gradle project can be easily moved to another IDE if you ever want to switch tools. \r\n\r\n# Java modularity\r\n\r\nJava 9 introduced a major addition to how classes are organized, in addition to the [*package* namespace][4]. This is known formally as [*Java Platform Module System*](https://en.m.wikipedia.org/wiki/Java_Platform_Module_System). Also known informally by its project code name, [*Project Jigsaw*][5].\r\n\r\nThe Module System defines a distribution format for physically bundling classes and a [JVM](https://en.m.wikipedia.org/wiki/Java_virtual_machine) together. The standard classes that were formerly all bundled together with every JVM have now been regrouped into separate Java modules. You can now build a console app or desktop app that contains its own JVM with only the standard classes actually used by your app. Entire modules of standard Java classes can be omitted, reducing the size of your final app. \r\n\r\nThis Module System is a separate idea from the other two project “module” kinds discussed above.\r\n\r\n\r\n  [1]: https://en.wikipedia.org/wiki/Apache_Maven\r\n  [2]: https://en.wikipedia.org/wiki/Gradle\r\n  [3]: https://en.wikipedia.org/wiki/Apache_Ivy\r\n  [4]: https://docs.oracle.com/javase/tutorial/java/package/index.html\r\n  [5]: https://openjdk.org/projects/jigsaw/","title":"What are &#39;modules&#39; in intellij IDEA,actually? Is it different from a Java module?","body":"<p>You are conflating two or three different kinds of “module”.</p>\n<h1>Maven modules</h1>\n<p>In a Maven-driven project, quite common among Java developers, a project can be built up from multiple sub-projects each separately compiled. These sub-projects are called <a href=\"https://maven.apache.org/guides/mini/guide-multiple-modules.html\" rel=\"nofollow noreferrer\">modules in Maven</a>.</p>\n<h1>IntelliJ project modules</h1>\n<p>Years before the rise of open source code manage,ent tools &amp; dependencies project management tools like <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Maven</a>, <a href=\"https://en.wikipedia.org/wiki/Gradle\" rel=\"nofollow noreferrer\">Gradle</a>, and <a href=\"https://en.wikipedia.org/wiki/Apache_Ivy\" rel=\"nofollow noreferrer\">Ivy</a>, IDEs each had their own proprietary project management systems and file formats for metadata.</p>\n<p>If I recall correctly, IntelliJ’s proprietary system for defining a project included “modules”.</p>\n<p>If you are using a proprietary project tool for your project, I strongly suggest starting over with a new Maven-driven project, or Gradle-driven project. Both Maven and Gradle bring a bit of a learning curve. The learning is well worth the effort as either tool saves much time and trouble later. Also, a Maven or Gradle project can be easily moved to another IDE if you ever want to switch tools.</p>\n<h1>Java modularity</h1>\n<p>Java 9 introduced a major addition to how classes are organized, in addition to the <a href=\"https://docs.oracle.com/javase/tutorial/java/package/index.html\" rel=\"nofollow noreferrer\"><em>package</em> namespace</a>. This is known formally as <a href=\"https://en.m.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\"><em>Java Platform Module System</em></a>. Also known informally by its project code name, <a href=\"https://openjdk.org/projects/jigsaw/\" rel=\"nofollow noreferrer\"><em>Project Jigsaw</em></a>.</p>\n<p>The Module System defines a distribution format for physically bundling classes and a <a href=\"https://en.m.wikipedia.org/wiki/Java_virtual_machine\" rel=\"nofollow noreferrer\">JVM</a> together. The standard classes that were formerly all bundled together with every JVM have now been regrouped into separate Java modules. You can now build a console app or desktop app that contains its own JVM with only the standard classes actually used by your app. Entire modules of standard Java classes can be omitted, reducing the size of your final app.</p>\n<p>This Module System is a separate idea from the other two project “module” kinds discussed above.</p>\n"}],"owner":{"account_id":16350694,"reputation":97,"user_id":11809318,"display_name":"Faiz Ahmed"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":898,"favorite_count":0,"down_vote_count":4,"up_vote_count":4,"closed_date":1563564595,"accepted_answer_id":57116944,"answer_count":1,"score":0,"last_activity_date":1660844380,"creation_date":1563554808,"question_id":57116629,"body_markdown":"I switched to IntelliJ IDEA a few days back and I did some research around the IDE. Like what the .iml, .idea, etc files/ directories were.\r\nBut I dont get what the &#39;src&#39; folder is. Other answers here have indicated that its a module, but i&#39;m on JDK 1.8 which does&#39;nt have the modularity features of JDK 9. So what is that folder anways?\r\n","title":"What are &#39;modules&#39; in intellij IDEA,actually? Is it different from a Java module?","body":"<p>I switched to IntelliJ IDEA a few days back and I did some research around the IDE. Like what the .iml, .idea, etc files/ directories were.\nBut I dont get what the 'src' folder is. Other answers here have indicated that its a module, but i'm on JDK 1.8 which does'nt have the modularity features of JDK 9. So what is that folder anways?</p>\n"},{"tags":["java","flutter","kotlin","dart","gradle"],"comments":[{"owner":{"account_id":26097323,"reputation":143,"user_id":19793281,"display_name":"Umutcan Bağdu"},"score":0,"creation_date":1660828285,"post_id":73403677,"comment_id":129628929,"body_markdown":"flutter clean - flutter pub get didn&#39;t solve my problem","body":"flutter clean - flutter pub get didn&#39;t solve my problem"},{"owner":{"account_id":21702311,"reputation":322,"user_id":16015309,"display_name":"PradeepKumar"},"score":0,"creation_date":1660831395,"post_id":73403677,"comment_id":129630224,"body_markdown":"post full error log using ====&gt;    flutter run -- verbose","body":"post full error log using ====&gt;    flutter run -- verbose"}],"answers":[{"tags":[],"owner":{"account_id":17609690,"reputation":1072,"user_id":12777999,"display_name":"Mashood .H"},"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1660844088,"creation_date":1660844088,"answer_id":73407284,"question_id":73403677,"body_markdown":"**Step 1**\r\n\r\nGo to your **build.gradle** file in the root of your **Android** directory \r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/8Twet.png\r\n\r\n**Step 2**\r\n\r\n****Upgrade your Kotlin_version to**** \r\n\r\n&gt; ext.kotlin_version = &#39;1.6.10\r\n\r\n\r\n\r\n    buildscript {\r\n        ext.kotlin_version = &#39;1.6.10&#39;\r\n        repositories {\r\n            google()\r\n            mavenCentral()\r\n        }\r\n    \r\n        dependencies {\r\n            classpath &#39;com.google.gms:google-services:4.3.10&#39;\r\n            classpath &#39;com.android.tools.build:gradle:4.2.0&#39;\r\n            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\r\n        }\r\n    }\r\n**Step 3**\r\n\r\nRebuild your project by following the Commands\r\n\r\n&gt; flutter clean\r\n&gt; \r\n&gt; flutter pub get\r\n&gt; \r\n&gt; flutter run\r\n\r\n","title":"Execution failed for task &#39;:ai_barcode:compileDebugKotlin&#39;. A failure occurred while executing org.jetbrains.kotlin.compilerRunner","body":"<p><strong>Step 1</strong></p>\n<p>Go to your <strong>build.gradle</strong> file in the root of your <strong>Android</strong> directory</p>\n<p><a href=\"https://i.stack.imgur.com/8Twet.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8Twet.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Step 2</strong></p>\n<p><strong><strong>Upgrade your Kotlin_version to</strong></strong></p>\n<blockquote>\n<p>ext.kotlin_version = '1.6.10</p>\n</blockquote>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.6.10'\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.10'\n        classpath 'com.android.tools.build:gradle:4.2.0'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n</code></pre>\n<p><strong>Step 3</strong></p>\n<p>Rebuild your project by following the Commands</p>\n<blockquote>\n<p>flutter clean</p>\n<p>flutter pub get</p>\n<p>flutter run</p>\n</blockquote>\n"}],"owner":{"account_id":26097323,"reputation":143,"user_id":19793281,"display_name":"Umutcan Bağdu"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1014,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1660844088,"creation_date":1660828194,"question_id":73403677,"body_markdown":"```\r\ne: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidCreatorViewFactory.kt: (15, 1): Class &#39;AndroidCreatorViewFactory&#39; is not abstract and does not implement abstract base class member public abstract fun create(p0: Context?, p1: Int, p2: Any?): PlatformView defined in io.flutter.plugin.platform.PlatformViewFactory\r\ne: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidCreatorViewFactory.kt: (17, 5): &#39;create&#39; overrides nothing\r\ne: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidScannerViewFactory.kt: (14, 1): Class &#39;AndroidScannerViewFactory&#39; is not abstract and does not implement abstract base class member public abstract fun create(p0: Context?, p1: Int, p2: Any?): PlatformView defined in io.flutter.plugin.platform.PlatformViewFactory\r\ne: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidScannerViewFactory.kt: (16, 5): &#39;create&#39; overrides nothing\r\n\r\nFAILURE: Build failed with an exception.\r\n\r\n* What went wrong:\r\nExecution failed for task &#39;:ai_barcode:compileDebugKotlin&#39;.\r\n&gt; A failure occurred while executing org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction\r\n   &gt; Compilation error. See log for more details\r\n```\r\n* Try:\r\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.\r\n\r\n* Get more help at https://help.gradle.org\r\n\r\n&#39;&#39;&#39;","title":"Execution failed for task &#39;:ai_barcode:compileDebugKotlin&#39;. A failure occurred while executing org.jetbrains.kotlin.compilerRunner","body":"<pre><code>e: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidCreatorViewFactory.kt: (15, 1): Class 'AndroidCreatorViewFactory' is not abstract and does not implement abstract base class member public abstract fun create(p0: Context?, p1: Int, p2: Any?): PlatformView defined in io.flutter.plugin.platform.PlatformViewFactory\ne: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidCreatorViewFactory.kt: (17, 5): 'create' overrides nothing\ne: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidScannerViewFactory.kt: (14, 1): Class 'AndroidScannerViewFactory' is not abstract and does not implement abstract base class member public abstract fun create(p0: Context?, p1: Int, p2: Any?): PlatformView defined in io.flutter.plugin.platform.PlatformViewFactory\ne: /Users/ddo/development/flutter/.pub-cache/hosted/pub.dartlang.org/ai_barcode-2.1.0/android/src/main/kotlin/com/air/ai_barcode/AndroidScannerViewFactory.kt: (16, 5): 'create' overrides nothing\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':ai_barcode:compileDebugKotlin'.\n&gt; A failure occurred while executing org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction\n   &gt; Compilation error. See log for more details\n</code></pre>\n<ul>\n<li><p>Try:\nRun with --stacktrace option to get the stack trace. Run with --info or --debug option to get more log output. Run with --scan to get full insights.</p>\n</li>\n<li><p>Get more help at <a href=\"https://help.gradle.org\" rel=\"nofollow noreferrer\">https://help.gradle.org</a></p>\n</li>\n</ul>\n<p>'''</p>\n"},{"tags":["java","garbage-collection","weak-references"],"comments":[{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1660845102,"post_id":73407269,"comment_id":129635677,"body_markdown":"It sounds like you are asking about caching strategies. My advise would be to find an existing open source caching software and tweak it to your needs or otherwise contribute with the project","body":"It sounds like you are asking about caching strategies. My advise would be to find an existing open source caching software and tweak it to your needs or otherwise contribute with the project"},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1660845190,"post_id":73407269,"comment_id":129635717,"body_markdown":"I’m voting to close this question because this question is about caching algorithms","body":"I’m voting to close this question because this question is about caching algorithms"},{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":0,"creation_date":1660845442,"post_id":73407269,"comment_id":129635789,"body_markdown":"The problem is similar to caching but not identical. If you can recommend a library that fits my requirements I&#39;ll be happy to consider your suggestions, but just telling me to go and look around is useless advice. Please don&#39;t try to close questions simply because you don&#39;t know the answer or don&#39;t understand the question.","body":"The problem is similar to caching but not identical. If you can recommend a library that fits my requirements I&#39;ll be happy to consider your suggestions, but just telling me to go and look around is useless advice. Please don&#39;t try to close questions simply because you don&#39;t know the answer or don&#39;t understand the question."},{"owner":{"account_id":1352170,"reputation":34246,"user_id":1291492,"accept_rate":100,"display_name":"ControlAltDel"},"score":0,"creation_date":1660845705,"post_id":73407269,"comment_id":129635874,"body_markdown":"I understand your question. It is not a bad question however in my opinion it doesn&#39;t meet the criteria for questions on SO. Others may differ","body":"I understand your question. It is not a bad question however in my opinion it doesn&#39;t meet the criteria for questions on SO. Others may differ"},{"owner":{"account_id":3211603,"reputation":289297,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1661416000,"post_id":73407269,"comment_id":129768459,"body_markdown":"Sounds like you want either, `Document` to have a `WeakHashMap&lt;Query,Index&gt;` or `Query` having a `WeakHashMap&lt;Document,Index&gt;`.","body":"Sounds like you want either, <code>Document</code> to have a <code>WeakHashMap&lt;Query,Index&gt;</code> or <code>Query</code> having a <code>WeakHashMap&lt;Document,Index&gt;</code>."}],"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":40,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":0,"score":0,"last_activity_date":1660843988,"creation_date":1660843988,"question_id":73407269,"body_markdown":"I have three objects: a Query, a Document, and an Index. A Query uses an Index to speed up access to a Document. An Index is specific to a (Query, Document) pair; a Query may have multiple indexes for different Documents, and a Document may have multiple Indexes for different Queries. A Query may outlive a Document (because it can still be used to search other Documents) and a Document may outlive a Query (because it can still be accessed by other Queries). I want the Index to stay in memory so long as both the Query and the Document are still around, and I want it to be garbage-collected when either the Query or the Document disappear. The Index can be rebuilt if necessary, but I would prefer to avoid this.\r\n\r\nCurrently I&#39;m using WeakReferences from the Query to the Index and from the Document to the Index, but the Index is being garbage collected prematurely. When this happens the index is rebuilt so the application functions correctly, but there&#39;s an overhead.\r\n\r\nAny suggestions on how to organize this? I realise I could switch to using a SoftReference to make garbage collection of the Index less likely, but I actually want to encourage garbage collection when either the Query or the Document disappears.","title":"Keeping an object in memory if two other objects hold references","body":"<p>I have three objects: a Query, a Document, and an Index. A Query uses an Index to speed up access to a Document. An Index is specific to a (Query, Document) pair; a Query may have multiple indexes for different Documents, and a Document may have multiple Indexes for different Queries. A Query may outlive a Document (because it can still be used to search other Documents) and a Document may outlive a Query (because it can still be accessed by other Queries). I want the Index to stay in memory so long as both the Query and the Document are still around, and I want it to be garbage-collected when either the Query or the Document disappear. The Index can be rebuilt if necessary, but I would prefer to avoid this.</p>\n<p>Currently I'm using WeakReferences from the Query to the Index and from the Document to the Index, but the Index is being garbage collected prematurely. When this happens the index is rebuilt so the application functions correctly, but there's an overhead.</p>\n<p>Any suggestions on how to organize this? I realise I could switch to using a SoftReference to make garbage collection of the Index less likely, but I actually want to encourage garbage collection when either the Query or the Document disappears.</p>\n"}],"has_more":true,"backoff":10,"quota_max":10000,"quota_remaining":8892,"page":1100,"page_size":100}
