{"items":[{"tags":["java","android","android-sensors"],"answers":[{"comments":[{"owner":{"account_id":21480036,"reputation":11,"user_id":15827561,"display_name":"Silver_Ser4phin"},"score":0,"creation_date":1620133423,"post_id":67377666,"comment_id":119105997,"body_markdown":"Thanks for the answer. I tried it this way but sadly it is still not working. Could there be any problem where my app doesn&#39;t have the needed authorization to use the sensor?","body":"Thanks for the answer. I tried it this way but sadly it is still not working. Could there be any problem where my app doesn&#39;t have the needed authorization to use the sensor?"},{"owner":{"account_id":6197875,"reputation":2180,"user_id":4828650,"display_name":"Dinkar Kumar"},"score":0,"creation_date":1620138895,"post_id":67377666,"comment_id":119108858,"body_markdown":"you can check if your device has sensor using `context.getPackageManager().hasSystemFeature(PackageManager.FEATURE_SENSOR_STEP_DETECTOR)`","body":"you can check if your device has sensor using <code>context.getPackageManager().hasSystemFeature(PackageManager.&zwnj;&#8203;FEATURE_SENSOR_STEP_&zwnj;&#8203;DETECTOR)</code>"},{"owner":{"account_id":21480036,"reputation":11,"user_id":15827561,"display_name":"Silver_Ser4phin"},"score":0,"creation_date":1620165710,"post_id":67377666,"comment_id":119119883,"body_markdown":"I have checked this before but I also checked using your method just to be sure and my phone does have the required sensor, the &quot;SAMSUNG Step Detector Sensor&quot; to be precise.","body":"I have checked this before but I also checked using your method just to be sure and my phone does have the required sensor, the &quot;SAMSUNG Step Detector Sensor&quot; to be precise."}],"tags":[],"owner":{"account_id":6197875,"reputation":2180,"user_id":4828650,"display_name":"Dinkar Kumar"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1620091606,"creation_date":1620091606,"answer_id":67377666,"question_id":67377284,"body_markdown":"Replace \r\n\r\n    if (event.sensor == stepSensor)\r\n\r\nwith\r\n\r\n    if (event.sensor.getType() == Sensor.TYPE_STEP_DETECTOR)","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>Replace</p>\n<pre><code>if (event.sensor == stepSensor)\n</code></pre>\n<p>with</p>\n<pre><code>if (event.sensor.getType() == Sensor.TYPE_STEP_DETECTOR)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":18627517,"reputation":1,"user_id":13576293,"display_name":"Yogesh Machhi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1636443908,"creation_date":1636443755,"answer_id":69894448,"question_id":67377284,"body_markdown":"You need to add the following to your `AndroidManifest.xml`:\r\n\r\n```xml\r\n&lt;uses-feature\r\n   android:name=&quot;android.hardware.sensor.stepcounter&quot;\r\n   android:required=&quot;true&quot;/&gt;\r\n  \r\n&lt;uses-feature\r\n  android:name=&quot;android.hardware.sensor.stepdetector&quot;\r\n  android:required=&quot;true&quot;/&gt;\r\n```\r\n\r\nIf you use Android 10 or later, you also need to add the following permission:\r\n\r\n```xml\r\n&lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot;/&gt;\r\n```\r\n\r\n","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>You need to add the following to your <code>AndroidManifest.xml</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-feature\n   android:name=&quot;android.hardware.sensor.stepcounter&quot;\n   android:required=&quot;true&quot;/&gt;\n  \n&lt;uses-feature\n  android:name=&quot;android.hardware.sensor.stepdetector&quot;\n  android:required=&quot;true&quot;/&gt;\n</code></pre>\n<p>If you use Android 10 or later, you also need to add the following permission:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot;/&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25350782,"reputation":1,"user_id":19167697,"display_name":"Jos_BCN"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691258348,"creation_date":1691258348,"answer_id":76842898,"question_id":67377284,"body_markdown":"In my case, the problem is not asking for permission..\r\nI&#39;m only putting it on the Manifest.\r\nTo get permissions...\r\n\r\n    // GET PERMISSIONS\r\n        if(ContextCompat.checkSelfPermission(this,\r\n                Manifest.permission.ACTIVITY_RECOGNITION) == PackageManager.PERMISSION_DENIED){\r\n            requestPermissions(new String[]{Manifest.permission.ACTIVITY_RECOGNITION}, 19);\r\n        }","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>In my case, the problem is not asking for permission..\nI'm only putting it on the Manifest.\nTo get permissions...</p>\n<pre><code>// GET PERMISSIONS\n    if(ContextCompat.checkSelfPermission(this,\n            Manifest.permission.ACTIVITY_RECOGNITION) == PackageManager.PERMISSION_DENIED){\n        requestPermissions(new String[]{Manifest.permission.ACTIVITY_RECOGNITION}, 19);\n    }\n</code></pre>\n"}],"owner":{"account_id":21480036,"reputation":11,"user_id":15827561,"display_name":"Silver_Ser4phin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":990,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691258348,"creation_date":1620087582,"question_id":67377284,"body_markdown":"I recently started working with android and I wanted to program my own Pedometer app that counts how many steps I have taken. Sadly somehow the onSensorChanged() method isn&#39;t called. I made sure my phone has the sensor and I also made sure that everything else is working fine (registering a listener, creating a SensorManager and a Sensor) and everything seems to be working fine. I have als added \r\n````uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; ```` in the android manifest since another post stated this is needed. Here is my code:\r\n```import androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.content.Context;\r\nimport android.hardware.Sensor;\r\nimport android.hardware.SensorEvent;\r\nimport android.hardware.SensorEventListener;\r\nimport android.hardware.SensorManager;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.Button;\r\nimport android.widget.TextView;\r\n\r\nimport java.util.List;\r\n\r\npublic class MainActivity extends AppCompatActivity implements SensorEventListener{\r\n\r\n    Button btnReset;\r\n    private SensorManager sensorManager;\r\n    private Sensor stepSensor;\r\n    private boolean isStepSensorAvailable;\r\n    private TextView txtSteps, txtCheck;\r\n    private int stepCounter;\r\n    private List&lt;Sensor&gt; deviceSensors;  //bugfixing\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_main);\r\n        initialize();\r\n\r\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\r\n        {\r\n            stepSensor = sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR);\r\n            txtCheck.setText(&quot;Sensor was found, stepsensor is now &quot; + stepSensor.getName());\r\n            isStepSensorAvailable = true;\r\n        }\r\n        else\r\n        {\r\n            txtSteps.setText(getString(R.string.txt_step_sensor_not_available));\r\n            isStepSensorAvailable = false;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    private void initialize() {\r\n        sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\r\n        txtSteps = findViewById(R.id.txtSteps);\r\n        txtCheck = findViewById(R.id.txtCheck);\r\n        stepCounter = 0;\r\n        btnReset = findViewById(R.id.btnReset);\r\n        btnReset.setVisibility(View.INVISIBLE);\r\n        txtSteps.setVisibility(View.INVISIBLE);\r\n\r\n    }\r\n\r\n    /**\r\n     * Checking for available Sensors\r\n     */\r\n\r\n    @Override\r\n    protected void onResume()\r\n    {\r\n        super.onResume();\r\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\r\n        {\r\n            sensorManager.registerListener(this, stepSensor, sensorManager.SENSOR_DELAY_FASTEST);\r\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;listener registered!&quot;);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    protected void onPause()\r\n    {\r\n        super.onPause();\r\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\r\n        {\r\n            sensorManager.unregisterListener(this, stepSensor);\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public void onSensorChanged(SensorEvent event) {\r\n        if (event.sensor == stepSensor)\r\n        {\r\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;Sensorevent was triggered!&quot;);\r\n            stepCounter = (int) (stepCounter + event.values[0]);\r\n            txtSteps.setText(String.valueOf(stepCounter));\r\n        }\r\n\r\n\r\n    }\r\n\r\n    @Override\r\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\r\n\r\n    }\r\n}\r\n```\r\n\r\nThanks in advance for all the help.","title":"OnSensorChanged() is not triggering for the Step detect sensor","body":"<p>I recently started working with android and I wanted to program my own Pedometer app that counts how many steps I have taken. Sadly somehow the onSensorChanged() method isn't called. I made sure my phone has the sensor and I also made sure that everything else is working fine (registering a listener, creating a SensorManager and a Sensor) and everything seems to be working fine. I have als added\n<code>uses-permission android:name=&quot;android.permission.ACTIVITY_RECOGNITION&quot; </code> in the android manifest since another post stated this is needed. Here is my code:</p>\n<pre><code>\nimport android.content.Context;\nimport android.hardware.Sensor;\nimport android.hardware.SensorEvent;\nimport android.hardware.SensorEventListener;\nimport android.hardware.SensorManager;\nimport android.os.Bundle;\nimport android.view.View;\nimport android.widget.Button;\nimport android.widget.TextView;\n\nimport java.util.List;\n\npublic class MainActivity extends AppCompatActivity implements SensorEventListener{\n\n    Button btnReset;\n    private SensorManager sensorManager;\n    private Sensor stepSensor;\n    private boolean isStepSensorAvailable;\n    private TextView txtSteps, txtCheck;\n    private int stepCounter;\n    private List&lt;Sensor&gt; deviceSensors;  //bugfixing\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n        initialize();\n\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\n        {\n            stepSensor = sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR);\n            txtCheck.setText(&quot;Sensor was found, stepsensor is now &quot; + stepSensor.getName());\n            isStepSensorAvailable = true;\n        }\n        else\n        {\n            txtSteps.setText(getString(R.string.txt_step_sensor_not_available));\n            isStepSensorAvailable = false;\n        }\n\n\n    }\n\n    private void initialize() {\n        sensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);\n        txtSteps = findViewById(R.id.txtSteps);\n        txtCheck = findViewById(R.id.txtCheck);\n        stepCounter = 0;\n        btnReset = findViewById(R.id.btnReset);\n        btnReset.setVisibility(View.INVISIBLE);\n        txtSteps.setVisibility(View.INVISIBLE);\n\n    }\n\n    /**\n     * Checking for available Sensors\n     */\n\n    @Override\n    protected void onResume()\n    {\n        super.onResume();\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\n        {\n            sensorManager.registerListener(this, stepSensor, sensorManager.SENSOR_DELAY_FASTEST);\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;listener registered!&quot;);\n        }\n    }\n\n    @Override\n    protected void onPause()\n    {\n        super.onPause();\n        if(sensorManager.getDefaultSensor(Sensor.TYPE_STEP_DETECTOR) != null)\n        {\n            sensorManager.unregisterListener(this, stepSensor);\n        }\n    }\n\n    @Override\n    public void onSensorChanged(SensorEvent event) {\n        if (event.sensor == stepSensor)\n        {\n            txtCheck.setText(txtCheck.getText() + System.getProperty(&quot;line.separator&quot;) + &quot;Sensorevent was triggered!&quot;);\n            stepCounter = (int) (stepCounter + event.values[0]);\n            txtSteps.setText(String.valueOf(stepCounter));\n        }\n\n\n    }\n\n    @Override\n    public void onAccuracyChanged(Sensor sensor, int accuracy) {\n\n    }\n}\n</code></pre>\n<p>Thanks in advance for all the help.</p>\n"},{"tags":["java","apache","excel","apache-poi"],"comments":[{"owner":{"account_id":6839027,"reputation":4521,"user_id":5260008,"accept_rate":100,"display_name":"N00b Pr0grammer"},"score":0,"creation_date":1631881339,"post_id":3148535,"comment_id":122349755,"body_markdown":"For my pet project, I changed it to a **Text** column in the excel sheet to circumvent this issue.","body":"For my pet project, I changed it to a <b>Text</b> column in the excel sheet to circumvent this issue."}],"answers":[{"comments":[{"owner":{"account_id":158850,"reputation":2614,"user_id":377775,"accept_rate":93,"display_name":"Venkat"},"score":0,"creation_date":1277904880,"post_id":3148572,"comment_id":3237168,"body_markdown":"I&#39;ve almost implemented many things in POI, I&#39;m so sorry that I can&#39;t go for any just for this.. There must be something.. Yet, Thank you duffymo","body":"I&#39;ve almost implemented many things in POI, I&#39;m so sorry that I can&#39;t go for any just for this.. There must be something.. Yet, Thank you duffymo"},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":1,"creation_date":1277914343,"post_id":3148572,"comment_id":3238819,"body_markdown":"DateUtils will sort you out if you can&#39;t switch to JExcel","body":"DateUtils will sort you out if you can&#39;t switch to JExcel"},{"owner":{"account_id":109541,"reputation":4321,"user_id":290182,"accept_rate":92,"display_name":"beldaz"},"score":0,"creation_date":1535600364,"post_id":3148572,"comment_id":91127917,"body_markdown":"That link is dead, though still reachable by [WayBack](https://web.archive.org/web/20180227200112/http://onjava.com/pub/a/onjava/2003/04/16/poi_excel.html). Even so, I don&#39;t see any mention of DateUtils.","body":"That link is dead, though still reachable by <a href=\"https://web.archive.org/web/20180227200112/http://onjava.com/pub/a/onjava/2003/04/16/poi_excel.html\" rel=\"nofollow noreferrer\">WayBack</a>. Even so, I don&#39;t see any mention of DateUtils."},{"owner":{"account_id":266091,"reputation":323,"user_id":553470,"display_name":"Evgeny Semionov"},"score":0,"creation_date":1543297327,"post_id":3148572,"comment_id":93856416,"body_markdown":"I suppose, HSSFDateUtil was meant by DateUtil.","body":"I suppose, HSSFDateUtil was meant by DateUtil."}],"tags":[],"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"comment_count":4,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1543312657,"creation_date":1277895839,"answer_id":3148572,"question_id":3148535,"body_markdown":"You need the DateUtils: see [this article][1] for details.\r\n\r\nOr, better yet, use Andy Khan&#39;s JExcel instead of POI.\r\n\r\n\r\n  [1]: https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/DateUtil.html","title":"How to read Excel cell having Date with Apache POI?","body":"<p>You need the DateUtils: see <a href=\"https://poi.apache.org/apidocs/dev/org/apache/poi/ss/usermodel/DateUtil.html\" rel=\"nofollow noreferrer\">this article</a> for details.</p>\n\n<p>Or, better yet, use Andy Khan's JExcel instead of POI.</p>\n"},{"comments":[{"owner":{"account_id":158850,"reputation":2614,"user_id":377775,"accept_rate":93,"display_name":"Venkat"},"score":0,"creation_date":1277904746,"post_id":3148849,"comment_id":3237149,"body_markdown":"I can&#39;t get any values... If you could specify a code snippet, that would be great...","body":"I can&#39;t get any values... If you could specify a code snippet, that would be great..."},{"owner":{"account_id":1857756,"reputation":1598,"user_id":1682984,"display_name":"Aram Paronikyan"},"score":18,"creation_date":1401535503,"post_id":3148849,"comment_id":36929692,"body_markdown":"Calling DateUtil.isCellDateFormatted() will be a step ahead in the way of freeing your code from HSSFs and XSSFs. By using global parents instead of XLS/XLSX dependant HSSF/XSSF children, you can make your code much universal.","body":"Calling DateUtil.isCellDateFormatted() will be a step ahead in the way of freeing your code from HSSFs and XSSFs. By using global parents instead of XLS/XLSX dependant HSSF/XSSF children, you can make your code much universal."},{"owner":{"account_id":2742136,"reputation":1664,"user_id":2363435,"display_name":"Daniel T. Sobrosa"},"score":0,"creation_date":1438349031,"post_id":3148849,"comment_id":51428037,"body_markdown":"Please, adjust or remove the second link. It is returning 404 error.","body":"Please, adjust or remove the second link. It is returning 404 error."},{"owner":{"account_id":2330204,"reputation":849,"user_id":2043830,"display_name":"matias.g.rodriguez"},"score":0,"creation_date":1478288710,"post_id":3148849,"comment_id":68109718,"body_markdown":"This is tricky because isCellDateFormatted should also apply to CELL_TYPE_FORMULA as long it is a Date formula. If you try to call on a text formula an IllegalStateException is thrown","body":"This is tricky because isCellDateFormatted should also apply to CELL_TYPE_FORMULA as long it is a Date formula. If you try to call on a text formula an IllegalStateException is thrown"},{"owner":{"account_id":103956,"reputation":4401,"user_id":278174,"accept_rate":85,"display_name":"powder366"},"score":0,"creation_date":1513023907,"post_id":3148849,"comment_id":82482878,"body_markdown":"I get Mon Apr 03 10:12:14 CEST 2017, you got for example with IST. How would I know the format is always the same? so I then can re-format it in Java.","body":"I get Mon Apr 03 10:12:14 CEST 2017, you got for example with IST. How would I know the format is always the same? so I then can re-format it in Java."},{"owner":{"account_id":109168,"reputation":31181,"user_id":289396,"accept_rate":89,"display_name":"JoseK"},"score":0,"creation_date":1513070274,"post_id":3148849,"comment_id":82498974,"body_markdown":"@powder366: i havent checked this recently,but as this returns a `java.util.Date` this will be in the local time zone of the user and can be formatted using standard api","body":"@powder366: i havent checked this recently,but as this returns a <code>java.util.Date</code> this will be in the local time zone of the user and can be formatted using standard api"},{"owner":{"account_id":5351617,"reputation":1633,"user_id":4265610,"accept_rate":58,"display_name":"Luke"},"score":0,"creation_date":1546610928,"post_id":3148849,"comment_id":94915945,"body_markdown":"What&#39;s the difference between DateUtil.getJavaDate(cell.getNumericCellValue()) and cell.getDateCellValue()?","body":"What&#39;s the difference between DateUtil.getJavaDate(cell.getNumericCellValue()) and cell.getDateCellValue()?"},{"owner":{"account_id":300331,"reputation":50767,"user_id":607407,"accept_rate":71,"display_name":"Tom&#225;Å¡ Zato"},"score":0,"creation_date":1549281912,"post_id":3148849,"comment_id":95834308,"body_markdown":"Is there any information on the actual meaning of that cell value?","body":"Is there any information on the actual meaning of that cell value?"},{"owner":{"account_id":6522954,"reputation":1831,"user_id":5046586,"display_name":"Aldo Canepa"},"score":1,"creation_date":1584999151,"post_id":3148849,"comment_id":107609944,"body_markdown":"HSSFDateUtil is deprecated in version 4.1.2","body":"HSSFDateUtil is deprecated in version 4.1.2"},{"owner":{"account_id":4474415,"reputation":1971,"user_id":3639856,"display_name":"Remigius Stalder"},"score":4,"creation_date":1596469188,"post_id":3148849,"comment_id":111814001,"body_markdown":"Instead of `HSSFDateUtil`, just use `DateUtil` (parent class of `HSSFDateUtil`)","body":"Instead of <code>HSSFDateUtil</code>, just use <code>DateUtil</code> (parent class of <code>HSSFDateUtil</code>)"},{"owner":{"account_id":14889041,"reputation":425,"user_id":10751343,"display_name":"S. Florin"},"score":1,"creation_date":1651063655,"post_id":3148849,"comment_id":127272719,"body_markdown":"Instead of HSSFCell.CELL_TYPE_NUMERIC use CellType.NUMERIC","body":"Instead of HSSFCell.CELL_TYPE_NUMERIC use CellType.NUMERIC"}],"tags":[],"owner":{"account_id":109168,"reputation":31181,"user_id":289396,"accept_rate":89,"display_name":"JoseK"},"comment_count":11,"down_vote_count":0,"up_vote_count":129,"is_accepted":true,"score":129,"last_activity_date":1585026714,"creation_date":1277898024,"answer_id":3148849,"question_id":3148535,"body_markdown":"\r\n**NOTE: HSSFDateUtil is deprecated**\r\n\r\nIf you know which cell i.e. column position say 0 in each row is going to be a date, you can go for \r\n`row.getCell(0).getDateCellValue()` directly.  \r\nhttp://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getDateCellValue()\r\n\r\nUPDATE: Here is an example - you can apply this in your switch case code above. I am checking and printing the Numeric as well as Date value. In this case the first column in my sheet has dates, hence I use row.getCell(0).\r\n\r\nYou can use the `if (HSSFDateUtil.isCellDateFormatted ..` code block directly in your switch case.\r\n\r\n    if (row.getCell(0).getCellType() == HSSFCell.CELL_TYPE_NUMERIC)\r\n        System.out.println (&quot;Row No.: &quot; + row.getRowNum ()+ &quot; &quot; +\r\n            row.getCell(0).getNumericCellValue());\r\n    \r\n        if (HSSFDateUtil.isCellDateFormatted(row.getCell(0))) {\r\n            System.out.println (&quot;Row No.: &quot; + row.getRowNum ()+ &quot; &quot; + \r\n                row.getCell(0).getDateCellValue());\r\n        }\r\n    }\r\n\r\n\r\nThe output is \r\n\r\n    Row No.: 0 39281.0\r\n    Row No.: 0 Wed Jul 18 00:00:00 IST 2007\r\n    Row No.: 1 39491.0\r\n    Row No.: 1 Wed Feb 13 00:00:00 IST 2008\r\n    Row No.: 2 39311.0\r\n    Row No.: 2 Fri Aug 17 00:00:00 IST 2007\r\n\r\n  [1]: http://www.dbunit.org/xref/org/dbunit/dataset/excel/XlsTable.html","title":"How to read Excel cell having Date with Apache POI?","body":"<p><strong>NOTE: HSSFDateUtil is deprecated</strong></p>\n\n<p>If you know which cell i.e. column position say 0 in each row is going to be a date, you can go for \n<code>row.getCell(0).getDateCellValue()</code> directly.<br>\n<a href=\"http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getDateCellValue()\" rel=\"noreferrer\">http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFCell.html#getDateCellValue()</a></p>\n\n<p>UPDATE: Here is an example - you can apply this in your switch case code above. I am checking and printing the Numeric as well as Date value. In this case the first column in my sheet has dates, hence I use row.getCell(0).</p>\n\n<p>You can use the <code>if (HSSFDateUtil.isCellDateFormatted ..</code> code block directly in your switch case.</p>\n\n<pre><code>if (row.getCell(0).getCellType() == HSSFCell.CELL_TYPE_NUMERIC)\n    System.out.println (\"Row No.: \" + row.getRowNum ()+ \" \" +\n        row.getCell(0).getNumericCellValue());\n\n    if (HSSFDateUtil.isCellDateFormatted(row.getCell(0))) {\n        System.out.println (\"Row No.: \" + row.getRowNum ()+ \" \" + \n            row.getCell(0).getDateCellValue());\n    }\n}\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>Row No.: 0 39281.0\nRow No.: 0 Wed Jul 18 00:00:00 IST 2007\nRow No.: 1 39491.0\nRow No.: 1 Wed Feb 13 00:00:00 IST 2008\nRow No.: 2 39311.0\nRow No.: 2 Fri Aug 17 00:00:00 IST 2007\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1032118,"reputation":2439,"user_id":1040245,"accept_rate":80,"display_name":"golimar"},"score":1,"creation_date":1606752301,"post_id":42392277,"comment_id":115049675,"body_markdown":"How to get it formatted in ISO format? (YYYY-MM-DD)","body":"How to get it formatted in ISO format? (YYYY-MM-DD)"},{"owner":{"account_id":15410136,"reputation":152,"user_id":11271104,"display_name":"MathematicsBeginner"},"score":0,"creation_date":1683314529,"post_id":42392277,"comment_id":134353623,"body_markdown":"It shows numbers always.","body":"It shows numbers always."}],"tags":[],"owner":{"account_id":4171026,"reputation":545,"user_id":3418782,"accept_rate":74,"display_name":"Chintan"},"comment_count":2,"down_vote_count":0,"up_vote_count":25,"is_accepted":false,"score":25,"last_activity_date":1487768586,"creation_date":1487768586,"answer_id":42392277,"question_id":3148535,"body_markdown":"Yes, I understood your problem.\r\nIf is difficult to identify cell has Numeric or Data value.\r\n\r\nIf you want data in format that shows in Excel, you just need to format cell using DataFormatter class.\r\n\r\n    DataFormatter dataFormatter = new DataFormatter();\r\n    String cellStringValue = dataFormatter.formatCellValue(row.getCell(0));\r\n    System.out.println (&quot;Is shows data as show in Excel file&quot; + cellStringValue);  // Here it automcatically format data based on that cell format.\r\n    // No need for extra efforts \r\n\r\n\r\n\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>Yes, I understood your problem.\nIf is difficult to identify cell has Numeric or Data value.</p>\n\n<p>If you want data in format that shows in Excel, you just need to format cell using DataFormatter class.</p>\n\n<pre><code>DataFormatter dataFormatter = new DataFormatter();\nString cellStringValue = dataFormatter.formatCellValue(row.getCell(0));\nSystem.out.println (\"Is shows data as show in Excel file\" + cellStringValue);  // Here it automcatically format data based on that cell format.\n// No need for extra efforts \n</code></pre>\n"},{"tags":[],"owner":{"account_id":10596971,"reputation":1,"user_id":7805296,"display_name":"Abhishek Mishra"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527856565,"creation_date":1527856565,"answer_id":50643590,"question_id":3148535,"body_markdown":"You can use CellDateFormatter to fetch the Date in the same format as in excel cell. See the following code:\r\n\r\n    CellValue cv = formulaEv.evaluate(cell);\r\n\tdouble dv = cv.getNumberValue();\r\n\tif (HSSFDateUtil.isCellDateFormatted(cell)) {\r\n\t    Date date = HSSFDateUtil.getJavaDate(dv);\r\n\r\n\t    String df = cell.getCellStyle().getDataFormatString();\r\n\t    \r\n\t    strValue = new CellDateFormatter(df).format(date); \r\n\t}\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>You can use CellDateFormatter to fetch the Date in the same format as in excel cell. See the following code:</p>\n\n<pre><code>CellValue cv = formulaEv.evaluate(cell);\ndouble dv = cv.getNumberValue();\nif (HSSFDateUtil.isCellDateFormatted(cell)) {\n    Date date = HSSFDateUtil.getJavaDate(dv);\n\n    String df = cell.getCellStyle().getDataFormatString();\n\n    strValue = new CellDateFormatter(df).format(date); \n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1515927,"reputation":257,"user_id":1416932,"display_name":"user1416932"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1559148824,"creation_date":1559148824,"answer_id":56365310,"question_id":3148535,"body_markdown":"If you know the cell number, then i would recommend using getDateCellValue() method\r\nHere&#39;s an example for the same that worked for me - \r\njava.util.Date date  = row.getCell(&lt;cell number&gt;).getDateCellValue();\r\nSystem.out.println(date);\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>If you know the cell number, then i would recommend using getDateCellValue() method\nHere's an example for the same that worked for me - \njava.util.Date date  = row.getCell().getDateCellValue();\nSystem.out.println(date);</p>\n"},{"tags":[],"owner":{"account_id":101108,"reputation":13957,"user_id":272180,"accept_rate":62,"display_name":"yglodt"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1563045551,"creation_date":1563045551,"answer_id":57022137,"question_id":3148535,"body_markdown":"For reading date cells this method has proven to be robust so far:\r\n\r\n\r\n\tprivate LocalDate readCellAsDate(final Row row, final int pos) {\r\n\t\tif (pos == -1) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tfinal Cell cell = row.getCell(pos - 1);\r\n\t\tif (cell != null) {\r\n\t\t\tcell.setCellType(CellType.NUMERIC);\r\n\t\t} else {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (DateUtil.isCellDateFormatted(cell)) {\r\n\t\t\ttry {\r\n\t\t\t\treturn cell.getDateCellValue().toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\r\n\t\t\t} catch (final NullPointerException e) {\r\n\t\t\t\tlogger.error(e.getMessage());\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t}","title":"How to read Excel cell having Date with Apache POI?","body":"<p>For reading date cells this method has proven to be robust so far:</p>\n\n<pre><code>private LocalDate readCellAsDate(final Row row, final int pos) {\n    if (pos == -1) {\n        return null;\n    }\n    final Cell cell = row.getCell(pos - 1);\n    if (cell != null) {\n        cell.setCellType(CellType.NUMERIC);\n    } else {\n        return null;\n    }\n    if (DateUtil.isCellDateFormatted(cell)) {\n        try {\n            return cell.getDateCellValue().toInstant().atZone(ZoneId.systemDefault()).toLocalDate();\n        } catch (final NullPointerException e) {\n            logger.error(e.getMessage());\n            return null;\n        }\n    }\n    return null;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12568477,"reputation":1871,"user_id":9143443,"display_name":"superup"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1585227406,"creation_date":1585225566,"answer_id":60867227,"question_id":3148535,"body_markdown":"Try this code.\r\n\r\n    XSSFWorkbook workbook = new XSSFWorkbook(new File(result));\r\n\t\tXSSFSheet sheet = workbook.getSheetAt(0);\r\n\r\n\t\t// Iterate through each rows one by one\r\n\t\tIterator&lt;Row&gt; rowIterator = sheet.iterator();\r\n\t\twhile (rowIterator.hasNext()) {\r\n\t\t\tRow row = rowIterator.next();\r\n\t\t\t// For each row, iterate through all the columns\r\n\t\t\tIterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n\r\n\t\t\twhile (cellIterator.hasNext()) {\r\n\t\t\t\tCell cell = cellIterator.next();\r\n\t\t\t\tswitch (cell.getCellType()) {\r\n\t\t\t\tcase Cell.CELL_TYPE_NUMERIC:\r\n\t\t\t\t\tif (cell.getNumericCellValue() != 0) {\r\n                        //Get date\r\n\t\t\t\t\t\tDate date = row.getCell(0).getDateCellValue();\r\n\r\n\r\n\r\n                        //Get datetime\r\n                        cell.getDateCellValue()\r\n\r\n\r\n\t\t\t\t\t\tSystem.out.println(date.getTime());\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\nHope is help.","title":"How to read Excel cell having Date with Apache POI?","body":"<p>Try this code.</p>\n\n<pre><code>XSSFWorkbook workbook = new XSSFWorkbook(new File(result));\n    XSSFSheet sheet = workbook.getSheetAt(0);\n\n    // Iterate through each rows one by one\n    Iterator&lt;Row&gt; rowIterator = sheet.iterator();\n    while (rowIterator.hasNext()) {\n        Row row = rowIterator.next();\n        // For each row, iterate through all the columns\n        Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n\n        while (cellIterator.hasNext()) {\n            Cell cell = cellIterator.next();\n            switch (cell.getCellType()) {\n            case Cell.CELL_TYPE_NUMERIC:\n                if (cell.getNumericCellValue() != 0) {\n                    //Get date\n                    Date date = row.getCell(0).getDateCellValue();\n\n\n\n                    //Get datetime\n                    cell.getDateCellValue()\n\n\n                    System.out.println(date.getTime());\n                }\n                break;\n            }\n        }\n    }\n</code></pre>\n\n<p>Hope is help.</p>\n"},{"comments":[{"owner":{"account_id":1033434,"reputation":2554,"user_id":1041282,"accept_rate":64,"display_name":"uzilan"},"score":0,"creation_date":1598338635,"post_id":63573176,"comment_id":112418051,"body_markdown":"Please add more context to your answer. Just writing code as an answer might not be that clear for everybody who is reading your answer.","body":"Please add more context to your answer. Just writing code as an answer might not be that clear for everybody who is reading your answer."},{"owner":{"account_id":1032118,"reputation":2439,"user_id":1040245,"accept_rate":80,"display_name":"golimar"},"score":0,"creation_date":1606754573,"post_id":63573176,"comment_id":115050741,"body_markdown":"It uses getDateCellValue as other answers here, but also uses SimpleDateFormat to format the Date value which is something that most users would want","body":"It uses getDateCellValue as other answers here, but also uses SimpleDateFormat to format the Date value which is something that most users would want"}],"tags":[],"owner":{"account_id":19367747,"reputation":131,"user_id":14161626,"display_name":"Kiruthika Velusamy"},"comment_count":2,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1598337034,"creation_date":1598337034,"answer_id":63573176,"question_id":3148535,"body_markdown":"    import java.text.DateFormat;\r\n    import java.text.SimpleDateFormat;\r\n    import java.util.Date;\r\n    import org.apache.poi.ss.usermodel.Cell;\r\n    import org.apache.poi.ss.usermodel.Row;\r\n    import org.apache.poi.ss.usermodel.CellType;\r\n    import org.apache.poi.hssf.usermodel.HSSFDateUtil;\r\n    \r\n    \r\n    Row row = sheet.getRow(0);\r\n    Cell cell = row.getCell(0);\r\n    if(cell.getCellTypeEnum() == CellType.NUMERIC||cell.getCellTypeEnum() == CellType.FORMULA)\r\n       {\r\n        \r\n    \r\n     String cellValue=String.valueOf(cell.getNumericCellValue());\r\n         if(HSSFDateUtil.isCellDateFormatted(cell))\r\n          {\r\n              DateFormat df = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\r\n              Date date = cell.getDateCellValue();\r\n              cellValue = df.format(date);\r\n           }\r\n              System.out.println(cellValue);\r\n        }","title":"How to read Excel cell having Date with Apache POI?","body":"<pre><code>import java.text.DateFormat;\nimport java.text.SimpleDateFormat;\nimport java.util.Date;\nimport org.apache.poi.ss.usermodel.Cell;\nimport org.apache.poi.ss.usermodel.Row;\nimport org.apache.poi.ss.usermodel.CellType;\nimport org.apache.poi.hssf.usermodel.HSSFDateUtil;\n\n\nRow row = sheet.getRow(0);\nCell cell = row.getCell(0);\nif(cell.getCellTypeEnum() == CellType.NUMERIC||cell.getCellTypeEnum() == CellType.FORMULA)\n   {\n    \n\n String cellValue=String.valueOf(cell.getNumericCellValue());\n     if(HSSFDateUtil.isCellDateFormatted(cell))\n      {\n          DateFormat df = new SimpleDateFormat(&quot;MM/dd/yyyy&quot;);\n          Date date = cell.getDateCellValue();\n          cellValue = df.format(date);\n       }\n          System.out.println(cellValue);\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":8525069,"reputation":41,"user_id":6390758,"display_name":"Brian Green"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1661168092,"creation_date":1661168092,"answer_id":73444434,"question_id":3148535,"body_markdown":"Apache Poi has a DateUtil.isCellDateFormatted(XSSFCell) it works great.\r\n\r\n````\r\nObject objData = switch (cell.getCellType()){\r\n   case NUMERIC -&gt;{\r\n      if(DateUtil.isCellDateFormatted(cell)){\r\n         yield cell.getDateCellValue();\r\n      }else{\r\n         yield cell.getNumericCellValue();\r\n      }\r\n  } //The rest of the cellTypes need to be implemented.\r\n}\r\n````\r\nobjData can now be tested for Date or Double.","title":"How to read Excel cell having Date with Apache POI?","body":"<p>Apache Poi has a DateUtil.isCellDateFormatted(XSSFCell) it works great.</p>\n<pre><code>Object objData = switch (cell.getCellType()){\n   case NUMERIC -&gt;{\n      if(DateUtil.isCellDateFormatted(cell)){\n         yield cell.getDateCellValue();\n      }else{\n         yield cell.getNumericCellValue();\n      }\n  } //The rest of the cellTypes need to be implemented.\n}\n</code></pre>\n<p>objData can now be tested for Date or Double.</p>\n"},{"tags":[],"owner":{"account_id":22068335,"reputation":11,"user_id":16329787,"display_name":"Martha Andrade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691257985,"creation_date":1691257985,"answer_id":76842872,"question_id":3148535,"body_markdown":"     public void readExcel() {\r\n            try {\r\n                String path = String.valueOf(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS));\r\n                File file = new File(path + &quot;/myexcelsheet.xlsx&quot;);\r\n                FileInputStream fileInputStream = new FileInputStream(file);\r\n                XSSFWorkbook wb = new XSSFWorkbook(fileInputStream);\r\n                XSSFSheet sheet = wb.getSheetAt(0);\r\n    \r\n                Iterator&lt;Row&gt; rowIter = sheet.iterator();\r\n                int rowno = 1;\r\n                if (rowno !=0){\r\n                    while (rowIter.hasNext()) {\r\n                        Row row = rowIter.next();\r\n                        Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\r\n                        textView4.append(&quot;\\n&quot;);\r\n                        for (int i = 0; i &lt; row.getRowNum(); i++) {\r\n                            while (cellIterator.hasNext()) {\r\n                                Cell cell = cellIterator.next();\r\n                                switch (cell.getCellType()) {\r\n                                    case Cell.CELL_TYPE_STRING:    //field that represents string cell type\r\n                                        textView4.append(cell.getStringCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\r\n    \r\n                                    break;\r\n                                    case Cell.CELL_TYPE_NUMERIC:    //field that represents number cell type\r\n                                        if (DateUtil.isCellDateFormatted(cell)){\r\n                                            DateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n                                            Date date = cell.getDateCellValue();\r\n                                            textView4.append(dateFormat.format(date) + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\r\n                                        }else{\r\n                                            textView4.append(cell.getNumericCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\r\n                                        }\r\n                                    break;\r\n                                }\r\n                                textView4.append(&quot;&quot;);\r\n                            }\r\n                            i++;\r\n                        }\r\n                    }\r\n                }\r\n            } catch (FileNotFoundException e) {\r\n                throw new RuntimeException(e);\r\n            } catch (IOException e) {\r\n                throw new RuntimeException(e);\r\n            }\r\n        }","title":"How to read Excel cell having Date with Apache POI?","body":"<pre><code> public void readExcel() {\n        try {\n            String path = String.valueOf(Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS));\n            File file = new File(path + &quot;/myexcelsheet.xlsx&quot;);\n            FileInputStream fileInputStream = new FileInputStream(file);\n            XSSFWorkbook wb = new XSSFWorkbook(fileInputStream);\n            XSSFSheet sheet = wb.getSheetAt(0);\n\n            Iterator&lt;Row&gt; rowIter = sheet.iterator();\n            int rowno = 1;\n            if (rowno !=0){\n                while (rowIter.hasNext()) {\n                    Row row = rowIter.next();\n                    Iterator&lt;Cell&gt; cellIterator = row.cellIterator();\n                    textView4.append(&quot;\\n&quot;);\n                    for (int i = 0; i &lt; row.getRowNum(); i++) {\n                        while (cellIterator.hasNext()) {\n                            Cell cell = cellIterator.next();\n                            switch (cell.getCellType()) {\n                                case Cell.CELL_TYPE_STRING:    //field that represents string cell type\n                                    textView4.append(cell.getStringCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\n\n                                break;\n                                case Cell.CELL_TYPE_NUMERIC:    //field that represents number cell type\n                                    if (DateUtil.isCellDateFormatted(cell)){\n                                        DateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\n                                        Date date = cell.getDateCellValue();\n                                        textView4.append(dateFormat.format(date) + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\n                                    }else{\n                                        textView4.append(cell.getNumericCellValue() + &quot;&quot; + &quot;\\t\\t&quot; + &quot;&quot;);\n                                    }\n                                break;\n                            }\n                            textView4.append(&quot;&quot;);\n                        }\n                        i++;\n                    }\n                }\n            }\n        } catch (FileNotFoundException e) {\n            throw new RuntimeException(e);\n        } catch (IOException e) {\n            throw new RuntimeException(e);\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":158850,"reputation":2614,"user_id":377775,"accept_rate":93,"display_name":"Venkat"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":204873,"favorite_count":0,"down_vote_count":0,"up_vote_count":89,"accepted_answer_id":3148849,"answer_count":10,"score":89,"last_activity_date":1691257985,"creation_date":1277895538,"question_id":3148535,"body_markdown":"I&#39;m using Apache POI 3.6, I want to read an excel file which has a date like this `8/23/1991`.\r\n\r\n\r\n     switch (cell.getCellType()) {\r\n    \r\n       ...\r\n       ...\r\n    \r\n       case HSSFCell.CELL_TYPE_NUMERIC:\r\n         value = &quot;NUMERIC value=&quot; + cell.getNumericCellValue();\r\n         break;\r\n    \r\n       ...\r\n    \r\n     }\r\n\r\nBut it takes the numeric value type and returns the value like this `33473.0`.\r\n\r\nI&#39;ve tried to use Numeric Cell Type although with no luck.\r\n\r\n     \r\n    dbltemp=row.getCell(c, Row.CREATE_NULL_AS_BLANK).getNumericCellValue();\r\n\r\n    if (c == 6 || c == 9) {\r\n        strTemp= new String(dbltemp.toString().trim());\r\n    \r\n        long tempDate = Long.parseLong(strTemp);\r\n        Date date = new Date(tempDate);\r\n    \r\n        strVal = date.toString();\r\n    }\r\n    \r\n\r\nHow can I fix my problem? \r\n\r\n","title":"How to read Excel cell having Date with Apache POI?","body":"<p>I'm using Apache POI 3.6, I want to read an excel file which has a date like this <code>8/23/1991</code>.</p>\n\n<pre><code> switch (cell.getCellType()) {\n\n   ...\n   ...\n\n   case HSSFCell.CELL_TYPE_NUMERIC:\n     value = \"NUMERIC value=\" + cell.getNumericCellValue();\n     break;\n\n   ...\n\n }\n</code></pre>\n\n<p>But it takes the numeric value type and returns the value like this <code>33473.0</code>.</p>\n\n<p>I've tried to use Numeric Cell Type although with no luck.</p>\n\n<pre><code>dbltemp=row.getCell(c, Row.CREATE_NULL_AS_BLANK).getNumericCellValue();\n\nif (c == 6 || c == 9) {\n    strTemp= new String(dbltemp.toString().trim());\n\n    long tempDate = Long.parseLong(strTemp);\n    Date date = new Date(tempDate);\n\n    strVal = date.toString();\n}\n</code></pre>\n\n<p>How can I fix my problem? </p>\n"},{"tags":["java","android","web-services","android-asynctask"],"comments":[{"owner":{"account_id":2259278,"reputation":13510,"user_id":1989739,"display_name":"Apoorv"},"score":31,"creation_date":1384339132,"post_id":19951466,"comment_id":29693965,"body_markdown":"Are you connected to the Internet?","body":"Are you connected to the Internet?"},{"owner":{"account_id":2063229,"reputation":29168,"user_id":1839336,"accept_rate":68,"display_name":"GrIsHu"},"score":0,"creation_date":1384339399,"post_id":19951466,"comment_id":29694125,"body_markdown":"Do you get the response printed in your log ?","body":"Do you get the response printed in your log ?"},{"owner":{"account_id":2432840,"reputation":1469,"user_id":2123394,"accept_rate":57,"display_name":"Reshma"},"score":0,"creation_date":1384343099,"post_id":19951466,"comment_id":29696127,"body_markdown":"Yes, I have checked for internet connection.","body":"Yes, I have checked for internet connection."},{"owner":{"display_name":"user180100"},"score":1,"creation_date":1384345142,"post_id":19951466,"comment_id":29697301,"body_markdown":"Check if the phone can access this url (in the browser for exemple)","body":"Check if the phone can access this url (in the browser for exemple)"},{"owner":{"account_id":5205691,"reputation":325,"user_id":4163717,"accept_rate":71,"display_name":"JPerk"},"score":1,"creation_date":1532089336,"post_id":19951466,"comment_id":89854694,"body_markdown":"Do not try with simulator, I have had the same issue. And I have spent 1 day trying to figure it out. Finally, my solution was to use a real android device for testing.","body":"Do not try with simulator, I have had the same issue. And I have spent 1 day trying to figure it out. Finally, my solution was to use a real android device for testing."},{"owner":{"account_id":3782808,"reputation":1148,"user_id":3141738,"display_name":"Arpit J."},"score":0,"creation_date":1633761252,"post_id":19951466,"comment_id":122850996,"body_markdown":"all these answers are bad seriously!!. For poor connectivity use-cases, UnknownHostException is thrown no matter what while being on the mobile network. Response just doesn&#39;t come and you should just timeout the request for handling such cases.","body":"all these answers are bad seriously!!. For poor connectivity use-cases, UnknownHostException is thrown no matter what while being on the mobile network. Response just doesn&#39;t come and you should just timeout the request for handling such cases."}],"answers":[{"comments":[{"owner":{"account_id":3089222,"reputation":3716,"user_id":2615737,"accept_rate":69,"display_name":"Francisco Corrales Morales"},"score":1,"creation_date":1403045690,"post_id":20277925,"comment_id":37504589,"body_markdown":"I had to turn off my phone !","body":"I had to turn off my phone !"},{"owner":{"account_id":453152,"reputation":1488,"user_id":849981,"accept_rate":64,"display_name":"X-HuMan"},"score":6,"creation_date":1501663729,"post_id":20277925,"comment_id":77872297,"body_markdown":"Is this issue still exist in Android 7? I can encounter this behavior randomly on application open. The network connection is available for the application, but it connect access to the web services. What could cause to this? Several devices in the network have the same problem.","body":"Is this issue still exist in Android 7? I can encounter this behavior randomly on application open. The network connection is available for the application, but it connect access to the web services. What could cause to this? Several devices in the network have the same problem."},{"owner":{"account_id":4838224,"reputation":3812,"user_id":3904109,"accept_rate":71,"display_name":"DragonFire"},"score":0,"creation_date":1588738468,"post_id":20277925,"comment_id":109011108,"body_markdown":"Can there be some way to give alert or toast to user because programmers may understand the problem but the user does not he won&#39;t come to stackoverflow he will just uninstall the app..","body":"Can there be some way to give alert or toast to user because programmers may understand the problem but the user does not he won&#39;t come to stackoverflow he will just uninstall the app.."},{"owner":{"account_id":5834741,"reputation":8404,"user_id":4598169,"accept_rate":80,"display_name":"Tarun Deep Attri"},"score":0,"creation_date":1599131907,"post_id":20277925,"comment_id":112682105,"body_markdown":"man what a saviour. Seems like some bug of wifi. Disconnecting worked like a charm.","body":"man what a saviour. Seems like some bug of wifi. Disconnecting worked like a charm."}],"tags":[],"owner":{"account_id":2106344,"reputation":3500,"user_id":1872596,"accept_rate":30,"display_name":"RxRead"},"comment_count":4,"down_vote_count":2,"up_vote_count":297,"is_accepted":true,"score":295,"last_activity_date":1671702663,"creation_date":1385696014,"answer_id":20277925,"question_id":19951466,"body_markdown":"I encountered this problem too, reconnecting the WiFi can solve this.\r\n\r\nFor us ,we can check if the phone can resolve the host to IP when we start application. If it cannot resolve, tell the user to check the WiFi and then exit.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I encountered this problem too, reconnecting the WiFi can solve this.</p>\n<p>For us ,we can check if the phone can resolve the host to IP when we start application. If it cannot resolve, tell the user to check the WiFi and then exit.</p>\n"},{"comments":[{"owner":{"account_id":1601221,"reputation":3223,"user_id":1482207,"accept_rate":60,"display_name":"Abhijit Chakra"},"score":0,"creation_date":1610817707,"post_id":23319855,"comment_id":116253949,"body_markdown":"This solution worked for me with Disconnecting VPN","body":"This solution worked for me with Disconnecting VPN"}],"tags":[],"owner":{"account_id":2856984,"reputation":492,"user_id":3515643,"display_name":"adubey"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1414535988,"creation_date":1398577423,"answer_id":23319855,"question_id":19951466,"body_markdown":"I got the same error and the issue was that I was on VPN and I didn&#39;t realize it. After disconnecting from the VPN and reconnecting to my WIFI network, the problem was resolved.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I got the same error and the issue was that I was on VPN and I didn't realize it. After disconnecting from the VPN and reconnecting to my WIFI network, the problem was resolved.</p>\n"},{"tags":[],"owner":{"account_id":463980,"reputation":6172,"user_id":867206,"accept_rate":14,"display_name":"Ajay Takur"},"comment_count":0,"down_vote_count":1,"up_vote_count":9,"is_accepted":false,"score":8,"last_activity_date":1439271139,"creation_date":1439271139,"answer_id":31933881,"question_id":19951466,"body_markdown":"Missed to configure tag in manifest file\r\n\r\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>Missed to configure tag in manifest file</p>\n\n<pre><code>&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" /&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":2868776,"reputation":20877,"user_id":2462531,"accept_rate":40,"display_name":"Shailendra Madda"},"score":0,"creation_date":1684142373,"post_id":35756838,"comment_id":134468110,"body_markdown":"Same here, worked after restarting the emulator","body":"Same here, worked after restarting the emulator"}],"tags":[],"owner":{"account_id":1946153,"reputation":2027,"user_id":1751266,"accept_rate":100,"display_name":"CMash"},"comment_count":1,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1456948460,"creation_date":1456948460,"answer_id":35756838,"question_id":19951466,"body_markdown":"I had the same exception in the simulator (Android Studio on OSX) but connecting to the same URL on the iOS simulator worked fine... Looks like it all stemmed from the fact I&#39;d be running the simulator whilst connected to a personal hotspot for my internet connection and then came back later while connected to wifi and the simulator didn&#39;t like the new internet connection for some reason, seems like it thought the old hotspot was the current connection, which was no longer working..\r\n\r\nClosing and relaunching the simulator worked!","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had the same exception in the simulator (Android Studio on OSX) but connecting to the same URL on the iOS simulator worked fine... Looks like it all stemmed from the fact I'd be running the simulator whilst connected to a personal hotspot for my internet connection and then came back later while connected to wifi and the simulator didn't like the new internet connection for some reason, seems like it thought the old hotspot was the current connection, which was no longer working..</p>\n\n<p>Closing and relaunching the simulator worked!</p>\n"},{"comments":[{"owner":{"account_id":236549,"reputation":2564,"user_id":504112,"accept_rate":55,"display_name":"gumuruh"},"score":0,"creation_date":1647562556,"post_id":38176547,"comment_id":126408845,"body_markdown":"omg... a wifi problem not the android problems....! i should put the code for checking whether the internet is exist or not first. Thanks @Jiyeh","body":"omg... a wifi problem not the android problems....! i should put the code for checking whether the internet is exist or not first. Thanks @Jiyeh"}],"tags":[],"owner":{"account_id":4391605,"reputation":5187,"user_id":3579786,"display_name":"Jiyeh"},"comment_count":1,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1467602842,"creation_date":1467602842,"answer_id":38176547,"question_id":19951466,"body_markdown":"If reconnecting the WiFi doesn&#39;t work for you, try reboot your device.\r\n\r\nThis works for me. Hope it helps.\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>If reconnecting the WiFi doesn't work for you, try reboot your device.</p>\n\n<p>This works for me. Hope it helps.</p>\n"},{"tags":[],"owner":{"account_id":10209573,"reputation":51,"user_id":7537168,"display_name":"A. Sullivan"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1486653880,"creation_date":1486653880,"answer_id":42140573,"question_id":19951466,"body_markdown":"I encountered this error when running my Android app on my home WiFi, then trying to run it on different WiFi without closing my simulator.\r\n\r\nSimply closing the simulator and re-launching the app worked for me!","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I encountered this error when running my Android app on my home WiFi, then trying to run it on different WiFi without closing my simulator.</p>\n\n<p>Simply closing the simulator and re-launching the app worked for me!</p>\n"},{"comments":[{"owner":{"account_id":9197483,"reputation":2049,"user_id":6835732,"display_name":"PrimoÅ¾ IvanÄiÄ"},"score":0,"creation_date":1595683757,"post_id":55155282,"comment_id":111562933,"body_markdown":"I did the same thing, only with mobile data.","body":"I did the same thing, only with mobile data."}],"tags":[],"owner":{"account_id":9084669,"reputation":21,"user_id":6763199,"display_name":"Hern&#225;n Daniel Pi&#241;a Landinez"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1552539824,"creation_date":1552539824,"answer_id":55155282,"question_id":19951466,"body_markdown":"I was testing my application with the Android emulator and I solved this by turning off and turning on the Wi-Fi on the Android emulator device! It worked perfectly.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I was testing my application with the Android emulator and I solved this by turning off and turning on the Wi-Fi on the Android emulator device! It worked perfectly.</p>\n"},{"tags":[],"owner":{"account_id":17312343,"reputation":198,"user_id":12539611,"display_name":"Ashandra Singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1577738772,"creation_date":1577738772,"answer_id":59536671,"question_id":19951466,"body_markdown":"I had the same problem.\r\njava.net.UnknownHostException: Unable to resolve host â&lt;url&gt;â...\r\n\r\nI&#39;m running Visual Studio 2019 and Xamarin.\r\n\r\nI also switched back to my WiFi but was on a hot spot.\r\n\r\nI solved this by clean swiping the emulator.  Restore to factory settings.  Then re-running visual studio xamarin app which wil redeploy your app again to the fresh emulator.\r\n\r\nIt worked.  I thought I was going to battle for days to solve this.  Luckily this post pointed me in the right direction.\r\n\r\nI could not understand how it worked perfectly before and then stopped with no code change.\r\n\r\nThis is my code for reference:\r\n\r\n    using var response = await httpClient.GetAsync(sb.ToString());\r\n    string apiResponse = await response.Content.ReadAsStringAsync();\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had the same problem.\njava.net.UnknownHostException: Unable to resolve host ââ...</p>\n\n<p>I'm running Visual Studio 2019 and Xamarin.</p>\n\n<p>I also switched back to my WiFi but was on a hot spot.</p>\n\n<p>I solved this by clean swiping the emulator.  Restore to factory settings.  Then re-running visual studio xamarin app which wil redeploy your app again to the fresh emulator.</p>\n\n<p>It worked.  I thought I was going to battle for days to solve this.  Luckily this post pointed me in the right direction.</p>\n\n<p>I could not understand how it worked perfectly before and then stopped with no code change.</p>\n\n<p>This is my code for reference:</p>\n\n<pre><code>using var response = await httpClient.GetAsync(sb.ToString());\nstring apiResponse = await response.Content.ReadAsStringAsync();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3412902,"reputation":73,"user_id":2862475,"display_name":"Gabriel Guedes"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1578257245,"creation_date":1578257245,"answer_id":59604060,"question_id":19951466,"body_markdown":"I was having the same issue, but with Glide. When I was going to disconnect from wifi and reconnect (just like it was suggested here), I noticed that I was in Airplane mode &#129318;ââï¸","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I was having the same issue, but with Glide. When I was going to disconnect from wifi and reconnect (just like it was suggested here), I noticed that I was in Airplane mode ð¤¦ââï¸</p>\n"},{"comments":[{"owner":{"account_id":2714969,"reputation":5858,"user_id":2342558,"accept_rate":67,"display_name":"user2342558"},"score":0,"creation_date":1611754594,"post_id":60825052,"comment_id":116551882,"body_markdown":"Your solution worked for me! Thanks a lot! Experienced on Samsung Galaxy M31 with Android 10.","body":"Your solution worked for me! Thanks a lot! Experienced on Samsung Galaxy M31 with Android 10."},{"owner":{"account_id":14008507,"reputation":581,"user_id":10117882,"display_name":"Phantom Lord"},"score":1,"creation_date":1629537535,"post_id":60825052,"comment_id":121716155,"body_markdown":"This is not the solution, it is very restrictive","body":"This is not the solution, it is very restrictive"}],"tags":[],"owner":{"account_id":2360323,"reputation":1,"user_id":2082723,"accept_rate":69,"display_name":"Vettiyanakan"},"comment_count":2,"down_vote_count":6,"up_vote_count":3,"is_accepted":false,"score":-3,"last_activity_date":1585024706,"creation_date":1585024706,"answer_id":60825052,"question_id":19951466,"body_markdown":"I had this issue on Android 10,\r\n\r\nChanged `targetSdkVersion 29` to `targetSdkVersion 28` issue resolved. Not sure what is the actual problem.\r\n\r\nI think not a good practice, but it worked.\r\n\r\n***before:***\r\n\r\n`compileSdkVersion 29`\r\n\r\n`minSdkVersion 14`\r\n\r\n`targetSdkVersion 29`\r\n\r\n***Now:***\r\n\r\n`compileSdkVersion 29`\r\n\r\n`minSdkVersion 14`\r\n\r\n`targetSdkVersion 28`\r\n\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had this issue on Android 10,</p>\n\n<p>Changed <code>targetSdkVersion 29</code> to <code>targetSdkVersion 28</code> issue resolved. Not sure what is the actual problem.</p>\n\n<p>I think not a good practice, but it worked.</p>\n\n<p><strong><em>before:</em></strong></p>\n\n<p><code>compileSdkVersion 29</code></p>\n\n<p><code>minSdkVersion 14</code></p>\n\n<p><code>targetSdkVersion 29</code></p>\n\n<p><strong><em>Now:</em></strong></p>\n\n<p><code>compileSdkVersion 29</code></p>\n\n<p><code>minSdkVersion 14</code></p>\n\n<p><code>targetSdkVersion 28</code></p>\n"},{"comments":[{"owner":{"account_id":15368856,"reputation":359,"user_id":11845242,"display_name":"NerdyDeeds"},"score":1,"creation_date":1676472336,"post_id":61099415,"comment_id":133143658,"body_markdown":"What is cManager?","body":"What is cManager?"}],"tags":[],"owner":{"account_id":7537149,"reputation":177,"user_id":5723052,"display_name":"Boris Veriga"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1586344694,"creation_date":1586344694,"answer_id":61099415,"question_id":19951466,"body_markdown":"I had the same problem, but with small difference. I had added NetworkConnectionCallback to check situation when internet connection had changed at runtime, and checking like this before sending all requests:\r\n\r\n    private fun isConnected(): Boolean {\r\n        val activeNetwork = cManager.activeNetworkInfo\r\n        return activeNetwork != null &amp;&amp; activeNetwork.isConnected\r\n    }\r\n\r\nThere can be state like CONNECTING (you can see iÐµ when you turn on wifi, icon starts blinking, after connecting to network, image is static).\r\nSo, we have two different states: one CONNECT another CONNECTING, and when Retrofit tried to send request internet connection is disabled and it throws UnknownHostException. \r\nI forgot to add another type of exception in function which was responsible for sending requests.\r\n\r\n    try{\r\n    //for example, retrofit call\r\n    }\r\n    catch (e: Exception) {\r\n            is UnknownHostException -&gt; &quot;Unknown host!&quot;\r\n            is ConnectException -&gt; &quot;No internet!&quot;\r\n            else -&gt; &quot;Unknown exception!&quot;\r\n        }\r\n\r\nIt&#39;s just a tricky moment that can by related with this problem.\r\n\r\nHope, I will help somebody)\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I had the same problem, but with small difference. I had added NetworkConnectionCallback to check situation when internet connection had changed at runtime, and checking like this before sending all requests:</p>\n\n<pre><code>private fun isConnected(): Boolean {\n    val activeNetwork = cManager.activeNetworkInfo\n    return activeNetwork != null &amp;&amp; activeNetwork.isConnected\n}\n</code></pre>\n\n<p>There can be state like CONNECTING (you can see iÐµ when you turn on wifi, icon starts blinking, after connecting to network, image is static).\nSo, we have two different states: one CONNECT another CONNECTING, and when Retrofit tried to send request internet connection is disabled and it throws UnknownHostException. \nI forgot to add another type of exception in function which was responsible for sending requests.</p>\n\n<pre><code>try{\n//for example, retrofit call\n}\ncatch (e: Exception) {\n        is UnknownHostException -&gt; \"Unknown host!\"\n        is ConnectException -&gt; \"No internet!\"\n        else -&gt; \"Unknown exception!\"\n    }\n</code></pre>\n\n<p>It's just a tricky moment that can by related with this problem.</p>\n\n<p>Hope, I will help somebody)</p>\n"},{"tags":[],"owner":{"account_id":12725858,"reputation":33,"user_id":9244455,"display_name":"wise4rmgod"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1634831413,"creation_date":1634831413,"answer_id":69665068,"question_id":19951466,"body_markdown":"I encountered this problem\r\nand the solution I did was to reboot my android device or emulator.\r\nit solved the issue for me.","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I encountered this problem\nand the solution I did was to reboot my android device or emulator.\nit solved the issue for me.</p>\n"},{"tags":[],"owner":{"account_id":21537633,"reputation":31,"user_id":15875916,"display_name":"Yogesh Pathania"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691257281,"creation_date":1691257281,"answer_id":76842829,"question_id":19951466,"body_markdown":"You have to add the permission on the top in the manifest section\r\n\r\n      &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\r\n        &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>You have to add the permission on the top in the manifest section</p>\n<pre><code>  &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.ACCESS_NETWORK_STATE&quot; /&gt;\n</code></pre>\n"}],"owner":{"account_id":2432840,"reputation":1469,"user_id":2123394,"accept_rate":57,"display_name":"Reshma"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":255432,"favorite_count":0,"down_vote_count":2,"up_vote_count":132,"accepted_answer_id":20277925,"answer_count":13,"score":130,"last_activity_date":1691257281,"creation_date":1384338988,"question_id":19951466,"body_markdown":"I&#39;ve created an app that loads a question from my web services, and it works fine. But, sometimes it crashes and I do not get the reason why this is happening, especially because I have also given it the required permissions. It works fine, but at random, it crashes and gives me this report.\r\n\r\n    private void sendContinentQuestions(int id) {\r\n\t\t// TODO Auto-generated method stub\r\n\r\n\t\t//Get the data (see above)\r\n\t\tJSONArray json = getJSONfromURL(id);\r\n\t\t\ttry{\r\n\t\t\t\tfor(int i=0; i &lt; json.length(); i++) {\r\n\t\t\t\t\tHashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\r\n\t\t\t\t\tJSONObject jObject = json.getJSONObject(i);\r\n\t\t\t\t\tlongitude&quot;:&quot;72.5660200&quot;\r\n\t\t\t\t\tString category_id = jObject.getString(&quot;category_id&quot;);\r\n\t\t\t\t\tString question_id = jObject.getString(&quot;question_id&quot;);\r\n\t\t\t\t\tString question_name = jObject.getString(&quot;question_name&quot;);\r\n\t\t\t\t\tString latitude = jObject.getString(&quot;latitude&quot;);\r\n\t\t\t\t\tString longitude = jObject.getString(&quot;longitude&quot;);\r\n\t\t\t\t\tString answer = jObject.getString(&quot;answer&quot;);\r\n\t\t\t\t\tString ansLatLng = latitude+&quot;|&quot;+longitude ; \r\n\t\t\t\t\tLog.v(&quot;## data:: ###&quot;,question_id+&quot;--&quot;+question_name+&quot;-cat id-&quot;+category_id+&quot;--ansLatLng &quot;+ansLatLng+&quot; answer: &quot;+answer);\r\n\r\n\t\t\t\t\tall_question.add(new QuestionData(game_id,category_id,question_id,question_name,ansLatLng,answer));\r\n\t\t\t\t}\r\n\t\t\t}catch(JSONException e)        {\r\n\t\t\t\tLog.e(&quot;log_tag&quot;, &quot;Error parsing data &quot;+e.toString());\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\r\n\t}\r\n     public JSONArray getJSONfromURL(int id){\r\n\r\n\t\tString response = &quot;&quot;;\r\n\t\tURL url;\r\n\t\ttry {\r\n\t\t\turl = new URL(Consts.GET_URL+&quot;index.php/Api/getQuestion?cat_id=&quot;+id);\r\n\t\t\tHttpURLConnection http = (HttpURLConnection) url.openConnection();\r\n\t\t\thttp.setRequestMethod(&quot;POST&quot;);\r\n\t\t\tInputStream is = http.getInputStream();\r\n\t\t\tBufferedReader br = new BufferedReader(new InputStreamReader(is));\r\n\t\t\tresponse = br.readLine();\r\n\t\t\tLog.v(&quot;###Response :: ###&quot;,response);\r\n\t\t\thttp.disconnect();\r\n\t\t} catch (MalformedURLException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}catch (ProtocolException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace(); \r\n\t\t} catch (IOException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} \r\n\t\t//try parse the string to a JSON object\r\n\t\tJSONArray jArray = null;\r\n\t\ttry{\r\n\r\n\t\t\tjArray = new JSONArray(response);\r\n\r\n\t\t}catch(JSONException e){\r\n\t\t\tLog.e(&quot;log_tag&quot;, &quot;Error parsing data &quot;+e.toString());\r\n\t\t}\r\n\r\n\t\treturn jArray;\r\n\t}\r\n\r\n-------------------------------\r\n\r\n    11-13 15:02:52.307: W/System.err(8012): java.net.UnknownHostException: Unable to resolve host &quot;www.xyz.com&quot;: No address associated with hostname\r\n    11-13 15:02:52.317: W/System.err(8012): \tat java.net.InetAddress.lookupHostByName(InetAddress.java:424)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat java.net.InetAddress.getAllByName(InetAddress.java:214)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:70)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:50)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpConnection.connect(HttpConnection.java:128)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.connect(HttpEngine.java:311)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)\r\n    11-13 15:02:52.317: W/System.err(8012): \tat libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity.getJSONfromURL(ContinentActivity.java:400)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:327)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat android.os.AsyncTask$2.call(AsyncTask.java:287)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat java.util.concurrent.FutureTask.run(FutureTask.java:234)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\r\n    11-13 15:02:52.327: W/System.err(8012): \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat java.lang.Thread.run(Thread.java:841)\r\n    11-13 15:02:52.337: W/System.err(8012): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat libcore.io.Posix.getaddrinfo(Native Method)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:61)\r\n    11-13 15:02:52.337: W/System.err(8012): \tat java.net.InetAddress.lookupHostByName(InetAddress.java:405)\r\n    11-13 15:02:52.337: W/System.err(8012): \t... 24 more\r\n    11-13 15:02:52.337: E/log_tag(8012): Error parsing data org.json.JSONException: End of input at character 0 of \r\n    11-13 15:02:52.337: W/dalvikvm(8012): threadid=194: thread exiting with uncaught exception (group=0x417c1700)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): FATAL EXCEPTION: AsyncTask #5\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): java.lang.RuntimeException: An error occured while executing doInBackground()\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat android.os.AsyncTask$3.done(AsyncTask.java:299)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.setException(FutureTask.java:219)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.run(FutureTask.java:239)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.lang.Thread.run(Thread.java:841)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): Caused by: java.lang.NullPointerException\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:328)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat android.os.AsyncTask$2.call(AsyncTask.java:287)\r\n    11-13 15:02:52.337: E/AndroidRuntime(8012): \tat java.util.concurrent.FutureTask.run(FutureTask.java:234)\r\n    \r\n        \r\n\r\n","title":"java.net.UnknownHostException: Unable to resolve host &quot;&lt;url&gt;&quot;: No address associated with hostname and End of input at character 0 of","body":"<p>I've created an app that loads a question from my web services, and it works fine. But, sometimes it crashes and I do not get the reason why this is happening, especially because I have also given it the required permissions. It works fine, but at random, it crashes and gives me this report.</p>\n\n<pre><code>private void sendContinentQuestions(int id) {\n    // TODO Auto-generated method stub\n\n    //Get the data (see above)\n    JSONArray json = getJSONfromURL(id);\n        try{\n            for(int i=0; i &lt; json.length(); i++) {\n                HashMap&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();\n                JSONObject jObject = json.getJSONObject(i);\n                longitude\":\"72.5660200\"\n                String category_id = jObject.getString(\"category_id\");\n                String question_id = jObject.getString(\"question_id\");\n                String question_name = jObject.getString(\"question_name\");\n                String latitude = jObject.getString(\"latitude\");\n                String longitude = jObject.getString(\"longitude\");\n                String answer = jObject.getString(\"answer\");\n                String ansLatLng = latitude+\"|\"+longitude ; \n                Log.v(\"## data:: ###\",question_id+\"--\"+question_name+\"-cat id-\"+category_id+\"--ansLatLng \"+ansLatLng+\" answer: \"+answer);\n\n                all_question.add(new QuestionData(game_id,category_id,question_id,question_name,ansLatLng,answer));\n            }\n        }catch(JSONException e)        {\n            Log.e(\"log_tag\", \"Error parsing data \"+e.toString());\n        }\n    }\n\n\n}\n public JSONArray getJSONfromURL(int id){\n\n    String response = \"\";\n    URL url;\n    try {\n        url = new URL(Consts.GET_URL+\"index.php/Api/getQuestion?cat_id=\"+id);\n        HttpURLConnection http = (HttpURLConnection) url.openConnection();\n        http.setRequestMethod(\"POST\");\n        InputStream is = http.getInputStream();\n        BufferedReader br = new BufferedReader(new InputStreamReader(is));\n        response = br.readLine();\n        Log.v(\"###Response :: ###\",response);\n        http.disconnect();\n    } catch (MalformedURLException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }catch (ProtocolException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace(); \n    } catch (IOException e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    } \n    //try parse the string to a JSON object\n    JSONArray jArray = null;\n    try{\n\n        jArray = new JSONArray(response);\n\n    }catch(JSONException e){\n        Log.e(\"log_tag\", \"Error parsing data \"+e.toString());\n    }\n\n    return jArray;\n}\n</code></pre>\n\n<hr>\n\n<pre><code>11-13 15:02:52.307: W/System.err(8012): java.net.UnknownHostException: Unable to resolve host \"www.xyz.com\": No address associated with hostname\n11-13 15:02:52.317: W/System.err(8012):     at java.net.InetAddress.lookupHostByName(InetAddress.java:424)\n11-13 15:02:52.317: W/System.err(8012):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)\n11-13 15:02:52.317: W/System.err(8012):     at java.net.InetAddress.getAllByName(InetAddress.java:214)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:70)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection.&lt;init&gt;(HttpConnection.java:50)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:340)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:316)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:311)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:290)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:240)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:282)\n11-13 15:02:52.317: W/System.err(8012):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:177)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity.getJSONfromURL(ContinentActivity.java:400)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:327)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\n11-13 15:02:52.327: W/System.err(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\n11-13 15:02:52.327: W/System.err(8012):     at android.os.AsyncTask$2.call(AsyncTask.java:287)\n11-13 15:02:52.327: W/System.err(8012):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)\n11-13 15:02:52.327: W/System.err(8012):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n11-13 15:02:52.327: W/System.err(8012):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\n11-13 15:02:52.337: W/System.err(8012):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\n11-13 15:02:52.337: W/System.err(8012):     at java.lang.Thread.run(Thread.java:841)\n11-13 15:02:52.337: W/System.err(8012): Caused by: libcore.io.GaiException: getaddrinfo failed: EAI_NODATA (No address associated with hostname)\n11-13 15:02:52.337: W/System.err(8012):     at libcore.io.Posix.getaddrinfo(Native Method)\n11-13 15:02:52.337: W/System.err(8012):     at libcore.io.ForwardingOs.getaddrinfo(ForwardingOs.java:61)\n11-13 15:02:52.337: W/System.err(8012):     at java.net.InetAddress.lookupHostByName(InetAddress.java:405)\n11-13 15:02:52.337: W/System.err(8012):     ... 24 more\n11-13 15:02:52.337: E/log_tag(8012): Error parsing data org.json.JSONException: End of input at character 0 of \n11-13 15:02:52.337: W/dalvikvm(8012): threadid=194: thread exiting with uncaught exception (group=0x417c1700)\n11-13 15:02:52.337: E/AndroidRuntime(8012): FATAL EXCEPTION: AsyncTask #5\n11-13 15:02:52.337: E/AndroidRuntime(8012): java.lang.RuntimeException: An error occured while executing doInBackground()\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at android.os.AsyncTask$3.done(AsyncTask.java:299)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.setException(FutureTask.java:219)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.run(FutureTask.java:239)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.lang.Thread.run(Thread.java:841)\n11-13 15:02:52.337: E/AndroidRuntime(8012): Caused by: java.lang.NullPointerException\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity.sendContinentQuestions(ContinentActivity.java:328)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity.access$2(ContinentActivity.java:323)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:254)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at com.abc.xyz.ContinentActivity$LoadQuestions.doInBackground(ContinentActivity.java:1)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at android.os.AsyncTask$2.call(AsyncTask.java:287)\n11-13 15:02:52.337: E/AndroidRuntime(8012):     at java.util.concurrent.FutureTask.run(FutureTask.java:234)\n</code></pre>\n"},{"tags":["java","spring-webflux","reactive-programming","project-reactor"],"answers":[{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1691256233,"creation_date":1691256233,"answer_id":76842768,"question_id":76842708,"body_markdown":"Let&#39;s try to see when to use each:\r\n\r\n### For computationally expensive tasks\r\n\r\nIf your `computeStuff` fun is just computationally expensive and doesn&#39;t involve any I/O, you could use either `map` or `flatMap` based on how you manage threads. If you&#39;re okay with the operation running on the same thread (typically, the event loop), `map` is fine too. If you want to offload it to another thread, you&#39;ll need to wrap it in a `Mono.fromSupplier` and use `flatMap` instead, as the SOF answer suggested.\r\n\r\n### For I/O-bound or blocking tasks\r\nIf `computeStuff` does I/O or any blocking operation, you *definitely* should not use `map`. Instead, you may need to offload this to another thread. `flatMap` becomes useful here because you&#39;re typically returning a `Mono` or `Flux` which represents the result of an async operation.\r\n\r\n----------\r\n\r\nIn your example:\r\n\r\n```java\r\nfluxOfSomething.flatMap(value -&gt;\r\n    Mono.fromSupplier(\r\n        () -&gt; computeStuff(value)\r\n    ).subscribeOn(Schedulers.boundedElastic()) \r\n)\r\n```\r\nYou&#39;re using `flatMap` cause you&#39;re returning a `Mono` from the function. The combination of `Mono.fromSupplier` and `.subscribeOn(Schedulers.boundedElastic())` (I added this) ensures that the `computeStuff` fun runs in another thread, not blocking the main reactive thread, which is generally recommended.\r\n\r\n----------\r\n\r\n### To notice a difference:\r\n\r\n- Blocking Scenario: If `computeStuff` is a blocking operation and you use `map`, you&#39;ll quickly see issues when you put your service under load. The main reactive thread will get blocked, leading to a significant degradation in performance;\r\n- Async Scenario: If you use `flatMap` and offload the work to another thread, under the same load, you should see better performance since the main reactive thread isn&#39;t blocked;\r\n- Simple Transformations: Simple transformations that don&#39;t block or aren&#39;t computationally intensive, there would be a negligible performance difference between using `map` &amp; `flatMap`\r\n\r\n\r\n----------\r\n\r\nLet&#39;s try to write some dummy test now.\r\n\r\n- Prerequisites:\r\nLet&#39;s imagine that you&#39;ve already set up the two endpoints (/map and /flatMap) and some `blockingOperation` (computeStuff) method\r\n\r\nWe may write something like:\r\n```java\r\n@Test\r\npublic void testMapVsFlatMap() {\r\n    long startMap = System.currentTimeMillis();\r\n    webTestClient.get().uri(&quot;/map&quot;)\r\n            .exchange()\r\n            .expectStatus().isOk()\r\n            .expectBodyList(String.class);\r\n    long endMap = System.currentTimeMillis();\r\n\r\n    long startFlatMap = System.currentTimeMillis();\r\n    webTestClient.get().uri(&quot;/flatMap&quot;)\r\n            .exchange()\r\n            .expectStatus().isOk()\r\n            .expectBodyList(String.class);\r\n    long endFlatMap = System.currentTimeMillis();\r\n\r\n    // flatMap is indeed faster than map for our simulated blocking OP\r\n    assertTrue((endFlatMap - startFlatMap) &lt; (endMap - startMap));\r\n}\r\n```\r\n","title":"map vs. flatMap with Mono.fromSupplier for long-running operations","body":"<p>Let's try to see when to use each:</p>\n<h3>For computationally expensive tasks</h3>\n<p>If your <code>computeStuff</code> fun is just computationally expensive and doesn't involve any I/O, you could use either <code>map</code> or <code>flatMap</code> based on how you manage threads. If you're okay with the operation running on the same thread (typically, the event loop), <code>map</code> is fine too. If you want to offload it to another thread, you'll need to wrap it in a <code>Mono.fromSupplier</code> and use <code>flatMap</code> instead, as the SOF answer suggested.</p>\n<h3>For I/O-bound or blocking tasks</h3>\n<p>If <code>computeStuff</code> does I/O or any blocking operation, you <em>definitely</em> should not use <code>map</code>. Instead, you may need to offload this to another thread. <code>flatMap</code> becomes useful here because you're typically returning a <code>Mono</code> or <code>Flux</code> which represents the result of an async operation.</p>\n<hr />\n<p>In your example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>fluxOfSomething.flatMap(value -&gt;\n    Mono.fromSupplier(\n        () -&gt; computeStuff(value)\n    ).subscribeOn(Schedulers.boundedElastic()) \n)\n</code></pre>\n<p>You're using <code>flatMap</code> cause you're returning a <code>Mono</code> from the function. The combination of <code>Mono.fromSupplier</code> and <code>.subscribeOn(Schedulers.boundedElastic())</code> (I added this) ensures that the <code>computeStuff</code> fun runs in another thread, not blocking the main reactive thread, which is generally recommended.</p>\n<hr />\n<h3>To notice a difference:</h3>\n<ul>\n<li>Blocking Scenario: If <code>computeStuff</code> is a blocking operation and you use <code>map</code>, you'll quickly see issues when you put your service under load. The main reactive thread will get blocked, leading to a significant degradation in performance;</li>\n<li>Async Scenario: If you use <code>flatMap</code> and offload the work to another thread, under the same load, you should see better performance since the main reactive thread isn't blocked;</li>\n<li>Simple Transformations: Simple transformations that don't block or aren't computationally intensive, there would be a negligible performance difference between using <code>map</code> &amp; <code>flatMap</code></li>\n</ul>\n<hr />\n<p>Let's try to write some dummy test now.</p>\n<ul>\n<li>Prerequisites:\nLet's imagine that you've already set up the two endpoints (/map and /flatMap) and some <code>blockingOperation</code> (computeStuff) method</li>\n</ul>\n<p>We may write something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testMapVsFlatMap() {\n    long startMap = System.currentTimeMillis();\n    webTestClient.get().uri(&quot;/map&quot;)\n            .exchange()\n            .expectStatus().isOk()\n            .expectBodyList(String.class);\n    long endMap = System.currentTimeMillis();\n\n    long startFlatMap = System.currentTimeMillis();\n    webTestClient.get().uri(&quot;/flatMap&quot;)\n            .exchange()\n            .expectStatus().isOk()\n            .expectBodyList(String.class);\n    long endFlatMap = System.currentTimeMillis();\n\n    // flatMap is indeed faster than map for our simulated blocking OP\n    assertTrue((endFlatMap - startFlatMap) &lt; (endMap - startMap));\n}\n</code></pre>\n"}],"owner":{"account_id":914392,"reputation":5655,"user_id":947526,"accept_rate":46,"display_name":"C-Otto"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":107,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691325380,"accepted_answer_id":76842768,"answer_count":1,"score":0,"last_activity_date":1691256233,"creation_date":1691255196,"question_id":76842708,"body_markdown":"I&#39;m using Project Reactor as part of a project using Spring WebFlux and learned that `Flux.map` should only be used for &quot;simple&quot; operations. From https://stackoverflow.com/a/49169314/947526:\r\n\r\n&gt; - `map` is for synchronous, non-blocking, 1-to-1 transformations\r\n&gt;\r\n&gt; - `flatMap` is for asynchronous (non-blocking) 1-to-N transformations\r\n\r\nIn my understanding, something like `fluxOfStrings.map(String::toUpperCase)` is fine, but `flux.map(this::computeStuff)` is not (assuming `computeStuff` takes a considerable amount of time).\r\n\r\nHowever, I fail to understand how (and if) I can use `flatMap` to improve my code. Based on the example above, I could write\r\n\r\n```\r\nfluxOfSomething.flatMap(value -&gt;\r\n    Mono.fromSupplier(\r\n        () -&gt; computeStuff(value)\r\n    )\r\n)\r\n```\r\n\r\nIs this better, in any sense? If so, how can I see the improvement using a simple test? If not, what can I do to trigger `computeStuff` instead?\r\n\r\n","title":"map vs. flatMap with Mono.fromSupplier for long-running operations","body":"<p>I'm using Project Reactor as part of a project using Spring WebFlux and learned that <code>Flux.map</code> should only be used for &quot;simple&quot; operations. From <a href=\"https://stackoverflow.com/a/49169314/947526\">https://stackoverflow.com/a/49169314/947526</a>:</p>\n<blockquote>\n<ul>\n<li><p><code>map</code> is for synchronous, non-blocking, 1-to-1 transformations</p>\n</li>\n<li><p><code>flatMap</code> is for asynchronous (non-blocking) 1-to-N transformations</p>\n</li>\n</ul>\n</blockquote>\n<p>In my understanding, something like <code>fluxOfStrings.map(String::toUpperCase)</code> is fine, but <code>flux.map(this::computeStuff)</code> is not (assuming <code>computeStuff</code> takes a considerable amount of time).</p>\n<p>However, I fail to understand how (and if) I can use <code>flatMap</code> to improve my code. Based on the example above, I could write</p>\n<pre><code>fluxOfSomething.flatMap(value -&gt;\n    Mono.fromSupplier(\n        () -&gt; computeStuff(value)\n    )\n)\n</code></pre>\n<p>Is this better, in any sense? If so, how can I see the improvement using a simple test? If not, what can I do to trigger <code>computeStuff</code> instead?</p>\n"},{"tags":["java","templates","expression","string-interpolation"],"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1263958345,"post_id":2098839,"comment_id":2032429,"body_markdown":"To add my own question: Can the JSP EL (which would be a fit here) be called from Java code?","body":"To add my own question: Can the JSP EL (which would be a fit here) be called from Java code?"},{"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"score":0,"creation_date":1263958508,"post_id":2098839,"comment_id":2032434,"body_markdown":"I came across with Apache Common JEXL and Commons EL.But not sure how I can solve this","body":"I came across with Apache Common JEXL and Commons EL.But not sure how I can solve this"},{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1263959037,"post_id":2098839,"comment_id":2032456,"body_markdown":"also see http://stackoverflow.com/questions/1133660/open-source-expression-engines-java","body":"also see <a href=\"http://stackoverflow.com/questions/1133660/open-source-expression-engines-java\" title=\"open source expression engines java\">stackoverflow.com/questions/1133660/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"score":0,"creation_date":1263959594,"post_id":2098909,"comment_id":2032478,"body_markdown":"MessageFormat does not do expressions, though. I suppose you could combine MessageFormat with an expression language, like JUEL.","body":"MessageFormat does not do expressions, though. I suppose you could combine MessageFormat with an expression language, like JUEL."},{"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"score":0,"creation_date":1263959629,"post_id":2098909,"comment_id":2032480,"body_markdown":"i need more dynamic solution,because above &#39;Gene&#39; bean is just an example.I use many Bean classes and need something like BeanUtils to process the field values.","body":"i need more dynamic solution,because above &#39;Gene&#39; bean is just an example.I use many Bean classes and need something like BeanUtils to process the field values."}],"tags":[],"owner":{"account_id":3519,"reputation":25773,"user_id":5077,"accept_rate":71,"display_name":"Chris Dail"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1263959313,"creation_date":1263959313,"answer_id":2098909,"question_id":2098839,"body_markdown":"It sounds like all you need is the core Java library class [MessageFormat][1]. It is pretty easy to use and allows you to do replacement of templates in a string.\r\n\r\n    String outputString = MessageFormat.format(&quot;&lt;a&gt; href=&#39;http://www.ncbi.nlm.nih.gov/pubmed?term={0}&#39; /&gt;&quot;, &quot;gene19191X&quot;);\r\n\r\nYou can also create an instance of MessageFormat and reuse that with different values.\r\n\r\nOther options you could also try are:\r\n\r\n * [Apache Commons EL][2] - This is built for expressions in web applications.\r\n * [Groovy GStrings][3] - I use this sometimes to evaluate a &#39;script&#39;. This has the advantage of allowing more complex logic.\r\n\r\n\r\n  [1]: http://java.sun.com/j2se/1.5.0/docs/api/java/text/MessageFormat.html\r\n  [2]: http://commons.apache.org/el/\r\n  [3]: http://groovy.codehaus.org/Strings+and+GString\r\n","title":"Java Expression Language : Interpolation?","body":"<p>It sounds like all you need is the core Java library class <a href=\"http://java.sun.com/j2se/1.5.0/docs/api/java/text/MessageFormat.html\" rel=\"nofollow noreferrer\">MessageFormat</a>. It is pretty easy to use and allows you to do replacement of templates in a string.</p>\n\n<pre><code>String outputString = MessageFormat.format(\"&lt;a&gt; href='http://www.ncbi.nlm.nih.gov/pubmed?term={0}' /&gt;\", \"gene19191X\");\n</code></pre>\n\n<p>You can also create an instance of MessageFormat and reuse that with different values.</p>\n\n<p>Other options you could also try are:</p>\n\n<ul>\n<li><a href=\"http://commons.apache.org/el/\" rel=\"nofollow noreferrer\">Apache Commons EL</a> - This is built for expressions in web applications.</li>\n<li><a href=\"http://groovy.codehaus.org/Strings+and+GString\" rel=\"nofollow noreferrer\">Groovy GStrings</a> - I use this sometimes to evaluate a 'script'. This has the advantage of allowing more complex logic.</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":8326,"reputation":258555,"user_id":14955,"accept_rate":55,"display_name":"Thilo"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1263960204,"creation_date":1263960204,"answer_id":2098954,"question_id":2098839,"body_markdown":"Maybe [MVEL][1] would work for you. \r\n\r\nWith a template like\r\n\r\n\r\n     Hello, @{person.getSex() == &#39;F&#39; ? &#39;Ms.&#39; : &#39;Mr.&#39;} @{person.name}\r\n\r\nyou can do\r\n\r\n     context.put(&quot;person&quot;, personBean);\r\n     String output = (String) TemplateRuntime.eval(template, context);\r\n\r\n\r\n\r\nCheck out [this tutorial][2] (where I read about this, I have no experience with MVEL).\r\n\r\n\r\n  [1]: http://mvel.codehaus.org/\r\n  [2]: http://johannburkard.de/blog/programming/java/mvel-templating-introduction.html","title":"Java Expression Language : Interpolation?","body":"<p>Maybe <a href=\"http://mvel.codehaus.org/\" rel=\"nofollow noreferrer\">MVEL</a> would work for you. </p>\n\n<p>With a template like</p>\n\n<pre><code> Hello, @{person.getSex() == 'F' ? 'Ms.' : 'Mr.'} @{person.name}\n</code></pre>\n\n<p>you can do</p>\n\n<pre><code> context.put(\"person\", personBean);\n String output = (String) TemplateRuntime.eval(template, context);\n</code></pre>\n\n<p>Check out <a href=\"http://johannburkard.de/blog/programming/java/mvel-templating-introduction.html\" rel=\"nofollow noreferrer\">this tutorial</a> (where I read about this, I have no experience with MVEL).</p>\n"},{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691255714,"creation_date":1691255714,"answer_id":76842741,"question_id":2098839,"body_markdown":"You can use Java&#39;s String Templates feature.\r\nIt is described in [JEP 430](https://openjdk.org/jeps/430), and it appears in JDK 21 as a preview feature.  Here is an example use:\r\n\r\n```java\r\nString outputString = STR.&quot;&lt;a href=&#39;http://www.ncbi.nlm.nih.gov/pubmed?term=\\{someframeworkobject.geneid}&#39; /&gt;&quot;;\r\n```\r\n","title":"Java Expression Language : Interpolation?","body":"<p>You can use Java's String Templates feature.\nIt is described in <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">JEP 430</a>, and it appears in JDK 21 as a preview feature.  Here is an example use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String outputString = STR.&quot;&lt;a href='http://www.ncbi.nlm.nih.gov/pubmed?term=\\{someframeworkobject.geneid}' /&gt;&quot;;\n</code></pre>\n"}],"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2219,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":2098954,"answer_count":3,"score":2,"last_activity_date":1691255714,"creation_date":1263957625,"question_id":2098839,"body_markdown":"Greetings,\r\n\r\nIn the webapplication I am developing , I want to do something like follows:\r\n\r\nI Have a Bean like\r\n\r\n    class Gene{\r\n    String geneid;\r\n    String sequence;\r\n    ..\r\n    }\r\n\r\n    // EL expression (sometimes should be simple as &quot;${geneid}&quot; without URL pattern)\r\n    String exp=&quot;&lt;a&gt; href=&#39;http://www.ncbi.nlm.nih.gov/pubmed?term=${geneid}&#39; /&gt;&quot;;\r\n    String outputString=someframeworkobject.somemethod(exp,aGeneInstance);\r\n\r\nSo the outputString is interpolated like : `http://www.ncbi.nlm.nih.gov/pubmed?term=gene19191X`\r\n\r\nIs there any lightweight EL frameworks that I can use for this?\r\n","title":"Java Expression Language : Interpolation?","body":"<p>Greetings,</p>\n\n<p>In the webapplication I am developing , I want to do something like follows:</p>\n\n<p>I Have a Bean like</p>\n\n<pre><code>class Gene{\nString geneid;\nString sequence;\n..\n}\n\n// EL expression (sometimes should be simple as \"${geneid}\" without URL pattern)\nString exp=\"&lt;a&gt; href='http://www.ncbi.nlm.nih.gov/pubmed?term=${geneid}' /&gt;\";\nString outputString=someframeworkobject.somemethod(exp,aGeneInstance);\n</code></pre>\n\n<p>So the outputString is interpolated like : <code>http://www.ncbi.nlm.nih.gov/pubmed?term=gene19191X</code></p>\n\n<p>Is there any lightweight EL frameworks that I can use for this?</p>\n"},{"tags":["java","string","string-interpolation","java-15"],"comments":[{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":3,"creation_date":1598265376,"post_id":63559237,"comment_id":112392089,"body_markdown":"Looks like Java doesn&#39;t have time for such frivolous features. Some languages had it from day 1, others have even enhanced it in recent releases. But looks like Java always knows better than day to day developer productivity :)","body":"Looks like Java doesn&#39;t have time for such frivolous features. Some languages had it from day 1, others have even enhanced it in recent releases. But looks like Java always knows better than day to day developer productivity :)"},{"owner":{"account_id":6780825,"reputation":155680,"user_id":5221149,"display_name":"Andreas"},"score":0,"creation_date":1598265658,"post_id":63559237,"comment_id":112392198,"body_markdown":"Why do you believe Java is adding String Interpolation support? --- Are you perhaps confusing Interpolation with the **Text Block** support being added (preview in Java 13 and 14, final in Java 15)? Note that [JEP 378: Text Blocks](https://openjdk.java.net/jeps/378) specifically says: *&quot;Text blocks do not directly support string interpolation. Interpolation may be considered in a future JEP. In the meantime, the new instance method `String::formatted` aids in situations where interpolation might be desired.&quot;*","body":"Why do you believe Java is adding String Interpolation support? --- Are you perhaps confusing Interpolation with the <b>Text Block</b> support being added (preview in Java 13 and 14, final in Java 15)? Note that <a href=\"https://openjdk.java.net/jeps/378\" rel=\"nofollow noreferrer\">JEP 378: Text Blocks</a> specifically says: <i>&quot;Text blocks do not directly support string interpolation. Interpolation may be considered in a future JEP. In the meantime, the new instance method <code>String::formatted</code> aids in situations where interpolation might be desired.&quot;</i>"},{"owner":{"account_id":10108456,"reputation":3914,"user_id":7470253,"display_name":"M. Prokhorov"},"score":2,"creation_date":1598266053,"post_id":63559237,"comment_id":112392365,"body_markdown":"@ernest_k, it&#39;s not as clear of a cut to add language features to 20+ year old language that&#39;s widely in use. Such &quot;simple&quot; feature as text blocks caused a lot of debates (look up that JEP&#39;s history) - added inline interpolation will cause a storm. Because everyone has their favorite pet &quot;developer productivity&quot; feature from some recent language, and everyone&#39;s favorite feature also isn&#39;t compatible with everyone else&#39;s favorite feature.","body":"@ernest_k, it&#39;s not as clear of a cut to add language features to 20+ year old language that&#39;s widely in use. Such &quot;simple&quot; feature as text blocks caused a lot of debates (look up that JEP&#39;s history) - added inline interpolation will cause a storm. Because everyone has their favorite pet &quot;developer productivity&quot; feature from some recent language, and everyone&#39;s favorite feature also isn&#39;t compatible with everyone else&#39;s favorite feature."},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":0,"creation_date":1598266604,"post_id":63559237,"comment_id":112392589,"body_markdown":"@M.Prokhorov Absolutely, and I&#39;m sure Java&#39;s design principles are sound (like... you should prefer features that add real value and that you&#39;re going to be willing to support in a future, backward compatible version, as I saw somewhere). One fact, though: when developer productivity is up for evaluation, I guess, usually those other guiding principles win (Python is older than Java and widely adopted, but it gets such changes - that&#39;s maybe because they put a limit to backward compatibility, etc.). Not trying to be presumptuous, that&#39;s just some superficial thinking/speculation.","body":"@M.Prokhorov Absolutely, and I&#39;m sure Java&#39;s design principles are sound (like... you should prefer features that add real value and that you&#39;re going to be willing to support in a future, backward compatible version, as I saw somewhere). One fact, though: when developer productivity is up for evaluation, I guess, usually those other guiding principles win (Python is older than Java and widely adopted, but it gets such changes - that&#39;s maybe because they put a limit to backward compatibility, etc.). Not trying to be presumptuous, that&#39;s just some superficial thinking/speculation."},{"owner":{"account_id":4555218,"reputation":32585,"user_id":3699139,"display_name":"Jorn Vernee"},"score":0,"creation_date":1598279878,"post_id":63559237,"comment_id":112399435,"body_markdown":"@ernest_k Developer productivity is important even in Java, a good example of this is the recently added pattern matching for `instanceof` feature (avoid those redundant looking casts). It might seem like something like this is such a small thing to add, but it takes months/years to work out all the details, maybe to eventually decide that a feature should not be added after all. String interpolation in particular is just not at the top of the TODO list currently.","body":"@ernest_k Developer productivity is important even in Java, a good example of this is the recently added pattern matching for <code>instanceof</code> feature (avoid those redundant looking casts). It might seem like something like this is such a small thing to add, but it takes months/years to work out all the details, maybe to eventually decide that a feature should not be added after all. String interpolation in particular is just not at the top of the TODO list currently."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":4,"creation_date":1598346097,"post_id":63559237,"comment_id":112421573,"body_markdown":"@ernest_k Iâm wondering, how much productivity you really gain, by writing `$&quot;Your name is {name} and your age {age}&quot;` instead of `&quot;Your name is &quot;+name+&quot; and your age &quot;+age`","body":"@ernest_k Iâm wondering, how much productivity you really gain, by writing <code>$&quot;Your name is {name} and your age {age}&quot;</code> instead of <code>&quot;Your name is &quot;+name+&quot; and your age &quot;+age</code>"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1598347600,"post_id":63559237,"comment_id":112422234,"body_markdown":"@Holger valid question, but I&#39;m afraid it&#39;s too specific for a comment intended to be general. And, of course, I haven&#39;t measured it (assuming I can). My comment is not that original, everyone knows that Java doesn&#39;t prioritize &quot;improvements&quot; that make it easier to code in the language (boilerplate is perhaps too characteristic of Java, and is one of the things that make it dreadful for many - and I&#39;m not one of those). And to your question, `$&quot;...&quot;` is definitely more readable &amp; less bug-prone than `&quot;..&quot; + &quot;..&quot;`, let alone `String.format(&quot;..&quot;, name, age)`. +Interpolation is jut one of many","body":"@Holger valid question, but I&#39;m afraid it&#39;s too specific for a comment intended to be general. And, of course, I haven&#39;t measured it (assuming I can). My comment is not that original, everyone knows that Java doesn&#39;t prioritize &quot;improvements&quot; that make it easier to code in the language (boilerplate is perhaps too characteristic of Java, and is one of the things that make it dreadful for many - and I&#39;m not one of those). And to your question, <code>$&quot;...&quot;</code> is definitely more readable &amp; less bug-prone than <code>&quot;..&quot; + &quot;..&quot;</code>, let alone <code>String.format(&quot;..&quot;, name, age)</code>. +Interpolation is jut one of many"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1598349126,"post_id":63559237,"comment_id":112422943,"body_markdown":"@ernest_k âless bug-proneâ heavily depends on how the hypothetical feature handles dangling `{` or `}` characters (or what I need to do when I *want* to insert literal `{` or `}` characters) or identifiers that do not match variables or whether the compiler or the runtime is supposed to resolve those identifiers. For `&quot;constant&quot;+variable+&quot;â¦&quot;`, itâs clear that I get response at compile time (or immediately while typing when using an IDE). Canât agree that Java doesn&#39;t prioritize productivity, I mean, name the last Java version that didnât introduce language improvements in that regardâ¦","body":"@ernest_k âless bug-proneâ heavily depends on how the hypothetical feature handles dangling <code>{</code> or <code>}</code> characters (or what I need to do when I <i>want</i> to insert literal <code>{</code> or <code>}</code> characters) or identifiers that do not match variables or whether the compiler or the runtime is supposed to resolve those identifiers. For <code>&quot;constant&quot;+variable+&quot;â¦&quot;</code>, itâs clear that I get response at compile time (or immediately while typing when using an IDE). Canât agree that Java doesn&#39;t prioritize productivity, I mean, name the last Java version that didnât introduce language improvements in that regardâ¦"},{"owner":{"account_id":7595189,"reputation":44576,"user_id":5761558,"display_name":"ernest_k"},"score":1,"creation_date":1598350940,"post_id":63559237,"comment_id":112423806,"body_markdown":"@Holger I don&#39;t want to stretch this too much; you make a good point about concatenation with `+`. It was more about `String.format` vs native string interpolation (you know what I mean). And I don&#39;t want my remarks to be construed as radical; Java is getting positive changes and I know that designers are good at picking the right features... Yet that doesn&#39;t change the fact that devs would have a *very* long wish-list of nice-to-haves. And I don&#39;t think it&#39;s merely because of low priority, but because of conflict (current and future backward compatibility, etc.)","body":"@Holger I don&#39;t want to stretch this too much; you make a good point about concatenation with <code>+</code>. It was more about <code>String.format</code> vs native string interpolation (you know what I mean). And I don&#39;t want my remarks to be construed as radical; Java is getting positive changes and I know that designers are good at picking the right features... Yet that doesn&#39;t change the fact that devs would have a <i>very</i> long wish-list of nice-to-haves. And I don&#39;t think it&#39;s merely because of low priority, but because of conflict (current and future backward compatibility, etc.)"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1603890123,"post_id":63559237,"comment_id":114178315,"body_markdown":"@birgersp unless you come up with a surprising reason why `&quot;Age: $age.&quot;` is so much better than the proposed `&quot;Age: {age}.&quot;`, [my opinion](https://stackoverflow.com/questions/63559237/?noredirect=1#comment112421573_63559237) does not change.","body":"@birgersp unless you come up with a surprising reason why <code>&quot;Age: $age.&quot;</code> is so much better than the proposed <code>&quot;Age: {age}.&quot;</code>, <a href=\"https://stackoverflow.com/questions/63559237/?noredirect=1#comment112421573_63559237\">my opinion</a> does not change."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1603890776,"post_id":63559237,"comment_id":114178629,"body_markdown":"@birgersp there is no point. Except you can name a *reason* why it should be better.","body":"@birgersp there is no point. Except you can name a <i>reason</i> why it should be better."},{"owner":{"account_id":3048712,"reputation":4198,"user_id":2583765,"accept_rate":75,"display_name":"birgersp"},"score":0,"creation_date":1603891069,"post_id":63559237,"comment_id":114178824,"body_markdown":"@Holger Sorry I mixed some examples here. Let me correct myself; `$&quot;Age: {age}.&quot;` is more productive than `&quot;Age: &quot; + age + &quot;.&quot;`. Even with just 1 variable it is shorter and sweeter. Now imagine strings where you add 8, 10, 15(!) variables into it. Java would benefit from implementing string interpolation like C# (and other langauges) has.","body":"@Holger Sorry I mixed some examples here. Let me correct myself; <code>$&quot;Age: {age}.&quot;</code> is more productive than <code>&quot;Age: &quot; + age + &quot;.&quot;</code>. Even with just 1 variable it is shorter and sweeter. Now imagine strings where you add 8, 10, 15(!) variables into it. Java would benefit from implementing string interpolation like C# (and other langauges) has."},{"owner":{"account_id":3048712,"reputation":4198,"user_id":2583765,"accept_rate":75,"display_name":"birgersp"},"score":10,"creation_date":1603891201,"post_id":63559237,"comment_id":114178899,"body_markdown":"As to the &quot;reasoning&quot; why it is productive I won&#39;t bother explain it to you. It is like asking why is it &quot;better&quot; to write 3x5 when you can just write 3+3+3+3+3?","body":"As to the &quot;reasoning&quot; why it is productive I won&#39;t bother explain it to you. It is like asking why is it &quot;better&quot; to write 3x5 when you can just write 3+3+3+3+3?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1603891891,"post_id":63559237,"comment_id":114179305,"body_markdown":"@birgersp seriously? You want to argue that saving just *one* character in source code, plus some ignorable white-space that you apparently inserted to make the difference look more dramatic, deserves a new language feature? In the example of the previous comment, `$&quot;Your name is {name} and your age {age}&quot;` vs `&quot;Your name is &quot;+name+&quot; and your age &quot;+age`, there is no difference at all. That feature will never compensate the productivity you already lost while writing such comments.","body":"@birgersp seriously? You want to argue that saving just <i>one</i> character in source code, plus some ignorable white-space that you apparently inserted to make the difference look more dramatic, deserves a new language feature? In the example of the previous comment, <code>$&quot;Your name is {name} and your age {age}&quot;</code> vs <code>&quot;Your name is &quot;+name+&quot; and your age &quot;+age</code>, there is no difference at all. That feature will never compensate the productivity you already lost while writing such comments."},{"owner":{"account_id":3048712,"reputation":4198,"user_id":2583765,"accept_rate":75,"display_name":"birgersp"},"score":2,"creation_date":1603892633,"post_id":63559237,"comment_id":114179771,"body_markdown":"Nearly all formatters add space before and after operators. So `:&quot;+text+&quot;.` would be formatted to `:&quot; + text + &quot;.`. So there are your extra characters. String interpolation like C# has should be added to Java because it has the same result, with less code without hurting readability. In fact people would argue that it is even more readable but that would perhaps be too subjective. Again, your example has 1 variable. But what about strings with e.g. 5 variables? Do you still not see how it would be more productive?","body":"Nearly all formatters add space before and after operators. So <code>:&quot;+text+&quot;.</code> would be formatted to <code>:&quot; + text + &quot;.</code>. So there are your extra characters. String interpolation like C# has should be added to Java because it has the same result, with less code without hurting readability. In fact people would argue that it is even more readable but that would perhaps be too subjective. Again, your example has 1 variable. But what about strings with e.g. 5 variables? Do you still not see how it would be more productive?"},{"owner":{"account_id":15237469,"reputation":42,"user_id":10994710,"display_name":"Nicola"},"score":0,"creation_date":1621345627,"post_id":63559237,"comment_id":119463911,"body_markdown":"+ chaining method is a crappy method for a crappy code","body":"+ chaining method is a crappy method for a crappy code"},{"owner":{"account_id":1136523,"reputation":11039,"user_id":1121497,"accept_rate":42,"display_name":"Ferran Maylinch"},"score":1,"creation_date":1623915888,"post_id":63559237,"comment_id":120214560,"body_markdown":"I was looking for an answer on why Java hasn&#39;t yet added string interpolation. Is there any technical difficulty? Or they just don&#39;t agree on using curly braces vs dollar signs? I guess that they could go the JavaScript way and add [template literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals). It is already proven, developers know it very well, and it&#39;s a non-breaking change because the back-quote character `\\`` is not currently used in the language.","body":"I was looking for an answer on why Java hasn&#39;t yet added string interpolation. Is there any technical difficulty? Or they just don&#39;t agree on using curly braces vs dollar signs? I guess that they could go the JavaScript way and add <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals\" rel=\"nofollow noreferrer\">template literals</a>. It is already proven, developers know it very well, and it&#39;s a non-breaking change because the back-quote character <code>`</code> is not currently used in the language."},{"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"score":0,"creation_date":1671378891,"post_id":63559237,"comment_id":132082316,"body_markdown":"Related; https://stackoverflow.com/q/3655424/8583692","body":"Related; <a href=\"https://stackoverflow.com/q/3655424/8583692\">stackoverflow.com/q/3655424/8583692</a>"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683014988,"post_id":63559237,"comment_id":134298145,"body_markdown":"@birgersp you didnât `@` me, so I didnât notice your response. My answer today would be the same as back then, *regarding the savings*, even considering additional white-space and more variables. In fact, it looks weird to me, to configure formatters to insert additional white-space for readability, followed by arguing that the alternative, denser syntax is more readable. However, seeing what theyâll do with JEP 430, I changed my mind. String interpolation is indeed a useful thing, but not because you might save typing. Solving the operator precedence issue, allow sanitizing arguments, etcâ¦","body":"@birgersp you didnât <code>@</code> me, so I didnât notice your response. My answer today would be the same as back then, <i>regarding the savings</i>, even considering additional white-space and more variables. In fact, it looks weird to me, to configure formatters to insert additional white-space for readability, followed by arguing that the alternative, denser syntax is more readable. However, seeing what theyâll do with JEP 430, I changed my mind. String interpolation is indeed a useful thing, but not because you might save typing. Solving the operator precedence issue, allow sanitizing arguments, etcâ¦"}],"answers":[{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":5,"creation_date":1598346853,"post_id":63559286,"comment_id":112421912,"body_markdown":"Third option: write `&quot;Your name is &quot;+name+&quot; and your age &quot;+age`. Wouldnât work for a dynamic string, but capturing all variables in scope, just because they might be referenced in the format string, is not the way of a compiled language.","body":"Third option: write <code>&quot;Your name is &quot;+name+&quot; and your age &quot;+age</code>. Wouldnât work for a dynamic string, but capturing all variables in scope, just because they might be referenced in the format string, is not the way of a compiled language."}],"tags":[],"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1598265075,"creation_date":1598265075,"answer_id":63559286,"question_id":63559237,"body_markdown":"To my knowledge, there are no updates in the standard java libraries regarding such kind of string formatting.\r\n\r\nIn other words: you are still &quot;stuck&quot; with either using `String.format()` and its index based substitution mechanism, or you have to pick some 3rd party library/framework, such as Velocity, FreeMarker, ... see [here][1] for an initial overview.\r\n\r\n\r\n  [1]: https://dzone.com/articles/template-engines-at-one-spring-boot-and-engines-se","title":"String interpolation in Java 14 or 15","body":"<p>To my knowledge, there are no updates in the standard java libraries regarding such kind of string formatting.</p>\n<p>In other words: you are still &quot;stuck&quot; with either using <code>String.format()</code> and its index based substitution mechanism, or you have to pick some 3rd party library/framework, such as Velocity, FreeMarker, ... see <a href=\"https://dzone.com/articles/template-engines-at-one-spring-boot-and-engines-se\" rel=\"noreferrer\">here</a> for an initial overview.</p>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":12,"creation_date":1598344502,"post_id":63569216,"comment_id":112420757,"body_markdown":"It seems to be widely overlooked, how expensive `java.util.Formatter` is. Otherwise, methods like `Optional.toString()` were not implemented as `String.format(&quot;Optional[%s]&quot;, value)` where a simple `&quot;Optional[&quot; + value + &quot;]&quot;` would do. In a fresh environment, this unnecessary use of `format` triggers the loading of 165 formerly unused classes, giving a hint of the involved components. Using a framework for locale sensitive data formatting into arbitrary I/O sinks, just for something that boils down to ordinary string concatenation, is like flying with the Falcon X to the supermarket.","body":"It seems to be widely overlooked, how expensive <code>java.util.Formatter</code> is. Otherwise, methods like <code>Optional.toString()</code> were not implemented as <code>String.format(&quot;Optional[%s]&quot;, value)</code> where a simple <code>&quot;Optional[&quot; + value + &quot;]&quot;</code> would do. In a fresh environment, this unnecessary use of <code>format</code> triggers the loading of 165 formerly unused classes, giving a hint of the involved components. Using a framework for locale sensitive data formatting into arbitrary I/O sinks, just for something that boils down to ordinary string concatenation, is like flying with the Falcon X to the supermarket."},{"owner":{"account_id":18467057,"reputation":52,"user_id":13452926,"display_name":"Mammad Yahyayev"},"score":0,"creation_date":1680265744,"post_id":63569216,"comment_id":133873256,"body_markdown":"Is it possible to bring this feature in upcoming Java versions?","body":"Is it possible to bring this feature in upcoming Java versions?"}],"tags":[],"owner":{"account_id":1416522,"reputation":91364,"user_id":3553087,"display_name":"Brian Goetz"},"comment_count":2,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1598306173,"creation_date":1598306173,"answer_id":63569216,"question_id":63559237,"body_markdown":"There is something _slightly_ closer; an instance version of `String::format`, called `formatted`:\r\n\r\n    String message = &quot;Hi, %s&quot;.formatted(name);\r\n\r\nIt is similar to `String::format`, but is more friendly to use in chained expressions.  \r\n\r\n","title":"String interpolation in Java 14 or 15","body":"<p>There is something <em>slightly</em> closer; an instance version of <code>String::format</code>, called <code>formatted</code>:</p>\n<pre><code>String message = &quot;Hi, %s&quot;.formatted(name);\n</code></pre>\n<p>It is similar to <code>String::format</code>, but is more friendly to use in chained expressions.</p>\n"},{"comments":[{"owner":{"account_id":107260,"reputation":218,"user_id":285306,"accept_rate":0,"display_name":"stan"},"score":0,"creation_date":1628693931,"post_id":67154934,"comment_id":121490908,"body_markdown":"There are two imports missing\n\nimport java.util.HashMap;\n\nimport java.util.Map;\n\nalso this import might be useful\nimport org.apache.commons.lang3.StringUtils;","body":"There are two imports missing  import java.util.HashMap;  import java.util.Map;  also this import might be useful import org.apache.commons.lang3.StringUtils;"}],"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1689791429,"creation_date":1618795607,"answer_id":67154934,"question_id":63559237,"body_markdown":"There is no built-in support for that currently, but [Apache Commons Text](https://commons.apache.org/proper/commons-text/)&#39;s [`StringSubstitutor`](https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html) can be used.\r\n\r\n```\r\nimport org.apache.commons.text.StringSubstitutor;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\n// ...\r\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\nvalues.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\r\nvalues.put(&quot;target&quot;, &quot;lazy dog&quot;);\r\nStringSubstitutor sub = new StringSubstitutor(values);\r\nString result = sub.replace(&quot;The ${animal} jumped over the ${target}.&quot;);\r\n// &quot;The quick brown fox jumped over the lazy dog.&quot;\r\n```\r\n\r\nThis class supports providing default values for variables.\r\n\r\n```\r\nString result = sub.replace(&quot;The number is ${undefined.property:-42}.&quot;);\r\n// &quot;The number is 42.&quot;\r\n```\r\n\r\nTo use recursive variable replacement, call `setEnableSubstitutionInVariables(true);`.\r\n\r\n```\r\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\nvalues.put(&quot;b&quot;, &quot;c&quot;);\r\nvalues.put(&quot;ac&quot;, &quot;Test&quot;);\r\nStringSubstitutor sub = new StringSubstitutor(values);\r\nsub.setEnableSubstitutionInVariables(true);\r\nString result = sub.replace(&quot;${a${b}}&quot;);\r\n// &quot;Test&quot;\r\n```","title":"String interpolation in Java 14 or 15","body":"<p>There is no built-in support for that currently, but <a href=\"https://commons.apache.org/proper/commons-text/\" rel=\"nofollow noreferrer\">Apache Commons Text</a>'s <a href=\"https://commons.apache.org/proper/commons-text/javadocs/api-release/org/apache/commons/text/StringSubstitutor.html\" rel=\"nofollow noreferrer\"><code>StringSubstitutor</code></a> can be used.</p>\n<pre><code>import org.apache.commons.text.StringSubstitutor;\nimport java.util.HashMap;\nimport java.util.Map;\n// ...\nMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\nvalues.put(&quot;animal&quot;, &quot;quick brown fox&quot;);\nvalues.put(&quot;target&quot;, &quot;lazy dog&quot;);\nStringSubstitutor sub = new StringSubstitutor(values);\nString result = sub.replace(&quot;The ${animal} jumped over the ${target}.&quot;);\n// &quot;The quick brown fox jumped over the lazy dog.&quot;\n</code></pre>\n<p>This class supports providing default values for variables.</p>\n<pre><code>String result = sub.replace(&quot;The number is ${undefined.property:-42}.&quot;);\n// &quot;The number is 42.&quot;\n</code></pre>\n<p>To use recursive variable replacement, call <code>setEnableSubstitutionInVariables(true);</code>.</p>\n<pre><code>Map&lt;String, String&gt; values = new HashMap&lt;&gt;();\nvalues.put(&quot;b&quot;, &quot;c&quot;);\nvalues.put(&quot;ac&quot;, &quot;Test&quot;);\nStringSubstitutor sub = new StringSubstitutor(values);\nsub.setEnableSubstitutionInVariables(true);\nString result = sub.replace(&quot;${a${b}}&quot;);\n// &quot;Test&quot;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10941198,"reputation":4394,"user_id":8041003,"display_name":"John Williams"},"score":1,"creation_date":1679474492,"post_id":68744589,"comment_id":133726769,"body_markdown":"Java logging frameworks have this sort of stuff built in.","body":"Java logging frameworks have this sort of stuff built in."}],"tags":[],"owner":{"account_id":107260,"reputation":218,"user_id":285306,"accept_rate":0,"display_name":"stan"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1679560337,"creation_date":1628694528,"answer_id":68744589,"question_id":63559237,"body_markdown":"Looks like nice C#-style interpolation is not available in these Java versions. Why we need this - to have nice and readable lines of code dumping text to Log files.\r\n\r\nBelow is sample code that works (there is commented org.apache.commons.lang3.StringUtils which at some point of writing was required but later it was not) - it was dropping ClassNotFound or other NotFoundException - I have not investigated it.\r\n\r\nThe StringSubstitutor might be later packed in something nicer that will make it easier to use for Log message dumping  \r\n\r\n\r\n    package main;\r\n    \r\n    import java.util.HashMap;\r\n    import java.util.Map;\r\n    \r\n    import org.apache.commons.text.*;\r\n    //import org.apache.commons.lang3.StringUtils;\r\n    \r\n    public class Main {\r\n    \r\n    \tpublic static void main(String[] args) {\r\n    \t\tSystem.out.println(&quot;Starting program&quot;);\r\n    \t\t\r\n    \t\tvar result =  adding(1.35,2.99);\r\n    \r\n    \t\tMap&lt;String, String&gt; values = new HashMap&lt;&gt;();\r\n    \t\tvalues.put(&quot;logMessageString&quot;, Double.toString(result) );\r\n    \r\n    \t\tStringSubstitutor sub = new StringSubstitutor(values);\r\n    \t\tsub.setEnableSubstitutionInVariables(true);\r\n    \t\tString logMessage = sub.replace(&quot;LOG result of adding: ${logMessageString}&quot;);\r\n    \r\n    \t\tSystem.out.println(logMessage);\r\n    \t\tSystem.out.println(&quot;Ending program&quot;);\r\n    \t\t \r\n    \t}\r\n    \t// it can do many other things but here it is just for prcoessing two variables \r\n    \tprivate static double adding(double a, double b) {\r\n    \t\treturn a+b;\r\n    \t}\r\n    \r\n    }\r\n\r\n","title":"String interpolation in Java 14 or 15","body":"<p>Looks like nice C#-style interpolation is not available in these Java versions. Why we need this - to have nice and readable lines of code dumping text to Log files.</p>\n<p>Below is sample code that works (there is commented org.apache.commons.lang3.StringUtils which at some point of writing was required but later it was not) - it was dropping ClassNotFound or other NotFoundException - I have not investigated it.</p>\n<p>The StringSubstitutor might be later packed in something nicer that will make it easier to use for Log message dumping</p>\n<pre><code>package main;\n\nimport java.util.HashMap;\nimport java.util.Map;\n\nimport org.apache.commons.text.*;\n//import org.apache.commons.lang3.StringUtils;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        System.out.println(&quot;Starting program&quot;);\n        \n        var result =  adding(1.35,2.99);\n\n        Map&lt;String, String&gt; values = new HashMap&lt;&gt;();\n        values.put(&quot;logMessageString&quot;, Double.toString(result) );\n\n        StringSubstitutor sub = new StringSubstitutor(values);\n        sub.setEnableSubstitutionInVariables(true);\n        String logMessage = sub.replace(&quot;LOG result of adding: ${logMessageString}&quot;);\n\n        System.out.println(logMessage);\n        System.out.println(&quot;Ending program&quot;);\n         \n    }\n    // it can do many other things but here it is just for prcoessing two variables \n    private static double adding(double a, double b) {\n        return a+b;\n    }\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4846874,"reputation":119,"user_id":3910282,"display_name":"roma2341"},"score":0,"creation_date":1643385989,"post_id":70895212,"comment_id":125333708,"body_markdown":"@user16320675, really, really, i got to know about MessageFormat today, and it mentioned in terms of java 15 so i decided it appeared in java 15","body":"@user16320675, really, really, i got to know about MessageFormat today, and it mentioned in terms of java 15 so i decided it appeared in java 15"},{"owner":{"account_id":4846874,"reputation":119,"user_id":3910282,"display_name":"roma2341"},"score":0,"creation_date":1643547217,"post_id":70895212,"comment_id":125364208,"body_markdown":"@user16320675 i have read this one - https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/text/MessageFormat.html\nIts titled in google as  - MessageFormat (Java SE 15 &amp; JDK 15), so i decided that it&#39;s not available in earlier versions","body":"@user16320675 i have read this one - <a href=\"https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/text/MessageFormat.html\" rel=\"nofollow noreferrer\">docs.oracle.com/en/java/javase/15/docs/api/java.base/java/te&zwnj;&#8203;xt/&hellip;</a> Its titled in google as  - MessageFormat (Java SE 15 &amp; JDK 15), so i decided that it&#39;s not available in earlier versions"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683015342,"post_id":70895212,"comment_id":134298215,"body_markdown":"Well, all pages of the JDK&#160;15 API documentation have the âJDK&#160;15 APIâ title but you only need to scroll through the very page youâve linked to find [**Since: 1.1**](https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/text/MessageFormat.html#:~:text=Since%3A,1.1) So itâs neither JDK&#160;15 nor Java 5.0 that introduced this class but Java&#160;1.1 or, in other words, this feature exists almost since day one.","body":"Well, all pages of the JDK 15 API documentation have the âJDK 15 APIâ title but you only need to scroll through the very page youâve linked to find <a href=\"https://docs.oracle.com/en/java/javase/15/docs/api/java.base/java/text/MessageFormat.html#:~:text=Since%3A,1.1\" rel=\"nofollow noreferrer\"><b>Since: 1.1</b></a> So itâs neither JDK 15 nor Java 5.0 that introduced this class but Java 1.1 or, in other words, this feature exists almost since day one."}],"tags":[],"owner":{"account_id":4846874,"reputation":119,"user_id":3910282,"display_name":"roma2341"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1643807934,"creation_date":1643379476,"answer_id":70895212,"question_id":63559237,"body_markdown":"You can also use MessageFormat like this (Java 5.0 or later)\r\n\r\n    MessageFormat.format(&quot;Hello {0}, how are you. Goodbye {0}&quot;,userName);\r\n\r\nVery nice","title":"String interpolation in Java 14 or 15","body":"<p>You can also use MessageFormat like this (Java 5.0 or later)</p>\n<pre><code>MessageFormat.format(&quot;Hello {0}, how are you. Goodbye {0}&quot;,userName);\n</code></pre>\n<p>Very nice</p>\n"},{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691255490,"creation_date":1691255490,"answer_id":76842729,"question_id":63559237,"body_markdown":"You can use Java&#39;s String Templates feature.\r\nIt is described in [JEP 430](https://openjdk.org/jeps/430), and it appears in JDK 21 as a preview feature.  Here is an example use:\r\n\r\n```java\r\nstring name = &quot;Horace&quot;;\r\nint age = 34;\r\nSystem.out.println(STR.&quot;Your name is {name} and your age {age}&quot;);\r\n```\r\n","title":"String interpolation in Java 14 or 15","body":"<p>You can use Java's String Templates feature.\nIt is described in <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">JEP 430</a>, and it appears in JDK 21 as a preview feature.  Here is an example use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>string name = &quot;Horace&quot;;\nint age = 34;\nSystem.out.println(STR.&quot;Your name is {name} and your age {age}&quot;);\n</code></pre>\n"}],"owner":{"account_id":1189122,"reputation":15753,"user_id":1162409,"accept_rate":40,"display_name":"San Jaisy"},"comment_count":19,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23934,"favorite_count":0,"down_vote_count":0,"up_vote_count":28,"accepted_answer_id":63569216,"answer_count":6,"score":28,"last_activity_date":1691255490,"creation_date":1598264862,"question_id":63559237,"body_markdown":"Since I am using Java 14 and 15 preview features. Trying to find the string interpolation in java.\r\n\r\n\r\nThe closest answer I found is \r\n\r\n`String.format(&quot;u1=%s;u2=%s;u3=%s;u4=%s;&quot;, u1, u2, u3, u4)`\r\n\r\nSince the answer which I got from lots fo references are old answers asked 4,5 years ago. Is there any update on the string interpolation in java 11,12,13,14,15 equivalent to C# \r\n\r\n    string name = &quot;Horace&quot;;\r\n    int age = 34;\r\n    Console.WriteLine($&quot;Your name is {name} and your age {age}&quot;);\r\n\r\n**EDIT: [JEP 430](https://openjdk.org/jeps/430), which covers this and much more, has been proposed to target JDK 21.**","title":"String interpolation in Java 14 or 15","body":"<p>Since I am using Java 14 and 15 preview features. Trying to find the string interpolation in java.</p>\n<p>The closest answer I found is</p>\n<p><code>String.format(&quot;u1=%s;u2=%s;u3=%s;u4=%s;&quot;, u1, u2, u3, u4)</code></p>\n<p>Since the answer which I got from lots fo references are old answers asked 4,5 years ago. Is there any update on the string interpolation in java 11,12,13,14,15 equivalent to C#</p>\n<pre><code>string name = &quot;Horace&quot;;\nint age = 34;\nConsole.WriteLine($&quot;Your name is {name} and your age {age}&quot;);\n</code></pre>\n<p><strong>EDIT: <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">JEP 430</a>, which covers this and much more, has been proposed to target JDK 21.</strong></p>\n"},{"tags":["java","multithreading","executorservice"],"answers":[{"comments":[{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1372581864,"post_id":17386970,"comment_id":25243737,"body_markdown":"+1 and Thank you for offering a constructive suggestion.  I am using Java 6 because I do not want to force users to download the newer versions of Java.  ForkJoinPool only runs on Java 7 and the upcoming Java 8, unless I force users to download the add on package JSR-166.  Are you able to make suggestions regarding my ExecutorService code?  I would really appreciate a fresh set of eyes looking at it, as it was causing me trouble today.","body":"+1 and Thank you for offering a constructive suggestion.  I am using Java 6 because I do not want to force users to download the newer versions of Java.  ForkJoinPool only runs on Java 7 and the upcoming Java 8, unless I force users to download the add on package JSR-166.  Are you able to make suggestions regarding my ExecutorService code?  I would really appreciate a fresh set of eyes looking at it, as it was causing me trouble today."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1372585160,"post_id":17386970,"comment_id":25244393,"body_markdown":"I have isolated the location of the cause of the null pointer error, and have highlighted the offending block of code in an edit to my original posting above.  Do you know how I can get it to stop creating a null pointer error?  I think the problem is that threadpool is not running within the i=0 through 4 loop, even though the offending segment of code does seem to be within the correct {} pair.","body":"I have isolated the location of the cause of the null pointer error, and have highlighted the offending block of code in an edit to my original posting above.  Do you know how I can get it to stop creating a null pointer error?  I think the problem is that threadpool is not running within the i=0 through 4 loop, even though the offending segment of code does seem to be within the correct {} pair."},{"owner":{"account_id":978760,"reputation":1422,"user_id":999043,"accept_rate":83,"display_name":"Ralf H"},"score":0,"creation_date":1372632677,"post_id":17386970,"comment_id":25256621,"body_markdown":"actually, Oracle is forcing those downloads since they discontinued Java 6, but there may be other reasons to be stuck at old APIs.","body":"actually, Oracle is forcing those downloads since they discontinued Java 6, but there may be other reasons to be stuck at old APIs."}],"tags":[],"owner":{"account_id":2052678,"reputation":134073,"user_id":1831293,"accept_rate":91,"display_name":"Evgeniy Dorofeev"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1372564411,"creation_date":1372564411,"answer_id":17386970,"question_id":17386768,"body_markdown":"I think ForkJoinPool is better for this task. It&#39;s designed for efficient parallel processing, see http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html. ","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>I think ForkJoinPool is better for this task. It's designed for efficient parallel processing, see <a href=\"http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html\" rel=\"nofollow\">http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html</a>. </p>\n"},{"comments":[{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1372712146,"post_id":17395638,"comment_id":25288341,"body_markdown":"+1 for trying to help.  Thank you.  I took your advice and posted the revised code in a second edit to my posting above.  The code is still throwing the null pointer exception.  I posted the stack trace above as well.  The reason I am using static variables is that eclipse forces me to do so because main() is static.  I tried to get around this by putting the code in a separate method called from main(), but eclipse still demands everything be static. Help on that would be appreciated.  I call a new Random() every time to simulate a resource intensive algorithm for testing purposes.","body":"+1 for trying to help.  Thank you.  I took your advice and posted the revised code in a second edit to my posting above.  The code is still throwing the null pointer exception.  I posted the stack trace above as well.  The reason I am using static variables is that eclipse forces me to do so because main() is static.  I tried to get around this by putting the code in a separate method called from main(), but eclipse still demands everything be static. Help on that would be appreciated.  I call a new Random() every time to simulate a resource intensive algorithm for testing purposes."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1372712667,"post_id":17395638,"comment_id":25288603,"body_markdown":"I think the problem is that the threads with the new data have not yet returned when System.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length); tries to collapse them into a 1D array.","body":"I think the problem is that the threads with the new data have not yet returned when System.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length); tries to collapse them into a 1D array."},{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1372714786,"post_id":17395638,"comment_id":25289578,"body_markdown":"I think the problem is that the code needs a Future object to make sure that the ExecutorService has returned all its data slices before the various slices can be assembled in proper order into the final 1D array.  I just do not know the proper syntax required in this situation.","body":"I think the problem is that the code needs a Future object to make sure that the ExecutorService has returned all its data slices before the various slices can be assembled in proper order into the final 1D array.  I just do not know the proper syntax required in this situation."},{"owner":{"account_id":978760,"reputation":1422,"user_id":999043,"accept_rate":83,"display_name":"Ralf H"},"score":1,"creation_date":1372716030,"post_id":17395638,"comment_id":25290030,"body_markdown":"The static requirement is caused by not using an instance of ParallelArrays and implementing all methods non-static. \n\nAnyway, using Futures is not necessary, if you are not responding to individual jobs. After you call `threadPool.shutdown()`, the pool will not accept new submits, but it is of course not finished executing the submitted jobs. Use `threadPool.awaitTermination()` to make sure everything is finished.","body":"The static requirement is caused by not using an instance of ParallelArrays and implementing all methods non-static.   Anyway, using Futures is not necessary, if you are not responding to individual jobs. After you call <code>threadPool.shutdown()</code>, the pool will not accept new submits, but it is of course not finished executing the submitted jobs. Use <code>threadPool.awaitTermination()</code> to make sure everything is finished."},{"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"score":1,"creation_date":1376028739,"post_id":17395638,"comment_id":26568337,"body_markdown":"Your problem actually comes from that: you&#39;re not waiting for the pool to finish so the `data2D` is still filled with `null` when you access it in your reconstruction loop.","body":"Your problem actually comes from that: you&#39;re not waiting for the pool to finish so the <code>data2D</code> is still filled with <code>null</code> when you access it in your reconstruction loop."}],"tags":[],"owner":{"account_id":978760,"reputation":1422,"user_id":999043,"accept_rate":83,"display_name":"Ralf H"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1372633554,"creation_date":1372633554,"answer_id":17395638,"question_id":17386768,"body_markdown":"you are using `currIdx` many times in the Runnable. There are writes to `currIdx` from outside that `Runnable` since it is `static`. In the Runnable, better use local variable, maybe even make it `final` before entering the Runnable: \r\n\r\n    final int fCurrIdx = i;\r\n    threadPool.submit(new Runnable() {\r\n        public void run() {\r\n            Random r = new Random();\r\n            int[] data = new int[blockSize];\r\n            for( int j=0; j&lt;data.length; j++){\r\n                data[j] = r.nextInt(255) * r.nextInt(255) * r.nextInt(255);\r\n            }\r\n            data2D[fCurrIdx] = data;\r\n        }\r\n    });\r\n\r\nIn fact, I would create the new int[blockSize] locally, fill it, and assign it to data2D at the end.\r\n\r\nAre you sure you need a new Random every time? Is there a reason to make currIdx (or others) static? \r\n","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>you are using <code>currIdx</code> many times in the Runnable. There are writes to <code>currIdx</code> from outside that <code>Runnable</code> since it is <code>static</code>. In the Runnable, better use local variable, maybe even make it <code>final</code> before entering the Runnable: </p>\n\n<pre><code>final int fCurrIdx = i;\nthreadPool.submit(new Runnable() {\n    public void run() {\n        Random r = new Random();\n        int[] data = new int[blockSize];\n        for( int j=0; j&lt;data.length; j++){\n            data[j] = r.nextInt(255) * r.nextInt(255) * r.nextInt(255);\n        }\n        data2D[fCurrIdx] = data;\n    }\n});\n</code></pre>\n\n<p>In fact, I would create the new int[blockSize] locally, fill it, and assign it to data2D at the end.</p>\n\n<p>Are you sure you need a new Random every time? Is there a reason to make currIdx (or others) static? </p>\n"},{"comments":[{"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"score":0,"creation_date":1376063993,"post_id":18140926,"comment_id":26585396,"body_markdown":"Thanks for following up on this at this later date.  +1 for trying to help.","body":"Thanks for following up on this at this later date.  +1 for trying to help."}],"tags":[],"owner":{"account_id":1107482,"reputation":2870,"user_id":1098603,"accept_rate":94,"display_name":"Matthieu"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1376028420,"creation_date":1376028420,"answer_id":18140926,"question_id":17386768,"body_markdown":"I ran into the same kind of problems lately, they were due to synchronization between tasks using the same non-synchronized variables (comment left for other people reading that :)).\r\n\r\nIn your case, as @Ralf mentioned, you&#39;re not waiting for the termination of the pool. So your `data2D` array is still filled with `null` (`data2D[k] == null` for all `k`), and you get an NPE when doing `data2D[k].length`.\r\n\r\nI have tried to run the second version of your code and it throws NPE sometimes, after I run it 10 times. It&#39;s gone when calling `awaitTermination()`:\r\n\r\n    threadPool.shutdown();\r\n    try {\r\n    \twhile (!threadPool.awaitTermination(1, TimeUnit.SECONDS)) ;\r\n    } catch (InterruptedException e) {\r\n    \te.printStackTrace();\r\n    }\r\n    \r\n    //Now collapse data2D into a 1D array\r\n    data1D = new int[numElements];\r\n    ...\r\n\r\n\r\n","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>I ran into the same kind of problems lately, they were due to synchronization between tasks using the same non-synchronized variables (comment left for other people reading that :)).</p>\n\n<p>In your case, as @Ralf mentioned, you're not waiting for the termination of the pool. So your <code>data2D</code> array is still filled with <code>null</code> (<code>data2D[k] == null</code> for all <code>k</code>), and you get an NPE when doing <code>data2D[k].length</code>.</p>\n\n<p>I have tried to run the second version of your code and it throws NPE sometimes, after I run it 10 times. It's gone when calling <code>awaitTermination()</code>:</p>\n\n<pre><code>threadPool.shutdown();\ntry {\n    while (!threadPool.awaitTermination(1, TimeUnit.SECONDS)) ;\n} catch (InterruptedException e) {\n    e.printStackTrace();\n}\n\n//Now collapse data2D into a 1D array\ndata1D = new int[numElements];\n...\n</code></pre>\n"}],"owner":{"account_id":426537,"reputation":9134,"user_id":807797,"accept_rate":72,"display_name":"CodeMed"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2528,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":3,"score":0,"last_activity_date":1691252691,"creation_date":1372561881,"question_id":17386768,"body_markdown":"I have a variety of different algorithms which are each resource intensive, and which each have to be processed on millions of inputs.  I would like to divide the inputs into blocks, then have the blocks processed in parallel, and then finally have the results assembled into a single output array in correct order.  \r\n  \r\nI have been doing research on the matter, and the consensus seems to be that I should use `ExecutorService` and `arraycopy()`.  However, I am not sure how to determine the optimal number of threads to create, and I do not know how to structure the code in a way that eliminates the risk of bugs.  It would be nice if I knew that each thread was terminated after it creates its resulting array.  Finally, the code I wrote below is also giving me a null pointer error.  \r\n  \r\nHow can I edit the code below so that it accomplishes my above stated goals as fast as possible, while eliminating the risk of bugs?  It would be nice if the code below could run in 5 or 10 milliseconds. The random numbers in the array are nothing more than placeholders to serve as a benchmark to compare threading options.  I do not need to optimize the random number generation because my actual algorithms have nothing to do with random number generation.\r\n\r\nHere is my work in process:  \r\n  \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    import java.util.Random;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class ParallelArrays {\r\n    \tprivate static final int numJobs = 5;\r\n    \tstatic int numElements = 1473200;\r\n    \tstatic int blockSize = 300000;\r\n    \tstatic int remaining;\r\n    \tString number;\r\n    \tstatic int[][] data2D = new int[numJobs][];\r\n    \tstatic int[] data1D;\r\n    \tstatic int size;\r\n    \tstatic int currIdx;\r\n    \t\r\n    \tpublic static void main(String args[]) {\r\n    \t\tlong startTime = System.currentTimeMillis();\r\n    \t\tremaining = numElements-blockSize;\r\n    \t\t// create a pool of threads, 10 max jobs will execute in parallel\r\n    \t\tExecutorService threadPool = Executors.newFixedThreadPool(10);\r\n    \t\t// submit jobs to be executing by the pool\r\n    \t\tfor (int i = 0; i &lt; numJobs; i++) {\r\n    \t\t\tcurrIdx = i;\r\n    \t\t\tSystem.out.println(&quot;This coming iteration would leave us with remaining, blockSize: &quot;+remaining+&quot;, &quot;+blockSize);\r\n    \t\t\tif(remaining&gt;=0){System.out.println(&quot;blockSize is: &quot;+blockSize);}\r\n    \t\t\telse{\r\n    \t\t\t\tblockSize = (blockSize+remaining);\r\n    \t\t\t\tremaining = 0;\r\n    \t\t\t\tSystem.out.println(&quot;else blockSize is: &quot;+blockSize);\r\n    \t\t\t}\r\n    \t\t\tSystem.out.println(&quot;After iteration, remaining, blockSize are: &quot;+remaining+&quot;, &quot;+blockSize);\r\n    \t\t\tthreadPool.submit(new Runnable() {\r\n    \t\t\t\tpublic void run() {\r\n    \t\t\t\t\tRandom r = new Random();\r\n    \t\t\t\t\tdata2D[currIdx] = new int[blockSize];\r\n    \t\t\t\t\tfor(int j=0;j&lt;data2D[currIdx].length;j++){\r\n    \t\t\t\t\t\tdata2D[currIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\tremaining -= blockSize;\r\n    \t\t}\r\n    \t\t//Now collapse data2D into a 1D array\r\n    \t\tdata1D = new int[numElements];\r\n    \t\tint startPos = 0;\r\n    \t\tfor(int k=0;k&lt;numJobs;k++){\r\n    \t\t\tSystem.out.println(&quot;startPos is: &quot;+startPos);\r\n    \t\t\t//arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\r\n    \t\t\tSystem.out.println(&quot;k is: &quot;+k);\r\n    \t\t\tSystem.out.println(&quot;data2D[k].length is: &quot;+data2D[k].length);\r\n    \t\t\tSystem.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\r\n    \t\t\tstartPos += data2D[k].length;\r\n    \t\t}\r\n    \t\tthreadPool.shutdown();\r\n    \t\tSystem.out.println(&quot;Main thread exiting.&quot;);\r\n    \t\tlong endTime = System.currentTimeMillis();\r\n    \t\tSystem.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\r\n    \t}\r\n    }  \r\n  \r\nEdit\r\n---\r\n  \r\nIn response to Ralf H&#39;s suggestions, I have edited my code as follows.  It is still throwing the same null pointer exception, which I will include again below.  How can I get this to run without throwing the null pointer exception?\r\n  \r\n&lt;!-- language: lang-java --&gt;\r\n\r\n    package myPackage;\r\n    \r\n    import java.util.Random;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class ParallelArrays {\r\n    \tprivate final static int numJobs = 5;\r\n    \tstatic int numElements = 1473200;\r\n    \tstatic int blockSize = 300000;\r\n    \tstatic int remaining;\r\n    \tString number;\r\n    \tstatic int[][] data2D = new int[numJobs][];\r\n    \tstatic int[] data1D;\r\n    //\tstatic int size;\r\n    \tstatic int currIdx;\r\n    \tstatic int numAdded = 0;\r\n        \t\r\n    \tpublic static void main(String args[]) {runAlgorithm();}\r\n    \t\r\n    \tstatic void runAlgorithm(){\r\n    \t\tlong startTime = System.currentTimeMillis();\r\n    \t\tremaining = numElements-blockSize;\r\n    \t\tExecutorService threadPool = Executors.newFixedThreadPool(10);\r\n    \t\tfor (int i = 0; i &lt; numJobs; i++) {// submit jobs to be executing by the pool\r\n    \t\t\tcurrIdx = i;\r\n    \t\t\tif(remaining&lt;0){//last block will be smaller than the rest\r\n    \t\t\t\tblockSize = (blockSize+remaining);\r\n    \t\t\t\tremaining = 0;\r\n    \t\t\t}\r\n    \t\t\tfinal int fCurrIdx = i;\r\n    \t\t\tthreadPool.submit(new Runnable() {\r\n    \t\t\t\tpublic void run() {\r\n    \t\t\t\t\tRandom r = new Random();\r\n    \t\t\t\t\tdata2D[fCurrIdx] = new int[blockSize];\r\n    \t\t\t\t\tSystem.out.println(&quot;fCurrIdx is: &quot;+fCurrIdx);\r\n    \t\t\t\t\tfor(int j=0;j&lt;data2D[fCurrIdx].length;j++){\r\n    \t\t\t\t\t\tdata2D[fCurrIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\r\n    \t\t\t\t\t}\r\n    \t\t\t\t\tnumAdded += 1;\r\n    \t\t\t\t}\r\n    \t\t\t});\r\n    \t\t\tremaining -= blockSize;\r\n    \t\t}\r\n    \t\t//Now collapse data2D into a 1D array\r\n    \t\tdata1D = new int[numElements];\r\n    \t\tSystem.out.println(&quot;numAdded, data2D.length is: &quot;+numAdded+&quot;, &quot;+data2D.length);\r\n    \t\tint startPos = 0;\r\n    \t\tfor(int k=0;k&lt;numJobs;k++){\r\n    \t\t\tSystem.out.println(&quot;startPos is: &quot;+startPos);\r\n    \t\t\t//arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\r\n    \t\t\tSystem.out.println(&quot;k, data2D[&quot;+k+&quot;].length are: &quot;+k+&quot;, &quot;+data2D[k].length); // NullPointerException here\r\n    \t\t\tSystem.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\r\n    \t\t\tstartPos += data2D[k].length;\r\n    \t\t}\r\n    \t\tthreadPool.shutdown();\r\n    \t\tSystem.out.println(&quot;Main thread exiting.&quot;);\r\n    \t\tlong endTime = System.currentTimeMillis();\r\n    \t\tSystem.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\r\n    \t}\r\n    }  \r\n  \r\nHere is the stack trace for the null pointer error being thrown by the revised code:\r\n\r\n    Exception in thread &quot;main&quot; java.lang.NullPointerException  \r\n        at myPackage.ParallelArrays.runAlgorithm(ParallelArrays.java:52)  \r\n        at myPackage.ParallelArrays.main(ParallelArrays.java:19)  \r\n  \r\nI think the problem is that the code needs to use a Future object along with the `ExecutorService`.  But I am not sure of the syntax for this specific code.","title":"Parallel processing of arrays using ExecutorService and arrayCopy()","body":"<p>I have a variety of different algorithms which are each resource intensive, and which each have to be processed on millions of inputs.  I would like to divide the inputs into blocks, then have the blocks processed in parallel, and then finally have the results assembled into a single output array in correct order.</p>\n<p>I have been doing research on the matter, and the consensus seems to be that I should use <code>ExecutorService</code> and <code>arraycopy()</code>.  However, I am not sure how to determine the optimal number of threads to create, and I do not know how to structure the code in a way that eliminates the risk of bugs.  It would be nice if I knew that each thread was terminated after it creates its resulting array.  Finally, the code I wrote below is also giving me a null pointer error.</p>\n<p>How can I edit the code below so that it accomplishes my above stated goals as fast as possible, while eliminating the risk of bugs?  It would be nice if the code below could run in 5 or 10 milliseconds. The random numbers in the array are nothing more than placeholders to serve as a benchmark to compare threading options.  I do not need to optimize the random number generation because my actual algorithms have nothing to do with random number generation.</p>\n<p>Here is my work in process:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Random;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class ParallelArrays {\n    private static final int numJobs = 5;\n    static int numElements = 1473200;\n    static int blockSize = 300000;\n    static int remaining;\n    String number;\n    static int[][] data2D = new int[numJobs][];\n    static int[] data1D;\n    static int size;\n    static int currIdx;\n    \n    public static void main(String args[]) {\n        long startTime = System.currentTimeMillis();\n        remaining = numElements-blockSize;\n        // create a pool of threads, 10 max jobs will execute in parallel\n        ExecutorService threadPool = Executors.newFixedThreadPool(10);\n        // submit jobs to be executing by the pool\n        for (int i = 0; i &lt; numJobs; i++) {\n            currIdx = i;\n            System.out.println(&quot;This coming iteration would leave us with remaining, blockSize: &quot;+remaining+&quot;, &quot;+blockSize);\n            if(remaining&gt;=0){System.out.println(&quot;blockSize is: &quot;+blockSize);}\n            else{\n                blockSize = (blockSize+remaining);\n                remaining = 0;\n                System.out.println(&quot;else blockSize is: &quot;+blockSize);\n            }\n            System.out.println(&quot;After iteration, remaining, blockSize are: &quot;+remaining+&quot;, &quot;+blockSize);\n            threadPool.submit(new Runnable() {\n                public void run() {\n                    Random r = new Random();\n                    data2D[currIdx] = new int[blockSize];\n                    for(int j=0;j&lt;data2D[currIdx].length;j++){\n                        data2D[currIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\n                    }\n                }\n            });\n            remaining -= blockSize;\n        }\n        //Now collapse data2D into a 1D array\n        data1D = new int[numElements];\n        int startPos = 0;\n        for(int k=0;k&lt;numJobs;k++){\n            System.out.println(&quot;startPos is: &quot;+startPos);\n            //arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\n            System.out.println(&quot;k is: &quot;+k);\n            System.out.println(&quot;data2D[k].length is: &quot;+data2D[k].length);\n            System.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\n            startPos += data2D[k].length;\n        }\n        threadPool.shutdown();\n        System.out.println(&quot;Main thread exiting.&quot;);\n        long endTime = System.currentTimeMillis();\n        System.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\n    }\n}  \n</code></pre>\n<h2>Edit</h2>\n<p>In response to Ralf H's suggestions, I have edited my code as follows.  It is still throwing the same null pointer exception, which I will include again below.  How can I get this to run without throwing the null pointer exception?</p>\n<pre class=\"lang-java prettyprint-override\"><code>package myPackage;\n\nimport java.util.Random;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class ParallelArrays {\n    private final static int numJobs = 5;\n    static int numElements = 1473200;\n    static int blockSize = 300000;\n    static int remaining;\n    String number;\n    static int[][] data2D = new int[numJobs][];\n    static int[] data1D;\n//  static int size;\n    static int currIdx;\n    static int numAdded = 0;\n        \n    public static void main(String args[]) {runAlgorithm();}\n    \n    static void runAlgorithm(){\n        long startTime = System.currentTimeMillis();\n        remaining = numElements-blockSize;\n        ExecutorService threadPool = Executors.newFixedThreadPool(10);\n        for (int i = 0; i &lt; numJobs; i++) {// submit jobs to be executing by the pool\n            currIdx = i;\n            if(remaining&lt;0){//last block will be smaller than the rest\n                blockSize = (blockSize+remaining);\n                remaining = 0;\n            }\n            final int fCurrIdx = i;\n            threadPool.submit(new Runnable() {\n                public void run() {\n                    Random r = new Random();\n                    data2D[fCurrIdx] = new int[blockSize];\n                    System.out.println(&quot;fCurrIdx is: &quot;+fCurrIdx);\n                    for(int j=0;j&lt;data2D[fCurrIdx].length;j++){\n                        data2D[fCurrIdx][j] = r.nextInt(255)*r.nextInt(255)*r.nextInt(255);\n                    }\n                    numAdded += 1;\n                }\n            });\n            remaining -= blockSize;\n        }\n        //Now collapse data2D into a 1D array\n        data1D = new int[numElements];\n        System.out.println(&quot;numAdded, data2D.length is: &quot;+numAdded+&quot;, &quot;+data2D.length);\n        int startPos = 0;\n        for(int k=0;k&lt;numJobs;k++){\n            System.out.println(&quot;startPos is: &quot;+startPos);\n            //arraycopy(Object src, int srcPos, Object dest, int destPos, int length);\n            System.out.println(&quot;k, data2D[&quot;+k+&quot;].length are: &quot;+k+&quot;, &quot;+data2D[k].length); // NullPointerException here\n            System.arraycopy(data2D[k], 0, data1D, startPos, data2D[k].length);\n            startPos += data2D[k].length;\n        }\n        threadPool.shutdown();\n        System.out.println(&quot;Main thread exiting.&quot;);\n        long endTime = System.currentTimeMillis();\n        System.out.println(&quot;Elapsed time is: &quot;+(endTime-startTime));\n    }\n}  \n</code></pre>\n<p>Here is the stack trace for the null pointer error being thrown by the revised code:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.NullPointerException  \n    at myPackage.ParallelArrays.runAlgorithm(ParallelArrays.java:52)  \n    at myPackage.ParallelArrays.main(ParallelArrays.java:19)  \n</code></pre>\n<p>I think the problem is that the code needs to use a Future object along with the <code>ExecutorService</code>.  But I am not sure of the syntax for this specific code.</p>\n"},{"tags":["java","list","hashmap","java-stream","predicate"],"comments":[{"owner":{"account_id":2933712,"reputation":6419,"user_id":2513200,"accept_rate":83,"display_name":"Hulk"},"score":0,"creation_date":1652417903,"post_id":72223947,"comment_id":127605869,"body_markdown":"Well, I suppose you could transform the result of  your partitioning Collector by composing it with a finisher function using [collectingAndThen](https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#collectingAndThen-java.util.stream.Collector-java.util.function.Function-)","body":"Well, I suppose you could transform the result of  your partitioning Collector by composing it with a finisher function using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Collectors.html#collectingAndThen-java.util.stream.Collector-java.util.function.Function-\" rel=\"nofollow noreferrer\">collectingAndThen</a>"}],"answers":[{"tags":[],"owner":{"account_id":5569841,"reputation":3750,"user_id":4415625,"display_name":"dani-vta"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1652439089,"creation_date":1652424753,"answer_id":72225501,"question_id":72223947,"body_markdown":"You could use the terminal operation `collect(Collectors.toMap())` to group by your predicate and instead of returning its `boolean` value as the key you could use a ternary operator to return either 1 or 0.\r\n\r\n&gt; to convert the boolean keys to the int type\r\n\r\nThen, you could map to that key a `List` built on the `String` you tested the `Predicate` with, and to handle the colliding cases you could add the `List` associated to the second key into the `List` corresponding to the first key.\r\n\r\nHere&#39;s a snippet of the code:\r\n\r\n```\r\n//My silly test Predicate\r\nPredicate&lt;String&gt; p = s -&gt; s.length() &gt; 4;\r\n\r\n//Mapping the numbers list\r\nMap&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\r\n        .collect(Collectors.toMap(s -&gt; p.test(s) ? 1 : 0, \r\n            s -&gt; new ArrayList&lt;&gt;(List.of(s)), \r\n            (list1, list2) -&gt; {\r\n                list1.addAll(list2);\r\n                return list1;\r\n            }\r\n        ));\r\n```\r\n\r\nHere, there&#39;s also a link to test the code:\r\n\r\nhttps://ideone.com/Kd8xrI","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<p>You could use the terminal operation <code>collect(Collectors.toMap())</code> to group by your predicate and instead of returning its <code>boolean</code> value as the key you could use a ternary operator to return either 1 or 0.</p>\n<blockquote>\n<p>to convert the boolean keys to the int type</p>\n</blockquote>\n<p>Then, you could map to that key a <code>List</code> built on the <code>String</code> you tested the <code>Predicate</code> with, and to handle the colliding cases you could add the <code>List</code> associated to the second key into the <code>List</code> corresponding to the first key.</p>\n<p>Here's a snippet of the code:</p>\n<pre><code>//My silly test Predicate\nPredicate&lt;String&gt; p = s -&gt; s.length() &gt; 4;\n\n//Mapping the numbers list\nMap&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\n        .collect(Collectors.toMap(s -&gt; p.test(s) ? 1 : 0, \n            s -&gt; new ArrayList&lt;&gt;(List.of(s)), \n            (list1, list2) -&gt; {\n                list1.addAll(list2);\n                return list1;\n            }\n        ));\n</code></pre>\n<p>Here, there's also a link to test the code:</p>\n<p><a href=\"https://ideone.com/Kd8xrI\" rel=\"nofollow noreferrer\">https://ideone.com/Kd8xrI</a></p>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1652438730,"creation_date":1652438730,"answer_id":72228329,"question_id":72223947,"body_markdown":"&gt; Is it possible to convert the boolean keys to the `int` type inside the\r\n&gt; partitioning logic\r\n\r\nSo you need to associate the values in a list with `0` and `1` (*for instance, in order to store the data into the database*) based on the given *predicate*.\r\n\r\nFor that, instead of `partitioningBy()` you can use collector [`groupingBy()`](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function)) in conjunction with the *predicate*.\r\n```\r\nMap&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\r\n    .collect(Collectors.groupingBy(num -&gt; predicate.test(num) ? 1 : 0));\r\n```","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<blockquote>\n<p>Is it possible to convert the boolean keys to the <code>int</code> type inside the\npartitioning logic</p>\n</blockquote>\n<p>So you need to associate the values in a list with <code>0</code> and <code>1</code> (<em>for instance, in order to store the data into the database</em>) based on the given <em>predicate</em>.</p>\n<p>For that, instead of <code>partitioningBy()</code> you can use collector <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#groupingBy(java.util.function.Function)\" rel=\"nofollow noreferrer\"><code>groupingBy()</code></a> in conjunction with the <em>predicate</em>.</p>\n<pre><code>Map&lt;Integer, List&lt;String&gt;&gt; partitioned = numbers.stream()\n    .collect(Collectors.groupingBy(num -&gt; predicate.test(num) ? 1 : 0));\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9983336,"reputation":4132,"user_id":7769052,"accept_rate":75,"display_name":"banan3&#39;14"},"score":0,"creation_date":1691574248,"post_id":76842478,"comment_id":135508863,"body_markdown":"why should `gender` be a String and not an enum? Why do you leave code in the text of the answer `// ...`? What new does this answer bring about? It&#39;s the same use of `grouping` as in the accepted answer in my opinion","body":"why should <code>gender</code> be a String and not an enum? Why do you leave code in the text of the answer <code>&#47;&#47; ...</code>? What new does this answer bring about? It&#39;s the same use of <code>grouping</code> as in the accepted answer in my opinion"}],"tags":[],"owner":{"account_id":6123562,"reputation":1,"user_id":4776301,"display_name":"Umesh Kumar Yadav"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691251596,"creation_date":1691251596,"answer_id":76842478,"question_id":72223947,"body_markdown":"Assuming that below class -\r\n\r\n    public class Employee {\r\n    \tint id;\r\n    \tString name;\r\n    \tint age;\r\n    \tString gender;\r\n    // getters n setters\r\n    }\r\n\r\n// Now to group or get the count of, Employees based on Gender, we can use below codes\r\n\r\n    Map&lt;String, Long&gt; noOfMaleAndFemaleEmployees =\r\n    \t\temployeeList.stream().collect(Collectors.groupingBy(Employee::getGender, Collectors.counting()));\r\n    \t\t        \r\n    System.out.println(noOfMaleAndFemaleEmployees);\r\n    \r\n    System.out.println(employeeList.stream().map(Employee::getGender)\r\n    \t\t\t\t.filter(e -&gt; e.equalsIgnoreCase(&quot;male&quot;)).count());  \r\n\r\n// Filters can be used as well\r\n    \r\n    System.out.println(employeeList.stream()\r\n    \t\t\t\t.collect(Collectors.partitioningBy(e-&gt; e.getGender().equalsIgnoreCase(&quot;Male&quot;), \r\n    \t\t\t\t\t\tCollectors.counting())));\r\n\r\n","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<p>Assuming that below class -</p>\n<pre><code>public class Employee {\n    int id;\n    String name;\n    int age;\n    String gender;\n// getters n setters\n}\n</code></pre>\n<p>// Now to group or get the count of, Employees based on Gender, we can use below codes</p>\n<pre><code>Map&lt;String, Long&gt; noOfMaleAndFemaleEmployees =\n        employeeList.stream().collect(Collectors.groupingBy(Employee::getGender, Collectors.counting()));\n                \nSystem.out.println(noOfMaleAndFemaleEmployees);\n\nSystem.out.println(employeeList.stream().map(Employee::getGender)\n                .filter(e -&gt; e.equalsIgnoreCase(&quot;male&quot;)).count());  \n</code></pre>\n<p>// Filters can be used as well</p>\n<pre><code>System.out.println(employeeList.stream()\n                .collect(Collectors.partitioningBy(e-&gt; e.getGender().equalsIgnoreCase(&quot;Male&quot;), \n                        Collectors.counting())));\n</code></pre>\n"}],"owner":{"account_id":1193165,"reputation":6176,"user_id":1165493,"accept_rate":55,"display_name":"Sandah Aung"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":792,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72225501,"answer_count":3,"score":1,"last_activity_date":1691251596,"creation_date":1652410127,"question_id":72223947,"body_markdown":"In the code shown below, `p` is a predicate of type `Predicate&lt;String&gt;`.  \r\n\r\n    Map&lt;Boolean, List&lt;String&gt;&gt; partitioned = numbers.stream()\r\n        .collect(Collectors.partitioningBy(p));\r\n\r\nIs it possible to convert the `boolean` keys to the `int` type inside the partitioning logic rather than having another stream? \r\n\r\nLooks like it could be done with `grouping`.\r\n\r\n    Map&lt;String, List&lt;String&gt;&gt; targetTableColumnListMap = nqColumnMapList.stream()\r\n        .flatMap(m -&gt; m.entrySet().stream())\r\n        .collect(Collectors.groupingBy(\r\n            e -&gt; e.getKey().toUpperCase(), \r\n            Collectors.mapping(Map.Entry::getValue, Collectors.toList())\r\n        ));","title":"Java 8 Streams - How to get an equivalent of partitioningBy() with Integer keys?","body":"<p>In the code shown below, <code>p</code> is a predicate of type <code>Predicate&lt;String&gt;</code>.</p>\n<pre><code>Map&lt;Boolean, List&lt;String&gt;&gt; partitioned = numbers.stream()\n    .collect(Collectors.partitioningBy(p));\n</code></pre>\n<p>Is it possible to convert the <code>boolean</code> keys to the <code>int</code> type inside the partitioning logic rather than having another stream?</p>\n<p>Looks like it could be done with <code>grouping</code>.</p>\n<pre><code>Map&lt;String, List&lt;String&gt;&gt; targetTableColumnListMap = nqColumnMapList.stream()\n    .flatMap(m -&gt; m.entrySet().stream())\n    .collect(Collectors.groupingBy(\n        e -&gt; e.getKey().toUpperCase(), \n        Collectors.mapping(Map.Entry::getValue, Collectors.toList())\n    ));\n</code></pre>\n"},{"tags":["java","lambda","java-8"],"answers":[{"comments":[{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":2,"creation_date":1411157081,"post_id":25941558,"comment_id":40613447,"body_markdown":"Don&#39;t think this will work--the argument of `flatMap` has to be a function that turns a `List&lt;String&gt;` into a `Stream&lt;String&gt;`.  See the [javadoc](http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-).","body":"Don&#39;t think this will work--the argument of <code>flatMap</code> has to be a function that turns a <code>List&lt;String&gt;</code> into a <code>Stream&lt;String&gt;</code>.  See the <a href=\"http://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#flatMap-java.util.function.Function-\" rel=\"nofollow noreferrer\">javadoc</a>."},{"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"score":0,"creation_date":1411157186,"post_id":25941558,"comment_id":40613497,"body_markdown":"@ajb : Taking another look to the `Function.identity()` doc, you are right. Thanks !","body":"@ajb : Taking another look to the <code>Function.identity()</code> doc, you are right. Thanks !"}],"tags":[],"owner":{"account_id":4826640,"reputation":25377,"user_id":3895960,"accept_rate":97,"display_name":"Dici"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1411157198,"creation_date":1411156811,"answer_id":25941558,"question_id":25941528,"body_markdown":"You can do \r\n\r\n    List&lt;String&gt; result = lists.stream()\r\n        .flatMap(l -&gt; l.stream())\r\n        .collect(Collectors.toList());","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<p>You can do </p>\n\n<pre><code>List&lt;String&gt; result = lists.stream()\n    .flatMap(l -&gt; l.stream())\n    .collect(Collectors.toList());\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":4,"creation_date":1411157583,"post_id":25941582,"comment_id":40613676,"body_markdown":"Looks like you answer all the flatMap questions. :-) Note the lambda could also be replaced with `List::stream`.","body":"Looks like you answer all the flatMap questions. :-) Note the lambda could also be replaced with <code>List::stream</code>."},{"owner":{"account_id":3818241,"reputation":4374,"user_id":3167016,"accept_rate":94,"display_name":"TuGordoBello"},"score":0,"creation_date":1667313008,"post_id":25941582,"comment_id":131135132,"body_markdown":"This answers is very usefully","body":"This answers is very usefully"}],"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1411156907,"creation_date":1411156907,"answer_id":25941582,"question_id":25941528,"body_markdown":"That&#39;s what flatMap is for :\r\n\r\n    List&lt;String&gt; list = inputList.stream() // create a Stream&lt;List&lt;String&gt;&gt;\r\n                                 .flatMap(l -&gt; l.stream()) // create a Stream&lt;String&gt;\r\n                                                           // of all the Strings in\r\n                                                           // all the internal lists\r\n                                 .collect(Collectors.toList());","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<p>That's what flatMap is for :</p>\n\n<pre><code>List&lt;String&gt; list = inputList.stream() // create a Stream&lt;List&lt;String&gt;&gt;\n                             .flatMap(l -&gt; l.stream()) // create a Stream&lt;String&gt;\n                                                       // of all the Strings in\n                                                       // all the internal lists\n                             .collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6372402,"reputation":177,"user_id":4944448,"display_name":"Ravirajsinh Vaghela"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1683095423,"creation_date":1683095423,"answer_id":76161005,"question_id":25941528,"body_markdown":"    List&lt;String&gt; result = lists.stream().flatMap(Collection::stream)\r\n    .collect(Collectors.toList());","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<pre><code>List&lt;String&gt; result = lists.stream().flatMap(Collection::stream)\n.collect(Collectors.toList());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11777498,"reputation":1,"user_id":8618365,"display_name":"ankit singh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691249431,"creation_date":1691249431,"answer_id":76842335,"question_id":25941528,"body_markdown":"    /*\r\n            Let&#39;s say you have list of list of person names as below\r\n            [[John, Wick], [Patric, Peter], [Nick, Bill]]\r\n        */\r\n        List&lt;List&lt;String&gt;&gt; personsNames =\r\n                List.of(List.of(&quot;John&quot;, &quot;Wick&quot;), List.of(&quot;Patric&quot;, &quot;Peter&quot;), List.of(&quot;Nick&quot;, &quot;Bill&quot;));\r\n\r\n        List&lt;String&gt; finalList = personsNames\r\n                .stream()\r\n                .flatMap(name -&gt; name.stream()).collect(toList());\r\n        \r\n        /*\r\n        * Final result will be like - [John, Wick, Patric, Peter, Nick, Bill]\r\n        */","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<pre><code>/*\n        Let's say you have list of list of person names as below\n        [[John, Wick], [Patric, Peter], [Nick, Bill]]\n    */\n    List&lt;List&lt;String&gt;&gt; personsNames =\n            List.of(List.of(&quot;John&quot;, &quot;Wick&quot;), List.of(&quot;Patric&quot;, &quot;Peter&quot;), List.of(&quot;Nick&quot;, &quot;Bill&quot;));\n\n    List&lt;String&gt; finalList = personsNames\n            .stream()\n            .flatMap(name -&gt; name.stream()).collect(toList());\n    \n    /*\n    * Final result will be like - [John, Wick, Patric, Peter, Nick, Bill]\n    */\n</code></pre>\n"}],"owner":{"account_id":942497,"reputation":95,"user_id":1048401,"display_name":"Hydrosan"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":7901,"favorite_count":0,"down_vote_count":0,"up_vote_count":7,"accepted_answer_id":25941582,"answer_count":4,"score":7,"last_activity_date":1691249431,"creation_date":1411156679,"question_id":25941528,"body_markdown":"Say I have a list of Lists.. \r\n\r\n    List&lt;List&lt;String&gt;&gt; lists = new ArrayList&lt;&gt;();\r\n\r\nIs there a clever lambda way to collapse this into a List&lt;String&gt; of all the contents ?","title":"Collapse List&lt;List&lt;String&gt;&gt; into List&lt;String&gt; using a lambda?","body":"<p>Say I have a list of Lists.. </p>\n\n<pre><code>List&lt;List&lt;String&gt;&gt; lists = new ArrayList&lt;&gt;();\n</code></pre>\n\n<p>Is there a clever lambda way to collapse this into a List of all the contents ?</p>\n"},{"tags":["java","kotlin","mockk"],"comments":[{"owner":{"account_id":20928711,"reputation":3225,"user_id":15375588,"display_name":"Karsten Gabriel"},"score":0,"creation_date":1691478583,"post_id":76841359,"comment_id":135493238,"body_markdown":"What does it mean that the two lines do not work as intended? How do they work? And what is your expectation? Maybe add a bit more context of the test than just the two lines?","body":"What does it mean that the two lines do not work as intended? How do they work? And what is your expectation? Maybe add a bit more context of the test than just the two lines?"},{"owner":{"account_id":25676050,"reputation":64,"user_id":19439460,"display_name":"nickklon"},"score":0,"creation_date":1697914621,"post_id":76841359,"comment_id":136340300,"body_markdown":"After mocking the constructor with mockkConstructor, are you mocking the methods on the handler with anyConstructed() or constructedWith() ?","body":"After mocking the constructor with mockkConstructor, are you mocking the methods on the handler with anyConstructed() or constructedWith() ?"}],"owner":{"account_id":29165370,"reputation":1,"user_id":22343095,"display_name":"Magic Man"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691249329,"creation_date":1691233711,"question_id":76841359,"body_markdown":"Code:\r\n\r\n    public class MyApplication extends Application {\r\n        private Handler handler;\r\n        private Context context;\r\n    \r\n        @Override\r\n        public void onCreate() {\r\n            super.onCreate();\r\n            context = getApplicationContext();\r\n    \r\n            handler = new Handler(context.getMainLooper()) {\r\n                @Override\r\n                public void handleMessage(Message msg) {\r\n                    switch (msg.what) {\r\n                        case 1:\r\n                        Handle message case 1\r\n                        break;\r\n                        case 2:\r\n                        Handle message case 2\r\n                        break;\r\n                        Add more cases as needed\r\n                        default:\r\n                        Handle other cases or provide a default behavior\r\n                        break;\r\n                    }\r\n                }\r\n            };\r\n    \r\n            Sending message with code 1 to the handler\r\n            handler.obtainMessage(1).sendToTarget();\r\n    \r\n            Sending message with code 2 to the handler\r\n            handler.obtainMessage(2).sendToTarget();\r\n        }\r\n    }\r\n\r\n \r\nProblem: handler object always gives null during executing the unit test.\r\n\r\nQuestion: How to mock the Handler class to initialize the instance to handler object? Using the instance, I need to handle the message.\r\n\r\n    every { mockContext.mainLooper } returns mockLooper\r\n    mockkConstructor(Handler::class)\r\n\r\nThese lines do not work as intended.\r\n","title":"How to test using mockk library kotlin for Handler class?","body":"<p>Code:</p>\n<pre><code>public class MyApplication extends Application {\n    private Handler handler;\n    private Context context;\n\n    @Override\n    public void onCreate() {\n        super.onCreate();\n        context = getApplicationContext();\n\n        handler = new Handler(context.getMainLooper()) {\n            @Override\n            public void handleMessage(Message msg) {\n                switch (msg.what) {\n                    case 1:\n                    Handle message case 1\n                    break;\n                    case 2:\n                    Handle message case 2\n                    break;\n                    Add more cases as needed\n                    default:\n                    Handle other cases or provide a default behavior\n                    break;\n                }\n            }\n        };\n\n        Sending message with code 1 to the handler\n        handler.obtainMessage(1).sendToTarget();\n\n        Sending message with code 2 to the handler\n        handler.obtainMessage(2).sendToTarget();\n    }\n}\n</code></pre>\n<p>Problem: handler object always gives null during executing the unit test.</p>\n<p>Question: How to mock the Handler class to initialize the instance to handler object? Using the instance, I need to handle the message.</p>\n<pre><code>every { mockContext.mainLooper } returns mockLooper\nmockkConstructor(Handler::class)\n</code></pre>\n<p>These lines do not work as intended.</p>\n"},{"tags":["java","junit","h2"],"answers":[{"comments":[{"owner":{"account_id":12669767,"reputation":385,"user_id":9207677,"display_name":"djulb"},"score":0,"creation_date":1691235301,"post_id":76841089,"comment_id":135466554,"body_markdown":"Hello - Thank you :)\n` entityManager.clear();` helped. I dont get that exception anymore\n\nHowever data isnt cleared between tests. I can still see the data from previous test.\nAny idea on that?","body":"Hello - Thank you :) ` entityManager.clear();` helped. I dont get that exception anymore  However data isnt cleared between tests. I can still see the data from previous test. Any idea on that?"},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":1,"creation_date":1691235776,"post_id":76841089,"comment_id":135466598,"body_markdown":"So you can try adding the `entityManager.flush();` before the commit!","body":"So you can try adding the <code>entityManager.flush();</code> before the commit!"},{"owner":{"account_id":12669767,"reputation":385,"user_id":9207677,"display_name":"djulb"},"score":0,"creation_date":1691242746,"post_id":76841089,"comment_id":135467252,"body_markdown":"I keep trying variations of this but its not working.\nSometimes all tests pass, and sometimes stuff fail with error\n\njakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session : \n\nor \n\njakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session. Thanks still :)","body":"I keep trying variations of this but its not working. Sometimes all tests pass, and sometimes stuff fail with error  jakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session :   or   jakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session. Thanks still :)"},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":1,"creation_date":1691247720,"post_id":76841089,"comment_id":135467740,"body_markdown":"@djulb check update section in my answer","body":"@djulb check update section in my answer"},{"owner":{"account_id":12669767,"reputation":385,"user_id":9207677,"display_name":"djulb"},"score":1,"creation_date":1691267249,"post_id":76841089,"comment_id":135469763,"body_markdown":"Thanks, yeah that was the solution for the problem.\n\nI had a couple of issues which were blocking. \nFor example H2 database has reserved words User, Month, Year\n\nSo among other things it was blocking my entity managment system to fully set up and throw weird errors allong the way.","body":"Thanks, yeah that was the solution for the problem.  I had a couple of issues which were blocking.  For example H2 database has reserved words User, Month, Year  So among other things it was blocking my entity managment system to fully set up and throw weird errors allong the way."}],"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"comment_count":5,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691247663,"creation_date":1691229567,"answer_id":76841089,"question_id":76841021,"body_markdown":"I think you can use the `@AfterEach` annotation instead of `@AfterAll` to ensure that the cleanup is performed after each individual test, so in `H2DatabaseConfig` class change the `@AfterEach` like below :\r\n\r\n    @AfterEach\r\n    public void tearDown() throws SQLException {\r\n        entityManager.clear(); //clear entities from the session\r\n        connection.close();\r\n        server.stop();\r\n    }\r\n\r\nand edit the `persistence.xml` file to include the `javax.persistence.schema-generation.database.action` property with &quot;drop-and-create&quot; to drop and recreate the database schema for each test and ensuring a clean state before running the tests like below:\r\n\r\n    &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n\r\n\r\n**update**\r\n\r\nabout your last comments,better to make sure that you are properly clearing and resetting the persistence context between tests,in your `H2DatabaseConfig` class, add the `entityManager.clear()` method call in the `tearDown()` method and verify that your tests are not sharing or reusing the same instances of entities.each test should create its own instances of entities to avoid conflicts!","title":"JUnit - No Spring Boot - Clean H2 Database between each test","body":"<p>I think you can use the <code>@AfterEach</code> annotation instead of <code>@AfterAll</code> to ensure that the cleanup is performed after each individual test, so in <code>H2DatabaseConfig</code> class change the <code>@AfterEach</code> like below :</p>\n<pre><code>@AfterEach\npublic void tearDown() throws SQLException {\n    entityManager.clear(); //clear entities from the session\n    connection.close();\n    server.stop();\n}\n</code></pre>\n<p>and edit the <code>persistence.xml</code> file to include the <code>javax.persistence.schema-generation.database.action</code> property with &quot;drop-and-create&quot; to drop and recreate the database schema for each test and ensuring a clean state before running the tests like below:</p>\n<pre><code>&lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n</code></pre>\n<p><strong>update</strong></p>\n<p>about your last comments,better to make sure that you are properly clearing and resetting the persistence context between tests,in your <code>H2DatabaseConfig</code> class, add the <code>entityManager.clear()</code> method call in the <code>tearDown()</code> method and verify that your tests are not sharing or reusing the same instances of entities.each test should create its own instances of entities to avoid conflicts!</p>\n"}],"owner":{"account_id":12669767,"reputation":385,"user_id":9207677,"display_name":"djulb"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":207,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76841089,"answer_count":1,"score":0,"last_activity_date":1691247663,"creation_date":1691228468,"question_id":76841021,"body_markdown":"I am having issue setting up H2 database for JUnit.\r\nImportant to note - I am not using spring boot autoconfiguration.\r\n\r\nI want to purge all data between each test.\r\nTest classes extend H2DatabaseConfig class that sets up H2 connection. \r\nAnd my plan is to purge all data with a @AfterAll annotation.\r\nI dont want to use deleteAll method, like full drop of data (rows and autoincrement reset).\r\n\r\nAt the moment,\r\nwhen i run each test individually everything is fine.\r\nBut when i run all together i get error\r\n\r\n```\r\njakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session : [com.example.database.entity.Team]\r\n```\r\n\r\nI know its related to my parent class.\r\nIts related to the way i am recreating session/connection.\r\nBut not sure how to fix it.\r\n\r\nI appreciate any hint you can give. Thank you in advance\r\n\r\n\r\nH2DatabaseConfig\r\n```\r\npublic class H2DatabaseConfig {\r\n    private static Server server;\r\n    private static Connection connection;\r\n    protected static EntityManagerFactory entityManagerFactory;\r\n    private static EntityManager entityManager;\r\n    @BeforeEach\r\n    public void setUp() throws SQLException {\r\n        server = Server.createTcpServer().start();\r\n        connection = DriverManager.getConnection(&quot;jdbc:h2:mem:test;MODE=MYSQL&quot;, &quot;root&quot;, &quot;password&quot;);\r\n\r\n        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;entity-manager-test&quot;);\r\n        entityManager = entityManagerFactory.createEntityManager();\r\n        Container.initBeans(entityManager);\r\n    }\r\n\r\n    @AfterEach\r\n    public void tearDown() throws SQLException {\r\n        connection.close();\r\n        server.stop();\r\n    }\r\n}\r\n```\r\n\r\nTestClass\r\n```\r\nclass FormTeamAddControllerTest extends H2DatabaseConfig {\r\n\r\n    private FormTeamAddController formTeamAddController;\r\n    private TeamSavePort teamSavePort;\r\n\r\n    @BeforeEach\r\n    public void set() {\r\n        formTeamAddController = new FormTeamAddController();\r\n        teamSavePort = Container.getBean(TeamSavePort.class);\r\n    }\r\n    @Test\r\n    public void shouldSaveTeam() {\r\n        // when\r\n        ValidatorResponse save = formTeamAddController.save(&quot;Lowe&quot;, &quot;123&quot;);\r\n\r\n        // then\r\n        assertTrue(save.isOk());\r\n        assertEquals(TeamInputValidator.msgTeamIsCreated(&quot;Lowe&quot;), save.getMessage());\r\n    }\r\n\r\n    @Test\r\n    public void shouldNotSaveTeamCauseDuplicateTeamName() {\r\n        teamSavePort.save(&quot;Star&quot;, BigDecimal.valueOf(123));\r\n        // when\r\n        ValidatorResponse save = formTeamAddController.save(&quot;Star&quot;, &quot;123&quot;);\r\n\r\n        // then\r\n        assertTrue(save.hasErrors());\r\n        assertEquals(save.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamNameExists());\r\n    }\r\n\r\n    @Test\r\n    public void shouldNotSaveTeamCauseWrongName() {\r\n        // when\r\n        ValidatorResponse save1 = formTeamAddController.save(null, &quot;123&quot;);\r\n        ValidatorResponse save2 = formTeamAddController.save(&quot;  &quot;, &quot;123&quot;);\r\n        ValidatorResponse save3 = formTeamAddController.save(&quot;&quot;, &quot;123&quot;);\r\n\r\n        // then\r\n        assertTrue(save1.hasErrors());\r\n        assertTrue(save2.hasErrors());\r\n        assertTrue(save3.hasErrors());\r\n\r\n        assertEquals(save1.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\r\n        assertEquals(save2.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\r\n        assertEquals(save3.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\r\n    }\r\n\r\n    @Test\r\n    public void shouldNotSaveTeamCauseWrongMembershipFee() {\r\n        // when\r\n        ValidatorResponse save1 = formTeamAddController.save(&quot;Star&quot;, null);\r\n        ValidatorResponse save2 = formTeamAddController.save(&quot;Star&quot;, &quot;   &quot;);\r\n        ValidatorResponse save3 = formTeamAddController.save(&quot;Star&quot;, &quot;&quot;);\r\n\r\n        // then\r\n        assertTrue(save1.hasErrors());\r\n        assertTrue(save2.hasErrors());\r\n        assertTrue(save3.hasErrors());\r\n\r\n        assertEquals(TeamInputValidator.errTeamFee(), save1.getErrors().get(&quot;membershipPayment&quot;));\r\n        assertEquals(TeamInputValidator.errTeamFee(), save2.getErrors().get(&quot;membershipPayment&quot;));\r\n        assertEquals(TeamInputValidator.errTeamFee(), save3.getErrors().get(&quot;membershipPayment&quot;));\r\n    }\r\n\r\n}\r\n```\r\npersistence.xml\r\n```\r\n    &lt;persistence-unit name=&quot;entity-manager-test&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\r\n        &lt;class&gt;com.example.database.entity.Team&lt;/class&gt;\r\n\r\n        &lt;properties&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot; /&gt;\r\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;INIT=CREATE SCHEMA IF NOT EXISTS test&quot; /&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot;   value=&quot;root&quot; /&gt;\r\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;password&quot; /&gt;\r\n\r\n            &lt;!-- Generate the database schema --&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\r\n\r\n            &lt;!-- Customize the schema generation behavior --&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.create-source&quot; value=&quot;metadata&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.drop-source&quot; value=&quot;metadata&quot;/&gt;\r\n            &lt;property name=&quot;javax.persistence.schema-generation.scripts.action&quot; value=&quot;none&quot;/&gt;\r\n\r\n\r\n        &lt;/properties&gt;\r\n    &lt;/persistence-unit&gt;\r\n```","title":"JUnit - No Spring Boot - Clean H2 Database between each test","body":"<p>I am having issue setting up H2 database for JUnit.\nImportant to note - I am not using spring boot autoconfiguration.</p>\n<p>I want to purge all data between each test.\nTest classes extend H2DatabaseConfig class that sets up H2 connection.\nAnd my plan is to purge all data with a @AfterAll annotation.\nI dont want to use deleteAll method, like full drop of data (rows and autoincrement reset).</p>\n<p>At the moment,\nwhen i run each test individually everything is fine.\nBut when i run all together i get error</p>\n<pre><code>jakarta.persistence.EntityExistsException: A different object with the same identifier value was already associated with the session : [com.example.database.entity.Team]\n</code></pre>\n<p>I know its related to my parent class.\nIts related to the way i am recreating session/connection.\nBut not sure how to fix it.</p>\n<p>I appreciate any hint you can give. Thank you in advance</p>\n<p>H2DatabaseConfig</p>\n<pre><code>public class H2DatabaseConfig {\n    private static Server server;\n    private static Connection connection;\n    protected static EntityManagerFactory entityManagerFactory;\n    private static EntityManager entityManager;\n    @BeforeEach\n    public void setUp() throws SQLException {\n        server = Server.createTcpServer().start();\n        connection = DriverManager.getConnection(&quot;jdbc:h2:mem:test;MODE=MYSQL&quot;, &quot;root&quot;, &quot;password&quot;);\n\n        entityManagerFactory = Persistence.createEntityManagerFactory(&quot;entity-manager-test&quot;);\n        entityManager = entityManagerFactory.createEntityManager();\n        Container.initBeans(entityManager);\n    }\n\n    @AfterEach\n    public void tearDown() throws SQLException {\n        connection.close();\n        server.stop();\n    }\n}\n</code></pre>\n<p>TestClass</p>\n<pre><code>class FormTeamAddControllerTest extends H2DatabaseConfig {\n\n    private FormTeamAddController formTeamAddController;\n    private TeamSavePort teamSavePort;\n\n    @BeforeEach\n    public void set() {\n        formTeamAddController = new FormTeamAddController();\n        teamSavePort = Container.getBean(TeamSavePort.class);\n    }\n    @Test\n    public void shouldSaveTeam() {\n        // when\n        ValidatorResponse save = formTeamAddController.save(&quot;Lowe&quot;, &quot;123&quot;);\n\n        // then\n        assertTrue(save.isOk());\n        assertEquals(TeamInputValidator.msgTeamIsCreated(&quot;Lowe&quot;), save.getMessage());\n    }\n\n    @Test\n    public void shouldNotSaveTeamCauseDuplicateTeamName() {\n        teamSavePort.save(&quot;Star&quot;, BigDecimal.valueOf(123));\n        // when\n        ValidatorResponse save = formTeamAddController.save(&quot;Star&quot;, &quot;123&quot;);\n\n        // then\n        assertTrue(save.hasErrors());\n        assertEquals(save.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamNameExists());\n    }\n\n    @Test\n    public void shouldNotSaveTeamCauseWrongName() {\n        // when\n        ValidatorResponse save1 = formTeamAddController.save(null, &quot;123&quot;);\n        ValidatorResponse save2 = formTeamAddController.save(&quot;  &quot;, &quot;123&quot;);\n        ValidatorResponse save3 = formTeamAddController.save(&quot;&quot;, &quot;123&quot;);\n\n        // then\n        assertTrue(save1.hasErrors());\n        assertTrue(save2.hasErrors());\n        assertTrue(save3.hasErrors());\n\n        assertEquals(save1.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\n        assertEquals(save2.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\n        assertEquals(save3.getErrors().get(&quot;name&quot;), TeamInputValidator.errTeamName());\n    }\n\n    @Test\n    public void shouldNotSaveTeamCauseWrongMembershipFee() {\n        // when\n        ValidatorResponse save1 = formTeamAddController.save(&quot;Star&quot;, null);\n        ValidatorResponse save2 = formTeamAddController.save(&quot;Star&quot;, &quot;   &quot;);\n        ValidatorResponse save3 = formTeamAddController.save(&quot;Star&quot;, &quot;&quot;);\n\n        // then\n        assertTrue(save1.hasErrors());\n        assertTrue(save2.hasErrors());\n        assertTrue(save3.hasErrors());\n\n        assertEquals(TeamInputValidator.errTeamFee(), save1.getErrors().get(&quot;membershipPayment&quot;));\n        assertEquals(TeamInputValidator.errTeamFee(), save2.getErrors().get(&quot;membershipPayment&quot;));\n        assertEquals(TeamInputValidator.errTeamFee(), save3.getErrors().get(&quot;membershipPayment&quot;));\n    }\n\n}\n</code></pre>\n<p>persistence.xml</p>\n<pre><code>    &lt;persistence-unit name=&quot;entity-manager-test&quot; transaction-type=&quot;RESOURCE_LOCAL&quot;&gt;\n        &lt;class&gt;com.example.database.entity.Team&lt;/class&gt;\n\n        &lt;properties&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.driver&quot; value=&quot;org.h2.Driver&quot; /&gt;\n            &lt;property name=&quot;javax.persistence.jdbc.url&quot; value=&quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;INIT=CREATE SCHEMA IF NOT EXISTS test&quot; /&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.user&quot;   value=&quot;root&quot; /&gt;\n            &lt;property name=&quot;jakarta.persistence.jdbc.password&quot; value=&quot;password&quot; /&gt;\n\n            &lt;!-- Generate the database schema --&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.database.action&quot; value=&quot;drop-and-create&quot;/&gt;\n\n            &lt;!-- Customize the schema generation behavior --&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.create-source&quot; value=&quot;metadata&quot;/&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.drop-source&quot; value=&quot;metadata&quot;/&gt;\n            &lt;property name=&quot;javax.persistence.schema-generation.scripts.action&quot; value=&quot;none&quot;/&gt;\n\n\n        &lt;/properties&gt;\n    &lt;/persistence-unit&gt;\n</code></pre>\n"},{"tags":["java","mysql","hql"],"answers":[{"comments":[{"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"score":1,"creation_date":1468246302,"post_id":38309074,"comment_id":64034949,"body_markdown":"I am getting unexpected token: 21","body":"I am getting unexpected token: 21"},{"owner":{"account_id":4311362,"reputation":132319,"user_id":3522312,"display_name":"ScaisEdge"},"score":0,"creation_date":1468246517,"post_id":38309074,"comment_id":64035127,"body_markdown":"i have test in mysql this way and seems correct \n\n    select DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) ) from dual;","body":"i have test in mysql this way and seems correct       select DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) ) from dual;"},{"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"score":0,"creation_date":1468253891,"post_id":38309074,"comment_id":64039982,"body_markdown":"But this is not  the way I am doing it, what I am getting is: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: 21","body":"But this is not  the way I am doing it, what I am getting is: org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: 21"},{"owner":{"account_id":4311362,"reputation":132319,"user_id":3522312,"display_name":"ScaisEdge"},"score":0,"creation_date":1468253961,"post_id":38309074,"comment_id":64040021,"body_markdown":"update your question and show the exact code you are using ..please","body":"update your question and show the exact code you are using ..please"},{"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"score":0,"creation_date":1468254032,"post_id":38309074,"comment_id":64040071,"body_markdown":"I replaced the query with your suggestion, and then only I am getting this exception","body":"I replaced the query with your suggestion, and then only I am getting this exception"},{"owner":{"account_id":4311362,"reputation":132319,"user_id":3522312,"display_name":"ScaisEdge"},"score":0,"creation_date":1468254172,"post_id":38309074,"comment_id":64040149,"body_markdown":"please show me the exact code you are using  .. form Query  queryThree  ... until ;","body":"please show me the exact code you are using  .. form Query  queryThree  ... until ;"},{"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"score":0,"creation_date":1468254207,"post_id":38309074,"comment_id":64040165,"body_markdown":"Let us [continue this discussion in chat](http://chat.stackoverflow.com/rooms/117006/discussion-between-shivam-and-scaisedge).","body":"Let us <a href=\"http://chat.stackoverflow.com/rooms/117006/discussion-between-shivam-and-scaisedge\">continue this discussion in chat</a>."},{"owner":{"account_id":4311362,"reputation":132319,"user_id":3522312,"display_name":"ScaisEdge"},"score":1,"creation_date":1468254600,"post_id":38309074,"comment_id":64040376,"body_markdown":"The only alternative is use  of native  sqlQuery .. seems that hybernate don&#39;t suport date_sub ..","body":"The only alternative is use  of native  sqlQuery .. seems that hybernate don&#39;t suport date_sub .."}],"tags":[],"owner":{"account_id":4311362,"reputation":132319,"user_id":3522312,"display_name":"ScaisEdge"},"comment_count":8,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1572100434,"creation_date":1468246135,"answer_id":38309074,"question_id":38309016,"body_markdown":"You can use date_Sub in a **native SQL** query (not a HQL query!):\r\n\r\n\r\n     &quot;from Users where createdDate =   DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )&quot; ","title":"How to Subtract number of days from current date in HQL query","body":"<p>You can use date_Sub in a <strong>native SQL</strong> query (not a HQL query!):</p>\n\n<pre><code> \"from Users where createdDate =   DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )\" \n</code></pre>\n"},{"tags":[],"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1468410629,"creation_date":1468410629,"answer_id":38350940,"question_id":38309016,"body_markdown":"I have solved the issue by using one native SQL query which can get me the exact date.\r\n\r\n    Query sub3Week = session.createSQLQuery(&quot;select DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) ) from dual&quot;);\r\n    List&lt;Date&gt; sub3WeekList = sub3Week.list();\r\nAnd then I use this data in the HQL query like this:\r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = :createdDate&quot;);\r\n    queryThreeWeek.setParameter(&quot;createdDate&quot;, sub3WeekList.get(0).toString());\r\n    List&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();","title":"How to Subtract number of days from current date in HQL query","body":"<p>I have solved the issue by using one native SQL query which can get me the exact date.</p>\n\n<pre><code>Query sub3Week = session.createSQLQuery(\"select DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) ) from dual\");\nList&lt;Date&gt; sub3WeekList = sub3Week.list();\n</code></pre>\n\n<p>And then I use this data in the HQL query like this:</p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = :createdDate\");\nqueryThreeWeek.setParameter(\"createdDate\", sub3WeekList.get(0).toString());\nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12695732,"reputation":3378,"user_id":9224219,"display_name":"Datz"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1572327830,"creation_date":1572327830,"answer_id":58601963,"question_id":38309016,"body_markdown":"The **solution with HQL** is quite simple:\r\n\r\n```\r\n\t\tfinal long time = System.currentTimeMillis() - java.time.Duration.ofDays(21).toMillis();\r\n\t\tfinal javax.persistence.Query query = entityManagerOrSession.createQuery(\r\n\t\t\t\t&quot;SELECT x FROM users x WHERE x.createddate&gt; :time&quot;);\r\n\t\tquery.setParameter(&quot;time&quot;, new java.sql.Timestamp(time));\r\n```","title":"How to Subtract number of days from current date in HQL query","body":"<p>The <strong>solution with HQL</strong> is quite simple:</p>\n\n<pre><code>        final long time = System.currentTimeMillis() - java.time.Duration.ofDays(21).toMillis();\n        final javax.persistence.Query query = entityManagerOrSession.createQuery(\n                \"SELECT x FROM users x WHERE x.createddate&gt; :time\");\n        query.setParameter(\"time\", new java.sql.Timestamp(time));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3572050,"reputation":525,"user_id":2982121,"accept_rate":80,"display_name":"apm"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691247368,"creation_date":1691247368,"answer_id":76842205,"question_id":38309016,"body_markdown":"We can just use `+` and `-` operations with dats in hiebrnate. I was able to get it by using the below conditions.\r\n\r\n**Timestamp:**    `CURRENT_TIMESTAMP+4640000`\r\n\r\nDate:    `CURRENT_DATE+1`","title":"How to Subtract number of days from current date in HQL query","body":"<p>We can just use <code>+</code> and <code>-</code> operations with dats in hiebrnate. I was able to get it by using the below conditions.</p>\n<p><strong>Timestamp:</strong>    <code>CURRENT_TIMESTAMP+4640000</code></p>\n<p>Date:    <code>CURRENT_DATE+1</code></p>\n"}],"owner":{"account_id":7160388,"reputation":649,"user_id":5471333,"accept_rate":44,"display_name":"Shivam"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":23157,"favorite_count":0,"down_vote_count":1,"up_vote_count":10,"accepted_answer_id":38350940,"answer_count":4,"score":9,"last_activity_date":1691247368,"creation_date":1468245955,"question_id":38309016,"body_markdown":"I am using HQL to get the data inserted exact 21 days from now. Here is my Code\r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = CURDATE()-21&quot;);\r\n\tList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\r\nI can not use `createSQLQuery`.\r\nRight now I am not getting any data, but there is data for the date `2016-06-20`. And that is because of the month changed because when I used `CURDATE()-7` I got the correct data of the date `2016-07-04`.\r\nThe calculation for dat is like;\r\n\r\n    2016-07-11 - 7 = 20160704\r\n    2016-07-11 - 21 = 20160690\r\n\r\nI also Tired using `INTERVAL` which is for `native sqlQuery`. Here is my code for using `INTERVAL` in HQL: \r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )&quot;);\r\n    List&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\r\nAlso tried\r\n\r\n    Query queryThreeWeek = session.createQuery(&quot;from Users where createdDate = DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) )&quot;); \r\n    List&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\r\nbut it is giving me exception like: `org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: 21`.\r\n\r\nSo what can I use instead of subtracting the day like this: `CURDATE()-21`? in HQL only","title":"How to Subtract number of days from current date in HQL query","body":"<p>I am using HQL to get the data inserted exact 21 days from now. Here is my Code</p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = CURDATE()-21\");\nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n\n<p>I can not use <code>createSQLQuery</code>.\nRight now I am not getting any data, but there is data for the date <code>2016-06-20</code>. And that is because of the month changed because when I used <code>CURDATE()-7</code> I got the correct data of the date <code>2016-07-04</code>.\nThe calculation for dat is like;</p>\n\n<pre><code>2016-07-11 - 7 = 20160704\n2016-07-11 - 21 = 20160690\n</code></pre>\n\n<p>I also Tired using <code>INTERVAL</code> which is for <code>native sqlQuery</code>. Here is my code for using <code>INTERVAL</code> in HQL: </p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = DATE( DATE_SUB( NOW() , INTERVAL 21 DAY ) )\");\nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n\n<p>Also tried</p>\n\n<pre><code>Query queryThreeWeek = session.createQuery(\"from Users where createdDate = DATE( DATE_SUB( CURDATE() , INTERVAL 21 DAY ) )\"); \nList&lt;Users&gt; userDetailsThreeWeekList = queryThreeWeek.list();\n</code></pre>\n\n<p>but it is giving me exception like: <code>org.hibernate.hql.internal.ast.QuerySyntaxException: unexpected token: 21</code>.</p>\n\n<p>So what can I use instead of subtracting the day like this: <code>CURDATE()-21</code>? in HQL only</p>\n"},{"tags":["java","unit-testing"],"comments":[{"owner":{"account_id":5928013,"reputation":41,"user_id":4663358,"display_name":"wtsolid"},"score":0,"creation_date":1529080128,"post_id":3704747,"comment_id":88761052,"body_markdown":"One way could be found here by customizing the ThreadFactory\nhttps://stackoverflow.com/questions/9280846/how-to-interrupt-executorservices-threads/50879442#50879442","body":"One way could be found here by customizing the ThreadFactory <a href=\"https://stackoverflow.com/questions/9280846/how-to-interrupt-executorservices-threads/50879442#50879442\" title=\"how to interrupt executorservices threads\">stackoverflow.com/questions/9280846/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":145063,"reputation":1004,"user_id":354601,"accept_rate":50,"display_name":"BjornS"},"score":2,"creation_date":1284451085,"post_id":3704786,"comment_id":3909747,"body_markdown":"+1, this is true. Aim for 80-85 and you&#39;ll avoid all the problems like this and still keep your code pretty pristine.","body":"+1, this is true. Aim for 80-85 and you&#39;ll avoid all the problems like this and still keep your code pretty pristine."},{"owner":{"account_id":489116,"reputation":4969,"user_id":1228560,"accept_rate":48,"display_name":"RCross"},"score":3,"creation_date":1363861506,"post_id":3704786,"comment_id":22025081,"body_markdown":"This is quite a brutal solution and could have unexpected side-effects.  For instance, I found that calling Thread.currentThread().interrupt() in one test method would affect all test methods in the same class, causing all the other tests to fail.  I also found that adding this to any test class would cause Sonar to report 0% unit test coverage (haven&#39;t discovered why).","body":"This is quite a brutal solution and could have unexpected side-effects.  For instance, I found that calling Thread.currentThread().interrupt() in one test method would affect all test methods in the same class, causing all the other tests to fail.  I also found that adding this to any test class would cause Sonar to report 0% unit test coverage (haven&#39;t discovered why)."},{"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"score":0,"creation_date":1363883275,"post_id":3704786,"comment_id":22040061,"body_markdown":"Yes, you&#39;d have to be careful where you used it, making sure that the interrupt status will be cleared (as it is here) and that there is no intervening check of the status between your setting and your test&#39;s checking of it.","body":"Yes, you&#39;d have to be careful where you used it, making sure that the interrupt status will be cleared (as it is here) and that there is no intervening check of the status between your setting and your test&#39;s checking of it."},{"owner":{"account_id":42480,"reputation":3435,"user_id":123743,"accept_rate":93,"display_name":"Alex Moore"},"score":0,"creation_date":1477371104,"post_id":3704786,"comment_id":67725871,"body_markdown":"@RCross I just ran into the code coverage issue too, via IntelliJ.  It apparently hates it when you interrupt the thread.","body":"@RCross I just ran into the code coverage issue too, via IntelliJ.  It apparently hates it when you interrupt the thread."}],"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":4,"down_vote_count":0,"up_vote_count":35,"is_accepted":true,"score":35,"last_activity_date":1284415624,"creation_date":1284415624,"answer_id":3704786,"question_id":3704747,"body_markdown":"Right before invoking `addMessage()`, call `Thread.currentThread().interrupt()`. This will set the &quot;interrupt&quot; status flag on the thread. \r\n\r\nIf the interrupted status is set when the call to `put()` is made on a `LinkedBlockingQueue`, an `InterruptedException` will be raised, even if no waiting is required for the `put` (the lock is un-contended).\r\n\r\nBy the way, some efforts to reach 100% coverage are counter-productive and can actually degrade the quality of code.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>Right before invoking <code>addMessage()</code>, call <code>Thread.currentThread().interrupt()</code>. This will set the \"interrupt\" status flag on the thread. </p>\n\n<p>If the interrupted status is set when the call to <code>put()</code> is made on a <code>LinkedBlockingQueue</code>, an <code>InterruptedException</code> will be raised, even if no waiting is required for the <code>put</code> (the lock is un-contended).</p>\n\n<p>By the way, some efforts to reach 100% coverage are counter-productive and can actually degrade the quality of code.</p>\n"},{"comments":[{"owner":{"account_id":7445,"reputation":62274,"user_id":12943,"accept_rate":84,"display_name":"Bill K"},"score":0,"creation_date":1284416933,"post_id":3704813,"comment_id":3907202,"body_markdown":"Absolutely the best way.  Solves many more problems than this as well.","body":"Absolutely the best way.  Solves many more problems than this as well."}],"tags":[],"owner":{"account_id":142896,"reputation":35109,"user_id":350890,"accept_rate":100,"display_name":"Peter Tillemans"},"comment_count":1,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1525193012,"creation_date":1284415944,"answer_id":3704813,"question_id":3704747,"body_markdown":"Use a mocking library like Easymock and inject a mock LinkedBlockingQueue\r\n\r\ni.e.\r\n\r\n    @Test(expected=InterruptedException.class)\r\n    public void testInterruptedException() {\r\n        LinkedBlockingQueue queue = EasyMock.createMock(LinkedBlockingQueue.class);\r\n        ExampleMessage message = new ExampleMessage();\r\n        queue.put(message);\r\n        EasyMock.expectLastCall.andThrow(new InterruptedException()); \r\n        replay(queue);\r\n        someObject.setQueue(queue);\r\n        someObject.addMessage(msg);\r\n    }\r\n","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>Use a mocking library like Easymock and inject a mock LinkedBlockingQueue</p>\n\n<p>i.e.</p>\n\n<pre><code>@Test(expected=InterruptedException.class)\npublic void testInterruptedException() {\n    LinkedBlockingQueue queue = EasyMock.createMock(LinkedBlockingQueue.class);\n    ExampleMessage message = new ExampleMessage();\n    queue.put(message);\n    EasyMock.expectLastCall.andThrow(new InterruptedException()); \n    replay(queue);\n    someObject.setQueue(queue);\n    someObject.addMessage(msg);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5906169,"reputation":10565,"user_id":4647853,"accept_rate":74,"display_name":"Michal Kordas"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1510748085,"creation_date":1432188855,"answer_id":30365862,"question_id":3704747,"body_markdown":"Another option is to delegate dealing with `InterruptedException` to **Guava**&#39;s `Uninterruptibles`, so you don&#39;t need to write and test your custom code for it:\r\n\r\n    import static com.google.common.util.concurrent.Uninterruptibles.putUninterruptibly;\r\n\r\n    private final LinkedBlockingQueue&lt;ExampleMessage&gt; queue;  \r\n\r\n    public void addMessage(ExampleMessage message) {  \r\n        putUninterruptibly(queue, message);\r\n    }\r\n","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>Another option is to delegate dealing with <code>InterruptedException</code> to <strong>Guava</strong>'s <code>Uninterruptibles</code>, so you don't need to write and test your custom code for it:</p>\n\n<pre><code>import static com.google.common.util.concurrent.Uninterruptibles.putUninterruptibly;\n\nprivate final LinkedBlockingQueue&lt;ExampleMessage&gt; queue;  \n\npublic void addMessage(ExampleMessage message) {  \n    putUninterruptibly(queue, message);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5928013,"reputation":41,"user_id":4663358,"display_name":"wtsolid"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529330499,"creation_date":1529080222,"answer_id":50879561,"question_id":3704747,"body_markdown":"One proper way could be customizing/injecting the ThreadFactory for the executorservice and from within the thread factory, you got the handle of the thread created, then you can schedule some task to interrupt the thread being interested.\r\n\r\nDemo code part for the overwrited method &quot;newThread&quot; in ThreadFactory:\r\n\r\n    ThreadFactory customThreadfactory new ThreadFactory() {\r\n    \r\n                public Thread newThread(Runnable runnable) {\r\n                    final Thread thread = new Thread(runnable);\r\n                    if (namePrefix != null) {\r\n                        thread.setName(namePrefix + &quot;-&quot; + count.getAndIncrement());\r\n                    }\r\n                    if (daemon != null) {\r\n                        thread.setDaemon(daemon);\r\n                    }\r\n                    if (priority != null) {\r\n                        thread.setPriority(priority);\r\n                    }\r\n    \r\n                    scheduledExecutorService.schedule(new Callable&lt;String&gt;() {\r\n                        public String call() throws Exception {\r\n                            System.out.println(&quot;Executed!&quot;);\r\n                            thread.interrupt();\r\n                            return &quot;Called!&quot;;\r\n    \r\n                        }\r\n                    },\r\n                    5,\r\n                    TimeUnit.SECONDS);\r\n    \r\n                    return thread;\r\n                }\r\n            }\r\n\r\nThen you can use below to construct your executorservice instance:\r\n\r\n    ExecutorService executorService = Executors.newFixedThreadPool(3,\r\n            customThreadfactory);\r\n\r\nThen after 5 seconds, an interrupt signal will be sent to the threads in a way each thread will be interrupted once in executorservice.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>One proper way could be customizing/injecting the ThreadFactory for the executorservice and from within the thread factory, you got the handle of the thread created, then you can schedule some task to interrupt the thread being interested.</p>\n\n<p>Demo code part for the overwrited method \"newThread\" in ThreadFactory:</p>\n\n<pre><code>ThreadFactory customThreadfactory new ThreadFactory() {\n\n            public Thread newThread(Runnable runnable) {\n                final Thread thread = new Thread(runnable);\n                if (namePrefix != null) {\n                    thread.setName(namePrefix + \"-\" + count.getAndIncrement());\n                }\n                if (daemon != null) {\n                    thread.setDaemon(daemon);\n                }\n                if (priority != null) {\n                    thread.setPriority(priority);\n                }\n\n                scheduledExecutorService.schedule(new Callable&lt;String&gt;() {\n                    public String call() throws Exception {\n                        System.out.println(\"Executed!\");\n                        thread.interrupt();\n                        return \"Called!\";\n\n                    }\n                },\n                5,\n                TimeUnit.SECONDS);\n\n                return thread;\n            }\n        }\n</code></pre>\n\n<p>Then you can use below to construct your executorservice instance:</p>\n\n<pre><code>ExecutorService executorService = Executors.newFixedThreadPool(3,\n        customThreadfactory);\n</code></pre>\n\n<p>Then after 5 seconds, an interrupt signal will be sent to the threads in a way each thread will be interrupted once in executorservice.</p>\n"},{"tags":[],"owner":{"account_id":5416976,"reputation":441,"user_id":4311867,"display_name":"ixi"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":false,"score":9,"last_activity_date":1536307568,"creation_date":1536307568,"answer_id":52218098,"question_id":3704747,"body_markdown":"As stated above just make use `Thread.currentThread().interrupt()` if you caught `InterruptedException` and isn&#39;t going to rethrow it.\r\n\r\nAs for the unit testing. Test this way: `Assertions.assertThat(Thread.interrupted()).isTrue();`. It both checks that the thread was interrupted and clears the interruption flag so that it won&#39;t break other test, code coverage or anything below.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>As stated above just make use <code>Thread.currentThread().interrupt()</code> if you caught <code>InterruptedException</code> and isn't going to rethrow it.</p>\n\n<p>As for the unit testing. Test this way: <code>Assertions.assertThat(Thread.interrupted()).isTrue();</code>. It both checks that the thread was interrupted and clears the interruption flag so that it won't break other test, code coverage or anything below.</p>\n"},{"tags":[],"owner":{"account_id":3533121,"reputation":1545,"user_id":2952093,"accept_rate":88,"display_name":"kap"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1608554040,"creation_date":1608554040,"answer_id":65392868,"question_id":3704747,"body_markdown":"The example code in the question may be testable by calling `Thread.currentThread().interrupt()`. However, besides the mentioned problems various methods reset the `interrupted` flag. An extensive list is for example here: https://stackoverflow.com/a/12339487/2952093. There may be other methods as well.\r\n\r\nAssuming waiting implemented as follows should be tested:\r\n\r\n    try {\r\n      TimeUnit.SECONDS.sleep(10);\r\n    } catch (InterruptedException ex) {\r\n        // Set the interrupt flag, this is best practice for library code\r\n        Thread.currentThread().interrupt();\r\n        throw new RuntimeException(ex);\r\n    }\r\n\r\nA call to `Thread.sleep` itself clears the `interrupted` flag, so it cannot be set in advance. It can be tested using its own test thread as follows:\r\n\r\n    AtomicBoolean threadInterrupted = new AtomicBoolean(false);\r\n    Runnable toBeInterrupted = () -&gt; {\r\n        try {\r\n            methodUnderTest();\r\n        } catch (RuntimeException unused) {\r\n            // Expected exception\r\n            threadInterrupted.set(true);\r\n        }\r\n    };\r\n\r\n    // Execute the in an operation test thread\r\n    Thread testThread = new Thread(toBeInterrupted);\r\n    testThread.start();\r\n\r\n    // When the test thread is waiting, interrupt\r\n    while (!threadInterrupted.get()) {\r\n        if (testThread.getState() == Thread.State.TIMED_WAITING) {\r\n            testThread.interrupt();\r\n        }\r\n    }\r\n\r\n    // Assert that the interrupted state is re-set after catching the exception\r\n    // Must be happening before thread is joined, as this will clear the flag\r\n    assertThat(testThread.isInterrupted(), is(true));\r\n    testThread.join();","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>The example code in the question may be testable by calling <code>Thread.currentThread().interrupt()</code>. However, besides the mentioned problems various methods reset the <code>interrupted</code> flag. An extensive list is for example here: <a href=\"https://stackoverflow.com/a/12339487/2952093\">https://stackoverflow.com/a/12339487/2952093</a>. There may be other methods as well.</p>\n<p>Assuming waiting implemented as follows should be tested:</p>\n<pre><code>try {\n  TimeUnit.SECONDS.sleep(10);\n} catch (InterruptedException ex) {\n    // Set the interrupt flag, this is best practice for library code\n    Thread.currentThread().interrupt();\n    throw new RuntimeException(ex);\n}\n</code></pre>\n<p>A call to <code>Thread.sleep</code> itself clears the <code>interrupted</code> flag, so it cannot be set in advance. It can be tested using its own test thread as follows:</p>\n<pre><code>AtomicBoolean threadInterrupted = new AtomicBoolean(false);\nRunnable toBeInterrupted = () -&gt; {\n    try {\n        methodUnderTest();\n    } catch (RuntimeException unused) {\n        // Expected exception\n        threadInterrupted.set(true);\n    }\n};\n\n// Execute the in an operation test thread\nThread testThread = new Thread(toBeInterrupted);\ntestThread.start();\n\n// When the test thread is waiting, interrupt\nwhile (!threadInterrupted.get()) {\n    if (testThread.getState() == Thread.State.TIMED_WAITING) {\n        testThread.interrupt();\n    }\n}\n\n// Assert that the interrupted state is re-set after catching the exception\n// Must be happening before thread is joined, as this will clear the flag\nassertThat(testThread.isInterrupted(), is(true));\ntestThread.join();\n</code></pre>\n"},{"tags":[],"owner":{"account_id":87230,"reputation":36826,"user_id":242042,"accept_rate":57,"display_name":"Archimedes Trajano"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691245667,"creation_date":1691245667,"answer_id":76842093,"question_id":3704747,"body_markdown":"To expand on @ixi&#39;s answer here&#39;s a code example.\r\nThe purpose of the test is to ensure correct implementation of the `InterruptedException` handling on code that is not able to rethrow `InterruptedException`.\r\n\r\n\r\nThis is assuming that the code in the OP was done correctly.  In which case the corrected code would be:\r\n\r\n```java\r\n@RequiredArgsConstructor\r\n@Slf4j\r\nclass SomeClass {\r\n  private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \r\n\r\n  public void addMessage(ExampleMessage hm) {  \r\n    if (hm!=null){\r\n      try {\r\n        m_Queue.put(hm);\r\n      } catch (InterruptedException e) {\r\n        Thread.currentThread().interrupt();\r\n        log.warn(&quot;Thread interrupted&quot;, e);\r\n      }\r\n    }\r\n  }\r\n}\r\n```\r\n\r\nThe test would be\r\n\r\n```java\r\n@Test\r\npublic void testInterruptedException() throws Exception {\r\n  @SuppressWarnings(&quot;unchecked&quot;)\r\n  final LinkedBlockingQueue&lt;ExampleMessage&gt; queue = \r\n    spy(LinkedBlockingQueue.class);\r\n\r\n  doThrow(InterruptedException.class)\r\n    .when(queue)\r\n    .put(any(ExampleMessage.class));\r\n\r\n  queue.put(mock(ExampleMessage.class));\r\n  \r\n  assertThat(Thread.interrupted())\r\n   .isTrue();\r\n\r\n}\r\n```\r\n\r\nAs I noted earlier, a test like this guards your implementation so that you ensure correct implementation of the `InterruptedException` handling.","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>To expand on @ixi's answer here's a code example.\nThe purpose of the test is to ensure correct implementation of the <code>InterruptedException</code> handling on code that is not able to rethrow <code>InterruptedException</code>.</p>\n<p>This is assuming that the code in the OP was done correctly.  In which case the corrected code would be:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequiredArgsConstructor\n@Slf4j\nclass SomeClass {\n  private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \n\n  public void addMessage(ExampleMessage hm) {  \n    if (hm!=null){\n      try {\n        m_Queue.put(hm);\n      } catch (InterruptedException e) {\n        Thread.currentThread().interrupt();\n        log.warn(&quot;Thread interrupted&quot;, e);\n      }\n    }\n  }\n}\n</code></pre>\n<p>The test would be</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\npublic void testInterruptedException() throws Exception {\n  @SuppressWarnings(&quot;unchecked&quot;)\n  final LinkedBlockingQueue&lt;ExampleMessage&gt; queue = \n    spy(LinkedBlockingQueue.class);\n\n  doThrow(InterruptedException.class)\n    .when(queue)\n    .put(any(ExampleMessage.class));\n\n  queue.put(mock(ExampleMessage.class));\n  \n  assertThat(Thread.interrupted())\n   .isTrue();\n\n}\n</code></pre>\n<p>As I noted earlier, a test like this guards your implementation so that you ensure correct implementation of the <code>InterruptedException</code> handling.</p>\n"}],"owner":{"account_id":22942,"reputation":1336,"user_id":57089,"accept_rate":100,"display_name":"HipsterZipster"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36644,"favorite_count":0,"down_vote_count":0,"up_vote_count":27,"accepted_answer_id":3704786,"answer_count":7,"score":27,"last_activity_date":1691245667,"creation_date":1284415224,"question_id":3704747,"body_markdown":"In attempts of 100% code coverage, I came across a situation where I need to unit test block of code that catches an `InterruptedException`. How does one correctly unit test this? (JUnit 4 syntax please)\r\n\r\n\r\n    private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \r\n\r\n    public void addMessage(ExampleMessage hm) {  \r\n  \t    if( hm!=null){\r\n\t        try {\r\n\t\t        m_Queue.put(hm);\r\n\t\t    } catch (InterruptedException e) {\r\n\t\t        e.printStackTrace();\r\n\t\t    }\r\n        }\r\n    }\r\n\r\n","title":"How to write unit test for &quot;InterruptedException&quot;","body":"<p>In attempts of 100% code coverage, I came across a situation where I need to unit test block of code that catches an <code>InterruptedException</code>. How does one correctly unit test this? (JUnit 4 syntax please)</p>\n\n<pre><code>private final LinkedBlockingQueue&lt;ExampleMessage&gt; m_Queue;  \n\npublic void addMessage(ExampleMessage hm) {  \n    if( hm!=null){\n        try {\n            m_Queue.put(hm);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","http","angular6","httpclient"],"comments":[{"owner":{"account_id":58650,"reputation":3399,"user_id":175554,"accept_rate":40,"display_name":"ozkanpakdil"},"score":0,"creation_date":1691526952,"post_id":76842077,"comment_id":135503103,"body_markdown":"the logs shows that there are 2 requests, and there is 53 seconds between them, I think this is coming from outside, you can enable request log https://stackoverflow.com/a/43155103/175554 and see.","body":"the logs shows that there are 2 requests, and there is 53 seconds between them, I think this is coming from outside, you can enable request log <a href=\"https://stackoverflow.com/a/43155103/175554\">stackoverflow.com/a/43155103/175554</a> and see."}],"owner":{"account_id":29166148,"reputation":11,"user_id":22343685,"display_name":"ADKL"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":14,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691245397,"creation_date":1691245397,"question_id":76842077,"body_markdown":"I have an microservice application where we use \r\n- Angular 6 (Client)\r\n- Java 8 (Server)\r\n- PostgreSQL (DB)\r\nThe network tab on devtools shows single entry, so I added logs at each level (Filter, Controller, Ps). The log4j logs shows multiple threads created for accessing same query/function, hence delaying the response time.\r\nDoes anyone have any idea?\r\n\r\n[logs](https://i.stack.imgur.com/2nVJJ.png)\r\n\r\nI have tried with adding shareReplay() to the http service to always have single network call  but it is not feasible for me as user can trigger the same nw call again and in that case it won&#39;t work.\r\n\r\nAlso checked my Filter configuration in spring boot, there does not seem any issue as the filter is annotated with @Component and no other extra configuration logic is applied there.\r\n\r\nThere is no multiple subscriptions of the observable that calls the http network call as the UI is blocked until the user gets response from the DB.","title":"Sporadic: REST service gets triggered multiple times even if in DevTools the network call is triggered only once","body":"<p>I have an microservice application where we use</p>\n<ul>\n<li>Angular 6 (Client)</li>\n<li>Java 8 (Server)</li>\n<li>PostgreSQL (DB)\nThe network tab on devtools shows single entry, so I added logs at each level (Filter, Controller, Ps). The log4j logs shows multiple threads created for accessing same query/function, hence delaying the response time.\nDoes anyone have any idea?</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/2nVJJ.png\" rel=\"nofollow noreferrer\">logs</a></p>\n<p>I have tried with adding shareReplay() to the http service to always have single network call  but it is not feasible for me as user can trigger the same nw call again and in that case it won't work.</p>\n<p>Also checked my Filter configuration in spring boot, there does not seem any issue as the filter is annotated with @Component and no other extra configuration logic is applied there.</p>\n<p>There is no multiple subscriptions of the observable that calls the http network call as the UI is blocked until the user gets response from the DB.</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691241689,"post_id":76841832,"comment_id":135467154,"body_markdown":"&quot;*I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface*&quot; - Afaik, this is a feature of `spring-data-jpa`, not hibernate itself.","body":"&quot;<i>I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface</i>&quot; - Afaik, this is a feature of <code>spring-data-jpa</code>, not hibernate itself."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691241886,"post_id":76841832,"comment_id":135467171,"body_markdown":"Are you using `spring-data-jpa`&#39;s `CrudRepository` or `JpaRepository`? If so, you could try adding `List&lt;Notification&gt; findByRoleId(long roleId);` (not sure if it works, but I vaguely remember doing something like this in the poast).","body":"Are you using <code>spring-data-jpa</code>&#39;s <code>CrudRepository</code> or <code>JpaRepository</code>? If so, you could try adding <code>List&lt;Notification&gt; findByRoleId(long roleId);</code> (not sure if it works, but I vaguely remember doing something like this in the poast)."},{"owner":{"account_id":21831314,"reputation":1,"user_id":18754015,"display_name":"Mohammad"},"score":0,"creation_date":1691242500,"post_id":76841832,"comment_id":135467237,"body_markdown":"I&#39;m using spring-data-jpa but just using Repository interface (not JpaRepository or CrudRepositry). I will try","body":"I&#39;m using spring-data-jpa but just using Repository interface (not JpaRepository or CrudRepositry). I will try"}],"answers":[{"comments":[{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1691252980,"post_id":76842043,"comment_id":135468352,"body_markdown":"Everytime you post an answer I learn something new :). Didn&#39;t know that I can chain `where` this way in JPA, many thanks for your always handsome tips.","body":"Everytime you post an answer I learn something new :). Didn&#39;t know that I can chain <code>where</code> this way in JPA, many thanks for your always handsome tips."}],"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691244779,"creation_date":1691244779,"answer_id":76842043,"question_id":76841832,"body_markdown":"Assuming you have a Role entity like this:\r\n```\r\n@Entity\r\npublic class Role {\r\n    private String role;\r\n\r\n\\\\ id and some other fields.\r\n\r\n}\r\n```\r\nTo fetch all notifications that contain a specific role in their roles list you just need to define a method in the JpaRepository like this:\r\n```\r\npublic interface NotificationRepository extends JpaRepository&lt;Notification, Long&gt; {\r\n    List&lt;Notification&gt; findByRolesRole(String role);\r\n}\r\n```\r\nAnd call the method in your service like this:\r\n```\r\n@Autowired\r\nNotificationRepository notificationRepository;\r\n\r\nList&lt;Notification&gt; adminNotifications = notificationRepository.findByRolesRole(&quot;admin&quot;);\r\n```","title":"How to get all entities in database using hibernate with a critria?","body":"<p>Assuming you have a Role entity like this:</p>\n<pre><code>@Entity\npublic class Role {\n    private String role;\n\n\\\\ id and some other fields.\n\n}\n</code></pre>\n<p>To fetch all notifications that contain a specific role in their roles list you just need to define a method in the JpaRepository like this:</p>\n<pre><code>public interface NotificationRepository extends JpaRepository&lt;Notification, Long&gt; {\n    List&lt;Notification&gt; findByRolesRole(String role);\n}\n</code></pre>\n<p>And call the method in your service like this:</p>\n<pre><code>@Autowired\nNotificationRepository notificationRepository;\n\nList&lt;Notification&gt; adminNotifications = notificationRepository.findByRolesRole(&quot;admin&quot;);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691244939,"creation_date":1691244939,"answer_id":76842053,"question_id":76841832,"body_markdown":"Multiple ways to consider there, let&#39;s try to breakdown each:\r\n\r\n### Using JPQL\r\n\r\n```java\r\n@Query(&quot;SELECT n FROM Notification n JOIN n.roles r WHERE r.name = :roleName&quot;)\r\nList&lt;Notification&gt; findNotificationsByRoleName(@Param(&quot;roleName&quot;) String roleName);\r\n```\r\n### Using Spring Data JPA method naming\r\n\r\n```java\r\nList&lt;Notification&gt; findByRolesName(String roleName);\r\n```\r\n\r\n### Using the Criteria API\r\n\r\n(more verbose and programmatic approach to construct queries)\r\n\r\n```java\r\nCriteriaBuilder cb = entityManager.getCriteriaBuilder();\r\nCriteriaQuery&lt;Notification&gt; cq = cb.createQuery(Notification.class);\r\nRoot&lt;Notification&gt; notificationRoot = cq.from(Notification.class);\r\nJoin&lt;Notification, Role&gt; roleJoin = notificationRoot.join(&quot;roles&quot;);\r\n\r\nPredicate roleNamePredicate = cb.equal(roleJoin.get(&quot;name&quot;), &quot;admin&quot;);\r\ncq.where(roleNamePredicate);\r\n\r\nTypedQuery&lt;Notification&gt; query = entityManager.createQuery(cq);\r\nList&lt;Notification&gt; notifications = query.getResultList();\r\n```\r\n\r\nBasically, you may choose any. If you prefer a bit more declarative approach and simplicity, then the first two methods are recommended. If you need a dynamic and programmatic approach, then the Criteria API would be the choice","title":"How to get all entities in database using hibernate with a critria?","body":"<p>Multiple ways to consider there, let's try to breakdown each:</p>\n<h3>Using JPQL</h3>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;SELECT n FROM Notification n JOIN n.roles r WHERE r.name = :roleName&quot;)\nList&lt;Notification&gt; findNotificationsByRoleName(@Param(&quot;roleName&quot;) String roleName);\n</code></pre>\n<h3>Using Spring Data JPA method naming</h3>\n<pre class=\"lang-java prettyprint-override\"><code>List&lt;Notification&gt; findByRolesName(String roleName);\n</code></pre>\n<h3>Using the Criteria API</h3>\n<p>(more verbose and programmatic approach to construct queries)</p>\n<pre class=\"lang-java prettyprint-override\"><code>CriteriaBuilder cb = entityManager.getCriteriaBuilder();\nCriteriaQuery&lt;Notification&gt; cq = cb.createQuery(Notification.class);\nRoot&lt;Notification&gt; notificationRoot = cq.from(Notification.class);\nJoin&lt;Notification, Role&gt; roleJoin = notificationRoot.join(&quot;roles&quot;);\n\nPredicate roleNamePredicate = cb.equal(roleJoin.get(&quot;name&quot;), &quot;admin&quot;);\ncq.where(roleNamePredicate);\n\nTypedQuery&lt;Notification&gt; query = entityManager.createQuery(cq);\nList&lt;Notification&gt; notifications = query.getResultList();\n</code></pre>\n<p>Basically, you may choose any. If you prefer a bit more declarative approach and simplicity, then the first two methods are recommended. If you need a dynamic and programmatic approach, then the Criteria API would be the choice</p>\n"}],"owner":{"account_id":21831314,"reputation":1,"user_id":18754015,"display_name":"Mohammad"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691244939,"creation_date":1691241403,"question_id":76841832,"body_markdown":"I am writing an springBoot application and have 3 classes :\r\n\r\n    @Table(name = &quot;notification&quot;)\r\n    public class Notification{\r\n      \r\n      @Id\r\n      @Column(&quot;notification_id&quot;)\r\n      // generateStrategy\r\n      long id;\r\n\r\n      @ManyToMany\r\n      List&lt;Role&gt; roles;\r\n      \r\n      @ManyToMany \r\n      List&lt;User&gt; users;\r\n    }\r\n\r\n\r\nanother class :\r\n\r\n    public class Role{\r\n\r\n    \\\\ id and some other fields.\r\n\r\n    }\r\n\r\nthe User class is the same. The relation between Notification and Role is unidirectional.(also true for notification and user)\r\n\r\n\r\nNow, I&#39;m using hibernate to persist data in database.\r\n\r\nmy question is how can I retrieve all Notification which has a given role ? for example I have an &quot;admin&quot; role(which is an object!) and I want to find all notification that contain &quot;admin&quot; in their &quot;roles&quot; list.\r\n\r\n\r\nIs it possible to write just by Hibernate Itself ?(I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface).\r\n\r\nif it is not possible, how can I write an efficient SQL query manually? ","title":"How to get all entities in database using hibernate with a critria?","body":"<p>I am writing an springBoot application and have 3 classes :</p>\n<pre><code>@Table(name = &quot;notification&quot;)\npublic class Notification{\n  \n  @Id\n  @Column(&quot;notification_id&quot;)\n  // generateStrategy\n  long id;\n\n  @ManyToMany\n  List&lt;Role&gt; roles;\n  \n  @ManyToMany \n  List&lt;User&gt; users;\n}\n</code></pre>\n<p>another class :</p>\n<pre><code>public class Role{\n\n\\\\ id and some other fields.\n\n}\n</code></pre>\n<p>the User class is the same. The relation between Notification and Role is unidirectional.(also true for notification and user)</p>\n<p>Now, I'm using hibernate to persist data in database.</p>\n<p>my question is how can I retrieve all Notification which has a given role ? for example I have an &quot;admin&quot; role(which is an object!) and I want to find all notification that contain &quot;admin&quot; in their &quot;roles&quot; list.</p>\n<p>Is it possible to write just by Hibernate Itself ?(I know that hibernate is capable of generating sql code when we write functions names in specific format in our database interface).</p>\n<p>if it is not possible, how can I write an efficient SQL query manually?</p>\n"},{"tags":["java","date","calendar","timezone"],"comments":[{"owner":{"account_id":45934,"reputation":203679,"user_id":135589,"accept_rate":100,"display_name":"Jesper"},"score":0,"creation_date":1687770322,"post_id":76554980,"comment_id":134977841,"body_markdown":"You forgot to format the result of `calendar.getTime()` with the `SimpleDateFormat`. Change your last line to: `System.out.println(simpleDateFormat.format(calendar.getTime()));`. Better: Do not use the old `java.util.Date` and `java.util.Calendar` classes anymore; use the classes from the package `java.time`.","body":"You forgot to format the result of <code>calendar.getTime()</code> with the <code>SimpleDateFormat</code>. Change your last line to: <code>System.out.println(simpleDateFormat.format(calendar.getTime(&zwnj;&#8203;)));</code>. Better: Do not use the old <code>java.util.Date</code> and <code>java.util.Calendar</code> classes anymore; use the classes from the package <code>java.time</code>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691244720,"post_id":76554980,"comment_id":135467419,"body_markdown":"I strongly recommend that you donât use `Date`, `Calendar` and `SimpleDateFormat`. All of those classes were poorly designed, the last in particular notoriously troublesome, and all are long outdated. Use `Instant` and/or other classes from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html). If you indispensbly need a `Date` for an API that you cannot afford to upgrade just now, use `Date.from(Instant.now().plus(Duration.ofHours(1)))`. The `Date` will always print in the local time zone of your JVM, though, nothing we can do about that.","body":"I strongly recommend that you donât use <code>Date</code>, <code>Calendar</code> and <code>SimpleDateFormat</code>. All of those classes were poorly designed, the last in particular notoriously troublesome, and all are long outdated. Use <code>Instant</code> and/or other classes from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. If you indispensbly need a <code>Date</code> for an API that you cannot afford to upgrade just now, use <code>Date.from(Instant.now().plus(Duration.ofHours(1)))</code>. The <code>Date</code> will always print in the local time zone of your JVM, though, nothing we can do about that."}],"answers":[{"comments":[{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1687776357,"post_id":76555241,"comment_id":134979070,"body_markdown":"@NiharikaBaruah - please be aware that using `withZoneSameLocal` will return the local time plus one hour (with UTC), instead of the actual UTC time plus one hour. As example for 16:00 local time (10:30 UTC), it will return `17:00 UTC`, which is 6:30 hours in advance. You can use `withZoneSameInstant` to get the next hour in UTC ( e.g. `11:30 UTC` for above example, that is actual time 16:00 (10:30 UTC) - Not sure what the requirements are","body":"@NiharikaBaruah - please be aware that using <code>withZoneSameLocal</code> will return the local time plus one hour (with UTC), instead of the actual UTC time plus one hour. As example for 16:00 local time (10:30 UTC), it will return <code>17:00 UTC</code>, which is 6:30 hours in advance. You can use <code>withZoneSameInstant</code> to get the next hour in UTC ( e.g. <code>11:30 UTC</code> for above example, that is actual time 16:00 (10:30 UTC) - Not sure what the requirements are"},{"owner":{"account_id":28272340,"reputation":11,"user_id":21615324,"display_name":"Niharika Baruah"},"score":0,"creation_date":1687784437,"post_id":76555241,"comment_id":134980751,"body_markdown":"@tquadrat Thanks using ZonedTimeDate worked. But I am getting the value as a string, I need the final result in Date format for an API implementation. But if I do &quot;Date date =new Date(dateOfDeletion)&quot; it loses the changes made by ZonedTimeDate. How to convert this &quot;dateOfDeletion&quot; into date format?","body":"@tquadrat Thanks using ZonedTimeDate worked. But I am getting the value as a string, I need the final result in Date format for an API implementation. But if I do &quot;Date date =new Date(dateOfDeletion)&quot; it loses the changes made by ZonedTimeDate. How to convert this &quot;dateOfDeletion&quot; into date format?"},{"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"score":1,"creation_date":1687788817,"post_id":76555241,"comment_id":134981788,"body_markdown":"@NiharikaBaruah â As said: `java.util.Date` does not have a timezone component. Instead it uses internally the milliseconds since the begin of the epoch, and when converted to a string, it uses the current timezone â no matter of useful or not.","body":"@NiharikaBaruah â As said: <code>java.util.Date</code> does not have a timezone component. Instead it uses internally the milliseconds since the begin of the epoch, and when converted to a string, it uses the current timezone â no matter of useful or not."}],"tags":[],"owner":{"account_id":1692034,"reputation":3196,"user_id":1554195,"display_name":"tquadrat"},"comment_count":3,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1687790474,"creation_date":1687770779,"answer_id":76555241,"question_id":76554980,"body_markdown":"Try `ZonedTimeDate`:\r\n\r\n```Java\r\nfinal var dateOfDeletion = ZonedDateTime.now()\r\n  .plusHours( 1 )\r\n  .withZoneSameInstant( ZoneId.of( &quot;UTC&quot; ) );\r\n```\r\n\r\n`now()` gives you the current time, `plusHours()` moves that by the given number of hours, and `withZoneSameInstant()` changes the time zone, by keeping the time (the instant).\r\n\r\nOriginally, I used `withZoneSameLocal()`, but that just replaces the original time zone with the given one, without adjusting the time (the instant); in most cases this is not what you want.\r\n\r\nIf you really need an instance of `java.util.Date` you can convert `dateOfDeletion`, but that means you will lose the time zone again.\r\n\r\nIf you just need the date as a string, `dateOfDeletion.toString()` already does the job for an ISO 8601 format. Other formats are possible through a `DateTimeFormatter` instance.\r\n\r\nRefer to the [documentation of the `java.time` package][1].\r\n\r\n---\r\n\r\nFrom the comments, I understood that the PO just want to have a `java.util.Date` adjusted by one hour, provided in UTC.\r\n\r\nInternally, an instance of `java.util.Date` is just a thin wrapper around a `long` representing the milliseconds since the begin of the epoch (1970-01-01T00:00:00.000 UTC). So `Date::getTime` returns this time, already for UTC. To get the adjusted `Date` instance, try this:\r\n\r\n```Java\r\nfinal var dateOfDeletion = new Date( new Date().getTime() + 3_600_000 );\r\n```\r\n\r\nBut printing a `Date` instance with a time zone other than the default one is a challenge â¦\r\n\r\nYou can convert it to a `Calendar` instance and print that:\r\n\r\n```Java\r\nfinal var calendar = Calendar.getInstance( TimeZone.getTimeZone( &quot;UTC&quot; ) );\r\ncalendar.setTime( dateOfDeletion );\r\nSystem.out.printf(&quot;%tDT%&lt;tT %&lt;tZ%n&quot;, calendar );\r\n```\r\n\r\nBut still your `Date` has no time zone â¦\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/package-summary.html","title":"How to add an hour and set the timezone to &quot;UTC&quot; in java?","body":"<p>Try <code>ZonedTimeDate</code>:</p>\n<pre><code>final var dateOfDeletion = ZonedDateTime.now()\n  .plusHours( 1 )\n  .withZoneSameInstant( ZoneId.of( &quot;UTC&quot; ) );\n</code></pre>\n<p><code>now()</code> gives you the current time, <code>plusHours()</code> moves that by the given number of hours, and <code>withZoneSameInstant()</code> changes the time zone, by keeping the time (the instant).</p>\n<p>Originally, I used <code>withZoneSameLocal()</code>, but that just replaces the original time zone with the given one, without adjusting the time (the instant); in most cases this is not what you want.</p>\n<p>If you really need an instance of <code>java.util.Date</code> you can convert <code>dateOfDeletion</code>, but that means you will lose the time zone again.</p>\n<p>If you just need the date as a string, <code>dateOfDeletion.toString()</code> already does the job for an ISO 8601 format. Other formats are possible through a <code>DateTimeFormatter</code> instance.</p>\n<p>Refer to the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">documentation of the <code>java.time</code> package</a>.</p>\n<hr />\n<p>From the comments, I understood that the PO just want to have a <code>java.util.Date</code> adjusted by one hour, provided in UTC.</p>\n<p>Internally, an instance of <code>java.util.Date</code> is just a thin wrapper around a <code>long</code> representing the milliseconds since the begin of the epoch (1970-01-01T00:00:00.000 UTC). So <code>Date::getTime</code> returns this time, already for UTC. To get the adjusted <code>Date</code> instance, try this:</p>\n<pre><code>final var dateOfDeletion = new Date( new Date().getTime() + 3_600_000 );\n</code></pre>\n<p>But printing a <code>Date</code> instance with a time zone other than the default one is a challenge â¦</p>\n<p>You can convert it to a <code>Calendar</code> instance and print that:</p>\n<pre><code>final var calendar = Calendar.getInstance( TimeZone.getTimeZone( &quot;UTC&quot; ) );\ncalendar.setTime( dateOfDeletion );\nSystem.out.printf(&quot;%tDT%&lt;tT %&lt;tZ%n&quot;, calendar );\n</code></pre>\n<p>But still your <code>Date</code> has no time zone â¦</p>\n"}],"owner":{"account_id":28272340,"reputation":11,"user_id":21615324,"display_name":"Niharika Baruah"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":194,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"closed_date":1691244760,"answer_count":1,"score":1,"last_activity_date":1691244906,"creation_date":1687768863,"question_id":76554980,"body_markdown":"I want to increment an hour to the current time and also get the date in UTC. I tried to use Calender class but that only increments the hour but doesn&#39;t give the Date in UTC timezone, on the other hand, SimpleDateFormat sets the timezone but doesn&#39;t increment an hour. How to do it?\r\n\r\n```Java\r\npublic static void main(String[] args) \r\n{\r\n  Date currentDate = new Date();\r\n\r\n  Calendar calendar = Calendar.getInstance();\r\n  calendar.add(Calendar.HOUR, 1);\r\n  calendar.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n\r\n  SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEE MMM d HH:mm:ss z yyyy&quot;);\r\n  simpleDateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\r\n  simpleDateFormat.format(calendar.get(Calendar.HOUR));\r\n\r\n  String dateOfDeletion = simpleDateFormat.format(new Date()).toString();\r\n  System.out.println(currentDate) ;\r\n  System.out.println(dateOfDeletion);\r\n  System.out.print(calendar.getTime());\r\n}\r\n```\r\n\r\nOutput:\r\n\r\nMon Jun 26 14:05:56 IST 2023  \r\nMon Jun 26 08:35:56 UTC 2023  \r\nMon Jun 26 15:05:56 IST 2023\r\n\r\n\r\nI want the date to be in UTC with 1 hour incremented from the current time.","title":"How to add an hour and set the timezone to &quot;UTC&quot; in java?","body":"<p>I want to increment an hour to the current time and also get the date in UTC. I tried to use Calender class but that only increments the hour but doesn't give the Date in UTC timezone, on the other hand, SimpleDateFormat sets the timezone but doesn't increment an hour. How to do it?</p>\n<pre><code>public static void main(String[] args) \n{\n  Date currentDate = new Date();\n\n  Calendar calendar = Calendar.getInstance();\n  calendar.add(Calendar.HOUR, 1);\n  calendar.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n\n  SimpleDateFormat simpleDateFormat = new SimpleDateFormat(&quot;EEE MMM d HH:mm:ss z yyyy&quot;);\n  simpleDateFormat.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n  simpleDateFormat.format(calendar.get(Calendar.HOUR));\n\n  String dateOfDeletion = simpleDateFormat.format(new Date()).toString();\n  System.out.println(currentDate) ;\n  System.out.println(dateOfDeletion);\n  System.out.print(calendar.getTime());\n}\n</code></pre>\n<p>Output:</p>\n<p>Mon Jun 26 14:05:56 IST 2023<br />\nMon Jun 26 08:35:56 UTC 2023<br />\nMon Jun 26 15:05:56 IST 2023</p>\n<p>I want the date to be in UTC with 1 hour incremented from the current time.</p>\n"},{"tags":["java","spring","transactional"],"comments":[{"owner":{"account_id":12339808,"reputation":363,"user_id":9003441,"display_name":"Charis Moutafidis"},"score":0,"creation_date":1554828841,"post_id":55597661,"comment_id":97891898,"body_markdown":"What you need to do is to sync your function, so the execution of the first call blocks the execution of the second. Although, this is totally not efficient. Maybe what you need to do is prevent the function from being called twice.","body":"What you need to do is to sync your function, so the execution of the first call blocks the execution of the second. Although, this is totally not efficient. Maybe what you need to do is prevent the function from being called twice."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":3,"creation_date":1554831833,"post_id":55597661,"comment_id":97893255,"body_markdown":"Depending on which database and technology you use either use a DB lock so that you have singular access. If you use something like hibernate use optimistic locking to prevent this. Also you might want to add some unique indexes so that you prevent duplicates to be inserted (as a last resort).","body":"Depending on which database and technology you use either use a DB lock so that you have singular access. If you use something like hibernate use optimistic locking to prevent this. Also you might want to add some unique indexes so that you prevent duplicates to be inserted (as a last resort)."},{"owner":{"account_id":2602089,"reputation":856,"user_id":2254180,"accept_rate":73,"display_name":"user2254180"},"score":0,"creation_date":1554908931,"post_id":55597661,"comment_id":97925219,"body_markdown":"M. Deinum - moving to Hibernate is not an option, therefore the only solution available is to add a constraint on the database, so your answer is the closest to a solution.","body":"M. Deinum - moving to Hibernate is not an option, therefore the only solution available is to add a constraint on the database, so your answer is the closest to a solution."}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1554832031,"post_id":55598001,"comment_id":97893352,"body_markdown":"That moght only work with a single instance of an application, as soon as you scale up syncronized won&#39;t help you either.","body":"That moght only work with a single instance of an application, as soon as you scale up syncronized won&#39;t help you either."},{"owner":{"account_id":347993,"reputation":157,"user_id":6520807,"display_name":"ksaraiya"},"score":0,"creation_date":1554837159,"post_id":55598001,"comment_id":97895727,"body_markdown":"Yes, that&#39;s true. Synchronized will not solve this problem entirely. It most likely will require a separate indicator that tells if some thread is using the resource.","body":"Yes, that&#39;s true. Synchronized will not solve this problem entirely. It most likely will require a separate indicator that tells if some thread is using the resource."}],"tags":[],"owner":{"account_id":347993,"reputation":157,"user_id":6520807,"display_name":"ksaraiya"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1554829971,"creation_date":1554829971,"answer_id":55598001,"question_id":55597661,"body_markdown":"Both the calls will open different threads and hence have different transactions. Unless you have something at some place else that&#39;s independent of the database that can tell you a thread is using this resource (like a file with a flag), the only other way is to synchronize your block of code in my opinion.","title":"Service Called Twice At Same Time","body":"<p>Both the calls will open different threads and hence have different transactions. Unless you have something at some place else that's independent of the database that can tell you a thread is using this resource (like a file with a flag), the only other way is to synchronize your block of code in my opinion.</p>\n"},{"comments":[{"owner":{"account_id":152400,"reputation":240448,"user_id":366904,"accept_rate":82,"display_name":"Cody Gray - on strike"},"score":0,"creation_date":1554834511,"post_id":55598349,"comment_id":97894509,"body_markdown":"Comments are not for extended discussion; this conversation has been [moved to chat](https://chat.stackoverflow.com/rooms/191559/discussion-on-answer-by-steve-service-called-twice-at-same-time). If the discussion bore any fruit (possibility for clarification, etc.), please be sure to [edit] the answer accordingly.","body":"Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/191559/discussion-on-answer-by-steve-service-called-twice-at-same-time\">moved to chat</a>. If the discussion bore any fruit (possibility for clarification, etc.), please be sure to <a href=\"https://stackoverflow.com/posts/55598349/edit\">edit</a> the answer accordingly."}],"tags":[],"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554836501,"creation_date":1554831486,"answer_id":55598349,"question_id":55597661,"body_markdown":"You can use the database to do this, possibly even with the status column it seems like maybe you&#39;re already using.  I&#39;m not trying to handle all the details here...just to convey the idea.  The HUGE thing here is that this mechanism works across threads, processes and even machines, any database I&#39;ve ever come across, and you have nothing else to set up.  No Redis, etc. when you get to the point where you want to scale to multiple instances:\r\n\r\nYou would create another state, and use a test-and-set operation:\r\n\r\n    public ServiceResponse update(ServiceRequest serviceRequest) {\r\n    ....\r\n    while true:\r\n        String status = myDao.getStatus();\r\n        if (status.equals(&quot;COMPLETE&quot;)) {\r\n            return serviceError;\r\n        }\r\n        else if (status.equals(&quot;PROCESSING&quot;)) {\r\n            // do whatever you want to do if some other process or thread is\r\n            // already handling this. Maybe also return an error\r\n            return serviceError;\r\n        }\r\n        else if (myDao.testAndUpdateStatus(status, &quot;PROCESSING&quot;)) {\r\n            // You would probably want to re-introduce a transaction here, maybe\r\n            // by moving this block to its own method.  Sorry for cutting a\r\n            // corner here trying to just demonstrate the lock idea, which needs\r\n            // to not be in a transaction.\r\n            try {\r\n                myDao.insertRow();\r\n                myDao.updateStatus(&quot;COMPLETE&quot;);\r\n                sendAlert();\r\n                return serviceOK;\r\n            } catch (Exception ex) {\r\n               // What you do for the failure case will be very app specific. This\r\n               // is mostly to point out that you would want to set the status\r\n               // explicitly in the case of an error, to whatever is appropriate\r\n               myDao.updateStatus(&quot;COMPLETE&quot;)\r\n               return serviceError;\r\n            }\r\n        }\r\n    }\r\n\r\nYou would need to have the lock operation not be transactional...the whole point of it is that each op is truly atomic.  If you really needed transactional semantics, you&#39;d want the final processing block to be wrapped in a transaction somehow.  I&#39;m not trying to get the transactional part of this just right.  I&#39;m pointing out an often used way of controlling synchronization and race conditions by using the database itself.  This mechanism falls outside of the transaction, which would only start once a thread had gotten `true` back from `testAndUpdateStatus`.\r\n\r\nThe key here is that `testAndUpdateStatus()` will only set the status and return `true` if the status passed in as the first parameter is the current status.  Otherwise, it will not do anything and will return `false`.  This solves the race condition where one process samples the status but then another process also samples the same value before you can set the status to `&quot;PROCESSING&quot;`, ending up with two processes handling the same update.  One of the two will fail because the database will fail the operation when the status is no longer what it was when that process read the value.\r\n\r\nNote that this will work not only in a single process, but across processes, and even machines.\r\n            \r\n","title":"Service Called Twice At Same Time","body":"<p>You can use the database to do this, possibly even with the status column it seems like maybe you're already using.  I'm not trying to handle all the details here...just to convey the idea.  The HUGE thing here is that this mechanism works across threads, processes and even machines, any database I've ever come across, and you have nothing else to set up.  No Redis, etc. when you get to the point where you want to scale to multiple instances:</p>\n\n<p>You would create another state, and use a test-and-set operation:</p>\n\n<pre><code>public ServiceResponse update(ServiceRequest serviceRequest) {\n....\nwhile true:\n    String status = myDao.getStatus();\n    if (status.equals(\"COMPLETE\")) {\n        return serviceError;\n    }\n    else if (status.equals(\"PROCESSING\")) {\n        // do whatever you want to do if some other process or thread is\n        // already handling this. Maybe also return an error\n        return serviceError;\n    }\n    else if (myDao.testAndUpdateStatus(status, \"PROCESSING\")) {\n        // You would probably want to re-introduce a transaction here, maybe\n        // by moving this block to its own method.  Sorry for cutting a\n        // corner here trying to just demonstrate the lock idea, which needs\n        // to not be in a transaction.\n        try {\n            myDao.insertRow();\n            myDao.updateStatus(\"COMPLETE\");\n            sendAlert();\n            return serviceOK;\n        } catch (Exception ex) {\n           // What you do for the failure case will be very app specific. This\n           // is mostly to point out that you would want to set the status\n           // explicitly in the case of an error, to whatever is appropriate\n           myDao.updateStatus(\"COMPLETE\")\n           return serviceError;\n        }\n    }\n}\n</code></pre>\n\n<p>You would need to have the lock operation not be transactional...the whole point of it is that each op is truly atomic.  If you really needed transactional semantics, you'd want the final processing block to be wrapped in a transaction somehow.  I'm not trying to get the transactional part of this just right.  I'm pointing out an often used way of controlling synchronization and race conditions by using the database itself.  This mechanism falls outside of the transaction, which would only start once a thread had gotten <code>true</code> back from <code>testAndUpdateStatus</code>.</p>\n\n<p>The key here is that <code>testAndUpdateStatus()</code> will only set the status and return <code>true</code> if the status passed in as the first parameter is the current status.  Otherwise, it will not do anything and will return <code>false</code>.  This solves the race condition where one process samples the status but then another process also samples the same value before you can set the status to <code>\"PROCESSING\"</code>, ending up with two processes handling the same update.  One of the two will fail because the database will fail the operation when the status is no longer what it was when that process read the value.</p>\n\n<p>Note that this will work not only in a single process, but across processes, and even machines.</p>\n"},{"tags":[],"owner":{"account_id":449256,"reputation":2120,"user_id":843943,"accept_rate":75,"display_name":"Grim"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1554834376,"creation_date":1554834376,"answer_id":55599054,"question_id":55597661,"body_markdown":"Unfortunately Hibernate rely on the Database functionality in this case. Hibernate is designed to be able to support other services working with the exact same database. \r\n\r\nThere is a case where we can manualy set the future primary key by modify the generator-strategy. But this will not prevent content-&quot;duplicates&quot;.\r\n\r\nOne solution might be having ReSTful API having a Rest-Entity that &quot;request&quot; the state of the database in a specific state.\r\n\r\nIn example:\r\n\r\n1. Request A to INSERT a Car-Entity.\r\n2. At the same time a second request B arrives to INSERT the Car-Entity.\r\n3. A is executed successfull.\r\n4. B is executed successfull.\r\n5. We have a duplicate.\r\n\r\nTo prevent this we could store a Car-Existence-Request.\r\n\r\n1. Car-Existence-Request A arives the Server.\r\n2. Car-Existence-Request B arives the Server.\r\n3. Both are stoed to the database\r\n4. Car-Existence-Request A finishes.\r\n5. Car-Existence-Request B finishes.\r\n6. Server try to store Car A - succeed.\r\n7. Server try to store Car B - fail -duplicate.\r\n8. Mark Cart-Existence-Request A as successfull.\r\n9. Mark Cart-Existence-Request B as failed.\r\n\r\nOr just switch to PostGreSQL","title":"Service Called Twice At Same Time","body":"<p>Unfortunately Hibernate rely on the Database functionality in this case. Hibernate is designed to be able to support other services working with the exact same database. </p>\n\n<p>There is a case where we can manualy set the future primary key by modify the generator-strategy. But this will not prevent content-\"duplicates\".</p>\n\n<p>One solution might be having ReSTful API having a Rest-Entity that \"request\" the state of the database in a specific state.</p>\n\n<p>In example:</p>\n\n<ol>\n<li>Request A to INSERT a Car-Entity.</li>\n<li>At the same time a second request B arrives to INSERT the Car-Entity.</li>\n<li>A is executed successfull.</li>\n<li>B is executed successfull.</li>\n<li>We have a duplicate.</li>\n</ol>\n\n<p>To prevent this we could store a Car-Existence-Request.</p>\n\n<ol>\n<li>Car-Existence-Request A arives the Server.</li>\n<li>Car-Existence-Request B arives the Server.</li>\n<li>Both are stoed to the database</li>\n<li>Car-Existence-Request A finishes.</li>\n<li>Car-Existence-Request B finishes.</li>\n<li>Server try to store Car A - succeed.</li>\n<li>Server try to store Car B - fail -duplicate.</li>\n<li>Mark Cart-Existence-Request A as successfull.</li>\n<li>Mark Cart-Existence-Request B as failed.</li>\n</ol>\n\n<p>Or just switch to PostGreSQL</p>\n"},{"tags":[],"owner":{"account_id":1019013,"reputation":5314,"user_id":1029926,"accept_rate":64,"display_name":"Somasundaram Sekar"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1554838623,"creation_date":1554838623,"answer_id":55600101,"question_id":55597661,"body_markdown":"From your question, I assume the `update(..)` is going to be invoked under some degree of concurrency. \r\n\r\nI see a few problems with this approach of using an external data store for coordination. For default &quot;**Read Committed**&quot; isolation you will encounter what you have encountering now, however, even if you can use &quot;**Read Un-Committed**&quot; you will have a problem where the second transaction having read the dirty &quot;COMPLETE&quot; data, returns but the first transaction may still fail and rollback. \r\n\r\nI propose a couple of approaches(I made a lot of assumptions of-course)\r\n\r\n 1. Idempotency: By making the database updates idempotent, you don&#39;t have to worry about duplicate updates\r\n 2. Compaction: If there is a possibility that latest records are always the correct you can let all the writes pass through but read only the latest records, this is akin to how Kafka does compaction internally\r\n\r\n","title":"Service Called Twice At Same Time","body":"<p>From your question, I assume the <code>update(..)</code> is going to be invoked under some degree of concurrency. </p>\n\n<p>I see a few problems with this approach of using an external data store for coordination. For default \"<strong>Read Committed</strong>\" isolation you will encounter what you have encountering now, however, even if you can use \"<strong>Read Un-Committed</strong>\" you will have a problem where the second transaction having read the dirty \"COMPLETE\" data, returns but the first transaction may still fail and rollback. </p>\n\n<p>I propose a couple of approaches(I made a lot of assumptions of-course)</p>\n\n<ol>\n<li>Idempotency: By making the database updates idempotent, you don't have to worry about duplicate updates</li>\n<li>Compaction: If there is a possibility that latest records are always the correct you can let all the writes pass through but read only the latest records, this is akin to how Kafka does compaction internally</li>\n</ol>\n"},{"tags":[],"owner":{"account_id":21703644,"reputation":1,"user_id":16016474,"display_name":"NgoÌ£c Nguy&#234;Ìn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1630153763,"creation_date":1630121992,"answer_id":68961191,"question_id":55597661,"body_markdown":"In my case, I changed build configuration to release when build API.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/wZNXW.png","title":"Service Called Twice At Same Time","body":"<p>In my case, I changed build configuration to release when build API.</p>\n<p><a href=\"https://i.stack.imgur.com/wZNXW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wZNXW.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":2602089,"reputation":856,"user_id":2254180,"accept_rate":73,"display_name":"user2254180"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2952,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":5,"score":1,"last_activity_date":1691243183,"creation_date":1554828566,"question_id":55597661,"body_markdown":"I have the following web service written in Java using Spring, I have wrapped it with the @Transactional annotation to ensure we can roll back if required.\r\n\r\nIt works fine, except for the scenario where the service is called twice, with the second call happening before the first call finishes.\r\n\r\nIn that scenario, because the first transaction is still running and hasn&#39;t yet committed to the DB, the second transaction will go through the full method, inserting a duplicate row, updating the status again, and calling sendAlert(). \r\n\r\nHere&#39;s the pseudo code. \r\n\r\n    @Transactional\r\n    public ServiceResponse update(ServiceRequest serviceRequest) {\r\n    ....\r\n    if (myDao.getStatus() == &quot;COMPLETE&quot;) {\r\n     return serviceError;\r\n    }\r\n     myDao.insertRow();\r\n     myDao.updateStatus(&quot;COMPLETE&quot;);\r\n     sendAlert();\r\n    }\r\n\r\nHow can I prevent the second transaction from going through before the first? Setting the isolation level as read uncommitted is not an option as the database doesn&#39;t support it.\r\n","title":"Service Called Twice At Same Time","body":"<p>I have the following web service written in Java using Spring, I have wrapped it with the @Transactional annotation to ensure we can roll back if required.</p>\n\n<p>It works fine, except for the scenario where the service is called twice, with the second call happening before the first call finishes.</p>\n\n<p>In that scenario, because the first transaction is still running and hasn't yet committed to the DB, the second transaction will go through the full method, inserting a duplicate row, updating the status again, and calling sendAlert(). </p>\n\n<p>Here's the pseudo code. </p>\n\n<pre><code>@Transactional\npublic ServiceResponse update(ServiceRequest serviceRequest) {\n....\nif (myDao.getStatus() == \"COMPLETE\") {\n return serviceError;\n}\n myDao.insertRow();\n myDao.updateStatus(\"COMPLETE\");\n sendAlert();\n}\n</code></pre>\n\n<p>How can I prevent the second transaction from going through before the first? Setting the isolation level as read uncommitted is not an option as the database doesn't support it.</p>\n"},{"tags":["java","fitnesse","dbfit"],"owner":{"account_id":22572286,"reputation":133,"user_id":16758296,"display_name":"kim"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691243055,"creation_date":1691241940,"question_id":76841859,"body_markdown":"I try connecting to Oracle database with DbFit version 3.2.0\r\n\r\nI&#39;ve start with a postgres Sample\r\n\r\n```\r\n!|Database environment|${DB_ENVIRONMENT}                                                                                       |\r\n|Connect              |jdbc:postgresql://${DB_URL}/${DB_SID}?currentSchema=${DB_SCHEMA}&amp;user=${DB_USER}&amp;password=${DB_PASSWORD}|\r\n```\r\n\r\nthat I adapted to \r\n```\r\n!|Database environment|${DB_ENVIRONMENT}                                                                                       |\r\n|Connect              |jdbc:oracle:thin:${DB_USER}/${DB_PASSWORD}@${DB_URL}/${DB_SID}\r\n```\r\nDB_ENVIRONMET was set to POSTGREJSON that I&#39;ve changed to ORACLE\r\nand I had an error message :\r\n```\r\njava.lang.NullPointerException: Cannot invoke &quot;dbfit.api.DBEnvironment.getConnection()&quot; because the return value of &quot;dbfit.api.DbEnvironmentFactory.getDefaultEnvironment()&quot; is null\r\n```\r\n\r\nI&#39;ve found that some was using\r\n```\r\n!|dbfit.OracleTest|\r\n```\r\nbut I still have the same error message.\r\n\r\nI suppose that I need to set &#39;database environment&#39; to the right values, but did not found any information.\r\nCan anyone help?\r\n","title":"Error connecting to DBFit database : &quot;DbEnvironmentFactory.getDefaultEnvironment()&quot; is null","body":"<p>I try connecting to Oracle database with DbFit version 3.2.0</p>\n<p>I've start with a postgres Sample</p>\n<pre><code>!|Database environment|${DB_ENVIRONMENT}                                                                                       |\n|Connect              |jdbc:postgresql://${DB_URL}/${DB_SID}?currentSchema=${DB_SCHEMA}&amp;user=${DB_USER}&amp;password=${DB_PASSWORD}|\n</code></pre>\n<p>that I adapted to</p>\n<pre><code>!|Database environment|${DB_ENVIRONMENT}                                                                                       |\n|Connect              |jdbc:oracle:thin:${DB_USER}/${DB_PASSWORD}@${DB_URL}/${DB_SID}\n</code></pre>\n<p>DB_ENVIRONMET was set to POSTGREJSON that I've changed to ORACLE\nand I had an error message :</p>\n<pre><code>java.lang.NullPointerException: Cannot invoke &quot;dbfit.api.DBEnvironment.getConnection()&quot; because the return value of &quot;dbfit.api.DbEnvironmentFactory.getDefaultEnvironment()&quot; is null\n</code></pre>\n<p>I've found that some was using</p>\n<pre><code>!|dbfit.OracleTest|\n</code></pre>\n<p>but I still have the same error message.</p>\n<p>I suppose that I need to set 'database environment' to the right values, but did not found any information.\nCan anyone help?</p>\n"},{"tags":["java","hibernate","spring-data-jpa"],"owner":{"account_id":16435976,"reputation":162,"user_id":11873562,"display_name":"IceMajor"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":18,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691241627,"creation_date":1691241627,"question_id":76841843,"body_markdown":"In my Spring app there&#39;s the `Store` entity and `StoreImage` entity. `StoreImage` may be associated with several `Store`s (store company has one logo, but the company has multiple stores located in different places).\r\n\r\nI&#39;ve managed, I think, to get it working. Below I copy these 2 models and the mapping. I however am not sure if it&#39;s the proper practice. I&#39;d be really grateful for some feedback and explanations of drawbacks of this implementation.\r\n\r\nI&#39;ve mostly based my code on [How to map a @ManyToOne association using a non-Primary Key column with JPA and Hibernate][1] article.\r\n\r\n```\r\n@Table(name = &quot;store&quot;)\r\n@Entity(name = &quot;Store&quot;)\r\npublic class Store {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\tprivate Long id;\r\n\r\n\tprivate String name;\r\n\r\n\tprivate String city;\r\n\r\n\tprivate String street;\r\n\r\n\t@ManyToOne(fetch = FetchType.LAZY)\r\n\t@JoinColumn(\r\n\t\t\tname = &quot;name&quot;,\r\n\t\t\treferencedColumnName = &quot;store_name&quot;,\r\n\t\t\tinsertable = false,\r\n\t\t\tupdatable = false\r\n\t)\r\n\tprivate StoreImage image;\r\n\r\n    // getters and setters\r\n}\r\n```\r\n```\r\n@Entity(name = &quot;StoreImage&quot;)\r\n@Table(name = &quot;store_image&quot;)\r\npublic class StoreImage extends ImageModel implements Serializable {\r\n\r\n\t@Id\r\n\t@GeneratedValue(strategy = GenerationType.IDENTITY)\r\n\t@Column(name = &quot;id&quot;)\r\n\tprivate Long id;\r\n\r\n\t@Column(name = &quot;store_name&quot;)\r\n\t@NaturalId\r\n\tprivate String storeName;\r\n\r\n\t@OneToMany(mappedBy = &quot;image&quot;)\r\n\t@JsonIgnore\r\n\tprivate Set&lt;Store&gt; stores = new HashSet&lt;&gt;();\r\n\r\n\tpublic StoreImage(String imageUrl, String remoteId) {\r\n\t\tsuper(imageUrl, remoteId);\r\n\t}\r\n\r\n    // getters and setters\r\n}\r\n```\r\n\r\n\r\n  [1]: https://vladmihalcea.com/how-to-map-a-manytoone-association-using-a-non-primary-key-column/","title":"Many-to-one mapping (with non-primary-key column and &quot;many&quot; side as parent)","body":"<p>In my Spring app there's the <code>Store</code> entity and <code>StoreImage</code> entity. <code>StoreImage</code> may be associated with several <code>Store</code>s (store company has one logo, but the company has multiple stores located in different places).</p>\n<p>I've managed, I think, to get it working. Below I copy these 2 models and the mapping. I however am not sure if it's the proper practice. I'd be really grateful for some feedback and explanations of drawbacks of this implementation.</p>\n<p>I've mostly based my code on <a href=\"https://vladmihalcea.com/how-to-map-a-manytoone-association-using-a-non-primary-key-column/\" rel=\"nofollow noreferrer\">How to map a @ManyToOne association using a non-Primary Key column with JPA and Hibernate</a> article.</p>\n<pre><code>@Table(name = &quot;store&quot;)\n@Entity(name = &quot;Store&quot;)\npublic class Store {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    private String name;\n\n    private String city;\n\n    private String street;\n\n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(\n            name = &quot;name&quot;,\n            referencedColumnName = &quot;store_name&quot;,\n            insertable = false,\n            updatable = false\n    )\n    private StoreImage image;\n\n    // getters and setters\n}\n</code></pre>\n<pre><code>@Entity(name = &quot;StoreImage&quot;)\n@Table(name = &quot;store_image&quot;)\npublic class StoreImage extends ImageModel implements Serializable {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;)\n    private Long id;\n\n    @Column(name = &quot;store_name&quot;)\n    @NaturalId\n    private String storeName;\n\n    @OneToMany(mappedBy = &quot;image&quot;)\n    @JsonIgnore\n    private Set&lt;Store&gt; stores = new HashSet&lt;&gt;();\n\n    public StoreImage(String imageUrl, String remoteId) {\n        super(imageUrl, remoteId);\n    }\n\n    // getters and setters\n}\n</code></pre>\n"},{"tags":["java","google-cloud-storage","nio"],"comments":[{"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1603223607,"post_id":64451345,"comment_id":113968077,"body_markdown":"I&#39;m not clear on what you mean by &quot;it doesn&#39;t show how to iterate the bytes&quot;.  Maybe you could edit the question to show the code you have so far, and what specifically you are stuck with or isn&#39;t working the way you exepect.  It&#39;s generally not difficult in java to read and write data between channels.  If you have a question about the java channel API, then you should focus your question on that.","body":"I&#39;m not clear on what you mean by &quot;it doesn&#39;t show how to iterate the bytes&quot;.  Maybe you could edit the question to show the code you have so far, and what specifically you are stuck with or isn&#39;t working the way you exepect.  It&#39;s generally not difficult in java to read and write data between channels.  If you have a question about the java channel API, then you should focus your question on that."},{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":0,"creation_date":1603228135,"post_id":64451345,"comment_id":113969808,"body_markdown":"I tried to clarify the question. I am not sure if I am looking for a different GCP api or different NIO api.","body":"I tried to clarify the question. I am not sure if I am looking for a different GCP api or different NIO api."},{"owner":{"account_id":426109,"reputation":302042,"user_id":807126,"display_name":"Doug Stevenson"},"score":0,"creation_date":1603228934,"post_id":64451345,"comment_id":113970088,"body_markdown":"Seems like your problem is that `Joiner.on(&#39;\\n&#39;).join(set)` returns the full byte array in memory.  If you want to stream the source data, you&#39;ll need an API that streams the byte content instead of returning everything at once.","body":"Seems like your problem is that <code>Joiner.on(&#39;\\n&#39;).join(set)</code> returns the full byte array in memory.  If you want to stream the source data, you&#39;ll need an API that streams the byte content instead of returning everything at once."}],"answers":[{"comments":[{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":0,"creation_date":1603221500,"post_id":64451782,"comment_id":113967177,"body_markdown":"upload from a file does not help because I want to upload directly from the set.","body":"upload from a file does not help because I want to upload directly from the set."}],"tags":[],"owner":{"account_id":1844033,"reputation":11661,"user_id":1672803,"display_name":"Mike Schwartz"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1603220726,"creation_date":1603220726,"answer_id":64451782,"question_id":64451345,"body_markdown":"To avoid creating an intermediate String with all the bytes you can upload from a file. You can find example code to do an upload from a file in various languages [here][1].\r\n\r\n\r\n  [1]: https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample","title":"Stream content to Google Cloud Storage","body":"<p>To avoid creating an intermediate String with all the bytes you can upload from a file. You can find example code to do an upload from a file in various languages <a href=\"https://cloud.google.com/storage/docs/uploading-objects#storage-upload-object-code-sample\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"comments":[{"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"score":0,"creation_date":1603264368,"post_id":64457640,"comment_id":113978219,"body_markdown":"Thanks, this with `Iterators.partition` looks better.","body":"Thanks, this with <code>Iterators.partition</code> looks better."}],"tags":[],"owner":{"account_id":30002,"reputation":37409,"user_id":81491,"accept_rate":82,"display_name":"Brandon Yarbrough"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1603260853,"creation_date":1603260853,"answer_id":64457640,"question_id":64451345,"body_markdown":"The most straightforward approach I could think of would be:\r\n\r\n     try (WriteChannel writer = storage.writer(blobInfo)) {\r\n       for(Integer val : set) {\r\n         String valLine = val.toString() + &#39;\\n&#39;;\r\n         writer.write(ByteBuffer.wrap(valLine.getBytes(UTF_8));\r\n       }\r\n     }\r\n\r\nMind you, this isn&#39;t very efficient. It creates a lot of small ByteBuffers. You could greatly improve on this by writing into a single larger ByteBuffer and periodically calling writer.write with it.","title":"Stream content to Google Cloud Storage","body":"<p>The most straightforward approach I could think of would be:</p>\n<pre><code> try (WriteChannel writer = storage.writer(blobInfo)) {\n   for(Integer val : set) {\n     String valLine = val.toString() + '\\n';\n     writer.write(ByteBuffer.wrap(valLine.getBytes(UTF_8));\n   }\n }\n</code></pre>\n<p>Mind you, this isn't very efficient. It creates a lot of small ByteBuffers. You could greatly improve on this by writing into a single larger ByteBuffer and periodically calling writer.write with it.</p>\n"}],"owner":{"account_id":179362,"reputation":15005,"user_id":411965,"accept_rate":87,"display_name":"oshai"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1133,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691240955,"creation_date":1603218796,"question_id":64451345,"body_markdown":"I would like to upload a large `Set&lt;Integer&gt;` to Google Cloud Storage. I can do that with:\r\n```\r\nBlob result = storage.create(blobInfo, Joiner.on(&#39;\\n&#39;).join(set).getBytes(UTF_8));\r\n```\r\nBut this will create an intermediate String with all the content that might be too large.  \r\nI found an [example](https://googleapis.dev/java/google-cloud-storage/latest/com/google/cloud/storage/Storage.html#writer-com.google.cloud.storage.BlobInfo-com.google.cloud.storage.Storage.BlobWriteOption...-) with `WriteChannel.write()`:\r\n```java\r\n Set&lt;Integer&gt; set = ...\r\n String bucketName = &quot;my-unique-bucket&quot;;\r\n String blobName = &quot;my-blob-name&quot;;\r\n BlobId blobId = BlobId.of(bucketName, blobName);\r\n byte[] content = Joiner.on(&#39;\\n&#39;).join(set).getBytes(UTF_8);\r\n BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\r\n try (WriteChannel writer = storage.writer(blobInfo)) {\r\n     writer.write(ByteBuffer.wrap(content, 0, content.length));\r\n } catch (IOException ex) {\r\n   // handle exception\r\n }\r\n```\r\nHowever, if I do that, the entire `set` is converted to a String and then to `byte[]`. The String itself might be too big.\r\n\r\nIs there an example how to iterate over the set and transform it to a ByteBuffer? or should I do a loop on chunks of the set?","title":"Stream content to Google Cloud Storage","body":"<p>I would like to upload a large <code>Set&lt;Integer&gt;</code> to Google Cloud Storage. I can do that with:</p>\n<pre><code>Blob result = storage.create(blobInfo, Joiner.on('\\n').join(set).getBytes(UTF_8));\n</code></pre>\n<p>But this will create an intermediate String with all the content that might be too large.<br />\nI found an <a href=\"https://googleapis.dev/java/google-cloud-storage/latest/com/google/cloud/storage/Storage.html#writer-com.google.cloud.storage.BlobInfo-com.google.cloud.storage.Storage.BlobWriteOption...-\" rel=\"nofollow noreferrer\">example</a> with <code>WriteChannel.write()</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code> Set&lt;Integer&gt; set = ...\n String bucketName = &quot;my-unique-bucket&quot;;\n String blobName = &quot;my-blob-name&quot;;\n BlobId blobId = BlobId.of(bucketName, blobName);\n byte[] content = Joiner.on('\\n').join(set).getBytes(UTF_8);\n BlobInfo blobInfo = BlobInfo.newBuilder(blobId).setContentType(&quot;text/plain&quot;).build();\n try (WriteChannel writer = storage.writer(blobInfo)) {\n     writer.write(ByteBuffer.wrap(content, 0, content.length));\n } catch (IOException ex) {\n   // handle exception\n }\n</code></pre>\n<p>However, if I do that, the entire <code>set</code> is converted to a String and then to <code>byte[]</code>. The String itself might be too big.</p>\n<p>Is there an example how to iterate over the set and transform it to a ByteBuffer? or should I do a loop on chunks of the set?</p>\n"},{"tags":["java","visual-studio-code","gradle","gradle-plugin"],"comments":[{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1690182404,"post_id":76744155,"comment_id":135312087,"body_markdown":"Have you set the correct JDK? Was [this link](https://github.com/microsoft/vscode-gradle/issues/1221) helpful?","body":"Have you set the correct JDK? Was <a href=\"https://github.com/microsoft/vscode-gradle/issues/1221\" rel=\"nofollow noreferrer\">this link</a> helpful?"},{"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"score":0,"creation_date":1690255182,"post_id":76744155,"comment_id":135324160,"body_markdown":"Hi! I am sorry for no update, I have figured it out and it is the configuration of JAVA_HOME in path variables. Thank you for replying to my question I really appreciated it!","body":"Hi! I am sorry for no update, I have figured it out and it is the configuration of JAVA_HOME in path variables. Thank you for replying to my question I really appreciated it!"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1690262856,"post_id":76744155,"comment_id":135324809,"body_markdown":"Welcome to StackOverflow. If you find the solution, Please consider answering it and accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See [can I answer my own question..](https://stackoverflow.com/help/self-answer), Just a reminder :)","body":"Welcome to StackOverflow. If you find the solution, Please consider answering it and accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See <a href=\"https://stackoverflow.com/help/self-answer\">can I answer my own question..</a>, Just a reminder :)"},{"owner":{"account_id":25311208,"reputation":7305,"user_id":19133920,"display_name":"JialeDu"},"score":0,"creation_date":1690769146,"post_id":76744155,"comment_id":135394513,"body_markdown":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems.","body":"May I know what&#39;s going on with the problem? If it has been solved, can you change the status of the answer to help more people with similar problems."},{"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"score":0,"creation_date":1691239380,"post_id":76744155,"comment_id":135466935,"body_markdown":"Im sorry I just added the jdk path to the JAVA_HOME. I am still learning how to use Stack Overflow. Thank you for reminding me!","body":"Im sorry I just added the jdk path to the JAVA_HOME. I am still learning how to use Stack Overflow. Thank you for reminding me!"}],"answers":[{"comments":[{"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"score":0,"creation_date":1691240507,"post_id":76841760,"comment_id":135467056,"body_markdown":"In this process the JAVA_HOME contains the directory path of your JDK.","body":"In this process the JAVA_HOME contains the directory path of your JDK."}],"tags":[],"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691240446,"creation_date":1691240446,"answer_id":76841760,"question_id":76744155,"body_markdown":"**SOLUTION:**\r\n\r\n 1. Go to the **Windows** search bar.\r\n 2. Type **&quot;Edit the System Environment Variables&quot;**.\r\n 3. In the **&quot;Adavance&quot;** tab click **&quot;Environment Variables&quot;**.\r\n 4. Go to **&quot;System Variables&quot;**.\r\n 5. Check if you have made an option for **&quot;JAVA_HOME&quot;**.\r\n 6. If there is no **&quot;JAVA_HOME&quot;**. Click **&quot;New&quot;** and provide the name **&quot;JAVA_HOME&quot;** then save it.\r\n 7. Click **&quot;Edit&quot;** and enter the path of your **JDK**.\r\n \r\n**e.g C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot**\r\n\r\nI hope it helps, Happy Coding!","title":"No Connection To Gradle Server &amp;&amp; The Gradle Client Was Unable To Connect in Visual Studio Code","body":"<p><strong>SOLUTION:</strong></p>\n<ol>\n<li>Go to the <strong>Windows</strong> search bar.</li>\n<li>Type <strong>&quot;Edit the System Environment Variables&quot;</strong>.</li>\n<li>In the <strong>&quot;Adavance&quot;</strong> tab click <strong>&quot;Environment Variables&quot;</strong>.</li>\n<li>Go to <strong>&quot;System Variables&quot;</strong>.</li>\n<li>Check if you have made an option for <strong>&quot;JAVA_HOME&quot;</strong>.</li>\n<li>If there is no <strong>&quot;JAVA_HOME&quot;</strong>. Click <strong>&quot;New&quot;</strong> and provide the name <strong>&quot;JAVA_HOME&quot;</strong> then save it.</li>\n<li>Click <strong>&quot;Edit&quot;</strong> and enter the path of your <strong>JDK</strong>.</li>\n</ol>\n<p><strong>e.g C:\\Program Files\\Eclipse Adoptium\\jdk-17.0.6.10-hotspot</strong></p>\n<p>I hope it helps, Happy Coding!</p>\n"}],"owner":{"account_id":29065283,"reputation":11,"user_id":22265030,"display_name":"Raffi Martin"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3017,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76841760,"answer_count":1,"score":1,"last_activity_date":1691240446,"creation_date":1690034213,"question_id":76744155,"body_markdown":"I am new to Java Projects in Visual Studio Code. This is mainly for my school project. I was setting up Gradle for Java according to YouTube videos and follows the step. I just simply installed the &quot;**Gradle for Java&quot;** in Visual Studio Code but  I have an error. I have restarted and reconnected it but it is showing no progress. Any help will be appreciated. Cheers!\r\n\r\nError:\r\n**No Connection To Gradle Server. Try Restarting The Server.**\r\nError:\r\n**The Gradle Client Was Unable To Connect. Try re-connecting.**\r\n\r\n[No Connection To Gradle Server. Try Restarting The Server\r\n&amp;&amp; The Gradle Client Was Unable To Connect. Try re-connecting.](https://i.stack.imgur.com/3F6Tj.png)\r\n\r\nI tried restarting my PC, Vscode and even followed the instructions to reconnect but I am not really sure what does **Restart Server** means. I would like to acquire some answers and eventually able to run Gradle on Vscode.","title":"No Connection To Gradle Server &amp;&amp; The Gradle Client Was Unable To Connect in Visual Studio Code","body":"<p>I am new to Java Projects in Visual Studio Code. This is mainly for my school project. I was setting up Gradle for Java according to YouTube videos and follows the step. I just simply installed the &quot;<strong>Gradle for Java&quot;</strong> in Visual Studio Code but  I have an error. I have restarted and reconnected it but it is showing no progress. Any help will be appreciated. Cheers!</p>\n<p>Error:\n<strong>No Connection To Gradle Server. Try Restarting The Server.</strong>\nError:\n<strong>The Gradle Client Was Unable To Connect. Try re-connecting.</strong></p>\n<p><a href=\"https://i.stack.imgur.com/3F6Tj.png\" rel=\"nofollow noreferrer\">No Connection To Gradle Server. Try Restarting The Server\n&amp;&amp; The Gradle Client Was Unable To Connect. Try re-connecting.</a></p>\n<p>I tried restarting my PC, Vscode and even followed the instructions to reconnect but I am not really sure what does <strong>Restart Server</strong> means. I would like to acquire some answers and eventually able to run Gradle on Vscode.</p>\n"},{"tags":["java","mongodb"],"comments":[{"owner":{"account_id":26391128,"reputation":4716,"user_id":20042973,"display_name":"user20042973"},"score":2,"creation_date":1691240492,"post_id":76841674,"comment_id":135467054,"body_markdown":"Hard to begin answering this question without more information. Can you provide sample input documents and the output you expect from them?","body":"Hard to begin answering this question without more information. Can you provide sample input documents and the output you expect from them?"}],"owner":{"account_id":22509458,"reputation":11,"user_id":16704597,"display_name":"Sameer kr"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":13,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691240443,"creation_date":1691239136,"question_id":76841674,"body_markdown":"I want to sort the array return by lookup in Mongo and then use projection on that data in java. Can someone suggest how to do that ?\r\n\r\nSample code:\r\n```\r\nMongoclient.getDatabase(db).get collection(order request).aggregate(Arrays.asList(new Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;order&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;orders&quot;)),\r\nnew Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;Inventory&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;inventory&quot;)),\r\nnew Document(&quot;$project&quot;, new Document (&quot;I&#39;d&quot;,0L).append(&quot;order date&quot;, new Document(&quot;$arrayElementAt&quot;, Arrays.asList(&quot;$orders.date&quot;,0L)))\r\n```\r\nI want to have max order date return by lookup on orders","title":"Sort on look up in mongo using java","body":"<p>I want to sort the array return by lookup in Mongo and then use projection on that data in java. Can someone suggest how to do that ?</p>\n<p>Sample code:</p>\n<pre><code>Mongoclient.getDatabase(db).get collection(order request).aggregate(Arrays.asList(new Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;order&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;orders&quot;)),\nnew Document(&quot;$lookup&quot;,new Document( &quot;from&quot;, &quot;Inventory&quot;).append(&quot;localfield&quot;,&quot;Id&quot;).append(&quot;foreignField&quot;,&quot;Id&quot;).append(&quot;as&quot;, &quot;inventory&quot;)),\nnew Document(&quot;$project&quot;, new Document (&quot;I'd&quot;,0L).append(&quot;order date&quot;, new Document(&quot;$arrayElementAt&quot;, Arrays.asList(&quot;$orders.date&quot;,0L)))\n</code></pre>\n<p>I want to have max order date return by lookup on orders</p>\n"},{"tags":["java","spring-boot","websocket","stomp","spring-websocket"],"owner":{"account_id":27593137,"reputation":51,"user_id":21059880,"display_name":"Alok Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691240275,"creation_date":1691240275,"question_id":76841751,"body_markdown":"\r\n\r\nI am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.\r\n````\r\n@Configuration\r\n@EnableWebSocketMessageBroker\r\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\r\n\r\n    @Override\r\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\r\n        registry.enableSimpleBroker(&quot;/topic&quot;);\r\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\r\n    }\r\n\r\n    @Override\r\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\r\n        registry.addEndpoint(&quot;/our-websocket&quot;)\r\n                .setHandshakeHandler(new UserHandshakeHandler())\r\n                .withSockJS();\r\n    }\r\n}\r\n````\r\nI am running this in my local. After terminating the app,\r\nI am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.","title":"Memory leak warning due to websocket and stomp in Spring Boot app","body":"<p>I am using Stomp in a Spring Boot app where I am getting memory leak warning after adding below code. How to resolve it.</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n    @Override\n    public void configureMessageBroker(final MessageBrokerRegistry registry) {\n        registry.enableSimpleBroker(&quot;/topic&quot;);\n        registry.setApplicationDestinationPrefixes(&quot;/ws&quot;);\n    }\n\n    @Override\n    public void registerStompEndpoints(final StompEndpointRegistry registry) {\n        registry.addEndpoint(&quot;/our-websocket&quot;)\n                .setHandshakeHandler(new UserHandshakeHandler())\n                .withSockJS();\n    }\n}\n</code></pre>\n<p>I am running this in my local. After terminating the app,\nI am getting a warning -- The web application [ROOT] appears to have started a thread named [MessageBroker-4] but has failed to stop it. This is very likely to create a memory leak.</p>\n"},{"tags":["java","swing","groovy","groovy-console"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691242745,"post_id":76841740,"comment_id":135467251,"body_markdown":"Is it designed to be reused in that way? Maybe not","body":"Is it designed to be reused in that way? Maybe not"}],"owner":{"account_id":29165903,"reputation":11,"user_id":22343499,"display_name":"utku"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691240108,"creation_date":1691240108,"question_id":76841740,"body_markdown":"I have a Java swing app. I want to use groovy.console.ui.Console (GroovyConsole) in my app. I can run groovy console but it opens in a new window. It should be in my frame.\r\n\r\nI tried to add output and input panel in new JPanels but it is not enough and also console runs in a new window.","title":"How can i integrate GroovyConsole to in my java swing app?","body":"<p>I have a Java swing app. I want to use groovy.console.ui.Console (GroovyConsole) in my app. I can run groovy console but it opens in a new window. It should be in my frame.</p>\n<p>I tried to add output and input panel in new JPanels but it is not enough and also console runs in a new window.</p>\n"},{"tags":["java","rabbitmq","keycloak","keycloak-spi"],"owner":{"account_id":14997010,"reputation":13,"user_id":11356966,"display_name":"finwes"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":138,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691238820,"creation_date":1691191377,"question_id":76839575,"body_markdown":"I&#39;m working on a Keycloak SPI that publishes changes to Realms and Clients in Keycloak via RabbitMQ and handles RabbitMQ RPC requests to receive Keycloak specific configuration. The first part is already functioning.\r\n\r\nThe second part is causing issues. I&#39;m using a singleton class called `RabbitMqRpcReceiver` which handles the reception of RPC requests. This singleton class is instantiated within the Factory inside the `RabbitMqEventListenerProviderFactory`, in the `postInit()` method.\r\n\r\nHere are the code snippets:\r\n\r\n```java\r\n@AutoService(EventListenerProviderFactory.class)\r\n@JBossLog\r\npublic class RabbitMqEventListenerProviderFactory implements EventListenerProviderFactory {\r\n\r\n    private RabbitMqConfig cfg;\r\n    private RabbitMqRpcReceiver rpcReceiver;\r\n\r\n    @Override\r\n    public EventListenerProvider create(KeycloakSession session) {\r\n        return new RabbitMqEventListenerProvider(cfg, session);\r\n    }\r\n\r\n    @Override\r\n    public void init(Scope config) {\r\n        cfg = RabbitMqConfig.createFromScope(config);\r\n    }\r\n\r\n    @Override\r\n    public void postInit(KeycloakSessionFactory factory) {\r\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory.create());\r\n    }\r\n\r\n    @Override\r\n    public void close() {\r\n        if (rpcReceiver != null) {\r\n            rpcReceiver.close();\r\n        }\r\n    }\r\n\r\n    @Override\r\n    public String getId() {\r\n        return &quot;keycloak-to-rabbitmq&quot;;\r\n    }\r\n\r\n}\r\n```\r\n\r\n```java\r\n\r\n@JBossLog\r\npublic class RabbitMqRpcReceiver {\r\n    private final KeycloakSession keycloakSession;\r\n    public static final String RPC_QUEUE_NAME = &quot;rpc_queue&quot;;\r\n    private Channel rpcChannel;\r\n    private static RabbitMqRpcReceiver instance = null;\r\n\r\n    public static RabbitMqRpcReceiver getInstance(RabbitMqConfig cfg, KeycloakSession session) {\r\n        if (instance == null) {\r\n            instance = new RabbitMqRpcReceiver(cfg, session);\r\n        }\r\n        return instance;\r\n    }\r\n\r\n    private RabbitMqRpcReceiver(RabbitMqConfig cfg, KeycloakSession session) {\r\n        this.keycloakSession = session;\r\n\r\n        ConnectionFactory factory = new ConnectionFactory();\r\n\r\n        factory.setUsername(cfg.getUsername());\r\n        factory.setPassword(cfg.getPassword());\r\n        factory.setVirtualHost(cfg.getVhost());\r\n        factory.setHost(cfg.getHostUrl());\r\n        factory.setPort(cfg.getPort());\r\n\r\n        if (Boolean.TRUE.equals(cfg.getUseTls())) {\r\n            try {\r\n                factory.useSslProtocol();\r\n            } catch (Exception e) {\r\n                log.error(&quot;Could not use SSL protocol&quot;, e);\r\n            }\r\n        }\r\n\r\n        try {\r\n            rpcChannel = factory.newConnection().createChannel();\r\n            rpcChannel.queueDeclare(RPC_QUEUE_NAME, false, false, false, null);\r\n            rpcChannel.basicQos(1);\r\n\r\n            log.infof(&quot; [x] Awaiting RPC requests&quot;);\r\n\r\n            rpcChannel.basicConsume(RPC_QUEUE_NAME, false, (consumerTag, delivery) -&gt; handleDelivery(delivery), (consumerTag -&gt; {}));\r\n\r\n        } catch (IOException e) {\r\n            log.error(&quot;Error declaring RPC queue&quot;, e);\r\n        } catch (TimeoutException e) {\r\n            log.error(&quot;Timeout declaring RPC queue&quot;, e);\r\n        }\r\n    }\r\n\r\n    private void handleDelivery(Delivery delivery) {\r\n        AMQP.BasicProperties replyProps = new AMQP.BasicProperties\r\n                .Builder()\r\n                .contentType(&quot;application/json&quot;)\r\n                .headers(Map.of(&quot;__TypeId__&quot;, ConfigurationResponse.class.getName()))\r\n                .contentEncoding(StandardCharsets.UTF_8.name())\r\n                .correlationId(delivery.getProperties().getCorrelationId())\r\n                .build();\r\n\r\n        ObjectMapper mapper = new ObjectMapper();\r\n        ConfigurationRequest request = null;\r\n        ConfigurationResponse response = null;\r\n        try {\r\n            request = mapper.readValue(delivery.getBody(), ConfigurationRequest.class);\r\n            log.infof(&quot; [.] Received request for client %s&quot;, request.client());\r\n\r\n            response = getConfiguration(request.client());\r\n\r\n        } catch (RuntimeException | IOException e) {\r\n            log.error(&quot; [.] &quot; + e.toString());\r\n        } finally {\r\n            try {\r\n                rpcChannel.basicPublish(&quot;&quot;, delivery.getProperties().getReplyTo(), replyProps, mapper.writeValueAsBytes(response));\r\n                rpcChannel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);\r\n            } catch (IOException e) {\r\n                log.error(&quot;Error sending response&quot;, e);\r\n            }\r\n        }\r\n    }\r\n\r\n    public ConfigurationResponse getConfiguration(String clientName) {\r\n        log.info(&quot;Getting configuration for client &quot; + clientName);\r\n        RealmProvider realmProvider = keycloakSession.realms();\r\n\r\n        // This one succeeds\r\n        log.info(&quot;Realms: &quot; + realmProvider);\r\n        // This one fails\r\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\r\n\r\n        return null;\r\n    }\r\n\r\n    public void close() {\r\n        try {\r\n            rpcChannel.close();\r\n        } catch (IOException | TimeoutException e) {\r\n            log.error(&quot;Error closing RPC channel&quot;, e);\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe code works except for the invocation of `realmProvider.getRealmsStream()` within the `getConfiguration(String clientName)` method. This invocation results in the following error message: `java.lang.IllegalStateException: Cannot access delegate without a transaction`\r\n\r\nI would be genuinely grateful for any resources which might lead me to a working RabbitMQ Queue Consumer with access to the realms and clients within keycloak.\r\n\r\n**Further Testing â 1:**\r\n\r\nI edited the method `getConfiguration(String clientName)` to begin a transaction if none is active.\r\n\r\n```java\r\npublic ConfigurationResponse getConfiguration(String clientName) {\r\n        if (!keycloakSession.getTransactionManager().isActive()) {\r\n            keycloakSession.getTransactionManager().begin();\r\n        }\r\n        log.info(&quot;Getting configuration for client &quot; + clientName);\r\n        RealmProvider realmProvider = keycloakSession.realms();\r\n        // This one succeeds\r\n        log.info(&quot;Realms: &quot; + realmProvider);\r\n        // This one fails\r\n        log.info(keycloakSession.getTransactionManager().isActive());\r\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\r\n        keycloakSession.getTransactionManager().commit();\r\n        return null;\r\n    }\r\n```\r\nThe first method call succeeds, as you can see in the log. Any call afterward fails:\r\n\r\n```\r\n11:40:40,155 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4)  [.] Received request for client gateway-test-client\r\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Getting configuration for client gateway-test-client\r\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\r\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) true\r\n11:40:40,505 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: [7d0ce53d-a1fe-4769-bbdc-b4410c162a3d@72a3d4c0, c73da31a-2c74-4650-a5e8-3f514516fb5f@1cd216b1, 188fcb9d-1411-445b-9849-3e0f849c06fb@65507055, c5dbb5ef-1482-4b88-9b94-3004b62a7508@7a07c3fb]\r\n11:40:48,014 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] Received request for client gateway-test-client\r\n11:40:48,015 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Getting configuration for client gateway-test-client\r\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\r\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) true\r\n11:40:48,016 ERROR [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] java.lang.IllegalStateException: Cannot access delegate without a transaction\r\n```\r\n\r\n**Further Testing â 2 (Possible Solution):**\r\n\r\nI changed the method `postInit(KeycloakSessionFactory factory)` in the `RabbitMqEventListenerProviderFactory` Class as follows:\r\n\r\n```java\r\n@Override\r\n    public void postInit(KeycloakSessionFactory factory) {\r\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory);\r\n    }\r\n```\r\n\r\nInstead of handing over a Keycloak Session created by `factory.create()` I pass the KeycloakSessionFactory to the `RabbitMqRpcReceiver`.\r\n\r\nThis gives me the opportunity to create a new session every time the method `getConfiguration`:\r\n\r\n```java\r\npublic ConfigurationResponse getConfiguration(String clientName) {\r\n        KeycloakSession keycloakSession = sessionFactory.create();\r\n        if (!keycloakSession.getTransactionManager().isActive()) {\r\n            keycloakSession.getTransactionManager().begin();\r\n        }\r\n        log.info(&quot;Getting configuration for client &quot; + clientName);\r\n        RealmProvider realmProvider = keycloakSession.realms();\r\n        // This one succeeds\r\n        log.info(&quot;Realms: &quot; + realmProvider);\r\n        // This one fails\r\n        log.info(keycloakSession.getTransactionManager().isActive());\r\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\r\n        keycloakSession.getTransactionManager().commit();\r\n        keycloakSession.close();\r\n        return null;\r\n    }\r\n```\r\n\r\nThis approach seems to work as expected every call succeeds now, but I do not know if this is best practice.\r\nUntil I find some better solution, I will stick to this one.\r\n","title":"Keycloak SPI access realmProvider.getRealmsStream() | Usage of transactions","body":"<p>I'm working on a Keycloak SPI that publishes changes to Realms and Clients in Keycloak via RabbitMQ and handles RabbitMQ RPC requests to receive Keycloak specific configuration. The first part is already functioning.</p>\n<p>The second part is causing issues. I'm using a singleton class called <code>RabbitMqRpcReceiver</code> which handles the reception of RPC requests. This singleton class is instantiated within the Factory inside the <code>RabbitMqEventListenerProviderFactory</code>, in the <code>postInit()</code> method.</p>\n<p>Here are the code snippets:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@AutoService(EventListenerProviderFactory.class)\n@JBossLog\npublic class RabbitMqEventListenerProviderFactory implements EventListenerProviderFactory {\n\n    private RabbitMqConfig cfg;\n    private RabbitMqRpcReceiver rpcReceiver;\n\n    @Override\n    public EventListenerProvider create(KeycloakSession session) {\n        return new RabbitMqEventListenerProvider(cfg, session);\n    }\n\n    @Override\n    public void init(Scope config) {\n        cfg = RabbitMqConfig.createFromScope(config);\n    }\n\n    @Override\n    public void postInit(KeycloakSessionFactory factory) {\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory.create());\n    }\n\n    @Override\n    public void close() {\n        if (rpcReceiver != null) {\n            rpcReceiver.close();\n        }\n    }\n\n    @Override\n    public String getId() {\n        return &quot;keycloak-to-rabbitmq&quot;;\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\n@JBossLog\npublic class RabbitMqRpcReceiver {\n    private final KeycloakSession keycloakSession;\n    public static final String RPC_QUEUE_NAME = &quot;rpc_queue&quot;;\n    private Channel rpcChannel;\n    private static RabbitMqRpcReceiver instance = null;\n\n    public static RabbitMqRpcReceiver getInstance(RabbitMqConfig cfg, KeycloakSession session) {\n        if (instance == null) {\n            instance = new RabbitMqRpcReceiver(cfg, session);\n        }\n        return instance;\n    }\n\n    private RabbitMqRpcReceiver(RabbitMqConfig cfg, KeycloakSession session) {\n        this.keycloakSession = session;\n\n        ConnectionFactory factory = new ConnectionFactory();\n\n        factory.setUsername(cfg.getUsername());\n        factory.setPassword(cfg.getPassword());\n        factory.setVirtualHost(cfg.getVhost());\n        factory.setHost(cfg.getHostUrl());\n        factory.setPort(cfg.getPort());\n\n        if (Boolean.TRUE.equals(cfg.getUseTls())) {\n            try {\n                factory.useSslProtocol();\n            } catch (Exception e) {\n                log.error(&quot;Could not use SSL protocol&quot;, e);\n            }\n        }\n\n        try {\n            rpcChannel = factory.newConnection().createChannel();\n            rpcChannel.queueDeclare(RPC_QUEUE_NAME, false, false, false, null);\n            rpcChannel.basicQos(1);\n\n            log.infof(&quot; [x] Awaiting RPC requests&quot;);\n\n            rpcChannel.basicConsume(RPC_QUEUE_NAME, false, (consumerTag, delivery) -&gt; handleDelivery(delivery), (consumerTag -&gt; {}));\n\n        } catch (IOException e) {\n            log.error(&quot;Error declaring RPC queue&quot;, e);\n        } catch (TimeoutException e) {\n            log.error(&quot;Timeout declaring RPC queue&quot;, e);\n        }\n    }\n\n    private void handleDelivery(Delivery delivery) {\n        AMQP.BasicProperties replyProps = new AMQP.BasicProperties\n                .Builder()\n                .contentType(&quot;application/json&quot;)\n                .headers(Map.of(&quot;__TypeId__&quot;, ConfigurationResponse.class.getName()))\n                .contentEncoding(StandardCharsets.UTF_8.name())\n                .correlationId(delivery.getProperties().getCorrelationId())\n                .build();\n\n        ObjectMapper mapper = new ObjectMapper();\n        ConfigurationRequest request = null;\n        ConfigurationResponse response = null;\n        try {\n            request = mapper.readValue(delivery.getBody(), ConfigurationRequest.class);\n            log.infof(&quot; [.] Received request for client %s&quot;, request.client());\n\n            response = getConfiguration(request.client());\n\n        } catch (RuntimeException | IOException e) {\n            log.error(&quot; [.] &quot; + e.toString());\n        } finally {\n            try {\n                rpcChannel.basicPublish(&quot;&quot;, delivery.getProperties().getReplyTo(), replyProps, mapper.writeValueAsBytes(response));\n                rpcChannel.basicAck(delivery.getEnvelope().getDeliveryTag(), false);\n            } catch (IOException e) {\n                log.error(&quot;Error sending response&quot;, e);\n            }\n        }\n    }\n\n    public ConfigurationResponse getConfiguration(String clientName) {\n        log.info(&quot;Getting configuration for client &quot; + clientName);\n        RealmProvider realmProvider = keycloakSession.realms();\n\n        // This one succeeds\n        log.info(&quot;Realms: &quot; + realmProvider);\n        // This one fails\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\n\n        return null;\n    }\n\n    public void close() {\n        try {\n            rpcChannel.close();\n        } catch (IOException | TimeoutException e) {\n            log.error(&quot;Error closing RPC channel&quot;, e);\n        }\n    }\n}\n</code></pre>\n<p>The code works except for the invocation of <code>realmProvider.getRealmsStream()</code> within the <code>getConfiguration(String clientName)</code> method. This invocation results in the following error message: <code>java.lang.IllegalStateException: Cannot access delegate without a transaction</code></p>\n<p>I would be genuinely grateful for any resources which might lead me to a working RabbitMQ Queue Consumer with access to the realms and clients within keycloak.</p>\n<p><strong>Further Testing â 1:</strong></p>\n<p>I edited the method <code>getConfiguration(String clientName)</code> to begin a transaction if none is active.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ConfigurationResponse getConfiguration(String clientName) {\n        if (!keycloakSession.getTransactionManager().isActive()) {\n            keycloakSession.getTransactionManager().begin();\n        }\n        log.info(&quot;Getting configuration for client &quot; + clientName);\n        RealmProvider realmProvider = keycloakSession.realms();\n        // This one succeeds\n        log.info(&quot;Realms: &quot; + realmProvider);\n        // This one fails\n        log.info(keycloakSession.getTransactionManager().isActive());\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\n        keycloakSession.getTransactionManager().commit();\n        return null;\n    }\n</code></pre>\n<p>The first method call succeeds, as you can see in the log. Any call afterward fails:</p>\n<pre><code>11:40:40,155 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4)  [.] Received request for client gateway-test-client\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Getting configuration for client gateway-test-client\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\n11:40:40,156 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) true\n11:40:40,505 INFO  [RabbitMqRpcReceiver] (pool-8-thread-4) Realms: [7d0ce53d-a1fe-4769-bbdc-b4410c162a3d@72a3d4c0, c73da31a-2c74-4650-a5e8-3f514516fb5f@1cd216b1, 188fcb9d-1411-445b-9849-3e0f849c06fb@65507055, c5dbb5ef-1482-4b88-9b94-3004b62a7508@7a07c3fb]\n11:40:48,014 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] Received request for client gateway-test-client\n11:40:48,015 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Getting configuration for client gateway-test-client\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) Realms: org.keycloak.models.cache.infinispan.RealmCacheSession@5de3281a\n11:40:48,016 INFO  [RabbitMqRpcReceiver] (pool-8-thread-3) true\n11:40:48,016 ERROR [RabbitMqRpcReceiver] (pool-8-thread-3)  [.] java.lang.IllegalStateException: Cannot access delegate without a transaction\n</code></pre>\n<p><strong>Further Testing â 2 (Possible Solution):</strong></p>\n<p>I changed the method <code>postInit(KeycloakSessionFactory factory)</code> in the <code>RabbitMqEventListenerProviderFactory</code> Class as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\n    public void postInit(KeycloakSessionFactory factory) {\n        rpcReceiver = RabbitMqRpcReceiver.getInstance(cfg, factory);\n    }\n</code></pre>\n<p>Instead of handing over a Keycloak Session created by <code>factory.create()</code> I pass the KeycloakSessionFactory to the <code>RabbitMqRpcReceiver</code>.</p>\n<p>This gives me the opportunity to create a new session every time the method <code>getConfiguration</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ConfigurationResponse getConfiguration(String clientName) {\n        KeycloakSession keycloakSession = sessionFactory.create();\n        if (!keycloakSession.getTransactionManager().isActive()) {\n            keycloakSession.getTransactionManager().begin();\n        }\n        log.info(&quot;Getting configuration for client &quot; + clientName);\n        RealmProvider realmProvider = keycloakSession.realms();\n        // This one succeeds\n        log.info(&quot;Realms: &quot; + realmProvider);\n        // This one fails\n        log.info(keycloakSession.getTransactionManager().isActive());\n        log.info(&quot;Realms: &quot; + realmProvider.getRealmsStream().toList());\n        keycloakSession.getTransactionManager().commit();\n        keycloakSession.close();\n        return null;\n    }\n</code></pre>\n<p>This approach seems to work as expected every call succeeds now, but I do not know if this is best practice.\nUntil I find some better solution, I will stick to this one.</p>\n"},{"tags":["java","spring-boot","maven","configuration","yaml"],"answers":[{"comments":[{"owner":{"account_id":25569534,"reputation":43,"user_id":19350126,"display_name":"datta900"},"score":0,"creation_date":1691236795,"post_id":76841504,"comment_id":135466683,"body_markdown":"Thanks! I&#39;ve tried with both scenarios but it doesn&#39;t work either :(","body":"Thanks! I&#39;ve tried with both scenarios but it doesn&#39;t work either :("},{"owner":{"account_id":14402680,"reputation":312,"user_id":10403784,"display_name":"Vadim Yemelyanov"},"score":0,"creation_date":1691237441,"post_id":76841504,"comment_id":135466742,"body_markdown":"@datta900 I added an example of how to resolve the relative path of file. \nUnfortunately, i cant tell that your maven-resource plugin is fine, so you have to check it by yourself)","body":"@datta900 I added an example of how to resolve the relative path of file.  Unfortunately, i cant tell that your maven-resource plugin is fine, so you have to check it by yourself)"},{"owner":{"account_id":25569534,"reputation":43,"user_id":19350126,"display_name":"datta900"},"score":0,"creation_date":1691238596,"post_id":76841504,"comment_id":135466871,"body_markdown":"Got your point, i&#39;ve edited the answer","body":"Got your point, i&#39;ve edited the answer"},{"owner":{"account_id":25569534,"reputation":43,"user_id":19350126,"display_name":"datta900"},"score":0,"creation_date":1691309643,"post_id":76841504,"comment_id":135472281,"body_markdown":"SOLUTION: I&#39;ve insert web-assembly-plugin, to copy the etc folder inside the jar, about the table proposed by @Vadim Yemelyanov it was part of the solution. Inside the ProprtiesConfiguration i&#39;ve written classpath:/etc/... and now can find the file. PS: The example i was following loads a file .sh that copies inside a config_folder and then inside the project with all the configuration it needs (for all modules) this is why it&#39;s using file: and not classpath. Thanks for the help","body":"SOLUTION: I&#39;ve insert web-assembly-plugin, to copy the etc folder inside the jar, about the table proposed by @Vadim Yemelyanov it was part of the solution. Inside the ProprtiesConfiguration i&#39;ve written classpath:/etc/... and now can find the file. PS: The example i was following loads a file .sh that copies inside a config_folder and then inside the project with all the configuration it needs (for all modules) this is why it&#39;s using file: and not classpath. Thanks for the help"}],"tags":[],"owner":{"account_id":14402680,"reputation":312,"user_id":10403784,"display_name":"Vadim Yemelyanov"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691237342,"creation_date":1691236308,"answer_id":76841504,"question_id":76841306,"body_markdown":"**file** or FileSystemResource is not connected to ApplicationSystemResource, that basically means that you have to put absolute path to it. \r\n\r\nYou if you want relative path - you have to use either **classpath:** or none.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nIf you can`t find what is relative location of your file:\r\nbuild your service, find the jar, unarchive the jar, find your file in the path - thats your relative path in the classpath. **If there is no file** - that means that you have a problem in copying file to jar. \r\nExample photo of my service) \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/5uaD7.png\r\n  [2]: https://i.stack.imgur.com/2WHtX.png\r\n","title":"Inject custom properties folder in Spring Boot Application","body":"<p><strong>file</strong> or FileSystemResource is not connected to ApplicationSystemResource, that basically means that you have to put absolute path to it.</p>\n<p>You if you want relative path - you have to use either <strong>classpath:</strong> or none.</p>\n<p><a href=\"https://i.stack.imgur.com/5uaD7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5uaD7.png\" alt=\"enter image description here\" /></a></p>\n<p>If you can`t find what is relative location of your file:\nbuild your service, find the jar, unarchive the jar, find your file in the path - thats your relative path in the classpath. <strong>If there is no file</strong> - that means that you have a problem in copying file to jar.\nExample photo of my service)</p>\n<p><a href=\"https://i.stack.imgur.com/2WHtX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2WHtX.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":25569534,"reputation":43,"user_id":19350126,"display_name":"datta900"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":77,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76841504,"answer_count":1,"score":0,"last_activity_date":1691238578,"creation_date":1691233050,"question_id":76841306,"body_markdown":"In my Spring Boot Application, i would like to externalise my ad-hoc configurations inside a folder. The folder is : src/main/etc/config/advanced/information-properties.yml.\r\n\r\nOf course i have and use application.yml file in resource folder. \r\n\r\nUsing maven-resources-plugin, i&#39;m copying this :\r\n\r\n\r\n\r\n                      &lt;executions&gt;\r\n                        &lt;execution&gt;\r\n                            &lt;id&gt;copy-config&lt;/id&gt;\r\n                            &lt;goals&gt;\r\n                                &lt;goal&gt;copy-resources&lt;/goal&gt;\r\n                            &lt;/goals&gt;\r\n                            &lt;phase&gt;generate-resources&lt;/phase&gt;\r\n                            &lt;configuration&gt;\r\n                                &lt;outputDirectory&gt;${project.build.directory}/config&lt;/outputDirectory&gt;\r\n                                &lt;resources&gt;\r\n                                    &lt;resource&gt;\r\n                                        &lt;directory&gt;${basedir}/src/main/etc/config/&lt;/directory&gt;\r\n                                        &lt;includes&gt;\r\n                                            &lt;include&gt;**/*&lt;/include&gt;\r\n                                        &lt;/includes&gt;\r\n                                    &lt;/resource&gt;\r\n                                &lt;/resources&gt;\r\n                            &lt;/configuration&gt;\r\n                        &lt;/execution&gt;\r\n                    &lt;/executions&gt;\r\n\r\n\r\nSo, I&#39;m trying to refer to them/it using this property file: \r\n\r\n    @ConfigurationProperties(prefix = &quot;information&quot;)\r\n    @PropertySource(value = &quot;file:config/advanced/information-properties.yml&quot;, ignoreResourceNotFound = true, factory = YamlPropertyLoaderFactory.class)\r\n    public class InformationPropertiesConfiguration {\r\n        private ApplicationConfig application;\r\n    \r\n        @Data\r\n        public class ApplicationConfig{\r\n            private String applicationConfigPath;\r\n        }\r\n    }\r\n\r\n\r\nBut when i start the application my factory doesn&#39;t find the .yml file. \r\n\r\n\r\n    2023-08-05 12:45:16.341  INFO 18708 --- [           main] o.s.c.a.ConfigurationClassParser         : Properties location [file:config/advanced/information-properties.yml] not resolvable: config\\advanced\\information-properties.yml (Impossibile trovare il percorso specificato)&quot;\r\n\r\nWhat am i missing? \r\n\r\nThanks in advance\r\n\r\n\r\n\r\nEDIT \r\nCompiling the project: \r\n[![Compiling the project][1]][1]\r\n\r\n[![Unpacking the Jar][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/dyZWR.png\r\n  [2]: https://i.stack.imgur.com/sowFQ.png\r\n\r\n\r\n\r\nI&#39;m trying to understand now if i should in some ways put the folder inside the it. i think in this case it should be the outputDirectory the problem. am i right? ","title":"Inject custom properties folder in Spring Boot Application","body":"<p>In my Spring Boot Application, i would like to externalise my ad-hoc configurations inside a folder. The folder is : src/main/etc/config/advanced/information-properties.yml.</p>\n<p>Of course i have and use application.yml file in resource folder.</p>\n<p>Using maven-resources-plugin, i'm copying this :</p>\n<pre><code>                  &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;copy-config&lt;/id&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;copy-resources&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;phase&gt;generate-resources&lt;/phase&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;${project.build.directory}/config&lt;/outputDirectory&gt;\n                            &lt;resources&gt;\n                                &lt;resource&gt;\n                                    &lt;directory&gt;${basedir}/src/main/etc/config/&lt;/directory&gt;\n                                    &lt;includes&gt;\n                                        &lt;include&gt;**/*&lt;/include&gt;\n                                    &lt;/includes&gt;\n                                &lt;/resource&gt;\n                            &lt;/resources&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n</code></pre>\n<p>So, I'm trying to refer to them/it using this property file:</p>\n<pre><code>@ConfigurationProperties(prefix = &quot;information&quot;)\n@PropertySource(value = &quot;file:config/advanced/information-properties.yml&quot;, ignoreResourceNotFound = true, factory = YamlPropertyLoaderFactory.class)\npublic class InformationPropertiesConfiguration {\n    private ApplicationConfig application;\n\n    @Data\n    public class ApplicationConfig{\n        private String applicationConfigPath;\n    }\n}\n</code></pre>\n<p>But when i start the application my factory doesn't find the .yml file.</p>\n<pre><code>2023-08-05 12:45:16.341  INFO 18708 --- [           main] o.s.c.a.ConfigurationClassParser         : Properties location [file:config/advanced/information-properties.yml] not resolvable: config\\advanced\\information-properties.yml (Impossibile trovare il percorso specificato)&quot;\n</code></pre>\n<p>What am i missing?</p>\n<p>Thanks in advance</p>\n<p>EDIT\nCompiling the project:\n<a href=\"https://i.stack.imgur.com/dyZWR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dyZWR.png\" alt=\"Compiling the project\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/sowFQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sowFQ.png\" alt=\"Unpacking the Jar\" /></a></p>\n<p>I'm trying to understand now if i should in some ways put the folder inside the it. i think in this case it should be the outputDirectory the problem. am i right?</p>\n"},{"tags":["java","android","android-studio","screenshot"],"comments":[{"owner":{"account_id":39846,"reputation":991173,"user_id":115145,"accept_rate":84,"display_name":"CommonsWare"},"score":0,"creation_date":1691238440,"post_id":76841623,"comment_id":135466853,"body_markdown":"&quot;I want to hit the default/tradition screenshot from android app code. e.g. Shutter bar screenshot, three finger screenshot or using power and volume button&quot; -- that &quot;captures the whole screen, including the status and navigation bars&quot;, which is what you say that you do not want.","body":"&quot;I want to hit the default/tradition screenshot from android app code. e.g. Shutter bar screenshot, three finger screenshot or using power and volume button&quot; -- that &quot;captures the whole screen, including the status and navigation bars&quot;, which is what you say that you do not want."}],"owner":{"account_id":25956799,"reputation":138,"user_id":19674027,"display_name":"user2357113"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691238570,"creation_date":1691238272,"question_id":76841623,"body_markdown":"I&#39;m currently working on an Android app and I&#39;m facing an issue with taking screenshots programmatically. I want to capture a screenshot of the current activity&#39;s view without including the **Window/Decor** view. I have tried the traditional approach of using `getWindow().getDecorView().getRootView()`\r\n\r\nI did some research on this topic and didn&#39;t find it useful. Then I had an idea what about using this approach instead\r\n\r\nI want to hit the default/traditional screenshot from the Android app code. e.g. **Shutter bar screenshot, three-finger screenshot or using power and volume buttons.**","title":"Taking a screenshot in Android app using Java without using Window/Decor view from Activity","body":"<p>I'm currently working on an Android app and I'm facing an issue with taking screenshots programmatically. I want to capture a screenshot of the current activity's view without including the <strong>Window/Decor</strong> view. I have tried the traditional approach of using <code>getWindow().getDecorView().getRootView()</code></p>\n<p>I did some research on this topic and didn't find it useful. Then I had an idea what about using this approach instead</p>\n<p>I want to hit the default/traditional screenshot from the Android app code. e.g. <strong>Shutter bar screenshot, three-finger screenshot or using power and volume buttons.</strong></p>\n"},{"tags":["java","spring","intellij-idea","spring-webflux","java-platform-module-system"],"owner":{"account_id":1934643,"reputation":119,"user_id":1743210,"accept_rate":60,"display_name":"Jan Nowak"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691238461,"creation_date":1691238461,"question_id":76841635,"body_markdown":"I&#39;m learning myself Java Platform Module System, and it&#39;s going very hard. Currently I just trying figure out one problem with my IDE.\r\nI extracted essence into separate project: https://github.com/tomi127/JPMS-problem\r\n\r\nLong story short: \r\nwhen I start ```com.data.Application``` through IntelliJ (PPM&gt;Run/debug) server starts up without any problems. But when I&#39;m making POST request to localhost:8080/storeInDB I got server error:\r\n\r\n```Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to module spring.core```\r\n\r\nBut when I do ```mvn clean package``` and then run ```java -jar data-module-3.1.2.jar``` it works without any problems.\r\n\r\nMy questions are: \r\n- is somehow ```spring-boot-maven-plugin``` disables JPMS, or IntelliJ by default uses some special parameters for JVM?\r\n- what is best approach during development in such cases? Should I start server by maven (but it is uncomfortable) or IDE can be somehow configured to not have this type of errors?","title":"Spring multi-module JPMS project - exception only in IntellIJ","body":"<p>I'm learning myself Java Platform Module System, and it's going very hard. Currently I just trying figure out one problem with my IDE.\nI extracted essence into separate project: <a href=\"https://github.com/tomi127/JPMS-problem\" rel=\"nofollow noreferrer\">https://github.com/tomi127/JPMS-problem</a></p>\n<p>Long story short:\nwhen I start <code>com.data.Application</code> through IntelliJ (PPM&gt;Run/debug) server starts up without any problems. But when I'm making POST request to localhost:8080/storeInDB I got server error:</p>\n<p><code>Caused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected final java.lang.Class java.lang.ClassLoader.defineClass(java.lang.String,byte[],int,int,java.security.ProtectionDomain) throws java.lang.ClassFormatError accessible: module java.base does not &quot;opens java.lang&quot; to module spring.core</code></p>\n<p>But when I do <code>mvn clean package</code> and then run <code>java -jar data-module-3.1.2.jar</code> it works without any problems.</p>\n<p>My questions are:</p>\n<ul>\n<li>is somehow <code>spring-boot-maven-plugin</code> disables JPMS, or IntelliJ by default uses some special parameters for JVM?</li>\n<li>what is best approach during development in such cases? Should I start server by maven (but it is uncomfortable) or IDE can be somehow configured to not have this type of errors?</li>\n</ul>\n"},{"tags":["java","shell","remote-debugging","jvm-arguments"],"answers":[{"comments":[{"owner":{"account_id":1798355,"reputation":1887,"user_id":1637252,"display_name":"BitwiseMan"},"score":0,"creation_date":1355351618,"post_id":2011420,"comment_id":19066806,"body_markdown":"See HEX&#39;s answer.  That is how you set the options using an environment variable on OS X.","body":"See HEX&#39;s answer.  That is how you set the options using an environment variable on OS X."}],"tags":[],"owner":{"account_id":73773,"reputation":11214,"user_id":212275,"display_name":"ZoogieZork"},"comment_count":1,"down_vote_count":1,"up_vote_count":61,"is_accepted":true,"score":60,"last_activity_date":1262761729,"creation_date":1262761729,"answer_id":2011420,"question_id":2011311,"body_markdown":"I don&#39;t know of any JVM that actually checks the `JAVA_OPTS` environment variable.  Usually this is used in scripts which launch the JVM and they usually just add it to the `java` command-line.\r\n\r\nThe key thing to understand here is that arguments to `java` that come *before* the `-jar analyse.jar` bit will only affect the JVM and *won&#39;t* be passed along to your program.  So, modifying the `java` line in your script to:\r\n\r\n    java $JAVA_OPTS -jar analyse.jar $*\r\n\r\nShould &quot;just work&quot;.","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>I don't know of any JVM that actually checks the <code>JAVA_OPTS</code> environment variable.  Usually this is used in scripts which launch the JVM and they usually just add it to the <code>java</code> command-line.</p>\n\n<p>The key thing to understand here is that arguments to <code>java</code> that come <em>before</em> the <code>-jar analyse.jar</code> bit will only affect the JVM and <em>won't</em> be passed along to your program.  So, modifying the <code>java</code> line in your script to:</p>\n\n<pre><code>java $JAVA_OPTS -jar analyse.jar $*\n</code></pre>\n\n<p>Should \"just work\".</p>\n"},{"comments":[{"owner":{"account_id":1798355,"reputation":1887,"user_id":1637252,"display_name":"BitwiseMan"},"score":7,"creation_date":1355351680,"post_id":11615960,"comment_id":19066829,"body_markdown":"_This_ this the real answer.  I went looking around for hours to find this.","body":"<i>This</i> this the real answer.  I went looking around for hours to find this."},{"owner":{"account_id":1056904,"reputation":1647,"user_id":1059400,"accept_rate":100,"display_name":"HEX"},"score":3,"creation_date":1358330560,"post_id":11615960,"comment_id":19958596,"body_markdown":"@Nerrve Special for you installed Windows XP. Works fine. Are you sure you did everything correctly?","body":"@Nerrve Special for you installed Windows XP. Works fine. Are you sure you did everything correctly?"},{"owner":{"account_id":1056904,"reputation":1647,"user_id":1059400,"accept_rate":100,"display_name":"HEX"},"score":0,"creation_date":1358332356,"post_id":11615960,"comment_id":19959551,"body_markdown":"@Nerrve You must create environment variable called `_JAVA_OPTIONS`. Example: http://cs417020.userapi.com/v417020976/3764/hwBZ419TXcQ.jpg","body":"@Nerrve You must create environment variable called <code>_JAVA_OPTIONS</code>. Example: <a href=\"http://cs417020.userapi.com/v417020976/3764/hwBZ419TXcQ.jpg\" rel=\"nofollow noreferrer\">cs417020.userapi.com/v417020976/3764/hwBZ419TXcQ.jpg</a>"},{"owner":{"account_id":320407,"reputation":14632,"user_id":638670,"accept_rate":82,"display_name":"Abbas Gadhia"},"score":0,"creation_date":1358339320,"post_id":11615960,"comment_id":19962719,"body_markdown":"oops! you&#39;re right. its works! i had made a spelling mistake earlier :P thanks a bunch!","body":"oops! you&#39;re right. its works! i had made a spelling mistake earlier :P thanks a bunch!"},{"owner":{"account_id":117431,"reputation":5211,"user_id":307525,"accept_rate":44,"display_name":"Hubbitus"},"score":10,"creation_date":1429286497,"post_id":11615960,"comment_id":47543872,"body_markdown":"You may also would use JAVA_TOOL_OPTIONS (http://stackoverflow.com/questions/28327620/difference-between-java-options-java-tool-options-and-java-opts)","body":"You may also would use JAVA_TOOL_OPTIONS (<a href=\"http://stackoverflow.com/questions/28327620/difference-between-java-options-java-tool-options-and-java-opts\" title=\"difference between java options java tool options and java opts\">stackoverflow.com/questions/28327620/&hellip;</a>)"},{"owner":{"account_id":3338406,"reputation":4475,"user_id":2805265,"accept_rate":73,"display_name":"geg"},"score":2,"creation_date":1551032559,"post_id":11615960,"comment_id":96481616,"body_markdown":"@Hubbitus your suggestion appears to be the correct answer. you should add it","body":"@Hubbitus your suggestion appears to be the correct answer. you should add it"},{"owner":{"account_id":117431,"reputation":5211,"user_id":307525,"accept_rate":44,"display_name":"Hubbitus"},"score":3,"creation_date":1551034343,"post_id":11615960,"comment_id":96482150,"body_markdown":"I can&#39;t. I got &quot;Trivial answer converted to comment&quot;","body":"I can&#39;t. I got &quot;Trivial answer converted to comment&quot;"},{"owner":{"account_id":969638,"reputation":2243,"user_id":992426,"accept_rate":86,"display_name":"habitats"},"score":1,"creation_date":1577484527,"post_id":11615960,"comment_id":105185547,"body_markdown":"Holy moly this worked. Why is this so badly documented?","body":"Holy moly this worked. Why is this so badly documented?"},{"owner":{"account_id":290946,"reputation":5889,"user_id":592792,"accept_rate":40,"display_name":"Andr&#233; Werlang"},"score":0,"creation_date":1595440694,"post_id":11615960,"comment_id":111478511,"body_markdown":"Beware: this prints a line to stderr","body":"Beware: this prints a line to stderr"},{"owner":{"account_id":604462,"reputation":1040,"user_id":309261,"display_name":"Neon"},"score":0,"creation_date":1614199313,"post_id":11615960,"comment_id":117316228,"body_markdown":"Thanks, I was able to set `_JAVA_OPTIONS` environment variable using Java 8u282 running in a Docker container and it was picked up!","body":"Thanks, I was able to set <code>_JAVA_OPTIONS</code> environment variable using Java 8u282 running in a Docker container and it was picked up!"}],"tags":[],"owner":{"account_id":1056904,"reputation":1647,"user_id":1059400,"accept_rate":100,"display_name":"HEX"},"comment_count":10,"down_vote_count":0,"up_vote_count":104,"is_accepted":false,"score":104,"last_activity_date":1343058504,"creation_date":1343058504,"answer_id":11615960,"question_id":2011311,"body_markdown":"You can setup `_JAVA_OPTIONS` instead of `JAVA_OPTS`. This should work without `$_JAVA_OPTIONS`.","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>You can setup <code>_JAVA_OPTIONS</code> instead of <code>JAVA_OPTS</code>. This should work without <code>$_JAVA_OPTIONS</code>.</p>\n"},{"tags":[],"owner":{"account_id":98194,"reputation":4266,"user_id":265954,"display_name":"t0r0X"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691237423,"creation_date":1663095238,"answer_id":73708006,"question_id":2011311,"body_markdown":"In the past 12 years some changes were made:\r\n\r\n- **Environment variable `JDK_JAVA_OPTIONS`**: this is the recommended way to do what you wanted starting with Java 9, see [Using the JDK_JAVA_OPTIONS Launcher Environment Variable][1] in the Oracle Java 9 documentation, and this comprehensive answer [What is the difference between JDK_JAVA_OPTIONS and JAVA_TOOL_OPTIONS when using Java 11?][2].\r\n\r\n - Environment variable `JAVA_OPTS`: it was NOT and is NOT a standardized option. Some shell script wrappers for Java based tools do evaluate it, an example of how this works is in the answer from ZoogieZork.\r\n\r\n- Environment variable `_JAVA_OPTIONS` (mentioned by HEX): it is nowadays deprecated/undocumented, see [Oracle announcement][3] (section &quot;`Add a new launcher environment variable JDK_JAVA_OPTIONS`&quot;).\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/9/tools/java.htm#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE__USINGTHEJDK_JAVA_OPTIONSLAUNCHERENV-F3C0E3BA\r\n  [2]: https://stackoverflow.com/questions/52986487/what-is-the-difference-between-jdk-java-options-and-java-tool-options-when-using\r\n  [3]: https://www.oracle.com/java/technologies/javase/9-enhancements.html","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>In the past 12 years some changes were made:</p>\n<ul>\n<li><p><strong>Environment variable <code>JDK_JAVA_OPTIONS</code></strong>: this is the recommended way to do what you wanted starting with Java 9, see <a href=\"https://docs.oracle.com/javase/9/tools/java.htm#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE__USINGTHEJDK_JAVA_OPTIONSLAUNCHERENV-F3C0E3BA\" rel=\"nofollow noreferrer\">Using the JDK_JAVA_OPTIONS Launcher Environment Variable</a> in the Oracle Java 9 documentation, and this comprehensive answer <a href=\"https://stackoverflow.com/questions/52986487/what-is-the-difference-between-jdk-java-options-and-java-tool-options-when-using\">What is the difference between JDK_JAVA_OPTIONS and JAVA_TOOL_OPTIONS when using Java 11?</a>.</p>\n</li>\n<li><p>Environment variable <code>JAVA_OPTS</code>: it was NOT and is NOT a standardized option. Some shell script wrappers for Java based tools do evaluate it, an example of how this works is in the answer from ZoogieZork.</p>\n</li>\n<li><p>Environment variable <code>_JAVA_OPTIONS</code> (mentioned by HEX): it is nowadays deprecated/undocumented, see <a href=\"https://www.oracle.com/java/technologies/javase/9-enhancements.html\" rel=\"nofollow noreferrer\">Oracle announcement</a> (section &quot;<code>Add a new launcher environment variable JDK_JAVA_OPTIONS</code>&quot;).</p>\n</li>\n</ul>\n"}],"owner":{"account_id":60584,"reputation":9058,"user_id":180904,"accept_rate":83,"display_name":"Ashika Umanga Umagiliya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":115758,"favorite_count":0,"down_vote_count":0,"up_vote_count":59,"accepted_answer_id":2011420,"answer_count":3,"score":59,"last_activity_date":1691237423,"creation_date":1262759652,"question_id":2011311,"body_markdown":"In a shell script, I have set the JAVA_OPTS environment variable (to enable remote debugging and increase memory), and then I execute the jar file as follows:\r\n\r\n    export JAVA_OPTS=&quot;-Xdebug -Xrunjdwp:transport=dt_socket,address=8001,server=y,suspend=n -Xms512m -Xmx512m&quot;\r\n    java -jar analyse.jar $*\r\n\r\nBut it seems there is no effect of the JAVA_OPTS env variable as I cannot connect to remote-debugging and I see no change in memory for the JVM.\r\n\r\nWhat could be the problem?\r\n\r\nPS: I cannot use those settings in the `java -jar analyse.jar $*` command because I process command line arguments in the application. ","title":"Running java with JAVA_OPTS env variable has no effect","body":"<p>In a shell script, I have set the JAVA_OPTS environment variable (to enable remote debugging and increase memory), and then I execute the jar file as follows:</p>\n\n<pre><code>export JAVA_OPTS=\"-Xdebug -Xrunjdwp:transport=dt_socket,address=8001,server=y,suspend=n -Xms512m -Xmx512m\"\njava -jar analyse.jar $*\n</code></pre>\n\n<p>But it seems there is no effect of the JAVA_OPTS env variable as I cannot connect to remote-debugging and I see no change in memory for the JVM.</p>\n\n<p>What could be the problem?</p>\n\n<p>PS: I cannot use those settings in the <code>java -jar analyse.jar $*</code> command because I process command line arguments in the application. </p>\n"},{"tags":["java","groovy","exceptionhandler"],"answers":[{"tags":[],"owner":{"account_id":6325048,"reputation":3074,"user_id":4911775,"display_name":"CodeScale"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691174573,"creation_date":1691174088,"answer_id":76838428,"question_id":76837696,"body_markdown":"That&#39;s a way to go except that in your case it&#39;s not t but tryblockexception which is suppressed and you don&#39;t need to rethrow tryblockexception neither. \r\n\r\nOther options are try-with-resources for autocloseable type or when possible making sure that the finally clause does not throw ex because it can swallow exceptions from the try block.","title":"Avoiding exception hiding when finally block could throw","body":"<p>That's a way to go except that in your case it's not t but tryblockexception which is suppressed and you don't need to rethrow tryblockexception neither.</p>\n<p>Other options are try-with-resources for autocloseable type or when possible making sure that the finally clause does not throw ex because it can swallow exceptions from the try block.</p>\n"},{"tags":[],"owner":{"account_id":30898,"reputation":8927,"user_id":84538,"accept_rate":100,"display_name":"jon hanson"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691233252,"creation_date":1691233252,"answer_id":76841322,"question_id":76837696,"body_markdown":"Looks fine to me. I would suggest putting the bulk of the code into a re-usable method, e.g.:\r\n\r\n    public interface Attempt {\r\n        void apply() throws Exception;\r\n    }\r\n\r\n    public static void tryCatchFinally(\r\n            Attempt mainF,\r\n            Attempt finallyF\r\n    ) throws Exception {\r\n        Exception tryCatchException = null;\r\n        try {\r\n            mainF.apply();\r\n        } catch (Exception ex) {\r\n            tryCatchException = ex;\r\n            throw ex;\r\n        } finally {\r\n            try {\r\n                finallyF.apply();\r\n            } catch (Exception ex) {\r\n                if (tryCatchException != null) {\r\n                    tryCatchException.addSuppressed(ex);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\nthen you can just use it like this:\r\n\r\n    tryCatchFinally(\r\n            () -&gt; {setupTestEnv(); runTests();},\r\n            () -&gt; cleanupTestEnv()\r\n    );","title":"Avoiding exception hiding when finally block could throw","body":"<p>Looks fine to me. I would suggest putting the bulk of the code into a re-usable method, e.g.:</p>\n<pre><code>public interface Attempt {\n    void apply() throws Exception;\n}\n\npublic static void tryCatchFinally(\n        Attempt mainF,\n        Attempt finallyF\n) throws Exception {\n    Exception tryCatchException = null;\n    try {\n        mainF.apply();\n    } catch (Exception ex) {\n        tryCatchException = ex;\n        throw ex;\n    } finally {\n        try {\n            finallyF.apply();\n        } catch (Exception ex) {\n            if (tryCatchException != null) {\n                tryCatchException.addSuppressed(ex);\n            }\n        }\n    }\n}\n</code></pre>\n<p>then you can just use it like this:</p>\n<pre><code>tryCatchFinally(\n        () -&gt; {setupTestEnv(); runTests();},\n        () -&gt; cleanupTestEnv()\n);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6017,"reputation":12510,"user_id":9950,"accept_rate":67,"display_name":"Peter Kahn"},"score":0,"creation_date":1691420158,"post_id":76841554,"comment_id":135485639,"body_markdown":"Thanks, this is actually for Jenkins CPS groovy, so the use of Throwable is there to ensure we capture both Java and Groovy level exceptions.  Just using Exception alone misses some classes of Java execeptions","body":"Thanks, this is actually for Jenkins CPS groovy, so the use of Throwable is there to ensure we capture both Java and Groovy level exceptions.  Just using Exception alone misses some classes of Java execeptions"}],"tags":[],"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691237221,"creation_date":1691237221,"answer_id":76841554,"question_id":76837696,"body_markdown":"I&#39;m not sure why you have to use a `finally` in such a complex way. You could also just use code that runs after the try-catch block:\r\n\r\n``` lang-java\r\nException priorityException;\r\ntry {\r\n  setupTestEnv();\r\n  runTests();\r\n} catch (Exception ex) {\r\n  priorityException = ex;  // delayed handling\r\n}\r\n\r\ntry {\r\n  cleanupTestEnv();\r\n} catch (Exception ex) {\r\n  if (priorityException != null) {\r\n    priorityException.addSuppressed(ex);\r\n  } else {\r\n    priorityException = ex;\r\n  }\r\n  throw priorityException;\r\n}\r\n```\r\n\r\nPlease note that I used a `catch (Exception ...)` instead of your `Throwable` because catching and handling `Error`s is usually not possible in a useful way. See SO question [Catching Java errors](https://stackoverflow.com/questions/11017304/catching-java-errors) and its answers for better insight.","title":"Avoiding exception hiding when finally block could throw","body":"<p>I'm not sure why you have to use a <code>finally</code> in such a complex way. You could also just use code that runs after the try-catch block:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Exception priorityException;\ntry {\n  setupTestEnv();\n  runTests();\n} catch (Exception ex) {\n  priorityException = ex;  // delayed handling\n}\n\ntry {\n  cleanupTestEnv();\n} catch (Exception ex) {\n  if (priorityException != null) {\n    priorityException.addSuppressed(ex);\n  } else {\n    priorityException = ex;\n  }\n  throw priorityException;\n}\n</code></pre>\n<p>Please note that I used a <code>catch (Exception ...)</code> instead of your <code>Throwable</code> because catching and handling <code>Error</code>s is usually not possible in a useful way. See SO question <a href=\"https://stackoverflow.com/questions/11017304/catching-java-errors\">Catching Java errors</a> and its answers for better insight.</p>\n"}],"owner":{"account_id":6017,"reputation":12510,"user_id":9950,"accept_rate":67,"display_name":"Peter Kahn"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76841322,"answer_count":3,"score":0,"last_activity_date":1691237221,"creation_date":1691166393,"question_id":76837696,"body_markdown":"When you have a process which youâve wrapped in a try catch, finally, and the action in the final could possibly throw, how do you handle exception, hiding?\r\n\r\nHere&#39;s an example of a problem and a possible fix.  Does the fix look ok, or am I re-throwing poorly?\r\n\r\n# Code with Hiding Problem\r\n\r\n```\r\ntry {\r\n  // try-block\r\n  setupTestEnv();\r\n  runTests();\r\n} finally {\r\n  // finally-block\r\n  cleanupTestEnv();\r\n}\r\n```\r\n\r\n- try-block throws still result in cleanup and get thrown up the call stack\r\n- try-block throws where finally-block throws as well result in the loss or hiding of try-block throw as finally-block throw goes up the call stack.\r\n\r\n\r\n# Possible Workaround\r\nAdapted from https://stackoverflow.com/a/41246027/9950\r\n\r\n```\r\nThrowable tryBlockException;\r\ntry {\r\n  setupTestEnv();\r\n  runTests();\r\n} catch (Throwable t) {\r\n  // record and throw\r\n  tryBlockException = t;\r\n  throw ex;\r\n} finally {\r\n   try {\r\n      cleanupTestEnv()\r\n   } catch (Throwable t) {\r\n      if (tryBlockException != null) {\r\n         // we have an exception from try-block\r\n         // and that&#39;s priority exception\r\n\r\n         // add the cleanup exception as suppressed\r\n         // it&#39;ll be in the object and call reporting\r\n         tryBlockException.addSuppressed(t);\r\n         throw tryBlockException;\r\n      } else {\r\n         throw t;\r\n      }\r\n  }\r\n}\r\n```","title":"Avoiding exception hiding when finally block could throw","body":"<p>When you have a process which youâve wrapped in a try catch, finally, and the action in the final could possibly throw, how do you handle exception, hiding?</p>\n<p>Here's an example of a problem and a possible fix.  Does the fix look ok, or am I re-throwing poorly?</p>\n<h1>Code with Hiding Problem</h1>\n<pre><code>try {\n  // try-block\n  setupTestEnv();\n  runTests();\n} finally {\n  // finally-block\n  cleanupTestEnv();\n}\n</code></pre>\n<ul>\n<li>try-block throws still result in cleanup and get thrown up the call stack</li>\n<li>try-block throws where finally-block throws as well result in the loss or hiding of try-block throw as finally-block throw goes up the call stack.</li>\n</ul>\n<h1>Possible Workaround</h1>\n<p>Adapted from <a href=\"https://stackoverflow.com/a/41246027/9950\">https://stackoverflow.com/a/41246027/9950</a></p>\n<pre><code>Throwable tryBlockException;\ntry {\n  setupTestEnv();\n  runTests();\n} catch (Throwable t) {\n  // record and throw\n  tryBlockException = t;\n  throw ex;\n} finally {\n   try {\n      cleanupTestEnv()\n   } catch (Throwable t) {\n      if (tryBlockException != null) {\n         // we have an exception from try-block\n         // and that's priority exception\n\n         // add the cleanup exception as suppressed\n         // it'll be in the object and call reporting\n         tryBlockException.addSuppressed(t);\n         throw tryBlockException;\n      } else {\n         throw t;\n      }\n  }\n}\n</code></pre>\n"},{"tags":["java","apache-mina"],"answers":[{"tags":[],"owner":{"account_id":1496659,"reputation":138,"user_id":1402425,"display_name":"vudangngoc"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1691235957,"creation_date":1679558448,"answer_id":75820444,"question_id":67218410,"body_markdown":"I found an example from integration test, hope this help \r\n\r\nhttps://github.com/apache/mina-sshd/blob/master/sshd-core/src/test/java/org/apache/sshd/client/auth/pubkey/RSAVariantsAuthPublicKeyTest.java#L87\r\n\r\n    @BeforeClass\r\n    public static void setupClientAndServer() throws Exception {\r\n        sshd = CoreTestSupportUtils.setupTestServer(RSAVariantsAuthPublicKeyTest.class);\r\n        sshd.setSignatureFactories(RSA_FACTORIES);\r\n        sshd.setKeyPairProvider(KEYS_PROVIDER);\r\n        sshd.setPasswordAuthenticator(RejectAllPasswordAuthenticator.INSTANCE);\r\n        sshd.setHostBasedAuthenticator(RejectAllHostBasedAuthenticator.INSTANCE);\r\n        sshd.setPublickeyAuthenticator((username, key, session) -&gt; {\r\n            String keyType = KeyUtils.getKeyType(key);\r\n            outputDebugMessage(&quot;authenticate(%s) keyType=%s session=%s&quot;, username, keyType, session);\r\n            return KeyPairProvider.SSH_RSA.equals(keyType);\r\n        });\r\n\r\n        sshd.start();\r\n        port = sshd.getPort();\r\n\r\n        client = CoreTestSupportUtils.setupTestClient(RSAVariantsAuthPublicKeyTest.class);\r\n        client.setServerKeyVerifier((session, peerAddress, key) -&gt; {\r\n            String keyType = KeyUtils.getKeyType(key);\r\n            outputDebugMessage(&quot;verifyServerKey - keyType=%s session=%s&quot;, keyType, session);\r\n            return KeyPairProvider.SSH_RSA.equals(keyType);\r\n        });\r\n        client.start();\r\n    }\r\n","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>I found an example from integration test, hope this help</p>\n<p><a href=\"https://github.com/apache/mina-sshd/blob/master/sshd-core/src/test/java/org/apache/sshd/client/auth/pubkey/RSAVariantsAuthPublicKeyTest.java#L87\" rel=\"nofollow noreferrer\">https://github.com/apache/mina-sshd/blob/master/sshd-core/src/test/java/org/apache/sshd/client/auth/pubkey/RSAVariantsAuthPublicKeyTest.java#L87</a></p>\n<pre><code>@BeforeClass\npublic static void setupClientAndServer() throws Exception {\n    sshd = CoreTestSupportUtils.setupTestServer(RSAVariantsAuthPublicKeyTest.class);\n    sshd.setSignatureFactories(RSA_FACTORIES);\n    sshd.setKeyPairProvider(KEYS_PROVIDER);\n    sshd.setPasswordAuthenticator(RejectAllPasswordAuthenticator.INSTANCE);\n    sshd.setHostBasedAuthenticator(RejectAllHostBasedAuthenticator.INSTANCE);\n    sshd.setPublickeyAuthenticator((username, key, session) -&gt; {\n        String keyType = KeyUtils.getKeyType(key);\n        outputDebugMessage(&quot;authenticate(%s) keyType=%s session=%s&quot;, username, keyType, session);\n        return KeyPairProvider.SSH_RSA.equals(keyType);\n    });\n\n    sshd.start();\n    port = sshd.getPort();\n\n    client = CoreTestSupportUtils.setupTestClient(RSAVariantsAuthPublicKeyTest.class);\n    client.setServerKeyVerifier((session, peerAddress, key) -&gt; {\n        String keyType = KeyUtils.getKeyType(key);\n        outputDebugMessage(&quot;verifyServerKey - keyType=%s session=%s&quot;, keyType, session);\n        return KeyPairProvider.SSH_RSA.equals(keyType);\n    });\n    client.start();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":387326,"reputation":922,"user_id":745619,"accept_rate":80,"display_name":"Chuck Lowery"},"score":0,"creation_date":1682024568,"post_id":76048139,"comment_id":134155105,"body_markdown":"Hi @zaxishere, your solution is referencing the server not the client. The question is regard to the client.","body":"Hi @zaxishere, your solution is referencing the server not the client. The question is regard to the client."},{"owner":{"account_id":4796966,"reputation":164,"user_id":3874627,"display_name":"zaxishere"},"score":0,"creation_date":1682084563,"post_id":76048139,"comment_id":134164502,"body_markdown":"I edited the answer to provide more details about client setup","body":"I edited the answer to provide more details about client setup"}],"tags":[],"owner":{"account_id":4796966,"reputation":164,"user_id":3874627,"display_name":"zaxishere"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1682084850,"creation_date":1681844012,"answer_id":76048139,"question_id":67218410,"body_markdown":"Mina SSHD supports authorized key authentication.\r\n\r\nExample client setup\r\n\r\n```java\r\n    KeyPairResourceLoader loader = SecurityUtils.getKeyPairResourceParser();\r\n    Collection&lt;KeyPair&gt; keys = loader.loadKeyPairs(null, filePath, passwordProvider);\r\n\r\n    // provide keys to client session\r\n    try (ClientSession session = ...estblish initial session...) {\r\n        for (KeyPair kp : keys) {\r\n            session.addKeyIdentity(kp);\r\n        }\r\n        \r\n        session.auth().await(...);\r\n    }\r\n```\r\nSee [client setup][2]\r\n\r\nA more complete client setup example is provided [here][3].\r\n\r\n\r\n  [1]: https://github.com/apache/mina-sshd/blob/master/sshd-core/src/main/java/org/apache/sshd/server/config/keys/DefaultAuthorizedKeysAuthenticator.java\r\n  [2]: https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#set-up-client-side-security\r\n  [3]: https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#using-the-sshclient-to-connect-to-a-server","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>Mina SSHD supports authorized key authentication.</p>\n<p>Example client setup</p>\n<pre class=\"lang-java prettyprint-override\"><code>    KeyPairResourceLoader loader = SecurityUtils.getKeyPairResourceParser();\n    Collection&lt;KeyPair&gt; keys = loader.loadKeyPairs(null, filePath, passwordProvider);\n\n    // provide keys to client session\n    try (ClientSession session = ...estblish initial session...) {\n        for (KeyPair kp : keys) {\n            session.addKeyIdentity(kp);\n        }\n        \n        session.auth().await(...);\n    }\n</code></pre>\n<p>See <a href=\"https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#set-up-client-side-security\" rel=\"nofollow noreferrer\">client setup</a></p>\n<p>A more complete client setup example is provided <a href=\"https://github.com/apache/mina-sshd/blob/master/docs/client-setup.md#using-the-sshclient-to-connect-to-a-server\" rel=\"nofollow noreferrer\">here</a>.</p>\n"},{"tags":[],"owner":{"account_id":22394789,"reputation":1382,"user_id":16606223,"display_name":"Yahor Barkouski"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1688141068,"creation_date":1688141068,"answer_id":76590570,"question_id":67218410,"body_markdown":"According to [ClientSession][1] documentation:\r\n&gt; A client session is established using the SshClient. Once the session has been created, the user has to authenticate using either `ClientAuthenticationManager.addPasswordIdentity(String)` or `ClientAuthenticationManager.addPublicKeyIdentity(java.security.KeyPair)` followed by a call to `auth()`\r\n\r\nSo you may need to try something like this:\r\n```java\r\n// path to your private key\r\nPath privateKeyPath = Paths.get(&quot;/path/to/your/privatekey.pem&quot;);\r\n        \r\n// load the private key\r\nFileKeyPairProvider fileKeyPairProvider = new FileKeyPairProvider(privateKeyPath);\r\nIterable&lt;KeyPair&gt; keyPairs = fileKeyPairProvider.loadKeys();\r\n\r\ntry (SshClient client = SshClient.setUpDefaultClient()) {\r\n    client.start();\r\n\r\n    try (ClientSession session = client.connect(&quot;username&quot;, &quot;hostname&quot;, 22).verify().getSession()) {\r\n        // authenticate using the private key\r\n        session.addPublicKeyIdentity(keyPairs.iterator().next());\r\n\r\n        // auth agent can be null\r\n        session.auth().verify();\r\n\r\n        ...\r\n    }\r\n} ...\r\n```\r\n\r\n\r\n  [1]: https://javadoc.io/doc/org.apache.sshd/sshd-core/2.2.0/org/apache/sshd/client/session/ClientSession.html","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>According to <a href=\"https://javadoc.io/doc/org.apache.sshd/sshd-core/2.2.0/org/apache/sshd/client/session/ClientSession.html\" rel=\"nofollow noreferrer\">ClientSession</a> documentation:</p>\n<blockquote>\n<p>A client session is established using the SshClient. Once the session has been created, the user has to authenticate using either <code>ClientAuthenticationManager.addPasswordIdentity(String)</code> or <code>ClientAuthenticationManager.addPublicKeyIdentity(java.security.KeyPair)</code> followed by a call to <code>auth()</code></p>\n</blockquote>\n<p>So you may need to try something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// path to your private key\nPath privateKeyPath = Paths.get(&quot;/path/to/your/privatekey.pem&quot;);\n        \n// load the private key\nFileKeyPairProvider fileKeyPairProvider = new FileKeyPairProvider(privateKeyPath);\nIterable&lt;KeyPair&gt; keyPairs = fileKeyPairProvider.loadKeys();\n\ntry (SshClient client = SshClient.setUpDefaultClient()) {\n    client.start();\n\n    try (ClientSession session = client.connect(&quot;username&quot;, &quot;hostname&quot;, 22).verify().getSession()) {\n        // authenticate using the private key\n        session.addPublicKeyIdentity(keyPairs.iterator().next());\n\n        // auth agent can be null\n        session.auth().verify();\n\n        ...\n    }\n} ...\n</code></pre>\n"}],"owner":{"account_id":387326,"reputation":922,"user_id":745619,"accept_rate":80,"display_name":"Chuck Lowery"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":1335,"favorite_count":0,"down_vote_count":0,"up_vote_count":10,"answer_count":3,"score":10,"last_activity_date":1691235957,"creation_date":1619113781,"question_id":67218410,"body_markdown":"I am attempting to connect to an SFTP server that requires private key authentication and wanting to use the Mina. Looking through the documentation, I can see how to perform that authentication using password authentication but not private key authentication. I do not see any example code that would demonstrate how to perform private key authentication using mina.\r\n\r\nIs it currently possible with this library, and if so, can you provide an example code on how to load the key and perform the connection?  \r\n\r\nHere is an example of what I want to do using SSHTools for reference.\r\n\r\n       private static void authenticate(Ssh2Client ssh2, String host, Integer port, String username, InputStream privateKey) {\r\n        Ssh2PublicKeyAuthentication auth = createKeyAuthentication(privateKey);\r\n\r\n        try {\r\n            int result = ssh2.authenticate(auth);\r\n            if (result != SshAuthentication.COMPLETE) {\r\n                throw new AuthenticationIncomplete(host, port, username, result);\r\n            }\r\n        } catch (SshException ex) {\r\n            throw new UnableToAuthenticate(host, port, username, ex);\r\n        }\r\n    }\r\n\r\n    private static Ssh2PublicKeyAuthentication createKeyAuthentication(InputStream privateKey) {\r\n        try {\r\n            SshPrivateKeyFile privateKeyFile = SshPrivateKeyFileFactory.parse(StreamUtil.readIntoByteArray(privateKey));\r\n            SshKeyPair keyPair = privateKeyFile.toKeyPair(&quot;&quot;);\r\n\r\n            Ssh2PublicKeyAuthentication auth = new Ssh2PublicKeyAuthentication();\r\n            auth.setPrivateKey(keyPair.getPrivateKey());\r\n            auth.setPublicKey(keyPair.getPublicKey());\r\n            return auth;\r\n        } catch (IOException | InvalidPassphraseException ex) {\r\n            throw new ConfigurationIssue(ex);\r\n        }\r\n    }\r\n","title":"Using Mina SSHD (Client) to connect to SFTP using Private Key","body":"<p>I am attempting to connect to an SFTP server that requires private key authentication and wanting to use the Mina. Looking through the documentation, I can see how to perform that authentication using password authentication but not private key authentication. I do not see any example code that would demonstrate how to perform private key authentication using mina.</p>\n<p>Is it currently possible with this library, and if so, can you provide an example code on how to load the key and perform the connection?</p>\n<p>Here is an example of what I want to do using SSHTools for reference.</p>\n<pre><code>   private static void authenticate(Ssh2Client ssh2, String host, Integer port, String username, InputStream privateKey) {\n    Ssh2PublicKeyAuthentication auth = createKeyAuthentication(privateKey);\n\n    try {\n        int result = ssh2.authenticate(auth);\n        if (result != SshAuthentication.COMPLETE) {\n            throw new AuthenticationIncomplete(host, port, username, result);\n        }\n    } catch (SshException ex) {\n        throw new UnableToAuthenticate(host, port, username, ex);\n    }\n}\n\nprivate static Ssh2PublicKeyAuthentication createKeyAuthentication(InputStream privateKey) {\n    try {\n        SshPrivateKeyFile privateKeyFile = SshPrivateKeyFileFactory.parse(StreamUtil.readIntoByteArray(privateKey));\n        SshKeyPair keyPair = privateKeyFile.toKeyPair(&quot;&quot;);\n\n        Ssh2PublicKeyAuthentication auth = new Ssh2PublicKeyAuthentication();\n        auth.setPrivateKey(keyPair.getPrivateKey());\n        auth.setPublicKey(keyPair.getPublicKey());\n        return auth;\n    } catch (IOException | InvalidPassphraseException ex) {\n        throw new ConfigurationIssue(ex);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","devops"],"comments":[{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1691235881,"post_id":75373057,"comment_id":135466605,"body_markdown":"The title is not representative.","body":"The title is not representative."}],"answers":[{"comments":[{"owner":{"account_id":16352934,"reputation":16788,"user_id":11810933,"display_name":"NotTheDr01ds"},"score":2,"creation_date":1691202121,"post_id":76839879,"comment_id":135464185,"body_markdown":"Welcome to Stack Overflow, maycon araujo!\n\nYour answer appears likely to have been written (entirely or partially) by AI (e.g., ChatGPT). A heads-up that [posting AI-generated content is not allowed here](//meta.stackoverflow.com/q/421831). If you used an AI tool to assist with any answer, I would encourage you to delete it.\n\nWe do hope you&#39;ll be a part of our community and contribute with *your own*, quality posts in the future. Thanks!","body":"Welcome to Stack Overflow, maycon araujo!  Your answer appears likely to have been written (entirely or partially) by AI (e.g., ChatGPT). A heads-up that <a href=\"//meta.stackoverflow.com/q/421831\">posting AI-generated content is not allowed here</a>. If you used an AI tool to assist with any answer, I would encourage you to delete it.  We do hope you&#39;ll be a part of our community and contribute with <i>your own</i>, quality posts in the future. Thanks!"},{"owner":{"account_id":16352934,"reputation":16788,"user_id":11810933,"display_name":"NotTheDr01ds"},"score":2,"creation_date":1691202123,"post_id":76839879,"comment_id":135464186,"body_markdown":"**Readers should review this answer carefully and critically, as AI-generated information often contains fundamental errors and misinformation.** If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly.","body":"<b>Readers should review this answer carefully and critically, as AI-generated information often contains fundamental errors and misinformation.</b> If you observe quality issues and/or have reason to believe that this answer was generated by AI, please leave feedback accordingly."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1691234736,"post_id":76839879,"comment_id":135466494,"body_markdown":"This answer has two completely different writing styles which suggests [some](https://en.wiktionary.org/wiki/plagiarism#Noun) [kind of plagiarism](https://meta.stackoverflow.com/questions/321299/), like [ChatGPT](https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned) plagiarism.","body":"This answer has two completely different writing styles which suggests <a href=\"https://en.wiktionary.org/wiki/plagiarism#Noun\" rel=\"nofollow noreferrer\">some</a> <a href=\"https://meta.stackoverflow.com/questions/321299/\">kind of plagiarism</a>, like <a href=\"https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned\">ChatGPT</a> plagiarism."},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1691237353,"post_id":76839879,"comment_id":135466731,"body_markdown":"How is it getting correctly formatted as Markdown (using Stack Overflow tag formatting)? I can&#39;t imagine this to be a manual process. ChatGPT doesn&#39;t seem to have it. Or is it some setting that needs to be changed? Or part of ChatGPT Plus? Or something [almost, but not quite entirely, unlike ChatGPT](https://www.youtube.com/watch?v=5wAuDhoRmzg&amp;t=8m4s)?","body":"How is it getting correctly formatted as Markdown (using Stack Overflow tag formatting)? I can&#39;t imagine this to be a manual process. ChatGPT doesn&#39;t seem to have it. Or is it some setting that needs to be changed? Or part of ChatGPT Plus? Or something <a href=\"https://www.youtube.com/watch?v=5wAuDhoRmzg&amp;t=8m4s\" rel=\"nofollow noreferrer\">almost, but not quite entirely, unlike ChatGPT</a>?"},{"owner":{"account_id":24885,"reputation":30828,"user_id":63550,"accept_rate":78,"display_name":"Peter Mortensen"},"score":0,"creation_date":1691240699,"post_id":76839879,"comment_id":135467072,"body_markdown":"Or in other words, is there now a web site that ***specialises in Stack Overflow*** and makes it even easier to be a [ChatGPT](https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned) [plagiariser](https://en.wiktionary.org/wiki/plagiarism#Noun)? I have seen other ChatGPT plagiarisers posting perfectly formatted answers (this is a marked change). Or is it only a coincidence?","body":"Or in other words, is there now a web site that <b><i>specialises in Stack Overflow</i></b> and makes it even easier to be a <a href=\"https://meta.stackoverflow.com/questions/421831/temporary-policy-chatgpt-is-banned\">ChatGPT</a> <a href=\"https://en.wiktionary.org/wiki/plagiarism#Noun\" rel=\"nofollow noreferrer\">plagiariser</a>? I have seen other ChatGPT plagiarisers posting perfectly formatted answers (this is a marked change). Or is it only a coincidence?"}],"tags":[],"owner":{"account_id":15377139,"reputation":1,"user_id":18274065,"display_name":"maycon araujo"},"comment_count":5,"down_vote_count":3,"up_vote_count":0,"is_accepted":false,"score":-3,"last_activity_date":1691201065,"creation_date":1691201065,"answer_id":76839879,"question_id":75373057,"body_markdown":"combine spotless with commitlint for spring boot project\r\n\r\n`Spotless` is a code formatter for Java (and other languages) that integrates with build tools like Gradle and Maven, whereas `commitlint` is a tool for linting commit messages in a Git repository. They serve different roles in a project, but they can certainly be used together to enforce both code style and commit message conventions in a Spring Boot project.\r\n\r\nHere&#39;s a brief guide on how to configure each in a Spring Boot project:\r\n\r\n## Spotless Setup with Gradle\r\n\r\n1. Add the Spotless plugin to your build.gradle file:\r\n\r\n```groovy\r\nplugins {\r\n  id &#39;com.diffplug.spotless&#39; version &#39;5.14.2&#39;\r\n}\r\n```\r\n\r\n2. Configure Spotless:\r\n\r\n```groovy\r\nspotless {\r\n  java {\r\n    googleJavaFormat() // Use the Google Java Format\r\n    target &#39;src/**/*.java&#39; // Point to the Java source\r\n  }\r\n}\r\n```\r\n\r\n3. To format your code according to the defined rules, you can run:\r\n\r\n```bash\r\n./gradlew spotlessApply\r\n```\r\n\r\n4. To check if your code complies with the defined rules, you can run:\r\n\r\n```bash\r\n./gradlew spotlessCheck\r\n```\r\n\r\n## Commitlint Setup\r\n\r\nCommitlint setup in a Spring Boot project can be accomplished as described in the previous messages. Here is a quick recap:\r\n\r\n1. Install Node.js and npm.\r\n2. Initialize a package.json in your project root:\r\n\r\n```bash\r\nnpm init -y \r\n```\r\n\r\n3. Install commitlint and Husky:\r\n\r\n```bash\r\nnpm install @commitlint/{config-conventional,cli} husky --save-dev\r\n```\r\n\r\n4. Configure commitlint:\r\n\r\n```bash\r\necho &quot;module.exports = {extends: [&#39;@commitlint/config-conventional&#39;]};&quot; &gt; commitlint.config.js\r\n```\r\n\r\n5. Configure Husky:\r\n\r\n```bash\r\nnpx husky install\r\nnpx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;\r\n```\r\n\r\n## Combining Both\r\n\r\nIf you want to ensure that all checks pass before committing the code, you can add a pre-commit hook with Husky to run `./gradlew spotlessCheck`. Here&#39;s how you can do it:\r\n\r\n1. First, install Husky and lint-staged:\r\n\r\n```bash\r\nnpm install --save-dev husky lint-staged\r\n```\r\n\r\n2. Add a lint-staged configuration in your `package.json`:\r\n\r\n```json\r\n&quot;lint-staged&quot;: {\r\n  &quot;*.java&quot;: [\r\n    &quot;./gradlew spotlessApply&quot;,\r\n    &quot;git add&quot;\r\n  ]\r\n}\r\n```\r\n\r\n3. Install husky hooks:\r\n\r\n```bash\r\nnpx husky install\r\n```\r\n\r\n4. Add pre-commit and commit-msg hooks:\r\n\r\n```bash\r\nnpx husky add .husky/pre-commit &quot;npx lint-staged&quot;\r\nnpx husky add .husky/commit-msg &#39;npx --no-install commitlint --edit &quot;$1&quot;&#39;\r\n```\r\n\r\nThis setup will run Spotless to format your Java files and add them to the commit. Then it will check the commit message using commitlint. If any of these steps fail, the commit will be aborted.\r\n\r\n\r\n\r\n","title":"How can I configure Commitlint and Husky for Java projects?","body":"<p>combine spotless with commitlint for spring boot project</p>\n<p><code>Spotless</code> is a code formatter for Java (and other languages) that integrates with build tools like Gradle and Maven, whereas <code>commitlint</code> is a tool for linting commit messages in a Git repository. They serve different roles in a project, but they can certainly be used together to enforce both code style and commit message conventions in a Spring Boot project.</p>\n<p>Here's a brief guide on how to configure each in a Spring Boot project:</p>\n<h2>Spotless Setup with Gradle</h2>\n<ol>\n<li>Add the Spotless plugin to your build.gradle file:</li>\n</ol>\n<pre><code>plugins {\n  id 'com.diffplug.spotless' version '5.14.2'\n}\n</code></pre>\n<ol start=\"2\">\n<li>Configure Spotless:</li>\n</ol>\n<pre><code>spotless {\n  java {\n    googleJavaFormat() // Use the Google Java Format\n    target 'src/**/*.java' // Point to the Java source\n  }\n}\n</code></pre>\n<ol start=\"3\">\n<li>To format your code according to the defined rules, you can run:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>./gradlew spotlessApply\n</code></pre>\n<ol start=\"4\">\n<li>To check if your code complies with the defined rules, you can run:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>./gradlew spotlessCheck\n</code></pre>\n<h2>Commitlint Setup</h2>\n<p>Commitlint setup in a Spring Boot project can be accomplished as described in the previous messages. Here is a quick recap:</p>\n<ol>\n<li>Install Node.js and npm.</li>\n<li>Initialize a package.json in your project root:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npm init -y \n</code></pre>\n<ol start=\"3\">\n<li>Install commitlint and Husky:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npm install @commitlint/{config-conventional,cli} husky --save-dev\n</code></pre>\n<ol start=\"4\">\n<li>Configure commitlint:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>echo &quot;module.exports = {extends: ['@commitlint/config-conventional']};&quot; &gt; commitlint.config.js\n</code></pre>\n<ol start=\"5\">\n<li>Configure Husky:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npx husky install\nnpx husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;'\n</code></pre>\n<h2>Combining Both</h2>\n<p>If you want to ensure that all checks pass before committing the code, you can add a pre-commit hook with Husky to run <code>./gradlew spotlessCheck</code>. Here's how you can do it:</p>\n<ol>\n<li>First, install Husky and lint-staged:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npm install --save-dev husky lint-staged\n</code></pre>\n<ol start=\"2\">\n<li>Add a lint-staged configuration in your <code>package.json</code>:</li>\n</ol>\n<pre class=\"lang-json prettyprint-override\"><code>&quot;lint-staged&quot;: {\n  &quot;*.java&quot;: [\n    &quot;./gradlew spotlessApply&quot;,\n    &quot;git add&quot;\n  ]\n}\n</code></pre>\n<ol start=\"3\">\n<li>Install husky hooks:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npx husky install\n</code></pre>\n<ol start=\"4\">\n<li>Add pre-commit and commit-msg hooks:</li>\n</ol>\n<pre class=\"lang-bash prettyprint-override\"><code>npx husky add .husky/pre-commit &quot;npx lint-staged&quot;\nnpx husky add .husky/commit-msg 'npx --no-install commitlint --edit &quot;$1&quot;'\n</code></pre>\n<p>This setup will run Spotless to format your Java files and add them to the commit. Then it will check the commit message using commitlint. If any of these steps fail, the commit will be aborted.</p>\n"}],"owner":{"account_id":19730480,"reputation":173,"user_id":14446071,"display_name":"Sujith"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":779,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1691235925,"creation_date":1675771233,"question_id":75373057,"body_markdown":"I&#39;m using [Commitlint][1] and [Husky][2] for my Node.js projects. How can I use the same concept for Spring Boot projects as well? I am not getting enough leads.\r\n\r\nThis is for Java/Spring Boot projects with [pom.xml][3].\r\n\r\n  [1]: https://github.com/conventional-changelog/commitlint\r\n  [2]: https://www.freecodecamp.org/news/how-to-add-commit-hooks-to-git-with-husky-to-automate-code-tasks/#what-is-husky\r\n  [3]: https://maven.apache.org/pom.html#What_is_the_POM.3F\r\n","title":"How can I configure Commitlint and Husky for Java projects?","body":"<p>I'm using <a href=\"https://github.com/conventional-changelog/commitlint\" rel=\"nofollow noreferrer\">Commitlint</a> and <a href=\"https://www.freecodecamp.org/news/how-to-add-commit-hooks-to-git-with-husky-to-automate-code-tasks/#what-is-husky\" rel=\"nofollow noreferrer\">Husky</a> for my Node.js projects. How can I use the same concept for Spring Boot projects as well? I am not getting enough leads.</p>\n<p>This is for Java/Spring Boot projects with <a href=\"https://maven.apache.org/pom.html#What_is_the_POM.3F\" rel=\"nofollow noreferrer\">pom.xml</a>.</p>\n"},{"tags":["java","spring-boot","upload"],"comments":[{"owner":{"account_id":1075012,"reputation":796,"user_id":5987836,"display_name":"Venu Duggireddy"},"score":1,"creation_date":1521132250,"post_id":49304767,"comment_id":85611912,"body_markdown":"possible duplicate https://stackoverflow.com/questions/28572700/i-am-trying-to-set-maxfilesize-but-it-is-not-honored","body":"possible duplicate <a href=\"https://stackoverflow.com/questions/28572700/i-am-trying-to-set-maxfilesize-but-it-is-not-honored\" title=\"i am trying to set maxfilesize but it is not honored\">stackoverflow.com/questions/28572700/&hellip;</a>"},{"owner":{"account_id":4271284,"reputation":12416,"user_id":3493036,"accept_rate":81,"display_name":"Patrick"},"score":1,"creation_date":1521132290,"post_id":49304767,"comment_id":85611939,"body_markdown":"try to use `spring.servlet.multipart.max-file-size=51200KB` and `spring.servlet.multipart.max-request-size=51200KB`","body":"try to use <code>spring.servlet.multipart.max-file-size=51200KB</code> and <code>spring.servlet.multipart.max-request-size=51200KB</code>"},{"owner":{"account_id":12994497,"reputation":393,"user_id":9392631,"display_name":"Estudeiro"},"score":0,"creation_date":1521132893,"post_id":49304767,"comment_id":85612358,"body_markdown":"Thx for the replies. I&#39;ve tried with &quot;spring.servlet&quot; but without success.\nAnd i don&#39;t think it&#39;s duplicated since the solution in that question didn&#39;t solve my problem.","body":"Thx for the replies. I&#39;ve tried with &quot;spring.servlet&quot; but without success. And i don&#39;t think it&#39;s duplicated since the solution in that question didn&#39;t solve my problem."},{"owner":{"account_id":6111309,"reputation":11786,"user_id":7831045,"display_name":"Rahul Mahadik"},"score":0,"creation_date":1521133048,"post_id":49304767,"comment_id":85612472,"body_markdown":"Can you please provide `application.yml` file","body":"Can you please provide <code>application.yml</code> file"},{"owner":{"account_id":12994497,"reputation":393,"user_id":9392631,"display_name":"Estudeiro"},"score":0,"creation_date":1521133493,"post_id":49304767,"comment_id":85612768,"body_markdown":"@Rahul Mahadik i&#39;ve just added my application.yml.\nEven within the &quot;spring.http&quot; this doesn&#39;t work...","body":"@Rahul Mahadik i&#39;ve just added my application.yml. Even within the &quot;spring.http&quot; this doesn&#39;t work..."}],"answers":[{"comments":[{"owner":{"account_id":12994497,"reputation":393,"user_id":9392631,"display_name":"Estudeiro"},"score":0,"creation_date":1521134436,"post_id":49305339,"comment_id":85613329,"body_markdown":"Thx, it worked (:\nBut how did you knew this,because it&#39;s not in the documentation, neither  in the other solutions to this problem. And why i had to enable it and other people didn&#39;t have too ?","body":"Thx, it worked (: But how did you knew this,because it&#39;s not in the documentation, neither  in the other solutions to this problem. And why i had to enable it and other people didn&#39;t have too ?"},{"owner":{"account_id":6111309,"reputation":11786,"user_id":7831045,"display_name":"Rahul Mahadik"},"score":0,"creation_date":1521134536,"post_id":49305339,"comment_id":85613392,"body_markdown":"@Estudeiro Welcome dude.   :)","body":"@Estudeiro Welcome dude.   :)"},{"owner":{"account_id":6111309,"reputation":11786,"user_id":7831045,"display_name":"Rahul Mahadik"},"score":1,"creation_date":1521134651,"post_id":49305339,"comment_id":85613471,"body_markdown":"@Estudeiro I&#39;m working on Grails, which have also same configuration file. and i seen your exception `org.apache.tomcat.util.http.fileupload.FileUploadBase` so","body":"@Estudeiro I&#39;m working on Grails, which have also same configuration file. and i seen your exception <code>org.apache.tomcat.util.http.fileupload.FileUploadBase</code> so"},{"owner":{"account_id":214506,"reputation":312,"user_id":468516,"display_name":"JCash"},"score":5,"creation_date":1641113559,"post_id":49305339,"comment_id":124721115,"body_markdown":"Since this is the accepted answer, I&#39;ll comment here on the latest syntax for Spring 2.6.1: (Note the `http` -&gt; `servlet`):\n\n```\nspring.servlet.multipart.max-file-size=50MB\nspring.servlet.multipart.max-request-size=50MB\n```\n\n\nAs mentioned in the answer, for the latest version, it&#39;s best to refer to the [docs](https://spring.io/guides/gs/uploading-files/)","body":"Since this is the accepted answer, I&#39;ll comment here on the latest syntax for Spring 2.6.1: (Note the <code>http</code> -&gt; <code>servlet</code>):  ``` spring.servlet.multipart.max-file-size=50MB spring.servlet.multipart.max-request-size=50MB ```   As mentioned in the answer, for the latest version, it&#39;s best to refer to the <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"nofollow noreferrer\">docs</a>"}],"tags":[],"owner":{"account_id":6111309,"reputation":11786,"user_id":7831045,"display_name":"Rahul Mahadik"},"comment_count":4,"down_vote_count":0,"up_vote_count":21,"is_accepted":true,"score":21,"last_activity_date":1616690514,"creation_date":1521133643,"answer_id":49305339,"question_id":49304767,"body_markdown":"    spring:\r\n      http:\r\n        multipart:\r\n          enabled: true\r\n          max-file-size: 50MB\r\n          max-request-size: 50MB\r\n\r\nor \r\n\r\n    spring.http.multipart.max-file-size=50MB\r\n    spring.http.multipart.max-request-size=50MB\r\n\r\nReference [here][1]\r\n\r\nHope it will works\r\n\r\n\r\n  [1]: https://spring.io/guides/gs/uploading-files/","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<pre><code>spring:\n  http:\n    multipart:\n      enabled: true\n      max-file-size: 50MB\n      max-request-size: 50MB\n</code></pre>\n<p>or</p>\n<pre><code>spring.http.multipart.max-file-size=50MB\nspring.http.multipart.max-request-size=50MB\n</code></pre>\n<p>Reference <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"noreferrer\">here</a></p>\n<p>Hope it will works</p>\n"},{"tags":[],"owner":{"account_id":4900086,"reputation":3091,"user_id":3948697,"accept_rate":67,"display_name":"Atul"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1559212122,"creation_date":1559212122,"answer_id":56376431,"question_id":49304767,"body_markdown":"For SpringBoot 1.5.7 till 2.1.2 the property need to set in application.properties file are: \r\n\r\n    spring.http.multipart.max-file-size=100MB\r\n    spring.http.multipart.max-request-size=100MB\r\n\r\n\r\nAlso make sure you have application.properties file in &quot;resources&quot; folder.","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>For SpringBoot 1.5.7 till 2.1.2 the property need to set in application.properties file are: </p>\n\n<pre><code>spring.http.multipart.max-file-size=100MB\nspring.http.multipart.max-request-size=100MB\n</code></pre>\n\n<p>Also make sure you have application.properties file in \"resources\" folder.</p>\n"},{"tags":[],"owner":{"account_id":5242326,"reputation":1,"user_id":4189008,"display_name":"Yuvraj P"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1587106037,"creation_date":1587106037,"answer_id":61265605,"question_id":49304767,"body_markdown":"For configuring CommonsMultipartResolver\r\nDefine a bean with bean name as **MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME**\r\nAs the default spring boot&#39;s default MultipartFilter looks for resolver with default bean name.\r\n\r\n    @Bean(name = MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME)\r\n\tprotected MultipartResolver getMultipartResolver() {\r\n\t\tCommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();\r\n\t\tmultipartResolver.setMaxUploadSize(20971520);\r\n\t\tmultipartResolver.setMaxInMemorySize(20971520);\r\n\t\treturn multipartResolver;\r\n\t}\r\n\r\n","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>For configuring CommonsMultipartResolver\nDefine a bean with bean name as <strong>MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME</strong>\nAs the default spring boot's default MultipartFilter looks for resolver with default bean name.</p>\n\n<pre><code>@Bean(name = MultipartFilter.DEFAULT_MULTIPART_RESOLVER_BEAN_NAME)\nprotected MultipartResolver getMultipartResolver() {\n    CommonsMultipartResolver multipartResolver = new CommonsMultipartResolver();\n    multipartResolver.setMaxUploadSize(20971520);\n    multipartResolver.setMaxInMemorySize(20971520);\n    return multipartResolver;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13059268,"reputation":2333,"user_id":9437031,"display_name":"Dhwanil Patel"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1594897334,"creation_date":1594897334,"answer_id":62933287,"question_id":49304767,"body_markdown":"Following are the ways based on version,\r\n\r\n1&#39;st :\r\n\r\n    spring.servlet.multipart.max-file-size=1000MB\r\n    spring.servlet.multipart.max-request-size=1000MB\r\n\r\n2&#39;nd :\r\n\r\n    spring.http.multipart.max-file-size=50MB\r\n    spring.http.multipart.max-request-size=50MB\r\n\r\n3&#39;rd : \r\n\r\n    multipart.enabled=true\r\n    multipart.max-file-size=100MB\r\n    multipart.max-request-size=100MB","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>Following are the ways based on version,</p>\n<p>1'st :</p>\n<pre><code>spring.servlet.multipart.max-file-size=1000MB\nspring.servlet.multipart.max-request-size=1000MB\n</code></pre>\n<p>2'nd :</p>\n<pre><code>spring.http.multipart.max-file-size=50MB\nspring.http.multipart.max-request-size=50MB\n</code></pre>\n<p>3'rd :</p>\n<pre><code>multipart.enabled=true\nmultipart.max-file-size=100MB\nmultipart.max-request-size=100MB\n</code></pre>\n"},{"comments":[{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":6,"creation_date":1606295454,"post_id":65001317,"comment_id":114918557,"body_markdown":"Please don&#39;t post only code as answer, but also provide an explanation what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes.","body":"Please don&#39;t post only code as answer, but also provide an explanation what your code does and how it solves the problem of the question. Answers with an explanation are usually more helpful and of better quality, and are more likely to attract upvotes."}],"tags":[],"owner":{"account_id":18764567,"reputation":21,"user_id":13682753,"display_name":"ASH achraf"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1606294329,"creation_date":1606294329,"answer_id":65001317,"question_id":49304767,"body_markdown":"```yaml \r\nspring:\r\n  servlet: \r\n    multipart: \r\n       enabled: true \r\n       file-size-threshold: 200KB   \r\n       max-file-size:       500MB \r\n       max-request-size:    500MB\r\n\r\n```","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<pre class=\"lang-yaml prettyprint-override\"><code>spring:\n  servlet: \n    multipart: \n       enabled: true \n       file-size-threshold: 200KB   \n       max-file-size:       500MB \n       max-request-size:    500MB\n\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11829005,"reputation":81,"user_id":8656239,"display_name":"dcnis"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1643148098,"creation_date":1643148098,"answer_id":70856230,"question_id":49304767,"body_markdown":"In SpringBoot 2.6.3 setting &quot;spring.http.multipart.max-file-size&quot; did not work. Following did work for me:\r\n\r\n    spring:\r\n      servlet:\r\n        multipart:\r\n          max-file-size: 50MB\r\n          max-request-size: 50MB","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>In SpringBoot 2.6.3 setting &quot;spring.http.multipart.max-file-size&quot; did not work. Following did work for me:</p>\n<pre><code>spring:\n  servlet:\n    multipart:\n      max-file-size: 50MB\n      max-request-size: 50MB\n</code></pre>\n"},{"tags":[],"owner":{"account_id":25720146,"reputation":1,"user_id":19477244,"display_name":"bkoz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1682327581,"creation_date":1682327581,"answer_id":76090341,"question_id":49304767,"body_markdown":"I also had this problem and I don&#39;t know why setting properties spring.http.multipart.max-file-size=20MB and spring.http.multipart.max-request-size=20MB in application.properties didn&#39;t work. To change max file size I&#39;ve followed this guide https://www.baeldung.com/spring-maxuploadsizeexceeded\r\n\r\nSo I&#39;ve added this to my principal class:\r\n```\r\n@Bean\r\npublic MultipartResolver multipartResolver() {\r\n    CommonsMultipartResolver multipartResolver\r\n      = new CommonsMultipartResolver();\r\n    multipartResolver.setMaxUploadSize(20000000);\r\n    return multipartResolver;\r\n}\r\n```\r\nand then, to handle MaxUploadSizeExceededException, I&#39;ve copied this\r\n\r\n```\r\n@ControllerAdvice\r\npublic class FileUploadExceptionAdvice {\r\n     \r\n    @ExceptionHandler(MaxUploadSizeExceededException.class)\r\n    public ModelAndView handleMaxSizeException(\r\n      MaxUploadSizeExceededException exc, \r\n      HttpServletRequest request,\r\n      HttpServletResponse response) {\r\n \r\n        ModelAndView modelAndView = new ModelAndView(&quot;file&quot;);\r\n        modelAndView.getModel().put(&quot;message&quot;, &quot;File too large!&quot;);\r\n        return modelAndView;\r\n    }\r\n}\r\n```\r\nand wrote this simple file.html template:\r\n```\r\n&lt;!DOCTYPE html&gt;\r\n&lt;html lang=&quot;en&quot;\r\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\r\n&gt;\r\n&lt;head&gt;\r\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\r\n    &lt;title&gt;Title&lt;/title&gt;\r\n&lt;/head&gt;\r\n&lt;body&gt;\r\n&lt;h3 th:text=&quot;${message}&quot;&gt;&lt;/h3&gt;\r\n&lt;/body&gt;\r\n&lt;/html&gt;\r\n```\r\nAfter adding this code I&#39;ve seen in logs that the MaxUploadSizeExceededException error was handled, but in browser I still got error. The solution was adding this to application.properties:\r\n```\r\nserver.tomcat.max-swallow-size=60MB\r\n```\r\nlike in this tutorial: https://www.youtube.com/watch?v=ZZMcg6LHC2k","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>I also had this problem and I don't know why setting properties spring.http.multipart.max-file-size=20MB and spring.http.multipart.max-request-size=20MB in application.properties didn't work. To change max file size I've followed this guide <a href=\"https://www.baeldung.com/spring-maxuploadsizeexceeded\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-maxuploadsizeexceeded</a></p>\n<p>So I've added this to my principal class:</p>\n<pre><code>@Bean\npublic MultipartResolver multipartResolver() {\n    CommonsMultipartResolver multipartResolver\n      = new CommonsMultipartResolver();\n    multipartResolver.setMaxUploadSize(20000000);\n    return multipartResolver;\n}\n</code></pre>\n<p>and then, to handle MaxUploadSizeExceededException, I've copied this</p>\n<pre><code>@ControllerAdvice\npublic class FileUploadExceptionAdvice {\n     \n    @ExceptionHandler(MaxUploadSizeExceededException.class)\n    public ModelAndView handleMaxSizeException(\n      MaxUploadSizeExceededException exc, \n      HttpServletRequest request,\n      HttpServletResponse response) {\n \n        ModelAndView modelAndView = new ModelAndView(&quot;file&quot;);\n        modelAndView.getModel().put(&quot;message&quot;, &quot;File too large!&quot;);\n        return modelAndView;\n    }\n}\n</code></pre>\n<p>and wrote this simple file.html template:</p>\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html lang=&quot;en&quot;\n      xmlns:th=&quot;http://www.thymeleaf.org&quot;\n&gt;\n&lt;head&gt;\n    &lt;meta charset=&quot;UTF-8&quot;&gt;\n    &lt;title&gt;Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h3 th:text=&quot;${message}&quot;&gt;&lt;/h3&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>After adding this code I've seen in logs that the MaxUploadSizeExceededException error was handled, but in browser I still got error. The solution was adding this to application.properties:</p>\n<pre><code>server.tomcat.max-swallow-size=60MB\n</code></pre>\n<p>like in this tutorial: <a href=\"https://www.youtube.com/watch?v=ZZMcg6LHC2k\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=ZZMcg6LHC2k</a></p>\n"},{"tags":[],"owner":{"account_id":4907986,"reputation":1440,"user_id":3997460,"accept_rate":62,"display_name":"megloff"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691234986,"creation_date":1691233725,"answer_id":76841362,"question_id":49304767,"body_markdown":"For me the following worked in `application.properties` of  a Spring Boot 3 application (v3.0.5). This should be also the correct properties according to the [following guide / reference of spring.io][1] and as well here at the [source code documentation][2] and the related Spring Boot [Multipart Auto Configuration][3].\r\n\r\n```\r\nspring.servlet.multipart.max-file-size=128MB\r\nspring.servlet.multipart.max-request-size=128MB\r\n```\r\n\r\nI had **NOT** to add any special `@Bean`configuration. According to the [Multipart Auto Configuration][3] documentation:\r\n\r\n```\r\nAuto-configuration for multipart uploads. Adds a\r\nStandardServletMultipartResolver if none is present, and adds a \r\nmultipartConfigElement if none is otherwise defined. The \r\nServletWebServerApplicationContext will associate the \r\nMultipartConfigElement bean to any Servlet beans. \r\n```\r\n\r\nthe following did **NOT** work (may be it worked in an earlier version of Spring boot).\r\n\r\n```\r\n#spring.http.multipart.enabled=true\r\n#spring.http.multipart.max-file-size=128MB\r\n#spring.http.multipart.max-request-size=128MB\r\n```\r\n\r\n  [1]: https://spring.io/guides/gs/uploading-files/\r\n  [2]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartProperties.html\r\n  [3]: https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartAutoConfiguration.html","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>For me the following worked in <code>application.properties</code> of  a Spring Boot 3 application (v3.0.5). This should be also the correct properties according to the <a href=\"https://spring.io/guides/gs/uploading-files/\" rel=\"nofollow noreferrer\">following guide / reference of spring.io</a> and as well here at the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartProperties.html\" rel=\"nofollow noreferrer\">source code documentation</a> and the related Spring Boot <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartAutoConfiguration.html\" rel=\"nofollow noreferrer\">Multipart Auto Configuration</a>.</p>\n<pre><code>spring.servlet.multipart.max-file-size=128MB\nspring.servlet.multipart.max-request-size=128MB\n</code></pre>\n<p>I had <strong>NOT</strong> to add any special <code>@Bean</code>configuration. According to the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/web/servlet/MultipartAutoConfiguration.html\" rel=\"nofollow noreferrer\">Multipart Auto Configuration</a> documentation:</p>\n<pre><code>Auto-configuration for multipart uploads. Adds a\nStandardServletMultipartResolver if none is present, and adds a \nmultipartConfigElement if none is otherwise defined. The \nServletWebServerApplicationContext will associate the \nMultipartConfigElement bean to any Servlet beans. \n</code></pre>\n<p>the following did <strong>NOT</strong> work (may be it worked in an earlier version of Spring boot).</p>\n<pre><code>#spring.http.multipart.enabled=true\n#spring.http.multipart.max-file-size=128MB\n#spring.http.multipart.max-request-size=128MB\n</code></pre>\n"}],"owner":{"account_id":12994497,"reputation":393,"user_id":9392631,"display_name":"Estudeiro"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":41192,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":49305339,"answer_count":8,"score":16,"last_activity_date":1691234986,"creation_date":1521131791,"question_id":49304767,"body_markdown":"I&#39;m trying to make a simple upload app with springboot and it works fine until i try to upload 10Mb+ files, i receive this message on my screen: \r\n\r\n    There was an unexpected error (type=Internal Server Error, status=500).\r\n    Could not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (14326061) exceeds the configured maximum (10485760)\r\n\r\nI&#39;ve done some research, and nothing have worked until now. I&#39;ll leave here below the things i&#39;ve tried so far.\r\n\r\nput this code(In various ways) in my &quot;application.yml&quot;\r\n\r\n    multipart: \r\n     maxFileSize: 51200KB\r\n     maxRequestFile: 51200KB  \r\n\r\nI&#39;ve also tried this in my principal class:\r\n\r\n        @Bean\r\n    public TomcatEmbeddedServletContainerFactory containerFactory() {\r\n        TomcatEmbeddedServletContainerFactory factory = new TomcatEmbeddedServletContainerFactory();\r\n         factory.addConnectorCustomizers(new TomcatConnectorCustomizer() {\r\n            @Override\r\n            public void customize(Connector connector) {\r\n             ((AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler()).setMaxSwallowSize(-1);\r\n            }\r\n         });\r\n         return factory;\r\n    }\r\n\r\nAnd some strange thing. If i enter in my tomcat web.xml, the multipart-config is:\r\n\r\n    &lt;multipart-config&gt;\r\n          &lt;!-- 50MB max --&gt;\r\n          &lt;max-file-size&gt;52428800&lt;/max-file-size&gt;\r\n          &lt;max-request-size&gt;52428800&lt;/max-request-size&gt;\r\n          &lt;file-size-threshold&gt;0&lt;/file-size-threshold&gt;\r\n        &lt;/multipart-config&gt;\r\n\r\nSo where the hell this &quot;...configured maximum (10485760)&quot; is coming from ?\r\n(Sidenote: I&#39;m using netbeans 8.1 and springboot 1.5).\r\n\r\nThx guys.(And sorry for the english s2)\r\n\r\nSince asked, this is my application.yml\r\n\r\n\r\n     server:\r\n          port: 9999\r\n          context-path: /client\r\n        logging:\r\n          level:\r\n            org.springframework.security: DEBUG\r\n        endpoints:\r\n          trace:\r\n            sensitive: false\r\n            \r\n        spring:\r\n            thymeleaf:\r\n                cache: false\r\n            multipart: \r\n              maxFileSize: 51200KB\r\n              maxRequestFile: 51200KB  \r\n            \r\n        #################################################################################\r\n          \r\n        security:\r\n          basic:\r\n            enabled: false\r\n          oauth2:\r\n            client:\r\n              client-id: acme2\r\n              client-secret: acmesecret2\r\n              access-token-uri: http://localhost:8080/oauth/token\r\n              user-authorization-uri: http://localhost:8080/oauth/authorize\r\n            resource:\r\n              user-info-uri: http://localhost:8080/me\r\n        #    \r\n\r\n  \r\n\r\n    ","title":"&quot;the request was rejected because its size &quot; Spring, tomcat","body":"<p>I'm trying to make a simple upload app with springboot and it works fine until i try to upload 10Mb+ files, i receive this message on my screen: </p>\n\n<pre><code>There was an unexpected error (type=Internal Server Error, status=500).\nCould not parse multipart servlet request; nested exception is java.lang.IllegalStateException: org.apache.tomcat.util.http.fileupload.FileUploadBase$SizeLimitExceededException: the request was rejected because its size (14326061) exceeds the configured maximum (10485760)\n</code></pre>\n\n<p>I've done some research, and nothing have worked until now. I'll leave here below the things i've tried so far.</p>\n\n<p>put this code(In various ways) in my \"application.yml\"</p>\n\n<pre><code>multipart: \n maxFileSize: 51200KB\n maxRequestFile: 51200KB  \n</code></pre>\n\n<p>I've also tried this in my principal class:</p>\n\n<pre><code>    @Bean\npublic TomcatEmbeddedServletContainerFactory containerFactory() {\n    TomcatEmbeddedServletContainerFactory factory = new TomcatEmbeddedServletContainerFactory();\n     factory.addConnectorCustomizers(new TomcatConnectorCustomizer() {\n        @Override\n        public void customize(Connector connector) {\n         ((AbstractHttp11Protocol&lt;?&gt;) connector.getProtocolHandler()).setMaxSwallowSize(-1);\n        }\n     });\n     return factory;\n}\n</code></pre>\n\n<p>And some strange thing. If i enter in my tomcat web.xml, the multipart-config is:</p>\n\n<pre><code>&lt;multipart-config&gt;\n      &lt;!-- 50MB max --&gt;\n      &lt;max-file-size&gt;52428800&lt;/max-file-size&gt;\n      &lt;max-request-size&gt;52428800&lt;/max-request-size&gt;\n      &lt;file-size-threshold&gt;0&lt;/file-size-threshold&gt;\n    &lt;/multipart-config&gt;\n</code></pre>\n\n<p>So where the hell this \"...configured maximum (10485760)\" is coming from ?\n(Sidenote: I'm using netbeans 8.1 and springboot 1.5).</p>\n\n<p>Thx guys.(And sorry for the english s2)</p>\n\n<p>Since asked, this is my application.yml</p>\n\n<pre><code> server:\n      port: 9999\n      context-path: /client\n    logging:\n      level:\n        org.springframework.security: DEBUG\n    endpoints:\n      trace:\n        sensitive: false\n\n    spring:\n        thymeleaf:\n            cache: false\n        multipart: \n          maxFileSize: 51200KB\n          maxRequestFile: 51200KB  \n\n    #################################################################################\n\n    security:\n      basic:\n        enabled: false\n      oauth2:\n        client:\n          client-id: acme2\n          client-secret: acmesecret2\n          access-token-uri: http://localhost:8080/oauth/token\n          user-authorization-uri: http://localhost:8080/oauth/authorize\n        resource:\n          user-info-uri: http://localhost:8080/me\n    #    \n</code></pre>\n"},{"tags":["java","lucene","fuzzy-search"],"owner":{"account_id":8736919,"reputation":129,"user_id":6535239,"display_name":"Elegant.Obj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":23,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691234287,"creation_date":1691234287,"question_id":76841396,"body_markdown":"I am using Lucene 9.7.0 java library\r\n\r\nI like the FuzzyQuery method for searching and my intention is to search phrases\r\n\r\nNow my code is working fine but I think there should be more convenient way to do the same:\r\n```java\r\nnew BooleanQuery.Builder()\r\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1), BooleanClause.Occur.MUST)\r\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;bar&quot;)), 1), BooleanClause.Occur.MUST)\r\n.build()\r\n```\r\n\r\nMaybe something like that (I got it from Lucene&#39;s documentation):\r\n```java\r\n String[] query = {&quot;query1&quot;, &quot;query2&quot;, &quot;query3&quot;};\r\n String[] fields = {&quot;filename&quot;, &quot;contents&quot;, &quot;description&quot;};\r\n BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,\r\n                BooleanClause.Occur.MUST,\r\n                BooleanClause.Occur.MUST_NOT};\r\n MultiFieldQueryParser.parse(query, fields, flags, analyzer);\r\n```\r\nI&#39;d appreciate a hint","title":"Lucene Query API: multi filed fuzzy query","body":"<p>I am using Lucene 9.7.0 java library</p>\n<p>I like the FuzzyQuery method for searching and my intention is to search phrases</p>\n<p>Now my code is working fine but I think there should be more convenient way to do the same:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new BooleanQuery.Builder()\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1), BooleanClause.Occur.MUST)\n    .add(new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;bar&quot;)), 1), BooleanClause.Occur.MUST)\n.build()\n</code></pre>\n<p>Maybe something like that (I got it from Lucene's documentation):</p>\n<pre class=\"lang-java prettyprint-override\"><code> String[] query = {&quot;query1&quot;, &quot;query2&quot;, &quot;query3&quot;};\n String[] fields = {&quot;filename&quot;, &quot;contents&quot;, &quot;description&quot;};\n BooleanClause.Occur[] flags = {BooleanClause.Occur.SHOULD,\n                BooleanClause.Occur.MUST,\n                BooleanClause.Occur.MUST_NOT};\n MultiFieldQueryParser.parse(query, fields, flags, analyzer);\n</code></pre>\n<p>I'd appreciate a hint</p>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":299251,"reputation":335925,"user_id":605744,"accept_rate":100,"display_name":"Tomasz Nurkiewicz"},"score":8,"creation_date":1307435324,"post_id":6262310,"comment_id":7305819,"body_markdown":"Can we add Wiki/FAQ entry or article for date parsing/formatting and timezones? Looks like 1 out of 5 Java questions are about this topic...","body":"Can we add Wiki/FAQ entry or article for date parsing/formatting and timezones? Looks like 1 out of 5 Java questions are about this topic..."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":2,"creation_date":1549965975,"post_id":6262310,"comment_id":96086180,"body_markdown":"For latecomers: donât use `Date` and certainly donât use `SimpleDateFormat`. Use `LocalDate` and `DateTimeFormatter` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/). For everyone: You are asking the impossible. A `Date` doesnât have a format, and you cannot change how its `toString` method works (the same goes for the modern `LocalDate`)..","body":"For latecomers: donât use <code>Date</code> and certainly donât use <code>SimpleDateFormat</code>. Use <code>LocalDate</code> and <code>DateTimeFormatter</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. For everyone: You are asking the impossible. A <code>Date</code> doesnât have a format, and you cannot change how its <code>toString</code> method works (the same goes for the modern <code>LocalDate</code>).."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":0,"creation_date":1691248920,"post_id":6262310,"comment_id":135467918,"body_markdown":"For a modern solution using *java.time*, see the Answers [by Ole V.V.](https://stackoverflow.com/a/54649203/642706) and [by Avinash](https://stackoverflow.com/a/76841385/642706).","body":"For a modern solution using <i>java.time</i>, see the Answers <a href=\"https://stackoverflow.com/a/54649203/642706\">by Ole V.V.</a> and <a href=\"https://stackoverflow.com/a/76841385/642706\">by Avinash</a>."}],"answers":[{"tags":[],"owner":{"account_id":102965,"reputation":415240,"user_id":276052,"accept_rate":80,"display_name":"aioobe"},"comment_count":0,"down_vote_count":0,"up_vote_count":55,"is_accepted":false,"score":55,"last_activity_date":1387214048,"creation_date":1307434108,"answer_id":6262336,"question_id":6262310,"body_markdown":"You need to go through [`SimpleDateFormat.format`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String%29) in order to format the date as a string.\r\n\r\nHere&#39;s an example that goes from `String` -&gt; `Date` -&gt; `String`.\r\n\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date date = dateFormat.parse(&quot;31/05/2011&quot;);\r\n\r\n    System.out.println(dateFormat.format(date));   // prints 31/05/2011\r\n    //                            ^^^^^^","title":"display Java.util.Date in a specific format","body":"<p>You need to go through <a href=\"http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html#SimpleDateFormat%28java.lang.String%29\"><code>SimpleDateFormat.format</code></a> in order to format the date as a string.</p>\n\n<p>Here's an example that goes from <code>String</code> -> <code>Date</code> -> <code>String</code>.</p>\n\n<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate date = dateFormat.parse(\"31/05/2011\");\n\nSystem.out.println(dateFormat.format(date));   // prints 31/05/2011\n//                            ^^^^^^\n</code></pre>\n"},{"tags":[],"owner":{"account_id":212263,"reputation":136304,"user_id":464988,"accept_rate":94,"display_name":"MByD"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1307434123,"creation_date":1307434123,"answer_id":6262337,"question_id":6262310,"body_markdown":"You already has this (that&#39;s what you entered) `parse` will parse a date into a giving format and print the full date object (`toString`).","title":"display Java.util.Date in a specific format","body":"<p>You already has this (that's what you entered) <code>parse</code> will parse a date into a giving format and print the full date object (<code>toString</code>).</p>\n"},{"tags":[],"owner":{"account_id":297677,"reputation":3564,"user_id":603314,"accept_rate":88,"display_name":"bugs_"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1307434649,"creation_date":1307434191,"answer_id":6262347,"question_id":6262310,"body_markdown":"It makes no sense, but:\r\n\r\n    System.out.println(dateFormat.format(dateFormat.parse(&quot;31/05/2011&quot;)))\r\n    \r\n    SimpleDateFormat.parse() = // parse Date from String\r\n    SimpleDateFormat.format() = // format Date into String","title":"display Java.util.Date in a specific format","body":"<p>It makes no sense, but:</p>\n\n<pre><code>System.out.println(dateFormat.format(dateFormat.parse(\"31/05/2011\")))\n\nSimpleDateFormat.parse() = // parse Date from String\nSimpleDateFormat.format() = // format Date into String\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1496947,"reputation":1498,"user_id":1402664,"accept_rate":50,"display_name":"Radhakrishna"},"score":9,"creation_date":1467284915,"post_id":6262370,"comment_id":63674393,"body_markdown":"I don&#39;t know why this answer is aaccepted. but it does not give the formatted date of type java.uti.Date. format () method returns String.","body":"I don&#39;t know why this answer is aaccepted. but it does not give the formatted date of type java.uti.Date. format () method returns String."},{"owner":{"account_id":69386,"reputation":5102,"user_id":201891,"accept_rate":85,"display_name":"DavidS"},"score":3,"creation_date":1467655137,"post_id":6262370,"comment_id":63805716,"body_markdown":"@RadhakrishnaGorenta, I&#39;m not sure what you mean by that. There is no such thing &quot;a formatted date of type java.uti.Date&quot;. Dates do not have &quot;formats&quot; until they are output on the screen or otherwise serialized. They are just objects.","body":"@RadhakrishnaGorenta, I&#39;m not sure what you mean by that. There is no such thing &quot;a formatted date of type java.uti.Date&quot;. Dates do not have &quot;formats&quot; until they are output on the screen or otherwise serialized. They are just objects."},{"owner":{"account_id":5542836,"reputation":2753,"user_id":4398699,"accept_rate":93,"display_name":"q.Then"},"score":0,"creation_date":1479774853,"post_id":6262370,"comment_id":68690734,"body_markdown":"How does this solve the question of &quot;converting a `util.Date` to `sql.Date` object?","body":"How does this solve the question of &quot;converting a <code>util.Date</code> to <code>sql.Date</code> object?"},{"owner":{"account_id":33206,"reputation":10107,"user_id":92764,"accept_rate":84,"display_name":"Luciano Fiandesio"},"score":2,"creation_date":1479982521,"post_id":6262370,"comment_id":68789762,"body_markdown":"@Ephemeral which question are you talking about? There is no reference whatsoever to sql.Date...","body":"@Ephemeral which question are you talking about? There is no reference whatsoever to sql.Date..."}],"tags":[],"owner":{"account_id":33206,"reputation":10107,"user_id":92764,"accept_rate":84,"display_name":"Luciano Fiandesio"},"comment_count":4,"down_vote_count":1,"up_vote_count":74,"is_accepted":true,"score":73,"last_activity_date":1505820314,"creation_date":1307434328,"answer_id":6262370,"question_id":6262310,"body_markdown":"How about: \r\n\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    System.out.println(dateFormat.format(dateFormat.parse(&quot;31/05/2011&quot;)));\r\n\r\n    &gt; 31/05/2011","title":"display Java.util.Date in a specific format","body":"<p>How about: </p>\n\n<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\nSystem.out.println(dateFormat.format(dateFormat.parse(\"31/05/2011\")));\n\n&gt; 31/05/2011\n</code></pre>\n"},{"tags":[],"owner":{"account_id":222134,"reputation":2003,"user_id":480536,"accept_rate":100,"display_name":"BadSkillz"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1307434334,"creation_date":1307434334,"answer_id":6262371,"question_id":6262310,"body_markdown":"Use the SimpleDateFormat.format\r\n\r\n    SimpleDateFormat sdf = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date date = new Date();\r\n    String sDate= sdf.format(date);","title":"display Java.util.Date in a specific format","body":"<p>Use the SimpleDateFormat.format</p>\n\n<pre><code>SimpleDateFormat sdf = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate date = new Date();\nString sDate= sdf.format(date);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":227818,"reputation":3518,"user_id":489718,"accept_rate":71,"display_name":"Sanjay Jain"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1307435504,"creation_date":1307435504,"answer_id":6262567,"question_id":6262310,"body_markdown":"This will help you.\r\nDateFormat df = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\nprint (df.format(new Date());","title":"display Java.util.Date in a specific format","body":"<p>This will help you.\nDateFormat df = new SimpleDateFormat(\"dd/MM/yyyy\");\nprint (df.format(new Date());</p>\n"},{"tags":[],"owner":{"account_id":2367632,"reputation":893,"user_id":2073032,"accept_rate":67,"display_name":"Thiago"},"comment_count":0,"down_vote_count":1,"up_vote_count":5,"is_accepted":false,"score":4,"last_activity_date":1381933087,"creation_date":1381933087,"answer_id":19405888,"question_id":6262310,"body_markdown":"If you want to simply output a date, just use the following:\r\n\r\n    System.out.printf(&quot;Date: %1$te/%1$tm/%1$tY at %1$tH:%1$tM:%1$tS%n&quot;, new Date());\r\n\r\nAs seen [here][1]. Or if you want to get the value into a String (for SQL building, for example) you can use:\r\n\r\n    String formattedDate = String.format(&quot;%1$te/%1$tm/%1$tY&quot;, new Date());\r\n\r\nYou can also customize your output by following the [Java API on Date/Time conversions][2].\r\n\r\n\r\n  [1]: http://blog.smartkey.co.uk/2011/10/quick-formatting-of-date-using-a-java-string-format-expression/\r\n  [2]: http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#dt","title":"display Java.util.Date in a specific format","body":"<p>If you want to simply output a date, just use the following:</p>\n\n<pre><code>System.out.printf(\"Date: %1$te/%1$tm/%1$tY at %1$tH:%1$tM:%1$tS%n\", new Date());\n</code></pre>\n\n<p>As seen <a href=\"http://blog.smartkey.co.uk/2011/10/quick-formatting-of-date-using-a-java-string-format-expression/\" rel=\"nofollow\">here</a>. Or if you want to get the value into a String (for SQL building, for example) you can use:</p>\n\n<pre><code>String formattedDate = String.format(\"%1$te/%1$tm/%1$tY\", new Date());\n</code></pre>\n\n<p>You can also customize your output by following the <a href=\"http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html#dt\" rel=\"nofollow\">Java API on Date/Time conversions</a>.</p>\n"},{"tags":[],"owner":{"account_id":1924499,"reputation":769,"user_id":1735269,"accept_rate":40,"display_name":"somshivam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1384017398,"creation_date":1384017398,"answer_id":19879720,"question_id":6262310,"body_markdown":"\r\nI had something like this, my suggestion would be to use java for things like this, don&#39;t put in boilerplate code\r\n\r\n![BasicImplementation][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/1Dbcx.png","title":"display Java.util.Date in a specific format","body":"<p>I had something like this, my suggestion would be to use java for things like this, don't put in boilerplate code</p>\n\n<p><img src=\"https://i.stack.imgur.com/1Dbcx.png\" alt=\"BasicImplementation\"></p>\n"},{"tags":[],"owner":{"account_id":4164931,"reputation":65,"user_id":3414090,"display_name":"Shan Abeywicrema"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1396459892,"creation_date":1396458550,"answer_id":22818376,"question_id":6262310,"body_markdown":"You can use simple date format in Java using the code below\r\n\r\n    SimpleDateFormat simpledatafo = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    Date newDate = new Date();\r\n    String expectedDate= simpledatafo.format(newDate);\r\n","title":"display Java.util.Date in a specific format","body":"<p>You can use simple date format in Java using the code below</p>\n\n<pre><code>SimpleDateFormat simpledatafo = new SimpleDateFormat(\"dd/MM/yyyy\");\nDate newDate = new Date();\nString expectedDate= simpledatafo.format(newDate);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1549971148,"creation_date":1549971148,"answer_id":54649203,"question_id":6262310,"body_markdown":"## java.time\r\n\r\nHereâs the modern answer.\r\n\r\n\t\tDateTimeFormatter sourceFormatter = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;);\r\n\t\tDateTimeFormatter displayFormatter = DateTimeFormatter\r\n\t\t\t\t.ofLocalizedDate(FormatStyle.SHORT)\r\n\t\t\t\t.withLocale(Locale.forLanguageTag(&quot;zh-SG&quot;));\r\n\t\t\r\n\t\tString dateString = &quot;31/05/2011&quot;;\r\n\t\tLocalDate date = LocalDate.parse(dateString, sourceFormatter);\r\n\t\tSystem.out.println(date.format(displayFormatter));\r\n\r\nOutput from this snippet is:\r\n\r\n&gt; 31/05/11\r\n\r\nSee if you can live with the 2-digit year. Or use `FormatStyle.MEDIUM` to obtain `2011å¹´5æ31æ¥`. I recommend you use Javaâs built-in date and time formats when you can. Itâs easier and lends itself very well to internationalization.\r\n\r\nIf you need the exact format you gave, just use the source formatter as display formatter too:\r\n\r\n\t\tSystem.out.println(date.format(sourceFormatter));\r\n\r\n&gt; 31/05/2011\r\n\r\nI recommend you donât use `SimpleDateFormat`. Itâs notoriously troublesome and long outdated. Instead I use java.time, the modern Java date and time API.\r\n\r\nTo obtain a specific format you need to format the parsed date back into a string. Netiher an old-fashioned `Date` nor a modern `LocalDate`can have a format in it.\r\n\r\n**Link:** [Oracle tutorial: Date Time](https://docs.oracle.com/javase/tutorial/datetime/) explaining how to use java.time.","title":"display Java.util.Date in a specific format","body":"<h2>java.time</h2>\n\n<p>Hereâs the modern answer.</p>\n\n<pre><code>    DateTimeFormatter sourceFormatter = DateTimeFormatter.ofPattern(\"dd/MM/uuuu\");\n    DateTimeFormatter displayFormatter = DateTimeFormatter\n            .ofLocalizedDate(FormatStyle.SHORT)\n            .withLocale(Locale.forLanguageTag(\"zh-SG\"));\n\n    String dateString = \"31/05/2011\";\n    LocalDate date = LocalDate.parse(dateString, sourceFormatter);\n    System.out.println(date.format(displayFormatter));\n</code></pre>\n\n<p>Output from this snippet is:</p>\n\n<blockquote>\n  <p>31/05/11</p>\n</blockquote>\n\n<p>See if you can live with the 2-digit year. Or use <code>FormatStyle.MEDIUM</code> to obtain <code>2011å¹´5æ31æ¥</code>. I recommend you use Javaâs built-in date and time formats when you can. Itâs easier and lends itself very well to internationalization.</p>\n\n<p>If you need the exact format you gave, just use the source formatter as display formatter too:</p>\n\n<pre><code>    System.out.println(date.format(sourceFormatter));\n</code></pre>\n\n<blockquote>\n  <p>31/05/2011</p>\n</blockquote>\n\n<p>I recommend you donât use <code>SimpleDateFormat</code>. Itâs notoriously troublesome and long outdated. Instead I use java.time, the modern Java date and time API.</p>\n\n<p>To obtain a specific format you need to format the parsed date back into a string. Netiher an old-fashioned <code>Date</code> nor a modern <code>LocalDate</code>can have a format in it.</p>\n\n<p><strong>Link:</strong> <a href=\"https://docs.oracle.com/javase/tutorial/datetime/\" rel=\"nofollow noreferrer\">Oracle tutorial: Date Time</a> explaining how to use java.time.</p>\n"},{"tags":[],"owner":{"account_id":5340830,"reputation":668,"user_id":4258006,"display_name":"Shiva kumar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1646836145,"creation_date":1646836145,"answer_id":71410961,"question_id":6262310,"body_markdown":"This looks more compact. Finishes in a single line.\r\n\r\n\r\n    import org.apache.commons.lang3.time.DateFormatUtils;\r\n    \r\n    System.out.println(DateFormatUtils.format(newDate, &quot;yyyy-MM-dd HH:mm:ss&quot;));\r\n\r\n","title":"display Java.util.Date in a specific format","body":"<p>This looks more compact. Finishes in a single line.</p>\n<pre><code>import org.apache.commons.lang3.time.DateFormatUtils;\n\nSystem.out.println(DateFormatUtils.format(newDate, &quot;yyyy-MM-dd HH:mm:ss&quot;));\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691234144,"creation_date":1691234144,"answer_id":76841385,"question_id":6262310,"body_markdown":"java.time\r\n--\r\n\r\nThe question and the answers written at that time use `java.util` Date-Time API and their formatting API, `SimpleDateFormat` which was the right thing to do at that time. Java 8, released in March 2014, brought the modern date-time API.  It is recommended to stop using the legacy date-time API entirely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html).\r\n\r\nAlso, quoted below is a notice from the [home page of **Joda-Time**](https://www.joda.org/joda-time/):\r\n\r\n&gt; Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.\r\n\r\nYour problem\r\n--\r\nYou are trying to parse the date string into a `java.util.Date` object and print it. A `java.util.Date` object represents only the number of milliseconds since January 1, 1970, 00:00:00 GMT. When you print its object, the string returned by [`Date#toString`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toString--), which applies your system&#39;s timezone, is printed. Note that a date-time object holds only date-time information, not a format. A format is represented using a string you obtain by formatting the date-time object using a date-time formatting class with the desired pattern.\r\n\r\nModern Date-Time API\r\n--\r\n\r\nThe following [table](https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html) shows an overview of different types available in the modern Date-Time API.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nThe type, `LocalDate` fits your requirement. You can use different patterns for parsing and formatting using a [`DateTimeFormatter`](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html). The following example uses the same pattern for parsing and formatting:\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String strDate = &quot;31/05/2011&quot;;\r\n            DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;, Locale.ENGLISH);\r\n            LocalDate date = LocalDate.parse(strDate, dtf);\r\n            System.out.printf(&quot;Default format: %s, Custom format: %s%n&quot;, date, date.format(dtf));\r\n        }\r\n    }\r\n    \r\n**Output:**\r\n\r\n    Default format: 2011-05-31, Custom format: 31/05/2011\r\n\r\n[ONLINE DEMO](https://ideone.com/NC7gUj)\r\n\r\n**Note:** Here, you can use `y` instead of `u` but [I prefer `u` to `y`](https://stackoverflow.com/a/65928023/10819573). Also, [never use `DateTimeFormatter` for custom formats without a Locale](https://stackoverflow.com/a/65544056/10819573).\r\n\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Z13Rb.png","title":"display Java.util.Date in a specific format","body":"<h2>java.time</h2>\n<p>The question and the answers written at that time use <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> which was the right thing to do at that time. Java 8, released in March 2014, brought the modern date-time API.  It is recommended to stop using the legacy date-time API entirely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a>.</p>\n<p>Also, quoted below is a notice from the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">home page of <strong>Joda-Time</strong></a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<h2>Your problem</h2>\n<p>You are trying to parse the date string into a <code>java.util.Date</code> object and print it. A <code>java.util.Date</code> object represents only the number of milliseconds since January 1, 1970, 00:00:00 GMT. When you print its object, the string returned by <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toString--\" rel=\"nofollow noreferrer\"><code>Date#toString</code></a>, which applies your system's timezone, is printed. Note that a date-time object holds only date-time information, not a format. A format is represented using a string you obtain by formatting the date-time object using a date-time formatting class with the desired pattern.</p>\n<h2>Modern Date-Time API</h2>\n<p>The following <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html\" rel=\"nofollow noreferrer\">table</a> shows an overview of different types available in the modern Date-Time API.</p>\n<p><a href=\"https://i.stack.imgur.com/Z13Rb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z13Rb.png\" alt=\"enter image description here\" /></a></p>\n<p>The type, <code>LocalDate</code> fits your requirement. You can use different patterns for parsing and formatting using a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\"><code>DateTimeFormatter</code></a>. The following example uses the same pattern for parsing and formatting:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        String strDate = &quot;31/05/2011&quot;;\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;dd/MM/uuuu&quot;, Locale.ENGLISH);\n        LocalDate date = LocalDate.parse(strDate, dtf);\n        System.out.printf(&quot;Default format: %s, Custom format: %s%n&quot;, date, date.format(dtf));\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Default format: 2011-05-31, Custom format: 31/05/2011\n</code></pre>\n<p><a href=\"https://ideone.com/NC7gUj\" rel=\"nofollow noreferrer\">ONLINE DEMO</a></p>\n<p><strong>Note:</strong> Here, you can use <code>y</code> instead of <code>u</code> but <a href=\"https://stackoverflow.com/a/65928023/10819573\">I prefer <code>u</code> to <code>y</code></a>. Also, <a href=\"https://stackoverflow.com/a/65544056/10819573\">never use <code>DateTimeFormatter</code> for custom formats without a Locale</a>.</p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"}],"owner":{"account_id":761110,"reputation":719,"user_id":782287,"accept_rate":80,"display_name":"bhavya "},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":195089,"favorite_count":0,"down_vote_count":0,"up_vote_count":57,"accepted_answer_id":6262370,"answer_count":12,"score":57,"last_activity_date":1691234144,"creation_date":1307433976,"question_id":6262310,"body_markdown":"I have the following scenario :\r\n\r\n    SimpleDateFormat dateFormat = new SimpleDateFormat(&quot;dd/MM/yyyy&quot;);\r\n    System.out.println(dateFormat.parse(&quot;31/05/2011&quot;));\r\n\r\ngives an output \r\n\r\n    Tue May 31 00:00:00 SGT 2011\r\n\r\nbut I want the output to be \r\n\r\n    31/05/2011 \r\n\r\nI need to use parse here because the dates need to be sorted as Dates and not as String.\r\n\r\nAny ideas ??\r\n\r\n","title":"display Java.util.Date in a specific format","body":"<p>I have the following scenario :</p>\n\n<pre><code>SimpleDateFormat dateFormat = new SimpleDateFormat(\"dd/MM/yyyy\");\nSystem.out.println(dateFormat.parse(\"31/05/2011\"));\n</code></pre>\n\n<p>gives an output </p>\n\n<pre><code>Tue May 31 00:00:00 SGT 2011\n</code></pre>\n\n<p>but I want the output to be </p>\n\n<pre><code>31/05/2011 \n</code></pre>\n\n<p>I need to use parse here because the dates need to be sorted as Dates and not as String.</p>\n\n<p>Any ideas ??</p>\n"},{"tags":["java","lucene","full-text-search"],"owner":{"account_id":8736919,"reputation":129,"user_id":6535239,"display_name":"Elegant.Obj"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":21,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691233220,"creation_date":1691232011,"question_id":76841244,"body_markdown":"I started to use the Lucene search library (v9.7.0). It works fine and as expected but I don&#39;t understand some API. Maybe there exists the best way to go?\r\n\r\nI use StandardAnalizer for indexing and preparing search terms. The question is - why StandardAnalizer#normileze requires a field name? I found out that it is not necessary to pass it\r\n\r\n```java\r\nnew FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1)\r\n```\r\n\r\nI have to pass null and it smells","title":"Why Lucene&#39;s analyzer&#39;s normalize method needs a field name","body":"<p>I started to use the Lucene search library (v9.7.0). It works fine and as expected but I don't understand some API. Maybe there exists the best way to go?</p>\n<p>I use StandardAnalizer for indexing and preparing search terms. The question is - why StandardAnalizer#normileze requires a field name? I found out that it is not necessary to pass it</p>\n<pre class=\"lang-java prettyprint-override\"><code>new FuzzyQuery(new Term(&quot;title&quot;, analyzer.normalize(null, &quot;foo&quot;)), 1)\n</code></pre>\n<p>I have to pass null and it smells</p>\n"},{"tags":["java","weblogic","weblogic12c"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691093060,"post_id":76831289,"comment_id":135448928,"body_markdown":"Please use [code format](https://stackoverflow.com/editing-help#code) for code, errors and logs.","body":"Please use <a href=\"https://stackoverflow.com/editing-help#code\">code format</a> for code, errors and logs."},{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":0,"creation_date":1691093124,"post_id":76831289,"comment_id":135448941,"body_markdown":"Please share the source code of the error class.","body":"Please share the source code of the error class."},{"owner":{"account_id":2635556,"reputation":145,"user_id":2280352,"accept_rate":30,"display_name":"user2280352"},"score":0,"creation_date":1691094726,"post_id":76831289,"comment_id":135449252,"body_markdown":"This application is already deployed on Production Weblogic. I am trying to get it run locally for myself. The application is running fine on production.","body":"This application is already deployed on Production Weblogic. I am trying to get it run locally for myself. The application is running fine on production."}],"owner":{"account_id":2635556,"reputation":145,"user_id":2280352,"accept_rate":30,"display_name":"user2280352"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":17,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691140664,"answer_count":0,"score":0,"last_activity_date":1691232781,"creation_date":1691092819,"question_id":76831289,"body_markdown":"I get the following error while deploying Java application to Weblogic server\r\n\r\n    weblogic.utils.ErrorCollectionException: \r\n     There are 3 nested errors:\r\n        java.lang.IllegalArgumentException: \r\n             Method &quot;initialize&quot; in class  &quot;com.sim.try.ght.ment.cob.MentAdvancedQueueMessageListener&quot; is \r\n             defined as lifecycle callback method with annotation @PostConstruct,\r\n             but it cannot be declared to throw checked exception. \r\n\r\n     at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:206) \r\n     at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:229) \r\n     at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.checkException(BaseValidator.java:178) \r\n     at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.checkMethod(AbstractAnnotationValidator.java:64) \r\n     at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.validate(AbstractAnnotationValidator.java:31) \r\n     at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visitLifeCycleCallbackBean(AnnotationValidatorVisitor.java:37) \r\n     at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visit(AnnotationValidatorVisitor.java:24) \r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1448) \r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452)\r\n     at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \r\n    \r\n  &gt; Weblogic version -12, Jdk -1,8\r\n\r\nHow can I resolve this error?\r\n\r\n\r\n","title":"Error while deploying Java application to Weblogic","body":"<p>I get the following error while deploying Java application to Weblogic server</p>\n<pre><code>weblogic.utils.ErrorCollectionException: \n There are 3 nested errors:\n    java.lang.IllegalArgumentException: \n         Method &quot;initialize&quot; in class  &quot;com.sim.try.ght.ment.cob.MentAdvancedQueueMessageListener&quot; is \n         defined as lifecycle callback method with annotation @PostConstruct,\n         but it cannot be declared to throw checked exception. \n\n at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:206) \n at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.error(BaseValidator.java:229) \n at weblogic.j2ee.dd.xml.validator.lifecyclecallback.BaseValidator.checkException(BaseValidator.java:178) \n at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.checkMethod(AbstractAnnotationValidator.java:64) \n at weblogic.j2ee.dd.xml.validator.AbstractAnnotationValidator.validate(AbstractAnnotationValidator.java:31) \n at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visitLifeCycleCallbackBean(AnnotationValidatorVisitor.java:37) \n at weblogic.j2ee.dd.xml.validator.AnnotationValidatorVisitor.visit(AnnotationValidatorVisitor.java:24) \n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1448) \n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452)\n at weblogic.descriptor.internal.AbstractDescriptorBean.accept(AbstractDescriptorBean.java:1452) \n</code></pre>\n<blockquote>\n<p>Weblogic version -12, Jdk -1,8</p>\n</blockquote>\n<p>How can I resolve this error?</p>\n"},{"tags":["java","sql","spring","apache-commons-dbutils"],"answers":[{"tags":[],"owner":{"account_id":1721698,"reputation":3579,"user_id":1577363,"display_name":"erhun"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1461743964,"creation_date":1442241982,"answer_id":32567733,"question_id":30156127,"body_markdown":"I didn&#39;t find any official solution from [DBUtils API][1] so i just return generated ID and then query it after insert the record with this id at Service layer. This way method return Object at service layer, but i do one extra query.\r\n\r\n\r\n  [1]: https://commons.apache.org/proper/commons-dbutils/","title":"QueryRunner Insert method Return Type","body":"<p>I didn't find any official solution from <a href=\"https://commons.apache.org/proper/commons-dbutils/\" rel=\"nofollow\">DBUtils API</a> so i just return generated ID and then query it after insert the record with this id at Service layer. This way method return Object at service layer, but i do one extra query.</p>\n"},{"tags":[],"owner":{"account_id":7974658,"reputation":87,"user_id":6018232,"display_name":"Zhenhua Sheng"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691223385,"creation_date":1691223385,"answer_id":76840724,"question_id":30156127,"body_markdown":"the ResultSet of QueryRunner.insert return value only has one param that is the GENERATED_KEY of the record, you can get with rs.getInteger\r\n\r\n    Integer id = qr.insert(sql, rs -&gt; rs.next() ? rs.getInteger(&quot;GENERATED_KEY&quot;) : null, params);\r\n\r\nthen query with this id","title":"QueryRunner Insert method Return Type","body":"<p>the ResultSet of QueryRunner.insert return value only has one param that is the GENERATED_KEY of the record, you can get with rs.getInteger</p>\n<pre><code>Integer id = qr.insert(sql, rs -&gt; rs.next() ? rs.getInteger(&quot;GENERATED_KEY&quot;) : null, params);\n</code></pre>\n<p>then query with this id</p>\n"}],"owner":{"account_id":1721698,"reputation":3579,"user_id":1577363,"display_name":"erhun"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2332,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":32567733,"answer_count":2,"score":0,"last_activity_date":1691232709,"creation_date":1431288429,"question_id":30156127,"body_markdown":" I am using Apache Commons DBUtils according to [QueryRunner#insert][1] method in its documentation, insert return the generic type of ResultSetHandler. I have a BR_Author object for my project. \r\n\r\n***BR_Author.java***\r\n\r\n\r\n    import org.springframework.stereotype.Repository;\r\n    \r\n    @Repository\r\n    public class BR_Author {\r\n    \tprivate int id;\r\n    \tprivate String authorName;\r\n    \r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \r\n    \tpublic String getAuthorName() {\r\n    \t\treturn authorName;\r\n    \t}\r\n    \r\n    \tpublic void setAuthorName(String authorName) {\r\n    \t\tthis.authorName = authorName;\r\n    \t}\r\n    }\r\n\r\nI write a simple insert statement at my service class like \r\n\r\n***AuthorService#createAuthor***\r\n\r\n    public BR_Author createAuthor(String authorName) throws ApiException {\r\n    \t\tString sql = &quot;Insert into BR_AUTHOR(authorName) VALUES(?)&quot;;\r\n    \t\tResultSetHandler&lt;BR_Author&gt; rs = new BeanHandler&lt;BR_Author&gt;(\r\n    \t\t\t\tBR_Author.class);\r\n    \t\tQueryRunner qr = new QueryRunner(dataSource);\r\n    \t\tObject[] params = { authorName };\r\n    \t\ttry {\r\n    \t\t\tBR_Author author = qr.insert(sql, rs, params);\r\n    \t\t\tSystem.out.println(&quot;Br_Author:&quot; + author);\r\n    \t\t\treturn author;\r\n    \r\n    \t\t} catch (SQLException e) {\r\n    \t\t\tthrow new ApiException(ErrorCode.ERR20001, e.getMessage());\r\n    \t\t}\r\n    \t}\r\n\r\nI am trying to return the added value at the createAuthor method, but if i configure the id field as auto-increment object return as \r\n\r\n    Br_Author:Br_Author [id=0, authorName=null]\r\n\r\nwhen I check the db I see that it adds the values successfully.\r\n\r\nIf I disable auto-increment and set the id from the code, the author object is null. So I want to learn that am I misunderstood the QueryRunner#insert method or if it has a bug. I already checked the below links.\r\n\r\n - [QueryRunner_insert_add_javadoc.patch][2]\r\n - [Generated key handling for updates][3]\r\n\r\n***BTW:*** Select queries working fine for the BR_Author class so it means there shouldn&#39;t be any mapping issue.\r\n\r\n  [1]: https://commons.apache.org/proper/commons-dbutils/apidocs/org/apache/commons/dbutils/QueryRunner.html#insert(java.lang.String,%20org.apache.commons.dbutils.ResultSetHandler)\r\n  [2]: https://issues.apache.org/jira/secure/attachment/12541287/QueryRunner_insert_add_javadoc.patch\r\n  [3]: https://issues.apache.org/jira/browse/DBUTILS-54","title":"QueryRunner Insert method Return Type","body":"<p>I am using Apache Commons DBUtils according to <a href=\"https://commons.apache.org/proper/commons-dbutils/apidocs/org/apache/commons/dbutils/QueryRunner.html#insert(java.lang.String,%20org.apache.commons.dbutils.ResultSetHandler)\" rel=\"nofollow noreferrer\">QueryRunner#insert</a> method in its documentation, insert return the generic type of ResultSetHandler. I have a BR_Author object for my project.</p>\n<p><em><strong>BR_Author.java</strong></em></p>\n<pre><code>import org.springframework.stereotype.Repository;\n\n@Repository\npublic class BR_Author {\n    private int id;\n    private String authorName;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getAuthorName() {\n        return authorName;\n    }\n\n    public void setAuthorName(String authorName) {\n        this.authorName = authorName;\n    }\n}\n</code></pre>\n<p>I write a simple insert statement at my service class like</p>\n<p><em><strong>AuthorService#createAuthor</strong></em></p>\n<pre><code>public BR_Author createAuthor(String authorName) throws ApiException {\n        String sql = &quot;Insert into BR_AUTHOR(authorName) VALUES(?)&quot;;\n        ResultSetHandler&lt;BR_Author&gt; rs = new BeanHandler&lt;BR_Author&gt;(\n                BR_Author.class);\n        QueryRunner qr = new QueryRunner(dataSource);\n        Object[] params = { authorName };\n        try {\n            BR_Author author = qr.insert(sql, rs, params);\n            System.out.println(&quot;Br_Author:&quot; + author);\n            return author;\n\n        } catch (SQLException e) {\n            throw new ApiException(ErrorCode.ERR20001, e.getMessage());\n        }\n    }\n</code></pre>\n<p>I am trying to return the added value at the createAuthor method, but if i configure the id field as auto-increment object return as</p>\n<pre><code>Br_Author:Br_Author [id=0, authorName=null]\n</code></pre>\n<p>when I check the db I see that it adds the values successfully.</p>\n<p>If I disable auto-increment and set the id from the code, the author object is null. So I want to learn that am I misunderstood the QueryRunner#insert method or if it has a bug. I already checked the below links.</p>\n<ul>\n<li><a href=\"https://issues.apache.org/jira/secure/attachment/12541287/QueryRunner_insert_add_javadoc.patch\" rel=\"nofollow noreferrer\">QueryRunner_insert_add_javadoc.patch</a></li>\n<li><a href=\"https://issues.apache.org/jira/browse/DBUTILS-54\" rel=\"nofollow noreferrer\">Generated key handling for updates</a></li>\n</ul>\n<p><em><strong>BTW:</strong></em> Select queries working fine for the BR_Author class so it means there shouldn't be any mapping issue.</p>\n"},{"tags":["java","unit-testing","junit","junit5","parameterized-tests"],"comments":[{"owner":{"account_id":3455718,"reputation":102,"user_id":2894291,"display_name":"Josef Vesel&#253;"},"score":1,"creation_date":1691061791,"post_id":68419266,"comment_id":135442168,"body_markdown":"that would be useful but I don&#39;t think there is a better solution that the one you came up with","body":"that would be useful but I don&#39;t think there is a better solution that the one you came up with"},{"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"score":0,"creation_date":1694754242,"post_id":68419266,"comment_id":135935373,"body_markdown":"See https://github.com/junit-team/junit5/issues/1427","body":"See <a href=\"https://github.com/junit-team/junit5/issues/1427\" rel=\"nofollow noreferrer\">github.com/junit-team/junit5/issues/1427</a>"}],"answers":[{"tags":[],"owner":{"account_id":4185213,"reputation":7640,"user_id":3429133,"accept_rate":73,"display_name":"beatngu13"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1691231942,"creation_date":1691231942,"answer_id":76841237,"question_id":68419266,"body_markdown":"[JUnit Pioneer](https://github.com/junit-pioneer/junit-pioneer) comes with [`@CartesianTest`](https://junit-pioneer.org/docs/cartesian-product/):\r\n\r\n```java\r\nimport org.junitpioneer.jupiter.cartesian.CartesianTest;\r\nimport org.junitpioneer.jupiter.cartesian.CartesianTest.Enum;\r\n\r\nclass FigureAndColorTest {\r\n\r\n\tenum Figure {\r\n\t\tTRIANGE, SQUARE\r\n\t}\r\n\r\n\tenum Color {\r\n\t\tRED, YELLOW\r\n\t}\r\n\r\n\t@CartesianTest\r\n\tvoid test(@Enum Figure figure, @Enum Color color) {\r\n\t\tSystem.out.printf(&quot;%s %s%n&quot;, figure, color);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n```text\r\nTRIANGE RED\r\nTRIANGE YELLOW\r\nSQUARE RED\r\nSQUARE YELLOW\r\n```\r\n\r\n**DISCLAIMER:** I&#39;m one of the maintainers of JUnit Pionner.","title":"How to create parameterized test with few enums in JUnit 5?","body":"<p><a href=\"https://github.com/junit-pioneer/junit-pioneer\" rel=\"nofollow noreferrer\">JUnit Pioneer</a> comes with <a href=\"https://junit-pioneer.org/docs/cartesian-product/\" rel=\"nofollow noreferrer\"><code>@CartesianTest</code></a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junitpioneer.jupiter.cartesian.CartesianTest;\nimport org.junitpioneer.jupiter.cartesian.CartesianTest.Enum;\n\nclass FigureAndColorTest {\n\n    enum Figure {\n        TRIANGE, SQUARE\n    }\n\n    enum Color {\n        RED, YELLOW\n    }\n\n    @CartesianTest\n    void test(@Enum Figure figure, @Enum Color color) {\n        System.out.printf(&quot;%s %s%n&quot;, figure, color);\n    }\n\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>TRIANGE RED\nTRIANGE YELLOW\nSQUARE RED\nSQUARE YELLOW\n</code></pre>\n<p><strong>DISCLAIMER:</strong> I'm one of the maintainers of JUnit Pionner.</p>\n"}],"owner":{"account_id":20654871,"reputation":236,"user_id":15164253,"display_name":"Victor Levin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":11251,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"answer_count":1,"score":11,"last_activity_date":1691231942,"creation_date":1626514632,"question_id":68419266,"body_markdown":"For example, I have few enums in my project:\r\n  - Figure, with values TRIANGLE and SQUARE\r\n  - Color, with values are RED and YELLOW\r\n\r\nHow to create a test, using the cartesian product of all of the combinations? The follow code doesn&#39;t work:\r\n\r\n    // this doesn&#39;t work\r\n    @ParameterizedTest\r\n    @EnumSource(value = Figure.class)\r\n    @EnumSource(value = Color.class)\r\n    void test(Figure figure, Color color) {\r\n        System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\r\n    }\r\n\r\nI want to get all of combinations:\r\n\r\n    TRIANGLE RED\r\n    TRIANGLE YELLOW\r\n    SQUARE RED\r\n    SQUARE YELLOW\r\n\r\nMy temporary solution is using annotation @MethodSource\r\n\r\n    // this works\r\n    @ParameterizedTest\r\n    @MethodSource(&quot;generateCartesianProduct&quot;)\r\n    void test(Figure figure, Color color) {\r\n        System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\r\n    }\r\n\r\n\r\n    private static Stream&lt;Arguments&gt; generateCartesianProduct() {\r\n        List&lt;Arguments&gt; argumentsList = new ArrayList&lt;&gt;();\r\n\r\n        for(Figure figure : Figure.values()) {\r\n            for(Color color : Color.values()) {\r\n                argumentsList.add(Arguments.of(figure,color));\r\n            }\r\n        }\r\n\r\n        return argumentsList.stream();\r\n    }\r\n\r\nBut I don&#39;t want to have extra code in my tests. Has JUnit 5 any solution for my problem?","title":"How to create parameterized test with few enums in JUnit 5?","body":"<p>For example, I have few enums in my project:</p>\n<ul>\n<li>Figure, with values TRIANGLE and SQUARE</li>\n<li>Color, with values are RED and YELLOW</li>\n</ul>\n<p>How to create a test, using the cartesian product of all of the combinations? The follow code doesn't work:</p>\n<pre><code>// this doesn't work\n@ParameterizedTest\n@EnumSource(value = Figure.class)\n@EnumSource(value = Color.class)\nvoid test(Figure figure, Color color) {\n    System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\n}\n</code></pre>\n<p>I want to get all of combinations:</p>\n<pre><code>TRIANGLE RED\nTRIANGLE YELLOW\nSQUARE RED\nSQUARE YELLOW\n</code></pre>\n<p>My temporary solution is using annotation @MethodSource</p>\n<pre><code>// this works\n@ParameterizedTest\n@MethodSource(&quot;generateCartesianProduct&quot;)\nvoid test(Figure figure, Color color) {\n    System.out.println(String.format(&quot;%s_%s&quot;,figure,color));\n}\n\n\nprivate static Stream&lt;Arguments&gt; generateCartesianProduct() {\n    List&lt;Arguments&gt; argumentsList = new ArrayList&lt;&gt;();\n\n    for(Figure figure : Figure.values()) {\n        for(Color color : Color.values()) {\n            argumentsList.add(Arguments.of(figure,color));\n        }\n    }\n\n    return argumentsList.stream();\n}\n</code></pre>\n<p>But I don't want to have extra code in my tests. Has JUnit 5 any solution for my problem?</p>\n"},{"tags":["java","spring-boot","hibernate","spring-data-jpa"],"answers":[{"comments":[{"owner":{"account_id":14043131,"reputation":43,"user_id":10144089,"display_name":"Jugs"},"score":0,"creation_date":1691232674,"post_id":76841226,"comment_id":135466328,"body_markdown":"Thanks butterCup. I will try this approach and will let you know how this goes. Thanks once again!","body":"Thanks butterCup. I will try this approach and will let you know how this goes. Thanks once again!"},{"owner":{"account_id":14043131,"reputation":43,"user_id":10144089,"display_name":"Jugs"},"score":0,"creation_date":1691382268,"post_id":76841226,"comment_id":135478714,"body_markdown":"This actually works but I had to make few changes in GenericRepository especially in entityManager.createQuery where I had to add a second parameter (Class object) for successful mapping of rows. Thanks anyways for the pointer! Cheers","body":"This actually works but I had to make few changes in GenericRepository especially in entityManager.createQuery where I had to add a second parameter (Class object) for successful mapping of rows. Thanks anyways for the pointer! Cheers"},{"owner":{"account_id":26105575,"reputation":56,"user_id":19800332,"display_name":"butterCup"},"score":0,"creation_date":1691398800,"post_id":76841226,"comment_id":135480960,"body_markdown":"Can u pls mark this as answer. Thanks","body":"Can u pls mark this as answer. Thanks"}],"tags":[],"owner":{"account_id":26105575,"reputation":56,"user_id":19800332,"display_name":"butterCup"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691231763,"creation_date":1691231763,"answer_id":76841226,"question_id":76840712,"body_markdown":"\r\n    @RestController\r\n    @RequestMapping(&quot;/lookup/{tableName}&quot;)\r\n    public class LookupController {\r\n\r\n    @Autowired\r\n    private GenericRepository repository;\r\n\r\n    @GetMapping\r\n    public List&lt;?&gt; list(@PathVariable String tableName) {\r\n        return repository.findAll(tableName);\r\n    }\r\n\r\n    @GetMapping(&quot;/{id}&quot;)\r\n    public Object get(@PathVariable String tableName, @PathVariable Long id) {\r\n        return repository.findById(tableName, id);\r\n    }\r\n\r\n    @PutMapping(&quot;/{id}&quot;)\r\n    public void update(@PathVariable String tableName, @PathVariable Long id, @RequestBody Object entity) {\r\n        repository.save(tableName, entity);\r\n    }\r\n\r\n    @GetMapping(&quot;/findBy/{property}/{value}&quot;)\r\n    public List&lt;?&gt; findByProperty(@PathVariable String tableName, @PathVariable String property, @PathVariable String value) {\r\n        return repository.findByProperty(tableName, property, value);\r\n    }\r\n}\r\n\r\n\r\n\r\n    @Repository\r\n    public class GenericRepository {\r\n\r\n    @PersistenceContext\r\n    private EntityManager entityManager;\r\n\r\n    public List&lt;?&gt; findAll(String tableName) {\r\n        return entityManager.createQuery(&quot;SELECT e FROM &quot; + tableName + &quot; e&quot;).getResultList();\r\n    }\r\n\r\n    public Object findById(String tableName, Long id) {\r\n        return entityManager.find(tableName, id);\r\n    }\r\n\r\n    public void save(String tableName, Object entity) {\r\n        entityManager.merge(entity);\r\n    }\r\n\r\n    public List&lt;?&gt; findByProperty(String tableName, String property, String value) {\r\n        String query = &quot;SELECT e FROM &quot; + tableName + &quot; e WHERE e.&quot; + property + &quot; = :value&quot;;\r\n        TypedQuery&lt;?&gt; typedQuery = entityManager.createQuery(query, Object.class);\r\n        typedQuery.setParameter(&quot;value&quot;, value);\r\n        return typedQuery.getResultList();\r\n    }\r\n\r\nAbove reference is one way or generic entity class that can be used to represent all your lookup tables. And create a generic repository that extends JPA repository and inject it in controller and use it to perform various CRUD operations for lookup entities.\r\n\r\n    public interface GenericRepository &lt;T, ID extends Serializable&gt; extends JpaRepository&lt;T, ID&gt; {\r\n    \r\n}\r\n","title":"Is there a way to use a single controller and single generic JPARepository to handle multiple entities?","body":"<pre><code>@RestController\n@RequestMapping(&quot;/lookup/{tableName}&quot;)\npublic class LookupController {\n\n@Autowired\nprivate GenericRepository repository;\n\n@GetMapping\npublic List&lt;?&gt; list(@PathVariable String tableName) {\n    return repository.findAll(tableName);\n}\n\n@GetMapping(&quot;/{id}&quot;)\npublic Object get(@PathVariable String tableName, @PathVariable Long id) {\n    return repository.findById(tableName, id);\n}\n\n@PutMapping(&quot;/{id}&quot;)\npublic void update(@PathVariable String tableName, @PathVariable Long id, @RequestBody Object entity) {\n    repository.save(tableName, entity);\n}\n\n@GetMapping(&quot;/findBy/{property}/{value}&quot;)\npublic List&lt;?&gt; findByProperty(@PathVariable String tableName, @PathVariable String property, @PathVariable String value) {\n    return repository.findByProperty(tableName, property, value);\n}\n</code></pre>\n<p>}</p>\n<pre><code>@Repository\npublic class GenericRepository {\n\n@PersistenceContext\nprivate EntityManager entityManager;\n\npublic List&lt;?&gt; findAll(String tableName) {\n    return entityManager.createQuery(&quot;SELECT e FROM &quot; + tableName + &quot; e&quot;).getResultList();\n}\n\npublic Object findById(String tableName, Long id) {\n    return entityManager.find(tableName, id);\n}\n\npublic void save(String tableName, Object entity) {\n    entityManager.merge(entity);\n}\n\npublic List&lt;?&gt; findByProperty(String tableName, String property, String value) {\n    String query = &quot;SELECT e FROM &quot; + tableName + &quot; e WHERE e.&quot; + property + &quot; = :value&quot;;\n    TypedQuery&lt;?&gt; typedQuery = entityManager.createQuery(query, Object.class);\n    typedQuery.setParameter(&quot;value&quot;, value);\n    return typedQuery.getResultList();\n}\n</code></pre>\n<p>Above reference is one way or generic entity class that can be used to represent all your lookup tables. And create a generic repository that extends JPA repository and inject it in controller and use it to perform various CRUD operations for lookup entities.</p>\n<pre><code>public interface GenericRepository &lt;T, ID extends Serializable&gt; extends JpaRepository&lt;T, ID&gt; {\n</code></pre>\n<p>}</p>\n"}],"owner":{"account_id":14043131,"reputation":43,"user_id":10144089,"display_name":"Jugs"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691231763,"creation_date":1691223170,"question_id":76840712,"body_markdown":"The product I&#39;m working on has more than 80 lookup tables and each with their own CRUD operations.\r\n\r\nI don&#39;t want to create separate controllers and JPARepositories for each of those models but I&#39;d like to use a single controller and a generic JPARepository to handle all the lookup table entities.\r\n\r\nController is a @RestController and it accepts json data and needs to have 4 operations namely LIST, GET, POST and PUT. Since the json data format is the same as there is only one table involved and no relations whatsoever, I think it must be possible achieve this in Sprint Hibernate.\r\n\r\nAppreciate some advice.","title":"Is there a way to use a single controller and single generic JPARepository to handle multiple entities?","body":"<p>The product I'm working on has more than 80 lookup tables and each with their own CRUD operations.</p>\n<p>I don't want to create separate controllers and JPARepositories for each of those models but I'd like to use a single controller and a generic JPARepository to handle all the lookup table entities.</p>\n<p>Controller is a @RestController and it accepts json data and needs to have 4 operations namely LIST, GET, POST and PUT. Since the json data format is the same as there is only one table involved and no relations whatsoever, I think it must be possible achieve this in Sprint Hibernate.</p>\n<p>Appreciate some advice.</p>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"account_id":10580983,"reputation":420,"user_id":7794806,"display_name":"Jes&#250;s Barrera"},"score":1,"creation_date":1644553174,"post_id":71075233,"comment_id":125642957,"body_markdown":"I think that DELETE annotation could be the retrofit one, for Room the right annotation is Delete (in lowercase)","body":"I think that DELETE annotation could be the retrofit one, for Room the right annotation is Delete (in lowercase)"}],"answers":[{"tags":[],"owner":{"account_id":23358250,"reputation":774,"user_id":17430910,"display_name":"Vaishnav Kanhirathingal"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1644634081,"creation_date":1644634081,"answer_id":71088583,"question_id":71075233,"body_markdown":"@Jes&#250;sBarrera from the comments is correct. check your imports. the annotation should be like this\r\n\r\n    @Delete\r\nandroid studio will probably import this\r\n\r\n    import androidx.room.*\r\nif not already present","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<p>@JesÃºsBarrera from the comments is correct. check your imports. the annotation should be like this</p>\n<pre><code>@Delete\n</code></pre>\n<p>android studio will probably import this</p>\n<pre><code>import androidx.room.*\n</code></pre>\n<p>if not already present</p>\n"},{"tags":[],"owner":{"account_id":14172306,"reputation":1738,"user_id":10238560,"display_name":"Tarif Chakder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644646386,"creation_date":1644646386,"answer_id":71089430,"question_id":71075233,"body_markdown":"You entered wrong annotation\r\n\r\nreplace \r\n\r\n    @DELETE\r\n\r\nto\r\n\r\n    @Delete","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<p>You entered wrong annotation</p>\n<p>replace</p>\n<pre><code>@DELETE\n</code></pre>\n<p>to</p>\n<pre><code>@Delete\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15006936,"reputation":2141,"user_id":10832700,"display_name":"ahmnouira"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691231402,"creation_date":1691231402,"answer_id":76841202,"question_id":71075233,"body_markdown":"I just forget to annotate the method with @Insert.\r\n\r\n```kotlin\r\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\r\n```\r\n\r\nJust adding @Insert fixed this.\r\n\r\n```kotlin\r\n@Insert\r\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\r\n```\r\n","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<p>I just forget to annotate the method with @Insert.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>fun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\n</code></pre>\n<p>Just adding @Insert fixed this.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>@Insert\nfun insertAll(postDbModels: Array&lt;PostDbModel&gt;)\n</code></pre>\n"}],"owner":{"account_id":24222233,"reputation":11,"user_id":18177252,"display_name":"Atharv Vishwas Gupta"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1633,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":3,"score":1,"last_activity_date":1691231402,"creation_date":1644552591,"question_id":71075233,"body_markdown":"    @Dao\r\n    interface ArticleDAO {\r\n\r\n        @Insert(onConflict = OnConflictStrategy.REPLACE)\r\n        suspend fun upsert(article: Article) : Long\r\n\r\n        @Query(&quot;SELECT * FROM articles&quot;)\r\n        fun getAllArticles(): LiveData&lt;List&lt;Article&gt;&gt;\r\n\r\n        @DELETE\r\n        suspend fun deleteArticles(article: Article)\r\n    }\r\n\r\nHi! On running this code, I get the following error: \r\nAn abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery\r\nPlease help me with this","title":"An abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery","body":"<pre><code>@Dao\ninterface ArticleDAO {\n\n    @Insert(onConflict = OnConflictStrategy.REPLACE)\n    suspend fun upsert(article: Article) : Long\n\n    @Query(&quot;SELECT * FROM articles&quot;)\n    fun getAllArticles(): LiveData&lt;List&lt;Article&gt;&gt;\n\n    @DELETE\n    suspend fun deleteArticles(article: Article)\n}\n</code></pre>\n<p>Hi! On running this code, I get the following error:\nAn abstract DAO method must be annotated with one and only one of the following annotations: Insert,Delete,Query,Update,RawQuery\nPlease help me with this</p>\n"},{"tags":["java","frame-rate"],"owner":{"account_id":29027436,"reputation":1,"user_id":22235262,"display_name":"Th&#224;nh Huá»³nh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":38,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1689506231,"answer_count":0,"score":-3,"last_activity_date":1691230569,"creation_date":1689506151,"question_id":76697961,"body_markdown":"I&#39;m looking to make an app and I need to get the FPS, but I don&#39;t know how. Can anyone help me?","title":"How to get FPS with Java(Android)","body":"<p>I'm looking to make an app and I need to get the FPS, but I don't know how. Can anyone help me?</p>\n"},{"tags":["java","android"],"owner":{"account_id":23551545,"reputation":5,"user_id":17594170,"display_name":"Zahid Yameen"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691229653,"creation_date":1691229653,"question_id":76841099,"body_markdown":"I am working on audio video calling application using\r\nweb-rtc  dependency \r\n`implementation &#39;com.dafruits:webrtc:113.0.0&#39;`\r\non these line\r\n\r\n```\r\npublic void addLocalStream(MediaStream stream) {\r\n//pc is for peerconnection\r\nif (pc == null) return;\r\nLog.d(&quot;dds_test&quot;, &quot;addLocalStream&quot;);\r\n\r\n          pc.addStream(stream);\r\n    }\r\n\r\n```\r\nI am getting this error\r\nE/rtc: #\r\n\\# Fatal error in: ../../../home/rno/webrtc/src/pc/peer_connection.cc, line 827\r\n\\# last system error: 0\r\n\\# Check failed: !IsUnifiedPlan()\r\n\\# AddStream is not available with Unified Plan SdpSemantics. Please use AddTrack instead.\r\n\r\nI  searched  a lot but could not find any proper solution please help me to solve this problem.","title":"Webrtc android native error #AddStream is not available with Unified Plan SdpSemantics. Please use AddTrack instead","body":"<p>I am working on audio video calling application using\nweb-rtc  dependency\n<code>implementation 'com.dafruits:webrtc:113.0.0'</code>\non these line</p>\n<pre><code>public void addLocalStream(MediaStream stream) {\n//pc is for peerconnection\nif (pc == null) return;\nLog.d(&quot;dds_test&quot;, &quot;addLocalStream&quot;);\n\n          pc.addStream(stream);\n    }\n\n</code></pre>\n<p>I am getting this error\nE/rtc: #\n# Fatal error in: ../../../home/rno/webrtc/src/pc/peer_connection.cc, line 827\n# last system error: 0\n# Check failed: !IsUnifiedPlan()\n# AddStream is not available with Unified Plan SdpSemantics. Please use AddTrack instead.</p>\n<p>I  searched  a lot but could not find any proper solution please help me to solve this problem.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"account_id":50585,"reputation":39940,"user_id":150978,"accept_rate":78,"display_name":"Robert"},"score":0,"creation_date":1691273141,"post_id":76839851,"comment_id":135470270,"body_markdown":"From what I know Google restricts usage of the accessibility API. Only apps that use the accessibility API in the way Google had designed it are now allowed: help disabled people. In my understanding automation of button clicks will be rejected, unless you can explain how that helps disabled people.","body":"From what I know Google restricts usage of the accessibility API. Only apps that use the accessibility API in the way Google had designed it are now allowed: help disabled people. In my understanding automation of button clicks will be rejected, unless you can explain how that helps disabled people."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1691307986,"post_id":76839851,"comment_id":135472131,"body_markdown":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer.","body":"Please edit the question to limit it to a specific problem with enough detail to identify an adequate answer."}],"owner":{"account_id":29163421,"reputation":1,"user_id":22341604,"display_name":"Arkaradet postsalee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":15,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691229162,"creation_date":1691200390,"question_id":76839851,"body_markdown":"![enter image description here](https://i.stack.imgur.com/6VYu3.png)\r\n\r\nHow to modify the above request for upload application in play store which uses accessibility APIs?\r\nThis application is auto click on screen.\r\n","title":"How to Accessibility api upload to play store","body":"<p><img src=\"https://i.stack.imgur.com/6VYu3.png\" alt=\"enter image description here\" /></p>\n<p>How to modify the above request for upload application in play store which uses accessibility APIs?\nThis application is auto click on screen.</p>\n"},{"tags":["java","ssl","devops","jks","kubernetes-secrets"],"comments":[{"owner":{"account_id":85671,"reputation":40858,"user_id":238704,"display_name":"President James K. Polk"},"score":2,"creation_date":1691155544,"post_id":76834659,"comment_id":135457442,"body_markdown":"client *certificates* are not secrets. client private keys are.","body":"client <i>certificates</i> are not secrets. client private keys are."},{"owner":{"account_id":7242187,"reputation":47,"user_id":5525420,"display_name":"Itay Habani"},"score":0,"creation_date":1691166255,"post_id":76834659,"comment_id":135459918,"body_markdown":"@PresidentJamesK.Polk you&#39;re right, i misphrased that. the question still remains though :D","body":"@PresidentJamesK.Polk you&#39;re right, i misphrased that. the question still remains though :D"}],"owner":{"account_id":7242187,"reputation":47,"user_id":5525420,"display_name":"Itay Habani"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":83,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691228686,"creation_date":1691141570,"question_id":76834659,"body_markdown":"I have a few java applications that use JKS files for storing client private keys for things like DB certificates. Once these certificates get renewed I&#39;d like an easy way to edit jks file, and replace the old key.\r\n\r\nThe problem is storing these JKS files. Obviously they shouldn&#39;t be in the repository, so i want to use some sort of secret management tool like Hashicorp Vault but it doesn&#39;t support JKS files directly so it seems everyone encodes them to base64 and store them that way. Using this method, you have to read the secret, decode it, and then use some tool like keytool or openssl to edit the certificates inside, and I would like a better solution that would be easier for the developers to maintain.\r\n\r\nKeep in mind that in my organization we&#39;re in a private network with our own cloud provider so we dont have access to any Amazon or Google cloud services.\r\n\r\nI looked for some other tools to provide a UI to edit these JKS files and the only decent thing I found was Keystore Explorer which is a desktop app and I&#39;d like to deploy a web app so everyone would be able to easily use it, like Vault is. I also looked for any open issues or requests for this kind of feature but no one mentions it since it seems they&#39;re all ok with encoding the files to base64 and thats it.\r\n\r\nAm I overthinking this? Seems like it would be pretty easy to develop a feature for Vault to edit JKS files inside the UI. I might just do it myself and try to contribute that code or just create another app to specifically do this. Should i move on from using JKS files and just store the certificates as PEM files and maybe dynamically create a JKS file in my Kubernetes cluster on an initContainer script or something?","title":"How do I store and manage jks files in a way that would be easy to edit them","body":"<p>I have a few java applications that use JKS files for storing client private keys for things like DB certificates. Once these certificates get renewed I'd like an easy way to edit jks file, and replace the old key.</p>\n<p>The problem is storing these JKS files. Obviously they shouldn't be in the repository, so i want to use some sort of secret management tool like Hashicorp Vault but it doesn't support JKS files directly so it seems everyone encodes them to base64 and store them that way. Using this method, you have to read the secret, decode it, and then use some tool like keytool or openssl to edit the certificates inside, and I would like a better solution that would be easier for the developers to maintain.</p>\n<p>Keep in mind that in my organization we're in a private network with our own cloud provider so we dont have access to any Amazon or Google cloud services.</p>\n<p>I looked for some other tools to provide a UI to edit these JKS files and the only decent thing I found was Keystore Explorer which is a desktop app and I'd like to deploy a web app so everyone would be able to easily use it, like Vault is. I also looked for any open issues or requests for this kind of feature but no one mentions it since it seems they're all ok with encoding the files to base64 and thats it.</p>\n<p>Am I overthinking this? Seems like it would be pretty easy to develop a feature for Vault to edit JKS files inside the UI. I might just do it myself and try to contribute that code or just create another app to specifically do this. Should i move on from using JKS files and just store the certificates as PEM files and maybe dynamically create a JKS file in my Kubernetes cluster on an initContainer script or something?</p>\n"},{"tags":["java","date","simpledateformat","date-format","date-parsing"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691227648,"post_id":76534703,"comment_id":135465833,"body_markdown":"First, I strongly recommend that you avoid the `java.util.Date` and `SimpleDateFormat` classes. They were always very troublesome and are long outdated. Use `LocalDate` and `DateTimeFormatter` from [java.time, the modern Java date and time API](https://docs.oracle.com/javase/tutorial/datetime/index.html). Second, I recommend you keep data model and presentation separate. Which day it is belongs in the model and is nicely represented by a `LocalDate`.  For presentation convert the `LocalDate` back to a string to the userâs liking, for example `Apr 1, 2019`.","body":"First, I strongly recommend that you avoid the <code>java.util.Date</code> and <code>SimpleDateFormat</code> classes. They were always very troublesome and are long outdated. Use <code>LocalDate</code> and <code>DateTimeFormatter</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API</a>. Second, I recommend you keep data model and presentation separate. Which day it is belongs in the model and is nicely represented by a <code>LocalDate</code>.  For presentation convert the <code>LocalDate</code> back to a string to the userâs liking, for example <code>Apr 1, 2019</code>."}],"answers":[{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691191036,"creation_date":1691184760,"answer_id":76839205,"question_id":76534703,"body_markdown":"java.time\r\n--\r\n\r\nThe `java.util` Date-Time API and their formatting API, `SimpleDateFormat` are outdated and error-prone. It is recommended to stop using them completely and switch to the [modern Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html).\r\n\r\nAlso, quoted below is a notice from the [home page of **Joda-Time**](https://www.joda.org/joda-time/):\r\n\r\n&gt; Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.\r\n\r\nYour problem\r\n--\r\nYou are trying to parse the date string into a `java.util.Date` object and print it. A `java.util.Date` object represents only the number of milliseconds since January 1, 1970, 00:00:00 GMT. When you print its object, the string returned by [Date#toString](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toString--), which applies your system&#39;s timezone, is printed. Note that a date-time object holds only date-time information, not a format. A format is represented using a string which you obtain by formatting the date-time object using a date-time formatting class with the desired pattern.\r\n\r\n**Solution using `java.time`, the modern Date-Time API:**\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            List&lt;String&gt; list = List.of(&quot;Apr 1, 2019&quot;, &quot;Aug 1, 2020&quot;, &quot;Feb 20, 2018&quot;);\r\n            DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MMM d, uuuu&quot;, Locale.ENGLISH);\r\n            list.forEach(s -&gt; {\r\n                LocalDate date = LocalDate.parse(s, dtf);\r\n                System.out.printf(&quot;Default format: %s, Custom format: %s%n&quot;, date, date.format(dtf));\r\n            });\r\n        }\r\n    }\r\n    \r\n**Output:**\r\n\r\n    Default format: 2019-04-01, Custom format: Apr 1, 2019\r\n    Default format: 2020-08-01, Custom format: Aug 1, 2020\r\n    Default format: 2018-02-20, Custom format: Feb 20, 2018\r\n\r\n[ONLINE DEMO](https://ideone.com/kvcXye)\r\n\r\n**Note:** Here, you can use `y` instead of `u` but [I prefer `u` to `y`](https://stackoverflow.com/a/65928023/10819573). Also, [never use `DateTimeFormatter` for custom formats without a Locale](https://stackoverflow.com/a/65544056/10819573).\r\n\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n\r\n","title":"SimpleDateFormat(&quot;MMM d, yyyy&quot;) returns Weekday Month day 00:00:00 EDT year","body":"<h2>java.time</h2>\n<p>The <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a>.</p>\n<p>Also, quoted below is a notice from the <a href=\"https://www.joda.org/joda-time/\" rel=\"nofollow noreferrer\">home page of <strong>Joda-Time</strong></a>:</p>\n<blockquote>\n<p>Note that from Java SE 8 onwards, users are asked to migrate to java.time (JSR-310) - a core part of the JDK which replaces this project.</p>\n</blockquote>\n<h2>Your problem</h2>\n<p>You are trying to parse the date string into a <code>java.util.Date</code> object and print it. A <code>java.util.Date</code> object represents only the number of milliseconds since January 1, 1970, 00:00:00 GMT. When you print its object, the string returned by <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toString--\" rel=\"nofollow noreferrer\">Date#toString</a>, which applies your system's timezone, is printed. Note that a date-time object holds only date-time information, not a format. A format is represented using a string which you obtain by formatting the date-time object using a date-time formatting class with the desired pattern.</p>\n<p><strong>Solution using <code>java.time</code>, the modern Date-Time API:</strong></p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        List&lt;String&gt; list = List.of(&quot;Apr 1, 2019&quot;, &quot;Aug 1, 2020&quot;, &quot;Feb 20, 2018&quot;);\n        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;MMM d, uuuu&quot;, Locale.ENGLISH);\n        list.forEach(s -&gt; {\n            LocalDate date = LocalDate.parse(s, dtf);\n            System.out.printf(&quot;Default format: %s, Custom format: %s%n&quot;, date, date.format(dtf));\n        });\n    }\n}\n</code></pre>\n<p><strong>Output:</strong></p>\n<pre><code>Default format: 2019-04-01, Custom format: Apr 1, 2019\nDefault format: 2020-08-01, Custom format: Aug 1, 2020\nDefault format: 2018-02-20, Custom format: Feb 20, 2018\n</code></pre>\n<p><a href=\"https://ideone.com/kvcXye\" rel=\"nofollow noreferrer\">ONLINE DEMO</a></p>\n<p><strong>Note:</strong> Here, you can use <code>y</code> instead of <code>u</code> but <a href=\"https://stackoverflow.com/a/65928023/10819573\">I prefer <code>u</code> to <code>y</code></a>. Also, <a href=\"https://stackoverflow.com/a/65544056/10819573\">never use <code>DateTimeFormatter</code> for custom formats without a Locale</a>.</p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"}],"owner":{"account_id":17311738,"reputation":1,"user_id":12539147,"display_name":"Gunel Hasan"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691228324,"answer_count":1,"score":0,"last_activity_date":1691228488,"creation_date":1687458064,"question_id":76534703,"body_markdown":"I have a String List [Apr 1, 2019, Aug 1, 2020, Feb 20, 2018] which i need to convert to Date format in the same pattern. When Im doing it with SimpleDateFormat(&quot;MMM d, yyyy&quot;) pattern Im getting Thu Aug 01 00:00:00 EDT 2019 format. Tried with Joda DateTimeFormatter and same result.\r\nCan anyone please help to resolve?","title":"SimpleDateFormat(&quot;MMM d, yyyy&quot;) returns Weekday Month day 00:00:00 EDT year","body":"<p>I have a String List [Apr 1, 2019, Aug 1, 2020, Feb 20, 2018] which i need to convert to Date format in the same pattern. When Im doing it with SimpleDateFormat(&quot;MMM d, yyyy&quot;) pattern Im getting Thu Aug 01 00:00:00 EDT 2019 format. Tried with Joda DateTimeFormatter and same result.\nCan anyone please help to resolve?</p>\n"},{"tags":["java","maven-2","encoding","utf-8"],"comments":[{"owner":{"account_id":291800,"reputation":15905,"user_id":594183,"display_name":"esaj"},"score":0,"creation_date":1297704243,"post_id":4995057,"comment_id":5581642,"body_markdown":"Compiles just fine with my Eclipse, but that &#39;&#172;&#39; in the middle looks a bit weird, are you sure the problem is with &#39;&quot;&#39; and not &#39;&#172;&#39;? Have you tried saving the file with some other editor and making sure the encoding is UTF-8?","body":"Compiles just fine with my Eclipse, but that &#39;&#172;&#39; in the middle looks a bit weird, are you sure the problem is with &#39;&quot;&#39; and not &#39;&#172;&#39;? Have you tried saving the file with some other editor and making sure the encoding is UTF-8?"},{"owner":{"account_id":420818,"reputation":9699,"user_id":798719,"accept_rate":57,"display_name":"user798719"},"score":0,"creation_date":1364269042,"post_id":4995057,"comment_id":22172008,"body_markdown":"what I did was to open the file in question (hopefully you can deduce which file it&#39;s complaining about).  Then I just saved the file again (after writing a few random characters to register a change, then erased them).  Then after re-saving, I could compile.  I suppose re-saving saves the file in your OS&#39;s native way.","body":"what I did was to open the file in question (hopefully you can deduce which file it&#39;s complaining about).  Then I just saved the file again (after writing a few random characters to register a change, then erased them).  Then after re-saving, I could compile.  I suppose re-saving saves the file in your OS&#39;s native way."}],"answers":[{"comments":[{"owner":{"account_id":20338,"reputation":63801,"user_id":48503,"accept_rate":100,"display_name":"Luke Woodward"},"score":1,"creation_date":1297704055,"post_id":4995100,"comment_id":5581588,"body_markdown":"You&#39;ve replaced the `&#172;` with a `&#188;`.","body":"You&#39;ve replaced the <code>&#172;</code> with a <code>&#188;</code>."},{"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"score":0,"creation_date":1297704513,"post_id":4995100,"comment_id":5581714,"body_markdown":"@Luke mhh that&#39;s odd, that&#39;s what the copy/paste does for me .. I&#39;ve added screenshot of my gvim window. Anyway, I&#39;m not really answering the question, so I&#39;ll make this CW.","body":"@Luke mhh that&#39;s odd, that&#39;s what the copy/paste does for me .. I&#39;ve added screenshot of my gvim window. Anyway, I&#39;m not really answering the question, so I&#39;ll make this CW."}],"tags":[],"owner":{"account_id":10836,"reputation":196641,"user_id":20654,"accept_rate":80,"display_name":"OscarRyz"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1297704467,"creation_date":1297703948,"answer_id":4995100,"question_id":4995057,"body_markdown":"The following compiles for me:\r\n\r\n    class E{\r\n       String s = &quot;^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!\\&quot;&#39;%*=&#188;.,-])(?=[^\\\\s]+$).{8,24}$&quot;;\r\n    }\r\nSee: \r\n\r\n![enter image description here][1]\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/wBDhW.png","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>The following compiles for me:</p>\n\n<pre><code>class E{\n   String s = \"^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!\\\"'%*=Â¼.,-])(?=[^\\\\s]+$).{8,24}$\";\n}\n</code></pre>\n\n<p>See: </p>\n\n<p><img src=\"https://i.stack.imgur.com/wBDhW.png\" alt=\"enter image description here\"></p>\n"},{"tags":[],"owner":{"account_id":17835,"reputation":303905,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1297704088,"creation_date":1297704088,"answer_id":4995119,"question_id":4995057,"body_markdown":"The Java compiler assumes that your input is UTF-8 encoded, either because you specified it to be or because it&#39;s your platform default encoding.\r\n\r\nHowever, the data in your `.java` files is not actually encoded in UTF-8. The problem is probably the `&#172;` character. Make sure your editor (or IDE) of choice actually safes its file in UTF-8 encoding.","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>The Java compiler assumes that your input is UTF-8 encoded, either because you specified it to be or because it's your platform default encoding.</p>\n\n<p>However, the data in your <code>.java</code> files is not actually encoded in UTF-8. The problem is probably the <code>Â¬</code> character. Make sure your editor (or IDE) of choice actually safes its file in UTF-8 encoding.</p>\n"},{"tags":[],"owner":{"account_id":2496,"reputation":266244,"user_id":3474,"accept_rate":83,"display_name":"erickson"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1297704159,"creation_date":1297704159,"answer_id":4995133,"question_id":4995057,"body_markdown":"The compiler is using the UTF-8 character encoding to read your source file. But the file must have been written by an editor using a different encoding. Open your file in an editor set to the UTF-8 encoding, fix the quote mark, and save it again.\r\n\r\nAlternatively, you can find the Unicode point for the character and use a Unicode escape in the source code. For example, the character `A` can be replaced with the Unicode escape `\\u0041`.\r\n\r\nBy the way, you don&#39;t need to use the begin- and end-line anchors `^` and `$` when using the `matches()` method. The entire sequence must be matched by the regular expression when using the `matches()` method. The anchors are only useful with the `find()` method.","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>The compiler is using the UTF-8 character encoding to read your source file. But the file must have been written by an editor using a different encoding. Open your file in an editor set to the UTF-8 encoding, fix the quote mark, and save it again.</p>\n\n<p>Alternatively, you can find the Unicode point for the character and use a Unicode escape in the source code. For example, the character <code>A</code> can be replaced with the Unicode escape <code>\\u0041</code>.</p>\n\n<p>By the way, you don't need to use the begin- and end-line anchors <code>^</code> and <code>$</code> when using the <code>matches()</code> method. The entire sequence must be matched by the regular expression when using the <code>matches()</code> method. The anchors are only useful with the <code>find()</code> method.</p>\n"},{"comments":[{"owner":{"account_id":99858,"reputation":903,"user_id":269514,"display_name":"Gilberto"},"score":2,"creation_date":1392384676,"post_id":4996583,"comment_id":32952177,"body_markdown":"Thanks Michael! I had similiar problema in a java project checked out from an old cvs server. So, to fix it I did - [Determine and change file character encoding](http://mindspill.net/computing/linux-notes/determine-and-change-file-character-encoding/):                   find -name &#39;*.java&#39; -exec recode Latin-1..UTF-8 {} \\;","body":"Thanks Michael! I had similiar problema in a java project checked out from an old cvs server. So, to fix it I did - <a href=\"http://mindspill.net/computing/linux-notes/determine-and-change-file-character-encoding/\" rel=\"nofollow noreferrer\">Determine and change file character encoding</a>:                   find -name &#39;*.java&#39; -exec recode Latin-1..UTF-8 {} \\;"},{"owner":{"account_id":103429,"reputation":6646,"user_id":277023,"accept_rate":56,"display_name":"kellyfj"},"score":7,"creation_date":1418158406,"post_id":4996583,"comment_id":43225146,"body_markdown":"The answer would be helpful with an example of HOW to save the source file with UTF-8 encoding. Thanks!","body":"The answer would be helpful with an example of HOW to save the source file with UTF-8 encoding. Thanks!"},{"owner":{"account_id":117745,"reputation":5429,"user_id":308219,"display_name":"Michael Konietzka"},"score":1,"creation_date":1418213326,"post_id":4996583,"comment_id":43246286,"body_markdown":"@kellyfj This depends of course on the editor the user uses. I guess every editor has some menu for this kind of option.","body":"@kellyfj This depends of course on the editor the user uses. I guess every editor has some menu for this kind of option."},{"owner":{"account_id":1577535,"reputation":1048,"user_id":1463629,"accept_rate":50,"display_name":"Kanad"},"score":0,"creation_date":1453471611,"post_id":4996583,"comment_id":57628514,"body_markdown":"Helped me!! Thanks. I had &quot;â&quot; character in one of my comment in code which was causing problem","body":"Helped me!! Thanks. I had &quot;â&quot; character in one of my comment in code which was causing problem"}],"tags":[],"owner":{"account_id":117745,"reputation":5429,"user_id":308219,"display_name":"Michael Konietzka"},"comment_count":4,"down_vote_count":1,"up_vote_count":50,"is_accepted":false,"score":49,"last_activity_date":1297713127,"creation_date":1297713127,"answer_id":4996583,"question_id":4995057,"body_markdown":"You have encoding problem with your sourcecode file. It is maybe ISO-8859-1 encoded, but the compiler was set to use UTF-8. This will results in errors when using characters, which will not have the same bytes representation in UTF-8 and ISO-8859-1. This will happen to all characters which are not part of ASCII, for example `&#172;` [NOT SIGN][1].\r\n\r\nYou can simulate this with the following program. It just uses your line of source code and generates a ISO-8859-1 byte array and decode this &quot;wrong&quot; with UTF-8 encoding. You can see at which position the line gets corrupted. I added 2 spaces at your source code to fit position 74 to fit this to `&#172;` [NOT SIGN][1], which is the only character, which will generate different bytes in ISO-8859-1 encoding and UTF-8 encoding. I guess this will match indentation with the real source file.\r\n\r\n\r\n     String reg = &quot;      String reg = \\&quot;^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!\\&quot;&#39;%*=&#172;.,-])(?=[^\\\\s]+$).{8,24}$\\&quot;;&quot;;\r\n     String corrupt=new String(reg.getBytes(&quot;ISO-8859-1&quot;),&quot;UTF-8&quot;);\r\n     System.out.println(corrupt+&quot;: &quot;+corrupt.charAt(74));\r\n     System.out.println(reg+&quot;: &quot;+reg.charAt(74));     \r\n\r\n\r\nwhich results in the following output (messed up because of markup):\r\n\r\n&gt;String reg = &quot;^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!&quot;&#39;%*=ï¿½.,-])(?=[^\\s]+$).{8,24}$&quot;;: ï¿½\r\n\r\n \r\n&gt;String reg = &quot;^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!&quot;&#39;%*=&#172;.,-])(?=[^\\s]+$).{8,24}$&quot;;: &#172;\r\n\r\nSee &quot;live&quot; at https://ideone.com/ShZnB\r\n\r\n\r\nTo fix this, save the source files with UTF-8 encoding.\r\n\r\n\r\n  [1]: http://www.fileformat.info/info/unicode/char/00ac/index.htm","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>You have encoding problem with your sourcecode file. It is maybe ISO-8859-1 encoded, but the compiler was set to use UTF-8. This will results in errors when using characters, which will not have the same bytes representation in UTF-8 and ISO-8859-1. This will happen to all characters which are not part of ASCII, for example <code>Â¬</code> <a href=\"http://www.fileformat.info/info/unicode/char/00ac/index.htm\">NOT SIGN</a>.</p>\n\n<p>You can simulate this with the following program. It just uses your line of source code and generates a ISO-8859-1 byte array and decode this \"wrong\" with UTF-8 encoding. You can see at which position the line gets corrupted. I added 2 spaces at your source code to fit position 74 to fit this to <code>Â¬</code> <a href=\"http://www.fileformat.info/info/unicode/char/00ac/index.htm\">NOT SIGN</a>, which is the only character, which will generate different bytes in ISO-8859-1 encoding and UTF-8 encoding. I guess this will match indentation with the real source file.</p>\n\n<pre><code> String reg = \"      String reg = \\\"^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!\\\"'%*=Â¬.,-])(?=[^\\\\s]+$).{8,24}$\\\";\";\n String corrupt=new String(reg.getBytes(\"ISO-8859-1\"),\"UTF-8\");\n System.out.println(corrupt+\": \"+corrupt.charAt(74));\n System.out.println(reg+\": \"+reg.charAt(74));     \n</code></pre>\n\n<p>which results in the following output (messed up because of markup):</p>\n\n<blockquote>\n  <p>String reg = \"^(?=.<em>[0-9])(?=.</em>[a-z])(?=.<em>[A-Z])(?=.</em>[~#;:?/@&amp;!\"'%*=ï¿½.,-])(?=[^\\s]+$).{8,24}$\";: ï¿½</p>\n  \n  <p>String reg = \"^(?=.<em>[0-9])(?=.</em>[a-z])(?=.<em>[A-Z])(?=.</em>[~#;:?/@&amp;!\"'%*=Â¬.,-])(?=[^\\s]+$).{8,24}$\";: Â¬</p>\n</blockquote>\n\n<p>See \"live\" at <a href=\"https://ideone.com/ShZnB\">https://ideone.com/ShZnB</a></p>\n\n<p>To fix this, save the source files with UTF-8 encoding.</p>\n"},{"tags":[],"owner":{"account_id":2790100,"reputation":11,"user_id":2400496,"display_name":"Ganesh R"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1369026059,"creation_date":1369026059,"answer_id":16642898,"question_id":4995057,"body_markdown":"&quot;error: unmappable character for encoding UTF-8&quot; means, java has found a character which is not representing in UTF-8. Hence open the file in an editor and set the character encoding to UTF-8. You should be able to find a  character which is not represented in UTF-8.Take off this character and recompile.","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>\"error: unmappable character for encoding UTF-8\" means, java has found a character which is not representing in UTF-8. Hence open the file in an editor and set the character encoding to UTF-8. You should be able to find a  character which is not represented in UTF-8.Take off this character and recompile.</p>\n"},{"tags":[],"owner":{"account_id":939294,"reputation":884,"user_id":967671,"display_name":"Steve Gelman"},"comment_count":0,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1406643734,"creation_date":1406643734,"answer_id":25017732,"question_id":4995057,"body_markdown":"I&#39;m in the process of setting up a CI build server on a Linux box for a legacy system started in 2000.  There is a section that generates a PDF that contains non-UTF8 characters.  We are in the final steps of a release, so I cannot replace the characters giving me grief, yet for Dilbertesque reasons, I cannot wait a week to solve this issue after the release.  Fortunately, the &quot;javac&quot; command in Ant has an &quot;encoding&quot; parameter.\r\n\r\n     &lt;javac destdir=&quot;${classes.dir}&quot; classpathref=&quot;production-classpath&quot; debug=&quot;on&quot;\r\n         includeantruntime=&quot;false&quot; source=&quot;${java.level}&quot; target=&quot;${java.level}&quot;\r\n\r\n         encoding=&quot;iso-8859-1&quot;&gt;\r\n\r\n         &lt;src path=&quot;${production.dir}&quot; /&gt;\r\n     &lt;/javac&gt;\r\n","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>I'm in the process of setting up a CI build server on a Linux box for a legacy system started in 2000.  There is a section that generates a PDF that contains non-UTF8 characters.  We are in the final steps of a release, so I cannot replace the characters giving me grief, yet for Dilbertesque reasons, I cannot wait a week to solve this issue after the release.  Fortunately, the \"javac\" command in Ant has an \"encoding\" parameter.</p>\n\n<pre><code> &lt;javac destdir=\"${classes.dir}\" classpathref=\"production-classpath\" debug=\"on\"\n     includeantruntime=\"false\" source=\"${java.level}\" target=\"${java.level}\"\n\n     encoding=\"iso-8859-1\"&gt;\n\n     &lt;src path=\"${production.dir}\" /&gt;\n &lt;/javac&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5621562,"reputation":51,"user_id":4451224,"display_name":"john"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1568634108,"creation_date":1421188836,"answer_id":27932820,"question_id":4995057,"body_markdown":"In eclipse try to go to file properties (&lt;kbd&gt;Alt&lt;/kbd&gt;+&lt;kbd&gt;Enter&lt;/kbd&gt;) and change the `Resource` &amp;rarr; &#39;`Text File encoding`&#39; &amp;rarr; `Other` to `UTF-8`. Reopen the file and check there will be junk character somewhere in the string/file. Remove it. Save the file.\r\n\r\nChange the encoding Resource &amp;rarr; &#39;`Text File encoding`&#39; back to Default.\r\n\r\nCompile and deploy the code.","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>In eclipse try to go to file properties (<kbd>Alt</kbd>+<kbd>Enter</kbd>) and change the <code>Resource</code> &rarr; '<code>Text File encoding</code>' &rarr; <code>Other</code> to <code>UTF-8</code>. Reopen the file and check there will be junk character somewhere in the string/file. Remove it. Save the file.</p>\n\n<p>Change the encoding Resource &rarr; '<code>Text File encoding</code>' back to Default.</p>\n\n<p>Compile and deploy the code.</p>\n"},{"tags":[],"owner":{"account_id":1005397,"reputation":9269,"user_id":1019307,"accept_rate":50,"display_name":"HankCa"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1434083052,"creation_date":1434083052,"answer_id":30795291,"question_id":4995057,"body_markdown":"Thanks Michael Konietzka (https://stackoverflow.com/a/4996583/1019307) for your answer.\r\n\r\nI did this in Eclipse / STS:\r\n\r\n    Preferences &gt; General &gt; Content Types &gt; Selected &quot;Text&quot; \r\n        (which contains all types such as CSS, Java Source Files, ...)\r\n    Added &quot;UTF-8&quot; to the default encoding box down the bottom and hit &#39;Add&#39;\r\n\r\nBingo, error gone!","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>Thanks Michael Konietzka (<a href=\"https://stackoverflow.com/a/4996583/1019307\">https://stackoverflow.com/a/4996583/1019307</a>) for your answer.</p>\n\n<p>I did this in Eclipse / STS:</p>\n\n<pre><code>Preferences &gt; General &gt; Content Types &gt; Selected \"Text\" \n    (which contains all types such as CSS, Java Source Files, ...)\nAdded \"UTF-8\" to the default encoding box down the bottom and hit 'Add'\n</code></pre>\n\n<p>Bingo, error gone!</p>\n"},{"comments":[{"owner":{"account_id":5752727,"reputation":1642,"user_id":4541832,"display_name":"Maciej Lach"},"score":2,"creation_date":1447745874,"post_id":33751311,"comment_id":55270591,"body_markdown":"Please avoid link only answers. Elaborate on the solution in the post.","body":"Please avoid link only answers. Elaborate on the solution in the post."},{"owner":{"account_id":9847991,"reputation":56906,"user_id":7294900,"accept_rate":94,"display_name":"Ori Marko"},"score":1,"creation_date":1583045348,"post_id":33751311,"comment_id":106980521,"body_markdown":"Link is broken, can you add details to answer?","body":"Link is broken, can you add details to answer?"}],"tags":[],"owner":{"account_id":7311958,"reputation":11,"user_id":5570799,"display_name":"user5570799"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1447745161,"creation_date":1447745161,"answer_id":33751311,"question_id":4995057,"body_markdown":"I observed this issue while using Eclipse. I needed to add encoding in my pom.xml file and it resolved. http://ctrlaltsolve.blogspot.in/2015/11/encoding-properties-in-maven.html","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>I observed this issue while using Eclipse. I needed to add encoding in my pom.xml file and it resolved. <a href=\"http://ctrlaltsolve.blogspot.in/2015/11/encoding-properties-in-maven.html\" rel=\"nofollow\">http://ctrlaltsolve.blogspot.in/2015/11/encoding-properties-in-maven.html</a></p>\n"},{"tags":[],"owner":{"account_id":23695,"reputation":4225,"user_id":59561,"accept_rate":69,"display_name":"cwash"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1457468725,"creation_date":1457468725,"answer_id":35877336,"question_id":4995057,"body_markdown":"For IntelliJ users, this is pretty easy once you find out what the original encoding was.  You can select the encoding from the bottom right corner of your Window, you will be prompted with a dialog box saying:\r\n\r\n&gt; The encoding you&#39;ve chosen (&#39;[encoding type]&#39;) may change the contents\r\n&gt; of &#39;[Your file]&#39;. Do you want to reload the file from disk or convert\r\n&gt; the text and save in the new encoding?\r\n\r\nSo if you happen to have a few characters saved in some odd encoding, what you should do is first select &#39;Reload&#39; to load the file all in the encoding of the bad characters.  For me this turned the ? characters into their proper value.\r\n\r\nIntelliJ can tell if you most likely did not pick the right encoding and will warn you.  Revert back and try again.\r\n\r\nOnce you can see the bad characters go away, change the encoding select box in the bottom right corner back to the format you originally intended (if you are Googling this error message, that will likely be UTF-8).  This time select the  &#39;Convert&#39; button on the dialog.\r\n\r\nFor me, I needed to reload as &#39;windows-1252&#39;, then convert back to &#39;UTF-8&#39;.  The offending characters were single quotes (â and â) likely pasted in from a Word doc (or e-mail) with the wrong encoding, and the above actions will convert them to UTF-8.\r\n","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>For IntelliJ users, this is pretty easy once you find out what the original encoding was.  You can select the encoding from the bottom right corner of your Window, you will be prompted with a dialog box saying:</p>\n\n<blockquote>\n  <p>The encoding you've chosen ('[encoding type]') may change the contents\n  of '[Your file]'. Do you want to reload the file from disk or convert\n  the text and save in the new encoding?</p>\n</blockquote>\n\n<p>So if you happen to have a few characters saved in some odd encoding, what you should do is first select 'Reload' to load the file all in the encoding of the bad characters.  For me this turned the ? characters into their proper value.</p>\n\n<p>IntelliJ can tell if you most likely did not pick the right encoding and will warn you.  Revert back and try again.</p>\n\n<p>Once you can see the bad characters go away, change the encoding select box in the bottom right corner back to the format you originally intended (if you are Googling this error message, that will likely be UTF-8).  This time select the  'Convert' button on the dialog.</p>\n\n<p>For me, I needed to reload as 'windows-1252', then convert back to 'UTF-8'.  The offending characters were single quotes (â and â) likely pasted in from a Word doc (or e-mail) with the wrong encoding, and the above actions will convert them to UTF-8.</p>\n"},{"tags":[],"owner":{"account_id":23598472,"reputation":9,"user_id":17635322,"display_name":"SonjaJan"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1653150031,"creation_date":1653052595,"answer_id":72319583,"question_id":4995057,"body_markdown":"I had the similar issue and I fix with the down corner of my IntelliJ.\r\n\r\nI changed it from `LF` to `CRLF`.\r\n\r\nHere is how it looks the down corner of the IntelliJ:\r\n\r\n![IntelliJ_image](https://i.stack.imgur.com/W2ucx.png)","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>I had the similar issue and I fix with the down corner of my IntelliJ.</p>\n<p>I changed it from <code>LF</code> to <code>CRLF</code>.</p>\n<p>Here is how it looks the down corner of the IntelliJ:</p>\n<p><img src=\"https://i.stack.imgur.com/W2ucx.png\" alt=\"IntelliJ_image\" /></p>\n"},{"tags":[],"owner":{"account_id":1608748,"reputation":1014,"user_id":1488274,"accept_rate":91,"display_name":"MJay"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691227439,"creation_date":1691227439,"answer_id":76840963,"question_id":4995057,"body_markdown":"Just search for `â` character and change it to `&quot;`.","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>Just search for <code>â</code> character and change it to <code>&quot;</code>.</p>\n"}],"owner":{"account_id":59477,"reputation":7989,"user_id":177971,"accept_rate":44,"display_name":"Ravi"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":274470,"favorite_count":0,"down_vote_count":0,"up_vote_count":79,"answer_count":12,"score":79,"last_activity_date":1691227439,"creation_date":1297703743,"question_id":4995057,"body_markdown":"I&#39;m getting a compile error at the following method.\r\n\r\n    public static boolean isValidPasswd(String passwd) {\r\n        String reg = &quot;^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!\\&quot;&#39;%*=&#172;.,-])(?=[^\\\\s]+$).{8,24}$&quot;;\r\n        return Pattern.matches(reg, passwd);\r\n    }\r\n\r\n&lt;pre&gt;\r\nat Utility.java:[76,74] unmappable character for \r\nenoding UTF-8. 74th character is&#39; &quot; &#39;\r\n&lt;/pre&gt;\r\n\r\nHow can I fix this? Thanks.\r\n","title":"&quot;Unmappable character for encoding UTF-8&quot; error","body":"<p>I'm getting a compile error at the following method.</p>\n\n<pre><code>public static boolean isValidPasswd(String passwd) {\n    String reg = \"^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[~#;:?/@&amp;!\\\"'%*=Â¬.,-])(?=[^\\\\s]+$).{8,24}$\";\n    return Pattern.matches(reg, passwd);\n}\n</code></pre>\n\n<pre>\nat Utility.java:[76,74] unmappable character for \nenoding UTF-8. 74th character is' \" '\n</pre>\n\n<p>How can I fix this? Thanks.</p>\n"},{"tags":["java","spring","resttemplate"],"comments":[{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1691226041,"post_id":76840755,"comment_id":135465676,"body_markdown":"Probably Google Forms are protected by some mechanism (Recaptcha or similar) to prevent form submission by a &quot;bot&quot; (and here your program acts as a bot).","body":"Probably Google Forms are protected by some mechanism (Recaptcha or similar) to prevent form submission by a &quot;bot&quot; (and here your program acts as a bot)."},{"owner":{"account_id":3391382,"reputation":3687,"user_id":2846138,"display_name":"cyberbrain"},"score":0,"creation_date":1691226997,"post_id":76840755,"comment_id":135465779,"body_markdown":"It looks like you want to send a WhatsApp message with the [VONAGE](https://vonage.com) API via some weird way (Google Form). If you want to do this, you should get a VONAGE account and use their API. But it&#39;s not free, Meta and VONAGE both want money for using WhatsApp (in a business environment, and they are focused on such customers)","body":"It looks like you want to send a WhatsApp message with the <a href=\"https://vonage.com\" rel=\"nofollow noreferrer\">VONAGE</a> API via some weird way (Google Form). If you want to do this, you should get a VONAGE account and use their API. But it&#39;s not free, Meta and VONAGE both want money for using WhatsApp (in a business environment, and they are focused on such customers)"},{"owner":{"account_id":6507730,"reputation":89,"user_id":5036095,"display_name":"umaid ashraf"},"score":0,"creation_date":1691244175,"post_id":76840755,"comment_id":135467358,"body_markdown":"@cyberbrain this form is not for sending WhatsApp message. It&#39;s for user account registration on Vonage platform.","body":"@cyberbrain this form is not for sending WhatsApp message. It&#39;s for user account registration on Vonage platform."},{"owner":{"account_id":6507730,"reputation":89,"user_id":5036095,"display_name":"umaid ashraf"},"score":0,"creation_date":1691244221,"post_id":76840755,"comment_id":135467364,"body_markdown":"@cyberbrain No protection, as it&#39;s working with Postman.","body":"@cyberbrain No protection, as it&#39;s working with Postman."}],"answers":[{"tags":[],"owner":{"account_id":13993199,"reputation":129,"user_id":10362945,"display_name":"Sagar"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691226574,"creation_date":1691226574,"answer_id":76840906,"question_id":76840755,"body_markdown":"The url fired from api and from browser is different.\r\n`Don&#39;t` word made the difference.\r\nIn browser `Don&#39;t` got converted to `Don%27t` removing special characters `&#39;` while mentioned url\r\n\r\n&gt; https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/formResponse?submit=Submit&amp;entry.294840288=Both%20of%20the%20above&amp;entry.305369145=3326252240&amp;entry.365096862=38f794d8&amp;entry.400495561=tbc&amp;entry.631769330=South%20East%20Asia%20(SEA)&amp;entry.901955710=Umaid%20Ashraf&amp;entry.1208336345=up%20to%2010,000%20Messages%20/%20month&amp;entry.1259584144=umaidashraf0@gmail.com&amp;entry.1489275520=Devestem&amp;entry.1510504567=Pakistan%2092&amp;entry.1595895866=Devestem&amp;entry.1602423798=umaidashraf@gmail.com&amp;entry.1731935104=No&amp;entry.1807529240=Not%20sure&amp;entry.2012164249=Other/%20Don&#39;t%20know&amp;entry.292494179=&amp;entry.565847730=&amp;entry.1792374253=&amp;entry.166684008=121026849979786&amp;entry.1328375169=&amp;entry.1366161341=&amp;entry.1461623644=Hi%20David!%20Your%20Order%20is%20booked%20and%20it%20will%20be%20delivered%20in%20two%20days.%20Thanks%20for%20trusting%20us.&amp;entry.309718730=1000&amp;entry.1279938927=\r\n\r\ngot fired as is from code.\r\n","title":"Submit google form by API call using RestTemplate in Java is not working","body":"<p>The url fired from api and from browser is different.\n<code>Don't</code> word made the difference.\nIn browser <code>Don't</code> got converted to <code>Don%27t</code> removing special characters <code>'</code> while mentioned url</p>\n<blockquote>\n<p><a href=\"https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/formResponse?submit=Submit&amp;entry.294840288=Both%20of%20the%20above&amp;entry.305369145=3326252240&amp;entry.365096862=38f794d8&amp;entry.400495561=tbc&amp;entry.631769330=South%20East%20Asia%20(SEA)&amp;entry.901955710=Umaid%20Ashraf&amp;entry.1208336345=up%20to%2010,000%20Messages%20/%20month&amp;entry.1259584144=umaidashraf0@gmail.com&amp;entry.1489275520=Devestem&amp;entry.1510504567=Pakistan%2092&amp;entry.1595895866=Devestem&amp;entry.1602423798=umaidashraf@gmail.com&amp;entry.1731935104=No&amp;entry.1807529240=Not%20sure&amp;entry.2012164249=Other/%20Don%27t%20know&amp;entry.292494179=&amp;entry.565847730=&amp;entry.1792374253=&amp;entry.166684008=121026849979786&amp;entry.1328375169=&amp;entry.1366161341=&amp;entry.1461623644=Hi%20David!%20Your%20Order%20is%20booked%20and%20it%20will%20be%20delivered%20in%20two%20days.%20Thanks%20for%20trusting%20us.&amp;entry.309718730=1000&amp;entry.1279938927=\" rel=\"nofollow noreferrer\">https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/formResponse?submit=Submit&amp;entry.294840288=Both%20of%20the%20above&amp;entry.305369145=3326252240&amp;entry.365096862=38f794d8&amp;entry.400495561=tbc&amp;entry.631769330=South%20East%20Asia%20(SEA)&amp;entry.901955710=Umaid%20Ashraf&amp;entry.1208336345=up%20to%2010,000%20Messages%20/%20month&amp;entry.1259584144=umaidashraf0@gmail.com&amp;entry.1489275520=Devestem&amp;entry.1510504567=Pakistan%2092&amp;entry.1595895866=Devestem&amp;entry.1602423798=umaidashraf@gmail.com&amp;entry.1731935104=No&amp;entry.1807529240=Not%20sure&amp;entry.2012164249=Other/%20Don't%20know&amp;entry.292494179=&amp;entry.565847730=&amp;entry.1792374253=&amp;entry.166684008=121026849979786&amp;entry.1328375169=&amp;entry.1366161341=&amp;entry.1461623644=Hi%20David!%20Your%20Order%20is%20booked%20and%20it%20will%20be%20delivered%20in%20two%20days.%20Thanks%20for%20trusting%20us.&amp;entry.309718730=1000&amp;entry.1279938927=</a></p>\n</blockquote>\n<p>got fired as is from code.</p>\n"}],"owner":{"account_id":6507730,"reputation":89,"user_id":5036095,"display_name":"umaid ashraf"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":85,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691226574,"creation_date":1691224006,"question_id":76840755,"body_markdown":"I have to submit [this][1] Google form whenever new signup is performed on my application, so I have used `RestTemplate` in Java Spring Boot to send API request and populate all form data as query params. These query params worked for plan text, but for dropdown selection these are not working properly and I get 400 bad request.\r\n\r\nAnd the strange thing is, I debug the code and copy the generated URL from `RestTemplate` API call and paste same URL in browser or Postman, and it&#39;s 100% working.\r\n\r\nCan anyone look into my code and generated URLR and identify what I&#39;m doing wrong in the code?\r\n\r\nHere is my code:\r\n```\r\nprivate static final String GOOGLE_FORM_URL_V2 = &quot;https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/formResponse&quot;;\r\n\r\n\r\npublic Boolean submitGoogleFormV2(UserDto userDto) {\r\n        String sampleWhatsappMessage = &quot;Hi David! Your Order is booked and it will be delivered in two days. Thanks for trusting us.&quot;;\r\n        String country = new Locale(&quot;en&quot;, PhoneNumberUtil.getInstance().getRegionCodeForCountryCode(userDto.getCountryCode())).getDisplayCountry();\r\n\r\n        UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(GOOGLE_FORM_URL_V2)\r\n                .queryParam(&quot;submit&quot;, &quot;Submit&quot;)\r\n                .queryParam(&quot;entry.294840288&quot;, &quot;Both of the above&quot;) // What type of messages will you be sending with WhatsApp?\r\n                .queryParam(&quot;entry.305369145&quot;, userDto.getPhoneNumber()) // phone number\r\n                .queryParam(&quot;entry.365096862&quot;, vonageApiProperties.getMasterKey()) // Vonage API Key\r\n                // TODO: Generate new api key for this whatsapp number\r\n                .queryParam(&quot;entry.400495561&quot;, &quot;tbc&quot;) // Vonage API key for WhatsApp Traffic\r\n                .queryParam(&quot;entry.631769330&quot;, userDto.getRegion().getText()) // Your Region\r\n                .queryParam(&quot;entry.901955710&quot;, userDto.getFirstName() + &quot; &quot; + userDto.getLastName()) // Your Name\r\n                .queryParam(&quot;entry.1208336345&quot;, &quot;up to 10,000 Messages / month&quot;) // Estimated monthly messages volume\r\n                .queryParam(&quot;entry.1259584144&quot;, userDto.getEmail()) // Your Email Address\r\n                .queryParam(&quot;entry.1489275520&quot;, userDto.getBrandName()) // Brand Name\r\n                .queryParam(&quot;entry.1510504567&quot;, country + &quot; &quot; + userDto.getCountryCode().toString()) // Phone number&#39;s country code\r\n                .queryParam(&quot;entry.1595895866&quot;, userDto.getCompanyName()) // Company Name\r\n                .queryParam(&quot;entry.1602423798&quot;, userDto.getEmail()) // Email address(s) to be added to the WhatsApp Manager\r\n                .queryParam(&quot;entry.1731935104&quot;, &quot;No&quot;) // Is your chosen WhatsApp phone number a Vonage long virtual number (LVN)?\r\n                .queryParam(&quot;entry.1807529240&quot;, &quot;Not sure&quot;) // Estimated peak messages per second: indicate daily, weekly, or monthly.\r\n                .queryParam(&quot;entry.2012164249&quot;, &quot;Other/ Don&#39;t know&quot;) // What is your business vertical?\r\n                .queryParam(&quot;entry.292494179&quot;, &quot;&quot;) // Partner Name\r\n                .queryParam(&quot;entry.565847730&quot;, &quot;&quot;) // Other Email Addresses to be CC&#39;d\r\n                .queryParam(&quot;entry.1792374253&quot;, &quot;&quot;) // Vonage Account Manager&#39;s email address\r\n                .queryParam(&quot;entry.166684008&quot;, userDto.getFbBusinessManagerId()) // Company Facebook Business Manager ID\r\n                .queryParam(&quot;entry.1328375169&quot;, &quot;&quot;) // Company Facebook URL\r\n                .queryParam(&quot;entry.1366161341&quot;, &quot;&quot;) // Company website\r\n                .queryParam(&quot;entry.1461623644&quot;, sampleWhatsappMessage) // Please provide example message(s) you would be sending over WhatsApp\r\n                .queryParam(&quot;entry.309718730&quot;, &quot;1000&quot;) // What is your expected monthly spend on this project?\r\n                .queryParam(&quot;entry.1279938927&quot;, &quot;&quot;); // Any Additional Notes\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        headers.set(&quot;Accept&quot;, &quot;*/*&quot;);\r\n        headers.set(&quot;User-Agent&quot;, &quot;Mozilla/5.0&quot;);\r\n        HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\r\n\r\n        try {\r\n            ResponseEntity&lt;String&gt; response = restTemplate.postForEntity(builder.toUriString(), entity, String.class);\r\n            log.info(&quot;Successfully sent google from to Vonage. Response: {}&quot;, response.getBody());\r\n            return true;\r\n\r\n        } catch (Exception e) {\r\n            log.error(&quot;Unable to send google form to vonage. Error: {}&quot;, e.getMessage());\r\n            return false;\r\n        }\r\n    }\r\n```\r\n\r\nHere is the generated URL:\r\n\r\n```\r\nhttps://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/formResponse?submit=Submit&amp;entry.294840288=Both%20of%20the%20above&amp;entry.305369145=3326252240&amp;entry.365096862=38f794d8&amp;entry.400495561=tbc&amp;entry.631769330=South%20East%20Asia%20(SEA)&amp;entry.901955710=Umaid%20Ashraf&amp;entry.1208336345=up%20to%2010,000%20Messages%20/%20month&amp;entry.1259584144=umaidashraf0@gmail.com&amp;entry.1489275520=Devestem&amp;entry.1510504567=Pakistan%2092&amp;entry.1595895866=Devestem&amp;entry.1602423798=umaidashraf@gmail.com&amp;entry.1731935104=No&amp;entry.1807529240=Not%20sure&amp;entry.2012164249=Other/%20Don&#39;t%20know&amp;entry.292494179=&amp;entry.565847730=&amp;entry.1792374253=&amp;entry.166684008=121026849979786&amp;entry.1328375169=&amp;entry.1366161341=&amp;entry.1461623644=Hi%20David!%20Your%20Order%20is%20booked%20and%20it%20will%20be%20delivered%20in%20two%20days.%20Thanks%20for%20trusting%20us.&amp;entry.309718730=1000&amp;entry.1279938927=\r\n```\r\n\r\n\r\n  [1]: https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/viewform","title":"Submit google form by API call using RestTemplate in Java is not working","body":"<p>I have to submit <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/viewform\" rel=\"nofollow noreferrer\">this</a> Google form whenever new signup is performed on my application, so I have used <code>RestTemplate</code> in Java Spring Boot to send API request and populate all form data as query params. These query params worked for plan text, but for dropdown selection these are not working properly and I get 400 bad request.</p>\n<p>And the strange thing is, I debug the code and copy the generated URL from <code>RestTemplate</code> API call and paste same URL in browser or Postman, and it's 100% working.</p>\n<p>Can anyone look into my code and generated URLR and identify what I'm doing wrong in the code?</p>\n<p>Here is my code:</p>\n<pre><code>private static final String GOOGLE_FORM_URL_V2 = &quot;https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/formResponse&quot;;\n\n\npublic Boolean submitGoogleFormV2(UserDto userDto) {\n        String sampleWhatsappMessage = &quot;Hi David! Your Order is booked and it will be delivered in two days. Thanks for trusting us.&quot;;\n        String country = new Locale(&quot;en&quot;, PhoneNumberUtil.getInstance().getRegionCodeForCountryCode(userDto.getCountryCode())).getDisplayCountry();\n\n        UriComponentsBuilder builder = UriComponentsBuilder.fromHttpUrl(GOOGLE_FORM_URL_V2)\n                .queryParam(&quot;submit&quot;, &quot;Submit&quot;)\n                .queryParam(&quot;entry.294840288&quot;, &quot;Both of the above&quot;) // What type of messages will you be sending with WhatsApp?\n                .queryParam(&quot;entry.305369145&quot;, userDto.getPhoneNumber()) // phone number\n                .queryParam(&quot;entry.365096862&quot;, vonageApiProperties.getMasterKey()) // Vonage API Key\n                // TODO: Generate new api key for this whatsapp number\n                .queryParam(&quot;entry.400495561&quot;, &quot;tbc&quot;) // Vonage API key for WhatsApp Traffic\n                .queryParam(&quot;entry.631769330&quot;, userDto.getRegion().getText()) // Your Region\n                .queryParam(&quot;entry.901955710&quot;, userDto.getFirstName() + &quot; &quot; + userDto.getLastName()) // Your Name\n                .queryParam(&quot;entry.1208336345&quot;, &quot;up to 10,000 Messages / month&quot;) // Estimated monthly messages volume\n                .queryParam(&quot;entry.1259584144&quot;, userDto.getEmail()) // Your Email Address\n                .queryParam(&quot;entry.1489275520&quot;, userDto.getBrandName()) // Brand Name\n                .queryParam(&quot;entry.1510504567&quot;, country + &quot; &quot; + userDto.getCountryCode().toString()) // Phone number's country code\n                .queryParam(&quot;entry.1595895866&quot;, userDto.getCompanyName()) // Company Name\n                .queryParam(&quot;entry.1602423798&quot;, userDto.getEmail()) // Email address(s) to be added to the WhatsApp Manager\n                .queryParam(&quot;entry.1731935104&quot;, &quot;No&quot;) // Is your chosen WhatsApp phone number a Vonage long virtual number (LVN)?\n                .queryParam(&quot;entry.1807529240&quot;, &quot;Not sure&quot;) // Estimated peak messages per second: indicate daily, weekly, or monthly.\n                .queryParam(&quot;entry.2012164249&quot;, &quot;Other/ Don't know&quot;) // What is your business vertical?\n                .queryParam(&quot;entry.292494179&quot;, &quot;&quot;) // Partner Name\n                .queryParam(&quot;entry.565847730&quot;, &quot;&quot;) // Other Email Addresses to be CC'd\n                .queryParam(&quot;entry.1792374253&quot;, &quot;&quot;) // Vonage Account Manager's email address\n                .queryParam(&quot;entry.166684008&quot;, userDto.getFbBusinessManagerId()) // Company Facebook Business Manager ID\n                .queryParam(&quot;entry.1328375169&quot;, &quot;&quot;) // Company Facebook URL\n                .queryParam(&quot;entry.1366161341&quot;, &quot;&quot;) // Company website\n                .queryParam(&quot;entry.1461623644&quot;, sampleWhatsappMessage) // Please provide example message(s) you would be sending over WhatsApp\n                .queryParam(&quot;entry.309718730&quot;, &quot;1000&quot;) // What is your expected monthly spend on this project?\n                .queryParam(&quot;entry.1279938927&quot;, &quot;&quot;); // Any Additional Notes\n\n        HttpHeaders headers = new HttpHeaders();\n        headers.set(&quot;Accept&quot;, &quot;*/*&quot;);\n        headers.set(&quot;User-Agent&quot;, &quot;Mozilla/5.0&quot;);\n        HttpEntity&lt;?&gt; entity = new HttpEntity&lt;&gt;(headers);\n\n        try {\n            ResponseEntity&lt;String&gt; response = restTemplate.postForEntity(builder.toUriString(), entity, String.class);\n            log.info(&quot;Successfully sent google from to Vonage. Response: {}&quot;, response.getBody());\n            return true;\n\n        } catch (Exception e) {\n            log.error(&quot;Unable to send google form to vonage. Error: {}&quot;, e.getMessage());\n            return false;\n        }\n    }\n</code></pre>\n<p>Here is the generated URL:</p>\n<pre><code>https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/formResponse?submit=Submit&amp;entry.294840288=Both%20of%20the%20above&amp;entry.305369145=3326252240&amp;entry.365096862=38f794d8&amp;entry.400495561=tbc&amp;entry.631769330=South%20East%20Asia%20(SEA)&amp;entry.901955710=Umaid%20Ashraf&amp;entry.1208336345=up%20to%2010,000%20Messages%20/%20month&amp;entry.1259584144=umaidashraf0@gmail.com&amp;entry.1489275520=Devestem&amp;entry.1510504567=Pakistan%2092&amp;entry.1595895866=Devestem&amp;entry.1602423798=umaidashraf@gmail.com&amp;entry.1731935104=No&amp;entry.1807529240=Not%20sure&amp;entry.2012164249=Other/%20Don't%20know&amp;entry.292494179=&amp;entry.565847730=&amp;entry.1792374253=&amp;entry.166684008=121026849979786&amp;entry.1328375169=&amp;entry.1366161341=&amp;entry.1461623644=Hi%20David!%20Your%20Order%20is%20booked%20and%20it%20will%20be%20delivered%20in%20two%20days.%20Thanks%20for%20trusting%20us.&amp;entry.309718730=1000&amp;entry.1279938927=\n</code></pre>\n"},{"tags":["java","spring-boot","circuit-breaker","resilience4j"],"comments":[{"owner":{"account_id":18229672,"reputation":18798,"user_id":13268855,"display_name":"Peter Csala"},"score":0,"creation_date":1691050503,"post_id":76814206,"comment_id":135439759,"body_markdown":"What exactly is your question?","body":"What exactly is your question?"},{"owner":{"account_id":19281493,"reputation":36,"user_id":14093402,"display_name":"Shahrukh Ali"},"score":0,"creation_date":1691176709,"post_id":76814206,"comment_id":135461810,"body_markdown":"My question is as per the configuration of circuit breaker transition from CLOSED state to OPEN state should happen after the minimum number of calls have been reached and the it should evaluate the failure. Is my understanding correct? If not can you please explain how the transition should happen from CLOSED state to OPEN state based on the above configuration.","body":"My question is as per the configuration of circuit breaker transition from CLOSED state to OPEN state should happen after the minimum number of calls have been reached and the it should evaluate the failure. Is my understanding correct? If not can you please explain how the transition should happen from CLOSED state to OPEN state based on the above configuration."}],"answers":[{"comments":[{"owner":{"account_id":19281493,"reputation":36,"user_id":14093402,"display_name":"Shahrukh Ali"},"score":0,"creation_date":1691176538,"post_id":76823708,"comment_id":135461781,"body_markdown":"Thank you. But if the minimum number of calls is set to 10 the transition is happening after 5 failed service calls which is still 50% of failure threshold and I cannot see any point for having sliding window size and type in config. Can you please help.","body":"Thank you. But if the minimum number of calls is set to 10 the transition is happening after 5 failed service calls which is still 50% of failure threshold and I cannot see any point for having sliding window size and type in config. Can you please help."},{"owner":{"account_id":26105575,"reputation":56,"user_id":19800332,"display_name":"butterCup"},"score":0,"creation_date":1691226989,"post_id":76823708,"comment_id":135465778,"body_markdown":"I have updated the answer. And there are two types of sliding window: Count based and Time based - Count based , the success and failure rate of calls are over fixed number of calls whereas time based window is based on calls made over fixed time period. So the sliding window size indicates the how  many calls are included in CB state analysis, the CB will look at the last 10 (size as 10)calls to determine the failure rate or slow call rate threshold being exceeded.","body":"I have updated the answer. And there are two types of sliding window: Count based and Time based - Count based , the success and failure rate of calls are over fixed number of calls whereas time based window is based on calls made over fixed time period. So the sliding window size indicates the how  many calls are included in CB state analysis, the CB will look at the last 10 (size as 10)calls to determine the failure rate or slow call rate threshold being exceeded."}],"tags":[],"owner":{"account_id":26105575,"reputation":56,"user_id":19800332,"display_name":"butterCup"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691226415,"creation_date":1691012511,"answer_id":76823708,"question_id":76814206,"body_markdown":"1. When the circuit breaker in `CLOSED` state, if any call fails the circuit breaker counts the failure and if the failure Threshold exceeds the given threshold, it transitions to `OPEN`. \r\n\r\na)The given failure Threshold in your configuration is 70 (when the external/remote service is considered unavailable)\r\n\r\n- So if 2 out 3 service calls fails, 70 Threshold is reached it changes to `OPEN`. \r\n- And if 7 out of 10 calls fails , the circuit breaker trips and transitions to `OPEN` state.\r\n\r\nIf transition to `OPEN` should be made only if 10 out 10 calls fail, threshold should be 100.\r\n\r\nb)The given slow RATE threshold in your configuration is 75(when the external/ remote service is considered slow)\r\n\r\n -slow call DURATION threshold (10 secs)is the amount of time a service is allowed to take to respond to the request call.\r\n - if 10 out of 3 calls can be slow , the CB will trip for slow RATE threshold 75\r\n - it is also possible that slow call DURATION threshold being reached, even if the slow call RATE threshold is not exceeded ,it can go to OPEN. If the external API is slow to respond it could cause your service to have slow calls and even if the slow RATE threshold is not being exceeded (75),if the slow call DURATION threshold (10 secs in your configuration)is reached it goes to OPEN.\r\n\r\n2. When CB in OPEN state,it prevents calls to the external service, and returns error which goes to fallback method. It stays in `OPEN` state for the configured time (180 seconds in yours) then changes to `HALF OPEN`","title":"Circuit Breaker is going to OPEN state from CLOSED before the minimum number of calls","body":"<ol>\n<li>When the circuit breaker in <code>CLOSED</code> state, if any call fails the circuit breaker counts the failure and if the failure Threshold exceeds the given threshold, it transitions to <code>OPEN</code>.</li>\n</ol>\n<p>a)The given failure Threshold in your configuration is 70 (when the external/remote service is considered unavailable)</p>\n<ul>\n<li>So if 2 out 3 service calls fails, 70 Threshold is reached it changes to <code>OPEN</code>.</li>\n<li>And if 7 out of 10 calls fails , the circuit breaker trips and transitions to <code>OPEN</code> state.</li>\n</ul>\n<p>If transition to <code>OPEN</code> should be made only if 10 out 10 calls fail, threshold should be 100.</p>\n<p>b)The given slow RATE threshold in your configuration is 75(when the external/ remote service is considered slow)</p>\n<p>-slow call DURATION threshold (10 secs)is the amount of time a service is allowed to take to respond to the request call.</p>\n<ul>\n<li>if 10 out of 3 calls can be slow , the CB will trip for slow RATE threshold 75</li>\n<li>it is also possible that slow call DURATION threshold being reached, even if the slow call RATE threshold is not exceeded ,it can go to OPEN. If the external API is slow to respond it could cause your service to have slow calls and even if the slow RATE threshold is not being exceeded (75),if the slow call DURATION threshold (10 secs in your configuration)is reached it goes to OPEN.</li>\n</ul>\n<ol start=\"2\">\n<li>When CB in OPEN state,it prevents calls to the external service, and returns error which goes to fallback method. It stays in <code>OPEN</code> state for the configured time (180 seconds in yours) then changes to <code>HALF OPEN</code></li>\n</ol>\n"}],"owner":{"account_id":19281493,"reputation":36,"user_id":14093402,"display_name":"Shahrukh Ali"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":363,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691226415,"creation_date":1690913184,"question_id":76814206,"body_markdown":"I have the following config set for the circuit breaker\r\n```\r\nprivate CircuitBreakerConfig loadCircuitBreakerConfig() {\r\n\r\n    CircuitBreakerConfig config = CircuitBreakerConfig.custom()\r\n    .waitDurationInOpenState(Duration.ofSeconds(180))\r\n    .permittedNumberOfCallsInHalfOpenState(2)\r\n    .failureRateThreshold(70)\r\n    .slowCallRateThreshold(75)\r\n    .slowCallDurationThreshold(Duration.ofMillis(10000))\r\n    .slidingWindowSize(10)\r\n    .slidingWindowType(&quot;COUNT_BASED&quot;)\r\n    .minimumNumberOfCalls(3) // Tried with 10 also\r\n    .build();\r\n    \r\n    return config;\r\n}\r\n```\r\nI am creating the instance of circuit breaker as \r\n```\r\ncircuitBreaker = CircuitBreaker.of(&quot;CircuitBreakerDemo&quot;, loadCircuitBreakerConfig());\r\n```\r\nDependency added \r\n\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\r\n    &lt;artifactId&gt;resilience4j-circuitbreaker&lt;/artifactId&gt;\r\n    &lt;version&gt;1.7.1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\nWith the minimum number of calls as 3, circuit is getting `OPEN` from `CLOSED` state after 2 failure only and if the minimum number of calls are 10 then circuit is getting `OPEN` after 5 failure. The next subsequent request are directly going in fallback scenario.\r\nI tried with different configurations but still unable to determine what is going wrong.\r\n\r\n\r\nAs per my understanding circuit breaker will evaluate after 3 or 10 requests have been made.","title":"Circuit Breaker is going to OPEN state from CLOSED before the minimum number of calls","body":"<p>I have the following config set for the circuit breaker</p>\n<pre><code>private CircuitBreakerConfig loadCircuitBreakerConfig() {\n\n    CircuitBreakerConfig config = CircuitBreakerConfig.custom()\n    .waitDurationInOpenState(Duration.ofSeconds(180))\n    .permittedNumberOfCallsInHalfOpenState(2)\n    .failureRateThreshold(70)\n    .slowCallRateThreshold(75)\n    .slowCallDurationThreshold(Duration.ofMillis(10000))\n    .slidingWindowSize(10)\n    .slidingWindowType(&quot;COUNT_BASED&quot;)\n    .minimumNumberOfCalls(3) // Tried with 10 also\n    .build();\n    \n    return config;\n}\n</code></pre>\n<p>I am creating the instance of circuit breaker as</p>\n<pre><code>circuitBreaker = CircuitBreaker.of(&quot;CircuitBreakerDemo&quot;, loadCircuitBreakerConfig());\n</code></pre>\n<p>Dependency added</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.github.resilience4j&lt;/groupId&gt;\n    &lt;artifactId&gt;resilience4j-circuitbreaker&lt;/artifactId&gt;\n    &lt;version&gt;1.7.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>With the minimum number of calls as 3, circuit is getting <code>OPEN</code> from <code>CLOSED</code> state after 2 failure only and if the minimum number of calls are 10 then circuit is getting <code>OPEN</code> after 5 failure. The next subsequent request are directly going in fallback scenario.\nI tried with different configurations but still unable to determine what is going wrong.</p>\n<p>As per my understanding circuit breaker will evaluate after 3 or 10 requests have been made.</p>\n"},{"tags":["java","spring","spring-boot","dependency-injection"],"answers":[{"comments":[{"owner":{"account_id":1713076,"reputation":5244,"user_id":1570711,"accept_rate":44,"display_name":"Claudi"},"score":0,"creation_date":1690875750,"post_id":76809415,"comment_id":135410368,"body_markdown":"Thank you. I have annotated Syncer as `@Service` with its constructor `@Autowired`, and removed the `@Bean` from the application configuration. On the other hand, Syncer is really doing a lot of stuff. It basically keeps these repositories synced with a third-party application.  The syncer periodically polls the third-party app to update the data in the repos.","body":"Thank you. I have annotated Syncer as <code>@Service</code> with its constructor <code>@Autowired</code>, and removed the <code>@Bean</code> from the application configuration. On the other hand, Syncer is really doing a lot of stuff. It basically keeps these repositories synced with a third-party application.  The syncer periodically polls the third-party app to update the data in the repos."}],"tags":[],"owner":{"account_id":5404,"reputation":22100,"user_id":8681,"accept_rate":67,"display_name":"Jorn"},"comment_count":1,"down_vote_count":0,"up_vote_count":5,"is_accepted":true,"score":5,"last_activity_date":1690875205,"creation_date":1690875205,"answer_id":76809415,"question_id":76809281,"body_markdown":"Yes, having constructors with multiple parameters is a consequence of DI. It&#39;s a good thing, because you can then create those objects outside of DI (such as in tests) without running into problems such as uninitialized fields.\r\n\r\nHowever, calling those constructors manually *in your production code* is not good. You shouldn&#39;t need that `@Bean` method at all, just annotate the `Syncer` class so that Spring can `@Autowire` it for you where you need it. \r\n\r\nAlso consider that if you need *that many* dependencies, maybe your class is doing too much. See if you can split up its responsibilities into different classes.","title":"Dependency injection - how to improve constructor with many arguments","body":"<p>Yes, having constructors with multiple parameters is a consequence of DI. It's a good thing, because you can then create those objects outside of DI (such as in tests) without running into problems such as uninitialized fields.</p>\n<p>However, calling those constructors manually <em>in your production code</em> is not good. You shouldn't need that <code>@Bean</code> method at all, just annotate the <code>Syncer</code> class so that Spring can <code>@Autowire</code> it for you where you need it.</p>\n<p>Also consider that if you need <em>that many</em> dependencies, maybe your class is doing too much. See if you can split up its responsibilities into different classes.</p>\n"},{"tags":[],"owner":{"account_id":19535095,"reputation":2874,"user_id":14294053,"display_name":"Mar-Z"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690879164,"creation_date":1690879164,"answer_id":76809883,"question_id":76809281,"body_markdown":"In addition to the answer by Jorn. You can use `Lombok` annotation `@RequiredArgsConstructor` to reduce boilerplate code. It will generate the constructor with all fields declared as final or annotated with `@NonNull`.\r\n\r\nExample based on your code:\r\n```\r\n@Service\r\n@RequiredArgsConstructor\r\npublic class Syncer {\r\n\r\n    private final SatBackendApplication.AppParamService appParamService;\r\n    private final CustomerRepository customerRepository;\r\n    private final AddressRepository addressRepository;\r\n// ...\r\n}\r\n```\r\nPlease note: if you need more then one constructor then you must add following attribute:\r\n```\r\n@RequiredArgsConstructor(onConstructor = @__(@Autowired))\r\n```","title":"Dependency injection - how to improve constructor with many arguments","body":"<p>In addition to the answer by Jorn. You can use <code>Lombok</code> annotation <code>@RequiredArgsConstructor</code> to reduce boilerplate code. It will generate the constructor with all fields declared as final or annotated with <code>@NonNull</code>.</p>\n<p>Example based on your code:</p>\n<pre><code>@Service\n@RequiredArgsConstructor\npublic class Syncer {\n\n    private final SatBackendApplication.AppParamService appParamService;\n    private final CustomerRepository customerRepository;\n    private final AddressRepository addressRepository;\n// ...\n}\n</code></pre>\n<p>Please note: if you need more then one constructor then you must add following attribute:</p>\n<pre><code>@RequiredArgsConstructor(onConstructor = @__(@Autowired))\n</code></pre>\n"}],"owner":{"account_id":1713076,"reputation":5244,"user_id":1570711,"accept_rate":44,"display_name":"Claudi"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":76809415,"answer_count":2,"score":1,"last_activity_date":1691225176,"creation_date":1690874126,"question_id":76809281,"body_markdown":"I&#39;m new to Spring and recently noticed that using `@Autowired` in class fields is discouraged. Instead, the use of constructors is recommended for dependency injection (DI).\r\n\r\nThe problem is that I have defined a bean that requires access to many repositories. Originally, the bean had several autowired fields holding a reference to these repositories, but now I just removed the `@Autowired` annotation and used the constructor to initialize them. The result is a constructor with many arguments that will probably grow in the future as long as I create more repositories/services:\r\n\r\n```java\r\n@Bean\r\npublic Syncer syncer(SatBackendApplication.AppParamService appParamService,\r\n                     CustomerRepository customerRepository,\r\n                     AddressRepository addressRepository,\r\n                     ContactPersonRepository contactPersonRepository,\r\n                     CustomerContractRepository customerContractRepository,\r\n                     ProductRepository productRepository,\r\n                     OrderRepository orderRepository,\r\n                     OrderRepository.OrderLineRepository orderLineRepository\r\n                     ) {\r\n    return new Syncer(\r\n            appParamService,\r\n            customerRepository,\r\n            addressRepository,\r\n            contactPersonRepository,\r\n            customerContractRepository,\r\n            productRepository,\r\n            orderRepository,\r\n            orderLineRepository);\r\n}\r\n```\r\n\r\nIs this the right way to inject dependencies to a bean? Is there any alternative solution with less code?\r\n\r\n\r\n","title":"Dependency injection - how to improve constructor with many arguments","body":"<p>I'm new to Spring and recently noticed that using <code>@Autowired</code> in class fields is discouraged. Instead, the use of constructors is recommended for dependency injection (DI).</p>\n<p>The problem is that I have defined a bean that requires access to many repositories. Originally, the bean had several autowired fields holding a reference to these repositories, but now I just removed the <code>@Autowired</code> annotation and used the constructor to initialize them. The result is a constructor with many arguments that will probably grow in the future as long as I create more repositories/services:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic Syncer syncer(SatBackendApplication.AppParamService appParamService,\n                     CustomerRepository customerRepository,\n                     AddressRepository addressRepository,\n                     ContactPersonRepository contactPersonRepository,\n                     CustomerContractRepository customerContractRepository,\n                     ProductRepository productRepository,\n                     OrderRepository orderRepository,\n                     OrderRepository.OrderLineRepository orderLineRepository\n                     ) {\n    return new Syncer(\n            appParamService,\n            customerRepository,\n            addressRepository,\n            contactPersonRepository,\n            customerContractRepository,\n            productRepository,\n            orderRepository,\n            orderLineRepository);\n}\n</code></pre>\n<p>Is this the right way to inject dependencies to a bean? Is there any alternative solution with less code?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"score":0,"creation_date":1691222024,"post_id":76837166,"comment_id":135465352,"body_markdown":"How do you pass a locale into the backend? Does the fronted do this, or are you referring to the HTTP header `Accept-Language`","body":"How do you pass a locale into the backend? Does the fronted do this, or are you referring to the HTTP header <code>Accept-Language</code>"},{"owner":{"account_id":12785520,"reputation":178,"user_id":11672197,"display_name":"qarabala"},"score":0,"creation_date":1691224124,"post_id":76837166,"comment_id":135465506,"body_markdown":"I am referring to HTTP header, Spring Boot default way of handling locale.","body":"I am referring to HTTP header, Spring Boot default way of handling locale."}],"answers":[{"comments":[{"owner":{"account_id":12785520,"reputation":178,"user_id":11672197,"display_name":"qarabala"},"score":0,"creation_date":1691218048,"post_id":76837641,"comment_id":135465038,"body_markdown":"Thanks a lot for your detailed answer. I do not quite understand how the defaulting mechanism based on the supported languages list is achieved in this answer. If the language is supported (like Spanish), then it should NOT default (to English). And this should happen every time someone opens a session. That was my primary problem with `localeResolver.setDefaultLocale(locale);` in Bean.\n`.","body":"Thanks a lot for your detailed answer. I do not quite understand how the defaulting mechanism based on the supported languages list is achieved in this answer. If the language is supported (like Spanish), then it should NOT default (to English). And this should happen every time someone opens a session. That was my primary problem with <code>localeResolver.setDefaultLocale(locale);</code> in Bean. `."},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":1,"creation_date":1691247897,"post_id":76837641,"comment_id":135467768,"body_markdown":"If, for example, the broswer sends `es_ES` as the preferred locale, then Spring Boot sets this locale into the LocaleContextHolder. What you now have to do is to make sure, that wherever you want to get your app i18ned, you have spanish options in place. Spring Boot (respectively Java) will then automatically try to get spanish versions of whatever. This can be used to format dates and times or display text content, which you have stored inside `messages.properties`: you then have the base `messages.properties` and the supported languages `messages_en.properties` and `messages_es.properties`.","body":"If, for example, the broswer sends <code>es_ES</code> as the preferred locale, then Spring Boot sets this locale into the LocaleContextHolder. What you now have to do is to make sure, that wherever you want to get your app i18ned, you have spanish options in place. Spring Boot (respectively Java) will then automatically try to get spanish versions of whatever. This can be used to format dates and times or display text content, which you have stored inside <code>messages.properties</code>: you then have the base <code>messages.properties</code> and the supported languages <code>messages_en.properties</code> and <code>messages_es.properties</code>."},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":1,"creation_date":1691248480,"post_id":76837641,"comment_id":135467846,"body_markdown":"If you set the locale manually via `localeResolver.setDefaultLocale(locale)` then this is the locale which Spring Boot uses when trying to resolve the locale for e.g. validation messages. You still have to provide the support for the locale (language), e.g. spanish validation messages, otherwise Spring uses fallback options. Setting up the locale alone is not sufficient, you must also provide support. Spring then knows what you want and will automatically try to find the desired messages.","body":"If you set the locale manually via <code>localeResolver.setDefaultLocale(locale)</code> then this is the locale which Spring Boot uses when trying to resolve the locale for e.g. validation messages. You still have to provide the support for the locale (language), e.g. spanish validation messages, otherwise Spring uses fallback options. Setting up the locale alone is not sufficient, you must also provide support. Spring then knows what you want and will automatically try to find the desired messages."}],"tags":[],"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691165877,"creation_date":1691165877,"answer_id":76837641,"question_id":76837166,"body_markdown":"You can retrieve the currently stored Locale like this:\r\n\r\n```java\r\nLocale locale = LocaleContextHolder.getLocale();\r\nlocaleResolver.setDefaultLocale(locale);\r\n```\r\n\r\nA good way, if cookies are allowed, would be to implement it like that:\r\n\r\n```java\r\n@Bean\r\npublic LocaleResolver localeResolver() {\r\n\r\n    CookieLocaleResolver localeResolver = new CookieLocaleResolver(&quot;BALLROOM_LANGUAGE&quot;);\r\n\r\n    Locale locale = LocaleContextHolder.getLocale();\r\n    localeResolver.setDefaultLocale(locale);\r\n\r\n    return localeResolver;\r\n}\r\n```\r\n\r\nThere is no need to check whether the automatically requested clients language is in your list, since it would always fallback to your default message implementation (which in your case would be english).\r\n\r\nOne way to let the user change the locale manually (what should always be possible) would be a custom LocaleController:\r\n\r\n```java\r\n@Controller\r\n@RequestMapping(&quot;/locale&quot;)\r\npublic class LocaleController {\r\n\r\n    @PostMapping(path = {&quot;&quot;, &quot;/&quot;}, consumes = {MediaType.APPLICATION_FORM_URLENCODED_VALUE})\r\n    public String locale(@RequestParam(&quot;locale&quot;) String locale,\r\n                         HttpServletRequest request,\r\n                         HttpServletResponse response) {\r\n\r\n        if (locale != null &amp;&amp; !locale.isBlank()) {\r\n            LocaleResolver localeResolver = RequestContextUtils.getLocaleResolver(request);\r\n            if (localeResolver == null)\r\n                throw new IllegalStateException(&quot;No LocaleResolver found&quot;);\r\n\r\n            try {\r\n                localeResolver.setLocale(request, response, StringUtils.parseLocale(locale));\r\n            } catch (IllegalArgumentException e) {\r\n                logger.debug(&quot;Ignoring invalid locale value [{}]: {}&quot;, locale, e.getMessage());\r\n            }\r\n        }\r\n\r\n        String referer = request.getHeader(&quot;referer&quot;);\r\n        return referer != null &amp;&amp; !referer.isBlank() ? &quot;redirect:&quot; + referer : &quot;redirect:/&quot;;\r\n    }\r\n}\r\n```\r\n\r\nYou would simply send a post request containing the desired locale as String in form of e.g. `en_US`.\r\n","title":"Checking whether client locale is in the list of supported languages","body":"<p>You can retrieve the currently stored Locale like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Locale locale = LocaleContextHolder.getLocale();\nlocaleResolver.setDefaultLocale(locale);\n</code></pre>\n<p>A good way, if cookies are allowed, would be to implement it like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic LocaleResolver localeResolver() {\n\n    CookieLocaleResolver localeResolver = new CookieLocaleResolver(&quot;BALLROOM_LANGUAGE&quot;);\n\n    Locale locale = LocaleContextHolder.getLocale();\n    localeResolver.setDefaultLocale(locale);\n\n    return localeResolver;\n}\n</code></pre>\n<p>There is no need to check whether the automatically requested clients language is in your list, since it would always fallback to your default message implementation (which in your case would be english).</p>\n<p>One way to let the user change the locale manually (what should always be possible) would be a custom LocaleController:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\n@RequestMapping(&quot;/locale&quot;)\npublic class LocaleController {\n\n    @PostMapping(path = {&quot;&quot;, &quot;/&quot;}, consumes = {MediaType.APPLICATION_FORM_URLENCODED_VALUE})\n    public String locale(@RequestParam(&quot;locale&quot;) String locale,\n                         HttpServletRequest request,\n                         HttpServletResponse response) {\n\n        if (locale != null &amp;&amp; !locale.isBlank()) {\n            LocaleResolver localeResolver = RequestContextUtils.getLocaleResolver(request);\n            if (localeResolver == null)\n                throw new IllegalStateException(&quot;No LocaleResolver found&quot;);\n\n            try {\n                localeResolver.setLocale(request, response, StringUtils.parseLocale(locale));\n            } catch (IllegalArgumentException e) {\n                logger.debug(&quot;Ignoring invalid locale value [{}]: {}&quot;, locale, e.getMessage());\n            }\n        }\n\n        String referer = request.getHeader(&quot;referer&quot;);\n        return referer != null &amp;&amp; !referer.isBlank() ? &quot;redirect:&quot; + referer : &quot;redirect:/&quot;;\n    }\n}\n</code></pre>\n<p>You would simply send a post request containing the desired locale as String in form of e.g. <code>en_US</code>.</p>\n"},{"tags":[],"owner":{"account_id":29073167,"reputation":1013,"user_id":22270964,"display_name":"Maksim Eliseev"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691224910,"creation_date":1691224910,"answer_id":76840815,"question_id":76837166,"body_markdown":"If you want to change the locale depending on the HTTP header `Accept-Language` you need to use `AcceptHeaderLocaleResolver`, for example:\r\n\r\n    @Bean\r\n    public LocaleResolver localeResolver() {\r\n        var resolver = new AcceptHeaderLocaleResolver();\r\n        resolver.setDefaultLocale(Locale.ENGLISH);\r\n        resolver.setSupportedLocales(\r\n                List.of(Locale.ENGLISH,\r\n                        Locale.FRENCH,\r\n                        Locale.of(&quot;es&quot;))\r\n        );\r\n\r\n        return resolver;\r\n    }\r\n\r\nIt&#39;s easy to set up and I guess that&#39;s exatly what you want.\r\n\r\nThe next step is to get exatly the locale that is defined using `AcceptHeaderLocaleResolver` and use it, for example, to get a message from the message sources. To do this you can use `LocaleContextHolder` as follows:\r\n\r\n    @Autowired\r\n    private MessageSourceAccessor messageSourceAccessor;\r\n\r\n    @GetMapping(produces = MediaType.TEXT_PLAIN_VALUE)\r\n    public ResponseEntity&lt;String&gt; getGreeting() {\r\n        String msg = messageSourceAccessor.getMessage(&quot;msg&quot;, LocaleContextHolder.getLocale());\r\n        return ResponseEntity.ok(msg);\r\n    }\r\n}\r\n\r\nYou can visit my [github][1] where I created a working example. To test the locale I used the [Locale Switcher Chrome Extension][2].\r\n\r\n\r\n  [1]: https://github.com/elimxim/ex-spring-boot-greeting\r\n  [2]: https://chrome.google.com/webstore/detail/locale-switcher/kngfjpghaokedippaapkfihdlmmlafcc","title":"Checking whether client locale is in the list of supported languages","body":"<p>If you want to change the locale depending on the HTTP header <code>Accept-Language</code> you need to use <code>AcceptHeaderLocaleResolver</code>, for example:</p>\n<pre><code>@Bean\npublic LocaleResolver localeResolver() {\n    var resolver = new AcceptHeaderLocaleResolver();\n    resolver.setDefaultLocale(Locale.ENGLISH);\n    resolver.setSupportedLocales(\n            List.of(Locale.ENGLISH,\n                    Locale.FRENCH,\n                    Locale.of(&quot;es&quot;))\n    );\n\n    return resolver;\n}\n</code></pre>\n<p>It's easy to set up and I guess that's exatly what you want.</p>\n<p>The next step is to get exatly the locale that is defined using <code>AcceptHeaderLocaleResolver</code> and use it, for example, to get a message from the message sources. To do this you can use <code>LocaleContextHolder</code> as follows:</p>\n<pre><code>@Autowired\nprivate MessageSourceAccessor messageSourceAccessor;\n\n@GetMapping(produces = MediaType.TEXT_PLAIN_VALUE)\npublic ResponseEntity&lt;String&gt; getGreeting() {\n    String msg = messageSourceAccessor.getMessage(&quot;msg&quot;, LocaleContextHolder.getLocale());\n    return ResponseEntity.ok(msg);\n}\n</code></pre>\n<p>}</p>\n<p>You can visit my <a href=\"https://github.com/elimxim/ex-spring-boot-greeting\" rel=\"nofollow noreferrer\">github</a> where I created a working example. To test the locale I used the <a href=\"https://chrome.google.com/webstore/detail/locale-switcher/kngfjpghaokedippaapkfihdlmmlafcc\" rel=\"nofollow noreferrer\">Locale Switcher Chrome Extension</a>.</p>\n"}],"owner":{"account_id":12785520,"reputation":178,"user_id":11672197,"display_name":"qarabala"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76840815,"answer_count":2,"score":1,"last_activity_date":1691224910,"creation_date":1691161695,"question_id":76837166,"body_markdown":"**I want to present the website to the users in their preferred language in the case that the website supports that language.**\r\n\r\nIn Spring Boot, I use the following bean to set the default language for the client:\r\n```java\r\n@Bean\r\npublic LocaleResolver localeResolver() {\r\n\tSessionLocaleResolver localeResolver = new SessionLocaleResolver();\r\n\tlocaleResolver.setLocaleAttributeName(&quot;user_locale&quot;); // Not strictly needed\r\n\tlocaleResolver.setDefaultLocale(Locale.ENGLISH);\r\n\treturn localeResolver;\r\n}\r\n```\r\n\r\nHow could I modify it to take the client&#39;s language, and check whether it is in the list of supported languages, e.g.\r\n```java\r\nprivate List&lt;Locale&gt; LOCALES = Arrays.asList(new Locale(&quot;en&quot;), new Locale(&quot;de&quot;), new Locale(&quot;fr&quot;), new Locale(&quot;sp&quot;), new Locale(&quot;it&quot;));\r\n```\r\nand then set the locale using something like\r\n```java\r\nreturn locales.contains(locale) ? locale : Locale.ENGLISH;\r\n```\r\n\r\nNotice that this should happen every time a session is initiated.","title":"Checking whether client locale is in the list of supported languages","body":"<p><strong>I want to present the website to the users in their preferred language in the case that the website supports that language.</strong></p>\n<p>In Spring Boot, I use the following bean to set the default language for the client:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic LocaleResolver localeResolver() {\n    SessionLocaleResolver localeResolver = new SessionLocaleResolver();\n    localeResolver.setLocaleAttributeName(&quot;user_locale&quot;); // Not strictly needed\n    localeResolver.setDefaultLocale(Locale.ENGLISH);\n    return localeResolver;\n}\n</code></pre>\n<p>How could I modify it to take the client's language, and check whether it is in the list of supported languages, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>private List&lt;Locale&gt; LOCALES = Arrays.asList(new Locale(&quot;en&quot;), new Locale(&quot;de&quot;), new Locale(&quot;fr&quot;), new Locale(&quot;sp&quot;), new Locale(&quot;it&quot;));\n</code></pre>\n<p>and then set the locale using something like</p>\n<pre class=\"lang-java prettyprint-override\"><code>return locales.contains(locale) ? locale : Locale.ENGLISH;\n</code></pre>\n<p>Notice that this should happen every time a session is initiated.</p>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1691306534,"post_id":76840799,"comment_id":135472027,"body_markdown":"Using jwts as session is dangerous and writing custom security filters is bad practice. Whatever blogpost you have followed has no idea how security works. Please read the spring security docs","body":"Using jwts as session is dangerous and writing custom security filters is bad practice. Whatever blogpost you have followed has no idea how security works. Please read the spring security docs"},{"owner":{"account_id":22305597,"reputation":111,"user_id":16530311,"display_name":"Chinedu"},"score":0,"creation_date":1691332262,"post_id":76840799,"comment_id":135474413,"body_markdown":"Please explain to me how writing custom security filters is bad practice. You mean extending a base class such as OncePerRequestFilter is bad practice?","body":"Please explain to me how writing custom security filters is bad practice. You mean extending a base class such as OncePerRequestFilter is bad practice?"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1691344032,"post_id":76840799,"comment_id":135475797,"body_markdown":"No as i wrote, using jwts as sessions is insecure. There is no such filter already in spring security just because using jwts as sessions is very insecure. But you instead wrote a custom filter so that you could use a jwt as a session. Jwts where never meant to used as a session, for that you use cookies. You only need to google why jwts shouldnt be used as sessions to understand why. Stop using jwts the way you are doing and instead use formlogin from spring security and read the documentation instead of poor blogposts","body":"No as i wrote, using jwts as sessions is insecure. There is no such filter already in spring security just because using jwts as sessions is very insecure. But you instead wrote a custom filter so that you could use a jwt as a session. Jwts where never meant to used as a session, for that you use cookies. You only need to google why jwts shouldnt be used as sessions to understand why. Stop using jwts the way you are doing and instead use formlogin from spring security and read the documentation instead of poor blogposts"}],"owner":{"account_id":22305597,"reputation":111,"user_id":16530311,"display_name":"Chinedu"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":100,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691224679,"creation_date":1691224679,"question_id":76840799,"body_markdown":"I declared two protected endpoints `forAdmin()` and `forUser()` for users with User and Admin roles respectively. When an admin user is authenticated, they can access `forAdmin()`. Also, a user with the user role can access `forUser()` when authenticated. But if an admin tries to access `forUser()` resource, the application would return `401 unauthorization` meaning the user has yet to be authenticated, instead of ` 403 access denied`. I would like to know how to fix this please.\r\n\r\n`config files:`\r\n```\r\n@Configuration\r\n//@EnableMethodSecurity(prePostEnabled = true)\r\n@EnableWebSecurity\r\npublic class WebSecurityConfiguration {\r\n\r\n\tprivate JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\r\n\r\n\tprivate JwtRequestFilter jwtRequestFilter;\r\n\t\r\n\tprivate CustomUserDetailsService jwtService;\r\n\t\r\n\tprivate static final String[] ALLOWED_ACCESS = {&quot;/authenticate&quot;, &quot;/registerNewUser&quot;};\r\n\r\n\t@Autowired\r\n\tpublic WebSecurityConfiguration(JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint,\r\n\t\t\tJwtRequestFilter jwtRequestFilter, CustomUserDetailsService jwtService) {\r\n\r\n\t\tthis.jwtAuthenticationEntryPoint = jwtAuthenticationEntryPoint;\r\n\t\tthis.jwtRequestFilter = jwtRequestFilter;\r\n        this.jwtService = jwtService;\r\n\t}\r\n\r\n\t\r\n\t@Bean\r\n\tAuthenticationManager authenticationManagerBean(AuthenticationConfiguration authenticationConfiguration)\r\n\t\t\tthrows Exception {\r\n\r\n\t\treturn authenticationConfiguration.getAuthenticationManager();\r\n\t}\r\n\r\n\t@Bean\r\n\tprotected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\r\n\r\n\t\thttp.csrf((csrf) -&gt; csrf.disable()).cors(cors -&gt; {\r\n\t\t}).authorizeHttpRequests((authz) -&gt; {\r\n\t\t\tauthz.requestMatchers(&quot;/forAdmin&quot;).hasRole(&quot;Admin&quot;);\r\n\t\t\tauthz.requestMatchers(&quot;/forUser&quot;).hasRole(&quot;User&quot;);\r\n\t\t\tauthz.requestMatchers(ALLOWED_ACCESS).permitAll();\r\n\t\t\t\r\n\t\t})\r\n\t\t\t\t.authorizeHttpRequests((authz) -&gt; authz.anyRequest().authenticated())\r\n\t\t\t\t.exceptionHandling(\r\n\t\t\t\t\t\t(exceptionHandling) -&gt; {\r\n\t\t\t\t\t\t\texceptionHandling.accessDeniedHandler(new CustomAccessDeniedHandler());\r\n\t\t\t\t\t\t\texceptionHandling.authenticationEntryPoint(jwtAuthenticationEntryPoint);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t})\r\n\t\t\t\t.sessionManagement((sessionManagement) -&gt; sessionManagement\r\n\t\t\t\t\t\t.sessionCreationPolicy(SessionCreationPolicy.STATELESS));\r\n\r\n\t\t\r\n\t\thttp.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\r\n\r\n\t\treturn http.build();\r\n\t}\r\n\t\r\n\tpublic void configureGlobal(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\r\n\t\t authenticationManagerBuilder.userDetailsService(jwtService).passwordEncoder(passwordEncoder());\r\n\t}\r\n\t\r\n\t@Bean\r\n\tpublic PasswordEncoder passwordEncoder() {\r\n\t\t\r\n\t\treturn new BCryptPasswordEncoder();\r\n\t}\r\n\t\r\n\t\t\r\n}\r\n```\r\nAuthentication entry point:\r\n```\r\n@Configuration\r\npublic class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint {\r\n\r\n\t@Override\r\n\tpublic void commence(HttpServletRequest request, HttpServletResponse response,\r\n\t\t\tAuthenticationException authException) throws IOException, ServletException {\r\n\t\t\r\n\t\tresponse.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Unauthorized&quot;);\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\nAccess denied:\r\n```\r\n@Configuration\r\npublic class CustomAccessDeniedHandler implements AccessDeniedHandler {\r\n\r\n\t@Override\r\n\tpublic void handle(HttpServletRequest request, HttpServletResponse response,\r\n\t\t\tAccessDeniedException accessDeniedException) throws IOException, ServletException {\r\n\t\t\r\n\t\tresponse.sendError(HttpServletResponse.SC_FORBIDDEN);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n`\r\nFilter class:\r\n`\r\n\r\n```\r\n@Component\r\npublic class JwtRequestFilter extends OncePerRequestFilter {\r\n\r\n\tprivate JwtUtil jwtUtil;\r\n\r\n\tprivate CustomUserDetailsService jwtService;\r\n\r\n\t@Autowired\r\n\tpublic JwtRequestFilter(JwtUtil jwtUtil, CustomUserDetailsService jwtService) {\r\n\r\n\t\tthis.jwtUtil = jwtUtil;\r\n\t\tthis.jwtService = jwtService;\r\n\t}\r\n\r\n\t@Override\r\n\tprotected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\r\n\t\t\tthrows ServletException, IOException {\r\n\r\n\t\tfinal String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\r\n\r\n\t\tString username = null;\r\n\t\tString jwtToken = null;\r\n\r\n\t\tif (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\r\n\r\n\t\t\tjwtToken = requestTokenHeader.substring(7);\r\n\t\t\ttry {\r\n\t\t\t\tusername = jwtUtil.getUsernameFromToken(jwtToken);\r\n\r\n\t\t\t} catch (IllegalArgumentException e) {\r\n\t\t\t\tSystem.out.println(&quot;Unable to get JWT Token&quot;);\r\n\t\t\t} catch (ExpiredJwtException e) {\r\n\t\t\t\tSystem.out.println(&quot;JWT Token has expired&quot;);\r\n\t\t\t} catch (SignatureException e) {\r\n\t\t\t\tSystem.out.println(&quot;Invalid token&quot;);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tSystem.out.println(&quot;JWT token does not start with Bearer&quot;);\r\n\t\t}\r\n\r\n\t\tif (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n\r\n\t\t\tUserDetails userDetails = jwtService.loadUserByUsername(username);\r\n\r\n\t\t\tif (jwtUtil.validateToken(jwtToken, userDetails)) {\r\n\r\n\t\t\t\tUsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\r\n\t\t\t\t\t\tuserDetails, null, userDetails.getAuthorities());\r\n\t\t\t\tusernamePasswordAuthenticationToken\r\n\t\t\t\t\t\t.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\r\n\t\t\t\tSecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t\tfilterChain.doFilter(request, response);\r\n\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\nProtected resource:\r\n```\r\n\r\n@RestController\r\npublic class UserController {\r\n\t\r\n\t@Autowired\r\n\tprivate UserService userService;\r\n\t\r\n\t\r\n\t\r\n\t@GetMapping({&quot;/forAdmin&quot;})\r\n\t//@PreAuthorize(&quot;hasRole(&#39;Admin&#39;)&quot;)\r\n\tpublic String forAdmin() {\r\n\t\t\r\n\t\treturn &quot;You&#39;re an Admin&quot;;\r\n\t}\r\n\t\r\n\t@GetMapping({&quot;/forUser&quot;})\r\n\t//@PreAuthorize(&quot;hasRole(&#39;User&#39;)&quot;)\r\n\tpublic String forUser() {\r\n\t\t\r\n\t\treturn &quot;You&#39;re a user&quot;;\r\n\t}\r\n\t\r\n\t\r\n\r\n}\r\n\r\n```","title":"Spring security returns 401 unauthorized code for authenticated users trying access protectd resource instead of 403 access denied","body":"<p>I declared two protected endpoints <code>forAdmin()</code> and <code>forUser()</code> for users with User and Admin roles respectively. When an admin user is authenticated, they can access <code>forAdmin()</code>. Also, a user with the user role can access <code>forUser()</code> when authenticated. But if an admin tries to access <code>forUser()</code> resource, the application would return <code>401 unauthorization</code> meaning the user has yet to be authenticated, instead of <code> 403 access denied</code>. I would like to know how to fix this please.</p>\n<p><code>config files:</code></p>\n<pre><code>@Configuration\n//@EnableMethodSecurity(prePostEnabled = true)\n@EnableWebSecurity\npublic class WebSecurityConfiguration {\n\n    private JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint;\n\n    private JwtRequestFilter jwtRequestFilter;\n    \n    private CustomUserDetailsService jwtService;\n    \n    private static final String[] ALLOWED_ACCESS = {&quot;/authenticate&quot;, &quot;/registerNewUser&quot;};\n\n    @Autowired\n    public WebSecurityConfiguration(JwtAuthenticationEntryPoint jwtAuthenticationEntryPoint,\n            JwtRequestFilter jwtRequestFilter, CustomUserDetailsService jwtService) {\n\n        this.jwtAuthenticationEntryPoint = jwtAuthenticationEntryPoint;\n        this.jwtRequestFilter = jwtRequestFilter;\n        this.jwtService = jwtService;\n    }\n\n    \n    @Bean\n    AuthenticationManager authenticationManagerBean(AuthenticationConfiguration authenticationConfiguration)\n            throws Exception {\n\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n    @Bean\n    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n\n        http.csrf((csrf) -&gt; csrf.disable()).cors(cors -&gt; {\n        }).authorizeHttpRequests((authz) -&gt; {\n            authz.requestMatchers(&quot;/forAdmin&quot;).hasRole(&quot;Admin&quot;);\n            authz.requestMatchers(&quot;/forUser&quot;).hasRole(&quot;User&quot;);\n            authz.requestMatchers(ALLOWED_ACCESS).permitAll();\n            \n        })\n                .authorizeHttpRequests((authz) -&gt; authz.anyRequest().authenticated())\n                .exceptionHandling(\n                        (exceptionHandling) -&gt; {\n                            exceptionHandling.accessDeniedHandler(new CustomAccessDeniedHandler());\n                            exceptionHandling.authenticationEntryPoint(jwtAuthenticationEntryPoint);\n                            \n                        })\n                .sessionManagement((sessionManagement) -&gt; sessionManagement\n                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS));\n\n        \n        http.addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class);\n\n        return http.build();\n    }\n    \n    public void configureGlobal(AuthenticationManagerBuilder authenticationManagerBuilder) throws Exception {\n         authenticationManagerBuilder.userDetailsService(jwtService).passwordEncoder(passwordEncoder());\n    }\n    \n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        \n        return new BCryptPasswordEncoder();\n    }\n    \n        \n}\n</code></pre>\n<p>Authentication entry point:</p>\n<pre><code>@Configuration\npublic class JwtAuthenticationEntryPoint implements AuthenticationEntryPoint {\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response,\n            AuthenticationException authException) throws IOException, ServletException {\n        \n        response.sendError(HttpServletResponse.SC_UNAUTHORIZED, &quot;Unauthorized&quot;);\n\n    }\n\n}\n\n</code></pre>\n<p>Access denied:</p>\n<pre><code>@Configuration\npublic class CustomAccessDeniedHandler implements AccessDeniedHandler {\n\n    @Override\n    public void handle(HttpServletRequest request, HttpServletResponse response,\n            AccessDeniedException accessDeniedException) throws IOException, ServletException {\n        \n        response.sendError(HttpServletResponse.SC_FORBIDDEN);\n    }\n\n}\n\n</code></pre>\n<p><code>Filter class:</code></p>\n<pre><code>@Component\npublic class JwtRequestFilter extends OncePerRequestFilter {\n\n    private JwtUtil jwtUtil;\n\n    private CustomUserDetailsService jwtService;\n\n    @Autowired\n    public JwtRequestFilter(JwtUtil jwtUtil, CustomUserDetailsService jwtService) {\n\n        this.jwtUtil = jwtUtil;\n        this.jwtService = jwtService;\n    }\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain)\n            throws ServletException, IOException {\n\n        final String requestTokenHeader = request.getHeader(&quot;Authorization&quot;);\n\n        String username = null;\n        String jwtToken = null;\n\n        if (requestTokenHeader != null &amp;&amp; requestTokenHeader.startsWith(&quot;Bearer &quot;)) {\n\n            jwtToken = requestTokenHeader.substring(7);\n            try {\n                username = jwtUtil.getUsernameFromToken(jwtToken);\n\n            } catch (IllegalArgumentException e) {\n                System.out.println(&quot;Unable to get JWT Token&quot;);\n            } catch (ExpiredJwtException e) {\n                System.out.println(&quot;JWT Token has expired&quot;);\n            } catch (SignatureException e) {\n                System.out.println(&quot;Invalid token&quot;);\n            }\n        } else {\n            System.out.println(&quot;JWT token does not start with Bearer&quot;);\n        }\n\n        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n\n            UserDetails userDetails = jwtService.loadUserByUsername(username);\n\n            if (jwtUtil.validateToken(jwtToken, userDetails)) {\n\n                UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = new UsernamePasswordAuthenticationToken(\n                        userDetails, null, userDetails.getAuthorities());\n                usernamePasswordAuthenticationToken\n                        .setDetails(new WebAuthenticationDetailsSource().buildDetails(request));\n                SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n\n            }\n        }\n        filterChain.doFilter(request, response);\n\n    }\n\n}\n\n</code></pre>\n<p>Protected resource:</p>\n<pre><code>\n@RestController\npublic class UserController {\n    \n    @Autowired\n    private UserService userService;\n    \n    \n    \n    @GetMapping({&quot;/forAdmin&quot;})\n    //@PreAuthorize(&quot;hasRole('Admin')&quot;)\n    public String forAdmin() {\n        \n        return &quot;You're an Admin&quot;;\n    }\n    \n    @GetMapping({&quot;/forUser&quot;})\n    //@PreAuthorize(&quot;hasRole('User')&quot;)\n    public String forUser() {\n        \n        return &quot;You're a user&quot;;\n    }\n    \n    \n\n}\n\n</code></pre>\n"},{"tags":["java","jpa","jdbc"],"comments":[{"owner":{"display_name":"user330315"},"score":3,"creation_date":1344509079,"post_id":11881548,"comment_id":15809842,"body_markdown":"Why not start with the JDBC tutorial: http://docs.oracle.com/javase/tutorial/jdbc/index.html","body":"Why not start with the JDBC tutorial: <a href=\"http://docs.oracle.com/javase/tutorial/jdbc/index.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/jdbc/index.html</a>"},{"owner":{"account_id":181890,"reputation":17919,"user_id":416206,"accept_rate":40,"display_name":"James"},"score":2,"creation_date":1344517268,"post_id":11881548,"comment_id":15813683,"body_markdown":"JPA can be used without EJB or even Java EE, you can create an EntityManagerFactory directly from Persistence.","body":"JPA can be used without EJB or even Java EE, you can create an EntityManagerFactory directly from Persistence."}],"answers":[{"tags":[],"owner":{"account_id":1218264,"reputation":2414,"user_id":1185432,"accept_rate":91,"display_name":"gkuzmin"},"comment_count":0,"down_vote_count":0,"up_vote_count":83,"is_accepted":false,"score":83,"last_activity_date":1354460266,"creation_date":1344509166,"answer_id":11881666,"question_id":11881548,"body_markdown":"Main difference between JPA and JDBC is level of abstraction.\r\n\r\nJDBC is a low level standard for interaction with databases. JPA is higher level standard for the same purpose. JPA allows you to use an object model in your application which can make your life much easier. JDBC allows you to do more things with the Database directly, but it requires more attention. Some tasks can not be solved efficiently using JPA, but may be solved more efficiently with JDBC. ","title":"JPA or JDBC, how are they different?","body":"<p>Main difference between JPA and JDBC is level of abstraction.</p>\n\n<p>JDBC is a low level standard for interaction with databases. JPA is higher level standard for the same purpose. JPA allows you to use an object model in your application which can make your life much easier. JDBC allows you to do more things with the Database directly, but it requires more attention. Some tasks can not be solved efficiently using JPA, but may be solved more efficiently with JDBC. </p>\n"},{"comments":[{"owner":{"account_id":40939,"reputation":41535,"user_id":118846,"display_name":"Mikko Maunu"},"score":7,"creation_date":1344511850,"post_id":11881732,"comment_id":15810998,"body_markdown":"iBatis (nowadays MyBatis) is not an JPA implementation. If you take a look to it, you will notice that it does have very different concept.","body":"iBatis (nowadays MyBatis) is not an JPA implementation. If you take a look to it, you will notice that it does have very different concept."},{"owner":{"account_id":159566,"reputation":5418,"user_id":379039,"accept_rate":77,"display_name":"Mark D"},"score":0,"creation_date":1344514942,"post_id":11881732,"comment_id":15812505,"body_markdown":"thanks! My mistake, I thought it implemented JPA, corrected now!","body":"thanks! My mistake, I thought it implemented JPA, corrected now!"},{"owner":{"account_id":26568,"reputation":15517,"user_id":69258,"display_name":"DataNucleus"},"score":6,"creation_date":1344519718,"post_id":11881732,"comment_id":15814949,"body_markdown":"Not all JPA providers write SQL and use JDBC ... since they may persist to a &quot;different type of datastore&quot; (MongoDB, Neo4j, etc). DataNucleus JPA is one such example","body":"Not all JPA providers write SQL and use JDBC ... since they may persist to a &quot;different type of datastore&quot; (MongoDB, Neo4j, etc). DataNucleus JPA is one such example"},{"owner":{"account_id":159566,"reputation":5418,"user_id":379039,"accept_rate":77,"display_name":"Mark D"},"score":0,"creation_date":1349007360,"post_id":11881732,"comment_id":17081778,"body_markdown":"true DataNucleus.. there are even ones for excel, etc - the original questions was JDBC/JPA so I rightly or wrongly assumed he was interested in relational stores.","body":"true DataNucleus.. there are even ones for excel, etc - the original questions was JDBC/JPA so I rightly or wrongly assumed he was interested in relational stores."},{"owner":{"account_id":11375123,"reputation":3156,"user_id":8339668,"accept_rate":39,"display_name":"Code Complete"},"score":0,"creation_date":1606223538,"post_id":11881732,"comment_id":114893122,"body_markdown":"Wikipedia (MyBatis): &quot;Unlike ORM frameworks, MyBatis does not map Java objects to database tables but Java methods to SQL statements.&quot;","body":"Wikipedia (MyBatis): &quot;Unlike ORM frameworks, MyBatis does not map Java objects to database tables but Java methods to SQL statements.&quot;"}],"tags":[],"owner":{"account_id":159566,"reputation":5418,"user_id":379039,"accept_rate":77,"display_name":"Mark D"},"comment_count":5,"down_vote_count":0,"up_vote_count":336,"is_accepted":true,"score":336,"last_activity_date":1537956557,"creation_date":1344509366,"answer_id":11881732,"question_id":11881548,"body_markdown":"In layman&#39;s terms:\r\n\r\n - JDBC is a standard for Database Access\r\n - JPA is a standard for ORM\r\n\r\nJDBC is a standard for connecting to a DB directly and running SQL against it - e.g `SELECT * FROM USERS`, etc.  Data sets can be returned which you can handle in your app, and you can do all the usual things like `INSERT`, `DELETE`, run stored procedures, etc.  It is one of the underlying technologies behind most Java database access (including JPA providers).\r\n\r\nOne of the issues with traditional JDBC apps is that you can often have some crappy code where lots of mapping between data sets and objects occur, logic is mixed in with SQL, etc.\r\n\r\nJPA is a standard for Object Relational Mapping. This is a technology which allows you to map between objects in code and database tables.  This can &quot;hide&quot; the SQL from the developer so that all they deal with are Java classes, and the provider allows you to save them and load them magically.  Mostly, XML mapping files or annotations on getters and setters can be used to tell the JPA provider which fields on your object map to which fields in the DB.  The most famous JPA provider is [Hibernate](https://hibernate.org/), so it&#39;s a good place to start for concrete examples.\r\n\r\nOther examples include OpenJPA, toplink, etc.\r\n\r\nUnder the hood, Hibernate and most other providers for JPA write SQL and use JDBC to read and write from and to the DB.\r\n","title":"JPA or JDBC, how are they different?","body":"<p>In layman's terms:</p>\n\n<ul>\n<li>JDBC is a standard for Database Access</li>\n<li>JPA is a standard for ORM</li>\n</ul>\n\n<p>JDBC is a standard for connecting to a DB directly and running SQL against it - e.g <code>SELECT * FROM USERS</code>, etc.  Data sets can be returned which you can handle in your app, and you can do all the usual things like <code>INSERT</code>, <code>DELETE</code>, run stored procedures, etc.  It is one of the underlying technologies behind most Java database access (including JPA providers).</p>\n\n<p>One of the issues with traditional JDBC apps is that you can often have some crappy code where lots of mapping between data sets and objects occur, logic is mixed in with SQL, etc.</p>\n\n<p>JPA is a standard for Object Relational Mapping. This is a technology which allows you to map between objects in code and database tables.  This can \"hide\" the SQL from the developer so that all they deal with are Java classes, and the provider allows you to save them and load them magically.  Mostly, XML mapping files or annotations on getters and setters can be used to tell the JPA provider which fields on your object map to which fields in the DB.  The most famous JPA provider is <a href=\"https://hibernate.org/\" rel=\"noreferrer\">Hibernate</a>, so it's a good place to start for concrete examples.</p>\n\n<p>Other examples include OpenJPA, toplink, etc.</p>\n\n<p>Under the hood, Hibernate and most other providers for JPA write SQL and use JDBC to read and write from and to the DB.</p>\n"},{"comments":[{"owner":{"account_id":544312,"reputation":507,"user_id":913717,"accept_rate":80,"display_name":"Bruce Zu"},"score":0,"creation_date":1474214454,"post_id":11881739,"comment_id":66429825,"body_markdown":"&quot;without a Java EE container??&quot; Do you mean Spring and its libraries is independent of  web container?","body":"&quot;without a Java EE container??&quot; Do you mean Spring and its libraries is independent of  web container?"},{"owner":{"account_id":383569,"reputation":1052,"user_id":739505,"accept_rate":100,"display_name":"Dolfiz"},"score":0,"creation_date":1484731696,"post_id":11881739,"comment_id":70626054,"body_markdown":"@BruceZu Of course it is. You can use many of the Spring framework components with no need of a web container. Dependency injection, for example, is not something you need only on a web context.","body":"@BruceZu Of course it is. You can use many of the Spring framework components with no need of a web container. Dependency injection, for example, is not something you need only on a web context."},{"owner":{"account_id":4006340,"reputation":1493,"user_id":3300911,"accept_rate":56,"display_name":"raikumardipak"},"score":1,"creation_date":1536123991,"post_id":11881739,"comment_id":91304943,"body_markdown":"@Dolfiz isn&#39;t the spring web libraries a wrapper over the Java Web and Java EE libraries?","body":"@Dolfiz isn&#39;t the spring web libraries a wrapper over the Java Web and Java EE libraries?"}],"tags":[],"owner":{"account_id":1733886,"reputation":1028,"user_id":1586874,"display_name":"Pawel Solarski"},"comment_count":3,"down_vote_count":1,"up_vote_count":16,"is_accepted":false,"score":15,"last_activity_date":1344725026,"creation_date":1344509402,"answer_id":11881739,"question_id":11881548,"body_markdown":"JDBC is the predecessor of JPA. \r\n\r\nJDBC is a bridge between the Java world and the databases world. In JDBC you need to expose all dirty details needed for CRUD operations, such as table names, column names, while in JPA (which is using JDBC underneath), you also specify those details of database metadata, but with the use of Java annotations. \r\n\r\nSo JPA creates update queries for you and manages the entities that you looked up or created/updated (it does more as well).\r\n\r\nIf you want to do JPA without a Java EE container, then Spring and its libraries may be used with the very same Java annotations.\r\n","title":"JPA or JDBC, how are they different?","body":"<p>JDBC is the predecessor of JPA. </p>\n\n<p>JDBC is a bridge between the Java world and the databases world. In JDBC you need to expose all dirty details needed for CRUD operations, such as table names, column names, while in JPA (which is using JDBC underneath), you also specify those details of database metadata, but with the use of Java annotations. </p>\n\n<p>So JPA creates update queries for you and manages the entities that you looked up or created/updated (it does more as well).</p>\n\n<p>If you want to do JPA without a Java EE container, then Spring and its libraries may be used with the very same Java annotations.</p>\n"},{"tags":[],"owner":{"account_id":398303,"reputation":27194,"user_id":762913,"accept_rate":75,"display_name":"pap"},"comment_count":0,"down_vote_count":0,"up_vote_count":27,"is_accepted":false,"score":27,"last_activity_date":1344509576,"creation_date":1344509576,"answer_id":11881802,"question_id":11881548,"body_markdown":"JDBC is a much lower-level (and older) specification than JPA. In it&#39;s bare essentials, JDBC is an API for interacting with a database using pure SQL - sending queries and retrieving results. It has no notion of objects or hierarchies. When using JDBC, it&#39;s up to you to translate a result set (essentially a row/column matrix of values from one or more database tables, returned by your SQL query) into Java objects.\r\n\r\nNow, to understand and use JDBC it&#39;s essential that you have some understanding and working knowledge of SQL. With that also comes a required insight into what a relational database is, how you work with it and concepts such as tables, columns, keys and relationships. Unless you have at least a basic understanding of databases, SQL and data modelling you will not be able to make much use of JDBC since it&#39;s really only a thin abstraction on top of these things.","title":"JPA or JDBC, how are they different?","body":"<p>JDBC is a much lower-level (and older) specification than JPA. In it's bare essentials, JDBC is an API for interacting with a database using pure SQL - sending queries and retrieving results. It has no notion of objects or hierarchies. When using JDBC, it's up to you to translate a result set (essentially a row/column matrix of values from one or more database tables, returned by your SQL query) into Java objects.</p>\n\n<p>Now, to understand and use JDBC it's essential that you have some understanding and working knowledge of SQL. With that also comes a required insight into what a relational database is, how you work with it and concepts such as tables, columns, keys and relationships. Unless you have at least a basic understanding of databases, SQL and data modelling you will not be able to make much use of JDBC since it's really only a thin abstraction on top of these things.</p>\n"},{"comments":[{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":1,"creation_date":1653290632,"post_id":72344413,"comment_id":127806076,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/72344413/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."}],"tags":[],"owner":{"account_id":23400777,"reputation":13,"user_id":17463971,"display_name":"Sanket Goti"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1653295455,"creation_date":1653289382,"answer_id":72344413,"question_id":11881548,"body_markdown":"The difference between JPA and JDBC is often the deciding factor, as the two database technologies take very different approaches to work with persistent data. JDBC, allows developers to construct database-driven Java programs utilizing object-oriented semantics\r\n\r\nJPA is database-agnostic, meaning that the same code can be used in a variety of databases with few modifications. JPA serves as a layer of abstraction that hides the low-level JDBC calls from the developer, making database coding considerably easier\r\n\r\nhibernate is implementation of JPA \r\n[hibernate][1] you can see further details from here about jpa Query\r\n\r\n\r\n  [1]: https://hibernate.org/","title":"JPA or JDBC, how are they different?","body":"<p>The difference between JPA and JDBC is often the deciding factor, as the two database technologies take very different approaches to work with persistent data. JDBC, allows developers to construct database-driven Java programs utilizing object-oriented semantics</p>\n<p>JPA is database-agnostic, meaning that the same code can be used in a variety of databases with few modifications. JPA serves as a layer of abstraction that hides the low-level JDBC calls from the developer, making database coding considerably easier</p>\n<p>hibernate is implementation of JPA\n<a href=\"https://hibernate.org/\" rel=\"nofollow noreferrer\">hibernate</a> you can see further details from here about jpa Query</p>\n"},{"tags":[],"owner":{"account_id":179957,"reputation":1300,"user_id":412965,"display_name":"raiks"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1665050418,"creation_date":1665049981,"answer_id":73971850,"question_id":11881548,"body_markdown":"JDBC is a layer of abstraction on top of vendor-specific relational DB drivers. Without JDBC you would have to deal with peculiarities of a specific DB (not much fun). JDBC, however, is too low-level and entails a lot of boilerplate code.\r\n\r\nJPA is a specification of an ORM (just an interface). It&#39;s useless without an implementation.\r\n\r\nORM is a kind of framework concerned with saving and retrieving objects to/from the relational DB. There are many ORMs out there with different levels of abstraction. Some of them require manually-written SQL.\r\n\r\n*Some* of ORMs implement JPA (Hibernate or EclipseLink, for example). *Most* of them are built on top of JDBC. \r\n\r\nSuch ORMs provide the maximum level of abstraction to the point you almost never have to write SQL queries. Some people love JPA-based ORMs (they reduce boilerplate), some hate (abstraction is leaky, specification is overly complex and there are lots of corner cases). \r\n\r\nJava analogy:\r\n\r\n    class ORM extends JDBC implements JPA {\r\n    }","title":"JPA or JDBC, how are they different?","body":"<p>JDBC is a layer of abstraction on top of vendor-specific relational DB drivers. Without JDBC you would have to deal with peculiarities of a specific DB (not much fun). JDBC, however, is too low-level and entails a lot of boilerplate code.</p>\n<p>JPA is a specification of an ORM (just an interface). It's useless without an implementation.</p>\n<p>ORM is a kind of framework concerned with saving and retrieving objects to/from the relational DB. There are many ORMs out there with different levels of abstraction. Some of them require manually-written SQL.</p>\n<p><em>Some</em> of ORMs implement JPA (Hibernate or EclipseLink, for example). <em>Most</em> of them are built on top of JDBC.</p>\n<p>Such ORMs provide the maximum level of abstraction to the point you almost never have to write SQL queries. Some people love JPA-based ORMs (they reduce boilerplate), some hate (abstraction is leaky, specification is overly complex and there are lots of corner cases).</p>\n<p>Java analogy:</p>\n<pre><code>class ORM extends JDBC implements JPA {\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":15553689,"reputation":149,"user_id":11220723,"display_name":"TomaÅ¾ Majerhold"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1675356064,"creation_date":1675356064,"answer_id":75326309,"question_id":11881548,"body_markdown":"Persistence layers have protocols versions so abstractions also have versions therefore you need ranges of supported versions. It is version hell","title":"JPA or JDBC, how are they different?","body":"<p>Persistence layers have protocols versions so abstractions also have versions therefore you need ranges of supported versions. It is version hell</p>\n"}],"owner":{"account_id":539830,"reputation":3228,"user_id":907810,"accept_rate":51,"display_name":"user907810"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":165149,"favorite_count":0,"down_vote_count":2,"up_vote_count":168,"accepted_answer_id":11881732,"answer_count":7,"score":166,"last_activity_date":1691224120,"creation_date":1344508700,"question_id":11881548,"body_markdown":"I am learning Java EE and I downloaded the eclipse with glassfish for the same. I saw some examples and also read the Oracle docs to know all about Java EE 5. Connecting to a database was very simple. I opened a dynamic web project, created a session EJB ,  I used EntityManager and with the get methods could access the stored data table.\r\n\r\nFor my next project I had create a simple class and then access some DB table. The very first problem I encountered was that the PersistenceUnit attribute would only be recognized by EJB,Servlet etc and not a simple java class. So then I could not use the EntityManager way(or can I?) \r\n\r\nI was asked to go via the &quot;JDBC&quot; way. The very first problem I encountered was to get the connection to the DB. It seems all this must be hardcoded. I had a persistence.xml with which I could easily configure the data base connection. Even setting up a driver for the DB was easy. Also there no get/set methods in the JDBC for accessing table entities.\r\n\r\nHow do I understand JPA and persistence in relation to JDBC? What was JPA thought for? Why is there set/get methods? Can someone throw some light on the essence of these two and what are the pros/cons without &quot;jargons&quot;?? Please also suggest some links. A simple google search for JPA and JDBC differences led me to some sites full of &quot;terminology&quot; I couldn&#39;t follow :(","title":"JPA or JDBC, how are they different?","body":"<p>I am learning Java EE and I downloaded the eclipse with glassfish for the same. I saw some examples and also read the Oracle docs to know all about Java EE 5. Connecting to a database was very simple. I opened a dynamic web project, created a session EJB ,  I used EntityManager and with the get methods could access the stored data table.</p>\n\n<p>For my next project I had create a simple class and then access some DB table. The very first problem I encountered was that the PersistenceUnit attribute would only be recognized by EJB,Servlet etc and not a simple java class. So then I could not use the EntityManager way(or can I?) </p>\n\n<p>I was asked to go via the \"JDBC\" way. The very first problem I encountered was to get the connection to the DB. It seems all this must be hardcoded. I had a persistence.xml with which I could easily configure the data base connection. Even setting up a driver for the DB was easy. Also there no get/set methods in the JDBC for accessing table entities.</p>\n\n<p>How do I understand JPA and persistence in relation to JDBC? What was JPA thought for? Why is there set/get methods? Can someone throw some light on the essence of these two and what are the pros/cons without \"jargons\"?? Please also suggest some links. A simple google search for JPA and JDBC differences led me to some sites full of \"terminology\" I couldn't follow :(</p>\n"},{"tags":["java","date","simpledateformat","java-17"],"comments":[{"owner":{"account_id":2803497,"reputation":25202,"user_id":2411243,"display_name":"Zabuzard"},"score":1,"creation_date":1690381463,"post_id":76772254,"comment_id":135345845,"body_markdown":"Note that the classes ur using there are all outdated. Prefer using the stuff from `java.time` instead.","body":"Note that the classes ur using there are all outdated. Prefer using the stuff from <code>java.time</code> instead."},{"owner":{"account_id":5998820,"reputation":12676,"user_id":4712734,"display_name":"DuncG"},"score":1,"creation_date":1690383210,"post_id":76772254,"comment_id":135346335,"body_markdown":"What input are you using?","body":"What input are you using?"},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691171192,"post_id":76772254,"comment_id":135460836,"body_markdown":"Which is your default locale? Is it the same in your Java 17 installation as in your Java 8 installation? Also please at least post the full message from the exception.","body":"Which is your default locale? Is it the same in your Java 17 installation as in your Java 8 installation? Also please at least post the full message from the exception."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1691171488,"post_id":76772254,"comment_id":135460895,"body_markdown":"Javaâs locale data â including the abbreviations for months in different languages â changed a lot from Java 8 to Java 9 and have had further changes since. This is a probable explanation for your error, but without more details and a [mre] we canât tell whether it is the reason. See more in [this question](https://stackoverflow.com/questions/46244724/jdk-dateformater-parsing-dayofweek-in-german-locale-java8-vs-java9) and [this one](https://stackoverflow.com/questions/66394366/cannot-convert-from-spanish-date-string-to-localdate-in-java).","body":"Javaâs locale data â including the abbreviations for months in different languages â changed a lot from Java 8 to Java 9 and have had further changes since. This is a probable explanation for your error, but without more details and a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> we canât tell whether it is the reason. See more in <a href=\"https://stackoverflow.com/questions/46244724/jdk-dateformater-parsing-dayofweek-in-german-locale-java8-vs-java9\">this question</a> and <a href=\"https://stackoverflow.com/questions/66394366/cannot-convert-from-spanish-date-string-to-localdate-in-java\">this one</a>."}],"answers":[{"comments":[{"owner":{"account_id":960307,"reputation":107861,"user_id":984823,"display_name":"Joop Eggen"},"score":3,"creation_date":1690382154,"post_id":76772351,"comment_id":135346034,"body_markdown":"I think the unspecified locale cannot deal with MMM.","body":"I think the unspecified locale cannot deal with MMM."}],"tags":[],"owner":{"account_id":4228398,"reputation":17727,"user_id":3461397,"display_name":"Oleg Cherednik"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1691223665,"creation_date":1690381777,"answer_id":76772351,"question_id":76772254,"body_markdown":"For j**vm17** do use `java.time.*` instead.\r\n\r\n```java\r\npublic static String convert(String dateStr) {\r\n    LocalDate date = LocalDate.parse(dateStr, DateTimeFormatter.ofPattern(&quot;dd/MMM/yyyy&quot;, Locale.ENGLISH));\r\n    return date.format(DateTimeFormatter.BASIC_ISO_DATE, Locale.ENGLISH);\r\n}\r\n```\r\n\r\nAnd the client&#39;s code will look like this:\r\n```java\r\nString dateStr = &quot;22/Jul/2023&quot;;\r\nSystem.out.println(convert(dateStr));   // 20230722 \r\n```","title":"How to convert date from this format &quot;dd/MMM/yyyy&quot; to any other format with Java 17 version?","body":"<p>For j<strong>vm17</strong> do use <code>java.time.*</code> instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static String convert(String dateStr) {\n    LocalDate date = LocalDate.parse(dateStr, DateTimeFormatter.ofPattern(&quot;dd/MMM/yyyy&quot;, Locale.ENGLISH));\n    return date.format(DateTimeFormatter.BASIC_ISO_DATE, Locale.ENGLISH);\n}\n</code></pre>\n<p>And the client's code will look like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String dateStr = &quot;22/Jul/2023&quot;;\nSystem.out.println(convert(dateStr));   // 20230722 \n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1690399269,"creation_date":1690385321,"answer_id":76772867,"question_id":76772254,"body_markdown":"Unless it is a backward compatible requirement you should avoid the old Date classes and their supporting classes.  They are buggy and obsolete.\r\n\r\nFrom the `java.time` package.\r\n\r\nWhat you want is the BASIC_ISO_DATE which is predefined.  So all that is required is the `from` format.  Add locales as appropriate for your requirements.\r\n```\r\nString dateString = &quot;10/Jan/2023&quot;;\r\n \r\nDateTimeFormatter from = DateTimeFormatter.ofPattern(&quot;dd/MMM/yyyy&quot;, Locale.ENGLISH);\r\nLocalDate ldt = LocalDate.parse(dateString, from);\r\nString result = ldt.format(DateTimeFormatter.BASIC_ISO_DATE);\r\nSystem.out.println(result);\r\n```\r\nprints\r\n```\r\n20230110\r\n```\r\nCheck out the [java.time](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/package-summary.html) package for a rich set of classes to manipulate various dates and times.\r\n","title":"How to convert date from this format &quot;dd/MMM/yyyy&quot; to any other format with Java 17 version?","body":"<p>Unless it is a backward compatible requirement you should avoid the old Date classes and their supporting classes.  They are buggy and obsolete.</p>\n<p>From the <code>java.time</code> package.</p>\n<p>What you want is the BASIC_ISO_DATE which is predefined.  So all that is required is the <code>from</code> format.  Add locales as appropriate for your requirements.</p>\n<pre><code>String dateString = &quot;10/Jan/2023&quot;;\n \nDateTimeFormatter from = DateTimeFormatter.ofPattern(&quot;dd/MMM/yyyy&quot;, Locale.ENGLISH);\nLocalDate ldt = LocalDate.parse(dateString, from);\nString result = ldt.format(DateTimeFormatter.BASIC_ISO_DATE);\nSystem.out.println(result);\n</code></pre>\n<p>prints</p>\n<pre><code>20230110\n</code></pre>\n<p>Check out the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/package-summary.html\" rel=\"nofollow noreferrer\">java.time</a> package for a rich set of classes to manipulate various dates and times.</p>\n"}],"owner":{"account_id":4431669,"reputation":1,"user_id":3608694,"display_name":"user3608694"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":203,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":2,"score":-1,"last_activity_date":1691223665,"creation_date":1690381138,"question_id":76772254,"body_markdown":"I am  trying to convert date from this format &quot;dd/MMM/yyyy&quot; to &quot;yyyyMMdd&quot;,\r\nfor Java 1.8 version ,the code was working fine, my code is \r\n\r\n```\r\n       SimpleDateFormat inputFormat = new SimpleDateFormat(currentFormat);\r\n       SimpleDateFormat outputFormat = new SimpleDateFormat(newFormat);\r\n       Date date = inputFormat.parse(dateStr);\r\n       return outputFormat.format(date);\r\n```\r\n\r\n\r\nwhen i changed from Java 8 to java 17 , I am getting parse Exception. Please help, thanks","title":"How to convert date from this format &quot;dd/MMM/yyyy&quot; to any other format with Java 17 version?","body":"<p>I am  trying to convert date from this format &quot;dd/MMM/yyyy&quot; to &quot;yyyyMMdd&quot;,\nfor Java 1.8 version ,the code was working fine, my code is</p>\n<pre><code>       SimpleDateFormat inputFormat = new SimpleDateFormat(currentFormat);\n       SimpleDateFormat outputFormat = new SimpleDateFormat(newFormat);\n       Date date = inputFormat.parse(dateStr);\n       return outputFormat.format(date);\n</code></pre>\n<p>when i changed from Java 8 to java 17 , I am getting parse Exception. Please help, thanks</p>\n"},{"tags":["java","macos","swing","awt"],"answers":[{"comments":[{"owner":{"account_id":214241,"reputation":3384,"user_id":468102,"accept_rate":85,"display_name":"tyrondis"},"score":0,"creation_date":1690270355,"post_id":76755045,"comment_id":135325947,"body_markdown":"frame.setDefaultCloseOperation(HIDE_ON_CLOSE) seems to do what I want on Mac. However, once the window is minimised into the dock this way, it does not recover anymore. Do you happen to know how to achieve that as well?","body":"frame.setDefaultCloseOperation(HIDE_ON_CLOSE) seems to do what I want on Mac. However, once the window is minimised into the dock this way, it does not recover anymore. Do you happen to know how to achieve that as well?"},{"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"score":0,"creation_date":1690294720,"post_id":76755045,"comment_id":135331454,"body_markdown":"I don&#39;t use a Mac so I don&#39;t know what the issue would be.","body":"I don&#39;t use a Mac so I don&#39;t know what the issue would be."},{"owner":{"account_id":259805,"reputation":386,"user_id":542938,"display_name":"vivek"},"score":0,"creation_date":1690795432,"post_id":76755045,"comment_id":135397679,"body_markdown":"Did you try accessing the System Tray (where all the iconified windows lie) ?\nSomething like: https://stackoverflow.com/questions/28920423/show-jframe-when-tray-icon-was-clicked-even-if-minimized","body":"Did you try accessing the System Tray (where all the iconified windows lie) ? Something like: <a href=\"https://stackoverflow.com/questions/28920423/show-jframe-when-tray-icon-was-clicked-even-if-minimized\" title=\"show jframe when tray icon was clicked even if minimized\">stackoverflow.com/questions/28920423/&hellip;</a>"},{"owner":{"account_id":9337172,"reputation":1341,"user_id":6931023,"accept_rate":50,"display_name":"gladiator"},"score":1,"creation_date":1691050756,"post_id":76755045,"comment_id":135439824,"body_markdown":"https://stackoverflow.com/questions/70545936/implement-macos-hide-on-quit-behavior-with-jframe-swing\n\nthis should be helpful","body":"<a href=\"https://stackoverflow.com/questions/70545936/implement-macos-hide-on-quit-behavior-with-jframe-swing\" title=\"implement macos hide on quit behavior with jframe swing\">stackoverflow.com/questions/70545936/&hellip;</a>  this should be helpful"}],"tags":[],"owner":{"account_id":44852,"reputation":322224,"user_id":131872,"accept_rate":100,"display_name":"camickr"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690205730,"creation_date":1690205730,"answer_id":76755045,"question_id":76754167,"body_markdown":"Don&#39;t know if there is a better way but you can get the OS system by using:\r\n\r\n    System.getProperty(...);\r\n\r\nCheck out the `System.getProperties()` method for a list of valid properties to query, including the OS.\r\n\r\nThen once you have the OS you can use:\r\n\r\n    frame.setDefaultCloseOperation(...)\r\n\r\n","title":"How to close/hide/restore a Swing application according to the OS default behaviour","body":"<p>Don't know if there is a better way but you can get the OS system by using:</p>\n<pre><code>System.getProperty(...);\n</code></pre>\n<p>Check out the <code>System.getProperties()</code> method for a list of valid properties to query, including the OS.</p>\n<p>Then once you have the OS you can use:</p>\n<pre><code>frame.setDefaultCloseOperation(...)\n</code></pre>\n"},{"comments":[{"owner":{"account_id":214241,"reputation":3384,"user_id":468102,"accept_rate":85,"display_name":"tyrondis"},"score":0,"creation_date":1691223330,"post_id":76840605,"comment_id":135465443,"body_markdown":"This leads me to the same problem I already had with @camickr&#39;s solution. It hide/closes the window correctly, but once it is hidden, I cannot get it to display again.","body":"This leads me to the same problem I already had with @camickr&#39;s solution. It hide/closes the window correctly, but once it is hidden, I cannot get it to display again."},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":1,"creation_date":1691223508,"post_id":76840605,"comment_id":135465460,"body_markdown":"@tyrondis check my answer again plz","body":"@tyrondis check my answer again plz"},{"owner":{"account_id":214241,"reputation":3384,"user_id":468102,"accept_rate":85,"display_name":"tyrondis"},"score":0,"creation_date":1691231640,"post_id":76840605,"comment_id":135466246,"body_markdown":"getting there. Now it minimises and I can restore the window, however, it also displays the minimising animation on closing, which is not in line with how native apps behave.","body":"getting there. Now it minimises and I can restore the window, however, it also displays the minimising animation on closing, which is not in line with how native apps behave."},{"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"score":0,"creation_date":1691235043,"post_id":76840605,"comment_id":135466519,"body_markdown":"hmmm,the code is fine and should work as expected,when you run the `main()` method, it will create an instance of `MainFrame`, set its size and location, and make it visible on the screen...","body":"hmmm,the code is fine and should work as expected,when you run the <code>main()</code> method, it will create an instance of <code>MainFrame</code>, set its size and location, and make it visible on the screen..."}],"tags":[],"owner":{"account_id":92073,"reputation":1,"user_id":252518,"accept_rate":71,"display_name":"Freeman"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691223492,"creation_date":1691221155,"answer_id":76840605,"question_id":76754167,"body_markdown":" it&#39;s easy, just use the `WindowListener` interface to handle the window closing event and control the behavior based on the operating system, let me explain it with an example, in my example,the `MainFrame` class extends `JFrame` and sets the default close operation to `DO_NOTHING_ON_CLOSE` and the `WindowListener` is added to handle the window closing event!\r\n\r\ncheck this out: \r\n\r\n    import java.awt.event.WindowAdapter;\r\n    import java.awt.event.WindowEvent;\r\n    import javax.swing.JFrame;\r\n    import javax.swing.JOptionPane;\r\n    import javax.swing.SwingUtilities;\r\n    \r\n    public class MainFrame extends JFrame {\r\n    \r\n        public MainFrame() {\r\n            setTitle(&quot;YOUR APP&quot;);\r\n            setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);\r\n            addWindowListener(new WindowAdapter() {\r\n                @Override\r\n                public void windowClosing(WindowEvent e) {\r\n                    handleWindowClosing();\r\n                }\r\n            });\r\n        }\r\n    \r\n        private void handleWindowClosing() {\r\n            String os = System.getProperty(&quot;os.name&quot;).toLowerCase();\r\n            if (os.contains(&quot;mac&quot;)) {\r\n                // Minimize the window on Mac\r\n                setExtendedState(JFrame.ICONIFIED);\r\n            } else {\r\n                // Close the window on other platforms\r\n                dispose();\r\n            }\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n            SwingUtilities.invokeLater(() -&gt; {\r\n                MainFrame frame = new MainFrame();\r\n                frame.setSize(110, 110);\r\n                frame.setLocationRelativeTo(null);\r\n                frame.setVisible(true);\r\n            });\r\n        }\r\n    }","title":"How to close/hide/restore a Swing application according to the OS default behaviour","body":"<p>it's easy, just use the <code>WindowListener</code> interface to handle the window closing event and control the behavior based on the operating system, let me explain it with an example, in my example,the <code>MainFrame</code> class extends <code>JFrame</code> and sets the default close operation to <code>DO_NOTHING_ON_CLOSE</code> and the <code>WindowListener</code> is added to handle the window closing event!</p>\n<p>check this out:</p>\n<pre><code>import java.awt.event.WindowAdapter;\nimport java.awt.event.WindowEvent;\nimport javax.swing.JFrame;\nimport javax.swing.JOptionPane;\nimport javax.swing.SwingUtilities;\n\npublic class MainFrame extends JFrame {\n\n    public MainFrame() {\n        setTitle(&quot;YOUR APP&quot;);\n        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);\n        addWindowListener(new WindowAdapter() {\n            @Override\n            public void windowClosing(WindowEvent e) {\n                handleWindowClosing();\n            }\n        });\n    }\n\n    private void handleWindowClosing() {\n        String os = System.getProperty(&quot;os.name&quot;).toLowerCase();\n        if (os.contains(&quot;mac&quot;)) {\n            // Minimize the window on Mac\n            setExtendedState(JFrame.ICONIFIED);\n        } else {\n            // Close the window on other platforms\n            dispose();\n        }\n    }\n\n    public static void main(String[] args) {\n        SwingUtilities.invokeLater(() -&gt; {\n            MainFrame frame = new MainFrame();\n            frame.setSize(110, 110);\n            frame.setLocationRelativeTo(null);\n            frame.setVisible(true);\n        });\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":214241,"reputation":3384,"user_id":468102,"accept_rate":85,"display_name":"tyrondis"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76840605,"answer_count":2,"score":1,"last_activity_date":1691223492,"creation_date":1690199196,"question_id":76754167,"body_markdown":"On **Mac**, apps are expected to &quot;hide&quot; into the dock when clicking the &quot;x&quot; button on the window&#39;s title bar, and restore when being clicked on again in the dock.\r\n\r\nOn **Windows** and **Linux**, apps simply terminate upon clicking the &quot;x&quot; button.\r\n\r\nHow do I replicate this behaviour in a Java Swing application, depending on which operating system the user is on?","title":"How to close/hide/restore a Swing application according to the OS default behaviour","body":"<p>On <strong>Mac</strong>, apps are expected to &quot;hide&quot; into the dock when clicking the &quot;x&quot; button on the window's title bar, and restore when being clicked on again in the dock.</p>\n<p>On <strong>Windows</strong> and <strong>Linux</strong>, apps simply terminate upon clicking the &quot;x&quot; button.</p>\n<p>How do I replicate this behaviour in a Java Swing application, depending on which operating system the user is on?</p>\n"},{"tags":["java","messaging","vonage"],"answers":[{"tags":[],"owner":{"account_id":6507730,"reputation":89,"user_id":5036095,"display_name":"umaid ashraf"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691222877,"creation_date":1691222877,"answer_id":76840688,"question_id":76809614,"body_markdown":"https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/viewform\r\n\r\nI have found this form that we have to submit for user registration on Vonage. It&#39;s missing in Vonage documentation or maybe not clearly mentioned.\r\n","title":"Can we register new users in Vonage programmatically using Vonage API or SDK?","body":"<p><a href=\"https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/viewform\" rel=\"nofollow noreferrer\">https://docs.google.com/forms/d/e/1FAIpQLSeb_QX8rdKD2WOM5-0rZ10C9rzPsMzqlGL-Aduh7_nM0EEutw/viewform</a></p>\n<p>I have found this form that we have to submit for user registration on Vonage. It's missing in Vonage documentation or maybe not clearly mentioned.</p>\n"}],"owner":{"account_id":6507730,"reputation":89,"user_id":5036095,"display_name":"umaid ashraf"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":43,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691222877,"creation_date":1690876944,"question_id":76809614,"body_markdown":"I&#39;m working on a Messaging Application and for sending message to WhatsApp I&#39;m using Vonage Messaging API. New users can signup to my application, but for these new users I&#39;m not sure how can I register them to Vonage so they can use their own number for sending messages.\r\n\r\nIs there any way to register/create new users on Vonage programmatically? Is there any API or SDK for this?","title":"Can we register new users in Vonage programmatically using Vonage API or SDK?","body":"<p>I'm working on a Messaging Application and for sending message to WhatsApp I'm using Vonage Messaging API. New users can signup to my application, but for these new users I'm not sure how can I register them to Vonage so they can use their own number for sending messages.</p>\n<p>Is there any way to register/create new users on Vonage programmatically? Is there any API or SDK for this?</p>\n"},{"tags":["java","maven","intellij-idea"],"answers":[{"comments":[{"owner":{"account_id":1773459,"reputation":341,"user_id":1617774,"accept_rate":100,"display_name":"Guto"},"score":0,"creation_date":1663943233,"post_id":72072054,"comment_id":130365247,"body_markdown":"I have the same problem with javax.ws.rs but your solution doesn&#39;t work for me.","body":"I have the same problem with javax.ws.rs but your solution doesn&#39;t work for me."},{"owner":{"account_id":27878,"reputation":4317,"user_id":74000,"accept_rate":58,"display_name":"dudeNumber4"},"score":2,"creation_date":1673543585,"post_id":72072054,"comment_id":132528270,"body_markdown":"I have the same issue, but I can&#39;t add my dependency to my module-info because it&#39;s not itself modularized.","body":"I have the same issue, but I can&#39;t add my dependency to my module-info because it&#39;s not itself modularized."}],"tags":[],"owner":{"account_id":12363423,"reputation":688,"user_id":14808001,"display_name":"Mario MateaÈ"},"comment_count":2,"down_vote_count":0,"up_vote_count":8,"is_accepted":true,"score":8,"last_activity_date":1651357854,"creation_date":1651351507,"answer_id":72072054,"question_id":72072026,"body_markdown":"I&#39;ve managed to fix my problem. In my `module-info.java` I needed to add the following line of code:\r\n\r\n```\r\nrequires com.fasterxml.jackson.databind;\r\n```\r\n\r\nFound something similar in an answer provided to a question on Stack (https://stackoverflow.com/questions/60567260/how-to-solve-package-is-declared-in-module-but-module-does-not-read-it), although the user who answered said you need to also open the module.\r\nOpening the module, though, would result in some other error, but just mentioning it as a requirement should be enough.","title":"How to fix &#39;Package is declared in module, but module does not read it&#39; error in IntelliJ JavaFX?","body":"<p>I've managed to fix my problem. In my <code>module-info.java</code> I needed to add the following line of code:</p>\n<pre><code>requires com.fasterxml.jackson.databind;\n</code></pre>\n<p>Found something similar in an answer provided to a question on Stack (<a href=\"https://stackoverflow.com/questions/60567260/how-to-solve-package-is-declared-in-module-but-module-does-not-read-it\">How to solve package is declared in module, but module does not read it?</a>), although the user who answered said you need to also open the module.\nOpening the module, though, would result in some other error, but just mentioning it as a requirement should be enough.</p>\n"},{"tags":[],"owner":{"account_id":23383080,"reputation":285,"user_id":17448920,"display_name":"Adammgerber"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691221898,"creation_date":1691221898,"answer_id":76840639,"question_id":72072026,"body_markdown":"I had this issue in IntelliJ\r\n\r\nFor anyone still dealing with this issue, I found that it was due to not exporting the controller to java.fx and java.base in the module-info.java\r\n\r\nThis is assuming that you&#39;re using MVC and have a controller package with all controller classes inside\r\n\r\nThis was the fix:\r\n```\r\nexports controller;\r\nopens controller to javafx.fxml;\r\n```\r\n\r\nAlso make sure that you add this for the model package in the same file (module-info.java):\r\n```\r\nopens model to javafx.base;\r\n```","title":"How to fix &#39;Package is declared in module, but module does not read it&#39; error in IntelliJ JavaFX?","body":"<p>I had this issue in IntelliJ</p>\n<p>For anyone still dealing with this issue, I found that it was due to not exporting the controller to java.fx and java.base in the module-info.java</p>\n<p>This is assuming that you're using MVC and have a controller package with all controller classes inside</p>\n<p>This was the fix:</p>\n<pre><code>exports controller;\nopens controller to javafx.fxml;\n</code></pre>\n<p>Also make sure that you add this for the model package in the same file (module-info.java):</p>\n<pre><code>opens model to javafx.base;\n</code></pre>\n"}],"owner":{"account_id":12363423,"reputation":688,"user_id":14808001,"display_name":"Mario MateaÈ"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":8654,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":72072054,"answer_count":2,"score":11,"last_activity_date":1691221898,"creation_date":1651351229,"question_id":72072026,"body_markdown":"I&#39;ve created a JavaFX project using **IntelliJ**, together with Maven. I&#39;m trying to test some system that adds items into an XML file and then parses it and shows me all the items added to the file.\r\n\r\nI want to use **FasterXML/Jackson** for parsing the files. In my `pom.xml`, I&#39;ve added the following dependency:\r\n```\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\r\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\r\n    &lt;version&gt;2.13.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n(...) and I also loaded the Maven changes from the button provided by IntellJ. I also pressed the **Reload all Maven Changes** button. The &quot;Dependencies&quot; folder seems to be all okay. I&#39;ve received no errors or complaints:\r\n[![enter image description here][1]][1]\r\n\r\n\r\nHowever, when I&#39;m trying to import some Jackson-related class, such as `ObjectMapper`, like this:\r\n```\r\nimport com.fasterxml.jackson.databind.ObjectMapper;\r\n```\r\n(...) I receive such an error:\r\n`Package &#39;com.fasterxml.jackson.databind&#39; is declared in module &#39;com.fasterxml.jackson.databind&#39;, but module &#39;com.example.demo1&#39; does not read it`.\r\n\r\nThis is my project structure:\r\n\r\n[![enter image description here][2]][2]\r\n\r\nWhat could be the problem?\r\n\r\n  [1]: https://i.stack.imgur.com/bH2A1.png\r\n  [2]: https://i.stack.imgur.com/ihOmM.png","title":"How to fix &#39;Package is declared in module, but module does not read it&#39; error in IntelliJ JavaFX?","body":"<p>I've created a JavaFX project using <strong>IntelliJ</strong>, together with Maven. I'm trying to test some system that adds items into an XML file and then parses it and shows me all the items added to the file.</p>\n<p>I want to use <strong>FasterXML/Jackson</strong> for parsing the files. In my <code>pom.xml</code>, I've added the following dependency:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.dataformat&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-dataformat-xml&lt;/artifactId&gt;\n    &lt;version&gt;2.13.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>(...) and I also loaded the Maven changes from the button provided by IntellJ. I also pressed the <strong>Reload all Maven Changes</strong> button. The &quot;Dependencies&quot; folder seems to be all okay. I've received no errors or complaints:\n<a href=\"https://i.stack.imgur.com/bH2A1.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/bH2A1.png\" alt=\"enter image description here\" /></a></p>\n<p>However, when I'm trying to import some Jackson-related class, such as <code>ObjectMapper</code>, like this:</p>\n<pre><code>import com.fasterxml.jackson.databind.ObjectMapper;\n</code></pre>\n<p>(...) I receive such an error:\n<code>Package 'com.fasterxml.jackson.databind' is declared in module 'com.fasterxml.jackson.databind', but module 'com.example.demo1' does not read it</code>.</p>\n<p>This is my project structure:</p>\n<p><a href=\"https://i.stack.imgur.com/ihOmM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/ihOmM.png\" alt=\"enter image description here\" /></a></p>\n<p>What could be the problem?</p>\n"},{"tags":["java","aws-lambda","aws-serverless","servletcontextlistener","spring-boot-3"],"comments":[{"owner":{"account_id":279568,"reputation":470,"user_id":574808,"display_name":"Renato"},"score":1,"creation_date":1691624050,"post_id":76840633,"comment_id":135518243,"body_markdown":"Can you provide more information on your issue? Like what did you do to migrate from Spring Boot 2 to Spring Boot 3? Did you modify the rest of your application accordingly? Or can you add more of your pom.xml file to see if your other dependencies are actually compatible with SB 3? You can create an issue on the GitHub repository of the project, for easier interaction: https://github.com/awslabs/aws-serverless-java-container","body":"Can you provide more information on your issue? Like what did you do to migrate from Spring Boot 2 to Spring Boot 3? Did you modify the rest of your application accordingly? Or can you add more of your pom.xml file to see if your other dependencies are actually compatible with SB 3? You can create an issue on the GitHub repository of the project, for easier interaction: <a href=\"https://github.com/awslabs/aws-serverless-java-container\" rel=\"nofollow noreferrer\">github.com/awslabs/aws-serverless-java-container</a>"}],"owner":{"account_id":5862685,"reputation":1,"user_id":4617814,"display_name":"Luffy"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":367,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691221793,"creation_date":1691221793,"question_id":76840633,"body_markdown":"Below code is working in spring boot 2 using aws-serverless-java-container-springboot2\r\n\r\nI tried using aws-serverless-java-container-springboot3 but in below apps there is no API calls/controller. Simply trying to init the bean so that aws lamba can be triggered.\r\n\r\nDoesn&#39;t have proper sample to convert from aws-serverless-java-container-springboot2 to aws-serverless-java-container-springboot3\r\nhttps://github.com/awslabs/aws-serverless-java-container/wiki/Quick-start---Spring-Boot3 \r\n\r\n```\r\n&lt;dependency&gt;\r\n   &lt;groupId&gt;com.amazonaws.serverless&lt;/groupId&gt;\r\n   &lt;artifactId&gt;aws-serverless-java-container-springboot3&lt;/artifactId&gt;\r\n   &lt;version&gt;2.0.0-M1&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\n\r\n```\r\nimport javax.servlet.ServletContext;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\nimport org.springframework.web.context.WebApplicationContext;\r\nimport org.springframework.web.context.support.WebApplicationContextUtils;\r\n\r\nimport com.amazonaws.serverless.exceptions.ContainerInitializationException;\r\nimport com.amazonaws.serverless.proxy.model.AwsProxyRequest;\r\nimport com.amazonaws.serverless.proxy.model.AwsProxyResponse;\r\nimport com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler;\r\nimport com.amazonaws.services.lambda.runtime.Context;\r\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\r\nimport com.amazonaws.services.lambda.runtime.events.ScheduledEvent;\r\nimport com.service.AKRService;\r\n\r\npublic class SvHandler implements RequestHandler &lt; ScheduledEvent, String &gt; {\r\n  private static final Logger logger = LoggerFactory.getLogger(SvHandler.class);\r\n  \r\n  public String handleRequest(ScheduledEvent input, Context context) {\r\n\t  AKRService akrSvc = null;\r\n    try {\r\n    \takrSvc = init();\r\n    } catch (ContainerInitializationException e) {\r\n      logger.error(&quot;Error Initialiazing Spring Boot Container&quot;);\r\n    }\r\n    logger.info(&quot;Started in handleRequest&quot;);\r\n    logger.info(&quot;Got the managed bean: {}&quot;, akrSvc);\r\n    akrSvc.knock();\r\n    return &quot;Success&quot;;\r\n  }\r\n  protected AKRService init() throws ContainerInitializationException {\r\n    final SpringBootLambdaContainerHandler &lt; AwsProxyRequest, AwsProxyResponse &gt; handler = SpringBootLambdaContainerHandler.getAwsProxyHandler(Application.class);\r\n    final ServletContext servContext = handler.getServletContext();\r\n    final WebApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(servContext);\r\n    return ctx.getBean(AKRService.class);\r\n  }\r\n}\r\n```\r\n\r\n\r\nI tried using aws-serverless-java-container-springboot3 to convert existing lamba service from spring boot 2\r\n\r\nDoesn&#39;t have proper sample to convert from aws-serverless-java-container-springboot2 to aws-serverless-java-container-springboot3\r\nhttps://github.com/awslabs/aws-serverless-java-container/wiki/Quick-start---Spring-Boot3 ","title":"AWS serverless java container spring boot 2 to spring boot 3","body":"<p>Below code is working in spring boot 2 using aws-serverless-java-container-springboot2</p>\n<p>I tried using aws-serverless-java-container-springboot3 but in below apps there is no API calls/controller. Simply trying to init the bean so that aws lamba can be triggered.</p>\n<p>Doesn't have proper sample to convert from aws-serverless-java-container-springboot2 to aws-serverless-java-container-springboot3\n<a href=\"https://github.com/awslabs/aws-serverless-java-container/wiki/Quick-start---Spring-Boot3\" rel=\"nofollow noreferrer\">https://github.com/awslabs/aws-serverless-java-container/wiki/Quick-start---Spring-Boot3</a></p>\n<pre><code>&lt;dependency&gt;\n   &lt;groupId&gt;com.amazonaws.serverless&lt;/groupId&gt;\n   &lt;artifactId&gt;aws-serverless-java-container-springboot3&lt;/artifactId&gt;\n   &lt;version&gt;2.0.0-M1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<pre><code>import javax.servlet.ServletContext;\n\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n\nimport org.springframework.web.context.WebApplicationContext;\nimport org.springframework.web.context.support.WebApplicationContextUtils;\n\nimport com.amazonaws.serverless.exceptions.ContainerInitializationException;\nimport com.amazonaws.serverless.proxy.model.AwsProxyRequest;\nimport com.amazonaws.serverless.proxy.model.AwsProxyResponse;\nimport com.amazonaws.serverless.proxy.spring.SpringBootLambdaContainerHandler;\nimport com.amazonaws.services.lambda.runtime.Context;\nimport com.amazonaws.services.lambda.runtime.RequestHandler;\nimport com.amazonaws.services.lambda.runtime.events.ScheduledEvent;\nimport com.service.AKRService;\n\npublic class SvHandler implements RequestHandler &lt; ScheduledEvent, String &gt; {\n  private static final Logger logger = LoggerFactory.getLogger(SvHandler.class);\n  \n  public String handleRequest(ScheduledEvent input, Context context) {\n      AKRService akrSvc = null;\n    try {\n        akrSvc = init();\n    } catch (ContainerInitializationException e) {\n      logger.error(&quot;Error Initialiazing Spring Boot Container&quot;);\n    }\n    logger.info(&quot;Started in handleRequest&quot;);\n    logger.info(&quot;Got the managed bean: {}&quot;, akrSvc);\n    akrSvc.knock();\n    return &quot;Success&quot;;\n  }\n  protected AKRService init() throws ContainerInitializationException {\n    final SpringBootLambdaContainerHandler &lt; AwsProxyRequest, AwsProxyResponse &gt; handler = SpringBootLambdaContainerHandler.getAwsProxyHandler(Application.class);\n    final ServletContext servContext = handler.getServletContext();\n    final WebApplicationContext ctx = WebApplicationContextUtils.getWebApplicationContext(servContext);\n    return ctx.getBean(AKRService.class);\n  }\n}\n</code></pre>\n<p>I tried using aws-serverless-java-container-springboot3 to convert existing lamba service from spring boot 2</p>\n<p>Doesn't have proper sample to convert from aws-serverless-java-container-springboot2 to aws-serverless-java-container-springboot3\n<a href=\"https://github.com/awslabs/aws-serverless-java-container/wiki/Quick-start---Spring-Boot3\" rel=\"nofollow noreferrer\">https://github.com/awslabs/aws-serverless-java-container/wiki/Quick-start---Spring-Boot3</a></p>\n"},{"tags":["java","plugins","compilation"],"comments":[{"owner":{"account_id":3590069,"reputation":1,"user_id":2996344,"display_name":"Peter J"},"score":0,"creation_date":1691399529,"post_id":76840528,"comment_id":135481102,"body_markdown":"Updates:\nI must use an old version of JDK 8. The updating of the AST can be done by using TreeTranslator in the &quot;started&quot; method in the ANALYZE phase, but resolving the type of the variable is working only in the &quot;finished&quot; method in the ANALYZE. So it is doable, but finding the called type in the same round is probably not possible.","body":"Updates: I must use an old version of JDK 8. The updating of the AST can be done by using TreeTranslator in the &quot;started&quot; method in the ANALYZE phase, but resolving the type of the variable is working only in the &quot;finished&quot; method in the ANALYZE. So it is doable, but finding the called type in the same round is probably not possible."}],"owner":{"account_id":3590069,"reputation":1,"user_id":2996344,"display_name":"Peter J"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":20,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691219672,"creation_date":1691219672,"question_id":76840528,"body_markdown":"I created a POC where I want to encrypt String constants in specific method calls at compile time.\r\n\r\nI&#39;m using a compiler plugin, used this page as starting point: [Baeldung - Build a Java compiler plugin](https://www.baeldung.com/java-build-compiler-plugin)\r\nI was able to find the method calls (only in the ANALYZE phase), and I can even update the value of the JCTree.JCLiteral seemingly (printed the new value to console), but at the end the compiled classes are still containing the original values.\r\n\r\nThe core part of my code looks like this:\r\n\r\n```\r\nif (taskEvent.getKind() != TaskEvent.Kind.ANALYZE) {\r\n    return;\r\n}\r\ntaskEvent.getCompilationUnit().accept(new TreeScanner&lt;Void, Void&gt;() {\r\n    @Override\r\n    public Void visitMethodInvocation(MethodInvocationTree invocationTree, Void unused) {\r\n\r\n        if (isMethodToBeUpdated(invocationTree, env)) {\r\n            System.out.println(&quot;Found usage: &quot; + invocationTree);\r\n            JCTree.JCMethodInvocation methodInvocation = (JCTree.JCMethodInvocation) invocationTree;\r\n\r\n            JCTree.JCExpression firstParam = methodInvocation.getArguments().get(0);\r\n            if (firstParam instanceof JCTree.JCLiteral) {\r\n                ((JCTree.JCLiteral) firstParam).value = &quot;...FOO...&quot;;\r\n            }\r\n\r\n            System.out.println(&quot;meth after: &quot; + methodInvocation);\r\n            return null;\r\n        }\r\n\r\n        return null;\r\n    }\r\n}, null);\r\n```\r\nUnfortunately this compiler plugin feature is very under documented. I tried to make the update in the PARSE phase, but there the called method&#39;s class (and its interface) is not available (or at least i couldn&#39;t query it).\r\n\r\nAnybody has any experience how to implement the updating of the value the way it gets persisted into the compiled bytecode?\r\n\r\n\r\nBasically I was expecting that if I update the value in the AST, and it is before the GENERATE phase, the bytecode is being generated using the updates AST. I even sout-ed the updated object, which was updated, but if I check the class file, it still contains the unchanged value.","title":"Can I update JCLiteral in Javac plugin","body":"<p>I created a POC where I want to encrypt String constants in specific method calls at compile time.</p>\n<p>I'm using a compiler plugin, used this page as starting point: <a href=\"https://www.baeldung.com/java-build-compiler-plugin\" rel=\"nofollow noreferrer\">Baeldung - Build a Java compiler plugin</a>\nI was able to find the method calls (only in the ANALYZE phase), and I can even update the value of the JCTree.JCLiteral seemingly (printed the new value to console), but at the end the compiled classes are still containing the original values.</p>\n<p>The core part of my code looks like this:</p>\n<pre><code>if (taskEvent.getKind() != TaskEvent.Kind.ANALYZE) {\n    return;\n}\ntaskEvent.getCompilationUnit().accept(new TreeScanner&lt;Void, Void&gt;() {\n    @Override\n    public Void visitMethodInvocation(MethodInvocationTree invocationTree, Void unused) {\n\n        if (isMethodToBeUpdated(invocationTree, env)) {\n            System.out.println(&quot;Found usage: &quot; + invocationTree);\n            JCTree.JCMethodInvocation methodInvocation = (JCTree.JCMethodInvocation) invocationTree;\n\n            JCTree.JCExpression firstParam = methodInvocation.getArguments().get(0);\n            if (firstParam instanceof JCTree.JCLiteral) {\n                ((JCTree.JCLiteral) firstParam).value = &quot;...FOO...&quot;;\n            }\n\n            System.out.println(&quot;meth after: &quot; + methodInvocation);\n            return null;\n        }\n\n        return null;\n    }\n}, null);\n</code></pre>\n<p>Unfortunately this compiler plugin feature is very under documented. I tried to make the update in the PARSE phase, but there the called method's class (and its interface) is not available (or at least i couldn't query it).</p>\n<p>Anybody has any experience how to implement the updating of the value the way it gets persisted into the compiled bytecode?</p>\n<p>Basically I was expecting that if I update the value in the AST, and it is before the GENERATE phase, the bytecode is being generated using the updates AST. I even sout-ed the updated object, which was updated, but if I check the class file, it still contains the unchanged value.</p>\n"},{"tags":["java","spring","spring-boot","spring-data","spring-session"],"comments":[{"owner":{"account_id":15064163,"reputation":13516,"user_id":10871900,"display_name":"dan1st is crying"},"score":0,"creation_date":1691223101,"post_id":76840501,"comment_id":135465428,"body_markdown":"Try not using `JSESSIONID` but a different cookie.","body":"Try not using <code>JSESSIONID</code> but a different cookie."}],"owner":{"account_id":12785520,"reputation":178,"user_id":11672197,"display_name":"qarabala"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":63,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691219103,"creation_date":1691219103,"question_id":76840501,"body_markdown":"This question has already been asked on SO, yet the answers were primarily using Security. I have the following constellations:\r\n* I do not use Spring Security\r\n* I use Spring Session JDBC\r\n\r\nWhen I restart the website (as a process), the sessions persist. However, when I close and reopen the browser, the session gets closed. I have tried prolonging the cookie life:\r\n\r\n```java\r\nimport org.springframework.context.annotation.Bean;\r\nimport org.springframework.context.annotation.Configuration;\r\nimport org.springframework.session.web.http.CookieSerializer;\r\nimport org.springframework.session.web.http.DefaultCookieSerializer;\r\n\r\n@Configuration\r\npublic class SessionConfig {\r\n\r\n    @Bean\r\n    public CookieSerializer cookieSerializer() {\r\n        DefaultCookieSerializer serializer = new DefaultCookieSerializer();\r\n        // Customize the cookie\r\n        serializer.setCookieName(&quot;JSESSIONID&quot;);\r\n        serializer.setUseSecureCookie(true);\r\n        serializer.setUseHttpOnlyCookie(true);\r\n        serializer.setCookieMaxAge(60 * 60 * 24 * 365); // Set max age to 365 days\r\n        return serializer;\r\n    }\r\n\r\n}\r\n```\r\n\r\nBut that did not help. I have no idea what to do next.","title":"Persist session after browser is closed (Spring Boot edition)","body":"<p>This question has already been asked on SO, yet the answers were primarily using Security. I have the following constellations:</p>\n<ul>\n<li>I do not use Spring Security</li>\n<li>I use Spring Session JDBC</li>\n</ul>\n<p>When I restart the website (as a process), the sessions persist. However, when I close and reopen the browser, the session gets closed. I have tried prolonging the cookie life:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.session.web.http.CookieSerializer;\nimport org.springframework.session.web.http.DefaultCookieSerializer;\n\n@Configuration\npublic class SessionConfig {\n\n    @Bean\n    public CookieSerializer cookieSerializer() {\n        DefaultCookieSerializer serializer = new DefaultCookieSerializer();\n        // Customize the cookie\n        serializer.setCookieName(&quot;JSESSIONID&quot;);\n        serializer.setUseSecureCookie(true);\n        serializer.setUseHttpOnlyCookie(true);\n        serializer.setCookieMaxAge(60 * 60 * 24 * 365); // Set max age to 365 days\n        return serializer;\n    }\n\n}\n</code></pre>\n<p>But that did not help. I have no idea what to do next.</p>\n"},{"tags":["python","java","spring","maven","jsonschema"],"comments":[{"owner":{"account_id":372682,"reputation":22461,"user_id":721855,"display_name":"aled"},"score":1,"creation_date":1690918012,"post_id":76814351,"comment_id":135419157,"body_markdown":"This looks to be an [XY Problem](https://xyproblem.info/). Your real issue is the first sentence of your question.","body":"This looks to be an <a href=\"https://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>. Your real issue is the first sentence of your question."}],"answers":[{"tags":[],"owner":{"account_id":29138867,"reputation":1,"user_id":22322355,"display_name":"todododo"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691218916,"creation_date":1690966428,"answer_id":76818165,"question_id":76814351,"body_markdown":"Solution for pip error was:\r\n\r\n    pip install &quot;cython&lt;3.0.0&quot; wheel &amp;&amp; pip install pyyaml==5.4.1 --no-build-isolation\r\n\r\nand then you can run \r\n\r\n    pip install\r\n\r\n","title":"Is there a way to call a python script to do some steps when i do a maven clean package in java?","body":"<p>Solution for pip error was:</p>\n<pre><code>pip install &quot;cython&lt;3.0.0&quot; wheel &amp;&amp; pip install pyyaml==5.4.1 --no-build-isolation\n</code></pre>\n<p>and then you can run</p>\n<pre><code>pip install\n</code></pre>\n"}],"owner":{"account_id":29138867,"reputation":1,"user_id":22322355,"display_name":"todododo"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":91,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1700188488,"answer_count":1,"score":0,"last_activity_date":1691218916,"creation_date":1690914693,"question_id":76814351,"body_markdown":"I have a Spring Boot project with different yaml&#39;s and i want to create Json Schema for which one of them, but automatically, when i do a Maven clean package.\r\n\r\nI found out about [openapi2jsonschema](https://github.com/instrumenta/openapi2jsonschema) but i don&#39;t know how to use it in my project to do what i want. I tried to install by hand, but when i do a\r\n\r\n`pip install openapi2jsonschema `\r\n\r\ni receive the next error:\r\n\r\n```\r\n\r\n`C:\\\\Users\\\\Administrator\\&gt;pip install openapi2jsonschema`\r\n`Collecting openapi2jsonschema`\r\n`Using cached openapi2jsonschema-0.9.1-py3-none-any.whl (8.2 kB)`\r\n`Collecting click\\&lt;8.0,\\&gt;=7.0 (from openapi2jsonschema)`\r\n`Using cached click-7.1.2-py2.py3-none-any.whl (82 kB)\r\nRequirement already satisfied: colorama\\&lt;0.5.0,\\&gt;=0.4.1 in c:\\\\users\\\\administrator\\\\appdata\\\\local\\\\programs\\\\python\\\\python311\\\\lib\\\\site-packages (from openapi2jsonschema) (0.4.6)\r\nCollecting jsonref\\&lt;0.3.0,\\&gt;=0.2.0 (from openapi2jsonschema)\r\nUsing cached jsonref-0.2-py3-none-any.whl (9.3 kB)\r\nCollecting pyyaml\\&lt;6.0,\\&gt;=5.1 (from openapi2jsonschema)\r\nUsing cached PyYAML-5.4.1.tar.gz (175 kB)\r\nInstalling build dependencies ... done\r\nGetting requirements to build wheel ... error\r\nerror: subprocess-exited-with-error\r\n\r\n&#215; Getting requirements to build wheel did not run successfully.\r\nâ exit code: 1\r\nâ°â\\&gt; \\[68 lines of output\\]\r\nC:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\pip-build-env-kwh5il8k\\\\overlay\\\\Lib\\\\site-packages\\\\setuptools\\\\config\\\\setupcfg.py:293: \\_DeprecatedConfig: Deprecated config in `setup.cfg`\r\n!!\r\n\r\n              ********************************************************************************\r\n              The license_file parameter is deprecated, use license_files instead.\r\n    \r\n              By 2023-Oct-30, you need to update your project and remove deprecated calls\r\n              or your builds will no longer be supported.\r\n    \r\n              See https://setuptools.pypa.io/en/latest/userguide/declarative_config.html for details.\r\n              ********************************************************************************\r\n    \r\n      !!\r\n        parsed = self.parsers.get(option_name, lambda x: x)(value)\r\n      running egg_info\r\n      writing lib3\\PyYAML.egg-info\\PKG-INFO\r\n      writing dependency_links to lib3\\PyYAML.egg-info\\dependency_links.txt\r\n      writing top-level names to lib3\\PyYAML.egg-info\\top_level.txt\r\n      Traceback (most recent call last):\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 353, in &lt;module&gt;\r\n          main()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 335, in main\r\n          json_out[&#39;return_val&#39;] = hook(**hook_input[&#39;kwargs&#39;])\r\n                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 118, in get_requires_for_build_wheel\r\n          return hook(config_settings)\r\n                 ^^^^^^^^^^^^^^^^^^^^^\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 341, in get_requires_for_build_wheel\r\n          return self._get_build_requires(config_settings, requirements=[&#39;wheel&#39;])\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 323, in _get_build_requires\r\n          self.run_setup()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 338, in run_setup\r\n          exec(code, locals())\r\n        File &quot;&lt;string&gt;&quot;, line 271, in &lt;module&gt;\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\__init__.py&quot;, line 107, in setup\r\n          return distutils.core.setup(**attrs)\r\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\core.py&quot;, line 185, in setup\r\n          return run_commands(dist)\r\n                 ^^^^^^^^^^^^^^^^^^\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\core.py&quot;, line 201, in run_commands\r\n          dist.run_commands()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\dist.py&quot;, line 969, in run_commands\r\n          self.run_command(cmd)\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\dist.py&quot;, line 1234, in run_command\r\n          super().run_command(command)\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\dist.py&quot;, line 988, in run_command\r\n          cmd_obj.run()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 314, in run\r\n          self.find_sources()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 322, in find_sources\r\n          mm.run()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 551, in run\r\n          self.add_defaults()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 589, in add_defaults\r\n          sdist.add_defaults(self)\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\sdist.py&quot;, line 104, in add_defaults\r\n          super().add_defaults()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\command\\sdist.py&quot;, line 251, in add_defaults\r\n          self._add_defaults_ext()\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\command\\sdist.py&quot;, line 336, in _add_defaults_ext\r\n          self.filelist.extend(build_ext.get_source_files())\r\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\r\n        File &quot;&lt;string&gt;&quot;, line 201, in get_source_files\r\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\cmd.py&quot;, line 107, in __getattr__\r\n          raise AttributeError(attr)\r\n      AttributeError: cython_sources\r\n      [end of output]\r\n\r\n\r\nnote: This error originates from a subprocess, and is likely not a problem with pip.\r\nerror: subprocess-exited-with-error\r\n\r\n&#215; Getting requirements to build wheel did not run successfully.\r\nâ exit code: 1\r\nâ°â\\&gt; See above for output.\r\n\r\nnote: This error originates from a subprocess, and is likely not a problem with pip.\r\n\r\nC:\\\\Users\\\\Administrator\\&gt;pip --version\r\npip 23.2.1 from C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python311\\\\Lib\\\\site-packages\\\\pip (python 3.11)`\r\n```\r\n\r\nCan i put this whole thing of pip install openSchema in a python script in maven, and then when i do a mvn clean package to work out without any errors...? thanks..\r\n\r\nI watched  out different example to add this thing in a maven pom file, but i don&#39;t know how..","title":"Is there a way to call a python script to do some steps when i do a maven clean package in java?","body":"<p>I have a Spring Boot project with different yaml's and i want to create Json Schema for which one of them, but automatically, when i do a Maven clean package.</p>\n<p>I found out about <a href=\"https://github.com/instrumenta/openapi2jsonschema\" rel=\"nofollow noreferrer\">openapi2jsonschema</a> but i don't know how to use it in my project to do what i want. I tried to install by hand, but when i do a</p>\n<p><code>pip install openapi2jsonschema </code></p>\n<p>i receive the next error:</p>\n<pre><code>\n`C:\\\\Users\\\\Administrator\\&gt;pip install openapi2jsonschema`\n`Collecting openapi2jsonschema`\n`Using cached openapi2jsonschema-0.9.1-py3-none-any.whl (8.2 kB)`\n`Collecting click\\&lt;8.0,\\&gt;=7.0 (from openapi2jsonschema)`\n`Using cached click-7.1.2-py2.py3-none-any.whl (82 kB)\nRequirement already satisfied: colorama\\&lt;0.5.0,\\&gt;=0.4.1 in c:\\\\users\\\\administrator\\\\appdata\\\\local\\\\programs\\\\python\\\\python311\\\\lib\\\\site-packages (from openapi2jsonschema) (0.4.6)\nCollecting jsonref\\&lt;0.3.0,\\&gt;=0.2.0 (from openapi2jsonschema)\nUsing cached jsonref-0.2-py3-none-any.whl (9.3 kB)\nCollecting pyyaml\\&lt;6.0,\\&gt;=5.1 (from openapi2jsonschema)\nUsing cached PyYAML-5.4.1.tar.gz (175 kB)\nInstalling build dependencies ... done\nGetting requirements to build wheel ... error\nerror: subprocess-exited-with-error\n\nÃ Getting requirements to build wheel did not run successfully.\nâ exit code: 1\nâ°â\\&gt; \\[68 lines of output\\]\nC:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Temp\\\\pip-build-env-kwh5il8k\\\\overlay\\\\Lib\\\\site-packages\\\\setuptools\\\\config\\\\setupcfg.py:293: \\_DeprecatedConfig: Deprecated config in `setup.cfg`\n!!\n\n              ********************************************************************************\n              The license_file parameter is deprecated, use license_files instead.\n    \n              By 2023-Oct-30, you need to update your project and remove deprecated calls\n              or your builds will no longer be supported.\n    \n              See https://setuptools.pypa.io/en/latest/userguide/declarative_config.html for details.\n              ********************************************************************************\n    \n      !!\n        parsed = self.parsers.get(option_name, lambda x: x)(value)\n      running egg_info\n      writing lib3\\PyYAML.egg-info\\PKG-INFO\n      writing dependency_links to lib3\\PyYAML.egg-info\\dependency_links.txt\n      writing top-level names to lib3\\PyYAML.egg-info\\top_level.txt\n      Traceback (most recent call last):\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 353, in &lt;module&gt;\n          main()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 335, in main\n          json_out['return_val'] = hook(**hook_input['kwargs'])\n                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Programs\\Python\\Python311\\Lib\\site-packages\\pip\\_vendor\\pyproject_hooks\\_in_process\\_in_process.py&quot;, line 118, in get_requires_for_build_wheel\n          return hook(config_settings)\n                 ^^^^^^^^^^^^^^^^^^^^^\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 341, in get_requires_for_build_wheel\n          return self._get_build_requires(config_settings, requirements=['wheel'])\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 323, in _get_build_requires\n          self.run_setup()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\build_meta.py&quot;, line 338, in run_setup\n          exec(code, locals())\n        File &quot;&lt;string&gt;&quot;, line 271, in &lt;module&gt;\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\__init__.py&quot;, line 107, in setup\n          return distutils.core.setup(**attrs)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\core.py&quot;, line 185, in setup\n          return run_commands(dist)\n                 ^^^^^^^^^^^^^^^^^^\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\core.py&quot;, line 201, in run_commands\n          dist.run_commands()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\dist.py&quot;, line 969, in run_commands\n          self.run_command(cmd)\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\dist.py&quot;, line 1234, in run_command\n          super().run_command(command)\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\dist.py&quot;, line 988, in run_command\n          cmd_obj.run()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 314, in run\n          self.find_sources()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 322, in find_sources\n          mm.run()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 551, in run\n          self.add_defaults()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\egg_info.py&quot;, line 589, in add_defaults\n          sdist.add_defaults(self)\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\command\\sdist.py&quot;, line 104, in add_defaults\n          super().add_defaults()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\command\\sdist.py&quot;, line 251, in add_defaults\n          self._add_defaults_ext()\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\command\\sdist.py&quot;, line 336, in _add_defaults_ext\n          self.filelist.extend(build_ext.get_source_files())\n                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        File &quot;&lt;string&gt;&quot;, line 201, in get_source_files\n        File &quot;C:\\Users\\Administrator\\AppData\\Local\\Temp\\pip-build-env-kwh5il8k\\overlay\\Lib\\site-packages\\setuptools\\_distutils\\cmd.py&quot;, line 107, in __getattr__\n          raise AttributeError(attr)\n      AttributeError: cython_sources\n      [end of output]\n\n\nnote: This error originates from a subprocess, and is likely not a problem with pip.\nerror: subprocess-exited-with-error\n\nÃ Getting requirements to build wheel did not run successfully.\nâ exit code: 1\nâ°â\\&gt; See above for output.\n\nnote: This error originates from a subprocess, and is likely not a problem with pip.\n\nC:\\\\Users\\\\Administrator\\&gt;pip --version\npip 23.2.1 from C:\\\\Users\\\\Administrator\\\\AppData\\\\Local\\\\Programs\\\\Python\\\\Python311\\\\Lib\\\\site-packages\\\\pip (python 3.11)`\n</code></pre>\n<p>Can i put this whole thing of pip install openSchema in a python script in maven, and then when i do a mvn clean package to work out without any errors...? thanks..</p>\n<p>I watched  out different example to add this thing in a maven pom file, but i don't know how..</p>\n"},{"tags":["java","multithreading","synchronization"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691218171,"post_id":76840444,"comment_id":135465047,"body_markdown":"Try defining `cnt` as `final`, and you should see the problem.","body":"Try defining <code>cnt</code> as <code>final</code>, and you should see the problem."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1691218291,"post_id":76840444,"comment_id":135465054,"body_markdown":"As an aside: for this concrete problem, I recommend using [`AtomicInteger` (`docs.oracle.com`)](https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html) instead of `Integer`. This will eliminate the need to use `synchronized`.","body":"As an aside: for this concrete problem, I recommend using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow noreferrer\"><code>AtomicInteger</code> (<code>docs.oracle.com</code>)</a> instead of <code>Integer</code>. This will eliminate the need to use <code>synchronized</code>."},{"owner":{"account_id":18077324,"reputation":33,"user_id":13140208,"display_name":"madina11906036"},"score":0,"creation_date":1691218443,"post_id":76840444,"comment_id":135465063,"body_markdown":"how can i modify the **cnt** variable if it is declared as final? @Turing85","body":"how can i modify the <b>cnt</b> variable if it is declared as final? @Turing85"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1691218520,"post_id":76840444,"comment_id":135465069,"body_markdown":"There seems to be a misunderstanding. You cannot modify `Integer`-instances; they are immutable.","body":"There seems to be a misunderstanding. You cannot modify <code>Integer</code>-instances; they are immutable."},{"owner":{"account_id":14357,"reputation":9128,"user_id":29470,"display_name":"Tim Moore"},"score":1,"creation_date":1691218999,"post_id":76840444,"comment_id":135465105,"body_markdown":"Locks are acquired on objects, not variables. When the value of `cnt` changes, that causes different threads to acquire different locks.","body":"Locks are acquired on objects, not variables. When the value of <code>cnt</code> changes, that causes different threads to acquire different locks."},{"owner":{"account_id":18077324,"reputation":33,"user_id":13140208,"display_name":"madina11906036"},"score":0,"creation_date":1691219061,"post_id":76840444,"comment_id":135465114,"body_markdown":"I replace **Integer cnt = 0** with **MyInt cnt = new MyInt();** adding\nstatic class MyInt {int val = 0;} and then it works","body":"I replace <b>Integer cnt = 0</b> with <b>MyInt cnt = new MyInt();</b> adding static class MyInt {int val = 0;} and then it works"},{"owner":{"account_id":18077324,"reputation":33,"user_id":13140208,"display_name":"madina11906036"},"score":0,"creation_date":1691219278,"post_id":76840444,"comment_id":135465135,"body_markdown":"Understood. Tnx @Turing85","body":"Understood. Tnx @Turing85"}],"owner":{"account_id":18077324,"reputation":33,"user_id":13140208,"display_name":"madina11906036"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":26,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691218573,"answer_count":0,"score":0,"last_activity_date":1691217767,"creation_date":1691217767,"question_id":76840444,"body_markdown":"I wrote a **SharedObject** class which has two methods to increment a variable. The expected result is **200000** but it shows much less than that. I thought the synchronized block will acquire lock on the **cnt** variable and thus no two threads can modify or access it but it&#39;s not happening. Why is it so?  \r\n```\r\npublic class Main {\r\n    public static void main(String[] args) throws InterruptedException {\r\n        SharedObject sharedObject = new SharedObject();\r\n        Thread producer = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                sharedObject.produce();\r\n            }\r\n        });\r\n        Thread consumer = new Thread(new Runnable() {\r\n            @Override\r\n            public void run() {\r\n                sharedObject.consume();\r\n            }\r\n        });\r\n        producer.start();\r\n        consumer.start();\r\n        producer.join();\r\n        consumer.join();\r\n        System.out.println(sharedObject.cnt);\r\n    }\r\n    static class SharedObject {\r\n        Integer cnt = 0;\r\n        void produce() {\r\n            for(int i=0; i&lt;100000; i++) {\r\n                synchronized (cnt) {\r\n                    cnt++;\r\n                }\r\n            }\r\n        }\r\n        void consume() {\r\n            for(int i=0; i&lt;100000; i++) {\r\n                synchronized (cnt) {\r\n                    cnt++;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n```","title":"Why is the lock on synchronized block not working?","body":"<p>I wrote a <strong>SharedObject</strong> class which has two methods to increment a variable. The expected result is <strong>200000</strong> but it shows much less than that. I thought the synchronized block will acquire lock on the <strong>cnt</strong> variable and thus no two threads can modify or access it but it's not happening. Why is it so?</p>\n<pre><code>public class Main {\n    public static void main(String[] args) throws InterruptedException {\n        SharedObject sharedObject = new SharedObject();\n        Thread producer = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                sharedObject.produce();\n            }\n        });\n        Thread consumer = new Thread(new Runnable() {\n            @Override\n            public void run() {\n                sharedObject.consume();\n            }\n        });\n        producer.start();\n        consumer.start();\n        producer.join();\n        consumer.join();\n        System.out.println(sharedObject.cnt);\n    }\n    static class SharedObject {\n        Integer cnt = 0;\n        void produce() {\n            for(int i=0; i&lt;100000; i++) {\n                synchronized (cnt) {\n                    cnt++;\n                }\n            }\n        }\n        void consume() {\n            for(int i=0; i&lt;100000; i++) {\n                synchronized (cnt) {\n                    cnt++;\n                }\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","json","jolt"],"answers":[{"tags":[],"owner":{"account_id":7712415,"reputation":60542,"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691159840,"creation_date":1691159840,"answer_id":76836915,"question_id":76836230,"body_markdown":"You can use the following transformation\r\n```json\r\n[\r\n  { // form objects from array keys vs. array components\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;GroupMembers&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;*&quot;: {\r\n            &quot;$1&quot;: &quot;&amp;3.&amp;2.&amp;1.groupId&quot;, // partition by top level object, array and its indexes\r\n            &quot;@&quot;: &quot;&amp;3.&amp;2.&amp;1.memberId&quot;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  },\r\n  { // collect each key-value pairs under the common array node, namely &quot;GroupMembers&quot;\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;*&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;*&quot;: &quot;&amp;2[]&quot;\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\nthe ***demo*** on the site http://jolt-demo.appspot.com/ is :\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rus2H.jpg","title":"Jolt: Convert string array into individual objects","body":"<p>You can use the following transformation</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  { // form objects from array keys vs. array components\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;GroupMembers&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: {\n            &quot;$1&quot;: &quot;&amp;3.&amp;2.&amp;1.groupId&quot;, // partition by top level object, array and its indexes\n            &quot;@&quot;: &quot;&amp;3.&amp;2.&amp;1.memberId&quot;\n          }\n        }\n      }\n    }\n  },\n  { // collect each key-value pairs under the common array node, namely &quot;GroupMembers&quot;\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: &quot;&amp;2[]&quot;\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>the <em><strong>demo</strong></em> on the site <a href=\"http://jolt-demo.appspot.com/\" rel=\"nofollow noreferrer\">http://jolt-demo.appspot.com/</a> is :</p>\n<p><a href=\"https://i.stack.imgur.com/rus2H.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rus2H.jpg\" alt=\"enter image description here\" /></a></p>\n"},{"tags":[],"owner":{"account_id":13009011,"reputation":1105,"user_id":9402689,"display_name":"Raymond Choi"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691214118,"creation_date":1691214118,"answer_id":76840303,"question_id":76836230,"body_markdown":"You may consider another library _Josson_ to do the JSON transformation.\r\n\r\nhttps://github.com/octomix/josson\r\n\r\n    Josson josson = Josson.fromJsonString(\r\n        &quot;{\\&quot;GroupMembers\\&quot;:{\\&quot;group1\\&quot;:[\\&quot;member1\\&quot;,\\&quot;member2\\&quot;,\\&quot;member3\\&quot;],\\&quot;group2\\&quot;:[\\&quot;member1\\&quot;,\\&quot;member4\\&quot;,\\&quot;member6\\&quot;,\\&quot;member8\\&quot;],\\&quot;group3\\&quot;:[\\&quot;member2\\&quot;,\\&quot;member6\\&quot;]}}&quot;);\r\n    JsonNode node = josson.getNode(\r\n        &quot;map(GroupMembers.entries().map(groupId:key, memberId:value).unwind(memberId))&quot;);\r\n    System.out.println(node.toPrettyString());\r\n\r\n__Output__\r\n\r\n    {\r\n      &quot;GroupMembers&quot; : [ {\r\n        &quot;groupId&quot; : &quot;group1&quot;,\r\n        &quot;memberId&quot; : &quot;member1&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group1&quot;,\r\n        &quot;memberId&quot; : &quot;member2&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group1&quot;,\r\n        &quot;memberId&quot; : &quot;member3&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group2&quot;,\r\n        &quot;memberId&quot; : &quot;member1&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group2&quot;,\r\n        &quot;memberId&quot; : &quot;member4&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group2&quot;,\r\n        &quot;memberId&quot; : &quot;member6&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group2&quot;,\r\n        &quot;memberId&quot; : &quot;member8&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group3&quot;,\r\n        &quot;memberId&quot; : &quot;member2&quot;\r\n      }, {\r\n        &quot;groupId&quot; : &quot;group3&quot;,\r\n        &quot;memberId&quot; : &quot;member6&quot;\r\n      } ]\r\n    }\r\n","title":"Jolt: Convert string array into individual objects","body":"<p>You may consider another library <em>Josson</em> to do the JSON transformation.</p>\n<p><a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">https://github.com/octomix/josson</a></p>\n<pre><code>Josson josson = Josson.fromJsonString(\n    &quot;{\\&quot;GroupMembers\\&quot;:{\\&quot;group1\\&quot;:[\\&quot;member1\\&quot;,\\&quot;member2\\&quot;,\\&quot;member3\\&quot;],\\&quot;group2\\&quot;:[\\&quot;member1\\&quot;,\\&quot;member4\\&quot;,\\&quot;member6\\&quot;,\\&quot;member8\\&quot;],\\&quot;group3\\&quot;:[\\&quot;member2\\&quot;,\\&quot;member6\\&quot;]}}&quot;);\nJsonNode node = josson.getNode(\n    &quot;map(GroupMembers.entries().map(groupId:key, memberId:value).unwind(memberId))&quot;);\nSystem.out.println(node.toPrettyString());\n</code></pre>\n<p><strong>Output</strong></p>\n<pre><code>{\n  &quot;GroupMembers&quot; : [ {\n    &quot;groupId&quot; : &quot;group1&quot;,\n    &quot;memberId&quot; : &quot;member1&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group1&quot;,\n    &quot;memberId&quot; : &quot;member2&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group1&quot;,\n    &quot;memberId&quot; : &quot;member3&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group2&quot;,\n    &quot;memberId&quot; : &quot;member1&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group2&quot;,\n    &quot;memberId&quot; : &quot;member4&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group2&quot;,\n    &quot;memberId&quot; : &quot;member6&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group2&quot;,\n    &quot;memberId&quot; : &quot;member8&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group3&quot;,\n    &quot;memberId&quot; : &quot;member2&quot;\n  }, {\n    &quot;groupId&quot; : &quot;group3&quot;,\n    &quot;memberId&quot; : &quot;member6&quot;\n  } ]\n}\n</code></pre>\n"}],"owner":{"account_id":6098948,"reputation":295,"user_id":4758691,"display_name":"Praveen Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76836915,"answer_count":2,"score":1,"last_activity_date":1691217514,"creation_date":1691154538,"question_id":76836230,"body_markdown":"I&#39;m trying to convert an array of strings into objects. Which is not workings as I expected. Can someone help me with this?\r\n\r\nI got struck by splitting the array of items into individual objects. Some of the items are forming as an array only.\r\n\r\nInput JSON:\r\n```json\r\n{\r\n  &quot;GroupMembers&quot;: {\r\n    &quot;group1&quot;: [\r\n      &quot;member1&quot;,\r\n      &quot;member2&quot;,\r\n      &quot;member3&quot;\r\n    ],\r\n    &quot;group2&quot;: [\r\n      &quot;member1&quot;,\r\n      &quot;member4&quot;,\r\n      &quot;member6&quot;,\r\n      &quot;member8&quot;\r\n    ],\r\n    &quot;group3&quot;: [\r\n      &quot;member2&quot;,\r\n      &quot;member6&quot;\r\n    ]\r\n  }\r\n}\r\n```\r\nMy Spec File:\r\n```json\r\n[\r\n  {\r\n    &quot;operation&quot;: &quot;shift&quot;,\r\n    &quot;spec&quot;: {\r\n      &quot;GroupMembers&quot;: {\r\n        &quot;*&quot;: {\r\n          &quot;*&quot;: {\r\n            &quot;@(1,[&amp;])&quot;: {\r\n              &quot;*&quot;: {\r\n                &quot;$(3)&quot;: &quot;GroupMembers[#4].groupId&quot;,\r\n                &quot;$&quot;: &quot;GroupMembers[#4].memberId&quot;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n]\r\n```\r\n\r\nand my expected output is\r\n\r\n```json\r\n{\r\n  &quot;GroupMembers&quot;: [\r\n    {\r\n      &quot;groupId&quot;: &quot;group1&quot;,\r\n      &quot;memberId&quot;: &quot;member1&quot;\r\n    },\r\n    {\r\n      &quot;groupId&quot;: &quot;group1&quot;,\r\n      &quot;memberId&quot;: &quot;member2&quot;\r\n    },\r\n    {\r\n      &quot;groupId&quot;: &quot;group1&quot;,\r\n      &quot;memberId&quot;: &quot;member3&quot;\r\n    },\r\n    {\r\n      &quot;groupId&quot;: &quot;group2&quot;,\r\n      &quot;memberId&quot;: &quot;member1&quot;\r\n    },\r\n       .....\r\n       .....    \r\n    {\r\n      &quot;groupId&quot;: &quot;group3&quot;,\r\n      &quot;memberId&quot;: &quot;member6&quot;\r\n    }\r\n  ]\r\n}\r\n```\r\n\r\n","title":"Jolt: Convert string array into individual objects","body":"<p>I'm trying to convert an array of strings into objects. Which is not workings as I expected. Can someone help me with this?</p>\n<p>I got struck by splitting the array of items into individual objects. Some of the items are forming as an array only.</p>\n<p>Input JSON:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;GroupMembers&quot;: {\n    &quot;group1&quot;: [\n      &quot;member1&quot;,\n      &quot;member2&quot;,\n      &quot;member3&quot;\n    ],\n    &quot;group2&quot;: [\n      &quot;member1&quot;,\n      &quot;member4&quot;,\n      &quot;member6&quot;,\n      &quot;member8&quot;\n    ],\n    &quot;group3&quot;: [\n      &quot;member2&quot;,\n      &quot;member6&quot;\n    ]\n  }\n}\n</code></pre>\n<p>My Spec File:</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;GroupMembers&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: {\n            &quot;@(1,[&amp;])&quot;: {\n              &quot;*&quot;: {\n                &quot;$(3)&quot;: &quot;GroupMembers[#4].groupId&quot;,\n                &quot;$&quot;: &quot;GroupMembers[#4].memberId&quot;\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n]\n</code></pre>\n<p>and my expected output is</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;GroupMembers&quot;: [\n    {\n      &quot;groupId&quot;: &quot;group1&quot;,\n      &quot;memberId&quot;: &quot;member1&quot;\n    },\n    {\n      &quot;groupId&quot;: &quot;group1&quot;,\n      &quot;memberId&quot;: &quot;member2&quot;\n    },\n    {\n      &quot;groupId&quot;: &quot;group1&quot;,\n      &quot;memberId&quot;: &quot;member3&quot;\n    },\n    {\n      &quot;groupId&quot;: &quot;group2&quot;,\n      &quot;memberId&quot;: &quot;member1&quot;\n    },\n       .....\n       .....    \n    {\n      &quot;groupId&quot;: &quot;group3&quot;,\n      &quot;memberId&quot;: &quot;member6&quot;\n    }\n  ]\n}\n</code></pre>\n"},{"tags":["java","class","oop","inheritance","package"],"comments":[{"owner":{"account_id":24614246,"reputation":577,"user_id":18515436,"display_name":"eng"},"score":2,"creation_date":1691215267,"post_id":76840339,"comment_id":135464809,"body_markdown":"Providing CODE instead of images of it helps to get much faster recommendations from the community.it is one of the reasons that you get Downvote","body":"Providing CODE instead of images of it helps to get much faster recommendations from the community.it is one of the reasons that you get Downvote"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":4,"creation_date":1691215395,"post_id":76840339,"comment_id":135464819,"body_markdown":"Please read: [Why should I not upload images of code/data/errors?](https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question)","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/285551/why-not-upload-images-of-code-errors-when-asking-a-question\">Why should I not upload images of code/data/errors?</a>"},{"owner":{"account_id":6982783,"reputation":326,"user_id":5354987,"display_name":"Samuel Marchant"},"score":0,"creation_date":1691216904,"post_id":76840339,"comment_id":135464943,"body_markdown":"You could try (I would be curious to know).....  Put in the same folder a new file in with the correct name and same name class as the new file.java and public, and it should be extended from the class you do not want to change(has main method in it).","body":"You could try (I would be curious to know).....  Put in the same folder a new file in with the correct name and same name class as the new file.java and public, and it should be extended from the class you do not want to change(has main method in it)."},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691217144,"post_id":76840339,"comment_id":135464968,"body_markdown":"One file can contain at most one public, top-level class. So the answer is: put your classes in their own files.","body":"One file can contain at most one public, top-level class. So the answer is: put your classes in their own files."},{"owner":{"account_id":3267988,"reputation":83574,"user_id":2752075,"accept_rate":89,"display_name":"HolyBlackCat"},"score":0,"creation_date":1692765673,"post_id":76840339,"comment_id":135667305,"body_markdown":"Just want to say: don&#39;t get discouraged by the downvotes, this is actually a nice place if you follow all the (un)written rules.","body":"Just want to say: don&#39;t get discouraged by the downvotes, this is actually a nice place if you follow all the (un)written rules."}],"answers":[{"tags":[],"owner":{"display_name":"user2453382"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691217411,"creation_date":1691217411,"answer_id":76840431,"question_id":76840339,"body_markdown":"Answer 1: Importing package has nothing to do with how many `main` methods you have. `main` method under public class will be executed by default.\r\n\r\nAnswer 2: Your java file must have same name as your public class. See [this][1] stackoverflow answer to the question **Can a java file have more than one class?**:\r\n\r\n&gt; Yes, it can. However, there can only be one public top-level class per\r\n&gt; .java file, and public top-level classes must have the same name as\r\n&gt; the source file.\r\n&gt; \r\n&gt; The purpose of including multiple classes in one source file is to\r\n&gt; bundle related support functionality (internal data structures,\r\n&gt; support classes, etc) together with the main public class. Note that\r\n&gt; it is always OK not to do this--the only effect is on the readability\r\n&gt; (or not) of your code.\r\n\r\n\r\nBasically you can declare `public static void main(String[] args)` inside that public class. Which you did in class `OOP3`. \r\n\r\nAnswer 3: If you have different classes in a package you can use them like this:\r\n\r\n```java\r\nimport packagename.ClassA;\r\nimport packagename.ClassB;\r\n\r\npublic class OOP {\r\n    \r\n    public static void main(String[] args) {\r\n        ClassA objA = new ClassA();\r\n        ClassB objB = new ClassB();\r\n        objA.doSomething();\r\n        // etc.\r\n    }\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/968360/2453382\r\n  ","title":"If I want to make a package can I not have a main method in the file?","body":"<p>Answer 1: Importing package has nothing to do with how many <code>main</code> methods you have. <code>main</code> method under public class will be executed by default.</p>\n<p>Answer 2: Your java file must have same name as your public class. See <a href=\"https://stackoverflow.com/a/968360/2453382\">this</a> stackoverflow answer to the question <strong>Can a java file have more than one class?</strong>:</p>\n<blockquote>\n<p>Yes, it can. However, there can only be one public top-level class per\n.java file, and public top-level classes must have the same name as\nthe source file.</p>\n<p>The purpose of including multiple classes in one source file is to\nbundle related support functionality (internal data structures,\nsupport classes, etc) together with the main public class. Note that\nit is always OK not to do this--the only effect is on the readability\n(or not) of your code.</p>\n</blockquote>\n<p>Basically you can declare <code>public static void main(String[] args)</code> inside that public class. Which you did in class <code>OOP3</code>.</p>\n<p>Answer 3: If you have different classes in a package you can use them like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import packagename.ClassA;\nimport packagename.ClassB;\n\npublic class OOP {\n    \n    public static void main(String[] args) {\n        ClassA objA = new ClassA();\n        ClassB objB = new ClassB();\n        objA.doSomething();\n        // etc.\n    }\n\n}\n</code></pre>\n"}],"owner":{"account_id":26714354,"reputation":1,"user_id":20319168,"display_name":"Squash101"},"comment_count":5,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":46,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"closed_date":1691232122,"answer_count":1,"score":-3,"last_activity_date":1691217411,"creation_date":1691215124,"question_id":76840339,"body_markdown":"I am just learning about OOP in Java, and I&#39;m kinda running into a bug. I want to import a package onto another file. I want to import everything from the package, but it tells me to declare it public which makes sense but if I declare it public then it wants be to re-name the entire file. is there a way around this? Like if I have a few different classes in one package how would I create the objects on the other file?\r\n\r\n[enter image description here](https://i.stack.imgur.com/hChCV.png)\r\n\r\n[enter image description here](https://i.stack.imgur.com/DTUUg.png)\r\n\r\nI tried re-naming the file name and made it the same as the class.","title":"If I want to make a package can I not have a main method in the file?","body":"<p>I am just learning about OOP in Java, and I'm kinda running into a bug. I want to import a package onto another file. I want to import everything from the package, but it tells me to declare it public which makes sense but if I declare it public then it wants be to re-name the entire file. is there a way around this? Like if I have a few different classes in one package how would I create the objects on the other file?</p>\n<p><a href=\"https://i.stack.imgur.com/hChCV.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p><a href=\"https://i.stack.imgur.com/DTUUg.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I tried re-naming the file name and made it the same as the class.</p>\n"},{"tags":["java","java-time","localdate"],"comments":[{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1691034307,"post_id":76824758,"comment_id":135436837,"body_markdown":"Please edit your question to include the code you have written, and explain exactly where you are stuck.","body":"Please edit your question to include the code you have written, and explain exactly where you are stuck."},{"owner":{"account_id":7332473,"reputation":11,"user_id":5584897,"display_name":"venu"},"score":0,"creation_date":1691036086,"post_id":76824758,"comment_id":135436987,"body_markdown":"Need to merge all overlap period and keep remaining non overlap period in resultList","body":"Need to merge all overlap period and keep remaining non overlap period in resultList"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1691036204,"post_id":76824758,"comment_id":135436996,"body_markdown":"Please edit your question to include the code you have written, and explain exactly where you are stuck.","body":"Please edit your question to include the code you have written, and explain exactly where you are stuck."},{"owner":{"account_id":7332473,"reputation":11,"user_id":5584897,"display_name":"venu"},"score":0,"creation_date":1691037073,"post_id":76824758,"comment_id":135437079,"body_markdown":"@tgdavies yeah did it","body":"@tgdavies yeah did it"}],"owner":{"account_id":7332473,"reputation":11,"user_id":5584897,"display_name":"venu"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":58,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1691215644,"creation_date":1691033946,"question_id":76824758,"body_markdown":"Consider below example , inputList has overlap date ranges\r\n\r\n```java\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 1), LocalDate.of(2023, 7, 10)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 5), LocalDate.of(2023, 7, 30)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 10), LocalDate.of(2023, 7, 20)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 15), LocalDate.of(2023, 7, 20)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 8, 1), LocalDate.of(2023, 8, 20)));\r\n```\r\n\r\nNeed to merge all overlap period and keep remaining non overlap period in resultList \r\n\r\n```java\r\n        resultList(new DateRange(LocalDate.of(2023, 7, 1), LocalDate.of(2023, 7, 04)));\r\n         resultLis(new DateRange(LocalDate.of(2023, 7, 5), LocalDate.of(2023, 7, 09)));\r\n         resultLis(new DateRange(LocalDate.of(2023, 7, 10), LocalDate.of(2023, 7, 10)));\r\n         resultLis(new DateRange(LocalDate.of(2023, 7, 11), LocalDate.of(2023, 7, 14)));\r\n         resultLis(new DateRange(LocalDate.of(2023, 7, 15), LocalDate.of(2023, 7, 20)));\r\n         resultLis(new DateRange(LocalDate.of(2023, 7, 21), LocalDate.of(2023, 7, 30)));\r\n         resultLis(new DateRange(LocalDate.of(2023, 8, 1), LocalDate.of(2023, 8, 20)));\r\n```\r\n\r\nWith below code after overlap periods not splitting\r\n\r\n```java\r\nclass DateRange {\r\n    LocalDate start;\r\n    LocalDate end;\r\n\r\n    public DateRange(LocalDate start, LocalDate end) {\r\n        this.start = start;\r\n        this.end = end;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return &quot;DateRange [start=&quot; + start + &quot;, end=&quot; + end + &quot;]&quot;;\r\n    }\r\n}\r\n\r\npublic class Main1 {\r\n    public static void main(String[] args) {\r\n        List&lt;DateRange&gt; inputList = new ArrayList&lt;&gt;();\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 1), LocalDate.of(2023, 7, 10)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 5), LocalDate.of(2023, 7, 30)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 10), LocalDate.of(2023, 7, 20)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 15), LocalDate.of(2023, 7, 20)));\r\n        inputList.add(new DateRange(LocalDate.of(2023, 8, 1), LocalDate.of(2023, 8, 20)));\r\n\r\n        List&lt;DateRange&gt; resultList = processDateRanges(inputList);\r\n        resultList.forEach(System.out::println);\r\n    }\r\n    public static List&lt;DateRange&gt; processDateRanges(List&lt;DateRange&gt; inputList) {\r\n        List&lt;DateRange&gt; result = new ArrayList&lt;&gt;();\r\n        Collections.sort(inputList, Comparator.comparing(r -&gt; r.start));\r\n\r\n        for (int i = 0; i &lt; inputList.size(); i++) {\r\n            DateRange current = inputList.get(i);\r\n            LocalDate start = current.start;\r\n            LocalDate end = current.end;\r\n\r\n            for (int j = i + 1; j &lt; inputList.size(); j++) {\r\n                DateRange next = inputList.get(j);\r\n                if (next.start.isAfter(end.plusDays(1))) break;\r\n\r\n                if (next.start.isAfter(start)) {\r\n                    result.add(new DateRange(start, next.start.minusDays(1)));\r\n                }\r\n                if (next.end.isBefore(end)) {\r\n                    result.add(new DateRange(next.start, next.end));\r\n                    start = next.end.plusDays(1);\r\n                } else {\r\n                    start = next.start;\r\n                    end = next.end;\r\n                }\r\n            }\r\n            result.add(new DateRange(start, end));\r\n            while (i + 1 &lt; inputList.size() &amp;&amp; inputList.get(i + 1).start.isBefore(end.plusDays(1))) {\r\n                i++;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n\r\n}\r\n```\r\n\r\nGetting output as \r\n\r\n1. 2023-07-01 - 2023-07-04\r\n2. 2023-07-05 - 2023-07-09\r\n3. 2023-07-10 - 2023-07-20\r\n4. 2023-07-15 - 2023-07-20\r\n5. 2023-07-21 - 2023-07-30\r\n6. 2023-08-01 - 2023-08-20\r\n\r\nExpecting as below\r\n\r\n 1. 2023-07-01 - 2023-07-04 - Before overlap period of 1st record\r\n 2. 2023-07-05 - 2023-07-09 - overlap with 1st and 2nd record\r\n 3. 2023-07-10 - 2023-07-10 - overlap with 1st, 2nd and 3rd record\r\n 4. 2023-07-11 - 2023-07-14 - overlap with 2nd and 3rd record\r\n 5. 2023-07-15 - 2023-07-20 - overlap with 2nd , 3rd and 4th record\r\n 6. 2023-07-21 - 2023-07-30 - after overlap period of 2nd record \r\n 7. 2023-08-01 - 2023-08-20 - Non overlap period","title":"List has custom object with overlap date ranges need to break all overlap ranges into new periods and keep non overlap AS IS in java","body":"<p>Consider below example , inputList has overlap date ranges</p>\n<pre class=\"lang-java prettyprint-override\"><code>        inputList.add(new DateRange(LocalDate.of(2023, 7, 1), LocalDate.of(2023, 7, 10)));\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 5), LocalDate.of(2023, 7, 30)));\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 10), LocalDate.of(2023, 7, 20)));\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 15), LocalDate.of(2023, 7, 20)));\n        inputList.add(new DateRange(LocalDate.of(2023, 8, 1), LocalDate.of(2023, 8, 20)));\n</code></pre>\n<p>Need to merge all overlap period and keep remaining non overlap period in resultList</p>\n<pre class=\"lang-java prettyprint-override\"><code>        resultList(new DateRange(LocalDate.of(2023, 7, 1), LocalDate.of(2023, 7, 04)));\n         resultLis(new DateRange(LocalDate.of(2023, 7, 5), LocalDate.of(2023, 7, 09)));\n         resultLis(new DateRange(LocalDate.of(2023, 7, 10), LocalDate.of(2023, 7, 10)));\n         resultLis(new DateRange(LocalDate.of(2023, 7, 11), LocalDate.of(2023, 7, 14)));\n         resultLis(new DateRange(LocalDate.of(2023, 7, 15), LocalDate.of(2023, 7, 20)));\n         resultLis(new DateRange(LocalDate.of(2023, 7, 21), LocalDate.of(2023, 7, 30)));\n         resultLis(new DateRange(LocalDate.of(2023, 8, 1), LocalDate.of(2023, 8, 20)));\n</code></pre>\n<p>With below code after overlap periods not splitting</p>\n<pre class=\"lang-java prettyprint-override\"><code>class DateRange {\n    LocalDate start;\n    LocalDate end;\n\n    public DateRange(LocalDate start, LocalDate end) {\n        this.start = start;\n        this.end = end;\n    }\n\n    @Override\n    public String toString() {\n        return &quot;DateRange [start=&quot; + start + &quot;, end=&quot; + end + &quot;]&quot;;\n    }\n}\n\npublic class Main1 {\n    public static void main(String[] args) {\n        List&lt;DateRange&gt; inputList = new ArrayList&lt;&gt;();\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 1), LocalDate.of(2023, 7, 10)));\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 5), LocalDate.of(2023, 7, 30)));\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 10), LocalDate.of(2023, 7, 20)));\n        inputList.add(new DateRange(LocalDate.of(2023, 7, 15), LocalDate.of(2023, 7, 20)));\n        inputList.add(new DateRange(LocalDate.of(2023, 8, 1), LocalDate.of(2023, 8, 20)));\n\n        List&lt;DateRange&gt; resultList = processDateRanges(inputList);\n        resultList.forEach(System.out::println);\n    }\n    public static List&lt;DateRange&gt; processDateRanges(List&lt;DateRange&gt; inputList) {\n        List&lt;DateRange&gt; result = new ArrayList&lt;&gt;();\n        Collections.sort(inputList, Comparator.comparing(r -&gt; r.start));\n\n        for (int i = 0; i &lt; inputList.size(); i++) {\n            DateRange current = inputList.get(i);\n            LocalDate start = current.start;\n            LocalDate end = current.end;\n\n            for (int j = i + 1; j &lt; inputList.size(); j++) {\n                DateRange next = inputList.get(j);\n                if (next.start.isAfter(end.plusDays(1))) break;\n\n                if (next.start.isAfter(start)) {\n                    result.add(new DateRange(start, next.start.minusDays(1)));\n                }\n                if (next.end.isBefore(end)) {\n                    result.add(new DateRange(next.start, next.end));\n                    start = next.end.plusDays(1);\n                } else {\n                    start = next.start;\n                    end = next.end;\n                }\n            }\n            result.add(new DateRange(start, end));\n            while (i + 1 &lt; inputList.size() &amp;&amp; inputList.get(i + 1).start.isBefore(end.plusDays(1))) {\n                i++;\n            }\n        }\n\n        return result;\n    }\n\n}\n</code></pre>\n<p>Getting output as</p>\n<ol>\n<li>2023-07-01 - 2023-07-04</li>\n<li>2023-07-05 - 2023-07-09</li>\n<li>2023-07-10 - 2023-07-20</li>\n<li>2023-07-15 - 2023-07-20</li>\n<li>2023-07-21 - 2023-07-30</li>\n<li>2023-08-01 - 2023-08-20</li>\n</ol>\n<p>Expecting as below</p>\n<ol>\n<li>2023-07-01 - 2023-07-04 - Before overlap period of 1st record</li>\n<li>2023-07-05 - 2023-07-09 - overlap with 1st and 2nd record</li>\n<li>2023-07-10 - 2023-07-10 - overlap with 1st, 2nd and 3rd record</li>\n<li>2023-07-11 - 2023-07-14 - overlap with 2nd and 3rd record</li>\n<li>2023-07-15 - 2023-07-20 - overlap with 2nd , 3rd and 4th record</li>\n<li>2023-07-21 - 2023-07-30 - after overlap period of 2nd record</li>\n<li>2023-08-01 - 2023-08-20 - Non overlap period</li>\n</ol>\n"},{"tags":["java","gradle","getter-setter"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1691213718,"post_id":76840210,"comment_id":135464707,"body_markdown":"`while (true){` is an infinite loop, it will never complete.  It&#39;s not directly causing your problem, but I don&#39;t understand why you would use it.","body":"<code>while (true){</code> is an infinite loop, it will never complete.  It&#39;s not directly causing your problem, but I don&#39;t understand why you would use it."},{"owner":{"account_id":17981792,"reputation":21,"user_id":20117603,"display_name":"pradeep"},"score":0,"creation_date":1691214015,"post_id":76840210,"comment_id":135464729,"body_markdown":"first , I run my first module then I run the second one . so , I used while loop.","body":"first , I run my first module then I run the second one . so , I used while loop."}],"answers":[{"comments":[{"owner":{"account_id":17981792,"reputation":21,"user_id":20117603,"display_name":"pradeep"},"score":0,"creation_date":1691214070,"post_id":76840294,"comment_id":135464734,"body_markdown":"no , I want to set the value from main method.","body":"no , I want to set the value from main method."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1691214126,"post_id":76840294,"comment_id":135464740,"body_markdown":"Well, first, don&#39;t put an infinite loop in a method you intend to call.  Why do that?","body":"Well, first, don&#39;t put an infinite loop in a method you intend to call.  Why do that?"},{"owner":{"account_id":17981792,"reputation":21,"user_id":20117603,"display_name":"pradeep"},"score":0,"creation_date":1691216413,"post_id":76840294,"comment_id":135464908,"body_markdown":"please saw my project in github repo then only you understand this problem. I have two modules in gradle project. repo link : https://github.com/Jeevasimba/connection_between_two_modules_in_java","body":"please saw my project in github repo then only you understand this problem. I have two modules in gradle project. repo link : <a href=\"https://github.com/Jeevasimba/connection_between_two_modules_in_java\" rel=\"nofollow noreferrer\">github.com/Jeevasimba/connection_between_two_modules_in_java</a>"}],"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691214312,"creation_date":1691213826,"answer_id":76840294,"question_id":76840210,"body_markdown":"Your code is rather strange, I don&#39;t know what you are trying to do.  Maybe a more complete example will clarify the issue.  For an immediate answer, you could use static initialization here.\r\n\r\n    package org.example;\r\n    \r\n    public class Main {\r\n    \r\n        static String c = &quot;hai&quot;;\r\n    \r\n        public static void main(String[] args) {\r\n        }\r\n    \r\n        public String geta(){\r\n            return c;\r\n        }\r\n    }\r\n\r\nTo access a field that is initialized by a method, you must call the method first.  Don&#39;t put infinite loops or bad code in those methods, they won&#39;t finish.\r\n\r\n    package org.p;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            org.example.Main a = new org.example.Main();\r\n            a.main(null);\r\n            System.out.println(a.geta());\r\n        }\r\n    }\r\n\r\nThe new class:\r\n\r\n    package org.example;\r\n    \r\n    public class Main {\r\n    \r\n        private static String c;\r\n    \r\n        public static void main(String[] args) {\r\n           c  = &quot;hai&quot;;\r\n        }\r\n    \r\n        public String geta(){\r\n            return c;\r\n        }\r\n    }\r\n","title":"How to get values from one module to another in gradle java project?","body":"<p>Your code is rather strange, I don't know what you are trying to do.  Maybe a more complete example will clarify the issue.  For an immediate answer, you could use static initialization here.</p>\n<pre><code>package org.example;\n\npublic class Main {\n\n    static String c = &quot;hai&quot;;\n\n    public static void main(String[] args) {\n    }\n\n    public String geta(){\n        return c;\n    }\n}\n</code></pre>\n<p>To access a field that is initialized by a method, you must call the method first.  Don't put infinite loops or bad code in those methods, they won't finish.</p>\n<pre><code>package org.p;\n\npublic class Main {\n    public static void main(String[] args) {\n        org.example.Main a = new org.example.Main();\n        a.main(null);\n        System.out.println(a.geta());\n    }\n}\n</code></pre>\n<p>The new class:</p>\n<pre><code>package org.example;\n\npublic class Main {\n\n    private static String c;\n\n    public static void main(String[] args) {\n       c  = &quot;hai&quot;;\n    }\n\n    public String geta(){\n        return c;\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":17981792,"reputation":21,"user_id":20117603,"display_name":"pradeep"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":36,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1691214312,"creation_date":1691211977,"question_id":76840210,"body_markdown":"I created two modules in my project.\r\n\r\nI want to get value from one module to another module. \r\n\r\n\r\n\r\n\r\n[my project&#39;s github link](https://github.com/Jeevasimba/connection_between_two_modules_in_java)\r\n\r\nIn my first module : \r\n\r\n    package org.example;\r\n\r\n    public class Main {\r\n\r\n        static String c;\r\n        public static void main(String[] args) {\r\n        c = &quot;hai&quot;;\r\n        while (true){\r\n\r\n        }\r\n        }\r\n\r\n        public String geta(){\r\n            return c;\r\n        }\r\n    }\r\n\r\n\r\nIn my second module :\r\n\r\n    package org.p;\r\n\r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            org.example.Main a = new org.example.Main();\r\n            System.out.println(a.geta());\r\n        }\r\n    }\r\n\r\n\r\n**OUTPUT**\r\n\r\n    null\r\n\r\n\r\n[project structure](https://i.stack.imgur.com/oETNg.png)\r\n\r\nHow can I solve this problem ?","title":"How to get values from one module to another in gradle java project?","body":"<p>I created two modules in my project.</p>\n<p>I want to get value from one module to another module.</p>\n<p><a href=\"https://github.com/Jeevasimba/connection_between_two_modules_in_java\" rel=\"nofollow noreferrer\">my project's github link</a></p>\n<p>In my first module :</p>\n<pre><code>package org.example;\n\npublic class Main {\n\n    static String c;\n    public static void main(String[] args) {\n    c = &quot;hai&quot;;\n    while (true){\n\n    }\n    }\n\n    public String geta(){\n        return c;\n    }\n}\n</code></pre>\n<p>In my second module :</p>\n<pre><code>package org.p;\n\npublic class Main {\n    public static void main(String[] args) {\n        org.example.Main a = new org.example.Main();\n        System.out.println(a.geta());\n    }\n}\n</code></pre>\n<p><strong>OUTPUT</strong></p>\n<pre><code>null\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/oETNg.png\" rel=\"nofollow noreferrer\">project structure</a></p>\n<p>How can I solve this problem ?</p>\n"},{"tags":["java","spring-mvc","spring-boot","resttemplate"],"comments":[{"owner":{"account_id":1336108,"reputation":8046,"user_id":1278839,"accept_rate":69,"display_name":"CodeChimp"},"score":2,"creation_date":1360166485,"post_id":14726082,"comment_id":20613779,"body_markdown":"Why couldn&#39;t you use something like Apache w/ mod_rewrite or mod_proxy to do this?  You would basically put a webserver outside your firewall (usually we call this the DMZ), and setup rules in the FW that allows that server to talk to your server behind the firewall.  This is how most companies solve this problem.","body":"Why couldn&#39;t you use something like Apache w/ mod_rewrite or mod_proxy to do this?  You would basically put a webserver outside your firewall (usually we call this the DMZ), and setup rules in the FW that allows that server to talk to your server behind the firewall.  This is how most companies solve this problem."},{"owner":{"account_id":278030,"reputation":10509,"user_id":572380,"accept_rate":78,"display_name":"nilgun"},"score":0,"creation_date":1360743141,"post_id":14726082,"comment_id":20810934,"body_markdown":"thank you, i will try to talk to sys admins if your solution works for our case. Meanwhile i will be using resttemplate and  serialize/deserialize json data to string..","body":"thank you, i will try to talk to sys admins if your solution works for our case. Meanwhile i will be using resttemplate and  serialize/deserialize json data to string.."},{"owner":{"account_id":24299794,"reputation":231,"user_id":18243455,"display_name":"Patel Harsh"},"score":0,"creation_date":1671504502,"post_id":14726082,"comment_id":132108838,"body_markdown":"Can anyone tell me how to do this for any post request ? What changes to be made to do this for a Post request","body":"Can anyone tell me how to do this for any post request ? What changes to be made to do this for a Post request"}],"answers":[{"tags":[],"owner":{"account_id":2354419,"reputation":2234,"user_id":2062572,"display_name":"Chris H."},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1388790544,"creation_date":1388790544,"answer_id":20914371,"question_id":14726082,"body_markdown":"If you can get away with using a lower-level solution like mod_proxy that would be the simpler way to go, but if you need more control (e.g. security, translation, business logic) you may want to take a look at Apache Camel: http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html","title":"spring mvc rest service redirect / forward / proxy","body":"<p>If you can get away with using a lower-level solution like mod_proxy that would be the simpler way to go, but if you need more control (e.g. security, translation, business logic) you may want to take a look at Apache Camel: <a href=\"http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html\" rel=\"nofollow\">http://camel.apache.org/how-to-use-camel-as-a-http-proxy-between-a-client-and-server.html</a></p>\n"},{"comments":[{"owner":{"account_id":278030,"reputation":10509,"user_id":572380,"accept_rate":78,"display_name":"nilgun"},"score":0,"creation_date":1401483722,"post_id":23736527,"comment_id":36918642,"body_markdown":"I was expecting an answer like yours but it has been long time and I am no longer working on that project. Unfortunately it not possible for me to make comprehensive tests and confirm your code right now.","body":"I was expecting an answer like yours but it has been long time and I am no longer working on that project. Unfortunately it not possible for me to make comprehensive tests and confirm your code right now."},{"owner":{"account_id":1002576,"reputation":7185,"user_id":1017111,"accept_rate":94,"display_name":"WowBow"},"score":0,"creation_date":1427303785,"post_id":23736527,"comment_id":46726402,"body_markdown":"What would the URL and parameters would look like to this controller? I have called the right URL but I am getting &quot;the request sent by the client was syntactically incorrect&quot; ?","body":"What would the URL and parameters would look like to this controller? I have called the right URL but I am getting &quot;the request sent by the client was syntactically incorrect&quot; ?"},{"owner":{"account_id":1002576,"reputation":7185,"user_id":1017111,"accept_rate":94,"display_name":"WowBow"},"score":0,"creation_date":1427304038,"post_id":23736527,"comment_id":46726542,"body_markdown":"My original Method signature looks like this  (I didn&#39;t have RequestBody or HttpMethod at all )\n@RequestMapping(&quot;/getProduct&quot;)\n    public CustomMessage getCompanyResults(@RequestParam(&quot;search&quot;) String search,\n            @RequestParam(value = &quot;id&quot;, required = false) String rfgId,\n            @RequestParam(value = &quot;rowBegin&quot;, required = false) String )","body":"My original Method signature looks like this  (I didn&#39;t have RequestBody or HttpMethod at all ) @RequestMapping(&quot;/getProduct&quot;)     public CustomMessage getCompanyResults(@RequestParam(&quot;search&quot;) String search,             @RequestParam(value = &quot;id&quot;, required = false) String rfgId,             @RequestParam(value = &quot;rowBegin&quot;, required = false) String )"},{"owner":{"account_id":273936,"reputation":705,"user_id":565863,"accept_rate":92,"display_name":"Jonathan"},"score":0,"creation_date":1429060827,"post_id":23736527,"comment_id":47421911,"body_markdown":"This wouldn&#39;t work for multi-part requests, would it?","body":"This wouldn&#39;t work for multi-part requests, would it?"},{"owner":{"account_id":358039,"reputation":5846,"user_id":3248158,"display_name":"derkoe"},"score":1,"creation_date":1429509368,"post_id":23736527,"comment_id":47613472,"body_markdown":"I guess this won&#39;t work for multi-part requests! If you want to handle multi-part requests as well, you&#39;d have to implement a full HTTP proxy.","body":"I guess this won&#39;t work for multi-part requests! If you want to handle multi-part requests as well, you&#39;d have to implement a full HTTP proxy."},{"owner":{"account_id":346534,"reputation":764,"user_id":680124,"display_name":"Mayur Raiyani"},"score":0,"creation_date":1455018756,"post_id":23736527,"comment_id":58292377,"body_markdown":"How this will mirror all the headers in request as you mentioned below?","body":"How this will mirror all the headers in request as you mentioned below?"},{"owner":{"account_id":358039,"reputation":5846,"user_id":3248158,"display_name":"derkoe"},"score":0,"creation_date":1455183087,"post_id":23736527,"comment_id":58378433,"body_markdown":"The original answer did mirror the headers - the current one doesnt","body":"The original answer did mirror the headers - the current one doesnt"},{"owner":{"account_id":1331003,"reputation":503,"user_id":1274927,"display_name":"Alex Barkun"},"score":1,"creation_date":1480432934,"post_id":23736527,"comment_id":68954402,"body_markdown":"You can pass the headers. Just return not `String`, but `ResponseEntity`. You can create your own instance of `ResponseEntity` with some subset of responseEntity&#39;s headers or with some custom ones. Hope this will help someone.","body":"You can pass the headers. Just return not <code>String</code>, but <code>ResponseEntity</code>. You can create your own instance of <code>ResponseEntity</code> with some subset of responseEntity&#39;s headers or with some custom ones. Hope this will help someone."},{"owner":{"account_id":427496,"reputation":853,"user_id":809289,"accept_rate":79,"display_name":"k-den"},"score":0,"creation_date":1494528299,"post_id":23736527,"comment_id":74879762,"body_markdown":"@koe I am unable to get this to work for multipart/form-data in practice.","body":"@koe I am unable to get this to work for multipart/form-data in practice."},{"owner":{"account_id":358039,"reputation":5846,"user_id":3248158,"display_name":"derkoe"},"score":1,"creation_date":1503215658,"post_id":23736527,"comment_id":78516924,"body_markdown":"@k-den this implementation won&#39;t work for multipart since the files are not in the body. You&#39;ll have to implement special handling for that.","body":"@k-den this implementation won&#39;t work for multipart since the files are not in the body. You&#39;ll have to implement special handling for that."},{"owner":{"account_id":431507,"reputation":4944,"user_id":815612,"accept_rate":62,"display_name":"Jack M"},"score":2,"creation_date":1543834680,"post_id":23736527,"comment_id":94047321,"body_markdown":"If the REST API returns a 404 response or somesuch, will that get passed through as well? Or will the code just throw an exception?","body":"If the REST API returns a 404 response or somesuch, will that get passed through as well? Or will the code just throw an exception?"},{"owner":{"account_id":313626,"reputation":1356,"user_id":628371,"display_name":"Joachim Lous"},"score":0,"creation_date":1640190912,"post_id":23736527,"comment_id":124538563,"body_markdown":"How would this look with WebFlux?","body":"How would this look with WebFlux?"}],"tags":[],"owner":{"account_id":358039,"reputation":5846,"user_id":3248158,"display_name":"derkoe"},"comment_count":12,"down_vote_count":1,"up_vote_count":87,"is_accepted":false,"score":86,"last_activity_date":1524986037,"creation_date":1400498726,"answer_id":23736527,"question_id":14726082,"body_markdown":"You can mirror/proxy all requests with this:\r\n\r\n    private String server = &quot;localhost&quot;;\r\n    private int port = 8080;\r\n\r\n    @RequestMapping(&quot;/**&quot;)\r\n    @ResponseBody\r\n    public String mirrorRest(@RequestBody String body, HttpMethod method, HttpServletRequest request) throws URISyntaxException\r\n    {\r\n        URI uri = new URI(&quot;http&quot;, null, server, port, request.getRequestURI(), request.getQueryString(), null);\r\n\r\n        ResponseEntity&lt;String&gt; responseEntity =\r\n            restTemplate.exchange(uri, method, new HttpEntity&lt;String&gt;(body), String.class);\r\n\r\n        return responseEntity.getBody();\r\n    }\r\n\r\n\r\nThis will not mirror any headers.","title":"spring mvc rest service redirect / forward / proxy","body":"<p>You can mirror/proxy all requests with this:</p>\n\n<pre><code>private String server = \"localhost\";\nprivate int port = 8080;\n\n@RequestMapping(\"/**\")\n@ResponseBody\npublic String mirrorRest(@RequestBody String body, HttpMethod method, HttpServletRequest request) throws URISyntaxException\n{\n    URI uri = new URI(\"http\", null, server, port, request.getRequestURI(), request.getQueryString(), null);\n\n    ResponseEntity&lt;String&gt; responseEntity =\n        restTemplate.exchange(uri, method, new HttpEntity&lt;String&gt;(body), String.class);\n\n    return responseEntity.getBody();\n}\n</code></pre>\n\n<p>This will not mirror any headers.</p>\n"},{"comments":[{"owner":{"account_id":1728044,"reputation":412,"user_id":1582284,"accept_rate":80,"display_name":"Igor Donin"},"score":2,"creation_date":1543435601,"post_id":42760284,"comment_id":93923381,"body_markdown":"Doesn&#39;t that kinda burdens the application with all the Cloud dependencies? Tried to use Zuul by itself with no effect. Got examples of using Zuul without Cloud?","body":"Doesn&#39;t that kinda burdens the application with all the Cloud dependencies? Tried to use Zuul by itself with no effect. Got examples of using Zuul without Cloud?"},{"owner":{"account_id":1351343,"reputation":1331,"user_id":1290868,"display_name":"myuce"},"score":2,"creation_date":1620867992,"post_id":42760284,"comment_id":119331007,"body_markdown":"Zuul seems to be deprecated. Spring Cloud Gateway is the recommended way now.","body":"Zuul seems to be deprecated. Spring Cloud Gateway is the recommended way now."}],"tags":[],"owner":{"account_id":341924,"reputation":4071,"user_id":672798,"accept_rate":61,"display_name":"Muatik"},"comment_count":2,"down_vote_count":0,"up_vote_count":31,"is_accepted":false,"score":31,"last_activity_date":1571833035,"creation_date":1489397487,"answer_id":42760284,"question_id":14726082,"body_markdown":"You can use Netflix Zuul to route requests coming to a spring application to another spring application.\r\n\r\nLet&#39;s say you have two application: 1.songs-app, 2.api-gateway\r\n\r\nIn the api-gateway application, first add the zuul dependecy, then you can simply define your routing rule in application.yml as follows:\r\n\r\npom.xml\r\n\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\r\n        &lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\r\n        &lt;version&gt;LATEST&lt;/version&gt;\r\n    &lt;/dependency&gt;\r\n\r\napplication.yml\r\n\r\n    server:\r\n      port: 8080\r\n    zuul:\r\n      routes:\r\n        foos:\r\n          path: /api/songs/**\r\n          url: http://localhost:8081/songs/\r\n\r\nand lastly run the api-gateway application like:\r\n\r\n    @EnableZuulProxy\r\n    @SpringBootApplication\r\n    public class Application {\r\n        public static void main(String[] args) {\r\n            SpringApplication.run(Application.class, args);\r\n        }\r\n    }\r\n\r\nNow, the gateway will route all the `/api/songs/` requests to `http://localhost:8081/songs/`. \r\n\r\nA working example is here: https://github.com/muatik/spring-playground/tree/master/spring-api-gateway\r\n\r\nAnother resource: http://www.baeldung.com/spring-rest-with-zuul-proxy","title":"spring mvc rest service redirect / forward / proxy","body":"<p>You can use Netflix Zuul to route requests coming to a spring application to another spring application.</p>\n\n<p>Let's say you have two application: 1.songs-app, 2.api-gateway</p>\n\n<p>In the api-gateway application, first add the zuul dependecy, then you can simply define your routing rule in application.yml as follows:</p>\n\n<p>pom.xml</p>\n\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-cloud-starter-netflix-zuul&lt;/artifactId&gt;\n    &lt;version&gt;LATEST&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n\n<p>application.yml</p>\n\n<pre><code>server:\n  port: 8080\nzuul:\n  routes:\n    foos:\n      path: /api/songs/**\n      url: http://localhost:8081/songs/\n</code></pre>\n\n<p>and lastly run the api-gateway application like:</p>\n\n<pre><code>@EnableZuulProxy\n@SpringBootApplication\npublic class Application {\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n}\n</code></pre>\n\n<p>Now, the gateway will route all the <code>/api/songs/</code> requests to <code>http://localhost:8081/songs/</code>. </p>\n\n<p>A working example is here: <a href=\"https://github.com/muatik/spring-playground/tree/master/spring-api-gateway\" rel=\"noreferrer\">https://github.com/muatik/spring-playground/tree/master/spring-api-gateway</a></p>\n\n<p>Another resource: <a href=\"http://www.baeldung.com/spring-rest-with-zuul-proxy\" rel=\"noreferrer\">http://www.baeldung.com/spring-rest-with-zuul-proxy</a></p>\n"},{"comments":[{"owner":{"account_id":6710256,"reputation":389,"user_id":5173920,"display_name":"Richard Domingo"},"score":0,"creation_date":1537589181,"post_id":49429650,"comment_id":91849796,"body_markdown":"I tried this code and its almost perfect. Except how can I return the real error code from the proxied server? Your code always returns 500 instead of the real status error code.","body":"I tried this code and its almost perfect. Except how can I return the real error code from the proxied server? Your code always returns 500 instead of the real status error code."},{"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"score":0,"creation_date":1539873971,"post_id":49429650,"comment_id":92666799,"body_markdown":"I&#39;ve also modified my answer to include this behavior as I was actually missing out on it too.","body":"I&#39;ve also modified my answer to include this behavior as I was actually missing out on it too."},{"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"score":1,"creation_date":1549897809,"post_id":49429650,"comment_id":96059168,"body_markdown":"@Jeppz Does this also happen when you are not copying the headers? I mention this in my post specifically, since I ran into a similar issue, so in my case I just set content type to application/json and that&#39;s about it.","body":"@Jeppz Does this also happen when you are not copying the headers? I mention this in my post specifically, since I ran into a similar issue, so in my case I just set content type to application/json and that&#39;s about it."},{"owner":{"account_id":4458324,"reputation":922,"user_id":4875767,"accept_rate":86,"display_name":"Jeppz"},"score":0,"creation_date":1550052511,"post_id":49429650,"comment_id":96125208,"body_markdown":"@Veluria sorry, apparently I couldnt read properly that day. I did however run into issues with haproxy that was solved with some code from our old proxy servlet implementation `headerName != null &amp;&amp; !&quot;Transfer-Encoding&quot;.equals(headerName);`","body":"@Veluria sorry, apparently I couldnt read properly that day. I did however run into issues with haproxy that was solved with some code from our old proxy servlet implementation <code>headerName != null &amp;&amp; !&quot;Transfer-Encoding&quot;.equals(headerName);</code>"},{"owner":{"account_id":4458324,"reputation":922,"user_id":4875767,"accept_rate":86,"display_name":"Jeppz"},"score":0,"creation_date":1550663619,"post_id":49429650,"comment_id":96349786,"body_markdown":"@Veluria If I understand this correctly, this code would not include multipartfiles from a form, would that be possible to add in a nice way?","body":"@Veluria If I understand this correctly, this code would not include multipartfiles from a form, would that be possible to add in a nice way?"},{"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"score":0,"creation_date":1550745788,"post_id":49429650,"comment_id":96386562,"body_markdown":"@Jeppz Since you need `consumes=&quot;multipart/form-data&quot;` for this, I don&#39;t think it&#39;s possible to easily include this here, but if you succeed, let me know.","body":"@Jeppz Since you need <code>consumes=&quot;multipart&#47;form-data&quot;</code> for this, I don&#39;t think it&#39;s possible to easily include this here, but if you succeed, let me know."},{"owner":{"account_id":4458324,"reputation":922,"user_id":4875767,"accept_rate":86,"display_name":"Jeppz"},"score":4,"creation_date":1550759957,"post_id":49429650,"comment_id":96395802,"body_markdown":"@Veluria It&#39;s not the prettiest piece of code I&#39;ve written but it works in our case https://pastebin.com/LApUmpxx","body":"@Veluria It&#39;s not the prettiest piece of code I&#39;ve written but it works in our case <a href=\"https://pastebin.com/LApUmpxx\" rel=\"nofollow noreferrer\">pastebin.com/LApUmpxx</a>"},{"owner":{"account_id":3114594,"reputation":71,"user_id":2635670,"display_name":"BK1NG"},"score":0,"creation_date":1567790949,"post_id":49429650,"comment_id":102082827,"body_markdown":"Faced the same issue as the OP @Jeppz your code seems to work great with some minor adjustments. Ill let you know if I run into errors or have any issues. Thank you!","body":"Faced the same issue as the OP @Jeppz your code seems to work great with some minor adjustments. Ill let you know if I run into errors or have any issues. Thank you!"},{"owner":{"account_id":182164,"reputation":56,"user_id":416678,"display_name":"Housty"},"score":0,"creation_date":1585351062,"post_id":49429650,"comment_id":107738290,"body_markdown":"This works great, but for some reason I had to define a specific function for PUT. It just turns around and calls this function, so it&#39;s kinda weird. Worked fine if I disabled CORs in chrome, so I&#39;m guessing it&#39;s something around that. I do have an unusual situation where it&#39;s browser &lt;-&gt; apache proxy &lt;-&gt; spring proxy &lt;-&gt; service.","body":"This works great, but for some reason I had to define a specific function for PUT. It just turns around and calls this function, so it&#39;s kinda weird. Worked fine if I disabled CORs in chrome, so I&#39;m guessing it&#39;s something around that. I do have an unusual situation where it&#39;s browser &lt;-&gt; apache proxy &lt;-&gt; spring proxy &lt;-&gt; service."},{"owner":{"account_id":1326099,"reputation":4946,"user_id":1270865,"accept_rate":50,"display_name":"cafebabe1991"},"score":0,"creation_date":1646395196,"post_id":49429650,"comment_id":126118079,"body_markdown":"Can this be used to mirror https request as well? I mean will there be anything to take care of ?","body":"Can this be used to mirror https request as well? I mean will there be anything to take care of ?"},{"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"score":1,"creation_date":1646488269,"post_id":49429650,"comment_id":126138372,"body_markdown":"@cafebabe1991 Yes and not really. Just the headers.","body":"@cafebabe1991 Yes and not really. Just the headers."},{"owner":{"account_id":1326099,"reputation":4946,"user_id":1270865,"accept_rate":50,"display_name":"cafebabe1991"},"score":0,"creation_date":1646728226,"post_id":49429650,"comment_id":126189487,"body_markdown":"@Steffen I am getting an error related to serialization here. org.codehaus.jackson.map.JsonMappingException: No serializer found for class org.springframework.http.ResponseEntity and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS)","body":"@Steffen I am getting an error related to serialization here. org.codehaus.jackson.map.JsonMappingException: No serializer found for class org.springframework.http.ResponseEntity and no properties discovered to create BeanSerializer (to avoid exception, disable SerializationConfig.Feature.FAIL_ON_EMPTY_BEANS)"},{"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"score":0,"creation_date":1646816628,"post_id":49429650,"comment_id":126215181,"body_markdown":"@cafebabe1991 Well, did you try setting `spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false` in your `application.properties`?","body":"@cafebabe1991 Well, did you try setting <code>spring.jackson.serialization.FAIL_ON_EMPTY_BEANS=false</code> in your <code>application.properties</code>?"},{"owner":{"account_id":1326099,"reputation":4946,"user_id":1270865,"accept_rate":50,"display_name":"cafebabe1991"},"score":1,"creation_date":1646816987,"post_id":49429650,"comment_id":126215311,"body_markdown":"I couldn&#39;t get that to work so I had to map the ResponseEntity&lt;String&gt; into javax.response object and that seems to be working for me. But I&#39;ll try to do what you suggested as well.","body":"I couldn&#39;t get that to work so I had to map the ResponseEntity&lt;String&gt; into javax.response object and that seems to be working for me. But I&#39;ll try to do what you suggested as well."}],"tags":[],"owner":{"account_id":1869831,"reputation":4089,"user_id":1692341,"accept_rate":90,"display_name":"Steffen"},"comment_count":14,"down_vote_count":0,"up_vote_count":53,"is_accepted":false,"score":53,"last_activity_date":1539873936,"creation_date":1521724409,"answer_id":49429650,"question_id":14726082,"body_markdown":"Here&#39;s my modified version of the original answer, which differs in four points:\r\n\r\n1. It does not make the request body mandatory, and as such does not let GET requests fail.\r\n2. It copies all headers present in the original request. If you are using another proxy/web server, this can cause issues due to content length/gzip compression. Limit the headers to the ones you really need. \r\n3. It does *not* reencode the query params or the path. We expect them to be encoded anyway. Note that other parts of your URL might also be encoded. If that is the case for you, leverage the full potential of `UriComponentsBuilder`.\r\n4. It does return error codes from the server properly. \r\n\r\n&lt;a/&gt;\r\n\r\n\r\n    @RequestMapping(&quot;/**&quot;)\r\n    public ResponseEntity mirrorRest(@RequestBody(required = false) String body, \r\n        HttpMethod method, HttpServletRequest request, HttpServletResponse response) \r\n        throws URISyntaxException {\r\n        String requestUrl = request.getRequestURI();\r\n\r\n        URI uri = new URI(&quot;http&quot;, null, server, port, null, null, null);\r\n        uri = UriComponentsBuilder.fromUri(uri)\r\n                                  .path(requestUrl)\r\n                                  .query(request.getQueryString())\r\n                                  .build(true).toUri();\r\n\r\n        HttpHeaders headers = new HttpHeaders();\r\n        Enumeration&lt;String&gt; headerNames = request.getHeaderNames();\r\n        while (headerNames.hasMoreElements()) {\r\n            String headerName = headerNames.nextElement();\r\n            headers.set(headerName, request.getHeader(headerName));\r\n        }\r\n\r\n        HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(body, headers);\r\n        RestTemplate restTemplate = new RestTemplate();\r\n        try {\r\n            return restTemplate.exchange(uri, method, httpEntity, String.class);\r\n        } catch(HttpStatusCodeException e) {\r\n            return ResponseEntity.status(e.getRawStatusCode())\r\n                                 .headers(e.getResponseHeaders())\r\n                                 .body(e.getResponseBodyAsString());\r\n        }\r\n    }\r\n","title":"spring mvc rest service redirect / forward / proxy","body":"<p>Here's my modified version of the original answer, which differs in four points:</p>\n\n<ol>\n<li>It does not make the request body mandatory, and as such does not let GET requests fail.</li>\n<li>It copies all headers present in the original request. If you are using another proxy/web server, this can cause issues due to content length/gzip compression. Limit the headers to the ones you really need. </li>\n<li>It does <em>not</em> reencode the query params or the path. We expect them to be encoded anyway. Note that other parts of your URL might also be encoded. If that is the case for you, leverage the full potential of <code>UriComponentsBuilder</code>.</li>\n<li>It does return error codes from the server properly. </li>\n</ol>\n\n<p></p>\n\n<pre><code>@RequestMapping(\"/**\")\npublic ResponseEntity mirrorRest(@RequestBody(required = false) String body, \n    HttpMethod method, HttpServletRequest request, HttpServletResponse response) \n    throws URISyntaxException {\n    String requestUrl = request.getRequestURI();\n\n    URI uri = new URI(\"http\", null, server, port, null, null, null);\n    uri = UriComponentsBuilder.fromUri(uri)\n                              .path(requestUrl)\n                              .query(request.getQueryString())\n                              .build(true).toUri();\n\n    HttpHeaders headers = new HttpHeaders();\n    Enumeration&lt;String&gt; headerNames = request.getHeaderNames();\n    while (headerNames.hasMoreElements()) {\n        String headerName = headerNames.nextElement();\n        headers.set(headerName, request.getHeader(headerName));\n    }\n\n    HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(body, headers);\n    RestTemplate restTemplate = new RestTemplate();\n    try {\n        return restTemplate.exchange(uri, method, httpEntity, String.class);\n    } catch(HttpStatusCodeException e) {\n        return ResponseEntity.status(e.getRawStatusCode())\n                             .headers(e.getResponseHeaders())\n                             .body(e.getResponseBodyAsString());\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":3127182,"reputation":6869,"user_id":2645833,"accept_rate":54,"display_name":"krmanish007"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1545046792,"creation_date":1545046792,"answer_id":53814514,"question_id":14726082,"body_markdown":"You need something like `jetty transparent proxy`, which actually will redirect your call, and you get a chance to overwrite the request if you needed. You may get its detail at http://reanimatter.com/2016/01/25/embedded-jetty-as-http-proxy/","title":"spring mvc rest service redirect / forward / proxy","body":"<p>You need something like <code>jetty transparent proxy</code>, which actually will redirect your call, and you get a chance to overwrite the request if you needed. You may get its detail at <a href=\"http://reanimatter.com/2016/01/25/embedded-jetty-as-http-proxy/\" rel=\"nofollow noreferrer\">http://reanimatter.com/2016/01/25/embedded-jetty-as-http-proxy/</a></p>\n"},{"tags":[],"owner":{"account_id":10343555,"reputation":41,"user_id":7629176,"display_name":"love adu"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1548141764,"creation_date":1548141764,"answer_id":54303124,"question_id":14726082,"body_markdown":"proxy controller with oauth2\r\n\r\n```\r\n@RequestMapping(&quot;v9&quot;)\r\n@RestController\r\n@EnableConfigurationProperties\r\npublic class ProxyRestController {\r\n    Logger logger = LoggerFactory.getLogger(this.getClass());\r\n\r\n    @Autowired\r\n    OAuth2ProtectedResourceDetails oAuth2ProtectedResourceDetails;\r\n\r\n    @Autowired\r\n    private ClientCredentialsResourceDetails clientCredentialsResourceDetails;\r\n\r\n    @Autowired\r\n    OAuth2RestTemplate oAuth2RestTemplate;\r\n\r\n\r\n    @Value(&quot;${gateway.url:http://gateway/}&quot;)\r\n    String gatewayUrl;\r\n\r\n    @RequestMapping(value = &quot;/proxy/**&quot;)\r\n    public String proxy(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request, HttpServletResponse response,\r\n                        @RequestHeader HttpHeaders headers) throws ServletException, IOException, URISyntaxException {\r\n\r\n        body = body == null ? &quot;&quot; : body;\r\n        String path = request.getRequestURI();\r\n        String query = request.getQueryString();\r\n        path = path.replaceAll(&quot;.*/v9/proxy&quot;, &quot;&quot;);\r\n        StringBuffer urlBuilder = new StringBuffer(gatewayUrl);\r\n        if (path != null) {\r\n            urlBuilder.append(path);\r\n        }\r\n        if (query != null) {\r\n            urlBuilder.append(&#39;?&#39;);\r\n            urlBuilder.append(query);\r\n        }\r\n        URI url = new URI(urlBuilder.toString());\r\n        if (logger.isInfoEnabled()) {\r\n            logger.info(&quot;url: {} &quot;, url);\r\n            logger.info(&quot;method: {} &quot;, method);\r\n            logger.info(&quot;body: {} &quot;, body);\r\n            logger.info(&quot;headers: {} &quot;, headers);\r\n        }\r\n        ResponseEntity&lt;String&gt; responseEntity\r\n                = oAuth2RestTemplate.exchange(url, method, new HttpEntity&lt;String&gt;(body, headers), String.class);\r\n        return responseEntity.getBody();\r\n    }\r\n\r\n\r\n    @Bean\r\n    @ConfigurationProperties(&quot;security.oauth2.client&quot;)\r\n    @ConditionalOnMissingBean(ClientCredentialsResourceDetails.class)\r\n    public ClientCredentialsResourceDetails clientCredentialsResourceDetails() {\r\n        return new ClientCredentialsResourceDetails();\r\n    }\r\n\r\n    @Bean\r\n    @ConditionalOnMissingBean\r\n    public OAuth2RestTemplate oAuth2RestTemplate() {\r\n        return new OAuth2RestTemplate(clientCredentialsResourceDetails);\r\n    }\r\n\r\n\r\n```","title":"spring mvc rest service redirect / forward / proxy","body":"<p>proxy controller with oauth2</p>\n\n<pre><code>@RequestMapping(\"v9\")\n@RestController\n@EnableConfigurationProperties\npublic class ProxyRestController {\n    Logger logger = LoggerFactory.getLogger(this.getClass());\n\n    @Autowired\n    OAuth2ProtectedResourceDetails oAuth2ProtectedResourceDetails;\n\n    @Autowired\n    private ClientCredentialsResourceDetails clientCredentialsResourceDetails;\n\n    @Autowired\n    OAuth2RestTemplate oAuth2RestTemplate;\n\n\n    @Value(\"${gateway.url:http://gateway/}\")\n    String gatewayUrl;\n\n    @RequestMapping(value = \"/proxy/**\")\n    public String proxy(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request, HttpServletResponse response,\n                        @RequestHeader HttpHeaders headers) throws ServletException, IOException, URISyntaxException {\n\n        body = body == null ? \"\" : body;\n        String path = request.getRequestURI();\n        String query = request.getQueryString();\n        path = path.replaceAll(\".*/v9/proxy\", \"\");\n        StringBuffer urlBuilder = new StringBuffer(gatewayUrl);\n        if (path != null) {\n            urlBuilder.append(path);\n        }\n        if (query != null) {\n            urlBuilder.append('?');\n            urlBuilder.append(query);\n        }\n        URI url = new URI(urlBuilder.toString());\n        if (logger.isInfoEnabled()) {\n            logger.info(\"url: {} \", url);\n            logger.info(\"method: {} \", method);\n            logger.info(\"body: {} \", body);\n            logger.info(\"headers: {} \", headers);\n        }\n        ResponseEntity&lt;String&gt; responseEntity\n                = oAuth2RestTemplate.exchange(url, method, new HttpEntity&lt;String&gt;(body, headers), String.class);\n        return responseEntity.getBody();\n    }\n\n\n    @Bean\n    @ConfigurationProperties(\"security.oauth2.client\")\n    @ConditionalOnMissingBean(ClientCredentialsResourceDetails.class)\n    public ClientCredentialsResourceDetails clientCredentialsResourceDetails() {\n        return new ClientCredentialsResourceDetails();\n    }\n\n    @Bean\n    @ConditionalOnMissingBean\n    public OAuth2RestTemplate oAuth2RestTemplate() {\n        return new OAuth2RestTemplate(clientCredentialsResourceDetails);\n    }\n\n\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1509946,"reputation":1433,"user_id":1412324,"accept_rate":75,"display_name":"Jonas Eicher"},"score":0,"creation_date":1631529179,"post_id":67077978,"comment_id":122237761,"body_markdown":"looking back at this made me realize how much easier this is in node+express. Also less pitfalls with embedded servers (tomcat/undertow) that are trying to be helpful by adding/changing headers.","body":"looking back at this made me realize how much easier this is in node+express. Also less pitfalls with embedded servers (tomcat/undertow) that are trying to be helpful by adding/changing headers."},{"owner":{"account_id":4608334,"reputation":3268,"user_id":3737186,"accept_rate":94,"display_name":"Sjoerd222888"},"score":0,"creation_date":1639053438,"post_id":67077978,"comment_id":124253098,"body_markdown":"How is `restTemplate` and `entity` defined here?","body":"How is <code>restTemplate</code> and <code>entity</code> defined here?"},{"owner":{"account_id":1509946,"reputation":1433,"user_id":1412324,"accept_rate":75,"display_name":"Jonas Eicher"},"score":0,"creation_date":1639057931,"post_id":67077978,"comment_id":124254928,"body_markdown":"`HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(body, headers);`","body":"<code>HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(body, headers);</code>"},{"owner":{"account_id":1509946,"reputation":1433,"user_id":1412324,"accept_rate":75,"display_name":"Jonas Eicher"},"score":0,"creation_date":1639058015,"post_id":67077978,"comment_id":124254964,"body_markdown":"`restTemplate` you can just let Spring Boot inject it via `@Autowired` (recommended) or manually `new RestTemplate()`","body":"<code>restTemplate</code> you can just let Spring Boot inject it via <code>@Autowired</code> (recommended) or manually <code>new RestTemplate()</code>"}],"tags":[],"owner":{"account_id":1509946,"reputation":1433,"user_id":1412324,"accept_rate":75,"display_name":"Jonas Eicher"},"comment_count":4,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1639058198,"creation_date":1618327961,"answer_id":67077978,"question_id":14726082,"body_markdown":"@derkoe has posted a great answer that helped me a lot!\r\n\r\nTrying this in 2021, I was able to improve on it a little:\r\n\r\n 1. You don&#39;t need @ResponseBody if your class is a @RestController\r\n 2. @RequestBody(required = false) allows for requests without a body (e.g. GET)\r\n 3. https and port 443 for those ssl encrypted endpoints (if your server serves https on port 443)\r\n 4. If you return the entire responseEntity instead of only the body, you also get the headers and response code.\r\n 5. Example of added (optional) headers, e.g. `headers.put(&quot;Authorization&quot;, Arrays.asList(String[] { &quot;Bearer 234asdf234&quot;})`\r\n 6. Exception handling (catches and forwards HttpStatuses like 404 instead of throwing a 500 Server Error)\r\n\r\n---\r\n\r\n    private String server = &quot;localhost&quot;;\r\n    private int port = 443;\r\n\r\n\t@Autowired\r\n\tMultiValueMap&lt;String, String&gt; headers;\r\n\r\n\t@Autowired\r\n\tRestTemplate restTemplate;\r\n    \r\n    @RequestMapping(&quot;/**&quot;)\r\n    public ResponseEntity&lt;String&gt; mirrorRest(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request) throws URISyntaxException\r\n    {\r\n        URI uri = new URI(&quot;https&quot;, null, server, port, request.getRequestURI(), request.getQueryString(), null);\r\n\r\n        HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(body, headers);    \r\n        \r\n        try {\r\n\t\t\tResponseEntity&lt;String&gt; responseEntity =\r\n\t\t\t\trestTemplate.exchange(uri, method, entity, String.class);\r\n\t\t\t\treturn responseEntity;\r\n\t\t} catch (HttpClientErrorException ex) {\r\n\t\t\treturn ResponseEntity\r\n\t\t\t\t.status(ex.getStatusCode())\r\n\t\t\t\t.headers(ex.getResponseHeaders())\r\n\t\t\t\t.body(ex.getResponseBodyAsString());\r\n\t\t}\r\n    \r\n        return responseEntity;\r\n    }","title":"spring mvc rest service redirect / forward / proxy","body":"<p>@derkoe has posted a great answer that helped me a lot!</p>\n<p>Trying this in 2021, I was able to improve on it a little:</p>\n<ol>\n<li>You don't need @ResponseBody if your class is a @RestController</li>\n<li>@RequestBody(required = false) allows for requests without a body (e.g. GET)</li>\n<li>https and port 443 for those ssl encrypted endpoints (if your server serves https on port 443)</li>\n<li>If you return the entire responseEntity instead of only the body, you also get the headers and response code.</li>\n<li>Example of added (optional) headers, e.g. <code>headers.put(&quot;Authorization&quot;, Arrays.asList(String[] { &quot;Bearer 234asdf234&quot;})</code></li>\n<li>Exception handling (catches and forwards HttpStatuses like 404 instead of throwing a 500 Server Error)</li>\n</ol>\n<hr />\n<pre><code>private String server = &quot;localhost&quot;;\nprivate int port = 443;\n\n@Autowired\nMultiValueMap&lt;String, String&gt; headers;\n\n@Autowired\nRestTemplate restTemplate;\n\n@RequestMapping(&quot;/**&quot;)\npublic ResponseEntity&lt;String&gt; mirrorRest(@RequestBody(required = false) String body, HttpMethod method, HttpServletRequest request) throws URISyntaxException\n{\n    URI uri = new URI(&quot;https&quot;, null, server, port, request.getRequestURI(), request.getQueryString(), null);\n\n    HttpEntity&lt;String&gt; entity = new HttpEntity&lt;&gt;(body, headers);    \n    \n    try {\n        ResponseEntity&lt;String&gt; responseEntity =\n            restTemplate.exchange(uri, method, entity, String.class);\n            return responseEntity;\n    } catch (HttpClientErrorException ex) {\n        return ResponseEntity\n            .status(ex.getStatusCode())\n            .headers(ex.getResponseHeaders())\n            .body(ex.getResponseBodyAsString());\n    }\n\n    return responseEntity;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2879573,"reputation":8521,"user_id":2470765,"accept_rate":59,"display_name":"michal.jakubeczy"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1619529961,"creation_date":1619529961,"answer_id":67283969,"question_id":14726082,"body_markdown":"I got inspired by Veluria&#39;s solution, but I had issues with gzip compression sent from the target resource.\r\n\r\nThe goal was to omit `Accept-Encoding` header:\r\n\r\n```\r\n@RequestMapping(&quot;/**&quot;)\r\npublic ResponseEntity mirrorRest(@RequestBody(required = false) String body, \r\n    HttpMethod method, HttpServletRequest request, HttpServletResponse response) \r\n    throws URISyntaxException {\r\n    String requestUrl = request.getRequestURI();\r\n\r\n    URI uri = new URI(&quot;http&quot;, null, server, port, null, null, null);\r\n    uri = UriComponentsBuilder.fromUri(uri)\r\n                              .path(requestUrl)\r\n                              .query(request.getQueryString())\r\n                              .build(true).toUri();\r\n\r\n    HttpHeaders headers = new HttpHeaders();\r\n    Enumeration&lt;String&gt; headerNames = request.getHeaderNames();\r\n    while (headerNames.hasMoreElements()) {\r\n        String headerName = headerNames.nextElement();\r\n        if (!headerName.equals(&quot;Accept-Encoding&quot;)) {\r\n            headers.set(headerName, request.getHeader(headerName));\r\n        }\r\n    }\r\n\r\n    HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(body, headers);\r\n    RestTemplate restTemplate = new RestTemplate();\r\n    try {\r\n        return restTemplate.exchange(uri, method, httpEntity, String.class);\r\n    } catch(HttpStatusCodeException e) {\r\n        return ResponseEntity.status(e.getRawStatusCode())\r\n                             .headers(e.getResponseHeaders())\r\n                             .body(e.getResponseBodyAsString());\r\n    }\r\n}\r\n```","title":"spring mvc rest service redirect / forward / proxy","body":"<p>I got inspired by Veluria's solution, but I had issues with gzip compression sent from the target resource.</p>\n<p>The goal was to omit <code>Accept-Encoding</code> header:</p>\n<pre><code>@RequestMapping(&quot;/**&quot;)\npublic ResponseEntity mirrorRest(@RequestBody(required = false) String body, \n    HttpMethod method, HttpServletRequest request, HttpServletResponse response) \n    throws URISyntaxException {\n    String requestUrl = request.getRequestURI();\n\n    URI uri = new URI(&quot;http&quot;, null, server, port, null, null, null);\n    uri = UriComponentsBuilder.fromUri(uri)\n                              .path(requestUrl)\n                              .query(request.getQueryString())\n                              .build(true).toUri();\n\n    HttpHeaders headers = new HttpHeaders();\n    Enumeration&lt;String&gt; headerNames = request.getHeaderNames();\n    while (headerNames.hasMoreElements()) {\n        String headerName = headerNames.nextElement();\n        if (!headerName.equals(&quot;Accept-Encoding&quot;)) {\n            headers.set(headerName, request.getHeader(headerName));\n        }\n    }\n\n    HttpEntity&lt;String&gt; httpEntity = new HttpEntity&lt;&gt;(body, headers);\n    RestTemplate restTemplate = new RestTemplate();\n    try {\n        return restTemplate.exchange(uri, method, httpEntity, String.class);\n    } catch(HttpStatusCodeException e) {\n        return ResponseEntity.status(e.getRawStatusCode())\n                             .headers(e.getResponseHeaders())\n                             .body(e.getResponseBodyAsString());\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8733951,"reputation":368,"user_id":6533159,"display_name":"Daniele Repici"},"score":0,"creation_date":1693481707,"post_id":76840226,"comment_id":135768454,"body_markdown":"For some reason, RequestEntity seems to be missing the body in my case. With the same request, if I use a @RequestBody String argument, I get it instead.","body":"For some reason, RequestEntity seems to be missing the body in my case. With the same request, if I use a @RequestBody String argument, I get it instead."}],"tags":[],"owner":{"account_id":1119690,"reputation":15787,"user_id":1108305,"accept_rate":47,"display_name":"M. Justin"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691213126,"creation_date":1691212390,"answer_id":76840226,"question_id":14726082,"body_markdown":"[`RequestEntity`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/RequestEntity.html), added in Spring Web 4.1, can be used as a controller method parameter to capture all the relevant HTTP state needed to make a REST call, and it can also be used by `RestTemplate` to make a REST call.\r\n\r\nA REST call can be made using a copy of the controller method parameter&#39;s `RequestEntity` with an updated URL.  The data can be retrieved as a `byte[]` and returned from the controller as a [`ResponseEntity&lt;byte[]&gt;`](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html).  This is effectively a direct proxy without any in-app data conversion.\r\n\r\n```lang-java\r\n@Controller\r\n@RequestMapping(&quot;/movieProxy&quot;)\r\npublic class MovieProxyController {\r\n    private String address= &quot;http://xxx.xxx.xxx.xxx:xx/MyApp&quot;;\r\n\r\n    @RequestMapping(value = &quot;/**&quot;)\r\n    public ResponseEntity&lt;byte[]&gt; redirect(RequestEntity&lt;byte[]&gt; request) {\r\n        URI uri = UriComponentsBuilder.fromUriString(address)\r\n                .path(request.getUrl().getPath())\r\n                .query(request.getUrl().getRawQuery()).build().toUri();\r\n\r\n        RequestEntity&lt;byte[]&gt; requestCopy = new RequestEntity&lt;&gt;(\r\n                request.getBody(), request.getHeaders(), request.getMethod(),\r\n                uri, request.getType());\r\n        try {\r\n            return restTemplate.exchange(requestCopy, byte[].class);\r\n        } catch (RestClientResponseException e) {\r\n            return new ResponseEntity&lt;&gt;(e.getResponseBodyAsByteArray(),\r\n                    e.getResponseHeaders(), e.getStatusCode());\r\n        }\r\n}\r\n```","title":"spring mvc rest service redirect / forward / proxy","body":"<p><a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/RequestEntity.html\" rel=\"nofollow noreferrer\"><code>RequestEntity</code></a>, added in Spring Web 4.1, can be used as a controller method parameter to capture all the relevant HTTP state needed to make a REST call, and it can also be used by <code>RestTemplate</code> to make a REST call.</p>\n<p>A REST call can be made using a copy of the controller method parameter's <code>RequestEntity</code> with an updated URL.  The data can be retrieved as a <code>byte[]</code> and returned from the controller as a <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html\" rel=\"nofollow noreferrer\"><code>ResponseEntity&lt;byte[]&gt;</code></a>.  This is effectively a direct proxy without any in-app data conversion.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller\n@RequestMapping(&quot;/movieProxy&quot;)\npublic class MovieProxyController {\n    private String address= &quot;http://xxx.xxx.xxx.xxx:xx/MyApp&quot;;\n\n    @RequestMapping(value = &quot;/**&quot;)\n    public ResponseEntity&lt;byte[]&gt; redirect(RequestEntity&lt;byte[]&gt; request) {\n        URI uri = UriComponentsBuilder.fromUriString(address)\n                .path(request.getUrl().getPath())\n                .query(request.getUrl().getRawQuery()).build().toUri();\n\n        RequestEntity&lt;byte[]&gt; requestCopy = new RequestEntity&lt;&gt;(\n                request.getBody(), request.getHeaders(), request.getMethod(),\n                uri, request.getType());\n        try {\n            return restTemplate.exchange(requestCopy, byte[].class);\n        } catch (RestClientResponseException e) {\n            return new ResponseEntity&lt;&gt;(e.getResponseBodyAsByteArray(),\n                    e.getResponseHeaders(), e.getStatusCode());\n        }\n}\n</code></pre>\n"}],"owner":{"account_id":278030,"reputation":10509,"user_id":572380,"accept_rate":78,"display_name":"nilgun"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":99651,"favorite_count":0,"down_vote_count":0,"up_vote_count":81,"answer_count":9,"score":81,"last_activity_date":1691213126,"creation_date":1360144535,"question_id":14726082,"body_markdown":"I have build a web application using spring mvc framework to publish REST services.\r\nFor example:\r\n\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/movie&quot;)\r\n    public class MovieController {\r\n \r\n\t@RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)\r\n\tpublic @ResponseBody Movie getMovie(@PathVariable String id, @RequestBody user) {\r\n \t\t\r\n\t\treturn dataProvider.getMovieById(user,id);\r\n\t}\r\n\r\nNow I need to deploy my application but I have the following problem:\r\nThe clients do not have direct access to the computer on which the application resides (There is a firewall). Therefore I need a redirection layer on a proxy machine (accessible by the clients) which calls the actual rest service.\r\n\r\nI tried making a new call using RestTemplate:\r\nFor Example:\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/movieProxy&quot;)\r\n    public class MovieProxyController {\r\n\r\n        private String address= &quot;http://xxx.xxx.xxx.xxx:xx/MyApp&quot;;\r\n \r\n\t    @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)\r\n\t    public @ResponseBody Movie getMovie(@PathVariable String id,@RequestBody user,final HttpServletResponse response,final HttpServletRequest request) {\r\n \t\t\r\n\t\t    HttpHeaders headers = new HttpHeaders();\r\n\t\t    headers.setContentType(MediaType.APPLICATION_JSON);\r\n\t\t    RestTemplate restTemplate = new RestTemplate();\r\n\t\t    return restTemplate.exchange( address+ request.getPathInfo(), request.getMethod(), new HttpEntity&lt;T&gt;(user, headers), Movie.class);\r\n \r\n\t}\r\n\r\n\r\n\r\nThis is ok but I need to rewrite each method in the controller to use the resttemplate. Also, this causes redundant serialization/deserialization on the proxy machine. \r\n\r\n\r\nI tried writing a generic function using restemplate, but it did not work out:\r\n\r\n    @Controller\r\n    @RequestMapping(&quot;/movieProxy&quot;)\r\n    public class MovieProxyController {\r\n\r\n        private String address= &quot;http://xxx.xxx.xxx.xxx:xx/MyApp&quot;;\r\n \r\n\t    @RequestMapping(value = &quot;/**&quot;)\r\n\t    public ? redirect(final HttpServletResponse response,final HttpServletRequest request) { \t\t\r\n\t\t    HttpHeaders headers = new HttpHeaders();\r\n\t\t    headers.setContentType(MediaType.APPLICATION_JSON);\r\n\t\t    RestTemplate restTemplate = new RestTemplate();\r\n\t\t    return restTemplate.exchange( address+ request.getPathInfo(), request.getMethod(), ? , ?);\r\n \r\n\t}\r\n\r\n\r\nI could not find a method of resttemplate which works with request and response objects.\r\n\r\nI also tried spring redirect and forward. But redirect does not change the request&#39;s client ip address so i think it is useless in this case. I could not forward to another URL either.\r\n\r\nIs there a more appropriate way to achieve this?","title":"spring mvc rest service redirect / forward / proxy","body":"<p>I have build a web application using spring mvc framework to publish REST services.\nFor example:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/movie&quot;)\npublic class MovieController {\n\n@RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)\npublic @ResponseBody Movie getMovie(@PathVariable String id, @RequestBody user) {\n    \n    return dataProvider.getMovieById(user,id);\n}\n</code></pre>\n<p>Now I need to deploy my application but I have the following problem:\nThe clients do not have direct access to the computer on which the application resides (There is a firewall). Therefore I need a redirection layer on a proxy machine (accessible by the clients) which calls the actual rest service.</p>\n<p>I tried making a new call using RestTemplate:\nFor Example:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/movieProxy&quot;)\npublic class MovieProxyController {\n\n    private String address= &quot;http://xxx.xxx.xxx.xxx:xx/MyApp&quot;;\n\n    @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)\n    public @ResponseBody Movie getMovie(@PathVariable String id,@RequestBody user,final HttpServletResponse response,final HttpServletRequest request) {\n    \n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        RestTemplate restTemplate = new RestTemplate();\n        return restTemplate.exchange( address+ request.getPathInfo(), request.getMethod(), new HttpEntity&lt;T&gt;(user, headers), Movie.class);\n\n}\n</code></pre>\n<p>This is ok but I need to rewrite each method in the controller to use the resttemplate. Also, this causes redundant serialization/deserialization on the proxy machine.</p>\n<p>I tried writing a generic function using restemplate, but it did not work out:</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/movieProxy&quot;)\npublic class MovieProxyController {\n\n    private String address= &quot;http://xxx.xxx.xxx.xxx:xx/MyApp&quot;;\n\n    @RequestMapping(value = &quot;/**&quot;)\n    public ? redirect(final HttpServletResponse response,final HttpServletRequest request) {        \n        HttpHeaders headers = new HttpHeaders();\n        headers.setContentType(MediaType.APPLICATION_JSON);\n        RestTemplate restTemplate = new RestTemplate();\n        return restTemplate.exchange( address+ request.getPathInfo(), request.getMethod(), ? , ?);\n\n}\n</code></pre>\n<p>I could not find a method of resttemplate which works with request and response objects.</p>\n<p>I also tried spring redirect and forward. But redirect does not change the request's client ip address so i think it is useless in this case. I could not forward to another URL either.</p>\n<p>Is there a more appropriate way to achieve this?</p>\n"},{"tags":["javascript","python","java","html","selenium-webdriver"],"answers":[{"comments":[{"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"score":0,"creation_date":1691256870,"post_id":76840229,"comment_id":135468734,"body_markdown":"Nope it&#39;s not working , the shadow root in html page reload form and div , and that can&#39;t be done by passing the value. just need copy and paste value. It&#39;s chain of method that invoke by the input with focus and select wheel, that chain can be done by copy and paste not change value.Thanks for Helping me &lt;3.","body":"Nope it&#39;s not working , the shadow root in html page reload form and div , and that can&#39;t be done by passing the value. just need copy and paste value. It&#39;s chain of method that invoke by the input with focus and select wheel, that chain can be done by copy and paste not change value.Thanks for Helping me &lt;3."}],"tags":[],"owner":{"account_id":15994883,"reputation":3427,"user_id":11543023,"display_name":"djmonki"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691212464,"creation_date":1691212464,"answer_id":76840229,"question_id":76837072,"body_markdown":"Use the ```executeScript``` method provided by the ```JavascriptExecutor``` interface\r\n\r\nUsing the method, allows you to execute a JavaScript snippet that directly modifies the value of the input field\r\n\r\nSee skeleton code using Selenium Java below:\r\n```java\r\nimport org.openqa.selenium.JavascriptExecutor;\r\nimport org.openqa.selenium.WebDriver;\r\nimport org.openqa.selenium.WebElement;\r\n\r\n\r\nWebElement inputElement = driver.findElement(By.cssSelector(&quot;input.field&quot;));  // replace with your selector / value\r\n\r\n// cast the driver to JavascriptExecutor\r\nJavascriptExecutor js = (JavascriptExecutor) driver;\r\n\r\n// remove the &#39;is-readonly&#39; class using JavaScript\r\njs.executeScript(&quot;arguments[0].classList.remove(&#39;is-readonly&#39;)&quot;, inputElement);\r\n\r\n// add a new class if required using JavaScript\r\njs.executeScript(&quot;arguments[0].classList.add(&#39;new-class&#39;)&quot;, inputElement);\r\n\r\n// add a new value/attribute if required using JavaScript\r\njs.executeScript(&quot;arguments[0].value = &#39;Your desired value&#39;;&quot;, inputElement);\r\n\r\n``` \r\n\r\n**Note:**\r\n*If the webpage re-renders or certain JavaScript events are fired, any changes may be removed*","title":"Paste text from selenium with java into readonly input","body":"<p>Use the <code>executeScript</code> method provided by the <code>JavascriptExecutor</code> interface</p>\n<p>Using the method, allows you to execute a JavaScript snippet that directly modifies the value of the input field</p>\n<p>See skeleton code using Selenium Java below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.openqa.selenium.JavascriptExecutor;\nimport org.openqa.selenium.WebDriver;\nimport org.openqa.selenium.WebElement;\n\n\nWebElement inputElement = driver.findElement(By.cssSelector(&quot;input.field&quot;));  // replace with your selector / value\n\n// cast the driver to JavascriptExecutor\nJavascriptExecutor js = (JavascriptExecutor) driver;\n\n// remove the 'is-readonly' class using JavaScript\njs.executeScript(&quot;arguments[0].classList.remove('is-readonly')&quot;, inputElement);\n\n// add a new class if required using JavaScript\njs.executeScript(&quot;arguments[0].classList.add('new-class')&quot;, inputElement);\n\n// add a new value/attribute if required using JavaScript\njs.executeScript(&quot;arguments[0].value = 'Your desired value';&quot;, inputElement);\n\n</code></pre>\n<p><strong>Note:</strong>\n<em>If the webpage re-renders or certain JavaScript events are fired, any changes may be removed</em></p>\n"}],"owner":{"account_id":28682652,"reputation":47,"user_id":21963506,"display_name":"Farhood Naqizadeh"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691212464,"creation_date":1691161037,"question_id":76837072,"body_markdown":"I have input div that if you click on it some method add some attribute for prevent the user added text with keyboard and use the wheel of select!\r\nIn java selenium I can get element remove readonly attribute but if use sendKeys nothing happen, because Keyboard input is off(maybe by javascript function or by navigator lock),if right click and paste some content work, that good to know if reselect the input the readonly and all class back it from javascript so what can I do to paste text from clipboard without right click or use (clt+V or shift + insert) which is looked.\r\n\r\nThe div looks:\r\n\r\n```\r\n&lt;ui-text-field _ngcontent-ehh-c219=&quot;&quot; label=&quot;ØªØ§Ø±ÛØ® Ø§ÙÙØ¶Ø§&quot; name=&quot;expirationDate&quot; _nghost-ehh-c120=&quot;&quot;&gt;\r\n   &lt;div _ngcontent-ehh-c120=&quot;&quot; class=&quot;text-field is-invalid is-readonly&quot;&gt;\r\n      &lt;form _ngcontent-ehh-c120=&quot;&quot; novalidate=&quot;&quot; class=&quot;ng-pristine ng-invalid ng-touched&quot;&gt;\r\n         &lt;!----&gt;&lt;input _ngcontent-ehh-c120=&quot;&quot; formcontrolname=&quot;field&quot; class=&quot;field ng-pristine ng-invalid ng-star-inserted ng-touched&quot; type=&quot;text&quot;&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;label _ngcontent-ehh-c120=&quot;&quot;&gt;ØªØ§Ø±ÛØ® Ø§ÙÙØ¶Ø§&lt;/label&gt;\r\n      &lt;/form&gt;\r\n      &lt;!----&gt;\r\n   &lt;/div&gt;\r\n&lt;/ui-text-field&gt;\r\n```\r\n\r\n\r\n\r\nStraight and Forward speak is : How can paste text content into div without right click/action preform or keyboard with selenium in java.","title":"Paste text from selenium with java into readonly input","body":"<p>I have input div that if you click on it some method add some attribute for prevent the user added text with keyboard and use the wheel of select!\nIn java selenium I can get element remove readonly attribute but if use sendKeys nothing happen, because Keyboard input is off(maybe by javascript function or by navigator lock),if right click and paste some content work, that good to know if reselect the input the readonly and all class back it from javascript so what can I do to paste text from clipboard without right click or use (clt+V or shift + insert) which is looked.</p>\n<p>The div looks:</p>\n<pre><code>&lt;ui-text-field _ngcontent-ehh-c219=&quot;&quot; label=&quot;ØªØ§Ø±ÛØ® Ø§ÙÙØ¶Ø§&quot; name=&quot;expirationDate&quot; _nghost-ehh-c120=&quot;&quot;&gt;\n   &lt;div _ngcontent-ehh-c120=&quot;&quot; class=&quot;text-field is-invalid is-readonly&quot;&gt;\n      &lt;form _ngcontent-ehh-c120=&quot;&quot; novalidate=&quot;&quot; class=&quot;ng-pristine ng-invalid ng-touched&quot;&gt;\n         &lt;!----&gt;&lt;input _ngcontent-ehh-c120=&quot;&quot; formcontrolname=&quot;field&quot; class=&quot;field ng-pristine ng-invalid ng-star-inserted ng-touched&quot; type=&quot;text&quot;&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;!----&gt;&lt;label _ngcontent-ehh-c120=&quot;&quot;&gt;ØªØ§Ø±ÛØ® Ø§ÙÙØ¶Ø§&lt;/label&gt;\n      &lt;/form&gt;\n      &lt;!----&gt;\n   &lt;/div&gt;\n&lt;/ui-text-field&gt;\n</code></pre>\n<p>Straight and Forward speak is : How can paste text content into div without right click/action preform or keyboard with selenium in java.</p>\n"},{"tags":["python","java","selenium-webdriver","robotframework","geckodriver"],"comments":[{"owner":{"account_id":23535348,"reputation":21341,"user_id":17580381,"display_name":"CtrlZ"},"score":0,"creation_date":1691149603,"post_id":76835458,"comment_id":135456193,"body_markdown":"Did you notice the reference to a Chrome driver in the error message?","body":"Did you notice the reference to a Chrome driver in the error message?"}],"answers":[{"comments":[{"owner":{"account_id":24349255,"reputation":1,"user_id":18285323,"display_name":"kahirrao"},"score":0,"creation_date":1691170339,"post_id":76836778,"comment_id":135460675,"body_markdown":"Thank you , but I am using it in robot automation framework and file path is ${sample_doc}      ${CURDIR}${/}fztcdrSupportedFiles/sample_bmp.bmp","body":"Thank you , but I am using it in robot automation framework and file path is ${sample_doc}      ${CURDIR}${/}fztcdrSupportedFiles/sample_bmp.bmp"},{"owner":{"account_id":24349255,"reputation":1,"user_id":18285323,"display_name":"kahirrao"},"score":0,"creation_date":1691170461,"post_id":76836778,"comment_id":135460695,"body_markdown":"Also if I put entire path it is difficult to run the same test on different system","body":"Also if I put entire path it is difficult to run the same test on different system"},{"owner":{"account_id":3018437,"reputation":306,"user_id":2559990,"display_name":"Abhishek"},"score":0,"creation_date":1691213548,"post_id":76836778,"comment_id":135464697,"body_markdown":"@kahirrao you can use join paths for the same. somthing like: ${path} = join paths ${CURDIR} ${asdf} ${asf.pdf} and then try to upload the file using ${path}. more more clarity go through https://robotframework.org/robotframework/latest/libraries/OperatingSystem.html#Join%20Paths","body":"@kahirrao you can use join paths for the same. somthing like: ${path} = join paths ${CURDIR} ${asdf} ${asf.pdf} and then try to upload the file using ${path}. more more clarity go through <a href=\"https://robotframework.org/robotframework/latest/libraries/OperatingSystem.html#Join%20Paths\" rel=\"nofollow noreferrer\">robotframework.org/robotframework/latest/libraries/&hellip;</a>"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691158754,"creation_date":1691158754,"answer_id":76836778,"question_id":76835458,"body_markdown":"Using  _Python_ for file upload to send a filename through `send_keys()` you need to pass the absolute filepath as follows:\r\n\r\n\tuploadElement.send_keys(&quot;C:\\Users\\Suraj\\Downloads\\automation\\automation\\resources\\PageObject\\testData\\uploadFiles\\fztcdrSupportedFiles\\sample_bmp.bmp&quot;);","title":"I am facing path issue while uploading files in Firefox browser on Windows OS in logs I am able to see / instead of \\","body":"<p>Using  <em>Python</em> for file upload to send a filename through <code>send_keys()</code> you need to pass the absolute filepath as follows:</p>\n<pre><code>uploadElement.send_keys(&quot;C:\\Users\\Suraj\\Downloads\\automation\\automation\\resources\\PageObject\\testData\\uploadFiles\\fztcdrSupportedFiles\\sample_bmp.bmp&quot;);\n</code></pre>\n"}],"owner":{"account_id":24349255,"reputation":1,"user_id":18285323,"display_name":"kahirrao"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691158802,"answer_count":1,"score":0,"last_activity_date":1691211943,"creation_date":1691148472,"question_id":76835458,"body_markdown":"[Robot log file][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fM5Wz.png\r\n\r\nI am trying to upload a file using Firefox browser but it giving me path error in windows system and same code is working on MAC system\r\n\r\nIf you see log file the in error instead of &#39;\\\\&#39; forward slash &#39;/&#39;black slash visible and it happing only on windows for Firefox browser.\r\n\r\n    InvalidArgumentException: Message: File not found: C:\\Users\\Suraj\\Downloads\\automation\\automation\\resources\\PageObject\\testData\\uploadFiles\\fztcdrSupportedFiles/sample_bmp.bmp Stacktrace: RemoteError@chrome://remote/content/shared/RemoteError.sys.mjs:8:8 WebDriverError@chrome://remote/content/shared/webdriver/Errors.sys.mjs:187:5 InvalidArgumentError@chrome://remote/content/shared/webdriver/Errors.sys.mjs:378:5 interaction.uploadFiles@chrome://remote/content/marionette/interaction.sys.mjs:543:13**strong text**\r\n\r\nInvalidArgumentException: Message: File not found: C:\\Users\\Suraj\\Downloads\\automation\\automation\\resources\\PageObject\\testData\\uploadFiles\\fztcdrSupportedFiles**/sample_bmp.bmp**","title":"I am facing path issue while uploading files in Firefox browser on Windows OS in logs I am able to see / instead of \\","body":"<p><a href=\"https://i.stack.imgur.com/fM5Wz.png\" rel=\"nofollow noreferrer\">Robot log file</a></p>\n<p>I am trying to upload a file using Firefox browser but it giving me path error in windows system and same code is working on MAC system</p>\n<p>If you see log file the in error instead of '\\' forward slash '/'black slash visible and it happing only on windows for Firefox browser.</p>\n<pre><code>InvalidArgumentException: Message: File not found: C:\\Users\\Suraj\\Downloads\\automation\\automation\\resources\\PageObject\\testData\\uploadFiles\\fztcdrSupportedFiles/sample_bmp.bmp Stacktrace: RemoteError@chrome://remote/content/shared/RemoteError.sys.mjs:8:8 WebDriverError@chrome://remote/content/shared/webdriver/Errors.sys.mjs:187:5 InvalidArgumentError@chrome://remote/content/shared/webdriver/Errors.sys.mjs:378:5 interaction.uploadFiles@chrome://remote/content/marionette/interaction.sys.mjs:543:13**strong text**\n</code></pre>\n<p>InvalidArgumentException: Message: File not found: C:\\Users\\Suraj\\Downloads\\automation\\automation\\resources\\PageObject\\testData\\uploadFiles\\fztcdrSupportedFiles**/sample_bmp.bmp**</p>\n"},{"tags":["java","xml","spring","spring-boot","mybatis"],"comments":[{"owner":{"account_id":1314580,"reputation":3299,"user_id":1261766,"display_name":"ave"},"score":1,"creation_date":1632828454,"post_id":69360710,"comment_id":122593695,"body_markdown":"Remove `mybatis.config-location` and `mybatis.mapper-locations` from &#39;application.properties&#39;. You don&#39;t need &#39;mybatisConfig.xml&#39; and `@MapperScan` should pick up mappers. Because of the redundant configuration, MyBatis tries to load the same mapper multiple times and throws the error, probably. Read the quick setup section in the [doc](http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/).","body":"Remove <code>mybatis.config-location</code> and <code>mybatis.mapper-locations</code> from &#39;application.properties&#39;. You don&#39;t need &#39;mybatisConfig.xml&#39; and <code>@MapperScan</code> should pick up mappers. Because of the redundant configuration, MyBatis tries to load the same mapper multiple times and throws the error, probably. Read the quick setup section in the <a href=\"http://mybatis.org/spring-boot-starter/mybatis-spring-boot-autoconfigure/\" rel=\"nofollow noreferrer\">doc</a>."}],"answers":[{"tags":[],"owner":{"account_id":7382606,"reputation":51,"user_id":5618756,"display_name":"Zouhour Ncib"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633004065,"creation_date":1633004065,"answer_id":69392070,"question_id":69360710,"body_markdown":"Your &quot;employeeMapper&quot; is not declared as a spring bean, so when dependency injection, there&#39;s no bean with this type. Try adding a @Component on your class.","title":"Error creating bean with name Unsatisfied dependency expressed through field","body":"<p>Your &quot;employeeMapper&quot; is not declared as a spring bean, so when dependency injection, there's no bean with this type. Try adding a @Component on your class.</p>\n"},{"tags":[],"owner":{"account_id":29163892,"reputation":1,"user_id":22341962,"display_name":"Cap Wilson"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691211029,"creation_date":1691211029,"answer_id":76840177,"question_id":69360710,"body_markdown":"add this in Mybatis-config.xml\r\n\r\n    &lt;mapper&gt;\r\n      &lt;package name=&quot;com.xxx.xxx.mapper&quot;&gt;\r\n    &lt;mapper&gt;","title":"Error creating bean with name Unsatisfied dependency expressed through field","body":"<p>add this in Mybatis-config.xml</p>\n<pre><code>&lt;mapper&gt;\n  &lt;package name=&quot;com.xxx.xxx.mapper&quot;&gt;\n&lt;mapper&gt;\n</code></pre>\n"}],"owner":{"account_id":5452968,"reputation":7389,"user_id":4337240,"accept_rate":72,"display_name":"Chaudhry Talha"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":4040,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1691211029,"creation_date":1632827775,"question_id":69360710,"body_markdown":"It&#39;s been 3rd day I&#39;ve been trying to implement a simple CRUD application using Mybatis XML configuration and I&#39;m new to the whole Spring ecosystem. The question is a bit long but I&#39;ve only sharec the essentials.\r\n\r\nI have a class `Employee.java`:\r\n\r\n```\r\nimport lombok.*;\r\n\r\n@Getter @Setter @AllArgsConstructor @NoArgsConstructor @ToString\r\npublic class Employee {\r\n\r\n    private long emp_Id;\r\n    private String emp_name;\r\n    private String emp_dept;\r\n\r\n}\r\n```\r\nThen I wrote a Mapper\r\n```\r\n@Mapper\r\npublic interface EmployeeMapper {\r\n\r\n    public Employee getEmployee(@Param(&quot;emp_Id&quot;) Long emp_Id);\r\n    public List&lt;Employee&gt; getAllEmployee();\r\n\r\n}\r\n```\r\n\r\nThen I wrote a mapper XML named `EmployeeMapper.xml`\r\n\r\n```\r\n...\r\n&lt;mapper namespace=&quot;Employee&quot;&gt;\r\n    &lt;select id=&quot;getAllEmployee&quot; resultType=&quot;com.tmb.mybatiscrudproj.domains.Employee&quot;&gt;\r\n        select * from employee\r\n    &lt;/select&gt;\r\n\r\n    &lt;select id=&quot;getEmployee&quot; resultType=&quot;com.tmb.mybatiscrudproj.domains.Employee&quot;&gt;\r\n        select * from employee where emp_Id = #{emp_Id}\r\n    &lt;/select&gt;\r\n\r\n&lt;/mapper&gt;\r\n```\r\n\r\nThen I have written a service:\r\n\r\n```\r\npublic interface EmployeeService {\r\n\r\n    public Employee getEmployee(Long emp_Id);\r\n    public List&lt;Employee&gt; getAllEmployee();\r\n\r\n}\r\n```\r\n\r\nand here is the service implementation:\r\n\r\n```\r\n@Service\r\npublic class EmployeeServiceImpl implements EmployeeService {\r\n\r\n    @Autowired\r\n    EmployeeMapper employeeMapper;\r\n\r\n    @Override\r\n    public List&lt;Employee&gt; getAllEmployee() {\r\n        List&lt;Employee&gt; list = employeeMapper.getAllEmployee();\r\n        return list;\r\n    }\r\n\r\n    @Override\r\n    public Employee getEmployee(Long emp_Id) {\r\n        return employeeMapper.getEmployee(emp_Id);\r\n    }\r\n}\r\n```\r\n\r\nand finally the controller class\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/employee&quot;)\r\npublic class EmployeeController {\r\n\r\n    @Autowired\r\n    EmployeeService empService;\r\n\r\n    @RequestMapping(value=&quot;/getEmp/{empId}&quot;,method = RequestMethod.GET)\r\n    public Employee getEmployee(@PathVariable Long empId){\r\n        return empService.getEmployee(empId);\r\n    }\r\n\r\n    @GetMapping(value=&quot;/getAllEmp&quot;)\r\n    public List&lt;Employee&gt; getAllEmployee(){\r\n        return empService.getAllEmployee();\r\n    }\r\n\r\n```\r\n\r\nI&#39;m confused about the configurations. As I have a built-in `application.properties` inside the `resources` older and in it I have:\r\n\r\n```\r\nserver.port: 8081\r\n\r\nspring.h2.console.enabled=true\r\nspring.h2.console.path=/h2\r\n\r\nspring.datasource.url=jdbc:h2:~/test\r\nspring.datasource.username=sa\r\nspring.datasource.password=\r\nspring.datasource.driver-class-name=org.h2.Driver\r\n\r\nmybatis.config-location=classpath:mapper/mybatisConfig.xml\r\nmybatis.mapper-locations=classpath:mapper/*Mapper.xml\r\nmybatis.type-aliases-package=com.tmb.mybatiscrudproj.domains\r\nmybatis.configuration.map-underscore-to-camel-case=true\r\nmybatis.configuration.default-fetch-size=100\r\nmybatis.configuration.default-statement-timeout=30\r\n```\r\n\r\nFollowing many tutorials and answers, I created a `mybatisConfig.xml` and `EmployeeMapper.xml` file is also inside the `resources folder.\r\n\r\nIn the `mybatisConfig.xml` I&#39;ve done almost the same thing as I did in `.properties` file \r\n\r\n```\r\n...\r\n&lt;configuration&gt;\r\n    &lt;environments default=&quot;development&quot;&gt;\r\n        &lt;environment id=&quot;development&quot;&gt;\r\n            &lt;transactionManager type=&quot;JDBC&quot;/&gt;\r\n            &lt;dataSource type=&quot;POOLED&quot;&gt;\r\n                &lt;property name=&quot;driver&quot; value=&quot;org.h2.Driver&quot;/&gt;\r\n                &lt;property name=&quot;url&quot; value=&quot;jdbc:h2:~/test&quot;/&gt;\r\n                &lt;property name=&quot;username&quot; value=&quot;sa&quot;/&gt;\r\n                &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;\r\n                &lt;property name=&quot;path&quot; value=&quot;/h2&quot;/&gt;\r\n            &lt;/dataSource&gt;\r\n        &lt;/environment&gt;\r\n    &lt;/environments&gt;\r\n    &lt;mappers&gt;\r\n        &lt;mapper resource=&quot;EmployeeMapper.xml&quot;/&gt;\r\n    &lt;/mappers&gt;\r\n&lt;/configuration&gt;\r\n```\r\n\r\nHere is the screenshot of the project structure:\r\n\r\n[![enter image description here][1]][1]\r\n\r\nwhen I run the project I get the following errors:\r\n\r\n&gt; Error creating bean with name &#39;employeeController&#39;: Unsatisfied dependency expressed through field &#39;empService&#39;;\r\n\r\n&gt; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;employeeServiceImpl&#39;: Unsatisfied dependency expressed through field &#39;employeeMapper&#39;;\r\n\r\n&gt; nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name &#39;employeeMapper&#39; defined in file [MY_PATH/mybatiscrudproj/target/classes/com/tmb/mybatiscrudproj/mapper/EmployeeMapper.class]: Unsatisfied dependency expressed through bean property &#39;sqlSessionFactory&#39;; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name &#39;sqlSessionFactory&#39; defined in class path resource [org/mybatis/spring/boot/autoconfigure/MybatisAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method &#39;sqlSessionFactory&#39; threw exception; nested exception is java.lang.IllegalStateException: Property &#39;configuration&#39; and &#39;configLocation&#39; can not specified with together\r\n\r\nNow based on the searches I have done I made sure the in the main class I add:\r\n\r\n```\r\n@MappedTypes({Employee.class})\r\n@MapperScan(&quot;com.tmb.mybatiscrudproj.mapper&quot;)\r\n@SpringBootApplication\r\npublic class MybatiscrudprojApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MybatiscrudprojApplication.class, args);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nbut still the same error. **How can I successfully configure the project with the structure I have shared in this question**?\r\n\r\n  [1]: https://i.stack.imgur.com/3cLkl.png","title":"Error creating bean with name Unsatisfied dependency expressed through field","body":"<p>It's been 3rd day I've been trying to implement a simple CRUD application using Mybatis XML configuration and I'm new to the whole Spring ecosystem. The question is a bit long but I've only sharec the essentials.</p>\n<p>I have a class <code>Employee.java</code>:</p>\n<pre><code>import lombok.*;\n\n@Getter @Setter @AllArgsConstructor @NoArgsConstructor @ToString\npublic class Employee {\n\n    private long emp_Id;\n    private String emp_name;\n    private String emp_dept;\n\n}\n</code></pre>\n<p>Then I wrote a Mapper</p>\n<pre><code>@Mapper\npublic interface EmployeeMapper {\n\n    public Employee getEmployee(@Param(&quot;emp_Id&quot;) Long emp_Id);\n    public List&lt;Employee&gt; getAllEmployee();\n\n}\n</code></pre>\n<p>Then I wrote a mapper XML named <code>EmployeeMapper.xml</code></p>\n<pre><code>...\n&lt;mapper namespace=&quot;Employee&quot;&gt;\n    &lt;select id=&quot;getAllEmployee&quot; resultType=&quot;com.tmb.mybatiscrudproj.domains.Employee&quot;&gt;\n        select * from employee\n    &lt;/select&gt;\n\n    &lt;select id=&quot;getEmployee&quot; resultType=&quot;com.tmb.mybatiscrudproj.domains.Employee&quot;&gt;\n        select * from employee where emp_Id = #{emp_Id}\n    &lt;/select&gt;\n\n&lt;/mapper&gt;\n</code></pre>\n<p>Then I have written a service:</p>\n<pre><code>public interface EmployeeService {\n\n    public Employee getEmployee(Long emp_Id);\n    public List&lt;Employee&gt; getAllEmployee();\n\n}\n</code></pre>\n<p>and here is the service implementation:</p>\n<pre><code>@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    @Autowired\n    EmployeeMapper employeeMapper;\n\n    @Override\n    public List&lt;Employee&gt; getAllEmployee() {\n        List&lt;Employee&gt; list = employeeMapper.getAllEmployee();\n        return list;\n    }\n\n    @Override\n    public Employee getEmployee(Long emp_Id) {\n        return employeeMapper.getEmployee(emp_Id);\n    }\n}\n</code></pre>\n<p>and finally the controller class</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/employee&quot;)\npublic class EmployeeController {\n\n    @Autowired\n    EmployeeService empService;\n\n    @RequestMapping(value=&quot;/getEmp/{empId}&quot;,method = RequestMethod.GET)\n    public Employee getEmployee(@PathVariable Long empId){\n        return empService.getEmployee(empId);\n    }\n\n    @GetMapping(value=&quot;/getAllEmp&quot;)\n    public List&lt;Employee&gt; getAllEmployee(){\n        return empService.getAllEmployee();\n    }\n\n</code></pre>\n<p>I'm confused about the configurations. As I have a built-in <code>application.properties</code> inside the <code>resources</code> older and in it I have:</p>\n<pre><code>server.port: 8081\n\nspring.h2.console.enabled=true\nspring.h2.console.path=/h2\n\nspring.datasource.url=jdbc:h2:~/test\nspring.datasource.username=sa\nspring.datasource.password=\nspring.datasource.driver-class-name=org.h2.Driver\n\nmybatis.config-location=classpath:mapper/mybatisConfig.xml\nmybatis.mapper-locations=classpath:mapper/*Mapper.xml\nmybatis.type-aliases-package=com.tmb.mybatiscrudproj.domains\nmybatis.configuration.map-underscore-to-camel-case=true\nmybatis.configuration.default-fetch-size=100\nmybatis.configuration.default-statement-timeout=30\n</code></pre>\n<p>Following many tutorials and answers, I created a <code>mybatisConfig.xml</code> and <code>EmployeeMapper.xml</code> file is also inside the `resources folder.</p>\n<p>In the <code>mybatisConfig.xml</code> I've done almost the same thing as I did in <code>.properties</code> file</p>\n<pre><code>...\n&lt;configuration&gt;\n    &lt;environments default=&quot;development&quot;&gt;\n        &lt;environment id=&quot;development&quot;&gt;\n            &lt;transactionManager type=&quot;JDBC&quot;/&gt;\n            &lt;dataSource type=&quot;POOLED&quot;&gt;\n                &lt;property name=&quot;driver&quot; value=&quot;org.h2.Driver&quot;/&gt;\n                &lt;property name=&quot;url&quot; value=&quot;jdbc:h2:~/test&quot;/&gt;\n                &lt;property name=&quot;username&quot; value=&quot;sa&quot;/&gt;\n                &lt;property name=&quot;password&quot; value=&quot;&quot;/&gt;\n                &lt;property name=&quot;path&quot; value=&quot;/h2&quot;/&gt;\n            &lt;/dataSource&gt;\n        &lt;/environment&gt;\n    &lt;/environments&gt;\n    &lt;mappers&gt;\n        &lt;mapper resource=&quot;EmployeeMapper.xml&quot;/&gt;\n    &lt;/mappers&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>Here is the screenshot of the project structure:</p>\n<p><a href=\"https://i.stack.imgur.com/3cLkl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3cLkl.png\" alt=\"enter image description here\" /></a></p>\n<p>when I run the project I get the following errors:</p>\n<blockquote>\n<p>Error creating bean with name 'employeeController': Unsatisfied dependency expressed through field 'empService';</p>\n</blockquote>\n<blockquote>\n<p>nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'employeeServiceImpl': Unsatisfied dependency expressed through field 'employeeMapper';</p>\n</blockquote>\n<blockquote>\n<p>nested exception is org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'employeeMapper' defined in file [MY_PATH/mybatiscrudproj/target/classes/com/tmb/mybatiscrudproj/mapper/EmployeeMapper.class]: Unsatisfied dependency expressed through bean property 'sqlSessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sqlSessionFactory' defined in class path resource [org/mybatis/spring/boot/autoconfigure/MybatisAutoConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.apache.ibatis.session.SqlSessionFactory]: Factory method 'sqlSessionFactory' threw exception; nested exception is java.lang.IllegalStateException: Property 'configuration' and 'configLocation' can not specified with together</p>\n</blockquote>\n<p>Now based on the searches I have done I made sure the in the main class I add:</p>\n<pre><code>@MappedTypes({Employee.class})\n@MapperScan(&quot;com.tmb.mybatiscrudproj.mapper&quot;)\n@SpringBootApplication\npublic class MybatiscrudprojApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(MybatiscrudprojApplication.class, args);\n    }\n\n}\n</code></pre>\n<p>but still the same error. <strong>How can I successfully configure the project with the structure I have shared in this question</strong>?</p>\n"},{"tags":["python","java","sql","pyspark"],"comments":[{"owner":{"account_id":12515566,"reputation":4742,"user_id":9108912,"display_name":"Vaebhav"},"score":0,"creation_date":1643950336,"post_id":70981458,"comment_id":125480654,"body_markdown":"This will help - https://stackoverflow.com/questions/48260412/environment-variables-pyspark-python-and-pyspark-driver-python","body":"This will help - <a href=\"https://stackoverflow.com/questions/48260412/environment-variables-pyspark-python-and-pyspark-driver-python\" title=\"environment variables pyspark python and pyspark driver python\">stackoverflow.com/questions/48260412/&hellip;</a>"},{"owner":{"account_id":23631466,"reputation":31,"user_id":17663126,"display_name":"Pratik Bawane"},"score":0,"creation_date":1643956611,"post_id":70981458,"comment_id":125481746,"body_markdown":"Ya bro but it works on PyCharm but not in Jupyter why?","body":"Ya bro but it works on PyCharm but not in Jupyter why?"},{"owner":{"account_id":23631466,"reputation":31,"user_id":17663126,"display_name":"Pratik Bawane"},"score":0,"creation_date":1643956652,"post_id":70981458,"comment_id":125481756,"body_markdown":"Can you tell me how to set that in Jupyter?","body":"Can you tell me how to set that in Jupyter?"},{"owner":{"account_id":12515566,"reputation":4742,"user_id":9108912,"display_name":"Vaebhav"},"score":0,"creation_date":1643957722,"post_id":70981458,"comment_id":125481955,"body_markdown":"if you export the env variables according to the answer , that is applicable throughout. Since you are on windows , you can check how to add the environment variables accordingly , and do restart just in case","body":"if you export the env variables according to the answer , that is applicable throughout. Since you are on windows , you can check how to add the environment variables accordingly , and do restart just in case"},{"owner":{"account_id":23631466,"reputation":31,"user_id":17663126,"display_name":"Pratik Bawane"},"score":0,"creation_date":1643960562,"post_id":70981458,"comment_id":125482612,"body_markdown":"So what solution do I found to this is do &quot;pip install pyspark&quot; and &quot;python -m pip install findspark&quot; in anaconda prompt.","body":"So what solution do I found to this is do &quot;pip install pyspark&quot; and &quot;python -m pip install findspark&quot; in anaconda prompt."}],"answers":[{"tags":[],"owner":{"account_id":2679033,"reputation":27742,"user_id":2314737,"accept_rate":82,"display_name":"user2314737"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1643964001,"creation_date":1643964001,"answer_id":70983497,"question_id":70981458,"body_markdown":"The key is in this part of the error message:\r\n\r\n`RuntimeError: Python in worker has different version 3.9 than that in driver 3.10, PySpark cannot run with different minor versions. Please check environment variables PYSPARK_PYTHON and PYSPARK_DRIVER_PYTHON are correctly set.`\r\n\r\nYou need to have exactly the same Python versions in driver and worker nodes. \r\n\r\nProbably a quick solution would be to downgrade your Python version to 3.9 (assuming driver is running on the client you&#39;re using).","title":"How to resolve this error: Py4JJavaError: An error occurred while calling o70.showString?","body":"<p>The key is in this part of the error message:</p>\n<p><code>RuntimeError: Python in worker has different version 3.9 than that in driver 3.10, PySpark cannot run with different minor versions. Please check environment variables PYSPARK_PYTHON and PYSPARK_DRIVER_PYTHON are correctly set.</code></p>\n<p>You need to have exactly the same Python versions in driver and worker nodes.</p>\n<p>Probably a quick solution would be to downgrade your Python version to 3.9 (assuming driver is running on the client you're using).</p>\n"},{"comments":[{"owner":{"account_id":15992149,"reputation":467,"user_id":11541027,"display_name":"Daniel Moraite"},"score":0,"creation_date":1691080623,"post_id":74975034,"comment_id":135446465,"body_markdown":"Also works with Anaconda and poetry if you add it to your code (e.g. IDE: Visual Studio Code)","body":"Also works with Anaconda and poetry if you add it to your code (e.g. IDE: Visual Studio Code)"}],"tags":[],"owner":{"account_id":9823775,"reputation":543,"user_id":7277557,"display_name":"amaresh hiremani"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1672581601,"creation_date":1672581601,"answer_id":74975034,"question_id":70981458,"body_markdown":"before running the above code you can manually set the env variable\r\nlike this\r\n\r\n    import os\r\n    import sys\r\n    \r\n    os.environ[&#39;PYSPARK_PYTHON&#39;] = sys.executable\r\n    os.environ[&#39;PYSPARK_DRIVER_PYTHON&#39;] = sys.executable\r\n\r\nthis worked in jupyter notebook for me.","title":"How to resolve this error: Py4JJavaError: An error occurred while calling o70.showString?","body":"<p>before running the above code you can manually set the env variable\nlike this</p>\n<pre><code>import os\nimport sys\n\nos.environ['PYSPARK_PYTHON'] = sys.executable\nos.environ['PYSPARK_DRIVER_PYTHON'] = sys.executable\n</code></pre>\n<p>this worked in jupyter notebook for me.</p>\n"},{"tags":[],"owner":{"account_id":20393849,"reputation":1,"user_id":14961146,"display_name":"Elliot Nguyen"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691210981,"creation_date":1691210981,"answer_id":76840173,"question_id":70981458,"body_markdown":"The log error is pretty clear, python for running spark and python running in your code is different, you will need to set PYSPARK_PYTHON same version as your current python running, otherwise it will get default python in system","title":"How to resolve this error: Py4JJavaError: An error occurred while calling o70.showString?","body":"<p>The log error is pretty clear, python for running spark and python running in your code is different, you will need to set PYSPARK_PYTHON same version as your current python running, otherwise it will get default python in system</p>\n"}],"owner":{"account_id":23631466,"reputation":31,"user_id":17663126,"display_name":"Pratik Bawane"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":39817,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":70983497,"answer_count":3,"score":2,"last_activity_date":1691210981,"creation_date":1643949457,"question_id":70981458,"body_markdown":"Currently I&#39;m doing PySpark and working on DataFrame.  \r\nI&#39;ve created a DataFrame:\r\n\r\n    from pyspark.sql import *\r\n    import pandas as pd\r\n    spark = SparkSession.builder.appName(&quot;DataFarme&quot;).getOrCreate()\r\n    df = spark.createDataFrame([(&quot;Java&quot;, &quot;20000&quot;), (&quot;Python&quot;, &quot;100000&quot;), (&quot;Scala&quot;, &quot;3000&quot;)])\r\n    df.printSchema()\r\n\r\n#Output:-\r\n\r\n    root\r\n     |-- _1: string (nullable = true)\r\n     |-- _2: string (nullable = true)\r\n\r\nBut when I do `df.show()` its showing error as:\r\n\r\n    Py4JJavaError                             Traceback (most recent call last)\r\n    C:\\Users\\PRATIK~1\\AppData\\Local\\Temp/ipykernel_20924/3726558592.py in &lt;module&gt;\r\n    ----&gt; 1 df.show()\r\n    \r\n    C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\pyspark\\sql\\dataframe.py in show(self, n, truncate, vertical)\r\n        492 \r\n        493         if isinstance(truncate, bool) and truncate:\r\n    --&gt; 494             print(self._jdf.showString(n, 20, vertical))\r\n        495         else:\r\n        496             try:\r\n    \r\n    C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\py4j-0.10.9.3-src.zip\\py4j\\java_gateway.py in __call__(self, *args)\r\n       1319 \r\n       1320         answer = self.gateway_client.send_command(command)\r\n    -&gt; 1321         return_value = get_return_value(\r\n       1322             answer, self.gateway_client, self.target_id, self.name)\r\n       1323 \r\n    \r\n    C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\pyspark\\sql\\utils.py in deco(*a, **kw)\r\n        109     def deco(*a, **kw):\r\n        110         try:\r\n    --&gt; 111             return f(*a, **kw)\r\n        112         except py4j.protocol.Py4JJavaError as e:\r\n        113             converted = convert_exception(e.java_exception)\r\n    \r\n    C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\py4j-0.10.9.3-src.zip\\py4j\\protocol.py in get_return_value(answer, gateway_client, target_id, name)\r\n        324             value = OUTPUT_CONVERTER[type](answer[2:], gateway_client)\r\n        325             if answer[1] == REFERENCE_TYPE:\r\n    --&gt; 326                 raise Py4JJavaError(\r\n        327                     &quot;An error occurred while calling {0}{1}{2}.\\n&quot;.\r\n        328                     format(target_id, &quot;.&quot;, name), value)\r\n    \r\n    Py4JJavaError: An error occurred while calling o70.showString.\r\n    : org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 1.0 failed 1 times, most recent failure: Lost task 0.0 in stage 1.0 (TID 1) (KPI-PratikTrainee executor driver): org.apache.spark.api.python.PythonException: Traceback (most recent call last):\r\n      File &quot;C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\pyspark.zip\\pyspark\\worker.py&quot;, line 481, in main\r\n    RuntimeError: Python in worker has different version 3.9 than that in driver 3.10, PySpark cannot run with different minor versions. Please check environment variables PYSPARK_PYTHON and PYSPARK_DRIVER_PYTHON are correctly set.\r\n    \r\n    \tat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.handlePythonException(PythonRunner.scala:555)\r\n    \tat org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:713)\r\n    \tat org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:695)\r\n    \tat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.hasNext(PythonRunner.scala:508)\r\n    \tat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\r\n    \tat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:491)\r\n    \tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\r\n    \tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\r\n    \tat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\r\n    \tat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\r\n    \tat org.apache.spark.sql.execution.WholeStageCodegenExec$$anon$1.hasNext(WholeStageCodegenExec.scala:759)\r\n    \tat org.apache.spark.sql.execution.SparkPlan.$anonfun$getByteArrayRdd$1(SparkPlan.scala:349)\r\n    \tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2(RDD.scala:898)\r\n    \tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2$adapted(RDD.scala:898)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\r\n    \tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    \r\n    Driver stacktrace:\r\n    \tat org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2454)\r\n    \tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2403)\r\n    \tat org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2402)\r\n    \tat scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\r\n    \tat scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\r\n    \tat scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\r\n    \tat org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2402)\r\n    \tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1160)\r\n    \tat org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1160)\r\n    \tat scala.Option.foreach(Option.scala:407)\r\n    \tat org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1160)\r\n    \tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2642)\r\n    \tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2584)\r\n    \tat org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2573)\r\n    \tat org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\r\n    \tat org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:938)\r\n    \tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2214)\r\n    \tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2235)\r\n    \tat org.apache.spark.SparkContext.runJob(SparkContext.scala:2254)\r\n    \tat org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:476)\r\n    \tat org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:429)\r\n    \tat org.apache.spark.sql.execution.CollectLimitExec.executeCollect(limit.scala:48)\r\n    \tat org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3715)\r\n    \tat org.apache.spark.sql.Dataset.$anonfun$head$1(Dataset.scala:2728)\r\n    \tat org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3706)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\r\n    \tat org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\r\n    \tat org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\r\n    \tat org.apache.spark.sql.Dataset.withAction(Dataset.scala:3704)\r\n    \tat org.apache.spark.sql.Dataset.head(Dataset.scala:2728)\r\n    \tat org.apache.spark.sql.Dataset.take(Dataset.scala:2935)\r\n    \tat org.apache.spark.sql.Dataset.getRows(Dataset.scala:287)\r\n    \tat org.apache.spark.sql.Dataset.showString(Dataset.scala:326)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n    \tat java.lang.reflect.Method.invoke(Unknown Source)\r\n    \tat py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\r\n    \tat py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)\r\n    \tat py4j.Gateway.invoke(Gateway.java:282)\r\n    \tat py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\r\n    \tat py4j.commands.CallCommand.execute(CallCommand.java:79)\r\n    \tat py4j.ClientServerConnection.waitForCommands(ClientServerConnection.java:182)\r\n    \tat py4j.ClientServerConnection.run(ClientServerConnection.java:106)\r\n    \tat java.lang.Thread.run(Unknown Source)\r\n    Caused by: org.apache.spark.api.python.PythonException: Traceback (most recent call last):\r\n      File &quot;C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\pyspark.zip\\pyspark\\worker.py&quot;, line 481, in main\r\n    RuntimeError: Python in worker has different version 3.9 than that in driver 3.10, PySpark cannot run with different minor versions. Please check environment variables PYSPARK_PYTHON and PYSPARK_DRIVER_PYTHON are correctly set.\r\n    \r\n    \tat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.handlePythonException(PythonRunner.scala:555)\r\n    \tat org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:713)\r\n    \tat org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:695)\r\n    \tat org.apache.spark.api.python.BasePythonRunner$ReaderIterator.hasNext(PythonRunner.scala:508)\r\n    \tat org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\r\n    \tat scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:491)\r\n    \tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\r\n    \tat scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\r\n    \tat org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\r\n    \tat org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\r\n    \tat org.apache.spark.sql.execution.WholeStageCodegenExec$$anon$1.hasNext(WholeStageCodegenExec.scala:759)\r\n    \tat org.apache.spark.sql.execution.SparkPlan.$anonfun$getByteArrayRdd$1(SparkPlan.scala:349)\r\n    \tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2(RDD.scala:898)\r\n    \tat org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2$adapted(RDD.scala:898)\r\n    \tat org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\r\n    \tat org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\r\n    \tat org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\r\n    \tat org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\r\n    \tat org.apache.spark.scheduler.Task.run(Task.scala:131)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\r\n    \tat org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\r\n    \tat org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\r\n    \tat java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\r\n    \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\r\n    \t... 1 more\r\n\r\n\r\n\r\nSame thing occured for `df.collect()`.\r\n\r\nBut the same thing works perfectly fine in PyCharm once I set these 2 zip files in Project Structure: `py4j-0.10.9.3-src.zip, pyspark.zip`\r\n\r\n\r\n\r\nCan anybody tell me how to set these 2 files in Jupyter so that I can run df.show() and df.collect() please?","title":"How to resolve this error: Py4JJavaError: An error occurred while calling o70.showString?","body":"<p>Currently I'm doing PySpark and working on DataFrame.<br />\nI've created a DataFrame:</p>\n<pre><code>from pyspark.sql import *\nimport pandas as pd\nspark = SparkSession.builder.appName(&quot;DataFarme&quot;).getOrCreate()\ndf = spark.createDataFrame([(&quot;Java&quot;, &quot;20000&quot;), (&quot;Python&quot;, &quot;100000&quot;), (&quot;Scala&quot;, &quot;3000&quot;)])\ndf.printSchema()\n</code></pre>\n<p>#Output:-</p>\n<pre><code>root\n |-- _1: string (nullable = true)\n |-- _2: string (nullable = true)\n</code></pre>\n<p>But when I do <code>df.show()</code> its showing error as:</p>\n<pre><code>Py4JJavaError                             Traceback (most recent call last)\nC:\\Users\\PRATIK~1\\AppData\\Local\\Temp/ipykernel_20924/3726558592.py in &lt;module&gt;\n----&gt; 1 df.show()\n\nC:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\pyspark\\sql\\dataframe.py in show(self, n, truncate, vertical)\n    492 \n    493         if isinstance(truncate, bool) and truncate:\n--&gt; 494             print(self._jdf.showString(n, 20, vertical))\n    495         else:\n    496             try:\n\nC:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\py4j-0.10.9.3-src.zip\\py4j\\java_gateway.py in __call__(self, *args)\n   1319 \n   1320         answer = self.gateway_client.send_command(command)\n-&gt; 1321         return_value = get_return_value(\n   1322             answer, self.gateway_client, self.target_id, self.name)\n   1323 \n\nC:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\pyspark\\sql\\utils.py in deco(*a, **kw)\n    109     def deco(*a, **kw):\n    110         try:\n--&gt; 111             return f(*a, **kw)\n    112         except py4j.protocol.Py4JJavaError as e:\n    113             converted = convert_exception(e.java_exception)\n\nC:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\py4j-0.10.9.3-src.zip\\py4j\\protocol.py in get_return_value(answer, gateway_client, target_id, name)\n    324             value = OUTPUT_CONVERTER[type](answer[2:], gateway_client)\n    325             if answer[1] == REFERENCE_TYPE:\n--&gt; 326                 raise Py4JJavaError(\n    327                     &quot;An error occurred while calling {0}{1}{2}.\\n&quot;.\n    328                     format(target_id, &quot;.&quot;, name), value)\n\nPy4JJavaError: An error occurred while calling o70.showString.\n: org.apache.spark.SparkException: Job aborted due to stage failure: Task 0 in stage 1.0 failed 1 times, most recent failure: Lost task 0.0 in stage 1.0 (TID 1) (KPI-PratikTrainee executor driver): org.apache.spark.api.python.PythonException: Traceback (most recent call last):\n  File &quot;C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\pyspark.zip\\pyspark\\worker.py&quot;, line 481, in main\nRuntimeError: Python in worker has different version 3.9 than that in driver 3.10, PySpark cannot run with different minor versions. Please check environment variables PYSPARK_PYTHON and PYSPARK_DRIVER_PYTHON are correctly set.\n\n    at org.apache.spark.api.python.BasePythonRunner$ReaderIterator.handlePythonException(PythonRunner.scala:555)\n    at org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:713)\n    at org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:695)\n    at org.apache.spark.api.python.BasePythonRunner$ReaderIterator.hasNext(PythonRunner.scala:508)\n    at org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\n    at scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:491)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\n    at org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\n    at org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\n    at org.apache.spark.sql.execution.WholeStageCodegenExec$$anon$1.hasNext(WholeStageCodegenExec.scala:759)\n    at org.apache.spark.sql.execution.SparkPlan.$anonfun$getByteArrayRdd$1(SparkPlan.scala:349)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2(RDD.scala:898)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2$adapted(RDD.scala:898)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    at java.lang.Thread.run(Unknown Source)\n\nDriver stacktrace:\n    at org.apache.spark.scheduler.DAGScheduler.failJobAndIndependentStages(DAGScheduler.scala:2454)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2(DAGScheduler.scala:2403)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$abortStage$2$adapted(DAGScheduler.scala:2402)\n    at scala.collection.mutable.ResizableArray.foreach(ResizableArray.scala:62)\n    at scala.collection.mutable.ResizableArray.foreach$(ResizableArray.scala:55)\n    at scala.collection.mutable.ArrayBuffer.foreach(ArrayBuffer.scala:49)\n    at org.apache.spark.scheduler.DAGScheduler.abortStage(DAGScheduler.scala:2402)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1(DAGScheduler.scala:1160)\n    at org.apache.spark.scheduler.DAGScheduler.$anonfun$handleTaskSetFailed$1$adapted(DAGScheduler.scala:1160)\n    at scala.Option.foreach(Option.scala:407)\n    at org.apache.spark.scheduler.DAGScheduler.handleTaskSetFailed(DAGScheduler.scala:1160)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.doOnReceive(DAGScheduler.scala:2642)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2584)\n    at org.apache.spark.scheduler.DAGSchedulerEventProcessLoop.onReceive(DAGScheduler.scala:2573)\n    at org.apache.spark.util.EventLoop$$anon$1.run(EventLoop.scala:49)\n    at org.apache.spark.scheduler.DAGScheduler.runJob(DAGScheduler.scala:938)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2214)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2235)\n    at org.apache.spark.SparkContext.runJob(SparkContext.scala:2254)\n    at org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:476)\n    at org.apache.spark.sql.execution.SparkPlan.executeTake(SparkPlan.scala:429)\n    at org.apache.spark.sql.execution.CollectLimitExec.executeCollect(limit.scala:48)\n    at org.apache.spark.sql.Dataset.collectFromPlan(Dataset.scala:3715)\n    at org.apache.spark.sql.Dataset.$anonfun$head$1(Dataset.scala:2728)\n    at org.apache.spark.sql.Dataset.$anonfun$withAction$1(Dataset.scala:3706)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$5(SQLExecution.scala:103)\n    at org.apache.spark.sql.execution.SQLExecution$.withSQLConfPropagated(SQLExecution.scala:163)\n    at org.apache.spark.sql.execution.SQLExecution$.$anonfun$withNewExecutionId$1(SQLExecution.scala:90)\n    at org.apache.spark.sql.SparkSession.withActive(SparkSession.scala:775)\n    at org.apache.spark.sql.execution.SQLExecution$.withNewExecutionId(SQLExecution.scala:64)\n    at org.apache.spark.sql.Dataset.withAction(Dataset.scala:3704)\n    at org.apache.spark.sql.Dataset.head(Dataset.scala:2728)\n    at org.apache.spark.sql.Dataset.take(Dataset.scala:2935)\n    at org.apache.spark.sql.Dataset.getRows(Dataset.scala:287)\n    at org.apache.spark.sql.Dataset.showString(Dataset.scala:326)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\n    at java.lang.reflect.Method.invoke(Unknown Source)\n    at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\n    at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)\n    at py4j.Gateway.invoke(Gateway.java:282)\n    at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\n    at py4j.commands.CallCommand.execute(CallCommand.java:79)\n    at py4j.ClientServerConnection.waitForCommands(ClientServerConnection.java:182)\n    at py4j.ClientServerConnection.run(ClientServerConnection.java:106)\n    at java.lang.Thread.run(Unknown Source)\nCaused by: org.apache.spark.api.python.PythonException: Traceback (most recent call last):\n  File &quot;C:\\Spark\\spark-3.2.1-bin-hadoop3.2\\python\\lib\\pyspark.zip\\pyspark\\worker.py&quot;, line 481, in main\nRuntimeError: Python in worker has different version 3.9 than that in driver 3.10, PySpark cannot run with different minor versions. Please check environment variables PYSPARK_PYTHON and PYSPARK_DRIVER_PYTHON are correctly set.\n\n    at org.apache.spark.api.python.BasePythonRunner$ReaderIterator.handlePythonException(PythonRunner.scala:555)\n    at org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:713)\n    at org.apache.spark.api.python.PythonRunner$$anon$3.read(PythonRunner.scala:695)\n    at org.apache.spark.api.python.BasePythonRunner$ReaderIterator.hasNext(PythonRunner.scala:508)\n    at org.apache.spark.InterruptibleIterator.hasNext(InterruptibleIterator.scala:37)\n    at scala.collection.Iterator$$anon$11.hasNext(Iterator.scala:491)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\n    at scala.collection.Iterator$$anon$10.hasNext(Iterator.scala:460)\n    at org.apache.spark.sql.catalyst.expressions.GeneratedClass$GeneratedIteratorForCodegenStage1.processNext(Unknown Source)\n    at org.apache.spark.sql.execution.BufferedRowIterator.hasNext(BufferedRowIterator.java:43)\n    at org.apache.spark.sql.execution.WholeStageCodegenExec$$anon$1.hasNext(WholeStageCodegenExec.scala:759)\n    at org.apache.spark.sql.execution.SparkPlan.$anonfun$getByteArrayRdd$1(SparkPlan.scala:349)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2(RDD.scala:898)\n    at org.apache.spark.rdd.RDD.$anonfun$mapPartitionsInternal$2$adapted(RDD.scala:898)\n    at org.apache.spark.rdd.MapPartitionsRDD.compute(MapPartitionsRDD.scala:52)\n    at org.apache.spark.rdd.RDD.computeOrReadCheckpoint(RDD.scala:373)\n    at org.apache.spark.rdd.RDD.iterator(RDD.scala:337)\n    at org.apache.spark.scheduler.ResultTask.runTask(ResultTask.scala:90)\n    at org.apache.spark.scheduler.Task.run(Task.scala:131)\n    at org.apache.spark.executor.Executor$TaskRunner.$anonfun$run$3(Executor.scala:506)\n    at org.apache.spark.util.Utils$.tryWithSafeFinally(Utils.scala:1462)\n    at org.apache.spark.executor.Executor$TaskRunner.run(Executor.scala:509)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n    ... 1 more\n</code></pre>\n<p>Same thing occured for <code>df.collect()</code>.</p>\n<p>But the same thing works perfectly fine in PyCharm once I set these 2 zip files in Project Structure: <code>py4j-0.10.9.3-src.zip, pyspark.zip</code></p>\n<p>Can anybody tell me how to set these 2 files in Jupyter so that I can run df.show() and df.collect() please?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":7423601,"reputation":18712,"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"score":4,"creation_date":1691168637,"post_id":76837885,"comment_id":135460388,"body_markdown":"The problem is the try-with-resources in `find()`: it closes the `Stream&lt;Path&gt; walk` **before** returning it from the method.","body":"The problem is the try-with-resources in <code>find()</code>: it closes the <code>Stream&lt;Path&gt; walk</code> <b>before</b> returning it from the method."}],"answers":[{"tags":[],"owner":{"account_id":13170666,"reputation":78679,"user_id":9513184,"display_name":"Unmitigated"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1691210847,"creation_date":1691168741,"answer_id":76837925,"question_id":76837885,"body_markdown":"Don&#39;t close the `Stream&lt;Path&gt;` returned by walk inside the `find` method (as is currently being done by the try-with-resources).\r\n\r\nAccording to the [documentation](https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Files.html#walk(java.nio.file.Path,java.nio.file.FileVisitOption...)) (emphasis mine):\r\n\r\n&lt;blockquote&gt;The returned stream contains references to one or more open directories. The directories are closed by closing the stream.\r\n\r\nAPI Note:\r\nThis method must be used within a try-with-resources statement or similar control structure to ensure that the stream&#39;s open directories are closed promptly **after** the stream&#39;s operations have completed.&lt;/blockquote&gt;\r\n\r\n```\r\nstatic Stream&lt;CharSequence&gt; find() throws IOException {\r\n\treturn Files.walk(Path.of(&quot;C:/Temp&quot;)).map(Path::toString);\r\n}\r\n```\r\n\r\nYou can close it in `writeAllTxtSorted` instead.\r\n\r\n```java\r\ntry (var walk = find().sorted()) {\r\n    Files.write(file, walk::iterator, StandardOpenOption.CREATE);\r\n}\r\n```","title":"IllegalStateException occurs, writing a stream","body":"<p>Don't close the <code>Stream&lt;Path&gt;</code> returned by walk inside the <code>find</code> method (as is currently being done by the try-with-resources).</p>\n<p>According to the <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Files.html#walk(java.nio.file.Path,java.nio.file.FileVisitOption...)\" rel=\"nofollow noreferrer\">documentation</a> (emphasis mine):</p>\n<blockquote>The returned stream contains references to one or more open directories. The directories are closed by closing the stream.\n<p>API Note:\nThis method must be used within a try-with-resources statement or similar control structure to ensure that the stream's open directories are closed promptly <strong>after</strong> the stream's operations have completed.</blockquote></p>\n<pre><code>static Stream&lt;CharSequence&gt; find() throws IOException {\n    return Files.walk(Path.of(&quot;C:/Temp&quot;)).map(Path::toString);\n}\n</code></pre>\n<p>You can close it in <code>writeAllTxtSorted</code> instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try (var walk = find().sorted()) {\n    Files.write(file, walk::iterator, StandardOpenOption.CREATE);\n}\n</code></pre>\n"}],"owner":{"account_id":2002545,"reputation":832,"user_id":1793217,"display_name":"ngong"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":103,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76837925,"answer_count":1,"score":-1,"last_activity_date":1691210847,"creation_date":1691168321,"question_id":76837885,"body_markdown":"What am I doing wrong here:\r\n```\r\nprivate static void writeAllTxtSorted(String fileId) {\r\n\ttry {\r\n\t\tPath file = tmp.resolve(&quot;AllTxt&quot; + fileId);\r\n\t\tFiles.deleteIfExists(file);\r\n69-&gt;    Files.write(file, find().sorted()::iterator, StandardOpenOption.CREATE);\r\n\t} catch (Exception e) {\r\n\t\terr(e, &quot;problems&quot;, l);\r\n\t}\r\n}\r\n\r\nstatic Stream&lt;CharSequence&gt; find() throws IOException {\r\n\ttry (Stream&lt;Path&gt; walk = Files.walk(Path.of(&quot;C:/Temp&quot;))) {\r\n\t\treturn walk.map(pth -&gt; pth.toString());\r\n\t}\r\n}\r\n```\r\n```\r\njava.lang.IllegalStateException null\r\n[java.base/java.nio.file.FileTreeIterator.hasNext(FileTreeIterator.java:102)\r\n\tjava.base/java.util.Spliterators$IteratorSpliterator.tryAdvance(Spliterators.java:1855)\r\n\tjava.base/java.util.stream.StreamSpliterators$WrappingSpliterator.lambda$initPartialTraversalState$0(StreamSpliterators.java:292)\r\n\tjava.base/java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.fillBuffer(StreamSpliterators.java:206)\r\n\tjava.base/java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.doAdvance(StreamSpliterators.java:161)\r\n\tjava.base/java.util.stream.StreamSpliterators$WrappingSpliterator.tryAdvance(StreamSpliterators.java:298)\r\n\tjava.base/java.util.Spliterators$1Adapter.hasNext(Spliterators.java:681)\r\n\tjava.base/java.nio.file.Files.write(Files.java:3583)\r\n\tjava.base/java.nio.file.Files.write(Files.java:3633)\r\n\teu.ngong.allTxt/eu.ngong.allTxt.App.writeAllTxtSorted(App.java:69)\r\n\teu.ngong.allTxt/eu.ngong.allTxt.App.main(App.java:50)]\r\n```\r\n`tmp` is `java.io.temp`.&lt;BR/&gt;\r\n`err` is an operation logging the error on the `Logger l`.\r\n\r\nWhat this reduced code should do is, write all paths of files below `C:\\Temp` to a file.&lt;BR/&gt;\r\nInstead it throws the exception `IllegalStateException`.","title":"IllegalStateException occurs, writing a stream","body":"<p>What am I doing wrong here:</p>\n<pre><code>private static void writeAllTxtSorted(String fileId) {\n    try {\n        Path file = tmp.resolve(&quot;AllTxt&quot; + fileId);\n        Files.deleteIfExists(file);\n69-&gt;    Files.write(file, find().sorted()::iterator, StandardOpenOption.CREATE);\n    } catch (Exception e) {\n        err(e, &quot;problems&quot;, l);\n    }\n}\n\nstatic Stream&lt;CharSequence&gt; find() throws IOException {\n    try (Stream&lt;Path&gt; walk = Files.walk(Path.of(&quot;C:/Temp&quot;))) {\n        return walk.map(pth -&gt; pth.toString());\n    }\n}\n</code></pre>\n<pre><code>java.lang.IllegalStateException null\n[java.base/java.nio.file.FileTreeIterator.hasNext(FileTreeIterator.java:102)\n    java.base/java.util.Spliterators$IteratorSpliterator.tryAdvance(Spliterators.java:1855)\n    java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.lambda$initPartialTraversalState$0(StreamSpliterators.java:292)\n    java.base/java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.fillBuffer(StreamSpliterators.java:206)\n    java.base/java.util.stream.StreamSpliterators$AbstractWrappingSpliterator.doAdvance(StreamSpliterators.java:161)\n    java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.tryAdvance(StreamSpliterators.java:298)\n    java.base/java.util.Spliterators$1Adapter.hasNext(Spliterators.java:681)\n    java.base/java.nio.file.Files.write(Files.java:3583)\n    java.base/java.nio.file.Files.write(Files.java:3633)\n    eu.ngong.allTxt/eu.ngong.allTxt.App.writeAllTxtSorted(App.java:69)\n    eu.ngong.allTxt/eu.ngong.allTxt.App.main(App.java:50)]\n</code></pre>\n<p><code>tmp</code> is <code>java.io.temp</code>.<BR/>\n<code>err</code> is an operation logging the error on the <code>Logger l</code>.</p>\n<p>What this reduced code should do is, write all paths of files below <code>C:\\Temp</code> to a file.<BR/>\nInstead it throws the exception <code>IllegalStateException</code>.</p>\n"},{"tags":["java","spring-boot","gradle","dependencies","lombok"],"comments":[{"owner":{"account_id":18192720,"reputation":849,"user_id":13238310,"display_name":"idanz"},"score":0,"creation_date":1690569336,"post_id":76790052,"comment_id":135377196,"body_markdown":"Getters &amp; Setters should be accessible also from different projects. If you&#39;re using IntelliJ - I encountered a lot of caching issues along the years, so make sure you `clean install`  the `EntityModel` project to make sure it&#39;s installed locally. Then, you might need to restart the IntelliJ instance of `Onboarding`","body":"Getters &amp; Setters should be accessible also from different projects. If you&#39;re using IntelliJ - I encountered a lot of caching issues along the years, so make sure you <code>clean install</code>  the <code>EntityModel</code> project to make sure it&#39;s installed locally. Then, you might need to restart the IntelliJ instance of <code>Onboarding</code>"},{"owner":{"account_id":29111734,"reputation":13,"user_id":22301357,"display_name":"edpavanelli"},"score":0,"creation_date":1690572192,"post_id":76790052,"comment_id":135377589,"body_markdown":"@idanz I already tried to open the same project and subprojects in eclipse and the same happens. I usualy use the Ubuntu terminal to run ./gradlew clean build, the error I snippeted in my question above was coppied from my Ubuntu terminal.","body":"@idanz I already tried to open the same project and subprojects in eclipse and the same happens. I usualy use the Ubuntu terminal to run ./gradlew clean build, the error I snippeted in my question above was coppied from my Ubuntu terminal."},{"owner":{"account_id":1714477,"reputation":2068,"user_id":1571871,"display_name":"SamYonnou"},"score":0,"creation_date":1690584921,"post_id":76790052,"comment_id":135379023,"body_markdown":"In your `Onboarding` project, do you have the `io.freefair.lombok` plugin configured in the plugins block? Or are you trying to get lombok working without the plugin?","body":"In your <code>Onboarding</code> project, do you have the <code>io.freefair.lombok</code> plugin configured in the plugins block? Or are you trying to get lombok working without the plugin?"},{"owner":{"account_id":29111734,"reputation":13,"user_id":22301357,"display_name":"edpavanelli"},"score":0,"creation_date":1690921183,"post_id":76790052,"comment_id":135419625,"body_markdown":"Yes, I didn&#39;t have the io.freefair.lombok plugin configured, now that that I configured it&#39;s working, Thanks @SamYonnou","body":"Yes, I didn&#39;t have the io.freefair.lombok plugin configured, now that that I configured it&#39;s working, Thanks @SamYonnou"}],"answers":[{"tags":[],"owner":{"account_id":29111734,"reputation":13,"user_id":22301357,"display_name":"edpavanelli"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691208310,"creation_date":1690921680,"answer_id":76814965,"question_id":76790052,"body_markdown":"After configure the `io.freefair.lombok` plugin inside the &#39;Onboarding&#39; build.gradle.kts, it works:\r\n\r\n    plugins {\r\n\tjava\r\n\twar\r\n\tid(&quot;org.springframework.boot&quot;) version &quot;3.1.2&quot;\r\n\tid(&quot;io.spring.dependency-management&quot;) version &quot;1.1.2&quot;\r\n\tid(&quot;io.freefair.lombok&quot;) version &quot;8.1.0&quot;}","title":"Can I access Lombok getters and setters annotated inside a dependency project?","body":"<p>After configure the <code>io.freefair.lombok</code> plugin inside the 'Onboarding' build.gradle.kts, it works:</p>\n<pre><code>plugins {\njava\nwar\nid(&quot;org.springframework.boot&quot;) version &quot;3.1.2&quot;\nid(&quot;io.spring.dependency-management&quot;) version &quot;1.1.2&quot;\nid(&quot;io.freefair.lombok&quot;) version &quot;8.1.0&quot;}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":9072254,"reputation":1014,"user_id":6754986,"display_name":"LinFelix"},"score":0,"creation_date":1691591044,"post_id":76840123,"comment_id":135512633,"body_markdown":"Your answer could be improved with additional supporting information. Please [edit] to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers [in the help center](/help/how-to-answer).","body":"Your answer could be improved with additional supporting information. Please <a href=\"https://stackoverflow.com/posts/76840123/edit\">edit</a> to add further details, such as citations or documentation, so that others can confirm that your answer is correct. You can find more information on how to write good answers <a href=\"/help/how-to-answer\">in the help center</a>."},{"owner":{"account_id":29111734,"reputation":13,"user_id":22301357,"display_name":"edpavanelli"},"score":0,"creation_date":1691606036,"post_id":76840123,"comment_id":135515700,"body_markdown":"I decided not to use Lombok @Data annotation because I&#39;m using JPA and there&#39;s some articles on the internet warning about some problems that may occur when implementing these two thing together. like this one: [lombok-and-jpa-what-may-go-wrong](https://jpa-buddy.com/blog/lombok-and-jpa-what-may-go-wrong/)","body":"I decided not to use Lombok @Data annotation because I&#39;m using JPA and there&#39;s some articles on the internet warning about some problems that may occur when implementing these two thing together. like this one: <a href=\"https://jpa-buddy.com/blog/lombok-and-jpa-what-may-go-wrong/\" rel=\"nofollow noreferrer\">lombok-and-jpa-what-may-go-wrong</a>"}],"tags":[],"owner":{"account_id":11533281,"reputation":161,"user_id":8451595,"display_name":"Vishwajeet Singh"},"comment_count":2,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691208978,"creation_date":1691208978,"answer_id":76840123,"question_id":76790052,"body_markdown":"Use @Data annotation also inside the EntityModel file.","title":"Can I access Lombok getters and setters annotated inside a dependency project?","body":"<p>Use @Data annotation also inside the EntityModel file.</p>\n"}],"owner":{"account_id":29111734,"reputation":13,"user_id":22301357,"display_name":"edpavanelli"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":67,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":76814965,"answer_count":2,"score":1,"last_activity_date":1691208978,"creation_date":1690566820,"question_id":76790052,"body_markdown":"I have a project &#39;Onboarding&#39; which has another project &#39;EntityModel&#39; as a dependency. Inside &#39;EntityModel&#39; have a lot of entities annotated with Lombok, for example:\r\n\r\n\r\n```\r\n@NoArgsConstructor\r\n@Getter\r\n@Setter\r\n@ToString\r\n@Entity\r\n@Table(name=&quot;address&quot;)\r\npublic class Address {\r\n\r\n    @Id\r\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;address_generator_sequence&quot;)\r\n    @Column(name = &quot;address_id&quot;)\r\n    private long id;\r\n(...)\r\n```\r\n\r\nbut when I try to access the getters or setters of those entities in a &#39;Onboarding&#39; class:\r\n\r\n\r\n```\r\n@PostMapping(&quot;/createCustomer&quot;)\r\npublic ResponseEntity&lt;Customer&gt; createCustomer(@RequestBody Customer customer) throws URISyntaxException {\r\n\r\n        Address ad = new Address();\r\n\r\n        ad.getId();\r\n\r\n        return ResponseEntity.created(new URI(&quot;/user/&quot;)).build();\r\n    }\r\n```\r\n\r\n\r\nThe IDE doesn&#39;t show up the getters in the options box, and when I run the build, the compller shows me this:\r\n\r\n\r\n```\r\n(...)/Restaurant/onboarding/src/main/java/com/restaurant/onboarding/controller/OnboardingController.java:37: error: cannot find symbol\r\n        ad.getId();\r\n          ^\r\n  symbol:   method getId()\r\n  location: variable ad of type Address\r\n```\r\n\r\n\r\n\r\nwhen I opened the .class and realized the annotations didn&#39;t persist, I searched a little bit and saw that Lombok has the Retention as a Source. But even so, is there any other way, any other configuration that I can make to access Lombok getters and setters from another project?    ","title":"Can I access Lombok getters and setters annotated inside a dependency project?","body":"<p>I have a project 'Onboarding' which has another project 'EntityModel' as a dependency. Inside 'EntityModel' have a lot of entities annotated with Lombok, for example:</p>\n<pre><code>@NoArgsConstructor\n@Getter\n@Setter\n@ToString\n@Entity\n@Table(name=&quot;address&quot;)\npublic class Address {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = &quot;address_generator_sequence&quot;)\n    @Column(name = &quot;address_id&quot;)\n    private long id;\n(...)\n</code></pre>\n<p>but when I try to access the getters or setters of those entities in a 'Onboarding' class:</p>\n<pre><code>@PostMapping(&quot;/createCustomer&quot;)\npublic ResponseEntity&lt;Customer&gt; createCustomer(@RequestBody Customer customer) throws URISyntaxException {\n\n        Address ad = new Address();\n\n        ad.getId();\n\n        return ResponseEntity.created(new URI(&quot;/user/&quot;)).build();\n    }\n</code></pre>\n<p>The IDE doesn't show up the getters in the options box, and when I run the build, the compller shows me this:</p>\n<pre><code>(...)/Restaurant/onboarding/src/main/java/com/restaurant/onboarding/controller/OnboardingController.java:37: error: cannot find symbol\n        ad.getId();\n          ^\n  symbol:   method getId()\n  location: variable ad of type Address\n</code></pre>\n<p>when I opened the .class and realized the annotations didn't persist, I searched a little bit and saw that Lombok has the Retention as a Source. But even so, is there any other way, any other configuration that I can make to access Lombok getters and setters from another project?</p>\n"},{"tags":["java","string","logging","formatting","string-formatting"],"comments":[{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":0,"creation_date":1456914404,"post_id":35744310,"comment_id":59162315,"body_markdown":"No good ideas, maybe: could it make sense to create a wrapper for your logging calls - one method that takes message and substitution arguments ... and then calls logger.info and otherSystem.info?","body":"No good ideas, maybe: could it make sense to create a wrapper for your logging calls - one method that takes message and substitution arguments ... and then calls logger.info and otherSystem.info?"}],"answers":[{"tags":[],"owner":{"account_id":435799,"reputation":22985,"user_id":822588,"accept_rate":94,"display_name":"Sleiman Jneidi"},"comment_count":0,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1691208818,"creation_date":1456914482,"answer_id":35744523,"question_id":35744310,"body_markdown":"If you using `slf4j`, you can use its `MessageFormatter.arrayFormat` which returns a `FormattingTuple`,\r\n\r\n   \r\n    FormattingTuple ft = MessageFormatter.arrayFormat(format, argArray);\r\nAnd then convert it to a string.\r\n\r\n    String msg = ft.getMessage();\r\n\r\nWhich means you can add a utility method for that\r\n\r\n    static String format(String format, String...params) {\r\n        FormattingTuple ft = MessageFormatter.arrayFormat(format, params);\r\n        String message = ft.getMessage();\r\n        return message;\r\n    }\r\n    \r\n    System.out.println(format(&quot;hi {}, you {}&quot;, &quot;there&quot;, &quot;rock&quot;));","title":"Java: how to format string with logging-like pattern?","body":"<p>If you using <code>slf4j</code>, you can use its <code>MessageFormatter.arrayFormat</code> which returns a <code>FormattingTuple</code>,</p>\n<pre><code>FormattingTuple ft = MessageFormatter.arrayFormat(format, argArray);\n</code></pre>\n<p>And then convert it to a string.</p>\n<pre><code>String msg = ft.getMessage();\n</code></pre>\n<p>Which means you can add a utility method for that</p>\n<pre><code>static String format(String format, String...params) {\n    FormattingTuple ft = MessageFormatter.arrayFormat(format, params);\n    String message = ft.getMessage();\n    return message;\n}\n\nSystem.out.println(format(&quot;hi {}, you {}&quot;, &quot;there&quot;, &quot;rock&quot;));\n</code></pre>\n"}],"owner":{"account_id":1064189,"reputation":8562,"user_id":1065145,"accept_rate":28,"display_name":"Denis Kulagin"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1846,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":35744523,"answer_count":1,"score":4,"last_activity_date":1691208818,"creation_date":1456913944,"question_id":35744310,"body_markdown":"Sometimes it&#39;s required to compose a string using logging-like pattern:\r\n\r\n&gt; Something went wrong, detailA={}, detailB={}\r\n\r\nbut not in order to log it, but for other purposes (e.g. send over network).\r\n\r\nSometimes it&#39;s causing code duplication, like this:\r\n\r\n    logger.info(&quot;Something went wrong, detailA={}, detailB={}&quot;, detailA, detailB));\r\n\r\n    otherSystem.info(String.format(&quot;Something went wrong, detailA=%s, detailB=%s&quot;,\r\n      detailA, detailB);\r\n\r\nWhich is highly inconvenient and error-prone. How to format a string using logging pattern and logging-like API?","title":"Java: how to format string with logging-like pattern?","body":"<p>Sometimes it's required to compose a string using logging-like pattern:</p>\n\n<blockquote>\n  <p>Something went wrong, detailA={}, detailB={}</p>\n</blockquote>\n\n<p>but not in order to log it, but for other purposes (e.g. send over network).</p>\n\n<p>Sometimes it's causing code duplication, like this:</p>\n\n<pre><code>logger.info(\"Something went wrong, detailA={}, detailB={}\", detailA, detailB));\n\notherSystem.info(String.format(\"Something went wrong, detailA=%s, detailB=%s\",\n  detailA, detailB);\n</code></pre>\n\n<p>Which is highly inconvenient and error-prone. How to format a string using logging pattern and logging-like API?</p>\n"},{"tags":["java","arrays","hash","anagram"],"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":1,"creation_date":1683223817,"post_id":76176169,"comment_id":134337797,"body_markdown":"Your current code returns `true` immediately on a character match. You need to check **all** characters. (But see previous comment.)","body":"Your current code returns <code>true</code> immediately on a character match. You need to check <b>all</b> characters. (But see previous comment.)"},{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1683225618,"post_id":76176169,"comment_id":134338194,"body_markdown":"Crap, I was thinking palindromes. Ignore original comment. I&#39;m not sure which is worse--that I spaced out, or that it was still in my head 30 minutes later.","body":"Crap, I was thinking palindromes. Ignore original comment. I&#39;m not sure which is worse--that I spaced out, or that it was still in my head 30 minutes later."}],"answers":[{"comments":[{"owner":{"account_id":195854,"reputation":159194,"user_id":438992,"accept_rate":90,"display_name":"Dave Newton"},"score":0,"creation_date":1683225703,"post_id":76176293,"comment_id":134338208,"body_markdown":":rofl: :grimace: I just realized I was thinking palindromes, not anagrams.","body":":rofl: :grimace: I just realized I was thinking palindromes, not anagrams."}],"tags":[],"owner":{"account_id":17741504,"reputation":1083,"user_id":12881733,"display_name":"Bill Mair"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1683224969,"creation_date":1683224609,"answer_id":76176293,"question_id":76176169,"body_markdown":"After sorting you only have to check if the arrays are equal and return that as the result:\r\n\r\n    class Solution {\r\n        public boolean isAnagram(String s, String t) {\r\n            char[] s_array = s.toCharArray();\r\n            char[] t_array = t.toCharArray();\r\n\r\n            Arrays.sort(s_array);\r\n            Arrays.sort(t_array);\r\n\r\n            return Arrays.equals(s_array,t_array);\r\n        }\r\n    }\r\n\r\nIn your code you should only return false when they don&#39;t match:\r\n\r\n    class Solution {\r\n        public boolean isAnagram(String s, String t) {\r\n            char[] s_array = s.toCharArray();\r\n            char[] t_array = t.toCharArray();\r\n    \r\n            Arrays.sort(s_array);\r\n            Arrays.sort(t_array);\r\n    \r\n            if (s_array.length == t_array.length) {\r\n                for (int i = 0; i &lt;= s_array.length-1; i++) {\r\n                    if (s_array[i] != t_array[i]) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n\r\n","title":"Valid Anagram - Could Someone Please Explain why my code doesn&#39;t pass Example Case 2?","body":"<p>After sorting you only have to check if the arrays are equal and return that as the result:</p>\n<pre><code>class Solution {\n    public boolean isAnagram(String s, String t) {\n        char[] s_array = s.toCharArray();\n        char[] t_array = t.toCharArray();\n\n        Arrays.sort(s_array);\n        Arrays.sort(t_array);\n\n        return Arrays.equals(s_array,t_array);\n    }\n}\n</code></pre>\n<p>In your code you should only return false when they don't match:</p>\n<pre><code>class Solution {\n    public boolean isAnagram(String s, String t) {\n        char[] s_array = s.toCharArray();\n        char[] t_array = t.toCharArray();\n\n        Arrays.sort(s_array);\n        Arrays.sort(t_array);\n\n        if (s_array.length == t_array.length) {\n            for (int i = 0; i &lt;= s_array.length-1; i++) {\n                if (s_array[i] != t_array[i]) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683226640,"creation_date":1683226640,"answer_id":76176546,"question_id":76176169,"body_markdown":"The problem is that you are short circuiting your character comparison on a match without checking the other characters and returning `true` prematurely.  You need to short circuit on a mis-match and return `false`, otherwise return `true` after the for loop completes.\r\n\r\nBut no sense reinventing the wheel on comparisons. Just use `Arrays.compare`.\r\n```\r\npublic static boolean isAnagram(String s, String t) {\r\n     char[] s_array = s.toCharArray();\r\n     char[] t_array = t.toCharArray();\r\n\r\n     Arrays.sort(s_array);\r\n     Arrays.sort(t_array);\r\n     return Arrays.compare(s_array,t_array) == 0;\r\n}","title":"Valid Anagram - Could Someone Please Explain why my code doesn&#39;t pass Example Case 2?","body":"<p>The problem is that you are short circuiting your character comparison on a match without checking the other characters and returning <code>true</code> prematurely.  You need to short circuit on a mis-match and return <code>false</code>, otherwise return <code>true</code> after the for loop completes.</p>\n<p>But no sense reinventing the wheel on comparisons. Just use <code>Arrays.compare</code>.</p>\n<pre><code>public static boolean isAnagram(String s, String t) {\n     char[] s_array = s.toCharArray();\n     char[] t_array = t.toCharArray();\n\n     Arrays.sort(s_array);\n     Arrays.sort(t_array);\n     return Arrays.compare(s_array,t_array) == 0;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":27471165,"reputation":1,"user_id":20960046,"display_name":"Zaeem Ali"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691208002,"creation_date":1690899622,"answer_id":76812601,"question_id":76176169,"body_markdown":"Refer to this line of your code:\r\n\r\n    for (int i = 0; i &lt;= s_array.length-1; i++) {\r\n        if (s_array[i] == t_array[i]) {\r\n            return true;\r\n\r\nso when **rat** and **cat** are arranged you get  \r\n **act** and **art** respectively \r\n so after comparison of the first character, i.e. **&#39;a&#39;**, you are returning true and not checking the remaining ones as you can see that on the comparison of second character you get false. This is your error.\r\n\r\nHere is a solution to your problem:\r\n\r\n    public boolean isAnagram(String s, String t) {\r\n        char[] s_array = s.toCharArray();\r\n        char[] t_array = t.toCharArray();\r\n\r\n        Arrays.sort(s_array);\r\n        Arrays.sort(t_array);\r\n\r\n        if (s_array.length == t_array.length) {\r\n            for (int i = 0; i &lt;= s_array.length-1; i++) {\r\n                if (s_array[i] != t_array[i]) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\nI hope it helps.\r\n","title":"Valid Anagram - Could Someone Please Explain why my code doesn&#39;t pass Example Case 2?","body":"<p>Refer to this line of your code:</p>\n<pre><code>for (int i = 0; i &lt;= s_array.length-1; i++) {\n    if (s_array[i] == t_array[i]) {\n        return true;\n</code></pre>\n<p>so when <strong>rat</strong> and <strong>cat</strong> are arranged you get<br />\n<strong>act</strong> and <strong>art</strong> respectively\nso after comparison of the first character, i.e. <strong>'a'</strong>, you are returning true and not checking the remaining ones as you can see that on the comparison of second character you get false. This is your error.</p>\n<p>Here is a solution to your problem:</p>\n<pre><code>public boolean isAnagram(String s, String t) {\n    char[] s_array = s.toCharArray();\n    char[] t_array = t.toCharArray();\n\n    Arrays.sort(s_array);\n    Arrays.sort(t_array);\n\n    if (s_array.length == t_array.length) {\n        for (int i = 0; i &lt;= s_array.length-1; i++) {\n            if (s_array[i] != t_array[i]) {\n                return false;\n            }\n        }\n        return true;\n    }\n    return false;\n}\n</code></pre>\n<p>I hope it helps.</p>\n"}],"owner":{"account_id":28508601,"reputation":1,"user_id":21818909,"display_name":"guardianOfTime"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":368,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":3,"score":-2,"last_activity_date":1691208002,"creation_date":1683223478,"question_id":76176169,"body_markdown":"Given two strings s and t, return true if t is an anagram of s, and false otherwise.\r\n\r\nAn Anagram is a word or phrase formed by rearranging the letters of a different word or phrase, typically using all the original letters exactly once.\r\n\r\nExample 1:\r\nInput: s = &quot;anagram&quot;, t = &quot;nagaram&quot;\r\nOutput: true\r\n\r\nExample 2:\r\nInput: s = &quot;rat&quot;, t = &quot;car&quot;\r\nOutput: false\r\n\r\n```java\r\nclass Solution {\r\n    public boolean isAnagram(String s, String t) {\r\n        char[] s_array = s.toCharArray();\r\n        char[] t_array = t.toCharArray();\r\n\r\n        Arrays.sort(s_array);\r\n        Arrays.sort(t_array);\r\n\r\n        if (s_array.length == t_array.length) {\r\n            for (int i = 0; i &lt;= s_array.length-1; i++) {\r\n                if (s_array[i] == t_array[i]) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n}\r\n```\r\n\r\nFor Example 2, I&#39;m getting the output as true when the expected is false.\r\n\r\nI believe that my code should meet the requirements of the problem, but it is not working as expected. My approach involves converting the given string into a char array, sorting it, and then comparing it with another sorted char array. I expect that if the two arrays have the same values for each index, they are anagrams. However, it seems that there is something missing or incorrect in my approach.","title":"Valid Anagram - Could Someone Please Explain why my code doesn&#39;t pass Example Case 2?","body":"<p>Given two strings s and t, return true if t is an anagram of s, and false otherwise.</p>\n<p>An Anagram is a word or phrase formed by rearranging the letters of a different word or phrase, typically using all the original letters exactly once.</p>\n<p>Example 1:\nInput: s = &quot;anagram&quot;, t = &quot;nagaram&quot;\nOutput: true</p>\n<p>Example 2:\nInput: s = &quot;rat&quot;, t = &quot;car&quot;\nOutput: false</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Solution {\n    public boolean isAnagram(String s, String t) {\n        char[] s_array = s.toCharArray();\n        char[] t_array = t.toCharArray();\n\n        Arrays.sort(s_array);\n        Arrays.sort(t_array);\n\n        if (s_array.length == t_array.length) {\n            for (int i = 0; i &lt;= s_array.length-1; i++) {\n                if (s_array[i] == t_array[i]) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n}\n</code></pre>\n<p>For Example 2, I'm getting the output as true when the expected is false.</p>\n<p>I believe that my code should meet the requirements of the problem, but it is not working as expected. My approach involves converting the given string into a char array, sorting it, and then comparing it with another sorted char array. I expect that if the two arrays have the same values for each index, they are anagrams. However, it seems that there is something missing or incorrect in my approach.</p>\n"},{"tags":["java","php","android","post","localhost"],"answers":[{"comments":[{"owner":{"account_id":458026,"reputation":2652,"user_id":857681,"display_name":"speedynomads"},"score":7,"creation_date":1465557383,"post_id":35486758,"comment_id":62963302,"body_markdown":"Could you explain &quot;So I changed the IP Address from 10.0.2.2 to the IPv4 address&quot;? Thanks","body":"Could you explain &quot;So I changed the IP Address from 10.0.2.2 to the IPv4 address&quot;? Thanks"},{"owner":{"account_id":6354551,"reputation":901,"user_id":4932376,"accept_rate":62,"display_name":"Saumik Bhattacharya"},"score":0,"creation_date":1465582002,"post_id":35486758,"comment_id":62978651,"body_markdown":"I was using 10.0.2.2 as my IP address in my code, which was incorrect. Hence I changed it to the IPv4 address. Then it started working.","body":"I was using 10.0.2.2 as my IP address in my code, which was incorrect. Hence I changed it to the IPv4 address. Then it started working."},{"owner":{"account_id":458026,"reputation":2652,"user_id":857681,"display_name":"speedynomads"},"score":6,"creation_date":1465814128,"post_id":35486758,"comment_id":63041111,"body_markdown":"What is the IPv4 address?","body":"What is the IPv4 address?"},{"owner":{"account_id":6354551,"reputation":901,"user_id":4932376,"accept_rate":62,"display_name":"Saumik Bhattacharya"},"score":6,"creation_date":1465885870,"post_id":35486758,"comment_id":63073662,"body_markdown":"@domji84 -- Go to `Command Prompt`, and type `ipconfig`, it will list out the IP addresses. There you can find `IPv4` address.","body":"@domji84 -- Go to <code>Command Prompt</code>, and type <code>ipconfig</code>, it will list out the IP addresses. There you can find <code>IPv4</code> address."}],"tags":[],"owner":{"account_id":6354551,"reputation":901,"user_id":4932376,"accept_rate":62,"display_name":"Saumik Bhattacharya"},"comment_count":4,"down_vote_count":0,"up_vote_count":10,"is_accepted":true,"score":10,"last_activity_date":1547639769,"creation_date":1455812217,"answer_id":35486758,"question_id":35441481,"body_markdown":"I have figured out the reason why it was not working.\r\nThere were two issues -- \r\n\r\n1. The IP Address was not correct. So I changed the IP Address from `10.0.2.2` to the `IPv4` address - which can be obtained on windows by typeing `ipconfig`  in the command prompt and see [link][1] for  linux.\r\n\r\n2. Also the port number 8080 was not correct. I have set my own port number in `httpd.conf` file, like \r\n`##Listen 12.34.56.78:8383Listen 0.0.0.0:8383Listen [::0]:8383##`, under Apache and I used the same.\r\n\r\nAfter changing both and re-starting the WAMP server, it worked like a charm.\r\n\r\n\r\n  [1]: https://opensource.com/article/18/5/how-find-ip-address-linux","title":"Connection to LocalHost/10.0.2.2 from Android Emulator timed out","body":"<p>I have figured out the reason why it was not working.\nThere were two issues -- </p>\n\n<ol>\n<li><p>The IP Address was not correct. So I changed the IP Address from <code>10.0.2.2</code> to the <code>IPv4</code> address - which can be obtained on windows by typeing <code>ipconfig</code>  in the command prompt and see <a href=\"https://opensource.com/article/18/5/how-find-ip-address-linux\" rel=\"noreferrer\">link</a> for  linux.</p></li>\n<li><p>Also the port number 8080 was not correct. I have set my own port number in <code>httpd.conf</code> file, like \n<code>##Listen 12.34.56.78:8383Listen 0.0.0.0:8383Listen [::0]:8383##</code>, under Apache and I used the same.</p></li>\n</ol>\n\n<p>After changing both and re-starting the WAMP server, it worked like a charm.</p>\n"},{"comments":[{"owner":{"account_id":2454056,"reputation":364,"user_id":2139664,"accept_rate":83,"display_name":"Paul G&#246;tze"},"score":0,"creation_date":1556013941,"post_id":40663284,"comment_id":98284956,"body_markdown":"Itâs `10.0.3.2` for recent versions of Genymotion, see https://stackoverflow.com/a/18940022/2139664","body":"Itâs <code>10.0.3.2</code> for recent versions of Genymotion, see <a href=\"https://stackoverflow.com/a/18940022/2139664\">stackoverflow.com/a/18940022/2139664</a>"}],"tags":[],"owner":{"account_id":3522784,"reputation":200,"user_id":2944644,"display_name":"styssi"},"comment_count":1,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1479410430,"creation_date":1479410430,"answer_id":40663284,"question_id":35441481,"body_markdown":"Making a connection from your Android to your Computer is working with 10.0.2.2 only on an Google Android Virtual Device. Android Virtual Devices are listening for 10.0.2.2 and forwarding all the requests to your computer.\r\n\r\nGenymotion Android Virtual Devices are listening on 10.0.2.3 and forwarding those requests to your computer.\r\n\r\n10.0.2.2 is not working with your real Android device. If you want to use it with your real device you have to set the IP of your computer, as it has been suggested by a previous answer.","title":"Connection to LocalHost/10.0.2.2 from Android Emulator timed out","body":"<p>Making a connection from your Android to your Computer is working with 10.0.2.2 only on an Google Android Virtual Device. Android Virtual Devices are listening for 10.0.2.2 and forwarding all the requests to your computer.</p>\n\n<p>Genymotion Android Virtual Devices are listening on 10.0.2.3 and forwarding those requests to your computer.</p>\n\n<p>10.0.2.2 is not working with your real Android device. If you want to use it with your real device you have to set the IP of your computer, as it has been suggested by a previous answer.</p>\n"},{"tags":[],"owner":{"account_id":5367915,"reputation":319,"user_id":4277227,"accept_rate":80,"display_name":"Zafar Imam"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1535540903,"creation_date":1535540903,"answer_id":52075998,"question_id":35441481,"body_markdown":"Why to go for localhost or any ip address to run on emulator or real device simply go for [ngrok][1] to convert the localhost as a global address with very convenient and simplest way. \r\n\r\n\r\n  [1]: https://dashboard.ngrok.com/get-started","title":"Connection to LocalHost/10.0.2.2 from Android Emulator timed out","body":"<p>Why to go for localhost or any ip address to run on emulator or real device simply go for <a href=\"https://dashboard.ngrok.com/get-started\" rel=\"nofollow noreferrer\">ngrok</a> to convert the localhost as a global address with very convenient and simplest way. </p>\n"},{"tags":[],"owner":{"account_id":4767604,"reputation":251,"user_id":3853332,"display_name":"sklimkovitch"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1614298426,"creation_date":1614298426,"answer_id":66378345,"question_id":35441481,"body_markdown":"In my situation, I had this code running on my android device:\r\n\r\n    private static final String BACKEND_URL = &quot;http://10.0.2.2:4242/&quot;; // 10.0.2.2 is the Android emulator&#39;s alias to localhost\r\n\r\nBut my server code was running on my PC. So since my PC and my android device are &quot;not the same device&quot;, that&#39;s why &quot;http://10.0.2.2:4242/&quot; didn&#39;t work. Solution was to change &quot;http://10.0.2.2:4242/&quot; to &quot;https://&lt;IP_OF_SERVER&gt;:4242/&quot;","title":"Connection to LocalHost/10.0.2.2 from Android Emulator timed out","body":"<p>In my situation, I had this code running on my android device:</p>\n<pre><code>private static final String BACKEND_URL = &quot;http://10.0.2.2:4242/&quot;; // 10.0.2.2 is the Android emulator's alias to localhost\n</code></pre>\n<p>But my server code was running on my PC. So since my PC and my android device are &quot;not the same device&quot;, that's why &quot;http://10.0.2.2:4242/&quot; didn't work. Solution was to change &quot;http://10.0.2.2:4242/&quot; to &quot;https://&lt;IP_OF_SERVER&gt;:4242/&quot;</p>\n"},{"comments":[{"owner":{"account_id":3156203,"reputation":4585,"user_id":2668564,"display_name":"jfk"},"score":0,"creation_date":1628506385,"post_id":68141656,"comment_id":121430256,"body_markdown":"The issue got solved by disabling proxy. .. Btw, I couldnt find where to add the IP address 10.0.2.2 to bypass it. Pls share where to add this in the settings.","body":"The issue got solved by disabling proxy. .. Btw, I couldnt find where to add the IP address 10.0.2.2 to bypass it. Pls share where to add this in the settings."}],"tags":[],"owner":{"account_id":7342277,"reputation":11,"user_id":5591300,"display_name":"Roger"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1624704955,"creation_date":1624704955,"answer_id":68141656,"question_id":35441481,"body_markdown":"Accepted answer to this question is really unclear so maybe this will help someone.  \r\nJust got the same problem and resolved it by executing &quot;adb reverse tcp:8080 tcp:8080&quot;, although after I revoked forwarding, the host machine remained visible and all ports were working, so it is unclear how it works.\r\nMake sure that  \r\n - you have no proxy in wifi settings\r\n - if you have, then 10.0.2.2 is added to bypass without mask\r\n - that you didn&#39;t make a typo, sometimes people put 0 instead of 2 like this 10.0.**0**.2:8080","title":"Connection to LocalHost/10.0.2.2 from Android Emulator timed out","body":"<p>Accepted answer to this question is really unclear so maybe this will help someone.<br />\nJust got the same problem and resolved it by executing &quot;adb reverse tcp:8080 tcp:8080&quot;, although after I revoked forwarding, the host machine remained visible and all ports were working, so it is unclear how it works.\nMake sure that</p>\n<ul>\n<li>you have no proxy in wifi settings</li>\n<li>if you have, then 10.0.2.2 is added to bypass without mask</li>\n<li>that you didn't make a typo, sometimes people put 0 instead of 2 like this 10.0.<strong>0</strong>.2:8080</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":6193854,"reputation":1602,"user_id":4825796,"display_name":"Hozeis"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1683510703,"creation_date":1683510703,"answer_id":76197055,"question_id":35441481,"body_markdown":"This may be caused by vulkan. To fix it, you must turn vulkan off on emulator or chrome.\r\n\r\ncheck out this answer.\r\n\r\nhttps://stackoverflow.com/a/70842795/4825796","title":"Connection to LocalHost/10.0.2.2 from Android Emulator timed out","body":"<p>This may be caused by vulkan. To fix it, you must turn vulkan off on emulator or chrome.</p>\n<p>check out this answer.</p>\n<p><a href=\"https://stackoverflow.com/a/70842795/4825796\">https://stackoverflow.com/a/70842795/4825796</a></p>\n"}],"owner":{"account_id":6354551,"reputation":901,"user_id":4932376,"accept_rate":62,"display_name":"Saumik Bhattacharya"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47528,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":35486758,"answer_count":6,"score":18,"last_activity_date":1691207004,"creation_date":1455651109,"question_id":35441481,"body_markdown":"Although this question has been asked multiple times in StackOverflow and I went through many of them, still I couldn&#39;t resolve my issue or I am not able to find out the root cause of the issue. Hence, posting a new question.\r\n\r\nBelow are the list of links I went through --\r\n\r\n1. https://stackoverflow.com/questions/5806220/how-to-connect-to-my-http-localhost-web-server-from-android-emulator-in-eclipse\r\n\r\n2. https://stackoverflow.com/questions/6760585/accessing-localhostport-from-android-emulator\r\n\r\n3. https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device\r\n\r\n4. https://stackoverflow.com/questions/5528850/how-to-connect-localhost-in-android-emulator\r\n\r\nHere goes my code --\r\n\r\n    protected Void doInBackground(Void... params)\r\n        {\r\n            try\r\n            {\r\n                HttpURLConnection connection = null;\r\n\r\n                URL url = new URL(&quot;http://10.0.2.2:8080/android_connect/user_registration.php&quot;);\r\n                connection = (HttpURLConnection)url.openConnection();\r\n                connection.setDoOutput(true);\r\n                connection.setDoInput(true);\r\n                connection.setRequestMethod(&quot;POST&quot;);\r\n                connection.setUseCaches(false);\r\n                connection.setConnectTimeout(720000000);\r\n                connection.setReadTimeout(72000000);\r\n                connection.connect();\r\n\r\n                OutputStreamWriter output = new OutputStreamWriter(connection.getOutputStream());\r\n                output.write(emp_details.toString());\r\n                output.flush();\r\n                output.close();\r\n\r\n                HttpResult = connection.getResponseCode();\r\n\r\n                connection.disconnect();\r\n            }\r\n            catch(Exception e)\r\n            {\r\n                e.printStackTrace();\r\n            }\r\n            return null;\r\n        }\r\n\r\nI am trying to connect Android with MySQL database using PHP through WAMP server. The PHP file (user_registration.php) is being saved in the below path --\r\n\r\n    C:\\wamp\\www\\android_connect\r\n\r\nNow after executing the code, I am getting an error like &quot;**java.net.SocketTimeoutException: failed to connect to /10.0.2.2 (port 8080) after 720000000ms: isConnected failed: ETIMEDOUT (Connection timed out)**&quot;.\r\n\r\nI went through the particular link in order to resolve this issue -- \r\n\r\nhttps://stackoverflow.com/questions/21811789/android-connection-to-localhost\r\n\r\nBut could not understand how it has been resolved! :) \r\n\r\nCan you please help me in this case? Please note I am using Android Studio for my build.\r\n\r\nThanks in advance!","title":"Connection to LocalHost/10.0.2.2 from Android Emulator timed out","body":"<p>Although this question has been asked multiple times in StackOverflow and I went through many of them, still I couldn't resolve my issue or I am not able to find out the root cause of the issue. Hence, posting a new question.</p>\n\n<p>Below are the list of links I went through --</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/5806220/how-to-connect-to-my-http-localhost-web-server-from-android-emulator-in-eclipse\">How to connect to my http://localhost web server from Android Emulator in Eclipse</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/6760585/accessing-localhostport-from-android-emulator\">Accessing localhost:port from Android emulator</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/4779963/how-can-i-access-my-localhost-from-my-android-device\">How can I access my localhost from my Android device?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/5528850/how-to-connect-localhost-in-android-emulator\">how to connect localhost in android emulator?</a></p></li>\n</ol>\n\n<p>Here goes my code --</p>\n\n<pre><code>protected Void doInBackground(Void... params)\n    {\n        try\n        {\n            HttpURLConnection connection = null;\n\n            URL url = new URL(\"http://10.0.2.2:8080/android_connect/user_registration.php\");\n            connection = (HttpURLConnection)url.openConnection();\n            connection.setDoOutput(true);\n            connection.setDoInput(true);\n            connection.setRequestMethod(\"POST\");\n            connection.setUseCaches(false);\n            connection.setConnectTimeout(720000000);\n            connection.setReadTimeout(72000000);\n            connection.connect();\n\n            OutputStreamWriter output = new OutputStreamWriter(connection.getOutputStream());\n            output.write(emp_details.toString());\n            output.flush();\n            output.close();\n\n            HttpResult = connection.getResponseCode();\n\n            connection.disconnect();\n        }\n        catch(Exception e)\n        {\n            e.printStackTrace();\n        }\n        return null;\n    }\n</code></pre>\n\n<p>I am trying to connect Android with MySQL database using PHP through WAMP server. The PHP file (user_registration.php) is being saved in the below path --</p>\n\n<pre><code>C:\\wamp\\www\\android_connect\n</code></pre>\n\n<p>Now after executing the code, I am getting an error like \"<strong>java.net.SocketTimeoutException: failed to connect to /10.0.2.2 (port 8080) after 720000000ms: isConnected failed: ETIMEDOUT (Connection timed out)</strong>\".</p>\n\n<p>I went through the particular link in order to resolve this issue -- </p>\n\n<p><a href=\"https://stackoverflow.com/questions/21811789/android-connection-to-localhost\">Android connection to localhost</a></p>\n\n<p>But could not understand how it has been resolved! :) </p>\n\n<p>Can you please help me in this case? Please note I am using Android Studio for my build.</p>\n\n<p>Thanks in advance!</p>\n"},{"tags":["java","sql-server","spring","spring-boot","hibernate"],"comments":[{"owner":{"account_id":1144312,"reputation":25594,"user_id":1127428,"accept_rate":79,"display_name":"Dale K"},"score":0,"creation_date":1691113559,"post_id":76832462,"comment_id":135451270,"body_markdown":"As per the question guide, please do not post images of code, data, error messages, etc. - copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text.","body":"As per the question guide, please do not post images of code, data, error messages, etc. - copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text."},{"owner":{"account_id":27097454,"reputation":797,"user_id":20644506,"display_name":"Peng"},"score":0,"creation_date":1691126443,"post_id":76832462,"comment_id":135452269,"body_markdown":"port be occupied just find out the corssponding  process and then kill or some else fix it ,  Alternatviely   chanage another port , many port for choose ,.\nThe DataBase connection failed issue , checkout  your server which you deply database is enable  firewall , open the port  for your application request or ,just  build a whitelist and  add you application host into it","body":"port be occupied just find out the corssponding  process and then kill or some else fix it ,  Alternatviely   chanage another port , many port for choose ,. The DataBase connection failed issue , checkout  your server which you deply database is enable  firewall , open the port  for your application request or ,just  build a whitelist and  add you application host into it"},{"owner":{"account_id":166167,"reputation":8075,"user_id":390122,"accept_rate":75,"display_name":"AlwaysLearning"},"score":0,"creation_date":1691130180,"post_id":76832462,"comment_id":135452693,"body_markdown":"The error seems pretty self-explanatory, _com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: &quot;Connection refused: no further information. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.&quot;_ You have SQL Server Express edition installed, using a named instance, so is it actually configured to listen on tcp/1433 and accept client connections there?","body":"The error seems pretty self-explanatory, <i>com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: &quot;Connection refused: no further information. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.&quot;</i> You have SQL Server Express edition installed, using a named instance, so is it actually configured to listen on tcp/1433 and accept client connections there?"}],"answers":[{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1691205997,"creation_date":1691205997,"answer_id":76840043,"question_id":76832462,"body_markdown":"Make sure your SQLExpress service is started (services.msc) \r\n\r\nMakes sure TCP is enable on port 1433, https://kb.variphy.com/knowledge-base/how-to-set-static-tcp-port-1433-in-microsoft-sql-server-express/ (port 1433 is disabled by default)\r\n\r\nOnce TCP is configured you should be able to connect.\r\n","title":"Unable to connect to SQL Server via Java SpringBoot application","body":"<p>Make sure your SQLExpress service is started (services.msc)</p>\n<p>Makes sure TCP is enable on port 1433, <a href=\"https://kb.variphy.com/knowledge-base/how-to-set-static-tcp-port-1433-in-microsoft-sql-server-express/\" rel=\"nofollow noreferrer\">https://kb.variphy.com/knowledge-base/how-to-set-static-tcp-port-1433-in-microsoft-sql-server-express/</a> (port 1433 is disabled by default)</p>\n<p>Once TCP is configured you should be able to connect.</p>\n"}],"owner":{"account_id":10823271,"reputation":5,"user_id":7960034,"display_name":"asymmonds"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":314,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":76840043,"answer_count":1,"score":-1,"last_activity_date":1691205997,"creation_date":1691113056,"question_id":76832462,"body_markdown":"I am trying to just get the thing running and part of that involves connecting to SQL. I&#39;m using SQL Server Express and I&#39;ve attached a picture of my connection information below just in case you find something I misspelt. I keep getting a timeout error and I can&#39;t figure out why. I&#39;m sure I&#39;m missing something obvious. Thanks so much for your help!\r\n\r\nI also have an error with port 8080 being occupied so my program can&#39;t launch. I&#39;m not sure what&#39;s going on with that, netstat came back with nothing...\r\n\r\n[SqlExpress][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VBYKd.png\r\n\r\nmy pom file:\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    &lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n    \txsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    \t&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n    \t&lt;parent&gt;\r\n    \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\r\n    \t\t&lt;version&gt;3.1.2&lt;/version&gt;\r\n    \t\t&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\r\n    \t&lt;/parent&gt;\r\n    \t&lt;groupId&gt;com.example&lt;/groupId&gt;\r\n    \t&lt;artifactId&gt;theBeginning&lt;/artifactId&gt;\r\n    \t&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n    \t&lt;packaging&gt;war&lt;/packaging&gt;\r\n    \t&lt;name&gt;theBeginning&lt;/name&gt;\r\n    \t&lt;description&gt;First SpringBoot Project&lt;/description&gt;\r\n    \t&lt;properties&gt;\r\n    \t\t&lt;java.version&gt;17&lt;/java.version&gt;\r\n    \t&lt;/properties&gt;\r\n    \t&lt;dependencies&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;runtime&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t&lt;optional&gt;true&lt;/optional&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;provided&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t\t&lt;dependency&gt;\r\n    \t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n    \t\t\t&lt;scope&gt;test&lt;/scope&gt;\r\n    \t\t&lt;/dependency&gt;\r\n    \t&lt;/dependencies&gt;\r\n    \r\n    \t&lt;build&gt;\r\n    \t\t&lt;plugins&gt;\r\n    \t\t\t&lt;plugin&gt;\r\n    \t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n    \t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\r\n    \t\t\t\t&lt;configuration&gt;\r\n    \t\t\t\t\t&lt;excludes&gt;\r\n    \t\t\t\t\t\t&lt;exclude&gt;\r\n    \t\t\t\t\t\t\t&lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\r\n    \t\t\t\t\t\t\t&lt;artifactId&gt;lombok&lt;/artifactId&gt;\r\n    \t\t\t\t\t\t&lt;/exclude&gt;\r\n    \t\t\t\t\t&lt;/excludes&gt;\r\n    \t\t\t\t&lt;/configuration&gt;\r\n    \t\t\t&lt;/plugin&gt;\r\n    \t\t&lt;/plugins&gt;\r\n    \t&lt;/build&gt;\r\n    \r\n    &lt;/project&gt;\r\n\r\n\r\nMy application.properties file:\r\n\r\n```    spring.datasource.url=jdbc:sqlserver://localhost;databaseName=MobileApplication;integratedSecurity=true;\r\n    spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver\r\n    spring.jpa.hibernate.ddl-auto=update\r\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect\r\n```\r\n\r\nmy error message:\r\n```\r\n  .   ____          _            __ _ _\r\n /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n  &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n =========|_|==============|___/=/_/_/_/\r\n :: Spring Boot ::                (v3.1.2)\r\n\r\n2023-08-03T20:30:33.981-05:00  INFO 19512 --- [           main] c.e.t.TheBeginningApplication            : Starting TheBeginningApplication using Java 17.0.7 with PID 19512 (C:\\Users\\15407\\eclipse-workspace\\theBeginning\\target\\classes started by 15407 in C:\\Users\\15407\\eclipse-workspace\\theBeginning)\r\n2023-08-03T20:30:33.987-05:00  INFO 19512 --- [           main] c.e.t.TheBeginningApplication            : No active profile set, falling back to 1 default profile: &quot;default&quot;\r\n2023-08-03T20:30:34.710-05:00  INFO 19512 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\r\n2023-08-03T20:30:34.739-05:00  INFO 19512 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.\r\n2023-08-03T20:30:35.552-05:00  INFO 19512 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\r\n2023-08-03T20:30:35.563-05:00  INFO 19512 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\r\n2023-08-03T20:30:35.563-05:00  INFO 19512 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\r\n2023-08-03T20:30:35.688-05:00  INFO 19512 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\r\n2023-08-03T20:30:35.691-05:00  INFO 19512 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1638 ms\r\n2023-08-03T20:30:36.072-05:00  INFO 19512 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\r\n2023-08-03T20:30:36.133-05:00  INFO 19512 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\r\n2023-08-03T20:30:36.135-05:00  INFO 19512 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\r\n2023-08-03T20:30:36.279-05:00  INFO 19512 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-08-03T20:30:36.401-05:00  INFO 19512 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\r\n2023-08-03T20:30:36.422-05:00  INFO 19512 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\r\n2023-08-03T20:31:07.415-05:00 ERROR 19512 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\r\n\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: &quot;Connection refused: no further information. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.&quot;.\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:237) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:288) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2517) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:778) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3300) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:2950) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:2790) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1663) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1064) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat com.example.theBeginning.TheBeginningApplication.main(TheBeginningApplication.java:10) ~[classes/:na]\r\n\r\n2023-08-03T20:31:07.416-05:00  WARN 19512 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata\r\n\r\ncom.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: &quot;Connection refused: no further information. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.&quot;.\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:237) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:288) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2517) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:778) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3300) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:2950) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:2790) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1663) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1064) ~[mssql-jdbc-11.2.3.jre17.jar:na]\r\n\tat com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\r\n\tat com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\r\n\tat org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\r\n\tat org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\r\n\tat org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\r\n\tat com.example.theBeginning.TheBeginningApplication.main(TheBeginningApplication.java:10) ~[classes/:na]\r\n\r\n2023-08-03T20:31:07.557-05:00  INFO 19512 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\r\n2023-08-03T20:31:07.908-05:00  INFO 19512 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\r\n2023-08-03T20:31:07.916-05:00  INFO 19512 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-08-03T20:31:07.972-05:00  WARN 19512 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\r\n2023-08-03T20:31:08.597-05:00  WARN 19512 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean &#39;webServerStartStop&#39;\r\n2023-08-03T20:31:08.597-05:00  INFO 19512 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit &#39;default&#39;\r\n2023-08-03T20:31:08.597-05:00  INFO 19512 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\r\n2023-08-03T20:31:08.613-05:00  INFO 19512 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \r\n\r\nError starting ApplicationContext. To display the condition evaluation report re-run your application with &#39;debug&#39; enabled.\r\n2023-08-03T20:31:08.644-05:00 ERROR 19512 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n\r\n***************************\r\nAPPLICATION FAILED TO START\r\n***************************\r\n\r\nDescription:\r\n\r\nWeb server failed to start. Port 8080 was already in use.\r\n\r\nAction:\r\n\r\nIdentify and stop the process that&#39;s listening on port 8080 or configure this application to listen on another port.\r\n```","title":"Unable to connect to SQL Server via Java SpringBoot application","body":"<p>I am trying to just get the thing running and part of that involves connecting to SQL. I'm using SQL Server Express and I've attached a picture of my connection information below just in case you find something I misspelt. I keep getting a timeout error and I can't figure out why. I'm sure I'm missing something obvious. Thanks so much for your help!</p>\n<p>I also have an error with port 8080 being occupied so my program can't launch. I'm not sure what's going on with that, netstat came back with nothing...</p>\n<p><a href=\"https://i.stack.imgur.com/VBYKd.png\" rel=\"nofollow noreferrer\">SqlExpress</a></p>\n<p>my pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;theBeginning&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;theBeginning&lt;/name&gt;\n    &lt;description&gt;First SpringBoot Project&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.microsoft.sqlserver&lt;/groupId&gt;\n            &lt;artifactId&gt;mssql-jdbc&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>My application.properties file:</p>\n<pre><code>    spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver\n    spring.jpa.hibernate.ddl-auto=update\n    spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLServerDialect\n</code></pre>\n<p>my error message:</p>\n<pre><code>  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.1.2)\n\n2023-08-03T20:30:33.981-05:00  INFO 19512 --- [           main] c.e.t.TheBeginningApplication            : Starting TheBeginningApplication using Java 17.0.7 with PID 19512 (C:\\Users\\15407\\eclipse-workspace\\theBeginning\\target\\classes started by 15407 in C:\\Users\\15407\\eclipse-workspace\\theBeginning)\n2023-08-03T20:30:33.987-05:00  INFO 19512 --- [           main] c.e.t.TheBeginningApplication            : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-08-03T20:30:34.710-05:00  INFO 19512 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.\n2023-08-03T20:30:34.739-05:00  INFO 19512 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 16 ms. Found 0 JPA repository interfaces.\n2023-08-03T20:30:35.552-05:00  INFO 19512 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-08-03T20:30:35.563-05:00  INFO 19512 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-08-03T20:30:35.563-05:00  INFO 19512 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.11]\n2023-08-03T20:30:35.688-05:00  INFO 19512 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-08-03T20:30:35.691-05:00  INFO 19512 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1638 ms\n2023-08-03T20:30:36.072-05:00  INFO 19512 --- [           main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]\n2023-08-03T20:30:36.133-05:00  INFO 19512 --- [           main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.2.6.Final\n2023-08-03T20:30:36.135-05:00  INFO 19512 --- [           main] org.hibernate.cfg.Environment            : HHH000406: Using bytecode reflection optimizer\n2023-08-03T20:30:36.279-05:00  INFO 19512 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-08-03T20:30:36.401-05:00  INFO 19512 --- [           main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer\n2023-08-03T20:30:36.422-05:00  INFO 19512 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-08-03T20:31:07.415-05:00 ERROR 19512 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Exception during pool initialization.\n\ncom.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: &quot;Connection refused: no further information. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.&quot;.\n    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:237) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:288) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2517) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:778) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3300) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:2950) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:2790) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1663) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1064) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at com.example.theBeginning.TheBeginningApplication.main(TheBeginningApplication.java:10) ~[classes/:na]\n\n2023-08-03T20:31:07.416-05:00  WARN 19512 --- [           main] o.h.e.j.e.i.JdbcEnvironmentInitiator     : HHH000342: Could not obtain connection to query metadata\n\ncom.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host localhost, port 1433 has failed. Error: &quot;Connection refused: no further information. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.&quot;.\n    at com.microsoft.sqlserver.jdbc.SQLServerException.makeFromDriverError(SQLServerException.java:237) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerException.ConvertConnectExceptionToSQLServerException(SQLServerException.java:288) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SocketFinder.findSocket(IOBuffer.java:2517) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.TDSChannel.open(IOBuffer.java:778) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectHelper(SQLServerConnection.java:3300) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.login(SQLServerConnection.java:2950) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connectInternal(SQLServerConnection.java:2790) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerConnection.connect(SQLServerConnection.java:1663) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.microsoft.sqlserver.jdbc.SQLServerDriver.connect(SQLServerDriver.java:1064) ~[mssql-jdbc-11.2.3.jre17.jar:na]\n    at com.zaxxer.hikari.util.DriverDataSource.getConnection(DriverDataSource.java:121) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newConnection(PoolBase.java:359) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.PoolBase.newPoolEntry(PoolBase.java:201) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.createPoolEntry(HikariPool.java:470) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.checkFailFast(HikariPool.java:561) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.pool.HikariPool.&lt;init&gt;(HikariPool.java:100) ~[HikariCP-5.0.1.jar:na]\n    at com.zaxxer.hikari.HikariDataSource.getConnection(HikariDataSource.java:112) ~[HikariCP-5.0.1.jar:na]\n    at org.hibernate.engine.jdbc.connections.internal.DatasourceConnectionProviderImpl.getConnection(DatasourceConnectionProviderImpl.java:122) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator$ConnectionProviderJdbcConnectionAccess.obtainConnection(JdbcEnvironmentInitiator.java:316) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:152) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.engine.jdbc.env.internal.JdbcEnvironmentInitiator.initiateService(JdbcEnvironmentInitiator.java:34) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.registry.internal.StandardServiceRegistryImpl.initiateService(StandardServiceRegistryImpl.java:119) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.createService(AbstractServiceRegistryImpl.java:264) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.initializeService(AbstractServiceRegistryImpl.java:239) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.service.internal.AbstractServiceRegistryImpl.getService(AbstractServiceRegistryImpl.java:216) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.relational.Database.&lt;init&gt;(Database.java:45) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.getDatabase(InFlightMetadataCollectorImpl.java:230) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.&lt;init&gt;(InFlightMetadataCollectorImpl.java:198) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:166) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1380) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1451) ~[hibernate-core-6.2.6.Final.jar:6.2.6.Final]\n    at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:376) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:352) ~[spring-orm-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1817) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1766) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:598) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1155) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:608) ~[spring-context-6.0.11.jar:6.0.11]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:436) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:312) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306) ~[spring-boot-3.1.2.jar:3.1.2]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295) ~[spring-boot-3.1.2.jar:3.1.2]\n    at com.example.theBeginning.TheBeginningApplication.main(TheBeginningApplication.java:10) ~[classes/:na]\n\n2023-08-03T20:31:07.557-05:00  INFO 19512 --- [           main] o.h.b.i.BytecodeProviderInitiator        : HHH000021: Bytecode provider name : bytebuddy\n2023-08-03T20:31:07.908-05:00  INFO 19512 --- [           main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]\n2023-08-03T20:31:07.916-05:00  INFO 19512 --- [           main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'\n2023-08-03T20:31:07.972-05:00  WARN 19512 --- [           main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning\n2023-08-03T20:31:08.597-05:00  WARN 19512 --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'\n2023-08-03T20:31:08.597-05:00  INFO 19512 --- [           main] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'\n2023-08-03T20:31:08.597-05:00  INFO 19512 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-08-03T20:31:08.613-05:00  INFO 19512 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-08-03T20:31:08.644-05:00 ERROR 19512 --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nWeb server failed to start. Port 8080 was already in use.\n\nAction:\n\nIdentify and stop the process that's listening on port 8080 or configure this application to listen on another port.\n</code></pre>\n"},{"tags":["java","spring","oop","proxy","frameworks"],"answers":[{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691204640,"creation_date":1691204640,"answer_id":76839995,"question_id":76836835,"body_markdown":"If you put a breakpoint in DefaultSingletonBeanRegistry::getSingleton, you will be able to introspect this.beanPostProcessors and see the processors and their order. \r\nTransaction postprocessors are APO, so they will use CGLib to extended you original bean, for transactions you can put a breakpoint in `AbstractBeanFactoryAwareAdvisingPostProcessor::prepareProxyFactory` to see which beans are wrapped for @Trancational. \r\n\r\nAs with most things in Spring `@Ordered` can be use to control the order in which postprocessors are applied, a classical example is how (spring integrations) @Retry and @Transactional are handled, https://stackoverflow.com/questions/49678581/spring-retry-with-transactional.   \r\n","title":"Spring proxy under the hood. Custom BeanPostProcessor proxying","body":"<p>If you put a breakpoint in DefaultSingletonBeanRegistry::getSingleton, you will be able to introspect this.beanPostProcessors and see the processors and their order.\nTransaction postprocessors are APO, so they will use CGLib to extended you original bean, for transactions you can put a breakpoint in <code>AbstractBeanFactoryAwareAdvisingPostProcessor::prepareProxyFactory</code> to see which beans are wrapped for @Trancational.</p>\n<p>As with most things in Spring <code>@Ordered</code> can be use to control the order in which postprocessors are applied, a classical example is how (spring integrations) @Retry and @Transactional are handled, <a href=\"https://stackoverflow.com/questions/49678581/spring-retry-with-transactional\">Spring Retry with Transactional</a>.</p>\n"}],"owner":{"account_id":29160597,"reputation":9,"user_id":22339438,"display_name":"Flo Pec"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":94,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"answer_count":1,"score":-1,"last_activity_date":1691204640,"creation_date":1691159212,"question_id":76836835,"body_markdown":"Trying to write custom BeanPostProcessor i found many tutorials that showing simple way to create proxy object from my bean and throw it back to be handled by another BeanPostProcessors. I wonder, doesn&#39;t this approach break the further BPP chain because next BPP will not see the class metadata? Are there some additional tricks to avoid breaking chain that hasn&#39;t been shown in those tutorials? Also, how does spring itself handle such cases when creating @Transactional, @Async, etc. proxies of same bean?","title":"Spring proxy under the hood. Custom BeanPostProcessor proxying","body":"<p>Trying to write custom BeanPostProcessor i found many tutorials that showing simple way to create proxy object from my bean and throw it back to be handled by another BeanPostProcessors. I wonder, doesn't this approach break the further BPP chain because next BPP will not see the class metadata? Are there some additional tricks to avoid breaking chain that hasn't been shown in those tutorials? Also, how does spring itself handle such cases when creating @Transactional, @Async, etc. proxies of same bean?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1691203362,"post_id":76839938,"comment_id":135464223,"body_markdown":"The `WebMvcConfigurerAdapter` is deprecated, you shouldn&#39;t use it anymore. Just stick with an implementation of `WebMvcConfigurer`.","body":"The <code>WebMvcConfigurerAdapter</code> is deprecated, you shouldn&#39;t use it anymore. Just stick with an implementation of <code>WebMvcConfigurer</code>."},{"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"score":0,"creation_date":1691203770,"post_id":76839938,"comment_id":135464239,"body_markdown":"Great thanks. If you add that as a answer with example I will accept it. So I dont need the class WebConfig at all?","body":"Great thanks. If you add that as a answer with example I will accept it. So I dont need the class WebConfig at all?"},{"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"score":0,"creation_date":1691204237,"post_id":76839938,"comment_id":135464259,"body_markdown":"The method inside your main class does nothing, so in that way listed here it&#39;s useless. You&#39;d have to provide it at least as a bean. Just delete it, it shouldn&#39;t be placed here anyway. And keep on with a WebConfig class, example provided below.","body":"The method inside your main class does nothing, so in that way listed here it&#39;s useless. You&#39;d have to provide it at least as a bean. Just delete it, it shouldn&#39;t be placed here anyway. And keep on with a WebConfig class, example provided below."}],"answers":[{"tags":[],"owner":{"account_id":18670408,"reputation":143,"user_id":13609359,"display_name":"Slevin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1691204116,"creation_date":1691204116,"answer_id":76839976,"question_id":76839938,"body_markdown":"The `WebMvcConfigurerAdapter` is deprecated, you shouldn&#39;t use it anymore. Just stick with an implementation of `WebMvcConfigurer`:\r\n\r\n```java\r\n@Configuration(proxyBeanMethods = false)\r\npublic class WebConfig implements WebMvcConfigurer {\r\n\r\n    @Override\r\n    public void addCorsMappings(CorsRegistry registry) {\r\n        registry.addMapping(&quot;/**&quot;);\r\n    }\r\n}\r\n```\r\n\r\nHowever, later on you might set CORS configuration inside your SecurityFilterChain anyway, so the WebMvcConfigurer might more likely be used to set up resource handlers and formatters.","title":"Springboot Cors config - MyApplication and WebConfig","body":"<p>The <code>WebMvcConfigurerAdapter</code> is deprecated, you shouldn't use it anymore. Just stick with an implementation of <code>WebMvcConfigurer</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration(proxyBeanMethods = false)\npublic class WebConfig implements WebMvcConfigurer {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;);\n    }\n}\n</code></pre>\n<p>However, later on you might set CORS configuration inside your SecurityFilterChain anyway, so the WebMvcConfigurer might more likely be used to set up resource handlers and formatters.</p>\n"}],"owner":{"account_id":11736247,"reputation":435,"user_id":8589908,"accept_rate":25,"display_name":"Radika Moonesinghe"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76839976,"answer_count":1,"score":0,"last_activity_date":1691204116,"creation_date":1691202831,"question_id":76839938,"body_markdown":"My Spring Boot application has ended up with two classes that both have cors configuration in them.\r\n\r\nI presume one of them is unnecessary. Can someone explain why there is both?\r\n\r\nMyApplication:\r\n\r\n    @EntityScan(&quot;com.nz.myapp&quot;)\r\n    @SpringBootApplication(exclude = {SecurityAutoConfiguration.class })\r\n    public class MyApplication {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tSpringApplication.run(MyApplication.class, args);\r\n\t}\r\n\r\n\tpublic WebMvcConfigurer corsConfigurer() {\r\n\t\treturn new WebMvcConfigurer() {\r\n\t\t\t@Override\r\n\t\t\tpublic void addCorsMappings(CorsRegistry registry) {\r\n\t\t\t\tregistry.addMapping(&quot;/**&quot;);\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\r\n WebConfig \r\n\r\n    @Configuration\r\n    @EnableWebMvc\r\n    public class WebConfig extends WebMvcConfigurerAdapter {\r\n\r\n        @Override\r\n        public void addCorsMappings(CorsRegistry registry) {\r\n            registry.addMapping(&quot;/**&quot;);\r\n        }\r\n    }\r\n\r\n","title":"Springboot Cors config - MyApplication and WebConfig","body":"<p>My Spring Boot application has ended up with two classes that both have cors configuration in them.</p>\n<p>I presume one of them is unnecessary. Can someone explain why there is both?</p>\n<p>MyApplication:</p>\n<pre><code>@EntityScan(&quot;com.nz.myapp&quot;)\n@SpringBootApplication(exclude = {SecurityAutoConfiguration.class })\npublic class MyApplication {\n\npublic static void main(String[] args) {\n    SpringApplication.run(MyApplication.class, args);\n}\n\npublic WebMvcConfigurer corsConfigurer() {\n    return new WebMvcConfigurer() {\n        @Override\n        public void addCorsMappings(CorsRegistry registry) {\n            registry.addMapping(&quot;/**&quot;);\n        }\n    };\n}\n</code></pre>\n<p>WebConfig</p>\n<pre><code>@Configuration\n@EnableWebMvc\npublic class WebConfig extends WebMvcConfigurerAdapter {\n\n    @Override\n    public void addCorsMappings(CorsRegistry registry) {\n        registry.addMapping(&quot;/**&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":2485939,"reputation":19426,"user_id":2164365,"accept_rate":40,"display_name":"Abra"},"score":0,"creation_date":1691205249,"post_id":76839935,"comment_id":135464313,"body_markdown":"I think you can download the certificate from `spotify.com` and install it in your JRE.","body":"I think you can download the certificate from <code>spotify.com</code> and install it in your JRE."},{"owner":{"account_id":71739,"reputation":307163,"user_id":207421,"accept_rate":82,"display_name":"user207421"},"score":0,"creation_date":1691205287,"post_id":76839935,"comment_id":135464318,"body_markdown":"Please provide the entire error message, not just the first piece of it.","body":"Please provide the entire error message, not just the first piece of it."}],"owner":{"account_id":22899855,"reputation":11,"user_id":19417266,"display_name":"user19417266"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":11,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691205296,"answer_count":0,"score":0,"last_activity_date":1691202691,"creation_date":1691202691,"question_id":76839935,"body_markdown":"I was facing this issue, as mentioned in title, when I tried to make request to another https spotify api endpoint to request for access token on-demand (right now, I have it hard-coded in my environment file). My spring-boot app runs over plain http protocol, and I am guessing that since my spring-boot app doesn&#39;t enable https, it won&#39;t present any valid SSL certificate to the spotify API endpoint for my request to actually get approved and reach the endpoint. However, I also don&#39;t want to go through the entire painful process of setting up my spring-boot app with https enabled as that would mean getting my own custom domain, getting valid certificate from root CA, and setting it up for my java springboot project just so I can call upon https endpoints. Much suggestions would be appreciated how to resolve this issue.\r\n\r\nHere is my FormController.java file:\r\n\r\n```\r\npackage com.example.play_app_backend.controllers;\r\n\r\nimport okhttp3.*;\r\nimport org.springframework.web.bind.annotation.PostMapping;\r\nimport org.springframework.web.bind.annotation.RequestMapping;\r\nimport org.springframework.web.bind.annotation.RestController;\r\nimport com.example.play_app_backend.FormData;\r\nimport org.springframework.web.bind.annotation.RequestBody;\r\nimport com.example.play_app_backend.SpotifyApiClient;\r\n\r\n@RestController\r\n@RequestMapping(&quot;/api&quot;)\r\npublic class FormController {\r\n    private SpotifyApiClient spotifyClient;\r\n\r\n    public FormController() {\r\n        spotifyClient = new SpotifyApiClient();\r\n    }\r\n\r\n    // helper to construct the query parameter q&#39;s query string!\r\n    public String constructQueryString(FormData d) {\r\n        String query = String.format(&quot;artist:%s genre:%s&quot;,\r\n                d.getArtist(),\r\n                d.getGenre());\r\n        System.out.printf(&quot;Query String: %s&quot;, query);\r\n        return query;\r\n    }\r\n\r\n    @PostMapping\r\n    public String handleFormSubmission(@RequestBody FormData data) {\r\n        try {\r\n            //String accessToken = spotifyClient.getAccessToken();\r\n            String accessToken = spotifyClient.getAccessToken(); \r\n            System.out.println(&quot;accessToken: &quot; + accessToken); \r\n            // now, with accessToken, we should utilize the data gotten from front-end to\r\n            // look for Spotify tracks\r\n            // that best match user criteria!\r\n\r\n            // base url of api endpoint for /search!\r\n            String apiUrl = &quot;https://api.spotify.com/v1/search&quot;;\r\n            String queryString = constructQueryString(data);\r\n            // full url containing necessary query params!\r\n            String fullUrl = apiUrl + &#39;?&#39; + &quot;q=&quot; + queryString + &quot; &amp;type=track&quot;;\r\n            System.out.println(&quot;full Url: &quot; + fullUrl); \r\n            OkHttpClient httpClient = new OkHttpClient();\r\n            Request req = new Request.Builder().url(fullUrl).addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken).get()\r\n                    .build();\r\n            try (Response resp = httpClient.newCall(req).execute()) {\r\n                if (resp.isSuccessful()) {\r\n                    String responseBody = resp.body().string();\r\n                    return responseBody;\r\n                } else {\r\n                    return &quot;failed to fetch tracks from spotify /search api endpoint!&quot;;\r\n                }\r\n            } catch (Exception e) {\r\n                return &quot;Error: &quot; + e.getMessage();\r\n            }\r\n        } catch (Exception e) {\r\n            String errorMsg = &quot;can&#39;t get access token&quot; + e.getMessage(); \r\n            return errorMsg;\r\n        }\r\n    }\r\n}\r\n```","title":"Facing Error: &quot;PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException&quot; for Calling Spotify &quot;/search&quot; API endpoint","body":"<p>I was facing this issue, as mentioned in title, when I tried to make request to another https spotify api endpoint to request for access token on-demand (right now, I have it hard-coded in my environment file). My spring-boot app runs over plain http protocol, and I am guessing that since my spring-boot app doesn't enable https, it won't present any valid SSL certificate to the spotify API endpoint for my request to actually get approved and reach the endpoint. However, I also don't want to go through the entire painful process of setting up my spring-boot app with https enabled as that would mean getting my own custom domain, getting valid certificate from root CA, and setting it up for my java springboot project just so I can call upon https endpoints. Much suggestions would be appreciated how to resolve this issue.</p>\n<p>Here is my FormController.java file:</p>\n<pre><code>package com.example.play_app_backend.controllers;\n\nimport okhttp3.*;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport com.example.play_app_backend.FormData;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport com.example.play_app_backend.SpotifyApiClient;\n\n@RestController\n@RequestMapping(&quot;/api&quot;)\npublic class FormController {\n    private SpotifyApiClient spotifyClient;\n\n    public FormController() {\n        spotifyClient = new SpotifyApiClient();\n    }\n\n    // helper to construct the query parameter q's query string!\n    public String constructQueryString(FormData d) {\n        String query = String.format(&quot;artist:%s genre:%s&quot;,\n                d.getArtist(),\n                d.getGenre());\n        System.out.printf(&quot;Query String: %s&quot;, query);\n        return query;\n    }\n\n    @PostMapping\n    public String handleFormSubmission(@RequestBody FormData data) {\n        try {\n            //String accessToken = spotifyClient.getAccessToken();\n            String accessToken = spotifyClient.getAccessToken(); \n            System.out.println(&quot;accessToken: &quot; + accessToken); \n            // now, with accessToken, we should utilize the data gotten from front-end to\n            // look for Spotify tracks\n            // that best match user criteria!\n\n            // base url of api endpoint for /search!\n            String apiUrl = &quot;https://api.spotify.com/v1/search&quot;;\n            String queryString = constructQueryString(data);\n            // full url containing necessary query params!\n            String fullUrl = apiUrl + '?' + &quot;q=&quot; + queryString + &quot; &amp;type=track&quot;;\n            System.out.println(&quot;full Url: &quot; + fullUrl); \n            OkHttpClient httpClient = new OkHttpClient();\n            Request req = new Request.Builder().url(fullUrl).addHeader(&quot;Authorization&quot;, &quot;Bearer &quot; + accessToken).get()\n                    .build();\n            try (Response resp = httpClient.newCall(req).execute()) {\n                if (resp.isSuccessful()) {\n                    String responseBody = resp.body().string();\n                    return responseBody;\n                } else {\n                    return &quot;failed to fetch tracks from spotify /search api endpoint!&quot;;\n                }\n            } catch (Exception e) {\n                return &quot;Error: &quot; + e.getMessage();\n            }\n        } catch (Exception e) {\n            String errorMsg = &quot;can't get access token&quot; + e.getMessage(); \n            return errorMsg;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","spring-test"],"answers":[{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691202351,"creation_date":1691202351,"answer_id":76839929,"question_id":76837386,"body_markdown":"My understanding of MockMVC, is that the HTTP layer is completely skipped. If you use Spring Security, the AuthenticationContext is configured in the test, by binding the Authentication to a thread local variable. \r\nWhen I want to test test controllers, and the full http stack, I will do use RestTemplate, and make Http request in my test sending the credentials as a http payload, then I&#39;m able to debug the entire auth-chain.\r\n\r\nWhen doing a Sping test, you have the option to use @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.X) where X is RANDOM_PORT, or DEFINED_PORT or MOCK, depending of what level you woant to test at \r\n","title":"Mock WebServerFactoryCustomizer in WebMvc-/SpringBootTest","body":"<p>My understanding of MockMVC, is that the HTTP layer is completely skipped. If you use Spring Security, the AuthenticationContext is configured in the test, by binding the Authentication to a thread local variable.\nWhen I want to test test controllers, and the full http stack, I will do use RestTemplate, and make Http request in my test sending the credentials as a http payload, then I'm able to debug the entire auth-chain.</p>\n<p>When doing a Sping test, you have the option to use @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.X) where X is RANDOM_PORT, or DEFINED_PORT or MOCK, depending of what level you woant to test at</p>\n"}],"owner":{"account_id":14461800,"reputation":177,"user_id":10446433,"display_name":"SimpleJack"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":22,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691202351,"creation_date":1691163508,"question_id":76837386,"body_markdown":"Is it possible to mock a [WebServerFactoryCustomizer&lt;AbstractServletWebServerFactory&gt;][1] in a SpringBootTest?\r\n\r\n```java\r\npublic class MyWebServerConfiguration implements WebServerFactoryCustomizer&lt;AbstractServletWebServerFactory&gt; {\r\n    @Override\r\n    public void customize(AbstractServletWebServerFactory factory) {\r\n        // Do your thing...\r\n    }\r\n}\r\n```\r\nWhy do I do this in the first place? Because I need an additional SSL conext to call a database with an encrypted connection. This means I have 2 connections:\r\n1. The frontend to the users browser\r\n2. The backend to the database\r\n\r\nThe database uses a certificate, that I create by myself.\r\n\r\nOne security concern was, that you should be able to do this setup only one time. After that, you&#39;re not allowed to change this configuration again. The problem now is, the `@WebMvcTest` or `@SpringBootTest` does call this, for every test. Therefore, I want to replace the production WebServer configuration with a mock one, that does actually nothing. I don&#39;t even need the 2 connections. For tests the default SpringBoot configuration would be sufficient enough.\r\n\r\nThe main problem here is, that this configuration does happen in a very early stage of the Spring livecycle:\r\n&gt;Beware: calls to this interface are usually made from a WebServerFactoryCustomizerBeanPostProcessor which is a BeanPostProcessor (so called very early in the ApplicationContext lifecycle). It might be safer to lookup dependencies lazily in the enclosing BeanFactory rather than injecting them with @Autowired.\r\n\r\n  [1]: https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.webserver.configure","title":"Mock WebServerFactoryCustomizer in WebMvc-/SpringBootTest","body":"<p>Is it possible to mock a <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/howto.html#howto.webserver.configure\" rel=\"nofollow noreferrer\">WebServerFactoryCustomizer</a> in a SpringBootTest?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyWebServerConfiguration implements WebServerFactoryCustomizer&lt;AbstractServletWebServerFactory&gt; {\n    @Override\n    public void customize(AbstractServletWebServerFactory factory) {\n        // Do your thing...\n    }\n}\n</code></pre>\n<p>Why do I do this in the first place? Because I need an additional SSL conext to call a database with an encrypted connection. This means I have 2 connections:</p>\n<ol>\n<li>The frontend to the users browser</li>\n<li>The backend to the database</li>\n</ol>\n<p>The database uses a certificate, that I create by myself.</p>\n<p>One security concern was, that you should be able to do this setup only one time. After that, you're not allowed to change this configuration again. The problem now is, the <code>@WebMvcTest</code> or <code>@SpringBootTest</code> does call this, for every test. Therefore, I want to replace the production WebServer configuration with a mock one, that does actually nothing. I don't even need the 2 connections. For tests the default SpringBoot configuration would be sufficient enough.</p>\n<p>The main problem here is, that this configuration does happen in a very early stage of the Spring livecycle:</p>\n<blockquote>\n<p>Beware: calls to this interface are usually made from a WebServerFactoryCustomizerBeanPostProcessor which is a BeanPostProcessor (so called very early in the ApplicationContext lifecycle). It might be safer to lookup dependencies lazily in the enclosing BeanFactory rather than injecting them with @Autowired.</p>\n</blockquote>\n"},{"tags":["java","spring","mapstruct","mapper"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1691178911,"post_id":76838786,"comment_id":135462179,"body_markdown":"Just as an aside: instead of defining instances, we can use `@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)` to register a mapper as bean. This makes the corresponding mapper injectable, and we do not need to create instances manually (and have additional testability due to DI).","body":"Just as an aside: instead of defining instances, we can use <code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)</code> to register a mapper as bean. This makes the corresponding mapper injectable, and we do not need to create instances manually (and have additional testability due to DI)."},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":0,"creation_date":1691184597,"post_id":76838786,"comment_id":135462953,"body_markdown":"Why do you need a duplicate variable altogether?","body":"Why do you need a duplicate variable altogether?"}],"answers":[{"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691201791,"creation_date":1691201791,"answer_id":76839908,"question_id":76838786,"body_markdown":"There could be, but I doubt it would be measurable unless you are mapping 100K objects, and measuring performance. I my guess is that it does not matter.\r\nBy having a static instance, you could be saving some memory (if there is state), but unless you are converting a lot, I doubt you could measure the difference when the JVM is up and running.","title":"What is the benefit of assigning a variable of a Mapper Instance to be static?","body":"<p>There could be, but I doubt it would be measurable unless you are mapping 100K objects, and measuring performance. I my guess is that it does not matter.\nBy having a static instance, you could be saving some memory (if there is state), but unless you are converting a lot, I doubt you could measure the difference when the JVM is up and running.</p>\n"}],"owner":{"account_id":23580577,"reputation":1,"user_id":17619654,"display_name":"RandomGuy"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":56,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1691201791,"creation_date":1691178460,"question_id":76838786,"body_markdown":"Let&#39;s suppose I have a Mapper Interface as follows:\r\n\r\n```\r\npublic interface SomeMapper {\r\n     SomeMapper INSTANCE = Mappers.getMapper(SomeMapper.class);\r\n\r\n\r\n     //Some Random Method\r\n     public RandomResponse doSomething();\r\n}\r\n```\r\n\r\nAnd then I have an Executor Class which uses the Mapper:\r\n\r\n```\r\npublic class someExecutor {\r\n     private final SomeMapper someMapper = SomeMapper.INSTANCE;\r\n\r\n     public void someFunction() {\r\n     final randomVariable = someMapper.doSomething();\r\n     }\r\n}\r\n```\r\n\r\nI want to understand if there&#39;s any benefit to making the someMapper variable inside someExecutor class as static. So example would be:\r\n\r\n```\r\nprivate static final SomeMapper someMapper = SomeMapper.INSTANCE;\r\n```\r\n\r\nIs there a benefit of assigning it as static vs assigning it as just private final?","title":"What is the benefit of assigning a variable of a Mapper Instance to be static?","body":"<p>Let's suppose I have a Mapper Interface as follows:</p>\n<pre><code>public interface SomeMapper {\n     SomeMapper INSTANCE = Mappers.getMapper(SomeMapper.class);\n\n\n     //Some Random Method\n     public RandomResponse doSomething();\n}\n</code></pre>\n<p>And then I have an Executor Class which uses the Mapper:</p>\n<pre><code>public class someExecutor {\n     private final SomeMapper someMapper = SomeMapper.INSTANCE;\n\n     public void someFunction() {\n     final randomVariable = someMapper.doSomething();\n     }\n}\n</code></pre>\n<p>I want to understand if there's any benefit to making the someMapper variable inside someExecutor class as static. So example would be:</p>\n<pre><code>private static final SomeMapper someMapper = SomeMapper.INSTANCE;\n</code></pre>\n<p>Is there a benefit of assigning it as static vs assigning it as just private final?</p>\n"},{"tags":["java","java-platform-module-system"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691201914,"post_id":76839896,"comment_id":135464175,"body_markdown":"Perhaps [this](https://stackoverflow.com/q/46502453/5133585) answer your question?","body":"Perhaps <a href=\"https://stackoverflow.com/q/46502453/5133585\">this</a> answer your question?"},{"owner":{"account_id":5218373,"reputation":773,"user_id":4172557,"accept_rate":0,"display_name":"Hicham Moustaid"},"score":1,"creation_date":1691202375,"post_id":76839896,"comment_id":135464193,"body_markdown":"@Sweeper I know the difference between requires and requires transitive but I don&#39;t understand why it makes a difference during module resolution","body":"@Sweeper I know the difference between requires and requires transitive but I don&#39;t understand why it makes a difference during module resolution"},{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1691202483,"post_id":76839896,"comment_id":135464195,"body_markdown":"How would you have written the spec for module resolution otherwise? What do you think the spec should say?","body":"How would you have written the spec for module resolution otherwise? What do you think the spec should say?"},{"owner":{"account_id":5218373,"reputation":773,"user_id":4172557,"accept_rate":0,"display_name":"Hicham Moustaid"},"score":1,"creation_date":1691202552,"post_id":76839896,"comment_id":135464196,"body_markdown":"@Sweeper I think it should simply say: &quot;Step 1: Recursive enumeration takes a set of module names, looks up each of their module declarations, and for each module declaration, recursively enumerates the module names given by the &#39;requires&#39; directives&quot;","body":"@Sweeper I think it should simply say: &quot;Step 1: Recursive enumeration takes a set of module names, looks up each of their module declarations, and for each module declaration, recursively enumerates the module names given by the &#39;requires&#39; directives&quot;"},{"owner":{"account_id":401843,"reputation":89863,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1691212010,"post_id":76839896,"comment_id":135464596,"body_markdown":"Is this perhaps awkwardly trying to state that transitive requires get priority over non-transitive ones for resolution, though, &#39;the host system&#39; is free to ignore that suggestion?","body":"Is this perhaps awkwardly trying to state that transitive requires get priority over non-transitive ones for resolution, though, &#39;the host system&#39; is free to ignore that suggestion?"},{"owner":{"account_id":5218373,"reputation":773,"user_id":4172557,"accept_rate":0,"display_name":"Hicham Moustaid"},"score":0,"creation_date":1691407456,"post_id":76839896,"comment_id":135482699,"body_markdown":"@rzwitserloot I tried to apply these rules, but I ended up with many unresolved modules...Can you provide an example that illustrates what you have understood?","body":"@rzwitserloot I tried to apply these rules, but I ended up with many unresolved modules...Can you provide an example that illustrates what you have understood?"},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1692638304,"post_id":76839896,"comment_id":135647981,"body_markdown":"Seems to be the same question as [this one](https://stackoverflow.com/q/68927394/2711488) but has no answer yet. Iâll will (re)read into the topic tomorrow.","body":"Seems to be the same question as <a href=\"https://stackoverflow.com/q/68927394/2711488\">this one</a> but has no answer yet. Iâll will (re)read into the topic tomorrow."}],"owner":{"account_id":5218373,"reputation":773,"user_id":4172557,"accept_rate":0,"display_name":"Hicham Moustaid"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":47,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1691201579,"creation_date":1691201579,"question_id":76839896,"body_markdown":"In the Java Language Specification, paragraph 7.7, it states: \r\n\r\n&gt; A &#39;dependency&#39; is the observable module enumerated by resolution (as described in the **java.lang.module** package specification) for a given &#39;requires&#39; directive.\r\n\r\nThe documentation of java.lang.module states: \r\n&gt; Step 1: \r\n&gt; Recursive enumeration takes a set of module names, looks up each of their module declarations, and for each module declaration, recursively enumerates:\r\n &gt;- the module names given by the &#39;requires&#39; directives with the &#39;transitive&#39; modifier, and\r\n &gt;- at the discretion of the host system, the module names given by the &#39;requires&#39; directives without the &#39;transitive&#39; modifier.\r\n\r\nI don&#39;t understand the purpose of distinguishing between &#39;requires&#39; and &#39;requires transitive&#39; when it comes to resolution. Any ideas?\r\n","title":"Enumeration of modules during resolution","body":"<p>In the Java Language Specification, paragraph 7.7, it states:</p>\n<blockquote>\n<p>A 'dependency' is the observable module enumerated by resolution (as described in the <strong>java.lang.module</strong> package specification) for a given 'requires' directive.</p>\n</blockquote>\n<p>The documentation of java.lang.module states:</p>\n<blockquote>\n<p>Step 1:\nRecursive enumeration takes a set of module names, looks up each of their module declarations, and for each module declaration, recursively enumerates:</p>\n<ul>\n<li>the module names given by the 'requires' directives with the 'transitive' modifier, and</li>\n<li>at the discretion of the host system, the module names given by the 'requires' directives without the 'transitive' modifier.</li>\n</ul>\n</blockquote>\n<p>I don't understand the purpose of distinguishing between 'requires' and 'requires transitive' when it comes to resolution. Any ideas?</p>\n"},{"tags":["java","authentication","sonarqube","http-status-code-401"],"comments":[{"owner":{"account_id":19254723,"reputation":2061,"user_id":14071914,"display_name":"JustAnotherDeveloper"},"score":0,"creation_date":1637580123,"post_id":70064883,"comment_id":123855623,"body_markdown":"The link you provided already explains three possible solutions and has sample code for one of them. What problem are you having implementing it?","body":"The link you provided already explains three possible solutions and has sample code for one of them. What problem are you having implementing it?"},{"owner":{"account_id":9504657,"reputation":7440,"user_id":7064617,"display_name":"JCompetence"},"score":0,"creation_date":1637581114,"post_id":70064883,"comment_id":123855971,"body_markdown":"It is telling you to encode.  In the example, it is taking an input variable (String), and encoding it before passing it to the write() method..  `org.owasp.encoder.Encode.forHtml(name);`","body":"It is telling you to encode.  In the example, it is taking an input variable (String), and encoding it before passing it to the write() method..  <code>org.owasp.encoder.Encode.forHtml(name);</code>"},{"owner":{"account_id":23417672,"reputation":13,"user_id":17478374,"display_name":"space99"},"score":0,"creation_date":1637678245,"post_id":70064883,"comment_id":123886896,"body_markdown":"if i am using the method descibed i am getting distorted output when i am expecting a json response","body":"if i am using the method descibed i am getting distorted output when i am expecting a json response"}],"answers":[{"tags":[],"owner":{"account_id":21004999,"reputation":788,"user_id":15435022,"display_name":"mattsmith5"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691199526,"creation_date":1691199526,"answer_id":76839817,"question_id":70064883,"body_markdown":"Two solutions below: per SonarQube  https://rules.sonarsource.com/java/RSPEC-5131/\r\n for errors like \r\n\r\n&gt; This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be\r\n&gt; vulnerable to XSS\r\n\r\n\r\n\r\n**Encode for HTML**\r\n\r\n    import org.owasp.encoder.Encode;\r\n\r\n    public void endpoint(HttpServletRequest request, HttpServletResponse response) throws IOException\r\n    {\r\n        String data        = request.getParameter(&quot;input&quot;);\r\n        PrintWriter writer = response.getWriter();\r\n    \r\n        writer.print(Encode.forHtml(data));\r\n    }\r\n\r\n\r\n**Set Content Type**\r\n\r\n    public void endpoint(HttpServletRequest request, HttpServletResponse response) throws IOException\r\n    {\r\n        String data        = request.getParameter(&quot;input&quot;);\r\n        PrintWriter writer = response.getWriter();\r\n    \r\n        response.setContentType(&quot;text/plain&quot;);\r\n        writer.print(data);\r\n    }","title":"sonar qube is throwing vulnerablity issue for xss in authentication entrypoint","body":"<p>Two solutions below: per SonarQube  <a href=\"https://rules.sonarsource.com/java/RSPEC-5131/\" rel=\"nofollow noreferrer\">https://rules.sonarsource.com/java/RSPEC-5131/</a>\nfor errors like</p>\n<blockquote>\n<p>This use of java/io/PrintWriter.write(Ljava/lang/String;)V could be\nvulnerable to XSS</p>\n</blockquote>\n<p><strong>Encode for HTML</strong></p>\n<pre><code>import org.owasp.encoder.Encode;\n\npublic void endpoint(HttpServletRequest request, HttpServletResponse response) throws IOException\n{\n    String data        = request.getParameter(&quot;input&quot;);\n    PrintWriter writer = response.getWriter();\n\n    writer.print(Encode.forHtml(data));\n}\n</code></pre>\n<p><strong>Set Content Type</strong></p>\n<pre><code>public void endpoint(HttpServletRequest request, HttpServletResponse response) throws IOException\n{\n    String data        = request.getParameter(&quot;input&quot;);\n    PrintWriter writer = response.getWriter();\n\n    response.setContentType(&quot;text/plain&quot;);\n    writer.print(data);\n}\n</code></pre>\n"}],"owner":{"account_id":23417672,"reputation":13,"user_id":17478374,"display_name":"space99"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":269,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691199526,"creation_date":1637579630,"question_id":70064883,"body_markdown":"I am trying to override the standard error response in case of 401 in springboot using authenticationentrypoint \r\n\r\nin commence method \r\nI am building my custom error object which involves below line\r\n\r\n     String responseMsg = mapper.writeValueAsString(responseObject);\r\n     response.getWriter().write(responseMsg);\r\n\r\nthe above solution works absolutely fine but sonarqube throws vulnerability issue \r\n\r\nis there any alternate to this or how can i overcome the sonarqube [error][1]\r\n\r\nthanks in advance\r\n\r\n\r\n  [1]: https://rules.sonarsource.com/java/RSPEC-5131\r\n\r\n\r\n**Update:-** I resolved it by using the solution in the link and then replacing the unwanted chars","title":"sonar qube is throwing vulnerablity issue for xss in authentication entrypoint","body":"<p>I am trying to override the standard error response in case of 401 in springboot using authenticationentrypoint</p>\n<p>in commence method\nI am building my custom error object which involves below line</p>\n<pre><code> String responseMsg = mapper.writeValueAsString(responseObject);\n response.getWriter().write(responseMsg);\n</code></pre>\n<p>the above solution works absolutely fine but sonarqube throws vulnerability issue</p>\n<p>is there any alternate to this or how can i overcome the sonarqube <a href=\"https://rules.sonarsource.com/java/RSPEC-5131\" rel=\"nofollow noreferrer\">error</a></p>\n<p>thanks in advance</p>\n<p><strong>Update:-</strong> I resolved it by using the solution in the link and then replacing the unwanted chars</p>\n"},{"tags":["java","regex"],"answers":[{"comments":[{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1429124887,"post_id":29658664,"comment_id":47457062,"body_markdown":"@HorseVoice Possibly post the shared link?","body":"@HorseVoice Possibly post the shared link?"},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":1,"creation_date":1429125002,"post_id":29658664,"comment_id":47457123,"body_markdown":"@HorseVoice but works in Java: http://ideone.com/TblPQ7 and isn&#39;t that what you wanted?","body":"@HorseVoice but works in Java: <a href=\"http://ideone.com/TblPQ7\" rel=\"nofollow noreferrer\">ideone.com/TblPQ7</a> and isn&#39;t that what you wanted?"},{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1429125097,"post_id":29658664,"comment_id":47457193,"body_markdown":"@RohitJain can u plz explain ur answer so I can learn and vote u up plz?","body":"@RohitJain can u plz explain ur answer so I can learn and vote u up plz?"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":1,"creation_date":1429125491,"post_id":29658664,"comment_id":47457441,"body_markdown":"@KickButtowski Which character are you talking about, that needs escaping? `^0` will only match 1 `0`, not more than that.","body":"@KickButtowski Which character are you talking about, that needs escaping? <code>^0</code> will only match 1 <code>0</code>, not more than that."},{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1429125533,"post_id":29658664,"comment_id":47457465,"body_markdown":"@RohitJain      what do u mean by mentioning empty string in ur answer? why didn&#39;t use escape character in ur regex?","body":"@RohitJain      what do u mean by mentioning empty string in ur answer? why didn&#39;t use escape character in ur regex?"},{"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"score":0,"creation_date":1429125630,"post_id":29658664,"comment_id":47457523,"body_markdown":"@KickButtowski Dude, seriously that part doesn&#39;t need more explanation than that. Did you go through the `String` class docs? See how `replaceAll()` method works? I guess you&#39;ll get fair idea after that.","body":"@KickButtowski Dude, seriously that part doesn&#39;t need more explanation than that. Did you go through the <code>String</code> class docs? See how <code>replaceAll()</code> method works? I guess you&#39;ll get fair idea after that."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1429126501,"post_id":29658664,"comment_id":47458105,"body_markdown":"@KickButtowski `(^0)` didn&#39;t work because this regex can match only one `0` placed at start of the string. What OP wants is to match more than one `0` placed at start. This can be done by `*` quantifier which means that element described before it can appear zero or more times. Also which characters do you think should be escaped and why?","body":"@KickButtowski <code>(^0)</code> didn&#39;t work because this regex can match only one <code>0</code> placed at start of the string. What OP wants is to match more than one <code>0</code> placed at start. This can be done by <code>*</code> quantifier which means that element described before it can appear zero or more times. Also which characters do you think should be escaped and why?"},{"owner":{"account_id":5626060,"reputation":7659,"user_id":4454454,"display_name":"MaxZoom"},"score":0,"creation_date":1429129021,"post_id":29658664,"comment_id":47459578,"body_markdown":"The regex should be `^0+` not `^0*` as the second regex will be matched for any string and do empty replacement.","body":"The regex should be <code>^0+</code> not <code>^0*</code> as the second regex will be matched for any string and do empty replacement."},{"owner":{"account_id":16080746,"reputation":4970,"user_id":11606728,"display_name":"Mohsen Alyafei"},"score":0,"creation_date":1590982831,"post_id":29658664,"comment_id":109876273,"body_markdown":"@RohitJain this method fails if the number has a fraction like `000.123` it becomes `.123` it should be `0.123`","body":"@RohitJain this method fails if the number has a fraction like <code>000.123</code> it becomes <code>.123</code> it should be <code>0.123</code>"}],"tags":[],"owner":{"account_id":1853886,"reputation":210617,"user_id":1679863,"accept_rate":77,"display_name":"Rohit Jain"},"comment_count":9,"down_vote_count":1,"up_vote_count":46,"is_accepted":true,"score":45,"last_activity_date":1429161002,"creation_date":1429124646,"answer_id":29658664,"question_id":29658654,"body_markdown":"You&#39;re almost there. You just need quantifier:\r\n\r\n    str = str.replaceAll(&quot;^0+&quot;, &quot;&quot;);\r\n\r\nIt replaces 1 or more occurrences of 0 (that is what `+` quantifier is for. Similarly, we have `*` quantifier, which means 0 or more), at the beginning of the string (that&#39;s given by caret - `^`), with empty string.","title":"regex to strip leading zeros treated as string","body":"<p>You're almost there. You just need quantifier:</p>\n\n<pre><code>str = str.replaceAll(\"^0+\", \"\");\n</code></pre>\n\n<p>It replaces 1 or more occurrences of 0 (that is what <code>+</code> quantifier is for. Similarly, we have <code>*</code> quantifier, which means 0 or more), at the beginning of the string (that's given by caret - <code>^</code>), with empty string.</p>\n"},{"comments":[{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1429125162,"post_id":29658801,"comment_id":47457225,"body_markdown":"so. it ignores the zeros?","body":"so. it ignores the zeros?"},{"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"score":1,"creation_date":1429125215,"post_id":29658801,"comment_id":47457263,"body_markdown":"Yes it does, check linked demo also.","body":"Yes it does, check linked demo also."},{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1429125357,"post_id":29658801,"comment_id":47457345,"body_markdown":"for others answers, do not we need escape charcter \\\\?","body":"for others answers, do not we need escape charcter \\\\?"},{"owner":{"account_id":5626060,"reputation":7659,"user_id":4454454,"display_name":"MaxZoom"},"score":0,"creation_date":1429126610,"post_id":29658801,"comment_id":47458181,"body_markdown":"There is not special character to escape in regex","body":"There is not special character to escape in regex"}],"tags":[],"owner":{"account_id":262968,"reputation":767160,"user_id":548225,"accept_rate":90,"display_name":"anubhava"},"comment_count":4,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1429125110,"creation_date":1429125110,"answer_id":29658801,"question_id":29658654,"body_markdown":"If you know input strings are all containing digits then you can do:\r\n\r\n\tString s = &quot;00000004334300343&quot;;\r\n\tSystem.out.println(Long.valueOf(s));\r\n    // 4334300343\r\n\r\n[Code Demo][1]\r\n\r\nBy converting to `Long` it will automatically strip off all leading zeroes.\r\n\r\n  [1]: http://ideone.com/KwR3aP","title":"regex to strip leading zeros treated as string","body":"<p>If you know input strings are all containing digits then you can do:</p>\n\n<pre><code>String s = \"00000004334300343\";\nSystem.out.println(Long.valueOf(s));\n// 4334300343\n</code></pre>\n\n<p><a href=\"http://ideone.com/KwR3aP\" rel=\"noreferrer\">Code Demo</a></p>\n\n<p>By converting to <code>Long</code> it will automatically strip off all leading zeroes.</p>\n"},{"comments":[{"owner":{"account_id":2399479,"reputation":6729,"user_id":2097529,"accept_rate":76,"display_name":"Kick Buttowski"},"score":0,"creation_date":1429125208,"post_id":29658820,"comment_id":47457256,"body_markdown":"can u explain ur answer plz?","body":"can u explain ur answer plz?"}],"tags":[],"owner":{"account_id":2702906,"reputation":22668,"user_id":2333222,"display_name":"SubOptimal"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1429125464,"creation_date":1429125167,"answer_id":29658820,"question_id":29658654,"body_markdown":"Another solution (might be more intuitive to read)\r\n\r\n    str = str.replaceFirst(&quot;^0+&quot;, &quot;&quot;);\r\n\r\n`^` - match the beginning of a line&lt;br&gt;\r\n0+ - match the zero digit character one or more times\r\n\r\nA exhausting list of pattern you can find here [Pattern](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html).","title":"regex to strip leading zeros treated as string","body":"<p>Another solution (might be more intuitive to read)</p>\n\n<pre><code>str = str.replaceFirst(\"^0+\", \"\");\n</code></pre>\n\n<p><code>^</code> - match the beginning of a line<br>\n0+ - match the zero digit character one or more times</p>\n\n<p>A exhausting list of pattern you can find here <a href=\"http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html\" rel=\"nofollow\">Pattern</a>.</p>\n"},{"tags":[],"owner":{"account_id":5626060,"reputation":7659,"user_id":4454454,"display_name":"MaxZoom"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1429130115,"creation_date":1429125615,"answer_id":29658962,"question_id":29658654,"body_markdown":"The correct regex to strip leading zeros is\r\n\r\n    str = str.replaceAll(&quot;^0+&quot;, &quot;&quot;);\r\n\r\nThis regex will match `0` character in quantity of `one and more` at the string beginning.\r\nThere is not reason to worry about `replaceAll` method, as regex has `^` (begin input) special character that assure the replacement will be invoked only once.\r\n\r\n\r\n**Ultimately**  you can use Java build-in feature to do the same:\r\n\r\n    String str = &quot;00000004334300343&quot;;\r\n    long number = Long.parseLong(str);\r\n    // outputs 4334300343\r\n\r\nThe leading zeros will be stripped for you automatically.","title":"regex to strip leading zeros treated as string","body":"<p>The correct regex to strip leading zeros is</p>\n\n<pre><code>str = str.replaceAll(\"^0+\", \"\");\n</code></pre>\n\n<p>This regex will match <code>0</code> character in quantity of <code>one and more</code> at the string beginning.\nThere is not reason to worry about <code>replaceAll</code> method, as regex has <code>^</code> (begin input) special character that assure the replacement will be invoked only once.</p>\n\n<p><strong>Ultimately</strong>  you can use Java build-in feature to do the same:</p>\n\n<pre><code>String str = \"00000004334300343\";\nlong number = Long.parseLong(str);\n// outputs 4334300343\n</code></pre>\n\n<p>The leading zeros will be stripped for you automatically.</p>\n"},{"tags":[],"owner":{"account_id":4831287,"reputation":11388,"user_id":3899431,"display_name":"Luis Colorado"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1429269892,"creation_date":1429269892,"answer_id":29697874,"question_id":29658654,"body_markdown":"`\\b0+\\B` will do the work.  See [demo][1]  `\\b` anchors your match to a word boundary, it matches a sequence of one or more zeros `0+`, and finishes not in a word boundary (to not eliminate the last `0` in case you have only `00...000`)\r\n\r\n\r\n  [1]: https://regex101.com/r/oP3iB2/1","title":"regex to strip leading zeros treated as string","body":"<p><code>\\b0+\\B</code> will do the work.  See <a href=\"https://regex101.com/r/oP3iB2/1\" rel=\"nofollow\">demo</a>  <code>\\b</code> anchors your match to a word boundary, it matches a sequence of one or more zeros <code>0+</code>, and finishes not in a word boundary (to not eliminate the last <code>0</code> in case you have only <code>00...000</code>)</p>\n"},{"comments":[{"owner":{"account_id":16080746,"reputation":4970,"user_id":11606728,"display_name":"Mohsen Alyafei"},"score":4,"creation_date":1590982282,"post_id":55543290,"comment_id":109876152,"body_markdown":"this method fails with the numbers like `000001230000` it gives the output `1230`","body":"this method fails with the numbers like <code>000001230000</code> it gives the output <code>1230</code>"},{"owner":{"account_id":8517756,"reputation":671,"user_id":6385674,"display_name":"abhishek"},"score":1,"creation_date":1624868917,"post_id":55543290,"comment_id":120465075,"body_markdown":"The answer has been updated to reflect the correct regex. It was missing the &quot;^&quot; symbol from the replaceAll formula, but the Author has it in the description/explanation of the formula. I assume it was a miss/typo. Thanks, Mohsen for pointing it out.","body":"The answer has been updated to reflect the correct regex. It was missing the &quot;^&quot; symbol from the replaceAll formula, but the Author has it in the description/explanation of the formula. I assume it was a miss/typo. Thanks, Mohsen for pointing it out."},{"owner":{"account_id":14712563,"reputation":839,"user_id":10625502,"display_name":"Sander Roest"},"score":0,"creation_date":1628769234,"post_id":55543290,"comment_id":121513106,"body_markdown":"When using strong-mode, you might want to use this:\n\nstr = str.replaceAll(RegExp(&quot;^0+(?!$)&quot;), &quot;&quot;);","body":"When using strong-mode, you might want to use this:  str = str.replaceAll(RegExp(&quot;^0+(?!$)&quot;), &quot;&quot;);"}],"tags":[],"owner":{"account_id":6990933,"reputation":1282,"user_id":5360247,"display_name":"Artur  Dumchev"},"comment_count":3,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1624895259,"creation_date":1554498039,"answer_id":55543290,"question_id":29658654,"body_markdown":"Accepted solution will fail if you need to get &quot;0&quot; from &quot;00&quot;. This is the right one:\r\n\r\n    str = str.replaceAll(&quot;^0+(?!$)&quot;, &quot;&quot;);\r\n\r\n`^0+(?!$)` means match one or more zeros if it is not followed by end of string.\r\n\r\nThank you to the commenter - I have updated the formula to match the description from the author.","title":"regex to strip leading zeros treated as string","body":"<p>Accepted solution will fail if you need to get &quot;0&quot; from &quot;00&quot;. This is the right one:</p>\n<pre><code>str = str.replaceAll(&quot;^0+(?!$)&quot;, &quot;&quot;);\n</code></pre>\n<p><code>^0+(?!$)</code> means match one or more zeros if it is not followed by end of string.</p>\n<p>Thank you to the commenter - I have updated the formula to match the description from the author.</p>\n"},{"tags":[],"owner":{"account_id":8188537,"reputation":21,"user_id":6585433,"display_name":"Kruglord"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1643054656,"creation_date":1643054656,"answer_id":70839819,"question_id":29658654,"body_markdown":"I know this is an old question, but I think the best way to do this is actually \r\n```\r\nstr = str.replaceAll(&quot;(^0+)?(\\d+)&quot;, &quot;$2&quot;)\r\n```\r\nThe reason I suggest this is because it splits the string into two groups. The second group is _at least_ one digit. The first group matches 1 or more zeros at the start of the line. However, the first group is optional, meaning that if there are no leading zeros, you just get all of the digits. And, if `str` is _only_ a zero, you get exactly one zero (because the second group must match at least one digit). \r\n\r\nSo if it&#39;s any number of 0s, you get back exactly one zero. If it starts with any number of 0s followed by any other digit, you get no leading zeros. If it starts with any other digit, you get back exactly what you had in the first place. ","title":"regex to strip leading zeros treated as string","body":"<p>I know this is an old question, but I think the best way to do this is actually</p>\n<pre><code>str = str.replaceAll(&quot;(^0+)?(\\d+)&quot;, &quot;$2&quot;)\n</code></pre>\n<p>The reason I suggest this is because it splits the string into two groups. The second group is <em>at least</em> one digit. The first group matches 1 or more zeros at the start of the line. However, the first group is optional, meaning that if there are no leading zeros, you just get all of the digits. And, if <code>str</code> is <em>only</em> a zero, you get exactly one zero (because the second group must match at least one digit).</p>\n<p>So if it's any number of 0s, you get back exactly one zero. If it starts with any number of 0s followed by any other digit, you get no leading zeros. If it starts with any other digit, you get back exactly what you had in the first place.</p>\n"},{"tags":[],"owner":{"account_id":9778353,"reputation":9,"user_id":7247430,"display_name":"Pravin Chukkala"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1677277262,"creation_date":1676986395,"answer_id":75521234,"question_id":29658654,"body_markdown":"Here is the simple and proper solution.\r\n\r\n    str = str.replaceAll(/^0+/g, &quot;&quot;);\r\n\r\nGlobal Flag `g` is required when using `replaceAll` with regex.","title":"regex to strip leading zeros treated as string","body":"<p>Here is the simple and proper solution.</p>\n<pre><code>str = str.replaceAll(/^0+/g, &quot;&quot;);\n</code></pre>\n<p>Global Flag <code>g</code> is required when using <code>replaceAll</code> with regex.</p>\n"},{"tags":[],"owner":{"account_id":29099657,"reputation":11,"user_id":22291747,"display_name":"patrick udochukwu"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1690800790,"creation_date":1690426036,"answer_id":76776193,"question_id":29658654,"body_markdown":"```\r\nString str = &quot;0600974&quot;;\r\nstr = str.replaceAll(&quot;\\\\b0+(\\\\d+)\\\\b&quot;, &quot;$1&quot;);\r\n```\r\nThis is a better match, Code is in java, to use in other languages you can replace double slash with one ```e.g &quot;\\\\b&quot; will be &quot;\\b&quot; and &quot;\\\\d&quot; will be &quot;\\d&quot;```","title":"regex to strip leading zeros treated as string","body":"<pre><code>String str = &quot;0600974&quot;;\nstr = str.replaceAll(&quot;\\\\b0+(\\\\d+)\\\\b&quot;, &quot;$1&quot;);\n</code></pre>\n<p>This is a better match, Code is in java, to use in other languages you can replace double slash with one <code>e.g &quot;\\\\b&quot; will be &quot;\\b&quot; and &quot;\\\\d&quot; will be &quot;\\d&quot;</code></p>\n"},{"tags":[],"owner":{"account_id":6990487,"reputation":9,"user_id":5359938,"display_name":"Dan M"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691199181,"creation_date":1691170614,"answer_id":76838095,"question_id":29658654,"body_markdown":"In `Azure Synapse`, the expression would be this:\r\n\r\n    regexReplace(ColumnName, &quot;^0+&quot;, &quot;&quot;)\r\n    \r\n    000000502842 will equal 502842","title":"regex to strip leading zeros treated as string","body":"<p>In <code>Azure Synapse</code>, the expression would be this:</p>\n<pre><code>regexReplace(ColumnName, &quot;^0+&quot;, &quot;&quot;)\n\n000000502842 will equal 502842\n</code></pre>\n"}],"owner":{"account_id":1553656,"reputation":8158,"user_id":1445444,"accept_rate":81,"display_name":"Horse Voice"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":64356,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"accepted_answer_id":29658664,"answer_count":10,"score":25,"last_activity_date":1691199181,"creation_date":1429124600,"question_id":29658654,"body_markdown":"I have numbers like this that need leading zero&#39;s removed.\r\n\r\nHere is what I need: \r\n\r\n`00000004334300343` -&gt; `4334300343`\r\n\r\n`0003030435243` -&gt; `3030435243`\r\n\r\nI can&#39;t figure this out as I&#39;m new to regular expressions. This does not work:\r\n\r\n    (^0)\r\n\r\n\r\n","title":"regex to strip leading zeros treated as string","body":"<p>I have numbers like this that need leading zero's removed.</p>\n\n<p>Here is what I need: </p>\n\n<p><code>00000004334300343</code> -> <code>4334300343</code></p>\n\n<p><code>0003030435243</code> -> <code>3030435243</code></p>\n\n<p>I can't figure this out as I'm new to regular expressions. This does not work:</p>\n\n<pre><code>(^0)\n</code></pre>\n"},{"tags":["java","apache-spark","mapreduce"],"answers":[{"tags":[],"owner":{"account_id":6928399,"reputation":2408,"user_id":5318711,"display_name":"Joe Widen"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1466371855,"creation_date":1466371855,"answer_id":37912033,"question_id":37909444,"body_markdown":"When your for loop grows really large, Spark can no longer keep track of the lineage.  Enable checkpointing in your for loop to checkpoint your rdd every 10 iterations or so.  Checkpointing will fix the problem.  Don&#39;t forget to clean up the checkpoint directory after.\r\n\r\nhttp://spark.apache.org/docs/latest/streaming-programming-guide.html#checkpointing","title":"Spark java.lang.StackOverflowError","body":"<p>When your for loop grows really large, Spark can no longer keep track of the lineage.  Enable checkpointing in your for loop to checkpoint your rdd every 10 iterations or so.  Checkpointing will fix the problem.  Don't forget to clean up the checkpoint directory after.</p>\n\n<p><a href=\"http://spark.apache.org/docs/latest/streaming-programming-guide.html#checkpointing\" rel=\"nofollow\">http://spark.apache.org/docs/latest/streaming-programming-guide.html#checkpointing</a></p>\n"},{"tags":[],"owner":{"account_id":6794531,"reputation":153,"user_id":5230384,"display_name":"DILIP KUMAR"},"comment_count":0,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1487989777,"creation_date":1487989777,"answer_id":42451307,"question_id":37909444,"body_markdown":"This problem will occur when your DAG grows big and too many level of transformations happening in your code. The JVM will not be able to hold the operations to perform lazy execution when an action is performed in the end.\n\nCheckpointing is one option. I would suggest to implement spark-sql for this kind of aggregations. If your data is structured, try to load that into dataframes and perform grouping and other mysql functions to achieve this.","title":"Spark java.lang.StackOverflowError","body":"<p>This problem will occur when your DAG grows big and too many level of transformations happening in your code. The JVM will not be able to hold the operations to perform lazy execution when an action is performed in the end.</p>\n\n<p>Checkpointing is one option. I would suggest to implement spark-sql for this kind of aggregations. If your data is structured, try to load that into dataframes and perform grouping and other mysql functions to achieve this.</p>\n"},{"tags":[],"owner":{"account_id":6258141,"reputation":2735,"user_id":5718301,"accept_rate":60,"display_name":"Chitral Verma"},"comment_count":0,"down_vote_count":0,"up_vote_count":8,"is_accepted":false,"score":8,"last_activity_date":1498130116,"creation_date":1498120317,"answer_id":44694193,"question_id":37909444,"body_markdown":"I have multiple suggestions which will help you to greatly improve the performance of the code in your question.\r\n\r\n 1. **Caching:** Caching should be used on those data sets which you need to refer to again and again for same/ different operations (iterative algorithms.\r\n\r\n&gt; An example is RDD.`count` â to tell you the number of lines in the\r\n&gt; file, the file needs to be read. So if you write RDD.`count`, at\r\n&gt; this point the file will be read, the lines will be counted, and the\r\n&gt; count will be returned. \r\n&gt; \r\n&gt; What if you call RDD.`count` again? The same thing: the file will be\r\n&gt; read and counted again. So what does RDD.`cache` do? Now, if you run\r\n&gt; RDD.`count` the first time, the file will be loaded, cached, and\r\n&gt; counted. If you call RDD.`count` a second time, the operation will use\r\n&gt; the cache. It will just take the data from the cache and count the\r\n&gt; lines, no recomputing.\r\n\r\nRead more about caching [here][1].\r\n\r\nIn your code sample you are not reusing anything that you&#39;ve cached. So you may  remove the `.cache` from there.\r\n\r\n 2. **Parallelization:** In the code sample, you&#39;ve parallelized every  individual element in your RDD which is already a distributed collection. I suggest you to merge the `rddFileData`, `rddMovieData` and `rddPairReviewData` steps so that it happens in one go. \r\n\r\nGet rid of `.collect` since that brings the results back to the driver and maybe the actual reason for your error.\r\n\r\n  [1]: https://stackoverflow.com/questions/28981359/why-do-we-need-to-call-cache-or-persist-on-a-rdd","title":"Spark java.lang.StackOverflowError","body":"<p>I have multiple suggestions which will help you to greatly improve the performance of the code in your question.</p>\n\n<ol>\n<li><strong>Caching:</strong> Caching should be used on those data sets which you need to refer to again and again for same/ different operations (iterative algorithms.</li>\n</ol>\n\n<blockquote>\n  <p>An example is RDD.<code>count</code> â to tell you the number of lines in the\n  file, the file needs to be read. So if you write RDD.<code>count</code>, at\n  this point the file will be read, the lines will be counted, and the\n  count will be returned. </p>\n  \n  <p>What if you call RDD.<code>count</code> again? The same thing: the file will be\n  read and counted again. So what does RDD.<code>cache</code> do? Now, if you run\n  RDD.<code>count</code> the first time, the file will be loaded, cached, and\n  counted. If you call RDD.<code>count</code> a second time, the operation will use\n  the cache. It will just take the data from the cache and count the\n  lines, no recomputing.</p>\n</blockquote>\n\n<p>Read more about caching <a href=\"https://stackoverflow.com/questions/28981359/why-do-we-need-to-call-cache-or-persist-on-a-rdd\">here</a>.</p>\n\n<p>In your code sample you are not reusing anything that you've cached. So you may  remove the <code>.cache</code> from there.</p>\n\n<ol start=\"2\">\n<li><strong>Parallelization:</strong> In the code sample, you've parallelized every  individual element in your RDD which is already a distributed collection. I suggest you to merge the <code>rddFileData</code>, <code>rddMovieData</code> and <code>rddPairReviewData</code> steps so that it happens in one go. </li>\n</ol>\n\n<p>Get rid of <code>.collect</code> since that brings the results back to the driver and maybe the actual reason for your error.</p>\n"},{"tags":[],"owner":{"account_id":54651,"reputation":825,"user_id":163585,"display_name":"spats"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1626077376,"creation_date":1626077376,"answer_id":68343986,"question_id":37909444,"body_markdown":"Below things fixed stackoverflow error, as others pointed it&#39;s because of lineage that spark keeps building, specially when you have loop/iteration in code.\r\n\r\nSet checkpoint directory\r\n\r\n    spark.sparkContext.setCheckpointDir(&quot;./checkpoint&quot;)\r\n\r\ncheckpoint dataframe/Rdd you are modifying/operating in iteration\r\n\r\n    modifyingDf.checkpoint()\r\n\r\nCache Dataframe which are reused in each iteration\r\n\r\n    reusedDf.cache()","title":"Spark java.lang.StackOverflowError","body":"<p>Below things fixed stackoverflow error, as others pointed it's because of lineage that spark keeps building, specially when you have loop/iteration in code.</p>\n<p>Set checkpoint directory</p>\n<pre><code>spark.sparkContext.setCheckpointDir(&quot;./checkpoint&quot;)\n</code></pre>\n<p>checkpoint dataframe/Rdd you are modifying/operating in iteration</p>\n<pre><code>modifyingDf.checkpoint()\n</code></pre>\n<p>Cache Dataframe which are reused in each iteration</p>\n<pre><code>reusedDf.cache()\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11335873,"reputation":1,"user_id":8311750,"display_name":"Roberto"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691198853,"creation_date":1691180062,"answer_id":76838892,"question_id":37909444,"body_markdown":"Add this config:\r\n\r\n    --conf &quot;spark.executor.extraJavaOptions=-Xss512m&quot;\r\n    --conf &quot;spark.driver.extraJavaOptions=-Xss512m&quot;","title":"Spark java.lang.StackOverflowError","body":"<p>Add this config:</p>\n<pre><code>--conf &quot;spark.executor.extraJavaOptions=-Xss512m&quot;\n--conf &quot;spark.driver.extraJavaOptions=-Xss512m&quot;\n</code></pre>\n"}],"owner":{"account_id":8653597,"reputation":131,"user_id":6478546,"display_name":"Khal Mei"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":35428,"favorite_count":0,"down_vote_count":0,"up_vote_count":12,"answer_count":5,"score":12,"last_activity_date":1691198853,"creation_date":1466353933,"question_id":37909444,"body_markdown":"I&#39;m using spark in order to calculate the pagerank of user reviews, but I keep getting Spark `java.lang.StackOverflowError` when I run my code on a big dataset (40k entries). when running the code on a small number of entries it works fine though.\r\n\r\n\r\nEntry Example :\r\n\r\n    product/productId: B00004CK40\treview/userId: A39IIHQF18YGZA\treview/profileName: C. A. M. Salas\treview/helpfulness: 0/0\treview/score: 4.0\treview/time: 1175817600\treview/summary: Reliable comedy\treview/text: Nice script, well acted comedy, and a young Nicolette Sheridan. Cusak is in top form.\r\n\r\n\r\nThe Code:\r\n\r\n    public void calculatePageRank() {\r\n        sc.clearCallSite();\r\n        sc.clearJobGroup();\r\n\r\n        JavaRDD &lt; String &gt; rddFileData = sc.textFile(inputFileName).cache();\r\n        sc.setCheckpointDir(&quot;pagerankCheckpoint/&quot;);\r\n        \r\n        JavaRDD &lt; String &gt; rddMovieData = rddFileData.map(new Function &lt; String, String &gt; () {\r\n\r\n            @Override\r\n            public String call(String arg0) throws Exception {\r\n                String[] data = arg0.split(&quot;\\t&quot;);\r\n                String movieId = data[0].split(&quot;:&quot;)[1].trim();\r\n                String userId = data[1].split(&quot;:&quot;)[1].trim();\r\n                return movieId + &quot;\\t&quot; + userId;\r\n            }\r\n        });\r\n\r\n        JavaPairRDD&lt;String, Iterable&lt;String&gt;&gt; rddPairReviewData = rddMovieData.mapToPair(new PairFunction &lt; String, String, String &gt; () {\r\n\r\n            @Override\r\n            public Tuple2 &lt; String, String &gt; call(String arg0) throws Exception {\r\n                String[] data = arg0.split(&quot;\\t&quot;);\r\n                return new Tuple2 &lt; String, String &gt; (data[0], data[1]);\r\n            }\r\n        }).groupByKey().cache();\r\n        \r\n        \r\n        JavaRDD&lt;Iterable&lt;String&gt;&gt; cartUsers = rddPairReviewData.map(f -&gt; f._2());\r\n    \t  List&lt;Iterable&lt;String&gt;&gt; cartUsersList = cartUsers.collect();\r\n    \t  JavaPairRDD&lt;String,String&gt; finalCartesian = null;\r\n    \t  int iterCounter = 0;\r\n    \t  for(Iterable&lt;String&gt; out : cartUsersList){\r\n    \t\t  JavaRDD&lt;String&gt; currentUsersRDD = sc.parallelize(Lists.newArrayList(out));\r\n    \t\t  if(finalCartesian==null){\r\n    \t\t\t  finalCartesian = currentUsersRDD.cartesian(currentUsersRDD);\r\n    \t\t  }\r\n    \t\t  else{\r\n    \t\t\t  finalCartesian = currentUsersRDD.cartesian(currentUsersRDD).union(finalCartesian);\r\n    \t\t\t  if(iterCounter % 20 == 0) {\r\n    \t\t\t\t  finalCartesian.checkpoint();\r\n    \t\t\t  }\r\n    \t\t  }\r\n    \t  }\r\n    \t  JavaRDD&lt;Tuple2&lt;String,String&gt;&gt; finalCartesianToTuple = finalCartesian.map(m -&gt; new Tuple2&lt;String,String&gt;(m._1(),m._2()));\r\n        \r\n    \t  finalCartesianToTuple = finalCartesianToTuple.filter(x -&gt; x._1().compareTo(x._2())!=0);\r\n    \t  JavaPairRDD&lt;String, String&gt; userIdPairs = finalCartesianToTuple.mapToPair(m -&gt; new Tuple2&lt;String,String&gt;(m._1(),m._2()));\r\n\r\n    \t  JavaRDD&lt;String&gt; userIdPairsString = userIdPairs.map(new Function &lt; Tuple2&lt;String, String&gt;, String &gt; () {\r\n\r\n          \t//Tuple2&lt;Tuple2&lt;MovieId, userId&gt;, Tuple2&lt;movieId, userId&gt;&gt;\r\n              @Override\r\n              public String call (Tuple2&lt;String, String&gt; t) throws Exception {\r\n              \treturn t._1 + &quot; &quot; + t._2;\r\n              }\r\n          });\r\n\r\n        try {\r\n    \r\n    //calculate pagerank using this https://github.com/apache/spark/blob/master/examples/src/main/java/org/apache/spark/examples/JavaPageRank.java\r\n\t\t\tJavaPageRank.calculatePageRank(userIdPairsString, 100);\r\n\t\t} catch (Exception e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n        \r\n        sc.close();\r\n        \r\n    }","title":"Spark java.lang.StackOverflowError","body":"<p>I'm using spark in order to calculate the pagerank of user reviews, but I keep getting Spark <code>java.lang.StackOverflowError</code> when I run my code on a big dataset (40k entries). when running the code on a small number of entries it works fine though.</p>\n\n<p>Entry Example :</p>\n\n<pre><code>product/productId: B00004CK40   review/userId: A39IIHQF18YGZA   review/profileName: C. A. M. Salas  review/helpfulness: 0/0 review/score: 4.0   review/time: 1175817600 review/summary: Reliable comedy review/text: Nice script, well acted comedy, and a young Nicolette Sheridan. Cusak is in top form.\n</code></pre>\n\n<p>The Code:</p>\n\n<pre><code>public void calculatePageRank() {\n    sc.clearCallSite();\n    sc.clearJobGroup();\n\n    JavaRDD &lt; String &gt; rddFileData = sc.textFile(inputFileName).cache();\n    sc.setCheckpointDir(\"pagerankCheckpoint/\");\n\n    JavaRDD &lt; String &gt; rddMovieData = rddFileData.map(new Function &lt; String, String &gt; () {\n\n        @Override\n        public String call(String arg0) throws Exception {\n            String[] data = arg0.split(\"\\t\");\n            String movieId = data[0].split(\":\")[1].trim();\n            String userId = data[1].split(\":\")[1].trim();\n            return movieId + \"\\t\" + userId;\n        }\n    });\n\n    JavaPairRDD&lt;String, Iterable&lt;String&gt;&gt; rddPairReviewData = rddMovieData.mapToPair(new PairFunction &lt; String, String, String &gt; () {\n\n        @Override\n        public Tuple2 &lt; String, String &gt; call(String arg0) throws Exception {\n            String[] data = arg0.split(\"\\t\");\n            return new Tuple2 &lt; String, String &gt; (data[0], data[1]);\n        }\n    }).groupByKey().cache();\n\n\n    JavaRDD&lt;Iterable&lt;String&gt;&gt; cartUsers = rddPairReviewData.map(f -&gt; f._2());\n      List&lt;Iterable&lt;String&gt;&gt; cartUsersList = cartUsers.collect();\n      JavaPairRDD&lt;String,String&gt; finalCartesian = null;\n      int iterCounter = 0;\n      for(Iterable&lt;String&gt; out : cartUsersList){\n          JavaRDD&lt;String&gt; currentUsersRDD = sc.parallelize(Lists.newArrayList(out));\n          if(finalCartesian==null){\n              finalCartesian = currentUsersRDD.cartesian(currentUsersRDD);\n          }\n          else{\n              finalCartesian = currentUsersRDD.cartesian(currentUsersRDD).union(finalCartesian);\n              if(iterCounter % 20 == 0) {\n                  finalCartesian.checkpoint();\n              }\n          }\n      }\n      JavaRDD&lt;Tuple2&lt;String,String&gt;&gt; finalCartesianToTuple = finalCartesian.map(m -&gt; new Tuple2&lt;String,String&gt;(m._1(),m._2()));\n\n      finalCartesianToTuple = finalCartesianToTuple.filter(x -&gt; x._1().compareTo(x._2())!=0);\n      JavaPairRDD&lt;String, String&gt; userIdPairs = finalCartesianToTuple.mapToPair(m -&gt; new Tuple2&lt;String,String&gt;(m._1(),m._2()));\n\n      JavaRDD&lt;String&gt; userIdPairsString = userIdPairs.map(new Function &lt; Tuple2&lt;String, String&gt;, String &gt; () {\n\n        //Tuple2&lt;Tuple2&lt;MovieId, userId&gt;, Tuple2&lt;movieId, userId&gt;&gt;\n          @Override\n          public String call (Tuple2&lt;String, String&gt; t) throws Exception {\n            return t._1 + \" \" + t._2;\n          }\n      });\n\n    try {\n\n//calculate pagerank using this https://github.com/apache/spark/blob/master/examples/src/main/java/org/apache/spark/examples/JavaPageRank.java\n        JavaPageRank.calculatePageRank(userIdPairsString, 100);\n    } catch (Exception e) {\n        // TODO Auto-generated catch block\n        e.printStackTrace();\n    }\n\n    sc.close();\n\n}\n</code></pre>\n"},{"tags":["java","spring","amazon-web-services","spring-boot","amazon-sqs"],"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":2,"creation_date":1691193591,"post_id":76839454,"comment_id":135463817,"body_markdown":"long-polling (20s) is used when you want to constantly poll and get results as fast as possible. You could in theory poll with 0 delay every 0.1s but that creates way too many requests. So instead you start a request that waits for at most 20s and if there&#39;s nothing you&#39;ll get nothing after 20s and if there&#39;s something you&#39;ll get a result before the 20s are up. Then you do the next request immediately (infinite loop w/o delay). If you need to check the queue only every hour you wouldn&#39;t need a delay, you can simply check what&#39;s there but that&#39;s only useful if you check &gt; 20s (with @Scheduled)","body":"long-polling (20s) is used when you want to constantly poll and get results as fast as possible. You could in theory poll with 0 delay every 0.1s but that creates way too many requests. So instead you start a request that waits for at most 20s and if there&#39;s nothing you&#39;ll get nothing after 20s and if there&#39;s something you&#39;ll get a result before the 20s are up. Then you do the next request immediately (infinite loop w/o delay). If you need to check the queue only every hour you wouldn&#39;t need a delay, you can simply check what&#39;s there but that&#39;s only useful if you check &gt; 20s (with @Scheduled)"}],"answers":[{"tags":[],"owner":{"account_id":58377,"reputation":247920,"user_id":174777,"display_name":"John Rotenstein"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1691194315,"creation_date":1691194315,"answer_id":76839675,"question_id":76839454,"body_markdown":"If your requirement is to check for messages every hour, then `waitTimeSeconds()` is **not relevant for you**.\r\n\r\nIt is normally used in high-volume situations where messages are continuously wanted. For this, a &#39;consumer&#39; is written that keeps polling the queue. To minimise the number of calls, a Wait Time of up to 20 seconds can be specified.\r\n\r\nBy specifying a Wait Time it is saying: _&quot;If there are no messages in the queue, wait 20 seconds before providing a response to this API call. However, please return immediately if a message becomes available.&quot;_\r\n\r\nThe use-case would be for a system that wants to respond very quickly when a message enters the queue.","title":"AWS SQS polling","body":"<p>If your requirement is to check for messages every hour, then <code>waitTimeSeconds()</code> is <strong>not relevant for you</strong>.</p>\n<p>It is normally used in high-volume situations where messages are continuously wanted. For this, a 'consumer' is written that keeps polling the queue. To minimise the number of calls, a Wait Time of up to 20 seconds can be specified.</p>\n<p>By specifying a Wait Time it is saying: <em>&quot;If there are no messages in the queue, wait 20 seconds before providing a response to this API call. However, please return immediately if a message becomes available.&quot;</em></p>\n<p>The use-case would be for a system that wants to respond very quickly when a message enters the queue.</p>\n"},{"comments":[{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1691200022,"post_id":76839783,"comment_id":135464095,"body_markdown":"`waitTimeSeconds` is not a fixed delay, it&#39;s an upper limit. Long polling returns as soon as there is a message. But it has the benefit of stalling the response up to 20s if there is nothing to return, i.e. you get at most 3 empty  responses per minute. With short polling you&#39;ll have to wait inbetween polls which effectively reduces the throughput in most cases so it&#39;s rarely useful. (https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html#sqs-long-polling)","body":"<code>waitTimeSeconds</code> is not a fixed delay, it&#39;s an upper limit. Long polling returns as soon as there is a message. But it has the benefit of stalling the response up to 20s if there is nothing to return, i.e. you get at most 3 empty  responses per minute. With short polling you&#39;ll have to wait inbetween polls which effectively reduces the throughput in most cases so it&#39;s rarely useful. (<a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html#sqs-long-polling\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AWSSimpleQueueService/latest/&hellip;</a>)"},{"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"score":0,"creation_date":1691201264,"post_id":76839783,"comment_id":135464151,"body_markdown":"I believe the propper definition is that `waitTimeSeconds`, is the maximum wait time when shot polling, but the minimum time when long polling. \nIf you message rate is greater then 1 message/(roundtrip-time), then long polling could may yield higher throughput, as you will be receiving more then 1 message per API call.\nhttps://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html","body":"I believe the propper definition is that <code>waitTimeSeconds</code>, is the maximum wait time when shot polling, but the minimum time when long polling.  If you message rate is greater then 1 message/(roundtrip-time), then long polling could may yield higher throughput, as you will be receiving more then 1 message per API call. <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AWSSimpleQueueService/latest/&hellip;</a>"},{"owner":{"account_id":974021,"reputation":63348,"user_id":995891,"accept_rate":83,"display_name":"zapl"},"score":0,"creation_date":1691202679,"post_id":76839783,"comment_id":135464199,"body_markdown":"short polling is when you set `waitTimeSeconds` to 0. You&#39;ll get an immediate response with a chance to miss messages that have already been queued but the response is quick. Can be useful in a large cluster that effectively polls at a high rate but rarely individually. Anything above 0 is considered long polling (though anything but 20 is rare since lower values have mostly downsides). You&#39;ll get 1 to MaxNumberOfMessages (1 to 10. Default: 1) as soon as there&#39;s a message. More than 1 only happens if you don&#39;t keep up and your producer is outpacing you. SQS is never waiting to gather messages","body":"short polling is when you set <code>waitTimeSeconds</code> to 0. You&#39;ll get an immediate response with a chance to miss messages that have already been queued but the response is quick. Can be useful in a large cluster that effectively polls at a high rate but rarely individually. Anything above 0 is considered long polling (though anything but 20 is rare since lower values have mostly downsides). You&#39;ll get 1 to MaxNumberOfMessages (1 to 10. Default: 1) as soon as there&#39;s a message. More than 1 only happens if you don&#39;t keep up and your producer is outpacing you. SQS is never waiting to gather messages"}],"tags":[],"owner":{"account_id":2701145,"reputation":4860,"user_id":2433323,"display_name":"Klaus Groenbaek"},"comment_count":3,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691198121,"creation_date":1691198121,"answer_id":76839783,"question_id":76839454,"body_markdown":"Short polling, is used when &#39;the client&#39; wants to get/process every message as fast as possible (low latency). \r\nLong polling is used when AWS wait for X seconds, before the poll request returns data. This is rarely used, as it required a timeout to occur before the messages are processed. Theoretically, this may yield higher throughput, but only in scenarios where the queue is fully loaded, which is quite rare.   ","title":"AWS SQS polling","body":"<p>Short polling, is used when 'the client' wants to get/process every message as fast as possible (low latency).\nLong polling is used when AWS wait for X seconds, before the poll request returns data. This is rarely used, as it required a timeout to occur before the messages are processed. Theoretically, this may yield higher throughput, but only in scenarios where the queue is fully loaded, which is quite rare.</p>\n"}],"owner":{"account_id":14183682,"reputation":345,"user_id":10246394,"display_name":"Imu Sama"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":261,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":76839675,"answer_count":2,"score":0,"last_activity_date":1691198121,"creation_date":1691188996,"question_id":76839454,"body_markdown":"I don&#39;t understand the need to configure short and long polling directly on the queue.\r\nSay I create an sqs queue and I want to check the queue for messages once every hour with java.\r\nThen I just need to create a method annotated with @Scheduled(fixedRate = 3600000) and in the method I call sqsClient.receiveMessage and that&#39;s it.\r\nIf I want short polling then I can just reduce the fixedRate to call my method every 5 seconds for example.\r\n\r\nI already read:\r\n\r\n&gt; waitTimeSeconds(): The duration (in seconds) for which the call waits\r\n&gt; for a message to arrive in the queue before returning.\r\n&gt; \r\n&gt; When passing a value for waitTimeSeconds (maximum of 20 seconds), the\r\n&gt; call will block while there are no messages available in the queue.\r\n&gt; However, if there is a message (or a message comes during that time\r\n&gt; period), it will immediately return with messages.\r\n\r\nWhat is it, another polling configuration within my polling configuration with @Scheduled ? I don&#39;t get it. Also the max value is 20 seconds and I really don&#39;t need to check my queue that frequently.\r\nSo do I just set Receive message wait time to 1 so I get the specificities of long polling (check all servers for messages) and ignore its existence because I don&#39;t need it ?\r\nWhat is the usecase of it ?\r\n","title":"AWS SQS polling","body":"<p>I don't understand the need to configure short and long polling directly on the queue.\nSay I create an sqs queue and I want to check the queue for messages once every hour with java.\nThen I just need to create a method annotated with @Scheduled(fixedRate = 3600000) and in the method I call sqsClient.receiveMessage and that's it.\nIf I want short polling then I can just reduce the fixedRate to call my method every 5 seconds for example.</p>\n<p>I already read:</p>\n<blockquote>\n<p>waitTimeSeconds(): The duration (in seconds) for which the call waits\nfor a message to arrive in the queue before returning.</p>\n<p>When passing a value for waitTimeSeconds (maximum of 20 seconds), the\ncall will block while there are no messages available in the queue.\nHowever, if there is a message (or a message comes during that time\nperiod), it will immediately return with messages.</p>\n</blockquote>\n<p>What is it, another polling configuration within my polling configuration with @Scheduled ? I don't get it. Also the max value is 20 seconds and I really don't need to check my queue that frequently.\nSo do I just set Receive message wait time to 1 so I get the specificities of long polling (check all servers for messages) and ignore its existence because I don't need it ?\nWhat is the usecase of it ?</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"account_id":1246269,"reputation":3386,"user_id":1207655,"accept_rate":83,"display_name":"Martin Wilson"},"score":10,"creation_date":1354134639,"post_id":13613754,"comment_id":18666588,"body_markdown":"If you put null then it removes the key: http://www.json.org/javadoc/org/json/JSONObject.html#put(java.lang.String,%20java.lang.Object)","body":"If you put null then it removes the key: <a href=\"http://www.json.org/javadoc/org/json/JSONObject.html#put(java.lang.String,%20java.lang.Object)\" rel=\"nofollow noreferrer\">json.org/javadoc/org/json/&hellip;</a>"}],"answers":[{"comments":[{"owner":{"account_id":2602712,"reputation":1273,"user_id":4776486,"accept_rate":40,"display_name":"voipp"},"score":0,"creation_date":1476957123,"post_id":13613803,"comment_id":67571121,"body_markdown":"could you provide example why it would violate the contract?","body":"could you provide example why it would violate the contract?"},{"owner":{"account_id":49486,"reputation":403,"user_id":147346,"display_name":"Andres F."},"score":0,"creation_date":1479394952,"post_id":13613803,"comment_id":68547576,"body_markdown":"@voipp It violates the rule (from `Object.equals`): *&quot;For any non-null reference value `x`, `x.equals(null)` should return false&quot;*.","body":"@voipp It violates the rule (from <code>Object.equals</code>): <i>&quot;For any non-null reference value <code>x</code>, <code>x.equals(null)</code> should return false&quot;</i>."},{"owner":{"account_id":6609714,"reputation":4086,"user_id":5105305,"accept_rate":58,"display_name":"Kasun Siyambalapitiya"},"score":0,"creation_date":1484895554,"post_id":13613803,"comment_id":70707340,"body_markdown":"@rekire how to use this in `org.json.simple.*`","body":"@rekire how to use this in <code>org.json.simple.*</code>"}],"tags":[],"owner":{"account_id":974068,"reputation":47448,"user_id":995926,"accept_rate":90,"display_name":"rekire"},"comment_count":3,"down_vote_count":0,"up_vote_count":176,"is_accepted":true,"score":176,"last_activity_date":1354134436,"creation_date":1354134436,"answer_id":13613803,"question_id":13613754,"body_markdown":"Try to set [`JSONObject.NULL`][1] instead of `null`:\n\n&gt; A sentinel value used to explicitly define a name with no value. Unlike null, names with this value:  \n&gt;  \n&gt; *   show up in the names() array  \n&gt; *   show up in the keys() iterator  \n&gt; *   return true for has(String)  \n&gt; *   do not throw on get(String)  \n&gt; *   are included in the encoded JSON string. \n&gt;\n&gt;This value violates the general contract of equals(Object) by returning true when compared to null. Its toString() method returns &quot;null&quot;.\n\n\n  [1]: http://developer.android.com/reference/org/json/JSONObject.html#NULL","title":"How do you set a value to null with org.json.JSONObject in java?","body":"<p>Try to set <a href=\"http://developer.android.com/reference/org/json/JSONObject.html#NULL\" rel=\"noreferrer\"><code>JSONObject.NULL</code></a> instead of <code>null</code>:</p>\n<blockquote>\n<p>A sentinel value used to explicitly define a name with no value. Unlike null, names with this value:</p>\n<ul>\n<li>show up in the names() array</li>\n<li>show up in the keys() iterator</li>\n<li>return true for has(String)</li>\n<li>do not throw on get(String)</li>\n<li>are included in the encoded JSON string.</li>\n</ul>\n<p>This value violates the general contract of equals(Object) by returning true when compared to null. Its toString() method returns &quot;null&quot;.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":246417,"reputation":17570,"user_id":520567,"accept_rate":71,"display_name":"akostadinov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1529600314,"creation_date":1529600314,"answer_id":50973927,"question_id":13613754,"body_markdown":"For me with [net.sf.json.JSONObject][1] I need to create a null `JSON` by\r\n\r\n    new JSONObject(true)\r\n\r\nThis is how I get class into groovy:\r\n\r\n    groovy.grape.Grape.grab(group: &quot;org.kohsuke.stapler&quot;, module: &quot;json-lib&quot;, version: &quot;2.4-jenkins-2&quot;)\r\n\r\n  [1]: http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/JSONObject.html","title":"How do you set a value to null with org.json.JSONObject in java?","body":"<p>For me with <a href=\"http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/JSONObject.html\" rel=\"nofollow noreferrer\">net.sf.json.JSONObject</a> I need to create a null <code>JSON</code> by</p>\n\n<pre><code>new JSONObject(true)\n</code></pre>\n\n<p>This is how I get class into groovy:</p>\n\n<pre><code>groovy.grape.Grape.grab(group: \"org.kohsuke.stapler\", module: \"json-lib\", version: \"2.4-jenkins-2\")\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9644412,"reputation":41,"user_id":7157678,"display_name":"Leonardo Lopes"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1611317047,"creation_date":1611317047,"answer_id":65844838,"question_id":13613754,"body_markdown":"I created this project https://github.com/leonardofel/JSON-java-put-null-fix\r\n\r\nTo change (or fix), just import the library to your pom.xml\r\n\r\nthis is how your code will behave:\r\n```\r\nJSONObject o = new JSONObject();\r\no.put(&quot;key&quot;, null);\r\no.isNull(&quot;key&quot;); // returns true\r\no.has(&quot;key&quot;); // returns true\r\no.isNull(&quot;somethingIHaventSetAtAll&quot;); // returns true\r\no.get(&quot;key&quot;); // returns null\r\n\r\no.remove(&quot;key&quot;);\r\no.isNull(&quot;key&quot;); // returns true\r\no.has(&quot;key&quot;); // returns false\r\no.isNull(&quot;somethingIHaventSetAtAll&quot;); // returns true\r\no.get(&quot;key&quot;); // throws JSONException &quot;key&quot; not found\r\n```","title":"How do you set a value to null with org.json.JSONObject in java?","body":"<p>I created this project <a href=\"https://github.com/leonardofel/JSON-java-put-null-fix\" rel=\"nofollow noreferrer\">https://github.com/leonardofel/JSON-java-put-null-fix</a></p>\n<p>To change (or fix), just import the library to your pom.xml</p>\n<p>this is how your code will behave:</p>\n<pre><code>JSONObject o = new JSONObject();\no.put(&quot;key&quot;, null);\no.isNull(&quot;key&quot;); // returns true\no.has(&quot;key&quot;); // returns true\no.isNull(&quot;somethingIHaventSetAtAll&quot;); // returns true\no.get(&quot;key&quot;); // returns null\n\no.remove(&quot;key&quot;);\no.isNull(&quot;key&quot;); // returns true\no.has(&quot;key&quot;); // returns false\no.isNull(&quot;somethingIHaventSetAtAll&quot;); // returns true\no.get(&quot;key&quot;); // throws JSONException &quot;key&quot; not found\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1448682,"reputation":355,"user_id":1366329,"display_name":"Winter MC"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1644762894,"creation_date":1644762894,"answer_id":71101639,"question_id":13613754,"body_markdown":"Create a Utility Class or if you already have an existing one just create this utility method in it.\r\n  \r\n\r\n     class JsonObjectUtility{\r\n               public static Object getJSONObjectValue(Object value)  {\r\n\t\t          return value == null ? &quot;null&quot; : value;\r\n\t           }\r\n     }\r\n\r\nthen pass all input through this utility before passing it to the JSONObject put method as below: (i will use the code sample in the question)\r\n\r\n    JSONObject o = new JSONObject();\r\n    o.put(&quot;key&quot;, JsonObjectUtility.getJSONObjectValue(null) );\r\n\r\nThis shall print a json string as below\r\n\r\n&gt; { &quot;key&quot; : null }","title":"How do you set a value to null with org.json.JSONObject in java?","body":"<p>Create a Utility Class or if you already have an existing one just create this utility method in it.</p>\n<pre><code> class JsonObjectUtility{\n           public static Object getJSONObjectValue(Object value)  {\n              return value == null ? &quot;null&quot; : value;\n           }\n }\n</code></pre>\n<p>then pass all input through this utility before passing it to the JSONObject put method as below: (i will use the code sample in the question)</p>\n<pre><code>JSONObject o = new JSONObject();\no.put(&quot;key&quot;, JsonObjectUtility.getJSONObjectValue(null) );\n</code></pre>\n<p>This shall print a json string as below</p>\n<blockquote>\n<p>{ &quot;key&quot; : null }</p>\n</blockquote>\n"}],"owner":{"account_id":42063,"reputation":58411,"user_id":122422,"accept_rate":56,"display_name":"B T"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75727,"favorite_count":0,"down_vote_count":0,"up_vote_count":80,"accepted_answer_id":13613803,"answer_count":4,"score":80,"last_activity_date":1691197892,"creation_date":1354134277,"question_id":13613754,"body_markdown":"How do you set a value to null with org.json.JSONObject in java? I can certainly read if a value is null by using isNull - but it seems like when I put null, it just ignores me:\r\n\r\n    JSONObject o = new JSONObject();\r\n    o.put(&quot;key&quot;,null);\r\n    o.isNull(&quot;key&quot;); // returns true, buuuut...\r\n    o.has(&quot;key&quot;);    // returns false\r\n    o.isNull(&quot;somethingIHaventSetAtAll&quot;);    // also returns true, unfortunately","title":"How do you set a value to null with org.json.JSONObject in java?","body":"<p>How do you set a value to null with org.json.JSONObject in java? I can certainly read if a value is null by using isNull - but it seems like when I put null, it just ignores me:</p>\n\n<pre><code>JSONObject o = new JSONObject();\no.put(\"key\",null);\no.isNull(\"key\"); // returns true, buuuut...\no.has(\"key\");    // returns false\no.isNull(\"somethingIHaventSetAtAll\");    // also returns true, unfortunately\n</code></pre>\n"},{"tags":["java","audio","header","byte","wav"],"comments":[{"owner":{"account_id":1725436,"reputation":1005,"user_id":1580235,"accept_rate":94,"display_name":"KillaKem"},"score":0,"creation_date":1422212044,"post_id":28137559,"comment_id":44651819,"body_markdown":"You can probably find a few libraries that will handle all the header stuff for you, all you need to do is find them.If you use such libraries all you will have to worry about is how to actually manipulate the audio rather  than just how to encode or decode them.","body":"You can probably find a few libraries that will handle all the header stuff for you, all you need to do is find them.If you use such libraries all you will have to worry about is how to actually manipulate the audio rather  than just how to encode or decode them."},{"owner":{"account_id":15736659,"reputation":442,"user_id":11355399,"display_name":"Huhngut"},"score":0,"creation_date":1640872276,"post_id":28137559,"comment_id":124679943,"body_markdown":"For a java example please refer to my answer here: https://stackoverflow.com/a/70532527/11355399","body":"For a java example please refer to my answer here: <a href=\"https://stackoverflow.com/a/70532527/11355399\">stackoverflow.com/a/70532527/11355399</a>"}],"answers":[{"comments":[{"owner":{"account_id":3132275,"reputation":790,"user_id":2649681,"accept_rate":29,"display_name":"user2649681"},"score":0,"creation_date":1422199449,"post_id":28137825,"comment_id":44647569,"body_markdown":"So the `File size` values are `32 bit integers` containing the number of `8-bit bytes` in the entire file and the data section respectively? Is sample rate `32-bit` or `32-byte`, because if I&#39;m not mistaken the latter is much larger than necessary at 128 bits.","body":"So the <code>File size</code> values are <code>32 bit integers</code> containing the number of <code>8-bit bytes</code> in the entire file and the data section respectively? Is sample rate <code>32-bit</code> or <code>32-byte</code>, because if I&#39;m not mistaken the latter is much larger than necessary at 128 bits."},{"owner":{"account_id":1652887,"reputation":2038,"user_id":1523115,"display_name":"Hannes"},"score":0,"creation_date":1422202120,"post_id":28137825,"comment_id":44648397,"body_markdown":"32 bit sample is the answer. 4 bytes header space to be precise.","body":"32 bit sample is the answer. 4 bytes header space to be precise."},{"owner":{"account_id":14536170,"reputation":373,"user_id":10499494,"display_name":"Riedler"},"score":0,"creation_date":1692139364,"post_id":28137825,"comment_id":135583052,"body_markdown":"fyi, that &quot;trailing null&quot; in fmt isn&#39;t actually a null byte, but a space. ffprobe was very adamant about that","body":"fyi, that &quot;trailing null&quot; in fmt isn&#39;t actually a null byte, but a space. ffprobe was very adamant about that"}],"tags":[],"owner":{"account_id":1652887,"reputation":2038,"user_id":1523115,"display_name":"Hannes"},"comment_count":3,"down_vote_count":1,"up_vote_count":28,"is_accepted":true,"score":27,"last_activity_date":1422429248,"creation_date":1422198088,"answer_id":28137825,"question_id":28137559,"body_markdown":"It is against the board rules to just post a link, so here is the table I took from http://www.topherlee.com/software/pcm-tut-wavformat.html\r\n\r\n&lt;!-- language: none --&gt;\r\n\r\n    Positions \tSample Value \t     Description\r\n    1 - 4       &quot;RIFF&quot;               Marks the file as a riff file. Characters are each 1. byte long.\r\n    5 - 8       File size (integer)  Size of the overall file - 8 bytes, in bytes (32-bit integer). Typically, you&#39;d fill this in after creation.\r\n    9 -12       &quot;WAVE&quot; \t             File Type Header. For our purposes, it always equals &quot;WAVE&quot;.\r\n    13-16       &quot;fmt &quot; \t             Format chunk marker. Includes trailing null\r\n    17-20       16 \t                 Length of format data as listed above\r\n    21-22       1 \t                 Type of format (1 is PCM) - 2 byte integer\r\n    23-24       2 \t                 Number of Channels - 2 byte integer\r\n    25-28       44100 \t             Sample Rate - 32 bit integer. Common values are 44100 (CD), 48000 (DAT). Sample Rate = Number of Samples per second, or Hertz.\r\n    29-32       176400 \t             (Sample Rate * BitsPerSample * Channels) / 8.\r\n    33-34       4 \t                 (BitsPerSample * Channels) / 8.1 - 8 bit mono2 - 8 bit stereo/16 bit mono4 - 16 bit stereo\r\n    35-36       16 \t                 Bits per sample\r\n    37-40       &quot;data&quot; \t             &quot;data&quot; chunk header. Marks the beginning of the data section.\r\n    41-44       File size (data) \t Size of the data section, i.e. file size - 44 bytes header.\r\n\r\nSample values are given above for a 16-bit stereo source.\r\n\r\n\r\n**Update/Reminder**\r\n\r\nThe header integers are all in Least significant byte order, \r\nso the two byte channel information 0x01 0x00 are actually 0x00001 e.g. mono.","title":"Can someone explain .wav(WAVE) file headers?","body":"<p>It is against the board rules to just post a link, so here is the table I took from <a href=\"http://www.topherlee.com/software/pcm-tut-wavformat.html\" rel=\"noreferrer\">http://www.topherlee.com/software/pcm-tut-wavformat.html</a></p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Positions   Sample Value         Description\n1 - 4       \"RIFF\"               Marks the file as a riff file. Characters are each 1. byte long.\n5 - 8       File size (integer)  Size of the overall file - 8 bytes, in bytes (32-bit integer). Typically, you'd fill this in after creation.\n9 -12       \"WAVE\"               File Type Header. For our purposes, it always equals \"WAVE\".\n13-16       \"fmt \"               Format chunk marker. Includes trailing null\n17-20       16                   Length of format data as listed above\n21-22       1                    Type of format (1 is PCM) - 2 byte integer\n23-24       2                    Number of Channels - 2 byte integer\n25-28       44100                Sample Rate - 32 bit integer. Common values are 44100 (CD), 48000 (DAT). Sample Rate = Number of Samples per second, or Hertz.\n29-32       176400               (Sample Rate * BitsPerSample * Channels) / 8.\n33-34       4                    (BitsPerSample * Channels) / 8.1 - 8 bit mono2 - 8 bit stereo/16 bit mono4 - 16 bit stereo\n35-36       16                   Bits per sample\n37-40       \"data\"               \"data\" chunk header. Marks the beginning of the data section.\n41-44       File size (data)     Size of the data section, i.e. file size - 44 bytes header.\n</code></pre>\n\n<p>Sample values are given above for a 16-bit stereo source.</p>\n\n<p><strong>Update/Reminder</strong></p>\n\n<p>The header integers are all in Least significant byte order, \nso the two byte channel information 0x01 0x00 are actually 0x00001 e.g. mono.</p>\n"},{"comments":[{"owner":{"account_id":9761453,"reputation":127,"user_id":7236415,"display_name":"Tonecops"},"score":0,"creation_date":1647265562,"post_id":63113503,"comment_id":126320817,"body_markdown":"Are you sure about those endianesses in picture? My wav properties java code works with setting ByteBuffer order to little endian for all those fields. Especially the second field called ChunkSize gets read correctly with ByteBuffer set to bb.order(ByteOrder.LITTLE_ENDIAN);","body":"Are you sure about those endianesses in picture? My wav properties java code works with setting ByteBuffer order to little endian for all those fields. Especially the second field called ChunkSize gets read correctly with ByteBuffer set to bb.order(ByteOrder.LITTLE_ENDIAN);"},{"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"score":0,"creation_date":1647290734,"post_id":63113503,"comment_id":126330134,"body_markdown":"@Kurskinen Yes, Iâm sure that the information in the pic is correct. I donât understand your question. The picture shows `ChunkSize` stored as Little Endian, and you say your code is able to read it that way, so, whereâs the problem? Are you saying youâre able to correctly read Big Endian fields using Little Endian order?","body":"@Kurskinen Yes, Iâm sure that the information in the pic is correct. I donât understand your question. The picture shows <code>ChunkSize</code> stored as Little Endian, and you say your code is able to read it that way, so, whereâs the problem? Are you saying youâre able to correctly read Big Endian fields using Little Endian order?"},{"owner":{"account_id":9761453,"reputation":127,"user_id":7236415,"display_name":"Tonecops"},"score":0,"creation_date":1647384333,"post_id":63113503,"comment_id":126356904,"body_markdown":"Thanks for your kind reply. Yes! That is exactly what I mean. I play with ByteBuffer.order and it has no effect on bigendian fields(say for example first &quot;RIFF&quot;) even it internally(when debugging) claims it has changed from bigEndian=true  to false and also &quot;nativeByteOrder&quot; did chaged to true. So I have a problem: why on earth changing ByteBuffer.order() to little endian for those bigendian fields does not matter but little endians are destroyed without it?  I can see those succeeding with both endians are character fields and those failing are numbers. But what is the mechanism?","body":"Thanks for your kind reply. Yes! That is exactly what I mean. I play with ByteBuffer.order and it has no effect on bigendian fields(say for example first &quot;RIFF&quot;) even it internally(when debugging) claims it has changed from bigEndian=true  to false and also &quot;nativeByteOrder&quot; did chaged to true. So I have a problem: why on earth changing ByteBuffer.order() to little endian for those bigendian fields does not matter but little endians are destroyed without it?  I can see those succeeding with both endians are character fields and those failing are numbers. But what is the mechanism?"},{"owner":{"account_id":9761453,"reputation":127,"user_id":7236415,"display_name":"Tonecops"},"score":0,"creation_date":1647384779,"post_id":63113503,"comment_id":126356974,"body_markdown":"Ok. I think I got it(maybe...). Because character is taking only 1 byte there is no order. Order is meaningful only when something is combined from two or more bytes. So as well those character fields in the picture could be marked as little endian and no difference could be detected? My sequence is:\nfis.read(properties_bytes,0,4);\nbyte[]chunkID_bytes = new byte[4];\n\nbb_properties.get(chunkID_bytes);","body":"Ok. I think I got it(maybe...). Because character is taking only 1 byte there is no order. Order is meaningful only when something is combined from two or more bytes. So as well those character fields in the picture could be marked as little endian and no difference could be detected? My sequence is: fis.read(properties_bytes,0,4); byte[]chunkID_bytes = new byte[4];  bb_properties.get(chunkID_bytes);"}],"tags":[],"owner":{"account_id":446597,"reputation":22464,"user_id":839733,"accept_rate":69,"display_name":"Abhijit Sarkar"},"comment_count":4,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1595846581,"creation_date":1595846053,"answer_id":63113503,"question_id":28137559,"body_markdown":"[![enter image description here][1]][1]\r\n\r\nI know OP tagged the question as Java, but here&#39;s complete Kotlin code for reading the header that could pass for Java. Reading Little Endian could be tricky, but thankfully we don&#39;t have to do that.\r\n\r\n    class WaveHeader(bytes: ByteArray) {\r\n        init {\r\n            require(bytes.size &gt;= SIZE) { &quot;Input size is must be at least $SIZE bytes&quot; }\r\n        }\r\n    \r\n        private var start = 0\r\n        private val riff = RiffChunk(\r\n            String(bytes.copyOfRange(start, start + 4))\r\n                .also {\r\n                    require(it == &quot;RIFF&quot;) { &quot;$it must be &#39;RIFF&#39;&quot; }\r\n                    start += it.length\r\n                },\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.int,\r\n            String(bytes.copyOfRange(start, start + 4))\r\n                .also {\r\n                    require(it == &quot;WAVE&quot;) { &quot;$it must be &#39;WAVE&#39;&quot; }\r\n                    start += it.length\r\n                }\r\n        )\r\n        private val format = FormatChunk(\r\n            // null terminated\r\n            String(bytes.copyOfRange(start, start + 3))\r\n                .also {\r\n                    require(it == &quot;fmt&quot;) { &quot;$it must be &#39;fmt&#39;&quot; }\r\n                    start += 4\r\n                },\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.int,\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }\r\n                .let { if (it.short == 1.toShort()) &quot;PCM&quot; else &quot;OTHER (${it.short})&quot; },\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.short,\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.int,\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.int,\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.short,\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.short\r\n        )\r\n        private val `data` = DataChunk(\r\n            String(bytes.copyOfRange(start, start + 4))\r\n                 // remove all null chars\r\n                .replace(&quot;\\u0000&quot;, &quot;&quot;)\r\n                .also { start += it.length },\r\n            ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\r\n                .also { start += it.capacity() }.int\r\n        )\r\n    \r\n        init {\r\n            assert(start == 44) { &quot;Illegal state&quot; }\r\n        }\r\n    \r\n        data class RiffChunk(val id: String, val size: Int, val format: String)\r\n        data class FormatChunk(\r\n            val id: String, val size: Int, val format: String, val numChannels: Short,\r\n            val sampleRate: Int, val byteRate: Int, val blockAlign: Short, val bitsPerSample: Short\r\n        )\r\n    \r\n        data class DataChunk(val id: String, val size: Int)\r\n    \r\n        override fun toString(): String {\r\n            val ls = System.lineSeparator()\r\n            return &quot;WaveHeader($ls\\t$riff}$ls\\t$format$ls\\t$`data`$ls)&quot;\r\n        }\r\n    \r\n        companion object {\r\n            const val SIZE = 44\r\n    \r\n            fun fromPath(path: String): WaveHeader  = fromInputStream(WaveHeader::class.java.getResourceAsStream(path))\r\n    \r\n            fun fromUrl(url: String): WaveHeader  = fromInputStream(URL(url).openStream())\r\n    \r\n            private fun fromInputStream(input: InputStream): WaveHeader {\r\n                val bytes = input.use {\r\n                    it.readNBytes(SIZE)\r\n                }\r\n                return WaveHeader(bytes)\r\n            }\r\n        }\r\n    }\r\n    \r\n    fun main(args: Array&lt;String&gt;) {\r\n        if (args.isEmpty()) {\r\n            System.err.println(&quot;Argument is missing&quot;)\r\n        }\r\n        println(WaveHeader.fromUrl(args[0]))\r\n    }\r\n\r\nRunning with [this](https://uweb.engr.arizona.edu/~429rns/audiofiles/blues2.wav) URL produces the output:\r\n\r\n    WaveHeader(\r\n    \tRiffChunk(id=RIFF, size=168050, format=WAVE)}\r\n    \tFormatChunk(id=fmt, size=18, format=PCM, numChannels=1, sampleRate=16000, byteRate=32000, blockAlign=2, bitsPerSample=16)\r\n    \tDataChunk(id=fa, size=1952670054)\r\n    )\r\n\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/Q9xGC.jpg","title":"Can someone explain .wav(WAVE) file headers?","body":"<p><a href=\"https://i.stack.imgur.com/Q9xGC.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Q9xGC.jpg\" alt=\"enter image description here\" /></a></p>\n<p>I know OP tagged the question as Java, but here's complete Kotlin code for reading the header that could pass for Java. Reading Little Endian could be tricky, but thankfully we don't have to do that.</p>\n<pre><code>class WaveHeader(bytes: ByteArray) {\n    init {\n        require(bytes.size &gt;= SIZE) { &quot;Input size is must be at least $SIZE bytes&quot; }\n    }\n\n    private var start = 0\n    private val riff = RiffChunk(\n        String(bytes.copyOfRange(start, start + 4))\n            .also {\n                require(it == &quot;RIFF&quot;) { &quot;$it must be 'RIFF'&quot; }\n                start += it.length\n            },\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.int,\n        String(bytes.copyOfRange(start, start + 4))\n            .also {\n                require(it == &quot;WAVE&quot;) { &quot;$it must be 'WAVE'&quot; }\n                start += it.length\n            }\n    )\n    private val format = FormatChunk(\n        // null terminated\n        String(bytes.copyOfRange(start, start + 3))\n            .also {\n                require(it == &quot;fmt&quot;) { &quot;$it must be 'fmt'&quot; }\n                start += 4\n            },\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.int,\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }\n            .let { if (it.short == 1.toShort()) &quot;PCM&quot; else &quot;OTHER (${it.short})&quot; },\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.short,\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.int,\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.int,\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.short,\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 2)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.short\n    )\n    private val `data` = DataChunk(\n        String(bytes.copyOfRange(start, start + 4))\n             // remove all null chars\n            .replace(&quot;\\u0000&quot;, &quot;&quot;)\n            .also { start += it.length },\n        ByteBuffer.wrap(bytes.copyOfRange(start, start + 4)).order(ByteOrder.LITTLE_ENDIAN)\n            .also { start += it.capacity() }.int\n    )\n\n    init {\n        assert(start == 44) { &quot;Illegal state&quot; }\n    }\n\n    data class RiffChunk(val id: String, val size: Int, val format: String)\n    data class FormatChunk(\n        val id: String, val size: Int, val format: String, val numChannels: Short,\n        val sampleRate: Int, val byteRate: Int, val blockAlign: Short, val bitsPerSample: Short\n    )\n\n    data class DataChunk(val id: String, val size: Int)\n\n    override fun toString(): String {\n        val ls = System.lineSeparator()\n        return &quot;WaveHeader($ls\\t$riff}$ls\\t$format$ls\\t$`data`$ls)&quot;\n    }\n\n    companion object {\n        const val SIZE = 44\n\n        fun fromPath(path: String): WaveHeader  = fromInputStream(WaveHeader::class.java.getResourceAsStream(path))\n\n        fun fromUrl(url: String): WaveHeader  = fromInputStream(URL(url).openStream())\n\n        private fun fromInputStream(input: InputStream): WaveHeader {\n            val bytes = input.use {\n                it.readNBytes(SIZE)\n            }\n            return WaveHeader(bytes)\n        }\n    }\n}\n\nfun main(args: Array&lt;String&gt;) {\n    if (args.isEmpty()) {\n        System.err.println(&quot;Argument is missing&quot;)\n    }\n    println(WaveHeader.fromUrl(args[0]))\n}\n</code></pre>\n<p>Running with <a href=\"https://uweb.engr.arizona.edu/%7E429rns/audiofiles/blues2.wav\" rel=\"noreferrer\">this</a> URL produces the output:</p>\n<pre><code>WaveHeader(\n    RiffChunk(id=RIFF, size=168050, format=WAVE)}\n    FormatChunk(id=fmt, size=18, format=PCM, numChannels=1, sampleRate=16000, byteRate=32000, blockAlign=2, bitsPerSample=16)\n    DataChunk(id=fa, size=1952670054)\n)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":16603256,"reputation":2611,"user_id":11998382,"display_name":"Tom Huntington"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691197882,"creation_date":1691197882,"answer_id":76839776,"question_id":28137559,"body_markdown":"The sizes always mean the remaining size (i.e. not including the ID and size fields).","title":"Can someone explain .wav(WAVE) file headers?","body":"<p>The sizes always mean the remaining size (i.e. not including the ID and size fields).</p>\n"}],"owner":{"account_id":3132275,"reputation":790,"user_id":2649681,"accept_rate":29,"display_name":"user2649681"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":21841,"favorite_count":0,"down_vote_count":1,"up_vote_count":15,"accepted_answer_id":28137825,"answer_count":3,"score":14,"last_activity_date":1691197882,"creation_date":1422196528,"question_id":28137559,"body_markdown":"OK, so I&#39;m trying to make a program that will manipulate .wav files, and I&#39;ve seen [this question/answers][1], but I&#39;m not entirely sure as to what each piece of data in the header refers to. For example, what does a &quot;chunk&quot; refer to? Is that a specific number of bits/bytes?\r\n\r\nIf somebody could just tell me, at least in the format used in this question, what each datum being written to the .wav, aside from the constant String Literals and the &#39;data&#39; array, refer to? In particular I&#39;d especially like to know what a &quot;chunk&quot; is, and how Sample Rate, Byte Rate, Bytes per Sample, and Bytes per Sample for all Channels relate?(I suspect Byte Rate is Sample Rate * Bytes per Sample, but what about the &#39;for all channels&#39; one?)\r\n\r\nAny help is appreciated.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5810164/how-can-i-write-wav-file-from-byte-array-in-java","title":"Can someone explain .wav(WAVE) file headers?","body":"<p>OK, so I'm trying to make a program that will manipulate .wav files, and I've seen <a href=\"https://stackoverflow.com/questions/5810164/how-can-i-write-wav-file-from-byte-array-in-java\">this question/answers</a>, but I'm not entirely sure as to what each piece of data in the header refers to. For example, what does a \"chunk\" refer to? Is that a specific number of bits/bytes?</p>\n\n<p>If somebody could just tell me, at least in the format used in this question, what each datum being written to the .wav, aside from the constant String Literals and the 'data' array, refer to? In particular I'd especially like to know what a \"chunk\" is, and how Sample Rate, Byte Rate, Bytes per Sample, and Bytes per Sample for all Channels relate?(I suspect Byte Rate is Sample Rate * Bytes per Sample, but what about the 'for all channels' one?)</p>\n\n<p>Any help is appreciated.</p>\n"},{"tags":["java","spring","spring-boot","h2"],"answers":[{"tags":[],"owner":{"account_id":9763630,"reputation":16595,"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1641242344,"creation_date":1641242344,"answer_id":70571190,"question_id":70571047,"body_markdown":"The h2 console can be used to execute SQL queries so that you can view the content of the database.\r\n\r\nYou can execute for example `SELECT * FROM YOUR_TABLE;` and you will see the result of the query in the console.","title":"Spring Boot - Show H2 Database Content","body":"<p>The h2 console can be used to execute SQL queries so that you can view the content of the database.</p>\n<p>You can execute for example <code>SELECT * FROM YOUR_TABLE;</code> and you will see the result of the query in the console.</p>\n"},{"tags":[],"owner":{"account_id":7991001,"reputation":37,"user_id":6028863,"accept_rate":40,"display_name":"Shucoder"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691197701,"creation_date":1691197701,"answer_id":76839768,"question_id":70571047,"body_markdown":"This is an old question but hopefully this helps noobs.\r\n\r\nLooks like you are:\r\n1. Viewing an endpoint response data in Swagger - so not your H2 database nor it&#39;s data\r\n2. That data is temporary standard (Swagger&#39;s) data and one that lives in Swagger only\r\n3. You have the H2 database but don&#39;t have a database **table** yet\r\n\r\nTo fix you can it in the following ways:\r\n\r\n1. Create a schema and a table model\r\n2. Just create a table model and Hibernate will automatically create the in-memory table for you each time the application is ran\r\n\r\nWe will focus on number 2 for sake of simplicity (in more real world scenerios you need the schema&#39;s first):\r\n1. Create a model under model package - for instance to create a user table called **Users A** do this:\r\n\r\n    import jakarta.persistence.*;\r\n    import jakarta.validation.constraints.NotBlank;\r\n    import lombok.Getter;\r\n    import lombok.Setter;\r\n    \r\n    import java.io.Serializable;\r\n    \r\n    \r\n    /**\r\n     *\r\n     * @author Admin\r\n     */\r\n    @Getter\r\n    @Setter\r\n    @Entity\r\n    @Table(name = &quot;usersa&quot;)\r\n    public class UsersA  implements Serializable {\r\n        @Id\r\n        @GeneratedValue(strategy = GenerationType.AUTO)\r\n        private Long id;\r\n    \r\n        @NotBlank(message = &quot;Username is required&quot;)\r\n        private String username;\r\n    \r\n        private Integer password;\r\n        \r\n        @Override\r\n        public String toString() {\r\n            return String.format(&quot;UsersA{id=%d, username=&#39;%s&#39;, password=&#39;%s&#39;}&quot;,\r\n                    id, username, password);\r\n        }\r\n    }\r\n\r\n2. That&#39;s it and each time you build and run the app hibernate will pick this up and create it for you and then it will be visible in your browser H2 Console\r\n\r\nThis obviously depends on your project having the correct dependencies like jarkata, hibernate, h2 and configured correctly in the pom.\r\n\r\n\r\n","title":"Spring Boot - Show H2 Database Content","body":"<p>This is an old question but hopefully this helps noobs.</p>\n<p>Looks like you are:</p>\n<ol>\n<li>Viewing an endpoint response data in Swagger - so not your H2 database nor it's data</li>\n<li>That data is temporary standard (Swagger's) data and one that lives in Swagger only</li>\n<li>You have the H2 database but don't have a database <strong>table</strong> yet</li>\n</ol>\n<p>To fix you can it in the following ways:</p>\n<ol>\n<li>Create a schema and a table model</li>\n<li>Just create a table model and Hibernate will automatically create the in-memory table for you each time the application is ran</li>\n</ol>\n<p>We will focus on number 2 for sake of simplicity (in more real world scenerios you need the schema's first):</p>\n<ol>\n<li><p>Create a model under model package - for instance to create a user table called <strong>Users A</strong> do this:</p>\n<p>import jakarta.persistence.*;\nimport jakarta.validation.constraints.NotBlank;\nimport lombok.Getter;\nimport lombok.Setter;</p>\n<p>import java.io.Serializable;</p>\n<p>/**\n*</p>\n<ul>\n<li><p>@author Admin\n*/\n@Getter\n@Setter\n@Entity\n@Table(name = &quot;usersa&quot;)\npublic class UsersA  implements Serializable {\n@Id\n@GeneratedValue(strategy = GenerationType.AUTO)\nprivate Long id;</p>\n<p>@NotBlank(message = &quot;Username is required&quot;)\nprivate String username;</p>\n<p>private Integer password;</p>\n<p>@Override\npublic String toString() {\nreturn String.format(&quot;UsersA{id=%d, username='%s', password='%s'}&quot;,\nid, username, password);\n}\n}</p>\n</li>\n</ul>\n</li>\n<li><p>That's it and each time you build and run the app hibernate will pick this up and create it for you and then it will be visible in your browser H2 Console</p>\n</li>\n</ol>\n<p>This obviously depends on your project having the correct dependencies like jarkata, hibernate, h2 and configured correctly in the pom.</p>\n"}],"owner":{"account_id":23816133,"reputation":31,"user_id":17824377,"display_name":"Susanne"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1203,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70571190,"answer_count":2,"score":0,"last_activity_date":1691197701,"creation_date":1641241447,"question_id":70571047,"body_markdown":"I have a Spring Boot Application with a H2 database. I can add entries and I can see this entries on the swagger-ui website.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\nBut when I open the H2 console, I can not see the tables or the columns. \r\n\r\n[![enter image description here][2]][2]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IRkE6.png\r\n  [2]: https://i.stack.imgur.com/U2vva.png\r\n\r\nIs there a way to show me the content of the database? In a readable format?\r\n\r\nMy application.properties file:\r\n\r\n```\r\nspring.datasource.url=jdbc:h2:mem:mooddb;\r\nspring.datasource.driverClassName=org.h2.Driver\r\nspring.datasource.username=a\r\nspring.datasource.password=a\r\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\r\nspring.sql.init.platform=h2\r\nspring.jpa.hibernate.ddl-auto=create\r\nspring.sql.init.data-locations=classpath:data-h2.sql\r\n\r\nspring.h2.console.enabled=true\r\n\r\nspring.jpa.show-sql=true\r\nspring.jpa.properties.hibernate.format_sql=true\r\n\r\nspring.jpa.defer-datasource-initialization=true\r\n\r\nspring.h2.console.path=/h2\r\nspring.h2.console.settings.trace=false\r\nspring.h2.console.settings.web-allow-others=false\r\n```\r\n\r\nThank ","title":"Spring Boot - Show H2 Database Content","body":"<p>I have a Spring Boot Application with a H2 database. I can add entries and I can see this entries on the swagger-ui website.</p>\n<p><a href=\"https://i.stack.imgur.com/IRkE6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IRkE6.png\" alt=\"enter image description here\" /></a></p>\n<p>But when I open the H2 console, I can not see the tables or the columns.</p>\n<p><a href=\"https://i.stack.imgur.com/U2vva.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U2vva.png\" alt=\"enter image description here\" /></a></p>\n<p>Is there a way to show me the content of the database? In a readable format?</p>\n<p>My application.properties file:</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:mooddb;\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=a\nspring.datasource.password=a\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.sql.init.platform=h2\nspring.jpa.hibernate.ddl-auto=create\nspring.sql.init.data-locations=classpath:data-h2.sql\n\nspring.h2.console.enabled=true\n\nspring.jpa.show-sql=true\nspring.jpa.properties.hibernate.format_sql=true\n\nspring.jpa.defer-datasource-initialization=true\n\nspring.h2.console.path=/h2\nspring.h2.console.settings.trace=false\nspring.h2.console.settings.web-allow-others=false\n</code></pre>\n<p>Thank</p>\n"},{"tags":["java","apache-kafka","kafka-consumer-api","apache-kafka-streams"],"answers":[{"tags":[],"owner":{"account_id":6384814,"reputation":60273,"user_id":4953079,"display_name":"Matthias J. Sax"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691197017,"creation_date":1691197017,"answer_id":76839754,"question_id":76604976,"body_markdown":"Kafka Streams is not flexible enough. If it has a single message at hand and processing it takes a long time, it won&#39;t call `poll()`.\r\n\r\nYou might need to fall back to using a `KafkaConsumer` instead so you have more control over it. Or you try to increase `max.poll.timeout.ms` accordingly, but I would actually not recommend it -- 30 minutes would be a really high value and might cause other issues.\r\n\r\nUsing `ScheduledExecutorService` is a very bad idea anyway and might break your application. Kafka Streams does not allow to run your own background threads.","title":"Kafka Streams - Pause and resume","body":"<p>Kafka Streams is not flexible enough. If it has a single message at hand and processing it takes a long time, it won't call <code>poll()</code>.</p>\n<p>You might need to fall back to using a <code>KafkaConsumer</code> instead so you have more control over it. Or you try to increase <code>max.poll.timeout.ms</code> accordingly, but I would actually not recommend it -- 30 minutes would be a really high value and might cause other issues.</p>\n<p>Using <code>ScheduledExecutorService</code> is a very bad idea anyway and might break your application. Kafka Streams does not allow to run your own background threads.</p>\n"}],"owner":{"account_id":1646297,"reputation":440,"user_id":1517790,"accept_rate":44,"display_name":"Phani Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":132,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1691197017,"creation_date":1688389191,"question_id":76604976,"body_markdown":"I have a streams application that consumes messages usually fast but sometimes takes a lot of time (up to 30 min). The behavior is in-deterministic and we do not know before processing the message. We deploy our application in Kubernetes where pods going down and scaling up is normal. When all pods are stuck in processing messages for a long time, any new pods scale up or going down kick off rebalancing which takes a lot of time, and sometimes never completes due to the poll thread blocked. \r\n\r\nI am trying to pause and resume Kafka streams which theoretically should not block poll so it should not block rebalancing. What is the ideal programming model to achieve the following? I know this is fairly easy to accomplish when using Kafka consumer model (not streams)\r\n\r\n- Start processing a message\r\n- Spawn a new thread to process message\r\n- Pause kafka streams which unblocks poll and do not consume any new messages\r\n- When finished processing message\r\n  - Forward message to sink (output topic)\r\n  - commit offset and resume streams\r\n\r\nI have tried the following. It has multiple problems:\r\n\r\n- When kafka streams is paused, forward is hanged forever\r\n- If I resume streams and then forward, it is not hanged but no message in output topic\r\n\r\n&#39;&#39;&#39;\r\npublic class Test1 {\r\n\r\n    static KafkaStreams streams;\r\n    public static void main(String[] args) {\r\n        // Set up the configuration properties\r\n        Properties config = new Properties();\r\n        config.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;my-streams-app&quot;);\r\n        config.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\r\n        config.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\r\n\r\n        config.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());\r\n        config.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass());\r\n        config.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 1);\r\n        config.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, 10000);\r\n        config.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG, 180000)\r\n\r\n        Topology builder = new Topology();\r\n\r\n        // Add a source processor node\r\n        builder.addSource(&quot;Source&quot;, &quot;input&quot;);\r\n\r\n        // Add a processor node\r\n        builder.addProcessor(&quot;Processor&quot;, MyProcessor::new, &quot;Source&quot;);\r\n\r\n      \r\n        builder.addSink(&quot;sendto&quot;, &quot;output&quot;, Serdes.String().serializer(), Serdes.String().serializer(),&quot;Processor&quot;);\r\n\r\n        // Build the topology\r\n        streams = new KafkaStreams(builder, config);\r\n\r\n        // Start the KafkaStreams instance\r\n        streams.start();\r\n\r\n        // Add shutdown hook to gracefully close the KafkaStreams instance\r\n        Runtime.getRuntime().addShutdownHook(new Thread(streams::close));\r\n    }\r\n\r\n    static class MyProcessor implements Processor&lt;String, String, String, String&gt; {\r\n        private ProcessorContext context;\r\n        private ScheduledExecutorService executorService;\r\n\r\n        @Override\r\n        public void init(ProcessorContext context) {\r\n            this.context = context;\r\n            this.executorService = Executors.newSingleThreadScheduledExecutor();\r\n        }\r\n\r\n\r\n        @Override\r\n        public void process(Record&lt;String, String&gt; record) {\r\n            System.out.println(&quot;In processing&quot;);\r\n\r\n            streams.pause();\r\n            executorService.schedule(() -&gt; {\r\n                System.out.println(&quot;Started processing..sleeping&quot;);\r\n                try {\r\n                    Thread.sleep(10000);\r\n                } catch (InterruptedException e) {\r\n                    throw new RuntimeException(e);\r\n                }\r\n                System.out.println(&quot;OUT processing...&quot;);\r\n\r\n                context.forward(new Record&lt;&gt;(&quot;test1&quot;, &quot;value&quot;,1l), &quot;sendto&quot;);\r\n                context.commit();\r\n                streams.resume();\r\n\r\n            }, 0, TimeUnit.SECONDS);\r\n        }\r\n\r\n&#39;&#39;&#39;\r\n","title":"Kafka Streams - Pause and resume","body":"<p>I have a streams application that consumes messages usually fast but sometimes takes a lot of time (up to 30 min). The behavior is in-deterministic and we do not know before processing the message. We deploy our application in Kubernetes where pods going down and scaling up is normal. When all pods are stuck in processing messages for a long time, any new pods scale up or going down kick off rebalancing which takes a lot of time, and sometimes never completes due to the poll thread blocked.</p>\n<p>I am trying to pause and resume Kafka streams which theoretically should not block poll so it should not block rebalancing. What is the ideal programming model to achieve the following? I know this is fairly easy to accomplish when using Kafka consumer model (not streams)</p>\n<ul>\n<li>Start processing a message</li>\n<li>Spawn a new thread to process message</li>\n<li>Pause kafka streams which unblocks poll and do not consume any new messages</li>\n<li>When finished processing message\n<ul>\n<li>Forward message to sink (output topic)</li>\n<li>commit offset and resume streams</li>\n</ul>\n</li>\n</ul>\n<p>I have tried the following. It has multiple problems:</p>\n<ul>\n<li>When kafka streams is paused, forward is hanged forever</li>\n<li>If I resume streams and then forward, it is not hanged but no message in output topic</li>\n</ul>\n<p>'''\npublic class Test1 {</p>\n<pre><code>static KafkaStreams streams;\npublic static void main(String[] args) {\n    // Set up the configuration properties\n    Properties config = new Properties();\n    config.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;my-streams-app&quot;);\n    config.put(ConsumerConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;localhost:9092&quot;);\n    config.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n\n    config.put(StreamsConfig.DEFAULT_KEY_SERDE_CLASS_CONFIG, Serdes.String().getClass());\n    config.put(StreamsConfig.DEFAULT_VALUE_SERDE_CLASS_CONFIG, Serdes.String().getClass());\n    config.put(ConsumerConfig.MAX_POLL_RECORDS_CONFIG, 1);\n    config.put(ConsumerConfig.SESSION_TIMEOUT_MS_CONFIG, 10000);\n    config.put(ConsumerConfig.MAX_POLL_INTERVAL_MS_CONFIG, 180000)\n\n    Topology builder = new Topology();\n\n    // Add a source processor node\n    builder.addSource(&quot;Source&quot;, &quot;input&quot;);\n\n    // Add a processor node\n    builder.addProcessor(&quot;Processor&quot;, MyProcessor::new, &quot;Source&quot;);\n\n  \n    builder.addSink(&quot;sendto&quot;, &quot;output&quot;, Serdes.String().serializer(), Serdes.String().serializer(),&quot;Processor&quot;);\n\n    // Build the topology\n    streams = new KafkaStreams(builder, config);\n\n    // Start the KafkaStreams instance\n    streams.start();\n\n    // Add shutdown hook to gracefully close the KafkaStreams instance\n    Runtime.getRuntime().addShutdownHook(new Thread(streams::close));\n}\n\nstatic class MyProcessor implements Processor&lt;String, String, String, String&gt; {\n    private ProcessorContext context;\n    private ScheduledExecutorService executorService;\n\n    @Override\n    public void init(ProcessorContext context) {\n        this.context = context;\n        this.executorService = Executors.newSingleThreadScheduledExecutor();\n    }\n\n\n    @Override\n    public void process(Record&lt;String, String&gt; record) {\n        System.out.println(&quot;In processing&quot;);\n\n        streams.pause();\n        executorService.schedule(() -&gt; {\n            System.out.println(&quot;Started processing..sleeping&quot;);\n            try {\n                Thread.sleep(10000);\n            } catch (InterruptedException e) {\n                throw new RuntimeException(e);\n            }\n            System.out.println(&quot;OUT processing...&quot;);\n\n            context.forward(new Record&lt;&gt;(&quot;test1&quot;, &quot;value&quot;,1l), &quot;sendto&quot;);\n            context.commit();\n            streams.resume();\n\n        }, 0, TimeUnit.SECONDS);\n    }\n</code></pre>\n<p>'''</p>\n"},{"tags":["java"],"answers":[{"tags":[],"owner":{"account_id":481449,"reputation":1180,"user_id":895295,"accept_rate":50,"display_name":"Leo"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1488452295,"creation_date":1488452295,"answer_id":42553512,"question_id":38857783,"body_markdown":"None of the static MessageFormat.format() implementations accept a Locale as an argument, especially as a last argument, as it would interfere with the Object... signature; the only way to set a locale is in the constructor, so if you are keen to use a static format() method, you would have to &#39;roll your own&#39; somewhere with code similar to this:\r\n\r\n\r\n    public static String format(Locale loc, String pattern, Object ... arguments) \r\n    {\r\n      MessageFormat temp = new MessageFormat(pattern, loc);\r\n      return temp.format(arguments);\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n","title":"MessageFormat Formatting without Default Locale","body":"<p>None of the static MessageFormat.format() implementations accept a Locale as an argument, especially as a last argument, as it would interfere with the Object... signature; the only way to set a locale is in the constructor, so if you are keen to use a static format() method, you would have to 'roll your own' somewhere with code similar to this:</p>\n\n<pre><code>public static String format(Locale loc, String pattern, Object ... arguments) \n{\n  MessageFormat temp = new MessageFormat(pattern, loc);\n  return temp.format(arguments);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":706860,"reputation":9592,"user_id":601844,"display_name":"epox"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691196338,"creation_date":1691196338,"answer_id":76839741,"question_id":38857783,"body_markdown":"Define a `MessageManager` with `private final Local` field\r\n--\r\n    var mf = new MessageFormat(pattern, locale);\r\n    return mf.format(args, new StringBuffer(), null).toString();\r\n\r\n\r\nThis is, defacto, java i18n standard\r\n\r\nReference implementation: https://github.com/apache/tomcat/blob/main/java/org/apache/catalina/tribes/util/StringManager.java#L153,L155\r\n\r\n---\r\n**NOTE:** Avoid calling mf.format(argArray).\r\n\r\nThat would inject the entire array to the placeholder #0 ([src][1])\r\n\r\n\r\n  [1]: https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/text/Format.java#L157","title":"MessageFormat Formatting without Default Locale","body":"<h2>Define a <code>MessageManager</code> with <code>private final Local</code> field</h2>\n<pre><code>var mf = new MessageFormat(pattern, locale);\nreturn mf.format(args, new StringBuffer(), null).toString();\n</code></pre>\n<p>This is, defacto, java i18n standard</p>\n<p>Reference implementation: <a href=\"https://github.com/apache/tomcat/blob/main/java/org/apache/catalina/tribes/util/StringManager.java#L153,L155\" rel=\"nofollow noreferrer\">https://github.com/apache/tomcat/blob/main/java/org/apache/catalina/tribes/util/StringManager.java#L153,L155</a></p>\n<hr />\n<p><strong>NOTE:</strong> Avoid calling mf.format(argArray).</p>\n<p>That would inject the entire array to the placeholder #0 (<a href=\"https://github.com/openjdk-mirror/jdk7u-jdk/blob/master/src/share/classes/java/text/Format.java#L157\" rel=\"nofollow noreferrer\">src</a>)</p>\n"}],"owner":{"account_id":205049,"reputation":73345,"user_id":453596,"accept_rate":76,"display_name":"kamaci"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2143,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1691196338,"creation_date":1470766577,"question_id":38857783,"body_markdown":"I&#39;m trying to fix the errors of forbidden apis. I had an error which says:\r\n\r\n    [forbiddenapis] Forbidden method invocation: java.text.MessageFormat#format(java.lang.String,java.lang.Object[]) [Uses default locale]\r\n    [forbiddenapis]   in org.a.b.MyClass (MyClass.java:813)    \r\n\r\nWhich points to that:\r\n\r\n    logger.debug(MessageFormat.format(&quot;Added {0} documents&quot;, new Object[] { new Integer(count) }));\r\n\r\nSo, I&#39;ve changed it to that:\r\n\r\n    logger.debug(MessageFormat.format(&quot;Added {0} documents&quot;, new Object[] { new Integer(count) }, Locale.ROOT));\r\n\r\nHowever, error still exists. How can I fix it?","title":"MessageFormat Formatting without Default Locale","body":"<p>I'm trying to fix the errors of forbidden apis. I had an error which says:</p>\n\n<pre><code>[forbiddenapis] Forbidden method invocation: java.text.MessageFormat#format(java.lang.String,java.lang.Object[]) [Uses default locale]\n[forbiddenapis]   in org.a.b.MyClass (MyClass.java:813)    \n</code></pre>\n\n<p>Which points to that:</p>\n\n<pre><code>logger.debug(MessageFormat.format(\"Added {0} documents\", new Object[] { new Integer(count) }));\n</code></pre>\n\n<p>So, I've changed it to that:</p>\n\n<pre><code>logger.debug(MessageFormat.format(\"Added {0} documents\", new Object[] { new Integer(count) }, Locale.ROOT));\n</code></pre>\n\n<p>However, error still exists. How can I fix it?</p>\n"},{"tags":["java","maven","maven-release-plugin"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":1,"creation_date":1578509795,"post_id":59641739,"comment_id":105465729,"body_markdown":"Can you explain the reason for using maven-release-plugin together with ci friendly?","body":"Can you explain the reason for using maven-release-plugin together with ci friendly?"},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1578511189,"post_id":59641739,"comment_id":105466314,"body_markdown":"What would you recommend instead? We used Maven release plugin up to now to release all our projects. Now we are starting to use multi-module projects and I thought that having the version in one place (as `${revision}`) is better than having the version in each and every module. Of course, one can use `versions:set` to set the versions for all modules, but I thought using `${revision}` is the more modern and nicer way.","body":"What would you recommend instead? We used Maven release plugin up to now to release all our projects. Now we are starting to use multi-module projects and I thought that having the version in one place (as <code>${revision}</code>) is better than having the version in each and every module. Of course, one can use <code>versions:set</code> to set the versions for all modules, but I thought using <code>${revision}</code> is the more modern and nicer way."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1578511493,"post_id":59641739,"comment_id":105466427,"body_markdown":"@khmarbaise On the other hand, of course, we could give up using maven-release-plugin, but this means that we need to craft the necessary steps ourselves.","body":"@khmarbaise On the other hand, of course, we could give up using maven-release-plugin, but this means that we need to craft the necessary steps ourselves."},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1578514010,"post_id":59641739,"comment_id":105467468,"body_markdown":"If you like to use `versions:set` does not really make sense in relationship with maven-release-plugin cause this can be configured either automatically (increment last digit) or explicit via parameter. CI friendly is more intended to be used standalone without release plugin like just setting a version from outside (for example via CI tool)...but of course it would make sense to handle the usage in maven-release-plugin as well (currently not the case)...","body":"If you like to use <code>versions:set</code> does not really make sense in relationship with maven-release-plugin cause this can be configured either automatically (increment last digit) or explicit via parameter. CI friendly is more intended to be used standalone without release plugin like just setting a version from outside (for example via CI tool)...but of course it would make sense to handle the usage in maven-release-plugin as well (currently not the case)..."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1578514572,"post_id":59641739,"comment_id":105467700,"body_markdown":"So should I _not_ use the `${revision}` in my version in the multi-module project? At least until the maven release plugin can handle it? For `versions:set`: It did not mean that for the release itself, but when I want to update the version of the project locally. This is easier with `${revision}` because the property is just set in one place.","body":"So should I <i>not</i> use the <code>${revision}</code> in my version in the multi-module project? At least until the maven release plugin can handle it? For <code>versions:set</code>: It did not mean that for the release itself, but when I want to update the version of the project locally. This is easier with <code>${revision}</code> because the property is just set in one place."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1578560753,"post_id":59641739,"comment_id":105480565,"body_markdown":"@khmarbaise Ok, I decided to remove the `${revision}` from my POMs until https://issues.apache.org/jira/browse/MRELEASE-935 is resolved.","body":"@khmarbaise Ok, I decided to remove the <code>${revision}</code> from my POMs until <a href=\"https://issues.apache.org/jira/browse/MRELEASE-935\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/MRELEASE-935</a> is resolved."},{"owner":{"account_id":127944,"reputation":12148,"user_id":325452,"accept_rate":71,"display_name":"ingyhere"},"score":0,"creation_date":1648136669,"post_id":59641739,"comment_id":126553220,"body_markdown":"The concept of the release plugin is fundamentally at odds with CI-friendly versioning. You&#39;re asking the equivalent of how to make a relational database (ACID) act like a No-SQL (BASE) database. How can I make a gas-powered car work like a bicycle? These are fundamentally different approaches.","body":"The concept of the release plugin is fundamentally at odds with CI-friendly versioning. You&#39;re asking the equivalent of how to make a relational database (ACID) act like a No-SQL (BASE) database. How can I make a gas-powered car work like a bicycle? These are fundamentally different approaches."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1648143283,"post_id":59641739,"comment_id":126555998,"body_markdown":"@ingyhere I understand that the release plugin may be not the best choice to build releases on a modern CI system. Nevertheless, when you choose to use the release plugin, using `${revision}` would be useful to avoid the repetition of the version number in each and every module.","body":"@ingyhere I understand that the release plugin may be not the best choice to build releases on a modern CI system. Nevertheless, when you choose to use the release plugin, using <code>${revision}</code> would be useful to avoid the repetition of the version number in each and every module."},{"owner":{"account_id":127944,"reputation":12148,"user_id":325452,"accept_rate":71,"display_name":"ingyhere"},"score":0,"creation_date":1695252181,"post_id":59641739,"comment_id":136001132,"body_markdown":"@JFabianMeier I think you may have been looking for `${project.version}&#39; which is available irrespective of CI Friendly version tooling.","body":"@JFabianMeier I think you may have been looking for `${project.version}&#39; which is available irrespective of CI Friendly version tooling."},{"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"score":0,"creation_date":1695285726,"post_id":59641739,"comment_id":136004895,"body_markdown":"@ingyhere Thanks, but no.","body":"@ingyhere Thanks, but no."}],"answers":[{"comments":[{"owner":{"account_id":127944,"reputation":12148,"user_id":325452,"accept_rate":71,"display_name":"ingyhere"},"score":1,"creation_date":1630345547,"post_id":67012045,"comment_id":121926040,"body_markdown":"Note that if this strategy is used in a multi-module project, using dependencies from any earlier built modules should use `${project.version}` in the `&lt;version&gt;` tag, not `${revision}`. The reference to the project parent or module version should use `${revision}`.","body":"Note that if this strategy is used in a multi-module project, using dependencies from any earlier built modules should use <code>${project.version}</code> in the <code>&lt;version&gt;</code> tag, not <code>${revision}</code>. The reference to the project parent or module version should use <code>${revision}</code>."},{"owner":{"account_id":1438342,"reputation":1896,"user_id":1359231,"display_name":"joshp"},"score":1,"creation_date":1689094441,"post_id":67012045,"comment_id":135163425,"body_markdown":"Very nice answer. Much clearer than the docs. Thanks.","body":"Very nice answer. Much clearer than the docs. Thanks."}],"tags":[],"owner":{"account_id":127944,"reputation":12148,"user_id":325452,"accept_rate":71,"display_name":"ingyhere"},"comment_count":2,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1691194193,"creation_date":1617916865,"answer_id":67012045,"question_id":59641739,"body_markdown":"The CI Friendly version scheme is intended to replace the [Maven Release Plugin][1], *not* complement it. In today&#39;s development world most teams are relying on CI servers for integration testing, performing automated tests and either releasing with continuous delivery or continuous deployment. *The concept of a `SNAPSHOT` is truly limited when everything is potentially a `SNAPSHOT`.*\r\n\r\n[Notably, the Release Plugin executes 4 to 5 times more processes than a properly implemented CI Friendly configuration.][2] Imagine a 50-minute build using the release plugin becoming a 15-minute build using the CI strategy. [Now that&#39;s modernization!][3] \r\n\r\nThe basic idea is that values used in versions will be collected from the [DVCS][4] (`Git`, `SVN`, etc.) and the [CIS][5] (`Jenkins`, `Travis CI`, `GitLab`, etc.) at build time and used to modify or set the POM/release version. These values are things like the build number, the shortened Git hash or anything else. \r\n\r\n**Procedure to implement CI Friendly Maven builds:** \r\n- Maven [supports only a handful of properties][6] in the `&lt;version&gt;` tag. These are `${revision}`, `${changelist}` and `${sha1}`.\r\n- You can either use a hardcoded value and the acceptable properties or just something like `${revision}`. **NOTE:** I now recommend `${revision}`.\r\n- In the `&lt;properties&gt;`, set values to acceptable defaults -- fake values that become clear they are from non-build machines, like `0` for the build number.\r\n- In the `&lt;properties&gt;`, assemble the value for `&lt;revision&gt;`, e.g. the version, from other properties and hardcoded values. For instance, `&lt;revision&gt;1.0.0b${changelist}-${sha1}&lt;/revision&gt;`.\r\n- At build time, use `-D` flags to set the actual values. For instance, the `${BUILD_NUMBER}` value is injected to every Jenkins build -- `-Dchangelist=${BUILD_NUMBER}`.\r\n- You now have the flexibility to change the version number components.\r\n\r\nIn the CI pipelines you can now detect the commit branch and perform releases from `master` by clearing all or some of these values. For instance, feature branches can calculate and add the Git hash. The semantic version is set above -- Developers now own and control it. They must know their code to make changes, and they have the freedom to increment the semantic version. It&#39;s a lot of valuable flexibility. \r\n\r\nThe sound reasoning here, though, is to speed up things and get rid of a heavyweight process that really adds little to no relevant information that ties code to its precise origin. By using CI Friendly versions you will let deployers, testers and sysadmins see the compile number and code commit hash that allows the problem to be precisely correlated to an actual code release. \r\n\r\nIt should be noted that this requires a bit of philosophical flexibility to accept a paradigm shift. Change is good, and ditching the release plugin will make your release pipelines better. \r\n\r\n\r\n  [1]: https://maven.apache.org/maven-release/maven-release-plugin/\r\n  [2]: https://axelfontaine.com/blog/dead-burried.html\r\n  [3]: https://www.socallinuxexpo.org/sites/default/files/presentations/SCaLE-18x-Maven_Renewed_u2.pdf\r\n  [4]: https://en.wikipedia.org/wiki/Distributed_version_control\r\n  [5]: https://en.wikipedia.org/wiki/Continuous_integration\r\n  [6]: https://maven.apache.org/maven-ci-friendly.html","title":"Maven Release Plugin together with cifriendly versions","body":"<p>The CI Friendly version scheme is intended to replace the <a href=\"https://maven.apache.org/maven-release/maven-release-plugin/\" rel=\"nofollow noreferrer\">Maven Release Plugin</a>, <em>not</em> complement it. In today's development world most teams are relying on CI servers for integration testing, performing automated tests and either releasing with continuous delivery or continuous deployment. <em>The concept of a <code>SNAPSHOT</code> is truly limited when everything is potentially a <code>SNAPSHOT</code>.</em></p>\n<p><a href=\"https://axelfontaine.com/blog/dead-burried.html\" rel=\"nofollow noreferrer\">Notably, the Release Plugin executes 4 to 5 times more processes than a properly implemented CI Friendly configuration.</a> Imagine a 50-minute build using the release plugin becoming a 15-minute build using the CI strategy. <a href=\"https://www.socallinuxexpo.org/sites/default/files/presentations/SCaLE-18x-Maven_Renewed_u2.pdf\" rel=\"nofollow noreferrer\">Now that's modernization!</a></p>\n<p>The basic idea is that values used in versions will be collected from the <a href=\"https://en.wikipedia.org/wiki/Distributed_version_control\" rel=\"nofollow noreferrer\">DVCS</a> (<code>Git</code>, <code>SVN</code>, etc.) and the <a href=\"https://en.wikipedia.org/wiki/Continuous_integration\" rel=\"nofollow noreferrer\">CIS</a> (<code>Jenkins</code>, <code>Travis CI</code>, <code>GitLab</code>, etc.) at build time and used to modify or set the POM/release version. These values are things like the build number, the shortened Git hash or anything else.</p>\n<p><strong>Procedure to implement CI Friendly Maven builds:</strong></p>\n<ul>\n<li>Maven <a href=\"https://maven.apache.org/maven-ci-friendly.html\" rel=\"nofollow noreferrer\">supports only a handful of properties</a> in the <code>&lt;version&gt;</code> tag. These are <code>${revision}</code>, <code>${changelist}</code> and <code>${sha1}</code>.</li>\n<li>You can either use a hardcoded value and the acceptable properties or just something like <code>${revision}</code>. <strong>NOTE:</strong> I now recommend <code>${revision}</code>.</li>\n<li>In the <code>&lt;properties&gt;</code>, set values to acceptable defaults -- fake values that become clear they are from non-build machines, like <code>0</code> for the build number.</li>\n<li>In the <code>&lt;properties&gt;</code>, assemble the value for <code>&lt;revision&gt;</code>, e.g. the version, from other properties and hardcoded values. For instance, <code>&lt;revision&gt;1.0.0b${changelist}-${sha1}&lt;/revision&gt;</code>.</li>\n<li>At build time, use <code>-D</code> flags to set the actual values. For instance, the <code>${BUILD_NUMBER}</code> value is injected to every Jenkins build -- <code>-Dchangelist=${BUILD_NUMBER}</code>.</li>\n<li>You now have the flexibility to change the version number components.</li>\n</ul>\n<p>In the CI pipelines you can now detect the commit branch and perform releases from <code>master</code> by clearing all or some of these values. For instance, feature branches can calculate and add the Git hash. The semantic version is set above -- Developers now own and control it. They must know their code to make changes, and they have the freedom to increment the semantic version. It's a lot of valuable flexibility.</p>\n<p>The sound reasoning here, though, is to speed up things and get rid of a heavyweight process that really adds little to no relevant information that ties code to its precise origin. By using CI Friendly versions you will let deployers, testers and sysadmins see the compile number and code commit hash that allows the problem to be precisely correlated to an actual code release.</p>\n<p>It should be noted that this requires a bit of philosophical flexibility to accept a paradigm shift. Change is good, and ditching the release plugin will make your release pipelines better.</p>\n"}],"owner":{"account_id":888714,"reputation":34077,"user_id":927493,"accept_rate":61,"display_name":"J Fabian Meier"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":2429,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":1,"score":6,"last_activity_date":1691194193,"creation_date":1578470992,"question_id":59641739,"body_markdown":"I am just setting up a Maven multi-module project with `${revision}` as version as described in https://maven.apache.org/maven-ci-friendly.html\r\n\r\nThe property `${revision}` is set in the parent POM and used as version number throughout all modules. \r\n\r\nThis works fine for SNAPSHOT builds, but when I run the Maven release plugin, the version gets replaced by something like `1.0.0` and then `1.0.1-SNAPSHOT`. So the cifriendly versions are gone after one release.\r\n\r\nIs there a way to configure the Maven release plugin in a way that cifriendly versions are not destroyed?","title":"Maven Release Plugin together with cifriendly versions","body":"<p>I am just setting up a Maven multi-module project with <code>${revision}</code> as version as described in <a href=\"https://maven.apache.org/maven-ci-friendly.html\" rel=\"noreferrer\">https://maven.apache.org/maven-ci-friendly.html</a></p>\n\n<p>The property <code>${revision}</code> is set in the parent POM and used as version number throughout all modules. </p>\n\n<p>This works fine for SNAPSHOT builds, but when I run the Maven release plugin, the version gets replaced by something like <code>1.0.0</code> and then <code>1.0.1-SNAPSHOT</code>. So the cifriendly versions are gone after one release.</p>\n\n<p>Is there a way to configure the Maven release plugin in a way that cifriendly versions are not destroyed?</p>\n"},{"tags":["java","string","string-interpolation"],"answers":[{"tags":[],"owner":{"account_id":17084800,"reputation":57,"user_id":12362378,"display_name":"Justin"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1657082662,"creation_date":1656696240,"answer_id":72832748,"question_id":72778444,"body_markdown":"As far as I know, you cannot pass an object. so far, my best solution has been passing strings formatted to be like a JSON object, then parsing it into a JSON Object.\r\n\r\nExample\r\n\r\n        \r\n    \r\n    class Main {\r\n      private static String EXT_EVENT = &quot;{&quot; +\r\n                &quot;    \\&quot;version\\&quot;: \\&quot;1.0\\&quot;,&quot; +\r\n                &quot;    \\&quot;method\\&quot;: \\&quot;Event\\&quot;,&quot; +\r\n                &quot;    \\&quot;target\\&quot;: \\&quot;ExamppleTarget\\&quot;,&quot; +\r\n                &quot;    \\&quot;name\\&quot;: \\&quot;OnEventReceived\\&quot;,&quot; +\r\n                &quot;    \\&quot;payload\\&quot;: { \\&quot;header\\&quot;: %1$s,&quot; +\r\n                &quot;                   \\&quot;endpoint\\&quot;: %2$s, &quot; +\r\n                &quot;                   \\&quot;payload\\&quot;: %3$s }&quot; +\r\n                &quot;}&quot;;\r\n      public static void main(String[] args) {\r\n        String example = String.format(EXT_EVENT,&quot;test1&quot;, &quot;test2&quot;, &quot;test3&quot;);\r\n        System.out.println(example);\r\n      }\r\n    }","title":"String Interpolation a json object with %","body":"<p>As far as I know, you cannot pass an object. so far, my best solution has been passing strings formatted to be like a JSON object, then parsing it into a JSON Object.</p>\n<p>Example</p>\n<pre><code>class Main {\n  private static String EXT_EVENT = &quot;{&quot; +\n            &quot;    \\&quot;version\\&quot;: \\&quot;1.0\\&quot;,&quot; +\n            &quot;    \\&quot;method\\&quot;: \\&quot;Event\\&quot;,&quot; +\n            &quot;    \\&quot;target\\&quot;: \\&quot;ExamppleTarget\\&quot;,&quot; +\n            &quot;    \\&quot;name\\&quot;: \\&quot;OnEventReceived\\&quot;,&quot; +\n            &quot;    \\&quot;payload\\&quot;: { \\&quot;header\\&quot;: %1$s,&quot; +\n            &quot;                   \\&quot;endpoint\\&quot;: %2$s, &quot; +\n            &quot;                   \\&quot;payload\\&quot;: %3$s }&quot; +\n            &quot;}&quot;;\n  public static void main(String[] args) {\n    String example = String.format(EXT_EVENT,&quot;test1&quot;, &quot;test2&quot;, &quot;test3&quot;);\n    System.out.println(example);\n  }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":1,"creation_date":1683043145,"post_id":74784866,"comment_id":134304554,"body_markdown":"Note that Java&#160;15 also allows to write `String example = EXT_EVENT.formatted(&quot;test1&quot;, &quot;test2&quot;, &quot;test3&quot;);` And the current state of JEP-430 is that youâll have to prefix the template string with `STR.` to use string interpolation.","body":"Note that Java 15 also allows to write <code>String example = EXT_EVENT.formatted(&quot;test1&quot;, &quot;test2&quot;, &quot;test3&quot;);</code> And the current state of JEP-430 is that youâll have to prefix the template string with <code>STR.</code> to use string interpolation."}],"tags":[],"owner":{"account_id":11726648,"reputation":19553,"user_id":8583692,"display_name":"Mahozad"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1691194184,"creation_date":1670934502,"answer_id":74784866,"question_id":72778444,"body_markdown":"With [Java 15 text blocks][1], it can be simplified a little bit:\r\n\r\n```java\r\nprivate static String EXT_EVENT = &quot;&quot;&quot;\r\n    {\r\n        &quot;version&quot;: &quot;1.0&quot;,\r\n        &quot;method&quot;:  &quot;Event&quot;,\r\n        &quot;target&quot;:  &quot;ExampleTarget&quot;,\r\n        &quot;name&quot;:    &quot;OnEventReceived&quot;,\r\n        &quot;payload&quot;: {\r\n            &quot;header&quot;:   %1$s,\r\n            &quot;endpoint&quot;: %2$s,\r\n            &quot;payload&quot;:  %3$s\r\n        }\r\n    }\r\n&quot;&quot;&quot;;\r\nString example = String.format(EXT_EVENT, &quot;test1&quot;, &quot;test2&quot;, &quot;test3&quot;);\r\n```\r\n\r\nOr even with [Java template strings and string interpolation][2] (to be introduced in Java **21** as a preview feature):\r\n\r\n```java\r\nprivate static String h = &quot;test1&quot;;\r\nprivate static String e = &quot;test2&quot;;\r\nprivate static String p = &quot;test3&quot;;\r\nprivate static String example = STR.&quot;&quot;&quot;\r\n    {\r\n        &quot;version&quot;: &quot;1.0&quot;,\r\n        &quot;method&quot;:  &quot;Event&quot;,\r\n        &quot;target&quot;:  &quot;ExampleTarget&quot;,\r\n        &quot;name&quot;:    &quot;OnEventReceived&quot;,\r\n        &quot;payload&quot;: {\r\n            &quot;header&quot;:   \\{h},\r\n            &quot;endpoint&quot;: \\{e},\r\n            &quot;payload&quot;:  \\{p}\r\n        }\r\n    }\r\n&quot;&quot;&quot;;\r\n```\r\n\r\n\r\n  [1]: https://www.baeldung.com/java-text-blocks\r\n  [2]: https://openjdk.org/jeps/430","title":"String Interpolation a json object with %","body":"<p>With <a href=\"https://www.baeldung.com/java-text-blocks\" rel=\"nofollow noreferrer\">Java 15 text blocks</a>, it can be simplified a little bit:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static String EXT_EVENT = &quot;&quot;&quot;\n    {\n        &quot;version&quot;: &quot;1.0&quot;,\n        &quot;method&quot;:  &quot;Event&quot;,\n        &quot;target&quot;:  &quot;ExampleTarget&quot;,\n        &quot;name&quot;:    &quot;OnEventReceived&quot;,\n        &quot;payload&quot;: {\n            &quot;header&quot;:   %1$s,\n            &quot;endpoint&quot;: %2$s,\n            &quot;payload&quot;:  %3$s\n        }\n    }\n&quot;&quot;&quot;;\nString example = String.format(EXT_EVENT, &quot;test1&quot;, &quot;test2&quot;, &quot;test3&quot;);\n</code></pre>\n<p>Or even with <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">Java template strings and string interpolation</a> (to be introduced in Java <strong>21</strong> as a preview feature):</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static String h = &quot;test1&quot;;\nprivate static String e = &quot;test2&quot;;\nprivate static String p = &quot;test3&quot;;\nprivate static String example = STR.&quot;&quot;&quot;\n    {\n        &quot;version&quot;: &quot;1.0&quot;,\n        &quot;method&quot;:  &quot;Event&quot;,\n        &quot;target&quot;:  &quot;ExampleTarget&quot;,\n        &quot;name&quot;:    &quot;OnEventReceived&quot;,\n        &quot;payload&quot;: {\n            &quot;header&quot;:   \\{h},\n            &quot;endpoint&quot;: \\{e},\n            &quot;payload&quot;:  \\{p}\n        }\n    }\n&quot;&quot;&quot;;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":58050,"reputation":7570,"user_id":173852,"display_name":"mernst"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691187515,"creation_date":1691187515,"answer_id":76839376,"question_id":72778444,"body_markdown":"You can use Java&#39;s String Templates feature.\r\nIt is described in [JEP 430](https://openjdk.org/jeps/430), and it appears in JDK 21 as a preview feature.  Here is an example use that outputs a **String**:\r\n\r\n```java\r\nString name = &quot;Joan&quot;;\r\nString info = STR.&quot;My name is \\{name}&quot;;\r\nassert info.equals(&quot;My name is Joan&quot;);   // true\r\n```\r\n\r\nJava&#39;s string templates are more versatile, and much safer, than features in other languagues such as C#&#39;s string interpolation and Python&#39;s f-strings.  For example, here is a template processor that returns not strings but, rather, instances of **JSONObject**:\r\n\r\n```java\r\nvar JSON = StringTemplate.Processor.of(\r\n        (StringTemplate st) -&gt; new JSONObject(st.interpolate())\r\n    );\r\n\r\nString name    = &quot;Joan Smith&quot;;\r\nString phone   = &quot;555-123-4567&quot;;\r\nString address = &quot;1 Maple Drive, Anytown&quot;;\r\nJSONObject doc = JSON.&quot;&quot;&quot;\r\n    {\r\n        &quot;name&quot;:    &quot;\\{name}&quot;,\r\n        &quot;phone&quot;:   &quot;\\{phone}&quot;,\r\n        &quot;address&quot;: &quot;\\{address}&quot;\r\n    };\r\n    &quot;&quot;&quot;;\r\n```","title":"String Interpolation a json object with %","body":"<p>You can use Java's String Templates feature.\nIt is described in <a href=\"https://openjdk.org/jeps/430\" rel=\"nofollow noreferrer\">JEP 430</a>, and it appears in JDK 21 as a preview feature.  Here is an example use that outputs a <strong>String</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String name = &quot;Joan&quot;;\nString info = STR.&quot;My name is \\{name}&quot;;\nassert info.equals(&quot;My name is Joan&quot;);   // true\n</code></pre>\n<p>Java's string templates are more versatile, and much safer, than features in other languagues such as C#'s string interpolation and Python's f-strings.  For example, here is a template processor that returns not strings but, rather, instances of <strong>JSONObject</strong>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>var JSON = StringTemplate.Processor.of(\n        (StringTemplate st) -&gt; new JSONObject(st.interpolate())\n    );\n\nString name    = &quot;Joan Smith&quot;;\nString phone   = &quot;555-123-4567&quot;;\nString address = &quot;1 Maple Drive, Anytown&quot;;\nJSONObject doc = JSON.&quot;&quot;&quot;\n    {\n        &quot;name&quot;:    &quot;\\{name}&quot;,\n        &quot;phone&quot;:   &quot;\\{phone}&quot;,\n        &quot;address&quot;: &quot;\\{address}&quot;\n    };\n    &quot;&quot;&quot;;\n</code></pre>\n"}],"owner":{"account_id":17084800,"reputation":57,"user_id":12362378,"display_name":"Justin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":626,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":72832748,"answer_count":3,"score":0,"last_activity_date":1691194184,"creation_date":1656365001,"question_id":72778444,"body_markdown":"I am trying to send a custom payload to a String in Java. In this case, a JSON Object.\r\n\r\nOrdinarily, if I wanted to send a decimal to a string I might do something like this\r\n\r\n```java\r\nString myDecimal = &quot;my decimal is %d&quot;;\r\nSystem.out.println(String.format(myDecimal, 20)); // print &quot;my decimal is 20)\r\n```\r\n\r\nHowever, instead of sending a decimal, or a string (%s), I would like to send a JSON object. Is this possible, if so how?\r\n","title":"String Interpolation a json object with %","body":"<p>I am trying to send a custom payload to a String in Java. In this case, a JSON Object.</p>\n<p>Ordinarily, if I wanted to send a decimal to a string I might do something like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>String myDecimal = &quot;my decimal is %d&quot;;\nSystem.out.println(String.format(myDecimal, 20)); // print &quot;my decimal is 20)\n</code></pre>\n<p>However, instead of sending a decimal, or a string (%s), I would like to send a JSON object. Is this possible, if so how?</p>\n"},{"tags":["java","apache-kafka","apache-kafka-streams","kafka-topic"],"answers":[{"tags":[],"owner":{"account_id":6384814,"reputation":60273,"user_id":4953079,"display_name":"Matthias J. Sax"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691193027,"creation_date":1691193027,"answer_id":76839635,"question_id":76801676,"body_markdown":"To do a proper join, you would need to modify the key before the join, eg, via `selectKey` or `map` to remove the row number. If you don&#39;t need the row number in the output, it&#39;s simplest to use `selecKey` and just drop it. If you need the row number in the output, you would need to use map, and move it from the key into the value (you can put it back from the value into the key, using another `map` after the join).\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    KStream left = builder.stream(...).selectKey(...);\r\n    KStream right = builder.stream(...).selectKey(...);\r\n    KStream result = left.join(right, ...);","title":"Joining two Java KStreams (Kafka Topics) with &quot;nearly&quot; identical keys","body":"<p>To do a proper join, you would need to modify the key before the join, eg, via <code>selectKey</code> or <code>map</code> to remove the row number. If you don't need the row number in the output, it's simplest to use <code>selecKey</code> and just drop it. If you need the row number in the output, you would need to use map, and move it from the key into the value (you can put it back from the value into the key, using another <code>map</code> after the join).</p>\n<pre class=\"lang-java prettyprint-override\"><code>KStream left = builder.stream(...).selectKey(...);\nKStream right = builder.stream(...).selectKey(...);\nKStream result = left.join(right, ...);\n</code></pre>\n"}],"owner":{"account_id":29126716,"reputation":11,"user_id":22312869,"display_name":"klimzera"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":39,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691193027,"creation_date":1690790136,"question_id":76801676,"body_markdown":"i have two kafka topics containing different information to a &quot;Warning Event&quot;.\r\nTo know what entries in Topic A and B correspond to one another, i have to compare the serial, date and machine form the Key and then join on the &#39;no&#39;\r\n\r\nIMPORTNANT: The row_number can be different (see example below)\r\n\r\n**Topic A** contains values like this:\r\n\r\nkey: `{&quot;serial&quot;:187,&quot;date&quot;:&quot;11/16/2022&quot;,&quot;row&quot;:0,&quot;machine&quot;:&quot;Blue&quot;}`\r\n\r\nvalue: `{\r\n  &quot;no&quot;: 1,\r\n  &quot;frequency&quot;: 0\r\n}`\r\n\r\n**Topic B** contains value like this:\r\n\r\nkey: `{&quot;serial&quot;:187,&quot;date&quot;:&quot;11/16/2022&quot;,&quot;row&quot;:99,&quot;machine&quot;:&quot;Blue&quot;}`\r\n\r\nvalue: `{\r\n  &quot;warning&quot;: &quot;Emergency&quot;,\r\n  &quot;no&quot;: 1\r\n}\r\n`\r\n\r\nMy desired output **Topic C** combines the two information through the &#39;no&#39;:\r\n\r\nkey: `{&quot;serial&quot;:187,&quot;date&quot;:&quot;11/16/2022&quot;,&quot;row&quot;:0,&quot;machine&quot;:&quot;Blue&quot;}`\r\n\r\nvalue: `{\r\n  &quot;no&quot;: 1,\r\n  &quot;frequency&quot;: 0,\r\n  &quot;warning&quot;: &quot;Emergency!&quot;\r\n}`\r\n\r\nIt should be basically Topic A (with the same key but with the addition of the warning name (clear text) from Topic B.\r\n\r\nI am a complete noob to Kafka so i have been struggling for a long time now on this problem.\r\n\r\nI tried to use KStream.innerJoints but it is difficult to get the join when one part of the key (row_number) does not have to be the same.","title":"Joining two Java KStreams (Kafka Topics) with &quot;nearly&quot; identical keys","body":"<p>i have two kafka topics containing different information to a &quot;Warning Event&quot;.\nTo know what entries in Topic A and B correspond to one another, i have to compare the serial, date and machine form the Key and then join on the 'no'</p>\n<p>IMPORTNANT: The row_number can be different (see example below)</p>\n<p><strong>Topic A</strong> contains values like this:</p>\n<p>key: <code>{&quot;serial&quot;:187,&quot;date&quot;:&quot;11/16/2022&quot;,&quot;row&quot;:0,&quot;machine&quot;:&quot;Blue&quot;}</code></p>\n<p>value: <code>{ &quot;no&quot;: 1, &quot;frequency&quot;: 0 }</code></p>\n<p><strong>Topic B</strong> contains value like this:</p>\n<p>key: <code>{&quot;serial&quot;:187,&quot;date&quot;:&quot;11/16/2022&quot;,&quot;row&quot;:99,&quot;machine&quot;:&quot;Blue&quot;}</code></p>\n<p>value: <code>{ &quot;warning&quot;: &quot;Emergency&quot;, &quot;no&quot;: 1 } </code></p>\n<p>My desired output <strong>Topic C</strong> combines the two information through the 'no':</p>\n<p>key: <code>{&quot;serial&quot;:187,&quot;date&quot;:&quot;11/16/2022&quot;,&quot;row&quot;:0,&quot;machine&quot;:&quot;Blue&quot;}</code></p>\n<p>value: <code>{ &quot;no&quot;: 1, &quot;frequency&quot;: 0, &quot;warning&quot;: &quot;Emergency!&quot; }</code></p>\n<p>It should be basically Topic A (with the same key but with the addition of the warning name (clear text) from Topic B.</p>\n<p>I am a complete noob to Kafka so i have been struggling for a long time now on this problem.</p>\n<p>I tried to use KStream.innerJoints but it is difficult to get the join when one part of the key (row_number) does not have to be the same.</p>\n"},{"tags":["java","selenium","selenium-webdriver","automation"],"answers":[{"comments":[{"owner":{"account_id":3200009,"reputation":7174,"user_id":2702249,"accept_rate":57,"display_name":"Om Sao"},"score":15,"creation_date":1504101382,"post_id":38327317,"comment_id":78883289,"body_markdown":"There are instances when `element.isDisplayed() &amp;&amp; element.isEnabled()` will return `true` but still element will not be clickable, because Element is hidden/overlapped by some other element. In such case, Exception caught is: `org.openqa.selenium.WebDriverException: unknown error: Element is not clickable at point (781, 704). Other element would receive the click: &lt;div class=&quot;footer&quot;&gt;...&lt;/div&gt;`","body":"There are instances when <code>element.isDisplayed() &amp;&amp; element.isEnabled()</code> will return <code>true</code> but still element will not be clickable, because Element is hidden/overlapped by some other element. In such case, Exception caught is: <code>org.openqa.selenium.WebDriverException: unknown error: Element is not clickable at point (781, 704). Other element would receive the click: &lt;div class=&quot;footer&quot;&gt;...&lt;&#47;div&gt;</code>"}],"tags":[],"owner":{"account_id":6701767,"reputation":47952,"user_id":5168011,"accept_rate":100,"display_name":"Guy"},"comment_count":1,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1468322143,"creation_date":1468322143,"answer_id":38327317,"question_id":38327049,"body_markdown":"`wait.until(ExpectedConditions)` won&#39;t return null, it will either meet the condition or throw `TimeoutException`.\r\n\r\nYou can check if the element is displayed and enabled\r\n\r\n    WebElement element = driver.findElement(By.xpath);\r\n    if (element.isDisplayed() &amp;&amp; element.isEnabled()) {\r\n        element.click();\r\n    }","title":"Check if element is clickable in Selenium Java","body":"<p><code>wait.until(ExpectedConditions)</code> won't return null, it will either meet the condition or throw <code>TimeoutException</code>.</p>\n\n<p>You can check if the element is displayed and enabled</p>\n\n<pre><code>WebElement element = driver.findElement(By.xpath);\nif (element.isDisplayed() &amp;&amp; element.isEnabled()) {\n    element.click();\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":8803596,"reputation":313,"user_id":6578986,"display_name":"Sandeep Krishnappa"},"score":0,"creation_date":1468328493,"post_id":38327476,"comment_id":64073758,"body_markdown":"So should I use listeners? to check any event on the label","body":"So should I use listeners? to check any event on the label"},{"owner":{"account_id":3854050,"reputation":23587,"user_id":3193455,"accept_rate":94,"display_name":"Saurabh Gaur"},"score":0,"creation_date":1468329360,"post_id":38327476,"comment_id":64074444,"body_markdown":"@SandeepKrishnappa No need, You should try to perform click first on browser console at label using javascript..and verify it receives any click event or not...if receives then definitely it will click by selenium..","body":"@SandeepKrishnappa No need, You should try to perform click first on browser console at label using javascript..and verify it receives any click event or not...if receives then definitely it will click by selenium.."},{"owner":{"account_id":1651157,"reputation":156,"user_id":1521751,"display_name":"armani"},"score":0,"creation_date":1584641953,"post_id":38327476,"comment_id":107506178,"body_markdown":"@SaurabhGaur - I have a similar question. I was wondering if you could answer it for me? thank you. https://stackoverflow.com/questions/60762906/selenium-is-it-okay-to-mix-implicit-wait-and-explicit-wait-like-this","body":"@SaurabhGaur - I have a similar question. I was wondering if you could answer it for me? thank you. <a href=\"https://stackoverflow.com/questions/60762906/selenium-is-it-okay-to-mix-implicit-wait-and-explicit-wait-like-this\" title=\"selenium is it okay to mix implicit wait and explicit wait like this\">stackoverflow.com/questions/60762906/&hellip;</a>"}],"tags":[],"owner":{"account_id":3854050,"reputation":23587,"user_id":3193455,"accept_rate":94,"display_name":"Saurabh Gaur"},"comment_count":3,"down_vote_count":1,"up_vote_count":37,"is_accepted":false,"score":36,"last_activity_date":1468340728,"creation_date":1468322574,"answer_id":38327476,"question_id":38327049,"body_markdown":"[`elementToBeClickable`][1] is used for checking an element is visible and enabled such that you can click it. \r\n\r\n`ExpectedConditions.elementToBeClickable` returns [`WebElement`][2] if expected condition is true otherwise it will throw [`TimeoutException`][3], It never returns `null`.\r\n\r\nSo if your using `ExpectedConditions.elementToBeClickable` to find an element which will **always gives you the clickable element**, so no need to check for `null` condition, you should try as below :-\r\n\r\n    WebDriverWait wait = new WebDriverWait(Scenario1Test.driver, 10); \r\n    WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id=&#39;brandSlider&#39;]/div[1]/div/div/div/img)[50]&quot;)));\r\n    element.click();\r\n\r\nAs you are saying `element.click()` passes both on `link` and `label` that&#39;s doesn&#39;t mean element is not clickable, it means returned element `clicked` but may be there is no event performs on element by click action.\r\n\r\n**Note**:- I&#39;m suggesting you always try first to find elements by `id`, `name`, `className` and other locator. if you faced some difficulty to find then use `cssSelector` and always give last priority to `xpath` locator because it is slower than other locator to locate an element.\r\n\r\nHope it helps you..:)\r\n\r\n\r\n  [1]: https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#elementToBeClickable-org.openqa.selenium.By-\r\n  [2]: https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebElement.html\r\n  [3]: https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/TimeoutException.html","title":"Check if element is clickable in Selenium Java","body":"<p><a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#elementToBeClickable-org.openqa.selenium.By-\" rel=\"noreferrer\"><code>elementToBeClickable</code></a> is used for checking an element is visible and enabled such that you can click it. </p>\n\n<p><code>ExpectedConditions.elementToBeClickable</code> returns <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/WebElement.html\" rel=\"noreferrer\"><code>WebElement</code></a> if expected condition is true otherwise it will throw <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/TimeoutException.html\" rel=\"noreferrer\"><code>TimeoutException</code></a>, It never returns <code>null</code>.</p>\n\n<p>So if your using <code>ExpectedConditions.elementToBeClickable</code> to find an element which will <strong>always gives you the clickable element</strong>, so no need to check for <code>null</code> condition, you should try as below :-</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(Scenario1Test.driver, 10); \nWebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.xpath(\"(//div[@id='brandSlider']/div[1]/div/div/div/img)[50]\")));\nelement.click();\n</code></pre>\n\n<p>As you are saying <code>element.click()</code> passes both on <code>link</code> and <code>label</code> that's doesn't mean element is not clickable, it means returned element <code>clicked</code> but may be there is no event performs on element by click action.</p>\n\n<p><strong>Note</strong>:- I'm suggesting you always try first to find elements by <code>id</code>, <code>name</code>, <code>className</code> and other locator. if you faced some difficulty to find then use <code>cssSelector</code> and always give last priority to <code>xpath</code> locator because it is slower than other locator to locate an element.</p>\n\n<p>Hope it helps you..:)</p>\n"},{"tags":[],"owner":{"account_id":11161747,"reputation":19,"user_id":8191614,"display_name":"Leo Zhao"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1691192945,"creation_date":1498011605,"answer_id":44665841,"question_id":38327049,"body_markdown":"From the source code you will be able to view that, `ExpectedConditions.elementToBeClickable()`, it will judge the element visible and enabled, so you can use `isEnabled()` together with `isDisplayed()`. Following is the source code.\r\n\r\n&lt;!-- language: java --&gt;\r\n\r\n    public static ExpectedCondition&lt;WebElement&gt; elementToBeClickable(final WebElement element) {\r\n    \t\treturn new ExpectedCondition() {\r\n    \t\t\tpublic WebElement apply(WebDriver driver) {\r\n    \t\t\t\tWebElement visibleElement = (WebElement) ExpectedConditions.visibilityOf(element).apply(driver);\r\n\r\n    \t\t\t\ttry {\r\n    \t\t\t\t\treturn visibleElement != null &amp;&amp; visibleElement.isEnabled() ? visibleElement : null;\r\n    \t\t\t\t} catch (StaleElementReferenceException arg3) {\r\n    \t\t\t\t\treturn null;\r\n    \t\t\t\t}\r\n    \t\t\t}\r\n\r\n    \t\t\tpublic String toString() {\r\n    \t\t\t\treturn &quot;element to be clickable: &quot; + element;\r\n    \t\t\t}\r\n    \t\t};\r\n    \t}\r\n\r\n&lt;!-- end snippet --&gt;\r\n","title":"Check if element is clickable in Selenium Java","body":"<p>From the source code you will be able to view that, <code>ExpectedConditions.elementToBeClickable()</code>, it will judge the element visible and enabled, so you can use <code>isEnabled()</code> together with <code>isDisplayed()</code>. Following is the source code.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static ExpectedCondition&lt;WebElement&gt; elementToBeClickable(final WebElement element) {\n        return new ExpectedCondition() {\n            public WebElement apply(WebDriver driver) {\n                WebElement visibleElement = (WebElement) ExpectedConditions.visibilityOf(element).apply(driver);\n\n                try {\n                    return visibleElement != null &amp;&amp; visibleElement.isEnabled() ? visibleElement : null;\n                } catch (StaleElementReferenceException arg3) {\n                    return null;\n                }\n            }\n\n            public String toString() {\n                return &quot;element to be clickable: &quot; + element;\n            }\n        };\n    }\n</code></pre>\n\n"},{"comments":[{"owner":{"account_id":12411624,"reputation":5587,"user_id":9043475,"display_name":"Rajagopalan"},"score":2,"creation_date":1533229475,"post_id":46315984,"comment_id":90281287,"body_markdown":"This is exactly true, most of the people are not aware of this fact!","body":"This is exactly true, most of the people are not aware of this fact!"},{"owner":{"account_id":9207703,"reputation":28723,"user_id":9444073,"display_name":"cruisepandey"},"score":0,"creation_date":1533230303,"post_id":46315984,"comment_id":90281671,"body_markdown":"@Rajagopalan : Exactly , your element should be visible in UI and there should not be any overlay.","body":"@Rajagopalan : Exactly , your element should be visible in UI and there should not be any overlay."},{"owner":{"account_id":12411624,"reputation":5587,"user_id":9043475,"display_name":"Rajagopalan"},"score":0,"creation_date":1533230558,"post_id":46315984,"comment_id":90281797,"body_markdown":"@cruisepandey visible and enable is not enough to know whether element is clickable, that&#39;s why elementToBeClickable fails in our last question we discussed, here this user explains the same in his answer.","body":"@cruisepandey visible and enable is not enough to know whether element is clickable, that&#39;s why elementToBeClickable fails in our last question we discussed, here this user explains the same in his answer."},{"owner":{"account_id":12411624,"reputation":5587,"user_id":9043475,"display_name":"Rajagopalan"},"score":0,"creation_date":1533230737,"post_id":46315984,"comment_id":90281883,"body_markdown":"@cruisepandey Read his answer more clearly he explains that `element.isDisplayed() &amp;&amp; element.isEnabled() will return true but still element will not be clickable`","body":"@cruisepandey Read his answer more clearly he explains that <code>element.isDisplayed() &amp;&amp; element.isEnabled() will return true but still element will not be clickable</code>"},{"owner":{"account_id":4379909,"reputation":1754,"user_id":7304372,"accept_rate":100,"display_name":"dÇÉ¥ÉS ÊoÄ±××Æ"},"score":0,"creation_date":1558518711,"post_id":46315984,"comment_id":99125094,"body_markdown":"I&#39;m trying to recreate this with another library, but I&#39;m not sure I understand how it works. Can you explain your solution a little?","body":"I&#39;m trying to recreate this with another library, but I&#39;m not sure I understand how it works. Can you explain your solution a little?"},{"owner":{"account_id":3126484,"reputation":6129,"user_id":2645243,"accept_rate":88,"display_name":"Lukas K"},"score":3,"creation_date":1581692360,"post_id":46315984,"comment_id":106532774,"body_markdown":"This is true and probably works in most cases but it is not the proper way of handling the problems. First - click by javascript is not the same as click by mouse - there might be some differences causing unreliable test results. Second - if the element is overlapped and not clickable - it means user cannot click it either - therefor it is correct when the test fails with an exception, as the user could not do the action either.","body":"This is true and probably works in most cases but it is not the proper way of handling the problems. First - click by javascript is not the same as click by mouse - there might be some differences causing unreliable test results. Second - if the element is overlapped and not clickable - it means user cannot click it either - therefor it is correct when the test fails with an exception, as the user could not do the action either."}],"tags":[],"owner":{"account_id":11807254,"reputation":261,"user_id":8639449,"display_name":"user8639449"},"comment_count":6,"down_vote_count":0,"up_vote_count":26,"is_accepted":false,"score":26,"last_activity_date":1554539156,"creation_date":1505893092,"answer_id":46315984,"question_id":38327049,"body_markdown":"There are instances when `element.isDisplayed() &amp;&amp; element.isEnabled()` will return `true` but still element will **not** be clickable, because it is hidden/overlapped by some other element. \r\n\r\nIn such case, `Exception` caught is: \r\n  \r\n\r\n&gt; org.openqa.selenium.WebDriverException: unknown error: Element is not\r\n&gt; clickable at point (781, 704). Other element would receive the click:\r\n&gt; `&lt;div class=&quot;footer&quot;&gt;...&lt;/div&gt;` \r\n\r\nUse this code instead:\r\n\r\n    WebElement  element=driver.findElement(By.xpath&quot;&quot;);\t \r\n    JavascriptExecutor ex=(JavascriptExecutor)driver;\r\n    ex.executeScript(&quot;arguments[0].click()&quot;, element);\r\n\r\nIt will work.","title":"Check if element is clickable in Selenium Java","body":"<p>There are instances when <code>element.isDisplayed() &amp;&amp; element.isEnabled()</code> will return <code>true</code> but still element will <strong>not</strong> be clickable, because it is hidden/overlapped by some other element. </p>\n\n<p>In such case, <code>Exception</code> caught is: </p>\n\n<blockquote>\n  <p>org.openqa.selenium.WebDriverException: unknown error: Element is not\n  clickable at point (781, 704). Other element would receive the click:\n  <code>&lt;div class=\"footer\"&gt;...&lt;/div&gt;</code> </p>\n</blockquote>\n\n<p>Use this code instead:</p>\n\n<pre><code>WebElement  element=driver.findElement(By.xpath\"\");  \nJavascriptExecutor ex=(JavascriptExecutor)driver;\nex.executeScript(\"arguments[0].click()\", element);\n</code></pre>\n\n<p>It will work.</p>\n"},{"tags":[],"owner":{"account_id":14245876,"reputation":9,"user_id":10290970,"display_name":"Abhishek Kumar Singh"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1567167495,"creation_date":1567167495,"answer_id":57726618,"question_id":38327049,"body_markdown":"    List&lt;WebElement&gt; wb=driver.findElements(By.xpath(newXpath));\r\n\t\t\tfor(WebElement we: wb){\r\n\t\t\t\tif(we.isDisplayed() &amp;&amp; we.isEnabled())\r\n\t\t\t\t{\r\n\t\t\t\t\twe.click();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}","title":"Check if element is clickable in Selenium Java","body":"<pre><code>List&lt;WebElement&gt; wb=driver.findElements(By.xpath(newXpath));\n        for(WebElement we: wb){\n            if(we.isDisplayed() &amp;&amp; we.isEnabled())\n            {\n                we.click();\n                break;\n            }\n        }\n    }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1651157,"reputation":156,"user_id":1521751,"display_name":"armani"},"score":0,"creation_date":1584641998,"post_id":60485028,"comment_id":107506203,"body_markdown":"DebanjanB - I have a similar question here. Could you please answer it for me? Thank you. https://stackoverflow.com/questions/60762906/selenium-is-it-okay-to-mix-implicit-wait-and-explicit-wait-like-this","body":"DebanjanB - I have a similar question here. Could you please answer it for me? Thank you. <a href=\"https://stackoverflow.com/questions/60762906/selenium-is-it-okay-to-mix-implicit-wait-and-explicit-wait-like-this\" title=\"selenium is it okay to mix implicit wait and explicit wait like this\">stackoverflow.com/questions/60762906/&hellip;</a>"}],"tags":[],"owner":{"account_id":10049107,"reputation":186647,"user_id":7429447,"accept_rate":86,"display_name":"undetected Selenium"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1600172550,"creation_date":1583137949,"answer_id":60485028,"question_id":38327049,"body_markdown":"There are certain things you have to take care:\r\n\r\n- [WebDriverWait](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html) inconjunction with [ExpectedConditions](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html) as [elementToBeClickable()](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#elementToBeClickable-org.openqa.selenium.By-) returns the [WebElement](https://stackoverflow.com/questions/52782684/what-is-the-difference-between-webdriver-and-webelement-in-selenium/52805139#52805139) once it is _located_ and _clickable_ i.e. **visible** and **enabled**.\r\n- In this process, [WebDriverWait](https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html) will ignore instances of `NotFoundException` that are encountered by default in the `until` condition.\r\n- Once the duration of the _wait_ expires on the desired element not being _located_ and _clickable_, will throw a timeout exception.\r\n- The different approach to address this issue are:\r\n  - To invoke `click()` as soon as the element is returned, you can use:\r\n \r\n\t    new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id=&#39;brandSlider&#39;]/div[1]/div/div/div/img)[50]&quot;))).click();\r\n \r\n  - To simply validate if the element is _located_ and _clickable_, wrap up the _WebDriverWait_ in a `try-catch{}` block as follows:\r\n \r\n\t\ttry {\r\n\t\t\t   new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id=&#39;brandSlider&#39;]/div[1]/div/div/div/img)[50]&quot;)));\r\n\t\t\t   System.out.println(&quot;Element is clickable&quot;);\r\n\t\t\t }\r\n\t\tcatch(TimeoutException e) {\r\n\t\t\t   System.out.println(&quot;Element isn&#39;t clickable&quot;);\r\n\t\t\t}\r\n\t\t\t\r\n  - If _WebDriverWait_ returns the _located_ and _clickable_ element but the element is still not clickable, you need to invoke `executeScript()` method as follows:\r\n \r\n\t\tWebElement element = new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id=&#39;brandSlider&#39;]/div[1]/div/div/div/img)[50]&quot;))); \r\n\t\t((JavascriptExecutor)driver).executeScript(&quot;arguments[0].click();&quot;, element);","title":"Check if element is clickable in Selenium Java","body":"<p>There are certain things you have to take care:</p>\n<ul>\n<li><a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html\" rel=\"nofollow noreferrer\">WebDriverWait</a> inconjunction with <a href=\"https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html\" rel=\"nofollow noreferrer\">ExpectedConditions</a> as <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#elementToBeClickable-org.openqa.selenium.By-\" rel=\"nofollow noreferrer\">elementToBeClickable()</a> returns the <a href=\"https://stackoverflow.com/questions/52782684/what-is-the-difference-between-webdriver-and-webelement-in-selenium/52805139#52805139\">WebElement</a> once it is <em>located</em> and <em>clickable</em> i.e. <strong>visible</strong> and <strong>enabled</strong>.</li>\n<li>In this process, <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait.html\" rel=\"nofollow noreferrer\">WebDriverWait</a> will ignore instances of <code>NotFoundException</code> that are encountered by default in the <code>until</code> condition.</li>\n<li>Once the duration of the <em>wait</em> expires on the desired element not being <em>located</em> and <em>clickable</em>, will throw a timeout exception.</li>\n<li>The different approach to address this issue are:\n<ul>\n<li><p>To invoke <code>click()</code> as soon as the element is returned, you can use:</p>\n<pre><code>new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id='brandSlider']/div[1]/div/div/div/img)[50]&quot;))).click();\n</code></pre>\n</li>\n<li><p>To simply validate if the element is <em>located</em> and <em>clickable</em>, wrap up the <em>WebDriverWait</em> in a <code>try-catch{}</code> block as follows:</p>\n<pre><code>try {\n       new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id='brandSlider']/div[1]/div/div/div/img)[50]&quot;)));\n       System.out.println(&quot;Element is clickable&quot;);\n     }\ncatch(TimeoutException e) {\n       System.out.println(&quot;Element isn't clickable&quot;);\n    }\n</code></pre>\n</li>\n<li><p>If <em>WebDriverWait</em> returns the <em>located</em> and <em>clickable</em> element but the element is still not clickable, you need to invoke <code>executeScript()</code> method as follows:</p>\n<pre><code>WebElement element = new WebDriverWait(driver, 10).until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id='brandSlider']/div[1]/div/div/div/img)[50]&quot;))); \n((JavascriptExecutor)driver).executeScript(&quot;arguments[0].click();&quot;, element);\n</code></pre>\n</li>\n</ul>\n</li>\n</ul>\n"},{"tags":[],"owner":{"account_id":15923665,"reputation":19,"user_id":11489886,"display_name":"afaj1c"},"comment_count":0,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1598130349,"creation_date":1598126916,"answer_id":63540657,"question_id":38327049,"body_markdown":"the class attribute contains `disabled` when the element is not clickable.\r\n```lang-java\r\nWebElement webElement = driver.findElement(By.id(&quot;elementId&quot;));\r\nif(!webElement.getAttribute(&quot;class&quot;).contains(&quot;disabled&quot;)){\r\n    webElement.click();\r\n}\r\n```","title":"Check if element is clickable in Selenium Java","body":"<p>the class attribute contains <code>disabled</code> when the element is not clickable.</p>\n<pre class=\"lang-java prettyprint-override\"><code>WebElement webElement = driver.findElement(By.id(&quot;elementId&quot;));\nif(!webElement.getAttribute(&quot;class&quot;).contains(&quot;disabled&quot;)){\n    webElement.click();\n}\n</code></pre>\n"}],"owner":{"account_id":8803596,"reputation":313,"user_id":6578986,"display_name":"Sandeep Krishnappa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":244879,"favorite_count":0,"down_vote_count":0,"up_vote_count":30,"answer_count":7,"score":30,"last_activity_date":1691192945,"creation_date":1468321435,"question_id":38327049,"body_markdown":"I&#39;m new to `Selenium` and need to check if element is clickable in `Selenium` `Java`, since `element.click()` passes both on `link` and `label`.\r\n \r\nI tried using the following code, but it is not working:\r\n\r\n    WebDriverWait wait = new WebDriverWait(Scenario1Test.driver, 10);\r\n    \r\n    if(wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id=&#39;brandSlider&#39;]/div[1]/div/div/div/img)[50]&quot;)))==null)","title":"Check if element is clickable in Selenium Java","body":"<p>I'm new to <code>Selenium</code> and need to check if element is clickable in <code>Selenium</code> <code>Java</code>, since <code>element.click()</code> passes both on <code>link</code> and <code>label</code>.</p>\n<p>I tried using the following code, but it is not working:</p>\n<pre><code>WebDriverWait wait = new WebDriverWait(Scenario1Test.driver, 10);\n\nif(wait.until(ExpectedConditions.elementToBeClickable(By.xpath(&quot;(//div[@id='brandSlider']/div[1]/div/div/div/img)[50]&quot;)))==null)\n</code></pre>\n"},{"tags":["java","maven","intellij-idea","java-platform-module-system"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1691185674,"post_id":76831992,"comment_id":135463088,"body_markdown":"Check the documentation https://logging.apache.org/log4j/2.x/runtime-dependencies.html which shows the module definition etc... also upgrade to most recent version instead of using older versions (https://logging.apache.org/log4j/2.x/release-notes/index.html) also I would recommend to use the bom file (https://logging.apache.org/log4j/2.x/maven-artifacts.html)","body":"Check the documentation <a href=\"https://logging.apache.org/log4j/2.x/runtime-dependencies.html\" rel=\"nofollow noreferrer\">logging.apache.org/log4j/2.x/runtime-dependencies.html</a> which shows the module definition etc... also upgrade to most recent version instead of using older versions (<a href=\"https://logging.apache.org/log4j/2.x/release-notes/index.html\" rel=\"nofollow noreferrer\">logging.apache.org/log4j/2.x/release-notes/index.html</a>) also I would recommend to use the bom file (<a href=\"https://logging.apache.org/log4j/2.x/maven-artifacts.html\" rel=\"nofollow noreferrer\">logging.apache.org/log4j/2.x/maven-artifacts.html</a>)"},{"owner":{"account_id":21923512,"reputation":21,"user_id":16206456,"display_name":"AndreaG"},"score":0,"creation_date":1691191938,"post_id":76831992,"comment_id":135463707,"body_markdown":"I still get the same error, I suspect it&#39;s a problem with JPMS because it works if I delete `module-info.java`","body":"I still get the same error, I suspect it&#39;s a problem with JPMS because it works if I delete <code>module-info.java</code>"},{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1691237318,"post_id":76831992,"comment_id":135466728,"body_markdown":"If you delete `module-info.java` that means you are working with classpath and not with modules anymore... and it looks like you haven&#39;t read the docs because the module name of the `log4j-core` is `org.apache.logging.log4j.core` which is not what you have defined here... what you have defined is the module name of the `log4j-api`... you have to defined both of them...","body":"If you delete <code>module-info.java</code> that means you are working with classpath and not with modules anymore... and it looks like you haven&#39;t read the docs because the module name of the <code>log4j-core</code> is <code>org.apache.logging.log4j.core</code> which is not what you have defined here... what you have defined is the module name of the <code>log4j-api</code>... you have to defined both of them..."}],"answers":[{"comments":[{"owner":{"account_id":21923512,"reputation":21,"user_id":16206456,"display_name":"AndreaG"},"score":0,"creation_date":1691164115,"post_id":76833848,"comment_id":135459512,"body_markdown":"You&#39;re right but even with the correct dependencies, it doesn&#39;t work. As I said it&#39;s not a problem with this specific library, but with every single one I&#39;ve tried so far. I suspect it has to do with JPMS because if I delete `module-info.java` it works flawlessly.","body":"You&#39;re right but even with the correct dependencies, it doesn&#39;t work. As I said it&#39;s not a problem with this specific library, but with every single one I&#39;ve tried so far. I suspect it has to do with JPMS because if I delete <code>module-info.java</code> it works flawlessly."}],"tags":[],"owner":{"account_id":9008386,"reputation":83,"user_id":6714057,"display_name":"Long"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691134456,"creation_date":1691134456,"answer_id":76833848,"question_id":76831992,"body_markdown":"Log4j will not work with only core library. You can try with these dependency :\r\n```\r\n        &lt;properties&gt;\r\n             &lt;log4j.version&gt;2.13.0&lt;/log4j.version&gt;\r\n        &lt;properties&gt;\r\n\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"Maven project: module not found even with correct dependencies","body":"<p>Log4j will not work with only core library. You can try with these dependency :</p>\n<pre><code>        &lt;properties&gt;\n             &lt;log4j.version&gt;2.13.0&lt;/log4j.version&gt;\n        &lt;properties&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-to-slf4j&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;${log4j.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"account_id":21923512,"reputation":21,"user_id":16206456,"display_name":"AndreaG"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":75,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1691192789,"creation_date":1691102545,"question_id":76831992,"body_markdown":"I&#39;m trying to build a Java module with Maven but I keep getting the same error (module not found) with every dependency when I run `mvn compile`. Neither Intellij IDEA nor VSCode give me any error before compiling.\r\n\r\nI think it&#39;s a JPMS proble since if I delete `module-info.java` it works flawlessly. \r\n\r\njava version:openjdk 20.0.2 2023-07-18\r\n\r\nIntelliJ IDEA 2023.1.4 (Community Edition)\r\n\r\nApache Maven 3.8.7\r\n\r\nI built a smaller example which represents the problem, note that I get the same error with other dependencies like jakarta.xml.bind or Docx4J.\r\n```\r\nmyapp\r\n|---pom.xml\r\n|---src/main/java\r\n      |---module-info.java\r\n      |---com/andreagenovese/myapp\r\n           |---Main.java\r\n```\r\nMain.java\r\n\r\n```java\r\npackage com.andreagenovese.myapp;\r\n\r\nimport org.apache.logging.log4j.LogManager;\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        LogManager.getLogger();\r\n    }\r\n}\r\n\r\n```\r\n\r\npom.xml\r\n\r\n```xml\r\n&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\r\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n\r\n    &lt;groupId&gt;com.andreagenovese&lt;/groupId&gt;\r\n    &lt;artifactId&gt;myapp&lt;/artifactId&gt;\r\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\r\n\r\n    &lt;properties&gt;\r\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\r\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\r\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;/properties&gt;\r\n    &lt;dependencies&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\r\n            &lt;version&gt;2.13.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        \r\n         &lt;dependency&gt;\r\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\r\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\r\n            &lt;version&gt;2.13.0&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n&lt;/project&gt;\r\n```\r\nmodule-info.java\r\n\r\n```java\r\nmodule com.andreagenovese.myapp {\r\n    requires org.apache.logging.log4j;\r\n    exports com.andreagenovese.myapp;\r\n}\r\n```\r\n\r\nThe error\r\n\r\n```\r\n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ myapp ---\r\n[INFO] Changes detected - recompiling the module!\r\n[INFO] Compiling 2 source files to /home/geno/Documents/Programmi/Java/myapp/target/classes\r\n[INFO] -------------------------------------------------------------\r\n[ERROR] COMPILATION ERROR : \r\n[INFO] -------------------------------------------------------------\r\n[ERROR] /home/geno/Documents/Programmi/Java/myapp/src/main/java/module-info.java:[2,32] module not found: org.apache.logging.log4j\r\n[INFO] 1 error\r\n[INFO] -------------------------------------------------------------\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] BUILD FAILURE\r\n[INFO] ------------------------------------------------------------------------\r\n[INFO] Total time:  0.816 s\r\n[INFO] Finished at: 2023-08-04T00:32:03+02:00\r\n[INFO] ------------------------------------------------------------------------\r\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project myapp: Compilation failure\r\n[ERROR] /home/geno/Documents/Programmi/Java/myapp/src/main/java/module-info.java:[2,32] module not found: org.apache.logging.log4j\r\n[ERROR] \r\n[ERROR] -&gt; [Help 1]\r\n[ERROR] \r\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\r\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\r\n[ERROR] \r\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\r\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\r\n\r\n```\r\n","title":"Maven project: module not found even with correct dependencies","body":"<p>I'm trying to build a Java module with Maven but I keep getting the same error (module not found) with every dependency when I run <code>mvn compile</code>. Neither Intellij IDEA nor VSCode give me any error before compiling.</p>\n<p>I think it's a JPMS proble since if I delete <code>module-info.java</code> it works flawlessly.</p>\n<p>java version:openjdk 20.0.2 2023-07-18</p>\n<p>IntelliJ IDEA 2023.1.4 (Community Edition)</p>\n<p>Apache Maven 3.8.7</p>\n<p>I built a smaller example which represents the problem, note that I get the same error with other dependencies like jakarta.xml.bind or Docx4J.</p>\n<pre><code>myapp\n|---pom.xml\n|---src/main/java\n      |---module-info.java\n      |---com/andreagenovese/myapp\n           |---Main.java\n</code></pre>\n<p>Main.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.andreagenovese.myapp;\n\nimport org.apache.logging.log4j.LogManager;\n\npublic class Main {\n    public static void main(String[] args) {\n        LogManager.getLogger();\n    }\n}\n\n</code></pre>\n<p>pom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.andreagenovese&lt;/groupId&gt;\n    &lt;artifactId&gt;myapp&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.13.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        \n         &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.13.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p>module-info.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>module com.andreagenovese.myapp {\n    requires org.apache.logging.log4j;\n    exports com.andreagenovese.myapp;\n}\n</code></pre>\n<p>The error</p>\n<pre><code>[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ myapp ---\n[INFO] Changes detected - recompiling the module!\n[INFO] Compiling 2 source files to /home/geno/Documents/Programmi/Java/myapp/target/classes\n[INFO] -------------------------------------------------------------\n[ERROR] COMPILATION ERROR : \n[INFO] -------------------------------------------------------------\n[ERROR] /home/geno/Documents/Programmi/Java/myapp/src/main/java/module-info.java:[2,32] module not found: org.apache.logging.log4j\n[INFO] 1 error\n[INFO] -------------------------------------------------------------\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  0.816 s\n[INFO] Finished at: 2023-08-04T00:32:03+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.1:compile (default-compile) on project myapp: Compilation failure\n[ERROR] /home/geno/Documents/Programmi/Java/myapp/src/main/java/module-info.java:[2,32] module not found: org.apache.logging.log4j\n[ERROR] \n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n\n</code></pre>\n"},{"tags":["java","google-cloud-platform","google-cloud-pubsub"],"comments":[{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1691048624,"post_id":76825416,"comment_id":135439369,"body_markdown":"Did you try to log message in other part of your code? Even if it&#39;s not decoded? The decodedData sound weird for me...","body":"Did you try to log message in other part of your code? Even if it&#39;s not decoded? The decodedData sound weird for me..."},{"owner":{"account_id":4940923,"reputation":1107,"user_id":3977629,"accept_rate":77,"display_name":"Pavanraotk"},"score":0,"creation_date":1691053063,"post_id":76825416,"comment_id":135440300,"body_markdown":"Yes, I logged them, here they are\n\nBytestring log is &lt;ByteString@a9a90b1 size=0 contents=&quot;&quot;&gt;\n\nand another is when I logged the PubsubMessage\nData is {&quot;message&quot;:{&quot;@type&quot;:&quot;type.googleapis.com/google.pubsub.v1.PubsubMessage&quot;,&quot;attributes&quot;:null,&quot;data&quot;:&quot;eyJ0ZW5hbnRJZCI6ImVhYmIzMDM3LTBhZGQtNGY0Ny1hYmJiLTg5OTZlNmVkOGNiMSJ9&quot;,&quot;messageId&quot;:&quot;8085056693470552&quot;,&quot;publishTime&quot;:&quot;2023-08-03T06:04:51.255Z&quot;}}","body":"Yes, I logged them, here they are  Bytestring log is &lt;ByteString@a9a90b1 size=0 contents=&quot;&quot;&gt;  and another is when I logged the PubsubMessage Data is {&quot;message&quot;:{&quot;@type&quot;:&quot;type.googleapis.com/google.pubsub.v1.Pu&zwnj;&#8203;bsubMessage&quot;,&quot;attrib&zwnj;&#8203;utes&quot;:null,&quot;data&quot;:&quot;e&zwnj;&#8203;yJ0ZW5hbnRJZCI6ImVhY&zwnj;&#8203;mIzMDM3LTBhZGQtNGY0N&zwnj;&#8203;y1hYmJiLTg5OTZlNmVkO&zwnj;&#8203;GNiMSJ9&quot;,&quot;messageId&quot;&zwnj;&#8203;:&quot;8085056693470552&quot;,&zwnj;&#8203;&quot;publishTime&quot;:&quot;2023-&zwnj;&#8203;08-03T06:04:51.255Z&quot;&zwnj;&#8203;}}"},{"owner":{"account_id":23157436,"reputation":2052,"user_id":17258510,"display_name":"kiran mathew"},"score":0,"creation_date":1691157707,"post_id":76825416,"comment_id":135457998,"body_markdown":"Can you try again after giving a higher acknowledgement deadline? Are the Subscriber  and Publisher on the same project?","body":"Can you try again after giving a higher acknowledgement deadline? Are the Subscriber  and Publisher on the same project?"},{"owner":{"account_id":4940923,"reputation":1107,"user_id":3977629,"accept_rate":77,"display_name":"Pavanraotk"},"score":0,"creation_date":1691192479,"post_id":76825416,"comment_id":135463765,"body_markdown":"The problem was my misunderstanding of what to deserialize, fixed it, posted code that worked as an answer.\n\nI&#39;m hoping GCP guys fix their documentation, because the above code was from documentation.","body":"The problem was my misunderstanding of what to deserialize, fixed it, posted code that worked as an answer.  I&#39;m hoping GCP guys fix their documentation, because the above code was from documentation."}],"answers":[{"tags":[],"owner":{"account_id":4940923,"reputation":1107,"user_id":3977629,"accept_rate":77,"display_name":"Pavanraotk"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1691192408,"creation_date":1691192408,"answer_id":76839613,"question_id":76825416,"body_markdown":"Okay, the mistake was, after deserializing into PubsubMessage, I had to get the message and from message, I had to get the data as string, which then helped me translate to my object.\r\n\r\nHere&#39;s the code change, I just used JsonELement rather than going with PubsubMessage, this proved successful.\r\n\r\n```\r\npublic void accept(CloudEvent event) throws Exception {\r\n        try {\r\n            String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\r\n            log.info(&quot;Cloud event data is {}&quot;, cloudEventData);\r\n\r\n            Gson gson = new Gson();\r\n\r\n            JsonElement je = gson.fromJson(cloudEventData, JsonElement.class);\r\n            String tenantEncoded = je.getAsJsonObject().get(&quot;message&quot;).getAsJsonObject().get(&quot;data&quot;).getAsString();\r\n            String tenantJson = new String(Base64.getDecoder().decode(xeroTenantEncoded), StandardCharsets.UTF_8);\r\n            log.info(&quot;Xero tenant json is {}&quot;, tenantJson);\r\n            Tenant tenant = gson.fromJson(tenantJson, Tenant.class);\r\n\r\n            log.info(&quot;Decoded message is {}&quot;, xeroTenant);\r\n            if (xeroTenant != null) {\r\n                String tenantId = tenant.getTenantId();\r\n                if (StringUtils.isNotBlank(tenantId)) {\r\n                    log.info(&quot;Tenant Id is {}&quot;, tenantId);\r\n                } else {\r\n                    log.warn(&quot;The tenant Id is empty&quot;);\r\n                }\r\n            } else {\r\n                log.warn(&quot;Xero tenant from the topic is null&quot;);\r\n            }\r\n        } catch (Exception e) {\r\n            log.error(&quot;Error in processing message&quot;, e);\r\n        }\r\n    }\r\n    ","title":"GCP pub/sub, my pulled message is always empty","body":"<p>Okay, the mistake was, after deserializing into PubsubMessage, I had to get the message and from message, I had to get the data as string, which then helped me translate to my object.</p>\n<p>Here's the code change, I just used JsonELement rather than going with PubsubMessage, this proved successful.</p>\n<pre><code>public void accept(CloudEvent event) throws Exception {\n        try {\n            String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\n            log.info(&quot;Cloud event data is {}&quot;, cloudEventData);\n\n            Gson gson = new Gson();\n\n            JsonElement je = gson.fromJson(cloudEventData, JsonElement.class);\n            String tenantEncoded = je.getAsJsonObject().get(&quot;message&quot;).getAsJsonObject().get(&quot;data&quot;).getAsString();\n            String tenantJson = new String(Base64.getDecoder().decode(xeroTenantEncoded), StandardCharsets.UTF_8);\n            log.info(&quot;Xero tenant json is {}&quot;, tenantJson);\n            Tenant tenant = gson.fromJson(tenantJson, Tenant.class);\n\n            log.info(&quot;Decoded message is {}&quot;, xeroTenant);\n            if (xeroTenant != null) {\n                String tenantId = tenant.getTenantId();\n                if (StringUtils.isNotBlank(tenantId)) {\n                    log.info(&quot;Tenant Id is {}&quot;, tenantId);\n                } else {\n                    log.warn(&quot;The tenant Id is empty&quot;);\n                }\n            } else {\n                log.warn(&quot;Xero tenant from the topic is null&quot;);\n            }\n        } catch (Exception e) {\n            log.error(&quot;Error in processing message&quot;, e);\n        }\n    }\n    \n</code></pre>\n"}],"owner":{"account_id":4940923,"reputation":1107,"user_id":3977629,"accept_rate":77,"display_name":"Pavanraotk"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":106,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1691192408,"creation_date":1691044290,"question_id":76825416,"body_markdown":"I have two Google Cloud functions, one that publishes and another that subscribes.\r\n\r\nThis is the code\r\n\r\n```\r\n    public void publisXeroTeannt(XeroTenant xeroTenant) {\r\n        Gson gson = new Gson();\r\n        String xeroTenantMessage = gson.toJson(xeroTenant);\r\n        ByteString byteString = ByteString.copyFrom(xeroTenantMessage, StandardCharsets.UTF_8);\r\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\r\n                .setData(byteString)\r\n                .build();\r\n        log.info(&quot;Data being published in string utf 8 is {}&quot;, pubsubMessage.getData().toStringUtf8());\r\n\r\n        publisher.publish(pubsubMessage);\r\n    }\r\n```\r\nWhen I publish, I can clearly see the log\r\n`The tenant Id being published is f837ea57-feae-4965-92c5-bc1b7cd6b2a0&quot;`\r\n\r\nI have a subscriber\r\n\r\n```\r\n@Override\r\n    public void accept(CloudEvent event) throws Exception {\r\n        try {\r\n            String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\r\n            Gson gson = new Gson();\r\n            PubsubMessage pubsubMessage = gson.fromJson(cloudEventData, PubsubMessage.class);\r\n            String encodedData = pubsubMessage.getData().toStringUtf8();\r\n            String decodedData =\r\n                    new String(Base64.getDecoder().decode(encodedData), StandardCharsets.UTF_8);\r\n            log.info(&quot;Decoded message is {}&quot;, decodedData);\r\n\r\n\r\n        } catch (Exception e) {\r\n            log.error(&quot;Error in processing message&quot;, e);\r\n        }\r\n    }\r\n```\r\n\r\nBut the log always says it&#39;s an empty message \r\n`INFO com.demo.SubscriberFunction - The decoded message is `\r\n\r\nWhat&#39;s wrong here?","title":"GCP pub/sub, my pulled message is always empty","body":"<p>I have two Google Cloud functions, one that publishes and another that subscribes.</p>\n<p>This is the code</p>\n<pre><code>    public void publisXeroTeannt(XeroTenant xeroTenant) {\n        Gson gson = new Gson();\n        String xeroTenantMessage = gson.toJson(xeroTenant);\n        ByteString byteString = ByteString.copyFrom(xeroTenantMessage, StandardCharsets.UTF_8);\n        PubsubMessage pubsubMessage = PubsubMessage.newBuilder()\n                .setData(byteString)\n                .build();\n        log.info(&quot;Data being published in string utf 8 is {}&quot;, pubsubMessage.getData().toStringUtf8());\n\n        publisher.publish(pubsubMessage);\n    }\n</code></pre>\n<p>When I publish, I can clearly see the log\n<code>The tenant Id being published is f837ea57-feae-4965-92c5-bc1b7cd6b2a0&quot;</code></p>\n<p>I have a subscriber</p>\n<pre><code>@Override\n    public void accept(CloudEvent event) throws Exception {\n        try {\n            String cloudEventData = new String(event.getData().toBytes(), StandardCharsets.UTF_8);\n            Gson gson = new Gson();\n            PubsubMessage pubsubMessage = gson.fromJson(cloudEventData, PubsubMessage.class);\n            String encodedData = pubsubMessage.getData().toStringUtf8();\n            String decodedData =\n                    new String(Base64.getDecoder().decode(encodedData), StandardCharsets.UTF_8);\n            log.info(&quot;Decoded message is {}&quot;, decodedData);\n\n\n        } catch (Exception e) {\n            log.error(&quot;Error in processing message&quot;, e);\n        }\n    }\n</code></pre>\n<p>But the log always says it's an empty message\n<code>INFO com.demo.SubscriberFunction - The decoded message is </code></p>\n<p>What's wrong here?</p>\n"},{"tags":["java","selenium","selenium-webdriver","selenium-chromedriver"],"answers":[{"comments":[{"owner":{"account_id":5981952,"reputation":1949,"user_id":5320300,"accept_rate":76,"display_name":"Simon Baars"},"score":4,"creation_date":1491911441,"post_id":34530160,"comment_id":73753225,"body_markdown":"Or you&#39;ll just use File.separator instead of the slashes","body":"Or you&#39;ll just use File.separator instead of the slashes"},{"owner":{"account_id":3860177,"reputation":1801,"user_id":3198105,"display_name":"Orest"},"score":0,"creation_date":1501181145,"post_id":34530160,"comment_id":77678880,"body_markdown":"What if I need to change download path during runtime? I mean set its own path for each test.","body":"What if I need to change download path during runtime? I mean set its own path for each test."},{"owner":{"account_id":449428,"reputation":1002,"user_id":844207,"display_name":"victorvartan"},"score":0,"creation_date":1544466254,"post_id":34530160,"comment_id":94277397,"body_markdown":"Or you could use System.IO.Path.Combine which will add the proper separators depending on the OS","body":"Or you could use System.IO.Path.Combine which will add the proper separators depending on the OS"},{"owner":{"account_id":7920052,"reputation":101,"user_id":5981323,"display_name":"Guna Yuvan"},"score":0,"creation_date":1564061897,"post_id":34530160,"comment_id":100914032,"body_markdown":"@ShubhamJain When i am trying with headless browser in chrome. I don&#39;t see it is working. any clue ?","body":"@ShubhamJain When i am trying with headless browser in chrome. I don&#39;t see it is working. any clue ?"},{"owner":{"account_id":2086183,"reputation":1912,"user_id":1857125,"accept_rate":58,"display_name":"Kenny"},"score":1,"creation_date":1568585029,"post_id":34530160,"comment_id":102309896,"body_markdown":"Is there a way to change download path while on **current session**, similar to how you click Chrome Settings-&gt;Download ? The answer I saw always incur **building new option + new driver + get a whole new session** . I would wish not to close the current session, since my folder separation based on each item in a drop-down list and there&#39;s no need to reload a new page.","body":"Is there a way to change download path while on <b>current session</b>, similar to how you click Chrome Settings-&gt;Download ? The answer I saw always incur <b>building new option + new driver + get a whole new session</b> . I would wish not to close the current session, since my folder separation based on each item in a drop-down list and there&#39;s no need to reload a new page."},{"owner":{"account_id":8404634,"reputation":393,"user_id":6921898,"display_name":"wardaddy"},"score":0,"creation_date":1596192987,"post_id":34530160,"comment_id":111740570,"body_markdown":"Initializing ChromeDriver with Desired capabilities is deprecated. Instead you could just put  `options.setExperimentalOption(&quot;prefs&quot;,chromePrefs); WebDriver driver = new ChromeDriver(options);`","body":"Initializing ChromeDriver with Desired capabilities is deprecated. Instead you could just put  <code>options.setExperimentalOption(&quot;prefs&quot;,chromePrefs); WebDriver driver = new ChromeDriver(options);</code>"},{"owner":{"account_id":12343782,"reputation":95,"user_id":9005765,"display_name":"Gabriel Candia"},"score":0,"creation_date":1623082701,"post_id":34530160,"comment_id":119972004,"body_markdown":"Please note that you must set the FULL path for it to work, at least for me. Something like `new File(&quot;output&quot; + File.separator + &quot;downloads&quot; + File.separator).getAbsolutePath()`","body":"Please note that you must set the FULL path for it to work, at least for me. Something like <code>new File(&quot;output&quot; + File.separator + &quot;downloads&quot; + File.separator).getAbsolutePath()</code>"}],"tags":[],"owner":{"account_id":3849926,"reputation":16804,"user_id":3190347,"accept_rate":68,"display_name":"Shubham Jain"},"comment_count":7,"down_vote_count":0,"up_vote_count":45,"is_accepted":true,"score":45,"last_activity_date":1650895405,"creation_date":1451480789,"answer_id":34530160,"question_id":34515328,"body_markdown":"For Chromedriver try out with:\r\n\r\n    String downloadFilepath = &quot;/path/to/download&quot;;\r\n    HashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\r\n    chromePrefs.put(&quot;profile.default_content_settings.popups&quot;, 0);\r\n    chromePrefs.put(&quot;download.default_directory&quot;, downloadFilepath);\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\r\n    DesiredCapabilities cap = DesiredCapabilities.chrome();\r\n    cap.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);\r\n    cap.setCapability(ChromeOptions.CAPABILITY, options);\r\n    WebDriver driver = new ChromeDriver(cap);\r\n\r\nNote:- Use `File.separator` to handle slashes, it will put syntax as per os it is executing the code.\r\nIn windows you need to use \\\\\\ for path while if you are using linux or mac then use //\r\n\r\nHope this helps. :)","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<p>For Chromedriver try out with:</p>\n<pre><code>String downloadFilepath = &quot;/path/to/download&quot;;\nHashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\nchromePrefs.put(&quot;profile.default_content_settings.popups&quot;, 0);\nchromePrefs.put(&quot;download.default_directory&quot;, downloadFilepath);\nChromeOptions options = new ChromeOptions();\noptions.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\nDesiredCapabilities cap = DesiredCapabilities.chrome();\ncap.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);\ncap.setCapability(ChromeOptions.CAPABILITY, options);\nWebDriver driver = new ChromeDriver(cap);\n</code></pre>\n<p>Note:- Use <code>File.separator</code> to handle slashes, it will put syntax as per os it is executing the code.\nIn windows you need to use \\\\ for path while if you are using linux or mac then use //</p>\n<p>Hope this helps. :)</p>\n"},{"comments":[{"owner":{"account_id":357355,"reputation":2203,"user_id":697473,"accept_rate":85,"display_name":"user697473"},"score":0,"creation_date":1609451430,"post_id":45800488,"comment_id":115848110,"body_markdown":"A note for those using Windows: the &quot;download.default_directory&quot; string must use backslashes (\\\\), not regular slashes (/).","body":"A note for those using Windows: the &quot;download.default_directory&quot; string must use backslashes (\\&#41;, not regular slashes (/)."}],"tags":[],"owner":{"account_id":4265760,"reputation":395,"user_id":3488929,"display_name":"Darshan Shah"},"comment_count":1,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1614022653,"creation_date":1503328071,"answer_id":45800488,"question_id":34515328,"body_markdown":"The answer which helped me to resolve this issue on Windows: (https://bugs.chromium.org/p/chromedriver/issues/detail?id=783).\r\n    \r\n    Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\r\n    prefs.put(&quot;download.default_directory&quot;,  System.getProperty(&quot;user.dir&quot;)+ File.separator + &quot;externalFiles&quot; + File.separator + &quot;downloadFiles&quot;);\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n    ChromeDriver driver = new ChromeDriver(options);\r\n\r\n\r\n  [1]: https://bugs.chromium.org/p/chromedriver/issues/detail?id=783","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<p>The answer which helped me to resolve this issue on Windows: (<a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=783\" rel=\"nofollow noreferrer\">https://bugs.chromium.org/p/chromedriver/issues/detail?id=783</a>).</p>\n<pre><code>Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\nprefs.put(&quot;download.default_directory&quot;,  System.getProperty(&quot;user.dir&quot;)+ File.separator + &quot;externalFiles&quot; + File.separator + &quot;downloadFiles&quot;);\nChromeOptions options = new ChromeOptions();\noptions.setExperimentalOption(&quot;prefs&quot;, prefs);\nChromeDriver driver = new ChromeDriver(options);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":13663575,"reputation":1059,"user_id":9857994,"display_name":"AutomatedOwl"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1527966297,"creation_date":1527966297,"answer_id":50660243,"question_id":34515328,"body_markdown":"To make it more clean and easy, I developed a [library][1] which lets you generate a ChromeOptions object which contains your download folder in one line. For example, to define &quot;/tmp/downloads&quot;, use:\r\n\r\n    private SeleniumDownloadKPI seleniumDownloadKPI;\r\n\r\n    @BeforeEach\r\n    void setUpTest() {\r\n\r\n        // New instance of SeleniumDownloadKPI with given download folder.\r\n        seleniumDownloadKPI =\r\n             new SeleniumDownloadKPI(&quot;/tmp/downloads&quot;);\r\n        ChromeOptions chromeOptions =\r\n                seleniumDownloadKPI.generateDownloadFolderCapability();\r\n        driver = new ChromeDriver(chromeOptions);\r\n\r\n\r\n  [1]: https://github.com/AutomatedOwl/selenium-download-kpi\r\n\r\nThe [library][1] also contains methods which allow to receive download KPI and perform assertion.","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<p>To make it more clean and easy, I developed a <a href=\"https://github.com/AutomatedOwl/selenium-download-kpi\" rel=\"nofollow noreferrer\">library</a> which lets you generate a ChromeOptions object which contains your download folder in one line. For example, to define \"/tmp/downloads\", use:</p>\n\n<pre><code>private SeleniumDownloadKPI seleniumDownloadKPI;\n\n@BeforeEach\nvoid setUpTest() {\n\n    // New instance of SeleniumDownloadKPI with given download folder.\n    seleniumDownloadKPI =\n         new SeleniumDownloadKPI(\"/tmp/downloads\");\n    ChromeOptions chromeOptions =\n            seleniumDownloadKPI.generateDownloadFolderCapability();\n    driver = new ChromeDriver(chromeOptions);\n</code></pre>\n\n<p>The <a href=\"https://github.com/AutomatedOwl/selenium-download-kpi\" rel=\"nofollow noreferrer\">library</a> also contains methods which allow to receive download KPI and perform assertion.</p>\n"},{"tags":[],"owner":{"account_id":5312458,"reputation":347,"user_id":4238275,"display_name":"Bachan Joseph"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1534943097,"creation_date":1534943097,"answer_id":51967585,"question_id":34515328,"body_markdown":"For Chrome driver, the below code is worked for me \r\n\r\n    String downloadFilepath = &quot;/path/to/download&quot;;\r\n    HashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\r\n    chromePrefs.put(&quot;profile.default_content_settings.popups&quot;, 0);\r\n    chromePrefs.put(&quot;download.default_directory&quot;, downloadFilepath);\r\n    ChromeOptions options = new ChromeOptions();\r\n    options.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\r\n    WebDriver driver = new ChromeDriver(options);\r\n\r\n","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<p>For Chrome driver, the below code is worked for me </p>\n\n<pre><code>String downloadFilepath = \"/path/to/download\";\nHashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\nchromePrefs.put(\"profile.default_content_settings.popups\", 0);\nchromePrefs.put(\"download.default_directory\", downloadFilepath);\nChromeOptions options = new ChromeOptions();\noptions.setExperimentalOption(\"prefs\", chromePrefs);\nWebDriver driver = new ChromeDriver(options);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11812038,"reputation":135,"user_id":8643254,"display_name":"RGregg"},"score":3,"creation_date":1567079023,"post_id":52285731,"comment_id":101860944,"body_markdown":"I used this as inspiration to my Python code and works well.  \nAt the end, it looks like this:  \n    path_dest = &#39;//path/to/download/&#39;  \n    prefs = {}  \n    prefs[&#39;profile.default_content_settings.popups&#39;]=0  \n    prefs[&#39;download.default_directory&#39;]=path_dest  \n  \n    options = Options()  \n    options.add_experimental_option(&#39;prefs&#39;,prefs)","body":"I used this as inspiration to my Python code and works well.   At the end, it looks like this:       path_dest = &#39;//path/to/download/&#39;       prefs = {}       prefs[&#39;profile.default_content_settings.popups&#39;]=0       prefs[&#39;download.default_directory&#39;]=path_dest          options = Options()       options.add_experimental_option(&#39;prefs&#39;,prefs)"},{"owner":{"account_id":5214775,"reputation":2985,"user_id":4170095,"display_name":"Philippe Remy"},"score":0,"creation_date":1586425554,"post_id":52285731,"comment_id":108125118,"body_markdown":"Thank you a lot. This should be the accepted answer (for python).","body":"Thank you a lot. This should be the accepted answer (for python)."},{"owner":{"account_id":556700,"reputation":1587,"user_id":918866,"accept_rate":83,"display_name":"jsf80238"},"score":0,"creation_date":1595693040,"post_id":52285731,"comment_id":111565725,"body_markdown":"The os.makedirs command can fail if the target directory already exists, a workaround is: os.makedirs(downloadPath, exist_ok=True)","body":"The os.makedirs command can fail if the target directory already exists, a workaround is: os.makedirs(downloadPath, exist_ok=True)"},{"owner":{"account_id":298176,"reputation":7217,"user_id":604063,"accept_rate":62,"display_name":"David Foster"},"score":0,"creation_date":1675439050,"post_id":52285731,"comment_id":132935621,"body_markdown":"I didn&#39;t need the &quot;profile.default_content_settings.popups&quot; line. Just the &quot;download.default_directory&quot; line was sufficient.","body":"I didn&#39;t need the &quot;profile.default_content_settings.popups&quot; line. Just the &quot;download.default_directory&quot; line was sufficient."}],"tags":[],"owner":{"account_id":1068875,"reputation":5398,"user_id":1068629,"display_name":"Luke"},"comment_count":4,"down_vote_count":0,"up_vote_count":21,"is_accepted":false,"score":21,"last_activity_date":1691192323,"creation_date":1536711205,"answer_id":52285731,"question_id":34515328,"body_markdown":"For Python users who see this page -- here&#39;s how I set the download directory in Python Selenium (this is just the Python version of Shubham&#39;s accepted answer):\r\n\r\n&lt;!-- language: py --&gt;\r\n    def newChromeBrowser(headless=True, downloadPath=None):\r\n        &quot;&quot;&quot; Helper function that creates a new Selenium browser &quot;&quot;&quot;\r\n        options = webdriver.ChromeOptions()\r\n        if headless:\r\n            options.add_argument(&#39;headless&#39;)\r\n        if downloadPath is not None:\r\n            prefs = {}\r\n            os.makedirs(downloadPath)\r\n            prefs[&quot;profile.default_content_settings.popups&quot;]=0\r\n            prefs[&quot;download.default_directory&quot;]=downloadPath\r\n            options.add_experimental_option(&quot;prefs&quot;, prefs)\r\n        browser = webdriver.Chrome(options=options, executable_path=CHROMEDRIVER_PATH)\r\n        return browser\r\n\r\n","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<p>For Python users who see this page -- here's how I set the download directory in Python Selenium (this is just the Python version of Shubham's accepted answer):</p>\n<pre class=\"lang-py prettyprint-override\"><code>def newChromeBrowser(headless=True, downloadPath=None):\n    &quot;&quot;&quot; Helper function that creates a new Selenium browser &quot;&quot;&quot;\n    options = webdriver.ChromeOptions()\n    if headless:\n        options.add_argument('headless')\n    if downloadPath is not None:\n        prefs = {}\n        os.makedirs(downloadPath)\n        prefs[&quot;profile.default_content_settings.popups&quot;]=0\n        prefs[&quot;download.default_directory&quot;]=downloadPath\n        options.add_experimental_option(&quot;prefs&quot;, prefs)\n    browser = webdriver.Chrome(options=options, executable_path=CHROMEDRIVER_PATH)\n    return browser\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4443960,"reputation":988,"user_id":3617811,"accept_rate":75,"display_name":"DraxDomax"},"score":2,"creation_date":1607576071,"post_id":63322868,"comment_id":115317836,"body_markdown":"an excellent solution and answer. I don&#39;t like how you stuck to some exclusively &quot;new&quot; java features - could have done it with something for us corporation zombies who are not allowed to update :) But I want to be clear: You have done me and the community a great service! Thank You!","body":"an excellent solution and answer. I don&#39;t like how you stuck to some exclusively &quot;new&quot; java features - could have done it with something for us corporation zombies who are not allowed to update :) But I want to be clear: You have done me and the community a great service! Thank You!"},{"owner":{"account_id":3340410,"reputation":5354,"user_id":2806819,"accept_rate":97,"display_name":"k_rollo"},"score":2,"creation_date":1611048563,"post_id":63322868,"comment_id":116317899,"body_markdown":"Java 7 was 10 years ago. It is not &quot;new&quot;. The solution to your problem is simple - move on to a company that use something within the last 10 years. You&#39;re welcome!","body":"Java 7 was 10 years ago. It is not &quot;new&quot;. The solution to your problem is simple - move on to a company that use something within the last 10 years. You&#39;re welcome!"},{"owner":{"account_id":4443960,"reputation":988,"user_id":3617811,"accept_rate":75,"display_name":"DraxDomax"},"score":1,"creation_date":1611067474,"post_id":63322868,"comment_id":116327148,"body_markdown":"ah, sorry, I only looked at the &#39;prefs&#39; part (as I already have my own system to pipe files into where they need to be) and missed the comment &quot;since  java 7&quot;... In some ways, it&#39;s better to be the smartest guy in a mediocre group, rather than swimming in deep waters with sharks like you! :D","body":"ah, sorry, I only looked at the &#39;prefs&#39; part (as I already have my own system to pipe files into where they need to be) and missed the comment &quot;since  java 7&quot;... In some ways, it&#39;s better to be the smartest guy in a mediocre group, rather than swimming in deep waters with sharks like you! :D"},{"owner":{"account_id":3340410,"reputation":5354,"user_id":2806819,"accept_rate":97,"display_name":"k_rollo"},"score":1,"creation_date":1611094055,"post_id":63322868,"comment_id":116339163,"body_markdown":"I admire the honesty. :)) In some ways I also did the same, my skill is closer to developer level (and pretty sure I can be) but I went the less travelled path to get ahead of competition. Now the &quot;rockstar&quot; developers are stuck back in my home country and I was offered a job in Australia.","body":"I admire the honesty. :)) In some ways I also did the same, my skill is closer to developer level (and pretty sure I can be) but I went the less travelled path to get ahead of competition. Now the &quot;rockstar&quot; developers are stuck back in my home country and I was offered a job in Australia."}],"tags":[],"owner":{"account_id":3340410,"reputation":5354,"user_id":2806819,"accept_rate":97,"display_name":"k_rollo"},"comment_count":4,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1691192352,"creation_date":1596951581,"answer_id":63322868,"question_id":34515328,"body_markdown":"# 2020 Update:\r\n\r\nChrome: v84\r\n\r\nChromeDriver: v83\r\n\r\nJDK: OpenJDK 11 (LTS)\r\n\r\nUse [Paths](https://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html) class for platform-independent file separators.\r\n\r\n```\r\n@Test\r\npublic void doFileDownload() throws Throwable {\r\n    // Since Java 7: Relative path from project root dir\r\n    // Put in target dir to avoid committing downloaded files\r\n    var downloadDir = Paths.get(&quot;target&quot;).toAbsolutePath().toString();\r\n\r\n    var prefs = new HashMap&lt;String, Object&gt;();\r\n    prefs.put(&quot;download.default_directory&quot;, downloadDir); // Bypass default download directory in Chrome\r\n    prefs.put(&quot;safebrowsing.enabled&quot;, &quot;false&quot;); // Bypass warning message, keep file anyway (for .exe, .jar, etc.)\r\n    var opts = new ChromeOptions();\r\n    opts.setHeadless(true);\r\n    opts.setExperimentalOption(&quot;prefs&quot;, prefs);\r\n\r\n    var driver = new ChromeDriver(opts); // ChromeDriver binary is added to PATH env var\r\n    driver.manage().timeouts().implicitlyWait(3, TimeUnit.SECONDS);\r\n    driver.manage().window().maximize();\r\n    driver.get(&quot;https://the-internet.herokuapp.com/download&quot;);\r\n\r\n    var downloadLink = driver.findElement(By.cssSelector(&quot;a[href*=&#39;some-file.txt&#39;]&quot;));\r\n    var downloadHref = downloadLink.getAttribute(&quot;href&quot;).replace(&quot;:&quot;, &quot;&quot;);\r\n    var downloadFileName = Paths.get(downloadHref).getFileName().toString();\r\n    downloadLink.click();\r\n\r\n    // Wait download to finish for 60s\r\n    var downloadFilePath = Paths.get(downloadDir, downloadFileName);\r\n    new WebDriverWait(driver, 60).until(d -&gt; downloadFilePath.toFile().exists());\r\n\r\n    // Since Java 11: Read content of downloaded file\r\n    var content = Files.readString(downloadFilePath);\r\n\r\n    // Do tests with string content...\r\n    log.info(&quot;Content={}&quot;, content);\r\n\r\n    driver.quit();\r\n}\r\n```\r\n\r\nOutput:\r\n\r\n[![output][1]][1]\r\n\r\nDoing `mvn clean` prior to any run also takes care of having to override existing files.\r\n\r\n`pom.xml:`\r\n\r\n```xml\r\n&lt;properties&gt;\r\n    &lt;!-- Remove encoding warnings --&gt;\r\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\r\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\r\n&lt;/properties&gt;\r\n\r\n&lt;dependencies&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-server --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\r\n        &lt;artifactId&gt;selenium-server&lt;/artifactId&gt;\r\n        &lt;version&gt;3.141.59&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n    &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\r\n        &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\r\n        &lt;version&gt;5.6.2&lt;/version&gt;\r\n        &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n\r\n&lt;build&gt;\r\n    &lt;plugins&gt;\r\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin --&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;3.8.1&lt;/version&gt;\r\n            &lt;configuration&gt;\r\n                &lt;release&gt;11&lt;/release&gt;\r\n            &lt;/configuration&gt;\r\n        &lt;/plugin&gt;\r\n        &lt;plugin&gt;\r\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\r\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\r\n            &lt;version&gt;2.22.2&lt;/version&gt;\r\n        &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n&lt;/build&gt;\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/NT043.png","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<h1>2020 Update:</h1>\n<p>Chrome: v84</p>\n<p>ChromeDriver: v83</p>\n<p>JDK: OpenJDK 11 (LTS)</p>\n<p>Use <a href=\"https://docs.oracle.com/javase/7/docs/api/java/nio/file/Paths.html\" rel=\"nofollow noreferrer\">Paths</a> class for platform-independent file separators.</p>\n<pre><code>@Test\npublic void doFileDownload() throws Throwable {\n    // Since Java 7: Relative path from project root dir\n    // Put in target dir to avoid committing downloaded files\n    var downloadDir = Paths.get(&quot;target&quot;).toAbsolutePath().toString();\n\n    var prefs = new HashMap&lt;String, Object&gt;();\n    prefs.put(&quot;download.default_directory&quot;, downloadDir); // Bypass default download directory in Chrome\n    prefs.put(&quot;safebrowsing.enabled&quot;, &quot;false&quot;); // Bypass warning message, keep file anyway (for .exe, .jar, etc.)\n    var opts = new ChromeOptions();\n    opts.setHeadless(true);\n    opts.setExperimentalOption(&quot;prefs&quot;, prefs);\n\n    var driver = new ChromeDriver(opts); // ChromeDriver binary is added to PATH env var\n    driver.manage().timeouts().implicitlyWait(3, TimeUnit.SECONDS);\n    driver.manage().window().maximize();\n    driver.get(&quot;https://the-internet.herokuapp.com/download&quot;);\n\n    var downloadLink = driver.findElement(By.cssSelector(&quot;a[href*='some-file.txt']&quot;));\n    var downloadHref = downloadLink.getAttribute(&quot;href&quot;).replace(&quot;:&quot;, &quot;&quot;);\n    var downloadFileName = Paths.get(downloadHref).getFileName().toString();\n    downloadLink.click();\n\n    // Wait download to finish for 60s\n    var downloadFilePath = Paths.get(downloadDir, downloadFileName);\n    new WebDriverWait(driver, 60).until(d -&gt; downloadFilePath.toFile().exists());\n\n    // Since Java 11: Read content of downloaded file\n    var content = Files.readString(downloadFilePath);\n\n    // Do tests with string content...\n    log.info(&quot;Content={}&quot;, content);\n\n    driver.quit();\n}\n</code></pre>\n<p>Output:</p>\n<p><a href=\"https://i.stack.imgur.com/NT043.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NT043.png\" alt=\"output\" /></a></p>\n<p>Doing <code>mvn clean</code> prior to any run also takes care of having to override existing files.</p>\n<p><code>pom.xml:</code></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;properties&gt;\n    &lt;!-- Remove encoding warnings --&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n&lt;/properties&gt;\n\n&lt;dependencies&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.seleniumhq.selenium/selenium-server --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n        &lt;artifactId&gt;selenium-server&lt;/artifactId&gt;\n        &lt;version&gt;3.141.59&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n        &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n        &lt;version&gt;5.6.2&lt;/version&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.maven.plugins/maven-compiler-plugin --&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.8.1&lt;/version&gt;\n            &lt;configuration&gt;\n                &lt;release&gt;11&lt;/release&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n            &lt;version&gt;2.22.2&lt;/version&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11924446,"reputation":148,"user_id":8726139,"display_name":"Bastien Gallienne"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1691192372,"creation_date":1661349760,"answer_id":73474554,"question_id":34515328,"body_markdown":"With selenium 4 and Chrome\r\n\r\n(Obi Wan Kenobi&#39;s &quot;one in a million&quot;):\r\n\r\n    ChromeOptions chromeOptions = new ChromeOptions();\r\n    chromeOptions.setCapability(&quot;download.default_directory&quot;, &quot;C:\\\\Users\\\\me\\\\Downloads&quot;);\r\n    driver =new ChromeDriver(chromeOptions);\r\n    \r\n(failed to work on windows 10 selenium 4, so got this alternate one from this very same thread )\r\n\r\nOR \r\n\r\n    Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\r\n    prefs.put(&quot;C:\\\\Users\\\\me\\\\Downloads&quot;);\r\n    ChromeOptions chromeOptions = new ChromeOptions();\r\n    chromeOptions.setExperimentalOption(&quot;prefs&quot;, prefs);","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<p>With selenium 4 and Chrome</p>\n<p>(Obi Wan Kenobi's &quot;one in a million&quot;):</p>\n<pre><code>ChromeOptions chromeOptions = new ChromeOptions();\nchromeOptions.setCapability(&quot;download.default_directory&quot;, &quot;C:\\\\Users\\\\me\\\\Downloads&quot;);\ndriver =new ChromeDriver(chromeOptions);\n</code></pre>\n<p>(failed to work on windows 10 selenium 4, so got this alternate one from this very same thread )</p>\n<p>OR</p>\n<pre><code>Map&lt;String, Object&gt; prefs = new HashMap&lt;String, Object&gt;();\nprefs.put(&quot;C:\\\\Users\\\\me\\\\Downloads&quot;);\nChromeOptions chromeOptions = new ChromeOptions();\nchromeOptions.setExperimentalOption(&quot;prefs&quot;, prefs);\n</code></pre>\n"}],"owner":{"account_id":4385762,"reputation":597,"user_id":3575999,"accept_rate":83,"display_name":"vini007"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":134758,"favorite_count":0,"down_vote_count":0,"up_vote_count":36,"accepted_answer_id":34530160,"answer_count":7,"score":36,"last_activity_date":1691192372,"creation_date":1451407595,"question_id":34515328,"body_markdown":"Please find the below code with the chrome capabilities. In fact the browser is not downloading the file to the specified path.\t\r\n\r\n\r\n    private static DesiredCapabilities getChromeCapabilities() throws Exception {\r\n\t\t\r\n\t\tString chromePath = BrowserUtil.class.getResource(&quot;/Browserdrivers/chromedriver.exe&quot;).getPath();\r\n\t\tSystem.setProperty(&quot;webdriver.chrome.driver&quot;, chromePath);\r\n\t\tString downloadFilepath = &quot;C:\\\\TestDownloads&quot;;\r\n\t\tChromeOptions options = new ChromeOptions();\r\n\t\tHashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\r\n\t\tchromePrefs.put(&quot;profile.default_content_settings.popups&quot;, 0);\r\n\t\tchromePrefs.put(&quot;download.default_directory&quot;, downloadFilepath);\r\n\t\toptions.setExperimentalOption(&quot;prefs&quot;, chromePrefs);\r\n\t\toptions.addArguments(&quot;--test-type&quot;);\r\n\t\toptions.addArguments(&quot;start-maximized&quot;, &quot;disable-popup-blocking&quot;);\r\n\t\t\r\n\t\tDesiredCapabilities chromeCapabilities = DesiredCapabilities.chrome();\r\n\t\tsetProxy(chromeCapabilities);\r\n\t\tchromeCapabilities.setPlatform(Platform.WINDOWS);\r\n\t\tchromeCapabilities.setCapability(&quot;name&quot;, MDC.get(&quot;testname&quot;));\r\n\t\tchromeCapabilities.setCapability(ChromeOptions.CAPABILITY, options);\r\n\t\treturn chromeCapabilities;\r\n\t}","title":"How to set default download directory in selenium Chrome Capabilities?","body":"<p>Please find the below code with the chrome capabilities. In fact the browser is not downloading the file to the specified path. </p>\n\n<pre><code>private static DesiredCapabilities getChromeCapabilities() throws Exception {\n\n    String chromePath = BrowserUtil.class.getResource(\"/Browserdrivers/chromedriver.exe\").getPath();\n    System.setProperty(\"webdriver.chrome.driver\", chromePath);\n    String downloadFilepath = \"C:\\\\TestDownloads\";\n    ChromeOptions options = new ChromeOptions();\n    HashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;String, Object&gt;();\n    chromePrefs.put(\"profile.default_content_settings.popups\", 0);\n    chromePrefs.put(\"download.default_directory\", downloadFilepath);\n    options.setExperimentalOption(\"prefs\", chromePrefs);\n    options.addArguments(\"--test-type\");\n    options.addArguments(\"start-maximized\", \"disable-popup-blocking\");\n\n    DesiredCapabilities chromeCapabilities = DesiredCapabilities.chrome();\n    setProxy(chromeCapabilities);\n    chromeCapabilities.setPlatform(Platform.WINDOWS);\n    chromeCapabilities.setCapability(\"name\", MDC.get(\"testname\"));\n    chromeCapabilities.setCapability(ChromeOptions.CAPABILITY, options);\n    return chromeCapabilities;\n}\n</code></pre>\n"},{"tags":["java","unit-testing","aspectj","spring-aop","mdc"],"owner":{"account_id":20895260,"reputation":25,"user_id":15349689,"display_name":"Fabian L&#252;dicke"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":10,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1691192378,"answer_count":0,"score":0,"last_activity_date":1691192336,"creation_date":1691155703,"question_id":76836388,"body_markdown":"I am trying to implement a Custommade annotation that contains a value as a parameter and when the annotation is used, this value should be processed with a MDC.put.\r\n\r\nSo when I use a method with the annotation @Usecase(&quot;TestUsecase&quot;), MDC.get(&quot;usecase&quot;) should actually output &quot;TestUsecase&quot;, but currently I only get null. When debugging I noticed that the method in my UsecaseAspect is never called.\r\n\r\nI have already tried several things:\r\n- in my TestApplication I have already set @EnableAspectJAutoProxy.\r\n- In my POM I have set both the dependency for aspectjweaver and spring-boot-starter-aop\r\n\r\nHere some code:\r\n```\r\n@Target(ElementType.METHOD)\r\n@Retention(RetentionPolicy.RUNTIME)\r\npublic @interface Usecase {\r\n    String value();\r\n```\r\n```\r\n@Aspect\r\n@Component\r\npublic class UsecaseAspect {\r\n\r\n    @After(&quot;@annotation(usecase)&quot;)\r\n    public void setLoggingContext(@NotNull Usecase usecase) {\r\n        MDC.put(&quot;usecase&quot;, usecase.value());\r\n\r\n    }\r\n}\r\n``` \r\n```\r\n@SpringBootTest(classes = TestApplication.class)\r\n@ActiveProfiles({&quot;test&quot;, &quot;tests&quot;})\r\n@EnableAspectJAutoProxy\r\nclass UsecaseTest {\r\n\r\n    @Usecase(&quot;TestUsecase&quot;)\r\n    public void testUsecaseMethod() {\r\n    }\r\n\r\n    @Test\r\n    void testUsecaseAnnotation() {\r\n        testUsecaseMethod();\r\n        assertEquals(&quot;TestUsecase&quot;, MDC.get(&quot;usecase&quot;));\r\n    }\r\n}\r\n```\r\n\r\n","title":"Custom AnnotationAspect doesnt get called","body":"<p>I am trying to implement a Custommade annotation that contains a value as a parameter and when the annotation is used, this value should be processed with a MDC.put.</p>\n<p>So when I use a method with the annotation @Usecase(&quot;TestUsecase&quot;), MDC.get(&quot;usecase&quot;) should actually output &quot;TestUsecase&quot;, but currently I only get null. When debugging I noticed that the method in my UsecaseAspect is never called.</p>\n<p>I have already tried several things:</p>\n<ul>\n<li>in my TestApplication I have already set @EnableAspectJAutoProxy.</li>\n<li>In my POM I have set both the dependency for aspectjweaver and spring-boot-starter-aop</li>\n</ul>\n<p>Here some code:</p>\n<pre><code>@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface Usecase {\n    String value();\n</code></pre>\n<pre><code>@Aspect\n@Component\npublic class UsecaseAspect {\n\n    @After(&quot;@annotation(usecase)&quot;)\n    public void setLoggingContext(@NotNull Usecase usecase) {\n        MDC.put(&quot;usecase&quot;, usecase.value());\n\n    }\n}\n</code></pre>\n<pre><code>@SpringBootTest(classes = TestApplication.class)\n@ActiveProfiles({&quot;test&quot;, &quot;tests&quot;})\n@EnableAspectJAutoProxy\nclass UsecaseTest {\n\n    @Usecase(&quot;TestUsecase&quot;)\n    public void testUsecaseMethod() {\n    }\n\n    @Test\n    void testUsecaseAnnotation() {\n        testUsecaseMethod();\n        assertEquals(&quot;TestUsecase&quot;, MDC.get(&quot;usecase&quot;));\n    }\n}\n</code></pre>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9867,"page":267,"page_size":100}
