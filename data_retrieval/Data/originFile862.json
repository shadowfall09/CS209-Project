{"items":[{"tags":["java","spring","spring-boot","spring-batch"],"comments":[{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1661850260,"post_id":73539723,"comment_id":129863547,"body_markdown":"Please share the full stacktrace of the error. It is not possible to understand the root cause from what you shared.","body":"Please share the full stacktrace of the error. It is not possible to understand the root cause from what you shared."},{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1661850420,"post_id":73539723,"comment_id":129863603,"body_markdown":"The issue is your statement requires that exactly one result is returned, but there are no results returned","body":"The issue is your statement requires that exactly one result is returned, but there are no results returned"},{"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"score":0,"creation_date":1661850796,"post_id":73539723,"comment_id":129863759,"body_markdown":"Hi, thanks for your reply:\nFull error stack: https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing","body":"Hi, thanks for your reply: Full error stack: <a href=\"https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/&hellip;</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851141,"post_id":73539723,"comment_id":129863871,"body_markdown":"The issue is not his statement, but one of spring-batch(org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307)(","body":"The issue is not his statement, but one of spring-batch(org.springframework.batch.core.repository.dao.J&zwnj;&#8203;dbcJobExecutionDao.s&zwnj;&#8203;ynchronizeStatus(Jdb&zwnj;&#8203;cJobExecutionDao.jav&zwnj;&#8203;a:307)("},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851329,"post_id":73539723,"comment_id":129863940,"body_markdown":"4.3.6 source code: https://github.com/spring-projects/spring-batch/blob/4.3.6/spring-batch-core/src/main/java/org/springframework/batch/core/repository/dao/JdbcJobExecutionDao.java","body":"4.3.6 source code: <a href=\"https://github.com/spring-projects/spring-batch/blob/4.3.6/spring-batch-core/src/main/java/org/springframework/batch/core/repository/dao/JdbcJobExecutionDao.java\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-batch/blob/4.3.6/&hellip;</a>"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851429,"post_id":73539723,"comment_id":129863996,"body_markdown":"It is the query: &quot;SELECT VERSION FROM %PREFIX%JOB_EXECUTION WHERE JOB_EXECUTION_ID=?&quot;","body":"It is the query: &quot;SELECT VERSION FROM %PREFIX%JOB_EXECUTION WHERE JOB_EXECUTION_ID=?&quot;"},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661851499,"post_id":73539723,"comment_id":129864025,"body_markdown":"Your update seems to have brought (spring-batch)data into an inconsistent state..","body":"Your update seems to have brought (spring-batch)data into an inconsistent state.."},{"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"score":0,"creation_date":1661853098,"post_id":73539723,"comment_id":129864600,"body_markdown":"@MahmoudBenHassine I have added the logs can you please have a look","body":"@MahmoudBenHassine I have added the logs can you please have a look"},{"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"score":0,"creation_date":1661853145,"post_id":73539723,"comment_id":129864620,"body_markdown":"@xerx593, Hi man, can you please help with the resolution.","body":"@xerx593, Hi man, can you please help with the resolution."},{"owner":{"account_id":6482932,"reputation":29552,"user_id":5019386,"display_name":"Mahmoud Ben Hassine"},"score":0,"creation_date":1661888352,"post_id":73539723,"comment_id":129877972,"body_markdown":"Yes, something seems to be wrong with your Batch meta-data. The only way to help you in an efficient way is to share a [minimal complete example](https://stackoverflow.com/help/minimal-reproducible-example) that reproduces the issue.","body":"Yes, something seems to be wrong with your Batch meta-data. The only way to help you in an efficient way is to share a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal complete example</a> that reproduces the issue."},{"owner":{"account_id":290683,"reputation":12512,"user_id":592355,"display_name":"xerx593"},"score":0,"creation_date":1661889788,"post_id":73539723,"comment_id":129878443,"body_markdown":"i&#39;d investigate the data(base), debug..., read upgrade guides (carefully!), and keep in mind, that spring-batch is not only a lib, but commonly also a (complete) database (schema).","body":"i&#39;d investigate the data(base), debug..., read upgrade guides (carefully!), and keep in mind, that spring-batch is not only a lib, but commonly also a (complete) database (schema)."},{"owner":{"account_id":151905,"reputation":3027,"user_id":366053,"accept_rate":76,"display_name":"Manish Khot"},"score":0,"creation_date":1668067873,"post_id":73539723,"comment_id":131318431,"body_markdown":"I am facing a similar issue and the scenario also is same where we upgraded the Spring boot batch version from 2.1.7 to 2.4.0 @AmitChaudhary","body":"I am facing a similar issue and the scenario also is same where we upgraded the Spring boot batch version from 2.1.7 to 2.4.0 @AmitChaudhary"}],"answers":[{"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":1,"creation_date":1669211700,"post_id":74547851,"comment_id":131592963,"body_markdown":"That shouldn&#39;t be the solution as you are now basically running without transactions. The fact that his &quot;fixes&quot; it means you have an issue somewhere with your transaction propagation/setup.","body":"That shouldn&#39;t be the solution as you are now basically running without transactions. The fact that his &quot;fixes&quot; it means you have an issue somewhere with your transaction propagation/setup."}],"tags":[],"owner":{"account_id":27025100,"reputation":1,"user_id":20582496,"display_name":"xandar"},"comment_count":1,"down_vote_count":2,"up_vote_count":0,"is_accepted":false,"score":-2,"last_activity_date":1669211290,"creation_date":1669211290,"answer_id":74547851,"question_id":73539723,"body_markdown":"In my case the problem was in spring.datasource.hikari.auto-commit=false. After changing it to true it worked.","title":"Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>In my case the problem was in spring.datasource.hikari.auto-commit=false. After changing it to true it worked.</p>\n"}],"owner":{"account_id":14072999,"reputation":73,"user_id":10166044,"display_name":"Amit Chaudhary"},"comment_count":12,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":983,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":1,"score":2,"last_activity_date":1669211290,"creation_date":1661849923,"question_id":73539723,"body_markdown":"I am upgrading my Spring boot/batch code from 1.4.0 to 2.7.2. The migration is done and most of the code is working. The code gets deployed to JBOSS7/wildfly.\r\n\r\nI am getting an error while executing the job.\r\n\r\nError:\r\n\r\n```\r\n2022-08-30 08:16:04,280 INFO  [com.xyz.om.apm.batch.rest.ManualBatchTrigger] (default task-1) batchTrigger inside ManualBatchTrigger with date::: 20220714  ::::  triggered at::: Tue Aug 30 08:16:04 UTC 2022\r\n2022-08-30 08:16:04,316 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] launched with the following parameters: [{JobID=1661847364286, date=1657756800000}]\r\n\r\n2022-08-30 08:16:04,370 ERROR [org.springframework.batch.core.job.AbstractJob] (default task-1) Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\r\n\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat org.springframework.batch.core.job.AbstractJob.updateStatus(AbstractJob.java:443) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:315) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\r\n\tat org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.3.22.jar:5.3.22]\r\n\t\r\n\r\n2022-08-30 08:16:04,382 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] failed unexpectedly and fatally with the following parameters: [{JobID=1661847364286, date=1657756800000}]: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\r\n\tat org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\r\n\tat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\r\n\tat com.sun.proxy.$Proxy127.update(Unknown Source)\r\n\tat org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:378) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\r\n\tat org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\r\n\tat com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\r\n\r\n```\r\nI am not able to understand the issue here.\r\n\r\nCode:\r\n\r\n```\r\n@RestController\r\n@RequestMapping(&quot;/rest&quot;)\r\npublic class ManualBatchTrigger {\r\n\t\r\n\tprivate final static Logger logger = LoggerFactory.getLogger(ManualBatchTrigger.class);\r\n\t\r\n\t@Autowired\r\n\tprivate Environment environment;\r\n\t@Autowired\r\n\tprivate SimpleJobLauncher jobLauncher;\r\n\t@Autowired\r\n\tprivate Step baseApplicationDataExtractorStep;\r\n\t@Autowired\r\n\tprivate Job baseApplicationDataExtractorJob;\r\n\t@Autowired\r\n\tprivate FTSUtils ftsUtils;\r\n\r\n@RequestMapping(value = &quot;/triggerbatch/{date}&quot;, method = RequestMethod.GET)\r\n\tpublic String batchTrigger(@PathVariable String date) throws ParseException {\r\n\r\n\t\tlogger.info(&quot;batchTrigger inside ManualBatchTrigger with date::: &quot; + date + &quot;  ::::  triggered at::: &quot; + new Date());\r\n\r\n\t\tDateFormat format = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\r\n\r\n\t\tJobExecution execution = null;\r\n\t\ttry {\r\n\t\t\tJobParameters param = new JobParametersBuilder()\r\n\t\t\t\t\t.addString(&quot;JobID&quot;, String.valueOf(System.currentTimeMillis()))\r\n\t\t\t\t\t.addDate(&quot;date&quot;, format.parse(date))\r\n\t\t\t\t\t.toJobParameters();\r\n\r\n\t\t\texecution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\r\n\t\t} catch(Exception e) {\r\n\t\t\tlogger.error(&quot;@@ Error in Manual Batch Trigger  2@@  :  &quot;, e);\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t\tif(execution != null) {\r\n\t\t\tlogger.info(&quot;execution != null&quot;);\r\n\t\t\tlogger.info(&quot;Job finished with status :&quot; + execution.getStatus());\r\n\t\t\treturn execution.getStatus().toString();\r\n\t\t}\t\t\t\r\n\t\treturn &quot;Job Failed!&quot;;\r\n\t}\r\n\r\n\tprivate Job baseApplicationDataExtractorJob(Step baseApplicationDataExtractorStep2) {\r\n\t\treturn baseApplicationDataExtractorJob;\r\n\t}\r\n```\r\n\r\n**Error is at this line:**\r\nI have googled the error 100 times but the error does not relate to any of solutions/queries asked.\r\n```\r\nexecution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\r\n```\r\n\r\n**FULL ERROR STACK: ** https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing","title":"Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0","body":"<p>I am upgrading my Spring boot/batch code from 1.4.0 to 2.7.2. The migration is done and most of the code is working. The code gets deployed to JBOSS7/wildfly.</p>\n<p>I am getting an error while executing the job.</p>\n<p>Error:</p>\n<pre><code>2022-08-30 08:16:04,280 INFO  [com.xyz.om.apm.batch.rest.ManualBatchTrigger] (default task-1) batchTrigger inside ManualBatchTrigger with date::: 20220714  ::::  triggered at::: Tue Aug 30 08:16:04 UTC 2022\n2022-08-30 08:16:04,316 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] launched with the following parameters: [{JobID=1661847364286, date=1657756800000}]\n\n2022-08-30 08:16:04,370 ERROR [org.springframework.batch.core.job.AbstractJob] (default task-1) Encountered fatal error executing job: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n    at org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at org.springframework.batch.core.job.AbstractJob.updateStatus(AbstractJob.java:443) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:315) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\n    at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) [spring-core-5.3.22.jar:5.3.22]\n    \n\n2022-08-30 08:16:04,382 INFO  [org.springframework.batch.core.launch.support.SimpleJobLauncher] (default task-1) Job: [SimpleJob: [name=baseApplicationDataExtractorJob]] failed unexpectedly and fatally with the following parameters: [{JobID=1661847364286, date=1657756800000}]: org.springframework.dao.EmptyResultDataAccessException: Incorrect result size: expected 1, actual 0\n    at org.springframework.dao.support.DataAccessUtils.nullableSingleResult(DataAccessUtils.java:97) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:880) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.jdbc.core.JdbcTemplate.queryForObject(JdbcTemplate.java:906) [spring-jdbc-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.repository.dao.JdbcJobExecutionDao.synchronizeStatus(JdbcJobExecutionDao.java:307) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.repository.support.SimpleJobRepository.update(SimpleJobRepository.java:174) [spring-batch-core-4.3.6.jar:4.3.6]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) [spring-tx-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_332]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_332]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_332]\n    at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_332]\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:344) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:198) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.configuration.annotation.SimpleBatchConfiguration$PassthruAdvice.invoke(SimpleBatchConfiguration.java:128) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) [spring-aop-5.3.22.jar:5.3.22]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215) [spring-aop-5.3.22.jar:5.3.22]\n    at com.sun.proxy.$Proxy127.update(Unknown Source)\n    at org.springframework.batch.core.job.AbstractJob.execute(AbstractJob.java:378) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher$1.run(SimpleJobLauncher.java:149) [spring-batch-core-4.3.6.jar:4.3.6]\n    at org.springframework.core.task.SyncTaskExecutor.execute(SyncTaskExecutor.java:50) [spring-core-5.3.22.jar:5.3.22]\n    at org.springframework.batch.core.launch.support.SimpleJobLauncher.run(SimpleJobLauncher.java:140) [spring-batch-core-4.3.6.jar:4.3.6]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger.batchTrigger(ManualBatchTrigger.java:147) [classes:]\n    at com.xyz.om.apm.batch.rest.ManualBatchTrigger$$FastClassBySpringCGLIB$$5c65fdc.invoke(&lt;generated&gt;) [classes:]\n\n</code></pre>\n<p>I am not able to understand the issue here.</p>\n<p>Code:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/rest&quot;)\npublic class ManualBatchTrigger {\n    \n    private final static Logger logger = LoggerFactory.getLogger(ManualBatchTrigger.class);\n    \n    @Autowired\n    private Environment environment;\n    @Autowired\n    private SimpleJobLauncher jobLauncher;\n    @Autowired\n    private Step baseApplicationDataExtractorStep;\n    @Autowired\n    private Job baseApplicationDataExtractorJob;\n    @Autowired\n    private FTSUtils ftsUtils;\n\n@RequestMapping(value = &quot;/triggerbatch/{date}&quot;, method = RequestMethod.GET)\n    public String batchTrigger(@PathVariable String date) throws ParseException {\n\n        logger.info(&quot;batchTrigger inside ManualBatchTrigger with date::: &quot; + date + &quot;  ::::  triggered at::: &quot; + new Date());\n\n        DateFormat format = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\n\n        JobExecution execution = null;\n        try {\n            JobParameters param = new JobParametersBuilder()\n                    .addString(&quot;JobID&quot;, String.valueOf(System.currentTimeMillis()))\n                    .addDate(&quot;date&quot;, format.parse(date))\n                    .toJobParameters();\n\n            execution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\n        } catch(Exception e) {\n            logger.error(&quot;@@ Error in Manual Batch Trigger  2@@  :  &quot;, e);\n            e.printStackTrace();\n        }\n        \n        if(execution != null) {\n            logger.info(&quot;execution != null&quot;);\n            logger.info(&quot;Job finished with status :&quot; + execution.getStatus());\n            return execution.getStatus().toString();\n        }           \n        return &quot;Job Failed!&quot;;\n    }\n\n    private Job baseApplicationDataExtractorJob(Step baseApplicationDataExtractorStep2) {\n        return baseApplicationDataExtractorJob;\n    }\n</code></pre>\n<p><strong>Error is at this line:</strong>\nI have googled the error 100 times but the error does not relate to any of solutions/queries asked.</p>\n<pre><code>execution = jobLauncher.run(baseApplicationDataExtractorJob(baseApplicationDataExtractorStep), param);\n</code></pre>\n<p>**FULL ERROR STACK: ** <a href=\"https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/1p5didOTbMO3OE-qCAJYR-h9Cfrc79-TV/view?usp=sharing</a></p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":11142984,"reputation":2547,"user_id":8178842,"display_name":"Tobias"},"score":1,"creation_date":1572246673,"post_id":58585654,"comment_id":103487208,"body_markdown":"This exception probably occures because the `sort` method of the list adds the element a second time to the list while sorting. Therefore your solution to use a copy of the list to sort it is a quite good solution I think.","body":"This exception probably occures because the <code>sort</code> method of the list adds the element a second time to the list while sorting. Therefore your solution to use a copy of the list to sort it is a quite good solution I think."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1572273499,"post_id":58585654,"comment_id":103498796,"body_markdown":"If I had to guess, this is probably something that needs to be done using a `ListView` and not a `VBox`.","body":"If I had to guess, this is probably something that needs to be done using a <code>ListView</code> and not a <code>VBox</code>."},{"owner":{"account_id":2819940,"reputation":12538,"user_id":2423906,"accept_rate":100,"display_name":"SedJ601"},"score":0,"creation_date":1572273740,"post_id":58585654,"comment_id":103498931,"body_markdown":"https://gist.github.com/uphy/6dc368160f182cd2f80f","body":"<a href=\"https://gist.github.com/uphy/6dc368160f182cd2f80f\" rel=\"nofollow noreferrer\">gist.github.com/uphy/6dc368160f182cd2f80f</a>"},{"owner":{"account_id":9191414,"reputation":521,"user_id":6831795,"display_name":"Alex"},"score":0,"creation_date":1572293170,"post_id":58585654,"comment_id":103507999,"body_markdown":"I am pretty sure Tobias is right and your solution seems like the only way to do it.","body":"I am pretty sure Tobias is right and your solution seems like the only way to do it."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1572296240,"post_id":58585654,"comment_id":103509117,"body_markdown":"The `ObservableList` used for the `children` list is an instance of `VetoableListDecorator` and that decorator does not override `List#sort`. This causes a problem because the default sort method calls `set` on itself without removing any elements first, thus the `IllegalArgumentException`. I consider this a bug since the other `ObservableList` implementations _do_ override `sort` so that only one change event is fired for the entire operation. Your solution is likely the only workaround.","body":"The <code>ObservableList</code> used for the <code>children</code> list is an instance of <code>VetoableListDecorator</code> and that decorator does not override <code>List#sort</code>. This causes a problem because the default sort method calls <code>set</code> on itself without removing any elements first, thus the <code>IllegalArgumentException</code>. I consider this a bug since the other <code>ObservableList</code> implementations <i>do</i> override <code>sort</code> so that only one change event is fired for the entire operation. Your solution is likely the only workaround."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1572297804,"post_id":58585654,"comment_id":103509678,"body_markdown":"I submitted a bug report. Waiting to see if it&#39;s accepted.","body":"I submitted a bug report. Waiting to see if it&#39;s accepted."},{"owner":{"account_id":8532578,"reputation":39918,"user_id":6395627,"display_name":"Slaw"},"score":0,"creation_date":1572427495,"post_id":58585654,"comment_id":103552381,"body_markdown":"Bug accepted: https://bugs.openjdk.java.net/browse/JDK-8233179","body":"Bug accepted: <a href=\"https://bugs.openjdk.java.net/browse/JDK-8233179\" rel=\"nofollow noreferrer\">bugs.openjdk.java.net/browse/JDK-8233179</a>"},{"owner":{"account_id":16472927,"reputation":1155,"user_id":11901563,"display_name":"Andy"},"score":0,"creation_date":1573032867,"post_id":58585654,"comment_id":103745244,"body_markdown":"Thank you very much, although I haven&#39;t found any other way at the moment.","body":"Thank you very much, although I haven&#39;t found any other way at the moment."}],"answers":[{"tags":[],"owner":{"account_id":27025135,"reputation":11,"user_id":20582531,"display_name":"Newbie"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669211107,"creation_date":1669211107,"answer_id":74547812,"question_id":58585654,"body_markdown":"For me it works like this:\r\n\r\n        private static class CoparaterAscending&lt;T&gt; implements Comparator&lt;T&gt; {\r\n\r\n        @Override\r\n        public int compare(T o1, T o2) {\r\n\r\n            int numberNode1 = Integer.parseInt(((CheckBox)o1).getText());\r\n            int numberNode2 = Integer.parseInt(((CheckBox)o2).getText());\r\n            System.out.println(numberNode1 + &quot; &quot; + numberNode2);\r\n            if ((numberNode1 &gt; numberNode2)) {\r\n                return 1;\r\n            } else if ((numberNode1 &lt; numberNode2)) {\r\n                return -1;\r\n            }\r\n            return 0;\r\n        }\r\n    }\r\n    \r\n    comp = new CoparaterAscending&lt;Node&gt;();\r\n    FXCollections.sort(selectedItemsView.getChildren(), comp);\r\n\r\n\r\nWhere the selectedItemsView is a VBox populated with CheckBoxes that are labled with unique numbers.","title":"How to sort node in the VBox in JavaFX? I Have a &quot;duplicate children added&quot; Exception","body":"<p>For me it works like this:</p>\n<pre><code>    private static class CoparaterAscending&lt;T&gt; implements Comparator&lt;T&gt; {\n\n    @Override\n    public int compare(T o1, T o2) {\n\n        int numberNode1 = Integer.parseInt(((CheckBox)o1).getText());\n        int numberNode2 = Integer.parseInt(((CheckBox)o2).getText());\n        System.out.println(numberNode1 + &quot; &quot; + numberNode2);\n        if ((numberNode1 &gt; numberNode2)) {\n            return 1;\n        } else if ((numberNode1 &lt; numberNode2)) {\n            return -1;\n        }\n        return 0;\n    }\n}\n\ncomp = new CoparaterAscending&lt;Node&gt;();\nFXCollections.sort(selectedItemsView.getChildren(), comp);\n</code></pre>\n<p>Where the selectedItemsView is a VBox populated with CheckBoxes that are labled with unique numbers.</p>\n"}],"owner":{"account_id":16472927,"reputation":1155,"user_id":11901563,"display_name":"Andy"},"comment_count":8,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":940,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"answer_count":1,"score":3,"last_activity_date":1669211107,"creation_date":1572235451,"question_id":58585654,"body_markdown":"I have got a JavaFX 8 VBox,and want to sort node in the VBox,But I have a Exception&quot;Children: duplicate children added&quot;.\r\n```Java\r\n    private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\r\n        if (!addList.isEmpty()) {\r\n\r\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\r\n            titledPane.setItems(addList);\r\n\r\n            stackedTitledPanes.getChildren().add(titledPane);\r\n            stackedTitledPanes.getChildren().sort(comparatorTitledPane);\r\n        }\r\n    }\r\n```\r\n\r\n\r\n\r\n\r\nI found a quick fix,but I think there might be a better solution.\r\n\r\n\r\n\r\n\r\n```Java\r\n  private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\r\n        if (!addList.isEmpty()) {\r\n\r\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\r\n            titledPane.setItems(addList);\r\n\r\n            stackedTitledPanes.getChildren().add(titledPane);\r\n\r\n            List list = new ArrayList(stackedTitledPanes.getChildren());\r\n\r\n            list.sort(comparatorTitledPane);\r\n            Collections.reverse(list);\r\n            stackedTitledPanes.getChildren().clear();\r\n            stackedTitledPanes.getChildren().addAll(list);\r\n        }\r\n    }\r\n```\r\n\r\nThis is the full stack trace\r\n\r\n```Java\r\nException in thread &quot;JavaFX Application Thread&quot; java.lang.IllegalArgumentException: Children: duplicate children added: parent = VBox@2cdae672\r\n\tat javafx.scene.Parent$2.onProposedChange(Parent.java:454)\r\n\tat com.sun.javafx.collections.VetoableListDecorator$VetoableListIteratorDecorator.set(VetoableListDecorator.java:768)\r\n\tat java.util.List.sort(List.java:482)\r\n\tat app.control.mytomato.StackedPanes.addTitledPane(StackedPanes.java:93)\r\n\tat app.control.mytomato.StackedPanes.access$000(StackedPanes.java:16)\r\n\tat app.control.mytomato.StackedPanes$3.onChanged(StackedPanes.java:62)\r\n\tat com.sun.javafx.collections.MapListenerHelper$SingleChange.fireValueChangedEvent(MapListenerHelper.java:163)\r\n\tat com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72)\r\n\tat com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115)\r\n\tat com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:173)\r\n\tat app.control.mytomato.StackedPanes.addItem(StackedPanes.java:127)\r\n\tat app.control.mytomato.StackedPanes.addItems(StackedPanes.java:119)\r\n\tat app.view.EditDialogControl.lambda$handleOkButton$0(EditDialogControl.java:88)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$null$5(PlatformImpl.java:295)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat com.sun.javafx.application.PlatformImpl.lambda$runLater$6(PlatformImpl.java:294)\r\n\tat com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\r\n\tat com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\r\n\tat com.sun.glass.ui.win.WinApplication.lambda$null$3(WinApplication.java:177)\r\n\tat java.lang.Thread.run(Thread.java:748)\r\n```","title":"How to sort node in the VBox in JavaFX? I Have a &quot;duplicate children added&quot; Exception","body":"<p>I have got a JavaFX 8 VBox,and want to sort node in the VBox,But I have a Exception\"Children: duplicate children added\".</p>\n\n<pre><code>    private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\n        if (!addList.isEmpty()) {\n\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\n            titledPane.setItems(addList);\n\n            stackedTitledPanes.getChildren().add(titledPane);\n            stackedTitledPanes.getChildren().sort(comparatorTitledPane);\n        }\n    }\n</code></pre>\n\n<p>I found a quick fix,but I think there might be a better solution.</p>\n\n<pre><code>  private void addTitledPane(ObservableList&lt;TomatoTask&gt; addList) {\n        if (!addList.isEmpty()) {\n\n            TitledPane titledPane = new TitledPane(addList.get(0).getDate());\n            titledPane.setItems(addList);\n\n            stackedTitledPanes.getChildren().add(titledPane);\n\n            List list = new ArrayList(stackedTitledPanes.getChildren());\n\n            list.sort(comparatorTitledPane);\n            Collections.reverse(list);\n            stackedTitledPanes.getChildren().clear();\n            stackedTitledPanes.getChildren().addAll(list);\n        }\n    }\n</code></pre>\n\n<p>This is the full stack trace</p>\n\n<pre><code>Exception in thread \"JavaFX Application Thread\" java.lang.IllegalArgumentException: Children: duplicate children added: parent = VBox@2cdae672\n    at javafx.scene.Parent$2.onProposedChange(Parent.java:454)\n    at com.sun.javafx.collections.VetoableListDecorator$VetoableListIteratorDecorator.set(VetoableListDecorator.java:768)\n    at java.util.List.sort(List.java:482)\n    at app.control.mytomato.StackedPanes.addTitledPane(StackedPanes.java:93)\n    at app.control.mytomato.StackedPanes.access$000(StackedPanes.java:16)\n    at app.control.mytomato.StackedPanes$3.onChanged(StackedPanes.java:62)\n    at com.sun.javafx.collections.MapListenerHelper$SingleChange.fireValueChangedEvent(MapListenerHelper.java:163)\n    at com.sun.javafx.collections.MapListenerHelper.fireValueChangedEvent(MapListenerHelper.java:72)\n    at com.sun.javafx.collections.ObservableMapWrapper.callObservers(ObservableMapWrapper.java:115)\n    at com.sun.javafx.collections.ObservableMapWrapper.put(ObservableMapWrapper.java:173)\n    at app.control.mytomato.StackedPanes.addItem(StackedPanes.java:127)\n    at app.control.mytomato.StackedPanes.addItems(StackedPanes.java:119)\n    at app.view.EditDialogControl.lambda$handleOkButton$0(EditDialogControl.java:88)\n    at com.sun.javafx.application.PlatformImpl.lambda$null$5(PlatformImpl.java:295)\n    at java.security.AccessController.doPrivileged(Native Method)\n    at com.sun.javafx.application.PlatformImpl.lambda$runLater$6(PlatformImpl.java:294)\n    at com.sun.glass.ui.InvokeLaterDispatcher$Future.run(InvokeLaterDispatcher.java:95)\n    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)\n    at com.sun.glass.ui.win.WinApplication.lambda$null$3(WinApplication.java:177)\n    at java.lang.Thread.run(Thread.java:748)\n</code></pre>\n"},{"tags":["java","java-17"],"comments":[{"owner":{"account_id":7195741,"reputation":1,"user_id":6110094,"accept_rate":83,"display_name":"0___________"},"score":0,"creation_date":1669020368,"post_id":74516048,"comment_id":131539073,"body_markdown":"Do not spam tags. How was C related to this question","body":"Do not spam tags. How was C related to this question"},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669021249,"post_id":74516048,"comment_id":131539314,"body_markdown":"JDK source code is from c","body":"JDK source code is from c"},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":2,"creation_date":1669046950,"post_id":74516048,"comment_id":131548647,"body_markdown":"There is a comment in BufferedInputStream right at the beginning:  &quot;As this class is used early during bootstrap, it&#39;s motivated to use Unsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater (or VarHandles) to reduce dependencies and improve startup time.&quot;","body":"There is a comment in BufferedInputStream right at the beginning:  &quot;As this class is used early during bootstrap, it&#39;s motivated to use Unsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater (or VarHandles) to reduce dependencies and improve startup time.&quot;"},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669096054,"post_id":74516048,"comment_id":131559574,"body_markdown":"@StefanZobel Of course I know the comment,I just want to know more details about it.","body":"@StefanZobel Of course I know the comment,I just want to know more details about it."},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":1,"creation_date":1669102641,"post_id":74516048,"comment_id":131561108,"body_markdown":"Well, that comment should at least answer your &quot;Why is necessary to use compareAndSetReference method?&quot; question.","body":"Well, that comment should at least answer your &quot;Why is necessary to use compareAndSetReference method?&quot; question."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1669106532,"post_id":74516048,"comment_id":131562300,"body_markdown":"Don’t ask two different questions at once. “What does BUF_OFFSET field mean” and “Why is necessary to use compareAndSetReference” are entirely unrelated.","body":"Don’t ask two different questions at once. “What does BUF_OFFSET field mean” and “Why is necessary to use compareAndSetReference” are entirely unrelated."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669110658,"post_id":74516048,"comment_id":131563747,"body_markdown":"@Holger ok,I have amended it.Only to ask what BUF_OFFSET is first.","body":"@Holger ok,I have amended it.Only to ask what BUF_OFFSET is first."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":1,"creation_date":1669110930,"post_id":74516048,"comment_id":131563862,"body_markdown":"This is an extreme implementation detail that you shouldn&#39;t concern yourself with unless you&#39;re going to be contributing to OpenJDK itself. As I said earlier, as a new Java programmer, why are you even trying to read this? You don&#39;t need read the Java implementation code to be able to use it. You&#39;ll likely just get lost in details like this, and it will in fact not learn you how to program/use Java well.","body":"This is an extreme implementation detail that you shouldn&#39;t concern yourself with unless you&#39;re going to be contributing to OpenJDK itself. As I said earlier, as a new Java programmer, why are you even trying to read this? You don&#39;t need read the Java implementation code to be able to use it. You&#39;ll likely just get lost in details like this, and it will in fact not learn you how to program/use Java well."},{"owner":{"account_id":3211603,"reputation":289317,"user_id":2711488,"display_name":"Holger"},"score":2,"creation_date":1669110941,"post_id":74516048,"comment_id":131563866,"body_markdown":"As the comment cited by Stefan Zobel already told, this class is deliberately not using `AtomicReferenceFieldUpdater` nor `VarHandle`, but a lowlevel class named `Unsafe` for the atomic update. This alternative does not encapsulate a `Field` object or equivalent but requires the raw offset into the object, to identify the field (memory location) to update. That’s why you see `BUF_OFFSET = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;)` → find the offset of the field `buf` and `U.compareAndSetReference(this, BUF_OFFSET, …)` → update the field `buf` of the current object (`this`).","body":"As the comment cited by Stefan Zobel already told, this class is deliberately not using <code>AtomicReferenceFieldUpdater</code> nor <code>VarHandle</code>, but a lowlevel class named <code>Unsafe</code> for the atomic update. This alternative does not encapsulate a <code>Field</code> object or equivalent but requires the raw offset into the object, to identify the field (memory location) to update. That’s why you see <code>BUF_OFFSET = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;)</code> → find the offset of the field <code>buf</code> and <code>U.compareAndSetReference(this, BUF_OFFSET, …)</code> → update the field <code>buf</code> of the current object (<code>this</code>)."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669114360,"post_id":74516048,"comment_id":131565165,"body_markdown":"@Holger Can I understand like this: the buf has a offset,the new longer array nbuf has a offset,too.The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset,so that let buf = nuf in the nextline.","body":"@Holger Can I understand like this: the buf has a offset,the new longer array nbuf has a offset,too.The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset,so that let buf = nuf in the nextline."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669115227,"post_id":74516048,"comment_id":131565458,"body_markdown":"@MarkRotteveel Thank you for your attention and advice!My Java level is probably for Google programming.I know the Java rules and grammar.When I start to write code,I am not familiar with the functions in details,that&#39;s why I am now reading source code.And that&#39;s no doubt to rise many problems when reading,but luckily I have found the treasure site--stackoverflow.So I begin to ask questions here.","body":"@MarkRotteveel Thank you for your attention and advice!My Java level is probably for Google programming.I know the Java rules and grammar.When I start to write code,I am not familiar with the functions in details,that&#39;s why I am now reading source code.And that&#39;s no doubt to rise many problems when reading,but luckily I have found the treasure site--stackoverflow.So I begin to ask questions here."},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":2,"creation_date":1669119969,"post_id":74516048,"comment_id":131567006,"body_markdown":"&quot;The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset ...&quot;. No, not at all. The `compareAndSetReference` call atomically updates the member variable `buf` to `nbuf` if it is currently holding `buffer`. Nothing else is happening here.","body":"&quot;The U.compareAndSetReference is to make BUF_OFFSET=nbuf &#39;s offset ...&quot;. No, not at all. The <code>compareAndSetReference</code> call atomically updates the member variable <code>buf</code> to <code>nbuf</code> if it is currently holding <code>buffer</code>. Nothing else is happening here."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669122232,"post_id":74516048,"comment_id":131567832,"body_markdown":"@StefanZobel But &quot;buffer=nbuf&quot; has been written after &quot;if(!U.compareAndSetReference)&quot;,what will happened if I remove the if statement?","body":"@StefanZobel But &quot;buffer=nbuf&quot; has been written after &quot;if(!U.compareAndSetReference)&quot;,what will happened if I remove the if statement?"},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":1,"creation_date":1669123315,"post_id":74516048,"comment_id":131568245,"body_markdown":"&quot;buffer=nbuf&quot; sets `buffer`, not `buf`","body":"&quot;buffer=nbuf&quot; sets <code>buffer</code>, not <code>buf</code>"},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669143367,"post_id":74516048,"comment_id":131576037,"body_markdown":"@StefanZobel I searched the word:&quot;AtomicReferenceFieldUpdater&quot; in google,and I realize it was using to change the volatile field&#39;s value.So the “compareAndSetReference” nearly does the samething?I guess,because of the word &quot;volatile&quot;,the buf couldn&#39;t let buf=nbuf directly,so it needs the “compareAndSetReference” to let nbuf replace the buf.","body":"@StefanZobel I searched the word:&quot;AtomicReferenceFieldUpdater&quot; in google,and I realize it was using to change the volatile field&#39;s value.So the “compareAndSetReference” nearly does the samething?I guess,because of the word &quot;volatile&quot;,the buf couldn&#39;t let buf=nbuf directly,so it needs the “compareAndSetReference” to let nbuf replace the buf."},{"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"score":4,"creation_date":1669146727,"post_id":74516048,"comment_id":131577039,"body_markdown":"It is `if buf == buffer buf = nbuf;` but in an atomic way. It&#39;s like `compareAndSet` in AtomicReferenceFieldUpdater. What is important is not only that the field is volatile but that the whole process of comparing (reading) the field against the expected value (`buffer`) and if that is matched setting the field to its new value (`nbuf`) is an `atomic` operation. As the comment says that could have been done with an AtomicReferenceFieldUpdater at the cost of loading additional classes during JVM startup (slowing down the startup) and that is what they wanted to avoid by using the Unsafe API.","body":"It is <code>if buf == buffer buf = nbuf;</code> but in an atomic way. It&#39;s like <code>compareAndSet</code> in AtomicReferenceFieldUpdater. What is important is not only that the field is volatile but that the whole process of comparing (reading) the field against the expected value (<code>buffer</code>) and if that is matched setting the field to its new value (<code>nbuf</code>) is an <code>atomic</code> operation. As the comment says that could have been done with an AtomicReferenceFieldUpdater at the cost of loading additional classes during JVM startup (slowing down the startup) and that is what they wanted to avoid by using the Unsafe API."},{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669178735,"post_id":74516048,"comment_id":131583156,"body_markdown":"@StefanZobel I finally understand ! Thank you for your patience.I want to accept your answer.Would you want to copy your comments to the answer column so that I can accept it?","body":"@StefanZobel I finally understand ! Thank you for your patience.I want to accept your answer.Would you want to copy your comments to the answer column so that I can accept it?"}],"answers":[{"tags":[],"owner":{"account_id":18420551,"reputation":404,"user_id":13418296,"display_name":"Generous Badger"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669111061,"creation_date":1669111061,"answer_id":74530699,"question_id":74516048,"body_markdown":"`BUF_OFFSET` is simply the offset of the `buf` field in the `BufferedInputStream` object and required to access that field using the method `Unsafe.compareAndSetReference`. As the usage of [the (not officially documented) `sun.misc.Unsafe` class][1] implies this is low-level code that unsafely interacts with assumptions about objects and their access.\r\n\r\n This method in turn is used as an alternative to [`AtomicReferenceFieldUpdater`][2] as described in the comment at the beginning of the class:\r\n\r\n&gt; As this class is used early during bootstrap, it&#39;s motivated to use\r\n      Unsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater\r\n      (or VarHandles) to reduce dependencies and improve startup time.\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/5574241/why-does-sun-misc-unsafe-exist-and-how-can-it-be-used-in-the-real-world\r\n  [2]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicReferenceFieldUpdater.html","title":"What does BUF_OFFSET field mean in BufferedInputStream?","body":"<p><code>BUF_OFFSET</code> is simply the offset of the <code>buf</code> field in the <code>BufferedInputStream</code> object and required to access that field using the method <code>Unsafe.compareAndSetReference</code>. As the usage of <a href=\"https://stackoverflow.com/questions/5574241/why-does-sun-misc-unsafe-exist-and-how-can-it-be-used-in-the-real-world\">the (not officially documented) <code>sun.misc.Unsafe</code> class</a> implies this is low-level code that unsafely interacts with assumptions about objects and their access.</p>\n<p>This method in turn is used as an alternative to <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/atomic/AtomicReferenceFieldUpdater.html\" rel=\"nofollow noreferrer\"><code>AtomicReferenceFieldUpdater</code></a> as described in the comment at the beginning of the class:</p>\n<blockquote>\n<p>As this class is used early during bootstrap, it's motivated to use\nUnsafe.compareAndSetObject instead of AtomicReferenceFieldUpdater\n(or VarHandles) to reduce dependencies and improve startup time.</p>\n</blockquote>\n"},{"comments":[{"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"score":0,"creation_date":1669213292,"post_id":74547788,"comment_id":131593618,"body_markdown":"Perfect answer！","body":"Perfect answer！"}],"tags":[],"owner":{"account_id":1546239,"reputation":3192,"user_id":1439733,"display_name":"Stefan Zobel"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669211001,"creation_date":1669211001,"answer_id":74547788,"question_id":74516048,"body_markdown":"The `fill()` method fills the internal `buf` member with more data replacing it by another array of a different size when necessary.\r\nCalls to fill() are protected by an internal lock (or synchronized when BufferedInputStream is sub-classed). When the InputStream gets closed `buf` is set to `null` to indicate that the stream is closed.\r\nHowever, calls to `close()` can be asynchronous in the sense that close() is **not** protected against concurrent access in the way that calls to `fill()` are.\r\nHence, the need arises to check whether `buf == null` (stream is closed) in `fill()` and do `if (buf == buffer) buf = null;` (`buf` hasn&#39;t been changed concurrently by fill()) in `close()` in a threadsafe (atomic) manner.\r\n\r\nThis is done by using atomic CAS (compare-and-swap / compare-and-set) instructions which compare the content of a memory location with a given value and, only if they are the same, modifies the content of that location to a given new value as a *single atomic operation*.\r\nAtomicity guarantees that the write is conditional on the current value being up-to-date (i.e., not being modified by another thread in the meantime).\r\n\r\nThere are several ways to do this in Java: the AtomicXyzFieldUpdater classes in the j.u.concurrent.atomic package, the j.l.invoke VarHandle API introduced in Java 9 and a JDK-internal `Unsafe` API not intended for public use.\r\n\r\nSince BufferedInputStream is used early in the JVM bootstrap (that means the initialization phase at JVM startup) it is important to a) avoid using APIs that may not have been initialized at that time (wich can lead to dependency cycles) and b) to avoid slowing down the bootstrap by using APIs that have to be initialized first to be usable. That&#39;s the rationale for using the internal `Unsafe` API in this case.\r\n\r\nThe Unsafe method we are talking about is the following:\r\n\r\n    /**\r\n     * Atomically updates Java variable to {@code x} if it is currently\r\n     * holding {@code expected}.\r\n     *\r\n     * &lt;p&gt;This operation has memory semantics of a {@code volatile} read\r\n     * and write.  Corresponds to C11 atomic_compare_exchange_strong.\r\n     *\r\n     * @return {@code true} if successful\r\n     */\r\n    @IntrinsicCandidate\r\n    public final native boolean compareAndSetReference(Object o, long offset,\r\n                                                       Object expected,\r\n                                                       Object x);\r\n\r\nThe first argument is the object instance whose field should be set, the second argument is the offset of the field to be updated in that object (in effect a relative memory address), the third argument is the value that we expect to be currently in that field and the fourth argument is the value that we want to be stored in that field if our expectation turns out to be correct.\r\n\r\nThe offset of the field can be determined by using\r\n\r\n    /**\r\n     * Reports the location of the field with a given name in the storage\r\n     * allocation of its class.\r\n     *\r\n     * @throws NullPointerException if any parameter is {@code null}.\r\n     * @throws InternalError if there is no field named {@code name} declared\r\n     *         in class {@code c}, i.e., if {@code c.getDeclaredField(name)}\r\n     *         would throw {@code java.lang.NoSuchFieldException}.\r\n     *\r\n     * @see #objectFieldOffset(Field)\r\n     */\r\n    public long objectFieldOffset(Class&lt;?&gt; c, String name) {\r\n        if (c == null || name == null) {\r\n            throw new NullPointerException();\r\n        }\r\n\r\n        return objectFieldOffset1(c, name);\r\n    }\r\n\r\nThe field offset is a constant that needs to be determined only once and it is usually stored in a `static final long`. This is what **BUF_OFFSET** is (the offset of the `buf` field inside a BufferedInputStream instance).\r\n\r\nSo, the (threadsafe) code \r\n\r\n    if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\r\n        throw new IOException(&quot;Stream closed&quot;);\r\n    }\r\n\r\nis logically equivalent to the (single-threaded) code\r\n\r\n    if (buf == buffer) {\r\n        buf = nbuf;\r\n    } else {\r\n        throw new IOException(&quot;Stream closed&quot;);\r\n    }\r\n\r\nThe only difference is that `compareAndSetReference` is atomic while the latter code is not.\r\n\r\n","title":"What does BUF_OFFSET field mean in BufferedInputStream?","body":"<p>The <code>fill()</code> method fills the internal <code>buf</code> member with more data replacing it by another array of a different size when necessary.\nCalls to fill() are protected by an internal lock (or synchronized when BufferedInputStream is sub-classed). When the InputStream gets closed <code>buf</code> is set to <code>null</code> to indicate that the stream is closed.\nHowever, calls to <code>close()</code> can be asynchronous in the sense that close() is <strong>not</strong> protected against concurrent access in the way that calls to <code>fill()</code> are.\nHence, the need arises to check whether <code>buf == null</code> (stream is closed) in <code>fill()</code> and do <code>if (buf == buffer) buf = null;</code> (<code>buf</code> hasn't been changed concurrently by fill()) in <code>close()</code> in a threadsafe (atomic) manner.</p>\n<p>This is done by using atomic CAS (compare-and-swap / compare-and-set) instructions which compare the content of a memory location with a given value and, only if they are the same, modifies the content of that location to a given new value as a <em>single atomic operation</em>.\nAtomicity guarantees that the write is conditional on the current value being up-to-date (i.e., not being modified by another thread in the meantime).</p>\n<p>There are several ways to do this in Java: the AtomicXyzFieldUpdater classes in the j.u.concurrent.atomic package, the j.l.invoke VarHandle API introduced in Java 9 and a JDK-internal <code>Unsafe</code> API not intended for public use.</p>\n<p>Since BufferedInputStream is used early in the JVM bootstrap (that means the initialization phase at JVM startup) it is important to a) avoid using APIs that may not have been initialized at that time (wich can lead to dependency cycles) and b) to avoid slowing down the bootstrap by using APIs that have to be initialized first to be usable. That's the rationale for using the internal <code>Unsafe</code> API in this case.</p>\n<p>The Unsafe method we are talking about is the following:</p>\n<pre><code>/**\n * Atomically updates Java variable to {@code x} if it is currently\n * holding {@code expected}.\n *\n * &lt;p&gt;This operation has memory semantics of a {@code volatile} read\n * and write.  Corresponds to C11 atomic_compare_exchange_strong.\n *\n * @return {@code true} if successful\n */\n@IntrinsicCandidate\npublic final native boolean compareAndSetReference(Object o, long offset,\n                                                   Object expected,\n                                                   Object x);\n</code></pre>\n<p>The first argument is the object instance whose field should be set, the second argument is the offset of the field to be updated in that object (in effect a relative memory address), the third argument is the value that we expect to be currently in that field and the fourth argument is the value that we want to be stored in that field if our expectation turns out to be correct.</p>\n<p>The offset of the field can be determined by using</p>\n<pre><code>/**\n * Reports the location of the field with a given name in the storage\n * allocation of its class.\n *\n * @throws NullPointerException if any parameter is {@code null}.\n * @throws InternalError if there is no field named {@code name} declared\n *         in class {@code c}, i.e., if {@code c.getDeclaredField(name)}\n *         would throw {@code java.lang.NoSuchFieldException}.\n *\n * @see #objectFieldOffset(Field)\n */\npublic long objectFieldOffset(Class&lt;?&gt; c, String name) {\n    if (c == null || name == null) {\n        throw new NullPointerException();\n    }\n\n    return objectFieldOffset1(c, name);\n}\n</code></pre>\n<p>The field offset is a constant that needs to be determined only once and it is usually stored in a <code>static final long</code>. This is what <strong>BUF_OFFSET</strong> is (the offset of the <code>buf</code> field inside a BufferedInputStream instance).</p>\n<p>So, the (threadsafe) code</p>\n<pre><code>if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\n    throw new IOException(&quot;Stream closed&quot;);\n}\n</code></pre>\n<p>is logically equivalent to the (single-threaded) code</p>\n<pre><code>if (buf == buffer) {\n    buf = nbuf;\n} else {\n    throw new IOException(&quot;Stream closed&quot;);\n}\n</code></pre>\n<p>The only difference is that <code>compareAndSetReference</code> is atomic while the latter code is not.</p>\n"}],"owner":{"account_id":26962173,"reputation":41,"user_id":20529695,"display_name":"cuo yiban"},"comment_count":17,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":133,"favorite_count":0,"down_vote_count":2,"up_vote_count":2,"accepted_answer_id":74547788,"answer_count":2,"score":0,"last_activity_date":1669211001,"creation_date":1669019338,"question_id":74516048,"body_markdown":"This is the field.\r\n```\r\nprivate static final long BUF_OFFSET\r\n        = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;);\r\n```\r\n\r\nThis is code which using BUF_OFFSET.\r\n\r\n```\r\nprivate void fill() throws IOException {\r\n    byte[] buffer = getBufIfOpen();\r\n    if (markpos &lt; 0)\r\n        pos = 0;            /* no mark: throw away the buffer */\r\n    else if (pos &gt;= buffer.length) { /* no room left in buffer */\r\n        if (markpos &gt; 0) {  /* can throw away early part of the buffer */\r\n            int sz = pos - markpos;\r\n            System.arraycopy(buffer, markpos, buffer, 0, sz);\r\n            pos = sz;\r\n            markpos = 0;\r\n        } else if (buffer.length &gt;= marklimit) {\r\n            markpos = -1;   /* buffer got too big, invalidate mark */\r\n            pos = 0;        /* drop buffer contents */\r\n        } else {            /* grow buffer */\r\n            int nsz = ArraysSupport.newLength(pos,\r\n                    1,  /* minimum growth */\r\n                    pos /* preferred growth */);\r\n            if (nsz &gt; marklimit)\r\n                nsz = marklimit;\r\n            byte[] nbuf = new byte[nsz];\r\n            System.arraycopy(buffer, 0, nbuf, 0, pos);\r\n            **if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\r\n                // Can&#39;t replace buf if there was an async close.\r\n                // Note: This would need to be changed if fill()\r\n                // is ever made accessible to multiple threads.\r\n                // But for now, the only way CAS can fail is via close.\r\n                // assert buf == null;\r\n                throw new IOException(&quot;Stream closed&quot;);\r\n            }**\r\n            buffer = nbuf;\r\n        }\r\n    }\r\n    count = pos;\r\n    int n = getInIfOpen().read(buffer, pos, buffer.length - pos);\r\n    if (n &gt; 0)\r\n        count = n + pos;\r\n}\r\n```\r\n\r\nThis is the code in JDK source about return the value of BUF_OFFSET.\r\n\r\n\r\n```\r\nstatic jlong find_field_offset(jclass clazz, jstring name, TRAPS) {\r\n  assert(clazz != NULL, &quot;clazz must not be NULL&quot;);\r\n  assert(name != NULL, &quot;name must not be NULL&quot;);\r\n\r\n  ResourceMark rm(THREAD);\r\n  char *utf_name = java_lang_String::as_utf8_string(JNIHandles::resolve_non_null(name));\r\n\r\n  InstanceKlass* k = InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz)));\r\n\r\n  jint offset = -1;\r\n  for (JavaFieldStream fs(k); !fs.done(); fs.next()) {\r\n    Symbol *name = fs.name();\r\n    if (name-&gt;equals(utf_name)) {\r\n      **offset** = fs.offset();\r\n      break;\r\n    }\r\n  }\r\n  if (offset &lt; 0) {\r\n    THROW_0(vmSymbols::java_lang_InternalError());\r\n  }\r\n  return field_offset_from_byte_offset(offset);\r\n}\r\n```\r\n\r\nWhat does BUF_OFFSET field mean in BufferedInputStream?\r\n\r\nI check the BUF_OFFSET out in JDK source code\r\ngithub:https://github.com/openjdk/jdk/tree/jdk-17%2B35\r\nI have asked a question about what JavaFieldStream is in here.But I am still confused about the BUF_OFFSET.\r\n\r\nI guess...Maybe BUF_OFFSET is simliar with the param off which is from FileInputStream&#39;s read method?\r\n```\r\npublic int read(byte b[], int off, int len) throws IOException {\r\n    return readBytes(b, off, len);\r\n}\r\n```\r\nIn here,off means where the data copys and fills in from C array to the Java array.So BUF_OFFSET means where  data fills in JVM?It&#39;s just my guess.\r\n\r\n","title":"What does BUF_OFFSET field mean in BufferedInputStream?","body":"<p>This is the field.</p>\n<pre><code>private static final long BUF_OFFSET\n        = U.objectFieldOffset(BufferedInputStream.class, &quot;buf&quot;);\n</code></pre>\n<p>This is code which using BUF_OFFSET.</p>\n<pre><code>private void fill() throws IOException {\n    byte[] buffer = getBufIfOpen();\n    if (markpos &lt; 0)\n        pos = 0;            /* no mark: throw away the buffer */\n    else if (pos &gt;= buffer.length) { /* no room left in buffer */\n        if (markpos &gt; 0) {  /* can throw away early part of the buffer */\n            int sz = pos - markpos;\n            System.arraycopy(buffer, markpos, buffer, 0, sz);\n            pos = sz;\n            markpos = 0;\n        } else if (buffer.length &gt;= marklimit) {\n            markpos = -1;   /* buffer got too big, invalidate mark */\n            pos = 0;        /* drop buffer contents */\n        } else {            /* grow buffer */\n            int nsz = ArraysSupport.newLength(pos,\n                    1,  /* minimum growth */\n                    pos /* preferred growth */);\n            if (nsz &gt; marklimit)\n                nsz = marklimit;\n            byte[] nbuf = new byte[nsz];\n            System.arraycopy(buffer, 0, nbuf, 0, pos);\n            **if (!U.compareAndSetReference(this, BUF_OFFSET, buffer, nbuf)) {\n                // Can't replace buf if there was an async close.\n                // Note: This would need to be changed if fill()\n                // is ever made accessible to multiple threads.\n                // But for now, the only way CAS can fail is via close.\n                // assert buf == null;\n                throw new IOException(&quot;Stream closed&quot;);\n            }**\n            buffer = nbuf;\n        }\n    }\n    count = pos;\n    int n = getInIfOpen().read(buffer, pos, buffer.length - pos);\n    if (n &gt; 0)\n        count = n + pos;\n}\n</code></pre>\n<p>This is the code in JDK source about return the value of BUF_OFFSET.</p>\n<pre><code>static jlong find_field_offset(jclass clazz, jstring name, TRAPS) {\n  assert(clazz != NULL, &quot;clazz must not be NULL&quot;);\n  assert(name != NULL, &quot;name must not be NULL&quot;);\n\n  ResourceMark rm(THREAD);\n  char *utf_name = java_lang_String::as_utf8_string(JNIHandles::resolve_non_null(name));\n\n  InstanceKlass* k = InstanceKlass::cast(java_lang_Class::as_Klass(JNIHandles::resolve_non_null(clazz)));\n\n  jint offset = -1;\n  for (JavaFieldStream fs(k); !fs.done(); fs.next()) {\n    Symbol *name = fs.name();\n    if (name-&gt;equals(utf_name)) {\n      **offset** = fs.offset();\n      break;\n    }\n  }\n  if (offset &lt; 0) {\n    THROW_0(vmSymbols::java_lang_InternalError());\n  }\n  return field_offset_from_byte_offset(offset);\n}\n</code></pre>\n<p>What does BUF_OFFSET field mean in BufferedInputStream?</p>\n<p>I check the BUF_OFFSET out in JDK source code\ngithub:<a href=\"https://github.com/openjdk/jdk/tree/jdk-17%2B35\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/tree/jdk-17%2B35</a>\nI have asked a question about what JavaFieldStream is in here.But I am still confused about the BUF_OFFSET.</p>\n<p>I guess...Maybe BUF_OFFSET is simliar with the param off which is from FileInputStream's read method?</p>\n<pre><code>public int read(byte b[], int off, int len) throws IOException {\n    return readBytes(b, off, len);\n}\n</code></pre>\n<p>In here,off means where the data copys and fills in from C array to the Java array.So BUF_OFFSET means where  data fills in JVM?It's just my guess.</p>\n"},{"tags":["java","elasticsearch","gradle","intellij-idea","migration"],"comments":[{"owner":{"account_id":5843921,"reputation":210885,"user_id":4604579,"display_name":"Val"},"score":1,"creation_date":1669211141,"post_id":74547732,"comment_id":131592730,"body_markdown":"`class file has wrong version 61.0, should be 55.0` this usually means you don&#39;t have the correct JAVA version. 8.5.1 requires [Java 17 or higher](https://www.elastic.co/support/matrix#matrix_jvm)","body":"<code>class file has wrong version 61.0, should be 55.0</code> this usually means you don&#39;t have the correct JAVA version. 8.5.1 requires <a href=\"https://www.elastic.co/support/matrix#matrix_jvm\" rel=\"nofollow noreferrer\">Java 17 or higher</a>"}],"owner":{"account_id":21666948,"reputation":11,"user_id":15985151,"display_name":"karthick m"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":322,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669210798,"creation_date":1669210798,"question_id":74547732,"body_markdown":"```\r\n/Query.java:3: error: cannot access QueryBuilder\r\nimport org.elasticsearch.index.query.QueryBuilder;\r\n                                    ^\r\n  bad class file: /home/runner/.gradle/caches/modules-2/files-2.1/org.elasticsearch/elasticsearch/8.5.1/67dbb2f5b343de39ec14b8eb1894be353343bce1/elasticsearch-8.5.1.jar(/org/elasticsearch/index/query/QueryBuilder.class)\r\n    class file has wrong version 61.0, should be 55.0\r\n    Please remove or make sure it appears in the correct subdirectory of the classpath.\r\n```\r\n\r\n\r\nI tried gradle clean and rebuild the project. it still happens","title":"error: cannot access QueryBuilder Elasticserach 8.5.1","body":"<pre><code>/Query.java:3: error: cannot access QueryBuilder\nimport org.elasticsearch.index.query.QueryBuilder;\n                                    ^\n  bad class file: /home/runner/.gradle/caches/modules-2/files-2.1/org.elasticsearch/elasticsearch/8.5.1/67dbb2f5b343de39ec14b8eb1894be353343bce1/elasticsearch-8.5.1.jar(/org/elasticsearch/index/query/QueryBuilder.class)\n    class file has wrong version 61.0, should be 55.0\n    Please remove or make sure it appears in the correct subdirectory of the classpath.\n</code></pre>\n<p>I tried gradle clean and rebuild the project. it still happens</p>\n"},{"tags":["java","hibernate","hql","hibernate3"],"comments":[{"owner":{"account_id":7664445,"reputation":3648,"user_id":5808553,"accept_rate":64,"display_name":"Rajeev Ranjan"},"score":2,"creation_date":1508749167,"post_id":1239723,"comment_id":80718082,"body_markdown":"I am using `Hibernate-5.0.12`. Is this still not available? It would be really heavy to get a million or so records and then apply the filter on it- `setMaxResults` over it as noticed by @Rachel in the answer by @skaffman.","body":"I am using <code>Hibernate-5.0.12</code>. Is this still not available? It would be really heavy to get a million or so records and then apply the filter on it- <code>setMaxResults</code> over it as noticed by @Rachel in the answer by @skaffman."}],"answers":[{"comments":[{"owner":{"account_id":40332,"reputation":8882,"user_id":116880,"accept_rate":94,"display_name":"stevedbrown"},"score":47,"creation_date":1249573141,"post_id":1239739,"comment_id":1065712,"body_markdown":"That&#39;s not really all that exciting.","body":"That&#39;s not really all that exciting."},{"owner":{"account_id":26360,"reputation":17149,"user_id":68524,"accept_rate":71,"display_name":"pjp"},"score":9,"creation_date":1249574390,"post_id":1239739,"comment_id":1065842,"body_markdown":"I don&#39;t find HQL exciting either. Why not write a view on your DB server that applies the limit and then get HQL to look at that view :P","body":"I don&#39;t find HQL exciting either. Why not write a view on your DB server that applies the limit and then get HQL to look at that view :P"},{"owner":{"account_id":40332,"reputation":8882,"user_id":116880,"accept_rate":94,"display_name":"stevedbrown"},"score":1,"creation_date":1249574861,"post_id":1239739,"comment_id":1065892,"body_markdown":"It&#39;s just one of those things, while SQL is much easier than HQL for each query, creating views and writing native SQL tends to be not so great for refactoring.  I try to avoid it when I can.  That actual real problem was the I wrote my MySQL query wrong anyways and thought setMaxResults was being weird.  It wasn&#39;t.","body":"It&#39;s just one of those things, while SQL is much easier than HQL for each query, creating views and writing native SQL tends to be not so great for refactoring.  I try to avoid it when I can.  That actual real problem was the I wrote my MySQL query wrong anyways and thought setMaxResults was being weird.  It wasn&#39;t."},{"owner":{"account_id":316018,"reputation":2519,"user_id":631965,"accept_rate":68,"display_name":"Olgun Kaya"},"score":1,"creation_date":1541501863,"post_id":1239739,"comment_id":93230709,"body_markdown":"and if you try to switch between different DBMS vendors, pain is waiting for you.","body":"and if you try to switch between different DBMS vendors, pain is waiting for you."},{"owner":{"account_id":15824695,"reputation":327,"user_id":11417995,"display_name":"mohamed amine salah"},"score":0,"creation_date":1611594321,"post_id":1239739,"comment_id":116496626,"body_markdown":"instead of using limit I used pageable to avoid the extra data","body":"instead of using limit I used pageable to avoid the extra data"}],"tags":[],"owner":{"account_id":26360,"reputation":17149,"user_id":68524,"accept_rate":71,"display_name":"pjp"},"comment_count":5,"down_vote_count":1,"up_vote_count":22,"is_accepted":false,"score":21,"last_activity_date":1249573014,"creation_date":1249573014,"answer_id":1239739,"question_id":1239723,"body_markdown":"If you don&#39;t want to use `setMaxResults()` on the `Query` object then you could always revert back to using normal SQL.","title":"How do you do a limit query in JPQL or HQL?","body":"<p>If you don't want to use <code>setMaxResults()</code> on the <code>Query</code> object then you could always revert back to using normal SQL.</p>\n"},{"comments":[{"owner":{"account_id":40332,"reputation":8882,"user_id":116880,"accept_rate":94,"display_name":"stevedbrown"},"score":1,"creation_date":1249573553,"post_id":1239745,"comment_id":1065746,"body_markdown":"I was hoping somehow that they realized that that is annoying.  \n\nAlso, if you looked at the source code, they had implemented it for every database, and every database is different.  Oh well, that&#39;s sad.","body":"I was hoping somehow that they realized that that is annoying.    Also, if you looked at the source code, they had implemented it for every database, and every database is different.  Oh well, that&#39;s sad."},{"owner":{"account_id":3001,"reputation":138707,"user_id":4249,"accept_rate":84,"display_name":"matt b"},"score":3,"creation_date":1249576524,"post_id":1239745,"comment_id":1066101,"body_markdown":"I would argue that Hibernate 3&#39;s approach is more correct. Your usage of Hibernate is meant to be database-agnostic, so you should have to do these sorts of things in an abstract manner.","body":"I would argue that Hibernate 3&#39;s approach is more correct. Your usage of Hibernate is meant to be database-agnostic, so you should have to do these sorts of things in an abstract manner."},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":6,"creation_date":1249576722,"post_id":1239745,"comment_id":1066127,"body_markdown":"I agree, but it makes migration is royal pain in the ass when features are dropped like that.","body":"I agree, but it makes migration is royal pain in the ass when features are dropped like that."},{"owner":{"account_id":54888,"reputation":101121,"user_id":164299,"accept_rate":99,"display_name":"Rachel"},"score":58,"creation_date":1327694767,"post_id":1239745,"comment_id":11339082,"body_markdown":"but with setMaxResults, first query is run and then on the resultset you call `setMaxResults` which would take limited number of result rows from resultset and display it to the user, in my case i have 3 million records which are queried and then am calling setMaxResults to set 50 records but i do not want to do that, while query itself i want to query for 50 records, is there a way to do that?","body":"but with setMaxResults, first query is run and then on the resultset you call <code>setMaxResults</code> which would take limited number of result rows from resultset and display it to the user, in my case i have 3 million records which are queried and then am calling setMaxResults to set 50 records but i do not want to do that, while query itself i want to query for 50 records, is there a way to do that?"},{"owner":{"account_id":2205222,"reputation":1546,"user_id":1948625,"accept_rate":62,"display_name":"Thierry_S"},"score":3,"creation_date":1383584454,"post_id":1239745,"comment_id":29388024,"body_markdown":"Old post I know. I fully agree with Rachel. Using NHibernate (.Net port of Hibernate), I&#39;ve recently upgraded from 2 to 3 and same thing, top X is now throwing a parser error. However, when I added setMaxResults on the query, it did generate a TOP X in the resulting SQL (using MsSql2008Dialect). This is good.","body":"Old post I know. I fully agree with Rachel. Using NHibernate (.Net port of Hibernate), I&#39;ve recently upgraded from 2 to 3 and same thing, top X is now throwing a parser error. However, when I added setMaxResults on the query, it did generate a TOP X in the resulting SQL (using MsSql2008Dialect). This is good."},{"owner":{"account_id":1212298,"reputation":27085,"user_id":1180621,"accept_rate":100,"display_name":"Andrejs"},"score":18,"creation_date":1419328557,"post_id":1239745,"comment_id":43656945,"body_markdown":"@Rachel With `setMaxResults` hibernate will append the `limit` part to the query. It will not get all the results. You can check the query it produces by enabling: `&lt;property name=&quot;show_sql&quot;&gt;true&lt;/property&gt;`","body":"@Rachel With <code>setMaxResults</code> hibernate will append the <code>limit</code> part to the query. It will not get all the results. You can check the query it produces by enabling: <code>&lt;property name=&quot;show_sql&quot;&gt;true&lt;&#47;property&gt;</code>"},{"owner":{"account_id":2056278,"reputation":23340,"user_id":1833961,"accept_rate":54,"display_name":"bvdb"},"score":0,"creation_date":1437691325,"post_id":1239745,"comment_id":51150117,"body_markdown":"It would only make sense that this feature is not supported by all databases. For example: Oracle&#39;s SQL does not have a `limit` or `top` keyword, it has a `rownum` though, but you can&#39;t use it in combination with sorting, unless you wrap it (i.e. use subqueries). But that makes it hard to combine it with a `join`. MySQL and Teradata use `top` and requires it to be right in front of the query, but mysql requires it to be all the way at the back using the `limit` keyword. I have no trouble believing that MySQL and SQL Server support it, but I would be surprised if Oracle did.","body":"It would only make sense that this feature is not supported by all databases. For example: Oracle&#39;s SQL does not have a <code>limit</code> or <code>top</code> keyword, it has a <code>rownum</code> though, but you can&#39;t use it in combination with sorting, unless you wrap it (i.e. use subqueries). But that makes it hard to combine it with a <code>join</code>. MySQL and Teradata use <code>top</code> and requires it to be right in front of the query, but mysql requires it to be all the way at the back using the <code>limit</code> keyword. I have no trouble believing that MySQL and SQL Server support it, but I would be surprised if Oracle did."},{"owner":{"account_id":1693760,"reputation":9824,"user_id":1555615,"accept_rate":62,"display_name":"Marinos An"},"score":0,"creation_date":1488889049,"post_id":1239745,"comment_id":72422353,"body_markdown":"I don&#39;t think it didn&#39;t work in hibernate 3. In jboss 5.1.0.GA which included Hibernate 3.3.1 limit was working fine.","body":"I don&#39;t think it didn&#39;t work in hibernate 3. In jboss 5.1.0.GA which included Hibernate 3.3.1 limit was working fine."},{"owner":{"account_id":3021726,"reputation":1856,"user_id":2562592,"display_name":"toongeorges"},"score":1,"creation_date":1497977714,"post_id":1239745,"comment_id":76303114,"body_markdown":"@Andrejs when the query uses fetch joins, it appears that `setMaxResults()` does not add `limit` to the query (for Oracle DB), but loads all the records in memory and does the reduction of the number of records there.  When you have millions of matching records, that means an OutOfMemoryError (or related error)","body":"@Andrejs when the query uses fetch joins, it appears that <code>setMaxResults()</code> does not add <code>limit</code> to the query (for Oracle DB), but loads all the records in memory and does the reduction of the number of records there.  When you have millions of matching records, that means an OutOfMemoryError (or related error)"},{"owner":{"account_id":7664445,"reputation":3648,"user_id":5808553,"accept_rate":64,"display_name":"Rajeev Ranjan"},"score":0,"creation_date":1508742731,"post_id":1239745,"comment_id":80714697,"body_markdown":"I am using `Hibernate-5.0.12`. Is this still not available? It would be really heavy to get a million or so records and then apply the filter it- `setMaxResults` over it as noticed by @Rachel.","body":"I am using <code>Hibernate-5.0.12</code>. Is this still not available? It would be really heavy to get a million or so records and then apply the filter it- <code>setMaxResults</code> over it as noticed by @Rachel."},{"owner":{"account_id":6548214,"reputation":1399,"user_id":5063469,"display_name":"Mattias Martens"},"score":0,"creation_date":1512078410,"post_id":1239745,"comment_id":82123840,"body_markdown":"Take a look at this page which explains the rationale behind this decision: https://dzone.com/articles/hibernate-tuning-queries-using\nIn particular, the LIMIT keyword is not database-agnostic, so setMaxResults is needed to convert the query to the appropriate keyword in your dialect.\nSecond, if the query involves a FETCH JOIN, the LIMIT keyword will not make sense since it will apply to rows, not parent entities. Hence Hibernate does not include it.\nGetting a small piece of data from many large tables is still a problem, but hopefully this will shed light on Hibernate&#39;s limitations here.","body":"Take a look at this page which explains the rationale behind this decision: <a href=\"https://dzone.com/articles/hibernate-tuning-queries-using\" rel=\"nofollow noreferrer\">dzone.com/articles/hibernate-tuning-queries-using</a> In particular, the LIMIT keyword is not database-agnostic, so setMaxResults is needed to convert the query to the appropriate keyword in your dialect. Second, if the query involves a FETCH JOIN, the LIMIT keyword will not make sense since it will apply to rows, not parent entities. Hence Hibernate does not include it. Getting a small piece of data from many large tables is still a problem, but hopefully this will shed light on Hibernate&#39;s limitations here."}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":11,"down_vote_count":0,"up_vote_count":336,"is_accepted":true,"score":336,"last_activity_date":1292145393,"creation_date":1249573073,"answer_id":1239745,"question_id":1239723,"body_markdown":"[This was posted][1] on the Hibernate forum a few years back when asked about why this worked in Hibernate 2 but not in Hibernate 3:\r\n\r\n&gt; Limit was *never* a supported clause\r\n&gt; in HQL. You are meant to use\r\n&gt; setMaxResults().\r\n\r\nSo if it worked in Hibernate 2, it seems that was by coincidence, rather than by design. I *think* this was because the Hibernate 2 HQL parser would replace the bits of the query that it recognised as HQL, and leave the rest as it was, so you could sneak in some native SQL. Hibernate 3, however, has a proper AST HQL Parser, and it&#39;s a lot less forgiving.\r\n\r\nI think `Query.setMaxResults()` really is your only option.\r\n\r\n  [1]: https://forum.hibernate.org/viewtopic.php?f=9&amp;t=939314","title":"How do you do a limit query in JPQL or HQL?","body":"<p><a href=\"https://forum.hibernate.org/viewtopic.php?f=9&amp;t=939314\" rel=\"noreferrer\">This was posted</a> on the Hibernate forum a few years back when asked about why this worked in Hibernate 2 but not in Hibernate 3:</p>\n\n<blockquote>\n  <p>Limit was <em>never</em> a supported clause\n  in HQL. You are meant to use\n  setMaxResults().</p>\n</blockquote>\n\n<p>So if it worked in Hibernate 2, it seems that was by coincidence, rather than by design. I <em>think</em> this was because the Hibernate 2 HQL parser would replace the bits of the query that it recognised as HQL, and leave the rest as it was, so you could sneak in some native SQL. Hibernate 3, however, has a proper AST HQL Parser, and it's a lot less forgiving.</p>\n\n<p>I think <code>Query.setMaxResults()</code> really is your only option.</p>\n"},{"comments":[{"owner":{"account_id":3021726,"reputation":1856,"user_id":2562592,"display_name":"toongeorges"},"score":0,"creation_date":1498057189,"post_id":1868806,"comment_id":76343633,"body_markdown":"Thanks, the accepted answer did not solve the issue for me, because `setMaxResults()` loads first every record in memory and then creates a sublist, which when there are hundred thousands or more records crashes the server, because it is out of memory.  I could however go from a JPA typed query to a Hibernate query through `QueryImpl hibernateQuery = query.unwrap(QueryImpl.class)` and then I could use the `scroll()` method as you suggested.","body":"Thanks, the accepted answer did not solve the issue for me, because <code>setMaxResults()</code> loads first every record in memory and then creates a sublist, which when there are hundred thousands or more records crashes the server, because it is out of memory.  I could however go from a JPA typed query to a Hibernate query through <code>QueryImpl hibernateQuery = query.unwrap(QueryImpl.class)</code> and then I could use the <code>scroll()</code> method as you suggested."},{"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"score":0,"creation_date":1498132515,"post_id":1868806,"comment_id":76380055,"body_markdown":"At least with Oracle dialect this is not true (Hibernate uses the ROWNUM virtual column). Maybe it depends on the driver. Other DBs have the TOP function.","body":"At least with Oracle dialect this is not true (Hibernate uses the ROWNUM virtual column). Maybe it depends on the driver. Other DBs have the TOP function."},{"owner":{"account_id":3021726,"reputation":1856,"user_id":2562592,"display_name":"toongeorges"},"score":0,"creation_date":1498135949,"post_id":1868806,"comment_id":76382720,"body_markdown":"My query is using a join fetch. This results in the Hibernate warning &quot;firstResult/maxResults specified with collection fetch; applying in memory&quot;. So with a join fetch, Hibernate is loading the full collection in memory. Dropping the join is no option because of performance reasons. When I use ScrollableResults, I have more control about which records are loaded in memory. I cannot load all records with a single ScrollableResults, because this also results in out of memory. I am experimenting loading multiple pages with different ScrollableResults. If this does not work, I will go with SQL.","body":"My query is using a join fetch. This results in the Hibernate warning &quot;firstResult/maxResults specified with collection fetch; applying in memory&quot;. So with a join fetch, Hibernate is loading the full collection in memory. Dropping the join is no option because of performance reasons. When I use ScrollableResults, I have more control about which records are loaded in memory. I cannot load all records with a single ScrollableResults, because this also results in out of memory. I am experimenting loading multiple pages with different ScrollableResults. If this does not work, I will go with SQL."},{"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"score":0,"creation_date":1498142145,"post_id":1868806,"comment_id":76387732,"body_markdown":"That&#39;s weird, I&#39;ve never encountered that. Yes sometimes using straight JDBC is the way to go, specially for massive/batch processes.","body":"That&#39;s weird, I&#39;ve never encountered that. Yes sometimes using straight JDBC is the way to go, specially for massive/batch processes."},{"owner":{"account_id":3021726,"reputation":1856,"user_id":2562592,"display_name":"toongeorges"},"score":0,"creation_date":1498144395,"post_id":1868806,"comment_id":76389557,"body_markdown":"The @OneToMany relations are causing my issues. If somehow I could execute the Oracle aggregate function LISTAGG in Hibernate to concatenate the multiple values to a single value, then I can drop the joins and replace them by a subquery.","body":"The @OneToMany relations are causing my issues. If somehow I could execute the Oracle aggregate function LISTAGG in Hibernate to concatenate the multiple values to a single value, then I can drop the joins and replace them by a subquery."},{"owner":{"account_id":3021726,"reputation":1856,"user_id":2562592,"display_name":"toongeorges"},"score":0,"creation_date":1498153113,"post_id":1868806,"comment_id":76394945,"body_markdown":"I added some new fields to my entity that I annotated with @Formula.  With the formula I call the Oracle LISTAGG function.  Therefore, I do not need to join fetch the @OneToMany relations anymore.  Without the join fetches, I can page my JPA query with `setMaxResults()`.","body":"I added some new fields to my entity that I annotated with @Formula.  With the formula I call the Oracle LISTAGG function.  Therefore, I do not need to join fetch the @OneToMany relations anymore.  Without the join fetches, I can page my JPA query with <code>setMaxResults()</code>."},{"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"score":0,"creation_date":1498209461,"post_id":1868806,"comment_id":76417382,"body_markdown":"If your app is Oracle only then fine.","body":"If your app is Oracle only then fine."}],"tags":[],"owner":{"account_id":34247,"reputation":1973,"user_id":96617,"accept_rate":78,"display_name":"Lluis Martinez"},"comment_count":7,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1260295818,"creation_date":1260295818,"answer_id":1868806,"question_id":1239723,"body_markdown":"If you don&#39;t want to use setMaxResults, you can also use Query.scroll instead of list, and fetch the rows you desire. Useful for paging for instance. ","title":"How do you do a limit query in JPQL or HQL?","body":"<p>If you don't want to use setMaxResults, you can also use Query.scroll instead of list, and fetch the rows you desire. Useful for paging for instance. </p>\n"},{"tags":[],"owner":{"account_id":635102,"reputation":9,"user_id":403013,"display_name":"Xingsheng "},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1280211094,"creation_date":1280211094,"answer_id":3341132,"question_id":1239723,"body_markdown":"My observation is that even you have limit in the HQL (hibernate 3.x), it will be either causing parsing error or just ignored. (if you have order by + desc/asc before limit, it will be ignored, if you don&#39;t have desc/asc before limit, it will cause parsing error)","title":"How do you do a limit query in JPQL or HQL?","body":"<p>My observation is that even you have limit in the HQL (hibernate 3.x), it will be either causing parsing error or just ignored. (if you have order by + desc/asc before limit, it will be ignored, if you don't have desc/asc before limit, it will cause parsing error)</p>\n"},{"comments":[{"owner":{"account_id":38637,"reputation":13122,"user_id":111024,"accept_rate":100,"display_name":"Konrad &#39;ktoso&#39; Malawski"},"score":7,"creation_date":1300210175,"post_id":4666044,"comment_id":5996811,"body_markdown":"Hm... not too sure about this, [citation needed] this may be an accident and could suddenly stop working in a new version of hibernate.","body":"Hm... not too sure about this, [citation needed] this may be an accident and could suddenly stop working in a new version of hibernate."},{"owner":{"account_id":4597208,"reputation":48209,"user_id":3728901,"accept_rate":58,"display_name":"Vy Do"},"score":4,"creation_date":1453435861,"post_id":4666044,"comment_id":57609947,"body_markdown":"Please refer to official document.","body":"Please refer to official document."},{"owner":{"account_id":10062835,"reputation":1541,"user_id":7438853,"accept_rate":68,"display_name":"wheeleruniverse"},"score":2,"creation_date":1543500432,"post_id":4666044,"comment_id":93948641,"body_markdown":"This isn&#39;t working for me in Hibernate Version 5.2.12 Final","body":"This isn&#39;t working for me in Hibernate Version 5.2.12 Final"},{"owner":{"account_id":2158882,"reputation":559,"user_id":1913504,"display_name":"Faiz Akram"},"score":2,"creation_date":1567657190,"post_id":4666044,"comment_id":102029337,"body_markdown":"It&#39;s Not working, Doesn&#39;t support hibernate 4.x also.","body":"It&#39;s Not working, Doesn&#39;t support hibernate 4.x also."}],"tags":[],"owner":{"account_id":694493,"reputation":51,"user_id":572316,"display_name":"Dilawar"},"comment_count":4,"down_vote_count":5,"up_vote_count":6,"is_accepted":false,"score":1,"last_activity_date":1320767792,"creation_date":1294814790,"answer_id":4666044,"question_id":1239723,"body_markdown":"`String hql = &quot;select userName from AccountInfo order by points desc 5&quot;;`\r\n\r\nThis worked for me without using `setmaxResults();`\r\n\r\nJust provide the max value in the last (in this case 5) without using the keyword `limit`.\r\n:P\r\n\t\t","title":"How do you do a limit query in JPQL or HQL?","body":"<p><code>String hql = \"select userName from AccountInfo order by points desc 5\";</code></p>\n\n<p>This worked for me without using <code>setmaxResults();</code></p>\n\n<p>Just provide the max value in the last (in this case 5) without using the keyword <code>limit</code>.\n:P</p>\n"},{"comments":[{"owner":{"account_id":84539,"reputation":9548,"user_id":236247,"accept_rate":86,"display_name":"demongolem"},"score":6,"creation_date":1406924878,"post_id":4990560,"comment_id":39036637,"body_markdown":"I like this one best because `setFirstResult` is actually mentioned in this answer whereas here and elsewhere they just say `setMaxResults` this and `setMaxResults` that without mentioning how to set the offset.","body":"I like this one best because <code>setFirstResult</code> is actually mentioned in this answer whereas here and elsewhere they just say <code>setMaxResults</code> this and <code>setMaxResults</code> that without mentioning how to set the offset."}],"tags":[],"owner":{"account_id":52105,"reputation":2069,"user_id":155688,"accept_rate":91,"display_name":"Jessu"},"comment_count":1,"down_vote_count":0,"up_vote_count":158,"is_accepted":false,"score":158,"last_activity_date":1297675724,"creation_date":1297675724,"answer_id":4990560,"question_id":1239723,"body_markdown":"     // SQL: SELECT * FROM table LIMIT start, maxRows;\r\n    \r\n    Query q = session.createQuery(&quot;FROM table&quot;);\r\n    q.setFirstResult(start);\r\n    q.setMaxResults(maxRows);\r\n    \r\n\r\n","title":"How do you do a limit query in JPQL or HQL?","body":"<pre><code> // SQL: SELECT * FROM table LIMIT start, maxRows;\n\nQuery q = session.createQuery(\"FROM table\");\nq.setFirstResult(start);\nq.setMaxResults(maxRows);\n</code></pre>\n"},{"tags":[],"owner":{"display_name":"user538167"},"comment_count":0,"down_vote_count":3,"up_vote_count":3,"is_accepted":false,"score":0,"last_activity_date":1435135793,"creation_date":1319785260,"answer_id":7926105,"question_id":1239723,"body_markdown":"If can manage a limit in this mode\r\n\r\n    public List&lt;ExampleModel&gt; listExampleModel() {\r\n\t\treturn listExampleModel(null, null);\r\n\t}\r\n\r\n\tpublic List&lt;ExampleModel&gt; listExampleModel(Integer first, Integer count) {\r\n\t\tQuery tmp = getSession().createQuery(&quot;from ExampleModel&quot;);\r\n\r\n\t\tif (first != null)\r\n\t\t\ttmp.setFirstResult(first);\r\n\t\tif (count != null)\r\n\t\t\ttmp.setMaxResults(count);\r\n\r\n\t\treturn (List&lt;ExampleModel&gt;)tmp.list();\r\n\t}\r\n\r\nThis is a really simple code to handle a limit or a list. ","title":"How do you do a limit query in JPQL or HQL?","body":"<p>If can manage a limit in this mode</p>\n\n<pre><code>public List&lt;ExampleModel&gt; listExampleModel() {\n    return listExampleModel(null, null);\n}\n\npublic List&lt;ExampleModel&gt; listExampleModel(Integer first, Integer count) {\n    Query tmp = getSession().createQuery(\"from ExampleModel\");\n\n    if (first != null)\n        tmp.setFirstResult(first);\n    if (count != null)\n        tmp.setMaxResults(count);\n\n    return (List&lt;ExampleModel&gt;)tmp.list();\n}\n</code></pre>\n\n<p>This is a really simple code to handle a limit or a list. </p>\n"},{"tags":[],"owner":{"account_id":8761593,"reputation":45,"user_id":6551400,"accept_rate":0,"display_name":"Deep Chand Jaipur"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1468665381,"creation_date":1468665381,"answer_id":38410260,"question_id":1239723,"body_markdown":"    Criteria criteria=curdSession.createCriteria(DTOCLASS.class).addOrder(Order.desc(&quot;feild_name&quot;));\r\n        \t\t\tcriteria.setMaxResults(3);\r\n        \t\t\tList&lt;DTOCLASS&gt; users = (List&lt;DTOCLASS&gt;) criteria.list();\r\n    for (DTOCLASS user : users) {\r\n    \t\t\t\tSystem.out.println(user.getStart());\r\n    \t\t\t}","title":"How do you do a limit query in JPQL or HQL?","body":"<pre><code>Criteria criteria=curdSession.createCriteria(DTOCLASS.class).addOrder(Order.desc(\"feild_name\"));\n                criteria.setMaxResults(3);\n                List&lt;DTOCLASS&gt; users = (List&lt;DTOCLASS&gt;) criteria.list();\nfor (DTOCLASS user : users) {\n                System.out.println(user.getStart());\n            }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5372553,"reputation":3631,"user_id":4280615,"accept_rate":73,"display_name":"Nate Vaughan"},"score":0,"creation_date":1594319343,"post_id":50056107,"comment_id":111092455,"body_markdown":"Thanks for adding an interface-only solution","body":"Thanks for adding an interface-only solution"},{"owner":{"account_id":7471816,"reputation":3218,"user_id":5679560,"accept_rate":36,"display_name":"Rafael Lima"},"score":0,"creation_date":1676387325,"post_id":50056107,"comment_id":133124250,"body_markdown":"Do you understand what is HQL? the person asked about a solution using HQL, this is SQL anyone know how to do this","body":"Do you understand what is HQL? the person asked about a solution using HQL, this is SQL anyone know how to do this"}],"tags":[],"owner":{"account_id":3779781,"reputation":667,"user_id":3139600,"display_name":"swatisinghi"},"comment_count":2,"down_vote_count":2,"up_vote_count":4,"is_accepted":false,"score":2,"last_activity_date":1524808632,"creation_date":1524808632,"answer_id":50056107,"question_id":1239723,"body_markdown":"You need to write a native query, refer [this][1].\r\n\r\n    @Query(value =\r\n        &quot;SELECT * FROM user_metric UM WHERE UM.user_id = :userId AND UM.metric_id = :metricId LIMIT :limit&quot;, nativeQuery = true)\r\n    List&lt;UserMetricValue&gt; findTopNByUserIdAndMetricId(\r\n        @Param(&quot;userId&quot;) String userId, @Param(&quot;metricId&quot;) Long metricId,\r\n        @Param(&quot;limit&quot;) int limit);\r\n\r\n\r\n  [1]: https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#_native_queries","title":"How do you do a limit query in JPQL or HQL?","body":"<p>You need to write a native query, refer <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#_native_queries\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<pre><code>@Query(value =\n    \"SELECT * FROM user_metric UM WHERE UM.user_id = :userId AND UM.metric_id = :metricId LIMIT :limit\", nativeQuery = true)\nList&lt;UserMetricValue&gt; findTopNByUserIdAndMetricId(\n    @Param(\"userId\") String userId, @Param(\"metricId\") Long metricId,\n    @Param(\"limit\") int limit);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10121858,"reputation":21,"user_id":7478518,"display_name":"Leena Varshney"},"comment_count":0,"down_vote_count":5,"up_vote_count":1,"is_accepted":false,"score":-4,"last_activity_date":1552633990,"creation_date":1552633848,"answer_id":55177358,"question_id":1239723,"body_markdown":"    @Query(nativeQuery = true,\r\n           value = &quot;select from otp u where u.email =:email order by u.dateTime desc limit 1&quot;)\r\n    public List&lt;otp&gt; findOtp(@Param(&quot;email&quot;) String email);","title":"How do you do a limit query in JPQL or HQL?","body":"<pre><code>@Query(nativeQuery = true,\n       value = \"select from otp u where u.email =:email order by u.dateTime desc limit 1\")\npublic List&lt;otp&gt; findOtp(@Param(\"email\") String email);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":7754530,"reputation":2019,"user_id":5869384,"display_name":"David Jesus"},"score":1,"creation_date":1620174703,"post_id":56868270,"comment_id":119121672,"body_markdown":"According to the question &quot;I don&#39;t want to use setMaxResults if possible&quot; you give the better solution, just putting `Pageable` as a parameter in the method and calling it sending &quot;`new PageRequest(0, 20)`&quot; I&#39;m getting the first 20 records. Thanks.","body":"According to the question &quot;I don&#39;t want to use setMaxResults if possible&quot; you give the better solution, just putting <code>Pageable</code> as a parameter in the method and calling it sending &quot;<code>new PageRequest(0, 20)</code>&quot; I&#39;m getting the first 20 records. Thanks."},{"owner":{"account_id":216868,"reputation":103,"user_id":472362,"display_name":"Martin Prebio"},"score":0,"creation_date":1701191758,"post_id":56868270,"comment_id":136743806,"body_markdown":"Just note that the original question was about Hibernate but this answer mentions the `Pageable` class from (probably) Spring Data. It internally maps again to `setFirstResult` and `setMaxResults`.","body":"Just note that the original question was about Hibernate but this answer mentions the <code>Pageable</code> class from (probably) Spring Data. It internally maps again to <code>setFirstResult</code> and <code>setMaxResults</code>."}],"tags":[],"owner":{"account_id":2220824,"reputation":16635,"user_id":3168721,"accept_rate":97,"display_name":"tk_"},"comment_count":2,"down_vote_count":0,"up_vote_count":7,"is_accepted":false,"score":7,"last_activity_date":1562150399,"creation_date":1562150399,"answer_id":56868270,"question_id":1239723,"body_markdown":"You can easily use pagination for this.\r\n\r\n        @QueryHints({ @QueryHint(name = &quot;org.hibernate.cacheable&quot;, value = &quot;true&quot;) })\r\n    \t@Query(&quot;select * from a_table order by a_table_column desc&quot;)\r\n    \tList&lt;String&gt; getStringValue(Pageable pageable);\r\n\r\n\r\nyou have to pass `new PageRequest(0, 1)`to fetch records and **from the list fetch the first record.**\r\n","title":"How do you do a limit query in JPQL or HQL?","body":"<p>You can easily use pagination for this.</p>\n\n<pre><code>    @QueryHints({ @QueryHint(name = \"org.hibernate.cacheable\", value = \"true\") })\n    @Query(\"select * from a_table order by a_table_column desc\")\n    List&lt;String&gt; getStringValue(Pageable pageable);\n</code></pre>\n\n<p>you have to pass <code>new PageRequest(0, 1)</code>to fetch records and <strong>from the list fetch the first record.</strong></p>\n"},{"comments":[{"owner":{"account_id":1759456,"reputation":537,"user_id":1606953,"accept_rate":86,"display_name":"Edu Castrillon"},"score":0,"creation_date":1655299873,"post_id":60389562,"comment_id":128299647,"body_markdown":"Using OpenJPA, I cannot make this work for native queries in DB2. setMaxResults and setFirstResult are ignored, only the native query I&#39;m passing is sent","body":"Using OpenJPA, I cannot make this work for native queries in DB2. setMaxResults and setFirstResult are ignored, only the native query I&#39;m passing is sent"}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":1,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1653999128,"creation_date":1582616154,"answer_id":60389562,"question_id":1239723,"body_markdown":"The `setFirstResult` and `setMaxResults` `Query` methods\r\n--------------------------------------------------------\r\n\r\nFor a JPA and Hibernate `Query`, the `setFirstResult` method is the equivalent of `OFFSET`, and the `setMaxResults` method is the equivalent of LIMIT:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n    \tselect p\r\n    \tfrom Post p\r\n    \torder by p.createdOn\r\n    \t&quot;&quot;&quot;)\r\n    .setFirstResult(10)\r\n    .setMaxResults(10)\r\n    .getResultList();\r\n\r\nThe `LimitHandler` abstraction\r\n------------------------------\r\n\r\nThe Hibernate `LimitHandler` defines the database-specific pagination logic, and as illustrated by the following diagram, Hibernate supports many database-specific pagination options:\r\n\r\n[![`LimitHandler` implementations][1]][1]\r\n\r\nNow, depending on the underlying relational database system you are using, the above JPQL query will use the proper pagination syntax.\r\n\r\nMySQL\r\n-----\r\n\r\n    SELECT p.id AS id1_0_,\r\n           p.created_on AS created_2_0_,\r\n           p.title AS title3_0_\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    LIMIT ?, ?\r\n\r\nPostgreSQL\r\n----------\r\n\r\n    SELECT p.id AS id1_0_,\r\n           p.created_on AS created_2_0_,\r\n           p.title AS title3_0_\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    LIMIT ?\r\n    OFFSET ?\r\n\r\nSQL Server\r\n----------\r\n\r\n    SELECT p.id AS id1_0_,\r\n           p.created_on AS created_on2_0_,\r\n           p.title AS title3_0_\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    OFFSET ? ROWS \r\n    FETCH NEXT ? ROWS ONLY\r\n\r\nOracle\r\n------\r\n\r\n    SELECT *\r\n    FROM (\r\n        SELECT \r\n            row_.*, rownum rownum_\r\n        FROM (\r\n            SELECT \r\n                p.id AS id1_0_,\r\n                p.created_on AS created_on2_0_,\r\n                p.title AS title3_0_\r\n            FROM post p\r\n            ORDER BY p.created_on\r\n        ) row_\r\n        WHERE rownum &lt;= ?\r\n    )\r\n    WHERE rownum_ &gt; ?\r\n\r\nThe advantage of using `setFirstResult` and `setMaxResults` is that Hibernate can generate the database-specific pagination syntax for any supported relational databases.\r\n\r\nAnd, you are not limited to JPQL queries only. You can use the `setFirstResult` and `setMaxResults` method seven for native SQL queries.\r\n\r\nNative SQL queries\r\n------------------\r\n\r\nYou don&#39;t have to hardcode the database-specific pagination when using native SQL queries. Hibernate can add that to your queries.\r\n\r\nSo, if you&#39;re executing this SQL query on PostgreSQL:\r\n\r\n    List&lt;Tuple&gt; posts = entityManager.createNativeQuery(\r\n    \tSELECT\r\n    \t   p.id AS id,\r\n    \t   p.title AS title\r\n    \tfrom post p\r\n    \tORDER BY p.created_on\r\n    \t&quot;&quot;&quot;, Tuple.class)\r\n    .setFirstResult(10)\r\n    .setMaxResults(10)\r\n    .getResultList();\r\n\r\nHibernate will transform it as follows:\r\n\r\n    SELECT p.id AS id,\r\n           p.title AS title\r\n    FROM post p\r\n    ORDER BY p.created_on\r\n    LIMIT ?\r\n    OFFSET ?\r\n\r\nCool, right?\r\n\r\nBeyond SQL-based pagination\r\n---------------------------\r\n\r\nPagination is good when you can index the filtering and sorting criteria. If your pagination requirements imply dynamic filtering, it&#39;s a much better approach to use an inverted-index solution, like ElasticSearch. \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/IGtD2.png","title":"How do you do a limit query in JPQL or HQL?","body":"<h2>The <code>setFirstResult</code> and <code>setMaxResults</code> <code>Query</code> methods</h2>\n<p>For a JPA and Hibernate <code>Query</code>, the <code>setFirstResult</code> method is the equivalent of <code>OFFSET</code>, and the <code>setMaxResults</code> method is the equivalent of LIMIT:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select p\n    from Post p\n    order by p.createdOn\n    &quot;&quot;&quot;)\n.setFirstResult(10)\n.setMaxResults(10)\n.getResultList();\n</code></pre>\n<h2>The <code>LimitHandler</code> abstraction</h2>\n<p>The Hibernate <code>LimitHandler</code> defines the database-specific pagination logic, and as illustrated by the following diagram, Hibernate supports many database-specific pagination options:</p>\n<p><a href=\"https://i.stack.imgur.com/IGtD2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/IGtD2.png\" alt=\"LimitHandler implementations\" /></a></p>\n<p>Now, depending on the underlying relational database system you are using, the above JPQL query will use the proper pagination syntax.</p>\n<h2>MySQL</h2>\n<pre><code>SELECT p.id AS id1_0_,\n       p.created_on AS created_2_0_,\n       p.title AS title3_0_\nFROM post p\nORDER BY p.created_on\nLIMIT ?, ?\n</code></pre>\n<h2>PostgreSQL</h2>\n<pre><code>SELECT p.id AS id1_0_,\n       p.created_on AS created_2_0_,\n       p.title AS title3_0_\nFROM post p\nORDER BY p.created_on\nLIMIT ?\nOFFSET ?\n</code></pre>\n<h2>SQL Server</h2>\n<pre><code>SELECT p.id AS id1_0_,\n       p.created_on AS created_on2_0_,\n       p.title AS title3_0_\nFROM post p\nORDER BY p.created_on\nOFFSET ? ROWS \nFETCH NEXT ? ROWS ONLY\n</code></pre>\n<h2>Oracle</h2>\n<pre><code>SELECT *\nFROM (\n    SELECT \n        row_.*, rownum rownum_\n    FROM (\n        SELECT \n            p.id AS id1_0_,\n            p.created_on AS created_on2_0_,\n            p.title AS title3_0_\n        FROM post p\n        ORDER BY p.created_on\n    ) row_\n    WHERE rownum &lt;= ?\n)\nWHERE rownum_ &gt; ?\n</code></pre>\n<p>The advantage of using <code>setFirstResult</code> and <code>setMaxResults</code> is that Hibernate can generate the database-specific pagination syntax for any supported relational databases.</p>\n<p>And, you are not limited to JPQL queries only. You can use the <code>setFirstResult</code> and <code>setMaxResults</code> method seven for native SQL queries.</p>\n<h2>Native SQL queries</h2>\n<p>You don't have to hardcode the database-specific pagination when using native SQL queries. Hibernate can add that to your queries.</p>\n<p>So, if you're executing this SQL query on PostgreSQL:</p>\n<pre><code>List&lt;Tuple&gt; posts = entityManager.createNativeQuery(\n    SELECT\n       p.id AS id,\n       p.title AS title\n    from post p\n    ORDER BY p.created_on\n    &quot;&quot;&quot;, Tuple.class)\n.setFirstResult(10)\n.setMaxResults(10)\n.getResultList();\n</code></pre>\n<p>Hibernate will transform it as follows:</p>\n<pre><code>SELECT p.id AS id,\n       p.title AS title\nFROM post p\nORDER BY p.created_on\nLIMIT ?\nOFFSET ?\n</code></pre>\n<p>Cool, right?</p>\n<h2>Beyond SQL-based pagination</h2>\n<p>Pagination is good when you can index the filtering and sorting criteria. If your pagination requirements imply dynamic filtering, it's a much better approach to use an inverted-index solution, like ElasticSearch.</p>\n"},{"tags":[],"owner":{"account_id":9177643,"reputation":99,"user_id":6822729,"display_name":"Virendra khade"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669210711,"creation_date":1582883646,"answer_id":60449228,"question_id":1239723,"body_markdown":"You can use below query\r\n```\r\nNativeQuery&lt;Object[]&gt; query = session.createNativeQuery(&quot;select * from employee limit ?&quot;);\r\nquery.setparameter(1,1);\r\n```","title":"How do you do a limit query in JPQL or HQL?","body":"<p>You can use below query</p>\n<pre><code>NativeQuery&lt;Object[]&gt; query = session.createNativeQuery(&quot;select * from employee limit ?&quot;);\nquery.setparameter(1,1);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":4008309,"reputation":3688,"user_id":3302424,"accept_rate":70,"display_name":"Hari Krishna"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1584434821,"creation_date":1584434821,"answer_id":60718923,"question_id":1239723,"body_markdown":"Below snippet is used to perform limit query using HQL.\r\n\r\n    Query query = session.createQuery(&quot;....&quot;);\r\n    query.setFirstResult(startPosition);\r\n    query.setMaxResults(maxRows);\r\n\r\n\r\nYou can get demo application at this [link][1].\r\n\r\n\r\n  [1]: https://self-learning-java-tutorial.blogspot.com/2020/03/spring-jpa-hql-limit-query-example.html","title":"How do you do a limit query in JPQL or HQL?","body":"<p>Below snippet is used to perform limit query using HQL.</p>\n\n<pre><code>Query query = session.createQuery(\"....\");\nquery.setFirstResult(startPosition);\nquery.setMaxResults(maxRows);\n</code></pre>\n\n<p>You can get demo application at this <a href=\"https://self-learning-java-tutorial.blogspot.com/2020/03/spring-jpa-hql-limit-query-example.html\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}],"owner":{"account_id":40332,"reputation":8882,"user_id":116880,"accept_rate":94,"display_name":"stevedbrown"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":389579,"favorite_count":0,"down_vote_count":0,"up_vote_count":270,"accepted_answer_id":1239745,"answer_count":14,"score":270,"last_activity_date":1669210711,"creation_date":1249572802,"question_id":1239723,"body_markdown":"In Hibernate 3, is there a way to do the equivalent of the following MySQL limit in HQL?\r\n\r\n    select * from a_table order by a_table_column desc limit 0, 20;\r\n\r\nI don&#39;t want to use setMaxResults if possible. This definitely was possible in the older version of Hibernate/HQL, but it seems to have disappeared.\r\n","title":"How do you do a limit query in JPQL or HQL?","body":"<p>In Hibernate 3, is there a way to do the equivalent of the following MySQL limit in HQL?</p>\n\n<pre><code>select * from a_table order by a_table_column desc limit 0, 20;\n</code></pre>\n\n<p>I don't want to use setMaxResults if possible. This definitely was possible in the older version of Hibernate/HQL, but it seems to have disappeared.</p>\n"},{"tags":["java","apache-kafka","apache-kafka-connect"],"answers":[{"comments":[{"owner":{"account_id":11944159,"reputation":767,"user_id":8739916,"accept_rate":71,"display_name":"JollyRoger"},"score":0,"creation_date":1669191229,"post_id":74522398,"comment_id":131585813,"body_markdown":"Hey, do you also know how to change num of retires in a plugin? I added &quot;retries=x&quot; into the properties of a source plugin but the producer kept the retries at infinite (2 hundred million something).","body":"Hey, do you also know how to change num of retires in a plugin? I added &quot;retries=x&quot; into the properties of a source plugin but the producer kept the retries at infinite (2 hundred million something)."},{"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"score":1,"creation_date":1669209796,"post_id":74522398,"comment_id":131592195,"body_markdown":"In the connector config itself, `producer.override.retries`","body":"In the connector config itself, <code>producer.override.retries</code>"}],"tags":[],"owner":{"account_id":2671330,"reputation":183386,"user_id":2308683,"accept_rate":90,"display_name":"OneCricketeer"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669209869,"creation_date":1669049877,"answer_id":74522398,"question_id":74521326,"body_markdown":"&gt; clone entire apache kafka source code\r\n\r\nFalse. Apache Kafka download (binaries, rather than needing source), come with Kafka Connect already included. \r\n\r\nKafka Connect is not unique to Confluent. They (and others) write _plugins_. You put the code in the `plugin.path` property value as JARs.  Related - https://stackoverflow.com/questions/56958382/use-confluent-hub-without-confluent-platform-installation/57051446\r\n\r\n&gt; When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it? \r\n\r\nThe JVM classpath. \r\n\r\n&gt; kubernetes kafka cluster locally\r\n\r\nStrimzi has `kind: KafkaConnect` resources to make this easier, including installing Connector plugins. ","title":"How to deploy apache kafka connect locally (without Confluent)","body":"<blockquote>\n<p>clone entire apache kafka source code</p>\n</blockquote>\n<p>False. Apache Kafka download (binaries, rather than needing source), come with Kafka Connect already included.</p>\n<p>Kafka Connect is not unique to Confluent. They (and others) write <em>plugins</em>. You put the code in the <code>plugin.path</code> property value as JARs.  Related - <a href=\"https://stackoverflow.com/questions/56958382/use-confluent-hub-without-confluent-platform-installation/57051446\">Use Confluent Hub without Confluent Platform installation</a></p>\n<blockquote>\n<p>When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it?</p>\n</blockquote>\n<p>The JVM classpath.</p>\n<blockquote>\n<p>kubernetes kafka cluster locally</p>\n</blockquote>\n<p>Strimzi has <code>kind: KafkaConnect</code> resources to make this easier, including installing Connector plugins.</p>\n"}],"owner":{"account_id":11944159,"reputation":767,"user_id":8739916,"accept_rate":71,"display_name":"JollyRoger"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74522398,"answer_count":1,"score":0,"last_activity_date":1669209869,"creation_date":1669044900,"question_id":74521326,"body_markdown":"I could not find any simple explanation on how the Apache Kafka Connect works practically. For instance, in the official [tutorial][1], it says that we run certain shell scripts under the bin directory and we need to configure some `.properties` files. \r\n\r\nThis is clear. I am guessing that we need to clone entire apache kafka source code because those shell files are using a lot of other shell scripts and java classes inside the apache kafka source code. \r\n\r\nBut where do we place our connector code and in which format? As source code or as a jar file? When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it? Could someone clear these up or point out to some tutorials? Note, I am running everything, including my kubernetes kafka cluster locally and I am not willing to use Confluent.\r\n\r\n\r\n\r\n  [1]: https://kafka.apache.org/documentation/#connect","title":"How to deploy apache kafka connect locally (without Confluent)","body":"<p>I could not find any simple explanation on how the Apache Kafka Connect works practically. For instance, in the official <a href=\"https://kafka.apache.org/documentation/#connect\" rel=\"nofollow noreferrer\">tutorial</a>, it says that we run certain shell scripts under the bin directory and we need to configure some <code>.properties</code> files.</p>\n<p>This is clear. I am guessing that we need to clone entire apache kafka source code because those shell files are using a lot of other shell scripts and java classes inside the apache kafka source code.</p>\n<p>But where do we place our connector code and in which format? As source code or as a jar file? When we say my connector class is &quot;com.example...&quot; how come the kafka knows where to look for it? Could someone clear these up or point out to some tutorials? Note, I am running everything, including my kubernetes kafka cluster locally and I am not willing to use Confluent.</p>\n"},{"tags":["java","http","proxy"],"answers":[{"comments":[{"owner":{"account_id":2242924,"reputation":732,"user_id":1976997,"display_name":"ravenskater"},"score":0,"creation_date":1669136101,"post_id":74534973,"comment_id":131573552,"body_markdown":"Could you elaborate more on this please?: &#39;Termination is indicated by the network stack&#39;","body":"Could you elaborate more on this please?: &#39;Termination is indicated by the network stack&#39;"}],"tags":[],"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669209635,"creation_date":1669130346,"answer_id":74534973,"question_id":74534794,"body_markdown":"The encrypted communication goes from the client to the server, and the proxy is unaware. However the byte stream traverses two TCP connections:\r\nThe one from the client to the proxy, and the one from the proxy to the server.\r\n\r\nIf either one of them gets terminated the proxy can close the other. Termination is indicated by the network stack, and the proxy just forwards that message into the other connection.\r\n\r\nSo if the client hangs up, the proxy would notice a hangup on client side and terminate it&#39;s connection to the server. On the server side a termination on client side is noticed. And if the server hangs up, the same happens in the other direction.\r\n\r\nNow the question would be to figure out in Java whether the connection was lost. Typically the proxy application should either be waiting for data or writing data to the other stream. Without having created the code myself, I strongly believe if the network stack communicates that a connection is down it would resolve in an IOException, either thrown during the read operation from the input stream or thrown during the write operation for the other stream.","title":"How an HTTP proxy knows when to close the connection","body":"<p>The encrypted communication goes from the client to the server, and the proxy is unaware. However the byte stream traverses two TCP connections:\nThe one from the client to the proxy, and the one from the proxy to the server.</p>\n<p>If either one of them gets terminated the proxy can close the other. Termination is indicated by the network stack, and the proxy just forwards that message into the other connection.</p>\n<p>So if the client hangs up, the proxy would notice a hangup on client side and terminate it's connection to the server. On the server side a termination on client side is noticed. And if the server hangs up, the same happens in the other direction.</p>\n<p>Now the question would be to figure out in Java whether the connection was lost. Typically the proxy application should either be waiting for data or writing data to the other stream. Without having created the code myself, I strongly believe if the network stack communicates that a connection is down it would resolve in an IOException, either thrown during the read operation from the input stream or thrown during the write operation for the other stream.</p>\n"},{"comments":[{"owner":{"account_id":2242924,"reputation":732,"user_id":1976997,"display_name":"ravenskater"},"score":0,"creation_date":1669180476,"post_id":74535340,"comment_id":131583429,"body_markdown":"It looks the part where the proxy detects the connection got closed is not that easy. At least my proxy is not aware of this for some reason. Maybe I have a bug in the code.","body":"It looks the part where the proxy detects the connection got closed is not that easy. At least my proxy is not aware of this for some reason. Maybe I have a bug in the code."},{"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"score":0,"creation_date":1669180899,"post_id":74535340,"comment_id":131583495,"body_markdown":"Proxies would have different implementations. And I described a simple scenario above. But in general, proxy would store a mapping between a live client connection (connection A) &amp; live destination connection (connection B). So if any one them terminates, proxy can terminate the other connection. That is a basic job of proxy.","body":"Proxies would have different implementations. And I described a simple scenario above. But in general, proxy would store a mapping between a live client connection (connection A) &amp; live destination connection (connection B). So if any one them terminates, proxy can terminate the other connection. That is a basic job of proxy."},{"owner":{"account_id":5289146,"reputation":8128,"user_id":4222206,"display_name":"queeg"},"score":0,"creation_date":1687946744,"post_id":74535340,"comment_id":135007026,"body_markdown":"@aatwork &#39;Proxies would have different implementations&#39; -&gt; the question was how a proxy knows when to terminate the connection.","body":"@aatwork &#39;Proxies would have different implementations&#39; -&gt; the question was how a proxy knows when to terminate the connection."}],"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669131890,"creation_date":1669131890,"answer_id":74535340,"question_id":74534794,"body_markdown":"Http connection is nothing but network connection between two sockets. To end an HTTP connection socket.close() needs to be called. Normal HTTP connections (not pipelined) use this method.\r\n\r\nThere are multiple scenarios how it is done. Let&#39;s take a simple example to emulate your scenario.\r\n\r\n - Client calls proxy server. That is a HTTP connection between client &amp;\r\n   proxy, Let&#39;s call it **connection A**.\r\n - Proxy calls destination using new separate HTTP connection. Let&#39;s\r\n   call it **connection B**.\r\n - Destination sends encrypted data to proxy via **connection A**.\r\n - Proxy forwards the data packet to client via **connection B**.\r\n - Client reads the data &amp; decrypts it. It gets to know response payload\r\n   size from **Content-Length** header.\r\n - Once client is done reading that many bytes, it decides to call\r\n   socket.close() on **Connection A**.\r\n - Proxy detects **connection A** got closed. So it doesn&#39;t need to maintain\r\n   **connection B** to destination &amp; closes it.\r\n \r\nSo both HTTP connections got terminated. And it didn&#39;t need proxy to\r\n   read encrypted data.","title":"How an HTTP proxy knows when to close the connection","body":"<p>Http connection is nothing but network connection between two sockets. To end an HTTP connection socket.close() needs to be called. Normal HTTP connections (not pipelined) use this method.</p>\n<p>There are multiple scenarios how it is done. Let's take a simple example to emulate your scenario.</p>\n<ul>\n<li>Client calls proxy server. That is a HTTP connection between client &amp;\nproxy, Let's call it <strong>connection A</strong>.</li>\n<li>Proxy calls destination using new separate HTTP connection. Let's\ncall it <strong>connection B</strong>.</li>\n<li>Destination sends encrypted data to proxy via <strong>connection A</strong>.</li>\n<li>Proxy forwards the data packet to client via <strong>connection B</strong>.</li>\n<li>Client reads the data &amp; decrypts it. It gets to know response payload\nsize from <strong>Content-Length</strong> header.</li>\n<li>Once client is done reading that many bytes, it decides to call\nsocket.close() on <strong>Connection A</strong>.</li>\n<li>Proxy detects <strong>connection A</strong> got closed. So it doesn't need to maintain\n<strong>connection B</strong> to destination &amp; closes it.</li>\n</ul>\n<p>So both HTTP connections got terminated. And it didn't need proxy to\nread encrypted data.</p>\n"}],"owner":{"account_id":2242924,"reputation":732,"user_id":1976997,"display_name":"ravenskater"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":447,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":2,"score":0,"last_activity_date":1669209635,"creation_date":1669129617,"question_id":74534794,"body_markdown":"This question applies only for HTTPS requests.\r\n\r\nLets divide the problem in 3 areas.\r\n1. The origin. This is the user sending an HTTPS request.\r\n2. The proxy. This will handle the request, forward it to the remote and vice-versa.\r\n3. The remote. This is the server where the request is supposed to arrive.\r\n\r\nWhen you make an HTTPS request through a proxy, this is what happens:\r\n\r\n1. Origin sends with HTTP (this is not encrypted):\r\n\r\n    CONNECT remote.url:443 HTTP/1.1\r\n    ...\r\n\r\n2. Proxy replies:\r\n\r\n    HTTP/1.1 200 Connection established\r\n\r\n3. Origin sends the request to the proxy, totally encrypted:\r\n\r\n    Cﾦￔi ﾧJ￁,ﾀﾯH;ﾎUﾬ*￿ﾈﾷ#cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1ﾅ￳#j￴iￗHﾱￗk...\r\n\r\n4. Proxy takes it as it is, and it forwards it to remote:\r\n\r\n    Cﾦￔi ﾧJ￁,ﾀﾯH;ﾎUﾬ*￿ﾈﾷ#cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1ﾅ￳#j￴iￗHﾱￗk...\r\n\r\n5. Remote replies, it is also totally encrypted:\r\n\r\n    cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1...\r\n\r\n6. Proxy passes this to the origin:\r\n\r\n    cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1...\r\n\r\n7. Origin knows how to decrypt this and it is happy to receive the response.\r\n\r\nThe question is, how does the proxy knows that the response is terminated?. The proxy is just reading streams, and cannot know the end of it. Moreover, it cannot read HTTP headers to know the length because they are encrypted.\r\n\r\nI am facing this issue in Java and I don&#39;t know how to deal with that.","title":"How an HTTP proxy knows when to close the connection","body":"<p>This question applies only for HTTPS requests.</p>\n<p>Lets divide the problem in 3 areas.</p>\n<ol>\n<li>The origin. This is the user sending an HTTPS request.</li>\n<li>The proxy. This will handle the request, forward it to the remote and vice-versa.</li>\n<li>The remote. This is the server where the request is supposed to arrive.</li>\n</ol>\n<p>When you make an HTTPS request through a proxy, this is what happens:</p>\n<ol>\n<li><p>Origin sends with HTTP (this is not encrypted):</p>\n<p>CONNECT remote.url:443 HTTP/1.1\n...</p>\n</li>\n<li><p>Proxy replies:</p>\n<p>HTTP/1.1 200 Connection established</p>\n</li>\n<li><p>Origin sends the request to the proxy, totally encrypted:</p>\n<p>Cﾦￔi ﾧJ￁,ﾀﾯH;ﾎUﾬ*￿ﾈﾷ#cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1ﾅ￳#j￴iￗHﾱￗk...</p>\n</li>\n<li><p>Proxy takes it as it is, and it forwards it to remote:</p>\n<p>Cﾦￔi ﾧJ￁,ﾀﾯH;ﾎUﾬ*￿ﾈﾷ#cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1ﾅ￳#j￴iￗHﾱￗk...</p>\n</li>\n<li><p>Remote replies, it is also totally encrypted:</p>\n<p>cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1...</p>\n</li>\n<li><p>Proxy passes this to the origin:</p>\n<p>cR￾{gﾘ ﾷ�ￄﾞWuﾠY&lt;u#1...</p>\n</li>\n<li><p>Origin knows how to decrypt this and it is happy to receive the response.</p>\n</li>\n</ol>\n<p>The question is, how does the proxy knows that the response is terminated?. The proxy is just reading streams, and cannot know the end of it. Moreover, it cannot read HTTP headers to know the length because they are encrypted.</p>\n<p>I am facing this issue in Java and I don't know how to deal with that.</p>\n"},{"tags":["java","arrays","string"],"comments":[{"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"score":0,"creation_date":1669206710,"post_id":74546763,"comment_id":131591131,"body_markdown":"@AlexanderIvanchenko Arrays","body":"@AlexanderIvanchenko Arrays"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669206769,"post_id":74546763,"comment_id":131591152,"body_markdown":"And since questions looking for &quot;the best&quot; &quot;most neat&quot; way to perform something are considered to be off-topic as opinionated, I kindly advise to change the phrasing.","body":"And since questions looking for &quot;the best&quot; &quot;most neat&quot; way to perform something are considered to be off-topic as opinionated, I kindly advise to change the phrasing."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669206797,"post_id":74546763,"comment_id":131591161,"body_markdown":"I wouldn&#39;t care about &quot;most elegant&quot; but rather &quot;working&quot;, &quot;maintainable&quot;, &quot;readable&quot;, &quot;robust&quot;. &quot;elegant&quot; might imply &quot;little code&quot; whereas sometime a little more code makes a solution more robust and readable.","body":"I wouldn&#39;t care about &quot;most elegant&quot; but rather &quot;working&quot;, &quot;maintainable&quot;, &quot;readable&quot;, &quot;robust&quot;. &quot;elegant&quot; might imply &quot;little code&quot; whereas sometime a little more code makes a solution more robust and readable."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669206830,"post_id":74546763,"comment_id":131591170,"body_markdown":"On the topic itself: is that string basically defining a 3x3 grid of numbers?","body":"On the topic itself: is that string basically defining a 3x3 grid of numbers?"},{"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"score":0,"creation_date":1669207038,"post_id":74546763,"comment_id":131591241,"body_markdown":"@Thomas It is defining a NxN grid of numbers.","body":"@Thomas It is defining a NxN grid of numbers."},{"owner":{"account_id":9537825,"reputation":1490,"user_id":7275056,"display_name":"vsfDawg"},"score":0,"creation_date":1669207106,"post_id":74546763,"comment_id":131591267,"body_markdown":"It is a good idea to do units of work in separate methods so move this logic to a method and call that method.   e.g. `int[][] square = buildSquare(args[1]);`  One of the benefits of doing this is that it makes your code cleaner where the method is being invoked.","body":"It is a good idea to do units of work in separate methods so move this logic to a method and call that method.   e.g. <code>int[][] square = buildSquare(args[1]);</code>  One of the benefits of doing this is that it makes your code cleaner where the method is being invoked."},{"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"score":0,"creation_date":1669207156,"post_id":74546763,"comment_id":131591284,"body_markdown":"@vsfDawg Thanks. Already did that.","body":"@vsfDawg Thanks. Already did that."}],"answers":[{"comments":[{"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"score":0,"creation_date":1669207811,"post_id":74546913,"comment_id":131591540,"body_markdown":"Works great. And is much more readable. Thank you!","body":"Works great. And is much more readable. Thank you!"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669208538,"post_id":74546913,"comment_id":131591761,"body_markdown":"It can be done in a single statement ([see](https://stackoverflow.com/a/74547085/17949945)).","body":"It can be done in a single statement (<a href=\"https://stackoverflow.com/a/74547085/17949945\">see</a>)."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669209625,"post_id":74546913,"comment_id":131592132,"body_markdown":"@AlexanderIvanchenko true albeit I&#39;m not sure this is more readable and maintainable. Of course it depends on the developers but sometimes splitting statements makes it easier to read and understand the code (if there&#39;s a noticable performance penalty then this changes matters). :)","body":"@AlexanderIvanchenko true albeit I&#39;m not sure this is more readable and maintainable. Of course it depends on the developers but sometimes splitting statements makes it easier to read and understand the code (if there&#39;s a noticable performance penalty then this changes matters). :)"},{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669209976,"post_id":74546913,"comment_id":131592256,"body_markdown":"I don&#39;t see an issue from the perspective of readability (this topic is subjective). But if it&#39;s not a `3x3` matrix, avoiding allocating intermediate an array might give a performance gain.","body":"I don&#39;t see an issue from the perspective of readability (this topic is subjective). But if it&#39;s not a <code>3x3</code> matrix, avoiding allocating intermediate an array might give a performance gain."}],"tags":[],"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669207406,"creation_date":1669207037,"answer_id":74546913,"question_id":74546763,"body_markdown":"I assume `&quot;&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;&quot;` would define a 3x3 grid so I would use the following approach:\r\n\r\n- split the string into a string per row so we get `&quot;num-num-num&quot;`. That means:\r\n  - remove the leading and trailing angular brackets\r\n  - split at `&quot;&gt;&lt;&quot;` and remove it\r\n- split each row at `&quot;-&quot;` to get the individual numbers\r\n- parse the numbers and assign them to the grid\r\n\r\nSome code example:\r\n\r\n    String input = &quot;&lt;11-12-13&gt;&lt;21-22-23&gt;&lt;31-32-33&gt;&quot;;\r\n\t \r\n    //remove leading &lt; and trailing &gt; then split at &gt;&lt;   \r\n    String[] inputRows = input.substring(1,input.length()-1).split(&quot;&gt;&lt;&quot;);\r\n\t    \r\n    int[][] grid = new int[inputRows.length][];\r\n\t    \r\n    for( int r = 0; r &lt; inputRows.length; r++) {\r\n        //split the row at -\r\n\t   \tString[] cells = inputRows[r].split(&quot;-&quot;);\r\n\t    \t\r\n        //convert the array of strings to an array of int by parsing each cell\r\n    \tgrid[r] = Arrays.stream(cells).mapToInt(Integer::parseInt).toArray();\r\n    }","title":"How to turn a String into a nested Array","body":"<p>I assume <code>&quot;&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;&quot;</code> would define a 3x3 grid so I would use the following approach:</p>\n<ul>\n<li>split the string into a string per row so we get <code>&quot;num-num-num&quot;</code>. That means:\n<ul>\n<li>remove the leading and trailing angular brackets</li>\n<li>split at <code>&quot;&gt;&lt;&quot;</code> and remove it</li>\n</ul>\n</li>\n<li>split each row at <code>&quot;-&quot;</code> to get the individual numbers</li>\n<li>parse the numbers and assign them to the grid</li>\n</ul>\n<p>Some code example:</p>\n<pre><code>String input = &quot;&lt;11-12-13&gt;&lt;21-22-23&gt;&lt;31-32-33&gt;&quot;;\n \n//remove leading &lt; and trailing &gt; then split at &gt;&lt;   \nString[] inputRows = input.substring(1,input.length()-1).split(&quot;&gt;&lt;&quot;);\n    \nint[][] grid = new int[inputRows.length][];\n    \nfor( int r = 0; r &lt; inputRows.length; r++) {\n    //split the row at -\n    String[] cells = inputRows[r].split(&quot;-&quot;);\n        \n    //convert the array of strings to an array of int by parsing each cell\n    grid[r] = Arrays.stream(cells).mapToInt(Integer::parseInt).toArray();\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669209402,"creation_date":1669207838,"answer_id":74547085,"question_id":74546763,"body_markdown":"Here&#39;s how it can be done using Java 9 [`Matcher.results()`][results].\r\n\r\nFirst, let&#39;s define a pattern that captures a group of digits interlaid with dashes `-`:\r\n\r\n```\r\npublic static final Pattern ANGLE_BRACKETS = Pattern.compile(&quot;&lt;([\\\\d-]*)&gt;&quot;);\r\n```\r\n\r\nUsing this pattern, we can create a matcher, and with `Matcher.results()` generate a stream of `MatchResult`s, which is an object representing the captured sequence of characters.\r\n\r\nWe can obtain the matching substring using [`MatchResult.group()`][group] (`1` *should be passed as an argument, since we need a substring without brackets*). \r\n\r\nTo split each group, we can use either `Pattern.splitAsStream()` or `Arrays.split()`. In this case, the latter is preferred because splitting a string on dashes `&quot;-&quot;` can be done without compiling a regular expression and utilizing regex engine. `Pattern.splitAsStream()` might be more beneficial when array is large (`splitAsStream()` generates a stream directly from the regex engine with need to allocate an intermediate array), or we need to split a string using a regex, and not a regular string like `&quot;-&quot;`.\r\n\r\n```\r\nString parameter = &quot;&lt;1-2-3&gt;&lt;4-5-6&gt;&lt;7-8-9&gt;&quot;;\r\n    \r\nint[][] matrix = ANGLE_BRACKETS1.matcher(parameter).results()\r\n    .map(matchResult -&gt; matchResult.group(1))\r\n    .map(str -&gt; Arrays.stream(str.split(&quot;-&quot;)).mapToInt(Integer::parseInt).toArray())\r\n    .toArray(int[][]::new);\r\n    \r\nSystem.out.println(Arrays.deepToString(matrix));\r\n```\r\n\r\n*Output:*\r\n\r\n```\r\n[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\r\n```\r\n\r\n\r\n   [results]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Matcher.html#results()\r\n\r\n   [group]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/MatchResult.html#group(int)","title":"How to turn a String into a nested Array","body":"<p>Here's how it can be done using Java 9 <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/Matcher.html#results()\" rel=\"nofollow noreferrer\"><code>Matcher.results()</code></a>.</p>\n<p>First, let's define a pattern that captures a group of digits interlaid with dashes <code>-</code>:</p>\n<pre><code>public static final Pattern ANGLE_BRACKETS = Pattern.compile(&quot;&lt;([\\\\d-]*)&gt;&quot;);\n</code></pre>\n<p>Using this pattern, we can create a matcher, and with <code>Matcher.results()</code> generate a stream of <code>MatchResult</code>s, which is an object representing the captured sequence of characters.</p>\n<p>We can obtain the matching substring using <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/regex/MatchResult.html#group(int)\" rel=\"nofollow noreferrer\"><code>MatchResult.group()</code></a> (<code>1</code> <em>should be passed as an argument, since we need a substring without brackets</em>).</p>\n<p>To split each group, we can use either <code>Pattern.splitAsStream()</code> or <code>Arrays.split()</code>. In this case, the latter is preferred because splitting a string on dashes <code>&quot;-&quot;</code> can be done without compiling a regular expression and utilizing regex engine. <code>Pattern.splitAsStream()</code> might be more beneficial when array is large (<code>splitAsStream()</code> generates a stream directly from the regex engine with need to allocate an intermediate array), or we need to split a string using a regex, and not a regular string like <code>&quot;-&quot;</code>.</p>\n<pre><code>String parameter = &quot;&lt;1-2-3&gt;&lt;4-5-6&gt;&lt;7-8-9&gt;&quot;;\n    \nint[][] matrix = ANGLE_BRACKETS1.matcher(parameter).results()\n    .map(matchResult -&gt; matchResult.group(1))\n    .map(str -&gt; Arrays.stream(str.split(&quot;-&quot;)).mapToInt(Integer::parseInt).toArray())\n    .toArray(int[][]::new);\n    \nSystem.out.println(Arrays.deepToString(matrix));\n</code></pre>\n<p><em>Output:</em></p>\n<pre><code>[[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n</code></pre>\n"}],"owner":{"account_id":17002776,"reputation":179,"user_id":12299738,"display_name":"David Haase"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":237,"favorite_count":0,"down_vote_count":2,"up_vote_count":1,"accepted_answer_id":74546913,"answer_count":2,"score":-1,"last_activity_date":1669209516,"creation_date":1669206345,"question_id":74546763,"body_markdown":"I get a String of the format \r\n`&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;`. I want to turn this into a nested Array of Ints with each Array being the content between the `&lt;&gt;`. \r\n\r\nThis is what I got so far:\r\n```java\r\nString parameter = args[1];\r\n// split the string into an array of strings at &gt;\r\n\r\nString[] splitString = parameter.split(&quot;&gt;&quot;);\r\nint[][] square = new int[splitString.length][splitString.length];\r\n\r\n// remove &lt;, &gt; and - characters and push the numbers into the square\r\n\r\nfor (int i = 0; i &lt; splitString.length; i++) {\r\n    splitString[i] = splitString[i].replaceAll(&quot;[&lt;&gt;-]&quot;, &quot;&quot;);\r\n\r\n    for (int j = 0; j &lt; splitString.length; j++) {\r\n        square[i][j] = Integer.parseInt(splitString[i].substring(j, j + 1));\r\n    }\r\n}\r\n```\r\n\r\nI don&#39;t feel like this is very clean, but it works. Does anyone have an idea on how to improve readability?","title":"How to turn a String into a nested Array","body":"<p>I get a String of the format\n<code>&lt;num-num-num&gt;&lt;num-num-num&gt;&lt;num-num-num&gt;</code>. I want to turn this into a nested Array of Ints with each Array being the content between the <code>&lt;&gt;</code>.</p>\n<p>This is what I got so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String parameter = args[1];\n// split the string into an array of strings at &gt;\n\nString[] splitString = parameter.split(&quot;&gt;&quot;);\nint[][] square = new int[splitString.length][splitString.length];\n\n// remove &lt;, &gt; and - characters and push the numbers into the square\n\nfor (int i = 0; i &lt; splitString.length; i++) {\n    splitString[i] = splitString[i].replaceAll(&quot;[&lt;&gt;-]&quot;, &quot;&quot;);\n\n    for (int j = 0; j &lt; splitString.length; j++) {\n        square[i][j] = Integer.parseInt(splitString[i].substring(j, j + 1));\n    }\n}\n</code></pre>\n<p>I don't feel like this is very clean, but it works. Does anyone have an idea on how to improve readability?</p>\n"},{"tags":["java","split","max"],"comments":[{"owner":{"account_id":1426019,"reputation":4217,"user_id":1356883,"display_name":"kofemann"},"score":0,"creation_date":1669201831,"post_id":74545829,"comment_id":131589456,"body_markdown":"Shouldn&#39;t be &#39;\\\\d+&#39;?","body":"Shouldn&#39;t be &#39;\\\\d+&#39;?"},{"owner":{"account_id":957028,"reputation":15143,"user_id":982149,"accept_rate":100,"display_name":"Fildor"},"score":0,"creation_date":1669201855,"post_id":74545829,"comment_id":131589470,"body_markdown":"As nearly always: your Regex is incorrect. You only match one digit.","body":"As nearly always: your Regex is incorrect. You only match one digit."},{"owner":{"display_name":"user6073886"},"score":1,"creation_date":1669201857,"post_id":74545829,"comment_id":131589471,"body_markdown":"Well, if you want to split by `;` have you considered actually doing `split(&quot;;&quot;)`? `split(&quot;&quot;)` will give you an array where every string has a length of 1.","body":"Well, if you want to split by <code>;</code> have you considered actually doing <code>split(&quot;;&quot;)</code>? <code>split(&quot;&quot;)</code> will give you an array where every string has a length of 1."},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669202618,"post_id":74545829,"comment_id":131589723,"body_markdown":"@OHGODSPIDERS I have considered splitting by ; although that wouldn&#39;t be possible as the splitters in the file are all different. One line is split by &quot; &quot;, second &quot; ; &quot; etc.","body":"@OHGODSPIDERS I have considered splitting by ; although that wouldn&#39;t be possible as the splitters in the file are all different. One line is split by &quot; &quot;, second &quot; ; &quot; etc."},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669202839,"post_id":74545829,"comment_id":131589796,"body_markdown":"@kofemann Ive tried to use the &quot;\\\\d+&quot; but it still only shows one digit for some reason","body":"@kofemann Ive tried to use the &quot;\\\\d+&quot; but it still only shows one digit for some reason"},{"owner":{"account_id":2506013,"reputation":89,"user_id":2179720,"display_name":"Luponius"},"score":0,"creation_date":1669203519,"post_id":74545829,"comment_id":131590041,"body_markdown":"Was the `\\\\d+` also included in the maxInt pattern compilation check?","body":"Was the <code>\\\\d+</code> also included in the maxInt pattern compilation check?"},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669204490,"post_id":74545829,"comment_id":131590387,"body_markdown":"@Luponius Yes, When I add it to the seperator checker &amp; maxInt it comes back with:\n\nOperation{seperator=SEMICOLON}\nOptionalInt[6]","body":"@Luponius Yes, When I add it to the seperator checker &amp; maxInt it comes back with:  Operation{seperator=SEMICOLON} OptionalInt[6]"},{"owner":{"display_name":"user6073886"},"score":2,"creation_date":1669205276,"post_id":74545829,"comment_id":131590663,"body_markdown":"@wieszak09 Well in that case: You say you already have a method to find the separator, so you should use that found `SeperatorEnum separator` for splitting. Since you didn&#39;t include it I don&#39;t know how exactly the class `SeperatorEnum` looks like, but maybe something like `data.split(seperator.getSeparatorStringValue())` is possible (Where getSeparatorStringValue would return &quot;;&quot; for the enum SEMICOLON). However you want to accomplish it, in the end you need to split by what is actually separating your numbers and not just do `data.split(&quot;&quot;)` in your maxInt method as that is simply wrong.","body":"@wieszak09 Well in that case: You say you already have a method to find the separator, so you should use that found <code>SeperatorEnum separator</code> for splitting. Since you didn&#39;t include it I don&#39;t know how exactly the class <code>SeperatorEnum</code> looks like, but maybe something like <code>data.split(seperator.getSeparatorStringValue())</code> is possible (Where getSeparatorStringValue would return &quot;;&quot; for the enum SEMICOLON). However you want to accomplish it, in the end you need to split by what is actually separating your numbers and not just do <code>data.split(&quot;&quot;)</code> in your maxInt method as that is simply wrong."},{"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"score":0,"creation_date":1669205916,"post_id":74545829,"comment_id":131590877,"body_markdown":"Thank you @OHGODSPIDERS The above has solved the issue :) many thanks for your input","body":"Thank you @OHGODSPIDERS The above has solved the issue :) many thanks for your input"}],"owner":{"account_id":25873634,"reputation":51,"user_id":19604090,"display_name":"wieszak09"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":59,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669209446,"creation_date":1669201665,"question_id":74545829,"body_markdown":"I&#39;m working on a problem where I have to find a separator of the data and also find the highest number from it. I have found the separator, although when I&#39;m trying to complete `findMax` from the data and there is number 33, for example, it doesn&#39;t recognize it as 33 but rather it sees it as 3 and 3 separatley.\r\n\r\nCould you advise?\r\n\r\n    public class Main {\r\n    public static void main(String[] args) {\r\n        String data = &quot;1;2;33;4;6&quot;;\r\n        Operation operation = new Operation();\r\n        operation.findSeperator(data);\r\n        System.out.println(operation);\r\n\r\n        System.out.println(operation.maxInt(data));\r\n    }\r\n\r\n    public class Operation {\r\n\r\n    private SeperatorEnum seperator;\r\n    private String data;\r\n\r\n    public void findSeperator(String data) {\r\n        Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\r\n        Optional&lt;String&gt; optional = Arrays.stream(data.split(&quot;&quot;))\r\n                .filter(e -&gt; !pattern.matcher(e).matches())\r\n                .findFirst();\r\n        this.seperator = Arrays.stream(SeperatorEnum.values())\r\n                .filter(e -&gt; e.getSeperator().equals(optional.orElse(null)))\r\n                .findFirst()\r\n                .orElseThrow();\r\n    }\r\n\r\n    public OptionalInt maxInt (String data) {\r\n        Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\r\n        return Arrays.stream(data.split(&quot;&quot;))\r\n              .filter(e -&gt; pattern.matcher(e).matches())\r\n                .mapToInt(Integer::parseInt)\r\n                .max();\r\n    }\r\n\r\nHere is a sample of the data:\r\n\r\n    String data = &quot;1;2;33;4;6&quot;;\r\n\r\n","title":"max() doesn&#39;t return 10 it returns 1 then 0","body":"<p>I'm working on a problem where I have to find a separator of the data and also find the highest number from it. I have found the separator, although when I'm trying to complete <code>findMax</code> from the data and there is number 33, for example, it doesn't recognize it as 33 but rather it sees it as 3 and 3 separatley.</p>\n<p>Could you advise?</p>\n<pre><code>public class Main {\npublic static void main(String[] args) {\n    String data = &quot;1;2;33;4;6&quot;;\n    Operation operation = new Operation();\n    operation.findSeperator(data);\n    System.out.println(operation);\n\n    System.out.println(operation.maxInt(data));\n}\n\npublic class Operation {\n\nprivate SeperatorEnum seperator;\nprivate String data;\n\npublic void findSeperator(String data) {\n    Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\n    Optional&lt;String&gt; optional = Arrays.stream(data.split(&quot;&quot;))\n            .filter(e -&gt; !pattern.matcher(e).matches())\n            .findFirst();\n    this.seperator = Arrays.stream(SeperatorEnum.values())\n            .filter(e -&gt; e.getSeperator().equals(optional.orElse(null)))\n            .findFirst()\n            .orElseThrow();\n}\n\npublic OptionalInt maxInt (String data) {\n    Pattern pattern = Pattern.compile(&quot;\\\\d&quot;);\n    return Arrays.stream(data.split(&quot;&quot;))\n          .filter(e -&gt; pattern.matcher(e).matches())\n            .mapToInt(Integer::parseInt)\n            .max();\n}\n</code></pre>\n<p>Here is a sample of the data:</p>\n<pre><code>String data = &quot;1;2;33;4;6&quot;;\n</code></pre>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":166892,"reputation":4102,"user_id":391338,"display_name":"Sentry"},"score":0,"creation_date":1472246932,"post_id":39174839,"comment_id":65692066,"body_markdown":"You&#39;re trying to start a thread that is already running. That won&#39;t work by definition. Maybe you&#39;re confusing the Thread class or object with the thread concept?","body":"You&#39;re trying to start a thread that is already running. That won&#39;t work by definition. Maybe you&#39;re confusing the Thread class or object with the thread concept?"},{"owner":{"account_id":277416,"reputation":681888,"user_id":571407,"accept_rate":100,"display_name":"JB Nizet"},"score":0,"creation_date":1472247021,"post_id":39174839,"comment_id":65692093,"body_markdown":"Well, create one Runnable instance, and several Thread instances from this Runnable instance. Also, don&#39;t use busy-loops to wait for something to happen.","body":"Well, create one Runnable instance, and several Thread instances from this Runnable instance. Also, don&#39;t use busy-loops to wait for something to happen."},{"owner":{"account_id":16878,"reputation":306143,"user_id":37213,"accept_rate":81,"display_name":"duffymo"},"score":0,"creation_date":1472247055,"post_id":39174839,"comment_id":65692103,"body_markdown":"A pool of Executors should be preferred to using bare Threads.  There&#39;s a reason for the new concurrency package.","body":"A pool of Executors should be preferred to using bare Threads.  There&#39;s a reason for the new concurrency package."}],"answers":[{"tags":[],"owner":{"account_id":543631,"reputation":10094,"user_id":912829,"accept_rate":53,"display_name":"ACV"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1472247047,"creation_date":1472247047,"answer_id":39174882,"question_id":39174839,"body_markdown":"Because you cannot call start on a thread twice. \r\n\r\n[Thread API:][1]\r\n\r\n&gt; It is never legal to start a thread more than once. In particular, a\r\n&gt; thread may not be restarted once it has completed execution.\r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start()\r\n\r\nYou must put in run() a *unit of work* - the code that needs to be executed by multiple threads. And then instantiate as many threads as you need (calling start on each, but only once).","title":"More than one start on one Thread","body":"<p>Because you cannot call start on a thread twice. </p>\n\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start()\" rel=\"nofollow\">Thread API:</a></p>\n\n<blockquote>\n  <p>It is never legal to start a thread more than once. In particular, a\n  thread may not be restarted once it has completed execution.</p>\n</blockquote>\n\n<p>You must put in run() a <em>unit of work</em> - the code that needs to be executed by multiple threads. And then instantiate as many threads as you need (calling start on each, but only once).</p>\n"},{"comments":[{"owner":{"account_id":2792262,"reputation":163877,"user_id":2402272,"accept_rate":85,"display_name":"John Bollinger"},"score":1,"creation_date":1472249268,"post_id":39174890,"comment_id":65692729,"body_markdown":"And a thread pool takes care of thread bookkeeping, and handles joining the threads when you shut down the pool. Additionally, a fixed-size thread pool would make the OP&#39;s semaphore unnecessary, inasmuch as its purpose seems to be simply to cap the number of threads running concurrently.  I&#39;m not necessarily against doing one&#39;s own thread management, but this case seems very well suited to using a pool, instead.","body":"And a thread pool takes care of thread bookkeeping, and handles joining the threads when you shut down the pool. Additionally, a fixed-size thread pool would make the OP&#39;s semaphore unnecessary, inasmuch as its purpose seems to be simply to cap the number of threads running concurrently.  I&#39;m not necessarily against doing one&#39;s own thread management, but this case seems very well suited to using a pool, instead."}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669209270,"creation_date":1472247080,"answer_id":39174890,"question_id":39174839,"body_markdown":"Forget starting your own thread or threads and orchestrating them with your own semaphores. This constitutes a) overengineering, and b) not using the right tools for the job.\r\n\r\nThe threads can be managed by a threadpool, and all the semaphores can be replaced with a single concurrent (thread-safe) queue.\r\n\r\nWith a threadpool you can run methods known as &quot;runners&quot;. You could create a new runner whenever you need a new one, but it is easier to just reuse an existing runner simply by making it run in a loop. The trick is that in each iteration of the loop, the runner picks the next item to work on from the queue and processes it.\r\n\r\nSo, in your example, you stuff all of your smartphones in a queue, and then each &quot;runner&quot; waits until a smartphone is available to dequeue, dequeues it, performs the test, and repeats. The implementation of the concurrent blocking queue guarantees that it will share its contents fairly between consumers.\r\n\r\nIf you have N runners and you want them to gracefully stop, enqueue N instances of a special sentinel value which means &quot;please quit&quot;. When a runner sees this special value, it quits. This will cause exactly N runners to quit.\r\n\r\nRead up on `java.util.concurrent.BlockingQueue` and on `ThreadPoolExecutor`, they are the tool to use for the job.\r\n","title":"More than one start on one Thread","body":"<p>Forget starting your own thread or threads and orchestrating them with your own semaphores. This constitutes a) overengineering, and b) not using the right tools for the job.</p>\n<p>The threads can be managed by a threadpool, and all the semaphores can be replaced with a single concurrent (thread-safe) queue.</p>\n<p>With a threadpool you can run methods known as &quot;runners&quot;. You could create a new runner whenever you need a new one, but it is easier to just reuse an existing runner simply by making it run in a loop. The trick is that in each iteration of the loop, the runner picks the next item to work on from the queue and processes it.</p>\n<p>So, in your example, you stuff all of your smartphones in a queue, and then each &quot;runner&quot; waits until a smartphone is available to dequeue, dequeues it, performs the test, and repeats. The implementation of the concurrent blocking queue guarantees that it will share its contents fairly between consumers.</p>\n<p>If you have N runners and you want them to gracefully stop, enqueue N instances of a special sentinel value which means &quot;please quit&quot;. When a runner sees this special value, it quits. This will cause exactly N runners to quit.</p>\n<p>Read up on <code>java.util.concurrent.BlockingQueue</code> and on <code>ThreadPoolExecutor</code>, they are the tool to use for the job.</p>\n"},{"tags":[],"owner":{"account_id":8643075,"reputation":2470,"user_id":6471170,"accept_rate":60,"display_name":"nasukkin"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1472247208,"creation_date":1472247208,"answer_id":39174913,"question_id":39174839,"body_markdown":"Extract your Thread implementation into its own class, instantiate some instances of those, and start them one-by-one. Example:\r\n\r\n    public class MyThread extends Thread {\r\n        @Override\r\n        public void run() {\r\n           // Do some cool stuff here!\r\n        }\r\n    }\r\n\r\n... And then, elsewhere in your code, when you want to start multiple &quot;copies&quot; of your thread...\r\n\r\n    public void startThreads() {\r\n        MyThread threadA = new MyThread(),\r\n                 threadB = new MyThread(),\r\n                 threadC = new MyThread();\r\n        threadA.start();\r\n        threadB.start();\r\n        threadC.start();\r\n        // make as many as you need, then invoke start on them.\r\n    }\r\n\r\nBUT, as others have already pointed out, each instance of Thread can only be `start()`ed one time.","title":"More than one start on one Thread","body":"<p>Extract your Thread implementation into its own class, instantiate some instances of those, and start them one-by-one. Example:</p>\n\n<pre><code>public class MyThread extends Thread {\n    @Override\n    public void run() {\n       // Do some cool stuff here!\n    }\n}\n</code></pre>\n\n<p>... And then, elsewhere in your code, when you want to start multiple \"copies\" of your thread...</p>\n\n<pre><code>public void startThreads() {\n    MyThread threadA = new MyThread(),\n             threadB = new MyThread(),\n             threadC = new MyThread();\n    threadA.start();\n    threadB.start();\n    threadC.start();\n    // make as many as you need, then invoke start on them.\n}\n</code></pre>\n\n<p>BUT, as others have already pointed out, each instance of Thread can only be <code>start()</code>ed one time.</p>\n"}],"owner":{"account_id":5028159,"reputation":37,"user_id":4039299,"accept_rate":100,"display_name":"DynamicBit"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":74,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":39174890,"answer_count":3,"score":0,"last_activity_date":1669209270,"creation_date":1472246824,"question_id":39174839,"body_markdown":"Iam trying to start a thread more than one time. But I read that is not possible, because I get a the IllegalThreadStateException for it. Iam trying to do the following thing. I have **n** smartphone. I would like to do an automatic test on apps. the tests are parallel, one app per device.  any idea to solve it? Here is my Code?\r\n\r\n    Semaphore smartphones = new Semaphore(androidComponents.size());\r\n    Thread evaluationProcess = new Thread() {\r\n            public void run() {\r\n                try {\r\n                    smartphones.acquire();\r\n                    [CODE FOR TESTING]\r\n                    smartphones.release();\r\n            }\r\n        };\r\n\r\n        while (!evaluationCompleted(apps)) {\r\n            evaluationProcess.start();\r\n            while (smartphones.availablePermits() == 0) ;\r\n        }","title":"More than one start on one Thread","body":"<p>Iam trying to start a thread more than one time. But I read that is not possible, because I get a the IllegalThreadStateException for it. Iam trying to do the following thing. I have <strong>n</strong> smartphone. I would like to do an automatic test on apps. the tests are parallel, one app per device.  any idea to solve it? Here is my Code?</p>\n\n<pre><code>Semaphore smartphones = new Semaphore(androidComponents.size());\nThread evaluationProcess = new Thread() {\n        public void run() {\n            try {\n                smartphones.acquire();\n                [CODE FOR TESTING]\n                smartphones.release();\n        }\n    };\n\n    while (!evaluationCompleted(apps)) {\n        evaluationProcess.start();\n        while (smartphones.availablePermits() == 0) ;\n    }\n</code></pre>\n"},{"tags":["java","java.util.scanner","branch","joptionpane"],"comments":[{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1669207472,"post_id":74546898,"comment_id":131591409,"body_markdown":"Please provide a [mre]. Currently we don&#39;t know what `dataLogin` is and does. (Btw: Java Naming Conventions says that class names shall start uppercase) Please [edit] your question accordingly, and also add the input, output and expected output.","body":"Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Currently we don&#39;t know what <code>dataLogin</code> is and does. (Btw: Java Naming Conventions says that class names shall start uppercase) Please <a href=\"https://stackoverflow.com/posts/74546898/edit\">edit</a> your question accordingly, and also add the input, output and expected output."},{"owner":{"account_id":27024293,"reputation":1,"user_id":20581811,"display_name":"YOi"},"score":0,"creation_date":1669207793,"post_id":74546898,"comment_id":131591529,"body_markdown":"Sorry, this is my first time asking on Stack Overflow","body":"Sorry, this is my first time asking on Stack Overflow"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1669207882,"post_id":74546898,"comment_id":131591569,"body_markdown":"Don&#39;t worry, be sure to check out the link I posted and to edit your question accordingly. For further reference, be sure to take the [tour] and have a look at [ask]","body":"Don&#39;t worry, be sure to check out the link I posted and to edit your question accordingly. For further reference, be sure to take the <a href=\"https://stackoverflow.com/tour\">tour</a> and have a look at <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>"},{"owner":{"account_id":27024293,"reputation":1,"user_id":20581811,"display_name":"YOi"},"score":0,"creation_date":1669209314,"post_id":74546898,"comment_id":131592014,"body_markdown":"Is my qustion appropriate?","body":"Is my qustion appropriate?"},{"owner":{"account_id":15856821,"reputation":2451,"user_id":11441011,"display_name":"maloomeister"},"score":0,"creation_date":1669209775,"post_id":74546898,"comment_id":131592191,"body_markdown":"No, you have not provided a [mre]. Somebody trying to help you cannot simply take your code and run it themselves. So try to fix all compilation problems and to provide the correct code, otherwise people won&#39;t be able to help you.","body":"No, you have not provided a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Somebody trying to help you cannot simply take your code and run it themselves. So try to fix all compilation problems and to provide the correct code, otherwise people won&#39;t be able to help you."},{"owner":{"account_id":2392155,"reputation":2372,"user_id":2091803,"accept_rate":86,"display_name":"Abdullah Leghari"},"score":0,"creation_date":1669216989,"post_id":74546898,"comment_id":131595197,"body_markdown":"It does display JOptionPane on my system. Java 11, Windows 10 64-bit.","body":"It does display JOptionPane on my system. Java 11, Windows 10 64-bit."},{"owner":{"account_id":24518100,"reputation":1845,"user_id":18431570,"display_name":"Jagroop"},"score":0,"creation_date":1669217228,"post_id":74546898,"comment_id":131595312,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"owner":{"account_id":27024293,"reputation":1,"user_id":20581811,"display_name":"YOi"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":30,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669209240,"creation_date":1669206979,"question_id":74546898,"body_markdown":"[This is the output][1]\r\n\r\nThis is my school assignment. I want to make a program using Scanner and JOptionPane. But my program is stuck on branching. Can anyone help me? Somehow the JOptionPane doesn&#39;t want to appear. I want that when I type the number 1, the OPtionPane will appear. I&#39;m a complete newbie at this.\r\n\r\n\r\nThis is the script:\r\n\r\n\r\n           int choice;\r\n           \r\n           do{\r\n               System.out.print(&quot;MAIN MENU&quot; + &quot;\\n--------------------&quot;\r\n                       + &quot;\\nOption Menu :&quot; + &quot;\\n1. LOGIN&quot; + &quot;\\n2. EXIT&quot; + &quot;\\n--------------------&quot; + &quot;\\nYour choice: &quot;);\r\n               choice = in.nextInt();\r\n               \r\n               if(choice == 1){\r\n                   String user = &quot;&quot;;\r\n                   user = JOptionPane.showInputDialog(&quot;Username : &quot;);\r\n                   \r\n                   String pass = &quot;&quot;;\r\n                   pass = JOptionPane.showInputDialog(&quot;Password : &quot;);\r\n           } while (choice != 2);\r\n      }\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rRD12.png","title":"Can JOptionPane be included in a branching program (if)?","body":"<p><a href=\"https://i.stack.imgur.com/rRD12.png\" rel=\"nofollow noreferrer\">This is the output</a></p>\n<p>This is my school assignment. I want to make a program using Scanner and JOptionPane. But my program is stuck on branching. Can anyone help me? Somehow the JOptionPane doesn't want to appear. I want that when I type the number 1, the OPtionPane will appear. I'm a complete newbie at this.</p>\n<p>This is the script:</p>\n<pre><code>       int choice;\n       \n       do{\n           System.out.print(&quot;MAIN MENU&quot; + &quot;\\n--------------------&quot;\n                   + &quot;\\nOption Menu :&quot; + &quot;\\n1. LOGIN&quot; + &quot;\\n2. EXIT&quot; + &quot;\\n--------------------&quot; + &quot;\\nYour choice: &quot;);\n           choice = in.nextInt();\n           \n           if(choice == 1){\n               String user = &quot;&quot;;\n               user = JOptionPane.showInputDialog(&quot;Username : &quot;);\n               \n               String pass = &quot;&quot;;\n               pass = JOptionPane.showInputDialog(&quot;Password : &quot;);\n       } while (choice != 2);\n  }\n</code></pre>\n"},{"tags":["java","spring-boot","eclipse","interface","crud-repository"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1669211792,"post_id":74547351,"comment_id":131593007,"body_markdown":"Don&#39;t... This is so wrong. Don&#39;t construct an `ApplicationContext` or `BeanFactory` because you need a bean, instead autowire the `UserService` in the controller.","body":"Don&#39;t... This is so wrong. Don&#39;t construct an <code>ApplicationContext</code> or <code>BeanFactory</code> because you need a bean, instead autowire the <code>UserService</code> in the controller."},{"owner":{"account_id":27023840,"reputation":1,"user_id":20581431,"display_name":"Zeeshan"},"score":0,"creation_date":1669220332,"post_id":74547351,"comment_id":131596481,"body_markdown":"Hi Deinum, I started to learn Spring so would like to test each behaviour to understand Sping for a real world application. Thx. Any advise please to fix this? I am using STS Spring boot.","body":"Hi Deinum, I started to learn Spring so would like to test each behaviour to understand Sping for a real world application. Thx. Any advise please to fix this? I am using STS Spring boot."}],"owner":{"account_id":27023840,"reputation":1,"user_id":20581431,"display_name":"Zeeshan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":176,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669209196,"creation_date":1669209112,"question_id":74547351,"body_markdown":"When I try to @Autowire my repository interface extending crudrepository, the autowired reference becomes null. It only happens when I use spring.xml (xml-based configuration) to get my service class object into the controller. Spring.xml does not allow me to create beans for my repo because it requires a class, whereas the repo is an interface.\r\n\r\n&lt;bean id=&quot;StudentRepoBean&quot; class=&quot;com.myspringproject1.repo.StudentRepo&quot;&gt;&lt;/bean&gt;\r\n\r\nError is \r\n\r\nServlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause\r\n\r\n```\r\njava.lang.NullPointerException: null \r\nat com.myspringproject1.service.SignupService.doSignup(SignupService.java:81) ~[classes/:na]\r\n\tat com.myspringproject1.controller.TestController.doSignup(TestController.java:42) ~[classes/:na]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]\r\n\tat java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]\r\n```\r\n\r\n    \r\nspring.xml\r\n```\r\n&lt;bean ..... &gt;\r\n&lt;context:annotation-config/&gt;\r\n    \r\n    &lt;bean id=&quot;signupServiceBean&quot; class=&quot;com.myspringproject1.service.SignupService&quot;&gt;&lt;/bean&gt;\r\n    &lt;!-- &lt;bean id=&quot;StudentRepoBean&quot; class=&quot;com.myspringproject1.repo.StudentRepo&quot;&gt;&lt;/bean&gt; --&gt; //commented. repo interface bean\r\n     \r\n    &lt;jpa:repositories base-package=&quot;com.myspringproject1.repo&quot;/&gt;\r\n    \r\n&lt;/beans&gt;\r\n```\r\n\r\n\r\nController.class\r\n```\r\n@Controller\r\npublic class TestController {\r\n\r\n@RequestMapping(method = RequestMethod.POST, value = &quot;signup&quot;)\r\n\tpublic ModelAndView doSignup(HttpServletRequest request) {\r\n\t\t\r\n\t\tBeanFactory factory = new XmlBeanFactory(new ClassPathResource(&quot;spring.xml&quot;));\r\n\t\tSignupService signupService = (SignupService) factory.getBean(&quot;signupServiceBean&quot;);\r\n\t\t\r\n\t\t\r\n\t\tModelAndView mv = new ModelAndView();\r\n\t\t\r\n\t\tboolean result = signupService.doSignup(request);\r\n\t\tif (result == true) {\r\n\t\t\tUser newUser = (User) request.getSession().getAttribute(&quot;user&quot;);\r\n\t\t\tmv.setViewName(&quot;signup_result&quot;);\r\n\t\t\tmv.addObject(&quot;newUser&quot;, newUser);\r\n\t\t\treturn mv;\r\n\t\t}\r\n\t\r\n\t\telse {\r\n\t\t\tmv.setViewName(&quot;signup_result&quot;);\r\n\t\t\tmv.addObject(&quot;newUser&quot;, null);\r\n\t\t\treturn mv;\r\n\t\t}\r\n\t}\r\n```\r\n\r\nRepository interface\r\n```\r\n@Repository\r\npublic interface StudentRepo extends CrudRepository&lt;User, Integer&gt;{\r\n\r\n}\r\n\r\nService class.\r\n\r\n```\r\n@Service\r\npublic class SignupService {\r\n\t\r\n\t@Autowired\r\n\tprivate StudentRepo studentRepo;\r\n        User result = studentRepo.save(user); // This fails as studentRepo is coming null.\r\n\r\n\r\n\r\n\r\nI would appreciate your help in resolving this issue. The whole project works when I don&#39;t use spring.xml and just use @component over my service class and autowire it as well in my controller.\r\n\r\nI doubt if autowire + xml based config works together!","title":"Autowiring repository gives null in Spring Boot?","body":"<p>When I try to @Autowire my repository interface extending crudrepository, the autowired reference becomes null. It only happens when I use spring.xml (xml-based configuration) to get my service class object into the controller. Spring.xml does not allow me to create beans for my repo because it requires a class, whereas the repo is an interface.</p>\n<p></p>\n<p>Error is</p>\n<p>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed; nested exception is java.lang.NullPointerException] with root cause</p>\n<pre><code>java.lang.NullPointerException: null \nat com.myspringproject1.service.SignupService.doSignup(SignupService.java:81) ~[classes/:na]\n    at com.myspringproject1.controller.TestController.doSignup(TestController.java:42) ~[classes/:na]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_202]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_202]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_202]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_202]\n</code></pre>\n<p>spring.xml</p>\n<pre><code>&lt;bean ..... &gt;\n&lt;context:annotation-config/&gt;\n    \n    &lt;bean id=&quot;signupServiceBean&quot; class=&quot;com.myspringproject1.service.SignupService&quot;&gt;&lt;/bean&gt;\n    &lt;!-- &lt;bean id=&quot;StudentRepoBean&quot; class=&quot;com.myspringproject1.repo.StudentRepo&quot;&gt;&lt;/bean&gt; --&gt; //commented. repo interface bean\n     \n    &lt;jpa:repositories base-package=&quot;com.myspringproject1.repo&quot;/&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<p>Controller.class</p>\n<pre><code>@Controller\npublic class TestController {\n\n@RequestMapping(method = RequestMethod.POST, value = &quot;signup&quot;)\n    public ModelAndView doSignup(HttpServletRequest request) {\n        \n        BeanFactory factory = new XmlBeanFactory(new ClassPathResource(&quot;spring.xml&quot;));\n        SignupService signupService = (SignupService) factory.getBean(&quot;signupServiceBean&quot;);\n        \n        \n        ModelAndView mv = new ModelAndView();\n        \n        boolean result = signupService.doSignup(request);\n        if (result == true) {\n            User newUser = (User) request.getSession().getAttribute(&quot;user&quot;);\n            mv.setViewName(&quot;signup_result&quot;);\n            mv.addObject(&quot;newUser&quot;, newUser);\n            return mv;\n        }\n    \n        else {\n            mv.setViewName(&quot;signup_result&quot;);\n            mv.addObject(&quot;newUser&quot;, null);\n            return mv;\n        }\n    }\n</code></pre>\n<p>Repository interface</p>\n<pre><code>@Repository\npublic interface StudentRepo extends CrudRepository&lt;User, Integer&gt;{\n\n}\n\nService class.\n\n</code></pre>\n<p>@Service\npublic class SignupService {</p>\n<pre><code>@Autowired\nprivate StudentRepo studentRepo;\n    User result = studentRepo.save(user); // This fails as studentRepo is coming null.\n</code></pre>\n<p>I would appreciate your help in resolving this issue. The whole project works when I don't use spring.xml and just use @component over my service class and autowire it as well in my controller.</p>\n<p>I doubt if autowire + xml based config works together!</p>\n"},{"tags":["java","arraylist","java-8","hashmap"],"answers":[{"tags":[],"owner":{"account_id":11227882,"reputation":61,"user_id":8236993,"display_name":"Joxtacy"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669095393,"creation_date":1669095393,"answer_id":74527935,"question_id":74527893,"body_markdown":"I don&#39;t know what the class `StudentBean` look like, but something like the following might work.\r\n\r\n```java\r\nfor (StudentBean studentBean : resultList) {\r\n    originalStudentDetails.put(studentBean.getStudentId(), studentBean);\r\n}\r\n```\r\n\r\nThis is assuming that `StudentBean` has a method called `getStudentId` that returns an `int` or `Integer`.","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>I don't know what the class <code>StudentBean</code> look like, but something like the following might work.</p>\n<pre class=\"lang-java prettyprint-override\"><code>for (StudentBean studentBean : resultList) {\n    originalStudentDetails.put(studentBean.getStudentId(), studentBean);\n}\n</code></pre>\n<p>This is assuming that <code>StudentBean</code> has a method called <code>getStudentId</code> that returns an <code>int</code> or <code>Integer</code>.</p>\n"},{"tags":[],"owner":{"account_id":27000035,"reputation":34,"user_id":20561457,"display_name":"npe"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669096535,"creation_date":1669096535,"answer_id":74528048,"question_id":74527893,"body_markdown":"Java 8, by lambda:\r\n```\r\nMap&lt;Integer, StudentBean&gt; map = resultList.stream().filter(t -&gt; t != null || t.getStudentId() != null).collect(Collectors.toMap(StudentBean::getStudentId, t -&gt; t));\r\n```\r\nStudentId must not be repeat or null, or there will be a duplicate key exception.","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>Java 8, by lambda:</p>\n<pre><code>Map&lt;Integer, StudentBean&gt; map = resultList.stream().filter(t -&gt; t != null || t.getStudentId() != null).collect(Collectors.toMap(StudentBean::getStudentId, t -&gt; t));\n</code></pre>\n<p>StudentId must not be repeat or null, or there will be a duplicate key exception.</p>\n"},{"tags":[],"owner":{"account_id":11415719,"reputation":7030,"user_id":10584605,"display_name":"ETO"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669209038,"creation_date":1669209038,"answer_id":74547339,"question_id":74527893,"body_markdown":"In addition to Joxtacy&#39;s [correct approach][1]:\r\n\r\n```java\r\nresultList.forEach(s -&gt; originalStudentDetails.put(s.getStudentId(), s));\r\n```\r\n\r\n\r\n  [1]: https://stackoverflow.com/a/74527935/10584605","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>In addition to Joxtacy's <a href=\"https://stackoverflow.com/a/74527935/10584605\">correct approach</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>resultList.forEach(s -&gt; originalStudentDetails.put(s.getStudentId(), s));\n</code></pre>\n"}],"owner":{"account_id":20276759,"reputation":255,"user_id":14871599,"display_name":"Ranyk"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74547339,"answer_count":3,"score":2,"last_activity_date":1669209038,"creation_date":1669095075,"question_id":74527893,"body_markdown":"I have a List:\r\n \r\n`List&lt;StudentBean&gt; resultList`\r\n\r\nStudentBean has something like with getters and setters:\r\n\r\n`{ Integer StudentId, String StudentName, String Section}`.\r\n\r\n\r\nI have a map with values: `Map&lt;Integer, StudentBean&gt; orginialStudentDetails`\r\n\r\nNow I want to add/replace the values from resultList to orginialStudentDetails, how can I achieve that?\r\n\r\nTried:\r\n\r\n```\r\nfor (Map.Entry&lt;Integer, StudentBean&gt; entry : resultList .size()){\r\n     orginialStudentDetails.put(entry.getKey(), resultList );\r\n}","title":"Adding the ArrayList&lt;StudentBean&gt; values to HashMap&lt;Integer, StudentBean&gt;","body":"<p>I have a List:</p>\n<p><code>List&lt;StudentBean&gt; resultList</code></p>\n<p>StudentBean has something like with getters and setters:</p>\n<p><code>{ Integer StudentId, String StudentName, String Section}</code>.</p>\n<p>I have a map with values: <code>Map&lt;Integer, StudentBean&gt; orginialStudentDetails</code></p>\n<p>Now I want to add/replace the values from resultList to orginialStudentDetails, how can I achieve that?</p>\n<p>Tried:</p>\n<pre><code>for (Map.Entry&lt;Integer, StudentBean&gt; entry : resultList .size()){\n     orginialStudentDetails.put(entry.getKey(), resultList );\n}\n</code></pre>\n"},{"tags":["java","intellij-idea"],"answers":[{"tags":[],"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669193719,"creation_date":1669193719,"answer_id":74544055,"question_id":74543988,"body_markdown":"If you click on the arrow present just after `Current File`, you will find an option called `Edit Configurations`. There you can add your own variables for running your application. And yes, you can save your configuration using the `Save TEST_CLASS_NAME Configuration`.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/gzs7I.png","title":"IntelliJ IDEA Run applications","body":"<p>If you click on the arrow present just after <code>Current File</code>, you will find an option called <code>Edit Configurations</code>. There you can add your own variables for running your application. And yes, you can save your configuration using the <code>Save TEST_CLASS_NAME Configuration</code>.</p>\n<p><a href=\"https://i.stack.imgur.com/gzs7I.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gzs7I.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"account_id":26970512,"reputation":1,"user_id":20536602,"display_name":"D_W"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":47,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669208932,"creation_date":1669193450,"question_id":74543988,"body_markdown":"Excuse me, the Run applications of IntelliJ IDEA in the picture below have questions about variables.\r\nAfter the Run applications are running, will they save the previously executed variables like the JShell console of IntelliJ IDEA, and they can be used in the next execution?\r\n\r\n\r\n![enter image description here](https://i.stack.imgur.com/gU9W1.png)\r\n\r\n\r\nI want to know whether Run applications has such a function, or only JShell console can do it.\r\n\r\n","title":"IntelliJ IDEA Run applications","body":"<p>Excuse me, the Run applications of IntelliJ IDEA in the picture below have questions about variables.\nAfter the Run applications are running, will they save the previously executed variables like the JShell console of IntelliJ IDEA, and they can be used in the next execution?</p>\n<p><img src=\"https://i.stack.imgur.com/gU9W1.png\" alt=\"enter image description here\" /></p>\n<p>I want to know whether Run applications has such a function, or only JShell console can do it.</p>\n"},{"tags":["java","scala","sbt","intellij-plugin"],"comments":[{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1669215591,"post_id":74545975,"comment_id":131594621,"body_markdown":"Can you build your project without IntelliJ (outside IntelliJ)? `sbt clean compile`","body":"Can you build your project without IntelliJ (outside IntelliJ)? <code>sbt clean compile</code>"},{"owner":{"account_id":23560691,"reputation":5,"user_id":17602095,"display_name":"forvev"},"score":0,"creation_date":1669239141,"post_id":74545975,"comment_id":131602214,"body_markdown":"@DmytroMitin I did it and I&#39;m stuck with this message: &quot;getting org.scala-sbt sbt 1.8.0  (this may take some time)...&quot;. I waited for 30 minutes approx","body":"@DmytroMitin I did it and I&#39;m stuck with this message: &quot;getting org.scala-sbt sbt 1.8.0  (this may take some time)...&quot;. I waited for 30 minutes approx"},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1669255245,"post_id":74545975,"comment_id":131605109,"body_markdown":"There was a problem with IntelliJ that two different IntelliJ sbt processes or one outside Intellij and one inside can hang https://youtrack.jetbrains.com/issue/SCL-18626/SBT-locks-forever-waiting-for-.sbt-idea-lock@for  https://youtrack.jetbrains.com/issue/SCL-7355 But if you experience difficulties without IntelliJ (and restarting/killing the process doesn&#39;t help) this can be also some connectivity issue. Are you behind proxy?","body":"There was a problem with IntelliJ that two different IntelliJ sbt processes or one outside Intellij and one inside can hang <a href=\"https://youtrack.jetbrains.com/issue/SCL-18626/SBT-locks-forever-waiting-for-.sbt-idea-lock@for\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/SCL-18626/&hellip;</a>  <a href=\"https://youtrack.jetbrains.com/issue/SCL-7355\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/SCL-7355</a> But if you experience difficulties without IntelliJ (and restarting/killing the process doesn&#39;t help) this can be also some connectivity issue. Are you behind proxy?"},{"owner":{"account_id":23560691,"reputation":5,"user_id":17602095,"display_name":"forvev"},"score":0,"creation_date":1669287110,"post_id":74545975,"comment_id":131612694,"body_markdown":"I don&#39;t use proxy at all. I tried to play with different projects at the same time to detect some concurrencies, but nothing works.","body":"I don&#39;t use proxy at all. I tried to play with different projects at the same time to detect some concurrencies, but nothing works."},{"owner":{"account_id":2503348,"reputation":48669,"user_id":5249621,"display_name":"Dmytro Mitin"},"score":0,"creation_date":1670456283,"post_id":74545975,"comment_id":131882898,"body_markdown":"https://github.com/lampepfl/dotty/discussions/14979","body":"<a href=\"https://github.com/lampepfl/dotty/discussions/14979\" rel=\"nofollow noreferrer\">github.com/lampepfl/dotty/discussions/14979</a>"}],"owner":{"account_id":23560691,"reputation":5,"user_id":17602095,"display_name":"forvev"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":340,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669208794,"creation_date":1669202484,"question_id":74545975,"body_markdown":"I have a problem with my scala project. \r\nI try to create a new project with SBT builder but once I create it I am stuck with this message:\r\n**sbt: extracting project structure from sbt**\r\n\r\nI use:\r\nsbt 1.8.0,\r\nscala 2.13.10,\r\nIntellij 2022.2.3,\r\nSDT 1.8/11/17/19\r\n\r\nI will be really grateful if someone has any idea how can I solve it.\r\n\r\n\r\n![communicate](https://i.stack.imgur.com/TtjXY.png)\r\n\r\n![SBT shell](https://i.stack.imgur.com/vAMvH.png)\r\n\r\nI tired to use different version of SBT, scala, JDK, installing/uninstalling ItelliJ, removing sbt.boot.lock or importing external sources of sbt and scala. Nothing works.","title":"endless import: &quot;sbt: extracting project structure from sbt&quot; - SCALA project","body":"<p>I have a problem with my scala project.\nI try to create a new project with SBT builder but once I create it I am stuck with this message:\n<strong>sbt: extracting project structure from sbt</strong></p>\n<p>I use:\nsbt 1.8.0,\nscala 2.13.10,\nIntellij 2022.2.3,\nSDT 1.8/11/17/19</p>\n<p>I will be really grateful if someone has any idea how can I solve it.</p>\n<p><img src=\"https://i.stack.imgur.com/TtjXY.png\" alt=\"communicate\" /></p>\n<p><img src=\"https://i.stack.imgur.com/vAMvH.png\" alt=\"SBT shell\" /></p>\n<p>I tired to use different version of SBT, scala, JDK, installing/uninstalling ItelliJ, removing sbt.boot.lock or importing external sources of sbt and scala. Nothing works.</p>\n"},{"tags":["java","spring","spring-cloud-contract"],"answers":[{"tags":[],"owner":{"account_id":14325595,"reputation":91,"user_id":10347787,"display_name":"mackesmilian"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669208327,"creation_date":1669208327,"answer_id":74547195,"question_id":74546996,"body_markdown":"Found the issue, was a careless oversight. My base class is located in at.* and i set it as com.*","title":"Spring Cloud Contract and Gradle Setup Question","body":"<p>Found the issue, was a careless oversight. My base class is located in at.* and i set it as com.*</p>\n"}],"owner":{"account_id":14325595,"reputation":91,"user_id":10347787,"display_name":"mackesmilian"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":219,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669208327,"creation_date":1669207426,"question_id":74546996,"body_markdown":"I&#39;m trying out Spring Cloud Contract but cannot get it to run properly. \r\nI have followed a couple of tutorials and looked into the spring-provided repository. The outcome is always the same:\r\n\r\n```\r\nerror: cannot find symbol\r\nimport com.wolf.dependencies.BaseTest;\r\n                            ^\r\n  symbol:   class BaseTest\r\n  location: package com.wolf.dependencies\r\n```\r\n\r\nThis is how my build.gradle looks:\r\n\r\n```\r\nplugins {\r\n\tid &#39;java&#39;\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.7.5&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.0.15.RELEASE&#39;\r\n\tid &quot;org.springframework.cloud.contract&quot; version &quot;3.1.5&quot;\r\n}\r\n\r\ngroup = &#39;at.wolf&#39;\r\nversion = &#39;0.0.1-SNAPSHOT&#39;\r\nsourceCompatibility = &#39;17&#39;\r\n\r\nrepositories {\r\n\tmavenCentral()\r\n}\r\n\r\next {\r\n\tset(&#39;springCloudContractVersion&#39;, &quot;3.1.5&quot;)\r\n}\r\n\r\ndependencies {\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-web&#39;\r\n\timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n\tdevelopmentOnly &#39;org.springframework.boot:spring-boot-devtools&#39;\r\n\truntimeOnly &#39;com.h2database:h2&#39;\r\n    testImplementation &#39;junit:junit:4.13.1&#39;\r\n\ttestImplementation &#39;org.springframework.boot:spring-boot-starter-test&#39;\r\n\ttestImplementation &#39;org.springframework.cloud:spring-cloud-starter-contract-verifier&#39;\r\n}\r\n\r\ndependencyManagement {\r\n\timports {\r\n\t\tmavenBom &quot;org.springframework.cloud:spring-cloud-contract-dependencies:${springCloudContractVersion}&quot;\r\n\t}\r\n}\r\n\r\ntasks.named(&#39;test&#39;) {\r\n\tuseJUnitPlatform()\r\n}\r\n\r\ncontracts {\r\n\tbaseClassForTests = &#39;com.wolf.dependencies.BaseTest&#39;\r\n}\r\n```\r\nAnd the BaseTest class:\r\n\r\n```\r\npackage at.wolf.dependencies;\r\n\r\nimport at.wolf.dependencies.controller.CustomerController;\r\nimport io.restassured.module.mockmvc.RestAssuredMockMvc;\r\nimport org.junit.Before;\r\nimport org.junit.runner.RunWith;\r\nimport org.springframework.beans.factory.annotation.Autowired;\r\nimport org.springframework.boot.test.context.SpringBootTest;\r\nimport org.springframework.cloud.contract.verifier.messaging.boot.AutoConfigureMessageVerifier;\r\nimport org.springframework.test.annotation.DirtiesContext;\r\nimport org.springframework.test.context.junit4.SpringRunner;\r\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\r\nimport org.springframework.test.web.servlet.setup.StandaloneMockMvcBuilder;\r\n\r\n@RunWith(SpringRunner.class)\r\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\r\n@DirtiesContext\r\n@AutoConfigureMessageVerifier\r\nclass BaseTest {\r\n\r\n\t@Autowired\r\n\tprivate CustomerController customerController;\r\n\r\n\t@Before\r\n\tpublic void setup() {\r\n\t\tStandaloneMockMvcBuilder standaloneMockMvcBuilder\r\n\t\t\t\t= MockMvcBuilders.standaloneSetup(customerController);\r\n\t\tRestAssuredMockMvc.standaloneSetup(standaloneMockMvcBuilder);\r\n\t}\r\n\r\n}\r\n```\r\n\r\nI suspect I have some mistake in my BaseTest class, but I&#39;m not familiar enough with spring boot tests to determine what it is. Any help would be appreciated.","title":"Spring Cloud Contract and Gradle Setup Question","body":"<p>I'm trying out Spring Cloud Contract but cannot get it to run properly.\nI have followed a couple of tutorials and looked into the spring-provided repository. The outcome is always the same:</p>\n<pre><code>error: cannot find symbol\nimport com.wolf.dependencies.BaseTest;\n                            ^\n  symbol:   class BaseTest\n  location: package com.wolf.dependencies\n</code></pre>\n<p>This is how my build.gradle looks:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.7.5'\n    id 'io.spring.dependency-management' version '1.0.15.RELEASE'\n    id &quot;org.springframework.cloud.contract&quot; version &quot;3.1.5&quot;\n}\n\ngroup = 'at.wolf'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nrepositories {\n    mavenCentral()\n}\n\next {\n    set('springCloudContractVersion', &quot;3.1.5&quot;)\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n    runtimeOnly 'com.h2database:h2'\n    testImplementation 'junit:junit:4.13.1'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.cloud:spring-cloud-starter-contract-verifier'\n}\n\ndependencyManagement {\n    imports {\n        mavenBom &quot;org.springframework.cloud:spring-cloud-contract-dependencies:${springCloudContractVersion}&quot;\n    }\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n\ncontracts {\n    baseClassForTests = 'com.wolf.dependencies.BaseTest'\n}\n</code></pre>\n<p>And the BaseTest class:</p>\n<pre><code>package at.wolf.dependencies;\n\nimport at.wolf.dependencies.controller.CustomerController;\nimport io.restassured.module.mockmvc.RestAssuredMockMvc;\nimport org.junit.Before;\nimport org.junit.runner.RunWith;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.cloud.contract.verifier.messaging.boot.AutoConfigureMessageVerifier;\nimport org.springframework.test.annotation.DirtiesContext;\nimport org.springframework.test.context.junit4.SpringRunner;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\nimport org.springframework.test.web.servlet.setup.StandaloneMockMvcBuilder;\n\n@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)\n@DirtiesContext\n@AutoConfigureMessageVerifier\nclass BaseTest {\n\n    @Autowired\n    private CustomerController customerController;\n\n    @Before\n    public void setup() {\n        StandaloneMockMvcBuilder standaloneMockMvcBuilder\n                = MockMvcBuilders.standaloneSetup(customerController);\n        RestAssuredMockMvc.standaloneSetup(standaloneMockMvcBuilder);\n    }\n\n}\n</code></pre>\n<p>I suspect I have some mistake in my BaseTest class, but I'm not familiar enough with spring boot tests to determine what it is. Any help would be appreciated.</p>\n"},{"tags":["java","spring-boot","friendly-url","prettyfaces"],"comments":[{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669208409,"post_id":74547162,"comment_id":131591719,"body_markdown":"Please include code/configuration as code blocks not links to off-site resources. Also read https://stackoverflow.com/help/how-to-ask and improve your question.","body":"Please include code/configuration as code blocks not links to off-site resources. Also read <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> and improve your question."}],"owner":{"account_id":22511489,"reputation":11,"user_id":16768944,"display_name":"bordinhon"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669208197,"creation_date":1669208155,"question_id":74547162,"body_markdown":"i have a problem with Pretty Faces... I&#39;m trying mapping the urls in the file &quot;pretty-config.xml&quot; but the file doesn&#39;t read. When i try to access an url the console says that &quot;No mapping for GET &lt;my url&gt;&quot;\r\n\r\n[error in console](https://i.stack.imgur.com/ipNoi.png)\r\n\r\n[pretty-config.xml](https://i.stack.imgur.com/YLIBA.png)\r\n\r\n[my browser](https://i.stack.imgur.com/EBXvn.png)\r\n\r\nI tried add a filter in my SpringBootAplication but without success (error 500)","title":"Pretty faces does not work in spring-boot","body":"<p>i have a problem with Pretty Faces... I'm trying mapping the urls in the file &quot;pretty-config.xml&quot; but the file doesn't read. When i try to access an url the console says that &quot;No mapping for GET &quot;</p>\n<p><a href=\"https://i.stack.imgur.com/ipNoi.png\" rel=\"nofollow noreferrer\">error in console</a></p>\n<p><a href=\"https://i.stack.imgur.com/YLIBA.png\" rel=\"nofollow noreferrer\">pretty-config.xml</a></p>\n<p><a href=\"https://i.stack.imgur.com/EBXvn.png\" rel=\"nofollow noreferrer\">my browser</a></p>\n<p>I tried add a filter in my SpringBootAplication but without success (error 500)</p>\n"},{"tags":["java","string"],"comments":[{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":2,"creation_date":1519850043,"post_id":49038048,"comment_id":85081299,"body_markdown":"When you say  &quot;unique&quot;, do you  mean it only counts a specific vowel once? Give an example input and output.","body":"When you say  &quot;unique&quot;, do you  mean it only counts a specific vowel once? Give an example input and output."},{"owner":{"account_id":115767,"reputation":42976,"user_id":303810,"accept_rate":84,"display_name":"lexicore"},"score":2,"creation_date":1519850097,"post_id":49038048,"comment_id":85081328,"body_markdown":"I sometimes give this task on interviews. And **NOT A SINGLE SOUL** ever asked &quot;Vowels in which language?&quot;","body":"I sometimes give this task on interviews. And <b>NOT A SINGLE SOUL</b> ever asked &quot;Vowels in which language?&quot;"},{"owner":{"account_id":12865482,"reputation":133,"user_id":9305919,"display_name":"Ramsey"},"score":0,"creation_date":1519850131,"post_id":49038048,"comment_id":85081346,"body_markdown":"Yes various occurrences of same vowel shouldn&#39;t count","body":"Yes various occurrences of same vowel shouldn&#39;t count"},{"owner":{"account_id":7421543,"reputation":2874,"user_id":5645656,"accept_rate":100,"display_name":"Cardinal System"},"score":0,"creation_date":1519850174,"post_id":49038048,"comment_id":85081367,"body_markdown":"Give an example input and the desired output.","body":"Give an example input and the desired output."},{"owner":{"account_id":12865482,"reputation":133,"user_id":9305919,"display_name":"Ramsey"},"score":0,"creation_date":1519850232,"post_id":49038048,"comment_id":85081395,"body_markdown":"input&quot;AAAEEEE&quot; output &quot;2&quot;","body":"input&quot;AAAEEEE&quot; output &quot;2&quot;"},{"owner":{"account_id":2889245,"reputation":3533,"user_id":2478398,"display_name":"BeUndead"},"score":0,"creation_date":1519850297,"post_id":49038048,"comment_id":85081429,"body_markdown":"Is this for an assignment?","body":"Is this for an assignment?"},{"owner":{"account_id":8639482,"reputation":4701,"user_id":6468580,"display_name":"Luke Garrigan"},"score":0,"creation_date":1519850395,"post_id":49038048,"comment_id":85081479,"body_markdown":"It works absolutely fine for me,  input &quot;AAAEEEE&quot; gives me 7, which I&#39;d expect from the name of the method","body":"It works absolutely fine for me,  input &quot;AAAEEEE&quot; gives me 7, which I&#39;d expect from the name of the method"},{"owner":{"account_id":1082858,"reputation":104688,"user_id":1079354,"accept_rate":93,"display_name":"Makoto"},"score":0,"creation_date":1519850428,"post_id":49038048,"comment_id":85081496,"body_markdown":"@Fubar:  If you&#39;re looking for &quot;distinct&quot; vowels, you should get two since only &quot;A&quot; and &quot;E&quot; appear.","body":"@Fubar:  If you&#39;re looking for &quot;distinct&quot; vowels, you should get two since only &quot;A&quot; and &quot;E&quot; appear."},{"owner":{"account_id":8639482,"reputation":4701,"user_id":6468580,"display_name":"Luke Garrigan"},"score":0,"creation_date":1519850488,"post_id":49038048,"comment_id":85081527,"body_markdown":"@Makoto absolutely","body":"@Makoto absolutely"}],"answers":[{"tags":[],"owner":{"account_id":2845296,"reputation":130,"user_id":2443879,"display_name":"amalgamat"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1519850108,"creation_date":1519850108,"answer_id":49038084,"question_id":49038048,"body_markdown":"You could use Set data structure and instead of incrementing the counter just add vowels to the set. At the end you can return just the size of the set.","title":"Print the number of unique vowels in a string, Java","body":"<p>You could use Set data structure and instead of incrementing the counter just add vowels to the set. At the end you can return just the size of the set.</p>\n"},{"tags":[],"owner":{"display_name":"user3335083"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1519850222,"creation_date":1519850222,"answer_id":49038112,"question_id":49038048,"body_markdown":"there&#39;s definitely an issue here with this counting. at the very least. you should rethink this:\r\n\r\n    if (str.charAt(i) == &#39;a&#39; || str.charAt(i) == &#39;e&#39; || str.charAt(i) == &#39;i&#39;\r\n                    || str.charAt(i) == &#39;o&#39; || str.charAt(i) == &#39;u&#39;)\r\n    \r\n                count++;","title":"Print the number of unique vowels in a string, Java","body":"<p>there's definitely an issue here with this counting. at the very least. you should rethink this:</p>\n\n<pre><code>if (str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i'\n                || str.charAt(i) == 'o' || str.charAt(i) == 'u')\n\n            count++;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10436649,"reputation":5754,"user_id":7694740,"display_name":"Juan Carlos Mendoza"},"score":0,"creation_date":1519851876,"post_id":49038132,"comment_id":85082241,"body_markdown":"Don&#39;t know why this answer was downvoted. Is also a valid solution.","body":"Don&#39;t know why this answer was downvoted. Is also a valid solution."}],"tags":[],"owner":{"account_id":13025234,"reputation":321,"user_id":9413440,"display_name":"Moriz Martiner"},"comment_count":1,"down_vote_count":2,"up_vote_count":2,"is_accepted":false,"score":0,"last_activity_date":1519851573,"creation_date":1519850291,"answer_id":49038132,"question_id":49038048,"body_markdown":"You could use the method `contains`     \r\n\r\n    public static int count_Vowels(String str) {\r\n        str = str.toLowerCase();\r\n        int count = 0;\r\n        count += string.contains(&quot;a&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;e&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;i&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;o&quot;) ? 1 : 0;\r\n        count += string.contains(&quot;u&quot;) ? 1 : 0;\r\n        return count;\r\n    }\r\n\r\n","title":"Print the number of unique vowels in a string, Java","body":"<p>You could use the method <code>contains</code>     </p>\n\n<pre><code>public static int count_Vowels(String str) {\n    str = str.toLowerCase();\n    int count = 0;\n    count += string.contains(\"a\") ? 1 : 0;\n    count += string.contains(\"e\") ? 1 : 0;\n    count += string.contains(\"i\") ? 1 : 0;\n    count += string.contains(\"o\") ? 1 : 0;\n    count += string.contains(\"u\") ? 1 : 0;\n    return count;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":11052106,"reputation":3581,"user_id":8116173,"display_name":"Przemysław Moskal"},"score":2,"creation_date":1519851538,"post_id":49038170,"comment_id":85082050,"body_markdown":"@ElliotFrisch , your solution is, of course, a very efficient one. I&#39;m just wondering - in the case of longer strings - which approach is considered as a more efficient: 1) in your for loop, after last `else-if` adding a bit of code that checks if `a+e+i+o+u` is already equal to 5 (note that it is being executed in each loop) and if it is, breaking the loop and immediate returning this sum? 2) looping whole string without additional code that I mentioned, exactly as you did in your example (additional code is not added, but you need to loop over entire string).","body":"@ElliotFrisch , your solution is, of course, a very efficient one. I&#39;m just wondering - in the case of longer strings - which approach is considered as a more efficient: 1) in your for loop, after last <code>else-if</code> adding a bit of code that checks if <code>a+e+i+o+u</code> is already equal to 5 (note that it is being executed in each loop) and if it is, breaking the loop and immediate returning this sum? 2) looping whole string without additional code that I mentioned, exactly as you did in your example (additional code is not added, but you need to loop over entire string)."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":1,"creation_date":1519855358,"post_id":49038170,"comment_id":85084006,"body_markdown":"I considered that; this solution is `O(n)` - adding a short-circuit return optimization would still leave it as O(n). I worry about premature optimization too, we want the algorithm to be clear in the answer - optimizing it might distract from that (which is why I ultimately decided not to here).","body":"I considered that; this solution is <code>O(n)</code> - adding a short-circuit return optimization would still leave it as O(n). I worry about premature optimization too, we want the algorithm to be clear in the answer - optimizing it might distract from that (which is why I ultimately decided not to here)."},{"owner":{"account_id":11052106,"reputation":3581,"user_id":8116173,"display_name":"Przemysław Moskal"},"score":1,"creation_date":1519855853,"post_id":49038170,"comment_id":85084237,"body_markdown":"Thank you for providing an explanation, as in such cases I always think if I should include such an additional part that would quit loop if necessary - it seems like it&#39;s better not to include too much of that to avoid making too much mess in code. Maybe if OP would ask in question that he looks for the possibly most efficient way of solving the problem, it would be worth considering to add further improvements. Thank you for your time.","body":"Thank you for providing an explanation, as in such cases I always think if I should include such an additional part that would quit loop if necessary - it seems like it&#39;s better not to include too much of that to avoid making too much mess in code. Maybe if OP would ask in question that he looks for the possibly most efficient way of solving the problem, it would be worth considering to add further improvements. Thank you for your time."},{"owner":{"account_id":8639482,"reputation":4701,"user_id":6468580,"display_name":"Luke Garrigan"},"score":0,"creation_date":1519916644,"post_id":49038170,"comment_id":85109556,"body_markdown":"Thank you for commenting this @PrzemysławMoskal it hadn&#39;t occurred to me.","body":"Thank you for commenting this @PrzemysławMoskal it hadn&#39;t occurred to me."},{"owner":{"account_id":11052106,"reputation":3581,"user_id":8116173,"display_name":"Przemysław Moskal"},"score":0,"creation_date":1519921915,"post_id":49038170,"comment_id":85113322,"body_markdown":"Hey @Fubar - What hadn&#39;t occur to you?","body":"Hey @Fubar - What hadn&#39;t occur to you?"},{"owner":{"account_id":8639482,"reputation":4701,"user_id":6468580,"display_name":"Luke Garrigan"},"score":1,"creation_date":1519924859,"post_id":49038170,"comment_id":85115143,"body_markdown":"adding the check to see whether the sum was equal to 5 @PrzemysławMoskal It&#39;s just an optimisation that I didn&#39;t think of","body":"adding the check to see whether the sum was equal to 5 @PrzemysławMoskal It&#39;s just an optimisation that I didn&#39;t think of"},{"owner":{"account_id":11052106,"reputation":3581,"user_id":8116173,"display_name":"Przemysław Moskal"},"score":0,"creation_date":1519927128,"post_id":49038170,"comment_id":85116329,"body_markdown":"@Fubar Ok, I got it now :-)","body":"@Fubar Ok, I got it now :-)"}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":7,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1519850461,"creation_date":1519850461,"answer_id":49038170,"question_id":49038048,"body_markdown":"I would start with five variables (one for each vowel) set to `0`, iterate the characters in the input and set the corresponding variable to `1` if I find a match, and simply return the accumulated value of said variables. Like,\r\n\r\n\tpublic static int count_Vowels(String str) {\r\n\t\tint a = 0, e = 0, i = 0, o = 0, u = 0;\r\n\t\tfor (char ch : str.toLowerCase().toCharArray()) {\r\n\t\t\tif (ch == &#39;a&#39;) {\r\n\t\t\t\ta = 1;\r\n\t\t\t} else if (ch == &#39;e&#39;) {\r\n\t\t\t\te = 1;\r\n\t\t\t} else if (ch == &#39;i&#39;) {\r\n\t\t\t\ti = 1;\r\n\t\t\t} else if (ch == &#39;o&#39;) {\r\n\t\t\t\to = 1;\r\n\t\t\t} else if (ch == &#39;u&#39;) {\r\n\t\t\t\tu = 1;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn a + e + i + o + u;\r\n\t}","title":"Print the number of unique vowels in a string, Java","body":"<p>I would start with five variables (one for each vowel) set to <code>0</code>, iterate the characters in the input and set the corresponding variable to <code>1</code> if I find a match, and simply return the accumulated value of said variables. Like,</p>\n\n<pre><code>public static int count_Vowels(String str) {\n    int a = 0, e = 0, i = 0, o = 0, u = 0;\n    for (char ch : str.toLowerCase().toCharArray()) {\n        if (ch == 'a') {\n            a = 1;\n        } else if (ch == 'e') {\n            e = 1;\n        } else if (ch == 'i') {\n            i = 1;\n        } else if (ch == 'o') {\n            o = 1;\n        } else if (ch == 'u') {\n            u = 1;\n        }\n    }\n    return a + e + i + o + u;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10436649,"reputation":5754,"user_id":7694740,"display_name":"Juan Carlos Mendoza"},"score":1,"creation_date":1519850922,"post_id":49038179,"comment_id":85081730,"body_markdown":"I&#39;m waiting for the same in my answer.","body":"I&#39;m waiting for the same in my answer."},{"owner":{"account_id":11052106,"reputation":3581,"user_id":8116173,"display_name":"Przemysław Moskal"},"score":1,"creation_date":1519851829,"post_id":49038179,"comment_id":85082206,"body_markdown":"@JuanCarlosMendoza Thank you for your suggestion. I thought that checking presence of that vowel in set and eventual skipping loop in case of presence of that vowel in set is faster than execution of code adding the same vowel to the set on and on. I used a rollback option to edit this answer to its previous state. Thank you for pointing it out.","body":"@JuanCarlosMendoza Thank you for your suggestion. I thought that checking presence of that vowel in set and eventual skipping loop in case of presence of that vowel in set is faster than execution of code adding the same vowel to the set on and on. I used a rollback option to edit this answer to its previous state. Thank you for pointing it out."}],"tags":[],"owner":{"account_id":11052106,"reputation":3581,"user_id":8116173,"display_name":"Przemysław Moskal"},"comment_count":2,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1519851611,"creation_date":1519850495,"answer_id":49038179,"question_id":49038048,"body_markdown":"I made explanations in the comments to the code:\r\n\r\n    public static int count_Vowels(String str) {\r\n    \t    str = str.toLowerCase();\r\n    \t    Set&lt;Character&gt; setOfUsedChars = new HashSet&lt;&gt;(); // Here you store used vowels\r\n    \t    for (int i = 0; i &lt; str.length(); i++) {\r\n    \t        if (str.charAt(i) == &#39;a&#39; || str.charAt(i) == &#39;e&#39; || str.charAt(i) == &#39;i&#39;\r\n    \t                || str.charAt(i) == &#39;o&#39; || str.charAt(i) == &#39;u&#39;) { // if currently checked character is vowel...\r\n    \t        \tsetOfUsedChars.add(str.charAt(i)); // add this vowel to setOfUsedChars\r\n    \t        }\r\n    \t    }\r\n    \t    return setOfUsedChars.size(); // size of this sets is a number of vowels present in input String\r\n    }","title":"Print the number of unique vowels in a string, Java","body":"<p>I made explanations in the comments to the code:</p>\n\n<pre><code>public static int count_Vowels(String str) {\n        str = str.toLowerCase();\n        Set&lt;Character&gt; setOfUsedChars = new HashSet&lt;&gt;(); // Here you store used vowels\n        for (int i = 0; i &lt; str.length(); i++) {\n            if (str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i'\n                    || str.charAt(i) == 'o' || str.charAt(i) == 'u') { // if currently checked character is vowel...\n                setOfUsedChars.add(str.charAt(i)); // add this vowel to setOfUsedChars\n            }\n        }\n        return setOfUsedChars.size(); // size of this sets is a number of vowels present in input String\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":10436649,"reputation":5754,"user_id":7694740,"display_name":"Juan Carlos Mendoza"},"score":0,"creation_date":1519850632,"post_id":49038191,"comment_id":85081586,"body_markdown":"Downvoter please explain the reason of the downvote.","body":"Downvoter please explain the reason of the downvote."}],"tags":[],"owner":{"account_id":10436649,"reputation":5754,"user_id":7694740,"display_name":"Juan Carlos Mendoza"},"comment_count":1,"down_vote_count":1,"up_vote_count":2,"is_accepted":false,"score":1,"last_activity_date":1519852165,"creation_date":1519850549,"answer_id":49038191,"question_id":49038048,"body_markdown":"The problem in your code is that you are not counting the distinct vowels, but all the vowels in the string. A Java-8 way to this:\r\n\r\n    public static int countDistinctVowels(String str) {\r\n        str = str.toLowerCase();\r\n        int count = (int) str.chars()                     // get IntStream of chars\r\n                .mapToObj(c -&gt; (char) c)                  // cast to char\r\n                .filter(c -&gt; &quot;aeiou&quot;.indexOf(c) &gt; -1)     // remove all non-vowels\r\n                .distinct()                               // keep the distinct values\r\n                .count();                                 // count the values\r\n\r\n        return count;\r\n    }\r\n\r\nAlso use proper Java naming conventions: `countDistinctVowels`, no `count_Distinct_Vowels`.","title":"Print the number of unique vowels in a string, Java","body":"<p>The problem in your code is that you are not counting the distinct vowels, but all the vowels in the string. A Java-8 way to this:</p>\n\n<pre><code>public static int countDistinctVowels(String str) {\n    str = str.toLowerCase();\n    int count = (int) str.chars()                     // get IntStream of chars\n            .mapToObj(c -&gt; (char) c)                  // cast to char\n            .filter(c -&gt; \"aeiou\".indexOf(c) &gt; -1)     // remove all non-vowels\n            .distinct()                               // keep the distinct values\n            .count();                                 // count the values\n\n    return count;\n}\n</code></pre>\n\n<p>Also use proper Java naming conventions: <code>countDistinctVowels</code>, no <code>count_Distinct_Vowels</code>.</p>\n"},{"comments":[{"owner":{"account_id":2423559,"reputation":2324,"user_id":2116001,"accept_rate":60,"display_name":"gogaz"},"score":1,"creation_date":1556307960,"post_id":55873887,"comment_id":98407921,"body_markdown":"Welcome on StackOverflow, while this may be the correct answer, you should be leaving a little insight/ explanation of what you have done here to make it a quality answer which will help others understand the root cause of problem.","body":"Welcome on StackOverflow, while this may be the correct answer, you should be leaving a little insight/ explanation of what you have done here to make it a quality answer which will help others understand the root cause of problem."}],"tags":[],"owner":{"account_id":15823939,"reputation":1,"user_id":11417469,"display_name":"Shoeb Shaul"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556307031,"creation_date":1556307031,"answer_id":55873887,"question_id":49038048,"body_markdown":"    static void vow(String input){\t\t\t\r\n\t\tString output=input.toLowerCase();\r\n\t\tint flaga=0,flage=0,flagi=0,flago=0,flagu=0;\r\n\t\tfor(int i=0;i&lt;input.length();i++) {\r\n\t\t\tif((output.charAt(i))==&#39;a&#39; &amp;&amp; flaga==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflaga++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;e&#39; &amp;&amp; flage==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflage++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;i&#39; &amp;&amp; flagi==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflagi++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;o&#39; &amp;&amp; flago==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflago++;\r\n\t\t\t}\r\n\t\t\tif(output.charAt(i)==&#39;u&#39; &amp;&amp; flagu==0) {\r\n\t\t\t\tSystem.out.print(input.charAt(i)+&quot; &quot;);\r\n\t\t\t\tflagu++;\r\n\t\t\t}\r\n\t\t}\r\n\t}","title":"Print the number of unique vowels in a string, Java","body":"<pre><code>static void vow(String input){          \n    String output=input.toLowerCase();\n    int flaga=0,flage=0,flagi=0,flago=0,flagu=0;\n    for(int i=0;i&lt;input.length();i++) {\n        if((output.charAt(i))=='a' &amp;&amp; flaga==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flaga++;\n        }\n        if(output.charAt(i)=='e' &amp;&amp; flage==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flage++;\n        }\n        if(output.charAt(i)=='i' &amp;&amp; flagi==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flagi++;\n        }\n        if(output.charAt(i)=='o' &amp;&amp; flago==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flago++;\n        }\n        if(output.charAt(i)=='u' &amp;&amp; flagu==0) {\n            System.out.print(input.charAt(i)+\" \");\n            flagu++;\n        }\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":17117724,"reputation":1321,"user_id":12386821,"display_name":"Jaimil Patel"},"score":0,"creation_date":1590577723,"post_id":62041071,"comment_id":109730304,"body_markdown":"Hope It will solve issue but please add explanation of your code with it so user will get perfect understanding which he/she really wants.","body":"Hope It will solve issue but please add explanation of your code with it so user will get perfect understanding which he/she really wants."}],"tags":[],"owner":{"account_id":18692559,"reputation":1,"user_id":13626584,"display_name":"anjali"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1590575726,"creation_date":1590575726,"answer_id":62041071,"question_id":49038048,"body_markdown":"\r\n\tpublic static void main(String args[]) {\r\n\t\tString sentence;\r\n\t\tint v=0,c=0,ws=0;\r\n\t\tScanner sc= new Scanner(System.in);\r\n\t\tsentence = sc.nextLine();\r\n\t\tsc.close();\r\n\t\tsentence.toLowerCase();\r\n\t\tString res=&quot;&quot;;\r\n\t\tfor(int i=0;i&lt;sentence.length();i++) {\r\n\t\t\t\r\n\t\t\tif(sentence.charAt(i)==&#39;a&#39;||sentence.charAt(i)==&#39;e&#39;||sentence.charAt(i)==&#39;i&#39;||sentence.charAt(i)==&#39;o&#39;||sentence.charAt(i)==&#39;u&#39;) {\r\n\t\t\tif(res.indexOf(sentence.charAt(i))&lt;0) {\r\n\t\t\t\tres+=sentence.charAt(i);\r\n\t\t\tv++;\r\n\t\t\t}//System.out.println(res.indexOf(sentence.charAt(i)));\r\n\t\t\t\t}\r\n\t\t\telse if(sentence.charAt(i)==&#39; &#39;)\r\n\t\t\t\tws++;\r\n\t\t\telse c++;\r\n\t\t}\r\n\t\tSystem.out.println(res);\r\n\t\tSystem.out.println(&quot;no of vowels: &quot;+v+&quot;\\n&quot;+&quot;no of consonants: &quot;+c+&quot;\\n&quot;+&quot;no of \r\n       white spaces: &quot;+ws);\r\n\t}\r\n","title":"Print the number of unique vowels in a string, Java","body":"<pre><code>public static void main(String args[]) {\n    String sentence;\n    int v=0,c=0,ws=0;\n    Scanner sc= new Scanner(System.in);\n    sentence = sc.nextLine();\n    sc.close();\n    sentence.toLowerCase();\n    String res=\"\";\n    for(int i=0;i&lt;sentence.length();i++) {\n\n        if(sentence.charAt(i)=='a'||sentence.charAt(i)=='e'||sentence.charAt(i)=='i'||sentence.charAt(i)=='o'||sentence.charAt(i)=='u') {\n        if(res.indexOf(sentence.charAt(i))&lt;0) {\n            res+=sentence.charAt(i);\n        v++;\n        }//System.out.println(res.indexOf(sentence.charAt(i)));\n            }\n        else if(sentence.charAt(i)==' ')\n            ws++;\n        else c++;\n    }\n    System.out.println(res);\n    System.out.println(\"no of vowels: \"+v+\"\\n\"+\"no of consonants: \"+c+\"\\n\"+\"no of \n   white spaces: \"+ws);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22985879,"reputation":1,"user_id":17112116,"display_name":"Dhruv Sharma"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1633762773,"creation_date":1633762773,"answer_id":69504457,"question_id":49038048,"body_markdown":"You can use this Method to Find Count of Distinct vowels.\r\n```\r\npublic static int count_Vowels(String str) {\r\n    char[] c = str.toLowerCase().toCharArray();\r\n    int Counter=0;\r\n     String NewString=&quot;&quot;;\r\n     for(int i=0;i&lt;c.length;i++){\r\n         String tempString=&quot;&quot;;\r\n         tempString+=c[i];\r\n         if(!NewString.contains(tempString) &amp;&amp; (c[i]==&#39;a&#39;||c[i]==&#39;e&#39;||c[i]==&#39;i&#39;||c[i]==&#39;o&#39;||c[i]==&#39;u&#39;)){\r\n             Counter++;\r\n             NewString+=c[i];\r\n         }\r\n     }\r\n    return Counter;\r\n}\r\n```","title":"Print the number of unique vowels in a string, Java","body":"<p>You can use this Method to Find Count of Distinct vowels.</p>\n<pre><code>public static int count_Vowels(String str) {\n    char[] c = str.toLowerCase().toCharArray();\n    int Counter=0;\n     String NewString=&quot;&quot;;\n     for(int i=0;i&lt;c.length;i++){\n         String tempString=&quot;&quot;;\n         tempString+=c[i];\n         if(!NewString.contains(tempString) &amp;&amp; (c[i]=='a'||c[i]=='e'||c[i]=='i'||c[i]=='o'||c[i]=='u')){\n             Counter++;\n             NewString+=c[i];\n         }\n     }\n    return Counter;\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":6228011,"reputation":1121,"user_id":4845660,"display_name":"Loic Mouchard"},"score":0,"creation_date":1669021983,"post_id":74492170,"comment_id":131539577,"body_markdown":"Why do you answer with non-java code ?","body":"Why do you answer with non-java code ?"}],"tags":[],"owner":{"account_id":26975854,"reputation":1,"user_id":20541108,"display_name":"Benjamin Ross"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668786574,"creation_date":1668786574,"answer_id":74492170,"question_id":49038048,"body_markdown":"Here is a solve for this problem without using objects. It&#39;s a crude but great solve for beginners who encounter this problem with limited js experience.\r\n\r\nHow to count unique vowels is a string;\r\n\r\n    function hasUniqueFourVowels(str){\r\n    let va = 0\r\n    let ve = 0  \r\n    let vi = 0\r\n    let vo = 0\r\n    let vu = 0\r\n    let sum = 0\r\n    for(let i = 0; i &lt; str.length; i++){\r\n     let char = str[i];\r\n       if(char === &quot;i&quot;){\r\n        vi = 1\r\n      }\r\n        if(char === &quot;e&quot;){\r\n        ve = 1\r\n      }\r\n       if(char === &quot;a&quot;){\r\n        va = 1\r\n      }\r\n      if(char === &quot;o&quot;){\r\n       vo = 1\r\n       }\r\n      if(char === &quot;u&quot;){\r\n      vu = 1\r\n      }\r\n      sum = va + vi + vo + ve + vu\r\n      if (sum &gt;= 4){\r\n       return true\r\n       }\r\n     }\r\n       return false\r\n  \r\n     }","title":"Print the number of unique vowels in a string, Java","body":"<p>Here is a solve for this problem without using objects. It's a crude but great solve for beginners who encounter this problem with limited js experience.</p>\n<p>How to count unique vowels is a string;</p>\n<pre><code>function hasUniqueFourVowels(str){\nlet va = 0\nlet ve = 0  \nlet vi = 0\nlet vo = 0\nlet vu = 0\nlet sum = 0\nfor(let i = 0; i &lt; str.length; i++){\n let char = str[i];\n   if(char === &quot;i&quot;){\n    vi = 1\n  }\n    if(char === &quot;e&quot;){\n    ve = 1\n  }\n   if(char === &quot;a&quot;){\n    va = 1\n  }\n  if(char === &quot;o&quot;){\n   vo = 1\n   }\n  if(char === &quot;u&quot;){\n  vu = 1\n  }\n  sum = va + vi + vo + ve + vu\n  if (sum &gt;= 4){\n   return true\n   }\n }\n   return false\n\n }\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27024594,"reputation":1,"user_id":20582063,"display_name":"ilandirayan"},"score":1,"creation_date":1669207792,"post_id":74547047,"comment_id":131591528,"body_markdown":"we can get the count of each vowels using hashmap with less code. hope it will be usefule","body":"we can get the count of each vowels using hashmap with less code. hope it will be usefule"}],"tags":[],"owner":{"account_id":27024594,"reputation":1,"user_id":20582063,"display_name":"ilandirayan"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669207668,"creation_date":1669207668,"answer_id":74547047,"question_id":49038048,"body_markdown":"      @Test\r\n    public void numfindVoweles(){\r\n        String s=&quot;aeiouaedtesssiou&quot;;\r\n        char a[]=s.toCharArray();\r\n        HashMap&lt;Character,Integer&gt; hp= new HashMap&lt;Character, Integer&gt;();\r\n        for(char ch:a){\r\n            if(hp.containsKey(ch) &amp;&amp; (ch==&#39;a&#39; || ch==&#39;e&#39; || ch==&#39;i&#39; || ch==&#39;o&#39; || ch==&#39;u&#39;)){\r\n               hp.put(ch,hp.get(ch)+1);\r\n           }\r\n            else if(ch==&#39;a&#39; || ch==&#39;e&#39; || ch==&#39;i&#39; || ch==&#39;o&#39; || ch==&#39;u&#39;){\r\n                hp.put(ch,1);\r\n            }\r\n        }\r\n        System.out.println(hp);\r\n\r\n    }","title":"Print the number of unique vowels in a string, Java","body":"<pre><code>  @Test\npublic void numfindVoweles(){\n    String s=&quot;aeiouaedtesssiou&quot;;\n    char a[]=s.toCharArray();\n    HashMap&lt;Character,Integer&gt; hp= new HashMap&lt;Character, Integer&gt;();\n    for(char ch:a){\n        if(hp.containsKey(ch) &amp;&amp; (ch=='a' || ch=='e' || ch=='i' || ch=='o' || ch=='u')){\n           hp.put(ch,hp.get(ch)+1);\n       }\n        else if(ch=='a' || ch=='e' || ch=='i' || ch=='o' || ch=='u'){\n            hp.put(ch,1);\n        }\n    }\n    System.out.println(hp);\n\n}\n</code></pre>\n"}],"owner":{"account_id":12865482,"reputation":133,"user_id":9305919,"display_name":"Ramsey"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":4820,"favorite_count":0,"down_vote_count":3,"up_vote_count":4,"accepted_answer_id":49038170,"answer_count":11,"score":1,"last_activity_date":1669207668,"creation_date":1519849959,"question_id":49038048,"body_markdown":"I need to find the number of distinct vowels. I came up with the code below but it can&#39;t make distinction between same vowels:\r\n\r\n    public static int count_Vowels(String str) {\r\n        str = str.toLowerCase();\r\n        int count = 0;\r\n        for (int i = 0; i &lt; str.length(); i++) {\r\n            if (str.charAt(i) == &#39;a&#39; || str.charAt(i) == &#39;e&#39; || str.charAt(i) == &#39;i&#39;\r\n                    || str.charAt(i) == &#39;o&#39; || str.charAt(i) == &#39;u&#39;) {\r\n                count++;\r\n            }\r\n        }\r\n        return count;\r\n    }","title":"Print the number of unique vowels in a string, Java","body":"<p>I need to find the number of distinct vowels. I came up with the code below but it can't make distinction between same vowels:</p>\n\n<pre><code>public static int count_Vowels(String str) {\n    str = str.toLowerCase();\n    int count = 0;\n    for (int i = 0; i &lt; str.length(); i++) {\n        if (str.charAt(i) == 'a' || str.charAt(i) == 'e' || str.charAt(i) == 'i'\n                || str.charAt(i) == 'o' || str.charAt(i) == 'u') {\n            count++;\n        }\n    }\n    return count;\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot","selenium","selenium-webdriver"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669200335,"post_id":74545494,"comment_id":131588941,"body_markdown":"You could try to change the web driver scope to prototype and use a method in `SingletonUtilsObject` that&#39;s annotated with `@Lookup`.","body":"You could try to change the web driver scope to prototype and use a method in <code>SingletonUtilsObject</code> that&#39;s annotated with <code>@Lookup</code>."}],"answers":[{"tags":[],"owner":{"account_id":9914886,"reputation":126,"user_id":7340161,"display_name":"Sai Srikar Mutya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669207637,"creation_date":1669207637,"answer_id":74547041,"question_id":74545494,"body_markdown":" 1. Prototype scope - if you want to get a new instance every time you call for getInstance.\r\n 2. Request scope if you are using HTTP requests and you need an instance for each request.\r\n\r\nYou can refer to: https://www.baeldung.com/spring-bean-scopes","title":"Spring autowire Bean again on each call","body":"<ol>\n<li>Prototype scope - if you want to get a new instance every time you call for getInstance.</li>\n<li>Request scope if you are using HTTP requests and you need an instance for each request.</li>\n</ol>\n<p>You can refer to: <a href=\"https://www.baeldung.com/spring-bean-scopes\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-bean-scopes</a></p>\n"}],"owner":{"account_id":7482273,"reputation":95,"user_id":5686679,"display_name":"Wojciech Kopeć"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":172,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669207637,"creation_date":1669200065,"question_id":74545494,"body_markdown":"I&#39;m developing framework used for E2E frontend testing using primarily Selenium&#39;s WebDriver and I would like to add Spring framework to it. Got some issues regarding WebDriver object, let me explain:\r\n\r\nWhenever I need current WebDriver instance I use this method:\r\n\r\n     public class DriverManager {\r\n     (...)\r\n    //@Bean //For further explanation\r\n     public WebDriver getWebDriver() {\r\n        return getOrCreateWebDriver();\r\n    }\r\n     (...)\r\n    }\r\n\r\nAs written above, It will create WebDriver object if it is `null` (meaning, was not even once initialized or was disposed (`quit` method called) ) or return existing instance. This method is used **ALL ACROSS** the framework and always retrieve correct WebDriver instance. This method was previously `static` and now, introducing Spring, it is refactored as instance.\r\n\r\nI could `@Autowired` DriverManager instance almost everywhere and just call `getWebDriver` but I&#39;m looking for better solution.\r\n\r\n\r\nIdeally I would like to achieve something like this:\r\n        \r\n        @Scope(&quot;singleton&quot;)\r\n        public class SingletonUtilsObject {\r\n        \r\n        @Autowired\r\n        WebDriver webDriver;\r\n        }\r\n\r\n\r\nBUT WebDriver instance could change and it won&#39;t be picked up by `SingletonUtilsObject` instance after autowiring is resolved and beans initialized.\r\n\r\nWhat I was thinking is to somehow dispose @Autowired WebDriver after call and &#39;force&#39; beanFactory to autowire it again on next call - just as it happens on first Bean call if it&#39;s `@Lazy` \r\n\r\nIs there any way to achieve this?","title":"Spring autowire Bean again on each call","body":"<p>I'm developing framework used for E2E frontend testing using primarily Selenium's WebDriver and I would like to add Spring framework to it. Got some issues regarding WebDriver object, let me explain:</p>\n<p>Whenever I need current WebDriver instance I use this method:</p>\n<pre><code> public class DriverManager {\n (...)\n//@Bean //For further explanation\n public WebDriver getWebDriver() {\n    return getOrCreateWebDriver();\n}\n (...)\n}\n</code></pre>\n<p>As written above, It will create WebDriver object if it is <code>null</code> (meaning, was not even once initialized or was disposed (<code>quit</code> method called) ) or return existing instance. This method is used <strong>ALL ACROSS</strong> the framework and always retrieve correct WebDriver instance. This method was previously <code>static</code> and now, introducing Spring, it is refactored as instance.</p>\n<p>I could <code>@Autowired</code> DriverManager instance almost everywhere and just call <code>getWebDriver</code> but I'm looking for better solution.</p>\n<p>Ideally I would like to achieve something like this:</p>\n<pre><code>    @Scope(&quot;singleton&quot;)\n    public class SingletonUtilsObject {\n    \n    @Autowired\n    WebDriver webDriver;\n    }\n</code></pre>\n<p>BUT WebDriver instance could change and it won't be picked up by <code>SingletonUtilsObject</code> instance after autowiring is resolved and beans initialized.</p>\n<p>What I was thinking is to somehow dispose @Autowired WebDriver after call and 'force' beanFactory to autowire it again on next call - just as it happens on first Bean call if it's <code>@Lazy</code></p>\n<p>Is there any way to achieve this?</p>\n"},{"tags":["java","reactive-programming","reactive-streams","mutiny"],"comments":[{"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"score":0,"creation_date":1657033734,"post_id":72849522,"comment_id":128710545,"body_markdown":"Could you elaborate more on your use case? Would you want the upstream `service.getTransactions()` first valid item to be emitted then cancel all the polling altogether (i.e. emit one item and cancel all next ticks)? Do you expect one `transaction` item to be valid (matching your `&quot;test&quot;` predicate)?","body":"Could you elaborate more on your use case? Would you want the upstream <code>service.getTransactions()</code> first valid item to be emitted then cancel all the polling altogether (i.e. emit one item and cancel all next ticks)? Do you expect one <code>transaction</code> item to be valid (matching your <code>&quot;test&quot;</code> predicate)?"},{"owner":{"account_id":2176611,"reputation":556,"user_id":1927161,"accept_rate":70,"display_name":"Panos Karampis"},"score":1,"creation_date":1657043343,"post_id":72849522,"comment_id":128714111,"body_markdown":"My use case is to poll an API for a max amount of time (= while `isOngoing == true`) or until the first transaction that matches the predicate is found. If one of the two happens, cancel the ticking and process further the one emitted transaction. `service.getTransactions()` then is completed, parent is cancelled, i can start another ticking when needed without abusing resources.","body":"My use case is to poll an API for a max amount of time (= while <code>isOngoing == true</code>) or until the first transaction that matches the predicate is found. If one of the two happens, cancel the ticking and process further the one emitted transaction. <code>service.getTransactions()</code> then is completed, parent is cancelled, i can start another ticking when needed without abusing resources."}],"answers":[{"comments":[{"owner":{"account_id":2176611,"reputation":556,"user_id":1927161,"accept_rate":70,"display_name":"Panos Karampis"},"score":0,"creation_date":1657181733,"post_id":72885769,"comment_id":128750698,"body_markdown":"Thanks for it, it looks much cleaner than the implementation i came up with using the Multi#repeating.","body":"Thanks for it, it looks much cleaner than the implementation i came up with using the Multi#repeating."},{"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"score":0,"creation_date":1657191385,"post_id":72885769,"comment_id":128754439,"body_markdown":"Happy to provide another (cleaner) alternative.","body":"Happy to provide another (cleaner) alternative."}],"tags":[],"owner":{"account_id":2411568,"reputation":15860,"user_id":2106516,"accept_rate":91,"display_name":"tmarwen"},"comment_count":2,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1657119442,"creation_date":1657119442,"answer_id":72885769,"question_id":72849522,"body_markdown":"You approach is almost correct, though,\r\n* there is no need to create a custom `MultiEmitter` out of an existing `Multi` (or transformed `Uni`) as you can leverage the different `Multi` operators on top of your source `service#getTransaction` result\r\n* you missed the `EmptyMulti` source which will automatically complete downstream subscriber chain and which you can use to signal an absence of valid item (i.e. `Transaction`)\r\n* you need to select the first valid item (being non-null) then transform your `Multi` to `Uni` which will result in the upstream subscription being cancelled automatically once an item is received\r\n\r\nHere down what the stream pipeline would look like:\r\n\r\n    Multi.createFrom()\r\n            .ticks()\r\n            .every(Duration.ofSeconds(5))\r\n            .onItem()\r\n            // flat map the ticks to the `service#getTransactions` result\r\n            .transformToMultiAndMerge(tick -&gt; service.getTransactions()\r\n                    .toMulti()\r\n                    .onItem()\r\n                    // flatten Collection&lt;Transaction&gt; to Multi&lt;Transaction&gt;\r\n                    .transformToIterable(Function.identity())\r\n                    .onItem()\r\n                    .transformToMultiAndMerge(transaction -&gt; {\r\n                        if (!verification.isOngoing()) {\r\n                            return Multi.createFrom().failure(new TransactionVerificationException());\r\n                        } else {\r\n                            boolean transactionFound = transaction.getAmount()\r\n                                    .stream()\r\n                                    .anyMatch(amount -&gt; amount.getQuantity().equals(&quot;test&quot;));\r\n                            if (transactionFound) {\r\n                                return Multi.createFrom().item(transaction);\r\n                            } else {\r\n                                return Multi.createFrom().empty();\r\n                            }\r\n                        }\r\n                    })\r\n            )\r\n            .select()\r\n            .first(Objects::nonNull)\r\n            .toUni()\r\n            .subscribe()\r\n            .with(transaction -&gt; log.info(transaction), x -&gt; x.printStackTrace());\r\n","title":"Mutiny - Propagate completion to parent multi / polling","body":"<p>You approach is almost correct, though,</p>\n<ul>\n<li>there is no need to create a custom <code>MultiEmitter</code> out of an existing <code>Multi</code> (or transformed <code>Uni</code>) as you can leverage the different <code>Multi</code> operators on top of your source <code>service#getTransaction</code> result</li>\n<li>you missed the <code>EmptyMulti</code> source which will automatically complete downstream subscriber chain and which you can use to signal an absence of valid item (i.e. <code>Transaction</code>)</li>\n<li>you need to select the first valid item (being non-null) then transform your <code>Multi</code> to <code>Uni</code> which will result in the upstream subscription being cancelled automatically once an item is received</li>\n</ul>\n<p>Here down what the stream pipeline would look like:</p>\n<pre><code>Multi.createFrom()\n        .ticks()\n        .every(Duration.ofSeconds(5))\n        .onItem()\n        // flat map the ticks to the `service#getTransactions` result\n        .transformToMultiAndMerge(tick -&gt; service.getTransactions()\n                .toMulti()\n                .onItem()\n                // flatten Collection&lt;Transaction&gt; to Multi&lt;Transaction&gt;\n                .transformToIterable(Function.identity())\n                .onItem()\n                .transformToMultiAndMerge(transaction -&gt; {\n                    if (!verification.isOngoing()) {\n                        return Multi.createFrom().failure(new TransactionVerificationException());\n                    } else {\n                        boolean transactionFound = transaction.getAmount()\n                                .stream()\n                                .anyMatch(amount -&gt; amount.getQuantity().equals(&quot;test&quot;));\n                        if (transactionFound) {\n                            return Multi.createFrom().item(transaction);\n                        } else {\n                            return Multi.createFrom().empty();\n                        }\n                    }\n                })\n        )\n        .select()\n        .first(Objects::nonNull)\n        .toUni()\n        .subscribe()\n        .with(transaction -&gt; log.info(transaction), x -&gt; x.printStackTrace());\n</code></pre>\n"}],"owner":{"account_id":2176611,"reputation":556,"user_id":1927161,"accept_rate":70,"display_name":"Panos Karampis"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":621,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":72885769,"answer_count":1,"score":1,"last_activity_date":1669207488,"creation_date":1656878359,"question_id":72849522,"body_markdown":"I am writing a little polling mechanism using Mutiny, part of me learning the library and i am kinda stuck in cancelling the polling when result is found.\r\nI tried using the tick() and what i came up with looks like\r\n\r\n    Multi.createFrom().ticks().every(Duration.ofSeconds(5))\r\n        .onItem().transformToMultiAndMerge(tick -&gt; {\r\n          System.out.println(&quot;Tick:&quot; + tick);\r\n          return Multi.createFrom()\r\n              .&lt;Transaction&gt;emitter(\r\n                  emitter -&gt; {\r\n                    service.getTransactions().toMulti()\r\n                        .onItem().transformToMultiAndMerge(\r\n                            transactions -&gt; Multi.createFrom().iterable(transactions))\r\n                        .subscribe().with(transaction -&gt; {\r\n                          if (!verification.isOngoing()) {\r\n                            emitter.fail(new TransactionVerificationException());\r\n                          } else {\r\n                            boolean transactionFound = transaction.getAmount().stream().anyMatch(\r\n                                amount -&gt; amount.getQuantity()\r\n                                    .equals(&quot;test&quot;));\r\n                            if (transactionFound) {\r\n                              emitter.emit(transaction);\r\n                              emitter.complete();\r\n                            } \r\n                          }\r\n                        });\r\n                  });\r\n        })\r\n        .subscribe()\r\n        .with(transaction -&gt; log.info(transaction),\r\n            x -&gt; x.printStackTrace());\r\n\r\nProblem here is that the Multi from ticks() is running forever and the only way i think of to cancel it would be to propagate somehow that the emitter has completed.\r\nThe case here is that i want to emit, and process only if certain conditions are met.\r\n","title":"Mutiny - Propagate completion to parent multi / polling","body":"<p>I am writing a little polling mechanism using Mutiny, part of me learning the library and i am kinda stuck in cancelling the polling when result is found.\nI tried using the tick() and what i came up with looks like</p>\n<pre><code>Multi.createFrom().ticks().every(Duration.ofSeconds(5))\n    .onItem().transformToMultiAndMerge(tick -&gt; {\n      System.out.println(&quot;Tick:&quot; + tick);\n      return Multi.createFrom()\n          .&lt;Transaction&gt;emitter(\n              emitter -&gt; {\n                service.getTransactions().toMulti()\n                    .onItem().transformToMultiAndMerge(\n                        transactions -&gt; Multi.createFrom().iterable(transactions))\n                    .subscribe().with(transaction -&gt; {\n                      if (!verification.isOngoing()) {\n                        emitter.fail(new TransactionVerificationException());\n                      } else {\n                        boolean transactionFound = transaction.getAmount().stream().anyMatch(\n                            amount -&gt; amount.getQuantity()\n                                .equals(&quot;test&quot;));\n                        if (transactionFound) {\n                          emitter.emit(transaction);\n                          emitter.complete();\n                        } \n                      }\n                    });\n              });\n    })\n    .subscribe()\n    .with(transaction -&gt; log.info(transaction),\n        x -&gt; x.printStackTrace());\n</code></pre>\n<p>Problem here is that the Multi from ticks() is running forever and the only way i think of to cancel it would be to propagate somehow that the emitter has completed.\nThe case here is that i want to emit, and process only if certain conditions are met.</p>\n"},{"tags":["java","list","filtering","distinct-values"],"comments":[{"owner":{"account_id":14617965,"reputation":584,"user_id":10557540,"display_name":"zhrgci"},"score":0,"creation_date":1669041125,"post_id":74520402,"comment_id":131546342,"body_markdown":"I see, okay I&#39;ll start making a version with loops and clarify it with that as example. Also the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was  a property in `fruit` that I didn&#39;t include. @AlexanderIvanchenko","body":"I see, okay I&#39;ll start making a version with loops and clarify it with that as example. Also the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was  a property in <code>fruit</code> that I didn&#39;t include. @AlexanderIvanchenko"}],"answers":[{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669047450,"creation_date":1669041743,"answer_id":74520653,"question_id":74520402,"body_markdown":"As a possible option you can group `FruitColor` instances by the `name` property of their `fruit`s by storing them into a `Map`. And then dump the values into a list.\r\n\r\nIt can be implemented with Stream API using Collector [`toMap(keyMapper,valueMapper,mergeFunction)`][toMap].\r\n\r\n&gt; the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was a property in fruit\r\n\r\nTo implement the `mergeFunction`, which is meant to resolve values mapped to the same key we can use static method [`BinaryOpearator.maxBy()`][maxBy], which expects a `Comparator`.\r\n\r\nComparator that compares `FruitColor` instances based `rape` property of the `fruit` field might be expressed in the following way:\r\n\r\n```\r\nComparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\r\n```\r\n\r\nor alternatively as:\r\n\r\n```\r\nComparator.comparing(\r\n    FruitColor::getFruit,\r\n    Comparator.comparingInt(Fruit::getRipe)\r\n)\r\n```\r\n\r\nThat&#39;s the overall implementation might look like:\r\n\r\n```\r\nList&lt;FruitColor&gt; fruitColors = // initializing the list\r\n        \r\nList&lt;FruitColor&gt; fruitColorsDistinct = fruitColors.stream()\r\n    .collect(Collectors.toMap(\r\n        fruitColor -&gt; fruitColor.getFruit().getFruitName(), // keyMapper\r\n        Function.identity(),  // valueMapper\r\n        BinaryOperator.maxBy( // mergeFunction - resolving duplicates\r\n            Comparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\r\n        )\r\n    ))\r\n    .values().stream()\r\n    .toList();\r\n```\r\n\r\n\r\n\r\n   [toMap]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)\r\n\r\n   [maxBy]: https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BinaryOperator.html#maxBy(java.util.Comparator)","title":"Find duplicates in List by 2 level deep property","body":"<p>As a possible option you can group <code>FruitColor</code> instances by the <code>name</code> property of their <code>fruit</code>s by storing them into a <code>Map</code>. And then dump the values into a list.</p>\n<p>It can be implemented with Stream API using Collector <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/stream/Collectors.html#toMap(java.util.function.Function,java.util.function.Function,java.util.function.BinaryOperator)\" rel=\"nofollow noreferrer\"><code>toMap(keyMapper,valueMapper,mergeFunction)</code></a>.</p>\n<blockquote>\n<p>the rule to choose which one to keep is how ripe the fruit is, from 0 to a 100, which was a property in fruit</p>\n</blockquote>\n<p>To implement the <code>mergeFunction</code>, which is meant to resolve values mapped to the same key we can use static method <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/function/BinaryOperator.html#maxBy(java.util.Comparator)\" rel=\"nofollow noreferrer\"><code>BinaryOpearator.maxBy()</code></a>, which expects a <code>Comparator</code>.</p>\n<p>Comparator that compares <code>FruitColor</code> instances based <code>rape</code> property of the <code>fruit</code> field might be expressed in the following way:</p>\n<pre><code>Comparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\n</code></pre>\n<p>or alternatively as:</p>\n<pre><code>Comparator.comparing(\n    FruitColor::getFruit,\n    Comparator.comparingInt(Fruit::getRipe)\n)\n</code></pre>\n<p>That's the overall implementation might look like:</p>\n<pre><code>List&lt;FruitColor&gt; fruitColors = // initializing the list\n        \nList&lt;FruitColor&gt; fruitColorsDistinct = fruitColors.stream()\n    .collect(Collectors.toMap(\n        fruitColor -&gt; fruitColor.getFruit().getFruitName(), // keyMapper\n        Function.identity(),  // valueMapper\n        BinaryOperator.maxBy( // mergeFunction - resolving duplicates\n            Comparator.comparingInt(fruitColor -&gt; fruitColor.getFruit().getRipe())\n        )\n    ))\n    .values().stream()\n    .toList();\n</code></pre>\n"}],"owner":{"account_id":14617965,"reputation":584,"user_id":10557540,"display_name":"zhrgci"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":76,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":1,"score":1,"last_activity_date":1669206930,"creation_date":1669040578,"question_id":74520402,"body_markdown":"I&#39;m not sure what to call the property that&#39;s 2 layers deep.\r\n\r\nBut let&#39;s say we have `List&lt;FruitColor&gt;` where `Fruit` and `Color` are 2 entities. (These are all example entities) A `fruit` can have different `color`s, but `color`s can also have different `fruit`s.\r\n\r\n```\r\npublic class FruitColor {\r\n    private String fruitColorId;\r\n    private Fruit fruit;\r\n    private Color color;\r\n    private int ripe; //1 to 3 where 1 unripe 2 normal 3 ripe\r\n\r\n    // more props, getters, etc.\r\n}\r\n\r\npublic class Fruit {\r\n    private String fruitId;\r\n    private String fruitName;\r\n\r\n    // getters, etc.\r\n}\r\n\r\npublic class Color {\r\n    private String colorId;\r\n    private String colorName;\r\n\r\n    // getters, etc.\r\n}\r\n```\r\n\r\nI&#39;m thinking it in the following steps:\r\n\r\n 1. Filter all the duplicates by `fruitName`\r\n 2. Pick one of the two &#39;duplicates&#39;. I say &#39;duplicates&#39; because they only have the same `name`, but not the same `color`. The rule to choose which one to keep is the season/time-transition indicator `systemTransition`, which is described by the `double` property `systemTransition` that ranges from `0` to a `100`.\r\n 3. Remove the other &#39;duplicate&#39;.\r\n 4. If there is a duplicate, makes the fruit less ripe by `0.5`\r\n 5. Set the `factorialRipeness`, which is `ripe * systemTransition`\r\n or `ripe * (100 - systemTransition)` depending on how far we are in the season, halfway is the threshold.\r\n6. Return suggested `FruitColors` with the right `Color`, sorted by `FactorialRipeness`\r\nThe thing is, this is probably do-able with a lot of for loops, but I&#39;m just wondering if there are any ways that are more efficient.\r\n\r\nI did find this source on how to filter by property, but this solution doesn&#39;t let me filter on the property of a property(=`fruitName`).\r\nhttps://stackoverflow.com/questions/23699371/java-8-distinct-by-property \r\n\r\nI&#39;ve made a code example (again different entities) that works. Are there any parts that could be made more efficient? By more efficient I mean, if the code could be shorter and/or faster. I&#39;ll definitely refactor the method into smaller parts later. Sorry for the confusing bits, this problem is really hard to explain without using the exact same entities.\r\n\r\n```\r\n//logic in the method\r\n{\t\r\n\tList&lt;FruitColor&gt; fruitColors = getAllFCs();\r\n\t\r\n\t//Remove if FC is neither colors that were chosen\r\n\tfruitColors.removeIf(fc -&gt; fc.getColor().getColorId() != presentColor.getColor().getColorId()\r\n\t\t\t&amp;&amp; fc.getColor().getColorId() != futureColor.getColor().getColorId());\r\n\tList&lt;FruitColor&gt; suggestedFruits = new ArrayList&lt;&gt;();\r\n\r\n\t//Systemtransition is the season/time from 0 to 100, where 100 the fruit should be completely ripe with the corresponding color.\r\n\t//If the time is less than half, it should pick the present color, which is the less ripe color.\r\n\tboolean getPresentColorFruit = systemTransition &lt; 50;\r\n\r\n\t// ---&gt;This whole for-if-if-else-elseif-if-else part I wanted to make more &quot;efficient&quot; &lt;---\r\n\tfor (FruitColor fruitColor : fruitColors) {\r\n\t\t//First check for duplicate FCs \r\n\t\tList&lt;FruitColor&gt; sameNameFruits = fruitColors.stream()\r\n\t\t\t\t.filter(fc -&gt; fc.getFruit().getName().equals(itemColor.getFruit().getName()))\r\n\t\t\t\t.collect(Collectors.toList());\r\n\t\t\t\t\r\n\t\t//If there is only one of the fruit, check if it&#39;s added already. If not, than add with proper ripeness\r\n\t\t//FactorialRipeness is the &quot;true&quot; ripeness.\r\n\t\tif (sameNameFruits.size() == 1 &amp;&amp; !suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))) {\r\n\t\t\tFruitColor onlyOne = sameNameFruits.get(0);\r\n\t\t\tif (onlyOne.getColor().getColorId() == presentColor.getColor().getColorId()) {\r\n\t\t\t\tonlyOne.setFactorialRipeness(onlyOne.getRipeness() * systemTransition);\r\n\t\t\t} else {\r\n\t\t\t\tonlyOne.setFactorialRipeness(onlyOne.getRipeness() * (100 - systemTransition));\r\n\t\t\t}\r\n\t\t\tsuggestedFruits.add(onlyOne);\r\n\t\t  // If there are multiple FCs, than the ripeness has to go down. Which prioritizes duplicate FCs more. (this part isn&#39;t logical with these entities, sorry)\r\n\t\t} else if(!suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))){\r\n\t\t\tif (getPresentColorFruit) {\r\n\t\t\t\tFruitColor fcWithPresentColor = sameNameFruits.stream()\r\n\t\t\t\t\t\t.filter(fc -&gt; fc.getColor().getColorId() == presentColor.getColor().getColorId()).findFirst()\r\n\t\t\t\t\t\t.get();\r\n\t\t\t\tfcWithPresentColor.setFactorialRipeness((fcWithPresentColor.getRipeness() - 0.5) * systemTransition);\r\n\t\t\t\tsuggestedFruits.add(fcWithPresentColor);\r\n\t\t\t} else {\r\n\t\t\t\tFruitColor fcWithFutureColor = sameNameFruits.stream()\r\n\t\t\t\t\t\t.filter(fc -&gt; fc.getColor().getColorId() == futureColor.getColor().getColorId()).findFirst()\r\n\t\t\t\t\t\t.get();\r\n\t\t\t\t//This part is also not logical, but if the presentColor is not chosen. Than we need to multiply by the opposite amount of the systemTransition\r\n\t\t\t\tfcWithFutureColor.setFactorialRipeness((fcWithFutureColor.getRipeness() - 0.5) * (100 - systemTransition)); \r\n\t\t\t\tsuggestedFruits.add(fcWithFutureColor);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t//Sort by &quot;true&quot; ripeness value, from lowest to highest\r\n\tCollections.sort(suggestedFruits, new FruitColorRipenessComparator());\r\n\treturn suggestedFruits;\r\n}\r\n\r\n/**\r\n * @source https://stackoverflow.com/questions/2839137/how-to-use-comparator-in-java-to-sort\r\n */\r\npublic class FruitColorRipenessComparator implements Comparator&lt;FruitColor&gt; {\r\n\t@Override\r\n\tpublic int compare(FruitColor a, FruitColor b){\r\n\t\treturn a.getFactorialRipeness() &lt; b.getFactorialRipeness() ? -1 : a.getFactorialRipeness() == b.getFactorialRipeness() ? 0 : 1;\r\n\t}\r\n}\r\n```\r\n\r\n","title":"Find duplicates in List by 2 level deep property","body":"<p>I'm not sure what to call the property that's 2 layers deep.</p>\n<p>But let's say we have <code>List&lt;FruitColor&gt;</code> where <code>Fruit</code> and <code>Color</code> are 2 entities. (These are all example entities) A <code>fruit</code> can have different <code>color</code>s, but <code>color</code>s can also have different <code>fruit</code>s.</p>\n<pre><code>public class FruitColor {\n    private String fruitColorId;\n    private Fruit fruit;\n    private Color color;\n    private int ripe; //1 to 3 where 1 unripe 2 normal 3 ripe\n\n    // more props, getters, etc.\n}\n\npublic class Fruit {\n    private String fruitId;\n    private String fruitName;\n\n    // getters, etc.\n}\n\npublic class Color {\n    private String colorId;\n    private String colorName;\n\n    // getters, etc.\n}\n</code></pre>\n<p>I'm thinking it in the following steps:</p>\n<ol>\n<li>Filter all the duplicates by <code>fruitName</code></li>\n<li>Pick one of the two 'duplicates'. I say 'duplicates' because they only have the same <code>name</code>, but not the same <code>color</code>. The rule to choose which one to keep is the season/time-transition indicator <code>systemTransition</code>, which is described by the <code>double</code> property <code>systemTransition</code> that ranges from <code>0</code> to a <code>100</code>.</li>\n<li>Remove the other 'duplicate'.</li>\n<li>If there is a duplicate, makes the fruit less ripe by <code>0.5</code></li>\n<li>Set the <code>factorialRipeness</code>, which is <code>ripe * systemTransition</code>\nor <code>ripe * (100 - systemTransition)</code> depending on how far we are in the season, halfway is the threshold.</li>\n<li>Return suggested <code>FruitColors</code> with the right <code>Color</code>, sorted by <code>FactorialRipeness</code>\nThe thing is, this is probably do-able with a lot of for loops, but I'm just wondering if there are any ways that are more efficient.</li>\n</ol>\n<p>I did find this source on how to filter by property, but this solution doesn't let me filter on the property of a property(=<code>fruitName</code>).\n<a href=\"https://stackoverflow.com/questions/23699371/java-8-distinct-by-property\">Java 8 Distinct by property</a></p>\n<p>I've made a code example (again different entities) that works. Are there any parts that could be made more efficient? By more efficient I mean, if the code could be shorter and/or faster. I'll definitely refactor the method into smaller parts later. Sorry for the confusing bits, this problem is really hard to explain without using the exact same entities.</p>\n<pre><code>//logic in the method\n{   \n    List&lt;FruitColor&gt; fruitColors = getAllFCs();\n    \n    //Remove if FC is neither colors that were chosen\n    fruitColors.removeIf(fc -&gt; fc.getColor().getColorId() != presentColor.getColor().getColorId()\n            &amp;&amp; fc.getColor().getColorId() != futureColor.getColor().getColorId());\n    List&lt;FruitColor&gt; suggestedFruits = new ArrayList&lt;&gt;();\n\n    //Systemtransition is the season/time from 0 to 100, where 100 the fruit should be completely ripe with the corresponding color.\n    //If the time is less than half, it should pick the present color, which is the less ripe color.\n    boolean getPresentColorFruit = systemTransition &lt; 50;\n\n    // ---&gt;This whole for-if-if-else-elseif-if-else part I wanted to make more &quot;efficient&quot; &lt;---\n    for (FruitColor fruitColor : fruitColors) {\n        //First check for duplicate FCs \n        List&lt;FruitColor&gt; sameNameFruits = fruitColors.stream()\n                .filter(fc -&gt; fc.getFruit().getName().equals(itemColor.getFruit().getName()))\n                .collect(Collectors.toList());\n                \n        //If there is only one of the fruit, check if it's added already. If not, than add with proper ripeness\n        //FactorialRipeness is the &quot;true&quot; ripeness.\n        if (sameNameFruits.size() == 1 &amp;&amp; !suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))) {\n            FruitColor onlyOne = sameNameFruits.get(0);\n            if (onlyOne.getColor().getColorId() == presentColor.getColor().getColorId()) {\n                onlyOne.setFactorialRipeness(onlyOne.getRipeness() * systemTransition);\n            } else {\n                onlyOne.setFactorialRipeness(onlyOne.getRipeness() * (100 - systemTransition));\n            }\n            suggestedFruits.add(onlyOne);\n          // If there are multiple FCs, than the ripeness has to go down. Which prioritizes duplicate FCs more. (this part isn't logical with these entities, sorry)\n        } else if(!suggestedFruits.stream().anyMatch(fc -&gt; fc.getFruit().getName().equals(sameNameFruits.get(0).getFruit().getName()))){\n            if (getPresentColorFruit) {\n                FruitColor fcWithPresentColor = sameNameFruits.stream()\n                        .filter(fc -&gt; fc.getColor().getColorId() == presentColor.getColor().getColorId()).findFirst()\n                        .get();\n                fcWithPresentColor.setFactorialRipeness((fcWithPresentColor.getRipeness() - 0.5) * systemTransition);\n                suggestedFruits.add(fcWithPresentColor);\n            } else {\n                FruitColor fcWithFutureColor = sameNameFruits.stream()\n                        .filter(fc -&gt; fc.getColor().getColorId() == futureColor.getColor().getColorId()).findFirst()\n                        .get();\n                //This part is also not logical, but if the presentColor is not chosen. Than we need to multiply by the opposite amount of the systemTransition\n                fcWithFutureColor.setFactorialRipeness((fcWithFutureColor.getRipeness() - 0.5) * (100 - systemTransition)); \n                suggestedFruits.add(fcWithFutureColor);\n            }\n        }\n    }\n    //Sort by &quot;true&quot; ripeness value, from lowest to highest\n    Collections.sort(suggestedFruits, new FruitColorRipenessComparator());\n    return suggestedFruits;\n}\n\n/**\n * @source https://stackoverflow.com/questions/2839137/how-to-use-comparator-in-java-to-sort\n */\npublic class FruitColorRipenessComparator implements Comparator&lt;FruitColor&gt; {\n    @Override\n    public int compare(FruitColor a, FruitColor b){\n        return a.getFactorialRipeness() &lt; b.getFactorialRipeness() ? -1 : a.getFactorialRipeness() == b.getFactorialRipeness() ? 0 : 1;\n    }\n}\n</code></pre>\n"},{"tags":["java","annotation-processing"],"comments":[{"owner":{"account_id":459879,"reputation":17931,"user_id":860630,"display_name":"Colin Alworth"},"score":1,"creation_date":1670113288,"post_id":74546841,"comment_id":131798350,"body_markdown":"The compiler tree api, in the answers you are linking to, requires that the source for the methods in question are presently being compiled, otherwise the AST will not be available. This is probably what you are encountering.","body":"The compiler tree api, in the answers you are linking to, requires that the source for the methods in question are presently being compiled, otherwise the AST will not be available. This is probably what you are encountering."},{"owner":{"account_id":6406447,"reputation":3114,"user_id":4967497,"accept_rate":83,"display_name":"JojOatXGME"},"score":0,"creation_date":1672016849,"post_id":74546841,"comment_id":132208342,"body_markdown":"It might be possible to open the class files of classes which are not currently compiled. You could analyze these class files with ASM instead of using the Compiler Tree API. However, ASM would not work on classes to be compiled, so you would have to maintain two separate branches, one for classes currently compiled, one for classes in other modules.","body":"It might be possible to open the class files of classes which are not currently compiled. You could analyze these class files with ASM instead of using the Compiler Tree API. However, ASM would not work on classes to be compiled, so you would have to maintain two separate branches, one for classes currently compiled, one for classes in other modules."}],"owner":{"account_id":24287116,"reputation":408,"user_id":18232723,"display_name":"kylie.zoltan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":309,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669206736,"creation_date":1669206736,"question_id":74546841,"body_markdown":"I have a class that is annotated with my annotation and then I want to get all the class fields and then check if their methods contain a call to a specific service.\r\n\r\nThe issue is that the method body is always null in this case.\r\n\r\nJust a small note the classes of the fields live in another module.\r\n\r\n```\r\npublic boolean process( Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv )\r\n{\r\n    Set&lt;? extends Element&gt; annotatedClasses = getAnnotatedClasses( annotations, roundEnv );\r\n    \r\n    annotatedClasses.forEach(annotatedClass -&gt; {\r\n        List&lt;? extends Element&gt; fields = getFields( annotatedClass );\r\n\r\n        fields.forEach( field -&gt; {\r\n            List&lt;ExecutableElement&gt; methods = getMethods( field );\r\n\r\n            methods.forEach( method -&gt; {\r\n                MethodScanner methodScanner = new MethodScanner();\r\n                MethodTree methodTree = methodScanner.scan( method, this.trees );\r\n                BlockTree body = methodTree.getBody();\r\n            }\r\n        }\r\n    }\r\n}\r\n```\r\n\r\nThe `MethodScanner` class comes from here: https://stackoverflow.com/questions/6373145/accessing-source-code-from-java-annotation-processor\r\n\r\nAny way of getting the method source code?\r\n\r\nThanks","title":"Get method source code on annotation processor","body":"<p>I have a class that is annotated with my annotation and then I want to get all the class fields and then check if their methods contain a call to a specific service.</p>\n<p>The issue is that the method body is always null in this case.</p>\n<p>Just a small note the classes of the fields live in another module.</p>\n<pre><code>public boolean process( Set&lt;? extends TypeElement&gt; annotations, RoundEnvironment roundEnv )\n{\n    Set&lt;? extends Element&gt; annotatedClasses = getAnnotatedClasses( annotations, roundEnv );\n    \n    annotatedClasses.forEach(annotatedClass -&gt; {\n        List&lt;? extends Element&gt; fields = getFields( annotatedClass );\n\n        fields.forEach( field -&gt; {\n            List&lt;ExecutableElement&gt; methods = getMethods( field );\n\n            methods.forEach( method -&gt; {\n                MethodScanner methodScanner = new MethodScanner();\n                MethodTree methodTree = methodScanner.scan( method, this.trees );\n                BlockTree body = methodTree.getBody();\n            }\n        }\n    }\n}\n</code></pre>\n<p>The <code>MethodScanner</code> class comes from here: <a href=\"https://stackoverflow.com/questions/6373145/accessing-source-code-from-java-annotation-processor\">Accessing source code from Java Annotation Processor</a></p>\n<p>Any way of getting the method source code?</p>\n<p>Thanks</p>\n"},{"tags":["java","dictionary","hashmap"],"comments":[{"owner":{"account_id":1816200,"reputation":18958,"user_id":1651233,"accept_rate":67,"display_name":"BobTheBuilder"},"score":0,"creation_date":1362466108,"post_id":15217438,"comment_id":21448948,"body_markdown":"Maybe it just put 2 on every insert? cause you insert 1 in first if and increment in the second if","body":"Maybe it just put 2 on every insert? cause you insert 1 in first if and increment in the second if"},{"owner":{"account_id":2383678,"reputation":1413,"user_id":2085106,"display_name":"Paweł Wyrwiński"},"score":0,"creation_date":1362467124,"post_id":15217438,"comment_id":21449339,"body_markdown":"[http://stackoverflow.com/questions/81346/most-efficient-way-to-increment-a-map-value-in-java](http://stackoverflow.com/questions/81346/most-efficient-way-to-increment-a-map-value-in-java) may be of interest to you.","body":"<a href=\"http://stackoverflow.com/questions/81346/most-efficient-way-to-increment-a-map-value-in-java\">http://stackoverflow.com/questions/81346/most-efficient-way-&zwnj;&#8203;to-increment-a-map-v&zwnj;&#8203;alue-in-java</a> may be of interest to you."},{"owner":{"account_id":50396,"reputation":37361,"user_id":150339,"accept_rate":71,"display_name":"Bruno Reis"},"score":0,"creation_date":1362467226,"post_id":15217438,"comment_id":21449389,"body_markdown":"@PawełWyrwiński, maybe such a micro benchmark analysis is way, *way*, **WAY** too complex for this context. Before making it fast, one needs to make it right.","body":"@PawełWyrwiński, maybe such a micro benchmark analysis is way, <i>way</i>, <b>WAY</b> too complex for this context. Before making it fast, one needs to make it right."}],"answers":[{"comments":[{"owner":{"account_id":129863,"reputation":6504,"user_id":328725,"accept_rate":66,"display_name":"posdef"},"score":0,"creation_date":1422350432,"post_id":15217519,"comment_id":44703946,"body_markdown":"Question; wouldn&#39;t the classes out the `java.util.concurrent` package be slower to use if the concurrency is necessary?","body":"Question; wouldn&#39;t the classes out the <code>java.util.concurrent</code> package be slower to use if the concurrency is necessary?"},{"owner":{"account_id":50396,"reputation":37361,"user_id":150339,"accept_rate":71,"display_name":"Bruno Reis"},"score":0,"creation_date":1422397894,"post_id":15217519,"comment_id":44731759,"body_markdown":"I would benchmark to make sure. But my initial thinking is that they wouldn&#39;t have a big impact in performance. Reasons being, most of the Java Concurrency classes are highly optimized in a &quot;optimistic&quot; way, they use operations that assume no contention and retry if there was some kind of simultaneous access (i.e., they avoid locking but rely on &quot;compare-and-set&quot; primitives quite often). But the only way to tell is micro-benchmarking, which is a problematic concept in itself...","body":"I would benchmark to make sure. But my initial thinking is that they wouldn&#39;t have a big impact in performance. Reasons being, most of the Java Concurrency classes are highly optimized in a &quot;optimistic&quot; way, they use operations that assume no contention and retry if there was some kind of simultaneous access (i.e., they avoid locking but rely on &quot;compare-and-set&quot; primitives quite often). But the only way to tell is micro-benchmarking, which is a problematic concept in itself..."},{"owner":{"account_id":129863,"reputation":6504,"user_id":328725,"accept_rate":66,"display_name":"posdef"},"score":0,"creation_date":1422440125,"post_id":15217519,"comment_id":44747122,"body_markdown":"Thanks for the reply, I just realized a typo in my question; I meant to ask if &quot;no&quot; concurrency is necessary. In other words, if there&#39;s no concurrent access to the collections, then methods that synchronize should essentially slower than their counterparts that don&#39;t, intuitively speaking.","body":"Thanks for the reply, I just realized a typo in my question; I meant to ask if &quot;no&quot; concurrency is necessary. In other words, if there&#39;s no concurrent access to the collections, then methods that synchronize should essentially slower than their counterparts that don&#39;t, intuitively speaking."}],"tags":[],"owner":{"account_id":50396,"reputation":37361,"user_id":150339,"accept_rate":71,"display_name":"Bruno Reis"},"comment_count":3,"down_vote_count":0,"up_vote_count":13,"is_accepted":false,"score":13,"last_activity_date":1628147085,"creation_date":1362466188,"answer_id":15217519,"question_id":15217438,"body_markdown":"There&#39;s a much more concise (and easier to reason about) way to achieve what you want:\r\n\r\n    final ConcurrentMap&lt;String, AtomicInteger&gt; map = new ConcurrentHashMap&lt;&gt;();\r\n    final Scanner input = new Scanner(file);\r\n    while (input.hasNext()) {\r\n      final String key = input.next();\r\n      if (key.length() &gt; 0) {\r\n        map.putIfAbsent(key, new AtomicInteger(0));\r\n        map.get(key).incrementAndGet();\r\n      }\r\n    }\r\n\r\nLet&#39;s analyze why does this work.\r\n\r\nWhenever the `Scanner` encounters a keyword, there are 2 possible cases: you either have encountered it before (ie, it is a *known keyword*), or it is an yet *unseen keyword*.\r\n\r\n - If it is an **unseen keyword**: [`putIfAbsent`][1] will put an [`AtomicInteger`][2] with value 0 in the map, and `incrementAndGet()` will set it to 1 right after, and, from now on, it becomes a *known keyword*;\r\n - If it is a **known keyword**: `putIfAbsent` will do nothing, and [`incrementAndGet()`][3] will increment the value that is already present in the map.\r\n\r\nThen, if you want the key set, you do:\r\n\r\n    final Set&lt;String&gt; keys = map.keySet();\r\n\r\nTo print all the values, you could do something like:\r\n\r\n    for (final String k : map.keySet()) {\r\n      System.out.println(k + &quot;: &quot; + map.get(k).get());\r\n    }\r\n\r\nYou are not forced to use the two &quot;different&quot; classes I used above, [`ConcurrentMap`][4] and `AtomicInteger`. It is just easier to use them because they encapsulate much of the logic that you tried to write by yourself (and failed). The logic that they encapsulate is exactly all the other answers describe (ie, test if the value is present, if not set it to 0, then get whatever value is present, increment it and put it back into the map).\r\n\r\nTo maintain the keys of the map (our words being counted) in alphabetical order, use a [`ConcurrentNavigableMap`][5] such as [`ConcurrentSkipListMap `][6]. \r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)\r\n  [2]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html\r\n  [3]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet()\r\n  [4]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\r\n  [5]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentNavigableMap.html\r\n  [6]: https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentSkipListMap.html","title":"Counting occurrences of a key in a Map in Java","body":"<p>There's a much more concise (and easier to reason about) way to achieve what you want:</p>\n<pre><code>final ConcurrentMap&lt;String, AtomicInteger&gt; map = new ConcurrentHashMap&lt;&gt;();\nfinal Scanner input = new Scanner(file);\nwhile (input.hasNext()) {\n  final String key = input.next();\n  if (key.length() &gt; 0) {\n    map.putIfAbsent(key, new AtomicInteger(0));\n    map.get(key).incrementAndGet();\n  }\n}\n</code></pre>\n<p>Let's analyze why does this work.</p>\n<p>Whenever the <code>Scanner</code> encounters a keyword, there are 2 possible cases: you either have encountered it before (ie, it is a <em>known keyword</em>), or it is an yet <em>unseen keyword</em>.</p>\n<ul>\n<li>If it is an <strong>unseen keyword</strong>: <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html#putIfAbsent(K,V)\" rel=\"nofollow noreferrer\"><code>putIfAbsent</code></a> will put an <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html\" rel=\"nofollow noreferrer\"><code>AtomicInteger</code></a> with value 0 in the map, and <code>incrementAndGet()</code> will set it to 1 right after, and, from now on, it becomes a <em>known keyword</em>;</li>\n<li>If it is a <strong>known keyword</strong>: <code>putIfAbsent</code> will do nothing, and <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/atomic/AtomicInteger.html#incrementAndGet()\" rel=\"nofollow noreferrer\"><code>incrementAndGet()</code></a> will increment the value that is already present in the map.</li>\n</ul>\n<p>Then, if you want the key set, you do:</p>\n<pre><code>final Set&lt;String&gt; keys = map.keySet();\n</code></pre>\n<p>To print all the values, you could do something like:</p>\n<pre><code>for (final String k : map.keySet()) {\n  System.out.println(k + &quot;: &quot; + map.get(k).get());\n}\n</code></pre>\n<p>You are not forced to use the two &quot;different&quot; classes I used above, <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentMap</code></a> and <code>AtomicInteger</code>. It is just easier to use them because they encapsulate much of the logic that you tried to write by yourself (and failed). The logic that they encapsulate is exactly all the other answers describe (ie, test if the value is present, if not set it to 0, then get whatever value is present, increment it and put it back into the map).</p>\n<p>To maintain the keys of the map (our words being counted) in alphabetical order, use a <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentNavigableMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentNavigableMap</code></a> such as <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/concurrent/ConcurrentSkipListMap.html\" rel=\"nofollow noreferrer\"><code>ConcurrentSkipListMap </code></a>.</p>\n"},{"tags":[],"owner":{"account_id":66969,"reputation":22196,"user_id":196211,"accept_rate":67,"display_name":"Eyal Schneider"},"comment_count":0,"down_vote_count":0,"up_vote_count":7,"is_accepted":true,"score":7,"last_activity_date":1362466557,"creation_date":1362466237,"answer_id":15217535,"question_id":15217438,"body_markdown":"For every key you scan you create a new entry in the map (overriding the existing one). Then, the next condition holds so you increment the count by 1, reaching the value 2.\r\n\r\nThe inner part should be something like:\r\n\r\n            if (keywordSet.contains(key))\r\n            {\r\n                Integer value = map.get(key);\r\n                if (value == null)\r\n                    value = 0;\r\n                value++;\r\n                map.put(key, value);\r\n            }\r\n\r\nAnyway, consider using some kind of a mutable integer to make this more efficient. You won&#39;t have to override entries in the map, and you won&#39;t be doing too much Integer boxing operations.","title":"Counting occurrences of a key in a Map in Java","body":"<p>For every key you scan you create a new entry in the map (overriding the existing one). Then, the next condition holds so you increment the count by 1, reaching the value 2.</p>\n\n<p>The inner part should be something like:</p>\n\n<pre><code>        if (keywordSet.contains(key))\n        {\n            Integer value = map.get(key);\n            if (value == null)\n                value = 0;\n            value++;\n            map.put(key, value);\n        }\n</code></pre>\n\n<p>Anyway, consider using some kind of a mutable integer to make this more efficient. You won't have to override entries in the map, and you won't be doing too much Integer boxing operations.</p>\n"},{"tags":[],"owner":{"account_id":1816200,"reputation":18958,"user_id":1651233,"accept_rate":67,"display_name":"BobTheBuilder"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1362466263,"creation_date":1362466263,"answer_id":15217544,"question_id":15217438,"body_markdown":"You always set the value to 1 and then update it by another one. What you need is to update the map value (and not setting it to 1 again).\r\n\r\nInstead of: \r\n\r\n    map.put(key, 1);\r\n\r\nuse:\r\n\r\n    Integer value = map.get(key);\r\n    if (value == null){\r\n        value = 0\r\n    }\r\n    value++;\r\n    map.put(key, value);\r\n\r\nAnd drop the second if.","title":"Counting occurrences of a key in a Map in Java","body":"<p>You always set the value to 1 and then update it by another one. What you need is to update the map value (and not setting it to 1 again).</p>\n\n<p>Instead of: </p>\n\n<pre><code>map.put(key, 1);\n</code></pre>\n\n<p>use:</p>\n\n<pre><code>Integer value = map.get(key);\nif (value == null){\n    value = 0\n}\nvalue++;\nmap.put(key, value);\n</code></pre>\n\n<p>And drop the second if.</p>\n"},{"tags":[],"owner":{"account_id":2118345,"reputation":12755,"user_id":1882149,"display_name":"Achintya Jha"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1362467061,"creation_date":1362466597,"answer_id":15217621,"question_id":15217438,"body_markdown":"    Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\r\n    Set&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\r\n    Scanner input = new Scanner(file);\r\n    \r\n    while (input.hasNext()){\r\n         String key = input.next();\r\n         if (key.length() &gt; 0)\r\n            if (keywordSet.contains(key)){\r\n               Integer counter = map.get(key);\r\n        \r\n               if (counter == null)\r\n                   map.put(key, 1);\r\n               else\r\n                   map.put(key, count + 1);\r\n             }\r\n    }","title":"Counting occurrences of a key in a Map in Java","body":"<pre><code>Map&lt;String, Integer&gt; map = new HashMap&lt;String, Integer&gt;();\nSet&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\nScanner input = new Scanner(file);\n\nwhile (input.hasNext()){\n     String key = input.next();\n     if (key.length() &gt; 0)\n        if (keywordSet.contains(key)){\n           Integer counter = map.get(key);\n\n           if (counter == null)\n               map.put(key, 1);\n           else\n               map.put(key, count + 1);\n         }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":4436369,"reputation":992,"user_id":3612124,"accept_rate":50,"display_name":"Istv&#225;n B&#233;k&#233;si"},"score":0,"creation_date":1634808879,"post_id":31264901,"comment_id":123127647,"body_markdown":"Why would you add `if (keywordSet.contains(key))`? The point of this solution is to avoid such a condition, isn&#39;t it?","body":"Why would you add <code>if (keywordSet.contains(key))</code>? The point of this solution is to avoid such a condition, isn&#39;t it?"}],"tags":[],"owner":{"account_id":85850,"reputation":8741,"user_id":239101,"accept_rate":57,"display_name":"David Soroko"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1634809585,"creation_date":1436261661,"answer_id":31264901,"question_id":15217438,"body_markdown":"Even more concise using [`Map.merge`][1] (since Java 8):\r\n\r\n    if (keywordSet.contains(key)) {\r\n        map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\r\n    }\r\n\r\nHere is a generic implementation of a **counting map** - a map with values representing the count of their keys:\r\n\r\n    public static &lt;K&gt; void count(K key, Map&lt;K, Integer&gt; map) {\r\n        map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\r\n        count(&quot;A&quot;, map);\r\n        count(&quot;B&quot;, map);\r\n        count(&quot;A&quot;, map);\r\n        count(&quot;Z&quot;, map);\r\n        count(&quot;A&quot;, map);\r\n        System.out.println(map); // {A=3, B=1, Z=1}\r\n    }\r\n \r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-","title":"Counting occurrences of a key in a Map in Java","body":"<p>Even more concise using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#merge-K-V-java.util.function.BiFunction-\" rel=\"nofollow noreferrer\"><code>Map.merge</code></a> (since Java 8):</p>\n<pre><code>if (keywordSet.contains(key)) {\n    map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\n}\n</code></pre>\n<p>Here is a generic implementation of a <strong>counting map</strong> - a map with values representing the count of their keys:</p>\n<pre><code>public static &lt;K&gt; void count(K key, Map&lt;K, Integer&gt; map) {\n    map.merge(key, 1, (currentCount, notUsed) -&gt; ++currentCount);\n}\n\npublic static void main(String[] args) {\n    Map&lt;String, Integer&gt; map = new HashMap&lt;&gt;();\n    count(&quot;A&quot;, map);\n    count(&quot;B&quot;, map);\n    count(&quot;A&quot;, map);\n    count(&quot;Z&quot;, map);\n    count(&quot;A&quot;, map);\n    System.out.println(map); // {A=3, B=1, Z=1}\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2640370,"reputation":2355,"user_id":2284160,"display_name":"Lars"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669206728,"creation_date":1669206728,"answer_id":74546837,"question_id":15217438,"body_markdown":"    map.compute(key, (k, value) -&gt; (value == null) ? 1 : (value + 1));","title":"Counting occurrences of a key in a Map in Java","body":"<pre><code>map.compute(key, (k, value) -&gt; (value == null) ? 1 : (value + 1));\n</code></pre>\n"}],"owner":{"account_id":2304476,"reputation":93,"user_id":2024027,"accept_rate":50,"display_name":"Justin Ertley"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":33922,"favorite_count":0,"down_vote_count":1,"up_vote_count":7,"accepted_answer_id":15217535,"answer_count":6,"score":6,"last_activity_date":1669206728,"creation_date":1362465825,"question_id":15217438,"body_markdown":"I&#39;m writing a project that captures Java keywords from a .java file and keeps track of the occurrences with a map. I&#39;ve used a similar method in the past successfully, but I can&#39;t seem to adopt this method for my intended use here.\r\n\r\n        Map&lt;String,Integer&gt; map = new TreeMap&lt;String,Integer&gt;();\r\n        Set&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\r\n\t\tScanner input = new Scanner(file);\r\n\t\tint counter = 0;\r\n\t\twhile (input.hasNext())\r\n\t\t{\r\n\t\t\tString key = input.next();\r\n\t\t\tif (key.length() &gt; 0)\r\n\t\t\t{\r\n\t\t\t\tif (keywordSet.contains(key))\r\n\t\t\t\t{\r\n\t\t\t\t\tmap.put(key, 1);\r\n\t\t\t\t\tcounter++;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\tif(map.containsKey(key)) &lt;--tried inner loop here, failed\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tint value = map.get(key);\r\n\t\t\t\t\t\tvalue++;\r\n\t\t\t\t\t\tmap.put(key, value);\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\nThis block of code is supposed to add the keyword to the key, and increment the value each time the same key occurs. So far, it adds the keywords, but fails to properly increment the value. here is a sample output:\r\n\r\n    {assert=2, class=2, continue=2, default=2, else=2, ...} \r\nBasically it increments every value in the map instead of the ones it&#39;s supposed to. I&#39;m not sure if I&#39;m over-thinking this or what. I&#39;ve tried an inner loop and it gave me insane results. I really hope I&#39;m just over-thinking this. Any help is greatly appreciated!","title":"Counting occurrences of a key in a Map in Java","body":"<p>I'm writing a project that captures Java keywords from a .java file and keeps track of the occurrences with a map. I've used a similar method in the past successfully, but I can't seem to adopt this method for my intended use here.</p>\n\n<pre><code>    Map&lt;String,Integer&gt; map = new TreeMap&lt;String,Integer&gt;();\n    Set&lt;String&gt; keywordSet = new HashSet&lt;String&gt;(Arrays.asList(keywords));\n    Scanner input = new Scanner(file);\n    int counter = 0;\n    while (input.hasNext())\n    {\n        String key = input.next();\n        if (key.length() &gt; 0)\n        {\n            if (keywordSet.contains(key))\n            {\n                map.put(key, 1);\n                counter++;\n            }\n\n                if(map.containsKey(key)) &lt;--tried inner loop here, failed\n                {\n                    int value = map.get(key);\n                    value++;\n                    map.put(key, value);\n                }\n\n        }\n</code></pre>\n\n<p>This block of code is supposed to add the keyword to the key, and increment the value each time the same key occurs. So far, it adds the keywords, but fails to properly increment the value. here is a sample output:</p>\n\n<pre><code>{assert=2, class=2, continue=2, default=2, else=2, ...} \n</code></pre>\n\n<p>Basically it increments every value in the map instead of the ones it's supposed to. I'm not sure if I'm over-thinking this or what. I've tried an inner loop and it gave me insane results. I really hope I'm just over-thinking this. Any help is greatly appreciated!</p>\n"},{"tags":["java","ubuntu","log4j","tomcat9"],"answers":[{"tags":[],"owner":{"account_id":15529491,"reputation":68,"user_id":11203419,"display_name":"dpoerschke"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669206669,"creation_date":1669206669,"answer_id":74546822,"question_id":73414457,"body_markdown":"I had the same problem on a 10.0.23 Tomcat. In my case the solution was to use an absolute path instead of an relative one: After changing\r\n\r\n    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;../logs/myApp.log&quot;\r\n\r\nto\r\n\r\n    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;/usr/local/tomcat/apache-tomcat-10/apache-tomcat-10.0.23/logs/myApp.log&quot; \r\n\r\nit worked in my case but it is still not a nice solution because now the value of fileName has to be updated on each machine (depending on tomcat&#39;s path). Currently I can only guess that it might have to do something with the used log4j version..\r\n\r\n","title":"Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs","body":"<p>I had the same problem on a 10.0.23 Tomcat. In my case the solution was to use an absolute path instead of an relative one: After changing</p>\n<pre><code>&lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;../logs/myApp.log&quot;\n</code></pre>\n<p>to</p>\n<pre><code>&lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;/usr/local/tomcat/apache-tomcat-10/apache-tomcat-10.0.23/logs/myApp.log&quot; \n</code></pre>\n<p>it worked in my case but it is still not a nice solution because now the value of fileName has to be updated on each machine (depending on tomcat's path). Currently I can only guess that it might have to do something with the used log4j version..</p>\n"}],"owner":{"account_id":20794822,"reputation":61,"user_id":15272074,"display_name":"Ravi Teja RVN"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":2710,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669206669,"creation_date":1660900392,"question_id":73414457,"body_markdown":"I have upgraded my tomcat9 9.0.31 to 9.0.65\r\n\r\nSo, after upgrading I have updated the existing war file. Default tomcat logs like catalina.out , localhost.log , localhost_acess.log are genrating fine.\r\n\r\nWe have configured our service logs of which the war was deployed. Those are not getting generated.\r\n\r\nI have seen the below error in catalina.out log file. What does this mean.\r\n\r\n\r\n    2022-08-19 07:30:10,205 main DEBUG DefaultRolloverStrategy$Builder(max=&quot;10&quot;, min=&quot;null&quot;, fileIndex=&quot;null&quot;, compressionLevel=&quot;null&quot;, ={}, stopCustomActionsOnError=&quot;null&quot;, tempCompressedFilePattern=&quot;null&quot;, Configuration(/opt/tomcat/webapps/server/WEB-INF/classes/log4j2.xml))\r\n    2022-08-19 07:30:10,207 main DEBUG Building Plugin[name=appender, class=org.apache.logging.log4j.core.appender.RollingFileAppender].\r\n    2022-08-19 07:30:10,219 main DEBUG RollingFileAppender$Builder(fileName=&quot;logs/connectivityserver.log&quot;, filePattern=&quot;logs/connectivityserver-%i.log&quot;, append=&quot;null&quot;, locking=&quot;null&quot;, Policies(CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)])), DefaultRolloverStrategy(DefaultRolloverStrategy(min=1, max=10, useMax=true)), advertise=&quot;null&quot;, advertiseUri=&quot;null&quot;, createOnDemand=&quot;null&quot;, filePermissions=&quot;null&quot;, fileOwner=&quot;null&quot;, fileGroup=&quot;null&quot;, bufferedIo=&quot;null&quot;, bufferSize=&quot;null&quot;, immediateFlush=&quot;null&quot;, ignoreExceptions=&quot;null&quot;, PatternLayout(%d{DEFAULT} %-5p [%t] [%logger] - %m%n), name=&quot;RollingFile&quot;, Configuration(/opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml), Filter=null, ={})\r\n    2022-08-19 07:30:10,224 main ERROR Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs\r\n    \tat org.apache.logging.log4j.core.util.FileUtils.mkdir(FileUtils.java:120)\r\n    \tat org.apache.logging.log4j.core.util.FileUtils.makeParentDirs(FileUtils.java:137)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:732)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:716)\r\n    \tat org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:144)\r\n    \tat org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n    \tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n    \tat org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\r\n    \tat com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n    \tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    \r\n    2022-08-19 07:30:10,227 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]] java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]]\r\n    \tat org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:146)\r\n    \tat org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\r\n    \tat org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\r\n    \tat org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n    \tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n    \tat org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\r\n    \tat com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n    \tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n    \r\n    2022-08-19 07:30:10,230 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:238)\r\n    \tat org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:136)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\r\n    \tat org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\r\n    \tat org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\r\n    \tat org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\r\n    \tat org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\r\n    \tat org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\r\n    \tat com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\r\n    \tat sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\r\n    \tat java.lang.reflect.Constructor.newInstance(Constructor.java:423)\r\n    \tat org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\r\n    \tat org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\r\n    \tat org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\r\n    \tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\r\n    \tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\r\n    \tat org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\r\n    \tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\r\n    \tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\r\n    \tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\r\n    \tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\r\n    \tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\r\n    \tat org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\r\n    \tat org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\r\n    \tat org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\r\n    \tat org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\r\n    \tat org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\r\n    \tat java.util.concurrent.FutureTask.run(FutureTask.java:266)\r\n    \tat org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\r\n    \tat java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\r\n    \tat org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\r\n    \tat org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\r\n    \tat org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\r\n    \tat org.apache.catalina.startup.Catalina.start(Catalina.java:772)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n    \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n    \tat java.lang.reflect.Method.invoke(Method.java:498)\r\n    \tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\r\n    \tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\r\n\r\n\r\n\r\nAlso, the below is the /opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml file\r\n\r\n\r\n\r\n    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\r\n    \r\n    &lt;Configuration status=&quot;debug&quot;&gt; \r\n      &lt;Appenders&gt;  \r\n    \t&lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/connectivityserver.log&quot; filePattern=&quot;logs/connectivityserver-%i.log&quot;&gt;\r\n          &lt;PatternLayout&gt;\r\n            &lt;Pattern&gt;%d{DEFAULT} %-5p [%t] [%logger] - %m%n&lt;/Pattern&gt;\r\n          &lt;/PatternLayout&gt;\r\n          &lt;Policies&gt;\r\n          \t&lt;SizeBasedTriggeringPolicy size=&quot;10mb&quot;/&gt;\r\n          &lt;/Policies&gt;\r\n          &lt;DefaultRolloverStrategy max=&quot;10&quot; /&gt;\r\n        &lt;/RollingFile&gt;\r\n        \r\n        &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;\r\n    \t \t&lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;\r\n    \t&lt;/Console&gt;  \r\n      &lt;/Appenders&gt;\r\n    \r\n      &lt;Loggers&gt;\r\n        &lt;Logger name=&quot;UserLogs&quot; level=&quot;trace&quot;&gt;\r\n            &lt;AppenderRef ref=&quot;UserLogs&quot; /&gt;\r\n        &lt;/Logger&gt;\r\n        &lt;Root level=&quot;debug&quot;&gt;\r\n     \t\t&lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\r\n     \t\t&lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\r\n         &lt;/Root&gt;\t\r\n      &lt;/Loggers&gt;\r\n    &lt;/Configuration&gt;\r\n\r\n\r\nThanks in advance.","title":"Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs","body":"<p>I have upgraded my tomcat9 9.0.31 to 9.0.65</p>\n<p>So, after upgrading I have updated the existing war file. Default tomcat logs like catalina.out , localhost.log , localhost_acess.log are genrating fine.</p>\n<p>We have configured our service logs of which the war was deployed. Those are not getting generated.</p>\n<p>I have seen the below error in catalina.out log file. What does this mean.</p>\n<pre><code>2022-08-19 07:30:10,205 main DEBUG DefaultRolloverStrategy$Builder(max=&quot;10&quot;, min=&quot;null&quot;, fileIndex=&quot;null&quot;, compressionLevel=&quot;null&quot;, ={}, stopCustomActionsOnError=&quot;null&quot;, tempCompressedFilePattern=&quot;null&quot;, Configuration(/opt/tomcat/webapps/server/WEB-INF/classes/log4j2.xml))\n2022-08-19 07:30:10,207 main DEBUG Building Plugin[name=appender, class=org.apache.logging.log4j.core.appender.RollingFileAppender].\n2022-08-19 07:30:10,219 main DEBUG RollingFileAppender$Builder(fileName=&quot;logs/connectivityserver.log&quot;, filePattern=&quot;logs/connectivityserver-%i.log&quot;, append=&quot;null&quot;, locking=&quot;null&quot;, Policies(CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)])), DefaultRolloverStrategy(DefaultRolloverStrategy(min=1, max=10, useMax=true)), advertise=&quot;null&quot;, advertiseUri=&quot;null&quot;, createOnDemand=&quot;null&quot;, filePermissions=&quot;null&quot;, fileOwner=&quot;null&quot;, fileGroup=&quot;null&quot;, bufferedIo=&quot;null&quot;, bufferSize=&quot;null&quot;, immediateFlush=&quot;null&quot;, ignoreExceptions=&quot;null&quot;, PatternLayout(%d{DEFAULT} %-5p [%t] [%logger] - %m%n), name=&quot;RollingFile&quot;, Configuration(/opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml), Filter=null, ={})\n2022-08-19 07:30:10,224 main ERROR Unable to create file logs/connectivityserver.log java.io.IOException: Could not create directory /logs\n    at org.apache.logging.log4j.core.util.FileUtils.mkdir(FileUtils.java:120)\n    at org.apache.logging.log4j.core.util.FileUtils.makeParentDirs(FileUtils.java:137)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:732)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory.createManager(RollingFileManager.java:716)\n    at org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:144)\n    at org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\n    at com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n\n2022-08-19 07:30:10,227 main ERROR Could not create plugin of type class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]] java.lang.IllegalStateException: ManagerFactory [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$RollingFileManagerFactory@32a6ba66] unable to create manager for [logs/connectivityserver.log] with data [org.apache.logging.log4j.core.appender.rolling.RollingFileManager$FactoryData@13305ac2[pattern=logs/connectivityserver-%i.log, append=true, bufferedIO=true, bufferSize=8192, policy=CompositeTriggeringPolicy(policies=[SizeBasedTriggeringPolicy(size=10485760)]), strategy=DefaultRolloverStrategy(min=1, max=10, useMax=true), advertiseURI=null, layout=%d{DEFAULT} %-5p [%t] [%logger] - %m%n, filePermissions=null, fileOwner=null]]\n    at org.apache.logging.log4j.core.appender.AbstractManager.getManager(AbstractManager.java:146)\n    at org.apache.logging.log4j.core.appender.OutputStreamManager.getManager(OutputStreamManager.java:100)\n    at org.apache.logging.log4j.core.appender.rolling.RollingFileManager.getFileManager(RollingFileManager.java:217)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:146)\n    at org.apache.logging.log4j.core.appender.RollingFileAppender$Builder.build(RollingFileAppender.java:62)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:124)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\n    at com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n\n2022-08-19 07:30:10,230 main ERROR Unable to invoke factory method in class org.apache.logging.log4j.core.appender.RollingFileAppender for element RollingFile: java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender java.lang.IllegalStateException: No factory method found for class org.apache.logging.log4j.core.appender.RollingFileAppender\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.findFactoryMethod(PluginBuilder.java:238)\n    at org.apache.logging.log4j.core.config.plugins.util.PluginBuilder.build(PluginBuilder.java:136)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createPluginObject(AbstractConfiguration.java:1122)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1047)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.createConfiguration(AbstractConfiguration.java:1039)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.doConfigure(AbstractConfiguration.java:651)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.initialize(AbstractConfiguration.java:249)\n    at org.apache.logging.log4j.core.config.AbstractConfiguration.start(AbstractConfiguration.java:295)\n    at org.apache.logging.log4j.core.LoggerContext.setConfiguration(LoggerContext.java:621)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:694)\n    at org.apache.logging.log4j.core.LoggerContext.reconfigure(LoggerContext.java:711)\n    at org.apache.logging.log4j.core.LoggerContext.start(LoggerContext.java:253)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:155)\n    at org.apache.logging.log4j.core.impl.Log4jContextFactory.getContext(Log4jContextFactory.java:47)\n    at org.apache.logging.log4j.LogManager.getContext(LogManager.java:196)\n    at org.apache.logging.log4j.LogManager.getLogger(LogManager.java:599)\n    at com.disha.core.system.listeners.DishaServletContextListener.&lt;clinit&gt;(DishaServletContextListener.java:20)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)\n    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.lang.reflect.Constructor.newInstance(Constructor.java:423)\n    at org.apache.catalina.core.DefaultInstanceManager.newInstance(DefaultInstanceManager.java:150)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4691)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5230)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:726)\n    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:698)\n    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:696)\n    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:1024)\n    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1911)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:112)\n    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:825)\n    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:475)\n    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1618)\n    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:319)\n    at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:123)\n    at org.apache.catalina.util.LifecycleBase.setStateInternal(LifecycleBase.java:423)\n    at org.apache.catalina.util.LifecycleBase.setState(LifecycleBase.java:366)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:946)\n    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:835)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1396)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1386)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at org.apache.tomcat.util.threads.InlineExecutorService.execute(InlineExecutorService.java:75)\n    at java.util.concurrent.AbstractExecutorService.submit(AbstractExecutorService.java:134)\n    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:919)\n    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:265)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:432)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:930)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)\n    at org.apache.catalina.startup.Catalina.start(Catalina.java:772)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:345)\n    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:476)\n</code></pre>\n<p>Also, the below is the /opt/tomcat/webapps/connectivityserver/WEB-INF/classes/log4j2.xml file</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;Configuration status=&quot;debug&quot;&gt; \n  &lt;Appenders&gt;  \n    &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/connectivityserver.log&quot; filePattern=&quot;logs/connectivityserver-%i.log&quot;&gt;\n      &lt;PatternLayout&gt;\n        &lt;Pattern&gt;%d{DEFAULT} %-5p [%t] [%logger] - %m%n&lt;/Pattern&gt;\n      &lt;/PatternLayout&gt;\n      &lt;Policies&gt;\n        &lt;SizeBasedTriggeringPolicy size=&quot;10mb&quot;/&gt;\n      &lt;/Policies&gt;\n      &lt;DefaultRolloverStrategy max=&quot;10&quot; /&gt;\n    &lt;/RollingFile&gt;\n    \n    &lt;Console name=&quot;STDOUT&quot; target=&quot;SYSTEM_OUT&quot;&gt;\n        &lt;PatternLayout pattern=&quot;%m%n&quot;/&gt;\n    &lt;/Console&gt;  \n  &lt;/Appenders&gt;\n\n  &lt;Loggers&gt;\n    &lt;Logger name=&quot;UserLogs&quot; level=&quot;trace&quot;&gt;\n        &lt;AppenderRef ref=&quot;UserLogs&quot; /&gt;\n    &lt;/Logger&gt;\n    &lt;Root level=&quot;debug&quot;&gt;\n        &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;\n        &lt;AppenderRef ref=&quot;STDOUT&quot;/&gt;\n     &lt;/Root&gt;    \n  &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","jpa","distinct"],"comments":[{"owner":{"account_id":5631811,"reputation":747,"user_id":4458543,"accept_rate":100,"display_name":"Samuel Owino"},"score":0,"creation_date":1578788796,"post_id":1346181,"comment_id":105553771,"body_markdown":"What specific role does @Id  play in the lifecycle of an entity","body":"What specific role does @Id  play in the lifecycle of an entity"}],"answers":[{"comments":[{"owner":{"account_id":2999741,"reputation":1091,"user_id":2545439,"display_name":"Pieter De Bie"},"score":13,"creation_date":1437044446,"post_id":1347814,"comment_id":50872098,"body_markdown":"No offense, but how could this ever be accepted as an answer?","body":"No offense, but how could this ever be accepted as an answer?"},{"owner":{"account_id":23969,"reputation":8008,"user_id":60593,"accept_rate":100,"display_name":"kazanaki"},"score":1,"creation_date":1536769168,"post_id":1347814,"comment_id":91546888,"body_markdown":"It was the only valid answer from 2009 until 2012","body":"It was the only valid answer from 2009 until 2012"}],"tags":[],"owner":{"account_id":23969,"reputation":8008,"user_id":60593,"accept_rate":100,"display_name":"kazanaki"},"comment_count":2,"down_vote_count":4,"up_vote_count":17,"is_accepted":true,"score":13,"last_activity_date":1475591805,"creation_date":1251474050,"answer_id":1347814,"question_id":1346181,"body_markdown":"**Update: See the top-voted answer please.**\r\n\r\n**My own is currently obsolete. Only kept here for historical reasons.**\r\n\r\n\r\n----------\r\n\r\n\r\nDistinct in HQL is usually needed in Joins and not in simple examples like your own.\r\n\r\nSee also [https://stackoverflow.com/questions/263850/how-do-you-create-a-distinct-query-in-hql][1]\r\n\r\n\r\n  [1]: https://stackoverflow.com/questions/263850/how-do-you-create-a-distinct-query-in-hql","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p><strong>Update: See the top-voted answer please.</strong></p>\n\n<p><strong>My own is currently obsolete. Only kept here for historical reasons.</strong></p>\n\n<hr>\n\n<p>Distinct in HQL is usually needed in Joins and not in simple examples like your own.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/263850/how-do-you-create-a-distinct-query-in-hql\">How do you create a Distinct query in HQL</a></p>\n"},{"tags":[],"owner":{"account_id":6292,"reputation":5329,"user_id":10523,"accept_rate":100,"display_name":"Tomasz"},"comment_count":0,"down_vote_count":1,"up_vote_count":14,"is_accepted":false,"score":13,"last_activity_date":1346193898,"creation_date":1346193898,"answer_id":12168588,"question_id":1346181,"body_markdown":"    @Entity\r\n    @NamedQuery(name = &quot;Customer.listUniqueNames&quot;, \r\n                query = &quot;SELECT DISTINCT c.name FROM Customer c&quot;)\r\n    public class Customer {\r\n    \t    ...\r\n    \r\n            private String name;\r\n    \r\n            public static List&lt;String&gt; listUniqueNames() {\r\n    \t\t     return = getEntityManager().createNamedQuery(\r\n    \t\t\t\t   &quot;Customer.listUniqueNames&quot;, String.class)\r\n    \t\t\t\t   .getResultList();\r\n    \t    }\r\n    }\r\n\r\n","title":"How does DISTINCT work when using JPA and Hibernate","body":"<pre><code>@Entity\n@NamedQuery(name = \"Customer.listUniqueNames\", \n            query = \"SELECT DISTINCT c.name FROM Customer c\")\npublic class Customer {\n        ...\n\n        private String name;\n\n        public static List&lt;String&gt; listUniqueNames() {\n             return = getEntityManager().createNamedQuery(\n                   \"Customer.listUniqueNames\", String.class)\n                   .getResultList();\n        }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1089687,"reputation":2893,"user_id":1084605,"accept_rate":68,"display_name":"cen"},"score":33,"creation_date":1482220357,"post_id":13050816,"comment_id":69674173,"body_markdown":"This only returns an array of that column though. How to return whole entities with this approach?","body":"This only returns an array of that column though. How to return whole entities with this approach?"},{"owner":{"account_id":197679,"reputation":14930,"user_id":441899,"accept_rate":79,"display_name":"Jules"},"score":5,"creation_date":1518642032,"post_id":13050816,"comment_id":84594644,"body_markdown":"@cen - what you&#39;re asking for isn&#39;t logical.  If I have two customers (id=1234, name=&quot;Joe Customer&quot;) and (id=2345, name=&quot;Joe Customer&quot;), which should be returned for such a query?  The results would be undefined.  Now, you could force it with something like (not sure quite how the syntax for this would work, but this should give the general idea): `select c from Customer c where id in (select min(d.id) from Customer d group by d.name)` ... but that&#39;s a situation dependent, because you need to come up with a way based on what attributes you have available to select one of the entities.","body":"@cen - what you&#39;re asking for isn&#39;t logical.  If I have two customers (id=1234, name=&quot;Joe Customer&quot;) and (id=2345, name=&quot;Joe Customer&quot;), which should be returned for such a query?  The results would be undefined.  Now, you could force it with something like (not sure quite how the syntax for this would work, but this should give the general idea): <code>select c from Customer c where id in (select min(d.id) from Customer d group by d.name)</code> ... but that&#39;s a situation dependent, because you need to come up with a way based on what attributes you have available to select one of the entities."},{"owner":{"account_id":1089687,"reputation":2893,"user_id":1084605,"accept_rate":68,"display_name":"cen"},"score":0,"creation_date":1518694764,"post_id":13050816,"comment_id":84615349,"body_markdown":"@Jules - in cases like this you usually don&#39;t really care which one is returned so any choosing technique is ok. I think mysql even handles this scenario by default. I don&#39;t remember the exact use case I had 2 years ago tho.","body":"@Jules - in cases like this you usually don&#39;t really care which one is returned so any choosing technique is ok. I think mysql even handles this scenario by default. I don&#39;t remember the exact use case I had 2 years ago tho."},{"owner":{"account_id":4403145,"reputation":614,"user_id":3588217,"accept_rate":55,"display_name":"greenhorn"},"score":0,"creation_date":1526536124,"post_id":13050816,"comment_id":87783870,"body_markdown":"@Jules is there a way to map that returned object array with the enitity.","body":"@Jules is there a way to map that returned object array with the enitity."}],"tags":[],"owner":{"account_id":1904786,"reputation":4277,"user_id":1719877,"display_name":"agelbess"},"comment_count":4,"down_vote_count":0,"up_vote_count":77,"is_accepted":false,"score":77,"last_activity_date":1351087090,"creation_date":1351087090,"answer_id":13050816,"question_id":1346181,"body_markdown":"You are close.\r\n\r\n    select DISTINCT(c.name) from Customer c","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>You are close.</p>\n\n<pre><code>select DISTINCT(c.name) from Customer c\n</code></pre>\n"},{"tags":[],"owner":{"account_id":2063259,"reputation":12403,"user_id":1839360,"display_name":"Yan Khonski"},"comment_count":0,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1476891914,"creation_date":1476891914,"answer_id":40136090,"question_id":1346181,"body_markdown":"I agree with *kazanaki*&#39;s answer, and it helped me.\r\nI wanted to select the whole entity, so I used\r\n\r\n     select DISTINCT(c) from Customer c\r\n\r\nIn my case I have many-to-many relationship, and I want to load entities with collections in one query.\r\n\r\nI used LEFT JOIN FETCH and at the end I had to make the result distinct.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>I agree with <em>kazanaki</em>'s answer, and it helped me.\nI wanted to select the whole entity, so I used</p>\n\n<pre><code> select DISTINCT(c) from Customer c\n</code></pre>\n\n<p>In my case I have many-to-many relationship, and I want to load entities with collections in one query.</p>\n\n<p>I used LEFT JOIN FETCH and at the end I had to make the result distinct.</p>\n"},{"tags":[],"owner":{"account_id":3351358,"reputation":531,"user_id":2815365,"accept_rate":100,"display_name":"finrod"},"comment_count":0,"down_vote_count":0,"up_vote_count":5,"is_accepted":false,"score":5,"last_activity_date":1498717924,"creation_date":1498717924,"answer_id":44817882,"question_id":1346181,"body_markdown":"I would use JPA&#39;s constructor expression feature. See also following answer:\r\n\r\nhttps://stackoverflow.com/questions/12271305/jpql-constructor-expression-org-hibernate-hql-ast-querysyntaxexceptiontable-i\r\n\r\nFollowing the example in the question, it would be something like this.\r\n\r\n    SELECT DISTINCT new com.mypackage.MyNameType(c.name) from Customer c","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>I would use JPA's constructor expression feature. See also following answer:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12271305/jpql-constructor-expression-org-hibernate-hql-ast-querysyntaxexceptiontable-i\">JPQL Constructor Expression - org.hibernate.hql.ast.QuerySyntaxException:Table is not mapped</a></p>\n\n<p>Following the example in the question, it would be something like this.</p>\n\n<pre><code>SELECT DISTINCT new com.mypackage.MyNameType(c.name) from Customer c\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3709415,"reputation":4325,"user_id":3087130,"display_name":"Jaqen H&#39;ghar"},"score":2,"creation_date":1545138566,"post_id":53406102,"comment_id":94515572,"body_markdown":"Bought last week, not all the way through though ;-) Probably the best IT book I&#39;ve  read","body":"Bought last week, not all the way through though ;-) Probably the best IT book I&#39;ve  read"},{"owner":{"account_id":7494789,"reputation":698,"user_id":5695421,"accept_rate":25,"display_name":"dk7"},"score":6,"creation_date":1576808335,"post_id":53406102,"comment_id":105025387,"body_markdown":"Thanks, very useful answer!! After reading the article you mentioned here and Spring Data JPA reference docs, achieved this on my Spring Data JPA Repository by adding this annotation on top of the method: `@QueryHints(@QueryHint(name = &quot;hibernate.query.passDistinctThrough&quot;, value = &quot;false&quot;))`","body":"Thanks, very useful answer!! After reading the article you mentioned here and Spring Data JPA reference docs, achieved this on my Spring Data JPA Repository by adding this annotation on top of the method: <code>@QueryHints(@QueryHint(name = &quot;hibernate.query.passDistinctThrough&quot;, value = &quot;false&quot;))</code>"},{"owner":{"account_id":9579094,"reputation":51,"user_id":7114189,"display_name":"charvi"},"score":1,"creation_date":1584103884,"post_id":53406102,"comment_id":107340989,"body_markdown":"@dk7 This is exactly what I was looking for. Thanks!","body":"@dk7 This is exactly what I was looking for. Thanks!"},{"owner":{"account_id":282141,"reputation":5676,"user_id":578855,"accept_rate":30,"display_name":"muasif80"},"score":0,"creation_date":1587073229,"post_id":53406102,"comment_id":108374070,"body_markdown":"But the planning time have increased why is that so?","body":"But the planning time have increased why is that so?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":0,"creation_date":1587073865,"post_id":53406102,"comment_id":108374318,"body_markdown":"Thd time values are meaningless as thid is just test data.","body":"Thd time values are meaningless as thid is just test data."},{"owner":{"account_id":2648056,"reputation":6847,"user_id":2290369,"accept_rate":80,"display_name":"Ismail Yavuz"},"score":0,"creation_date":1593019818,"post_id":53406102,"comment_id":110635872,"body_markdown":"@dk7 In my Spring Boot 1.5.9 application your advice did not work: &quot;Ignoring unrecognized query hint [hibernate.query.passDistinctThrough]&quot;. Is there any hint key that I can use?","body":"@dk7 In my Spring Boot 1.5.9 application your advice did not work: &quot;Ignoring unrecognized query hint [hibernate.query.passDistinctThrough]&quot;. Is there any hint key that I can use?"},{"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"score":2,"creation_date":1593022227,"post_id":53406102,"comment_id":110637019,"body_markdown":"@İsmailYavuz The `PASS_DISTINCT_THROUGH` was implemented by [HHH-10965](https://hibernate.atlassian.net/browse/HHH-10965) and is available since Hibernate ORM 5.2.2. Spring Boot 1.5.9 is very old and uses Hibernate ORM 5.0.12. So, you need to upgrade your dependencies if you want to benefit from these awesome features.","body":"@İsmailYavuz The <code>PASS_DISTINCT_THROUGH</code> was implemented by <a href=\"https://hibernate.atlassian.net/browse/HHH-10965\" rel=\"nofollow noreferrer\">HHH-10965</a> and is available since Hibernate ORM 5.2.2. Spring Boot 1.5.9 is very old and uses Hibernate ORM 5.0.12. So, you need to upgrade your dependencies if you want to benefit from these awesome features."}],"tags":[],"owner":{"account_id":1012936,"reputation":145178,"user_id":1025118,"accept_rate":100,"display_name":"Vlad Mihalcea"},"comment_count":7,"down_vote_count":0,"up_vote_count":38,"is_accepted":false,"score":38,"last_activity_date":1669206648,"creation_date":1542780184,"answer_id":53406102,"question_id":1346181,"body_markdown":"Depending on the underlying JPQL or Criteria API query type, `DISTINCT` has two meanings in JPA.\r\n\r\nScalar queries\r\n--------------\r\n\r\nFor scalar queries, which return a scalar projection, like the following query:\r\n\r\n    List&lt;Integer&gt; publicationYears = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct year(p.createdOn)\r\n        from Post p\r\n        order by year(p.createdOn)\r\n    \t&quot;&quot;&quot;, Integer.class)\r\n    .getResultList();\r\n\r\n    LOGGER.info(&quot;Publication years: {}&quot;, publicationYears);\r\n\r\nThe `DISTINCT` keyword should be passed to the underlying SQL statement because we want the DB engine to filter duplicates prior to returning the result set:\r\n\r\n    SELECT DISTINCT\r\n        extract(YEAR FROM p.created_on) AS col_0_0_\r\n    FROM\r\n        post p\r\n    ORDER BY\r\n        extract(YEAR FROM p.created_on)\r\n\r\n    -- Publication years: [2016, 2018]\r\n\r\nHibernate 6\r\n-----------\r\n\r\nHibernate 6 can deduplicate parent entity references automatically, so you don&#39;t need to use the `DISTINCT` keyword, as it were the case with Hibernate 5.\r\n\r\nTherefore, when running the following query:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .getResultList();\r\n    \r\n    assertEquals(1, posts.size());\r\n    assertEquals(2, posts.get(0).getComments().size());\r\n\r\nWe can see that a single `Post` entity was fetched even if it has two associated `PostComment` child entities.\r\n\r\nHibernate 5 entity queries\r\n--------------------------\r\n\r\nIn JPA, for entity queries, `DISTINCT` has a different meaning.\r\n\r\nWithout using `DISTINCT`, a query like the following one:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .getResultList();\r\n    \r\n    LOGGER.info(\r\n        &quot;Fetched the following Post entity identifiers: {}&quot;, \r\n        posts.stream().map(Post::getId).collect(Collectors.toList())\r\n    );\r\n\r\nis going to JOIN the `post` and the `post_comment` tables like this:\r\n\r\n    SELECT p.id AS id1_0_0_,\r\n           pc.id AS id1_1_1_,\r\n           p.created_on AS created_2_0_0_,\r\n           p.title AS title3_0_0_,\r\n           pc.post_id AS post_id3_1_1_,\r\n           pc.review AS review2_1_1_,\r\n           pc.post_id AS post_id3_1_0__\r\n    FROM   post p\r\n    LEFT OUTER JOIN\r\n           post_comment pc ON p.id=pc.post_id\r\n    WHERE\r\n           p.title=&#39;High-Performance Java Persistence eBook has been released!&#39;\r\n\r\n    -- Fetched the following Post entity identifiers: [1, 1]\r\n\r\nBut the parent `post` records are duplicated in the result set for each associated `post_comment` row. For this reason, the `List` of `Post` entities will contain duplicate `Post` entity references. \r\n\r\nTo eliminate the `Post` entity references, we need to use `DISTINCT`:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .getResultList();\r\n     \r\n    LOGGER.info(\r\n        &quot;Fetched the following Post entity identifiers: {}&quot;, \r\n        posts.stream().map(Post::getId).collect(Collectors.toList())\r\n    );\r\n\r\nBut then `DISTINCT` is also passed to the SQL query, and that&#39;s not desirable at all:\r\n\r\n    SELECT DISTINCT\r\n           p.id AS id1_0_0_,\r\n           pc.id AS id1_1_1_,\r\n           p.created_on AS created_2_0_0_,\r\n           p.title AS title3_0_0_,\r\n           pc.post_id AS post_id3_1_1_,\r\n           pc.review AS review2_1_1_,\r\n           pc.post_id AS post_id3_1_0__\r\n    FROM   post p\r\n    LEFT OUTER JOIN\r\n           post_comment pc ON p.id=pc.post_id\r\n    WHERE\r\n           p.title=&#39;High-Performance Java Persistence eBook has been released!&#39;\r\n     \r\n    -- Fetched the following Post entity identifiers: [1]\r\n\r\nBy passing `DISTINCT` to the SQL query, the EXECUTION PLAN is going to execute an extra **Sort** phase which adds overhead without bringing any value since the parent-child combinations always return unique records because of the child PK column:\r\n\r\n    Unique  (cost=23.71..23.72 rows=1 width=1068) (actual time=0.131..0.132 rows=2 loops=1)\r\n      -&gt;  Sort  (cost=23.71..23.71 rows=1 width=1068) (actual time=0.131..0.131 rows=2 loops=1)\r\n            Sort Key: p.id, pc.id, p.created_on, pc.post_id, pc.review\r\n            Sort Method: quicksort  Memory: 25kB\r\n            -&gt;  Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.054..0.058 rows=2 loops=1)\r\n                  Hash Cond: (pc.post_id = p.id)\r\n                  -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.010..0.010 rows=2 loops=1)\r\n                  -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.027..0.027 rows=1 loops=1)\r\n                        Buckets: 1024  Batches: 1  Memory Usage: 9kB\r\n                        -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.017..0.018 rows=1 loops=1)\r\n                              Filter: ((title)::text = &#39;High-Performance Java Persistence eBook has been released!&#39;::text)\r\n                              Rows Removed by Filter: 3\r\n    Planning time: 0.227 ms\r\n    Execution time: 0.179 ms\r\n\r\nHibernate 5 entity queries with HINT_PASS_DISTINCT_THROUGH \r\n----------------------------------------------------------\r\n\r\nTo eliminate the Sort phase from the execution plan, we need to use the [`HINT_PASS_DISTINCT_THROUGH`](https://vladmihalcea.com/jpql-distinct-jpa-hibernate/) JPA query hint:\r\n\r\n    List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\r\n        select distinct p\r\n        from Post p\r\n        left join fetch p.comments\r\n        where p.title = :title\r\n        &quot;&quot;&quot;, Post.class)\r\n    .setParameter(\r\n        &quot;title&quot;, \r\n        &quot;High-Performance Java Persistence eBook has been released!&quot;\r\n    )\r\n    .setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\r\n    .getResultList();\r\n     \r\n    LOGGER.info(\r\n        &quot;Fetched the following Post entity identifiers: {}&quot;, \r\n        posts.stream().map(Post::getId).collect(Collectors.toList())\r\n    );\r\n\r\nAnd now, the SQL query will not contain `DISTINCT` but `Post` entity reference duplicates are going to be removed:\r\n\r\n    SELECT\r\n           p.id AS id1_0_0_,\r\n           pc.id AS id1_1_1_,\r\n           p.created_on AS created_2_0_0_,\r\n           p.title AS title3_0_0_,\r\n           pc.post_id AS post_id3_1_1_,\r\n           pc.review AS review2_1_1_,\r\n           pc.post_id AS post_id3_1_0__\r\n    FROM   post p\r\n    LEFT OUTER JOIN\r\n           post_comment pc ON p.id=pc.post_id\r\n    WHERE\r\n           p.title=&#39;High-Performance Java Persistence eBook has been released!&#39;\r\n     \r\n    -- Fetched the following Post entity identifiers: [1]\r\n\r\nAnd the Execution Plan is going to confirm that we no longer have an extra Sort phase this time:\r\n\r\n    Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.066..0.069 rows=2 loops=1)\r\n      Hash Cond: (pc.post_id = p.id)\r\n      -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.011..0.011 rows=2 loops=1)\r\n      -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.041..0.041 rows=1 loops=1)\r\n            Buckets: 1024  Batches: 1  Memory Usage: 9kB\r\n            -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.036..0.037 rows=1 loops=1)\r\n                  Filter: ((title)::text = &#39;High-Performance Java Persistence eBook has been released!&#39;::text)\r\n                  Rows Removed by Filter: 3\r\n    Planning time: 1.184 ms\r\n    Execution time: 0.160 ms\r\n\r\n&gt; If you&#39;re using Hibernate 6, you no longer need the `QueryHints.HINT_PASS_DISTINCT_THROUGH`, and you should remove it as it got removed from the framework.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>Depending on the underlying JPQL or Criteria API query type, <code>DISTINCT</code> has two meanings in JPA.</p>\n<h2>Scalar queries</h2>\n<p>For scalar queries, which return a scalar projection, like the following query:</p>\n<pre><code>List&lt;Integer&gt; publicationYears = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct year(p.createdOn)\n    from Post p\n    order by year(p.createdOn)\n    &quot;&quot;&quot;, Integer.class)\n.getResultList();\n\nLOGGER.info(&quot;Publication years: {}&quot;, publicationYears);\n</code></pre>\n<p>The <code>DISTINCT</code> keyword should be passed to the underlying SQL statement because we want the DB engine to filter duplicates prior to returning the result set:</p>\n<pre><code>SELECT DISTINCT\n    extract(YEAR FROM p.created_on) AS col_0_0_\nFROM\n    post p\nORDER BY\n    extract(YEAR FROM p.created_on)\n\n-- Publication years: [2016, 2018]\n</code></pre>\n<h2>Hibernate 6</h2>\n<p>Hibernate 6 can deduplicate parent entity references automatically, so you don't need to use the <code>DISTINCT</code> keyword, as it were the case with Hibernate 5.</p>\n<p>Therefore, when running the following query:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.getResultList();\n\nassertEquals(1, posts.size());\nassertEquals(2, posts.get(0).getComments().size());\n</code></pre>\n<p>We can see that a single <code>Post</code> entity was fetched even if it has two associated <code>PostComment</code> child entities.</p>\n<h2>Hibernate 5 entity queries</h2>\n<p>In JPA, for entity queries, <code>DISTINCT</code> has a different meaning.</p>\n<p>Without using <code>DISTINCT</code>, a query like the following one:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.getResultList();\n\nLOGGER.info(\n    &quot;Fetched the following Post entity identifiers: {}&quot;, \n    posts.stream().map(Post::getId).collect(Collectors.toList())\n);\n</code></pre>\n<p>is going to JOIN the <code>post</code> and the <code>post_comment</code> tables like this:</p>\n<pre><code>SELECT p.id AS id1_0_0_,\n       pc.id AS id1_1_1_,\n       p.created_on AS created_2_0_0_,\n       p.title AS title3_0_0_,\n       pc.post_id AS post_id3_1_1_,\n       pc.review AS review2_1_1_,\n       pc.post_id AS post_id3_1_0__\nFROM   post p\nLEFT OUTER JOIN\n       post_comment pc ON p.id=pc.post_id\nWHERE\n       p.title='High-Performance Java Persistence eBook has been released!'\n\n-- Fetched the following Post entity identifiers: [1, 1]\n</code></pre>\n<p>But the parent <code>post</code> records are duplicated in the result set for each associated <code>post_comment</code> row. For this reason, the <code>List</code> of <code>Post</code> entities will contain duplicate <code>Post</code> entity references.</p>\n<p>To eliminate the <code>Post</code> entity references, we need to use <code>DISTINCT</code>:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.getResultList();\n \nLOGGER.info(\n    &quot;Fetched the following Post entity identifiers: {}&quot;, \n    posts.stream().map(Post::getId).collect(Collectors.toList())\n);\n</code></pre>\n<p>But then <code>DISTINCT</code> is also passed to the SQL query, and that's not desirable at all:</p>\n<pre><code>SELECT DISTINCT\n       p.id AS id1_0_0_,\n       pc.id AS id1_1_1_,\n       p.created_on AS created_2_0_0_,\n       p.title AS title3_0_0_,\n       pc.post_id AS post_id3_1_1_,\n       pc.review AS review2_1_1_,\n       pc.post_id AS post_id3_1_0__\nFROM   post p\nLEFT OUTER JOIN\n       post_comment pc ON p.id=pc.post_id\nWHERE\n       p.title='High-Performance Java Persistence eBook has been released!'\n \n-- Fetched the following Post entity identifiers: [1]\n</code></pre>\n<p>By passing <code>DISTINCT</code> to the SQL query, the EXECUTION PLAN is going to execute an extra <strong>Sort</strong> phase which adds overhead without bringing any value since the parent-child combinations always return unique records because of the child PK column:</p>\n<pre><code>Unique  (cost=23.71..23.72 rows=1 width=1068) (actual time=0.131..0.132 rows=2 loops=1)\n  -&gt;  Sort  (cost=23.71..23.71 rows=1 width=1068) (actual time=0.131..0.131 rows=2 loops=1)\n        Sort Key: p.id, pc.id, p.created_on, pc.post_id, pc.review\n        Sort Method: quicksort  Memory: 25kB\n        -&gt;  Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.054..0.058 rows=2 loops=1)\n              Hash Cond: (pc.post_id = p.id)\n              -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.010..0.010 rows=2 loops=1)\n              -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.027..0.027 rows=1 loops=1)\n                    Buckets: 1024  Batches: 1  Memory Usage: 9kB\n                    -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.017..0.018 rows=1 loops=1)\n                          Filter: ((title)::text = 'High-Performance Java Persistence eBook has been released!'::text)\n                          Rows Removed by Filter: 3\nPlanning time: 0.227 ms\nExecution time: 0.179 ms\n</code></pre>\n<h2>Hibernate 5 entity queries with HINT_PASS_DISTINCT_THROUGH</h2>\n<p>To eliminate the Sort phase from the execution plan, we need to use the <a href=\"https://vladmihalcea.com/jpql-distinct-jpa-hibernate/\" rel=\"noreferrer\"><code>HINT_PASS_DISTINCT_THROUGH</code></a> JPA query hint:</p>\n<pre><code>List&lt;Post&gt; posts = entityManager.createQuery(&quot;&quot;&quot;\n    select distinct p\n    from Post p\n    left join fetch p.comments\n    where p.title = :title\n    &quot;&quot;&quot;, Post.class)\n.setParameter(\n    &quot;title&quot;, \n    &quot;High-Performance Java Persistence eBook has been released!&quot;\n)\n.setHint(QueryHints.HINT_PASS_DISTINCT_THROUGH, false)\n.getResultList();\n \nLOGGER.info(\n    &quot;Fetched the following Post entity identifiers: {}&quot;, \n    posts.stream().map(Post::getId).collect(Collectors.toList())\n);\n</code></pre>\n<p>And now, the SQL query will not contain <code>DISTINCT</code> but <code>Post</code> entity reference duplicates are going to be removed:</p>\n<pre><code>SELECT\n       p.id AS id1_0_0_,\n       pc.id AS id1_1_1_,\n       p.created_on AS created_2_0_0_,\n       p.title AS title3_0_0_,\n       pc.post_id AS post_id3_1_1_,\n       pc.review AS review2_1_1_,\n       pc.post_id AS post_id3_1_0__\nFROM   post p\nLEFT OUTER JOIN\n       post_comment pc ON p.id=pc.post_id\nWHERE\n       p.title='High-Performance Java Persistence eBook has been released!'\n \n-- Fetched the following Post entity identifiers: [1]\n</code></pre>\n<p>And the Execution Plan is going to confirm that we no longer have an extra Sort phase this time:</p>\n<pre><code>Hash Right Join  (cost=11.76..23.70 rows=1 width=1068) (actual time=0.066..0.069 rows=2 loops=1)\n  Hash Cond: (pc.post_id = p.id)\n  -&gt;  Seq Scan on post_comment pc  (cost=0.00..11.40 rows=140 width=532) (actual time=0.011..0.011 rows=2 loops=1)\n  -&gt;  Hash  (cost=11.75..11.75 rows=1 width=528) (actual time=0.041..0.041 rows=1 loops=1)\n        Buckets: 1024  Batches: 1  Memory Usage: 9kB\n        -&gt;  Seq Scan on post p  (cost=0.00..11.75 rows=1 width=528) (actual time=0.036..0.037 rows=1 loops=1)\n              Filter: ((title)::text = 'High-Performance Java Persistence eBook has been released!'::text)\n              Rows Removed by Filter: 3\nPlanning time: 1.184 ms\nExecution time: 0.160 ms\n</code></pre>\n<blockquote>\n<p>If you're using Hibernate 6, you no longer need the <code>QueryHints.HINT_PASS_DISTINCT_THROUGH</code>, and you should remove it as it got removed from the framework.</p>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":16237670,"reputation":1180,"user_id":11724795,"display_name":"ToddEmon"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1656408235,"creation_date":1656408235,"answer_id":72783873,"question_id":1346181,"body_markdown":"I&#39;m adding an answer who is slightly specific, in case someone encounters the same issue as I did and finds this question. \r\n\r\nI used JPQL with query annotations (no query building). \r\nAnd I needed to get distinct values for an Entity that was *embedded* into another entity, the relationship was asserted via a Many To One annotation. \r\n\r\nI have two database tables : \r\n- **MainEntity**, which I want with distinct values\r\n- **LinkEntity**, which is a relationship table between MainEntity and another table. It has a composite primary key formed with its three columns. \r\n\r\nIn Java Spring code, this leads to three classes implemented : \r\n\r\n**LinkEntity :**\r\n\r\n    @Entity\r\n    @Immutable\r\n    @Table(name=&quot;link_entity&quot;)\r\n    public class LinkEntity implements Entity {\r\n    \r\n        @EmbeddedId\r\n        private LinkEntityPK pk;\r\n\r\n        // ... Getter, setter, toString()\r\n    }\r\n\r\n**LinkEntityPK :**\r\n\r\n    @Embeddable\r\n    public class LinkEntityPK implements Entity, Serializable {\r\n    \r\n        /** The main entity we want to have distinct values of */\r\n        @ManyToOne\r\n        @JoinColumn(name = &quot;code_entity&quot;)\r\n        private MainEntity mainEntity;\r\n    \r\n        /** */\r\n        @Column(name = &quot;code_pk2&quot;)\r\n        private String codeOperation;\r\n    \r\n        /** */\r\n        @Column(name = &quot;code_pk3&quot;)\r\n        private String codeFonction;\r\n\r\n**MainEntity :**\r\n\r\n    @Entity\r\n    @Immutable\r\n    @Table(name = &quot;main_entity&quot;)\r\n    public class MainEntity implements Entity {\r\n    \r\n        /** We use this for LinkEntity*/\r\n        @Id\r\n        @Column(name=&quot;code_entity&quot;)\r\n        private String codeEntity;\r\n    \r\n\r\n        private String name;\r\n        // And other attributes, getters and setters\r\n\r\n\r\nSo the final query to get distinct values for the main entity is : \r\n\r\n    @Repository\r\n    public interface EntityRepository extends JpaRepository&lt;LinkEntity, String&gt; {\r\n    \r\n        @Query(\r\n            &quot;Select &quot; +\r\n                &quot;Distinct linkEntity.pk.intervenant &quot; +\r\n            &quot;From &quot; +\r\n                &quot;LinkEntity as linkEntity &quot; +\r\n                &quot;Join MainEntity as mainEntity On &quot; +\r\n                     &quot;mainEntity = linkEntity.pk.mainEntity &quot;)\r\n        List&lt;MainEntity&gt; getMainEntityList();\r\n    \r\n    }\r\n\r\nHope this can help someone.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>I'm adding an answer who is slightly specific, in case someone encounters the same issue as I did and finds this question.</p>\n<p>I used JPQL with query annotations (no query building).\nAnd I needed to get distinct values for an Entity that was <em>embedded</em> into another entity, the relationship was asserted via a Many To One annotation.</p>\n<p>I have two database tables :</p>\n<ul>\n<li><strong>MainEntity</strong>, which I want with distinct values</li>\n<li><strong>LinkEntity</strong>, which is a relationship table between MainEntity and another table. It has a composite primary key formed with its three columns.</li>\n</ul>\n<p>In Java Spring code, this leads to three classes implemented :</p>\n<p><strong>LinkEntity :</strong></p>\n<pre><code>@Entity\n@Immutable\n@Table(name=&quot;link_entity&quot;)\npublic class LinkEntity implements Entity {\n\n    @EmbeddedId\n    private LinkEntityPK pk;\n\n    // ... Getter, setter, toString()\n}\n</code></pre>\n<p><strong>LinkEntityPK :</strong></p>\n<pre><code>@Embeddable\npublic class LinkEntityPK implements Entity, Serializable {\n\n    /** The main entity we want to have distinct values of */\n    @ManyToOne\n    @JoinColumn(name = &quot;code_entity&quot;)\n    private MainEntity mainEntity;\n\n    /** */\n    @Column(name = &quot;code_pk2&quot;)\n    private String codeOperation;\n\n    /** */\n    @Column(name = &quot;code_pk3&quot;)\n    private String codeFonction;\n</code></pre>\n<p><strong>MainEntity :</strong></p>\n<pre><code>@Entity\n@Immutable\n@Table(name = &quot;main_entity&quot;)\npublic class MainEntity implements Entity {\n\n    /** We use this for LinkEntity*/\n    @Id\n    @Column(name=&quot;code_entity&quot;)\n    private String codeEntity;\n\n\n    private String name;\n    // And other attributes, getters and setters\n</code></pre>\n<p>So the final query to get distinct values for the main entity is :</p>\n<pre><code>@Repository\npublic interface EntityRepository extends JpaRepository&lt;LinkEntity, String&gt; {\n\n    @Query(\n        &quot;Select &quot; +\n            &quot;Distinct linkEntity.pk.intervenant &quot; +\n        &quot;From &quot; +\n            &quot;LinkEntity as linkEntity &quot; +\n            &quot;Join MainEntity as mainEntity On &quot; +\n                 &quot;mainEntity = linkEntity.pk.mainEntity &quot;)\n    List&lt;MainEntity&gt; getMainEntityList();\n\n}\n</code></pre>\n<p>Hope this can help someone.</p>\n"}],"owner":{"account_id":24830,"reputation":10800,"user_id":63379,"accept_rate":92,"display_name":"Steve Claridge"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":235534,"favorite_count":0,"down_vote_count":0,"up_vote_count":74,"accepted_answer_id":1347814,"answer_count":7,"score":74,"last_activity_date":1669206648,"creation_date":1251455516,"question_id":1346181,"body_markdown":"What column does DISTINCT work with in JPA and is it possible to change it?\r\n\r\nHere&#39;s an example JPA query using DISTINCT:\r\n\r\n    select DISTINCT c from Customer c\r\n\r\nWhich doesn&#39;t make a lot of sense - what column is the distinct based on? Is it specified on the Entity as an annotation because I couldn&#39;t find one?\r\n\r\nI would like to specify the column to make the distinction on, something like:\r\n\r\n    select DISTINCT(c.name) c from Customer c\r\n\r\nI&#39;m using MySQL and Hibernate.","title":"How does DISTINCT work when using JPA and Hibernate","body":"<p>What column does DISTINCT work with in JPA and is it possible to change it?</p>\n\n<p>Here's an example JPA query using DISTINCT:</p>\n\n<pre><code>select DISTINCT c from Customer c\n</code></pre>\n\n<p>Which doesn't make a lot of sense - what column is the distinct based on? Is it specified on the Entity as an annotation because I couldn't find one?</p>\n\n<p>I would like to specify the column to make the distinction on, something like:</p>\n\n<pre><code>select DISTINCT(c.name) c from Customer c\n</code></pre>\n\n<p>I'm using MySQL and Hibernate.</p>\n"},{"tags":["java","concurrency","synchronization","locking"],"comments":[{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669206674,"post_id":74546762,"comment_id":131591122,"body_markdown":"Can you give the reason why you can&#39;t or won&#39;t use `ReentrantReadWriteLock`?","body":"Can you give the reason why you can&#39;t or won&#39;t use <code>ReentrantReadWriteLock</code>?"},{"owner":{"account_id":20522571,"reputation":31,"user_id":15061821,"display_name":"Maor Cohen"},"score":0,"creation_date":1669207281,"post_id":74546762,"comment_id":131591332,"body_markdown":"It is not allowed in the assignment, so I wrote an alternative solution and now I want to know how good it is.","body":"It is not allowed in the assignment, so I wrote an alternative solution and now I want to know how good it is."},{"owner":{"account_id":1211967,"reputation":7024,"user_id":1180351,"display_name":"Rob Spoor"},"score":0,"creation_date":1669211353,"post_id":74546762,"comment_id":131592823,"body_markdown":"The busy-waiting (the while loop) definitely needs improvement. If you want to wait for the write lock to be released, why not lock and immediately unlock it?","body":"The busy-waiting (the while loop) definitely needs improvement. If you want to wait for the write lock to be released, why not lock and immediately unlock it?"}],"owner":{"account_id":20522571,"reputation":31,"user_id":15061821,"display_name":"Maor Cohen"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":19,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669206344,"creation_date":1669206344,"question_id":74546762,"body_markdown":"I&#39;m looking for a way to implement a **multi-read exclusive-write** synchronizer, without using ReentrantReadWriteLock.\r\n\r\nThese are the two methods that I wrote:\r\n\r\n```\r\npublic int getDiff() {\r\n    boolean isCurrentThread = false; // does the current thread hold readLock\r\n    if (!readLock.isLocked()) {\r\n        readLock.lock();\r\n        isCurrentThread = true;\r\n    }\r\n    while (writeLock.isLocked());\r\n    try {\r\n        return Math.abs(x - y);\r\n    } finally {\r\n        if (isCurrentThread)\r\n            readLock.unlock();\r\n    }\r\n}\r\n\r\npublic void update(int dx, int dy) {\r\n    writeLock.lock();\r\n    readLock.lock();\r\n    try {\r\n        x = x + dx;\r\n        y = y + dy;\r\n    } finally {\r\n        writeLock.unlock();\r\n        readLock.unlock();\r\n    }\r\n}\r\n```\r\n`readLock`, `writeLock` are ReentrantLock properties. `x`, `y` are integers.\r\n\r\nThe while loop in `getDiff` doesn&#39;t seem right, but I couldn&#39;t think of any other solution.\r\n\r\nAlso, how can I debug this code?","title":"Implementing ReentrantReadWriteLock using ReentrantLock","body":"<p>I'm looking for a way to implement a <strong>multi-read exclusive-write</strong> synchronizer, without using ReentrantReadWriteLock.</p>\n<p>These are the two methods that I wrote:</p>\n<pre><code>public int getDiff() {\n    boolean isCurrentThread = false; // does the current thread hold readLock\n    if (!readLock.isLocked()) {\n        readLock.lock();\n        isCurrentThread = true;\n    }\n    while (writeLock.isLocked());\n    try {\n        return Math.abs(x - y);\n    } finally {\n        if (isCurrentThread)\n            readLock.unlock();\n    }\n}\n\npublic void update(int dx, int dy) {\n    writeLock.lock();\n    readLock.lock();\n    try {\n        x = x + dx;\n        y = y + dy;\n    } finally {\n        writeLock.unlock();\n        readLock.unlock();\n    }\n}\n</code></pre>\n<p><code>readLock</code>, <code>writeLock</code> are ReentrantLock properties. <code>x</code>, <code>y</code> are integers.</p>\n<p>The while loop in <code>getDiff</code> doesn't seem right, but I couldn't think of any other solution.</p>\n<p>Also, how can I debug this code?</p>\n"},{"tags":["java","spring-boot"],"answers":[{"tags":[],"owner":{"account_id":27014371,"reputation":1,"user_id":20573489,"display_name":"Flower"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669206252,"creation_date":1669206252,"answer_id":74546741,"question_id":74534772,"body_markdown":"If your.py file takes a long time to run then you shouldn&#39;t use Process and use ProcessBuilder instead.\r\n```java\r\npublic ArrayList&lt;String&gt; getPasswords(String path) throws IOException {\r\n        String result = &quot;&quot;;\r\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;D:\\\\anaconda\\\\python.exe &quot;, &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\main.py&quot;,path);\r\n  //The path here is me.py needs to be passed in\r\n        processBuilder.redirectErrorStream(true);\r\n        final Process process = processBuilder.start();\r\n        final BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));\r\n        String s = null;\r\n        int i = 0;\r\n        while ((s = in.readLine()) != null)//This if is I need to ignore some of the output\r\n        {\r\n            i++;\r\n            if (i &gt;6) {\r\n                result += s + &#39;\\n&#39;;\r\n            }\r\n        }\r\n        if (!result.equals(&quot;&quot;)){\r\n            return new ArrayList&lt;String&gt;(Arrays.asList(result.split(&quot;\\n&quot;)));\r\n        }\r\n        return new ArrayList&lt;String&gt;();\r\n\r\n    }\r\n```\r\nYou may run an error &quot;DLL load failed while importing XXXX&quot;.\r\nPlease update the packages required for python.\r\n\r\n\r\n","title":"I&#39;m writing a method using spring-boot that calls a.py file, and when I request this method, the code for py doesn&#39;t run","body":"<p>If your.py file takes a long time to run then you shouldn't use Process and use ProcessBuilder instead.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public ArrayList&lt;String&gt; getPasswords(String path) throws IOException {\n        String result = &quot;&quot;;\n        ProcessBuilder processBuilder = new ProcessBuilder(&quot;D:\\\\anaconda\\\\python.exe &quot;, &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\main.py&quot;,path);\n  //The path here is me.py needs to be passed in\n        processBuilder.redirectErrorStream(true);\n        final Process process = processBuilder.start();\n        final BufferedReader in = new BufferedReader(new InputStreamReader(process.getInputStream()));\n        String s = null;\n        int i = 0;\n        while ((s = in.readLine()) != null)//This if is I need to ignore some of the output\n        {\n            i++;\n            if (i &gt;6) {\n                result += s + '\\n';\n            }\n        }\n        if (!result.equals(&quot;&quot;)){\n            return new ArrayList&lt;String&gt;(Arrays.asList(result.split(&quot;\\n&quot;)));\n        }\n        return new ArrayList&lt;String&gt;();\n\n    }\n</code></pre>\n<p>You may run an error &quot;DLL load failed while importing XXXX&quot;.\nPlease update the packages required for python.</p>\n"}],"owner":{"account_id":27014371,"reputation":1,"user_id":20573489,"display_name":"Flower"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":41,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669206252,"creation_date":1669129519,"question_id":74534772,"body_markdown":"I call the.py file in a basic java project and it takes about 30 seconds to run.\r\n\r\n```java\r\nimport java.io.BufferedReader;\r\nimport java.io.InputStreamReader;\r\n\r\n\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        Process proc;\r\n        String line =&quot;&quot;;\r\n        BufferedReader in;\r\n        try {\r\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\r\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\r\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower1.jpg&quot;);\r\n            proc.waitFor();\r\n            in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\r\n\r\n            while ((line = in.readLine()) != null) {\r\n                System.out.println(line);\r\n            }\r\n            in.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n}\r\n```\r\nresult:\r\n[enter image description here](https://i.stack.imgur.com/Sg8wS.jpg)\r\nBut this code is skipped when I use spring-boot.\r\n\r\n```java\r\n@GetMapping(&quot;test&quot;)\r\n    public String test(){\r\n        System.out.println(1);\r\n        Process proc;\r\n        String line = &quot;&quot;;\r\n        String result = &quot;&quot;;\r\n        try {\r\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\r\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\r\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower3.jpg&quot;);// 执行py文件\r\n            proc.waitFor();\r\n            BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\r\n\r\n            while ((line = in.readLine()) != null) {\r\n                System.out.println(line);\r\n                result += line;\r\n            }\r\n            in.close();\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n        System.out.println(2);\r\n        return result;\r\n    }\r\n```\r\nresult:\r\n[enter image description here](https://i.stack.imgur.com/4PqZ9.jpg)\r\n\r\n\r\n\r\n\r\n\r\nI want to know how to run spring-boot properly.\r\nthanks.","title":"I&#39;m writing a method using spring-boot that calls a.py file, and when I request this method, the code for py doesn&#39;t run","body":"<p>I call the.py file in a basic java project and it takes about 30 seconds to run.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.BufferedReader;\nimport java.io.InputStreamReader;\n\n\npublic class Main {\n    public static void main(String[] args) {\n        Process proc;\n        String line =&quot;&quot;;\n        BufferedReader in;\n        try {\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower1.jpg&quot;);\n            proc.waitFor();\n            in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\n\n            while ((line = in.readLine()) != null) {\n                System.out.println(line);\n            }\n            in.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n}\n</code></pre>\n<p>result:\n<a href=\"https://i.stack.imgur.com/Sg8wS.jpg\" rel=\"nofollow noreferrer\">enter image description here</a>\nBut this code is skipped when I use spring-boot.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;test&quot;)\n    public String test(){\n        System.out.println(1);\n        Process proc;\n        String line = &quot;&quot;;\n        String result = &quot;&quot;;\n        try {\n            proc = Runtime.getRuntime().exec(&quot;D:\\\\anaconda\\\\python.exe &quot; +\n                    &quot;D:/2017/Python/pythonProject8/main.py &quot; +\n                    &quot;D:\\\\2017\\\\Python\\\\pythonProject8\\\\flower3.jpg&quot;);// 执行py文件\n            proc.waitFor();\n            BufferedReader in = new BufferedReader(new InputStreamReader(proc.getInputStream()));\n\n            while ((line = in.readLine()) != null) {\n                System.out.println(line);\n                result += line;\n            }\n            in.close();\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n        System.out.println(2);\n        return result;\n    }\n</code></pre>\n<p>result:\n<a href=\"https://i.stack.imgur.com/4PqZ9.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>I want to know how to run spring-boot properly.\nthanks.</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"account_id":22066749,"reputation":3758,"user_id":16328516,"display_name":"TriS"},"score":0,"creation_date":1669195371,"post_id":74544252,"comment_id":131587100,"body_markdown":"Is this your properties file name &quot;sample.properties&quot; ?","body":"Is this your properties file name &quot;sample.properties&quot; ?"},{"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"score":0,"creation_date":1669195439,"post_id":74544252,"comment_id":131587124,"body_markdown":"yes&lt; its my propery filename","body":"yes&lt; its my propery filename"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669195694,"post_id":74544252,"comment_id":131587225,"body_markdown":"You are creating a new instance yourself, rendering all those annotations useless.","body":"You are creating a new instance yourself, rendering all those annotations useless."},{"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"score":0,"creation_date":1669195821,"post_id":74544252,"comment_id":131587264,"body_markdown":"So we can&#39;t write a main in the same class ?","body":"So we can&#39;t write a main in the same class ?"},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669196491,"post_id":74544252,"comment_id":131587537,"body_markdown":"You need to use spring Boot to detect this class, pull it from the context and use it (or construct a context yourself using this class and retrieve it and use it).","body":"You need to use spring Boot to detect this class, pull it from the context and use it (or construct a context yourself using this class and retrieve it and use it)."},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1669196606,"post_id":74544252,"comment_id":131587571,"body_markdown":"When you do `Test t=new Test();`, you are explicitly NOT using Spring, so all those Spring annotations are useless.   Instead, to run a Spring application, use `SpringApplication.run(Test.class, args);`, as shown in https://spring.io/guides/gs/spring-boot/","body":"When you do <code>Test t=new Test();</code>, you are explicitly NOT using Spring, so all those Spring annotations are useless.   Instead, to run a Spring application, use <code>SpringApplication.run(Test.class, args);</code>, as shown in <a href=\"https://spring.io/guides/gs/spring-boot/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/spring-boot</a>"},{"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"score":0,"creation_date":1669201006,"post_id":74544252,"comment_id":131589151,"body_markdown":"SpringApplication.run(Test.class, args); also giving null, it is not reading from that properties file, is there something i&#39;m missing","body":"SpringApplication.run(Test.class, args); also giving null, it is not reading from that properties file, is there something i&#39;m missing"}],"answers":[{"tags":[],"owner":{"account_id":17611422,"reputation":178,"user_id":12779384,"display_name":"Malav Mevada"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669206173,"creation_date":1669206173,"answer_id":74546727,"question_id":74544252,"body_markdown":"your test class,\r\n\r\n```\r\n\r\n@Configuration\r\npublic class Tester {\r\n    @Value(&quot;${student.name}&quot;)\r\n    private String name;\r\n     \r\n    public String getName(){\r\n       return name;\r\n    }\r\n}\r\n\r\n```\r\n\r\nYou should use application context provided by spring boot like this,\r\n\r\n```\r\n\r\n@SpringBootApplication\r\npublic class DemoApplication {\r\n\r\n    public static void main(String[] args) {\r\n        SpringApplication application = new SpringApplication(DemoApplication.class);\r\n        ApplicationContext context = application.run(args);\r\n\r\n        // you can get object of any class like this.\r\n        Test testObj = context.getBean(Test.class);  \r\n        System.out.println(&quot;Student Name : &quot;+testObj.getName());\r\n    }\r\n}\r\n```\r\n\r\nHope it helps.","title":"Unable to fetch data from properties file","body":"<p>your test class,</p>\n<pre><code>\n@Configuration\npublic class Tester {\n    @Value(&quot;${student.name}&quot;)\n    private String name;\n     \n    public String getName(){\n       return name;\n    }\n}\n\n</code></pre>\n<p>You should use application context provided by spring boot like this,</p>\n<pre><code>\n@SpringBootApplication\npublic class DemoApplication {\n\n    public static void main(String[] args) {\n        SpringApplication application = new SpringApplication(DemoApplication.class);\n        ApplicationContext context = application.run(args);\n\n        // you can get object of any class like this.\n        Test testObj = context.getBean(Test.class);  \n        System.out.println(&quot;Student Name : &quot;+testObj.getName());\n    }\n}\n</code></pre>\n<p>Hope it helps.</p>\n"}],"owner":{"account_id":27001234,"reputation":17,"user_id":20562483,"display_name":"marshmellow"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":323,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74546727,"answer_count":1,"score":0,"last_activity_date":1669206173,"creation_date":1669194723,"question_id":74544252,"body_markdown":"In my current application I am having a properties file which has certain properties of student and I am writing a class with a main function to extract those properties and Iam using below code, but I am getting null values for all properties,I tried using getproperty() and it is working fine but I need to do this using @Value . Any solution?\r\n\r\n    @Configuration\r\n    @PropertySource(&quot;classpath:sample.properties&quot;)\r\n    public class Test\r\n    {\r\n      @Value(&quot;${student.name}&quot;)\r\n      private String name;\r\n\r\n     public void test()\r\n     {\r\n      System.out.println(&quot;name &quot;+name);\r\n     }\r\n     public static void main(String args[])\r\n     {\r\n       Test t=new Test();\r\n       t.test();\r\n     }\r\n\r\n\r\nI&#39;m getting\r\n\r\nname = null","title":"Unable to fetch data from properties file","body":"<p>In my current application I am having a properties file which has certain properties of student and I am writing a class with a main function to extract those properties and Iam using below code, but I am getting null values for all properties,I tried using getproperty() and it is working fine but I need to do this using @Value . Any solution?</p>\n<pre><code>@Configuration\n@PropertySource(&quot;classpath:sample.properties&quot;)\npublic class Test\n{\n  @Value(&quot;${student.name}&quot;)\n  private String name;\n\n public void test()\n {\n  System.out.println(&quot;name &quot;+name);\n }\n public static void main(String args[])\n {\n   Test t=new Test();\n   t.test();\n }\n</code></pre>\n<p>I'm getting</p>\n<p>name = null</p>\n"},{"tags":["java","docker","tomcat"],"comments":[{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669203676,"post_id":74546190,"comment_id":131590096,"body_markdown":"Your container has mapped the ports `8080:8080`, which means no access to/from port 80, even if the application that runs in the container allows that traffic. Start the container with a different mapping…","body":"Your container has mapped the ports <code>8080:8080</code>, which means no access to/from port 80, even if the application that runs in the container allows that traffic. Start the container with a different mapping…"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":1,"creation_date":1669203874,"post_id":74546190,"comment_id":131590157,"body_markdown":"Read the [documentation of docker](https://docs.docker.com/config/containers/container-networking/).","body":"Read the <a href=\"https://docs.docker.com/config/containers/container-networking/\" rel=\"nofollow noreferrer\">documentation of docker</a>."},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669203935,"post_id":74546190,"comment_id":131590177,"body_markdown":"please let me know how to give port 80 access to the container","body":"please let me know how to give port 80 access to the container"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669204008,"post_id":74546190,"comment_id":131590201,"body_markdown":"Start the container with the flag `-p 8080:80`, for example…","body":"Start the container with the flag <code>-p 8080:80</code>, for example…"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669204510,"post_id":74546190,"comment_id":131590399,"body_markdown":"ok How to access the port from the browser","body":"ok How to access the port from the browser"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669204747,"post_id":74546190,"comment_id":131590486,"body_markdown":"I added ports it shows like this 8080/tcp, 0.0.0.0:8091-&gt;80/tcp, :::8091-&gt;80/tcp","body":"I added ports it shows like this 8080/tcp, 0.0.0.0:8091-&gt;80/tcp, :::8091-&gt;80/tcp"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669205214,"post_id":74546190,"comment_id":131590640,"body_markdown":"Well, then try to access the application at port 8091","body":"Well, then try to access the application at port 8091"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669206286,"post_id":74546190,"comment_id":131590995,"body_markdown":"I tried to access it with http://hostip:8091  but it shows This site can’t be reached (and redirected to https://hostip). Please let me know how to solve this issue","body":"I tried to access it with <a href=\"http://hostip:8091\" rel=\"nofollow noreferrer\">hostip:8091</a>  but it shows This site can’t be reached (and redirected to <a href=\"https://hostip\" rel=\"nofollow noreferrer\">hostip</a>). Please let me know how to solve this issue"},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669269476,"post_id":74546190,"comment_id":131607218,"body_markdown":"anyone, Please solve this issue","body":"anyone, Please solve this issue"},{"owner":{"account_id":1894950,"reputation":18007,"user_id":1712135,"display_name":"deHaar"},"score":0,"creation_date":1669271618,"post_id":74546190,"comment_id":131607662,"body_markdown":"Have you tried to (1) stop your container and (2) start it again with the most obvious mapping: `-p 80:80`? Then (3), the application *should* be available at `http://red-hat-server-ip/` (no port, you can explicitly pass `:80`).","body":"Have you tried to (1) stop your container and (2) start it again with the most obvious mapping: <code>-p 80:80</code>? Then (3), the application <i>should</i> be available at <code>http:&#47;&#47;red-hat-server-ip&#47;</code> (no port, you can explicitly pass <code>:80</code>)."},{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669285883,"post_id":74546190,"comment_id":131612265,"body_markdown":"Actually, i created Container with 8091:80, So I want to access it with HTTP://hostip:8091","body":"Actually, i created Container with 8091:80, So I want to access it with <a href=\"HTTP://hostip:8091\" rel=\"nofollow noreferrer\">HTTP://hostip:8091</a>"}],"answers":[{"comments":[{"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"score":0,"creation_date":1669206680,"post_id":74546602,"comment_id":131591124,"body_markdown":"my tomcat port must be 80, I don&#39;t want to change the server.xml","body":"my tomcat port must be 80, I don&#39;t want to change the server.xml"}],"tags":[],"owner":{"account_id":21987179,"reputation":97,"user_id":16261242,"display_name":"Aissa Laribi"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669205510,"creation_date":1669205510,"answer_id":74546602,"question_id":74546190,"body_markdown":"Try to stop the container, and run your container with \r\n\r\n    docker run --name rajesh --publish 8080:8080 &lt;other arguments&gt; centos\r\n\r\n","title":"How to access Docker application from browser?","body":"<p>Try to stop the container, and run your container with</p>\n<pre><code>docker run --name rajesh --publish 8080:8080 &lt;other arguments&gt; centos\n</code></pre>\n"}],"owner":{"account_id":25416593,"reputation":29,"user_id":19223393,"display_name":"Rajesh Gandhavarapu"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":422,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74546602,"answer_count":1,"score":0,"last_activity_date":1669205510,"creation_date":1669203488,"question_id":74546190,"body_markdown":"I installed docker in RedHat8 and pull the centos8 image and create a container with port 8080 Shown Below.\r\n\r\n[![enter image description here][1]][1]\r\n\r\nIn that container, I  installed java and tomcat, and I deployed my wars in tomcat at webapps location and started tomcat the tomcat ran successfully. I gave 80 port (changed in server.xml)  to tomcat to access the application from the browser. After that, I tried to access my application with Url:\r\n\r\n&gt; https://40.6.254.159:8080/    (IP address was RedHat server IP)\r\n\r\nBut I am not able to access the application. Please let me know how to access web application\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/VSfbl.png","title":"How to access Docker application from browser?","body":"<p>I installed docker in RedHat8 and pull the centos8 image and create a container with port 8080 Shown Below.</p>\n<p><a href=\"https://i.stack.imgur.com/VSfbl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VSfbl.png\" alt=\"enter image description here\" /></a></p>\n<p>In that container, I  installed java and tomcat, and I deployed my wars in tomcat at webapps location and started tomcat the tomcat ran successfully. I gave 80 port (changed in server.xml)  to tomcat to access the application from the browser. After that, I tried to access my application with Url:</p>\n<blockquote>\n<p><a href=\"https://40.6.254.159:8080/\" rel=\"nofollow noreferrer\">https://40.6.254.159:8080/</a>    (IP address was RedHat server IP)</p>\n</blockquote>\n<p>But I am not able to access the application. Please let me know how to access web application</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1496517411,"post_id":44347670,"comment_id":75697944,"body_markdown":"Your variable `i` is probably a mistake.  Read the spec: local variables are thread safe.  Making a loop counter global means it&#39;s subject to interference by other threads.  (Instance variables are effectively &quot;global&quot; in a multi-threaded environment.)  Try replacing `i` with just a regular local `int` and test it.","body":"Your variable <code>i</code> is probably a mistake.  Read the spec: local variables are thread safe.  Making a loop counter global means it&#39;s subject to interference by other threads.  (Instance variables are effectively &quot;global&quot; in a multi-threaded environment.)  Try replacing <code>i</code> with just a regular local <code>int</code> and test it."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":2,"creation_date":1496517547,"post_id":44347670,"comment_id":75697984,"body_markdown":"@markspace I&#39;m betting that making `i` global is intentional.  If he makes it a local `int`, then he should expect `value_to_be_incremented_stored` would get up to 400000, not 100000.","body":"@markspace I&#39;m betting that making <code>i</code> global is intentional.  If he makes it a local <code>int</code>, then he should expect <code>value_to_be_incremented_stored</code> would get up to 400000, not 100000."},{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496517681,"post_id":44347670,"comment_id":75698021,"body_markdown":"@markspace  I want overall value to be 100000. thanks for your reply.","body":"@markspace  I want overall value to be 100000. thanks for your reply."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1496517692,"post_id":44347670,"comment_id":75698022,"body_markdown":"@ajb But he sets it to 0 at the start of each loop.  That&#39;s got to produce inconsistent results.  *Something* is definitely funky with that loop.","body":"@ajb But he sets it to 0 at the start of each loop.  That&#39;s got to produce inconsistent results.  <i>Something</i> is definitely funky with that loop."},{"owner":{"account_id":2871026,"reputation":31449,"user_id":2464386,"accept_rate":84,"display_name":"ajb"},"score":1,"creation_date":1496517782,"post_id":44347670,"comment_id":75698049,"body_markdown":"@markspace yes, that part looks like a mistake; `i.set(0)` should probably be removed.  In fact, I&#39;m sure that&#39;s the answer to the problem.","body":"@markspace yes, that part looks like a mistake; <code>i.set(0)</code> should probably be removed.  In fact, I&#39;m sure that&#39;s the answer to the problem."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":2,"creation_date":1496517796,"post_id":44347670,"comment_id":75698056,"body_markdown":"Well, each time a new thread calls `run()`, you reset the loop counter.  The total number of times that loop runs is indeterminate.  Try just removing the initialization in the for loop: `for ( ; i.get() &lt; 100000; i.incrementAndGet()) {`","body":"Well, each time a new thread calls <code>run()</code>, you reset the loop counter.  The total number of times that loop runs is indeterminate.  Try just removing the initialization in the for loop: <code>for ( ; i.get() &lt; 100000; i.incrementAndGet()) {</code>"},{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496518042,"post_id":44347670,"comment_id":75698110,"body_markdown":"@markspace I removed i.set(0) but still i am getting value more than 100000. I have no clue whats going wrong.","body":"@markspace I removed i.set(0) but still i am getting value more than 100000. I have no clue whats going wrong."},{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496518056,"post_id":44347670,"comment_id":75698112,"body_markdown":"@ajb I removed i.set(0) but still i am getting value more than 100000.","body":"@ajb I removed i.set(0) but still i am getting value more than 100000."},{"owner":{"account_id":5502972,"reputation":3853,"user_id":4371758,"display_name":"Bubletan"},"score":0,"creation_date":1496518741,"post_id":44347670,"comment_id":75698263,"body_markdown":"Try `while (i.getAndIncrement() &lt; 100000)`.","body":"Try <code>while (i.getAndIncrement() &lt; 100000)</code>."},{"owner":{"account_id":1288816,"reputation":4033,"user_id":1241334,"accept_rate":100,"display_name":"Jonny Henly"},"score":0,"creation_date":1496518988,"post_id":44347670,"comment_id":75698325,"body_markdown":"Small side note, if I&#39;m not mistaken `value_to_be_incremented_stored` should equal 99,999 once the loop has finished, not 100,000.","body":"Small side note, if I&#39;m not mistaken <code>value_to_be_incremented_stored</code> should equal 99,999 once the loop has finished, not 100,000."}],"answers":[{"comments":[{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496518100,"post_id":44347752,"comment_id":75698123,"body_markdown":"I removed i.set(0) but still i am getting value more than 100000. Sorry to say but this doesnot solve my issue.","body":"I removed i.set(0) but still i am getting value more than 100000. Sorry to say but this doesnot solve my issue."}],"tags":[],"owner":{"account_id":429736,"reputation":5878,"user_id":812787,"accept_rate":25,"display_name":"tsolakp"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1496521056,"creation_date":1496517777,"answer_id":44347752,"question_id":44347670,"body_markdown":"Everytime a new thread enters the run method it will reset your `i` count to zero via the first statement in the for loop by calling `i.set(0)`.\r\n\r\n**Update:** Next step after fixing reset issue, is to step through the code and see how the threads will behave. \r\nLets say three threads get inside the for loop while the fourth thread increments `i`. What will happen is that `value_to_be_incremented_stored` will increment 3 times and `i` only one time.\r\n\r\n","title":"Java Multi-threading : Unexpected result","body":"<p>Everytime a new thread enters the run method it will reset your <code>i</code> count to zero via the first statement in the for loop by calling <code>i.set(0)</code>.</p>\n\n<p><strong>Update:</strong> Next step after fixing reset issue, is to step through the code and see how the threads will behave. \nLets say three threads get inside the for loop while the fourth thread increments <code>i</code>. What will happen is that <code>value_to_be_incremented_stored</code> will increment 3 times and <code>i</code> only one time.</p>\n"},{"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1669205480,"creation_date":1496518711,"answer_id":44347884,"question_id":44347670,"body_markdown":"Your &quot;demo program&quot; suffers from two simultaneous defects.\r\n\r\nDefect #1 is the `i.set( 0 )` pointed out by tsolakp.  You say you fixed that but you are still getting a value of more than 100000.  I also tried it and indeed, the final value is still larger than 100000.\r\n\r\nI modified the program to be able to create an arbitrary number of threads, and I tried with 3, 10, and 20 threads.  I got a final number of 100003, 100009, and 100019 respectively. See a pattern? So:\r\n\r\nDefect #2 is that on the last iteration, when the value of `i` is 99999, the expression `i.get() &lt; 100000` is true for all threads, so all threads proceed to execute once more.  The `i.incrementAndGet()` clause is visually sitting right next to `i.get() &lt; 1000000;` but it does not get executed until the end of the loop.  \r\n\r\nSo, all threads get a chance to increment `i` once more after the last iteration.","title":"Java Multi-threading : Unexpected result","body":"<p>Your &quot;demo program&quot; suffers from two simultaneous defects.</p>\n<p>Defect #1 is the <code>i.set( 0 )</code> pointed out by tsolakp.  You say you fixed that but you are still getting a value of more than 100000.  I also tried it and indeed, the final value is still larger than 100000.</p>\n<p>I modified the program to be able to create an arbitrary number of threads, and I tried with 3, 10, and 20 threads.  I got a final number of 100003, 100009, and 100019 respectively. See a pattern? So:</p>\n<p>Defect #2 is that on the last iteration, when the value of <code>i</code> is 99999, the expression <code>i.get() &lt; 100000</code> is true for all threads, so all threads proceed to execute once more.  The <code>i.incrementAndGet()</code> clause is visually sitting right next to <code>i.get() &lt; 1000000;</code> but it does not get executed until the end of the loop.</p>\n<p>So, all threads get a chance to increment <code>i</code> once more after the last iteration.</p>\n"},{"comments":[{"owner":{"account_id":7567,"reputation":10188,"user_id":13189,"accept_rate":75,"display_name":"eckes"},"score":0,"creation_date":1496521017,"post_id":44347943,"comment_id":75698787,"body_markdown":"the synchronize could use the immutable return value of incremantAndGet() as well, so you dont need to synchronize (which makes using atomic types a bit obsolete) `for(;(x=i.incrementAndGet())&lt;100000;)`","body":"the synchronize could use the immutable return value of incremantAndGet() as well, so you dont need to synchronize (which makes using atomic types a bit obsolete) <code>for(;(x=i.incrementAndGet())&lt;100000;)</code>"},{"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"score":0,"creation_date":1496521200,"post_id":44347943,"comment_id":75698841,"body_markdown":"@markspace - Thanks for your answer. this saved my day.","body":"@markspace - Thanks for your answer. this saved my day."},{"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"score":0,"creation_date":1496523850,"post_id":44347943,"comment_id":75699527,"body_markdown":"@eckes I think so too, given the OP&#39;s example.  But I think the OPs example may be highly simplified and there might be reasons why the loop invariant cannot be used directly like that in their real problem space.","body":"@eckes I think so too, given the OP&#39;s example.  But I think the OPs example may be highly simplified and there might be reasons why the loop invariant cannot be used directly like that in their real problem space."}],"tags":[],"owner":{"account_id":2709823,"reputation":10716,"user_id":2338547,"display_name":"markspace"},"comment_count":3,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1496595184,"creation_date":1496519192,"answer_id":44347943,"question_id":44347670,"body_markdown":"I found three defects.  One there is a race condition in the for loop between the point where you compare the loop counter, and where you increment it.  You should do this in one step to get an atomic operation:\r\n\r\n    for ( ; i.incrementAndGet() &lt; 100000;  ) {\r\n\r\nThe other is there is also a race condition between the increment of your counter, and placing it in the map.  Even though you increment these in series, any thread could be have a different value internally (it&#39;s at a different point in the loop) and it could put a previous value in the global map.  You need atomicity here to to make sure the value you increment is the value you place in the loop.\r\n\r\n    synchronized( lock ) { \r\n        value_to_be_incremented_stored.incrementAndGet();\r\n        map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\r\n    }\r\n\r\n\r\n\r\nFinally for some reason the `&lt;` comparison produces a value of 99999 for me.  I had to use `&lt;=` to fix it.\r\n\r\n(And as we discussed in the comments, setting `i.set(0)` at the start of each `for` loop doesn&#39;t work for fairly obvious reasons.  Four defects, I guess.)\r\n\r\n    class ThreadTestX implements Runnable {\r\n    \r\n        static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\r\n        static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\r\n        static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\r\n        static final Object lock = new Object();\r\n    \r\n        @Override\r\n        public void run() {\r\n    \r\n            for ( ; i.incrementAndGet() &lt;= 100000;  ) {\r\n                /*\r\n                    This loop should run 100000 times and when loop terminates according to me value of variable \r\n                    &quot;value_to_be_incremented_stored&quot; should be 100000 as its value is incremented \r\n                    100000 times the loop also runs 100000 times. \r\n                */\r\n                synchronized( lock ) {\r\n                    value_to_be_incremented_stored.incrementAndGet();\r\n        //            System.out.println(&quot;Thread &gt; &quot; + Thread.currentThread() + \r\n        //                 &quot;  &quot; + value_to_be_incremented_stored.get());\r\n                    map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\r\n                }\r\n            }\r\n    \r\n            System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() \r\n                    + &quot;     &quot; + map.toString());\r\n        }\r\n    \r\n        public static void main(String[] args) {\r\n    \r\n            ThreadTestX t1 = new ThreadTestX();\r\n            Thread thread1 = new Thread(t1);\r\n            thread1.setName(&quot;Thread 1&quot;);\r\n    \r\n            Thread thread2 = new Thread(t1);\r\n            thread2.setName(&quot;Thread 2&quot;);\r\n    \r\n            Thread thread3 = new Thread(t1);\r\n            thread3.setName(&quot;Thread 3&quot;);\r\n    \r\n            Thread thread4 = new Thread(t1);\r\n            thread4.setName(&quot;Thread 4&quot;);\r\n    \r\n            thread1.start();\r\n            thread2.start();\r\n            thread3.start();\r\n            thread4.start();\r\n    \r\n        }\r\n    }\r\n\r\nOutput:\r\n\r\n    run:\r\n    Output by Thread  Thread[Thread 4,5,main]     {TC=100000}\r\n    Output by Thread  Thread[Thread 3,5,main]     {TC=100000}\r\n    Output by Thread  Thread[Thread 1,5,main]     {TC=100000}\r\n    Output by Thread  Thread[Thread 2,5,main]     {TC=100000}\r\n    BUILD SUCCESSFUL (total time: 0 seconds)\r\n\r\n****\r\n\r\nAfterthoughts:  And in spite of getting marked correct, I&#39;m not sure I was correct.  The problem here is that you are trying to keep three things in sync: the loop counter `i`, the value to be incremented, and the map.  Allowing any of these to be executed outside of a synchronized block may invite them to be in an unexpected state.  I think the following may be safer:\r\n\r\n    @Override\r\n    public void run() {\r\n\r\n        for ( ;;  ) {\r\n            synchronized( lock ) {\r\n                if( i.incrementAndGet() &lt;= 100000 ) {\r\n                    value_to_be_incremented_stored.incrementAndGet();\r\n                    map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\r\n                }\r\n                else\r\n                    break;\r\n            }\r\n        }\r\n        System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() \r\n                + &quot;     &quot; + map.toString());\r\n    }\r\n\r\nThis removes the need for declaring the variables as `AtomicInteger`, but I don&#39;t see how else you ensure that their values don&#39;t change (due to some other thread) as that loop executes.\r\n","title":"Java Multi-threading : Unexpected result","body":"<p>I found three defects.  One there is a race condition in the for loop between the point where you compare the loop counter, and where you increment it.  You should do this in one step to get an atomic operation:</p>\n\n<pre><code>for ( ; i.incrementAndGet() &lt; 100000;  ) {\n</code></pre>\n\n<p>The other is there is also a race condition between the increment of your counter, and placing it in the map.  Even though you increment these in series, any thread could be have a different value internally (it's at a different point in the loop) and it could put a previous value in the global map.  You need atomicity here to to make sure the value you increment is the value you place in the loop.</p>\n\n<pre><code>synchronized( lock ) { \n    value_to_be_incremented_stored.incrementAndGet();\n    map.put(\"TC\", value_to_be_incremented_stored.intValue());\n}\n</code></pre>\n\n<p>Finally for some reason the <code>&lt;</code> comparison produces a value of 99999 for me.  I had to use <code>&lt;=</code> to fix it.</p>\n\n<p>(And as we discussed in the comments, setting <code>i.set(0)</code> at the start of each <code>for</code> loop doesn't work for fairly obvious reasons.  Four defects, I guess.)</p>\n\n<pre><code>class ThreadTestX implements Runnable {\n\n    static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\n    static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\n    static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\n    static final Object lock = new Object();\n\n    @Override\n    public void run() {\n\n        for ( ; i.incrementAndGet() &lt;= 100000;  ) {\n            /*\n                This loop should run 100000 times and when loop terminates according to me value of variable \n                \"value_to_be_incremented_stored\" should be 100000 as its value is incremented \n                100000 times the loop also runs 100000 times. \n            */\n            synchronized( lock ) {\n                value_to_be_incremented_stored.incrementAndGet();\n    //            System.out.println(\"Thread &gt; \" + Thread.currentThread() + \n    //                 \"  \" + value_to_be_incremented_stored.get());\n                map.put(\"TC\", value_to_be_incremented_stored.intValue());\n            }\n        }\n\n        System.out.println(\"Output by Thread  \" + Thread.currentThread() \n                + \"     \" + map.toString());\n    }\n\n    public static void main(String[] args) {\n\n        ThreadTestX t1 = new ThreadTestX();\n        Thread thread1 = new Thread(t1);\n        thread1.setName(\"Thread 1\");\n\n        Thread thread2 = new Thread(t1);\n        thread2.setName(\"Thread 2\");\n\n        Thread thread3 = new Thread(t1);\n        thread3.setName(\"Thread 3\");\n\n        Thread thread4 = new Thread(t1);\n        thread4.setName(\"Thread 4\");\n\n        thread1.start();\n        thread2.start();\n        thread3.start();\n        thread4.start();\n\n    }\n}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>run:\nOutput by Thread  Thread[Thread 4,5,main]     {TC=100000}\nOutput by Thread  Thread[Thread 3,5,main]     {TC=100000}\nOutput by Thread  Thread[Thread 1,5,main]     {TC=100000}\nOutput by Thread  Thread[Thread 2,5,main]     {TC=100000}\nBUILD SUCCESSFUL (total time: 0 seconds)\n</code></pre>\n\n<hr>\n\n<p>Afterthoughts:  And in spite of getting marked correct, I'm not sure I was correct.  The problem here is that you are trying to keep three things in sync: the loop counter <code>i</code>, the value to be incremented, and the map.  Allowing any of these to be executed outside of a synchronized block may invite them to be in an unexpected state.  I think the following may be safer:</p>\n\n<pre><code>@Override\npublic void run() {\n\n    for ( ;;  ) {\n        synchronized( lock ) {\n            if( i.incrementAndGet() &lt;= 100000 ) {\n                value_to_be_incremented_stored.incrementAndGet();\n                map.put(\"TC\", value_to_be_incremented_stored.intValue());\n            }\n            else\n                break;\n        }\n    }\n    System.out.println(\"Output by Thread  \" + Thread.currentThread() \n            + \"     \" + map.toString());\n}\n</code></pre>\n\n<p>This removes the need for declaring the variables as <code>AtomicInteger</code>, but I don't see how else you ensure that their values don't change (due to some other thread) as that loop executes.</p>\n"}],"owner":{"account_id":3843251,"reputation":487,"user_id":3185670,"accept_rate":100,"display_name":"Rajat Khandelwal"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":585,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"accepted_answer_id":44347943,"answer_count":3,"score":6,"last_activity_date":1669205480,"creation_date":1496517146,"question_id":44347670,"body_markdown":"I am working on a Enterprise application. I am facing some issues while running application in multithreaded environment. I am writing a program in which there is a variable whose value is getting updated(incremented) at very fast rate (for example 10000 updates/persecond). A loop runs for certain iterations and the value of the variable is incremented and stored in HashMap. Once the loop terminates and value the variable in HashMap is printed. I am getting unexpected value of the variable. \n\nHere is demo program (Please read comments for better understanding) :\n\n&lt;!-- language-all: lang-java --&gt;\n\n    class test implements Runnable {\n    \n        static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\n        static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\n        static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\n    \n        @Override\n        public void run() {\n    \n            for (i.set(0); i.get() &lt; 100000; i.incrementAndGet()) {\n                /*\n                    This loop should run 100000 times and when loop terminates according to me value of variable \n                    &quot;value_to_be_incremented_stored&quot; should be 100000 as its value is incremented \n                    100000 times the loop also runs 100000 times. \n                */\n                System.out.println(&quot;Thread &gt; &quot; + Thread.currentThread() + &quot;  &quot; + value_to_be_incremented_stored.incrementAndGet());\n                map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\n            }\n    \n            System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() + &quot;     &quot; + map.toString());\n        }\n    \n        public static void main(String[] args) {\n    \n            test t1 = new test();\n            Thread thread1 = new Thread(t1);\n            thread1.setName(&quot;Thread 1&quot;);\n    \n            Thread thread2 = new Thread(t1);\n            thread2.setName(&quot;Thread 2&quot;);\n    \n            Thread thread3 = new Thread(t1);\n            thread3.setName(&quot;Thread 3&quot;);\n    \n            Thread thread4 = new Thread(t1);\n            thread4.setName(&quot;Thread 4&quot;);\n    \n            thread1.start();\n            thread2.start();\n            thread3.start();\n            thread4.start();\n    \n        }\n    }\n\n\n**Output** (it varies) :\n\n[![My output][1]][1]\n\n**Issue** :\nI am running loop for 100000 times `(i.get() &lt; 100000)` then how come value of variable `value_to_be_incremented_stored` becomes more than 100000.\n\n  [1]: https://i.stack.imgur.com/Ivz6p.png","title":"Java Multi-threading : Unexpected result","body":"<p>I am working on a Enterprise application. I am facing some issues while running application in multithreaded environment. I am writing a program in which there is a variable whose value is getting updated(incremented) at very fast rate (for example 10000 updates/persecond). A loop runs for certain iterations and the value of the variable is incremented and stored in HashMap. Once the loop terminates and value the variable in HashMap is printed. I am getting unexpected value of the variable.</p>\n<p>Here is demo program (Please read comments for better understanding) :</p>\n\n<pre class=\"lang-java prettyprint-override\"><code>class test implements Runnable {\n\n    static ConcurrentHashMap&lt;String, Integer&gt; map = new ConcurrentHashMap&lt;&gt;();\n    static AtomicInteger value_to_be_incremented_stored = new AtomicInteger(0); // variable whose value to be updated\n    static AtomicInteger i = new AtomicInteger(0);  // this runs the loop\n\n    @Override\n    public void run() {\n\n        for (i.set(0); i.get() &lt; 100000; i.incrementAndGet()) {\n            /*\n                This loop should run 100000 times and when loop terminates according to me value of variable \n                &quot;value_to_be_incremented_stored&quot; should be 100000 as its value is incremented \n                100000 times the loop also runs 100000 times. \n            */\n            System.out.println(&quot;Thread &gt; &quot; + Thread.currentThread() + &quot;  &quot; + value_to_be_incremented_stored.incrementAndGet());\n            map.put(&quot;TC&quot;, value_to_be_incremented_stored.intValue());\n        }\n\n        System.out.println(&quot;Output by Thread  &quot; + Thread.currentThread() + &quot;     &quot; + map.toString());\n    }\n\n    public static void main(String[] args) {\n\n        test t1 = new test();\n        Thread thread1 = new Thread(t1);\n        thread1.setName(&quot;Thread 1&quot;);\n\n        Thread thread2 = new Thread(t1);\n        thread2.setName(&quot;Thread 2&quot;);\n\n        Thread thread3 = new Thread(t1);\n        thread3.setName(&quot;Thread 3&quot;);\n\n        Thread thread4 = new Thread(t1);\n        thread4.setName(&quot;Thread 4&quot;);\n\n        thread1.start();\n        thread2.start();\n        thread3.start();\n        thread4.start();\n\n    }\n}\n</code></pre>\n<p><strong>Output</strong> (it varies) :</p>\n<p><a href=\"https://i.stack.imgur.com/Ivz6p.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Ivz6p.png\" alt=\"My output\" /></a></p>\n<p><strong>Issue</strong> :\nI am running loop for 100000 times <code>(i.get() &lt; 100000)</code> then how come value of variable <code>value_to_be_incremented_stored</code> becomes more than 100000.</p>\n"},{"tags":["java","amazon-s3","microstream"],"answers":[{"tags":[],"owner":{"account_id":17515210,"reputation":294,"user_id":12702336,"display_name":"MSHG"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669204914,"creation_date":1669204914,"answer_id":74546484,"question_id":74526559,"body_markdown":"The simplest solution would be to increase the usable java heap space, please see here for [details][1].\r\n\r\nHere is a short explanation why the memory requirement of your example is unexpected high:\r\n-\tEach persisted java object also requires some additional management data in memory. A HashMap with 1 million entries results in 2M (key and value) + 1 (the map) objects to be persisted. \r\n-\tWhen storing data Microstream internally collects all necessary data before it is written to a storage target, this may require a lot of memory during the store operation if many objects are stored at once. In your example you are always storing the whole hash map and its content. \r\n-\tMicrostream also caches data.\r\n\r\nIf increasing the java heap size is no option you may also have look at the [Lazy-Loading][2] feature of Microstream.\r\n\r\n\r\n  [1]: https://docs.oracle.com/en/java/javase/11/tools/java.html\r\n  [2]: https://docs.microstream.one/manual/storage/loading-data/index.html","title":"MicroStream + AWS S3 Blob example","body":"<p>The simplest solution would be to increase the usable java heap space, please see here for <a href=\"https://docs.oracle.com/en/java/javase/11/tools/java.html\" rel=\"nofollow noreferrer\">details</a>.</p>\n<p>Here is a short explanation why the memory requirement of your example is unexpected high:</p>\n<ul>\n<li>Each persisted java object also requires some additional management data in memory. A HashMap with 1 million entries results in 2M (key and value) + 1 (the map) objects to be persisted.</li>\n<li>When storing data Microstream internally collects all necessary data before it is written to a storage target, this may require a lot of memory during the store operation if many objects are stored at once. In your example you are always storing the whole hash map and its content.</li>\n<li>Microstream also caches data.</li>\n</ul>\n<p>If increasing the java heap size is no option you may also have look at the <a href=\"https://docs.microstream.one/manual/storage/loading-data/index.html\" rel=\"nofollow noreferrer\">Lazy-Loading</a> feature of Microstream.</p>\n"}],"owner":{"account_id":6961718,"reputation":25,"user_id":5340909,"display_name":"Gonzalo Mendoza"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74546484,"answer_count":1,"score":0,"last_activity_date":1669204914,"creation_date":1669080546,"question_id":74526559,"body_markdown":"I&#39;m trying to develop a simple application using MicroStream and AWS S3 as a Blob storage\r\nUsing the examples in the official page and others, I can&#39;t store and query some elements\r\n\r\nS3 Connection is working.\r\n\r\nMy Code\r\n\r\n```\r\nS3Client cli = S3Client.builder()\r\n      .region(Region.US_EAST_1)\r\n      .credentialsProvider(StaticCredentialsProvider.create(\r\n\r\n            AwsSessionCredentials.create(accessKey, secret, token)))\r\n      .build()\r\n      ;\r\n\r\nBlobStoreFileSystem fileSystem = BlobStoreFileSystem.New(\r\n      S3Connector.Caching(cli)\r\n);\r\n\r\nfinal EmbeddedStorageManager storageManager =EmbeddedStorage.start(fileSystem.ensureDirectoryPath(&quot;s3-folder&quot;));\r\n\r\nHashMap&lt;Integer, Object&gt; database = new HashMap&lt;&gt;();\r\n\r\nif (storageManager.root() == null) {\r\n   storageManager.setRoot(database);\r\n   storageManager.storeRoot();\r\n} else {\r\n   database = (HashMap&lt;Integer, Object&gt;) storageManager.root();\r\n}\r\n\r\nStorer storage = storageManager.createLazyStorer();\r\n\r\nfor(int i=0; i &lt; 1_000_000; i++) {\r\n   database.put(i, UUID.randomUUID().toString());\r\n\r\n   if (i == 500_000) {\r\n      System.out.println(&quot;Value: &quot; + database.get(500_000));\r\n   }\r\n}\r\n\r\nstorage.storeAll(database);\r\nstorage.commit();\r\n\r\nSystem.out.println(&quot;*************************&quot;);\r\nSystem.out.println(((Map&lt;String, Object&gt;)storageManager.root()).get(500_000));\r\n\r\nstorageManager.shutdown();\r\n\r\n```\r\nOutput\r\n`java.lang.OutOfMemoryError: Java heap space\r\nException in thread &quot;Daemon Thread 6&quot; java.lang.OutOfMemoryError: Java heap space`\r\n\r\n\r\nI&#39;m trying to persist and read objects from my collection in S3","title":"MicroStream + AWS S3 Blob example","body":"<p>I'm trying to develop a simple application using MicroStream and AWS S3 as a Blob storage\nUsing the examples in the official page and others, I can't store and query some elements</p>\n<p>S3 Connection is working.</p>\n<p>My Code</p>\n<pre><code>S3Client cli = S3Client.builder()\n      .region(Region.US_EAST_1)\n      .credentialsProvider(StaticCredentialsProvider.create(\n\n            AwsSessionCredentials.create(accessKey, secret, token)))\n      .build()\n      ;\n\nBlobStoreFileSystem fileSystem = BlobStoreFileSystem.New(\n      S3Connector.Caching(cli)\n);\n\nfinal EmbeddedStorageManager storageManager =EmbeddedStorage.start(fileSystem.ensureDirectoryPath(&quot;s3-folder&quot;));\n\nHashMap&lt;Integer, Object&gt; database = new HashMap&lt;&gt;();\n\nif (storageManager.root() == null) {\n   storageManager.setRoot(database);\n   storageManager.storeRoot();\n} else {\n   database = (HashMap&lt;Integer, Object&gt;) storageManager.root();\n}\n\nStorer storage = storageManager.createLazyStorer();\n\nfor(int i=0; i &lt; 1_000_000; i++) {\n   database.put(i, UUID.randomUUID().toString());\n\n   if (i == 500_000) {\n      System.out.println(&quot;Value: &quot; + database.get(500_000));\n   }\n}\n\nstorage.storeAll(database);\nstorage.commit();\n\nSystem.out.println(&quot;*************************&quot;);\nSystem.out.println(((Map&lt;String, Object&gt;)storageManager.root()).get(500_000));\n\nstorageManager.shutdown();\n\n</code></pre>\n<p>Output\n<code>java.lang.OutOfMemoryError: Java heap space Exception in thread &quot;Daemon Thread 6&quot; java.lang.OutOfMemoryError: Java heap space</code></p>\n<p>I'm trying to persist and read objects from my collection in S3</p>\n"},{"tags":["java","synchronization","semaphore"],"answers":[{"tags":[],"owner":{"account_id":19496972,"reputation":2160,"user_id":14263933,"display_name":"aatwork"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669204850,"creation_date":1669204850,"answer_id":74546472,"question_id":74546325,"body_markdown":"Semaphore works as a gate. It can&#39;t be qualified as thread-safe or thread-unsafe. Resources (in general objects) can be thread-safe or unsafe.\r\n\r\nIf it is binary semaphore, only one thread can access your resources at any given moment. So there is no need to think about thread-safety.\r\n\r\nBut if semaphore count is 2, two threads can simultaneously access the same resource. If your resource (some object) is thread-safe, you are good. Otherwise you would need to implement some kind of synchronization mechanism so that unsafe part can only be accessed by one thread at a time.","title":"Is semaphore thread-safe when its permits variable bigger than 1?","body":"<p>Semaphore works as a gate. It can't be qualified as thread-safe or thread-unsafe. Resources (in general objects) can be thread-safe or unsafe.</p>\n<p>If it is binary semaphore, only one thread can access your resources at any given moment. So there is no need to think about thread-safety.</p>\n<p>But if semaphore count is 2, two threads can simultaneously access the same resource. If your resource (some object) is thread-safe, you are good. Otherwise you would need to implement some kind of synchronization mechanism so that unsafe part can only be accessed by one thread at a time.</p>\n"}],"owner":{"account_id":27022507,"reputation":3,"user_id":20580286,"display_name":"angus600"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":306,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74546472,"answer_count":1,"score":0,"last_activity_date":1669204850,"creation_date":1669204157,"question_id":74546325,"body_markdown":"Recently I have been studying the sleep barber, and I have comprehended that it seems like a binary semaphore when the permits value equals to 1. How about when it exceeds 1? Will one thread be exchanged by a new one without releasing when multiple threads acquired?\r\n\r\n\r\nI think it is unsafe but I am not sure .\r\nIt would be nice if you could tell me the difference between syncing and simultaneous access.","title":"Is semaphore thread-safe when its permits variable bigger than 1?","body":"<p>Recently I have been studying the sleep barber, and I have comprehended that it seems like a binary semaphore when the permits value equals to 1. How about when it exceeds 1? Will one thread be exchanged by a new one without releasing when multiple threads acquired?</p>\n<p>I think it is unsafe but I am not sure .\nIt would be nice if you could tell me the difference between syncing and simultaneous access.</p>\n"},{"tags":["java","if-statement","character"],"comments":[{"owner":{"account_id":45213,"reputation":26348,"user_id":133203,"accept_rate":97,"display_name":"Federico klez Culloca"},"score":1,"creation_date":1669114618,"post_id":74531462,"comment_id":131565265,"body_markdown":"Loop on the string, check every character with `charAt`, set a flag to false and bail out as soon as you encounter a character that is neither ?, 0 or 1. Then use that flag as the condition in the `if` statement.","body":"Loop on the string, check every character with <code>charAt</code>, set a flag to false and bail out as soon as you encounter a character that is neither ?, 0 or 1. Then use that flag as the condition in the <code>if</code> statement."},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1669114685,"post_id":74531462,"comment_id":131565287,"body_markdown":"seems like a case for regular expressions: see Oracle&#39;s tutorial [Lesson: Regular Expressions](https://docs.oracle.com/javase/tutorial/essential/regex/) or the [`Pattern`](https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/regex/Pattern.html) class","body":"seems like a case for regular expressions: see Oracle&#39;s tutorial <a href=\"https://docs.oracle.com/javase/tutorial/essential/regex/\" rel=\"nofollow noreferrer\">Lesson: Regular Expressions</a> or the <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/regex/Pattern.html\" rel=\"nofollow noreferrer\"><code>Pattern</code></a> class"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1669114835,"post_id":74531462,"comment_id":131565332,"body_markdown":"Using a regex this would become `if(text.matches(&quot;[\\\\?01]+&quot;))` (assuming the string must not be empty). Without regex you basically do what Federico suggested.","body":"Using a regex this would become <code>if(text.matches(&quot;[\\\\?01]+&quot;))</code> (assuming the string must not be empty). Without regex you basically do what Federico suggested."},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669115307,"post_id":74531462,"comment_id":131565487,"body_markdown":"Probably better to compile the pattern in advance if it&#39;s used often as the creation of the decision tree is relatively heavy operation","body":"Probably better to compile the pattern in advance if it&#39;s used often as the creation of the decision tree is relatively heavy operation"}],"answers":[{"tags":[],"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669115618,"creation_date":1669115091,"answer_id":74531591,"question_id":74531462,"body_markdown":"You can use regex for this with the following pattern: `[?01]+` which means 1 or more instances of the characters ?, 0 or 1. if you want to limit it to 0 or more instances of any of them you can use this pattern instead: `[?01]*` or for exactly 1 you can just omit the `*` at the end (`[?01]`)\r\n\r\nThe usage would be as follow:\r\n\r\n    private Pattern pattern = Pattern.compile(&quot;[?01]+&quot;);\r\n    \r\n    private boolean isMatching(String s) {\r\n       return pattern.matcher(s).matches();\r\n    }\r\n\r\nAn example of the usage would be (please note that in this case both the function and the pattern need to be static):\r\n\r\n     public static void main(String[] args) {\r\n         System.out.println(isMatching(&quot;?&quot;));\r\n         System.out.println(isMatching(&quot;?A&quot;));\r\n         System.out.println(isMatching(&quot;N?&quot;));\r\n         System.out.println(isMatching(&quot;3&quot;));\r\n         System.out.println(isMatching(&quot;01&quot;));\r\n    }\r\n\r\nWhich will follow this output:\r\n\r\n```log\r\ntrue\r\nfalse\r\nfalse\r\nfalse\r\ntrue\r\n```\r\n","title":"String should only contain characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39;","body":"<p>You can use regex for this with the following pattern: <code>[?01]+</code> which means 1 or more instances of the characters ?, 0 or 1. if you want to limit it to 0 or more instances of any of them you can use this pattern instead: <code>[?01]*</code> or for exactly 1 you can just omit the <code>*</code> at the end (<code>[?01]</code>)</p>\n<p>The usage would be as follow:</p>\n<pre><code>private Pattern pattern = Pattern.compile(&quot;[?01]+&quot;);\n\nprivate boolean isMatching(String s) {\n   return pattern.matcher(s).matches();\n}\n</code></pre>\n<p>An example of the usage would be (please note that in this case both the function and the pattern need to be static):</p>\n<pre><code> public static void main(String[] args) {\n     System.out.println(isMatching(&quot;?&quot;));\n     System.out.println(isMatching(&quot;?A&quot;));\n     System.out.println(isMatching(&quot;N?&quot;));\n     System.out.println(isMatching(&quot;3&quot;));\n     System.out.println(isMatching(&quot;01&quot;));\n}\n</code></pre>\n<p>Which will follow this output:</p>\n<pre><code>true\nfalse\nfalse\nfalse\ntrue\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1689973,"reputation":37330,"user_id":1552534,"display_name":"WJS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669204714,"creation_date":1669135695,"answer_id":74536267,"question_id":74531462,"body_markdown":"Assuming you are using a [Scanner](https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Scanner.html#Scanner(java.lang.String)) to read from the console you can do it like this.\r\n- `[^01?]+` - use one or more characters other than `0,1, ?` as the input delimiter.\r\n\r\nFor demo purposes I am use a String as input.\r\n```\r\nString testString = &quot;ksks1ksks111;?001ksksksk10101 skksksk0ksks1ksk101010101jsjs&quot;;\r\n\r\nScanner s = new Scanner(testString).useDelimiter(&quot;[^01\\\\?]+&quot;);\r\n\r\nwhile (s.hasNext()) {\r\n    String in = s.next();\r\n    System.out.println(in);\r\n}\r\n```\r\nprints\r\n```\r\n1\r\n111\r\n?001\r\n10101\r\n0\r\n1\r\n101010101\r\n\r\n```\r\nTo actually read from the console you can set use `System.in` in place of `testString` above.  To terminate the input you can check for a specific combination of characters or signal an `eof` for the console.","title":"String should only contain characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39;","body":"<p>Assuming you are using a <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/Scanner.html#Scanner(java.lang.String)\" rel=\"nofollow noreferrer\">Scanner</a> to read from the console you can do it like this.</p>\n<ul>\n<li><code>[^01?]+</code> - use one or more characters other than <code>0,1, ?</code> as the input delimiter.</li>\n</ul>\n<p>For demo purposes I am use a String as input.</p>\n<pre><code>String testString = &quot;ksks1ksks111;?001ksksksk10101 skksksk0ksks1ksk101010101jsjs&quot;;\n\nScanner s = new Scanner(testString).useDelimiter(&quot;[^01\\\\?]+&quot;);\n\nwhile (s.hasNext()) {\n    String in = s.next();\n    System.out.println(in);\n}\n</code></pre>\n<p>prints</p>\n<pre><code>1\n111\n?001\n10101\n0\n1\n101010101\n\n</code></pre>\n<p>To actually read from the console you can set use <code>System.in</code> in place of <code>testString</code> above.  To terminate the input you can check for a specific combination of characters or signal an <code>eof</code> for the console.</p>\n"}],"owner":{"account_id":18727244,"reputation":3,"user_id":14779701,"display_name":"Saber"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":101,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74531591,"answer_count":2,"score":0,"last_activity_date":1669204714,"creation_date":1669114468,"question_id":74531462,"body_markdown":"Im trying to solve a problem which reads only characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39; from the console. I have been using the following if statement, but it only works when all three are included in the string.\r\n\r\nHow should the statement look like if I only want &#39;?&#39;, &#39;0&#39; and &#39;1&#39;? I want the program to stop if I use for instance &quot;10?=&quot;.\r\n\r\n```\r\n if(text.contains(&quot;?&quot;) &amp;&amp; text.contains(&quot;0&quot;) &amp;&amp; text.contains(&quot;1&quot;))\r\n        {\r\n            //do something\r\n        }\r\n``` \r\n\r\n","title":"String should only contain characters &#39;?&#39;, &#39;0&#39; and &#39;1&#39;","body":"<p>Im trying to solve a problem which reads only characters '?', '0' and '1' from the console. I have been using the following if statement, but it only works when all three are included in the string.</p>\n<p>How should the statement look like if I only want '?', '0' and '1'? I want the program to stop if I use for instance &quot;10?=&quot;.</p>\n<pre><code> if(text.contains(&quot;?&quot;) &amp;&amp; text.contains(&quot;0&quot;) &amp;&amp; text.contains(&quot;1&quot;))\n        {\n            //do something\n        }\n</code></pre>\n"},{"tags":["java","google-ads-api","google-ads-script"],"answers":[{"tags":[],"owner":{"account_id":22648,"reputation":11349,"user_id":56066,"accept_rate":100,"display_name":"dusoft"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669204618,"creation_date":1669204618,"answer_id":74546419,"question_id":74208675,"body_markdown":"Yes, you need to provide a user identifier via GTM (before) as well.\r\nSee Instructions here:\r\nhttps://support.google.com/google-ads/answer/11347292","title":"Enhanced Conversions through Google Ads API not Working","body":"<p>Yes, you need to provide a user identifier via GTM (before) as well.\nSee Instructions here:\n<a href=\"https://support.google.com/google-ads/answer/11347292\" rel=\"nofollow noreferrer\">https://support.google.com/google-ads/answer/11347292</a></p>\n"}],"owner":{"account_id":2569582,"reputation":73,"user_id":2228655,"accept_rate":43,"display_name":"Passionate"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":196,"favorite_count":0,"down_vote_count":2,"up_vote_count":0,"answer_count":1,"score":-2,"last_activity_date":1669204618,"creation_date":1666791033,"question_id":74208675,"body_markdown":"We are sending enhanced conversions to Google ADS API using the Upload Click Conversions method of the API client. This is the only data we send to API. No user identifier data about customers is sent to API before that via GTM. In Google Ads UI measurements, I see that Google only shows 5% of what actual conversions are. Does this mean we need to send Google Ads API some information through GTM before we send the conversions through the API client? ","title":"Enhanced Conversions through Google Ads API not Working","body":"<p>We are sending enhanced conversions to Google ADS API using the Upload Click Conversions method of the API client. This is the only data we send to API. No user identifier data about customers is sent to API before that via GTM. In Google Ads UI measurements, I see that Google only shows 5% of what actual conversions are. Does this mean we need to send Google Ads API some information through GTM before we send the conversions through the API client?</p>\n"},{"tags":["java","hibernate","jpa"],"comments":[{"owner":{"account_id":231721,"reputation":20460,"user_id":496099,"display_name":"Chris"},"score":1,"creation_date":1669215429,"post_id":74546396,"comment_id":131594560,"body_markdown":"Looks like you&#39;ve got one side of the Bidirectional relationship working fine, it is just now that you are fetching &quot;roles&quot;, it is populating the Role.users collection using N queries. Why I can only guess as it should default to lazy and so not get built unless you trigger it. I don&#39;t know what options Hibernate has, but I prefer batch fetching over these relationship types (see https://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_batchfetch.htm ) as it can handle fetching role relationships in one query instead of N, without multiplying the data returned from your main q","body":"Looks like you&#39;ve got one side of the Bidirectional relationship working fine, it is just now that you are fetching &quot;roles&quot;, it is populating the Role.users collection using N queries. Why I can only guess as it should default to lazy and so not get built unless you trigger it. I don&#39;t know what options Hibernate has, but I prefer batch fetching over these relationship types (see <a href=\"https://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_batchfetch.htm\" rel=\"nofollow noreferrer\">eclipse.org/eclipselink/documentation/2.4/jpa/extensions/&hellip;</a> ) as it can handle fetching role relationships in one query instead of N, without multiplying the data returned from your main q"},{"owner":{"account_id":15273588,"reputation":71,"user_id":13427345,"display_name":"O1G"},"score":0,"creation_date":1669226846,"post_id":74546396,"comment_id":131598906,"body_markdown":"@Chris you helped a lot pointing me to the right direction, previously I mainly checked what could be wrong with User, not realising that it is Role being filled with users during those N queries. As it turns out, **it was the hashCode and equals methods in Role that referred to the users set**. After removing users from there, it works as expected. Thanks. (Of course had there been a similar hashCode in User then I would have got StackOverFlowError when querying.)","body":"@Chris you helped a lot pointing me to the right direction, previously I mainly checked what could be wrong with User, not realising that it is Role being filled with users during those N queries. As it turns out, <b>it was the hashCode and equals methods in Role that referred to the users set</b>. After removing users from there, it works as expected. Thanks. (Of course had there been a similar hashCode in User then I would have got StackOverFlowError when querying.)"}],"owner":{"account_id":15273588,"reputation":71,"user_id":13427345,"display_name":"O1G"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":498,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669204497,"creation_date":1669204497,"question_id":74546396,"body_markdown":"I think I&#39;m doing everything as outlined [here](https://thorben-janssen.com/best-practices-for-many-to-many-associations-with-hibernate-and-jpa/), for example, but I still get n+1 selects. No eager fetch type, specifying LEFT JOIN FETCH in @Query and it leaves me wondering why it doesn&#39;t work.\r\n\r\n**User.java**\r\n```java\r\n@Entity\r\n@Table(name = &quot;users&quot;)\r\npublic class User {\r\n\r\n    // other fields &amp; methods\r\n\r\n    @ManyToMany\r\n    @JoinTable(name = &quot;users_roles&quot;,\r\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\r\n            inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\r\n    private Set&lt;Role&gt; roles;\r\n\r\n}\r\n\r\n```\r\n\r\n**Role.java**\r\n```java\r\n@Entity\r\n@Table(name = &quot;roles&quot;)\r\npublic class Role {\r\n\r\n    // other fields &amp; methods\r\n\r\n    @ManyToMany(mappedBy = &quot;roles&quot;)\r\n    private Set&lt;User&gt; users;\r\n}\r\n\r\n```\r\n\r\n**UserRepository.java**\r\n```java\r\npublic interface UserRepository extends JpaRepository&lt;User, Long&gt; {\r\n\r\n    // tried both versions of these:\r\n\r\n    @Query(&quot;FROM User u LEFT JOIN FETCH u.roles r WHERE u.username = :username&quot;)\r\n    Optional&lt;User&gt; findUser(String username);\r\n\r\n    @EntityGraph(type = EntityGraph.EntityGraphType.LOAD,\r\n            attributePaths = &quot;roles&quot;)\r\n    Optional&lt;User&gt; findUserByUsername(String username);\r\n}\r\n```\r\n\r\n**SELECTs for either query method**\r\n```sql\r\norg.hibernate.SQL                        : select user0_.id as id1_2_0_, role2_.id as id1_1_1_, user0_.email as email2_2_0_, user0_.email_verified as email_ve3_2_0_, user0_.first_name as first_na4_2_0_, user0_.last_name as last_nam5_2_0_, user0_.password_hash as password6_2_0_, user0_.username as username7_2_0_, role2_.role_name as role_nam2_1_1_, roles1_.user_id as user_id1_3_0__, roles1_.role_id as role_id2_3_0__ from users user0_ left outer join users_roles roles1_ on user0_.id=roles1_.user_id left outer join roles role2_ on roles1_.role_id=role2_.id where user0_.username=?\r\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [alice]\r\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\r\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1]\r\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\r\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [2]\r\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\r\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [4]\r\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\r\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5]\r\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\r\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [6]\r\n","title":"Spring JPA N+1 select problem despite using LEFT JOIN FETCH for @ManyToMany","body":"<p>I think I'm doing everything as outlined <a href=\"https://thorben-janssen.com/best-practices-for-many-to-many-associations-with-hibernate-and-jpa/\" rel=\"nofollow noreferrer\">here</a>, for example, but I still get n+1 selects. No eager fetch type, specifying LEFT JOIN FETCH in @Query and it leaves me wondering why it doesn't work.</p>\n<p><strong>User.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;users&quot;)\npublic class User {\n\n    // other fields &amp; methods\n\n    @ManyToMany\n    @JoinTable(name = &quot;users_roles&quot;,\n            joinColumns = @JoinColumn(name = &quot;user_id&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;role_id&quot;))\n    private Set&lt;Role&gt; roles;\n\n}\n\n</code></pre>\n<p><strong>Role.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Table(name = &quot;roles&quot;)\npublic class Role {\n\n    // other fields &amp; methods\n\n    @ManyToMany(mappedBy = &quot;roles&quot;)\n    private Set&lt;User&gt; users;\n}\n\n</code></pre>\n<p><strong>UserRepository.java</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface UserRepository extends JpaRepository&lt;User, Long&gt; {\n\n    // tried both versions of these:\n\n    @Query(&quot;FROM User u LEFT JOIN FETCH u.roles r WHERE u.username = :username&quot;)\n    Optional&lt;User&gt; findUser(String username);\n\n    @EntityGraph(type = EntityGraph.EntityGraphType.LOAD,\n            attributePaths = &quot;roles&quot;)\n    Optional&lt;User&gt; findUserByUsername(String username);\n}\n</code></pre>\n<p><strong>SELECTs for either query method</strong></p>\n<pre class=\"lang-sql prettyprint-override\"><code>org.hibernate.SQL                        : select user0_.id as id1_2_0_, role2_.id as id1_1_1_, user0_.email as email2_2_0_, user0_.email_verified as email_ve3_2_0_, user0_.first_name as first_na4_2_0_, user0_.last_name as last_nam5_2_0_, user0_.password_hash as password6_2_0_, user0_.username as username7_2_0_, role2_.role_name as role_nam2_1_1_, roles1_.user_id as user_id1_3_0__, roles1_.role_id as role_id2_3_0__ from users user0_ left outer join users_roles roles1_ on user0_.id=roles1_.user_id left outer join roles role2_ on roles1_.role_id=role2_.id where user0_.username=?\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [VARCHAR] - [alice]\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [1]\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [2]\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [4]\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [5]\norg.hibernate.SQL                        : select users0_.role_id as role_id2_3_0_, users0_.user_id as user_id1_3_0_, user1_.id as id1_2_1_, user1_.email as email2_2_1_, user1_.email_verified as email_ve3_2_1_, user1_.first_name as first_na4_2_1_, user1_.last_name as last_nam5_2_1_, user1_.password_hash as password6_2_1_, user1_.username as username7_2_1_ from users_roles users0_ inner join users user1_ on users0_.user_id=user1_.id where users0_.role_id=?\no.h.type.descriptor.sql.BasicBinder      : binding parameter [1] as [BIGINT] - [6]\n</code></pre>\n"},{"tags":["java","spring","spring-boot","jpa","spring-data-jpa"],"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1669198960,"post_id":74545122,"comment_id":131588456,"body_markdown":"You can use projections, instead of this nested map. Just google it, there are lots of guides, [this one](https://www.baeldung.com/spring-data-jpa-projections) for example. The topic has been covered on SO as well, you should not have problems finding resources on it.","body":"You can use projections, instead of this nested map. Just google it, there are lots of guides, <a href=\"https://www.baeldung.com/spring-data-jpa-projections\" rel=\"nofollow noreferrer\">this one</a> for example. The topic has been covered on SO as well, you should not have problems finding resources on it."},{"owner":{"account_id":24469372,"reputation":49,"user_id":18389329,"display_name":"Sreesanth"},"score":0,"creation_date":1669201722,"post_id":74545122,"comment_id":131589410,"body_markdown":"I&#39;m new to this; Ive joined table, ie, Job Entity and Employee Entity. I need the count of employee appeared on Job table. Tried projection and got output as\n    {\n        &quot;employee&quot;: null\n    },","body":"I&#39;m new to this; Ive joined table, ie, Job Entity and Employee Entity. I need the count of employee appeared on Job table. Tried projection and got output as     {         &quot;employee&quot;: null     },"}],"owner":{"account_id":24469372,"reputation":49,"user_id":18389329,"display_name":"Sreesanth"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":562,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669203900,"creation_date":1669198439,"question_id":74545122,"body_markdown":"\r\nI&#39;m trying to return only some objects of an entity class, since the primary key is not present in the data I require I can give my entity as return type.\r\nAlso tried creating another view-class, only classes on entity package is recognized by repository.\r\n\r\nTried Wild card of List&lt;?&gt; this gives only values, I want both Keys and values.\r\n\r\nSo I tried this, It gives the correct result, just wondering is there any better way ??\r\n\r\n    public interface JobRepository extends Repository&lt;Job, Integer&gt; {\r\n    \r\n        @Query(value = &quot;SELECT j.employee_id,e.employee_name,e.employee_email, COUNT(*) as count FROM job j INNER join employee e on j.employee_id=e.employee_id GROUP BY j.employee_id&quot;, nativeQuery = true)\r\n        List&lt;Map&lt;Integer, Map&lt;String, Map&lt;String, Integer&gt;&gt;&gt;&gt; getEmployeeCount();\r\n    }\r\n\r\n\r\nthis is the output.\r\n\r\n```\r\n[{\r\n    &quot;employee_name&quot;: &quot;Employee 1&quot;,\r\n    &quot;employee_id&quot;: 1,\r\n    &quot;employee_email&quot;: &quot;employee1@gmail.com&quot;,\r\n    &quot;count&quot;: 2\r\n}]\r\n```\r\n\r\n\r\nthis is the database structure\r\n\r\n[![enter image description here][1]][1]\r\n\r\n  [1]: https://i.stack.imgur.com/Lbqk3.png","title":"Custom return-type from JPA Repository Java SpringBoot","body":"<p>I'm trying to return only some objects of an entity class, since the primary key is not present in the data I require I can give my entity as return type.\nAlso tried creating another view-class, only classes on entity package is recognized by repository.</p>\n<p>Tried Wild card of List&lt;?&gt; this gives only values, I want both Keys and values.</p>\n<p>So I tried this, It gives the correct result, just wondering is there any better way ??</p>\n<pre><code>public interface JobRepository extends Repository&lt;Job, Integer&gt; {\n\n    @Query(value = &quot;SELECT j.employee_id,e.employee_name,e.employee_email, COUNT(*) as count FROM job j INNER join employee e on j.employee_id=e.employee_id GROUP BY j.employee_id&quot;, nativeQuery = true)\n    List&lt;Map&lt;Integer, Map&lt;String, Map&lt;String, Integer&gt;&gt;&gt;&gt; getEmployeeCount();\n}\n</code></pre>\n<p>this is the output.</p>\n<pre><code>[{\n    &quot;employee_name&quot;: &quot;Employee 1&quot;,\n    &quot;employee_id&quot;: 1,\n    &quot;employee_email&quot;: &quot;employee1@gmail.com&quot;,\n    &quot;count&quot;: 2\n}]\n</code></pre>\n<p>this is the database structure</p>\n<p><a href=\"https://i.stack.imgur.com/Lbqk3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lbqk3.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","file","exception","java.util.scanner","reader"],"comments":[{"owner":{"account_id":10817783,"reputation":1038,"user_id":7956161,"display_name":"Muhammad Ahmed"},"score":0,"creation_date":1639234137,"post_id":70316070,"comment_id":124298937,"body_markdown":"create file object from createFile method and pass it into the read method","body":"create file object from createFile method and pass it into the read method"}],"answers":[{"comments":[{"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"score":0,"creation_date":1639234629,"post_id":70316113,"comment_id":124299040,"body_markdown":"Thanks for your answer Elliott but do i need to return null that confused me a little?","body":"Thanks for your answer Elliott but do i need to return null that confused me a little?"},{"owner":{"account_id":10817783,"reputation":1038,"user_id":7956161,"display_name":"Muhammad Ahmed"},"score":0,"creation_date":1639235460,"post_id":70316113,"comment_id":124299262,"body_markdown":"Yes you have to return null in case if the dir does not exist or may be you can check if the dir does not exists you can create new dir and remove the try catch statement","body":"Yes you have to return null in case if the dir does not exist or may be you can check if the dir does not exists you can create new dir and remove the try catch statement"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1639240311,"post_id":70316113,"comment_id":124300396,"body_markdown":"Please don&#39;t teach newbies deplorable java code style. &#39;print the stack trace and return null&#39; is a crazy way to deal with IOExceptions in this code. This method should be declared to `throws IOException`, because the signature of the method itself (its name, arguments, return type, and javadoc) inherently implies I/O is occurring (IOException is therefore not an implementation detail but inherent in its very nature). the `psv main` method should, as just about all `main` methods should, be declared to `throws Exception`. Less code, better code, cleaner code, better behaviour. Win-win-win-win.","body":"Please don&#39;t teach newbies deplorable java code style. &#39;print the stack trace and return null&#39; is a crazy way to deal with IOExceptions in this code. This method should be declared to <code>throws IOException</code>, because the signature of the method itself (its name, arguments, return type, and javadoc) inherently implies I/O is occurring (IOException is therefore not an implementation detail but inherent in its very nature). the <code>psv main</code> method should, as just about all <code>main</code> methods should, be declared to <code>throws Exception</code>. Less code, better code, cleaner code, better behaviour. Win-win-win-win."},{"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"score":0,"creation_date":1639240704,"post_id":70316113,"comment_id":124300477,"body_markdown":"@rzwitserloot That code is in the question, and I still don&#39;t see the point in reading an empty file.","body":"@rzwitserloot That code is in the question, and I still don&#39;t see the point in reading an empty file."},{"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"score":0,"creation_date":1639383211,"post_id":70316113,"comment_id":124325360,"body_markdown":"I am not reading an empty file.I also have a writeFile method which you cant see @ElliottFrisch.","body":"I am not reading an empty file.I also have a writeFile method which you cant see @ElliottFrisch."}],"tags":[],"owner":{"account_id":3557625,"reputation":199021,"user_id":2970947,"display_name":"Elliott Frisch"},"comment_count":5,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1639233998,"creation_date":1639233998,"answer_id":70316113,"question_id":70316070,"body_markdown":"`createFile` is `void`; that means it does not return anything. In this case, you want to return a `File`. Like,\r\n\r\n    public static File createFile() {\r\n        File file = new File(&quot;C:\\\\Users\\\\egecoskun\\\\Desktop\\\\javafiles\\\\ananınamı.txt&quot;);\r\n        try {\r\n            if (file.createNewFile()) {\r\n                System.out.println(&quot;Dosya olusturuldu!&quot;);\r\n                return file;\r\n            } else {\r\n                System.out.println(&quot;Dosya zaten var!&quot;);\r\n            }\r\n        } catch (IOException e) {\r\n            e.printStackTrace();\r\n        }\r\n        return null;\r\n    }\r\n\r\nThen you need to assign the result of calling that method to a variable. And you should check that it is not `null` before you pass it to `readFile`. Like,\r\n\r\n    File f = createFile();\r\n    if (f != null) {\r\n        readFile(f);\r\n    }\r\n\r\nNote that the file won&#39;t actually contain anything to read. It just exists after you created it.","title":"I am trying to send File as a parameter to a method but dont know how?","body":"<p><code>createFile</code> is <code>void</code>; that means it does not return anything. In this case, you want to return a <code>File</code>. Like,</p>\n<pre><code>public static File createFile() {\n    File file = new File(&quot;C:\\\\Users\\\\egecoskun\\\\Desktop\\\\javafiles\\\\ananınamı.txt&quot;);\n    try {\n        if (file.createNewFile()) {\n            System.out.println(&quot;Dosya olusturuldu!&quot;);\n            return file;\n        } else {\n            System.out.println(&quot;Dosya zaten var!&quot;);\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n    return null;\n}\n</code></pre>\n<p>Then you need to assign the result of calling that method to a variable. And you should check that it is not <code>null</code> before you pass it to <code>readFile</code>. Like,</p>\n<pre><code>File f = createFile();\nif (f != null) {\n    readFile(f);\n}\n</code></pre>\n<p>Note that the file won't actually contain anything to read. It just exists after you created it.</p>\n"},{"tags":[],"owner":{"account_id":10817783,"reputation":1038,"user_id":7956161,"display_name":"Muhammad Ahmed"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1639240387,"creation_date":1639235777,"answer_id":70316364,"question_id":70316070,"body_markdown":"Return file object from createFile Function and pass it to readFile Function\r\n\r\n    public static File createFile() {\r\n        File dir = new File(&quot;C:\\\\Users\\\\egecoskun\\\\Desktop\\\\javafiles&quot;);\r\n        if(dir.exists()) {\r\n           dir.mkdirs();\r\n        }\r\n        File file = new File(dir,&quot;ananınamı.txt&quot;);\r\n        file.createNewFile();\r\n        return file;\r\n    }\r\n\r\nIn your main function\r\n\r\n    File file = createFile();\r\n    readFile(file);","title":"I am trying to send File as a parameter to a method but dont know how?","body":"<p>Return file object from createFile Function and pass it to readFile Function</p>\n<pre><code>public static File createFile() {\n    File dir = new File(&quot;C:\\\\Users\\\\egecoskun\\\\Desktop\\\\javafiles&quot;);\n    if(dir.exists()) {\n       dir.mkdirs();\n    }\n    File file = new File(dir,&quot;ananınamı.txt&quot;);\n    file.createNewFile();\n    return file;\n}\n</code></pre>\n<p>In your main function</p>\n<pre><code>File file = createFile();\nreadFile(file);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":22503787,"reputation":1,"user_id":16699714,"display_name":"Ishraga Mustafa Awad Allam"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669203722,"creation_date":1669203722,"answer_id":74546240,"question_id":70316070,"body_markdown":"    import java.io.*;\r\n    import java.io.FileInputStream;\r\n    import java.io.FileOutputStream;\r\n    import java.io.IOException;\r\n\r\n    public class FileCall2 {\r\n        public static void CALL(FileOutputStream fr, int w) {\r\n\t       try {\r\n\t         fr.write(w);\r\n\t       } catch (Exception e) {\r\n            System.out.println(&quot;Exception: &quot; + e);\r\n           }\r\n\t    }\r\n      public static void main(String[] args) {\r\n\t     try (FileInputStream f = new FileInputStream(&quot;c:\\\\code\\\\a.txt&quot;)) {\r\n            FileOutputStream f2 = new FileOutputStream(&quot;c:\\\\code\\\\a2.txt&quot;);\r\n          int c;\r\n\t\t  char wd;\r\n\t\t  while((c = f.read()) != -1) {\r\n              System.out.print((char)c);\r\n\t\t\t  wd = (char)c;\r\n\t\t\t  CALL(f2, c);\r\n\t\t\t  }\r\n          f.close();\t\t\t  \r\n        } catch (Exception e) {\r\n            System.out.println(&quot;Exception: &quot; + e);\r\n        }\r\n\t    }\r\n    }","title":"I am trying to send File as a parameter to a method but dont know how?","body":"<pre><code>import java.io.*;\nimport java.io.FileInputStream;\nimport java.io.FileOutputStream;\nimport java.io.IOException;\n\npublic class FileCall2 {\n    public static void CALL(FileOutputStream fr, int w) {\n       try {\n         fr.write(w);\n       } catch (Exception e) {\n        System.out.println(&quot;Exception: &quot; + e);\n       }\n    }\n  public static void main(String[] args) {\n     try (FileInputStream f = new FileInputStream(&quot;c:\\\\code\\\\a.txt&quot;)) {\n        FileOutputStream f2 = new FileOutputStream(&quot;c:\\\\code\\\\a2.txt&quot;);\n      int c;\n      char wd;\n      while((c = f.read()) != -1) {\n          System.out.print((char)c);\n          wd = (char)c;\n          CALL(f2, c);\n          }\n      f.close();              \n    } catch (Exception e) {\n        System.out.println(&quot;Exception: &quot; + e);\n    }\n    }\n}\n</code></pre>\n"}],"owner":{"account_id":21111421,"reputation":45,"user_id":15519295,"display_name":"Epitaph"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":602,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":70316364,"answer_count":3,"score":0,"last_activity_date":1669203722,"creation_date":1639233721,"question_id":70316070,"body_markdown":"    public static void createFile() {\r\n\r\n\t\tFile file = new File(&quot;C:\\\\Users\\\\egecoskun\\\\Desktop\\\\javafiles\\\\ananınamı.txt&quot;);\r\n\t\ttry {\r\n\t\t\tif (file.createNewFile()) {\r\n\t\t\t\tSystem.out.println(&quot;Dosya olusturuldu!&quot;);\r\n\r\n\t\t\t} else {\r\n\t\t\t\tSystem.out.println(&quot;Dosya zaten var!&quot;);\r\n\t\t\t}\r\n\t\t} catch (IOException e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\nHere is my createFile method to create a file.\r\n\r\n    public static void readFile(File file) {\r\n\t\ttry {\r\n\t\t\tScanner reader = new Scanner(file);\r\n\t\t\twhile(reader.hasNextLine()) {\r\n\t\t\t\tString line=reader.nextLine();\r\n\t\t\t\tSystem.out.println(line);\r\n\t\t\t}\r\n\t\t} catch (FileNotFoundException e) {\r\n\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\r\n\t}\r\nand this method is reading the file i am creating.But it needs to take File as an argument but when i try to run this method in Main \r\n\r\n    public static void main(String[] args) {\r\n\t\tcreateFile();\r\n\t\treadFile(file);\r\n\r\n\t}\r\nThe error i am getting is file cannot be resolved to a variable.\r\nDoes anyone spot my mistake? Can you explain it please.","title":"I am trying to send File as a parameter to a method but dont know how?","body":"<pre><code>public static void createFile() {\n\n    File file = new File(&quot;C:\\\\Users\\\\egecoskun\\\\Desktop\\\\javafiles\\\\ananınamı.txt&quot;);\n    try {\n        if (file.createNewFile()) {\n            System.out.println(&quot;Dosya olusturuldu!&quot;);\n\n        } else {\n            System.out.println(&quot;Dosya zaten var!&quot;);\n        }\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n<p>Here is my createFile method to create a file.</p>\n<pre><code>public static void readFile(File file) {\n    try {\n        Scanner reader = new Scanner(file);\n        while(reader.hasNextLine()) {\n            String line=reader.nextLine();\n            System.out.println(line);\n        }\n    } catch (FileNotFoundException e) {\n\n        e.printStackTrace();\n    }\n\n}\n</code></pre>\n<p>and this method is reading the file i am creating.But it needs to take File as an argument but when i try to run this method in Main</p>\n<pre><code>public static void main(String[] args) {\n    createFile();\n    readFile(file);\n\n}\n</code></pre>\n<p>The error i am getting is file cannot be resolved to a variable.\nDoes anyone spot my mistake? Can you explain it please.</p>\n"},{"tags":["java","spring-boot","tomcat","server","port"],"comments":[{"owner":{"account_id":74704,"reputation":11534,"user_id":214525,"accept_rate":100,"display_name":"f1sh"},"score":1,"creation_date":1596791381,"post_id":63298618,"comment_id":111930350,"body_markdown":"What application was it? It might be configured as a service in your operating system. That means that it gets restarted automatically, so stopping it once is not a solution.","body":"What application was it? It might be configured as a service in your operating system. That means that it gets restarted automatically, so stopping it once is not a solution."}],"answers":[{"comments":[{"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"score":0,"creation_date":1596792234,"post_id":63298713,"comment_id":111930719,"body_markdown":"Agree without wasting much time in finding the other application running on same port. That time can be used in development efforts.","body":"Agree without wasting much time in finding the other application running on same port. That time can be used in development efforts."}],"tags":[],"owner":{"account_id":6104455,"reputation":4456,"user_id":4762502,"accept_rate":73,"display_name":"Gaurav Jeswani"},"comment_count":1,"down_vote_count":1,"up_vote_count":3,"is_accepted":false,"score":2,"last_activity_date":1596792099,"creation_date":1596791449,"answer_id":63298713,"question_id":63298618,"body_markdown":"If port is acquired by some OS thread, it would be a bit tricky to stop it. Although it&#39;s not always great solution, but if you still want to continue with your development without any issue you can use this alternative solution (as you are in development environment).\r\n \r\nHere is another thing you can use. You can replace the default port for Spring Boot server to some other port number.\r\n\r\nFor server port the property is `server.port`.\r\n\r\nIf you are using `application.properties` file:\r\n\r\n    server.port=8081\r\n\r\nIt will start server on port 8081.\r\n\r\nSimilarly, you can do the same if using an `application.yml` file:\r\n\r\n    server:\r\n      port : 8081\r\n\r\nEach file is loaded by Spring Boot if placed in the `src/main/resources` directory of a Maven application.","title":"Web server failed to start. Port 8080 was already in use","body":"<p>If port is acquired by some OS thread, it would be a bit tricky to stop it. Although it's not always great solution, but if you still want to continue with your development without any issue you can use this alternative solution (as you are in development environment).</p>\n<p>Here is another thing you can use. You can replace the default port for Spring Boot server to some other port number.</p>\n<p>For server port the property is <code>server.port</code>.</p>\n<p>If you are using <code>application.properties</code> file:</p>\n<pre><code>server.port=8081\n</code></pre>\n<p>It will start server on port 8081.</p>\n<p>Similarly, you can do the same if using an <code>application.yml</code> file:</p>\n<pre><code>server:\n  port : 8081\n</code></pre>\n<p>Each file is loaded by Spring Boot if placed in the <code>src/main/resources</code> directory of a Maven application.</p>\n"},{"tags":[],"owner":{"account_id":16657879,"reputation":2625,"user_id":12038714,"display_name":"J Asgarov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1596792055,"creation_date":1596792055,"answer_id":63298859,"question_id":63298618,"body_markdown":"Your only other option (beside making port 8080 available or using another port for spring boot) is running the application in docker:\r\n\r\nCreate a Dockerfile in your application directory\r\n\r\n    FROM openjdk:8-jdk-alpine\r\n    ARG JAR_FILE=target/*.jar\r\n    COPY ${JAR_FILE} app.jar\r\n    ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\r\n\r\nRun in terminal\r\n\r\n    sudo docker build -t spring-app . &amp;&amp; docker run -d -p 8080:8080 -t springapp\r\n\r\n(This assumes you have docker installed, please install it if you don’t have it)","title":"Web server failed to start. Port 8080 was already in use","body":"<p>Your only other option (beside making port 8080 available or using another port for spring boot) is running the application in docker:</p>\n<p>Create a Dockerfile in your application directory</p>\n<pre><code>FROM openjdk:8-jdk-alpine\nARG JAR_FILE=target/*.jar\nCOPY ${JAR_FILE} app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\n</code></pre>\n<p>Run in terminal</p>\n<pre><code>sudo docker build -t spring-app . &amp;&amp; docker run -d -p 8080:8080 -t springapp\n</code></pre>\n<p>(This assumes you have docker installed, please install it if you don’t have it)</p>\n"}],"owner":{"account_id":5796363,"reputation":21,"user_id":4572062,"display_name":"AMIYA SAHOO"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":9556,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":2,"score":2,"last_activity_date":1669203352,"creation_date":1596791076,"question_id":63298618,"body_markdown":"I am trying to develope a webapp using spring boot in STS. While running my app i am getting \r\n\r\n**Description:**\r\n\r\n&gt; Web server failed to start. Port 8080 was already in use.\r\n\r\n**Action:**\r\n\r\n&gt; Identify and stop the process that&#39;s listening on port 8080 or\r\n&gt; configure this application to listen on another port.\r\n\r\nI have tried to close the application for port 8080. I found the PID for the port and terminated it using\r\n\r\n    taskkill /F /PID pidname\r\n\r\n \r\n\r\nI restarted the STS and tried to run again but its throwing the same error.\r\n","title":"Web server failed to start. Port 8080 was already in use","body":"<p>I am trying to develope a webapp using spring boot in STS. While running my app i am getting</p>\n<p><strong>Description:</strong></p>\n<blockquote>\n<p>Web server failed to start. Port 8080 was already in use.</p>\n</blockquote>\n<p><strong>Action:</strong></p>\n<blockquote>\n<p>Identify and stop the process that's listening on port 8080 or\nconfigure this application to listen on another port.</p>\n</blockquote>\n<p>I have tried to close the application for port 8080. I found the PID for the port and terminated it using</p>\n<pre><code>taskkill /F /PID pidname\n</code></pre>\n<p>I restarted the STS and tried to run again but its throwing the same error.</p>\n"},{"tags":["java","jetty"],"answers":[{"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669203284,"creation_date":1669203284,"answer_id":74546152,"question_id":74544938,"body_markdown":"Jetty 9.x is now at End of Community Support (soon to be End of Life)\r\n\r\nSee: https://github.com/eclipse/jetty.project/issues/7958\r\n\r\n---\r\n\r\nYou are not paying attention to what those threads are.\r\n\r\nJetty threads will have a name that start with `qtp`.\r\n\r\nAll other threads are from things that are not Jetty.","title":"Why does Jetty consume more threads than specified in start.ini file?","body":"<p>Jetty 9.x is now at End of Community Support (soon to be End of Life)</p>\n<p>See: <a href=\"https://github.com/eclipse/jetty.project/issues/7958\" rel=\"nofollow noreferrer\">https://github.com/eclipse/jetty.project/issues/7958</a></p>\n<hr />\n<p>You are not paying attention to what those threads are.</p>\n<p>Jetty threads will have a name that start with <code>qtp</code>.</p>\n<p>All other threads are from things that are not Jetty.</p>\n"}],"owner":{"account_id":18618352,"reputation":3,"user_id":13598288,"display_name":"Dmitry Sheykin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":276,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74546152,"answer_count":1,"score":0,"last_activity_date":1669203284,"creation_date":1669197676,"question_id":74544938,"body_markdown":"I have my java spring application running inside Jetty 9.48.\r\nThese are the properties in start.ini file:\r\n\r\n```\r\njetty.http.acceptors=30\r\n# jetty.http.selectors=200\r\n\r\njetty.threadPool.minThreads=200\r\njetty.threadPool.maxThreads=1000\r\njetty.threadPool.idleTimeout=5000\r\n\r\njetty.http.host=0.0.0.0\r\njetty.http.port=8080\r\njetty.http.connectTimeout=2000\r\njetty.http.reuseAddress=true\r\n\r\njetty.lowresources.accepting=false\r\n\r\njetty.output.buffer.size=32768\r\njetty.httpConfig.outputAggregationSize=32768\r\njetty.httpConfig.requestHeaderSize=16384\r\njetty.httpConfig.responseHeaderSize=16384\r\njetty.httpConfig.sendServerVersion=false\r\njetty.httpConfig.sendDateHeader=false\r\n\r\njetty.server.stopAtShutdown=true\r\njetty.server.stopTimeout=5000\r\njetty.server.dumpAfterStart=false\r\njetty.server.dumpBeforeStop=false\r\n\r\njetty.deploy.scanInterval=0\r\n\r\njetty.console-capture.dir=/yyyy_mm_dd.stderrout.log\r\njetty.console-capture.retainDays=90\r\njetty.console-capture.timezone=UTC\r\n\r\njetty.debug.retainDays=90\r\n\r\n```\r\n\r\nWhen i run ```htop``` i see: &quot;Tasks: 83, 3030 thr, 41 running&quot;.\r\nAnd ``` ps hUH p &lt;JETTY PROCESS PID&gt; | wc -l ``` gives me 2876 jetty threads count.\r\nIs it correct to compare these numbers with ```jetty.threadPool.maxThreads```? If so, why maxThreads doesn&#39;t limit number of threads? And why there is such a big gap between existing and running threads?\r\n\r\nTo be clear, i expect Jetty to consume less memory. I assumed that huge amount of threads can affect it. Because at the moment jetty consumes almost all available memory (120/125G) but OOM is never happens.\r\nI may not understand some of the basic concepts, but I would be grateful if you could help me figure it out.","title":"Why does Jetty consume more threads than specified in start.ini file?","body":"<p>I have my java spring application running inside Jetty 9.48.\nThese are the properties in start.ini file:</p>\n<pre><code>jetty.http.acceptors=30\n# jetty.http.selectors=200\n\njetty.threadPool.minThreads=200\njetty.threadPool.maxThreads=1000\njetty.threadPool.idleTimeout=5000\n\njetty.http.host=0.0.0.0\njetty.http.port=8080\njetty.http.connectTimeout=2000\njetty.http.reuseAddress=true\n\njetty.lowresources.accepting=false\n\njetty.output.buffer.size=32768\njetty.httpConfig.outputAggregationSize=32768\njetty.httpConfig.requestHeaderSize=16384\njetty.httpConfig.responseHeaderSize=16384\njetty.httpConfig.sendServerVersion=false\njetty.httpConfig.sendDateHeader=false\n\njetty.server.stopAtShutdown=true\njetty.server.stopTimeout=5000\njetty.server.dumpAfterStart=false\njetty.server.dumpBeforeStop=false\n\njetty.deploy.scanInterval=0\n\njetty.console-capture.dir=/yyyy_mm_dd.stderrout.log\njetty.console-capture.retainDays=90\njetty.console-capture.timezone=UTC\n\njetty.debug.retainDays=90\n\n</code></pre>\n<p>When i run <code>htop</code> i see: &quot;Tasks: 83, 3030 thr, 41 running&quot;.\nAnd <code>ps hUH p &lt;JETTY PROCESS PID&gt; | wc -l</code> gives me 2876 jetty threads count.\nIs it correct to compare these numbers with <code>jetty.threadPool.maxThreads</code>? If so, why maxThreads doesn't limit number of threads? And why there is such a big gap between existing and running threads?</p>\n<p>To be clear, i expect Jetty to consume less memory. I assumed that huge amount of threads can affect it. Because at the moment jetty consumes almost all available memory (120/125G) but OOM is never happens.\nI may not understand some of the basic concepts, but I would be grateful if you could help me figure it out.</p>\n"},{"tags":["java","generics"],"comments":[{"owner":{"account_id":6651855,"reputation":224850,"user_id":5133585,"accept_rate":96,"display_name":"Sweeper"},"score":0,"creation_date":1669134784,"post_id":74535984,"comment_id":131573046,"body_markdown":"In the second line in the call site, you say `ImmutableMap&lt;K, ImmutableList&lt;V&gt;&gt; mapped`. Where is `K` and `V` declared?","body":"In the second line in the call site, you say <code>ImmutableMap&lt;K, ImmutableList&lt;V&gt;&gt; mapped</code>. Where is <code>K</code> and <code>V</code> declared?"},{"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"score":0,"creation_date":1669135426,"post_id":74535984,"comment_id":131573293,"body_markdown":"`?` means what it means - it doesn&#39;t magically update itself to the effective bounds of the thing you&#39;re using ? for. This is unfortunate, but, as far as I know, a java limitation. You may have to just accept it here, cast to a raw type, and sort from there - and use `@SuppressWarnings` to get rid of the warning this cast would cause.","body":"<code>?</code> means what it means - it doesn&#39;t magically update itself to the effective bounds of the thing you&#39;re using ? for. This is unfortunate, but, as far as I know, a java limitation. You may have to just accept it here, cast to a raw type, and sort from there - and use <code>@SuppressWarnings</code> to get rid of the warning this cast would cause."},{"owner":{"account_id":27014871,"reputation":21,"user_id":20573912,"display_name":"Ankush Shaw"},"score":0,"creation_date":1669203305,"post_id":74535984,"comment_id":131589974,"body_markdown":"My bad. Fixed it now @Sweeper","body":"My bad. Fixed it now @Sweeper"}],"owner":{"account_id":27014871,"reputation":21,"user_id":20573912,"display_name":"Ankush Shaw"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":109,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"answer_count":0,"score":2,"last_activity_date":1669203237,"creation_date":1669134496,"question_id":74535984,"body_markdown":"I have following classes. I&#39;m not able to satisfy the generic types.\r\nPlease help me understand the issue.\r\n\r\nI have following classes. I&#39;m not able to satisfy the generic types.\r\nPlease help me understand the issue.\r\n\r\n```\r\n// Requirement is that each implementation of MappedKey should also be sortable. Hence should implement Comparable&lt;ConcreteType&gt;.\r\npublic interface MappedKey&lt;T extends MappedKey&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\r\n  String displayName();\r\n}\r\n```\r\n\r\n```\r\npublic interface DataMapper&lt;K extends MappedKey&lt;K&gt;, V&gt; {\r\n  ImmutableMap&lt;K, ImmutableList&lt;V&gt;&gt; map(List&lt;V&gt; data, Message config);\r\n}\r\n```\r\n\r\n```\r\n// Call site\r\nMap&lt;MapperType, DataMapper&lt;?, Country&gt;&gt; mappers = getMappers();\r\nImmutableMap&lt;? extends MappedKey&lt;?&gt;, ImmutableList&lt;Country&gt;&gt; mapped = mappers.get(MAPPER_TYPE).map(getData());\r\n\r\n// Here I want to sort the keys returned by mapper. \r\nList&lt;MappedKey&lt;?&gt;&gt; keys = new ArrayList&lt;&gt;(mapped.keySet()); // Note that this doesn&#39;t throw error because type parameter K in DataMapper definition extends MappedKey&lt;K&gt;.\r\n\r\n\r\nCollections.sort(keys);\r\n```\r\n\r\nOn running I get below error. My reasoning is that types are satisfied. Since `MappedKey&lt;?&gt;` implements `Comparable&lt;? super T#1&gt;`, `T#1 = MappedKey&lt;?&gt;` satisfy all constraint. What am I missing here? Thank you\r\n\r\n```\r\nno suitable method found for sort(List&lt;MappedKey&lt;?&gt;&gt;)\r\n    Collections.sort(keys);\r\n               ^\r\n    method Collections.&lt;T#1&gt;sort(List&lt;T#1&gt;) is not applicable\r\n      (inference variable T#1 has incompatible bounds\r\n        equality constraints: MappedKey&lt;?&gt;\r\n        upper bounds: CAP#1,Comparable&lt;? super T#1&gt;)\r\n    method Collections.&lt;T#2&gt;sort(List&lt;T#2&gt;,Comparator&lt;? super T#2&gt;) is not applicable\r\n      (cannot infer type-variable(s) T#2\r\n        (actual and formal argument lists differ in length))\r\n  where T#1,T#2 are type-variables:\r\n    T#1 extends Comparable&lt;? super T#1&gt; declared in method &lt;T#1&gt;sort(List&lt;T#1&gt;)\r\n    T#2 extends Object declared in method &lt;T#2&gt;sort(List&lt;T#2&gt;,Comparator&lt;? super T#2&gt;)\r\n  where CAP#1 is a fresh type-variable:\r\n    CAP#1 extends Comparable&lt;CAP#1&gt; from capture of ?\r\n```\r\n\r\n\r\n-------------------------------\r\n\r\nError on trying what @Sweeper suggested in the later half of his/her answer.\r\n\r\n```\r\nList&lt;? extends MappedKey&lt;?&gt;&gt; keys = sort(new ArrayList&lt;&gt;(rowMapped.keySet()));\r\n                                        ^\r\n  required: List&lt;MappedKey&lt;K&gt;&gt;\r\n  found:    ArrayList&lt;CAP#1&gt;\r\n  reason: inference variable E has incompatible bounds\r\n    equality constraints: MappedKey&lt;K&gt;\r\n    lower bounds: CAP#2\r\n  where K,E are type-variables:\r\n    K extends MappedKey&lt;K&gt; declared in method &lt;K&gt;sort(List&lt;MappedKey&lt;K&gt;&gt;)\r\n    E extends Object declared in class ArrayList\r\n  where CAP#1,CAP#2 are fresh type-variables:\r\n    CAP#1 extends MappedKey&lt;?&gt; from capture of ? extends MappedKey&lt;?&gt;\r\n    CAP#2 extends MappedKey&lt;?&gt; from capture of ? extends MappedKey&lt;?&gt;\r\n```\r\n","title":"Java incompatible type for type parameter in presence of wildcards","body":"<p>I have following classes. I'm not able to satisfy the generic types.\nPlease help me understand the issue.</p>\n<p>I have following classes. I'm not able to satisfy the generic types.\nPlease help me understand the issue.</p>\n<pre><code>// Requirement is that each implementation of MappedKey should also be sortable. Hence should implement Comparable&lt;ConcreteType&gt;.\npublic interface MappedKey&lt;T extends MappedKey&lt;T&gt;&gt; extends Comparable&lt;T&gt; {\n  String displayName();\n}\n</code></pre>\n<pre><code>public interface DataMapper&lt;K extends MappedKey&lt;K&gt;, V&gt; {\n  ImmutableMap&lt;K, ImmutableList&lt;V&gt;&gt; map(List&lt;V&gt; data, Message config);\n}\n</code></pre>\n<pre><code>// Call site\nMap&lt;MapperType, DataMapper&lt;?, Country&gt;&gt; mappers = getMappers();\nImmutableMap&lt;? extends MappedKey&lt;?&gt;, ImmutableList&lt;Country&gt;&gt; mapped = mappers.get(MAPPER_TYPE).map(getData());\n\n// Here I want to sort the keys returned by mapper. \nList&lt;MappedKey&lt;?&gt;&gt; keys = new ArrayList&lt;&gt;(mapped.keySet()); // Note that this doesn't throw error because type parameter K in DataMapper definition extends MappedKey&lt;K&gt;.\n\n\nCollections.sort(keys);\n</code></pre>\n<p>On running I get below error. My reasoning is that types are satisfied. Since <code>MappedKey&lt;?&gt;</code> implements <code>Comparable&lt;? super T#1&gt;</code>, <code>T#1 = MappedKey&lt;?&gt;</code> satisfy all constraint. What am I missing here? Thank you</p>\n<pre><code>no suitable method found for sort(List&lt;MappedKey&lt;?&gt;&gt;)\n    Collections.sort(keys);\n               ^\n    method Collections.&lt;T#1&gt;sort(List&lt;T#1&gt;) is not applicable\n      (inference variable T#1 has incompatible bounds\n        equality constraints: MappedKey&lt;?&gt;\n        upper bounds: CAP#1,Comparable&lt;? super T#1&gt;)\n    method Collections.&lt;T#2&gt;sort(List&lt;T#2&gt;,Comparator&lt;? super T#2&gt;) is not applicable\n      (cannot infer type-variable(s) T#2\n        (actual and formal argument lists differ in length))\n  where T#1,T#2 are type-variables:\n    T#1 extends Comparable&lt;? super T#1&gt; declared in method &lt;T#1&gt;sort(List&lt;T#1&gt;)\n    T#2 extends Object declared in method &lt;T#2&gt;sort(List&lt;T#2&gt;,Comparator&lt;? super T#2&gt;)\n  where CAP#1 is a fresh type-variable:\n    CAP#1 extends Comparable&lt;CAP#1&gt; from capture of ?\n</code></pre>\n<hr />\n<p>Error on trying what @Sweeper suggested in the later half of his/her answer.</p>\n<pre><code>List&lt;? extends MappedKey&lt;?&gt;&gt; keys = sort(new ArrayList&lt;&gt;(rowMapped.keySet()));\n                                        ^\n  required: List&lt;MappedKey&lt;K&gt;&gt;\n  found:    ArrayList&lt;CAP#1&gt;\n  reason: inference variable E has incompatible bounds\n    equality constraints: MappedKey&lt;K&gt;\n    lower bounds: CAP#2\n  where K,E are type-variables:\n    K extends MappedKey&lt;K&gt; declared in method &lt;K&gt;sort(List&lt;MappedKey&lt;K&gt;&gt;)\n    E extends Object declared in class ArrayList\n  where CAP#1,CAP#2 are fresh type-variables:\n    CAP#1 extends MappedKey&lt;?&gt; from capture of ? extends MappedKey&lt;?&gt;\n    CAP#2 extends MappedKey&lt;?&gt; from capture of ? extends MappedKey&lt;?&gt;\n</code></pre>\n"},{"tags":["java","spring-security","jwt","jetty","spring-filter"],"comments":[{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1669112637,"post_id":74524192,"comment_id":131564469,"body_markdown":"Why are you not using the built in JWT features of spring security? Writing custom security is bad practice","body":"Why are you not using the built in JWT features of spring security? Writing custom security is bad practice"},{"owner":{"account_id":16754134,"reputation":174,"user_id":13639031,"display_name":"Jet Ezra"},"score":0,"creation_date":1669116640,"post_id":74524192,"comment_id":131565917,"body_markdown":"I get, but I wanted some minimal features that&#39;s why am using this mode, just focus on helping me @Toerktumlare, thanks in advance","body":"I get, but I wanted some minimal features that&#39;s why am using this mode, just focus on helping me @Toerktumlare, thanks in advance"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1669148350,"post_id":74524192,"comment_id":131577516,"body_markdown":"I am helping you, im telling you to read the spring docs on how to implement the handling of JWTs in a secure manor. Im not going to help you do bad practices.","body":"I am helping you, im telling you to read the spring docs on how to implement the handling of JWTs in a secure manor. Im not going to help you do bad practices."},{"owner":{"account_id":16754134,"reputation":174,"user_id":13639031,"display_name":"Jet Ezra"},"score":0,"creation_date":1669205252,"post_id":74524192,"comment_id":131590653,"body_markdown":"You realize am using Spring 2.6 which does not have the mentioned features!!","body":"You realize am using Spring 2.6 which does not have the mentioned features!!"},{"owner":{"account_id":2064278,"reputation":13138,"user_id":1840146,"accept_rate":86,"display_name":"Toerktumlare"},"score":0,"creation_date":1669209633,"post_id":74524192,"comment_id":131592134,"body_markdown":"What are you talking about? Spring security has had support for handling JWT since 2018. You clearly havn’t read the docs","body":"What are you talking about? Spring security has had support for handling JWT since 2018. You clearly havn’t read the docs"},{"owner":{"account_id":16754134,"reputation":174,"user_id":13639031,"display_name":"Jet Ezra"},"score":0,"creation_date":1669287499,"post_id":74524192,"comment_id":131612848,"body_markdown":"Please share where I can read, coz I navigated the docs and could not find it","body":"Please share where I can read, coz I navigated the docs and could not find it"}],"answers":[{"comments":[{"owner":{"account_id":16754134,"reputation":174,"user_id":13639031,"display_name":"Jet Ezra"},"score":0,"creation_date":1669203895,"post_id":74546129,"comment_id":131590168,"body_markdown":"Please show me how, in the rest of the program, I have managed to override my responses, but on the filters, am still getting an issue, show me how to override this in the filter-level","body":"Please show me how, in the rest of the program, I have managed to override my responses, but on the filters, am still getting an issue, show me how to override this in the filter-level"}],"tags":[],"owner":{"account_id":406289,"reputation":47511,"user_id":775715,"accept_rate":100,"display_name":"Joakim Erdfelt"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669203200,"creation_date":1669203200,"answer_id":74546129,"question_id":74524192,"body_markdown":"The response you are seeing is the default Servlet ERROR dispatch handling (see DispatcherType.ERROR)\r\n\r\nUse the standard Servlet error-page mappings to specify your own custom mappings for handling errors.  A mapping can be based on status codes, throwables, and more (see Servlet descriptor and `&lt;error-page&gt;` mappings)","title":"While using Jetty as a server, how do I return a clear json 401 error when JWT Filter blocks unauthenticated users in Spring security?","body":"<p>The response you are seeing is the default Servlet ERROR dispatch handling (see DispatcherType.ERROR)</p>\n<p>Use the standard Servlet error-page mappings to specify your own custom mappings for handling errors.  A mapping can be based on status codes, throwables, and more (see Servlet descriptor and <code>&lt;error-page&gt;</code> mappings)</p>\n"}],"owner":{"account_id":16754134,"reputation":174,"user_id":13639031,"display_name":"Jet Ezra"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":161,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"answer_count":1,"score":-1,"last_activity_date":1669203200,"creation_date":1669060155,"question_id":74524192,"body_markdown":"I have my Spring Security bean which is doing well in blocking unauthorised requests, while using Tomcat, the error response is a clean exception with the message but with Jetty, a `text/html` is returned even in postman as shown below.\r\n[![enter image description here](https://i.stack.imgur.com/dQssm.png)](https://i.stack.imgur.com/dQssm.png)\r\nAnd my `doFilterInternal` JWT Filter is as below.\r\n```Java\r\npublic class JwtFilter extends OncePerRequestFilter {\r\n\r\n    @Autowired\r\n    private JWTUtility jwtUtility;\r\n\r\n    @Autowired\r\n    private UserServiceImpl userService;\r\n    private final ObjectMapper mapper;\r\n\r\n\r\n    @Override\r\n    protected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException {\r\n        String authorization = httpServletRequest.getHeader(&quot;Authorization&quot;);\r\n        String token = null;\r\n        String userName = null;\r\n\r\n        if(null != authorization &amp;&amp; authorization.startsWith(&quot;Bearer &quot;)) {\r\n            token = authorization.substring(7);\r\n            userName = jwtUtility.getUsernameFromToken(token);\r\n        }\r\n\r\n        if(null != userName &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\r\n            UserDetails userDetails\r\n                    = userService.loadUserByUsername(userName);\r\n            try {\r\n                if (jwtUtility.validateToken(token, userDetails)) {\r\n                    UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken\r\n                            = new UsernamePasswordAuthenticationToken(userDetails,\r\n                            null, userDetails.getAuthorities());\r\n\r\n                    usernamePasswordAuthenticationToken.setDetails(\r\n                            new WebAuthenticationDetailsSource().buildDetails(httpServletRequest)\r\n                    );\r\n\r\n                    SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\r\n                }\r\n            } catch (Exception e){\r\n//                System.out.println(&quot;Hello world&quot;);\r\n                Map&lt;String, Object&gt; errorDetails = new HashMap&lt;&gt;();\r\n                errorDetails.put(&quot;ACCESS_DENIED&quot;, e.getMessage());\r\n                httpServletResponse.setStatus(HttpStatus.FORBIDDEN.value());\r\n                httpServletResponse.setContentType(String.valueOf(MediaType.APPLICATION_JSON));\r\n                mapper.writeValue(httpServletResponse.getWriter(), errorDetails);\r\n                return;\r\n            }\r\n\r\n        }\r\n\r\n        filterChain.doFilter(httpServletRequest, httpServletResponse);\r\n    }\r\n}\r\n```\r\nWith Tomcat as my server, everything works as expected, but I have shifted to Jetty Server, how best can I replace this code below to work the same for Jetty?\r\n```Java\r\nMap&lt;String, Object&gt; errorDetails = new HashMap&lt;&gt;();\r\n                errorDetails.put(&quot;ACCESS_DENIED&quot;, e.getMessage());\r\n                httpServletResponse.setStatus(HttpStatus.FORBIDDEN.value());\r\n                httpServletResponse.setContentType(String.valueOf(MediaType.APPLICATION_JSON));\r\n                mapper.writeValue(httpServletResponse.getWriter(), errorDetails);\r\n                return;\r\n```\r\nMy expected response when the user has not sent in their jwt is as follows:-\r\n```JSON\r\nHTTP 401 Unauthorized\r\n{\r\n    &quot;ACCESS_DENIED&quot;: &quot;Some error message here&quot;,\r\n}\r\n```\r\nOtherwise, the request should go through therefore the filter should not return anything.\r\n\r\nNote: **Please feel free to edit this question to make it better as I have more friends trying to solve the same issue.**\r\n","title":"While using Jetty as a server, how do I return a clear json 401 error when JWT Filter blocks unauthenticated users in Spring security?","body":"<p>I have my Spring Security bean which is doing well in blocking unauthorised requests, while using Tomcat, the error response is a clean exception with the message but with Jetty, a <code>text/html</code> is returned even in postman as shown below.\n<a href=\"https://i.stack.imgur.com/dQssm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dQssm.png\" alt=\"enter image description here\" /></a>\nAnd my <code>doFilterInternal</code> JWT Filter is as below.</p>\n<pre><code>public class JwtFilter extends OncePerRequestFilter {\n\n    @Autowired\n    private JWTUtility jwtUtility;\n\n    @Autowired\n    private UserServiceImpl userService;\n    private final ObjectMapper mapper;\n\n\n    @Override\n    protected void doFilterInternal(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, FilterChain filterChain) throws ServletException, IOException {\n        String authorization = httpServletRequest.getHeader(&quot;Authorization&quot;);\n        String token = null;\n        String userName = null;\n\n        if(null != authorization &amp;&amp; authorization.startsWith(&quot;Bearer &quot;)) {\n            token = authorization.substring(7);\n            userName = jwtUtility.getUsernameFromToken(token);\n        }\n\n        if(null != userName &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {\n            UserDetails userDetails\n                    = userService.loadUserByUsername(userName);\n            try {\n                if (jwtUtility.validateToken(token, userDetails)) {\n                    UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken\n                            = new UsernamePasswordAuthenticationToken(userDetails,\n                            null, userDetails.getAuthorities());\n\n                    usernamePasswordAuthenticationToken.setDetails(\n                            new WebAuthenticationDetailsSource().buildDetails(httpServletRequest)\n                    );\n\n                    SecurityContextHolder.getContext().setAuthentication(usernamePasswordAuthenticationToken);\n                }\n            } catch (Exception e){\n//                System.out.println(&quot;Hello world&quot;);\n                Map&lt;String, Object&gt; errorDetails = new HashMap&lt;&gt;();\n                errorDetails.put(&quot;ACCESS_DENIED&quot;, e.getMessage());\n                httpServletResponse.setStatus(HttpStatus.FORBIDDEN.value());\n                httpServletResponse.setContentType(String.valueOf(MediaType.APPLICATION_JSON));\n                mapper.writeValue(httpServletResponse.getWriter(), errorDetails);\n                return;\n            }\n\n        }\n\n        filterChain.doFilter(httpServletRequest, httpServletResponse);\n    }\n}\n</code></pre>\n<p>With Tomcat as my server, everything works as expected, but I have shifted to Jetty Server, how best can I replace this code below to work the same for Jetty?</p>\n<pre><code>Map&lt;String, Object&gt; errorDetails = new HashMap&lt;&gt;();\n                errorDetails.put(&quot;ACCESS_DENIED&quot;, e.getMessage());\n                httpServletResponse.setStatus(HttpStatus.FORBIDDEN.value());\n                httpServletResponse.setContentType(String.valueOf(MediaType.APPLICATION_JSON));\n                mapper.writeValue(httpServletResponse.getWriter(), errorDetails);\n                return;\n</code></pre>\n<p>My expected response when the user has not sent in their jwt is as follows:-</p>\n<pre><code>HTTP 401 Unauthorized\n{\n    &quot;ACCESS_DENIED&quot;: &quot;Some error message here&quot;,\n}\n</code></pre>\n<p>Otherwise, the request should go through therefore the filter should not return anything.</p>\n<p>Note: <strong>Please feel free to edit this question to make it better as I have more friends trying to solve the same issue.</strong></p>\n"},{"tags":["java","spring","spring-security","authorization","spring-annotations"],"comments":[{"owner":{"account_id":438909,"reputation":23723,"user_id":827480,"accept_rate":61,"display_name":"Eric B."},"score":1,"creation_date":1395434381,"post_id":19303584,"comment_id":34353527,"body_markdown":"Any luck solving this?  I have the same issue today.","body":"Any luck solving this?  I have the same issue today."},{"owner":{"account_id":1946533,"reputation":2241,"user_id":1751547,"accept_rate":50,"display_name":"user1751547"},"score":0,"creation_date":1396995882,"post_id":19303584,"comment_id":35037430,"body_markdown":"No, I bit the bullet and used the strings =(","body":"No, I bit the bullet and used the strings =("}],"answers":[{"tags":[],"owner":{"account_id":438909,"reputation":23723,"user_id":827480,"accept_rate":61,"display_name":"Eric B."},"comment_count":0,"down_vote_count":1,"up_vote_count":13,"is_accepted":false,"score":12,"last_activity_date":1423474140,"creation_date":1397065953,"answer_id":22970290,"question_id":19303584,"body_markdown":"Facing the same issue, I ended up with a hybrid solution.  I am using Spring-El and a custom bean to provide my own `hasPermission()` method which accepts an Enum.  Given that Spring does an automatic `string-&gt;enum` conversion, at runtime, I will get a runtime exception that a particular enum does not exist if there is a typo in the string.  Not the ideal solution (would have rather had something that failed at compile-time), but an acceptable compromise.  It gives me some semi-type safety.\r\n\r\n\r\n\r\n\r\n    @Component(&quot;securityService&quot;)\r\n    public class SecurityService {\r\n    \tpublic boolean hasPermission( Permission...permissions){\r\n    \t\t// loop over each submitted role and validate the user has at least one\r\n    \t\tCollection&lt;? extends GrantedAuthority&gt; userAuthorities = SecurityContextHolder.getContext().getAuthentication().getAuthorities();\r\n    \t\tfor( Permission permission : permissions){\r\n    \t\t\tif( userAuthorities.contains( new SimpleGrantedAuthority(permission.name())))\r\n    \t\t\t\treturn true;\r\n    \t\t}\r\n    \t\t\r\n    \t\t// no matching role found\r\n    \t\treturn false;\r\n    \t}\r\n    }\r\n\r\n\r\nUsed as follows:\r\n\r\n\t@PreAuthorize(&quot;@securityService.hasPermission({&#39;USER_ADD&#39;})&quot;)\r\n\tpublic User addUser(User user){\r\n\t\t// create the user\r\n\t\treturn userRepository.save( user );\r\n\t}\r\n\r\n\r\nWhere Permission is just a normal enum definition:\r\n\r\n    public enum Permission {\r\n    \tUSER_LIST,\r\n    \tUSER_EDIT,\r\n    \tUSER_ADD,\r\n    \tUSER_ROLE_EDIT\r\n    }\r\n\r\n\r\nHope this can help someone else out in the future.","title":"Spring Security @PreAuthorization pass enums in directly","body":"<p>Facing the same issue, I ended up with a hybrid solution.  I am using Spring-El and a custom bean to provide my own <code>hasPermission()</code> method which accepts an Enum.  Given that Spring does an automatic <code>string-&gt;enum</code> conversion, at runtime, I will get a runtime exception that a particular enum does not exist if there is a typo in the string.  Not the ideal solution (would have rather had something that failed at compile-time), but an acceptable compromise.  It gives me some semi-type safety.</p>\n\n<pre><code>@Component(\"securityService\")\npublic class SecurityService {\n    public boolean hasPermission( Permission...permissions){\n        // loop over each submitted role and validate the user has at least one\n        Collection&lt;? extends GrantedAuthority&gt; userAuthorities = SecurityContextHolder.getContext().getAuthentication().getAuthorities();\n        for( Permission permission : permissions){\n            if( userAuthorities.contains( new SimpleGrantedAuthority(permission.name())))\n                return true;\n        }\n\n        // no matching role found\n        return false;\n    }\n}\n</code></pre>\n\n<p>Used as follows:</p>\n\n<pre><code>@PreAuthorize(\"@securityService.hasPermission({'USER_ADD'})\")\npublic User addUser(User user){\n    // create the user\n    return userRepository.save( user );\n}\n</code></pre>\n\n<p>Where Permission is just a normal enum definition:</p>\n\n<pre><code>public enum Permission {\n    USER_LIST,\n    USER_EDIT,\n    USER_ADD,\n    USER_ROLE_EDIT\n}\n</code></pre>\n\n<p>Hope this can help someone else out in the future.</p>\n"},{"comments":[{"owner":{"account_id":1531824,"reputation":3794,"user_id":1428862,"display_name":"Scott Carlson"},"score":1,"creation_date":1556034652,"post_id":42766473,"comment_id":98296783,"body_markdown":"When I try this way I get a compilation error of &quot;attribute value must be constant&quot;.  Did you get around that?","body":"When I try this way I get a compilation error of &quot;attribute value must be constant&quot;.  Did you get around that?"},{"owner":{"account_id":6482662,"reputation":677,"user_id":5019199,"display_name":"e.g78"},"score":0,"creation_date":1556038791,"post_id":42766473,"comment_id":98298926,"body_markdown":"you get a compilation error if you concat with MyEnum.Names.ENUM_A ? Have you defined it as public  final static String as in the sample ?","body":"you get a compilation error if you concat with MyEnum.Names.ENUM_A ? Have you defined it as public  final static String as in the sample ?"},{"owner":{"account_id":1149936,"reputation":14493,"user_id":1131857,"accept_rate":76,"display_name":"wutzebaer"},"score":1,"creation_date":1576759482,"post_id":42766473,"comment_id":105007110,"body_markdown":"doesn&#39;t this miss the point, that i want to define my role-names only once? I have to update the static names manually","body":"doesn&#39;t this miss the point, that i want to define my role-names only once? I have to update the static names manually"},{"owner":{"account_id":6482662,"reputation":677,"user_id":5019199,"display_name":"e.g78"},"score":0,"creation_date":1576769972,"post_id":42766473,"comment_id":105012914,"body_markdown":"That way you can define only once, in the enum","body":"That way you can define only once, in the enum"}],"tags":[],"owner":{"account_id":6482662,"reputation":677,"user_id":5019199,"display_name":"e.g78"},"comment_count":4,"down_vote_count":1,"up_vote_count":4,"is_accepted":false,"score":3,"last_activity_date":1489416272,"creation_date":1489416272,"answer_id":42766473,"question_id":19303584,"body_markdown":"I did that way : \r\n\r\n1 - Define your enum referencing a public final static String &quot;VALUE&quot; like this\r\n\r\n    public enum MyEnum {\r\n    \tENUM_A(Names.ENUM_A);\r\n    \r\n        private String value;\r\n              \r\n        private MyEnum (String value) {\r\n            this.value = value;\r\n        }\r\n    \r\n        public static class Names {\r\n    \t\t\r\n        \tpublic  final static String ENUM_A = &quot;ENUM_A&quot;;\r\n        }\r\n    }\r\n\r\n2 - Concat MyEnum values in @PreAuthorize\r\n\r\n    @PreAuthorize(&quot;hasPermission(&#39;myDomain&#39;, &#39;&quot;+ MyEnum.Names.ENUM_A+&quot;&#39;)&quot;)","title":"Spring Security @PreAuthorization pass enums in directly","body":"<p>I did that way : </p>\n\n<p>1 - Define your enum referencing a public final static String \"VALUE\" like this</p>\n\n<pre><code>public enum MyEnum {\n    ENUM_A(Names.ENUM_A);\n\n    private String value;\n\n    private MyEnum (String value) {\n        this.value = value;\n    }\n\n    public static class Names {\n\n        public  final static String ENUM_A = \"ENUM_A\";\n    }\n}\n</code></pre>\n\n<p>2 - Concat MyEnum values in @PreAuthorize</p>\n\n<pre><code>@PreAuthorize(\"hasPermission('myDomain', '\"+ MyEnum.Names.ENUM_A+\"')\")\n</code></pre>\n"},{"comments":[{"owner":{"account_id":5962208,"reputation":370,"user_id":4687028,"display_name":"Tazaf"},"score":0,"creation_date":1619175013,"post_id":51709252,"comment_id":118831393,"body_markdown":"Although it is indeed not a &quot;one liner&quot; magical answer, it still propose an excellent solution to add custom security annotation !\n\nI&#39;ve juste followed the implementation logic and it was not that hard to understand the overall logic.","body":"Although it is indeed not a &quot;one liner&quot; magical answer, it still propose an excellent solution to add custom security annotation !  I&#39;ve juste followed the implementation logic and it was not that hard to understand the overall logic."}],"tags":[],"owner":{"account_id":3530468,"reputation":546,"user_id":2950196,"display_name":"Dima Korn"},"comment_count":1,"down_vote_count":0,"up_vote_count":20,"is_accepted":false,"score":20,"last_activity_date":1533563489,"creation_date":1533563489,"answer_id":51709252,"question_id":19303584,"body_markdown":"Indeed you can implement a custom strongly typed security annotation, though this is rather bothersome.\r\nDeclare your annotation\r\n\r\n    enum Permission {\r\n        USER_LIST,\r\n        USER_EDIT,\r\n        USER_ADD,\r\n        USER_ROLE_EDIT\r\n    }\r\n\r\n    @Target(ElementType.METHOD)\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @interface Permissions {\r\n        Permission[] value();\r\n    }\r\n\r\n\r\nDeclare the custom implementation of `org.springframework.security.access.ConfigAttribute` to be used by security pipeline\r\n\r\n    class SecurityAttribute implements ConfigAttribute {\r\n        private final List&lt;Permission&gt; permissions;\r\n    \r\n        public SecurityAttribute(List&lt;Permission&gt; permissions) {\r\n            this.permissions = permissions;\r\n        }\r\n        \r\n        @Override\r\n        public String getAttribute() {\r\n            return permissions.stream().map(p -&gt; p.name()).collect(Collectors.joining(&quot;,&quot;));\r\n        }\r\n    }\r\nDeclare the custom implementation of  `org.springframework.security.access.method.MethodSecurityMetadataSource` to create the instances of `SecurityAttribute` from annotations\r\n\r\n    class SecurityMetadataSource extends AbstractMethodSecurityMetadataSource {\r\n        @Override\r\n        public Collection&lt;ConfigAttribute&gt; getAttributes(Method method, Class&lt;?&gt; targetClass) {\r\n    \r\n          //consult https://github.com/spring-projects/spring-security/blob/master/core/src/main/java/org/springframework/security/access/prepost/PrePostAnnotationSecurityMetadataSource.java\r\n          //to implement findAnnotation  \r\n          Permissions annotation = findAnnotation(method, targetClass, Permissions.class);\r\n            if (annotation != null) {\r\n                return Collections.singletonList(new SecurityAttribute(asList(annotation.value())));\r\n            }\r\n            return Collections.emptyList();\r\n        }\r\n    \r\n        @Override\r\n        public Collection&lt;ConfigAttribute&gt; getAllConfigAttributes() {\r\n            return null;\r\n        } \r\n        \r\n    }\r\n\r\nAt last declare the custom implementation `org.springframework.security.access.AccessDecisionVoter`\r\n\r\n    public class PermissionVoter implements AccessDecisionVoter&lt;MethodInvocation&gt; {\r\n        @Override\r\n        public boolean supports(ConfigAttribute attribute) {\r\n            return attribute instanceof SecurityAttribute;\r\n        }\r\n    \r\n        @Override\r\n        public boolean supports(Class&lt;?&gt; clazz) {\r\n            return MethodInvocation.class.isAssignableFrom(clazz);\r\n        }\r\n    \r\n        @Override\r\n        public int vote(Authentication authentication, MethodInvocation object, Collection&lt;ConfigAttribute&gt; attributes) {\r\n            Optional&lt;SecurityAttribute&gt; securityAttribute = attributes.stream()\r\n                    .filter(attr -&gt; attr instanceof SecurityAttribute).map(SecurityAttribute.class::cast).findFirst();\r\n            if(!securityAttribute.isPresent()){\r\n                return AccessDecisionVoter.ACCESS_ABSTAIN;\r\n            }\r\n            //authorize your principal from authentication object\r\n            //against permissions and return ACCESS_GRANTED or ACCESS_DENIED\r\n    \r\n        }\r\n    \r\n    }\r\nand now bring them all together in your `MethodSecurityConfig`\r\n\r\n    @Configuration\r\n    @EnableGlobalMethodSecurity\r\n    class MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\r\n    \r\n        @Override\r\n        protected MethodSecurityMetadataSource customMethodSecurityMetadataSource() {\r\n            return new ScpSecurityMetadataSource();\r\n        }\r\n    \r\n        @Override\r\n        protected AccessDecisionManager accessDecisionManager() {\r\n            return new AffirmativeBased(Collections.singletonList(new PermissionVoter()));\r\n        }\r\n    }","title":"Spring Security @PreAuthorization pass enums in directly","body":"<p>Indeed you can implement a custom strongly typed security annotation, though this is rather bothersome.\nDeclare your annotation</p>\n\n<pre><code>enum Permission {\n    USER_LIST,\n    USER_EDIT,\n    USER_ADD,\n    USER_ROLE_EDIT\n}\n\n@Target(ElementType.METHOD)\n@Retention(RetentionPolicy.RUNTIME)\n@interface Permissions {\n    Permission[] value();\n}\n</code></pre>\n\n<p>Declare the custom implementation of <code>org.springframework.security.access.ConfigAttribute</code> to be used by security pipeline</p>\n\n<pre><code>class SecurityAttribute implements ConfigAttribute {\n    private final List&lt;Permission&gt; permissions;\n\n    public SecurityAttribute(List&lt;Permission&gt; permissions) {\n        this.permissions = permissions;\n    }\n\n    @Override\n    public String getAttribute() {\n        return permissions.stream().map(p -&gt; p.name()).collect(Collectors.joining(\",\"));\n    }\n}\n</code></pre>\n\n<p>Declare the custom implementation of  <code>org.springframework.security.access.method.MethodSecurityMetadataSource</code> to create the instances of <code>SecurityAttribute</code> from annotations</p>\n\n<pre><code>class SecurityMetadataSource extends AbstractMethodSecurityMetadataSource {\n    @Override\n    public Collection&lt;ConfigAttribute&gt; getAttributes(Method method, Class&lt;?&gt; targetClass) {\n\n      //consult https://github.com/spring-projects/spring-security/blob/master/core/src/main/java/org/springframework/security/access/prepost/PrePostAnnotationSecurityMetadataSource.java\n      //to implement findAnnotation  \n      Permissions annotation = findAnnotation(method, targetClass, Permissions.class);\n        if (annotation != null) {\n            return Collections.singletonList(new SecurityAttribute(asList(annotation.value())));\n        }\n        return Collections.emptyList();\n    }\n\n    @Override\n    public Collection&lt;ConfigAttribute&gt; getAllConfigAttributes() {\n        return null;\n    } \n\n}\n</code></pre>\n\n<p>At last declare the custom implementation <code>org.springframework.security.access.AccessDecisionVoter</code></p>\n\n<pre><code>public class PermissionVoter implements AccessDecisionVoter&lt;MethodInvocation&gt; {\n    @Override\n    public boolean supports(ConfigAttribute attribute) {\n        return attribute instanceof SecurityAttribute;\n    }\n\n    @Override\n    public boolean supports(Class&lt;?&gt; clazz) {\n        return MethodInvocation.class.isAssignableFrom(clazz);\n    }\n\n    @Override\n    public int vote(Authentication authentication, MethodInvocation object, Collection&lt;ConfigAttribute&gt; attributes) {\n        Optional&lt;SecurityAttribute&gt; securityAttribute = attributes.stream()\n                .filter(attr -&gt; attr instanceof SecurityAttribute).map(SecurityAttribute.class::cast).findFirst();\n        if(!securityAttribute.isPresent()){\n            return AccessDecisionVoter.ACCESS_ABSTAIN;\n        }\n        //authorize your principal from authentication object\n        //against permissions and return ACCESS_GRANTED or ACCESS_DENIED\n\n    }\n\n}\n</code></pre>\n\n<p>and now bring them all together in your <code>MethodSecurityConfig</code></p>\n\n<pre><code>@Configuration\n@EnableGlobalMethodSecurity\nclass MethodSecurityConfig extends GlobalMethodSecurityConfiguration {\n\n    @Override\n    protected MethodSecurityMetadataSource customMethodSecurityMetadataSource() {\n        return new ScpSecurityMetadataSource();\n    }\n\n    @Override\n    protected AccessDecisionManager accessDecisionManager() {\n        return new AffirmativeBased(Collections.singletonList(new PermissionVoter()));\n    }\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":1149936,"reputation":14493,"user_id":1131857,"accept_rate":76,"display_name":"wutzebaer"},"score":0,"creation_date":1576759931,"post_id":52188644,"comment_id":105007369,"body_markdown":"seems that spring security ignores these custom annotations","body":"seems that spring security ignores these custom annotations"},{"owner":{"account_id":1149936,"reputation":14493,"user_id":1131857,"accept_rate":76,"display_name":"wutzebaer"},"score":2,"creation_date":1576760055,"post_id":52188644,"comment_id":105007433,"body_markdown":"seem that `@Retention(RetentionPolicy.RUNTIME)` is missing, now it seems to work","body":"seem that <code>@Retention(RetentionPolicy.RUNTIME)</code> is missing, now it seems to work"}],"tags":[],"owner":{"account_id":1134029,"reputation":4995,"user_id":1119473,"accept_rate":60,"display_name":"Gondy"},"comment_count":2,"down_vote_count":0,"up_vote_count":16,"is_accepted":false,"score":16,"last_activity_date":1622089850,"creation_date":1536160853,"answer_id":52188644,"question_id":19303584,"body_markdown":"You can create static annotations like this:\r\n\r\n    @ReadPermission\r\n\r\nBy moving `@PreAuthorize` annotation to `@ReadPermission`definition:\r\n\r\n\r\n    @Inherited\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @PreAuthorize(&quot;hasRole(T(fully.qualified.Permission).READ.roleName())&quot;)\r\n    public @interface ReadPermission {\r\n        \r\n    }\r\n\r\n\r\nBenefit of this is, that you can then change Spring SPEL expression in one place, instead of modifying it on every method.\r\n\r\nOne more plus is, that you can use this annotation on Class level - every method then would be secured with this annotation. It&#39;s useful for AdminControllers etc..","title":"Spring Security @PreAuthorization pass enums in directly","body":"<p>You can create static annotations like this:</p>\n<pre><code>@ReadPermission\n</code></pre>\n<p>By moving <code>@PreAuthorize</code> annotation to <code>@ReadPermission</code>definition:</p>\n<pre><code>@Inherited\n@Retention(RetentionPolicy.RUNTIME)\n@PreAuthorize(&quot;hasRole(T(fully.qualified.Permission).READ.roleName())&quot;)\npublic @interface ReadPermission {\n    \n}\n</code></pre>\n<p>Benefit of this is, that you can then change Spring SPEL expression in one place, instead of modifying it on every method.</p>\n<p>One more plus is, that you can use this annotation on Class level - every method then would be secured with this annotation. It's useful for AdminControllers etc..</p>\n"},{"comments":[{"owner":{"account_id":2904275,"reputation":12430,"user_id":2490074,"accept_rate":62,"display_name":"Sarvar Nishonboyev"},"score":0,"creation_date":1658443933,"post_id":70044924,"comment_id":129059550,"body_markdown":"excillent answer","body":"excillent answer"}],"tags":[],"owner":{"account_id":22445773,"reputation":151,"user_id":16649714,"display_name":"cheladon"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1637402661,"creation_date":1637402661,"answer_id":70044924,"question_id":19303584,"body_markdown":"I created my own annotation, which gets enum in the parameters. In implemention an annotation, I created a method that gets all the roles specified in the annotation and verifies that the current user owns at least one of them. If none of the roles match, the program will throw an exception. \r\n\r\n**Enum:**\r\n\r\n    public enum MyRoles {\r\n        ADMIN(&quot;ROLE_ADMIN&quot;),\r\n        USER(&quot;ROLE_USER&quot;),\r\n        GUEST(&quot;ROLE_GUEST&quot;);\r\n    \r\n        private String name;\r\n    \r\n        private MyRoles(String name) {\r\n            this.name = name;\r\n        }\r\n    }\r\n\r\n**Annotation Interface:**\r\n\r\n    @Documented\r\n    @Retention(RetentionPolicy.RUNTIME)\r\n    @Target({ElementType.METHOD})\r\n    public @interface AllowedRoles {\r\n        MyRoles[] value();\r\n    }\r\n\r\n**Implementation of annotation:**\r\n\r\n    @Aspect\r\n    @Component\r\n    public class AllowedRolesAspect {\r\n        @Around(&quot;@annotation(com.myproject.annotations.AllowedRoles)&quot;)\r\n        public Object doSomething(ProceedingJoinPoint jp) throws Throwable {\r\n\r\n            Set&lt;MyRoles&gt; roles = Arrays.stream(((MethodSignature) jp.getSignature()).getMethod()\r\n                    .getAnnotation(AllowedRoles.class).value()).collect(Collectors.toSet());\r\n\r\n            HttpServletRequest httpServletRequest = getRequest();\r\n\r\n            for(MyRoles role : roles){\r\n                if(httpServletRequest.isUserInRole(role)){\r\n                    return jp.proceed();\r\n                }\r\n            }\r\n    \r\n            throw new AccessDeniedException(&quot;&quot;);\r\n        }\r\n    \r\n        private HttpServletRequest getRequest() {\r\n\r\n            ServletRequestAttributes servletRequestAttributes =\r\n                    (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\r\n\r\n            return servletRequestAttributes.getRequest();\r\n        }\r\n    }\r\n\r\n**Usage:**\r\n\r\n    @AllowedRoles({MyRoles.ADMIN, MyRoles.USER})\r\n    @GetMapping(&quot;/myrequest/{id}&quot;)\r\n    public MyResponse getResponse(\r\n            @PathVariable Long id\r\n    ) {\r\n        /*Do something...*/\r\n    }","title":"Spring Security @PreAuthorization pass enums in directly","body":"<p>I created my own annotation, which gets enum in the parameters. In implemention an annotation, I created a method that gets all the roles specified in the annotation and verifies that the current user owns at least one of them. If none of the roles match, the program will throw an exception.</p>\n<p><strong>Enum:</strong></p>\n<pre><code>public enum MyRoles {\n    ADMIN(&quot;ROLE_ADMIN&quot;),\n    USER(&quot;ROLE_USER&quot;),\n    GUEST(&quot;ROLE_GUEST&quot;);\n\n    private String name;\n\n    private MyRoles(String name) {\n        this.name = name;\n    }\n}\n</code></pre>\n<p><strong>Annotation Interface:</strong></p>\n<pre><code>@Documented\n@Retention(RetentionPolicy.RUNTIME)\n@Target({ElementType.METHOD})\npublic @interface AllowedRoles {\n    MyRoles[] value();\n}\n</code></pre>\n<p><strong>Implementation of annotation:</strong></p>\n<pre><code>@Aspect\n@Component\npublic class AllowedRolesAspect {\n    @Around(&quot;@annotation(com.myproject.annotations.AllowedRoles)&quot;)\n    public Object doSomething(ProceedingJoinPoint jp) throws Throwable {\n\n        Set&lt;MyRoles&gt; roles = Arrays.stream(((MethodSignature) jp.getSignature()).getMethod()\n                .getAnnotation(AllowedRoles.class).value()).collect(Collectors.toSet());\n\n        HttpServletRequest httpServletRequest = getRequest();\n\n        for(MyRoles role : roles){\n            if(httpServletRequest.isUserInRole(role)){\n                return jp.proceed();\n            }\n        }\n\n        throw new AccessDeniedException(&quot;&quot;);\n    }\n\n    private HttpServletRequest getRequest() {\n\n        ServletRequestAttributes servletRequestAttributes =\n                (ServletRequestAttributes) RequestContextHolder.getRequestAttributes();\n\n        return servletRequestAttributes.getRequest();\n    }\n}\n</code></pre>\n<p><strong>Usage:</strong></p>\n<pre><code>@AllowedRoles({MyRoles.ADMIN, MyRoles.USER})\n@GetMapping(&quot;/myrequest/{id}&quot;)\npublic MyResponse getResponse(\n        @PathVariable Long id\n) {\n    /*Do something...*/\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":11253290,"reputation":1289,"user_id":9167731,"display_name":"Semyon Kirekov"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669203069,"creation_date":1669203069,"answer_id":74546090,"question_id":19303584,"body_markdown":"I found this solution. It&#39;s kinda cumbersome but it&#39;s working.\r\n\r\n```java\r\npublic enum Type {\r\n        MASTER_ADMIN, ADMIN, ACCESS_ADMIN, PUBLISHER, EDITOR, AGENCY, VIEWER;\r\n\r\n        @Component(&quot;AccountRole&quot;)\r\n        @Getter\r\n        static class SpringComponent {\r\n            private final Type MASTER_ADMIN = Type.MASTER_ADMIN;\r\n            private final Type EDITOR = Type.EDITOR;\r\n            ...\r\n        }\r\n    }\r\n\r\n...\r\n\r\n@Service(&quot;AccountRoleAccess&quot;)\r\npublic class AccountRoleAccess {\r\n    public boolean hasAnyRole(Authentication authentication, AccountId id, AccountRole.Type... roles) {\r\n        ...\r\n    }\r\n}\r\n\r\n...\r\n\r\n@PreAuthorize(&quot;@AccountRoleAccess.hasAnyRole(authentication, #accountId, @AccountRole.MASTER_ADMIN, @AccountRole.EDITOR)&quot;)\r\n```\r\n\r\n","title":"Spring Security @PreAuthorization pass enums in directly","body":"<p>I found this solution. It's kinda cumbersome but it's working.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public enum Type {\n        MASTER_ADMIN, ADMIN, ACCESS_ADMIN, PUBLISHER, EDITOR, AGENCY, VIEWER;\n\n        @Component(&quot;AccountRole&quot;)\n        @Getter\n        static class SpringComponent {\n            private final Type MASTER_ADMIN = Type.MASTER_ADMIN;\n            private final Type EDITOR = Type.EDITOR;\n            ...\n        }\n    }\n\n...\n\n@Service(&quot;AccountRoleAccess&quot;)\npublic class AccountRoleAccess {\n    public boolean hasAnyRole(Authentication authentication, AccountId id, AccountRole.Type... roles) {\n        ...\n    }\n}\n\n...\n\n@PreAuthorize(&quot;@AccountRoleAccess.hasAnyRole(authentication, #accountId, @AccountRole.MASTER_ADMIN, @AccountRole.EDITOR)&quot;)\n</code></pre>\n"}],"owner":{"account_id":1946533,"reputation":2241,"user_id":1751547,"accept_rate":50,"display_name":"user1751547"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25261,"favorite_count":0,"down_vote_count":0,"up_vote_count":34,"answer_count":6,"score":34,"last_activity_date":1669203069,"creation_date":1381430152,"question_id":19303584,"body_markdown":"My question is a duplicate of https://stackoverflow.com/questions/18097152/custom-annotation-with-spring-security but it went unanswered and I believe there should be a simple solution to the problem.\r\n\r\nBasically instead of doing:\r\n    \r\n    @PreAuthorize(&quot;hasPermission(T(fully.qualified.Someclass).WHATEVER, T(fully.qualified.Permission).READ&quot;)\r\n\r\nI would like to do:\r\n     \r\n    @PreAuthorize(Someclass.WHATEVER, Permission.READ)\r\n\r\nor possibly some custom annotation that will wire up easily with spring security\r\n\r\nThis seems much cleaner to me and I would like to be able to do it if I can.\r\n \r\n\r\n","title":"Spring Security @PreAuthorization pass enums in directly","body":"<p>My question is a duplicate of <a href=\"https://stackoverflow.com/questions/18097152/custom-annotation-with-spring-security\">Custom annotation with spring security</a> but it went unanswered and I believe there should be a simple solution to the problem.</p>\n\n<p>Basically instead of doing:</p>\n\n<pre><code>@PreAuthorize(\"hasPermission(T(fully.qualified.Someclass).WHATEVER, T(fully.qualified.Permission).READ\")\n</code></pre>\n\n<p>I would like to do:</p>\n\n<pre><code>@PreAuthorize(Someclass.WHATEVER, Permission.READ)\n</code></pre>\n\n<p>or possibly some custom annotation that will wire up easily with spring security</p>\n\n<p>This seems much cleaner to me and I would like to be able to do it if I can.</p>\n"},{"tags":["java","spring-boot","spring-profiles"],"comments":[{"owner":{"account_id":5029471,"reputation":5138,"user_id":4040179,"display_name":"Federico Sierra"},"score":0,"creation_date":1582644318,"post_id":60397743,"comment_id":106843973,"body_markdown":"you are calling the run twice: `app.run(args).getEnvironment();` and `SpringApplication.run(VcrawlPortalBackendApplication.class, args);`","body":"you are calling the run twice: <code>app.run(args).getEnvironment();</code> and <code>SpringApplication.run(VcrawlPortalBackendApplication.class, args);</code>"}],"answers":[{"tags":[],"owner":{"account_id":9774998,"reputation":3031,"user_id":7245379,"display_name":"eHayik"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1582644637,"creation_date":1582644637,"answer_id":60398114,"question_id":60397743,"body_markdown":"You are invoking `SpringApplication::run` static method twice.\r\n\r\nFirstly using `SpringApplication.run(VcrawlPortalBackendApplication.class, args);` and them from your initialized `SpringApplication` instance  `Environment env = app.run(args).getEnvironment();` \r\n","title":"Spring boot application main method is executing twice -&gt; port already in use","body":"<p>You are invoking <code>SpringApplication::run</code> static method twice.</p>\n\n<p>Firstly using <code>SpringApplication.run(VcrawlPortalBackendApplication.class, args);</code> and them from your initialized <code>SpringApplication</code> instance  <code>Environment env = app.run(args).getEnvironment();</code> </p>\n"},{"tags":[],"owner":{"account_id":6430905,"reputation":400,"user_id":4984125,"display_name":"New Bee"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1582644819,"creation_date":1582644819,"answer_id":60398167,"question_id":60397743,"body_markdown":"Your application has already started its execution on port 8187. As you have set duplicate call of run method, once again it is trying to start execution on port 8187.\r\nSolution - &gt; remove duplicate call of run function.\r\n\r\n[![enter image description here][1]][1] \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/cIk2x.png","title":"Spring boot application main method is executing twice -&gt; port already in use","body":"<p>Your application has already started its execution on port 8187. As you have set duplicate call of run method, once again it is trying to start execution on port 8187.\nSolution - > remove duplicate call of run function.</p>\n\n<p><a href=\"https://i.stack.imgur.com/cIk2x.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cIk2x.png\" alt=\"enter image description here\"></a> </p>\n"}],"owner":{"account_id":17843373,"reputation":11,"user_id":12960783,"display_name":"Tudor Mihale"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1239,"favorite_count":0,"down_vote_count":3,"up_vote_count":0,"accepted_answer_id":60398114,"answer_count":2,"score":-3,"last_activity_date":1669202847,"creation_date":1582643523,"question_id":60397743,"body_markdown":"It is my first time when I configure a spring boot application from scratch and for 2 days I was having a nightmare with this issue. \r\nWhen I am trying to start the application it looks like it&#39;s trying to start twice and every time I got an error that port is already in use, but the process is not stopped and if I&#39;m trying to call an endpoint with postman, it works.\r\n\r\nHere is he console output:\r\n\r\n    Starting Gradle Daemon...\r\n    Connected to the target VM, address: &#39;127.0.0.1:61857&#39;, transport: &#39;socket&#39;\r\n    Gradle Daemon started in 1 s 473 ms\r\n    &gt; Task :processResources UP-TO-DATE\r\n    &gt; Task :compileJava UP-TO-DATE\r\n    &gt; Task :classes UP-TO-DATE\r\n    Connected to the VM started by &#39;:VcrawlPortalBackendApplication.main()&#39; (localhost:61879). Open the debugger session tab\r\n    \r\n    &gt; Task :VcrawlPortalBackendApplication.main()\r\n    \r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::        (v2.2.4.RELEASE)\r\n    \r\n    2020-02-25 15:48:19.817  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Starting VcrawlPortalBackendApplication on VOQCLUJWEBTS with PID 471912 \r\n    2020-02-25 15:48:19.822 DEBUG 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Running with Spring Boot v2.2.4.RELEASE, Spring v5.2.3.RELEASE\r\n    2020-02-25 15:48:19.823  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : The following profiles are active: dev\r\n    2020-02-25 15:48:22.237 DEBUG 471912 --- [  restartedMain] c.v.v.config.DatabaseConfiguration       : Configuring Datasource\r\n    .........\r\n    2020-02-25 15:48:25.065  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Started VcrawlPortalBackendApplication in 6.273 seconds (JVM running for 6.994)\r\n    \r\n      .   ____          _            __ _ _\r\n     /\\\\ / ___&#39;_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\r\n    ( ( )\\___ | &#39;_ | &#39;_| | &#39;_ \\/ _` | \\ \\ \\ \\\r\n     \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\r\n      &#39;  |____| .__|_| |_|_| |_\\__, | / / / /\r\n     =========|_|==============|___/=/_/_/_/\r\n     :: Spring Boot ::        (v2.2.4.RELEASE)\r\n    \r\n    2020-02-25 15:48:25.178  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Starting VcrawlPortalBackendApplication on VOQCLUJWEBTS with PID 471912 \r\n    2020-02-25 15:48:25.179 DEBUG 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Running with Spring Boot v2.2.4.RELEASE, Spring v5.2.3.RELEASE\r\n    2020-02-25 15:48:25.179  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : The following profiles are active: dev\r\n    2020-02-25 15:48:25.765 DEBUG 471912 --- [  restartedMain] c.v.v.config.DatabaseConfiguration       : Configuring Datasource\r\n    2020-02-25 15:48:25.904  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Running with Spring profile(s) : [dev]\r\n    2020-02-25 15:48:26.166 ERROR 471912 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \r\n    \r\n    ***************************\r\n    APPLICATION FAILED TO START\r\n    ***************************\r\n    \r\n    Description:\r\n    \r\n    Web server failed to start. Port 8187 was already in use.\r\n    \r\n    Action:\r\n    \r\n    Identify and stop the process that&#39;s listening on port 8187 or configure this application to listen on another port.\r\n\r\nThis logs are all at the same run.\r\n\r\nThis is my build.gradle file:\r\n\r\n    plugins {\r\n\tid &#39;org.springframework.boot&#39; version &#39;2.2.4.RELEASE&#39;\r\n\tid &#39;io.spring.dependency-management&#39; version &#39;1.0.9.RELEASE&#39;\r\n\tid &#39;java&#39;\r\n\tid &#39;war&#39;\r\n    }\r\n\r\n    bootWar {\r\n    \tmainClassName = &#39;com.voquz.vcrawlportalbackend.VcrawlPortalBackendApplication&#39;\r\n    \texcludeDevtools = true\r\n    }\r\n    \r\n    springBoot {\r\n    \tmainClassName = &#39;com.voquz.vcrawlportalbackend.VcrawlPortalBackendApplication&#39;\r\n    }\r\n    \r\n    bootRun {\r\n    \tsourceResources sourceSets.main\r\n    \r\n    \tif (System.getProperty(&#39;DEBUG&#39;, &#39;false&#39;) == &#39;true&#39;) {\r\n    \t\tjvmArgs &#39;-Xdebug&#39;,\r\n    \t\t\t\t&#39;-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=9009&#39;\r\n    \t}\r\n    }\r\n    \r\n    if (project.hasProperty(&#39;prod&#39;)) {\r\n    \tapply from: &#39;profile_prod.gradle&#39;\r\n    } else if (project.hasProperty(&#39;uat&#39;)) {\r\n    \tapply from: &#39;profile_uat.gradle&#39;\r\n    } else {\r\n    \tapply from: &#39;profile_dev.gradle&#39;\r\n    }\r\n    \r\n    group = &#39;com.voquz.vcrawl-portal-backend&#39;\r\n    version = &#39;0.0.1-SNAPSHOT&#39;\r\n    sourceCompatibility = &#39;1.8&#39;\r\n    \r\n    repositories {\r\n    \tmavenCentral()\r\n    }\r\n    \r\n    dependencies {\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-thymeleaf&#39;\r\n    \timplementation (&#39;org.springframework.boot:spring-boot-starter-web&#39;) {\r\n    \t\texclude group: &#39;org.springframework.boot&#39;, module: &#39;spring-boot-starter-tomcat&#39;\r\n    \t}\r\n    \timplementation &#39;org.springframework.boot:spring-boot-starter-data-jpa&#39;\r\n    \timplementation &#39;org.liquibase:liquibase-core&#39;\r\n    \timplementation &#39;com.fasterxml.jackson.datatype:jackson-datatype-hibernate4&#39;\r\n    \timplementation &#39;org.hibernate:hibernate-core&#39;\r\n    \tprovidedRuntime &#39;org.springframework.boot:spring-boot-starter-tomcat&#39;\r\n    \ttestImplementation(&#39;org.springframework.boot:spring-boot-starter-test&#39;) {\r\n    \t\texclude group: &#39;org.junit.vintage&#39;, module: &#39;junit-vintage-engine&#39;\r\n    \t}\r\n    \ttestImplementation &#39;org.springframework.security:spring-security-test&#39;\r\n    \tcompile group: &#39;com.microsoft.sqlserver&#39;, name: &#39;mssql-jdbc&#39;, version: &#39;8.2.0.jre8&#39;\r\n    \tcompile &#39;com.github.sabomichal:liquibase-mssql:1.5&#39;\r\n    \tcompile group: &#39;com.hynnet&#39;, name: &#39;sqljdbc-chs&#39;, version: &#39;4.0.2206.100&#39;\r\n    }\r\n    \r\n    compileJava.dependsOn(processResources)\r\n    \r\n    clean {\r\n    \tdelete &quot;target&quot;\r\n    }\r\n    \r\n    task stage(dependsOn: &#39;bootRepackage&#39;) {\r\n    }\r\n\r\nHere is the build.gradle file for development profile:\r\n\r\n    ext {\r\n        logbackLoglevel = &quot;DEBUG&quot;\r\n    }\r\n    \r\n    dependencies {\r\n        compile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-devtools&#39;\r\n        compile group: &#39;org.springframework.boot&#39;, name: &#39;spring-boot-starter-tomcat&#39;, version: &#39;2.2.4.RELEASE&#39;\r\n    }\r\n    \r\n    bootRun {\r\n        args = [&quot;--spring.profiles.active=dev&quot;]\r\n    }\r\n    \r\n    task setProdProperties(dependsOn: bootRun) {\r\n        doFirst {\r\n            System.setProperty(&#39;spring.profiles.active&#39;, &#39;dev&#39;)\r\n        }\r\n    }\r\n    \r\n    processResources {\r\n        filesMatching(&#39;**/logback-spring.xml&#39;) {\r\n            filter {\r\n                it.replace(&#39;@logback.loglevel@&#39;, logbackLoglevel)\r\n            }\r\n        }\r\n    }\r\n\r\nAnd the main class:\r\n\r\n\r\n    @SpringBootApplication\r\n    @EnableConfigurationProperties({LiquibaseProperties.class})\r\n    public class VcrawlPortalBackendApplication {\r\n    \r\n    \tprivate static final Logger log = LoggerFactory.getLogger(VcrawlPortalBackendApplication.class);\r\n    \r\n    \t@Autowired\r\n    \tprivate Environment environment;\r\n    \r\n    \tpublic static void main(String[] args) throws UnknownHostException {\r\n    \t\tSpringApplication app = new SpringApplication(VcrawlPortalBackendApplication.class);\r\n    \t\tSimpleCommandLinePropertySource source = new SimpleCommandLinePropertySource(args);\r\n    \t\taddDefaultProfile(app, source);\r\n    \t\tSpringApplication.run(VcrawlPortalBackendApplication.class, args);\r\n    \t\tEnvironment env = app.run(args).getEnvironment();\r\n    \t\tlog.info(&quot;Access URLs:\\n----------------------------------------------------------\\n\\t&quot; +\r\n    \t\t\t\t\t\t&quot;Local: \\t\\thttp://127.0.0.1:{}\\n\\t&quot; +\r\n    \t\t\t\t\t\t&quot;External: \\thttp://{}:{}\\n----------------------------------------------------------&quot;,\r\n    \t\t\t\tenv.getProperty(&quot;server.port&quot;),\r\n    \t\t\t\tInetAddress.getLocalHost().getHostAddress(),\r\n    \t\t\t\tenv.getProperty(&quot;server.port&quot;));\r\n    \r\n    \t}\r\n    \r\n    \t/**\r\n    \t * If no profile has been configured, set by default the &quot;dev&quot; profile.\r\n    \t */\r\n    \tprivate static void addDefaultProfile(SpringApplication app, SimpleCommandLinePropertySource source) {\r\n    \t\tif (!source.containsProperty(&quot;spring.profiles.active&quot;) &amp;&amp;\r\n    \t\t\t\t!System.getenv().containsKey(&quot;SPRING_PROFILES_ACTIVE&quot;)) {\r\n    \r\n    \t\t\tapp.setAdditionalProfiles(Constants.SPRING_PROFILE_DEVELOPMENT);\r\n    \t\t}\r\n    \t}\r\n    \r\n    \t@PostConstruct\r\n    \tpublic void initApplication() {\r\n    \t\tif (environment.getActiveProfiles().length == 0) {\r\n    \t\t\tlog.warn(&quot;No Spring profile configured, running with default configuration&quot;);\r\n    \t\t} else {\r\n    \t\t\tlog.info(&quot;Running with Spring profile(s) : {}&quot;, Arrays.toString(environment.getActiveProfiles()));\r\n    \t\t\tCollection&lt;String&gt; activeProfiles = Arrays.asList(environment.getActiveProfiles());\r\n    \t\t\tif (activeProfiles.contains(Constants.SPRING_PROFILE_DEVELOPMENT) &amp;&amp; activeProfiles.contains(Constants.SPRING_PROFILE_PRODUCTION)) {\r\n    \t\t\t\tlog.error(&quot;You have misconfigured your application! &quot; +\r\n    \t\t\t\t\t\t&quot;It should not run with both the &#39;dev&#39; and &#39;prod&#39; profiles at the same time.&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (activeProfiles.contains(Constants.SPRING_PROFILE_DEVELOPMENT) &amp;&amp; activeProfiles.contains(Constants.SPRING_PROFILE_UAT)) {\r\n    \t\t\t\tlog.error(&quot;You have misconfigured your application! &quot; +\r\n    \t\t\t\t\t\t&quot;It should not run with both the &#39;dev&#39; and &#39;uat&#39; profiles at the same time.&quot;);\r\n    \t\t\t}\r\n    \t\t\tif (activeProfiles.contains(Constants.SPRING_PROFILE_PRODUCTION) &amp;&amp; activeProfiles.contains(Constants.SPRING_PROFILE_UAT)) {\r\n    \t\t\t\tlog.error(&quot;You have misconfigured your application! &quot; +\r\n    \t\t\t\t\t\t&quot;It should not run with both the &#39;prod&#39; and &#39;uat&#39; profiles at the same time.&quot;);\r\n    \t\t\t}\r\n    \t\t}\r\n    \t}\r\n    \r\n    }\r\n\r\n\r\nMy thoughts are that there is a problem with my build files, but couldn&#39;t find a solution yet.\r\nDoes anyone ever faced the same problem ? Any idea for a solution ?\r\nThanks in advance.\r\n","title":"Spring boot application main method is executing twice -&gt; port already in use","body":"<p>It is my first time when I configure a spring boot application from scratch and for 2 days I was having a nightmare with this issue. \nWhen I am trying to start the application it looks like it's trying to start twice and every time I got an error that port is already in use, but the process is not stopped and if I'm trying to call an endpoint with postman, it works.</p>\n\n<p>Here is he console output:</p>\n\n<pre><code>Starting Gradle Daemon...\nConnected to the target VM, address: '127.0.0.1:61857', transport: 'socket'\nGradle Daemon started in 1 s 473 ms\n&gt; Task :processResources UP-TO-DATE\n&gt; Task :compileJava UP-TO-DATE\n&gt; Task :classes UP-TO-DATE\nConnected to the VM started by ':VcrawlPortalBackendApplication.main()' (localhost:61879). Open the debugger session tab\n\n&gt; Task :VcrawlPortalBackendApplication.main()\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.2.4.RELEASE)\n\n2020-02-25 15:48:19.817  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Starting VcrawlPortalBackendApplication on VOQCLUJWEBTS with PID 471912 \n2020-02-25 15:48:19.822 DEBUG 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Running with Spring Boot v2.2.4.RELEASE, Spring v5.2.3.RELEASE\n2020-02-25 15:48:19.823  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : The following profiles are active: dev\n2020-02-25 15:48:22.237 DEBUG 471912 --- [  restartedMain] c.v.v.config.DatabaseConfiguration       : Configuring Datasource\n.........\n2020-02-25 15:48:25.065  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Started VcrawlPortalBackendApplication in 6.273 seconds (JVM running for 6.994)\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::        (v2.2.4.RELEASE)\n\n2020-02-25 15:48:25.178  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Starting VcrawlPortalBackendApplication on VOQCLUJWEBTS with PID 471912 \n2020-02-25 15:48:25.179 DEBUG 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Running with Spring Boot v2.2.4.RELEASE, Spring v5.2.3.RELEASE\n2020-02-25 15:48:25.179  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : The following profiles are active: dev\n2020-02-25 15:48:25.765 DEBUG 471912 --- [  restartedMain] c.v.v.config.DatabaseConfiguration       : Configuring Datasource\n2020-02-25 15:48:25.904  INFO 471912 --- [  restartedMain] c.v.v.VcrawlPortalBackendApplication     : Running with Spring profile(s) : [dev]\n2020-02-25 15:48:26.166 ERROR 471912 --- [  restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : \n\n***************************\nAPPLICATION FAILED TO START\n***************************\n\nDescription:\n\nWeb server failed to start. Port 8187 was already in use.\n\nAction:\n\nIdentify and stop the process that's listening on port 8187 or configure this application to listen on another port.\n</code></pre>\n\n<p>This logs are all at the same run.</p>\n\n<p>This is my build.gradle file:</p>\n\n<pre><code>plugins {\nid 'org.springframework.boot' version '2.2.4.RELEASE'\nid 'io.spring.dependency-management' version '1.0.9.RELEASE'\nid 'java'\nid 'war'\n}\n\nbootWar {\n    mainClassName = 'com.voquz.vcrawlportalbackend.VcrawlPortalBackendApplication'\n    excludeDevtools = true\n}\n\nspringBoot {\n    mainClassName = 'com.voquz.vcrawlportalbackend.VcrawlPortalBackendApplication'\n}\n\nbootRun {\n    sourceResources sourceSets.main\n\n    if (System.getProperty('DEBUG', 'false') == 'true') {\n        jvmArgs '-Xdebug',\n                '-Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=9009'\n    }\n}\n\nif (project.hasProperty('prod')) {\n    apply from: 'profile_prod.gradle'\n} else if (project.hasProperty('uat')) {\n    apply from: 'profile_uat.gradle'\n} else {\n    apply from: 'profile_dev.gradle'\n}\n\ngroup = 'com.voquz.vcrawl-portal-backend'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '1.8'\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-thymeleaf'\n    implementation ('org.springframework.boot:spring-boot-starter-web') {\n        exclude group: 'org.springframework.boot', module: 'spring-boot-starter-tomcat'\n    }\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    implementation 'org.liquibase:liquibase-core'\n    implementation 'com.fasterxml.jackson.datatype:jackson-datatype-hibernate4'\n    implementation 'org.hibernate:hibernate-core'\n    providedRuntime 'org.springframework.boot:spring-boot-starter-tomcat'\n    testImplementation('org.springframework.boot:spring-boot-starter-test') {\n        exclude group: 'org.junit.vintage', module: 'junit-vintage-engine'\n    }\n    testImplementation 'org.springframework.security:spring-security-test'\n    compile group: 'com.microsoft.sqlserver', name: 'mssql-jdbc', version: '8.2.0.jre8'\n    compile 'com.github.sabomichal:liquibase-mssql:1.5'\n    compile group: 'com.hynnet', name: 'sqljdbc-chs', version: '4.0.2206.100'\n}\n\ncompileJava.dependsOn(processResources)\n\nclean {\n    delete \"target\"\n}\n\ntask stage(dependsOn: 'bootRepackage') {\n}\n</code></pre>\n\n<p>Here is the build.gradle file for development profile:</p>\n\n<pre><code>ext {\n    logbackLoglevel = \"DEBUG\"\n}\n\ndependencies {\n    compile group: 'org.springframework.boot', name: 'spring-boot-devtools'\n    compile group: 'org.springframework.boot', name: 'spring-boot-starter-tomcat', version: '2.2.4.RELEASE'\n}\n\nbootRun {\n    args = [\"--spring.profiles.active=dev\"]\n}\n\ntask setProdProperties(dependsOn: bootRun) {\n    doFirst {\n        System.setProperty('spring.profiles.active', 'dev')\n    }\n}\n\nprocessResources {\n    filesMatching('**/logback-spring.xml') {\n        filter {\n            it.replace('@logback.loglevel@', logbackLoglevel)\n        }\n    }\n}\n</code></pre>\n\n<p>And the main class:</p>\n\n<pre><code>@SpringBootApplication\n@EnableConfigurationProperties({LiquibaseProperties.class})\npublic class VcrawlPortalBackendApplication {\n\n    private static final Logger log = LoggerFactory.getLogger(VcrawlPortalBackendApplication.class);\n\n    @Autowired\n    private Environment environment;\n\n    public static void main(String[] args) throws UnknownHostException {\n        SpringApplication app = new SpringApplication(VcrawlPortalBackendApplication.class);\n        SimpleCommandLinePropertySource source = new SimpleCommandLinePropertySource(args);\n        addDefaultProfile(app, source);\n        SpringApplication.run(VcrawlPortalBackendApplication.class, args);\n        Environment env = app.run(args).getEnvironment();\n        log.info(\"Access URLs:\\n----------------------------------------------------------\\n\\t\" +\n                        \"Local: \\t\\thttp://127.0.0.1:{}\\n\\t\" +\n                        \"External: \\thttp://{}:{}\\n----------------------------------------------------------\",\n                env.getProperty(\"server.port\"),\n                InetAddress.getLocalHost().getHostAddress(),\n                env.getProperty(\"server.port\"));\n\n    }\n\n    /**\n     * If no profile has been configured, set by default the \"dev\" profile.\n     */\n    private static void addDefaultProfile(SpringApplication app, SimpleCommandLinePropertySource source) {\n        if (!source.containsProperty(\"spring.profiles.active\") &amp;&amp;\n                !System.getenv().containsKey(\"SPRING_PROFILES_ACTIVE\")) {\n\n            app.setAdditionalProfiles(Constants.SPRING_PROFILE_DEVELOPMENT);\n        }\n    }\n\n    @PostConstruct\n    public void initApplication() {\n        if (environment.getActiveProfiles().length == 0) {\n            log.warn(\"No Spring profile configured, running with default configuration\");\n        } else {\n            log.info(\"Running with Spring profile(s) : {}\", Arrays.toString(environment.getActiveProfiles()));\n            Collection&lt;String&gt; activeProfiles = Arrays.asList(environment.getActiveProfiles());\n            if (activeProfiles.contains(Constants.SPRING_PROFILE_DEVELOPMENT) &amp;&amp; activeProfiles.contains(Constants.SPRING_PROFILE_PRODUCTION)) {\n                log.error(\"You have misconfigured your application! \" +\n                        \"It should not run with both the 'dev' and 'prod' profiles at the same time.\");\n            }\n            if (activeProfiles.contains(Constants.SPRING_PROFILE_DEVELOPMENT) &amp;&amp; activeProfiles.contains(Constants.SPRING_PROFILE_UAT)) {\n                log.error(\"You have misconfigured your application! \" +\n                        \"It should not run with both the 'dev' and 'uat' profiles at the same time.\");\n            }\n            if (activeProfiles.contains(Constants.SPRING_PROFILE_PRODUCTION) &amp;&amp; activeProfiles.contains(Constants.SPRING_PROFILE_UAT)) {\n                log.error(\"You have misconfigured your application! \" +\n                        \"It should not run with both the 'prod' and 'uat' profiles at the same time.\");\n            }\n        }\n    }\n\n}\n</code></pre>\n\n<p>My thoughts are that there is a problem with my build files, but couldn't find a solution yet.\nDoes anyone ever faced the same problem ? Any idea for a solution ?\nThanks in advance.</p>\n"},{"tags":["java","spring-boot","integration-testing","spring-boot-test"],"answers":[{"tags":[],"owner":{"account_id":3622644,"reputation":1216,"user_id":3248882,"display_name":"cbreezier"},"comment_count":0,"down_vote_count":0,"up_vote_count":17,"is_accepted":false,"score":17,"last_activity_date":1517979082,"creation_date":1517979082,"answer_id":48656233,"question_id":42249791,"body_markdown":"I ran across the same issue. I know this question is a little old, but this may be of assistance:\r\n\r\n&gt; Tests that use @SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT) can also inject the actual port into a field by using the @LocalServerPort annotation, as shown in the following example:\r\n\r\nSource: https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-user-a-random-unassigned-http-port\r\n\r\nThe code example given is:\r\n\r\n    @RunWith(SpringJUnit4ClassRunner.class)\r\n    @SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)\r\n    public class MyWebIntegrationTests {\r\n    \r\n    \t@Autowired\r\n    \tServletWebServerApplicationContext server;\r\n    \r\n    \t@LocalServerPort\r\n    \tint port;\r\n    \r\n    \t// ...\r\n    \r\n    }\r\n","title":"Resolving port already in use in a Spring boot test DEFINED PORT","body":"<p>I ran across the same issue. I know this question is a little old, but this may be of assistance:</p>\n\n<blockquote>\n  <p>Tests that use @SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT) can also inject the actual port into a field by using the @LocalServerPort annotation, as shown in the following example:</p>\n</blockquote>\n\n<p>Source: <a href=\"https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-user-a-random-unassigned-http-port\" rel=\"noreferrer\">https://docs.spring.io/spring-boot/docs/current-SNAPSHOT/reference/htmlsingle/#howto-user-a-random-unassigned-http-port</a></p>\n\n<p>The code example given is:</p>\n\n<pre><code>@RunWith(SpringJUnit4ClassRunner.class)\n@SpringBootTest(webEnvironment=WebEnvironment.RANDOM_PORT)\npublic class MyWebIntegrationTests {\n\n    @Autowired\n    ServletWebServerApplicationContext server;\n\n    @LocalServerPort\n    int port;\n\n    // ...\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":3652290,"reputation":2120,"user_id":3044117,"accept_rate":38,"display_name":"Eduardo"},"score":3,"creation_date":1587005771,"post_id":50412277,"comment_id":108341325,"body_markdown":"Using RANDOM_PORT will give you most of the times &quot;connection refused&quot;","body":"Using RANDOM_PORT will give you most of the times &quot;connection refused&quot;"},{"owner":{"account_id":392775,"reputation":1744,"user_id":754250,"display_name":"HoaPhan"},"score":0,"creation_date":1631400665,"post_id":50412277,"comment_id":122212416,"body_markdown":"I trouble me how many people in this industry think random port means or whatever port means no-collision port in their test suits that run in parallel in which each of them even employs more port for wire mock and other services.","body":"I trouble me how many people in this industry think random port means or whatever port means no-collision port in their test suits that run in parallel in which each of them even employs more port for wire mock and other services."},{"owner":{"account_id":3124728,"reputation":1564,"user_id":2643815,"display_name":"Smart Coder"},"score":0,"creation_date":1680720346,"post_id":50412277,"comment_id":133947813,"body_markdown":"using Defined port uses the same port and for some reason the unit tests take too long to execute. Not sure what&#39;s the connection.","body":"using Defined port uses the same port and for some reason the unit tests take too long to execute. Not sure what&#39;s the connection."}],"tags":[],"owner":{"account_id":5146862,"reputation":579,"user_id":4132067,"display_name":"Joel Neukom"},"comment_count":3,"down_vote_count":1,"up_vote_count":36,"is_accepted":false,"score":35,"last_activity_date":1526649623,"creation_date":1526649623,"answer_id":50412277,"question_id":42249791,"body_markdown":"If you insist on using the same port on multiple test, you can prevent spring from caching the context for further tests by annotating your testclass with: @DirtiesContext\r\n\r\nIn your case:\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @DirtiesContext\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\r\n    @TestPropertySource(&quot;classpath:test-application.properties&quot;)\r\n\r\nHere is a quote from Andy Wilkinson from his answer on [this discussion][1]\r\n\r\n&gt;This is working as designed. Spring Framework&#39;s test framework will, by default, cache contexts for possible reuse by multiple test classes. You have two tests with different configuration (due to @TestPropertySource) so they will use different application contexts. The context for the first test will be cached and kept open while the second test is running. Both tests are configured to use the same port for Tomcat&#39;s connector. As a result, when the second test is run, the context fails to start due to a port clash with the connector from the first test. You have a few options:\r\n\r\n&gt;1. Use RANDOM_PORT\r\n2. Remove @TestPropertySource from Test2 so that the contexts have identical configuration and the context from the first test can be reused for the second test.\r\n3. Use @DirtiesContext so that the context isn&#39;t cached\r\n\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-boot/issues/10366\r\n","title":"Resolving port already in use in a Spring boot test DEFINED PORT","body":"<p>If you insist on using the same port on multiple test, you can prevent spring from caching the context for further tests by annotating your testclass with: @DirtiesContext</p>\n\n<p>In your case:</p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@DirtiesContext\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n@TestPropertySource(\"classpath:test-application.properties\")\n</code></pre>\n\n<p>Here is a quote from Andy Wilkinson from his answer on <a href=\"https://github.com/spring-projects/spring-boot/issues/10366\" rel=\"noreferrer\">this discussion</a></p>\n\n<blockquote>\n  <p>This is working as designed. Spring Framework's test framework will, by default, cache contexts for possible reuse by multiple test classes. You have two tests with different configuration (due to @TestPropertySource) so they will use different application contexts. The context for the first test will be cached and kept open while the second test is running. Both tests are configured to use the same port for Tomcat's connector. As a result, when the second test is run, the context fails to start due to a port clash with the connector from the first test. You have a few options:</p>\n  \n  <ol>\n  <li>Use RANDOM_PORT</li>\n  <li>Remove @TestPropertySource from Test2 so that the contexts have identical configuration and the context from the first test can be reused for the second test.</li>\n  <li>Use @DirtiesContext so that the context isn't cached</li>\n  </ol>\n</blockquote>\n"},{"tags":[],"owner":{"account_id":245196,"reputation":81,"user_id":5287057,"display_name":"Kashif Bashir"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1593749485,"creation_date":1593749485,"answer_id":62708397,"question_id":42249791,"body_markdown":"in application.properties\r\n\r\nserver.port=0\r\n\r\nwill run the application in random ports","title":"Resolving port already in use in a Spring boot test DEFINED PORT","body":"<p>in application.properties</p>\n<p>server.port=0</p>\n<p>will run the application in random ports</p>\n"}],"owner":{"account_id":2378333,"reputation":593,"user_id":3679001,"accept_rate":50,"display_name":"ahjashish"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":40180,"favorite_count":0,"down_vote_count":0,"up_vote_count":25,"answer_count":3,"score":25,"last_activity_date":1669202632,"creation_date":1487162655,"question_id":42249791,"body_markdown":"I have a spring boot application that fires up and executes a class that listens to **Application Ready event** to call an **external service** to fetch some data and then use that data to push some rules to the classpath for execution. For local testing we have **mocked the external service** within our application which works fine during the application startup.\r\n\r\nThe **issue is while testing** the application by running it with **spring boot test** annotation and embedded jetty container either on :\r\n\r\n- RANDOM PORT\r\n- DEFINED PORT\r\n\r\nIn case of *RANDOM PORT*, at the application startup, it picks up the url for the mock service from the properties file at a defined port and has no clue where the embedded container is running since it is randomly picked up, hence failing to give response.\r\n\r\nIn case of *DEFINED PORT*, for the first test case file it runs successfully, but the moment next file is picked up, it fails saying the port is already in use.\r\n\r\n&gt; The test cases are partitioned logically in multiple files and need\r\n&gt; the external service to be called before the container starts to load\r\n&gt; the rules.\r\n\r\nHow can I either share the embedded container between test files in case of using defined port or refactor my application code instead to get hold of the random port while starting up during the test case execution.\r\n\r\nAny help would be appreciated.\r\n\r\n**Application Startup code :**\r\n\r\n    @Component\r\n    public class ApplicationStartup implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\r\n\r\n    @Autowired\r\n    private SomeService someService;\r\n\r\n    @Override\r\n    public void onApplicationEvent(ApplicationReadyEvent arg0) {\r\n\r\n        try {\r\n            someService.callExternalServiceAndLoadData();\r\n        }\r\n        catch (Execption e) {}\r\n        }\r\n     }\r\n\r\n**Test Code Annotations: Test1**\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\r\n    @TestPropertySource(&quot;classpath:test-application.properties&quot;)\r\n    public class Test1 {\r\n    \r\n        @Autowired\r\n        private TestRestTemplate restTemplate;\r\n    \r\n        @Test\r\n        public void tc1() throws IOException {.....}\r\n\r\n**Test Code Annotations: Test2**\r\n\r\n    @RunWith(SpringRunner.class)\r\n    @SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\r\n    @TestPropertySource(&quot;classpath:test-application.properties&quot;)\r\n    public class Test2 {\r\n    \r\n        @Autowired\r\n        private TestRestTemplate restTemplate;\r\n    \r\n        @Test\r\n        public void tc1() throws IOException {.....}\r\n\r\n","title":"Resolving port already in use in a Spring boot test DEFINED PORT","body":"<p>I have a spring boot application that fires up and executes a class that listens to <strong>Application Ready event</strong> to call an <strong>external service</strong> to fetch some data and then use that data to push some rules to the classpath for execution. For local testing we have <strong>mocked the external service</strong> within our application which works fine during the application startup.</p>\n\n<p>The <strong>issue is while testing</strong> the application by running it with <strong>spring boot test</strong> annotation and embedded jetty container either on :</p>\n\n<ul>\n<li>RANDOM PORT</li>\n<li>DEFINED PORT</li>\n</ul>\n\n<p>In case of <em>RANDOM PORT</em>, at the application startup, it picks up the url for the mock service from the properties file at a defined port and has no clue where the embedded container is running since it is randomly picked up, hence failing to give response.</p>\n\n<p>In case of <em>DEFINED PORT</em>, for the first test case file it runs successfully, but the moment next file is picked up, it fails saying the port is already in use.</p>\n\n<blockquote>\n  <p>The test cases are partitioned logically in multiple files and need\n  the external service to be called before the container starts to load\n  the rules.</p>\n</blockquote>\n\n<p>How can I either share the embedded container between test files in case of using defined port or refactor my application code instead to get hold of the random port while starting up during the test case execution.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p><strong>Application Startup code :</strong></p>\n\n<pre><code>@Component\npublic class ApplicationStartup implements ApplicationListener&lt;ApplicationReadyEvent&gt; {\n\n@Autowired\nprivate SomeService someService;\n\n@Override\npublic void onApplicationEvent(ApplicationReadyEvent arg0) {\n\n    try {\n        someService.callExternalServiceAndLoadData();\n    }\n    catch (Execption e) {}\n    }\n }\n</code></pre>\n\n<p><strong>Test Code Annotations: Test1</strong></p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n@TestPropertySource(\"classpath:test-application.properties\")\npublic class Test1 {\n\n    @Autowired\n    private TestRestTemplate restTemplate;\n\n    @Test\n    public void tc1() throws IOException {.....}\n</code></pre>\n\n<p><strong>Test Code Annotations: Test2</strong></p>\n\n<pre><code>@RunWith(SpringRunner.class)\n@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.DEFINED_PORT)\n@TestPropertySource(\"classpath:test-application.properties\")\npublic class Test2 {\n\n    @Autowired\n    private TestRestTemplate restTemplate;\n\n    @Test\n    public void tc1() throws IOException {.....}\n</code></pre>\n"},{"tags":["java","compare","comparator"],"comments":[{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1501401865,"post_id":45397657,"comment_id":77755978,"body_markdown":"Equality is talking about *the objects being compared*, not comparing the comparators themselves. (And use generics--you&#39;re getting warnings for not doing so, and you should pay attention.)","body":"Equality is talking about <i>the objects being compared</i>, not comparing the comparators themselves. (And use generics--you&#39;re getting warnings for not doing so, and you should pay attention.)"},{"owner":{"account_id":1223835,"reputation":75888,"user_id":1189885,"accept_rate":43,"display_name":"chrylis -cautiouslyoptimistic-"},"score":0,"creation_date":1501403832,"post_id":45397657,"comment_id":77756463,"body_markdown":"@SHG Wrong. It has to use comparisons to know where in the tree to insert (and whether there are duplicates).","body":"@SHG Wrong. It has to use comparisons to know where in the tree to insert (and whether there are duplicates)."},{"owner":{"account_id":1548079,"reputation":128727,"user_id":1441122,"display_name":"Stuart Marks"},"score":0,"creation_date":1501512424,"post_id":45397657,"comment_id":77798758,"body_markdown":"Can you provide a link to the tutorial you&#39;re using?","body":"Can you provide a link to the tutorial you&#39;re using?"}],"answers":[{"tags":[],"owner":{"account_id":9725613,"reputation":53332,"user_id":7212686,"accept_rate":100,"display_name":"azro"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1501401892,"creation_date":1501401892,"answer_id":45397701,"question_id":45397657,"body_markdown":"The `equals()` method that you have override, is in the `MyComparator class` so it will be used if you need to compare 2 instance of `Mycomparator` ;)\r\n\r\nAnd that&#39;s not what you&#39;re doing, you are comparing `int` so yes the `compare()` method is usefull because it&#39;s the one which will be used for `sorting` the `Treeset` but the equals method here won&#39;t be used\r\n\r\nIn 99% of the time, you don&#39;t need to `override equals` method in classes that `implements` `Comparator`, because they are here just to `compare` values not themself to another one, and in fact because most of the time they have to attributes, you won&#39;t have  `comparator` equals.","title":"Comparator : Equals method functionality","body":"<p>The <code>equals()</code> method that you have override, is in the <code>MyComparator class</code> so it will be used if you need to compare 2 instance of <code>Mycomparator</code> ;)</p>\n\n<p>And that's not what you're doing, you are comparing <code>int</code> so yes the <code>compare()</code> method is usefull because it's the one which will be used for <code>sorting</code> the <code>Treeset</code> but the equals method here won't be used</p>\n\n<p>In 99% of the time, you don't need to <code>override equals</code> method in classes that <code>implements</code> <code>Comparator</code>, because they are here just to <code>compare</code> values not themself to another one, and in fact because most of the time they have to attributes, you won't have  <code>comparator</code> equals.</p>\n"},{"comments":[{"owner":{"account_id":8186124,"reputation":4869,"user_id":6161898,"display_name":"fg78nc"},"score":0,"creation_date":1501427590,"post_id":45397702,"comment_id":77763092,"body_markdown":"Why would you need to compare two `Comparators` ?","body":"Why would you need to compare two <code>Comparators</code> ?"},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1501429961,"post_id":45397702,"comment_id":77763829,"body_markdown":"@fg78nc I can&#39;t think of any scenario where I personally would need that, but apparently the creators of the `Comparator` interface decided that there is sufficient need to see if one `Comparator` provides the same ordering as another as to warrant including the `equals()` method in the `Comparator` interface.","body":"@fg78nc I can&#39;t think of any scenario where I personally would need that, but apparently the creators of the <code>Comparator</code> interface decided that there is sufficient need to see if one <code>Comparator</code> provides the same ordering as another as to warrant including the <code>equals()</code> method in the <code>Comparator</code> interface."},{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1669204373,"post_id":45397702,"comment_id":131590340,"body_markdown":"@fg78nc I added an example. It did not take me long to find one, only 5 years.","body":"@fg78nc I added an example. It did not take me long to find one, only 5 years."}],"tags":[],"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"comment_count":3,"down_vote_count":0,"up_vote_count":10,"is_accepted":false,"score":10,"last_activity_date":1669202500,"creation_date":1501401900,"answer_id":45397702,"question_id":45397657,"body_markdown":"Implementing the `equals()` method on a `Comparator` allows you to indicate that one comparator provides the same ordering as another comparator.  It has nothing to do with how your elements are sorted.  It is a very advanced and extremely rarely needed functionality.  You are highly unlikely to ever encounter a situation where your comparator&#39;s `equals()` method will actually be invoked. I would suggest that you ignore it.\r\n\r\n***Edit:*** \r\n\r\nAs an example of the very rare kind of circumstances under which `Comparator` `equals()` might be used:\r\n\r\n If you look at [the source code of `TreeMap`](http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/TreeMap.java) in function `PutAll(Map)` they have an optimization which checks whether the given map is also a `TreeMap`, and if so, then they check whether that map&#39;s comparator is equal to this map&#39;s comparator, and if so, they perform an optimized insertion of data which is known to already be sorted in the right order; otherwise, they delegate to `super.PutAll(Map)` which adds the items one by one.","title":"Comparator : Equals method functionality","body":"<p>Implementing the <code>equals()</code> method on a <code>Comparator</code> allows you to indicate that one comparator provides the same ordering as another comparator.  It has nothing to do with how your elements are sorted.  It is a very advanced and extremely rarely needed functionality.  You are highly unlikely to ever encounter a situation where your comparator's <code>equals()</code> method will actually be invoked. I would suggest that you ignore it.</p>\n<p><em><strong>Edit:</strong></em></p>\n<p>As an example of the very rare kind of circumstances under which <code>Comparator</code> <code>equals()</code> might be used:</p>\n<p>If you look at <a href=\"http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/687fd7c7986d/src/share/classes/java/util/TreeMap.java\" rel=\"nofollow noreferrer\">the source code of <code>TreeMap</code></a> in function <code>PutAll(Map)</code> they have an optimization which checks whether the given map is also a <code>TreeMap</code>, and if so, then they check whether that map's comparator is equal to this map's comparator, and if so, they perform an optimized insertion of data which is known to already be sorted in the right order; otherwise, they delegate to <code>super.PutAll(Map)</code> which adds the items one by one.</p>\n"},{"comments":[{"owner":{"account_id":53390,"reputation":4508,"user_id":159570,"display_name":"Joe Coder"},"score":2,"creation_date":1561124931,"post_id":45399335,"comment_id":99972776,"body_markdown":"The first sentence of this answer is incorrect.  `Comparator&lt;T&gt;::compare(:T, :T)` must be consistent with `T::equals(:T)`.  It has nothing to do with `Comparator&lt;T&gt;::equals(Comparator&lt;T&gt;)`.","body":"The first sentence of this answer is incorrect.  <code>Comparator&lt;T&gt;::compare(:T, :T)</code> must be consistent with <code>T::equals(:T)</code>.  It has nothing to do with <code>Comparator&lt;T&gt;::equals(Comparator&lt;T&gt;)</code>."},{"owner":{"account_id":8186124,"reputation":4869,"user_id":6161898,"display_name":"fg78nc"},"score":0,"creation_date":1561125233,"post_id":45399335,"comment_id":99972945,"body_markdown":"I did not say anything on Comparator’s equal.","body":"I did not say anything on Comparator’s equal."},{"owner":{"account_id":53390,"reputation":4508,"user_id":159570,"display_name":"Joe Coder"},"score":1,"creation_date":1561128483,"post_id":45399335,"comment_id":99974790,"body_markdown":"That&#39;s how I&#39;m reading it; perhaps you could rewrite the first couple sentences to be less ambiguous.","body":"That&#39;s how I&#39;m reading it; perhaps you could rewrite the first couple sentences to be less ambiguous."},{"owner":{"account_id":17961704,"reputation":371,"user_id":13052540,"display_name":"Tejas Pawar"},"score":0,"creation_date":1642363746,"post_id":45399335,"comment_id":125045553,"body_markdown":"better if we avoid writing !(obj instanceof Apple) this logic in equals method, because instanceof operator gives true for parent object also.","body":"better if we avoid writing !(obj instanceof Apple) this logic in equals method, because instanceof operator gives true for parent object also."},{"owner":{"account_id":57788,"reputation":46120,"user_id":173149,"accept_rate":62,"display_name":"gavenkoa"},"score":1,"creation_date":1660816656,"post_id":45399335,"comment_id":129624312,"body_markdown":"So many words about Java basics and nothing in regard to the purpose of `Comparator.equals()`. Cast i--.","body":"So many words about Java basics and nothing in regard to the purpose of <code>Comparator.equals()</code>. Cast i--."}],"tags":[],"owner":{"account_id":8186124,"reputation":4869,"user_id":6161898,"display_name":"fg78nc"},"comment_count":5,"down_vote_count":1,"up_vote_count":6,"is_accepted":false,"score":5,"last_activity_date":1501430651,"creation_date":1501414295,"answer_id":45399335,"question_id":45397657,"body_markdown":"`equals()` method of the class, `Comparator` and `Comparator` require equals consistency because some Java collection classes may behave unpredictably if the `compareTo()` and `equals()` methods are not returning consistent results.\r\n\r\nJava uses == operator to compare two primitives and/or to check if two variables refer to the same object. \r\nExample :\r\n\r\n    String apple1 = new String(&quot;apple&quot;);\r\n    String apple2 = new String(&quot;apple&quot;); \r\n    System.out.println(apple1.equals(apple2)); // true\r\n    \r\n    StringBuilder app1 = new StringBuilder(&quot;apple&quot;); \r\n    StringBuilder app2 = new StringBuilder(&quot;apple&quot;); \r\n    System.out.println(app1.equals(app2));   // false\r\n\r\n\r\nAs you can see we get different behavior. Why is that? This happens because String class implements an equals() method, which checks that the values are the same. On the other hand, StringBuilder does not implement equals() method, instead it uses the implementation of equals() provided by `Object` class. And implementation provided(inherited) by `Object` class does only simply checks if the two referred objects are the same.\r\n\r\n\r\nSo to check if two objects are equivalent Java uses the `equals()` method and whenever you introduce your own type you must overrides `equals()` method if you do not want to rely on `Object` class implementation of `equals()` method \r\n\r\n\r\nLet&#39;s for example introduce our own type : simple class Apple\r\n\r\n    public class Apple  {\r\n    \r\n    \tprivate int weight;\r\n    \tprivate int cost;\r\n        private String color;\r\n\r\nNow how do would you decide if two apples are equal? By color, by weight, by price or something else? This is why you need to supply explicitly your own equals method, so objects of your type can be compared for equality.\r\n\r\n\r\nExample below compares two `Apple` object for equality, and says that two object are equal if they belong to the same &#39;Apple&#39; class and if their weight and cost is the same. Notice we do not compare by color, we assume that color is irrelevant in our case, which means that we accept the fact that apples of different colors, but with the same weight and same cost are considered equals. \r\n\r\n\r\n        @Override\r\n    \tpublic boolean equals(Object obj) {\r\n            if ( !(obj instanceof Apple)) return false;    \r\n    \t\tif (obj == null)\r\n    \t\t\treturn false;\r\n    \t\tif (getClass() != obj.getClass())\r\n    \t\t\treturn false;\r\n    \t\tApple other = (Apple) obj;\r\n    \t\tif (cost != other.cost and weight != other.weight )\r\n    \t\t\treturn false;\r\n    \t\treturn true;\r\n    \t}\r\n\r\n\r\nYou can implement any logic you like for your `equals()` method. Java `equals()` method is very important and it provides contract or important rules developer shall follow. I will not list them, you get them from [here][1], they are logic and pretty straight forward.\r\n\r\n\r\nThere is another contract of `equals()` - whenever you override `equals()`, you are also expected to override `hashCode()` method. The reason behind that is because hashcode is used internally by some of Java collections, when object is stored as a key in the map. \r\n\r\nHashcode is a number that categorizes object into categories. Imagine you are given various sorts of apples(red, green, yellow) and asked to give them back when asked for particular sort. It would be much efficient and faster if you categorize them, put each in a different buckets accordingly and whenever asked for particular sort (for simplicity let&#39;s say red apple), and as you have already sorted and categorized them, you can retrieve them much faster. Hope it is clear now why do you need to implement `hashcode()`. `hashcode()` has it&#39;s own contract or rules same as `equals()` method. They pretty much make common sense :\r\n\r\n\r\nFirst, result of `hashcode()` within same program shall not change. What it means that in your `hascode()` calculations you should not include variable that my change during execution of a program. For example if cost of Apple&#39;s is mutable, i.e. it may change, it is not good idea to include them into hashcode() calculation, otherwise results would be inconsistent.\r\n\r\n\r\nSecond rule says, that when called with two objects, if `equals()` returns true then  calling `hashCode()` on each of those objects must retrieve the same result. But if `equals()` returns false when called with two objects, calling `hashCode()` on each of those objects does not necessary have to return a different result. Confusing? Why? Because `hashCode()` results are not required to be unique when called on unequal objects - you may put two unequal object in one bucket.\r\n\r\n\r\nNow regarding `Comparator` - it is easier to understand it&#39;s logic when you introduce your own type, instead of using built-in types.\r\n\r\n\r\nFor example let&#39;s say we have class `Apple` with two attributes : `weight` and `price` and want to put out object this type into sorted collection `TreeSet`.\r\n\r\n    public class Apple  {\r\n    \r\n    \tprivate int weight;\r\n    \tprivate int cost;\r\n\r\n\r\nNow how do you want this apples to be sorted inside collection - do you want to sort them by `weight` or by `price`? How shall compiler decide?\r\n\r\nSupplying appropriate `Comparator`or `Comparable` allows you to pass your intent.\r\nLet&#39;s try to add object to collection.\r\n\r\n \r\n\r\n      public class Apple {\r\n        \r\n        private int weight;\r\n        private int cost;\r\n\t\r\n\t  public static void main(String[] args) {\r\n\t\tApple redApple = new Apple();\r\n\t\tredApple.setCost(10);\r\n\t\tredApple.setWeight(2);\r\n\t\t\r\n\t\tApple greenApple = new Apple();\r\n\t\tgreenApple.setCost(12);\r\n\t\tgreenApple.setWeight(3);\r\n\t\t\r\n\t\tSet&lt;Apple&gt; apples = new TreeSet&lt;&gt;();\r\n\t\tapples.add(redApple);\r\n\t\tapples.add(greenApple);\r\n\t\t\r\n\t\tSystem.out.println(apples);\r\n\t   } \r\n\r\n\t    public int getWeight() {\r\n\t\t   return weight;\r\n\t    }\r\n\r\n\t   public void setWeight(int weight) {\r\n\t\t   this.weight = weight;\r\n\t    }\r\n\r\n\t   public int getCost() {\r\n\t\t   return cost;\r\n\t   }\r\n\r\n       public void setCost(int cost) {\r\n\t\t this.cost = cost;\r\n\t    }\r\n\r\n\t   @Override\r\n\t   public String toString() {\r\n\t\t   return &quot;Apple [weight=&quot; + weight + &quot;, cost=&quot; + cost + &quot;]&quot;;\r\n\t    }\r\n    }\r\n\r\nIf you run above code you will get RuntimeError : `Apple cannot be cast to java.lang.Comparable`, because compiler has to way to figure out how do you want to compare your apples. \r\nSo let&#39;s fix it :\r\n  Let&#39;s implement `Comparable` interface\r\n \r\n\r\n      public class Apple implements Comparable&lt;Apple&gt; {\r\n\r\nand override `compareTo` method\r\n\r\n   \r\n\r\n     @Override\r\n    \tpublic int compareTo(Object obj) {\r\n    \t\t\r\n    \t\tint cost = ((Apple) obj).getCost();\r\n    \t\treturn this.getCost() - cost; // sorting in ascending order.\r\n    \t\t\r\n    \t\t// change to this to sort in Descending order\r\n            // return cost - this.getCost();\r\n    \t}\r\n\r\nNow with this changes, let&#39;s run our code :\r\n\r\n    [Apple [weight=2, cost=10], Apple [weight=3, cost=12]]\r\n    \r\n\r\n Our collection is sorted by cost in ascending order.\r\n\r\nNow what if you don&#39;t have access to `Apple` class and you can&#39;t change source code to implement `Comparable`.\r\n\r\nThis is where `Comparator` helps. \r\n\r\nRemove `implements Comparable`, as we assume we can&#39;t modify this class\r\n\r\n    public class Apple {\r\n    \r\nand remove method\r\n\r\n    @Override\r\n    public String toString() {\r\n    \treturn &quot;Apple [weight=&quot; + weight + &quot;, cost=&quot; + cost + &quot;]&quot;;\r\n    }\r\n\r\nAdd comparator implementation :\r\n  \r\n\r\n      public class AppleComparator implements Comparator&lt;Apple&gt; {\r\n        \r\n        \t@Override\r\n        \tpublic int compare(Apple app1, Apple app2) {\r\n        \t\treturn app1.getCost() - app2.getCost();\r\n        \t}\r\n    \r\n    }\r\n\r\nNow I can just supply `Comparator` to collection to express my intend\r\n\r\n\tSet&lt;Apple&gt; apples = new TreeSet&lt;&gt;(new AppleComparator());\r\n    \r\nCollection again will be sorted by cost, accordingly to supplied Comparator.\r\nSo we need to supply either `Comparator` or `Comparable` in order to get them stored in the collection, particularly in `TreeSet`.\r\n\r\n\r\nNow regarding your question : There is no connection between `Comparator` and `equals()` method . There is only required consistency between `Comparable` (compareTo() method ) and `equals()` method.\r\n\r\n\r\nExample - in above mentioned `Apple` class, in version that implements Comparable, \r\nwe introduce new logic for determining equality. The `compareTo()` method returns 0 if two objects are equal, while your `equals()` method returns true if two objects are equal.\r\n\r\n\r\nA natural ordering that uses `compareTo()` required to be consistent with equals iff x.equals(y) is true whenever x.compareTo(y) equals 0. So you have to make your `Comparable` class consistent with equals because some Java collection classes may behave unpredictably if the `compareTo()` and `equals()` methods are not returning consistent results. \r\n\r\n\r\nThe following example shows compareTo() method that is not consistent with equals:\r\n\r\n    public class Apple implements Comparable&lt;Apple&gt; { \r\n    \r\n    private int weight;\r\n    private int cost;\r\n    private String color;\r\n    \r\n    public boolean equals(Object obj) {\r\n       if(!(obj instanceof Apple)) { \r\n          return false;\r\n      }\r\n       Apple other = (Apple) obj; \r\n        return this.weight == other.weight;\r\n      }\r\n    \r\n    public int compareTo(Apple obj) {\r\n        return this.cost.compareTo(obj.cost); }\r\n     }\r\n\r\nIf we want to sort Apple objects by cost, but cost may not be unique. There could two objects with the same cost. Therefore, the return value of `compareTo()` might not be 0 when comparing two equal `Apple` objects, which mean that this `compareTo()` method is not consistent with `equals()`. \r\n\r\n  [1]: https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object)\r\n\r\n","title":"Comparator : Equals method functionality","body":"<p><code>equals()</code> method of the class, <code>Comparator</code> and <code>Comparator</code> require equals consistency because some Java collection classes may behave unpredictably if the <code>compareTo()</code> and <code>equals()</code> methods are not returning consistent results.</p>\n\n<p>Java uses == operator to compare two primitives and/or to check if two variables refer to the same object. \nExample :</p>\n\n<pre><code>String apple1 = new String(\"apple\");\nString apple2 = new String(\"apple\"); \nSystem.out.println(apple1.equals(apple2)); // true\n\nStringBuilder app1 = new StringBuilder(\"apple\"); \nStringBuilder app2 = new StringBuilder(\"apple\"); \nSystem.out.println(app1.equals(app2));   // false\n</code></pre>\n\n<p>As you can see we get different behavior. Why is that? This happens because String class implements an equals() method, which checks that the values are the same. On the other hand, StringBuilder does not implement equals() method, instead it uses the implementation of equals() provided by <code>Object</code> class. And implementation provided(inherited) by <code>Object</code> class does only simply checks if the two referred objects are the same.</p>\n\n<p>So to check if two objects are equivalent Java uses the <code>equals()</code> method and whenever you introduce your own type you must overrides <code>equals()</code> method if you do not want to rely on <code>Object</code> class implementation of <code>equals()</code> method </p>\n\n<p>Let's for example introduce our own type : simple class Apple</p>\n\n<pre><code>public class Apple  {\n\n    private int weight;\n    private int cost;\n    private String color;\n</code></pre>\n\n<p>Now how do would you decide if two apples are equal? By color, by weight, by price or something else? This is why you need to supply explicitly your own equals method, so objects of your type can be compared for equality.</p>\n\n<p>Example below compares two <code>Apple</code> object for equality, and says that two object are equal if they belong to the same 'Apple' class and if their weight and cost is the same. Notice we do not compare by color, we assume that color is irrelevant in our case, which means that we accept the fact that apples of different colors, but with the same weight and same cost are considered equals. </p>\n\n<pre><code>    @Override\n    public boolean equals(Object obj) {\n        if ( !(obj instanceof Apple)) return false;    \n        if (obj == null)\n            return false;\n        if (getClass() != obj.getClass())\n            return false;\n        Apple other = (Apple) obj;\n        if (cost != other.cost and weight != other.weight )\n            return false;\n        return true;\n    }\n</code></pre>\n\n<p>You can implement any logic you like for your <code>equals()</code> method. Java <code>equals()</code> method is very important and it provides contract or important rules developer shall follow. I will not list them, you get them from <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#equals(java.lang.Object)\" rel=\"noreferrer\">here</a>, they are logic and pretty straight forward.</p>\n\n<p>There is another contract of <code>equals()</code> - whenever you override <code>equals()</code>, you are also expected to override <code>hashCode()</code> method. The reason behind that is because hashcode is used internally by some of Java collections, when object is stored as a key in the map. </p>\n\n<p>Hashcode is a number that categorizes object into categories. Imagine you are given various sorts of apples(red, green, yellow) and asked to give them back when asked for particular sort. It would be much efficient and faster if you categorize them, put each in a different buckets accordingly and whenever asked for particular sort (for simplicity let's say red apple), and as you have already sorted and categorized them, you can retrieve them much faster. Hope it is clear now why do you need to implement <code>hashcode()</code>. <code>hashcode()</code> has it's own contract or rules same as <code>equals()</code> method. They pretty much make common sense :</p>\n\n<p>First, result of <code>hashcode()</code> within same program shall not change. What it means that in your <code>hascode()</code> calculations you should not include variable that my change during execution of a program. For example if cost of Apple's is mutable, i.e. it may change, it is not good idea to include them into hashcode() calculation, otherwise results would be inconsistent.</p>\n\n<p>Second rule says, that when called with two objects, if <code>equals()</code> returns true then  calling <code>hashCode()</code> on each of those objects must retrieve the same result. But if <code>equals()</code> returns false when called with two objects, calling <code>hashCode()</code> on each of those objects does not necessary have to return a different result. Confusing? Why? Because <code>hashCode()</code> results are not required to be unique when called on unequal objects - you may put two unequal object in one bucket.</p>\n\n<p>Now regarding <code>Comparator</code> - it is easier to understand it's logic when you introduce your own type, instead of using built-in types.</p>\n\n<p>For example let's say we have class <code>Apple</code> with two attributes : <code>weight</code> and <code>price</code> and want to put out object this type into sorted collection <code>TreeSet</code>.</p>\n\n<pre><code>public class Apple  {\n\n    private int weight;\n    private int cost;\n</code></pre>\n\n<p>Now how do you want this apples to be sorted inside collection - do you want to sort them by <code>weight</code> or by <code>price</code>? How shall compiler decide?</p>\n\n<p>Supplying appropriate <code>Comparator</code>or <code>Comparable</code> allows you to pass your intent.\nLet's try to add object to collection.</p>\n\n<pre><code>  public class Apple {\n\n    private int weight;\n    private int cost;\n\n  public static void main(String[] args) {\n    Apple redApple = new Apple();\n    redApple.setCost(10);\n    redApple.setWeight(2);\n\n    Apple greenApple = new Apple();\n    greenApple.setCost(12);\n    greenApple.setWeight(3);\n\n    Set&lt;Apple&gt; apples = new TreeSet&lt;&gt;();\n    apples.add(redApple);\n    apples.add(greenApple);\n\n    System.out.println(apples);\n   } \n\n    public int getWeight() {\n       return weight;\n    }\n\n   public void setWeight(int weight) {\n       this.weight = weight;\n    }\n\n   public int getCost() {\n       return cost;\n   }\n\n   public void setCost(int cost) {\n     this.cost = cost;\n    }\n\n   @Override\n   public String toString() {\n       return \"Apple [weight=\" + weight + \", cost=\" + cost + \"]\";\n    }\n}\n</code></pre>\n\n<p>If you run above code you will get RuntimeError : <code>Apple cannot be cast to java.lang.Comparable</code>, because compiler has to way to figure out how do you want to compare your apples. \nSo let's fix it :\n  Let's implement <code>Comparable</code> interface</p>\n\n<pre><code>  public class Apple implements Comparable&lt;Apple&gt; {\n</code></pre>\n\n<p>and override <code>compareTo</code> method</p>\n\n<pre><code> @Override\n    public int compareTo(Object obj) {\n\n        int cost = ((Apple) obj).getCost();\n        return this.getCost() - cost; // sorting in ascending order.\n\n        // change to this to sort in Descending order\n        // return cost - this.getCost();\n    }\n</code></pre>\n\n<p>Now with this changes, let's run our code :</p>\n\n<pre><code>[Apple [weight=2, cost=10], Apple [weight=3, cost=12]]\n</code></pre>\n\n<p>Our collection is sorted by cost in ascending order.</p>\n\n<p>Now what if you don't have access to <code>Apple</code> class and you can't change source code to implement <code>Comparable</code>.</p>\n\n<p>This is where <code>Comparator</code> helps. </p>\n\n<p>Remove <code>implements Comparable</code>, as we assume we can't modify this class</p>\n\n<pre><code>public class Apple {\n</code></pre>\n\n<p>and remove method</p>\n\n<pre><code>@Override\npublic String toString() {\n    return \"Apple [weight=\" + weight + \", cost=\" + cost + \"]\";\n}\n</code></pre>\n\n<p>Add comparator implementation :</p>\n\n<pre><code>  public class AppleComparator implements Comparator&lt;Apple&gt; {\n\n        @Override\n        public int compare(Apple app1, Apple app2) {\n            return app1.getCost() - app2.getCost();\n        }\n\n}\n</code></pre>\n\n<p>Now I can just supply <code>Comparator</code> to collection to express my intend</p>\n\n<pre><code>Set&lt;Apple&gt; apples = new TreeSet&lt;&gt;(new AppleComparator());\n</code></pre>\n\n<p>Collection again will be sorted by cost, accordingly to supplied Comparator.\nSo we need to supply either <code>Comparator</code> or <code>Comparable</code> in order to get them stored in the collection, particularly in <code>TreeSet</code>.</p>\n\n<p>Now regarding your question : There is no connection between <code>Comparator</code> and <code>equals()</code> method . There is only required consistency between <code>Comparable</code> (compareTo() method ) and <code>equals()</code> method.</p>\n\n<p>Example - in above mentioned <code>Apple</code> class, in version that implements Comparable, \nwe introduce new logic for determining equality. The <code>compareTo()</code> method returns 0 if two objects are equal, while your <code>equals()</code> method returns true if two objects are equal.</p>\n\n<p>A natural ordering that uses <code>compareTo()</code> required to be consistent with equals iff x.equals(y) is true whenever x.compareTo(y) equals 0. So you have to make your <code>Comparable</code> class consistent with equals because some Java collection classes may behave unpredictably if the <code>compareTo()</code> and <code>equals()</code> methods are not returning consistent results. </p>\n\n<p>The following example shows compareTo() method that is not consistent with equals:</p>\n\n<pre><code>public class Apple implements Comparable&lt;Apple&gt; { \n\nprivate int weight;\nprivate int cost;\nprivate String color;\n\npublic boolean equals(Object obj) {\n   if(!(obj instanceof Apple)) { \n      return false;\n  }\n   Apple other = (Apple) obj; \n    return this.weight == other.weight;\n  }\n\npublic int compareTo(Apple obj) {\n    return this.cost.compareTo(obj.cost); }\n }\n</code></pre>\n\n<p>If we want to sort Apple objects by cost, but cost may not be unique. There could two objects with the same cost. Therefore, the return value of <code>compareTo()</code> might not be 0 when comparing two equal <code>Apple</code> objects, which mean that this <code>compareTo()</code> method is not consistent with <code>equals()</code>. </p>\n"},{"tags":[],"owner":{"account_id":9735171,"reputation":2264,"user_id":7218656,"accept_rate":75,"display_name":"Arun Sudhakaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1501425323,"creation_date":1501423468,"answer_id":45400634,"question_id":45397657,"body_markdown":"I don&#39;t understand why you are linking the `Comparator` and the `equals()` method. The `interfaces` like `Comparable` and `Comparator`are used for giving a comparison mechanism, like if you are putting data into a `collection` which is designed for `sorting purpose`, then it should have a comparison mechanism. Here is an example\r\n\r\n    package snippet;\r\n    \r\n    import java.util.Iterator;\r\n    import java.util.Set;\r\n    import java.util.TreeSet;\r\n    \r\n    class Person {\r\n    \t\r\n    \tprivate int id;\r\n    \tprivate String name;\r\n    \tprivate String code;\r\n    \tprivate double salary;\r\n    \tpublic int getId() {\r\n    \t\treturn id;\r\n    \t}\r\n    \tpublic void setId(int id) {\r\n    \t\tthis.id = id;\r\n    \t}\r\n    \tpublic String getName() {\r\n    \t\treturn name;\r\n    \t}\r\n    \tpublic void setName(String name) {\r\n    \t\tthis.name = name;\r\n    \t}\r\n    \tpublic String getCode() {\r\n    \t\treturn code;\r\n    \t}\r\n    \tpublic void setCode(String code) {\r\n    \t\tthis.code = code;\r\n    \t}\r\n    \tpublic double getSalary() {\r\n    \t\treturn salary;\r\n    \t}\r\n    \tpublic void setSalary(double salary) {\r\n    \t\tthis.salary = salary;\r\n    \t}\r\n    \tpublic boolean equals(Object obj) {    \t\t\r\n\t\t    if(obj != null &amp;&amp; (obj instanceof Person)) {\r\n                Person other = (Person) obj;\r\n\t\t\t    return this.code.equals(other.getCode());\r\n    \t\t}\r\n    \t\treturn false;\r\n    \t}\r\n    \tpublic Person(int id, String name, String code, double salary) {\r\n    \t\tsuper();\r\n    \t\tthis.id = id;\r\n    \t\tthis.name = name;\r\n    \t\tthis.code = code;\r\n    \t\tthis.salary = salary;\r\n    \t}\r\n    }\r\n    \r\n    public class EqualsMethodImpl\r\n    {\r\n    \tpublic static void main(String[] args) {\r\n    \t\tSet&lt;Person&gt; set = new TreeSet&lt;Person&gt;();\r\n    \t\tPerson p1 = new Person(1, &quot;Sam&quot;, &quot;M-1-SAM-50&quot;, 50000.00);\r\n    \t\tPerson p2 = new Person(2, &quot;Diaz&quot;, &quot;M-1-SAM-35&quot;, 35000.00);\r\n    \t\tPerson p3 = new Person(3, &quot;Remy&quot;, &quot;M-1-SAM-100&quot;, 100000.00);\r\n    \t\tPerson p4 = new Person(4, &quot;Cesar&quot;, &quot;M-1-SAM-80&quot;, 80000.00);\r\n    \t\tPerson p5 = new Person(5, &quot;Rino&quot;, &quot;M-1-SAM-5&quot;, 5000.00);\r\n    \t\t\r\n    \t\tset.add(p1);\r\n    \t\tset.add(p2);\r\n    \t\tset.add(p3);\r\n    \t\tset.add(p4);\r\n    \t\tset.add(p5);\r\n    \t\t\r\n    \t\tprintPersons(set);\r\n    \t}\r\n    \t\r\n    \tprivate static void printPersons(Set&lt;Person&gt; set) {\r\n    \t\tSystem.out.println(&quot;Id\\tName\\tCode\\t\\tSalary&quot;);\r\n    \t\tIterator&lt;Person&gt; perItr = set.iterator();\t\t\r\n    \t\twhile(perItr.hasNext()) {\r\n    \t\t\tPerson p = perItr.next();\r\n    \t\t\tSystem.out.println(p.getId()+&quot;\\t&quot;+p.getName()+&quot;\\t&quot;+p.getCode()+&quot;\\t&quot;+p.getSalary());\r\n    \t\t}\r\n    \t}\r\n    }\r\n\r\nWhile you running this code you will get `ClasCastException` at line `set.add(p1);`, why because the collection `TreeSet` is confused about on which attribute of `Peron` class should it do the sorting. That&#39;s where the `interfaces` like `Comparable` and `Comparator` have their significance.\r\n\r\nAdd this code to your `Person` class\r\n\r\n    public int compareTo(Person other) {\r\n\t\tDouble person1Salary = this.getSalary();\r\n\t\tDouble person2Salary = other.getSalary();\r\n\t    return person1Salary.compareTo(person2Salary);\r\n\t}\r\n\r\nby making your class Comparable type like `Person implements Comparable&lt;Person&gt;`\r\n\r\nSo by this code you are explaining the collection on which attribute we need to do the sorting. So when you print the content of `Set` it will be ordered on the base salary (ascending by default).\r\n\r\nThe Wrapper classes like `Byte, Short, Integer, Long, Float, Double` and other predefied classes like `String` all are implementing `Comaparable` interface and that&#39;s why you can simply pass them to a Sortable collection.\r\n\r\nNow coming to `equals` method, it is used to check the equality of two objects, the traditional `equals` method inherited from Object class will check equality based on address locations. So take a case in Person class where I haven&#39;t overrided `equals` method and I&#39;m writing a code like this\r\n\r\n    Person p1 = new Person(1, &quot;Sam&quot;, &quot;M-1-SAM-50&quot;, 50000.00);\r\n    Person p2 = new Person(1, &quot;Sam&quot;, &quot;M-1-SAM-50&quot;, 50000.00);\r\n    System.out.println(p1.equals(p2));\r\n\r\nIt will return false because both are two different objects placed in two different address locations, but we know that the objects are having data of the same person. That&#39;s the place where we override `equals()` method like I did in my `Person` class based on `Person code`. In that case `System.out.println(p1.equals(p2));` will print true because the codes are equal. `equals()` method helps us in finding the duplicates. I hope this helps.","title":"Comparator : Equals method functionality","body":"<p>I don't understand why you are linking the <code>Comparator</code> and the <code>equals()</code> method. The <code>interfaces</code> like <code>Comparable</code> and <code>Comparator</code>are used for giving a comparison mechanism, like if you are putting data into a <code>collection</code> which is designed for <code>sorting purpose</code>, then it should have a comparison mechanism. Here is an example</p>\n\n<pre><code>package snippet;\n\nimport java.util.Iterator;\nimport java.util.Set;\nimport java.util.TreeSet;\n\nclass Person {\n\n    private int id;\n    private String name;\n    private String code;\n    private double salary;\n    public int getId() {\n        return id;\n    }\n    public void setId(int id) {\n        this.id = id;\n    }\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        this.name = name;\n    }\n    public String getCode() {\n        return code;\n    }\n    public void setCode(String code) {\n        this.code = code;\n    }\n    public double getSalary() {\n        return salary;\n    }\n    public void setSalary(double salary) {\n        this.salary = salary;\n    }\n    public boolean equals(Object obj) {         \n        if(obj != null &amp;&amp; (obj instanceof Person)) {\n            Person other = (Person) obj;\n            return this.code.equals(other.getCode());\n        }\n        return false;\n    }\n    public Person(int id, String name, String code, double salary) {\n        super();\n        this.id = id;\n        this.name = name;\n        this.code = code;\n        this.salary = salary;\n    }\n}\n\npublic class EqualsMethodImpl\n{\n    public static void main(String[] args) {\n        Set&lt;Person&gt; set = new TreeSet&lt;Person&gt;();\n        Person p1 = new Person(1, \"Sam\", \"M-1-SAM-50\", 50000.00);\n        Person p2 = new Person(2, \"Diaz\", \"M-1-SAM-35\", 35000.00);\n        Person p3 = new Person(3, \"Remy\", \"M-1-SAM-100\", 100000.00);\n        Person p4 = new Person(4, \"Cesar\", \"M-1-SAM-80\", 80000.00);\n        Person p5 = new Person(5, \"Rino\", \"M-1-SAM-5\", 5000.00);\n\n        set.add(p1);\n        set.add(p2);\n        set.add(p3);\n        set.add(p4);\n        set.add(p5);\n\n        printPersons(set);\n    }\n\n    private static void printPersons(Set&lt;Person&gt; set) {\n        System.out.println(\"Id\\tName\\tCode\\t\\tSalary\");\n        Iterator&lt;Person&gt; perItr = set.iterator();       \n        while(perItr.hasNext()) {\n            Person p = perItr.next();\n            System.out.println(p.getId()+\"\\t\"+p.getName()+\"\\t\"+p.getCode()+\"\\t\"+p.getSalary());\n        }\n    }\n}\n</code></pre>\n\n<p>While you running this code you will get <code>ClasCastException</code> at line <code>set.add(p1);</code>, why because the collection <code>TreeSet</code> is confused about on which attribute of <code>Peron</code> class should it do the sorting. That's where the <code>interfaces</code> like <code>Comparable</code> and <code>Comparator</code> have their significance.</p>\n\n<p>Add this code to your <code>Person</code> class</p>\n\n<pre><code>public int compareTo(Person other) {\n    Double person1Salary = this.getSalary();\n    Double person2Salary = other.getSalary();\n    return person1Salary.compareTo(person2Salary);\n}\n</code></pre>\n\n<p>by making your class Comparable type like <code>Person implements Comparable&lt;Person&gt;</code></p>\n\n<p>So by this code you are explaining the collection on which attribute we need to do the sorting. So when you print the content of <code>Set</code> it will be ordered on the base salary (ascending by default).</p>\n\n<p>The Wrapper classes like <code>Byte, Short, Integer, Long, Float, Double</code> and other predefied classes like <code>String</code> all are implementing <code>Comaparable</code> interface and that's why you can simply pass them to a Sortable collection.</p>\n\n<p>Now coming to <code>equals</code> method, it is used to check the equality of two objects, the traditional <code>equals</code> method inherited from Object class will check equality based on address locations. So take a case in Person class where I haven't overrided <code>equals</code> method and I'm writing a code like this</p>\n\n<pre><code>Person p1 = new Person(1, \"Sam\", \"M-1-SAM-50\", 50000.00);\nPerson p2 = new Person(1, \"Sam\", \"M-1-SAM-50\", 50000.00);\nSystem.out.println(p1.equals(p2));\n</code></pre>\n\n<p>It will return false because both are two different objects placed in two different address locations, but we know that the objects are having data of the same person. That's the place where we override <code>equals()</code> method like I did in my <code>Person</code> class based on <code>Person code</code>. In that case <code>System.out.println(p1.equals(p2));</code> will print true because the codes are equal. <code>equals()</code> method helps us in finding the duplicates. I hope this helps.</p>\n"},{"tags":[],"owner":{"account_id":11390544,"reputation":234,"user_id":8376357,"display_name":"Stingy"},"comment_count":0,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1501433631,"creation_date":1501433187,"answer_id":45402281,"question_id":45397657,"body_markdown":"First of all, *please* use generics. With the added compile-time type-safety, your code will be more robust, which in turn will make your life (and that of those who read your code) much easier (if you know what you&#39;re doing, of course). Your class `MyComparator` implements the raw type `Comparator`, which means that by just looking at its type declaration, you have no way of knowing which types of objects it compares. You have to look at the source (or, alternatively, at the documentation) in order to find out that, if any object that is not a subtype of `Integer` is passed, a `ClassCastException` will be thrown *at runtime*. On the other hand, if it were to implement `Comparator&lt;Integer&gt;`, the compiler will never let it come to this, because then, the method signature of the `compare` method would read `compare(Integer, Integer)` instead of `compare(Object, Object)`, meaning that, if an object is not an `Integer`, it can never be passed to the method in the first place, which is something that can already be ensured *at compile time*.\r\n\r\nHaving that out of the way, you seem to be confusing `Comparator` and `Comparable`. A `Comparable` means that something has a &quot;natural ordering&quot;, as Java calls it. An integer is a simple example, because a number is inherently quantifiable, so comparing two numbers is unambiguous (`Double.NaN` is a special case, but that is another matter). Thus, `Integer` implements `Comparable&lt;Integer&gt;` (but not `Comparable&lt;Number&gt;`, interestingly). However, occasions might arise when you want to compare things that are not inherently quantifiable. Arun Sudhakaran used the idea of comparing persons as an example in his answer. He suggested making the `Person` class implement `Comparable&lt;Person&gt;` so that you can pass it to a `TreeSet&lt;Person&gt;`, but this seems counterintuitive to me, for the precise reason that a person is not inherently quantifiable. You might want to sort the persons by their salary, but this quantification is not inherent to a person, it is only specific to your particular intention in that situation. So this would be a use case for a `Comparator&lt;Person&gt;`. You can sort the persons by their age, salary, height, whatever, by providing a respective `Comparator&lt;Person&gt;`, but a `Person` is not by itself comparable.\r\n\r\nNote that the two are not mutually exclusive – you can also compare objects that implement `Comparable` by using a `Comparator` whose ordering differs from the natural ordering of the `Comparable` objects.\r\n\r\nNow when the javadocs talk about comparisons being &quot;consistent with equals&quot;, then &quot;equals&quot; in this context always refers to the `equals(Object)` method *of the object to be compared*, may that object implement `Comparable` itself or just be compared to another object with a `Comparator`. In other words, if a comparison method (be that a `Comparator` or a natural ordering) deems two objects equal that are also equal according to their respective `equals(Object)` method, and vice versa, this comparison method is &quot;consistent with equals&quot; This has nothing to do with the `equals(Object)` method of a `Comparator`, which was already pointed out by Mike Nakis (unless you want to compare `Comparator`s).\r\n\r\nAn example of a natural ordering that is inconsistent with equals is that of the class `BigDecimal`. Two `BigDecimal`s representing `2.0` and `2.00` will *not* be equal according to `BigDecimal.equals(Object)`, but they *will* be considered equal by their natural ordering (i.e. by `compareTo(BigDecimal)`).","title":"Comparator : Equals method functionality","body":"<p>First of all, <em>please</em> use generics. With the added compile-time type-safety, your code will be more robust, which in turn will make your life (and that of those who read your code) much easier (if you know what you're doing, of course). Your class <code>MyComparator</code> implements the raw type <code>Comparator</code>, which means that by just looking at its type declaration, you have no way of knowing which types of objects it compares. You have to look at the source (or, alternatively, at the documentation) in order to find out that, if any object that is not a subtype of <code>Integer</code> is passed, a <code>ClassCastException</code> will be thrown <em>at runtime</em>. On the other hand, if it were to implement <code>Comparator&lt;Integer&gt;</code>, the compiler will never let it come to this, because then, the method signature of the <code>compare</code> method would read <code>compare(Integer, Integer)</code> instead of <code>compare(Object, Object)</code>, meaning that, if an object is not an <code>Integer</code>, it can never be passed to the method in the first place, which is something that can already be ensured <em>at compile time</em>.</p>\n\n<p>Having that out of the way, you seem to be confusing <code>Comparator</code> and <code>Comparable</code>. A <code>Comparable</code> means that something has a \"natural ordering\", as Java calls it. An integer is a simple example, because a number is inherently quantifiable, so comparing two numbers is unambiguous (<code>Double.NaN</code> is a special case, but that is another matter). Thus, <code>Integer</code> implements <code>Comparable&lt;Integer&gt;</code> (but not <code>Comparable&lt;Number&gt;</code>, interestingly). However, occasions might arise when you want to compare things that are not inherently quantifiable. Arun Sudhakaran used the idea of comparing persons as an example in his answer. He suggested making the <code>Person</code> class implement <code>Comparable&lt;Person&gt;</code> so that you can pass it to a <code>TreeSet&lt;Person&gt;</code>, but this seems counterintuitive to me, for the precise reason that a person is not inherently quantifiable. You might want to sort the persons by their salary, but this quantification is not inherent to a person, it is only specific to your particular intention in that situation. So this would be a use case for a <code>Comparator&lt;Person&gt;</code>. You can sort the persons by their age, salary, height, whatever, by providing a respective <code>Comparator&lt;Person&gt;</code>, but a <code>Person</code> is not by itself comparable.</p>\n\n<p>Note that the two are not mutually exclusive – you can also compare objects that implement <code>Comparable</code> by using a <code>Comparator</code> whose ordering differs from the natural ordering of the <code>Comparable</code> objects.</p>\n\n<p>Now when the javadocs talk about comparisons being \"consistent with equals\", then \"equals\" in this context always refers to the <code>equals(Object)</code> method <em>of the object to be compared</em>, may that object implement <code>Comparable</code> itself or just be compared to another object with a <code>Comparator</code>. In other words, if a comparison method (be that a <code>Comparator</code> or a natural ordering) deems two objects equal that are also equal according to their respective <code>equals(Object)</code> method, and vice versa, this comparison method is \"consistent with equals\" This has nothing to do with the <code>equals(Object)</code> method of a <code>Comparator</code>, which was already pointed out by Mike Nakis (unless you want to compare <code>Comparator</code>s).</p>\n\n<p>An example of a natural ordering that is inconsistent with equals is that of the class <code>BigDecimal</code>. Two <code>BigDecimal</code>s representing <code>2.0</code> and <code>2.00</code> will <em>not</em> be equal according to <code>BigDecimal.equals(Object)</code>, but they <em>will</em> be considered equal by their natural ordering (i.e. by <code>compareTo(BigDecimal)</code>).</p>\n"},{"comments":[{"owner":{"account_id":404649,"reputation":57192,"user_id":773113,"accept_rate":72,"display_name":"Mike Nakis"},"score":0,"creation_date":1669201575,"post_id":54112941,"comment_id":131589359,"body_markdown":"This answer was written one and a half year after my answer, but it is saying the same thing without adding anything new. If you have some improvement to suggest with regards to wording, the recommended approach is to edit the question whose wording you think you can improve, or add a comment suggesting how the wording could be improved.","body":"This answer was written one and a half year after my answer, but it is saying the same thing without adding anything new. If you have some improvement to suggest with regards to wording, the recommended approach is to edit the question whose wording you think you can improve, or add a comment suggesting how the wording could be improved."}],"tags":[],"owner":{"account_id":12863367,"reputation":442,"user_id":9304436,"display_name":"Hitesh"},"comment_count":1,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1547046028,"creation_date":1547046028,"answer_id":54112941,"question_id":45397657,"body_markdown":"The equals method is used to check the Equality of two comparators i.e in equals method you can specify what makes ComparatorA and ComparatorB Identical, it has nothing to do with the elements that are sorted using these comparators. ","title":"Comparator : Equals method functionality","body":"<p>The equals method is used to check the Equality of two comparators i.e in equals method you can specify what makes ComparatorA and ComparatorB Identical, it has nothing to do with the elements that are sorted using these comparators. </p>\n"},{"tags":[],"owner":{"account_id":16636588,"reputation":1,"user_id":12023120,"display_name":"azeem mirza"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1627711625,"creation_date":1627711625,"answer_id":68599609,"question_id":45397657,"body_markdown":"you don&#39;t need to sort the values of Treeset. TreesSet elements are automatically sorted in ascending order.\r\n\r\n    class TreeSet1{  \r\n       public static void main(String args[]){  \r\n           //Creating and adding elements  \r\n            TreeSet&lt;String&gt; al=new TreeSet&lt;String&gt;();  \r\n            al.add(&quot;Ravi&quot;);  \r\n            al.add(&quot;Vijay&quot;);  \r\n            al.add(&quot;Ravi&quot;);  \r\n            al.add(&quot;Ajay&quot;);  \r\n            //Traversing elements  \r\n           Iterator&lt;String&gt; itr=al.iterator();  \r\n              while(itr.hasNext()){  \r\n                 System.out.println(itr.next());  \r\n              }  \r\n        }  \r\n   }  \r\n\r\n\r\noutput=\r\nAjay\r\nRavi\r\nVijay","title":"Comparator : Equals method functionality","body":"<p>you don't need to sort the values of Treeset. TreesSet elements are automatically sorted in ascending order.</p>\n<pre><code>class TreeSet1{  \n   public static void main(String args[]){  \n       //Creating and adding elements  \n        TreeSet&lt;String&gt; al=new TreeSet&lt;String&gt;();  \n        al.add(&quot;Ravi&quot;);  \n        al.add(&quot;Vijay&quot;);  \n        al.add(&quot;Ravi&quot;);  \n        al.add(&quot;Ajay&quot;);  \n        //Traversing elements  \n       Iterator&lt;String&gt; itr=al.iterator();  \n          while(itr.hasNext()){  \n             System.out.println(itr.next());  \n          }  \n    }  \n</code></pre>\n<p>}</p>\n<p>output=\nAjay\nRavi\nVijay</p>\n"}],"owner":{"account_id":5052975,"reputation":93,"user_id":5689621,"display_name":"sparsh khandelwal"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":18179,"favorite_count":0,"down_vote_count":0,"up_vote_count":6,"answer_count":7,"score":6,"last_activity_date":1669202500,"creation_date":1501401512,"question_id":45397657,"body_markdown":"Actually i am going through one of the tutorial in which it mentioned that when we need to implement the `Comparator` interface we can override `equals` method. however it is not necessary to override.\r\n\r\nSo just to understand better, I override the method as follows:\r\n\r\nTest.java\r\n   \r\n\r\n     import java.util.TreeSet;\r\n\r\n    public class Test\r\n    {\r\n        public static void main(String[] args)\r\n        {\r\n            TreeSet t = new TreeSet(new MyComparator());\r\n            t.add(1);\r\n            t.add(1);\r\n            t.add(2);\r\n            System.out.println(t);\r\n        }\r\n    }\r\n\r\nMyComparator.java\r\n\r\n    import java.util.Comparator;\r\n\r\n    public class MyComparator\r\n        implements Comparator\r\n    {\r\n        @Override\r\n        public int compare(Object o1, Object o2)\r\n        {\r\n            Integer i1 = (Integer) o1;\r\n            Integer i2 = (Integer) o2;\r\n            return i1.compareTo(i2);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o1)\r\n        {\r\n            return false;\r\n        }\r\n    }\r\n\r\nFor other scenario\r\n\r\n    import java.util.Comparator;\r\n    \r\n    public class MyComparator\r\n        implements Comparator\r\n    {\r\n        @Override\r\n        public int compare(Object o1, Object o2)\r\n        {\r\n            Integer i1 = (Integer) o1;\r\n            Integer i2 = (Integer) o2;\r\n            return i1.compareTo(i2);\r\n        }\r\n    \r\n        @Override\r\n        public boolean equals(Object o1)\r\n        {\r\n            return true;\r\n        }\r\n    }\r\n\r\nNo matter what I return from `equals` method either true or false .. it is returning the same `TreeSet` value.\r\n\r\nCan anyone can clear up the concept of functionality of `equals` method please?","title":"Comparator : Equals method functionality","body":"<p>Actually i am going through one of the tutorial in which it mentioned that when we need to implement the <code>Comparator</code> interface we can override <code>equals</code> method. however it is not necessary to override.</p>\n<p>So just to understand better, I override the method as follows:</p>\n<p>Test.java</p>\n<pre><code> import java.util.TreeSet;\n\npublic class Test\n{\n    public static void main(String[] args)\n    {\n        TreeSet t = new TreeSet(new MyComparator());\n        t.add(1);\n        t.add(1);\n        t.add(2);\n        System.out.println(t);\n    }\n}\n</code></pre>\n<p>MyComparator.java</p>\n<pre><code>import java.util.Comparator;\n\npublic class MyComparator\n    implements Comparator\n{\n    @Override\n    public int compare(Object o1, Object o2)\n    {\n        Integer i1 = (Integer) o1;\n        Integer i2 = (Integer) o2;\n        return i1.compareTo(i2);\n    }\n\n    @Override\n    public boolean equals(Object o1)\n    {\n        return false;\n    }\n}\n</code></pre>\n<p>For other scenario</p>\n<pre><code>import java.util.Comparator;\n\npublic class MyComparator\n    implements Comparator\n{\n    @Override\n    public int compare(Object o1, Object o2)\n    {\n        Integer i1 = (Integer) o1;\n        Integer i2 = (Integer) o2;\n        return i1.compareTo(i2);\n    }\n\n    @Override\n    public boolean equals(Object o1)\n    {\n        return true;\n    }\n}\n</code></pre>\n<p>No matter what I return from <code>equals</code> method either true or false .. it is returning the same <code>TreeSet</code> value.</p>\n<p>Can anyone can clear up the concept of functionality of <code>equals</code> method please?</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"score":0,"creation_date":1669156485,"post_id":74539642,"comment_id":131579698,"body_markdown":"Please, share your **attempt** and specify the problem you&#39;ve encountered. Every question on StackOverflow is expected to demonstrate an effort. See [How do I ask a good question?](https://stackoverflow.com/help/how-to-ask) and [Why is &quot;Can someone help me?&quot; not an actual question?](https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question)","body":"Please, share your <b>attempt</b> and specify the problem you&#39;ve encountered. Every question on StackOverflow is expected to demonstrate an effort. See <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> and <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is &quot;Can someone help me?&quot; not an actual question?</a>"},{"owner":{"account_id":1691630,"reputation":49583,"user_id":1553851,"accept_rate":73,"display_name":"shmosel"},"score":1,"creation_date":1669183161,"post_id":74539642,"comment_id":131583932,"body_markdown":"Is `latLng` ordered? Otherwise you&#39;re mapping indexes to arbitrary keys.","body":"Is <code>latLng</code> ordered? Otherwise you&#39;re mapping indexes to arbitrary keys."}],"answers":[{"tags":[],"owner":{"account_id":20044142,"reputation":65,"user_id":14694240,"display_name":"Metahuman Flash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669183788,"creation_date":1669182971,"answer_id":74542353,"question_id":74539642,"body_markdown":"Keep in mind that the `latLngMercator` values would be assigned to random `latLng` keys if the `Map` implementation that `latLng` uses does not maintain insertion order (like a `HashMap`). Depending on the intended functionality, a `LinkedHashMap` or another `Map` implementation that maintains insertion order might be the way to go.\r\n\r\nThis should work:\r\n```java\r\nIterator&lt;List&lt;Double&gt;&gt; iterator = latLngMercator.iterator();\r\nlatLng.forEach((key, value) -&gt; map.put(key, iterator.next()));\r\n```","title":"Zip keys of a Map&lt;string,List&lt;Double&gt;&gt; with a new List as old List was transformed","body":"<p>Keep in mind that the <code>latLngMercator</code> values would be assigned to random <code>latLng</code> keys if the <code>Map</code> implementation that <code>latLng</code> uses does not maintain insertion order (like a <code>HashMap</code>). Depending on the intended functionality, a <code>LinkedHashMap</code> or another <code>Map</code> implementation that maintains insertion order might be the way to go.</p>\n<p>This should work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Iterator&lt;List&lt;Double&gt;&gt; iterator = latLngMercator.iterator();\nlatLng.forEach((key, value) -&gt; map.put(key, iterator.next()));\n</code></pre>\n"}],"owner":{"account_id":801553,"reputation":97,"user_id":913643,"accept_rate":33,"display_name":"luckymanStefan"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":50,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74542353,"answer_count":1,"score":0,"last_activity_date":1669202332,"creation_date":1669155658,"question_id":74539642,"body_markdown":"How can I express the following snippet as a lambda?\r\n\r\n    int i = 0;\r\n    for (String key : latLng.keySet()) {\r\n        map.put(key, latLngMercator.get(i++));\r\n    }\r\n\r\nwhere `latLng` is a `Map&lt;String, List&lt;Double&gt;&gt;` and `latLngMercator` is a `List&lt;List&lt;Double&gt;&gt;`.\r\n\r\n\r\n\r\n","title":"Zip keys of a Map&lt;string,List&lt;Double&gt;&gt; with a new List as old List was transformed","body":"<p>How can I express the following snippet as a lambda?</p>\n<pre><code>int i = 0;\nfor (String key : latLng.keySet()) {\n    map.put(key, latLngMercator.get(i++));\n}\n</code></pre>\n<p>where <code>latLng</code> is a <code>Map&lt;String, List&lt;Double&gt;&gt;</code> and <code>latLngMercator</code> is a <code>List&lt;List&lt;Double&gt;&gt;</code>.</p>\n"},{"tags":["java","recursion","binary-tree","binary-search-tree","inorder"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1669152794,"post_id":74539180,"comment_id":131578751,"body_markdown":"What does &quot;*won&#39;t work*&quot; mean? Do you get a compilation error? If so: please [edit] the post, add the compiler error and highlight the line of code causing the compilation error. Does it throw an exception? If so: please [edit] the post, add the stack trace and highlight the line of code causing the exception. Do you observe unexpected behaviour? If so: please [edit] the post, add a [MRE], as we as expected and observed output.","body":"What does &quot;<i>won&#39;t work</i>&quot; mean? Do you get a compilation error? If so: please <a href=\"https://stackoverflow.com/posts/74539180/edit\">edit</a> the post, add the compiler error and highlight the line of code causing the compilation error. Does it throw an exception? If so: please <a href=\"https://stackoverflow.com/posts/74539180/edit\">edit</a> the post, add the stack trace and highlight the line of code causing the exception. Do you observe unexpected behaviour? If so: please <a href=\"https://stackoverflow.com/posts/74539180/edit\">edit</a> the post, add a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, as we as expected and observed output."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1669152806,"post_id":74539180,"comment_id":131578757,"body_markdown":"Please read: [Why is “Can someone help me?” not an actual question?](https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question)","body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is “Can someone help me?” not an actual question?</a>"}],"answers":[{"comments":[{"owner":{"account_id":24531038,"reputation":37,"user_id":18442815,"display_name":"Yousef"},"score":0,"creation_date":1669155420,"post_id":74539398,"comment_id":131579406,"body_markdown":"Would you happen to know why after updating current == null typo I get a stack overflow error after running test cases?","body":"Would you happen to know why after updating current == null typo I get a stack overflow error after running test cases?"},{"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"score":1,"creation_date":1669155524,"post_id":74539398,"comment_id":131579429,"body_markdown":"Because you&#39;re resetting `current` to the root every time, so you just loop forever.","body":"Because you&#39;re resetting <code>current</code> to the root every time, so you just loop forever."},{"owner":{"account_id":24531038,"reputation":37,"user_id":18442815,"display_name":"Yousef"},"score":0,"creation_date":1669164300,"post_id":74539398,"comment_id":131581098,"body_markdown":"I&#39;m struggling to understand how I would implement a help method to set up the initial call for getRootNode(). Would you mind giving me more guidance?","body":"I&#39;m struggling to understand how I would implement a help method to set up the initial call for getRootNode(). Would you mind giving me more guidance?"},{"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"score":1,"creation_date":1669167778,"post_id":74539398,"comment_id":131581593,"body_markdown":"I think you were most of the way there. Edited it into my answer.","body":"I think you were most of the way there. Edited it into my answer."}],"tags":[],"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669167766,"creation_date":1669153981,"answer_id":74539398,"question_id":74539180,"body_markdown":"``` \r\n public void boundedInorderTraverse(T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\r\n      BinaryNode&lt;T&gt; currentNode = getRootNode();\r\n```\r\nThis is a recursive algorithm; while the first time it&#39;s run it will be starting from the root, that&#39;s not the case every time. You should have `currentNode` as an argument to the function, call it on `getRoodNode()` from the call site (maybe make a helper function to set up the initial call), and then pass the left or right children for the recursive calls.\r\n```\r\n   \r\n      if(currentNode == null) {\r\n```\r\nPretty sure the above `current == null` is a typo, so fix that.\r\n```\r\n         BinaryNode&lt;T&gt; temp = currentNode.getLeftChild();\r\n         if(temp.getData().compareTo(lowerBound) &gt;= 0 || temp.getData().compareTo(upperBound) &lt;= 0) {\r\n```\r\n`||` there implies you accept anything that&#39;s over the lower bound OR over the upper bound - assuming the upper is greater than the lower, that&#39;s everything.\r\n\r\nAlso, Using `&lt;=` in both cases says that you&#39;re including both upper and lower bound. Usually it&#39;s standard to include the lower bound but not the upper. That&#39;s not a 100% rule but check the requirements to make sure.\r\n```\r\n         boundedInorderTraverse(lowerBound, upperBound, consumer);\r\n         consumer.accept(currentNode.getData());\r\n```\r\n&quot;In-Order&quot; means you check the left, then the parent, then the right. You check both children in the recursive call, so this means you&#39;re checking the left, then the right, then the parent, which would be post-order.\r\n```\r\n         }\r\n         temp = currentNode.getRightChild();\r\n         if(temp.getData().compareTo(lowerBound) &gt;= 0 || temp.getData().compareTo(upperBound) &lt;= 0) {\r\n         boundedInorderTraverse(lowerBound, upperBound, consumer);\r\n         consumer.accept(currentNode.getData());\r\n         }\r\n```\r\nDon&#39;t forget to fix all of the same issues in the right-child block as well as the left.\r\n```\r\n         \r\n      }\r\n   }\r\n```\r\nThe above section is fine.\r\n\r\nTo explain further on the `current` thing, you just need an entry point that finds the root and passes the other arguments through:\r\n\r\n    public void entryMethod(T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\r\n       BinaryNode&lt;T&gt; start = getRoodNode();\r\n       boundedInorderTraverse(start, lowerBound, upperBound, consumer);\r\n    }\r\n    \r\n    public void boundedInorderTraverse(BinaryNode&lt;T&gt; currentNode, T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\r\n        ...\r\n    }\r\n\r\n  ","title":"Trying to understand why this code for a recursive bounded inorder traversal won&#39;t work?","body":"<pre><code> public void boundedInorderTraverse(T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\n      BinaryNode&lt;T&gt; currentNode = getRootNode();\n</code></pre>\n<p>This is a recursive algorithm; while the first time it's run it will be starting from the root, that's not the case every time. You should have <code>currentNode</code> as an argument to the function, call it on <code>getRoodNode()</code> from the call site (maybe make a helper function to set up the initial call), and then pass the left or right children for the recursive calls.</p>\n<pre><code>   \n      if(currentNode == null) {\n</code></pre>\n<p>Pretty sure the above <code>current == null</code> is a typo, so fix that.</p>\n<pre><code>         BinaryNode&lt;T&gt; temp = currentNode.getLeftChild();\n         if(temp.getData().compareTo(lowerBound) &gt;= 0 || temp.getData().compareTo(upperBound) &lt;= 0) {\n</code></pre>\n<p><code>||</code> there implies you accept anything that's over the lower bound OR over the upper bound - assuming the upper is greater than the lower, that's everything.</p>\n<p>Also, Using <code>&lt;=</code> in both cases says that you're including both upper and lower bound. Usually it's standard to include the lower bound but not the upper. That's not a 100% rule but check the requirements to make sure.</p>\n<pre><code>         boundedInorderTraverse(lowerBound, upperBound, consumer);\n         consumer.accept(currentNode.getData());\n</code></pre>\n<p>&quot;In-Order&quot; means you check the left, then the parent, then the right. You check both children in the recursive call, so this means you're checking the left, then the right, then the parent, which would be post-order.</p>\n<pre><code>         }\n         temp = currentNode.getRightChild();\n         if(temp.getData().compareTo(lowerBound) &gt;= 0 || temp.getData().compareTo(upperBound) &lt;= 0) {\n         boundedInorderTraverse(lowerBound, upperBound, consumer);\n         consumer.accept(currentNode.getData());\n         }\n</code></pre>\n<p>Don't forget to fix all of the same issues in the right-child block as well as the left.</p>\n<pre><code>         \n      }\n   }\n</code></pre>\n<p>The above section is fine.</p>\n<p>To explain further on the <code>current</code> thing, you just need an entry point that finds the root and passes the other arguments through:</p>\n<pre><code>public void entryMethod(T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\n   BinaryNode&lt;T&gt; start = getRoodNode();\n   boundedInorderTraverse(start, lowerBound, upperBound, consumer);\n}\n\npublic void boundedInorderTraverse(BinaryNode&lt;T&gt; currentNode, T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\n    ...\n}\n</code></pre>\n"}],"owner":{"account_id":24531038,"reputation":37,"user_id":18442815,"display_name":"Yousef"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":63,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"closed_date":1669241855,"accepted_answer_id":74539398,"answer_count":1,"score":0,"last_activity_date":1669202240,"creation_date":1669152644,"question_id":74539180,"body_markdown":"I am having trouble understanding how to see if the node I am going over is within the bounds given. After seeing that I am supposed to call the consumer to process each entry in the traversal.\r\n\r\nAn example test case would be A lowerBound of 11 and an upperBound of 64 while traversing this tree It should have a visitation order of [11, 21, 23, 24, 27, 41, 52, 53, 62, 64].\r\n\r\nI need help figuring out how I get the helper method to give the rootNode while also giving the lower and upperBound.\r\n\r\n[![enter image description here][1]][1]\r\n\r\n   ```\r\n   public void boundedInorderTraverse(Consumer&lt;T&gt; consumer) {\r\n      boundedInorderTraverse(getRootNode(), consumer);\r\n   }\r\n\r\n   public void boundedInorderTraverse(T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\r\n      //BinaryNode&lt;T&gt; node = getRootNode();\r\n   \r\n      if(node != null) {\r\n         \r\n         if(node.getLeftChild().getData().compareTo(lowerBound) &gt;= 0 &amp;&amp; node.getLeftChild().getData().compareTo(upperBound) &lt;= 0) {\r\n            boundedInorderTraverse(lowerBound, upperBound, consumer);\r\n            consumer.accept(node.getData());\r\n         }\r\n         consumer.accept(node.getData());\r\n         if(node.getRightChild().getData().compareTo(lowerBound) &gt;= 0 || node.getRightChild().getData().compareTo(upperBound) &lt;= 0) {\r\n            boundedInorderTraverse(lowerBound, upperBound, consumer);\r\n            consumer.accept(node.getData());\r\n         }\r\n      }\r\n   } // end inorderTraverse\r\n```\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/f8s2o.png","title":"Trying to understand why this code for a recursive bounded inorder traversal won&#39;t work?","body":"<p>I am having trouble understanding how to see if the node I am going over is within the bounds given. After seeing that I am supposed to call the consumer to process each entry in the traversal.</p>\n<p>An example test case would be A lowerBound of 11 and an upperBound of 64 while traversing this tree It should have a visitation order of [11, 21, 23, 24, 27, 41, 52, 53, 62, 64].</p>\n<p>I need help figuring out how I get the helper method to give the rootNode while also giving the lower and upperBound.</p>\n<p><a href=\"https://i.stack.imgur.com/f8s2o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f8s2o.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>public void boundedInorderTraverse(Consumer&lt;T&gt; consumer) {\n   boundedInorderTraverse(getRootNode(), consumer);\n}\n\npublic void boundedInorderTraverse(T lowerBound, T upperBound, Consumer&lt;T&gt; consumer) {\n   //BinaryNode&lt;T&gt; node = getRootNode();\n\n   if(node != null) {\n      \n      if(node.getLeftChild().getData().compareTo(lowerBound) &gt;= 0 &amp;&amp; node.getLeftChild().getData().compareTo(upperBound) &lt;= 0) {\n         boundedInorderTraverse(lowerBound, upperBound, consumer);\n         consumer.accept(node.getData());\n      }\n      consumer.accept(node.getData());\n      if(node.getRightChild().getData().compareTo(lowerBound) &gt;= 0 || node.getRightChild().getData().compareTo(upperBound) &lt;= 0) {\n         boundedInorderTraverse(lowerBound, upperBound, consumer);\n         consumer.accept(node.getData());\n      }\n   }\n} // end inorderTraverse\n</code></pre>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"account_id":519535,"reputation":2273,"user_id":1303158,"display_name":"Bernie"},"score":0,"creation_date":1669167471,"post_id":74540759,"comment_id":131581546,"body_markdown":"The loop appears to be iterating over the array without waiting for a button click. Are you only seeing the last line of dialogue?","body":"The loop appears to be iterating over the array without waiting for a button click. Are you only seeing the last line of dialogue?"}],"answers":[{"comments":[{"owner":{"account_id":27019000,"reputation":13,"user_id":20577306,"display_name":"Miller"},"score":0,"creation_date":1669181036,"post_id":74542109,"comment_id":131583520,"body_markdown":"Thank you so much! You&#39;re right I really didn&#39;t need a loop in the first place. Also fixed the names based on java naming conventions. Thank you again!","body":"Thank you so much! You&#39;re right I really didn&#39;t need a loop in the first place. Also fixed the names based on java naming conventions. Thank you again!"}],"tags":[],"owner":{"account_id":1180113,"reputation":152335,"user_id":1155209,"display_name":"jewelsea"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1669181073,"creation_date":1669180861,"answer_id":74542109,"question_id":74540759,"body_markdown":"&gt; a loop that loops through the dialogue with every click\r\n\r\nYou have to change your thinking. You don’t use a loop for this. \r\n\r\nGUIs are event driven.  Users and systems generate events that you need to handle:\r\n\r\n 1. Store an index. \r\n 2. Provide an event handler.\r\n     * see the button `setOnAction` javadoc.\r\n 3. In the event handler, after checking that text remains:\r\n      * increment the index,\r\n      * set the text of your label to the newly indexed line.","title":"Update a label with new text every time one button is clicked","body":"<blockquote>\n<p>a loop that loops through the dialogue with every click</p>\n</blockquote>\n<p>You have to change your thinking. You don’t use a loop for this.</p>\n<p>GUIs are event driven.  Users and systems generate events that you need to handle:</p>\n<ol>\n<li>Store an index.</li>\n<li>Provide an event handler.\n<ul>\n<li>see the button <code>setOnAction</code> javadoc.</li>\n</ul>\n</li>\n<li>In the event handler, after checking that text remains:\n<ul>\n<li>increment the index,</li>\n<li>set the text of your label to the newly indexed line.</li>\n</ul>\n</li>\n</ol>\n"}],"owner":{"account_id":27019000,"reputation":13,"user_id":20577306,"display_name":"Miller"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":68,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74542109,"answer_count":1,"score":0,"last_activity_date":1669201721,"creation_date":1669166217,"question_id":74540759,"body_markdown":"I&#39;m trying to make an interactive visual novel for my university project, but I can&#39;t figure out how to update the label&#39;s text to the next line of dialogue with only one button. \r\n\r\n```java\r\npublic void NicoleDialogue() {\r\n    String[] NDialogue = {&quot;My name is Tala Nicole Dimaapi Valdez / Joshua Manuel Garcia Reyes, I know a long ass name but I’m filipino what can I say?&quot;,\r\n    &quot;I’m a student of DLSU, one of the most prestigious universities in the country and today I will join GreenGiant FM, an organization for people who want to become radio hosts or who are just interested in radio hosting in general.&quot;,\r\n    &quot;It is my first time joining an organization in this school so I’m a bit nervous since I don’t really know anybody from the org but there is no time for getting nervous right now since I’m about to open the door&quot;};\r\n\r\n    for(int i = 0; i &lt; NDialogue.length; i++) {\r\n        NLine1.setText(NDialogue[i]);\r\n    }\r\n}\r\n```\r\n\r\nSo far, I&#39;ve tried making an array of dialogue I want to display and a loop that loops through the dialogue with every click but it doesn&#39;t work and I&#39;m pretty much lost at this point.","title":"Update a label with new text every time one button is clicked","body":"<p>I'm trying to make an interactive visual novel for my university project, but I can't figure out how to update the label's text to the next line of dialogue with only one button.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void NicoleDialogue() {\n    String[] NDialogue = {&quot;My name is Tala Nicole Dimaapi Valdez / Joshua Manuel Garcia Reyes, I know a long ass name but I’m filipino what can I say?&quot;,\n    &quot;I’m a student of DLSU, one of the most prestigious universities in the country and today I will join GreenGiant FM, an organization for people who want to become radio hosts or who are just interested in radio hosting in general.&quot;,\n    &quot;It is my first time joining an organization in this school so I’m a bit nervous since I don’t really know anybody from the org but there is no time for getting nervous right now since I’m about to open the door&quot;};\n\n    for(int i = 0; i &lt; NDialogue.length; i++) {\n        NLine1.setText(NDialogue[i]);\n    }\n}\n</code></pre>\n<p>So far, I've tried making an array of dialogue I want to display and a loop that loops through the dialogue with every click but it doesn't work and I'm pretty much lost at this point.</p>\n"},{"tags":["java","android","scrollview"],"comments":[{"owner":{"account_id":5865787,"reputation":1694,"user_id":4619812,"accept_rate":64,"display_name":"thyago stall"},"score":0,"creation_date":1485180864,"post_id":41808157,"comment_id":70804705,"body_markdown":"Can you post some code?","body":"Can you post some code?"}],"answers":[{"comments":[{"owner":{"account_id":1866615,"reputation":4191,"user_id":1690017,"accept_rate":38,"display_name":"David"},"score":0,"creation_date":1574079939,"post_id":41809149,"comment_id":104090858,"body_markdown":"OMG, still happening as of today with latest all.","body":"OMG, still happening as of today with latest all."}],"tags":[],"owner":{"account_id":4358807,"reputation":725,"user_id":3556590,"accept_rate":100,"display_name":"don11995"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":true,"score":6,"last_activity_date":1485183095,"creation_date":1485183095,"answer_id":41809149,"question_id":41808157,"body_markdown":"I think there is a bug in android. `ScrollView` is `focusable` by default and `focusable` can not be set in ` layout xml`, but I called `setFocusable(false)` on `ScrollView` after `findViewById` and it works now. Mayby bug in latest support library (I&#39;m using version 25.1.0).","title":"ScrollView is always focusable","body":"<p>I think there is a bug in android. <code>ScrollView</code> is <code>focusable</code> by default and <code>focusable</code> can not be set in <code>layout xml</code>, but I called <code>setFocusable(false)</code> on <code>ScrollView</code> after <code>findViewById</code> and it works now. Mayby bug in latest support library (I'm using version 25.1.0).</p>\n"},{"tags":[],"owner":{"account_id":27023610,"reputation":11,"user_id":20581241,"display_name":"juvelop17"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669201686,"creation_date":1669201644,"answer_id":74545820,"question_id":41808157,"body_markdown":"It is not a bug. In the `ScrollView` constructor, there is `initScrollView()`, and in the method, there is `setFocusable(true)`. It is initiated when the app make `ScrollView` instance.  ","title":"ScrollView is always focusable","body":"<p>It is not a bug. In the <code>ScrollView</code> constructor, there is <code>initScrollView()</code>, and in the method, there is <code>setFocusable(true)</code>. It is initiated when the app make <code>ScrollView</code> instance.</p>\n"}],"owner":{"account_id":4358807,"reputation":725,"user_id":3556590,"accept_rate":100,"display_name":"don11995"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":944,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":41809149,"answer_count":2,"score":1,"last_activity_date":1669201686,"creation_date":1485180119,"question_id":41808157,"body_markdown":"I have a problem with `ScrollView` - it is `focusable`. I&#39;m writing a simple app that controled from DPAD. Layout has only ScrollView (empty for now) and a button under it. I don&#39;t know why, but `ScrollView` is `focusable` and I can not turn it off. `focusable` and `focusableInTouchMode` set to `false` not work at all. Activity automatically gives it focus on start. I do not access ScrollView from any part of code, only button. What can it be? Thanks in advance.","title":"ScrollView is always focusable","body":"<p>I have a problem with <code>ScrollView</code> - it is <code>focusable</code>. I'm writing a simple app that controled from DPAD. Layout has only ScrollView (empty for now) and a button under it. I don't know why, but <code>ScrollView</code> is <code>focusable</code> and I can not turn it off. <code>focusable</code> and <code>focusableInTouchMode</code> set to <code>false</code> not work at all. Activity automatically gives it focus on start. I do not access ScrollView from any part of code, only button. What can it be? Thanks in advance.</p>\n"},{"tags":["java","amazon-web-services","aws-lambda","aws-sdk"],"comments":[{"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"score":2,"creation_date":1669200804,"post_id":74545437,"comment_id":131589079,"body_markdown":"BTW - is somebody votes to close this question, could they *please* say why. At the very least it will allow me to write better questions in future.","body":"BTW - is somebody votes to close this question, could they <i>please</i> say why. At the very least it will allow me to write better questions in future."},{"owner":{"account_id":114128,"reputation":50467,"user_id":300257,"accept_rate":89,"display_name":"Gilbert Le Blanc"},"score":0,"creation_date":1669201765,"post_id":74545437,"comment_id":131589436,"body_markdown":"One way would be for your AWS lambda function to increment a global counter when it starts and decrement the global counter when it completes.  You can read the global counter whenever you want to know how many AWS lambda functions are running.","body":"One way would be for your AWS lambda function to increment a global counter when it starts and decrement the global counter when it completes.  You can read the global counter whenever you want to know how many AWS lambda functions are running."},{"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"score":1,"creation_date":1669240469,"post_id":74545437,"comment_id":131602553,"body_markdown":"IDK if you can see these for yourself , but the votes are for &quot;needing focus&quot; and &quot;not suitable for site - seeking recommendation for books, etc.&quot; IMO your question is fine, as you&#39;re asking for *any* API to do this, not the best API for general use.","body":"IDK if you can see these for yourself , but the votes are for &quot;needing focus&quot; and &quot;not suitable for site - seeking recommendation for books, etc.&quot; IMO your question is fine, as you&#39;re asking for <i>any</i> API to do this, not the best API for general use."},{"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"score":0,"creation_date":1669302893,"post_id":74545437,"comment_id":131618059,"body_markdown":"Thanks Edward, I&#39;ve never clicked on the &quot;close&quot; link before - I&#39;d always assumed it would close my question.","body":"Thanks Edward, I&#39;ve never clicked on the &quot;close&quot; link before - I&#39;d always assumed it would close my question."}],"answers":[{"comments":[{"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"score":0,"creation_date":1669201738,"post_id":74545805,"comment_id":131589419,"body_markdown":"Thanks for the information, but is there a way to do this in code?","body":"Thanks for the information, but is there a way to do this in code?"},{"owner":{"account_id":11766690,"reputation":340,"user_id":8611047,"display_name":"Jordi Sabater Pica&#241;ol"},"score":2,"creation_date":1669202403,"post_id":74545805,"comment_id":131589652,"body_markdown":"@Stormcloud like each AWS service, you can use it through main AWS SDKs. For instance here is an example retrieving a CloudWatch metric from Java SDK https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-cloudwatch-get-metrics.html.","body":"@Stormcloud like each AWS service, you can use it through main AWS SDKs. For instance here is an example retrieving a CloudWatch metric from Java SDK <a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-cloudwatch-get-metrics.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sdk-for-java/latest/developer-guide/&hellip;</a>."},{"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"score":0,"creation_date":1669204751,"post_id":74545805,"comment_id":131590487,"body_markdown":"Thank you Jordi - I&#39;ve been looking in completely the wrong place. I was expecting an API in the AWS Lambda Client.","body":"Thank you Jordi - I&#39;ve been looking in completely the wrong place. I was expecting an API in the AWS Lambda Client."}],"tags":[],"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669201590,"creation_date":1669201590,"answer_id":74545805,"question_id":74545437,"body_markdown":"We can get this information via [Cloudwatch metrics][1] [![enter image description here][2]][2]. \r\n\r\nJust a small catch that this information has a lag of 60 seconds. To get the number of concurrent connections at any instant, there is no direct way.\r\n\r\n\r\n  [1]: https://docs.aws.amazon.com/lambda/latest/dg/monitoring-metrics.html\r\n  [2]: https://i.stack.imgur.com/hjgeW.png","title":"Writing Java code to check how many instances of an AWS function are running","body":"<p>We can get this information via <a href=\"https://docs.aws.amazon.com/lambda/latest/dg/monitoring-metrics.html\" rel=\"nofollow noreferrer\">Cloudwatch metrics</a> <a href=\"https://i.stack.imgur.com/hjgeW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hjgeW.png\" alt=\"enter image description here\" /></a>.</p>\n<p>Just a small catch that this information has a lag of 60 seconds. To get the number of concurrent connections at any instant, there is no direct way.</p>\n"}],"owner":{"account_id":1077512,"reputation":2115,"user_id":1075330,"accept_rate":82,"display_name":"Stormcloud"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74545805,"answer_count":1,"score":0,"last_activity_date":1669201590,"creation_date":1669199819,"question_id":74545437,"body_markdown":"I want to write some Java code to see how many instances of a specific AWS Lambda function are currently running, but I can&#39;t find an appropriate API to do this.\r\n\r\nI&#39;ve searched the web (AWS Documentation, StackOverflow, and general Google searches) but the only information I can find describes how to use the AWS Web Interface to view graphs. This is not what I need.\r\n\r\nDoes such an API exist? I imagine that the AWS dashboard uses some API to get its statistics, but maybe this is isn&#39;t publicly available?","title":"Writing Java code to check how many instances of an AWS function are running","body":"<p>I want to write some Java code to see how many instances of a specific AWS Lambda function are currently running, but I can't find an appropriate API to do this.</p>\n<p>I've searched the web (AWS Documentation, StackOverflow, and general Google searches) but the only information I can find describes how to use the AWS Web Interface to view graphs. This is not what I need.</p>\n<p>Does such an API exist? I imagine that the AWS dashboard uses some API to get its statistics, but maybe this is isn't publicly available?</p>\n"},{"tags":["java","windows","tomcat"],"answers":[{"comments":[{"owner":{"account_id":275933,"reputation":3454,"user_id":569076,"accept_rate":87,"display_name":"Elbek"},"score":1,"creation_date":1323884976,"post_id":8509195,"comment_id":10533201,"body_markdown":"&#39;grep&#39; is not recognized as an internal or external command,\noperable program or batch file. I use windows. Is it in windows?","body":"&#39;grep&#39; is not recognized as an internal or external command, operable program or batch file. I use windows. Is it in windows?"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1323885144,"post_id":8509195,"comment_id":10533255,"body_markdown":"@elbek check [this](http://stackoverflow.com/questions/5310945/deployment-errorstarting-of-tomcat-failed-the-server-port-8080-is-already-in-u/5310993#5310993)","body":"@elbek check <a href=\"http://stackoverflow.com/questions/5310945/deployment-errorstarting-of-tomcat-failed-the-server-port-8080-is-already-in-u/5310993#5310993\">this</a>"},{"owner":{"account_id":198101,"reputation":11316,"user_id":442558,"display_name":"stew"},"score":0,"creation_date":1323885280,"post_id":8509195,"comment_id":10533308,"body_markdown":"pardon me, I hadn&#39;t noticed it was windows.  I do not know what a grep equiv. is on windows.  I believe netstat behaves similarly though, try my command without `| grep :8009`","body":"pardon me, I hadn&#39;t noticed it was windows.  I do not know what a grep equiv. is on windows.  I believe netstat behaves similarly though, try my command without <code>| grep :8009</code>"},{"owner":{"account_id":95910,"reputation":238649,"user_id":260990,"accept_rate":81,"display_name":"jmj"},"score":0,"creation_date":1323885583,"post_id":8509195,"comment_id":10533422,"body_markdown":"grep isn&#39;t there for windows so OP was facing that error, otherwise you are correct +1","body":"grep isn&#39;t there for windows so OP was facing that error, otherwise you are correct +1"},{"owner":{"account_id":19314,"reputation":6654,"user_id":45163,"accept_rate":86,"display_name":"Chris Nava"},"score":0,"creation_date":1427209231,"post_id":8509195,"comment_id":46677990,"body_markdown":"The roughly equivalent inline search command for windows is `| find &quot;:8009&quot;`","body":"The roughly equivalent inline search command for windows is <code>| find &quot;:8009&quot;</code>"}],"tags":[],"owner":{"account_id":198101,"reputation":11316,"user_id":442558,"display_name":"stew"},"comment_count":5,"down_vote_count":0,"up_vote_count":15,"is_accepted":true,"score":15,"last_activity_date":1393922232,"creation_date":1323884819,"answer_id":8509195,"question_id":8509125,"body_markdown":"Check with `netstat -ntlp | grep :8009` to see what process is using 8009 already.","title":"apache tomcat 8009 port in use","body":"<p>Check with <code>netstat -ntlp | grep :8009</code> to see what process is using 8009 already.</p>\n"},{"tags":[],"owner":{"account_id":62516,"reputation":20965,"user_id":185723,"accept_rate":89,"display_name":"dimitrisli"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1323884851,"creation_date":1323884851,"answer_id":8509207,"question_id":8509125,"body_markdown":"double check by running `ps -ef | grep tomcat` to `kill -9` the process or from your task manager if there is any java process running to terminate it. Most likely your previous tomcat startup session wasn&#39;t ended normally.","title":"apache tomcat 8009 port in use","body":"<p>double check by running <code>ps -ef | grep tomcat</code> to <code>kill -9</code> the process or from your task manager if there is any java process running to terminate it. Most likely your previous tomcat startup session wasn't ended normally.</p>\n"},{"tags":[],"owner":{"account_id":1089693,"reputation":891,"user_id":1084608,"display_name":"kbdjockey"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1323884920,"creation_date":1323884920,"answer_id":8509218,"question_id":8509125,"body_markdown":"Your port 8009 is already in use. It can be another tomcat or something different.&lt;br /&gt;\r\nYou should manually kill any tomcat process.&lt;br /&gt;\r\nEDIT: assuming you are on Windows platform, kill all javaw.exe process using CTRL-ALT-Suppr","title":"apache tomcat 8009 port in use","body":"<p>Your port 8009 is already in use. It can be another tomcat or something different.<br />\nYou should manually kill any tomcat process.<br />\nEDIT: assuming you are on Windows platform, kill all javaw.exe process using CTRL-ALT-Suppr</p>\n"},{"comments":[{"owner":{"account_id":275933,"reputation":3454,"user_id":569076,"accept_rate":87,"display_name":"Elbek"},"score":0,"creation_date":1323885251,"post_id":8509229,"comment_id":10533294,"body_markdown":"port number is 8009 not 8080, 8080 is free","body":"port number is 8009 not 8080, 8080 is free"},{"owner":{"account_id":395649,"reputation":18444,"user_id":758708,"accept_rate":100,"display_name":"dku.rajkumar"},"score":0,"creation_date":1323885365,"post_id":8509229,"comment_id":10533336,"body_markdown":"check with HTTP protocol like in my answer, normaly in tomcat 8009 will be used for AJP protocol.","body":"check with HTTP protocol like in my answer, normaly in tomcat 8009 will be used for AJP protocol."},{"owner":{"account_id":395649,"reputation":18444,"user_id":758708,"accept_rate":100,"display_name":"dku.rajkumar"},"score":0,"creation_date":1323885695,"post_id":8509229,"comment_id":10533469,"body_markdown":"you can even change this port and test. if the server is starting.","body":"you can even change this port and test. if the server is starting."},{"owner":{"account_id":275933,"reputation":3454,"user_id":569076,"accept_rate":87,"display_name":"Elbek"},"score":0,"creation_date":1323886134,"post_id":8509229,"comment_id":10533601,"body_markdown":"I changed to 8011 and it worked with loclahost:8080 when i start by command line, but i does not work with eclipse","body":"I changed to 8011 and it worked with loclahost:8080 when i start by command line, but i does not work with eclipse"}],"tags":[],"owner":{"account_id":395649,"reputation":18444,"user_id":758708,"accept_rate":100,"display_name":"dku.rajkumar"},"comment_count":4,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1323884960,"creation_date":1323884960,"answer_id":8509229,"question_id":8509125,"body_markdown":"check the file `server.xml` in folder `\\apache-tomcat-6.0.32\\conf`\r\nthe `port address` will be mentioned, if it is `8080`, try changing it to `8081` and start the server and call `localhost:8081`\r\n\r\nin `server.xml` it will be like below:\r\n\r\n    &lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot; connectionTimeout=&quot;20000&quot; redirectPort=&quot;8443&quot; /&gt;\r\n\r\n","title":"apache tomcat 8009 port in use","body":"<p>check the file <code>server.xml</code> in folder <code>\\apache-tomcat-6.0.32\\conf</code>\nthe <code>port address</code> will be mentioned, if it is <code>8080</code>, try changing it to <code>8081</code> and start the server and call <code>localhost:8081</code></p>\n\n<p>in <code>server.xml</code> it will be like below:</p>\n\n<pre><code>&lt;Connector port=\"8080\" protocol=\"HTTP/1.1\" connectionTimeout=\"20000\" redirectPort=\"8443\" /&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1247011,"reputation":145,"user_id":1208239,"display_name":"XU3352"},"comment_count":0,"down_vote_count":0,"up_vote_count":11,"is_accepted":false,"score":11,"last_activity_date":1333745215,"creation_date":1333702601,"answer_id":10041254,"question_id":8509125,"body_markdown":"Kill the process first. Then check your %TOMCAT_HOME%/conf/server.xml file. You should replace **port=&quot;8009&quot;** with **port=&quot;8010&quot;**.","title":"apache tomcat 8009 port in use","body":"<p>Kill the process first. Then check your %TOMCAT_HOME%/conf/server.xml file. You should replace <strong>port=\"8009\"</strong> with <strong>port=\"8010\"</strong>.</p>\n"},{"comments":[{"owner":{"account_id":136919,"reputation":3959,"user_id":340763,"display_name":"Phil"},"score":0,"creation_date":1522443509,"post_id":48316626,"comment_id":86170663,"body_markdown":"Very thorough solution. Thank you.","body":"Very thorough solution. Thank you."}],"tags":[],"owner":{"account_id":2749926,"reputation":2978,"user_id":2369551,"display_name":"Tarun Kumar"},"comment_count":1,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1516263445,"creation_date":1516263445,"answer_id":48316626,"question_id":8509125,"body_markdown":"**For Ubuntu/Linux**\r\n\r\nStep 1: Find the process id that is using the port 8009\r\n\r\n    netstat -lnp | grep 8009\r\n    or\r\n    ps -aef | grep tomcat\r\n\r\nStep 2: Kill the process using process id in above result\r\n\r\n    kill -9 process_id\r\n\r\n**For Windows**\r\n\r\nStep 1: Find the process id\r\n\r\n    netstat -ano | findstr 8009\r\n\r\nStep 2: Open command prompt as administrator and kill the process\r\n\r\n    taskkill /F /pid process_id_from_step_1\r\n\r\n**Changing Port Number**\r\n\r\nIn you wan to run two Apache tomcat in parallel then change the conflicting port number in Eclipse server overview.\r\n\r\n1. Open `Eclipse`\r\n\r\n2. Go to `Servers panel`\r\n\r\n[![Eclipse Servers Panel][1]][1]\r\n\r\n3. Double click the configured server name to open `Overview` window\r\n\r\n4. Open the `Ports`tab. You will get the following:\r\n\r\n - `Tomcat adminport`\r\n   \r\n - `HTTP/1.1`\r\n   \r\n - `AJP/1.3`\r\n\r\n[![Eclipse Tomcat Server Overview][2]][2]\r\n\r\n5. Change conflicting port number of `AJP/1.3` (e.g. to `9009`)\r\n\r\n6. You might have to also change the port of `Tomcat admin port` (e.g. to `9005`) and of `HTTP/1.1` (e.g. to `9090`).\r\n\r\n7. Save it (ctrl+s) and start your server.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rpi80.png\r\n  [2]: https://i.stack.imgur.com/YxjCE.png","title":"apache tomcat 8009 port in use","body":"<p><strong>For Ubuntu/Linux</strong></p>\n\n<p>Step 1: Find the process id that is using the port 8009</p>\n\n<pre><code>netstat -lnp | grep 8009\nor\nps -aef | grep tomcat\n</code></pre>\n\n<p>Step 2: Kill the process using process id in above result</p>\n\n<pre><code>kill -9 process_id\n</code></pre>\n\n<p><strong>For Windows</strong></p>\n\n<p>Step 1: Find the process id</p>\n\n<pre><code>netstat -ano | findstr 8009\n</code></pre>\n\n<p>Step 2: Open command prompt as administrator and kill the process</p>\n\n<pre><code>taskkill /F /pid process_id_from_step_1\n</code></pre>\n\n<p><strong>Changing Port Number</strong></p>\n\n<p>In you wan to run two Apache tomcat in parallel then change the conflicting port number in Eclipse server overview.</p>\n\n<ol>\n<li><p>Open <code>Eclipse</code></p></li>\n<li><p>Go to <code>Servers panel</code></p></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/rpi80.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rpi80.png\" alt=\"Eclipse Servers Panel\"></a></p>\n\n<ol start=\"3\">\n<li><p>Double click the configured server name to open <code>Overview</code> window</p></li>\n<li><p>Open the <code>Ports</code>tab. You will get the following:</p>\n\n<ul>\n<li><p><code>Tomcat adminport</code></p></li>\n<li><p><code>HTTP/1.1</code></p></li>\n<li><p><code>AJP/1.3</code></p></li>\n</ul></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/YxjCE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YxjCE.png\" alt=\"Eclipse Tomcat Server Overview\"></a></p>\n\n<ol start=\"5\">\n<li><p>Change conflicting port number of <code>AJP/1.3</code> (e.g. to <code>9009</code>)</p></li>\n<li><p>You might have to also change the port of <code>Tomcat admin port</code> (e.g. to <code>9005</code>) and of <code>HTTP/1.1</code> (e.g. to <code>9090</code>).</p></li>\n<li><p>Save it (ctrl+s) and start your server.</p></li>\n</ol>\n"}],"owner":{"account_id":275933,"reputation":3454,"user_id":569076,"accept_rate":87,"display_name":"Elbek"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":69398,"favorite_count":0,"down_vote_count":0,"up_vote_count":11,"accepted_answer_id":8509195,"answer_count":6,"score":11,"last_activity_date":1669201478,"creation_date":1323884519,"question_id":8509125,"body_markdown":"When i Start tomcat on eclipse i got this message:\r\n\r\nPort 8009 required by Tomcat v6.0 Server at localhost is already in use. The server may already be running in another process, or a system process may be using the port. To start this server you will need to stop the other process or change the port number(s).\r\n\r\nwhen i start tomcat manually it gives me this exceptions track:\r\n\r\n    C:\\apache-tomcat-6\\bin&gt;catalina.bat run\r\n    Using CATALINA_BASE:   &quot;C:\\apache-tomcat-6&quot;\r\n    Using CATALINA_HOME:   &quot;C:\\apache-tomcat-6&quot;\r\n    Using CATALINA_TMPDIR: &quot;C:\\apache-tomcat-6\\temp&quot;\r\n    Using JRE_HOME:        &quot;C:\\Program Files\\Java\\jdk1.6.0_20&quot;\r\n    Using CLASSPATH:       &quot;C:\\apache-tomcat-6\\bin\\bootstrap.jar&quot;\r\n    Dec 14, 2011 11:32:17 AM org.apache.catalina.core.AprLifecycleListener init\r\n    INFO: Loaded APR based Apache Tomcat Native library 1.1.22.\r\n    Dec 14, 2011 11:32:17 AM org.apache.catalina.core.AprLifecycleListener init\r\n    INFO: APR capabilities: IPv6 [false], sendfile [true], accept filters [false], r\r\n    andom [true].\r\n    Dec 14, 2011 11:32:20 AM org.apache.coyote.http11.Http11AprProtocol init\r\n    INFO: Initializing Coyote HTTP/1.1 on http-8080\r\n    Dec 14, 2011 11:32:20 AM org.apache.coyote.ajp.AjpAprProtocol init\r\n    SEVERE: Error initializing endpoint\r\n    java.lang.Exception: Socket bind failed: [730048] Only one usage of each socket\r\n    address (protocol/network address/port) is normally permitted.\r\n            at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:649)\r\n            at org.apache.coyote.ajp.AjpAprProtocol.init(AjpAprProtocol.java:160)\r\n            at org.apache.catalina.connector.Connector.initialize(Connector.java:104\r\n    9)\r\n            at org.apache.catalina.core.StandardService.initialize(StandardService.j\r\n    ava:703)\r\n            at org.apache.catalina.core.StandardServer.initialize(StandardServer.jav\r\n    a:838)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\r\n    java:39)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\r\n    sorImpl.java:25)\r\n            at java.lang.reflect.Method.invoke(Method.java:597)\r\n            at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\r\n    Dec 14, 2011 11:32:20 AM org.apache.catalina.core.StandardService initialize\r\n    SEVERE: Failed to initialize connector [Connector[AJP/1.3-8009]]\r\n    LifecycleException:  Protocol handler initialization failed: java.lang.Exception\r\n    : Socket bind failed: [730048] Only one usage of each socket address (protocol/n\r\n    etwork address/port) is normally permitted.\r\n            at org.apache.catalina.connector.Connector.initialize(Connector.java:105\r\n    1)\r\n            at org.apache.catalina.core.StandardService.initialize(StandardService.j\r\n    ava:703)\r\n            at org.apache.catalina.core.StandardServer.initialize(StandardServer.jav\r\n    a:838)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\r\n            at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\r\n    java:39)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\r\n    sorImpl.java:25)\r\n            at java.lang.reflect.Method.invoke(Method.java:597)\r\n            at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\r\n    Dec 14, 2011 11:32:20 AM org.apache.catalina.startup.Catalina load\r\n    INFO: Initialization processed in 5684 ms\r\n    Dec 14, 2011 11:32:21 AM org.apache.catalina.core.StandardService start\r\n    INFO: Starting service Catalina\r\n    Dec 14, 2011 11:32:21 AM org.apache.catalina.core.StandardEngine start\r\n    INFO: Starting Servlet Engine: Apache Tomcat/6.0.35\r\n    Dec 14, 2011 11:32:21 AM org.apache.catalina.startup.HostConfig deployDescriptor\r\n    \r\n    INFO: Deploying configuration descriptor host-manager.xml\r\n    Dec 14, 2011 11:32:23 AM org.apache.catalina.startup.HostConfig deployDescriptor\r\n    \r\n    INFO: Deploying configuration descriptor manager.xml\r\n    Dec 14, 2011 11:32:23 AM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory docs\r\n    Dec 14, 2011 11:32:23 AM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory examples\r\n    Dec 14, 2011 11:32:24 AM org.apache.catalina.startup.HostConfig deployDirectory\r\n    INFO: Deploying web application directory ROOT\r\n    Dec 14, 2011 11:32:24 AM org.apache.coyote.http11.Http11AprProtocol start\r\n    INFO: Starting Coyote HTTP/1.1 on http-8080\r\n    Dec 14, 2011 11:32:24 AM org.apache.coyote.ajp.AjpAprProtocol start\r\n    SEVERE: Error starting endpoint\r\n    java.lang.Exception: Socket bind failed: [730048] Only one usage of each socket\r\n    address (protocol/network address/port) is normally permitted.\r\n            at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:649)\r\n            at org.apache.tomcat.util.net.AprEndpoint.start(AprEndpoint.java:766)\r\n            at org.apache.coyote.ajp.AjpAprProtocol.start(AjpAprProtocol.java:188)\r\n            at org.apache.catalina.connector.Connector.start(Connector.java:1122)\r\n            at org.apache.catalina.core.StandardService.start(StandardService.java:5\r\n    40)\r\n            at org.apache.catalina.core.StandardServer.start(StandardServer.java:754\r\n    )\r\n            at org.apache.catalina.startup.Catalina.start(Catalina.java:595)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\r\n    java:39)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\r\n    sorImpl.java:25)\r\n            at java.lang.reflect.Method.invoke(Method.java:597)\r\n            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\r\n    Dec 14, 2011 11:32:24 AM org.apache.catalina.core.StandardService start\r\n    SEVERE: Failed to start connector [Connector[AJP/1.3-8009]]\r\n    LifecycleException:  service.getName(): &quot;Catalina&quot;;  Protocol handler start fail\r\n    ed: java.lang.Exception: Socket bind failed: [730048] Only one usage of each soc\r\n    ket address (protocol/network address/port) is normally permitted.\r\n            at org.apache.catalina.connector.Connector.start(Connector.java:1129)\r\n            at org.apache.catalina.core.StandardService.start(StandardService.java:5\r\n    40)\r\n            at org.apache.catalina.core.StandardServer.start(StandardServer.java:754\r\n    )\r\n            at org.apache.catalina.startup.Catalina.start(Catalina.java:595)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n            at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\r\n    java:39)\r\n            at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\r\n    sorImpl.java:25)\r\n            at java.lang.reflect.Method.invoke(Method.java:597)\r\n            at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\r\n            at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\r\n    Dec 14, 2011 11:32:24 AM org.apache.catalina.startup.Catalina start\r\n    INFO: Server startup in 3966 ms\r\n    Dec 14, 2011 11:33:25 AM org.apache.coyote.http11.Http11AprProtocol pause\r\n    INFO: Pausing Coyote HTTP/1.1 on http-8080\r\n    Dec 14, 2011 11:33:25 AM org.apache.coyote.ajp.AjpAprProtocol pause\r\n    INFO: Pausing Coyote AJP/1.3 on ajp-8009\r\n    Dec 14, 2011 11:33:26 AM org.apache.catalina.core.StandardService stop\r\n    INFO: Stopping service Catalina\r\n    Dec 14, 2011 11:33:26 AM org.apache.coyote.http11.Http11AprProtocol destroy\r\n    INFO: Stopping Coyote HTTP/1.1 on http-8080\r\n    Dec 14, 2011 11:33:26 AM org.apache.coyote.ajp.AjpAprProtocol destroy\r\n    INFO: Stopping Coyote AJP/1.3 on ajp-8009\r\n    Terminate batch job (Y/N)? y\r\n    \r\n    C:\\apache-tomcat-6\\bin&gt;\r\n\r\n\r\nHow can fix it? Another tomcat is not running, i checked with localhost:8080.  Thanks in advance","title":"apache tomcat 8009 port in use","body":"<p>When i Start tomcat on eclipse i got this message:</p>\n\n<p>Port 8009 required by Tomcat v6.0 Server at localhost is already in use. The server may already be running in another process, or a system process may be using the port. To start this server you will need to stop the other process or change the port number(s).</p>\n\n<p>when i start tomcat manually it gives me this exceptions track:</p>\n\n<pre><code>C:\\apache-tomcat-6\\bin&gt;catalina.bat run\nUsing CATALINA_BASE:   \"C:\\apache-tomcat-6\"\nUsing CATALINA_HOME:   \"C:\\apache-tomcat-6\"\nUsing CATALINA_TMPDIR: \"C:\\apache-tomcat-6\\temp\"\nUsing JRE_HOME:        \"C:\\Program Files\\Java\\jdk1.6.0_20\"\nUsing CLASSPATH:       \"C:\\apache-tomcat-6\\bin\\bootstrap.jar\"\nDec 14, 2011 11:32:17 AM org.apache.catalina.core.AprLifecycleListener init\nINFO: Loaded APR based Apache Tomcat Native library 1.1.22.\nDec 14, 2011 11:32:17 AM org.apache.catalina.core.AprLifecycleListener init\nINFO: APR capabilities: IPv6 [false], sendfile [true], accept filters [false], r\nandom [true].\nDec 14, 2011 11:32:20 AM org.apache.coyote.http11.Http11AprProtocol init\nINFO: Initializing Coyote HTTP/1.1 on http-8080\nDec 14, 2011 11:32:20 AM org.apache.coyote.ajp.AjpAprProtocol init\nSEVERE: Error initializing endpoint\njava.lang.Exception: Socket bind failed: [730048] Only one usage of each socket\naddress (protocol/network address/port) is normally permitted.\n        at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:649)\n        at org.apache.coyote.ajp.AjpAprProtocol.init(AjpAprProtocol.java:160)\n        at org.apache.catalina.connector.Connector.initialize(Connector.java:104\n9)\n        at org.apache.catalina.core.StandardService.initialize(StandardService.j\nava:703)\n        at org.apache.catalina.core.StandardServer.initialize(StandardServer.jav\na:838)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nDec 14, 2011 11:32:20 AM org.apache.catalina.core.StandardService initialize\nSEVERE: Failed to initialize connector [Connector[AJP/1.3-8009]]\nLifecycleException:  Protocol handler initialization failed: java.lang.Exception\n: Socket bind failed: [730048] Only one usage of each socket address (protocol/n\network address/port) is normally permitted.\n        at org.apache.catalina.connector.Connector.initialize(Connector.java:105\n1)\n        at org.apache.catalina.core.StandardService.initialize(StandardService.j\nava:703)\n        at org.apache.catalina.core.StandardServer.initialize(StandardServer.jav\na:838)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:538)\n        at org.apache.catalina.startup.Catalina.load(Catalina.java:562)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.load(Bootstrap.java:261)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\nDec 14, 2011 11:32:20 AM org.apache.catalina.startup.Catalina load\nINFO: Initialization processed in 5684 ms\nDec 14, 2011 11:32:21 AM org.apache.catalina.core.StandardService start\nINFO: Starting service Catalina\nDec 14, 2011 11:32:21 AM org.apache.catalina.core.StandardEngine start\nINFO: Starting Servlet Engine: Apache Tomcat/6.0.35\nDec 14, 2011 11:32:21 AM org.apache.catalina.startup.HostConfig deployDescriptor\n\nINFO: Deploying configuration descriptor host-manager.xml\nDec 14, 2011 11:32:23 AM org.apache.catalina.startup.HostConfig deployDescriptor\n\nINFO: Deploying configuration descriptor manager.xml\nDec 14, 2011 11:32:23 AM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory docs\nDec 14, 2011 11:32:23 AM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory examples\nDec 14, 2011 11:32:24 AM org.apache.catalina.startup.HostConfig deployDirectory\nINFO: Deploying web application directory ROOT\nDec 14, 2011 11:32:24 AM org.apache.coyote.http11.Http11AprProtocol start\nINFO: Starting Coyote HTTP/1.1 on http-8080\nDec 14, 2011 11:32:24 AM org.apache.coyote.ajp.AjpAprProtocol start\nSEVERE: Error starting endpoint\njava.lang.Exception: Socket bind failed: [730048] Only one usage of each socket\naddress (protocol/network address/port) is normally permitted.\n        at org.apache.tomcat.util.net.AprEndpoint.init(AprEndpoint.java:649)\n        at org.apache.tomcat.util.net.AprEndpoint.start(AprEndpoint.java:766)\n        at org.apache.coyote.ajp.AjpAprProtocol.start(AjpAprProtocol.java:188)\n        at org.apache.catalina.connector.Connector.start(Connector.java:1122)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:5\n40)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754\n)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nDec 14, 2011 11:32:24 AM org.apache.catalina.core.StandardService start\nSEVERE: Failed to start connector [Connector[AJP/1.3-8009]]\nLifecycleException:  service.getName(): \"Catalina\";  Protocol handler start fail\ned: java.lang.Exception: Socket bind failed: [730048] Only one usage of each soc\nket address (protocol/network address/port) is normally permitted.\n        at org.apache.catalina.connector.Connector.start(Connector.java:1129)\n        at org.apache.catalina.core.StandardService.start(StandardService.java:5\n40)\n        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754\n)\n        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\njava:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\nsorImpl.java:25)\n        at java.lang.reflect.Method.invoke(Method.java:597)\n        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)\n        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)\nDec 14, 2011 11:32:24 AM org.apache.catalina.startup.Catalina start\nINFO: Server startup in 3966 ms\nDec 14, 2011 11:33:25 AM org.apache.coyote.http11.Http11AprProtocol pause\nINFO: Pausing Coyote HTTP/1.1 on http-8080\nDec 14, 2011 11:33:25 AM org.apache.coyote.ajp.AjpAprProtocol pause\nINFO: Pausing Coyote AJP/1.3 on ajp-8009\nDec 14, 2011 11:33:26 AM org.apache.catalina.core.StandardService stop\nINFO: Stopping service Catalina\nDec 14, 2011 11:33:26 AM org.apache.coyote.http11.Http11AprProtocol destroy\nINFO: Stopping Coyote HTTP/1.1 on http-8080\nDec 14, 2011 11:33:26 AM org.apache.coyote.ajp.AjpAprProtocol destroy\nINFO: Stopping Coyote AJP/1.3 on ajp-8009\nTerminate batch job (Y/N)? y\n\nC:\\apache-tomcat-6\\bin&gt;\n</code></pre>\n\n<p>How can fix it? Another tomcat is not running, i checked with localhost:8080.  Thanks in advance</p>\n"},{"tags":["java","gitlab-ci","maven-3","pipeline","sonarqube-scan"],"comments":[{"owner":{"account_id":27022850,"reputation":1,"user_id":20580588,"display_name":"Tanya_K"},"score":0,"creation_date":1673275544,"post_id":74545654,"comment_id":132455997,"body_markdown":"This solution will not work properly if you have module settings, &#39;cos -Dsonar.module=X,Z doesn&#39;t works, by default it will pick-up X, Y and Z module. Working on this solution.","body":"This solution will not work properly if you have module settings, &#39;cos -Dsonar.module=X,Z doesn&#39;t works, by default it will pick-up X, Y and Z module. Working on this solution."}],"owner":{"account_id":27022850,"reputation":1,"user_id":20580588,"display_name":"Tanya_K"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":922,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669201115,"creation_date":1669200876,"question_id":74545654,"body_markdown":"This is not specific question, just wanted to share my workaround since didn&#39;t found any solutions here before.\r\n\r\nTask: migration from Jenkins to Gitlab CI with Sonar integration\r\nWhat we have there: Maven project\r\nWhat does official documentation says:\r\n\r\n```\r\nsonarqube-check:\r\n  image: maven:3.6.3-jdk-11\r\n  variables:\r\n    SONAR_USER_HOME: &quot;${CI_PROJECT_DIR}/.sonar&quot;  # Defines the location of the analysis task cache\r\n    GIT_DEPTH: &quot;0&quot;  # Tells git to fetch all the branches of the project, required by the analysis task\r\n  cache:\r\n    key: &quot;${CI_JOB_NAME}&quot;\r\n    paths:\r\n      - .sonar/cache\r\n  script:\r\n    - mvn verify sonar:sonar -Dsonar.qualitygate.wait=true\r\n  allow_failure: true\r\n  only:\r\n    - merge_requests\r\n    - master # or the name of your main branch\r\n    - develop\r\n```\r\n\r\nProblem: in Jenkins we use sonar-project.properties, but those aren&#39;t picked-up by Gitlab-ci by default, -Dsonar.properties=$CI_PROJECT/sonar-project.properties didn&#39;t solved the case and my team wanted to keep that document, &#39;cos it is easier to update than long line in pipeline.\r\nAnd I found out (and tested just in case) mvn sonar:sonar gets its configurations from the command line (with -Dsonar.x=y parameters) and the pom. It does not read sonar-project.properties.\r\n\r\nWhy we don&#39;t use pom.xml -&gt; well, migration can take and it must be less painless for developers + at this point we are using Jenkins+BitBucket and Gitlab in parallel with mirroring, so might be in future we probably will end-up with updating poms.\r\n\r\nMY QUICK FIX:\r\nI have wrote basic script with &quot;sed&quot; commands to extract -Dsonar.* descriptions to variable, which was added to pipelines command.\r\n\r\n\r\n```\r\nsonar:\r\n  stage: validate\r\n  image: maven:3-jdk-11\r\n  variables:\r\n    SONAR_USER_HOME: &quot;${CI_PROJECT_DIR}/.sonar&quot;\r\n    GIT_DEPTH: &quot;1&quot;  # Tells git to fetch specific branch \r\n    SONAR_HOST_URL: http://&lt;sub&gt;your url&lt;/sub&gt;\r\n  before_script:\r\n    - sed -e &#39;s|^| -D|g&#39; sonar-project.properties | grep &quot;sonar.&quot; &gt;&gt; props.txt //exports only line with sonar.&lt;setting&gt; and write it in new file with -Dsonar.&lt;setting&gt;\r\n    - sed -i &#39;/-D#/d&#39; props.txt // removed in case setting is commented out\r\n    - sed -i &#39;/-Dm/d&#39; props.txt // removed lines that does not go with specifications(in my case that was module description)*\r\n    - sed -i &#39;/-Dsonar.modules/d&#39; props.txt // removed modules *&#39;cos it gave error with folder name duplication on Sonar Scan \r\n    - export SONAR_PROPS=$(sed &#39;s/[&quot;\\n\\r]//g&#39; props.txt) // exported that file to single-line variable\r\n    - rm -rf props.txt\r\n  script:\r\n    - echo $SONAR_PROPS\r\n    # - mvn verify &lt;here-I-have-my-mvn-project-setting&gt; sonar:sonar -Dsonar.login=$SONAR_LOGIN -Dsonar.password=$SONAR_PASSWORD  $SONAR_PROPS\r\n  allow_failure: true\r\n  when: manual\r\n```\r\n\r\nThis was my quick fix for using sonar-project.properties in mvn command. Uses same files as Jenkins.","title":"sonar-project.properties usage in Gitlab CI","body":"<p>This is not specific question, just wanted to share my workaround since didn't found any solutions here before.</p>\n<p>Task: migration from Jenkins to Gitlab CI with Sonar integration\nWhat we have there: Maven project\nWhat does official documentation says:</p>\n<pre><code>sonarqube-check:\n  image: maven:3.6.3-jdk-11\n  variables:\n    SONAR_USER_HOME: &quot;${CI_PROJECT_DIR}/.sonar&quot;  # Defines the location of the analysis task cache\n    GIT_DEPTH: &quot;0&quot;  # Tells git to fetch all the branches of the project, required by the analysis task\n  cache:\n    key: &quot;${CI_JOB_NAME}&quot;\n    paths:\n      - .sonar/cache\n  script:\n    - mvn verify sonar:sonar -Dsonar.qualitygate.wait=true\n  allow_failure: true\n  only:\n    - merge_requests\n    - master # or the name of your main branch\n    - develop\n</code></pre>\n<p>Problem: in Jenkins we use sonar-project.properties, but those aren't picked-up by Gitlab-ci by default, -Dsonar.properties=$CI_PROJECT/sonar-project.properties didn't solved the case and my team wanted to keep that document, 'cos it is easier to update than long line in pipeline.\nAnd I found out (and tested just in case) mvn sonar:sonar gets its configurations from the command line (with -Dsonar.x=y parameters) and the pom. It does not read sonar-project.properties.</p>\n<p>Why we don't use pom.xml -&gt; well, migration can take and it must be less painless for developers + at this point we are using Jenkins+BitBucket and Gitlab in parallel with mirroring, so might be in future we probably will end-up with updating poms.</p>\n<p>MY QUICK FIX:\nI have wrote basic script with &quot;sed&quot; commands to extract -Dsonar.* descriptions to variable, which was added to pipelines command.</p>\n<pre><code>sonar:\n  stage: validate\n  image: maven:3-jdk-11\n  variables:\n    SONAR_USER_HOME: &quot;${CI_PROJECT_DIR}/.sonar&quot;\n    GIT_DEPTH: &quot;1&quot;  # Tells git to fetch specific branch \n    SONAR_HOST_URL: http://&lt;sub&gt;your url&lt;/sub&gt;\n  before_script:\n    - sed -e 's|^| -D|g' sonar-project.properties | grep &quot;sonar.&quot; &gt;&gt; props.txt //exports only line with sonar.&lt;setting&gt; and write it in new file with -Dsonar.&lt;setting&gt;\n    - sed -i '/-D#/d' props.txt // removed in case setting is commented out\n    - sed -i '/-Dm/d' props.txt // removed lines that does not go with specifications(in my case that was module description)*\n    - sed -i '/-Dsonar.modules/d' props.txt // removed modules *'cos it gave error with folder name duplication on Sonar Scan \n    - export SONAR_PROPS=$(sed 's/[&quot;\\n\\r]//g' props.txt) // exported that file to single-line variable\n    - rm -rf props.txt\n  script:\n    - echo $SONAR_PROPS\n    # - mvn verify &lt;here-I-have-my-mvn-project-setting&gt; sonar:sonar -Dsonar.login=$SONAR_LOGIN -Dsonar.password=$SONAR_PASSWORD  $SONAR_PROPS\n  allow_failure: true\n  when: manual\n</code></pre>\n<p>This was my quick fix for using sonar-project.properties in mvn command. Uses same files as Jenkins.</p>\n"},{"tags":["java","android","android-studio","react-native","gradle"],"comments":[{"owner":{"account_id":11853101,"reputation":387,"user_id":8673809,"accept_rate":50,"display_name":"Kevin Dave"},"score":1,"creation_date":1541055870,"post_id":53056842,"comment_id":93089228,"body_markdown":"I also suffer this issue :(","body":"I also suffer this issue :("}],"answers":[{"comments":[{"owner":{"account_id":12831237,"reputation":470,"user_id":9282328,"display_name":"Ajay"},"score":2,"creation_date":1590984551,"post_id":54007652,"comment_id":109876576,"body_markdown":"Should I put into app level `build.gradle` or in project level `build.gradle`?","body":"Should I put into app level <code>build.gradle</code> or in project level <code>build.gradle</code>?"},{"owner":{"account_id":5518807,"reputation":2640,"user_id":4382528,"display_name":"Yoruba"},"score":1,"creation_date":1590987571,"post_id":54007652,"comment_id":109877220,"body_markdown":"@Ajay   project/android/app/build.gradle","body":"@Ajay   project/android/app/build.gradle"},{"owner":{"account_id":5792766,"reputation":1363,"user_id":4569596,"accept_rate":43,"display_name":"Nie Selam"},"score":0,"creation_date":1594477495,"post_id":54007652,"comment_id":111142759,"body_markdown":"that would force all developers to have node in that location, though, right?","body":"that would force all developers to have node in that location, though, right?"},{"owner":{"account_id":5518807,"reputation":2640,"user_id":4382528,"display_name":"Yoruba"},"score":0,"creation_date":1594543239,"post_id":54007652,"comment_id":111157784,"body_markdown":"@NieSelam maybe you can set it to a different location","body":"@NieSelam maybe you can set it to a different location"},{"owner":{"account_id":5792766,"reputation":1363,"user_id":4569596,"accept_rate":43,"display_name":"Nie Selam"},"score":0,"creation_date":1594590651,"post_id":54007652,"comment_id":111171665,"body_markdown":"@Yoruba true but the file gets comitted to git so next developer will have to change it. In my case anyway, the issue was in the installation. I removed all and installed first java then android studio then react native.","body":"@Yoruba true but the file gets comitted to git so next developer will have to change it. In my case anyway, the issue was in the installation. I removed all and installed first java then android studio then react native."}],"tags":[],"owner":{"account_id":5518807,"reputation":2640,"user_id":4382528,"display_name":"Yoruba"},"comment_count":5,"down_vote_count":0,"up_vote_count":12,"is_accepted":true,"score":12,"last_activity_date":1546437533,"creation_date":1546437533,"answer_id":54007652,"question_id":53056842,"body_markdown":"Add this to the build.gradle if you use React-Native\r\n\r\n    ext {    \r\n        react = [\r\n            nodeExecutableAndArgs:  [&quot;/usr/local/bin/node&quot;]\r\n        ]\r\n    }","title":"Android Studio setting node directory for build (Cause: error=2, No such file or directory)","body":"<p>Add this to the build.gradle if you use React-Native</p>\n\n<pre><code>ext {    \n    react = [\n        nodeExecutableAndArgs:  [\"/usr/local/bin/node\"]\n    ]\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":12787274,"reputation":91,"user_id":9258299,"display_name":"Antonio Junior"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1553195402,"creation_date":1553193658,"answer_id":55287206,"question_id":53056842,"body_markdown":"I had the same problem and solved by installing node.js again because the react was not able to find it.","title":"Android Studio setting node directory for build (Cause: error=2, No such file or directory)","body":"<p>I had the same problem and solved by installing node.js again because the react was not able to find it.</p>\n"},{"comments":[{"owner":{"account_id":12517377,"reputation":59,"user_id":9110043,"display_name":"Chamal"},"score":3,"creation_date":1629569887,"post_id":58974833,"comment_id":121723137,"body_markdown":"this method worked for me (M1 chip). don&#39;t know what&#39;s wrong with android studio and M1. it&#39;s sucks!","body":"this method worked for me (M1 chip). don&#39;t know what&#39;s wrong with android studio and M1. it&#39;s sucks!"},{"owner":{"account_id":11380262,"reputation":465,"user_id":8343338,"display_name":"Murat &#199;imen"},"score":1,"creation_date":1630493963,"post_id":58974833,"comment_id":121969398,"body_markdown":"Another M1 too. But that certainly works. Can you provide information about why it&#39;s working that way?","body":"Another M1 too. But that certainly works. Can you provide information about why it&#39;s working that way?"},{"owner":{"account_id":5263314,"reputation":2257,"user_id":4204176,"accept_rate":50,"display_name":"Jesus Almaral - Hackaprende"},"score":0,"creation_date":1641920208,"post_id":58974833,"comment_id":124931723,"body_markdown":"It worked for me too, but I do not have M1, this is my processor: AMD Radeon Pro 5500M 4 GB\nIntel UHD Graphics 630 1536 MB","body":"It worked for me too, but I do not have M1, this is my processor: AMD Radeon Pro 5500M 4 GB Intel UHD Graphics 630 1536 MB"},{"owner":{"account_id":8273981,"reputation":2434,"user_id":8886090,"display_name":"Dipendra Sharma"},"score":2,"creation_date":1643363993,"post_id":58974833,"comment_id":125325113,"body_markdown":"Any reason, why it&#39;s working this way?","body":"Any reason, why it&#39;s working this way?"}],"tags":[],"owner":{"account_id":10590864,"reputation":815,"user_id":7801492,"display_name":"Urska Krivc"},"comment_count":4,"down_vote_count":0,"up_vote_count":33,"is_accepted":false,"score":33,"last_activity_date":1574338575,"creation_date":1574338575,"answer_id":58974833,"question_id":53056842,"body_markdown":"I am running Android Studio on MacOS and following worked for me: Yoruba&#39;s answer above and starting the application from Terminal with `open -a &quot;Android Studio.app&quot;`","title":"Android Studio setting node directory for build (Cause: error=2, No such file or directory)","body":"<p>I am running Android Studio on MacOS and following worked for me: Yoruba's answer above and starting the application from Terminal with <code>open -a \"Android Studio.app\"</code></p>\n"},{"comments":[{"owner":{"account_id":5224669,"reputation":463,"user_id":4177049,"accept_rate":80,"display_name":"Luke Brandon Farrell"},"score":0,"creation_date":1638873978,"post_id":69778308,"comment_id":124197939,"body_markdown":"This is the right answer for those on M1 chips.","body":"This is the right answer for those on M1 chips."},{"owner":{"account_id":134544,"reputation":3332,"user_id":336753,"accept_rate":55,"display_name":"kub1x"},"score":0,"creation_date":1646069169,"post_id":69778308,"comment_id":126028421,"body_markdown":"Also had to set the correct gradle plugin version from the [compatibility table](https://developer.android.com/studio/releases/gradle-plugin#updating-gradle) to `classpath(&quot;com.android.tools.build:gradle:4.2.0&quot;)` in the root `build.gradle` file.","body":"Also had to set the correct gradle plugin version from the <a href=\"https://developer.android.com/studio/releases/gradle-plugin#updating-gradle\" rel=\"nofollow noreferrer\">compatibility table</a> to <code>classpath(&quot;com.android.tools.build:gradle:4.2.0&quot;)</code> in the root <code>build.gradle</code> file."},{"owner":{"account_id":7261776,"reputation":1750,"user_id":5538207,"display_name":"O.AbedElBaset"},"score":0,"creation_date":1648977948,"post_id":69778308,"comment_id":126755363,"body_markdown":"This is the correct and working answer after a lot of tries, thanks a lot!","body":"This is the correct and working answer after a lot of tries, thanks a lot!"},{"owner":{"account_id":6389214,"reputation":1002,"user_id":4955995,"accept_rate":60,"display_name":"Prakhar Agrawal"},"score":0,"creation_date":1651579608,"post_id":69778308,"comment_id":127392179,"body_markdown":"Phew...!! After several different attempts, finally this seems to solve it. Thanks","body":"Phew...!! After several different attempts, finally this seems to solve it. Thanks"}],"tags":[],"owner":{"account_id":8595160,"reputation":366,"user_id":6438397,"display_name":"batman"},"comment_count":4,"down_vote_count":0,"up_vote_count":24,"is_accepted":false,"score":24,"last_activity_date":1635586278,"creation_date":1635585769,"answer_id":69778308,"question_id":53056842,"body_markdown":"It is a known bug for the environment:\r\n\r\n - Apple chip M1\r\n - Android Studio arctic fox 2020.3.1 Patch 3\r\n\r\nUpgrade to Gradle version 6.9 or above in the gradle-wrapper.properties\r\n\r\n    distributionUrl=https\\://services.gradle.org/distributions/gradle-6.9.1-all.zip\r\n\r\n\r\nhttps://docs.gradle.org/6.9/release-notes.html","title":"Android Studio setting node directory for build (Cause: error=2, No such file or directory)","body":"<p>It is a known bug for the environment:</p>\n<ul>\n<li>Apple chip M1</li>\n<li>Android Studio arctic fox 2020.3.1 Patch 3</li>\n</ul>\n<p>Upgrade to Gradle version 6.9 or above in the gradle-wrapper.properties</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-6.9.1-all.zip\n</code></pre>\n<p><a href=\"https://docs.gradle.org/6.9/release-notes.html\" rel=\"noreferrer\">https://docs.gradle.org/6.9/release-notes.html</a></p>\n"},{"tags":[],"owner":{"account_id":10051779,"reputation":487,"user_id":7431369,"display_name":"Manish Arora"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669200839,"creation_date":1669200839,"answer_id":74545640,"question_id":53056842,"body_markdown":"Find the node path in your system using command\r\n\r\n`which node` inside terminal \r\nThen open `app/build.gradle` and add this line\r\n\r\n\r\n    ext {    \r\n        react = [\r\n            nodeExecutableAndArgs:  [&quot;Node path from the above command&quot;]\r\n        ]\r\n    }\r\n\r\nAfter that it may ask to upgrade kotlin version then add this in build.gradle\r\n\r\n    buildscript {\r\n            ext {\r\n                kotlinVersion = &quot;1.6.0&quot;\r\n            }\r\n        }","title":"Android Studio setting node directory for build (Cause: error=2, No such file or directory)","body":"<p>Find the node path in your system using command</p>\n<p><code>which node</code> inside terminal\nThen open <code>app/build.gradle</code> and add this line</p>\n<pre><code>ext {    \n    react = [\n        nodeExecutableAndArgs:  [&quot;Node path from the above command&quot;]\n    ]\n}\n</code></pre>\n<p>After that it may ask to upgrade kotlin version then add this in build.gradle</p>\n<pre><code>buildscript {\n        ext {\n            kotlinVersion = &quot;1.6.0&quot;\n        }\n    }\n</code></pre>\n"}],"owner":{"account_id":8843827,"reputation":966,"user_id":6608043,"display_name":"Nathanael"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":16934,"favorite_count":0,"down_vote_count":0,"up_vote_count":17,"accepted_answer_id":54007652,"answer_count":5,"score":17,"last_activity_date":1669200839,"creation_date":1540869173,"question_id":53056842,"body_markdown":"My project build fails because it&#39;s using the incorrect directory to run Node. How do I go about setting the Node directory for these compile-time tasks?\r\n\r\nThe specific task is:\r\n&gt; app:recordFilesBeforeBundleCommandDebug\r\n\r\nAnd the related error:\r\n\r\n\r\n    org.gradle.api.tasks.TaskExecutionException: Execution failed for task &#39;:app:recordFilesBeforeBundleCommandDebug&#39;.\r\n    Caused by: org.gradle.process.internal.ExecException: A problem occurred starting process &#39;command &#39;node&#39;&#39;\r\n    Caused by: net.rubygrapefruit.platform.NativeException: Could not start &#39;node&#39;\r\n    Caused by: java.io.IOException: Cannot run program &quot;node&quot; (in directory &quot;/Users/me/Code/appname/android/app&quot;): error=2, No such file or directory\r\n    Caused by: java.io.IOException: error=2, No such file or directory\r\n\r\n","title":"Android Studio setting node directory for build (Cause: error=2, No such file or directory)","body":"<p>My project build fails because it's using the incorrect directory to run Node. How do I go about setting the Node directory for these compile-time tasks?</p>\n\n<p>The specific task is:</p>\n\n<blockquote>\n  <p>app:recordFilesBeforeBundleCommandDebug</p>\n</blockquote>\n\n<p>And the related error:</p>\n\n<pre><code>org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:recordFilesBeforeBundleCommandDebug'.\nCaused by: org.gradle.process.internal.ExecException: A problem occurred starting process 'command 'node''\nCaused by: net.rubygrapefruit.platform.NativeException: Could not start 'node'\nCaused by: java.io.IOException: Cannot run program \"node\" (in directory \"/Users/me/Code/appname/android/app\"): error=2, No such file or directory\nCaused by: java.io.IOException: error=2, No such file or directory\n</code></pre>\n"},{"tags":["java","date"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1669183746,"post_id":6597846,"comment_id":131584052,"body_markdown":"Modern comment: I strongly recommend that you do not use `DateFormat`, `SimpleDateFormat` and `Date` any more since those classes are troublesome and long outdated. You have seen just a very slight bit of the trouble with them. Use `LocalDate` and `DateTimeFormatter` from [java.time, the modern Java date and time API (since Java 1.8, out in 2014](https://docs.oracle.com/javase/tutorial/datetime/index.html).","body":"Modern comment: I strongly recommend that you do not use <code>DateFormat</code>, <code>SimpleDateFormat</code> and <code>Date</code> any more since those classes are troublesome and long outdated. You have seen just a very slight bit of the trouble with them. Use <code>LocalDate</code> and <code>DateTimeFormatter</code> from <a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">java.time, the modern Java date and time API (since Java 1.8, out in 2014</a>."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":0,"creation_date":1669183901,"post_id":6597846,"comment_id":131584077,"body_markdown":"It’s simple when you know it: Use `LocalDate.parse(dateString, DateTimeFormatter.BASIC_ISO_DATE)`. For your string it throws `java.time.format.DateTimeParseException: Text &#39;20110133&#39; could not be parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 33`. If he string is `20110230`, the message will be *Text &#39;20110230&#39; could not be parsed: Invalid date &#39;FEBRUARY 30&#39;*. Enjoy the precise messages.","body":"It’s simple when you know it: Use <code>LocalDate.parse(dateString, DateTimeFormatter.BASIC_ISO_DATE)</code>. For your string it throws <code>java.time.format.DateTimeParseException: Text &#39;20110133&#39; could not be parsed: Invalid value for DayOfMonth (valid values 1 - 28&#47;31): 33</code>. If he string is <code>20110230</code>, the message will be <i>Text &#39;20110230&#39; could not be parsed: Invalid date &#39;FEBRUARY 30&#39;</i>. Enjoy the precise messages."}],"answers":[{"comments":[{"owner":{"account_id":2636426,"reputation":2069,"user_id":2280961,"accept_rate":90,"display_name":"rboy"},"score":1,"creation_date":1533064599,"post_id":6597875,"comment_id":90206555,"body_markdown":"It&#39;s not perfect and won&#39;t work in all instances, see https://stackoverflow.com/questions/13088140/java-how-to-parse-a-date-strictly","body":"It&#39;s not perfect and won&#39;t work in all instances, see <a href=\"https://stackoverflow.com/questions/13088140/java-how-to-parse-a-date-strictly\" title=\"java how to parse a date strictly\">stackoverflow.com/questions/13088140/&hellip;</a>"}],"tags":[],"owner":{"account_id":101585,"reputation":107721,"user_id":273200,"accept_rate":100,"display_name":"Bala R"},"comment_count":1,"down_vote_count":0,"up_vote_count":9,"is_accepted":true,"score":9,"last_activity_date":1309961716,"creation_date":1309961716,"answer_id":6597875,"question_id":6597846,"body_markdown":"Try doing this\r\n\r\n    DF.setLenient(false);\r\n\r\n[javadoc reference][1]\r\n\r\n\r\n  [1]: http://download.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#setLenient%28boolean%29","title":"How can a DateFormat parse an exact date in java (like DateTime.ParseExact in .NET)?","body":"<p>Try doing this</p>\n\n<pre><code>DF.setLenient(false);\n</code></pre>\n\n<p><a href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/text/DateFormat.html#setLenient%28boolean%29\" rel=\"noreferrer\">javadoc reference</a></p>\n"},{"comments":[{"owner":{"account_id":2636426,"reputation":2069,"user_id":2280961,"accept_rate":90,"display_name":"rboy"},"score":1,"creation_date":1533064620,"post_id":6597888,"comment_id":90206567,"body_markdown":"Will not always work, see this https://stackoverflow.com/questions/13088140/java-how-to-parse-a-date-strictly","body":"Will not always work, see this <a href=\"https://stackoverflow.com/questions/13088140/java-how-to-parse-a-date-strictly\" title=\"java how to parse a date strictly\">stackoverflow.com/questions/13088140/&hellip;</a>"}],"tags":[],"owner":{"account_id":265464,"reputation":38253,"user_id":552438,"display_name":"Anthony Grist"},"comment_count":1,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1309961768,"creation_date":1309961768,"answer_id":6597888,"question_id":6597846,"body_markdown":"You can use the `setLenient(boolean)` method of the DateFormat class to tell it not to be lenient (i.e. accept and then convert) with dates that aren&#39;t valid.","title":"How can a DateFormat parse an exact date in java (like DateTime.ParseExact in .NET)?","body":"<p>You can use the <code>setLenient(boolean)</code> method of the DateFormat class to tell it not to be lenient (i.e. accept and then convert) with dates that aren't valid.</p>\n"},{"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669200533,"creation_date":1669200533,"answer_id":74545584,"question_id":6597846,"body_markdown":"java.time\r\n--\r\n\r\nThe [accepted answer](https://stackoverflow.com/a/6597875/10819573) uses legacy date-time API which was the correct thing to do using the standard library in 2011 when the question was asked. In March 2014, `java.time` API supplanted the [error-prone legacy date-time API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html). Since then, it has been strongly recommended to use this modern date-time API. \r\n\r\nThe java.time API is based on [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601) and for [basic format](https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates) i.e. yyyyMMdd, it comes with a [predefined formatter](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html), `DateTimeFormatter.BASIC_ISO_DATE`.\r\n\r\nUsing this predefined formattter, try to parse your string to a `LocalDate` and `catch` the exception, if any, to understand the cause.\r\n\r\n**Demo using java.time API**:\r\n\r\n    import java.time.LocalDate;\r\n    import java.time.format.DateTimeFormatter;\r\n    import java.time.format.DateTimeParseException;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            String[] samples = { &quot;20221123&quot;, &quot;20110133&quot;, &quot;20110131&quot;, &quot;20110229&quot;, &quot;20110228&quot; };\r\n            for (String dateString : samples) {\r\n                try {\r\n                    System.out.println(&quot;============================&quot;);\r\n                    System.out.println(\r\n                            dateString + &quot; parsed to &quot; + LocalDate.parse(dateString, DateTimeFormatter.BASIC_ISO_DATE));\r\n                } catch (DateTimeParseException e) {\r\n                    System.err.println(e.getMessage());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    ============================\r\n    20221123 parsed to 2022-11-23\r\n    ============================\r\n    Text &#39;20110133&#39; could not be parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 33\r\n    ============================\r\n    20110131 parsed to 2011-01-31\r\n    ============================\r\n    Text &#39;20110229&#39; could not be parsed: Invalid date &#39;February 29&#39; as &#39;2011&#39; is not a leap year\r\n    ============================\r\n    20110228 parsed to 2011-02-28\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.","title":"How can a DateFormat parse an exact date in java (like DateTime.ParseExact in .NET)?","body":"<h2>java.time</h2>\n<p>The <a href=\"https://stackoverflow.com/a/6597875/10819573\">accepted answer</a> uses legacy date-time API which was the correct thing to do using the standard library in 2011 when the question was asked. In March 2014, <code>java.time</code> API supplanted the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html\" rel=\"nofollow noreferrer\">error-prone legacy date-time API</a>. Since then, it has been strongly recommended to use this modern date-time API.</p>\n<p>The java.time API is based on <a href=\"https://en.wikipedia.org/wiki/ISO_8601\" rel=\"nofollow noreferrer\">ISO 8601</a> and for <a href=\"https://en.wikipedia.org/wiki/ISO_8601#Calendar_dates\" rel=\"nofollow noreferrer\">basic format</a> i.e. yyyyMMdd, it comes with a <a href=\"https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html\" rel=\"nofollow noreferrer\">predefined formatter</a>, <code>DateTimeFormatter.BASIC_ISO_DATE</code>.</p>\n<p>Using this predefined formattter, try to parse your string to a <code>LocalDate</code> and <code>catch</code> the exception, if any, to understand the cause.</p>\n<p><strong>Demo using java.time API</strong>:</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.format.DateTimeFormatter;\nimport java.time.format.DateTimeParseException;\n\npublic class Main {\n    public static void main(String[] args) {\n        String[] samples = { &quot;20221123&quot;, &quot;20110133&quot;, &quot;20110131&quot;, &quot;20110229&quot;, &quot;20110228&quot; };\n        for (String dateString : samples) {\n            try {\n                System.out.println(&quot;============================&quot;);\n                System.out.println(\n                        dateString + &quot; parsed to &quot; + LocalDate.parse(dateString, DateTimeFormatter.BASIC_ISO_DATE));\n            } catch (DateTimeParseException e) {\n                System.err.println(e.getMessage());\n            }\n        }\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>============================\n20221123 parsed to 2022-11-23\n============================\nText '20110133' could not be parsed: Invalid value for DayOfMonth (valid values 1 - 28/31): 33\n============================\n20110131 parsed to 2011-01-31\n============================\nText '20110229' could not be parsed: Invalid date 'February 29' as '2011' is not a leap year\n============================\n20110228 parsed to 2011-02-28\n</code></pre>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n"}],"owner":{"account_id":78651,"reputation":10536,"user_id":223686,"accept_rate":82,"display_name":"Zeemee"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":3448,"favorite_count":0,"down_vote_count":0,"up_vote_count":4,"accepted_answer_id":6597875,"answer_count":3,"score":4,"last_activity_date":1669200533,"creation_date":1309961566,"question_id":6597846,"body_markdown":"This question is raised by the following code:\r\n\r\n    DateFormat DF = new SimpleDateFormat(&quot;yyyyMMdd&quot;);\r\n    String dateString = &quot;20110133&quot;;\r\n    System.out.println(DF.parse(dateString));\r\n    // Wed Feb 02 00:00:00 CET 2011\r\n\r\nThe `parse` method transformed Jan 33 to Feb 02.\r\nIs there a way to throw an Exception if the `dateString` does not represent a real date?\r\n\r\nJust like [DateTime.ParseExact][1] in .NET.\r\n\r\n\r\n  [1]: http://msdn.microsoft.com/en-en/library/system.datetime.parseexact.aspx","title":"How can a DateFormat parse an exact date in java (like DateTime.ParseExact in .NET)?","body":"<p>This question is raised by the following code:</p>\n\n<pre><code>DateFormat DF = new SimpleDateFormat(\"yyyyMMdd\");\nString dateString = \"20110133\";\nSystem.out.println(DF.parse(dateString));\n// Wed Feb 02 00:00:00 CET 2011\n</code></pre>\n\n<p>The <code>parse</code> method transformed Jan 33 to Feb 02.\nIs there a way to throw an Exception if the <code>dateString</code> does not represent a real date?</p>\n\n<p>Just like <a href=\"http://msdn.microsoft.com/en-en/library/system.datetime.parseexact.aspx\" rel=\"nofollow\">DateTime.ParseExact</a> in .NET.</p>\n"},{"tags":["java","arrays","regex","hashmap","regex-group"],"comments":[{"owner":{"account_id":4076597,"reputation":4537,"user_id":3348112,"accept_rate":75,"display_name":"CAustin"},"score":0,"creation_date":1669173568,"post_id":74541253,"comment_id":131582465,"body_markdown":"You could do something like this https://regex101.com/r/AWOUIx/1 however that last STK value is going to need to be handled with special rules due to its embedded delimiters and escape characters","body":"You could do something like this <a href=\"https://regex101.com/r/AWOUIx/1\" rel=\"nofollow noreferrer\">regex101.com/r/AWOUIx/1</a> however that last STK value is going to need to be handled with special rules due to its embedded delimiters and escape characters"},{"owner":{"account_id":6426510,"reputation":17091,"user_id":5527985,"display_name":"bobble bubble"},"score":1,"creation_date":1669175428,"post_id":74541253,"comment_id":131582695,"body_markdown":"I have [played with it too (demo)](https://regex101.com/r/3angXs/4). Yea, the last is challenging. My try works only for that part if `{`...`}` is directly after the `KEY=`, there is not another `{`...`}` and it&#39;s not deeper nested like in the sample.","body":"I have <a href=\"https://regex101.com/r/3angXs/4\" rel=\"nofollow noreferrer\">played with it too (demo)</a>. Yea, the last is challenging. My try works only for that part if <code>{</code>...<code>}</code> is directly after the <code>KEY=</code>, there is not another <code>{</code>...<code>}</code> and it&#39;s not deeper nested like in the sample."},{"owner":{"account_id":4980140,"reputation":3385,"user_id":4005379,"accept_rate":64,"display_name":"Alferd Nobel"},"score":0,"creation_date":1669197300,"post_id":74541253,"comment_id":131587842,"body_markdown":"@bobblebubble- Thank you ! I want to capture the &quot;2222-11-10 08:32:22,351&quot; as &quot;timeStamp&quot; . How do I do that ? I tried something like .*?\\s*(\\d++-\\d++-\\d++ \\d++:\\d++:\\d++,\\d++).*?\\w+ which does not work","body":"@bobblebubble- Thank you ! I want to capture the &quot;2222-11-10 08:32:22,351&quot; as &quot;timeStamp&quot; . How do I do that ? I tried something like .*?\\s*(\\d++-\\d++-\\d++ \\d++:\\d++:\\d++,\\d++).*?\\w+ which does not work"},{"owner":{"account_id":6426510,"reputation":17091,"user_id":5527985,"display_name":"bobble bubble"},"score":1,"creation_date":1669246069,"post_id":74541253,"comment_id":131603665,"body_markdown":"@AlferdNobel See [this update](https://regex101.com/r/3angXs/5) (the timestamp would be in *group 3*). **Grouping** in my pattern as follows: **1** → *key*,  **2** → *value*, **3** → *timestamp*, **4** → *remaining stuff*. But I see you got it solved already, cheers. :)","body":"@AlferdNobel See <a href=\"https://regex101.com/r/3angXs/5\" rel=\"nofollow noreferrer\">this update</a> (the timestamp would be in <i>group 3</i>). <b>Grouping</b> in my pattern as follows: <b>1</b> → <i>key</i>,  <b>2</b> → <i>value</i>, <b>3</b> → <i>timestamp</i>, <b>4</b> → <i>remaining stuff</i>. But I see you got it solved already, cheers. :)"}],"answers":[{"comments":[{"owner":{"account_id":4980140,"reputation":3385,"user_id":4005379,"accept_rate":64,"display_name":"Alferd Nobel"},"score":0,"creation_date":1669197074,"post_id":74544421,"comment_id":131587739,"body_markdown":"This is great ! for STK , I want to include the {} as part of the capture. Also I want to capture the &quot;2222-11-10 08:32:22,351&quot; as &quot;timeStamp&quot; . How do I do that ? I tried something like ```.*?\\s*(\\d++-\\d++-\\d++ \\d++:\\d++:\\d++,\\d++).*?\\w+``` which does not work.","body":"This is great ! for STK , I want to include the {} as part of the capture. Also I want to capture the &quot;2222-11-10 08:32:22,351&quot; as &quot;timeStamp&quot; . How do I do that ? I tried something like <code>.*?\\s*(\\d++-\\d++-\\d++ \\d++:\\d++:\\d++,\\d++).*?\\w+</code> which does not work."},{"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":0,"creation_date":1669197393,"post_id":74544421,"comment_id":131587877,"body_markdown":"@AlferdNobel Replace `.replaceAll(&quot;^(?:\\&quot;\\&quot;|\\\\{)|(?:\\\\}|\\&quot;\\&quot;)$&quot;, &quot;&quot;)` with `.replaceAll(&quot;^\\&quot;\\&quot;|\\&quot;\\&quot;$&quot;, &quot;&quot;)` to keep the braces. Actually, you may use [this regex](then) and the code should be a little adjusted. The timestamp extraction is out of scope in the  current question, but `\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d+` [works](https://regex101.com/r/jImA4l/1).","body":"@AlferdNobel Replace <code>.replaceAll(&quot;^(?:\\&quot;\\&quot;|\\\\{)|(?:\\\\}|\\&quot;\\&quot;)$&quot;, &quot;&quot;)</code> with <code>.replaceAll(&quot;^\\&quot;\\&quot;|\\&quot;\\&quot;$&quot;, &quot;&quot;)</code> to keep the braces. Actually, you may use [this regex](then) and the code should be a little adjusted. The timestamp extraction is out of scope in the  current question, but <code>\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2},\\d+</code> <a href=\"https://regex101.com/r/jImA4l/1\" rel=\"nofollow noreferrer\">works</a>."},{"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"score":1,"creation_date":1669198282,"post_id":74544421,"comment_id":131588190,"body_markdown":"@AlferdNobel See https://ideone.com/8Nw2AE","body":"@AlferdNobel See <a href=\"https://ideone.com/8Nw2AE\" rel=\"nofollow noreferrer\">ideone.com/8Nw2AE</a>"},{"owner":{"account_id":4980140,"reputation":3385,"user_id":4005379,"accept_rate":64,"display_name":"Alferd Nobel"},"score":0,"creation_date":1669229215,"post_id":74544421,"comment_id":131599640,"body_markdown":"Thanks for your contribution. That was very helpfull !","body":"Thanks for your contribution. That was very helpfull !"}],"tags":[],"owner":{"account_id":4739783,"reputation":612632,"user_id":3832970,"display_name":"Wiktor Stribiżew"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669198147,"creation_date":1669195552,"answer_id":74544421,"question_id":74541253,"body_markdown":"You can use [this solution](https://ideone.com/ompq9U):\r\n```java\r\nString s0 = &quot;DC696,\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getRortList.dwr\\&quot;,\\&quot;2222-11-10 08:32:22,351               PLV=REQ CIP=9.9.9.7 CMID=syairp CMN=\\&quot;\\&quot;Dub Airport Corporation Limited\\&quot;\\&quot; SN=sfv4_APM180885. DPN=dbPool66HFT01 UID=3862D04108 UN=91F6025D47F01D IUID=1931 LOC=en_GB EID=\\&quot;\\&quot;EVENT-UNKNOWN-UNKNOWN-ob55abe0118-201110083217-396080\\&quot;\\&quot; AGN=\\&quot;\\&quot;[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.35]\\&quot;\\&quot; RID=REQ-[7274545]  MTD=POST URL=\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocRrtBuilderCoollerProxy.getRtList.dwr\\&quot;\\&quot; RQT=2835 MID=ADIN PID=ADMIN PQ=ADIN_PAGE SUB=0 MEM=2331036 CPU=2410 UCPU=2300 SCPU=110 FRE=10 FWR=0 NRE=2281 NWR=218 SQLC=43 SQLT=142 RPS=200 SID=60826A3FAB005A8A9B930177C5******.pc6bc1029 GID=e262dde6d0e040070b58afd4c8 HSID=ddc665538db779508d3213c0bb63bcb1c49fe8236d5f0884ae975915728e61 CSL=CRITICAL CCON=0 CSUP=0 CLOC=0 CEXT=0 CREM=0 STK={\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getrtList.dwr\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:1,\\&quot;\\&quot;t\\&quot;\\&quot;:2835,\\&quot;\\&quot;slft\\&quot;\\&quot;:2679,\\&quot;\\&quot;sub\\&quot;\\&quot;:[{\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;SQL:select * from sfv4_HOUA180885.REPORT_DEF WHERE REPORT_DEF_ID IN (SELECT REPORT_DEF_ID FROM sfv4_HA80885.REPORT_DTASET WHERE REPORT_ID=?) AND DELETED=? ORDER BY REPORT_DEF_ID asc NULLS LAST\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:17,\\&quot;\\&quot;t\\&quot;\\&quot;:40,\\&quot;\\&quot;slft\\&quot;\\&quot;:40,\\&quot;\\&quot;st\\&quot;\\&quot;:337,\\&quot;\\&quot;m\\&quot;\\&quot;:220958,\\&quot;\\&quot;nr\\&quot;\\&quot;:154,\\&quot;\\&quot;rt\\&quot;\\&quot;:0,\\&quot;\\&quot;rn\\&quot;\\&quot;:22,\\&quot;\\&quot;fs\\&quot;\\&quot;:0}]}   \\&quot;,\\&quot;2022-11-09T21:32:22.351+0000\\&quot;,p66cf1029,\\&quot;dc606_ss_application\\&quot;,1,\\&quot;/app/tomcat/logs/pef.log\\&quot;,\\&quot;perf_log_yxx\\&quot;,swsskix13&quot;;\r\n\t\tString regex = &quot;(\\\\w+)=((?=\\\\{)(?:(?=.*?\\\\{(?!.*?\\\\3)(.*\\\\}(?!.*\\\\4).*))(?=.*?\\\\}(?!.*?\\\\4)(.*)).)+?.*?(?=\\\\3)[^{]*(?=\\\\4$)|\\&quot;{2}(.*?)\\&quot;{2}|(\\\\S+))&quot;;\r\nPattern p = Pattern.compile(regex);\r\nMatcher m = p.matcher(s0);\r\nMap&lt;String, String&gt; res = new HashMap&lt;String, String&gt;();\r\nwhile(m.find()) {\r\n\tString val = m.group(2);\r\n\tif (m.group(5) != null) {\r\n\t\tval = m.group(5);\r\n\t}\r\n\tif (m.group(6) != null) {\r\n\t\tval = m.group(6);\r\n\t}\r\n\tres.put(m.group(1), val);\r\n\tSystem.out.println(m.group(1) + &quot; =&gt; &quot; + val + &quot;\\n----&quot;);\r\n}\r\n```\r\nOutput:\r\n```none\r\nPLV =&gt; REQ\r\n----\r\nCIP =&gt; 9.9.9.7\r\n----\r\nCMID =&gt; syairp\r\n----\r\nCMN =&gt; Dub Airport Corporation Limited\r\n----\r\nSN =&gt; sfv4_APM180885.\r\n----\r\nDPN =&gt; dbPool66HFT01\r\n----\r\nUID =&gt; 3862D04108\r\n----\r\nUN =&gt; 91F6025D47F01D\r\n----\r\nIUID =&gt; 1931\r\n----\r\nLOC =&gt; en_GB\r\n----\r\nEID =&gt; EVENT-UNKNOWN-UNKNOWN-ob55abe0118-201110083217-396080\r\n----\r\nAGN =&gt; [Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.35]\r\n----\r\nRID =&gt; REQ-[7274545]\r\n----\r\nMTD =&gt; POST\r\n----\r\nURL =&gt; /xi/ajax/remoting/call/plaincall/adhocRrtBuilderCoollerProxy.getRtList.dwr\r\n----\r\nRQT =&gt; 2835\r\n----\r\nMID =&gt; ADIN\r\n----\r\nPID =&gt; ADMIN\r\n----\r\nPQ =&gt; ADIN_PAGE\r\n----\r\nSUB =&gt; 0\r\n----\r\nMEM =&gt; 2331036\r\n----\r\nCPU =&gt; 2410\r\n----\r\nUCPU =&gt; 2300\r\n----\r\nSCPU =&gt; 110\r\n----\r\nFRE =&gt; 10\r\n----\r\nFWR =&gt; 0\r\n----\r\nNRE =&gt; 2281\r\n----\r\nNWR =&gt; 218\r\n----\r\nSQLC =&gt; 43\r\n----\r\nSQLT =&gt; 142\r\n----\r\nRPS =&gt; 200\r\n----\r\nSID =&gt; 60826A3FAB005A8A9B930177C5******.pc6bc1029\r\n----\r\nGID =&gt; e262dde6d0e040070b58afd4c8\r\n----\r\nHSID =&gt; ddc665538db779508d3213c0bb63bcb1c49fe8236d5f0884ae975915728e61\r\n----\r\nCSL =&gt; CRITICAL\r\n----\r\nCCON =&gt; 0\r\n----\r\nCSUP =&gt; 0\r\n----\r\nCLOC =&gt; 0\r\n----\r\nCEXT =&gt; 0\r\n----\r\nCREM =&gt; 0\r\n----\r\nSTK =&gt; {&quot;&quot;n&quot;&quot;:&quot;&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getrtList.dwr&quot;&quot;,&quot;&quot;i&quot;&quot;:1,&quot;&quot;t&quot;&quot;:2835,&quot;&quot;slft&quot;&quot;:2679,&quot;&quot;sub&quot;&quot;:[{&quot;&quot;n&quot;&quot;:&quot;&quot;SQL:select * from sfv4_HOUA180885.REPORT_DEF WHERE REPORT_DEF_ID IN (SELECT REPORT_DEF_ID FROM sfv4_HA80885.REPORT_DTASET WHERE REPORT_ID=?) AND DELETED=? ORDER BY REPORT_DEF_ID asc NULLS LAST&quot;&quot;,&quot;&quot;i&quot;&quot;:17,&quot;&quot;t&quot;&quot;:40,&quot;&quot;slft&quot;&quot;:40,&quot;&quot;st&quot;&quot;:337,&quot;&quot;m&quot;&quot;:220958,&quot;&quot;nr&quot;&quot;:154,&quot;&quot;rt&quot;&quot;:0,&quot;&quot;rn&quot;&quot;:22,&quot;&quot;fs&quot;&quot;:0}]}\r\n----\r\n```\r\nSee the [regex demo][1].\r\n\r\n*Regex details*:\r\n\r\n - `(\\w+)` - Group 1: one or more word chars\r\n - `=` - a `=` char\r\n - `((?=\\{)(?:(?=.*?\\{(?!.*?\\3)(.*\\}(?!.*\\4).*))(?=.*?\\}(?!.*?\\4)(.*)).)+?.*?(?=\\3)[^{]*(?=\\4$)|\\&quot;{2}(.*?)\\&quot;{2}|(\\S+))` - Group 2:\r\n   - `(?=\\{)(?:(?=.*?\\{(?!.*?\\3)(.*\\}(?!.*\\4).*))(?=.*?\\}(?!.*?\\4)(.*)).)+?.*?(?=\\3)[^{]*(?=\\4$)` - a substring between two paired curly braces (adapted from https://stackoverflow.com/q/47162098/3832970)\r\n   - `|` - or\r\n   - `\\&quot;{2}(.*?)\\&quot;{2}` - two `&quot;`s, then any zero or more chars other than line break chars as few as possible (captured into Group 5), and then two `&quot;`s\r\n   - `|` - or\r\n   - `(\\S+)` - one or more non-whitespace chars (captured into Group 6)\r\n\r\n  [1]: https://regex101.com/r/0ZVOgx/3","title":"Regex for extracting KEY=VALUE pairs from a log string in java","body":"<p>You can use <a href=\"https://ideone.com/ompq9U\" rel=\"nofollow noreferrer\">this solution</a>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String s0 = &quot;DC696,\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getRortList.dwr\\&quot;,\\&quot;2222-11-10 08:32:22,351               PLV=REQ CIP=9.9.9.7 CMID=syairp CMN=\\&quot;\\&quot;Dub Airport Corporation Limited\\&quot;\\&quot; SN=sfv4_APM180885. DPN=dbPool66HFT01 UID=3862D04108 UN=91F6025D47F01D IUID=1931 LOC=en_GB EID=\\&quot;\\&quot;EVENT-UNKNOWN-UNKNOWN-ob55abe0118-201110083217-396080\\&quot;\\&quot; AGN=\\&quot;\\&quot;[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.35]\\&quot;\\&quot; RID=REQ-[7274545]  MTD=POST URL=\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocRrtBuilderCoollerProxy.getRtList.dwr\\&quot;\\&quot; RQT=2835 MID=ADIN PID=ADMIN PQ=ADIN_PAGE SUB=0 MEM=2331036 CPU=2410 UCPU=2300 SCPU=110 FRE=10 FWR=0 NRE=2281 NWR=218 SQLC=43 SQLT=142 RPS=200 SID=60826A3FAB005A8A9B930177C5******.pc6bc1029 GID=e262dde6d0e040070b58afd4c8 HSID=ddc665538db779508d3213c0bb63bcb1c49fe8236d5f0884ae975915728e61 CSL=CRITICAL CCON=0 CSUP=0 CLOC=0 CEXT=0 CREM=0 STK={\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getrtList.dwr\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:1,\\&quot;\\&quot;t\\&quot;\\&quot;:2835,\\&quot;\\&quot;slft\\&quot;\\&quot;:2679,\\&quot;\\&quot;sub\\&quot;\\&quot;:[{\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;SQL:select * from sfv4_HOUA180885.REPORT_DEF WHERE REPORT_DEF_ID IN (SELECT REPORT_DEF_ID FROM sfv4_HA80885.REPORT_DTASET WHERE REPORT_ID=?) AND DELETED=? ORDER BY REPORT_DEF_ID asc NULLS LAST\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:17,\\&quot;\\&quot;t\\&quot;\\&quot;:40,\\&quot;\\&quot;slft\\&quot;\\&quot;:40,\\&quot;\\&quot;st\\&quot;\\&quot;:337,\\&quot;\\&quot;m\\&quot;\\&quot;:220958,\\&quot;\\&quot;nr\\&quot;\\&quot;:154,\\&quot;\\&quot;rt\\&quot;\\&quot;:0,\\&quot;\\&quot;rn\\&quot;\\&quot;:22,\\&quot;\\&quot;fs\\&quot;\\&quot;:0}]}   \\&quot;,\\&quot;2022-11-09T21:32:22.351+0000\\&quot;,p66cf1029,\\&quot;dc606_ss_application\\&quot;,1,\\&quot;/app/tomcat/logs/pef.log\\&quot;,\\&quot;perf_log_yxx\\&quot;,swsskix13&quot;;\n        String regex = &quot;(\\\\w+)=((?=\\\\{)(?:(?=.*?\\\\{(?!.*?\\\\3)(.*\\\\}(?!.*\\\\4).*))(?=.*?\\\\}(?!.*?\\\\4)(.*)).)+?.*?(?=\\\\3)[^{]*(?=\\\\4$)|\\&quot;{2}(.*?)\\&quot;{2}|(\\\\S+))&quot;;\nPattern p = Pattern.compile(regex);\nMatcher m = p.matcher(s0);\nMap&lt;String, String&gt; res = new HashMap&lt;String, String&gt;();\nwhile(m.find()) {\n    String val = m.group(2);\n    if (m.group(5) != null) {\n        val = m.group(5);\n    }\n    if (m.group(6) != null) {\n        val = m.group(6);\n    }\n    res.put(m.group(1), val);\n    System.out.println(m.group(1) + &quot; =&gt; &quot; + val + &quot;\\n----&quot;);\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>PLV =&gt; REQ\n----\nCIP =&gt; 9.9.9.7\n----\nCMID =&gt; syairp\n----\nCMN =&gt; Dub Airport Corporation Limited\n----\nSN =&gt; sfv4_APM180885.\n----\nDPN =&gt; dbPool66HFT01\n----\nUID =&gt; 3862D04108\n----\nUN =&gt; 91F6025D47F01D\n----\nIUID =&gt; 1931\n----\nLOC =&gt; en_GB\n----\nEID =&gt; EVENT-UNKNOWN-UNKNOWN-ob55abe0118-201110083217-396080\n----\nAGN =&gt; [Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.35]\n----\nRID =&gt; REQ-[7274545]\n----\nMTD =&gt; POST\n----\nURL =&gt; /xi/ajax/remoting/call/plaincall/adhocRrtBuilderCoollerProxy.getRtList.dwr\n----\nRQT =&gt; 2835\n----\nMID =&gt; ADIN\n----\nPID =&gt; ADMIN\n----\nPQ =&gt; ADIN_PAGE\n----\nSUB =&gt; 0\n----\nMEM =&gt; 2331036\n----\nCPU =&gt; 2410\n----\nUCPU =&gt; 2300\n----\nSCPU =&gt; 110\n----\nFRE =&gt; 10\n----\nFWR =&gt; 0\n----\nNRE =&gt; 2281\n----\nNWR =&gt; 218\n----\nSQLC =&gt; 43\n----\nSQLT =&gt; 142\n----\nRPS =&gt; 200\n----\nSID =&gt; 60826A3FAB005A8A9B930177C5******.pc6bc1029\n----\nGID =&gt; e262dde6d0e040070b58afd4c8\n----\nHSID =&gt; ddc665538db779508d3213c0bb63bcb1c49fe8236d5f0884ae975915728e61\n----\nCSL =&gt; CRITICAL\n----\nCCON =&gt; 0\n----\nCSUP =&gt; 0\n----\nCLOC =&gt; 0\n----\nCEXT =&gt; 0\n----\nCREM =&gt; 0\n----\nSTK =&gt; {&quot;&quot;n&quot;&quot;:&quot;&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getrtList.dwr&quot;&quot;,&quot;&quot;i&quot;&quot;:1,&quot;&quot;t&quot;&quot;:2835,&quot;&quot;slft&quot;&quot;:2679,&quot;&quot;sub&quot;&quot;:[{&quot;&quot;n&quot;&quot;:&quot;&quot;SQL:select * from sfv4_HOUA180885.REPORT_DEF WHERE REPORT_DEF_ID IN (SELECT REPORT_DEF_ID FROM sfv4_HA80885.REPORT_DTASET WHERE REPORT_ID=?) AND DELETED=? ORDER BY REPORT_DEF_ID asc NULLS LAST&quot;&quot;,&quot;&quot;i&quot;&quot;:17,&quot;&quot;t&quot;&quot;:40,&quot;&quot;slft&quot;&quot;:40,&quot;&quot;st&quot;&quot;:337,&quot;&quot;m&quot;&quot;:220958,&quot;&quot;nr&quot;&quot;:154,&quot;&quot;rt&quot;&quot;:0,&quot;&quot;rn&quot;&quot;:22,&quot;&quot;fs&quot;&quot;:0}]}\n----\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/0ZVOgx/3\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n<p><em>Regex details</em>:</p>\n<ul>\n<li><code>(\\w+)</code> - Group 1: one or more word chars</li>\n<li><code>=</code> - a <code>=</code> char</li>\n<li><code>((?=\\{)(?:(?=.*?\\{(?!.*?\\3)(.*\\}(?!.*\\4).*))(?=.*?\\}(?!.*?\\4)(.*)).)+?.*?(?=\\3)[^{]*(?=\\4$)|\\&quot;{2}(.*?)\\&quot;{2}|(\\S+))</code> - Group 2:\n<ul>\n<li><code>(?=\\{)(?:(?=.*?\\{(?!.*?\\3)(.*\\}(?!.*\\4).*))(?=.*?\\}(?!.*?\\4)(.*)).)+?.*?(?=\\3)[^{]*(?=\\4$)</code> - a substring between two paired curly braces (adapted from <a href=\"https://stackoverflow.com/q/47162098/3832970\">Is it possible to match nested brackets with a regex without using recursion or balancing groups?</a>)</li>\n<li><code>|</code> - or</li>\n<li><code>\\&quot;{2}(.*?)\\&quot;{2}</code> - two <code>&quot;</code>s, then any zero or more chars other than line break chars as few as possible (captured into Group 5), and then two <code>&quot;</code>s</li>\n<li><code>|</code> - or</li>\n<li><code>(\\S+)</code> - one or more non-whitespace chars (captured into Group 6)</li>\n</ul>\n</li>\n</ul>\n"}],"owner":{"account_id":4980140,"reputation":3385,"user_id":4005379,"accept_rate":64,"display_name":"Alferd Nobel"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":116,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74544421,"answer_count":1,"score":2,"last_activity_date":1669200386,"creation_date":1669171904,"question_id":74541253,"body_markdown":"I have a log string like this :\r\n\r\n    String s0 = &quot;DC696,\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getRortList.dwr\\&quot;,\\&quot;2222-11-10 08:32:22,351               PLV=REQ CIP=9.9.9.7 CMID=syairp CMN=\\&quot;\\&quot;Dub Airport Corporation Limited\\&quot;\\&quot; SN=sfv4_APM180885. DPN=dbPool66HFT01 UID=3862D04108 UN=91F6025D47F01D IUID=1931 LOC=en_GB EID=\\&quot;\\&quot;EVENT-UNKNOWN-UNKNOWN-ob55abe0118-201110083217-396080\\&quot;\\&quot; AGN=\\&quot;\\&quot;[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.35]\\&quot;\\&quot; RID=REQ-[7274545]  MTD=POST URL=\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocRrtBuilderCoollerProxy.getRtList.dwr\\&quot;\\&quot; RQT=2835 MID=ADIN PID=ADMIN PQ=ADIN_PAGE SUB=0 MEM=2331036 CPU=2410 UCPU=2300 SCPU=110 FRE=10 FWR=0 NRE=2281 NWR=218 SQLC=43 SQLT=142 RPS=200 SID=60826A3FAB005A8A9B930177C5******.pc6bc1029 GID=e262dde6d0e040070b58afd4c8 HSID=ddc665538db779508d3213c0bb63bcb1c49fe8236d5f0884ae975915728e61 CSL=CRITICAL CCON=0 CSUP=0 CLOC=0 CEXT=0 CREM=0 STK={\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getrtList.dwr\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:1,\\&quot;\\&quot;t\\&quot;\\&quot;:2835,\\&quot;\\&quot;slft\\&quot;\\&quot;:2679,\\&quot;\\&quot;sub\\&quot;\\&quot;:[{\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;SQL:select * from sfv4_HOUA180885.REPORT_DEF WHERE REPORT_DEF_ID IN (SELECT REPORT_DEF_ID FROM sfv4_HA80885.REPORT_DTASET WHERE REPORT_ID=?) AND DELETED=? ORDER BY REPORT_DEF_ID asc NULLS LAST\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:17,\\&quot;\\&quot;t\\&quot;\\&quot;:40,\\&quot;\\&quot;slft\\&quot;\\&quot;:40,\\&quot;\\&quot;st\\&quot;\\&quot;:337,\\&quot;\\&quot;m\\&quot;\\&quot;:220958,\\&quot;\\&quot;nr\\&quot;\\&quot;:154,\\&quot;\\&quot;rt\\&quot;\\&quot;:0,\\&quot;\\&quot;rn\\&quot;\\&quot;:22,\\&quot;\\&quot;fs\\&quot;\\&quot;:0}]}   \\&quot;,\\&quot;2022-11-09T21:32:22.351+0000\\&quot;,p66cf1029,\\&quot;dc606_ss_application\\&quot;,1,\\&quot;/app/tomcat/logs/pef.log\\&quot;,\\&quot;perf_log_yxx\\&quot;,swsskix13&quot;;\r\n\r\nI want to extract the KEY=VALUE pairs like `{PLV=REQ, CIP=9.9.9.7,CMN=&quot;Dub Airport Corporation Limited&quot;, STK={...} }`. into a `Map&lt;String,String&gt;`\r\n \r\nI attempted with this, which does not work \r\n\r\n    String[] str1= str.split(&quot;\\\\s(?=(([^\\&quot;]*\\&quot;))*[^\\&quot;]*$)\\\\s*&quot;);\r\n    System.out.println(&quot;Value of split string is &quot;+ Arrays.toString(str1));\r\n\r\nAny inputs will be of great help please.\r\n","title":"Regex for extracting KEY=VALUE pairs from a log string in java","body":"<p>I have a log string like this :</p>\n<pre><code>String s0 = &quot;DC696,\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getRortList.dwr\\&quot;,\\&quot;2222-11-10 08:32:22,351               PLV=REQ CIP=9.9.9.7 CMID=syairp CMN=\\&quot;\\&quot;Dub Airport Corporation Limited\\&quot;\\&quot; SN=sfv4_APM180885. DPN=dbPool66HFT01 UID=3862D04108 UN=91F6025D47F01D IUID=1931 LOC=en_GB EID=\\&quot;\\&quot;EVENT-UNKNOWN-UNKNOWN-ob55abe0118-201110083217-396080\\&quot;\\&quot; AGN=\\&quot;\\&quot;[Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36 Edg/107.0.1418.35]\\&quot;\\&quot; RID=REQ-[7274545]  MTD=POST URL=\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocRrtBuilderCoollerProxy.getRtList.dwr\\&quot;\\&quot; RQT=2835 MID=ADIN PID=ADMIN PQ=ADIN_PAGE SUB=0 MEM=2331036 CPU=2410 UCPU=2300 SCPU=110 FRE=10 FWR=0 NRE=2281 NWR=218 SQLC=43 SQLT=142 RPS=200 SID=60826A3FAB005A8A9B930177C5******.pc6bc1029 GID=e262dde6d0e040070b58afd4c8 HSID=ddc665538db779508d3213c0bb63bcb1c49fe8236d5f0884ae975915728e61 CSL=CRITICAL CCON=0 CSUP=0 CLOC=0 CEXT=0 CREM=0 STK={\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;/xi/ajax/remoting/call/plaincall/adhocReportBuilderControllerProxy.getrtList.dwr\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:1,\\&quot;\\&quot;t\\&quot;\\&quot;:2835,\\&quot;\\&quot;slft\\&quot;\\&quot;:2679,\\&quot;\\&quot;sub\\&quot;\\&quot;:[{\\&quot;\\&quot;n\\&quot;\\&quot;:\\&quot;\\&quot;SQL:select * from sfv4_HOUA180885.REPORT_DEF WHERE REPORT_DEF_ID IN (SELECT REPORT_DEF_ID FROM sfv4_HA80885.REPORT_DTASET WHERE REPORT_ID=?) AND DELETED=? ORDER BY REPORT_DEF_ID asc NULLS LAST\\&quot;\\&quot;,\\&quot;\\&quot;i\\&quot;\\&quot;:17,\\&quot;\\&quot;t\\&quot;\\&quot;:40,\\&quot;\\&quot;slft\\&quot;\\&quot;:40,\\&quot;\\&quot;st\\&quot;\\&quot;:337,\\&quot;\\&quot;m\\&quot;\\&quot;:220958,\\&quot;\\&quot;nr\\&quot;\\&quot;:154,\\&quot;\\&quot;rt\\&quot;\\&quot;:0,\\&quot;\\&quot;rn\\&quot;\\&quot;:22,\\&quot;\\&quot;fs\\&quot;\\&quot;:0}]}   \\&quot;,\\&quot;2022-11-09T21:32:22.351+0000\\&quot;,p66cf1029,\\&quot;dc606_ss_application\\&quot;,1,\\&quot;/app/tomcat/logs/pef.log\\&quot;,\\&quot;perf_log_yxx\\&quot;,swsskix13&quot;;\n</code></pre>\n<p>I want to extract the KEY=VALUE pairs like <code>{PLV=REQ, CIP=9.9.9.7,CMN=&quot;Dub Airport Corporation Limited&quot;, STK={...} }</code>. into a <code>Map&lt;String,String&gt;</code></p>\n<p>I attempted with this, which does not work</p>\n<pre><code>String[] str1= str.split(&quot;\\\\s(?=(([^\\&quot;]*\\&quot;))*[^\\&quot;]*$)\\\\s*&quot;);\nSystem.out.println(&quot;Value of split string is &quot;+ Arrays.toString(str1));\n</code></pre>\n<p>Any inputs will be of great help please.</p>\n"},{"tags":["java","html","button","onclick"],"comments":[{"owner":{"account_id":12401383,"reputation":3636,"user_id":9038475,"display_name":"Geshode"},"score":0,"creation_date":1669195574,"post_id":74544379,"comment_id":131587176,"body_markdown":"`querySelector()` only selects one element. You want to use `querySelectorAll()`. Also you want to change the class of the HTML elements and not their values.","body":"<code>querySelector()</code> only selects one element. You want to use <code>querySelectorAll()</code>. Also you want to change the class of the HTML elements and not their values."}],"answers":[{"tags":[],"owner":{"account_id":20475875,"reputation":128,"user_id":15025231,"display_name":"Nika Jobava"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669198399,"creation_date":1669198399,"answer_id":74545108,"question_id":74544379,"body_markdown":"you have to use ```document.querySelectorAll``` to access multiple elements. Then Array will be created.\r\n\r\n```\r\nvar buttonArray = document.querySelectorAll(&quot;.button&quot;);\r\n\r\n\r\nfor(btn in buttonArray){\r\n    btn.addEventListener(&quot;click&quot;, function(){\r\n        //action that will happen after click\r\n    });\r\n\r\n}\r\n```\r\n","title":"How to change an input value of type button to lowercase on button click","body":"<p>you have to use <code>document.querySelectorAll</code> to access multiple elements. Then Array will be created.</p>\n<pre><code>var buttonArray = document.querySelectorAll(&quot;.button&quot;);\n\n\nfor(btn in buttonArray){\n    btn.addEventListener(&quot;click&quot;, function(){\n        //action that will happen after click\n    });\n\n}\n</code></pre>\n"},{"comments":[{"owner":{"account_id":26944878,"reputation":3,"user_id":20515018,"display_name":"Matt"},"score":0,"creation_date":1669202450,"post_id":74545538,"comment_id":131589669,"body_markdown":"Thank you bro I tried it and it worked what if I want to change it back like a toggle","body":"Thank you bro I tried it and it worked what if I want to change it back like a toggle"}],"tags":[],"owner":{"account_id":27019491,"reputation":11,"user_id":20577730,"display_name":"rustam"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669200323,"creation_date":1669200323,"answer_id":74545538,"question_id":74544379,"body_markdown":"    you can use this code example:\r\n\r\n&lt;!-- begin snippet: js hide: false console: true babel: false --&gt;\r\n\r\n&lt;!-- language: lang-html --&gt;\r\n\r\n    &lt;!DOCTYPE html&gt;\r\n    &lt;html&gt;\r\n      &lt;body&gt;\r\n      \r\n        &lt;input type=&quot;button&quot; onclick=&quot;Lowercase();&quot; value=&quot;Change Letters&quot; /&gt;\r\n        &lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;A&quot; /&gt;\r\n        &lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;B&quot; /&gt;\r\n        &lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;C&quot; /&gt;\r\n        &lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;D&quot; /&gt;\r\n        &lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;E&quot; /&gt;\r\n\r\n        &lt;script&gt;\r\n          function Lowercase() {\r\n\r\n            const nodeList = document.querySelectorAll(&quot;.button&quot;);\r\n            for (let i = 0; i &lt; nodeList.length; i++) {\r\n              nodeList[i].style.textTransform = &quot;lowercase&quot;;\r\n            }\r\n          }\r\n       \r\n        &lt;/script&gt;\r\n      &lt;/body&gt;\r\n    &lt;/html&gt;\r\n\r\n\r\n&lt;!-- end snippet --&gt;\r\n\r\n","title":"How to change an input value of type button to lowercase on button click","body":"<pre><code>you can use this code example:\n</code></pre>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;body&gt;\n  \n    &lt;input type=\"button\" onclick=\"Lowercase();\" value=\"Change Letters\" /&gt;\n    &lt;input type=\"button\" class=\"button\" value=\"A\" /&gt;\n    &lt;input type=\"button\" class=\"button\" value=\"B\" /&gt;\n    &lt;input type=\"button\" class=\"button\" value=\"C\" /&gt;\n    &lt;input type=\"button\" class=\"button\" value=\"D\" /&gt;\n    &lt;input type=\"button\" class=\"button\" value=\"E\" /&gt;\n\n    &lt;script&gt;\n      function Lowercase() {\n\n        const nodeList = document.querySelectorAll(\".button\");\n        for (let i = 0; i &lt; nodeList.length; i++) {\n          nodeList[i].style.textTransform = \"lowercase\";\n        }\n      }\n   \n    &lt;/script&gt;\n  &lt;/body&gt;\n&lt;/html&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"account_id":26944878,"reputation":3,"user_id":20515018,"display_name":"Matt"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":75,"favorite_count":0,"down_vote_count":1,"up_vote_count":0,"accepted_answer_id":74545108,"answer_count":2,"score":-1,"last_activity_date":1669200323,"creation_date":1669195321,"question_id":74544379,"body_markdown":"Let&#39;s say I have 5 of these\r\n\r\n```\r\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;A&quot;&gt;\r\n\r\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;B&quot;&gt;\r\n\r\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;C&quot;&gt;\r\n\r\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;D&quot;&gt;\r\n\r\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;E&quot;&gt;\r\n\r\n\r\n```\r\nSo basically I want all the buttons with a class of  **button** to change its value from uppercase (A) to lowercase (a) when I click on a specific button like this \r\n`&lt;input type=&quot;button&quot; id=&quot;ChangeBtn&quot;&gt;`\r\n\r\nI tried using JavaScript (which im new to) to do this.\r\n\r\n```\r\n&lt;script&gt;\r\n\r\n//The button I want to click to perform the function\r\n\r\nVar button = document.gelementById(&quot;ChangeBtn&quot;);\r\n\r\n//The buttons with a class button I want to change its value to lowercase\r\n\r\nVar value = document.querySelector(&quot;.button&quot;).value;\r\n\r\nbutton.onclick = function (){\r\n\r\nValue.classList.toggle(&quot;change&quot;);\r\n\r\n}\r\n\r\n&lt;/script&gt;\r\n\r\n\r\n```\r\n\r\nUsing the class list \r\n```\r\n.change{\r\n\r\ntext-transform : lowercase\r\n\r\n}\r\n```\r\n\r\n\r\n\r\n","title":"How to change an input value of type button to lowercase on button click","body":"<p>Let's say I have 5 of these</p>\n<pre><code>&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;A&quot;&gt;\n\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;B&quot;&gt;\n\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;C&quot;&gt;\n\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;D&quot;&gt;\n\n&lt;input type=&quot;button&quot; class=&quot;button&quot; value=&quot;E&quot;&gt;\n\n\n</code></pre>\n<p>So basically I want all the buttons with a class of  <strong>button</strong> to change its value from uppercase (A) to lowercase (a) when I click on a specific button like this\n<code>&lt;input type=&quot;button&quot; id=&quot;ChangeBtn&quot;&gt;</code></p>\n<p>I tried using JavaScript (which im new to) to do this.</p>\n<pre><code>&lt;script&gt;\n\n//The button I want to click to perform the function\n\nVar button = document.gelementById(&quot;ChangeBtn&quot;);\n\n//The buttons with a class button I want to change its value to lowercase\n\nVar value = document.querySelector(&quot;.button&quot;).value;\n\nbutton.onclick = function (){\n\nValue.classList.toggle(&quot;change&quot;);\n\n}\n\n&lt;/script&gt;\n\n\n</code></pre>\n<p>Using the class list</p>\n<pre><code>.change{\n\ntext-transform : lowercase\n\n}\n</code></pre>\n"},{"tags":["java","multithreading","concurrency","thread-safety"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1669199572,"post_id":74545348,"comment_id":131588661,"body_markdown":"Why should the final value be different if all threads do the same every time and you always wait for all thread to finish?","body":"Why should the final value be different if all threads do the same every time and you always wait for all thread to finish?"},{"owner":{"account_id":400584,"reputation":2150,"user_id":766640,"accept_rate":100,"display_name":"adamjmarkham"},"score":0,"creation_date":1669200056,"post_id":74545348,"comment_id":131588844,"body_markdown":"I thought the problem here would be thread visibility. For example thread A may increment counter but thread B may still see 0 because the change isn&#39;t visible to that thread. I thought in order to make this thread safe the counter field should be marked as volatile so all threads see the latest update?","body":"I thought the problem here would be thread visibility. For example thread A may increment counter but thread B may still see 0 because the change isn&#39;t visible to that thread. I thought in order to make this thread safe the counter field should be marked as volatile so all threads see the latest update?"},{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1669200791,"post_id":74545348,"comment_id":131589073,"body_markdown":"As @biziclop already answered, there is *no guarantee* that it will break, only a chance. Try incrementing the counter multiple times (say 10 or 100) in each task, that would increase the likelyhood of something &quot;going wrong&quot;.","body":"As @biziclop already answered, there is <i>no guarantee</i> that it will break, only a chance. Try incrementing the counter multiple times (say 10 or 100) in each task, that would increase the likelyhood of something &quot;going wrong&quot;."}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1669200853,"post_id":74545499,"comment_id":131589097,"body_markdown":"I think one reason why things don&#39;t &quot;go wrong&quot; here is because each tread only reads and writes the variable exactly once and thus is unlikely to have it already cached. But as you said: that&#39;s far from being a guarantee for it to always work.","body":"I think one reason why things don&#39;t &quot;go wrong&quot; here is because each tread only reads and writes the variable exactly once and thus is unlikely to have it already cached. But as you said: that&#39;s far from being a guarantee for it to always work."},{"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"score":0,"creation_date":1669201100,"post_id":74545499,"comment_id":131589188,"body_markdown":"@JoachimSauer Yes, that&#39;s a good point, running thousands of passes might get it to break.","body":"@JoachimSauer Yes, that&#39;s a good point, running thousands of passes might get it to break."},{"owner":{"account_id":400584,"reputation":2150,"user_id":766640,"accept_rate":100,"display_name":"adamjmarkham"},"score":0,"creation_date":1669202341,"post_id":74545499,"comment_id":131589628,"body_markdown":"Thanks for the answer. That makes sense. I tried incrementing the counter 1000 times for each task as mentioned and I get varying counts at the end.","body":"Thanks for the answer. That makes sense. I tried incrementing the counter 1000 times for each task as mentioned and I get varying counts at the end."}],"tags":[],"owner":{"account_id":279365,"reputation":49126,"user_id":574479,"accept_rate":87,"display_name":"biziclop"},"comment_count":3,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669200081,"creation_date":1669200081,"answer_id":74545499,"question_id":74545348,"body_markdown":"It&#39;s worth remembering that just because something isn&#39;t synchronised correctly, it could still perform correctly under some circumstances, it just isn&#39;t **guaranteed** to do so in every situation, on every JVM, on every hardware.\r\n\r\nIn other words, there is no reverse guarantee, optimisers for example are free to decide your code can be replaced at little to no cost with a correctly synchronised implementation.\r\n\r\n(Whether that is what&#39;s actually happening here isn&#39;t obvious to me at first glance.)","title":"Why does non-thread safe counter in Java always return the correct value?","body":"<p>It's worth remembering that just because something isn't synchronised correctly, it could still perform correctly under some circumstances, it just isn't <strong>guaranteed</strong> to do so in every situation, on every JVM, on every hardware.</p>\n<p>In other words, there is no reverse guarantee, optimisers for example are free to decide your code can be replaced at little to no cost with a correctly synchronised implementation.</p>\n<p>(Whether that is what's actually happening here isn't obvious to me at first glance.)</p>\n"}],"owner":{"account_id":400584,"reputation":2150,"user_id":766640,"accept_rate":100,"display_name":"adamjmarkham"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":53,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74545499,"answer_count":1,"score":2,"last_activity_date":1669200081,"creation_date":1669199444,"question_id":74545348,"body_markdown":"I&#39;m trying to simulate a non-thread safe counter class by incrementing the count in an executor service task and using countdown latches to wait for all threads to start and then stop before reading the value in the main thread. \r\n\r\nThe issue is that when I run it the System.out at the end always returns 10 as the correct count value. I was expecting to see some other value when I run this as the 10 threads may see different values.\r\n\r\nMy code is below. Any idea what is happening here? I&#39;m running it in Java 17 and from Intellij IDEA.\r\n\r\nCounter.java\r\n\r\n    public class Counter {\r\n    \r\n        private int counter = 0;\r\n    \r\n        public void incrementCounter() {\r\n            counter += 1;\r\n        }\r\n    \r\n        public int getCounter() {\r\n            return counter;\r\n        }\r\n    }\r\n\r\nMain.java\r\n\r\n    import java.util.concurrent.CountDownLatch;\r\n    import java.util.concurrent.ExecutorService;\r\n    import java.util.concurrent.Executors;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) throws InterruptedException {\r\n            ExecutorService executorService = Executors.newFixedThreadPool(10);\r\n    \r\n            CountDownLatch startSignal = new CountDownLatch(10);\r\n            CountDownLatch doneSignal = new CountDownLatch(10);\r\n            Counter counter = new Counter();\r\n            for (int i=0; i&lt;10; i++) {\r\n                executorService.submit(() -&gt; {\r\n                    try {\r\n                        startSignal.countDown();\r\n                        startSignal.await();\r\n                    } catch (InterruptedException e) {\r\n                        throw new RuntimeException(e);\r\n                    }\r\n    \r\n                    counter.incrementCounter();\r\n                    doneSignal.countDown();\r\n                });\r\n            }\r\n    \r\n            doneSignal.await();\r\n            System.out.println(&quot;Finished: &quot; + counter.getCounter());\r\n            executorService.shutdownNow();\r\n        }\r\n    }","title":"Why does non-thread safe counter in Java always return the correct value?","body":"<p>I'm trying to simulate a non-thread safe counter class by incrementing the count in an executor service task and using countdown latches to wait for all threads to start and then stop before reading the value in the main thread.</p>\n<p>The issue is that when I run it the System.out at the end always returns 10 as the correct count value. I was expecting to see some other value when I run this as the 10 threads may see different values.</p>\n<p>My code is below. Any idea what is happening here? I'm running it in Java 17 and from Intellij IDEA.</p>\n<p>Counter.java</p>\n<pre><code>public class Counter {\n\n    private int counter = 0;\n\n    public void incrementCounter() {\n        counter += 1;\n    }\n\n    public int getCounter() {\n        return counter;\n    }\n}\n</code></pre>\n<p>Main.java</p>\n<pre><code>import java.util.concurrent.CountDownLatch;\nimport java.util.concurrent.ExecutorService;\nimport java.util.concurrent.Executors;\n\npublic class Main {\n    public static void main(String[] args) throws InterruptedException {\n        ExecutorService executorService = Executors.newFixedThreadPool(10);\n\n        CountDownLatch startSignal = new CountDownLatch(10);\n        CountDownLatch doneSignal = new CountDownLatch(10);\n        Counter counter = new Counter();\n        for (int i=0; i&lt;10; i++) {\n            executorService.submit(() -&gt; {\n                try {\n                    startSignal.countDown();\n                    startSignal.await();\n                } catch (InterruptedException e) {\n                    throw new RuntimeException(e);\n                }\n\n                counter.incrementCounter();\n                doneSignal.countDown();\n            });\n        }\n\n        doneSignal.await();\n        System.out.println(&quot;Finished: &quot; + counter.getCounter());\n        executorService.shutdownNow();\n    }\n}\n</code></pre>\n"},{"tags":["java","xslt","xalan"],"comments":[{"owner":{"account_id":529122,"reputation":158120,"user_id":415448,"accept_rate":33,"display_name":"Michael Kay"},"score":1,"creation_date":1669194341,"post_id":74540492,"comment_id":131586761,"body_markdown":"Note that `Transformer` is an interface with multiple implementations. You are asking specifically about the Xalan implementation.","body":"Note that <code>Transformer</code> is an interface with multiple implementations. You are asking specifically about the Xalan implementation."},{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1669196936,"post_id":74540492,"comment_id":131587685,"body_markdown":"Yes, you are right. I just updated my question.","body":"Yes, you are right. I just updated my question."}],"answers":[{"comments":[{"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"score":0,"creation_date":1669397594,"post_id":74545252,"comment_id":131639748,"body_markdown":"aargh, many thanks for discovering this!!","body":"aargh, many thanks for discovering this!!"}],"tags":[],"owner":{"account_id":22562945,"reputation":462,"user_id":16750357,"display_name":"al.truisme"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669199890,"creation_date":1669199051,"answer_id":74545252,"question_id":74540492,"body_markdown":"This may not be what you want, but one option would be setting the **locale** of the entire JVM from the command line with the options:\r\n\r\n``` \r\njava ... -Duser.country=US and -Duser.lang=en\r\n```\r\n\r\nPerusing the ```Xalan``` code, it seems that message resources are always loaded as a function of the default locale, hence I don&#39;t think that you can set a local specifically for ```Xalan```.  Too bad because that should be fairly simple to implement.\r\n\r\nhttps://github.com/apache/xalan-j/blob/660e12dca29e28df9f3f9ebb7c19435bb16362f3/src/org/apache/xalan/res/XSLTErrorResources.java#L1455","title":"How to be able to change the error messages locales when using the Java Transformer class","body":"<p>This may not be what you want, but one option would be setting the <strong>locale</strong> of the entire JVM from the command line with the options:</p>\n<pre><code>java ... -Duser.country=US and -Duser.lang=en\n</code></pre>\n<p>Perusing the <code>Xalan</code> code, it seems that message resources are always loaded as a function of the default locale, hence I don't think that you can set a local specifically for <code>Xalan</code>.  Too bad because that should be fairly simple to implement.</p>\n<p><a href=\"https://github.com/apache/xalan-j/blob/660e12dca29e28df9f3f9ebb7c19435bb16362f3/src/org/apache/xalan/res/XSLTErrorResources.java#L1455\" rel=\"nofollow noreferrer\">https://github.com/apache/xalan-j/blob/660e12dca29e28df9f3f9ebb7c19435bb16362f3/src/org/apache/xalan/res/XSLTErrorResources.java#L1455</a></p>\n"}],"owner":{"account_id":8204014,"reputation":513,"user_id":6174386,"display_name":"Herv&#233; Girod"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":45,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74545252,"answer_count":1,"score":0,"last_activity_date":1669199890,"creation_date":1669163316,"question_id":74540492,"body_markdown":"I am using the XSL Transformer class in java (in my case, it&#39;s Java 8). I have some error messages such as:\r\n\r\n    Avertissements de compilateur :\r\n      file:/D:/Java/a661Xmltool/samplesCopy/metadata/Transforms/Part1/DataSpaceXSD/GenerateDataSpaceXSD_V1_0withEXSLT.xsl: line 1160: Attribut &#39;base&#39; &#224; l&#39;ext&#233;rieur de l&#39;&#233;l&#233;ment.\r\n    Avertissements de compilateur :\r\n      file:/D:/Java/a661Xmltool/samplesCopy/metadata/Transforms/Part1/DataSpaceXSD/GenerateDataSpaceXSD_V1_0withEXSLT.xsl: line 1160: Attribut &#39;base&#39; &#224; l&#39;ext&#233;rieur de l&#39;&#233;l&#233;ment.\r\n    ERROR:  &#39;Erreur de syntaxe dans &#39;text(  )&#39;.&#39;\r\n\r\nMy machine has a French Locale, but I would prefer to have the messages in English. Is it possible to do that like it is with the SAXParser class?\r\n\r\nFor example, in the SAXParser, you can do:\r\n\r\n     try {\r\n        parser.setProperty(&quot;http://apache.org/xml/properties/locale&quot;, locale);\r\n     } catch (SAXException ex) {\r\n     }\r\n\r\nI tried with the transformer:\r\n\r\n    transformer.setParameter(&quot;http://apache.org/xml/properties/locale&quot;, locale);\r\n\r\nbut to no avail.\r\n\r\nTo be more clear, I am asking about the Xalan implementation, which is the default Java implementation. I looked in the Xalan documentation, and found nothing.\r\n\r\n","title":"How to be able to change the error messages locales when using the Java Transformer class","body":"<p>I am using the XSL Transformer class in java (in my case, it's Java 8). I have some error messages such as:</p>\n<pre><code>Avertissements de compilateur :\n  file:/D:/Java/a661Xmltool/samplesCopy/metadata/Transforms/Part1/DataSpaceXSD/GenerateDataSpaceXSD_V1_0withEXSLT.xsl: line 1160: Attribut 'base' à l'extérieur de l'élément.\nAvertissements de compilateur :\n  file:/D:/Java/a661Xmltool/samplesCopy/metadata/Transforms/Part1/DataSpaceXSD/GenerateDataSpaceXSD_V1_0withEXSLT.xsl: line 1160: Attribut 'base' à l'extérieur de l'élément.\nERROR:  'Erreur de syntaxe dans 'text(  )'.'\n</code></pre>\n<p>My machine has a French Locale, but I would prefer to have the messages in English. Is it possible to do that like it is with the SAXParser class?</p>\n<p>For example, in the SAXParser, you can do:</p>\n<pre><code> try {\n    parser.setProperty(&quot;http://apache.org/xml/properties/locale&quot;, locale);\n } catch (SAXException ex) {\n }\n</code></pre>\n<p>I tried with the transformer:</p>\n<pre><code>transformer.setParameter(&quot;http://apache.org/xml/properties/locale&quot;, locale);\n</code></pre>\n<p>but to no avail.</p>\n<p>To be more clear, I am asking about the Xalan implementation, which is the default Java implementation. I looked in the Xalan documentation, and found nothing.</p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":1063012,"reputation":71986,"user_id":1064245,"accept_rate":82,"display_name":"M A"},"score":0,"creation_date":1598385242,"post_id":63586031,"comment_id":112440852,"body_markdown":"_&quot;when an instance of a class is created, an instance of the parent class is also created, which is referenced by super()&quot;_, not really the best way to describe it: **only one instance is created**, but this instance is both an instance of the class and an instance of its parent at the same time.","body":"<i>&quot;when an instance of a class is created, an instance of the parent class is also created, which is referenced by super()&quot;</i>, not really the best way to describe it: <b>only one instance is created</b>, but this instance is both an instance of the class and an instance of its parent at the same time."},{"owner":{"account_id":1485367,"reputation":122993,"user_id":1393766,"display_name":"Pshemo"},"score":0,"creation_date":1598386759,"post_id":63586031,"comment_id":112441413,"body_markdown":"By &quot;and also no *space()* call&quot; did you perhaps mean &quot;and also no *super()* call&quot;? (if not then could you clarify what you mean by `space()` call)?","body":"By &quot;and also no <i>space()</i> call&quot; did you perhaps mean &quot;and also no <i>super()</i> call&quot;? (if not then could you clarify what you mean by <code>space()</code> call)?"},{"owner":{"account_id":5921372,"reputation":55,"user_id":4839662,"display_name":"Emiliyana Kalinova"},"score":0,"creation_date":1598428321,"post_id":63586031,"comment_id":112452371,"body_markdown":"Yes, sorry, I ment super()","body":"Yes, sorry, I ment super()"}],"answers":[{"tags":[],"owner":{"account_id":14601909,"reputation":955,"user_id":10545973,"display_name":"Rick"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1598384883,"creation_date":1598384883,"answer_id":63586101,"question_id":63586031,"body_markdown":"**Scenario 1:**\r\nIf you don&#39;t define any constructor, a default, no-argument, constructor is created for you. That&#39;s the one that is called when using `new FotoApparat()`. This default constructor then calls the constructor on `Object` (see scenario 2.)\r\n\r\n**Scenario 2:**\r\nIf you don&#39;t explicitly call `super()`, this call is still done implicitly. It is possible however that the parent object does not have a constructor without arguments, in which case you are required to call a specific constructor.","title":"Java constructors and super()","body":"<p><strong>Scenario 1:</strong>\nIf you don't define any constructor, a default, no-argument, constructor is created for you. That's the one that is called when using <code>new FotoApparat()</code>. This default constructor then calls the constructor on <code>Object</code> (see scenario 2.)</p>\n<p><strong>Scenario 2:</strong>\nIf you don't explicitly call <code>super()</code>, this call is still done implicitly. It is possible however that the parent object does not have a constructor without arguments, in which case you are required to call a specific constructor.</p>\n"},{"comments":[{"owner":{"account_id":5921372,"reputation":55,"user_id":4839662,"display_name":"Emiliyana Kalinova"},"score":0,"creation_date":1598430911,"post_id":63586228,"comment_id":112453597,"body_markdown":"@Rick @Joni: You both say if there is no constructor, the compiler creates one for me - Question: I assume this is referred to as &quot;run time&quot;, correct? Where are the entities created during run time created? (like a hidden file or something)\n\nRegarding creation and initialization: if we take a primitive data type, creation (reserving memory) would be `int number;` and initialization would be `int number = 123;`. If I understand correctly, the equivalent of this for objects is that `new FotoApparat();` or this implicit super() call only reserves memory ?","body":"@Rick @Joni: You both say if there is no constructor, the compiler creates one for me - Question: I assume this is referred to as &quot;run time&quot;, correct? Where are the entities created during run time created? (like a hidden file or something)  Regarding creation and initialization: if we take a primitive data type, creation (reserving memory) would be <code>int number;</code> and initialization would be <code>int number = 123;</code>. If I understand correctly, the equivalent of this for objects is that <code>new FotoApparat();</code> or this implicit super() call only reserves memory ?"},{"owner":{"account_id":5921372,"reputation":55,"user_id":4839662,"display_name":"Emiliyana Kalinova"},"score":0,"creation_date":1598431055,"post_id":63586228,"comment_id":112453671,"body_markdown":"And a constructor that takes parameters is then the initialization of the object, correct? \nWhen is an object initialized if you use the `new FotoApparat()` constructor? When you assign a value to one of the attributes maybe ?","body":"And a constructor that takes parameters is then the initialization of the object, correct?  When is an object initialized if you use the <code>new FotoApparat()</code> constructor? When you assign a value to one of the attributes maybe ?"},{"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":1,"creation_date":1598437561,"post_id":63586228,"comment_id":112456900,"body_markdown":"The default constructor is created at compile time, not run time. It&#39;s as if you had added it in the source code yourself. Regarding primitive values such as 7 or 3.14 or &#39;S&#39;, they simply exist without needing to &quot;create&quot; them. Don&#39;t confuse values with variables: variables are &quot;created&quot; when their container is created. Instance variables are created when class instance is created, local variables are created when the method is called.","body":"The default constructor is created at compile time, not run time. It&#39;s as if you had added it in the source code yourself. Regarding primitive values such as 7 or 3.14 or &#39;S&#39;, they simply exist without needing to &quot;create&quot; them. Don&#39;t confuse values with variables: variables are &quot;created&quot; when their container is created. Instance variables are created when class instance is created, local variables are created when the method is called."},{"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"score":1,"creation_date":1598438161,"post_id":63586228,"comment_id":112457152,"body_markdown":"Running the code in a constructor always initializes an object. It doesn&#39;t matter if it&#39;s the default no-parameter constructor generated by the compiler, or one that you wrote yourself. &quot;Initialize&quot; means &quot;set the fields in the object to initial values so that it can be used by the rest of the program.&quot;","body":"Running the code in a constructor always initializes an object. It doesn&#39;t matter if it&#39;s the default no-parameter constructor generated by the compiler, or one that you wrote yourself. &quot;Initialize&quot; means &quot;set the fields in the object to initial values so that it can be used by the rest of the program.&quot;"}],"tags":[],"owner":{"account_id":123958,"reputation":109295,"user_id":318758,"accept_rate":100,"display_name":"Joni"},"comment_count":4,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1598392995,"creation_date":1598385451,"answer_id":63586228,"question_id":63586031,"body_markdown":"&gt; As my class has no constructor and also no space() call, I assume the program checks the parent Object class for a suitable constructor\r\n\r\nNot quite. If you don&#39;t define a constructor, the compiler creates one for you. This constructor takes no arguments, and the only thing it does is call the super class constructor `super()`.\r\n\r\n&gt; when an instance of a class is created, an instance of the parent class is also created\r\n\r\nNot quite: only one instance is created. There is no separate parent class instance.\r\n\r\nThe statement is not entirely incorrect because thanks to inheritance, the one instance of the child class that is created is also an instance of the parent class. \r\n\r\n&gt; I read that this super() call can be removed from the constructor, but if it is removed and I use a constructor that takes on parameters, then (without super()) how is this parent object created ?!\r\n\r\nIn this scenario the compiler inserts a call to the no-argument super class constructor `super()`. But this does not create a separate &quot;parent object&quot; - only one object is created.\r\n\r\nWhat your studies may not have made clear is the distinction between object **creation** and **initialization**. Calling a constructor does not &quot;create&quot; an object. An object is created by reserving space for it in memory. After the memory has been reserved, the constructor is called to &quot;initialize&quot; the object.","title":"Java constructors and super()","body":"<blockquote>\n<p>As my class has no constructor and also no space() call, I assume the program checks the parent Object class for a suitable constructor</p>\n</blockquote>\n<p>Not quite. If you don't define a constructor, the compiler creates one for you. This constructor takes no arguments, and the only thing it does is call the super class constructor <code>super()</code>.</p>\n<blockquote>\n<p>when an instance of a class is created, an instance of the parent class is also created</p>\n</blockquote>\n<p>Not quite: only one instance is created. There is no separate parent class instance.</p>\n<p>The statement is not entirely incorrect because thanks to inheritance, the one instance of the child class that is created is also an instance of the parent class.</p>\n<blockquote>\n<p>I read that this super() call can be removed from the constructor, but if it is removed and I use a constructor that takes on parameters, then (without super()) how is this parent object created ?!</p>\n</blockquote>\n<p>In this scenario the compiler inserts a call to the no-argument super class constructor <code>super()</code>. But this does not create a separate &quot;parent object&quot; - only one object is created.</p>\n<p>What your studies may not have made clear is the distinction between object <strong>creation</strong> and <strong>initialization</strong>. Calling a constructor does not &quot;create&quot; an object. An object is created by reserving space for it in memory. After the memory has been reserved, the constructor is called to &quot;initialize&quot; the object.</p>\n"}],"owner":{"account_id":5921372,"reputation":55,"user_id":4839662,"display_name":"Emiliyana Kalinova"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":145,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":2,"score":1,"last_activity_date":1669199783,"creation_date":1598384514,"question_id":63586031,"body_markdown":"I have seen a few questions on the topic, but they all assume knowledge of inheritance. The example in my book is before the inheritance chapter, so the parent class is java.long.Object. \r\n\r\n**1. Scenario:** my class FotoApparat has no custom constructor or any constructor at all and I create an instance of FotoApparat with `FotoApparat meinFotoApparat = new FotoApparat()`\r\n\r\n**Question:** As my class has no constructor and also no super() call, I assume the program checks the parent Object class for a suitable constructor, which should be new Object(), right? If yes, is this still considered an &quot;implicit&quot; super() call? \r\n\r\n**2. Scenario:** I create a custom constructor (by using eclipse source) which takes on parameters. In the generated constructor the super() call is added in the very beginning, which I assume is the actual implicit call I keep reading about. I read on [javapoint][1] that when an instance of a class is created, an instance of the parent class is also created, which is referenced by super(). \r\n\r\n**Question:** I read that this super() call can be removed from the constructor, but if it is removed and I use a constructor that takes on parameters, then (without super()) how is this parent object created ?! \r\n\r\n\r\n\r\n  [1]: https://www.javatpoint.com/super-keyword","title":"Java constructors and super()","body":"<p>I have seen a few questions on the topic, but they all assume knowledge of inheritance. The example in my book is before the inheritance chapter, so the parent class is java.long.Object.</p>\n<p><strong>1. Scenario:</strong> my class FotoApparat has no custom constructor or any constructor at all and I create an instance of FotoApparat with <code>FotoApparat meinFotoApparat = new FotoApparat()</code></p>\n<p><strong>Question:</strong> As my class has no constructor and also no super() call, I assume the program checks the parent Object class for a suitable constructor, which should be new Object(), right? If yes, is this still considered an &quot;implicit&quot; super() call?</p>\n<p><strong>2. Scenario:</strong> I create a custom constructor (by using eclipse source) which takes on parameters. In the generated constructor the super() call is added in the very beginning, which I assume is the actual implicit call I keep reading about. I read on <a href=\"https://www.javatpoint.com/super-keyword\" rel=\"nofollow noreferrer\">javapoint</a> that when an instance of a class is created, an instance of the parent class is also created, which is referenced by super().</p>\n<p><strong>Question:</strong> I read that this super() call can be removed from the constructor, but if it is removed and I use a constructor that takes on parameters, then (without super()) how is this parent object created ?!</p>\n"},{"tags":["java","spring","multithreading","hibernate","h2"],"answers":[{"tags":[],"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669199657,"creation_date":1669199657,"answer_id":74545398,"question_id":74544676,"body_markdown":"There is no one single answer to improve the performance as it depends on a lot of factors. Having insights into the following factors will help us to understand why there is a performance bottleneck.\r\n\r\n1. Checking the thread pool settings for the spring boot application\r\n2. Checking the amount of CPU/Threads that are available on the server on which the spring boot app is running.\r\n\r\nAs the `read` operations are taking a lot of time, there are certain parameters that we need to look into to answer this\r\n\r\n1. For hibernate, the number of round trips that we are making to fetch the data from the database.\r\n\r\n2. The amount of data being fetched in each call from the database and amount of time it takes in transforming the data.\r\n\r\n3. The Hibernate connection pool settings as we need to check the total number of open connections to the database. \r\n\r\n4. If the data is in a sharded database, then we need to check the amount of time it takes in fetching the data from multiple shards.\r\n\r\nAs mentioned above, we need to look at multiple areas to check where we have the performance bottleneck. \r\n\r\nPlease also note that spawning a lot of threads will not help always as a lot of time is spent by the `executor service` in context switching and many threads are simply waiting for their turn to get executed. \r\n\r\nI would recommend you to go through the article by `Vlad Mihalcea` https://vladmihalcea.com/hibernate-performance-tuning-tips/ where he explains all these things in detail.","title":"Using multiple threads to read and one thread to write to an in-memory database","body":"<p>There is no one single answer to improve the performance as it depends on a lot of factors. Having insights into the following factors will help us to understand why there is a performance bottleneck.</p>\n<ol>\n<li>Checking the thread pool settings for the spring boot application</li>\n<li>Checking the amount of CPU/Threads that are available on the server on which the spring boot app is running.</li>\n</ol>\n<p>As the <code>read</code> operations are taking a lot of time, there are certain parameters that we need to look into to answer this</p>\n<ol>\n<li><p>For hibernate, the number of round trips that we are making to fetch the data from the database.</p>\n</li>\n<li><p>The amount of data being fetched in each call from the database and amount of time it takes in transforming the data.</p>\n</li>\n<li><p>The Hibernate connection pool settings as we need to check the total number of open connections to the database.</p>\n</li>\n<li><p>If the data is in a sharded database, then we need to check the amount of time it takes in fetching the data from multiple shards.</p>\n</li>\n</ol>\n<p>As mentioned above, we need to look at multiple areas to check where we have the performance bottleneck.</p>\n<p>Please also note that spawning a lot of threads will not help always as a lot of time is spent by the <code>executor service</code> in context switching and many threads are simply waiting for their turn to get executed.</p>\n<p>I would recommend you to go through the article by <code>Vlad Mihalcea</code> <a href=\"https://vladmihalcea.com/hibernate-performance-tuning-tips/\" rel=\"nofollow noreferrer\">https://vladmihalcea.com/hibernate-performance-tuning-tips/</a> where he explains all these things in detail.</p>\n"}],"owner":{"account_id":18433184,"reputation":323,"user_id":16452929,"display_name":"CS1999"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":502,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669199657,"creation_date":1669196580,"question_id":74544676,"body_markdown":"I currently am working on a spring application which uses an in-memory database. The application receives many orders via MQ and it checks if the orders exists in the db or not. If it doesnt exist then after processing the order (business logic) it saves it to the db. Currently I am using a single thread to to handle these orders (read operation to check if already exist in db + business logic). Only when I want to save the order to the db (write operation) I hand off the task to another thread. So while the db is being checked to see if `Order n + 10` exists already, another thread might be saving `Order n` to the db. When I increase the incoming rate for the orders I notice that certain read operations take a very long amount of time. I am wondering what could be the reason for this ? Right now 2 threads are interacting with the db\r\n 1. thread 1 (read operation + business logic)\r\n 2. thread 2 (write operation)\r\n \r\nI have already created indexes. Do I need to make sure both threads create a new session instead of using the current session?\r\nCan write and read happen concurrently ?\r\nI am planning to increase the number of reader threads so i can process the orders faster. Its alright to insert the orders into db with some delay. Also `Order` is a hibernate entity. \r\n\r\nBelow is the code for reading from db\r\n\r\n```\r\n    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)\r\n    public Order findByOrderId(String Id, boolean isDeleted) {\r\n        Session session = Objects.requireNonNull(getSessionFactory()).openSession();\r\n        final List&lt;Order&gt; resultList = session\r\n            .createQuery(&quot;from Order o where o.Id = :Id and isDeleted = :isDeleted&quot;, Order.class)\r\n            .setParameter(&quot;Id&quot;, Id)\r\n            .setParameter(&quot;isDeleted&quot;, isDeleted)\r\n            .list();\r\n        session.close();\r\n\r\n        if (resultList.isEmpty()) {\r\n            return null;\r\n        }\r\n        return (resultList.get(0));\r\n    }\r\n\r\n```\r\nWhat changes can I make to my hibernate/JDBC properties for better performance ?","title":"Using multiple threads to read and one thread to write to an in-memory database","body":"<p>I currently am working on a spring application which uses an in-memory database. The application receives many orders via MQ and it checks if the orders exists in the db or not. If it doesnt exist then after processing the order (business logic) it saves it to the db. Currently I am using a single thread to to handle these orders (read operation to check if already exist in db + business logic). Only when I want to save the order to the db (write operation) I hand off the task to another thread. So while the db is being checked to see if <code>Order n + 10</code> exists already, another thread might be saving <code>Order n</code> to the db. When I increase the incoming rate for the orders I notice that certain read operations take a very long amount of time. I am wondering what could be the reason for this ? Right now 2 threads are interacting with the db</p>\n<ol>\n<li>thread 1 (read operation + business logic)</li>\n<li>thread 2 (write operation)</li>\n</ol>\n<p>I have already created indexes. Do I need to make sure both threads create a new session instead of using the current session?\nCan write and read happen concurrently ?\nI am planning to increase the number of reader threads so i can process the orders faster. Its alright to insert the orders into db with some delay. Also <code>Order</code> is a hibernate entity.</p>\n<p>Below is the code for reading from db</p>\n<pre><code>    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)\n    public Order findByOrderId(String Id, boolean isDeleted) {\n        Session session = Objects.requireNonNull(getSessionFactory()).openSession();\n        final List&lt;Order&gt; resultList = session\n            .createQuery(&quot;from Order o where o.Id = :Id and isDeleted = :isDeleted&quot;, Order.class)\n            .setParameter(&quot;Id&quot;, Id)\n            .setParameter(&quot;isDeleted&quot;, isDeleted)\n            .list();\n        session.close();\n\n        if (resultList.isEmpty()) {\n            return null;\n        }\n        return (resultList.get(0));\n    }\n\n</code></pre>\n<p>What changes can I make to my hibernate/JDBC properties for better performance ?</p>\n"},{"tags":["java","kotlin","gradle","intellij-idea"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669206247,"post_id":74545368,"comment_id":131590979,"body_markdown":"Personally I don&#39;t like symlinks in env vars. I think you should delete that jvm path and *prepend* the *actual* path. I personally like to set `JAVA_HOME` first, then prepend `$JAVA_HOME/bin` Of course, some software ignores JAVA_HOME but anyway...","body":"Personally I don&#39;t like symlinks in env vars. I think you should delete that jvm path and <i>prepend</i> the <i>actual</i> path. I personally like to set <code>JAVA_HOME</code> first, then prepend <code>$JAVA_HOME&#47;bin</code> Of course, some software ignores JAVA_HOME but anyway..."},{"owner":{"account_id":27023221,"reputation":11,"user_id":20580907,"display_name":"NoComment1105"},"score":0,"creation_date":1669220116,"post_id":74545368,"comment_id":131596409,"body_markdown":"I&#39;m back on my home machine now and I actually do this on here, yet it still doesn&#39;t work. IntelliJ does not normally ignore this it&#39;s only a recent thing","body":"I&#39;m back on my home machine now and I actually do this on here, yet it still doesn&#39;t work. IntelliJ does not normally ignore this it&#39;s only a recent thing"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669221379,"post_id":74545368,"comment_id":131596872,"body_markdown":"Try starting IntelliJ from the command line","body":"Try starting IntelliJ from the command line"},{"owner":{"account_id":1419775,"reputation":131,"user_id":1344649,"accept_rate":50,"display_name":"Brent Fisher"},"score":0,"creation_date":1690315163,"post_id":74545368,"comment_id":135335650,"body_markdown":"I&#39;m having a similar issue where I&#39;ve added JAVA_HOME using SDK MAN from ~/.zprofile. From the terminal JAVA_HOME is set as well as a variable &quot;DEBUG_NON_LOGIN_SHELL&quot; that is set in ~/.zprofile, and it prints from my Intellij git precommit hook. But the JAVA_HOME env has been removed! I can only assume that Intellij removes it. Then it defaults to jdk8, but I need jdk11 for googleJavaFormat.","body":"I&#39;m having a similar issue where I&#39;ve added JAVA_HOME using SDK MAN from ~/.zprofile. From the terminal JAVA_HOME is set as well as a variable &quot;DEBUG_NON_LOGIN_SHELL&quot; that is set in ~/.zprofile, and it prints from my Intellij git precommit hook. But the JAVA_HOME env has been removed! I can only assume that Intellij removes it. Then it defaults to jdk8, but I need jdk11 for googleJavaFormat."},{"owner":{"account_id":1419775,"reputation":131,"user_id":1344649,"accept_rate":50,"display_name":"Brent Fisher"},"score":0,"creation_date":1690315623,"post_id":74545368,"comment_id":135335754,"body_markdown":"LOL, it seems I had followed this https://youtrack.jetbrains.com/articles/IDEA-A-19/Shell-Environment-Loading a while back.","body":"LOL, it seems I had followed this <a href=\"https://youtrack.jetbrains.com/articles/IDEA-A-19/Shell-Environment-Loading\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/articles/IDEA-A-19/&hellip;</a> a while back."}],"owner":{"account_id":27023221,"reputation":11,"user_id":20580907,"display_name":"NoComment1105"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":170,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669199499,"creation_date":1669199499,"question_id":74545368,"body_markdown":"I&#39;m trying to use the built in commit window in IntelliJ-IDEA Ultimate. This project is a Kotlin project that uses Gradle as the build tool. I have some pre-commit hooks setup to run a detekt check and a license update. When I press the commit button the error i get is the following:\r\n```\r\n/bin/bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)\r\nsh: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)\r\nERROR: JAVA_HOME is not set and no &#39;java&#39; command could be found in your PATH.\r\nPlease set the JAVA_HOME variable in your environment to match the\r\nlocation of your Java installation.\r\n```\r\nI do have a working JAVA_HOME set and when I run `echo $PATH` my JDK installation can, in fact, be found in the path.\r\n```\r\nnocomment@laptop: ~/Documents/watchdog $ echo $PATH\r\n/home/nocomment/bin:/home/nocomment/.local/bin:/home/nocomment/.cargo/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\r\n```\r\nRight there, `/usr/lib/jvm/default/bin` where i have the package `jdk17-openjdk` installed from the Arch Linux repositories.\r\n\r\nGradle is set up to you the `/usr/lib/jvm/default` path in IntelliJ and the project default is this path as well..\r\n\r\nI&#39;ve looked around on here and elsewhere and tried reinstalling the JDK, running `archlinux-java fix` to no avail. \r\n\r\nIf anyone knows how to fix this that would be awesome.\r\n\r\nThanks :)","title":"IntelliJ commit window is convinced my JAVA_HOME/PATH is not set for Java","body":"<p>I'm trying to use the built in commit window in IntelliJ-IDEA Ultimate. This project is a Kotlin project that uses Gradle as the build tool. I have some pre-commit hooks setup to run a detekt check and a license update. When I press the commit button the error i get is the following:</p>\n<pre><code>/bin/bash: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)\nsh: warning: setlocale: LC_ALL: cannot change locale (en_US.UTF-8)\nERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.\nPlease set the JAVA_HOME variable in your environment to match the\nlocation of your Java installation.\n</code></pre>\n<p>I do have a working JAVA_HOME set and when I run <code>echo $PATH</code> my JDK installation can, in fact, be found in the path.</p>\n<pre><code>nocomment@laptop: ~/Documents/watchdog $ echo $PATH\n/home/nocomment/bin:/home/nocomment/.local/bin:/home/nocomment/.cargo/bin:/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl\n</code></pre>\n<p>Right there, <code>/usr/lib/jvm/default/bin</code> where i have the package <code>jdk17-openjdk</code> installed from the Arch Linux repositories.</p>\n<p>Gradle is set up to you the <code>/usr/lib/jvm/default</code> path in IntelliJ and the project default is this path as well..</p>\n<p>I've looked around on here and elsewhere and tried reinstalling the JDK, running <code>archlinux-java fix</code> to no avail.</p>\n<p>If anyone knows how to fix this that would be awesome.</p>\n<p>Thanks :)</p>\n"},{"tags":["java","ant","build","scp","task"],"comments":[{"owner":{"display_name":"user177800"},"score":0,"creation_date":1267642709,"post_id":2374105,"comment_id":2350227,"body_markdown":"you have jsch on the classpath twice, pick one jsch-0.1.29.jar (153401 bytes)\njsch-0.1.42.jar (185746 bytes)","body":"you have jsch on the classpath twice, pick one jsch-0.1.29.jar (153401 bytes) jsch-0.1.42.jar (185746 bytes)"},{"owner":{"account_id":4899,"reputation":103686,"user_id":7595,"accept_rate":70,"display_name":"Pablo Fernandez"},"score":0,"creation_date":1267642832,"post_id":2374105,"comment_id":2350244,"body_markdown":"yeah, it doesn&#39;t work with either of them.","body":"yeah, it doesn&#39;t work with either of them."}],"answers":[{"comments":[{"owner":{"account_id":41138,"reputation":7777,"user_id":119479,"accept_rate":75,"display_name":"Gabe Martin-Dempesy"},"score":4,"creation_date":1328829913,"post_id":2374804,"comment_id":11609867,"body_markdown":"If you&#39;re using the &#39;ant&#39; bundled with MacOSX Lion 10.7+, it does not ship with ant-jsch.jar.  Downloading a copy of the official ant and copying the ant-jsch.jar into your ~/.ant/lib/ along with the jsch.jar itself fixed this for me.","body":"If you&#39;re using the &#39;ant&#39; bundled with MacOSX Lion 10.7+, it does not ship with ant-jsch.jar.  Downloading a copy of the official ant and copying the ant-jsch.jar into your ~/.ant/lib/ along with the jsch.jar itself fixed this for me."}],"tags":[],"owner":{"account_id":6387,"reputation":20830,"user_id":10715,"accept_rate":77,"display_name":"gareth_bowles"},"comment_count":1,"down_vote_count":0,"up_vote_count":14,"is_accepted":true,"score":14,"last_activity_date":1267649103,"creation_date":1267649103,"answer_id":2374804,"question_id":2374105,"body_markdown":"This looks like your problem, from the top of the diagnostics:\r\n\r\n**optional tasks : not available**\r\n\r\nYour $ANT_HOME/lib directory is missing ant-jsch.jar, which is where your missing class comes from.\r\n\r\nI&#39;m not sure how this happened - I always install Ant from the ZIP file on the [download site][1], which includes all the optional tasks.  If you installed Ant from a Linux package, try checking to see if there is a separate package for the optional tasks.  \r\n\r\nOnce you get the optional tasks installed, I would delete the old version of jsch.jar as @trashgod suggests.\r\n\r\n  [1]: http://ant.apache.org/bindownload.cgi","title":"Ant scp task not working, even with jsch on ant/lib","body":"<p>This looks like your problem, from the top of the diagnostics:</p>\n\n<p><strong>optional tasks : not available</strong></p>\n\n<p>Your $ANT_HOME/lib directory is missing ant-jsch.jar, which is where your missing class comes from.</p>\n\n<p>I'm not sure how this happened - I always install Ant from the ZIP file on the <a href=\"http://ant.apache.org/bindownload.cgi\" rel=\"noreferrer\">download site</a>, which includes all the optional tasks.  If you installed Ant from a Linux package, try checking to see if there is a separate package for the optional tasks.  </p>\n\n<p>Once you get the optional tasks installed, I would delete the old version of jsch.jar as @trashgod suggests.</p>\n"},{"comments":[{"owner":{"account_id":219504,"reputation":1638,"user_id":476444,"accept_rate":79,"display_name":"dgorur"},"score":0,"creation_date":1373998860,"post_id":9455134,"comment_id":25763506,"body_markdown":"And if things still don&#39;t work, as it happened to me, note that there are version incompatibilities. Upgrade ant, ensure ant-jsch present, and upgrade jsch to latest.","body":"And if things still don&#39;t work, as it happened to me, note that there are version incompatibilities. Upgrade ant, ensure ant-jsch present, and upgrade jsch to latest."},{"owner":{"account_id":1965862,"reputation":3669,"user_id":1766166,"accept_rate":71,"display_name":"zygimantus"},"score":0,"creation_date":1488971017,"post_id":9455134,"comment_id":72463706,"body_markdown":"Does not help when using `mvn antrun:run`. Trying to use both ant-jsch-1.9.2 andjsch-0.1.54 but it gives error.","body":"Does not help when using <code>mvn antrun:run</code>. Trying to use both ant-jsch-1.9.2 andjsch-0.1.54 but it gives error."}],"tags":[],"owner":{"account_id":539660,"reputation":15051,"user_id":907576,"accept_rate":62,"display_name":"radistao"},"comment_count":2,"down_vote_count":0,"up_vote_count":15,"is_accepted":false,"score":15,"last_activity_date":1444913082,"creation_date":1330275907,"answer_id":9455134,"question_id":2374105,"body_markdown":"I had the same problem and fixed it!\r\nRemember, you need **BOTH** `ant-jsch.jar` (native from ant or java installation) and updated `jsch` (in my case it was `jsch-0.1.46.jar`) in ant lib dir.\r\n\r\nYou need to load the newest `jsch.jar` from http://www.jcraft.com/jsch/ and add to libs folder (but not replace `ant-jsch.jar`).\r\n\r\nThe mistake a lot of developers do:\r\n\r\n 1. `ant-jsch.jar` out of date (in this case &amp;lt;scp&amp;gt; task is unknown for ant)\r\n 2. Adjust libraries versions, so `ant-jsch.jar` and `jsch` are compatible.\r\n 3. `jsch` not exists or out of date in ant lib dir\r\n 4. Native `ant-jsch.jar` replaced with `jsch` (i did it...) \r\n\r\nIn last 2 cases ant knows *scp* command, but says it is not available.","title":"Ant scp task not working, even with jsch on ant/lib","body":"<p>I had the same problem and fixed it!\nRemember, you need <strong>BOTH</strong> <code>ant-jsch.jar</code> (native from ant or java installation) and updated <code>jsch</code> (in my case it was <code>jsch-0.1.46.jar</code>) in ant lib dir.</p>\n\n<p>You need to load the newest <code>jsch.jar</code> from <a href=\"http://www.jcraft.com/jsch/\" rel=\"nofollow noreferrer\">http://www.jcraft.com/jsch/</a> and add to libs folder (but not replace <code>ant-jsch.jar</code>).</p>\n\n<p>The mistake a lot of developers do:</p>\n\n<ol>\n<li><code>ant-jsch.jar</code> out of date (in this case &lt;scp&gt; task is unknown for ant)</li>\n<li>Adjust libraries versions, so <code>ant-jsch.jar</code> and <code>jsch</code> are compatible.</li>\n<li><code>jsch</code> not exists or out of date in ant lib dir</li>\n<li>Native <code>ant-jsch.jar</code> replaced with <code>jsch</code> (i did it...) </li>\n</ol>\n\n<p>In last 2 cases ant knows <em>scp</em> command, but says it is not available.</p>\n"},{"tags":[],"owner":{"account_id":9228907,"reputation":161,"user_id":6855721,"display_name":"ssbh"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1556902828,"creation_date":1556902828,"answer_id":55974261,"question_id":2374105,"body_markdown":"I added ant-jsch and jsch dependencies in maven pom.xml or including those two jars in build solved the issue.","title":"Ant scp task not working, even with jsch on ant/lib","body":"<p>I added ant-jsch and jsch dependencies in maven pom.xml or including those two jars in build solved the issue.</p>\n"},{"tags":[],"owner":{"account_id":7618818,"reputation":731,"user_id":5777388,"display_name":"Vicky Ajmera"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669199468,"creation_date":1669199468,"answer_id":74545352,"question_id":2374105,"body_markdown":"Execute the following command:\r\n\r\n     sudo yum install ant-jsch.noarch","title":"Ant scp task not working, even with jsch on ant/lib","body":"<p>Execute the following command:</p>\n<pre><code> sudo yum install ant-jsch.noarch\n</code></pre>\n"}],"owner":{"account_id":4899,"reputation":103686,"user_id":7595,"accept_rate":70,"display_name":"Pablo Fernandez"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":25191,"favorite_count":0,"down_vote_count":0,"up_vote_count":18,"accepted_answer_id":2374804,"answer_count":4,"score":18,"last_activity_date":1669199468,"creation_date":1267642621,"question_id":2374105,"body_markdown":"I need to copy a war file via scp. \r\n\r\nI have added the `jsch-0.1.42.jar` to `$ANT_HOME/lib` but I&#39;m still getting this error:\r\n\r\n&gt; Cause: the class\r\n&gt; org.apache.tools.ant.taskdefs.optional.ssh.Scp\r\n&gt; was not found.\r\n&gt;         This looks like one of Ant&#39;s optional components.\r\n\r\nThis is the result of running `ant -diagnostics` just in case:\r\n\r\nhttp://gist.github.com/320859","title":"Ant scp task not working, even with jsch on ant/lib","body":"<p>I need to copy a war file via scp. </p>\n\n<p>I have added the <code>jsch-0.1.42.jar</code> to <code>$ANT_HOME/lib</code> but I'm still getting this error:</p>\n\n<blockquote>\n  <p>Cause: the class\n  org.apache.tools.ant.taskdefs.optional.ssh.Scp\n  was not found.\n          This looks like one of Ant's optional components.</p>\n</blockquote>\n\n<p>This is the result of running <code>ant -diagnostics</code> just in case:</p>\n\n<p><a href=\"http://gist.github.com/320859\" rel=\"noreferrer\">http://gist.github.com/320859</a></p>\n"},{"tags":["java","batch-file"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669196080,"post_id":74543089,"comment_id":131587359,"body_markdown":"Try `pb.inheritIO();` before you call its start method. What you seem to have is a hybrid batch/Powershell script that that relies on stderr to determine which of the two it executes so this should require correct processing of stderr","body":"Try <code>pb.inheritIO();</code> before you call its start method. What you seem to have is a hybrid batch/Powershell script that that relies on stderr to determine which of the two it executes so this should require correct processing of stderr"}],"answers":[{"comments":[{"owner":{"account_id":27021217,"reputation":3,"user_id":20579178,"display_name":"user 2310"},"score":0,"creation_date":1669199248,"post_id":74544096,"comment_id":131588556,"body_markdown":"thanks for your answer the comment by  \ng00se fixed it","body":"thanks for your answer the comment by   g00se fixed it"}],"tags":[],"owner":{"account_id":13343141,"reputation":515,"user_id":9630748,"display_name":"Arnault Le Pr&#233;vost-Corvellec"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669193928,"creation_date":1669193928,"answer_id":74544096,"question_id":74543089,"body_markdown":"I didn&#39;t look at your bat file the most common issue on this kind of think is that process run from java did&#39;nt share the environnement variable of your local setup nor jvm a quick fix to verify that is : \r\n```java \r\npb.environment().putAll(System.getenv());\r\n```\r\n\r\nhoping this will work :) then you just have to found which specific environnment variable is missing :)\r\n","title":"Bat file working from terminal not working from Java","body":"<p>I didn't look at your bat file the most common issue on this kind of think is that process run from java did'nt share the environnement variable of your local setup nor jvm a quick fix to verify that is :</p>\n<pre class=\"lang-java prettyprint-override\"><code>pb.environment().putAll(System.getenv());\n</code></pre>\n<p>hoping this will work :) then you just have to found which specific environnment variable is missing :)</p>\n"},{"comments":[{"owner":{"account_id":27021217,"reputation":3,"user_id":20579178,"display_name":"user 2310"},"score":0,"creation_date":1669206401,"post_id":74545331,"comment_id":131591033,"body_markdown":"it gives the desired results but prints the output in commandprompt even if i don&#39;t read inputstream how to avoid that","body":"it gives the desired results but prints the output in commandprompt even if i don&#39;t read inputstream how to avoid that"}],"tags":[],"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669199373,"creation_date":1669199373,"answer_id":74545331,"question_id":74543089,"body_markdown":"Try `pb.inheritIO();` before you call its start method. What you seem to have is a hybrid batch/Powershell script that that relies on stderr to determine which of the two it executes so this should require correct processing of stderr.","title":"Bat file working from terminal not working from Java","body":"<p>Try <code>pb.inheritIO();</code> before you call its start method. What you seem to have is a hybrid batch/Powershell script that that relies on stderr to determine which of the two it executes so this should require correct processing of stderr.</p>\n"}],"owner":{"account_id":27021217,"reputation":3,"user_id":20579178,"display_name":"user 2310"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":56,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74545331,"answer_count":2,"score":0,"last_activity_date":1669199373,"creation_date":1669188339,"question_id":74543089,"body_markdown":"I found my command line tool gets stuck in between and needs a enter to process and I found that it’s because of &quot;QUICKEDIT&quot; mode in cmd and we want to disable it to avoid that. So I searched for Java options to disable quick edit mode on my app launch but I got only bat file from here [quickedit.bat](https://github.com/npocmaka/batch.scripts/blob/master/hybrids/.net/c/quickEdit.bat).\r\n\r\nAnd this bat file works perfect when I run from my command prompt it disable quick edit mode in the current session itself which is the same I want. So I kept that bat file in my folder via installer and run it first on every launch but it’s not turning off the quick edit mode for current session.\r\n\r\nI have tried using both process builder and runtime.exec.\r\n\r\nBelow is my code\r\n\r\n\tProcessBuilder pb = new ProcessBuilder(&quot;cmd&quot;, &quot;/c&quot;, &quot;quickedit.bat&quot;);\r\n\tFile dir = new File(System.getProperty(&quot;user.home&quot;)+File.separator+&quot;AppData&quot;+File.separator+&quot;Local&quot;+File.separator);\r\n\tpb.directory(dir);\r\n\tProcess p=null;\r\n\ttry {\r\n\t\tp = pb.start();\r\n\t} catch (IOException e2) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te2.printStackTrace();\r\n\t}\r\n\r\n\tBufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));\r\n\tString line;\r\n\ttry {\r\n\t\twhile ((line = in.readLine()) != null) {\r\n\t\t    System.out.println(line);  // ----Here i get the same output i get when i run the bat file\r\n\t\t\t}\r\n\t} catch (IOException e1) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te1.printStackTrace();\r\n\t}\r\n\tBufferedReader inerr = new BufferedReader(new InputStreamReader(p.getErrorStream()));\r\n\t\r\n\ttry {\r\n\t\twhile ((line = inerr.readLine()) != null) {\r\n\t\t    System.out.println(line);\r\n\t\t}\r\n\t} catch (IOException e) {\r\n\t\t// TODO Auto-generated catch block\r\n\t\te.printStackTrace();\r\n\t}\r\n\r\nIt gives me this:\r\n\r\n![output of my java program](https://i.stack.imgur.com/PBu1J.png)\r\n\r\nWhen I run my bat file directly like this:\r\n\r\n![output of bat file](https://i.stack.imgur.com/8FkfV.png)\r\n\r\nBut through Java it didn&#39;t disable quick edit in my current command prompt whereas it disables at once I run the actual bat file. So can anyone say the reason or how to fix it or any other way to disable it for ever from Java?\r\n","title":"Bat file working from terminal not working from Java","body":"<p>I found my command line tool gets stuck in between and needs a enter to process and I found that it’s because of &quot;QUICKEDIT&quot; mode in cmd and we want to disable it to avoid that. So I searched for Java options to disable quick edit mode on my app launch but I got only bat file from here <a href=\"https://github.com/npocmaka/batch.scripts/blob/master/hybrids/.net/c/quickEdit.bat\" rel=\"nofollow noreferrer\">quickedit.bat</a>.</p>\n<p>And this bat file works perfect when I run from my command prompt it disable quick edit mode in the current session itself which is the same I want. So I kept that bat file in my folder via installer and run it first on every launch but it’s not turning off the quick edit mode for current session.</p>\n<p>I have tried using both process builder and runtime.exec.</p>\n<p>Below is my code</p>\n<pre><code>ProcessBuilder pb = new ProcessBuilder(&quot;cmd&quot;, &quot;/c&quot;, &quot;quickedit.bat&quot;);\nFile dir = new File(System.getProperty(&quot;user.home&quot;)+File.separator+&quot;AppData&quot;+File.separator+&quot;Local&quot;+File.separator);\npb.directory(dir);\nProcess p=null;\ntry {\n    p = pb.start();\n} catch (IOException e2) {\n    // TODO Auto-generated catch block\n    e2.printStackTrace();\n}\n\nBufferedReader in = new BufferedReader(new InputStreamReader(p.getInputStream()));\nString line;\ntry {\n    while ((line = in.readLine()) != null) {\n        System.out.println(line);  // ----Here i get the same output i get when i run the bat file\n        }\n} catch (IOException e1) {\n    // TODO Auto-generated catch block\n    e1.printStackTrace();\n}\nBufferedReader inerr = new BufferedReader(new InputStreamReader(p.getErrorStream()));\n\ntry {\n    while ((line = inerr.readLine()) != null) {\n        System.out.println(line);\n    }\n} catch (IOException e) {\n    // TODO Auto-generated catch block\n    e.printStackTrace();\n}\n</code></pre>\n<p>It gives me this:</p>\n<p><img src=\"https://i.stack.imgur.com/PBu1J.png\" alt=\"output of my java program\" /></p>\n<p>When I run my bat file directly like this:</p>\n<p><img src=\"https://i.stack.imgur.com/8FkfV.png\" alt=\"output of bat file\" /></p>\n<p>But through Java it didn't disable quick edit in my current command prompt whereas it disables at once I run the actual bat file. So can anyone say the reason or how to fix it or any other way to disable it for ever from Java?</p>\n"},{"tags":["java","loops","do-while"],"comments":[{"owner":{"account_id":2843847,"reputation":55833,"user_id":2442804,"accept_rate":80,"display_name":"luk2302"},"score":1,"creation_date":1669196561,"post_id":74544643,"comment_id":131587555,"body_markdown":"Ask the teacher.","body":"Ask the teacher."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1669197696,"post_id":74544643,"comment_id":131587978,"body_markdown":"In addition to the valuable suggestion by @luk2302 , use [Rubber duck debugging](https://en.wikipedia.org/wiki/Rubber_duck_debugging) which will take your learning process to another level.","body":"In addition to the valuable suggestion by @luk2302 , use <a href=\"https://en.wikipedia.org/wiki/Rubber_duck_debugging\" rel=\"nofollow noreferrer\">Rubber duck debugging</a> which will take your learning process to another level."}],"answers":[{"tags":[],"owner":{"account_id":23832769,"reputation":84,"user_id":17838848,"display_name":"Zero"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669197635,"creation_date":1669197635,"answer_id":74544929,"question_id":74544643,"body_markdown":"The problem with a do-while-loop is that it will always run the code at least once before checking the while-statement. So if the while-statement is already wrong at the beginning, the code will still run. If you want to use do-while instead of while, you should add something that prevents the code from running if the while-statement is already wrong at the beginning, like for example an if-statement.\r\n\r\n    if(start &lt;= end)\r\n    {\r\n        do\r\n        {\r\n            System.out.print(start);\r\n            start++;\r\n        }\r\n        while(start &lt;= end);\r\n    }","title":"Add something to a do while loop","body":"<p>The problem with a do-while-loop is that it will always run the code at least once before checking the while-statement. So if the while-statement is already wrong at the beginning, the code will still run. If you want to use do-while instead of while, you should add something that prevents the code from running if the while-statement is already wrong at the beginning, like for example an if-statement.</p>\n<pre><code>if(start &lt;= end)\n{\n    do\n    {\n        System.out.print(start);\n        start++;\n    }\n    while(start &lt;= end);\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":14781952,"reputation":120,"user_id":10675247,"display_name":"Philippe Fery"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669198592,"creation_date":1669198592,"answer_id":74545162,"question_id":74544643,"body_markdown":"Using &quot;while&quot; will prevent your code to be executed once even if &quot;start&quot; is greater than &quot;end&quot;:\r\n\r\n    public static void runLoop(int start, int end) {\r\n            while(start &lt;= end){\r\n                System.out.print( start );\r\n                start++;        \r\n                }\r\n            } ;\r\n        }  ","title":"Add something to a do while loop","body":"<p>Using &quot;while&quot; will prevent your code to be executed once even if &quot;start&quot; is greater than &quot;end&quot;:</p>\n<pre><code>public static void runLoop(int start, int end) {\n        while(start &lt;= end){\n            System.out.print( start );\n            start++;        \n            }\n        } ;\n    }  \n</code></pre>\n"},{"tags":[],"owner":{"account_id":18603374,"reputation":1,"user_id":13557648,"display_name":"snakefinn"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669198635,"creation_date":1669198635,"answer_id":74545170,"question_id":74544643,"body_markdown":"From what I understand you want to print out all the numbers between the start number and end number. This currently works when start is smaller than end because it only loops while start is less than or equal to end. If start is greater than end it will only print once.\r\n\r\nBefore you begin changing the start value, check if it is bigger than or smaller than the end value. This will let you know if you should increment (++) or decrement (--) start. Then loop until start equals end.\r\n\r\n","title":"Add something to a do while loop","body":"<p>From what I understand you want to print out all the numbers between the start number and end number. This currently works when start is smaller than end because it only loops while start is less than or equal to end. If start is greater than end it will only print once.</p>\n<p>Before you begin changing the start value, check if it is bigger than or smaller than the end value. This will let you know if you should increment (++) or decrement (--) start. Then loop until start equals end.</p>\n"}],"owner":{"account_id":27022729,"reputation":3,"user_id":20580483,"display_name":"Pontus"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74544929,"answer_count":3,"score":0,"last_activity_date":1669198635,"creation_date":1669196426,"question_id":74544643,"body_markdown":"I am creating a do-while-loop that prints start to end. The program checks different types of numbers to get, and whenever it&#39;s small to big number it checks out but not when it&#39;s big to small. Anyone interested to help a stupid student?  \r\n\r\nThis is what my program looks like, my teacher told me &quot; The fact that a do-always gonna do an iteration should mean that the task isn&#39;t possible to do with only a do-while, try adding something to your loop&quot; but I can&#39;t seem to figure it out.\r\n\r\n\tpublic static void runLoop(int start, int end) {\r\n\t\tdo {\r\n\t\t\tSystem.out.print( start );\r\n\t\t\tstart++;\r\n\t\t\t\r\n\t\t\t}\r\n\t\t} while (start &lt;= end );\r\n\t}  \r\n\r\n","title":"Add something to a do while loop","body":"<p>I am creating a do-while-loop that prints start to end. The program checks different types of numbers to get, and whenever it's small to big number it checks out but not when it's big to small. Anyone interested to help a stupid student?</p>\n<p>This is what my program looks like, my teacher told me &quot; The fact that a do-always gonna do an iteration should mean that the task isn't possible to do with only a do-while, try adding something to your loop&quot; but I can't seem to figure it out.</p>\n<pre><code>public static void runLoop(int start, int end) {\n    do {\n        System.out.print( start );\n        start++;\n        \n        }\n    } while (start &lt;= end );\n}  \n</code></pre>\n"},{"tags":["java","selenium","selenium-webdriver","testng"],"comments":[{"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"score":0,"creation_date":1669108911,"post_id":74528411,"comment_id":131563087,"body_markdown":"Please share a link to that page, not a picture if you want us to help you","body":"Please share a link to that page, not a picture if you want us to help you"},{"owner":{"account_id":18820244,"reputation":21,"user_id":13726411,"display_name":"Swanand Yadav"},"score":0,"creation_date":1669197946,"post_id":74528411,"comment_id":131588064,"body_markdown":"https://www.saucedemo.com/   Please check this link","body":"<a href=\"https://www.saucedemo.com/\" rel=\"nofollow noreferrer\">saucedemo.com</a>   Please check this link"}],"answers":[{"tags":[],"owner":{"account_id":4261091,"reputation":32684,"user_id":3485434,"accept_rate":97,"display_name":"Prophet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669198445,"creation_date":1669198445,"answer_id":74545124,"question_id":74528411,"body_markdown":"All those texts: &quot;standard_user&quot;, &quot;locked_out_user&quot;, &quot;problem_user&quot; and &quot;perfor&quot; are text content of `&quot;//*[@id=&#39;login_credentials&#39;]&quot;` element. So, applying `.getText()` method will return all these strings.  \r\nYou can extract all these values and after that to split it into substrings with regular `split()` method.","title":"How i find xpath or css for below ui element","body":"<p>All those texts: &quot;standard_user&quot;, &quot;locked_out_user&quot;, &quot;problem_user&quot; and &quot;perfor&quot; are text content of <code>&quot;//*[@id='login_credentials']&quot;</code> element. So, applying <code>.getText()</code> method will return all these strings.<br />\nYou can extract all these values and after that to split it into substrings with regular <code>split()</code> method.</p>\n"}],"owner":{"account_id":18820244,"reputation":21,"user_id":13726411,"display_name":"Swanand Yadav"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669198471,"creation_date":1669099233,"question_id":74528411,"body_markdown":"[![enter image description here][1]][1]I am facing one issue. I need to find one single any username but cant&#39;t able to locate element with any locators from those &lt;br&gt; tags. I tried //*[@id=&quot;login_credentials&quot;]/h4 or //[@id=\\&quot;login_credentials\\&quot;]/text()[1]  but not able to extract any user_id from above list.\r\n\r\n```\r\npublic class pr1 \r\n{\t\r\n  @Test\r\n  public void Test1() throws InterruptedException\r\n  {\r\n      WebDriverManager.chromedriver().setup();\r\n      WebDriver driver=new ChromeDriver();\r\n      driver.get(&quot;https://www.saucedemo.com/&quot;);\r\n      String str=driver.findElement(By.xpath(&quot;//*[@id=\\&quot;login_credentials\\&quot;]/text()[1]&quot;)).getText();\r\n      System.out.println(str);\r\n   }\t\r\n}\r\n```\r\n\r\n[![This error is occured during running the test[![I nedd to find this username](https://i.stack.imgur.com/GjPCy.png)](https://i.stack.imgur.com/GjPCy.png)](https://i.stack.imgur.com/GCk5d.png)](https://i.stack.imgur.com/GCk5d.png)\r\n\r\n \r\n\r\n\r\n  [1]: https://i.stack.imgur.com/fNaN5.png","title":"How i find xpath or css for below ui element","body":"<p><a href=\"https://i.stack.imgur.com/fNaN5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fNaN5.png\" alt=\"enter image description here\" /></a>I am facing one issue. I need to find one single any username but cant't able to locate element with any locators from those <br> tags. I tried //*[@id=&quot;login_credentials&quot;]/h4 or //[@id=&quot;login_credentials&quot;]/text()<a href=\"https://i.stack.imgur.com/fNaN5.png\" rel=\"nofollow noreferrer\">1</a>  but not able to extract any user_id from above list.</p>\n<pre><code>public class pr1 \n{   \n  @Test\n  public void Test1() throws InterruptedException\n  {\n      WebDriverManager.chromedriver().setup();\n      WebDriver driver=new ChromeDriver();\n      driver.get(&quot;https://www.saucedemo.com/&quot;);\n      String str=driver.findElement(By.xpath(&quot;//*[@id=\\&quot;login_credentials\\&quot;]/text()[1]&quot;)).getText();\n      System.out.println(str);\n   }    \n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/GCk5d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GCk5d.png\" alt=\"This error is occured during running the testI nedd to find this username\" /></a></p>\n"},{"tags":["java","database","tdengine"],"answers":[{"tags":[],"owner":{"account_id":4326301,"reputation":51,"user_id":3533034,"display_name":"cpvmrd"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669198340,"creation_date":1669198340,"answer_id":74545091,"question_id":74543994,"body_markdown":"According its document, you can grant read or write permissions.\r\n\r\nIf the version you use is below 3.0, you can try:\r\n\r\n    ALTER USER &lt;user_name&gt; PRIVILEGE &lt;write|read&gt;;\r\n\r\nIf the version you use is 3.0, you can try:\r\n\r\n    GRANT privileges ON priv_level TO user_name\r\n \r\n\r\n    privileges : {\r\n        ALL\r\n      | priv_type [, priv_type] ...\r\n    }\r\n     \r\n    priv_type : {\r\n        READ\r\n      | WRITE\r\n    }\r\n     \r\n    priv_level : {\r\n        dbname.*\r\n      | *.*\r\n    }\r\n\r\n","title":"No write permission when inserting data to TDengine","body":"<p>According its document, you can grant read or write permissions.</p>\n<p>If the version you use is below 3.0, you can try:</p>\n<pre><code>ALTER USER &lt;user_name&gt; PRIVILEGE &lt;write|read&gt;;\n</code></pre>\n<p>If the version you use is 3.0, you can try:</p>\n<pre><code>GRANT privileges ON priv_level TO user_name\n\n\nprivileges : {\n    ALL\n  | priv_type [, priv_type] ...\n}\n \npriv_type : {\n    READ\n  | WRITE\n}\n \npriv_level : {\n    dbname.*\n  | *.*\n}\n</code></pre>\n"}],"owner":{"account_id":22349900,"reputation":1,"user_id":16568239,"display_name":"superman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":60,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669198340,"creation_date":1669193464,"question_id":74543994,"body_markdown":"1. I&#39;m using JDBC to read/write data from/to TDengine database. Linux server. \r\nWhen executing insert statement, I got an error report. \r\n\r\nCause: java.sql.SQLException: TDengine ERROR (80000214): No write permission\r\n\r\nI googled the error message, but got no help. How do I fix it?","title":"No write permission when inserting data to TDengine","body":"<ol>\n<li>I'm using JDBC to read/write data from/to TDengine database. Linux server.\nWhen executing insert statement, I got an error report.</li>\n</ol>\n<p>Cause: java.sql.SQLException: TDengine ERROR (80000214): No write permission</p>\n<p>I googled the error message, but got no help. How do I fix it?</p>\n"},{"tags":["java","intellij-idea","ssh"],"comments":[{"owner":{"account_id":17693330,"reputation":3781,"user_id":12844632,"display_name":"Egor Klepikov"},"score":0,"creation_date":1668599164,"post_id":74457694,"comment_id":131443250,"body_markdown":"It could be some misconfiguration in .bash_profile or .bash_rc scripts. Please see if https://askubuntu.com/questions/591937/no-value-for-term-and-no-t-specified or https://stackoverflow.com/questions/25515382/tput-no-value-for-term-and-no-t-specified-in-sublime-text-3 helps","body":"It could be some misconfiguration in .bash_profile or .bash_rc scripts. Please see if <a href=\"https://askubuntu.com/questions/591937/no-value-for-term-and-no-t-specified\" title=\"no value for term and no t specified\">askubuntu.com/questions/591937/&hellip;</a> or <a href=\"https://stackoverflow.com/questions/25515382/tput-no-value-for-term-and-no-t-specified-in-sublime-text-3\" title=\"tput no value for term and no t specified in sublime text 3\">stackoverflow.com/questions/25515382/&hellip;</a> helps"},{"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"score":0,"creation_date":1668599954,"post_id":74457694,"comment_id":131443509,"body_markdown":"Thank you, but sadly it didn&#39;t help. I tried both solutions and the error is still occurring.","body":"Thank you, but sadly it didn&#39;t help. I tried both solutions and the error is still occurring."}],"answers":[{"tags":[],"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669198304,"creation_date":1669198304,"answer_id":74545080,"question_id":74457694,"body_markdown":"The .bash_profile contained tput, which was causing the error. ","title":"IntelliJ tput: No value for $TERM and no -T specified","body":"<p>The .bash_profile contained tput, which was causing the error.</p>\n"}],"owner":{"account_id":26782616,"reputation":313,"user_id":20377250,"display_name":"Alex_X1"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":130,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74545080,"answer_count":1,"score":0,"last_activity_date":1669198304,"creation_date":1668589183,"question_id":74457694,"body_markdown":"I want to run my code via SSH using IntelliJ Ultimate. During the setup, I get the error:\r\n```Introspection completed with error. tput: No value for $TERM and no -T specified```\r\n\r\nAm I missing a package? Or how do I tell IntelliJ to use the default bash?","title":"IntelliJ tput: No value for $TERM and no -T specified","body":"<p>I want to run my code via SSH using IntelliJ Ultimate. During the setup, I get the error:\n<code>Introspection completed with error. tput: No value for $TERM and no -T specified</code></p>\n<p>Am I missing a package? Or how do I tell IntelliJ to use the default bash?</p>\n"},{"tags":["java","json","validation","hibernate-validator","javax-validation"],"answers":[{"tags":[],"owner":{"account_id":6518696,"reputation":10106,"user_id":5043585,"display_name":"Guillaume Smet"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669198170,"creation_date":1669198170,"answer_id":74545045,"question_id":74540882,"body_markdown":"`@Pattern` will ignore a `null` value but for blank values, I think your easiest option is to accept a blank value in your pattern.\r\n\r\nAnother option would be to use a composing constraint where you disable the default messages and add your own (note the `@ReportAsSingleViolation` annotation). You don&#39;t have much flexibility for the message though:\r\n\r\n```java\r\n@NotBlank\r\n@Pattern(regexp = &quot;Single|Married&quot;)\r\n@Target({ ElementType.FIELD })\r\n@Retention(RetentionPolicy.RUNTIME)\r\n@Documented\r\n@Constraint(validatedBy = {})\r\n@ReportAsSingleViolation\r\npublic @interface ValidUsername {\r\n\r\n    String message() default &quot;userCategory is invalid&quot;;\r\n\r\n    Class&lt;?&gt;[] groups() default {};\r\n\r\n    Class&lt;? extends Payload&gt;[] payload() default {};\r\n}\r\n```\r\n\r\nAnd the last option would be to implement your own validator. In this case, you have full flexibility about the validation process and the validation message.\r\n\r\nMarko from the Hibernate team wrote a very complete blog post about it on the Hibernate blog: https://in.relation.to/2017/03/02/adding-custom-constraint-definitions-via-the-java-service-loader/ .\r\n\r\n","title":"Adding @NotBlank and Pattern constraints with different error messages","body":"<p><code>@Pattern</code> will ignore a <code>null</code> value but for blank values, I think your easiest option is to accept a blank value in your pattern.</p>\n<p>Another option would be to use a composing constraint where you disable the default messages and add your own (note the <code>@ReportAsSingleViolation</code> annotation). You don't have much flexibility for the message though:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@NotBlank\n@Pattern(regexp = &quot;Single|Married&quot;)\n@Target({ ElementType.FIELD })\n@Retention(RetentionPolicy.RUNTIME)\n@Documented\n@Constraint(validatedBy = {})\n@ReportAsSingleViolation\npublic @interface ValidUsername {\n\n    String message() default &quot;userCategory is invalid&quot;;\n\n    Class&lt;?&gt;[] groups() default {};\n\n    Class&lt;? extends Payload&gt;[] payload() default {};\n}\n</code></pre>\n<p>And the last option would be to implement your own validator. In this case, you have full flexibility about the validation process and the validation message.</p>\n<p>Marko from the Hibernate team wrote a very complete blog post about it on the Hibernate blog: <a href=\"https://in.relation.to/2017/03/02/adding-custom-constraint-definitions-via-the-java-service-loader/\" rel=\"nofollow noreferrer\">https://in.relation.to/2017/03/02/adding-custom-constraint-definitions-via-the-java-service-loader/</a> .</p>\n"}],"owner":{"account_id":27018990,"reputation":1,"user_id":20577299,"display_name":"Mark Antony"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":413,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669198170,"creation_date":1669167647,"question_id":74540882,"body_markdown":"```\r\n@NotBlank(message = &quot;userCategory is missing&quot;)\r\n@Pattern(regexp = &quot;Single|Married&quot;, message = &quot;userCategory is invalid&quot;)\r\nprivate String userCategory;\r\n```\r\n\r\nCurrently when validation happens, it gives me two error messages when I provide a whitespaces/blank value for userCategory.\r\n\r\n\r\n```\r\n    &quot;errors&quot;: [\r\n        {\r\n            &quot;message&quot;: &quot;userCategory is missing&quot;\r\n        },\r\n\r\n         {\r\n            &quot;message&quot;: &quot;userCategory is invalid&quot;\r\n        }\r\n\r\n    ]\r\n```\r\n\r\nI want to throw a missing value if it&#39;s whitespace/blank and don&#39;t want the invalid error in case of empty value or whitespace. I want to say userCategory is invalid only when there is something typed invalid like abddd instead of Single or Married, something other than whitespaces/empty value with a invalid value. \r\n\r\n\r\nI&#39;m expecting an error message something like the below when userCategory is empty or when whitespace is typed.\r\n\r\n\r\n```\r\n &quot;errors&quot;: [\r\n        {\r\n            &quot;message&quot;: &quot;userCategory is missing&quot;\r\n        }]\r\n\r\n```\r\n\r\n","title":"Adding @NotBlank and Pattern constraints with different error messages","body":"<pre><code>@NotBlank(message = &quot;userCategory is missing&quot;)\n@Pattern(regexp = &quot;Single|Married&quot;, message = &quot;userCategory is invalid&quot;)\nprivate String userCategory;\n</code></pre>\n<p>Currently when validation happens, it gives me two error messages when I provide a whitespaces/blank value for userCategory.</p>\n<pre><code>    &quot;errors&quot;: [\n        {\n            &quot;message&quot;: &quot;userCategory is missing&quot;\n        },\n\n         {\n            &quot;message&quot;: &quot;userCategory is invalid&quot;\n        }\n\n    ]\n</code></pre>\n<p>I want to throw a missing value if it's whitespace/blank and don't want the invalid error in case of empty value or whitespace. I want to say userCategory is invalid only when there is something typed invalid like abddd instead of Single or Married, something other than whitespaces/empty value with a invalid value.</p>\n<p>I'm expecting an error message something like the below when userCategory is empty or when whitespace is typed.</p>\n<pre><code> &quot;errors&quot;: [\n        {\n            &quot;message&quot;: &quot;userCategory is missing&quot;\n        }]\n\n</code></pre>\n"},{"tags":["java","arrays","string","char"],"comments":[{"owner":{"account_id":7712763,"reputation":628,"user_id":5841551,"accept_rate":50,"display_name":"kladderradatsch"},"score":1,"creation_date":1668721170,"post_id":74482251,"comment_id":131481844,"body_markdown":"Tip: You can debug it so you can survey each step in the loop what happens there. By this you can learn a lot. Every IDE like Eclipse or IDEA intelliJ supports debugging.","body":"Tip: You can debug it so you can survey each step in the loop what happens there. By this you can learn a lot. Every IDE like Eclipse or IDEA intelliJ supports debugging."},{"owner":{"account_id":7712763,"reputation":628,"user_id":5841551,"accept_rate":50,"display_name":"kladderradatsch"},"score":0,"creation_date":1668721492,"post_id":74482251,"comment_id":131481948,"body_markdown":"https://www.youtube.com/watch?v=lAWnIP1S6UA","body":"<a href=\"https://www.youtube.com/watch?v=lAWnIP1S6UA\" rel=\"nofollow noreferrer\">youtube.com/watch?v=lAWnIP1S6UA</a>"}],"answers":[{"tags":[],"owner":{"account_id":401843,"reputation":89873,"user_id":768644,"display_name":"rzwitserloot"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668720726,"creation_date":1668720726,"answer_id":74482332,"question_id":74482251,"body_markdown":"When the for loop ends your code just returns `newString`. The only place where your code adds a &#39;4&#39; is when the loop hits _a new character_ and recognizes that this is no longer a `c`. At the very end, before `return newString`, you should check if `count` exceeds 1, and if so, print `count`.\r\n","title":"Compress Given String replacing the re-occurring characters with number of times they are occuring","body":"<p>When the for loop ends your code just returns <code>newString</code>. The only place where your code adds a '4' is when the loop hits <em>a new character</em> and recognizes that this is no longer a <code>c</code>. At the very end, before <code>return newString</code>, you should check if <code>count</code> exceeds 1, and if so, print <code>count</code>.</p>\n"},{"tags":[],"owner":{"account_id":18911549,"reputation":600,"user_id":13797513,"display_name":"chptr-one"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1668724945,"creation_date":1668724945,"answer_id":74482947,"question_id":74482251,"body_markdown":"As indicated in the commentary above, when your loop finishes the string, the result for the last symbol is simply thrown away.\r\n\r\nI offer approximately the same approach as you have with some improvements.\r\n\r\n1. What if `null` was passed to your method? Your code will fall with exception. It seems to me it makes sense to return `null` in this case.\r\n2. What if the argument string is empty, another words, its length is zero? This case must be considered separately.\r\n3. The `String` class in Java are immutable. Therefore, each concatenation of the strings creates a new instance of the `String` object. To build the result in this such case, it is better to use a `StringBuilder`.\r\n4. In your approach, you look forward when running along the string. You compare the current symbol with the following. To do this, you need carefully watch for index not exceeds the length of the string.  I propose to simplify this and not look forward at all.\r\n5. This is not pretty and you probably have a way to do it better. But after the end of the cycle, we need to add a last symbol in the string. This is a repeating piece of code, so I put it into a separate function.\r\n\r\n```\r\nprivate static String getCompressedString(String str) {\r\n    if (Objects.isNull(str)) return null;\r\n    if (str.isEmpty()) return &quot;&quot;;\r\n\r\n    StringBuilder result = new StringBuilder();\r\n    char calculated = str.charAt(0);\r\n    int repeats = 0;\r\n\r\n    for (char observed : str.toCharArray()) {\r\n        if (observed == calculated) {\r\n            repeats++;\r\n        } else {\r\n            append(result, calculated, repeats);\r\n            calculated = observed;\r\n            repeats = 1;\r\n        }\r\n    }\r\n    append(result, calculated, repeats);\r\n\r\n    return result.toString();\r\n}\r\n\r\nprivate static void append(StringBuilder result, char calculated, int repeats) {\r\n    result.append(calculated);\r\n    if (repeats &gt; 1) {\r\n        result.append(repeats);\r\n    }\r\n}\r\n```\r\n\r\nI am completely sure that there is a way to make this code better and shorter. I hope it will serve as a starting point for you.","title":"Compress Given String replacing the re-occurring characters with number of times they are occuring","body":"<p>As indicated in the commentary above, when your loop finishes the string, the result for the last symbol is simply thrown away.</p>\n<p>I offer approximately the same approach as you have with some improvements.</p>\n<ol>\n<li>What if <code>null</code> was passed to your method? Your code will fall with exception. It seems to me it makes sense to return <code>null</code> in this case.</li>\n<li>What if the argument string is empty, another words, its length is zero? This case must be considered separately.</li>\n<li>The <code>String</code> class in Java are immutable. Therefore, each concatenation of the strings creates a new instance of the <code>String</code> object. To build the result in this such case, it is better to use a <code>StringBuilder</code>.</li>\n<li>In your approach, you look forward when running along the string. You compare the current symbol with the following. To do this, you need carefully watch for index not exceeds the length of the string.  I propose to simplify this and not look forward at all.</li>\n<li>This is not pretty and you probably have a way to do it better. But after the end of the cycle, we need to add a last symbol in the string. This is a repeating piece of code, so I put it into a separate function.</li>\n</ol>\n<pre><code>private static String getCompressedString(String str) {\n    if (Objects.isNull(str)) return null;\n    if (str.isEmpty()) return &quot;&quot;;\n\n    StringBuilder result = new StringBuilder();\n    char calculated = str.charAt(0);\n    int repeats = 0;\n\n    for (char observed : str.toCharArray()) {\n        if (observed == calculated) {\n            repeats++;\n        } else {\n            append(result, calculated, repeats);\n            calculated = observed;\n            repeats = 1;\n        }\n    }\n    append(result, calculated, repeats);\n\n    return result.toString();\n}\n\nprivate static void append(StringBuilder result, char calculated, int repeats) {\n    result.append(calculated);\n    if (repeats &gt; 1) {\n        result.append(repeats);\n    }\n}\n</code></pre>\n<p>I am completely sure that there is a way to make this code better and shorter. I hope it will serve as a starting point for you.</p>\n"},{"comments":[{"owner":{"account_id":27002657,"reputation":46,"user_id":20563704,"display_name":"ElishevaMiler"},"score":0,"creation_date":1669131281,"post_id":74535208,"comment_id":131571580,"body_markdown":"//    The problemwith yourcode is that you didn&#39;t add the value of the last letter to the string and that should be done after the end of the loop","body":"//    The problemwith yourcode is that you didn&#39;t add the value of the last letter to the string and that should be done after the end of the loop"}],"tags":[],"owner":{"account_id":27002657,"reputation":46,"user_id":20563704,"display_name":"ElishevaMiler"},"comment_count":1,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669131243,"creation_date":1669131243,"answer_id":74535208,"question_id":74482251,"body_markdown":"   \r\n\r\n     public static String getCompressedString(String str) {\r\n            String newString = &quot;&quot;;\r\n            int count = 1;\r\n            int len = str.length() - 1;\r\n            for (int i = 0; i &lt; len; i++) {\r\n                if (str.charAt(i) == str.charAt(i + 1)) {\r\n                    count++;\r\n                    continue;\r\n                }\r\n                if (count == 1) {\r\n                    newString = newString + str.charAt(i);\r\n                } else {\r\n                    newString = newString + str.charAt(i) + count;\r\n                }\r\n                if (str.charAt(i) != str.charAt(i + 1)) {\r\n                    count = 1;\r\n                    continue;\r\n                }\r\n            }\r\n            if (count == 1) {\r\n                newString = newString + str.charAt(len);\r\n            } else {\r\n                newString = newString + str.charAt(len) + count;\r\n            }\r\n            return newString;\r\n        }\r\n\r\n","title":"Compress Given String replacing the re-occurring characters with number of times they are occuring","body":"<pre><code> public static String getCompressedString(String str) {\n        String newString = &quot;&quot;;\n        int count = 1;\n        int len = str.length() - 1;\n        for (int i = 0; i &lt; len; i++) {\n            if (str.charAt(i) == str.charAt(i + 1)) {\n                count++;\n                continue;\n            }\n            if (count == 1) {\n                newString = newString + str.charAt(i);\n            } else {\n                newString = newString + str.charAt(i) + count;\n            }\n            if (str.charAt(i) != str.charAt(i + 1)) {\n                count = 1;\n                continue;\n            }\n        }\n        if (count == 1) {\n            newString = newString + str.charAt(len);\n        } else {\n            newString = newString + str.charAt(len) + count;\n        }\n        return newString;\n    }\n</code></pre>\n"},{"tags":[],"owner":{"account_id":20697089,"reputation":101,"user_id":15197074,"display_name":"Tejashree Surve"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669198167,"creation_date":1669198167,"answer_id":74545044,"question_id":74482251,"body_markdown":"    public class CompressString {\r\n        public static void main(String[] args) {\r\n            String str = &quot;abbbccccc&quot;;\r\n            String ans = getCompressedString(str);\r\n            System.out.println(&quot;String is ---&gt;&quot; + ans);\r\n        }\r\n    \r\n    \r\n        public static String getCompressedString(String str) {\r\n            if (str.length() == 0) {\r\n                return &quot;&quot;;\r\n            }\r\n            String newString = &quot;&quot;;\r\n            int count = 0;\r\n            int len = str.length() - 1;\r\n            char firstVar = str.charAt(0);\r\n            for (int i = 1; i &lt;= len; i++) {\r\n                if (firstVar != str.charAt(i)) {\r\n                    if (count &gt; 0) {\r\n                        newString = newString + firstVar + count;\r\n                    } else {\r\n                        newString = newString + firstVar;\r\n                    }\r\n                    count = 0;\r\n                    firstVar = str.charAt(i);\r\n                } else {\r\n                    count++;\r\n                }\r\n            }\r\n            if (count &gt; 0) {\r\n                newString = newString + firstVar + count;\r\n            } else {\r\n                newString = newString + firstVar;\r\n            }\r\n            return newString;\r\n        } }\r\n\r\n\r\nPlease check, this may help you.","title":"Compress Given String replacing the re-occurring characters with number of times they are occuring","body":"<pre><code>public class CompressString {\n    public static void main(String[] args) {\n        String str = &quot;abbbccccc&quot;;\n        String ans = getCompressedString(str);\n        System.out.println(&quot;String is ---&gt;&quot; + ans);\n    }\n\n\n    public static String getCompressedString(String str) {\n        if (str.length() == 0) {\n            return &quot;&quot;;\n        }\n        String newString = &quot;&quot;;\n        int count = 0;\n        int len = str.length() - 1;\n        char firstVar = str.charAt(0);\n        for (int i = 1; i &lt;= len; i++) {\n            if (firstVar != str.charAt(i)) {\n                if (count &gt; 0) {\n                    newString = newString + firstVar + count;\n                } else {\n                    newString = newString + firstVar;\n                }\n                count = 0;\n                firstVar = str.charAt(i);\n            } else {\n                count++;\n            }\n        }\n        if (count &gt; 0) {\n            newString = newString + firstVar + count;\n        } else {\n            newString = newString + firstVar;\n        }\n        return newString;\n    } }\n</code></pre>\n<p>Please check, this may help you.</p>\n"}],"owner":{"account_id":26453220,"reputation":21,"user_id":20096129,"display_name":"Xeno Morph"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"answer_count":4,"score":1,"last_activity_date":1669198167,"creation_date":1668720158,"question_id":74482251,"body_markdown":"\r\n```\r\npublic class Test12CompressString {\r\n\tpublic static String getCompressedString(String str) {\r\n\t\tString newString = &quot;&quot;;\r\n\t\tint count = 1;\r\n\t\tint len = str.length()-1;\r\n\t\tfor (int i = 0; i &lt;= len ; i++) {\r\n\t\t\tif(i != len) {\r\n\t\t\t\tSystem.out.println(i);\r\n\t\t\t\tif(str.charAt(i) == str.charAt(i+1)) {\r\n\t\t\t\t\tcount++;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t} \r\n\t\t\t\tif(count == 1) {\r\n\t\t\t\t\tnewString = newString+str.charAt(i);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tnewString = newString+str.charAt(i)+count;\r\n\t\t\t\t}\r\n\t\t\t\tif ( str.charAt(i) != str.charAt(i+1)) {\r\n\t\t\t\t\tcount = 1;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t} \r\n\t\t}\r\n\t\treturn newString;\r\n\t}\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\tString str = &quot;abbbccccc&quot;;\r\n\t\tString ans = getCompressedString(str);\r\n\t\tSystem.out.print(ans);\r\n\t}\r\n\r\n}\r\n\r\n```\r\n\r\n\r\n# Expected Output : ab3c4\r\n# Output I am getting : ab3\r\n\r\nCan someone tell what am I missing and why the last character and it&#39;s count is missing from my output?\r\nCan someone correct my code?","title":"Compress Given String replacing the re-occurring characters with number of times they are occuring","body":"<pre><code>public class Test12CompressString {\n    public static String getCompressedString(String str) {\n        String newString = &quot;&quot;;\n        int count = 1;\n        int len = str.length()-1;\n        for (int i = 0; i &lt;= len ; i++) {\n            if(i != len) {\n                System.out.println(i);\n                if(str.charAt(i) == str.charAt(i+1)) {\n                    count++;\n                    continue;\n                } \n                if(count == 1) {\n                    newString = newString+str.charAt(i);\n                } else {\n                    newString = newString+str.charAt(i)+count;\n                }\n                if ( str.charAt(i) != str.charAt(i+1)) {\n                    count = 1;\n                    continue;\n                }\n            } \n        }\n        return newString;\n    }\n\n    public static void main(String[] args) {\n        String str = &quot;abbbccccc&quot;;\n        String ans = getCompressedString(str);\n        System.out.print(ans);\n    }\n\n}\n\n</code></pre>\n<h1>Expected Output : ab3c4</h1>\n<h1>Output I am getting : ab3</h1>\n<p>Can someone tell what am I missing and why the last character and it's count is missing from my output?\nCan someone correct my code?</p>\n"},{"tags":["java","spring","amazon-s3","content-type","servlet-filters"],"owner":{"account_id":25398964,"reputation":95,"user_id":19208792,"display_name":"Gourav Kumar"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":452,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669197733,"creation_date":1668792891,"question_id":74493414,"body_markdown":"I know there are plenty of examples to read request body multiple times, I have gone through alot but couldn&#39;t find the solution to my problem.\r\n\r\nSo, in my case i have a spring-boot project which uploads file to Amazon s3. I want to read the request body of whatever file i am uploading inside the servlet-filter.\r\n\r\nI tried the below wrappers \r\n 1. https://github.com/isapir/servlet-filter-utils\r\n 2. [ContentCachingRequestWrapper][1]\r\n 3. https://gitlab.com/jamietanna/multiple-read-servlet/-/blob/master/src/main/java/me/jvt/multireadservlet/MultiReadHttpServletRequest.java\r\n\r\na) For the first and second one, i get empty request body in case of multipart/form-data.\r\n\r\nb) For the second one if i call `requestWrapper.getParameterMap()` for caching, i still get empty request body.\r\n\r\nc) For the first one if i call `requestWrapper.getParameterMap()` for caching, i get the request body but request doesn&#39;t execute and results in Bad Request.\r\n\r\nBelow is the exception:\r\n\r\n`Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required request part &#39;file&#39; is not present]`\r\n\r\nd) For the third case also, i get the same above exception in case of multipart/form-data, normally it works fine (in case of other requests).\r\n\r\nEdit: *I have also gone through [BalusC][2] articles [(1)][3] &amp; [(2)][4], but getting same exception.\r\nI found that i have to implement my own `getPart(String part)` &amp; `getPart()` in my custom requestWrapper in order to handle this multipart/form-data request.\r\nI don&#39;t find any reference implementation for `getParts()` &amp; `getPart(String part)`.*\r\n\r\nI&#39;m stuck, please help!!!\r\n\r\n\r\n  [1]: https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/util/ContentCachingRequestWrapper.java\r\n  [2]: https://stackoverflow.com/users/157882/balusc\r\n  [3]: https://balusc.omnifaces.org/2007/11/multipartfilter.html\r\n  [4]: https://balusc.omnifaces.org/2009/12/uploading-files-in-servlet-30.html","title":"Unable to read request body of HttpServletRequest multiple times in case of multipart/form-data","body":"<p>I know there are plenty of examples to read request body multiple times, I have gone through alot but couldn't find the solution to my problem.</p>\n<p>So, in my case i have a spring-boot project which uploads file to Amazon s3. I want to read the request body of whatever file i am uploading inside the servlet-filter.</p>\n<p>I tried the below wrappers</p>\n<ol>\n<li><a href=\"https://github.com/isapir/servlet-filter-utils\" rel=\"nofollow noreferrer\">https://github.com/isapir/servlet-filter-utils</a></li>\n<li><a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/web/util/ContentCachingRequestWrapper.java\" rel=\"nofollow noreferrer\">ContentCachingRequestWrapper</a></li>\n<li><a href=\"https://gitlab.com/jamietanna/multiple-read-servlet/-/blob/master/src/main/java/me/jvt/multireadservlet/MultiReadHttpServletRequest.java\" rel=\"nofollow noreferrer\">https://gitlab.com/jamietanna/multiple-read-servlet/-/blob/master/src/main/java/me/jvt/multireadservlet/MultiReadHttpServletRequest.java</a></li>\n</ol>\n<p>a) For the first and second one, i get empty request body in case of multipart/form-data.</p>\n<p>b) For the second one if i call <code>requestWrapper.getParameterMap()</code> for caching, i still get empty request body.</p>\n<p>c) For the first one if i call <code>requestWrapper.getParameterMap()</code> for caching, i get the request body but request doesn't execute and results in Bad Request.</p>\n<p>Below is the exception:</p>\n<p><code>Resolved [org.springframework.web.multipart.support.MissingServletRequestPartException: Required request part 'file' is not present]</code></p>\n<p>d) For the third case also, i get the same above exception in case of multipart/form-data, normally it works fine (in case of other requests).</p>\n<p>Edit: <em>I have also gone through <a href=\"https://stackoverflow.com/users/157882/balusc\">BalusC</a> articles <a href=\"https://balusc.omnifaces.org/2007/11/multipartfilter.html\" rel=\"nofollow noreferrer\">(1)</a> &amp; <a href=\"https://balusc.omnifaces.org/2009/12/uploading-files-in-servlet-30.html\" rel=\"nofollow noreferrer\">(2)</a>, but getting same exception.\nI found that i have to implement my own <code>getPart(String part)</code> &amp; <code>getPart()</code> in my custom requestWrapper in order to handle this multipart/form-data request.\nI don't find any reference implementation for <code>getParts()</code> &amp; <code>getPart(String part)</code>.</em></p>\n<p>I'm stuck, please help!!!</p>\n"},{"tags":["java","android","arraylist"],"comments":[{"owner":{"account_id":235103,"reputation":156444,"user_id":501696,"accept_rate":91,"display_name":"Blackbelt"},"score":0,"creation_date":1427275707,"post_id":29251817,"comment_id":46707358,"body_markdown":"you missed the new operator on your lists: `newsList = new ArrayList&lt;&gt;();`","body":"you missed the new operator on your lists: <code>newsList = new ArrayList&lt;&gt;();</code>"},{"owner":{"account_id":313181,"reputation":4433,"user_id":627667,"accept_rate":56,"display_name":"smartsanja"},"score":0,"creation_date":1427275866,"post_id":29251817,"comment_id":46707452,"body_markdown":"@Blackbelt Why should I use newsList = new ArrayList&lt;&gt;();? newsList and evenList are NOT empty when it comes to private void combineArrays() method","body":"@Blackbelt Why should I use newsList = new ArrayList&lt;&gt;();? newsList and evenList are NOT empty when it comes to private void combineArrays() method"},{"owner":{"account_id":235103,"reputation":156444,"user_id":501696,"accept_rate":91,"display_name":"Blackbelt"},"score":0,"creation_date":1427275982,"post_id":29251817,"comment_id":46707520,"body_markdown":"I see only the declaration of these objects, never their initialisation. Can you  post the stacktrace","body":"I see only the declaration of these objects, never their initialisation. Can you  post the stacktrace"},{"owner":{"account_id":1663234,"reputation":138406,"user_id":1531124,"accept_rate":96,"display_name":"GhostCat"},"score":1,"creation_date":1427276138,"post_id":29251817,"comment_id":46707621,"body_markdown":"@sajaz It doesnt matter if your existing lists are not empty. What matters is that you want to create a new list to combine the other two lists. This **new** list must be created before you can use it. Therefore you need a **new** somewhere. (Unless you would want to append list B to existing list A)","body":"@sajaz It doesnt matter if your existing lists are not empty. What matters is that you want to create a new list to combine the other two lists. This <b>new</b> list must be created before you can use it. Therefore you need a <b>new</b> somewhere. (Unless you would want to append list B to existing list A)"}],"answers":[{"tags":[],"owner":{"account_id":2444013,"reputation":1801,"user_id":2131807,"display_name":"Viswanath Donthi"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427275901,"creation_date":1427275901,"answer_id":29251887,"question_id":29251817,"body_markdown":"You can use **addAll()** method as:\r\n\r\n    combinedList.addAll(newsList);\r\n    combinedList.addAll(eventList);","title":"Merge two ArrayLists of Custom Object Type","body":"<p>You can use <strong>addAll()</strong> method as:</p>\n\n<pre><code>combinedList.addAll(newsList);\ncombinedList.addAll(eventList);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":5955901,"reputation":10524,"user_id":4682610,"accept_rate":29,"display_name":"Florian Schaetz"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1427275983,"creation_date":1427275983,"answer_id":29251914,"question_id":29251817,"body_markdown":"You can do that simpler...\r\n\r\n    combinedList = new ArrayList&lt;NewsItem&gt;();\r\n    if (newsList != null)\r\n      combinedList.addAll( newsList );\r\n    if (eventList!= null)\r\n      combinedList.addAll( eventList);\r\n\r\nIf you don&#39;t want to have duplicates (implies you have implemented equals() correctly) then you could use a HashSet, for example, but that implies you don&#39;t need a specific order of elements.\r\n\r\n","title":"Merge two ArrayLists of Custom Object Type","body":"<p>You can do that simpler...</p>\n\n<pre><code>combinedList = new ArrayList&lt;NewsItem&gt;();\nif (newsList != null)\n  combinedList.addAll( newsList );\nif (eventList!= null)\n  combinedList.addAll( eventList);\n</code></pre>\n\n<p>If you don't want to have duplicates (implies you have implemented equals() correctly) then you could use a HashSet, for example, but that implies you don't need a specific order of elements.</p>\n"},{"tags":[],"owner":{"account_id":5395279,"reputation":96,"user_id":4296688,"display_name":"marcS"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1427276048,"creation_date":1427276048,"answer_id":29251939,"question_id":29251817,"body_markdown":"If you want a new list : \r\n\r\n     ArrayList&lt;NewsItem&gt; combinedList = new ArrayList();\r\n     combinedList.addAll(newsList);\r\n     combinedList.addAll(eventList);\r\n\r\n\r\ntoo late .. ","title":"Merge two ArrayLists of Custom Object Type","body":"<p>If you want a new list : </p>\n\n<pre><code> ArrayList&lt;NewsItem&gt; combinedList = new ArrayList();\n combinedList.addAll(newsList);\n combinedList.addAll(eventList);\n</code></pre>\n\n<p>too late .. </p>\n"}],"owner":{"account_id":313181,"reputation":4433,"user_id":627667,"accept_rate":56,"display_name":"smartsanja"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":5484,"favorite_count":0,"down_vote_count":0,"up_vote_count":3,"accepted_answer_id":29251914,"answer_count":3,"score":3,"last_activity_date":1669197582,"creation_date":1427275660,"question_id":29251817,"body_markdown":"I want to combine two ArrayList into a single one. These ArrayLists are NOT the type of &quot;String&quot;. Object type is a custom class.\r\n\r\n    private ArrayList&lt;NewsItem&gt; newsList;\r\n\tprivate ArrayList&lt;NewsItem&gt; eventList;\r\n\tprivate ArrayList&lt;NewsItem&gt; combinedList;\r\n\r\nThis is how I am trying to combine those two ArrayLists:\r\n\r\n    private void combineArrays() {\r\n\t\t\t\r\n\t\tif(newsList.size() &gt; 0){\r\n\t\t\tfor (int i = 0; i&lt;newsList.size(); i++){\r\n\t\t\t\t\r\n\t\t\t\tNewsItem aBean = newsList.get(i);\r\n\t\t\t\tcombinedList.add(aBean);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(eventList.size() &gt; 0){\r\n\t\t\tfor (int i = 0; i&lt;eventList.size(); i++){\r\n\t\t\t\tNewsItem aBean = eventList.get(i);\r\n\t\t\t\tcombinedList.add(aBean);;\r\n\t\t\t}\r\n\t\t}\r\n    }\r\n\r\nThe app is crashing. What&#39;s the wrong with this approach?","title":"Merge two ArrayLists of Custom Object Type","body":"<p>I want to combine two ArrayList into a single one. These ArrayLists are NOT the type of \"String\". Object type is a custom class.</p>\n\n<pre><code>private ArrayList&lt;NewsItem&gt; newsList;\nprivate ArrayList&lt;NewsItem&gt; eventList;\nprivate ArrayList&lt;NewsItem&gt; combinedList;\n</code></pre>\n\n<p>This is how I am trying to combine those two ArrayLists:</p>\n\n<pre><code>private void combineArrays() {\n\n    if(newsList.size() &gt; 0){\n        for (int i = 0; i&lt;newsList.size(); i++){\n\n            NewsItem aBean = newsList.get(i);\n            combinedList.add(aBean);\n        }\n    }\n    if(eventList.size() &gt; 0){\n        for (int i = 0; i&lt;eventList.size(); i++){\n            NewsItem aBean = eventList.get(i);\n            combinedList.add(aBean);;\n        }\n    }\n}\n</code></pre>\n\n<p>The app is crashing. What's the wrong with this approach?</p>\n"},{"tags":["java","arrays","nullpointerexception","java-stream"],"comments":[{"owner":{"account_id":129540,"reputation":210839,"user_id":328193,"accept_rate":91,"display_name":"David"},"score":2,"creation_date":1669133822,"post_id":74535766,"comment_id":131572633,"body_markdown":"Does this answer your question? [What is a NullPointerException, and how do I fix it?](https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it)","body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/218384/what-is-a-nullpointerexception-and-how-do-i-fix-it\">What is a NullPointerException, and how do I fix it?</a>"},{"owner":{"account_id":10346755,"reputation":21971,"user_id":7631480,"display_name":"CryptoFool"},"score":3,"creation_date":1669134033,"post_id":74535766,"comment_id":131572726,"body_markdown":"That&#39;s the most complicated code I&#39;ve ever seen to maintain and delete from a simple list of objects.  Why not store the employees in a `List&lt;Employee&gt;` and avoid all of the headaches of rebuilding an array?  I don&#39;t understand the complexity of using streams for this operation either.   You end up iterating over the entire array after building a separate list via a stream.  I don&#39;t get what that buys you.","body":"That&#39;s the most complicated code I&#39;ve ever seen to maintain and delete from a simple list of objects.  Why not store the employees in a <code>List&lt;Employee&gt;</code> and avoid all of the headaches of rebuilding an array?  I don&#39;t understand the complexity of using streams for this operation either.   You end up iterating over the entire array after building a separate list via a stream.  I don&#39;t get what that buys you."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1669134102,"post_id":74535766,"comment_id":131572756,"body_markdown":"Why do you keep employees as array instead of `List`? It&#39;s more appropriate data structure for your use case, and you are already using a list in your `removeEmployee` method.","body":"Why do you keep employees as array instead of <code>List</code>? It&#39;s more appropriate data structure for your use case, and you are already using a list in your <code>removeEmployee</code> method."},{"owner":{"account_id":322981,"reputation":310755,"user_id":642706,"accept_rate":58,"display_name":"Basil Bourque"},"score":1,"creation_date":1669134245,"post_id":74535766,"comment_id":131572819,"body_markdown":"Is returning the deleted `Employee` object absolutely required? Or is it enough to know that an employee was deleted or not?","body":"Is returning the deleted <code>Employee</code> object absolutely required? Or is it enough to know that an employee was deleted or not?"},{"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"score":0,"creation_date":1669134429,"post_id":74535766,"comment_id":131572883,"body_markdown":"It&#39;s a homework task. And according to the condition of the task, an array should be used, not a List&lt;Employee&gt;.","body":"It&#39;s a homework task. And according to the condition of the task, an array should be used, not a List&lt;Employee&gt;."},{"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"score":0,"creation_date":1669134543,"post_id":74535766,"comment_id":131572942,"body_markdown":"Yes, returning the deleted Employee object absolutely required according to the task. Namely Employee, not just boolean.","body":"Yes, returning the deleted Employee object absolutely required according to the task. Namely Employee, not just boolean."},{"owner":{"account_id":6606677,"reputation":1024,"user_id":5103317,"display_name":"Old Dog Programmer"},"score":0,"creation_date":1669134612,"post_id":74535766,"comment_id":131572975,"body_markdown":"So, what *should* happen if there is an attempt to delete an Employee who doesn&#39;t exist?","body":"So, what <i>should</i> happen if there is an attempt to delete an Employee who doesn&#39;t exist?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":2,"creation_date":1669134677,"post_id":74535766,"comment_id":131573002,"body_markdown":"If it&#39;s homework i don&#39;t think you are supposed to use streams either. Your assignment probably requires you to learn how to resize the array, shift its&#39; elements, keep count of current elements and so on. At the very least you should try to implement it this way.","body":"If it&#39;s homework i don&#39;t think you are supposed to use streams either. Your assignment probably requires you to learn how to resize the array, shift its&#39; elements, keep count of current elements and so on. At the very least you should try to implement it this way."},{"owner":{"account_id":7971577,"reputation":3673,"user_id":6016064,"accept_rate":71,"display_name":"Edward Peters"},"score":4,"creation_date":1669134700,"post_id":74535766,"comment_id":131573011,"body_markdown":"Usually if a homework tells you to use `array`s it means *just* `array`s - the idea being that you have to learn to do the nitty gritty yourself. So, you still shouldn&#39;t be mixing in all the more advanced features like streams.","body":"Usually if a homework tells you to use <code>array</code>s it means <i>just</i> <code>array</code>s - the idea being that you have to learn to do the nitty gritty yourself. So, you still shouldn&#39;t be mixing in all the more advanced features like streams."}],"answers":[{"comments":[{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":1,"creation_date":1669134969,"post_id":74536059,"comment_id":131573120,"body_markdown":"Please check [How do I ask and answer homework questions?](https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions). Directly providing a solution to a student is totally not in his best interest.","body":"Please check <a href=\"https://meta.stackoverflow.com/questions/334822/how-do-i-ask-and-answer-homework-questions\">How do I ask and answer homework questions?</a>. Directly providing a solution to a student is totally not in his best interest."},{"owner":{"account_id":26895750,"reputation":296,"user_id":20473701,"display_name":"Lorenz Hetterich"},"score":0,"creation_date":1669135276,"post_id":74536059,"comment_id":131573237,"body_markdown":"you are correct. However, since only the last function qualifies as a valid solution to the task, I intentionally did not provide a complete solution. I think that completing the parameters to the arraycopy function requires understanding how the solution works ;)","body":"you are correct. However, since only the last function qualifies as a valid solution to the task, I intentionally did not provide a complete solution. I think that completing the parameters to the arraycopy function requires understanding how the solution works ;)"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1669136897,"post_id":74536059,"comment_id":131573828,"body_markdown":"Yes, but the stream based solution works and can be used as is. Using it will most probably fail his assignment, but it in the end he would have learned nothing. And we all know that having a ready solution can be quite the temptation for any student :)","body":"Yes, but the stream based solution works and can be used as is. Using it will most probably fail his assignment, but it in the end he would have learned nothing. And we all know that having a ready solution can be quite the temptation for any student :)"},{"owner":{"account_id":26895750,"reputation":296,"user_id":20473701,"display_name":"Lorenz Hetterich"},"score":0,"creation_date":1669137467,"post_id":74536059,"comment_id":131574049,"body_markdown":"Actually, I think even the last solution would fail the assignment. While question states &quot;the length ... must be reduced&quot;, I think the actual requirement is to reduce the size and keep an array with size non-null elements followed by capacity-size null elements. (At least this would make more sense to me)","body":"Actually, I think even the last solution would fail the assignment. While question states &quot;the length ... must be reduced&quot;, I think the actual requirement is to reduce the size and keep an array with size non-null elements followed by capacity-size null elements. (At least this would make more sense to me)"}],"tags":[],"owner":{"account_id":26895750,"reputation":296,"user_id":20473701,"display_name":"Lorenz Hetterich"},"comment_count":4,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669134773,"creation_date":1669134773,"answer_id":74536059,"question_id":74535766,"body_markdown":"There is a lot of ways to get rid of the NullPointerException here.\r\nIf you want to keep using the stream API, you may want to use [filter][1] and [findAny][2].\r\nFor example, you could modify the method to the following:\r\n```Java\r\npublic Employee removeEmployee(int id) {\r\n    Optional&lt;Employee&gt; employee = Arrays.stream(employees)\r\n        .filter(Objects::nonNull)\r\n        .filter(x -&gt; x.getId() == id).\r\n        .findAny();\r\n    if(employee.isEmpty())\r\n        return null;\r\n    employees = Arrays.stream(employees).filter(x -&gt; x != employee.get()).toArray(Employee[]::new);\r\n    return employee.get();\r\n}\r\n```\r\n\r\nHowever, I would highly advise using a List or even a Map instead of an Array for `employees` as this makes things way easier and faster:\r\n\r\n```\r\npublic Employee removeEmployee(int id){\r\n    Optional&lt;Employee&gt; toRemove = employees.stream().filter(x -&gt; x.getId() == id).findAny();\r\n    if(toRemove.isEmpty())\r\n        return null;\r\n    employees.remove(toRemove.get());\r\n    return toRemove.get();\r\n\r\n}\r\n```\r\nOr not to use the Stream API:\r\n```Java\r\npublic Employee removeEmployee(int id){\r\n    int idx;\r\n    for(idx = 0; idx &lt; employees.length; idx++){\r\n        if(employees[idx] != null &amp;&amp; employees[idx].getId() == id)\r\n            break;\r\n    }\r\n    if(idx == employees.length)\r\n        return null;\r\n\r\n    Employee value = employees[idx];\r\n    \r\n    Employee[] newArr = new Employee[employees.length - 1];\r\n\r\n    // the parameters here are left as an exercise to the reader :P\r\n    System.arraycopy(newArr, ...);\r\n    System.arraycopy(newArr, ...);\r\n\r\n    employees = newArr;\r\n\r\n    return value;\r\n\r\n}\r\n```\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findAny--","title":"How to get rid of NullPointerException when removing elements from array?","body":"<p>There is a lot of ways to get rid of the NullPointerException here.\nIf you want to keep using the stream API, you may want to use <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#filter-java.util.function.Predicate-\" rel=\"nofollow noreferrer\">filter</a> and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#findAny--\" rel=\"nofollow noreferrer\">findAny</a>.\nFor example, you could modify the method to the following:</p>\n<pre><code>public Employee removeEmployee(int id) {\n    Optional&lt;Employee&gt; employee = Arrays.stream(employees)\n        .filter(Objects::nonNull)\n        .filter(x -&gt; x.getId() == id).\n        .findAny();\n    if(employee.isEmpty())\n        return null;\n    employees = Arrays.stream(employees).filter(x -&gt; x != employee.get()).toArray(Employee[]::new);\n    return employee.get();\n}\n</code></pre>\n<p>However, I would highly advise using a List or even a Map instead of an Array for <code>employees</code> as this makes things way easier and faster:</p>\n<pre><code>public Employee removeEmployee(int id){\n    Optional&lt;Employee&gt; toRemove = employees.stream().filter(x -&gt; x.getId() == id).findAny();\n    if(toRemove.isEmpty())\n        return null;\n    employees.remove(toRemove.get());\n    return toRemove.get();\n\n}\n</code></pre>\n<p>Or not to use the Stream API:</p>\n<pre><code>public Employee removeEmployee(int id){\n    int idx;\n    for(idx = 0; idx &lt; employees.length; idx++){\n        if(employees[idx] != null &amp;&amp; employees[idx].getId() == id)\n            break;\n    }\n    if(idx == employees.length)\n        return null;\n\n    Employee value = employees[idx];\n    \n    Employee[] newArr = new Employee[employees.length - 1];\n\n    // the parameters here are left as an exercise to the reader :P\n    System.arraycopy(newArr, ...);\n    System.arraycopy(newArr, ...);\n\n    employees = newArr;\n\n    return value;\n\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23959668,"reputation":26587,"user_id":17949945,"display_name":"Alexander Ivanchenko"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669141631,"creation_date":1669136354,"answer_id":74536406,"question_id":74535766,"body_markdown":"&gt; The **length** of the array `Employee[]` employees declared in the class `Company` must be **reduced** after the element has been **successfully removed**.\r\n\r\nStreams doesn&#39;t buy you a lot in this case.\r\n\r\nWhat you&#39;re supposed to do is to find the element with the target `id`, and if such an element exists, allocate a new array in memory with a length smaller by `1` copy all the elements apart from the one that was found, and assign `employees` with the reference to the new array.\r\n\r\nTo reduce the length, we can make use of the `System.arraycopy()`. First copy the elements before the target, and then after the target.\r\n\r\nThat&#39;s how it would look like with a plain index-based `for`-loop.\r\n\r\n    public Employee removeEmployee(int id) {\r\n        Employee result = null;\r\n        int index = -1;\r\n        \r\n        for (int i = 0; i &lt; employees.length; i++) {\r\n            if (employees[i] != null &amp;&amp; employees[i].getId() == id) {\r\n                result = employees[i];\r\n                employees[i] = null;\r\n                break;\r\n            }\r\n        }\r\n        if (result != null) {\r\n            reduceLength(index);\r\n        }\r\n        return result;\r\n    }\r\n    \r\n    public void reduceLength(int i) {\r\n        Employee[] newEmployees = new Employee[employees.length - 1];\r\n        System.arraycopy(employees, 0, newEmployees, 0, i);\r\n        System.arraycopy(employees, i + 1, newEmployees, i, employees.length - (i + 1));\r\n        employees = newEmployees;\r\n    }\r\n\r\nIf you want to do weird stuff and use Stream API and Optional at all costs, here how it can be done (*but I would recommend to stick with the code above*):\r\n\r\n    public Optional&lt;Employee&gt; removeEmployee(int id) {\r\n        Optional&lt;Integer&gt; index = IntStream.range(0, employees.length)\r\n            .filter(i -&gt; employees[i] != null)\r\n            .filter(i -&gt; employees[i].getId() == id)\r\n            .boxed()      // otherwise will get OptionalInt which lacks map() method\r\n            .findFirst();\r\n        \r\n        Optional&lt;Employee&gt; result = index.map(i -&gt; employees[i]);\r\n        index.ifPresent(this::reduceLength);\r\n        \r\n        return result;\r\n    }","title":"How to get rid of NullPointerException when removing elements from array?","body":"<blockquote>\n<p>The <strong>length</strong> of the array <code>Employee[]</code> employees declared in the class <code>Company</code> must be <strong>reduced</strong> after the element has been <strong>successfully removed</strong>.</p>\n</blockquote>\n<p>Streams doesn't buy you a lot in this case.</p>\n<p>What you're supposed to do is to find the element with the target <code>id</code>, and if such an element exists, allocate a new array in memory with a length smaller by <code>1</code> copy all the elements apart from the one that was found, and assign <code>employees</code> with the reference to the new array.</p>\n<p>To reduce the length, we can make use of the <code>System.arraycopy()</code>. First copy the elements before the target, and then after the target.</p>\n<p>That's how it would look like with a plain index-based <code>for</code>-loop.</p>\n<pre><code>public Employee removeEmployee(int id) {\n    Employee result = null;\n    int index = -1;\n    \n    for (int i = 0; i &lt; employees.length; i++) {\n        if (employees[i] != null &amp;&amp; employees[i].getId() == id) {\n            result = employees[i];\n            employees[i] = null;\n            break;\n        }\n    }\n    if (result != null) {\n        reduceLength(index);\n    }\n    return result;\n}\n\npublic void reduceLength(int i) {\n    Employee[] newEmployees = new Employee[employees.length - 1];\n    System.arraycopy(employees, 0, newEmployees, 0, i);\n    System.arraycopy(employees, i + 1, newEmployees, i, employees.length - (i + 1));\n    employees = newEmployees;\n}\n</code></pre>\n<p>If you want to do weird stuff and use Stream API and Optional at all costs, here how it can be done (<em>but I would recommend to stick with the code above</em>):</p>\n<pre><code>public Optional&lt;Employee&gt; removeEmployee(int id) {\n    Optional&lt;Integer&gt; index = IntStream.range(0, employees.length)\n        .filter(i -&gt; employees[i] != null)\n        .filter(i -&gt; employees[i].getId() == id)\n        .boxed()      // otherwise will get OptionalInt which lacks map() method\n        .findFirst();\n    \n    Optional&lt;Employee&gt; result = index.map(i -&gt; employees[i]);\n    index.ifPresent(this::reduceLength);\n    \n    return result;\n}\n</code></pre>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669197571,"creation_date":1669197571,"answer_id":74544905,"question_id":74535766,"body_markdown":"Considering it&#39;s homework and constraints mentioned, i believe you are supposed to do all the work using the array **only**.\r\n\r\nI&#39;ll provide some guideline and leave the actual implementation to you:\r\n```\r\npublic class Company {\r\n\r\n  private Employee[] employees;\r\n  private int size;\r\n\r\n  public Employee removeEmployee(int id) {\r\n    int index = -1;\r\n    //find the index of employee with required id, you have mostly done that\r\n    if (index == -1) {\r\n      return null;\r\n    }\r\n    //save found employee to variable\r\n    //remove from array\r\n    //shift array to the left\r\n\r\n    //do not forget to use and reassign size variable where appropriate\r\n  }\r\n\r\n  //some extra\r\n  public void addEmployee(Employee employee) {\r\n    //resize array if necessary\r\n    //add employee at correct position in array\r\n\r\n    //do not forget to use and reassign size variable where appropriate\r\n  }\r\n}\r\n```\r\nIf you get stuck, you can look at the `ArrayList` class, your task is basically a simplified version of it. I strongly advise you to use this as source of inspiration only and not to copy the source code!!!","title":"How to get rid of NullPointerException when removing elements from array?","body":"<p>Considering it's homework and constraints mentioned, i believe you are supposed to do all the work using the array <strong>only</strong>.</p>\n<p>I'll provide some guideline and leave the actual implementation to you:</p>\n<pre><code>public class Company {\n\n  private Employee[] employees;\n  private int size;\n\n  public Employee removeEmployee(int id) {\n    int index = -1;\n    //find the index of employee with required id, you have mostly done that\n    if (index == -1) {\n      return null;\n    }\n    //save found employee to variable\n    //remove from array\n    //shift array to the left\n\n    //do not forget to use and reassign size variable where appropriate\n  }\n\n  //some extra\n  public void addEmployee(Employee employee) {\n    //resize array if necessary\n    //add employee at correct position in array\n\n    //do not forget to use and reassign size variable where appropriate\n  }\n}\n</code></pre>\n<p>If you get stuck, you can look at the <code>ArrayList</code> class, your task is basically a simplified version of it. I strongly advise you to use this as source of inspiration only and not to copy the source code!!!</p>\n"}],"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":137,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1673506075,"accepted_answer_id":74536059,"answer_count":3,"score":0,"last_activity_date":1669197571,"creation_date":1669133573,"question_id":74535766,"body_markdown":"Given the following task. We have an `Employee` and a `Company` classes. Each instance of `Employee` class is stored in array `Employee[] employees` in the `Company` class. I need a method which removes an instance of `Employee` in the array `Employee[] employees` by `id`.\r\n\r\nI managed to write the following code:\r\n\r\n    public class Employee {\r\n        protected final int id;\r\n        protected String name;\r\n    \r\n        public Employee(int id, String name) {\r\n            this.id = id;\r\n            this.name= name;\r\n        }\r\n        public int getId() {\r\n            return id;\r\n        }\r\n    }\r\n    \r\n    public class Company {\r\n        private Employee[] employees;\r\n        private int size;\r\n        private static final int defaultCapacity = 5;\r\n        \r\n        public Company() {\r\n            this(defaultCapacity);\r\n        }\r\n        \r\n        public Company(int capacity) {\r\n            if (capacity &lt;= 0)\r\n                 throw new RuntimeException(&quot;capacity is required&quot;);\r\n            employees = new Employee[capacity];\r\n        }\r\n    \r\n    \tpublic Employee removeEmployee(int id) {\r\n    \t\tCollection&lt;Employee&gt; employeeList = Arrays.asList(employees)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t  .stream()\r\n    \t\t\t\t\t\t\t\t\t\t\t\t  .filter(Objects::nonNull)\r\n    \t\t\t\t\t\t\t\t\t\t\t\t  .collect(Collectors.toList());\r\n    \t\t\r\n    \t\tEmployee[] employeeArray = employeeList.toArray(Employee[]::new);\r\n    \t\tfor (int i = 0; i &lt; size; i++) {\r\n    \t\t\tif(employeeArray[i].getId() == id) {\r\n    \t\t\t\tEmployee removedEmployee = employees[i];\r\n    \t\t\t\temployeeList.remove(employeeArray[i]);\r\n    \t\t\t\temployees = employeeList\r\n    \t\t\t\t\t\t    .stream()\r\n    \t\t\t\t\t\t    .filter(Objects::nonNull)\r\n    \t\t\t\t\t\t    .toArray(Employee[]::new);\r\n    \t\t\t\treturn removedEmployee;\r\n    \t\t\t}\r\n    \t\t}\r\n    \t\treturn null;\r\n    \t}\r\n    \r\n    }\r\n\r\nThe problem is that my method `public Employee removeEmployee(int id)` throws `NullPointerException` if an element for removal is not found.\r\n\r\n**Question:**\r\n\r\n1. How can I rewrite the method `public Employee removeEmployee(int id)` using, for instance, Streams API and Optional in oder to get rid of NullPointerException in the method `public Employee removeEmployee(int id)`?\r\n\r\n**N.B.:** The length of the array `Employee[] employees` declared in the class `Company` must be reduced after the element has been successfully removed.\r\n\r\n\r\n","title":"How to get rid of NullPointerException when removing elements from array?","body":"<p>Given the following task. We have an <code>Employee</code> and a <code>Company</code> classes. Each instance of <code>Employee</code> class is stored in array <code>Employee[] employees</code> in the <code>Company</code> class. I need a method which removes an instance of <code>Employee</code> in the array <code>Employee[] employees</code> by <code>id</code>.</p>\n<p>I managed to write the following code:</p>\n<pre><code>public class Employee {\n    protected final int id;\n    protected String name;\n\n    public Employee(int id, String name) {\n        this.id = id;\n        this.name= name;\n    }\n    public int getId() {\n        return id;\n    }\n}\n\npublic class Company {\n    private Employee[] employees;\n    private int size;\n    private static final int defaultCapacity = 5;\n    \n    public Company() {\n        this(defaultCapacity);\n    }\n    \n    public Company(int capacity) {\n        if (capacity &lt;= 0)\n             throw new RuntimeException(&quot;capacity is required&quot;);\n        employees = new Employee[capacity];\n    }\n\n    public Employee removeEmployee(int id) {\n        Collection&lt;Employee&gt; employeeList = Arrays.asList(employees)\n                                                  .stream()\n                                                  .filter(Objects::nonNull)\n                                                  .collect(Collectors.toList());\n        \n        Employee[] employeeArray = employeeList.toArray(Employee[]::new);\n        for (int i = 0; i &lt; size; i++) {\n            if(employeeArray[i].getId() == id) {\n                Employee removedEmployee = employees[i];\n                employeeList.remove(employeeArray[i]);\n                employees = employeeList\n                            .stream()\n                            .filter(Objects::nonNull)\n                            .toArray(Employee[]::new);\n                return removedEmployee;\n            }\n        }\n        return null;\n    }\n\n}\n</code></pre>\n<p>The problem is that my method <code>public Employee removeEmployee(int id)</code> throws <code>NullPointerException</code> if an element for removal is not found.</p>\n<p><strong>Question:</strong></p>\n<ol>\n<li>How can I rewrite the method <code>public Employee removeEmployee(int id)</code> using, for instance, Streams API and Optional in oder to get rid of NullPointerException in the method <code>public Employee removeEmployee(int id)</code>?</li>\n</ol>\n<p><strong>N.B.:</strong> The length of the array <code>Employee[] employees</code> declared in the class <code>Company</code> must be reduced after the element has been successfully removed.</p>\n"},{"tags":["java","exception","grails","groovy","classcastexception"],"answers":[{"comments":[{"owner":{"account_id":4980081,"reputation":27,"user_id":4005336,"display_name":"Naeem Ghumman"},"score":0,"creation_date":1669224015,"post_id":74544834,"comment_id":131597959,"body_markdown":"Thank you Florian, you explained it very well.","body":"Thank you Florian, you explained it very well."}],"tags":[],"owner":{"account_id":9925027,"reputation":1286,"user_id":7346947,"display_name":"Florian Cramer"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669197263,"creation_date":1669197263,"answer_id":74544834,"question_id":74544720,"body_markdown":"As the name suggests [`ClassLoader#loadClass`][1] returns an instance of `java.lang.Class`. You have to instantiate the class to get an object of its referenced type using `new Profile(...)` or by calling [`Class#newInstance`][2] on the result of `loadClass` (provided your Profile class has an accessible default constructor)\r\n\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#loadClass-java.lang.String-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#newInstance--","title":"Cannot cast object &#39;class centaur.demo.Profile&#39; with class &#39;java.lang.Class&#39; to class &#39;centaur.demo.Profile&#39;","body":"<p>As the name suggests <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#loadClass-java.lang.String-\" rel=\"nofollow noreferrer\"><code>ClassLoader#loadClass</code></a> returns an instance of <code>java.lang.Class</code>. You have to instantiate the class to get an object of its referenced type using <code>new Profile(...)</code> or by calling <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/Class.html#newInstance--\" rel=\"nofollow noreferrer\"><code>Class#newInstance</code></a> on the result of <code>loadClass</code> (provided your Profile class has an accessible default constructor)</p>\n"},{"comments":[{"owner":{"account_id":4980081,"reputation":27,"user_id":4005336,"display_name":"Naeem Ghumman"},"score":0,"creation_date":1670133034,"post_id":74544898,"comment_id":131800261,"body_markdown":"Hi @daggett, what if I don&#39;t want to create new instance but load existing record from DB?","body":"Hi @daggett, what if I don&#39;t want to create new instance but load existing record from DB?"},{"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"score":0,"creation_date":1670138473,"post_id":74544898,"comment_id":131800790,"body_markdown":"Can&#39;t understand how the question related to loading record from DB ..","body":"Can&#39;t understand how the question related to loading record from DB .."},{"owner":{"account_id":4980081,"reputation":27,"user_id":4005336,"display_name":"Naeem Ghumman"},"score":0,"creation_date":1670227497,"post_id":74544898,"comment_id":131818372,"body_markdown":"Actually, I am facing an issue similar to this where data is being fetched from the database. Can you please give me your email/skype etc to share the details? If you can fix that I&#39;ll pay you for that. Paid task. Thank you!","body":"Actually, I am facing an issue similar to this where data is being fetched from the database. Can you please give me your email/skype etc to share the details? If you can fix that I&#39;ll pay you for that. Paid task. Thank you!"}],"tags":[],"owner":{"account_id":1333316,"reputation":26958,"user_id":1276664,"accept_rate":17,"display_name":"daggett"},"comment_count":3,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669197553,"creation_date":1669197553,"answer_id":74544898,"question_id":74544720,"body_markdown":"this line:\r\n```\r\ngetClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;)\r\n```\r\n\r\nshould return you a `Class` object. \r\n\r\ncheck out the documentation: https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#loadClass-java.lang.String-\r\n\r\n\r\nso, you could assign result to Class:\r\n```\r\nClass c = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;)\r\n```\r\n\r\nyou could instantiate class:\r\n```\r\ndef profile = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;).newInstance()\r\n```\r\n\r\nbut the following code could fail:\r\n```\r\ncentaur.demo.Profile profile = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;).newInstance()\r\n```\r\n\r\nwhen class loader used for declaration is different from the one returned by `getClass().classLoader`","title":"Cannot cast object &#39;class centaur.demo.Profile&#39; with class &#39;java.lang.Class&#39; to class &#39;centaur.demo.Profile&#39;","body":"<p>this line:</p>\n<pre><code>getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;)\n</code></pre>\n<p>should return you a <code>Class</code> object.</p>\n<p>check out the documentation: <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#loadClass-java.lang.String-\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/api/java/lang/ClassLoader.html#loadClass-java.lang.String-</a></p>\n<p>so, you could assign result to Class:</p>\n<pre><code>Class c = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;)\n</code></pre>\n<p>you could instantiate class:</p>\n<pre><code>def profile = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;).newInstance()\n</code></pre>\n<p>but the following code could fail:</p>\n<pre><code>centaur.demo.Profile profile = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;).newInstance()\n</code></pre>\n<p>when class loader used for declaration is different from the one returned by <code>getClass().classLoader</code></p>\n"}],"owner":{"account_id":4980081,"reputation":27,"user_id":4005336,"display_name":"Naeem Ghumman"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":148,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74544898,"answer_count":2,"score":0,"last_activity_date":1669197553,"creation_date":1669196793,"question_id":74544720,"body_markdown":"Please help me to fix this issue. Thank you!\r\n\r\nI am working on a **Grails-5.2.4** project with **Java 1.8**. Class Loader is not working as expected.\r\n\r\n**I am getting class cast exception for the following piece of code.**\r\n\r\n```\r\ndef index() {\r\n    Profile profile = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;) as Profile\r\n}\r\n```\r\n\r\n\r\n**Below is the exception details:**\r\n\r\n```\r\nCaused by: org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object &#39;class centaur.demo.Profile&#39; with class &#39;java.lang.Class&#39; to class &#39;centaur.demo.Profile&#39;\r\n\tat org.grails.web.converters.ConverterUtil.invokeOriginalAsTypeMethod(ConverterUtil.java:147)\r\n\tat org.grails.web.converters.ConvertersExtension.asType(ConvertersExtension.groovy:56)\r\n\tat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\r\n\tat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat centaur.demo.IndexController.index(IndexController.groovy:10)\r\n\t... 13 common frames omitted\r\n```\r\n\r\n[![enter image description here](https://i.stack.imgur.com/epdsa.png)](https://i.stack.imgur.com/epdsa.png)\r\n\r\nExpected behavior:\r\n\r\nThe line below should return an object of class Profile.\r\n```\r\ngetClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;)\r\n```\r\n\r\nThis is working fine with Grails 3.3.9.","title":"Cannot cast object &#39;class centaur.demo.Profile&#39; with class &#39;java.lang.Class&#39; to class &#39;centaur.demo.Profile&#39;","body":"<p>Please help me to fix this issue. Thank you!</p>\n<p>I am working on a <strong>Grails-5.2.4</strong> project with <strong>Java 1.8</strong>. Class Loader is not working as expected.</p>\n<p><strong>I am getting class cast exception for the following piece of code.</strong></p>\n<pre><code>def index() {\n    Profile profile = getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;) as Profile\n}\n</code></pre>\n<p><strong>Below is the exception details:</strong></p>\n<pre><code>Caused by: org.codehaus.groovy.runtime.typehandling.GroovyCastException: Cannot cast object 'class centaur.demo.Profile' with class 'java.lang.Class' to class 'centaur.demo.Profile'\n    at org.grails.web.converters.ConverterUtil.invokeOriginalAsTypeMethod(ConverterUtil.java:147)\n    at org.grails.web.converters.ConvertersExtension.asType(ConvertersExtension.groovy:56)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at centaur.demo.IndexController.index(IndexController.groovy:10)\n    ... 13 common frames omitted\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/epdsa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/epdsa.png\" alt=\"enter image description here\" /></a></p>\n<p>Expected behavior:</p>\n<p>The line below should return an object of class Profile.</p>\n<pre><code>getClass().classLoader.loadClass(&quot;centaur.demo.Profile&quot;)\n</code></pre>\n<p>This is working fine with Grails 3.3.9.</p>\n"},{"tags":["xml","xml-parsing","java","xxe"],"comments":[{"owner":{"account_id":5313916,"reputation":1329,"user_id":4239364,"display_name":"Ioannis Barakos"},"score":0,"creation_date":1571047050,"post_id":58374278,"comment_id":103097849,"body_markdown":"How do you build the project? Ant?","body":"How do you build the project? Ant?"},{"owner":{"account_id":13532622,"reputation":541,"user_id":9762633,"display_name":"Abhishek Singh"},"score":0,"creation_date":1571047307,"post_id":58374278,"comment_id":103097973,"body_markdown":"@IoannisBarakos Sorry i didn&#39;t mentioned it. Project has default build (java builder) neither ANT nor MAVEN.","body":"@IoannisBarakos Sorry i didn&#39;t mentioned it. Project has default build (java builder) neither ANT nor MAVEN."},{"owner":{"account_id":5313916,"reputation":1329,"user_id":4239364,"display_name":"Ioannis Barakos"},"score":0,"creation_date":1571047579,"post_id":58374278,"comment_id":103098089,"body_markdown":"What is the default build? Is there a script that sets a CLASSPATH with the required jars (libs) and then calls javac? I believe the issue is a conflict between your xerces jar and something else.","body":"What is the default build? Is there a script that sets a CLASSPATH with the required jars (libs) and then calls javac? I believe the issue is a conflict between your xerces jar and something else."},{"owner":{"account_id":13532622,"reputation":541,"user_id":9762633,"display_name":"Abhishek Singh"},"score":0,"creation_date":1571047763,"post_id":58374278,"comment_id":103098186,"body_markdown":"As i mentioned its default Java Builder no scripts. I just added all the jars externally. I rechecked the jars there is no such xerces jar file in my built path. So i am unable to understand what is causing this exception.","body":"As i mentioned its default Java Builder no scripts. I just added all the jars externally. I rechecked the jars there is no such xerces jar file in my built path. So i am unable to understand what is causing this exception."}],"answers":[{"comments":[{"owner":{"account_id":4364735,"reputation":1449,"user_id":3560873,"display_name":"searchengine27"},"score":3,"creation_date":1661955704,"post_id":58522022,"comment_id":129895200,"body_markdown":"Modifying the AS modules is not the answer. -1. It just means your deployments are using the wrong dependencies. You wouldn&#39;t remove all the milk in the entire world because you&#39;re lactose intolerant, would you?","body":"Modifying the AS modules is not the answer. -1. It just means your deployments are using the wrong dependencies. You wouldn&#39;t remove all the milk in the entire world because you&#39;re lactose intolerant, would you?"},{"owner":{"account_id":14938,"reputation":1011,"user_id":31090,"accept_rate":83,"display_name":"Ed Gomoliako"},"score":0,"creation_date":1666790782,"post_id":58522022,"comment_id":131019097,"body_markdown":"I tend to agree with the author of the comment above. I elaborated on my opinion in  [another answer](https://stackoverflow.com/a/74208524/31090) to this question.","body":"I tend to agree with the author of the comment above. I elaborated on my opinion in  <a href=\"https://stackoverflow.com/a/74208524/31090\">another answer</a> to this question."}],"tags":[],"owner":{"account_id":13532622,"reputation":541,"user_id":9762633,"display_name":"Abhishek Singh"},"comment_count":2,"down_vote_count":3,"up_vote_count":23,"is_accepted":true,"score":20,"last_activity_date":1571830708,"creation_date":1571830708,"answer_id":58522022,"question_id":58374278,"body_markdown":"Finally i resolved it. I am posting the answer in case this helps anyone.\r\nAfter going through online solutions i was unable to detect the main issue which was causing the above error.\r\nFor xxe prevention we need some defined properties like:\r\n**XMLConstants.ACCESS_EXTERNAL_DTD**\r\n**XMLConstants.ACCESS_EXTERNAL_SCHEMA**\r\n\r\nWe need **xerces** and **jaxp-api** jars to pasrse xml and prevent xxe provided by the api&#39;s to resolve the xml by setting some above properties. Prior to **JDK 7** these are already included in JDK 7 and above. So we don&#39;t need to import above jars in our project classpath.\r\n\r\nIn my case i was using jboss-as-7.1.1.Final as application server which also has it&#39;s own xerces jar **(org.apache.xerces.*)**. But java also comes with it&#39;s own xerces and jaxp implementation **(com.sun.xerces.*)**. So while deploying the war we get the above error as both these jars conflicts with each other where jboss loads it&#39;s own xerces jars. \r\n\r\n**Solution:**\r\nWe need to **exclude** the jboss xerces implementation by making changes in **jboss/org/apache/xerces/main/modules.xml** file. Comment out the lines as shown below:\r\n\r\n    &gt; &lt;module xmlns=&quot;urn:jboss:module:1.1&quot; name=&quot;org.apache.xerces&quot;&gt; \t\r\n    &gt; &lt;!--\r\n    &gt;     &lt;resources&gt;\r\n    &gt;         &lt;resource-root path=&quot;xercesImpl-2.9.1-jbossas-1.jar&quot;/&gt;\r\n    &gt;         Insert resources here\r\n    &gt;     &lt;/resources&gt;\r\n    &gt; --&gt;\r\n    &gt;     &lt;dependencies&gt;\r\n    &gt;         &lt;module name=&quot;javax.api&quot;/&gt;\r\n    &gt;     &lt;/dependencies&gt;\r\n    &gt; \r\n    &gt; &lt;/module&gt;\r\n\r\nNow deploy and run your application.\r\nHappy coding.","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>Finally i resolved it. I am posting the answer in case this helps anyone.\nAfter going through online solutions i was unable to detect the main issue which was causing the above error.\nFor xxe prevention we need some defined properties like:\n<strong>XMLConstants.ACCESS_EXTERNAL_DTD</strong>\n<strong>XMLConstants.ACCESS_EXTERNAL_SCHEMA</strong></p>\n\n<p>We need <strong>xerces</strong> and <strong>jaxp-api</strong> jars to pasrse xml and prevent xxe provided by the api's to resolve the xml by setting some above properties. Prior to <strong>JDK 7</strong> these are already included in JDK 7 and above. So we don't need to import above jars in our project classpath.</p>\n\n<p>In my case i was using jboss-as-7.1.1.Final as application server which also has it's own xerces jar <strong>(org.apache.xerces.<em>)</strong>. But java also comes with it's own xerces and jaxp implementation <strong>(com.sun.xerces.</em>)</strong>. So while deploying the war we get the above error as both these jars conflicts with each other where jboss loads it's own xerces jars. </p>\n\n<p><strong>Solution:</strong>\nWe need to <strong>exclude</strong> the jboss xerces implementation by making changes in <strong>jboss/org/apache/xerces/main/modules.xml</strong> file. Comment out the lines as shown below:</p>\n\n<pre><code>&gt; &lt;module xmlns=\"urn:jboss:module:1.1\" name=\"org.apache.xerces\"&gt;    \n&gt; &lt;!--\n&gt;     &lt;resources&gt;\n&gt;         &lt;resource-root path=\"xercesImpl-2.9.1-jbossas-1.jar\"/&gt;\n&gt;         Insert resources here\n&gt;     &lt;/resources&gt;\n&gt; --&gt;\n&gt;     &lt;dependencies&gt;\n&gt;         &lt;module name=\"javax.api\"/&gt;\n&gt;     &lt;/dependencies&gt;\n&gt; \n&gt; &lt;/module&gt;\n</code></pre>\n\n<p>Now deploy and run your application.\nHappy coding.</p>\n"},{"comments":[{"owner":{"account_id":9187,"reputation":9248,"user_id":16873,"accept_rate":100,"display_name":"Thiago Chaves"},"score":5,"creation_date":1602685921,"post_id":62404699,"comment_id":113799596,"body_markdown":"This worked, but I had to pass the system&#39;s class loader as an argument also:\n`DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(&quot;com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl&quot;, ClassLoader.getSystemClassLoader());`","body":"This worked, but I had to pass the system&#39;s class loader as an argument also: <code>DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance(&quot;com.sun.org.apache.xerce&zwnj;&#8203;s.internal.jaxp.Docu&zwnj;&#8203;mentBuilderFactoryIm&zwnj;&#8203;pl&quot;, ClassLoader.getSystemClassLoader());</code>"},{"owner":{"account_id":1223747,"reputation":1055,"user_id":1189810,"display_name":"JSamir"},"score":0,"creation_date":1618522659,"post_id":62404699,"comment_id":118634201,"body_markdown":"@ThiagoChaves Do you happen to know why it has to be the system class loader? I&#39;ve got the same issue and need to pass a class loader to the method, but although system class loader seems to work, I am not sure why it does and `class.getClassLoader()` does not.","body":"@ThiagoChaves Do you happen to know why it has to be the system class loader? I&#39;ve got the same issue and need to pass a class loader to the method, but although system class loader seems to work, I am not sure why it does and <code>class.getClassLoader()</code> does not."},{"owner":{"account_id":4364735,"reputation":1449,"user_id":3560873,"display_name":"searchengine27"},"score":0,"creation_date":1661955867,"post_id":62404699,"comment_id":129895255,"body_markdown":"@JSamir you need to do reading on how JBoss classloader architecture works. That is a long explanation that no one here is going to do for you because there is lots of online documentation from JBoss itself that explains that answer.","body":"@JSamir you need to do reading on how JBoss classloader architecture works. That is a long explanation that no one here is going to do for you because there is lots of online documentation from JBoss itself that explains that answer."}],"tags":[],"owner":{"account_id":2665942,"reputation":131,"user_id":11529744,"display_name":"Michael"},"comment_count":3,"down_vote_count":0,"up_vote_count":12,"is_accepted":false,"score":12,"last_activity_date":1592297802,"creation_date":1592297802,"answer_id":62404699,"question_id":58374278,"body_markdown":"It seems that the attributes *accessExternalDTD* and *accessExternalSchema* were introduced in JAXP 1.5. However, Java EE 6 (and even still Java EE 8) only comes with JAXP 1.4.\r\n\r\nIn my case (running on WildFly 19 and AdoptOpenJDK 11) I was able to obtain the JDK&#39;s default instances of *DocumentBuilderFactory* and *SchemaFactory* by using their static *newDefaultInstance()* method which was introduced in Java 9. In Java 8 both classes also have a *newInstance* method where you can specify the class name, i.e. *com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl* and *com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory*.\r\n\r\nThis solution avoids changing the JBoss modules.\r\n ","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>It seems that the attributes <em>accessExternalDTD</em> and <em>accessExternalSchema</em> were introduced in JAXP 1.5. However, Java EE 6 (and even still Java EE 8) only comes with JAXP 1.4.</p>\n\n<p>In my case (running on WildFly 19 and AdoptOpenJDK 11) I was able to obtain the JDK's default instances of <em>DocumentBuilderFactory</em> and <em>SchemaFactory</em> by using their static <em>newDefaultInstance()</em> method which was introduced in Java 9. In Java 8 both classes also have a <em>newInstance</em> method where you can specify the class name, i.e. <em>com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl</em> and <em>com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory</em>.</p>\n\n<p>This solution avoids changing the JBoss modules.</p>\n"},{"tags":[],"owner":{"account_id":21156159,"reputation":11,"user_id":15555384,"display_name":"Leonid Balikhin"},"comment_count":0,"down_vote_count":1,"up_vote_count":1,"is_accepted":false,"score":0,"last_activity_date":1628004404,"creation_date":1617606105,"answer_id":66949361,"question_id":58374278,"body_markdown":"good answer - https://stackoverflow.com/a/62404699 \r\nIt&#39;s just example of a code (work with java 11 and jboss 7.3):\r\n\r\n    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\r\n     dbf.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\r\n     DocumentBuilder builder = dbf.newDocumentBuilder();\r\n    \r\n     ByteArrayInputStream input = new ByteArrayInputStream(xmlDocument.getBytes(encoding));\r\n     org.w3c.dom.Document doc = builder.parse(input);\r\n     DOMBuilder domBuilder = new DOMBuilder();\r\n    \r\n     Document docJdom = domBuilder.build(doc);","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>good answer - <a href=\"https://stackoverflow.com/a/62404699\">https://stackoverflow.com/a/62404699</a>\nIt's just example of a code (work with java 11 and jboss 7.3):</p>\n<pre><code>DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();\n dbf.setFeature(&quot;http://xml.org/sax/features/external-general-entities&quot;, false);\n DocumentBuilder builder = dbf.newDocumentBuilder();\n\n ByteArrayInputStream input = new ByteArrayInputStream(xmlDocument.getBytes(encoding));\n org.w3c.dom.Document doc = builder.parse(input);\n DOMBuilder domBuilder = new DOMBuilder();\n\n Document docJdom = domBuilder.build(doc);\n</code></pre>\n"},{"tags":[],"owner":{"account_id":6957909,"reputation":21,"user_id":5338386,"display_name":"Matheus Pinheiro"},"comment_count":0,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1630415973,"creation_date":1630415973,"answer_id":68999461,"question_id":58374278,"body_markdown":"In my case, I had a similar issue, but related to the `SAXParser`, when setting the props: `XMLConstants.ACCESS_EXTERNAL_DTD` and `XMLConstants.ACCESS_EXTERNAL_SCHEMA`.\r\n\r\nThe solution following Michael&#39;s suggestion was to specify the classname to be used by the `SAXParserFactory` (I am using JDK 8)\r\n\r\n```\r\nfinal SAXParserFactory factory = SAXParserFactory.newInstance(&quot;com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl&quot;, ClassLoader.getSystemClassLoader());\r\n```","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>In my case, I had a similar issue, but related to the <code>SAXParser</code>, when setting the props: <code>XMLConstants.ACCESS_EXTERNAL_DTD</code> and <code>XMLConstants.ACCESS_EXTERNAL_SCHEMA</code>.</p>\n<p>The solution following Michael's suggestion was to specify the classname to be used by the <code>SAXParserFactory</code> (I am using JDK 8)</p>\n<pre><code>final SAXParserFactory factory = SAXParserFactory.newInstance(&quot;com.sun.org.apache.xerces.internal.jaxp.SAXParserFactoryImpl&quot;, ClassLoader.getSystemClassLoader());\n</code></pre>\n"},{"tags":[],"owner":{"account_id":10511360,"reputation":312,"user_id":7746963,"display_name":"snukone"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1636019496,"creation_date":1636019496,"answer_id":69837281,"question_id":58374278,"body_markdown":"Thanks for Hint regarding xerces. \r\n\r\nMy Error-Message when running Java tests during a Maven Build (mvn verify) look like this:\r\n\r\n    Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\n\r\n\r\n\r\nI solved it this way:\r\n\r\n    mvn dependency:tree\r\n\r\nFinding the Dependency which is inheriting xerces:\r\n\r\n```\r\n[INFO] +- au.com.dius.pact:consumer:jar:4.2.9:test\r\n[INFO] |  +- au.com.dius.pact.core:model:jar:4.2.9:test\r\n[INFO] |  |  +- org.apache.commons:commons-collections4:jar:4.1:test\r\n[INFO] |  |  +- com.github.mifmif:generex:jar:1.0.2:test\r\n[INFO] |  |  +- javax.mail:mail:jar:1.5.0-b01:test\r\n[INFO] |  |  +- org.apache.tika:tika-core:jar:1.27:test\r\n[INFO] |  |  \\- io.ktor:ktor-http-jvm:jar:1.3.1:test\r\n[INFO] |  |     +- org.jetbrains.kotlinx:atomicfu:jar:0.14.1:test\r\n[INFO] |  |     +- org.jetbrains.kotlinx:kotlinx-coroutines-core:jar:1.3.3:test\r\n[INFO] |  |     +- org.jetbrains.kotlinx:kotlinx-coroutines-core-common:jar:1.3.3:test\r\n[INFO] |  |     \\- io.ktor:ktor-utils-jvm:jar:1.3.1:test\r\n[INFO] |  |        \\- io.ktor:ktor-io-jvm:jar:1.3.1:test\r\n[INFO] |  +- au.com.dius.pact.core:matchers:jar:4.2.9:test\r\n[INFO] |  |  +- xerces:xercesImpl:jar:2.12.0:test\r\n```\r\n\r\nAnd excluded xerces in the corresponding Dependency in the Maven Pom.xml:\r\n\r\n```\r\n       &lt;dependency&gt;\r\n            &lt;groupId&gt;au.com.dius.pact&lt;/groupId&gt;\r\n            &lt;artifactId&gt;consumer&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n            &lt;exclusions&gt;\r\n                &lt;exclusion&gt;\r\n                    &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\r\n                    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\r\n                &lt;/exclusion&gt;                \r\n                &lt;exclusion&gt;\r\n                    &lt;groupId&gt;xerces&lt;/groupId&gt;\r\n                    &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n                &lt;/exclusion&gt;\r\n            &lt;/exclusions&gt;\r\n        &lt;/dependency&gt;\r\n```","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>Thanks for Hint regarding xerces.</p>\n<p>My Error-Message when running Java tests during a Maven Build (mvn verify) look like this:</p>\n<pre><code>Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\n</code></pre>\n<p>I solved it this way:</p>\n<pre><code>mvn dependency:tree\n</code></pre>\n<p>Finding the Dependency which is inheriting xerces:</p>\n<pre><code>[INFO] +- au.com.dius.pact:consumer:jar:4.2.9:test\n[INFO] |  +- au.com.dius.pact.core:model:jar:4.2.9:test\n[INFO] |  |  +- org.apache.commons:commons-collections4:jar:4.1:test\n[INFO] |  |  +- com.github.mifmif:generex:jar:1.0.2:test\n[INFO] |  |  +- javax.mail:mail:jar:1.5.0-b01:test\n[INFO] |  |  +- org.apache.tika:tika-core:jar:1.27:test\n[INFO] |  |  \\- io.ktor:ktor-http-jvm:jar:1.3.1:test\n[INFO] |  |     +- org.jetbrains.kotlinx:atomicfu:jar:0.14.1:test\n[INFO] |  |     +- org.jetbrains.kotlinx:kotlinx-coroutines-core:jar:1.3.3:test\n[INFO] |  |     +- org.jetbrains.kotlinx:kotlinx-coroutines-core-common:jar:1.3.3:test\n[INFO] |  |     \\- io.ktor:ktor-utils-jvm:jar:1.3.1:test\n[INFO] |  |        \\- io.ktor:ktor-io-jvm:jar:1.3.1:test\n[INFO] |  +- au.com.dius.pact.core:matchers:jar:4.2.9:test\n[INFO] |  |  +- xerces:xercesImpl:jar:2.12.0:test\n</code></pre>\n<p>And excluded xerces in the corresponding Dependency in the Maven Pom.xml:</p>\n<pre><code>       &lt;dependency&gt;\n            &lt;groupId&gt;au.com.dius.pact&lt;/groupId&gt;\n            &lt;artifactId&gt;consumer&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n                    &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n                &lt;/exclusion&gt;                \n                &lt;exclusion&gt;\n                    &lt;groupId&gt;xerces&lt;/groupId&gt;\n                    &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n</code></pre>\n"},{"comments":[{"owner":{"account_id":14938,"reputation":1011,"user_id":31090,"accept_rate":83,"display_name":"Ed Gomoliako"},"score":1,"creation_date":1666788564,"post_id":71855477,"comment_id":131018229,"body_markdown":"This is a good answer describing the underline mechanisms of how the relevant module works. It helps to figure out the appropriate solution for a specific case. Thank you!","body":"This is a good answer describing the underline mechanisms of how the relevant module works. It helps to figure out the appropriate solution for a specific case. Thank you!"}],"tags":[],"owner":{"account_id":4263235,"reputation":434,"user_id":3487046,"accept_rate":56,"display_name":"Appernicus"},"comment_count":1,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1649843658,"creation_date":1649843658,"answer_id":71855477,"question_id":58374278,"body_markdown":"javax.xml loads the implementation of certain Factory interfaces by going through a couple of options. First option is to configure a default implementation through a system property. For example:\r\n\r\n    javax.xml.validation.SchemaFactory:http://www.w3.org/2001/XMLSchema = com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory\r\n    javax.xml.parsers.DocumentBuilderFactory = com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\r\n\r\nThe second option is to use the jaxb.properties file which you have to include in your jre or jdk how you can do do that is described here: https://docs.oracle.com/javase/tutorial/jaxp/properties/usingProps.html\r\n\r\nThe third option is to add a file in META-INF/services of which the name should be the Factory interface that you want to define the implementation for and the file should contain the full package name + class name of the implementation. For example, you can add a file called javax.xml.parsers.DocumentBuilderFactory containing com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\r\n\r\nThe fourth option is to select the default implementation. In the case of Wildfly/Jboss they have included an org.apache.xerces implementation which only support JAXP 1.4. This means that it will select this implementation and that&#39;s why you get the error.\r\n\r\nTo find out which implementation is used for your specific function you can add a system property\r\n\r\n    jaxp.debug = 1\r\n\r\nThis property will enable debug mode for jaxp and you will see the following output:\r\n\r\n    JAXP: using thread context class loader (ModuleClassLoader for Module &quot;deployment.css-private-build-1.0-SNAPSHOT.ear.css-private.war&quot; from Service Module Loader) for search\r\n    JAXP: Looking up system property &#39;javax.xml.validation.SchemaFactory:http://www.w3.org/2001/XMLSchema&#39;\r\n    JAXP: The value is &#39;com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory&#39;\r\n    JAXP: createInstance(com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory)\r\n    JAXP: loaded com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory from (no code source)\r\n    JAXP: factory &#39;com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory&#39; was found for http://www.w3.org/2001/XMLSchema\r\n\r\nSo before your error you will see the JAXP debug logging and then you should know which factory you have to provide an implementation for to get it to work.","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>javax.xml loads the implementation of certain Factory interfaces by going through a couple of options. First option is to configure a default implementation through a system property. For example:</p>\n<pre><code>javax.xml.validation.SchemaFactory:http://www.w3.org/2001/XMLSchema = com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory\njavax.xml.parsers.DocumentBuilderFactory = com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl\n</code></pre>\n<p>The second option is to use the jaxb.properties file which you have to include in your jre or jdk how you can do do that is described here: <a href=\"https://docs.oracle.com/javase/tutorial/jaxp/properties/usingProps.html\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/tutorial/jaxp/properties/usingProps.html</a></p>\n<p>The third option is to add a file in META-INF/services of which the name should be the Factory interface that you want to define the implementation for and the file should contain the full package name + class name of the implementation. For example, you can add a file called javax.xml.parsers.DocumentBuilderFactory containing com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderFactoryImpl</p>\n<p>The fourth option is to select the default implementation. In the case of Wildfly/Jboss they have included an org.apache.xerces implementation which only support JAXP 1.4. This means that it will select this implementation and that's why you get the error.</p>\n<p>To find out which implementation is used for your specific function you can add a system property</p>\n<pre><code>jaxp.debug = 1\n</code></pre>\n<p>This property will enable debug mode for jaxp and you will see the following output:</p>\n<pre><code>JAXP: using thread context class loader (ModuleClassLoader for Module &quot;deployment.css-private-build-1.0-SNAPSHOT.ear.css-private.war&quot; from Service Module Loader) for search\nJAXP: Looking up system property 'javax.xml.validation.SchemaFactory:http://www.w3.org/2001/XMLSchema'\nJAXP: The value is 'com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory'\nJAXP: createInstance(com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory)\nJAXP: loaded com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory from (no code source)\nJAXP: factory 'com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory' was found for http://www.w3.org/2001/XMLSchema\n</code></pre>\n<p>So before your error you will see the JAXP debug logging and then you should know which factory you have to provide an implementation for to get it to work.</p>\n"},{"comments":[{"owner":{"account_id":1286799,"reputation":714,"user_id":1239706,"accept_rate":56,"display_name":"Parker Kemp"},"score":0,"creation_date":1689260798,"post_id":74208524,"comment_id":135191302,"body_markdown":"Sorry, if I&#39;m reading correctly, this answer provides two different approaches that explicitly _don&#39;t_ support the `accessExternalDTD` property that OP wants to enable? This isn&#39;t a valid answer imo.","body":"Sorry, if I&#39;m reading correctly, this answer provides two different approaches that explicitly <i>don&#39;t</i> support the <code>accessExternalDTD</code> property that OP wants to enable? This isn&#39;t a valid answer imo."},{"owner":{"account_id":14938,"reputation":1011,"user_id":31090,"accept_rate":83,"display_name":"Ed Gomoliako"},"score":0,"creation_date":1690367272,"post_id":74208524,"comment_id":135342581,"body_markdown":"@ParkerKemp the alternative approach doesn&#39;t, but the primary one does. Probably it is worth to re-read.","body":"@ParkerKemp the alternative approach doesn&#39;t, but the primary one does. Probably it is worth to re-read."}],"tags":[],"owner":{"account_id":14938,"reputation":1011,"user_id":31090,"accept_rate":83,"display_name":"Ed Gomoliako"},"comment_count":2,"down_vote_count":1,"up_vote_count":0,"is_accepted":false,"score":-1,"last_activity_date":1666790384,"creation_date":1666790384,"answer_id":74208524,"question_id":58374278,"body_markdown":"I tend to agree with the opinion of the author (@searchengine27) of the first comment on the accepted answer. Patching container configuration doesn&#39;t look like a robust and maintainable solution.\r\n\r\nFor instance, with the JBoss Wildfly installation, I got only one place where the mentioned module was defined, but with the JBoss EAP 7.4 patched to work under Java 17 there were two places, thus having the container updated just ruined the working program.\r\n\r\nIt&#39;s also worth mentioning that JBoss is provided with the particular implementation of `javax.api` on purpose (tested security, etc.) and one should think twice before deciding to turn it off.\r\n\r\nI encountered the same problem with a third-party library instantiating `Schemafactory` and setting the `accessExternalDTD` property to it.\r\n\r\nEverything worked well when the application was running in a Docker container under OpenJDK17 and got into trouble running inside the JBoss container.\r\n\r\nThe solution I propose is to provide with your program an implementation of `SchemaFactory` that leverages either `org.apache.xerces` implementation, or the default one from the JDK (OpenJDK17 in my case).\r\n\r\nI&#39;ve chosen the latter because I found it newer and supports the next version of the JAXP standard.\r\n\r\nHere is the code of the `Jdk17DefaultSchemaFactoryWrapper` class:\r\n```java\r\npackage my.package.utils.jaxp;\r\n\r\nimport lombok.experimental.Delegate;\r\n\r\nimport javax.xml.validation.SchemaFactory;\r\n\r\npublic class Jdk17DefaultSchemaFactoryWrapper extends SchemaFactory {\r\n  @Delegate\r\n  SchemaFactory factory = SchemaFactory.newDefaultInstance();\r\n}\r\n```\r\n\r\nInstead `SchemaFactory.newDefaultInstance()` probably `SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI, &quot;com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory&quot;, ClassLoader.getSystemClassLoader())` could be used to make sure that the `SchemaFactory` from the JDK gets used.\r\n\r\nAnd the `Jdk17DefaultSchemaFactoryWrapper` class has to be registered as `javax.xml.validation.SchemaFactory`. I&#39;ve done it via creating a file `META-INF/services/javax.xml.validation.SchemaFactory` and putting the full quilified name of the `Jdk17DefaultSchemaFactoryWrapper` class as its contents.\r\n\r\nAs Mr. @Appernicus provided in his answer to this question, other ways could be approached to get done the same.\r\n\r\n**Alternative Solution**\r\n\r\nAn alternative solution would be to use the implementation provided by the container.\r\n\r\nTo do that, one would need to add the `org.apache.xerces` dependency with the `scope: provided` to their POM and the following `XMLSchemaFactoryWrapper` implementation:\r\n```java\r\npackage com.temenos.multifonds.integration.integrationBroker.utils.jaxp;\r\n\r\nimport lombok.experimental.Delegate;\r\nimport org.apache.xerces.jaxp.validation.XMLSchemaFactory;\r\nimport org.xml.sax.SAXNotRecognizedException;\r\nimport org.xml.sax.SAXNotSupportedException;\r\n\r\nimport javax.xml.XMLConstants;\r\nimport javax.xml.validation.SchemaFactory;\r\n\r\npublic class XMLSchemaFactoryWrapper extends SchemaFactory {\r\n  @Delegate(excludes = DelegateExclude.class)\r\n  SchemaFactory factory = new XMLSchemaFactory();\r\n\r\n  @Override\r\n  public void setProperty(String name, Object object) throws SAXNotRecognizedException, SAXNotSupportedException {\r\n    if (XMLConstants.ACCESS_EXTERNAL_DTD.equals(name))\r\n      return;\r\n\r\n    super.setProperty(name, object);\r\n  }\r\n\r\n  private interface DelegateExclude {\r\n    void setProperty(String name, Object value);\r\n  }\r\n}\r\n\r\n```\r\n\r\nAs you might notice, the problem with this solution is that the `accessExternalDTD` property actually gets ignored. \r\n\r\nIn my case, it wasn&#39;t a problem because XML schemas didn&#39;t use external schemas and the property was set by the third party to cover some future cases.\r\n\r\nThough, knowing pros and cons and limitations of the provided solutions it should be possible to find the one that suits your particular case.","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>I tend to agree with the opinion of the author (@searchengine27) of the first comment on the accepted answer. Patching container configuration doesn't look like a robust and maintainable solution.</p>\n<p>For instance, with the JBoss Wildfly installation, I got only one place where the mentioned module was defined, but with the JBoss EAP 7.4 patched to work under Java 17 there were two places, thus having the container updated just ruined the working program.</p>\n<p>It's also worth mentioning that JBoss is provided with the particular implementation of <code>javax.api</code> on purpose (tested security, etc.) and one should think twice before deciding to turn it off.</p>\n<p>I encountered the same problem with a third-party library instantiating <code>Schemafactory</code> and setting the <code>accessExternalDTD</code> property to it.</p>\n<p>Everything worked well when the application was running in a Docker container under OpenJDK17 and got into trouble running inside the JBoss container.</p>\n<p>The solution I propose is to provide with your program an implementation of <code>SchemaFactory</code> that leverages either <code>org.apache.xerces</code> implementation, or the default one from the JDK (OpenJDK17 in my case).</p>\n<p>I've chosen the latter because I found it newer and supports the next version of the JAXP standard.</p>\n<p>Here is the code of the <code>Jdk17DefaultSchemaFactoryWrapper</code> class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package my.package.utils.jaxp;\n\nimport lombok.experimental.Delegate;\n\nimport javax.xml.validation.SchemaFactory;\n\npublic class Jdk17DefaultSchemaFactoryWrapper extends SchemaFactory {\n  @Delegate\n  SchemaFactory factory = SchemaFactory.newDefaultInstance();\n}\n</code></pre>\n<p>Instead <code>SchemaFactory.newDefaultInstance()</code> probably <code>SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI, &quot;com.sun.org.apache.xerces.internal.jaxp.validation.XMLSchemaFactory&quot;, ClassLoader.getSystemClassLoader())</code> could be used to make sure that the <code>SchemaFactory</code> from the JDK gets used.</p>\n<p>And the <code>Jdk17DefaultSchemaFactoryWrapper</code> class has to be registered as <code>javax.xml.validation.SchemaFactory</code>. I've done it via creating a file <code>META-INF/services/javax.xml.validation.SchemaFactory</code> and putting the full quilified name of the <code>Jdk17DefaultSchemaFactoryWrapper</code> class as its contents.</p>\n<p>As Mr. @Appernicus provided in his answer to this question, other ways could be approached to get done the same.</p>\n<p><strong>Alternative Solution</strong></p>\n<p>An alternative solution would be to use the implementation provided by the container.</p>\n<p>To do that, one would need to add the <code>org.apache.xerces</code> dependency with the <code>scope: provided</code> to their POM and the following <code>XMLSchemaFactoryWrapper</code> implementation:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.temenos.multifonds.integration.integrationBroker.utils.jaxp;\n\nimport lombok.experimental.Delegate;\nimport org.apache.xerces.jaxp.validation.XMLSchemaFactory;\nimport org.xml.sax.SAXNotRecognizedException;\nimport org.xml.sax.SAXNotSupportedException;\n\nimport javax.xml.XMLConstants;\nimport javax.xml.validation.SchemaFactory;\n\npublic class XMLSchemaFactoryWrapper extends SchemaFactory {\n  @Delegate(excludes = DelegateExclude.class)\n  SchemaFactory factory = new XMLSchemaFactory();\n\n  @Override\n  public void setProperty(String name, Object object) throws SAXNotRecognizedException, SAXNotSupportedException {\n    if (XMLConstants.ACCESS_EXTERNAL_DTD.equals(name))\n      return;\n\n    super.setProperty(name, object);\n  }\n\n  private interface DelegateExclude {\n    void setProperty(String name, Object value);\n  }\n}\n\n</code></pre>\n<p>As you might notice, the problem with this solution is that the <code>accessExternalDTD</code> property actually gets ignored.</p>\n<p>In my case, it wasn't a problem because XML schemas didn't use external schemas and the property was set by the third party to cover some future cases.</p>\n<p>Though, knowing pros and cons and limitations of the provided solutions it should be possible to find the one that suits your particular case.</p>\n"},{"tags":[],"owner":{"account_id":6676840,"reputation":2927,"user_id":5151202,"display_name":"times29"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669197483,"creation_date":1669197483,"answer_id":74544884,"question_id":58374278,"body_markdown":"In my case I added the following dependency for Pact tests and suddenly other tests failed due to the following exception: `org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.`. The dependency I added was this:  \r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;au.com.dius.pact.provider&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit5&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nTo make it work I excluded `xerces` as follows:\r\n```xml\r\n&lt;dependency&gt;\r\n    &lt;groupId&gt;au.com.dius.pact.provider&lt;/groupId&gt;\r\n    &lt;artifactId&gt;junit5&lt;/artifactId&gt;\r\n    &lt;scope&gt;test&lt;/scope&gt;\r\n    &lt;exclusions&gt;\r\n        &lt;exclusion&gt;\r\n            &lt;groupId&gt;xerces&lt;/groupId&gt;\r\n            &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\r\n        &lt;/exclusion&gt;\r\n    &lt;/exclusions&gt;\r\n&lt;/dependency&gt;\r\n```\r\n\r\nAfter that everything worked as before.","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>In my case I added the following dependency for Pact tests and suddenly other tests failed due to the following exception: <code>org.xml.sax.SAXNotRecognizedException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.</code>. The dependency I added was this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;au.com.dius.pact.provider&lt;/groupId&gt;\n    &lt;artifactId&gt;junit5&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>To make it work I excluded <code>xerces</code> as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;au.com.dius.pact.provider&lt;/groupId&gt;\n    &lt;artifactId&gt;junit5&lt;/artifactId&gt;\n    &lt;scope&gt;test&lt;/scope&gt;\n    &lt;exclusions&gt;\n        &lt;exclusion&gt;\n            &lt;groupId&gt;xerces&lt;/groupId&gt;\n            &lt;artifactId&gt;xercesImpl&lt;/artifactId&gt;\n        &lt;/exclusion&gt;\n    &lt;/exclusions&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>After that everything worked as before.</p>\n"}],"owner":{"account_id":13532622,"reputation":541,"user_id":9762633,"display_name":"Abhishek Singh"},"comment_count":4,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":36904,"favorite_count":0,"down_vote_count":0,"up_vote_count":16,"accepted_answer_id":58522022,"answer_count":8,"score":16,"last_activity_date":1669197483,"creation_date":1571046861,"question_id":58374278,"body_markdown":"I want to **prevent a XXE attack** in my project. It&#39;s old api project which runs on java 7 (**no maven**) and jboss-as-7 server. But during the execution i get the error:\r\n**org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized**.\r\n\r\n```it \r\n org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized.\r\n\r\n15:19:02,845 ERROR [stderr] (http-localhost-127.0.0.1-8080-3) \tat org.apache.xerces.jaxp.validation.ValidatorImpl.setProperty(ValidatorImpl.java:218)\r\n\r\n15:19:02,846 ERROR [stderr] (http-localhost-127.0.0.1-8080-3) \tat com.uid.kua.web.KUARestController.authenticateAtAUA(KUARestController.java:118)\r\n\r\n15:19:02,847 ERROR [stderr] (http-localhost-127.0.0.1-8080-3) \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\r\n15:19:02,847 ERROR [stderr] (http-localhost-127.0.0.1-8080-3) \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n\r\n15:19:02,848 ERROR [stderr] (http-localhost-127.0.0.1-8080-3) \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\r\n15:19:02,849 ERROR [stderr] (http-localhost-127.0.0.1-8080-3) \tat java.lang.reflect.Method.invoke(Method.java:606)\r\n```\r\nI have searched about it and every forum has some different meaning to it saying it&#39;s a bug. I have not found any relevant solution for this exception. Please help. Thanks in advance.","title":"org.xml.sax.SAXNotRecognizedException: Property &#39;http://javax.xml.XMLConstants/property/accessExternalDTD&#39; is not recognized","body":"<p>I want to <strong>prevent a XXE attack</strong> in my project. It's old api project which runs on java 7 (<strong>no maven</strong>) and jboss-as-7 server. But during the execution i get the error:\n<strong>org.xml.sax.SAXNotRecognizedException: Property '<a href=\"http://javax.xml.XMLConstants/property/accessExternalDTD\" rel=\"noreferrer\">http://javax.xml.XMLConstants/property/accessExternalDTD</a>' is not recognized</strong>.</p>\n\n<pre><code> org.xml.sax.SAXNotRecognizedException: Property 'http://javax.xml.XMLConstants/property/accessExternalDTD' is not recognized.\n\n15:19:02,845 ERROR [stderr] (http-localhost-127.0.0.1-8080-3)   at org.apache.xerces.jaxp.validation.ValidatorImpl.setProperty(ValidatorImpl.java:218)\n\n15:19:02,846 ERROR [stderr] (http-localhost-127.0.0.1-8080-3)   at com.uid.kua.web.KUARestController.authenticateAtAUA(KUARestController.java:118)\n\n15:19:02,847 ERROR [stderr] (http-localhost-127.0.0.1-8080-3)   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\n15:19:02,847 ERROR [stderr] (http-localhost-127.0.0.1-8080-3)   at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\n\n15:19:02,848 ERROR [stderr] (http-localhost-127.0.0.1-8080-3)   at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\n15:19:02,849 ERROR [stderr] (http-localhost-127.0.0.1-8080-3)   at java.lang.reflect.Method.invoke(Method.java:606)\n</code></pre>\n\n<p>I have searched about it and every forum has some different meaning to it saying it's a bug. I have not found any relevant solution for this exception. Please help. Thanks in advance.</p>\n"},{"tags":["java","ssl","keystore","truststore","sslcontext"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1669198060,"post_id":74544875,"comment_id":131588101,"body_markdown":"First: are you **absolutely sure** that you do not need a trust manager? Because in any case where you really don&#39;t you might as well not use TLS at all (because without trust, TLS does *extremely little* to protect data in transit and is incredibly easy to defeat). Second: you might just have to implement your own dummy trust manager in those cases (there are plenty of examples out there, but I suggest you **don&#39;t** go that route, because of the reasons I mentioned earlier).","body":"First: are you <b>absolutely sure</b> that you do not need a trust manager? Because in any case where you really don&#39;t you might as well not use TLS at all (because without trust, TLS does <i>extremely little</i> to protect data in transit and is incredibly easy to defeat). Second: you might just have to implement your own dummy trust manager in those cases (there are plenty of examples out there, but I suggest you <b>don&#39;t</b> go that route, because of the reasons I mentioned earlier)."},{"owner":{"account_id":13642467,"reputation":1,"user_id":9842234,"display_name":"Istv&#225;n Zsolnai"},"score":0,"creation_date":1669198572,"post_id":74544875,"comment_id":131588304,"body_markdown":"In the case where I don&#39;t need the truststore, I am already feeding an empty truststore to the app, this is what I&#39;m trying to solve, that I don&#39;t even need to feed it an empty truststore. I&#39;m absolutely sure I don&#39;t need it. Thanks! :)","body":"In the case where I don&#39;t need the truststore, I am already feeding an empty truststore to the app, this is what I&#39;m trying to solve, that I don&#39;t even need to feed it an empty truststore. I&#39;m absolutely sure I don&#39;t need it. Thanks! :)"}],"owner":{"account_id":13642467,"reputation":1,"user_id":9842234,"display_name":"Istv&#225;n Zsolnai"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":216,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669197438,"creation_date":1669197438,"question_id":74544875,"body_markdown":"Is there a way to initialize ssl context in java without a trust store?\r\n\r\n\r\n```\r\nprivate static SSLContext getSSLContext(\r\n    final KeyManager[] keyManagers, final TrustManager[] trustManagers)\r\n    throws KeyManagementException, NoSuchAlgorithmException {\r\n  final SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\r\n  sslContext.init(keyManagers, trustManagers, new SecureRandom());\r\n\r\n  return sslContext;\r\n}\r\n```\r\n\r\nI want the above code to not throw a null pointer exception when TrustManager[] is null or empty, as my application does not require a trust store in certain cases, in those cases I dont want to add a trust store.\r\n\r\nI tried looking for an overloaded sslContext.init() where it does not ask for a trust manager as a parameter, but I did not find any.","title":"Java SSL Context initialization without a truststore?","body":"<p>Is there a way to initialize ssl context in java without a trust store?</p>\n<pre><code>private static SSLContext getSSLContext(\n    final KeyManager[] keyManagers, final TrustManager[] trustManagers)\n    throws KeyManagementException, NoSuchAlgorithmException {\n  final SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n  sslContext.init(keyManagers, trustManagers, new SecureRandom());\n\n  return sslContext;\n}\n</code></pre>\n<p>I want the above code to not throw a null pointer exception when TrustManager[] is null or empty, as my application does not require a trust store in certain cases, in those cases I dont want to add a trust store.</p>\n<p>I tried looking for an overloaded sslContext.init() where it does not ask for a trust manager as a parameter, but I did not find any.</p>\n"},{"tags":["java","spring","spring-mvc","servlet-dispatching"],"answers":[{"comments":[{"owner":{"account_id":34829,"reputation":23264,"user_id":98514,"accept_rate":76,"display_name":"Kevin"},"score":0,"creation_date":1273013710,"post_id":2769474,"comment_id":2802703,"body_markdown":"Is it something like events in Flex, where i get dispatch events from a one MXML to another or to server. \n\nCan i have more than one DispatcherServlet in my appication.\n\nDo each class files have a separate DispatcherServlet.","body":"Is it something like events in Flex, where i get dispatch events from a one MXML to another or to server.   Can i have more than one DispatcherServlet in my appication.  Do each class files have a separate DispatcherServlet."},{"owner":{"account_id":52822,"reputation":1089035,"user_id":157882,"accept_rate":93,"display_name":"BalusC"},"score":0,"creation_date":1273013828,"post_id":2769474,"comment_id":2802717,"body_markdown":"There&#39;s usually only one front controller. This is regardless of the models and views you have. It just brings specific models and views together.","body":"There&#39;s usually only one front controller. This is regardless of the models and views you have. It just brings specific models and views together."},{"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"score":2,"creation_date":1273013887,"post_id":2769474,"comment_id":2802720,"body_markdown":"@theband: You *can* have multiple `DispatcherServlets`, if your architecture makes more sense that way, but usually there&#39;s no reason to.","body":"@theband: You <i>can</i> have multiple <code>DispatcherServlets</code>, if your architecture makes more sense that way, but usually there&#39;s no reason to."}],"tags":[],"owner":{"account_id":11089,"reputation":400050,"user_id":21234,"accept_rate":91,"display_name":"skaffman"},"comment_count":3,"down_vote_count":0,"up_vote_count":51,"is_accepted":false,"score":51,"last_activity_date":1389143669,"creation_date":1273013406,"answer_id":2769474,"question_id":2769467,"body_markdown":"`DispatcherServlet` is Spring MVC&#39;s implementation of the [front controller pattern][1].\r\n\r\nSee description in the Spring docs [here][2].\r\n\r\nEssentially, it&#39;s a servlet that takes the incoming request, and delegates processing of that request to one of a number of handlers, the mapping of which is specific in the `DispatcherServlet` configuration.\r\n\r\n\r\n  [1]: http://www.oracle.com/technetwork/java/frontcontroller-135648.html\r\n  [2]: http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-servlet","title":"What is Dispatcher Servlet in Spring?","body":"<p><code>DispatcherServlet</code> is Spring MVC's implementation of the <a href=\"http://www.oracle.com/technetwork/java/frontcontroller-135648.html\" rel=\"noreferrer\">front controller pattern</a>.</p>\n\n<p>See description in the Spring docs <a href=\"http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/mvc.html#mvc-servlet\" rel=\"noreferrer\">here</a>.</p>\n\n<p>Essentially, it's a servlet that takes the incoming request, and delegates processing of that request to one of a number of handlers, the mapping of which is specific in the <code>DispatcherServlet</code> configuration.</p>\n"},{"comments":[{"owner":{"account_id":34829,"reputation":23264,"user_id":98514,"accept_rate":76,"display_name":"Kevin"},"score":4,"creation_date":1273014262,"post_id":2769523,"comment_id":2802748,"body_markdown":"Great riposte, now a question how come the DispatcherServlet identifies the class name and method name too. Can you show me an example of a configuration where i have two classes and two method names and how DispatcherServlet catches the right request.","body":"Great riposte, now a question how come the DispatcherServlet identifies the class name and method name too. Can you show me an example of a configuration where i have two classes and two method names and how DispatcherServlet catches the right request."},{"owner":{"account_id":131213,"reputation":47334,"user_id":331052,"display_name":"Affe"},"score":13,"creation_date":1273014493,"post_id":2769523,"comment_id":2802766,"body_markdown":"It actually scans the class path on start up for that annotation and makes a mapping of the &quot;/pages/Home.html&quot; to the Class + Method.  If you had two methods that both had &quot;/pages/Home.html&quot; with no other restrictions in their annotation, that would be an error and it will toss exceptions at you.\n\nYou can also wire it together with XML if you&#39;re oldschool.","body":"It actually scans the class path on start up for that annotation and makes a mapping of the &quot;/pages/Home.html&quot; to the Class + Method.  If you had two methods that both had &quot;/pages/Home.html&quot; with no other restrictions in their annotation, that would be an error and it will toss exceptions at you.  You can also wire it together with XML if you&#39;re oldschool."},{"owner":{"account_id":7465996,"reputation":1866,"user_id":5675550,"accept_rate":77,"display_name":"viper"},"score":2,"creation_date":1465811241,"post_id":2769523,"comment_id":63039365,"body_markdown":"Do we need a `Dispatcher Servlet` xml file when using Annotation Based `@RestController` ?","body":"Do we need a <code>Dispatcher Servlet</code> xml file when using Annotation Based <code>@RestController</code> ?"},{"owner":{"account_id":3116091,"reputation":161,"user_id":2636808,"accept_rate":60,"display_name":"Mahender Reddy Yasa"},"score":2,"creation_date":1525258389,"post_id":2769523,"comment_id":87283650,"body_markdown":"@viper in web.xml we always need to configure dispatcher servlet even though you use annotations or xml configurations","body":"@viper in web.xml we always need to configure dispatcher servlet even though you use annotations or xml configurations"},{"owner":{"account_id":7888499,"reputation":914,"user_id":5959593,"accept_rate":0,"display_name":"Minh Nghĩa"},"score":0,"creation_date":1590979388,"post_id":2769523,"comment_id":109875645,"body_markdown":"Is there any other type of servlet?","body":"Is there any other type of servlet?"}],"tags":[],"owner":{"account_id":131213,"reputation":47334,"user_id":331052,"display_name":"Affe"},"comment_count":5,"down_vote_count":0,"up_vote_count":230,"is_accepted":true,"score":230,"last_activity_date":1419433635,"creation_date":1273013961,"answer_id":2769523,"question_id":2769467,"body_markdown":"The job of the *DispatcherServlet* is to take an incoming URI and find the right combination of handlers (generally methods on *Controller* classes) and views (generally JSPs) that combine to form the page or resource that&#39;s supposed to be found at that location.\r\n\r\nI might have\r\n \r\n- a file `/WEB-INF/jsp/pages/Home.jsp`\r\n- and a *method* on a class\r\n\r\n        @RequestMapping(value=&quot;/pages/Home.html&quot;)\r\n        private ModelMap buildHome() {\r\n            return somestuff;\r\n        }\r\n\r\nThe *Dispatcher servlet* is the bit that &quot;knows&quot; to call that method when a browser requests the page, and to combine its results with the matching JSP file to make an html document.\r\n\r\nHow it accomplishes this varies widely with configuration and Spring version.\r\n\r\nThere&#39;s also no reason the end result has to be web pages.  It can do the same thing to locate *RMI* end points, handle *SOAP* requests, anything that can come into a servlet.","title":"What is Dispatcher Servlet in Spring?","body":"<p>The job of the <em>DispatcherServlet</em> is to take an incoming URI and find the right combination of handlers (generally methods on <em>Controller</em> classes) and views (generally JSPs) that combine to form the page or resource that's supposed to be found at that location.</p>\n\n<p>I might have</p>\n\n<ul>\n<li>a file <code>/WEB-INF/jsp/pages/Home.jsp</code></li>\n<li><p>and a <em>method</em> on a class</p>\n\n<pre><code>@RequestMapping(value=\"/pages/Home.html\")\nprivate ModelMap buildHome() {\n    return somestuff;\n}\n</code></pre></li>\n</ul>\n\n<p>The <em>Dispatcher servlet</em> is the bit that \"knows\" to call that method when a browser requests the page, and to combine its results with the matching JSP file to make an html document.</p>\n\n<p>How it accomplishes this varies widely with configuration and Spring version.</p>\n\n<p>There's also no reason the end result has to be web pages.  It can do the same thing to locate <em>RMI</em> end points, handle <em>SOAP</em> requests, anything that can come into a servlet.</p>\n"},{"comments":[{"owner":{"account_id":5648374,"reputation":153,"user_id":4469765,"accept_rate":57,"display_name":"Subhasish Bhattacharjee"},"score":0,"creation_date":1482322844,"post_id":27345493,"comment_id":69725838,"body_markdown":"This is a nice explanation. Your point number 2 says that the DispatcherServlet will try to identify the Spring Configuration Document with naming conventions like &quot;servlet_name-servlet.xml&quot;. However, I have seen projects which used name like &quot;dispatcher&quot; only, and it works fine. I too have tried that. But I do not know why?","body":"This is a nice explanation. Your point number 2 says that the DispatcherServlet will try to identify the Spring Configuration Document with naming conventions like &quot;servlet_name-servlet.xml&quot;. However, I have seen projects which used name like &quot;dispatcher&quot; only, and it works fine. I too have tried that. But I do not know why?"}],"tags":[],"owner":{"account_id":3149968,"reputation":427,"user_id":2663609,"display_name":"user2663609"},"comment_count":1,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1511506400,"creation_date":1417973204,"answer_id":27345493,"question_id":2769467,"body_markdown":"We can say like `DispatcherServlet` taking care of everything in Spring MVC.\r\n\r\nAt web container start up:\r\n\r\n 1. `DispatcherServlet` will be loaded and initialized by calling\r\n    `init()` method\r\n 2. `init()` of `DispatcherServlet` will try to identify the Spring\r\n        Configuration Document with naming conventions like\r\n        `&quot;servlet_name-servlet.xml&quot;` then all beans can be identified.\r\n\r\nExample:\r\n\r\n    public class DispatcherServlet extends HttpServlet {\r\n    \t\r\n    \tApplicationContext ctx = null;\r\n    \t\r\n    \tpublic void init(ServletConfig cfg){\r\n    \t\t// 1. try to get the spring configuration document with default naming conventions\r\n    \t\tString xml = &quot;servlet_name&quot; + &quot;-servlet.xml&quot;;\r\n    \r\n    \t\t//if it was found then creates the ApplicationContext object\r\n    \t\tctx = new XmlWebApplicationContext(xml);\r\n    \t}\r\n    \t...\r\n    }\r\n\r\nSo, in generally `DispatcherServlet` capture request URI and hand over to `HandlerMapping`. `HandlerMapping` search mapping bean with method of controller, where controller returning logical name(view). Then this logical name is send to `DispatcherServlet` by `HandlerMapping`. Then `DispatcherServlet` tell `ViewResolver` to give full location of view by appending prefix and suffix, then `DispatcherServlet` give view to the client.","title":"What is Dispatcher Servlet in Spring?","body":"<p>We can say like <code>DispatcherServlet</code> taking care of everything in Spring MVC.</p>\n\n<p>At web container start up:</p>\n\n<ol>\n<li><code>DispatcherServlet</code> will be loaded and initialized by calling\n<code>init()</code> method</li>\n<li><code>init()</code> of <code>DispatcherServlet</code> will try to identify the Spring\n    Configuration Document with naming conventions like\n    <code>\"servlet_name-servlet.xml\"</code> then all beans can be identified.</li>\n</ol>\n\n<p>Example:</p>\n\n<pre><code>public class DispatcherServlet extends HttpServlet {\n\n    ApplicationContext ctx = null;\n\n    public void init(ServletConfig cfg){\n        // 1. try to get the spring configuration document with default naming conventions\n        String xml = \"servlet_name\" + \"-servlet.xml\";\n\n        //if it was found then creates the ApplicationContext object\n        ctx = new XmlWebApplicationContext(xml);\n    }\n    ...\n}\n</code></pre>\n\n<p>So, in generally <code>DispatcherServlet</code> capture request URI and hand over to <code>HandlerMapping</code>. <code>HandlerMapping</code> search mapping bean with method of controller, where controller returning logical name(view). Then this logical name is send to <code>DispatcherServlet</code> by <code>HandlerMapping</code>. Then <code>DispatcherServlet</code> tell <code>ViewResolver</code> to give full location of view by appending prefix and suffix, then <code>DispatcherServlet</code> give view to the client.</p>\n"},{"tags":[],"owner":{"display_name":"user1134181"},"comment_count":0,"down_vote_count":0,"up_vote_count":95,"is_accepted":false,"score":95,"last_activity_date":1589926128,"creation_date":1447873360,"answer_id":33788229,"question_id":2769467,"body_markdown":"In Spring MVC, all incoming requests go through a single servlet. This servlet - `DispatcherServlet` - is the front controller. Front controller is a typical design pattern in the web applications development. In this case, a single servlet receives all requests and transfers them to all other components of the application.\r\n\r\nThe task of the `DispatcherServlet` is to send request to the specific Spring MVC controller.\r\n\r\nUsually we have a lot of controllers and `DispatcherServlet` refers to one of the following mappers in order to determine the target controller:\r\n\r\n- [`BeanNameUrlHandlerMapping`][1];\r\n- [`ControllerBeanNameHandlerMapping`][2];\r\n- [`ControllerClassNameHandlerMapping`][3];\r\n- [`DefaultAnnotationHandlerMapping`][4];\r\n- [`SimpleUrlHandlerMapping`][5].\r\n\r\nIf no configuration is performed, the `DispatcherServlet` uses `BeanNameUrlHandlerMapping` and `DefaultAnnotationHandlerMapping` by default.\r\n\r\nWhen the target controller is identified, the `DispatcherServlet` sends request to it. The controller performs some work according to the request \r\n(or delegate it to the other objects), and returns back to the `DispatcherServlet` with the Model and the name of the View.\r\n\r\nThe name of the View is only a logical name. This logical name is then used to search for the actual View (to avoid coupling with the controller and specific View). Then `DispatcherServlet` refers to the [`ViewResolver`][6] and maps the logical name of the View to the specific implementation of the View.\r\n\r\nSome possible Implementations of the `ViewResolver` are:\r\n\r\n- [`BeanNameViewResolver`][7];\r\n- [`ContentNegotiatingViewResolver`][8];\r\n- [`FreeMarkerViewResolver`][9];\r\n- [`InternalResourceViewResolver`][10];\r\n- [`JasperReportsViewResolver`][11];\r\n- [`ResourceBundleViewResolver`][12];\r\n- [`TilesViewResolver`][13];\r\n- [`UrlBasedViewResolver`][14];\r\n- [`VelocityLayoutViewResolver`][15];\r\n- [`VelocityViewResolver`][16];\r\n- [`XmlViewResolver`][17];\r\n- [`XsltViewResolver`][18].\r\n\r\nWhen the `DispatcherServlet` determines the view that will display the results it will be rendered as the response.\r\n\r\nFinally, the `DispatcherServlet` returns the `Response` object back to the client.\r\n\r\n  [1]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/handler/BeanNameUrlHandlerMapping.html\r\n  [2]: http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/web/servlet/mvc/support/ControllerBeanNameHandlerMapping.html\r\n  [3]: http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/web/servlet/mvc/support/ControllerClassNameHandlerMapping.html\r\n  [4]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.html\r\n  [5]: http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/web/servlet/handler/SimpleUrlHandlerMapping.html\r\n  [6]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/ViewResolver.html\r\n  [7]: http://docs.spring.io/spring-framework/docs/2.0.8/api/org/springframework/web/servlet/view/BeanNameViewResolver.html\r\n  [8]: http://docs.spring.io/autorepo/docs/spring/3.2.5.RELEASE/javadoc-api/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.html\r\n  [9]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/freemarker/FreeMarkerViewResolver.html\r\n  [10]: http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/web/servlet/view/InternalResourceViewResolver.html\r\n  [11]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/jasperreports/JasperReportsViewResolver.html\r\n  [12]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/ResourceBundleViewResolver.html\r\n  [13]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/tiles2/TilesViewResolver.html\r\n  [14]: http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/UrlBasedViewResolver.html\r\n  [15]: http://docs.spring.io/spring-framework/docs/2.0.x/api/org/springframework/web/servlet/view/velocity/VelocityLayoutViewResolver.html\r\n  [16]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/velocity/VelocityViewResolver.html\r\n  [17]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/XmlViewResolver.html\r\n  [18]: https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/xslt/XsltViewResolver.html","title":"What is Dispatcher Servlet in Spring?","body":"<p>In Spring MVC, all incoming requests go through a single servlet. This servlet - <code>DispatcherServlet</code> - is the front controller. Front controller is a typical design pattern in the web applications development. In this case, a single servlet receives all requests and transfers them to all other components of the application.</p>\n\n<p>The task of the <code>DispatcherServlet</code> is to send request to the specific Spring MVC controller.</p>\n\n<p>Usually we have a lot of controllers and <code>DispatcherServlet</code> refers to one of the following mappers in order to determine the target controller:</p>\n\n<ul>\n<li><a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/handler/BeanNameUrlHandlerMapping.html\" rel=\"noreferrer\"><code>BeanNameUrlHandlerMapping</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/web/servlet/mvc/support/ControllerBeanNameHandlerMapping.html\" rel=\"noreferrer\"><code>ControllerBeanNameHandlerMapping</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/web/servlet/mvc/support/ControllerClassNameHandlerMapping.html\" rel=\"noreferrer\"><code>ControllerClassNameHandlerMapping</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/mvc/annotation/DefaultAnnotationHandlerMapping.html\" rel=\"noreferrer\"><code>DefaultAnnotationHandlerMapping</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/2.5.x/api/org/springframework/web/servlet/handler/SimpleUrlHandlerMapping.html\" rel=\"noreferrer\"><code>SimpleUrlHandlerMapping</code></a>.</li>\n</ul>\n\n<p>If no configuration is performed, the <code>DispatcherServlet</code> uses <code>BeanNameUrlHandlerMapping</code> and <code>DefaultAnnotationHandlerMapping</code> by default.</p>\n\n<p>When the target controller is identified, the <code>DispatcherServlet</code> sends request to it. The controller performs some work according to the request \n(or delegate it to the other objects), and returns back to the <code>DispatcherServlet</code> with the Model and the name of the View.</p>\n\n<p>The name of the View is only a logical name. This logical name is then used to search for the actual View (to avoid coupling with the controller and specific View). Then <code>DispatcherServlet</code> refers to the <a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/ViewResolver.html\" rel=\"noreferrer\"><code>ViewResolver</code></a> and maps the logical name of the View to the specific implementation of the View.</p>\n\n<p>Some possible Implementations of the <code>ViewResolver</code> are:</p>\n\n<ul>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/2.0.8/api/org/springframework/web/servlet/view/BeanNameViewResolver.html\" rel=\"noreferrer\"><code>BeanNameViewResolver</code></a>;</li>\n<li><a href=\"http://docs.spring.io/autorepo/docs/spring/3.2.5.RELEASE/javadoc-api/org/springframework/web/servlet/view/ContentNegotiatingViewResolver.html\" rel=\"noreferrer\"><code>ContentNegotiatingViewResolver</code></a>;</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/freemarker/FreeMarkerViewResolver.html\" rel=\"noreferrer\"><code>FreeMarkerViewResolver</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/2.5.6/api/org/springframework/web/servlet/view/InternalResourceViewResolver.html\" rel=\"noreferrer\"><code>InternalResourceViewResolver</code></a>;</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/jasperreports/JasperReportsViewResolver.html\" rel=\"noreferrer\"><code>JasperReportsViewResolver</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/ResourceBundleViewResolver.html\" rel=\"noreferrer\"><code>ResourceBundleViewResolver</code></a>;</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/tiles2/TilesViewResolver.html\" rel=\"noreferrer\"><code>TilesViewResolver</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/UrlBasedViewResolver.html\" rel=\"noreferrer\"><code>UrlBasedViewResolver</code></a>;</li>\n<li><a href=\"http://docs.spring.io/spring-framework/docs/2.0.x/api/org/springframework/web/servlet/view/velocity/VelocityLayoutViewResolver.html\" rel=\"noreferrer\"><code>VelocityLayoutViewResolver</code></a>;</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/velocity/VelocityViewResolver.html\" rel=\"noreferrer\"><code>VelocityViewResolver</code></a>;</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/XmlViewResolver.html\" rel=\"noreferrer\"><code>XmlViewResolver</code></a>;</li>\n<li><a href=\"https://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/web/servlet/view/xslt/XsltViewResolver.html\" rel=\"noreferrer\"><code>XsltViewResolver</code></a>.</li>\n</ul>\n\n<p>When the <code>DispatcherServlet</code> determines the view that will display the results it will be rendered as the response.</p>\n\n<p>Finally, the <code>DispatcherServlet</code> returns the <code>Response</code> object back to the client.</p>\n"},{"comments":[{"owner":{"account_id":6342823,"reputation":405,"user_id":4924242,"display_name":"Nesrin"},"score":0,"creation_date":1547239444,"post_id":44380337,"comment_id":95138559,"body_markdown":"I have a question please, how it select the view in case of returning JSON object  that we see in the browser, does it return to the same URI if there is no logical view selected?","body":"I have a question please, how it select the view in case of returning JSON object  that we see in the browser, does it return to the same URI if there is no logical view selected?"},{"owner":{"account_id":9642226,"reputation":1060,"user_id":7156098,"display_name":"alegria"},"score":2,"creation_date":1548797060,"post_id":44380337,"comment_id":95669685,"body_markdown":"@Nesrin it&#39;s been ages since you asked but here&#39;s an answer : You put a special annotation just above the `@Controller` method called `@ResponseBody` indicating that the returned response should be directly written on HTTP response body, not to be placed in a Model or be resolved as view whatsoever.","body":"@Nesrin it&#39;s been ages since you asked but here&#39;s an answer : You put a special annotation just above the <code>@Controller</code> method called <code>@ResponseBody</code> indicating that the returned response should be directly written on HTTP response body, not to be placed in a Model or be resolved as view whatsoever."}],"tags":[],"owner":{"account_id":3652290,"reputation":2120,"user_id":3044117,"accept_rate":38,"display_name":"Eduardo"},"comment_count":2,"down_vote_count":0,"up_vote_count":79,"is_accepted":false,"score":79,"last_activity_date":1669197339,"creation_date":1496715163,"answer_id":44380337,"question_id":2769467,"body_markdown":"I know this question is marked as solved already but I want to add a newer image explaining this pattern in detail(source: spring in action 4):\r\n\r\n[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/o2rzM.png\r\n\r\n**Explanation**\r\n\r\nWhen the request leaves the browser **(1)**, it carries information about what the user is asking for. At the least, the request will be carrying the requested URL. But it may also carry additional data, such as the information submitted in a form by the user.\r\n\r\nThe first stop in the request’s travels is at Spring’s DispatcherServlet. Like most Java- based web frameworks, Spring MVC funnels requests through a single front controller servlet. A front controller is a common web application pattern where a single servlet delegates responsibility for a request to other components of an application to perform actual processing. In the case of Spring MVC, DispatcherServlet is the front controller.\r\n\r\nThe DispatcherServlet’s job is to send the request on to a Spring MVC controller. A controller is a Spring component that processes the request. But a typical application may have several controllers, and DispatcherServlet needs some help deciding which controller to send the request to. \r\n\r\nSo the DispatcherServlet consults one or more handler mappings **(2)** to figure out where the request’s next stop will be. The handler mapping pays particular attention to the URL carried by the request when making its decision.\r\nOnce an appropriate controller has been chosen, DispatcherServlet sends the request on its merry way to the chosen controller **(3)**. \r\n\r\nAt the controller, the request drops off its payload (the information submitted by the user) and patiently waits while the controller processes that information. (Actually, a well-designed controller performs little or no processing itself and instead delegates responsibility for the business logic to one or more service objects.)\r\nThe logic performed by a controller often results in some information that needs to be carried back to the user and displayed in the browser. This information is referred to as the model. But sending raw information back to the user isn’t sufficient. It needs to be formatted in a user-friendly format, typically HTML. For that, the information needs to be given to a view, typically a JavaServer Page (JSP).\r\nOne of the last things a controller does is package up the model data and identify the name of a view that should render the output. It then sends the request, along with the model and view name, back to the DispatcherServlet **(4)**.\r\n\r\nSo that the controller doesn’t get coupled to a particular view, the view name passed back to DispatcherServlet doesn’t directly identify a specific JSP. It doesn’t even necessarily suggest that the view is a JSP. Instead, it only carries a logical name that will be used to look up the actual view that will produce the result. The DispatcherServlet consults a view resolver **(5)** to map the logical view name to a specific view implementation, which may or may not be a JSP.\r\n\r\nNow that DispatcherServlet knows which view will render the result, the request’s job is almost over. Its final stop is at the view implementation **(6)**, typically a JSP, where it delivers the model data. The request’s job is finally done. The view will use the model data to render output that will be carried back to the client by the (not- so-hardworking) response object **(7)**.\r\n","title":"What is Dispatcher Servlet in Spring?","body":"<p>I know this question is marked as solved already but I want to add a newer image explaining this pattern in detail(source: spring in action 4):</p>\n<p><a href=\"https://i.stack.imgur.com/o2rzM.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/o2rzM.png\" alt=\"enter image description here\" /></a></p>\n<p><strong>Explanation</strong></p>\n<p>When the request leaves the browser <strong>(1)</strong>, it carries information about what the user is asking for. At the least, the request will be carrying the requested URL. But it may also carry additional data, such as the information submitted in a form by the user.</p>\n<p>The first stop in the request’s travels is at Spring’s DispatcherServlet. Like most Java- based web frameworks, Spring MVC funnels requests through a single front controller servlet. A front controller is a common web application pattern where a single servlet delegates responsibility for a request to other components of an application to perform actual processing. In the case of Spring MVC, DispatcherServlet is the front controller.</p>\n<p>The DispatcherServlet’s job is to send the request on to a Spring MVC controller. A controller is a Spring component that processes the request. But a typical application may have several controllers, and DispatcherServlet needs some help deciding which controller to send the request to.</p>\n<p>So the DispatcherServlet consults one or more handler mappings <strong>(2)</strong> to figure out where the request’s next stop will be. The handler mapping pays particular attention to the URL carried by the request when making its decision.\nOnce an appropriate controller has been chosen, DispatcherServlet sends the request on its merry way to the chosen controller <strong>(3)</strong>.</p>\n<p>At the controller, the request drops off its payload (the information submitted by the user) and patiently waits while the controller processes that information. (Actually, a well-designed controller performs little or no processing itself and instead delegates responsibility for the business logic to one or more service objects.)\nThe logic performed by a controller often results in some information that needs to be carried back to the user and displayed in the browser. This information is referred to as the model. But sending raw information back to the user isn’t sufficient. It needs to be formatted in a user-friendly format, typically HTML. For that, the information needs to be given to a view, typically a JavaServer Page (JSP).\nOne of the last things a controller does is package up the model data and identify the name of a view that should render the output. It then sends the request, along with the model and view name, back to the DispatcherServlet <strong>(4)</strong>.</p>\n<p>So that the controller doesn’t get coupled to a particular view, the view name passed back to DispatcherServlet doesn’t directly identify a specific JSP. It doesn’t even necessarily suggest that the view is a JSP. Instead, it only carries a logical name that will be used to look up the actual view that will produce the result. The DispatcherServlet consults a view resolver <strong>(5)</strong> to map the logical view name to a specific view implementation, which may or may not be a JSP.</p>\n<p>Now that DispatcherServlet knows which view will render the result, the request’s job is almost over. Its final stop is at the view implementation <strong>(6)</strong>, typically a JSP, where it delivers the model data. The request’s job is finally done. The view will use the model data to render output that will be carried back to the client by the (not- so-hardworking) response object <strong>(7)</strong>.</p>\n"},{"tags":[],"owner":{"account_id":15361989,"reputation":1,"user_id":11082547,"display_name":"anjali shrivas"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1550555622,"creation_date":1550555622,"answer_id":54759682,"question_id":2769467,"body_markdown":"Dispatcher Controller are displayed in the figure all the incoming request is in intercepted by the dispatcher servlet that works as front controller.\r\nThe dispatcher servlet gets an entry to handler mapping from the XML file and forwords the request to the Controller.","title":"What is Dispatcher Servlet in Spring?","body":"<p>Dispatcher Controller are displayed in the figure all the incoming request is in intercepted by the dispatcher servlet that works as front controller.\nThe dispatcher servlet gets an entry to handler mapping from the XML file and forwords the request to the Controller.</p>\n"},{"tags":[],"owner":{"account_id":6968985,"reputation":11,"user_id":5345979,"display_name":"kartik"},"comment_count":0,"down_vote_count":2,"up_vote_count":1,"is_accepted":false,"score":-1,"last_activity_date":1554173137,"creation_date":1554173137,"answer_id":55466227,"question_id":2769467,"body_markdown":"    &lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; ?&gt;\r\n    &lt;!-- was: &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; --&gt;\r\n    &lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\r\n           xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\r\n           xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\r\n           xmlns:aop=&quot;http://www.springframework.org/schema/aop&quot;\r\n           xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\r\n           xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;\r\n           xmlns:tx=&quot;http://www.springframework.org/schema/tx&quot;\r\n           xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\r\n           http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd\r\n           http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd\r\n            http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd\r\n                   http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd&quot;&gt;\r\n    \r\n        &lt;bean class=&quot;org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping&quot;/&gt;\r\n        &lt;context:component-scan base-package=&quot;com.demo&quot; /&gt;\r\n        &lt;context:annotation-config /&gt;\r\n        \r\n        &lt;mvc:annotation-driven /&gt;\r\n       \r\n    \r\n        &lt;bean id=&quot;viewResolver&quot;\r\n              class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;\r\n              p:prefix=&quot;/WEB-INF/jsp/&quot;\r\n              p:suffix=&quot;.jsp&quot; /&gt;\r\n        \r\n        &lt;bean id=&quot;jdbcTemplate&quot; class=&quot;org.springframework.jdbc.core.JdbcTemplate&quot;&gt;\r\n            &lt;property name=&quot;dataSource&quot; ref=&quot;datasource&quot; /&gt;\r\n        &lt;/bean&gt;\t\r\n        \r\n              &lt;bean id=&quot;datasource&quot; class=&quot;org.springframework.jdbc.datasource.DriverManagerDataSource&quot;&gt;\r\n            &lt;property name=&quot;driverClassName&quot; value=&quot;com.mysql.jdbc.Driver&quot; /&gt;  \r\n            &lt;property name=&quot;url&quot; value=&quot;jdbc:mysql://localhost:3306/employee&quot; /&gt;\r\n            &lt;property name=&quot;username&quot; value=&quot;username&quot; /&gt;\r\n            &lt;property name=&quot;password&quot; value=&quot;password&quot; /&gt;\r\n        &lt;/bean&gt; \r\n        \r\n    &lt;/beans&gt;\r\n\r\n","title":"What is Dispatcher Servlet in Spring?","body":"<pre><code>&lt;?xml version='1.0' encoding='UTF-8' ?&gt;\n&lt;!-- was: &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt; --&gt;\n&lt;beans xmlns=\"http://www.springframework.org/schema/beans\"\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n       xmlns:p=\"http://www.springframework.org/schema/p\"\n       xmlns:aop=\"http://www.springframework.org/schema/aop\"\n       xmlns:context=\"http://www.springframework.org/schema/context\"\n       xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\n       xsi:schemaLocation=\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.0.xsd\n       http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-4.0.xsd\n       http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-4.0.xsd\n        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.0.xsd\n               http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.0.xsd\"&gt;\n\n    &lt;bean class=\"org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping\"/&gt;\n    &lt;context:component-scan base-package=\"com.demo\" /&gt;\n    &lt;context:annotation-config /&gt;\n\n    &lt;mvc:annotation-driven /&gt;\n\n\n    &lt;bean id=\"viewResolver\"\n          class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\"\n          p:prefix=\"/WEB-INF/jsp/\"\n          p:suffix=\".jsp\" /&gt;\n\n    &lt;bean id=\"jdbcTemplate\" class=\"org.springframework.jdbc.core.JdbcTemplate\"&gt;\n        &lt;property name=\"dataSource\" ref=\"datasource\" /&gt;\n    &lt;/bean&gt; \n\n          &lt;bean id=\"datasource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\"&gt;\n        &lt;property name=\"driverClassName\" value=\"com.mysql.jdbc.Driver\" /&gt;  \n        &lt;property name=\"url\" value=\"jdbc:mysql://localhost:3306/employee\" /&gt;\n        &lt;property name=\"username\" value=\"username\" /&gt;\n        &lt;property name=\"password\" value=\"password\" /&gt;\n    &lt;/bean&gt; \n\n&lt;/beans&gt;\n</code></pre>\n"},{"tags":[],"owner":{"account_id":9192200,"reputation":145,"user_id":11056952,"display_name":"Anurag S"},"comment_count":0,"down_vote_count":0,"up_vote_count":4,"is_accepted":false,"score":4,"last_activity_date":1612582325,"creation_date":1612582325,"answer_id":66073315,"question_id":2769467,"body_markdown":"You can say Dispatcher Servlet acts as an entry and exit point for any request. Whenever a request comes it first goes to the Dispatcher Servlet(DS) where the DS then tries to identify its handler method ( the methods you define in the controller to handle the requests ), once the handler mapper (The DS asks the handler mapper) returns the controller the dispatcher servlet knows the controller which can handle this request and can now go to this controller to further complete the processing of the request. Now the controller can respond with an appropriate response and then the DS goes to the view resolver to identify where the view is located and once the view resolver tells the DS it then grabs that view and returns it back to you as the final response. I am adding an image which I took from YouTube from the channel Java Guides.\r\n\r\n[![Dispatcher Servlet in Action][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/KA81b.png","title":"What is Dispatcher Servlet in Spring?","body":"<p>You can say Dispatcher Servlet acts as an entry and exit point for any request. Whenever a request comes it first goes to the Dispatcher Servlet(DS) where the DS then tries to identify its handler method ( the methods you define in the controller to handle the requests ), once the handler mapper (The DS asks the handler mapper) returns the controller the dispatcher servlet knows the controller which can handle this request and can now go to this controller to further complete the processing of the request. Now the controller can respond with an appropriate response and then the DS goes to the view resolver to identify where the view is located and once the view resolver tells the DS it then grabs that view and returns it back to you as the final response. I am adding an image which I took from YouTube from the channel Java Guides.</p>\n<p><a href=\"https://i.stack.imgur.com/KA81b.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KA81b.png\" alt=\"Dispatcher Servlet in Action\" /></a></p>\n"}],"owner":{"account_id":34829,"reputation":23264,"user_id":98514,"accept_rate":76,"display_name":"Kevin"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":236592,"favorite_count":0,"down_vote_count":1,"up_vote_count":225,"accepted_answer_id":2769523,"answer_count":8,"score":224,"last_activity_date":1669197339,"creation_date":1273013326,"question_id":2769467,"body_markdown":"In this image (which I got from **[here](http://maestric.com/wiki/lib/exe/fetch.php?w=&amp;h=&amp;cache=cache&amp;media=java:spring:spring_mvc.png)**), *HTTP* request sends something to *Dispatcher Servlet.* \r\n\r\n![enter image description here][1]\r\n\r\nMy Question is what does *Dispatcher Servlet* do?\r\n\r\n Is it something like getting the information thrown from the web page and throwing it to the controller?\r\n\r\n\r\n  [1]: http://i.stack.imgur.com/nRDbB.png","title":"What is Dispatcher Servlet in Spring?","body":"<p>In this image (which I got from <strong><a href=\"http://maestric.com/wiki/lib/exe/fetch.php?w=&amp;h=&amp;cache=cache&amp;media=java:spring:spring_mvc.png\" rel=\"noreferrer\">here</a></strong>), <em>HTTP</em> request sends something to <em>Dispatcher Servlet.</em> </p>\n\n<p><img src=\"https://i.stack.imgur.com/nRDbB.png\" alt=\"enter image description here\"></p>\n\n<p>My Question is what does <em>Dispatcher Servlet</em> do?</p>\n\n<p>Is it something like getting the information thrown from the web page and throwing it to the controller?</p>\n"},{"tags":["java","string","datetime","time","timeofday"],"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1669153208,"post_id":74539243,"comment_id":131578850,"body_markdown":"&quot;*is it possible?*&quot; - Yes.","body":"&quot;<i>is it possible?</i>&quot; - Yes."},{"owner":{"account_id":7372094,"reputation":902,"user_id":5611967,"accept_rate":32,"display_name":"Michael Cropper"},"score":3,"creation_date":1669153327,"post_id":74539243,"comment_id":131578881,"body_markdown":"What error are you getting? Be specific. And consider design choices, i.e. splitting the bad data into an array first, then parsing each individually against your pattern.","body":"What error are you getting? Be specific. And consider design choices, i.e. splitting the bad data into an array first, then parsing each individually against your pattern."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":1,"creation_date":1669153647,"post_id":74539243,"comment_id":131578963,"body_markdown":"Read a tutorial on regular expressions, rather than just guessing.","body":"Read a tutorial on regular expressions, rather than just guessing."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":2,"creation_date":1669153702,"post_id":74539243,"comment_id":131578971,"body_markdown":"What does &quot;correct&quot; mean?","body":"What does &quot;correct&quot; mean?"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1669154349,"post_id":74539243,"comment_id":131579139,"body_markdown":"as @tgdavies pointed out, one could make the argument that the question is ill-defined. If we, for example, factor in [leap seconds (`en.wikipedia.org`)](https://en.wikipedia.org/wiki/Leap_second), the problem might not be solvable through regular expressions.","body":"as @tgdavies pointed out, one could make the argument that the question is ill-defined. If we, for example, factor in <a href=\"https://en.wikipedia.org/wiki/Leap_second\" rel=\"nofollow noreferrer\">leap seconds (<code>en.wikipedia.org</code>)</a>, the problem might not be solvable through regular expressions."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1669160673,"post_id":74539243,"comment_id":131580530,"body_markdown":"Also, does the first time of  a pair need to be before the second? Does a later pair need to be after an earlier pair?","body":"Also, does the first time of  a pair need to be before the second? Does a later pair need to be after an earlier pair?"}],"answers":[{"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1669153721,"post_id":74539333,"comment_id":131578975,"body_markdown":"This would only find a single match, and wouldn&#39;t allow multiple values, as stated in the post.","body":"This would only find a single match, and wouldn&#39;t allow multiple values, as stated in the post."},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669153768,"post_id":74539333,"comment_id":131578983,"body_markdown":"oh, I though that each of them is separate input :) will fix the pattern","body":"oh, I though that each of them is separate input :) will fix the pattern"},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669154347,"post_id":74539333,"comment_id":131579138,"body_markdown":"This regex it pretty complicated now, but it works...","body":"This regex it pretty complicated now, but it works..."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1669154466,"post_id":74539333,"comment_id":131579162,"body_markdown":"Some parenthesis can be removed. And since the regex seems to be used only for validation, we could/should make the groups non-capturing. Furthermore, we can define &quot;sub-patterns&quot; through Strings to structure the pattern more, and then construct the final pattern through String concatenation.","body":"Some parenthesis can be removed. And since the regex seems to be used only for validation, we could/should make the groups non-capturing. Furthermore, we can define &quot;sub-patterns&quot; through Strings to structure the pattern more, and then construct the final pattern through String concatenation."},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669154550,"post_id":74539333,"comment_id":131579186,"body_markdown":"all good suggestions - will update the code again :D","body":"all good suggestions - will update the code again :D"},{"owner":{"account_id":11563256,"reputation":401,"user_id":8472357,"display_name":"Hasan Kaan TURAN"},"score":0,"creation_date":1669154565,"post_id":74539333,"comment_id":131579189,"body_markdown":"I tried but still doesn&#39;t work. Can u check answer?","body":"I tried but still doesn&#39;t work. Can u check answer?"},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669155362,"post_id":74539333,"comment_id":131579396,"body_markdown":"Just updated the answer, and tested on my machine","body":"Just updated the answer, and tested on my machine"},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669155633,"post_id":74539333,"comment_id":131579459,"body_markdown":"Sure thing, I enjoyed playing with Java again, it’s been a while &#129315;","body":"Sure thing, I enjoyed playing with Java again, it’s been a while 🤣"},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":1,"creation_date":1669156857,"post_id":74539333,"comment_id":131579774,"body_markdown":"One could split-up all of this even further. [Ideone demo](https://ideone.com/F8J9sb). @YonatanKarp-Rudin feel free to &quot;steal&quot; what you want if you want to add some.","body":"One could split-up all of this even further. <a href=\"https://ideone.com/F8J9sb\" rel=\"nofollow noreferrer\">Ideone demo</a>. @YonatanKarp-Rudin feel free to &quot;steal&quot; what you want if you want to add some."},{"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"score":0,"creation_date":1669156955,"post_id":74539333,"comment_id":131579798,"body_markdown":"I Ike the idea but it also feels a bit over engineered","body":"I Ike the idea but it also feels a bit over engineered"}],"tags":[],"owner":{"account_id":4831718,"reputation":1056,"user_id":3899765,"display_name":"Yonatan Karp-Rudin"},"comment_count":10,"down_vote_count":0,"up_vote_count":4,"is_accepted":true,"score":4,"last_activity_date":1669155335,"creation_date":1669153610,"answer_id":74539333,"question_id":74539243,"body_markdown":"You can use the following pattern for any given range of 2 times in the form of 24h clock:\r\n\r\n    private static final String HOURLY_TIME_PATTERN = &quot;([01][0-9]|2[0-3]):([0-5][0-9])&quot;;\r\n    private static final String TIME_RANGER_PATTERN = HOURLY_TIME_PATTERN + &quot;-&quot; + HOURLY_TIME_PATTERN;\r\n    private static final String PATTERN = &quot;^&quot; + TIME_RANGER_PATTERN + &quot;(,&quot; + TIME_RANGER_PATTERN + &quot;?)*$&quot;;\r\n    private static final Pattern pattern = Pattern.compile(PATTERN);\r\n\r\n    public static void main(String[] args) {\r\n        String input = &quot;09:00-10:00,12:00-14:30,16:00-18:00&quot;;\r\n        if (pattern.matcher(input).matches()) {\r\n            System.out.println(&quot;We have a match!&quot;);\r\n        }\r\n    }\r\n\r\nExplanation:\r\n\r\n- `HOURLY_TIME_PATTERN` is the pattern required for a single hour in a 24h format (e.g. 16:25)\r\n- TIME_RANGER_PATTERN is the pattern to find a single time range \r\n(e.g. 16:25-22:50)\r\n- PATTERN - is the pattern that ensure that we have at least 1 time range, and any other time range must be lead by a comma (we can have zero or more of them)\r\n","title":"Java - How do i find out that a string is in the correct format using pattern matching","body":"<p>You can use the following pattern for any given range of 2 times in the form of 24h clock:</p>\n<pre><code>private static final String HOURLY_TIME_PATTERN = &quot;([01][0-9]|2[0-3]):([0-5][0-9])&quot;;\nprivate static final String TIME_RANGER_PATTERN = HOURLY_TIME_PATTERN + &quot;-&quot; + HOURLY_TIME_PATTERN;\nprivate static final String PATTERN = &quot;^&quot; + TIME_RANGER_PATTERN + &quot;(,&quot; + TIME_RANGER_PATTERN + &quot;?)*$&quot;;\nprivate static final Pattern pattern = Pattern.compile(PATTERN);\n\npublic static void main(String[] args) {\n    String input = &quot;09:00-10:00,12:00-14:30,16:00-18:00&quot;;\n    if (pattern.matcher(input).matches()) {\n        System.out.println(&quot;We have a match!&quot;);\n    }\n}\n</code></pre>\n<p>Explanation:</p>\n<ul>\n<li><code>HOURLY_TIME_PATTERN</code> is the pattern required for a single hour in a 24h format (e.g. 16:25)</li>\n<li>TIME_RANGER_PATTERN is the pattern to find a single time range\n(e.g. 16:25-22:50)</li>\n<li>PATTERN - is the pattern that ensure that we have at least 1 time range, and any other time range must be lead by a comma (we can have zero or more of them)</li>\n</ul>\n"},{"comments":[{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1669155891,"post_id":74539634,"comment_id":131579517,"body_markdown":"This would not validate that two time values are separated by a `&quot; - &quot;`, and it would not validate that two time values are separate by two other time values with a `&quot;, &quot;`. Example: take the 1st (valid) `String` and replace all occurences of `&quot;,&quot;` with `&quot;-&quot;` or vice-versa. The now invalid format will evaluate to `true`.","body":"This would not validate that two time values are separated by a <code>&quot; - &quot;</code>, and it would not validate that two time values are separate by two other time values with a <code>&quot;, &quot;</code>. Example: take the 1st (valid) <code>String</code> and replace all occurences of <code>&quot;,&quot;</code> with <code>&quot;-&quot;</code> or vice-versa. The now invalid format will evaluate to <code>true</code>."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1669156335,"post_id":74539634,"comment_id":131579657,"body_markdown":"@Turing85 Thanks for taking the time to review this. I have updated the answer to meet this requirement.","body":"@Turing85 Thanks for taking the time to review this. I have updated the answer to meet this requirement."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1669156617,"post_id":74539634,"comment_id":131579727,"body_markdown":"Still not correct. String `&quot;09:00-10:00-12:00-14:30,16:00-18:00&quot;` (notice the `&quot;-&quot;` between `&quot;10:00&quot;` and `&quot;12:00&quot;`) evaluates to `true`.","body":"Still not correct. String <code>&quot;09:00-10:00-12:00-14:30,16:00-18:00&quot;</code> (notice the <code>&quot;-&quot;</code> between <code>&quot;10:00&quot;</code> and <code>&quot;12:00&quot;</code>) evaluates to <code>true</code>."},{"owner":{"account_id":5281408,"reputation":18797,"user_id":4216641,"display_name":"Turing85"},"score":0,"creation_date":1669160013,"post_id":74539634,"comment_id":131580403,"body_markdown":"Well... now one could argue whether `&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;` should be valid or not. One way or another, I&#39;d suggest to update the explanation. The original explanation does not really fit the code anymore.","body":"Well... now one could argue whether <code>&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;</code> should be valid or not. One way or another, I&#39;d suggest to update the explanation. The original explanation does not really fit the code anymore."},{"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"score":0,"creation_date":1669160439,"post_id":74539634,"comment_id":131580480,"body_markdown":"@Turing85 As per the question posted, `&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;` is not a valid string.","body":"@Turing85 As per the question posted, <code>&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;</code> is not a valid string."},{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1669177488,"post_id":74539634,"comment_id":131582981,"body_markdown":"This allows for further validating that the times come in order if desired. Like.","body":"This allows for further validating that the times come in order if desired. Like."}],"tags":[],"owner":{"account_id":2179728,"reputation":73077,"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"comment_count":6,"down_vote_count":0,"up_vote_count":6,"is_accepted":false,"score":6,"last_activity_date":1669197120,"creation_date":1669155598,"answer_id":74539634,"question_id":74539243,"body_markdown":"You can check if the string matches the regex, `^(?:(?:\\d{2}:\\d{2}\\-\\d{2}:\\d{2})(?:,(?!$))?)*$`. Note that you do not need to put starts-with (i.e. `^`) and ends-with (i.e. `$`) when using [`String#matches`](https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches(java.lang.String)).\r\n\r\nIf the string passes this validation, split the string on `,` and `-` and then use java.time API to validate the individual time strings.\r\n\r\n**Demo**:\r\n\r\n    import java.time.LocalTime;\r\n    import java.time.format.DateTimeParseException;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            // Test\r\n            System.out.println(hasCorrectFormat(&quot;09:00-10:00,12:00-14:30,16:00-18:00&quot;)); // true\r\n            System.out.println(hasCorrectFormat(&quot;09:00-10:00,12:00-1:30,16:00-18:00&quot;)); // false -&gt; 1:30 is not in desired\r\n                                                                                        // format\r\n            System.out.println(hasCorrectFormat(&quot;09:00-10:00&quot;)); // true\r\n            System.out.println(hasCorrectFormat(&quot;09:00 10:00&quot;)); // false\r\n            System.out.println(hasCorrectFormat(&quot;09:00-10:00,09:00 10:00&quot;)); // false\r\n            System.out.println(hasCorrectFormat(&quot;09:00-10:00-12:00-14:30,16:00-18:00&quot;)); // false\r\n            System.out.println(hasCorrectFormat(&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;)); // false\r\n        }\r\n    \r\n        static boolean hasCorrectFormat(String strTimeRanges) {\r\n            if (!strTimeRanges.matches(&quot;(?:(?:\\\\d{2}:\\\\d{2}\\\\-\\\\d{2}:\\\\d{2})(?:,(?!$))?)*&quot;))\r\n                return false;\r\n            String[] times = strTimeRanges.split(&quot;[-,]&quot;);\r\n            for (String time : times) {\r\n                try {\r\n                    LocalTime.parse(time);\r\n                } catch (DateTimeParseException e) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    true\r\n    false\r\n    true\r\n    false\r\n    false\r\n    false\r\n    false\r\n\r\n[Regex demo](https://regex101.com/r/mGxUbc/1)\r\n\r\nLearn more about the modern Date-Time API from **[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**.\r\n\r\n---\r\n\r\nThe valuable [comment from Ole V.V.](https://stackoverflow.com/questions/74539243/java-how-do-i-find-out-that-a-string-is-in-the-correct-format-using-pattern-ma/74539634#comment131582981_74539634) has prompted me to extend my original answer to show how one can use java.time API to compare the times in individual time ranges. I hope this gives enough hints for learners to extend the solution further based on the complexity of the requirements.\r\n\r\n    import java.time.LocalTime;\r\n    import java.time.format.DateTimeParseException;\r\n    \r\n    public class Main {\r\n        public static void main(String[] args) {\r\n            // Test\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,12:00-14:30,16:00-18:00&quot;)); // true\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,12:00-1:30,16:00-18:00&quot;)); // false -&gt; 1:30\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;10:00-09:00,12:00-14:30,16:00-18:00&quot;)); // false -&gt; 10:00-09:00\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00&quot;)); // true\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;09:00 10:00&quot;)); // false\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,09:00 10:00&quot;)); // false\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00-12:00-14:30,16:00-18:00&quot;)); // false\r\n            System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;)); // false\r\n        }\r\n    \r\n        static boolean hasCorrectFormatAndRanges(String strTimeRanges) {\r\n            if (!strTimeRanges.matches(&quot;(?:(?:\\\\d{2}:\\\\d{2}\\\\-\\\\d{2}:\\\\d{2})(?:,(?!$))?)*&quot;))\r\n                return false;\r\n            String[] timeRanges = strTimeRanges.split(&quot;,&quot;);\r\n            for (String timeRange : timeRanges) {\r\n                String[] times = timeRange.split(&quot;-&quot;);\r\n                try {\r\n                    if (LocalTime.parse(times[1]).isBefore(LocalTime.parse(times[0])))\r\n                        return false;\r\n                } catch (DateTimeParseException e) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        }\r\n    }\r\n\r\n**Output**:\r\n\r\n    true\r\n    false\r\n    false\r\n    true\r\n    false\r\n    false\r\n    false\r\n    false","title":"Java - How do i find out that a string is in the correct format using pattern matching","body":"<p>You can check if the string matches the regex, <code>^(?:(?:\\d{2}:\\d{2}\\-\\d{2}:\\d{2})(?:,(?!$))?)*$</code>. Note that you do not need to put starts-with (i.e. <code>^</code>) and ends-with (i.e. <code>$</code>) when using <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#matches(java.lang.String)\" rel=\"nofollow noreferrer\"><code>String#matches</code></a>.</p>\n<p>If the string passes this validation, split the string on <code>,</code> and <code>-</code> and then use java.time API to validate the individual time strings.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.time.LocalTime;\nimport java.time.format.DateTimeParseException;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        System.out.println(hasCorrectFormat(&quot;09:00-10:00,12:00-14:30,16:00-18:00&quot;)); // true\n        System.out.println(hasCorrectFormat(&quot;09:00-10:00,12:00-1:30,16:00-18:00&quot;)); // false -&gt; 1:30 is not in desired\n                                                                                    // format\n        System.out.println(hasCorrectFormat(&quot;09:00-10:00&quot;)); // true\n        System.out.println(hasCorrectFormat(&quot;09:00 10:00&quot;)); // false\n        System.out.println(hasCorrectFormat(&quot;09:00-10:00,09:00 10:00&quot;)); // false\n        System.out.println(hasCorrectFormat(&quot;09:00-10:00-12:00-14:30,16:00-18:00&quot;)); // false\n        System.out.println(hasCorrectFormat(&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;)); // false\n    }\n\n    static boolean hasCorrectFormat(String strTimeRanges) {\n        if (!strTimeRanges.matches(&quot;(?:(?:\\\\d{2}:\\\\d{2}\\\\-\\\\d{2}:\\\\d{2})(?:,(?!$))?)*&quot;))\n            return false;\n        String[] times = strTimeRanges.split(&quot;[-,]&quot;);\n        for (String time : times) {\n            try {\n                LocalTime.parse(time);\n            } catch (DateTimeParseException e) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>true\nfalse\ntrue\nfalse\nfalse\nfalse\nfalse\n</code></pre>\n<p><a href=\"https://regex101.com/r/mGxUbc/1\" rel=\"nofollow noreferrer\">Regex demo</a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<hr />\n<p>The valuable <a href=\"https://stackoverflow.com/questions/74539243/java-how-do-i-find-out-that-a-string-is-in-the-correct-format-using-pattern-ma/74539634#comment131582981_74539634\">comment from Ole V.V.</a> has prompted me to extend my original answer to show how one can use java.time API to compare the times in individual time ranges. I hope this gives enough hints for learners to extend the solution further based on the complexity of the requirements.</p>\n<pre><code>import java.time.LocalTime;\nimport java.time.format.DateTimeParseException;\n\npublic class Main {\n    public static void main(String[] args) {\n        // Test\n        System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,12:00-14:30,16:00-18:00&quot;)); // true\n        System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,12:00-1:30,16:00-18:00&quot;)); // false -&gt; 1:30\n        System.out.println(hasCorrectFormatAndRanges(&quot;10:00-09:00,12:00-14:30,16:00-18:00&quot;)); // false -&gt; 10:00-09:00\n        System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00&quot;)); // true\n        System.out.println(hasCorrectFormatAndRanges(&quot;09:00 10:00&quot;)); // false\n        System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,09:00 10:00&quot;)); // false\n        System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00-12:00-14:30,16:00-18:00&quot;)); // false\n        System.out.println(hasCorrectFormatAndRanges(&quot;09:00-10:00,12:00-14:30,16:00-18:00,&quot;)); // false\n    }\n\n    static boolean hasCorrectFormatAndRanges(String strTimeRanges) {\n        if (!strTimeRanges.matches(&quot;(?:(?:\\\\d{2}:\\\\d{2}\\\\-\\\\d{2}:\\\\d{2})(?:,(?!$))?)*&quot;))\n            return false;\n        String[] timeRanges = strTimeRanges.split(&quot;,&quot;);\n        for (String timeRange : timeRanges) {\n            String[] times = timeRange.split(&quot;-&quot;);\n            try {\n                if (LocalTime.parse(times[1]).isBefore(LocalTime.parse(times[0])))\n                    return false;\n            } catch (DateTimeParseException e) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>true\nfalse\nfalse\ntrue\nfalse\nfalse\nfalse\nfalse\n</code></pre>\n"}],"owner":{"account_id":11586662,"reputation":21,"user_id":8488586,"display_name":"Valorous33 "},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":91,"favorite_count":0,"down_vote_count":1,"up_vote_count":2,"accepted_answer_id":74539333,"answer_count":2,"score":1,"last_activity_date":1669197120,"creation_date":1669153111,"question_id":74539243,"body_markdown":"My string value;\r\n\r\n`09:00-10:00,12:00-14:30,16:00-18:00` (this string repeats time intervals n times like this)\r\n\r\nand I want to find out that a string is in the correct format using pattern matching;\r\n\r\n```\r\nPattern.matches(&quot;&lt;Pattern Here&gt;&quot;, stringValue);\r\n```\r\n\r\nis it possible?\r\n\r\nI tried;\r\n\r\n```\r\nPattern.matches(&quot;^[0-9:0-9-0-9:0-9,]+$&quot;, value);\r\n```\r\nBut doesn&#39;t work properly","title":"Java - How do i find out that a string is in the correct format using pattern matching","body":"<p>My string value;</p>\n<p><code>09:00-10:00,12:00-14:30,16:00-18:00</code> (this string repeats time intervals n times like this)</p>\n<p>and I want to find out that a string is in the correct format using pattern matching;</p>\n<pre><code>Pattern.matches(&quot;&lt;Pattern Here&gt;&quot;, stringValue);\n</code></pre>\n<p>is it possible?</p>\n<p>I tried;</p>\n<pre><code>Pattern.matches(&quot;^[0-9:0-9-0-9:0-9,]+$&quot;, value);\n</code></pre>\n<p>But doesn't work properly</p>\n"},{"tags":["java","sockets","ssh","jsch","rsocket"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669142861,"post_id":74537605,"comment_id":131575870,"body_markdown":"Please state your [goal](https://technojeeves.com/index.php/aliasjava1/15-smart-questions). Those commands don&#39;t really make much sense","body":"Please state your <a href=\"https://technojeeves.com/index.php/aliasjava1/15-smart-questions\" rel=\"nofollow noreferrer\">goal</a>. Those commands don&#39;t really make much sense"},{"owner":{"account_id":5049794,"reputation":631,"user_id":4054720,"display_name":"Ben Borchard"},"score":0,"creation_date":1669143080,"post_id":74537605,"comment_id":131575942,"body_markdown":"It looks like your command contains `sleep 2`, which means the fastest this program could possibly run in is 2 seconds, not sure if that is something you are factoring in when considering performance","body":"It looks like your command contains <code>sleep 2</code>, which means the fastest this program could possibly run in is 2 seconds, not sure if that is something you are factoring in when considering performance"},{"owner":{"account_id":5809915,"reputation":1,"user_id":4581355,"display_name":"Balaji Podapati"},"score":0,"creation_date":1669148826,"post_id":74537605,"comment_id":131577655,"body_markdown":"I even tried with 1s too. But 1S itself is too long and making it 0 is not working.","body":"I even tried with 1s too. But 1S itself is too long and making it 0 is not working."},{"owner":{"account_id":5809915,"reputation":1,"user_id":4581355,"display_name":"Balaji Podapati"},"score":0,"creation_date":1669148900,"post_id":74537605,"comment_id":131577676,"body_markdown":"@g00se I am seeking help in finding a better solution than this rudimentary one that I have.","body":"@g00se I am seeking help in finding a better solution than this rudimentary one that I have."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669149418,"post_id":74537605,"comment_id":131577821,"body_markdown":"That doesn&#39;t tell me what your [goal](https://technojeeves.com/index.php/aliasjava1/15-smart-questions)\n is","body":"That doesn&#39;t tell me what your <a href=\"https://technojeeves.com/index.php/aliasjava1/15-smart-questions\" rel=\"nofollow noreferrer\">goal</a>  is"},{"owner":{"account_id":5809915,"reputation":1,"user_id":4581355,"display_name":"Balaji Podapati"},"score":0,"creation_date":1669149770,"post_id":74537605,"comment_id":131577918,"body_markdown":"OK, My goal is to send a request and receive the response via SSH.","body":"OK, My goal is to send a request and receive the response via SSH."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669158297,"post_id":74537605,"comment_id":131580058,"body_markdown":"Please say what you think your commands are doing","body":"Please say what you think your commands are doing"},{"owner":{"account_id":2805962,"reputation":18615,"user_id":2413201,"accept_rate":88,"display_name":"Armali"},"score":0,"creation_date":1669196737,"post_id":74537605,"comment_id":131587621,"body_markdown":"It looks like the goal is an SSH tunnel to `targetPOrt`.","body":"It looks like the goal is an SSH tunnel to <code>targetPOrt</code>."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669197761,"post_id":74537605,"comment_id":131588000,"body_markdown":"Tunnelling telnet you mean? If so that&#39;s probably not the way it should be done.","body":"Tunnelling telnet you mean? If so that&#39;s probably not the way it should be done."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669198196,"post_id":74537605,"comment_id":131588158,"body_markdown":"If you are right then [this](http://www.beanizer.org/site/index.php/en/Articles/Java-ssh-tunneling-with-jsch.html)","body":"If you are right then <a href=\"http://www.beanizer.org/site/index.php/en/Articles/Java-ssh-tunneling-with-jsch.html\" rel=\"nofollow noreferrer\">this</a>"}],"owner":{"account_id":5809915,"reputation":1,"user_id":4581355,"display_name":"Balaji Podapati"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":49,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"closed_date":1669705680,"answer_count":0,"score":0,"last_activity_date":1669196833,"creation_date":1669142508,"question_id":74537605,"body_markdown":"I have a legacy app the needs to connect to a remove server on port 22 to establish the connection with userName and PWD. Then need to connect to a different port to send a request and receive response and close the session.  At the moment I am using JSCH library to create a session and a channel then using Telnet command to submit request and receive response. But this call is taking 2-5s and doesn&#39;t scale well also. \r\n\r\nHere is the sample code that I have:\r\n\r\n\tpublic static void telnetConnection(String payload, int targetPOrt) throws JSchException, Exception {\r\n\t\t// Session session = null;\r\n\t\tDataOutputStream dataOut = null;\r\n\t\tDataInputStream dataIn = null;\r\n\t\tBufferedReader reader = null;\r\n\t\tChannel channel = null;\r\n\t\tStopWatch stopWatch = new StopWatch();\r\n\t\tstopWatch.start();\r\n\t\tSession JSCH_SESSION = null;\r\n\t\ttry {\r\n\t\t\tJSch jsch = new JSch();\r\n\t\t\tJSCH_SESSION = jsch.getSession(userName, HOST, 22);\r\n\t\t\tJSCH_SESSION.setPassword(password);\r\n\t\t\t// It must not be recommended, but if you want to skip host-userName check,\r\n\t\t\tJSCH_SESSION.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\r\n\t\t\tJSCH_SESSION.connect(30000);\r\n\t\t\tJSCH_SESSION.setServerAliveInterval(2000);\r\n\t\t\tJSCH_SESSION.sendKeepAliveMsg();\r\n\t\t\tStringBuffer buffer = new StringBuffer(&quot; (&quot;);\r\n\t\t\tbuffer.append(&quot;echo &quot;);\r\n\t\t\tbuffer.append(&quot;\\&#39;&quot; + payload + &quot;&#39;&quot;);\r\n\t\t\tbuffer.append(&quot; &amp;&amp; echo &amp;&amp; sleep 2 ) | &quot;);\r\n\t\t\tbuffer.append(&quot; telnet localhost &quot; + targetPOrt + &quot; \\r\\n &quot;);\r\n\t\t\tchannel = JSCH_SESSION.openChannel(&quot;shell&quot;);\r\n\t\t\tchannel.connect(30000);\r\n\t\t\tdataOut = new DataOutputStream(channel.getOutputStream());\r\n\t\t\tSystem.out.println(&quot;Starting telnet connection...&quot;);\r\n\t\t\tString command = buffer.toString();\r\n\t\t\tdataOut.writeBytes(&quot; bash \\r\\n&quot;);\r\n\t\t\tdataOut.flush();\r\n\t\t\tdataIn = new DataInputStream(channel.getInputStream());\r\n\t\t\treader = new BufferedReader(new InputStreamReader(dataIn));\r\n\t\t\tdataOut.writeBytes(command);\r\n\t\t\tdataOut.flush();\r\n\t\t\tString line = reader.readLine();\r\n\t\t\tString result = line + &quot;\\n&quot;;\r\n\t\t\twhile (!(line = reader.readLine()).contains(&quot;Connection closed by foreign host&quot;)) {\r\n\t\t\t\tresult += line + &quot;\\n&quot;;\r\n\r\n\t\t\t}\r\n\r\n\t\t\thandleResponse(result);\r\n\r\n\t\t} catch (Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t} finally {\r\n\r\n\t\t\tif (dataIn != null) {\r\n\t\t\t\tdataIn.close();\r\n\t\t\t}\r\n\t\t\tif (dataOut != null) {\r\n\t\t\t\tdataOut.close();\r\n\t\t\t}\r\n\t\t\tif (channel != null) {\r\n\t\t\t\tchannel.disconnect();\r\n\t\t\t}\r\n\r\n\t\t\tif (JSCH_SESSION != null) {\r\n\t\t\t\tJSCH_SESSION.disconnect();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\nTelnet connection command is working but doesn&#39;t scale well and is taking too long. I even cached the session and try to reuse it w/o creating for every request by just closing the Readers and channel for every request. I am wondering if there is any other API that I can use to make this work. ","title":"SSH on to a remote server with Credentials from Java app for Request &amp; Response","body":"<p>I have a legacy app the needs to connect to a remove server on port 22 to establish the connection with userName and PWD. Then need to connect to a different port to send a request and receive response and close the session.  At the moment I am using JSCH library to create a session and a channel then using Telnet command to submit request and receive response. But this call is taking 2-5s and doesn't scale well also.</p>\n<p>Here is the sample code that I have:</p>\n<pre><code>public static void telnetConnection(String payload, int targetPOrt) throws JSchException, Exception {\n    // Session session = null;\n    DataOutputStream dataOut = null;\n    DataInputStream dataIn = null;\n    BufferedReader reader = null;\n    Channel channel = null;\n    StopWatch stopWatch = new StopWatch();\n    stopWatch.start();\n    Session JSCH_SESSION = null;\n    try {\n        JSch jsch = new JSch();\n        JSCH_SESSION = jsch.getSession(userName, HOST, 22);\n        JSCH_SESSION.setPassword(password);\n        // It must not be recommended, but if you want to skip host-userName check,\n        JSCH_SESSION.setConfig(&quot;StrictHostKeyChecking&quot;, &quot;no&quot;);\n        JSCH_SESSION.connect(30000);\n        JSCH_SESSION.setServerAliveInterval(2000);\n        JSCH_SESSION.sendKeepAliveMsg();\n        StringBuffer buffer = new StringBuffer(&quot; (&quot;);\n        buffer.append(&quot;echo &quot;);\n        buffer.append(&quot;\\'&quot; + payload + &quot;'&quot;);\n        buffer.append(&quot; &amp;&amp; echo &amp;&amp; sleep 2 ) | &quot;);\n        buffer.append(&quot; telnet localhost &quot; + targetPOrt + &quot; \\r\\n &quot;);\n        channel = JSCH_SESSION.openChannel(&quot;shell&quot;);\n        channel.connect(30000);\n        dataOut = new DataOutputStream(channel.getOutputStream());\n        System.out.println(&quot;Starting telnet connection...&quot;);\n        String command = buffer.toString();\n        dataOut.writeBytes(&quot; bash \\r\\n&quot;);\n        dataOut.flush();\n        dataIn = new DataInputStream(channel.getInputStream());\n        reader = new BufferedReader(new InputStreamReader(dataIn));\n        dataOut.writeBytes(command);\n        dataOut.flush();\n        String line = reader.readLine();\n        String result = line + &quot;\\n&quot;;\n        while (!(line = reader.readLine()).contains(&quot;Connection closed by foreign host&quot;)) {\n            result += line + &quot;\\n&quot;;\n\n        }\n\n        handleResponse(result);\n\n    } catch (Exception e) {\n        e.printStackTrace();\n    } finally {\n\n        if (dataIn != null) {\n            dataIn.close();\n        }\n        if (dataOut != null) {\n            dataOut.close();\n        }\n        if (channel != null) {\n            channel.disconnect();\n        }\n\n        if (JSCH_SESSION != null) {\n            JSCH_SESSION.disconnect();\n        }\n    }\n\n}\n</code></pre>\n<p>Telnet connection command is working but doesn't scale well and is taking too long. I even cached the session and try to reuse it w/o creating for every request by just closing the Readers and channel for every request. I am wondering if there is any other API that I can use to make this work.</p>\n"},{"tags":["java","performance","data-structures"],"comments":[{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669197087,"post_id":74544707,"comment_id":131587748,"body_markdown":"Map keys are just references to objects on the heap so if the person instance already exists it&#39;s just an additional reference. The integer for the id might be a new object if the person&#39;s id is just an `int`. However, I would not bother with memory questions like this unless you _really_ have a problem and then just changing the key type would probably not be sufficient. ...","body":"Map keys are just references to objects on the heap so if the person instance already exists it&#39;s just an additional reference. The integer for the id might be a new object if the person&#39;s id is just an <code>int</code>. However, I would not bother with memory questions like this unless you <i>really</i> have a problem and then just changing the key type would probably not be sufficient. ..."},{"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"score":0,"creation_date":1669197107,"post_id":74544707,"comment_id":131587753,"body_markdown":"This is not generally answerable. It depends on the implementation of equals and hashCode of the object you use as a key.","body":"This is not generally answerable. It depends on the implementation of equals and hashCode of the object you use as a key."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":2,"creation_date":1669197174,"post_id":74544707,"comment_id":131587787,"body_markdown":"I&#39;d rather think about practical development questions: Are any of the fields used by `Person.hashCode()` and `Person.equals()` mutable? Yes: don&#39;t use `Person` as a key. Does especially `equals()` need to check more than the id? Yes: don&#39;t use `Person` as a key. Do you have situations where you only have a person&#39;s id and still want to retrieve the data? Yes: better use the id as the key rather than having to lookup a person or create a dummy just to compare the ids.","body":"I&#39;d rather think about practical development questions: Are any of the fields used by <code>Person.hashCode()</code> and <code>Person.equals()</code> mutable? Yes: don&#39;t use <code>Person</code> as a key. Does especially <code>equals()</code> need to check more than the id? Yes: don&#39;t use <code>Person</code> as a key. Do you have situations where you only have a person&#39;s id and still want to retrieve the data? Yes: better use the id as the key rather than having to lookup a person or create a dummy just to compare the ids."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669197403,"post_id":74544707,"comment_id":131587883,"body_markdown":"Btw, &quot;Is it &#39;cheaper&#39; to return a map using the smaller key (int) but perform Person.getId in the calling class when retrieving each persons value from the map?&quot; - I&#39;d say that doesn&#39;t even matter. The resulting instructions would probably be very similar which means we&#39;re probably talking about a difference of 1 or 2 CPU instructions.","body":"Btw, &quot;Is it &#39;cheaper&#39; to return a map using the smaller key (int) but perform Person.getId in the calling class when retrieving each persons value from the map?&quot; - I&#39;d say that doesn&#39;t even matter. The resulting instructions would probably be very similar which means we&#39;re probably talking about a difference of 1 or 2 CPU instructions."},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1669197405,"post_id":74544707,"comment_id":131587885,"body_markdown":"One advantage of using `Person` is that it makes it clear what the key is, so it&#39;s easier for other people to understand your program.","body":"One advantage of using <code>Person</code> is that it makes it clear what the key is, so it&#39;s easier for other people to understand your program."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669197436,"post_id":74544707,"comment_id":131587893,"body_markdown":"@tgdavies yes, thanks for spotting this. corrected :)","body":"@tgdavies yes, thanks for spotting this. corrected :)"},{"owner":{"account_id":6520,"reputation":10523,"user_id":11002,"accept_rate":75,"display_name":"tgdavies"},"score":0,"creation_date":1669197552,"post_id":74544707,"comment_id":131587937,"body_markdown":"Since you are doing a DB query, that will dominate performance to the point that the performance of the Map is likely to be irrelevant.","body":"Since you are doing a DB query, that will dominate performance to the point that the performance of the Map is likely to be irrelevant."}],"owner":{"account_id":1024210,"reputation":643,"user_id":1085370,"accept_rate":53,"display_name":"Ivana"},"comment_count":7,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":92,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669196728,"creation_date":1669196728,"question_id":74544707,"body_markdown":"This is a somewhat academic question about java efficiency wrt collections. Assume there are two classes SearchForm and Manager.\r\nSearchForm has a Collection of Persons and calls Manager to find out if a Person has a subscription, it will then iterate over persons to find their subscription status.\r\nObject Person has an int id (Person.getId()).\r\nWhich is more energy-efficient in Java:\r\n\r\n    Map&lt;Integer, Boolean&gt; MapPersonSubscription(Collection&lt;Person&gt; persons, Date date, int subscriptionId);\r\n\r\n    Map&lt;Person, Boolean&gt; MapPersonSubscription(Collection&lt;Person&gt; persons, Date date, int subscriptionId);\r\n\r\nThe collection of Persons is already in memory, does it cost extra (in some way) to use its elements as Map keys in the returned map?\r\nIs it &#39;cheaper&#39; to return a map using the smaller key (int) but perform Person.getId in the calling class when retrieving each persons value from the map?\r\n\r\nThis is an toy example, assume Manager needs Person, not just Person.getId to find the subscription and it is preferable to query a subsciption for all persons at once because of the underlying db query.\r\n\r\nRelated question: https://stackoverflow.com/questions/16162453/most-efficient-key-object-type-in-a-hash-map","title":"Efficient map: use Object or its id for key?","body":"<p>This is a somewhat academic question about java efficiency wrt collections. Assume there are two classes SearchForm and Manager.\nSearchForm has a Collection of Persons and calls Manager to find out if a Person has a subscription, it will then iterate over persons to find their subscription status.\nObject Person has an int id (Person.getId()).\nWhich is more energy-efficient in Java:</p>\n<pre><code>Map&lt;Integer, Boolean&gt; MapPersonSubscription(Collection&lt;Person&gt; persons, Date date, int subscriptionId);\n\nMap&lt;Person, Boolean&gt; MapPersonSubscription(Collection&lt;Person&gt; persons, Date date, int subscriptionId);\n</code></pre>\n<p>The collection of Persons is already in memory, does it cost extra (in some way) to use its elements as Map keys in the returned map?\nIs it 'cheaper' to return a map using the smaller key (int) but perform Person.getId in the calling class when retrieving each persons value from the map?</p>\n<p>This is an toy example, assume Manager needs Person, not just Person.getId to find the subscription and it is preferable to query a subsciption for all persons at once because of the underlying db query.</p>\n<p>Related question: <a href=\"https://stackoverflow.com/questions/16162453/most-efficient-key-object-type-in-a-hash-map\">Most efficient key object type in a hash map?</a></p>\n"},{"tags":["java","spring-boot","google-cloud-platform","scheduled-tasks","spring-scheduled"],"comments":[{"owner":{"account_id":15760814,"reputation":68973,"user_id":11372593,"display_name":"guillaume blaquiere"},"score":0,"creation_date":1669215382,"post_id":74544617,"comment_id":131594541,"body_markdown":"Do you run your code on Compute Engine or on something else?","body":"Do you run your code on Compute Engine or on something else?"},{"owner":{"account_id":2486870,"reputation":685,"user_id":2165146,"display_name":"muhammed ozbilici"},"score":0,"creation_date":1669224210,"post_id":74544617,"comment_id":131598033,"body_markdown":"first of all, don&#39;t use @SneakyThrows because if some exception happeden, you need to catch and log those.","body":"first of all, don&#39;t use @SneakyThrows because if some exception happeden, you need to catch and log those."}],"owner":{"account_id":23459045,"reputation":11,"user_id":17514132,"display_name":"FNA"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":80,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669196569,"creation_date":1669196329,"question_id":74544617,"body_markdown":"I have a scheduled job and this job will run once per day. Database data update in the work to be done. After the job starts, it sends a request to the API, the database version number comes from the request, compares it with the version we have, if it is different, it downloads the new version file and puts it in a list. There is a separator data in each line of the list, and according to this data, it prints it to another list for each data. When this writing is finished, it prints the lists separated by data to the database. When I do this job locally, it works without any problem, but when I upload it to GCP, the job stops working and the program recompiles. This update takes about 3 hours (this is normal since the file size is large).\r\n\r\nI don&#39;t know what to do as it doesn&#39;t give any error either. Please tell me what should i do.\r\n\r\nhere is the scheduler\r\n```\r\n\r\nprivate static final String time = &quot;00 50 09 * *  ?&quot;;\r\n\r\n@SneakyThrows\r\n@Scheduled(cron = time)\r\npublic void reportCurrentTime() {\r\n\r\n        try {\r\n OkHttpClient client = new OkHttpClient().newBuilder()\r\n                        .build();\r\n                MediaType mediaType = MediaType.parse(&quot;text/plain&quot;);\r\n                RequestBody body = RequestBody.create(mediaType, &quot;&quot;);\r\n                Request request = new Request.Builder()\r\n                        .url(&quot;https://esolutions.dpd.com/partnerloesungen/rdbdistributionservice.aspx&quot;)\r\n                        .method(&quot;POST&quot;, body)\r\n                        .addHeader(&quot;Cookie&quot;, &quot;ASP.NET_SessionId=5iybxohri2b3itiauf23kolg&quot;)\r\n                        .build();\r\n                Response response = client.newCall(request).execute();\r\n\r\n                String[] data = response.body().string().split(&quot;:&quot;);\r\n                String ver2 = data[1];\r\n                String vers = ver2.substring(1, 9);\r\n\r\n                LOGGER.info(&quot; Database version number is: &quot; + vers);\r\n\r\n                if (!vers.equals(version) {\r\n\r\n                   OkHttpClient client1 = new OkHttpClient().newBuilder()\r\n                            .build();\r\n                    MediaType mediaType1 = MediaType.parse(&quot;text/plain&quot;);\r\n                    RequestBody body1 = RequestBody.create(mediaType1, &quot;&quot;);\r\n                    Request request1 = new Request.Builder()\r\n                            .url(&quot;https://esolutions.dpd.com/partnerloesungen/rdbdistributionservice.aspx?version=&quot; + vers)\r\n                            .method(&quot;POST&quot;, body1)\r\n                            .addHeader(&quot;Cookie&quot;, &quot;ASP.NET_SessionId=44dxexdxass5mtf00udjfwns&quot;)\r\n                            .build();\r\n                    Response response1 = client1.newCall(request1).execute();\r\n\r\n                    byte[] data1 = response1.body().bytes();\r\n//I&#39;m converting here\r\nserviceDBUpdate.createRoutes(baos.toString());\r\n```\r\nThis is job\r\n```\r\n@SneakyThrows\r\n@Transactional\r\npublic void createRoutes(String routesFile) {\r\n\r\n    LOGGER.info(&quot;Database Update is starting&quot;);\r\n\r\n    ArrayList&lt;String&gt; routesList =  new ArrayList&lt;String&gt;(Arrays.asList(routesFile.split(&quot;\\r\\n&quot;)));\r\n\r\n    try {\r\n        LOGGER.info(&quot;Data is listed&quot;);\r\n        routesList.forEach((row) -&gt; {\r\n            String[] parts = row.split(&quot;\\\\;&quot;, -1);\r\n   \r\n            if (parts[0].equals(&quot;%v&amp;&quot;)) {\r\n                LOGGER.info(&quot;add version&quot;);\r\n                version.setVersionnumber(Strings.emptyToNull(parts[1]));\r\n                version.setValidfrom(Strings.emptyToNull(parts[2]));\r\n                version.setValidto(Strings.emptyToNull(parts[3]));\r\n                version.setBarcodeid(Strings.emptyToNull(parts[4]));\r\n                versions.add(version);\r\n             }//There are many more lists like this \r\n});\r\nLOGGER.info(&quot;Data read finish&quot;);\r\n\r\nif (!versions.isEmpty()) {\r\n    LOGGER.info(&quot;version table is going to clean&quot;);\r\n    truncateRoutesTable();\r\n    versionRepository.save(versions);\r\n    versionRepository.flush();\r\n    LOGGER.info(&quot;Version table updated&quot;);\r\n}\r\n}\r\n\r\n@Transactional\r\npublic void truncateRoutesTable() {\r\n    LOGGER.info(&quot;Cleaning start vor version table 1&quot;);\r\n    Query truncateRoutesTable = em.createNativeQuery(queryTruncateRoutesTable);\r\n    truncateRoutesTable.executeUpdate();\r\n    LOGGER.info(&quot;Cleaning of old data in version tables is finished&quot;);\r\n}\r\n```\r\n\r\nThe logs I placed are for testing purposes. Each time the job starts running, the last log written is different. But in general, it cannot proceed beyond printing the list into separate lists. I haven&#39;t seen the LOGGER.info(&quot;Data read finish&quot;); log yet.\r\n\r\n\r\n\r\n\r\n","title":"Spring boot @Scheduled stops working on a long job","body":"<p>I have a scheduled job and this job will run once per day. Database data update in the work to be done. After the job starts, it sends a request to the API, the database version number comes from the request, compares it with the version we have, if it is different, it downloads the new version file and puts it in a list. There is a separator data in each line of the list, and according to this data, it prints it to another list for each data. When this writing is finished, it prints the lists separated by data to the database. When I do this job locally, it works without any problem, but when I upload it to GCP, the job stops working and the program recompiles. This update takes about 3 hours (this is normal since the file size is large).</p>\n<p>I don't know what to do as it doesn't give any error either. Please tell me what should i do.</p>\n<p>here is the scheduler</p>\n<pre><code>\nprivate static final String time = &quot;00 50 09 * *  ?&quot;;\n\n@SneakyThrows\n@Scheduled(cron = time)\npublic void reportCurrentTime() {\n\n        try {\n OkHttpClient client = new OkHttpClient().newBuilder()\n                        .build();\n                MediaType mediaType = MediaType.parse(&quot;text/plain&quot;);\n                RequestBody body = RequestBody.create(mediaType, &quot;&quot;);\n                Request request = new Request.Builder()\n                        .url(&quot;https://esolutions.dpd.com/partnerloesungen/rdbdistributionservice.aspx&quot;)\n                        .method(&quot;POST&quot;, body)\n                        .addHeader(&quot;Cookie&quot;, &quot;ASP.NET_SessionId=5iybxohri2b3itiauf23kolg&quot;)\n                        .build();\n                Response response = client.newCall(request).execute();\n\n                String[] data = response.body().string().split(&quot;:&quot;);\n                String ver2 = data[1];\n                String vers = ver2.substring(1, 9);\n\n                LOGGER.info(&quot; Database version number is: &quot; + vers);\n\n                if (!vers.equals(version) {\n\n                   OkHttpClient client1 = new OkHttpClient().newBuilder()\n                            .build();\n                    MediaType mediaType1 = MediaType.parse(&quot;text/plain&quot;);\n                    RequestBody body1 = RequestBody.create(mediaType1, &quot;&quot;);\n                    Request request1 = new Request.Builder()\n                            .url(&quot;https://esolutions.dpd.com/partnerloesungen/rdbdistributionservice.aspx?version=&quot; + vers)\n                            .method(&quot;POST&quot;, body1)\n                            .addHeader(&quot;Cookie&quot;, &quot;ASP.NET_SessionId=44dxexdxass5mtf00udjfwns&quot;)\n                            .build();\n                    Response response1 = client1.newCall(request1).execute();\n\n                    byte[] data1 = response1.body().bytes();\n//I'm converting here\nserviceDBUpdate.createRoutes(baos.toString());\n</code></pre>\n<p>This is job</p>\n<pre><code>@SneakyThrows\n@Transactional\npublic void createRoutes(String routesFile) {\n\n    LOGGER.info(&quot;Database Update is starting&quot;);\n\n    ArrayList&lt;String&gt; routesList =  new ArrayList&lt;String&gt;(Arrays.asList(routesFile.split(&quot;\\r\\n&quot;)));\n\n    try {\n        LOGGER.info(&quot;Data is listed&quot;);\n        routesList.forEach((row) -&gt; {\n            String[] parts = row.split(&quot;\\\\;&quot;, -1);\n   \n            if (parts[0].equals(&quot;%v&amp;&quot;)) {\n                LOGGER.info(&quot;add version&quot;);\n                version.setVersionnumber(Strings.emptyToNull(parts[1]));\n                version.setValidfrom(Strings.emptyToNull(parts[2]));\n                version.setValidto(Strings.emptyToNull(parts[3]));\n                version.setBarcodeid(Strings.emptyToNull(parts[4]));\n                versions.add(version);\n             }//There are many more lists like this \n});\nLOGGER.info(&quot;Data read finish&quot;);\n\nif (!versions.isEmpty()) {\n    LOGGER.info(&quot;version table is going to clean&quot;);\n    truncateRoutesTable();\n    versionRepository.save(versions);\n    versionRepository.flush();\n    LOGGER.info(&quot;Version table updated&quot;);\n}\n}\n\n@Transactional\npublic void truncateRoutesTable() {\n    LOGGER.info(&quot;Cleaning start vor version table 1&quot;);\n    Query truncateRoutesTable = em.createNativeQuery(queryTruncateRoutesTable);\n    truncateRoutesTable.executeUpdate();\n    LOGGER.info(&quot;Cleaning of old data in version tables is finished&quot;);\n}\n</code></pre>\n<p>The logs I placed are for testing purposes. Each time the job starts running, the last log written is different. But in general, it cannot proceed beyond printing the list into separate lists. I haven't seen the LOGGER.info(&quot;Data read finish&quot;); log yet.</p>\n"},{"tags":["java","json","parsing"],"comments":[{"owner":{"account_id":139432,"reputation":11363,"user_id":345027,"accept_rate":72,"display_name":"king_nak"},"score":0,"creation_date":1669197394,"post_id":74542622,"comment_id":131587879,"body_markdown":"What you mean you can&#39;t access it? Do you get an error (if so please provide exact error message)? No output?","body":"What you mean you can&#39;t access it? Do you get an error (if so please provide exact error message)? No output?"}],"answers":[{"comments":[{"owner":{"account_id":20704973,"reputation":23,"user_id":15203060,"display_name":"Mohit Joshi"},"score":0,"creation_date":1669191735,"post_id":74543119,"comment_id":131585957,"body_markdown":"Hi @Firok Could you provide similar solution in java and instead of storing JSON in a string can we parse it from a .json file","body":"Hi @Firok Could you provide similar solution in java and instead of storing JSON in a string can we parse it from a .json file"},{"owner":{"account_id":13730022,"reputation":309,"user_id":9907751,"display_name":"Firok"},"score":0,"creation_date":1669196064,"post_id":74543119,"comment_id":131587348,"body_markdown":"@MohitJoshi Yes, code above is in Java 17. Replace the `source` from `String`  into any `java.io.File` instance then you could read data from files.","body":"@MohitJoshi Yes, code above is in Java 17. Replace the <code>source</code> from <code>String</code>  into any <code>java.io.File</code> instance then you could read data from files."}],"tags":[],"owner":{"account_id":13730022,"reputation":309,"user_id":9907751,"display_name":"Firok"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669196492,"creation_date":1669188537,"answer_id":74543119,"question_id":74542622,"body_markdown":"The Jackson library can do this.\r\n\r\n```java\r\n@Test\r\nvoid test() throws Exception\r\n{\r\n    var source = &quot;&quot;&quot;\r\n            {\r\n                &quot;product&quot;: {\r\n                &quot;loose_item1&quot;: {\r\n                    &quot;gtin&quot;: &quot;3011973&quot;,\r\n                    &quot;numberOfUnits&quot;: &quot;2&quot;,\r\n                    &quot;unitOfMeasure&quot;: &quot;EA&quot;\r\n                },\r\n                &quot;loose_item2&quot;: {\r\n                    &quot;gtin1&quot;: &quot;00218510000000&quot;\r\n                }\r\n                }\r\n            }&quot;&quot;&quot;;\r\n\r\n    var om = new ObjectMapper();\r\n    var json = om.readTree(source);\r\n    var product = json.get(&quot;product&quot;);\r\n    System.out.println(&quot;json.loose_item1.gtin: &quot; + product.get(&quot;loose_item1&quot;).get(&quot;gtin&quot;));\r\n    System.out.println(&quot;json.loose_item2.gtin1: &quot; + product.get(&quot;loose_item2&quot;).get(&quot;gtin1&quot;));\r\n}\r\n```\r\n\r\nPrint the `level` in console or give a debug breakpoint to check out what is it. Or you may need to check the data in that file.","title":"I have a JSON file which has multiple objects which I&#39;m not able to [arse","body":"<p>The Jackson library can do this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Test\nvoid test() throws Exception\n{\n    var source = &quot;&quot;&quot;\n            {\n                &quot;product&quot;: {\n                &quot;loose_item1&quot;: {\n                    &quot;gtin&quot;: &quot;3011973&quot;,\n                    &quot;numberOfUnits&quot;: &quot;2&quot;,\n                    &quot;unitOfMeasure&quot;: &quot;EA&quot;\n                },\n                &quot;loose_item2&quot;: {\n                    &quot;gtin1&quot;: &quot;00218510000000&quot;\n                }\n                }\n            }&quot;&quot;&quot;;\n\n    var om = new ObjectMapper();\n    var json = om.readTree(source);\n    var product = json.get(&quot;product&quot;);\n    System.out.println(&quot;json.loose_item1.gtin: &quot; + product.get(&quot;loose_item1&quot;).get(&quot;gtin&quot;));\n    System.out.println(&quot;json.loose_item2.gtin1: &quot; + product.get(&quot;loose_item2&quot;).get(&quot;gtin1&quot;));\n}\n</code></pre>\n<p>Print the <code>level</code> in console or give a debug breakpoint to check out what is it. Or you may need to check the data in that file.</p>\n"}],"owner":{"account_id":20704973,"reputation":23,"user_id":15203060,"display_name":"Mohit Joshi"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":48,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669196492,"creation_date":1669185043,"question_id":74542622,"body_markdown":"I have a JSON file in following format:\r\n\r\n```json\r\n{\r\n  &quot;product&quot;: {\r\n    &quot;loose_item1&quot;: {\r\n      &quot;gtin&quot;: &quot;3011973&quot;,\r\n      &quot;numberOfUnits&quot;: &quot;2&quot;,\r\n      &quot;unitOfMeasure&quot;: &quot;EA&quot;\r\n    },\r\n    &quot;loose_item2&quot;: {\r\n      &quot;gtin1&quot;: &quot;00218510000000&quot;\r\n    }\r\n  }\r\n```\r\n\r\nI have written the following code to parse the above JSON, but I&#39;m not able to access gtin, numberOfUnits, unitOfMeasure. I&#39;m only able to access lose_item1, but I&#39;m not able to iterate inside it:\r\n\r\n```java\r\npublic static void main(String[] args) {\r\n    JSONParser parser = new JSONParser();\r\n\r\n    try {\r\n        Object obj = parser.parse(new FileReader(&quot;/Users/mohitjoshi/Desktop/Tills-Karate-Automation-Test 2/src/test/java/com/tills/e2e/karate/template/masterData.json&quot;));\r\n        JSONObject jsonObject = (JSONObject) obj;\r\n        JSONObject name = (JSONObject) jsonObject.get(&quot;product&quot;);\r\n        Object level = name.get(&quot;loose_item1&quot;);\r\n        Object level1 = level.get(&quot;gtin&quot;);\r\n        System.out.println(level1);\r\n    } catch (Exception e) {\r\n        e.printStackTrace();\r\n    }\r\n}\r\n```\r\n","title":"I have a JSON file which has multiple objects which I&#39;m not able to [arse","body":"<p>I have a JSON file in following format:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;product&quot;: {\n    &quot;loose_item1&quot;: {\n      &quot;gtin&quot;: &quot;3011973&quot;,\n      &quot;numberOfUnits&quot;: &quot;2&quot;,\n      &quot;unitOfMeasure&quot;: &quot;EA&quot;\n    },\n    &quot;loose_item2&quot;: {\n      &quot;gtin1&quot;: &quot;00218510000000&quot;\n    }\n  }\n</code></pre>\n<p>I have written the following code to parse the above JSON, but I'm not able to access gtin, numberOfUnits, unitOfMeasure. I'm only able to access lose_item1, but I'm not able to iterate inside it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    JSONParser parser = new JSONParser();\n\n    try {\n        Object obj = parser.parse(new FileReader(&quot;/Users/mohitjoshi/Desktop/Tills-Karate-Automation-Test 2/src/test/java/com/tills/e2e/karate/template/masterData.json&quot;));\n        JSONObject jsonObject = (JSONObject) obj;\n        JSONObject name = (JSONObject) jsonObject.get(&quot;product&quot;);\n        Object level = name.get(&quot;loose_item1&quot;);\n        Object level1 = level.get(&quot;gtin&quot;);\n        System.out.println(level1);\n    } catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n"},{"tags":["java","mockito"],"comments":[{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":0,"creation_date":1669196197,"post_id":74544544,"comment_id":131587415,"body_markdown":"Are response or client really `null` or is NPE thrown during usage?","body":"Are response or client really <code>null</code> or is NPE thrown during usage?"},{"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"score":0,"creation_date":1669196319,"post_id":74544544,"comment_id":131587456,"body_markdown":"@ChristophDahlen i checked , right after mocking in debugger it says `Method threw &#39;java.lang.NullPointerException&#39; exception. Cannot evaluate org.apache.http.impl.client.CloseableHttpClient$MockitoMock$268347003.toString()`","body":"@ChristophDahlen i checked , right after mocking in debugger it says <code>Method threw &#39;java.lang.NullPointerException&#39; exception. Cannot evaluate org.apache.http.impl.client.CloseableHttpClient$MockitoMock$&zwnj;&#8203;268347003.toString()</code>"},{"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"score":0,"creation_date":1669196350,"post_id":74544544,"comment_id":131587469,"body_markdown":"@ChristophDahlen however when i run the tests using maven it behaves correctly for some reason","body":"@ChristophDahlen however when i run the tests using maven it behaves correctly for some reason"},{"owner":{"account_id":1713236,"reputation":22836,"user_id":1570854,"accept_rate":71,"display_name":"Lesiak"},"score":0,"creation_date":1669200897,"post_id":74544544,"comment_id":131589107,"body_markdown":"Please post entire stack trace. Note that debugging mockito code has some tricky parts: https://stackoverflow.com/questions/69626405/mockito-unfinished-stubbing-exception-detected-only-in-intellij-debugger/69628236","body":"Please post entire stack trace. Note that debugging mockito code has some tricky parts: <a href=\"https://stackoverflow.com/questions/69626405/mockito-unfinished-stubbing-exception-detected-only-in-intellij-debugger/69628236\" title=\"mockito unfinished stubbing exception detected only in intellij debugger\">stackoverflow.com/questions/69626405/&hellip;</a>"},{"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"score":0,"creation_date":1669204928,"post_id":74544544,"comment_id":131590542,"body_markdown":"thats it, only NPE","body":"thats it, only NPE"}],"owner":{"account_id":7527198,"reputation":1109,"user_id":5716914,"accept_rate":11,"display_name":"Johnyb"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":62,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669196086,"creation_date":1669196086,"question_id":74544544,"body_markdown":"I am using `mockito core4.4.0` and `JUnit5` and have test:\r\n\r\n    @ExtendWith(MockitoExtension.class)\r\n    @MockitoSettings(strictness = Strictness.LENIENT)\r\n    class ElasticSearchLoggerTest {\r\n    \r\n        private CloseableHttpClient client;\r\n        private CloseableHttpResponse response;\r\n    \r\n        @BeforeEach\r\n        public void setUp() {\r\n            response = Mockito.mock(CloseableHttpResponse.class);\r\n            client = Mockito.mock(CloseableHttpClient.class);\r\n        }\r\n       ....\r\n    }\r\n\r\nHowever, this mocking results in NPE, i tried to use `@Mock` annotation instead of Mocking with `Mockito.mock()` but the result is the same.\r\n\r\nWhy is this null?","title":"Mocking ApacheHttp classes results in null","body":"<p>I am using <code>mockito core4.4.0</code> and <code>JUnit5</code> and have test:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\n@MockitoSettings(strictness = Strictness.LENIENT)\nclass ElasticSearchLoggerTest {\n\n    private CloseableHttpClient client;\n    private CloseableHttpResponse response;\n\n    @BeforeEach\n    public void setUp() {\n        response = Mockito.mock(CloseableHttpResponse.class);\n        client = Mockito.mock(CloseableHttpClient.class);\n    }\n   ....\n}\n</code></pre>\n<p>However, this mocking results in NPE, i tried to use <code>@Mock</code> annotation instead of Mocking with <code>Mockito.mock()</code> but the result is the same.</p>\n<p>Why is this null?</p>\n"},{"tags":["java","collections","hashmap","java-stream"],"answers":[{"tags":[],"owner":{"account_id":1263831,"reputation":388998,"user_id":1221571,"accept_rate":67,"display_name":"Eran"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669191499,"creation_date":1669191004,"answer_id":74543529,"question_id":74543455,"body_markdown":"`.map( map::get )` when applied on the second element of your Stream (&quot;string2&quot;) returns `null`. When `.flatMap( List::stream )` is applied on that `null` element, you get `NullPointerException`, since it tries to execute `stream()` method on a null reference.\r\n\r\nYou should filter out the `null` elements to avoid this:\r\n\r\n    Stream&lt;String&gt; stream = list.stream()\r\n                                .map( map::get )\r\n                                .filter(Objects::nonNull)\r\n                                .flatMap( List::stream );\r\n\r\n\r\n","title":"stream.count() resulting in NPE","body":"<p><code>.map( map::get )</code> when applied on the second element of your Stream (&quot;string2&quot;) returns <code>null</code>. When <code>.flatMap( List::stream )</code> is applied on that <code>null</code> element, you get <code>NullPointerException</code>, since it tries to execute <code>stream()</code> method on a null reference.</p>\n<p>You should filter out the <code>null</code> elements to avoid this:</p>\n<pre><code>Stream&lt;String&gt; stream = list.stream()\n                            .map( map::get )\n                            .filter(Objects::nonNull)\n                            .flatMap( List::stream );\n</code></pre>\n"},{"tags":[],"owner":{"account_id":213468,"reputation":103500,"user_id":466862,"display_name":"Mark Rotteveel"},"comment_count":0,"down_vote_count":0,"up_vote_count":3,"is_accepted":true,"score":3,"last_activity_date":1669191665,"creation_date":1669191010,"answer_id":74543534,"question_id":74543455,"body_markdown":"Your code will call `List#stream` on null in the `flatMap`, which results in a NullPointerException. You need to filter out null values before the flatMap:\r\n\r\n```java\r\nlist.stream()\r\n        .map(map::get)\r\n        .filter(Objects::nonNull)\r\n        .flatMap(List::stream)\r\n```","title":"stream.count() resulting in NPE","body":"<p>Your code will call <code>List#stream</code> on null in the <code>flatMap</code>, which results in a NullPointerException. You need to filter out null values before the flatMap:</p>\n<pre class=\"lang-java prettyprint-override\"><code>list.stream()\n        .map(map::get)\n        .filter(Objects::nonNull)\n        .flatMap(List::stream)\n</code></pre>\n"},{"tags":[],"owner":{"account_id":1658807,"reputation":31819,"user_id":1527544,"accept_rate":54,"display_name":"Antoniossss"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669191022,"creation_date":1669191022,"answer_id":74543538,"question_id":74543455,"body_markdown":"When you do \r\n\r\n`map.get(&quot;string2&quot;)` you will get `null`\r\n\r\nwhen you do \r\n `map.get(&quot;string2&quot;).stream()` you will get NPE\r\n\r\n\r\nThis is exactly what you are doing in your stream. ","title":"stream.count() resulting in NPE","body":"<p>When you do</p>\n<p><code>map.get(&quot;string2&quot;)</code> you will get <code>null</code></p>\n<p>when you do\n<code>map.get(&quot;string2&quot;).stream()</code> you will get NPE</p>\n<p>This is exactly what you are doing in your stream.</p>\n"},{"tags":[],"owner":{"account_id":26545592,"reputation":176,"user_id":20175711,"display_name":"Not A Number"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669191117,"creation_date":1669191117,"answer_id":74543561,"question_id":74543455,"body_markdown":"Here\r\n```\r\n.map( map::get )\r\n```\r\nyou get list containing `&quot;1&quot;` by key `&quot;string1&quot;` from `map`, then `null` by key `&quot;string2&quot;`. This causes NPE  ","title":"stream.count() resulting in NPE","body":"<p>Here</p>\n<pre><code>.map( map::get )\n</code></pre>\n<p>you get list containing <code>&quot;1&quot;</code> by key <code>&quot;string1&quot;</code> from <code>map</code>, then <code>null</code> by key <code>&quot;string2&quot;</code>. This causes NPE</p>\n"},{"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669195815,"creation_date":1669191274,"answer_id":74543583,"question_id":74543455,"body_markdown":"[Map.get()][1] will return `null`, when there is no mapping for the key in the map, as stated in the docs.\r\n\r\n&gt; Returns the value to which the specified key is mapped, or null if this map contains no mapping for the key.\r\n\r\nTo fix, filter out null elements from the stream.\r\n```\r\nStream&lt;String&gt; stream = list.stream()\r\n    .map(map::get)\r\n    .filter(Objects::nonNull)\r\n    .flatMap(Collection::stream);\r\n```\r\nOr you can supply default value, using [Map.getOrDefault()][2].\r\n\r\n&gt; Returns the value to which the specified key is mapped, or defaultValue if this map contains no mapping for the key.\r\n\r\n```\r\nStream&lt;String&gt; stream = list.stream()\r\n     .map(str -&gt; map.getOrDefault(str, Collections.emptyList()))\r\n     .flatMap(Collection::stream);\r\n```\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#get-java.lang.Object-\r\n  [2]: https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#getOrDefault-java.lang.Object-V-","title":"stream.count() resulting in NPE","body":"<p><a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#get-java.lang.Object-\" rel=\"nofollow noreferrer\">Map.get()</a> will return <code>null</code>, when there is no mapping for the key in the map, as stated in the docs.</p>\n<blockquote>\n<p>Returns the value to which the specified key is mapped, or null if this map contains no mapping for the key.</p>\n</blockquote>\n<p>To fix, filter out null elements from the stream.</p>\n<pre><code>Stream&lt;String&gt; stream = list.stream()\n    .map(map::get)\n    .filter(Objects::nonNull)\n    .flatMap(Collection::stream);\n</code></pre>\n<p>Or you can supply default value, using <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/Map.html#getOrDefault-java.lang.Object-V-\" rel=\"nofollow noreferrer\">Map.getOrDefault()</a>.</p>\n<blockquote>\n<p>Returns the value to which the specified key is mapped, or defaultValue if this map contains no mapping for the key.</p>\n</blockquote>\n<pre><code>Stream&lt;String&gt; stream = list.stream()\n     .map(str -&gt; map.getOrDefault(str, Collections.emptyList()))\n     .flatMap(Collection::stream);\n</code></pre>\n"}],"owner":{"account_id":246941,"reputation":1582,"user_id":521347,"accept_rate":60,"display_name":"Sumit Desai"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":158,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74543534,"answer_count":5,"score":2,"last_activity_date":1669195815,"creation_date":1669190551,"question_id":74543455,"body_markdown":"I am seeing some weird behaviour in Java stream API. Here&#39;s my code:\r\n\r\n    public static void main( String[] args ) {\r\n        final List&lt;String&gt; list = Arrays.asList( &quot;string1&quot;, &quot;string2&quot; );\r\n        final Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\r\n        map.put( &quot;string1&quot;, Arrays.asList( &quot;1&quot; ) );\r\n        //map.put( &quot;string2&quot;, Arrays.asList( &quot;1&quot; ) );\r\n        Stream&lt;String&gt; stream = list.stream().map( map::get ).flatMap( List::stream );\r\n        System.out.println( &quot;Stream=&quot; + stream );\r\n        long count = stream.count();\r\n        System.out.println( &quot;Stream count=&quot; + count );\r\n    }\r\n\r\nThe second last line (`long count = stream.count();`) is resulting in a NPE. The exception does not occur if I add another entry to map for key &quot;string2&quot; (commented code). Can somebody please point-out why it results in a NPE instead of just returning the count as 1?\r\n\r\nThe same behaviour is observed if I try to collect the stream&#39;s result in a list instead of calling `count()`","title":"stream.count() resulting in NPE","body":"<p>I am seeing some weird behaviour in Java stream API. Here's my code:</p>\n<pre><code>public static void main( String[] args ) {\n    final List&lt;String&gt; list = Arrays.asList( &quot;string1&quot;, &quot;string2&quot; );\n    final Map&lt;String, List&lt;String&gt;&gt; map = new HashMap&lt;&gt;();\n    map.put( &quot;string1&quot;, Arrays.asList( &quot;1&quot; ) );\n    //map.put( &quot;string2&quot;, Arrays.asList( &quot;1&quot; ) );\n    Stream&lt;String&gt; stream = list.stream().map( map::get ).flatMap( List::stream );\n    System.out.println( &quot;Stream=&quot; + stream );\n    long count = stream.count();\n    System.out.println( &quot;Stream count=&quot; + count );\n}\n</code></pre>\n<p>The second last line (<code>long count = stream.count();</code>) is resulting in a NPE. The exception does not occur if I add another entry to map for key &quot;string2&quot; (commented code). Can somebody please point-out why it results in a NPE instead of just returning the count as 1?</p>\n<p>The same behaviour is observed if I try to collect the stream's result in a list instead of calling <code>count()</code></p>\n"},{"tags":["java"],"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":1,"creation_date":1669195702,"post_id":74544392,"comment_id":131587230,"body_markdown":"A `PrintWriter` never waits for any input, it does purely output. If anything, then it&#39;s the `Scanner` that you use that waits for input (via the `InputStream` you used to construct it).","body":"A <code>PrintWriter</code> never waits for any input, it does purely output. If anything, then it&#39;s the <code>Scanner</code> that you use that waits for input (via the <code>InputStream</code> you used to construct it)."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669200179,"post_id":74544392,"comment_id":131588893,"body_markdown":"You need to arrange things in a sequence of prompt-&gt;action„ prompt-&gt;action ... The prompt will always wait for input","body":"You need to arrange things in a sequence of prompt-&gt;action„ prompt-&gt;action ... The prompt will always wait for input"}],"owner":{"account_id":27022519,"reputation":11,"user_id":20580296,"display_name":"Dfr444er"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669195805,"creation_date":1669195410,"question_id":74544392,"body_markdown":"Background and Issue:\r\n\r\nI have built a library system which sends information between a mySQL database. I have a printwriter &quot;out&quot; and a scanner that im using for a client and server class. However, im having trouble understanding how to make the printwriter break out of the while loop which makes it wait for an input. Is there a way to have the PrintWriter not have to wait for an input and move onto my bookStoreMenu(); method in the server class.\r\n\r\nClient:\r\n\r\n\r\n```\r\nsocket = new Socket(IPaddress, port);\r\nSystem.out.println(&quot;Connected to server at &quot;+ IPaddress + &quot;:&quot; + port);\r\n//Connect a Scanner to the socket&#39;s InputStream to read lines from it\r\nin = new Scanner(socket.getInputStream());\r\n//Connect a PrintWriter to the OutputStream to send lines to server\r\nout = new PrintWriter(socket.getOutputStream(), true);\r\n//Connect a Scanner to system input to take command line instructions\r\nmenu();\r\n\r\nuserInput = new Scanner(System.in);\r\nwhile(userInput.hasNext()){\r\n    out.println(userInput.nextLine());//handle output to server\r\n    System.out.println(in.nextLine()); //print input from server\r\n}\r\n```\r\n\r\n\r\nServer:\r\n\r\n\r\n```\r\n while (sqlExecute.next()) {\r\n     int id = sqlExecute.getInt(&quot;bookID&quot;);\r\n     String isbn = sqlExecute.getString(&quot;book_ISBN&quot;);\r\n     String title = sqlExecute.getString(&quot;book_title&quot;);\r\n     String author = sqlExecute.getString(&quot;book_author&quot;);\r\n     String publisher = sqlExecute.getString(&quot;book_publisher&quot;);\r\n     String language = sqlExecute.getString(&quot;book_language&quot;);\r\n     //Building a string\r\n     /*BookString = (&quot;Book ISBN: &quot; + isbn + &quot;, Book Title: &quot; + title + &quot;,\r\n         Author: &quot; + author + &quot;, Publisher: &quot; + publisher + &quot;, Language &quot; +\r\n        language);*/\r\n     bookResults.append(&quot;BookID: &quot; +id + &quot;, Book ISBN: &quot; + isbn);\r\n     bookResults.append(&quot;, Title: &quot; + title + &quot;, Author: &quot; + author);\r\n     bookResults.append(&quot;, Publisher: &quot; + publisher + &quot;, Language: &quot; + language);\r\n     bookResults.append(&quot; || &quot;);\r\n     System.out.printf(&quot;%s, %s, %s, %s, %s, %s\\n&quot;, \r\n                       id, isbn, title, author, publisher, language + &quot;\\n&quot;);\r\n}\r\n//Sending results\r\nout.println(bookResults + &quot;\\n&quot;);\r\nbookStoreMenu();\r\n```\r\n\r\nI have tried adding new lines using &quot;\\n&quot; to also print to new lines but the printwriter also seems to not like this.\r\n\r\nI have tried making various loops and boolean statements within the client and server but haven&#39;t managed to figure it out.","title":"How do i make the Printwriter not wait for an input","body":"<p>Background and Issue:</p>\n<p>I have built a library system which sends information between a mySQL database. I have a printwriter &quot;out&quot; and a scanner that im using for a client and server class. However, im having trouble understanding how to make the printwriter break out of the while loop which makes it wait for an input. Is there a way to have the PrintWriter not have to wait for an input and move onto my bookStoreMenu(); method in the server class.</p>\n<p>Client:</p>\n<pre><code>socket = new Socket(IPaddress, port);\nSystem.out.println(&quot;Connected to server at &quot;+ IPaddress + &quot;:&quot; + port);\n//Connect a Scanner to the socket's InputStream to read lines from it\nin = new Scanner(socket.getInputStream());\n//Connect a PrintWriter to the OutputStream to send lines to server\nout = new PrintWriter(socket.getOutputStream(), true);\n//Connect a Scanner to system input to take command line instructions\nmenu();\n\nuserInput = new Scanner(System.in);\nwhile(userInput.hasNext()){\n    out.println(userInput.nextLine());//handle output to server\n    System.out.println(in.nextLine()); //print input from server\n}\n</code></pre>\n<p>Server:</p>\n<pre><code> while (sqlExecute.next()) {\n     int id = sqlExecute.getInt(&quot;bookID&quot;);\n     String isbn = sqlExecute.getString(&quot;book_ISBN&quot;);\n     String title = sqlExecute.getString(&quot;book_title&quot;);\n     String author = sqlExecute.getString(&quot;book_author&quot;);\n     String publisher = sqlExecute.getString(&quot;book_publisher&quot;);\n     String language = sqlExecute.getString(&quot;book_language&quot;);\n     //Building a string\n     /*BookString = (&quot;Book ISBN: &quot; + isbn + &quot;, Book Title: &quot; + title + &quot;,\n         Author: &quot; + author + &quot;, Publisher: &quot; + publisher + &quot;, Language &quot; +\n        language);*/\n     bookResults.append(&quot;BookID: &quot; +id + &quot;, Book ISBN: &quot; + isbn);\n     bookResults.append(&quot;, Title: &quot; + title + &quot;, Author: &quot; + author);\n     bookResults.append(&quot;, Publisher: &quot; + publisher + &quot;, Language: &quot; + language);\n     bookResults.append(&quot; || &quot;);\n     System.out.printf(&quot;%s, %s, %s, %s, %s, %s\\n&quot;, \n                       id, isbn, title, author, publisher, language + &quot;\\n&quot;);\n}\n//Sending results\nout.println(bookResults + &quot;\\n&quot;);\nbookStoreMenu();\n</code></pre>\n<p>I have tried adding new lines using &quot;\\n&quot; to also print to new lines but the printwriter also seems to not like this.</p>\n<p>I have tried making various loops and boolean statements within the client and server but haven't managed to figure it out.</p>\n"},{"tags":["java","android","string"],"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669194792,"post_id":74544192,"comment_id":131586907,"body_markdown":"`s.split(&quot;\\\\d+&quot;);`","body":"<code>s.split(&quot;\\\\d+&quot;);</code>"}],"answers":[{"tags":[],"owner":{"account_id":10594606,"reputation":3598,"user_id":7803797,"display_name":"Chaitanya"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669194749,"creation_date":1669194749,"answer_id":74544259,"question_id":74544192,"body_markdown":"We can use the `split` method of string and pass in the regex to check the presence of digits.\r\n\r\n```\r\n&quot;test123123hj&quot;.split(&quot;\\\\d+&quot;)[0]\r\n```\r\n\r\nThis should give you the desired output.","title":"Java: Separate starting character from a string","body":"<p>We can use the <code>split</code> method of string and pass in the regex to check the presence of digits.</p>\n<pre><code>&quot;test123123hj&quot;.split(&quot;\\\\d+&quot;)[0]\n</code></pre>\n<p>This should give you the desired output.</p>\n"},{"tags":[],"owner":{"account_id":26087345,"reputation":7,"user_id":19784706,"display_name":"Kaan Tuğberk Avlamaz"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669195639,"creation_date":1669195639,"answer_id":74544440,"question_id":74544192,"body_markdown":"[![enter image description here][1]][1]\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/ZteRT.png\r\n\r\n@ChaitanyaWaikar&#39;s result is right. Try this.","title":"Java: Separate starting character from a string","body":"<p><a href=\"https://i.stack.imgur.com/ZteRT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZteRT.png\" alt=\"enter image description here\" /></a></p>\n<p>@ChaitanyaWaikar's result is right. Try this.</p>\n"}],"owner":{"account_id":26576850,"reputation":21,"user_id":20202063,"display_name":"ak developers"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":42,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74544259,"answer_count":2,"score":0,"last_activity_date":1669195639,"creation_date":1669194453,"question_id":74544192,"body_markdown":"How to get Starting alphabet from the string which contain numbers and other strings ?\r\n\r\nLike have to separate the alphabets before the numbers starts. \r\n```\r\nString value1 = &quot;test123123hj&quot;;\r\nString value2 = &quot;demo312342343dfs&quot;;\r\n```\r\n\r\nOutput should be :\r\n```\r\nvalue1 = &quot;test&quot;\r\nvalue2 =&quot;demo&quot;\r\n```","title":"Java: Separate starting character from a string","body":"<p>How to get Starting alphabet from the string which contain numbers and other strings ?</p>\n<p>Like have to separate the alphabets before the numbers starts.</p>\n<pre><code>String value1 = &quot;test123123hj&quot;;\nString value2 = &quot;demo312342343dfs&quot;;\n</code></pre>\n<p>Output should be :</p>\n<pre><code>value1 = &quot;test&quot;\nvalue2 =&quot;demo&quot;\n</code></pre>\n"},{"tags":["java","hibernate","java-time"],"comments":[{"owner":{"account_id":7612423,"reputation":82506,"user_id":5772882,"display_name":"Anonymous"},"score":1,"creation_date":1669225577,"post_id":74531575,"comment_id":131598489,"body_markdown":"For a date without time of day why not use `LocalDate` in Java and `date` in SQL as the table says?","body":"For a date without time of day why not use <code>LocalDate</code> in Java and <code>date</code> in SQL as the table says?"},{"owner":{"account_id":3572516,"reputation":141,"user_id":2982506,"display_name":"Dmitry Shabalin"},"score":0,"creation_date":1669319371,"post_id":74531575,"comment_id":131622576,"body_markdown":"yes @OleV.V. i choice that option.\nI create ZonedDateTime.now()withZoneSameInstant(UTC).toLocalDate(); and work with LocalDate only in UTC","body":"yes @OleV.V. i choice that option. I create ZonedDateTime.now()withZoneSameInstant(UTC).toLocalDate(); and work with LocalDate only in UTC"}],"owner":{"account_id":3572516,"reputation":141,"user_id":2982506,"display_name":"Dmitry Shabalin"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669195386,"creation_date":1669115009,"question_id":74531575,"body_markdown":"regarding by [![enter image description here][1]][1]\r\n\r\nI trying to change all java.util.Date to java.time.Instant in all my hibernate entities.\r\nsaving Instant as timestamp with time zone.\r\n\r\nHow to mark somehow Instant as Date or DateWithTime, to keep type (Date or DateWithTime) clear?\r\n\r\nIt can be saved as ZonedDateTime/ZonedDate but in single server i have multiple timezones per tenant and want to work transparently with Instant.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/rYqh1.png","title":"Date and DateTime in Instant and multiple timezones","body":"<p>regarding by <a href=\"https://i.stack.imgur.com/rYqh1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rYqh1.png\" alt=\"enter image description here\" /></a></p>\n<p>I trying to change all java.util.Date to java.time.Instant in all my hibernate entities.\nsaving Instant as timestamp with time zone.</p>\n<p>How to mark somehow Instant as Date or DateWithTime, to keep type (Date or DateWithTime) clear?</p>\n<p>It can be saved as ZonedDateTime/ZonedDate but in single server i have multiple timezones per tenant and want to work transparently with Instant.</p>\n"},{"tags":["java","https","java-8","java-17","sslcontext"],"comments":[{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":1,"creation_date":1669190008,"post_id":74542295,"comment_id":131585453,"body_markdown":"Java **11** added TLS1.3, and so did Java 8 update 261 up. Certificates, and privatekeys, are not related to Java versions, but the _keystore files_ in which they are usually stored have changed over time and thus are partially correlated with Java versions; however any problem with the keystore file would throw an exception, so unless your code catches and ignores exceptions it shouldn&#39;t, you would already have solved that problem. What exactly is the exception or other error you get?","body":"Java <b>11</b> added TLS1.3, and so did Java 8 update 261 up. Certificates, and privatekeys, are not related to Java versions, but the <i>keystore files</i> in which they are usually stored have changed over time and thus are partially correlated with Java versions; however any problem with the keystore file would throw an exception, so unless your code catches and ignores exceptions it shouldn&#39;t, you would already have solved that problem. What exactly is the exception or other error you get?"},{"owner":{"account_id":27020592,"reputation":1,"user_id":20578630,"display_name":"ishan"},"score":0,"creation_date":1669195196,"post_id":74542295,"comment_id":131587042,"body_markdown":"@dave_thompson_085 Added debug log for SSL connection : I am getting 403 Forbidden when trying when the http client is about to make connection with endpoint, with Java17.","body":"@dave_thompson_085 Added debug log for SSL connection : I am getting 403 Forbidden when trying when the http client is about to make connection with endpoint, with Java17."},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1669260464,"post_id":74542295,"comment_id":131605810,"body_markdown":"That&#39;s an error from the proxy before the SSL/TLS handshake even starts, and has nothing at all to do with SSL/TLS. Are both clients using the same proxy? If by name, using the same name resolution? Does the working 8 issue the same request except for user-agent? Especially, does it have any proxy-authorization header? Are both clients on the same machine (proxy could restrict the client IPaddr)?","body":"That&#39;s an error from the proxy before the SSL/TLS handshake even starts, and has nothing at all to do with SSL/TLS. Are both clients using the same proxy? If by name, using the same name resolution? Does the working 8 issue the same request except for user-agent? Especially, does it have any proxy-authorization header? Are both clients on the same machine (proxy could restrict the client IPaddr)?"},{"owner":{"account_id":27020592,"reputation":1,"user_id":20578630,"display_name":"ishan"},"score":0,"creation_date":1669272350,"post_id":74542295,"comment_id":131607826,"body_markdown":"@dave_thompson_085 Java 8 uses the exact same code as Java 17, my client connects with external server via same proxy. Logs states connection is successful with proxy and when proxy connects with external server (where sll comes into affect) 403 is thrown out.\nis there be a possibility that there are restrictions from the server side ?","body":"@dave_thompson_085 Java 8 uses the exact same code as Java 17, my client connects with external server via same proxy. Logs states connection is successful with proxy and when proxy connects with external server (where sll comes into affect) 403 is thrown out. is there be a possibility that there are restrictions from the server side ?"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":2,"creation_date":1669392295,"post_id":74542295,"comment_id":131638307,"body_markdown":"No, when you get 403 on the CONNECT request to the proxy, it is NOT connecting to the external server and there is no SSL/TLS yet. I didn&#39;t ask if the connection was successful from 8, which we already knew, I asked if the _request to the proxy_ from 8 is the same (except for user-agent).","body":"No, when you get 403 on the CONNECT request to the proxy, it is NOT connecting to the external server and there is no SSL/TLS yet. I didn&#39;t ask if the connection was successful from 8, which we already knew, I asked if the <i>request to the proxy</i> from 8 is the same (except for user-agent)."}],"owner":{"account_id":27020592,"reputation":1,"user_id":20578630,"display_name":"ishan"},"comment_count":5,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":858,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669195162,"creation_date":1669182449,"question_id":74542295,"body_markdown":"I need help / guidance with what can be the possible issue when I am trying to call a rest api on SSL (TLS) connection. I have a private key and signed cert from the data producer, I created the keystore from these to files and with code build a SSLContext, I use this context while making Http connection with the producer&#39;s server. Now the issue is,  I am able to make connection with Java 8 but handshake fails for Java 17. \r\n\r\nWhat am I missing ? are java 8 certificates compatible with java 17 ?\r\nI read a little and found Java 17 introduced TLSv1.3 but my SSL Handshake is failing with this version as well.\r\n\r\nI tried using Java 11 and Java 17 but looks like the SSLContext is only working with Java 8, and I am able to fetch the response over REST.\r\n\r\n\r\nCan someone who has faced similar scenario or aware of what can be the possible issue, help me out here.\r\n\r\n\r\n\r\nBelow is the log snippet (masked endpoints) ::\r\n\r\n    19:06:42.772 [main] DEBUG org.apache.http.impl.conn.PoolingHttpClientConnectionManager - Connection request: [route: {tls}-&gt;http://&lt;proxy_URL&gt;:82-&gt;https://&lt;endpoint_URL&gt;:443][total available: 0; route allocated: 0 of 50; total allocated: 0 of 60000]\r\n    19:06:42.793 [main] DEBUG org.apache.http.impl.conn.PoolingHttpClientConnectionManager - Connection leased: [id: 0][route: {tls}-&gt;http://&lt;proxy_URL&gt;:82-&gt;https://&lt;endpoint_URL&gt;:443][total available: 0; route allocated: 1 of 50; total allocated: 1 of 60000]\r\n    19:06:42.795 [main] DEBUG org.apache.http.impl.execchain.MainClientExec - Opening connection {tls}-&gt;http://&lt;proxy_URL&gt;:82-&gt;https://&lt;endpoint_URL&gt;:443\r\n    19:06:42.818 [main] DEBUG org.apache.http.impl.conn.DefaultHttpClientConnectionOperator - Connecting to &lt;proxy_URL&gt;/10.10.10.11:82\r\n    19:06:42.821 [main] DEBUG org.apache.http.impl.conn.DefaultHttpClientConnectionOperator - Connection established 10.10.10.10:55188&lt;-&gt;10.10.10.11:82\r\n    19:06:42.823 [main] DEBUG org.apache.http.headers - http-outgoing-0 &gt;&gt; CONNECT &lt;endpoint_URL&gt;:443 HTTP/1.1\r\n    19:06:42.823 [main] DEBUG org.apache.http.headers - http-outgoing-0 &gt;&gt; Host: &lt;endpoint_URL&gt;\r\n    19:06:42.823 [main] DEBUG org.apache.http.headers - http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.4)\r\n    19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;CONNECT &lt;endpoint_URL&gt;:443 HTTP/1.1[\\r][\\n]&quot;\r\n    19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;Host: &lt;endpoint_URL&gt;[\\r][\\n]&quot;\r\n    19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.4)[\\r][\\n]&quot;\r\n    19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\r\n    19:06:42.871 [main] DEBUG org.apache.http.wire - http-outgoing-0 &lt;&lt; &quot;HTTP/1.1 403 Forbidden[\\r][\\n]&quot;&#39;","title":"SSL Connection working with Java8 but failing with Java17","body":"<p>I need help / guidance with what can be the possible issue when I am trying to call a rest api on SSL (TLS) connection. I have a private key and signed cert from the data producer, I created the keystore from these to files and with code build a SSLContext, I use this context while making Http connection with the producer's server. Now the issue is,  I am able to make connection with Java 8 but handshake fails for Java 17.</p>\n<p>What am I missing ? are java 8 certificates compatible with java 17 ?\nI read a little and found Java 17 introduced TLSv1.3 but my SSL Handshake is failing with this version as well.</p>\n<p>I tried using Java 11 and Java 17 but looks like the SSLContext is only working with Java 8, and I am able to fetch the response over REST.</p>\n<p>Can someone who has faced similar scenario or aware of what can be the possible issue, help me out here.</p>\n<p>Below is the log snippet (masked endpoints) ::</p>\n<pre><code>19:06:42.772 [main] DEBUG org.apache.http.impl.conn.PoolingHttpClientConnectionManager - Connection request: [route: {tls}-&gt;http://&lt;proxy_URL&gt;:82-&gt;https://&lt;endpoint_URL&gt;:443][total available: 0; route allocated: 0 of 50; total allocated: 0 of 60000]\n19:06:42.793 [main] DEBUG org.apache.http.impl.conn.PoolingHttpClientConnectionManager - Connection leased: [id: 0][route: {tls}-&gt;http://&lt;proxy_URL&gt;:82-&gt;https://&lt;endpoint_URL&gt;:443][total available: 0; route allocated: 1 of 50; total allocated: 1 of 60000]\n19:06:42.795 [main] DEBUG org.apache.http.impl.execchain.MainClientExec - Opening connection {tls}-&gt;http://&lt;proxy_URL&gt;:82-&gt;https://&lt;endpoint_URL&gt;:443\n19:06:42.818 [main] DEBUG org.apache.http.impl.conn.DefaultHttpClientConnectionOperator - Connecting to &lt;proxy_URL&gt;/10.10.10.11:82\n19:06:42.821 [main] DEBUG org.apache.http.impl.conn.DefaultHttpClientConnectionOperator - Connection established 10.10.10.10:55188&lt;-&gt;10.10.10.11:82\n19:06:42.823 [main] DEBUG org.apache.http.headers - http-outgoing-0 &gt;&gt; CONNECT &lt;endpoint_URL&gt;:443 HTTP/1.1\n19:06:42.823 [main] DEBUG org.apache.http.headers - http-outgoing-0 &gt;&gt; Host: &lt;endpoint_URL&gt;\n19:06:42.823 [main] DEBUG org.apache.http.headers - http-outgoing-0 &gt;&gt; User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.4)\n19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;CONNECT &lt;endpoint_URL&gt;:443 HTTP/1.1[\\r][\\n]&quot;\n19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;Host: &lt;endpoint_URL&gt;[\\r][\\n]&quot;\n19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpClient/4.5.13 (Java/17.0.4)[\\r][\\n]&quot;\n19:06:42.824 [main] DEBUG org.apache.http.wire - http-outgoing-0 &gt;&gt; &quot;[\\r][\\n]&quot;\n19:06:42.871 [main] DEBUG org.apache.http.wire - http-outgoing-0 &lt;&lt; &quot;HTTP/1.1 403 Forbidden[\\r][\\n]&quot;'\n</code></pre>\n"},{"tags":["java","spring-boot","csv","filereader","opencsv"],"comments":[{"owner":{"account_id":13343141,"reputation":515,"user_id":9630748,"display_name":"Arnault Le Pr&#233;vost-Corvellec"},"score":0,"creation_date":1669194657,"post_id":74544030,"comment_id":131586869,"body_markdown":"hi, the answer will mainly depends on which resource is your limitation : disk access ? ram ? time ? File reader will be a little more efficient on ram usage thats right but if your limitation is on disk or time  BufferedRead will optimize the parallele file reading  by making longer read on the same disk zone that will reduce system resource access cost and this is expensive in java, by the way if you now the size of your files you can custom buffered reader by passing a size to its constructor :)","body":"hi, the answer will mainly depends on which resource is your limitation : disk access ? ram ? time ? File reader will be a little more efficient on ram usage thats right but if your limitation is on disk or time  BufferedRead will optimize the parallele file reading  by making longer read on the same disk zone that will reduce system resource access cost and this is expensive in java, by the way if you now the size of your files you can custom buffered reader by passing a size to its constructor :)"}],"answers":[{"comments":[{"owner":{"account_id":17835,"reputation":303915,"user_id":40342,"accept_rate":62,"display_name":"Joachim Sauer"},"score":0,"creation_date":1669194816,"post_id":74544227,"comment_id":131586914,"body_markdown":"The safest way to remember to close the resources is to just use try-with-resources every time. That way you can&#39;t &quot;forget&quot; to close on exceptions.","body":"The safest way to remember to close the resources is to just use try-with-resources every time. That way you can&#39;t &quot;forget&quot; to close on exceptions."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669206595,"post_id":74544227,"comment_id":131591099,"body_markdown":"By the way I tried, but cannot voted up as I have not enough reputation :( Any vote up for the question pls?","body":"By the way I tried, but cannot voted up as I have not enough reputation :( Any vote up for the question pls?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669206859,"post_id":74544227,"comment_id":131591183,"body_markdown":"@JoachimSauer By the way, when I use `try-with-resources`, should I only add the variables that should be closed in the try block as `try (BufferedReader reader = new BufferedReader(new InputStreamReader(is, StandardCharsets.UTF_8))) {\n  CSVParser parser = new CSVParser(reader, CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeaderCase().withTrim());\n}` Is that true? Or should I also keep `CSVParser parser = new CSVParser(reader, CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeaderCase().withTrim());` in the `try()` ?","body":"@JoachimSauer By the way, when I use <code>try-with-resources</code>, should I only add the variables that should be closed in the try block as <code>try (BufferedReader reader = new BufferedReader(new InputStreamReader(is, StandardCharsets.UTF_8))) {   CSVParser parser = new CSVParser(reader, CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeader&zwnj;&#8203;Case().withTrim()); }</code> Is that true? Or should I also keep <code>CSVParser parser = new CSVParser(reader, CSVFormat.DEFAULT.withFirstRecordAsHeader().withIgnoreHeader&zwnj;&#8203;Case().withTrim());</code> in the <code>try()</code> ?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669306141,"post_id":74544227,"comment_id":131619150,"body_markdown":"Thanks amigo, voted up. Any idea about my previous comment?","body":"Thanks amigo, voted up. Any idea about my previous comment?"},{"owner":{"account_id":27015200,"reputation":71,"user_id":20574184,"display_name":"mttt"},"score":0,"creation_date":1669365074,"post_id":74544227,"comment_id":131629678,"body_markdown":"I think you must put also the sceond part in the try block, because it uses reader  that is defined in the first instruction, otherwise the BufferedReader would be closed too early","body":"I think you must put also the sceond part in the try block, because it uses reader  that is defined in the first instruction, otherwise the BufferedReader would be closed too early"}],"tags":[],"owner":{"account_id":27015200,"reputation":71,"user_id":20574184,"display_name":"mttt"},"comment_count":5,"down_vote_count":0,"up_vote_count":2,"is_accepted":false,"score":2,"last_activity_date":1669194654,"creation_date":1669194654,"answer_id":74544227,"question_id":74544030,"body_markdown":"As far as i know the difference in size lies simply in the buffer size, which by default is 8k or 16k, so the difference is memory isn&#39;t huge; the most important thing is you remember to free the resources when you don&#39; use them anymore, calling close(), also remember to do it incase of Exceptions","title":"Should I prefer FileReader to BufferedReader while reading CSV?","body":"<p>As far as i know the difference in size lies simply in the buffer size, which by default is 8k or 16k, so the difference is memory isn't huge; the most important thing is you remember to free the resources when you don' use them anymore, calling close(), also remember to do it incase of Exceptions</p>\n"},{"comments":[{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669206490,"post_id":74544248,"comment_id":131591058,"body_markdown":"Thanks a lot for your reply. Actually it is not premature optimization as I will not have to update the project (it is an assignment actually :) So, my priority is actually memory, but I am not sure when I use `bufferSize`, what if the read records overflow the allocated size? For reading a CSV with 500.000 records, should I use `FileReader`? On the other hand, OpenCSV uses `FileReader` in all of its examples. But I am not sure if that is the most proper way. Any clarification pls?","body":"Thanks a lot for your reply. Actually it is not premature optimization as I will not have to update the project (it is an assignment actually :) So, my priority is actually memory, but I am not sure when I use <code>bufferSize</code>, what if the read records overflow the allocated size? For reading a CSV with 500.000 records, should I use <code>FileReader</code>? On the other hand, OpenCSV uses <code>FileReader</code> in all of its examples. But I am not sure if that is the most proper way. Any clarification pls?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1669214056,"post_id":74544248,"comment_id":131593987,"body_markdown":"@gonzales `bufferSize` is the size of the buffer during reading, basically the size of the chunk being read from the source at once. Bigger buffer means faster reading and more memory used during reading, smaller buffer means slower reading and lower memory used. You don&#39;t need to worry about it overflowing, BufferedReader takes care of this.","body":"@gonzales <code>bufferSize</code> is the size of the buffer during reading, basically the size of the chunk being read from the source at once. Bigger buffer means faster reading and more memory used during reading, smaller buffer means slower reading and lower memory used. You don&#39;t need to worry about it overflowing, BufferedReader takes care of this."},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1669214324,"post_id":74544248,"comment_id":131594105,"body_markdown":"Also 500k records is not a small number, depending on constraints and what you need to do with them, you may need to work with them on batches. Read `n` records, process them, and move on to the next `n` records. The same rules applies to this - bigger `n` means faster processing, but more memory will be needed.","body":"Also 500k records is not a small number, depending on constraints and what you need to do with them, you may need to work with them on batches. Read <code>n</code> records, process them, and move on to the next <code>n</code> records. The same rules applies to this - bigger <code>n</code> means faster processing, but more memory will be needed."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669227744,"post_id":74544248,"comment_id":131599186,"body_markdown":"Hmmm, very good information especially regarding to buffer size. In this situation &gt;&gt;&gt;","body":"Hmmm, very good information especially regarding to buffer size. In this situation &gt;&gt;&gt;"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669227749,"post_id":74544248,"comment_id":131599188,"body_markdown":"**1)** what about using  FileReader instead of BufferedReader?","body":"<b>1)</b> what about using  FileReader instead of BufferedReader?"},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669227794,"post_id":74544248,"comment_id":131599201,"body_markdown":"**2)** What is the bufferSize value that I should use for this scenario when I use `BufferedReader`?","body":"<b>2)</b> What is the bufferSize value that I should use for this scenario when I use <code>BufferedReader</code>?"},{"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"score":0,"creation_date":1669295934,"post_id":74544248,"comment_id":131615653,"body_markdown":"@gonzales 1) Personally i have never needed to use FIleReader, instead of BufferedReader, when dealing with text files. 2) Can&#39;t say, i don&#39;t know the exact constraints. You can always try with the default size and decrease it later if it&#39;s too much.","body":"@gonzales 1) Personally i have never needed to use FIleReader, instead of BufferedReader, when dealing with text files. 2) Can&#39;t say, i don&#39;t know the exact constraints. You can always try with the default size and decrease it later if it&#39;s too much."},{"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"score":0,"creation_date":1669306122,"post_id":74544248,"comment_id":131619147,"body_markdown":"Thanks amigo, voted up and marked as answer.","body":"Thanks amigo, voted up and marked as answer."}],"tags":[],"owner":{"account_id":23783500,"reputation":5175,"user_id":17795888,"display_name":"Chaosfire"},"comment_count":8,"down_vote_count":0,"up_vote_count":2,"is_accepted":true,"score":2,"last_activity_date":1669194720,"creation_date":1669194720,"answer_id":74544248,"question_id":74544030,"body_markdown":"Generally speaking, **depends** on your constraints. If performance is an issue, allocate more resources and go for the faster solution. If memory is an issue, do the reverse.\r\n\r\nWith `BufferedReader` you can also use the reader and int [constructor][1] to set buffer size, which suits your needs.\r\n```\r\nBufferedReader reader = new BufferedReader(Reader, bufferSize);\r\n```\r\nAnother general rule of thumb, don&#39;t do premature optimizations, be it memory or performance. Strive for clean code, if a problem arises, use a profiler to identify the bottlenecks and then deal with them.\r\n\r\n  [1]: https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#BufferedReader-java.io.Reader-int-","title":"Should I prefer FileReader to BufferedReader while reading CSV?","body":"<p>Generally speaking, <strong>depends</strong> on your constraints. If performance is an issue, allocate more resources and go for the faster solution. If memory is an issue, do the reverse.</p>\n<p>With <code>BufferedReader</code> you can also use the reader and int <a href=\"https://docs.oracle.com/javase/8/docs/api/java/io/BufferedReader.html#BufferedReader-java.io.Reader-int-\" rel=\"nofollow noreferrer\">constructor</a> to set buffer size, which suits your needs.</p>\n<pre><code>BufferedReader reader = new BufferedReader(Reader, bufferSize);\n</code></pre>\n<p>Another general rule of thumb, don't do premature optimizations, be it memory or performance. Strive for clean code, if a problem arises, use a profiler to identify the bottlenecks and then deal with them.</p>\n"}],"owner":{"account_id":444292,"reputation":1,"user_id":836018,"accept_rate":57,"display_name":"Jack"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":454,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74544248,"answer_count":2,"score":1,"last_activity_date":1669194720,"creation_date":1669193616,"question_id":74544030,"body_markdown":"In a Spring Boot app, I am reading csv file data using OpenCSV and it is possible to use FileReader to BufferedReader with it. However, when I compare both of them, I have a dilemma for the following point:\r\n\r\n&gt; BufferedReader is faster than FileReader, but it uses much more memory. \r\n\r\nAs I am reading multiple data file (having hundreds of thousands records) in the same method (first I read data from one csv and then use the retrieved id fields to read the second csv), I think I shouldn&#39;t use `BufferedReader` for less memory usage. But I am really not sure what is the most proper way. \r\n\r\nSo, in this situation, Should I prefer FileReader to BufferedReader?","title":"Should I prefer FileReader to BufferedReader while reading CSV?","body":"<p>In a Spring Boot app, I am reading csv file data using OpenCSV and it is possible to use FileReader to BufferedReader with it. However, when I compare both of them, I have a dilemma for the following point:</p>\n<blockquote>\n<p>BufferedReader is faster than FileReader, but it uses much more memory.</p>\n</blockquote>\n<p>As I am reading multiple data file (having hundreds of thousands records) in the same method (first I read data from one csv and then use the retrieved id fields to read the second csv), I think I shouldn't use <code>BufferedReader</code> for less memory usage. But I am really not sure what is the most proper way.</p>\n<p>So, in this situation, Should I prefer FileReader to BufferedReader?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":1,"creation_date":1668241467,"post_id":74411332,"comment_id":131361592,"body_markdown":"I don‘t see how this could benefit from using Stream API. What would be the stream‘s content?","body":"I don‘t see how this could benefit from using Stream API. What would be the stream‘s content?"},{"owner":{"display_name":"user17233545"},"score":1,"creation_date":1668242056,"post_id":74411332,"comment_id":131361671,"body_markdown":"`Pattern.matches(str, regexDateFormat)` -&gt; `Pattern.matches(regexDateFormat, str)`","body":"<code>Pattern.matches(str, regexDateFormat)</code> -&gt; <code>Pattern.matches(regexDateFormat, str)</code>"},{"owner":{"account_id":26774791,"reputation":826,"user_id":20370596,"display_name":"Christoph Dahlen"},"score":0,"creation_date":1668242200,"post_id":74411332,"comment_id":131361691,"body_markdown":"Not sure if this is even valid code …","body":"Not sure if this is even valid code …"},{"owner":{"account_id":22057425,"reputation":135,"user_id":16320675,"display_name":"user16320675"},"score":1,"creation_date":1668243180,"post_id":74411332,"comment_id":131361828,"body_markdown":"Are questions about optimization *wanted* (accepted) on this site? BTW regular expressions are not the indicated for validating Date CONTENT! For format it may be OK (for learning purposes), but then you *overshot* the task: for &quot;validating date format&quot; only the first regex (`regexDateFormat`) is sufficient (IMHO)","body":"Are questions about optimization <i>wanted</i> (accepted) on this site? BTW regular expressions are not the indicated for validating Date CONTENT! For format it may be OK (for learning purposes), but then you <i>overshot</i> the task: for &quot;validating date format&quot; only the first regex (<code>regexDateFormat</code>) is sufficient (IMHO)"},{"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"score":0,"creation_date":1668243845,"post_id":74411332,"comment_id":131361918,"body_markdown":"Yes, a check method, which must use a regular expression.","body":"Yes, a check method, which must use a regular expression."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1668249092,"post_id":74411332,"comment_id":131362745,"body_markdown":"You want to reinvent a date parser - why is that when you have `DateTimeFormatter` that does that as a major part of its functionality?","body":"You want to reinvent a date parser - why is that when you have <code>DateTimeFormatter</code> that does that as a major part of its functionality?"},{"owner":{"display_name":"user17233545"},"score":1,"creation_date":1668265864,"post_id":74411332,"comment_id":131365854,"body_markdown":"See [Date checker by regex(Java) | Online editor and compiler](https://paiza.io/projects/LhIXVBrxOr-3sKTq386crw?language=java)","body":"See <a href=\"https://paiza.io/projects/LhIXVBrxOr-3sKTq386crw?language=java\" rel=\"nofollow noreferrer\">Date checker by regex(Java) | Online editor and compiler</a>"},{"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"score":0,"creation_date":1668274543,"post_id":74411332,"comment_id":131367590,"body_markdown":"Thanks for your solution. It&#39;s really interesting.","body":"Thanks for your solution. It&#39;s really interesting."}],"answers":[{"tags":[],"owner":{"account_id":47283,"reputation":703927,"user_id":139985,"accept_rate":69,"display_name":"Stephen C"},"comment_count":0,"down_vote_count":1,"up_vote_count":3,"is_accepted":true,"score":2,"last_activity_date":1668244505,"creation_date":1668244505,"answer_id":74411693,"question_id":74411332,"body_markdown":"*Condition: regular expressions must be used.* - Well there&#39;s your problem!!\r\n\r\nThis is not a good use-case for regexes.  They won&#39;t give you an efficient solution.   They certainly won&#39;t give you a good&lt;sup&gt;1&lt;/sup&gt; solution.\r\n\r\nBut if you want to optimize this, consider precompiling the two regexes and saving the compiled versions in `static` variables.\r\n\r\n---------------------------\r\n\r\n&lt;sup&gt;1 - OK, that is my opinion.  But I suspect that the vast majority of experienced Java programmers would agree.  Use the `java.time.format` classes to do your validation.  That&#39;s what they are designed for.&lt;/sup&gt;\r\n\r\n","title":"Regex for validating date format DD.MM.YYYY","body":"<p><em>Condition: regular expressions must be used.</em> - Well there's your problem!!</p>\n<p>This is not a good use-case for regexes.  They won't give you an efficient solution.   They certainly won't give you a good<sup>1</sup> solution.</p>\n<p>But if you want to optimize this, consider precompiling the two regexes and saving the compiled versions in <code>static</code> variables.</p>\n<hr />\n<p><sup>1 - OK, that is my opinion.  But I suspect that the vast majority of experienced Java programmers would agree.  Use the <code>java.time.format</code> classes to do your validation.  That's what they are designed for.</sup></p>\n"}],"owner":{"account_id":22312572,"reputation":140,"user_id":16561343,"display_name":"Evgeniy"},"comment_count":8,"delete_vote_count":1,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":170,"favorite_count":0,"down_vote_count":5,"up_vote_count":0,"closed_date":1668257565,"accepted_answer_id":74411693,"answer_count":1,"score":-5,"last_activity_date":1669194484,"creation_date":1668240596,"question_id":74411332,"body_markdown":"The task is following:\r\n\r\n&gt; Build the regular expression for following validation:  \r\n&gt; a) Date (Format: DD.MM.YYYY)\r\n\r\nI wrote the following code:\r\n\r\n    package validator.utils;\r\n    \r\n    import java.util.regex.Matcher;\r\n    import java.util.regex.Pattern;\r\n    \r\n    public class Validator {\r\n    \t\t\r\n    \tpublic static boolean checkDateFormatEU(String str) {\r\n    \t\t//* Date (Format: DD.MM.YYYY)*/\r\n    \t\tfinal String regexDateFormat = &quot;^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$&quot;;\r\n            if (str == null || !(Pattern.matches(regexDateFormat, str) ) ) {\r\n                return false;\r\n            }\r\n            String year = str.substring(6, 9);\r\n            //*Range from 1100 to current century*/\r\n            final String REGEX_31_DAY_MONTHS = &quot;(0[1-9]|[12][0-9]|3[01])[\\\\.](0[13578]|1[02])[\\\\.](10|11|12|13|14|15|16|17|18|19|20)[0-9]{2}&quot;;\r\n            final String REGEX_30_DAY_MONTHS = &quot;(0[1-9]|[12][0-9]|30)[\\\\.](0[469]|11)[\\\\.](10|11|12|13|14|15|16|17|18|19|20)[0-9]{2}&quot;;\r\n            final String REGEX_FEB_29_DAY_MONTHS = &quot;29[\\\\.](02)[\\\\.](((10|11|12|13|14|15|16|17|18|19|20)(04|08|[2468][048]|[13579][26]))|2000)&quot;;\r\n            final String REGEX_FEB_1_28_DAY_MONTHS = &quot;(0[1-9]|1[0-9]|2[0-8])[\\\\\\\\.](02)[\\\\\\\\.](10|11|12|13|14|15|16|17|18|19|20)[0-9]{2}&quot;;\r\n            final String REGEX_LEAP_YEAR = &quot;((&quot; + REGEX_31_DAY_MONTHS + &quot;)|(&quot; + REGEX_30_DAY_MONTHS + &quot;)|(&quot; + \r\n            \t\t\t\t\t\t\t   REGEX_FEB_29_DAY_MONTHS + &quot;)|(&quot; + REGEX_FEB_1_28_DAY_MONTHS + &quot;))&quot;;\r\n            final String REGEX_NON_LEAP_YEAR = &quot;((&quot; + REGEX_31_DAY_MONTHS + &quot;)|(&quot; + REGEX_30_DAY_MONTHS + &quot;)|(&quot; + \r\n            \t\t\t\t\t\t\t   \t   REGEX_FEB_1_28_DAY_MONTHS + &quot;))&quot;;\r\n            final String CURRENT_REGEX =  isLeapYear(year) ? REGEX_LEAP_YEAR\r\n    \t\t\t\t\t\t\t\t\t     \t\t\t   : REGEX_NON_LEAP_YEAR;\r\n            Pattern p = Pattern.compile(CURRENT_REGEX);\r\n            Matcher m = p.matcher(str);\r\n    \t\treturn m.matches();\r\n    \t}\r\n    \t\r\n    \tpublic static boolean isLeapYear(String str) {\r\n    \t\tboolean yearIsLeap = false;\r\n    \t\tint year = Integer.valueOf(str);\r\n    \t\tif ( ( ( year % 4 == 0 ) &amp;&amp; ( year % 100 != 0 ) ) || ( year % 400 == 0 ) ) {\r\n    \t\t\tyearIsLeap = true;\r\n    \t\t}\r\n    \t\treturn yearIsLeap;\r\n    \t}\r\n    }\r\n\r\nThere is a drawback to this code, the date range is from 1100 year to present. How can this code be optimized in order to get rid of this drawback? How can the regex be optimized in order for the date to be of any range?\r\n\r\nCondition: a regular expressions must be used.\r\n","title":"Regex for validating date format DD.MM.YYYY","body":"<p>The task is following:</p>\n<blockquote>\n<p>Build the regular expression for following validation:<br />\na) Date (Format: DD.MM.YYYY)</p>\n</blockquote>\n<p>I wrote the following code:</p>\n<pre><code>package validator.utils;\n\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n\npublic class Validator {\n        \n    public static boolean checkDateFormatEU(String str) {\n        //* Date (Format: DD.MM.YYYY)*/\n        final String regexDateFormat = &quot;^\\\\d{2}\\\\.\\\\d{2}\\\\.\\\\d{4}$&quot;;\n        if (str == null || !(Pattern.matches(regexDateFormat, str) ) ) {\n            return false;\n        }\n        String year = str.substring(6, 9);\n        //*Range from 1100 to current century*/\n        final String REGEX_31_DAY_MONTHS = &quot;(0[1-9]|[12][0-9]|3[01])[\\\\.](0[13578]|1[02])[\\\\.](10|11|12|13|14|15|16|17|18|19|20)[0-9]{2}&quot;;\n        final String REGEX_30_DAY_MONTHS = &quot;(0[1-9]|[12][0-9]|30)[\\\\.](0[469]|11)[\\\\.](10|11|12|13|14|15|16|17|18|19|20)[0-9]{2}&quot;;\n        final String REGEX_FEB_29_DAY_MONTHS = &quot;29[\\\\.](02)[\\\\.](((10|11|12|13|14|15|16|17|18|19|20)(04|08|[2468][048]|[13579][26]))|2000)&quot;;\n        final String REGEX_FEB_1_28_DAY_MONTHS = &quot;(0[1-9]|1[0-9]|2[0-8])[\\\\\\\\.](02)[\\\\\\\\.](10|11|12|13|14|15|16|17|18|19|20)[0-9]{2}&quot;;\n        final String REGEX_LEAP_YEAR = &quot;((&quot; + REGEX_31_DAY_MONTHS + &quot;)|(&quot; + REGEX_30_DAY_MONTHS + &quot;)|(&quot; + \n                                       REGEX_FEB_29_DAY_MONTHS + &quot;)|(&quot; + REGEX_FEB_1_28_DAY_MONTHS + &quot;))&quot;;\n        final String REGEX_NON_LEAP_YEAR = &quot;((&quot; + REGEX_31_DAY_MONTHS + &quot;)|(&quot; + REGEX_30_DAY_MONTHS + &quot;)|(&quot; + \n                                           REGEX_FEB_1_28_DAY_MONTHS + &quot;))&quot;;\n        final String CURRENT_REGEX =  isLeapYear(year) ? REGEX_LEAP_YEAR\n                                                       : REGEX_NON_LEAP_YEAR;\n        Pattern p = Pattern.compile(CURRENT_REGEX);\n        Matcher m = p.matcher(str);\n        return m.matches();\n    }\n    \n    public static boolean isLeapYear(String str) {\n        boolean yearIsLeap = false;\n        int year = Integer.valueOf(str);\n        if ( ( ( year % 4 == 0 ) &amp;&amp; ( year % 100 != 0 ) ) || ( year % 400 == 0 ) ) {\n            yearIsLeap = true;\n        }\n        return yearIsLeap;\n    }\n}\n</code></pre>\n<p>There is a drawback to this code, the date range is from 1100 year to present. How can this code be optimized in order to get rid of this drawback? How can the regex be optimized in order for the date to be of any range?</p>\n<p>Condition: a regular expressions must be used.</p>\n"},{"tags":["java","selenium","selenium-webdriver","xpath","css-selectors"],"comments":[{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1669185643,"post_id":74542026,"comment_id":131584406,"body_markdown":"Avoid `By.linkText()` for low reliability. If there are more elements with the text, you get the first one instead of the desired one. Please share your full code sample including output and page url if not confidential.","body":"Avoid <code>By.linkText()</code> for low reliability. If there are more elements with the text, you get the first one instead of the desired one. Please share your full code sample including output and page url if not confidential."},{"owner":{"account_id":25113999,"reputation":3,"user_id":18963282,"display_name":"Ash"},"score":0,"creation_date":1669187494,"post_id":74542026,"comment_id":131584823,"body_markdown":"@pburgr - my Html code -&gt; &lt;a href=&quot;Javascript:;&quot; class=&quot;btn btn-typ4 searchFilter&quot; title=&quot;Filter&quot;&gt;&lt;span class=&quot;fa fa-filter mrg5-R&quot;&gt;&lt;/span&gt;Filter&lt;/a&gt; and my java code is - &gt; WebElement filter = driver.findElement(By.linkText(&quot;Filter&quot;)); filter.click();","body":"@pburgr - my Html code -&gt; &lt;a href=&quot;Javascript:;&quot; class=&quot;btn btn-typ4 searchFilter&quot; title=&quot;Filter&quot;&gt;&lt;span class=&quot;fa fa-filter mrg5-R&quot;&gt;&lt;/span&gt;Filter&lt;/a&gt; and my java code is - &gt; WebElement filter = driver.findElement(By.linkText(&quot;Filter&quot;)); filter.click();"},{"owner":{"account_id":25113999,"reputation":3,"user_id":18963282,"display_name":"Ash"},"score":0,"creation_date":1669188408,"post_id":74542026,"comment_id":131585064,"body_markdown":"@pburgr - Output - no such element: Unable to locate element: {&quot;method&quot;:&quot;link text&quot;,&quot;selector&quot;:&quot;Filter&quot;}","body":"@pburgr - Output - no such element: Unable to locate element: {&quot;method&quot;:&quot;link text&quot;,&quot;selector&quot;:&quot;Filter&quot;}"},{"owner":{"account_id":2364038,"reputation":470,"user_id":2070127,"display_name":"Easty77"},"score":0,"creation_date":1669189203,"post_id":74542026,"comment_id":131585267,"body_markdown":"filter = driver.findElement(By.xpath(&quot;//a[@title=&#39;Filter&#39;]&quot;));","body":"filter = driver.findElement(By.xpath(&quot;//a[@title=&#39;Filter&#39;]&quot;));"},{"owner":{"account_id":25113999,"reputation":3,"user_id":18963282,"display_name":"Ash"},"score":0,"creation_date":1669196465,"post_id":74542026,"comment_id":131587525,"body_markdown":"@Easty77 - Not working as you suggested.","body":"@Easty77 - Not working as you suggested."},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1669204122,"post_id":74542026,"comment_id":131590241,"body_markdown":"@Ash can you share URL?","body":"@Ash can you share URL?"},{"owner":{"account_id":25113999,"reputation":3,"user_id":18963282,"display_name":"Ash"},"score":0,"creation_date":1669205439,"post_id":74542026,"comment_id":131590711,"body_markdown":"@pburgr - URL is confidential - Please check Image, xpath, cssSelector, Code in question detail. I hope that is enough. Still I am unable to locate that element, tried with many times but not working. :(","body":"@pburgr - URL is confidential - Please check Image, xpath, cssSelector, Code in question detail. I hope that is enough. Still I am unable to locate that element, tried with many times but not working. :("},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1669207443,"post_id":74542026,"comment_id":131591393,"body_markdown":"Regarding the sample dynamic xpath `&quot;//a[@class=&#39;btn btn-typ4 searchFilter&#39;]&quot;` should work. But without accessing the page and trying by myself I can tell what&#39;s wrong.\nTry `Thread.sleep(miliseconds)` just to see the page (and it&#39;s source code) during runtime.","body":"Regarding the sample dynamic xpath <code>&quot;&#47;&#47;a[@class=&#39;btn btn-typ4 searchFilter&#39;]&quot;</code> should work. But without accessing the page and trying by myself I can tell what&#39;s wrong. Try <code>Thread.sleep(miliseconds)</code> just to see the page (and it&#39;s source code) during runtime."},{"owner":{"account_id":25113999,"reputation":3,"user_id":18963282,"display_name":"Ash"},"score":0,"creation_date":1669207918,"post_id":74542026,"comment_id":131591579,"body_markdown":"@pburgr - Used dynamic path as you suggested above, but still not working., tried all possible cases but no luck. Still working on that to click the &#39;Filter&#39; button. Let me know if still any other way to click the button. Yes I have used thread.sleep as well. Thanks.","body":"@pburgr - Used dynamic path as you suggested above, but still not working., tried all possible cases but no luck. Still working on that to click the &#39;Filter&#39; button. Let me know if still any other way to click the button. Yes I have used thread.sleep as well. Thanks."},{"owner":{"account_id":12360572,"reputation":1730,"user_id":9014957,"accept_rate":17,"display_name":"pburgr"},"score":0,"creation_date":1669214530,"post_id":74542026,"comment_id":131594189,"body_markdown":"@Ash Try this: `List&lt;WebElement&gt; elements = driver.findElements(By.tagName(&quot;a&quot;));`. Put a breakpoint after this line and debug your code to see all the `a` tags found by driver. One after another identify the tag in the page (position, text, etc.).","body":"@Ash Try this: <code>List&lt;WebElement&gt; elements = driver.findElements(By.tagName(&quot;a&quot;));</code>. Put a breakpoint after this line and debug your code to see all the <code>a</code> tags found by driver. One after another identify the tag in the page (position, text, etc.)."},{"owner":{"account_id":-1,"reputation":1,"user_id":-1,"display_name":"Community"},"score":0,"creation_date":1669220208,"post_id":74542026,"comment_id":131596443,"body_markdown":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.","body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking."}],"answers":[{"tags":[],"owner":{"account_id":10404380,"reputation":2588,"user_id":7671727,"display_name":"AbiSaran"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669194285,"creation_date":1669194285,"answer_id":74544156,"question_id":74542026,"body_markdown":"Try this:\r\n\r\n    .//a[@class=&#39;btn btn-typ4 searchFilter&#39; and @title=&#39;Filter&#39;]/span\r\n\r\n","title":"How to click element under &lt;a href&gt; link using Selenium java","body":"<p>Try this:</p>\n<pre><code>.//a[@class='btn btn-typ4 searchFilter' and @title='Filter']/span\n</code></pre>\n"}],"owner":{"account_id":25113999,"reputation":3,"user_id":18963282,"display_name":"Ash"},"comment_count":11,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":280,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669194285,"creation_date":1669180016,"question_id":74542026,"body_markdown":"[HTML code][1]\r\n\r\nusing Selenium + Java. I need to click the filter button.\r\n\r\nCurrently, I am using below code but it doen&#39;t work.\r\n\r\n    WebElement filter = driver.findElement(By.linkText(&quot;Filter&quot;));\r\n    filter.click();\r\n\r\n\r\nXpath - //*@id=&quot;frmBookingListing&quot;]/div[3]/div[1]/div[3]/div/div[1]/div/div[2]/a[2]\r\n\r\ncssSelector - .searchFilter\r\n\r\nI don&#39;t know what&#39;s wrong with my code. please help to click on filter button. \r\nThanks in advance.\r\n\r\n\r\n  [1]: https://i.stack.imgur.com/WPdIx.png","title":"How to click element under &lt;a href&gt; link using Selenium java","body":"<p><a href=\"https://i.stack.imgur.com/WPdIx.png\" rel=\"nofollow noreferrer\">HTML code</a></p>\n<p>using Selenium + Java. I need to click the filter button.</p>\n<p>Currently, I am using below code but it doen't work.</p>\n<pre><code>WebElement filter = driver.findElement(By.linkText(&quot;Filter&quot;));\nfilter.click();\n</code></pre>\n<p>Xpath - //*@id=&quot;frmBookingListing&quot;]/div[3]/div<a href=\"https://i.stack.imgur.com/WPdIx.png\" rel=\"nofollow noreferrer\">1</a>/div[3]/div/div<a href=\"https://i.stack.imgur.com/WPdIx.png\" rel=\"nofollow noreferrer\">1</a>/div/div[2]/a[2]</p>\n<p>cssSelector - .searchFilter</p>\n<p>I don't know what's wrong with my code. please help to click on filter button.\nThanks in advance.</p>\n"},{"tags":["java","batch-file"],"comments":[{"owner":{"account_id":11884699,"reputation":497,"user_id":8697412,"display_name":"Barracuda"},"score":0,"creation_date":1669105820,"post_id":74529533,"comment_id":131562079,"body_markdown":"Maybe you can pass a temp file as an argument and store the result there?","body":"Maybe you can pass a temp file as an argument and store the result there?"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669105999,"post_id":74529533,"comment_id":131562151,"body_markdown":"`main(String...)` can&#39;t return any value if it&#39;s to be a real main method. You&#39;d need to write the output somewhere else, e.g. to stdout (via `System.out`) and have your batch read it.","body":"<code>main(String...)</code> can&#39;t return any value if it&#39;s to be a real main method. You&#39;d need to write the output somewhere else, e.g. to stdout (via <code>System.out</code>) and have your batch read it."},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1669107496,"post_id":74529533,"comment_id":131562583,"body_markdown":"Would you be able to solve the problem if you were just running an existing executable program? Because that is effectively what happens here. Or is the problem &quot;how do I make the Java program have an exit status code?&quot; Or just what? &quot;Tried many ways to execute the code and store the value&quot; **Why are you telling us this**? If it&#39;s because you think &quot;I need to claim that I am not lazy in order to get an answer&quot;, that is the wrong mindset - we want to **see** what you tried *in order to fix those attempts*.","body":"Would you be able to solve the problem if you were just running an existing executable program? Because that is effectively what happens here. Or is the problem &quot;how do I make the Java program have an exit status code?&quot; Or just what? &quot;Tried many ways to execute the code and store the value&quot; <b>Why are you telling us this</b>? If it&#39;s because you think &quot;I need to claim that I am not lazy in order to get an answer&quot;, that is the wrong mindset - we want to <b>see</b> what you tried <i>in order to fix those attempts</i>."},{"owner":{"account_id":25984342,"reputation":31,"user_id":19697504,"display_name":"bisi"},"score":0,"creation_date":1669117921,"post_id":74529533,"comment_id":131566352,"body_markdown":"@KarlKnechtel\nI&#39;m quite new to this portal, so when I&#39;ve been taken to the &quot;Explain you attempts&quot; section **I thought it was mandatory**. So I wrote that statement because I honestly didn&#39;t remember all my attempts (**I have no need to demonstrate I&#39;m not lazy here**).\nBut now the question is.. Is the problem just that sentence? What would have happened if I had left that section blank?\nIs it possible on this portal to make a question without first doing several attempts on your own? If so, maybe I have the wrong mindset..\nNow that I know, I&#39;ve immediately delete that sentence.","body":"@KarlKnechtel I&#39;m quite new to this portal, so when I&#39;ve been taken to the &quot;Explain you attempts&quot; section <b>I thought it was mandatory</b>. So I wrote that statement because I honestly didn&#39;t remember all my attempts (<b>I have no need to demonstrate I&#39;m not lazy here</b>). But now the question is.. Is the problem just that sentence? What would have happened if I had left that section blank? Is it possible on this portal to make a question without first doing several attempts on your own? If so, maybe I have the wrong mindset.. Now that I know, I&#39;ve immediately delete that sentence."},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669118520,"post_id":74529533,"comment_id":131566544,"body_markdown":"You could send stdout into [a variable](https://stackoverflow.com/questions/2033338/get-stdout-into-a-variable) but this is not really a Java question at all (because it would be the same with the stdout of any process) but a question for the Windows/DOS topic","body":"You could send stdout into <a href=\"https://stackoverflow.com/questions/2033338/get-stdout-into-a-variable\">a variable</a> but this is not really a Java question at all (because it would be the same with the stdout of any process) but a question for the Windows/DOS topic"},{"owner":{"account_id":248321,"reputation":62668,"user_id":523612,"accept_rate":100,"display_name":"Karl Knechtel"},"score":0,"creation_date":1669222333,"post_id":74529533,"comment_id":131597291,"body_markdown":"&quot;so when I&#39;ve been taken to the &quot;Explain you attempts&quot; section I thought it was mandatory.&quot; Please note carefully: telling us &quot;I tried many ways to do this&quot; **is not explaining anything**.","body":"&quot;so when I&#39;ve been taken to the &quot;Explain you attempts&quot; section I thought it was mandatory.&quot; Please note carefully: telling us &quot;I tried many ways to do this&quot; <b>is not explaining anything</b>."}],"answers":[{"comments":[{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669109644,"post_id":74529838,"comment_id":131563376,"body_markdown":"It&#39;s a *batch file* not a Bash script","body":"It&#39;s a <i>batch file</i> not a Bash script"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1669111042,"post_id":74529838,"comment_id":131563911,"body_markdown":"@g00se+ in batch (i.e. CMD) use `%errorlevel%`. But it must be on a subsequent line, unlike Unix shells where you could do one line like `java blah; RETURN=$?`","body":"@g00se+ in batch (i.e. CMD) use <code>%errorlevel%</code>. But it must be on a subsequent line, unlike Unix shells where you could do one line like <code>java blah; RETURN=$?</code>"},{"owner":{"account_id":22124137,"reputation":3297,"user_id":16376827,"display_name":"g00se"},"score":0,"creation_date":1669111405,"post_id":74529838,"comment_id":131564028,"body_markdown":"@dave_thompson_085 Yes, I know but that&#39;s not what the OP wants ;) afaics It&#39;s a string that&#39;s required","body":"@dave_thompson_085 Yes, I know but that&#39;s not what the OP wants ;) afaics It&#39;s a string that&#39;s required"},{"owner":{"account_id":3421244,"reputation":35883,"user_id":2868801,"display_name":"dave_thompson_085"},"score":0,"creation_date":1669190342,"post_id":74529838,"comment_id":131585541,"body_markdown":"@g00se: the Q gives String as an example but text only says &#39;another type [than void]&#39;. And this A is specifically for a number (in Unix only a _small_ number).","body":"@g00se: the Q gives String as an example but text only says &#39;another type [than void]&#39;. And this A is specifically for a number (in Unix only a <i>small</i> number)."}],"tags":[],"owner":{"account_id":3631682,"reputation":31,"user_id":3027638,"display_name":"haaks"},"comment_count":4,"down_vote_count":0,"up_vote_count":3,"is_accepted":false,"score":3,"last_activity_date":1669107290,"creation_date":1669107290,"answer_id":74529838,"question_id":74529533,"body_markdown":"You can end the main method with System.exit() instead of return:\r\n\r\n```java\r\npublic class Main{\r\n    public static void main(String[] args) {\r\n        int returnValue;\r\n\r\n        // code to execute...\r\n        returnValue = 123;\r\n        \r\n        System.exit(returnValue);\r\n    }\r\n}\r\n```\r\nThen in the script:\r\n\r\n```sh\r\n#!/bin/bash\r\n\r\njava ./Main.java\r\nRETURNVALUE=$?\r\n\r\necho &quot;The return value was $RETURNVALUE&quot;\r\n```\r\n\r\nwhich gives you:\r\n```\r\n$ ./script.sh  \r\nThe return value was 123\r\n```\r\n\r\nThe exit code can&#39;t be a string, only a number from 0 to 255. If you want to return a string instead, consider printing to stdout instead and saving that to a variable.\r\n","title":"Call java class in batch file and store the return value of the &quot;main&quot; method in batch variable","body":"<p>You can end the main method with System.exit() instead of return:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main{\n    public static void main(String[] args) {\n        int returnValue;\n\n        // code to execute...\n        returnValue = 123;\n        \n        System.exit(returnValue);\n    }\n}\n</code></pre>\n<p>Then in the script:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\njava ./Main.java\nRETURNVALUE=$?\n\necho &quot;The return value was $RETURNVALUE&quot;\n</code></pre>\n<p>which gives you:</p>\n<pre><code>$ ./script.sh  \nThe return value was 123\n</code></pre>\n<p>The exit code can't be a string, only a number from 0 to 255. If you want to return a string instead, consider printing to stdout instead and saving that to a variable.</p>\n"}],"owner":{"account_id":25984342,"reputation":31,"user_id":19697504,"display_name":"bisi"},"comment_count":6,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":258,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":1,"score":1,"last_activity_date":1669194251,"creation_date":1669105631,"question_id":74529533,"body_markdown":"Is it possible to run a java class in a batch file with a main method inside, changing the return type of the method from &quot;void&quot; to another type, and get the return value in batch file?\r\n\r\nI mean something similar to the following:\r\n\r\nJava class:\r\n\r\n```\r\npublic class Main{\r\n\r\n\tpublic static String main(String[] args) {\r\n\t\tpublic String returnValue;\r\n\t\t\r\n\t\t// code to execute...\r\n\t\t\r\n\t\treturn returnValue;\r\n\t}\r\n}\r\n```\r\n\r\n\r\nBatch file:\r\n\r\n```\r\n...\r\nset RETURNVALUE = &quot;&quot;\r\n//call &quot;java com.test.Main&quot; and store return value in RETURNVALUE variable\r\n...\r\n\r\n```\r\nI need to make some checks in the java class, and then execute the subsequent instructions in batch file according to the result given by the java class.\r\n\r\nAny help will be appreciated\r\n\r\n","title":"Call java class in batch file and store the return value of the &quot;main&quot; method in batch variable","body":"<p>Is it possible to run a java class in a batch file with a main method inside, changing the return type of the method from &quot;void&quot; to another type, and get the return value in batch file?</p>\n<p>I mean something similar to the following:</p>\n<p>Java class:</p>\n<pre><code>public class Main{\n\n    public static String main(String[] args) {\n        public String returnValue;\n        \n        // code to execute...\n        \n        return returnValue;\n    }\n}\n</code></pre>\n<p>Batch file:</p>\n<pre><code>...\nset RETURNVALUE = &quot;&quot;\n//call &quot;java com.test.Main&quot; and store return value in RETURNVALUE variable\n...\n\n</code></pre>\n<p>I need to make some checks in the java class, and then execute the subsequent instructions in batch file according to the result given by the java class.</p>\n<p>Any help will be appreciated</p>\n"},{"tags":["java","maven","itext","maven-plugin","itext7"],"comments":[{"owner":{"account_id":112317,"reputation":93949,"user_id":296328,"accept_rate":60,"display_name":"khmarbaise"},"score":0,"creation_date":1669187509,"post_id":74539577,"comment_id":131584828,"body_markdown":"Can you explain why you have configured that: `&lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;`??? I strongly recommend to stick with conventions meaning directories: Java source in `src/main/java/&lt;package&gt;` unit tests in `src/test/java/&lt;package&gt;/XYTest.java` and resources for code in `src/main/resources/...` and for tests only `src/test/resources`...","body":"Can you explain why you have configured that: <code>&lt;sourceDirectory&gt;src&lt;&#47;sourceDirectory&gt;</code>??? I strongly recommend to stick with conventions meaning directories: Java source in <code>src&#47;main&#47;java&#47;&lt;package&gt;</code> unit tests in <code>src&#47;test&#47;java&#47;&lt;package&gt;&#47;XYTest.java</code> and resources for code in <code>src&#47;main&#47;resources&#47;...</code> and for tests only <code>src&#47;test&#47;resources</code>..."},{"owner":{"account_id":26671785,"reputation":354,"user_id":20283130,"display_name":"MJG"},"score":1,"creation_date":1669192057,"post_id":74539577,"comment_id":131586049,"body_markdown":"How does the module-info.java look like?","body":"How does the module-info.java look like?"}],"answers":[{"tags":[],"owner":{"account_id":26671785,"reputation":354,"user_id":20283130,"display_name":"MJG"},"comment_count":0,"down_vote_count":0,"up_vote_count":0,"is_accepted":false,"score":0,"last_activity_date":1669194188,"creation_date":1669194188,"answer_id":74544141,"question_id":74539577,"body_markdown":"The pom.xml and presumably the java file are looking fine.\r\nI just created a project to reproduce your problem, but it was not possible when `mvn package` (java file is in `src/itext/Main.java`).\r\n\r\n```\r\npackage itext;\r\nimport com.itextpdf.kernel.font.PdfFontFactory;\r\npublic class Main {\r\n    public static void main(String[] args) {\r\n        PdfFontFactory pdfFontFactory = new PdfFontFactory();\r\n        System.out.printf(&quot;Factory: %s%n&quot;, pdfFontFactory);\r\n    }\r\n}\r\n```\r\n\r\nOutput: \r\n```\r\nFactory: com.itextpdf.kernel.font.PdfFontFactory@3d075dc0\r\n\r\nProcess finished with exit code 0\r\n```\r\n\r\nPerhaps you should keep an eye on what is your jdk-version, maven-version.\r\n\r\nAlso check if there is special settings in maven (settings.xml), check output of `mvn package -X` if everything is fine. \r\n\r\nTry if you at least can make it work in your IDE that comes w/ Maven support.","title":"IText Error &quot;The type com.itextpdf.XXX is not accessible&quot;","body":"<p>The pom.xml and presumably the java file are looking fine.\nI just created a project to reproduce your problem, but it was not possible when <code>mvn package</code> (java file is in <code>src/itext/Main.java</code>).</p>\n<pre><code>package itext;\nimport com.itextpdf.kernel.font.PdfFontFactory;\npublic class Main {\n    public static void main(String[] args) {\n        PdfFontFactory pdfFontFactory = new PdfFontFactory();\n        System.out.printf(&quot;Factory: %s%n&quot;, pdfFontFactory);\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>Factory: com.itextpdf.kernel.font.PdfFontFactory@3d075dc0\n\nProcess finished with exit code 0\n</code></pre>\n<p>Perhaps you should keep an eye on what is your jdk-version, maven-version.</p>\n<p>Also check if there is special settings in maven (settings.xml), check output of <code>mvn package -X</code> if everything is fine.</p>\n<p>Try if you at least can make it work in your IDE that comes w/ Maven support.</p>\n"}],"owner":{"account_id":27018039,"reputation":1,"user_id":20576510,"display_name":"Floran"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":246,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":1,"score":0,"last_activity_date":1669194188,"creation_date":1669155257,"question_id":74539577,"body_markdown":"I have this problem for 2 days I did all possible research.\r\n\r\n\r\n```\r\nimport com.itextpdf.io.font.constants.StandardFonts;\r\nimport com.itextpdf.kernel.font.PdfFont;\r\nimport com.itextpdf.kernel.font.PdfFontFactory;\r\nimport com.itextpdf.kernel.pdf.PdfDocument;\r\nimport com.itextpdf.kernel.pdf.PdfReader;\r\nimport com.itextpdf.kernel.pdf.PdfWriter;\r\nimport com.itextpdf.kernel.pdf.canvas.parser.PdfTextExtractor;\r\nimport com.itextpdf.layout.Document;\r\nimport com.itextpdf.layout.element.Paragraph;\r\nimport com.itextpdf.layout.properties.TextAlignment;\r\n```\r\n\r\nAll import are with errors &quot;The type com.itextpdf.XXX is not accessible&quot;.\r\n\r\nI followed the installation tutorial with maven, here is my pom.xml : \r\n\r\n\r\n```\r\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\r\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\r\n  &lt;groupId&gt;pdf_dem&lt;/groupId&gt;\r\n  &lt;artifactId&gt;pdf_dem&lt;/artifactId&gt;\r\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\r\n  &lt;build&gt;\r\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\r\n    &lt;plugins&gt;\r\n      &lt;plugin&gt;\r\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\r\n        &lt;version&gt;3.8.1&lt;/version&gt;\r\n        &lt;configuration&gt;\r\n          &lt;release&gt;18&lt;/release&gt;\r\n        &lt;/configuration&gt;\r\n      &lt;/plugin&gt;\r\n    &lt;/plugins&gt;\r\n  &lt;/build&gt;\r\n  \r\n  &lt;properties&gt;\r\n   &lt;itext.version&gt;7.2.4&lt;/itext.version&gt;\r\n&lt;/properties&gt;\r\n&lt;dependencies&gt;\r\n\t&lt;!-- add all iText 7 modules --&gt;\r\n    &lt;dependency&gt;\r\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\r\n        &lt;artifactId&gt;itext7-core&lt;/artifactId&gt;\r\n        &lt;version&gt;${itext.version}&lt;/version&gt;\r\n        &lt;type&gt;pom&lt;/type&gt;\r\n    &lt;/dependency&gt;\r\n&lt;/dependencies&gt;\r\n\r\n&lt;/project&gt;\r\n```\r\n\r\n\r\nThank you for you precious help :)\r\n\r\n\r\n\r\n\r\n\r\n\r\nI modify pom.xml as stated in the Itext guideline [https://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-itext-7-for-java]\r\n\r\n","title":"IText Error &quot;The type com.itextpdf.XXX is not accessible&quot;","body":"<p>I have this problem for 2 days I did all possible research.</p>\n<pre><code>import com.itextpdf.io.font.constants.StandardFonts;\nimport com.itextpdf.kernel.font.PdfFont;\nimport com.itextpdf.kernel.font.PdfFontFactory;\nimport com.itextpdf.kernel.pdf.PdfDocument;\nimport com.itextpdf.kernel.pdf.PdfReader;\nimport com.itextpdf.kernel.pdf.PdfWriter;\nimport com.itextpdf.kernel.pdf.canvas.parser.PdfTextExtractor;\nimport com.itextpdf.layout.Document;\nimport com.itextpdf.layout.element.Paragraph;\nimport com.itextpdf.layout.properties.TextAlignment;\n</code></pre>\n<p>All import are with errors &quot;The type com.itextpdf.XXX is not accessible&quot;.</p>\n<p>I followed the installation tutorial with maven, here is my pom.xml :</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n  &lt;groupId&gt;pdf_dem&lt;/groupId&gt;\n  &lt;artifactId&gt;pdf_dem&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n  &lt;build&gt;\n    &lt;sourceDirectory&gt;src&lt;/sourceDirectory&gt;\n    &lt;plugins&gt;\n      &lt;plugin&gt;\n        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n        &lt;version&gt;3.8.1&lt;/version&gt;\n        &lt;configuration&gt;\n          &lt;release&gt;18&lt;/release&gt;\n        &lt;/configuration&gt;\n      &lt;/plugin&gt;\n    &lt;/plugins&gt;\n  &lt;/build&gt;\n  \n  &lt;properties&gt;\n   &lt;itext.version&gt;7.2.4&lt;/itext.version&gt;\n&lt;/properties&gt;\n&lt;dependencies&gt;\n    &lt;!-- add all iText 7 modules --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.itextpdf&lt;/groupId&gt;\n        &lt;artifactId&gt;itext7-core&lt;/artifactId&gt;\n        &lt;version&gt;${itext.version}&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Thank you for you precious help :)</p>\n<p>I modify pom.xml as stated in the Itext guideline [https://kb.itextpdf.com/home/it7kb/installation-guidelines/installing-itext-7-for-java]</p>\n"},{"tags":["java","spring-boot","graphql","spring-webflux"],"comments":[{"owner":{"account_id":2031794,"reputation":393,"user_id":1815284,"display_name":"ouid"},"score":0,"creation_date":1668700496,"post_id":74472353,"comment_id":131474869,"body_markdown":"Have you also tried using Mono&lt;Page&gt;?","body":"Have you also tried using Mono&lt;Page&gt;?"},{"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"score":0,"creation_date":1668774646,"post_id":74472353,"comment_id":131493898,"body_markdown":"@ouid Yes I did, same result","body":"@ouid Yes I did, same result"},{"owner":{"account_id":2031794,"reputation":393,"user_id":1815284,"display_name":"ouid"},"score":0,"creation_date":1669033063,"post_id":74472353,"comment_id":131543334,"body_markdown":"Maybe you could try to use `com.graphql-java-kickstart:graphql-spring-boot-starter` instead of `com.graphql-java:*` to see if it makes a difference.","body":"Maybe you could try to use <code>com.graphql-java-kickstart:graphql-spring-boot-starter</code> instead of <code>com.graphql-java:*</code> to see if it makes a difference."},{"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"score":0,"creation_date":1669042966,"post_id":74472353,"comment_id":131547050,"body_markdown":"@ouid tried that, same exception is being thrown..","body":"@ouid tried that, same exception is being thrown.."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":2,"creation_date":1669044287,"post_id":74472353,"comment_id":131547596,"body_markdown":"You need `spring-boot-starter-webflux` not `spring-boot-starter-web` as the latter is blocking (using the servlet API where the former is reactive (you appear to have both, use one or the other not both). Another thing is your dependencies are a mess and bound for trouble you are mixing, at least 3 versions of Spring Boot modules, never do that as that will lead to issues. Finally I don&#39;t really get all the mixture of versions and why not simply use `spring-boot-starter-graphql` instead of the experimental (and thus old) stuff.","body":"You need <code>spring-boot-starter-webflux</code> not <code>spring-boot-starter-web</code> as the latter is blocking (using the servlet API where the former is reactive (you appear to have both, use one or the other not both). Another thing is your dependencies are a mess and bound for trouble you are mixing, at least 3 versions of Spring Boot modules, never do that as that will lead to issues. Finally I don&#39;t really get all the mixture of versions and why not simply use <code>spring-boot-starter-graphql</code> instead of the experimental (and thus old) stuff."},{"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"score":0,"creation_date":1669118420,"post_id":74472353,"comment_id":131566513,"body_markdown":"@M.Deinum Thanks for noticing, but removing the `spring-boot-starter-web` did not change anything, neither did making the spring modules&#39; versions consistent as `2.6.3`. There is no mixture of graphql dependencies, I just have tried all the existing ones, one by one, but neither of them got me to where I want to be...","body":"@M.Deinum Thanks for noticing, but removing the <code>spring-boot-starter-web</code> did not change anything, neither did making the spring modules&#39; versions consistent as <code>2.6.3</code>. There is no mixture of graphql dependencies, I just have tried all the existing ones, one by one, but neither of them got me to where I want to be..."},{"owner":{"account_id":3192259,"reputation":117619,"user_id":2696260,"display_name":"M. Deinum"},"score":0,"creation_date":1669119398,"post_id":74472353,"comment_id":131566837,"body_markdown":"Still you didn&#39;t use the `spring-boot-starter-graphql` bit some mix of 3rd party dependencies. I would strongly suggest to remove all GraphQL dependencies and only add `spring-boot-starter-graphql` and retry (and without the `spring-boot-starter-web`.). Remove the `version` tag from the official `org.springframework.boot` dependencies. As you already have webflux you don&#39;t need the `reactor-core` dependency, you also don&#39;t need the security dependencies as you already have `spring-boot-starter-security`. Still looks like a dependency thing due to all the stuff in there.","body":"Still you didn&#39;t use the <code>spring-boot-starter-graphql</code> bit some mix of 3rd party dependencies. I would strongly suggest to remove all GraphQL dependencies and only add <code>spring-boot-starter-graphql</code> and retry (and without the <code>spring-boot-starter-web</code>.). Remove the <code>version</code> tag from the official <code>org.springframework.boot</code> dependencies. As you already have webflux you don&#39;t need the <code>reactor-core</code> dependency, you also don&#39;t need the security dependencies as you already have <code>spring-boot-starter-security</code>. Still looks like a dependency thing due to all the stuff in there."},{"owner":{"account_id":26482382,"reputation":239,"user_id":20121447,"display_name":"Julio C&#233;sar Estravis"},"score":0,"creation_date":1669127729,"post_id":74472353,"comment_id":131570061,"body_markdown":"Hello, could you add your Page POJO?","body":"Hello, could you add your Page POJO?"},{"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"score":0,"creation_date":1669193799,"post_id":74472353,"comment_id":131586558,"body_markdown":"@JulioC&#233;sarEstravis I&#39;ve added an update","body":"@JulioC&#233;sarEstravis I&#39;ve added an update"}],"answers":[{"comments":[{"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"score":0,"creation_date":1669193555,"post_id":74535714,"comment_id":131586482,"body_markdown":"Right, I didn&#39;t know that, thanks for the implementation details.. In this case I&#39;ll just stick with returning a `CompletableFuture` for `Queries`/`Mutations` (and btw, I do have a `Subscription` in this proj).","body":"Right, I didn&#39;t know that, thanks for the implementation details.. In this case I&#39;ll just stick with returning a <code>CompletableFuture</code> for <code>Queries</code>/<code>Mutations</code> (and btw, I do have a <code>Subscription</code> in this proj)."}],"tags":[],"owner":{"account_id":10074768,"reputation":3044,"user_id":7650222,"display_name":"Anar Sultanov"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669133349,"creation_date":1669133349,"answer_id":74535714,"question_id":74472353,"body_markdown":"First of all, if you&#39;re using Spring Boot, I would recommend that you use `spring-boot-starter-graphql` instead of `graphql-spring-boot-starter`, and you need to add `spring-boot-starter-webflux` to implement reactive data fetchers. Also if you want to return `Flux`, you should define returned type as an array in the schema (e.g. `getPages: [Page!]!`), otherwise, you should return `Mono`.\r\n\r\nThis will allow you to implement your query like this:\r\n\r\n    @Controller\r\n    public class PageController {\r\n\r\n        // ...\r\n        \r\n        @QueryMapping \r\n        public Flux&lt;Page&gt; getPages() {\r\n            return pageService.getPages();\r\n        }\r\n    }\r\n\r\nBut you should note that by default `Mono` and `Flux` are adapted to a `CompletableFuture` where `Flux` values are aggregated and turned into a `List`. If you want to stream responses, then you should also use GraphQL subscription instead of a query.","title":"SpringBoot + WebFlux + GraphQL - Expected source object to be an instance of &#39;com.example.MyObject&#39; but instead got &#39;reactor.core.publisher.FluxJust&#39;","body":"<p>First of all, if you're using Spring Boot, I would recommend that you use <code>spring-boot-starter-graphql</code> instead of <code>graphql-spring-boot-starter</code>, and you need to add <code>spring-boot-starter-webflux</code> to implement reactive data fetchers. Also if you want to return <code>Flux</code>, you should define returned type as an array in the schema (e.g. <code>getPages: [Page!]!</code>), otherwise, you should return <code>Mono</code>.</p>\n<p>This will allow you to implement your query like this:</p>\n<pre><code>@Controller\npublic class PageController {\n\n    // ...\n    \n    @QueryMapping \n    public Flux&lt;Page&gt; getPages() {\n        return pageService.getPages();\n    }\n}\n</code></pre>\n<p>But you should note that by default <code>Mono</code> and <code>Flux</code> are adapted to a <code>CompletableFuture</code> where <code>Flux</code> values are aggregated and turned into a <code>List</code>. If you want to stream responses, then you should also use GraphQL subscription instead of a query.</p>\n"}],"owner":{"account_id":17589164,"reputation":4057,"user_id":12761369,"display_name":"k-wasilewski"},"comment_count":9,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":1281,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"answer_count":1,"score":0,"last_activity_date":1669193780,"creation_date":1668674196,"question_id":74472353,"body_markdown":"I am trying to implement a reactive architecture to my Spring+MongoDB+GraphQL app, have followed some tutorials on that, but whenever I return a `Publisher&lt;Page&gt;` from my `GraphQLQueryResolver` - I get this error:\r\n```\r\n2022-11-17 09:18:56.316 ERROR 14166 --- [nio-8081-exec-1] \r\ng.servlet.DefaultGraphQLErrorHandler     : Error executing query \r\n(ExceptionWhileDataFetching): Exception while fetching data (/getPages/id) : Expected \r\nsource object to be an instance of &#39;com.example.jobscraperspringserver.types.Page&#39; but \r\ninstead got &#39;reactor.core.publisher.FluxJust&#39;\r\n```\r\n\r\nI&#39;ve played with the returned object (tried `Flux&lt;Page&gt;`, `Publisher&lt;List&lt;Page&gt;&gt;` and other configurations) as well as a type in the `schema.graphqls`, but none of them work. Besides, that&#39;s what supposed to be working in the majority of tutorials as well as some other SO issues, so I suppose that&#39;s either a bug somewhere in my code or an architectural flaw (i.e. some faulty dependency that doesn&#39;t support the type convertion).\r\n\r\nHere is my code:\r\n\r\n**PageQuery.java**\r\n```\r\n@Component\r\npublic class PageQuery implements GraphQLQueryResolver {\r\n    @Autowired\r\n    PageService pageService;\r\n\r\n    public Publisher&lt;Page&gt; getPages() {\r\n        return pageService.getPages();\r\n    }\r\n}\r\n```\r\n\r\n**PageService.java**\r\n```\r\n@Service\r\npublic class PageService {\r\n\r\n    public Flux&lt;Page&gt; getPages() {\r\n        return Flux.just(new Page(12));\r\n    }\r\n\r\n}\r\n```\r\n\r\n**schema.graphqls**\r\n```\r\ntype Page {\r\n    id: Int!\r\n    host: String\r\n}\r\n\r\ntype Query {\r\n    getPages: Page\r\n}\r\n```\r\n\r\n**pom.xml**\r\n```\r\n...\r\n\r\n&lt;dependencies&gt;\r\n        &lt;!-- Spring --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- GraphQL --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.graphql-java&lt;/groupId&gt;\r\n            &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\r\n            &lt;version&gt;5.0.2&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.graphql-java&lt;/groupId&gt;\r\n            &lt;artifactId&gt;graphql-java-tools&lt;/artifactId&gt;\r\n            &lt;version&gt;5.2.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- GraphQL subscriptions --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\r\n            &lt;artifactId&gt;reactor-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- MongoDB --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\r\n            &lt;version&gt;2.6.3&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\r\n            &lt;artifactId&gt;mongodb-driver-reactivestreams&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- h2 --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\r\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\r\n            &lt;scope&gt;runtime&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- JWT --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\r\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\r\n            &lt;version&gt;0.9.1&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- Spring Security --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\r\n            &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\r\n            &lt;scope&gt;test&lt;/scope&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\r\n        &lt;/dependency&gt;\r\n        &lt;!-- WebFlux --&gt;\r\n        &lt;dependency&gt;\r\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\r\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\r\n            &lt;version&gt;2.6.4&lt;/version&gt;\r\n        &lt;/dependency&gt;\r\n    &lt;/dependencies&gt;\r\n\r\n...\r\n```\r\n\r\n**UPDATE**\r\n\r\nApparently `com.graphql-java` doesn&#39;t handle `WebFlux`, so I&#39;ve replaced\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.graphql-java&lt;/groupId&gt;\r\n  &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\r\n  &lt;version&gt;5.0.2&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nwith\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\r\n  &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\r\n  &lt;version&gt;1.0.0-M3&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nbut now I am getting a `null` instead of a `Page`...\r\n\r\n**UPDATE 2**\r\nI&#39;ve also tried the\r\n```\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.graphql-java-kickstart&lt;/groupId&gt;\r\n  &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\r\n  &lt;version&gt;11.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n&lt;dependency&gt;\r\n  &lt;groupId&gt;com.graphql-java-kickstart&lt;/groupId&gt;\r\n  &lt;artifactId&gt;graphql-kickstart-spring-webflux&lt;/artifactId&gt;\r\n  &lt;version&gt;11.1.0&lt;/version&gt;\r\n&lt;/dependency&gt;\r\n```\r\nbut got the same result. I figured it supports a `CompletableFuture&lt;List&lt;Page&gt;&gt;`, but this is still blocking and I&#39;ve seen multiple tutorials on returning `Mono/Flux` from a graphql resolver...\r\n\r\n**UPDATE 3**\r\nI&#39;ve updated the all the Spring modules&#39; versions to `2.6.3` to be consistent and I&#39;ve also removed the `spring-boot-starter-web` dependency, as the `spring-boot-starter-webflux` should be sufficient; but neither of those fixes have solved my issue.\r\n\r\n**UPDATE 4**\r\nThis is the entity I want to return wrapped in a `Flux`:\r\n```\r\n@Document(&quot;pages&quot;)\r\npublic class Page {\r\n    @Id\r\n    private int id;\r\n    private String host;\r\n    private String path;\r\n    private String jobAnchorSelector;\r\n    private String jobLinkContains;\r\n    private int numberOfPages;\r\n    private int interval;\r\n    private Date lastScrapePerformed;\r\n    private String userUuid;\r\n\r\n    public Page() {\r\n    }\r\n\r\n    public Page(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public int getId() {\r\n        return id;\r\n    }\r\n\r\n    public void setId(int id) {\r\n        this.id = id;\r\n    }\r\n\r\n    public String getHost() {\r\n        return host;\r\n    }\r\n\r\n    public void setHost(String host) {\r\n        this.host = host;\r\n    }\r\n\r\n    public String getPath() {\r\n        return path;\r\n    }\r\n\r\n    public void setPath(String path) {\r\n        this.path = path;\r\n    }\r\n\r\n    public String getJobAnchorSelector() {\r\n        return jobAnchorSelector;\r\n    }\r\n\r\n    public void setJobAnchorSelector(String jobAnchorSelector) {\r\n        this.jobAnchorSelector = jobAnchorSelector;\r\n    }\r\n\r\n    public String getJobLinkContains() {\r\n        return jobLinkContains;\r\n    }\r\n\r\n    public void setJobLinkContains(String jobLinkContains) {\r\n        this.jobLinkContains = jobLinkContains;\r\n    }\r\n\r\n    public int getNumberOfPages() {\r\n        return numberOfPages;\r\n    }\r\n\r\n    public void setNumberOfPages(int numberOfPages) {\r\n        this.numberOfPages = numberOfPages;\r\n    }\r\n\r\n    public String toString() {\r\n        return &quot;Page [&quot; + host + path + &quot;]&quot;;\r\n    }\r\n\r\n    public int getInterval() {\r\n        return interval;\r\n    }\r\n\r\n    public void setInterval(int interval) {\r\n        this.interval = interval;\r\n    }\r\n\r\n    public Date getLastScrapePerformed() {\r\n        return lastScrapePerformed;\r\n    }\r\n\r\n    public void setLastScrapePerformed(Date lastScrapePerformed) {\r\n        this.lastScrapePerformed = lastScrapePerformed;\r\n    }\r\n\r\n    public String getUserUuid() {\r\n        return userUuid;\r\n    }\r\n\r\n    public void setUserUuid(String userUuid) {\r\n        this.userUuid = userUuid;\r\n    }\r\n}\r\n```\r\nIt&#39;s a `MongoDB` document and I&#39;m using a `ReactiveMongoRepository` to fetch that, however for the sake of simplifying this issue I was trying to return just a `Flux.just(new Page(2))`.","title":"SpringBoot + WebFlux + GraphQL - Expected source object to be an instance of &#39;com.example.MyObject&#39; but instead got &#39;reactor.core.publisher.FluxJust&#39;","body":"<p>I am trying to implement a reactive architecture to my Spring+MongoDB+GraphQL app, have followed some tutorials on that, but whenever I return a <code>Publisher&lt;Page&gt;</code> from my <code>GraphQLQueryResolver</code> - I get this error:</p>\n<pre><code>2022-11-17 09:18:56.316 ERROR 14166 --- [nio-8081-exec-1] \ng.servlet.DefaultGraphQLErrorHandler     : Error executing query \n(ExceptionWhileDataFetching): Exception while fetching data (/getPages/id) : Expected \nsource object to be an instance of 'com.example.jobscraperspringserver.types.Page' but \ninstead got 'reactor.core.publisher.FluxJust'\n</code></pre>\n<p>I've played with the returned object (tried <code>Flux&lt;Page&gt;</code>, <code>Publisher&lt;List&lt;Page&gt;&gt;</code> and other configurations) as well as a type in the <code>schema.graphqls</code>, but none of them work. Besides, that's what supposed to be working in the majority of tutorials as well as some other SO issues, so I suppose that's either a bug somewhere in my code or an architectural flaw (i.e. some faulty dependency that doesn't support the type convertion).</p>\n<p>Here is my code:</p>\n<p><strong>PageQuery.java</strong></p>\n<pre><code>@Component\npublic class PageQuery implements GraphQLQueryResolver {\n    @Autowired\n    PageService pageService;\n\n    public Publisher&lt;Page&gt; getPages() {\n        return pageService.getPages();\n    }\n}\n</code></pre>\n<p><strong>PageService.java</strong></p>\n<pre><code>@Service\npublic class PageService {\n\n    public Flux&lt;Page&gt; getPages() {\n        return Flux.just(new Page(12));\n    }\n\n}\n</code></pre>\n<p><strong>schema.graphqls</strong></p>\n<pre><code>type Page {\n    id: Int!\n    host: String\n}\n\ntype Query {\n    getPages: Page\n}\n</code></pre>\n<p><strong>pom.xml</strong></p>\n<pre><code>...\n\n&lt;dependencies&gt;\n        &lt;!-- Spring --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- GraphQL --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.graphql-java&lt;/groupId&gt;\n            &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\n            &lt;version&gt;5.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.graphql-java&lt;/groupId&gt;\n            &lt;artifactId&gt;graphql-java-tools&lt;/artifactId&gt;\n            &lt;version&gt;5.2.4&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- GraphQL subscriptions --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- MongoDB --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n            &lt;version&gt;2.6.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n            &lt;artifactId&gt;mongodb-driver-reactivestreams&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- h2 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;!-- JWT --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;\n            &lt;artifactId&gt;jjwt&lt;/artifactId&gt;\n            &lt;version&gt;0.9.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- Spring Security --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n            &lt;version&gt;2.0.4.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-core&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-security-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;!-- WebFlux --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n            &lt;version&gt;2.6.4&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n...\n</code></pre>\n<p><strong>UPDATE</strong></p>\n<p>Apparently <code>com.graphql-java</code> doesn't handle <code>WebFlux</code>, so I've replaced</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.graphql-java&lt;/groupId&gt;\n  &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\n  &lt;version&gt;5.0.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>with</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.experimental&lt;/groupId&gt;\n  &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\n  &lt;version&gt;1.0.0-M3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>but now I am getting a <code>null</code> instead of a <code>Page</code>...</p>\n<p><strong>UPDATE 2</strong>\nI've also tried the</p>\n<pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.graphql-java-kickstart&lt;/groupId&gt;\n  &lt;artifactId&gt;graphql-spring-boot-starter&lt;/artifactId&gt;\n  &lt;version&gt;11.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;com.graphql-java-kickstart&lt;/groupId&gt;\n  &lt;artifactId&gt;graphql-kickstart-spring-webflux&lt;/artifactId&gt;\n  &lt;version&gt;11.1.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>but got the same result. I figured it supports a <code>CompletableFuture&lt;List&lt;Page&gt;&gt;</code>, but this is still blocking and I've seen multiple tutorials on returning <code>Mono/Flux</code> from a graphql resolver...</p>\n<p><strong>UPDATE 3</strong>\nI've updated the all the Spring modules' versions to <code>2.6.3</code> to be consistent and I've also removed the <code>spring-boot-starter-web</code> dependency, as the <code>spring-boot-starter-webflux</code> should be sufficient; but neither of those fixes have solved my issue.</p>\n<p><strong>UPDATE 4</strong>\nThis is the entity I want to return wrapped in a <code>Flux</code>:</p>\n<pre><code>@Document(&quot;pages&quot;)\npublic class Page {\n    @Id\n    private int id;\n    private String host;\n    private String path;\n    private String jobAnchorSelector;\n    private String jobLinkContains;\n    private int numberOfPages;\n    private int interval;\n    private Date lastScrapePerformed;\n    private String userUuid;\n\n    public Page() {\n    }\n\n    public Page(int id) {\n        this.id = id;\n    }\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public String getHost() {\n        return host;\n    }\n\n    public void setHost(String host) {\n        this.host = host;\n    }\n\n    public String getPath() {\n        return path;\n    }\n\n    public void setPath(String path) {\n        this.path = path;\n    }\n\n    public String getJobAnchorSelector() {\n        return jobAnchorSelector;\n    }\n\n    public void setJobAnchorSelector(String jobAnchorSelector) {\n        this.jobAnchorSelector = jobAnchorSelector;\n    }\n\n    public String getJobLinkContains() {\n        return jobLinkContains;\n    }\n\n    public void setJobLinkContains(String jobLinkContains) {\n        this.jobLinkContains = jobLinkContains;\n    }\n\n    public int getNumberOfPages() {\n        return numberOfPages;\n    }\n\n    public void setNumberOfPages(int numberOfPages) {\n        this.numberOfPages = numberOfPages;\n    }\n\n    public String toString() {\n        return &quot;Page [&quot; + host + path + &quot;]&quot;;\n    }\n\n    public int getInterval() {\n        return interval;\n    }\n\n    public void setInterval(int interval) {\n        this.interval = interval;\n    }\n\n    public Date getLastScrapePerformed() {\n        return lastScrapePerformed;\n    }\n\n    public void setLastScrapePerformed(Date lastScrapePerformed) {\n        this.lastScrapePerformed = lastScrapePerformed;\n    }\n\n    public String getUserUuid() {\n        return userUuid;\n    }\n\n    public void setUserUuid(String userUuid) {\n        this.userUuid = userUuid;\n    }\n}\n</code></pre>\n<p>It's a <code>MongoDB</code> document and I'm using a <code>ReactiveMongoRepository</code> to fetch that, however for the sake of simplifying this issue I was trying to return just a <code>Flux.just(new Page(2))</code>.</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1669190332,"post_id":74543346,"comment_id":131585538,"body_markdown":"the code you&#39;ve shown us won&#39;t even compile, let alone produce a runtime error.","body":"the code you&#39;ve shown us won&#39;t even compile, let alone produce a runtime error."}],"answers":[{"comments":[{"owner":{"account_id":27021651,"reputation":13,"user_id":20579549,"display_name":"Manish Meena"},"score":0,"creation_date":1669194882,"post_id":74543638,"comment_id":131586938,"body_markdown":"Thanks for your help. I think I this point badly.","body":"Thanks for your help. I think I this point badly."}],"tags":[],"owner":{"account_id":1140418,"reputation":5502,"user_id":1124509,"accept_rate":53,"display_name":"Reto H&#246;hener"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":false,"score":1,"last_activity_date":1669191522,"creation_date":1669191522,"answer_id":74543638,"question_id":74543346,"body_markdown":"`br.readLine()` returns null when the end of the stream is reached. So you eventually assign null to `output`.\r\n\r\ntry:\r\n\r\n    output = new String(conn.getInputStream().readAllBytes(), StandardCharsets.UTF_8);","title":"Getting error in future get method in multithreading","body":"<p><code>br.readLine()</code> returns null when the end of the stream is reached. So you eventually assign null to <code>output</code>.</p>\n<p>try:</p>\n<pre><code>output = new String(conn.getInputStream().readAllBytes(), StandardCharsets.UTF_8);\n</code></pre>\n"},{"comments":[{"owner":{"account_id":27021651,"reputation":13,"user_id":20579549,"display_name":"Manish Meena"},"score":0,"creation_date":1669194862,"post_id":74544027,"comment_id":131586932,"body_markdown":"Thanks for your help. I think I missed this points.","body":"Thanks for your help. I think I missed this points."}],"tags":[],"owner":{"account_id":13343141,"reputation":515,"user_id":9630748,"display_name":"Arnault Le Pr&#233;vost-Corvellec"},"comment_count":1,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669193600,"creation_date":1669193600,"answer_id":74544027,"question_id":74543346,"body_markdown":"your probleme is here : \r\n``` java\r\nwhile ((output = br.readLine()) != null) {\r\n      System.out.println(&quot;result &quot;+ n );\r\n}\r\n[...]\r\nreturn output;\r\n```\r\nwhen you are getting out your loop output is null \r\n\r\nsolution \r\n``` java\r\nStringBuilder sb = new StringBuilder();\r\nwhile ((output = br.readLine()) != null) {\r\n      System.out.println(&quot;result &quot;+ n );\r\n      sb.append(output);\r\n}\r\n[...]\r\nreturn sb.toString();\r\n```\r\n\r\n","title":"Getting error in future get method in multithreading","body":"<p>your probleme is here :</p>\n<pre class=\"lang-java prettyprint-override\"><code>while ((output = br.readLine()) != null) {\n      System.out.println(&quot;result &quot;+ n );\n}\n[...]\nreturn output;\n</code></pre>\n<p>when you are getting out your loop output is null</p>\n<p>solution</p>\n<pre class=\"lang-java prettyprint-override\"><code>StringBuilder sb = new StringBuilder();\nwhile ((output = br.readLine()) != null) {\n      System.out.println(&quot;result &quot;+ n );\n      sb.append(output);\n}\n[...]\nreturn sb.toString();\n</code></pre>\n"}],"owner":{"account_id":27021651,"reputation":13,"user_id":20579549,"display_name":"Manish Meena"},"comment_count":1,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":55,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"accepted_answer_id":74544027,"answer_count":2,"score":1,"last_activity_date":1669193600,"creation_date":1669189973,"question_id":74543346,"body_markdown":"I am trying multithreading in java for the first time. My problem statement is to fetch the data from an api for multiple months together. Therefor I tried 2-3 things and stuck with the below code. I am getting null value while printing f.get(). Anyone who can explain why it is printing null value for all?\r\n\r\n```\r\nclass StyleThreadDemo implements Callable&lt;String&gt;{\r\n\t\r\n\tprivate Integer n;\r\n\tpublic StyleThreadDemo(int a){\r\n\t\tthis.setN(a);\r\n\t}\r\n\tpublic String callApi() throws Exception {\r\n\t\tString output=null;\r\n\t\ttry {\r\n\t\tURL url = new URL(&quot;https://api.publicapis.org/entries&quot;);\r\n\t\tHttpURLConnection conn = (HttpURLConnection) url.openConnection();\r\n\t\tconn.setRequestMethod(&quot;GET&quot;);\r\n\t\tconn.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\r\n\r\n\t\tif (conn.getResponseCode() != 200) {\r\n\t\t\tthrow new RuntimeException(&quot;Failed : HTTP error code : &quot;\r\n\t\t\t\t\t+ conn.getResponseCode());\r\n\t\t}\r\n\r\n\t\tBufferedReader br = new BufferedReader(new InputStreamReader(\r\n\t\t\t(conn.getInputStream())));\r\n\r\n\t\t\r\n\t\tSystem.out.println(&quot;Data starting coming .... \\n&quot;);\r\n\t\twhile ((output = br.readLine()) != null) {\r\n\t\t\tSystem.out.println(&quot;result &quot;+ n );\r\n\t\t}\r\n\r\n\t\tconn.disconnect();\r\n\t\t}catch(Exception e) {\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\t@Override\r\n\tpublic String call() throws Exception {\r\n\t\tString s=callApi();\r\n\t\t\r\n\t\treturn s;\r\n\t}\r\n\tpublic Integer getN() {\r\n\t\treturn n;\r\n\t}\r\n\tpublic void setN(Integer n) {\r\n\t\tthis.n = n;\r\n\t}\r\n}\r\n\r\npublic class StyleThread {\r\n\tpublic static void shutdownAndAwaitTermination(ExecutorService executorService) {\r\n\t    executorService.shutdown();\r\n\t    try {\r\n\t        if (!executorService.awaitTermination(60, TimeUnit.SECONDS)) {\r\n\t            executorService.shutdownNow();\r\n\t        } \r\n\t    } catch (InterruptedException ie) {\r\n\t        executorService.shutdownNow();\r\n\t        Thread.currentThread().interrupt();\r\n\t    }\r\n\t}\r\n\t public static void main(String[] args) throws Exception\r\n\t    {\r\n\t\t StyleThread styleThread = new StyleThread();\r\n\t\t \r\n\t    \tExecutorService pool = Executors.newFixedThreadPool(30);  \r\n\t    \t\r\n\t        int n = 5; // Number of threads\r\n\t        List&lt;StyleThreadDemo&gt; tasks= new ArrayList&lt;StyleThreadDemo&gt;();\r\n//\t        List&lt;Future&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\r\n\r\n\t        for (int i = 0; i &lt; n; i++) {\r\n//\t        \tFuture&lt;String&gt; result= pool.submit(new StyleThreadDemo(i));\r\n//\t        \tfutures.add(result);\r\n\t        \t\r\n\t           tasks.add(new StyleThreadDemo(i));\r\n\t           System.out.println(&quot;task added &quot;+i);\r\n\t           \r\n\t        }\r\n\t      \r\n\t        List&lt;Future&lt;String&gt;&gt; futures=pool.invokeAll(tasks); \r\n\t        shutdownAndAwaitTermination(pool);\r\n\t        \r\n\t        for (Future&lt;String&gt; f : futures) {\r\n\t        \t  \r\n\t        \t  System.out.println(&quot;printing :+f.get());\r\n\t        \t}\r\n\t       \r\n\t        \r\n\t        \r\n\t        \r\n\t    }\r\n\r\n}\r\n```","title":"Getting error in future get method in multithreading","body":"<p>I am trying multithreading in java for the first time. My problem statement is to fetch the data from an api for multiple months together. Therefor I tried 2-3 things and stuck with the below code. I am getting null value while printing f.get(). Anyone who can explain why it is printing null value for all?</p>\n<pre><code>class StyleThreadDemo implements Callable&lt;String&gt;{\n    \n    private Integer n;\n    public StyleThreadDemo(int a){\n        this.setN(a);\n    }\n    public String callApi() throws Exception {\n        String output=null;\n        try {\n        URL url = new URL(&quot;https://api.publicapis.org/entries&quot;);\n        HttpURLConnection conn = (HttpURLConnection) url.openConnection();\n        conn.setRequestMethod(&quot;GET&quot;);\n        conn.setRequestProperty(&quot;Accept&quot;, &quot;application/json&quot;);\n\n        if (conn.getResponseCode() != 200) {\n            throw new RuntimeException(&quot;Failed : HTTP error code : &quot;\n                    + conn.getResponseCode());\n        }\n\n        BufferedReader br = new BufferedReader(new InputStreamReader(\n            (conn.getInputStream())));\n\n        \n        System.out.println(&quot;Data starting coming .... \\n&quot;);\n        while ((output = br.readLine()) != null) {\n            System.out.println(&quot;result &quot;+ n );\n        }\n\n        conn.disconnect();\n        }catch(Exception e) {\n            e.printStackTrace();\n        }\n        return output;\n    }\n\n    @Override\n    public String call() throws Exception {\n        String s=callApi();\n        \n        return s;\n    }\n    public Integer getN() {\n        return n;\n    }\n    public void setN(Integer n) {\n        this.n = n;\n    }\n}\n\npublic class StyleThread {\n    public static void shutdownAndAwaitTermination(ExecutorService executorService) {\n        executorService.shutdown();\n        try {\n            if (!executorService.awaitTermination(60, TimeUnit.SECONDS)) {\n                executorService.shutdownNow();\n            } \n        } catch (InterruptedException ie) {\n            executorService.shutdownNow();\n            Thread.currentThread().interrupt();\n        }\n    }\n     public static void main(String[] args) throws Exception\n        {\n         StyleThread styleThread = new StyleThread();\n         \n            ExecutorService pool = Executors.newFixedThreadPool(30);  \n            \n            int n = 5; // Number of threads\n            List&lt;StyleThreadDemo&gt; tasks= new ArrayList&lt;StyleThreadDemo&gt;();\n//          List&lt;Future&lt;String&gt;&gt; futures = new ArrayList&lt;&gt;();\n\n            for (int i = 0; i &lt; n; i++) {\n//              Future&lt;String&gt; result= pool.submit(new StyleThreadDemo(i));\n//              futures.add(result);\n                \n               tasks.add(new StyleThreadDemo(i));\n               System.out.println(&quot;task added &quot;+i);\n               \n            }\n          \n            List&lt;Future&lt;String&gt;&gt; futures=pool.invokeAll(tasks); \n            shutdownAndAwaitTermination(pool);\n            \n            for (Future&lt;String&gt; f : futures) {\n                  \n                  System.out.println(&quot;printing :+f.get());\n                }\n           \n            \n            \n            \n        }\n\n}\n</code></pre>\n"},{"tags":["java","interface","polymorphism","overriding","abstract-class"],"comments":[{"owner":{"account_id":3116234,"reputation":9296,"user_id":2636929,"display_name":"Stultuske"},"score":0,"creation_date":1669193026,"post_id":74543886,"comment_id":131586297,"body_markdown":"you can&#39;t. do you understand the purpose of an abstract class? It&#39;s sole purpose is to be subclassed. You can&#39;t directly instantiate it, so you have to go through subclasses. If you override the method, you override it. If you don&#39;t want it overridden, don&#39;t override it","body":"you can&#39;t. do you understand the purpose of an abstract class? It&#39;s sole purpose is to be subclassed. You can&#39;t directly instantiate it, so you have to go through subclasses. If you override the method, you override it. If you don&#39;t want it overridden, don&#39;t override it"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669193359,"post_id":74543886,"comment_id":131586402,"body_markdown":"The only way I could think of atm would be to create an anonymous subclass of `A`, e.g. `A a = new A(){ public void m2() {} };`. But not sure if that&#39;s what he meant ... if he really knows a way. Some more info on why it wouldn&#39;t work with `A a = new B()`: https://stackoverflow.com/questions/6386343/how-to-call-a-super-method-ie-tostring-from-outside-a-derived-class","body":"The only way I could think of atm would be to create an anonymous subclass of <code>A</code>, e.g. <code>A a = new A(){ public void m2() {} };</code>. But not sure if that&#39;s what he meant ... if he really knows a way. Some more info on why it wouldn&#39;t work with <code>A a = new B()</code>: <a href=\"https://stackoverflow.com/questions/6386343/how-to-call-a-super-method-ie-tostring-from-outside-a-derived-class\" title=\"how to call a super method ie tostring from outside a derived class\">stackoverflow.com/questions/6386343/&hellip;</a>"},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":1,"creation_date":1669194570,"post_id":74543886,"comment_id":131586838,"body_markdown":"The only way I can think of is by using reflection - eg https://stackoverflow.com/questions/5411434/how-to-call-a-superclass-method-using-java-reflection .   I do not have a high opinion of whoever thought this would be a good interview question !","body":"The only way I can think of is by using reflection - eg <a href=\"https://stackoverflow.com/questions/5411434/how-to-call-a-superclass-method-using-java-reflection\" title=\"how to call a superclass method using java reflection\">stackoverflow.com/questions/5411434/&hellip;</a> .   I do not have a high opinion of whoever thought this would be a good interview question !"},{"owner":{"account_id":21687113,"reputation":109,"user_id":16002380,"display_name":"Shri"},"score":0,"creation_date":1669198742,"post_id":74543886,"comment_id":131588376,"body_markdown":"@Thomas, A a = new B() would result in the call of m1() in B because the method to be called would depend on the object that the reference variable a is referring to. And in this case, a is referring to an object of type B. Also at the end of the interview when I asked the interviewer about the solution to this question he told me that some concepts related to Type Promotion and Type Conversion would be applied here and asked me to try them.","body":"@Thomas, A a = new B() would result in the call of m1() in B because the method to be called would depend on the object that the reference variable a is referring to. And in this case, a is referring to an object of type B. Also at the end of the interview when I asked the interviewer about the solution to this question he told me that some concepts related to Type Promotion and Type Conversion would be applied here and asked me to try them."},{"owner":{"account_id":21687113,"reputation":109,"user_id":16002380,"display_name":"Shri"},"score":0,"creation_date":1669198923,"post_id":74543886,"comment_id":131588446,"body_markdown":"And @Thomas using anonymous inner class I am able to access the m1() in A. This I couldn&#39;t think of at that time.","body":"And @Thomas using anonymous inner class I am able to access the m1() in A. This I couldn&#39;t think of at that time."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669199362,"post_id":74543886,"comment_id":131588583,"body_markdown":"Yes, I understand why `A a = new B()` doesn&#39;t work - the link I added had some more info on the _why_. :) - I&#39;m not sure what concepts related to type promotion or conversion would be applied here as we&#39;re not dealing with primitive types but with classes and polymorphism. There&#39;s one more way I could think of but not sure if that would be the intended way: if you can change `A` then just add a parameter to `m1()` and call the method with that parameter. But that would add an overload rather than dealing with an override - if that would be the answer I&#39;d consider it an unfair trick question.","body":"Yes, I understand why <code>A a = new B()</code> doesn&#39;t work - the link I added had some more info on the <i>why</i>. :) - I&#39;m not sure what concepts related to type promotion or conversion would be applied here as we&#39;re not dealing with primitive types but with classes and polymorphism. There&#39;s one more way I could think of but not sure if that would be the intended way: if you can change <code>A</code> then just add a parameter to <code>m1()</code> and call the method with that parameter. But that would add an overload rather than dealing with an override - if that would be the answer I&#39;d consider it an unfair trick question."},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669199481,"post_id":74543886,"comment_id":131588633,"body_markdown":"@racraman as far as I know reflection wouldn&#39;t work because if you use `A.class.getMethod(&quot;m1&quot;).invoke(new B())` dynamic dispatch would still happen.","body":"@racraman as far as I know reflection wouldn&#39;t work because if you use <code>A.class.getMethod(&quot;m1&quot;).invoke(new B())</code> dynamic dispatch would still happen."},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1669200257,"post_id":74543886,"comment_id":131588916,"body_markdown":"@Thomas Just using invoke, yes - but did you follow up the answers in the question I linked to, that used MethodHandles and https://docs.oracle.com/javase/8/docs/api/java/lang/invoke/MethodHandles.Lookup.html#findSpecial-java.lang.Class-java.lang.String-java.lang.invoke.MethodType-java.lang.Class-","body":"@Thomas Just using invoke, yes - but did you follow up the answers in the question I linked to, that used MethodHandles and <a href=\"https://docs.oracle.com/javase/8/docs/api/java/lang/invoke/MethodHandles.Lookup.html#findSpecial-java.lang.Class-java.lang.String-java.lang.invoke.MethodType-java.lang.Class-\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/8/docs/api/java/lang/invoke/&hellip;</a>"},{"owner":{"account_id":319873,"reputation":87612,"user_id":637853,"accept_rate":50,"display_name":"Thomas"},"score":0,"creation_date":1669200517,"post_id":74543886,"comment_id":131588988,"body_markdown":"@racraman oh I see. That would seem to work but it&#39;s definitely something I&#39;d not want people to do - only as a last resort and only by those that really know what they&#39;re doing. I&#39;d hope the average Java developer doesn&#39;t even know how to use reflection :D","body":"@racraman oh I see. That would seem to work but it&#39;s definitely something I&#39;d not want people to do - only as a last resort and only by those that really know what they&#39;re doing. I&#39;d hope the average Java developer doesn&#39;t even know how to use reflection :D"},{"owner":{"account_id":732315,"reputation":4996,"user_id":681444,"display_name":"racraman"},"score":0,"creation_date":1669208831,"post_id":74543886,"comment_id":131591856,"body_markdown":"@Thomas Exactly - I think you share my opinion of that as an interview question !","body":"@Thomas Exactly - I think you share my opinion of that as an interview question !"}],"owner":{"account_id":21687113,"reputation":109,"user_id":16002380,"display_name":"Shri"},"comment_count":10,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":64,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669192889,"creation_date":1669192889,"question_id":74543886,"body_markdown":"In this below code:\r\n\r\n    interface I1 {\r\n    \tvoid m1();\r\n    }\r\n    \r\n    interface I2 {\r\n    \tvoid m2();\r\n    }\r\n    \r\n    abstract class A implements I1, I2 {\r\n    \tpublic void m1() {\r\n    \t\tSystem.out.println(&quot;Inside A: m1()&quot;);\r\n    \t}\r\n    }\r\n    \r\n    class B extends A {\r\n    \tpublic void m1() {\r\n    \t\tSystem.out.println(&quot;Inside B: m1()&quot;);\r\n    \t}\r\n    \tpublic void m2() {\r\n    \t\tSystem.out.println(&quot;Inside B: m2()&quot;);\r\n    \t}\r\n    }\r\n    \r\n    public class Test {\r\n    \t\r\n    \tpublic static void main(String[] args) {\r\n    \t\t\r\n    \t\t// invoke A&#39;s m1()\r\n    \t\tA a = new B();\r\n    \t\ta.m1();\r\n    \t\t\r\n    \t\t\r\n    \t}\r\n    }\r\n\r\nHow can I just invoke m1() in A without making any changes to class B i.e. we can&#39;t add super.m1() in the m1() in B? With my code I just get the m1() in B because of dynamic method dispatch or runtime polymorphism.\r\n\r\nAn interviewer asked me this question. And I told him that it wasn&#39;t possible to do so but he replied that there is a way but didn&#39;t told me how.","title":"How to invoke the method in abstract class that has been overriden in the subclass in java?","body":"<p>In this below code:</p>\n<pre><code>interface I1 {\n    void m1();\n}\n\ninterface I2 {\n    void m2();\n}\n\nabstract class A implements I1, I2 {\n    public void m1() {\n        System.out.println(&quot;Inside A: m1()&quot;);\n    }\n}\n\nclass B extends A {\n    public void m1() {\n        System.out.println(&quot;Inside B: m1()&quot;);\n    }\n    public void m2() {\n        System.out.println(&quot;Inside B: m2()&quot;);\n    }\n}\n\npublic class Test {\n    \n    public static void main(String[] args) {\n        \n        // invoke A's m1()\n        A a = new B();\n        a.m1();\n        \n        \n    }\n}\n</code></pre>\n<p>How can I just invoke m1() in A without making any changes to class B i.e. we can't add super.m1() in the m1() in B? With my code I just get the m1() in B because of dynamic method dispatch or runtime polymorphism.</p>\n<p>An interviewer asked me this question. And I told him that it wasn't possible to do so but he replied that there is a way but didn't told me how.</p>\n"},{"tags":["java","spring-webflux","flux"],"owner":{"account_id":10891141,"reputation":1976,"user_id":8006882,"accept_rate":79,"display_name":"Anna Klein"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":1,"answer_count":0,"score":1,"last_activity_date":1669192830,"creation_date":1669192830,"question_id":74543874,"body_markdown":"I have this implementation\r\n\r\n    @Override\r\n    public Flux&lt;byte[]&gt; translateData(final String datasetId) {\r\n        return keyVaultRepository.findByDatasetId(datasetId)\r\n                .map(keyVault -&gt; {\r\n                    try {\r\n                        return translatorService.createTranslator(keyVault.getKey()); // throws CryptoException in the test\r\n                    } catch (CryptoException e) {\r\n                        throw Exceptions.propagate(new ApiException(&quot;Unable to provide translated file&quot;));\r\n                    }\r\n                })\r\n                .flatMapMany(translator -&gt; storageService.getEntry(datasetId).map(translator::update));\r\n    }\r\n\r\nand this failing test\r\n\r\n    @Test\r\n    void getTranslatedDataWithError() throws StorageException, CryptoException {\r\n        final List&lt;byte[]&gt; bytes = new ArrayList&lt;&gt;();\r\n\r\n        // exec + validate\r\n        getWebTestClient()\r\n                .get()\r\n                .uri(uriBuilder -&gt; uriBuilder.path(&quot;/{datasetId}&quot;).build(datasetId))\r\n                .exchange()\r\n                .expectStatus().is5xxServerError()\r\n                .returnResult(byte[].class)\r\n                .getResponseBody()\r\n                .onErrorStop()\r\n                .subscribe(bytes::add);\r\n        \r\n        assertThat(bytes).isEmpty();\r\n    }\r\n\r\nthe part ```.is5xxServerError()``` is succeeding but the list is **not** empty.\r\n\r\nThe Microservice which is calling the endpoint of ```translateData```  should not consume any data from upstream but apparently this is the case.\r\n\r\nI&#39;ve found a workaround by throwing a ```RuntimeException```  in the catch block (I could also make the ```CryptoException```  unchecked but thats not the matter of my question) and then handle the case in my ControllerAdvice/GlobalExceptionhandler and just return a ```ResponseEntity```  with an ```ErrorDto``` .\r\n\r\nThe core of my question is, how can I do this natively with Flux. So that the consumer of the endpoint notices there is an error and ```.subscribe(bytes::add);```  wont be even executed.\r\n\r\nI have tried it already with ```.doOnError``` , ```.onErrorResume```  etc. but it always ends with a non empty list :(\r\n\r\nBy this I am afraid that the bytes will later delivered to the client (which should not of course he should get an error response)","title":"Flux consumer doesnt stop to consume data","body":"<p>I have this implementation</p>\n<pre><code>@Override\npublic Flux&lt;byte[]&gt; translateData(final String datasetId) {\n    return keyVaultRepository.findByDatasetId(datasetId)\n            .map(keyVault -&gt; {\n                try {\n                    return translatorService.createTranslator(keyVault.getKey()); // throws CryptoException in the test\n                } catch (CryptoException e) {\n                    throw Exceptions.propagate(new ApiException(&quot;Unable to provide translated file&quot;));\n                }\n            })\n            .flatMapMany(translator -&gt; storageService.getEntry(datasetId).map(translator::update));\n}\n</code></pre>\n<p>and this failing test</p>\n<pre><code>@Test\nvoid getTranslatedDataWithError() throws StorageException, CryptoException {\n    final List&lt;byte[]&gt; bytes = new ArrayList&lt;&gt;();\n\n    // exec + validate\n    getWebTestClient()\n            .get()\n            .uri(uriBuilder -&gt; uriBuilder.path(&quot;/{datasetId}&quot;).build(datasetId))\n            .exchange()\n            .expectStatus().is5xxServerError()\n            .returnResult(byte[].class)\n            .getResponseBody()\n            .onErrorStop()\n            .subscribe(bytes::add);\n    \n    assertThat(bytes).isEmpty();\n}\n</code></pre>\n<p>the part <code>.is5xxServerError()</code> is succeeding but the list is <strong>not</strong> empty.</p>\n<p>The Microservice which is calling the endpoint of <code>translateData</code>  should not consume any data from upstream but apparently this is the case.</p>\n<p>I've found a workaround by throwing a <code>RuntimeException</code>  in the catch block (I could also make the <code>CryptoException</code>  unchecked but thats not the matter of my question) and then handle the case in my ControllerAdvice/GlobalExceptionhandler and just return a <code>ResponseEntity</code>  with an <code>ErrorDto</code> .</p>\n<p>The core of my question is, how can I do this natively with Flux. So that the consumer of the endpoint notices there is an error and <code>.subscribe(bytes::add);</code>  wont be even executed.</p>\n<p>I have tried it already with <code>.doOnError</code> , <code>.onErrorResume</code>  etc. but it always ends with a non empty list :(</p>\n<p>By this I am afraid that the bytes will later delivered to the client (which should not of course he should get an error response)</p>\n"},{"tags":["java","jgit"],"answers":[{"tags":[],"owner":{"account_id":47700,"reputation":3323,"user_id":141408,"accept_rate":68,"display_name":"Sergey"},"comment_count":0,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669192117,"creation_date":1669122213,"answer_id":74533070,"question_id":74513594,"body_markdown":"Your code works with a remote repository. You need to clone it if you want to perform changes.\r\n\r\n```java\r\nGit myGit = Git.cloneRepository()\r\n                    .setURI(REMOTE_URL)\r\n                    .setDirectory(destination)\r\n                    .setCredentialsProvider(new UsernamePasswordCredentialsProvider(username,password))\r\n                    .call();\r\n```\r\n\r\nAfter you have a local copy you can add files to it.\r\n```java\r\nmyGit.add().addFilepattern(FILE_PATTERN).call();\r\n```\r\nChanging branches can be done with: \r\n```java\r\nmyGit.checkout().setName(branch).call()&#39;\r\n```\r\nDo not forget to commit the changes and push to the remote.","title":"JGit Commit file to remoteRepository without Clone","body":"<p>Your code works with a remote repository. You need to clone it if you want to perform changes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Git myGit = Git.cloneRepository()\n                    .setURI(REMOTE_URL)\n                    .setDirectory(destination)\n                    .setCredentialsProvider(new UsernamePasswordCredentialsProvider(username,password))\n                    .call();\n</code></pre>\n<p>After you have a local copy you can add files to it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>myGit.add().addFilepattern(FILE_PATTERN).call();\n</code></pre>\n<p>Changing branches can be done with:</p>\n<pre class=\"lang-java prettyprint-override\"><code>myGit.checkout().setName(branch).call()'\n</code></pre>\n<p>Do not forget to commit the changes and push to the remote.</p>\n"}],"owner":{"account_id":18191689,"reputation":35,"user_id":13237448,"display_name":"An Duy"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":192,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"accepted_answer_id":74533070,"answer_count":1,"score":0,"last_activity_date":1669192117,"creation_date":1668997514,"question_id":74513594,"body_markdown":"I&#39;m new with JGit and I&#39;m trying to checkout a remote branch and commit a file to it. But I stucked here and don&#39;t know what to do next:\r\n```\r\nCollection&lt;Ref&gt; branchs = Git.lsRemoteRepository()\r\n                    .setHeads(true)\r\n                    .setTags(true)\r\n                    .setRemote(REMOTE_URL)\r\n                    .setCredentialsProvider(new UsernamePasswordCredentialsProvider(username,password))\r\n                    .call();\r\nOptional&lt;Ref&gt; branch = branchs.stream().filter(r -&gt; r.getName().equals(&quot;refs/heads/&quot;+branchName)).findFirst();\r\n```\r\nHow can I turn *Ref* to *Repository* or something to use *GitCommand*?\r\nSorry for my bad English, thank you!\r\n","title":"JGit Commit file to remoteRepository without Clone","body":"<p>I'm new with JGit and I'm trying to checkout a remote branch and commit a file to it. But I stucked here and don't know what to do next:</p>\n<pre><code>Collection&lt;Ref&gt; branchs = Git.lsRemoteRepository()\n                    .setHeads(true)\n                    .setTags(true)\n                    .setRemote(REMOTE_URL)\n                    .setCredentialsProvider(new UsernamePasswordCredentialsProvider(username,password))\n                    .call();\nOptional&lt;Ref&gt; branch = branchs.stream().filter(r -&gt; r.getName().equals(&quot;refs/heads/&quot;+branchName)).findFirst();\n</code></pre>\n<p>How can I turn <em>Ref</em> to <em>Repository</em> or something to use <em>GitCommand</em>?\nSorry for my bad English, thank you!</p>\n"},{"tags":["java","postgresql","hibernate","spring-data-jpa"],"comments":[{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1669192208,"post_id":74543728,"comment_id":131586083,"body_markdown":"Have you tried anything? Any ideas so far? Maybe an enum with a sortOrder indicator?","body":"Have you tried anything? Any ideas so far? Maybe an enum with a sortOrder indicator?"},{"owner":{"account_id":2904446,"reputation":13,"user_id":2490204,"display_name":"MittulRazdan"},"score":0,"creation_date":1669194945,"post_id":74543728,"comment_id":131586961,"body_markdown":"Since we need a paginated response, sort order actually needs to be there when we query the table, not sure how the enum would help. Could you please share an example, I am not aware how to utilize enum for my use case.\nAnd I havent tried anything yet, looking for possible implementations over internet.","body":"Since we need a paginated response, sort order actually needs to be there when we query the table, not sure how the enum would help. Could you please share an example, I am not aware how to utilize enum for my use case. And I havent tried anything yet, looking for possible implementations over internet."},{"owner":{"account_id":9571720,"reputation":6305,"user_id":7109162,"accept_rate":84,"display_name":"XtremeBaumer"},"score":0,"creation_date":1669195661,"post_id":74543728,"comment_id":131587213,"body_markdown":"You can incorporate the value to sortOrder mapping in the query with case statements","body":"You can incorporate the value to sortOrder mapping in the query with case statements"}],"owner":{"account_id":2904446,"reputation":13,"user_id":2490204,"display_name":"MittulRazdan"},"comment_count":3,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":false,"view_count":34,"favorite_count":0,"down_vote_count":0,"up_vote_count":0,"answer_count":0,"score":0,"last_activity_date":1669192004,"creation_date":1669192004,"question_id":74543728,"body_markdown":"Sample table structure &lt;br&gt;\r\n```\r\nCREATE TABLE TABLE_1 (\r\nENTITY_TYPE VARCHAR,\r\nENTITY_NAME VARCHAR,\r\nPERSON_EID NUMBER,\r\nPERSON_ROLE VARCHAR\r\n);\r\n```\r\nFor example, allowed values in ENTITY_TYPE are {&quot;Owner&quot;, &quot;President&quot;, &quot;Exec&quot;}.\r\n\r\nI am implementing a Search API which should return paginated response sorted on below 2 columns with mentioned criteria:\r\n1. ENTITY_TYPE with custom sort order of &quot;Owner&quot; -&gt; &quot;Exec&quot; -&gt; &quot;President&quot;\r\n2. Ascending order of ENTITY_NAME\r\n\r\nMy project is built on Java with Spring Boot and uses Hibernate and Spring JPA.\r\n\r\nKindly suggest how we can achieve this type of requirement. Please let me know if more information would be required for suggestions.","title":"Custom Sort for specific values on multiple columns in Java/Hibernate","body":"<p>Sample table structure <br></p>\n<pre><code>CREATE TABLE TABLE_1 (\nENTITY_TYPE VARCHAR,\nENTITY_NAME VARCHAR,\nPERSON_EID NUMBER,\nPERSON_ROLE VARCHAR\n);\n</code></pre>\n<p>For example, allowed values in ENTITY_TYPE are {&quot;Owner&quot;, &quot;President&quot;, &quot;Exec&quot;}.</p>\n<p>I am implementing a Search API which should return paginated response sorted on below 2 columns with mentioned criteria:</p>\n<ol>\n<li>ENTITY_TYPE with custom sort order of &quot;Owner&quot; -&gt; &quot;Exec&quot; -&gt; &quot;President&quot;</li>\n<li>Ascending order of ENTITY_NAME</li>\n</ol>\n<p>My project is built on Java with Spring Boot and uses Hibernate and Spring JPA.</p>\n<p>Kindly suggest how we can achieve this type of requirement. Please let me know if more information would be required for suggestions.</p>\n"},{"tags":["java","grpc","grpc-java"],"answers":[{"comments":[{"owner":{"account_id":8198,"reputation":176803,"user_id":14637,"accept_rate":88,"display_name":"Thomas"},"score":1,"creation_date":1669193421,"post_id":74519879,"comment_id":131586431,"body_markdown":"Good debugging there! I was going to suggest you file that as a bug, but it seems like [you already have](https://github.com/grpc/grpc-java/issues/9705) :)","body":"Good debugging there! I was going to suggest you file that as a bug, but it seems like <a href=\"https://github.com/grpc/grpc-java/issues/9705\" rel=\"nofollow noreferrer\">you already have</a> :)"},{"owner":{"account_id":2859295,"reputation":549,"user_id":2454856,"accept_rate":71,"display_name":"Gerardo Figueroa"},"score":0,"creation_date":1669219585,"post_id":74519879,"comment_id":131596239,"body_markdown":"@Thomas thanks! I think it&#39;s a bug as well because I don&#39;t understand the reasoning behind not allowing two `.proto` files with the same name. It should at least consider the package plus the file name.","body":"@Thomas thanks! I think it&#39;s a bug as well because I don&#39;t understand the reasoning behind not allowing two <code>.proto</code> files with the same name. It should at least consider the package plus the file name."}],"tags":[],"owner":{"account_id":2859295,"reputation":549,"user_id":2454856,"accept_rate":71,"display_name":"Gerardo Figueroa"},"comment_count":2,"down_vote_count":0,"up_vote_count":1,"is_accepted":true,"score":1,"last_activity_date":1669191984,"creation_date":1669038345,"answer_id":74519879,"question_id":74516776,"body_markdown":"I found out the cause of the problem: you cannot add 2 gRPC services that are defined in Protobuf files with the same name.\r\n\r\nIn my case, the 2 conflicting services were both defined in 2 files, both named `services.proto`, despite being in 2 different directories and having different namespaces.\r\n\r\nThe source of this issue comes from the implementation of the `ProtoReflectionService` class ([ProtoReflectionService.java][1]):\r\n\r\n```java\r\nif (!seenFiles.contains(fileDescriptor.getName())) {\r\n  seenFiles.add(fileDescriptor.getName());\r\n  fileDescriptorsToProcess.add(fileDescriptor);\r\n}\r\n```\r\n\r\nThe solution is therefore to rename one of the two `.proto` files to avoid conflict.\r\n\r\n  [1]: https://github.com/grpc/grpc-java/blob/master/services/src/main/java/io/grpc/protobuf/services/ProtoReflectionService.java","title":"gRPC server (Java) doesn&#39;t expose service depending on the order in which it is added","body":"<p>I found out the cause of the problem: you cannot add 2 gRPC services that are defined in Protobuf files with the same name.</p>\n<p>In my case, the 2 conflicting services were both defined in 2 files, both named <code>services.proto</code>, despite being in 2 different directories and having different namespaces.</p>\n<p>The source of this issue comes from the implementation of the <code>ProtoReflectionService</code> class (<a href=\"https://github.com/grpc/grpc-java/blob/master/services/src/main/java/io/grpc/protobuf/services/ProtoReflectionService.java\" rel=\"nofollow noreferrer\">ProtoReflectionService.java</a>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (!seenFiles.contains(fileDescriptor.getName())) {\n  seenFiles.add(fileDescriptor.getName());\n  fileDescriptorsToProcess.add(fileDescriptor);\n}\n</code></pre>\n<p>The solution is therefore to rename one of the two <code>.proto</code> files to avoid conflict.</p>\n"}],"owner":{"account_id":2859295,"reputation":549,"user_id":2454856,"accept_rate":71,"display_name":"Gerardo Figueroa"},"comment_count":0,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":918,"favorite_count":0,"down_vote_count":0,"up_vote_count":2,"accepted_answer_id":74519879,"answer_count":1,"score":2,"last_activity_date":1669191984,"creation_date":1669023109,"question_id":74516776,"body_markdown":"I am building a gRPC server that needs to expose several services, as below\r\n\r\n```java\r\nServer server = ServerBuilder\r\n        .forPort(8980)\r\n        .addService(new GrpcService1())\r\n        .addService(new GrpcService2())\r\n        .addService(new GrpcService3())\r\n        .addService(ProtoReflectionService.newInstance())\r\n        .build();\r\n```\r\n\r\nThe problem is that there seems to be a conflict between the first two services (`GrpcService1` and `GrpcService2`). If I add `GrpcService1` first, and `GrpcService2` second, then the second service is not exposed. If I add `GrpcService2` first and `GrpcService1` second, the first service is not exposed. The third service is always exposed.\r\n\r\nWhat I mean with &quot;the service is not exposed&quot; is that when trying to run `grpcurl` on one of the second service&#39;s rpcs, I get an error like this:\r\n\r\n```bash\r\n$ grpcurl -plaintext \\                   \r\n  localhost:8980 \\\r\n  specs.grpc_service2.GrpcService2/someRpc\r\nError invoking method &quot;specs.grpc_service2.GrpcService2/someRpc&quot;: target server does not expose service &quot;specs.grpc_service2.GrpcService2&quot;\r\n```\r\n\r\nRunning a `grpcurl list` command does reveal all services, however.\r\n\r\n```bash\r\n$ grpcurl -plaintext localhost:8980 list\r\ngrpc.reflection.v1alpha.ServerReflection\r\nspecs.grpc_service3.GrpcService3\r\nspecs.grpc_service2.GrpcService2\r\nspecs.grpc_service1.GrpcService1\r\n```\r\n\r\nWhen using gRPC UI, I get a similar problem, just that the second service added is not included in the list of available services.\r\n\r\nBelow are some stubs for the proto definitions of the two conflicting services.\r\n\r\n`src/main/proto/grpc_service1/services.proto` (used in `GrpcService1`):\r\n\r\n```proto\r\nsyntax = &quot;proto3&quot;;\r\n\r\noption java_multiple_files = true;\r\noption java_package = &quot;com.service.internal_query_api&quot;;\r\noption java_outer_classname = &quot;InternalQueryGrpcProto&quot;;\r\n\r\npackage specs.grpc_service1;\r\n\r\nservice GrpcService1 {\r\n...\r\n```\r\n\r\n`src/main/proto/grpc_service2/services.proto` (Used in `GrpcService2`):\r\n\r\n```proto\r\nsyntax = &quot;proto3&quot;;\r\n\r\noption java_multiple_files = true;\r\noption java_package = &quot;com.service.matform.api&quot;;\r\noption java_outer_classname = &quot;MatformGrpcProto&quot;;\r\n\r\npackage specs.grpc_service2;\r\n\r\nservice GrpcService2 {\r\n...\r\n\r\n```","title":"gRPC server (Java) doesn&#39;t expose service depending on the order in which it is added","body":"<p>I am building a gRPC server that needs to expose several services, as below</p>\n<pre class=\"lang-java prettyprint-override\"><code>Server server = ServerBuilder\n        .forPort(8980)\n        .addService(new GrpcService1())\n        .addService(new GrpcService2())\n        .addService(new GrpcService3())\n        .addService(ProtoReflectionService.newInstance())\n        .build();\n</code></pre>\n<p>The problem is that there seems to be a conflict between the first two services (<code>GrpcService1</code> and <code>GrpcService2</code>). If I add <code>GrpcService1</code> first, and <code>GrpcService2</code> second, then the second service is not exposed. If I add <code>GrpcService2</code> first and <code>GrpcService1</code> second, the first service is not exposed. The third service is always exposed.</p>\n<p>What I mean with &quot;the service is not exposed&quot; is that when trying to run <code>grpcurl</code> on one of the second service's rpcs, I get an error like this:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ grpcurl -plaintext \\                   \n  localhost:8980 \\\n  specs.grpc_service2.GrpcService2/someRpc\nError invoking method &quot;specs.grpc_service2.GrpcService2/someRpc&quot;: target server does not expose service &quot;specs.grpc_service2.GrpcService2&quot;\n</code></pre>\n<p>Running a <code>grpcurl list</code> command does reveal all services, however.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ grpcurl -plaintext localhost:8980 list\ngrpc.reflection.v1alpha.ServerReflection\nspecs.grpc_service3.GrpcService3\nspecs.grpc_service2.GrpcService2\nspecs.grpc_service1.GrpcService1\n</code></pre>\n<p>When using gRPC UI, I get a similar problem, just that the second service added is not included in the list of available services.</p>\n<p>Below are some stubs for the proto definitions of the two conflicting services.</p>\n<p><code>src/main/proto/grpc_service1/services.proto</code> (used in <code>GrpcService1</code>):</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\noption java_multiple_files = true;\noption java_package = &quot;com.service.internal_query_api&quot;;\noption java_outer_classname = &quot;InternalQueryGrpcProto&quot;;\n\npackage specs.grpc_service1;\n\nservice GrpcService1 {\n...\n</code></pre>\n<p><code>src/main/proto/grpc_service2/services.proto</code> (Used in <code>GrpcService2</code>):</p>\n<pre><code>syntax = &quot;proto3&quot;;\n\noption java_multiple_files = true;\noption java_package = &quot;com.service.matform.api&quot;;\noption java_outer_classname = &quot;MatformGrpcProto&quot;;\n\npackage specs.grpc_service2;\n\nservice GrpcService2 {\n...\n\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-mvc","jsp"],"comments":[{"owner":{"account_id":1535526,"reputation":628,"user_id":1431690,"accept_rate":60,"display_name":"nettie"},"score":0,"creation_date":1669155913,"post_id":74535868,"comment_id":131579526,"body_markdown":"Please include the error text in the question, don&#39;t just include a link to the error.","body":"Please include the error text in the question, don&#39;t just include a link to the error."},{"owner":{"account_id":21187350,"reputation":13,"user_id":16793444,"display_name":"Rushikesh Khandekar"},"score":1,"creation_date":1669178453,"post_id":74535868,"comment_id":131583121,"body_markdown":"@nettie I have added the error/info.","body":"@nettie I have added the error/info."}],"answers":[{"comments":[{"owner":{"account_id":21187350,"reputation":13,"user_id":16793444,"display_name":"Rushikesh Khandekar"},"score":0,"creation_date":1669262427,"post_id":74543665,"comment_id":131606086,"body_markdown":"Thank you very much. I changed the header name and it is working now.","body":"Thank you very much. I changed the header name and it is working now."},{"owner":{"account_id":21187350,"reputation":13,"user_id":16793444,"display_name":"Rushikesh Khandekar"},"score":0,"creation_date":1669262841,"post_id":74543665,"comment_id":131606127,"body_markdown":"Thank you again for changing my question to look more professional. I think this is the reason my questions are getting closed in a stack overflow.","body":"Thank you again for changing my question to look more professional. I think this is the reason my questions are getting closed in a stack overflow."}],"tags":[],"owner":{"account_id":2161358,"reputation":42669,"user_id":1915448,"accept_rate":96,"display_name":"g00glen00b"},"comment_count":2,"down_vote_count":0,"up_vote_count":0,"is_accepted":true,"score":0,"last_activity_date":1669191670,"creation_date":1669191670,"answer_id":74543665,"question_id":74535868,"body_markdown":"The problem is that the `${header}` model is updated to contain the headers sent by the webbrowser (so it&#39;s not really an error). The easiest solution is to change the name of the model to something else, for example:\r\n\r\n```java\r\n@RequestMapping(&quot;/ktSessions&quot;)\r\npublic String ktSessionsPage(Model model) {\r\n    model.addAttribute(&quot;options&quot;,&quot;option1&quot;);\r\n    model.addAttribute(&quot;headername&quot;,&quot;header1&quot;); // Changed to &quot;headername&quot;\r\n    return &quot;ktSessions&quot;;\r\n}\r\n```\r\n\r\nDon&#39;t forget to change it in your JSP as well:\r\n\r\n\r\n```xml\r\n&lt;p&gt;Header is &lt;c:out value=&quot;${headername}&quot;&gt;&lt;/c:out&gt; &lt;/p&gt;\r\n```","title":"Unexpected result in JSP when using header model attribute","body":"<p>The problem is that the <code>${header}</code> model is updated to contain the headers sent by the webbrowser (so it's not really an error). The easiest solution is to change the name of the model to something else, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(&quot;/ktSessions&quot;)\npublic String ktSessionsPage(Model model) {\n    model.addAttribute(&quot;options&quot;,&quot;option1&quot;);\n    model.addAttribute(&quot;headername&quot;,&quot;header1&quot;); // Changed to &quot;headername&quot;\n    return &quot;ktSessions&quot;;\n}\n</code></pre>\n<p>Don't forget to change it in your JSP as well:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;p&gt;Header is &lt;c:out value=&quot;${headername}&quot;&gt;&lt;/c:out&gt; &lt;/p&gt;\n</code></pre>\n"}],"owner":{"account_id":21187350,"reputation":13,"user_id":16793444,"display_name":"Rushikesh Khandekar"},"comment_count":2,"delete_vote_count":0,"reopen_vote_count":0,"close_vote_count":0,"is_answered":true,"view_count":57,"favorite_count":0,"down_vote_count":1,"up_vote_count":1,"accepted_answer_id":74543665,"answer_count":1,"score":0,"last_activity_date":1669191979,"creation_date":1669134006,"question_id":74535868,"body_markdown":"I wrote a controller with the following model attributes:\r\n\r\n```java\r\n@RequestMapping(&quot;/ktSessions&quot;)\r\npublic String ktSessionsPage(Model model) {\r\n\tmodel.addAttribute(&quot;options&quot;,&quot;option1&quot;);\r\n\tmodel.addAttribute(&quot;header&quot;,&quot;header1&quot;);\r\n\treturn &quot;ktSessions&quot;;\r\n}\r\n```\r\n\r\nAnd I added the following JSP:\r\n\r\n```xml\r\n&lt;nav class=&quot;sidebar&quot;&gt;\r\n&lt;header&gt;Menu&lt;/header&gt;\r\n  &lt;ul&gt;\r\n        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;${options } &lt;/a&gt;&lt;/li&gt;\r\n  &lt;/ul&gt;\r\n&lt;/nav&gt;\r\n\r\n&lt;div class=&quot;main&quot;&gt;\r\n\t&lt;p&gt;Header is &lt;c:out value=&quot;${header }&quot;&gt;&lt;/c:out&gt; &lt;/p&gt;\r\n&lt;/div&gt;\r\n```\r\n\r\nWhen I run the applicaiton, I can see the &quot;option1&quot; string in the sidemenu, but in stead of the &quot;header1&quot; value I see this:\r\n\r\n```\r\n{sec-fetch-mode=navigate, referer=http://localhost:8080/SpringMVCProject/emailTemplates?header=Hi+Henry%2C, sec-fetch-site=same-origin, accept-language=en, cookie=JSESSIONID=9BFFE52B821FB30447E53F04442C0B98, sec-fetch-user=?1, accept=text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9, sec-ch-ua=&quot;Google Chrome&quot;;v=&quot;107&quot;, &quot;Chromium&quot;;v=&quot;107&quot;, &quot;Not=A?Brand&quot;;v=&quot;24&quot;, sec-ch-ua-mobile=?0, sec-ch-ua-platform=&quot;Windows&quot;, host=localhost:8080, upgrade-insecure-requests=1, connection=keep-alive, cache-control=max-age=0, accept-encoding=gzip, deflate, br, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36, sec-fetch-dest=document}\r\n```\r\n\r\nHere&#39;s a screenshot of the webpage:\r\n\r\n![Link for the error](https://i.stack.imgur.com/JlxvY.png)\r\n\r\nWhy do I see this in stead of the &quot;header1&quot; model attribute?","title":"Unexpected result in JSP when using header model attribute","body":"<p>I wrote a controller with the following model attributes:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RequestMapping(&quot;/ktSessions&quot;)\npublic String ktSessionsPage(Model model) {\n    model.addAttribute(&quot;options&quot;,&quot;option1&quot;);\n    model.addAttribute(&quot;header&quot;,&quot;header1&quot;);\n    return &quot;ktSessions&quot;;\n}\n</code></pre>\n<p>And I added the following JSP:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;nav class=&quot;sidebar&quot;&gt;\n&lt;header&gt;Menu&lt;/header&gt;\n  &lt;ul&gt;\n        &lt;li&gt;&lt;a href=&quot;#&quot;&gt;${options } &lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n&lt;/nav&gt;\n\n&lt;div class=&quot;main&quot;&gt;\n    &lt;p&gt;Header is &lt;c:out value=&quot;${header }&quot;&gt;&lt;/c:out&gt; &lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n<p>When I run the applicaiton, I can see the &quot;option1&quot; string in the sidemenu, but in stead of the &quot;header1&quot; value I see this:</p>\n<pre><code>{sec-fetch-mode=navigate, referer=http://localhost:8080/SpringMVCProject/emailTemplates?header=Hi+Henry%2C, sec-fetch-site=same-origin, accept-language=en, cookie=JSESSIONID=9BFFE52B821FB30447E53F04442C0B98, sec-fetch-user=?1, accept=text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9, sec-ch-ua=&quot;Google Chrome&quot;;v=&quot;107&quot;, &quot;Chromium&quot;;v=&quot;107&quot;, &quot;Not=A?Brand&quot;;v=&quot;24&quot;, sec-ch-ua-mobile=?0, sec-ch-ua-platform=&quot;Windows&quot;, host=localhost:8080, upgrade-insecure-requests=1, connection=keep-alive, cache-control=max-age=0, accept-encoding=gzip, deflate, br, user-agent=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36, sec-fetch-dest=document}\n</code></pre>\n<p>Here's a screenshot of the webpage:</p>\n<p><img src=\"https://i.stack.imgur.com/JlxvY.png\" alt=\"Link for the error\" /></p>\n<p>Why do I see this in stead of the &quot;header1&quot; model attribute?</p>\n"}],"has_more":true,"quota_max":10000,"quota_remaining":9361,"page":862,"page_size":100}
